(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[232],{52232:(E,W,d)=>{"use strict";d.r(W),d.d(W,{CourseModule:()=>m0});var g={};d.r(g),d.d(g,{ellipseWithEllipse:()=>ta,ellipseWithLine:()=>yc,exists:()=>vc,lineWithLine:()=>bs,pathWithEllipse:()=>$d,pathWithLine:()=>di,pathWithPath:()=>xc,pathWithPolygon:()=>yl,pathWithPolyline:()=>vl,pathWithRect:()=>Wd,polygonWithEllipse:()=>na,polygonWithLine:()=>ku,polygonWithPolygon:()=>_c,polygonWithPolyline:()=>ml,polygonWithRect:()=>Ud,polylineWithEllipse:()=>Ja,polylineWithLine:()=>Cs,polylineWithPolyline:()=>Au,polylineWithRect:()=>Wt,rectWithEllipse:()=>gl,rectWithLine:()=>pl,rectWithRect:()=>Mu});var m={};d.r(m),d.d(m,{Curve:()=>Nn,Ellipse:()=>Si,Line:()=>It,Path:()=>Lt,Point:()=>ye,Polygon:()=>Xi,Polyline:()=>rr,Rect:()=>bt,bezier:()=>Gd,ellipse:()=>Dd,intersection:()=>Gh,line:()=>ba,normalizeAngle:()=>Jo,point:()=>Iu,random:()=>ic,rect:()=>Hs,scale:()=>_n,snapToGrid:()=>_s,toDeg:()=>Qa,toRad:()=>Li,types:()=>fn});var S={};d.r(S),d.d(S,{absolute:()=>sp,bottom:()=>fp,ellipse:()=>pp,ellipseSpread:()=>hp,fn:()=>Il,left:()=>lp,line:()=>up,right:()=>cp,top:()=>dp});var T={};d.r(T),d.d(T,{bottom:()=>wf,inside:()=>mp,insideOriented:()=>Ef,left:()=>bf,manual:()=>gp,outside:()=>Tf,outsideOriented:()=>Sf,radial:()=>vp,radialOriented:()=>yp,right:()=>Cf,top:()=>Ac});var y={};d.r(y),d.d(y,{manhattan:()=>Bc,metro:()=>Vc,normal:()=>Er,oneSide:()=>Pf,orthogonal:()=>Rc});var I={};d.r(I),d.d(I,{curve:()=>jc,jumpover:()=>zp,normal:()=>Gp,rounded:()=>Up,smooth:()=>Vf});var O={};d.r(O),d.d(O,{addClass:()=>ig,mask:()=>ng,opacity:()=>rg,stroke:()=>eg});var A={};d.r(A),d.d(A,{connectionClosest:()=>Dl,connectionLength:()=>ag,connectionPerpendicular:()=>lg,connectionRatio:()=>og,resolveRef:()=>Yu});var N={};d.r(N),d.d(N,{anchor:()=>Xc,bbox:()=>hg,boundary:()=>gg,rectangle:()=>pg});var B={};d.r(B),d.d(B,{bottom:()=>_g,bottomLeft:()=>wg,bottomRight:()=>Jc,center:()=>vg,left:()=>xg,midSide:()=>Sg,modelCenter:()=>Tg,perpendicular:()=>Zc,right:()=>Kf,top:()=>yg,topLeft:()=>bg,topRight:()=>Cg});var k=d(69808),X=d(75197),q=d(6741),ue=d(22233),r=d(5e3),ae=d(21137),de=d(17448),le=d(25635),K=d(93075),ge=d(9419),Se=d(46421),Oe=d(99848);let b=(()=>{class e{transform(t,i){return t.is_teacher||i.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function Ge(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"app-course-island",7),r.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),r.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("course",t)("hasViewPermission",r.\u0275\u0275pipeBind2(2,2,i.user,t))}}function at(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Ge,3,5,"ng-container",6),r.\u0275\u0275pipe(2,"tuiFilter"),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function ze(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"app-course-island",8),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("skeleton",!0))}const Fe=function(){return[0,0,0,0,0,0]};function Ne(e,n){1&e&&r.\u0275\u0275template(0,ze,2,1,"ng-container",6),2&e&&r.\u0275\u0275property("ngForOf",r.\u0275\u0275pureFunction0(1,Fe))}let tt=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.route=i,this.courseService=o,this.STATUS=ue.Q_,this.courseNameSearch="",this.matchCourseName=(s,c)=>""===c||s.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(de.N))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),r.\u0275\u0275text(2,"Course List"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"tui-input",2),r.\u0275\u0275listener("ngModelChange",function(s){return i.courseNameSearch=s}),r.\u0275\u0275text(4," Search Courses "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",3),r.\u0275\u0275template(6,at,3,5,"ng-container",4),r.\u0275\u0275template(7,Ne,1,2,"ng-template",null,5,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()()),2&t){const o=r.\u0275\u0275reference(8);r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.courseNameSearch)("tuiTextfieldCleaner",!0),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.allCourses)("ngIfElse",o)}},directives:[le.K3,le.wU,K.NgControlStatus,K.NgModel,ge.be,k.O5,k.sg,Se.V],pipes:[Oe.S,b],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class Xe{static createForm(){return(new K.FormBuilder).group({code:new K.FormControl("",[K.Validators.required])})}static extractData(n){return n.value}}var mt=d(4024),_t=d(769),gt=d(46693),Zt=d(96063),un=d(8871);const Vn=["stepper"];function Kn(e,n){1&e&&r.\u0275\u0275element(0,"div",5)}function Hn(e,n){1&e&&r.\u0275\u0275element(0,"div",6)}const dr=function(e){return["/course",e]};function Un(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tui-notification",7),r.\u0275\u0275text(2," You are already registered in this course "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",8)(4,"a",9),r.\u0275\u0275text(5," Open Course "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(1,dr,t.courseId))}}function $e(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tui-notification",10),r.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function Je(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tui-notification",11),r.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"form",12),r.\u0275\u0275listener("ngSubmit",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext(2).onSubmit()}),r.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),r.\u0275\u0275text(6," Enter verification code\xa0"),r.\u0275\u0275element(7,"span",15),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(8,"tui-field-error",16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",8)(10,"button",17),r.\u0275\u0275text(11," Register "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementContainerEnd()}if(2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275property("formGroup",t.form),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiTextfieldCleaner",!0),r.\u0275\u0275advance(5),r.\u0275\u0275property("showLoader",t.loadingContent)}}function ct(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"h1",2),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,Kn,1,0,"div",3),r.\u0275\u0275template(4,Hn,1,0,"div",4),r.\u0275\u0275template(5,Un,6,3,"ng-container",1),r.\u0275\u0275template(6,$e,3,0,"ng-container",1),r.\u0275\u0275template(7,Je,12,3,"ng-container",1),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.showSkeletons),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.showSkeletons),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function xt(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275element(2,"tui-marker-icon",19),r.\u0275\u0275elementStart(3,"h1",20),r.\u0275\u0275text(4," Unable to find the course for registration. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"p",21),r.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd())}let Ot=(()=>{class e{constructor(t,i,o,s,c){this.route=t,this.router=i,this.courseService=o,this.changeDetector=s,this.notificationsService=c,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.parent.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=Xe.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1,this.registered=t.course_reg.is_verified,this.blocked=t.course_reg.is_blocked,t.registration_mode===ue.Jk.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const t=Xe.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,t).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(q.F0),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,i){if(1&t&&r.\u0275\u0275viewQuery(Vn,5),2&t){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(i.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275template(1,ct,8,10,"ng-container",1),r.\u0275\u0275template(2,xt,7,0,"ng-container",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.courseNotFound),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.courseNotFound))},directives:[k.O5,_t.Ls,gt.v0,q.yS,K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,le.K3,le.wU,K.NgControlStatus,K.FormControlName,ge.be,Zt.y,un.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();function G(e,n,t,i){return new(t||(t=Promise))(function(s,c){function p(M){try{C(i.next(M))}catch(x){c(x)}}function v(M){try{C(i.throw(M))}catch(x){c(x)}}function C(M){M.done?s(M.value):function o(s){return s instanceof t?s:new t(function(c){c(s)})}(M.value).then(p,v)}C((i=i.apply(e,n||[])).next())})}var gi=d(92198),xr=d(3605),vn=d(27221),mi=d(40520),Bo=d(93514);let Mi=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}getCourseEvent(t){const i=this.apiService.getURL("event",t);return this.http.get(i).pipe((0,vn.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const i=this.apiService.getURL("event",t);return this.http.delete(i).pipe((0,vn.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const i=this.apiService.getURL("event");return this.http.post(i,t).pipe((0,vn.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const i=this.apiService.getURL("event",t.id);return this.http.put(i,t).pipe((0,vn.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,vn.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,vn.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,i){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:t.id,course:i},{observe:"response"}).pipe((0,vn.K)(this.apiService.handleError("Error occurred during question import.")))}getStats(t){const i=this.apiService.getURL("event",t,"stats");return this.http.get(i).pipe((0,vn.K)(this.apiService.handleError("Error occurred while fetching event stats")))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(mi.eN),r.\u0275\u0275inject(Bo.s))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Le=d(52014),dt=d(73442),nr=d(28634),Rr=d(93030),vi=d(40022),yi=d(83618),to=d(70228),Wr=d(89627),wr=d(84620),wo=d(8929);function ji(e,n){1&e&&r.\u0275\u0275elementContainer(0)}function us(e,n){1&e&&r.\u0275\u0275elementContainer(0)}function Oa(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",4)}function ls(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,us,1,0,"ng-container",2),r.\u0275\u0275template(2,Oa,1,0,"tui-svg",3),r.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,i=n.last;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",t),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i)}}let Vo=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["ng-template","tuiBreadcrumb",""]]}),e})();var La;let fo=La=class{constructor(){this.size="m",this.items=nr.Mm,this.change$=new wo.xQ,this.mode="onLight"}ngOnChanges(){}};fo.\u0275fac=function(n){return new(n||fo)},fo.\u0275cmp=r.\u0275\u0275defineComponent({type:fo,selectors:[["tui-breadcrumbs",3,"items",""]],contentQueries:function(n,t,i){if(1&n&&r.\u0275\u0275contentQuery(i,Vo,4,r.TemplateRef),2&n){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(t.items=o)}},hostVars:1,hostBindings:function(n,t){2&n&&r.\u0275\u0275attribute("data-size",t.size)},inputs:{size:"size"},features:[r.\u0275\u0275ProvidersFeature([{provide:to.w,useExisting:(0,r.forwardRef)(()=>La)}]),r.\u0275\u0275NgOnChangesFeature],decls:3,vars:4,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],["src","tuiIconChevronRight","class","icon",4,"ngIf"],["src","tuiIconChevronRight",1,"icon"]],template:function(n,t){1&n&&(r.\u0275\u0275template(0,ji,1,0,"ng-container",0),r.\u0275\u0275pipe(1,"async"),r.\u0275\u0275template(2,ls,3,2,"ng-container",1)),2&n&&(r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(1,2,t.items.changes)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.items))},directives:[k.O5,k.sg,k.tP,wr.P],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:2.5rem;font:var(--tui-font-text-s)}[data-size='l'][_nghost-%COMP%]{font:var(--tui-font-text-m)}.icon[_ngcontent-%COMP%]{margin:0 .25rem;color:var(--tui-text-03)}"],changeDetection:0}),(0,Le.gn)([(0,r.Input)(),(0,r.HostBinding)("attr.data-size"),(0,dt.TH)()],fo.prototype,"size",void 0),(0,Le.gn)([(0,r.ContentChildren)(Vo,{read:r.TemplateRef})],fo.prototype,"items",void 0);let ru=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,q.Bz,Rr.I,vi.WD,Wr.j,wr.E,to.z]]}),e})();function la(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("routerLink",t.routerLink),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function Ps(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,la,2,2,"a",6),r.\u0275\u0275elementContainerEnd())}function Ms(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tui-breadcrumbs",4),r.\u0275\u0275template(2,Ps,2,0,"ng-container",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("size","l"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.breadCrumbs)}}function Ho(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",9),r.\u0275\u0275text(1,"crumb that is longer"),r.\u0275\u0275elementEnd())}function So(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",9),r.\u0275\u0275text(1,"crumb that is longer"),r.\u0275\u0275elementEnd())}function ca(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",9),r.\u0275\u0275text(1,"crumb that is longer"),r.\u0275\u0275elementEnd())}function Fr(e,n){1&e&&(r.\u0275\u0275elementStart(0,"tui-breadcrumbs",4),r.\u0275\u0275template(1,Ho,2,0,"a",8),r.\u0275\u0275template(2,So,2,0,"a",8),r.\u0275\u0275template(3,ca,2,0,"a",8),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("size","l")}function To(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",12)(2,"p",13),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",null==t.course?null:t.course.description," ")}}function iu(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"h5",10),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,To,4,1,"ng-container",11),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!t.course),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",null==t.course?null:t.course.name," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.displayDescription)}}function Ra(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",12)(2,"p",13),r.\u0275\u0275text(3,"Content"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd())}function cs(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"h5",14),r.\u0275\u0275text(1," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,Ra,4,0,"ng-container",11)),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.displayDescription)}}let jo=(()=>{class e{constructor(t,i,o,s,c,p){this.authenticationService=t,this.courseService=i,this.uqjService=o,this.courseEventService=s,this.route=c,this.router=p,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(v=>this.user=v)}fetchEvent(t){return G(this,void 0,void 0,function*(){this.event=yield this.courseEventService.getCourseEvent(t).toPromise(),this.uqjs=(yield this.uqjService.getUQJs({filters:{question_event:t}}).toPromise()).results})}getBreadCrumbs(t){var i;return G(this,void 0,void 0,function*(){let o;if(t.firstChild.data.breadCrumbs){if(o=t.firstChild.data.breadCrumbs,o=o.map(s=>Object.assign(Object.assign({},s),{routerLink:s.routerLink.replace(":courseId",String(this.courseId)).replace(":goalId",t.firstChild.params.goalId).replace(":eventId",t.firstChild.params.eventId).replace(":id",t.firstChild.params.id)})),t.firstChild.params.eventId){const s=t.firstChild.params.eventId;(null===(i=this.event)||void 0===i?void 0:i.id)!==s&&(yield this.fetchEvent(s)),o=o.map(c=>Object.assign(Object.assign({},c),{caption:c.caption.replace(":eventName",this.event.name)}))}if(t.firstChild.params.id){const s=+t.firstChild.params.id,c=this.uqjs.find(p=>p.question.id===s);o=o.map(p=>Object.assign(Object.assign({},p),{caption:p.caption.replace(":questionName",c.question.title)}))}}this.breadCrumbs=o})}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t}),this.getBreadCrumbs(this.route.snapshot).then(),this.displayDescription=this.router.url.includes("/homepage"),this.router.events.pipe((0,gi.h)(t=>t instanceof q.m2)).subscribe(()=>{this.breadCrumbs=null,this.displayDescription=this.router.url.includes("/homepage"),this.getBreadCrumbs(this.route.snapshot).then()})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(xr.O),r.\u0275\u0275directiveInject(Mi),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(q.F0))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:8,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[4,"ngIf","ngIfElse"],["skeletonBreadcrumbs",""],["skeletonTemplate",""],[1,"my-3",3,"size"],[4,"ngFor","ngForOf"],["tuiLink","",3,"routerLink",4,"tuiBreadcrumb"],["tuiLink","",3,"routerLink"],["tuiLink","","class","tui-skeleton",4,"tuiBreadcrumb"],["tuiLink","",1,"tui-skeleton"],[1,"tui-text_h5","mb-5"],[4,"ngIf"],[1,"mb-10","-mt-5"],[1,"tui-text_body-xl","tui-island__paragraph"],[1,"tui-text_h5","mb-5","tui-skeleton_short","tui-skeleton"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275template(1,Ms,3,2,"ng-container",1),r.\u0275\u0275template(2,Fr,4,1,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(4,iu,4,4,"ng-container",1),r.\u0275\u0275template(5,cs,3,1,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"router-outlet")),2&t){const o=r.\u0275\u0275reference(3),s=r.\u0275\u0275reference(6);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.breadCrumbs&&i.course)("ngIfElse",o),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.course)("ngIfElse",s)}},directives:[k.O5,fo,k.sg,Vo,Wr.V,q.yS,q.lC],styles:[".course-banner[_ngcontent-%COMP%]{background-color:var(--tui-secondary)}"]}),e})();var ht=d(68858);let Nr=(()=>{class e{static createForm(){return(new K.FormBuilder).group({name:new K.FormControl(null,[K.Validators.required]),type:new K.FormControl("",[K.Validators.required]),countForTokens:new K.FormControl(!1,[K.Validators.required]),startEndDatePicker:new K.FormControl(new ht.VR(ht.TU.currentLocal(),ht.TU.currentLocal().append({day:7})),[K.Validators.required]),startTimePicker:new K.FormControl(ht.qD.currentLocal(),[K.Validators.required]),endTimePicker:new K.FormControl(ht.qD.currentLocal(),[K.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new K.FormBuilder).group({name:new K.FormControl(t.name,[K.Validators.required]),type:new K.FormControl(t.type,[K.Validators.required]),countForTokens:new K.FormControl(t.count_for_tokens,[K.Validators.required]),startEndDatePicker:new K.FormControl(new ht.VR(ht.TU.fromLocalNativeDate(new Date(t.start_date)),ht.TU.fromLocalNativeDate(new Date(t.end_date))),[K.Validators.required]),startTimePicker:new K.FormControl(ht.qD.fromLocalNativeDate(new Date(t.start_date)),[K.Validators.required]),endTimePicker:new K.FormControl(ht.qD.fromLocalNativeDate(new Date(t.end_date)),[K.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,i,o){return{id:o,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:i,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,i){return new Date(t.toLocalNativeDate().getTime()+i.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,i=n.get("startTimePicker").value,o=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&o.toAbsoluteMilliseconds()<=i.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var zi=d(86097),Pr=d(95428),zo=d(13774),Gi=d(35302),Br=d(35137),_i=d(14335),no=d(35640),da=d(295),Vr=d(39193),Ai=d(52164),or=d(22307),Zn=d(61895),Ui=d(70589),Hr=d(45261),oi=d(15411),Cn=d(72997),jr=d(85113);function Xr(e,{value:n,min:t,max:i,dateFormat:o,dateSeparator:s}){return n&&n.toString(o,s)===e?e:ht.TU.normalizeParse(e,o).dayLimit(t,i).toString(o,s)}function Go(e){return n=>n.length!==ht.ek?{value:n}:{value:Xr(n,e)}}function ho(e,n){return ht.TU.normalizeParse(e.slice(0,ht.ek),n.dateFormat).dayLimit(n.min,n.max)}function Na(e,n){const{dateFormat:t,dateSeparator:i}=n;switch(e.length){case ht.ek:return ho(e,n).toString(t,i);case ht.ek+ht.mH.length:return ho(e,n).toString(t,i)+ht.mH;case ht.FZ:return n.value&&n.value.toString(t,i)===e?e:ht.VR.sort(ho(e.slice(0,ht.ek),n),ho(e.slice(ht.ek+ht.mH.length),n)).toString(t,i);default:return e}}function fa(e){return n=>({value:Na(n,e)})}function ha(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],i=Object.assign(Object.assign({},yi.bM),n);return o=>{const s=[],c=o.split("");return t.forEach(v=>{const C=e.indexOf(v),M=parseInt(String(i[v]).substr(0,1),10);parseInt(c[C],10)>M&&(c[C+1]=c[C],c[C]="0",s.push(C))}),!t.some(v=>parseInt(o.substr(e.indexOf(v),2),10)>i[v])&&{value:c.join(""),indexesOfPipedChars:s}}}const po=Array(2).fill(Vr.hW),Fa=Array(4).fill(Vr.hW);function As(e,n){return"YMD"===(jr.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...Fa,n,...po,n,...po]:[...po,n,...po,n,...Fa]}function ou(e,n){jr.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=As(e,n);return[...t,nr.f$,nr.F,nr.f$,...t]}function Uo(e,n){const{length:t}=String(e),i=Array(t).fill(Vr.hW);return n&&i.unshift(n),i}function ks(e,n={}){const{HH:t,MM:i,SS:o,MS:s}=Object.assign(Object.assign({},yi.bM),n);return[...Uo(t),...Uo(i,":"),...e.includes("HH:MM:SS")?Uo(o,":"):[],..."HH:MM:SS.MSS"===e?Uo(s,"."):[]]}var $i=d(35628),pa=d(24850),ga=d(7625),ma=d(6083),go=d(34530),Mr=d(33186),Eo=d(26171),Dt=d(24710),Io=d(53256),mo=d(2141),jn=d(66695);let Ba=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Mr.gH))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,i){2&t&&r.\u0275\u0275attribute("data-tui-color",i.tuiColor)("data-tui-background",i.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Dt.gn)([(0,r.Input)(),(0,r.HostBinding)("attr.data-tui-color"),(0,dt.TH)()],e.prototype,"tuiColor",void 0),(0,Dt.gn)([(0,r.Input)(),(0,r.HostBinding)("attr.data-tui-background"),(0,dt.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,r.Inject)(Mr.gH))],e),e})(),ds=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({}),e})();var R=d(46579);const se=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:i})=>{jr.z.assert(Number.isInteger(n)),jr.z.assert((0,R.Z2)(n,0,6)),jr.z.assert(Number.isInteger(t)),jr.z.assert((0,R.Z2)(t,0,ht.NA));let o=n*ht.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:ht.NA-(n-t)})(e,i)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new ht.TU(e.year,e.month,o)};let ke=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,i=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const o=[];for(let s=0;s<6;s++){const c=[];for(let p=0;p<ht.NA;p++){const v=se({month:t,rowIndex:s,colIndex:p,firstDayOfWeek:this.firstDayOfWeek}),M=(x,U=t)=>x.year>U.year||x.month>U.month;if(!((x,U=t)=>x.year<U.year||x.month<U.month)(v)||i){if(M(v)&&!i)break;c.push(v)}}o.push(c)}return this.currentSheet=o.filter(s=>s.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Hr.Sy,16))},e.\u0275pipe=r.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,r.Inject)(Hr.Sy))],e),e})(),Ee=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({}),e})();function Be(e,n){1&e&&r.\u0275\u0275element(0,"div",3),2&e&&r.\u0275\u0275property("innerText",n.$implicit)}function nt(e,n){if(1&e&&r.\u0275\u0275element(0,"div",12),2&e){const t=r.\u0275\u0275nextContext().ngIf;r.\u0275\u0275property("tuiBackground",t[1])}}function l(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275element(1,"div",12),r.\u0275\u0275template(2,nt,1,1,"div",13),r.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiBackground",t[0]),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.length>1)}}function f(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275listener("tuiHoveredChange",function(o){r.\u0275\u0275restoreView(t);const s=r.\u0275\u0275nextContext().tuiLet;return r.\u0275\u0275nextContext(4).onItemHovered(o&&s)})("tuiPressedChange",function(o){r.\u0275\u0275restoreView(t);const s=r.\u0275\u0275nextContext().tuiLet;return r.\u0275\u0275nextContext(4).onItemPressed(o&&s)})("click",function(){r.\u0275\u0275restoreView(t);const o=r.\u0275\u0275nextContext().tuiLet;return r.\u0275\u0275nextContext(4).onItemClick(o)}),r.\u0275\u0275elementStart(1,"div",9),r.\u0275\u0275text(2),r.\u0275\u0275template(3,l,3,2,"div",10),r.\u0275\u0275pipe(4,"tuiMapper"),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext().tuiLet,i=r.\u0275\u0275nextContext(4);r.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",i.itemIsToday(t))("t-cell_interval",i.itemIsInterval(t)),r.\u0275\u0275attribute("data-range",i.getItemRange(t))("data-state",i.getItemState(t)),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("t-item_unavailable",i.itemIsUnavailable(t)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.day," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind4(4,12,t,i.toMarkers,i.itemIsToday(t),!!i.getItemRange(t)))}}function _(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,f,5,17,"div",7),r.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,i=r.\u0275\u0275nextContext(4);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.itemIsUnavailable(t)||i.showAdjacent)}}function w(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,_,2,1,"ng-container",2),r.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext().$implicit,o=r.\u0275\u0275nextContext().tuiLet;r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiLet",o[i][t])}}function D(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",5),r.\u0275\u0275template(1,w,2,1,"ng-container",6),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext().tuiLet;r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiRepeatTimesOf",i[t].length)}}function H(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,D,2,1,"div",4),r.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let Y=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=ht.TU.currentLocal(),this.month=ht.ql.currentLocal(),this.disabledItemHandler=nr.Iy,this.markerHandler=Vr.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new r.EventEmitter,this.dayClick=new r.EventEmitter,this.toMarkers=(i,o,s)=>{if(o||s)return null;const c=this.markerHandler(i);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof ht.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:i,pressedItem:o,hoveredItem:s}=this;return i(t)?"disabled":o&&o.daySame(t)?"pressed":s&&s.daySame(t)?"hovered":null}getItemRange(t){const{value:i,hoveredItem:o}=this;return i?i instanceof ht.TU?i.daySame(t)?"single":null:i.from.daySame(t)&&!i.isSingleDay||o&&o.dayAfter(i.from)&&i.from.daySame(t)&&i.isSingleDay||o&&o.daySame(t)&&o.dayBefore(i.from)&&i.isSingleDay?"start":i.to.daySame(t)&&!i.isSingleDay||o&&o.dayBefore(i.from)&&i.from.daySame(t)&&i.isSingleDay||o&&o.daySame(t)&&o.dayAfter(i.from)&&i.isSingleDay?"end":i.isSingleDay&&i.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:i,hoveredItem:o}=this;if(null===i||i instanceof ht.TU)return!1;if(!i.isSingleDay)return i.from.daySameOrBefore(t)&&i.to.dayAfter(t);if(null===o)return!1;const s=ht.VR.sort(i.from,o);return s.from.daySameOrBefore(t)&&s.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,_i.Hm)(this.hoveredItem,t,(i,o)=>i.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Hr.lQ))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,i){2&t&&r.\u0275\u0275classProp("_single",i.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Be,1,1,"div",1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,H,2,1,"div",2),r.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(2,2,i.weekDays$)),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiLet",r.\u0275\u0275pipeBind2(4,4,i.month,!0)))},directives:[k.sg,vi.Ls,Io.Xj,k.O5,mo.c,jn.n,Ba],pipes:[k.Ov,ke,Rr.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"month",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"markerHandler",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"hoveredItem",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"showAdjacent",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"dayClick",void 0),(0,Dt.gn)([(0,r.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,r.Inject)(Hr.lQ))],e),e})(),pe=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,vi.WD,Rr.I,Io.Ih,mo.V,jn.f,ds,Ee]]}),e})();var ce=d(43360);function Ae(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",4),r.\u0275\u0275listener("tuiHoveredChange",function(o){const c=r.\u0275\u0275restoreView(t).tuiLet;return r.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=r.\u0275\u0275restoreView(t).tuiLet;return r.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const s=r.\u0275\u0275restoreView(t).tuiLet;return r.\u0275\u0275nextContext(3).onItemClick(s)}),r.\u0275\u0275elementStart(1,"div",5),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275classProp("t-cell_today",i.itemIsToday(t))("t-cell_interval",i.itemIsInterval(t)),r.\u0275\u0275property("tuiScrollIntoView",i.scrollItemIntoView(t)),r.\u0275\u0275attribute("data-range",i.getItemRange(t))("data-state",i.getItemState(t)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t)}}function He(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Ae,3,8,"div",3),r.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext().$implicit,o=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiLet",o.getItem(i,t))}}function lt(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275template(1,He,2,1,"ng-container",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiRepeatTimesOf",4))}let Rt=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=ht.ql.currentLocal().year,this.value=null,this.initialItem=ht.ql.currentLocal(),this.min=ht.K1,this.max=ht.Oy,this.disabledItemHandler=nr.Iy,this.yearClick=new r.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof ht.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,i){return 4*t+i+this.calculatedMin}getItemState(t){const{disabledItemHandler:i,max:o,pressedItem:s,hoveredItem:c}=this;return o.year<t||i!==nr.Iy&&i(t)?"disabled":s===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:i,hoveredItem:o}=this;return null===i?null:i instanceof ht.F4?i.year===t?"single":null:i.from.year===t&&!i.from.yearSame(i.to)||null!==o&&o>i.from.year&&i.from.year===t&&i.from.yearSame(i.to)||null!==o&&o===t&&o<i.from.year&&i.from.yearSame(i.to)?"start":i.to.year===t&&!i.from.yearSame(i.to)||null!==o&&o<i.from.year&&i.from.year===t&&i.from.yearSame(i.to)||null!==o&&o===t&&o>i.from.year&&i.from.yearSame(i.to)?"end":i.from.yearSame(i.to)&&i.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:i,hoveredItem:o}=this;return!(null===i||!this.isRange(i))&&(i.from.yearSame(i.to)?null!==o&&i.from.year!==o&&(0,R.Z2)(t,Math.min(i.from.year,o),Math.max(i.from.year,o)):i.from.year<=t&&i.to.year>t)}onItemHovered(t,i){this.updateHoveredItem(t,i)}onItemPressed(t,i){this.updatePressedItem(t,i)}onItemClick(t){this.yearClick.emit(new ht.F4(t))}updateHoveredItem(t,i){this.hoveredItem=t?i:null}updatePressedItem(t,i){this.pressedItem=t?i:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,i){2&t&&r.\u0275\u0275classProp("_single",i.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,i){1&t&&r.\u0275\u0275template(0,lt,2,1,"div",0),2&t&&r.\u0275\u0275property("tuiRepeatTimesOf",i.rows)},directives:[Io.Xj,vi.Ls,ce.M,mo.c,jn.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"initialItem",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"yearClick",void 0),(0,Dt.gn)([(0,r.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),Gt=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[mo.V,jn.f,Io.Ih,vi.WD,ce.e]]}),e})();var kt=d(61279),ur=d(33703),an=d(37940),br=d(3054);const $n=["wrapper"];function tn(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1,2),r.\u0275\u0275listener("tuiFocusedChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onRightClick()}),r.\u0275\u0275elementStart(2,"button",3),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onLeftClick()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"span",4),r.\u0275\u0275projection(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"button",5),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onRightClick()}),r.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiFocusable",i.computedFocusable),r.\u0275\u0275advance(2),r.\u0275\u0275classProp("arrow_hidden",i.leftComputedDisabled),r.\u0275\u0275property("title",t[0])("focusable",!1),r.\u0275\u0275advance(3),r.\u0275\u0275classProp("arrow_hidden",i.rightComputedDisabled),r.\u0275\u0275property("title",t[1])("focusable",!1)}}const Kr=["*"];let Ln=(()=>{let e=class extends Gi.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new r.EventEmitter,this.rightClick=new r.EventEmitter}get focused(){return!!this.wrapper&&(0,no.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Hr.U4))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,i){if(1&t&&r.\u0275\u0275viewQuery($n,5),2&t){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(i.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Kr,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,i){1&t&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275template(0,tn,6,9,"div",0),r.\u0275\u0275pipe(1,"async")),2&t&&r.\u0275\u0275property("ngIf",r.\u0275\u0275pipeBind1(1,1,i.spinTexts$))},directives:[k.O5,Eo.A,ur.t,br.U,an.q,gt.v0],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Dt.gn)([(0,r.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabled",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"mode",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"leftDisabled",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"rightDisabled",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"leftClick",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"rightClick",void 0),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,r.Inject)(Hr.U4))],e),e})(),pr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,an.c,br.F,ur.u,Eo.Z,gt.fN]]}),e})();var Va=d(5767);function fs(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function Qr(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",3),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onYearClick()}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("tuiFocusable",!1),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let Wi=(()=>{let e=class{constructor(){this.value=ht.ql.currentLocal(),this.min=ht.K1,this.max=ht.Oy,this.valueChange=new r.EventEmitter,this.yearClick=new r.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const i=this.value.append(t);this.min.monthSameOrAfter(i)?this.updateValue(this.min):this.max.monthSameOrBefore(i)?this.updateValue(this.max):this.updateValue(i)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),r.\u0275\u0275listener("leftClick",function(){return i.onPrevMonthClick()})("rightClick",function(){return i.onNextMonthClick()}),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275pipe(3,"tuiMonth"),r.\u0275\u0275template(4,fs,2,1,"ng-container",1),r.\u0275\u0275template(5,Qr,2,2,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(6);r.\u0275\u0275property("focusable",!1)("leftDisabled",i.prevMonthDisabled)("rightDisabled",i.nextMonthDisabled),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(2,6,r.\u0275\u0275pipeBind1(3,8,i.value))," "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.oneYear)("ngIfElse",o)}},directives:[Ln,k.O5,Wr.V,ur.t],pipes:[k.Ov,Va.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"valueChange",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"yearClick",void 0),e})(),va=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,ur.u,pr,Wr.j,Va.g]]}),e})();function ai(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),r.\u0275\u0275listener("yearClick",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onPickerYearClick(o)}),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function Po(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),r.\u0275\u0275listener("valueChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onPaginationYearClick(o)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),r.\u0275\u0275listener("hoveredItemChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onDayClick(o)}),r.\u0275\u0275pipe(2,"tuiMapper"),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),r.\u0275\u0275advance(1),r.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",r.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let Jr=(()=>{let e=class{constructor(){this.month=ht.ql.currentLocal(),this.value=null,this.disabledItemHandler=nr.Iy,this.min=ht.K1,this.max=ht.Oy,this.minViewedMonth=ht.K1,this.maxViewedMonth=ht.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=Vr.zE,this.dayClick=new r.EventEmitter,this.monthChange=new r.EventEmitter,this.hoveredItemChange=new r.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,i,o)=>s=>s.dayBefore(i)||s.dayAfter(o)||t(s)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new ht.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,_i.Hm)(this.hoveredItem,t,(i,o)=>i.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,i){if(1&t&&(r.\u0275\u0275template(0,ai,2,4,"tui-scrollbar",0),r.\u0275\u0275template(1,Po,3,14,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&t){const o=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",i.year)("ngIfElse",o)}},directives:[k.O5,kt.IB,Rt,Wi,Y],pipes:[Rr.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"month",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"minViewedMonth",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"hoveredItem",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"showAdjacent",void 0),(0,Dt.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"markerHandler",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"dayClick",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"monthChange",void 0),(0,Dt.gn)([(0,r.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),xi=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,va,pe,Gt,kt.Jy,Rr.I]]}),e})();var lr=d(56249);let ya=(()=>{let e=class{constructor(t,i,o){this.disabledItemHandler=nr.Iy,this.markerHandler=Vr.zE,this.defaultViewedMonthFirst=ht.ql.currentLocal(),this.defaultViewedMonthSecond=ht.ql.currentLocal().append({month:1}),this.min=ht.K1,this.max=ht.Oy,this.value=null,this.dayClick=new r.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(s,c)=>s.append({month:c}),t&&t.pipe((0,go.YP)(i),(0,ga.R)(o)).subscribe(s=>{this.value=s,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Cn.cU,8),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(Mr.a3))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[r.\u0275\u0275ProvidersFeature([Mr.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"tui-calendar",0),r.\u0275\u0275listener("hoveredItemChange",function(s){return i.hoveredItem=s})("dayClick",function(s){return i.onDayClick(s)})("monthChange",function(s){return i.onSectionFirstViewedMonth(s)}),r.\u0275\u0275pipe(1,"tuiMapper"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"tui-calendar",1),r.\u0275\u0275listener("hoveredItemChange",function(s){return i.hoveredItem=s})("dayClick",function(s){return i.onDayClick(s)})("monthChange",function(s){return i.onSectionSecondViewedMonth(s)}),r.\u0275\u0275pipe(3,"tuiMapper"),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275property("min",i.min)("max",i.max)("month",i.userViewedMonthFirst)("markerHandler",i.markerHandler)("maxViewedMonth",r.\u0275\u0275pipeBind3(1,18,i.cappedUserViewedMonthSecond,i.monthOffset,-1))("value",i.value)("disabledItemHandler",i.disabledItemHandler)("showAdjacent",!1)("hoveredItem",i.hoveredItem),r.\u0275\u0275advance(2),r.\u0275\u0275property("min",i.min)("max",i.max)("month",i.userViewedMonthSecond)("markerHandler",i.markerHandler)("minViewedMonth",r.\u0275\u0275pipeBind3(3,22,i.cappedUserViewedMonthFirst,i.monthOffset,1))("value",i.value)("disabledItemHandler",i.disabledItemHandler)("showAdjacent",!1)("hoveredItem",i.hoveredItem))},directives:[Jr],pipes:[Rr.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"value",void 0),(0,Le.gn)([(0,r.Output)()],e.prototype,"dayClick",void 0),e=(0,Le.gn)([(0,Le.fM)(0,(0,r.Inject)(Cn.cU)),(0,Le.fM)(0,(0,r.Optional)()),(0,Le.fM)(1,(0,r.Inject)(r.ChangeDetectorRef)),(0,Le.fM)(2,(0,r.Inject)(Mr.a3))],e),e})(),hs=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[Rr.I,kt.Jy,xi]]}),e})();const Rn=function(e,n,t,i){return[e,n,t,i,!0]},$o=function(e,n,t,i){return[e,n,t,i,!1]};function au(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),r.\u0275\u0275listener("dayClick",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onDayClick(o)}),r.\u0275\u0275pipe(1,"tuiMapper"),r.\u0275\u0275pipe(2,"tuiMapper"),r.\u0275\u0275pipe(3,"tuiMapper"),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("markerHandler",t.markerHandler)("min",r.\u0275\u0275pipeBindV(1,7,r.\u0275\u0275pureFunction4(22,Rn,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",r.\u0275\u0275pipeBindV(2,13,r.\u0275\u0275pureFunction4(27,$o,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",r.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function si(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",9)}function su(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",7),r.\u0275\u0275listener("keydown.enter.prevent",function(){const s=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext(2).onItemSelect(s)})("keydown.space.prevent",function(){const s=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext(2).onItemSelect(s)})("click",function(){const s=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext(2).onItemSelect(s)}),r.\u0275\u0275text(1),r.\u0275\u0275template(2,si,1,0,"tui-svg",8),r.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275attribute("aria-checked",i.isItemActive(t)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.isItemActive(t))}}const Wo=function(e,n,t,i,o,s){return[e,n,t,i,o,s]};function Ku(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),r.\u0275\u0275listener("dayClick",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onDayClick(o)}),r.\u0275\u0275pipe(2,"tuiMapper"),r.\u0275\u0275pipe(3,"tuiMapper"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"tui-data-list",5),r.\u0275\u0275template(5,su,3,3,"button",6),r.\u0275\u0275pipe(6,"tuiMapper"),r.\u0275\u0275pipe(7,"async"),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",r.\u0275\u0275pipeBindV(2,7,r.\u0275\u0275pureFunction4(28,Rn,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",r.\u0275\u0275pipeBindV(3,13,r.\u0275\u0275pureFunction4(33,$o,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBindV(6,19,r.\u0275\u0275pureFunction6(38,Wo,t.items,t.mapper,t.min,t.max,t.minLength,r.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let uu=(()=>{let e=class{constructor(t,i,o,s){this.otherDateText$=s,this.defaultViewedMonth=ht.ql.currentLocal(),this.disabledItemHandler=nr.Iy,this.markerHandler=Vr.zE,this.items=[],this.min=ht.K1,this.max=ht.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new r.EventEmitter,this.rangeChange=new r.EventEmitter,this.maxLengthMapper=yi.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,p,v,C,M)=>[...c.filter(x=>(null===C||x.range.from.append(C).daySameOrBefore(x.range.to))&&x.range.to.daySameOrAfter(p)&&(null===v||x.range.from.daySameOrBefore(v))),M],t&&t.pipe((0,go.YP)(i),(0,ga.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:i}=this;return"string"==typeof t&&null===i||i===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:i}=this;null!==i&&i.isSingleDay?this.updateValue(ht.VR.sort(i.from,t)):this.value=new ht.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,_i.Hm)(this.value,t.range,(i,o)=>i.from.daySame(o.from.dayLimit(this.min,this.max))&&i.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,i,o){return s=>{if(!i||!i.isSingleDay||!o)return t(s);const c=i.from.append(o,!0).append({day:1}),p=i.from.append(o).append({day:-1});return c.dayBefore(s)&&p.dayAfter(s)||t(s)}}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Cn.cU,8),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(Mr.a3),r.\u0275\u0275directiveInject(Cn.q5))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[r.\u0275\u0275ProvidersFeature([Mr.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,i){if(1&t&&(r.\u0275\u0275template(0,au,4,32,"tui-primitive-calendar-range",0),r.\u0275\u0275template(1,Ku,8,45,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&t){const o=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",!i.items.length)("ngIfElse",o)}},directives:[k.O5,ya,Eo.A,Jr,lr.qi,k.sg,lr.vK,wr.P],pipes:[Rr.c,k.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"minLength",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"maxLength",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"value",void 0),(0,Le.gn)([(0,r.Output)()],e.prototype,"valueChange",void 0),(0,Le.gn)([(0,r.Output)()],e.prototype,"rangeChange",void 0),(0,Le.gn)([dt.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,r.Inject)(Cn.cU)),(0,Le.fM)(0,(0,r.Optional)()),(0,Le.fM)(1,(0,r.Inject)(r.ChangeDetectorRef)),(0,Le.fM)(2,(0,r.Inject)(Mr.a3)),(0,Le.fM)(3,(0,r.Inject)(Cn.q5))],e),e})(),Hl=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,Rr.I,Eo.Z,xi,xi,wr.E,lr.pc,hs]]}),e})();var Yo=d(38190),Mo=d(67795);function Os(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),r.\u0275\u0275listener("valueChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onPressed(o)}),r.\u0275\u0275projection(1),r.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),r.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,i=r.\u0275\u0275nextContext(),o=r.\u0275\u0275reference(4),s=r.\u0275\u0275reference(6);r.\u0275\u0275property("pseudoFocused",i.innerPseudoFocused)("pseudoHovered",i.pseudoHovered)("pseudoPressed",i.pseudoPressed)("invalid",i.computedInvalid)("tuiTextfieldExampleText",i.computedExampleText)("nativeId",i.nativeId)("filler",i.getComputedRangeFiller(t))("readOnly",i.readOnly)("iconContent",i.computedMobile?o:s)("disabled",i.computedDisabled)("textMask",i.computedMask)("value",i.computedValue)}}function jl(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-svg",6),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onMobileClick()}),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("icon",!t.computedDisabled),r.\u0275\u0275property("src",t.calendarIcon)}}function Ha(e,n){if(1&e&&r.\u0275\u0275element(0,"tui-svg",7),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("icon",!t.computedDisabled),r.\u0275\u0275property("src",t.calendarIcon)}}function zl(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-calendar-range",8),r.\u0275\u0275listener("valueChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onRangeChange(o)}),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const ps=["*",[["input"]]],lu=["*","input"],Zr=[{provide:Gi.M$,useExisting:(0,r.forwardRef)(()=>ui)},{provide:Br.KZ,useExisting:(0,r.forwardRef)(()=>ui)},{provide:Cn.cU,deps:[[new r.Optional,new r.Self,K.NgControl],[new r.Optional,(0,r.forwardRef)(()=>Cn.LD)]],useFactory:(e,n)=>(0,zi.q7)(e,n)},ma.Sm];let ui=(()=>{let e=class extends Gi.F9{constructor(t,i,o,s,c,p,v,C,M,x,U,ne){super(t,i,ne),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=p,this.textfieldSize=v,this.textfieldExampleText=C,this.dateFormat=M,this.dateSeparator=x,this.dateTexts$=U,this.valueTransformer=ne,this.textMaskOptions={mask:ou(this.dateFormat,this.dateSeparator),pipe:fa(this),guide:!1},this.disabledItemHandler=nr.Iy,this.markerHandler=Vr.zE,this.defaultViewedMonth=ht.ql.currentLocal(),this.items=[],this.min=ht.K1,this.max=ht.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=yi.EP,this.dateFiller$=this.dateTexts$.pipe((0,pa.U)(oe=>(0,ht.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Ai.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?yi.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,_i.Hm)(this.value,t.range,(i,o)=>i.from.daySame(o.from.dayLimit(this.min,this.max))&&i.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:i,activePeriod:o}=this;return o?String(o):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):i}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new $i.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,ga.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==ht.FZ)return void this.updateValue(null);const i=ht.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(i):i)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,_i.Hm)(this.value,t,(i,o)=>i.daySame(o))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===ht.ek||this.nativeValue.length===ht.ek+ht.mH.length)&&this.updateValue(ht.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,no.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const i=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new ht.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,o=this.maxLength?i.from.append(this.maxLength).append({day:-1}):this.max;return i.to.dayAfter(o)?new ht.VR(i.from,o):i}getDateRangeFiller(t){return`${t}${ht.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(K.NgControl,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(Br.fL),r.\u0275\u0275directiveInject(or.RO),r.\u0275\u0275directiveInject(Cn.vk,8),r.\u0275\u0275directiveInject(ge.kI),r.\u0275\u0275directiveInject(ge.pX),r.\u0275\u0275directiveInject(ht.P_),r.\u0275\u0275directiveInject(ht.q_),r.\u0275\u0275directiveInject(Cn.zf),r.\u0275\u0275directiveInject(Cn.LD,8))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,i){if(1&t&&r.\u0275\u0275viewQuery(Zn.yc,5),2&t){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(i.textfield=o.first)}},hostBindings:function(t,i){1&t&&r.\u0275\u0275listener("click",function(){return i.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[r.\u0275\u0275ProvidersFeature(Zr),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:lu,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,i){if(1&t&&(r.\u0275\u0275projectionDef(ps),r.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),r.\u0275\u0275listener("openChange",function(s){return i.onOpenChange(s)})("tuiActiveZoneChange",function(s){return i.onActiveZone(s)}),r.\u0275\u0275template(1,Os,3,12,"tui-primitive-textfield",1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275template(3,jl,1,3,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(5,Ha,1,3,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(7,zl,1,9,"ng-template",null,4,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(8);r.\u0275\u0275property("canOpen",i.canOpen)("content",o)("open",i.open&&i.canOpen),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiLet",r.\u0275\u0275pipeBind1(2,4,i.dateFiller$))}},directives:[oi.o1,da.e,vi.Ls,Zn.yc,Zn.B1,Yo.n,ge.D9,ge._K,Mo.hd,wr.P,uu],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Le.gn)([(0,r.ViewChild)(Zn.yc)],e.prototype,"textfield",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"minLength",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"maxLength",void 0),(0,Le.gn)([(0,r.HostListener)("click")],e.prototype,"onClick",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,r.Optional)()),(0,Le.fM)(0,(0,r.Self)()),(0,Le.fM)(0,(0,r.Inject)(K.NgControl)),(0,Le.fM)(1,(0,r.Inject)(r.ChangeDetectorRef)),(0,Le.fM)(2,(0,r.Inject)(r.Injector)),(0,Le.fM)(3,(0,r.Inject)(Br.fL)),(0,Le.fM)(4,(0,r.Inject)(or.RO)),(0,Le.fM)(5,(0,r.Optional)()),(0,Le.fM)(5,(0,r.Inject)(Cn.vk)),(0,Le.fM)(6,(0,r.Inject)(ge.kI)),(0,Le.fM)(7,(0,r.Inject)(ge.pX)),(0,Le.fM)(8,(0,r.Inject)(ht.P_)),(0,Le.fM)(9,(0,r.Inject)(ht.q_)),(0,Le.fM)(10,(0,r.Inject)(Cn.zf)),(0,Le.fM)(11,(0,r.Optional)()),(0,Le.fM)(11,(0,r.Inject)(Cn.LD))],e),e})();var cu;let Xo=cu=class extends Ui.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};Xo.\u0275fac=function(){let e;return function(t){return(e||(e=r.\u0275\u0275getInheritedFactory(Xo)))(t||Xo)}}(),Xo.\u0275dir=r.\u0275\u0275defineDirective({type:Xo,selectors:[["tui-input-date-range"]],features:[r.\u0275\u0275ProvidersFeature([{provide:Hr.S0,useExisting:(0,r.forwardRef)(()=>cu)}]),r.\u0275\u0275InheritDefinitionFeature]});let Qu=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,Mo.QA,da.A,vi.WD,$i.wq,Zn.KW,ge.cn,oi.jh,wr.E,Hl,Yo.S]]}),e})();var ja=d(56498);function yn(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",5),r.\u0275\u0275listener("click",function(){const s=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext(2).onMenuClick(s)}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("size",i.itemSize)("disabled",i.disabledItemHandler(t)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t," ")}}function gs(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list",3),r.\u0275\u0275template(1,yn,2,3,"button",4),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.filtered)}}const Rs={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:yi.bM,itemSize:"m"},ms=new r.InjectionToken("Default parameters for input time component",{factory:()=>Rs});var za;let be=za=class extends Gi.F9{constructor(n,t,i,o){super(n,t),this.timeTexts$=i,this.options=o,this.disabledItemHandler=nr.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,no.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,pa.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const i=ht.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(i):i)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=ht.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:ks(n,this.options.maxValues),pipe:ha(n,this.options.maxValues),guide:!1}}filter(n,t,i){return n.filter(o=>o.toString(t).includes(i))}findNearestTimeFromItems(n){return this.items.reduce((t,i)=>Math.abs(i.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?i:t)}getMatch(n){return this.items.find(t=>(0,nr.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:i}=n;if(this.readOnly||!(i instanceof HTMLInputElement))return;const o=i.selectionStart||0;this.shiftTime(this.calculateShift(o,t)),i.setSelectionRange(o,o),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,no.NY)(this.nativeFocusableElement,!0,n),this.close())}};be.\u0275fac=function(n){return new(n||be)(r.\u0275\u0275directiveInject(K.NgControl,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(Cn.Yq),r.\u0275\u0275directiveInject(ms))},be.\u0275cmp=r.\u0275\u0275defineComponent({type:be,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&r.\u0275\u0275viewQuery(Zn.yc,5),2&n){let i;r.\u0275\u0275queryRefresh(i=r.\u0275\u0275loadQuery())&&(t.textfield=i.first)}},hostBindings:function(n,t){1&n&&r.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[r.\u0275\u0275ProvidersFeature([{provide:Br.KZ,useExisting:(0,r.forwardRef)(()=>za)},ma.yn]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),r.\u0275\u0275listener("openChange",function(o){return t.onOpen(o)})("focusedChange",function(o){return t.onFocused(o)}),r.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),r.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("keydown.arrowUp",function(o){return t.onArrowUp(o)})("keydown.arrowDown",function(o){return t.onArrowDown(o)}),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275projection(3),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(4,gs,2,1,"ng-template",null,2,r.\u0275\u0275templateRefExtractor)),2&n){const i=r.\u0275\u0275reference(5);r.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",i)("open",t.interactive&&t.open&&!!t.filtered.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("filler",r.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[oi.o1,Zn.yc,Zn.B1,Yo.n,ge.D9,Mo.hd,lr.qi,k.sg,lr.vK],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),be.ctorParameters=()=>[{type:K.NgControl,decorators:[{type:r.Optional},{type:r.Self},{type:r.Inject,args:[K.NgControl]}]},{type:r.ChangeDetectorRef,decorators:[{type:r.Inject,args:[r.ChangeDetectorRef]}]},{type:ja.y,decorators:[{type:r.Inject,args:[Cn.Yq]}]},{type:void 0,decorators:[{type:r.Inject,args:[ms]}]}],(0,Le.gn)([(0,r.ViewChild)(Zn.yc)],be.prototype,"textfield",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],be.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],be.prototype,"items",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],be.prototype,"itemSize",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],be.prototype,"strict",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],be.prototype,"mode",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],be.prototype,"postfix",void 0),(0,Le.gn)([dt.UM],be.prototype,"getFiller$",null),(0,Le.gn)([(0,r.HostListener)("click")],be.prototype,"onClick",null),(0,Le.gn)([dt.UM],be.prototype,"calculateMask",null),(0,Le.gn)([dt.UM],be.prototype,"filter",null),be=za=(0,Le.gn)([(0,Le.fM)(0,(0,r.Optional)()),(0,Le.fM)(0,(0,r.Self)()),(0,Le.fM)(0,(0,r.Inject)(K.NgControl)),(0,Le.fM)(1,(0,r.Inject)(r.ChangeDetectorRef)),(0,Le.fM)(2,(0,r.Inject)(Cn.Yq)),(0,Le.fM)(3,(0,r.Inject)(ms))],be);let Ye=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,Mo.QA,lr.pc,oi.jh,Zn.KW,Yo.S,ge.cn]]}),e})();function Ue(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"button",24),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275property("value",t[0]),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Mt(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list"),r.\u0275\u0275template(1,Ue,2,2,"button",23),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.localEventTypes)}}function qt(e,n){1&e&&(r.\u0275\u0275elementStart(0,"tui-notification",25),r.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),r.\u0275\u0275elementEnd())}const Mn=function(e){return["/course",e,"assignments-exams"]};let gr=(()=>{class e{constructor(t,i,o,s){this.route=t,this.courseEventService=i,this.router=o,this.notificationsService=s,this.eventId=null,this.timeOptions=(0,zi.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=Nr.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.parent.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=Nr.createFormWithData(t)}))}submitEvent(t){const i=Nr.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(i).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId,"event"]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(i).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId,"event"]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(Mi),r.\u0275\u0275directiveInject(q.F0),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"form",1),r.\u0275\u0275listener("ngSubmit",function(){return i.submitEvent(i.formData)}),r.\u0275\u0275elementStart(2,"h2",2),r.\u0275\u0275text(3,"Create New Event"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),r.\u0275\u0275text(6,"Event Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"tui-field-error",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),r.\u0275\u0275text(10," Event Type "),r.\u0275\u0275template(11,Mt,2,1,"tui-data-list",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(12,"tui-field-error",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),r.\u0275\u0275text(15,"Counts for tokens "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(16,"tui-field-error",10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),r.\u0275\u0275text(19," Start and end date "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(20,"tui-field-error",12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),r.\u0275\u0275text(24," Start time "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(25,"tui-field-error",16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),r.\u0275\u0275text(28," End time "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(29,"tui-field-error",18),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(30,qt,2,0,"tui-notification",19),r.\u0275\u0275elementStart(31,"div",20)(32,"button",21),r.\u0275\u0275text(33," Submit "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"a",22),r.\u0275\u0275text(35,"Back"),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroup",i.formData),r.\u0275\u0275advance(22),r.\u0275\u0275property("items",i.timeOptions),r.\u0275\u0275advance(4),r.\u0275\u0275property("items",i.timeOptions),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",null==i.formData.errors?null:i.formData.errors.forbiddenDateRange),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",i.formData.invalid),r.\u0275\u0275advance(2),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(6,Mn,i.courseId)))},directives:[K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,le.K3,le.wU,K.NgControlStatus,K.FormControlName,Zt.y,Pr.uJ,Pr.OI,lr.gX,lr.qi,k.sg,lr.vK,zo.p,ui,Xo,be,k.O5,_t.Ls,gt.v0,q.yS],styles:[""]}),e})();var Qn=d(30567);let Ga=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}getChallengeTeams(t){const i=this.apiService.getURL("team"),o=(new mi.LE).set("event",String(t));return this.http.get(i,{params:o}).pipe((0,vn.K)(this.apiService.handleError("Error occurred while fetching all teams of this challenge.")))}getMyTeam(t){const i=this.apiService.getURL("team","my-team"),o=(new mi.LE).set("event_id",String(t));return this.http.get(i,{params:o}).pipe((0,vn.K)(this.apiService.handleError("Error occurred while fetching My Team.")))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(mi.eN),r.\u0275\u0275inject(Bo.s))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ki=d(71105),Dr=d(27482);const Ns=function(){return["stats"]};function ee(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",8),r.\u0275\u0275text(1," Stats "),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(1,Ns))}function fe(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",5)(1,"h1",6),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div"),r.\u0275\u0275template(4,ee,2,2,"a",7),r.\u0275\u0275elementEnd()()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.event.name),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.event.has_edit_permission)}}function we(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"p",11),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"p",12),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"a",13),r.\u0275\u0275text(7," Manage Teams "),r.\u0275\u0275elementEnd()()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(t.team.name),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.getTeamMemberNames(t.team))}}function Ze(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"p",18),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const Ce=function(e){return["problem",e]};function rt(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"a",13),r.\u0275\u0275text(2," Open "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(1,Ce,t.question.id))}}const ut=function(e,n){return["/course",e,"problem",n]};function yt(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",13),r.\u0275\u0275text(1," Open "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,ut,i.courseId,t.question.id))}}const wt=function(e){return["/problems",e,"edit"]};function Ut(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"a",13),r.\u0275\u0275text(2," Edit "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(1,wt,t.question.id))}}function Vt(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-island")(1,"p",14),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"h2",15),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",16),r.\u0275\u0275element(6,"tui-tag",17),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"p",18),r.\u0275\u0275text(8),r.\u0275\u0275pipe(9,"titlecase"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"p",18),r.\u0275\u0275text(11),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(12,Ze,3,2,"ng-container",0),r.\u0275\u0275elementStart(13,"div",19),r.\u0275\u0275template(14,rt,3,3,"ng-container",20),r.\u0275\u0275template(15,yt,2,4,"ng-template",null,21,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(17,Ut,3,3,"ng-container",0),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(16),o=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2(" ",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name," "),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.question.title),r.\u0275\u0275advance(2),r.\u0275\u0275property("status",o.highlight(o.getStatus(t)))("value",o.getStatus(t)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(9,11,t.question.type_name)),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",o.eventId),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",i),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",o.user.is_teacher)}}function Ht(e,n){1&e&&(r.\u0275\u0275elementStart(0,"h2",24),r.\u0275\u0275text(1," There aren't any questions available in this event. "),r.\u0275\u0275elementEnd())}function nn(e,n){1&e&&(r.\u0275\u0275elementStart(0,"h2",24),r.\u0275\u0275text(1," There aren't any questions available in this course. "),r.\u0275\u0275elementEnd())}function Wn(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Ht,2,0,"h2",22),r.\u0275\u0275template(2,nn,2,0,"ng-template",null,23,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275reference(3),i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.eventId)("ngIfElse",t)}}function jt(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div"),r.\u0275\u0275template(2,fe,5,2,"div",1),r.\u0275\u0275template(3,we,8,2,"div",2),r.\u0275\u0275elementStart(4,"div",3),r.\u0275\u0275template(5,Vt,18,13,"tui-island",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(6,Wn,4,2,"ng-container",0),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.eventId),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","CHALLENGE"===t.event.type),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.uqjs),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.uqjs.length)}}let mr=(()=>{class e{constructor(t,i,o,s,c,p,v){this.authenticationService=t,this.router=i,this.route=o,this.uqjService=s,this.courseEventService=c,this.courseService=p,this.teamService=v,this.authenticationService.currentUser.subscribe(C=>this.user=C)}ngOnInit(){this.courseId=+this.route.snapshot.parent.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,Qn.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(i=>{this.event=i.event,this.uqjs=i.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()}),this.teamService.getMyTeam(this.eventId).subscribe(t=>this.team=t)}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}getTeamMemberNames(t){return t.member_names.join(", ")}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(q.F0),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(xr.O),r.\u0275\u0275directiveInject(Mi),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(Ga))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],["class","flex justify-between items-center",4,"ngIf"],["class","teamBar tui-space_vertical-8 flex items-center p-4 rounded",4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center"],[1,"tui-text_h3","tui-space_vertical-10"],["tuiButton","","appearance","secondary","size","s",3,"routerLink",4,"ngIf"],["tuiButton","","appearance","secondary","size","s",3,"routerLink"],[1,"teamBar","tui-space_vertical-8","flex","items-center","p-4","rounded"],[1,"grow"],[1,"tui-text_h6"],[1,"tui-text_body-l"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,i){1&t&&r.\u0275\u0275template(0,jt,7,8,"ng-container",0),2&t&&r.\u0275\u0275property("ngIf",i.uqjs)},directives:[k.O5,gt.v0,q.yS,k.sg,ki.h,Dr.Gi],pipes:[k.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.teamBar[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}"]}),e})();var Sr=d(57057),bi=d(42654),At=d(17489),_a=d(19167),oo=d(76829),Ar=d(46100),Ju=d(49201);class id{static createForm(){return(new K.FormBuilder).group({report:new K.FormControl("",[K.Validators.required]),report_details:new K.FormControl("")})}static extractData(n){return n.value}}let eh=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}reportQuestion(t,i){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},i),{question:t})).pipe((0,vn.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(mi.eN),r.\u0275\u0275inject(Bo.s))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var du=d(24417),Ds=d(74528);function Zu(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"button",9),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275property("value",t[0]),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Gl(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list"),r.\u0275\u0275template(1,Zu,2,2,"button",8),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.reportOptions)}}function th(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),r.\u0275\u0275pipe(3,"stringifyTuiDataList"),r.\u0275\u0275text(4," Reason "),r.\u0275\u0275template(5,Gl,2,1,"tui-data-list",4),r.\u0275\u0275element(6,"tui-field-error",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),r.\u0275\u0275text(9," Details "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(10,"div",2)(11,"button",7),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().submitReport()}),r.\u0275\u0275text(12," Submit Report "),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",t.formGroup),r.\u0275\u0275advance(2),r.\u0275\u0275property("valueContent",t.reportOptions?r.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),r.\u0275\u0275advance(9),r.\u0275\u0275property("disabled",t.formGroup.invalid)}}const od=function(){return{label:"Report this question",size:"m"}};let nh=(()=>{class e{constructor(t,i){this.reportQuestionService=t,this.notificationsService=i,this.open=!1,this.openChange=new r.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=id.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,id.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(eh),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,i){1&t&&(r.\u0275\u0275template(0,th,13,7,"ng-template",0),r.\u0275\u0275listener("tuiDialogChange",function(s){return i.toggleDialog(s)})),2&t&&r.\u0275\u0275property("tuiDialogOptions",r.\u0275\u0275pureFunction0(2,od))("tuiDialog",i.open)},directives:[or.iu,K.NgControlStatusGroup,K.FormGroupDirective,Pr.uJ,Pr.OI,K.NgControlStatus,K.FormControlName,lr.gX,lr.qi,k.sg,lr.vK,Zt.y,du.Jl,du.eQ,gt.v0],pipes:[Ds.J],styles:[""]}),e})();const Ul=function(e){return["../",e]};function zr(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",22)(1,"a",23),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"tui-svg",24),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(8,Ul,null==t.parentCategory?null:t.parentCategory.pk)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!t.category)}}function Ci(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",32)}function rh(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",32)}function ih(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",28,29),r.\u0275\u0275text(2),r.\u0275\u0275template(3,rh,1,0,"tui-svg",30),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(1);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(4,Ul,t.category.pk)),r.\u0275\u0275attribute("aria-checked",i.isActive),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.isActive)}}function ad(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),r.\u0275\u0275text(3),r.\u0275\u0275template(4,Ci,1,0,"tui-svg",30),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,ih,4,6,"a",31),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(2);r.\u0275\u0275property("label",t.category.name),r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(6,Ul,t.category.pk)),r.\u0275\u0275attribute("aria-checked",i.isActive),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.isActive),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.children)}}function oh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list",25),r.\u0275\u0275template(1,ad,6,8,"tui-opt-group",26),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.nestedCategories)}}function $l(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"button",34),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275property("value",t[0]),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function fu(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list"),r.\u0275\u0275template(1,$l,2,2,"button",33),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.difficulties)}}function Wl(e,n){if(1&e&&r.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("questionId",t.currentQuestionId)}}function Fs(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",36),r.\u0275\u0275element(1,"tui-marker-icon",37),r.\u0275\u0275elementStart(2,"h1",38),r.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),r.\u0275\u0275elementEnd()()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const hu=function(){return["../../concepts"]},pu=function(){return["../../../goal"]};let qu=(()=>{class e{constructor(t,i,o,s,c,p){this.route=t,this.uqjService=i,this.difficultyService=o,this.courseService=s,this.categoryService=c,this.userStatsService=p,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new bi.w}ngOnInit(){this.difficulty=this.route.snapshot.queryParamMap.get("difficulty"),this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((i,o)=>o.parent?i:[...i,{category:o,children:t.filter(s=>s.parent===o.pk).map(s=>({category:s,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(i=>{var o,s;this.courseId=Number.parseInt(i.get("courseId")),this.categoryId=Number.parseInt(i.get("categoryId")),this.category=t.find(M=>this.categoryId===M.pk),this.parentCategory=t.find(M=>this.category.parent===M.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserStatsByCategory(this.categoryId),p=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),v=this.difficultyService.getDifficulties(),C=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,Qn.D)([p,v,c,C]).subscribe(([M,x,U,ne])=>{this.uqjs=At.shuffle(M),this.difficulties=x,this.userStats=U,this.categoryUserSuccessRate=ne.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,i){var o,s;this.difficulty=t,this.include_solved=i,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!i&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=At.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const i=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",o=this.userStats.find(s=>s.difficulty===i);this.userSuccessRate=o?o.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(s=>s.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(xr.O),r.\u0275\u0275directiveInject(_a.G),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(oo.H),r.\u0275\u0275directiveInject(Ar.U))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:37,vars:42,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content","mt-3"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),r.\u0275\u0275text(5," Back to concepts "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"div",3)(7,"a",4),r.\u0275\u0275text(8," Back to goals "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(9,zr,4,10,"div",5),r.\u0275\u0275elementStart(10,"tui-hosted-dropdown",6)(11,"button",7),r.\u0275\u0275text(12),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(13,oh,2,1,"ng-template",null,8,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(15,"p",9),r.\u0275\u0275text(16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"p",10),r.\u0275\u0275text(18),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"tui-select",11),r.\u0275\u0275listener("ngModelChange",function(s){return i.updateQuestions(s,i.include_solved)}),r.\u0275\u0275pipe(20,"stringifyTuiDataList"),r.\u0275\u0275text(21," Choose a level of difficulty "),r.\u0275\u0275template(22,fu,2,1,"tui-data-list",12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"tui-checkbox-labeled",13),r.\u0275\u0275listener("ngModelChange",function(s){return i.updateQuestions(i.difficulty,s)}),r.\u0275\u0275text(24," Include Solved "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(25,"div",14)(26,"button",15),r.\u0275\u0275listener("click",function(){return i.openReportQuestion()}),r.\u0275\u0275text(27," Report "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(28,"button",16),r.\u0275\u0275listener("click",function(){return i.prevQuestion()}),r.\u0275\u0275text(29," Previous Question "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(30,"button",17),r.\u0275\u0275listener("click",function(){return i.nextQuestion()}),r.\u0275\u0275text(31," Next Question "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(32,"div",18),r.\u0275\u0275template(33,Wl,1,1,"app-problem-view",19),r.\u0275\u0275template(34,Fs,4,4,"ng-template",null,20,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(36,"app-problem-report-modal",21),r.\u0275\u0275listener("openChange",function(s){return i.reportQuestionModal=s}),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(14),s=r.\u0275\u0275reference(35);let c;r.\u0275\u0275advance(4),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(40,hu)),r.\u0275\u0275advance(3),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(41,pu)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.parentCategory),r.\u0275\u0275advance(1),r.\u0275\u0275property("content",o),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!i.category),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2(" ",i.parentCategory?"":"All ","",null!==(c=null==i.category?null:i.category.name)&&void 0!==c?c:"Category Name"," "),r.\u0275\u0275advance(3),r.\u0275\u0275classProp("tui-skeleton",!i.category||!i.userStats)("tui-skeleton_text",!i.category||!i.userStats),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*i.userSuccessRate).toFixed(2)+"%"||0," "),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!i.category||!i.userStats)("tui-skeleton_text",!i.category||!i.userStats),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*i.categorySuccessRate).toFixed(2)+"%"||0," "),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",!i.difficulties||!i.category),r.\u0275\u0275property("ngModel",i.difficulty)("tuiTextfieldCleaner",!0)("valueContent",i.difficulties?r.\u0275\u0275pipeBind3(20,36,i.difficulties,0,1):""),r.\u0275\u0275advance(4),r.\u0275\u0275classProp("tui-skeleton",!i.difficulties||!i.category),r.\u0275\u0275property("ngModel",i.include_solved),r.\u0275\u0275advance(3),r.\u0275\u0275classProp("tui-skeleton",!i.category||!i.uqjs),r.\u0275\u0275advance(2),r.\u0275\u0275classProp("tui-skeleton",!i.category||!i.uqjs),r.\u0275\u0275advance(2),r.\u0275\u0275classProp("tui-skeleton",!i.category||!i.uqjs),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.currentQuestionId&&i.category&&i.uqjs)("ngIfElse",s),r.\u0275\u0275advance(3),r.\u0275\u0275property("open",i.reportQuestionModal)("questionId",i.currentQuestionId)}},directives:[Ju.k,gt.v0,q.yS,k.O5,Wr.V,wr.P,oi.o1,lr.qi,k.sg,lr.Rs,lr.vK,q.Od,Pr.uJ,Pr.OI,ge.sz,K.NgControlStatus,K.NgModel,ge.be,lr.gX,zo.p,K.DefaultValueAccessor,Sr.z,un.B,nh],pipes:[Ds.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),Ua=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}getGoal(t){const i=this.apiService.getURL("goal",t);return this.http.get(i).pipe((0,vn.K)(this.apiService.handleError("Unable to fetch goal.")))}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,vn.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const i=this.apiService.getURL("goal");return this.http.post(i,t).pipe((0,vn.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const i=this.apiService.getURL("goal-item");return this.http.post(i,t).pipe((0,vn.K)(this.apiService.handleError("Unable to create goal item.")))}getSuggestions(){const t=this.apiService.getURL("goal","suggestions");return this.http.get(t).pipe((0,vn.K)(this.apiService.handleError("Unable to fetch goal suggestions.")))}claim(t){const i=this.apiService.getURL("goal",t,"claim");return this.http.post(i,{}).pipe((0,vn.K)(this.apiService.handleFormError()))}getLimits(){const t=this.apiService.getURL("goal","limits");return this.http.get(t).pipe((0,vn.K)(this.apiService.handleError("Unable to fetch goal limits")))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(mi.eN),r.\u0275\u0275inject(Bo.s))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const sd=e=>`Solve ${e.number_of_questions} ${e.difficulty} questions from ${e.category_name}`;var el=d(71764),ud=d(72243);d(95489),d(2836),d(65063),d(97739);const cd=["tuiProgressBar",""],Bs=["tuiProgressLabel",""],tl=[[["progress"]],[["tui-progress-circle"]],"*"],vo=["progress","tui-progress-circle","*"];let dd=(()=>{let e=class{constructor(){this.size="m"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(t,i){2&t&&(r.\u0275\u0275attribute("data-size",i.size),r.\u0275\u0275styleProp("--tui-progress-color",i.color))},inputs:{size:"size",color:"color"},attrs:cd,decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;color:var(--tui-progress-color,currentColor);background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear;background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size='m'][_nghost-%COMP%]{height:1.5rem}[data-size='s'][_nghost-%COMP%]{border-radius:var(--tui-radius-xs);height:.5rem}[data-size='s'][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size='s'][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,Le.gn)([(0,r.Input)(),(0,r.HostBinding)("style.--tui-progress-color")],e.prototype,"color",void 0),(0,Le.gn)([(0,r.Input)(),(0,r.HostBinding)("attr.data-size"),(0,dt.TH)()],e.prototype,"size",void 0),e})(),hd=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["label","tuiProgressLabel",""]],attrs:Bs,ngContentSelectors:vo,decls:4,vars:0,consts:[[1,"t-label"]],template:function(t,i){1&t&&(r.\u0275\u0275projectionDef(tl),r.\u0275\u0275projection(0),r.\u0275\u0275projection(1,1),r.\u0275\u0275elementStart(2,"span",0),r.\u0275\u0275projection(3,2),r.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),e})(),uh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,Io.Ih]]}),e})();function lh(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",16)}const ch=function(e,n){return["/course",e,"practice","category",n]},dh=function(e){return{difficulty:e}};function xa(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",17),r.\u0275\u0275text(1," Practice "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(2,ch,i.courseId,t.category))("queryParams",r.\u0275\u0275pureFunction1(5,dh,t.difficulty))}}function fh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"li",6)(1,"div",7)(2,"div"),r.\u0275\u0275text(3),r.\u0275\u0275template(4,lh,1,0,"tui-svg",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,xa,2,7,"a",15),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate3(" ",i.getGoalItemString(t)," (Solved ",t.progress," / ",t.number_of_questions,") "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.progress>=t.number_of_questions),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.progress<t.number_of_questions&&!i.goal.is_finished)}}function hh(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",16)}function ph(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div")(1,"span",3),r.\u0275\u0275text(2,"Due:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",t.getRelativeTime(t.goal.end_date)," ")}}const gh=function(e){return[e]};function mh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",18),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(2,gh,t.goal.id)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.canClaim()?"Review Performance":"View Progress"," ")}}let Wa=(()=>{class e{constructor(t){this.route=t,this.showPerformanceButton=!0,el.extend(ud),this.courseId=this.route.parent.snapshot.params.courseId}canClaim(){return!this.goal.claimed&&this.goal.progress>=this.goal.number_of_questions}getGoalItemString(t){return sd(t)}getRelativeTime(t){return el(t).fromNow(!0)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-island"]],inputs:{goal:"goal",showPerformanceButton:"showPerformanceButton"},decls:19,vars:8,consts:[[1,"shadow"],[1,"flex","flex-wrap","gap-5"],[1,"flex-1","space-y-1"],[1,"tui-text_bold"],[1,"tui-list","pl-3"],["class","tui-list__item",4,"ngFor","ngForOf"],[1,"tui-list__item"],[1,"flex","flex-wrap","gap-3"],["class","success","src","tuiIconCheck",4,"ngIf"],[1,"min-w-200","flex","flex-col","space-y-3"],[4,"ngIf"],[1,"flex-grow","w-full"],["tuiProgressLabel","",1,"w-full"],["tuiProgressBar","",1,"info",3,"max","value"],["tuiButton","","size","m","appearance","secondary","class","w-full",3,"routerLink",4,"ngIf"],["tuiLink","","icon","tuiIconPlay","iconAlign","left",3,"routerLink","queryParams",4,"ngIf"],["src","tuiIconCheck",1,"success"],["tuiLink","","icon","tuiIconPlay","iconAlign","left",3,"routerLink","queryParams"],["tuiButton","","size","m","appearance","secondary",1,"w-full",3,"routerLink"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"tui-island",0)(1,"div",1)(2,"div",2)(3,"span",3),r.\u0275\u0275text(4,"Tasks:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"ul",4),r.\u0275\u0275template(6,fh,6,5,"li",5),r.\u0275\u0275elementStart(7,"li",6)(8,"div",7)(9,"div"),r.\u0275\u0275text(10," Review performance "),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(11,hh,1,0,"tui-svg",8),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(12,"div",9),r.\u0275\u0275template(13,ph,4,1,"div",10),r.\u0275\u0275elementStart(14,"div",11)(15,"label",12),r.\u0275\u0275text(16),r.\u0275\u0275element(17,"progress",13),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(18,mh,2,4,"a",14),r.\u0275\u0275elementEnd()()()),2&t&&(r.\u0275\u0275advance(6),r.\u0275\u0275property("ngForOf",i.goal.goal_items),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngIf",i.goal.claimed),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!i.goal.is_finished),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate2(" ",i.goal.progress+(i.goal.claimed?1:0)," / ",i.goal.number_of_questions+1," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("max",i.goal.number_of_questions+1)("value",i.goal.progress+(i.goal.claimed?1:0)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.showPerformanceButton))},directives:[ki.h,k.sg,k.O5,wr.P,Wr.V,q.yS,hd,dd,gt.v0],styles:[".success[_ngcontent-%COMP%]{color:var(--tui-success-fill)}.info[_ngcontent-%COMP%]{color:var(--tui-info-fill)}"]}),e})();function vh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275element(1,"app-goal-island",10),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("goal",t)}}function yh(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,vh,2,1,"div",8),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.activeGoals)}}function ko(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275element(1,"app-goal-island",10),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("goal",t)}}function _h(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,ko,2,1,"div",8),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.completedGoals)}}function xh(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275element(1,"tui-marker-icon",12),r.\u0275\u0275elementStart(2,"h2",13),r.\u0275\u0275text(3," Looks like there are no goals to show "),r.\u0275\u0275elementEnd()())}const bh=function(){return["../practice"]};let Ch=(()=>{class e{constructor(t){this.goalService=t,this.unclaimedGoals=0}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.activeGoals=t.filter(i=>!i.is_finished),this.completedGoals=t.filter(i=>i.is_finished),this.unclaimedGoals=t.filter(i=>!i.claimed&&i.progress>=i.number_of_questions).length})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Ua))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:14,vars:6,consts:[[1,"tui-container","tui-container_adaptive"],[1,"flex","flex-wrap","gap-3","tui-space_top-6"],[1,"tui-text_h3","tui-col_stretch","flex-grow"],["tuiButton","","size","m","routerLink","create",1,"min-w-200","mr-4"],["icon","tuiIconArrowLeft","size","s","tuiButton","","appearance","flat",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"tui-text_h3","tui-space_top-6"],["noGoal",""],["class","tui-space_vertical-3",4,"ngFor","ngForOf"],[1,"tui-space_vertical-3"],[3,"goal"],[1,"flex","justify-center","items-center","w-full","h-32"],["size","s","src","tuiIconAlertCircleLarge",1,"tui-space_right-4"],[1,"tui-text_body-xl"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),r.\u0275\u0275text(3," Active Goals "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"a",3),r.\u0275\u0275text(5,"Create a new goal"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"a",4),r.\u0275\u0275text(7," Back to question bank "),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,yh,2,1,"ng-container",5),r.\u0275\u0275elementStart(9,"h3",6),r.\u0275\u0275text(10," Past Goals "),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(11,_h,2,1,"ng-container",5),r.\u0275\u0275template(12,xh,4,0,"ng-template",null,7,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(13);r.\u0275\u0275advance(6),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(5,bh)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.activeGoals&&0!==i.activeGoals.length)("ngIfElse",o),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.completedGoals&&0!==i.completedGoals.length)("ngIfElse",o)}},directives:[gt.v0,q.yS,k.O5,k.sg,Wa,un.B],styles:[""]}),e})();class Ya{static createGoalForm(){return(new K.FormBuilder).group({end_date:new K.FormControl(ht.TU.currentLocal().append({day:7}),[K.Validators.required]),end_time:new K.FormControl(ht.qD.currentLocal(),[K.Validators.required]),goal_items:new K.FormArray([Ya.createGoalItemForm()],[K.Validators.required])})}static createGoalFormFromGoal(n){const t=new Date(n.end_date);return(new K.FormBuilder).group({end_date:new K.FormControl(ht.TU.fromLocalNativeDate(t),[K.Validators.required]),end_time:new K.FormControl(ht.qD.fromLocalNativeDate(t),[K.Validators.required]),goal_items:new K.FormArray(n.goal_items.map(Ya.createGoalItemFormFromGoalItem),[K.Validators.required])})}static createGoalItemForm(){return(new K.FormBuilder).group({category:new K.FormControl("",[K.Validators.required]),difficulty:new K.FormControl("",[K.Validators.required]),number_of_questions:new K.FormControl("",[K.Validators.required])})}static createGoalItemFormFromGoalItem(n){return(new K.FormBuilder).group({category:new K.FormControl(n.category,[K.Validators.required]),difficulty:new K.FormControl(n.difficulty,[K.Validators.required]),number_of_questions:new K.FormControl(n.number_of_questions,[K.Validators.required])})}static formatGoalFormData(n,t){return{course_id:t,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static formatGoalItemFormData(n,t){return Object.assign({goal:t},n.value)}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function gd(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),r.\u0275\u0275listener("valueChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onFocused(o)}),r.\u0275\u0275projection(1),r.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),r.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,i=r.\u0275\u0275nextContext(),o=r.\u0275\u0275reference(4),s=r.\u0275\u0275reference(6);r.\u0275\u0275property("pseudoFocused",i.pseudoFocused)("pseudoHovered",i.pseudoHovered)("invalid",i.computedInvalid)("filler",i.getComputedFiller(t))("nativeId",i.nativeId)("readOnly",i.readOnly)("focusable",i.computedFocusable)("iconContent",i.computedMobile?o:s)("disabled",i.computedDisabled)("textMask",i.computedMask)("value",i.computedValue)}}function md(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-svg",7),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onMobileClick()}),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("icon",!t.computedDisabled),r.\u0275\u0275property("src",t.calendarIcon)}}function wh(e,n){if(1&e&&r.\u0275\u0275element(0,"tui-svg",8),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("icon",!t.computedDisabled),r.\u0275\u0275property("src",t.calendarIcon)}}function Sh(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",11)(1,"button",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);const o=r.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function Yl(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-calendar",9),r.\u0275\u0275listener("dayClick",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().onMonthChange(o)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(1,Sh,3,1,"div",10)}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",1===t.items.length)}}const vu=["*",[["input"]]],nl=["*","input"],vd=[{provide:Br.KZ,useExisting:(0,r.forwardRef)(()=>Xl)},{provide:Cn.cU,deps:[[new r.Optional,new r.Self,K.NgControl],[new r.Optional,Cn.HF]],useFactory:(e,n)=>(0,zi.q7)(e,n)},{provide:Gi.M$,useExisting:(0,r.forwardRef)(()=>Xl)},ma.Sm];let Xl=(()=>{let e=class extends Gi.F9{constructor(t,i,o,s,c,p,v,C,M,x,U){super(t,i,U),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=p,this.textfieldSize=v,this.dateFormat=C,this.dateSeparator=M,this.dateTexts$=x,this.valueTransformer=U,this.month=null,this.textMaskOptions={mask:As(this.dateFormat,this.dateSeparator),pipe:Go(this),guide:!1},this.min=ht.K1,this.max=ht.Oy,this.disabledItemHandler=nr.Iy,this.markerHandler=Vr.zE,this.items=[],this.defaultActiveYearMonth=ht.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,pa.U)(ne=>(0,ht.Yl)(ne[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Ai.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:i,activeItem:o}=this;return o?String(o):t?t.toString(this.dateFormat,this.dateSeparator):i}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?yi.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(i=>i.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new $i.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,ga.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==ht.ek?null:ht.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,i){return(0,_i.Hm)(t,i,(o,s)=>o.daySame(s))}};return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(K.NgControl,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.Injector),r.\u0275\u0275directiveInject(Br.fL),r.\u0275\u0275directiveInject(or.RO),r.\u0275\u0275directiveInject(Cn.vk,8),r.\u0275\u0275directiveInject(ge.kI),r.\u0275\u0275directiveInject(ht.P_),r.\u0275\u0275directiveInject(ht.q_),r.\u0275\u0275directiveInject(Cn.zf),r.\u0275\u0275directiveInject(Cn.HF,8))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,i){if(1&t&&r.\u0275\u0275viewQuery(Zn.yc,5),2&t){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(i.textfield=o.first)}},hostBindings:function(t,i){1&t&&r.\u0275\u0275listener("click",function(){return i.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[r.\u0275\u0275ProvidersFeature(vd),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:nl,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,i){if(1&t&&(r.\u0275\u0275projectionDef(vu),r.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),r.\u0275\u0275listener("openChange",function(s){return i.onOpenChange(s)}),r.\u0275\u0275template(1,gd,3,11,"tui-primitive-textfield",1),r.\u0275\u0275pipe(2,"async"),r.\u0275\u0275template(3,md,1,3,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(5,wh,1,3,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(7,Yl,2,7,"ng-template",4,5,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(8);r.\u0275\u0275property("canOpen",i.canOpen)("open",i.open&&i.canOpen)("content",o),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiLet",r.\u0275\u0275pipeBind1(2,5,i.filler$)),r.\u0275\u0275advance(6),r.\u0275\u0275property("polymorpheus",i.type)}},directives:[oi.o1,vi.Ls,Zn.yc,Zn.B1,Yo.n,ge.D9,Mo.hd,wr.P,$i.GL,Jr,Eo.A,k.O5,Wr.V],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Le.gn)([(0,r.ViewChild)(Zn.yc)],e.prototype,"textfield",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,Le.gn)([(0,r.HostListener)("click")],e.prototype,"onClick",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,r.Optional)()),(0,Le.fM)(0,(0,r.Self)()),(0,Le.fM)(0,(0,r.Inject)(K.NgControl)),(0,Le.fM)(1,(0,r.Inject)(r.ChangeDetectorRef)),(0,Le.fM)(2,(0,r.Inject)(r.Injector)),(0,Le.fM)(3,(0,r.Inject)(Br.fL)),(0,Le.fM)(4,(0,r.Inject)(or.RO)),(0,Le.fM)(5,(0,r.Optional)()),(0,Le.fM)(5,(0,r.Inject)(Cn.vk)),(0,Le.fM)(6,(0,r.Inject)(ge.kI)),(0,Le.fM)(7,(0,r.Inject)(ht.P_)),(0,Le.fM)(8,(0,r.Inject)(ht.q_)),(0,Le.fM)(9,(0,r.Inject)(Cn.zf)),(0,Le.fM)(10,(0,r.Optional)()),(0,Le.fM)(10,(0,r.Inject)(Cn.HF))],e),e})();var Ko;let Xa=Ko=class extends Ui.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};Xa.\u0275fac=function(){let e;return function(t){return(e||(e=r.\u0275\u0275getInheritedFactory(Xa)))(t||Xa)}}(),Xa.\u0275dir=r.\u0275\u0275defineDirective({type:Xa,selectors:[["tui-input-date"]],features:[r.\u0275\u0275ProvidersFeature([{provide:Hr.S0,useExisting:(0,r.forwardRef)(()=>Ko)}]),r.\u0275\u0275InheritDefinitionFeature]});let vs=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,Mo.QA,$i.wq,Eo.Z,xi,wr.E,Wr.j,oi.jh,Zn.KW,Yo.S,vi.WD,ge.cn]]}),e})();var qr=d(27670),yd=d(60390);function _d(e,n){if(1&e&&r.\u0275\u0275element(0,"div",3),2&e){r.\u0275\u0275nextContext();const t=r.\u0275\u0275reference(6);r.\u0275\u0275property("content",t)}}function xd(e,n){1&e&&r.\u0275\u0275projection(0,2)}const yu=["*",[["input"]],[["","polymorpheus-outlet",""]]],Ka=function(e,n,t,i,o){return[e,n,t,i,o]};var rl;let li=rl=class extends Gi.F9{constructor(n,t,i,o){super(n,t),this.numberFormat=i,this.isIOS=o,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(s,c,p,v)=>({mask:(0,qr.EC)({allowNegative:s,decimalLimit:p,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,qr.YT)(this.numberFormat)}),pipe:(0,qr.qs)("always"===c?p:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,v,s,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:i}=this;t.length<this.precision||!i||!i.selectionStart||"0"!==this.nativeValue[i.selectionStart]||(n.preventDefault(),i.selectionStart++)}onValueChange(n){if((0,qr.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,qr.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if(Vr.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const i=Math.min(this.max,Math.max(this.min,t));this.updateValue(i),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const i=Math.abs(n)%1>0;let o="always"===this.decimal||i?this.precision:0;const s=i?(0,yd.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(o=s.length),(0,yd.uf)(n,o,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,qr.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,qr.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),i=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(i)||i<this.min||i>this.max?null:i}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var Kl;li.\u0275fac=function(n){return new(n||li)(r.\u0275\u0275directiveInject(K.NgControl,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(Hr.HO),r.\u0275\u0275directiveInject(Br.FA))},li.\u0275cmp=r.\u0275\u0275defineComponent({type:li,selectors:[["tui-input-number"]],contentQueries:function(n,t,i){if(1&n&&r.\u0275\u0275contentQuery(i,$i.r1,5),2&n){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=o.first)}},viewQuery:function(n,t){if(1&n&&r.\u0275\u0275viewQuery(Zn.yc,5),2&n){let i;r.\u0275\u0275queryRefresh(i=r.\u0275\u0275loadQuery())&&(t.primitiveTextfield=i.first)}},hostBindings:function(n,t){1&n&&r.\u0275\u0275listener("keydown.0",function(o){return t.onZero(o)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[r.\u0275\u0275ProvidersFeature([{provide:Br.KZ,useExisting:(0,r.forwardRef)(()=>rl)},{provide:Gi.M$,useExisting:(0,r.forwardRef)(()=>rl)}]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(r.\u0275\u0275projectionDef(yu),r.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),r.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("focusedChange",function(o){return t.onFocused(o)})("pressedChange",function(o){return t.onPressed(o)})("keydown",function(o){return t.onKeyDown(o)}),r.\u0275\u0275pipe(1,"tuiMapper"),r.\u0275\u0275projection(2),r.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),r.\u0275\u0275template(4,_d,1,1,"div",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,xd,1,0,"ng-template",null,2,r.\u0275\u0275templateRefExtractor)),2&n&&(r.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",r.\u0275\u0275pipeBindV(1,13,r.\u0275\u0275pureFunction5(19,Ka,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[Zn.yc,Zn.B1,Yo.n,ge.D9,ge.fy,Mo.hd,k.O5,$i.r1],pipes:[Rr.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),li.ctorParameters=()=>[{type:K.NgControl,decorators:[{type:r.Optional},{type:r.Self},{type:r.Inject,args:[K.NgControl]}]},{type:r.ChangeDetectorRef,decorators:[{type:r.Inject,args:[r.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:r.Inject,args:[Hr.HO]}]},{type:Boolean,decorators:[{type:r.Inject,args:[Br.FA]}]}],(0,Le.gn)([(0,r.ViewChild)(Zn.yc)],li.prototype,"primitiveTextfield",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],li.prototype,"min",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],li.prototype,"max",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],li.prototype,"decimal",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],li.prototype,"precision",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],li.prototype,"prefix",void 0),(0,Le.gn)([(0,r.Input)(),(0,dt.TH)()],li.prototype,"postfix",void 0),(0,Le.gn)([(0,r.ContentChild)($i.r1)],li.prototype,"polymorpheusValueContent",void 0),(0,Le.gn)([(0,r.HostListener)("keydown.0",["$event"])],li.prototype,"onZero",null),li=rl=(0,Le.gn)([(0,Le.fM)(0,(0,r.Optional)()),(0,Le.fM)(0,(0,r.Self)()),(0,Le.fM)(0,(0,r.Inject)(K.NgControl)),(0,Le.fM)(1,(0,r.Inject)(r.ChangeDetectorRef)),(0,Le.fM)(2,(0,r.Inject)(Hr.HO)),(0,Le.fM)(3,(0,r.Inject)(Br.FA))],li);let Tr=Kl=class extends Ui.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};Tr.\u0275fac=function(){let e;return function(t){return(e||(e=r.\u0275\u0275getInheritedFactory(Tr)))(t||Tr)}}(),Tr.\u0275dir=r.\u0275\u0275defineDirective({type:Tr,selectors:[["tui-input-number"]],features:[r.\u0275\u0275ProvidersFeature([{provide:Hr.S0,useExisting:(0,r.forwardRef)(()=>Kl)}]),r.\u0275\u0275InheritDefinitionFeature]});let Ql=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,Mo.QA,Rr.I,Zn.KW,ge.cn,Yo.S,$i.wq]]}),e})();const Cd=["createGoalElement"];function Qo(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"li",27),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.goalItemString(t)," ")}}function Jl(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",26),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);const o=r.\u0275\u0275nextContext().$implicit;return r.\u0275\u0275nextContext().createGoal(o)}),r.\u0275\u0275text(1," Create Goal "),r.\u0275\u0275elementEnd()}}function ol(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",15)(1,"tui-island",16)(2,"div",17)(3,"div",18)(4,"div",19)(5,"div",20),r.\u0275\u0275text(6," Duration: "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div"),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(9,"div",21),r.\u0275\u0275text(10," Tasks: "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"ul",22),r.\u0275\u0275template(12,Qo,2,1,"li",23),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"div",24),r.\u0275\u0275template(14,Jl,2,0,"button",25),r.\u0275\u0275elementStart(15,"button",26),r.\u0275\u0275listener("click",function(){const s=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext().setGoal(s)}),r.\u0275\u0275text(16," Use This Goal "),r.\u0275\u0275elementEnd()()()()()}if(2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(8),r.\u0275\u0275textInterpolate(i.getRelativeTime(t.end_date)),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",t.goal_items),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!1)}}function ys(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"button",36),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275property("value",t.pk),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function wd(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list"),r.\u0275\u0275template(1,ys,2,2,"button",35),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.categories)}}function Oi(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"button",36),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275property("value",t[0]),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Zl(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-data-list"),r.\u0275\u0275template(1,Oi,2,2,"button",35),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.difficulties)}}function Eh(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",37),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(t);const o=r.\u0275\u0275nextContext().index;return r.\u0275\u0275nextContext().removeGoalItem(o)}),r.\u0275\u0275text(1," Delete "),r.\u0275\u0275elementEnd()}}function Ih(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"tui-select",28),r.\u0275\u0275pipe(3,"stringifyTuiDataList"),r.\u0275\u0275text(4," Category "),r.\u0275\u0275template(5,wd,2,1,"tui-data-list",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(6,"tui-field-error",30),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",6)(8,"tui-select",28),r.\u0275\u0275pipe(9,"stringifyTuiDataList"),r.\u0275\u0275text(10," Difficulty "),r.\u0275\u0275template(11,Zl,2,1,"tui-data-list",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(12,"tui-field-error",30),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",6)(14,"tui-input-number",31),r.\u0275\u0275text(15," Number of questions "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(16,"tui-field-error",30),r.\u0275\u0275elementStart(17,"div",32),r.\u0275\u0275text(18),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(19,"div",6)(20,"div",33),r.\u0275\u0275template(21,Eh,2,0,"button",34),r.\u0275\u0275elementEnd()()()),2&e){const t=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("valueContent",i.categories?r.\u0275\u0275pipeBind3(3,11,i.categories,"pk","full_name"):"")("formControl",i.getFormControl(t,"category")),r.\u0275\u0275advance(4),r.\u0275\u0275property("formControl",i.getFormControl(t,"category")),r.\u0275\u0275advance(2),r.\u0275\u0275property("valueContent",i.difficulties?r.\u0275\u0275pipeBind3(9,15,i.difficulties,0,1):"")("formControl",i.getFormControl(t,"difficulty")),r.\u0275\u0275advance(4),r.\u0275\u0275property("formControl",i.getFormControl(t,"difficulty")),r.\u0275\u0275advance(2),r.\u0275\u0275property("formControl",i.getFormControl(t,"number_of_questions"))("max",i.getNumQuestionsLimit(t)),r.\u0275\u0275advance(2),r.\u0275\u0275property("formControl",i.getFormControl(t,"number_of_questions")),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",i.getNumQuestionsLimit(t)," question(s) available. "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.getGoalItemFormControls().length>1)}}let Ph=(()=>{class e{constructor(t,i,o,s,c,p){this.goalService=t,this.categoryService=i,this.difficultyService=o,this.router=s,this.activatedRoute=c,this.notificationService=p,this.timeOptions=(0,zi.eN)(),el.extend(ud)}ngOnInit(){this.courseId=this.activatedRoute.snapshot.parent.params.courseId,this.goalForm=Ya.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t),this.goalService.getSuggestions().subscribe(t=>this.recommendedGoals=t),this.goalService.getLimits().subscribe(t=>this.limits=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,i){return t.get(i)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(Ya.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}goalItemString(t){return sd(t)}setGoal(t){this.goalForm=Ya.createGoalFormFromGoal(t),this.createGoalElement.nativeElement.scrollIntoView({behavior:"smooth"})}createGoal(t){this.setGoal(t),this.onSubmit().then()}getRelativeTime(t){return el(t).fromNow()}getNumQuestionsLimit(t){const i=t.get("category").value,o=t.get("difficulty").value;return console.debug(i,o),i&&o?this.limits.find(s=>s.category===i&&s.difficulty===o).unsolved_questions:0}onSubmit(){return G(this,void 0,void 0,function*(){const t=Ya.formatGoalFormData(this.goalForm,this.courseId),i=yield this.goalService.createGoal(t).toPromise();for(const o of this.getGoalItemFormControls()){const s=Ya.formatGoalItemFormData(o,i.id);yield this.goalService.createGoalItem(s).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Ua),r.\u0275\u0275directiveInject(oo.H),r.\u0275\u0275directiveInject(_a.G),r.\u0275\u0275directiveInject(q.F0),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],viewQuery:function(t,i){if(1&t&&r.\u0275\u0275viewQuery(Cd,5),2&t){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(i.createGoalElement=o.first)}},decls:25,vars:5,consts:[[1,"tui-container","tui-container_adaptive"],[1,"tui-form__header"],["class","tui-form__row",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],["createGoalElement",""],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["icon","tuiIconPlus","size","s","tuiButton","","type","button","appearance","secondary",1,"ml-3",3,"click"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[1,"tui-form__row"],[1,"shadow"],[1,"flex"],[1,"flex-1"],[1,"flex","space-x-1"],[1,"tui-text_bold","tui-text_body-l"],[1,"tui-text_bold","tui-text_body-l","tui-space_top-3"],[1,"tui-list"],["class","tui-list__item",4,"ngFor","ngForOf"],[1,"flex","flex-col","space-y-3"],["tuiButton","","size","s","appearance","secondary",3,"click",4,"ngIf"],["tuiButton","","size","s","appearance","secondary",3,"click"],[1,"tui-list__item"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],[3,"formControl","max"],[1,"tui-form__field-note"],[1,"flex","h-full","items-center"],["icon","tuiIconMinus","size","s","tuiButton","","type","button","appearance","accent",3,"click",4,"ngIf"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["icon","tuiIconMinus","size","s","tuiButton","","type","button","appearance","accent",3,"click"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"h2",1),r.\u0275\u0275text(2,"Recommended Goals"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,ol,17,3,"div",2),r.\u0275\u0275elementStart(4,"form",3,4),r.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),r.\u0275\u0275elementStart(6,"h2",1),r.\u0275\u0275text(7,"Create New Goal"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"tui-input-date",7),r.\u0275\u0275text(11," End date "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(12,"tui-field-error",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",6)(14,"tui-input-time",9),r.\u0275\u0275text(15," End time "),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(16,"tui-field-error",10),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(17,"h3",1),r.\u0275\u0275text(18," Tasks "),r.\u0275\u0275elementStart(19,"button",11),r.\u0275\u0275listener("click",function(){return i.addGoalItem()}),r.\u0275\u0275text(20," Add Another "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(21,Ih,22,19,"div",12),r.\u0275\u0275elementStart(22,"div",13)(23,"button",14),r.\u0275\u0275text(24," Create Goal "),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.recommendedGoals),r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroup",i.goalForm),r.\u0275\u0275advance(10),r.\u0275\u0275property("items",i.timeOptions),r.\u0275\u0275advance(7),r.\u0275\u0275property("ngForOf",i.getGoalItemFormControls()),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",i.goalForm.invalid))},directives:[k.sg,ki.h,k.O5,gt.v0,K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,Xl,Xa,K.NgControlStatus,K.FormControlName,Zt.y,be,Pr.uJ,Pr.OI,K.FormControlDirective,lr.gX,lr.qi,lr.vK,li,Tr],pipes:[Ds.J],styles:[""]}),e})();var al=d(35326);function Mh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div"),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.value()),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.label(t.activeItemIndex))}}let _u=(()=>{class e{constructor(){this.activeItemIndex=NaN}values(){return[this.submissionStats.correct,this.submissionStats.partially_correct,this.submissionStats.wrong]}value(){return isNaN(this.activeItemIndex)?this.submissionStats.total:this.values()[this.activeItemIndex]}color(t){return{0:"success",1:"primary",2:"error"}[t]}label(t){return isNaN(t)?"Total":{0:"Correct",1:"Partially Correct",2:"Wrong"}[t]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-submission-chart"]],inputs:{submissionStats:"submissionStats"},decls:3,vars:4,consts:[[3,"value","activeItemIndex","content","colorHandler","activeItemIndexChange"],["content",""]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"tui-ring-chart",0),r.\u0275\u0275listener("activeItemIndexChange",function(s){return i.activeItemIndex=s}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(1,Mh,4,2,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&t){const o=r.\u0275\u0275reference(2);r.\u0275\u0275property("value",i.values())("activeItemIndex",i.activeItemIndex)("content",o)("colorHandler",i.color)}},directives:[al.i],styles:[""]}),e})();function Sd(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",26)}function Ah(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",27)}function kh(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",26)}function xu(e,n){1&e&&r.\u0275\u0275element(0,"tui-svg",27)}function Oh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2(" ",t.text," : ",t.value," ")}}function Lh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t," ")}}function ql(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",14),r.\u0275\u0275text(2,"Question Stats"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"table",15)(4,"tbody")(5,"tr",16)(6,"th",17),r.\u0275\u0275text(7,"Questions Attempt"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"th",17),r.\u0275\u0275text(9,"Questions Solved"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"th",17),r.\u0275\u0275text(11,"Success Rate"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(12,"tr",16)(13,"td",18),r.\u0275\u0275text(14),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"td",18),r.\u0275\u0275text(16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"td",18),r.\u0275\u0275text(18),r.\u0275\u0275pipe(19,"percent"),r.\u0275\u0275elementStart(20,"span"),r.\u0275\u0275template(21,Sd,1,0,"tui-svg",19),r.\u0275\u0275template(22,Ah,1,0,"tui-svg",20),r.\u0275\u0275text(23),r.\u0275\u0275pipe(24,"percent"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(25," ) "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(26,"div",21)(27,"div",22),r.\u0275\u0275text(28,"Submission Stats"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(29,"app-submission-chart",23),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(30,"div",8)(31,"div",24)(32,"table",15)(33,"tbody")(34,"tr",16)(35,"th",17),r.\u0275\u0275text(36,"Total Submissions"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(37,"th",17),r.\u0275\u0275text(38,"Correct Submissions"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"th",17),r.\u0275\u0275text(40,"Partially Correct Submissions "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(41,"th",17),r.\u0275\u0275text(42,"Incorrect Submissions"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(43,"th",17),r.\u0275\u0275text(44,"Success Rate"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(45,"tr",16)(46,"td",18),r.\u0275\u0275text(47),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(48,"td",18),r.\u0275\u0275text(49),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(50,"td",18),r.\u0275\u0275text(51),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(52,"td",18),r.\u0275\u0275text(53),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(54,"td",18),r.\u0275\u0275text(55),r.\u0275\u0275pipe(56,"percent"),r.\u0275\u0275elementStart(57,"span"),r.\u0275\u0275template(58,kh,1,0,"tui-svg",19),r.\u0275\u0275template(59,xu,1,0,"tui-svg",20),r.\u0275\u0275text(60),r.\u0275\u0275pipe(61,"percent"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(62," ) "),r.\u0275\u0275elementEnd()()()()()(),r.\u0275\u0275elementStart(63,"div",14),r.\u0275\u0275text(64,"Types of Error"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(65,Oh,2,2,"div",25),r.\u0275\u0275elementStart(66,"div",14),r.\u0275\u0275text(67,"Error Messages"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(68,Lh,2,1,"div",25),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(14),r.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.total_questions),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.correct_questions),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(19,25,i.goal.stats[t].submissions.questions_success_rate)," ( "),r.\u0275\u0275advance(2),r.\u0275\u0275classProp("success",i.getQuestionRelativeSuccessRate(t)>=0)("error",i.getQuestionRelativeSuccessRate(t)<0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.getQuestionRelativeSuccessRate(t)>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.getQuestionRelativeSuccessRate(t)<0),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(24,27,i.getQuestionRelativeSuccessRate(t))," "),r.\u0275\u0275advance(6),r.\u0275\u0275property("submissionStats",i.goal.stats[t].submissions),r.\u0275\u0275advance(18),r.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.total),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.correct),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",i.goal.stats[t].submissions.partially_correct," "),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.wrong),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(56,29,i.goal.stats[t].submissions.success_rate)," ( "),r.\u0275\u0275advance(2),r.\u0275\u0275classProp("success",i.getSubmissionRelativeSuccessRate(t)>=0)("error",i.getSubmissionRelativeSuccessRate(t)<0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.getSubmissionRelativeSuccessRate(t)>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.getSubmissionRelativeSuccessRate(t)<0),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(61,31,i.getSubmissionRelativeSuccessRate(t))," "),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",i.errorMessages(t)),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.goal.stats[t].submissions.error_messages)}}function Td(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",28),r.\u0275\u0275element(1,"tui-marker-icon",29),r.\u0275\u0275elementStart(2,"h2",30),r.\u0275\u0275text(3," There is no details to display "),r.\u0275\u0275elementEnd()())}function Rh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-island",6)(1,"div",7),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",8)(4,"label",9),r.\u0275\u0275text(5),r.\u0275\u0275element(6,"progress",10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",11),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(9,ql,69,33,"ng-container",12),r.\u0275\u0275template(10,Td,4,0,"ng-template",null,13,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,i=n.index,o=r.\u0275\u0275reference(11),s=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1("Task ",i+1,""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate2(" ",s.getGoalItem(t).progress," / ",s.getGoalItem(t).number_of_questions," "),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("info",s.getGoalItem(t).progress<s.getGoalItem(t).number_of_questions)("success",s.getGoalItem(t).progress>=s.getGoalItem(t).number_of_questions),r.\u0275\u0275property("max",s.getGoalItem(t).number_of_questions)("value",s.getGoalItem(t).progress),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2(" You have completed ",s.getGoalItem(t).progress," out of ",s.getGoalItem(t).number_of_questions," exercises in this task. "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",s.goal.stats[t].submissions.total>0)("ngIfElse",o)}}const Nh=function(){return[".."]};function Dh(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",1)(1,"div",2),r.\u0275\u0275text(2,"Goal Performance Review"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"a",3),r.\u0275\u0275text(4," Back to goals "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div"),r.\u0275\u0275element(6,"app-goal-island",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(7,Rh,12,13,"tui-island",5),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(4,Nh)),r.\u0275\u0275advance(3),r.\u0275\u0275property("goal",t.goal)("showPerformanceButton",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",t.goalItemIds())}}let Ed=(()=>{class e{constructor(t,i,o,s){this.goalService=t,this.activatedRoute=i,this.router=o,this.notificationsService=s}ngOnInit(){this.goalService.getGoal(this.activatedRoute.snapshot.params.goalId).subscribe(i=>{this.goal=i,this.canClaim()&&this.claim()})}getGoalItem(t){return this.goal.goal_items.find(i=>i.id===t)}goalItemIds(){return Object.keys(this.goal.stats).map(t=>parseInt(t))}getSubmissionRelativeSuccessRate(t){return this.goal.stats[t].submissions.success_rate-this.goal.stats[t].old_submissions.success_rate}getQuestionRelativeSuccessRate(t){return this.goal.stats[t].submissions.questions_success_rate-this.goal.stats[t].old_submissions.questions_success_rate}errorMessages(t){return Object.entries(this.goal.stats[t].submissions.messages).map(([i,o])=>({text:i,value:o}))}canClaim(){return!this.goal.claimed&&this.goal.progress>=this.goal.number_of_questions}claim(){this.goalService.claim(this.goal.id).subscribe(()=>{this.goalService.getGoal(this.goal.id).subscribe(t=>this.goal=t)})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Ua),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(q.F0),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-goal"]],decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive space-y-3 mt-3",4,"ngIf"],[1,"tui-container","tui-container_adaptive","space-y-3","mt-3"],[1,"tui-text_h2"],["icon","tuiIconArrowLeft","size","s","tuiButton","","appearance","flat",3,"routerLink"],[3,"goal","showPerformanceButton"],["class","shadow",4,"ngFor","ngForOf"],[1,"shadow"],[1,"tui-text_h3"],[1,"tui-space_top-2"],["tuiProgressLabel","",1,"w-full"],["tuiProgressBar","",1,"progress",3,"max","value"],[1,"tui-text_body-m"],[4,"ngIf","ngIfElse"],["noSubmission",""],[1,"tui-text_h4","tui-space_top-5"],[1,"tui-table","mt-3"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__th"],[1,"tui-table__td"],["src","tuiIconArrowUp","class","pb-1 -mx-1",4,"ngIf"],["src","tuiIconArrowDown","class","pb-1 -mx-1",4,"ngIf"],[1,"flex","mt-5"],[1,"flex-1","tui-text_h4"],[3,"submissionStats"],[1,"overflow-x-auto"],["class","tui-space_top-2",4,"ngFor","ngForOf"],["src","tuiIconArrowUp",1,"pb-1","-mx-1"],["src","tuiIconArrowDown",1,"pb-1","-mx-1"],[1,"flex","justify-center","items-center","w-full","h-32"],["size","s","src","tuiIconAlertCircleLarge",1,"tui-space_right-4"],[1,"tui-text_body-xl"]],template:function(t,i){1&t&&r.\u0275\u0275template(0,Dh,8,5,"div",0),2&t&&r.\u0275\u0275property("ngIf",i.goal)},directives:[k.O5,gt.v0,q.yS,Wa,k.sg,ki.h,hd,dd,wr.P,_u,un.B],pipes:[k.Zx],styles:[".flex[_ngcontent-%COMP%]{display:flex}.success[_ngcontent-%COMP%]{color:var(--tui-success-fill)}.error[_ngcontent-%COMP%]{color:var(--tui-error-fill)}.info[_ngcontent-%COMP%]{color:var(--tui-info-fill)}.button-success[_ngcontent-%COMP%]{background-color:var(--tui-success-fill);color:var(--tui-base-01)}.button-success[_ngcontent-%COMP%]:hover{opacity:.75;transition-duration:.3s;cursor:pointer}"]}),e})();const ec={Open:"OPEN",Private:"CODE"};let Id=(()=>{class e{static createCourseForm(){return(new K.FormBuilder).group({name:new K.FormControl("",[K.Validators.required]),description:new K.FormControl("",[K.Validators.required]),url:new K.FormControl("",[K.Validators.required,K.Validators.pattern("(https?://)([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]),date:new K.FormControl(new ht.VR(ht.TU.currentLocal(),ht.TU.currentLocal().append({day:7})),[K.Validators.required]),registrationMode:new K.FormControl("",[K.Validators.required]),registrationCode:new K.FormControl("")},{validator:e.dateValidator})}static formatCourseFormData(t){return{name:t.get("name").value,description:t.get("description").value,url:t.get("url").value,start_date:this.dateToLocal(t.get("date").value.from),end_date:this.dateToLocal(t.get("date").value.to),registration_mode:ec[t.get("registrationMode").value],registration_code:t.get("registrationCode").value,token:"0",course_id:0}}static dateToLocal(t){return new Date(t.toLocalNativeDate().getTime())}}return e.dateValidator=n=>{const t=n.get("date").value;return t.from&&t.to?null:{forbiddenDateRange:!0}},e})();var bu=d(50284);function Pd(e,n){if(1&e&&r.\u0275\u0275element(0,"tui-data-list-wrapper",17),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275property("items",t.registrationModes)}}function Md(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",3)(1,"tui-input",18),r.\u0275\u0275text(2,"Access Code"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"tui-field-error",18),r.\u0275\u0275elementEnd())}let Ad=(()=>{class e{constructor(t,i,o){this.courseService=t,this.notificationsService=i,this.router=o,this.registrationModes=["Open","Private"],this.formGroup=Id.createCourseForm()}showAccessCode(){return"Private"===this.formGroup.get("registrationMode").value}onSubmit(){this.courseService.createCourse(Id.formatCourseFormData(this.formGroup)).subscribe(t=>{this.notificationsService.show("Course created successfully!",{status:"success"}).subscribe(),this.router.navigate(["/course",t.id])})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(mt.$F),r.\u0275\u0275directiveInject(q.F0))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-create"]],features:[r.\u0275\u0275ProvidersFeature([{provide:Cn.Z4,useValue:{pattern:"Please enter a valid url starting with http:// or https://"}}])],decls:36,vars:3,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name"],["formControlName","description"],[1,"tui-form__field-note"],["formControlName","url","type","url"],["formControlName","url"],["formControlName","date"],["formControlName","registrationMode"],["tuiTextfield","","placeholder","Select registration mode"],[3,"items",4,"tuiDataList"],["class","tui-form__row",4,"ngIf"],[1,"tui-form__buttons"],["tuiButton","","size","m","type","submit",1,"tui-form__button",3,"disabled"],["tuiButton","","type","button","appearance","flat","size","m","routerLink","/",1,"tui-form__button"],[3,"items"],["formControlName","registrationCode"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"form",1),r.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),r.\u0275\u0275elementStart(2,"div",2),r.\u0275\u0275text(3," Create a Course "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),r.\u0275\u0275text(6,"Course Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"tui-field-error",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",3)(9,"tui-text-area",5),r.\u0275\u0275text(10,"Course Description"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(11,"tui-field-error",5),r.\u0275\u0275elementStart(12,"div",6),r.\u0275\u0275text(13,"Display a text message on the Course Homepage to welcome your students to the course or to provide instructions on what they can do. "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(14,"div",3)(15,"tui-input",7),r.\u0275\u0275text(16,"Course URL"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(17,"tui-field-error",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"div",3)(19,"tui-input-date-range",9),r.\u0275\u0275text(20,"Course Date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(21,"tui-field-error",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",3)(23,"tui-select",10),r.\u0275\u0275text(24," Registration Mode "),r.\u0275\u0275element(25,"input",11),r.\u0275\u0275template(26,Pd,1,1,"tui-data-list-wrapper",12),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(27,"tui-field-error",10),r.\u0275\u0275elementStart(28,"div",6),r.\u0275\u0275text(29,"Everyone can join an open course, while only the ones with an access code can join a private course. "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(30,Md,4,0,"div",13),r.\u0275\u0275elementStart(31,"div",14)(32,"button",15),r.\u0275\u0275text(33," Submit "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"button",16),r.\u0275\u0275text(35," Cancel "),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroup",i.formGroup),r.\u0275\u0275advance(29),r.\u0275\u0275property("ngIf",i.showAccessCode()),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",i.formGroup.invalid))},directives:[K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,le.K3,le.wU,K.NgControlStatus,K.FormControlName,Zt.y,du.Jl,du.eQ,ui,Xo,Pr.uJ,Pr.OI,Zn.MB,lr.gX,bu.eC,k.O5,gt.v0,q.rH],styles:[""]}),e})();var Cu=d(33112);const kd=function(){return["concepts"]},tc=function(e){return["/course",e,"goal"]};let Od=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.route=i,this.courseService=o,this.courseId=this.route.snapshot.parent.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(de.N))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-practice-page"]],decls:39,vars:10,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"-mt-5"],[1,"tui-island__paragraph","tui-text_body-xl"],[1,"flex-container","gap-8","mt-10"],["size","m",1,"practice-tile","tui-island_hoverable",3,"routerLink"],[1,"practice-background","practice-question"],[1,"practice-tile-text"],[1,"tui-island__title"],[1,"tui-island__paragraph","tui-text_body-xl","flex-space"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],[1,"practice-background","view-goals"],[1,"practice-tile-button"],[1,"tui-text_h5","quick-links","mt-10"],[1,"tui-island__paragraph","tui-text_body-xl","tui-space_top-3"],[1,"flex","flex-wrap","justify-center","gap-8","tui-space_top-7"],["tuiHintPointer","","tuiHint","Coming Soon...","tuiHintDirection","top-middle",1,"tui-space_right-3","tui-space_bottom-3"],["tuiButton","","type","button","appearance","flat","disabled","true"],["tuiButton","","disabled","true","type","button","appearance","flat",1,"tui-space_right-3","tui-space_bottom-3"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"p",2),r.\u0275\u0275text(3,"Start practicing by selecting a topic in the concept map, by setting personal goals to collect tokens, or by selecting a type of question at the bottom. "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"div",3)(5,"tui-island",4),r.\u0275\u0275element(6,"div",5),r.\u0275\u0275elementStart(7,"div",6)(8,"h3",7),r.\u0275\u0275text(9,"Concept Map"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"p",8),r.\u0275\u0275text(11," View programming concepts and practice questions in selected topics and difficulty levels. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div")(13,"a",9),r.\u0275\u0275text(14," Practice "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(15,"tui-island",4),r.\u0275\u0275element(16,"div",10),r.\u0275\u0275elementStart(17,"div",6)(18,"h3",7),r.\u0275\u0275text(19,"Personal Goals"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"p",8),r.\u0275\u0275text(21," Develop goals for yourself that suit your own skill level and earn tokens when you achieve them. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",11)(23,"a",9),r.\u0275\u0275text(24," View "),r.\u0275\u0275elementEnd()()()()(),r.\u0275\u0275elementStart(25,"h5",12),r.\u0275\u0275text(26,"Quick Links"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"p",13),r.\u0275\u0275text(28,"Select an option to quickly navigate to a practice question."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",14)(30,"div",15)(31,"button",16),r.\u0275\u0275text(32," Random Question "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(33,"div",15)(34,"button",17),r.\u0275\u0275text(35," Recommended Question "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(36,"div",15)(37,"button",17),r.\u0275\u0275text(38," Continue Practice "),r.\u0275\u0275elementEnd()()()()),2&t&&(r.\u0275\u0275advance(5),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(4,kd)),r.\u0275\u0275advance(8),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(5,kd)),r.\u0275\u0275advance(2),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(6,tc,i.courseId)),r.\u0275\u0275advance(8),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(8,tc,i.courseId)))},directives:[ki.h,q.rH,gt.v0,q.yS,Cu.D],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;height:100%}.practice-background[_ngcontent-%COMP%]{width:calc(100% + 2 * var(--tui-padding-l));height:calc(4 * var(--tui-padding-l));margin-top:calc(-1 * var(--tui-padding-l));margin-left:calc(-1 * var(--tui-padding-l));margin-bottom:12px}.practice-question[_ngcontent-%COMP%]{background-color:var(--tui-support-06);opacity:.24}.view-goals[_ngcontent-%COMP%]{background-color:var(--tui-support-02);opacity:.24}.practice-tile[_ngcontent-%COMP%]{overflow:hidden;min-height:250px}@media screen and (min-width: 1280px){.practice-tile[_ngcontent-%COMP%]{flex-basis:calc(30% - 4.5rem)}}@media screen and (min-width: 768px) and (max-width: 1279px){.practice-tile[_ngcontent-%COMP%]{flex-basis:calc(50% - 4.5rem)}}@media screen and (max-width: 767px){.practice-tile[_ngcontent-%COMP%]{flex-basis:100%}}.practice-tile-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 4 * var(--tui-padding-l))}.flex-space[_ngcontent-%COMP%]{flex:1 1}"]}),e})();var qn=d(58259),Ld=d(59695),Fh=d.n(Ld),nc=d(85510),Rd=d.n(nc);const{round:rc,floor:Bh,PI:sl}=Math,_n={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},Jo=function(e){return e%360+(e<0?360:0)},_s=function(e,n){return n*rc(e/n)},Qa=function(e){return 180*e/sl%360},Li=function(e,n){return(e=(n=n||!1)?e:e%360)*sl/180},ic=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return Bh(Math.random()*(n-e+1)+e)},{cos:ul,sin:Yi,atan2:Vh}=Math,wu=function(e,n){var t=Li(e.y),i=Li(n.y),c=Li(n.x-e.x),p=Yi(c)*ul(i),v=ul(t)*Yi(i)-Yi(t)*ul(i)*ul(c),x=Qa(Vh(p,v))-22.5;return x<0&&(x+=360),["NE","E","SE","S","SW","W","NW","N"][x=parseInt(x/45)]},Su=function(e,n){var t=e.x,i=e.y;return(t-=n.x)*t+(i-=n.y)*i},oc=function(e,n){return Math.sqrt(Su(e,n))},fn={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:wi,cos:Zo,sin:Tu,sqrt:ac,min:Eu,max:sc,atan2:uc,round:lc,pow:cc,PI:ll}=Math,ye=function(e,n){if(!(this instanceof ye))return new ye(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};ye.fromPolar=function(e,n,t){t=new ye(t);var i=wi(e*Zo(n)),o=wi(e*Tu(n)),s=Jo(Qa(n));return s<90?o=-o:s<180?(i=-i,o=-o):s<270&&(i=-i),new ye(t.x+i,t.y+o)},ye.random=function(e,n,t,i){return new ye(ic(e,n),ic(t,i))},ye.prototype={type:fn.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new ye(e[0]);for(var t=null,i=1/0,o=0;o<n;o++){var s=new ye(e[o]),c=this.squaredDistance(s);c<i&&(t=s,i=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Eu(sc(this.x,e.x),e.x+e.width),this.y=Eu(sc(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return wu(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new ye(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new ye(this.x-(e||0),this.y-(n||0))},distance:function(e){return oc(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new ye((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return ac(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return wi(e.x-this.x)+wi(e.y-this.y)},move:function(e,n){var t=Li(new ye(e).theta(this));return this.offset(Zo(t)*n,-Tu(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new ye(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new ye(0,0),n=Li(Jo(-n));var t=Zo(n),i=Tu(n),s=i*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-i*(this.y-e.y)+e.x,this.y=s,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=cc(10,e)}return this.x=lc(this.x*n)/n,this.y=lc(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new ye(t)||new ye(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=_s(this.x,e),this.y=_s(this.y,n||e),this},squaredDistance:function(e){return Su(this,e)},theta:function(e){e=new ye(e);var i=uc(-(e.y-this.y),e.x-this.x);return i<0&&(i=2*ll+i),180*i/ll},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ye(e)||new ye(0,0);var n=this.x,t=this.y;return this.x=ac((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=Li(e.theta(new ye(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new ye(0,0).angleBetween(this,e)}},ye.prototype.translate=ye.prototype.offset;const Iu=ye,{max:qo,min:cl}=Math,It=function(e,n){return this instanceof It?e instanceof It?new It(e.start,e.end):(this.start=new ye(e),void(this.end=new ye(n))):new It(e,n)};It.prototype={type:fn.Line,angle:function(){var e=new ye(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=cl(this.start.x,this.end.x),n=cl(this.start.y,this.end.y),t=qo(this.start.x,this.end.x),i=qo(this.start.y,this.end.y);return new bt(e,n,t-e,i-n)},bearing:function(){return wu(this.start,this.end)},clone:function(){return new It(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new It(this.start,e).vector()),t=cl(1,qo(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var i=this.length();return!(new It(n,e).length()>i||new It(e,t).length()>i)},divideAt:function(e){var n=this.pointAt(e);return[new It(this.start,n),new It(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new It(this.start,n),new It(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof It&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new ye(this.end.x-this.start.x,this.end.y-this.start.y),t=new ye(e.end.x-e.start.x,e.end.y-e.start.y),i=n.x*t.y-n.y*t.x,o=new ye(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*t.y-o.y*t.x,c=o.x*n.y-o.y*n.x;if(0===i||s*i<0||c*i<0)return null;if(i>0){if(s>i||c>i)return null}else if(s<i||c<i)return null;return[new ye(this.start.x+s*n.x/i,this.start.y+s*n.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return oc(this.start,this.end)},midpoint:function(){return new ye((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:i}=n,o=t.clone().rotate(i,270),s=i.clone().rotate(t,90);return t.move(s,e),i.move(o,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,i=!0;e<0&&(i=!1,e=-e);var o=this.length();return e>=o?i?t.clone():n.clone():this.pointAt((i?e:o-e)/o)},pointOffset:function(e){e=new ye(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return Su(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,i=this.pointAt(e),o=new It(n,t);return o.translate(i.x-n.x,i.y-n.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,i=this.pointAtLength(e),o=new It(n,t);return o.translate(i.x-n.x,i.y-n.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new ye(this.end.x-this.start.x,this.end.y-this.start.y)}},It.prototype.intersection=It.prototype.intersect;const ba=It,{sqrt:Nd,round:dl,pow:Hh}=Math,Si=function(e,n,t){return this instanceof Si?e instanceof Si?new Si(new ye(e.x,e.y),e.a,e.b):(e=new ye(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new Si(e,n,t)};Si.fromRect=function(e){return e=new bt(e),new Si(e.center(),e.width/2,e.height/2)},Si.prototype={type:fn.Ellipse,bbox:function(){return new bt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ye(this.x,this.y)},clone:function(){return new Si(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,i=e.end,o=this.a,s=this.b,c=e.vector(),p=t.difference(new ye(this)),v=new ye(c.x/(o*o),c.y/(s*s)),C=new ye(p.x/(o*o),p.y/(s*s)),M=c.dot(v),x=c.dot(C),ne=x*x-M*(p.dot(C)-1);if(ne<0)return null;if(ne>0){var oe=Nd(ne),Te=(-x-oe)/M,Ie=(-x+oe)/M;if((Te<0||1<Te)&&(Ie<0||1<Ie))return null;0<=Te&&Te<=1&&n.push(t.lerp(i,Te)),0<=Ie&&Ie<=1&&n.push(t.lerp(i,Ie))}else{var je=-x/M;if(!(0<=je&&je<=1))return null;n.push(t.lerp(i,je))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new ye(e),n&&e.rotate(new ye(this.x,this.y),n);var o,t=e.x-this.x,i=e.y-this.y;if(0===t)return o=this.bbox().pointNearestToPoint(e),n?o.rotate(new ye(this.x,this.y),-n):o;var s=i/t,C=Nd(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return o=new ye(this.x+(C=t<0?-C:C),this.y+s*C),n?o.rotate(new ye(this.x,this.y),-n):o},normalizedDistance:function(e){var n=e.x,t=e.y,i=this.a,o=this.b,s=this.x,c=this.y;return(n-s)*(n-s)/(i*i)+(t-c)*(t-c)/(o*o)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Hh(10,e)}return this.x=dl(this.x*n)/n,this.y=dl(this.y*n)/n,this.a=dl(this.a*n)/n,this.b=dl(this.b*n)/n,this},tangentTheta:function(e){var x,U,t=e.x,i=e.y,o=this.a,s=this.b,c=this.bbox().center(),p=c.x,v=c.y;return t>c.x+o/2||t<c.x-o/2?U=o*o/(t-p)-o*o*(i-v)*((x=t>c.x?i-30:i+30)-v)/(s*s*(t-p))+p:x=s*s/(i-v)-s*s*(t-p)*((U=i>c.y?t+30:t-30)-p)/(o*o*(i-v))+v,new ye(U,x).theta(e)},toString:function(){return new ye(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Dd=Si,{abs:Fd,cos:Bd,sin:Vd,min:ei,max:Oo,round:fl,pow:jh}=Math,bt=function(e,n,t,i){if(!(this instanceof bt))return new bt(e,n,t,i);Object(e)===e&&(n=e.y,t=e.width,i=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===i?0:i};bt.fromEllipse=function(e){return e=new Si(e),new bt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},bt.fromPointUnion=function(...e){if(0===e.length)return null;const n=new ye;let t,i,o,s;t=i=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const p=n.x,v=n.y;p<t&&(t=p),p>o&&(o=p),v<i&&(i=v),v>s&&(s=v)}return new bt(t,i,o-t,s-i)},bt.fromRectUnion=function(...e){if(0===e.length)return null;const n=new bt;let t,i,o,s;t=i=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const p=n.x,v=n.y,C=p+n.width,M=v+n.height;p<t&&(t=p),C>o&&(o=C),v<i&&(i=v),M>s&&(s=M)}return new bt(t,i,o-t,s-i)},bt.prototype={type:fn.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,i=Li(e),o=Fd(Vd(i)),s=Fd(Bd(i)),c=n*s+t*o,p=n*o+t*s;return this.x+=(n-c)/2,this.y+=(t-p)/2,this.width=c,this.height=p,this},bottomLeft:function(){return new ye(this.x,this.y+this.height)},bottomLine:function(){return new It(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ye(this.x+this.width/2,this.y+this.height)},center:function(){return new ye(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new bt(this)},containsPoint:function(e){return(e=new ye(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new bt(this).normalize(),t=new bt(e).normalize(),i=n.width,o=n.height,s=t.width,c=t.height;if(!(i&&o&&s&&c))return!1;var p=n.x,v=n.y,C=t.x,M=t.y;return s+=C,i+=p,c+=M,o+=v,p<=C&&s<=i&&v<=M&&c<=o},corner:function(){return new ye(this.x+this.width,this.y+this.height)},equals:function(e){var n=new bt(this).normalize(),t=new bt(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),i=e.origin(),o=e.corner();if(o.x<=n.x||o.y<=n.y||i.x>=t.x||i.y>=t.y)return null;var s=Oo(n.x,i.x),c=Oo(n.y,i.y);return new bt(s,c,ei(t.x,o.x)-s,ei(t.y,o.y)-c)},intersectionWithLine:function(e){var s,c,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],i=[],o=[],p=t.length;for(c=0;c<p;c++)null!==(s=e.intersect(t[c]))&&o.indexOf(s.toString())<0&&(i.push(s),o.push(s.toString()));return i.length>0?i:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new ye(e);var i,t=new ye(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new It(t,e),c=o.length-1;c>=0;--c){var p=o[c].intersection(s);if(null!==p){i=p;break}}return i&&n&&i.rotate(t,-n),i},leftLine:function(){return new It(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ye(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new bt(e),n||(n=e.center());var t,i,o,s,c,p,v,C,M=n.x,x=n.y;t=i=o=s=c=p=v=C=1/0;var U=e.topLeft();U.x<M&&(t=(this.x-M)/(U.x-M)),U.y<x&&(c=(this.y-x)/(U.y-x));var ne=e.bottomRight();ne.x>M&&(i=(this.x+this.width-M)/(ne.x-M)),ne.y>x&&(p=(this.y+this.height-x)/(ne.y-x));var oe=e.topRight();oe.x>M&&(o=(this.x+this.width-M)/(oe.x-M)),oe.y<x&&(v=(this.y-x)/(oe.y-x));var Te=e.bottomLeft();return Te.x<M&&(s=(this.x-M)/(Te.x-M)),Te.y>x&&(C=(this.y+this.height-x)/(Te.y-x)),{sx:ei(t,i,o,s),sy:ei(c,p,v,C)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return ei(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,i=-this.height),this.x=e,this.y=n,this.width=t,this.height=i,this},offset:function(e,n){return ye.prototype.offset.call(this,e,n)},origin:function(){return new ye(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ye(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new ye(this.x+this.width,e.y);case"left":return new ye(this.x,e.y);case"bottom":return new ye(e.x,this.y+this.height);case"top":return new ye(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new It(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ye(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=jh(10,e)}return this.x=fl(this.x*n)/n,this.y=fl(this.y*n)/n,this.width=fl(this.width*n)/n,this.height=fl(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new ye(e);var t=this.x+this.width-e.x,i=e.y-this.y,s=e.x-this.x,c="left";return t<s&&(s=t,c="right"),i<s&&(s=i,c="top"),this.y+this.height-e.y<s&&(c="bottom"),c},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),i=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=i.x-t.x,this.height=i.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new It(this.topLeft(),this.topRight())},topMiddle:function(){return new ye(this.x+this.width/2,this.y)},topRight:function(){return new ye(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return bt.fromRectUnion(this,e)},update:function(e,n,t,i){return Object(e)===e&&(n=e.y,t=e.width,i=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=i||0,this}},bt.prototype.bottomRight=bt.prototype.corner,bt.prototype.topLeft=bt.prototype.origin,bt.prototype.translate=bt.prototype.offset;const Hs=bt;function dc(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),i=t.length;for(let o=0;o<i;o+=2)n.push({x:+t[o],y:+t[o+1]});return n}function fc(e){const n=e.length;if(0===n)return[];const t=[];for(let i=0;i<n;i++){const o=e[i].clone();t.push(o)}return t}function Hd(e){const{abs:n}=Math;var t,i,s,o=e.length;if(0===o)return[];for(t=0;t<o;t++)(void 0===s||e[t].y<s.y||e[t].y===s.y&&e[t].x>s.x)&&(s=e[t]);var c=[];for(t=0;t<o;t++){var p=s.theta(e[t]);0===p&&(p=360),c.push([e[t],t,p])}c.sort(function(vt,Tt){var Et=vt[2]-Tt[2];return 0===Et&&(Et=Tt[1]-vt[1]),Et}),c.length>2&&c.unshift(c[c.length-1]);for(var U,ne,oe,Te,Ie,je,M={},x=[];0!==c.length;)if(ne=(U=c.pop())[0],!M.hasOwnProperty(U[0]+"@@"+U[1]))for(var Ve=!1;!Ve;)if(x.length<2)x.push(U),Ve=!0;else{Te=(oe=x.pop())[0];var L=(je=(Ie=x.pop())[0]).cross(Te,ne);if(L<0)x.push(Ie),x.push(oe),x.push(U),Ve=!0;else if(0===L){var Q=Te.angleBetween(je,ne);n(Q-180)<1e-10||Te.equals(ne)||je.equals(Te)?(M[oe[0]+"@@"+oe[1]]=Te,x.push(Ie)):n((Q+1)%360-1)<1e-10&&(x.push(Ie),c.push(oe))}else M[oe[0]+"@@"+oe[1]]=Te,x.push(Ie)}x.length>2&&x.pop();var ie,ve=-1;for(i=x.length,t=0;t<i;t++){var Pe=x[t][1];(void 0===ie||Pe<ie)&&(ie=Pe,ve=t)}var Re=[];if(ve>0){var We=x.slice(ve),pt=x.slice(0,ve);Re=We.concat(pt)}else Re=x;var st=[];for(i=Re.length,t=0;t<i;t++)st.push(Re[t][0]);return st}const rr=function(e){return this instanceof rr?"string"==typeof e?new rr.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new rr(e)};rr.parse=function(e){return new rr(dc(e))},rr.fromRect=function(e){return new rr([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},rr.prototype={type:fn.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,i=-1/0,o=this.points,s=o.length;if(0===s)return null;for(var c=0;c<s;c++){var p=o[c],v=p.x,C=p.y;v<e&&(e=v),v>n&&(n=v),C<t&&(t=C),C>i&&(i=C)}return new bt(e,t,n-e,i-t)},clone:function(){return new rr(fc(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var i,o=1/0,s=0,c=t-1,p=0;p<c;p++){var v=new It(n[p],n[p+1]),C=v.length(),M=v.closestPointNormalizedLength(e),U=v.pointAt(M).squaredDistance(e);U<o&&(o=U,i=s+M*C),s+=C}return i},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var i=e.x,o=e.y,s=t-1,c=0,p=0,v=new It,C=new It,M=new ye;c<t;c++){var x=n[s],U=n[c];if(e.equals(x)||(v.start=x,v.end=U,v.containsPoint(e)))return!0;if(o<=x.y&&o>U.y||o>x.y&&o<=U.y){var ne=x.x-i>U.x-i?x.x-i:U.x-i;ne>=0&&(M.x=i+ne,M.y=o,C.start=e,C.end=M,v.intersect(C)&&p++)}s=c}return p%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new rr(Hd(this.points))},equals:function(e){if(!e)return!1;var n=this.points,i=n.length;if(e.points.length!==i)return!1;for(var o=0;o<i;o++)if(!n[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var n=new It(e),t=[],i=this.lengthPoints(),o=new It,s=0,c=i.length-1;s<c;s++){o.start=i[s],o.end=i[s+1];var p=n.intersectionWithLine(o);p&&t.push(p[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new It,i=n-1,o=0;o<i;o++)if(t.start=e[o],t.end=e[o+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,i=n-1,o=0;o<i;o++)t+=e[o].distance(e[o+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var i=this.length();return this.pointAtLength(i*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var i=!0;e<0&&(i=!1,e=-e);for(var o=0,s=t-1,c=0;c<s;c++){var p=i?c:s-1-c,v=n[p],C=n[p+1],M=new It(v,C),x=v.distance(C);if(e<=o+x)return M.pointAtLength((i?1:-1)*(e-o));o+=x}return(i?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,i=0;i<t;i++)n[i].round(e);return this},scale:function(e,n,t){for(var i=this.points,o=i.length,s=0;s<o;s++)i[s].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let i=0;for(;n[i+2];){const s=i+1,v=n[s];new It(n[i],n[i+2]).closestPoint(v).distance(v)<=t?n.splice(s,1):i+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var i=this.length();return this.tangentAtLength(i*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var i=!0;e<0&&(i=!1,e=-e);for(var o,s=0,c=t-1,p=0;p<c;p++){var v=i?p:c-1-p,C=n[v],M=n[v+1],x=new It(C,M),U=C.distance(M);if(x.isDifferentiable()){if(e<=s+U)return x.tangentAtLength((i?1:-1)*(e-s));o=x}s+=U}return o?o.tangentAt(i?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,i=t.length,o=0;o<i;o++)t[o].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",i=0;i<n;i++){var o=e[i];t+=o.x+","+o.y+" "}return t.trim()}},Object.defineProperty(rr.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(rr.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:Ca,sqrt:Pu,min:jd,max:hc,pow:hl}=Math,Nn=function(e,n,t,i){return this instanceof Nn?e instanceof Nn?new Nn(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new ye(e),this.controlPoint1=new ye(n),this.controlPoint2=new ye(t),void(this.end=new ye(i))):new Nn(e,n,t,i)};function js(e){var n,t,i=[];for(t=arguments.length,n=1;n<t;n++)i.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(t=i.length,n=0;n<t;n++){var c,p,s=i[n];for(p in s)s.hasOwnProperty(p)&&(delete o[p],c=Object.getOwnPropertyDescriptor(s,p),Object.defineProperty(o,p,c))}return o}Nn.throughPoints=function(){function n(t){var i=t.length,o=[],s=[],c=2;o[0]=t[0]/c;for(var p=1;p<i;p++)s[p]=1/c,o[p]=(t[p]-o[p-1])/(c=(p<i-1?4:3.5)-s[p]);for(p=1;p<i;p++)o[i-p-1]-=s[i-p]*o[i-p];return o}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var i=function e(t){var c,i=[],o=[],s=t.length-1;if(1==s)return i[0]=new ye((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new ye(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,o];var p=[];for(c=1;c<s-1;c++)p[c]=4*t[c].x+2*t[c+1].x;p[0]=t[0].x+2*t[1].x,p[s-1]=(8*t[s-1].x+t[s].x)/2;var v=n(p);for(c=1;c<s-1;++c)p[c]=4*t[c].y+2*t[c+1].y;p[0]=t[0].y+2*t[1].y,p[s-1]=(8*t[s-1].y+t[s].y)/2;var C=n(p);for(c=0;c<s;c++)i.push(new ye(v[c],C[c])),o.push(c<s-1?new ye(2*t[c+1].x-v[c+1],2*t[c+1].y-C[c+1]):new ye((t[s].x+v[s-1])/2,(t[s].y+C[s-1])/2));return[i,o]}(t),o=[],s=i[0].length,c=0;c<s;c++){var p=new ye(i[0][c].x,i[0][c].y),v=new ye(i[1][c].x,i[1][c].y);o.push(new Nn(t[c],p,v,t[c+1]))}return o}}(),Nn.prototype={type:fn.Curve,bbox:function(){for(var Te,Ie,je,Ve,L,z,Q,ie,e=this.start,n=this.controlPoint1,t=this.controlPoint2,i=this.end,o=e.x,s=e.y,c=n.x,p=n.y,v=t.x,C=t.y,M=i.x,x=i.y,U=new Array,ne=new Array,oe=[new Array,new Array],ve=0;ve<2;++ve)if(0===ve?(Ie=6*o-12*c+6*v,Te=-3*o+9*c-9*v+3*M,je=3*c-3*o):(Ie=6*s-12*p+6*C,Te=-3*s+9*p-9*C+3*x,je=3*p-3*s),Ca(Te)<1e-12){if(Ca(Ie)<1e-12)continue;0<(Ve=-je/Ie)&&Ve<1&&ne.push(Ve)}else ie=Pu(Q=Ie*Ie-4*je*Te),!(Q<0)&&(0<(L=(-Ie+ie)/(2*Te))&&L<1&&ne.push(L),0<(z=(-Ie-ie)/(2*Te))&&z<1&&ne.push(z));for(var We,pt,st,Pe=ne.length,Re=Pe;Pe--;)oe[0][Pe]=pt=(We=1-(Ve=ne[Pe]))*We*We*o+3*We*We*Ve*c+3*We*Ve*Ve*v+Ve*Ve*Ve*M,oe[1][Pe]=st=We*We*We*s+3*We*We*Ve*p+3*We*Ve*Ve*C+Ve*Ve*Ve*x,U[Pe]={X:pt,Y:st};ne[Re]=0,ne[Re+1]=1,U[Re]={X:o,Y:s},U[Re+1]={X:M,Y:x},oe[0][Re]=o,oe[1][Re]=s,oe[0][Re+1]=M,oe[1][Re+1]=x,ne.length=Re+2,oe[0].length=Re+2,oe[1].length=Re+2,U.length=Re+2;var vt=jd.apply(null,oe[0]),Tt=jd.apply(null,oe[1]),Et=hc.apply(null,oe[0]),Ft=hc.apply(null,oe[1]);return new bt(vt,Tt,Et-vt,Ft-Tt)},clone:function(){return new Nn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.closestPointLength(e,o);if(!s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){for(var o,s,c,p,v,C,M,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,i=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,x=i.length,U=x?1/x:0,ne=0;ne<x;ne++){var oe=i[ne],Te=oe.start.distance(e),Ie=oe.end.distance(e),je=Te+Ie;(!M||je<M)&&(o=oe,s=ne*U,c=(ne+1)*U,p=Te,v=Ie,C=oe.start.distance(oe.end),M=je)}for(var Ve=hl(10,-t);;){var L=p?Ca(p-v)/p:0,z=v?Ca(p-v)/v:0;if(L<Ve||z<Ve||!p||p<C*Ve||!v||v<C*Ve)return p<=v?s:c;var Re=o.divide(.5);U/=2;var We=Re[0].start.distance(e),pt=Re[0].end.distance(e),st=We+pt,vt=Re[1].start.distance(e),Tt=Re[1].end.distance(e);st<=vt+Tt?(o=Re[0],c-=U,p=We,v=pt):(o=Re[1],s+=U,p=vt,v=Tt)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return[new Nn(n,n,n,n),new Nn(n,t,i,o)];if(e>=1)return[new Nn(n,t,i,o),new Nn(o,o,o,o)];var s=this.getSkeletonPoints(e),v=s.divider,C=s.dividerControlPoint1,M=s.dividerControlPoint2;return[new Nn(n,s.startControlPoint1,s.startControlPoint2,v),new Nn(v,C,M,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:i.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var s=new It(n,t).pointAt(e),c=new It(t,i).pointAt(e),p=new It(i,o).pointAt(e),v=new It(s,c).pointAt(e),C=new It(c,p).pointAt(e);return{startControlPoint1:s,startControlPoint2:v,divider:new It(v,C).pointAt(e),dividerControlPoint1:C,dividerControlPoint2:p}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new Nn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var i=this.endpointDistance(),o=hl(10,-n),s=0;;){s+=1;for(var c=[],p=t.length,v=0;v<p;v++){var M=t[v].divide(.5);c.push(M[0],M[1])}for(var x=0,U=c.length,ne=0;ne<U;ne++)x+=c[ne].endpointDistance();if(s>1&&(0!==x?(x-i)/x:0)<o)return c;t=c,i=x}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,i=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(i))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,i=0,o=t.length,s=0;s<o;s++)i+=t[s].endpointDistance();return i},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,o=n.divider,s=new It(t,n.dividerControlPoint1);return s.translate(o.x-t.x,o.y-t.y),s},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.length(o);return this.tAtLength(s*e,o)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var c,p,v,C,M,i=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.subdivisions?this.getSubdivisions({precision:i}):n.subdivisions,s={precision:i,subdivisions:o},x=0,U=o.length,ne=1/U,oe=0;oe<U;oe++){var Te=t?oe:U-1-oe,Ie=o[oe],je=Ie.endpointDistance();if(e<=x+je){c=Ie,p=Te*ne,v=(Te+1)*ne,C=t?e-x:je+x-e,M=t?je+x-e:e-x;break}x+=je}if(!c)return t?1:0;for(var Ve=this.length(s),L=hl(10,-i);;){if((0!==Ve?C/Ve:0)<L)return p;if((0!==Ve?M/Ve:0)<L)return v;var Q,ie,ve=c.divide(.5);ne/=2;var Pe=ve[0].endpointDistance(),Re=ve[1].endpointDistance();C<=Pe?(c=ve[0],v-=ne,ie=Pe-(Q=C)):(c=ve[1],p+=ne,ie=Re-(Q=C-Pe)),C=Q,M=ie}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,i=[t[0].start.clone()],o=t.length,s=0;s<o;s++)i.push(t[s].end.clone());return i},toPolyline:function(e){return new rr(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},Nn.prototype.divide=Nn.prototype.divideAtT;const Lt=function(e){if(!(this instanceof Lt))return new Lt(e);if("string"==typeof e)return new Lt.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(p,v){return p.concat(v)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var o=null;for(n=0;n<t;n++){var s=e[n];if(!(s instanceof It||s instanceof Nn))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(Lt.createSegment("M",s.start)),o&&!o.end.equals(s.start)&&this.appendSegment(Lt.createSegment("M",s.start)),s instanceof It?this.appendSegment(Lt.createSegment("L",s.end)):s instanceof Nn&&this.appendSegment(Lt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),o=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof It)this.appendSegment(Lt.createSegment("M",e.start)),this.appendSegment(Lt.createSegment("L",e.end));else if(e instanceof Nn)this.appendSegment(Lt.createSegment("M",e.start)),this.appendSegment(Lt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof rr))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(Lt.createSegment(0===n?"M":"L",e.points[n]))}}};function yo(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}Lt.parse=function(e){if(!e)return new Lt;for(var n=new Lt,i=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=i.length,s=0;s<o;s++){var v=i[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),C=Lt.createSegment.apply(this,v);n.appendSegment(C)}return n},Lt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=Lt.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],i=arguments.length,o=1;o<i;o++)t.push(arguments[o]);return yo(n,t)},Lt.prototype={type:fn.Path,appendSegment:function(e){var i,n=this.segments,t=n.length,o=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(C,M){return C.concat(M)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,p=0;p<c;p++)i=this.prepareSegment(e[p],o,null),n.push(i),o=i}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,null),n.push(i)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,i=0;i<n;i++){var o=e[i];if(o.isVisible){var s=o.bbox();t=t?t.union(s):s}}if(t)return t;var c=e[n-1];return new bt(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new Lt,i=0;i<n;i++){var o=e[i].clone();t.appendSegment(o)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointT(e,o);return s?this.lengthAtT(s,o):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointLength(e,o);if(0===s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){var t=this.segments,i=t.length;if(0===i)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,p=1/0,v=0;v<i;v++){var C=t[v];if(C.isVisible){var x=C.closestPointT(e,{precision:o,subdivisions:s[v]}),U=C.pointAtT(x),ne=new It(U,e).squaredLength();ne<p&&(c={segmentIndex:v,value:x},p=ne)}}return c||{segmentIndex:i-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,i=t.length;if(0===i)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,p=1/0,v=0;v<i;v++){var C=t[v],M=s[v];if(C.isDifferentiable()){var x=C.closestPointT(e,{precision:o,subdivisions:M}),U=C.pointAtT(x),ne=new It(U,e).squaredLength();ne<p&&(c=C.tangentAtT(x),p=ne)}}return c||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var i=t.length,o=0,s=0;s<i;s++)t[s].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.divideAtLength(p*e,c)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var i=!0;e<0&&(i=!1,e=-e);var c,p,C,M,x,U,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,v=0;for(c=0;c<t;c++){var oe=i?c:t-1-c;p=this.getSegment(oe);var Te=s[oe],Ie=p.length({precision:o,subdivisions:Te});if(p.isDifferentiable()&&(x=p,U=oe,e<=v+Ie)){M=oe,C=p.divideAtLength((i?1:-1)*(e-v),{precision:o,subdivisions:Te});break}v+=Ie}if(!x)return null;C||(M=U,C=x.divideAtT(i?1:0));var je=this.clone();je.replaceSegment(M,C);var Ve=M,L=M+1,z=M+2;C[0].isDifferentiable()||(je.removeSegment(Ve),L-=1,z-=1);var Q=je.getSegment(L).start;je.insertSegment(L,Lt.createSegment("M",Q)),z+=1,C[1].isDifferentiable()||(je.removeSegment(z-1),z-=1);var ie=z-Ve-1;for(c=z;c<je.segments.length;c++){var ve=this.getSegment(c-ie);if("Z"===(p=je.getSegment(c)).type&&!ve.subpathStartSegment.end.equals(p.subpathStartSegment.end)){var Pe=Lt.createSegment("L",ve.end);je.replaceSegment(c,Pe)}}return[new Lt(je.segments.slice(0,L)),new Lt(je.segments.slice(L))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,i=n.length;if(t.length!==i)return!1;for(var o=0;o<i;o++){var s=n[o],c=t[o];if(s.type!==c.type||!s.equals(c))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],s=0;s<t;s++){var p=n[s].getSubdivisions({precision:i});o.push(p)}return o},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,i=[];for(let o=0;o<t;o++){const s=n[o];s.isSubpathStart?i.push(new Lt(s)):i[i.length-1].appendSegment(s)}return i},insertSegment:function(e,n){var t=this.segments,i=t.length;if(e<0&&(e=i+e+1),e>i||e<0)throw new Error("Index out of range.");var o,s=null,c=null;if(0!==i&&(c=e>=1?(s=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(M,x){return M.concat(x)},[]))[0].isSegment)throw new Error("Segments required.");for(var p=n.length,v=0;v<p;v++)o=this.prepareSegment(n[v],s,c),t.splice(e+v,0,o),s=o}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,s,c),t.splice(e,0,o)}},intersectionWithLine:function(e,n){var t=null,i=this.toPolylines(n);if(!i)return null;for(var o=0,s=i.length;o<s;o++){var p=e.intersect(i[o]);p&&(t||(t=[]),Array.isArray(p)?Array.prototype.push.apply(t,p):t.push(p))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=0,c=0;c<t;c++)s+=n[c].length({subdivisions:o[c]});return s},lengthAtT:function(e,n){var t=this.segments,i=t.length;if(0===i)return 0;var o=e.segmentIndex;if(o<0)return 0;var s=e.value;o>=i?(o=i-1,s=1):s<0?s=0:s>1&&(s=1);for(var c=void 0===(n=n||{}).precision?this.PRECISION:n.precision,p=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):n.segmentSubdivisions,C=0,M=0;M<o;M++){var x=t[M];C+=x.length({precisison:c,subdivisions:p[M]})}return C+(x=t[o]).lengthAtT(s,{precisison:c,subdivisions:p[o]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.pointAtLength(p*e,c)},pointAtLength:function(e,n){var t=this.segments,i=t.length;if(0===i)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var p,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,v=0,C=0;C<i;C++){var M=o?C:i-1-C,x=t[M],U=c[M],ne=x.length({precision:s,subdivisions:U});if(x.isVisible){if(e<=v+ne)return x.pointAtLength((o?1:-1)*(e-v),{precision:s,subdivisions:U});p=x}v+=ne}return p?o?p.end:p.start:t[i-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var i=e.segmentIndex;if(i<0)return n[0].pointAtT(0);if(i>=t)return n[t-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[i].pointAtT(o)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=t),i&&this.updateSubpathStartSegment(i),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var i=n.splice(e,1)[0],o=i.previousSegment,s=i.nextSegment;o&&(o.nextSegment=s),s&&(s.previousSegment=o),i.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,n){var t=this.segments,i=t.length;if(0===i)throw new Error("Path has no segments.");if(e<0&&(e=i+e),e>=i||e<0)throw new Error("Index out of range.");var o,s=t[e],c=s.previousSegment,p=s.nextSegment,v=s.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(U,ne){return U.concat(ne)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var C=n.length,M=0;M<C;M++)o=this.prepareSegment(n[M],c,p),t.splice(e+M,0,o),c=o,v&&o.isSubpathStart&&(v=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,c,p),t.splice(e,1,o),v&&o.isSubpathStart&&(v=!1)}v&&p&&this.updateSubpathStartSegment(p)},round:function(e){for(var n=this.segments,t=n.length,i=0;i<t;i++)n[i].round(e);return this},scale:function(e,n,t){for(var i=this.segments,o=i.length,s=0;s<o;s++)i[s].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.segmentIndexAtLength(p*e,c)},segmentIndexAtLength:function(e,n){var t=this.segments,i=t.length;if(0===i)return null;var o=!0;e<0&&(o=!1,e=-e);for(var s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,p=null,v=0,C=0;C<i;C++){var M=o?C:i-1-C,x=t[M],ne=x.length({precision:s,subdivisions:c[M]});if(x.isVisible){if(e<=v+ne)return M;p=M}v+=ne}return p},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.tangentAtLength(p*e,c)},tangentAtLength:function(e,n){var t=this.segments,i=t.length;if(0===i)return null;var o=!0;e<0&&(o=!1,e=-e);for(var p,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,v=0,C=0;C<i;C++){var M=o?C:i-1-C,x=t[M],U=c[M],ne=x.length({precision:s,subdivisions:U});if(x.isDifferentiable()){if(e<=v+ne)return x.tangentAtLength((o?1:-1)*(e-v),{precision:s,subdivisions:U});p=x}v+=ne}return p?p.tangentAtT(o?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var i=e.segmentIndex;if(i<0)return n[0].tangentAtT(0);if(i>=t)return n[t-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[i].tangentAtT(o)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=[],c=[],p=0;p<t;p++){var v=n[p];if(v.isVisible){var C=o[p];if(C.length>0){var M=C.map(function(x){return x.start});Array.prototype.push.apply(c,M)}else c.push(v.start)}else c.length>0&&(c.push(n[p-1].end),s.push(c),c=[])}return c.length>0&&(c.push(this.end),s.push(c)),s},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var i=0,o=t.length;i<o;i++)n.push(new rr(t[i]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",i=0;i<n;i++)t+=e[i].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,i=t.length,o=0;o<i;o++)t[o].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Lt.createSegment("M",0,0)),this}},Object.defineProperty(Lt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var i=e[t];if(i.isVisible)return i.start}return e[n-1].end}}),Object.defineProperty(Lt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var i=e[t];if(i.isVisible)return i.end}return e[n-1].end}});var ea={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(ea,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(ea,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(ea,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var ci=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof ci))return yo(ci,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var i;if(e[0]instanceof It){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ye(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(i=[],t=0;t<n;t+=2)o=e.slice(t,t+2),i.push(yo(ci,o));return i}if(1===n)return this.end=new ye(e[0]),this;for(i=[],t=0;t<n;t+=1)i.push(new ci(e[t]));return i},pc={clone:function(){return new ci(this.end)},divideAt:function(e){var t=new It(this.start,this.end).divideAt(e);return[new ci(t[0]),new ci(t[1])]},divideAtLength:function(e){var t=new It(this.start,this.end).divideAtLength(e);return[new ci(t[0]),new ci(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(pc,"type",{configurable:!0,enumerable:!0,value:"L"}),ci.prototype=js(ea,It.prototype,pc);var Ti=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Ti))return yo(Ti,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var i,s;if(e[0]instanceof Nn){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new ye(+e[0],+e[1]),this.controlPoint2=new ye(+e[2],+e[3]),this.end=new ye(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var o;for(i=[],t=0;t<n;t+=6)o=e.slice(t,t+6),i.push(yo(Ti,o));return i}if(3===n)return this.controlPoint1=new ye(e[0]),this.controlPoint2=new ye(e[1]),this.end=new ye(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(i=[],t=0;t<n;t+=3)s=e.slice(t,t+3),i.push(yo(Ti,s));return i},gc={clone:function(){return new Ti(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var i=new Nn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new Ti(i[0]),new Ti(i[1])]},divideAtLength:function(e,n){var i=new Nn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new Ti(i[0]),new Ti(i[1])]},divideAtT:function(e){var t=new Nn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new Ti(t[0]),new Ti(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,i=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(i))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(gc,"type",{configurable:!0,enumerable:!0,value:"C"}),Ti.prototype=js(ea,Nn.prototype,gc);var wa=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof wa))return yo(wa,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var i,s;if(e[0]instanceof It){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof Nn){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ye(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(i=[],t=0;t<n;t+=2)o=e.slice(t,t+2),i.push(yo(0===t?wa:ci,o));return i}if(1===n)return this.end=new ye(e[0]),this;for(i=[],t=0;t<n;t+=1)s=e[t],i.push(0===t?new wa(s):new ci(s));return i},mc={bbox:function(){return null},clone:function(){return new wa(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(mc,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(mc,"type",{configurable:!0,enumerable:!0,value:"M"}),wa.prototype=js(ea,mc);var xs=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof xs))return yo(xs,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},Lo={clone:function(){return new xs},divideAt:function(e){var t=new It(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new ci(t[0]):this.clone(),new ci(t[1])]},divideAtLength:function(e){var t=new It(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new ci(t[0]):this.clone(),new ci(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Lo,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Lo,"type",{configurable:!0,enumerable:!0,value:"Z"}),xs.prototype=js(ea,It.prototype,Lo);var zd=Lt.segmentTypes={L:ci,C:Ti,M:wa,Z:xs,z:xs};Lt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(zd).join("")+",.]*$"),Lt.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const Gd={curveThroughPoints:function(e){return console.warn("deprecated"),new Lt(Nn.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,n=[],t=[],i=e.length-1;if(1==i)return n[0]=new ye((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new ye(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var s=[];for(o=1;o<i-1;o++)s[o]=4*e[o].x+2*e[o+1].x;s[0]=e[0].x+2*e[1].x,s[i-1]=(8*e[i-1].x+e[i].x)/2;var c=this.getFirstControlPoints(s);for(o=1;o<i-1;++o)s[o]=4*e[o].y+2*e[o+1].y;s[0]=e[0].y+2*e[1].y,s[i-1]=(8*e[i-1].y+e[i].y)/2;var p=this.getFirstControlPoints(s);for(o=0;o<i;o++)n.push(new ye(c[o],p[o])),t.push(o<i-1?new ye(2*e[o+1].x-c[o+1],2*e[o+1].y-p[o+1]):new ye((e[i].x+c[i-1])/2,(e[i].y+p[i-1])/2));return[n,t]},getCurveDivider:function(e,n,t,i){console.warn("deprecated");var o=new Nn(e,n,t,i);return function(c){var p=o.divide(c);return[{p0:p[0].start,p1:p[0].controlPoint1,p2:p[0].controlPoint2,p3:p[0].end},{p0:p[1].start,p1:p[1].controlPoint1,p2:p[1].controlPoint2,p3:p[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],i=[],o=2;t[0]=e[0]/o;for(var s=1;s<n;s++)i[s]=1/o,t[s]=(e[s]-t[s-1])/(o=(s<n-1?4:3.5)-i[s]);for(s=1;s<n;s++)t[n-s-1]-=i[n-s]*t[n-s];return t},getInversionSolver:function(e,n,t,i){console.warn("deprecated");var o=new Nn(e,n,t,i);return function(c){return o.closestPointT(c)}}},Xi=function(e){return this instanceof Xi?"string"==typeof e?new Xi.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new Xi(e)};function vc(e,n,t,i){switch(e.type){case fn.Line:if(n.type===fn.Line)return bs(e,n);break;case fn.Ellipse:switch(n.type){case fn.Line:return yc(e,n);case fn.Ellipse:return ta(e,n)}break;case fn.Rect:switch(n.type){case fn.Line:return pl(e,n);case fn.Ellipse:return gl(e,n);case fn.Rect:return Mu(e,n)}break;case fn.Polyline:switch(n.type){case fn.Line:return Cs(e,n);case fn.Ellipse:return Ja(e,n);case fn.Rect:return Wt(e,n);case fn.Polyline:return Au(e,n)}break;case fn.Polygon:switch(n.type){case fn.Line:return ku(e,n);case fn.Ellipse:return na(e,n);case fn.Rect:return Ud(e,n);case fn.Polyline:return ml(e,n);case fn.Polygon:return _c(e,n)}break;case fn.Path:switch(n.type){case fn.Line:return di(e,n,t);case fn.Ellipse:return $d(e,n,t);case fn.Rect:return Wd(e,n,t);case fn.Polyline:return vl(e,n,t);case fn.Polygon:return yl(e,n,t);case fn.Path:return xc(e,n,t,i)}}switch(n.type){case fn.Ellipse:case fn.Rect:case fn.Polyline:case fn.Polygon:case fn.Path:return vc(n,e,i,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function bs(e,n){const t=e.start.x,i=e.start.y,c=n.start.x,p=n.start.y,M=e.end.x-t,x=e.end.y-i,U=n.end.x-c,ne=n.end.y-p,oe=t-c,Te=i-p,Ie=M*ne-U*x,je=(M*Te-x*oe)/Ie,Ve=(U*Te-ne*oe)/Ie;return je>=0&&je<=1&&Ve>=0&&Ve<=1}function yc(e,n){const t=e.a,i=e.b,o=e.x,s=e.y,c=n.start.x-o,v=n.start.y-s,M=t*t,x=i*i,U=n.end.x-o-c,ne=n.end.y-s-v,oe=U*U/M+ne*ne/x,Te=2*c*U/M+2*v*ne/x,je=Te*Te-4*oe*(c*c/M+v*v/x-1);if(0===je){const Ve=-Te/2/oe;return Ve>=0&&Ve<=1}if(je>0){const Ve=Math.sqrt(je),L=(-Te+Ve)/2/oe,z=(-Te-Ve)/2/oe;return L>=0&&L<=1||z>=0&&z<=1}return!1}function ta(e,n){return function zh(e,n,t,i){const{cos:o,sin:s}=Math,c=s(n),p=o(n),v=s(i),C=o(i),M=c*c,x=p*p,ne=v*v,oe=C*C,Ie=e.a*e.a,je=e.b*e.b,Ve=t.a*t.a,L=t.b*t.b,z=Ie*M+je*x,Q=Ve*ne+L*oe,ie=Ie*x+je*M,ve=Ve*oe+L*ne;let Pe=2*(je-Ie)*(c*p),Re=2*(L-Ve)*(v*C),We=-2*z*e.x-Pe*e.y,pt=-2*Q*t.x-Re*t.y,st=-Pe*e.x-2*ie*e.y,vt=-Re*t.x-2*ve*t.y;const Tt=z*e.x*e.x+ie*e.y*e.y+Pe*e.x*e.y-Ie*je,Et=Q*t.x*t.x+ve*t.y*t.y+Re*t.x*t.y-Ve*L;Pe/=2,Re/=2,We/=2,pt/=2,st/=2,vt/=2;const Ft=Za([[z,Pe,We],[Pe,ie,st],[We,st,Tt]]),er=Za([[Q,Re,pt],[Re,ve,vt],[pt,vt,Et]]),Gn=.33333333*(Za([[Q,Pe,We],[Re,ie,st],[pt,st,Tt]])+Za([[z,Re,We],[Pe,ve,st],[We,vt,Tt]])+Za([[z,Pe,pt],[Pe,ie,vt],[We,st,Et]])),ar=.33333333*(Za([[z,Re,pt],[Pe,ve,vt],[We,vt,Et]])+Za([[Q,Pe,pt],[Re,ie,vt],[pt,st,Et]])+Za([[Q,Re,We],[Re,ve,st],[pt,vt,Tt]])),zt=zs([[Ft,Gn],[Gn,ar]]),sn=zs([[Ft,ar],[Gn,er]]),Yt=zs([[Gn,ar],[ar,er]]);return!(zs([[2*zt,sn],[sn,2*Yt]])>0&&(ar>0||Gn>0))}(e,0,n,0)}function pl(e,n){const{start:t,end:i}=n,{x:o,y:s,width:c,height:p}=e;return!(t.x>o+c&&i.x>o+c||t.x<o&&i.x<o||t.y>s+p&&i.y>s+p||t.y<s&&i.y<s)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||bs(e.topLine(),n)||bs(e.rightLine(),n)||bs(e.bottomLine(),n)||bs(e.leftLine(),n))}function gl(e,n){return!!Mu(e,bt.fromEllipse(n))&&na(Xi.fromRect(e),n)}function Mu(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Cs(e,n){return Yd(e,n,{interior:!1})}function Ja(e,n){return Xd(e,n,{interior:!1})}function Wt(e,n){return Kd(e,n,{interior:!1})}function Au(e,n){return ti(e,n,{interior:!1})}function ku(e,n){return Yd(e,n,{interior:!0})}function na(e,n){return Xd(e,n,{interior:!0})}function Ud(e,n){return Kd(e,n,{interior:!0})}function ml(e,n){return ti(e,n,{interior:!0})}function _c(e,n){return Ou(e,n,{interior:!0})}function di(e,n,t){return e.getSubpaths().some(i=>{const[o]=i.toPolylines(t),{type:s}=i.getSegment(-1);return"Z"===s?ku(o,n):Cs(o,n)})}function $d(e,n,t){return e.getSubpaths().some(i=>{const[o]=i.toPolylines(t),{type:s}=i.getSegment(-1);return"Z"===s?na(o,n):Ja(o,n)})}function Wd(e,n,t){return yl(e,Xi.fromRect(n),t)}function vl(e,n,t){return ra(e,n,t,{interior:!1})}function yl(e,n,t){return ra(e,n,t,{interior:!0})}function xc(e,n,t,i){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?yl(n,s,i):vl(n,s,i)})}function Yd(e,n,t={}){const{interior:i=!1}=t;let o;if(i){if(e.containsPoint(n.start))return!0;const{start:p,end:v,points:C}=e;o=v.equals(p)?C:[...C,p]}else o=e.points;const{length:s}=o,c=new It;for(let p=0;p<s-1;p++)if(c.start=o[p],c.end=o[p+1],bs(n,c))return!0;return!1}function Xd(e,n,t={}){const{start:i,end:o,points:s}=e;if(n.containsPoint(i))return!0;let c;const{interior:p=!1}=t;if(p){if(e.containsPoint(n.center()))return!0;c=o.equals(i)?s:[...s,i]}else c=s;const{length:v}=c,C=new It;for(let M=0;M<v-1;M++)if(C.start=c[M],C.end=c[M+1],yc(n,C))return!0;return!1}function Kd(e,n,t){return Ou(e,Xi.fromRect(n),t)}function ra(e,n,t,i){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Ou(n,s,i):ti(n,s,i)})}function ti(e,n,t={}){const{interior:i=!1}=t;let o;if(i){const{start:v}=n;if(e.containsPoint(v))return!0;o=e.clone().close()}else o=e;const s=n.points,{length:c}=s,p=new It;for(let v=0;v<c-1;v++)if(p.start=s[v],p.end=s[v+1],Cs(o,p))return!0;return!1}function Ou(e,n,t){return n.containsPoint(e.start)||ti(e,n.clone().close(),t)}function zs(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Za(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Xi.parse=function(e){return new Xi(dc(e))},Xi.fromRect=function(e){return new Xi([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Xi.prototype=js(rr.prototype,{type:fn.Polygon,clone:function(){return new Xi(fc(this.points))},convexHull:function(){return new Xi(Hd(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const Gh=g,et=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},i=Math,o=i.PI,s=i.atan2,c=i.sqrt,p=i.min,v=i.max,C=i.cos,M=i.sin,x=function(L,z,Q){if(!(this instanceof x))return x.apply(Object.create(x.prototype),arguments);if(L){if(x.isV(L)&&(L=L.node),z=z||{},x.isString(L)){if("svg"===(L=L.trim()).toLowerCase())L=x.createSvgDocument();else if("<"===L[0]){var ie=x.createSvgDocument(L);if(ie.childNodes.length>1){var Pe,Re,ve=[];for(Pe=0,Re=ie.childNodes.length;Pe<Re;Pe++){var We=ie.childNodes[Pe];ve.push(new x(document.importNode(We,!0)))}return ve}L=document.importNode(ie.firstChild,!0)}else L=document.createElementNS(n.svg,L);x.ensureId(L)}return this.node=L,this.setAttributes(z),Q&&this.append(Q),this}},U=x.prototype;function oe(L,z,Q){Q||(Q={});for(var ie=Q.includeAnnotationIndices,ve=Q.eol,Pe=Q.lineHeight,Re=Q.baseSize,We=0,pt={},st=z.length-1,vt=0;vt<=st;vt++){var Tt=z[vt],Et=null;if(x.isObject(Tt)){var Ft=Tt.attrs,er=x("tspan",Ft),Gn=er.node,ar=Tt.t;ve&&vt===st&&(ar+=ve),Gn.textContent=ar;var zt=Ft.class;zt&&er.addClass(zt),ie&&er.attr("annotations",Tt.annotations),Et=parseFloat(Ft["font-size"]),isFinite(Et)||(Et=Re),Et&&Et>We&&(We=Et)}else ve&&vt===st&&(Tt+=ve),Gn=document.createTextNode(Tt||" "),Re&&Re>We&&(We=Re);L.appendChild(Gn)}return We&&(pt.maxFontSize=We),Pe?pt.lineHeight=Pe:We&&(pt.lineHeight=1.2*We),pt}Object.defineProperty(U,"id",{enumerable:!0,get:function(){return this.node.id},set:function(L){this.node.id=L}}),U.getTransformToElement=function(L){var z=this.node;if(x.isSVGGraphicsElement(L)&&x.isSVGGraphicsElement(z)){var Q=x.toNode(L).getScreenCTM(),ie=z.getScreenCTM();if(Q&&ie)return Q.inverse().multiply(ie)}return x.createSVGMatrix()},U.transform=function(L,z){var Q=this.node;if(x.isUndefined(L))return x.transformStringToMatrix(this.attr("transform"));if(z&&z.absolute)return this.attr("transform",x.matrixToTransformString(L));var ie=x.createSVGTransform(L);return Q.transform.baseVal.appendItem(ie),this},U.translate=function(L,z,Q){Q=Q||{},z=z||0;var ie=this.attr("transform")||"",ve=x.parseTransformString(ie);return ie=ve.value,x.isUndefined(L)?ve.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(Q.absolute?L:ve.translate.tx+L)+","+(Q.absolute?z:ve.translate.ty+z)+") "+ie).trim()),this)},U.rotate=function(L,z,Q,ie){ie=ie||{};var ve=this.attr("transform")||"",Pe=x.parseTransformString(ve);return ve=Pe.value,x.isUndefined(L)?Pe.rotate:(ve=ve.replace(/rotate\([^)]*\)/g,"").trim(),L%=360,this.attr("transform",(ve+" rotate("+(ie.absolute?L:Pe.rotate.angle+L)+(void 0!==z&&void 0!==Q?","+z+","+Q:"")+")").trim()),this)},U.scale=function(L,z){z=x.isUndefined(z)?L:z;var Q=this.attr("transform")||"",ie=x.parseTransformString(Q);return Q=ie.value,x.isUndefined(L)?ie.scale:(Q=Q.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(Q+" scale("+L+","+z+")").trim()),this)},U.bbox=function(L,z){var Q,ie=this.node,ve=ie.ownerSVGElement;if(!ve)return new bt(0,0,0,0);try{Q=ie.getBBox()}catch(Re){Q={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(L)return new bt(Q);var Pe=this.getTransformToElement(z||ve);return x.transformRect(Q,Pe)},U.getBBox=function(L){var Q,z={},ie=this.node;if(!ie.ownerSVGElement||!x.isSVGGraphicsElement(ie))return new bt(0,0,0,0);if(L&&(L.target&&(z.target=x.toNode(L.target)),L.recursive&&(z.recursive=L.recursive)),z.recursive){var Re=this.children(),We=Re.length;if(0===We)return this.getBBox({target:z.target,recursive:!1});z.target||(z.target=this);for(var pt=0;pt<We;pt++){var vt,st=Re[pt];vt=0===st.children().length?st.getBBox({target:z.target,recursive:!1}):st.getBBox({target:z.target,recursive:!0}),Q=Q?Q.union(vt):vt}return Q}try{Q=ie.getBBox()}catch(Tt){Q={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(z.target){var Pe=this.getTransformToElement(z.target);return x.transformRect(Q,Pe)}return new bt(Q)};var Te=/em$/;function Ie(L,z){var Q=parseFloat(L);return Te.test(L)?Q*z:Q}U.text=function(L,z){if(L&&"string"!=typeof L)throw new Error("Vectorizer: text() expects the first argument to be a string.");L=x.sanitizeText(L),z||(z={});var Q=z.displayEmpty,ie=z.eol,ve=z.textPath,Pe=z.textVerticalAnchor,Re="middle"===Pe||"bottom"===Pe||"top"===Pe,We=z.x;void 0===We&&(We=this.attr("x")||0);var pt=z.includeAnnotationIndices,st=z.annotations;st&&!x.isArray(st)&&(st=[st]);var vt=z.lineHeight,Tt="auto"===vt,Et=Tt?"1.5em":vt||"1em";this.empty(),this.attr({"xml:space":"preserve",display:L||Q?null:"none"});var Ft=parseFloat(this.attr("font-size"));Ft||(Ft=16,(Re||st)&&this.attr("font-size",Ft));var Gn,er=document;ve?("string"==typeof ve&&(ve={d:ve}),Gn=function ne(L,z){L||(L={});var Q=x("textPath"),ie=L.d;if(ie&&void 0===L["xlink:href"]){var ve=x("path").attr("d",ie).appendTo(z.defs());Q.attr("xlink:href","#"+ve.id)}return x.isObject(L)&&Q.attr(L),Q.node}(ve,this)):Gn=er.createDocumentFragment();for(var Yt,ar=0,zt=L.split("\n"),sn=[],Xt=0,In=zt.length-1;Xt<=In;Xt++){var Bn,tr=Et,ir="v-line",Sn=er.createElementNS(n.svg,"tspan"),Ir=zt[Xt];if(Ir)if(st){var On=(Bn=oe(Sn,x.annotateString(Ir,st,{offset:-ar,includeAnnotationIndices:pt}),{includeAnnotationIndices:pt,eol:Xt!==In&&ie,lineHeight:Tt?null:Et,baseSize:Ft})).lineHeight;On&&Tt&&0!==Xt&&(tr=On),0===Xt&&(Yt=.8*Bn.maxFontSize)}else ie&&Xt!==In&&(Ir+=ie),Sn.textContent=Ir;else{Sn.textContent="-",ir+=" v-empty-line";var $t=Sn.style;$t.fillOpacity=0,$t.strokeOpacity=0,st&&(Bn={})}Bn&&sn.push(Bn),Xt>0&&Sn.setAttribute("dy",tr),(Xt>0||ve)&&Sn.setAttribute("x",We),Sn.className.baseVal=ir,Gn.appendChild(Sn),ar+=Ir.length+1}if(Re)if(st)tr=function je(L,z,Q,ie){if(!Array.isArray(z))return 0;var ve=z.length;if(!ve)return 0;for(var Pe=z[0],Re=Ie(Pe.maxFontSize,Q)||Q,We=0,pt=Ie(ie,Q),st=1;st<ve;st++)We+=Ie((Pe=z[st]).lineHeight,Q)||pt;var Et,Tt=Ie(Pe.maxFontSize,Q)||Q;switch(L){case"middle":Et=Re/2-.15*Tt-We/2;break;case"bottom":Et=-.25*Tt-We;break;default:Et=.8*Re}return Et}(Pe,sn,Ft,Et);else if("top"===Pe)tr="0.8em";else{var Pt;switch(In>0?(Pt=parseFloat(Et)||1,Pt*=In,Te.test(Et)||(Pt/=Ft)):Pt=0,Pe){case"middle":tr=.3-Pt/2+"em";break;case"bottom":tr=-Pt-.3+"em"}}else 0===Pe?tr="0em":Pe?tr=Pe:(tr=0,null===this.attr("y")&&this.attr("y",Yt||"0.8em"));return Gn.firstChild.setAttribute("dy",tr),this.append(Gn),this},U.removeAttr=function(L){var z=x.qualifyAttr(L),Q=this.node;return z.ns?Q.hasAttributeNS(z.ns,z.local)&&Q.removeAttributeNS(z.ns,z.local):Q.hasAttribute(L)&&Q.removeAttribute(L),this},U.attr=function(L,z){if(x.isUndefined(L)){for(var Q=this.node.attributes,ie={},ve=0;ve<Q.length;ve++)ie[Q[ve].name]=Q[ve].value;return ie}if(x.isString(L)&&x.isUndefined(z))return this.node.getAttribute(L);if("object"==typeof L)for(var Pe in L)L.hasOwnProperty(Pe)&&this.setAttribute(Pe,L[Pe]);else this.setAttribute(L,z);return this},U.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",x.normalizePathData(this.attr("d"))),this},U.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},U.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},U.setAttributes=function(L){for(var z in L)L.hasOwnProperty(z)&&this.setAttribute(z,L[z]);return this},U.append=function(L){x.isArray(L)||(L=[L]);for(var z=0,Q=L.length;z<Q;z++)this.node.appendChild(x.toNode(L[z]));return this},U.prepend=function(L){var z=this.node.firstChild;return z?x(z).before(L):this.append(L)},U.before=function(L){var z=this.node,Q=z.parentNode;if(Q){x.isArray(L)||(L=[L]);for(var ie=0,ve=L.length;ie<ve;ie++)Q.insertBefore(x.toNode(L[ie]),z)}return this},U.appendTo=function(L){return x.toNode(L).appendChild(this.node),this},U.svg=function(){return this.node instanceof window.SVGSVGElement?this:x(this.node.ownerSVGElement)},U.tagName=function(){return this.node.tagName.toUpperCase()},U.defs=function(){var L=this.svg()||this,z=L.node.getElementsByTagName("defs")[0];return z?x(z):x("defs").appendTo(L)},U.clone=function(){var L=x(this.node.cloneNode(!0));return L.node.id=x.uniqueId(),L},U.findOne=function(L){var z=this.node.querySelector(L);return z?x(z):void 0},U.find=function(L){var z=[],Q=this.node.querySelectorAll(L);if(Q)for(var ie=0;ie<Q.length;ie++)z.push(x(Q[ie]));return z},U.children=function(){for(var L=this.node.childNodes,z=[],Q=0;Q<L.length;Q++)1===L[Q].nodeType&&z.push(x(L[Q]));return z},U.parent=function(){return x(this.node.parentNode)||null},U.index=function(){for(var L=0,z=this.node.previousSibling;z;)1===z.nodeType&&L++,z=z.previousSibling;return L},U.findParentByClass=function(L,z){for(var Q=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==z&&ie!==Q;){var ve=x(ie);if(ve.hasClass(L))return ve;ie=ie.parentNode}return null},U.contains=function(L){var z=this.node,Q=x.toNode(L),ie=Q&&Q.parentNode;return z===ie||!!(ie&&1===ie.nodeType&&16&z.compareDocumentPosition(ie))},U.toLocalPoint=function(L,z){var Q=this.svg().node,ie=Q.createSVGPoint();ie.x=L,ie.y=z;try{var ve=ie.matrixTransform(Q.getScreenCTM().inverse()),Pe=this.getTransformToElement(Q).inverse()}catch(Re){return ie}return ve.matrixTransform(Pe)},U.translateCenterToPoint=function(L){var Q=this.getBBox({target:this.svg()}).center();return this.translate(L.x-Q.x,L.y-Q.y),this},U.translateAndAutoOrient=function(L,z,Q){L=new ye(L),z=new ye(z),Q||(Q=this.svg());var ie=this.scale();this.attr("transform","");var ve=this.getBBox({target:Q}).scale(ie.sx,ie.sy),Pe=x.createSVGTransform();Pe.setTranslate(-ve.x-ve.width/2,-ve.y-ve.height/2);var Re=x.createSVGTransform(),We=L.angleBetween(z,L.clone().offset(1,0));We&&Re.setRotate(We,0,0);var pt=x.createSVGTransform(),st=L.clone().move(z,ve.width/2);pt.setTranslate(2*L.x-st.x,2*L.y-st.y);var vt=this.getTransformToElement(Q),Tt=x.createSVGTransform();return Tt.setMatrix(pt.matrix.multiply(Re.matrix.multiply(Pe.matrix.multiply(vt.scale(ie.sx,ie.sy))))),this.attr("transform",x.matrixToTransformString(Tt.matrix)),this},U.animateAlongPath=function(L,z){z=x.toNode(z);var Q=x.ensureId(z),ie=x("animateMotion",L),ve=x("mpath",{"xlink:href":"#"+Q});ie.append(ve),this.append(ie);try{ie.node.beginElement()}catch(Et){if("fake"===document.documentElement.getAttribute("smiling")){var Pe=ie.node;Pe.animators=[];var Re=Pe.getAttribute("id");Re&&(id2anim[Re]=Pe);for(var We=getTargets(Pe),pt=0,st=We.length;pt<st;pt++){var Tt=new Animator(Pe,We[pt],pt);animators.push(Tt),Pe.animators[pt]=Tt,Tt.register()}}}return this},U.hasClass=function(L){return new RegExp("(\\s|^)"+L+"(\\s|$)").test(this.node.getAttribute("class"))},U.addClass=function(L){if(L&&!this.hasClass(L)){var z=this.node.getAttribute("class")||"";this.node.setAttribute("class",(z+" "+L).trim())}return this},U.removeClass=function(L){if(L&&this.hasClass(L)){var z=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+L+"(\\s|$)","g"),"$2");this.node.setAttribute("class",z)}return this},U.toggleClass=function(L,z){return(x.isUndefined(z)?this.hasClass(L):!z)?this.removeClass(L):this.addClass(L),this},U.sample=function(L){L=L||1;for(var Pe,z=this.node,Q=z.getTotalLength(),ie=[],ve=0;ve<Q;)Pe=z.getPointAtLength(ve),ie.push({x:Pe.x,y:Pe.y,distance:ve}),ve+=L;return ie},U.convertToPath=function(){var L=x("path");L.attr(this.attr());var z=this.convertToPathData();return z&&L.attr("d",z),L},U.convertToPathData=function(){var L=this.tagName();switch(L){case"PATH":return this.attr("d");case"LINE":return x.convertLineToPathData(this.node);case"POLYGON":return x.convertPolygonToPathData(this.node);case"POLYLINE":return x.convertPolylineToPathData(this.node);case"ELLIPSE":return x.convertEllipseToPathData(this.node);case"CIRCLE":return x.convertCircleToPathData(this.node);case"RECT":return x.convertRectToPathData(this.node)}throw new Error(L+" cannot be converted to PATH.")},x.prototype.toGeometryShape=function(){var L,z,Q,ie,ve,Pe,Re,We,pt,st,vt,Tt,Et,Ft,er;switch(this.tagName()){case"RECT":return L=parseFloat(this.attr("x"))||0,z=parseFloat(this.attr("y"))||0,Q=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new bt(L,z,Q,ie);case"CIRCLE":return ve=parseFloat(this.attr("cx"))||0,Pe=parseFloat(this.attr("cy"))||0,Re=parseFloat(this.attr("r"))||0,new Si({x:ve,y:Pe},Re,Re);case"ELLIPSE":return ve=parseFloat(this.attr("cx"))||0,Pe=parseFloat(this.attr("cy"))||0,We=parseFloat(this.attr("rx"))||0,pt=parseFloat(this.attr("ry"))||0,new Si({x:ve,y:Pe},We,pt);case"POLYLINE":return st=x.getPointsFromSvgNode(this),new rr(st);case"POLYGON":return(st=x.getPointsFromSvgNode(this)).length>1&&st.push(st[0]),new rr(st);case"PATH":return vt=this.attr("d"),Lt.isDataSupported(vt)||(vt=x.normalizePathData(vt)),new Lt(vt);case"LINE":return Tt=parseFloat(this.attr("x1"))||0,Ft=parseFloat(this.attr("y1"))||0,Et=parseFloat(this.attr("x2"))||0,er=parseFloat(this.attr("y2"))||0,new It({x:Tt,y:Ft},{x:Et,y:er})}return this.getBBox()},U.findIntersection=function(L,z){var Q=this.svg().node,ie=this.getBBox({target:z=z||Q}),ve=ie.center();if(ie.intersectionWithLineFromCenterToPoint(L)){var Pe,Re=this.tagName();if("RECT"===Re){var We=new bt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),pt=this.getTransformToElement(z),st=x.decomposeMatrix(pt),vt=Q.createSVGTransform();vt.setRotate(-st.rotation,ve.x,ve.y);var Tt=x.transformRect(We,vt.matrix.multiply(pt));Pe=new bt(Tt).intersectionWithLineFromCenterToPoint(L,st.rotation)}else if("PATH"===Re||"POLYGON"===Re||"POLYLINE"===Re||"CIRCLE"===Re||"ELLIPSE"===Re){var ar,zt,sn,Xt,In,Ft=("PATH"===Re?this:this.convertToPath()).sample(),er=1/0,Gn=[];for(ar=0;ar<Ft.length;ar++)sn=(sn=x.createSVGPoint((zt=Ft[ar]).x,zt.y)).matrixTransform(this.getTransformToElement(z)),(In=(zt=new ye(sn)).distance(ve)+(Xt=1.1*zt.distance(L)))<er?(er=In,Gn=[{sample:zt,refDistance:Xt}]):In<er+1&&Gn.push({sample:zt,refDistance:Xt});Gn.sort(function(tr,ir){return tr.refDistance-ir.refDistance}),Gn[0]&&(Pe=Gn[0].sample)}return Pe}},U.setAttribute=function(L,z){var Q=this.node;if(null===z)return this.removeAttr(L),this;var ie=x.qualifyAttr(L);return ie.ns?Q.setAttributeNS(ie.ns,L,z):"id"===L?Q.id=z:Q.setAttribute(L,z),this},x.createSvgDocument=function(L){if(L){const Q=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${L}</svg>`,{documentElement:ie}=x.parseXML(Q,{async:!1});return ie}const z=document.createElementNS(n.svg,"svg");return z.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),z.setAttribute("version","1.1"),z},x.createSVGStyle=function(L){const{node:z}=x("style",{type:"text/css"},[x.createCDATASection(L)]);return z},x.createCDATASection=function(L=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(L)},x.idCounter=0,x.uniqueId=function(){return"v-"+ ++x.idCounter},x.toNode=function(L){return x.isV(L)?L.node:L.nodeName&&L||L[0]},x.ensureId=function(L){return(L=x.toNode(L)).id||(L.id=x.uniqueId())},x.sanitizeText=function(L){return(L||"").replace(/ /g,"\xa0")},x.isUndefined=function(L){return void 0===L},x.isString=function(L){return"string"==typeof L},x.isObject=function(L){return L&&"object"==typeof L},x.isArray=Array.isArray,x.parseXML=function(L,z){var Q;z=z||{};try{var ie=new DOMParser;x.isUndefined(z.async)||(ie.async=z.async),Q=ie.parseFromString(L,"text/xml")}catch(ve){Q=void 0}if(!Q||Q.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+L);return Q},x.qualifyAttr=function(L){if(-1!==L.indexOf(":")){var z=L.split(":");return{ns:n[z[0]],local:z[1]}}return{ns:null,local:L}},x.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,x.transformSeparatorRegex=/[ ,]+/,x.transformationListRegex=/^(\w+)\((.*)\)/,x.transformStringToMatrix=function(L){var z=x.createSVGMatrix(),Q=L&&L.match(x.transformRegex);if(!Q)return z;for(var ie=0,ve=Q.length;ie<ve;ie++){var Re=Q[ie].match(x.transformationListRegex);if(Re){var We,pt,st,vt,Tt,Et=x.createSVGMatrix(),Ft=Re[2].split(x.transformSeparatorRegex);switch(Re[1].toLowerCase()){case"scale":We=parseFloat(Ft[0]),pt=void 0===Ft[1]?We:parseFloat(Ft[1]),Et=Et.scaleNonUniform(We,pt);break;case"translate":st=parseFloat(Ft[0]),vt=parseFloat(Ft[1]),Et=Et.translate(st,vt);break;case"rotate":Tt=parseFloat(Ft[0]),st=parseFloat(Ft[1])||0,vt=parseFloat(Ft[2])||0,Et=0!==st||0!==vt?Et.translate(st,vt).rotate(Tt).translate(-st,-vt):Et.rotate(Tt);break;case"skewx":Tt=parseFloat(Ft[0]),Et=Et.skewX(Tt);break;case"skewy":Tt=parseFloat(Ft[0]),Et=Et.skewY(Tt);break;case"matrix":Et.a=parseFloat(Ft[0]),Et.b=parseFloat(Ft[1]),Et.c=parseFloat(Ft[2]),Et.d=parseFloat(Ft[3]),Et.e=parseFloat(Ft[4]),Et.f=parseFloat(Ft[5]);break;default:continue}z=z.multiply(Et)}}return z},x.matrixToTransformString=function(L){return L||(L=!0),"matrix("+(void 0!==L.a?L.a:1)+","+(void 0!==L.b?L.b:0)+","+(void 0!==L.c?L.c:0)+","+(void 0!==L.d?L.d:1)+","+(void 0!==L.e?L.e:0)+","+(void 0!==L.f?L.f:0)+")"},x.parseTransformString=function(L){var z,Q,ie;if(L){var ve=x.transformSeparatorRegex;if(L.trim().indexOf("matrix")>=0){var Pe=x.transformStringToMatrix(L),Re=x.decomposeMatrix(Pe);ie=[Re.scaleX,Re.scaleY],Q=[Re.rotation];var We=[];(0!==(z=[Re.translateX,Re.translateY])[0]||0!==z[1])&&We.push("translate("+z+")"),(1!==ie[0]||1!==ie[1])&&We.push("scale("+ie+")"),0!==Q[0]&&We.push("rotate("+Q+")"),L=We.join(" ")}else{var pt=L.match(/translate\((.*?)\)/);pt&&(z=pt[1].split(ve));var st=L.match(/rotate\((.*?)\)/);st&&(Q=st[1].split(ve));var vt=L.match(/scale\((.*?)\)/);vt&&(ie=vt[1].split(ve))}}var Tt=ie&&ie[0]?parseFloat(ie[0]):1;return{value:L,translate:{tx:z&&z[0]?parseInt(z[0],10):0,ty:z&&z[1]?parseInt(z[1],10):0},rotate:{angle:Q&&Q[0]?parseInt(Q[0],10):0,cx:Q&&Q[1]?parseInt(Q[1],10):void 0,cy:Q&&Q[2]?parseInt(Q[2],10):void 0},scale:{sx:Tt,sy:ie&&ie[1]?parseFloat(ie[1]):Tt}}},x.deltaTransformPoint=function(L,z){return{x:z.x*L.a+z.y*L.c+0,y:z.x*L.b+z.y*L.d+0}},x.decomposeMatrix=function(L){var z=x.deltaTransformPoint(L,{x:0,y:1}),Q=x.deltaTransformPoint(L,{x:1,y:0}),ie=180/o*s(z.y,z.x)-90,ve=180/o*s(Q.y,Q.x);return{translateX:L.e,translateY:L.f,scaleX:c(L.a*L.a+L.b*L.b),scaleY:c(L.c*L.c+L.d*L.d),skewX:ie,skewY:ve,rotation:ie}},x.matrixToScale=function(L){var z,Q,ie,ve;return L?(z=x.isUndefined(L.a)?1:L.a,ve=x.isUndefined(L.d)?1:L.d,Q=L.b,ie=L.c):z=ve=1,{sx:Q?c(z*z+Q*Q):z,sy:ie?c(ie*ie+ve*ve):ve}},x.matrixToRotate=function(L){var z={x:0,y:1};return L&&(z=x.deltaTransformPoint(L,z)),{angle:Jo(Qa(s(z.y,z.x))-90)}},x.matrixToTranslate=function(L){return{tx:L&&L.e||0,ty:L&&L.f||0}},x.isV=function(L){return L instanceof x},x.isVElement=x.isV,x.isSVGGraphicsElement=function(L){return!!L&&(L=x.toNode(L))instanceof SVGElement&&"function"==typeof L.getScreenCTM};var Ve=x("svg").node;return x.createSVGMatrix=function(L){var z=Ve.createSVGMatrix();for(var Q in L)z[Q]=L[Q];return z},x.createSVGTransform=function(L){return x.isUndefined(L)?Ve.createSVGTransform():(L instanceof SVGMatrix||(L=x.createSVGMatrix(L)),Ve.createSVGTransformFromMatrix(L))},x.createSVGPoint=function(L,z){var Q=Ve.createSVGPoint();return Q.x=L,Q.y=z,Q},x.transformRect=function(L,z){var Q=Ve.createSVGPoint();Q.x=L.x,Q.y=L.y;var ie=Q.matrixTransform(z);Q.x=L.x+L.width,Q.y=L.y;var ve=Q.matrixTransform(z);Q.x=L.x+L.width,Q.y=L.y+L.height;var Pe=Q.matrixTransform(z);Q.x=L.x,Q.y=L.y+L.height;var Re=Q.matrixTransform(z),We=p(ie.x,ve.x,Pe.x,Re.x),pt=v(ie.x,ve.x,Pe.x,Re.x),st=p(ie.y,ve.y,Pe.y,Re.y),vt=v(ie.y,ve.y,Pe.y,Re.y);return new bt(We,st,pt-We,vt-st)},x.transformPoint=function(L,z){return new ye(x.createSVGPoint(L.x,L.y).matrixTransform(z))},x.transformLine=function(L,z){return new It(x.transformPoint(L.start,z),x.transformPoint(L.end,z))},x.transformPolyline=function(L,z){var Q=L instanceof rr?L.points:L;x.isArray(Q)||(Q=[]);for(var ie=[],ve=0,Pe=Q.length;ve<Pe;ve++)ie[ve]=x.transformPoint(Q[ve],z);return new rr(ie)},x.styleToObject=function(L){for(var z={},Q=L.split(";"),ie=0;ie<Q.length;ie++){var Pe=Q[ie].split("=");z[Pe[0].trim()]=Pe[1].trim()}return z},x.createSlicePathData=function(L,z,Q,ie){var ve=2*o-1e-6,Pe=L,Re=z,We=Q,pt=ie,st=(pt<We&&(st=We,We=pt,pt=st),pt-We),vt=st<o?"0":"1",Tt=C(We),Et=M(We),Ft=C(pt),er=M(pt);return st>=ve?Pe?"M0,"+Re+"A"+Re+","+Re+" 0 1,1 0,"+-Re+"A"+Re+","+Re+" 0 1,1 0,"+Re+"M0,"+Pe+"A"+Pe+","+Pe+" 0 1,0 0,"+-Pe+"A"+Pe+","+Pe+" 0 1,0 0,"+Pe+"Z":"M0,"+Re+"A"+Re+","+Re+" 0 1,1 0,"+-Re+"A"+Re+","+Re+" 0 1,1 0,"+Re+"Z":Pe?"M"+Re*Tt+","+Re*Et+"A"+Re+","+Re+" 0 "+vt+",1 "+Re*Ft+","+Re*er+"L"+Pe*Ft+","+Pe*er+"A"+Pe+","+Pe+" 0 "+vt+",0 "+Pe*Tt+","+Pe*Et+"Z":"M"+Re*Tt+","+Re*Et+"A"+Re+","+Re+" 0 "+vt+",1 "+Re*Ft+","+Re*er+"L0,0Z"},x.mergeAttrs=function(L,z){for(var Q in z)L[Q]="class"===Q?L[Q]?L[Q]+" "+z[Q]:z[Q]:"style"===Q?x.isObject(L[Q])&&x.isObject(z[Q])?x.mergeAttrs(L[Q],z[Q]):x.isObject(L[Q])?x.mergeAttrs(L[Q],x.styleToObject(z[Q])):x.isObject(z[Q])?x.mergeAttrs(x.styleToObject(L[Q]),z[Q]):x.mergeAttrs(x.styleToObject(L[Q]),x.styleToObject(z[Q])):z[Q];return L},x.annotateString=function(L,z,Q){z=z||[];for(var Pe,We,pt,ie=(Q=Q||{}).offset||0,ve=[],Re=[],st=0;st<L.length;st++){We=Re[st]=L[st];for(var vt=0;vt<z.length;vt++){var Tt=z[vt];st>=Tt.start+ie&&st<Tt.end+ie&&(x.isObject(We)?We.attrs=x.mergeAttrs(x.mergeAttrs({},We.attrs),Tt.attrs):We=Re[st]={t:L[st],attrs:Tt.attrs},Q.includeAnnotationIndices&&(We.annotations||(We.annotations=[])).push(vt))}(pt=Re[st-1])?x.isObject(We)&&x.isObject(pt)?JSON.stringify(We.attrs)===JSON.stringify(pt.attrs)?Pe.t+=We.t:(ve.push(Pe),Pe=We):x.isObject(We)||x.isObject(pt)?(ve.push(Pe),Pe=We):Pe=(Pe||"")+We:Pe=We}return Pe&&ve.push(Pe),ve},x.findAnnotationsAtIndex=function(L,z){var Q=[];return L&&L.forEach(function(ie){ie.start<z&&z<=ie.end&&Q.push(ie)}),Q},x.findAnnotationsBetweenIndexes=function(L,z,Q){var ie=[];return L&&L.forEach(function(ve){(z>=ve.start&&z<ve.end||Q>ve.start&&Q<=ve.end||ve.start>=z&&ve.end<Q)&&ie.push(ve)}),ie},x.shiftAnnotations=function(L,z,Q){return L&&L.forEach(function(ie){ie.start<z&&ie.end>=z?ie.end+=Q:ie.start>=z&&(ie.start+=Q,ie.end+=Q)}),L},x.convertLineToPathData=function(L){return["M",(L=x(L)).attr("x1"),L.attr("y1"),"L",L.attr("x2"),L.attr("y2")].join(" ")},x.convertPolygonToPathData=function(L){var z=x.getPointsFromSvgNode(L);return 0===z.length?null:x.svgPointsToPath(z)+" Z"},x.convertPolylineToPathData=function(L){var z=x.getPointsFromSvgNode(L);return 0===z.length?null:x.svgPointsToPath(z)},x.svgPointsToPath=function(L){for(var z=0,Q=L.length;z<Q;z++)L[z]=L[z].x+" "+L[z].y;return"M "+L.join(" L")},x.getPointsFromSvgNode=function(L){var z=[],Q=(L=x.toNode(L)).points;if(Q)for(var ie=0,ve=Q.numberOfItems;ie<ve;ie++)z.push(Q.getItem(ie));return z},x.KAPPA=.551784,x.convertCircleToPathData=function(L){L=x(L);var z=parseFloat(L.attr("cx"))||0,Q=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("r")),ve=ie*x.KAPPA;return["M",z,Q-ie,"C",z+ve,Q-ie,z+ie,Q-ve,z+ie,Q,"C",z+ie,Q+ve,z+ve,Q+ie,z,Q+ie,"C",z-ve,Q+ie,z-ie,Q+ve,z-ie,Q,"C",z-ie,Q-ve,z-ve,Q-ie,z,Q-ie,"Z"].join(" ")},x.convertEllipseToPathData=function(L){L=x(L);var z=parseFloat(L.attr("cx"))||0,Q=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("rx")),ve=parseFloat(L.attr("ry"))||ie,Pe=ie*x.KAPPA,Re=ve*x.KAPPA;return["M",z,Q-ve,"C",z+Pe,Q-ve,z+ie,Q-Re,z+ie,Q,"C",z+ie,Q+Re,z+Pe,Q+ve,z,Q+ve,"C",z-Pe,Q+ve,z-ie,Q+Re,z-ie,Q,"C",z-ie,Q-Re,z-Pe,Q-ve,z,Q-ve,"Z"].join(" ")},x.convertRectToPathData=function(L){return L=x(L),x.rectToPath({x:parseFloat(L.attr("x"))||0,y:parseFloat(L.attr("y"))||0,width:parseFloat(L.attr("width"))||0,height:parseFloat(L.attr("height"))||0,rx:parseFloat(L.attr("rx"))||0,ry:parseFloat(L.attr("ry"))||0})},x.rectToPath=function(L){var Q=L.x,ie=L.y,ve=L.width,Pe=L.height,Re=p(L.rx||L["top-rx"]||0,ve/2),We=p(L.rx||L["bottom-rx"]||0,ve/2),pt=p(L.ry||L["top-ry"]||0,Pe/2),st=p(L.ry||L["bottom-ry"]||0,Pe/2);return(Re||We||pt||st?["M",Q,ie+pt,"v",Pe-pt-st,"a",We,st,0,0,0,We,st,"h",ve-2*We,"a",We,st,0,0,0,We,-st,"v",-(Pe-st-pt),"a",Re,pt,0,0,0,-Re,-pt,"h",-(ve-2*Re),"a",Re,pt,0,0,0,-Re,pt,"Z"]:["M",Q,ie,"H",Q+ve,"V",ie+Pe,"H",Q,"V",ie,"Z"]).join(" ")},x.normalizePathData=function(){var L="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",z=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),Q=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig"),ie=Math,ve=ie.PI,Pe=ie.sin,Re=ie.cos,We=ie.tan,pt=ie.asin,st=ie.sqrt,vt=ie.abs;function Tt(zt,sn,Yt,Xt,In,tr){var ir=.3333333333333333,Sn=2/3;return[ir*zt+Sn*Yt,ir*sn+Sn*Xt,ir*In+Sn*Yt,ir*tr+Sn*Xt,In,tr]}function Et(zt,sn,Yt){return{x:zt*Re(Yt)-sn*Pe(Yt),y:zt*Pe(Yt)+sn*Re(Yt)}}function Ft(zt,sn,Yt,Xt,In,tr,ir,Sn,Ir,Bn){var Pt,cn=120*ve/180,On=ve/180*(+In||0),$t=[];if(Bn)Hi=Bn[0],Ur=Bn[1],td=Bn[2],nd=Bn[3];else{sn=(Pt=Et(zt,sn,-On)).y;var Vi=((zt=Pt.x)-(Sn=(Pt=Et(Sn,Ir,-On)).x))/2,qi=(sn-(Ir=Pt.y))/2,Es=Vi*Vi/(Yt*Yt)+qi*qi/(Xt*Xt);Es>1&&(Yt*=Es=st(Es),Xt*=Es);var Vg=Yt*Yt,Hg=Xt*Xt,Mm=(tr==ir?-1:1)*st(vt((Vg*Hg-Vg*qi*qi-Hg*Vi*Vi)/(Vg*qi*qi+Hg*Vi*Vi))),td=Mm*Yt*qi/Xt+(zt+Sn)/2,nd=Mm*-Xt*Vi/Yt+(sn+Ir)/2,Hi=pt(((sn-nd)/Xt).toFixed(9)),Ur=pt(((Ir-nd)/Xt).toFixed(9));(Hi=zt<td?ve-Hi:Hi)<0&&(Hi=2*ve+Hi),(Ur=Sn<td?ve-Ur:Ur)<0&&(Ur=2*ve+Ur),ir&&Hi>Ur&&(Hi-=2*ve),!ir&&Ur>Hi&&(Ur-=2*ve)}var jg=Ur-Hi;if(vt(jg)>cn){var v0=Ur,y0=Sn,_0=Ir;$t=Ft(Sn=td+Yt*Re(Ur=Hi+cn*(ir&&Ur>Hi?1:-1)),Ir=nd+Xt*Pe(Ur),Yt,Xt,In,0,ir,y0,_0,[Ur,v0,td,nd])}jg=Ur-Hi;var x0=Re(Hi),b0=Pe(Hi),C0=Re(Ur),w0=Pe(Ur),Am=We(jg/4),km=4/3*(Yt*Am),Om=4/3*(Xt*Am),Lm=[zt,sn],Vl=[zt+km*b0,sn-Om*x0],Rm=[Sn+km*w0,Ir-Om*C0],Nm=[Sn,Ir];if(Vl[0]=2*Lm[0]-Vl[0],Vl[1]=2*Lm[1]-Vl[1],Bn)return[Vl,Rm,Nm].concat($t);for(var Dm=[],S0=($t=[Vl,Rm,Nm].concat($t).join().split(",")).length,nu=0;nu<S0;nu++)Dm[nu]=nu%2?Et($t[nu-1],$t[nu],On).y:Et($t[nu],$t[nu+1],On).x;return Dm}function ar(zt){var sn=function Gn(zt){if((!Array.isArray(zt)||!Array.isArray(zt&&zt[0]))&&(zt=function er(zt){if(!zt)return null;var sn={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Yt=[];return String(zt).replace(z,function(Xt,In,tr){var ir=[],Sn=In.toLowerCase();for(tr.replace(Q,function(Ir,Bn){Bn&&ir.push(+Bn)}),"m"===Sn&&ir.length>2&&(Yt.push([In].concat(ir.splice(0,2))),Sn="l",In="m"===In?"l":"L");ir.length>=sn[Sn]&&(Yt.push([In].concat(ir.splice(0,sn[Sn]))),sn[Sn]););}),Yt}(zt)),!zt||!zt.length)return[["M",0,0]];for(var Sn,sn=[],Yt=0,Xt=0,In=0,tr=0,Ir=zt.length,Bn=0;Bn<Ir;Bn++){var cn=[];sn.push(cn);var $t,Pt,On=zt[Bn];if((Sn=On[0])!=Sn.toUpperCase())switch(cn[0]=Sn.toUpperCase(),cn[0]){case"A":cn[1]=On[1],cn[2]=On[2],cn[3]=On[3],cn[4]=On[4],cn[5]=On[5],cn[6]=+On[6]+Yt,cn[7]=+On[7]+Xt;break;case"V":cn[1]=+On[1]+Xt;break;case"H":cn[1]=+On[1]+Yt;break;case"M":for(In=+On[1]+Yt,tr=+On[2]+Xt,$t=On.length,Pt=1;Pt<$t;Pt++)cn[Pt]=+On[Pt]+(Pt%2?Yt:Xt);break;default:for($t=On.length,Pt=1;Pt<$t;Pt++)cn[Pt]=+On[Pt]+(Pt%2?Yt:Xt)}else for(var Vi=On.length,qi=0;qi<Vi;qi++)cn[qi]=On[qi];switch(cn[0]){case"Z":Yt=+In,Xt=+tr;break;case"H":Yt=cn[1];break;case"V":Xt=cn[1];break;case"M":In=cn[cn.length-2],tr=cn[cn.length-1],Yt=cn[cn.length-2],Xt=cn[cn.length-1];break;default:Yt=cn[cn.length-2],Xt=cn[cn.length-1]}}return sn}(zt),Yt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Xt($t,Pt,Vi){var qi,Es;if(!$t)return["C",Pt.x,Pt.y,Pt.x,Pt.y,Pt.x,Pt.y];switch($t[0]in{T:1,Q:1}||(Pt.qx=null,Pt.qy=null),$t[0]){case"M":Pt.X=$t[1],Pt.Y=$t[2];break;case"A":$t=0===parseFloat($t[1])||0===parseFloat($t[2])?["L",$t[6],$t[7]]:["C"].concat(Ft.apply(0,[Pt.x,Pt.y].concat($t.slice(1))));break;case"S":"C"===Vi||"S"===Vi?(qi=2*Pt.x-Pt.bx,Es=2*Pt.y-Pt.by):(qi=Pt.x,Es=Pt.y),$t=["C",qi,Es].concat($t.slice(1));break;case"T":"Q"===Vi||"T"===Vi?(Pt.qx=2*Pt.x-Pt.qx,Pt.qy=2*Pt.y-Pt.qy):(Pt.qx=Pt.x,Pt.qy=Pt.y),$t=["C"].concat(Tt(Pt.x,Pt.y,Pt.qx,Pt.qy,$t[1],$t[2]));break;case"Q":Pt.qx=$t[1],Pt.qy=$t[2],$t=["C"].concat(Tt(Pt.x,Pt.y,$t[1],$t[2],$t[3],$t[4]));break;case"H":$t=["L"].concat($t[1],Pt.y);break;case"V":$t=["L"].concat(Pt.x,$t[1])}return $t}function In($t,Pt){if($t[Pt].length>7){$t[Pt].shift();for(var Vi=$t[Pt];Vi.length;)tr[Pt]="A",$t.splice(Pt++,0,["C"].concat(Vi.splice(0,6)));$t.splice(Pt,1),Ir=sn.length}}for(var tr=[],ir="",Sn="",Ir=sn.length,Bn=0;Bn<Ir;Bn++){sn[Bn]&&(ir=sn[Bn][0]),"C"!==ir&&(tr[Bn]=ir,Bn>0&&(Sn=tr[Bn-1])),sn[Bn]=Xt(sn[Bn],Yt,Sn),"A"!==tr[Bn]&&"C"===ir&&(tr[Bn]="C"),In(sn,Bn);var cn=sn[Bn],On=cn.length;Yt.x=cn[On-2],Yt.y=cn[On-1],Yt.bx=parseFloat(cn[On-4])||Yt.x,Yt.by=parseFloat(cn[On-3])||Yt.y}return(!sn[0][0]||"M"!==sn[0][0])&&sn.unshift(["M",0,0]),sn}return function(zt){return ar(zt).join(",").split(",").join(" ")}}(),x.namespace=n,x.g=m,x}(),ao={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Ro=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,ao.classNamePrefix.length)!==ao.classNamePrefix&&(n=ao.classNamePrefix+n),n}).join(" ")},Uh=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,ao.classNamePrefix.length)===ao.classNamePrefix&&(n=n.substr(ao.classNamePrefix.length)),n}).join(" ")},xl=function(e,n){for(var t={},i={},o=et.namespace.svg,s=n||o,c=document.createDocumentFragment(),p=[e,c,s];p.length>0;){s=p.pop();for(var v=p.pop(),C=p.pop(),M=0,x=C.length;M<x;M++){var U=C[M];if(!U.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var ne=U.tagName;U.hasOwnProperty("namespaceURI")&&(s=U.namespaceURI);var oe=document.createElementNS(s,ne),Te=s===o,Ie=Te?et:qn,je=U.attributes;je&&Ie(oe).attr(je);var Ve=U.style;if(Ve&&qn(oe).css(Ve),U.hasOwnProperty("className")){var L=U.className;Te?oe.className.baseVal=L:oe.className=L}if(U.hasOwnProperty("textContent")&&(oe.textContent=U.textContent),U.hasOwnProperty("selector")){var z=U.selector;if(t[z])throw new Error("json-dom-parser: selector must be unique");t[z]=oe,Ie(oe).attr("joint-selector",z)}if(U.hasOwnProperty("groupSelector")){var Q=U.groupSelector;Array.isArray(Q)||(Q=[Q]);for(var ie=0,ve=Q.length;ie<ve;ie++){var Pe=Q[ie],Re=i[Pe];Re||(Re=i[Pe]=[]),Re.push(oe)}}v.appendChild(oe);var We=U.children;Array.isArray(We)&&p.push(We,oe,s)}}return{fragment:c,selectors:t,groupSelectors:i}},bl=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},Gs=function(e,n,t){for(var o,i=Array.isArray(n)?n:n.split(t||"/"),s=0,c=i.length;s<c;){if(o=i[s++],Object(e)!==e||!(o in e))return;e=e[o]}return e},bc=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},Qd=function(e,n,t,i){const o=Array.isArray(n)?n:n.split(i||"/"),s=o.length-1;let c=e,p=0;for(;p<s;p++){const v=o[p];if(!bc(c,v))return e;c=c[v]||(c[v]={})}return c[o[s]]=t,e},Cl=function(e,n,t){const i=Array.isArray(n)?n:n.split(t||"/"),o=i.length-1;let s=e,c=0;for(;c<o;c++){const p=i[c];if(!bc(s,p))return e;const v=s[p];if(!v)return e;s=v}return delete s[i[o]],e},ws=function(e){return ws.id=ws.id||1,e.id=void 0===e.id?"j_"+ws.id++:e.id,e.id},Zd=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Ei=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var i in e)void 0===t[i]&&(t[i]=e[i]);n=t}var o=n.target;if(o){var s=o.correspondingUseElement;s&&(n.target=s)}return n},Us=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var i=(new Date).getTime(),o=Math.max(0,16-(i-n)),s=setTimeout(function(){t(i+o)},o);return n=i+o,s}}return function(t,i,...o){return e(void 0!==i?t.bind(i,...o):t)}}(),wl=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),ni=function(e){return hi(e)&&"%"===e.slice(-1)},$h=function(e,n){var i=parseFloat(e);if(Number.isNaN(i))return null;var s,o={};if(o.value=i,null==n)s="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;s=n.join("|")}else hi(n)&&(s=n);var c=function t(p){var v=new RegExp("(?:\\d+(?:\\.\\d+)*)("+p+")$").exec(e);return v?v[1]:null}(s);return null===c?null:(o.unit=c,o)},$s=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,i,o,s;return t=i=o=s=0,isFinite(e.vertical)&&(t=o=+e.vertical),isFinite(e.horizontal)&&(i=s=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(i=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:t,right:i,bottom:o,left:s}},Kh={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var i=(11-6*n-11*e)/4;return-i*i+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(i){var o=e(i);return o<n?n:o>t?t:o}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},ef={number:function(e,n){var t=n-e;return function(i){return e+t*i}},object:function(e,n){var t=Object.keys(e);return function(i){var o,s,c={};for(o=t.length-1;-1!=o;o--)c[s=t[o]]=e[s]+(n[s]-e[s])*i;return c}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),i=parseInt(n.slice(1),16),o=255&t,s=(255&i)-o,c=65280&t,p=(65280&i)-c,v=16711680&t,C=(16711680&i)-v;return function(M){return"#"+(1<<24|o+s*M&255|c+p*M&65280|v+C*M&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=t.exec(e),o=t.exec(n),s=o[1].indexOf("."),c=s>0?o[1].length-s-1:0,p=+o[1]-(e=+i[1]),v=i[2];return function(C){return(e+p*C).toFixed(c)+v}}},tf={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,i=Number.isFinite(e.width)?e.width:1;return Ii('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+i,innerRadius:t})},highlight:function(e){return Ii('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return Ii('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Ii(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Ii('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Ii('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Ii('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return Ii('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Ii('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return Ii('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Ii('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},Ii=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(i){for(var o=Array.from(arguments),s=o.slice(1,4).find(function(v){return!!v}),c=s.split("."),p=t[c.shift()];void 0!==p&&c.length;)p=p[c.shift()];return void 0!==p?p:""})}},Kt=At.assign,_o=At.defaults,Cc=At.defaultsDeep,No=At.invokeMap||At.invoke,nf=At.sortedIndexBy||At.sortedIndex,Ri=At.uniqBy||At.uniq,ia=At.clone,xo=At.cloneDeep,qa=At.isEmpty,Ws=At.isEqual,Jn=At.isFunction,ri=At.isPlainObject,Tn=At.toArray,wc=At.groupBy,Zh=At.flattenDeep,rf=At.without,qh=At.difference,Sc=At.union,Ta=At.has,Gr=At.result,Ys=At.omit,of=At.pick,bo=At.forIn,ep=At.camelCase,tp=At.uniqueId,fi=function(){if(At.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=Jn(n)?n:Xs;return e.push(function(i,o){var s=t(i,o);return void 0!==s?s:Array.isArray(i)&&!Array.isArray(o)?o:void 0}),At.mergeWith.apply(this,e)}return At.merge.apply(this,arguments)},Cr=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},Ki=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},hi=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},Xs=function(){};var e,n,ii=d(71066);function Tc(e){e=Ri(e);const n=Tn(e).reduce(function(t,i){return t[i.id]=i.clone(),t},{});return Tn(e).forEach(function(t){const i=n[t.id];if(i.isLink()){const c=i.source(),p=i.target();c.id&&n[c.id]&&i.prop("source/id",n[c.id].id),p.id&&n[p.id]&&i.prop("target/id",n[p.id].id)}const o=t.get("parent");o&&n[o]&&i.set("parent",n[o].id);const s=Tn(t.get("embeds")).reduce(function(c,p){return n[p]&&c.push(n[p].id),c},[]);qa(s)||i.set("embeds",s)}),n}const Ea={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},rp=Object.keys(Ea).map(e=>Ea[e]).join(""),af="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",ip=/\s/g,sf=new RegExp(`^(${af}\\*)?([${rp}])([-+]{1,2}${af})?$`,"g");function uf(e){throw new Error(`Invalid calc() expression: ${e}`)}function op(e,n){const t=sf.exec(e.replace(ip,""));t||uf(e),sf.lastIndex=0;const[,i=1,o,s=0]=t,{x:c,y:p,width:v,height:C}=n;let M=0;switch(o){case Ea.width:M=v;break;case Ea.height:M=C;break;case Ea.x:M=c;break;case Ea.y:M=p;break;case Ea.minimum:M=Math.min(C,v);break;case Ea.maximum:M=Math.max(C,v);break;case Ea.diagonal:M=Math.sqrt(C*C+v*v)}return parseFloat(i)*M+function ap(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)}function Sl(e){return"string"==typeof e&&e.includes("calc")}const Ru="calc(".length;function Ec(e,n){let t=e,i=0;for(;;){let o=t.indexOf("calc(",i);if(-1===o)return t;let s=o+Ru,c=1;e:for(;;){switch(t[s]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:uf(t)}s++}let p=t.slice(o+Ru,s);Sl(p)&&(p=Ec(p,n));const v=String(op(p,n));t=t.slice(0,o)+v+t.slice(s+1),i=o+v.length}}function es(e,n){return function(t,i){var o=ni(t);t=parseFloat(t),o&&(t/=100);var s={};if(isFinite(t)){var c=o||t>=0&&t<=1?t*i[n]:Math.max(t+i[n],0);s[e]=c}return s}}function Tl(e,n,t){return function(i,o){var c,s=ni(i);if(i=parseFloat(i),s&&(i/=100),isFinite(i)){var p=o[t]();c=s||i>0&&i<1?p[e]+o[n]*i:p[e]+i}var v=ye();return v[e]=c||0,v}}function cf(e,n,t){return function(i,o){var s;s="middle"===i?o[n]/2:i===t?o[n]:isFinite(i)?i>-1&&i<1?-o[n]*i:-i:ni(i)?o[n]*parseFloat(i)/100:0;var c=ye();return c[e]=-(o[e]+s),c}}function df(e,n){var t="joint-shape",i=n&&n.resetOffset;return function(o,s,c){var p=qn(c),v=p.data(t);if(!v||v.value!==o){var C=e(o);v={value:o,shape:C,shapeBBox:C.bbox()},p.data(t,v)}var M=v.shape.clone(),x=v.shapeBBox.clone(),U=x.origin(),ne=s.origin();x.x=ne.x,x.y=ne.y;var oe=s.maxRectScaleToFit(x,ne);return M.scale(0===x.width||0===s.width?1:oe.sx,0===x.height||0===s.height?1:oe.sy,U),i&&M.translate(-U.x,-U.y),M}}function ff(e){var t=df(function n(i){return new Lt(et.normalizePathData(i))},e);return function(i,o,s){return{d:t(i,o,s).serialize()}}}function hf(e){var n=df(rr,e);return function(t,i,o){return{points:n(t,i,o).serialize()}}}function El(e,n){var t=new ye(1,0);return function(i){var o,s,c=this[e](i);return c?(s=n.rotate?c.vector().vectorAngle(t):0,o=c.start):(o=this.path.start,s=0),0===s?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+s+")"}}}function pf(e){return function(t,i,o){const s=et(o);s.attr(e)!==t&&s.attr(e,t)}}function Ks(e,n,t){return void 0!==t.text}function Nu(){return this.model.isLink()}function Ic(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var i=e.strokeOpacity;return void 0===i&&(i=e["stroke-opacity"]),void 0===i&&(i=e.opacity),void 0!==i&&(n["stroke-opacity"]=i,n["fill-opacity"]=i),n}function gf(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const xn={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:pf("href")},xlinkHref:{set:pf("xlink:href")},filter:{qualify:ri,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:ri,set:gf},stroke:{qualify:ri,set:gf},sourceMarker:{qualify:ri,set:function(e,n,t,i){return e=Kt(Ic(i),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:ri,set:function(e,n,t,i){return e=Kt(Ic(i),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:ri,set:function(e,n,t,i){return e=Kt(Ic(i),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!ri(t.textWrap)},set:function(e,n,t,i){var o=qn(t),s="joint-text",c=o.data(s),p=of(i,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:v}=p;Sl(v)&&(p.x=Ec(v,n));var C=p.fontSize=i["font-size"]||i.fontSize,M=JSON.stringify([e,p]);if(void 0===c||c!==M){C&&t.setAttribute("font-size",C);var x=p.textPath;if(Cr(x)){var U=x.selector;if("string"==typeof U){var ne=this.findBySelector(U)[0];ne instanceof SVGPathElement&&(p.textPath=Kt({"xlink:href":"#"+ne.id},x))}}et(t).text(""+e,p),o.data(s,M)}}},textWrap:{qualify:ri,set:function(e,n,t,i){var o=e.width||0,s={};s.width=ni(o)?n.width*parseFloat(o)/100:o<=0?n.width+o:o;var c=e.height||0;s.height=ni(c)?n.height*parseFloat(c)/100:c<=0?n.height+c:c;var p,v=e.text;void 0===v&&(v=i.text),p=void 0!==v?function(e,n,t={},i={}){var o=n.width,s=n.height,c=i.svgDocument||et("svg").node,p=et("tspan").node,v=et("text").attr(t).append(p).node,C=document.createTextNode("");v.style.opacity=0,v.style.display="block",p.style.display="block",p.appendChild(C),c.appendChild(v),i.svgDocument||document.body.appendChild(c);var M=i.separator||" ",x=i.eol||"\n",U=i.hyphen?new RegExp(i.hyphen):/[^\w\d]/,ne=i.maxLineCount;Ki(ne)||(ne=1/0);for(var je,Ve,L,oe=e.split(M),Te=[],Ie=[],z=0,Q=0,ie=oe.length;z<ie;z++){var ve=oe[z];if(ve){var Pe=!1;if(x&&ve.indexOf(x)>=0){if(ve.length>1){for(var Re=ve.split(x),We=0,pt=Re.length-1;We<pt;We++)Re.splice(2*We+1,0,x);oe.splice(z,1,...Re.filter(Yt=>""!==Yt)),z--,ie=oe.length;continue}Ie[++Q]="",Pe=!0}if(!Pe)if(C.data=Ie[Q]?Ie[Q]+" "+ve:ve,p.getComputedTextLength()<=o)Ie[Q]=C.data,(je||Ve)&&(Te[Q++]=!0,je=0,Ve=0);else{if(!Ie[Q]||je){var st=!!je;if(je=ve.length-1,st||!je){if(!je){if(!Ie[Q]){Ie=[];break}oe.splice(z,2,ve+oe[z+1]),ie--,Te[Q++]=!0,z--;continue}oe[z]=ve.substring(0,je),oe[z+1]=ve.substring(je)+(void 0===oe[z+1]?"":oe[z+1])}else{if(Ve)oe.splice(z,2,oe[z]+oe[z+1]),Ve=0;else{var vt=ve.search(U);vt>-1&&vt!==ve.length-1&&0!==vt&&(Ve=vt+1,je=0),oe.splice(z,1,ve.substring(0,Ve||je),ve.substring(Ve||je)),ie++}Q&&!Te[Q-1]&&Q--}z--;continue}Q++,z--}var Tt=null;if(Ie.length>ne)Tt=ne-1;else if(void 0!==s){var Et;void 0===L&&(L=(Et="auto"===t.lineHeight?{value:1.5,unit:"em"}:$h(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===Et.unit&&(L*=v.getBBox().height)),L*Ie.length>s&&(Tt=Math.floor(s/L)-1)}if(null!==Tt){Ie.splice(Tt+1);var Ft=i.ellipsis;if(!Ft||Tt<0)break;"string"!=typeof Ft&&(Ft="\u2026");var er=Ie[Tt];if(!er&&!Pe)break;var ar,zt,Gn=er.length;do{if(zt=er[Gn],ar=er.substring(0,Gn),zt?zt.match(M)&&(ar+=zt):ar+="string"==typeof M?M:" ",C.data=ar+=Ft,p.getComputedTextLength()<=o){Ie[Tt]=ar;break}Gn--}while(Gn>=0);break}}}return i.svgDocument?c.removeChild(v):document.body.removeChild(c),Ie.join(x)}(""+v,s,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight,"letter-spacing":"letter-spacing"in i?i["letter-spacing"]:i.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",xn.text.set.call(this,p,n,t,i)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var i=qn(t),o="joint-title",s=i.data(o);if(void 0===s||s!==e){i.data(o,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var p=document.createElementNS(t.namespaceURI,"title");p.textContent=e,t.insertBefore(p,c)}}}},lineHeight:{qualify:Ks},textVerticalAnchor:{qualify:Ks},textPath:{qualify:Ks},annotations:{qualify:Ks},eol:{qualify:Ks},displayEmpty:{qualify:Ks},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:ri,set:function(e,n,t){qn(t).css(e)}},html:{set:function(e,n,t){qn(t).html(e+"")}},ref:{},refX:{position:Tl("x","width","origin")},refY:{position:Tl("y","height","origin")},refDx:{position:Tl("x","width","corner")},refDy:{position:Tl("y","height","corner")},refWidth:{set:es("width","width")},refHeight:{set:es("height","height")},refRx:{set:es("rx","width")},refRy:{set:es("ry","height")},refRInscribed:{set:function(e){var n=es("r","width"),t=es("r","height");return function(i,o){return(o.height>o.width?n:t)(i,o)}}()},refRCircumscribed:{set:function(e,n){var t=ni(e);e=parseFloat(e),t&&(e/=100);var o,i=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(o=t||e>=0&&e<=1?e*i:Math.max(e+i,0)),{r:o}}},refCx:{set:es("cx","width")},refCy:{set:es("cy","height")},xAlignment:{offset:cf("x","width","right")},yAlignment:{offset:cf("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:ff({resetOffset:!0})},refDKeepOffset:{set:ff({resetOffset:!1})},refPointsResetOffset:{set:hf({resetOffset:!0})},refPointsKeepOffset:{set:hf({resetOffset:!1})},connection:{qualify:Nu,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const i=this.getConnection(),o=i.divideAtLength(t),s=i.divideAtLength(-t);o&&s&&(n=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Nu,set:El("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Nu,set:El("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Nu,set:El("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Nu,set:El("getTangentAtRatio",{rotate:!1})}};xn["xlink:href"]=xn.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{xn[e]={qualify:Sl,set:function(t,i){return{[e]:Ec(t,i)}}}}),xn.refR=xn.refRInscribed,xn.refD=xn.refDResetOffset,xn.refPoints=xn.refPointsResetOffset,xn.atConnectionLength=xn.atConnectionLengthKeepGradient,xn.atConnectionRatio=xn.atConnectionRatioKeepGradient,xn.refX2=xn.refX,xn.refY2=xn.refY,xn.refWidth2=xn.refWidth,xn.refHeight2=xn.refHeight,xn["ref-x"]=xn.refX,xn["ref-y"]=xn.refY,xn["ref-dy"]=xn.refDy,xn["ref-dx"]=xn.refDx,xn["ref-width"]=xn.refWidth,xn["ref-height"]=xn.refHeight,xn["x-alignment"]=xn.xAlignment,xn["y-alignment"]=xn.yAlignment;const mf=xn,oa=ii.Model.extend({constructor:function(e,n){var t,i=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=tp("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(i=this.parse(i,n)||{}),(t=Gr(this,"defaults"))&&(i=fi({},t,i)),this.set(i,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=Gr(this.constructor.prototype,"defaults").attrs||{},i={};bo(this.attributes.attrs,function(s,c){const p=n[c];bo(s,function(v,C){Cr(v)&&!Array.isArray(v)?bo(v,function(M,x){(!p||!p[C]||!Ws(p[C][x],M))&&(i[c]=i[c]||{},(i[c][C]||(i[c][C]={}))[x]=M)}):(!p||!Ws(p[C],v))&&(i[c]=i[c]||{},i[c][C]=v)})});const o=xo(Ys(this.attributes,"attrs"));return o.attrs=i,o},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};bo(this.get("attrs"),function(s,c){s&&s.port&&(void 0!==s.port.id?n[s.port.id]=s.port:n[s.port]={id:s.port})});var t={};bo(e,function(s,c){n[c]||(t[c]=!0)}),this.graph&&!qa(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(s){t[s.get("target").port]&&s.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(s){t[s.get("source").port]&&s.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const i=this.getParentCell();i&&i.unembed(this,e);const o=this.getEmbeddedCells();for(let s=0,c=o.length;s<c;s++){const p=o[s];p&&p.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var i,t=n.maxZIndex();e.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):i=[this],t=t-i.length+1;var o=n.get("cells"),s=o.indexOf(this)!==o.length-i.length;s||(s=i.some(function(c,p){return c.get("z")!==t+p})),s&&(this.startBatch("to-front"),t+=i.length,i.forEach(function(c,p){c.set("z",t+p,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var i,t=n.minZIndex();e.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):i=[this];var s=0!==n.get("cells").indexOf(this);s||(s=i.some(function(c,p){return c.get("z")!==t+p})),s&&(this.startBatch("to-back"),t-=i.length,i.forEach(function(c,p){c.set("z",t+p,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const i=Kt([],this.get("embeds"));e.forEach(o=>{i[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,n)}),this.set("embeds",Ri(i),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(i=>i.unset("parent",n)),this.set("embeds",rf(this.get("embeds"),...e.map(i=>i.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var i=t.shift();n.push(i),t.push.apply(t,i.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(o){n.push.apply(n,o.getEmbeddedCells(e))});else n=Tn(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=hi(e)?e:e.id,i=this.parent();if(n=_o({deep:!0},n),this.graph&&n.deep){for(;i;){if(i===t)return!0;i=this.graph.getCell(i).parent()}return!1}return i===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return Tn(Tc([this].concat(this.getEmbeddedCells({deep:!0}))));var n=ii.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var i="/",o=hi(e);if(o||Array.isArray(e)){if(arguments.length>1){var s,c;o?c=(s=e).split("/"):(s=e.join(i),c=e.slice());var p=c[0],v=c.length;if((t=t||{}).propertyPath=s,t.propertyValue=n,t.propertyPathArray=c,1===v)return this.set(p,n,t);for(var C={},M=C,x=p,U=1;U<v;U++){var ne=c[U],oe=Number.isFinite(o?Number(ne):ne);M=M[x]=oe?[]:{},x=ne}C=Qd(C,c,n,"/");var Te=fi({},this.attributes);t.rewrite&&Cl(Te,s,"/");var Ie=fi(Te,C);return this.set(p,Ie[p],t)}return Gs(this.attributes,e,i)}return this.set(fi({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),i=t[0];if("attrs"===i&&(n.dirty=!0),1===t.length)return this.unset(e,n);var o=t.slice(1),s=xo(this.get(i));return Cl(s,o,"/"),this.set(i,s,n)},attr:function(e,n,t){var i=Array.from(arguments);return 0===i.length?this.get("attrs"):(i[0]=Array.isArray(e)?["attrs"].concat(e):hi(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,i))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,i){i=i||"/",t=Kt({duration:100,delay:10,timingFunction:Kh.linear,valueFunction:ef.number},t);var c,s=0,p=function(x){var U,ne,oe;(ne=(x-=s=s||x)/t.duration)<1?this._transitionIds[e]=U=Us(p):(ne=1,delete this._transitionIds[e]),oe=c(t.timingFunction(ne)),t.transitionId=U,this.prop(e,oe,t),U||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:v}=this;let C;return C=setTimeout(x=>{v[e]&&(v[e]=rf(v[e],C),0===v[e].length&&delete v[e]),this.stopPendingTransitions(e,i),c=t.valueFunction(Gs(this.attributes,e,i),n),this._transitionIds[e]=Us(x),this.trigger("transition:start",this,e)},t.delay,p),v[e]||(v[e]=[]),v[e].push(C),C},getTransitions:function(){return Sc(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let i=Object.keys(t);if(e){const o=e.split(n);i=i.filter(s=>Ws(o,s.split(n).slice(0,o.length)))}return i.forEach(o=>{t[o].forEach(c=>clearTimeout(c)),delete t[o]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let i=Object.keys(t);if(e){const o=e.split(n);i=i.filter(s=>Ws(o,s.split(n).slice(0,o.length)))}i.forEach(o=>{wl(t[o]),delete t[o],this.trigger("transition:end",this,o)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,Kt({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,Kt({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new ye(0,0)},getPointFromConnectedLink:function(){return new ye},getBBox:function(){return new bt(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const i=new ye(n,t);return e&&i.rotate(this.getBBox().center(),e),i},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||mf[e]},define:function(e,n,t,i){t=Kt({defaults:Cc({type:e},n,this.prototype.defaults)},t);var o=this.extend(t,i);return"undefined"!=typeof joint&&Ta(joint,"shapes")&&Qd(joint.shapes,e,o,"."),o}}),Ss=oa.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?ia(this.get("source")):e instanceof oa?((i=ia(n)||{}).id=e.id,this.set("source",i,t)):ri(e)?this.set("source",i=e,n):((i=ia(n)||{}).x=e.x,i.y=e.y,this.set("source",i,t));var i},target:function(e,n,t){return void 0===e?ia(this.get("target")):e instanceof oa?((i=ia(n)||{}).id=e.id,this.set("target",i,t)):ri(e)?this.set("target",i=e,n):((i=ia(n)||{}).x=e.x,i.y=e.y,this.set("target",i,t));var i},router:function(e,n,t){if(void 0===e){var i=this.get("router");return i?"object"==typeof i?ia(i):i:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:n},o?n:t)},connector:function(e,n,t){if(void 0===e){var i=this.get("connector");return i?"object"==typeof i?ia(i):i:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:n},o?n:t)},label:function(e,n,t){var i=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=i.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var i=this.labels(),o=i.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),i.splice(e,0,n),this.labels(i,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var i=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=i.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(n);return this.prop(["vertices",e],o,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],i=0;i<e.length;i++){var o=e[i],s=this._normalizeVertex(o);t.push(s)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),o=i.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var s=this._normalizeVertex(n);return i.splice(e,0,s),this.vertices(i,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return ri(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(i){return{x:(i.x||0)+e,y:(i.y||0)+n}},t)},scale:function(e,n,t,i){return this.applyToPoints(function(o){return ye(o).scale(e,n,t).toJSON()},i)},applyToPoints:function(e,n){if(!Jn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:i,target:o}=this.attributes;i.id||(t.source=e(i)),o.id||(t.target=e(o));var s=this.vertices();return s.length>0&&(t.vertices=s.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ye(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ye(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ye),this.getTargetPoint()];return new rr(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),i=this.getTargetElement(),o=this.getParentCell();t&&i&&(n=t===i||t.isEmbeddedIn(i)?i:i.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,i)),o&&(!n||n.id!==o.id)&&o.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,i=n.id,o=t.id;if(!i||!o)return!1;var s=i===o;if(!s&&e.deep&&this.graph){var c=this.getSourceCell(),p=this.getTargetCell();s=c.isEmbeddedIn(p)||p.isEmbeddedIn(c)}return s},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=hi(e)||Ki(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function Pc(e,n,t){var i=e.toJSON();return i.angle=n||0,_o({},t,i)}function Du(e,n,t){return e.map(function(i,o,s){var c=this.pointAt((o+.5)/s.length);return(i.dx||i.dy)&&c.offset(i.dx||0,i.dy||0),Pc(c.round(),0,i)},ba(n,t))}function vf(e,n,t,i){var o=n.center(),s=n.width/n.height,c=n.topMiddle(),p=Si.fromRect(n);return e.map(function(v,C,M){var x=t+i(C,M.length),U=c.clone().rotate(o,-x).scale(s,1,o),ne=v.compensateRotation?-p.tangentTheta(U):0;return(v.dx||v.dy)&&U.offset(v.dx||0,v.dy||0),v.dr&&U.move(o,v.dr),Pc(U.round(),ne,v)})}function Mc(e,n){var t=n.x;hi(t)&&(t=parseFloat(t)/100*e.width);var i=n.y;return hi(i)&&(i=parseFloat(i)/100*e.height),Iu(t||0,i||0)}const sp=function(e,n,t){return e.map(Mc.bind(null,n))},Il=function(e,n,t){return t.fn(e,n,t)},up=function(e,n,t){return Du(e,Mc(n,t.start||n.origin()),Mc(n,t.end||n.corner()))},lp=function(e,n,t){return Du(e,n.origin(),n.bottomLeft())},cp=function(e,n,t){return Du(e,n.topRight(),n.corner())},dp=function(e,n,t){return Du(e,n.origin(),n.topRight())},fp=function(e,n,t){return Du(e,n.bottomLeft(),n.corner())},hp=function(e,n,t){var o=t.step||360/e.length;return vf(e,n,t.startAngle||0,function(s){return s*o})},pp=function(e,n,t){var o=t.step||20;return vf(e,n,t.startAngle||0,function(s,c){return(s+.5-c/2)*o})};function ts(e,n){return Cc({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function yf(e,n,t,i){i=_o({},i,{offset:15});var c,p,v,C,o=n.center().theta(e),s=_f(n),M=i.offset,x=0;o<s[1]||o>s[2]?(v=".3em",c=M,p=0,C="start"):o<s[0]?(v="0",c=0,p=-M,t?(x=-90,C="start"):C="middle"):o<s[3]?(v=".3em",c=-M,p=0,C="end"):(v=".6em",c=0,p=M,t?(x=90,C="start"):C="middle");var U=Math.round;return ts({x:U(c),y:U(p),angle:x,attrs:{".":{y:v,"text-anchor":C}}})}function _f(e){var n=e.center(),t=n.theta(e.origin()),i=n.theta(e.bottomLeft()),o=n.theta(e.corner());return[t,n.theta(e.topRight()),o,i]}function xf(e,n,t,i){var s,c,p,v,o=n.center().theta(e),C=(i=_o({},i,{offset:15})).offset,M=0,x=_f(n);o<x[1]||o>x[2]?(p=".3em",s=-C,c=0,v="end"):o<x[0]?(p=".6em",s=0,c=C,t?(M=90,v="start"):v="middle"):o<x[3]?(p=".3em",s=C,c=0,v="start"):(p="0em",s=0,c=-C,t?(M=-90,v="start"):v="middle");var U=Math.round;return ts({x:U(s),y:U(c),angle:M,attrs:{".":{y:p,"text-anchor":v}}})}function Fu(e,n,t){t=_o({},t,{offset:20});var v,i=Iu(0,0),o=-e.theta(i),s=o,c=e.clone().move(i,t.offset).difference(e).round(),p=".3em";(o+90)%180==0?(v=n?"end":"middle",!n&&-270===o&&(p="0em")):o>-270&&o<-90?(v="start",s=o-180):v="end";var C=Math.round;return ts({x:C(c.x),y:C(c.y),angle:n?s:0,attrs:{".":{y:p,"text-anchor":v}}})}const gp=function(e,n,t){return ts(t,n)},bf=function(e,n,t){return ts(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Cf=function(e,n,t){return ts(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Ac=function(e,n,t){return ts(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},wf=function(e,n,t){return ts(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Sf=function(e,n,t){return yf(e,n,!0,t)},Tf=function(e,n,t){return yf(e,n,!1,t)},Ef=function(e,n,t){return xf(e,n,!0,t)},mp=function(e,n,t){return xf(e,n,!1,t)},vp=function(e,n,t){return Fu(e.difference(n.center()),!1,t)},yp=function(e,n,t){return Fu(e.difference(n.center()),!0,t)};var Bu=function(e){var n=xo(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=T,this._init(n)};Bu.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),i=this.getPortsByGroup(e),o=t.position||{},s=o.name,c=this.portLayoutNamespace;c[s]||(s="left");var p=o.args||{},v=i.map(function(x){return x&&x.position&&x.position.args}),C=c[s](v,n,p),M={ports:i,result:[]};return Tn(C).reduce(function(x,U,ne){var oe=x.ports[ne];return x.result.push({portId:oe.id,portTransformation:U,labelTransformation:this._getPortLabelLayout(oe,ye(U),n),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),x}.bind(this),M),M.result},_getPortLabelLayout:function(e,n,t){var i=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return i[o]?i[o](n,t,e.label.position.args):null},_init:function(e){if(Cr(e.groups))for(var n=Object.keys(e.groups),t=0,i=n.length;t<i;t++){var o=n[t];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var s=Tn(e.items),c=0,p=s.length;c<p;c++)this.ports.push(this._evaluatePort(s[c]))},_evaluateGroup:function(e){return fi(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=Kt({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=fi({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=fi({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=Kt({},t.size,n.size),n},_getZIndex:function(e,n){return Ki(n.z)?n.z:Ki(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return fi({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var i,t={};Jn(e)?(i="fn",t.fn=e):hi(e)?i=e:void 0===e?i=n?"left":null:Array.isArray(e)?(i="absolute",t.x=e[0],t.y=e[1]):Cr(e)&&(i=e.name,Kt(t,e.args));var o={args:t};return i&&(o.name=i),o},_getLabel:function(e,n){var t=e.label||{},i=t;return i.position=this._getPosition(t.position,n),i}};const Pl={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};Tn(e.items).forEach(function(p){n[p.id]=!0});var t=this.previous("ports")||{},i={};Tn(t.items).forEach(function(p){n[p.id]||(i[p.id]=!0)});var o=this.graph;o&&!qa(i)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(p){i[p.get("target").port]&&p.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(p){i[p.get("source").port]&&p.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return xo(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=Tn(this.prop(["ports","items"])).filter(t=>t.group===e);return xo(n)},getPort:function(e){return xo(Tn(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,bt(this.size())).reduce(function(t,i){var o=i.portTransformation;return t[i.portId]={x:o.x,y:o.y,angle:o.angle},t},{})},getPortIndex:function(e){var n=Cr(e)?e.id:e;return this._isValidPortId(n)?Tn(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!Cr(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=Kt([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const i="number"==typeof e?e:this.getPortIndex(e);if(!Cr(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const o=Kt([],this.prop("ports/items"));return o.splice(i,0,n),this.prop("ports/items",o,t),this},portProp:function(e,n,t,i){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?s[0]=["ports","items",o].concat(n):hi(n)?s[0]=["ports/items/",o,"/",n].join(""):(s=["ports/items/"+o],ri(n)&&(s.push(n),s.push(t))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=Tn((e=e||{}).items);return t.forEach(function(i){"object"!=typeof i&&n.push("Element: invalid port ",i),this._isValidPortId(i.id)||(i.id=this.generatePortId())},this),Ri(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!Cr(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",Kt([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},i=this.getPortIndex(e);if(-1!==i){const o=Kt([],this.prop(["ports","items"]));o.splice(i,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,i;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;i=Kt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(c){const p=Cr(c)?c.id:c;return s.id===p})})}else t=e||{},i=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],i,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new Bu(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var i=t.filter(function(s){if(!n.find(function(c){return c.id===s.id}))return s}),o=n.filter(function(s){if(!t.find(function(c){return c.id===s.id}))return s});o.length>0&&this.trigger("ports:remove",this,o),i.length>0&&this.trigger("ports:add",this,i)}}},_p={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,i=n.node.childNodes.length;t<i;t++)e.push(n.node.childNodes[t]);var o=wc(this.model._portSettingsData.getPorts(),"z"),s="auto";Tn(o[s]).forEach(function(M){var x=this._getPortElement(M);n.append(x),e.push(x)},this);for(var c=Object.keys(o),p=0;p<c.length;p++){var v=c[p];if(v!==s){var C=parseInt(v,10);this._appendPorts(o[v],C,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var i=this._getContainerElement(),o=Tn(e).map(this._getPortElement,this);t[n]||n<0?et(t[Math.max(n,0)]).before(o):i.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const i=t.portContentElement.node,o=t.portContentSelectors,[s=null]=this.findBySelector(n,i,o);return s},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){No(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,i,o;var s=et(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var p=this.parseDOMJSON(c,s.node),v=p.fragment;n=v.childNodes.length>1?et("g").append(v):et(v.firstChild),o=p.selectors}else n=et(c),Array.isArray(n)&&(n=et("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const C=this._getPortLabelMarkup(e.label);if(Array.isArray(C)){const{fragment:U,selectors:ne}=this.parseDOMJSON(C,s.node),oe=U.childNodes.length;oe>0&&(i=ne,t=1===oe?et(U.firstChild):et("g").append(U))}else t=et(C),Array.isArray(t)&&(t=et("g").append(t));var M;if(o&&i){for(var x in i)if(o[x]&&x!==this.selector)throw new Error("ElementView: selectors within port must be unique.");M=Kt({},o,i)}else M=o||i;return s.append(n.addClass("joint-port-body")),t&&s.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:t,portSelectors:M,portLabelSelectors:i,portContentElement:n,portContentSelectors:o},s},_updatePortGroup:function(e){for(var n=bt(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),i=0,o=t.length;i<o;i++){var s=t[i],p=this._portElementsCache[s.portId]||{},v=s.portTransformation;this.applyPortTransform(p.portElement,v),this.updateDOMSubtreeAttributes(p.portElement.node,s.portAttrs,{rootBBox:new bt(s.portSize),selectors:p.portSelectors});var C=s.labelTransformation;C&&p.portLabelElement&&(this.applyPortTransform(p.portLabelElement,C,-v.angle||0),this.updateDOMSubtreeAttributes(p.portLabelElement.node,C.attrs,{rootBBox:new bt(s.labelSize),selectors:p.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var i=et.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(i,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ni=oa.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),oa.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const i=Ki(n);t=(i?t:e)||{};const{parentRelative:o,deep:s,restrictedArea:c}=t;let p;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const v=this.getParentCell();v&&!v.isLink()&&(p=v.get("position"))}if(i){if(p&&(e+=p.x,n+=p.y),s||c){const{x:v,y:C}=this.get("position");this.translate(e-v,n-C,t)}else this.set("position",{x:e,y:n},t);return this}{const v=ye(this.get("position"));return o?v.difference(p):v}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var i=this.get("position")||{x:0,y:0},o=t.restrictedArea;if(o&&t.translateBy===this.id)if("function"==typeof o){var s=o.call(this,i.x+e,i.y+n,t);e=s.x-i.x,n=s.y-i.y}else{var c=this.getBBox({deep:!0}),p=i.x-c.x,v=i.y-c.y,C=Math.max(o.x+p,Math.min(o.x+o.width+p-c.width,i.x+e)),M=Math.max(o.y+v,Math.min(o.y+o.height+v-c.height,i.y+n));e=C-i.x,n=M-i.y}var x={x:i.x+e,y:i.y+n};return t.tx=e,t.ty=n,t.transition?(Cr(t.transition)||(t.transition={}),this.transition("position",x,Kt({},t.transition,{valueFunction:ef.object})),No(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",x,t),No(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var i=this.get("size");return void 0===e?{width:i.width,height:i.height}:(Cr(e)&&(t=n,n=Ki(e.height)?e.height:i.height,e=Ki(e.width)?e.width:i.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var i=this.get("size");switch(t.direction){case"left":case"right":n=i.height;break;case"top":case"bottom":e=i.width}var c,o=Jo(this.get("angle")||0),s=this.getBBox();if(o){var p={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(p+=Math.floor((o+45)/90),p%=4);var v=s[["bottomLeft","corner","topRight","origin"][p]](),C=ye(v).rotate(s.center(),-o),M=Math.sqrt(e*e+n*n)/2,x=p*Math.PI/2;x+=Math.atan(p%2==0?n/e:e/n),x-=Li(o);var U=ye.fromPolar(M,x,C);c=ye(U).offset(e/-2,n/-2)}else switch(c=s.topLeft(),t.direction){case"top":case"top-right":c.offset(0,s.height-n);break;case"left":case"bottom-left":c.offset(s.width-e,0);break;case"top-left":c.offset(s.width-e,s.height-n)}this.set("size",{width:e,height:n},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,i){var o=this.getBBox().scale(e,n,t);return this.startBatch("scale",i),this.position(o.x,o.y,i),this.resize(o.width,o.height,i),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(x=>x.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&No(t,"fitEmbeds",e);const{left:i,right:o,top:s,bottom:c}=$s(e.padding);let{x:p,y:v,width:C,height:M}=n.getCellsBBox(t);return p-=i,v-=s,C+=i+o,M+=c+s,this.set({position:{x:p,y:v},size:{width:C,height:M}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,i){if(t){var o=this.getBBox().center(),s=this.get("size"),c=this.get("position");o.rotate(t,this.get("angle")-e);var p=o.x-s.width/2-c.x,v=o.y-s.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(c.x+p,c.y+v,i),this.rotate(e,n,null,i),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,i);return this},angle:function(){return Jo(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:i,rotate:o}=e;if(i&&n){const x=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return x.push(this),n.getCellsBBox(x,e)}const{angle:s=0,position:{x:c,y:p},size:{width:v,height:C}}=t,M=new bt(c,p,v,C);return o&&M.rotateAroundCenter(s),M},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),i=t.center(),o=e.get(n);if(!o)return i;var s=o.port;if(!s||!this.hasPort(s))return i;var c=this.portProp(s,["group"]),p=this.getPortsPositions(c),v=new ye(p[s]).offset(t.origin()),C=this.angle();return C&&v.rotate(i,-C),v}});Kt(Ni.prototype,Pl);const Ml={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,i=t>0&&n[0]||[],o=t>1&&n[t-1]||{};return Array.isArray(i)||(o instanceof oa?i=n:i instanceof oa&&(n.length>1&&n.pop(),i=n)),o instanceof oa&&(o={}),e.call(this,i,o)}}},xp=ii.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&Ta(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,s=new("link"===e.type?Ss:Gs(t.cellNamespace,e.type,".")||Ni)(e,n);return n.dry||(s.graph=t.graph),s},comparator:function(e){return e.get("z")||0}}),Ia=ii.Model.extend({initialize:function(e,n){var t=new xp([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});ii.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=ii.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var i;return"object"==typeof e?(i=e,t=n):(i={})[e]=n,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,t),i=Ys(i,"cells")),ii.Model.prototype.set.call(this,i,t)},clear:function(e){e=Kt({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(i){return i.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof ii.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!hi(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof ii.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=Zh(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=Tn(e).map(function(i){return this._prepareCell(i,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),No(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,i=n.inbound,o=n.outbound;void 0===i&&void 0===o&&(i=o=!0);var s=[],c={};function p(x,U){if(bo(x.getOutboundEdges(U.id),function(oe,Te){if(!c[Te]){var Ie=x.getCell(Te);s.push(Ie),c[Te]=!0,t&&(i&&v(x,Ie),o&&p(x,Ie))}}.bind(x)),t&&U.isLink()){var ne=U.getTargetCell();ne&&ne.isLink()&&(c[ne.id]||(s.push(ne),p(x,ne)))}}function v(x,U){if(bo(x.getInboundEdges(U.id),function(oe,Te){if(!c[Te]){var Ie=x.getCell(Te);s.push(Ie),c[Te]=!0,t&&(i&&v(x,Ie),o&&p(x,Ie))}}.bind(x)),t&&U.isLink()){var ne=U.getSourceCell();ne&&ne.isLink()&&(c[ne.id]||(s.push(ne),v(x,ne)))}}if(o&&p(this,e),i&&v(this,e),n.deep){var C=e.getEmbeddedCells({deep:!0}),M={};C.forEach(function(x){x.isElement()&&(M[x.id]=!0)}),C.forEach(function(x){x.isLink()||(o&&bo(this.getOutboundEdges(x.id),function(U,ne){if(!c[ne]){var oe=this.getCell(ne),{source:Te,target:Ie}=oe.attributes,je=Te.id,Ve=Ie.id;if(!n.includeEnclosed&&je&&M[je]&&Ve&&M[Ve])return;s.push(this.getCell(ne)),c[ne]=!0}}.bind(this)),i&&bo(this.getInboundEdges(x.id),function(U,ne){if(!c[ne]){var oe=this.getCell(ne),{source:Te,target:Ie}=oe.attributes,je=Te.id,Ve=Ie.id;if(!n.includeEnclosed&&je&&M[je]&&Ve&&M[Ve])return;s.push(this.getCell(ne)),c[ne]=!0}}.bind(this)))},this)}return s},getNeighbors:function(e,n){n||(n={});var t=n.inbound,i=n.outbound;void 0===t&&void 0===i&&(t=i=!0);var o=this.getConnectedLinks(e,n).reduce(function(p,v){var{source:C,target:M}=v.attributes,x=v.hasLoop(n);if(t&&Ta(C,"id")&&!p[C.id]){var U=this.getCell(C.id);U.isElement()&&(x||U&&U!==e&&(!n.deep||!U.isEmbeddedIn(e)))&&(p[C.id]=U)}if(i&&Ta(M,"id")&&!p[M.id]){var ne=this.getCell(M.id);ne.isElement()&&(x||ne&&ne!==e&&(!n.deep||!ne.isEmbeddedIn(e)))&&(p[M.id]=ne)}return p}.bind(this),{});if(e.isLink()){if(t){var s=e.getSourceCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}if(i){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return Tn(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var i=[],o=t.get("parent");o;)i.push(o),o=this.getCell(o).get("parent");return i},this);e=e.sort(function(t,i){return t.length-i.length});var n=Tn(e.shift()).find(function(t){return e.every(function(i){return i.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(i){i!==e&&t.push(i)},Kt({},n=n||{},{outbound:!0})),t},cloneCells:Tc,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],i={},o=[],s=[];return Tn(e).forEach(function(c){i[c.id]||(t.push(c),i[c.id]=c,c.isLink()?s.push(c):o.push(c)),n.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(v){i[v.id]||(t.push(v),i[v.id]=v,v.isLink()?s.push(v):o.push(v))})}),s.forEach(function(c){var{source:p,target:v}=c.attributes;if(p.id&&!i[p.id]){var C=this.getCell(p.id);t.push(C),i[C.id]=C,o.push(C)}if(v.id&&!i[v.id]){var M=this.getCell(v.id);t.push(this.getCell(v.id)),i[M.id]=M,o.push(M)}},this),o.forEach(function(c){this.getConnectedLinks(c,n).forEach(function(v){var{source:C,target:M}=v.attributes;!i[v.id]&&C.id&&i[C.id]&&M.id&&i[M.id]&&(t.push(v),i[v.id]=v)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(i){i!==e&&t.push(i)},Kt({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const i={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){var c=s.shift();if(i[c.id]||(i[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const p=this.getNeighbors(c,t);for(let v=0,C=p.length;v<C;v++){const M=p[v];o[M.id]=o[c.id]+1,s.push(M)}}},dfs:function(e,n,t={}){const i={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){const c=s.pop();if(i[c.id]||(i[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const p=this.getNeighbors(c,t),v=s.length;for(let C=0,M=p.length;C<M;C++){const x=p[C];o[x.id]=o[c.id]+1,s.splice(v,0,x)}}},getSources:function(){var e=[];return bo(this._nodes,function(n,t){(!this._in[t]||qa(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return bo(this._nodes,function(n,t){(!this._out[t]||qa(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||qa(this._in[e.id])},isSink:function(e){return!this._out[e.id]||qa(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(i){if(i===n&&i!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(i){if(i===n&&i!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var i=(t=t||{}).inbound,o=t.outbound;void 0===i&&void 0===o&&(i=o=!0);var s=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:p,target:v}=c.attributes;if(i&&Ta(p,"id")&&p.id===n.id||o&&Ta(v,"id")&&v.id===n.id)return s=!0,!1}),s},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){No(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new bt(e),{strict:i=!1}=n,o=i?"containsRect":"intersect";return this.getElements().filter(s=>t[o](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,i=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(i):this.findModelsFromPoint(i[t]())).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return Tn(e).reduce(function(i,o){const s=o.getBBox({rotate:t});return s?i?i.union(s):s:i},null)},translate:function(e,n,t){var i=this.getCells().filter(function(o){return!o.isEmbedded()});return No(i,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,i){var o=this.getCellsBBox(t);if(o){var s=Math.max(e/o.width,0),c=Math.max(n/o.height,0);No(t,"scale",s,c,o.origin(),i)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Kt({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Kt({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(i=>n[i]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:i}=n.attributes;if(t.id&&i.id){var o=n.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(p){var{source:v,target:C}=p.attributes;return v&&v.id===t.id&&(!v.port||v.port===t.port)&&C&&C.id===i.id&&(!C.port||C.port===i.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:i}=n.attributes;return t.id&&i.id}}});!function(e,n,t){if(hi(t)){if(!Ml[t])throw new Error('Unknown wrapper: "'+t+'"');t=Ml[t]}if(!Jn(t))throw new Error("Wrapper must be a function.");Tn(["resetCells","addCells","removeCells"]).forEach(function(i){e[i]=t(e[i])})}(Ia.prototype,0,Ml.cells);const Vu={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var i=this.getCell(n),o=t.node(n);e.setPosition?e.setPosition(i,o):i.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,n,t){const o=this.getCell(n.name),s=t.edge(n),c=s.points||[],p=new rr(c);if(e.setVertices||e.setLinkVertices)if(Jn(e.setVertices))e.setVertices(o,c);else{p.simplify({threshold:.001});const v=p.points.map(M=>M.toJSON());o.set("vertices",v.slice(1,v.length-1))}if(e.setLabels&&"x"in s&&"y"in s){const v={x:s.x,y:s.y};if(Jn(e.setLabels))e.setLabels(o,v,c);else{const C=p.closestPointLength(v),M=p.pointAtLength(C),x=C/p.length(),U=new ye(v).difference(M).toJSON();o.label(0,{position:{distance:x,offset:U}})}}},layout:function(e,n){var t;t=e instanceof Ia?e:(new Ia).resetCells(e,{dry:!0,sort:!1}),e=null;const i=(n=_o(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===i)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Vu.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(M){return M.id}}),s={},c=n.marginX||0,p=n.marginY||0;if(n.rankDir&&(s.rankdir=n.rankDir),n.align&&(s.align=n.align),n.nodeSep&&(s.nodesep=n.nodeSep),n.edgeSep&&(s.edgesep=n.edgeSep),n.rankSep&&(s.ranksep=n.rankSep),n.ranker&&(s.ranker=n.ranker),c&&(s.marginx=c),p&&(s.marginy=p),o.setGraph(s),i.layout(o,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),Vu.fromGraphLib(o,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var v=o.nodes().filter(function(M){return o.children(M).length>0}).map(t.getCell.bind(t)).sort(function(M,x){return x.getAncestors().length-M.getAncestors().length});No(v,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var C=o.graph();return new bt(c,p,Math.abs(C.width-2*c),Math.abs(C.height-2*p))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||Xs,i=n.importEdge||Xs,o=this instanceof Ia?this:new Ia;return e.nodes().forEach(function(s){t.call(o,s,e,o,n)}),e.edges().forEach(function(s){i.call(o,s,e,o,n)}),o},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var i=of(n,"directed","compound","multigraph"),o=new t.Graph(i),s=n.setNodeLabel||Xs,c=n.setEdgeLabel||Xs,p=n.setEdgeName||Xs,v=e.get("cells"),C=0,M=v.length;C<M;C++){var x=v.at(C);if(x.isLink()){var U=x.get("source"),ne=x.get("target");if(!U.id||!ne.id)break;o.setEdge(U.id,ne.id,c(x),p(x))}else if(o.setNode(x.id,s(x)),o.isCompound()&&x.has("parent")){var oe=x.get("parent");v.has(oe)&&o.setParent(x.id,oe)}}return o}};Ia.prototype.toGraphLib=function(e){return Vu.toGraphLib(this,e)},Ia.prototype.fromGraphLib=function(e,n){return Vu.fromGraphLib.call(this,e,n)};const bp={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(i){t=!1}return this._results[e]=t,t}},Cp=(Ni.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ni.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Ni.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Ni.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Ni.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Ni.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Ni.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ni.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ni.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ni.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ni.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Ni.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=ni(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=ni(e);t&&(e=parseFloat(e)/100);var i=n.x,o=n.y,s=n.width,c=n.height,v=t?c*e:e,C=et.KAPPA,M=C*(s/2),x=C*(t?c*e:e),ne=i+s/2,oe=i+s,Te=o+v,Ie=Te-v,je=o+c-v,Ve=o+c;return{d:["M",i,Te,"L",i,je,"C",i,je+x,ne-M,Ve,ne,Ve,"C",ne+M,Ve,oe,je+x,oe,je,"L",oe,Te,"C",oe,Te-x,ne+M,Ie,ne,Ie,"C",ne-M,Ie,i,Te-x,i,Te,"Z"].join(" ")}}}}});var kr=bp.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Ni.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},kr]},{attributes:{text:{set:function(e,n,t,i){if(!(t instanceof HTMLElement)){var o=i.style||{},s={text:e,width:-5,height:"100%"},c=Kt({textVerticalAnchor:"middle"},o);return mf.textWrap.set.call(this,s,n,t,c),{fill:o.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const ns=Ss.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Ts=(Ss.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Ss.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Qs=ii.View.extend({options:{},theme:null,themeClassNamePrefix:Ro("theme-"),requireSetThemeOverride:!1,defaultTheme:ao.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Kt({},this.options,e),ii.View.call(this,e)},initialize:function(){Ts[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=Gr(this,"children")),e){var n=this.svgElement,i=xl(e,et.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var i=t.getAttribute(e);if(i)return i;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Gr(this,"el"));else{var e=Gr(this,"tagName"),n=Kt({},Gr(this,"attributes")),t=Kt({},Gr(this,"style"));this.id&&(n.id=Gr(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(et.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof ii.$?e:ii.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=et(this.el))},_ensureElClassName:function(){var e=Gr(this,"className");if(e){var n=Ro(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ts[this.cid]=null,ii.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var i=this.getEventNamespace();for(var o in n){var s=n[o];"function"!=typeof s&&(s=this[s]),s&&qn(e).on(o+i,t,s.bind(this))}return this},undelegateElementEvents:function(e){return qn(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=Gr(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,i="__"+this.cid+"__";return void 0===n?t&&t[i]||{}:(t||(t=e.data={}),t[i]||(t[i]={}),Kt(t[i],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&Kt({},e[0])||{},t=e[1]&&Kt({},e[1])||{},i=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof i&&i.apply(this,arguments),this.render.__render__===i&&this.onRender(),this},n.render.__render__=i,ii.View.extend.call(this,n,t)}});if(qn.event&&!("dbltap"in qn.event.special)){const e=ao.doubleTapInterval,n=30;qn.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...i){const{handleObj:o,target:s}=t,c=qn.data(s),p=(new Date).getTime(),v="lastTouch"in c?p-c.lastTouch:0;v<e&&v>n?(c.lastTouch=null,t.type=o.origType,o.handler.call(this,t,...i)):c.lastTouch=p}}}function Hu(e){return e?Array.isArray(e)?e:[e]:[]}const rs=Qs.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(ri(n)){const i=e.model.isLink(),{label:o=null,port:s,selector:c}=n;i&&null!==o?t=e.findLabelNode(o,c):!i&&s?t=e.findPortNode(s,c):[t]=e.findBySelector(c)}else n&&(t=et.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:i,transformGroup:o}=this;if(!e||o)return;const{vel:s,paper:c}=n,{layer:p}=i;if(p){const v=this.transformGroup=et("g").addClass("highlight-transform").append(t);c.getLayerView(p).insertSortedNode(v.node,i.z)}else(!t.parentNode||t.nextSibling)&&s.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const i=n.getRootTranslateMatrix(),o=n.getRootRotateMatrix(),s=i.multiply(o);e.attr("transform",et.matrixToTransformString(s))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:i,id:o}=this;if(i)return;const s=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),s?(this.highlight(n,s),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:i}=this;e&&this.unhighlight(n,e),this.unmount(),i._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const i=this.uniqueId(n,t);this.add(e,n,i,t)},unhighlight:function(e,n,t){const i=this.uniqueId(n,t);this.remove(e,i)},get(e,n=null){const{cid:t}=e,{_views:i}=this,o=i[t];if(null===n){const s=[];if(!o)return s;for(let c in o){const p=o[c];p instanceof this&&s.push(p)}return s}if(!o)return null;if(n in o){const s=o[n];if(s instanceof this)return s}return null},add(e,n,t,i={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const o=rs.get(e,t);o&&o.remove();const s=new this(i);return s.id=t,this._addRef(e,t,s),s.requestUpdate(e,n),s},_addRef(e,n,t){const{cid:i}=e,{_views:o}=this;let s=o[i];s||(s=o[i]={}),s[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:i}=this,o=i[t];if(o){n&&delete o[n];for(let s in o)return;delete i[t]}},remove(e,n=null){Hu(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){Hu(this.get(e,n)).forEach(i=>{(t||i.UPDATABLE)&&i.update()})},transform(e,n=null){Hu(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>et.ensureId(e)+JSON.stringify(n)}),Ji={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},kn=Qs.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,i,o){e.push("type-"+o.slice(0,i+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var i,o,s,e={},n={},t=0,c=Gr(this,"presentationAttributes");for(var p in c)if(c.hasOwnProperty(p)){var v=c[p];for(Array.isArray(v)||(v=[v]),i=0,o=v.length;i<o;i++){var C=e[s=v[i]];C||(C=e[s]=1<<t++),n[p]|=C}}var M=Gr(this,"initFlag");for(Array.isArray(M)||(M=[M]),i=0,o=M.length;i<o;i++)e[s=M[i]]||(e[s]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)t|=n[e[i]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||ws(this),Qs.call(this,e)},initialize:function(){this.setFlags(),Qs.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=xl(e),i=t.selectors,o=t.groupSelectors;for(var s in o){if(i[s])throw new Error("dia.CellView: ambiguous group selector");i[s]=o[s]}if(n){var c=this.selector;if(i[c])throw new Error("dia.CellView: ambiguous root selector.");i[c]=n}return{fragment:t.fragment,selectors:i}},can:function(e){var n=Jn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Cr(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var i=t[e];if(i)return Array.isArray(i)?i:[i]}return ao.useCSSSelectors?qn(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),i=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return et.transformRect(n,i.multiply(o).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),i=this.getRootTranslateMatrix();return et.transformRect(n,i.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return et.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=et.createSVGMatrix(),n=this.model,t=n.angle();if(t){var i=n.getBBox(),o=i.width/2,s=i.height/2;e=e.translate(o,s).rotate(t).translate(-o,-s)}return e},_notifyHighlight:function(e,n,t={}){const{el:i}=this;let o;if([o=i]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=o!==i,void 0===t.type){let s;switch(!0){case t.embedding:s=Ji.EMBEDDING;break;case t.connecting:s=Ji.CONNECTING;break;case t.magnetAvailability:s=Ji.MAGNET_AVAILABILITY;break;case t.elementAvailability:s=Ji.ELEMENT_AVAILABILITY;break;default:s=Ji.DEFAULT}t.type=s}return this.notify(e,o,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const i=t.getAttribute("magnet"),o=t===n;if((i||o)&&"false"!==i)return t;if(o)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[i]=this.findBySelector(t);if(i)return i}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var i=et(e).index()+1;t=e.tagName+":nth-child("+i+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var i=this.paper,o=i.model,s=i.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,n,t,s,"source"),target:{x:n,y:t}}).addTo(o,{async:!1,ui:!0}),s.findView(i)},getLinkEnd:function(e,...n){var t=this.model,i=t.id,o=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),c={id:i};return null!=s&&(c.magnet=s),null!=o?(c.port=o,!t.hasPort(o)&&!s&&(c.selector=this.getSelector(e))):null==s&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...n)},customizeLinkEnd:function(e,n,t,i,o,s){const{paper:c}=this,{connectionStrategy:p}=c.options;if("function"==typeof p){var v=p.call(c,e,this,n,new ye(t,i),o,s,c);if(v)return v}return e},getMagnetFromLinkEnd:function(e){var s,n=this.el,t=e.port,i=e.magnet,o=this.model;return null!=t&&o.isElement()&&o.hasPort(t)?s=this.findPortNode(t,i)||n:(i||(i=e.selector),!i&&null!=t&&(i='[port="'+t+'"]'),s=this.findBySelector(i,n,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,n,t,i){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(n,t,i);o.notifyPointerdown(e,t,i),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,n,t){var i=this.eventData(e),o=i.linkView;if(o)o.pointermove(e,n,t);else{var s=this.paper,c=s.options.magnetThreshold,p=this.getEventTarget(e),v=i.targetMagnet;if("onleave"===c){if(v===p||et(v).contains(p))return}else if(s.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,v,n,t)}},dragLinkEnd:function(e,n,t){var o=this.eventData(e).linkView;!o||(o.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){qa(n)||(e instanceof SVGElement?et(e).attr(n):qn(e).attr(n))},processNodeAttributes:function(e,n){var t,i,o,s,c,p,v,C,M,x=[];for(t in n)!n.hasOwnProperty(t)||(i=n[t],!(o=this.getAttributeDefinition(t))||Jn(o.qualify)&&!o.qualify.call(this,i,e,n)?(p||(p={}),p[Zd(t)]=i):(hi(o.set)&&(p||(p={}),p[o.set]=i),null!==i&&x.push(t,o)));for(s=0,c=x.length;s<c;s+=2)i=n[t=x[s]],Jn((o=x[s+1]).set)&&(v||(v={}),v[t]=i),Jn(o.position)&&(C||(C={}),C[t]=i),Jn(o.offset)&&(M||(M={}),M[t]=i);return{raw:n,normal:p,set:v,position:C,offset:M}},updateRelativeAttributes:function(e,n,t,i){i||(i={});var o,s,p=n.raw||{},v=n.normal||{},C=n.set,M=n.position,x=n.offset;for(o in C){s=C[o];var U=this.getAttributeDefinition(o).set.call(this,s,t.clone(),e,p);Cr(U)?Kt(v,U):void 0!==U&&(v[o]=U)}if(e instanceof HTMLElement)this.setNodeAttributes(e,v);else{var Ie,je,Ve,ne=v.transform,oe=et.transformStringToMatrix(ne),Te=ye(oe.e,oe.f);if(ne&&(v=Ys(v,"transform"),oe.e=oe.f=0),M||x){var L=this.getNodeScale(e,i.scalableNode);Ie=L.sx,je=L.sy}var z=!1;for(o in M)s=M[o],(Ve=this.getAttributeDefinition(o).position.call(this,s,t.clone(),e,p))&&(Te.offset(ye(Ve).scale(Ie,je)),z||(z=!0));this.setNodeAttributes(e,v);var Q=!1;if(x){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var ve=et.transformRect(ie,oe).scale(1/Ie,1/je);for(o in x)s=x[o],(Ve=this.getAttributeDefinition(o).offset.call(this,s,ve,e,p))&&(Te.offset(ye(Ve).scale(Ie,je)),Q||(Q=!0))}}(void 0!==ne||z||Q)&&(Te.round(1),oe.e=Te.x,oe.f=Te.y,e.setAttribute("transform",et.matrixToTransformString(oe)))}},getNodeScale:function(e,n){var t,i;if(n&&n.contains(e)){var o=n.scale();t=1/o.sx,i=1/o.sy}else t=1,i=1;return{sx:t,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=et.ensureId(e),i=n[t];return i||(i=n[t]={}),i},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=et(e).getBBox()),new bt(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=et(e).getTransformToElement(t)}return et.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=et(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,i){var o,s,c,p,v={},C=[];for(var M in e)if(e.hasOwnProperty(M)&&ri(c=e[M])){var x=t[M]=this.findBySelector(M,n,i);for(o=0,s=x.length;o<s;o++){var U=x[o];p=et.ensureId(U);var ne=i&&i[M]===U,oe=v[p];if(oe){oe.array||(C.push(p),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var Te=oe.attributes,Ie=oe.selectedLength;if(ne)Te.unshift(c),Ie.unshift(-1);else{var je=nf(Ie,s);Te.splice(je,0,c),Ie.splice(je,0,s)}}else v[p]={attributes:c,selectedLength:ne?-1:s,node:U,array:!1}}}for(o=0,s=C.length;o<s;o++)(c=v[p=C[o]]).attributes=fi({},...c.attributes.reverse());return v},getEventTarget:function(e,n={}){const{target:t,type:i,clientX:o=0,clientY:s=0}=e;return n.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(o,s):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=bt()),t.selectors||(t.selectors=this.selectors);var p,v,C,M,x,i={},o={},s=[],c=[],U=t.roAttributes,ne=this.findNodesAttributes(U||n,e,i,t.selectors),oe=U?this.findNodesAttributes(n,e,i,t.selectors):ne;for(var Te in ne)if((x=this.processNodeAttributes(v=(M=ne[Te]).node,C=M.attributes)).set||x.position||x.offset){var Ve,Ie=oe[Te]&&oe[Te].attributes,je=Ie&&void 0===C.ref?Ie.ref:C.ref;if(je){if(!(Ve=(i[je]||this.findBySelector(je,e,t.selectors))[0]))throw new Error('dia.CellView: "'+je+'" reference does not exist.')}else Ve=null;if(p={node:v,refNode:Ve,processedAttributes:x,allAttributes:Ie},Ve){var L=c.findIndex(function(vt){return vt.refNode===v});L>-1?c.splice(L,0,p):c.push(p)}else s.push(p)}else this.setNodeAttributes(v,x.normal);s.push(...c);for(var z,Q=0,ie=s.length;Q<ie;Q++){v=(p=s[Q]).node,Ve=p.refNode;var ve=et(t.rotatableNode),Pe=Ve?et.ensureId(Ve):"",Re=!!ve&&!!Ve&&ve.contains(Ve),We=o[Pe];if(!We){var pt=Re?ve:e;We=o[Pe]=Ve?et(Ve).getBBox({target:pt}):t.rootBBox}U?(x=this.processNodeAttributes(v,p.allAttributes),this.mergeProcessedAttributes(x,p.processedAttributes)):x=p.processedAttributes;var st=We;Re&&!ve.contains(v)&&(z||(z=et.transformStringToMatrix(ve.attr("transform"))),st=et.transformRect(We,z)),this.updateRelativeAttributes(v,x,st,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Kt(e.set,n.set),Kt(e.position,n.position),Kt(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){rs.remove(this)},updateHighlighters:function(e=!1){rs.update(this,null,e)},transformHighlighters:function(){rs.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:i}=this,{graph:o}=i;o&&(i.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:i}=this.eventData(e);this.notify("cell:pointerup",e,n,t),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,i){this.notify("cell:mousewheel",e,n,t,i)},onevent:function(e,n,t,i){this.notify(n,e,t,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),i=n.findView(t);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:Ji,addPresentationAttributes:function(e){return fi({},Gr(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return Ri(n.concat(t))})}}),wn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},cr=kn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=kn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){kn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[wn.UPDATE],position:[wn.TRANSLATE,wn.TOOLS],size:[wn.RESIZE,wn.PORTS,wn.TOOLS],angle:[wn.ROTATE,wn.TOOLS],markup:[wn.RENDER],ports:[wn.PORTS]},initFlag:[wn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=ao;this.hasFlag(e,wn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let i=!1;if(this.hasFlag(e,wn.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),i=!0,e=this.removeFlag(e,[wn.RENDER,wn.UPDATE,wn.RESIZE,wn.TRANSLATE,wn.ROTATE,wn.PORTS,wn.TOOLS]);else{let o=!1;this.hasFlag(e,wn.RESIZE)&&(this.resize(n),o=!0,e=this.removeFlag(e,[wn.RESIZE,wn.UPDATE])),this.hasFlag(e,wn.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,wn.UPDATE),o=!0,t&&(e=this.removeFlag(e,wn.PORTS))),this.hasFlag(e,wn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,wn.TRANSLATE),i=!0),this.hasFlag(e,wn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,wn.ROTATE),i=!0),this.hasFlag(e,wn.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,wn.PORTS)),o&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(e,wn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,wn.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=ao;t&&this._removePorts();var i=this.model,o=i.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new bt(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===o?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=et(t[this.rotatableSelector])||null,this.scalableNode=et(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(et(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),ao.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),i=n.size(),o=this.scalableNode,s=!1;o.node.getElementsByTagName("path").length>0&&(s=!0);var c=o.getBBox({recursive:s});o.attr("transform","scale("+i.width/(c.width||1)+","+i.height/(c.height||1)+")");var C=this.rotatableNode,M=C&&C.attr("transform");if(M){C.attr("transform",M+" rotate("+-t+","+i.width/2+","+i.height/2+")");var x=o.getBBox({target:this.paper.cells});n.set("position",{x:x.x,y:x.y},Kt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,i=(e.paper||this.paper).model,o=e.initialZIndices={},s=n.getEmbeddedCells({deep:!0}),c=i.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...s,...c].forEach(C=>o[C.id]=C.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const p=i.getElements().reduce((C,M)=>Math.max(C,M.attributes.z||0),0);c.forEach(C=>{C.attributes.z<=p&&C.set("z",p+1,{ui:!0})}),n.stopBatch("to-front");const v=n.parent();v?(i.getCell(v).unembed(n,{ui:!0}),e.initialParentId=v):e.initialParentId=null},processEmbedding:function(e={},n,t,i){const o=e.model||this.model,s=e.paper||this.paper,c=s.model,{findParentBy:p,frontParentOnly:v,validateEmbedding:C}=s.options;let M;M=Jn(p)?Tn(p.call(c,this,n,t,i)):"pointer"===p?Tn(c.findModelsFromPoint({x:t,y:i})):c.findModelsUnderElement(o,{searchBy:p}),M=M.filter(ne=>ne instanceof oa&&o.id!==ne.id&&!ne.isEmbeddedIn(o)),v&&(M=M.slice(-1));let x=null;const U=e.candidateEmbedView;for(let ne=M.length-1;ne>=0;ne--){const oe=M[ne];if(U&&U.model.id==oe.id){x=U;break}{const Te=oe.findView(s);if(!Jn(C)||C.call(s,this,Te)){x=Te;break}}}x&&x!=U&&(this.clearEmbedding(e),e.candidateEmbedView=x.highlight(x.findProxyNode(null,"container"),{embedding:!0})),!x&&U&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,i=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=i.options,{initialParentId:s}=e;if(s&&"function"==typeof o&&!o.call(i,this))return void this._disallowUnembed(e)}i.model.getConnectedLinks(t,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,i=n||this.model,s=(e.paper||this.paper).model;switch(t){case"remove":i.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:p,initialZIndices:v}=e;if(p){const{x:M,y:x}=p;i.position(M,x,{deep:!0,ui:!0})}v&&Object.keys(v).forEach(M=>{const x=s.getCell(M);x&&x.set("z",v[M],{ui:!0})});const C=s.getCell(c);C&&C.embed(i,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const i=this.findAttribute("port",e);if(i){const o=this.findPortNode(i,t);if(o)return o}else{const[o]=this.findBySelector(t);if(o)return o}}return e},notifyPointerdown(e,n,t){kn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){kn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),kn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){kn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){kn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){kn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var i=this.eventData(e);switch(i.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(i.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,i)},pointerup:function(e,n,t){var i=this.eventData(e);switch(i.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(i.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var o=i.targetMagnet;o&&this.magnetpointerclick(e,o,n,t),this.checkMouseleave(e)},mouseover:function(e){kn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){kn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){kn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){kn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,i){kn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,i)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,i){this.notify("element:magnet:pointerdblclick",e,n,t,i)},magnetcontextmenu:function(e,n,t,i){this.notify("element:magnet:contextmenu",e,n,t,i)},dragStart:function(e,n,t){var i=this.getDelegatedView();if(!i||!i.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:i});const o=i.model.position();i.eventData(e,{initialPosition:o,pointerOffset:o.difference(n,t),restrictedArea:this.paper.getRestrictedArea(i,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var i=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:i}),e.stopPropagation(),o.options.validateMagnet(this,i,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,i,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),o.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var i=this.paper,o=i.options.gridSize,s=this.model,c=this.eventData(e),{pointerOffset:p,restrictedArea:v,embedding:C}=c,M=_s(n+p.x,o),x=_s(t+p.y,o);s.position(M,x,{restrictedArea:v,deep:!0,ui:!0}),i.options.embeddingMode&&(C||(this.prepareEmbedding(c),C=!0),this.processEmbedding(c,e,n,t)),this.eventData(e,{embedding:C})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var i=this.eventData(e);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,i){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,i)}},{Flags:wn});Kt(cr.prototype,_p);const Er=function(e,n,t){return e},Pf=function(e,n,t){var C,M,x,i=n.side||"bottom",o=$s(n.padding||40),s=t.sourceBBox,c=t.targetBBox,p=s.center(),v=c.center();switch(i){case"bottom":x=1,C="y",M="height";break;case"top":x=-1,C="y",M="height";break;case"left":x=-1,C="x",M="width";break;case"right":x=1,C="x",M="width";break;default:throw new Error("Router: invalid side")}return p[C]+=x*(s[M]/2+o[i]),v[C]+=x*(c[M]/2+o[i]),x*(p[C]-v[C])>0?v[C]=p[C]:p[C]=v[C],[p].concat(e,v)};var Sp={N:"S",S:"N",E:"W",W:"E"},Tp={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Al(e,n,t){var i=new ye(e.x,n.y);return t.containsPoint(i)&&(i=new ye(n.x,e.y)),i}function Oc(e,n){return e["W"===n||"E"===n?"width":"height"]}function Di(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function kl(e){return new bt(e.x,e.y,0,0)}function ju(e){var n=$s(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function Js(e,n){return e.sourceBBox.clone().moveAndExpand(ju(n))}function Ol(e,n){return e.targetBBox.clone().moveAndExpand(ju(n))}function zu(e,n,t){var i=new ye(e.x,n.y),o=new ye(n.x,e.y),s=Di(e,i),c=Di(e,o),p=Sp[t],v=s===t||s!==p&&(c===p||c!==t)?i:o;return{points:[v],direction:Di(v,n)}}function Pi(e,n,t){var i=Al(e,n,t);return{points:[i],direction:Di(i,n)}}function Zs(e,n,t,i){var v,o={},s=[new ye(e.x,n.y),new ye(n.x,e.y)],c=s.filter(function(x){return!t.containsPoint(x)}),p=c.filter(function(x){return Di(x,e)!==i});if(p.length>0)v=p.filter(function(x){return Di(e,x)===i}).pop(),o.points=[v=v||p[0]],o.direction=Di(v,n);else{v=qh(s,c)[0];var C=new ye(n).move(v,-Oc(t,i)/2),M=Al(C,e,t);o.points=[M,C],o.direction=Di(C,n)}return o}function Ip(e,n,t,i){var o=Pi(n,e,i),s=o.points[0];if(t.containsPoint(s)){var c=(o=Pi(e,n,t)).points[0];if(i.containsPoint(c)){var p=new ye(e).move(c,-Oc(t,Di(e,c))/2),v=new ye(n).move(s,-Oc(i,Di(n,s))/2),C=new It(p,v).midpoint(),M=Pi(e,C,t),x=zu(C,n,M.direction);o.points=[M.points[0],x.points[0]],o.direction=x.direction}}return o}function Lc(e,n,t,i,o){var M,x,U,s={},c=t.union(i).inflate(1),p=c.center().distance(n)>c.center().distance(e),v=p?n:e,C=p?e:n;return o?(M=ye.fromPolar(c.width+c.height,Tp[o],v),M=c.pointNearestToPoint(M).move(M,-1)):M=c.pointNearestToPoint(v).move(v,1),x=Al(M,C,c),M.round().equals(x.round())?(x=ye.fromPolar(c.width+c.height,Li(M.theta(v))+Math.PI/2,C),U=Al(M,x=c.pointNearestToPoint(x).move(C,1).round(),c),s.points=p?[x,U,M]:[M,U,x]):s.points=p?[x,M]:[M,x],s.direction=Di(p?M:x,n),s}function Rc(e,n,t){var i=Js(t,n),o=Ol(t,n),s=function Ep(e,n){return e.sourceAnchor?e.sourceAnchor:Js(e,n).center()}(t,n),c=function Mf(e,n){return e.targetAnchor?e.targetAnchor:Ol(e,n).center()}(t,n);i=i.union(kl(s)),o=o.union(kl(c)),(e=Tn(e).map(ye)).unshift(s),e.push(c);for(var p,v=[],C=0,M=e.length-1;C<M;C++){var x=null,U=e[C],ne=e[C+1],oe=!!Di(U,ne);if(0===C)C+1===M?i.intersect(o.clone().inflate(1))?x=Lc(U,ne,i,o):oe||(x=Ip(U,ne,i,o)):i.containsPoint(ne)?x=Lc(U,ne,i,kl(ne).moveAndExpand(ju(n))):oe||(x=Pi(U,ne,i));else if(C+1===M){var Te=oe&&Di(ne,U)===p;o.containsPoint(U)||Te?x=Lc(U,ne,kl(U).moveAndExpand(ju(n)),o,p):oe||(x=Zs(U,ne,o,p))}else oe||(x=zu(U,ne,p));x?(Array.prototype.push.apply(v,x.points),p=x.direction):p=Di(U,ne),C+1<M&&v.push(ne)}return v}var Af={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!Jn(Rc))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Rc(e,Kt({},Af,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function Nc(e){this.map={},this.options=e,this.mapGridSize=100}function is(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function sa(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function pn(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function Dc(e,n){return e.sourceAnchor?e.sourceAnchor:sa(e,n).center()}function Ll(e,n,t,i,o){var s=360/t,c=e.theta(function Pp(e,n,t,i){var o=i.step;return new ye(e.x+(n.x-e.x)/t.x*o,e.y+(n.y-e.y)/t.y*o)}(e,n,i,o)),p=Jo(c+s/2);return s*Math.floor(p/s)}function Xn(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function Gu(e,n){if(!e)return n;var t=Math.abs(e),i=Math.round(t/n);return i?n+(t-i*n)/i:t}function Uu(e,n){return e.round(n)}function Rl(e,n,t){return Uu(function Ap(e,n){var t=n.source,i=_s(e.x-t.x,n.x)+t.x,o=_s(e.y-t.y,n.y)+t.y;return new ye(i,o)}(e.clone(),n),t)}function $u(e){return e.clone().toString()}function Fc(e){return new ye(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function kp(e,n,t,i,o,s,c){for(var x,p=[],v=Fc(o.difference(t)),C=$u(t),M=e[C];M;){var U=Fc((x=n[C]).difference(M));U.equals(v)||(p.unshift(x),v=U),M=e[C=$u(M)]}var ne=n[C];return Fc(ne.difference(i)).equals(v)||p.unshift(ne),p}function Of(e,n){for(var t=1/0,i=0,o=n.length;i<o;i++){var s=e.manhattanDistance(n[i]);s<t&&(t=s)}return t}function Lf(e,n,t,i,o){var s=o.precision,c=o.directionMap,p=e.difference(n.center()),v=Cr(c)?Object.keys(c):[],C=Tn(t),M=v.reduce(function(x,U){if(C.includes(U)){for(var Ve,ne=c[U],oe=new ye(e.x+ne.x*(Math.abs(p.x)+n.width),e.y+ne.y*(Math.abs(p.y)+n.height)),Ie=new It(e,oe).intersect(n)||[],je=Ie.length,L=null,z=0;z<je;z++){var Q=Ie[z],ie=e.squaredDistance(Q);(void 0===Ve||ie>Ve)&&(Ve=ie,L=Q)}if(L){var ve=Rl(L,i,s);n.containsPoint(ve)&&(ve=Rl(ve.offset(ne.x*i.x,ne.y*i.y),i,s)),x.push(ve)}}return x},[]);return n.containsPoint(e)||M.push(Rl(e,i,s)),M}function Op(e,n,t,i){var s,c,o=i.precision;s=Uu(e instanceof bt?Dc(this,i).clone():e.clone(),o),c=Uu(n instanceof bt?function Co(e,n){return e.targetAnchor?e.targetAnchor:pn(e,n).center()}(this,i).clone():n.clone(),o);var v,C,M,x,p=function kf(e,n,t){return{source:n.clone(),x:Gu(t.x-n.x,e),y:Gu(t.y-n.y,e)}}(i.step,s,c);if(M=e instanceof bt?Lf(v=s,e,i.startDirections,p,i):[v=s],n instanceof bt?(C=c,x=Lf(c,n,i.endDirections,p,i)):x=[C=c],M=M.filter(On=>!t(On)),x=x.filter(On=>!t(On)),M.length>0&&x.length>0){for(var U=new is,ne={},oe={},Te={},Ie=0,je=M.length;Ie<je;Ie++){var Ve=M[Ie],L=$u(Ve);U.add(L,Of(Ve,x)),ne[L]=Ve,Te[L]=0}var ie,ve,z=i.previousDirectionAngle,Q=void 0===z,Pe=i.directions;!function Mp(e,n,t){var i=t.step;Tn(t.directions).forEach(function(o){o.gridOffsetX=o.offsetX/i*n.x,o.gridOffsetY=o.offsetY/i*n.y})}(0,p,i);for(var Re=Pe.length,We=Tn(x).reduce(function(On,$t){var Pt=$u($t);return On.push(Pt),On},[]),pt=i.maximumLoops;!U.isEmpty()&&pt>0;){var Gn,st=U.pop(),vt=ne[st],Tt=oe[st],Et=Te[st],Ft=void 0===Tt,er=vt.equals(v);Gn=Ft?Q?er?null:Ll(v,vt,Re,p,i):z:Ll(Tt,vt,Re,p,i);var ar=M.length===x.length;if(ar)for(var zt=0;zt<M.length;zt++)if(!M[zt].equals(x[zt])){ar=!1;break}if((!Ft||!ar)&&We.indexOf(st)>=0)return i.previousDirectionAngle=Gn,kp(oe,ne,vt,v,C);for(Ie=0;Ie<Re;Ie++){var Yt=(ie=Pe[Ie]).angle;if(ve=Xn(Gn,Yt),Q&&er||!(ve>i.maxAllowedDirectionChange)){var Xt=Rl(vt.clone().offset(ie.gridOffsetX,ie.gridOffsetY),p,o),In=$u(Xt);if(!U.isClose(In)&&!t(Xt)){if(We.indexOf(In)>=0&&!Xt.equals(C)&&Xn(Yt,Ll(Xt,C,Re,p,i))>i.maxAllowedDirectionChange)continue;var cn=Et+ie.cost+(er?0:i.penalties[ve]);(!U.isOpen(In)||cn<Te[In])&&(ne[In]=Xt,oe[In]=vt,Te[In]=cn,U.add(In,cn+Of(Xt,x)))}}}pt--}}return i.fallbackRoute.call(this,v,C,i)}Nc.prototype.build=function(e,n){var t=this.options,i=Tn(t.excludeEnds).reduce(function(v,C){var M=n.get(C);if(M){var x=e.getCell(M.id);x&&v.push(x)}return v},[]),o=[],s=e.getCell(n.get("source").id);s&&(o=Sc(o,s.getAncestors().map(function(v){return v.id})));var c=e.getCell(n.get("target").id);c&&(o=Sc(o,c.getAncestors().map(function(v){return v.id})));var p=this.mapGridSize;return e.getElements().reduce(function(v,C){var M=Tn(t.excludeTypes).includes(C.get("type")),x=i.find(function(z){return z.id===C.id}),U=o.includes(C.id);if(!(M||x||U))for(var oe=C.getBBox().moveAndExpand(t.paddingBox),Te=oe.origin().snapToGrid(p),Ie=oe.corner().snapToGrid(p),je=Te.x;je<=Ie.x;je+=p)for(var Ve=Te.y;Ve<=Ie.y;Ve+=p){var L=je+"@"+Ve;v[L]=v[L]||[],v[L].push(oe)}return v},this.map),this},Nc.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return Tn(this.map[n]).every(function(t){return!t.containsPoint(e)})},is.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=nf(this.items,e,function(i){return this.values[i]}.bind(this));this.items.splice(t,0,e)},is.prototype.remove=function(e){this.hash[e]=this.CLOSE},is.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},is.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},is.prototype.isEmpty=function(){return 0===this.items.length},is.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const Bc=function(e,n,t){return function Rp(e,n,t){(function Lp(e){if(e.directions=Gr(e,"directions"),e.penalties=Gr(e,"penalties"),e.paddingBox=Gr(e,"paddingBox"),e.padding=Gr(e,"padding"),e.padding){var n=$s(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}Tn(e.directions).forEach(function(t){var i=new ye(0,0),o=new ye(t.offsetX,t.offsetY);t.angle=Jo(i.theta(o))})})(n),t.options.perpendicular=!!n.perpendicular;var i=sa(t,n),o=pn(t,n),s=Dc(t,n);let c;if("function"==typeof n.isPointObstacle)c=n.isPointObstacle;else{const L=new Nc(n);L.build(t.paper.model,t.model),c=z=>!L.isPointAccessible(z)}for(var M,x,p=Tn(e).map(ye),v=[],C=s,U=0,ne=p.length;U<=ne;U++){var oe=null;if(x=M||i,!(M=p[U])&&(M=o,(!t.model.get("source").id||!t.model.get("target").id)&&Jn(n.draggingRoute))){var Ie=x===i?s:x,je=M.origin();oe=n.draggingRoute.call(t,Ie,je,n)}if(null===(oe=oe||Op.call(t,x,M,c,n)))return n.fallbackRouter(e,n,t);var Ve=oe[0];Ve&&Ve.equals(C)&&oe.shift(),C=oe[oe.length-1]||C,Array.prototype.push.apply(v,oe)}return v}(e,Kt({},Af,n),t)};var Np={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var i=e.theta(n),o=[],s={x:n.x,y:e.y},c={x:e.x,y:n.y};if(i%180>90){var p=s;s=c,c=p}var v=i%90<45?s:c,C=new It(e,v),M=90*Math.ceil(i/90),x=ye.fromPolar(C.squaredLength(),Li(M+135),v),U=new It(n,x),ne=C.intersection(U),oe=ne||n,Ie=360/t.directions.length,je=(ne?oe:e).theta(n),Ve=Jo(je+Ie/2),L=Ie*Math.floor(Ve/Ie);return t.previousDirectionAngle=L,oe&&o.push(oe.round()),o.push(n),o}};const Vc=function(e,n,t){if(!Jn(Bc))throw new Error("Metro requires the manhattan router.");return Bc(e,Kt({},Np,n),t)};var Nl=["arc","gap","cubic"],Bp=["smooth"],Or=1/3,pi=2/3;function Hc(e,n,t){var i=[].concat(e,t,n);return i.reduce(function(o,s,c){var p=i[c+1];return null!=p&&(o[c]=ba(s,p)),o},[])}function Df(e,n){return ba(e,n).squaredLength()}function Ff(e,n,t,i){var s,o=new Lt;return s=Lt.createSegment("M",e[0].start),o.appendSegment(s),Tn(e).forEach(function(c,p){if(c.isJump){var v,C,M,x;if("arc"===t){v=-90,C=c.start.difference(c.end);var U=Number(C.x<0||0===C.x&&C.y<0);U&&(v+=180);var Te,ne=c.midpoint(),oe=new It(ne,c.end).rotate(ne,v);M=(Te=new It(c.start,ne)).pointAt(2/3).rotate(c.start,v),x=oe.pointAt(1/3).rotate(oe.end,-v),s=Lt.createSegment("C",M,x,oe.end),o.appendSegment(s),Te=new It(ne,c.end),M=oe.pointAt(1/3).rotate(oe.end,v),x=Te.pointAt(1/3).rotate(c.end,-v),s=Lt.createSegment("C",M,x,c.end),o.appendSegment(s)}else if("gap"===t)s=Lt.createSegment("M",c.end),o.appendSegment(s);else if("cubic"===t){v=c.start.theta(c.end);var Ie=.6*n,je=1.35*n;C=c.start.difference(c.end),(U=Number(C.x<0||0===C.x&&C.y<0))&&(je*=-1),M=ye(c.start.x+Ie,c.start.y+je).rotate(c.start,v),x=ye(c.end.x-Ie,c.end.y+je).rotate(c.end,v),s=Lt.createSegment("C",M,x,c.end),o.appendSegment(s)}}else{var Ve=e[p+1];0==i||!Ve||Ve.isJump?(s=Lt.createSegment("L",c.end),o.appendSegment(s)):function Bf(e,n,t,i,o){var ne,s=t.distance(i)/2,c=t.distance(o)/2,p=-Math.min(e,s),v=-Math.min(e,c),C=t.clone().move(i,p).round(),M=t.clone().move(o,v).round(),x=new ye(Or*C.x+pi*t.x,pi*t.y+Or*C.y),U=new ye(Or*M.x+pi*t.x,pi*t.y+Or*M.y);ne=Lt.createSegment("L",C),n.appendSegment(ne),ne=Lt.createSegment("C",x,U,M),n.appendSegment(ne)}(i,o,c.end,c.start,Ve.end)}}),o}const zp=function(e,n,t,i){!function Vp(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var i=n.model;i.on("batch:stop",function(){this.hasActiveBatch()||function Hp(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const i=n[t],o=i.getFlag(i.constructor.Flags.CONNECTOR);i.requestUpdate(o)}}(n)}),i.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var o=i.raw,s=i.size||5,c=i.jump&&(""+i.jump).toLowerCase(),p=i.radius||0,v=i.ignoreConnectors||Bp;-1===Nl.indexOf(c)&&(c=Nl[0]);var C=this.paper,x=C.model.getLinks();if(1===x.length)return Ff(Hc(e,n,t),s,c,p);var U=this.model,ne=x.indexOf(U),oe=C.options.defaultConnector||{},Te=x.filter(function(Q,ie){var ve=Q.get("connector")||oe;return!(Tn(v).includes(ve.name)||ie>ne&&"jumpover"===ve.name)}),Ie=Te.map(function(Q){return C.findViewByModel(Q)}),je=Hc(e,n,t),Ve=Ie.map(function(Q){return null==Q?[]:Q===this?je:Hc(Q.sourcePoint,Q.targetPoint,Q.route)},this),L=je.reduce(function(Q,ie){var ve=Te.reduce(function(Pe,Re,We){if(Re!==U){var pt=function Nf(e,n){return Tn(n).reduce(function(t,i){var o=e.intersection(i);return o&&t.push(o),t},[])}(ie,Ve[We]);Pe.push.apply(Pe,pt)}return Pe},[]).sort(function(Pe,Re){return Df(ie.start,Pe)-Df(ie.start,Re)});return ve.length>0?Q.push.apply(Q,function jp(e,n,t){return n.reduce(function(i,o,s){if(!0===o.skip)return i;var c=i.pop()||e,p=Iu(o).move(c.start,-t),v=Iu(o).move(c.start,+t),C=n[s+1];if(null!=C){var M=v.distance(C);M<=t&&(v=C.move(c.start,M),C.skip=!0)}else if(p.distance(c.end)<2*t+1)return i.push(c),i;if(v.distance(c.start)<2*t+1)return i.push(c),i;var ne=ba(p,v);return ne.isJump=!0,i.push(ba(c.start,p),ne,ba(v,c.end)),i},[])}(ie,ve,s)):Q.push(ie),Q},[]),z=Ff(L,s,c,p);return o?z:z.serialize()},Gp=function(e,n,t,i){var o=i&&i.raw,s=[e].concat(t).concat([n]),c=new rr(s),p=new Lt(c);return o?p:p.serialize()},Up=function(e,n,t,i){i||(i={});var p,o=i.radius||10,s=i.raw,c=new Lt;p=Lt.createSegment("M",e),c.appendSegment(p);for(var M,x,U,ne,oe,Te,Ie,je,Ve,L,z,v=1/3,C=2/3,Q=0,ie=t.length;Q<ie;Q++)M=new ye(t[Q]),x=t[Q-1]||e,U=t[Q+1]||n,ne=oe||M.distance(x)/2,oe=M.distance(U)/2,Te=-Math.min(o,ne),Ie=-Math.min(o,oe),je=M.clone().move(x,Te).round(),Ve=M.clone().move(U,Ie).round(),L=new ye(v*je.x+C*M.x,C*M.y+v*je.y),z=new ye(v*Ve.x+C*M.x,C*M.y+v*Ve.y),p=Lt.createSegment("L",je),c.appendSegment(p),p=Lt.createSegment("C",L,z,Ve),c.appendSegment(p);return p=Lt.createSegment("L",n),c.appendSegment(p),s?c:c.serialize()},Vf=function(e,n,t,i){var s,o=i&&i.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([n]),p=Nn.throughPoints(c);s=new Lt(p)}else{var v;if(s=new Lt,v=Lt.createSegment("M",e),s.appendSegment(v),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var C=(e.x+n.x)/2;v=Lt.createSegment("C",C,e.y,C,n.y,n.x,n.y),s.appendSegment(v)}else{var M=(e.y+n.y)/2;v=Lt.createSegment("C",e.x,M,n.x,M,n.x,n.y),s.appendSegment(v)}}return o?s:s.serialize()},so={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Fi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},jc=function(e,n,t=[],i={},o){const s=Boolean(i.raw),{direction:c=so.AUTO,precision:p=3}=i,v={coeff:i.distanceCoefficient||.6,angleTangentCoefficient:i.angleTangentCoefficient||80,tau:i.tension||.5,sourceTangent:i.sourceTangent?new ye(i.sourceTangent):null,targetTangent:i.targetTangent?new ye(i.targetTangent):null};v.sourceDirection="string"==typeof i.sourceDirection?i.sourceDirection:"number"==typeof i.sourceDirection?new ye(1,0).rotate(null,i.sourceDirection):i.sourceDirection?new ye(i.sourceDirection).normalize():null,v.targetDirection="string"==typeof i.targetDirection?i.targetDirection:"number"==typeof i.targetDirection?new ye(1,0).rotate(null,i.targetDirection):i.targetDirection?new ye(i.targetDirection).normalize():null;const C=[e,...t.map(Te=>new ye(Te)),n];let M,x;if(v.sourceTangent)M=v.sourceTangent;else{const Te=function Xp(e,n,t,i){if(i.sourceDirection)switch(i.sourceDirection){case Fi.UP:return new ye(0,-1);case Fi.DOWN:return new ye(0,1);case Fi.LEFT:return new ye(-1,0);case Fi.RIGHT:return new ye(1,0);case Fi.AUTO:return Hf(e,n);case Fi.CLOSEST_POINT:return zf(0,n);case Fi.OUTWARDS:return zc(e,n);default:return i.sourceDirection}switch(t){case so.HORIZONTAL:return function $p(e,n,t){const{sourceBBox:i}=e;let o;return"left"===(o=i.width&&i.height?i.sideNearestToPoint(n[0]):i.x>n[1].x?"right":"left",o)?new ye(-1,0):new ye(1,0)}(e,n);case so.VERTICAL:return function qs(e,n,t){const{sourceBBox:i}=e;let o;return"top"===(o=i.width&&i.height?i.sideNearestToPoint(n[0]):i.y>n[1].y?"bottom":"top",o)?new ye(0,-1):new ye(0,1)}(e,n);case so.CLOSEST_POINT:return zf(0,n);case so.OUTWARDS:return zc(e,n);default:return Hf(e,n)}}(o,C,c,v),Ie=C[0].distance(C[1])*v.coeff,Ve=Uc(Te,C[1].difference(C[0]).normalize());if(Ve>Math.PI/4){const L=Ie+(Ve-Math.PI/4)*v.angleTangentCoefficient;M=Te.clone().scale(L,L)}else M=Te.clone().scale(Ie,Ie)}if(v.targetTangent)x=v.targetTangent;else{const Te=function Kp(e,n,t,i){if(i.targetDirection)switch(i.targetDirection){case Fi.UP:return new ye(0,-1);case Fi.DOWN:return new ye(0,1);case Fi.LEFT:return new ye(-1,0);case Fi.RIGHT:return new ye(0,1);case Fi.AUTO:return jf(e,n);case Fi.CLOSEST_POINT:return Gf(0,n);case Fi.OUTWARDS:return Gc(e,n);default:return i.targetDirection}switch(t){case so.HORIZONTAL:return function Wp(e,n,t){const{targetBBox:i}=e;let o;return"left"===(o=i.width&&i.height?i.sideNearestToPoint(n[n.length-1]):i.x>n[n.length-2].x?"left":"right",o)?new ye(-1,0):new ye(1,0)}(e,n);case so.VERTICAL:return function Yp(e,n,t){const{targetBBox:i}=e;let o;return"top"===(o=i.width&&i.height?i.sideNearestToPoint(n[n.length-1]):i.y>n[n.length-2].y?"top":"bottom",o)?new ye(0,-1):new ye(0,1)}(e,n);case so.CLOSEST_POINT:return Gf(0,n);case so.OUTWARDS:return Gc(e,n);default:return jf(e,n)}}(o,C,c,v),Ie=C.length-1,je=C[Ie-1].distance(C[Ie])*v.coeff,L=Uc(Te,C[Ie-1].difference(C[Ie]).normalize());if(L>Math.PI/4){const z=je+(L-Math.PI/4)*v.angleTangentCoefficient;x=Te.clone().scale(z,z)}else x=Te.clone().scale(je,je)}const ne=function Jp(e,n,t,i){const{tau:o,coeff:s}=i,c=[],p=[],v=[],C=e.length-1;for(let M=0;M<C;M++)c[M]=e[M].distance(e[M+1]);p[0]=n,p[C]=t;for(let M=1;M<C;M++){let x,U;x=1===M?e[M-1].clone().offset(p[M-1].x,p[M-1].y):e[M-1].clone(),U=M===C-1?e[M+1].clone().offset(p[M+1].x,p[M+1].y):e[M+1].clone();const ne=x.difference(e[M]).normalize(),oe=U.difference(e[M]).normalize(),Te=Uc(ne,oe);let je,Ie=(Math.PI-Te)/2;const Ve=Uf(ne,oe);let L;L=Uf(e[M].difference(e[M+1]),e[M].difference(e[M-1])),Ve<0&&(Ie=-Ie),Te<Math.PI/2&&(Ie<0&&L<0||Ie>0&&L>0)&&(Ie-=Math.PI),je=oe.clone(),Qp(je,Ie);const z=je.clone(),Q=je.clone(),ie=c[M-1]*s,ve=c[M]*s;z.scale(ie,ie),Q.scale(ve,ve),p[M]=[z,Q]}for(let M=0;M<C;M++){let x,U;x=0===M?e[M+1].difference(p[M].x/o,p[M].y/o):e[M+1].difference(p[M][1].x/o,p[M][1].y/o),U=M===C-1?e[M].clone().offset(p[M+1].x/o,p[M+1].y/o):e[M].difference(p[M+1][0].x/o,p[M+1][0].y/o),v[M]=[x,e[M],e[M+1],U]}return v}(C,M,x,v).map(Te=>function Zp(e,n){const{tau:t}=n,i=new ye;i.x=e[1].x+(e[2].x-e[0].x)/(6*t),i.y=e[1].y+(e[2].y-e[0].y)/(6*t);const o=new ye;return o.x=e[2].x+(e[3].x-e[1].x)/(6*t),o.y=e[2].y+(e[3].y-e[1].y)/(6*t),new Nn(e[1],i,o,e[2])}(Te,v)),oe=new Lt(ne).round(p);return s?oe:oe.serialize()};function Hf(e,n,t){const{sourceBBox:i}=e;let o;switch(o=i.sideNearestToPoint(i.width&&i.height?n[0]:n[1]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function jf(e,n,t){const{targetBBox:i}=e;let o;switch(o=i.sideNearestToPoint(i.width&&i.height?n[n.length-1]:n[n.length-2]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function zf(e,n,t){return n[1].difference(n[0]).normalize()}function Gf(e,n,t){const i=n.length-1;return n[i-1].difference(n[i]).normalize()}function zc(e,n,t){const{sourceBBox:i}=e,o=i.center();return n[0].difference(o).normalize()}function Gc(e,n,t){const{targetBBox:i}=e,o=i.center();return n[n.length-1].difference(o).normalize()}function Qp(e,n){const t=Math.cos(n),i=Math.sin(n),s=i*e.x+t*e.y;e.x=t*e.x-i*e.y,e.y=s}function Uc(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function Uf(e,n){return e.x*n.y-e.y*n.x}jc.Directions=so,jc.TangentDirections=Fi;const rn={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Wu=kn.extend({className:function(){var e=kn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){kn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[rn.RENDER],attrs:[rn.UPDATE],router:[rn.UPDATE],connector:[rn.CONNECTOR],smooth:[rn.UPDATE],manhattan:[rn.UPDATE],toolMarkup:[rn.LEGACY_TOOLS],labels:[rn.LABELS],labelMarkup:[rn.LABELS],vertices:[rn.VERTICES,rn.UPDATE],vertexMarkup:[rn.VERTICES],source:[rn.SOURCE,rn.UPDATE],target:[rn.TARGET,rn.UPDATE]},initFlag:[rn.RENDER,rn.SOURCE,rn.TARGET,rn.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,rn.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,rn.SOURCE)}if(this.hasFlag(e,rn.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,rn.TARGET)}const{paper:t,sourceView:i,targetView:o}=this;if(t&&(i&&!t.isViewMounted(i)||o&&!t.isViewMounted(o)))return e;if(this.hasFlag(e,rn.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[rn.RENDER,rn.UPDATE,rn.VERTICES,rn.LABELS,rn.TOOLS,rn.LEGACY_TOOLS,rn.CONNECTOR]);let s=!1;this.hasFlag(e,rn.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,rn.VERTICES));const{model:c}=this,{attributes:p}=c;let v=this.hasFlag(e,rn.LABELS),C=this.hasFlag(e,rn.LEGACY_TOOLS);v&&(this.onLabelsChange(c,p.labels,n),e=this.removeFlag(e,rn.LABELS),s=!0),C&&(this.renderTools(),e=this.removeFlag(e,rn.LEGACY_TOOLS));const M=this.hasFlag(e,rn.UPDATE),x=this.hasFlag(e,rn.CONNECTOR);return(M||x)&&(M?n.translateBy&&c.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[rn.UPDATE,rn.TOOLS,rn.CONNECTOR]),v=!1,C=!1,s=!0),v&&this.updateLabelPositions(),C&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,rn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,rn.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(rn.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],i=t.length;if(i>1&&n[t[1]]){if(2===i)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=et(e);Array.isArray(n)||(n=[n]);for(var t=this._V,i=0,o=n.length;i<o;i++){var s=n[i],c=s.attr("class");c&&(c=Uh(c),t[qn.camelCase(c)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=et(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.appendChild(n[i].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,i=n.childNodes;return(t=i.length>1||"G"!==i[0].nodeName.toUpperCase()?et("g").append(n):et(i[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},i=this._labelSelectors={},o=this.model,s=o.attributes.labels||[],c=s.length;if(0===c)return n&&n.remove(),this;n?n.empty():(n=e.labels=et("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(Ro(Gr(this,"className"))),n.attr("model-id",o.id)));for(var p=0;p<c;p++){var M,x,C=this._normalizeLabelMarkup(this._getLabelMarkup(s[p].markup));if(C)M=C.node,x=C.selectors;else{var ne=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),oe=o._getDefaultLabel(),Ie=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||ne;M=Ie.node,x=Ie.selectors}M.setAttribute("label-idx",p),n.append(M),t[p]=M;var je=this.selector;if(x[je])throw new Error("dia.LinkView: ambiguous label root selector.");x[je]=M,i[p]=x}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:i,options:o}=this,{labels:s}=i;if(!s||!t.hasLabels())return;const{node:c}=s;o.labelsLayer?n.getLayerView(o.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){kn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const i=this._labelSelectors[e],[o=null]=this.findBySelector(n,t,i);return o},_mergeLabelAttrs:function(e,n,t,i){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:i:e?t:fi({},i,t):e?fi({},t,n):fi({},i,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,s=e._getDefaultLabel(),c=s.markup,p=s.attrs,v=0,C=n.length;v<C;v++){var M=this._labelCache[v];M.setAttribute("cursor",t?"move":"default");var x=this._labelSelectors[v],U=n[v],Te=this._mergeLabelAttrs(U.markup||c,U.attrs,p,o);this.updateDOMSubtreeAttributes(M,Te,{rootBBox:new bt(U.size),selectors:x})}return this},renderTools:function(){if(!this._V.linkTools)return this;var i,e=qn(this._V.linkTools.node).empty(),n=Ii(this.model.get("toolMarkup")||this.model.toolMarkup),t=et(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=Ii(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),i=et(n())):i=t.clone(),e.append(i.node),this._tool2Cache=i),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=qn(this._V.markerVertices.node).empty(),n=Ii(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,i){e.append(et(n(Kt({idx:i},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=qn(this._V.markerArrowheads.node);e.empty();var n=Ii(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=et(n({end:"source"})),this._V.targetArrowhead=et(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,i=t.vertices(),o=[this.sourceAnchor,...i,this.targetAnchor],s=o.length,c=new rr(o);c.simplify({threshold:.001});const p=c.points.map(C=>C.toJSON()),v=p.length;return s===v?0:(t.vertices(p.slice(1,v-1),e),s-v)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ye(this.sourceAnchor);case"target":return new ye(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ye(this.sourcePoint);case"target":return new ye(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:i}=this;if(!t||!i)return;const o=new rr(t);o.translate(e,n),this.route=o.points,this._translateConnectionPoints(e,n),i.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),i=this.sourceAnchor=t.source,o=this.targetAnchor=t.target,s=this.findRoute(n);this.route=s;var c=this.findConnectionPoints(s,i,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,i=this.findMarkerPoints(e,n,t),o=this.findPath(e,i.source||n,i.target||t);this.path=o},findMarkerPoints:function(e,n,t){var c,p,i=e[0],o=e[e.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),c=ye(n).move(i||t,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),p=ye(t).move(o||n,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=c||n.clone(),s.targetPoint=p||t.clone(),{source:c,target:p}},findAnchorsOrdered:function(e,n,t,i){var o,s,c,p,v=this.model,C=v.get(e),M=v.get(t),x=this.getEndView(e),U=this.getEndView(t),ne=this.getEndMagnet(e),oe=this.getEndMagnet(t);x?(c=n?new ye(n):U?oe:new ye(M),o=this.getAnchor(C.anchor,x,ne,c,e)):o=new ye(C),U?(p=new ye(i||o),s=this.getAnchor(M.anchor,U,oe,p,t)):s=new ye(M);var Te={};return Te[e]=o,Te[t]=s,Te},findAnchors:function(e){var n=this.model,t=e[0],i=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",i,"source",t):this.findAnchorsOrdered("source",t,"target",i)},findConnectionPoints:function(e,n,t){var x,U,ne,je,i=e[0],o=e[e.length-1],s=this.model,c=s.get("source"),p=s.get("target"),v=this.sourceView,C=this.targetView,M=this.paper.options;if(v&&!v.isNodeConnection(this.sourceMagnet)){x=this.sourceMagnet||v.el;var oe=c.connectionPoint||M.defaultConnectionPoint,Ie=new It(i||t,n);ne=this.getConnectionPoint(oe,v,x,Ie,"source")}else ne=n;if(C&&!C.isNodeConnection(this.targetMagnet)){U=this.targetMagnet||C.el;var Ve=p.connectionPoint||M.defaultConnectionPoint,z=new It(o||n,t);je=this.getConnectionPoint(Ve,C,U,z,"target")}else je=t;return{source:ne,target:je}},getAnchor:function(e,n,t,i,o){var p,s=n.isNodeConnection(t),c=this.paper.options;if(e||(e=s?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)p=e;else{var v=e.name;if("function"!=typeof(p=c[s?"linkAnchorNamespace":"anchorNamespace"][v]))throw new Error("Unknown anchor: "+v)}var M=p.call(this,n,t,i,e.args||{},o,this);return M?M.round(this.decimalsRounding):new ye},getConnectionPoint:function(e,n,t,i,o){var s,C,c=i.end,p=this.paper.options;if("function"==typeof p.linkConnectionPoint&&(s=p.linkConnectionPoint(this,n,t===n.el?void 0:t,i.start,o)))return s;if(!e)return c;if("function"==typeof e)C=e;else{var M=e.name;if("function"!=typeof(C=p.connectionPointNamespace[M]))throw new Error("Unknown connection point: "+M)}return(s=C.call(this,i,n,t,e.args||{},o,this))?s.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var o=n._builtins.defaultLabel.position,s=n._getDefaultLabel(),c=this._normalizeLabelPosition(s.position),p=fi({},o,c),v=0,C=t.length;v<C;v++){var M=this._labelCache[v];if(M){var U=this._normalizeLabelPosition(t[v].position),ne=fi({},p,U),oe=this._getLabelTransformationMatrix(ne);M.setAttribute("transform",et.matrixToTransformString(oe)),this._cleanLabelMatrices(v)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,i=t[e];if(i)for(let o in i){const{id:s}=i[o];s&&s in n&&delete n[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var i=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(i=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===qn.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,i=`${e}View`,o=n.get(e),s=o&&o.id;if(!s)return this[i]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(s);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const p=c.findView(t);return!!p&&(this[i]=p,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let i=t.getMagnetFromLinkEnd(this.model.get(e));i===t.el&&(i=null),this[n]=i}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=Tn(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:fi({},n,e)},addLabel:function(e,n,t,i){var o,s,p,c=0;"number"!=typeof e?(o=e.x,s=e.y,"number"==typeof n?(c=n,p=t):p=n):(o=e,s=n,"number"==typeof t?(c=t,p=i):p=t);var v=this._getDefaultLabelPositionArgs(),M=this._mergeLabelPositionArgs(p,v),x={position:this.getLabelPosition(o,s,c,M)};return this.model.insertLabel(-1,x,p),-1},addVertex:function(e,n,t){var i="number"!=typeof e,o=i?e.x:e,s=i?e.y:n,c=i?n:t,p={x:o,y:s},v=this.getVertexIndex(o,s);return this.model.insertVertex(v,p,c),v},sendToken:function(e,n,t){var o,s,c;Cr(n)?(o=n.duration,s="reverse"===n.direction,c=n.connection):(o=n,s=!1,c=null);var p={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(p.keyPoints="1;0",p.keyTimes="0;1");var C,v=et(e);if("string"==typeof c)C=this.findBySelector(c,this.el,this.selectors)[0];else{var M=this._V;C=M.connection?M.connection.node:this.el.querySelector("path")}if(!(C instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");v.appendTo(this.paper.cells).animateAlongPath(p,C),setTimeout(function i(x,U){return function(){x.remove(),"function"==typeof U&&U()}}(v,t),o)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||y,t=this.model.router(),i=this.paper.options.defaultRouter;if(!t){if(!i)return e.map(ye);t=i}var o=Jn(t)?t:n[t.name];if(!Jn(o))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return o.call(this,e,t.args||{},this)||e.map(ye)},findPath:function(e,n,t){var i=this.paper.options.connectorNamespace||I,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=Jn(o)?o:i[o.name];if(!Jn(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var p=ia(o.args||{});p.raw=!0;var v=c.call(this,n,t,e,p,this);return"string"==typeof v&&(v=new Lt(et.normalizePathData(v))),v},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(ni(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,i){var c,o={},s=0;"number"==typeof t?(s=t,c=i):c=t,c&&(o.args=c);var Te,Ie,p=!(c&&c.absoluteDistance),v=c&&c.absoluteDistance&&c.reverseDistance,C=c&&c.absoluteOffset,M=this.path,x={segmentSubdivisions:this.getConnectionSubdivisions()},U=new ye(e,n),ne=M.closestPointT(U,x),oe=M.lengthAtT(ne,x);if(p&&(oe=oe/this.getConnectionLength()||0),v&&(oe=-1*(this.getConnectionLength()-oe)||1),o.distance=oe,C||(Te=M.tangentAtT(ne)),Te)Ie=Te.pointOffset(U);else{var je=M.pointAtT(ne),Ve=U.difference(je);Ie={x:Ve.x,y:Ve.y}}return o.offset=Ie,o.angle=s,o},_getLabelTransformationMatrix:function(e){var n,t=0,i={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");i=e.args||{},n=e.distance,t=e.angle||0}var o=n>0&&n<=1,s=0,c={x:0,y:0};if(e.offset){var p=e.offset;"number"==typeof p&&(s=p),p.x&&(c.x=p.x),p.y&&(c.y=p.y)}var Te,v=0!==c.x||0!==c.y||0===s,C=i.keepGradient,M=i.ensureLegibility,x=this.path,U={segmentSubdivisions:this.getConnectionSubdivisions()},ne=o?n*this.getConnectionLength():n,oe=x.tangentAtLength(ne,U),Ie=t;if(oe){if(v)(Te=oe.start).offset(c);else{var je=oe.clone();je.rotate(oe.start,-90),je.setLength(s),Te=je.end}C&&(Ie=oe.angle()+t,M&&(Ie=Jo((Ie+90)%180-90)))}else Te=x.start,v&&Te.offset(c);return et.createSVGMatrix().translate(Te.x,Te.y).rotate(Ie)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new ye(n.e,n.f)},getVertexIndex:function(e,n){for(var i=this.model.vertices(),o=this.getClosestPointLength(new ye(e,n)),s=0,c=i.length;s<c&&!(o<this.getClosestPointLength(i[s]));s++);return s},notifyPointerdown(e,n,t){kn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){kn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),kn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){kn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){kn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){kn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var i=this._dragData;switch(i&&this.eventData(e,i),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}i&&Kt(i,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var i=this._dragData;switch(i&&(this.eventData(e,i),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){kn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){kn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){kn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){kn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,i){kn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,i)},onevent:function(e,n,t,i){var o=et(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,i)}this.notifyPointerdown(e,t,i),this.paper.delegateDragEvents(this,e.data)}else kn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var i=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),s=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),p=this._getDefaultLabelPositionArgs(),v=this._mergeLabelPositionArgs(c,p);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:s,positionArgs:v,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),s=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var i=this.eventData(e),o={position:this.getLabelPosition(n,t,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(i.labelIdx,o)},dragVertex:function(e,n,t){var i=this.eventData(e);this.model.vertex(i.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var i=this.eventData(e);this.model.translate(n-i.dx,t-i.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var i=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,n,t),o.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,e)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,i=e.initialEnd,o=this.model.prop(t);if(o&&!Ss.endsEqual(i,o)){var c=this.paper;i.id&&this.notify("link:disconnect",n,c.findViewByModel(i.id),e.initialMagnet,t),o.id&&this.notify("link:connect",n,c.findViewByModel(o.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:i}=this,{snapLinks:o,connectionStrategy:s}=i.options,c=this.eventData(e);var p=o.radius||50,v=i.findViewsInArea({x:n-p,y:t-p,width:2*p,height:2*p}),C=c.closestView||null,M=c.closestMagnet||null,x=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var U=Number.MAX_VALUE,ne=new ye(n,t);v.forEach(function(z){const Q=[];"false"!==z.el.getAttribute("magnet")&&Q.push({bbox:z.model.getBBox(),magnet:z.el}),z.$("[magnet]").toArray().forEach(ie=>{Q.push({bbox:z.getNodeBBox(ie),magnet:ie})}),Q.forEach(ie=>{const{magnet:ve,bbox:Pe}=ie,Re=Pe.center().squaredDistance(ne);Re<U&&(M===ve||i.options.validateConnection.apply(i,c.validateConnectionArgs(z,z.el===ve?null:ve)))&&(U=Re,c.closestView=z,c.closestMagnet=ve)})},this);var oe,Te=null,Ie=c.closestView,je=c.closestMagnet;je&&(Te=c.magnetProxy=Ie.findProxyNode(je,"highlighter"));var Ve=c.arrowhead,L=M!==je;if(C&&L&&C.unhighlight(x,{connecting:!0,snapping:!0}),Ie){const{prevEnd:z,prevX:Q,prevY:ie}=c;if(c.prevX=n,c.prevY=t,!L&&("function"!=typeof s||Q===n&&ie===t)||(oe=Ie.getLinkEnd(je,n,t,this.model,Ve),!L&&Ws(z,oe)))return;c.prevEnd=oe,L&&Ie.highlight(Te,{connecting:!0,snapping:!0})}else oe={x:n,y:t};this.model.set(Ve,oe||{x:n,y:t},{ui:!0}),C&&this.notify("link:snap:disconnect",e,C,M,Ve),Ie&&this.notify("link:snap:connect",e,Ie,je,Ve)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,i){const{paper:o,model:s}=this;if(i.eventTarget!==e){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});const c=i.viewUnderPointer=o.findView(e);if(c){const p=i.magnetUnderPointer=c.findMagnet(e),v=i.magnetProxy=c.findProxyNode(p,"highlighter");p&&this.paper.options.validateConnection.apply(o,i.validateConnectionArgs(c,p))?v&&c.highlight(v,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=e,s.set(i.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:i}=this,{viewUnderPointer:o,magnetUnderPointer:s,magnetProxy:c,arrowhead:p}=e;if(!s||!c||!o)return;o.unhighlight(c,{connecting:!0});const v=o.getLinkEnd(s,n,t,i,p);i.set(p,v,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,i=0,o=0;"source"===e?(i=2,t="target"):(o=2,t="source");var s=this.model.get(t);if(s.id){var c=n[i]=this.paper.findViewByModel(s.id),p=c.getMagnetFromLinkEnd(s);p===c.el&&(p=void 0),n[i+1]=p}return function v(C,M){return n[o]=C,n[o+1]=C.el===M?void 0:M,n}},_markAvailableMagnets:function(e){function n(x,U){var ne=x.paper;return ne.options.validateConnection.apply(ne,this.validateConnectionArgs(x,U))}var t=this.paper,i=t.model.getCells();e.marked={};for(var o=0,s=i.length;o<s;o++){var c=i[o].findView(t);if(c){var p=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&p.push(c.el);var v=p.filter(n.bind(e,c));if(v.length>0){for(var C=0,M=v.length;C<M;C++)c.highlight(v[C],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=v}}}},_unmarkAvailableMagnets:function(e){for(var t,i,n=Object.keys(e.marked),o=0,s=n.length;o<s;o++){i=e.marked[t=n[o]];var c=this.paper.findViewByModel(t);if(c){for(var p=0,v=i.length;p<v;p++)c.unhighlight(i[p],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:ia(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){kn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:rn});Object.defineProperty(Wu.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new bt(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new bt(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(Wu.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new bt(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new bt(this.targetAnchor):e.getNodeBBox(t||e.el)}});const Do={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},qp=Qs.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Ro(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let i=t[e];if(i)return i;i=t[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let s in t)s=+s,s<e&&s>o&&(o=s);return n.insertBefore(i,o!==-1/0?t[o].nextSibling:n.firstChild),i},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),eg=rs.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:i}=t;let o;try{const s=et(n);if(o=s.convertToPathData().trim(),"PATH"===s.tagName()&&i){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(s){const c=e.getNodeBoundingRect(n);o=et.rectToPath(Kt({},t,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:i}=this,{padding:o,layer:s}=i;let c=e.getNodeMatrix(n);if(o){!s&&n===e.el&&t.remove();let p=e.getNodeBoundingRect(n);const v=p.x+p.width/2,C=p.y+p.height/2;p=et.transformRect(p,c);const M=Math.max(p.width,1),x=Math.max(p.height,1),U=(M+o)/M,ne=(x+o)/x,oe=et.createSVGMatrix({a:U,b:0,c:0,d:ne,e:v-U*v,f:C-ne*C});c=c.multiply(oe)}t.attr({d:this.getPathData(e,n),transform:et.matrixToTransformString(c)})},highlight(e,n){const{vel:t,options:i}=this;t.attr(i.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),$f=20,ng=rs.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:$f,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:i,MASK_REMOVE_TAGS:o}=this,s=n.tagName();if(!et.isSVGGraphicsElement(n)||o.includes(s))return n.remove(),!1;if(i.includes(s)){const c=e.vel.findOne(`#${n.id}`);if(c){const{node:p}=c;let v=e.getNodeBoundingRect(p);e.model.isElement()&&(v=et.transformRect(v,e.getNodeMatrix(p)));const C=et("rect",v.toJSON()),{x:M,y:x}=v.center(),{angle:U,cx:ne=M,cy:oe=x}=c.rotate();U&&C.rotate(U,ne,oe),n.parent().append(C)}return n.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===n.attr("fill")||n.removeAttr(c)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(i=>{n.removeAttr(i)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:i}=this,{deep:o}=t,s=n.tagName();let c;if("G"===s){if(!o)return null;c=n.clone(),function tg(e,n){const t=e.children();for(;t.length>0;){const i=t.shift();n(i)&&t.push(...i.children())}}(c,p=>this.transformMaskChild(e,p))}else{if(i.includes(s))return null;c=n.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:i,options:o}=this,{padding:s,attrs:c}=o,p="stroke-width"in c?c["stroke-width"]:1,v="none"!==n.attr("fill");let C=parseFloat(n.attr("stroke-width"));isNaN(C)&&(C=1);const M=C+2*s,x=M+2*p;let U=this.getMaskShape(e,n);if(!U){const ne=e.getNodeBoundingRect(n.node);ne.inflate(ne.width?0:.5,ne.height?0:.5),U=et("rect",ne.toJSON())}return U.attr(c),et("mask",{id:this.getMaskId()}).append([U.clone().attr({fill:v?t:"none",stroke:t,"stroke-width":x}),U.clone().attr({fill:v?i:"none",stroke:i,"stroke-width":M})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:i}=this,{padding:o,attrs:s,maskClip:c=$f,layer:p}=t,v="stroke"in s?s.stroke:"#000000";!p&&n===e.el&&i.remove();const C=e.getNodeBoundingRect(n).inflate(o+c),M=this.getMask(e,et(n));this.addMask(e.paper,M),i.attr(C.toJSON()),i.attr({transform:et.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${M.id})`,fill:v})},unhighlight(e){this.removeMask(e.paper)}}),rg=rs.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Ro("highlight-opacity"),highlight:function(e,n){et(n).addClass(this.opacityClassName)},unhighlight:function(e,n){et(n).removeClass(this.opacityClassName)}}),Wf=Ro("highlighted"),ig=rs.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Wf},highlight:function(e,n){et(n).addClass(this.options.className)},unhighlight:function(e,n){et(n).removeClass(this.options.className)}},{className:Wf});function og(e,n,t,i){return e.getPointAtRatio("ratio"in i?i.ratio:.5)}function ag(e,n,t,i){return e.getPointAtLength("length"in i?i.length:20)}function Yu(e){return function(n,t,i,o){if(i instanceof Element){var c,s=this.paper.findView(i);if(s)if(s.isNodeConnection(i)){var p="fixedAt"in o?o.fixedAt:"50%";c=Yf(s,p)}else c=s.getNodeBBox(i).center();else c=new ye;return e.call(this,n,t,c,o)}return e.apply(this,arguments)}}function Yf(e,n){var t=parseFloat(n);return ni(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const lg=Yu(function sg(e,n,t,i){var o=1e6,s=e.getConnection(),c=e.getConnectionSubdivisions(),p=new It(t.clone().offset(0,o),t.clone().offset(0,-o)),v=new It(t.clone().offset(o,0),t.clone().offset(-o,0)),C=p.intersect(s,{segmentSubdivisions:c}),M=v.intersect(s,{segmentSubdivisions:c}),x=[];return C&&Array.prototype.push.apply(x,C),M&&Array.prototype.push.apply(x,M),x.length>0?t.chooseClosest(x):"fallbackAt"in i?Yf(e,i.fallbackAt):Dl(e,n,t,i)}),Dl=Yu(function ug(e,n,t,i){return e.getClosestPoint(t)||new ye});function Xu(e,n,t){if(ri(t)){const{x:o,y:s}=t;if(isFinite(s)){const c=new It(n,e),{start:p,end:v}=c.parallel(s);n=p,e=v}t=o}if(!isFinite(t))return e;var i=e.distance(n);return 0===t&&i>0?e:e.move(n,-Math.min(t,i-1))}function Fl(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function Xf(e,n,t,i){var o=n.getNodeBBox(t);i.stroke&&o.inflate(Fl(t)/2);var s=e.intersect(o);return Xu(s?e.start.chooseClosest(s):e.end,e.start,i.offset)}var Wc="segmentSubdivisons",Yc="shapeBBox";const Xc=function dg(e,n,t,i){let{offset:o,alignOffset:s,align:c}=i;return c&&function cg(e,n,t=0){let i,o,s,c;const{start:p,end:v}=e;switch(n){case"left":i="x",o=v,s=p,c=-1;break;case"right":i="x",o=p,s=v,c=1;break;case"top":i="y",o=v,s=p,c=-1;break;case"bottom":i="y",o=p,s=v,c=1;break;default:return}p[i]<v[i]?o[i]=s[i]:s[i]=o[i],isFinite(t)&&(o[i]+=c*t,s[i]+=c*t)}(e,c,s),Xu(e.end,e.start,o)},hg=Xf,pg=function $c(e,n,t,i){var o=n.model.angle();if(0===o)return Xf(e,n,t,i);var s=n.getNodeUnrotatedBBox(t);i.stroke&&s.inflate(Fl(t)/2);var c=s.center(),p=e.clone().rotate(c,o),v=p.setLength(1e6).intersect(s);return Xu(v?p.start.chooseClosest(v).rotate(c,-o):e.end,e.start,i.offset)},gg=function Zi(e,n,t,i){var o,s,c=i.selector,p=e.end;if(o="string"==typeof c?n.findBySelector(c)[0]:Array.isArray(c)?Gs(t,c):function fg(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!et.isSVGGraphicsElement(o)){if(o===t||!et.isSVGGraphicsElement(t))return p;o=t}var Ve,v=n.getNodeShape(o),C=n.getNodeMatrix(o),M=n.getRootTranslateMatrix(),x=n.getRootRotateMatrix(),U=M.multiply(x).multiply(C),ne=U.inverse(),oe=et.transformLine(e,ne),Te=oe.start.clone(),Ie=n.getNodeData(o);if(!1===i.insideout&&(Ie[Yc]||(Ie[Yc]=v.bbox()),Ie[Yc].containsPoint(Te)))return p;if(v instanceof Lt){var L=i.precision||2;Ie[Wc]||(Ie[Wc]=v.getSegmentSubdivisions({precision:L})),Ve={precision:L,segmentSubdivisions:Ie[Wc]}}!0===i.extrapolate&&oe.setLength(1e6),(s=oe.intersect(v,Ve))?et.isArray(s)&&(s=Te.chooseClosest(s)):!0===i.sticky&&(s=v instanceof bt?v.pointNearestToPoint(Te):v instanceof Si?v.intersectionWithLineFromCenterToPoint(Te):v.closestPoint(Te,Ve));var z=s?et.transformPoint(s,U):p,Q=i.offset||0;return i.stroke&&(Q+=Fl(o)/2),Xu(z,e.start,Q)};function Ma(e){return function(n,t,i,o){var s=!!o.rotate,c=s?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),p=c[e](),v=o.dx;if(v){var C=ni(v);v=parseFloat(v),isFinite(v)&&(C&&(v/=100,v*=c.width),p.x+=v)}var M=o.dy;if(M){var x=ni(M);M=parseFloat(M),isFinite(M)&&(x&&(M/=100,M*=c.height),p.y+=M)}return s?p.rotate(n.model.getBBox().center(),-n.model.angle()):p}}const vg=Ma("center"),yg=Ma("topMiddle"),_g=Ma("bottomMiddle"),xg=Ma("leftMiddle"),Kf=Ma("rightMiddle"),bg=Ma("origin"),Cg=Ma("topRight"),wg=Ma("bottomLeft"),Jc=Ma("corner"),Zc=Yu(function Kc(e,n,t,i){var o=e.model.angle(),s=e.getNodeBBox(n),c=s.center(),p=s.origin(),v=s.corner(),C=i.padding;if(isFinite(C)||(C=0),p.y+C<=t.y&&t.y<=v.y-C){var M=t.y-c.y;c.x+=0===o||180===o?0:1*M/Math.tan(Li(o)),c.y+=M}else if(p.x+C<=t.x&&t.x<=v.x-C){var x=t.x-c.x;c.y+=90===o||270===o?0:x*Math.tan(Li(o)),c.x+=x}return c}),Sg=Yu(function mg(e,n,t,i){var s,c,p,o=!!i.rotate;o?(s=e.getNodeUnrotatedBBox(n),p=e.model.getBBox().center(),c=e.model.angle()):s=e.getNodeBBox(n);var M,v=i.padding;switch(isFinite(v)&&s.inflate(v),o&&t.rotate(p,c),s.sideNearestToPoint(t)){case"left":M=s.leftMiddle();break;case"right":M=s.rightMiddle();break;case"top":M=s.topMiddle();break;case"bottom":M=s.bottomMiddle()}return o?M.rotate(p,-c):M}),Tg=function Qc(e,n,t,i,o){return e.model.getPointFromConnectedLink(this.model,o).offset(i.dx,i.dy)},eu={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Bl=9007199254740991,qc=kn.Highlighting,Jf={[qc.DEFAULT]:{name:"stroke",options:{padding:3}},[qc.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[qc.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Ig=[{name:Do.BACK},{name:Do.CELLS},{name:Do.LABELS},{name:Do.FRONT},{name:Do.TOOLS}],Pg=Qs.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:cr,linkView:Wu,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:Jf,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Ss,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,i,o,s){return("target"===o?t:e)instanceof cr},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:eu.EXACT,frozen:!1,onViewUpdate:function(e,n,t,i,o){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||i.mounting||i.isolate||o.requestConnectedLinksUpdate(e,t,i)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:O,anchorNamespace:B,linkAnchorNamespace:A,connectionPointNamespace:N},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&Ta(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new Ia;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=qn(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var i=t.position;this.isAsync()||!Ki(i)?this.renderView(e,t):(t.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(e,t),0===i&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const i=this.findViewByModel(e);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===eu.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(n)&&!t.hasActiveBatch(i)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(n)&&!t.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:i,defaultAnchor:o,defaultLinkAnchor:s,origin:c,highlighting:p,cellViewNamespace:v,interactive:C}=e;!v&&"undefined"!=typeof joint&&Ta(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Jn(n)||(e.defaultConnector=xo(n)),Jn(t)||(e.defaultRouter=xo(t)),Jn(i)||(e.defaultConnectionPoint=xo(i)),Jn(o)||(e.defaultAnchor=xo(o)),Jn(s)||(e.defaultLinkAnchor=xo(s)),ri(C)&&(e.interactive=Kt({},C)),ri(p)&&(e.highlighting=Cc({},p,Jf)),e.origin=Kt({},c)},children:function(){var e=et.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Ro("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Ro("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Ro("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:i,layers:o,background:s,grid:c}=e;return this.svg=t,this.defs=i,this.layers=o,this.$background=qn(s),this.$grid=qn(c),this.renderLayers(),et.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Ig){this.removeLayers(),e.forEach(({name:o})=>{const c=new qp({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const n=this.getLayerView(Do.CELLS),t=this.getLayerView(Do.TOOLS),i=this.getLayerView(Do.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(Ro("viewport")),i.vel.addClass(Ro("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),et.createSVGMatrix(e)}e=et.createSVGMatrix(e);var i=et.matrixToTransformString(e);return n.setAttribute("transform",i),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return et.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof kn)for(var i=e.model,o=this.model.getConnectedLinks(i),s=0,c=o.length;s<c;s++){var p=o[s],v=this.findViewByModel(p);if(v){var C=["UPDATE"];p.getTargetCell()===i&&C.push("TARGET"),p.getSourceCell()===i&&C.push("SOURCE");var M=Math.max(n+1,v.UPDATE_PRIORITY);this.scheduleViewUpdate(v,v.getFlag(C),M,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof kn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var i=0,o=this.findViewByModel(t.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o),e.updateEndMagnet("source"));var s=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(s=this.dumpView(c),e.updateEndMagnet("target")),0===i&&0===s)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,i){i||(i={}),this.scheduleViewUpdate(e,n,t,i);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==i.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var s=this.updateViews(i);o&&this.notifyAfterRender(s,i)}},scheduleViewUpdate:function(e,n,t,i){const{_updates:o,options:s}=this,{FLAG_REMOVE:c,FLAG_INSERT:p,UPDATE_PRIORITY:v,cid:C}=e;let M=o.priorities[t];if(M||(M=o.priorities[t]={}),t>v)for(let ne=t-1;ne>=v;ne--){const oe=o.priorities[ne];!oe||!(C in oe)||(M[C]|=oe[C],delete oe[C])}let x=M[C]||0;if((x&n)===n)return;x||o.count++,n&c&&x&p?M[C]^=p:n&p&&x&c&&(M[C]^=c),M[C]|=n;const U=s.onViewUpdate;"function"==typeof U&&U.call(this,e,n,t,i||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,i=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|i[t];return delete i[t],o},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:i,FLAG_INSERT:o,model:s}=e;if(e instanceof kn){if(n&i)return this.removeView(s),0;n&o&&(this.insertView(e),n^=o)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var i=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],i},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var i=t.unmounted[n]||0;return delete t.unmounted[n],i},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=_o({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,i=0,o=Bl;do{i++,n=this.updateViewsBatch(e),t+=n.updated,o=Math.min(n.priority,o)}while(!n.empty);const s={updated:t,batches:i,priority:o};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let i in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:Bl});var t=this._updates,i=t.id;if(i){wl(i),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),s=_o({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(s),p=c.unmounted,v=c.mounted,C=n.processed,M=t.count;o.updated>0&&(o.processed=C+=o.updated+o.unmounted,n.priority=Math.min(o.priority,n.priority),o.empty&&0===v?(o.unmounted+=p,o.mounted+=v,o.priority=n.priority,this.notifyAfterRender(o,e),n.processed=0,n.priority=Bl,t.count=0):n.processed=C);var x=e.progress;if(M&&"function"==typeof x&&x.call(this,o.empty,C,M,o,this),t.id!==i)return}t.id=Us(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,i=0,o=0,s=0,c=0,p=Bl,v=!0,C=this.options,M=t.priorities,x="viewport"in e?e.viewport:C.viewport;"function"!=typeof x&&(x=null);var U=C.onViewPostponed;"function"!=typeof U&&(U=null);var ne=Object.keys(M);e:for(var oe=0,Te=ne.length;oe<Te;oe++){var Ie=+ne[oe],je=M[Ie];for(var Ve in je){if(i>=n){v=!1;break e}var L=Ts[Ve];if(L){var z=je[Ve];if(0==(z&L.FLAG_REMOVE)){var Q=Ve in t.unmounted;if(L.DETACHABLE&&x&&!x.call(this,L,!Q,this)){Q||(this.registerUnmountedView(L),L.unmount()),t.unmounted[Ve]|=z,delete je[Ve],s++;continue}Q&&(z|=L.FLAG_INSERT,c++),z|=this.registerMountedView(L)}var ie=this.updateView(L,z,e);ie>0&&(je[Ve]=ie,!U||!U.call(this,L,ie,this)||je[Ve])?(o++,v=!1):(p>Ie&&(p=Ie),i++,delete je[Ve])}else delete je[Ve]}}return{priority:p,updated:i,postponed:o,unmounted:s,mounted:c,empty:v}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,i=new Array(t);for(var o=0;o<t;o++)i[o]=Ts[n[o]];return i},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,i=new Array(t);for(var o=0;o<t;o++)i[o]=Ts[n[o]];return i},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var o=this._updates,s=o.unmountedCids,c=o.unmounted,p=0,v=(Math.min(s.length,"mountBatchSize"in n?n.mountBatchSize:1/0));p<v;p++){var C=s[p];if(C in c){var M=Ts[C];if(M){if(M.DETACHABLE&&e&&!e.call(this,M,!1,this)){s.push(C);continue}t++;var x=this.registerMountedView(M);x&&this.scheduleViewUpdate(M,x,M.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,p),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var o=this._updates,s=o.mountedCids,c=o.mounted,p=0,v=(Math.min(s.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));p<v;p++){var C=s[p];if(C in c){var M=Ts[C];if(M){if(!M.DETACHABLE||e.call(this,M,!0,this)){s.push(C);continue}t++,this.registerUnmountedView(M)&&M.unmount()}}}return s.splice(0,p),t},checkViewport:function(e){var n=_o({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,i=this.checkMountedViews(t,n);return i>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-i,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:i}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,i=this.options.frozen,o=n.freezeKey;if(t&&t!==o){if(i&&o)return;n.freezeKey=t,n.keyFrozen=i}this.options.frozen=!0;var s=n.id;n.id=null,this.isAsync()&&s&&wl(s)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,i=n.freezeKey;t&&i&&t!==i||(n.freezeKey=null,(!t||t!==i||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===eu.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return Ki(n)||(n=this.el.clientWidth),Ki(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:i,height:o}=t;let s=void 0===e?i:e,c=void 0===n?o:n;if(i===s&&o===c)return;t.width=s,t.height=c,this._setDimensions();const p=this.getComputedSize();this.trigger("resize",p.width,p.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;Ki(n)&&(n=Math.round(n)),Ki(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,i){i=Cr(e)?e:Kt({gridWidth:e,gridHeight:n,padding:t},i);const{x:o,y:s,width:c,height:p}=this.getFitToContentArea(i),{sx:v,sy:C}=this.scale();return this.setOrigin(-o*v,-s*C),this.setDimensions(c*v,p*C),new bt(o,s,c,p)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,i=$s(e.padding||0),o=Math.max(e.minWidth||0,n),s=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,p=e.maxHeight||Number.MAX_VALUE,v=e.allowNewOrigin,C="contentArea"in e?new bt(e.contentArea):this.getContentArea(e),{sx:M,sy:x}=this.scale();C.x*=M,C.y*=x,C.width*=M,C.height*=x;let U=Math.ceil((C.width+C.x)/n),ne=Math.ceil((C.height+C.y)/t);e.allowNegativeBottomRight||(U=Math.max(U,1),ne=Math.max(ne,1)),U*=n,ne*=t;let oe=0;("negative"===v&&C.x<0||"positive"===v&&C.x>=0||"any"===v)&&(oe=Math.ceil(-C.x/n)*n,oe+=i.left,U+=oe);let Te=0;return("negative"===v&&C.y<0||"positive"===v&&C.y>=0||"any"===v)&&(Te=Math.ceil(-C.y/t)*t,Te+=i.top,ne+=Te),U+=i.right,ne+=i.bottom,U=Math.max(U,o),ne=Math.max(ne,s),U=Math.min(U,c),ne=Math.min(ne,p),new bt(-oe/M,-Te/x,U/M,ne/x)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var i=e.contentArea;n=this.localToPaperRect(i),t=new ye(i)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){_o(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var C,o=$s(e.padding),s=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,p=e.minScaleY||e.minScale,v=e.maxScaleY||e.maxScale;if(e.fittingBBox)C=e.fittingBBox;else{var M=this.translate(),x=this.getComputedSize();C={x:M.tx,y:M.ty,width:x.width,height:x.height}}C=new bt(C).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var U=this.scale(),ne=C.width/n.width*U.sx,oe=C.height/n.height*U.sy;if(e.preserveAspectRatio&&(ne=oe=Math.min(ne,oe)),e.scaleGrid){var Te=e.scaleGrid;ne=Te*Math.floor(ne/Te),oe=Te*Math.floor(oe/Te)}ne=Math.min(c,Math.max(s,ne)),oe=Math.min(v,Math.max(p,oe));var Ie=this.options.origin,je=C.x-t.x*ne-Ie.x,Ve=C.y-t.y*oe-Ie.y;this.scale(ne,oe),this.translate(je,Ve)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new bt:et(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=Jn(n)?n.apply(this,e):!0===n?this.getArea():n?new bt(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,i,o=n.cellViewNamespace,s=e.get("type")+"View",c=Gs(o,s,".");return e.isLink()?(t=n.linkView,i=Wu):(t=n.elementView,i=cr),new(t.prototype instanceof ii.View?c||t:t.call(this,e)||c||i)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?Do.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:i}=this,o=t[n];if(o){var{cid:s}=o;const{mounted:c,unmounted:p}=i;o.remove(),delete t[n],delete c[s],delete p[s]}return o},renderView:function(e,n){const{id:t}=e,i=this._views;let o,s,c=!0;return t in i&&(o=i[t],o.model===e?(s=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=i[t]=this.createViewForModel(e),o.paper=this,s=this.registerUnmountedView(o)|o.getFlag(Gr(o,"initFlag"))),this.requestViewUpdate(o,s,o.UPDATE_PRIORITY,n),o},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,i=e.length;t<i;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){No(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=qn(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=qn(e),i=t.map(function(){var s=this.parentNode,c=s.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,c),s.removeChild(c)}});Array.prototype.sort.call(t,n).each(function(o){i[o].call(this)})}(e,function(t,i){var o=n.get(t.getAttribute("model-id")),s=n.get(i.getAttribute("model-id")),c=o.attributes.z||0,p=s.attributes.z||0;return c===p?0:c<p?-1:1})},insertView:function(e){const n=this.getLayerView(Do.CELLS),{el:t,model:i}=e;this.options.sorting===eu.APPROX?n.insertSortedNode(t,i.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,i){if(void 0===e)return et.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,i=0);var o=this.translate();(t||i||o.tx||o.ty)&&this.translate(o.tx-t*(e-1),o.ty-i*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var p=this.matrix();return p.a=e,p.d=n,this.matrix(p),this.trigger("scale",e,n,t,i),this},rotate:function(e,n,t){if(void 0===e)return et.matrixToRotate(this.matrix());if(void 0===n){var i=this.cells.getBBox();n=i.width/2,t=i.height/2}var o=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(o),this},translate:function(e,n){if(void 0===e)return et.matrixToTranslate(this.matrix());const{options:t}=this,{origin:i,drawGrid:o}=t;e||(e=0),n||(n=0);const s=this.matrix();if(s.e===e&&s.f===n)return this;s.e=e,s.f=n,this.matrix(s);const{tx:c,ty:p}=this.translate();return i.x=c,i.y=p,this.trigger("translate",c,p),o&&this.drawGrid(),this},findView:function(e){var n=hi(e)?this.cells.querySelector(e):e instanceof qn?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=hi(e)||Ki(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new ye(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=_o(n||{},{strict:!1}),e=new bt(e);var t=this.model.getElements().map(this.findViewByModel,this),i=n.strict?"containsRect":"intersect";return t.filter(function(o){return o&&e[i](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new ye(e,n);return et.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,i){var o=new bt(e,n,t,i);return et.transformRect(o,this.matrix())},paperToLocalPoint:function(e,n){var t=new ye(e,n);return et.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,i){var o=new bt(e,n,t,i);return et.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new ye(e,n);return et.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,i){var o=new bt(e,n,t,i);return et.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new ye(e,n);return et.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,i){var o=new bt(e,n,t,i);return et.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,i){return this.localToPaperRect(e,n,t,i).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var i=new ye(e,n).difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(e,n,t,i){var o=this.pageOffset(),s=new bt(e,n,t,i);return s.x-=o.x,s.y-=o.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ye(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Wu))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,i=this.model,o=i.constructor.validations;return!(!t.multiLinks&&!o.multiLinks.call(this,i,n)||!t.linkPinning&&!o.linkPinning.call(this,i,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return Jn(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:i,highlighterNamespace:o}=this.options;if(void 0===n){if(!i||t&&(n=i[t],!1===n))return!1;n||(n=i.default)}if(!n)return!1;hi(n)&&(n={name:n});const s=n.name,c=o[s];if(!c)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:c,options:n.options||{},name:s}},onCellHighlight:function(e,n,t){const i=this.resolveHighlighter(t);if(!i)return;const{highlighter:o,options:s}=i;o.highlight(e,n,s)},onCellUnhighlight:function(e,n,t){const i=this.resolveHighlighter(t);if(!i)return;const{highlighter:o,options:s}=i;o.unhighlight(e,n,s)},pointerdblclick:function(e){e.preventDefault(),e=Ei(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=Ei(e);var t=this.findView(e.target);if(this.guard(e,t))return;var i=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,i.x,i.y):this.trigger("blank:pointerclick",e,i.x,i.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=Ei(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=Ei(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=Ei(e);var i=this.snapToGrid(e.clientX,e.clientY),o=n.sourceView;o?o.pointermove(e,i.x,i.y):this.trigger("blank:pointermove",e,i.x,i.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=Ei(e),t=this.snapToGrid(n.clientX,n.clientY),i=this.eventData(e).sourceView;i?i.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(qn.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=Ei(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Ei(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Ei(e);const{target:n,relatedTarget:t,currentTarget:i}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseenter(e),this.el.contains(t)))||s||i===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Ei(e);const{target:n,relatedTarget:t,currentTarget:i}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseleave(e),this.el.contains(t)))||s||i===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=Ei(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,i=this.snapToGrid(t.clientX,t.clientY),o=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,i.x,i.y,o):this.trigger("blank:mousewheel",e,i.x,i.y,o)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var i=this.findView(n);if(i){if(e=Ei(e),this.guard(e,i))return;var o=this.snapToGrid(e.clientX,e.clientY);i.onevent(e,t,o.x,o.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var o=this.findView(t);if(o){if(e=Ei(e),this.guard(e,o))return;var s=this.snapToGrid(e.clientX,e.clientY);n.call(this,o,e,t,s.x,s.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,i,o,s){n.onmagnet(t,o,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,i,o,s){n.magnetpointerdblclick(t,i,o,s)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,i,o,s){n.magnetcontextmenu(t,i,o,s)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=Ei(e),this.guard(e,t))return;var i=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,i.x,i.y)}},getPointerArgs(e){const n=Ei(e),{x:t,y:i}=this.snapToGrid(n.clientX,n.clientY);return[n,t,i]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof oa||this.svg===e.target||this.el===e.target||qn.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:et("svg",{width:"100%",height:"100%"},et("defs")),patterns:{},add:function(e,n){et(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(et("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(hi(e)&&Array.isArray(n[e]))return n[e].map(function(v){return Kt({},v)});var t=e||{args:[{}]},i=Array.isArray(t),o=t.name;if(!i&&!o&&!t.markup&&(o="dot"),o&&Array.isArray(n[o])){var s=n[o].map(function(v){return Kt({},v)}),c=Array.isArray(t.args)?t.args:[t.args||{}];_o(c[0],Ys(e,"args"));for(var p=0;p<c.length;p++)s[p]&&Kt(s[p],c[p]);return s}return i?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],i=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,p){var v="pattern_"+p,C=fi(c,t[p],{sx:i.a||1,sy:i.d||1,ox:i.e||0,oy:i.f||0});C.width=n*(i.a||1)*(C.scaleFactor||1),C.height=n*(i.d||1)*(C.scaleFactor||1),o.exist(v)||o.add(v,et("pattern",{id:v,patternUnits:"userSpaceOnUse"},et(C.markup)));var M=o.get(v);Jn(C.update)&&C.update(M.node.childNodes[0],C);var x=C.ox%C.width;x<0&&(x+=C.width);var U=C.oy%C.height;U<0&&(U+=C.height),M.attr({x,y:U,width:C.width,height:C.height})});var s=(new XMLSerializer).serializeToString(o.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",i=this.scale(),o=this.translate();Cr(n)&&(n=o.tx+i.sx*(n.x||0)+"px "+(o.ty+i.sy*(n.y||0))+"px"),Cr(t)&&(t=(t=new bt(t).scale(i.sx,i.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,i=(n=n||{}).size,o=n.repeat||"no-repeat",s=n.opacity||1,c=Math.abs(n.quality)||1,p=this.constructor.backgroundPatterns[ep(o)];if(Jn(p)){e.width*=c,e.height*=c;var v=p(e,n);if(!(v instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=v.toDataURL("image/png"),o="repeat",Cr(i)?(i.width*=v.width/e.width,i.height*=v.height/e.height):void 0===i&&(n.size={width:v.width/c,height:v.height/c})}else t=e.src,void 0===i&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:o,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=xo(e),ws(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,No(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Cr(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+bl(JSON.stringify(e))),!this.isDefined(n)){var o=tf[t]&&tf[t](e.args||{});if(!o)throw new Error("Non-existing filter "+t);var s=Kt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});et(o,s).appendTo(this.defs)}return n},defineGradient:function(e){if(!Cr(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:i,id:o=i+n.id+bl(JSON.stringify(e)),stops:s,attrs:c={}}=e;if(this.isDefined(o))return o;const p=Tn(s).map(({offset:C,color:M,opacity:x})=>et("stop").attr({offset:C,"stop-color":M,"stop-opacity":Number.isFinite(x)?x:1})),v=et(i,c,p);return v.id=o,v.appendTo(t),o},definePattern:function(e){if(!Cr(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:i=n.id+bl(JSON.stringify(e)),markup:o,attrs:s={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(i))return i;const c=et("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=i,c.attr(s),"string"==typeof o)c.append(et(o));else{const{fragment:p}=xl(o);c.append(p)}return c.appendTo(t),i},defineMarker:function(e){if(!Cr(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:i=n.id+bl(JSON.stringify(e)),markup:o,attrs:s={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(i))return i;const p=et("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(p.id=i,p.attr(s),o)if("string"==typeof o)p.append(et(o));else{const{fragment:v}=xl(o);p.append(v)}else{const{type:v="path"}=e,C=et(v,Ys(e,"type","id","markup","attrs","markerUnits"));p.append(C)}return p.appendTo(t),i}},{sorting:eu,Layers:Do,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,i=e.height;n.width=2*t,n.height=2*i;var o=n.getContext("2d");return o.drawImage(e,0,0,t,i),o.setTransform(-1,0,0,-1,n.width,n.height),o.drawImage(e,0,0,t,i),o.setTransform(-1,0,0,1,n.width,0),o.drawImage(e,0,0,t,i),o.setTransform(1,0,0,-1,0,n.height),o.drawImage(e,0,0,t,i),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,i=e.height;n.width=2*t,n.height=i;var o=n.getContext("2d");return o.drawImage(e,0,0,t,i),o.translate(2*t,0),o.scale(-1,1),o.drawImage(e,0,0,t,i),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,i=e.height;n.width=t,n.height=2*i;var o=n.getContext("2d");return o.drawImage(e,0,0,t,i),o.translate(0,2*i),o.scale(1,-1),o.drawImage(e,0,0,t,i),n},watermark:function(e,n){n=n||{};var t=e.width,i=e.height,o=document.createElement("canvas");o.width=3*t,o.height=3*i;for(var s=o.getContext("2d"),c=Ki(n.watermarkAngle)?-n.watermarkAngle:-20,p=Li(c),v=o.width/4,C=o.height/4,M=0;M<4;M++)for(var x=0;x<4;x++)(M+x)%2>0&&(s.setTransform(1,0,0,1,(2*M-1)*v,(2*x-1)*C),s.rotate(p),s.drawImage(e,-t/2,-i/2,t,i));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){et(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;et(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,i=n.width,o=n.height,s=n.thickness;t=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",et(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,i=n.width,o=n.height,s=n.thickness;t=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",et(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,i=n.width,o=n.height,s=n.thickness;t=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",et(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class Mg{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new Ia,this.paper=new Pg({el:qn("#paper"),width:"100%",height:"calc(100vh - 19rem)",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const s=16*(.6*Math.max(...t.split("\n").map(p=>p.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new Cp({id:n,size:{width:s,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:s,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new ns({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],i=[];return n.forEach(o=>{const s=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(100*o.average_success)}% (${o.question_count} Total)`;t.push(this.makeElement(o.pk,s)),o.next_category_ids.forEach(c=>{i.push(this.makeLink(o.pk,c))})}),t.concat(i)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const i=Vu.layout(this.graph,{dagre:Fh(),graphlib:Rd(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${i.width+2*this.offsetX}px`,this.paper.svg.style.height=`${i.height+2*this.offsetY}px`}}function Ag(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",6),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().reset()}),r.\u0275\u0275text(1," Back "),r.\u0275\u0275elementEnd()}if(2&e){r.\u0275\u0275nextContext();const t=r.\u0275\u0275reference(6);r.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}function kg(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"h6",7),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext(),i=r.\u0275\u0275reference(6);r.\u0275\u0275advance(1),r.\u0275\u0275classProp("tui-skeleton",0===i.children.length),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function Og(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"h6",7),r.\u0275\u0275text(1," Top-Level Categories "),r.\u0275\u0275elementEnd()),2&e){r.\u0275\u0275nextContext();const t=r.\u0275\u0275reference(6);r.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let Lg=(()=>{class e{constructor(t,i,o){this.categoryService=t,this.router=i,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new Mg(i=>{this.parentNode=i,this.isTopLevel(i)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",i]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(i=>i.pk===this.parentNode).full_name:null,this.rawCategories.filter(i=>i.parent===this.parentNode).forEach(i=>{t.push(i)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(i=>i.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(oo.H),r.\u0275\u0275directiveInject(q.F0),r.\u0275\u0275directiveInject(r.Injector))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","flat","aria-label","Back","class","tui-space_right-3","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","flat","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-3",3,"click"],[1,"tui-text_h6","tui-space_vertical-0"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Ag,2,2,"button",1),r.\u0275\u0275template(2,kg,3,3,"ng-container",2),r.\u0275\u0275template(3,Og,2,2,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"div",4,5)),2&t){const o=r.\u0275\u0275reference(4),s=r.\u0275\u0275reference(6);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.parentNode),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.parentNode)("ngIfElse",o),r.\u0275\u0275advance(3),r.\u0275\u0275classProp("tui-skeleton",0===s.children.length)}},directives:[k.O5,gt.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 19rem);overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})(),Rg=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.courseService=i,this.route=o,this.courseId=this.route.snapshot.parent.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-practice"]],decls:2,vars:1,consts:[[1,"tui-container","tui-container_fullwidth"],[3,"currCourse"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275element(1,"app-concept-map",1),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("currCourse",i.course))},directives:[Lg],styles:[""]}),e})(),Zf=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}useTokens(t,i){const o=new mi.WM({"Content-Type":"application/json"}),s=this.apiService.getURL("token-use","use",i);return this.http.post(s,t,{headers:o}).pipe((0,vn.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(mi.eN),r.\u0275\u0275inject(Bo.s))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ed=d(21922);function Ng(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tui-notification",4),r.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function Dg(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",19)}function Fg(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",20)}function a(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Dg,1,0,"tui-tag",17),r.\u0275\u0275template(2,Fg,1,0,"ng-template",null,18,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275reference(3),i=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.num_used===i.option.maximum_number_of_use)("ngIfElse",t)}}function u(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",21)}const h=function(){return{standalone:!0}};function P(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-island")(1,"h3",12),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",13),r.\u0275\u0275template(4,a,4,2,"ng-container",2),r.\u0275\u0275template(5,u,1,0,"ng-template",null,14,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"p",15),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"p",15),r.\u0275\u0275text(10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"p",15),r.\u0275\u0275text(12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"tui-input-count",16),r.\u0275\u0275listener("ngModelChange",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext(2).calculateCurrentTotal()})("ngModelChange",function(o){return r.\u0275\u0275restoreView(t).$implicit.num_used=o}),r.\u0275\u0275text(14," Number of Tokens Used "),r.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,i=r.\u0275\u0275reference(6);r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.option.assignment_name),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",i),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",r.\u0275\u0275pureFunction0(10,h))}}function j(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",5)(2,"h2",6),r.\u0275\u0275text(3),r.\u0275\u0275pipe(4,"number"),r.\u0275\u0275pipe(5,"number"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"form",7)(7,"div",8),r.\u0275\u0275template(8,P,15,11,"tui-island",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",10)(10,"button",11),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().confirmChanges()}),r.\u0275\u0275text(11," Confirm Changes "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementContainerEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275classProp("error",t.invalid),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2(" ",r.\u0275\u0275pipeBind2(4,6,t.remainingTokens,"1.0-1"),"/",r.\u0275\u0275pipeBind2(5,9,t.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",t.courseReg.token_uses),r.\u0275\u0275advance(2),r.\u0275\u0275property("disabled",t.invalid)}}function te(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",5)(1,"h2",22),r.\u0275\u0275text(2," 0/0 Tokens Available "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(3,"div",8)(4,"tui-island")(5,"h3",23),r.\u0275\u0275text(6,"Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",13),r.\u0275\u0275element(8,"tui-tag",24),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"p",25),r.\u0275\u0275text(10,"0 Tokens Required"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"p",25),r.\u0275\u0275text(12,"0 Extra Grade Points Given"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"p",25),r.\u0275\u0275text(14,"0 Maximum Uses"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"tui-input-count",26),r.\u0275\u0275listener("ngModelChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().courseReg=o}),r.\u0275\u0275text(16," Content "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(17,"tui-island")(18,"h3",23),r.\u0275\u0275text(19,"Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",13),r.\u0275\u0275element(21,"tui-tag",24),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"p",25),r.\u0275\u0275text(23,"0 Tokens Required"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"p",25),r.\u0275\u0275text(25,"0 Extra Grade Points Given"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"p",25),r.\u0275\u0275text(27,"0 Maximum Uses"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(28,"tui-input-count",26),r.\u0275\u0275listener("ngModelChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().courseReg=o}),r.\u0275\u0275text(29," Content "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(30,"tui-island")(31,"h3",23),r.\u0275\u0275text(32,"Name"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(33,"div",13),r.\u0275\u0275element(34,"tui-tag",24),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(35,"p",25),r.\u0275\u0275text(36,"0 Tokens Required"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(37,"p",25),r.\u0275\u0275text(38,"0 Extra Grade Points Given"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"p",25),r.\u0275\u0275text(40,"0 Maximum Uses"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(41,"tui-input-count",26),r.\u0275\u0275listener("ngModelChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().courseReg=o}),r.\u0275\u0275text(42," Content "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(43,"div",10)(44,"button",27),r.\u0275\u0275text(45," Content "),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(15),r.\u0275\u0275property("ngModel",t.courseReg),r.\u0275\u0275advance(13),r.\u0275\u0275property("ngModel",t.courseReg),r.\u0275\u0275advance(13),r.\u0275\u0275property("ngModel",t.courseReg)}}let he=(()=>{class e{constructor(t,i,o,s,c){this.tokenUseService=t,this.route=i,this.authenticationService=o,this.courseService=s,this.notificationsService=c,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(p=>this.user=p),this.courseId=this.route.snapshot.parent.params.courseId}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseReg=t.course_reg,this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()})}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.parent.params.courseId,i={};this.tokenUses.forEach(o=>i[o.option.id]=o.num_used),this.tokenUseService.useTokens(i,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Zf),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],decls:5,vars:3,consts:[[1,"tui-container","tui-container_fullwidth"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["skeletonTemplate",""],["status","warning",1,"tui-space_bottom-4"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"],[1,"tui-text_h6","tui-space_bottom-8","tui-skeleton","tui-skeleton_short"],[1,"tui-island__title","tui-skeleton"],["size","m","status","success","value","Tokens Used",1,"tui-skeleton"],[1,"tui-island__paragraph","tui-skeleton"],["aria-label","Number of Tokens Used",1,"tui-space_top-4","tui-skeleton",3,"ngModel","ngModelChange"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","",1,"tui-form__button","tui-skeleton"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275template(1,Ng,3,0,"ng-container",1),r.\u0275\u0275template(2,j,12,12,"ng-container",2),r.\u0275\u0275template(3,te,46,3,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(4);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",null==i.user?null:i.user.is_teacher),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.courseReg)("ngIfElse",o)}},directives:[k.O5,_t.Ls,K.\u0275NgNoValidate,K.NgControlStatusGroup,K.NgForm,k.sg,ki.h,Dr.Gi,ed.EA,ed.aQ,K.NgControlStatus,K.NgModel,gt.v0],pipes:[k.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var _e=d(56197);function Me(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",20)}function it(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",21)}function ot(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1," Grade: TBA "),r.\u0275\u0275elementContainerEnd())}function ft(e,n){if(1&e&&(r.\u0275\u0275text(0),r.\u0275\u0275pipe(1,"number")),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275textInterpolate1(" Grade: ",r.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1")," % ")}}const St=function(e,n){return["/course",e,"challenge",n]};function Nt(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"a",22),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(2,St,i.course.id,t.id)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.user.is_teacher?"View":"Complete"," ")}}function Qt(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",23),r.\u0275\u0275text(1," Complete "),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("disabled",!0)}const gn=function(e,n){return["/course",e,"challenge",n,"edit"]};function Jt(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",24),r.\u0275\u0275text(1," Edit "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,gn,i.course.id,t.id))}}function En(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",8)(1,"div",9),r.\u0275\u0275text(2," Challenge"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",10),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",11)(6,"div"),r.\u0275\u0275text(7),r.\u0275\u0275pipe(8,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div"),r.\u0275\u0275text(10),r.\u0275\u0275pipe(11,"date"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(12,"div",12),r.\u0275\u0275template(13,Me,1,0,"tui-tag",13),r.\u0275\u0275template(14,it,1,0,"ng-template",null,14,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"div",15),r.\u0275\u0275template(17,ot,2,0,"ng-container",1),r.\u0275\u0275template(18,ft,2,4,"ng-template",null,16,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",17),r.\u0275\u0275template(21,Nt,3,5,"ng-container",1),r.\u0275\u0275template(22,Qt,2,1,"ng-template",null,18,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(24,Jt,2,4,"a",19),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(15),o=r.\u0275\u0275reference(19),s=r.\u0275\u0275reference(23),c=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(t.name),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" From: ",r.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" Until: ",r.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",i),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",o),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Dn(e,n){if(1&e&&r.\u0275\u0275template(0,En,25,16,"div",7),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function uo(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",20)}function Bi(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",28)}function lo(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"a",22),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(2,St,i.course.id,t.id)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.user.is_teacher?"View":"Complete"," ")}}function Lr(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",23),r.\u0275\u0275text(1," Complete "),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("disabled",!0)}function Fo(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",29),r.\u0275\u0275text(1," Edit "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,gn,i.course.id,t.id))}}function Aa(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",26)(1,"div",9),r.\u0275\u0275text(2," Challenge"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",10),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",11)(6,"div"),r.\u0275\u0275text(7),r.\u0275\u0275pipe(8,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div"),r.\u0275\u0275text(10),r.\u0275\u0275pipe(11,"date"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(12,"div",12),r.\u0275\u0275template(13,uo,1,0,"tui-tag",13),r.\u0275\u0275template(14,Bi,1,0,"ng-template",null,14,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"div",15),r.\u0275\u0275text(17),r.\u0275\u0275pipe(18,"number"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",17),r.\u0275\u0275template(20,lo,3,5,"ng-container",1),r.\u0275\u0275template(21,Lr,2,1,"ng-template",null,18,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(23,Fo,2,4,"a",27),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(15),o=r.\u0275\u0275reference(22),s=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(t.name),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" From: ",r.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" Until: ",r.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",i),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" Grade: ",r.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1")," % "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==s.user?null:s.user.is_teacher))("ngIfElse",o),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.has_edit_permission)}}function qf(e,n){if(1&e&&r.\u0275\u0275template(0,Aa,24,18,"div",25),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngForOf",t.pastEvents)}}function Fm(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tui-accordion",3)(2,"tui-accordion-item",4),r.\u0275\u0275text(3," Upcoming Challenges "),r.\u0275\u0275template(4,Dn,1,1,"ng-template",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"tui-accordion-item",6),r.\u0275\u0275text(6," Past Challenges "),r.\u0275\u0275template(7,qf,1,1,"ng-template",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("closeOthers",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("disableHover",!0))}function Bm(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",8)(1,"div",30),r.\u0275\u0275text(2,"Challenge"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",31),r.\u0275\u0275text(4,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",11)(6,"div",32),r.\u0275\u0275text(7,"From Some Date Here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",32),r.\u0275\u0275text(9,"Until Some Date Here"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",12),r.\u0275\u0275element(11,"tui-tag",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",15)(13,"div",32),r.\u0275\u0275text(14," Grade: TBA "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(15,"div",17),r.\u0275\u0275elementContainerStart(16),r.\u0275\u0275elementStart(17,"a",34),r.\u0275\u0275text(18," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(19,"div",8)(20,"div",30),r.\u0275\u0275text(21,"Challenge"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",31),r.\u0275\u0275text(23,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"div",11)(25,"div",32),r.\u0275\u0275text(26,"From Some Date Here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"div",32),r.\u0275\u0275text(28,"Until Some Date Here"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(29,"div",12),r.\u0275\u0275element(30,"tui-tag",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",15)(32,"div",32),r.\u0275\u0275text(33," Grade: TBA "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(34,"div",17),r.\u0275\u0275elementContainerStart(35),r.\u0275\u0275elementStart(36,"a",34),r.\u0275\u0275text(37," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()())}function Vm(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",8)(1,"div",30),r.\u0275\u0275text(2,"Challenge"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",31),r.\u0275\u0275text(4,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",11)(6,"div",32),r.\u0275\u0275text(7,"From Some Date Here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",32),r.\u0275\u0275text(9,"Until Some Date Here"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",12),r.\u0275\u0275element(11,"tui-tag",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",15)(13,"div",32),r.\u0275\u0275text(14," Grade: TBA "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(15,"div",17),r.\u0275\u0275elementContainerStart(16),r.\u0275\u0275elementStart(17,"a",34),r.\u0275\u0275text(18," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(19,"div",8)(20,"div",30),r.\u0275\u0275text(21,"Challenge"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",31),r.\u0275\u0275text(23,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"div",11)(25,"div",32),r.\u0275\u0275text(26,"From Some Date Here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"div",32),r.\u0275\u0275text(28,"Until Some Date Here"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(29,"div",12),r.\u0275\u0275element(30,"tui-tag",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",15)(32,"div",32),r.\u0275\u0275text(33," Grade: TBA "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(34,"div",17),r.\u0275\u0275elementContainerStart(35),r.\u0275\u0275elementStart(36,"a",34),r.\u0275\u0275text(37," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()())}function Hm(e,n){1&e&&(r.\u0275\u0275elementStart(0,"tui-accordion",3)(1,"tui-accordion-item",4),r.\u0275\u0275text(2," Upcoming Challenges "),r.\u0275\u0275template(3,Bm,38,0,"ng-template",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"tui-accordion-item",4),r.\u0275\u0275text(5," Past Challenges "),r.\u0275\u0275template(6,Vm,38,0,"ng-template",5),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275property("closeOthers",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("disableHover",!0),r.\u0275\u0275advance(3),r.\u0275\u0275property("disableHover",!0))}let jm=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.courseService=i,this.route=o,this.currentDate=new Date,this.courseId=this.route.snapshot.parent.params.courseId}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t,this.events=null==t?void 0:t.events,this.upcomingEvents=this.events.filter(i=>i.is_open||i.is_not_available_yet).filter(i=>"CHALLENGE"===i.type),this.pastEvents=this.events.filter(i=>i.is_closed).filter(i=>"CHALLENGE"===i.type)}),this.authenticationService.currentUser.subscribe(t=>this.user=t)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],decls:4,vars:2,consts:[[1,"challengePage"],[4,"ngIf","ngIfElse"],["skeletonTemplate",""],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","secondary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","default","value","Closed"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],[1,"challengeType","tui-skeleton"],[1,"name","tui-skeleton"],[1,"tui-skeleton"],["size","m","status","success","value","Available",1,"tui-skeleton"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button","tui-skeleton"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Fm,8,2,"ng-container",1),r.\u0275\u0275template(2,Hm,7,3,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.course)("ngIfElse",o)}},directives:[k.O5,_e.oc,_e.Kc,_e.dv,k.sg,Dr.Gi,gt.v0,q.yS],pipes:[k.uU,k.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}.name[_ngcontent-%COMP%]{grid-area:name}.dates[_ngcontent-%COMP%]{grid-area:dates}.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();var mm=d(26566);const vm=function(e){return["/course",e,"practice"]},ym=function(e){return["/course",e,"assignments-exams"]},_m=function(e){return["/course",e,"challenge"]},xm=function(e){return["/course",e,"leaderboard"]},zm=function(e){return["/course",e,"token"]};let Gm=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.courseService=i,this.route=o,this.courseId=this.route.snapshot.parent.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-homepage"]],decls:52,vars:27,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"flex-container"],["size","m",1,"course-tile","tui-island_hoverable",3,"routerLink"],[1,"course-background","practice"],[1,"course-tile-text"],[1,"tui-island__title"],[1,"tui-island__paragraph","tui-text_body-xl","flex-space"],[1,"course-view-button","tui-space_top-3"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],[1,"course-background","assessment"],[1,"course-background","challenge"],[1,"course-background","leaderboard"],["size","m","tuiPointerHint","Coming Soon...","tuiHintDirection","top-middle",1,"course-tile","cursor-"],[1,"course-background","tokens"],[1,"tui-island__paragraph","tui-text_body-xl","flex-space","tui-space_right-5"],["appearance","primary","size","m","tuiButton","","disabled","true",1,"tui-form__button",3,"routerLink"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"tui-island",2),r.\u0275\u0275element(3,"div",3),r.\u0275\u0275elementStart(4,"div",4)(5,"h3",5),r.\u0275\u0275text(6,"Question Bank"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"p",6),r.\u0275\u0275text(8," Improve your skills by solving practice questions."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",7)(10,"a",8),r.\u0275\u0275text(11," View "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(12,"tui-island",2),r.\u0275\u0275element(13,"div",9),r.\u0275\u0275elementStart(14,"div",4)(15,"h3",5),r.\u0275\u0275text(16,"Assignments and Exams"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"p",6),r.\u0275\u0275text(18," Work on assignments and exams for this course."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",7)(20,"a",8),r.\u0275\u0275text(21," View "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(22,"tui-island",2),r.\u0275\u0275element(23,"div",10),r.\u0275\u0275elementStart(24,"div",4)(25,"h3",5),r.\u0275\u0275text(26,"Challenges"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"p",6),r.\u0275\u0275text(28," Complete challenges on your own or in a team. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",7)(30,"a",8),r.\u0275\u0275text(31," View "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(32,"tui-island",2),r.\u0275\u0275element(33,"div",11),r.\u0275\u0275elementStart(34,"div",4)(35,"h3",5),r.\u0275\u0275text(36,"Leaderboard"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(37,"p",6),r.\u0275\u0275text(38," View your performance on the leaderboard for this website."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"div",7)(40,"a",8),r.\u0275\u0275text(41," View "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(42,"tui-island",12),r.\u0275\u0275element(43,"div",13),r.\u0275\u0275elementStart(44,"div",4)(45,"h3",5),r.\u0275\u0275text(46,"Tokens"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(47,"p",14),r.\u0275\u0275text(48," See how many tokens you earned."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(49,"div",7)(50,"a",15),r.\u0275\u0275text(51," View "),r.\u0275\u0275elementEnd()()()()()()),2&t&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(9,vm,i.courseId)),r.\u0275\u0275advance(8),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(11,vm,i.courseId)),r.\u0275\u0275advance(2),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(13,ym,i.courseId)),r.\u0275\u0275advance(8),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(15,ym,i.courseId)),r.\u0275\u0275advance(2),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(17,_m,i.courseId)),r.\u0275\u0275advance(8),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(19,_m,i.courseId)),r.\u0275\u0275advance(2),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(21,xm,i.courseId)),r.\u0275\u0275advance(8),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(23,xm,i.courseId)),r.\u0275\u0275advance(10),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(25,zm,i.courseId)))},directives:[ki.h,q.rH,gt.v0,q.yS,mm.e],styles:[".course-tile[_ngcontent-%COMP%]{overflow:hidden}@media screen and (min-width: 1280px){.course-tile[_ngcontent-%COMP%]{flex-basis:calc(30% - 4.5rem)}}@media screen and (min-width: 768px) and (max-width: 1279px){.course-tile[_ngcontent-%COMP%]{flex-basis:calc(50% - 4.5rem)}}@media screen and (max-width: 767px){.course-tile[_ngcontent-%COMP%]{flex-basis:100%}}.flex-container[_ngcontent-%COMP%]{margin:auto;display:flex;flex-wrap:wrap;justify-content:center;flex-direction:row;gap:2rem 2rem}@media screen and (min-width: 1280px){.flex-container[_ngcontent-%COMP%]{max-width:1200px}}@media screen and (min-width: 768px) and (max-width: 1279px){.flex-container[_ngcontent-%COMP%]{max-width:900px}}.course-tile-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 4 * var(--tui-padding-l))}.flex-space[_ngcontent-%COMP%]{flex:1;text-align:left}.course-background[_ngcontent-%COMP%]{width:calc(100% + 2 * var(--tui-padding-l));height:calc(4 * var(--tui-padding-l));margin-top:calc(-1 * var(--tui-padding-l));margin-left:calc(-1 * var(--tui-padding-l));margin-bottom:12px}.practice[_ngcontent-%COMP%]{background-color:var(--tui-success-bg-hover)}.assessment[_ngcontent-%COMP%]{background-color:var(--tui-error-bg-hover)}.challenge[_ngcontent-%COMP%]{background-color:var(--tui-warning-bg-hover)}.leaderboard[_ngcontent-%COMP%]{opacity:.24;background-color:var(--tui-support-02)}.tokens[_ngcontent-%COMP%]{opacity:.24;background-color:var(--tui-support-10)}"]}),e})();const Um=["importDialog"];function $m(e,n){if(1&e&&r.\u0275\u0275element(0,"tui-data-list-wrapper",14),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("items",t.getEventFilterOptions())}}function Wm(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"button",15),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext(2).openEventImportDialog()}),r.\u0275\u0275text(2," Add Event "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}}function Ym(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tui-island",23)(1,"p",24),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"h3",21),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"button",25),r.\u0275\u0275listener("click",function(){const s=r.\u0275\u0275restoreView(t).$implicit,c=r.\u0275\u0275nextContext(4);return c.importCourseEvent(s,c.courseId)}),r.\u0275\u0275text(6," Import "),r.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.type),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.name)}}const Xm=function(e){return["/course",e,"assignments-exams","create"]};function Km(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",17)(2,"a",18),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().$implicit.complete()}),r.\u0275\u0275elementStart(3,"figure",19),r.\u0275\u0275element(4,"tui-svg",20),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"h2",21),r.\u0275\u0275text(6,"Create New Event"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(7,Ym,7,2,"tui-island",22),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&e){const t=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(2),r.\u0275\u0275property("hoverable",!0)("routerLink",r.\u0275\u0275pureFunction1(3,Xm,t.courseId)),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",t.courseEvents)}}function Qm(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275template(0,Km,8,5,"ng-container",8),r.\u0275\u0275elementStart(1,"button",16),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(t).$implicit.complete()}),r.\u0275\u0275text(2," Cancel "),r.\u0275\u0275elementEnd()}if(2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",t.courseEvents)}}function Jm(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1,"Assignment"),r.\u0275\u0275elementContainerEnd())}function Zm(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1,"Exam"),r.\u0275\u0275elementContainerEnd())}function qm(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",39)}function ev(e,n){1&e&&r.\u0275\u0275element(0,"tui-tag",40)}function tv(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1," Grade: TBA "),r.\u0275\u0275elementContainerEnd())}function nv(e,n){if(1&e&&(r.\u0275\u0275text(0),r.\u0275\u0275pipe(1,"number")),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275textInterpolate1(" Grade: ",r.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const bm=function(e,n){return["/course",e,"assignments-exams",n]};function rv(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"a",41),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(2,bm,i.courseId,t.id)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.user.is_teacher?"View":"Complete"," ")}}function iv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",42),r.\u0275\u0275text(1," Complete "),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("disabled",!0)}const Cm=function(e,n){return["/course",e,"assignments-exams",n,"edit"]};function ov(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",43),r.\u0275\u0275text(1," Edit "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,Cm,i.courseId,t.id))}}const wm=function(e,n){return["/course",e,"assignments-exams",n,"stats"]};function av(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",43),r.\u0275\u0275text(1," Stats "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,wm,i.courseId,t.id))}}function sv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",27)(1,"div",28),r.\u0275\u0275template(2,Jm,2,0,"ng-container",8),r.\u0275\u0275template(3,Zm,2,0,"ng-container",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",29),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",30)(7,"div"),r.\u0275\u0275text(8),r.\u0275\u0275pipe(9,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div"),r.\u0275\u0275text(11),r.\u0275\u0275pipe(12,"date"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"div",31),r.\u0275\u0275template(14,qm,1,0,"tui-tag",32),r.\u0275\u0275template(15,ev,1,0,"ng-template",null,33,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"div",34),r.\u0275\u0275template(18,tv,2,0,"ng-container",1),r.\u0275\u0275template(19,nv,2,4,"ng-template",null,35,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",36),r.\u0275\u0275template(22,rv,3,5,"ng-container",1),r.\u0275\u0275template(23,iv,2,1,"ng-template",null,37,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(25,ov,2,4,"a",38),r.\u0275\u0275template(26,av,2,4,"a",38),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(16),o=r.\u0275\u0275reference(20),s=r.\u0275\u0275reference(24),c=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf","ASSIGNMENT"===t.type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","EXAM"===t.type),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.name),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1("From: ",r.\u0275\u0275pipeBind2(9,13,t.start_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1("Until: ",r.\u0275\u0275pipeBind2(12,16,t.end_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",i),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",t.is_not_available_yet||t.is_exam)("ngIfElse",o),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.has_edit_permission),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.has_edit_permission)}}function uv(e,n){if(1&e&&r.\u0275\u0275template(0,sv,27,19,"div",26),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngForOf",t.getUpcomingEvents())}}function lv(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1,"Assignment"),r.\u0275\u0275elementContainerEnd())}function cv(e,n){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1,"Exam"),r.\u0275\u0275elementContainerEnd())}function dv(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"a",41),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(2,bm,i.courseId,t.id)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.user.is_teacher?"View":"Complete"," ")}}function fv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"a",42),r.\u0275\u0275text(1," Complete "),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("disabled",!0)}function hv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",43),r.\u0275\u0275text(1," Edit "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,Cm,i.courseId,t.id))}}function pv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"a",43),r.\u0275\u0275text(1," Stats "),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(1,wm,i.courseId,t.id))}}function gv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",27)(1,"div",28),r.\u0275\u0275template(2,lv,2,0,"ng-container",8),r.\u0275\u0275template(3,cv,2,0,"ng-container",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",29),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",30)(7,"div"),r.\u0275\u0275text(8),r.\u0275\u0275pipe(9,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div"),r.\u0275\u0275text(11),r.\u0275\u0275pipe(12,"date"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"div",31),r.\u0275\u0275element(14,"tui-tag",44),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"div",34),r.\u0275\u0275text(16),r.\u0275\u0275pipe(17,"number"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"div",36),r.\u0275\u0275template(19,dv,3,5,"ng-container",1),r.\u0275\u0275template(20,fv,2,1,"ng-template",null,37,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(22,hv,2,4,"a",38),r.\u0275\u0275template(23,pv,2,4,"a",38),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=r.\u0275\u0275reference(21),o=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf","ASSIGNMENT"===t.type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","EXAM"===t.type),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.name),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1("From: ",r.\u0275\u0275pipeBind2(9,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1("Until: ",r.\u0275\u0275pipeBind2(12,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate1(" Grade: ",r.\u0275\u0275pipeBind2(17,16,t.total_event_grade,"1.0-1"),"% "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==o.user?null:o.user.is_teacher))("ngIfElse",i),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.has_edit_permission),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.has_edit_permission)}}function mv(e,n){if(1&e&&r.\u0275\u0275template(0,gv,24,19,"div",26),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngForOf",t.getPastEvents())}}function vv(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"tui-select",5),r.\u0275\u0275listener("ngModelChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().filter=o}),r.\u0275\u0275text(4," You are viewing "),r.\u0275\u0275element(5,"input",6),r.\u0275\u0275template(6,$m,1,1,"tui-data-list-wrapper",7),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(7,Wm,3,0,"ng-container",8),r.\u0275\u0275template(8,Qm,3,1,"ng-template",null,9,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"tui-accordion",10)(11,"tui-accordion-item",11),r.\u0275\u0275text(12," Upcoming Events "),r.\u0275\u0275template(13,uv,1,1,"ng-template",12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"tui-accordion-item",13),r.\u0275\u0275text(15," Past Events "),r.\u0275\u0275template(16,mv,1,1,"ng-template",12),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",t.filter),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",null==t.course?null:t.course.has_create_event_permission),r.\u0275\u0275advance(3),r.\u0275\u0275property("closeOthers",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("disableHover",!0)}}function yv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",27)(1,"div",47),r.\u0275\u0275text(2," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",48),r.\u0275\u0275text(4,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",30)(6,"div",46),r.\u0275\u0275text(7,"Content For Long Dates"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",46),r.\u0275\u0275text(9,"Content For Long Dates"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",49),r.\u0275\u0275text(11," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",50),r.\u0275\u0275text(13," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",36)(15,"a",51),r.\u0275\u0275text(16," Content "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(17,"div",27)(18,"div",47),r.\u0275\u0275text(19," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",48),r.\u0275\u0275text(21,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",30)(23,"div",46),r.\u0275\u0275text(24,"Content For Long Dates"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(25,"div",46),r.\u0275\u0275text(26,"Content For Long Dates"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(27,"div",49),r.\u0275\u0275text(28," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",50),r.\u0275\u0275text(30," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",36)(32,"a",51),r.\u0275\u0275text(33," Content "),r.\u0275\u0275elementEnd()()())}function _v(e,n){1&e&&(r.\u0275\u0275elementStart(0,"div",27)(1,"div",47),r.\u0275\u0275text(2," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",48),r.\u0275\u0275text(4,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",30)(6,"div",46),r.\u0275\u0275text(7,"Content For Long Dates"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",46),r.\u0275\u0275text(9,"Content For Long Dates"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",49),r.\u0275\u0275text(11," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",50),r.\u0275\u0275text(13," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",36)(15,"a",51),r.\u0275\u0275text(16," Content "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(17,"div",27)(18,"div",47),r.\u0275\u0275text(19," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",48),r.\u0275\u0275text(21,"Content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",30)(23,"div",46),r.\u0275\u0275text(24,"Content For Long Dates"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(25,"div",46),r.\u0275\u0275text(26,"Content For Long Dates"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(27,"div",49),r.\u0275\u0275text(28," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",50),r.\u0275\u0275text(30," Content "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",36)(32,"a",51),r.\u0275\u0275text(33," Content "),r.\u0275\u0275elementEnd()()())}function xv(e,n){if(1&e){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",45),r.\u0275\u0275listener("ngModelChange",function(o){return r.\u0275\u0275restoreView(t),r.\u0275\u0275nextContext().filter=o}),r.\u0275\u0275text(3," content "),r.\u0275\u0275element(4,"input",6),r.\u0275\u0275elementStart(5,"tui-data-list-wrapper",46),r.\u0275\u0275text(6,"content "),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(7,"tui-accordion",10)(8,"tui-accordion-item",11),r.\u0275\u0275template(9,yv,34,0,"ng-template",12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"tui-accordion-item",11),r.\u0275\u0275template(11,_v,34,0,"ng-template",12),r.\u0275\u0275elementEnd()()}if(2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",t.filter),r.\u0275\u0275advance(5),r.\u0275\u0275property("closeOthers",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("disableHover",!0),r.\u0275\u0275advance(2),r.\u0275\u0275property("disableHover",!0)}}var tu=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(tu||(tu={})),tu))();let bv=(()=>{class e{constructor(t,i,o,s,c,p){this.authenticationService=t,this.courseEventService=i,this.courseService=o,this.route=s,this.dialogService=c,this.notificationsService=p,this.filter=tu.ALL,this.courseId=+this.route.snapshot.parent.paramMap.get("courseId")}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t,this.events=t.events}),this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(tu)}getEvents(){switch(this.filter){case tu.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case tu.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case tu.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,i){this.courseEventService.importCourseEvent(t,i).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(ae.$),r.\u0275\u0275directiveInject(Mi),r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(q.gz),r.\u0275\u0275directiveInject(or.RO),r.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,i){if(1&t&&r.\u0275\u0275viewQuery(Um,5),2&t){let o;r.\u0275\u0275queryRefresh(o=r.\u0275\u0275loadQuery())&&(i.importDialog=o.first)}},decls:4,vars:2,consts:[[1,"eventPage"],[4,"ngIf","ngIfElse"],["skeletonTemplate",""],[1,"functionBar"],[1,"filter"],["tuiTextfieldSize","l",3,"ngModel","ngModelChange"],["tuiTextfield",""],[3,"items",4,"tuiDataList"],[4,"ngIf"],["importDialog",""],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],[3,"items"],["icon","tuiIconPlus","appearance","primary","aria-label","Add Event","size","l","tuiButton","",3,"click"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],["size","s",4,"ngFor","ngForOf"],["size","s"],[1,"tui-island__category"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"],["class","event",4,"ngFor","ngForOf"],[1,"event"],[1,"eventType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["eventComingSoon",""],[1,"grade"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","secondary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["size","m","status","default","value","Closed"],["tuiTextfieldSize","l",1,"tui-skeleton",3,"ngModel","ngModelChange"],[1,"tui-skeleton"],[1,"eventType","tui-skeleton"],[1,"name","tui-skeleton"],[1,"availability","tui-skeleton"],[1,"grade","tui-skeleton"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button","tui-skeleton"]],template:function(t,i){if(1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,vv,17,4,"ng-container",1),r.\u0275\u0275template(2,xv,12,4,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&t){const o=r.\u0275\u0275reference(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.course)("ngIfElse",o)}},directives:[k.O5,Pr.uJ,Pr.OI,ge.sz,K.NgControlStatus,K.NgModel,Zn.MB,lr.gX,bu.eC,gt.v0,ki.h,q.yS,wr.P,k.sg,_e.oc,_e.Kc,_e.dv,Dr.Gi],pipes:[k.uU,k.JJ],styles:['.eventPage[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.functionBar[_ngcontent-%COMP%]{align-self:center;width:90%;display:flex;justify-content:start;gap:1rem;flex-wrap:wrap}.filter[_ngcontent-%COMP%]{min-width:22rem}.new-event[_ngcontent-%COMP%]{width:20rem}.new-event[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.event[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.event[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.event[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 15rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.event[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"eventType availability" "name grade" "dates linkBtn";align-items:start}}.eventType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.eventType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.eventType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.eventType[_ngcontent-%COMP%]{grid-area:eventType}.name[_ngcontent-%COMP%]{grid-area:name}.dates[_ngcontent-%COMP%]{grid-area:dates}.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function Cv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2(" ",t.key,": ",t.value," ")}}function wv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-island",4)(1,"h4",5),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,Cv,2,2,"div",6),r.\u0275\u0275pipe(4,"keyvalue"),r.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.question.title," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(4,2,t.answers))}}const Sv=function(){return[".."]};let Sm=(()=>{class e{constructor(t,i){this.courseEventService=t,this.route=i}ngOnInit(){this.eventId=this.route.snapshot.params.eventId,this.courseEventService.getStats(this.eventId).subscribe(t=>this.stats=t)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(Mi),r.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-event-stats"]],decls:6,vars:3,consts:[[1,"tui-container","tui-container_adaptive","space-y-3"],["tuiButton","","appearance","flat","icon","tuiIconArrowLeft","size","s",3,"routerLink"],[1,"tui-text_h3"],["class","shadow space-y-3",4,"ngFor","ngForOf"],[1,"shadow","space-y-3"],[1,"tui-text_h4"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(r.\u0275\u0275elementStart(0,"div",0)(1,"button",1),r.\u0275\u0275text(2," Back to event "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"h3",2),r.\u0275\u0275text(4,"Event Stats"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,wv,5,4,"tui-island",3),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction0(2,Sv)),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",i.stats))},directives:[gt.v0,q.rH,k.sg,ki.h],pipes:[k.Nd],styles:[""]}),e})();var Tm=d(76508),ka=d(78697);function Tv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"tui-island",12),r.\u0275\u0275element(1,"div",13),r.\u0275\u0275elementStart(2,"figure",14),r.\u0275\u0275element(3,"tui-avatar",15,16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"p",17),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"h3",18),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"p",19),r.\u0275\u0275text(10),r.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,i=n.index,o=r.\u0275\u0275reference(4),s=r.\u0275\u0275nextContext(3);r.\u0275\u0275styleProp("margin-top",i+"rem")("order",i%2*-i),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("background-color",o.bgColor),r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(s.getGetOrdinal(t.rank)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function Ev(e,n){1&e&&(r.\u0275\u0275elementStart(0,"th",20),r.\u0275\u0275text(1,"Rank"),r.\u0275\u0275elementEnd())}function Iv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"th",20),r.\u0275\u0275text(1,"Name"),r.\u0275\u0275elementEnd())}function Pv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"th",20),r.\u0275\u0275text(1,"Tokens"),r.\u0275\u0275elementEnd())}function Mv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"td",23),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.getGetOrdinal(t.rank)," ")}}function Av(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"td",23)(1,"div",24),r.\u0275\u0275element(2,"tui-avatar",25),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()()),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function kv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"td",23),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function Ov(e,n){1&e&&(r.\u0275\u0275elementStart(0,"tr",21),r.\u0275\u0275template(1,Mv,2,1,"td",22),r.\u0275\u0275template(2,Av,4,4,"td",22),r.\u0275\u0275template(3,kv,2,1,"td",22),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","token"))}function Lv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",3)(1,"div",4),r.\u0275\u0275template(2,Tv,11,12,"tui-island",5),r.\u0275\u0275pipe(3,"tuiFilter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"table",6)(5,"thead",7)(6,"tr",8),r.\u0275\u0275template(7,Ev,2,0,"th",9),r.\u0275\u0275template(8,Iv,2,0,"th",9),r.\u0275\u0275template(9,Pv,2,0,"th",9),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"tbody",10),r.\u0275\u0275pipe(11,"tuiFilter"),r.\u0275\u0275template(12,Ov,4,3,"tr",11),r.\u0275\u0275elementEnd()()()),2&e){const t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),r.\u0275\u0275advance(2),r.\u0275\u0275property("columns",t.displayedColumns),r.\u0275\u0275advance(3),r.\u0275\u0275property("tuiHead","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHead","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHead","token"),r.\u0275\u0275advance(1),r.\u0275\u0275property("data",r.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}function Rv(e,n){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Lv,13,15,"div",2),r.\u0275\u0275elementContainerEnd()),2&e){const t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.leaderBoard)}}function Nv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"th",20),r.\u0275\u0275text(1,"Rank"),r.\u0275\u0275elementEnd())}function Dv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"th",20),r.\u0275\u0275text(1,"Name"),r.\u0275\u0275elementEnd())}function Fv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"th",20),r.\u0275\u0275text(1,"Tokens"),r.\u0275\u0275elementEnd())}function Bv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," 1st "),r.\u0275\u0275elementEnd())}function Vv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34)(1,"div",24),r.\u0275\u0275element(2,"tui-avatar",25),r.\u0275\u0275text(3," Anonymous User "),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function Hv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," No Tokens "),r.\u0275\u0275elementEnd())}function jv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," 1st "),r.\u0275\u0275elementEnd())}function zv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34)(1,"div",24),r.\u0275\u0275element(2,"tui-avatar",25),r.\u0275\u0275text(3," Anonymous User "),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function Gv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," No Tokens "),r.\u0275\u0275elementEnd())}function Uv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," 1st "),r.\u0275\u0275elementEnd())}function $v(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34)(1,"div",24),r.\u0275\u0275element(2,"tui-avatar",25),r.\u0275\u0275text(3," Anonymous User "),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function Wv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," No Tokens "),r.\u0275\u0275elementEnd())}function Yv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," 1st "),r.\u0275\u0275elementEnd())}function Xv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34)(1,"div",24),r.\u0275\u0275element(2,"tui-avatar",25),r.\u0275\u0275text(3," Anonymous User "),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function Kv(e,n){1&e&&(r.\u0275\u0275elementStart(0,"td",34),r.\u0275\u0275text(1," No Tokens "),r.\u0275\u0275elementEnd())}function Qv(e,n){if(1&e&&(r.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-island",12),r.\u0275\u0275element(3,"div",26),r.\u0275\u0275elementStart(4,"figure",27),r.\u0275\u0275element(5,"tui-avatar",28,16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"p",29),r.\u0275\u0275text(8,"1st"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"h3",30),r.\u0275\u0275text(10," Anonymous User "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"p",31),r.\u0275\u0275text(12," No Tokens "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(13,"tui-island",12),r.\u0275\u0275element(14,"div",26),r.\u0275\u0275elementStart(15,"figure",27),r.\u0275\u0275element(16,"tui-avatar",28,16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"p",29),r.\u0275\u0275text(19,"2nd"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"h3",30),r.\u0275\u0275text(21," Anonymous User "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"p",31),r.\u0275\u0275text(23," No Tokens "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(24,"tui-island",12),r.\u0275\u0275element(25,"div",26),r.\u0275\u0275elementStart(26,"figure",27),r.\u0275\u0275element(27,"tui-avatar",28,16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"p",29),r.\u0275\u0275text(30,"3rd"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"h3",30),r.\u0275\u0275text(32," Anonymous User "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(33,"p",31),r.\u0275\u0275text(34," No Tokens "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(35,"table",6)(36,"thead",7)(37,"tr",8),r.\u0275\u0275template(38,Nv,2,0,"th",9),r.\u0275\u0275template(39,Dv,2,0,"th",9),r.\u0275\u0275template(40,Fv,2,0,"th",9),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(41,"tbody",32)(42,"tr",21),r.\u0275\u0275template(43,Bv,2,0,"td",33),r.\u0275\u0275template(44,Vv,4,3,"td",33),r.\u0275\u0275template(45,Hv,2,0,"td",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(46,"tr",21),r.\u0275\u0275template(47,jv,2,0,"td",33),r.\u0275\u0275template(48,zv,4,3,"td",33),r.\u0275\u0275template(49,Gv,2,0,"td",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(50,"tr",21),r.\u0275\u0275template(51,Uv,2,0,"td",33),r.\u0275\u0275template(52,$v,4,3,"td",33),r.\u0275\u0275template(53,Wv,2,0,"td",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(54,"tr",21),r.\u0275\u0275template(55,Yv,2,0,"td",33),r.\u0275\u0275template(56,Xv,4,3,"td",33),r.\u0275\u0275template(57,Kv,2,0,"td",33),r.\u0275\u0275elementEnd()()()()),2&e){const t=r.\u0275\u0275reference(6),i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275styleProp("margin-top","1rem")("order",-1),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("background-color",t.bgColor),r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"),r.\u0275\u0275advance(8),r.\u0275\u0275styleProp("margin-top","2rem")("order",-0),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("background-color",t.bgColor),r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"),r.\u0275\u0275advance(8),r.\u0275\u0275styleProp("margin-top","3rem")("order",-3),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("background-color",t.bgColor),r.\u0275\u0275advance(2),r.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"),r.\u0275\u0275advance(8),r.\u0275\u0275property("columns",i.displayedColumns),r.\u0275\u0275advance(3),r.\u0275\u0275property("tuiHead","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHead","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiHead","token"),r.\u0275\u0275advance(3),r.\u0275\u0275property("tuiCell","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","token"),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiCell","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","token"),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiCell","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","token"),r.\u0275\u0275advance(2),r.\u0275\u0275property("tuiCell","rank"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("tuiCell","token")}}let Jv=(()=>{class e{constructor(t,i){this.courseService=t,this.route=i,this.displayedColumns=["rank","name","token"],this.filterOutTopX=(o,s)=>o.rank>s,this.filterInTopX=(o,s)=>o.rank<=s,this.courseId=this.route.snapshot.parent.params.courseId}ngOnInit(){this.rankTopX=3,this.courseService.getCourse(this.courseId).subscribe(t=>{this.leaderBoard=this.getRankedLeaderboard(null==t?void 0:t.leader_board)})}getRankedLeaderboard(t){return t.sort((o,s)=>s.token-o.token).map((o,s)=>({rank:s+1,name:o.name,token:o.token}))}getGetOrdinal(t){const i=["th","st","nd","rd"],o=t%100;return t+(i[(o-20)%10]||i[o]||i[0])}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(de.N),r.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["skeletonTemplate",""],["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"],[1,"top-x-background","tui-skeleton"],[1,"tui-island__figure","tui-skeleton"],["size","l",1,"top-x-avatar","tui-skeleton",3,"autoColor","rounded","text"],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2","tui-skeleton"],[1,"tui-island__title","tui-skeleton"],[1,"tui-island__paragraph","tui-skeleton"],["tuiTbody",""],["class","tui-skeleton","tuiTd","",4,"tuiCell"],["tuiTd","",1,"tui-skeleton"]],template:function(t,i){if(1&t&&(r.\u0275\u0275template(0,Rv,2,1,"ng-container",0),r.\u0275\u0275template(1,Qv,58,43,"ng-template",null,1,r.\u0275\u0275templateRefExtractor)),2&t){const o=r.\u0275\u0275reference(2);r.\u0275\u0275property("ngIf",i.leaderBoard)("ngIfElse",o)}},directives:[k.O5,k.sg,ki.h,Tm.JP,ka.c4,ka.Nx,ka.EE,ka.DZ,ka.Ws,ka.jY,ka.LU,ka.fu,ka.Bl,ka.Kt],pipes:[Oe.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();const Zv=[{path:"",component:tt,canActivate:[X.a]},{path:"create",component:Ad,canActivate:[X.a]},{path:":courseId",component:jo,canActivate:[X.a],children:[{path:"",redirectTo:"homepage",pathMatch:"full"},{path:"homepage",component:Gm,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"}]}},{path:"practice",component:Od,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"}]}},{path:"practice/concepts",component:Rg,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Concepts",routerLink:"/course/:courseId/practice/concepts"}]}},{path:"register",component:Ot},{path:"assignments-exams",component:bv,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"}]}},{path:"assignments-exams/create",component:gr,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:"Create an Assignment or Exam",routerLink:"/course/:courseId/assignments-exams/create"}]}},{path:"assignments-exams/:eventId/edit",component:gr,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:"Edit :eventName",routerLink:"/course/:courseId/assignments-exams/:eventId/edit"}]}},{path:"assignments-exams/:eventId",component:mr,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:":eventName",routerLink:"/course/:courseId/assignments-exams/:eventId"}]}},{path:"assignments-exams/:eventId/stats",component:Sm,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:":eventName",routerLink:"/course/:courseId/assignments-exams/:eventId"},{caption:":eventName Statistics",routerLink:"/course/:courseId/assignments-exams/:eventId/stats"}]}},{path:"problem/:id",component:Sr.z},{path:"assignments-exams/:eventId/problem/:id",component:Sr.z,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:":eventName",routerLink:"/course/:courseId/assignments-exams/:eventId"},{caption:":questionName",routerLink:"/course/:courseId/assignments-exams/:eventId/problem/:id"}]}},{path:"goal",component:Ch,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Goals",routerLink:"/course/:courseId/goal"}]}},{path:"goal/create",component:Ph,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Goals",routerLink:"/course/:courseId/goal"},{caption:"Create Goal",routerLink:"/course/:courseId/goal/create"}]}},{path:"goal/:goalId",component:Ed,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Goals",routerLink:"/course/:courseId/goal"},{caption:"Review Goal",routerLink:"/course/:courseId/goal/:goalId"}]}},{path:"token",component:he,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Tokens",routerLink:"/course/:courseId/token"}]}},{path:"challenge",component:jm,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"}]}},{path:"challenge/:eventId",component:mr,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"}]}},{path:"challenge/:eventId/edit",component:gr,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:"Edit :eventName",routerLink:"/course/:courseId/challenge/:eventId/edit"}]}},{path:"challenge/:eventId/stats",component:Sm,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:":eventName Statistics",routerLink:"/course/:courseId/challenge/:eventId/stats"}]}},{path:"challenge/:eventId/problem/:id",component:Sr.z,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:":questionName",routerLink:"/course/:courseId/challenge/:eventId/problem/:id"}]}},{path:"leaderboard",component:Jv,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Leaderboard",routerLink:"/course/:courseId/leaderboard"}]}}]},{path:":courseId/practice/category/:categoryId",component:qu,canActivate:[X.a]}];let qv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[q.Bz.forChild(Zv)],q.Bz]}),e})();var e0=d(16995);d(41065),d(35379),d(18583);let a0=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[k.ez,wr.E]]}),e})();var s0=d(37080),u0=d(96560),l0=d(22079),c0=d(38333),d0=d(91730),f0=d(76112),h0=d(76457),p0=d(68476),g0=d(43567);let m0=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({providers:[Mi,de.N,Zf],imports:[[k.ez,d0.J,qv,K.FormsModule,e0._l,f0.D,h0.ProblemsModule,K.ReactiveFormsModule,g0.l,Mo.QA,_e.iK,da.A,Tm.Jm,ru,gt.fN,xi,zo.s,lr.pc,bu.zX,or.up,u0.S,Zt.C,Oe.p,Cu.go,oi.jh,ed.$H,vs,Qu,le.Qf,Ql,Ye,ki.y,Wr.j,l0.dS,un.z,to.z,_t.Hi,mm.a3,uh,al.R,Pr.Jy,p0.T,a0,wr.E,c0.qE.forRoot(),ka.jz,s0.$$,Dr.d3,du.U1,ge.cn]]}),e})()},71066:(E,W,d)=>{var g,m,T;T="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,g=[d(29610),d(58259),W],void 0!==(m=function(O,A,N){T.Backbone=function(S,T,y,I){var O=S.Backbone,A=Array.prototype.slice;T.VERSION="1.4.1",T.$=I,T.noConflict=function(){return S.Backbone=O,this},T.emulateHTTP=!1,T.emulateJSON=!1;var k,N=T.Events={},B=/\s+/,X=function(F,G,re,xe,Ke){var Ct,qe=0;if(re&&"object"==typeof re)for((void 0!==xe&&"context"in Ke&&void 0===Ke.context&&(Ke.context=xe),Ct=y.keys(re));qe<Ct.length;qe++)G=X(F,G,Ct[qe],re[Ct[qe]],Ke);else if(re&&B.test(re))for(Ct=re.split(B);qe<Ct.length;qe++)G=F(G,Ct[qe],xe,Ke);else G=F(G,re,xe,Ke);return G};N.on=function(F,G,re){return this._events=X(q,this._events||{},F,G,{context:re,ctx:this,listening:k}),k&&((this._listeners||(this._listeners={}))[k.id]=k,k.interop=!1),this},N.listenTo=function(F,G,re){if(!F)return this;var xe=F._listenId||(F._listenId=y.uniqueId("l")),Ke=this._listeningTo||(this._listeningTo={}),qe=k=Ke[xe];qe||(this._listenId||(this._listenId=y.uniqueId("l")),qe=k=Ke[xe]=new K(this,F));var Ct=ue(F,G,re,this);if(k=void 0,Ct)throw Ct;return qe.interop&&qe.on(G,re),this};var q=function(F,G,re,xe){if(re){var Ke=F[G]||(F[G]=[]),qe=xe.context,Ct=xe.ctx,Bt=xe.listening;Bt&&Bt.count++,Ke.push({callback:re,context:qe,ctx:qe||Ct,listening:Bt})}return F},ue=function(F,G,re,xe){try{F.on(G,re,xe)}catch(Ke){return Ke}};N.off=function(F,G,re){return this._events?(this._events=X(r,this._events,F,G,{context:re,listeners:this._listeners}),this):this},N.stopListening=function(F,G,re){var xe=this._listeningTo;if(!xe)return this;for(var Ke=F?[F._listenId]:y.keys(xe),qe=0;qe<Ke.length;qe++){var Ct=xe[Ke[qe]];if(!Ct)break;Ct.obj.off(G,re,this),Ct.interop&&Ct.off(G,re)}return y.isEmpty(xe)&&(this._listeningTo=void 0),this};var r=function(F,G,re,xe){if(F){var Bt,Ke=xe.context,qe=xe.listeners,Ct=0;if(!G&&!Ke&&!re){for(Bt=y.keys(qe);Ct<Bt.length;Ct++)qe[Bt[Ct]].cleanup();return}for(Bt=G?[G]:y.keys(F);Ct<Bt.length;Ct++){var on=F[G=Bt[Ct]];if(!on)break;for(var bn=[],Pn=0;Pn<on.length;Pn++){var mn=on[Pn];if(re&&re!==mn.callback&&re!==mn.callback._callback||Ke&&Ke!==mn.context)bn.push(mn);else{var vr=mn.listening;vr&&vr.off(G,re)}}bn.length?F[G]=bn:delete F[G]}return F}};N.once=function(F,G,re){var xe=X(ae,{},F,G,this.off.bind(this));return"string"==typeof F&&null==re&&(G=void 0),this.on(xe,G,re)},N.listenToOnce=function(F,G,re){var xe=X(ae,{},G,re,this.stopListening.bind(this,F));return this.listenTo(F,xe)};var ae=function(F,G,re,xe){if(re){var Ke=F[G]=y.once(function(){xe(G,Ke),re.apply(this,arguments)});Ke._callback=re}return F};N.trigger=function(F){if(!this._events)return this;for(var G=Math.max(0,arguments.length-1),re=Array(G),xe=0;xe<G;xe++)re[xe]=arguments[xe+1];return X(de,this._events,F,void 0,re),this};var de=function(F,G,re,xe){if(F){var Ke=F[G],qe=F.all;Ke&&qe&&(qe=qe.slice()),Ke&&le(Ke,xe),qe&&le(qe,[G].concat(xe))}return F},le=function(F,G){var re,xe=-1,Ke=F.length,qe=G[0],Ct=G[1],Bt=G[2];switch(G.length){case 0:for(;++xe<Ke;)(re=F[xe]).callback.call(re.ctx);return;case 1:for(;++xe<Ke;)(re=F[xe]).callback.call(re.ctx,qe);return;case 2:for(;++xe<Ke;)(re=F[xe]).callback.call(re.ctx,qe,Ct);return;case 3:for(;++xe<Ke;)(re=F[xe]).callback.call(re.ctx,qe,Ct,Bt);return;default:for(;++xe<Ke;)(re=F[xe]).callback.apply(re.ctx,G);return}},K=function(F,G){this.id=F._listenId,this.listener=F,this.obj=G,this.interop=!0,this.count=0,this._events=void 0};K.prototype.on=N.on,K.prototype.off=function(F,G){var re;this.interop?(this._events=X(r,this._events,F,G,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},K.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},N.bind=N.on,N.unbind=N.off,y.extend(T,N);var ge=T.Model=function(F,G){var re=F||{};G||(G={}),this.preinitialize.apply(this,arguments),this.cid=y.uniqueId(this.cidPrefix),this.attributes={},G.collection&&(this.collection=G.collection),G.parse&&(re=this.parse(re,G)||{});var xe=y.result(this,"defaults");re=y.defaults(y.extend({},xe,re),xe),this.set(re,G),this.changed={},this.initialize.apply(this,arguments)};y.extend(ge.prototype,N,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(F){return y.clone(this.attributes)},sync:function(){return T.sync.apply(this,arguments)},get:function(F){return this.attributes[F]},escape:function(F){return y.escape(this.get(F))},has:function(F){return null!=this.get(F)},matches:function(F){return!!y.iteratee(F,this)(this.attributes)},set:function(F,G,re){if(null==F)return this;var xe;if("object"==typeof F?(xe=F,re=G):(xe={})[F]=G,re||(re={}),!this._validate(xe,re))return!1;var Ke=re.unset,qe=re.silent,Ct=[],Bt=this._changing;this._changing=!0,Bt||(this._previousAttributes=y.clone(this.attributes),this.changed={});var on=this.attributes,bn=this.changed,Pn=this._previousAttributes;for(var mn in xe)y.isEqual(on[mn],G=xe[mn])||Ct.push(mn),y.isEqual(Pn[mn],G)?delete bn[mn]:bn[mn]=G,Ke?delete on[mn]:on[mn]=G;if(this.idAttribute in xe){var vr=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,vr,re)}if(!qe){Ct.length&&(this._pending=re);for(var fr=0;fr<Ct.length;fr++)this.trigger("change:"+Ct[fr],this,on[Ct[fr]],re)}if(Bt)return this;if(!qe)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(F,G){return this.set(F,void 0,y.extend({},G,{unset:!0}))},clear:function(F){var G={};for(var re in this.attributes)G[re]=void 0;return this.set(G,y.extend({},F,{unset:!0}))},hasChanged:function(F){return null==F?!y.isEmpty(this.changed):y.has(this.changed,F)},changedAttributes:function(F){if(!F)return!!this.hasChanged()&&y.clone(this.changed);var xe,G=this._changing?this._previousAttributes:this.attributes,re={};for(var Ke in F){var qe=F[Ke];y.isEqual(G[Ke],qe)||(re[Ke]=qe,xe=!0)}return!!xe&&re},previous:function(F){return null!=F&&this._previousAttributes?this._previousAttributes[F]:null},previousAttributes:function(){return y.clone(this._previousAttributes)},fetch:function(F){F=y.extend({parse:!0},F);var G=this,re=F.success;return F.success=function(xe){var Ke=F.parse?G.parse(xe,F):xe;if(!G.set(Ke,F))return!1;re&&re.call(F.context,G,xe,F),G.trigger("sync",G,xe,F)},en(this,F),this.sync("read",this,F)},save:function(F,G,re){var xe;null==F||"object"==typeof F?(xe=F,re=G):(xe={})[F]=G;var Ke=(re=y.extend({validate:!0,parse:!0},re)).wait;if(xe&&!Ke){if(!this.set(xe,re))return!1}else if(!this._validate(xe,re))return!1;var qe=this,Ct=re.success,Bt=this.attributes;re.success=function(Pn){qe.attributes=Bt;var mn=re.parse?qe.parse(Pn,re):Pn;if(Ke&&(mn=y.extend({},xe,mn)),mn&&!qe.set(mn,re))return!1;Ct&&Ct.call(re.context,qe,Pn,re),qe.trigger("sync",qe,Pn,re)},en(this,re),xe&&Ke&&(this.attributes=y.extend({},Bt,xe));var on=this.isNew()?"create":re.patch?"patch":"update";"patch"===on&&!re.attrs&&(re.attrs=xe);var bn=this.sync(on,this,re);return this.attributes=Bt,bn},destroy:function(F){F=F?y.clone(F):{};var G=this,re=F.success,xe=F.wait,Ke=function(){G.stopListening(),G.trigger("destroy",G,G.collection,F)};F.success=function(Ct){xe&&Ke(),re&&re.call(F.context,G,Ct,F),G.isNew()||G.trigger("sync",G,Ct,F)};var qe=!1;return this.isNew()?y.defer(F.success):(en(this,F),qe=this.sync("delete",this,F)),xe||Ke(),qe},url:function(){var F=y.result(this,"urlRoot")||y.result(this.collection,"url")||dn();if(this.isNew())return F;var G=this.get(this.idAttribute);return F.replace(/[^\/]$/,"$&/")+encodeURIComponent(G)},parse:function(F,G){return F},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(F){return this._validate({},y.extend({},F,{validate:!0}))},_validate:function(F,G){if(!G.validate||!this.validate)return!0;F=y.extend({},this.attributes,F);var re=this.validationError=this.validate(F,G)||null;return!re||(this.trigger("invalid",this,re,y.extend(G,{validationError:re})),!1)}});var Se=T.Collection=function(F,G){G||(G={}),this.preinitialize.apply(this,arguments),G.model&&(this.model=G.model),void 0!==G.comparator&&(this.comparator=G.comparator),this._reset(),this.initialize.apply(this,arguments),F&&this.reset(F,y.extend({silent:!0},G))},Oe={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},Ge=function(F,G,re){re=Math.min(Math.max(re,0),F.length);var qe,xe=Array(F.length-re),Ke=G.length;for(qe=0;qe<xe.length;qe++)xe[qe]=F[qe+re];for(qe=0;qe<Ke;qe++)F[qe+re]=G[qe];for(qe=0;qe<xe.length;qe++)F[qe+Ke+re]=xe[qe]};y.extend(Se.prototype,N,{model:ge,preinitialize:function(){},initialize:function(){},toJSON:function(F){return this.map(function(G){return G.toJSON(F)})},sync:function(){return T.sync.apply(this,arguments)},add:function(F,G){return this.set(F,y.extend({merge:!1},G,b))},remove:function(F,G){G=y.extend({},G);var re=!y.isArray(F);F=re?[F]:F.slice();var xe=this._removeModels(F,G);return!G.silent&&xe.length&&(G.changes={added:[],merged:[],removed:xe},this.trigger("update",this,G)),re?xe[0]:xe},set:function(F,G){if(null!=F){(G=y.extend({},Oe,G)).parse&&!this._isModel(F)&&(F=this.parse(F,G)||[]);var re=!y.isArray(F);F=re?[F]:F.slice();var xe=G.at;null!=xe&&(xe=+xe),xe>this.length&&(xe=this.length),xe<0&&(xe+=this.length+1);var Yn,yr,Ke=[],qe=[],Ct=[],Bt=[],on={},bn=G.add,Pn=G.merge,mn=G.remove,vr=!1,fr=this.comparator&&null==xe&&!1!==G.sort,eo=y.isString(this.comparator)?this.comparator:null;for(yr=0;yr<F.length;yr++){var hr=this.get(Yn=F[yr]);if(hr){if(Pn&&Yn!==hr){var _r=this._isModel(Yn)?Yn.attributes:Yn;G.parse&&(_r=hr.parse(_r,G)),hr.set(_r,G),Ct.push(hr),fr&&!vr&&(vr=hr.hasChanged(eo))}on[hr.cid]||(on[hr.cid]=!0,Ke.push(hr)),F[yr]=hr}else bn&&(Yn=F[yr]=this._prepareModel(Yn,G))&&(qe.push(Yn),this._addReference(Yn,G),on[Yn.cid]=!0,Ke.push(Yn))}if(mn){for(yr=0;yr<this.length;yr++)on[(Yn=this.models[yr]).cid]||Bt.push(Yn);Bt.length&&this._removeModels(Bt,G)}var $r=!1;if(Ke.length&&!fr&&bn&&mn?($r=this.length!==Ke.length||y.some(this.models,function(xr,vn){return xr!==Ke[vn]}),this.models.length=0,Ge(this.models,Ke,0),this.length=this.models.length):qe.length&&(fr&&(vr=!0),Ge(this.models,qe,null==xe?this.length:xe),this.length=this.models.length),vr&&this.sort({silent:!0}),!G.silent){for(yr=0;yr<qe.length;yr++)null!=xe&&(G.index=xe+yr),(Yn=qe[yr]).trigger("add",Yn,this,G);(vr||$r)&&this.trigger("sort",this,G),(qe.length||Bt.length||Ct.length)&&(G.changes={added:qe,removed:Bt,merged:Ct},this.trigger("update",this,G))}return re?F[0]:F}},reset:function(F,G){G=G?y.clone(G):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],G);return G.previousModels=this.models,this._reset(),F=this.add(F,y.extend({silent:!0},G)),G.silent||this.trigger("reset",this,G),F},push:function(F,G){return this.add(F,y.extend({at:this.length},G))},pop:function(F){var G=this.at(this.length-1);return this.remove(G,F)},unshift:function(F,G){return this.add(F,y.extend({at:0},G))},shift:function(F){var G=this.at(0);return this.remove(G,F)},slice:function(){return A.apply(this.models,arguments)},get:function(F){if(null!=F)return this._byId[F]||this._byId[this.modelId(this._isModel(F)?F.attributes:F,F.idAttribute)]||F.cid&&this._byId[F.cid]},has:function(F){return null!=this.get(F)},at:function(F){return F<0&&(F+=this.length),this.models[F]},where:function(F,G){return this[G?"find":"filter"](F)},findWhere:function(F){return this.where(F,!0)},sort:function(F){var G=this.comparator;if(!G)throw new Error("Cannot sort a set without a comparator");F||(F={});var re=G.length;return y.isFunction(G)&&(G=G.bind(this)),1===re||y.isString(G)?this.models=this.sortBy(G):this.models.sort(G),F.silent||this.trigger("sort",this,F),this},pluck:function(F){return this.map(F+"")},fetch:function(F){var G=(F=y.extend({parse:!0},F)).success,re=this;return F.success=function(xe){re[F.reset?"reset":"set"](xe,F),G&&G.call(F.context,re,xe,F),re.trigger("sync",re,xe,F)},en(this,F),this.sync("read",this,F)},create:function(F,G){var re=(G=G?y.clone(G):{}).wait;if(!(F=this._prepareModel(F,G)))return!1;re||this.add(F,G);var xe=this,Ke=G.success;return G.success=function(qe,Ct,Bt){re&&xe.add(qe,Bt),Ke&&Ke.call(Bt.context,qe,Ct,Bt)},F.save(null,G),F},parse:function(F,G){return F},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(F,G){return F[G||this.model.prototype.idAttribute||"id"]},values:function(){return new ze(this,Fe)},keys:function(){return new ze(this,Ne)},entries:function(){return new ze(this,tt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(F,G){return this._isModel(F)?(F.collection||(F.collection=this),F):((G=G?y.clone(G):{}).collection=this,(re=this.model.prototype?new this.model(F,G):this.model(F,G)).validationError?(this.trigger("invalid",this,re.validationError,G),!1):re);var re},_removeModels:function(F,G){for(var re=[],xe=0;xe<F.length;xe++){var Ke=this.get(F[xe]);if(Ke){var qe=this.indexOf(Ke);this.models.splice(qe,1),this.length--,delete this._byId[Ke.cid];var Ct=this.modelId(Ke.attributes,Ke.idAttribute);null!=Ct&&delete this._byId[Ct],G.silent||(G.index=qe,Ke.trigger("remove",Ke,this,G)),re.push(Ke),this._removeReference(Ke,G)}}return re},_isModel:function(F){return F instanceof ge},_addReference:function(F,G){this._byId[F.cid]=F;var re=this.modelId(F.attributes,F.idAttribute);null!=re&&(this._byId[re]=F),F.on("all",this._onModelEvent,this)},_removeReference:function(F,G){delete this._byId[F.cid];var re=this.modelId(F.attributes,F.idAttribute);null!=re&&delete this._byId[re],this===F.collection&&delete F.collection,F.off("all",this._onModelEvent,this)},_onModelEvent:function(F,G,re,xe){if(G){if(("add"===F||"remove"===F)&&re!==this)return;if("destroy"===F&&this.remove(G,xe),"changeId"===F){var Ke=this.modelId(G.previousAttributes(),G.idAttribute),qe=this.modelId(G.attributes,G.idAttribute);null!=Ke&&delete this._byId[Ke],null!=qe&&(this._byId[qe]=G)}}this.trigger.apply(this,arguments)}});var at="function"==typeof Symbol&&Symbol.iterator;at&&(Se.prototype[at]=Se.prototype.values);var ze=function(F,G){this._collection=F,this._kind=G,this._index=0},Fe=1,Ne=2,tt=3;at&&(ze.prototype[at]=function(){return this}),ze.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var G,F=this._collection.at(this._index);if(this._index++,this._kind===Fe)G=F;else{var re=this._collection.modelId(F.attributes,F.idAttribute);G=this._kind===Ne?re:[re,F]}return{value:G,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Xe=T.View=function(F){this.cid=y.uniqueId("view"),this.preinitialize.apply(this,arguments),y.extend(this,y.pick(F,_t)),this._ensureElement(),this.initialize.apply(this,arguments)},mt=/^(\S+)\s*(.*)$/,_t=["model","collection","el","id","attributes","className","tagName","events"];y.extend(Xe.prototype,N,{tagName:"div",$:function(F){return this.$el.find(F)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(F){return this.undelegateEvents(),this._setElement(F),this.delegateEvents(),this},_setElement:function(F){this.$el=F instanceof T.$?F:T.$(F),this.el=this.$el[0]},delegateEvents:function(F){if(F||(F=y.result(this,"events")),!F)return this;for(var G in this.undelegateEvents(),F){var re=F[G];if(y.isFunction(re)||(re=this[re]),re){var xe=G.match(mt);this.delegate(xe[1],xe[2],re.bind(this))}}return this},delegate:function(F,G,re){return this.$el.on(F+".delegateEvents"+this.cid,G,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(F,G,re){return this.$el.off(F+".delegateEvents"+this.cid,G,re),this},_createElement:function(F){return document.createElement(F)},_ensureElement:function(){if(this.el)this.setElement(y.result(this,"el"));else{var F=y.extend({},y.result(this,"attributes"));this.id&&(F.id=y.result(this,"id")),this.className&&(F.class=y.result(this,"className")),this.setElement(this._createElement(y.result(this,"tagName"))),this._setAttributes(F)}},_setAttributes:function(F){this.$el.attr(F)}});var Zt=function(F,G,re,xe){y.each(re,function(Ke,qe){G[qe]&&(F.prototype[qe]=function(F,G,re,xe){switch(G){case 1:return function(){return F[re](this[xe])};case 2:return function(Ke){return F[re](this[xe],Ke)};case 3:return function(Ke,qe){return F[re](this[xe],un(Ke,this),qe)};case 4:return function(Ke,qe,Ct){return F[re](this[xe],un(Ke,this),qe,Ct)};default:return function(){var Ke=A.call(arguments);return Ke.unshift(this[xe]),F[re].apply(F,Ke)}}}(G,Ke,qe,xe))})},un=function(F,G){return y.isFunction(F)?F:y.isObject(F)&&!G._isModel(F)?Vn(F):y.isString(F)?function(re){return re.get(F)}:F},Vn=function(F){var G=y.matches(F);return function(re){return G(re.attributes)}};y.each([[Se,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[ge,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(F){var G=F[0],re=F[1],xe=F[2];G.mixin=function(Ke){var qe=y.reduce(y.functions(Ke),function(Ct,Bt){return Ct[Bt]=0,Ct},{});Zt(G,Ke,qe,xe)},Zt(G,y,re,xe)}),T.sync=function(F,G,re){var xe=dr[F];y.defaults(re||(re={}),{emulateHTTP:T.emulateHTTP,emulateJSON:T.emulateJSON});var Ke={type:xe,dataType:"json"};if(re.url||(Ke.url=y.result(G,"url")||dn()),null==re.data&&G&&("create"===F||"update"===F||"patch"===F)&&(Ke.contentType="application/json",Ke.data=JSON.stringify(re.attrs||G.toJSON(re))),re.emulateJSON&&(Ke.contentType="application/x-www-form-urlencoded",Ke.data=Ke.data?{model:Ke.data}:{}),re.emulateHTTP&&("PUT"===xe||"DELETE"===xe||"PATCH"===xe)){Ke.type="POST",re.emulateJSON&&(Ke.data._method=xe);var qe=re.beforeSend;re.beforeSend=function(on){if(on.setRequestHeader("X-HTTP-Method-Override",xe),qe)return qe.apply(this,arguments)}}"GET"!==Ke.type&&!re.emulateJSON&&(Ke.processData=!1);var Ct=re.error;re.error=function(on,bn,Pn){re.textStatus=bn,re.errorThrown=Pn,Ct&&Ct.call(re.context,on,bn,Pn)};var Bt=re.xhr=T.ajax(y.extend(Ke,re));return G.trigger("request",G,Bt,re),Bt};var dr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};T.ajax=function(){return T.$.ajax.apply(T.$,arguments)};var Un=T.Router=function(F){F||(F={}),this.preinitialize.apply(this,arguments),F.routes&&(this.routes=F.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$e=/\((.*?)\)/g,Je=/(\(\?)?:\w+/g,ct=/\*\w+/g,xt=/[\-{}\[\]+?.,\\\^$|#\s]/g;y.extend(Un.prototype,N,{preinitialize:function(){},initialize:function(){},route:function(F,G,re){y.isRegExp(F)||(F=this._routeToRegExp(F)),y.isFunction(G)&&(re=G,G=""),re||(re=this[G]);var xe=this;return T.history.route(F,function(Ke){var qe=xe._extractParameters(F,Ke);!1!==xe.execute(re,qe,G)&&(xe.trigger.apply(xe,["route:"+G].concat(qe)),xe.trigger("route",G,qe),T.history.trigger("route",xe,G,qe))}),this},execute:function(F,G,re){F&&F.apply(this,G)},navigate:function(F,G){return T.history.navigate(F,G),this},_bindRoutes:function(){if(this.routes){this.routes=y.result(this,"routes");for(var F,G=y.keys(this.routes);null!=(F=G.pop());)this.route(F,this.routes[F])}},_routeToRegExp:function(F){return F=F.replace(xt,"\\$&").replace($e,"(?:$1)?").replace(Je,function(G,re){return re?G:"([^/?]+)"}).replace(ct,"([^?]*?)"),new RegExp("^"+F+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(F,G){var re=F.exec(G).slice(1);return y.map(re,function(xe,Ke){return Ke===re.length-1?xe||null:xe?decodeURIComponent(xe):null})}});var Ot=T.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},ln=/^[#\/]|\s+$/g,Fn=/^\/+|\/+$/g,sr=/#.*$/;Ot.started=!1,y.extend(Ot.prototype,N,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(F){return decodeURI(F.replace(/%25/g,"%2525"))},getSearch:function(){var F=this.location.href.replace(/#.*/,"").match(/\?.+/);return F?F[0]:""},getHash:function(F){var G=(F||this).location.href.match(/#(.*)$/);return G?G[1]:""},getPath:function(){var F=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===F.charAt(0)?F.slice(1):F},getFragment:function(F){return null==F&&(F=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),F.replace(ln,"")},start:function(F){if(Ot.started)throw new Error("Backbone.history has already been started");if(Ot.started=!0,this.options=y.extend({root:"/"},this.options,F),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Fn,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var G=this.root.slice(0,-1)||"/";return this.location.replace(G+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,xe=re.insertBefore(this.iframe,re.firstChild).contentWindow;xe.document.open(),xe.document.close(),xe.location.hash="#"+this.fragment}var Ke=window.addEventListener||function(qe,Ct){return attachEvent("on"+qe,Ct)};if(this._usePushState?Ke("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Ke("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var F=window.removeEventListener||function(G,re){return detachEvent("on"+G,re)};this._usePushState?F("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&F("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ot.started=!1},route:function(F,G){this.handlers.unshift({route:F,callback:G})},checkUrl:function(F){var G=this.getFragment();if(G===this.fragment&&this.iframe&&(G=this.getHash(this.iframe.contentWindow)),G===this.fragment)return!1;this.iframe&&this.navigate(G),this.loadUrl()},loadUrl:function(F){return!!this.matchRoot()&&(F=this.fragment=this.getFragment(F),y.some(this.handlers,function(G){if(G.route.test(F))return G.callback(F),!0}))},navigate:function(F,G){if(!Ot.started)return!1;(!G||!0===G)&&(G={trigger:!!G}),F=this.getFragment(F||"");var re=this.root;(""===F||"?"===F.charAt(0))&&(re=re.slice(0,-1)||"/");var xe=re+F;F=F.replace(sr,"");var Ke=this.decodeFragment(F);if(this.fragment!==Ke){if(this.fragment=Ke,this._usePushState)this.history[G.replace?"replaceState":"pushState"]({},document.title,xe);else{if(!this._wantsHashChange)return this.location.assign(xe);if(this._updateHash(this.location,F,G.replace),this.iframe&&F!==this.getHash(this.iframe.contentWindow)){var qe=this.iframe.contentWindow;G.replace||(qe.document.open(),qe.document.close()),this._updateHash(qe.location,F,G.replace)}}if(G.trigger)return this.loadUrl(F)}},_updateHash:function(F,G,re){if(re){var xe=F.href.replace(/(javascript:|#).*$/,"");F.replace(xe+"#"+G)}else F.hash="#"+G}}),T.history=new Ot;ge.extend=Se.extend=Un.extend=Xe.extend=Ot.extend=function(F,G){var xe,re=this;return xe=F&&y.has(F,"constructor")?F.constructor:function(){return re.apply(this,arguments)},y.extend(xe,re,G),xe.prototype=y.create(re.prototype,F),xe.prototype.constructor=xe,xe.__super__=re.prototype,xe};var dn=function(){throw new Error('A "url" property or function must be specified')},en=function(F,G){var re=G.error;G.error=function(xe){re&&re.call(G.context,F,xe,G),F.trigger("error",F,xe,G)}};return T}(T,N,O,A)}.apply(W,g))&&(E.exports=m)},59695:(E,W,d)=>{E.exports={graphlib:d(36456),layout:d(14850),debug:d(71914),util:{time:d(11510).time,notime:d(11510).notime},version:d(28126)}},12234:(E,W,d)=>{"use strict";var g=d(45760),m=d(67365);E.exports={run:function S(I){var O="greedy"===I.graph().acyclicer?m(I,function A(N){return function(B){return N.edge(B).weight}}(I)):function T(I){var O=[],A={},N={};return g.forEach(I.nodes(),function B(k){g.has(N,k)||(N[k]=!0,A[k]=!0,g.forEach(I.outEdges(k),function(X){g.has(A,X.w)?O.push(X):B(X.w)}),delete A[k])}),O}(I);g.forEach(O,function(N){var B=I.edge(N);I.removeEdge(N),B.forwardName=N.name,B.reversed=!0,I.setEdge(N.w,N.v,B,g.uniqueId("rev"))})},undo:function y(I){g.forEach(I.edges(),function(O){var A=I.edge(O);if(A.reversed){I.removeEdge(O);var N=A.forwardName;delete A.reversed,delete A.forwardName,I.setEdge(O.w,O.v,A,N)}})}}},79999:(E,W,d)=>{var g=d(45760),m=d(11510);function T(y,I,O,A,N,B){var X=N[I][B-1],q=m.addDummyNode(y,"border",{width:0,height:0,rank:B,borderType:I},O);N[I][B]=q,y.setParent(q,A),X&&y.setEdge(X,q,{weight:1})}E.exports=function S(y){g.forEach(y.children(),function I(O){var A=y.children(O),N=y.node(O);if(A.length&&g.forEach(A,I),g.has(N,"minRank")){N.borderLeft=[],N.borderRight=[];for(var B=N.minRank,k=N.maxRank+1;B<k;++B)T(y,"borderLeft","_bl",O,N,B),T(y,"borderRight","_br",O,N,B)}})}},83870:(E,W,d)=>{"use strict";var g=d(45760);function T(B){g.forEach(B.nodes(),function(k){y(B.node(k))}),g.forEach(B.edges(),function(k){y(B.edge(k))})}function y(B){var k=B.width;B.width=B.height,B.height=k}function O(B){B.y=-B.y}function N(B){var k=B.x;B.x=B.y,B.y=k}E.exports={adjust:function m(B){var k=B.graph().rankdir.toLowerCase();("lr"===k||"rl"===k)&&T(B)},undo:function S(B){var k=B.graph().rankdir.toLowerCase();("bt"===k||"rl"===k)&&function I(B){g.forEach(B.nodes(),function(k){O(B.node(k))}),g.forEach(B.edges(),function(k){var X=B.edge(k);g.forEach(X.points,O),g.has(X,"y")&&O(X)})}(B),("lr"===k||"rl"===k)&&(function A(B){g.forEach(B.nodes(),function(k){N(B.node(k))}),g.forEach(B.edges(),function(k){var X=B.edge(k);g.forEach(X.points,N),g.has(X,"x")&&N(X)})}(B),T(B))}}},3226:E=>{function W(){var m={};m._next=m._prev=m,this._sentinel=m}function d(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function g(m,S){if("_next"!==m&&"_prev"!==m)return S}E.exports=W,W.prototype.dequeue=function(){var m=this._sentinel,S=m._prev;if(S!==m)return d(S),S},W.prototype.enqueue=function(m){var S=this._sentinel;m._prev&&m._next&&d(m),m._next=S._next,S._next._prev=m,S._next=m,m._prev=S},W.prototype.toString=function(){for(var m=[],S=this._sentinel,T=S._prev;T!==S;)m.push(JSON.stringify(T,g)),T=T._prev;return"["+m.join(", ")+"]"}},71914:(E,W,d)=>{var g=d(45760),m=d(11510),S=d(36456).Graph;E.exports={debugOrdering:function T(y){var I=m.buildLayerMatrix(y),O=new S({compound:!0,multigraph:!0}).setGraph({});return g.forEach(y.nodes(),function(A){O.setNode(A,{label:A}),O.setParent(A,"layer"+y.node(A).rank)}),g.forEach(y.edges(),function(A){O.setEdge(A.v,A.w,{},A.name)}),g.forEach(I,function(A,N){O.setNode("layer"+N,{rank:"same"}),g.reduce(A,function(k,X){return O.setEdge(k,X,{style:"invis"}),X})}),O}}},36456:(E,W,d)=>{var g;try{g=d(85510)}catch(m){}g||(g=window.graphlib),E.exports=g},67365:(E,W,d)=>{var g=d(45760),m=d(36456).Graph,S=d(3226);E.exports=function y(B,k){if(B.nodeCount()<=1)return[];var X=function A(B,k){var X=new m,q=0,ue=0;g.forEach(B.nodes(),function(de){X.setNode(de,{v:de,in:0,out:0})}),g.forEach(B.edges(),function(de){var le=X.edge(de.v,de.w)||0,K=k(de);X.setEdge(de.v,de.w,le+K),ue=Math.max(ue,X.node(de.v).out+=K),q=Math.max(q,X.node(de.w).in+=K)});var r=g.range(ue+q+3).map(function(){return new S}),ae=q+1;return g.forEach(X.nodes(),function(de){N(r,ae,X.node(de))}),{graph:X,buckets:r,zeroIdx:ae}}(B,k||T),q=function I(B,k,X){for(var ae,q=[],ue=k[k.length-1],r=k[0];B.nodeCount();){for(;ae=r.dequeue();)O(B,k,X,ae);for(;ae=ue.dequeue();)O(B,k,X,ae);if(B.nodeCount())for(var de=k.length-2;de>0;--de)if(ae=k[de].dequeue()){q=q.concat(O(B,k,X,ae,!0));break}}return q}(X.graph,X.buckets,X.zeroIdx);return g.flatten(g.map(q,function(ue){return B.outEdges(ue.v,ue.w)}),!0)};var T=g.constant(1);function O(B,k,X,q,ue){var r=ue?[]:void 0;return g.forEach(B.inEdges(q.v),function(ae){var de=B.edge(ae),le=B.node(ae.v);ue&&r.push({v:ae.v,w:ae.w}),le.out-=de,N(k,X,le)}),g.forEach(B.outEdges(q.v),function(ae){var de=B.edge(ae),K=B.node(ae.w);K.in-=de,N(k,X,K)}),B.removeNode(q.v),r}function N(B,k,X){X.out?X.in?B[X.out-X.in+k].enqueue(X):B[B.length-1].enqueue(X):B[0].enqueue(X)}},14850:(E,W,d)=>{"use strict";var g=d(45760),m=d(12234),S=d(91496),T=d(94124),y=d(11510).normalizeRanks,I=d(60162),O=d(11510).removeEmptyRanks,A=d(1230),N=d(79999),B=d(83870),k=d(32974),X=d(78226),q=d(11510),ue=d(36456).Graph;E.exports=function r($e,Je){var ct=Je&&Je.debugTiming?q.time:q.notime;ct("layout",function(){var xt=ct("  buildLayoutGraph",function(){return function ze($e){var Je=new ue({multigraph:!0,compound:!0}),ct=Un($e.graph());return Je.setGraph(g.merge({},K,dr(ct,le),g.pick(ct,ge))),g.forEach($e.nodes(),function(xt){var Ot=Un($e.node(xt));Je.setNode(xt,g.defaults(dr(Ot,Se),Oe)),Je.setParent(xt,$e.parent(xt))}),g.forEach($e.edges(),function(xt){var Ot=Un($e.edge(xt));Je.setEdge(xt,g.merge({},Ge,dr(Ot,b),g.pick(Ot,at)))}),Je}($e)});ct("  runLayout",function(){!function ae($e,Je){Je("    makeSpaceForEdgeLabels",function(){!function Fe($e){var Je=$e.graph();Je.ranksep/=2,g.forEach($e.edges(),function(ct){var xt=$e.edge(ct);xt.minlen*=2,"c"!==xt.labelpos.toLowerCase()&&("TB"===Je.rankdir||"BT"===Je.rankdir?xt.width+=xt.labeloffset:xt.height+=xt.labeloffset)})}($e)}),Je("    removeSelfEdges",function(){!function Vn($e){g.forEach($e.edges(),function(Je){if(Je.v===Je.w){var ct=$e.node(Je.v);ct.selfEdges||(ct.selfEdges=[]),ct.selfEdges.push({e:Je,label:$e.edge(Je)}),$e.removeEdge(Je)}})}($e)}),Je("    acyclic",function(){m.run($e)}),Je("    nestingGraph.run",function(){A.run($e)}),Je("    rank",function(){T(q.asNonCompoundGraph($e))}),Je("    injectEdgeLabelProxies",function(){!function Ne($e){g.forEach($e.edges(),function(Je){var ct=$e.edge(Je);if(ct.width&&ct.height){var xt=$e.node(Je.v),Ot=$e.node(Je.w);q.addDummyNode($e,"edge-proxy",{rank:(Ot.rank-xt.rank)/2+xt.rank,e:Je},"_ep")}})}($e)}),Je("    removeEmptyRanks",function(){O($e)}),Je("    nestingGraph.cleanup",function(){A.cleanup($e)}),Je("    normalizeRanks",function(){y($e)}),Je("    assignRankMinMax",function(){!function tt($e){var Je=0;g.forEach($e.nodes(),function(ct){var xt=$e.node(ct);xt.borderTop&&(xt.minRank=$e.node(xt.borderTop).rank,xt.maxRank=$e.node(xt.borderBottom).rank,Je=g.max(Je,xt.maxRank))}),$e.graph().maxRank=Je}($e)}),Je("    removeEdgeLabelProxies",function(){!function Xe($e){g.forEach($e.nodes(),function(Je){var ct=$e.node(Je);"edge-proxy"===ct.dummy&&($e.edge(ct.e).labelRank=ct.rank,$e.removeNode(Je))})}($e)}),Je("    normalize.run",function(){S.run($e)}),Je("    parentDummyChains",function(){I($e)}),Je("    addBorderSegments",function(){N($e)}),Je("    order",function(){k($e)}),Je("    insertSelfEdges",function(){!function Kn($e){var Je=q.buildLayerMatrix($e);g.forEach(Je,function(ct){var xt=0;g.forEach(ct,function(Ot,ln){var Fn=$e.node(Ot);Fn.order=ln+xt,g.forEach(Fn.selfEdges,function(sr){q.addDummyNode($e,"selfedge",{width:sr.label.width,height:sr.label.height,rank:Fn.rank,order:ln+ ++xt,e:sr.e,label:sr.label},"_se")}),delete Fn.selfEdges})})}($e)}),Je("    adjustCoordinateSystem",function(){B.adjust($e)}),Je("    position",function(){X($e)}),Je("    positionSelfEdges",function(){!function Hn($e){g.forEach($e.nodes(),function(Je){var ct=$e.node(Je);if("selfedge"===ct.dummy){var xt=$e.node(ct.e.v),Ot=xt.x+xt.width/2,ln=xt.y,Fn=ct.x-Ot,sr=xt.height/2;$e.setEdge(ct.e,ct.label),$e.removeNode(Je),ct.label.points=[{x:Ot+2*Fn/3,y:ln-sr},{x:Ot+5*Fn/6,y:ln-sr},{x:Ot+Fn,y:ln},{x:Ot+5*Fn/6,y:ln+sr},{x:Ot+2*Fn/3,y:ln+sr}],ct.label.x=ct.x,ct.label.y=ct.y}})}($e)}),Je("    removeBorderNodes",function(){!function un($e){g.forEach($e.nodes(),function(Je){if($e.children(Je).length){var ct=$e.node(Je),xt=$e.node(ct.borderTop),Ot=$e.node(ct.borderBottom),ln=$e.node(g.last(ct.borderLeft)),Fn=$e.node(g.last(ct.borderRight));ct.width=Math.abs(Fn.x-ln.x),ct.height=Math.abs(Ot.y-xt.y),ct.x=ln.x+ct.width/2,ct.y=xt.y+ct.height/2}}),g.forEach($e.nodes(),function(Je){"border"===$e.node(Je).dummy&&$e.removeNode(Je)})}($e)}),Je("    normalize.undo",function(){S.undo($e)}),Je("    fixupEdgeLabelCoords",function(){!function gt($e){g.forEach($e.edges(),function(Je){var ct=$e.edge(Je);if(g.has(ct,"x"))switch(("l"===ct.labelpos||"r"===ct.labelpos)&&(ct.width-=ct.labeloffset),ct.labelpos){case"l":ct.x-=ct.width/2+ct.labeloffset;break;case"r":ct.x+=ct.width/2+ct.labeloffset}})}($e)}),Je("    undoCoordinateSystem",function(){B.undo($e)}),Je("    translateGraph",function(){!function mt($e){var Je=Number.POSITIVE_INFINITY,ct=0,xt=Number.POSITIVE_INFINITY,Ot=0,ln=$e.graph(),Fn=ln.marginx||0,sr=ln.marginy||0;function co(dn){var en=dn.x,F=dn.y,G=dn.width,re=dn.height;Je=Math.min(Je,en-G/2),ct=Math.max(ct,en+G/2),xt=Math.min(xt,F-re/2),Ot=Math.max(Ot,F+re/2)}g.forEach($e.nodes(),function(dn){co($e.node(dn))}),g.forEach($e.edges(),function(dn){var en=$e.edge(dn);g.has(en,"x")&&co(en)}),Je-=Fn,xt-=sr,g.forEach($e.nodes(),function(dn){var en=$e.node(dn);en.x-=Je,en.y-=xt}),g.forEach($e.edges(),function(dn){var en=$e.edge(dn);g.forEach(en.points,function(F){F.x-=Je,F.y-=xt}),g.has(en,"x")&&(en.x-=Je),g.has(en,"y")&&(en.y-=xt)}),ln.width=ct-Je+Fn,ln.height=Ot-xt+sr}($e)}),Je("    assignNodeIntersects",function(){!function _t($e){g.forEach($e.edges(),function(Je){var ln,Fn,ct=$e.edge(Je),xt=$e.node(Je.v),Ot=$e.node(Je.w);ct.points?(ln=ct.points[0],Fn=ct.points[ct.points.length-1]):(ct.points=[],ln=Ot,Fn=xt),ct.points.unshift(q.intersectRect(xt,ln)),ct.points.push(q.intersectRect(Ot,Fn))})}($e)}),Je("    reversePoints",function(){!function Zt($e){g.forEach($e.edges(),function(Je){var ct=$e.edge(Je);ct.reversed&&ct.points.reverse()})}($e)}),Je("    acyclic.undo",function(){m.undo($e)})}(xt,ct)}),ct("  updateInputGraph",function(){!function de($e,Je){g.forEach($e.nodes(),function(ct){var xt=$e.node(ct),Ot=Je.node(ct);xt&&(xt.x=Ot.x,xt.y=Ot.y,Je.children(ct).length&&(xt.width=Ot.width,xt.height=Ot.height))}),g.forEach($e.edges(),function(ct){var xt=$e.edge(ct),Ot=Je.edge(ct);xt.points=Ot.points,g.has(Ot,"x")&&(xt.x=Ot.x,xt.y=Ot.y)}),$e.graph().width=Je.graph().width,$e.graph().height=Je.graph().height}($e,xt)})})};var le=["nodesep","edgesep","ranksep","marginx","marginy"],K={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ge=["acyclicer","ranker","rankdir","align"],Se=["width","height"],Oe={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],Ge={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},at=["labelpos"];function dr($e,Je){return g.mapValues(g.pick($e,Je),Number)}function Un($e){var Je={};return g.forEach($e,function(ct,xt){Je[xt.toLowerCase()]=ct}),Je}},45760:(E,W,d)=>{var g;try{g={cloneDeep:d(90733),constant:d(76684),defaults:d(28800),each:d(35474),filter:d(35281),find:d(62516),flatten:d(22274),forEach:d(89851),forIn:d(41176),has:d(54842),isUndefined:d(34235),last:d(25809),map:d(19984),mapValues:d(10203),max:d(18176),merge:d(80567),min:d(29439),minBy:d(29525),now:d(31710),pick:d(16372),range:d(90361),reduce:d(81337),sortBy:d(12906),uniqueId:d(51541),values:d(90377),zipObject:d(21617)}}catch(m){}g||(g=window._),E.exports=g},1230:(E,W,d)=>{var g=d(45760),m=d(11510);function T(A,N,B,k,X,q,ue){var r=A.children(ue);if(r.length){var ae=m.addBorderNode(A,"_bt"),de=m.addBorderNode(A,"_bb"),le=A.node(ue);A.setParent(ae,ue),le.borderTop=ae,A.setParent(de,ue),le.borderBottom=de,g.forEach(r,function(K){T(A,N,B,k,X,q,K);var ge=A.node(K),Se=ge.borderTop?ge.borderTop:K,Oe=ge.borderBottom?ge.borderBottom:K,b=ge.borderTop?k:2*k,Ge=Se!==Oe?1:X-q[ue]+1;A.setEdge(ae,Se,{weight:b,minlen:Ge,nestingEdge:!0}),A.setEdge(Oe,de,{weight:b,minlen:Ge,nestingEdge:!0})}),A.parent(ue)||A.setEdge(N,ae,{weight:0,minlen:X+q[ue]})}else ue!==N&&A.setEdge(N,ue,{weight:0,minlen:B})}E.exports={run:function S(A){var N=m.addDummyNode(A,"root",{},"_root"),B=function y(A){var N={};function B(k,X){var q=A.children(k);q&&q.length&&g.forEach(q,function(ue){B(ue,X+1)}),N[k]=X}return g.forEach(A.children(),function(k){B(k,1)}),N}(A),k=g.max(g.values(B))-1,X=2*k+1;A.graph().nestingRoot=N,g.forEach(A.edges(),function(ue){A.edge(ue).minlen*=X});var q=function I(A){return g.reduce(A.edges(),function(N,B){return N+A.edge(B).weight},0)}(A)+1;g.forEach(A.children(),function(ue){T(A,N,X,q,k,B,ue)}),A.graph().nodeRankFactor=X},cleanup:function O(A){var N=A.graph();A.removeNode(N.nestingRoot),delete N.nestingRoot,g.forEach(A.edges(),function(B){A.edge(B).nestingEdge&&A.removeEdge(B)})}}},91496:(E,W,d)=>{"use strict";var g=d(45760),m=d(11510);E.exports={run:function S(I){I.graph().dummyChains=[],g.forEach(I.edges(),function(O){!function T(I,O){var A=O.v,N=I.node(A).rank,B=O.w,k=I.node(B).rank,X=O.name,q=I.edge(O),ue=q.labelRank;if(k!==N+1){var r,ae,de;for(I.removeEdge(O),de=0,++N;N<k;++de,++N)q.points=[],r=m.addDummyNode(I,"edge",ae={width:0,height:0,edgeLabel:q,edgeObj:O,rank:N},"_d"),N===ue&&(ae.width=q.width,ae.height=q.height,ae.dummy="edge-label",ae.labelpos=q.labelpos),I.setEdge(A,r,{weight:q.weight},X),0===de&&I.graph().dummyChains.push(r),A=r;I.setEdge(A,B,{weight:q.weight},X)}}(I,O)})},undo:function y(I){g.forEach(I.graph().dummyChains,function(O){var B,A=I.node(O),N=A.edgeLabel;for(I.setEdge(A.edgeObj,N);A.dummy;)B=I.successors(O)[0],I.removeNode(O),N.points.push({x:A.x,y:A.y}),"edge-label"===A.dummy&&(N.x=A.x,N.y=A.y,N.width=A.width,N.height=A.height),A=I.node(O=B)})}}},33034:(E,W,d)=>{var g=d(45760);E.exports=function m(S,T,y){var O,I={};g.forEach(y,function(A){for(var B,k,N=S.parent(A);N;){if((B=S.parent(N))?(k=I[B],I[B]=N):(k=O,O=N),k&&k!==N)return void T.setEdge(k,N);N=B}})}},81323:(E,W,d)=>{var g=d(45760);E.exports=function m(S,T){return g.map(T,function(y){var I=S.inEdges(y);if(I.length){var O=g.reduce(I,function(A,N){var B=S.edge(N),k=S.node(N.v);return{sum:A.sum+B.weight*k.order,weight:A.weight+B.weight}},{sum:0,weight:0});return{v:y,barycenter:O.sum/O.weight,weight:O.weight}}return{v:y}})}},1686:(E,W,d)=>{var g=d(45760),m=d(36456).Graph;E.exports=function S(y,I,O){var A=function T(y){for(var I;y.hasNode(I=g.uniqueId("_root")););return I}(y),N=new m({compound:!0}).setGraph({root:A}).setDefaultNodeLabel(function(B){return y.node(B)});return g.forEach(y.nodes(),function(B){var k=y.node(B),X=y.parent(B);(k.rank===I||k.minRank<=I&&I<=k.maxRank)&&(N.setNode(B),N.setParent(B,X||A),g.forEach(y[O](B),function(q){var ue=q.v===B?q.w:q.v,r=N.edge(ue,B),ae=g.isUndefined(r)?0:r.weight;N.setEdge(ue,B,{weight:y.edge(q).weight+ae})}),g.has(k,"minRank")&&N.setNode(B,{borderLeft:k.borderLeft[I],borderRight:k.borderRight[I]}))}),N}},18796:(E,W,d)=>{"use strict";var g=d(45760);function S(T,y,I){for(var O=g.zipObject(I,g.map(I,function(q,ue){return ue})),A=g.flatten(g.map(y,function(q){return g.sortBy(g.map(T.outEdges(q),function(ue){return{pos:O[ue.w],weight:T.edge(ue).weight}}),"pos")}),!0),N=1;N<I.length;)N<<=1;var B=2*N-1;N-=1;var k=g.map(new Array(B),function(){return 0}),X=0;return g.forEach(A.forEach(function(q){var ue=q.pos+N;k[ue]+=q.weight;for(var r=0;ue>0;)ue%2&&(r+=k[ue+1]),k[ue=ue-1>>1]+=q.weight;X+=q.weight*r})),X}E.exports=function m(T,y){for(var I=0,O=1;O<y.length;++O)I+=S(T,y[O-1],y[O]);return I}},32974:(E,W,d)=>{"use strict";var g=d(45760),m=d(49402),S=d(18796),T=d(61057),y=d(1686),I=d(33034),O=d(36456).Graph,A=d(11510);function B(q,ue,r){return g.map(ue,function(ae){return y(q,ae,r)})}function k(q,ue){var r=new O;g.forEach(q,function(ae){var de=ae.graph().root,le=T(ae,de,r,ue);g.forEach(le.vs,function(K,ge){ae.node(K).order=ge}),I(ae,r,le.vs)})}function X(q,ue){g.forEach(ue,function(r){g.forEach(r,function(ae,de){q.node(ae).order=de})})}E.exports=function N(q){var ue=A.maxRank(q),r=B(q,g.range(1,ue+1),"inEdges"),ae=B(q,g.range(ue-1,-1,-1),"outEdges"),de=m(q);X(q,de);for(var K,le=Number.POSITIVE_INFINITY,ge=0,Se=0;Se<4;++ge,++Se){k(ge%2?r:ae,ge%4>=2),de=A.buildLayerMatrix(q);var Oe=S(q,de);Oe<le&&(Se=0,K=g.cloneDeep(de),le=Oe)}X(q,K)}},49402:(E,W,d)=>{"use strict";var g=d(45760);E.exports=function m(S){var T={},y=g.filter(S.nodes(),function(B){return!S.children(B).length}),I=g.max(g.map(y,function(B){return S.node(B).rank})),O=g.map(g.range(I+1),function(){return[]}),N=g.sortBy(y,function(B){return S.node(B).rank});return g.forEach(N,function A(B){if(!g.has(T,B)){T[B]=!0;var k=S.node(B);O[k.rank].push(B),g.forEach(S.successors(B),A)}}),O}},83826:(E,W,d)=>{"use strict";var g=d(45760);E.exports=function m(y,I){var O={};return g.forEach(y,function(N,B){var k=O[N.v]={indegree:0,in:[],out:[],vs:[N.v],i:B};g.isUndefined(N.barycenter)||(k.barycenter=N.barycenter,k.weight=N.weight)}),g.forEach(I.edges(),function(N){var B=O[N.v],k=O[N.w];!g.isUndefined(B)&&!g.isUndefined(k)&&(k.indegree++,B.out.push(O[N.w]))}),function S(y){var I=[];function O(B){return function(k){k.merged||(g.isUndefined(k.barycenter)||g.isUndefined(B.barycenter)||k.barycenter>=B.barycenter)&&function T(y,I){var O=0,A=0;y.weight&&(O+=y.barycenter*y.weight,A+=y.weight),I.weight&&(O+=I.barycenter*I.weight,A+=I.weight),y.vs=I.vs.concat(y.vs),y.barycenter=O/A,y.weight=A,y.i=Math.min(I.i,y.i),I.merged=!0}(B,k)}}function A(B){return function(k){k.in.push(B),0==--k.indegree&&y.push(k)}}for(;y.length;){var N=y.pop();I.push(N),g.forEach(N.in.reverse(),O(N)),g.forEach(N.out,A(N))}return g.map(g.filter(I,function(B){return!B.merged}),function(B){return g.pick(B,["vs","i","barycenter","weight"])})}(g.filter(O,function(N){return!N.indegree}))}},61057:(E,W,d)=>{var g=d(45760),m=d(81323),S=d(83826),T=d(93803);E.exports=function y(A,N,B,k){var X=A.children(N),q=A.node(N),ue=q?q.borderLeft:void 0,r=q?q.borderRight:void 0,ae={};ue&&(X=g.filter(X,function(Oe){return Oe!==ue&&Oe!==r}));var de=m(A,X);g.forEach(de,function(Oe){if(A.children(Oe.v).length){var b=y(A,Oe.v,B,k);ae[Oe.v]=b,g.has(b,"barycenter")&&function O(A,N){g.isUndefined(A.barycenter)?(A.barycenter=N.barycenter,A.weight=N.weight):(A.barycenter=(A.barycenter*A.weight+N.barycenter*N.weight)/(A.weight+N.weight),A.weight+=N.weight)}(Oe,b)}});var le=S(de,B);!function I(A,N){g.forEach(A,function(B){B.vs=g.flatten(B.vs.map(function(k){return N[k]?N[k].vs:k}),!0)})}(le,ae);var K=T(le,k);if(ue&&(K.vs=g.flatten([ue,K.vs,r],!0),A.predecessors(ue).length)){var ge=A.node(A.predecessors(ue)[0]),Se=A.node(A.predecessors(r)[0]);g.has(K,"barycenter")||(K.barycenter=0,K.weight=0),K.barycenter=(K.barycenter*K.weight+ge.order+Se.order)/(K.weight+2),K.weight+=2}return K}},93803:(E,W,d)=>{var g=d(45760),m=d(11510);function T(I,O,A){for(var N;O.length&&(N=g.last(O)).i<=A;)O.pop(),I.push(N.vs),A++;return A}E.exports=function S(I,O){var A=m.partition(I,function(ae){return g.has(ae,"barycenter")}),N=A.lhs,B=g.sortBy(A.rhs,function(ae){return-ae.i}),k=[],X=0,q=0,ue=0;N.sort(function y(I){return function(O,A){return O.barycenter<A.barycenter?-1:O.barycenter>A.barycenter?1:I?A.i-O.i:O.i-A.i}}(!!O)),ue=T(k,B,ue),g.forEach(N,function(ae){ue+=ae.vs.length,k.push(ae.vs),X+=ae.barycenter*ae.weight,q+=ae.weight,ue=T(k,B,ue)});var r={vs:g.flatten(k,!0)};return q&&(r.barycenter=X/q,r.weight=q),r}},60162:(E,W,d)=>{var g=d(45760);E.exports=function m(y){var I=function T(y){var I={},O=0;return g.forEach(y.children(),function A(N){var B=O;g.forEach(y.children(N),A),I[N]={low:B,lim:O++}}),I}(y);g.forEach(y.graph().dummyChains,function(O){for(var A=y.node(O),N=A.edgeObj,B=function S(y,I,O,A){var q,ue,N=[],B=[],k=Math.min(I[O].low,I[A].low),X=Math.max(I[O].lim,I[A].lim);q=O;do{q=y.parent(q),N.push(q)}while(q&&(I[q].low>k||X>I[q].lim));for(ue=q,q=A;(q=y.parent(q))!==ue;)B.push(q);return{path:N.concat(B.reverse()),lca:ue}}(y,I,N.v,N.w),k=B.path,X=B.lca,q=0,ue=k[q],r=!0;O!==N.w;){if(A=y.node(O),r){for(;(ue=k[q])!==X&&y.node(ue).maxRank<A.rank;)q++;ue===X&&(r=!1)}if(!r){for(;q<k.length-1&&y.node(ue=k[q+1]).minRank<=A.rank;)q++;ue=k[q]}y.setParent(O,ue),O=y.successors(O)[0]}})}},54058:(E,W,d)=>{"use strict";var g=d(45760),m=d(36456).Graph,S=d(11510);function T(le,K){var ge={};return g.reduce(K,function Se(Oe,b){var Ge=0,at=0,ze=Oe.length,Fe=g.last(b);return g.forEach(b,function(Ne,tt){var Xe=function I(le,K){if(le.node(K).dummy)return g.find(le.predecessors(K),function(ge){return le.node(ge).dummy})}(le,Ne),mt=Xe?le.node(Xe).order:ze;(Xe||Ne===Fe)&&(g.forEach(b.slice(at,tt+1),function(_t){g.forEach(le.predecessors(_t),function(gt){var Zt=le.node(gt),un=Zt.order;(un<Ge||mt<un)&&(!Zt.dummy||!le.node(_t).dummy)&&O(ge,gt,_t)})}),at=tt+1,Ge=mt)}),b}),ge}function y(le,K){var ge={};function Se(b,Ge,at,ze,Fe){var Ne;g.forEach(g.range(Ge,at),function(tt){le.node(Ne=b[tt]).dummy&&g.forEach(le.predecessors(Ne),function(Xe){var mt=le.node(Xe);mt.dummy&&(mt.order<ze||mt.order>Fe)&&O(ge,Xe,Ne)})})}return g.reduce(K,function Oe(b,Ge){var ze,at=-1,Fe=0;return g.forEach(Ge,function(Ne,tt){if("border"===le.node(Ne).dummy){var Xe=le.predecessors(Ne);Xe.length&&(ze=le.node(Xe[0]).order,Se(Ge,Fe,tt,at,ze),Fe=tt,at=ze)}Se(Ge,Fe,Ge.length,ze,b.length)}),Ge}),ge}function O(le,K,ge){if(K>ge){var Se=K;K=ge,ge=Se}var Oe=le[K];Oe||(le[K]=Oe={}),Oe[ge]=!0}function A(le,K,ge){if(K>ge){var Se=K;K=ge,ge=Se}return g.has(le[K],ge)}function N(le,K,ge,Se){var Oe={},b={},Ge={};return g.forEach(K,function(at){g.forEach(at,function(ze,Fe){Oe[ze]=ze,b[ze]=ze,Ge[ze]=Fe})}),g.forEach(K,function(at){var ze=-1;g.forEach(at,function(Fe){var Ne=Se(Fe);if(Ne.length)for(var tt=((Ne=g.sortBy(Ne,function(gt){return Ge[gt]})).length-1)/2,Xe=Math.floor(tt),mt=Math.ceil(tt);Xe<=mt;++Xe){var _t=Ne[Xe];b[Fe]===Fe&&ze<Ge[_t]&&!A(ge,Fe,_t)&&(b[_t]=Fe,b[Fe]=Oe[Fe]=Oe[_t],ze=Ge[_t])}})}),{root:Oe,align:b}}function B(le,K,ge,Se,Oe){var b={},Ge=function k(le,K,ge,Se){var Oe=new m,b=le.graph(),Ge=function ae(le,K,ge){return function(Se,Oe,b){var Fe,Ge=Se.node(Oe),at=Se.node(b),ze=0;if(ze+=Ge.width/2,g.has(Ge,"labelpos"))switch(Ge.labelpos.toLowerCase()){case"l":Fe=-Ge.width/2;break;case"r":Fe=Ge.width/2}if(Fe&&(ze+=ge?Fe:-Fe),Fe=0,ze+=(Ge.dummy?K:le)/2,ze+=(at.dummy?K:le)/2,ze+=at.width/2,g.has(at,"labelpos"))switch(at.labelpos.toLowerCase()){case"l":Fe=at.width/2;break;case"r":Fe=-at.width/2}return Fe&&(ze+=ge?Fe:-Fe),Fe=0,ze}}(b.nodesep,b.edgesep,Se);return g.forEach(K,function(at){var ze;g.forEach(at,function(Fe){var Ne=ge[Fe];if(Oe.setNode(Ne),ze){var tt=ge[ze],Xe=Oe.edge(tt,Ne);Oe.setEdge(tt,Ne,Math.max(Ge(le,Fe,ze),Xe||0))}ze=Fe})}),Oe}(le,K,ge,Oe),at=Oe?"borderLeft":"borderRight";function ze(tt,Xe){for(var mt=Ge.nodes(),_t=mt.pop(),gt={};_t;)gt[_t]?tt(_t):(gt[_t]=!0,mt.push(_t),mt=mt.concat(Xe(_t))),_t=mt.pop()}return ze(function Fe(tt){b[tt]=Ge.inEdges(tt).reduce(function(Xe,mt){return Math.max(Xe,b[mt.v]+Ge.edge(mt))},0)},Ge.predecessors.bind(Ge)),ze(function Ne(tt){var Xe=Ge.outEdges(tt).reduce(function(_t,gt){return Math.min(_t,b[gt.w]-Ge.edge(gt))},Number.POSITIVE_INFINITY),mt=le.node(tt);Xe!==Number.POSITIVE_INFINITY&&mt.borderType!==at&&(b[tt]=Math.max(b[tt],Xe))},Ge.successors.bind(Ge)),g.forEach(Se,function(tt){b[tt]=b[ge[tt]]}),b}function X(le,K){return g.minBy(g.values(K),function(ge){var Se=Number.NEGATIVE_INFINITY,Oe=Number.POSITIVE_INFINITY;return g.forIn(ge,function(b,Ge){var at=function de(le,K){return le.node(K).width}(le,Ge)/2;Se=Math.max(b+at,Se),Oe=Math.min(b-at,Oe)}),Se-Oe})}function q(le,K){var ge=g.values(K),Se=g.min(ge),Oe=g.max(ge);g.forEach(["u","d"],function(b){g.forEach(["l","r"],function(Ge){var Fe,at=b+Ge,ze=le[at];if(ze!==K){var Ne=g.values(ze);(Fe="l"===Ge?Se-g.min(Ne):Oe-g.max(Ne))&&(le[at]=g.mapValues(ze,function(tt){return tt+Fe}))}})})}function ue(le,K){return g.mapValues(le.ul,function(ge,Se){if(K)return le[K.toLowerCase()][Se];var Oe=g.sortBy(g.map(le,Se));return(Oe[1]+Oe[2])/2})}E.exports={positionX:function r(le){var Oe,K=S.buildLayerMatrix(le),ge=g.merge(T(le,K),y(le,K)),Se={};g.forEach(["u","d"],function(Ge){Oe="u"===Ge?K:g.values(K).reverse(),g.forEach(["l","r"],function(at){"r"===at&&(Oe=g.map(Oe,function(tt){return g.values(tt).reverse()}));var ze=("u"===Ge?le.predecessors:le.successors).bind(le),Fe=N(0,Oe,ge,ze),Ne=B(le,Oe,Fe.root,Fe.align,"r"===at);"r"===at&&(Ne=g.mapValues(Ne,function(tt){return-tt})),Se[Ge+at]=Ne})});var b=X(le,Se);return q(Se,b),ue(Se,le.graph().align)},findType1Conflicts:T,findType2Conflicts:y,addConflict:O,hasConflict:A,verticalAlignment:N,horizontalCompaction:B,alignCoordinates:q,findSmallestWidthAlignment:X,balance:ue}},78226:(E,W,d)=>{"use strict";var g=d(45760),m=d(11510),S=d(54058).positionX;E.exports=function T(I){(function y(I){var O=m.buildLayerMatrix(I),A=I.graph().ranksep,N=0;g.forEach(O,function(B){var k=g.max(g.map(B,function(X){return I.node(X).height}));g.forEach(B,function(X){I.node(X).y=N+k/2}),N+=k+A})})(I=m.asNonCompoundGraph(I)),g.forEach(S(I),function(O,A){I.node(A).x=O})}},96632:(E,W,d)=>{"use strict";var g=d(45760),m=d(36456).Graph,S=d(1916).slack;function y(A,N){return g.forEach(A.nodes(),function B(k){g.forEach(N.nodeEdges(k),function(X){var q=X.v,ue=k===q?X.w:q;!A.hasNode(ue)&&!S(N,X)&&(A.setNode(ue,{}),A.setEdge(k,ue,{}),B(ue))})}),A.nodeCount()}function I(A,N){return g.minBy(N.edges(),function(B){if(A.hasNode(B.v)!==A.hasNode(B.w))return S(N,B)})}function O(A,N,B){g.forEach(A.nodes(),function(k){N.node(k).rank+=B})}E.exports=function T(A){var X,q,N=new m({directed:!1}),B=A.nodes()[0],k=A.nodeCount();for(N.setNode(B,{});y(N,A)<k;)X=I(N,A),q=N.hasNode(X.v)?S(A,X):-S(A,X),O(N,A,q);return N}},94124:(E,W,d)=>{"use strict";var m=d(1916).longestPath,S=d(96632),T=d(63804);E.exports=function y(N){switch(N.graph().ranker){case"network-simplex":default:!function A(N){T(N)}(N);break;case"tight-tree":!function O(N){m(N),S(N)}(N);break;case"longest-path":I(N)}};var I=m},63804:(E,W,d)=>{"use strict";var g=d(45760),m=d(96632),S=d(1916).slack,T=d(1916).longestPath,y=d(36456).alg.preorder,I=d(36456).alg.postorder,O=d(11510).simplify;function A(ge){ge=O(ge),T(ge);var Oe,Se=m(ge);for(X(Se),N(Se,ge);Oe=ue(Se);)ae(Se,ge,Oe,r(Se,ge,Oe))}function N(ge,Se){var Oe=I(ge,ge.nodes());Oe=Oe.slice(0,Oe.length-1),g.forEach(Oe,function(b){!function B(ge,Se,Oe){var b=ge.node(Oe);ge.edge(Oe,b.parent).cutvalue=k(ge,Se,Oe)}(ge,Se,b)})}function k(ge,Se,Oe){var Ge=ge.node(Oe).parent,at=!0,ze=Se.edge(Oe,Ge),Fe=0;return ze||(at=!1,ze=Se.edge(Ge,Oe)),Fe=ze.weight,g.forEach(Se.nodeEdges(Oe),function(Ne){var tt=Ne.v===Oe,Xe=tt?Ne.w:Ne.v;if(Xe!==Ge){var mt=tt===at,_t=Se.edge(Ne).weight;if(Fe+=mt?_t:-_t,function le(ge,Se,Oe){return ge.hasEdge(Se,Oe)}(ge,Oe,Xe)){var gt=ge.edge(Oe,Xe).cutvalue;Fe+=mt?-gt:gt}}}),Fe}function X(ge,Se){arguments.length<2&&(Se=ge.nodes()[0]),q(ge,{},1,Se)}function q(ge,Se,Oe,b,Ge){var at=Oe,ze=ge.node(b);return Se[b]=!0,g.forEach(ge.neighbors(b),function(Fe){g.has(Se,Fe)||(Oe=q(ge,Se,Oe,Fe,b))}),ze.low=at,ze.lim=Oe++,Ge?ze.parent=Ge:delete ze.parent,Oe}function ue(ge){return g.find(ge.edges(),function(Se){return ge.edge(Se).cutvalue<0})}function r(ge,Se,Oe){var b=Oe.v,Ge=Oe.w;Se.hasEdge(b,Ge)||(b=Oe.w,Ge=Oe.v);var at=ge.node(b),ze=ge.node(Ge),Fe=at,Ne=!1;at.lim>ze.lim&&(Fe=ze,Ne=!0);var tt=g.filter(Se.edges(),function(Xe){return Ne===K(0,ge.node(Xe.v),Fe)&&Ne!==K(0,ge.node(Xe.w),Fe)});return g.minBy(tt,function(Xe){return S(Se,Xe)})}function ae(ge,Se,Oe,b){ge.removeEdge(Oe.v,Oe.w),ge.setEdge(b.v,b.w,{}),X(ge),N(ge,Se),function de(ge,Se){var Oe=g.find(ge.nodes(),function(Ge){return!Se.node(Ge).parent}),b=y(ge,Oe);b=b.slice(1),g.forEach(b,function(Ge){var at=ge.node(Ge).parent,ze=Se.edge(Ge,at),Fe=!1;ze||(ze=Se.edge(at,Ge),Fe=!0),Se.node(Ge).rank=Se.node(at).rank+(Fe?ze.minlen:-ze.minlen)})}(ge,Se)}function K(ge,Se,Oe){return Oe.low<=Se.lim&&Se.lim<=Oe.lim}E.exports=A,A.initLowLimValues=X,A.initCutValues=N,A.calcCutValue=k,A.leaveEdge=ue,A.enterEdge=r,A.exchangeEdges=ae},1916:(E,W,d)=>{"use strict";var g=d(45760);E.exports={longestPath:function m(T){var y={};g.forEach(T.sources(),function I(O){var A=T.node(O);if(g.has(y,O))return A.rank;y[O]=!0;var N=g.min(g.map(T.outEdges(O),function(B){return I(B.w)-T.edge(B).minlen}));return(N===Number.POSITIVE_INFINITY||null==N)&&(N=0),A.rank=N})},slack:function S(T,y){return T.node(y.w).rank-T.node(y.v).rank-T.edge(y).minlen}}},11510:(E,W,d)=>{"use strict";var g=d(45760),m=d(36456).Graph;function S(de,le,K,ge){var Se;do{Se=g.uniqueId(ge)}while(de.hasNode(Se));return K.dummy=le,de.setNode(Se,K),Se}function q(de){return g.max(g.map(de.nodes(),function(le){var K=de.node(le).rank;if(!g.isUndefined(K))return K}))}E.exports={addDummyNode:S,simplify:function T(de){var le=(new m).setGraph(de.graph());return g.forEach(de.nodes(),function(K){le.setNode(K,de.node(K))}),g.forEach(de.edges(),function(K){var ge=le.edge(K.v,K.w)||{weight:0,minlen:1},Se=de.edge(K);le.setEdge(K.v,K.w,{weight:ge.weight+Se.weight,minlen:Math.max(ge.minlen,Se.minlen)})}),le},asNonCompoundGraph:function y(de){var le=new m({multigraph:de.isMultigraph()}).setGraph(de.graph());return g.forEach(de.nodes(),function(K){de.children(K).length||le.setNode(K,de.node(K))}),g.forEach(de.edges(),function(K){le.setEdge(K,de.edge(K))}),le},successorWeights:function I(de){var le=g.map(de.nodes(),function(K){var ge={};return g.forEach(de.outEdges(K),function(Se){ge[Se.w]=(ge[Se.w]||0)+de.edge(Se).weight}),ge});return g.zipObject(de.nodes(),le)},predecessorWeights:function O(de){var le=g.map(de.nodes(),function(K){var ge={};return g.forEach(de.inEdges(K),function(Se){ge[Se.v]=(ge[Se.v]||0)+de.edge(Se).weight}),ge});return g.zipObject(de.nodes(),le)},intersectRect:function A(de,le){var at,ze,K=de.x,ge=de.y,Se=le.x-K,Oe=le.y-ge,b=de.width/2,Ge=de.height/2;if(!Se&&!Oe)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Oe)*b>Math.abs(Se)*Ge?(Oe<0&&(Ge=-Ge),at=Ge*Se/Oe,ze=Ge):(Se<0&&(b=-b),at=b,ze=b*Oe/Se),{x:K+at,y:ge+ze}},buildLayerMatrix:function N(de){var le=g.map(g.range(q(de)+1),function(){return[]});return g.forEach(de.nodes(),function(K){var ge=de.node(K),Se=ge.rank;g.isUndefined(Se)||(le[Se][ge.order]=K)}),le},normalizeRanks:function B(de){var le=g.min(g.map(de.nodes(),function(K){return de.node(K).rank}));g.forEach(de.nodes(),function(K){var ge=de.node(K);g.has(ge,"rank")&&(ge.rank-=le)})},removeEmptyRanks:function k(de){var le=g.min(g.map(de.nodes(),function(Oe){return de.node(Oe).rank})),K=[];g.forEach(de.nodes(),function(Oe){var b=de.node(Oe).rank-le;K[b]||(K[b]=[]),K[b].push(Oe)});var ge=0,Se=de.graph().nodeRankFactor;g.forEach(K,function(Oe,b){g.isUndefined(Oe)&&b%Se!=0?--ge:ge&&g.forEach(Oe,function(Ge){de.node(Ge).rank+=ge})})},addBorderNode:function X(de,le,K,ge){var Se={width:0,height:0};return arguments.length>=4&&(Se.rank=K,Se.order=ge),S(de,"border",Se,le)},maxRank:q,partition:function ue(de,le){var K={lhs:[],rhs:[]};return g.forEach(de,function(ge){le(ge)?K.lhs.push(ge):K.rhs.push(ge)}),K},time:function r(de,le){var K=g.now();try{return le()}finally{console.log(de+" time: "+(g.now()-K)+"ms")}},notime:function ae(de,le){return le()}}},28126:E=>{E.exports="0.8.5"},71764:function(E){E.exports=function(){"use strict";var d=6e4,g=36e5,m="millisecond",S="second",T="minute",y="hour",I="day",O="week",A="month",N="quarter",B="year",k="date",X="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,r={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ze){var Fe=["th","st","nd","rd"],Ne=ze%100;return"["+ze+(Fe[(Ne-20)%10]||Fe[Ne]||Fe[0])+"]"}},ae=function(ze,Fe,Ne){var tt=String(ze);return!tt||tt.length>=Fe?ze:""+Array(Fe+1-tt.length).join(Ne)+ze},de={s:ae,z:function(ze){var Fe=-ze.utcOffset(),Ne=Math.abs(Fe),tt=Math.floor(Ne/60),Xe=Ne%60;return(Fe<=0?"+":"-")+ae(tt,2,"0")+":"+ae(Xe,2,"0")},m:function ze(Fe,Ne){if(Fe.date()<Ne.date())return-ze(Ne,Fe);var tt=12*(Ne.year()-Fe.year())+(Ne.month()-Fe.month()),Xe=Fe.clone().add(tt,A),mt=Ne-Xe<0,_t=Fe.clone().add(tt+(mt?-1:1),A);return+(-(tt+(Ne-Xe)/(mt?Xe-_t:_t-Xe))||0)},a:function(ze){return ze<0?Math.ceil(ze)||0:Math.floor(ze)},p:function(ze){return{M:A,y:B,w:O,d:I,D:k,h:y,m:T,s:S,ms:m,Q:N}[ze]||String(ze||"").toLowerCase().replace(/s$/,"")},u:function(ze){return void 0===ze}},le="en",K={};K[le]=r;var ge=function(ze){return ze instanceof Ge},Se=function ze(Fe,Ne,tt){var Xe;if(!Fe)return le;if("string"==typeof Fe){var mt=Fe.toLowerCase();K[mt]&&(Xe=mt),Ne&&(K[mt]=Ne,Xe=mt);var _t=Fe.split("-");if(!Xe&&_t.length>1)return ze(_t[0])}else{var gt=Fe.name;K[gt]=Fe,Xe=gt}return!tt&&Xe&&(le=Xe),Xe||!tt&&le},Oe=function(ze,Fe){if(ge(ze))return ze.clone();var Ne="object"==typeof Fe?Fe:{};return Ne.date=ze,Ne.args=arguments,new Ge(Ne)},b=de;b.l=Se,b.i=ge,b.w=function(ze,Fe){return Oe(ze,{locale:Fe.$L,utc:Fe.$u,x:Fe.$x,$offset:Fe.$offset})};var Ge=function(){function ze(Ne){this.$L=Se(Ne.locale,null,!0),this.parse(Ne)}var Fe=ze.prototype;return Fe.parse=function(Ne){this.$d=function(tt){var Xe=tt.date,mt=tt.utc;if(null===Xe)return new Date(NaN);if(b.u(Xe))return new Date;if(Xe instanceof Date)return new Date(Xe);if("string"==typeof Xe&&!/Z$/i.test(Xe)){var _t=Xe.match(q);if(_t){var gt=_t[2]-1||0,Zt=(_t[7]||"0").substring(0,3);return mt?new Date(Date.UTC(_t[1],gt,_t[3]||1,_t[4]||0,_t[5]||0,_t[6]||0,Zt)):new Date(_t[1],gt,_t[3]||1,_t[4]||0,_t[5]||0,_t[6]||0,Zt)}}return new Date(Xe)}(Ne),this.$x=Ne.x||{},this.init()},Fe.init=function(){var Ne=this.$d;this.$y=Ne.getFullYear(),this.$M=Ne.getMonth(),this.$D=Ne.getDate(),this.$W=Ne.getDay(),this.$H=Ne.getHours(),this.$m=Ne.getMinutes(),this.$s=Ne.getSeconds(),this.$ms=Ne.getMilliseconds()},Fe.$utils=function(){return b},Fe.isValid=function(){return this.$d.toString()!==X},Fe.isSame=function(Ne,tt){var Xe=Oe(Ne);return this.startOf(tt)<=Xe&&Xe<=this.endOf(tt)},Fe.isAfter=function(Ne,tt){return Oe(Ne)<this.startOf(tt)},Fe.isBefore=function(Ne,tt){return this.endOf(tt)<Oe(Ne)},Fe.$g=function(Ne,tt,Xe){return b.u(Ne)?this[tt]:this.set(Xe,Ne)},Fe.unix=function(){return Math.floor(this.valueOf()/1e3)},Fe.valueOf=function(){return this.$d.getTime()},Fe.startOf=function(Ne,tt){var Xe=this,mt=!!b.u(tt)||tt,_t=b.p(Ne),gt=function($e,Je){var ct=b.w(Xe.$u?Date.UTC(Xe.$y,Je,$e):new Date(Xe.$y,Je,$e),Xe);return mt?ct:ct.endOf(I)},Zt=function($e,Je){return b.w(Xe.toDate()[$e].apply(Xe.toDate("s"),(mt?[0,0,0,0]:[23,59,59,999]).slice(Je)),Xe)},un=this.$W,Vn=this.$M,Kn=this.$D,Hn="set"+(this.$u?"UTC":"");switch(_t){case B:return mt?gt(1,0):gt(31,11);case A:return mt?gt(1,Vn):gt(0,Vn+1);case O:var dr=this.$locale().weekStart||0,Un=(un<dr?un+7:un)-dr;return gt(mt?Kn-Un:Kn+(6-Un),Vn);case I:case k:return Zt(Hn+"Hours",0);case y:return Zt(Hn+"Minutes",1);case T:return Zt(Hn+"Seconds",2);case S:return Zt(Hn+"Milliseconds",3);default:return this.clone()}},Fe.endOf=function(Ne){return this.startOf(Ne,!1)},Fe.$set=function(Ne,tt){var Xe,mt=b.p(Ne),_t="set"+(this.$u?"UTC":""),gt=(Xe={},Xe[I]=_t+"Date",Xe[k]=_t+"Date",Xe[A]=_t+"Month",Xe[B]=_t+"FullYear",Xe[y]=_t+"Hours",Xe[T]=_t+"Minutes",Xe[S]=_t+"Seconds",Xe[m]=_t+"Milliseconds",Xe)[mt],Zt=mt===I?this.$D+(tt-this.$W):tt;if(mt===A||mt===B){var un=this.clone().set(k,1);un.$d[gt](Zt),un.init(),this.$d=un.set(k,Math.min(this.$D,un.daysInMonth())).$d}else gt&&this.$d[gt](Zt);return this.init(),this},Fe.set=function(Ne,tt){return this.clone().$set(Ne,tt)},Fe.get=function(Ne){return this[b.p(Ne)]()},Fe.add=function(Ne,tt){var Xe,mt=this;Ne=Number(Ne);var _t=b.p(tt),gt=function(Vn){var Kn=Oe(mt);return b.w(Kn.date(Kn.date()+Math.round(Vn*Ne)),mt)};if(_t===A)return this.set(A,this.$M+Ne);if(_t===B)return this.set(B,this.$y+Ne);if(_t===I)return gt(1);if(_t===O)return gt(7);var Zt=(Xe={},Xe[T]=d,Xe[y]=g,Xe[S]=1e3,Xe)[_t]||1,un=this.$d.getTime()+Ne*Zt;return b.w(un,this)},Fe.subtract=function(Ne,tt){return this.add(-1*Ne,tt)},Fe.format=function(Ne){var tt=this,Xe=this.$locale();if(!this.isValid())return Xe.invalidDate||X;var mt=Ne||"YYYY-MM-DDTHH:mm:ssZ",_t=b.z(this),gt=this.$H,Zt=this.$m,un=this.$M,Vn=Xe.weekdays,Kn=Xe.months,Hn=function(Je,ct,xt,Ot){return Je&&(Je[ct]||Je(tt,mt))||xt[ct].slice(0,Ot)},dr=function(Je){return b.s(gt%12||12,Je,"0")},Un=Xe.meridiem||function(Je,ct,xt){var Ot=Je<12?"AM":"PM";return xt?Ot.toLowerCase():Ot},$e={YY:String(this.$y).slice(-2),YYYY:this.$y,M:un+1,MM:b.s(un+1,2,"0"),MMM:Hn(Xe.monthsShort,un,Kn,3),MMMM:Hn(Kn,un),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:Hn(Xe.weekdaysMin,this.$W,Vn,2),ddd:Hn(Xe.weekdaysShort,this.$W,Vn,3),dddd:Vn[this.$W],H:String(gt),HH:b.s(gt,2,"0"),h:dr(1),hh:dr(2),a:Un(gt,Zt,!0),A:Un(gt,Zt,!1),m:String(Zt),mm:b.s(Zt,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:_t};return mt.replace(ue,function(Je,ct){return ct||$e[Je]||_t.replace(":","")})},Fe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Fe.diff=function(Ne,tt,Xe){var mt,_t=b.p(tt),gt=Oe(Ne),Zt=(gt.utcOffset()-this.utcOffset())*d,un=this-gt,Vn=b.m(this,gt);return Vn=(mt={},mt[B]=Vn/12,mt[A]=Vn,mt[N]=Vn/3,mt[O]=(un-Zt)/6048e5,mt[I]=(un-Zt)/864e5,mt[y]=un/g,mt[T]=un/d,mt[S]=un/1e3,mt)[_t]||un,Xe?Vn:b.a(Vn)},Fe.daysInMonth=function(){return this.endOf(A).$D},Fe.$locale=function(){return K[this.$L]},Fe.locale=function(Ne,tt){if(!Ne)return this.$L;var Xe=this.clone(),mt=Se(Ne,tt,!0);return mt&&(Xe.$L=mt),Xe},Fe.clone=function(){return b.w(this.$d,this)},Fe.toDate=function(){return new Date(this.valueOf())},Fe.toJSON=function(){return this.isValid()?this.toISOString():null},Fe.toISOString=function(){return this.$d.toISOString()},Fe.toString=function(){return this.$d.toUTCString()},ze}(),at=Ge.prototype;return Oe.prototype=at,[["$ms",m],["$s",S],["$m",T],["$H",y],["$W",I],["$M",A],["$y",B],["$D",k]].forEach(function(ze){at[ze[1]]=function(Fe){return this.$g(Fe,ze[0],ze[1])}}),Oe.extend=function(ze,Fe){return ze.$i||(ze(Fe,Ge,Oe),ze.$i=!0),Oe},Oe.locale=Se,Oe.isDayjs=ge,Oe.unix=function(ze){return Oe(1e3*ze)},Oe.en=K[le],Oe.Ls=K,Oe.p={},Oe}()},72243:function(E){E.exports=function(){"use strict";return function(W,d,g){W=W||{};var m=d.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function T(I,O,A,N){return m.fromToBase(I,O,A,N)}g.en.relativeTime=S,m.fromToBase=function(I,O,A,N,B){for(var k,X,q,ue=A.$locale().relativeTime||S,r=W.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ae=r.length,de=0;de<ae;de+=1){var le=r[de];le.d&&(k=N?g(I).diff(A,le.d,!0):A.diff(I,le.d,!0));var K=(W.rounding||Math.round)(Math.abs(k));if(q=k>0,K<=le.r||!le.r){K<=1&&de>0&&(le=r[de-1]);var ge=ue[le.l];B&&(K=B(""+K)),X="string"==typeof ge?ge.replace("%d",K):ge(K,O,le.l,q);break}}if(O)return X;var Se=q?ue.future:ue.past;return"function"==typeof Se?Se(X):Se.replace("%s",X)},m.to=function(I,O){return T(I,O,this,!0)},m.from=function(I,O){return T(I,O,this)};var y=function(I){return I.$u?g.utc():g()};m.toNow=function(I){return this.to(y(this),I)},m.fromNow=function(I){return this.from(y(this),I)}}}()},85510:(E,W,d)=>{var g=d(51838);E.exports={Graph:g.Graph,json:d(21088),alg:d(83430),version:g.version}},86730:(E,W,d)=>{var g=d(79138);E.exports=function m(S){var I,T={},y=[];function O(A){g.has(T,A)||(T[A]=!0,I.push(A),g.each(S.successors(A),O),g.each(S.predecessors(A),O))}return g.each(S.nodes(),function(A){I=[],O(A),I.length&&y.push(I)}),y}},22163:(E,W,d)=>{var g=d(79138);function S(T,y,I,O,A,N){g.has(O,y)||(O[y]=!0,I||N.push(y),g.each(A(y),function(B){S(T,B,I,O,A,N)}),I&&N.push(y))}E.exports=function m(T,y,I){g.isArray(y)||(y=[y]);var O=(T.isDirected()?T.successors:T.neighbors).bind(T),A=[],N={};return g.each(y,function(B){if(!T.hasNode(B))throw new Error("Graph does not have node: "+B);S(T,B,"post"===I,N,O,A)}),A}},25668:(E,W,d)=>{var g=d(61718),m=d(79138);E.exports=function S(T,y,I){return m.transform(T.nodes(),function(O,A){O[A]=g(T,A,y,I)},{})}},61718:(E,W,d)=>{var g=d(79138),m=d(31919);E.exports=function T(I,O,A,N){return function y(I,O,A,N){var X,q,B={},k=new m,ue=function(r){var ae=r.v!==X?r.v:r.w,de=B[ae],le=A(r),K=q.distance+le;if(le<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+r+" Weight: "+le);K<de.distance&&(de.distance=K,de.predecessor=X,k.decrease(ae,K))};for(I.nodes().forEach(function(r){var ae=r===O?0:Number.POSITIVE_INFINITY;B[r]={distance:ae},k.add(r,ae)});k.size()>0&&(X=k.removeMin(),(q=B[X]).distance!==Number.POSITIVE_INFINITY);)N(X).forEach(ue);return B}(I,String(O),A||S,N||function(B){return I.outEdges(B)})};var S=g.constant(1)},9611:(E,W,d)=>{var g=d(79138),m=d(73585);E.exports=function S(T){return g.filter(m(T),function(y){return y.length>1||1===y.length&&T.hasEdge(y[0],y[0])})}},22881:(E,W,d)=>{var g=d(79138);E.exports=function S(y,I,O){return function T(y,I,O){var A={},N=y.nodes();return N.forEach(function(B){A[B]={},A[B][B]={distance:0},N.forEach(function(k){B!==k&&(A[B][k]={distance:Number.POSITIVE_INFINITY})}),O(B).forEach(function(k){var X=k.v===B?k.w:k.v,q=I(k);A[B][X]={distance:q,predecessor:B}})}),N.forEach(function(B){var k=A[B];N.forEach(function(X){var q=A[X];N.forEach(function(ue){var ae=k[ue],de=q[ue],le=q[B].distance+ae.distance;le<de.distance&&(de.distance=le,de.predecessor=ae.predecessor)})})}),A}(y,I||m,O||function(A){return y.outEdges(A)})};var m=g.constant(1)},83430:(E,W,d)=>{E.exports={components:d(86730),dijkstra:d(61718),dijkstraAll:d(25668),findCycles:d(9611),floydWarshall:d(22881),isAcyclic:d(9366),postorder:d(46694),preorder:d(5330),prim:d(46823),tarjan:d(73585),topsort:d(52180)}},9366:(E,W,d)=>{var g=d(52180);E.exports=function m(S){try{g(S)}catch(T){if(T instanceof g.CycleException)return!1;throw T}return!0}},46694:(E,W,d)=>{var g=d(22163);E.exports=function m(S,T){return g(S,T,"post")}},5330:(E,W,d)=>{var g=d(22163);E.exports=function m(S,T){return g(S,T,"pre")}},46823:(E,W,d)=>{var g=d(79138),m=d(66568),S=d(31919);E.exports=function T(y,I){var B,O=new m,A={},N=new S;function k(q){var ue=q.v===B?q.w:q.v,r=N.priority(ue);if(void 0!==r){var ae=I(q);ae<r&&(A[ue]=B,N.decrease(ue,ae))}}if(0===y.nodeCount())return O;g.each(y.nodes(),function(q){N.add(q,Number.POSITIVE_INFINITY),O.setNode(q)}),N.decrease(y.nodes()[0],0);for(var X=!1;N.size()>0;){if(B=N.removeMin(),g.has(A,B))O.setEdge(B,A[B]);else{if(X)throw new Error("Input graph is not connected: "+y);X=!0}y.nodeEdges(B).forEach(k)}return O}},73585:(E,W,d)=>{var g=d(79138);E.exports=function m(S){var T=0,y=[],I={},O=[];function A(N){var B=I[N]={onStack:!0,lowlink:T,index:T++};if(y.push(N),S.successors(N).forEach(function(q){g.has(I,q)?I[q].onStack&&(B.lowlink=Math.min(B.lowlink,I[q].index)):(A(q),B.lowlink=Math.min(B.lowlink,I[q].lowlink))}),B.lowlink===B.index){var X,k=[];do{X=y.pop(),I[X].onStack=!1,k.push(X)}while(N!==X);O.push(k)}}return S.nodes().forEach(function(N){g.has(I,N)||A(N)}),O}},52180:(E,W,d)=>{var g=d(79138);function m(T){var y={},I={},O=[];if(g.each(T.sinks(),function A(N){if(g.has(I,N))throw new S;g.has(y,N)||(I[N]=!0,y[N]=!0,g.each(T.predecessors(N),A),delete I[N],O.push(N))}),g.size(y)!==T.nodeCount())throw new S;return O}function S(){}E.exports=m,m.CycleException=S,S.prototype=new Error},31919:(E,W,d)=>{var g=d(79138);function m(){this._arr=[],this._keyIndices={}}E.exports=m,m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(S){return S.key})},m.prototype.has=function(S){return g.has(this._keyIndices,S)},m.prototype.priority=function(S){var T=this._keyIndices[S];if(void 0!==T)return this._arr[T].priority},m.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(S,T){var y=this._keyIndices;if(S=String(S),!g.has(y,S)){var I=this._arr,O=I.length;return y[S]=O,I.push({key:S,priority:T}),this._decrease(O),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},m.prototype.decrease=function(S,T){var y=this._keyIndices[S];if(T>this._arr[y].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[y].priority+" New: "+T);this._arr[y].priority=T,this._decrease(y)},m.prototype._heapify=function(S){var T=this._arr,y=2*S,I=y+1,O=S;y<T.length&&(O=T[y].priority<T[O].priority?y:O,I<T.length&&(O=T[I].priority<T[O].priority?I:O),O!==S&&(this._swap(S,O),this._heapify(O)))},m.prototype._decrease=function(S){for(var I,T=this._arr,y=T[S].priority;0!==S&&!(T[I=S>>1].priority<y);)this._swap(S,I),S=I},m.prototype._swap=function(S,T){var y=this._arr,I=this._keyIndices,O=y[S],A=y[T];y[S]=A,y[T]=O,I[A.key]=S,I[O.key]=T}},66568:(E,W,d)=>{"use strict";var g=d(79138);E.exports=y;var S="\0";function y(k){this._isDirected=!g.has(k,"directed")||k.directed,this._isMultigraph=!!g.has(k,"multigraph")&&k.multigraph,this._isCompound=!!g.has(k,"compound")&&k.compound,this._label=void 0,this._defaultNodeLabelFn=g.constant(void 0),this._defaultEdgeLabelFn=g.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function I(k,X){k[X]?k[X]++:k[X]=1}function O(k,X){--k[X]||delete k[X]}function A(k,X,q,ue){var r=""+X,ae=""+q;if(!k&&r>ae){var de=r;r=ae,ae=de}return r+"\x01"+ae+"\x01"+(g.isUndefined(ue)?"\0":ue)}function N(k,X,q,ue){var r=""+X,ae=""+q;if(!k&&r>ae){var de=r;r=ae,ae=de}var le={v:r,w:ae};return ue&&(le.name=ue),le}function B(k,X){return A(k,X.v,X.w,X.name)}y.prototype._nodeCount=0,y.prototype._edgeCount=0,y.prototype.isDirected=function(){return this._isDirected},y.prototype.isMultigraph=function(){return this._isMultigraph},y.prototype.isCompound=function(){return this._isCompound},y.prototype.setGraph=function(k){return this._label=k,this},y.prototype.graph=function(){return this._label},y.prototype.setDefaultNodeLabel=function(k){return g.isFunction(k)||(k=g.constant(k)),this._defaultNodeLabelFn=k,this},y.prototype.nodeCount=function(){return this._nodeCount},y.prototype.nodes=function(){return g.keys(this._nodes)},y.prototype.sources=function(){var k=this;return g.filter(this.nodes(),function(X){return g.isEmpty(k._in[X])})},y.prototype.sinks=function(){var k=this;return g.filter(this.nodes(),function(X){return g.isEmpty(k._out[X])})},y.prototype.setNodes=function(k,X){var q=arguments,ue=this;return g.each(k,function(r){q.length>1?ue.setNode(r,X):ue.setNode(r)}),this},y.prototype.setNode=function(k,X){return g.has(this._nodes,k)?(arguments.length>1&&(this._nodes[k]=X),this):(this._nodes[k]=arguments.length>1?X:this._defaultNodeLabelFn(k),this._isCompound&&(this._parent[k]=S,this._children[k]={},this._children[S][k]=!0),this._in[k]={},this._preds[k]={},this._out[k]={},this._sucs[k]={},++this._nodeCount,this)},y.prototype.node=function(k){return this._nodes[k]},y.prototype.hasNode=function(k){return g.has(this._nodes,k)},y.prototype.removeNode=function(k){var X=this;if(g.has(this._nodes,k)){var q=function(ue){X.removeEdge(X._edgeObjs[ue])};delete this._nodes[k],this._isCompound&&(this._removeFromParentsChildList(k),delete this._parent[k],g.each(this.children(k),function(ue){X.setParent(ue)}),delete this._children[k]),g.each(g.keys(this._in[k]),q),delete this._in[k],delete this._preds[k],g.each(g.keys(this._out[k]),q),delete this._out[k],delete this._sucs[k],--this._nodeCount}return this},y.prototype.setParent=function(k,X){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(g.isUndefined(X))X=S;else{for(var q=X+="";!g.isUndefined(q);q=this.parent(q))if(q===k)throw new Error("Setting "+X+" as parent of "+k+" would create a cycle");this.setNode(X)}return this.setNode(k),this._removeFromParentsChildList(k),this._parent[k]=X,this._children[X][k]=!0,this},y.prototype._removeFromParentsChildList=function(k){delete this._children[this._parent[k]][k]},y.prototype.parent=function(k){if(this._isCompound){var X=this._parent[k];if(X!==S)return X}},y.prototype.children=function(k){if(g.isUndefined(k)&&(k=S),this._isCompound){var X=this._children[k];if(X)return g.keys(X)}else{if(k===S)return this.nodes();if(this.hasNode(k))return[]}},y.prototype.predecessors=function(k){var X=this._preds[k];if(X)return g.keys(X)},y.prototype.successors=function(k){var X=this._sucs[k];if(X)return g.keys(X)},y.prototype.neighbors=function(k){var X=this.predecessors(k);if(X)return g.union(X,this.successors(k))},y.prototype.isLeaf=function(k){return 0===(this.isDirected()?this.successors(k):this.neighbors(k)).length},y.prototype.filterNodes=function(k){var X=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});X.setGraph(this.graph());var q=this;g.each(this._nodes,function(ae,de){k(de)&&X.setNode(de,ae)}),g.each(this._edgeObjs,function(ae){X.hasNode(ae.v)&&X.hasNode(ae.w)&&X.setEdge(ae,q.edge(ae))});var ue={};function r(ae){var de=q.parent(ae);return void 0===de||X.hasNode(de)?(ue[ae]=de,de):de in ue?ue[de]:r(de)}return this._isCompound&&g.each(X.nodes(),function(ae){X.setParent(ae,r(ae))}),X},y.prototype.setDefaultEdgeLabel=function(k){return g.isFunction(k)||(k=g.constant(k)),this._defaultEdgeLabelFn=k,this},y.prototype.edgeCount=function(){return this._edgeCount},y.prototype.edges=function(){return g.values(this._edgeObjs)},y.prototype.setPath=function(k,X){var q=this,ue=arguments;return g.reduce(k,function(r,ae){return ue.length>1?q.setEdge(r,ae,X):q.setEdge(r,ae),ae}),this},y.prototype.setEdge=function(){var k,X,q,ue,r=!1,ae=arguments[0];"object"==typeof ae&&null!==ae&&"v"in ae?(k=ae.v,X=ae.w,q=ae.name,2===arguments.length&&(ue=arguments[1],r=!0)):(k=ae,X=arguments[1],q=arguments[3],arguments.length>2&&(ue=arguments[2],r=!0)),k=""+k,X=""+X,g.isUndefined(q)||(q=""+q);var de=A(this._isDirected,k,X,q);if(g.has(this._edgeLabels,de))return r&&(this._edgeLabels[de]=ue),this;if(!g.isUndefined(q)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(k),this.setNode(X),this._edgeLabels[de]=r?ue:this._defaultEdgeLabelFn(k,X,q);var le=N(this._isDirected,k,X,q);return k=le.v,X=le.w,Object.freeze(le),this._edgeObjs[de]=le,I(this._preds[X],k),I(this._sucs[k],X),this._in[X][de]=le,this._out[k][de]=le,this._edgeCount++,this},y.prototype.edge=function(k,X,q){var ue=1===arguments.length?B(this._isDirected,arguments[0]):A(this._isDirected,k,X,q);return this._edgeLabels[ue]},y.prototype.hasEdge=function(k,X,q){var ue=1===arguments.length?B(this._isDirected,arguments[0]):A(this._isDirected,k,X,q);return g.has(this._edgeLabels,ue)},y.prototype.removeEdge=function(k,X,q){var ue=1===arguments.length?B(this._isDirected,arguments[0]):A(this._isDirected,k,X,q),r=this._edgeObjs[ue];return r&&(k=r.v,X=r.w,delete this._edgeLabels[ue],delete this._edgeObjs[ue],O(this._preds[X],k),O(this._sucs[k],X),delete this._in[X][ue],delete this._out[k][ue],this._edgeCount--),this},y.prototype.inEdges=function(k,X){var q=this._in[k];if(q){var ue=g.values(q);return X?g.filter(ue,function(r){return r.v===X}):ue}},y.prototype.outEdges=function(k,X){var q=this._out[k];if(q){var ue=g.values(q);return X?g.filter(ue,function(r){return r.w===X}):ue}},y.prototype.nodeEdges=function(k,X){var q=this.inEdges(k,X);if(q)return q.concat(this.outEdges(k,X))}},51838:(E,W,d)=>{E.exports={Graph:d(66568),version:d(75089)}},21088:(E,W,d)=>{var g=d(79138),m=d(66568);function T(O){return g.map(O.nodes(),function(A){var N=O.node(A),B=O.parent(A),k={v:A};return g.isUndefined(N)||(k.value=N),g.isUndefined(B)||(k.parent=B),k})}function y(O){return g.map(O.edges(),function(A){var N=O.edge(A),B={v:A.v,w:A.w};return g.isUndefined(A.name)||(B.name=A.name),g.isUndefined(N)||(B.value=N),B})}E.exports={write:function S(O){var A={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:T(O),edges:y(O)};return g.isUndefined(O.graph())||(A.value=g.clone(O.graph())),A},read:function I(O){var A=new m(O.options).setGraph(O.value);return g.each(O.nodes,function(N){A.setNode(N.v,N.value),N.parent&&A.setParent(N.v,N.parent)}),g.each(O.edges,function(N){A.setEdge({v:N.v,w:N.w,name:N.name},N.value)}),A}}},79138:(E,W,d)=>{var g;try{g={clone:d(11094),constant:d(76684),each:d(35474),filter:d(35281),has:d(54842),isArray:d(21503),isEmpty:d(71973),isFunction:d(75946),isUndefined:d(34235),keys:d(118),map:d(19984),reduce:d(81337),size:d(55637),transform:d(89416),union:d(68921),values:d(90377)}}catch(m){}g||(g=window._),E.exports=g},75089:E=>{E.exports="2.1.8"},58259:function(E,W){var g;!function(m,S){"use strict";"object"==typeof E.exports?E.exports=m.document?S(m,!0):function(T){if(!T.document)throw new Error("jQuery requires a window with a document");return S(T)}:S(m)}("undefined"!=typeof window?window:this,function(m,S){"use strict";var T=[],y=Object.getPrototypeOf,I=T.slice,O=T.flat?function(l){return T.flat.call(l)}:function(l){return T.concat.apply([],l)},A=T.push,N=T.indexOf,B={},k=B.toString,X=B.hasOwnProperty,q=X.toString,ue=q.call(Object),r={},ae=function(f){return"function"==typeof f&&"number"!=typeof f.nodeType&&"function"!=typeof f.item},de=function(f){return null!=f&&f===f.window},le=m.document,K={type:!0,src:!0,nonce:!0,noModule:!0};function ge(l,f,_){var w,D,H=(_=_||le).createElement("script");if(H.text=l,f)for(w in K)(D=f[w]||f.getAttribute&&f.getAttribute(w))&&H.setAttribute(w,D);_.head.appendChild(H).parentNode.removeChild(H)}function Se(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?B[k.call(l)]||"object":typeof l}var b=function(l,f){return new b.fn.init(l,f)};function Ge(l){var f=!!l&&"length"in l&&l.length,_=Se(l);return!ae(l)&&!de(l)&&("array"===_||0===f||"number"==typeof f&&f>0&&f-1 in l)}b.fn=b.prototype={jquery:"3.6.3",constructor:b,length:0,toArray:function(){return I.call(this)},get:function(l){return null==l?I.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var f=b.merge(this.constructor(),l);return f.prevObject=this,f},each:function(l){return b.each(this,l)},map:function(l){return this.pushStack(b.map(this,function(f,_){return l.call(f,_,f)}))},slice:function(){return this.pushStack(I.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(l,f){return(f+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(l,f){return f%2}))},eq:function(l){var f=this.length,_=+l+(l<0?f:0);return this.pushStack(_>=0&&_<f?[this[_]]:[])},end:function(){return this.prevObject||this.constructor()},push:A,sort:T.sort,splice:T.splice},b.extend=b.fn.extend=function(){var l,f,_,w,D,H,Y=arguments[0]||{},pe=1,ce=arguments.length,Ae=!1;for("boolean"==typeof Y&&(Ae=Y,Y=arguments[pe]||{},pe++),"object"!=typeof Y&&!ae(Y)&&(Y={}),pe===ce&&(Y=this,pe--);pe<ce;pe++)if(null!=(l=arguments[pe]))for(f in l)w=l[f],"__proto__"!==f&&Y!==w&&(Ae&&w&&(b.isPlainObject(w)||(D=Array.isArray(w)))?(_=Y[f],H=D&&!Array.isArray(_)?[]:D||b.isPlainObject(_)?_:{},D=!1,Y[f]=b.extend(Ae,H,w)):void 0!==w&&(Y[f]=w));return Y},b.extend({expando:"jQuery"+("3.6.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var f,_;return!(!l||"[object Object]"!==k.call(l)||(f=y(l))&&("function"!=typeof(_=X.call(f,"constructor")&&f.constructor)||q.call(_)!==ue))},isEmptyObject:function(l){var f;for(f in l)return!1;return!0},globalEval:function(l,f,_){ge(l,{nonce:f&&f.nonce},_)},each:function(l,f){var _,w=0;if(Ge(l))for(_=l.length;w<_&&!1!==f.call(l[w],w,l[w]);w++);else for(w in l)if(!1===f.call(l[w],w,l[w]))break;return l},makeArray:function(l,f){var _=f||[];return null!=l&&(Ge(Object(l))?b.merge(_,"string"==typeof l?[l]:l):A.call(_,l)),_},inArray:function(l,f,_){return null==f?-1:N.call(f,l,_)},merge:function(l,f){for(var _=+f.length,w=0,D=l.length;w<_;w++)l[D++]=f[w];return l.length=D,l},grep:function(l,f,_){for(var D=[],H=0,Y=l.length,pe=!_;H<Y;H++)!f(l[H],H)!==pe&&D.push(l[H]);return D},map:function(l,f,_){var w,D,H=0,Y=[];if(Ge(l))for(w=l.length;H<w;H++)null!=(D=f(l[H],H,_))&&Y.push(D);else for(H in l)null!=(D=f(l[H],H,_))&&Y.push(D);return O(Y)},guid:1,support:r}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=T[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,f){B["[object "+f+"]"]=f.toLowerCase()});var at=function(l){var f,_,w,D,H,Y,pe,ce,Ae,He,lt,De,Qe,Rt,Gt,kt,ur,an,br,$n="sizzle"+1*new Date,tn=l.document,Kr=0,Ln=0,pr=gs(),Va=gs(),fs=gs(),Qr=gs(),Wi=function(ee,fe){return ee===fe&&(lt=!0),0},va={}.hasOwnProperty,ai=[],Po=ai.pop,Jr=ai.push,xi=ai.push,lr=ai.slice,ya=function(ee,fe){for(var we=0,Ze=ee.length;we<Ze;we++)if(ee[we]===fe)return we;return-1},hs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rn="[\\x20\\t\\r\\n\\f]",$o="(?:\\\\[\\da-fA-F]{1,6}"+Rn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",au="\\["+Rn+"*("+$o+")(?:"+Rn+"*([*^$|!~]?=)"+Rn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$o+"))|)"+Rn+"*\\]",si=":("+$o+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+au+")*)|.*)\\)|)",su=new RegExp(Rn+"+","g"),Wo=new RegExp("^"+Rn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Rn+"+$","g"),Ku=new RegExp("^"+Rn+"*,"+Rn+"*"),uu=new RegExp("^"+Rn+"*([>+~]|"+Rn+")"+Rn+"*"),Hl=new RegExp(Rn+"|>"),Yo=new RegExp(si),Mo=new RegExp("^"+$o+"$"),Os={ID:new RegExp("^#("+$o+")"),CLASS:new RegExp("^\\.("+$o+")"),TAG:new RegExp("^("+$o+"|[*])"),ATTR:new RegExp("^"+au),PSEUDO:new RegExp("^"+si),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Rn+"*(even|odd|(([+-]|)(\\d*)n|)"+Rn+"*(?:([+-]|)"+Rn+"*(\\d+)|))"+Rn+"*\\)|)","i"),bool:new RegExp("^(?:"+hs+")$","i"),needsContext:new RegExp("^"+Rn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Rn+"*((?:-\\d)?\\d*)"+Rn+"*\\)|)(?=[^-]|$)","i")},jl=/HTML$/i,Ha=/^(?:input|select|textarea|button)$/i,zl=/^h\d$/i,ps=/^[^{]+\{\s*\[native \w/,lu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ls=/[+~]/,Zr=new RegExp("\\\\[\\da-fA-F]{1,6}"+Rn+"?|\\\\([^\\r\\n\\f])","g"),ui=function(ee,fe){var we="0x"+ee.slice(1)-65536;return fe||(we<0?String.fromCharCode(we+65536):String.fromCharCode(we>>10|55296,1023&we|56320))},cu=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Xo=function(ee,fe){return fe?"\0"===ee?"\ufffd":ee.slice(0,-1)+"\\"+ee.charCodeAt(ee.length-1).toString(16)+" ":"\\"+ee},Qu=function(){De()},ja=Mn(function(ee){return!0===ee.disabled&&"fieldset"===ee.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{xi.apply(ai=lr.call(tn.childNodes),tn.childNodes)}catch(ee){xi={apply:ai.length?function(fe,we){Jr.apply(fe,lr.call(we))}:function(fe,we){for(var Ze=fe.length,Ce=0;fe[Ze++]=we[Ce++];);fe.length=Ze-1}}}function yn(ee,fe,we,Ze){var Ce,rt,ut,yt,wt,Ut,Vt,Ht=fe&&fe.ownerDocument,nn=fe?fe.nodeType:9;if(we=we||[],"string"!=typeof ee||!ee||1!==nn&&9!==nn&&11!==nn)return we;if(!Ze&&(De(fe),fe=fe||Qe,Gt)){if(11!==nn&&(wt=lu.exec(ee)))if(Ce=wt[1]){if(9===nn){if(!(ut=fe.getElementById(Ce)))return we;if(ut.id===Ce)return we.push(ut),we}else if(Ht&&(ut=Ht.getElementById(Ce))&&br(fe,ut)&&ut.id===Ce)return we.push(ut),we}else{if(wt[2])return xi.apply(we,fe.getElementsByTagName(ee)),we;if((Ce=wt[3])&&_.getElementsByClassName&&fe.getElementsByClassName)return xi.apply(we,fe.getElementsByClassName(Ce)),we}if(_.qsa&&!Qr[ee+" "]&&(!kt||!kt.test(ee))&&(1!==nn||"object"!==fe.nodeName.toLowerCase())){if(Vt=ee,Ht=fe,1===nn&&(Hl.test(ee)||uu.test(ee))){for(((Ht=Ls.test(ee)&&Ue(fe.parentNode)||fe)!==fe||!_.scope)&&((yt=fe.getAttribute("id"))?yt=yt.replace(cu,Xo):fe.setAttribute("id",yt=$n)),rt=(Ut=Y(ee)).length;rt--;)Ut[rt]=(yt?"#"+yt:":scope")+" "+qt(Ut[rt]);Vt=Ut.join(",")}try{if(_.cssSupportsSelector&&!CSS.supports("selector(:is("+Vt+"))"))throw new Error;return xi.apply(we,Ht.querySelectorAll(Vt)),we}catch(Wn){Qr(ee,!0)}finally{yt===$n&&fe.removeAttribute("id")}}}return ce(ee.replace(Wo,"$1"),fe,we,Ze)}function gs(){var ee=[];return function fe(we,Ze){return ee.push(we+" ")>w.cacheLength&&delete fe[ee.shift()],fe[we+" "]=Ze}}function ro(ee){return ee[$n]=!0,ee}function io(ee){var fe=Qe.createElement("fieldset");try{return!!ee(fe)}catch(we){return!1}finally{fe.parentNode&&fe.parentNode.removeChild(fe),fe=null}}function Rs(ee,fe){for(var we=ee.split("|"),Ze=we.length;Ze--;)w.attrHandle[we[Ze]]=fe}function ms(ee,fe){var we=fe&&ee,Ze=we&&1===ee.nodeType&&1===fe.nodeType&&ee.sourceIndex-fe.sourceIndex;if(Ze)return Ze;if(we)for(;we=we.nextSibling;)if(we===fe)return-1;return ee?1:-1}function rd(ee){return function(fe){return"input"===fe.nodeName.toLowerCase()&&fe.type===ee}}function za(ee){return function(fe){var we=fe.nodeName.toLowerCase();return("input"===we||"button"===we)&&fe.type===ee}}function be(ee){return function(fe){return"form"in fe?fe.parentNode&&!1===fe.disabled?"label"in fe?"label"in fe.parentNode?fe.parentNode.disabled===ee:fe.disabled===ee:fe.isDisabled===ee||fe.isDisabled!==!ee&&ja(fe)===ee:fe.disabled===ee:"label"in fe&&fe.disabled===ee}}function Ye(ee){return ro(function(fe){return fe=+fe,ro(function(we,Ze){for(var Ce,rt=ee([],we.length,fe),ut=rt.length;ut--;)we[Ce=rt[ut]]&&(we[Ce]=!(Ze[Ce]=we[Ce]))})})}function Ue(ee){return ee&&void 0!==ee.getElementsByTagName&&ee}for(f in _=yn.support={},H=yn.isXML=function(ee){var we=ee&&(ee.ownerDocument||ee).documentElement;return!jl.test(ee&&ee.namespaceURI||we&&we.nodeName||"HTML")},De=yn.setDocument=function(ee){var fe,we,Ze=ee?ee.ownerDocument||ee:tn;return Ze==Qe||9!==Ze.nodeType||!Ze.documentElement||(Rt=(Qe=Ze).documentElement,Gt=!H(Qe),tn!=Qe&&(we=Qe.defaultView)&&we.top!==we&&(we.addEventListener?we.addEventListener("unload",Qu,!1):we.attachEvent&&we.attachEvent("onunload",Qu)),_.scope=io(function(Ce){return Rt.appendChild(Ce).appendChild(Qe.createElement("div")),void 0!==Ce.querySelectorAll&&!Ce.querySelectorAll(":scope fieldset div").length}),_.cssSupportsSelector=io(function(){return CSS.supports("selector(*)")&&Qe.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),_.attributes=io(function(Ce){return Ce.className="i",!Ce.getAttribute("className")}),_.getElementsByTagName=io(function(Ce){return Ce.appendChild(Qe.createComment("")),!Ce.getElementsByTagName("*").length}),_.getElementsByClassName=ps.test(Qe.getElementsByClassName),_.getById=io(function(Ce){return Rt.appendChild(Ce).id=$n,!Qe.getElementsByName||!Qe.getElementsByName($n).length}),_.getById?(w.filter.ID=function(Ce){var rt=Ce.replace(Zr,ui);return function(ut){return ut.getAttribute("id")===rt}},w.find.ID=function(Ce,rt){if(void 0!==rt.getElementById&&Gt){var ut=rt.getElementById(Ce);return ut?[ut]:[]}}):(w.filter.ID=function(Ce){var rt=Ce.replace(Zr,ui);return function(ut){var yt=void 0!==ut.getAttributeNode&&ut.getAttributeNode("id");return yt&&yt.value===rt}},w.find.ID=function(Ce,rt){if(void 0!==rt.getElementById&&Gt){var ut,yt,wt,Ut=rt.getElementById(Ce);if(Ut){if((ut=Ut.getAttributeNode("id"))&&ut.value===Ce)return[Ut];for(wt=rt.getElementsByName(Ce),yt=0;Ut=wt[yt++];)if((ut=Ut.getAttributeNode("id"))&&ut.value===Ce)return[Ut]}return[]}}),w.find.TAG=_.getElementsByTagName?function(Ce,rt){return void 0!==rt.getElementsByTagName?rt.getElementsByTagName(Ce):_.qsa?rt.querySelectorAll(Ce):void 0}:function(Ce,rt){var ut,yt=[],wt=0,Ut=rt.getElementsByTagName(Ce);if("*"===Ce){for(;ut=Ut[wt++];)1===ut.nodeType&&yt.push(ut);return yt}return Ut},w.find.CLASS=_.getElementsByClassName&&function(Ce,rt){if(void 0!==rt.getElementsByClassName&&Gt)return rt.getElementsByClassName(Ce)},ur=[],kt=[],(_.qsa=ps.test(Qe.querySelectorAll))&&(io(function(Ce){var rt;Rt.appendChild(Ce).innerHTML="<a id='"+$n+"'></a><select id='"+$n+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ce.querySelectorAll("[msallowcapture^='']").length&&kt.push("[*^$]="+Rn+"*(?:''|\"\")"),Ce.querySelectorAll("[selected]").length||kt.push("\\["+Rn+"*(?:value|"+hs+")"),Ce.querySelectorAll("[id~="+$n+"-]").length||kt.push("~="),(rt=Qe.createElement("input")).setAttribute("name",""),Ce.appendChild(rt),Ce.querySelectorAll("[name='']").length||kt.push("\\["+Rn+"*name"+Rn+"*="+Rn+"*(?:''|\"\")"),Ce.querySelectorAll(":checked").length||kt.push(":checked"),Ce.querySelectorAll("a#"+$n+"+*").length||kt.push(".#.+[+~]"),Ce.querySelectorAll("\\\f"),kt.push("[\\r\\n\\f]")}),io(function(Ce){Ce.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var rt=Qe.createElement("input");rt.setAttribute("type","hidden"),Ce.appendChild(rt).setAttribute("name","D"),Ce.querySelectorAll("[name=d]").length&&kt.push("name"+Rn+"*[*^$|!~]?="),2!==Ce.querySelectorAll(":enabled").length&&kt.push(":enabled",":disabled"),Rt.appendChild(Ce).disabled=!0,2!==Ce.querySelectorAll(":disabled").length&&kt.push(":enabled",":disabled"),Ce.querySelectorAll("*,:x"),kt.push(",.*:")})),(_.matchesSelector=ps.test(an=Rt.matches||Rt.webkitMatchesSelector||Rt.mozMatchesSelector||Rt.oMatchesSelector||Rt.msMatchesSelector))&&io(function(Ce){_.disconnectedMatch=an.call(Ce,"*"),an.call(Ce,"[s!='']:x"),ur.push("!=",si)}),_.cssSupportsSelector||kt.push(":has"),kt=kt.length&&new RegExp(kt.join("|")),ur=ur.length&&new RegExp(ur.join("|")),fe=ps.test(Rt.compareDocumentPosition),br=fe||ps.test(Rt.contains)?function(Ce,rt){var ut=9===Ce.nodeType&&Ce.documentElement||Ce,yt=rt&&rt.parentNode;return Ce===yt||!(!yt||1!==yt.nodeType||!(ut.contains?ut.contains(yt):Ce.compareDocumentPosition&&16&Ce.compareDocumentPosition(yt)))}:function(Ce,rt){if(rt)for(;rt=rt.parentNode;)if(rt===Ce)return!0;return!1},Wi=fe?function(Ce,rt){if(Ce===rt)return lt=!0,0;var ut=!Ce.compareDocumentPosition-!rt.compareDocumentPosition;return ut||(1&(ut=(Ce.ownerDocument||Ce)==(rt.ownerDocument||rt)?Ce.compareDocumentPosition(rt):1)||!_.sortDetached&&rt.compareDocumentPosition(Ce)===ut?Ce==Qe||Ce.ownerDocument==tn&&br(tn,Ce)?-1:rt==Qe||rt.ownerDocument==tn&&br(tn,rt)?1:He?ya(He,Ce)-ya(He,rt):0:4&ut?-1:1)}:function(Ce,rt){if(Ce===rt)return lt=!0,0;var ut,yt=0,wt=Ce.parentNode,Ut=rt.parentNode,Vt=[Ce],Ht=[rt];if(!wt||!Ut)return Ce==Qe?-1:rt==Qe?1:wt?-1:Ut?1:He?ya(He,Ce)-ya(He,rt):0;if(wt===Ut)return ms(Ce,rt);for(ut=Ce;ut=ut.parentNode;)Vt.unshift(ut);for(ut=rt;ut=ut.parentNode;)Ht.unshift(ut);for(;Vt[yt]===Ht[yt];)yt++;return yt?ms(Vt[yt],Ht[yt]):Vt[yt]==tn?-1:Ht[yt]==tn?1:0}),Qe},yn.matches=function(ee,fe){return yn(ee,null,null,fe)},yn.matchesSelector=function(ee,fe){if(De(ee),_.matchesSelector&&Gt&&!Qr[fe+" "]&&(!ur||!ur.test(fe))&&(!kt||!kt.test(fe)))try{var we=an.call(ee,fe);if(we||_.disconnectedMatch||ee.document&&11!==ee.document.nodeType)return we}catch(Ze){Qr(fe,!0)}return yn(fe,Qe,null,[ee]).length>0},yn.contains=function(ee,fe){return(ee.ownerDocument||ee)!=Qe&&De(ee),br(ee,fe)},yn.attr=function(ee,fe){(ee.ownerDocument||ee)!=Qe&&De(ee);var we=w.attrHandle[fe.toLowerCase()],Ze=we&&va.call(w.attrHandle,fe.toLowerCase())?we(ee,fe,!Gt):void 0;return void 0!==Ze?Ze:_.attributes||!Gt?ee.getAttribute(fe):(Ze=ee.getAttributeNode(fe))&&Ze.specified?Ze.value:null},yn.escape=function(ee){return(ee+"").replace(cu,Xo)},yn.error=function(ee){throw new Error("Syntax error, unrecognized expression: "+ee)},yn.uniqueSort=function(ee){var fe,we=[],Ze=0,Ce=0;if(lt=!_.detectDuplicates,He=!_.sortStable&&ee.slice(0),ee.sort(Wi),lt){for(;fe=ee[Ce++];)fe===ee[Ce]&&(Ze=we.push(Ce));for(;Ze--;)ee.splice(we[Ze],1)}return He=null,ee},D=yn.getText=function(ee){var fe,we="",Ze=0,Ce=ee.nodeType;if(Ce){if(1===Ce||9===Ce||11===Ce){if("string"==typeof ee.textContent)return ee.textContent;for(ee=ee.firstChild;ee;ee=ee.nextSibling)we+=D(ee)}else if(3===Ce||4===Ce)return ee.nodeValue}else for(;fe=ee[Ze++];)we+=D(fe);return we},(w=yn.selectors={cacheLength:50,createPseudo:ro,match:Os,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ee){return ee[1]=ee[1].replace(Zr,ui),ee[3]=(ee[3]||ee[4]||ee[5]||"").replace(Zr,ui),"~="===ee[2]&&(ee[3]=" "+ee[3]+" "),ee.slice(0,4)},CHILD:function(ee){return ee[1]=ee[1].toLowerCase(),"nth"===ee[1].slice(0,3)?(ee[3]||yn.error(ee[0]),ee[4]=+(ee[4]?ee[5]+(ee[6]||1):2*("even"===ee[3]||"odd"===ee[3])),ee[5]=+(ee[7]+ee[8]||"odd"===ee[3])):ee[3]&&yn.error(ee[0]),ee},PSEUDO:function(ee){var fe,we=!ee[6]&&ee[2];return Os.CHILD.test(ee[0])?null:(ee[3]?ee[2]=ee[4]||ee[5]||"":we&&Yo.test(we)&&(fe=Y(we,!0))&&(fe=we.indexOf(")",we.length-fe)-we.length)&&(ee[0]=ee[0].slice(0,fe),ee[2]=we.slice(0,fe)),ee.slice(0,3))}},filter:{TAG:function(ee){var fe=ee.replace(Zr,ui).toLowerCase();return"*"===ee?function(){return!0}:function(we){return we.nodeName&&we.nodeName.toLowerCase()===fe}},CLASS:function(ee){var fe=pr[ee+" "];return fe||(fe=new RegExp("(^|"+Rn+")"+ee+"("+Rn+"|$)"))&&pr(ee,function(we){return fe.test("string"==typeof we.className&&we.className||void 0!==we.getAttribute&&we.getAttribute("class")||"")})},ATTR:function(ee,fe,we){return function(Ze){var Ce=yn.attr(Ze,ee);return null==Ce?"!="===fe:!fe||(Ce+="","="===fe?Ce===we:"!="===fe?Ce!==we:"^="===fe?we&&0===Ce.indexOf(we):"*="===fe?we&&Ce.indexOf(we)>-1:"$="===fe?we&&Ce.slice(-we.length)===we:"~="===fe?(" "+Ce.replace(su," ")+" ").indexOf(we)>-1:"|="===fe&&(Ce===we||Ce.slice(0,we.length+1)===we+"-"))}},CHILD:function(ee,fe,we,Ze,Ce){var rt="nth"!==ee.slice(0,3),ut="last"!==ee.slice(-4),yt="of-type"===fe;return 1===Ze&&0===Ce?function(wt){return!!wt.parentNode}:function(wt,Ut,Vt){var Ht,nn,Wn,jt,mr,Sr,bi=rt!==ut?"nextSibling":"previousSibling",At=wt.parentNode,_a=yt&&wt.nodeName.toLowerCase(),oo=!Vt&&!yt,Ar=!1;if(At){if(rt){for(;bi;){for(jt=wt;jt=jt[bi];)if(yt?jt.nodeName.toLowerCase()===_a:1===jt.nodeType)return!1;Sr=bi="only"===ee&&!Sr&&"nextSibling"}return!0}if(Sr=[ut?At.firstChild:At.lastChild],ut&&oo){for(Ar=(mr=(Ht=(nn=(Wn=(jt=At)[$n]||(jt[$n]={}))[jt.uniqueID]||(Wn[jt.uniqueID]={}))[ee]||[])[0]===Kr&&Ht[1])&&Ht[2],jt=mr&&At.childNodes[mr];jt=++mr&&jt&&jt[bi]||(Ar=mr=0)||Sr.pop();)if(1===jt.nodeType&&++Ar&&jt===wt){nn[ee]=[Kr,mr,Ar];break}}else if(oo&&(Ar=mr=(Ht=(nn=(Wn=(jt=wt)[$n]||(jt[$n]={}))[jt.uniqueID]||(Wn[jt.uniqueID]={}))[ee]||[])[0]===Kr&&Ht[1]),!1===Ar)for(;(jt=++mr&&jt&&jt[bi]||(Ar=mr=0)||Sr.pop())&&((yt?jt.nodeName.toLowerCase()!==_a:1!==jt.nodeType)||!++Ar||(oo&&((nn=(Wn=jt[$n]||(jt[$n]={}))[jt.uniqueID]||(Wn[jt.uniqueID]={}))[ee]=[Kr,Ar]),jt!==wt)););return(Ar-=Ce)===Ze||Ar%Ze==0&&Ar/Ze>=0}}},PSEUDO:function(ee,fe){var we,Ze=w.pseudos[ee]||w.setFilters[ee.toLowerCase()]||yn.error("unsupported pseudo: "+ee);return Ze[$n]?Ze(fe):Ze.length>1?(we=[ee,ee,"",fe],w.setFilters.hasOwnProperty(ee.toLowerCase())?ro(function(Ce,rt){for(var ut,yt=Ze(Ce,fe),wt=yt.length;wt--;)Ce[ut=ya(Ce,yt[wt])]=!(rt[ut]=yt[wt])}):function(Ce){return Ze(Ce,0,we)}):Ze}},pseudos:{not:ro(function(ee){var fe=[],we=[],Ze=pe(ee.replace(Wo,"$1"));return Ze[$n]?ro(function(Ce,rt,ut,yt){for(var wt,Ut=Ze(Ce,null,yt,[]),Vt=Ce.length;Vt--;)(wt=Ut[Vt])&&(Ce[Vt]=!(rt[Vt]=wt))}):function(Ce,rt,ut){return fe[0]=Ce,Ze(fe,null,ut,we),fe[0]=null,!we.pop()}}),has:ro(function(ee){return function(fe){return yn(ee,fe).length>0}}),contains:ro(function(ee){return ee=ee.replace(Zr,ui),function(fe){return(fe.textContent||D(fe)).indexOf(ee)>-1}}),lang:ro(function(ee){return Mo.test(ee||"")||yn.error("unsupported lang: "+ee),ee=ee.replace(Zr,ui).toLowerCase(),function(fe){var we;do{if(we=Gt?fe.lang:fe.getAttribute("xml:lang")||fe.getAttribute("lang"))return(we=we.toLowerCase())===ee||0===we.indexOf(ee+"-")}while((fe=fe.parentNode)&&1===fe.nodeType);return!1}}),target:function(ee){var fe=l.location&&l.location.hash;return fe&&fe.slice(1)===ee.id},root:function(ee){return ee===Rt},focus:function(ee){return ee===Qe.activeElement&&(!Qe.hasFocus||Qe.hasFocus())&&!!(ee.type||ee.href||~ee.tabIndex)},enabled:be(!1),disabled:be(!0),checked:function(ee){var fe=ee.nodeName.toLowerCase();return"input"===fe&&!!ee.checked||"option"===fe&&!!ee.selected},selected:function(ee){return!0===ee.selected},empty:function(ee){for(ee=ee.firstChild;ee;ee=ee.nextSibling)if(ee.nodeType<6)return!1;return!0},parent:function(ee){return!w.pseudos.empty(ee)},header:function(ee){return zl.test(ee.nodeName)},input:function(ee){return Ha.test(ee.nodeName)},button:function(ee){var fe=ee.nodeName.toLowerCase();return"input"===fe&&"button"===ee.type||"button"===fe},text:function(ee){var fe;return"input"===ee.nodeName.toLowerCase()&&"text"===ee.type&&(null==(fe=ee.getAttribute("type"))||"text"===fe.toLowerCase())},first:Ye(function(){return[0]}),last:Ye(function(ee,fe){return[fe-1]}),eq:Ye(function(ee,fe,we){return[we<0?we+fe:we]}),even:Ye(function(ee,fe){for(var we=0;we<fe;we+=2)ee.push(we);return ee}),odd:Ye(function(ee,fe){for(var we=1;we<fe;we+=2)ee.push(we);return ee}),lt:Ye(function(ee,fe,we){for(var Ze=we<0?we+fe:we>fe?fe:we;--Ze>=0;)ee.push(Ze);return ee}),gt:Ye(function(ee,fe,we){for(var Ze=we<0?we+fe:we;++Ze<fe;)ee.push(Ze);return ee})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[f]=rd(f);for(f in{submit:!0,reset:!0})w.pseudos[f]=za(f);function Mt(){}function qt(ee){for(var fe=0,we=ee.length,Ze="";fe<we;fe++)Ze+=ee[fe].value;return Ze}function Mn(ee,fe,we){var Ze=fe.dir,Ce=fe.next,rt=Ce||Ze,ut=we&&"parentNode"===rt,yt=Ln++;return fe.first?function(wt,Ut,Vt){for(;wt=wt[Ze];)if(1===wt.nodeType||ut)return ee(wt,Ut,Vt);return!1}:function(wt,Ut,Vt){var Ht,nn,Wn,jt=[Kr,yt];if(Vt){for(;wt=wt[Ze];)if((1===wt.nodeType||ut)&&ee(wt,Ut,Vt))return!0}else for(;wt=wt[Ze];)if(1===wt.nodeType||ut)if(nn=(Wn=wt[$n]||(wt[$n]={}))[wt.uniqueID]||(Wn[wt.uniqueID]={}),Ce&&Ce===wt.nodeName.toLowerCase())wt=wt[Ze]||wt;else{if((Ht=nn[rt])&&Ht[0]===Kr&&Ht[1]===yt)return jt[2]=Ht[2];if(nn[rt]=jt,jt[2]=ee(wt,Ut,Vt))return!0}return!1}}function gr(ee){return ee.length>1?function(fe,we,Ze){for(var Ce=ee.length;Ce--;)if(!ee[Ce](fe,we,Ze))return!1;return!0}:ee[0]}function Ga(ee,fe,we,Ze,Ce){for(var rt,ut=[],yt=0,wt=ee.length,Ut=null!=fe;yt<wt;yt++)(rt=ee[yt])&&(!we||we(rt,Ze,Ce))&&(ut.push(rt),Ut&&fe.push(yt));return ut}function ki(ee,fe,we,Ze,Ce,rt){return Ze&&!Ze[$n]&&(Ze=ki(Ze)),Ce&&!Ce[$n]&&(Ce=ki(Ce,rt)),ro(function(ut,yt,wt,Ut){var Vt,Ht,nn,Wn=[],jt=[],mr=yt.length,Sr=ut||function Qn(ee,fe,we){for(var Ze=0,Ce=fe.length;Ze<Ce;Ze++)yn(ee,fe[Ze],we);return we}(fe||"*",wt.nodeType?[wt]:wt,[]),bi=!ee||!ut&&fe?Sr:Ga(Sr,Wn,ee,wt,Ut),At=we?Ce||(ut?ee:mr||Ze)?[]:yt:bi;if(we&&we(bi,At,wt,Ut),Ze)for(Vt=Ga(At,jt),Ze(Vt,[],wt,Ut),Ht=Vt.length;Ht--;)(nn=Vt[Ht])&&(At[jt[Ht]]=!(bi[jt[Ht]]=nn));if(ut){if(Ce||ee){if(Ce){for(Vt=[],Ht=At.length;Ht--;)(nn=At[Ht])&&Vt.push(bi[Ht]=nn);Ce(null,At=[],Vt,Ut)}for(Ht=At.length;Ht--;)(nn=At[Ht])&&(Vt=Ce?ya(ut,nn):Wn[Ht])>-1&&(ut[Vt]=!(yt[Vt]=nn))}}else At=Ga(At===yt?At.splice(mr,At.length):At),Ce?Ce(null,yt,At,Ut):xi.apply(yt,At)})}function Dr(ee){for(var fe,we,Ze,Ce=ee.length,rt=w.relative[ee[0].type],ut=rt||w.relative[" "],yt=rt?1:0,wt=Mn(function(Ht){return Ht===fe},ut,!0),Ut=Mn(function(Ht){return ya(fe,Ht)>-1},ut,!0),Vt=[function(Ht,nn,Wn){var jt=!rt&&(Wn||nn!==Ae)||((fe=nn).nodeType?wt(Ht,nn,Wn):Ut(Ht,nn,Wn));return fe=null,jt}];yt<Ce;yt++)if(we=w.relative[ee[yt].type])Vt=[Mn(gr(Vt),we)];else{if((we=w.filter[ee[yt].type].apply(null,ee[yt].matches))[$n]){for(Ze=++yt;Ze<Ce&&!w.relative[ee[Ze].type];Ze++);return ki(yt>1&&gr(Vt),yt>1&&qt(ee.slice(0,yt-1).concat({value:" "===ee[yt-2].type?"*":""})).replace(Wo,"$1"),we,yt<Ze&&Dr(ee.slice(yt,Ze)),Ze<Ce&&Dr(ee=ee.slice(Ze)),Ze<Ce&&qt(ee))}Vt.push(we)}return gr(Vt)}return Mt.prototype=w.filters=w.pseudos,w.setFilters=new Mt,Y=yn.tokenize=function(ee,fe){var we,Ze,Ce,rt,ut,yt,wt,Ut=Va[ee+" "];if(Ut)return fe?0:Ut.slice(0);for(ut=ee,yt=[],wt=w.preFilter;ut;){for(rt in(!we||(Ze=Ku.exec(ut)))&&(Ze&&(ut=ut.slice(Ze[0].length)||ut),yt.push(Ce=[])),we=!1,(Ze=uu.exec(ut))&&(we=Ze.shift(),Ce.push({value:we,type:Ze[0].replace(Wo," ")}),ut=ut.slice(we.length)),w.filter)(Ze=Os[rt].exec(ut))&&(!wt[rt]||(Ze=wt[rt](Ze)))&&(we=Ze.shift(),Ce.push({value:we,type:rt,matches:Ze}),ut=ut.slice(we.length));if(!we)break}return fe?ut.length:ut?yn.error(ee):Va(ee,yt).slice(0)},pe=yn.compile=function(ee,fe){var we,Ze=[],Ce=[],rt=fs[ee+" "];if(!rt){for(fe||(fe=Y(ee)),we=fe.length;we--;)(rt=Dr(fe[we]))[$n]?Ze.push(rt):Ce.push(rt);rt=fs(ee,function Ns(ee,fe){var we=fe.length>0,Ze=ee.length>0,Ce=function(rt,ut,yt,wt,Ut){var Vt,Ht,nn,Wn=0,jt="0",mr=rt&&[],Sr=[],bi=Ae,At=rt||Ze&&w.find.TAG("*",Ut),_a=Kr+=null==bi?1:Math.random()||.1,oo=At.length;for(Ut&&(Ae=ut==Qe||ut||Ut);jt!==oo&&null!=(Vt=At[jt]);jt++){if(Ze&&Vt){for(Ht=0,!ut&&Vt.ownerDocument!=Qe&&(De(Vt),yt=!Gt);nn=ee[Ht++];)if(nn(Vt,ut||Qe,yt)){wt.push(Vt);break}Ut&&(Kr=_a)}we&&((Vt=!nn&&Vt)&&Wn--,rt&&mr.push(Vt))}if(Wn+=jt,we&&jt!==Wn){for(Ht=0;nn=fe[Ht++];)nn(mr,Sr,ut,yt);if(rt){if(Wn>0)for(;jt--;)mr[jt]||Sr[jt]||(Sr[jt]=Po.call(wt));Sr=Ga(Sr)}xi.apply(wt,Sr),Ut&&!rt&&Sr.length>0&&Wn+fe.length>1&&yn.uniqueSort(wt)}return Ut&&(Kr=_a,Ae=bi),mr};return we?ro(Ce):Ce}(Ce,Ze)),rt.selector=ee}return rt},ce=yn.select=function(ee,fe,we,Ze){var Ce,rt,ut,yt,wt,Ut="function"==typeof ee&&ee,Vt=!Ze&&Y(ee=Ut.selector||ee);if(we=we||[],1===Vt.length){if((rt=Vt[0]=Vt[0].slice(0)).length>2&&"ID"===(ut=rt[0]).type&&9===fe.nodeType&&Gt&&w.relative[rt[1].type]){if(!(fe=(w.find.ID(ut.matches[0].replace(Zr,ui),fe)||[])[0]))return we;Ut&&(fe=fe.parentNode),ee=ee.slice(rt.shift().value.length)}for(Ce=Os.needsContext.test(ee)?0:rt.length;Ce--&&!w.relative[yt=(ut=rt[Ce]).type];)if((wt=w.find[yt])&&(Ze=wt(ut.matches[0].replace(Zr,ui),Ls.test(rt[0].type)&&Ue(fe.parentNode)||fe))){if(rt.splice(Ce,1),!(ee=Ze.length&&qt(rt)))return xi.apply(we,Ze),we;break}}return(Ut||pe(ee,Vt))(Ze,fe,!Gt,we,!fe||Ls.test(ee)&&Ue(fe.parentNode)||fe),we},_.sortStable=$n.split("").sort(Wi).join("")===$n,_.detectDuplicates=!!lt,De(),_.sortDetached=io(function(ee){return 1&ee.compareDocumentPosition(Qe.createElement("fieldset"))}),io(function(ee){return ee.innerHTML="<a href='#'></a>","#"===ee.firstChild.getAttribute("href")})||Rs("type|href|height|width",function(ee,fe,we){if(!we)return ee.getAttribute(fe,"type"===fe.toLowerCase()?1:2)}),(!_.attributes||!io(function(ee){return ee.innerHTML="<input/>",ee.firstChild.setAttribute("value",""),""===ee.firstChild.getAttribute("value")}))&&Rs("value",function(ee,fe,we){if(!we&&"input"===ee.nodeName.toLowerCase())return ee.defaultValue}),io(function(ee){return null==ee.getAttribute("disabled")})||Rs(hs,function(ee,fe,we){var Ze;if(!we)return!0===ee[fe]?fe.toLowerCase():(Ze=ee.getAttributeNode(fe))&&Ze.specified?Ze.value:null}),yn}(m);b.find=at,b.expr=at.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=at.uniqueSort,b.text=at.getText,b.isXMLDoc=at.isXML,b.contains=at.contains,b.escapeSelector=at.escape;var ze=function(l,f,_){for(var w=[],D=void 0!==_;(l=l[f])&&9!==l.nodeType;)if(1===l.nodeType){if(D&&b(l).is(_))break;w.push(l)}return w},Fe=function(l,f){for(var _=[];l;l=l.nextSibling)1===l.nodeType&&l!==f&&_.push(l);return _},Ne=b.expr.match.needsContext;function tt(l,f){return l.nodeName&&l.nodeName.toLowerCase()===f.toLowerCase()}var Xe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function mt(l,f,_){return ae(f)?b.grep(l,function(w,D){return!!f.call(w,D,w)!==_}):f.nodeType?b.grep(l,function(w){return w===f!==_}):"string"!=typeof f?b.grep(l,function(w){return N.call(f,w)>-1!==_}):b.filter(f,l,_)}b.filter=function(l,f,_){var w=f[0];return _&&(l=":not("+l+")"),1===f.length&&1===w.nodeType?b.find.matchesSelector(w,l)?[w]:[]:b.find.matches(l,b.grep(f,function(D){return 1===D.nodeType}))},b.fn.extend({find:function(l){var f,_,w=this.length,D=this;if("string"!=typeof l)return this.pushStack(b(l).filter(function(){for(f=0;f<w;f++)if(b.contains(D[f],this))return!0}));for(_=this.pushStack([]),f=0;f<w;f++)b.find(l,D[f],_);return w>1?b.uniqueSort(_):_},filter:function(l){return this.pushStack(mt(this,l||[],!1))},not:function(l){return this.pushStack(mt(this,l||[],!0))},is:function(l){return!!mt(this,"string"==typeof l&&Ne.test(l)?b(l):l||[],!1).length}});var _t,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Zt=b.fn.init=function(l,f,_){var w,D;if(!l)return this;if(_=_||_t,"string"==typeof l){if(!(w="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:gt.exec(l))||!w[1]&&f)return!f||f.jquery?(f||_).find(l):this.constructor(f).find(l);if(w[1]){if(b.merge(this,b.parseHTML(w[1],(f=f instanceof b?f[0]:f)&&f.nodeType?f.ownerDocument||f:le,!0)),Xe.test(w[1])&&b.isPlainObject(f))for(w in f)ae(this[w])?this[w](f[w]):this.attr(w,f[w]);return this}return(D=le.getElementById(w[2]))&&(this[0]=D,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):ae(l)?void 0!==_.ready?_.ready(l):l(b):b.makeArray(l,this)};Zt.prototype=b.fn,_t=b(le);var un=/^(?:parents|prev(?:Until|All))/,Vn={children:!0,contents:!0,next:!0,prev:!0};function Kn(l,f){for(;(l=l[f])&&1!==l.nodeType;);return l}b.fn.extend({has:function(l){var f=b(l,this),_=f.length;return this.filter(function(){for(var w=0;w<_;w++)if(b.contains(this,f[w]))return!0})},closest:function(l,f){var _,w=0,D=this.length,H=[],Y="string"!=typeof l&&b(l);if(!Ne.test(l))for(;w<D;w++)for(_=this[w];_&&_!==f;_=_.parentNode)if(_.nodeType<11&&(Y?Y.index(_)>-1:1===_.nodeType&&b.find.matchesSelector(_,l))){H.push(_);break}return this.pushStack(H.length>1?b.uniqueSort(H):H)},index:function(l){return l?"string"==typeof l?N.call(b(l),this[0]):N.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,f){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(l,f))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),b.each({parent:function(l){var f=l.parentNode;return f&&11!==f.nodeType?f:null},parents:function(l){return ze(l,"parentNode")},parentsUntil:function(l,f,_){return ze(l,"parentNode",_)},next:function(l){return Kn(l,"nextSibling")},prev:function(l){return Kn(l,"previousSibling")},nextAll:function(l){return ze(l,"nextSibling")},prevAll:function(l){return ze(l,"previousSibling")},nextUntil:function(l,f,_){return ze(l,"nextSibling",_)},prevUntil:function(l,f,_){return ze(l,"previousSibling",_)},siblings:function(l){return Fe((l.parentNode||{}).firstChild,l)},children:function(l){return Fe(l.firstChild)},contents:function(l){return null!=l.contentDocument&&y(l.contentDocument)?l.contentDocument:(tt(l,"template")&&(l=l.content||l),b.merge([],l.childNodes))}},function(l,f){b.fn[l]=function(_,w){var D=b.map(this,f,_);return"Until"!==l.slice(-5)&&(w=_),w&&"string"==typeof w&&(D=b.filter(w,D)),this.length>1&&(Vn[l]||b.uniqueSort(D),un.test(l)&&D.reverse()),this.pushStack(D)}});var Hn=/[^\x20\t\r\n\f]+/g;function Un(l){return l}function $e(l){throw l}function Je(l,f,_,w){var D;try{l&&ae(D=l.promise)?D.call(l).done(f).fail(_):l&&ae(D=l.then)?D.call(l,f,_):f.apply(void 0,[l].slice(w))}catch(H){_.apply(void 0,[H])}}b.Callbacks=function(l){l="string"==typeof l?function dr(l){var f={};return b.each(l.match(Hn)||[],function(_,w){f[w]=!0}),f}(l):b.extend({},l);var f,_,w,D,H=[],Y=[],pe=-1,ce=function(){for(D=D||l.once,w=f=!0;Y.length;pe=-1)for(_=Y.shift();++pe<H.length;)!1===H[pe].apply(_[0],_[1])&&l.stopOnFalse&&(pe=H.length,_=!1);l.memory||(_=!1),f=!1,D&&(H=_?[]:"")},Ae={add:function(){return H&&(_&&!f&&(pe=H.length-1,Y.push(_)),function He(lt){b.each(lt,function(De,Qe){ae(Qe)?(!l.unique||!Ae.has(Qe))&&H.push(Qe):Qe&&Qe.length&&"string"!==Se(Qe)&&He(Qe)})}(arguments),_&&!f&&ce()),this},remove:function(){return b.each(arguments,function(He,lt){for(var De;(De=b.inArray(lt,H,De))>-1;)H.splice(De,1),De<=pe&&pe--}),this},has:function(He){return He?b.inArray(He,H)>-1:H.length>0},empty:function(){return H&&(H=[]),this},disable:function(){return D=Y=[],H=_="",this},disabled:function(){return!H},lock:function(){return D=Y=[],!_&&!f&&(H=_=""),this},locked:function(){return!!D},fireWith:function(He,lt){return D||(lt=[He,(lt=lt||[]).slice?lt.slice():lt],Y.push(lt),f||ce()),this},fire:function(){return Ae.fireWith(this,arguments),this},fired:function(){return!!w}};return Ae},b.extend({Deferred:function(l){var f=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],_="pending",w={state:function(){return _},always:function(){return D.done(arguments).fail(arguments),this},catch:function(H){return w.then(null,H)},pipe:function(){var H=arguments;return b.Deferred(function(Y){b.each(f,function(pe,ce){var Ae=ae(H[ce[4]])&&H[ce[4]];D[ce[1]](function(){var He=Ae&&Ae.apply(this,arguments);He&&ae(He.promise)?He.promise().progress(Y.notify).done(Y.resolve).fail(Y.reject):Y[ce[0]+"With"](this,Ae?[He]:arguments)})}),H=null}).promise()},then:function(H,Y,pe){var ce=0;function Ae(He,lt,De,Qe){return function(){var Rt=this,Gt=arguments,kt=function(){var an,br;if(!(He<ce)){if((an=De.apply(Rt,Gt))===lt.promise())throw new TypeError("Thenable self-resolution");ae(br=an&&("object"==typeof an||"function"==typeof an)&&an.then)?Qe?br.call(an,Ae(ce,lt,Un,Qe),Ae(ce,lt,$e,Qe)):(ce++,br.call(an,Ae(ce,lt,Un,Qe),Ae(ce,lt,$e,Qe),Ae(ce,lt,Un,lt.notifyWith))):(De!==Un&&(Rt=void 0,Gt=[an]),(Qe||lt.resolveWith)(Rt,Gt))}},ur=Qe?kt:function(){try{kt()}catch(an){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(an,ur.stackTrace),He+1>=ce&&(De!==$e&&(Rt=void 0,Gt=[an]),lt.rejectWith(Rt,Gt))}};He?ur():(b.Deferred.getStackHook&&(ur.stackTrace=b.Deferred.getStackHook()),m.setTimeout(ur))}}return b.Deferred(function(He){f[0][3].add(Ae(0,He,ae(pe)?pe:Un,He.notifyWith)),f[1][3].add(Ae(0,He,ae(H)?H:Un)),f[2][3].add(Ae(0,He,ae(Y)?Y:$e))}).promise()},promise:function(H){return null!=H?b.extend(H,w):w}},D={};return b.each(f,function(H,Y){var pe=Y[2],ce=Y[5];w[Y[1]]=pe.add,ce&&pe.add(function(){_=ce},f[3-H][2].disable,f[3-H][3].disable,f[0][2].lock,f[0][3].lock),pe.add(Y[3].fire),D[Y[0]]=function(){return D[Y[0]+"With"](this===D?void 0:this,arguments),this},D[Y[0]+"With"]=pe.fireWith}),w.promise(D),l&&l.call(D,D),D},when:function(l){var f=arguments.length,_=f,w=Array(_),D=I.call(arguments),H=b.Deferred(),Y=function(pe){return function(ce){w[pe]=this,D[pe]=arguments.length>1?I.call(arguments):ce,--f||H.resolveWith(w,D)}};if(f<=1&&(Je(l,H.done(Y(_)).resolve,H.reject,!f),"pending"===H.state()||ae(D[_]&&D[_].then)))return H.then();for(;_--;)Je(D[_],Y(_),H.reject);return H.promise()}});var ct=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(l,f){m.console&&m.console.warn&&l&&ct.test(l.name)&&m.console.warn("jQuery.Deferred exception: "+l.message,l.stack,f)},b.readyException=function(l){m.setTimeout(function(){throw l})};var xt=b.Deferred();function Ot(){le.removeEventListener("DOMContentLoaded",Ot),m.removeEventListener("load",Ot),b.ready()}b.fn.ready=function(l){return xt.then(l).catch(function(f){b.readyException(f)}),this},b.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--b.readyWait:b.isReady)||(b.isReady=!0,!(!0!==l&&--b.readyWait>0)&&xt.resolveWith(le,[b]))}}),b.ready.then=xt.then,"complete"===le.readyState||"loading"!==le.readyState&&!le.documentElement.doScroll?m.setTimeout(b.ready):(le.addEventListener("DOMContentLoaded",Ot),m.addEventListener("load",Ot));var ln=function(l,f,_,w,D,H,Y){var pe=0,ce=l.length,Ae=null==_;if("object"===Se(_))for(pe in D=!0,_)ln(l,f,pe,_[pe],!0,H,Y);else if(void 0!==w&&(D=!0,ae(w)||(Y=!0),Ae&&(Y?(f.call(l,w),f=null):(Ae=f,f=function(He,lt,De){return Ae.call(b(He),De)})),f))for(;pe<ce;pe++)f(l[pe],_,Y?w:w.call(l[pe],pe,f(l[pe],_)));return D?l:Ae?f.call(l):ce?f(l[0],_):H},Fn=/^-ms-/,sr=/-([a-z])/g;function co(l,f){return f.toUpperCase()}function dn(l){return l.replace(Fn,"ms-").replace(sr,co)}var en=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function F(){this.expando=b.expando+F.uid++}F.uid=1,F.prototype={cache:function(l){var f=l[this.expando];return f||(f={},en(l)&&(l.nodeType?l[this.expando]=f:Object.defineProperty(l,this.expando,{value:f,configurable:!0}))),f},set:function(l,f,_){var w,D=this.cache(l);if("string"==typeof f)D[dn(f)]=_;else for(w in f)D[dn(w)]=f[w];return D},get:function(l,f){return void 0===f?this.cache(l):l[this.expando]&&l[this.expando][dn(f)]},access:function(l,f,_){return void 0===f||f&&"string"==typeof f&&void 0===_?this.get(l,f):(this.set(l,f,_),void 0!==_?_:f)},remove:function(l,f){var _,w=l[this.expando];if(void 0!==w){if(void 0!==f)for((_=(f=Array.isArray(f)?f.map(dn):(f=dn(f))in w?[f]:f.match(Hn)||[]).length);_--;)delete w[f[_]];(void 0===f||b.isEmptyObject(w))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var f=l[this.expando];return void 0!==f&&!b.isEmptyObject(f)}};var G=new F,re=new F,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ke=/[A-Z]/g;function Ct(l,f,_){var w;if(void 0===_&&1===l.nodeType)if(w="data-"+f.replace(Ke,"-$&").toLowerCase(),"string"==typeof(_=l.getAttribute(w))){try{_=function qe(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:xe.test(l)?JSON.parse(l):l)}(_)}catch(D){}re.set(l,f,_)}else _=void 0;return _}b.extend({hasData:function(l){return re.hasData(l)||G.hasData(l)},data:function(l,f,_){return re.access(l,f,_)},removeData:function(l,f){re.remove(l,f)},_data:function(l,f,_){return G.access(l,f,_)},_removeData:function(l,f){G.remove(l,f)}}),b.fn.extend({data:function(l,f){var _,w,D,H=this[0],Y=H&&H.attributes;if(void 0===l){if(this.length&&(D=re.get(H),1===H.nodeType&&!G.get(H,"hasDataAttrs"))){for(_=Y.length;_--;)Y[_]&&0===(w=Y[_].name).indexOf("data-")&&(w=dn(w.slice(5)),Ct(H,w,D[w]));G.set(H,"hasDataAttrs",!0)}return D}return"object"==typeof l?this.each(function(){re.set(this,l)}):ln(this,function(pe){var ce;if(H&&void 0===pe)return void 0!==(ce=re.get(H,l))||void 0!==(ce=Ct(H,l))?ce:void 0;this.each(function(){re.set(this,l,pe)})},null,f,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),b.extend({queue:function(l,f,_){var w;if(l)return w=G.get(l,f=(f||"fx")+"queue"),_&&(!w||Array.isArray(_)?w=G.access(l,f,b.makeArray(_)):w.push(_)),w||[]},dequeue:function(l,f){var _=b.queue(l,f=f||"fx"),w=_.length,D=_.shift(),H=b._queueHooks(l,f);"inprogress"===D&&(D=_.shift(),w--),D&&("fx"===f&&_.unshift("inprogress"),delete H.stop,D.call(l,function(){b.dequeue(l,f)},H)),!w&&H&&H.empty.fire()},_queueHooks:function(l,f){var _=f+"queueHooks";return G.get(l,_)||G.access(l,_,{empty:b.Callbacks("once memory").add(function(){G.remove(l,[f+"queue",_])})})}}),b.fn.extend({queue:function(l,f){var _=2;return"string"!=typeof l&&(f=l,l="fx",_--),arguments.length<_?b.queue(this[0],l):void 0===f?this:this.each(function(){var w=b.queue(this,l,f);b._queueHooks(this,l),"fx"===l&&"inprogress"!==w[0]&&b.dequeue(this,l)})},dequeue:function(l){return this.each(function(){b.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,f){var _,w=1,D=b.Deferred(),H=this,Y=this.length,pe=function(){--w||D.resolveWith(H,[H])};for("string"!=typeof l&&(f=l,l=void 0),l=l||"fx";Y--;)(_=G.get(H[Y],l+"queueHooks"))&&_.empty&&(w++,_.empty.add(pe));return pe(),D.promise(f)}});var Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,on=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),bn=["Top","Right","Bottom","Left"],Pn=le.documentElement,mn=function(l){return b.contains(l.ownerDocument,l)},vr={composed:!0};Pn.getRootNode&&(mn=function(l){return b.contains(l.ownerDocument,l)||l.getRootNode(vr)===l.ownerDocument});var fr=function(l,f){return"none"===(l=f||l).style.display||""===l.style.display&&mn(l)&&"none"===b.css(l,"display")};function eo(l,f,_,w){var D,H,Y=20,pe=w?function(){return w.cur()}:function(){return b.css(l,f,"")},ce=pe(),Ae=_&&_[3]||(b.cssNumber[f]?"":"px"),He=l.nodeType&&(b.cssNumber[f]||"px"!==Ae&&+ce)&&on.exec(b.css(l,f));if(He&&He[3]!==Ae){for(Ae=Ae||He[3],He=+(ce/=2)||1;Y--;)b.style(l,f,He+Ae),(1-H)*(1-(H=pe()/ce||.5))<=0&&(Y=0),He/=H;b.style(l,f,(He*=2)+Ae),_=_||[]}return _&&(He=+He||+ce||0,D=_[1]?He+(_[1]+1)*_[2]:+_[2],w&&(w.unit=Ae,w.start=He,w.end=D)),D}var Yn={};function yr(l){var f,_=l.ownerDocument,w=l.nodeName,D=Yn[w];return D||(f=_.body.appendChild(_.createElement(w)),D=b.css(f,"display"),f.parentNode.removeChild(f),"none"===D&&(D="block"),Yn[w]=D,D)}function hr(l,f){for(var _,w,D=[],H=0,Y=l.length;H<Y;H++)(w=l[H]).style&&(_=w.style.display,f?("none"===_&&(D[H]=G.get(w,"display")||null,D[H]||(w.style.display="")),""===w.style.display&&fr(w)&&(D[H]=yr(w))):"none"!==_&&(D[H]="none",G.set(w,"display",_)));for(H=0;H<Y;H++)null!=D[H]&&(l[H].style.display=D[H]);return l}b.fn.extend({show:function(){return hr(this,!0)},hide:function(){return hr(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){fr(this)?b(this).show():b(this).hide()})}});var f,_,_r=/^(?:checkbox|radio)$/i,$r=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gi=/^$|^module$|\/(?:java|ecma)script/i;f=le.createDocumentFragment().appendChild(le.createElement("div")),(_=le.createElement("input")).setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),f.appendChild(_),r.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,f.innerHTML="<textarea>x</textarea>",r.noCloneChecked=!!f.cloneNode(!0).lastChild.defaultValue,f.innerHTML="<option></option>",r.option=!!f.lastChild;var xr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vn(l,f){var _;return _=void 0!==l.getElementsByTagName?l.getElementsByTagName(f||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(f||"*"):[],void 0===f||f&&tt(l,f)?b.merge([l],_):_}function mi(l,f){for(var _=0,w=l.length;_<w;_++)G.set(l[_],"globalEval",!f||G.get(f[_],"globalEval"))}xr.tbody=xr.tfoot=xr.colgroup=xr.caption=xr.thead,xr.th=xr.td,r.option||(xr.optgroup=xr.option=[1,"<select multiple='multiple'>","</select>"]);var Bo=/<|&#?\w+;/;function Mi(l,f,_,w,D){for(var H,Y,pe,ce,Ae,He,lt=f.createDocumentFragment(),De=[],Qe=0,Rt=l.length;Qe<Rt;Qe++)if((H=l[Qe])||0===H)if("object"===Se(H))b.merge(De,H.nodeType?[H]:H);else if(Bo.test(H)){for(Y=Y||lt.appendChild(f.createElement("div")),pe=($r.exec(H)||["",""])[1].toLowerCase(),Y.innerHTML=(ce=xr[pe]||xr._default)[1]+b.htmlPrefilter(H)+ce[2],He=ce[0];He--;)Y=Y.lastChild;b.merge(De,Y.childNodes),(Y=lt.firstChild).textContent=""}else De.push(f.createTextNode(H));for(lt.textContent="",Qe=0;H=De[Qe++];)if(w&&b.inArray(H,w)>-1)D&&D.push(H);else if(Ae=mn(H),Y=vn(lt.appendChild(H),"script"),Ae&&mi(Y),_)for(He=0;H=Y[He++];)gi.test(H.type||"")&&_.push(H);return lt}var Le=/^([^.]*)(?:\.(.+)|)/;function dt(){return!0}function nr(){return!1}function Rr(l,f){return l===function vi(){try{return le.activeElement}catch(l){}}()==("focus"===f)}function yi(l,f,_,w,D,H){var Y,pe;if("object"==typeof f){for(pe in"string"!=typeof _&&(w=w||_,_=void 0),f)yi(l,pe,_,w,f[pe],H);return l}if(null==w&&null==D?(D=_,w=_=void 0):null==D&&("string"==typeof _?(D=w,w=void 0):(D=w,w=_,_=void 0)),!1===D)D=nr;else if(!D)return l;return 1===H&&(Y=D,D=function(ce){return b().off(ce),Y.apply(this,arguments)},D.guid=Y.guid||(Y.guid=b.guid++)),l.each(function(){b.event.add(this,f,D,w,_)})}function to(l,f,_){_?(G.set(l,f,!1),b.event.add(l,f,{namespace:!1,handler:function(w){var D,H,Y=G.get(this,f);if(1&w.isTrigger&&this[f]){if(Y.length)(b.event.special[f]||{}).delegateType&&w.stopPropagation();else if(Y=I.call(arguments),G.set(this,f,Y),D=_(this,f),this[f](),Y!==(H=G.get(this,f))||D?G.set(this,f,!1):H={},Y!==H)return w.stopImmediatePropagation(),w.preventDefault(),H&&H.value}else Y.length&&(G.set(this,f,{value:b.event.trigger(b.extend(Y[0],b.Event.prototype),Y.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===G.get(l,f)&&b.event.add(l,f,dt)}b.event={global:{},add:function(l,f,_,w,D){var H,Y,pe,ce,Ae,He,lt,De,Qe,Rt,Gt,kt=G.get(l);if(en(l))for(_.handler&&(_=(H=_).handler,D=H.selector),D&&b.find.matchesSelector(Pn,D),_.guid||(_.guid=b.guid++),(ce=kt.events)||(ce=kt.events=Object.create(null)),(Y=kt.handle)||(Y=kt.handle=function(ur){return void 0!==b&&b.event.triggered!==ur.type?b.event.dispatch.apply(l,arguments):void 0}),Ae=(f=(f||"").match(Hn)||[""]).length;Ae--;)Qe=Gt=(pe=Le.exec(f[Ae])||[])[1],Rt=(pe[2]||"").split(".").sort(),Qe&&(lt=b.event.special[Qe]||{},lt=b.event.special[Qe=(D?lt.delegateType:lt.bindType)||Qe]||{},He=b.extend({type:Qe,origType:Gt,data:w,handler:_,guid:_.guid,selector:D,needsContext:D&&b.expr.match.needsContext.test(D),namespace:Rt.join(".")},H),(De=ce[Qe])||((De=ce[Qe]=[]).delegateCount=0,(!lt.setup||!1===lt.setup.call(l,w,Rt,Y))&&l.addEventListener&&l.addEventListener(Qe,Y)),lt.add&&(lt.add.call(l,He),He.handler.guid||(He.handler.guid=_.guid)),D?De.splice(De.delegateCount++,0,He):De.push(He),b.event.global[Qe]=!0)},remove:function(l,f,_,w,D){var H,Y,pe,ce,Ae,He,lt,De,Qe,Rt,Gt,kt=G.hasData(l)&&G.get(l);if(kt&&(ce=kt.events)){for(Ae=(f=(f||"").match(Hn)||[""]).length;Ae--;)if(Qe=Gt=(pe=Le.exec(f[Ae])||[])[1],Rt=(pe[2]||"").split(".").sort(),Qe){for(lt=b.event.special[Qe]||{},De=ce[Qe=(w?lt.delegateType:lt.bindType)||Qe]||[],pe=pe[2]&&new RegExp("(^|\\.)"+Rt.join("\\.(?:.*\\.|)")+"(\\.|$)"),Y=H=De.length;H--;)He=De[H],(D||Gt===He.origType)&&(!_||_.guid===He.guid)&&(!pe||pe.test(He.namespace))&&(!w||w===He.selector||"**"===w&&He.selector)&&(De.splice(H,1),He.selector&&De.delegateCount--,lt.remove&&lt.remove.call(l,He));Y&&!De.length&&((!lt.teardown||!1===lt.teardown.call(l,Rt,kt.handle))&&b.removeEvent(l,Qe,kt.handle),delete ce[Qe])}else for(Qe in ce)b.event.remove(l,Qe+f[Ae],_,w,!0);b.isEmptyObject(ce)&&G.remove(l,"handle events")}},dispatch:function(l){var f,_,w,D,H,Y,pe=new Array(arguments.length),ce=b.event.fix(l),Ae=(G.get(this,"events")||Object.create(null))[ce.type]||[],He=b.event.special[ce.type]||{};for(pe[0]=ce,f=1;f<arguments.length;f++)pe[f]=arguments[f];if(ce.delegateTarget=this,!He.preDispatch||!1!==He.preDispatch.call(this,ce)){for(Y=b.event.handlers.call(this,ce,Ae),f=0;(D=Y[f++])&&!ce.isPropagationStopped();)for(ce.currentTarget=D.elem,_=0;(H=D.handlers[_++])&&!ce.isImmediatePropagationStopped();)(!ce.rnamespace||!1===H.namespace||ce.rnamespace.test(H.namespace))&&(ce.handleObj=H,ce.data=H.data,void 0!==(w=((b.event.special[H.origType]||{}).handle||H.handler).apply(D.elem,pe))&&!1===(ce.result=w)&&(ce.preventDefault(),ce.stopPropagation()));return He.postDispatch&&He.postDispatch.call(this,ce),ce.result}},handlers:function(l,f){var _,w,D,H,Y,pe=[],ce=f.delegateCount,Ae=l.target;if(ce&&Ae.nodeType&&!("click"===l.type&&l.button>=1))for(;Ae!==this;Ae=Ae.parentNode||this)if(1===Ae.nodeType&&("click"!==l.type||!0!==Ae.disabled)){for(H=[],Y={},_=0;_<ce;_++)void 0===Y[D=(w=f[_]).selector+" "]&&(Y[D]=w.needsContext?b(D,this).index(Ae)>-1:b.find(D,this,null,[Ae]).length),Y[D]&&H.push(w);H.length&&pe.push({elem:Ae,handlers:H})}return Ae=this,ce<f.length&&pe.push({elem:Ae,handlers:f.slice(ce)}),pe},addProp:function(l,f){Object.defineProperty(b.Event.prototype,l,{enumerable:!0,configurable:!0,get:ae(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(_){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:_})}})},fix:function(l){return l[b.expando]?l:new b.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var f=this||l;return _r.test(f.type)&&f.click&&tt(f,"input")&&to(f,"click",dt),!1},trigger:function(l){var f=this||l;return _r.test(f.type)&&f.click&&tt(f,"input")&&to(f,"click"),!0},_default:function(l){var f=l.target;return _r.test(f.type)&&f.click&&tt(f,"input")&&G.get(f,"click")||tt(f,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},b.removeEvent=function(l,f,_){l.removeEventListener&&l.removeEventListener(f,_)},b.Event=function(l,f){if(!(this instanceof b.Event))return new b.Event(l,f);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?dt:nr,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,f&&b.extend(this,f),this.timeStamp=l&&l.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:nr,isPropagationStopped:nr,isImmediatePropagationStopped:nr,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=dt,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=dt,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=dt,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(l,f){b.event.special[l]={setup:function(){return to(this,l,Rr),!1},trigger:function(){return to(this,l),!0},_default:function(_){return G.get(_.target,l)},delegateType:f}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,f){b.event.special[l]={delegateType:f,bindType:f,handle:function(_){var w,D=this,H=_.relatedTarget,Y=_.handleObj;return(!H||H!==D&&!b.contains(D,H))&&(_.type=Y.origType,w=Y.handler.apply(this,arguments),_.type=f),w}}}),b.fn.extend({on:function(l,f,_,w){return yi(this,l,f,_,w)},one:function(l,f,_,w){return yi(this,l,f,_,w,1)},off:function(l,f,_){var w,D;if(l&&l.preventDefault&&l.handleObj)return w=l.handleObj,b(l.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof l){for(D in l)this.off(D,f,l[D]);return this}return(!1===f||"function"==typeof f)&&(_=f,f=void 0),!1===_&&(_=nr),this.each(function(){b.event.remove(this,l,_,f)})}});var Wr=/<script|<style|<link/i,wr=/checked\s*(?:[^=]|=\s*.checked.)/i,wo=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function os(l,f){return tt(l,"table")&&tt(11!==f.nodeType?f:f.firstChild,"tr")&&b(l).children("tbody")[0]||l}function ua(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Yr(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function as(l,f){var _,w,D,Y,pe,ce;if(1===f.nodeType){if(G.hasData(l)&&(ce=G.get(l).events))for(D in G.remove(f,"handle events"),ce)for(_=0,w=ce[D].length;_<w;_++)b.event.add(f,D,ce[D][_]);re.hasData(l)&&(Y=re.access(l),pe=b.extend({},Y),re.set(f,pe))}}function ss(l,f){var _=f.nodeName.toLowerCase();"input"===_&&_r.test(l.type)?f.checked=l.checked:("input"===_||"textarea"===_)&&(f.defaultValue=l.defaultValue)}function ji(l,f,_,w){f=O(f);var D,H,Y,pe,ce,Ae,He=0,lt=l.length,De=lt-1,Qe=f[0],Rt=ae(Qe);if(Rt||lt>1&&"string"==typeof Qe&&!r.checkClone&&wr.test(Qe))return l.each(function(Gt){var kt=l.eq(Gt);Rt&&(f[0]=Qe.call(this,Gt,kt.html())),ji(kt,f,_,w)});if(lt&&(H=(D=Mi(f,l[0].ownerDocument,!1,l,w)).firstChild,1===D.childNodes.length&&(D=H),H||w)){for(pe=(Y=b.map(vn(D,"script"),ua)).length;He<lt;He++)ce=D,He!==De&&(ce=b.clone(ce,!0,!0),pe&&b.merge(Y,vn(ce,"script"))),_.call(l[He],ce,He);if(pe)for(Ae=Y[Y.length-1].ownerDocument,b.map(Y,Yr),He=0;He<pe;He++)gi.test((ce=Y[He]).type||"")&&!G.access(ce,"globalEval")&&b.contains(Ae,ce)&&(ce.src&&"module"!==(ce.type||"").toLowerCase()?b._evalUrl&&!ce.noModule&&b._evalUrl(ce.src,{nonce:ce.nonce||ce.getAttribute("nonce")},Ae):ge(ce.textContent.replace(wo,""),ce,Ae))}return l}function us(l,f,_){for(var w,D=f?b.filter(f,l):l,H=0;null!=(w=D[H]);H++)!_&&1===w.nodeType&&b.cleanData(vn(w)),w.parentNode&&(_&&mn(w)&&mi(vn(w,"script")),w.parentNode.removeChild(w));return l}b.extend({htmlPrefilter:function(l){return l},clone:function(l,f,_){var w,D,H,Y,pe=l.cloneNode(!0),ce=mn(l);if(!(r.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||b.isXMLDoc(l)))for(Y=vn(pe),w=0,D=(H=vn(l)).length;w<D;w++)ss(H[w],Y[w]);if(f)if(_)for(H=H||vn(l),Y=Y||vn(pe),w=0,D=H.length;w<D;w++)as(H[w],Y[w]);else as(l,pe);return(Y=vn(pe,"script")).length>0&&mi(Y,!ce&&vn(l,"script")),pe},cleanData:function(l){for(var f,_,w,D=b.event.special,H=0;void 0!==(_=l[H]);H++)if(en(_)){if(f=_[G.expando]){if(f.events)for(w in f.events)D[w]?b.event.remove(_,w):b.removeEvent(_,w,f.handle);_[G.expando]=void 0}_[re.expando]&&(_[re.expando]=void 0)}}}),b.fn.extend({detach:function(l){return us(this,l,!0)},remove:function(l){return us(this,l)},text:function(l){return ln(this,function(f){return void 0===f?b.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=f)})},null,l,arguments.length)},append:function(){return ji(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||os(this,l).appendChild(l)})},prepend:function(){return ji(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var f=os(this,l);f.insertBefore(l,f.firstChild)}})},before:function(){return ji(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return ji(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,f=0;null!=(l=this[f]);f++)1===l.nodeType&&(b.cleanData(vn(l,!1)),l.textContent="");return this},clone:function(l,f){return l=null!=l&&l,f=null==f?l:f,this.map(function(){return b.clone(this,l,f)})},html:function(l){return ln(this,function(f){var _=this[0]||{},w=0,D=this.length;if(void 0===f&&1===_.nodeType)return _.innerHTML;if("string"==typeof f&&!Wr.test(f)&&!xr[($r.exec(f)||["",""])[1].toLowerCase()]){f=b.htmlPrefilter(f);try{for(;w<D;w++)1===(_=this[w]||{}).nodeType&&(b.cleanData(vn(_,!1)),_.innerHTML=f);_=0}catch(H){}}_&&this.empty().append(f)},null,l,arguments.length)},replaceWith:function(){var l=[];return ji(this,arguments,function(f){var _=this.parentNode;b.inArray(this,l)<0&&(b.cleanData(vn(this)),_&&_.replaceChild(f,this))},l)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,f){b.fn[l]=function(_){for(var w,D=[],H=b(_),Y=H.length-1,pe=0;pe<=Y;pe++)w=pe===Y?this:this.clone(!0),b(H[pe])[f](w),A.apply(D,w.get());return this.pushStack(D)}});var Oa=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),ls=/^--/,Vo=function(l){var f=l.ownerDocument.defaultView;return(!f||!f.opener)&&(f=m),f.getComputedStyle(l)},Is=function(l,f,_){var w,D,H={};for(D in f)H[D]=l.style[D],l.style[D]=f[D];for(D in w=_.call(l),f)l.style[D]=H[D];return w},La=new RegExp(bn.join("|"),"i"),fo="[\\x20\\t\\r\\n\\f]",ru=new RegExp("^"+fo+"+|((?:^|[^\\\\])(?:\\\\.)*)"+fo+"+$","g");function la(l,f,_){var w,D,H,Y,pe=ls.test(f),ce=l.style;return(_=_||Vo(l))&&(Y=_.getPropertyValue(f)||_[f],pe&&Y&&(Y=Y.replace(ru,"$1")||void 0),""===Y&&!mn(l)&&(Y=b.style(l,f)),!r.pixelBoxStyles()&&Oa.test(Y)&&La.test(f)&&(w=ce.width,D=ce.minWidth,H=ce.maxWidth,ce.minWidth=ce.maxWidth=ce.width=Y,Y=_.width,ce.width=w,ce.minWidth=D,ce.maxWidth=H)),void 0!==Y?Y+"":Y}function Ps(l,f){return{get:function(){if(!l())return(this.get=f).apply(this,arguments);delete this.get}}}!function(){function l(){if(Ae){ce.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ae.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Pn.appendChild(ce).appendChild(Ae);var He=m.getComputedStyle(Ae);_="1%"!==He.top,pe=12===f(He.marginLeft),Ae.style.right="60%",H=36===f(He.right),w=36===f(He.width),Ae.style.position="absolute",D=12===f(Ae.offsetWidth/3),Pn.removeChild(ce),Ae=null}}function f(He){return Math.round(parseFloat(He))}var _,w,D,H,Y,pe,ce=le.createElement("div"),Ae=le.createElement("div");!Ae.style||(Ae.style.backgroundClip="content-box",Ae.cloneNode(!0).style.backgroundClip="",r.clearCloneStyle="content-box"===Ae.style.backgroundClip,b.extend(r,{boxSizingReliable:function(){return l(),w},pixelBoxStyles:function(){return l(),H},pixelPosition:function(){return l(),_},reliableMarginLeft:function(){return l(),pe},scrollboxSize:function(){return l(),D},reliableTrDimensions:function(){var He,lt,De,Qe;return null==Y&&(He=le.createElement("table"),lt=le.createElement("tr"),De=le.createElement("div"),He.style.cssText="position:absolute;left:-11111px;border-collapse:separate",lt.style.cssText="border:1px solid",lt.style.height="1px",De.style.height="9px",De.style.display="block",Pn.appendChild(He).appendChild(lt).appendChild(De),Qe=m.getComputedStyle(lt),Y=parseInt(Qe.height,10)+parseInt(Qe.borderTopWidth,10)+parseInt(Qe.borderBottomWidth,10)===lt.offsetHeight,Pn.removeChild(He)),Y}}))}();var Ms=["Webkit","Moz","ms"],Ho=le.createElement("div").style,So={};function Fr(l){return b.cssProps[l]||So[l]||(l in Ho?l:So[l]=function ca(l){for(var f=l[0].toUpperCase()+l.slice(1),_=Ms.length;_--;)if((l=Ms[_]+f)in Ho)return l}(l)||l)}var To=/^(none|table(?!-c[ea]).+)/,iu={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"};function cs(l,f,_){var w=on.exec(f);return w?Math.max(0,w[2]-(_||0))+(w[3]||"px"):f}function jo(l,f,_,w,D,H){var Y="width"===f?1:0,pe=0,ce=0;if(_===(w?"border":"content"))return 0;for(;Y<4;Y+=2)"margin"===_&&(ce+=b.css(l,_+bn[Y],!0,D)),w?("content"===_&&(ce-=b.css(l,"padding"+bn[Y],!0,D)),"margin"!==_&&(ce-=b.css(l,"border"+bn[Y]+"Width",!0,D))):(ce+=b.css(l,"padding"+bn[Y],!0,D),"padding"!==_?ce+=b.css(l,"border"+bn[Y]+"Width",!0,D):pe+=b.css(l,"border"+bn[Y]+"Width",!0,D));return!w&&H>=0&&(ce+=Math.max(0,Math.ceil(l["offset"+f[0].toUpperCase()+f.slice(1)]-H-ce-pe-.5))||0),ce}function ht(l,f,_){var w=Vo(l),H=(!r.boxSizingReliable()||_)&&"border-box"===b.css(l,"boxSizing",!1,w),Y=H,pe=la(l,f,w),ce="offset"+f[0].toUpperCase()+f.slice(1);if(Oa.test(pe)){if(!_)return pe;pe="auto"}return(!r.boxSizingReliable()&&H||!r.reliableTrDimensions()&&tt(l,"tr")||"auto"===pe||!parseFloat(pe)&&"inline"===b.css(l,"display",!1,w))&&l.getClientRects().length&&(H="border-box"===b.css(l,"boxSizing",!1,w),(Y=ce in l)&&(pe=l[ce])),(pe=parseFloat(pe)||0)+jo(l,f,_||(H?"border":"content"),Y,w,pe)+"px"}function Nr(l,f,_,w,D){return new Nr.prototype.init(l,f,_,w,D)}b.extend({cssHooks:{opacity:{get:function(l,f){if(f){var _=la(l,"opacity");return""===_?"1":_}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,f,_,w){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var D,H,Y,pe=dn(f),ce=ls.test(f),Ae=l.style;if(ce||(f=Fr(pe)),Y=b.cssHooks[f]||b.cssHooks[pe],void 0===_)return Y&&"get"in Y&&void 0!==(D=Y.get(l,!1,w))?D:Ae[f];if("string"==(H=typeof _)&&(D=on.exec(_))&&D[1]&&(_=eo(l,f,D),H="number"),null==_||_!=_)return;"number"===H&&!ce&&(_+=D&&D[3]||(b.cssNumber[pe]?"":"px")),!r.clearCloneStyle&&""===_&&0===f.indexOf("background")&&(Ae[f]="inherit"),(!Y||!("set"in Y)||void 0!==(_=Y.set(l,_,w)))&&(ce?Ae.setProperty(f,_):Ae[f]=_)}},css:function(l,f,_,w){var D,H,Y,pe=dn(f);return ls.test(f)||(f=Fr(pe)),(Y=b.cssHooks[f]||b.cssHooks[pe])&&"get"in Y&&(D=Y.get(l,!0,_)),void 0===D&&(D=la(l,f,w)),"normal"===D&&f in Ra&&(D=Ra[f]),""===_||_?(H=parseFloat(D),!0===_||isFinite(H)?H||0:D):D}}),b.each(["height","width"],function(l,f){b.cssHooks[f]={get:function(_,w,D){if(w)return!To.test(b.css(_,"display"))||_.getClientRects().length&&_.getBoundingClientRect().width?ht(_,f,D):Is(_,iu,function(){return ht(_,f,D)})},set:function(_,w,D){var H,Y=Vo(_),pe=!r.scrollboxSize()&&"absolute"===Y.position,Ae=(pe||D)&&"border-box"===b.css(_,"boxSizing",!1,Y),He=D?jo(_,f,D,Ae,Y):0;return Ae&&pe&&(He-=Math.ceil(_["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(Y[f])-jo(_,f,"border",!1,Y)-.5)),He&&(H=on.exec(w))&&"px"!==(H[3]||"px")&&(_.style[f]=w,w=b.css(_,f)),cs(0,w,He)}}}),b.cssHooks.marginLeft=Ps(r.reliableMarginLeft,function(l,f){if(f)return(parseFloat(la(l,"marginLeft"))||l.getBoundingClientRect().left-Is(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(l,f){b.cssHooks[l+f]={expand:function(_){for(var w=0,D={},H="string"==typeof _?_.split(" "):[_];w<4;w++)D[l+bn[w]+f]=H[w]||H[w-2]||H[0];return D}},"margin"!==l&&(b.cssHooks[l+f].set=cs)}),b.fn.extend({css:function(l,f){return ln(this,function(_,w,D){var H,Y,pe={},ce=0;if(Array.isArray(w)){for(H=Vo(_),Y=w.length;ce<Y;ce++)pe[w[ce]]=b.css(_,w[ce],!1,H);return pe}return void 0!==D?b.style(_,w,D):b.css(_,w)},l,f,arguments.length>1)}}),b.Tween=Nr,(Nr.prototype={constructor:Nr,init:function(l,f,_,w,D,H){this.elem=l,this.prop=_,this.easing=D||b.easing._default,this.options=f,this.start=this.now=this.cur(),this.end=w,this.unit=H||(b.cssNumber[_]?"":"px")},cur:function(){var l=Nr.propHooks[this.prop];return l&&l.get?l.get(this):Nr.propHooks._default.get(this)},run:function(l){var f,_=Nr.propHooks[this.prop];return this.pos=f=this.options.duration?b.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),_&&_.set?_.set(this):Nr.propHooks._default.set(this),this}}).init.prototype=Nr.prototype,(Nr.propHooks={_default:{get:function(l){var f;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(f=b.css(l.elem,l.prop,""))&&"auto"!==f?f:0},set:function(l){b.fx.step[l.prop]?b.fx.step[l.prop](l):1!==l.elem.nodeType||!b.cssHooks[l.prop]&&null==l.elem.style[Fr(l.prop)]?l.elem[l.prop]=l.now:b.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=Nr.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},b.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},b.fx=Nr.prototype.init,b.fx.step={};var zi,Pr,zo=/^(?:toggle|show|hide)$/,Gi=/queueHooks$/;function Br(){Pr&&(!1===le.hidden&&m.requestAnimationFrame?m.requestAnimationFrame(Br):m.setTimeout(Br,b.fx.interval),b.fx.tick())}function _i(){return m.setTimeout(function(){zi=void 0}),zi=Date.now()}function no(l,f){var _,w=0,D={height:l};for(f=f?1:0;w<4;w+=2-f)D["margin"+(_=bn[w])]=D["padding"+_]=l;return f&&(D.opacity=D.width=l),D}function da(l,f,_){for(var w,D=(or.tweeners[f]||[]).concat(or.tweeners["*"]),H=0,Y=D.length;H<Y;H++)if(w=D[H].call(_,f,l))return w}function or(l,f,_){var w,D,H=0,Y=or.prefilters.length,pe=b.Deferred().always(function(){delete ce.elem}),ce=function(){if(D)return!1;for(var lt=zi||_i(),De=Math.max(0,Ae.startTime+Ae.duration-lt),Rt=1-(De/Ae.duration||0),Gt=0,kt=Ae.tweens.length;Gt<kt;Gt++)Ae.tweens[Gt].run(Rt);return pe.notifyWith(l,[Ae,Rt,De]),Rt<1&&kt?De:(kt||pe.notifyWith(l,[Ae,1,0]),pe.resolveWith(l,[Ae]),!1)},Ae=pe.promise({elem:l,props:b.extend({},f),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},_),originalProperties:f,originalOptions:_,startTime:zi||_i(),duration:_.duration,tweens:[],createTween:function(lt,De){var Qe=b.Tween(l,Ae.opts,lt,De,Ae.opts.specialEasing[lt]||Ae.opts.easing);return Ae.tweens.push(Qe),Qe},stop:function(lt){var De=0,Qe=lt?Ae.tweens.length:0;if(D)return this;for(D=!0;De<Qe;De++)Ae.tweens[De].run(1);return lt?(pe.notifyWith(l,[Ae,1,0]),pe.resolveWith(l,[Ae,lt])):pe.rejectWith(l,[Ae,lt]),this}}),He=Ae.props;for(function Ai(l,f){var _,w,D,H,Y;for(_ in l)if(D=f[w=dn(_)],H=l[_],Array.isArray(H)&&(D=H[1],H=l[_]=H[0]),_!==w&&(l[w]=H,delete l[_]),(Y=b.cssHooks[w])&&"expand"in Y)for(_ in H=Y.expand(H),delete l[w],H)_ in l||(l[_]=H[_],f[_]=D);else f[w]=D}(He,Ae.opts.specialEasing);H<Y;H++)if(w=or.prefilters[H].call(Ae,l,He,Ae.opts))return ae(w.stop)&&(b._queueHooks(Ae.elem,Ae.opts.queue).stop=w.stop.bind(w)),w;return b.map(He,da,Ae),ae(Ae.opts.start)&&Ae.opts.start.call(l,Ae),Ae.progress(Ae.opts.progress).done(Ae.opts.done,Ae.opts.complete).fail(Ae.opts.fail).always(Ae.opts.always),b.fx.timer(b.extend(ce,{elem:l,anim:Ae,queue:Ae.opts.queue})),Ae}b.Animation=b.extend(or,{tweeners:{"*":[function(l,f){var _=this.createTween(l,f);return eo(_.elem,l,on.exec(f),_),_}]},tweener:function(l,f){ae(l)?(f=l,l=["*"]):l=l.match(Hn);for(var _,w=0,D=l.length;w<D;w++)(or.tweeners[_=l[w]]=or.tweeners[_]||[]).unshift(f)},prefilters:[function Vr(l,f,_){var w,D,H,Y,pe,ce,Ae,He,lt="width"in f||"height"in f,De=this,Qe={},Rt=l.style,Gt=l.nodeType&&fr(l),kt=G.get(l,"fxshow");for(w in _.queue||(null==(Y=b._queueHooks(l,"fx")).unqueued&&(Y.unqueued=0,pe=Y.empty.fire,Y.empty.fire=function(){Y.unqueued||pe()}),Y.unqueued++,De.always(function(){De.always(function(){Y.unqueued--,b.queue(l,"fx").length||Y.empty.fire()})})),f)if(zo.test(D=f[w])){if(delete f[w],H=H||"toggle"===D,D===(Gt?"hide":"show")){if("show"!==D||!kt||void 0===kt[w])continue;Gt=!0}Qe[w]=kt&&kt[w]||b.style(l,w)}if((ce=!b.isEmptyObject(f))||!b.isEmptyObject(Qe))for(w in lt&&1===l.nodeType&&(_.overflow=[Rt.overflow,Rt.overflowX,Rt.overflowY],null==(Ae=kt&&kt.display)&&(Ae=G.get(l,"display")),"none"===(He=b.css(l,"display"))&&(Ae?He=Ae:(hr([l],!0),Ae=l.style.display||Ae,He=b.css(l,"display"),hr([l]))),("inline"===He||"inline-block"===He&&null!=Ae)&&"none"===b.css(l,"float")&&(ce||(De.done(function(){Rt.display=Ae}),null==Ae&&(Ae="none"===(He=Rt.display)?"":He)),Rt.display="inline-block")),_.overflow&&(Rt.overflow="hidden",De.always(function(){Rt.overflow=_.overflow[0],Rt.overflowX=_.overflow[1],Rt.overflowY=_.overflow[2]})),ce=!1,Qe)ce||(kt?"hidden"in kt&&(Gt=kt.hidden):kt=G.access(l,"fxshow",{display:Ae}),H&&(kt.hidden=!Gt),Gt&&hr([l],!0),De.done(function(){for(w in Gt||hr([l]),G.remove(l,"fxshow"),Qe)b.style(l,w,Qe[w])})),ce=da(Gt?kt[w]:0,w,De),w in kt||(kt[w]=ce.start,Gt&&(ce.end=ce.start,ce.start=0))}],prefilter:function(l,f){f?or.prefilters.unshift(l):or.prefilters.push(l)}}),b.speed=function(l,f,_){var w=l&&"object"==typeof l?b.extend({},l):{complete:_||!_&&f||ae(l)&&l,duration:l,easing:_&&f||f&&!ae(f)&&f};return b.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in b.fx.speeds?b.fx.speeds[w.duration]:b.fx.speeds._default),(null==w.queue||!0===w.queue)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){ae(w.old)&&w.old.call(this),w.queue&&b.dequeue(this,w.queue)},w},b.fn.extend({fadeTo:function(l,f,_,w){return this.filter(fr).css("opacity",0).show().end().animate({opacity:f},l,_,w)},animate:function(l,f,_,w){var D=b.isEmptyObject(l),H=b.speed(f,_,w),Y=function(){var pe=or(this,b.extend({},l),H);(D||G.get(this,"finish"))&&pe.stop(!0)};return Y.finish=Y,D||!1===H.queue?this.each(Y):this.queue(H.queue,Y)},stop:function(l,f,_){var w=function(D){var H=D.stop;delete D.stop,H(_)};return"string"!=typeof l&&(_=f,f=l,l=void 0),f&&this.queue(l||"fx",[]),this.each(function(){var D=!0,H=null!=l&&l+"queueHooks",Y=b.timers,pe=G.get(this);if(H)pe[H]&&pe[H].stop&&w(pe[H]);else for(H in pe)pe[H]&&pe[H].stop&&Gi.test(H)&&w(pe[H]);for(H=Y.length;H--;)Y[H].elem===this&&(null==l||Y[H].queue===l)&&(Y[H].anim.stop(_),D=!1,Y.splice(H,1));(D||!_)&&b.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var f,_=G.get(this),w=_[l+"queue"],D=_[l+"queueHooks"],H=b.timers,Y=w?w.length:0;for(_.finish=!0,b.queue(this,l,[]),D&&D.stop&&D.stop.call(this,!0),f=H.length;f--;)H[f].elem===this&&H[f].queue===l&&(H[f].anim.stop(!0),H.splice(f,1));for(f=0;f<Y;f++)w[f]&&w[f].finish&&w[f].finish.call(this);delete _.finish})}}),b.each(["toggle","show","hide"],function(l,f){var _=b.fn[f];b.fn[f]=function(w,D,H){return null==w||"boolean"==typeof w?_.apply(this,arguments):this.animate(no(f,!0),w,D,H)}}),b.each({slideDown:no("show"),slideUp:no("hide"),slideToggle:no("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,f){b.fn[l]=function(_,w,D){return this.animate(f,_,w,D)}}),b.timers=[],b.fx.tick=function(){var l,f=0,_=b.timers;for(zi=Date.now();f<_.length;f++)!(l=_[f])()&&_[f]===l&&_.splice(f--,1);_.length||b.fx.stop(),zi=void 0},b.fx.timer=function(l){b.timers.push(l),b.fx.start()},b.fx.interval=13,b.fx.start=function(){Pr||(Pr=!0,Br())},b.fx.stop=function(){Pr=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(l,f){return l=b.fx&&b.fx.speeds[l]||l,this.queue(f=f||"fx",function(_,w){var D=m.setTimeout(_,l);w.stop=function(){m.clearTimeout(D)}})},function(){var l=le.createElement("input"),_=le.createElement("select").appendChild(le.createElement("option"));l.type="checkbox",r.checkOn=""!==l.value,r.optSelected=_.selected,(l=le.createElement("input")).value="t",l.type="radio",r.radioValue="t"===l.value}();var Zn,Ui=b.expr.attrHandle;b.fn.extend({attr:function(l,f){return ln(this,b.attr,l,f,arguments.length>1)},removeAttr:function(l){return this.each(function(){b.removeAttr(this,l)})}}),b.extend({attr:function(l,f,_){var w,D,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return void 0===l.getAttribute?b.prop(l,f,_):((1!==H||!b.isXMLDoc(l))&&(D=b.attrHooks[f.toLowerCase()]||(b.expr.match.bool.test(f)?Zn:void 0)),void 0!==_?null===_?void b.removeAttr(l,f):D&&"set"in D&&void 0!==(w=D.set(l,_,f))?w:(l.setAttribute(f,_+""),_):D&&"get"in D&&null!==(w=D.get(l,f))?w:null==(w=b.find.attr(l,f))?void 0:w)},attrHooks:{type:{set:function(l,f){if(!r.radioValue&&"radio"===f&&tt(l,"input")){var _=l.value;return l.setAttribute("type",f),_&&(l.value=_),f}}}},removeAttr:function(l,f){var _,w=0,D=f&&f.match(Hn);if(D&&1===l.nodeType)for(;_=D[w++];)l.removeAttribute(_)}}),Zn={set:function(l,f,_){return!1===f?b.removeAttr(l,_):l.setAttribute(_,_),_}},b.each(b.expr.match.bool.source.match(/\w+/g),function(l,f){var _=Ui[f]||b.find.attr;Ui[f]=function(w,D,H){var Y,pe,ce=D.toLowerCase();return H||(pe=Ui[ce],Ui[ce]=Y,Y=null!=_(w,D,H)?ce:null,Ui[ce]=pe),Y}});var Hr=/^(?:input|select|textarea|button)$/i,oi=/^(?:a|area)$/i;function Cn(l){return(l.match(Hn)||[]).join(" ")}function jr(l){return l.getAttribute&&l.getAttribute("class")||""}function Xr(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(Hn)||[]}b.fn.extend({prop:function(l,f){return ln(this,b.prop,l,f,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[b.propFix[l]||l]})}}),b.extend({prop:function(l,f,_){var w,D,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return(1!==H||!b.isXMLDoc(l))&&(D=b.propHooks[f=b.propFix[f]||f]),void 0!==_?D&&"set"in D&&void 0!==(w=D.set(l,_,f))?w:l[f]=_:D&&"get"in D&&null!==(w=D.get(l,f))?w:l[f]},propHooks:{tabIndex:{get:function(l){var f=b.find.attr(l,"tabindex");return f?parseInt(f,10):Hr.test(l.nodeName)||oi.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),r.optSelected||(b.propHooks.selected={get:function(l){return null},set:function(l){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(l){var f,_,w,D,H,Y;return ae(l)?this.each(function(pe){b(this).addClass(l.call(this,pe,jr(this)))}):(f=Xr(l)).length?this.each(function(){if(w=jr(this),_=1===this.nodeType&&" "+Cn(w)+" "){for(H=0;H<f.length;H++)_.indexOf(" "+(D=f[H])+" ")<0&&(_+=D+" ");Y=Cn(_),w!==Y&&this.setAttribute("class",Y)}}):this},removeClass:function(l){var f,_,w,D,H,Y;return ae(l)?this.each(function(pe){b(this).removeClass(l.call(this,pe,jr(this)))}):arguments.length?(f=Xr(l)).length?this.each(function(){if(w=jr(this),_=1===this.nodeType&&" "+Cn(w)+" "){for(H=0;H<f.length;H++)for(D=f[H];_.indexOf(" "+D+" ")>-1;)_=_.replace(" "+D+" "," ");Y=Cn(_),w!==Y&&this.setAttribute("class",Y)}}):this:this.attr("class","")},toggleClass:function(l,f){var _,w,D,H,Y=typeof l,pe="string"===Y||Array.isArray(l);return ae(l)?this.each(function(ce){b(this).toggleClass(l.call(this,ce,jr(this),f),f)}):"boolean"==typeof f&&pe?f?this.addClass(l):this.removeClass(l):(_=Xr(l),this.each(function(){if(pe)for(H=b(this),D=0;D<_.length;D++)H.hasClass(w=_[D])?H.removeClass(w):H.addClass(w);else(void 0===l||"boolean"===Y)&&((w=jr(this))&&G.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===l?"":G.get(this,"__className__")||""))}))},hasClass:function(l){var f,_,w=0;for(f=" "+l+" ";_=this[w++];)if(1===_.nodeType&&(" "+Cn(jr(_))+" ").indexOf(f)>-1)return!0;return!1}});var Go=/\r/g;b.fn.extend({val:function(l){var f,_,w,D=this[0];return arguments.length?(w=ae(l),this.each(function(H){var Y;1===this.nodeType&&(null==(Y=w?l.call(this,H,b(this).val()):l)?Y="":"number"==typeof Y?Y+="":Array.isArray(Y)&&(Y=b.map(Y,function(pe){return null==pe?"":pe+""})),(!(f=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])||!("set"in f)||void 0===f.set(this,Y,"value"))&&(this.value=Y))})):D?(f=b.valHooks[D.type]||b.valHooks[D.nodeName.toLowerCase()])&&"get"in f&&void 0!==(_=f.get(D,"value"))?_:"string"==typeof(_=D.value)?_.replace(Go,""):null==_?"":_:void 0}}),b.extend({valHooks:{option:{get:function(l){var f=b.find.attr(l,"value");return null!=f?f:Cn(b.text(l))}},select:{get:function(l){var f,_,w,D=l.options,H=l.selectedIndex,Y="select-one"===l.type,pe=Y?null:[],ce=Y?H+1:D.length;for(w=H<0?ce:Y?H:0;w<ce;w++)if(((_=D[w]).selected||w===H)&&!_.disabled&&(!_.parentNode.disabled||!tt(_.parentNode,"optgroup"))){if(f=b(_).val(),Y)return f;pe.push(f)}return pe},set:function(l,f){for(var _,w,D=l.options,H=b.makeArray(f),Y=D.length;Y--;)((w=D[Y]).selected=b.inArray(b.valHooks.option.get(w),H)>-1)&&(_=!0);return _||(l.selectedIndex=-1),H}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(l,f){if(Array.isArray(f))return l.checked=b.inArray(b(l).val(),f)>-1}},r.checkOn||(b.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),r.focusin="onfocusin"in m;var ho=/^(?:focusinfocus|focusoutblur)$/,Na=function(l){l.stopPropagation()};b.extend(b.event,{trigger:function(l,f,_,w){var D,H,Y,pe,ce,Ae,He,lt,De=[_||le],Qe=X.call(l,"type")?l.type:l,Rt=X.call(l,"namespace")?l.namespace.split("."):[];if(H=lt=Y=_=_||le,3!==_.nodeType&&8!==_.nodeType&&!ho.test(Qe+b.event.triggered)&&(Qe.indexOf(".")>-1&&(Rt=Qe.split("."),Qe=Rt.shift(),Rt.sort()),ce=Qe.indexOf(":")<0&&"on"+Qe,(l=l[b.expando]?l:new b.Event(Qe,"object"==typeof l&&l)).isTrigger=w?2:3,l.namespace=Rt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Rt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=_),f=null==f?[l]:b.makeArray(f,[l]),He=b.event.special[Qe]||{},w||!He.trigger||!1!==He.trigger.apply(_,f))){if(!w&&!He.noBubble&&!de(_)){for(ho.test((pe=He.delegateType||Qe)+Qe)||(H=H.parentNode);H;H=H.parentNode)De.push(H),Y=H;Y===(_.ownerDocument||le)&&De.push(Y.defaultView||Y.parentWindow||m)}for(D=0;(H=De[D++])&&!l.isPropagationStopped();)lt=H,l.type=D>1?pe:He.bindType||Qe,(Ae=(G.get(H,"events")||Object.create(null))[l.type]&&G.get(H,"handle"))&&Ae.apply(H,f),(Ae=ce&&H[ce])&&Ae.apply&&en(H)&&(l.result=Ae.apply(H,f),!1===l.result&&l.preventDefault());return l.type=Qe,!w&&!l.isDefaultPrevented()&&(!He._default||!1===He._default.apply(De.pop(),f))&&en(_)&&ce&&ae(_[Qe])&&!de(_)&&((Y=_[ce])&&(_[ce]=null),b.event.triggered=Qe,l.isPropagationStopped()&&lt.addEventListener(Qe,Na),_[Qe](),l.isPropagationStopped()&&lt.removeEventListener(Qe,Na),b.event.triggered=void 0,Y&&(_[ce]=Y)),l.result}},simulate:function(l,f,_){var w=b.extend(new b.Event,_,{type:l,isSimulated:!0});b.event.trigger(w,null,f)}}),b.fn.extend({trigger:function(l,f){return this.each(function(){b.event.trigger(l,f,this)})},triggerHandler:function(l,f){var _=this[0];if(_)return b.event.trigger(l,f,_,!0)}}),r.focusin||b.each({focus:"focusin",blur:"focusout"},function(l,f){var _=function(w){b.event.simulate(f,w.target,b.event.fix(w))};b.event.special[f]={setup:function(){var w=this.ownerDocument||this.document||this,D=G.access(w,f);D||w.addEventListener(l,_,!0),G.access(w,f,(D||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,D=G.access(w,f)-1;D?G.access(w,f,D):(w.removeEventListener(l,_,!0),G.remove(w,f))}}});var fa=m.location,ha={guid:Date.now()},Da=/\?/;b.parseXML=function(l){var f,_;if(!l||"string"!=typeof l)return null;try{f=(new m.DOMParser).parseFromString(l,"text/xml")}catch(w){}return _=f&&f.getElementsByTagName("parsererror")[0],(!f||_)&&b.error("Invalid XML: "+(_?b.map(_.childNodes,function(w){return w.textContent}).join("\n"):l)),f};var po=/\[\]$/,Fa=/\r?\n/g,As=/^(?:submit|button|image|reset|file)$/i,ou=/^(?:input|select|textarea|keygen)/i;function Uo(l,f,_,w){var D;if(Array.isArray(f))b.each(f,function(H,Y){_||po.test(l)?w(l,Y):Uo(l+"["+("object"==typeof Y&&null!=Y?H:"")+"]",Y,_,w)});else if(_||"object"!==Se(f))w(l,f);else for(D in f)Uo(l+"["+D+"]",f[D],_,w)}b.param=function(l,f){var _,w=[],D=function(H,Y){var pe=ae(Y)?Y():Y;w[w.length]=encodeURIComponent(H)+"="+encodeURIComponent(null==pe?"":pe)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!b.isPlainObject(l))b.each(l,function(){D(this.name,this.value)});else for(_ in l)Uo(_,l[_],f,D);return w.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=b.prop(this,"elements");return l?b.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!b(this).is(":disabled")&&ou.test(this.nodeName)&&!As.test(l)&&(this.checked||!_r.test(l))}).map(function(l,f){var _=b(this).val();return null==_?null:Array.isArray(_)?b.map(_,function(w){return{name:f.name,value:w.replace(Fa,"\r\n")}}):{name:f.name,value:_.replace(Fa,"\r\n")}}).get()}});var ks=/%20/g,$i=/#.*$/,pa=/([?&])_=[^&]*/,ga=/^(.*?):[ \t]*([^\r\n]*)$/gm,go=/^(?:GET|HEAD)$/,Mr=/^\/\//,Eo={},Dt={},Io="*/".concat("*"),mo=le.createElement("a");function jn(l){return function(f,_){"string"!=typeof f&&(_=f,f="*");var w,D=0,H=f.toLowerCase().match(Hn)||[];if(ae(_))for(;w=H[D++];)"+"===w[0]?(w=w.slice(1)||"*",(l[w]=l[w]||[]).unshift(_)):(l[w]=l[w]||[]).push(_)}}function zn(l,f,_,w){var D={},H=l===Dt;function Y(pe){var ce;return D[pe]=!0,b.each(l[pe]||[],function(Ae,He){var lt=He(f,_,w);return"string"!=typeof lt||H||D[lt]?H?!(ce=lt):void 0:(f.dataTypes.unshift(lt),Y(lt),!1)}),ce}return Y(f.dataTypes[0])||!D["*"]&&Y("*")}function Ba(l,f){var _,w,D=b.ajaxSettings.flatOptions||{};for(_ in f)void 0!==f[_]&&((D[_]?l:w||(w={}))[_]=f[_]);return w&&b.extend(!0,l,w),l}mo.href=fa.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fa.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(fa.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Io,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,f){return f?Ba(Ba(l,b.ajaxSettings),f):Ba(b.ajaxSettings,l)},ajaxPrefilter:jn(Eo),ajaxTransport:jn(Dt),ajax:function(l,f){"object"==typeof l&&(f=l,l=void 0);var _,w,D,H,Y,pe,ce,Ae,He,lt,De=b.ajaxSetup({},f=f||{}),Qe=De.context||De,Rt=De.context&&(Qe.nodeType||Qe.jquery)?b(Qe):b.event,Gt=b.Deferred(),kt=b.Callbacks("once memory"),ur=De.statusCode||{},an={},br={},$n="canceled",tn={readyState:0,getResponseHeader:function(Ln){var pr;if(ce){if(!H)for(H={};pr=ga.exec(D);)H[pr[1].toLowerCase()+" "]=(H[pr[1].toLowerCase()+" "]||[]).concat(pr[2]);pr=H[Ln.toLowerCase()+" "]}return null==pr?null:pr.join(", ")},getAllResponseHeaders:function(){return ce?D:null},setRequestHeader:function(Ln,pr){return null==ce&&(Ln=br[Ln.toLowerCase()]=br[Ln.toLowerCase()]||Ln,an[Ln]=pr),this},overrideMimeType:function(Ln){return null==ce&&(De.mimeType=Ln),this},statusCode:function(Ln){var pr;if(Ln)if(ce)tn.always(Ln[tn.status]);else for(pr in Ln)ur[pr]=[ur[pr],Ln[pr]];return this},abort:function(Ln){var pr=Ln||$n;return _&&_.abort(pr),Kr(0,pr),this}};if(Gt.promise(tn),De.url=((l||De.url||fa.href)+"").replace(Mr,fa.protocol+"//"),De.type=f.method||f.type||De.method||De.type,De.dataTypes=(De.dataType||"*").toLowerCase().match(Hn)||[""],null==De.crossDomain){pe=le.createElement("a");try{pe.href=De.url,pe.href=pe.href,De.crossDomain=mo.protocol+"//"+mo.host!=pe.protocol+"//"+pe.host}catch(Ln){De.crossDomain=!0}}if(De.data&&De.processData&&"string"!=typeof De.data&&(De.data=b.param(De.data,De.traditional)),zn(Eo,De,f,tn),ce)return tn;for(He in(Ae=b.event&&De.global)&&0==b.active++&&b.event.trigger("ajaxStart"),De.type=De.type.toUpperCase(),De.hasContent=!go.test(De.type),w=De.url.replace($i,""),De.hasContent?De.data&&De.processData&&0===(De.contentType||"").indexOf("application/x-www-form-urlencoded")&&(De.data=De.data.replace(ks,"+")):(lt=De.url.slice(w.length),De.data&&(De.processData||"string"==typeof De.data)&&(w+=(Da.test(w)?"&":"?")+De.data,delete De.data),!1===De.cache&&(w=w.replace(pa,"$1"),lt=(Da.test(w)?"&":"?")+"_="+ha.guid+++lt),De.url=w+lt),De.ifModified&&(b.lastModified[w]&&tn.setRequestHeader("If-Modified-Since",b.lastModified[w]),b.etag[w]&&tn.setRequestHeader("If-None-Match",b.etag[w])),(De.data&&De.hasContent&&!1!==De.contentType||f.contentType)&&tn.setRequestHeader("Content-Type",De.contentType),tn.setRequestHeader("Accept",De.dataTypes[0]&&De.accepts[De.dataTypes[0]]?De.accepts[De.dataTypes[0]]+("*"!==De.dataTypes[0]?", "+Io+"; q=0.01":""):De.accepts["*"]),De.headers)tn.setRequestHeader(He,De.headers[He]);if(De.beforeSend&&(!1===De.beforeSend.call(Qe,tn,De)||ce))return tn.abort();if($n="abort",kt.add(De.complete),tn.done(De.success),tn.fail(De.error),_=zn(Dt,De,f,tn)){if(tn.readyState=1,Ae&&Rt.trigger("ajaxSend",[tn,De]),ce)return tn;De.async&&De.timeout>0&&(Y=m.setTimeout(function(){tn.abort("timeout")},De.timeout));try{ce=!1,_.send(an,Kr)}catch(Ln){if(ce)throw Ln;Kr(-1,Ln)}}else Kr(-1,"No Transport");function Kr(Ln,pr,Va,fs){var Qr,Wi,va,ai,Po,Jr=pr;ce||(ce=!0,Y&&m.clearTimeout(Y),_=void 0,D=fs||"",tn.readyState=Ln>0?4:0,Qr=Ln>=200&&Ln<300||304===Ln,Va&&(ai=function ds(l,f,_){for(var w,D,H,Y,pe=l.contents,ce=l.dataTypes;"*"===ce[0];)ce.shift(),void 0===w&&(w=l.mimeType||f.getResponseHeader("Content-Type"));if(w)for(D in pe)if(pe[D]&&pe[D].test(w)){ce.unshift(D);break}if(ce[0]in _)H=ce[0];else{for(D in _){if(!ce[0]||l.converters[D+" "+ce[0]]){H=D;break}Y||(Y=D)}H=H||Y}if(H)return H!==ce[0]&&ce.unshift(H),_[H]}(De,tn,Va)),!Qr&&b.inArray("script",De.dataTypes)>-1&&b.inArray("json",De.dataTypes)<0&&(De.converters["text script"]=function(){}),ai=function R(l,f,_,w){var D,H,Y,pe,ce,Ae={},He=l.dataTypes.slice();if(He[1])for(Y in l.converters)Ae[Y.toLowerCase()]=l.converters[Y];for(H=He.shift();H;)if(l.responseFields[H]&&(_[l.responseFields[H]]=f),!ce&&w&&l.dataFilter&&(f=l.dataFilter(f,l.dataType)),ce=H,H=He.shift())if("*"===H)H=ce;else if("*"!==ce&&ce!==H){if(!(Y=Ae[ce+" "+H]||Ae["* "+H]))for(D in Ae)if((pe=D.split(" "))[1]===H&&(Y=Ae[ce+" "+pe[0]]||Ae["* "+pe[0]])){!0===Y?Y=Ae[D]:!0!==Ae[D]&&(H=pe[0],He.unshift(pe[1]));break}if(!0!==Y)if(Y&&l.throws)f=Y(f);else try{f=Y(f)}catch(lt){return{state:"parsererror",error:Y?lt:"No conversion from "+ce+" to "+H}}}return{state:"success",data:f}}(De,ai,tn,Qr),Qr?(De.ifModified&&((Po=tn.getResponseHeader("Last-Modified"))&&(b.lastModified[w]=Po),(Po=tn.getResponseHeader("etag"))&&(b.etag[w]=Po)),204===Ln||"HEAD"===De.type?Jr="nocontent":304===Ln?Jr="notmodified":(Jr=ai.state,Wi=ai.data,Qr=!(va=ai.error))):(va=Jr,(Ln||!Jr)&&(Jr="error",Ln<0&&(Ln=0))),tn.status=Ln,tn.statusText=(pr||Jr)+"",Qr?Gt.resolveWith(Qe,[Wi,Jr,tn]):Gt.rejectWith(Qe,[tn,Jr,va]),tn.statusCode(ur),ur=void 0,Ae&&Rt.trigger(Qr?"ajaxSuccess":"ajaxError",[tn,De,Qr?Wi:va]),kt.fireWith(Qe,[tn,Jr]),Ae&&(Rt.trigger("ajaxComplete",[tn,De]),--b.active||b.event.trigger("ajaxStop")))}return tn},getJSON:function(l,f,_){return b.get(l,f,_,"json")},getScript:function(l,f){return b.get(l,void 0,f,"script")}}),b.each(["get","post"],function(l,f){b[f]=function(_,w,D,H){return ae(w)&&(H=H||D,D=w,w=void 0),b.ajax(b.extend({url:_,type:f,dataType:H,data:w,success:D},b.isPlainObject(_)&&_))}}),b.ajaxPrefilter(function(l){var f;for(f in l.headers)"content-type"===f.toLowerCase()&&(l.contentType=l.headers[f]||"")}),b._evalUrl=function(l,f,_){return b.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){b.globalEval(w,f,_)}})},b.fn.extend({wrapAll:function(l){var f;return this[0]&&(ae(l)&&(l=l.call(this[0])),f=b(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var _=this;_.firstElementChild;)_=_.firstElementChild;return _}).append(this)),this},wrapInner:function(l){return ae(l)?this.each(function(f){b(this).wrapInner(l.call(this,f))}):this.each(function(){var f=b(this),_=f.contents();_.length?_.wrapAll(l):f.append(l)})},wrap:function(l){var f=ae(l);return this.each(function(_){b(this).wrapAll(f?l.call(this,_):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(l){return!b.expr.pseudos.visible(l)},b.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new m.XMLHttpRequest}catch(l){}};var J={0:200,1223:204},se=b.ajaxSettings.xhr();r.cors=!!se&&"withCredentials"in se,r.ajax=se=!!se,b.ajaxTransport(function(l){var f,_;if(r.cors||se&&!l.crossDomain)return{send:function(w,D){var H,Y=l.xhr();if(Y.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(H in l.xhrFields)Y[H]=l.xhrFields[H];for(H in l.mimeType&&Y.overrideMimeType&&Y.overrideMimeType(l.mimeType),!l.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest"),w)Y.setRequestHeader(H,w[H]);f=function(pe){return function(){f&&(f=_=Y.onload=Y.onerror=Y.onabort=Y.ontimeout=Y.onreadystatechange=null,"abort"===pe?Y.abort():"error"===pe?"number"!=typeof Y.status?D(0,"error"):D(Y.status,Y.statusText):D(J[Y.status]||Y.status,Y.statusText,"text"!==(Y.responseType||"text")||"string"!=typeof Y.responseText?{binary:Y.response}:{text:Y.responseText},Y.getAllResponseHeaders()))}},Y.onload=f(),_=Y.onerror=Y.ontimeout=f("error"),void 0!==Y.onabort?Y.onabort=_:Y.onreadystatechange=function(){4===Y.readyState&&m.setTimeout(function(){f&&_()})},f=f("abort");try{Y.send(l.hasContent&&l.data||null)}catch(pe){if(f)throw pe}},abort:function(){f&&f()}}}),b.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return b.globalEval(l),l}}}),b.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),b.ajaxTransport("script",function(l){var f,_;if(l.crossDomain||l.scriptAttrs)return{send:function(w,D){f=b("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",_=function(H){f.remove(),_=null,H&&D("error"===H.type?404:200,H.type)}),le.head.appendChild(f[0])},abort:function(){_&&_()}}});var l,me=[],ke=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=me.pop()||b.expando+"_"+ha.guid++;return this[l]=!0,l}}),b.ajaxPrefilter("json jsonp",function(l,f,_){var w,D,H,Y=!1!==l.jsonp&&(ke.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&ke.test(l.data)&&"data");if(Y||"jsonp"===l.dataTypes[0])return w=l.jsonpCallback=ae(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,Y?l[Y]=l[Y].replace(ke,"$1"+w):!1!==l.jsonp&&(l.url+=(Da.test(l.url)?"&":"?")+l.jsonp+"="+w),l.converters["script json"]=function(){return H||b.error(w+" was not called"),H[0]},l.dataTypes[0]="json",D=m[w],m[w]=function(){H=arguments},_.always(function(){void 0===D?b(m).removeProp(w):m[w]=D,l[w]&&(l.jsonpCallback=f.jsonpCallback,me.push(w)),H&&ae(D)&&D(H[0]),H=D=void 0}),"script"}),r.createHTMLDocument=((l=le.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),b.parseHTML=function(l,f,_){return"string"!=typeof l?[]:("boolean"==typeof f&&(_=f,f=!1),f||(r.createHTMLDocument?((w=(f=le.implementation.createHTMLDocument("")).createElement("base")).href=le.location.href,f.head.appendChild(w)):f=le),H=!_&&[],(D=Xe.exec(l))?[f.createElement(D[1])]:(D=Mi([l],f,H),H&&H.length&&b(H).remove(),b.merge([],D.childNodes)));var w,D,H},b.fn.load=function(l,f,_){var w,D,H,Y=this,pe=l.indexOf(" ");return pe>-1&&(w=Cn(l.slice(pe)),l=l.slice(0,pe)),ae(f)?(_=f,f=void 0):f&&"object"==typeof f&&(D="POST"),Y.length>0&&b.ajax({url:l,type:D||"GET",dataType:"html",data:f}).done(function(ce){H=arguments,Y.html(w?b("<div>").append(b.parseHTML(ce)).find(w):ce)}).always(_&&function(ce,Ae){Y.each(function(){_.apply(this,H||[ce.responseText,Ae,ce])})}),this},b.expr.pseudos.animated=function(l){return b.grep(b.timers,function(f){return l===f.elem}).length},b.offset={setOffset:function(l,f,_){var w,D,H,Y,pe,ce,He=b.css(l,"position"),lt=b(l),De={};"static"===He&&(l.style.position="relative"),pe=lt.offset(),H=b.css(l,"top"),ce=b.css(l,"left"),("absolute"===He||"fixed"===He)&&(H+ce).indexOf("auto")>-1?(Y=(w=lt.position()).top,D=w.left):(Y=parseFloat(H)||0,D=parseFloat(ce)||0),ae(f)&&(f=f.call(l,_,b.extend({},pe))),null!=f.top&&(De.top=f.top-pe.top+Y),null!=f.left&&(De.left=f.left-pe.left+D),"using"in f?f.using.call(l,De):lt.css(De)}},b.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(D){b.offset.setOffset(this,l,D)});var f,_,w=this[0];return w?w.getClientRects().length?{top:(f=w.getBoundingClientRect()).top+(_=w.ownerDocument.defaultView).pageYOffset,left:f.left+_.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,f,_,w=this[0],D={top:0,left:0};if("fixed"===b.css(w,"position"))f=w.getBoundingClientRect();else{for(f=this.offset(),_=w.ownerDocument,l=w.offsetParent||_.documentElement;l&&(l===_.body||l===_.documentElement)&&"static"===b.css(l,"position");)l=l.parentNode;l&&l!==w&&1===l.nodeType&&((D=b(l).offset()).top+=b.css(l,"borderTopWidth",!0),D.left+=b.css(l,"borderLeftWidth",!0))}return{top:f.top-D.top-b.css(w,"marginTop",!0),left:f.left-D.left-b.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===b.css(l,"position");)l=l.offsetParent;return l||Pn})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,f){var _="pageYOffset"===f;b.fn[l]=function(w){return ln(this,function(D,H,Y){var pe;if(de(D)?pe=D:9===D.nodeType&&(pe=D.defaultView),void 0===Y)return pe?pe[f]:D[H];pe?pe.scrollTo(_?pe.pageXOffset:Y,_?Y:pe.pageYOffset):D[H]=Y},l,w,arguments.length)}}),b.each(["top","left"],function(l,f){b.cssHooks[f]=Ps(r.pixelPosition,function(_,w){if(w)return w=la(_,f),Oa.test(w)?b(_).position()[f]+"px":w})}),b.each({Height:"height",Width:"width"},function(l,f){b.each({padding:"inner"+l,content:f,"":"outer"+l},function(_,w){b.fn[w]=function(D,H){var Y=arguments.length&&(_||"boolean"!=typeof D),pe=_||(!0===D||!0===H?"margin":"border");return ln(this,function(ce,Ae,He){var lt;return de(ce)?0===w.indexOf("outer")?ce["inner"+l]:ce.document.documentElement["client"+l]:9===ce.nodeType?(lt=ce.documentElement,Math.max(ce.body["scroll"+l],lt["scroll"+l],ce.body["offset"+l],lt["offset"+l],lt["client"+l])):void 0===He?b.css(ce,Ae,pe):b.style(ce,Ae,He,pe)},f,Y?D:void 0,Y)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,f){b.fn[f]=function(_){return this.on(f,_)}}),b.fn.extend({bind:function(l,f,_){return this.on(l,null,f,_)},unbind:function(l,f){return this.off(l,null,f)},delegate:function(l,f,_,w){return this.on(f,l,_,w)},undelegate:function(l,f,_){return 1===arguments.length?this.off(l,"**"):this.off(f,l||"**",_)},hover:function(l,f){return this.mouseenter(l).mouseleave(f||l)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,f){b.fn[f]=function(_,w){return arguments.length>0?this.on(f,null,_,w):this.trigger(f)}});var Ee=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;b.proxy=function(l,f){var _,w,D;if("string"==typeof f&&(_=l[f],f=l,l=_),ae(l))return w=I.call(arguments,2),D=function(){return l.apply(f||this,w.concat(I.call(arguments)))},D.guid=l.guid=l.guid||b.guid++,D},b.holdReady=function(l){l?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=tt,b.isFunction=ae,b.isWindow=de,b.camelCase=dn,b.type=Se,b.now=Date.now,b.isNumeric=function(l){var f=b.type(l);return("number"===f||"string"===f)&&!isNaN(l-parseFloat(l))},b.trim=function(l){return null==l?"":(l+"").replace(Ee,"$1")},void 0!==(g=function(){return b}.apply(W,[]))&&(E.exports=g);var Be=m.jQuery,nt=m.$;return b.noConflict=function(l){return m.$===b&&(m.$=nt),l&&m.jQuery===b&&(m.jQuery=Be),b},void 0===S&&(m.jQuery=m.$=b),b})},37244:(E,W,d)=>{var S=d(53436)(d(12119),"DataView");E.exports=S},54994:(E,W,d)=>{var g=d(64312),m=d(22393),S=d(15764),T=d(18685),y=d(26676);function I(O){var A=-1,N=null==O?0:O.length;for(this.clear();++A<N;){var B=O[A];this.set(B[0],B[1])}}I.prototype.clear=g,I.prototype.delete=m,I.prototype.get=S,I.prototype.has=T,I.prototype.set=y,E.exports=I},9215:(E,W,d)=>{var g=d(41840),m=d(34378),S=d(54981),T=d(67343),y=d(98895);function I(O){var A=-1,N=null==O?0:O.length;for(this.clear();++A<N;){var B=O[A];this.set(B[0],B[1])}}I.prototype.clear=g,I.prototype.delete=m,I.prototype.get=S,I.prototype.has=T,I.prototype.set=y,E.exports=I},51501:(E,W,d)=>{var S=d(53436)(d(12119),"Map");E.exports=S},99850:(E,W,d)=>{var g=d(10638),m=d(11184),S=d(70866),T=d(43771),y=d(51772);function I(O){var A=-1,N=null==O?0:O.length;for(this.clear();++A<N;){var B=O[A];this.set(B[0],B[1])}}I.prototype.clear=g,I.prototype.delete=m,I.prototype.get=S,I.prototype.has=T,I.prototype.set=y,E.exports=I},44267:(E,W,d)=>{var S=d(53436)(d(12119),"Promise");E.exports=S},46323:(E,W,d)=>{var S=d(53436)(d(12119),"Set");E.exports=S},58849:(E,W,d)=>{var g=d(99850),m=d(4600),S=d(31387);function T(y){var I=-1,O=null==y?0:y.length;for(this.__data__=new g;++I<O;)this.add(y[I])}T.prototype.add=T.prototype.push=m,T.prototype.has=S,E.exports=T},2858:(E,W,d)=>{var g=d(9215),m=d(13720),S=d(64410),T=d(45576),y=d(22247),I=d(41585);function O(A){var N=this.__data__=new g(A);this.size=N.size}O.prototype.clear=m,O.prototype.delete=S,O.prototype.get=T,O.prototype.has=y,O.prototype.set=I,E.exports=O},60443:(E,W,d)=>{var g=d(12119);E.exports=g.Symbol},73457:(E,W,d)=>{var g=d(12119);E.exports=g.Uint8Array},24243:(E,W,d)=>{var S=d(53436)(d(12119),"WeakMap");E.exports=S},26999:E=>{E.exports=function W(d,g,m){switch(m.length){case 0:return d.call(g);case 1:return d.call(g,m[0]);case 2:return d.call(g,m[0],m[1]);case 3:return d.call(g,m[0],m[1],m[2])}return d.apply(g,m)}},96837:E=>{E.exports=function W(d,g){for(var m=-1,S=null==d?0:d.length;++m<S&&!1!==g(d[m],m,d););return d}},69779:E=>{E.exports=function W(d,g){for(var m=-1,S=null==d?0:d.length,T=0,y=[];++m<S;){var I=d[m];g(I,m,d)&&(y[T++]=I)}return y}},61253:(E,W,d)=>{var g=d(14164);E.exports=function m(S,T){return!(null==S||!S.length)&&g(S,T,0)>-1}},37609:E=>{E.exports=function W(d,g,m){for(var S=-1,T=null==d?0:d.length;++S<T;)if(m(g,d[S]))return!0;return!1}},72271:(E,W,d)=>{var g=d(85334),m=d(77151),S=d(21503),T=d(80891),y=d(58442),I=d(48159),A=Object.prototype.hasOwnProperty;E.exports=function N(B,k){var X=S(B),q=!X&&m(B),ue=!X&&!q&&T(B),r=!X&&!q&&!ue&&I(B),ae=X||q||ue||r,de=ae?g(B.length,String):[],le=de.length;for(var K in B)(k||A.call(B,K))&&(!ae||!("length"==K||ue&&("offset"==K||"parent"==K)||r&&("buffer"==K||"byteLength"==K||"byteOffset"==K)||y(K,le)))&&de.push(K);return de}},84633:E=>{E.exports=function W(d,g){for(var m=-1,S=null==d?0:d.length,T=Array(S);++m<S;)T[m]=g(d[m],m,d);return T}},85059:E=>{E.exports=function W(d,g){for(var m=-1,S=g.length,T=d.length;++m<S;)d[T+m]=g[m];return d}},8745:E=>{E.exports=function W(d,g,m,S){var T=-1,y=null==d?0:d.length;for(S&&y&&(m=d[++T]);++T<y;)m=g(m,d[T],T,d);return m}},79503:E=>{E.exports=function W(d,g){for(var m=-1,S=null==d?0:d.length;++m<S;)if(g(d[m],m,d))return!0;return!1}},75481:(E,W,d)=>{var m=d(11847)("length");E.exports=m},49276:(E,W,d)=>{var g=d(85683),m=d(20217);E.exports=function S(T,y,I){(void 0!==I&&!m(T[y],I)||void 0===I&&!(y in T))&&g(T,y,I)}},89719:(E,W,d)=>{var g=d(85683),m=d(20217),T=Object.prototype.hasOwnProperty;E.exports=function y(I,O,A){var N=I[O];(!T.call(I,O)||!m(N,A)||void 0===A&&!(O in I))&&g(I,O,A)}},43503:(E,W,d)=>{var g=d(20217);E.exports=function m(S,T){for(var y=S.length;y--;)if(g(S[y][0],T))return y;return-1}},94121:(E,W,d)=>{var g=d(31989),m=d(118);E.exports=function S(T,y){return T&&g(y,m(y),T)}},99287:(E,W,d)=>{var g=d(31989),m=d(16555);E.exports=function S(T,y){return T&&g(y,m(y),T)}},85683:(E,W,d)=>{var g=d(56713);E.exports=function m(S,T,y){"__proto__"==T&&g?g(S,T,{configurable:!0,enumerable:!0,value:y,writable:!0}):S[T]=y}},44462:(E,W,d)=>{var g=d(2858),m=d(96837),S=d(89719),T=d(94121),y=d(99287),I=d(19292),O=d(99454),A=d(84444),N=d(59905),B=d(47597),k=d(6967),X=d(28794),q=d(76782),ue=d(37878),r=d(4264),ae=d(21503),de=d(80891),le=d(13222),K=d(25940),ge=d(90799),Se=d(118),Oe=d(16555),ze="[object Arguments]",mt="[object Function]",un="[object Object]",F={};F[ze]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object DataView]"]=F["[object Boolean]"]=F["[object Date]"]=F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Map]"]=F["[object Number]"]=F[un]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object Symbol]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Error]"]=F[mt]=F["[object WeakMap]"]=!1,E.exports=function G(re,xe,Ke,qe,Ct,Bt){var on,bn=1&xe,Pn=2&xe,mn=4&xe;if(Ke&&(on=Ct?Ke(re,qe,Ct,Bt):Ke(re)),void 0!==on)return on;if(!K(re))return re;var vr=ae(re);if(vr){if(on=q(re),!bn)return O(re,on)}else{var fr=X(re),eo=fr==mt||"[object GeneratorFunction]"==fr;if(de(re))return I(re,bn);if(fr==un||fr==ze||eo&&!Ct){if(on=Pn||eo?{}:r(re),!bn)return Pn?N(re,y(on,re)):A(re,T(on,re))}else{if(!F[fr])return Ct?re:{};on=ue(re,fr,bn)}}Bt||(Bt=new g);var Yn=Bt.get(re);if(Yn)return Yn;Bt.set(re,on),ge(re)?re.forEach(function(_r){on.add(G(_r,xe,Ke,_r,re,Bt))}):le(re)&&re.forEach(function(_r,$r){on.set($r,G(_r,xe,Ke,$r,re,Bt))});var hr=vr?void 0:(mn?Pn?k:B:Pn?Oe:Se)(re);return m(hr||re,function(_r,$r){hr&&(_r=re[$r=_r]),S(on,$r,G(_r,xe,Ke,$r,re,Bt))}),on}},78858:(E,W,d)=>{var g=d(25940),m=Object.create,S=function(){function T(){}return function(y){if(!g(y))return{};if(m)return m(y);T.prototype=y;var I=new T;return T.prototype=void 0,I}}();E.exports=S},43132:(E,W,d)=>{var g=d(45184),S=d(16539)(g);E.exports=S},67308:(E,W,d)=>{var g=d(44129);E.exports=function m(S,T,y){for(var I=-1,O=S.length;++I<O;){var A=S[I],N=T(A);if(null!=N&&(void 0===B?N==N&&!g(N):y(N,B)))var B=N,k=A}return k}},33609:(E,W,d)=>{var g=d(43132);E.exports=function m(S,T){var y=[];return g(S,function(I,O,A){T(I,O,A)&&y.push(I)}),y}},65317:E=>{E.exports=function W(d,g,m,S){for(var T=d.length,y=m+(S?1:-1);S?y--:++y<T;)if(g(d[y],y,d))return y;return-1}},50686:(E,W,d)=>{var g=d(85059),m=d(75039);E.exports=function S(T,y,I,O,A){var N=-1,B=T.length;for(I||(I=m),A||(A=[]);++N<B;){var k=T[N];y>0&&I(k)?y>1?S(k,y-1,I,O,A):g(A,k):O||(A[A.length]=k)}return A}},30755:(E,W,d)=>{var m=d(40456)();E.exports=m},45184:(E,W,d)=>{var g=d(30755),m=d(118);E.exports=function S(T,y){return T&&g(T,y,m)}},15456:(E,W,d)=>{var g=d(65456),m=d(68533);E.exports=function S(T,y){for(var I=0,O=(y=g(y,T)).length;null!=T&&I<O;)T=T[m(y[I++])];return I&&I==O?T:void 0}},38247:(E,W,d)=>{var g=d(85059),m=d(21503);E.exports=function S(T,y,I){var O=y(T);return m(T)?O:g(O,I(T))}},93337:(E,W,d)=>{var g=d(60443),m=d(21318),S=d(92902),I=g?g.toStringTag:void 0;E.exports=function O(A){return null==A?void 0===A?"[object Undefined]":"[object Null]":I&&I in Object(A)?m(A):S(A)}},31100:E=>{E.exports=function W(d,g){return d>g}},84781:E=>{var d=Object.prototype.hasOwnProperty;E.exports=function g(m,S){return null!=m&&d.call(m,S)}},69989:E=>{E.exports=function W(d,g){return null!=d&&g in Object(d)}},14164:(E,W,d)=>{var g=d(65317),m=d(70968),S=d(24977);E.exports=function T(y,I,O){return I==I?S(y,I,O):g(y,m,O)}},60186:(E,W,d)=>{var g=d(93337),m=d(72671);E.exports=function T(y){return m(y)&&"[object Arguments]"==g(y)}},85740:(E,W,d)=>{var g=d(58325),m=d(72671);E.exports=function S(T,y,I,O,A){return T===y||(null==T||null==y||!m(T)&&!m(y)?T!=T&&y!=y:g(T,y,I,O,S,A))}},58325:(E,W,d)=>{var g=d(2858),m=d(63914),S=d(78583),T=d(32286),y=d(28794),I=d(21503),O=d(80891),A=d(48159),B="[object Arguments]",k="[object Array]",X="[object Object]",ue=Object.prototype.hasOwnProperty;E.exports=function r(ae,de,le,K,ge,Se){var Oe=I(ae),b=I(de),Ge=Oe?k:y(ae),at=b?k:y(de),ze=(Ge=Ge==B?X:Ge)==X,Fe=(at=at==B?X:at)==X,Ne=Ge==at;if(Ne&&O(ae)){if(!O(de))return!1;Oe=!0,ze=!1}if(Ne&&!ze)return Se||(Se=new g),Oe||A(ae)?m(ae,de,le,K,ge,Se):S(ae,de,Ge,le,K,ge,Se);if(!(1&le)){var tt=ze&&ue.call(ae,"__wrapped__"),Xe=Fe&&ue.call(de,"__wrapped__");if(tt||Xe){var mt=tt?ae.value():ae,_t=Xe?de.value():de;return Se||(Se=new g),ge(mt,_t,le,K,Se)}}return!!Ne&&(Se||(Se=new g),T(ae,de,le,K,ge,Se))}},97021:(E,W,d)=>{var g=d(28794),m=d(72671);E.exports=function T(y){return m(y)&&"[object Map]"==g(y)}},40431:(E,W,d)=>{var g=d(2858),m=d(85740);E.exports=function y(I,O,A,N){var B=A.length,k=B,X=!N;if(null==I)return!k;for(I=Object(I);B--;){var q=A[B];if(X&&q[2]?q[1]!==I[q[0]]:!(q[0]in I))return!1}for(;++B<k;){var ue=(q=A[B])[0],r=I[ue],ae=q[1];if(X&&q[2]){if(void 0===r&&!(ue in I))return!1}else{var de=new g;if(N)var le=N(r,ae,ue,I,O,de);if(!(void 0===le?m(ae,r,3,N,de):le))return!1}}return!0}},70968:E=>{E.exports=function W(d){return d!=d}},37304:(E,W,d)=>{var g=d(75946),m=d(91943),S=d(25940),T=d(52827),I=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");E.exports=function X(q){return!(!S(q)||m(q))&&(g(q)?k:I).test(T(q))}},771:(E,W,d)=>{var g=d(28794),m=d(72671);E.exports=function T(y){return m(y)&&"[object Set]"==g(y)}},1083:(E,W,d)=>{var g=d(93337),m=d(96231),S=d(72671),Ne={};Ne["[object Float32Array]"]=Ne["[object Float64Array]"]=Ne["[object Int8Array]"]=Ne["[object Int16Array]"]=Ne["[object Int32Array]"]=Ne["[object Uint8Array]"]=Ne["[object Uint8ClampedArray]"]=Ne["[object Uint16Array]"]=Ne["[object Uint32Array]"]=!0,Ne["[object Arguments]"]=Ne["[object Array]"]=Ne["[object ArrayBuffer]"]=Ne["[object Boolean]"]=Ne["[object DataView]"]=Ne["[object Date]"]=Ne["[object Error]"]=Ne["[object Function]"]=Ne["[object Map]"]=Ne["[object Number]"]=Ne["[object Object]"]=Ne["[object RegExp]"]=Ne["[object Set]"]=Ne["[object String]"]=Ne["[object WeakMap]"]=!1,E.exports=function tt(Xe){return S(Xe)&&m(Xe.length)&&!!Ne[g(Xe)]}},96517:(E,W,d)=>{var g=d(98133),m=d(9458),S=d(32608),T=d(21503),y=d(87495);E.exports=function I(O){return"function"==typeof O?O:null==O?S:"object"==typeof O?T(O)?m(O[0],O[1]):g(O):y(O)}},81172:(E,W,d)=>{var g=d(45488),m=d(85491),T=Object.prototype.hasOwnProperty;E.exports=function y(I){if(!g(I))return m(I);var O=[];for(var A in Object(I))T.call(I,A)&&"constructor"!=A&&O.push(A);return O}},92809:(E,W,d)=>{var g=d(25940),m=d(45488),S=d(32158),y=Object.prototype.hasOwnProperty;E.exports=function I(O){if(!g(O))return S(O);var A=m(O),N=[];for(var B in O)"constructor"==B&&(A||!y.call(O,B))||N.push(B);return N}},99069:E=>{E.exports=function W(d,g){return d<g}},92046:(E,W,d)=>{var g=d(43132),m=d(56507);E.exports=function S(T,y){var I=-1,O=m(T)?Array(T.length):[];return g(T,function(A,N,B){O[++I]=y(A,N,B)}),O}},98133:(E,W,d)=>{var g=d(40431),m=d(22379),S=d(642);E.exports=function T(y){var I=m(y);return 1==I.length&&I[0][2]?S(I[0][0],I[0][1]):function(O){return O===y||g(O,y,I)}}},9458:(E,W,d)=>{var g=d(85740),m=d(8817),S=d(11172),T=d(45352),y=d(22442),I=d(642),O=d(68533);E.exports=function B(k,X){return T(k)&&y(X)?I(O(k),X):function(q){var ue=m(q,k);return void 0===ue&&ue===X?S(q,k):g(X,ue,3)}}},73842:(E,W,d)=>{var g=d(2858),m=d(49276),S=d(30755),T=d(33675),y=d(25940),I=d(16555),O=d(99351);E.exports=function A(N,B,k,X,q){N!==B&&S(B,function(ue,r){if(q||(q=new g),y(ue))T(N,B,r,k,A,X,q);else{var ae=X?X(O(N,r),ue,r+"",N,B,q):void 0;void 0===ae&&(ae=ue),m(N,r,ae)}},I)}},33675:(E,W,d)=>{var g=d(49276),m=d(19292),S=d(65208),T=d(99454),y=d(4264),I=d(77151),O=d(21503),A=d(21330),N=d(80891),B=d(75946),k=d(25940),X=d(97614),q=d(48159),ue=d(99351),r=d(8067);E.exports=function ae(de,le,K,ge,Se,Oe,b){var Ge=ue(de,K),at=ue(le,K),ze=b.get(at);if(ze)g(de,K,ze);else{var Fe=Oe?Oe(Ge,at,K+"",de,le,b):void 0,Ne=void 0===Fe;if(Ne){var tt=O(at),Xe=!tt&&N(at),mt=!tt&&!Xe&&q(at);Fe=at,tt||Xe||mt?O(Ge)?Fe=Ge:A(Ge)?Fe=T(Ge):Xe?(Ne=!1,Fe=m(at,!0)):mt?(Ne=!1,Fe=S(at,!0)):Fe=[]:X(at)||I(at)?(Fe=Ge,I(Ge)?Fe=r(Ge):(!k(Ge)||B(Ge))&&(Fe=y(at))):Ne=!1}Ne&&(b.set(at,Fe),Se(Fe,at,ge,Oe,b),b.delete(at)),g(de,K,Fe)}}},6119:(E,W,d)=>{var g=d(84633),m=d(15456),S=d(96517),T=d(92046),y=d(18750),I=d(85647),O=d(41215),A=d(32608),N=d(21503);E.exports=function B(k,X,q){X=X.length?g(X,function(ae){return N(ae)?function(de){return m(de,1===ae.length?ae[0]:ae)}:ae}):[A];var ue=-1;X=g(X,I(S));var r=T(k,function(ae,de,le){return{criteria:g(X,function(ge){return ge(ae)}),index:++ue,value:ae}});return y(r,function(ae,de){return O(ae,de,q)})}},83021:(E,W,d)=>{var g=d(95495),m=d(11172);E.exports=function S(T,y){return g(T,y,function(I,O){return m(T,O)})}},95495:(E,W,d)=>{var g=d(15456),m=d(55963),S=d(65456);E.exports=function T(y,I,O){for(var A=-1,N=I.length,B={};++A<N;){var k=I[A],X=g(y,k);O(X,k)&&m(B,S(k,y),X)}return B}},11847:E=>{E.exports=function W(d){return function(g){return null==g?void 0:g[d]}}},39222:(E,W,d)=>{var g=d(15456);E.exports=function m(S){return function(T){return g(T,S)}}},16307:E=>{var W=Math.ceil,d=Math.max;E.exports=function g(m,S,T,y){for(var I=-1,O=d(W((S-m)/(T||1)),0),A=Array(O);O--;)A[y?O:++I]=m,m+=T;return A}},13570:E=>{E.exports=function W(d,g,m,S,T){return T(d,function(y,I,O){m=S?(S=!1,y):g(m,y,I,O)}),m}},23269:(E,W,d)=>{var g=d(32608),m=d(53983),S=d(72185);E.exports=function T(y,I){return S(m(y,I,g),y+"")}},55963:(E,W,d)=>{var g=d(89719),m=d(65456),S=d(58442),T=d(25940),y=d(68533);E.exports=function I(O,A,N,B){if(!T(O))return O;for(var k=-1,X=(A=m(A,O)).length,q=X-1,ue=O;null!=ue&&++k<X;){var r=y(A[k]),ae=N;if("__proto__"===r||"constructor"===r||"prototype"===r)return O;if(k!=q){var de=ue[r];void 0===(ae=B?B(de,r,ue):void 0)&&(ae=T(de)?de:S(A[k+1])?[]:{})}g(ue,r,ae),ue=ue[r]}return O}},69510:(E,W,d)=>{var g=d(76684),m=d(56713),S=d(32608);E.exports=m?function(y,I){return m(y,"toString",{configurable:!0,enumerable:!1,value:g(I),writable:!0})}:S},18750:E=>{E.exports=function W(d,g){var m=d.length;for(d.sort(g);m--;)d[m]=d[m].value;return d}},85334:E=>{E.exports=function W(d,g){for(var m=-1,S=Array(d);++m<d;)S[m]=g(m);return S}},93935:(E,W,d)=>{var g=d(60443),m=d(84633),S=d(21503),T=d(44129),I=g?g.prototype:void 0,O=I?I.toString:void 0;E.exports=function A(N){if("string"==typeof N)return N;if(S(N))return m(N,A)+"";if(T(N))return O?O.call(N):"";var B=N+"";return"0"==B&&1/N==-1/0?"-0":B}},83348:(E,W,d)=>{var g=d(42760),m=/^\s+/;E.exports=function S(T){return T&&T.slice(0,g(T)+1).replace(m,"")}},85647:E=>{E.exports=function W(d){return function(g){return d(g)}}},80707:(E,W,d)=>{var g=d(58849),m=d(61253),S=d(37609),T=d(25972),y=d(14575),I=d(24174);E.exports=function A(N,B,k){var X=-1,q=m,ue=N.length,r=!0,ae=[],de=ae;if(k)r=!1,q=S;else if(ue>=200){var le=B?null:y(N);if(le)return I(le);r=!1,q=T,de=new g}else de=B?[]:ae;e:for(;++X<ue;){var K=N[X],ge=B?B(K):K;if(K=k||0!==K?K:0,r&&ge==ge){for(var Se=de.length;Se--;)if(de[Se]===ge)continue e;B&&de.push(ge),ae.push(K)}else q(de,ge,k)||(de!==ae&&de.push(ge),ae.push(K))}return ae}},19179:(E,W,d)=>{var g=d(84633);E.exports=function m(S,T){return g(T,function(y){return S[y]})}},38645:E=>{E.exports=function W(d,g,m){for(var S=-1,T=d.length,y=g.length,I={};++S<T;)m(I,d[S],S<y?g[S]:void 0);return I}},25972:E=>{E.exports=function W(d,g){return d.has(g)}},21481:(E,W,d)=>{var g=d(32608);E.exports=function m(S){return"function"==typeof S?S:g}},65456:(E,W,d)=>{var g=d(21503),m=d(45352),S=d(32855),T=d(73943);E.exports=function y(I,O){return g(I)?I:m(I,O)?[I]:S(T(I))}},43362:(E,W,d)=>{var g=d(73457);E.exports=function m(S){var T=new S.constructor(S.byteLength);return new g(T).set(new g(S)),T}},19292:(E,W,d)=>{E=d.nmd(E);var g=d(12119),m=W&&!W.nodeType&&W,S=m&&E&&!E.nodeType&&E,y=S&&S.exports===m?g.Buffer:void 0,I=y?y.allocUnsafe:void 0;E.exports=function O(A,N){if(N)return A.slice();var B=A.length,k=I?I(B):new A.constructor(B);return A.copy(k),k}},17e3:(E,W,d)=>{var g=d(43362);E.exports=function m(S,T){var y=T?g(S.buffer):S.buffer;return new S.constructor(y,S.byteOffset,S.byteLength)}},74098:E=>{var W=/\w*$/;E.exports=function d(g){var m=new g.constructor(g.source,W.exec(g));return m.lastIndex=g.lastIndex,m}},62533:(E,W,d)=>{var g=d(60443),m=g?g.prototype:void 0,S=m?m.valueOf:void 0;E.exports=function T(y){return S?Object(S.call(y)):{}}},65208:(E,W,d)=>{var g=d(43362);E.exports=function m(S,T){var y=T?g(S.buffer):S.buffer;return new S.constructor(y,S.byteOffset,S.length)}},13443:(E,W,d)=>{var g=d(44129);E.exports=function m(S,T){if(S!==T){var y=void 0!==S,I=null===S,O=S==S,A=g(S),N=void 0!==T,B=null===T,k=T==T,X=g(T);if(!B&&!X&&!A&&S>T||A&&N&&k&&!B&&!X||I&&N&&k||!y&&k||!O)return 1;if(!I&&!A&&!X&&S<T||X&&y&&O&&!I&&!A||B&&y&&O||!N&&O||!k)return-1}return 0}},41215:(E,W,d)=>{var g=d(13443);E.exports=function m(S,T,y){for(var I=-1,O=S.criteria,A=T.criteria,N=O.length,B=y.length;++I<N;){var k=g(O[I],A[I]);if(k)return I>=B?k:k*("desc"==y[I]?-1:1)}return S.index-T.index}},99454:E=>{E.exports=function W(d,g){var m=-1,S=d.length;for(g||(g=Array(S));++m<S;)g[m]=d[m];return g}},31989:(E,W,d)=>{var g=d(89719),m=d(85683);E.exports=function S(T,y,I,O){var A=!I;I||(I={});for(var N=-1,B=y.length;++N<B;){var k=y[N],X=O?O(I[k],T[k],k,I,T):void 0;void 0===X&&(X=T[k]),A?m(I,k,X):g(I,k,X)}return I}},84444:(E,W,d)=>{var g=d(31989),m=d(39383);E.exports=function S(T,y){return g(T,m(T),y)}},59905:(E,W,d)=>{var g=d(31989),m=d(53051);E.exports=function S(T,y){return g(T,m(T),y)}},24610:(E,W,d)=>{var g=d(12119);E.exports=g["__core-js_shared__"]},84944:(E,W,d)=>{var g=d(23269),m=d(93342);E.exports=function S(T){return g(function(y,I){var O=-1,A=I.length,N=A>1?I[A-1]:void 0,B=A>2?I[2]:void 0;for(N=T.length>3&&"function"==typeof N?(A--,N):void 0,B&&m(I[0],I[1],B)&&(N=A<3?void 0:N,A=1),y=Object(y);++O<A;){var k=I[O];k&&T(y,k,O,N)}return y})}},16539:(E,W,d)=>{var g=d(56507);E.exports=function m(S,T){return function(y,I){if(null==y)return y;if(!g(y))return S(y,I);for(var O=y.length,A=T?O:-1,N=Object(y);(T?A--:++A<O)&&!1!==I(N[A],A,N););return y}}},40456:E=>{E.exports=function W(d){return function(g,m,S){for(var T=-1,y=Object(g),I=S(g),O=I.length;O--;){var A=I[d?O:++T];if(!1===m(y[A],A,y))break}return g}}},24653:(E,W,d)=>{var g=d(96517),m=d(56507),S=d(118);E.exports=function T(y){return function(I,O,A){var N=Object(I);if(!m(I)){var B=g(O,3);I=S(I),O=function(X){return B(N[X],X,N)}}var k=y(I,O,A);return k>-1?N[B?I[k]:k]:void 0}}},97509:(E,W,d)=>{var g=d(16307),m=d(93342),S=d(12232);E.exports=function T(y){return function(I,O,A){return A&&"number"!=typeof A&&m(I,O,A)&&(O=A=void 0),I=S(I),void 0===O?(O=I,I=0):O=S(O),A=void 0===A?I<O?1:-1:S(A),g(I,O,A,y)}}},14575:(E,W,d)=>{var g=d(46323),m=d(12552),S=d(24174),y=g&&1/S(new g([,-0]))[1]==1/0?function(I){return new g(I)}:m;E.exports=y},56713:(E,W,d)=>{var g=d(53436),m=function(){try{var S=g(Object,"defineProperty");return S({},"",{}),S}catch(T){}}();E.exports=m},63914:(E,W,d)=>{var g=d(58849),m=d(79503),S=d(25972);E.exports=function I(O,A,N,B,k,X){var q=1&N,ue=O.length,r=A.length;if(ue!=r&&!(q&&r>ue))return!1;var ae=X.get(O),de=X.get(A);if(ae&&de)return ae==A&&de==O;var le=-1,K=!0,ge=2&N?new g:void 0;for(X.set(O,A),X.set(A,O);++le<ue;){var Se=O[le],Oe=A[le];if(B)var b=q?B(Oe,Se,le,A,O,X):B(Se,Oe,le,O,A,X);if(void 0!==b){if(b)continue;K=!1;break}if(ge){if(!m(A,function(Ge,at){if(!S(ge,at)&&(Se===Ge||k(Se,Ge,N,B,X)))return ge.push(at)})){K=!1;break}}else if(Se!==Oe&&!k(Se,Oe,N,B,X)){K=!1;break}}return X.delete(O),X.delete(A),K}},78583:(E,W,d)=>{var g=d(60443),m=d(73457),S=d(20217),T=d(63914),y=d(83205),I=d(24174),ge=g?g.prototype:void 0,Se=ge?ge.valueOf:void 0;E.exports=function Oe(b,Ge,at,ze,Fe,Ne,tt){switch(at){case"[object DataView]":if(b.byteLength!=Ge.byteLength||b.byteOffset!=Ge.byteOffset)return!1;b=b.buffer,Ge=Ge.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=Ge.byteLength||!Ne(new m(b),new m(Ge)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+b,+Ge);case"[object Error]":return b.name==Ge.name&&b.message==Ge.message;case"[object RegExp]":case"[object String]":return b==Ge+"";case"[object Map]":var Xe=y;case"[object Set]":if(Xe||(Xe=I),b.size!=Ge.size&&!(1&ze))return!1;var _t=tt.get(b);if(_t)return _t==Ge;ze|=2,tt.set(b,Ge);var gt=T(Xe(b),Xe(Ge),ze,Fe,Ne,tt);return tt.delete(b),gt;case"[object Symbol]":if(Se)return Se.call(b)==Se.call(Ge)}return!1}},32286:(E,W,d)=>{var g=d(47597),T=Object.prototype.hasOwnProperty;E.exports=function y(I,O,A,N,B,k){var X=1&A,q=g(I),ue=q.length;if(ue!=g(O).length&&!X)return!1;for(var de=ue;de--;){var le=q[de];if(!(X?le in O:T.call(O,le)))return!1}var K=k.get(I),ge=k.get(O);if(K&&ge)return K==O&&ge==I;var Se=!0;k.set(I,O),k.set(O,I);for(var Oe=X;++de<ue;){var b=I[le=q[de]],Ge=O[le];if(N)var at=X?N(Ge,b,le,O,I,k):N(b,Ge,le,I,O,k);if(!(void 0===at?b===Ge||B(b,Ge,A,N,k):at)){Se=!1;break}Oe||(Oe="constructor"==le)}if(Se&&!Oe){var ze=I.constructor,Fe=O.constructor;ze!=Fe&&"constructor"in I&&"constructor"in O&&!("function"==typeof ze&&ze instanceof ze&&"function"==typeof Fe&&Fe instanceof Fe)&&(Se=!1)}return k.delete(I),k.delete(O),Se}},3975:(E,W,d)=>{var g=d(22274),m=d(53983),S=d(72185);E.exports=function T(y){return S(m(y,void 0,g),y+"")}},79122:E=>{var W="object"==typeof global&&global&&global.Object===Object&&global;E.exports=W},47597:(E,W,d)=>{var g=d(38247),m=d(39383),S=d(118);E.exports=function T(y){return g(y,S,m)}},6967:(E,W,d)=>{var g=d(38247),m=d(53051),S=d(16555);E.exports=function T(y){return g(y,S,m)}},54537:(E,W,d)=>{var g=d(23819);E.exports=function m(S,T){var y=S.__data__;return g(T)?y["string"==typeof T?"string":"hash"]:y.map}},22379:(E,W,d)=>{var g=d(22442),m=d(118);E.exports=function S(T){for(var y=m(T),I=y.length;I--;){var O=y[I],A=T[O];y[I]=[O,A,g(A)]}return y}},53436:(E,W,d)=>{var g=d(37304),m=d(51990);E.exports=function S(T,y){var I=m(T,y);return g(I)?I:void 0}},29519:(E,W,d)=>{var m=d(69385)(Object.getPrototypeOf,Object);E.exports=m},21318:(E,W,d)=>{var g=d(60443),m=Object.prototype,S=m.hasOwnProperty,T=m.toString,y=g?g.toStringTag:void 0;E.exports=function I(O){var A=S.call(O,y),N=O[y];try{O[y]=void 0;var B=!0}catch(X){}var k=T.call(O);return B&&(A?O[y]=N:delete O[y]),k}},39383:(E,W,d)=>{var g=d(69779),m=d(49975),T=Object.prototype.propertyIsEnumerable,y=Object.getOwnPropertySymbols;E.exports=y?function(O){return null==O?[]:(O=Object(O),g(y(O),function(A){return T.call(O,A)}))}:m},53051:(E,W,d)=>{var g=d(85059),m=d(29519),S=d(39383),T=d(49975);E.exports=Object.getOwnPropertySymbols?function(O){for(var A=[];O;)g(A,S(O)),O=m(O);return A}:T},28794:(E,W,d)=>{var g=d(37244),m=d(51501),S=d(44267),T=d(46323),y=d(24243),I=d(93337),O=d(52827),A="[object Map]",B="[object Promise]",k="[object Set]",X="[object WeakMap]",q="[object DataView]",ue=O(g),r=O(m),ae=O(S),de=O(T),le=O(y),K=I;(g&&K(new g(new ArrayBuffer(1)))!=q||m&&K(new m)!=A||S&&K(S.resolve())!=B||T&&K(new T)!=k||y&&K(new y)!=X)&&(K=function(ge){var Se=I(ge),Oe="[object Object]"==Se?ge.constructor:void 0,b=Oe?O(Oe):"";if(b)switch(b){case ue:return q;case r:return A;case ae:return B;case de:return k;case le:return X}return Se}),E.exports=K},51990:E=>{E.exports=function W(d,g){return null==d?void 0:d[g]}},47283:(E,W,d)=>{var g=d(65456),m=d(77151),S=d(21503),T=d(58442),y=d(96231),I=d(68533);E.exports=function O(A,N,B){for(var k=-1,X=(N=g(N,A)).length,q=!1;++k<X;){var ue=I(N[k]);if(!(q=null!=A&&B(A,ue)))break;A=A[ue]}return q||++k!=X?q:!!(X=null==A?0:A.length)&&y(X)&&T(ue,X)&&(S(A)||m(A))}},77609:E=>{var I=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");E.exports=function O(A){return I.test(A)}},64312:(E,W,d)=>{var g=d(60862);E.exports=function m(){this.__data__=g?g(null):{},this.size=0}},22393:E=>{E.exports=function W(d){var g=this.has(d)&&delete this.__data__[d];return this.size-=g?1:0,g}},15764:(E,W,d)=>{var g=d(60862),T=Object.prototype.hasOwnProperty;E.exports=function y(I){var O=this.__data__;if(g){var A=O[I];return"__lodash_hash_undefined__"===A?void 0:A}return T.call(O,I)?O[I]:void 0}},18685:(E,W,d)=>{var g=d(60862),S=Object.prototype.hasOwnProperty;E.exports=function T(y){var I=this.__data__;return g?void 0!==I[y]:S.call(I,y)}},26676:(E,W,d)=>{var g=d(60862);E.exports=function S(T,y){var I=this.__data__;return this.size+=this.has(T)?0:1,I[T]=g&&void 0===y?"__lodash_hash_undefined__":y,this}},76782:E=>{var d=Object.prototype.hasOwnProperty;E.exports=function g(m){var S=m.length,T=new m.constructor(S);return S&&"string"==typeof m[0]&&d.call(m,"index")&&(T.index=m.index,T.input=m.input),T}},37878:(E,W,d)=>{var g=d(43362),m=d(17e3),S=d(74098),T=d(62533),y=d(65208);E.exports=function at(ze,Fe,Ne){var tt=ze.constructor;switch(Fe){case"[object ArrayBuffer]":return g(ze);case"[object Boolean]":case"[object Date]":return new tt(+ze);case"[object DataView]":return m(ze,Ne);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return y(ze,Ne);case"[object Map]":case"[object Set]":return new tt;case"[object Number]":case"[object String]":return new tt(ze);case"[object RegExp]":return S(ze);case"[object Symbol]":return T(ze)}}},4264:(E,W,d)=>{var g=d(78858),m=d(29519),S=d(45488);E.exports=function T(y){return"function"!=typeof y.constructor||S(y)?{}:g(m(y))}},75039:(E,W,d)=>{var g=d(60443),m=d(77151),S=d(21503),T=g?g.isConcatSpreadable:void 0;E.exports=function y(I){return S(I)||m(I)||!!(T&&I&&I[T])}},58442:E=>{var d=/^(?:0|[1-9]\d*)$/;E.exports=function g(m,S){var T=typeof m;return!!(S=null==S?9007199254740991:S)&&("number"==T||"symbol"!=T&&d.test(m))&&m>-1&&m%1==0&&m<S}},93342:(E,W,d)=>{var g=d(20217),m=d(56507),S=d(58442),T=d(25940);E.exports=function y(I,O,A){if(!T(A))return!1;var N=typeof O;return!!("number"==N?m(A)&&S(O,A.length):"string"==N&&O in A)&&g(A[O],I)}},45352:(E,W,d)=>{var g=d(21503),m=d(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;E.exports=function y(I,O){if(g(I))return!1;var A=typeof I;return!("number"!=A&&"symbol"!=A&&"boolean"!=A&&null!=I&&!m(I))||T.test(I)||!S.test(I)||null!=O&&I in Object(O)}},23819:E=>{E.exports=function W(d){var g=typeof d;return"string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==d:null===d}},91943:(E,W,d)=>{var T,g=d(24610),m=(T=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";E.exports=function S(T){return!!m&&m in T}},45488:E=>{var W=Object.prototype;E.exports=function d(g){var m=g&&g.constructor;return g===("function"==typeof m&&m.prototype||W)}},22442:(E,W,d)=>{var g=d(25940);E.exports=function m(S){return S==S&&!g(S)}},41840:E=>{E.exports=function W(){this.__data__=[],this.size=0}},34378:(E,W,d)=>{var g=d(43503),S=Array.prototype.splice;E.exports=function T(y){var I=this.__data__,O=g(I,y);return!(O<0||(O==I.length-1?I.pop():S.call(I,O,1),--this.size,0))}},54981:(E,W,d)=>{var g=d(43503);E.exports=function m(S){var T=this.__data__,y=g(T,S);return y<0?void 0:T[y][1]}},67343:(E,W,d)=>{var g=d(43503);E.exports=function m(S){return g(this.__data__,S)>-1}},98895:(E,W,d)=>{var g=d(43503);E.exports=function m(S,T){var y=this.__data__,I=g(y,S);return I<0?(++this.size,y.push([S,T])):y[I][1]=T,this}},10638:(E,W,d)=>{var g=d(54994),m=d(9215),S=d(51501);E.exports=function T(){this.size=0,this.__data__={hash:new g,map:new(S||m),string:new g}}},11184:(E,W,d)=>{var g=d(54537);E.exports=function m(S){var T=g(this,S).delete(S);return this.size-=T?1:0,T}},70866:(E,W,d)=>{var g=d(54537);E.exports=function m(S){return g(this,S).get(S)}},43771:(E,W,d)=>{var g=d(54537);E.exports=function m(S){return g(this,S).has(S)}},51772:(E,W,d)=>{var g=d(54537);E.exports=function m(S,T){var y=g(this,S),I=y.size;return y.set(S,T),this.size+=y.size==I?0:1,this}},83205:E=>{E.exports=function W(d){var g=-1,m=Array(d.size);return d.forEach(function(S,T){m[++g]=[T,S]}),m}},642:E=>{E.exports=function W(d,g){return function(m){return null!=m&&m[d]===g&&(void 0!==g||d in Object(m))}}},90719:(E,W,d)=>{var g=d(30535);E.exports=function S(T){var y=g(T,function(O){return 500===I.size&&I.clear(),O}),I=y.cache;return y}},60862:(E,W,d)=>{var m=d(53436)(Object,"create");E.exports=m},85491:(E,W,d)=>{var m=d(69385)(Object.keys,Object);E.exports=m},32158:E=>{E.exports=function W(d){var g=[];if(null!=d)for(var m in Object(d))g.push(m);return g}},73597:(E,W,d)=>{E=d.nmd(E);var g=d(79122),m=W&&!W.nodeType&&W,S=m&&E&&!E.nodeType&&E,y=S&&S.exports===m&&g.process,I=function(){try{return S&&S.require&&S.require("util").types||y&&y.binding&&y.binding("util")}catch(A){}}();E.exports=I},92902:E=>{var d=Object.prototype.toString;E.exports=function g(m){return d.call(m)}},69385:E=>{E.exports=function W(d,g){return function(m){return d(g(m))}}},53983:(E,W,d)=>{var g=d(26999),m=Math.max;E.exports=function S(T,y,I){return y=m(void 0===y?T.length-1:y,0),function(){for(var O=arguments,A=-1,N=m(O.length-y,0),B=Array(N);++A<N;)B[A]=O[y+A];A=-1;for(var k=Array(y+1);++A<y;)k[A]=O[A];return k[y]=I(B),g(T,this,k)}}},12119:(E,W,d)=>{var g=d(79122),m="object"==typeof self&&self&&self.Object===Object&&self,S=g||m||Function("return this")();E.exports=S},99351:E=>{E.exports=function W(d,g){if(("constructor"!==g||"function"!=typeof d[g])&&"__proto__"!=g)return d[g]}},4600:E=>{E.exports=function d(g){return this.__data__.set(g,"__lodash_hash_undefined__"),this}},31387:E=>{E.exports=function W(d){return this.__data__.has(d)}},24174:E=>{E.exports=function W(d){var g=-1,m=Array(d.size);return d.forEach(function(S){m[++g]=S}),m}},72185:(E,W,d)=>{var g=d(69510),S=d(10029)(g);E.exports=S},10029:E=>{var g=Date.now;E.exports=function m(S){var T=0,y=0;return function(){var I=g(),O=16-(I-y);if(y=I,O>0){if(++T>=800)return arguments[0]}else T=0;return S.apply(void 0,arguments)}}},13720:(E,W,d)=>{var g=d(9215);E.exports=function m(){this.__data__=new g,this.size=0}},64410:E=>{E.exports=function W(d){var g=this.__data__,m=g.delete(d);return this.size=g.size,m}},45576:E=>{E.exports=function W(d){return this.__data__.get(d)}},22247:E=>{E.exports=function W(d){return this.__data__.has(d)}},41585:(E,W,d)=>{var g=d(9215),m=d(51501),S=d(99850);E.exports=function y(I,O){var A=this.__data__;if(A instanceof g){var N=A.__data__;if(!m||N.length<199)return N.push([I,O]),this.size=++A.size,this;A=this.__data__=new S(N)}return A.set(I,O),this.size=A.size,this}},24977:E=>{E.exports=function W(d,g,m){for(var S=m-1,T=d.length;++S<T;)if(d[S]===g)return S;return-1}},52315:(E,W,d)=>{var g=d(75481),m=d(77609),S=d(81149);E.exports=function T(y){return m(y)?S(y):g(y)}},32855:(E,W,d)=>{var g=d(90719),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,T=g(function(y){var I=[];return 46===y.charCodeAt(0)&&I.push(""),y.replace(m,function(O,A,N,B){I.push(N?B.replace(S,"$1"):A||O)}),I});E.exports=T},68533:(E,W,d)=>{var g=d(44129);E.exports=function S(T){if("string"==typeof T||g(T))return T;var y=T+"";return"0"==y&&1/T==-1/0?"-0":y}},52827:E=>{var d=Function.prototype.toString;E.exports=function g(m){if(null!=m){try{return d.call(m)}catch(S){}try{return m+""}catch(S){}}return""}},42760:E=>{var W=/\s/;E.exports=function d(g){for(var m=g.length;m--&&W.test(g.charAt(m)););return m}},81149:E=>{var W="\\ud800-\\udfff",y="["+W+"]",I="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",O="\\ud83c[\\udffb-\\udfff]",N="[^"+W+"]",B="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",q="(?:"+I+"|"+O+")?",ue="[\\ufe0e\\ufe0f]?",ae=ue+q+"(?:\\u200d(?:"+[N,B,k].join("|")+")"+ue+q+")*",de="(?:"+[N+I+"?",I,B,k,y].join("|")+")",le=RegExp(O+"(?="+O+")|"+de+ae,"g");E.exports=function K(ge){for(var Se=le.lastIndex=0;le.test(ge);)++Se;return Se}},11094:(E,W,d)=>{var g=d(44462);E.exports=function S(T){return g(T,4)}},90733:(E,W,d)=>{var g=d(44462);E.exports=function T(y){return g(y,5)}},76684:E=>{E.exports=function W(d){return function(){return d}}},28800:(E,W,d)=>{var g=d(23269),m=d(20217),S=d(93342),T=d(16555),y=Object.prototype,I=y.hasOwnProperty,O=g(function(A,N){A=Object(A);var B=-1,k=N.length,X=k>2?N[2]:void 0;for(X&&S(N[0],N[1],X)&&(k=1);++B<k;)for(var q=N[B],ue=T(q),r=-1,ae=ue.length;++r<ae;){var de=ue[r],le=A[de];(void 0===le||m(le,y[de])&&!I.call(A,de))&&(A[de]=q[de])}return A});E.exports=O},35474:(E,W,d)=>{E.exports=d(89851)},20217:E=>{E.exports=function W(d,g){return d===g||d!=d&&g!=g}},35281:(E,W,d)=>{var g=d(69779),m=d(33609),S=d(96517),T=d(21503);E.exports=function y(I,O){return(T(I)?g:m)(I,S(O,3))}},62516:(E,W,d)=>{var S=d(24653)(d(36397));E.exports=S},36397:(E,W,d)=>{var g=d(65317),m=d(96517),S=d(44401),T=Math.max;E.exports=function y(I,O,A){var N=null==I?0:I.length;if(!N)return-1;var B=null==A?0:S(A);return B<0&&(B=T(N+B,0)),g(I,m(O,3),B)}},22274:(E,W,d)=>{var g=d(50686);E.exports=function m(S){return null!=S&&S.length?g(S,1):[]}},89851:(E,W,d)=>{var g=d(96837),m=d(43132),S=d(21481),T=d(21503);E.exports=function y(I,O){return(T(I)?g:m)(I,S(O))}},41176:(E,W,d)=>{var g=d(30755),m=d(21481),S=d(16555);E.exports=function T(y,I){return null==y?y:g(y,m(I),S)}},8817:(E,W,d)=>{var g=d(15456);E.exports=function m(S,T,y){var I=null==S?void 0:g(S,T);return void 0===I?y:I}},54842:(E,W,d)=>{var g=d(84781),m=d(47283);E.exports=function S(T,y){return null!=T&&m(T,y,g)}},11172:(E,W,d)=>{var g=d(69989),m=d(47283);E.exports=function S(T,y){return null!=T&&m(T,y,g)}},32608:E=>{E.exports=function W(d){return d}},77151:(E,W,d)=>{var g=d(60186),m=d(72671),S=Object.prototype,T=S.hasOwnProperty,y=S.propertyIsEnumerable,I=g(function(){return arguments}())?g:function(O){return m(O)&&T.call(O,"callee")&&!y.call(O,"callee")};E.exports=I},21503:E=>{E.exports=Array.isArray},56507:(E,W,d)=>{var g=d(75946),m=d(96231);E.exports=function S(T){return null!=T&&m(T.length)&&!g(T)}},21330:(E,W,d)=>{var g=d(56507),m=d(72671);E.exports=function S(T){return m(T)&&g(T)}},80891:(E,W,d)=>{E=d.nmd(E);var g=d(12119),m=d(63580),S=W&&!W.nodeType&&W,T=S&&E&&!E.nodeType&&E,I=T&&T.exports===S?g.Buffer:void 0;E.exports=(I?I.isBuffer:void 0)||m},71973:(E,W,d)=>{var g=d(81172),m=d(28794),S=d(77151),T=d(21503),y=d(56507),I=d(80891),O=d(45488),A=d(48159),X=Object.prototype.hasOwnProperty;E.exports=function q(ue){if(null==ue)return!0;if(y(ue)&&(T(ue)||"string"==typeof ue||"function"==typeof ue.splice||I(ue)||A(ue)||S(ue)))return!ue.length;var r=m(ue);if("[object Map]"==r||"[object Set]"==r)return!ue.size;if(O(ue))return!g(ue).length;for(var ae in ue)if(X.call(ue,ae))return!1;return!0}},75946:(E,W,d)=>{var g=d(93337),m=d(25940);E.exports=function O(A){if(!m(A))return!1;var N=g(A);return"[object Function]"==N||"[object GeneratorFunction]"==N||"[object AsyncFunction]"==N||"[object Proxy]"==N}},96231:E=>{E.exports=function d(g){return"number"==typeof g&&g>-1&&g%1==0&&g<=9007199254740991}},13222:(E,W,d)=>{var g=d(97021),m=d(85647),S=d(73597),T=S&&S.isMap,y=T?m(T):g;E.exports=y},25940:E=>{E.exports=function W(d){var g=typeof d;return null!=d&&("object"==g||"function"==g)}},72671:E=>{E.exports=function W(d){return null!=d&&"object"==typeof d}},97614:(E,W,d)=>{var g=d(93337),m=d(29519),S=d(72671),O=Function.prototype.toString,A=Object.prototype.hasOwnProperty,N=O.call(Object);E.exports=function B(k){if(!S(k)||"[object Object]"!=g(k))return!1;var X=m(k);if(null===X)return!0;var q=A.call(X,"constructor")&&X.constructor;return"function"==typeof q&&q instanceof q&&O.call(q)==N}},90799:(E,W,d)=>{var g=d(771),m=d(85647),S=d(73597),T=S&&S.isSet,y=T?m(T):g;E.exports=y},30248:(E,W,d)=>{var g=d(93337),m=d(21503),S=d(72671);E.exports=function y(I){return"string"==typeof I||!m(I)&&S(I)&&"[object String]"==g(I)}},44129:(E,W,d)=>{var g=d(93337),m=d(72671);E.exports=function T(y){return"symbol"==typeof y||m(y)&&"[object Symbol]"==g(y)}},48159:(E,W,d)=>{var g=d(1083),m=d(85647),S=d(73597),T=S&&S.isTypedArray,y=T?m(T):g;E.exports=y},34235:E=>{E.exports=function W(d){return void 0===d}},118:(E,W,d)=>{var g=d(72271),m=d(81172),S=d(56507);E.exports=function T(y){return S(y)?g(y):m(y)}},16555:(E,W,d)=>{var g=d(72271),m=d(92809),S=d(56507);E.exports=function T(y){return S(y)?g(y,!0):m(y)}},25809:E=>{E.exports=function W(d){var g=null==d?0:d.length;return g?d[g-1]:void 0}},17489:function(E,W,d){var g;E=d.nmd(E),function(){var m,I="Expected a function",A="__lodash_hash_undefined__",B="__lodash_placeholder__",b=128,gt=1/0,Zt=9007199254740991,Kn=4294967295,Un=[["ary",b],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],$e="[object Arguments]",Je="[object Array]",xt="[object Boolean]",Ot="[object Date]",Fn="[object Error]",sr="[object Function]",co="[object GeneratorFunction]",dn="[object Map]",en="[object Number]",G="[object Object]",re="[object Promise]",Ke="[object RegExp]",qe="[object Set]",Ct="[object String]",Bt="[object Symbol]",bn="[object WeakMap]",mn="[object ArrayBuffer]",vr="[object DataView]",fr="[object Float32Array]",eo="[object Float64Array]",Yn="[object Int8Array]",yr="[object Int16Array]",hr="[object Int32Array]",_r="[object Uint8Array]",$r="[object Uint8ClampedArray]",gi="[object Uint16Array]",xr="[object Uint32Array]",vn=/\b__p \+= '';/g,mi=/\b(__p \+=) '' \+/g,Bo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mi=/&(?:amp|lt|gt|quot|#39);/g,Le=/[&<>"']/g,dt=RegExp(Mi.source),nr=RegExp(Le.source),Rr=/<%-([\s\S]+?)%>/g,vi=/<%([\s\S]+?)%>/g,yi=/<%=([\s\S]+?)%>/g,to=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wr=/^\w*$/,wr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wo=/[\\^$.*+?()[\]{}|]/g,os=RegExp(wo.source),ua=/^\s+/,Yr=/\s/,as=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ss=/\{\n\/\* \[wrapped with (.+)\] \*/,ji=/,? & /,us=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oa=/[()=,{}\[\]\/\s]/,ls=/\\(\\)?/g,Vo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Is=/\w*$/,La=/^[-+]0x[0-9a-f]+$/i,fo=/^0b[01]+$/i,ru=/^\[object .+?Constructor\]$/,la=/^0o[0-7]+$/i,Ps=/^(?:0|[1-9]\d*)$/,Ms=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ho=/($^)/,So=/['\n\r\u2028\u2029\\]/g,ca="\\ud800-\\udfff",Ra="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",cs="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",zo="A-Z\\xc0-\\xd6\\xd8-\\xde",Gi="\\ufe0e\\ufe0f",Br="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",no="["+ca+"]",da="["+Br+"]",Vr="["+Ra+"]",Ai="\\d+",or="["+cs+"]",Zn="["+jo+"]",Ui="[^"+ca+Br+Ai+cs+jo+zo+"]",Hr="\\ud83c[\\udffb-\\udfff]",Cn="[^"+ca+"]",jr="(?:\\ud83c[\\udde6-\\uddff]){2}",Xr="[\\ud800-\\udbff][\\udc00-\\udfff]",Go="["+zo+"]",Na="(?:"+Zn+"|"+Ui+")",fa="(?:"+Go+"|"+Ui+")",ha="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Da="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",po="(?:"+Vr+"|"+Hr+")?",Fa="["+Gi+"]?",ks=Fa+po+"(?:\\u200d(?:"+[Cn,jr,Xr].join("|")+")"+Fa+po+")*",$i="(?:"+[or,jr,Xr].join("|")+")"+ks,pa="(?:"+[Cn+Vr+"?",Vr,jr,Xr,no].join("|")+")",ga=RegExp("['\u2019]","g"),ma=RegExp(Vr,"g"),go=RegExp(Hr+"(?="+Hr+")|"+pa+ks,"g"),Mr=RegExp([Go+"?"+Zn+"+"+ha+"(?="+[da,Go,"$"].join("|")+")",fa+"+"+Da+"(?="+[da,Go+Na,"$"].join("|")+")",Go+"?"+Na+"+"+ha,Go+"+"+Da,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ai,$i].join("|"),"g"),Eo=RegExp("[\\u200d"+ca+Ra+Gi+"]"),Dt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Io=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mo=-1,jn={};jn[fr]=jn[eo]=jn[Yn]=jn[yr]=jn[hr]=jn[_r]=jn[$r]=jn[gi]=jn[xr]=!0,jn[$e]=jn[Je]=jn[mn]=jn[xt]=jn[vr]=jn[Ot]=jn[Fn]=jn[sr]=jn[dn]=jn[en]=jn[G]=jn[Ke]=jn[qe]=jn[Ct]=jn[bn]=!1;var zn={};zn[$e]=zn[Je]=zn[mn]=zn[vr]=zn[xt]=zn[Ot]=zn[fr]=zn[eo]=zn[Yn]=zn[yr]=zn[hr]=zn[dn]=zn[en]=zn[G]=zn[Ke]=zn[qe]=zn[Ct]=zn[Bt]=zn[_r]=zn[$r]=zn[gi]=zn[xr]=!0,zn[Fn]=zn[sr]=zn[bn]=!1;var J={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,me=parseInt,ke="object"==typeof global&&global&&global.Object===Object&&global,Ee="object"==typeof self&&self&&self.Object===Object&&self,Be=ke||Ee||Function("return this")(),nt=W&&!W.nodeType&&W,l=nt&&E&&!E.nodeType&&E,f=l&&l.exports===nt,_=f&&ke.process,w=function(){try{return l&&l.require&&l.require("util").types||_&&_.binding&&_.binding("util")}catch(Ye){}}(),D=w&&w.isArrayBuffer,H=w&&w.isDate,Y=w&&w.isMap,pe=w&&w.isRegExp,ce=w&&w.isSet,Ae=w&&w.isTypedArray;function He(be,Ye,Ue){switch(Ue.length){case 0:return be.call(Ye);case 1:return be.call(Ye,Ue[0]);case 2:return be.call(Ye,Ue[0],Ue[1]);case 3:return be.call(Ye,Ue[0],Ue[1],Ue[2])}return be.apply(Ye,Ue)}function lt(be,Ye,Ue,Mt){for(var qt=-1,Mn=null==be?0:be.length;++qt<Mn;){var gr=be[qt];Ye(Mt,gr,Ue(gr),be)}return Mt}function De(be,Ye){for(var Ue=-1,Mt=null==be?0:be.length;++Ue<Mt&&!1!==Ye(be[Ue],Ue,be););return be}function Qe(be,Ye){for(var Ue=null==be?0:be.length;Ue--&&!1!==Ye(be[Ue],Ue,be););return be}function Rt(be,Ye){for(var Ue=-1,Mt=null==be?0:be.length;++Ue<Mt;)if(!Ye(be[Ue],Ue,be))return!1;return!0}function Gt(be,Ye){for(var Ue=-1,Mt=null==be?0:be.length,qt=0,Mn=[];++Ue<Mt;){var gr=be[Ue];Ye(gr,Ue,be)&&(Mn[qt++]=gr)}return Mn}function kt(be,Ye){return!(null==be||!be.length)&&Wi(be,Ye,0)>-1}function ur(be,Ye,Ue){for(var Mt=-1,qt=null==be?0:be.length;++Mt<qt;)if(Ue(Ye,be[Mt]))return!0;return!1}function an(be,Ye){for(var Ue=-1,Mt=null==be?0:be.length,qt=Array(Mt);++Ue<Mt;)qt[Ue]=Ye(be[Ue],Ue,be);return qt}function br(be,Ye){for(var Ue=-1,Mt=Ye.length,qt=be.length;++Ue<Mt;)be[qt+Ue]=Ye[Ue];return be}function $n(be,Ye,Ue,Mt){var qt=-1,Mn=null==be?0:be.length;for(Mt&&Mn&&(Ue=be[++qt]);++qt<Mn;)Ue=Ye(Ue,be[qt],qt,be);return Ue}function tn(be,Ye,Ue,Mt){var qt=null==be?0:be.length;for(Mt&&qt&&(Ue=be[--qt]);qt--;)Ue=Ye(Ue,be[qt],qt,be);return Ue}function Kr(be,Ye){for(var Ue=-1,Mt=null==be?0:be.length;++Ue<Mt;)if(Ye(be[Ue],Ue,be))return!0;return!1}var Ln=Jr("length");function fs(be,Ye,Ue){var Mt;return Ue(be,function(qt,Mn,gr){if(Ye(qt,Mn,gr))return Mt=Mn,!1}),Mt}function Qr(be,Ye,Ue,Mt){for(var qt=be.length,Mn=Ue+(Mt?1:-1);Mt?Mn--:++Mn<qt;)if(Ye(be[Mn],Mn,be))return Mn;return-1}function Wi(be,Ye,Ue){return Ye==Ye?function Xo(be,Ye,Ue){for(var Mt=Ue-1,qt=be.length;++Mt<qt;)if(be[Mt]===Ye)return Mt;return-1}(be,Ye,Ue):Qr(be,ai,Ue)}function va(be,Ye,Ue,Mt){for(var qt=Ue-1,Mn=be.length;++qt<Mn;)if(Mt(be[qt],Ye))return qt;return-1}function ai(be){return be!=be}function Po(be,Ye){var Ue=null==be?0:be.length;return Ue?hs(be,Ye)/Ue:NaN}function Jr(be){return function(Ye){return null==Ye?m:Ye[be]}}function xi(be){return function(Ye){return null==be?m:be[Ye]}}function lr(be,Ye,Ue,Mt,qt){return qt(be,function(Mn,gr,Qn){Ue=Mt?(Mt=!1,Mn):Ye(Ue,Mn,gr,Qn)}),Ue}function hs(be,Ye){for(var Ue,Mt=-1,qt=be.length;++Mt<qt;){var Mn=Ye(be[Mt]);Mn!==m&&(Ue=Ue===m?Mn:Ue+Mn)}return Ue}function Rn(be,Ye){for(var Ue=-1,Mt=Array(be);++Ue<be;)Mt[Ue]=Ye(Ue);return Mt}function au(be){return be&&be.slice(0,gs(be)+1).replace(ua,"")}function si(be){return function(Ye){return be(Ye)}}function su(be,Ye){return an(Ye,function(Ue){return be[Ue]})}function Wo(be,Ye){return be.has(Ye)}function Ku(be,Ye){for(var Ue=-1,Mt=be.length;++Ue<Mt&&Wi(Ye,be[Ue],0)>-1;);return Ue}function uu(be,Ye){for(var Ue=be.length;Ue--&&Wi(Ye,be[Ue],0)>-1;);return Ue}function Hl(be,Ye){for(var Ue=be.length,Mt=0;Ue--;)be[Ue]===Ye&&++Mt;return Mt}var Yo=xi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Mo=xi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Os(be){return"\\"+J[be]}function Ha(be){return Eo.test(be)}function lu(be){var Ye=-1,Ue=Array(be.size);return be.forEach(function(Mt,qt){Ue[++Ye]=[qt,Mt]}),Ue}function Ls(be,Ye){return function(Ue){return be(Ye(Ue))}}function Zr(be,Ye){for(var Ue=-1,Mt=be.length,qt=0,Mn=[];++Ue<Mt;){var gr=be[Ue];(gr===Ye||gr===B)&&(be[Ue]=B,Mn[qt++]=Ue)}return Mn}function ui(be){var Ye=-1,Ue=Array(be.size);return be.forEach(function(Mt){Ue[++Ye]=Mt}),Ue}function ja(be){return Ha(be)?function io(be){for(var Ye=go.lastIndex=0;go.test(be);)++Ye;return Ye}(be):Ln(be)}function yn(be){return Ha(be)?function Rs(be){return be.match(go)||[]}(be):function pr(be){return be.split("")}(be)}function gs(be){for(var Ye=be.length;Ye--&&Yr.test(be.charAt(Ye)););return Ye}var ro=xi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),za=function be(Ye){var a,Ue=(Ye=null==Ye?Be:za.defaults(Be.Object(),Ye,za.pick(Be,Io))).Array,Mt=Ye.Date,qt=Ye.Error,Mn=Ye.Function,gr=Ye.Math,Qn=Ye.Object,Ga=Ye.RegExp,ki=Ye.String,Dr=Ye.TypeError,Ns=Ue.prototype,fe=Qn.prototype,we=Ye["__core-js_shared__"],Ze=Mn.prototype.toString,Ce=fe.hasOwnProperty,rt=0,ut=(a=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",yt=fe.toString,wt=Ze.call(Qn),Ut=Be._,Vt=Ga("^"+Ze.call(Ce).replace(wo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=f?Ye.Buffer:m,nn=Ye.Symbol,Wn=Ye.Uint8Array,jt=Ht?Ht.allocUnsafe:m,mr=Ls(Qn.getPrototypeOf,Qn),Sr=Qn.create,bi=fe.propertyIsEnumerable,At=Ns.splice,_a=nn?nn.isConcatSpreadable:m,oo=nn?nn.iterator:m,Ar=nn?nn.toStringTag:m,Ju=function(){try{var a=na(Qn,"defineProperty");return a({},"",{}),a}catch(u){}}(),id=Ye.clearTimeout!==Be.clearTimeout&&Ye.clearTimeout,eh=Mt&&Mt.now!==Be.Date.now&&Mt.now,du=Ye.setTimeout!==Be.setTimeout&&Ye.setTimeout,Ds=gr.ceil,Zu=gr.floor,Gl=Qn.getOwnPropertySymbols,th=Ht?Ht.isBuffer:m,od=Ye.isFinite,nh=Ns.join,Ul=Ls(Qn.keys,Qn),zr=gr.max,Ci=gr.min,rh=Mt.now,ih=Ye.parseInt,ad=gr.random,oh=Ns.reverse,$l=na(Ye,"DataView"),fu=na(Ye,"Map"),Wl=na(Ye,"Promise"),Fs=na(Ye,"Set"),hu=na(Ye,"WeakMap"),pu=na(Qn,"create"),qu=hu&&new hu,Ua={},sd=ni($l),el=ni(fu),ud=ni(Wl),ld=ni(Fs),gu=ni(hu),Ao=nn?nn.prototype:m,mu=Ao?Ao.valueOf:m,cd=Ao?Ao.toString:m;function Z(a){if(Er(a)&&!hn(a)&&!(a instanceof An)){if(a instanceof vo)return a;if(Ce.call(a,"__wrapped__"))return qd(a)}return new vo(a)}var Bs=function(){function a(){}return function(u){if(!cr(u))return{};if(Sr)return Sr(u);a.prototype=u;var h=new a;return a.prototype=m,h}}();function tl(){}function vo(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=m}function An(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Kn,this.__views__=[]}function Vs(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function $a(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function xa(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function Wa(a){var u=-1,h=null==a?0:a.length;for(this.__data__=new xa;++u<h;)this.add(a[u])}function ko(a){var u=this.__data__=new $a(a);this.size=u.size}function gd(a,u){var h=hn(a),P=!h&&Pa(a),j=!h&&!P&&ns(a),te=!h&&!P&&!j&&Zs(a),he=h||P||j||te,_e=he?Rn(a.length,ki):[],Me=_e.length;for(var it in a)(u||Ce.call(a,it))&&(!he||!("length"==it||j&&("offset"==it||"parent"==it)||te&&("buffer"==it||"byteLength"==it||"byteOffset"==it)||ra(it,Me)))&&_e.push(it);return _e}function md(a){var u=a.length;return u?a[rc(0,u-1)]:m}function wh(a,u){return Us(ei(a),vs(u,0,a.length))}function Sh(a){return Us(ei(a))}function Yl(a,u,h){(h!==m&&!aa(a[u],h)||h===m&&!(u in a))&&Ko(a,u,h)}function vu(a,u,h){var P=a[u];(!Ce.call(a,u)||!aa(P,h)||h===m&&!(u in a))&&Ko(a,u,h)}function nl(a,u){for(var h=a.length;h--;)if(aa(a[h][0],u))return h;return-1}function Th(a,u,h,P){return Ka(a,function(j,te,he){u(P,j,h(j),he)}),P}function vd(a,u){return a&&Oo(u,Or(u),a)}function Ko(a,u,h){"__proto__"==u&&Ju?Ju(a,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[u]=h}function Xa(a,u){for(var h=-1,P=u.length,j=Ue(P),te=null==a;++h<P;)j[h]=te?m:Vc(a,u[h]);return j}function vs(a,u,h){return a==a&&(h!==m&&(a=a<=h?a:h),u!==m&&(a=a>=u?a:u)),a}function qr(a,u,h,P,j,te){var he,_e=1&u,Me=2&u,it=4&u;if(h&&(he=j?h(a,P,j,te):h(a)),he!==m)return he;if(!cr(a))return a;var ot=hn(a);if(ot){if(he=function yl(a){var u=a.length,h=new a.constructor(u);return u&&"string"==typeof a[0]&&Ce.call(a,"index")&&(h.index=a.index,h.input=a.input),h}(a),!_e)return ei(a,he)}else{var ft=di(a),St=ft==sr||ft==co;if(ns(a))return It(a,_e);if(ft==G||ft==$e||St&&!j){if(he=Me||St?{}:xc(a),!_e)return Me?function jh(a,u){return Oo(a,_c(a),u)}(a,function Xl(a,u){return a&&Oo(u,pi(u),a)}(he,a)):function fl(a,u){return Oo(a,ml(a),u)}(a,vd(he,a))}else{if(!zn[ft])return j?a:{};he=function Yd(a,u,h){var P=a.constructor;switch(u){case mn:return ba(a);case xt:case Ot:return new P(+a);case vr:return function Nd(a,u){var h=u?ba(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}(a,h);case fr:case eo:case Yn:case yr:case hr:case _r:case $r:case gi:case xr:return Si(a,h);case dn:return new P;case en:case Ct:return new P(a);case Ke:return function dl(a){var u=new a.constructor(a.source,Is.exec(a));return u.lastIndex=a.lastIndex,u}(a);case qe:return new P;case Bt:return function Hh(a){return mu?Qn(mu.call(a)):{}}(a)}}(a,ft,_e)}}te||(te=new ko);var Nt=te.get(a);if(Nt)return Nt;te.set(a,he),Mf(a)?a.forEach(function(Jt){he.add(qr(Jt,u,h,Jt,a,te))}):Pf(a)&&a.forEach(function(Jt,En){he.set(En,qr(Jt,u,h,En,a,te))});var gn=ot?m:(it?Me?gl:pl:Me?pi:Or)(a);return De(gn||a,function(Jt,En){gn&&(Jt=a[En=Jt]),vu(he,En,qr(Jt,u,h,En,a,te))}),he}function _d(a,u,h){var P=h.length;if(null==a)return!P;for(a=Qn(a);P--;){var j=h[P],he=a[j];if(he===m&&!(j in a)||!(0,u[j])(he))return!1}return!0}function xd(a,u,h){if("function"!=typeof a)throw new Dr(I);return Lu(function(){a.apply(m,h)},u)}function yu(a,u,h,P){var j=-1,te=kt,he=!0,_e=a.length,Me=[],it=u.length;if(!_e)return Me;h&&(u=an(u,si(h))),P?(te=ur,he=!1):u.length>=200&&(te=Wo,he=!1,u=new Wa(u));e:for(;++j<_e;){var ot=a[j],ft=null==h?ot:h(ot);if(ot=P||0!==ot?ot:0,he&&ft==ft){for(var St=it;St--;)if(u[St]===ft)continue e;Me.push(ot)}else te(u,ft,P)||Me.push(ot)}return Me}Z.templateSettings={escape:Rr,evaluate:vi,interpolate:yi,variable:"",imports:{_:Z}},(Z.prototype=tl.prototype).constructor=Z,(vo.prototype=Bs(tl.prototype)).constructor=vo,(An.prototype=Bs(tl.prototype)).constructor=An,Vs.prototype.clear=function hd(){this.__data__=pu?pu(null):{},this.size=0},Vs.prototype.delete=function ah(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},Vs.prototype.get=function sh(a){var u=this.__data__;if(pu){var h=u[a];return h===A?m:h}return Ce.call(u,a)?u[a]:m},Vs.prototype.has=function Gg(a){var u=this.__data__;return pu?u[a]!==m:Ce.call(u,a)},Vs.prototype.set=function pd(a,u){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=pu&&u===m?A:u,this},$a.prototype.clear=function Ug(){this.__data__=[],this.size=0},$a.prototype.delete=function uh(a){var u=this.__data__,h=nl(u,a);return!(h<0||(h==u.length-1?u.pop():At.call(u,h,1),--this.size,0))},$a.prototype.get=function lh(a){var u=this.__data__,h=nl(u,a);return h<0?m:u[h][1]},$a.prototype.has=function ch(a){return nl(this.__data__,a)>-1},$a.prototype.set=function dh(a,u){var h=this.__data__,P=nl(h,a);return P<0?(++this.size,h.push([a,u])):h[P][1]=u,this},xa.prototype.clear=function fh(){this.size=0,this.__data__={hash:new Vs,map:new(fu||$a),string:new Vs}},xa.prototype.delete=function hh(a){var u=Au(this,a).delete(a);return this.size-=u?1:0,u},xa.prototype.get=function ph(a){return Au(this,a).get(a)},xa.prototype.has=function gh(a){return Au(this,a).has(a)},xa.prototype.set=function mh(a,u){var h=Au(this,a),P=h.size;return h.set(a,u),this.size+=h.size==P?0:1,this},Wa.prototype.add=Wa.prototype.push=function vh(a){return this.__data__.set(a,A),this},Wa.prototype.has=function yh(a){return this.__data__.has(a)},ko.prototype.clear=function _h(){this.__data__=new $a,this.size=0},ko.prototype.delete=function xh(a){var u=this.__data__,h=u.delete(a);return this.size=u.size,h},ko.prototype.get=function bh(a){return this.__data__.get(a)},ko.prototype.has=function Ch(a){return this.__data__.has(a)},ko.prototype.set=function Ya(a,u){var h=this.__data__;if(h instanceof $a){var P=h.__data__;if(!fu||P.length<199)return P.push([a,u]),this.size=++h.size,this;h=this.__data__=new xa(P)}return h.set(a,u),this.size=h.size,this};var Ka=dc(Qo),bd=dc(Jl,!0);function rl(a,u){var h=!0;return Ka(a,function(P,j,te){return h=!!u(P,j,te)}),h}function il(a,u,h){for(var P=-1,j=a.length;++P<j;){var te=a[P],he=u(te);if(null!=he&&(_e===m?he==he&&!Pi(he):h(he,_e)))var _e=he,Me=te}return Me}function Kl(a,u){var h=[];return Ka(a,function(P,j,te){u(P,j,te)&&h.push(P)}),h}function Tr(a,u,h,P,j){var te=-1,he=a.length;for(h||(h=Kd),j||(j=[]);++te<he;){var _e=a[te];u>0&&h(_e)?u>1?Tr(_e,u-1,h,P,j):br(j,_e):P||(j[j.length]=_e)}return j}var Ql=fc(),Cd=fc(!0);function Qo(a,u){return a&&Ql(a,u,Or)}function Jl(a,u){return a&&Cd(a,u,Or)}function ol(a,u){return Gt(u,function(h){return Ji(a[h])})}function ys(a,u){for(var h=0,P=(u=ye(u,a)).length;null!=a&&h<P;)a=a[Sa(u[h++])];return h&&h==P?a:m}function wd(a,u,h){var P=u(a);return hn(a)?P:br(P,h(a))}function Oi(a){return null==a?a===m?"[object Undefined]":"[object Null]":Ar&&Ar in Qn(a)?function Ud(a){var u=Ce.call(a,Ar),h=a[Ar];try{a[Ar]=m;var P=!0}catch(te){}var j=yt.call(a);return P&&(u?a[Ar]=h:delete a[Ar]),j}(a):function bl(a){return yt.call(a)}(a)}function Zl(a,u){return a>u}function Eh(a,u){return null!=a&&Ce.call(a,u)}function Ih(a,u){return null!=a&&u in Qn(a)}function al(a,u,h){for(var P=h?ur:kt,j=a[0].length,te=a.length,he=te,_e=Ue(te),Me=1/0,it=[];he--;){var ot=a[he];he&&u&&(ot=an(ot,si(u))),Me=Ci(ot.length,Me),_e[he]=!h&&(u||j>=120&&ot.length>=120)?new Wa(he&&ot):m}ot=a[0];var ft=-1,St=_e[0];e:for(;++ft<j&&it.length<Me;){var Nt=ot[ft],Qt=u?u(Nt):Nt;if(Nt=h||0!==Nt?Nt:0,!(St?Wo(St,Qt):P(it,Qt,h))){for(he=te;--he;){var gn=_e[he];if(!(gn?Wo(gn,Qt):P(a[he],Qt,h)))continue e}St&&St.push(Qt),it.push(Nt)}}return it}function _u(a,u,h){var P=null==(a=bc(a,u=ye(u,a)))?a:a[Sa(Ri(u))];return null==P?m:He(P,a,h)}function Sd(a){return Er(a)&&Oi(a)==$e}function xu(a,u,h,P,j){return a===u||(null==a||null==u||!Er(a)&&!Er(u)?a!=a&&u!=u:function Oh(a,u,h,P,j,te){var he=hn(a),_e=hn(u),Me=he?Je:di(a),it=_e?Je:di(u),ot=(Me=Me==$e?G:Me)==G,ft=(it=it==$e?G:it)==G,St=Me==it;if(St&&ns(a)){if(!ns(u))return!1;he=!0,ot=!1}if(St&&!ot)return te||(te=new ko),he||Zs(a)?vc(a,u,h,P,j,te):function bs(a,u,h,P,j,te,he){switch(h){case vr:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case mn:return!(a.byteLength!=u.byteLength||!te(new Wn(a),new Wn(u)));case xt:case Ot:case en:return aa(+a,+u);case Fn:return a.name==u.name&&a.message==u.message;case Ke:case Ct:return a==u+"";case dn:var _e=lu;case qe:if(_e||(_e=ui),a.size!=u.size&&!(1&P))return!1;var it=he.get(a);if(it)return it==u;P|=2,he.set(a,u);var ot=vc(_e(a),_e(u),P,j,te,he);return he.delete(a),ot;case Bt:if(mu)return mu.call(a)==mu.call(u)}return!1}(a,u,Me,h,P,j,te);if(!(1&h)){var Nt=ot&&Ce.call(a,"__wrapped__"),Qt=ft&&Ce.call(u,"__wrapped__");if(Nt||Qt){var gn=Nt?a.value():a,Jt=Qt?u.value():u;return te||(te=new ko),j(gn,Jt,h,P,te)}}return!!St&&(te||(te=new ko),function yc(a,u,h,P,j,te){var he=1&h,_e=pl(a),Me=_e.length;if(Me!=pl(u).length&&!he)return!1;for(var ft=Me;ft--;){var St=_e[ft];if(!(he?St in u:Ce.call(u,St)))return!1}var Nt=te.get(a),Qt=te.get(u);if(Nt&&Qt)return Nt==u&&Qt==a;var gn=!0;te.set(a,u),te.set(u,a);for(var Jt=he;++ft<Me;){var En=a[St=_e[ft]],Dn=u[St];if(P)var uo=he?P(Dn,En,St,u,a,te):P(En,Dn,St,a,u,te);if(!(uo===m?En===Dn||j(En,Dn,h,P,te):uo)){gn=!1;break}Jt||(Jt="constructor"==St)}if(gn&&!Jt){var Bi=a.constructor,lo=u.constructor;Bi!=lo&&"constructor"in a&&"constructor"in u&&!("function"==typeof Bi&&Bi instanceof Bi&&"function"==typeof lo&&lo instanceof lo)&&(gn=!1)}return te.delete(a),te.delete(u),gn}(a,u,h,P,j,te))}(a,u,h,P,xu,j))}function ql(a,u,h,P){var j=h.length,te=j,he=!P;if(null==a)return!te;for(a=Qn(a);j--;){var _e=h[j];if(he&&_e[2]?_e[1]!==a[_e[0]]:!(_e[0]in a))return!1}for(;++j<te;){var Me=(_e=h[j])[0],it=a[Me],ot=_e[1];if(he&&_e[2]){if(it===m&&!(Me in a))return!1}else{var ft=new ko;if(P)var St=P(it,ot,Me,a,u,ft);if(!(St===m?xu(ot,it,3,P,ft):St))return!1}}return!0}function Td(a){return!(!cr(a)||function Za(a){return!!ut&&ut in a}(a))&&(Ji(a)?Vt:ru).test(ni(a))}function Ed(a){return"function"==typeof a?a:null==a?Zi:"object"==typeof a?hn(a)?Ad(a[0],a[1]):Md(a):Kf(a)}function ec(a){if(!_l(a))return Ul(a);var u=[];for(var h in Qn(a))Ce.call(a,h)&&"constructor"!=h&&u.push(h);return u}function bu(a,u){return a<u}function Pd(a,u){var h=-1,P=Qi(a)?Ue(a.length):[];return Ka(a,function(j,te,he){P[++h]=u(j,te,he)}),P}function Md(a){var u=ku(a);return 1==u.length&&u[0][2]?ao(u[0][0],u[0][1]):function(h){return h===a||ql(h,a,u)}}function Ad(a,u){return Ou(a)&&et(u)?ao(Sa(a),u):function(h){var P=Vc(h,a);return P===m&&P===u?Nl(h,a):xu(u,P,3)}}function Cu(a,u,h,P,j){a!==u&&Ql(u,function(te,he){if(j||(j=new ko),cr(te))!function kd(a,u,h,P,j,te,he){var _e=Cl(a,h),Me=Cl(u,h),it=he.get(Me);if(it)Yl(a,h,it);else{var ot=te?te(_e,Me,h+"",a,u,he):m,ft=ot===m;if(ft){var St=hn(Me),Nt=!St&&ns(Me),Qt=!St&&!Nt&&Zs(Me);ot=Me,St||Nt||Qt?hn(_e)?ot=_e:kr(_e)?ot=ei(_e):Nt?(ft=!1,ot=It(Me,!0)):Qt?(ft=!1,ot=Si(Me,!0)):ot=[]:Js(Me)||Pa(Me)?(ot=_e,Pa(_e)?ot=Ll(_e):(!cr(_e)||Ji(_e))&&(ot=xc(Me))):ft=!1}ft&&(he.set(Me,ot),j(ot,Me,P,te,he),he.delete(Me)),Yl(a,h,ot)}}(a,u,he,h,Cu,P,j);else{var _e=P?P(Cl(a,he),te,he+"",a,u,j):m;_e===m&&(_e=te),Yl(a,he,_e)}},pi)}function tc(a,u){var h=a.length;if(h)return ra(u+=u<0?h:0,h)?a[u]:m}function Od(a,u,h){u=u.length?an(u,function(te){return hn(te)?function(he){return ys(he,1===te.length?te[0]:te)}:te}):[Zi];var P=-1;return u=an(u,si(Wt())),function ya(be,Ye){var Ue=be.length;for(be.sort(Ye);Ue--;)be[Ue]=be[Ue].value;return be}(Pd(a,function(te,he,_e){return{criteria:an(u,function(it){return it(te)}),index:++P,value:te}}),function(te,he){return function Fd(a,u,h){for(var P=-1,j=a.criteria,te=u.criteria,he=j.length,_e=h.length;++P<he;){var Me=Dd(j[P],te[P]);if(Me)return P>=_e?Me:Me*("desc"==h[P]?-1:1)}return a.index-u.index}(te,he,h)})}function Ld(a,u,h){for(var P=-1,j=u.length,te={};++P<j;){var he=u[P],_e=ys(a,he);h(_e,he)&&Qa(te,ye(he,a),_e)}return te}function nc(a,u,h,P){var j=P?va:Wi,te=-1,he=u.length,_e=a;for(a===u&&(u=ei(u)),h&&(_e=an(a,si(h)));++te<he;)for(var Me=0,it=u[te],ot=h?h(it):it;(Me=j(_e,ot,Me,P))>-1;)_e!==a&&At.call(_e,Me,1),At.call(a,Me,1);return a}function Rd(a,u){for(var h=a?u.length:0,P=h-1;h--;){var j=u[h];if(h==P||j!==te){var te=j;ra(j)?At.call(a,j,1):Tu(a,j)}}return a}function rc(a,u){return a+Zu(ad()*(u-a+1))}function sl(a,u){var h="";if(!a||u<1||u>Zt)return h;do{u%2&&(h+=a),(u=Zu(u/2))&&(a+=a)}while(u);return h}function _n(a,u){return ws(Gs(a,u,Zi),a+"")}function Jo(a){return md(qs(a))}function _s(a,u){var h=qs(a);return Us(h,vs(u,0,h.length))}function Qa(a,u,h,P){if(!cr(a))return a;for(var j=-1,te=(u=ye(u,a)).length,he=te-1,_e=a;null!=_e&&++j<te;){var Me=Sa(u[j]),it=h;if("__proto__"===Me||"constructor"===Me||"prototype"===Me)return a;if(j!=he){var ot=_e[Me];(it=P?P(ot,Me,_e):m)===m&&(it=cr(ot)?ot:ra(u[j+1])?[]:{})}vu(_e,Me,it),_e=_e[Me]}return a}var Li=qu?function(a,u){return qu.set(a,u),a}:Zi,ic=Ju?function(a,u){return Ju(a,"toString",{configurable:!0,enumerable:!1,value:$c(u),writable:!0})}:Zi;function ul(a){return Us(qs(a))}function Yi(a,u,h){var P=-1,j=a.length;u<0&&(u=-u>j?0:j+u),(h=h>j?j:h)<0&&(h+=j),j=u>h?0:h-u>>>0,u>>>=0;for(var te=Ue(j);++P<j;)te[P]=a[P+u];return te}function Vh(a,u){var h;return Ka(a,function(P,j,te){return!(h=u(P,j,te))}),!!h}function wu(a,u,h){var P=0,j=null==a?P:a.length;if("number"==typeof u&&u==u&&j<=2147483647){for(;P<j;){var te=P+j>>>1,he=a[te];null!==he&&!Pi(he)&&(h?he<=u:he<u)?P=te+1:j=te}return j}return Su(a,u,Zi,h)}function Su(a,u,h,P){var j=0,te=null==a?0:a.length;if(0===te)return 0;for(var he=(u=h(u))!=u,_e=null===u,Me=Pi(u),it=u===m;j<te;){var ot=Zu((j+te)/2),ft=h(a[ot]),St=ft!==m,Nt=null===ft,Qt=ft==ft,gn=Pi(ft);if(he)var Jt=P||Qt;else Jt=it?Qt&&(P||St):_e?Qt&&St&&(P||!Nt):Me?Qt&&St&&!Nt&&(P||!gn):!Nt&&!gn&&(P?ft<=u:ft<u);Jt?j=ot+1:te=ot}return Ci(te,4294967294)}function oc(a,u){for(var h=-1,P=a.length,j=0,te=[];++h<P;){var he=a[h],_e=u?u(he):he;if(!h||!aa(_e,Me)){var Me=_e;te[j++]=0===he?0:he}}return te}function fn(a){return"number"==typeof a?a:Pi(a)?NaN:+a}function wi(a){if("string"==typeof a)return a;if(hn(a))return an(a,wi)+"";if(Pi(a))return cd?cd.call(a):"";var u=a+"";return"0"==u&&1/a==-gt?"-0":u}function Zo(a,u,h){var P=-1,j=kt,te=a.length,he=!0,_e=[],Me=_e;if(h)he=!1,j=ur;else if(te>=200){var it=u?null:mc(a);if(it)return ui(it);he=!1,j=Wo,Me=new Wa}else Me=u?[]:_e;e:for(;++P<te;){var ot=a[P],ft=u?u(ot):ot;if(ot=h||0!==ot?ot:0,he&&ft==ft){for(var St=Me.length;St--;)if(Me[St]===ft)continue e;u&&Me.push(ft),_e.push(ot)}else j(Me,ft,h)||(Me!==_e&&Me.push(ft),_e.push(ot))}return _e}function Tu(a,u){return null==(a=bc(a,u=ye(u,a)))||delete a[Sa(Ri(u))]}function ac(a,u,h,P){return Qa(a,u,h(ys(a,u)),P)}function Eu(a,u,h,P){for(var j=a.length,te=P?j:-1;(P?te--:++te<j)&&u(a[te],te,a););return h?Yi(a,P?0:te,P?te+1:j):Yi(a,P?te+1:0,P?j:te)}function sc(a,u){var h=a;return h instanceof An&&(h=h.value()),$n(u,function(P,j){return j.func.apply(j.thisArg,br([P],j.args))},h)}function uc(a,u,h){var P=a.length;if(P<2)return P?Zo(a[0]):[];for(var j=-1,te=Ue(P);++j<P;)for(var he=a[j],_e=-1;++_e<P;)_e!=j&&(te[j]=yu(te[j]||he,a[_e],u,h));return Zo(Tr(te,1),u,h)}function lc(a,u,h){for(var P=-1,j=a.length,te=u.length,he={};++P<j;)h(he,a[P],P<te?u[P]:m);return he}function cc(a){return kr(a)?a:[]}function ll(a){return"function"==typeof a?a:Zi}function ye(a,u){return hn(a)?a:Ou(a,u)?[a]:wl(Xn(a))}var Iu=_n;function qo(a,u,h){var P=a.length;return h=h===m?P:h,!u&&h>=P?a:Yi(a,u,h)}var cl=id||function(a){return Be.clearTimeout(a)};function It(a,u){if(u)return a.slice();var h=a.length,P=jt?jt(h):new a.constructor(h);return a.copy(P),P}function ba(a){var u=new a.constructor(a.byteLength);return new Wn(u).set(new Wn(a)),u}function Si(a,u){var h=u?ba(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function Dd(a,u){if(a!==u){var h=a!==m,P=null===a,j=a==a,te=Pi(a),he=u!==m,_e=null===u,Me=u==u,it=Pi(u);if(!_e&&!it&&!te&&a>u||te&&he&&Me&&!_e&&!it||P&&he&&Me||!h&&Me||!j)return 1;if(!P&&!te&&!it&&a<u||it&&h&&j&&!P&&!te||_e&&h&&j||!he&&j||!Me)return-1}return 0}function Bd(a,u,h,P){for(var j=-1,te=a.length,he=h.length,_e=-1,Me=u.length,it=zr(te-he,0),ot=Ue(Me+it),ft=!P;++_e<Me;)ot[_e]=u[_e];for(;++j<he;)(ft||j<te)&&(ot[h[j]]=a[j]);for(;it--;)ot[_e++]=a[j++];return ot}function Vd(a,u,h,P){for(var j=-1,te=a.length,he=-1,_e=h.length,Me=-1,it=u.length,ot=zr(te-_e,0),ft=Ue(ot+it),St=!P;++j<ot;)ft[j]=a[j];for(var Nt=j;++Me<it;)ft[Nt+Me]=u[Me];for(;++he<_e;)(St||j<te)&&(ft[Nt+h[he]]=a[j++]);return ft}function ei(a,u){var h=-1,P=a.length;for(u||(u=Ue(P));++h<P;)u[h]=a[h];return u}function Oo(a,u,h,P){var j=!h;h||(h={});for(var te=-1,he=u.length;++te<he;){var _e=u[te],Me=P?P(h[_e],a[_e],_e,h,a):m;Me===m&&(Me=a[_e]),j?Ko(h,_e,Me):vu(h,_e,Me)}return h}function bt(a,u){return function(h,P){var j=hn(h)?lt:Th,te=u?u():{};return j(h,a,Wt(P,2),te)}}function Hs(a){return _n(function(u,h){var P=-1,j=h.length,te=j>1?h[j-1]:m,he=j>2?h[2]:m;for(te=a.length>3&&"function"==typeof te?(j--,te):m,he&&ti(h[0],h[1],he)&&(te=j<3?m:te,j=1),u=Qn(u);++P<j;){var _e=h[P];_e&&a(u,_e,P,te)}return u})}function dc(a,u){return function(h,P){if(null==h)return h;if(!Qi(h))return a(h,P);for(var j=h.length,te=u?j:-1,he=Qn(h);(u?te--:++te<j)&&!1!==P(he[te],te,he););return h}}function fc(a){return function(u,h,P){for(var j=-1,te=Qn(u),he=P(u),_e=he.length;_e--;){var Me=he[a?_e:++j];if(!1===h(te[Me],Me,te))break}return u}}function rr(a){return function(u){var h=Ha(u=Xn(u))?yn(u):m,P=h?h[0]:u.charAt(0),j=h?qo(h,1).join(""):u.slice(1);return P[a]()+j}}function Ca(a){return function(u){return $n(Xu(Gc(u).replace(ga,"")),a,"")}}function Pu(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=Bs(a.prototype),P=a.apply(h,u);return cr(P)?P:h}}function hc(a){return function(u,h,P){var j=Qn(u);if(!Qi(u)){var te=Wt(h,3);u=Or(u),h=function(_e){return te(j[_e],_e,j)}}var he=a(u,h,P);return he>-1?j[te?u[he]:he]:m}}function hl(a){return ta(function(u){var h=u.length,P=h,j=vo.prototype.thru;for(a&&u.reverse();P--;){var te=u[P];if("function"!=typeof te)throw new Dr(I);if(j&&!he&&"wrapper"==Cs(te))var he=new vo([],!0)}for(P=he?P:h;++P<h;){var _e=Cs(te=u[P]),Me="wrapper"==_e?Mu(te):m;he=Me&&zs(Me[0])&&424==Me[1]&&!Me[4].length&&1==Me[9]?he[Cs(Me[0])].apply(he,Me[3]):1==te.length&&zs(te)?he[_e]():he.thru(te)}return function(){var it=arguments,ot=it[0];if(he&&1==it.length&&hn(ot))return he.plant(ot).value();for(var ft=0,St=h?u[ft].apply(this,it):ot;++ft<h;)St=u[ft].call(this,St);return St}})}function Nn(a,u,h,P,j,te,he,_e,Me,it){var ot=u&b,ft=1&u,St=2&u,Nt=24&u,Qt=512&u,gn=St?m:Pu(a);return function Jt(){for(var En=arguments.length,Dn=Ue(En),uo=En;uo--;)Dn[uo]=arguments[uo];if(Nt)var Bi=Ja(Jt),lo=Hl(Dn,Bi);if(P&&(Dn=Bd(Dn,P,j,Nt)),te&&(Dn=Vd(Dn,te,he,Nt)),En-=lo,Nt&&En<it){var Lr=Zr(Dn,Bi);return gc(a,u,Nn,Jt.placeholder,h,Dn,Lr,_e,Me,it-En)}var Fo=ft?h:this,Aa=St?Fo[a]:a;return En=Dn.length,_e?Dn=Qd(Dn,_e):Qt&&En>1&&Dn.reverse(),ot&&Me<En&&(Dn.length=Me),this&&this!==Be&&this instanceof Jt&&(Aa=gn||Pu(Aa)),Aa.apply(Fo,Dn)}}function js(a,u){return function(h,P){return function Mh(a,u,h,P){return Qo(a,function(j,te,he){u(P,h(j),te,he)}),P}(h,a,u(P),{})}}function Lt(a,u){return function(h,P){var j;if(h===m&&P===m)return u;if(h!==m&&(j=h),P!==m){if(j===m)return P;"string"==typeof h||"string"==typeof P?(h=wi(h),P=wi(P)):(h=fn(h),P=fn(P)),j=a(h,P)}return j}}function yo(a){return ta(function(u){return u=an(u,si(Wt())),_n(function(h){var P=this;return a(u,function(j){return He(j,P,h)})})})}function ea(a,u){var h=(u=u===m?" ":wi(u)).length;if(h<2)return h?sl(u,a):u;var P=sl(u,Ds(a/ja(u)));return Ha(u)?qo(yn(P),0,a).join(""):P.slice(0,a)}function pc(a){return function(u,h,P){return P&&"number"!=typeof P&&ti(u,h,P)&&(h=P=m),u=sa(u),h===m?(h=u,u=0):h=sa(h),function Bh(a,u,h,P){for(var j=-1,te=zr(Ds((u-a)/(h||1)),0),he=Ue(te);te--;)he[P?te:++j]=a,a+=h;return he}(u,h,P=P===m?u<h?1:-1:sa(P),a)}}function Ti(a){return function(u,h){return"string"==typeof u&&"string"==typeof h||(u=Co(u),h=Co(h)),a(u,h)}}function gc(a,u,h,P,j,te,he,_e,Me,it){var ot=8&u;u|=ot?32:64,4&(u&=~(ot?64:32))||(u&=-4);var gn=[a,u,j,ot?te:m,ot?he:m,ot?m:te,ot?m:he,_e,Me,it],Jt=h.apply(m,gn);return zs(a)&&Jd(Jt,gn),Jt.placeholder=P,Zd(Jt,a,u)}function wa(a){var u=gr[a];return function(h,P){if(h=Co(h),(P=null==P?0:Ci(pn(P),292))&&od(h)){var j=(Xn(h)+"e").split("e");return+((j=(Xn(u(j[0]+"e"+(+j[1]+P)))+"e").split("e"))[0]+"e"+(+j[1]-P))}return u(h)}}var mc=Fs&&1/ui(new Fs([,-0]))[1]==gt?function(a){return new Fs(a)}:Qc;function xs(a){return function(u){var h=di(u);return h==dn?lu(u):h==qe?function cu(be){var Ye=-1,Ue=Array(be.size);return be.forEach(function(Mt){Ue[++Ye]=[Mt,Mt]}),Ue}(u):function $o(be,Ye){return an(Ye,function(Ue){return[Ue,be[Ue]]})}(u,a(u))}}function Lo(a,u,h,P,j,te,he,_e){var Me=2&u;if(!Me&&"function"!=typeof a)throw new Dr(I);var it=P?P.length:0;if(it||(u&=-97,P=j=m),he=he===m?he:zr(pn(he),0),_e=_e===m?_e:pn(_e),it-=j?j.length:0,64&u){var ot=P,ft=j;P=j=m}var St=Me?m:Mu(a),Nt=[a,u,h,P,j,ot,ft,te,he,_e];if(St&&function Uh(a,u){var h=a[1],P=u[1],j=h|P;if(!(j<131||(P==b&&8==h||P==b&&256==h&&a[7].length<=u[8]||384==P&&u[7].length<=u[8]&&8==h)))return a;1&P&&(a[2]=u[2],j|=1&h?0:4);var _e=u[3];if(_e){var Me=a[3];a[3]=Me?Bd(Me,_e,u[4]):_e,a[4]=Me?Zr(a[3],B):u[4]}(_e=u[5])&&(a[5]=(Me=a[5])?Vd(Me,_e,u[6]):_e,a[6]=Me?Zr(a[5],B):u[6]),(_e=u[7])&&(a[7]=_e),P&b&&(a[8]=null==a[8]?u[8]:Ci(a[8],u[8])),null==a[9]&&(a[9]=u[9]),a[0]=u[0],a[1]=j}(Nt,St),a=Nt[0],u=Nt[1],h=Nt[2],P=Nt[3],j=Nt[4],!(_e=Nt[9]=Nt[9]===m?Me?0:a.length:zr(Nt[9]-it,0))&&24&u&&(u&=-25),u&&1!=u)Qt=8==u||16==u?function jd(a,u,h){var P=Pu(a);return function j(){for(var te=arguments.length,he=Ue(te),_e=te,Me=Ja(j);_e--;)he[_e]=arguments[_e];var it=te<3&&he[0]!==Me&&he[te-1]!==Me?[]:Zr(he,Me);return(te-=it.length)<h?gc(a,u,Nn,j.placeholder,m,he,it,m,m,h-te):He(this&&this!==Be&&this instanceof j?P:a,this,he)}}(a,u,_e):32!=u&&33!=u||j.length?Nn.apply(m,Nt):function ci(a,u,h,P){var j=1&u,te=Pu(a);return function he(){for(var _e=-1,Me=arguments.length,it=-1,ot=P.length,ft=Ue(ot+Me),St=this&&this!==Be&&this instanceof he?te:a;++it<ot;)ft[it]=P[it];for(;Me--;)ft[it++]=arguments[++_e];return He(St,j?h:this,ft)}}(a,u,h,P);else var Qt=function Hd(a,u,h){var P=1&u,j=Pu(a);return function te(){return(this&&this!==Be&&this instanceof te?j:a).apply(P?h:this,arguments)}}(a,u,h);return Zd((St?Li:Jd)(Qt,Nt),a,u)}function zd(a,u,h,P){return a===m||aa(a,fe[h])&&!Ce.call(P,h)?u:a}function Gd(a,u,h,P,j,te){return cr(a)&&cr(u)&&(te.set(u,a),Cu(a,u,m,Gd,te),te.delete(u)),a}function Xi(a){return Js(a)?m:a}function vc(a,u,h,P,j,te){var he=1&h,_e=a.length,Me=u.length;if(_e!=Me&&!(he&&Me>_e))return!1;var it=te.get(a),ot=te.get(u);if(it&&ot)return it==u&&ot==a;var ft=-1,St=!0,Nt=2&h?new Wa:m;for(te.set(a,u),te.set(u,a);++ft<_e;){var Qt=a[ft],gn=u[ft];if(P)var Jt=he?P(gn,Qt,ft,u,a,te):P(Qt,gn,ft,a,u,te);if(Jt!==m){if(Jt)continue;St=!1;break}if(Nt){if(!Kr(u,function(En,Dn){if(!Wo(Nt,Dn)&&(Qt===En||j(Qt,En,h,P,te)))return Nt.push(Dn)})){St=!1;break}}else if(Qt!==gn&&!j(Qt,gn,h,P,te)){St=!1;break}}return te.delete(a),te.delete(u),St}function ta(a){return ws(Gs(a,m,Ii),a+"")}function pl(a){return wd(a,Or,ml)}function gl(a){return wd(a,pi,_c)}var Mu=qu?function(a){return qu.get(a)}:Qc;function Cs(a){for(var u=a.name+"",h=Ua[u],P=Ce.call(Ua,u)?h.length:0;P--;){var j=h[P],te=j.func;if(null==te||te==a)return j.name}return u}function Ja(a){return(Ce.call(Z,"placeholder")?Z:a).placeholder}function Wt(){var a=Z.iteratee||Xc;return a=a===Xc?Ed:a,arguments.length?a(arguments[0],arguments[1]):a}function Au(a,u){var h=a.__data__;return function zh(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?h["string"==typeof u?"string":"hash"]:h.map}function ku(a){for(var u=Or(a),h=u.length;h--;){var P=u[h],j=a[P];u[h]=[P,j,et(j)]}return u}function na(a,u){var h=function jl(be,Ye){return null==be?m:be[Ye]}(a,u);return Td(h)?h:m}var ml=Gl?function(a){return null==a?[]:(a=Qn(a),Gt(Gl(a),function(u){return bi.call(a,u)}))}:Jc,_c=Gl?function(a){for(var u=[];a;)br(u,ml(a)),a=mr(a);return u}:Jc,di=Oi;function vl(a,u,h){for(var P=-1,j=(u=ye(u,a)).length,te=!1;++P<j;){var he=Sa(u[P]);if(!(te=null!=a&&h(a,he)))break;a=a[he]}return te||++P!=j?te:!!(j=null==a?0:a.length)&&wn(j)&&ra(he,j)&&(hn(a)||Pa(a))}function xc(a){return"function"!=typeof a.constructor||_l(a)?{}:Bs(mr(a))}function Kd(a){return hn(a)||Pa(a)||!!(_a&&a&&a[_a])}function ra(a,u){var h=typeof a;return!!(u=null==u?Zt:u)&&("number"==h||"symbol"!=h&&Ps.test(a))&&a>-1&&a%1==0&&a<u}function ti(a,u,h){if(!cr(h))return!1;var P=typeof u;return!!("number"==P?Qi(h)&&ra(u,h.length):"string"==P&&u in h)&&aa(h[u],a)}function Ou(a,u){if(hn(a))return!1;var h=typeof a;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=a&&!Pi(a))||Wr.test(a)||!to.test(a)||null!=u&&a in Qn(u)}function zs(a){var u=Cs(a),h=Z[u];if("function"!=typeof h||!(u in An.prototype))return!1;if(a===h)return!0;var P=Mu(h);return!!P&&a===P[0]}($l&&di(new $l(new ArrayBuffer(1)))!=vr||fu&&di(new fu)!=dn||Wl&&di(Wl.resolve())!=re||Fs&&di(new Fs)!=qe||hu&&di(new hu)!=bn)&&(di=function(a){var u=Oi(a),h=u==G?a.constructor:m,P=h?ni(h):"";if(P)switch(P){case sd:return vr;case el:return dn;case ud:return re;case ld:return qe;case gu:return bn}return u});var Gh=we?Ji:Zc;function _l(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||fe)}function et(a){return a==a&&!cr(a)}function ao(a,u){return function(h){return null!=h&&h[a]===u&&(u!==m||a in Qn(h))}}function Gs(a,u,h){return u=zr(u===m?a.length-1:u,0),function(){for(var P=arguments,j=-1,te=zr(P.length-u,0),he=Ue(te);++j<te;)he[j]=P[u+j];j=-1;for(var _e=Ue(u+1);++j<u;)_e[j]=P[j];return _e[u]=h(he),He(a,this,_e)}}function bc(a,u){return u.length<2?a:ys(a,Yi(u,0,-1))}function Qd(a,u){for(var h=a.length,P=Ci(u.length,h),j=ei(a);P--;){var te=u[P];a[P]=ra(te,h)?j[te]:m}return a}function Cl(a,u){if(("constructor"!==u||"function"!=typeof a[u])&&"__proto__"!=u)return a[u]}var Jd=Ei(Li),Lu=du||function(a,u){return Be.setTimeout(a,u)},ws=Ei(ic);function Zd(a,u,h){var P=u+"";return ws(a,function Xd(a,u){var h=u.length;if(!h)return a;var P=h-1;return u[P]=(h>1?"& ":"")+u[P],u=u.join(h>2?", ":" "),a.replace(as,"{\n/* [wrapped with "+u+"] */\n")}(P,function $h(a,u){return De(Un,function(h){var P="_."+h[0];u&h[1]&&!kt(a,P)&&a.push(P)}),a.sort()}(function Wd(a){var u=a.match(ss);return u?u[1].split(ji):[]}(P),h)))}function Ei(a){var u=0,h=0;return function(){var P=rh(),j=16-(P-h);if(h=P,j>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(m,arguments)}}function Us(a,u){var h=-1,P=a.length,j=P-1;for(u=u===m?P:u;++h<u;){var te=rc(h,j),he=a[te];a[te]=a[h],a[h]=he}return a.length=u,a}var wl=function Ro(a){var u=Bu(a,function(P){return 500===h.size&&h.clear(),P}),h=u.cache;return u}(function(a){var u=[];return 46===a.charCodeAt(0)&&u.push(""),a.replace(wr,function(h,P,j,te){u.push(j?te.replace(ls,"$1"):P||h)}),u});function Sa(a){if("string"==typeof a||Pi(a))return a;var u=a+"";return"0"==u&&1/a==-gt?"-0":u}function ni(a){if(null!=a){try{return Ze.call(a)}catch(u){}try{return a+""}catch(u){}}return""}function qd(a){if(a instanceof An)return a.clone();var u=new vo(a.__wrapped__,a.__chain__);return u.__actions__=ei(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}var Yh=_n(function(a,u){return kr(a)?yu(a,Tr(u,1,kr,!0)):[]}),Yg=_n(function(a,u){var h=Ri(u);return kr(h)&&(h=m),kr(a)?yu(a,Tr(u,1,kr,!0),Wt(h,2)):[]}),Xg=_n(function(a,u){var h=Ri(u);return kr(h)&&(h=m),kr(a)?yu(a,Tr(u,1,kr,!0),m,h):[]});function tf(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:pn(h);return j<0&&(j=zr(P+j,0)),Qr(a,Wt(u,3),j)}function Qh(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=P-1;return h!==m&&(j=pn(h),j=h<0?zr(P+j,0):Ci(j,P-1)),Qr(a,Wt(u,3),j,!0)}function Ii(a){return null!=a&&a.length?Tr(a,1):[]}function Jh(a){return a&&a.length?a[0]:m}var _o=_n(function(a){var u=an(a,cc);return u.length&&u[0]===a[0]?al(u):[]}),Cc=_n(function(a){var u=Ri(a),h=an(a,cc);return u===Ri(h)?u=m:h.pop(),h.length&&h[0]===a[0]?al(h,Wt(u,2)):[]}),No=_n(function(a){var u=Ri(a),h=an(a,cc);return(u="function"==typeof u?u:m)&&h.pop(),h.length&&h[0]===a[0]?al(h,m,u):[]});function Ri(a){var u=null==a?0:a.length;return u?a[u-1]:m}var qa=_n(Ws);function Ws(a,u){return a&&a.length&&u&&u.length?nc(a,u):a}var Tn=ta(function(a,u){var h=null==a?0:a.length,P=Xa(a,u);return Rd(a,an(u,function(j){return ra(j,h)?+j:j}).sort(Dd)),P});function wc(a){return null==a?a:oh.call(a)}var fi=_n(function(a){return Zo(Tr(a,1,kr,!0))}),np=_n(function(a){var u=Ri(a);return kr(u)&&(u=m),Zo(Tr(a,1,kr,!0),Wt(u,2))}),Cr=_n(function(a){var u=Ri(a);return u="function"==typeof u?u:m,Zo(Tr(a,1,kr,!0),m,u)});function ii(a){if(!a||!a.length)return[];var u=0;return a=Gt(a,function(h){if(kr(h))return u=zr(h.length,u),!0}),Rn(u,function(h){return an(a,Jr(h))})}function Tc(a,u){if(!a||!a.length)return[];var h=ii(a);return null==u?h:an(h,function(P){return He(u,m,P)})}var Ea=_n(function(a,u){return kr(a)?yu(a,u):[]}),rp=_n(function(a){return uc(Gt(a,kr))}),af=_n(function(a){var u=Ri(a);return kr(u)&&(u=m),uc(Gt(a,kr),Wt(u,2))}),ip=_n(function(a){var u=Ri(a);return u="function"==typeof u?u:m,uc(Gt(a,kr),m,u)}),sf=_n(ii),ap=_n(function(a){var u=a.length,h=u>1?a[u-1]:m;return h="function"==typeof h?(a.pop(),h):m,Tc(a,h)});function Sl(a){var u=Z(a);return u.__chain__=!0,u}function Ru(a,u){return u(a)}var Ec=ta(function(a){var u=a.length,h=u?a[0]:0,P=this.__wrapped__,j=function(te){return Xa(te,a)};return!(u>1||this.__actions__.length)&&P instanceof An&&ra(h)?((P=P.slice(h,+h+(u?1:0))).__actions__.push({func:Ru,args:[j],thisArg:m}),new vo(P,this.__chain__).thru(function(te){return u&&!te.length&&te.push(m),te})):this.thru(j)}),pf=bt(function(a,u,h){Ce.call(a,h)?++a[h]:Ko(a,h,1)}),Ic=hc(tf),gf=hc(Qh);function Ss(a,u){return(hn(a)?De:Ka)(a,Wt(u,3))}function Pc(a,u){return(hn(a)?Qe:bd)(a,Wt(u,3))}var Du=bt(function(a,u,h){Ce.call(a,h)?a[h].push(u):Ko(a,h,[u])}),Mc=_n(function(a,u,h){var P=-1,j="function"==typeof u,te=Qi(a)?Ue(a.length):[];return Ka(a,function(he){te[++P]=j?He(u,he,h):_u(he,u,h)}),te}),sp=bt(function(a,u,h){Ko(a,h,u)});function Il(a,u){return(hn(a)?an:Pd)(a,Wt(u,3))}var lp=bt(function(a,u,h){a[h?0:1].push(u)},function(){return[[],[]]}),xf=_n(function(a,u){if(null==a)return[];var h=u.length;return h>1&&ti(a,u[0],u[1])?u=[]:h>2&&ti(u[0],u[1],u[2])&&(u=[u[0]]),Od(a,Tr(u,1),[])}),Fu=eh||function(){return Be.Date.now()};function bf(a,u,h){return u=h?m:u,Lo(a,b,m,m,m,m,u=a&&null==u?a.length:u)}function Cf(a,u){var h;if("function"!=typeof u)throw new Dr(I);return a=pn(a),function(){return--a>0&&(h=u.apply(this,arguments)),a<=1&&(u=m),h}}var Ac=_n(function(a,u,h){var P=1;if(h.length){var j=Zr(h,Ja(Ac));P|=32}return Lo(a,P,u,h,j)}),wf=_n(function(a,u,h){var P=3;if(h.length){var j=Zr(h,Ja(wf));P|=32}return Lo(u,P,a,h,j)});function Ef(a,u,h){var P,j,te,he,_e,Me,it=0,ot=!1,ft=!1,St=!0;if("function"!=typeof a)throw new Dr(I);function Nt(Lr){var Fo=P,Aa=j;return P=j=m,it=Lr,he=a.apply(Aa,Fo)}function Qt(Lr){return it=Lr,_e=Lu(En,u),ot?Nt(Lr):he}function Jt(Lr){var Fo=Lr-Me;return Me===m||Fo>=u||Fo<0||ft&&Lr-it>=te}function En(){var Lr=Fu();if(Jt(Lr))return Dn(Lr);_e=Lu(En,function gn(Lr){var qf=u-(Lr-Me);return ft?Ci(qf,te-(Lr-it)):qf}(Lr))}function Dn(Lr){return _e=m,St&&P?Nt(Lr):(P=j=m,he)}function lo(){var Lr=Fu(),Fo=Jt(Lr);if(P=arguments,j=this,Me=Lr,Fo){if(_e===m)return Qt(Me);if(ft)return cl(_e),_e=Lu(En,u),Nt(Me)}return _e===m&&(_e=Lu(En,u)),he}return u=Co(u)||0,cr(h)&&(ot=!!h.leading,te=(ft="maxWait"in h)?zr(Co(h.maxWait)||0,u):te,St="trailing"in h?!!h.trailing:St),lo.cancel=function uo(){_e!==m&&cl(_e),it=0,P=Me=j=_e=m},lo.flush=function Bi(){return _e===m?he:Dn(Fu())},lo}var mp=_n(function(a,u){return xd(a,1,u)}),vp=_n(function(a,u,h){return xd(a,Co(u)||0,h)});function Bu(a,u){if("function"!=typeof a||null!=u&&"function"!=typeof u)throw new Dr(I);var h=function(){var P=arguments,j=u?u.apply(this,P):P[0],te=h.cache;if(te.has(j))return te.get(j);var he=a.apply(this,P);return h.cache=te.set(j,he)||te,he};return h.cache=new(Bu.Cache||xa),h}function Pl(a){if("function"!=typeof a)throw new Dr(I);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}Bu.Cache=xa;var Ni=Iu(function(a,u){var h=(u=1==u.length&&hn(u[0])?an(u[0],si(Wt())):an(Tr(u,1),si(Wt()))).length;return _n(function(P){for(var j=-1,te=Ci(P.length,h);++j<te;)P[j]=u[j].call(this,P[j]);return He(a,this,P)})}),kc=_n(function(a,u){var h=Zr(u,Ja(kc));return Lo(a,32,m,u,h)}),Ml=_n(function(a,u){var h=Zr(u,Ja(Ml));return Lo(a,64,m,u,h)}),xp=ta(function(a,u){return Lo(a,256,m,m,m,u)});function aa(a,u){return a===u||a!=a&&u!=u}var dm=Ti(Zl),fm=Ti(function(a,u){return a>=u}),Pa=Sd(function(){return arguments}())?Sd:function(a){return Er(a)&&Ce.call(a,"callee")&&!bi.call(a,"callee")},hn=Ue.isArray,wp=D?si(D):function Ah(a){return Er(a)&&Oi(a)==mn};function Qi(a){return null!=a&&wn(a.length)&&!Ji(a)}function kr(a){return Er(a)&&Qi(a)}var ns=th||Zc,pm=H?si(H):function kh(a){return Er(a)&&Oi(a)==Ot};function Hu(a){if(!Er(a))return!1;var u=Oi(a);return u==Fn||"[object DOMException]"==u||"string"==typeof a.message&&"string"==typeof a.name&&!Js(a)}function Ji(a){if(!cr(a))return!1;var u=Oi(a);return u==sr||u==co||"[object AsyncFunction]"==u||"[object Proxy]"==u}function kn(a){return"number"==typeof a&&a==pn(a)}function wn(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Zt}function cr(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function Er(a){return null!=a&&"object"==typeof a}var Pf=Y?si(Y):function Lh(a){return Er(a)&&di(a)==dn};function ju(a){return"number"==typeof a||Er(a)&&Oi(a)==en}function Js(a){if(!Er(a)||Oi(a)!=G)return!1;var u=mr(a);if(null===u)return!0;var h=Ce.call(u,"constructor")&&u.constructor;return"function"==typeof h&&h instanceof h&&Ze.call(h)==wt}var Ol=pe?si(pe):function Rh(a){return Er(a)&&Oi(a)==Ke},Mf=ce?si(ce):function Nh(a){return Er(a)&&di(a)==qe};function zu(a){return"string"==typeof a||!hn(a)&&Er(a)&&Oi(a)==Ct}function Pi(a){return"symbol"==typeof a||Er(a)&&Oi(a)==Bt}var Zs=Ae?si(Ae):function Dh(a){return Er(a)&&wn(a.length)&&!!jn[Oi(a)]},Af=Ti(bu),Nc=Ti(function(a,u){return a<=u});function is(a){if(!a)return[];if(Qi(a))return zu(a)?yn(a):ei(a);if(oo&&a[oo])return function ps(be){for(var Ye,Ue=[];!(Ye=be.next()).done;)Ue.push(Ye.value);return Ue}(a[oo]());var u=di(a);return(u==dn?lu:u==qe?ui:qs)(a)}function sa(a){return a?(a=Co(a))===gt||a===-gt?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function pn(a){var u=sa(a),h=u%1;return u==u?h?u-h:u:0}function Dc(a){return a?vs(pn(a),0,Kn):0}function Co(a){if("number"==typeof a)return a;if(Pi(a))return NaN;if(cr(a)){var u="function"==typeof a.valueOf?a.valueOf():a;a=cr(u)?u+"":u}if("string"!=typeof a)return 0===a?a:+a;a=au(a);var h=fo.test(a);return h||la.test(a)?me(a.slice(2),h?2:8):La.test(a)?NaN:+a}function Ll(a){return Oo(a,pi(a))}function Xn(a){return null==a?"":wi(a)}var Mp=Hs(function(a,u){if(_l(u)||Qi(u))Oo(u,Or(u),a);else for(var h in u)Ce.call(u,h)&&vu(a,h,u[h])}),kf=Hs(function(a,u){Oo(u,pi(u),a)}),Gu=Hs(function(a,u,h,P){Oo(u,pi(u),a,P)}),Ap=Hs(function(a,u,h,P){Oo(u,Or(u),a,P)}),Uu=ta(Xa),$u=_n(function(a,u){a=Qn(a);var h=-1,P=u.length,j=P>2?u[2]:m;for(j&&ti(u[0],u[1],j)&&(P=1);++h<P;)for(var te=u[h],he=pi(te),_e=-1,Me=he.length;++_e<Me;){var it=he[_e],ot=a[it];(ot===m||aa(ot,fe[it])&&!Ce.call(a,it))&&(a[it]=te[it])}return a}),Fc=_n(function(a){return a.push(m,Gd),He(Nf,m,a)});function Vc(a,u,h){var P=null==a?m:ys(a,u);return P===m?h:P}function Nl(a,u){return null!=a&&vl(a,u,Ih)}var Fp=js(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=yt.call(u)),a[u]=h},$c(Zi)),Rf=js(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=yt.call(u)),Ce.call(a,u)?a[u].push(h):a[u]=[h]},Wt),Bp=_n(_u);function Or(a){return Qi(a)?gd(a):ec(a)}function pi(a){return Qi(a)?gd(a,!0):function Id(a){if(!cr(a))return function xl(a){var u=[];if(null!=a)for(var h in Qn(a))u.push(h);return u}(a);var u=_l(a),h=[];for(var P in a)"constructor"==P&&(u||!Ce.call(a,P))||h.push(P);return h}(a)}var Hp=Hs(function(a,u,h){Cu(a,u,h)}),Nf=Hs(function(a,u,h,P){Cu(a,u,h,P)}),Df=ta(function(a,u){var h={};if(null==a)return h;var P=!1;u=an(u,function(te){return te=ye(te,a),P||(P=te.length>1),te}),Oo(a,gl(a),h),P&&(h=qr(h,7,Xi));for(var j=u.length;j--;)Tu(h,u[j]);return h}),Ff=ta(function(a,u){return null==a?{}:function qn(a,u){return Ld(a,u,function(h,P){return Nl(a,P)})}(a,u)});function Bf(a,u){if(null==a)return{};var h=an(gl(a),function(P){return[P]});return u=Wt(u),Ld(a,h,function(P,j){return u(P,j[0])})}var Vf=xs(Or),so=xs(pi);function qs(a){return null==a?[]:su(a,Or(a))}var Gf=Ca(function(a,u,h){return u=u.toLowerCase(),a+(h?zc(u):u)});function zc(a){return Dl(Xn(a).toLowerCase())}function Gc(a){return(a=Xn(a))&&a.replace(Ms,Yo).replace(ma,"")}var Uc=Ca(function(a,u,h){return a+(h?"-":"")+u.toLowerCase()}),Uf=Ca(function(a,u,h){return a+(h?" ":"")+u.toLowerCase()}),Jp=rr("toLowerCase"),$f=Ca(function(a,u,h){return a+(h?"_":"")+u.toLowerCase()}),ng=Ca(function(a,u,h){return a+(h?" ":"")+Dl(u)}),lg=Ca(function(a,u,h){return a+(h?" ":"")+u.toUpperCase()}),Dl=rr("toUpperCase");function Xu(a,u,h){return a=Xn(a),(u=h?m:u)===m?function zl(be){return Dt.test(be)}(a)?function ms(be){return be.match(Mr)||[]}(a):function Va(be){return be.match(us)||[]}(a):a.match(u)||[]}var Fl=_n(function(a,u){try{return He(a,m,u)}catch(h){return Hu(h)?h:new qt(h)}}),cg=ta(function(a,u){return De(u,function(h){h=Sa(h),Ko(a,h,Ac(a[h],a))}),a});function $c(a){return function(){return a}}var Wc=hl(),Yc=hl(!0);function Zi(a){return a}function Xc(a){return Ed("function"==typeof a?a:qr(a,1))}var gg=_n(function(a,u){return function(h){return _u(h,a,u)}}),Ma=_n(function(a,u){return function(h){return _u(a,h,u)}});function Kc(a,u,h){var P=Or(u),j=ol(u,P);null==h&&(!cr(u)||!j.length&&P.length)&&(h=u,u=a,a=this,j=ol(u,Or(u)));var te=!(cr(h)&&"chain"in h&&!h.chain),he=Ji(a);return De(j,function(_e){var Me=u[_e];a[_e]=Me,he&&(a.prototype[_e]=function(){var it=this.__chain__;if(te||it){var ot=a(this.__wrapped__),ft=ot.__actions__=ei(this.__actions__);return ft.push({func:Me,args:arguments,thisArg:a}),ot.__chain__=it,ot}return Me.apply(a,br([this.value()],arguments))})}),a}function Qc(){}var yg=yo(an),_g=yo(Rt),xg=yo(Kr);function Kf(a){return Ou(a)?Jr(Sa(a)):function Fh(a){return function(u){return ys(u,a)}}(a)}var Cg=pc(),wg=pc(!0);function Jc(){return[]}function Zc(){return!1}var qc=Lt(function(a,u){return a+u},0),Jf=wa("ceil"),Ig=Lt(function(a,u){return a/u},1),Pg=wa("floor"),Zf=Lt(function(a,u){return a*u},1),ed=wa("round"),Ng=Lt(function(a,u){return a-u},0);return Z.after=function gp(a,u){if("function"!=typeof u)throw new Dr(I);return a=pn(a),function(){if(--a<1)return u.apply(this,arguments)}},Z.ary=bf,Z.assign=Mp,Z.assignIn=kf,Z.assignInWith=Gu,Z.assignWith=Ap,Z.at=Uu,Z.before=Cf,Z.bind=Ac,Z.bindAll=cg,Z.bindKey=wf,Z.castArray=function Cp(){if(!arguments.length)return[];var a=arguments[0];return hn(a)?a:[a]},Z.chain=Sl,Z.chunk=function $g(a,u,h){u=(h?ti(a,u,h):u===m)?1:zr(pn(u),0);var P=null==a?0:a.length;if(!P||u<1)return[];for(var j=0,te=0,he=Ue(Ds(P/u));j<P;)he[te++]=Yi(a,j,j+=u);return he},Z.compact=function Wh(a){for(var u=-1,h=null==a?0:a.length,P=0,j=[];++u<h;){var te=a[u];te&&(j[P++]=te)}return j},Z.concat=function Wg(){var a=arguments.length;if(!a)return[];for(var u=Ue(a-1),h=arguments[0],P=a;P--;)u[P-1]=arguments[P];return br(hn(h)?ei(h):[h],Tr(u,1))},Z.cond=function dg(a){var u=null==a?0:a.length,h=Wt();return a=u?an(a,function(P){if("function"!=typeof P[1])throw new Dr(I);return[h(P[0]),P[1]]}):[],_n(function(P){for(var j=-1;++j<u;){var te=a[j];if(He(te[0],this,P))return He(te[1],this,P)}})},Z.conforms=function Xf(a){return function yd(a){var u=Or(a);return function(h){return _d(h,a,u)}}(qr(a,1))},Z.constant=$c,Z.countBy=pf,Z.create=function Rl(a,u){var h=Bs(a);return null==u?h:vd(h,u)},Z.curry=function Sf(a,u,h){var P=Lo(a,8,m,m,m,m,m,u=h?m:u);return P.placeholder=Sf.placeholder,P},Z.curryRight=function Tf(a,u,h){var P=Lo(a,16,m,m,m,m,m,u=h?m:u);return P.placeholder=Tf.placeholder,P},Z.debounce=Ef,Z.defaults=$u,Z.defaultsDeep=Fc,Z.defer=mp,Z.delay=vp,Z.difference=Yh,Z.differenceBy=Yg,Z.differenceWith=Xg,Z.drop=function Xh(a,u,h){var P=null==a?0:a.length;return P?Yi(a,(u=h||u===m?1:pn(u))<0?0:u,P):[]},Z.dropRight=function Kg(a,u,h){var P=null==a?0:a.length;return P?Yi(a,0,(u=P-(u=h||u===m?1:pn(u)))<0?0:u):[]},Z.dropRightWhile=function $s(a,u){return a&&a.length?Eu(a,Wt(u,3),!0,!0):[]},Z.dropWhile=function Kh(a,u){return a&&a.length?Eu(a,Wt(u,3),!0):[]},Z.fill=function ef(a,u,h,P){var j=null==a?0:a.length;return j?(h&&"number"!=typeof h&&ti(a,u,h)&&(h=0,P=j),function li(a,u,h,P){var j=a.length;for((h=pn(h))<0&&(h=-h>j?0:j+h),(P=P===m||P>j?j:pn(P))<0&&(P+=j),P=h>P?0:Dc(P);h<P;)a[h++]=u;return a}(a,u,h,P)):[]},Z.filter=function Nu(a,u){return(hn(a)?Gt:Kl)(a,Wt(u,3))},Z.flatMap=function xn(a,u){return Tr(Il(a,u),1)},Z.flatMapDeep=function mf(a,u){return Tr(Il(a,u),gt)},Z.flatMapDepth=function oa(a,u,h){return h=h===m?1:pn(h),Tr(Il(a,u),h)},Z.flatten=Ii,Z.flattenDeep=function Qg(a){return null!=a&&a.length?Tr(a,gt):[]},Z.flattenDepth=function Jg(a,u){return null!=a&&a.length?Tr(a,u=u===m?1:pn(u)):[]},Z.flip=function yp(a){return Lo(a,512)},Z.flow=Wc,Z.flowRight=Yc,Z.fromPairs=function Zg(a){for(var u=-1,h=null==a?0:a.length,P={};++u<h;){var j=a[u];P[j[0]]=j[1]}return P},Z.functions=function Bc(a){return null==a?[]:ol(a,Or(a))},Z.functionsIn=function Np(a){return null==a?[]:ol(a,pi(a))},Z.groupBy=Du,Z.initial=function Kt(a){return null!=a&&a.length?Yi(a,0,-1):[]},Z.intersection=_o,Z.intersectionBy=Cc,Z.intersectionWith=No,Z.invert=Fp,Z.invertBy=Rf,Z.invokeMap=Mc,Z.iteratee=Xc,Z.keyBy=sp,Z.keys=Or,Z.keysIn=pi,Z.map=Il,Z.mapKeys=function Hc(a,u){var h={};return u=Wt(u,3),Qo(a,function(P,j,te){Ko(h,u(P,j,te),P)}),h},Z.mapValues=function Vp(a,u){var h={};return u=Wt(u,3),Qo(a,function(P,j,te){Ko(h,j,u(P,j,te))}),h},Z.matches=function hg(a){return Md(qr(a,1))},Z.matchesProperty=function pg(a,u){return Ad(a,qr(u,1))},Z.memoize=Bu,Z.merge=Hp,Z.mergeWith=Nf,Z.method=gg,Z.methodOf=Ma,Z.mixin=Kc,Z.negate=Pl,Z.nthArg=function vg(a){return a=pn(a),_n(function(u){return tc(u,a)})},Z.omit=Df,Z.omitBy=function jp(a,u){return Bf(a,Pl(Wt(u)))},Z.once=function _p(a){return Cf(2,a)},Z.orderBy=function up(a,u,h,P){return null==a?[]:(hn(u)||(u=null==u?[]:[u]),hn(h=P?m:h)||(h=null==h?[]:[h]),Od(a,u,h))},Z.over=yg,Z.overArgs=Ni,Z.overEvery=_g,Z.overSome=xg,Z.partial=kc,Z.partialRight=Ml,Z.partition=lp,Z.pick=Ff,Z.pickBy=Bf,Z.property=Kf,Z.propertyOf=function bg(a){return function(u){return null==a?m:ys(a,u)}},Z.pull=qa,Z.pullAll=Ws,Z.pullAllBy=function Jn(a,u,h){return a&&a.length&&u&&u.length?nc(a,u,Wt(h,2)):a},Z.pullAllWith=function ri(a,u,h){return a&&a.length&&u&&u.length?nc(a,u,m,h):a},Z.pullAt=Tn,Z.range=Cg,Z.rangeRight=wg,Z.rearg=xp,Z.reject=function fp(a,u){return(hn(a)?Gt:Kl)(a,Pl(Wt(u,3)))},Z.remove=function em(a,u){var h=[];if(!a||!a.length)return h;var P=-1,j=[],te=a.length;for(u=Wt(u,3);++P<te;){var he=a[P];u(he,P,a)&&(h.push(he),j.push(P))}return Rd(a,j),h},Z.rest=function Ia(a,u){if("function"!=typeof a)throw new Dr(I);return _n(a,u=u===m?u:pn(u))},Z.reverse=wc,Z.sampleSize=function pp(a,u,h){return u=(h?ti(a,u,h):u===m)?1:pn(u),(hn(a)?wh:_s)(a,u)},Z.set=function Gp(a,u,h){return null==a?a:Qa(a,u,h)},Z.setWith=function Up(a,u,h,P){return P="function"==typeof P?P:m,null==a?a:Qa(a,u,h,P)},Z.shuffle=function ts(a){return(hn(a)?Sh:ul)(a)},Z.slice=function tm(a,u,h){var P=null==a?0:a.length;return P?(h&&"number"!=typeof h&&ti(a,u,h)?(u=0,h=P):(u=null==u?0:pn(u),h=h===m?P:pn(h)),Yi(a,u,h)):[]},Z.sortBy=xf,Z.sortedUniq=function Gr(a){return a&&a.length?oc(a):[]},Z.sortedUniqBy=function Ys(a,u){return a&&a.length?oc(a,Wt(u,2)):[]},Z.split=function tg(a,u,h){return h&&"number"!=typeof h&&ti(a,u,h)&&(u=h=m),(h=h===m?Kn:h>>>0)?(a=Xn(a))&&("string"==typeof u||null!=u&&!Ol(u))&&!(u=wi(u))&&Ha(a)?qo(yn(a),0,h):a.split(u,h):[]},Z.spread=function Vu(a,u){if("function"!=typeof a)throw new Dr(I);return u=null==u?0:zr(pn(u),0),_n(function(h){var P=h[u],j=qo(h,0,u);return P&&br(j,P),He(a,this,j)})},Z.tail=function of(a){var u=null==a?0:a.length;return u?Yi(a,1,u):[]},Z.take=function rm(a,u,h){return a&&a.length?Yi(a,0,(u=h||u===m?1:pn(u))<0?0:u):[]},Z.takeRight=function bo(a,u,h){var P=null==a?0:a.length;return P?Yi(a,(u=P-(u=h||u===m?1:pn(u)))<0?0:u,P):[]},Z.takeRightWhile=function ep(a,u){return a&&a.length?Eu(a,Wt(u,3),!1,!0):[]},Z.takeWhile=function tp(a,u){return a&&a.length?Eu(a,Wt(u,3)):[]},Z.tap=function lf(a,u){return u(a),a},Z.throttle=function bp(a,u,h){var P=!0,j=!0;if("function"!=typeof a)throw new Dr(I);return cr(h)&&(P="leading"in h?!!h.leading:P,j="trailing"in h?!!h.trailing:j),Ef(a,u,{leading:P,maxWait:u,trailing:j})},Z.thru=Ru,Z.toArray=is,Z.toPairs=Vf,Z.toPairsIn=so,Z.toPath=function Eg(a){return hn(a)?an(a,Sa):Pi(a)?[a]:ei(wl(Xn(a)))},Z.toPlainObject=Ll,Z.transform=function Fi(a,u,h){var P=hn(a),j=P||ns(a)||Zs(a);if(u=Wt(u,4),null==h){var te=a&&a.constructor;h=j?P?new te:[]:cr(a)&&Ji(te)?Bs(mr(a)):{}}return(j?De:Qo)(a,function(he,_e,Me){return u(h,he,_e,Me)}),h},Z.unary=function im(a){return bf(a,1)},Z.union=fi,Z.unionBy=np,Z.unionWith=Cr,Z.uniq=function Ki(a){return a&&a.length?Zo(a):[]},Z.uniqBy=function hi(a,u){return a&&a.length?Zo(a,Wt(u,2)):[]},Z.uniqWith=function Xs(a,u){return u="function"==typeof u?u:m,a&&a.length?Zo(a,m,u):[]},Z.unset=function jc(a,u){return null==a||Tu(a,u)},Z.unzip=ii,Z.unzipWith=Tc,Z.update=function $p(a,u,h){return null==a?a:ac(a,u,ll(h))},Z.updateWith=function Wp(a,u,h,P){return P="function"==typeof P?P:m,null==a?a:ac(a,u,ll(h),P)},Z.values=qs,Z.valuesIn=function Yp(a){return null==a?[]:su(a,pi(a))},Z.without=Ea,Z.words=Xu,Z.wrap=function om(a,u){return kc(ll(u),a)},Z.xor=rp,Z.xorBy=af,Z.xorWith=ip,Z.zip=sf,Z.zipObject=function uf(a,u){return lc(a||[],u||[],vu)},Z.zipObjectDeep=function op(a,u){return lc(a||[],u||[],Qa)},Z.zipWith=ap,Z.entries=Vf,Z.entriesIn=so,Z.extend=kf,Z.extendWith=Gu,Kc(Z,Z),Z.add=qc,Z.attempt=Fl,Z.camelCase=Gf,Z.capitalize=zc,Z.ceil=Jf,Z.clamp=function Hf(a,u,h){return h===m&&(h=u,u=m),h!==m&&(h=(h=Co(h))==h?h:0),u!==m&&(u=(u=Co(u))==u?u:0),vs(Co(a),u,h)},Z.clone=function am(a){return qr(a,4)},Z.cloneDeep=function um(a){return qr(a,5)},Z.cloneDeepWith=function lm(a,u){return qr(a,5,u="function"==typeof u?u:m)},Z.cloneWith=function sm(a,u){return qr(a,4,u="function"==typeof u?u:m)},Z.conformsTo=function cm(a,u){return null==u||_d(a,u,Or(u))},Z.deburr=Gc,Z.defaultTo=function fg(a,u){return null==a||a!=a?u:a},Z.divide=Ig,Z.endsWith=function Xp(a,u,h){a=Xn(a),u=wi(u);var P=a.length,j=h=h===m?P:vs(pn(h),0,P);return(h-=u.length)>=0&&a.slice(h,j)==u},Z.eq=aa,Z.escape=function Kp(a){return(a=Xn(a))&&nr.test(a)?a.replace(Le,Mo):a},Z.escapeRegExp=function Qp(a){return(a=Xn(a))&&os.test(a)?a.replace(wo,"\\$&"):a},Z.every=function Ks(a,u,h){var P=hn(a)?Rt:rl;return h&&ti(a,u,h)&&(u=m),P(a,Wt(u,3))},Z.find=Ic,Z.findIndex=tf,Z.findKey=function kp(a,u){return fs(a,Wt(u,3),Qo)},Z.findLast=gf,Z.findLastIndex=Qh,Z.findLastKey=function Of(a,u){return fs(a,Wt(u,3),Jl)},Z.floor=Pg,Z.forEach=Ss,Z.forEachRight=Pc,Z.forIn=function Lf(a,u){return null==a?a:Ql(a,Wt(u,3),pi)},Z.forInRight=function Op(a,u){return null==a?a:Cd(a,Wt(u,3),pi)},Z.forOwn=function Lp(a,u){return a&&Qo(a,Wt(u,3))},Z.forOwnRight=function Rp(a,u){return a&&Jl(a,Wt(u,3))},Z.get=Vc,Z.gt=dm,Z.gte=fm,Z.has=function Dp(a,u){return null!=a&&vl(a,u,Eh)},Z.hasIn=Nl,Z.head=Jh,Z.identity=Zi,Z.includes=function vf(a,u,h,P){a=Qi(a)?a:qs(a),h=h&&!P?pn(h):0;var j=a.length;return h<0&&(h=zr(j+h,0)),zu(a)?h<=j&&a.indexOf(u,h)>-1:!!j&&Wi(a,u,h)>-1},Z.indexOf=function qg(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:pn(h);return j<0&&(j=zr(P+j,0)),Wi(a,u,j)},Z.inRange=function jf(a,u,h){return u=sa(u),h===m?(h=u,u=0):h=sa(h),function Ph(a,u,h){return a>=Ci(u,h)&&a<zr(u,h)}(a=Co(a),u,h)},Z.invoke=Bp,Z.isArguments=Pa,Z.isArray=hn,Z.isArrayBuffer=wp,Z.isArrayLike=Qi,Z.isArrayLikeObject=kr,Z.isBoolean=function hm(a){return!0===a||!1===a||Er(a)&&Oi(a)==xt},Z.isBuffer=ns,Z.isDate=pm,Z.isElement=function gm(a){return Er(a)&&1===a.nodeType&&!Js(a)},Z.isEmpty=function Ts(a){if(null==a)return!0;if(Qi(a)&&(hn(a)||"string"==typeof a||"function"==typeof a.splice||ns(a)||Zs(a)||Pa(a)))return!a.length;var u=di(a);if(u==dn||u==qe)return!a.size;if(_l(a))return!ec(a).length;for(var h in a)if(Ce.call(a,h))return!1;return!0},Z.isEqual=function Qs(a,u){return xu(a,u)},Z.isEqualWith=function If(a,u,h){var P=(h="function"==typeof h?h:m)?h(a,u):m;return P===m?xu(a,u,m,h):!!P},Z.isError=Hu,Z.isFinite=function rs(a){return"number"==typeof a&&od(a)},Z.isFunction=Ji,Z.isInteger=kn,Z.isLength=wn,Z.isMap=Pf,Z.isMatch=function Sp(a,u){return a===u||ql(a,u,ku(u))},Z.isMatchWith=function Tp(a,u,h){return h="function"==typeof h?h:m,ql(a,u,ku(u),h)},Z.isNaN=function Al(a){return ju(a)&&a!=+a},Z.isNative=function Oc(a){if(Gh(a))throw new qt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Td(a)},Z.isNil=function kl(a){return null==a},Z.isNull=function Di(a){return null===a},Z.isNumber=ju,Z.isObject=cr,Z.isObjectLike=Er,Z.isPlainObject=Js,Z.isRegExp=Ol,Z.isSafeInteger=function Ep(a){return kn(a)&&a>=-Zt&&a<=Zt},Z.isSet=Mf,Z.isString=zu,Z.isSymbol=Pi,Z.isTypedArray=Zs,Z.isUndefined=function Ip(a){return a===m},Z.isWeakMap=function Lc(a){return Er(a)&&di(a)==bn},Z.isWeakSet=function Rc(a){return Er(a)&&"[object WeakSet]"==Oi(a)},Z.join=function nf(a,u){return null==a?"":nh.call(a,u)},Z.kebabCase=Uc,Z.last=Ri,Z.lastIndexOf=function ia(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=P;return h!==m&&(j=(j=pn(h))<0?zr(P+j,0):Ci(j,P-1)),u==u?function Qu(be,Ye,Ue){for(var Mt=Ue+1;Mt--;)if(be[Mt]===Ye)return Mt;return Mt}(a,u,j):Qr(a,ai,j,!0)},Z.lowerCase=Uf,Z.lowerFirst=Jp,Z.lt=Af,Z.lte=Nc,Z.max=function Mg(a){return a&&a.length?il(a,Zi,Zl):m},Z.maxBy=function Ag(a,u){return a&&a.length?il(a,Wt(u,2),Zl):m},Z.mean=function kg(a){return Po(a,Zi)},Z.meanBy=function Og(a,u){return Po(a,Wt(u,2))},Z.min=function Lg(a){return a&&a.length?il(a,Zi,bu):m},Z.minBy=function Rg(a,u){return a&&a.length?il(a,Wt(u,2),bu):m},Z.stubArray=Jc,Z.stubFalse=Zc,Z.stubObject=function Sg(){return{}},Z.stubString=function Tg(){return""},Z.stubTrue=function eu(){return!0},Z.multiply=Zf,Z.nth=function xo(a,u){return a&&a.length?tc(a,pn(u)):m},Z.noConflict=function mg(){return Be._===this&&(Be._=Ut),this},Z.noop=Qc,Z.now=Fu,Z.pad=function Zp(a,u,h){a=Xn(a);var P=(u=pn(u))?ja(a):0;if(!u||P>=u)return a;var j=(u-P)/2;return ea(Zu(j),h)+a+ea(Ds(j),h)},Z.padEnd=function rn(a,u,h){a=Xn(a);var P=(u=pn(u))?ja(a):0;return u&&P<u?a+ea(u-P,h):a},Z.padStart=function Wu(a,u,h){a=Xn(a);var P=(u=pn(u))?ja(a):0;return u&&P<u?ea(u-P,h)+a:a},Z.parseInt=function Do(a,u,h){return h||null==u?u=0:u&&(u=+u),ih(Xn(a).replace(ua,""),u||0)},Z.random=function zf(a,u,h){if(h&&"boolean"!=typeof h&&ti(a,u,h)&&(u=h=m),h===m&&("boolean"==typeof u?(h=u,u=m):"boolean"==typeof a&&(h=a,a=m)),a===m&&u===m?(a=0,u=1):(a=sa(a),u===m?(u=a,a=0):u=sa(u)),a>u){var P=a;a=u,u=P}if(h||a%1||u%1){var j=ad();return Ci(a+j*(u-a+se("1e-"+((j+"").length-1))),u)}return rc(a,u)},Z.reduce=function cp(a,u,h){var P=hn(a)?$n:lr,j=arguments.length<3;return P(a,Wt(u,4),h,j,Ka)},Z.reduceRight=function dp(a,u,h){var P=hn(a)?tn:lr,j=arguments.length<3;return P(a,Wt(u,4),h,j,bd)},Z.repeat=function qp(a,u,h){return u=(h?ti(a,u,h):u===m)?1:pn(u),sl(Xn(a),u)},Z.replace=function eg(){var a=arguments,u=Xn(a[0]);return a.length<3?u:u.replace(a[1],a[2])},Z.result=function zp(a,u,h){var P=-1,j=(u=ye(u,a)).length;for(j||(j=1,a=m);++P<j;){var te=null==a?m:a[Sa(u[P])];te===m&&(P=j,te=h),a=Ji(te)?te.call(a):te}return a},Z.round=ed,Z.runInContext=be,Z.sample=function hp(a){return(hn(a)?md:Jo)(a)},Z.size=function yf(a){if(null==a)return 0;if(Qi(a))return zu(a)?ja(a):a.length;var u=di(a);return u==dn||u==qe?a.size:ec(a).length},Z.snakeCase=$f,Z.some=function _f(a,u,h){var P=hn(a)?Kr:Vh;return h&&ti(a,u,h)&&(u=m),P(a,Wt(u,3))},Z.sortedIndex=function Zh(a,u){return wu(a,u)},Z.sortedIndexBy=function rf(a,u,h){return Su(a,u,Wt(h,2))},Z.sortedIndexOf=function qh(a,u){var h=null==a?0:a.length;if(h){var P=wu(a,u);if(P<h&&aa(a[P],u))return P}return-1},Z.sortedLastIndex=function nm(a,u){return wu(a,u,!0)},Z.sortedLastIndexBy=function Sc(a,u,h){return Su(a,u,Wt(h,2),!0)},Z.sortedLastIndexOf=function Ta(a,u){if(null!=a&&a.length){var P=wu(a,u,!0)-1;if(aa(a[P],u))return P}return-1},Z.startCase=ng,Z.startsWith=function rg(a,u,h){return a=Xn(a),h=null==h?0:vs(pn(h),0,a.length),u=wi(u),a.slice(h,h+u.length)==u},Z.subtract=Ng,Z.sum=function Dg(a){return a&&a.length?hs(a,Zi):0},Z.sumBy=function Fg(a,u){return a&&a.length?hs(a,Wt(u,2)):0},Z.template=function Wf(a,u,h){var P=Z.templateSettings;h&&ti(a,u,h)&&(u=m),a=Xn(a),u=Gu({},u,P,zd);var _e,Me,j=Gu({},u.imports,P.imports,zd),te=Or(j),he=su(j,te),it=0,ot=u.interpolate||Ho,ft="__p += '",St=Ga((u.escape||Ho).source+"|"+ot.source+"|"+(ot===yi?Vo:Ho).source+"|"+(u.evaluate||Ho).source+"|$","g"),Nt="//# sourceURL="+(Ce.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mo+"]")+"\n";a.replace(St,function(Jt,En,Dn,uo,Bi,lo){return Dn||(Dn=uo),ft+=a.slice(it,lo).replace(So,Os),En&&(_e=!0,ft+="' +\n__e("+En+") +\n'"),Bi&&(Me=!0,ft+="';\n"+Bi+";\n__p += '"),Dn&&(ft+="' +\n((__t = ("+Dn+")) == null ? '' : __t) +\n'"),it=lo+Jt.length,Jt}),ft+="';\n";var Qt=Ce.call(u,"variable")&&u.variable;if(Qt){if(Oa.test(Qt))throw new qt("Invalid `variable` option passed into `_.template`")}else ft="with (obj) {\n"+ft+"\n}\n";ft=(Me?ft.replace(vn,""):ft).replace(mi,"$1").replace(Bo,"$1;"),ft="function("+(Qt||"obj")+") {\n"+(Qt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Me?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ft+"return __p\n}";var gn=Fl(function(){return Mn(te,Nt+"return "+ft).apply(m,he)});if(gn.source=ft,Hu(gn))throw gn;return gn},Z.times=function Qf(a,u){if((a=pn(a))<1||a>Zt)return[];var h=Kn,P=Ci(a,Kn);u=Wt(u),a-=Kn;for(var j=Rn(P,u);++h<a;)u(h);return j},Z.toFinite=sa,Z.toInteger=pn,Z.toLength=Dc,Z.toLower=function ig(a){return Xn(a).toLowerCase()},Z.toNumber=Co,Z.toSafeInteger=function Pp(a){return a?vs(pn(a),-Zt,Zt):0===a?a:0},Z.toString=Xn,Z.toUpper=function og(a){return Xn(a).toUpperCase()},Z.trim=function ag(a,u,h){if((a=Xn(a))&&(h||u===m))return au(a);if(!a||!(u=wi(u)))return a;var P=yn(a),j=yn(u);return qo(P,Ku(P,j),uu(P,j)+1).join("")},Z.trimEnd=function sg(a,u,h){if((a=Xn(a))&&(h||u===m))return a.slice(0,gs(a)+1);if(!a||!(u=wi(u)))return a;var P=yn(a);return qo(P,0,uu(P,yn(u))+1).join("")},Z.trimStart=function ug(a,u,h){if((a=Xn(a))&&(h||u===m))return a.replace(ua,"");if(!a||!(u=wi(u)))return a;var P=yn(a);return qo(P,Ku(P,yn(u))).join("")},Z.truncate=function Yu(a,u){var h=30,P="...";if(cr(u)){var j="separator"in u?u.separator:j;h="length"in u?pn(u.length):h,P="omission"in u?wi(u.omission):P}var te=(a=Xn(a)).length;if(Ha(a)){var he=yn(a);te=he.length}if(h>=te)return a;var _e=h-ja(P);if(_e<1)return P;var Me=he?qo(he,0,_e).join(""):a.slice(0,_e);if(j===m)return Me+P;if(he&&(_e+=Me.length-_e),Ol(j)){if(a.slice(_e).search(j)){var it,ot=Me;for(j.global||(j=Ga(j.source,Xn(Is.exec(j))+"g")),j.lastIndex=0;it=j.exec(ot);)var ft=it.index;Me=Me.slice(0,ft===m?_e:ft)}}else if(a.indexOf(wi(j),_e)!=_e){var St=Me.lastIndexOf(j);St>-1&&(Me=Me.slice(0,St))}return Me+P},Z.unescape=function Yf(a){return(a=Xn(a))&&dt.test(a)?a.replace(Mi,ro):a},Z.uniqueId=function Bl(a){var u=++rt;return Xn(a)+u},Z.upperCase=lg,Z.upperFirst=Dl,Z.each=Ss,Z.eachRight=Pc,Z.first=Jh,Kc(Z,function(){var a={};return Qo(Z,function(u,h){Ce.call(Z.prototype,h)||(a[h]=u)}),a}(),{chain:!1}),Z.VERSION="4.17.21",De(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Z[a].placeholder=Z}),De(["drop","take"],function(a,u){An.prototype[a]=function(h){h=h===m?1:zr(pn(h),0);var P=this.__filtered__&&!u?new An(this):this.clone();return P.__filtered__?P.__takeCount__=Ci(h,P.__takeCount__):P.__views__.push({size:Ci(h,Kn),type:a+(P.__dir__<0?"Right":"")}),P},An.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),De(["filter","map","takeWhile"],function(a,u){var h=u+1,P=1==h||3==h;An.prototype[a]=function(j){var te=this.clone();return te.__iteratees__.push({iteratee:Wt(j,3),type:h}),te.__filtered__=te.__filtered__||P,te}}),De(["head","last"],function(a,u){var h="take"+(u?"Right":"");An.prototype[a]=function(){return this[h](1).value()[0]}}),De(["initial","tail"],function(a,u){var h="drop"+(u?"":"Right");An.prototype[a]=function(){return this.__filtered__?new An(this):this[h](1)}}),An.prototype.compact=function(){return this.filter(Zi)},An.prototype.find=function(a){return this.filter(a).head()},An.prototype.findLast=function(a){return this.reverse().find(a)},An.prototype.invokeMap=_n(function(a,u){return"function"==typeof a?new An(this):this.map(function(h){return _u(h,a,u)})}),An.prototype.reject=function(a){return this.filter(Pl(Wt(a)))},An.prototype.slice=function(a,u){a=pn(a);var h=this;return h.__filtered__&&(a>0||u<0)?new An(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),u!==m&&(h=(u=pn(u))<0?h.dropRight(-u):h.take(u-a)),h)},An.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},An.prototype.toArray=function(){return this.take(Kn)},Qo(An.prototype,function(a,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),P=/^(?:head|last)$/.test(u),j=Z[P?"take"+("last"==u?"Right":""):u],te=P||/^find/.test(u);!j||(Z.prototype[u]=function(){var he=this.__wrapped__,_e=P?[1]:arguments,Me=he instanceof An,it=_e[0],ot=Me||hn(he),ft=function(En){var Dn=j.apply(Z,br([En],_e));return P&&St?Dn[0]:Dn};ot&&h&&"function"==typeof it&&1!=it.length&&(Me=ot=!1);var St=this.__chain__,Nt=!!this.__actions__.length,Qt=te&&!St,gn=Me&&!Nt;if(!te&&ot){he=gn?he:new An(this);var Jt=a.apply(he,_e);return Jt.__actions__.push({func:Ru,args:[ft],thisArg:m}),new vo(Jt,St)}return Qt&&gn?a.apply(this,_e):(Jt=this.thru(ft),Qt?P?Jt.value()[0]:Jt.value():Jt)})}),De(["pop","push","shift","sort","splice","unshift"],function(a){var u=Ns[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",P=/^(?:pop|shift)$/.test(a);Z.prototype[a]=function(){var j=arguments;if(P&&!this.__chain__){var te=this.value();return u.apply(hn(te)?te:[],j)}return this[h](function(he){return u.apply(hn(he)?he:[],j)})}}),Qo(An.prototype,function(a,u){var h=Z[u];if(h){var P=h.name+"";Ce.call(Ua,P)||(Ua[P]=[]),Ua[P].push({name:u,func:h})}}),Ua[Nn(m,2).name]=[{name:"wrapper",func:m}],An.prototype.clone=function dd(){var a=new An(this.__wrapped__);return a.__actions__=ei(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ei(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ei(this.__views__),a},An.prototype.reverse=function fd(){if(this.__filtered__){var a=new An(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},An.prototype.value=function zg(){var a=this.__wrapped__.value(),u=this.__dir__,h=hn(a),P=u<0,j=h?a.length:0,te=function $d(a,u,h){for(var P=-1,j=h.length;++P<j;){var te=h[P],he=te.size;switch(te.type){case"drop":a+=he;break;case"dropRight":u-=he;break;case"take":u=Ci(u,a+he);break;case"takeRight":a=zr(a,u-he)}}return{start:a,end:u}}(0,j,this.__views__),he=te.start,_e=te.end,Me=_e-he,it=P?_e:he-1,ot=this.__iteratees__,ft=ot.length,St=0,Nt=Ci(Me,this.__takeCount__);if(!h||!P&&j==Me&&Nt==Me)return sc(a,this.__actions__);var Qt=[];e:for(;Me--&&St<Nt;){for(var gn=-1,Jt=a[it+=u];++gn<ft;){var En=ot[gn],uo=En.type,Bi=(0,En.iteratee)(Jt);if(2==uo)Jt=Bi;else if(!Bi){if(1==uo)continue e;break e}}Qt[St++]=Jt}return Qt},Z.prototype.at=Ec,Z.prototype.chain=function es(){return Sl(this)},Z.prototype.commit=function Tl(){return new vo(this.value(),this.__chain__)},Z.prototype.next=function cf(){this.__values__===m&&(this.__values__=is(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?m:this.__values__[this.__index__++]}},Z.prototype.plant=function ff(a){for(var u,h=this;h instanceof tl;){var P=qd(h);P.__index__=0,P.__values__=m,u?j.__wrapped__=P:u=P;var j=P;h=h.__wrapped__}return j.__wrapped__=a,u},Z.prototype.reverse=function hf(){var a=this.__wrapped__;if(a instanceof An){var u=a;return this.__actions__.length&&(u=new An(this)),(u=u.reverse()).__actions__.push({func:Ru,args:[wc],thisArg:m}),new vo(u,this.__chain__)}return this.thru(wc)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function El(){return sc(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,oo&&(Z.prototype[oo]=function df(){return this}),Z}();Be._=za,(g=function(){return za}.call(W,d,W,E))!==m&&(E.exports=g)}.call(this)},19984:(E,W,d)=>{var g=d(84633),m=d(96517),S=d(92046),T=d(21503);E.exports=function y(I,O){return(T(I)?g:S)(I,m(O,3))}},10203:(E,W,d)=>{var g=d(85683),m=d(45184),S=d(96517);E.exports=function T(y,I){var O={};return I=S(I,3),m(y,function(A,N,B){g(O,N,I(A,N,B))}),O}},18176:(E,W,d)=>{var g=d(67308),m=d(31100),S=d(32608);E.exports=function T(y){return y&&y.length?g(y,S,m):void 0}},30535:(E,W,d)=>{var g=d(99850);function S(T,y){if("function"!=typeof T||null!=y&&"function"!=typeof y)throw new TypeError("Expected a function");var I=function(){var O=arguments,A=y?y.apply(this,O):O[0],N=I.cache;if(N.has(A))return N.get(A);var B=T.apply(this,O);return I.cache=N.set(A,B)||N,B};return I.cache=new(S.Cache||g),I}S.Cache=g,E.exports=S},80567:(E,W,d)=>{var g=d(73842),S=d(84944)(function(T,y,I){g(T,y,I)});E.exports=S},29439:(E,W,d)=>{var g=d(67308),m=d(99069),S=d(32608);E.exports=function T(y){return y&&y.length?g(y,S,m):void 0}},29525:(E,W,d)=>{var g=d(67308),m=d(96517),S=d(99069);E.exports=function T(y,I){return y&&y.length?g(y,m(I,2),S):void 0}},12552:E=>{E.exports=function W(){}},31710:(E,W,d)=>{var g=d(12119);E.exports=function(){return g.Date.now()}},16372:(E,W,d)=>{var g=d(83021),S=d(3975)(function(T,y){return null==T?{}:g(T,y)});E.exports=S},87495:(E,W,d)=>{var g=d(11847),m=d(39222),S=d(45352),T=d(68533);E.exports=function y(I){return S(I)?g(T(I)):m(I)}},90361:(E,W,d)=>{var m=d(97509)();E.exports=m},81337:(E,W,d)=>{var g=d(8745),m=d(43132),S=d(96517),T=d(13570),y=d(21503);E.exports=function I(O,A,N){var B=y(O)?g:T,k=arguments.length<3;return B(O,S(A,4),N,k,m)}},55637:(E,W,d)=>{var g=d(81172),m=d(28794),S=d(56507),T=d(30248),y=d(52315);E.exports=function A(N){if(null==N)return 0;if(S(N))return T(N)?y(N):N.length;var B=m(N);return"[object Map]"==B||"[object Set]"==B?N.size:g(N).length}},12906:(E,W,d)=>{var g=d(50686),m=d(6119),S=d(23269),T=d(93342),y=S(function(I,O){if(null==I)return[];var A=O.length;return A>1&&T(I,O[0],O[1])?O=[]:A>2&&T(O[0],O[1],O[2])&&(O=[O[0]]),m(I,g(O,1),[])});E.exports=y},49975:E=>{E.exports=function W(){return[]}},63580:E=>{E.exports=function W(){return!1}},12232:(E,W,d)=>{var g=d(51467),m=1/0;E.exports=function T(y){return y?(y=g(y))===m||y===-m?17976931348623157e292*(y<0?-1:1):y==y?y:0:0===y?y:0}},44401:(E,W,d)=>{var g=d(12232);E.exports=function m(S){var T=g(S),y=T%1;return T==T?y?T-y:T:0}},51467:(E,W,d)=>{var g=d(83348),m=d(25940),S=d(44129),y=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,O=/^0o[0-7]+$/i,A=parseInt;E.exports=function N(B){if("number"==typeof B)return B;if(S(B))return NaN;if(m(B)){var k="function"==typeof B.valueOf?B.valueOf():B;B=m(k)?k+"":k}if("string"!=typeof B)return 0===B?B:+B;B=g(B);var X=I.test(B);return X||O.test(B)?A(B.slice(2),X?2:8):y.test(B)?NaN:+B}},8067:(E,W,d)=>{var g=d(31989),m=d(16555);E.exports=function S(T){return g(T,m(T))}},73943:(E,W,d)=>{var g=d(93935);E.exports=function m(S){return null==S?"":g(S)}},89416:(E,W,d)=>{var g=d(96837),m=d(78858),S=d(45184),T=d(96517),y=d(29519),I=d(21503),O=d(80891),A=d(75946),N=d(25940),B=d(48159);E.exports=function k(X,q,ue){var r=I(X),ae=r||O(X)||B(X);if(q=T(q,4),null==ue){var de=X&&X.constructor;ue=ae?r?new de:[]:N(X)&&A(de)?m(y(X)):{}}return(ae?g:S)(X,function(le,K,ge){return q(ue,le,K,ge)}),ue}},68921:(E,W,d)=>{var g=d(50686),m=d(23269),S=d(80707),T=d(21330),y=m(function(I){return S(g(I,1,T,!0))});E.exports=y},51541:(E,W,d)=>{var g=d(73943),m=0;E.exports=function S(T){var y=++m;return g(T)+y}},90377:(E,W,d)=>{var g=d(19179),m=d(118);E.exports=function S(T){return null==T?[]:g(T,m(T))}},21617:(E,W,d)=>{var g=d(89719),m=d(38645);E.exports=function S(T,y){return m(T||[],y||[],g)}},29610:function(E){E.exports=function(){var W="1.13.2",d="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},g=Array.prototype,m=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,T=g.push,y=g.slice,I=m.toString,O=m.hasOwnProperty,A="undefined"!=typeof ArrayBuffer,N="undefined"!=typeof DataView,B=Array.isArray,k=Object.keys,X=Object.create,q=A&&ArrayBuffer.isView,ue=isNaN,r=isFinite,ae=!{toString:null}.propertyIsEnumerable("toString"),de=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],le=Math.pow(2,53)-1;function K(R,J){return J=null==J?R.length-1:+J,function(){for(var se=Math.max(arguments.length-J,0),me=Array(se),ke=0;ke<se;ke++)me[ke]=arguments[ke+J];switch(J){case 0:return R.call(this,me);case 1:return R.call(this,arguments[0],me);case 2:return R.call(this,arguments[0],arguments[1],me)}var Ee=Array(J+1);for(ke=0;ke<J;ke++)Ee[ke]=arguments[ke];return Ee[J]=me,R.apply(this,Ee)}}function ge(R){var J=typeof R;return"function"===J||"object"===J&&!!R}function Se(R){return void 0===R}function Oe(R){return!0===R||!1===R||"[object Boolean]"===I.call(R)}function b(R){var J="[object "+R+"]";return function(se){return I.call(se)===J}}var Ge=b("String"),at=b("Number"),ze=b("Date"),Fe=b("RegExp"),Ne=b("Error"),tt=b("Symbol"),Xe=b("ArrayBuffer"),mt=b("Function");"object"!=typeof Int8Array&&"function"!=typeof(d.document&&d.document.childNodes)&&(mt=function(R){return"function"==typeof R||!1});var gt=mt,Zt=b("Object"),un=N&&Zt(new DataView(new ArrayBuffer(8))),Vn="undefined"!=typeof Map&&Zt(new Map),Kn=b("DataView"),Hn=un?function(R){return null!=R&&gt(R.getInt8)&&Xe(R.buffer)}:Kn,dr=B||b("Array");function Un(R,J){return null!=R&&O.call(R,J)}var $e=b("Arguments");!function(){$e(arguments)||($e=function(R){return Un(R,"callee")})}();var Je=$e;function ct(R){return at(R)&&ue(R)}function xt(R){return function(){return R}}function Ot(R){return function(J){var se=R(J);return"number"==typeof se&&se>=0&&se<=le}}function ln(R){return function(J){return null==J?void 0:J[R]}}var Fn=ln("byteLength"),sr=Ot(Fn),co=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,dn=A?function(R){return q?q(R)&&!Hn(R):sr(R)&&co.test(I.call(R))}:xt(!1),en=ln("length");function F(R,J){J=function(Be){for(var nt={},l=Be.length,f=0;f<l;++f)nt[Be[f]]=!0;return{contains:function(_){return!0===nt[_]},push:function(_){return nt[_]=!0,Be.push(_)}}}(J);var se=de.length,me=R.constructor,ke=gt(me)&&me.prototype||m,Ee="constructor";for(Un(R,Ee)&&!J.contains(Ee)&&J.push(Ee);se--;)(Ee=de[se])in R&&R[Ee]!==ke[Ee]&&!J.contains(Ee)&&J.push(Ee)}function G(R){if(!ge(R))return[];if(k)return k(R);var J=[];for(var se in R)Un(R,se)&&J.push(se);return ae&&F(R,J),J}function re(R,J){var se=G(J),me=se.length;if(null==R)return!me;for(var ke=Object(R),Ee=0;Ee<me;Ee++){var Be=se[Ee];if(J[Be]!==ke[Be]||!(Be in ke))return!1}return!0}function xe(R){return R instanceof xe?R:this instanceof xe?void(this._wrapped=R):new xe(R)}function Ke(R){return new Uint8Array(R.buffer||R,R.byteOffset||0,Fn(R))}xe.VERSION=W,xe.prototype.valueOf=xe.prototype.toJSON=xe.prototype.value=function(){return this._wrapped},xe.prototype.toString=function(){return String(this._wrapped)};var qe="[object DataView]";function Ct(R,J,se,me){if(R===J)return 0!==R||1/R==1/J;if(null==R||null==J)return!1;if(R!=R)return J!=J;var ke=typeof R;return("function"===ke||"object"===ke||"object"==typeof J)&&function Ee(Be,nt,l,f){Be instanceof xe&&(Be=Be._wrapped),nt instanceof xe&&(nt=nt._wrapped);var _=I.call(Be);if(_!==I.call(nt))return!1;if(un&&"[object Object]"==_&&Hn(Be)){if(!Hn(nt))return!1;_=qe}switch(_){case"[object RegExp]":case"[object String]":return""+Be==""+nt;case"[object Number]":return+Be!=+Be?+nt!=+nt:0==+Be?1/+Be==1/nt:+Be==+nt;case"[object Date]":case"[object Boolean]":return+Be==+nt;case"[object Symbol]":return S.valueOf.call(Be)===S.valueOf.call(nt);case"[object ArrayBuffer]":case qe:return Ee(Ke(Be),Ke(nt),l,f)}var w="[object Array]"===_;if(!w&&dn(Be)){if(Fn(Be)!==Fn(nt))return!1;if(Be.buffer===nt.buffer&&Be.byteOffset===nt.byteOffset)return!0;w=!0}if(!w){if("object"!=typeof Be||"object"!=typeof nt)return!1;var D=Be.constructor,H=nt.constructor;if(D!==H&&!(gt(D)&&D instanceof D&&gt(H)&&H instanceof H)&&"constructor"in Be&&"constructor"in nt)return!1}f=f||[];for(var Y=(l=l||[]).length;Y--;)if(l[Y]===Be)return f[Y]===nt;if(l.push(Be),f.push(nt),w){if((Y=Be.length)!==nt.length)return!1;for(;Y--;)if(!Ct(Be[Y],nt[Y],l,f))return!1}else{var pe,ce=G(Be);if(Y=ce.length,G(nt).length!==Y)return!1;for(;Y--;)if(!Un(nt,pe=ce[Y])||!Ct(Be[pe],nt[pe],l,f))return!1}return l.pop(),f.pop(),!0}(R,J,se,me)}function Bt(R){if(!ge(R))return[];var J=[];for(var se in R)J.push(se);return ae&&F(R,J),J}function on(R){var J=en(R);return function(se){if(null==se)return!1;var me=Bt(se);if(en(me))return!1;for(var ke=0;ke<J;ke++)if(!gt(se[R[ke]]))return!1;return R!==eo||!gt(se[bn])}}var bn="forEach",mn=["clear","delete"],vr=["get","has","set"],fr=mn.concat(bn,vr),eo=mn.concat(vr),Yn=["add"].concat(mn,bn,"has"),yr=Vn?on(fr):b("Map"),hr=Vn?on(eo):b("WeakMap"),_r=Vn?on(Yn):b("Set"),$r=b("WeakSet");function gi(R){for(var J=G(R),se=J.length,me=Array(se),ke=0;ke<se;ke++)me[ke]=R[J[ke]];return me}function xr(R){for(var J={},se=G(R),me=0,ke=se.length;me<ke;me++)J[R[se[me]]]=se[me];return J}function vn(R){var J=[];for(var se in R)gt(R[se])&&J.push(se);return J.sort()}function mi(R,J){return function(se){var me=arguments.length;if(J&&(se=Object(se)),me<2||null==se)return se;for(var ke=1;ke<me;ke++)for(var Ee=arguments[ke],Be=R(Ee),nt=Be.length,l=0;l<nt;l++){var f=Be[l];J&&void 0!==se[f]||(se[f]=Ee[f])}return se}}var Bo=mi(Bt),Mi=mi(G),Le=mi(Bt,!0);function dt(R){if(!ge(R))return{};if(X)return X(R);var J=function(){};J.prototype=R;var se=new J;return J.prototype=null,se}function nr(R){return dr(R)?R:[R]}function Rr(R){return xe.toPath(R)}function vi(R,J){for(var se=J.length,me=0;me<se;me++){if(null==R)return;R=R[J[me]]}return se?R:void 0}function yi(R,J,se){var me=vi(R,Rr(J));return Se(me)?se:me}function to(R){return R}function Wr(R){return R=Mi({},R),function(J){return re(J,R)}}function wr(R){return R=Rr(R),function(J){return vi(J,R)}}function wo(R,J,se){if(void 0===J)return R;switch(null==se?3:se){case 1:return function(me){return R.call(J,me)};case 3:return function(me,ke,Ee){return R.call(J,me,ke,Ee)};case 4:return function(me,ke,Ee,Be){return R.call(J,me,ke,Ee,Be)}}return function(){return R.apply(J,arguments)}}function os(R,J,se){return null==R?to:gt(R)?wo(R,J,se):ge(R)&&!dr(R)?Wr(R):wr(R)}function ua(R,J){return os(R,J,1/0)}function Yr(R,J,se){return xe.iteratee!==ua?xe.iteratee(R,J):os(R,J,se)}function as(){}function ss(R,J){return null==J&&(J=R,R=0),R+Math.floor(Math.random()*(J-R+1))}xe.toPath=nr,xe.iteratee=ua;var ji=Date.now||function(){return(new Date).getTime()};function us(R){var J=function(Ee){return R[Ee]},se="(?:"+G(R).join("|")+")",me=RegExp(se),ke=RegExp(se,"g");return function(Ee){return me.test(Ee=null==Ee?"":""+Ee)?Ee.replace(ke,J):Ee}}var Oa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ls=us(Oa),Vo=us(xr(Oa)),Is=xe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},La=/(.)^/,fo={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ru=/\\|'|\r|\n|\u2028|\u2029/g;function la(R){return"\\"+fo[R]}var Ps=/^\s*(\w|\$)+\s*$/,Ms=0;function Ho(R,J,se,me,ke){if(!(me instanceof J))return R.apply(se,ke);var Ee=dt(R.prototype),Be=R.apply(Ee,ke);return ge(Be)?Be:Ee}var So=K(function(R,J){var se=So.placeholder,me=function(){for(var ke=0,Ee=J.length,Be=Array(Ee),nt=0;nt<Ee;nt++)Be[nt]=J[nt]===se?arguments[ke++]:J[nt];for(;ke<arguments.length;)Be.push(arguments[ke++]);return Ho(R,me,this,this,Be)};return me});So.placeholder=xe;var ca=K(function(R,J,se){if(!gt(R))throw new TypeError("Bind must be called on a function");var me=K(function(ke){return Ho(R,me,J,this,se.concat(ke))});return me}),Fr=Ot(en);function To(R,J,se,me){if(me=me||[],J||0===J){if(J<=0)return me.concat(R)}else J=1/0;for(var ke=me.length,Ee=0,Be=en(R);Ee<Be;Ee++){var nt=R[Ee];if(Fr(nt)&&(dr(nt)||Je(nt)))if(J>1)To(nt,J-1,se,me),ke=me.length;else for(var l=0,f=nt.length;l<f;)me[ke++]=nt[l++];else se||(me[ke++]=nt)}return me}var iu=K(function(R,J){var se=(J=To(J,!1,!1)).length;if(se<1)throw new Error("bindAll must be passed function names");for(;se--;){var me=J[se];R[me]=ca(R[me],R)}return R}),Ra=K(function(R,J,se){return setTimeout(function(){return R.apply(null,se)},J)}),cs=So(Ra,xe,1);function jo(R){return function(){return!R.apply(this,arguments)}}function ht(R,J){var se;return function(){return--R>0&&(se=J.apply(this,arguments)),R<=1&&(J=null),se}}var Nr=So(ht,2);function zi(R,J,se){J=Yr(J,se);for(var me,ke=G(R),Ee=0,Be=ke.length;Ee<Be;Ee++)if(J(R[me=ke[Ee]],me,R))return me}function Pr(R){return function(J,se,me){se=Yr(se,me);for(var ke=en(J),Ee=R>0?0:ke-1;Ee>=0&&Ee<ke;Ee+=R)if(se(J[Ee],Ee,J))return Ee;return-1}}var zo=Pr(1),Gi=Pr(-1);function Br(R,J,se,me){for(var ke=(se=Yr(se,me,1))(J),Ee=0,Be=en(R);Ee<Be;){var nt=Math.floor((Ee+Be)/2);se(R[nt])<ke?Ee=nt+1:Be=nt}return Ee}function _i(R,J,se){return function(me,ke,Ee){var Be=0,nt=en(me);if("number"==typeof Ee)R>0?Be=Ee>=0?Ee:Math.max(Ee+nt,Be):nt=Ee>=0?Math.min(Ee+1,nt):Ee+nt+1;else if(se&&Ee&&nt)return me[Ee=se(me,ke)]===ke?Ee:-1;if(ke!=ke)return(Ee=J(y.call(me,Be,nt),ct))>=0?Ee+Be:-1;for(Ee=R>0?Be:nt-1;Ee>=0&&Ee<nt;Ee+=R)if(me[Ee]===ke)return Ee;return-1}}var no=_i(1,zo,Br),da=_i(-1,Gi);function Vr(R,J,se){var me=(Fr(R)?zo:zi)(R,J,se);if(void 0!==me&&-1!==me)return R[me]}function Ai(R,J,se){var me,ke;if(J=wo(J,se),Fr(R))for(me=0,ke=R.length;me<ke;me++)J(R[me],me,R);else{var Ee=G(R);for(me=0,ke=Ee.length;me<ke;me++)J(R[Ee[me]],Ee[me],R)}return R}function or(R,J,se){J=Yr(J,se);for(var me=!Fr(R)&&G(R),ke=(me||R).length,Ee=Array(ke),Be=0;Be<ke;Be++){var nt=me?me[Be]:Be;Ee[Be]=J(R[nt],nt,R)}return Ee}function Zn(R){var J=function(se,me,ke,Ee){var Be=!Fr(se)&&G(se),nt=(Be||se).length,l=R>0?0:nt-1;for(Ee||(ke=se[Be?Be[l]:l],l+=R);l>=0&&l<nt;l+=R){var f=Be?Be[l]:l;ke=me(ke,se[f],f,se)}return ke};return function(se,me,ke,Ee){var Be=arguments.length>=3;return J(se,wo(me,Ee,4),ke,Be)}}var Ui=Zn(1),Hr=Zn(-1);function oi(R,J,se){var me=[];return J=Yr(J,se),Ai(R,function(ke,Ee,Be){J(ke,Ee,Be)&&me.push(ke)}),me}function Cn(R,J,se){J=Yr(J,se);for(var me=!Fr(R)&&G(R),ke=(me||R).length,Ee=0;Ee<ke;Ee++){var Be=me?me[Ee]:Ee;if(!J(R[Be],Be,R))return!1}return!0}function jr(R,J,se){J=Yr(J,se);for(var me=!Fr(R)&&G(R),ke=(me||R).length,Ee=0;Ee<ke;Ee++){var Be=me?me[Ee]:Ee;if(J(R[Be],Be,R))return!0}return!1}function Xr(R,J,se,me){return Fr(R)||(R=gi(R)),("number"!=typeof se||me)&&(se=0),no(R,J,se)>=0}var Go=K(function(R,J,se){var me,ke;return gt(J)?ke=J:(J=Rr(J),me=J.slice(0,-1),J=J[J.length-1]),or(R,function(Ee){var Be=ke;if(!Be){if(me&&me.length&&(Ee=vi(Ee,me)),null==Ee)return;Be=Ee[J]}return null==Be?Be:Be.apply(Ee,se)})});function ho(R,J){return or(R,wr(J))}function Na(R,J,se){var me,ke,Ee=-1/0,Be=-1/0;if(null==J||"number"==typeof J&&"object"!=typeof R[0]&&null!=R)for(var nt=0,l=(R=Fr(R)?R:gi(R)).length;nt<l;nt++)null!=(me=R[nt])&&me>Ee&&(Ee=me);else J=Yr(J,se),Ai(R,function(f,_,w){((ke=J(f,_,w))>Be||ke===-1/0&&Ee===-1/0)&&(Ee=f,Be=ke)});return Ee}var fa=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ha(R){return R?dr(R)?y.call(R):Ge(R)?R.match(fa):Fr(R)?or(R,to):gi(R):[]}function Da(R,J,se){if(null==J||se)return Fr(R)||(R=gi(R)),R[ss(R.length-1)];var me=ha(R),ke=en(me);J=Math.max(Math.min(J,ke),0);for(var Ee=ke-1,Be=0;Be<J;Be++){var nt=ss(Be,Ee),l=me[Be];me[Be]=me[nt],me[nt]=l}return me.slice(0,J)}function po(R,J){return function(se,me,ke){var Ee=J?[[],[]]:{};return me=Yr(me,ke),Ai(se,function(Be,nt){var l=me(Be,nt,se);R(Ee,Be,l)}),Ee}}var Fa=po(function(R,J,se){Un(R,se)?R[se].push(J):R[se]=[J]}),As=po(function(R,J,se){R[se]=J}),ou=po(function(R,J,se){Un(R,se)?R[se]++:R[se]=1}),Uo=po(function(R,J,se){R[se?0:1].push(J)},!0);function ks(R,J,se){return J in se}var $i=K(function(R,J){var se={},me=J[0];if(null==R)return se;gt(me)?(J.length>1&&(me=wo(me,J[1])),J=Bt(R)):(me=ks,J=To(J,!1,!1),R=Object(R));for(var ke=0,Ee=J.length;ke<Ee;ke++){var Be=J[ke],nt=R[Be];me(nt,Be,R)&&(se[Be]=nt)}return se}),pa=K(function(R,J){var se,me=J[0];return gt(me)?(me=jo(me),J.length>1&&(se=J[1])):(J=or(To(J,!1,!1),String),me=function(ke,Ee){return!Xr(J,Ee)}),$i(R,me,se)});function ga(R,J,se){return y.call(R,0,Math.max(0,R.length-(null==J||se?1:J)))}function ma(R,J,se){return null==R||R.length<1?null==J||se?void 0:[]:null==J||se?R[0]:ga(R,R.length-J)}function go(R,J,se){return y.call(R,null==J||se?1:J)}var Mr=K(function(R,J){return J=To(J,!0,!0),oi(R,function(se){return!Xr(J,se)})}),Eo=K(function(R,J){return Mr(R,J)});function Dt(R,J,se,me){Oe(J)||(me=se,se=J,J=!1),null!=se&&(se=Yr(se,me));for(var ke=[],Ee=[],Be=0,nt=en(R);Be<nt;Be++){var l=R[Be],f=se?se(l,Be,R):l;J&&!se?(Be&&Ee===f||ke.push(l),Ee=f):se?Xr(Ee,f)||(Ee.push(f),ke.push(l)):Xr(ke,l)||ke.push(l)}return ke}var Io=K(function(R){return Dt(To(R,!0,!0))});function mo(R){for(var J=R&&Na(R,en).length||0,se=Array(J),me=0;me<J;me++)se[me]=ho(R,me);return se}var jn=K(mo);function zn(R,J){return R._chain?xe(J).chain():J}function Ba(R){return Ai(vn(R),function(J){var se=xe[J]=R[J];xe.prototype[J]=function(){var me=[this._wrapped];return T.apply(me,arguments),zn(this,se.apply(xe,me))}}),xe}Ai(["pop","push","reverse","shift","sort","splice","unshift"],function(R){var J=g[R];xe.prototype[R]=function(){var se=this._wrapped;return null!=se&&(J.apply(se,arguments),"shift"!==R&&"splice"!==R||0!==se.length||delete se[0]),zn(this,se)}}),Ai(["concat","join","slice"],function(R){var J=g[R];xe.prototype[R]=function(){var se=this._wrapped;return null!=se&&(se=J.apply(se,arguments)),zn(this,se)}});var ds=Ba({__proto__:null,VERSION:W,restArguments:K,isObject:ge,isNull:function(R){return null===R},isUndefined:Se,isBoolean:Oe,isElement:function(R){return!(!R||1!==R.nodeType)},isString:Ge,isNumber:at,isDate:ze,isRegExp:Fe,isError:Ne,isSymbol:tt,isArrayBuffer:Xe,isDataView:Hn,isArray:dr,isFunction:gt,isArguments:Je,isFinite:function(R){return!tt(R)&&r(R)&&!isNaN(parseFloat(R))},isNaN:ct,isTypedArray:dn,isEmpty:function(R){if(null==R)return!0;var J=en(R);return"number"==typeof J&&(dr(R)||Ge(R)||Je(R))?0===J:0===en(G(R))},isMatch:re,isEqual:function(R,J){return Ct(R,J)},isMap:yr,isWeakMap:hr,isSet:_r,isWeakSet:$r,keys:G,allKeys:Bt,values:gi,pairs:function(R){for(var J=G(R),se=J.length,me=Array(se),ke=0;ke<se;ke++)me[ke]=[J[ke],R[J[ke]]];return me},invert:xr,functions:vn,methods:vn,extend:Bo,extendOwn:Mi,assign:Mi,defaults:Le,create:function(R,J){var se=dt(R);return J&&Mi(se,J),se},clone:function(R){return ge(R)?dr(R)?R.slice():Bo({},R):R},tap:function(R,J){return J(R),R},get:yi,has:function(R,J){for(var se=(J=Rr(J)).length,me=0;me<se;me++){var ke=J[me];if(!Un(R,ke))return!1;R=R[ke]}return!!se},mapObject:function(R,J,se){J=Yr(J,se);for(var me=G(R),ke=me.length,Ee={},Be=0;Be<ke;Be++){var nt=me[Be];Ee[nt]=J(R[nt],nt,R)}return Ee},identity:to,constant:xt,noop:as,toPath:nr,property:wr,propertyOf:function(R){return null==R?as:function(J){return yi(R,J)}},matcher:Wr,matches:Wr,times:function(R,J,se){var me=Array(Math.max(0,R));J=wo(J,se,1);for(var ke=0;ke<R;ke++)me[ke]=J(ke);return me},random:ss,now:ji,escape:ls,unescape:Vo,templateSettings:Is,template:function(R,J,se){!J&&se&&(J=se),J=Le({},J,xe.templateSettings);var me=RegExp([(J.escape||La).source,(J.interpolate||La).source,(J.evaluate||La).source].join("|")+"|$","g"),ke=0,Ee="__p+='";R.replace(me,function(f,_,w,D,H){return Ee+=R.slice(ke,H).replace(ru,la),ke=H+f.length,_?Ee+="'+\n((__t=("+_+"))==null?'':_.escape(__t))+\n'":w?Ee+="'+\n((__t=("+w+"))==null?'':__t)+\n'":D&&(Ee+="';\n"+D+"\n__p+='"),f}),Ee+="';\n";var Be,nt=J.variable;if(nt){if(!Ps.test(nt))throw new Error("variable is not a bare identifier: "+nt)}else Ee="with(obj||{}){\n"+Ee+"}\n",nt="obj";Ee="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Ee+"return __p;\n";try{Be=new Function(nt,"_",Ee)}catch(f){throw f.source=Ee,f}var l=function(f){return Be.call(this,f,xe)};return l.source="function("+nt+"){\n"+Ee+"}",l},result:function(R,J,se){var me=(J=Rr(J)).length;if(!me)return gt(se)?se.call(R):se;for(var ke=0;ke<me;ke++){var Ee=null==R?void 0:R[J[ke]];void 0===Ee&&(Ee=se,ke=me),R=gt(Ee)?Ee.call(R):Ee}return R},uniqueId:function(R){var J=++Ms+"";return R?R+J:J},chain:function(R){var J=xe(R);return J._chain=!0,J},iteratee:ua,partial:So,bind:ca,bindAll:iu,memoize:function(R,J){var se=function(me){var ke=se.cache,Ee=""+(J?J.apply(this,arguments):me);return Un(ke,Ee)||(ke[Ee]=R.apply(this,arguments)),ke[Ee]};return se.cache={},se},delay:Ra,defer:cs,throttle:function(R,J,se){var me,ke,Ee,Be,nt=0;se||(se={});var l=function(){nt=!1===se.leading?0:ji(),me=null,Be=R.apply(ke,Ee),me||(ke=Ee=null)},f=function(){var _=ji();nt||!1!==se.leading||(nt=_);var w=J-(_-nt);return ke=this,Ee=arguments,w<=0||w>J?(me&&(clearTimeout(me),me=null),nt=_,Be=R.apply(ke,Ee),me||(ke=Ee=null)):me||!1===se.trailing||(me=setTimeout(l,w)),Be};return f.cancel=function(){clearTimeout(me),nt=0,me=ke=Ee=null},f},debounce:function(R,J,se){var me,ke,Ee,Be,nt,l=function(){var _=ji()-ke;J>_?me=setTimeout(l,J-_):(me=null,se||(Be=R.apply(nt,Ee)),me||(Ee=nt=null))},f=K(function(_){return nt=this,Ee=_,ke=ji(),me||(me=setTimeout(l,J),se&&(Be=R.apply(nt,Ee))),Be});return f.cancel=function(){clearTimeout(me),me=Ee=nt=null},f},wrap:function(R,J){return So(J,R)},negate:jo,compose:function(){var R=arguments,J=R.length-1;return function(){for(var se=J,me=R[J].apply(this,arguments);se--;)me=R[se].call(this,me);return me}},after:function(R,J){return function(){if(--R<1)return J.apply(this,arguments)}},before:ht,once:Nr,findKey:zi,findIndex:zo,findLastIndex:Gi,sortedIndex:Br,indexOf:no,lastIndexOf:da,find:Vr,detect:Vr,findWhere:function(R,J){return Vr(R,Wr(J))},each:Ai,forEach:Ai,map:or,collect:or,reduce:Ui,foldl:Ui,inject:Ui,reduceRight:Hr,foldr:Hr,filter:oi,select:oi,reject:function(R,J,se){return oi(R,jo(Yr(J)),se)},every:Cn,all:Cn,some:jr,any:jr,contains:Xr,includes:Xr,include:Xr,invoke:Go,pluck:ho,where:function(R,J){return oi(R,Wr(J))},max:Na,min:function(R,J,se){var me,ke,Ee=1/0,Be=1/0;if(null==J||"number"==typeof J&&"object"!=typeof R[0]&&null!=R)for(var nt=0,l=(R=Fr(R)?R:gi(R)).length;nt<l;nt++)null!=(me=R[nt])&&me<Ee&&(Ee=me);else J=Yr(J,se),Ai(R,function(f,_,w){((ke=J(f,_,w))<Be||ke===1/0&&Ee===1/0)&&(Ee=f,Be=ke)});return Ee},shuffle:function(R){return Da(R,1/0)},sample:Da,sortBy:function(R,J,se){var me=0;return J=Yr(J,se),ho(or(R,function(ke,Ee,Be){return{value:ke,index:me++,criteria:J(ke,Ee,Be)}}).sort(function(ke,Ee){var Be=ke.criteria,nt=Ee.criteria;if(Be!==nt){if(Be>nt||void 0===Be)return 1;if(Be<nt||void 0===nt)return-1}return ke.index-Ee.index}),"value")},groupBy:Fa,indexBy:As,countBy:ou,partition:Uo,toArray:ha,size:function(R){return null==R?0:Fr(R)?R.length:G(R).length},pick:$i,omit:pa,first:ma,head:ma,take:ma,initial:ga,last:function(R,J,se){return null==R||R.length<1?null==J||se?void 0:[]:null==J||se?R[R.length-1]:go(R,Math.max(0,R.length-J))},rest:go,tail:go,drop:go,compact:function(R){return oi(R,Boolean)},flatten:function(R,J){return To(R,J,!1)},without:Eo,uniq:Dt,unique:Dt,union:Io,intersection:function(R){for(var J=[],se=arguments.length,me=0,ke=en(R);me<ke;me++){var Ee=R[me];if(!Xr(J,Ee)){var Be;for(Be=1;Be<se&&Xr(arguments[Be],Ee);Be++);Be===se&&J.push(Ee)}}return J},difference:Mr,unzip:mo,transpose:mo,zip:jn,object:function(R,J){for(var se={},me=0,ke=en(R);me<ke;me++)J?se[R[me]]=J[me]:se[R[me][0]]=R[me][1];return se},range:function(R,J,se){null==J&&(J=R||0,R=0),se||(se=J<R?-1:1);for(var me=Math.max(Math.ceil((J-R)/se),0),ke=Array(me),Ee=0;Ee<me;Ee++,R+=se)ke[Ee]=R;return ke},chunk:function(R,J){if(null==J||J<1)return[];for(var se=[],me=0,ke=R.length;me<ke;)se.push(y.call(R,me,me+=J));return se},mixin:Ba,default:xe});return ds._=ds,ds}()}}]);