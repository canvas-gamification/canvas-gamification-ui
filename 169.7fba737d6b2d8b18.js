"use strict";(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[169],{76169:(Lt,D,r)=>{r.r(D),r.d(D,{AdminModule:()=>Pt});var p=r(69808),c=r(78697),t=(r(52014),r(5e3));r(28634),r(95489),r(33186),r(73442);let Q=(()=>{let n=class{};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({}),n})();var F=r(50284),v=r(45806),y=r(25635),S=r(14992),P=r(41840),f=r(71105),E=r(84443),b=r(95428),m=r(37080),T=r(93075),I=r(46693),h=r(56249),C=r(22079),N=r(61279),O=r(9419),j=r(9232),L=r(99848),U=r(43567),H=r(6741),z=r(75197),M=r(27221),w=r(40520),x=r(93514);let B=(()=>{class n{constructor(e,o){this.http=e,this.apiService=o}getQuestionCount(){const e=this.apiService.getURL("admin/question-count");return this.http.get(e).pipe((0,M.K)(this.apiService.handleError("Unable to get question counts",[])))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(w.eN),t.\u0275\u0275inject(x.s))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function W(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,o=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",a.getDifficultyPerCountLabel(e,o)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(a.getDifficultyPerCountValue(e,o))}}function K(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-island",12)(1,"h3",1),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"tui-ring-chart",13),t.\u0275\u0275template(4,W,4,2,"ng-template",null,14,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,o=t.\u0275\u0275reference(5),a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("content",o)("value",a.getCountPerDifficultyValues(e.count_per_difficulty))}}function G(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275template(1,K,6,3,"tui-island",11),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.questionCountData)}}function J(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Name "),t.\u0275\u0275elementEnd())}function X(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Count "),t.\u0275\u0275elementEnd())}function Y(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Count Per Difficulty "),t.\u0275\u0275elementEnd())}function Z(n,i){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1," ,\xa0 "),t.\u0275\u0275elementEnd())}function q(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275template(2,Z,2,0,"span",7),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit,o=i.index,a=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",e.count," ",e.difficulty," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o!==a.count_per_difficulty.length-1)}}function tt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",24),t.\u0275\u0275template(1,q,3,3,"ng-container",25),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.count_per_difficulty)}}function et(n,i){1&n&&(t.\u0275\u0275elementStart(0,"tr",22),t.\u0275\u0275template(1,tt,2,1,"td",23),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","count_per_difficulty"))}function nt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"table",16)(1,"thead")(2,"tr",17),t.\u0275\u0275template(3,J,2,0,"th",18),t.\u0275\u0275template(4,X,2,0,"th",18),t.\u0275\u0275template(5,Y,2,0,"th",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"tbody",19),t.\u0275\u0275template(7,et,2,1,"tr",20),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("columns",e.questionCountDataHeader),t.\u0275\u0275advance(3),t.\u0275\u0275property("tuiHead","name"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","count"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","count_per_difficulty"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",e.questionCountData),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",e.questionCountData)}}function it(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,G,2,1,"div",8),t.\u0275\u0275template(2,nt,8,6,"table",9),t.\u0275\u0275elementContainerEnd()),2&n){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===e.activeItemIndex),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1===e.activeItemIndex)}}let ot=(()=>{class n{constructor(e,o){this.questionCountService=e,this.changeDetector=o}ngOnInit(){this.questionCountService.getQuestionCount().subscribe(e=>{this.questionCountData=e,this.questionCountDataHeader=Object.keys(e[0]),this.openGraphDropdown=Array(e.length).fill(!1)})}ngAfterContentInit(){this.changeDetector.detectChanges()}getCountPerDifficultyValues(e){return e.map(o=>o.count)}getDifficultyPerCountValue(e,o){var a;return Number.isNaN(e)?"Questions":null===(a=o.count_per_difficulty[e])||void 0===a?void 0:a.difficulty}getDifficultyPerCountLabel(e,o){var a;return Number.isNaN(e)?o.count:null===(a=o.count_per_difficulty[e])||void 0===a?void 0:a.count}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(B),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-question-count"]],decls:11,vars:3,consts:[[1,"tui-space_bottom-8"],[1,"tui-island__title"],[1,"tui-space_bottom-4"],["tabsComponent",""],["aria-label","Card View","tuiTab",""],["aria-label","Table View","tuiTab",""],[3,"overlay","showLoader"],[4,"ngIf"],["class","count-islands",4,"ngIf"],["class","count-table","tuiTable","",3,"columns",4,"ngIf"],[1,"count-islands"],["textAlign","center",4,"ngFor","ngForOf"],["textAlign","center"],[1,"tui-space_auto",3,"content","value"],["chartContent",""],[1,"tui-text_body-xl","tui-text_bold"],["tuiTable","",1,"count-table",3,"columns"],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"tui-island",0)(1,"h2",1),t.\u0275\u0275text(2,"Question Counts"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"tui-tabs",2,3)(5,"button",4),t.\u0275\u0275text(6,"Card View"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",5),t.\u0275\u0275text(8,"Table View"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"tui-loader",6),t.\u0275\u0275template(10,it,3,2,"ng-container",7),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("overlay",!0)("showLoader",!o.questionCountData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.questionCountData))},directives:[f.h,m.H9,m.yu,C.kM,p.O5,p.sg,j.i,c.c4,c.EE,c.DZ,c.Ws,c.jY,c.LU,c.fu,c.Bl,c.Kt],styles:[".count-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.count-table[_ngcontent-%COMP%]{width:100%}"]}),n})();var at=r(22307);let rt=(()=>{class n{constructor(e,o){this.http=e,this.apiService=o}getCategoryStats(){const e=this.apiService.getURL("admin/category-stats");return this.http.get(e).pipe((0,M.K)(this.apiService.handleError("Unable to get category stats",[])))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(w.eN),t.\u0275\u0275inject(x.s))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-island")(1,"h3",0),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"p",12),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"p",12),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p",12),t.\u0275\u0275text(8," Unknown success rate "),t.\u0275\u0275elementEnd()()),2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.name," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.description," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.question_count," Questions ")}}function ct(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275template(1,lt,9,3,"tui-island",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"button",15),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e).$implicit.complete()}),t.\u0275\u0275text(3," Close "),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.children)}}function st(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-island"),t.\u0275\u0275template(1,ct,4,1,"ng-template",null,11,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(3,"h3",0),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"p",12),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p",12),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p",12),t.\u0275\u0275text(10," Unknown success rate "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",13),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275reference(2);return t.\u0275\u0275nextContext(3).openCategoryStatsDialog(l.category.name,s)}),t.\u0275\u0275text(12," View Details "),t.\u0275\u0275elementEnd()()}if(2&n){const e=i.$implicit;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",e.category.name," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.description," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.category.question_count," Questions ")}}function pt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"div",9),t.\u0275\u0275template(1,st,13,3,"tui-island",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.categoryStatsData)}}function ut(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Category "),t.\u0275\u0275elementEnd())}function dt(n,i){1&n&&(t.\u0275\u0275elementStart(0,"th",21),t.\u0275\u0275text(1," Children "),t.\u0275\u0275elementEnd())}function mt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",24),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.category.name," ")}}function _t(n,i){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1," ,\xa0 "),t.\u0275\u0275elementEnd())}function gt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275template(2,_t,2,0,"span",6),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit,o=i.index,a=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.category.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o!==a.children.length-1)}}function ft(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"td",24),t.\u0275\u0275template(1,gt,3,2,"span",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.children)}}function ht(n,i){1&n&&(t.\u0275\u0275elementStart(0,"tr",22),t.\u0275\u0275template(1,mt,2,1,"td",23),t.\u0275\u0275template(2,ft,2,1,"td",23),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","category"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","children"))}function Ct(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"table",16)(1,"thead")(2,"tr",17),t.\u0275\u0275template(3,ut,2,0,"th",18),t.\u0275\u0275template(4,dt,2,0,"th",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"tbody",19),t.\u0275\u0275template(6,ht,3,2,"tr",20),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("columns",e.categoryStatsDataHeader),t.\u0275\u0275advance(3),t.\u0275\u0275property("tuiHead","category"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","children"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",e.categoryStatsData),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",e.categoryStatsData)}}function xt(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,pt,2,1,"div",7),t.\u0275\u0275template(2,Ct,7,5,"table",8),t.\u0275\u0275elementContainerEnd()),2&n){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===e.activeItemIndex),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1===e.activeItemIndex)}}let vt=(()=>{class n{constructor(e,o,a){this.categoryStatsService=e,this.changeDetector=o,this.dialogService=a}ngOnInit(){this.categoryStatsService.getCategoryStats().subscribe(e=>{this.categoryStatsData=e,this.categoryStatsDataHeader=Object.keys(e[0])})}ngAfterContentInit(){this.changeDetector.detectChanges()}openCategoryStatsDialog(e,o){this.dialogService.open(o,{closeable:!1,size:"l",label:e}).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(rt),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(at.RO))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-category-stats"]],decls:11,vars:3,consts:[[1,"tui-island__title"],[1,"tui-space_bottom-4"],["tabsComponent",""],["aria-label","Card View","tuiTab",""],["aria-label","Table View","tuiTab",""],[3,"overlay","showLoader"],[4,"ngIf"],["class","stats-islands",4,"ngIf"],["class","stats-table","tuiTable","",3,"columns",4,"ngIf"],[1,"stats-islands"],[4,"ngFor","ngForOf"],["categoryDialog",""],[1,"tui-island__paragraph"],["appearance","flat","size","m","tuiButton","",1,"tui-island__footer-button",3,"click"],[1,"stats-islands","tui-space_bottom-4","tui-space_top-8"],["appearance","primary","size","m","tuiButton","",3,"click"],["tuiTable","",1,"stats-table",3,"columns"],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"tui-island")(1,"h2",0),t.\u0275\u0275text(2,"Category Stats"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"tui-tabs",1,2)(5,"button",3),t.\u0275\u0275text(6,"Card View"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",4),t.\u0275\u0275text(8,"Table View"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"tui-loader",5),t.\u0275\u0275template(10,xt,3,2,"ng-container",6),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(9),t.\u0275\u0275property("overlay",!0)("showLoader",!o.categoryStatsData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.categoryStatsData))},directives:[f.h,m.H9,m.yu,C.kM,p.O5,p.sg,I.v0,c.c4,c.EE,c.DZ,c.Ws,c.jY,c.LU,c.fu,c.Bl,c.Kt],styles:[".stats-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.stats-dialog_islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.stats-table[_ngcontent-%COMP%]{width:100%}"]}),n})(),yt=(()=>{class n{constructor(e,o){this.http=e,this.apiService=o}getCourses(){const e=this.apiService.getURL("admin/courses");return this.http.get(e).pipe((0,M.K)(this.apiService.handleError("Unable to get courses",[])))}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275inject(w.eN),t.\u0275\u0275inject(x.s))},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var St=r(49201);function Et(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-island")(1,"h3",5),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"p",6),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"p",6),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p",6),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()()),2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" URL: ",e.url," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" Start Date: ",e.start_date," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" End Date: ",e.end_date," ")}}let bt=(()=>{class n{constructor(e,o){this.viewCoursesService=e,this.changeDetector=o}ngOnInit(){this.viewCoursesService.getCourses().subscribe(e=>{this.courseData=e})}ngAfterContentInit(){this.changeDetector.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(yt),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-view-courses"]],decls:6,vars:3,consts:[["position","right","sidebarId","adminSidebar","size","l"],[1,"tui-text_h6","tui-space_bottom-4","tui-space_top-6"],[3,"overlay","showLoader"],[1,"courses-islands","tui-space_bottom-6"],[4,"ngFor","ngForOf"],[1,"tui-island__title"],[1,"tui-island__paragraph"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"app-sidebar",0)(1,"h2",1),t.\u0275\u0275text(2,"Courses"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"tui-loader",2)(4,"div",3),t.\u0275\u0275template(5,Et,9,4,"tui-island",4),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("overlay",!0)("showLoader",!o.courseData),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",o.courseData))},directives:[St.k,C.kM,p.sg,f.h],styles:[".courses-islands[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]}),n})(),Tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-admin"]],decls:8,vars:0,consts:[[1,"admin"],[1,"admin-content"],[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.\u0275\u0275text(4,"Admin"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"app-question-count")(6,"app-category-stats"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(7,"app-view-courses"),t.\u0275\u0275elementEnd())},directives:[ot,vt,bt],styles:[".admin[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.admin[_ngcontent-%COMP%]{flex-direction:column}}.admin-content[_ngcontent-%COMP%]{flex:1}"]}),n})();var V=r(48558);function It(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=i.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function Mt(n,i){if(1&n&&(t.\u0275\u0275elementStart(0,"tui-data-list",9),t.\u0275\u0275template(1,It,2,2,"button",10),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.fields)}}function wt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",6)(2,"tui-multi-select",7),t.\u0275\u0275listener("ngModelChange",function(a){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectedFields=a}),t.\u0275\u0275text(3," What fields do you want to export? "),t.\u0275\u0275template(4,Mt,2,1,"tui-data-list",8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",e.selectedFields)}}function Dt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",6)(2,"tui-input",12),t.\u0275\u0275listener("ngModelChange",function(a){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().selectedSearch=a}),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiTextfieldCleaner",!0)("ngModel",e.selectedSearch),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.search," ")}}function Ft(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-input-date",14),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Ot(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-input-number",14),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function jt(n,i){if(1&n&&t.\u0275\u0275element(0,"tui-data-list-wrapper",16),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("items",e.verbs)}}function Ht(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-select",14),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,jt,1,1,"tui-data-list-wrapper",15),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Vt(n,i){if(1&n&&t.\u0275\u0275element(0,"tui-data-list-wrapper",16),2&n){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("items",e.objectTypes)}}function Rt(n,i){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-select",14),t.\u0275\u0275listener("ngModelChange",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext().selectedFilters[l.key]=a}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,Vt,1,1,"tui-data-list-wrapper",15),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext().$implicit,o=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngModel",o.selectedFilters[e.key]),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function kt(n,i){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",6),t.\u0275\u0275template(2,Ft,2,2,"tui-input-date",13),t.\u0275\u0275template(3,Ot,2,2,"tui-input-number",13),t.\u0275\u0275template(4,Ht,3,2,"tui-select",13),t.\u0275\u0275template(5,Rt,3,2,"tui-select",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&n){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","date"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","number"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","verb"===e.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","objectType"===e.type)}}let R=(()=>{class n{constructor(e){this.apiService=e,this.filters=[],this.selectedFields=[],this.selectedSearch="",this.selectedFilters={}}ngOnInit(){this.verbs=Object.values(V.nX),this.objectTypes=Object.values(V.Us),this.selectedFields=this.fields;for(const e of this.filters)this.selectedFilters[e.key]=null}getUrl(){var e;const o=new URLSearchParams({fields:null===(e=this.selectedFields)||void 0===e?void 0:e.join(","),search:this.selectedSearch});for(const a of this.filters){const l=this.selectedFilters[a.key];!l||o.set(a.key,"date"===a.type?new Date(l.toLocalNativeDate().getTime()).toISOString():l)}return this.apiService.getURL("export",this.url)+"?"+o.toString()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(x.s))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-export-snippet"]],inputs:{fields:"fields",url:"url",name:"name",search:"search",filters:"filters"},decls:9,vars:5,consts:[[1,"tui-container","tui-container_adaptive"],[1,"tui-form__header"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","size","m","tuiButton","",3,"href"],[1,"tui-form__row"],["aria-label","Fields",3,"ngModel","ngModelChange"],["tuiMultiSelectGroup","",4,"tuiDataList"],["tuiMultiSelectGroup",""],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"tuiTextfieldCleaner","ngModel","ngModelChange"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"items",4,"tuiDataList"],[3,"items"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(3,wt,5,1,"ng-container",2),t.\u0275\u0275template(4,Dt,4,3,"ng-container",2),t.\u0275\u0275template(5,kt,6,4,"ng-container",3),t.\u0275\u0275elementStart(6,"div",4)(7,"a",5),t.\u0275\u0275text(8," Download "),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" Export ",o.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.fields),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.search),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",o.filters),t.\u0275\u0275advance(2),t.\u0275\u0275property("href",o.getUrl(),t.\u0275\u0275sanitizeUrl))},directives:[p.O5,E.VT,T.NgControlStatus,T.NgModel,h.gX,h.qi,E.Qp,p.sg,h.vK,y.K3,y.wU,O.be,v.jL,v.k_,S.qS,S.g5,b.uJ,b.OI,F.eC,I.v0],styles:[""]}),n})();const At=function(){return["user","time_created","url"]},$t=[{path:"export/page-view",component:(()=>{class n{constructor(){this.filters=[{key:"time_created__gt",name:"Viewed after",type:"date"},{key:"time_created__lt",name:"Viewed before",type:"date"},{key:"user",name:"User ID",type:"number"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-export-page-view-component"]],decls:1,vars:3,consts:[["url","page-view","name","Page Views","search","Search in the url",3,"fields","filters"]],template:function(e,o){1&e&&t.\u0275\u0275element(0,"app-export-snippet",0),2&e&&t.\u0275\u0275property("fields",t.\u0275\u0275pureFunction0(2,At))("filters",o.filters)},directives:[R],styles:[""]}),n})()},{path:"export/action",component:(()=>{class n{constructor(){this.fields=["time_created","time_modified","actor","description","token_change","status","verb","object_type","object_id","data"],this.filters=[{key:"time_created__gt",name:"Acted after",type:"date"},{key:"time_created__lt",name:"Acted before",type:"date"},{key:"actor",name:"Actor user ID",type:"number"},{key:"verb",name:"Verb of the action",type:"verb"},{key:"object_type",name:"Type of the object",type:"objectType"},{key:"object_id",name:"Object ID",type:"number"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-export-action"]],decls:1,vars:2,consts:[["name","User Actions","url","action","search","Search in description and data",3,"fields","filters"]],template:function(e,o){1&e&&t.\u0275\u0275element(0,"app-export-snippet",0),2&e&&t.\u0275\u0275property("fields",o.fields)("filters",o.filters)},directives:[R],styles:[""]}),n})()},{path:"",component:Tt,canActivate:[z.a]}];let Qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[H.Bz.forChild($t)],H.Bz]}),n})(),Pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[Qt,p.ez,T.FormsModule,U.l,I.fN,h.pc,F.zX,L.p,Q,v.hr,y.Qf,S._H,P.$K,f.y,C.dS,E.lm,j.R,N.Jy,b.Jy,c.jz,m.$$,O.cn]]}),n})()}}]);