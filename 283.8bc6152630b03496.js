(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[283],{91283:(P,W,f)=>{"use strict";f.r(W),f.d(W,{CourseModule:()=>Vp});var p={};f.r(p),f.d(p,{ellipseWithEllipse:()=>J,ellipseWithLine:()=>N,exists:()=>ja,lineWithLine:()=>Di,pathWithEllipse:()=>At,pathWithLine:()=>ut,pathWithPath:()=>Xt,pathWithPolygon:()=>Rt,pathWithPolyline:()=>re,pathWithRect:()=>Ht,polygonWithEllipse:()=>R,polygonWithLine:()=>_,polygonWithPolygon:()=>lt,polygonWithPolyline:()=>Y,polygonWithRect:()=>F,polylineWithEllipse:()=>l,polylineWithLine:()=>St,polylineWithPolyline:()=>y,polylineWithRect:()=>d,rectWithEllipse:()=>mt,rectWithLine:()=>at,rectWithRect:()=>Lt});var g={};f.r(g),f.d(g,{Curve:()=>Sn,Ellipse:()=>Tr,Line:()=>be,Path:()=>Ae,Point:()=>ht,Polygon:()=>sn,Polyline:()=>Fn,Rect:()=>de,bezier:()=>Gn,ellipse:()=>os,intersection:()=>Nn,line:()=>qr,normalizeAngle:()=>Zr,point:()=>ci,random:()=>bo,rect:()=>da,scale:()=>Nr,snapToGrid:()=>Li,toDeg:()=>zr,toRad:()=>Sr,types:()=>on});var w={};f.r(w),f.d(w,{absolute:()=>Hf,bottom:()=>ru,ellipse:()=>Mn,ellipseSpread:()=>Zi,fn:()=>nu,left:()=>nc,line:()=>Ls,right:()=>Q,top:()=>fs});var E={};f.r(E),f.d(E,{bottom:()=>Go,inside:()=>Xf,insideOriented:()=>Yf,left:()=>Uf,manual:()=>jf,outside:()=>$f,outsideOriented:()=>Wf,radial:()=>Kf,radialOriented:()=>Wo,right:()=>zf,top:()=>Gf});var x={};f.r(x),f.d(x,{manhattan:()=>il,metro:()=>_n,normal:()=>$u,oneSide:()=>uc,orthogonal:()=>Ya});var I={};f.r(I),f.d(I,{curve:()=>Rs,jumpover:()=>wc,normal:()=>fu,rounded:()=>Sc,smooth:()=>fl});var k={};f.r(k),f.d(k,{addClass:()=>Dc,mask:()=>gs,opacity:()=>Ns,stroke:()=>Lc});var M={};f.r(M),f.d(M,{connectionClosest:()=>pl,connectionLength:()=>pu,connectionPerpendicular:()=>vd,connectionRatio:()=>Fc,resolveRef:()=>Xa});var B={};f.r(B),f.d(B,{anchor:()=>yd,bbox:()=>xd,boundary:()=>yl,rectangle:()=>ea});var H={};f.r(H),f.d(H,{bottom:()=>bl,bottomLeft:()=>oi,bottomRight:()=>Cd,center:()=>Ye,left:()=>Ja,midSide:()=>Uc,modelCenter:()=>wd,perpendicular:()=>_d,right:()=>bd,top:()=>xu,topLeft:()=>Cl,topRight:()=>jc});var O=f(69808),X=f(32205),et=f(6741),ct=f(80998),i=f(5e3),st=f(23146),vt=f(83936),pt=f(25635),nt=f(93075),yt=f(9419),Pt=f(66206),Ft=f(99848);let C=(()=>{class t{transform(n,r){return n.is_teacher||r.is_registered}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:t,pure:!0}),t})();function jt(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&t){const n=e.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",n)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,n))}}function ne(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,jt,3,5,"ng-container",6),i.\u0275\u0275pipe(2,"tuiFilter"),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,n.allCourses,n.matchCourseName,n.courseNameSearch))}}function te(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const ae=function(){return[0,0,0,0,0,0]};function ue(t,e){1&t&&i.\u0275\u0275template(0,te,2,1,"ng-container",6),2&t&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,ae))}let he=(()=>{class t{constructor(n,r,o){this.authenticationService=n,this.route=r,this.courseService=o,this.STATUS=ct.Q,this.courseNameSearch="",this.matchCourseName=(s,c)=>""===c||s.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourses().subscribe(n=>{this.allCourses=n})}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(st.$),i.\u0275\u0275directiveInject(et.gz),i.\u0275\u0275directiveInject(vt.N))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["icon","tuiIconSearchLarge","aria-label","Search Courses",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(s){return r.courseNameSearch=s}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,ne,3,5,"ng-container",4),i.\u0275\u0275template(7,ue,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&n){const o=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",o)}},directives:[pt.K3,pt.wU,nt.NgControlStatus,nt.NgModel,yt.be,O.O5,O.sg,Pt.V],pipes:[Ft.S,C],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})();class Ee{static createNameForm(){return(new nt.FormBuilder).group({nameControl:new nt.FormControl("",[nt.Validators.required])})}static createConfirmNameForm(){return(new nt.FormBuilder).group({confirmNameControl:new nt.FormControl("")})}static createStudentNumberForm(){return(new nt.FormBuilder).group({studentNumberControl:new nt.FormControl("",[nt.Validators.required])})}static createVerifyForm(){return(new nt.FormBuilder).group({verifyControl:new nt.FormControl("",[nt.Validators.required])})}}var Qe=f(4024),fn=f(769),Re=f(46693);function hr(t,e){1&t&&i.\u0275\u0275projection(0,0,["*ngIf","visible"])}const Hr=["*"];let jr=(()=>{class t{constructor(){this.visible=!1}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course-registration-step"]],ngContentSelectors:Hr,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,hr,1,0,"ng-content",0)),2&n&&i.\u0275\u0275property("ngIf",r.visible)},directives:[O.O5],styles:[""]}),t})();var zt=f(52014),Cn=f(28634),mr=f(34530),Bn=f(14335),Ut=f(35640),Et=f(73442),ie=f(33186),pe=f(41065),Te=f(84620),hn=f(35379),Rn=f(18583),rr=f(92198);function ki(t,e){1&t&&i.\u0275\u0275elementContainer(0)}const ln=["*"],Ze=["tuiStep",""];function D(t,e){if(1&t&&i.\u0275\u0275element(0,"tui-svg",4),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("src",n.icon)}}let z=(()=>{let t=class{constructor(){this.steps=Cn.Mm,this.orientation="horizontal",this.activeItemIndex=0,this.activeItemIndexChange=new i.EventEmitter}get changes$(){return(0,mr.Fp)(this.steps).pipe((0,Rn.g)(0))}onHorizontal(n,r){"horizontal"!==this.orientation||!n.target||(n.preventDefault(),this.moveFocus(n.target,r))}onVertical(n,r){"vertical"!==this.orientation||!n.target||(n.preventDefault(),this.moveFocus(n.target,r))}indexOf(n){return(0,Bn.ct)(this.steps).findIndex(({nativeElement:r})=>r===n)}isActive(n){return n===this.activeItemIndex}activate(n){this.activeItemIndex!==n&&(this.activeItemIndex=n,this.activeItemIndexChange.emit(n))}moveFocus(n,r){const o=(0,Bn.ct)(this.steps).map(({nativeElement:s})=>s);(0,Ut.pr)(o.indexOf(n),o,r)}};return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(n,r,o){if(1&n&&i.\u0275\u0275contentQuery(o,rt,4,i.ElementRef),2&n){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(r.steps=s)}},hostVars:1,hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("keydown.arrowRight",function(s){return r.onHorizontal(s,1)})("keydown.arrowLeft",function(s){return r.onHorizontal(s,-1)})("keydown.arrowDown",function(s){return r.onVertical(s,1)})("keydown.arrowUp",function(s){return r.onVertical(s,-1)}),2&n&&i.\u0275\u0275attribute("data-orientation",r.orientation)},inputs:{orientation:"orientation",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:ln,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,ki,1,0,"ng-container",0),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275projection(2)),2&n&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.changes$))},directives:[O.O5],pipes:[O.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,zt.gn)([(0,i.ContentChildren)((0,i.forwardRef)(()=>rt),{read:i.ElementRef})],t.prototype,"steps",void 0),(0,zt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-orientation"),(0,Et.TH)()],t.prototype,"orientation",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"activeItemIndex",void 0),(0,zt.gn)([(0,i.Output)()],t.prototype,"activeItemIndexChange",void 0),(0,zt.gn)([Et.UM],t.prototype,"changes$",null),(0,zt.gn)([(0,i.HostListener)("keydown.arrowRight",["$event","1"]),(0,i.HostListener)("keydown.arrowLeft",["$event","-1"])],t.prototype,"onHorizontal",null),(0,zt.gn)([(0,i.HostListener)("keydown.arrowDown",["$event","1"]),(0,i.HostListener)("keydown.arrowUp",["$event","-1"])],t.prototype,"onVertical",null),t})(),rt=(()=>{let t=class{constructor(n,r,o,s){this.stepper=o,this.elementRef=s,this.state="normal",this.icon="",this.focusVisible=!1,r.pipe((0,rr.h)(hn.y)).subscribe(()=>{this.activate()}),n.subscribe(c=>{this.focusVisible=c})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ie.ku),i.\u0275\u0275directiveInject(pe.Ok),i.\u0275\u0275directiveInject(z),i.\u0275\u0275directiveInject(i.ElementRef))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("click",function(){return r.activate()}),2&n&&(i.\u0275\u0275hostProperty("tabIndex",r.tabIndex),i.\u0275\u0275attribute("data-state",r.state),i.\u0275\u0275classProp("_focus-visible",r.focusVisible)("_active",r.isActive)("_vertical",r.isVertical))},inputs:{state:"state",icon:"icon"},features:[i.\u0275\u0275ProvidersFeature([ie.a3,pe.Ok,ie.ku])],attrs:Ze,ngContentSelectors:ln,decls:5,vars:1,consts:[["class","marker marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"marker","marker_error"],["src","tuiIconCheckLarge",1,"marker","marker_pass"],[1,"marker","marker_index"],[1,"marker","marker_custom",3,"src"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,D,1,1,"tui-svg",0),i.\u0275\u0275element(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),i.\u0275\u0275projection(4)),2&n&&i.\u0275\u0275property("ngIf",r.icon)},directives:[O.O5,Te.P],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:0 0;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:2rem;outline:0;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:'';position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not(._active)   .marker_custom[_ngcontent-%COMP%] ~ .marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal]):not(._active)   .marker_index[_ngcontent-%COMP%]{display:none}.marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}._active[_nghost-%COMP%]   .marker_error[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=error])   .marker_error[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_pass[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=pass])   .marker_pass[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_custom[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal])   .marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}"],changeDetection:0}),(0,zt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-state"),(0,Et.TH)()],t.prototype,"state",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"icon",void 0),(0,zt.gn)([(0,i.HostBinding)("class._focus-visible")],t.prototype,"focusVisible",void 0),(0,zt.gn)([(0,i.HostBinding)("class._active")],t.prototype,"isActive",null),(0,zt.gn)([(0,i.HostBinding)("class._vertical")],t.prototype,"isVertical",null),(0,zt.gn)([(0,i.HostBinding)("tabIndex")],t.prototype,"tabIndex",null),(0,zt.gn)([(0,i.HostListener)("click")],t.prototype,"activate",null),t=(0,zt.gn)([(0,zt.fM)(0,(0,i.Inject)(ie.ku)),(0,zt.fM)(1,(0,i.Inject)(pe.Ok)),(0,zt.fM)(2,(0,i.Inject)(z)),(0,zt.fM)(3,(0,i.Inject)(i.ElementRef))],t),t})(),xt=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Te.E]]}),t})();const $t=["headerStep"];function Qt(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"button",2,3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit;i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n," ")}}const xe=["*"];let Ne=(()=>{class t{constructor(n){this.changeDetector=n,this.steps=[],this.currentStep=0}ngAfterContentInit(){this.setStep(this.currentStep)}ngAfterContentChecked(){this.changeDetector.detectChanges()}getStep(n){return this.tuiStepComponents.toArray()[n]}setStep(n){this.currentStep=n,this.stepComponents.toArray().forEach((r,o)=>r.visible=n===o)}setNextStep(){this.setStepComplete(this.currentStep),this.setStep(this.currentStep+1)}setPrevStep(){this.setStep(this.currentStep-1)}setStepComplete(n){this.getStep(n).state="pass",this.getStep(n).icon="tuiIconCheckLarge"}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course-registration-stepper"]],contentQueries:function(n,r,o){if(1&n&&i.\u0275\u0275contentQuery(o,jr,4),2&n){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(r.stepComponents=s)}},viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery($t,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.tuiStepComponents=o)}},inputs:{steps:"steps"},ngContentSelectors:xe,decls:3,vars:2,consts:[[3,"activeItemIndex","activeItemIndexChange"],["tuiStep","",3,"disabled",4,"ngFor","ngForOf"],["tuiStep","",3,"disabled"],["headerStep",""]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-stepper",0),i.\u0275\u0275listener("activeItemIndexChange",function(s){return r.currentStep=s}),i.\u0275\u0275template(1,Qt,3,2,"button",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(2)),2&n&&(i.\u0275\u0275property("activeItemIndex",r.currentStep),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.steps))},directives:[z,O.sg,rt],styles:[""],changeDetection:0}),t})();var Ke=f(96063),pn=f(8871),yn=f(67795);const gn=["stepper"];function ir(t,e){1&t&&i.\u0275\u0275element(0,"div",5)}function tr(t,e){1&t&&i.\u0275\u0275element(0,"div",6)}const ui=function(t){return["/course",t]};function zn(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",7),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8)(4,"a",9),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,ui,n.courseId))}}function or(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",10),i.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function er(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"tui-input",26),i.\u0275\u0275text(3," Student Number\xa0"),i.\u0275\u0275element(4,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",27),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0))}function lr(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"tui-input",28),i.\u0275\u0275text(3," Please confirm that this is your name.\xa0"),i.\u0275\u0275element(4,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0)("readOnly",!0))}function Mr(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Attempts Remaining: ",n.attemptsRemaining," ")}}function li(t,e){1&t&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1," You don't have any attempts remaining! Contact your instructor. "),i.\u0275\u0275elementEnd())}const Cr=function(){return["Enter Name","Confirm Identity","Verification","Registered"]};function yr(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",11),i.\u0275\u0275text(2," Before completing registration, make sure you are also registered in the same class on Canvas. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"app-course-registration-stepper",12,13)(5,"app-course-registration-step")(6,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).onNameFormSubmit()}),i.\u0275\u0275elementStart(7,"div",15)(8,"tui-input",16),i.\u0275\u0275text(9," Enter your full name as it appears on Canvas\xa0"),i.\u0275\u0275element(10,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",8)(13,"button",19),i.\u0275\u0275text(14," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",20),i.\u0275\u0275text(16," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(17,"app-course-registration-step")(18,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).onConfirmationFormSubmit()}),i.\u0275\u0275template(19,er,6,1,"ng-container",1),i.\u0275\u0275template(20,lr,6,2,"ng-container",1),i.\u0275\u0275elementStart(21,"div",8)(22,"button",21),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275reference(4).setPrevStep()}),i.\u0275\u0275text(23,"Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"button",20),i.\u0275\u0275text(25," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(26,"app-course-registration-step")(27,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).onVerificationFormSubmit()}),i.\u0275\u0275elementStart(28,"div",15)(29,"tui-input",22),i.\u0275\u0275text(30," Verification Code\xa0"),i.\u0275\u0275element(31,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(32,"tui-field-error",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"div",24)(34,"tui-notification",25),i.\u0275\u0275template(35,Mr,2,1,"span",1),i.\u0275\u0275template(36,li,2,0,"span",1),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(37,"div",8)(38,"button",19),i.\u0275\u0275text(39," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(40,"button",20),i.\u0275\u0275text(41," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(42,"app-course-registration-step")(43,"p",15),i.\u0275\u0275text(44,"Registration Complete."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"div",8)(46,"button",19),i.\u0275\u0275text(47," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(48,"a",9),i.\u0275\u0275text(49," Open Course "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementContainerEnd()}if(2&t){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("steps",i.\u0275\u0275pureFunction0(19,Cr)),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",n.nameForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",n.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",n.needsStudentNumber?n.studentNumberForm:n.confirmNameForm),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.needsStudentNumber),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.needsStudentNumber),i.\u0275\u0275advance(4),i.\u0275\u0275property("showLoader",n.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",n.verifyForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0)("textMask",n.verificationNumberMask),i.\u0275\u0275advance(5),i.\u0275\u0275propertyInterpolate("status",n.attemptsRemaining<3?"error":"info"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.attemptsRemaining>=1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.attemptsRemaining<1),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",n.loadingContent),i.\u0275\u0275advance(6),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(20,ui,n.courseId))}}function Oo(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,ir,1,0,"div",3),i.\u0275\u0275template(4,tr,1,0,"div",4),i.\u0275\u0275template(5,zn,6,3,"ng-container",1),i.\u0275\u0275template(6,or,3,0,"ng-container",1),i.\u0275\u0275template(7,yr,50,22,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",n.showSkeletons)("tui-skeleton_text",n.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Registration for ",n.courseName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.registered&&!n.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.blocked&&!n.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.registered&&!n.blocked&&!n.showSkeletons)}}function rs(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",30),i.\u0275\u0275element(2,"tui-marker-icon",31),i.\u0275\u0275elementStart(3,"h1",32),i.\u0275\u0275text(4," Unable to find the course for registration. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",33),i.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd())}let sa=(()=>{class t{constructor(n,r,o,s){this.route=n,this.courseService=r,this.changeDetector=o,this.notificationsService=s,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.verificationNumberMask={guide:!1,mask:[/\d/,/\d/]},this.courseId=this.route.snapshot.params.courseId,this.needsStudentNumber=!1,this.loadingContent=!1}ngOnInit(){this.nameForm=Ee.createNameForm(),this.confirmNameForm=Ee.createConfirmNameForm(),this.studentNumberForm=Ee.createStudentNumberForm(),this.verifyForm=Ee.createVerifyForm(),this.getRegistrationStatus(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(n=>{this.courseName=n.name,this.showSkeletons=!1},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}getRegistrationStatus(){this.courseService.getCourseRegistrationStatus(this.courseId).subscribe(n=>{this.attemptsRemaining=null==n?void 0:n.attempts_remaining,n.status===ct.m.BLOCKED&&(this.blocked=!0),n.status===ct.m.REGISTERED&&(this.registered=!0)})}onNameFormSubmit(){this.resetFormValues();const n=this.generateCourseRegistrationRequest();!n.name||(this.needsStudentNumber=!1,this.loadingContent=!0,this.registerAndUpdateStepper(n))}onConfirmationFormSubmit(){const n=this.generateCourseRegistrationRequest();!n.name&&!n.student_number||(this.loadingContent=!0,this.registerAndUpdateStepper(n))}onVerificationFormSubmit(){const n=this.generateCourseRegistrationRequest();!n.code||(this.loadingContent=!0,this.verifyRegistrationAndUpdateStepper(n))}registerAndUpdateStepper(n){this.courseService.register(this.courseId,n).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}verifyRegistrationAndUpdateStepper(n){this.courseService.registerVerify(this.courseId,n).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}cleanUpLoadingContent(){this.loadingContent=!1,this.changeDetector.detectChanges()}setStepperStatusFromRegistration(n){var r;this.serverGuessedName=null==n?void 0:n.guessed_name,this.serverGuessedName&&this.confirmNameForm.get("confirmNameControl").setValue(null==n?void 0:n.guessed_name),this.attemptsRemaining=null!==(r=null==n?void 0:n.attempts_remaining)&&void 0!==r?r:this.attemptsRemaining,n.success?this.stepper.setNextStep():0===this.stepper.currentStep&&(this.needsStudentNumber=!0,this.stepper.setNextStep())}generateCourseRegistrationRequest(){return{name:this.nameForm.value.nameControl||null,confirmed_name:this.confirmNameForm.value.confirmNameControl||null,student_number:this.studentNumberForm.value.studentNumberControl||null,code:this.verifyForm.value.verifyControl||null}}sendErrorMessage(){this.notificationsService.show("Check that your inputted values are accurate and try again.",{status:"error"}).subscribe()}resetFormValues(){this.serverGuessedName=null,this.confirmNameForm.reset(),this.studentNumberForm.reset(),this.verifyForm.reset()}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(et.gz),i.\u0275\u0275directiveInject(vt.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Qe.$F))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-register"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(gn,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["tuiButton","","type","button","size","m",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"steps"],["stepper",""],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["formControlName","nameControl","aria-label","Full Name on Canvas",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","nameControl"],["tuiButton","","appearance","secondary","type","button","size","m","aria-label","Previous",1,"tui-form__button",3,"disabled"],["tuiButton","","type","submit","size","m","aria-label","Next",1,"tui-form__button",3,"showLoader"],["tuiButton","","appearance","secondary","type","button","size","m","aria-label","Previous",1,"tui-form__button",3,"click"],["formControlName","verifyControl","aria-label","Verification Code",3,"tuiTextfieldCleaner","textMask"],["formControlName","verifyControl"],[1,"tui-space_top-3"],[3,"status"],["formControlName","studentNumberControl","aria-label","Student Number",3,"tuiTextfieldCleaner"],["formControlName","studentNumberControl"],["formControlName","confirmNameControl","aria-label","Confirm Name",3,"tuiTextfieldCleaner","readOnly"],["formControlName","confirmNameControl"],[1,"course-registration_none"],["src","tuiIconAlertCircleLarge","mode","error","size","s",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,Oo,8,10,"ng-container",1),i.\u0275\u0275template(2,rs,7,0,"ng-container",1),i.\u0275\u0275elementEnd()),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.courseNotFound),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[O.O5,fn.Ls,Re.v0,et.yS,Ne,jr,nt.\u0275NgNoValidate,nt.NgControlStatusGroup,nt.FormGroupDirective,pt.K3,pt.wU,nt.NgControlStatus,nt.FormControlName,yt.be,Ke.y,yn.hd,pn.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),t})();var Ur=f(89627),Si=f(37080),Pn=f(58259),Ra=f(59695),Ro=f.n(Ra),yo=f(85510),No=f.n(yo),rn=f(17489);const{round:eo,floor:Na,PI:xo}=Math,Nr={linear:function(t,e,n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]||0}},Zr=function(t){return t%360+(t<0?360:0)},Li=function(t,e){return e*eo(t/e)},zr=function(t){return 180*t/xo%360},Sr=function(t,e){return(t=(e=e||!1)?t:t%360)*xo/180},bo=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return Na(Math.random()*(e-t+1)+t)},{cos:no,sin:ua,atan2:is}=Math,Wi=function(t,e){var n=Sr(t.y),r=Sr(e.y),c=Sr(e.x-t.x),v=ua(c)*no(r),m=no(n)*ua(r)-ua(n)*no(r)*no(c),b=zr(is(v,m))-22.5;return b<0&&(b+=360),["NE","E","SE","S","SW","W","NW","N"][b=parseInt(b/45)]},la=function(t,e){var n=t.x,r=t.y;return(n-=e.x)*n+(r-=e.y)*r},Da=function(t,e){return Math.sqrt(la(t,e))},on={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Do,cos:Fa,sin:Oi,sqrt:ro,min:io,max:Dr,atan2:$i,round:Va,pow:Fo,PI:ca}=Math,ht=function(t,e){if(!(this instanceof ht))return new ht(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};ht.fromPolar=function(t,e,n){n=new ht(n);var r=Do(t*Fa(e)),o=Do(t*Oi(e)),s=Zr(zr(e));return s<90?o=-o:s<180?(r=-r,o=-o):s<270&&(r=-r),new ht(n.x+r,n.y+o)},ht.random=function(t,e,n,r){return new ht(bo(t,e),bo(n,r))},ht.prototype={type:on.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new ht(t[0]);for(var n=null,r=1/0,o=0;o<e;o++){var s=new ht(t[o]),c=this.squaredDistance(s);c<r&&(n=s,r=c)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=io(Dr(this.x,t.x),t.x+t.width),this.y=io(Dr(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return Wi(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new ht(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new ht(this.x-(t||0),this.y-(e||0))},distance:function(t){return Da(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){return new ht((1-e)*this.x+e*t.x,(1-e)*this.y+e*t.y)},magnitude:function(){return ro(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Do(t.x-this.x)+Do(t.y-this.y)},move:function(t,e){var n=Sr(new ht(t).theta(this));return this.offset(Fa(n)*e,-Oi(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new ht(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new ht(0,0),e=Sr(Zr(-e));var n=Fa(e),r=Oi(e),s=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=n*(this.x-t.x)-r*(this.y-t.y)+t.x,this.y=s,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Fo(10,t)}return this.x=Va(this.x*e)/e,this.y=Va(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new ht(n)||new ht(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Li(this.x,t),this.y=Li(this.y,e||t),this},squaredDistance:function(t){return la(this,t)},theta:function(t){t=new ht(t);var r=$i(-(t.y-this.y),t.x-this.x);return r<0&&(r=2*ca+r),180*r/ca},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new ht(t)||new ht(0,0);var e=this.x,n=this.y;return this.x=ro((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=Sr(t.theta(new ht(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new ht(0,0).angleBetween(this,t)}},ht.prototype.translate=ht.prototype.offset;const ci=ht,{max:Co,min:fa}=Math,be=function(t,e){return this instanceof be?t instanceof be?new be(t.start,t.end):(this.start=new ht(t),void(this.end=new ht(e))):new be(t,e)};be.prototype={type:on.Line,angle:function(){var t=new ht(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=fa(this.start.x,this.end.x),e=fa(this.start.y,this.end.y),n=Co(this.start.x,this.end.x),r=Co(this.start.y,this.end.y);return new de(t,e,n-t,r-e)},bearing:function(){return Wi(this.start,this.end)},clone:function(){return new be(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new be(this.start,t).vector()),n=fa(1,Co(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var r=this.length();return!(new be(e,t).length()>r||new be(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new be(this.start,e),new be(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new be(this.start,e),new be(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof be&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new ht(this.end.x-this.start.x,this.end.y-this.start.y),n=new ht(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,o=new ht(t.start.x-this.start.x,t.start.y-this.start.y),s=o.x*n.y-o.y*n.x,c=o.x*e.y-o.y*e.x;if(0===r||s*r<0||c*r<0)return null;if(r>0){if(s>r||c>r)return null}else if(s<r||c<r)return null;return[new ht(this.start.x+s*e.x/r,this.start.y+s*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Da(this.start,this.end)},midpoint:function(){return new ht((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,o=n.clone().rotate(r,270),s=r.clone().rotate(n,90);return n.move(s,t),r.move(o,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var o=this.length();return t>=o?r?n.clone():e.clone():this.pointAt((r?t:o-t)/o)},pointOffset:function(t){t=new ht(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return la(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),o=new be(e,n);return o.translate(r.x-e.x,r.y-e.y),o},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),o=new be(e,n);return o.translate(r.x-e.x,r.y-e.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new ht(this.end.x-this.start.x,this.end.y-this.start.y)}},be.prototype.intersection=be.prototype.intersect;const qr=be,{sqrt:Vo,round:Ri,pow:Bo}=Math,Tr=function(t,e,n){return this instanceof Tr?t instanceof Tr?new Tr(new ht(t.x,t.y),t.a,t.b):(t=new ht(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new Tr(t,e,n)};Tr.fromRect=function(t){return t=new de(t),new Tr(t.center(),t.width/2,t.height/2)},Tr.prototype={type:on.Ellipse,bbox:function(){return new de(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ht(this.x,this.y)},clone:function(){return new Tr(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,o=this.a,s=this.b,c=t.vector(),v=n.difference(new ht(this)),m=new ht(c.x/(o*o),c.y/(s*s)),S=new ht(v.x/(o*o),v.y/(s*s)),A=c.dot(m),b=c.dot(S),tt=b*b-A*(v.dot(S)-1);if(tt<0)return null;if(tt>0){var ot=Vo(tt),Tt=(-b-ot)/A,Ct=(-b+ot)/A;if((Tt<0||1<Tt)&&(Ct<0||1<Ct))return null;0<=Tt&&Tt<=1&&e.push(n.lerp(r,Tt)),0<=Ct&&Ct<=1&&e.push(n.lerp(r,Ct))}else{var Dt=-b/A;if(!(0<=Dt&&Dt<=1))return null;e.push(n.lerp(r,Dt))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new ht(t),e&&t.rotate(new ht(this.x,this.y),e);var o,n=t.x-this.x,r=t.y-this.y;if(0===n)return o=this.bbox().pointNearestToPoint(t),e?o.rotate(new ht(this.x,this.y),-e):o;var s=r/n,S=Vo(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return o=new ht(this.x+(S=n<0?-S:S),this.y+s*S),e?o.rotate(new ht(this.x,this.y),-e):o},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,o=this.b,s=this.x,c=this.y;return(e-s)*(e-s)/(r*r)+(n-c)*(n-c)/(o*o)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Bo(10,t)}return this.x=Ri(this.x*e)/e,this.y=Ri(this.y*e)/e,this.a=Ri(this.a*e)/e,this.b=Ri(this.b*e)/e,this},tangentTheta:function(t){var b,G,n=t.x,r=t.y,o=this.a,s=this.b,c=this.bbox().center(),v=c.x,m=c.y;return n>c.x+o/2||n<c.x-o/2?G=o*o/(n-v)-o*o*(r-m)*((b=n>c.x?r-30:r+30)-m)/(s*s*(n-v))+v:b=s*s/(r-m)-s*s*(n-v)*((G=r>c.y?n+30:n-30)-v)/(o*o*(r-m))+m,new ht(G,b).theta(t)},toString:function(){return new ht(this.x,this.y).toString()+" "+this.a+" "+this.b}};const os=Tr,{abs:_r,cos:fi,sin:di,min:oo,max:Ho,round:Gr,pow:ti}=Math,de=function(t,e,n,r){if(!(this instanceof de))return new de(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r};de.fromEllipse=function(t){return t=new Tr(t),new de(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},de.fromPointUnion=function(...t){if(0===t.length)return null;const e=new ht;let n,r,o,s;n=r=1/0,o=s=-1/0;for(let c=0;c<t.length;c++){e.update(t[c]);const v=e.x,m=e.y;v<n&&(n=v),v>o&&(o=v),m<r&&(r=m),m>s&&(s=m)}return new de(n,r,o-n,s-r)},de.fromRectUnion=function(...t){if(0===t.length)return null;const e=new de;let n,r,o,s;n=r=1/0,o=s=-1/0;for(let c=0;c<t.length;c++){e.update(t[c]);const v=e.x,m=e.y,S=v+e.width,A=m+e.height;v<n&&(n=v),S>o&&(o=S),m<r&&(r=m),A>s&&(s=A)}return new de(n,r,o-n,s-r)},de.prototype={type:on.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=Sr(t),o=_r(di(r)),s=_r(fi(r)),c=e*s+n*o,v=e*o+n*s;return this.x+=(e-c)/2,this.y+=(n-v)/2,this.width=c,this.height=v,this},bottomLeft:function(){return new ht(this.x,this.y+this.height)},bottomLine:function(){return new be(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ht(this.x+this.width/2,this.y+this.height)},center:function(){return new ht(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new de(this)},containsPoint:function(t){return(t=new ht(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new de(this).normalize(),n=new de(t).normalize(),r=e.width,o=e.height,s=n.width,c=n.height;if(!(r&&o&&s&&c))return!1;var v=e.x,m=e.y,S=n.x,A=n.y;return s+=S,r+=v,c+=A,o+=m,v<=S&&s<=r&&m<=A&&c<=o},corner:function(){return new ht(this.x+this.width,this.y+this.height)},equals:function(t){var e=new de(this).normalize(),n=new de(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),o=t.corner();if(o.x<=e.x||o.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var s=Ho(e.x,r.x),c=Ho(e.y,r.y);return new de(s,c,oo(n.x,o.x)-s,oo(n.y,o.y)-c)},intersectionWithLine:function(t){var s,c,e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],o=[],v=n.length;for(c=0;c<v;c++)null!==(s=t.intersect(n[c]))&&o.indexOf(s.toString())<0&&(r.push(s),o.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new ht(t);var r,n=new ht(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(n,e);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new be(n,t),c=o.length-1;c>=0;--c){var v=o[c].intersection(s);if(null!==v){r=v;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new be(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ht(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new de(t),e||(e=t.center());var n,r,o,s,c,v,m,S,A=e.x,b=e.y;n=r=o=s=c=v=m=S=1/0;var G=t.topLeft();G.x<A&&(n=(this.x-A)/(G.x-A)),G.y<b&&(c=(this.y-b)/(G.y-b));var tt=t.bottomRight();tt.x>A&&(r=(this.x+this.width-A)/(tt.x-A)),tt.y>b&&(v=(this.y+this.height-b)/(tt.y-b));var ot=t.topRight();ot.x>A&&(o=(this.x+this.width-A)/(ot.x-A)),ot.y<b&&(m=(this.y-b)/(ot.y-b));var Tt=t.bottomLeft();return Tt.x<A&&(s=(this.x-A)/(Tt.x-A)),Tt.y>b&&(S=(this.y+this.height-b)/(Tt.y-b)),{sx:oo(n,r,o,s),sy:oo(c,v,m,S)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return oo(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return ht.prototype.offset.call(this,t,e)},origin:function(){return new ht(this.x,this.y)},pointNearestToPoint:function(t){if(t=new ht(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new ht(this.x+this.width,t.y);case"left":return new ht(this.x,t.y);case"bottom":return new ht(t.x,this.y+this.height);case"top":return new ht(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new be(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ht(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=ti(10,t)}return this.x=Gr(this.x*e)/e,this.y=Gr(this.y*e)/e,this.width=Gr(this.width*e)/e,this.height=Gr(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new ht(t);var n=this.x+this.width-t.x,r=t.y-this.y,s=t.x-this.x,c="left";return n<s&&(s=n,c="right"),r<s&&(s=r,c="top"),this.y+this.height-t.y<s&&(c="bottom"),c},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new be(this.topLeft(),this.topRight())},topMiddle:function(){return new ht(this.x+this.width/2,this.y)},topRight:function(){return new ht(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return de.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}},de.prototype.bottomRight=de.prototype.corner,de.prototype.topLeft=de.prototype.origin,de.prototype.translate=de.prototype.offset;const da=de;function Wr(t){if(""===(t=t.trim()))return[];const e=[],n=t.split(/\s*,\s*|\s+/),r=n.length;for(let o=0;o<r;o+=2)e.push({x:+n[o],y:+n[o+1]});return e}function Yi(t){const e=t.length;if(0===e)return[];const n=[];for(let r=0;r<e;r++){const o=t[r].clone();n.push(o)}return n}function Ni(t){const{abs:e}=Math;var n,r,s,o=t.length;if(0===o)return[];for(n=0;n<o;n++)(void 0===s||t[n].y<s.y||t[n].y===s.y&&t[n].x>s.x)&&(s=t[n]);var c=[];for(n=0;n<o;n++){var v=s.theta(t[n]);0===v&&(v=360),c.push([t[n],n,v])}c.sort(function(ce,me){var ye=ce[2]-me[2];return 0===ye&&(ye=me[1]-ce[1]),ye}),c.length>2&&c.unshift(c[c.length-1]);for(var G,tt,ot,Tt,Ct,Dt,A={},b=[];0!==c.length;)if(tt=(G=c.pop())[0],!A.hasOwnProperty(G[0]+"@@"+G[1]))for(var Nt=!1;!Nt;)if(b.length<2)b.push(G),Nt=!0;else{Tt=(ot=b.pop())[0];var L=(Dt=(Ct=b.pop())[0]).cross(Tt,tt);if(L<0)b.push(Ct),b.push(ot),b.push(G),Nt=!0;else if(0===L){var K=Tt.angleBetween(Dt,tt);e(K-180)<1e-10||Tt.equals(tt)||Dt.equals(Tt)?(A[ot[0]+"@@"+ot[1]]=Tt,b.push(Ct)):e((K+1)%360-1)<1e-10&&(b.push(Ct),c.push(ot))}else A[ot[0]+"@@"+ot[1]]=Tt,b.push(Ct)}b.length>2&&b.pop();var it,gt=-1;for(r=b.length,n=0;n<r;n++){var It=b[n][1];(void 0===it||It<it)&&(it=It,gt=n)}var Ot=[];if(gt>0){var Gt=b.slice(gt),se=b.slice(0,gt);Ot=Gt.concat(se)}else Ot=b;var ee=[];for(r=Ot.length,n=0;n<r;n++)ee.push(Ot[n][0]);return ee}const Fn=function(t){return this instanceof Fn?"string"==typeof t?new Fn.parse(t):void(this.points=Array.isArray(t)?t.map(ht):[]):new Fn(t)};Fn.parse=function(t){return new Fn(Wr(t))},Fn.fromRect=function(t){return new Fn([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},Fn.prototype={type:on.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,o=this.points,s=o.length;if(0===s)return null;for(var c=0;c<s;c++){var v=o[c],m=v.x,S=v.y;m<t&&(t=m),m>e&&(e=m),S<n&&(n=S),S>r&&(r=S)}return new de(t,n,e-t,r-n)},clone:function(){return new Fn(Yi(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n||1===n)return 0;for(var r,o=1/0,s=0,c=n-1,v=0;v<c;v++){var m=new be(e[v],e[v+1]),S=m.length(),A=m.closestPointNormalizedLength(t),G=m.pointAt(A).squaredDistance(t);G<o&&(o=G,r=s+A*S),s+=S}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var r=t.x,o=t.y,s=n-1,c=0,v=0,m=new be,S=new be,A=new ht;c<n;c++){var b=e[s],G=e[c];if(t.equals(b)||(m.start=b,m.end=G,m.containsPoint(t)))return!0;if(o<=b.y&&o>G.y||o>b.y&&o<=G.y){var tt=b.x-r>G.x-r?b.x-r:G.x-r;tt>=0&&(A.x=r+tt,A.y=o,S.start=t,S.end=A,m.intersect(S)&&v++)}s=c}return v%2==1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Fn(Ni(this.points))},equals:function(t){if(!t)return!1;var e=this.points,r=e.length;if(t.points.length!==r)return!1;for(var o=0;o<r;o++)if(!e[o].equals(t.points[o]))return!1;return!0},intersectionWithLine:function(t){for(var e=new be(t),n=[],r=this.lengthPoints(),o=new be,s=0,c=r.length-1;s<c;s++){o.start=r[s],o.end=r[s+1];var v=e.intersectionWithLine(o);v&&n.push(v[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=new be,r=e-1,o=0;o<r;o++)if(n.start=t[o],n.end=t[o+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var n=0,r=e-1,o=0;o<r;o++)n+=t[o].distance(t[o+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length();return this.pointAtLength(r*t)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var o=0,s=n-1,c=0;c<s;c++){var v=r?c:s-1-c,m=e[v],S=e[v+1],A=new be(m,S),b=m.distance(S);if(t<=o+b)return A.pointAtLength((r?1:-1)*(t-o));o+=b}return(r?e[n-1]:e[0]).clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,o=r.length,s=0;s<o;s++)r[s].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const s=r+1,m=e[s];new be(e[r],e[r+2]).closestPoint(m).distance(m)<=n?e.splice(s,1):r+=1}return this},tangentAt:function(t){var n=this.lengthPoints().length;if(0===n||1===n)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length();return this.tangentAtLength(r*t)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n||1===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,s=0,c=n-1,v=0;v<c;v++){var m=r?v:c-1-v,S=e[m],A=e[m+1],b=new be(S,A),G=S.distance(A);if(b.isDifferentiable()){if(t<=s+G)return b.tangentAtLength((r?1:-1)*(t-s));o=b}s+=G}return o?o.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,o=0;o<r;o++)n[o].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",r=0;r<e;r++){var o=t[r];n+=o.x+","+o.y+" "}return n.trim()}},Object.defineProperty(Fn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Fn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points.length;return 0===e?null:this.points[e-1]}});const{abs:_o,sqrt:Ba,min:jo,max:wo,pow:ha}=Math,Sn=function(t,e,n,r){return this instanceof Sn?t instanceof Sn?new Sn(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new ht(t),this.controlPoint1=new ht(e),this.controlPoint2=new ht(n),void(this.end=new ht(r))):new Sn(t,e,n,r)};function Uo(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var o=Object.create(t);for(n=r.length,e=0;e<n;e++){var c,v,s=r[e];for(v in s)s.hasOwnProperty(v)&&(delete o[v],c=Object.getOwnPropertyDescriptor(s,v),Object.defineProperty(o,v,c))}return o}Sn.throughPoints=function(){function e(n){var r=n.length,o=[],s=[],c=2;o[0]=n[0]/c;for(var v=1;v<r;v++)s[v]=1/c,o[v]=(n[v]-o[v-1])/(c=(v<r-1?4:3.5)-s[v]);for(v=1;v<r;v++)o[r-v-1]-=s[r-v]*o[r-v];return o}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=function t(n){var c,r=[],o=[],s=n.length-1;if(1==s)return r[0]=new ht((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),o[0]=new ht(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,o];var v=[];for(c=1;c<s-1;c++)v[c]=4*n[c].x+2*n[c+1].x;v[0]=n[0].x+2*n[1].x,v[s-1]=(8*n[s-1].x+n[s].x)/2;var m=e(v);for(c=1;c<s-1;++c)v[c]=4*n[c].y+2*n[c+1].y;v[0]=n[0].y+2*n[1].y,v[s-1]=(8*n[s-1].y+n[s].y)/2;var S=e(v);for(c=0;c<s;c++)r.push(new ht(m[c],S[c])),o.push(c<s-1?new ht(2*n[c+1].x-m[c+1],2*n[c+1].y-S[c+1]):new ht((n[s].x+m[s-1])/2,(n[s].y+S[s-1])/2));return[r,o]}(n),o=[],s=r[0].length,c=0;c<s;c++){var v=new ht(r[0][c].x,r[0][c].y),m=new ht(r[1][c].x,r[1][c].y);o.push(new Sn(n[c],v,m,n[c+1]))}return o}}(),Sn.prototype={type:on.Curve,bbox:function(){for(var Tt,Ct,Dt,Nt,L,U,K,it,t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,o=t.x,s=t.y,c=e.x,v=e.y,m=n.x,S=n.y,A=r.x,b=r.y,G=new Array,tt=new Array,ot=[new Array,new Array],gt=0;gt<2;++gt)if(0===gt?(Ct=6*o-12*c+6*m,Tt=-3*o+9*c-9*m+3*A,Dt=3*c-3*o):(Ct=6*s-12*v+6*S,Tt=-3*s+9*v-9*S+3*b,Dt=3*v-3*s),_o(Tt)<1e-12){if(_o(Ct)<1e-12)continue;0<(Nt=-Dt/Ct)&&Nt<1&&tt.push(Nt)}else it=Ba(K=Ct*Ct-4*Dt*Tt),!(K<0)&&(0<(L=(-Ct+it)/(2*Tt))&&L<1&&tt.push(L),0<(U=(-Ct-it)/(2*Tt))&&U<1&&tt.push(U));for(var Gt,se,ee,It=tt.length,Ot=It;It--;)ot[0][It]=se=(Gt=1-(Nt=tt[It]))*Gt*Gt*o+3*Gt*Gt*Nt*c+3*Gt*Nt*Nt*m+Nt*Nt*Nt*A,ot[1][It]=ee=Gt*Gt*Gt*s+3*Gt*Gt*Nt*v+3*Gt*Nt*Nt*S+Nt*Nt*Nt*b,G[It]={X:se,Y:ee};tt[Ot]=0,tt[Ot+1]=1,G[Ot]={X:o,Y:s},G[Ot+1]={X:A,Y:b},ot[0][Ot]=o,ot[1][Ot]=s,ot[0][Ot+1]=A,ot[1][Ot+1]=b,tt.length=Ot+2,ot[0].length=Ot+2,ot[1].length=Ot+2,G.length=Ot+2;var ce=jo.apply(null,ot[0]),me=jo.apply(null,ot[1]),ye=wo.apply(null,ot[0]),Oe=wo.apply(null,ot[1]);return new de(ce,me,ye-ce,Oe-me)},clone:function(){return new Sn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,o),o)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},s=this.closestPointLength(t,o);if(!s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(t,e){for(var o,s,c,v,m,S,A,n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r=void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions,b=r.length,G=b?1/b:0,tt=0;tt<b;tt++){var ot=r[tt],Tt=ot.start.distance(t),Ct=ot.end.distance(t),Dt=Tt+Ct;(!A||Dt<A)&&(o=ot,s=tt*G,c=(tt+1)*G,v=Tt,m=Ct,S=ot.start.distance(ot.end),A=Dt)}for(var Nt=ha(10,-n);;){var L=v?_o(v-m)/v:0,U=m?_o(v-m)/m:0;if(L<Nt||U<Nt||!v||v<S*Nt||!m||m<S*Nt)return v<=m?s:c;var Ot=o.divide(.5);G/=2;var Gt=Ot[0].start.distance(t),se=Ot[0].end.distance(t),ee=Gt+se,ce=Ot[1].start.distance(t),me=Ot[1].end.distance(t);ee<=ce+me?(o=Ot[0],c-=G,v=Gt,m=se):(o=Ot[1],s+=G,v=ce,m=me)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,o=this.end;if(t<=0)return[new Sn(e,e,e,e),new Sn(e,n,r,o)];if(t>=1)return[new Sn(e,n,r,o),new Sn(o,o,o,o)];var s=this.getSkeletonPoints(t),m=s.divider,S=s.dividerControlPoint1,A=s.dividerControlPoint2;return[new Sn(e,s.startControlPoint1,s.startControlPoint2,m),new Sn(m,S,A,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,o=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var s=new be(e,n).pointAt(t),c=new be(n,r).pointAt(t),v=new be(r,o).pointAt(t),m=new be(s,c).pointAt(t),S=new be(c,v).pointAt(t);return{startControlPoint1:s,startControlPoint2:m,divider:new be(m,S).pointAt(t),dividerControlPoint1:S,dividerControlPoint2:v}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=[new Sn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;for(var r=this.endpointDistance(),o=ha(10,-e),s=0;;){s+=1;for(var c=[],v=n.length,m=0;m<v;m++){var A=n[m].divide(.5);c.push(A[0],A[1])}for(var b=0,G=c.length,tt=0;tt<G;tt++)b+=c[tt].endpointDistance();if(s>1&&(0!==b?(b-r)/b:0)<o)return c;n=c,r=b}},isDifferentiable:function(){var e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){for(var n=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,r=0,o=n.length,s=0;s<o;s++)r+=n[s].endpointDistance();return r},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,o=e.divider,s=new be(n,e.dividerControlPoint1);return s.translate(o.x-n.x,o.y-n.y),s},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},s=this.length(o);return this.tAtLength(s*t,o)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var c,v,m,S,A,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=void 0===e.subdivisions?this.getSubdivisions({precision:r}):e.subdivisions,s={precision:r,subdivisions:o},b=0,G=o.length,tt=1/G,ot=0;ot<G;ot++){var Tt=n?ot:G-1-ot,Ct=o[ot],Dt=Ct.endpointDistance();if(t<=b+Dt){c=Ct,v=Tt*tt,m=(Tt+1)*tt,S=n?t-b:Dt+b-t,A=n?Dt+b-t:t-b;break}b+=Dt}if(!c)return n?1:0;for(var Nt=this.length(s),L=ha(10,-r);;){if((0!==Nt?S/Nt:0)<L)return v;if((0!==Nt?A/Nt:0)<L)return m;var K,it,gt=c.divide(.5);tt/=2;var It=gt[0].endpointDistance(),Ot=gt[1].endpointDistance();S<=It?(c=gt[0],m-=tt,it=It-(K=S)):(c=gt[1],v+=tt,it=Ot-(K=S-It)),S=K,A=it}},toPoints:function(t){for(var n=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,r=[n[0].start.clone()],o=n.length,s=0;s<o;s++)r.push(n[s].end.clone());return r},toPolyline:function(t){return new Fn(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},Sn.prototype.divide=Sn.prototype.divideAtT;const Ae=function(t){if(!(this instanceof Ae))return new Ae(t);if("string"==typeof t)return new Ae.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce(function(v,m){return v.concat(m)},[])).length,t[0].isSegment)for(e=0;e<n;e++)this.appendSegment(t[e]);else{var o=null;for(e=0;e<n;e++){var s=t[e];if(!(s instanceof be||s instanceof Sn))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(Ae.createSegment("M",s.start)),o&&!o.end.equals(s.start)&&this.appendSegment(Ae.createSegment("M",s.start)),s instanceof be?this.appendSegment(Ae.createSegment("L",s.end)):s instanceof Sn&&this.appendSegment(Ae.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),o=s}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof be)this.appendSegment(Ae.createSegment("M",t.start)),this.appendSegment(Ae.createSegment("L",t.end));else if(t instanceof Sn)this.appendSegment(Ae.createSegment("M",t.start)),this.appendSegment(Ae.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof Fn))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){this.appendSegment(Ae.createSegment(0===e?"M":"L",t.points[e]))}}};function hi(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}Ae.parse=function(t){if(!t)return new Ae;for(var e=new Ae,r=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=r.length,s=0;s<o;s++){var m=r[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),S=Ae.createSegment.apply(this,m);e.appendSegment(S)}return e},Ae.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=Ae.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,o=1;o<r;o++)n.push(arguments[o]);return hi(e,n)},Ae.prototype={type:on.Path,appendSegment:function(t){var r,e=this.segments,n=e.length,o=0!==n?e[n-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(S,A){return S.concat(A)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=t.length,v=0;v<c;v++)r=this.prepareSegment(t[v],o,null),e.push(r),o=r}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,o,null),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n,r=0;r<e;r++){var o=t[r];if(o.isVisible){var s=o.bbox();n=n?n.union(s):s}}if(n)return n;var c=t[e-1];return new de(c.end.x,c.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new Ae,r=0;r<e;r++){var o=t[r].clone();n.appendSegment(o)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},s=this.closestPointT(t,o);return s?this.lengthAtT(s,o):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},s=this.closestPointLength(t,o);if(0===s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var c,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,v=1/0,m=0;m<r;m++){var S=n[m];if(S.isVisible){var b=S.closestPointT(t,{precision:o,subdivisions:s[m]}),G=S.pointAtT(b),tt=new be(G,t).squaredLength();tt<v&&(c={segmentIndex:m,value:b},v=tt)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var c,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,v=1/0,m=0;m<r;m++){var S=n[m],A=s[m];if(S.isDifferentiable()){var b=S.closestPointT(t,{precision:o,subdivisions:A}),G=S.pointAtT(b),tt=new be(G,t).squaredLength();tt<v&&(c=S.tangentAtT(b),v=tt)}}return c||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,o=0,s=0;s<r;s++)n[s].containsPoint(t)&&o++;return o%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c={precision:o,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions},v=this.length(c);return this.divideAtLength(v*t,c)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);var c,v,S,A,b,G,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,m=0;for(c=0;c<n;c++){var ot=r?c:n-1-c;v=this.getSegment(ot);var Tt=s[ot],Ct=v.length({precision:o,subdivisions:Tt});if(v.isDifferentiable()&&(b=v,G=ot,t<=m+Ct)){A=ot,S=v.divideAtLength((r?1:-1)*(t-m),{precision:o,subdivisions:Tt});break}m+=Ct}if(!b)return null;S||(A=G,S=b.divideAtT(r?1:0));var Dt=this.clone();Dt.replaceSegment(A,S);var Nt=A,L=A+1,U=A+2;S[0].isDifferentiable()||(Dt.removeSegment(Nt),L-=1,U-=1);var K=Dt.getSegment(L).start;Dt.insertSegment(L,Ae.createSegment("M",K)),U+=1,S[1].isDifferentiable()||(Dt.removeSegment(U-1),U-=1);var it=U-Nt-1;for(c=U;c<Dt.segments.length;c++){var gt=this.getSegment(c-it);if("Z"===(v=Dt.getSegment(c)).type&&!gt.subpathStartSegment.end.equals(v.subpathStartSegment.end)){var It=Ae.createSegment("L",gt.end);Dt.replaceSegment(c,It)}}return[new Ae(Dt.segments.slice(0,L)),new Ae(Dt.segments.slice(L))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var o=0;o<r;o++){var s=e[o],c=n[o];if(s.type!==c.type||!s.equals(c))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=[],s=0;s<n;s++){var v=e[s].getSubdivisions({precision:r});o.push(v)}return o},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let o=0;o<n;o++){const s=e[o];s.isSubpathStart?r.push(new Ae(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var o,s=null,c=null;if(0!==r&&(c=t>=1?(s=n[t-1]).nextSegment:n[0]),Array.isArray(e)){if(!(e=e.reduce(function(A,b){return A.concat(b)},[]))[0].isSegment)throw new Error("Segments required.");for(var v=e.length,m=0;m<v;m++)o=this.prepareSegment(e[m],s,c),n.splice(t+m,0,o),s=o}else{if(!e||!e.isSegment)throw new Error("Segment required.");o=this.prepareSegment(e,s,c),n.splice(t,0,o)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var o=0,s=r.length;o<s;o++){var v=t.intersect(r[o]);v&&(n||(n=[]),Array.isArray(v)?Array.prototype.push.apply(n,v):n.push(v))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++)if(t[n].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var o=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,s=0,c=0;c<n;c++)s+=e[c].length({subdivisions:o[c]});return s},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(0===r)return 0;var o=t.segmentIndex;if(o<0)return 0;var s=t.value;o>=r?(o=r-1,s=1):s<0?s=0:s>1&&(s=1);for(var c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,v=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):e.segmentSubdivisions,S=0,A=0;A<o;A++){var b=n[A];S+=b.length({precisison:c,subdivisions:v[A]})}return S+(b=n[o]).lengthAtT(s,{precisison:c,subdivisions:v[o]})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c={precision:o,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions},v=this.length(c);return this.pointAtLength(v*t,c)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;if(0===t)return this.start.clone();var o=!0;t<0&&(o=!1,t=-t);for(var v,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,m=0,S=0;S<r;S++){var A=o?S:r-1-S,b=n[A],G=c[A],tt=b.length({precision:s,subdivisions:G});if(b.isVisible){if(t<=m+tt)return b.pointAtLength((o?1:-1)*(t-m),{precision:s,subdivisions:G});v=b}m+=tt}return v?o?v.end:v.start:n[r-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var o=t.value;return o<0?o=0:o>1&&(o=1),e[r].pointAtT(o)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],o=r.previousSegment,s=r.nextSegment;o&&(o.nextSegment=s),s&&(s.previousSegment=o),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var o,s=n[t],c=s.previousSegment,v=s.nextSegment,m=s.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(G,tt){return G.concat(tt)},[]))[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var S=e.length,A=0;A<S;A++)o=this.prepareSegment(e[A],c,v),n.splice(t+A,0,o),c=o,m&&o.isSubpathStart&&(m=!1)}else{if(!e||!e.isSegment)throw new Error("Segment required.");o=this.prepareSegment(e,c,v),n.splice(t,1,o),m&&o.isSubpathStart&&(m=!1)}m&&v&&this.updateSubpathStartSegment(v)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.segments,o=r.length,s=0;s<o;s++)r[s].scale(t,e,n);return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c={precision:o,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions},v=this.length(c);return this.segmentIndexAtLength(v*t,c)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var o=!0;t<0&&(o=!1,t=-t);for(var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,v=null,m=0,S=0;S<r;S++){var A=o?S:r-1-S,b=n[A],tt=b.length({precision:s,subdivisions:c[A]});if(b.isVisible){if(t<=m+tt)return A;v=A}m+=tt}return v},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c={precision:o,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions},v=this.length(c);return this.tangentAtLength(v*t,c)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var o=!0;t<0&&(o=!1,t=-t);for(var v,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,m=0,S=0;S<r;S++){var A=o?S:r-1-S,b=n[A],G=c[A],tt=b.length({precision:s,subdivisions:G});if(b.isDifferentiable()){if(t<=m+tt)return b.tangentAtLength((o?1:-1)*(t-m),{precision:s,subdivisions:G});v=b}m+=tt}return v?v.tangentAtT(o?1:0):null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var o=t.value;return o<0?o=0:o>1&&(o=1),e[r].tangentAtT(o)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var o=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,s=[],c=[],v=0;v<n;v++){var m=e[v];if(m.isVisible){var S=o[v];if(S.length>0){var A=S.map(function(b){return b.start});Array.prototype.push.apply(c,A)}else c.push(m.start)}else c.length>0&&(c.push(e[v-1].end),s.push(c),c=[])}return c.length>0&&(c.push(this.end),s.push(c)),s},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,o=n.length;r<o;r++)e.push(new Fn(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++)n+=t[r].serialize()+" ";return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,o=0;o<r;o++)n[o].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Ae.createSegment("M",0,0)),this}},Object.defineProperty(Ae.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(Ae.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});var Xi={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Xi,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Xi,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Xi,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var wr=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof wr))return hi(wr,t);if(0===e)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof be){if(1===e)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(2===e)return this.end=new ht(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var o;for(r=[],n=0;n<e;n+=2)o=t.slice(n,n+2),r.push(hi(wr,o));return r}if(1===e)return this.end=new ht(t[0]),this;for(r=[],n=0;n<e;n+=1)r.push(new wr(t[n]));return r},Ha={clone:function(){return new wr(this.end)},divideAt:function(t){var n=new be(this.start,this.end).divideAt(t);return[new wr(n[0]),new wr(n[1])]},divideAtLength:function(t){var n=new be(this.start,this.end).divideAtLength(t);return[new wr(n[0]),new wr(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Ha,"type",{configurable:!0,enumerable:!0,value:"L"}),wr.prototype=Uo(Xi,be.prototype,Ha);var kr=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof kr))return hi(kr,t);if(0===e)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,s;if(t[0]instanceof Sn){if(1===e)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(6===e)return this.controlPoint1=new ht(+t[0],+t[1]),this.controlPoint2=new ht(+t[2],+t[3]),this.end=new ht(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var o;for(r=[],n=0;n<e;n+=6)o=t.slice(n,n+6),r.push(hi(kr,o));return r}if(3===e)return this.controlPoint1=new ht(t[0]),this.controlPoint2=new ht(t[1]),this.end=new ht(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");for(r=[],n=0;n<e;n+=3)s=t.slice(n,n+3),r.push(hi(kr,s));return r},Ki={clone:function(){return new kr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var r=new Sn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new kr(r[0]),new kr(r[1])]},divideAtLength:function(t,e){var r=new Sn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new kr(r[0]),new kr(r[1])]},divideAtT:function(t){var n=new Sn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new kr(n[0]),new kr(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(Ki,"type",{configurable:!0,enumerable:!0,value:"C"}),kr.prototype=Uo(Xi,Sn.prototype,Ki);var Ti=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Ti))return hi(Ti,t);if(0===e)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,s;if(t[0]instanceof be){if(1===e)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}if(t[0]instanceof Sn){if(1===e)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(2===e)return this.end=new ht(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var o;for(r=[],n=0;n<e;n+=2)o=t.slice(n,n+2),r.push(hi(0===n?Ti:wr,o));return r}if(1===e)return this.end=new ht(t[0]),this;for(r=[],n=0;n<e;n+=1)s=t[n],r.push(0===n?new Ti(s):new wr(s));return r},pa={bbox:function(){return null},clone:function(){return new Ti(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(pa,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(pa,"type",{configurable:!0,enumerable:!0,value:"M"}),Ti.prototype=Uo(Xi,pa);var Ei=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Ei))return hi(Ei,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},ga={clone:function(){return new Ei},divideAt:function(t){var n=new be(this.start,this.end).divideAt(t);return[n[1].isDifferentiable()?new wr(n[0]):this.clone(),new wr(n[1])]},divideAtLength:function(t){var n=new be(this.start,this.end).divideAtLength(t);return[n[1].isDifferentiable()?new wr(n[0]):this.clone(),new wr(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(ga,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(ga,"type",{configurable:!0,enumerable:!0,value:"Z"}),Ei.prototype=Uo(Xi,be.prototype,ga);var va=Ae.segmentTypes={L:wr,C:kr,M:Ti,Z:Ei,z:Ei};Ae.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(va).join("")+",.]*$"),Ae.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const Gn={curveThroughPoints:function(t){return console.warn("deprecated"),new Ae(Sn.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var o,e=[],n=[],r=t.length-1;if(1==r)return e[0]=new ht((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new ht(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var s=[];for(o=1;o<r-1;o++)s[o]=4*t[o].x+2*t[o+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var c=this.getFirstControlPoints(s);for(o=1;o<r-1;++o)s[o]=4*t[o].y+2*t[o+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var v=this.getFirstControlPoints(s);for(o=0;o<r;o++)e.push(new ht(c[o],v[o])),n.push(o<r-1?new ht(2*t[o+1].x-c[o+1],2*t[o+1].y-v[o+1]):new ht((t[r].x+c[r-1])/2,(t[r].y+v[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var o=new Sn(t,e,n,r);return function(c){var v=o.divide(c);return[{p0:v[0].start,p1:v[0].controlPoint1,p2:v[0].controlPoint2,p3:v[0].end},{p0:v[1].start,p1:v[1].controlPoint1,p2:v[1].controlPoint2,p3:v[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],o=2;n[0]=t[0]/o;for(var s=1;s<e;s++)r[s]=1/o,n[s]=(t[s]-n[s-1])/(o=(s<e-1?4:3.5)-r[s]);for(s=1;s<e;s++)n[e-s-1]-=r[e-s]*n[e-s];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var o=new Sn(t,e,n,r);return function(c){return o.closestPointT(c)}}},sn=function(t){return this instanceof sn?"string"==typeof t?new sn.parse(t):void(this.points=Array.isArray(t)?t.map(ht):[]):new sn(t)};function ja(t,e,n,r){switch(t.type){case on.Line:if(e.type===on.Line)return Di(t,e);break;case on.Ellipse:switch(e.type){case on.Line:return N(t,e);case on.Ellipse:return J(t,e)}break;case on.Rect:switch(e.type){case on.Line:return at(t,e);case on.Ellipse:return mt(t,e);case on.Rect:return Lt(t,e)}break;case on.Polyline:switch(e.type){case on.Line:return St(t,e);case on.Ellipse:return l(t,e);case on.Rect:return d(t,e);case on.Polyline:return y(t,e)}break;case on.Polygon:switch(e.type){case on.Line:return _(t,e);case on.Ellipse:return R(t,e);case on.Rect:return F(t,e);case on.Polyline:return Y(t,e);case on.Polygon:return lt(t,e)}break;case on.Path:switch(e.type){case on.Line:return ut(t,e,n);case on.Ellipse:return At(t,e,n);case on.Rect:return Ht(t,e,n);case on.Polyline:return re(t,e,n);case on.Polygon:return Rt(t,e,n);case on.Path:return Xt(t,e,n,r)}}switch(e.type){case on.Ellipse:case on.Rect:case on.Polyline:case on.Polygon:case on.Path:return ja(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Di(t,e){const n=t.start.x,r=t.start.y,c=e.start.x,v=e.start.y,A=t.end.x-n,b=t.end.y-r,G=e.end.x-c,tt=e.end.y-v,ot=n-c,Tt=r-v,Ct=A*tt-G*b,Dt=(A*Tt-b*ot)/Ct,Nt=(G*Tt-tt*ot)/Ct;return Dt>=0&&Dt<=1&&Nt>=0&&Nt<=1}function N(t,e){const n=t.a,r=t.b,o=t.x,s=t.y,c=e.start.x-o,m=e.start.y-s,A=n*n,b=r*r,G=e.end.x-o-c,tt=e.end.y-s-m,ot=G*G/A+tt*tt/b,Tt=2*c*G/A+2*m*tt/b,Dt=Tt*Tt-4*ot*(c*c/A+m*m/b-1);if(0===Dt){const Nt=-Tt/2/ot;return Nt>=0&&Nt<=1}if(Dt>0){const Nt=Math.sqrt(Dt),L=(-Tt+Nt)/2/ot,U=(-Tt-Nt)/2/ot;return L>=0&&L<=1||U>=0&&U<=1}return!1}function J(t,e){return function Ge(t,e,n,r){const{cos:o,sin:s}=Math,c=s(e),v=o(e),m=s(r),S=o(r),A=c*c,b=v*v,tt=m*m,ot=S*S,Ct=t.a*t.a,Dt=t.b*t.b,Nt=n.a*n.a,L=n.b*n.b,U=Ct*A+Dt*b,K=Nt*tt+L*ot,it=Ct*b+Dt*A,gt=Nt*ot+L*tt;let It=2*(Dt-Ct)*(c*v),Ot=2*(L-Nt)*(m*S),Gt=-2*U*t.x-It*t.y,se=-2*K*n.x-Ot*n.y,ee=-It*t.x-2*it*t.y,ce=-Ot*n.x-2*gt*n.y;const me=U*t.x*t.x+it*t.y*t.y+It*t.x*t.y-Ct*Dt,ye=K*n.x*n.x+gt*n.y*n.y+Ot*n.x*n.y-Nt*L;It/=2,Ot/=2,Gt/=2,se/=2,ee/=2,ce/=2;const Oe=ar([[U,It,Gt],[It,it,ee],[Gt,ee,me]]),Hn=ar([[K,Ot,se],[Ot,gt,ce],[se,ce,ye]]),An=.33333333*(ar([[K,It,Gt],[Ot,it,ee],[se,ee,me]])+ar([[U,Ot,Gt],[It,gt,ee],[Gt,ce,me]])+ar([[U,It,se],[It,it,ce],[Gt,ee,ye]])),Qn=.33333333*(ar([[U,Ot,se],[It,gt,ce],[Gt,ce,ye]])+ar([[K,It,se],[Ot,it,ce],[se,ee,ye]])+ar([[K,Ot,Gt],[Ot,gt,ee],[se,ce,me]])),Fe=De([[Oe,An],[An,Qn]]),tn=De([[Oe,Qn],[An,Hn]]),Ue=De([[An,Qn],[Qn,Hn]]);return!(De([[2*Fe,tn],[tn,2*Ue]])>0&&(Qn>0||An>0))}(t,0,e,0)}function at(t,e){const{start:n,end:r}=e,{x:o,y:s,width:c,height:v}=t;return!(n.x>o+c&&r.x>o+c||n.x<o&&r.x<o||n.y>s+v&&r.y>s+v||n.y<s&&r.y<s)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||Di(t.topLine(),e)||Di(t.rightLine(),e)||Di(t.bottomLine(),e)||Di(t.leftLine(),e))}function mt(t,e){return!!Lt(t,de.fromEllipse(e))&&R(sn.fromRect(t),e)}function Lt(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function St(t,e){return Se(t,e,{interior:!1})}function l(t,e){return en(t,e,{interior:!1})}function d(t,e){return Ie(t,e,{interior:!1})}function y(t,e){return Zn(t,e,{interior:!1})}function _(t,e){return Se(t,e,{interior:!0})}function R(t,e){return en(t,e,{interior:!0})}function F(t,e){return Ie(t,e,{interior:!0})}function Y(t,e){return Zn(t,e,{interior:!0})}function lt(t,e){return Lr(t,e,{interior:!0})}function ut(t,e,n){return t.getSubpaths().some(r=>{const[o]=r.toPolylines(n),{type:s}=r.getSegment(-1);return"Z"===s?_(o,e):St(o,e)})}function At(t,e,n){return t.getSubpaths().some(r=>{const[o]=r.toPolylines(n),{type:s}=r.getSegment(-1);return"Z"===s?R(o,e):l(o,e)})}function Ht(t,e,n){return Rt(t,sn.fromRect(e),n)}function re(t,e,n){return Jn(t,e,n,{interior:!1})}function Rt(t,e,n){return Jn(t,e,n,{interior:!0})}function Xt(t,e,n,r){return t.getSubpaths().some(o=>{const[s]=o.toPolylines(n),{type:c}=o.getSegment(-1);return"Z"===c?Rt(e,s,r):re(e,s,r)})}function Se(t,e,n={}){const{interior:r=!1}=n;let o;if(r){if(t.containsPoint(e.start))return!0;const{start:v,end:m,points:S}=t;o=m.equals(v)?S:[...S,v]}else o=t.points;const{length:s}=o,c=new be;for(let v=0;v<s-1;v++)if(c.start=o[v],c.end=o[v+1],Di(e,c))return!0;return!1}function en(t,e,n={}){const{start:r,end:o,points:s}=t;if(e.containsPoint(r))return!0;let c;const{interior:v=!1}=n;if(v){if(t.containsPoint(e.center()))return!0;c=o.equals(r)?s:[...s,r]}else c=s;const{length:m}=c,S=new be;for(let A=0;A<m-1;A++)if(S.start=c[A],S.end=c[A+1],N(e,S))return!0;return!1}function Ie(t,e,n){return Lr(t,sn.fromRect(e),n)}function Jn(t,e,n,r){return t.getSubpaths().some(o=>{const[s]=o.toPolylines(n),{type:c}=o.getSegment(-1);return"Z"===c?Lr(e,s,r):Zn(e,s,r)})}function Zn(t,e,n={}){const{interior:r=!1}=n;let o;if(r){const{start:m}=e;if(t.containsPoint(m))return!0;o=t.clone().close()}else o=t;const s=e.points,{length:c}=s,v=new be;for(let m=0;m<c-1;m++)if(v.start=s[m],v.end=s[m+1],St(o,v))return!0;return!1}function Lr(t,e,n){return e.containsPoint(t.start)||Zn(t,e.clone().close(),n)}function De(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function ar(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}sn.parse=function(t){return new sn(Wr(t))},sn.fromRect=function(t){return new sn([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},sn.prototype=Uo(Fn.prototype,{type:on.Polygon,clone:function(){return new sn(Yi(this.points))},convexHull:function(){return new sn(Ni(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});const Nn=p,Yt=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,o=r.PI,s=r.atan2,c=r.sqrt,v=r.min,m=r.max,S=r.cos,A=r.sin,b=function(L,U,K){if(!(this instanceof b))return b.apply(Object.create(b.prototype),arguments);if(L){if(b.isV(L)&&(L=L.node),U=U||{},b.isString(L)){if("svg"===(L=L.trim()).toLowerCase())L=b.createSvgDocument();else if("<"===L[0]){var it=b.createSvgDocument(L);if(it.childNodes.length>1){var It,Ot,gt=[];for(It=0,Ot=it.childNodes.length;It<Ot;It++){var Gt=it.childNodes[It];gt.push(new b(document.importNode(Gt,!0)))}return gt}L=document.importNode(it.firstChild,!0)}else L=document.createElementNS(e.svg,L);b.ensureId(L)}return this.node=L,this.setAttributes(U),K&&this.append(K),this}},G=b.prototype;function ot(L,U,K){K||(K={});for(var it=K.includeAnnotationIndices,gt=K.eol,It=K.lineHeight,Ot=K.baseSize,Gt=0,se={},ee=U.length-1,ce=0;ce<=ee;ce++){var me=U[ce],ye=null;if(b.isObject(me)){var Oe=me.attrs,Hn=b("tspan",Oe),An=Hn.node,Qn=me.t;gt&&ce===ee&&(Qn+=gt),An.textContent=Qn;var Fe=Oe.class;Fe&&Hn.addClass(Fe),it&&Hn.attr("annotations",me.annotations),ye=parseFloat(Oe["font-size"]),isFinite(ye)||(ye=Ot),ye&&ye>Gt&&(Gt=ye)}else gt&&ce===ee&&(me+=gt),An=document.createTextNode(me||" "),Ot&&Ot>Gt&&(Gt=Ot);L.appendChild(An)}return Gt&&(se.maxFontSize=Gt),It?se.lineHeight=It:Gt&&(se.lineHeight=1.2*Gt),se}Object.defineProperty(G,"id",{enumerable:!0,get:function(){return this.node.id},set:function(L){this.node.id=L}}),G.getTransformToElement=function(L){var U=this.node;if(b.isSVGGraphicsElement(L)&&b.isSVGGraphicsElement(U)){var K=b.toNode(L).getScreenCTM(),it=U.getScreenCTM();if(K&&it)return K.inverse().multiply(it)}return b.createSVGMatrix()},G.transform=function(L,U){var K=this.node;if(b.isUndefined(L))return b.transformStringToMatrix(this.attr("transform"));if(U&&U.absolute)return this.attr("transform",b.matrixToTransformString(L));var it=b.createSVGTransform(L);return K.transform.baseVal.appendItem(it),this},G.translate=function(L,U,K){K=K||{},U=U||0;var it=this.attr("transform")||"",gt=b.parseTransformString(it);return it=gt.value,b.isUndefined(L)?gt.translate:(it=it.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(K.absolute?L:gt.translate.tx+L)+","+(K.absolute?U:gt.translate.ty+U)+") "+it).trim()),this)},G.rotate=function(L,U,K,it){it=it||{};var gt=this.attr("transform")||"",It=b.parseTransformString(gt);return gt=It.value,b.isUndefined(L)?It.rotate:(gt=gt.replace(/rotate\([^)]*\)/g,"").trim(),L%=360,this.attr("transform",(gt+" rotate("+(it.absolute?L:It.rotate.angle+L)+(void 0!==U&&void 0!==K?","+U+","+K:"")+")").trim()),this)},G.scale=function(L,U){U=b.isUndefined(U)?L:U;var K=this.attr("transform")||"",it=b.parseTransformString(K);return K=it.value,b.isUndefined(L)?it.scale:(K=K.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(K+" scale("+L+","+U+")").trim()),this)},G.bbox=function(L,U){var K,it=this.node,gt=it.ownerSVGElement;if(!gt)return new de(0,0,0,0);try{K=it.getBBox()}catch(Ot){K={x:it.clientLeft,y:it.clientTop,width:it.clientWidth,height:it.clientHeight}}if(L)return new de(K);var It=this.getTransformToElement(U||gt);return b.transformRect(K,It)},G.getBBox=function(L){var K,U={},it=this.node;if(!it.ownerSVGElement||!b.isSVGGraphicsElement(it))return new de(0,0,0,0);if(L&&(L.target&&(U.target=b.toNode(L.target)),L.recursive&&(U.recursive=L.recursive)),U.recursive){var Ot=this.children(),Gt=Ot.length;if(0===Gt)return this.getBBox({target:U.target,recursive:!1});U.target||(U.target=this);for(var se=0;se<Gt;se++){var ce,ee=Ot[se];ce=0===ee.children().length?ee.getBBox({target:U.target,recursive:!1}):ee.getBBox({target:U.target,recursive:!0}),K=K?K.union(ce):ce}return K}try{K=it.getBBox()}catch(me){K={x:it.clientLeft,y:it.clientTop,width:it.clientWidth,height:it.clientHeight}}if(U.target){var It=this.getTransformToElement(U.target);return b.transformRect(K,It)}return new de(K)};var Tt=/em$/;function Ct(L,U){var K=parseFloat(L);return Tt.test(L)?K*U:K}G.text=function(L,U){if(L&&"string"!=typeof L)throw new Error("Vectorizer: text() expects the first argument to be a string.");L=b.sanitizeText(L),U||(U={});var K=U.displayEmpty,it=U.eol,gt=U.textPath,It=U.textVerticalAnchor,Ot="middle"===It||"bottom"===It||"top"===It,Gt=U.x;void 0===Gt&&(Gt=this.attr("x")||0);var se=U.includeAnnotationIndices,ee=U.annotations;ee&&!b.isArray(ee)&&(ee=[ee]);var ce=U.lineHeight,me="auto"===ce,ye=me?"1.5em":ce||"1em";this.empty(),this.attr({"xml:space":"preserve",display:L||K?null:"none"});var Oe=parseFloat(this.attr("font-size"));Oe||(Oe=16,(Ot||ee)&&this.attr("font-size",Oe));var An,Hn=document;gt?("string"==typeof gt&&(gt={d:gt}),An=function tt(L,U){L||(L={});var K=b("textPath"),it=L.d;if(it&&void 0===L["xlink:href"]){var gt=b("path").attr("d",it).appendTo(U.defs());K.attr("xlink:href","#"+gt.id)}return b.isObject(L)&&K.attr(L),K.node}(gt,this)):An=Hn.createDocumentFragment();for(var Ue,Qn=0,Fe=L.split("\n"),tn=[],ze=0,wn=Fe.length-1;ze<=wn;ze++){var Ln,$n=ye,Kn="v-line",bn=Hn.createElementNS(e.svg,"tspan"),dr=Fe[ze];if(dr)if(ee){var Tn=(Ln=ot(bn,b.annotateString(dr,ee,{offset:-Qn,includeAnnotationIndices:se}),{includeAnnotationIndices:se,eol:ze!==wn&&it,lineHeight:me?null:ye,baseSize:Oe})).lineHeight;Tn&&me&&0!==ze&&($n=Tn),0===ze&&(Ue=.8*Ln.maxFontSize)}else it&&ze!==wn&&(dr+=it),bn.textContent=dr;else{bn.textContent="-",Kn+=" v-empty-line";var He=bn.style;He.fillOpacity=0,He.strokeOpacity=0,ee&&(Ln={})}Ln&&tn.push(Ln),ze>0&&bn.setAttribute("dy",$n),(ze>0||gt)&&bn.setAttribute("x",Gt),bn.className.baseVal=Kn,An.appendChild(bn),Qn+=dr.length+1}if(Ot)if(ee)$n=function Dt(L,U,K,it){if(!Array.isArray(U))return 0;var gt=U.length;if(!gt)return 0;for(var It=U[0],Ot=Ct(It.maxFontSize,K)||K,Gt=0,se=Ct(it,K),ee=1;ee<gt;ee++)Gt+=Ct((It=U[ee]).lineHeight,K)||se;var ye,me=Ct(It.maxFontSize,K)||K;switch(L){case"middle":ye=Ot/2-.15*me-Gt/2;break;case"bottom":ye=-.25*me-Gt;break;default:ye=.8*Ot}return ye}(It,tn,Oe,ye);else if("top"===It)$n="0.8em";else{var we;switch(wn>0?(we=parseFloat(ye)||1,we*=wn,Tt.test(ye)||(we/=Oe)):we=0,It){case"middle":$n=.3-we/2+"em";break;case"bottom":$n=-we-.3+"em"}}else 0===It?$n="0em":It?$n=It:($n=0,null===this.attr("y")&&this.attr("y",Ue||"0.8em"));return An.firstChild.setAttribute("dy",$n),this.append(An),this},G.removeAttr=function(L){var U=b.qualifyAttr(L),K=this.node;return U.ns?K.hasAttributeNS(U.ns,U.local)&&K.removeAttributeNS(U.ns,U.local):K.hasAttribute(L)&&K.removeAttribute(L),this},G.attr=function(L,U){if(b.isUndefined(L)){for(var K=this.node.attributes,it={},gt=0;gt<K.length;gt++)it[K[gt].name]=K[gt].value;return it}if(b.isString(L)&&b.isUndefined(U))return this.node.getAttribute(L);if("object"==typeof L)for(var It in L)L.hasOwnProperty(It)&&this.setAttribute(It,L[It]);else this.setAttribute(L,U);return this},G.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",b.normalizePathData(this.attr("d"))),this},G.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},G.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},G.setAttributes=function(L){for(var U in L)L.hasOwnProperty(U)&&this.setAttribute(U,L[U]);return this},G.append=function(L){b.isArray(L)||(L=[L]);for(var U=0,K=L.length;U<K;U++)this.node.appendChild(b.toNode(L[U]));return this},G.prepend=function(L){var U=this.node.firstChild;return U?b(U).before(L):this.append(L)},G.before=function(L){var U=this.node,K=U.parentNode;if(K){b.isArray(L)||(L=[L]);for(var it=0,gt=L.length;it<gt;it++)K.insertBefore(b.toNode(L[it]),U)}return this},G.appendTo=function(L){return b.toNode(L).appendChild(this.node),this},G.svg=function(){return this.node instanceof window.SVGSVGElement?this:b(this.node.ownerSVGElement)},G.tagName=function(){return this.node.tagName.toUpperCase()},G.defs=function(){var L=this.svg()||this,U=L.node.getElementsByTagName("defs")[0];return U?b(U):b("defs").appendTo(L)},G.clone=function(){var L=b(this.node.cloneNode(!0));return L.node.id=b.uniqueId(),L},G.findOne=function(L){var U=this.node.querySelector(L);return U?b(U):void 0},G.find=function(L){var U=[],K=this.node.querySelectorAll(L);if(K)for(var it=0;it<K.length;it++)U.push(b(K[it]));return U},G.children=function(){for(var L=this.node.childNodes,U=[],K=0;K<L.length;K++)1===L[K].nodeType&&U.push(b(L[K]));return U},G.parent=function(){return b(this.node.parentNode)||null},G.index=function(){for(var L=0,U=this.node.previousSibling;U;)1===U.nodeType&&L++,U=U.previousSibling;return L},G.findParentByClass=function(L,U){for(var K=this.node.ownerSVGElement,it=this.node.parentNode;it&&it!==U&&it!==K;){var gt=b(it);if(gt.hasClass(L))return gt;it=it.parentNode}return null},G.contains=function(L){var U=this.node,K=b.toNode(L),it=K&&K.parentNode;return U===it||!!(it&&1===it.nodeType&&16&U.compareDocumentPosition(it))},G.toLocalPoint=function(L,U){var K=this.svg().node,it=K.createSVGPoint();it.x=L,it.y=U;try{var gt=it.matrixTransform(K.getScreenCTM().inverse()),It=this.getTransformToElement(K).inverse()}catch(Ot){return it}return gt.matrixTransform(It)},G.translateCenterToPoint=function(L){var K=this.getBBox({target:this.svg()}).center();return this.translate(L.x-K.x,L.y-K.y),this},G.translateAndAutoOrient=function(L,U,K){L=new ht(L),U=new ht(U),K||(K=this.svg());var it=this.scale();this.attr("transform","");var gt=this.getBBox({target:K}).scale(it.sx,it.sy),It=b.createSVGTransform();It.setTranslate(-gt.x-gt.width/2,-gt.y-gt.height/2);var Ot=b.createSVGTransform(),Gt=L.angleBetween(U,L.clone().offset(1,0));Gt&&Ot.setRotate(Gt,0,0);var se=b.createSVGTransform(),ee=L.clone().move(U,gt.width/2);se.setTranslate(2*L.x-ee.x,2*L.y-ee.y);var ce=this.getTransformToElement(K),me=b.createSVGTransform();return me.setMatrix(se.matrix.multiply(Ot.matrix.multiply(It.matrix.multiply(ce.scale(it.sx,it.sy))))),this.attr("transform",b.matrixToTransformString(me.matrix)),this},G.animateAlongPath=function(L,U){U=b.toNode(U);var K=b.ensureId(U),it=b("animateMotion",L),gt=b("mpath",{"xlink:href":"#"+K});it.append(gt),this.append(it);try{it.node.beginElement()}catch(ye){if("fake"===document.documentElement.getAttribute("smiling")){var It=it.node;It.animators=[];var Ot=It.getAttribute("id");Ot&&(id2anim[Ot]=It);for(var Gt=getTargets(It),se=0,ee=Gt.length;se<ee;se++){var me=new Animator(It,Gt[se],se);animators.push(me),It.animators[se]=me,me.register()}}}return this},G.hasClass=function(L){return new RegExp("(\\s|^)"+L+"(\\s|$)").test(this.node.getAttribute("class"))},G.addClass=function(L){if(L&&!this.hasClass(L)){var U=this.node.getAttribute("class")||"";this.node.setAttribute("class",(U+" "+L).trim())}return this},G.removeClass=function(L){if(L&&this.hasClass(L)){var U=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+L+"(\\s|$)","g"),"$2");this.node.setAttribute("class",U)}return this},G.toggleClass=function(L,U){return(b.isUndefined(U)?this.hasClass(L):!U)?this.removeClass(L):this.addClass(L),this},G.sample=function(L){L=L||1;for(var It,U=this.node,K=U.getTotalLength(),it=[],gt=0;gt<K;)It=U.getPointAtLength(gt),it.push({x:It.x,y:It.y,distance:gt}),gt+=L;return it},G.convertToPath=function(){var L=b("path");L.attr(this.attr());var U=this.convertToPathData();return U&&L.attr("d",U),L},G.convertToPathData=function(){var L=this.tagName();switch(L){case"PATH":return this.attr("d");case"LINE":return b.convertLineToPathData(this.node);case"POLYGON":return b.convertPolygonToPathData(this.node);case"POLYLINE":return b.convertPolylineToPathData(this.node);case"ELLIPSE":return b.convertEllipseToPathData(this.node);case"CIRCLE":return b.convertCircleToPathData(this.node);case"RECT":return b.convertRectToPathData(this.node)}throw new Error(L+" cannot be converted to PATH.")},b.prototype.toGeometryShape=function(){var L,U,K,it,gt,It,Ot,Gt,se,ee,ce,me,ye,Oe,Hn;switch(this.tagName()){case"RECT":return L=parseFloat(this.attr("x"))||0,U=parseFloat(this.attr("y"))||0,K=parseFloat(this.attr("width"))||0,it=parseFloat(this.attr("height"))||0,new de(L,U,K,it);case"CIRCLE":return gt=parseFloat(this.attr("cx"))||0,It=parseFloat(this.attr("cy"))||0,Ot=parseFloat(this.attr("r"))||0,new Tr({x:gt,y:It},Ot,Ot);case"ELLIPSE":return gt=parseFloat(this.attr("cx"))||0,It=parseFloat(this.attr("cy"))||0,Gt=parseFloat(this.attr("rx"))||0,se=parseFloat(this.attr("ry"))||0,new Tr({x:gt,y:It},Gt,se);case"POLYLINE":return ee=b.getPointsFromSvgNode(this),new Fn(ee);case"POLYGON":return(ee=b.getPointsFromSvgNode(this)).length>1&&ee.push(ee[0]),new Fn(ee);case"PATH":return ce=this.attr("d"),Ae.isDataSupported(ce)||(ce=b.normalizePathData(ce)),new Ae(ce);case"LINE":return me=parseFloat(this.attr("x1"))||0,Oe=parseFloat(this.attr("y1"))||0,ye=parseFloat(this.attr("x2"))||0,Hn=parseFloat(this.attr("y2"))||0,new be({x:me,y:Oe},{x:ye,y:Hn})}return this.getBBox()},G.findIntersection=function(L,U){var K=this.svg().node,it=this.getBBox({target:U=U||K}),gt=it.center();if(it.intersectionWithLineFromCenterToPoint(L)){var It,Ot=this.tagName();if("RECT"===Ot){var Gt=new de(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),se=this.getTransformToElement(U),ee=b.decomposeMatrix(se),ce=K.createSVGTransform();ce.setRotate(-ee.rotation,gt.x,gt.y);var me=b.transformRect(Gt,ce.matrix.multiply(se));It=new de(me).intersectionWithLineFromCenterToPoint(L,ee.rotation)}else if("PATH"===Ot||"POLYGON"===Ot||"POLYLINE"===Ot||"CIRCLE"===Ot||"ELLIPSE"===Ot){var Qn,Fe,tn,ze,wn,Oe=("PATH"===Ot?this:this.convertToPath()).sample(),Hn=1/0,An=[];for(Qn=0;Qn<Oe.length;Qn++)tn=(tn=b.createSVGPoint((Fe=Oe[Qn]).x,Fe.y)).matrixTransform(this.getTransformToElement(U)),(wn=(Fe=new ht(tn)).distance(gt)+(ze=1.1*Fe.distance(L)))<Hn?(Hn=wn,An=[{sample:Fe,refDistance:ze}]):wn<Hn+1&&An.push({sample:Fe,refDistance:ze});An.sort(function($n,Kn){return $n.refDistance-Kn.refDistance}),An[0]&&(It=An[0].sample)}return It}},G.setAttribute=function(L,U){var K=this.node;if(null===U)return this.removeAttr(L),this;var it=b.qualifyAttr(L);return it.ns?K.setAttributeNS(it.ns,L,U):"id"===L?K.id=U:K.setAttribute(L,U),this},b.createSvgDocument=function(L){if(L){const K=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="1.1">${L}</svg>`,{documentElement:it}=b.parseXML(K,{async:!1});return it}const U=document.createElementNS(e.svg,"svg");return U.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),U.setAttribute("version","1.1"),U},b.createSVGStyle=function(L){const{node:U}=b("style",{type:"text/css"},[b.createCDATASection(L)]);return U},b.createCDATASection=function(L=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(L)},b.idCounter=0,b.uniqueId=function(){return"v-"+ ++b.idCounter},b.toNode=function(L){return b.isV(L)?L.node:L.nodeName&&L||L[0]},b.ensureId=function(L){return(L=b.toNode(L)).id||(L.id=b.uniqueId())},b.sanitizeText=function(L){return(L||"").replace(/ /g,"\xa0")},b.isUndefined=function(L){return void 0===L},b.isString=function(L){return"string"==typeof L},b.isObject=function(L){return L&&"object"==typeof L},b.isArray=Array.isArray,b.parseXML=function(L,U){var K;U=U||{};try{var it=new DOMParser;b.isUndefined(U.async)||(it.async=U.async),K=it.parseFromString(L,"text/xml")}catch(gt){K=void 0}if(!K||K.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+L);return K},b.qualifyAttr=function(L){if(-1!==L.indexOf(":")){var U=L.split(":");return{ns:e[U[0]],local:U[1]}}return{ns:null,local:L}},b.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,b.transformSeparatorRegex=/[ ,]+/,b.transformationListRegex=/^(\w+)\((.*)\)/,b.transformStringToMatrix=function(L){var U=b.createSVGMatrix(),K=L&&L.match(b.transformRegex);if(!K)return U;for(var it=0,gt=K.length;it<gt;it++){var Ot=K[it].match(b.transformationListRegex);if(Ot){var Gt,se,ee,ce,me,ye=b.createSVGMatrix(),Oe=Ot[2].split(b.transformSeparatorRegex);switch(Ot[1].toLowerCase()){case"scale":Gt=parseFloat(Oe[0]),se=void 0===Oe[1]?Gt:parseFloat(Oe[1]),ye=ye.scaleNonUniform(Gt,se);break;case"translate":ee=parseFloat(Oe[0]),ce=parseFloat(Oe[1]),ye=ye.translate(ee,ce);break;case"rotate":me=parseFloat(Oe[0]),ee=parseFloat(Oe[1])||0,ce=parseFloat(Oe[2])||0,ye=0!==ee||0!==ce?ye.translate(ee,ce).rotate(me).translate(-ee,-ce):ye.rotate(me);break;case"skewx":me=parseFloat(Oe[0]),ye=ye.skewX(me);break;case"skewy":me=parseFloat(Oe[0]),ye=ye.skewY(me);break;case"matrix":ye.a=parseFloat(Oe[0]),ye.b=parseFloat(Oe[1]),ye.c=parseFloat(Oe[2]),ye.d=parseFloat(Oe[3]),ye.e=parseFloat(Oe[4]),ye.f=parseFloat(Oe[5]);break;default:continue}U=U.multiply(ye)}}return U},b.matrixToTransformString=function(L){return L||(L=!0),"matrix("+(void 0!==L.a?L.a:1)+","+(void 0!==L.b?L.b:0)+","+(void 0!==L.c?L.c:0)+","+(void 0!==L.d?L.d:1)+","+(void 0!==L.e?L.e:0)+","+(void 0!==L.f?L.f:0)+")"},b.parseTransformString=function(L){var U,K,it;if(L){var gt=b.transformSeparatorRegex;if(L.trim().indexOf("matrix")>=0){var It=b.transformStringToMatrix(L),Ot=b.decomposeMatrix(It);it=[Ot.scaleX,Ot.scaleY],K=[Ot.rotation];var Gt=[];(0!==(U=[Ot.translateX,Ot.translateY])[0]||0!==U[1])&&Gt.push("translate("+U+")"),(1!==it[0]||1!==it[1])&&Gt.push("scale("+it+")"),0!==K[0]&&Gt.push("rotate("+K+")"),L=Gt.join(" ")}else{var se=L.match(/translate\((.*?)\)/);se&&(U=se[1].split(gt));var ee=L.match(/rotate\((.*?)\)/);ee&&(K=ee[1].split(gt));var ce=L.match(/scale\((.*?)\)/);ce&&(it=ce[1].split(gt))}}var me=it&&it[0]?parseFloat(it[0]):1;return{value:L,translate:{tx:U&&U[0]?parseInt(U[0],10):0,ty:U&&U[1]?parseInt(U[1],10):0},rotate:{angle:K&&K[0]?parseInt(K[0],10):0,cx:K&&K[1]?parseInt(K[1],10):void 0,cy:K&&K[2]?parseInt(K[2],10):void 0},scale:{sx:me,sy:it&&it[1]?parseFloat(it[1]):me}}},b.deltaTransformPoint=function(L,U){return{x:U.x*L.a+U.y*L.c+0,y:U.x*L.b+U.y*L.d+0}},b.decomposeMatrix=function(L){var U=b.deltaTransformPoint(L,{x:0,y:1}),K=b.deltaTransformPoint(L,{x:1,y:0}),it=180/o*s(U.y,U.x)-90,gt=180/o*s(K.y,K.x);return{translateX:L.e,translateY:L.f,scaleX:c(L.a*L.a+L.b*L.b),scaleY:c(L.c*L.c+L.d*L.d),skewX:it,skewY:gt,rotation:it}},b.matrixToScale=function(L){var U,K,it,gt;return L?(U=b.isUndefined(L.a)?1:L.a,gt=b.isUndefined(L.d)?1:L.d,K=L.b,it=L.c):U=gt=1,{sx:K?c(U*U+K*K):U,sy:it?c(it*it+gt*gt):gt}},b.matrixToRotate=function(L){var U={x:0,y:1};return L&&(U=b.deltaTransformPoint(L,U)),{angle:Zr(zr(s(U.y,U.x))-90)}},b.matrixToTranslate=function(L){return{tx:L&&L.e||0,ty:L&&L.f||0}},b.isV=function(L){return L instanceof b},b.isVElement=b.isV,b.isSVGGraphicsElement=function(L){return!!L&&(L=b.toNode(L))instanceof SVGElement&&"function"==typeof L.getScreenCTM};var Nt=b("svg").node;return b.createSVGMatrix=function(L){var U=Nt.createSVGMatrix();for(var K in L)U[K]=L[K];return U},b.createSVGTransform=function(L){return b.isUndefined(L)?Nt.createSVGTransform():(L instanceof SVGMatrix||(L=b.createSVGMatrix(L)),Nt.createSVGTransformFromMatrix(L))},b.createSVGPoint=function(L,U){var K=Nt.createSVGPoint();return K.x=L,K.y=U,K},b.transformRect=function(L,U){var K=Nt.createSVGPoint();K.x=L.x,K.y=L.y;var it=K.matrixTransform(U);K.x=L.x+L.width,K.y=L.y;var gt=K.matrixTransform(U);K.x=L.x+L.width,K.y=L.y+L.height;var It=K.matrixTransform(U);K.x=L.x,K.y=L.y+L.height;var Ot=K.matrixTransform(U),Gt=v(it.x,gt.x,It.x,Ot.x),se=m(it.x,gt.x,It.x,Ot.x),ee=v(it.y,gt.y,It.y,Ot.y),ce=m(it.y,gt.y,It.y,Ot.y);return new de(Gt,ee,se-Gt,ce-ee)},b.transformPoint=function(L,U){return new ht(b.createSVGPoint(L.x,L.y).matrixTransform(U))},b.transformLine=function(L,U){return new be(b.transformPoint(L.start,U),b.transformPoint(L.end,U))},b.transformPolyline=function(L,U){var K=L instanceof Fn?L.points:L;b.isArray(K)||(K=[]);for(var it=[],gt=0,It=K.length;gt<It;gt++)it[gt]=b.transformPoint(K[gt],U);return new Fn(it)},b.styleToObject=function(L){for(var U={},K=L.split(";"),it=0;it<K.length;it++){var It=K[it].split("=");U[It[0].trim()]=It[1].trim()}return U},b.createSlicePathData=function(L,U,K,it){var gt=2*o-1e-6,It=L,Ot=U,Gt=K,se=it,ee=(se<Gt&&(ee=Gt,Gt=se,se=ee),se-Gt),ce=ee<o?"0":"1",me=S(Gt),ye=A(Gt),Oe=S(se),Hn=A(se);return ee>=gt?It?"M0,"+Ot+"A"+Ot+","+Ot+" 0 1,1 0,"+-Ot+"A"+Ot+","+Ot+" 0 1,1 0,"+Ot+"M0,"+It+"A"+It+","+It+" 0 1,0 0,"+-It+"A"+It+","+It+" 0 1,0 0,"+It+"Z":"M0,"+Ot+"A"+Ot+","+Ot+" 0 1,1 0,"+-Ot+"A"+Ot+","+Ot+" 0 1,1 0,"+Ot+"Z":It?"M"+Ot*me+","+Ot*ye+"A"+Ot+","+Ot+" 0 "+ce+",1 "+Ot*Oe+","+Ot*Hn+"L"+It*Oe+","+It*Hn+"A"+It+","+It+" 0 "+ce+",0 "+It*me+","+It*ye+"Z":"M"+Ot*me+","+Ot*ye+"A"+Ot+","+Ot+" 0 "+ce+",1 "+Ot*Oe+","+Ot*Hn+"L0,0Z"},b.mergeAttrs=function(L,U){for(var K in U)L[K]="class"===K?L[K]?L[K]+" "+U[K]:U[K]:"style"===K?b.isObject(L[K])&&b.isObject(U[K])?b.mergeAttrs(L[K],U[K]):b.isObject(L[K])?b.mergeAttrs(L[K],b.styleToObject(U[K])):b.isObject(U[K])?b.mergeAttrs(b.styleToObject(L[K]),U[K]):b.mergeAttrs(b.styleToObject(L[K]),b.styleToObject(U[K])):U[K];return L},b.annotateString=function(L,U,K){U=U||[];for(var It,Gt,se,it=(K=K||{}).offset||0,gt=[],Ot=[],ee=0;ee<L.length;ee++){Gt=Ot[ee]=L[ee];for(var ce=0;ce<U.length;ce++){var me=U[ce];ee>=me.start+it&&ee<me.end+it&&(b.isObject(Gt)?Gt.attrs=b.mergeAttrs(b.mergeAttrs({},Gt.attrs),me.attrs):Gt=Ot[ee]={t:L[ee],attrs:me.attrs},K.includeAnnotationIndices&&(Gt.annotations||(Gt.annotations=[])).push(ce))}(se=Ot[ee-1])?b.isObject(Gt)&&b.isObject(se)?JSON.stringify(Gt.attrs)===JSON.stringify(se.attrs)?It.t+=Gt.t:(gt.push(It),It=Gt):b.isObject(Gt)||b.isObject(se)?(gt.push(It),It=Gt):It=(It||"")+Gt:It=Gt}return It&&gt.push(It),gt},b.findAnnotationsAtIndex=function(L,U){var K=[];return L&&L.forEach(function(it){it.start<U&&U<=it.end&&K.push(it)}),K},b.findAnnotationsBetweenIndexes=function(L,U,K){var it=[];return L&&L.forEach(function(gt){(U>=gt.start&&U<gt.end||K>gt.start&&K<=gt.end||gt.start>=U&&gt.end<K)&&it.push(gt)}),it},b.shiftAnnotations=function(L,U,K){return L&&L.forEach(function(it){it.start<U&&it.end>=U?it.end+=K:it.start>=U&&(it.start+=K,it.end+=K)}),L},b.convertLineToPathData=function(L){return["M",(L=b(L)).attr("x1"),L.attr("y1"),"L",L.attr("x2"),L.attr("y2")].join(" ")},b.convertPolygonToPathData=function(L){var U=b.getPointsFromSvgNode(L);return 0===U.length?null:b.svgPointsToPath(U)+" Z"},b.convertPolylineToPathData=function(L){var U=b.getPointsFromSvgNode(L);return 0===U.length?null:b.svgPointsToPath(U)},b.svgPointsToPath=function(L){for(var U=0,K=L.length;U<K;U++)L[U]=L[U].x+" "+L[U].y;return"M "+L.join(" L")},b.getPointsFromSvgNode=function(L){var U=[],K=(L=b.toNode(L)).points;if(K)for(var it=0,gt=K.numberOfItems;it<gt;it++)U.push(K.getItem(it));return U},b.KAPPA=.551784,b.convertCircleToPathData=function(L){L=b(L);var U=parseFloat(L.attr("cx"))||0,K=parseFloat(L.attr("cy"))||0,it=parseFloat(L.attr("r")),gt=it*b.KAPPA;return["M",U,K-it,"C",U+gt,K-it,U+it,K-gt,U+it,K,"C",U+it,K+gt,U+gt,K+it,U,K+it,"C",U-gt,K+it,U-it,K+gt,U-it,K,"C",U-it,K-gt,U-gt,K-it,U,K-it,"Z"].join(" ")},b.convertEllipseToPathData=function(L){L=b(L);var U=parseFloat(L.attr("cx"))||0,K=parseFloat(L.attr("cy"))||0,it=parseFloat(L.attr("rx")),gt=parseFloat(L.attr("ry"))||it,It=it*b.KAPPA,Ot=gt*b.KAPPA;return["M",U,K-gt,"C",U+It,K-gt,U+it,K-Ot,U+it,K,"C",U+it,K+Ot,U+It,K+gt,U,K+gt,"C",U-It,K+gt,U-it,K+Ot,U-it,K,"C",U-it,K-Ot,U-It,K-gt,U,K-gt,"Z"].join(" ")},b.convertRectToPathData=function(L){return L=b(L),b.rectToPath({x:parseFloat(L.attr("x"))||0,y:parseFloat(L.attr("y"))||0,width:parseFloat(L.attr("width"))||0,height:parseFloat(L.attr("height"))||0,rx:parseFloat(L.attr("rx"))||0,ry:parseFloat(L.attr("ry"))||0})},b.rectToPath=function(L){var K=L.x,it=L.y,gt=L.width,It=L.height,Ot=v(L.rx||L["top-rx"]||0,gt/2),Gt=v(L.rx||L["bottom-rx"]||0,gt/2),se=v(L.ry||L["top-ry"]||0,It/2),ee=v(L.ry||L["bottom-ry"]||0,It/2);return(Ot||Gt||se||ee?["M",K,it+se,"v",It-se-ee,"a",Gt,ee,0,0,0,Gt,ee,"h",gt-2*Gt,"a",Gt,ee,0,0,0,Gt,-ee,"v",-(It-ee-se),"a",Ot,se,0,0,0,-Ot,-se,"h",-(gt-2*Ot),"a",Ot,se,0,0,0,-Ot,se,"Z"]:["M",K,it,"H",K+gt,"V",it+It,"H",K,"V",it,"Z"]).join(" ")},b.normalizePathData=function(){var L="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",U=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),K=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig"),it=Math,gt=it.PI,It=it.sin,Ot=it.cos,Gt=it.tan,se=it.asin,ee=it.sqrt,ce=it.abs;function me(Fe,tn,Ue,ze,wn,$n){var Kn=.3333333333333333,bn=2/3;return[Kn*Fe+bn*Ue,Kn*tn+bn*ze,Kn*wn+bn*Ue,Kn*$n+bn*ze,wn,$n]}function ye(Fe,tn,Ue){return{x:Fe*Ot(Ue)-tn*It(Ue),y:Fe*It(Ue)+tn*Ot(Ue)}}function Oe(Fe,tn,Ue,ze,wn,$n,Kn,bn,dr,Ln){var we,un=120*gt/180,Tn=gt/180*(+wn||0),He=[];if(Ln)h=Ln[0],T=Ln[1],a=Ln[2],u=Ln[3];else{tn=(we=ye(Fe,tn,-Tn)).y;var Qr=((Fe=we.x)-(bn=(we=ye(bn,dr,-Tn)).x))/2,si=(tn-(dr=we.y))/2,oa=Qr*Qr/(Ue*Ue)+si*si/(ze*ze);oa>1&&(Ue*=oa=ee(oa),ze*=oa);var jl=Ue*Ue,Ul=ze*ze,Vf=($n==Kn?-1:1)*ee(ce((jl*Ul-jl*si*si-Ul*Qr*Qr)/(jl*si*si+Ul*Qr*Qr))),a=Vf*Ue*si/ze+(Fe+bn)/2,u=Vf*-ze*Qr/Ue+(tn+dr)/2,h=se(((tn-u)/ze).toFixed(9)),T=se(((dr-u)/ze).toFixed(9));(h=Fe<a?gt-h:h)<0&&(h=2*gt+h),(T=bn<a?gt-T:T)<0&&(T=2*gt+T),Kn&&h>T&&(h-=2*gt),!Kn&&T>h&&(T-=2*gt)}var j=T-h;if(ce(j)>un){var q=T,ft=bn,bt=dr;He=Oe(bn=a+Ue*Ot(T=h+un*(Kn&&T>h?1:-1)),dr=u+ze*It(T),Ue,ze,wn,0,Kn,ft,bt,[T,q,a,u])}j=T-h;var kt=Ot(h),Zt=It(h),qt=Ot(T),oe=It(T),_e=Gt(j/4),Me=4/3*(Ue*_e),Xe=4/3*(ze*_e),mn=[Fe,tn],je=[Fe+Me*Zt,tn-Xe*kt],En=[bn+Me*oe,dr-Xe*qt],On=[bn,dr];if(je[0]=2*mn[0]-je[0],je[1]=2*mn[1]-je[1],Ln)return[je,En,On].concat(He);for(var Mi=[],wi=(He=[je,En,On].concat(He).join().split(",")).length,Ir=0;Ir<wi;Ir++)Mi[Ir]=Ir%2?ye(He[Ir-1],He[Ir],Tn).y:ye(He[Ir],He[Ir+1],Tn).x;return Mi}function Qn(Fe){var tn=function An(Fe){if((!Array.isArray(Fe)||!Array.isArray(Fe&&Fe[0]))&&(Fe=function Hn(Fe){if(!Fe)return null;var tn={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Ue=[];return String(Fe).replace(U,function(ze,wn,$n){var Kn=[],bn=wn.toLowerCase();for($n.replace(K,function(dr,Ln){Ln&&Kn.push(+Ln)}),"m"===bn&&Kn.length>2&&(Ue.push([wn].concat(Kn.splice(0,2))),bn="l",wn="m"===wn?"l":"L");Kn.length>=tn[bn]&&(Ue.push([wn].concat(Kn.splice(0,tn[bn]))),tn[bn]););}),Ue}(Fe)),!Fe||!Fe.length)return[["M",0,0]];for(var bn,tn=[],Ue=0,ze=0,wn=0,$n=0,dr=Fe.length,Ln=0;Ln<dr;Ln++){var un=[];tn.push(un);var He,we,Tn=Fe[Ln];if((bn=Tn[0])!=bn.toUpperCase())switch(un[0]=bn.toUpperCase(),un[0]){case"A":un[1]=Tn[1],un[2]=Tn[2],un[3]=Tn[3],un[4]=Tn[4],un[5]=Tn[5],un[6]=+Tn[6]+Ue,un[7]=+Tn[7]+ze;break;case"V":un[1]=+Tn[1]+ze;break;case"H":un[1]=+Tn[1]+Ue;break;case"M":for(wn=+Tn[1]+Ue,$n=+Tn[2]+ze,He=Tn.length,we=1;we<He;we++)un[we]=+Tn[we]+(we%2?Ue:ze);break;default:for(He=Tn.length,we=1;we<He;we++)un[we]=+Tn[we]+(we%2?Ue:ze)}else for(var Qr=Tn.length,si=0;si<Qr;si++)un[si]=Tn[si];switch(un[0]){case"Z":Ue=+wn,ze=+$n;break;case"H":Ue=un[1];break;case"V":ze=un[1];break;case"M":wn=un[un.length-2],$n=un[un.length-1],Ue=un[un.length-2],ze=un[un.length-1];break;default:Ue=un[un.length-2],ze=un[un.length-1]}}return tn}(Fe),Ue={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function ze(He,we,Qr){var si,oa;if(!He)return["C",we.x,we.y,we.x,we.y,we.x,we.y];switch(He[0]in{T:1,Q:1}||(we.qx=null,we.qy=null),He[0]){case"M":we.X=He[1],we.Y=He[2];break;case"A":He=0===parseFloat(He[1])||0===parseFloat(He[2])?["L",He[6],He[7]]:["C"].concat(Oe.apply(0,[we.x,we.y].concat(He.slice(1))));break;case"S":"C"===Qr||"S"===Qr?(si=2*we.x-we.bx,oa=2*we.y-we.by):(si=we.x,oa=we.y),He=["C",si,oa].concat(He.slice(1));break;case"T":"Q"===Qr||"T"===Qr?(we.qx=2*we.x-we.qx,we.qy=2*we.y-we.qy):(we.qx=we.x,we.qy=we.y),He=["C"].concat(me(we.x,we.y,we.qx,we.qy,He[1],He[2]));break;case"Q":we.qx=He[1],we.qy=He[2],He=["C"].concat(me(we.x,we.y,He[1],He[2],He[3],He[4]));break;case"H":He=["L"].concat(He[1],we.y);break;case"V":He=["L"].concat(we.x,He[1])}return He}function wn(He,we){if(He[we].length>7){He[we].shift();for(var Qr=He[we];Qr.length;)$n[we]="A",He.splice(we++,0,["C"].concat(Qr.splice(0,6)));He.splice(we,1),dr=tn.length}}for(var $n=[],Kn="",bn="",dr=tn.length,Ln=0;Ln<dr;Ln++){tn[Ln]&&(Kn=tn[Ln][0]),"C"!==Kn&&($n[Ln]=Kn,Ln>0&&(bn=$n[Ln-1])),tn[Ln]=ze(tn[Ln],Ue,bn),"A"!==$n[Ln]&&"C"===Kn&&($n[Ln]="C"),wn(tn,Ln);var un=tn[Ln],Tn=un.length;Ue.x=un[Tn-2],Ue.y=un[Tn-1],Ue.bx=parseFloat(un[Tn-4])||Ue.x,Ue.by=parseFloat(un[Tn-3])||Ue.y}return(!tn[0][0]||"M"!==tn[0][0])&&tn.unshift(["M",0,0]),tn}return function(Fe){return Qn(Fe).join(",").split(",").join(" ")}}(),b.namespace=e,b.g=g,b}(),$r={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},sr=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,$r.classNamePrefix.length)!==$r.classNamePrefix&&(e=$r.classNamePrefix+e),e}).join(" ")},So=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,$r.classNamePrefix.length)===$r.classNamePrefix&&(e=e.substr($r.classNamePrefix.length)),e}).join(" ")},pi=function(t,e){for(var n={},r={},o=Yt.namespace.svg,s=e||o,c=document.createDocumentFragment(),v=[t,c,s];v.length>0;){s=v.pop();for(var m=v.pop(),S=v.pop(),A=0,b=S.length;A<b;A++){var G=S[A];if(!G.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var tt=G.tagName;G.hasOwnProperty("namespaceURI")&&(s=G.namespaceURI);var ot=document.createElementNS(s,tt),Tt=s===o,Ct=Tt?Yt:Pn,Dt=G.attributes;Dt&&Ct(ot).attr(Dt);var Nt=G.style;if(Nt&&Pn(ot).css(Nt),G.hasOwnProperty("className")){var L=G.className;Tt?ot.className.baseVal=L:ot.className=L}if(G.hasOwnProperty("textContent")&&(ot.textContent=G.textContent),G.hasOwnProperty("selector")){var U=G.selector;if(n[U])throw new Error("json-dom-parser: selector must be unique");n[U]=ot,Ct(ot).attr("joint-selector",U)}if(G.hasOwnProperty("groupSelector")){var K=G.groupSelector;Array.isArray(K)||(K=[K]);for(var it=0,gt=K.length;it<gt;it++){var It=K[it],Ot=r[It];Ot||(Ot=r[It]=[]),Ot.push(ot)}}m.appendChild(ot);var Gt=G.children;Array.isArray(Gt)&&v.push(Gt,ot,s)}}return{fragment:c,selectors:n,groupSelectors:r}},cr=function(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},Pi=function(t,e,n){for(var o,r=Array.isArray(e)?e:e.split(n||"/"),s=0,c=r.length;s<c;){if(o=r[s++],Object(t)!==t||!(o in t))return;t=t[o]}return t},ei=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),!("constructor"===e&&"function"==typeof t[e]||"__proto__"===e)},Ji=function(t,e,n,r){const o=Array.isArray(e)?e:e.split(r||"/"),s=o.length-1;let c=t,v=0;for(;v<s;v++){const m=o[v];if(!ei(c,m))return t;c=c[m]||(c[m]={})}return c[o[s]]=n,t},Ua=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),o=r.length-1;let s=t,c=0;for(;c<o;c++){const v=r[c];if(!ei(s,v))return t;const m=s[v];if(!m)return t;s=m}return delete s[r[o]],t},In=function(t){return In.id=In.id||1,t.id=void 0===t.id?"j_"+In.id++:t.id,t.id},so=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},Er=function(t){var e=t,n=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(n){for(var r in t)void 0===n[r]&&(n[r]=t[r]);e=n}var o=e.target;if(o){var s=o.correspondingUseElement;s&&(e.target=s)}return e},za=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),s=setTimeout(function(){n(r+o)},o);return e=r+o,s}}return function(n,r,...o){return t(void 0!==r?n.bind(r,...o):n)}}(),ss=((e="undefined"!=typeof window)&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t),ni=function(t){return Vn(t)&&"%"===t.slice(-1)},ma=function(t,e){var r=parseFloat(t);if(Number.isNaN(r))return null;var s,o={};if(o.value=r,null==e)s="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;s=e.join("|")}else Vn(e)&&(s=e);var c=function n(v){var m=new RegExp("(?:\\d+(?:\\.\\d+)*)("+v+")$").exec(t);return m?m[1]:null}(s);return null===c?null:(o.unit=c,o)},To=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,o,s;return n=r=o=s=0,isFinite(t.vertical)&&(n=o=+t.vertical),isFinite(t.horizontal)&&(r=s=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(o=+t.bottom),isFinite(t.left)&&(s=+t.left),{top:n,right:r,bottom:o,left:s}},Fi={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var o=t(r);return o<e?e:o>n?n:o}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Vi={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var o,s,c={};for(o=n.length-1;-1!=o;o--)c[s=n[o]]=t[s]+(e[s]-t[s])*r;return c}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),o=255&n,s=(255&r)-o,c=65280&n,v=(65280&r)-c,m=16711680&n,S=(16711680&r)-m;return function(A){return"#"+(1<<24|o+s*A&255|c+v*A&65280|m+S*A&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),o=n.exec(e),s=o[1].indexOf("."),c=s>0?o[1].length-s-1:0,v=+o[1]-(t=+r[1]),m=r[2];return function(S){return(t+v*S).toFixed(c)+m}}},uo={outline:function(t){var n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return Fr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){return Fr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Fr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Fr(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Fr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Fr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Fr=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var o=Array.from(arguments),s=o.slice(1,4).find(function(m){return!!m}),c=s.split("."),v=n[c.shift()];void 0!==v&&c.length;)v=v[c.shift()];return void 0!==v?v:""})}},Ve=rn.assign,gi=rn.defaults,Es=rn.defaultsDeep,Hi=rn.invokeMap||rn.invoke,Ps=rn.sortedIndexBy||rn.sortedIndex,vi=rn.uniqBy||rn.uniq,wt=rn.clone,Wt=rn.cloneDeep,Vt=rn.isEmpty,Ce=rn.isEqual,ve=rn.isFunction,Je=rn.isPlainObject,ke=rn.toArray,Ga=rn.groupBy,Z=rn.flattenDeep,dt=rn.without,_t=rn.difference,Mt=rn.union,Jt=rn.has,Bt=rn.result,fe=rn.omit,ge=rn.pick,Pe=rn.forIn,We=rn.camelCase,xn=rn.uniqueId,qe=function(){if(rn.mergeWith){var t=Array.from(arguments),e=t[t.length-1],n=ve(e)?e:Un;return t.push(function(r,o){var s=n(r,o);return void 0!==s?s:Array.isArray(r)&&!Array.isArray(o)?o:void 0}),rn.mergeWith.apply(this,t)}return rn.merge.apply(this,arguments)},an=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},jn=function(t){return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===Object.prototype.toString.call(t)},Vn=function(t){return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t)},Un=function(){};var t,e,pr=f(71066);function lo(t){t=vi(t);const e=ke(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return ke(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const c=r.source(),v=r.target();c.id&&e[c.id]&&r.prop("source/id",e[c.id].id),v.id&&e[v.id]&&r.prop("target/id",e[v.id].id)}const o=n.get("parent");o&&e[o]&&r.set("parent",e[o].id);const s=ke(n.get("embeds")).reduce(function(c,v){return e[v]&&c.push(e[v].id),c},[]);Vt(s)||r.set("embeds",s)}),e}const fr={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},As=Object.keys(fr).map(t=>fr[t]).join(""),ya="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Qs=/\s/g,Xl=new RegExp(`^(${ya}\\*)?([${As}])([-+]{1,2}${ya})?$`,"g");function Kl(t){throw new Error(`Invalid calc() expression: ${t}`)}function Bf(t,e){const n=Xl.exec(t.replace(Qs,""));n||Kl(t),Xl.lastIndex=0;const[,r=1,o,s=0]=n,{x:c,y:v,width:m,height:S}=e;let A=0;switch(o){case fr.width:A=m;break;case fr.height:A=S;break;case fr.x:A=c;break;case fr.y:A=v;break;case fr.minimum:A=Math.min(S,m);break;case fr.maximum:A=Math.max(S,m);break;case fr.diagonal:A=Math.sqrt(S*S+m*m)}return parseFloat(r)*A+function Zs(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(s)}function ls(t){return"string"==typeof t&&t.includes("calc")}const Jl="calc(".length;function tu(t,e){let n=t,r=0;for(;;){let o=n.indexOf("calc(",r);if(-1===o)return n;let s=o+Jl,c=1;t:for(;;){switch(n[s]){case"(":c++;break;case")":if(c--,0===c)break t;break;case void 0:Kl(n)}s++}let v=n.slice(o+Jl,s);ls(v)&&(v=tu(v,e));const m=String(Bf(v,e));n=n.slice(0,o)+m+n.slice(s+1),r=o+m.length}}function xa(t,e){return function(n,r){var o=ni(n);n=parseFloat(n),o&&(n/=100);var s={};if(isFinite(n)){var c=o||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);s[t]=c}return s}}function eu(t,e,n){return function(r,o){var c,s=ni(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var v=o[n]();c=s||r>0&&r<1?v[t]+o[e]*r:v[t]+r}var m=ht();return m[t]=c||0,m}}function Pr(t,e,n){return function(r,o){var s;s="middle"===r?o[e]/2:r===n?o[e]:isFinite(r)?r>-1&&r<1?-o[e]*r:-r:ni(r)?o[e]*parseFloat(r)/100:0;var c=ht();return c[t]=-(o[t]+s),c}}function Xr(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(o,s,c){var v=Pn(c),m=v.data(n);if(!m||m.value!==o){var S=t(o);m={value:o,shape:S,shapeBBox:S.bbox()},v.data(n,m)}var A=m.shape.clone(),b=m.shapeBBox.clone(),G=b.origin(),tt=s.origin();b.x=tt.x,b.y=tt.y;var ot=s.maxRectScaleToFit(b,tt);return A.scale(0===b.width||0===s.width?1:ot.sx,0===b.height||0===s.height?1:ot.sy,G),r&&A.translate(-G.x,-G.y),A}}function Ql(t){var n=Xr(function e(r){return new Ae(Yt.normalizePathData(r))},t);return function(r,o,s){return{d:n(r,o,s).serialize()}}}function Zl(t){var e=Xr(Fn,t);return function(n,r,o){return{points:e(n,r,o).serialize()}}}function Is(t,e){var n=new ht(1,0);return function(r){var o,s,c=this[t](r);return c?(s=e.rotate?c.vector().vectorAngle(n):0,o=c.start):(o=this.path.start,s=0),0===s?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+s+")"}}}function ql(t){return function(n,r,o){const s=Yt(o);s.attr(t)!==n&&s.attr(t,n)}}function ba(t,e,n){return void 0!==n.text}function zo(){return this.model.isLink()}function Ms(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return void 0===r&&(r=t["stroke-opacity"]),void 0===r&&(r=t.opacity),void 0!==r&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function Wa(t){const{paper:e}=this;return`url(#${"pattern"===t.type?e.definePattern(t):e.defineGradient(t)})`}const dn={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:ql("href")},xlinkHref:{set:ql("xlink:href")},filter:{qualify:Je,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Je,set:Wa},stroke:{qualify:Je,set:Wa},sourceMarker:{qualify:Je,set:function(t,e,n,r){return t=Ve(Ms(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Je,set:function(t,e,n,r){return t=Ve(Ms(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Je,set:function(t,e,n,r){return t=Ve(Ms(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!Je(n.textWrap)},set:function(t,e,n,r){var o=Pn(n),s="joint-text",c=o.data(s),v=ge(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:m}=v;ls(m)&&(v.x=tu(m,e));var S=v.fontSize=r["font-size"]||r.fontSize,A=JSON.stringify([t,v]);if(void 0===c||c!==A){S&&n.setAttribute("font-size",S);var b=v.textPath;if(an(b)){var G=b.selector;if("string"==typeof G){var tt=this.findBySelector(G)[0];tt instanceof SVGPathElement&&(v.textPath=Ve({"xlink:href":"#"+tt.id},b))}}Yt(n).text(""+t,v),o.data(s,A)}}},textWrap:{qualify:Je,set:function(t,e,n,r){var o=t.width||0,s={};s.width=ni(o)?e.width*parseFloat(o)/100:o<=0?e.width+o:o;var c=t.height||0;s.height=ni(c)?e.height*parseFloat(c)/100:c<=0?e.height+c:c;var v,m=t.text;void 0===m&&(m=r.text),v=void 0!==m?function(t,e,n={},r={}){var o=e.width,s=e.height,c=r.svgDocument||Yt("svg").node,v=Yt("tspan").node,m=Yt("text").attr(n).append(v).node,S=document.createTextNode("");m.style.opacity=0,m.style.display="block",v.style.display="block",v.appendChild(S),c.appendChild(m),r.svgDocument||document.body.appendChild(c);var A=r.separator||" ",b=r.eol||"\n",G=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,tt=r.maxLineCount;jn(tt)||(tt=1/0);for(var Dt,Nt,L,ot=t.split(A),Tt=[],Ct=[],U=0,K=0,it=ot.length;U<it;U++){var gt=ot[U];if(gt){var It=!1;if(b&&gt.indexOf(b)>=0){if(gt.length>1){for(var Ot=gt.split(b),Gt=0,se=Ot.length-1;Gt<se;Gt++)Ot.splice(2*Gt+1,0,b);ot.splice(U,1,...Ot.filter(Ue=>""!==Ue)),U--,it=ot.length;continue}Ct[++K]="",It=!0}if(!It)if(S.data=Ct[K]?Ct[K]+" "+gt:gt,v.getComputedTextLength()<=o)Ct[K]=S.data,(Dt||Nt)&&(Tt[K++]=!0,Dt=0,Nt=0);else{if(!Ct[K]||Dt){var ee=!!Dt;if(Dt=gt.length-1,ee||!Dt){if(!Dt){if(!Ct[K]){Ct=[];break}ot.splice(U,2,gt+ot[U+1]),it--,Tt[K++]=!0,U--;continue}ot[U]=gt.substring(0,Dt),ot[U+1]=gt.substring(Dt)+(void 0===ot[U+1]?"":ot[U+1])}else{if(Nt)ot.splice(U,2,ot[U]+ot[U+1]),Nt=0;else{var ce=gt.search(G);ce>-1&&ce!==gt.length-1&&0!==ce&&(Nt=ce+1,Dt=0),ot.splice(U,1,gt.substring(0,Nt||Dt),gt.substring(Nt||Dt)),it++}K&&!Tt[K-1]&&K--}U--;continue}K++,U--}var me=null;if(Ct.length>tt)me=tt-1;else if(void 0!==s){var ye;void 0===L&&(L=(ye="auto"===n.lineHeight?{value:1.5,unit:"em"}:ma(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===ye.unit&&(L*=m.getBBox().height)),L*Ct.length>s&&(me=Math.floor(s/L)-1)}if(null!==me){Ct.splice(me+1);var Oe=r.ellipsis;if(!Oe||me<0)break;"string"!=typeof Oe&&(Oe="\u2026");var Hn=Ct[me];if(!Hn&&!It)break;var Qn,Fe,An=Hn.length;do{if(Fe=Hn[An],Qn=Hn.substring(0,An),Fe?Fe.match(A)&&(Qn+=Fe):Qn+="string"==typeof A?A:" ",S.data=Qn+=Oe,v.getComputedTextLength()<=o){Ct[me]=Qn;break}An--}while(An>=0);break}}}return r.svgDocument?c.removeChild(m):document.body.removeChild(c),Ct.join(b)}(""+m,s,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",dn.text.set.call(this,v,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=Pn(n),o="joint-title",s=r.data(o);if(void 0===s||s!==t){r.data(o,t);var c=n.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=t;else{var v=document.createElementNS(n.namespaceURI,"title");v.textContent=t,n.insertBefore(v,c)}}}},lineHeight:{qualify:ba},textVerticalAnchor:{qualify:ba},textPath:{qualify:ba},annotations:{qualify:ba},eol:{qualify:ba},displayEmpty:{qualify:ba},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:Je,set:function(t,e,n){Pn(n).css(t)}},html:{set:function(t,e,n){Pn(n).html(t+"")}},ref:{},refX:{position:eu("x","width","origin")},refY:{position:eu("y","height","origin")},refDx:{position:eu("x","width","corner")},refDy:{position:eu("y","height","corner")},refWidth:{set:xa("width","width")},refHeight:{set:xa("height","height")},refRx:{set:xa("rx","width")},refRy:{set:xa("ry","height")},refRInscribed:{set:function(t){var e=xa("r","width"),n=xa("r","height");return function(r,o){return(o.height>o.width?e:n)(r,o)}}()},refRCircumscribed:{set:function(t,e){var n=ni(t);t=parseFloat(t),n&&(t/=100);var o,r=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(o=n||t>=0&&t<=1?t*r:Math.max(t+r,0)),{r:o}}},refCx:{set:xa("cx","width")},refCy:{set:xa("cy","height")},xAlignment:{offset:Pr("x","width","right")},yAlignment:{offset:Pr("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:Ql({resetOffset:!0})},refDKeepOffset:{set:Ql({resetOffset:!1})},refPointsResetOffset:{set:Zl({resetOffset:!0})},refPointsKeepOffset:{set:Zl({resetOffset:!1})},connection:{qualify:zo,set:function({stubs:t=0}){let e;if(isFinite(t)&&0!==t){let n;n=t<0?(this.getConnectionLength()+t)/2:t;const r=this.getConnection(),o=r.divideAtLength(n),s=r.divideAtLength(-n);o&&s&&(e=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:zo,set:Is("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:zo,set:Is("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:zo,set:Is("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:zo,set:Is("getTangentAtRatio",{rotate:!1})}};dn["xlink:href"]=dn.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{dn[t]={qualify:ls,set:function(n,r){return{[t]:tu(n,r)}}}}),dn.refR=dn.refRInscribed,dn.refD=dn.refDResetOffset,dn.refPoints=dn.refPointsResetOffset,dn.atConnectionLength=dn.atConnectionLengthKeepGradient,dn.atConnectionRatio=dn.atConnectionRatioKeepGradient,dn.refX2=dn.refX,dn.refY2=dn.refY,dn.refWidth2=dn.refWidth,dn.refHeight2=dn.refHeight,dn["ref-x"]=dn.refX,dn["ref-y"]=dn.refY,dn["ref-dy"]=dn.refDy,dn["ref-dx"]=dn.refDx,dn["ref-width"]=dn.refWidth,dn["ref-height"]=dn.refHeight,dn["x-alignment"]=dn.xAlignment,dn["y-alignment"]=dn.yAlignment;const cs=dn,ji=pr.Model.extend({constructor:function(t,e){var n,r=t||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=xn("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=Bt(this,"defaults"))&&(r=qe({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=Bt(this.constructor.prototype,"defaults").attrs||{},r={};Pe(this.attributes.attrs,function(s,c){const v=e[c];Pe(s,function(m,S){an(m)&&!Array.isArray(m)?Pe(m,function(A,b){(!v||!v[S]||!Ce(v[S][b],A))&&(r[c]=r[c]||{},(r[c][S]||(r[c][S]={}))[b]=A)}):(!v||!Ce(v[S],m))&&(r[c]=r[c]||{},r[c][S]=m)})});const o=Wt(fe(this.attributes,"attrs"));return o.attrs=r,o},initialize:function(t){const e=this.getIdAttribute();(!t||!(e in t))&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},processPorts:function(){var t=this.ports,e={};Pe(this.get("attrs"),function(s,c){s&&s.port&&(void 0!==s.port.id?e[s.port.id]=s.port:e[s.port]={id:s.port})});var n={};Pe(t,function(s,c){e[c]||(n[c]=!0)}),this.graph&&!Vt(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(s){n[s.get("target").port]&&s.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(s){n[s.get("source").port]&&s.remove()})),this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const o=this.getEmbeddedCells();for(let s=0,c=o.length;s<c;s++){const v=o[s];v&&v.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};var r,n=e.maxZIndex();t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):r=[this],n=n-r.length+1;var o=e.get("cells"),s=o.indexOf(this)!==o.length-r.length;s||(s=r.some(function(c,v){return c.get("z")!==n+v})),s&&(this.startBatch("to-front"),n+=r.length,r.forEach(function(c,v){c.set("z",n+v,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};var r,n=e.minZIndex();t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):r=[this];var s=0!==e.get("cells").indexOf(this);s||(s=r.some(function(c,v){return c.get("z")!==n+v})),s&&(this.startBatch("to-back"),n-=r.length,r.forEach(function(c,v){c.set("z",n+v,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Ve([],this.get("embeds"));t.forEach(o=>{r[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,e)}),this.set("embeds",vi(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",dt(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else(e=this.getEmbeddedCells()).forEach(function(o){e.push.apply(e,o.getEmbeddedCells(t))});else e=ke(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=Vn(t)?t:t.id,r=this.parent();if(e=gi({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return ke(lo([this].concat(this.getEmbeddedCells({deep:!0}))));var e=pr.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",o=Vn(t);if(o||Array.isArray(t)){if(arguments.length>1){var s,c;o?c=(s=t).split("/"):(s=t.join(r),c=t.slice());var v=c[0],m=c.length;if((n=n||{}).propertyPath=s,n.propertyValue=e,n.propertyPathArray=c,1===m)return this.set(v,e,n);for(var S={},A=S,b=v,G=1;G<m;G++){var tt=c[G],ot=Number.isFinite(o?Number(tt):tt);A=A[b]=ot?[]:{},b=tt}S=Ji(S,c,e,"/");var Tt=qe({},this.attributes);n.rewrite&&Ua(Tt,s,"/");var Ct=qe(Tt,S);return this.set(v,Ct[v],n)}return Pi(this.attributes,t,r)}return this.set(qe({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if("attrs"===r&&(e.dirty=!0),1===n.length)return this.unset(t,e);var o=n.slice(1),s=Wt(this.get(r));return Ua(s,o,"/"),this.set(r,s,e)},attr:function(t,e,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(t)?["attrs"].concat(t):Vn(t)?"attrs/"+t:{attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/",n=Ve({duration:100,delay:10,timingFunction:Fi.linear,valueFunction:Vi.number},n);var c,s=0,v=function(b){var G,tt,ot;(tt=(b-=s=s||b)/n.duration)<1?this._transitionIds[t]=G=za(v):(tt=1,delete this._transitionIds[t]),ot=c(n.timingFunction(tt)),n.transitionId=G,this.prop(t,ot,n),G||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:m}=this;let S;return S=setTimeout(b=>{m[t]&&(m[t]=dt(m[t],S),0===m[t].length&&delete m[t]),this.stopPendingTransitions(t,r),c=n.valueFunction(Pi(this.attributes,t,r),e),this._transitionIds[t]=za(b),this.trigger("transition:start",this,t)},n.delay,v),m[t]||(m[t]=[]),m[t].push(S),S},getTransitions:function(){return Mt(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const o=t.split(e);r=r.filter(s=>Ce(o,s.split(e).slice(0,o.length)))}return r.forEach(o=>{n[o].forEach(c=>clearTimeout(c)),delete n[o]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const o=t.split(e);r=r.filter(s=>Ce(o,s.split(e).slice(0,o.length)))}r.forEach(o=>{ss(n[o]),delete n[o],this.trigger("transition:end",this,o)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Ve({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Ve({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new ht(0,0)},getPointFromConnectedLink:function(){return new ht},getBBox:function(){return new de(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new ht(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes;return e&&e[t]||cs[t]},define:function(t,e,n,r){n=Ve({defaults:Es({type:t},e,this.prototype.defaults)},n);var o=this.extend(n,r);return"undefined"!=typeof joint&&Jt(joint,"shapes")&&Ji(joint.shapes,t,o,"."),o}}),co=ji.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?wt(this.get("source")):t instanceof ji?((r=wt(e)||{}).id=t.id,this.set("source",r,n)):Je(t)?this.set("source",r=t,e):((r=wt(e)||{}).x=t.x,r.y=t.y,this.set("source",r,n));var r},target:function(t,e,n){return void 0===t?wt(this.get("target")):t instanceof ji?((r=wt(e)||{}).id=t.id,this.set("target",r,n)):Je(t)?this.set("target",r=t,e):((r=wt(e)||{}).x=t.x,r.y=t.y,this.set("target",r,n));var r},router:function(t,e,n){if(void 0===t){var r=this.get("router");return r?"object"==typeof r?wt(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof t||"function"==typeof t;return this.set("router",o?t:{name:t,args:e},o?e:n)},connector:function(t,e,n){if(void 0===t){var r=this.get("connector");return r?"object"==typeof r?wt(r):r:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof t||"function"==typeof t;return this.set("connector",o?t:{name:t,args:e},o?e:n)},label:function(t,e,n){var r=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(t=isFinite(t)&&null!==t?0|t:o)<0&&(t=o+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var o=this._normalizeVertex(e);return this.prop(["vertices",t],o,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var o=t[r],s=this._normalizeVertex(o);n.push(s)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(t=isFinite(t)&&null!==t?0|t:o)<0&&(t=o+t+1);var s=this._normalizeVertex(e);return r.splice(t,0,s),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return Je(t)?t:{x:t.x,y:t.y}},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(o){return ht(o).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!ve(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:o}=this.attributes;r.id||(n.source=t(r)),o.id||(n.target=t(o));var s=this.vertices();return s.length>0&&(n.vertices=s.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new ht(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new ht(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(ht),this.getTargetPoint()];return new Fn(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();n&&r&&(e=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),o&&(!e||e.id!==o.id)&&o.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,o=n.id;if(!r||!o)return!1;var s=r===o;if(!s&&t.deep&&this.graph){var c=this.getSourceCell(),v=this.getTargetCell();s=c.isEmbeddedIn(v)||v.isEmbeddedIn(c)}return s},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Vn(t)||jn(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){return t.id===e.id&&(t.port===e.port||!t.port&&!e.port)}});function tc(t,e,n){var r=t.toJSON();return r.angle=e||0,gi({},n,r)}function ks(t,e,n){return t.map(function(r,o,s){var c=this.pointAt((o+.5)/s.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),tc(c.round(),0,r)},qr(e,n))}function ec(t,e,n,r){var o=e.center(),s=e.width/e.height,c=e.topMiddle(),v=Tr.fromRect(e);return t.map(function(m,S,A){var b=n+r(S,A.length),G=c.clone().rotate(o,-b).scale(s,1,o),tt=m.compensateRotation?-v.tangentTheta(G):0;return(m.dx||m.dy)&&G.offset(m.dx||0,m.dy||0),m.dr&&G.move(o,m.dr),tc(G.round(),tt,m)})}function Uu(t,e){var n=e.x;Vn(n)&&(n=parseFloat(n)/100*t.width);var r=e.y;return Vn(r)&&(r=parseFloat(r)/100*t.height),ci(n||0,r||0)}const Hf=function(t,e,n){return t.map(Uu.bind(null,e))},nu=function(t,e,n){return n.fn(t,e,n)},Ls=function(t,e,n){return ks(t,Uu(e,n.start||e.origin()),Uu(e,n.end||e.corner()))},nc=function(t,e,n){return ks(t,e.origin(),e.bottomLeft())},Q=function(t,e,n){return ks(t,e.topRight(),e.corner())},fs=function(t,e,n){return ks(t,e.origin(),e.topRight())},ru=function(t,e,n){return ks(t,e.bottomLeft(),e.corner())},Zi=function(t,e,n){var o=n.step||360/t.length;return ec(t,e,n.startAngle||0,function(s){return s*o})},Mn=function(t,e,n){var o=n.step||20;return ec(t,e,n.startAngle||0,function(s,c){return(s+.5-c/2)*o})};function Ca(t,e){return Es({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function rc(t,e,n,r){r=gi({},r,{offset:15});var c,v,m,S,o=e.center().theta(t),s=ic(e),A=r.offset,b=0;o<s[1]||o>s[2]?(m=".3em",c=A,v=0,S="start"):o<s[0]?(m="0",c=0,v=-A,n?(b=-90,S="start"):S="middle"):o<s[3]?(m=".3em",c=-A,v=0,S="end"):(m=".6em",c=0,v=A,n?(b=90,S="start"):S="middle");var G=Math.round;return Ca({x:G(c),y:G(v),angle:b,attrs:{".":{y:m,"text-anchor":S}}})}function ic(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),o=e.theta(t.corner());return[n,e.theta(t.topRight()),o,r]}function _a(t,e,n,r){var s,c,v,m,o=e.center().theta(t),S=(r=gi({},r,{offset:15})).offset,A=0,b=ic(e);o<b[1]||o>b[2]?(v=".3em",s=-S,c=0,m="end"):o<b[0]?(v=".6em",s=0,c=S,n?(A=90,m="start"):m="middle"):o<b[3]?(v=".3em",s=S,c=0,m="start"):(v="0em",s=0,c=-S,n?(A=-90,m="start"):m="middle");var G=Math.round;return Ca({x:G(s),y:G(c),angle:A,attrs:{".":{y:v,"text-anchor":m}}})}function oc(t,e,n){n=gi({},n,{offset:20});var m,r=ci(0,0),o=-t.theta(r),s=o,c=t.clone().move(r,n.offset).difference(t).round(),v=".3em";(o+90)%180==0?(m=e?"end":"middle",!e&&-270===o&&(v="0em")):o>-270&&o<-90?(m="start",s=o-180):m="end";var S=Math.round;return Ca({x:S(c.x),y:S(c.y),angle:e?s:0,attrs:{".":{y:v,"text-anchor":m}}})}const jf=function(t,e,n){return Ca(n,e)},Uf=function(t,e,n){return Ca(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},zf=function(t,e,n){return Ca(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Gf=function(t,e,n){return Ca(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Go=function(t,e,n){return Ca(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Wf=function(t,e,n){return rc(t,e,!0,n)},$f=function(t,e,n){return rc(t,e,!1,n)},Yf=function(t,e,n){return _a(t,e,!0,n)},Xf=function(t,e,n){return _a(t,e,!1,n)},Kf=function(t,e,n){return oc(t.difference(e.center()),!1,n)},Wo=function(t,e,n){return oc(t.difference(e.center()),!0,n)};var ac=function(t){var e=Wt(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=w,this.portLabelLayoutNamespace=E,this._init(e)};ac.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),o=n.position||{},s=o.name,c=this.portLayoutNamespace;c[s]||(s="left");var v=o.args||{},m=r.map(function(b){return b&&b.position&&b.position.args}),S=c[s](m,e,v),A={ports:r,result:[]};return ke(S).reduce(function(b,G,tt){var ot=b.ports[tt];return b.result.push({portId:ot.id,portTransformation:G,labelTransformation:this._getPortLabelLayout(ot,ht(G),e),portAttrs:ot.attrs,portSize:ot.size,labelSize:ot.label.size}),b}.bind(this),A),A.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,o=t.label.position.name||"left";return r[o]?r[o](e,n,t.label.position.args):null},_init:function(t){if(an(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var o=e[n];this.groups[o]=this._evaluateGroup(t.groups[o])}for(var s=ke(t.items),c=0,v=s.length;c<v;c++)this.ports.push(this._evaluatePort(s[c]))},_evaluateGroup:function(t){return qe(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Ve({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=qe({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=qe({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Ve({},n.size,e.size),e},_getZIndex:function(t,e){return jn(e.z)?e.z:jn(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return qe({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var r,n={};ve(t)?(r="fn",n.fn=t):Vn(t)?r=t:void 0===t?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):an(t)&&(r=t.name,Ve(n,t.args));var o={args:n};return r&&(o.name=r),o},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const Jf={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};ke(t.items).forEach(function(v){e[v.id]=!0});var n=this.previous("ports")||{},r={};ke(n.items).forEach(function(v){e[v.id]||(r[v.id]=!0)});var o=this.graph;o&&!Vt(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(v){r[v.get("target").port]&&v.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(v){r[v.get("source").port]&&v.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Wt(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=ke(this.prop(["ports","items"])).filter(n=>n.group===t);return Wt(e)},getPort:function(t){return Wt(ke(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,de(this.size())).reduce(function(n,r){var o=r.portTransformation;return n[r.portId]={x:o.x,y:o.y,angle:o.angle},n},{})},getPortIndex:function(t){var e=an(t)?t.id:t;return this._isValidPortId(e)?ke(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!an(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Ve([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r="number"==typeof t?t:this.getPortIndex(t);if(!an(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const o=Ve([],this.prop("ports/items"));return o.splice(r,0,e),this.prop("ports/items",o,n),this},portProp:function(t,e,n,r){var o=this.getPortIndex(t);if(-1===o)throw new Error("Element: unable to find port with id "+t);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?s[0]=["ports","items",o].concat(e):Vn(e)?s[0]=["ports/items/",o,"/",e].join(""):(s=["ports/items/"+o],Je(e)&&(s.push(e),s.push(n))),this.prop.apply(this,s)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=ke((t=t||{}).items);return n.forEach(function(r){"object"!=typeof r&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),vi(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!an(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Ve([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(-1!==r){const o=Ve([],this.prop(["ports","items"]));o.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;r=Ve([],this.prop(["ports","items"])).filter(function(s){return!t.some(function(c){const v=an(c)?c.id:c;return s.id===v})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var e,t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new ac(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(s){if(!e.find(function(c){return c.id===s.id}))return s}),o=e.filter(function(s){if(!n.find(function(c){return c.id===s.id}))return s});o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},Qf={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var o=Ga(this.model._portSettingsData.getPorts(),"z"),s="auto";ke(o[s]).forEach(function(A){var b=this._getPortElement(A);e.append(b),t.push(b)},this);for(var c=Object.keys(o),v=0;v<c.length;v++){var m=c[v];if(m!==s){var S=parseInt(m,10);this._appendPorts(o[m],S,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),o=ke(t).map(this._getPortElement,this);n[e]||e<0?Yt(n[Math.max(e,0)]).before(o):r.append(o)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;const r=n.portContentElement.node,o=n.portContentSelectors,[s=null]=this.findBySelector(e,r,o);return s},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Hi(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,o;var s=Yt(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(t);if(Array.isArray(c)){var v=this.parseDOMJSON(c,s.node),m=v.fragment;e=m.childNodes.length>1?Yt("g").append(m):Yt(m.firstChild),o=v.selectors}else e=Yt(c),Array.isArray(e)&&(e=Yt("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const S=this._getPortLabelMarkup(t.label);if(Array.isArray(S)){const{fragment:G,selectors:tt}=this.parseDOMJSON(S,s.node),ot=G.childNodes.length;ot>0&&(r=tt,n=1===ot?Yt(G.firstChild):Yt("g").append(G))}else n=Yt(S),Array.isArray(n)&&(n=Yt("g").append(n));var A;if(o&&r){for(var b in r)if(o[b]&&b!==this.selector)throw new Error("ElementView: selectors within port must be unique.");A=Ve({},o,r)}else A=o||r;return s.append(e.addClass("joint-port-body")),n&&s.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:s,portLabelElement:n,portSelectors:A,portLabelSelectors:r,portContentElement:e,portContentSelectors:o},s},_updatePortGroup:function(t){for(var e=de(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,o=n.length;r<o;r++){var s=n[r],v=this._portElementsCache[s.portId]||{},m=s.portTransformation;this.applyPortTransform(v.portElement,m),this.updateDOMSubtreeAttributes(v.portElement.node,s.portAttrs,{rootBBox:new de(s.portSize),selectors:v.portSelectors});var S=s.labelTransformation;S&&v.portLabelElement&&(this.applyPortTransform(v.portLabelElement,S,-m.angle||0),this.updateDOMSubtreeAttributes(v.portLabelElement.node,S.attrs,{rootBBox:new de(s.labelSize),selectors:v.portLabelSelectors}))}},applyPortTransform:function(t,e,n){var r=Yt.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},mi=ji.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),ji.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=jn(e);n=(r?n:t)||{};const{parentRelative:o,deep:s,restrictedArea:c}=n;let v;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const m=this.getParentCell();m&&!m.isLink()&&(v=m.get("position"))}if(r){if(v&&(t+=v.x,e+=v.y),s||c){const{x:m,y:S}=this.get("position");this.translate(t-m,e-S,n)}else this.set("position",{x:t,y:e},n);return this}{const m=ht(this.get("position"));return o?m.difference(v):m}},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=n.restrictedArea;if(o&&n.translateBy===this.id)if("function"==typeof o){var s=o.call(this,r.x+t,r.y+e,n);t=s.x-r.x,e=s.y-r.y}else{var c=this.getBBox({deep:!0}),v=r.x-c.x,m=r.y-c.y,S=Math.max(o.x+v,Math.min(o.x+o.width+v-c.width,r.x+t)),A=Math.max(o.y+m,Math.min(o.y+o.height+m-c.height,r.y+e));t=S-r.x,e=A-r.y}var b={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(an(n.transition)||(n.transition={}),this.transition("position",b,Ve({},n.transition,{valueFunction:Vi.object})),Hi(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",b,n),Hi(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(an(t)&&(n=e,e=jn(t.height)?t.height:r.height,t=jn(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(this.startBatch("resize",n=n||{}),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var c,o=Zr(this.get("angle")||0),s=this.getBBox();if(o){var v={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(v+=Math.floor((o+45)/90),v%=4);var m=s[["bottomLeft","corner","topRight","origin"][v]](),S=ht(m).rotate(s.center(),-o),A=Math.sqrt(t*t+e*e)/2,b=v*Math.PI/2;b+=Math.atan(v%2==0?e/t:t/e),b-=Sr(o);var G=ht.fromPolar(A,b,S);c=ht(G).offset(t/-2,e/-2)}else switch(c=s.topLeft(),n.direction){case"top":case"top-right":c.offset(0,s.height-e);break;case"left":case"bottom-left":c.offset(s.width-t,0);break;case"top-left":c.offset(s.width-t,s.height-e)}this.set("size",{width:t,height:e},n),this.position(c.x,c.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var o=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(b=>b.isElement());if(0===n.length)return this;this.startBatch("fit-embeds",t),t.deep&&Hi(n,"fitEmbeds",t);const{left:r,right:o,top:s,bottom:c}=To(t.padding);let{x:v,y:m,width:S,height:A}=e.getCellsBBox(n);return v-=r,m-=s,S+=r+o,A+=c+s,this.set({position:{x:v,y:m},size:{width:S,height:A}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,n,r){if(n){var o=this.getBBox().center(),s=this.get("size"),c=this.get("position");o.rotate(n,this.get("angle")-t);var v=o.x-s.width/2-c.x,m=o.y-s.height/2-c.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(c.x+v,c.y+m,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return Zr(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:o}=t;if(r&&e){const b=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return b.push(this),e.getCellsBBox(b,t)}const{angle:s=0,position:{x:c,y:v},size:{width:m,height:S}}=n,A=new de(c,v,m,S);return o&&A.rotateAroundCenter(s),A},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),o=t.get(e);if(!o)return r;var s=o.port;if(!s||!this.hasPort(s))return r;var c=this.portProp(s,["group"]),v=this.getPortsPositions(c),m=new ht(v[s]).offset(n.origin()),S=this.angle();return S&&m.rotate(r,-S),m}});Ve(mi.prototype,Jf);const $o={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],o=n>1&&e[n-1]||{};return Array.isArray(r)||(o instanceof ji?r=e:r instanceof ji&&(e.length>1&&e.pop(),r=e)),o instanceof ji&&(o={}),t.call(this,r,o)}}},qf=pr.Collection.extend({initialize:function(t,e){this.cellNamespace=e.cellNamespace?e.cellNamespace:"undefined"!=typeof joint&&Jt(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,s=new("link"===t.type?co:Pi(n.cellNamespace,t.type,".")||mi)(t,e);return e.dry||(s.graph=n.graph),s},comparator:function(t){return t.get("z")||0}}),Yo=pr.Model.extend({initialize:function(t,e){var n=new qf([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});pr.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=pr.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return"object"==typeof t?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=fe(r,"cells")),pr.Model.prototype.set.call(this,r,n)},clear:function(t){t=Ve({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do{n.shift().remove(t)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof pr.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!Vn(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof pr.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=Z(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=ke(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Hi(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).indirect,r=e.inbound,o=e.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=[],c={};function v(b,G){if(Pe(b.getOutboundEdges(G.id),function(ot,Tt){if(!c[Tt]){var Ct=b.getCell(Tt);s.push(Ct),c[Tt]=!0,n&&(r&&m(b,Ct),o&&v(b,Ct))}}.bind(b)),n&&G.isLink()){var tt=G.getTargetCell();tt&&tt.isLink()&&(c[tt.id]||(s.push(tt),v(b,tt)))}}function m(b,G){if(Pe(b.getInboundEdges(G.id),function(ot,Tt){if(!c[Tt]){var Ct=b.getCell(Tt);s.push(Ct),c[Tt]=!0,n&&(r&&m(b,Ct),o&&v(b,Ct))}}.bind(b)),n&&G.isLink()){var tt=G.getSourceCell();tt&&tt.isLink()&&(c[tt.id]||(s.push(tt),m(b,tt)))}}if(o&&v(this,t),r&&m(this,t),e.deep){var S=t.getEmbeddedCells({deep:!0}),A={};S.forEach(function(b){b.isElement()&&(A[b.id]=!0)}),S.forEach(function(b){b.isLink()||(o&&Pe(this.getOutboundEdges(b.id),function(G,tt){if(!c[tt]){var ot=this.getCell(tt),{source:Tt,target:Ct}=ot.attributes,Dt=Tt.id,Nt=Ct.id;if(!e.includeEnclosed&&Dt&&A[Dt]&&Nt&&A[Nt])return;s.push(this.getCell(tt)),c[tt]=!0}}.bind(this)),r&&Pe(this.getInboundEdges(b.id),function(G,tt){if(!c[tt]){var ot=this.getCell(tt),{source:Tt,target:Ct}=ot.attributes,Dt=Tt.id,Nt=Ct.id;if(!e.includeEnclosed&&Dt&&A[Dt]&&Nt&&A[Nt])return;s.push(this.getCell(tt)),c[tt]=!0}}.bind(this)))},this)}return s},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var o=this.getConnectedLinks(t,e).reduce(function(v,m){var{source:S,target:A}=m.attributes,b=m.hasLoop(e);if(n&&Jt(S,"id")&&!v[S.id]){var G=this.getCell(S.id);G.isElement()&&(b||G&&G!==t&&(!e.deep||!G.isEmbeddedIn(t)))&&(v[S.id]=G)}if(r&&Jt(A,"id")&&!v[A.id]){var tt=this.getCell(A.id);tt.isElement()&&(b||tt&&tt!==t&&(!e.deep||!tt.isEmbeddedIn(t)))&&(v[A.id]=tt)}return v}.bind(this),{});if(t.isLink()){if(n){var s=t.getSourceCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}if(r){var c=t.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return ke(o)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],o=n.get("parent");o;)r.push(o),o=this.getCell(o).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=ke(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Ve({},e=e||{},{outbound:!0})),n},cloneCells:lo,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},o=[],s=[];return ke(t).forEach(function(c){r[c.id]||(n.push(c),r[c.id]=c,c.isLink()?s.push(c):o.push(c)),e.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(m){r[m.id]||(n.push(m),r[m.id]=m,m.isLink()?s.push(m):o.push(m))})}),s.forEach(function(c){var{source:v,target:m}=c.attributes;if(v.id&&!r[v.id]){var S=this.getCell(v.id);n.push(S),r[S.id]=S,o.push(S)}if(m.id&&!r[m.id]){var A=this.getCell(m.id);n.push(this.getCell(m.id)),r[A.id]=A,o.push(A)}},this),o.forEach(function(c){this.getConnectedLinks(c,e).forEach(function(m){var{source:S,target:A}=m.attributes;!r[m.id]&&S.id&&r[S.id]&&A.id&&r[A.id]&&(n.push(m),r[m.id]=m)})},this),n},getPredecessors:function(t,e){var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Ve({},e=e||{},{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},o={},s=[];for(s.push(t),o[t.id]=0;s.length>0;){var c=s.shift();if(r[c.id]||(r[c.id]=!0,!1===e.call(this,c,o[c.id])))continue;const v=this.getNeighbors(c,n);for(let m=0,S=v.length;m<S;m++){const A=v[m];o[A.id]=o[c.id]+1,s.push(A)}}},dfs:function(t,e,n={}){const r={},o={},s=[];for(s.push(t),o[t.id]=0;s.length>0;){const c=s.pop();if(r[c.id]||(r[c.id]=!0,!1===e.call(this,c,o[c.id])))continue;const v=this.getNeighbors(c,n),m=s.length;for(let S=0,A=v.length;S<A;S++){const b=v[S];o[b.id]=o[c.id]+1,s.splice(m,0,b)}}},getSources:function(){var t=[];return Pe(this._nodes,function(e,n){(!this._in[n]||Vt(this._in[n]))&&t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return Pe(this._nodes,function(e,n){(!this._out[n]||Vt(this._out[n]))&&t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||Vt(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Vt(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){var r=(n=n||{}).inbound,o=n.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=!1;return this.getConnectedLinks(t,n).forEach(function(c){var{source:v,target:m}=c.attributes;if(r&&Jt(v,"id")&&v.id===e.id||o&&Jt(m,"id")&&m.id===e.id)return s=!0,!1}),s},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){Hi(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new de(t),{strict:r=!1}=e,o=r?"containsRect":"intersect";return this.getElements().filter(s=>n[o](s.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===n?this.findModelsInArea(r):this.findModelsFromPoint(r[n]())).filter(s=>t.id!==s.id&&!s.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return ke(t).reduce(function(r,o){const s=o.getBBox({rotate:n});return s?r?r.union(s):s:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(o){return!o.isEmbedded()});return Hi(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var o=this.getCellsBBox(n);if(o){var s=Math.max(t/o.width,0),c=Math.max(e/o.height,0);Hi(n,"scale",s,c,o.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Ve({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Ve({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return n=0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var o=e.getSourceCell();if(o&&t.getConnectedLinks(o,{outbound:!0}).filter(function(v){var{source:m,target:S}=v.attributes;return m&&m.id===n.id&&(!m.port||m.port===n.port)&&S&&S.id===r.id&&(!S.port||S.port===r.port)}).length>1)return!1}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});!function(t,e,n){if(Vn(n)){if(!$o[n])throw new Error('Unknown wrapper: "'+n+'"');n=$o[n]}if(!ve(n))throw new Error("Wrapper must be a function.");ke(["resetCells","addCells","removeCells"]).forEach(function(r){t[r]=n(t[r])})}(Yo.prototype,0,$o.cells);const yi={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,n){var r=this.getCell(e),o=n.node(e);t.setPosition?t.setPosition(r,o):r.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(t,e,n){const o=this.getCell(e.name),s=n.edge(e),c=s.points||[],v=new Fn(c);if(t.setVertices||t.setLinkVertices)if(ve(t.setVertices))t.setVertices(o,c);else{v.simplify({threshold:.001});const m=v.points.map(A=>A.toJSON());o.set("vertices",m.slice(1,m.length-1))}if(t.setLabels&&"x"in s&&"y"in s){const m={x:s.x,y:s.y};if(ve(t.setLabels))t.setLabels(o,m,c);else{const S=v.closestPointLength(m),A=v.pointAtLength(S),b=S/v.length(),G=new ht(m).difference(A).toJSON();o.label(0,{position:{distance:b,offset:G}})}}},layout:function(t,e){var n;n=t instanceof Yo?t:(new Yo).resetCells(t,{dry:!0,sort:!1}),t=null;const r=(e=gi(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=yi.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(A){return A.id}}),s={},c=e.marginX||0,v=e.marginY||0;if(e.rankDir&&(s.rankdir=e.rankDir),e.align&&(s.align=e.align),e.nodeSep&&(s.nodesep=e.nodeSep),e.edgeSep&&(s.edgesep=e.edgeSep),e.rankSep&&(s.ranksep=e.rankSep),e.ranker&&(s.ranker=e.ranker),c&&(s.marginx=c),v&&(s.marginy=v),o.setGraph(s),r.layout(o,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),yi.fromGraphLib(o,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var m=o.nodes().filter(function(A){return o.children(A).length>0}).map(n.getCell.bind(n)).sort(function(A,b){return b.getAncestors().length-A.getAncestors().length});Hi(m,"fitEmbeds",{padding:e.clusterPadding})}n.stopBatch("layout");var S=o.graph();return new de(c,v,Math.abs(S.width-2*c),Math.abs(S.height-2*v))},fromGraphLib:function(t,e){var n=(e=e||{}).importNode||Un,r=e.importEdge||Un,o=this instanceof Yo?this:new Yo;return t.nodes().forEach(function(s){n.call(o,s,t,o,e)}),t.edges().forEach(function(s){r.call(o,s,t,o,e)}),o},toGraphLib:function(t,e){const n=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===n)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=ge(e,"directed","compound","multigraph"),o=new n.Graph(r),s=e.setNodeLabel||Un,c=e.setEdgeLabel||Un,v=e.setEdgeName||Un,m=t.get("cells"),S=0,A=m.length;S<A;S++){var b=m.at(S);if(b.isLink()){var G=b.get("source"),tt=b.get("target");if(!G.id||!tt.id)break;o.setEdge(G.id,tt.id,c(b),v(b))}else if(o.setNode(b.id,s(b)),o.isCompound()&&b.has("parent")){var ot=b.get("parent");m.has(ot)&&o.setParent(b.id,ot)}}return o}};Yo.prototype.toGraphLib=function(t){return yi.toGraphLib(this,t)},Yo.prototype.fromGraphLib=function(t,e){return yi.fromGraphLib.call(this,t,e)};const td={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(void 0!==n)return n;try{n=e()}catch(r){n=!1}return this._results[t]=n,n}},ed=(mi.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),mi.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),mi.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));mi.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),mi.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),mi.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),mi.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),mi.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),mi.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),mi.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),mi.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),mi.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n=ni(t);return this.attr({body:{lateralArea:t},top:n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t}},e)}},{attributes:{lateralArea:{set:function(t,e){var n=ni(t);n&&(t=parseFloat(t)/100);var r=e.x,o=e.y,s=e.width,c=e.height,m=n?c*t:t,S=Yt.KAPPA,A=S*(s/2),b=S*(n?c*t:t),tt=r+s/2,ot=r+s,Tt=o+m,Ct=Tt-m,Dt=o+c-m,Nt=o+c;return{d:["M",r,Tt,"L",r,Dt,"C",r,Dt+b,tt-A,Nt,tt,Nt,"C",tt+A,Nt,ot,Dt+b,ot,Dt,"L",ot,Tt,"C",ot,Tt-b,tt+A,Ct,tt,Ct,"C",tt-A,Ct,r,Tt-b,r,Tt,"Z"].join(" ")}}}}});var Wu=td.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};mi.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Wu]},{attributes:{text:{set:function(t,e,n,r){if(!(n instanceof HTMLElement)){var o=r.style||{},s={text:t,width:-5,height:"100%"},c=Ve({textVerticalAnchor:"middle"},o);return cs.textWrap.set.call(this,s,e,n,c),{fill:o.color||null}}n.textContent=t},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}});const qi=co.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),wa=(co.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),co.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Po=pr.View.extend({options:{},theme:null,themeClassNamePrefix:sr("theme-"),requireSetThemeOverride:!1,defaultTheme:$r.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Ve({},this.options,t),pr.View.call(this,t)},initialize:function(){wa[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=Bt(this,"children")),t){var e=this.svgElement,r=pi(t,Yt.namespace[e?"svg":"xhtml"]);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&1===n.nodeType;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Bt(this,"el"));else{var t=Bt(this,"tagName"),e=Ve({},Bt(this,"attributes")),n=Ve({},Bt(this,"style"));this.id&&(e.id=Bt(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(Yt.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof pr.$?t:pr.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=Yt(this.el))},_ensureElClassName:function(){var t=Bt(this,"className");if(t){var e=sr(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){var e=this.themeClassNamePrefix+(t=t||this.theme);return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),wa[this.cid]=null,pr.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var o in e){var s=e[o];"function"!=typeof s&&(s=this[s]),s&&Pn(t).on(o+r,n,s.bind(this))}return this},undelegateElementEvents:function(t){return Pn(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Bt(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return void 0===e?n&&n[r]||{}:(n||(n=t.data={}),n[r]||(n[r]={}),Ve(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Ve({},t[0])||{},n=t[1]&&Ve({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,pr.View.extend.call(this,e,n)}});if(Pn.event&&!("dbltap"in Pn.event.special)){const t=$r.doubleTapInterval,e=30;Pn.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:o,target:s}=n,c=Pn.data(s),v=(new Date).getTime(),m="lastTouch"in c?v-c.lastTouch:0;m<t&&m>e?(c.lastTouch=null,n.type=o.origType,o.handler.call(this,n,...r)):c.lastTouch=v}}}function ou(t){return t?Array.isArray(t)?t:[t]:[]}const Sa=Po.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return this.update(t,e),this.mount(),this.transform(),0},findNode(t,e=null){let n;if("string"==typeof e)[n]=t.findBySelector(e);else if(Je(e)){const r=t.model.isLink(),{label:o=null,port:s,selector:c}=e;r&&null!==o?n=t.findLabelNode(o,c):!r&&s?n=t.findPortNode(s,c):[n]=t.findBySelector(c)}else e&&(n=Yt.toNode(e),n instanceof SVGElement||(n=null));return n||null},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:o}=this;if(!t||o)return;const{vel:s,paper:c}=e,{layer:v}=r;if(v){const m=this.transformGroup=Yt("g").addClass("highlight-transform").append(n);c.getLayerView(v).insertSortedNode(m.node,r.z)}else(!n.parentNode||n.nextSibling)&&s.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;!t||(e?(this.transformGroup=null,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),o=e.getRootRotateMatrix(),s=r.multiply(o);t.attr("transform",Yt.matrixToTransformString(s))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:o}=this;if(r)return;const s=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),s?(this.highlight(e,s),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,o=r[n];if(null===e){const s=[];if(!o)return s;for(let c in o){const v=o[c];v instanceof this&&s.push(v)}return s}if(!o)return null;if(e in o){const s=o[e];if(s instanceof this)return s}return null},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const o=Sa.get(t,n);o&&o.remove();const s=new this(r);return s.id=n,this._addRef(t,n,s),s.requestUpdate(t,e),s},_addRef(t,e,n){const{cid:r}=t,{_views:o}=this;let s=o[r];s||(s=o[r]={}),s[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,o=r[n];if(o){e&&delete o[e];for(let s in o)return;delete r[n]}},remove(t,e=null){ou(this.get(t,e)).forEach(n=>{n.remove()})},update(t,e=null,n=!1){ou(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){ou(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},uniqueId:(t,e="")=>Yt.ensureId(t)+JSON.stringify(e)}),Jo={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Dn=Po.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,o){t.push("type-"+o.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,o,s,t={},e={},n=0,c=Bt(this,"presentationAttributes");for(var v in c)if(c.hasOwnProperty(v)){var m=c[v];for(Array.isArray(m)||(m=[m]),r=0,o=m.length;r<o;r++){var S=t[s=m[r]];S||(S=t[s]=1<<n++),e[v]|=S}}var A=Bt(this,"initFlag");for(Array.isArray(A)||(A=[A]),r=0,o=A.length;r<o;r++)t[s=A[r]]||(t[s]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||In(this),Po.call(this,t)},initialize:function(){this.setFlags(),Po.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=pi(t),r=n.selectors,o=n.groupSelectors;for(var s in o){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=o[s]}if(e){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=ve(this.options.interactive)?this.options.interactive(this):this.options.interactive;return an(e)&&!1!==e[t]||function(t){return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)}(e)&&!1!==e},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||"."===t)return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return $r.useCSSSelectors?Pn(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return Yt.transformRect(e,r.multiply(o).multiply(n))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return Yt.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var e=this.model.position();return Yt.createSVGMatrix().translate(e.x,e.y)},getRootRotateMatrix:function(){var t=Yt.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),o=r.width/2,s=r.height/2;t=t.translate(o,s).rotate(n).translate(-o,-s)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let o;if([o=r]="string"==typeof e?this.findBySelector(e):this.$(e),n.partial=o!==r,void 0===n.type){let s;switch(!0){case n.embedding:s=Jo.EMBEDDING;break;case n.connecting:s=Jo.CONNECTING;break;case n.magnetAvailability:s=Jo.MAGNET_AVAILABILITY;break;case n.elementAvailability:s=Jo.ELEMENT_AVAILABILITY;break;default:s=Jo.DEFAULT}n.type=s}return this.notify(t,o,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),o=n===e;if((r||o)&&"false"!==r)return n;if(o)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n="> "+e),n;if(t){var r=Yt(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,o=r.model,s=r.getDefaultLink(this,t);return s.set({source:this.getLinkEnd(t,e,n,s,"source"),target:{x:e,y:n}}).addTo(o,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,o=this.findAttribute("port",t),s=t.getAttribute("joint-selector"),c={id:r};return null!=s&&(c.magnet=s),null!=o?(c.port=o,!n.hasPort(o)&&!s&&(c.selector=this.getSelector(t))):null==s&&this.el!==t&&(c.selector=this.getSelector(t)),this.customizeLinkEnd(c,t,...e)},customizeLinkEnd:function(t,e,n,r,o,s){const{paper:c}=this,{connectionStrategy:v}=c.options;if("function"==typeof v){var m=v.call(c,t,this,e,new ht(n,r),o,s,c);if(m)return m}return t},getMagnetFromLinkEnd:function(t){var s,e=this.el,n=t.port,r=t.magnet,o=this.model;return null!=n&&o.isElement()&&o.hasPort(n)?s=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&null!=n&&(r='[port="'+n+'"]'),s=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(e,n,r);o.notifyPointerdown(t,n,r),o.eventData(t,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:o})},dragLink:function(t,e,n){var r=this.eventData(t),o=r.linkView;if(o)o.pointermove(t,e,n);else{var s=this.paper,c=s.options.magnetThreshold,v=this.getEventTarget(t),m=r.targetMagnet;if("onleave"===c){if(m===v||Yt(m).contains(v))return}else if(s.eventData(t).mousemoved<=c)return;this.dragLinkStart(t,m,e,n)}},dragLinkEnd:function(t,e,n){var o=this.eventData(t).linkView;!o||(o.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Vt(e)||(t instanceof SVGElement?Yt(t).attr(e):Pn(t).attr(e))},processNodeAttributes:function(t,e){var n,r,o,s,c,v,m,S,A,b=[];for(n in e)!e.hasOwnProperty(n)||(r=e[n],!(o=this.getAttributeDefinition(n))||ve(o.qualify)&&!o.qualify.call(this,r,t,e)?(v||(v={}),v[so(n)]=r):(Vn(o.set)&&(v||(v={}),v[o.set]=r),null!==r&&b.push(n,o)));for(s=0,c=b.length;s<c;s+=2)r=e[n=b[s]],ve((o=b[s+1]).set)&&(m||(m={}),m[n]=r),ve(o.position)&&(S||(S={}),S[n]=r),ve(o.offset)&&(A||(A={}),A[n]=r);return{raw:e,normal:v,set:m,position:S,offset:A}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var o,s,v=e.raw||{},m=e.normal||{},S=e.set,A=e.position,b=e.offset;for(o in S){s=S[o];var G=this.getAttributeDefinition(o).set.call(this,s,n.clone(),t,v);an(G)?Ve(m,G):void 0!==G&&(m[o]=G)}if(t instanceof HTMLElement)this.setNodeAttributes(t,m);else{var Ct,Dt,Nt,tt=m.transform,ot=Yt.transformStringToMatrix(tt),Tt=ht(ot.e,ot.f);if(tt&&(m=fe(m,"transform"),ot.e=ot.f=0),A||b){var L=this.getNodeScale(t,r.scalableNode);Ct=L.sx,Dt=L.sy}var U=!1;for(o in A)s=A[o],(Nt=this.getAttributeDefinition(o).position.call(this,s,n.clone(),t,v))&&(Tt.offset(ht(Nt).scale(Ct,Dt)),U||(U=!0));this.setNodeAttributes(t,m);var K=!1;if(b){var it=this.getNodeBoundingRect(t);if(it.width>0&&it.height>0){var gt=Yt.transformRect(it,ot).scale(1/Ct,1/Dt);for(o in b)s=b[o],(Nt=this.getAttributeDefinition(o).offset.call(this,s,gt,t,v))&&(Tt.offset(ht(Nt).scale(Ct,Dt)),K||(K=!0))}}(void 0!==tt||U||K)&&(Tt.round(1),ot.e=Tt.x,ot.f=Tt.y,t.setAttribute("transform",Yt.matrixToTransformString(ot)))}},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var o=e.scale();n=1/o.sx,r=1/o.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=Yt.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=Yt(t).getBBox()),new de(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var n=this.rotatableNode||this.el;e.magnetMatrix=Yt(t).getTransformToElement(n)}return Yt.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=Yt(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var o,s,c,v,m={},S=[];for(var A in t)if(t.hasOwnProperty(A)&&Je(c=t[A])){var b=n[A]=this.findBySelector(A,e,r);for(o=0,s=b.length;o<s;o++){var G=b[o];v=Yt.ensureId(G);var tt=r&&r[A]===G,ot=m[v];if(ot){ot.array||(S.push(v),ot.array=!0,ot.attributes=[ot.attributes],ot.selectedLength=[ot.selectedLength]);var Tt=ot.attributes,Ct=ot.selectedLength;if(tt)Tt.unshift(c),Ct.unshift(-1);else{var Dt=Ps(Ct,s);Tt.splice(Dt,0,c),Ct.splice(Dt,0,s)}}else m[v]={attributes:c,selectedLength:tt?-1:s,node:G,array:!1}}}for(o=0,s=S.length;o<s;o++)(c=m[v=S[o]]).attributes=qe({},...c.attributes.reverse());return m},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:o=0,clientY:s=0}=t;return e.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,s):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=de()),n.selectors||(n.selectors=this.selectors);var v,m,S,A,b,r={},o={},s=[],c=[],G=n.roAttributes,tt=this.findNodesAttributes(G||e,t,r,n.selectors),ot=G?this.findNodesAttributes(e,t,r,n.selectors):tt;for(var Tt in tt)if((b=this.processNodeAttributes(m=(A=tt[Tt]).node,S=A.attributes)).set||b.position||b.offset){var Nt,Ct=ot[Tt]&&ot[Tt].attributes,Dt=Ct&&void 0===S.ref?Ct.ref:S.ref;if(Dt){if(!(Nt=(r[Dt]||this.findBySelector(Dt,t,n.selectors))[0]))throw new Error('dia.CellView: "'+Dt+'" reference does not exist.')}else Nt=null;if(v={node:m,refNode:Nt,processedAttributes:b,allAttributes:Ct},Nt){var L=c.findIndex(function(ce){return ce.refNode===m});L>-1?c.splice(L,0,v):c.push(v)}else s.push(v)}else this.setNodeAttributes(m,b.normal);s.push(...c);for(var U,K=0,it=s.length;K<it;K++){m=(v=s[K]).node,Nt=v.refNode;var gt=Yt(n.rotatableNode),It=Nt?Yt.ensureId(Nt):"",Ot=!!gt&&!!Nt&&gt.contains(Nt),Gt=o[It];if(!Gt){var se=Ot?gt:t;Gt=o[It]=Nt?Yt(Nt).getBBox({target:se}):n.rootBBox}G?(b=this.processNodeAttributes(m,v.allAttributes),this.mergeProcessedAttributes(b,v.processedAttributes)):b=v.processedAttributes;var ee=Gt;Ot&&!gt.contains(m)&&(U||(U=Yt.transformStringToMatrix(gt.attr("transform"))),ee=Yt.transformRect(Gt,U)),this.updateRelativeAttributes(m,b,ee,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Ve(t.set,e.set),Ve(t.position,e.position),Ve(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Sa.remove(this)},updateHighlighters:function(t=!1){Sa.update(this,null,t)},transformHighlighters:function(){Sa.transform(this)},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(t,{graph:o})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e}=this;e.isAsync()&&e.dumpView(this);const n=this.getEventTarget(t,{fromPoint:!0}),r=e.findView(n);r!==this&&(this.mouseleave(t),r&&r.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Highlighting:Jo,addPresentationAttributes:function(t){return qe({},Bt(this.prototype,"presentationAttributes"),t,function(e,n){if(e&&n&&("string"==typeof e&&(e=[e]),"string"==typeof n&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return vi(e.concat(n))})}}),kn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ar=Dn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Dn.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Dn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[kn.UPDATE],position:[kn.TRANSLATE,kn.TOOLS],size:[kn.RESIZE,kn.PORTS,kn.TOOLS],angle:[kn.ROTATE,kn.TOOLS],markup:[kn.RENDER],ports:[kn.PORTS]},initFlag:[kn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=$r;this.hasFlag(t,kn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,kn.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[kn.RENDER,kn.UPDATE,kn.RESIZE,kn.TRANSLATE,kn.ROTATE,kn.PORTS,kn.TOOLS]);else{let o=!1;this.hasFlag(t,kn.RESIZE)&&(this.resize(e),o=!0,t=this.removeFlag(t,[kn.RESIZE,kn.UPDATE])),this.hasFlag(t,kn.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,kn.UPDATE),o=!0,n&&(t=this.removeFlag(t,kn.PORTS))),this.hasFlag(t,kn.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,kn.TRANSLATE),r=!0),this.hasFlag(t,kn.ROTATE)&&(this.rotate(),t=this.removeFlag(t,kn.ROTATE),r=!0),this.hasFlag(t,kn.PORTS)&&(this._renderPorts(),o=!0,t=this.removeFlag(t,kn.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,kn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,kn.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=$r;n&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new de(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===o?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=Yt(n[this.rotatableSelector])||null,this.scalableNode=Yt(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(Yt(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),$r.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),o=this.scalableNode,s=!1;o.node.getElementsByTagName("path").length>0&&(s=!0);var c=o.getBBox({recursive:s});o.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var S=this.rotatableNode,A=S&&S.attr("transform");if(A){S.attr("transform",A+" rotate("+-n+","+r.width/2+","+r.height/2+")");var b=o.getBBox({target:this.paper.cells});e.set("position",{x:b.x,y:b.y},Ve({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,o=t.initialZIndices={},s=e.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...s,...c].forEach(S=>o[S.id]=S.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const v=r.getElements().reduce((S,A)=>Math.max(S,A.attributes.z||0),0);c.forEach(S=>{S.attributes.z<=v&&S.set("z",v+1,{ui:!0})}),e.stopBatch("to-front");const m=e.parent();m?(r.getCell(m).unembed(e,{ui:!0}),t.initialParentId=m):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const o=t.model||this.model,s=t.paper||this.paper,c=s.model,{findParentBy:v,frontParentOnly:m,validateEmbedding:S}=s.options;let A;A=ve(v)?ke(v.call(c,this,e,n,r)):"pointer"===v?ke(c.findModelsFromPoint({x:n,y:r})):c.findModelsUnderElement(o,{searchBy:v}),A=A.filter(tt=>tt instanceof ji&&o.id!==tt.id&&!tt.isEmbeddedIn(o)),m&&(A=A.slice(-1));let b=null;const G=t.candidateEmbedView;for(let tt=A.length-1;tt>=0;tt--){const ot=A[tt];if(G&&G.model.id==ot.id){b=G;break}{const Tt=ot.findView(s);if(!ve(S)||S.call(s,this,Tt)){b=Tt;break}}}b&&b!=G&&(this.clearEmbedding(t),t.candidateEmbedView=b.highlight(b.findProxyNode(null,"container"),{embedding:!0})),!b&&G&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:o}=r.options,{initialParentId:s}=t;if(s&&"function"==typeof o&&!o.call(r,this))return void this._disallowUnembed(t)}r.model.getConnectedLinks(n,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,s=(t.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:v,initialZIndices:m}=t;if(v){const{x:A,y:b}=v;r.position(A,b,{deep:!0,ui:!0})}m&&Object.keys(m).forEach(A=>{const b=s.getCell(A);b&&b.set("z",m[A],{ui:!0})});const S=s.getCell(c);S&&S.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const o=this.findPortNode(r,n);if(o)return o}else{const[o]=this.findBySelector(n);if(o)return o}}return t},notifyPointerdown(t,e,n){Dn.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){Dn.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),Dn.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Dn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Dn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){Dn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,n),this.dragStart(t,e,n))},pointermove:function(t,e,n){var r=this.eventData(t);switch(r.action){case"magnet":this.dragMagnet(t,e,n);break;case"move":(r.delegatedView||this).drag(t,e,n);default:this.notifyPointermove(t,e,n)}this.eventData(t,r)},pointerup:function(t,e,n){var r=this.eventData(t);switch(r.action){case"magnet":this.dragMagnetEnd(t,e,n);break;case"move":(r.delegatedView||this).dragEnd(t,e,n);default:this.notifyPointerup(t,e,n)}var o=r.targetMagnet;o&&this.magnetpointerclick(t,o,e,n),this.checkMouseleave(t)},mouseover:function(t){Dn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Dn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Dn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Dn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){Dn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){this.dragMagnetStart(t,e,n)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:"move",delegatedView:r});const o=r.model.position();r.eventData(t,{initialPosition:o,pointerOffset:o.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){if(this.can("addLinkFromMagnet")){var r=t.currentTarget,o=this.paper;this.eventData(t,{targetMagnet:r}),t.stopPropagation(),o.options.validateMagnet(this,r,t)?(o.options.magnetThreshold<=0&&this.dragLinkStart(t,r,e,n),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,n),o.delegateDragEvents(this,t.data)}},drag:function(t,e,n){var r=this.paper,o=r.options.gridSize,s=this.model,c=this.eventData(t),{pointerOffset:v,restrictedArea:m,embedding:S}=c,A=Li(e+v.x,o),b=Li(n+v.y,o);s.position(A,b,{restrictedArea:m,deep:!0,ui:!0}),r.options.embeddingMode&&(S||(this.prepareEmbedding(c),S=!0),this.processEmbedding(c,t,e,n)),this.eventData(t,{embedding:S})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var o=this.paper;o.eventData(t).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:kn});Ve(Ar.prototype,Qf);const $u=function(t,e,n){return t},uc=function(t,e,n){var S,A,b,r=e.side||"bottom",o=To(e.padding||40),s=n.sourceBBox,c=n.targetBBox,v=s.center(),m=c.center();switch(r){case"bottom":b=1,S="y",A="height";break;case"top":b=-1,S="y",A="height";break;case"left":b=-1,S="x",A="width";break;case"right":b=1,S="x",A="width";break;default:throw new Error("Router: invalid side")}return v[S]+=b*(s[A]/2+o[r]),m[S]+=b*(c[A]/2+o[r]),b*(v[S]-m[S])>0?m[S]=v[S]:v[S]=m[S],[v].concat(t,m)};var Ao={N:"S",S:"N",E:"W",W:"E"},Yu={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function $a(t,e,n){var r=new ht(t.x,e.y);return n.containsPoint(r)&&(r=new ht(e.x,t.y)),r}function Qo(t,e){return t["W"===e||"E"===e?"width":"height"]}function ri(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Vr(t){return new de(t.x,t.y,0,0)}function hs(t){var e=To(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function lc(t,e){return t.sourceBBox.clone().moveAndExpand(hs(e))}function cc(t,e){return t.targetBBox.clone().moveAndExpand(hs(e))}function fc(t,e,n){var r=new ht(t.x,e.y),o=new ht(e.x,t.y),s=ri(t,r),c=ri(t,o),v=Ao[n],m=s===n||s!==v&&(c===v||c!==n)?r:o;return{points:[m],direction:ri(m,e)}}function Ta(t,e,n){var r=$a(t,e,n);return{points:[r],direction:ri(r,e)}}function dc(t,e,n,r){var m,o={},s=[new ht(t.x,e.y),new ht(e.x,t.y)],c=s.filter(function(b){return!n.containsPoint(b)}),v=c.filter(function(b){return ri(b,t)!==r});if(v.length>0)m=v.filter(function(b){return ri(t,b)===r}).pop(),o.points=[m=m||v[0]],o.direction=ri(m,e);else{m=_t(s,c)[0];var S=new ht(e).move(m,-Qo(n,r)/2),A=$a(S,t,n);o.points=[A,S],o.direction=ri(S,e)}return o}function ud(t,e,n,r){var o=Ta(e,t,r),s=o.points[0];if(n.containsPoint(s)){var c=(o=Ta(t,e,n)).points[0];if(r.containsPoint(c)){var v=new ht(t).move(c,-Qo(n,ri(t,c))/2),m=new ht(e).move(s,-Qo(r,ri(e,s))/2),S=new be(v,m).midpoint(),A=Ta(t,S,n),b=fc(S,e,A.direction);o.points=[A.points[0],b.points[0]],o.direction=b.direction}}return o}function Ku(t,e,n,r,o){var A,b,G,s={},c=n.union(r).inflate(1),v=c.center().distance(e)>c.center().distance(t),m=v?e:t,S=v?t:e;return o?(A=ht.fromPolar(c.width+c.height,Yu[o],m),A=c.pointNearestToPoint(A).move(A,-1)):A=c.pointNearestToPoint(m).move(m,1),b=$a(A,S,c),A.round().equals(b.round())?(b=ht.fromPolar(c.width+c.height,Sr(A.theta(m))+Math.PI/2,S),G=$a(A,b=c.pointNearestToPoint(b).move(S,1).round(),c),s.points=v?[b,G,A]:[A,G,b]):s.points=v?[b,A]:[A,b],s.direction=ri(v?A:b,e),s}function Ya(t,e,n){var r=lc(n,e),o=cc(n,e),s=function sd(t,e){return t.sourceAnchor?t.sourceAnchor:lc(t,e).center()}(n,e),c=function Xu(t,e){return t.targetAnchor?t.targetAnchor:cc(t,e).center()}(n,e);r=r.union(Vr(s)),o=o.union(Vr(c)),(t=ke(t).map(ht)).unshift(s),t.push(c);for(var v,m=[],S=0,A=t.length-1;S<A;S++){var b=null,G=t[S],tt=t[S+1],ot=!!ri(G,tt);if(0===S)S+1===A?r.intersect(o.clone().inflate(1))?b=Ku(G,tt,r,o):ot||(b=ud(G,tt,r,o)):r.containsPoint(tt)?b=Ku(G,tt,r,Vr(tt).moveAndExpand(hs(e))):ot||(b=Ta(G,tt,r));else if(S+1===A){var Tt=ot&&ri(tt,G)===v;o.containsPoint(G)||Tt?b=Ku(G,tt,Vr(G).moveAndExpand(hs(e)),o,v):ot||(b=dc(G,tt,o,v))}else ot||(b=fc(G,tt,v));b?(Array.prototype.push.apply(m,b.points),v=b.direction):v=ri(G,tt),S+1<A&&m.push(tt)}return m}var hc={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!ve(Ya))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Ya(t,Ve({},hc,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function Ju(t){this.map={},this.options=t,this.mapGridSize=100}function Zo(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Qu(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function pc(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function gc(t,e){return t.sourceAnchor?t.sourceAnchor:Qu(t,e).center()}function au(t,e,n,r,o){var s=360/n,c=t.theta(function Zu(t,e,n,r){var o=r.step;return new ht(t.x+(e.x-t.x)/n.x*o,t.y+(e.y-t.y)/n.y*o)}(t,e,r,o)),v=Zr(c+s/2);return s*Math.floor(v/s)}function vc(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function tl(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function Ea(t,e){return t.round(e)}function su(t,e,n){return Ea(function yc(t,e){var n=e.source,r=Li(t.x-n.x,e.x)+n.x,o=Li(t.y-n.y,e.y)+n.y;return new ht(r,o)}(t.clone(),e),n)}function ps(t){return t.clone().toString()}function uu(t){return new ht(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function cd(t,e,n,r,o,s,c){for(var b,v=[],m=uu(o.difference(n)),S=ps(n),A=t[S];A;){var G=uu((b=e[S]).difference(A));G.equals(m)||(v.unshift(b),m=G),A=t[S=ps(A)]}var tt=e[S];return uu(tt.difference(r)).equals(m)||v.unshift(tt),v}function el(t,e){for(var n=1/0,r=0,o=e.length;r<o;r++){var s=t.manhattanDistance(e[r]);s<n&&(n=s)}return n}function xc(t,e,n,r,o){var s=o.precision,c=o.directionMap,v=t.difference(e.center()),m=an(c)?Object.keys(c):[],S=ke(n),A=m.reduce(function(b,G){if(S.includes(G)){for(var Nt,tt=c[G],ot=new ht(t.x+tt.x*(Math.abs(v.x)+e.width),t.y+tt.y*(Math.abs(v.y)+e.height)),Ct=new be(t,ot).intersect(e)||[],Dt=Ct.length,L=null,U=0;U<Dt;U++){var K=Ct[U],it=t.squaredDistance(K);(void 0===Nt||it>Nt)&&(Nt=it,L=K)}if(L){var gt=su(L,r,s);e.containsPoint(gt)&&(gt=su(gt.offset(tt.x*r.x,tt.y*r.y),r,s)),b.push(gt)}}return b},[]);return e.containsPoint(t)||A.push(su(t,r,s)),A}function nl(t,e,n,r){var s,c,o=r.precision;s=Ea(t instanceof de?gc(this,r).clone():t.clone(),o),c=Ea(e instanceof de?function ld(t,e){return t.targetAnchor?t.targetAnchor:pc(t,e).center()}(this,r).clone():e.clone(),o);var m,S,A,b,v=function mc(t,e,n){return{source:e.clone(),x:tl(n.x-e.x,t),y:tl(n.y-e.y,t)}}(r.step,s,c);if(A=t instanceof de?xc(m=s,t,r.startDirections,v,r):[m=s],e instanceof de?(S=c,b=xc(c,e,r.endDirections,v,r)):b=[S=c],A=A.filter(Tn=>!n(Tn)),b=b.filter(Tn=>!n(Tn)),A.length>0&&b.length>0){for(var G=new Zo,tt={},ot={},Tt={},Ct=0,Dt=A.length;Ct<Dt;Ct++){var Nt=A[Ct],L=ps(Nt);G.add(L,el(Nt,b)),tt[L]=Nt,Tt[L]=0}var it,gt,U=r.previousDirectionAngle,K=void 0===U,It=r.directions;!function qu(t,e,n){var r=n.step;ke(n.directions).forEach(function(o){o.gridOffsetX=o.offsetX/r*e.x,o.gridOffsetY=o.offsetY/r*e.y})}(0,v,r);for(var Ot=It.length,Gt=ke(b).reduce(function(Tn,He){var we=ps(He);return Tn.push(we),Tn},[]),se=r.maximumLoops;!G.isEmpty()&&se>0;){var An,ee=G.pop(),ce=tt[ee],me=ot[ee],ye=Tt[ee],Oe=void 0===me,Hn=ce.equals(m);An=Oe?K?Hn?null:au(m,ce,Ot,v,r):U:au(me,ce,Ot,v,r);var Qn=A.length===b.length;if(Qn)for(var Fe=0;Fe<A.length;Fe++)if(!A[Fe].equals(b[Fe])){Qn=!1;break}if((!Oe||!Qn)&&Gt.indexOf(ee)>=0)return r.previousDirectionAngle=An,cd(ot,tt,ce,m,S);for(Ct=0;Ct<Ot;Ct++){var Ue=(it=It[Ct]).angle;if(gt=vc(An,Ue),K&&Hn||!(gt>r.maxAllowedDirectionChange)){var ze=su(ce.clone().offset(it.gridOffsetX,it.gridOffsetY),v,o),wn=ps(ze);if(!G.isClose(wn)&&!n(ze)){if(Gt.indexOf(wn)>=0&&!ze.equals(S)&&vc(Ue,au(ze,S,Ot,v,r))>r.maxAllowedDirectionChange)continue;var un=ye+it.cost+(Hn?0:r.penalties[gt]);(!G.isOpen(wn)||un<Tt[wn])&&(tt[wn]=ze,ot[wn]=ce,Tt[wn]=un,G.add(wn,un+el(ze,b)))}}}se--}}return r.fallbackRoute.call(this,m,S,r)}Ju.prototype.build=function(t,e){var n=this.options,r=ke(n.excludeEnds).reduce(function(m,S){var A=e.get(S);if(A){var b=t.getCell(A.id);b&&m.push(b)}return m},[]),o=[],s=t.getCell(e.get("source").id);s&&(o=Mt(o,s.getAncestors().map(function(m){return m.id})));var c=t.getCell(e.get("target").id);c&&(o=Mt(o,c.getAncestors().map(function(m){return m.id})));var v=this.mapGridSize;return t.getElements().reduce(function(m,S){var A=ke(n.excludeTypes).includes(S.get("type")),b=r.find(function(U){return U.id===S.id}),G=o.includes(S.id);if(!(A||b||G))for(var ot=S.getBBox().moveAndExpand(n.paddingBox),Tt=ot.origin().snapToGrid(v),Ct=ot.corner().snapToGrid(v),Dt=Tt.x;Dt<=Ct.x;Dt+=v)for(var Nt=Tt.y;Nt<=Ct.y;Nt+=v){var L=Dt+"@"+Nt;m[L]=m[L]||[],m[L].push(ot)}return m},this.map),this},Ju.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return ke(this.map[e]).every(function(n){return!n.containsPoint(t)})},Zo.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=Ps(this.items,t,function(r){return this.values[r]}.bind(this));this.items.splice(n,0,t)},Zo.prototype.remove=function(t){this.hash[t]=this.CLOSE},Zo.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},Zo.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},Zo.prototype.isEmpty=function(){return 0===this.items.length},Zo.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const il=function(t,e,n){return function rl(t,e,n){(function bc(t){if(t.directions=Bt(t,"directions"),t.penalties=Bt(t,"penalties"),t.paddingBox=Bt(t,"paddingBox"),t.padding=Bt(t,"padding"),t.padding){var e=To(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}ke(t.directions).forEach(function(n){var r=new ht(0,0),o=new ht(n.offsetX,n.offsetY);n.angle=Zr(r.theta(o))})})(e),n.options.perpendicular=!!e.perpendicular;var r=Qu(n,e),o=pc(n,e),s=gc(n,e);let c;if("function"==typeof e.isPointObstacle)c=e.isPointObstacle;else{const L=new Ju(e);L.build(n.paper.model,n.model),c=U=>!L.isPointAccessible(U)}for(var A,b,v=ke(t).map(ht),m=[],S=s,G=0,tt=v.length;G<=tt;G++){var ot=null;if(b=A||r,!(A=v[G])&&(A=o,(!n.model.get("source").id||!n.model.get("target").id)&&ve(e.draggingRoute))){var Ct=b===r?s:b,Dt=A.origin();ot=e.draggingRoute.call(n,Ct,Dt,e)}if(null===(ot=ot||nl.call(n,b,A,c,e)))return e.fallbackRouter(t,e,n);var Nt=ot[0];Nt&&Nt.equals(S)&&ot.shift(),S=ot[ot.length-1]||S,Array.prototype.push.apply(m,ot)}return m}(t,Ve({},hc,e),n)};var ol={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),o=[],s={x:e.x,y:t.y},c={x:t.x,y:e.y};if(r%180>90){var v=s;s=c,c=v}var m=r%90<45?s:c,S=new be(t,m),A=90*Math.ceil(r/90),b=ht.fromPolar(S.squaredLength(),Sr(A+135),m),G=new be(e,b),tt=S.intersection(G),ot=tt||e,Ct=360/n.directions.length,Dt=(tt?ot:t).theta(e),Nt=Zr(Dt+Ct/2),L=Ct*Math.floor(Nt/Ct);return n.previousDirectionAngle=L,ot&&o.push(ot.round()),o.push(e),o}};const _n=function(t,e,n){if(!ve(il))throw new Error("Metro requires the manhattan router.");return il(t,Ve({},ol,e),n)};var Cc=["arc","gap","cubic"],dd=["smooth"],lu=1/3,xi=2/3;function sl(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(o,s,c){var v=r[c+1];return null!=v&&(o[c]=qr(s,v)),o},[])}function ll(t,e){return qr(t,e).squaredLength()}function qo(t,e,n,r){var s,o=new Ae;return s=Ae.createSegment("M",t[0].start),o.appendSegment(s),ke(t).forEach(function(c,v){if(c.isJump){var m,S,A,b;if("arc"===n){m=-90,S=c.start.difference(c.end);var G=Number(S.x<0||0===S.x&&S.y<0);G&&(m+=180);var Tt,tt=c.midpoint(),ot=new be(tt,c.end).rotate(tt,m);A=(Tt=new be(c.start,tt)).pointAt(2/3).rotate(c.start,m),b=ot.pointAt(1/3).rotate(ot.end,-m),s=Ae.createSegment("C",A,b,ot.end),o.appendSegment(s),Tt=new be(tt,c.end),A=ot.pointAt(1/3).rotate(ot.end,m),b=Tt.pointAt(1/3).rotate(c.end,-m),s=Ae.createSegment("C",A,b,c.end),o.appendSegment(s)}else if("gap"===n)s=Ae.createSegment("M",c.end),o.appendSegment(s);else if("cubic"===n){m=c.start.theta(c.end);var Ct=.6*e,Dt=1.35*e;S=c.start.difference(c.end),(G=Number(S.x<0||0===S.x&&S.y<0))&&(Dt*=-1),A=ht(c.start.x+Ct,c.start.y+Dt).rotate(c.start,m),b=ht(c.end.x-Ct,c.end.y+Dt).rotate(c.end,m),s=Ae.createSegment("C",A,b,c.end),o.appendSegment(s)}}else{var Nt=t[v+1];0==r||!Nt||Nt.isJump?(s=Ae.createSegment("L",c.end),o.appendSegment(s)):function cl(t,e,n,r,o){var tt,s=n.distance(r)/2,c=n.distance(o)/2,v=-Math.min(t,s),m=-Math.min(t,c),S=n.clone().move(r,v).round(),A=n.clone().move(o,m).round(),b=new ht(lu*S.x+xi*n.x,xi*n.y+lu*S.y),G=new ht(lu*A.x+xi*n.x,xi*n.y+lu*A.y);tt=Ae.createSegment("L",S),e.appendSegment(tt),tt=Ae.createSegment("C",b,G,A),e.appendSegment(tt)}(r,o,c.end,c.start,Nt.end)}}),o}const wc=function(t,e,n,r){!function cu(t){var e=t.paper,n=e._jumpOverUpdateList;if(null==n){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||function ul(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],o=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(o)}}(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}(this);var o=r.raw,s=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),v=r.radius||0,m=r.ignoreConnectors||dd;-1===Cc.indexOf(c)&&(c=Cc[0]);var S=this.paper,b=S.model.getLinks();if(1===b.length)return qo(sl(t,e,n),s,c,v);var G=this.model,tt=b.indexOf(G),ot=S.options.defaultConnector||{},Tt=b.filter(function(K,it){var gt=K.get("connector")||ot;return!(ke(m).includes(gt.name)||it>tt&&"jumpover"===gt.name)}),Ct=Tt.map(function(K){return S.findViewByModel(K)}),Dt=sl(t,e,n),Nt=Ct.map(function(K){return null==K?[]:K===this?Dt:sl(K.sourcePoint,K.targetPoint,K.route)},this),L=Dt.reduce(function(K,it){var gt=Tt.reduce(function(It,Ot,Gt){if(Ot!==G){var se=function _c(t,e){return ke(e).reduce(function(n,r){var o=t.intersection(r);return o&&n.push(o),n},[])}(it,Nt[Gt]);It.push.apply(It,se)}return It},[]).sort(function(It,Ot){return ll(it.start,It)-ll(it.start,Ot)});return gt.length>0?K.push.apply(K,function Ui(t,e,n){return e.reduce(function(r,o,s){if(!0===o.skip)return r;var c=r.pop()||t,v=ci(o).move(c.start,-n),m=ci(o).move(c.start,+n),S=e[s+1];if(null!=S){var A=m.distance(S);A<=n&&(m=S.move(c.start,A),S.skip=!0)}else if(v.distance(c.end)<2*n+1)return r.push(c),r;if(m.distance(c.start)<2*n+1)return r.push(c),r;var tt=qr(v,m);return tt.isJump=!0,r.push(qr(c.start,v),tt,qr(m,c.end)),r},[])}(it,gt,s)):K.push(it),K},[]),U=qo(L,s,c,v);return o?U:U.serialize()},fu=function(t,e,n,r){var o=r&&r.raw,s=[t].concat(n).concat([e]),c=new Fn(s),v=new Ae(c);return o?v:v.serialize()},Sc=function(t,e,n,r){r||(r={});var v,o=r.radius||10,s=r.raw,c=new Ae;v=Ae.createSegment("M",t),c.appendSegment(v);for(var A,b,G,tt,ot,Tt,Ct,Dt,Nt,L,U,m=1/3,S=2/3,K=0,it=n.length;K<it;K++)A=new ht(n[K]),b=n[K-1]||t,G=n[K+1]||e,tt=ot||A.distance(b)/2,ot=A.distance(G)/2,Tt=-Math.min(o,tt),Ct=-Math.min(o,ot),Dt=A.clone().move(b,Tt).round(),Nt=A.clone().move(G,Ct).round(),L=new ht(m*Dt.x+S*A.x,S*A.y+m*Dt.y),U=new ht(m*Nt.x+S*A.x,S*A.y+m*Nt.y),v=Ae.createSegment("L",Dt),c.appendSegment(v),v=Ae.createSegment("C",L,U,Nt),c.appendSegment(v);return v=Ae.createSegment("L",e),c.appendSegment(v),s?c:c.serialize()},fl=function(t,e,n,r){var s,o=r&&r.raw;if(n&&0!==n.length){var c=[t].concat(n).concat([e]),v=Sn.throughPoints(c);s=new Ae(v)}else{var m;if(s=new Ae,m=Ae.createSegment("M",t),s.appendSegment(m),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var S=(t.x+e.x)/2;m=Ae.createSegment("C",S,t.y,S,e.y,e.x,e.y),s.appendSegment(m)}else{var A=(t.y+e.y)/2;m=Ae.createSegment("C",t.x,A,e.x,A,e.x,e.y),s.appendSegment(m)}}return o?s:s.serialize()},zi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Kr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Rs=function(t,e,n=[],r={},o){const s=Boolean(r.raw),{direction:c=zi.AUTO,precision:v=3}=r,m={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new ht(r.sourceTangent):null,targetTangent:r.targetTangent?new ht(r.targetTangent):null};m.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new ht(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new ht(r.sourceDirection).normalize():null,m.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new ht(1,0).rotate(null,r.targetDirection):r.targetDirection?new ht(r.targetDirection).normalize():null;const S=[t,...n.map(Tt=>new ht(Tt)),e];let A,b;if(m.sourceTangent)A=m.sourceTangent;else{const Tt=function Ic(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case Kr.UP:return new ht(0,-1);case Kr.DOWN:return new ht(0,1);case Kr.LEFT:return new ht(-1,0);case Kr.RIGHT:return new ht(1,0);case Kr.AUTO:return dl(t,e);case Kr.CLOSEST_POINT:return Ec(0,e);case Kr.OUTWARDS:return Ac(t,e);default:return r.sourceDirection}switch(n){case zi.HORIZONTAL:return function Pa(t,e,n){const{sourceBBox:r}=t;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(e[0]):r.x>e[1].x?"right":"left",o)?new ht(-1,0):new ht(1,0)}(t,e);case zi.VERTICAL:return function Aa(t,e,n){const{sourceBBox:r}=t;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(e[0]):r.y>e[1].y?"bottom":"top",o)?new ht(0,-1):new ht(0,1)}(t,e);case zi.CLOSEST_POINT:return Ec(0,e);case zi.OUTWARDS:return Ac(t,e);default:return dl(t,e)}}(o,S,c,m),Ct=S[0].distance(S[1])*m.coeff,Nt=hu(Tt,S[1].difference(S[0]).normalize());if(Nt>Math.PI/4){const L=Ct+(Nt-Math.PI/4)*m.angleTangentCoefficient;A=Tt.clone().scale(L,L)}else A=Tt.clone().scale(Ct,Ct)}if(m.targetTangent)b=m.targetTangent;else{const Tt=function pd(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case Kr.UP:return new ht(0,-1);case Kr.DOWN:return new ht(0,1);case Kr.LEFT:return new ht(-1,0);case Kr.RIGHT:return new ht(0,1);case Kr.AUTO:return du(t,e);case Kr.CLOSEST_POINT:return Pc(0,e);case Kr.OUTWARDS:return hl(t,e);default:return r.targetDirection}switch(n){case zi.HORIZONTAL:return function hd(t,e,n){const{targetBBox:r}=t;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.x>e[e.length-2].x?"left":"right",o)?new ht(-1,0):new ht(1,0)}(t,e);case zi.VERTICAL:return function Tc(t,e,n){const{targetBBox:r}=t;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(e[e.length-1]):r.y>e[e.length-2].y?"top":"bottom",o)?new ht(0,-1):new ht(0,1)}(t,e);case zi.CLOSEST_POINT:return Pc(0,e);case zi.OUTWARDS:return hl(t,e);default:return du(t,e)}}(o,S,c,m),Ct=S.length-1,Dt=S[Ct-1].distance(S[Ct])*m.coeff,L=hu(Tt,S[Ct-1].difference(S[Ct]).normalize());if(L>Math.PI/4){const U=Dt+(L-Math.PI/4)*m.angleTangentCoefficient;b=Tt.clone().scale(U,U)}else b=Tt.clone().scale(Dt,Dt)}const tt=function Io(t,e,n,r){const{tau:o,coeff:s}=r,c=[],v=[],m=[],S=t.length-1;for(let A=0;A<S;A++)c[A]=t[A].distance(t[A+1]);v[0]=e,v[S]=n;for(let A=1;A<S;A++){let b,G;b=1===A?t[A-1].clone().offset(v[A-1].x,v[A-1].y):t[A-1].clone(),G=A===S-1?t[A+1].clone().offset(v[A+1].x,v[A+1].y):t[A+1].clone();const tt=b.difference(t[A]).normalize(),ot=G.difference(t[A]).normalize(),Tt=hu(tt,ot);let Dt,Ct=(Math.PI-Tt)/2;const Nt=bi(tt,ot);let L;L=bi(t[A].difference(t[A+1]),t[A].difference(t[A-1])),Nt<0&&(Ct=-Ct),Tt<Math.PI/2&&(Ct<0&&L<0||Ct>0&&L>0)&&(Ct-=Math.PI),Dt=ot.clone(),Mc(Dt,Ct);const U=Dt.clone(),K=Dt.clone(),it=c[A-1]*s,gt=c[A]*s;U.scale(it,it),K.scale(gt,gt),v[A]=[U,K]}for(let A=0;A<S;A++){let b,G;b=0===A?t[A+1].difference(v[A].x/o,v[A].y/o):t[A+1].difference(v[A][1].x/o,v[A][1].y/o),G=A===S-1?t[A].clone().offset(v[A+1].x/o,v[A+1].y/o):t[A].difference(v[A+1][0].x/o,v[A+1][0].y/o),m[A]=[b,t[A],t[A+1],G]}return m}(S,A,b,m).map(Tt=>function gd(t,e){const{tau:n}=e,r=new ht;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const o=new ht;return o.x=t[2].x+(t[3].x-t[1].x)/(6*n),o.y=t[2].y+(t[3].y-t[1].y)/(6*n),new Sn(t[1],r,o,t[2])}(Tt,m)),ot=new Ae(tt).round(v);return s?ot:ot.serialize()};function dl(t,e,n){const{sourceBBox:r}=t;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?e[0]:e[1]),o){case"top":return new ht(0,-1);case"bottom":return new ht(0,1);case"right":return new ht(1,0);case"left":return new ht(-1,0)}}function du(t,e,n){const{targetBBox:r}=t;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?e[e.length-1]:e[e.length-2]),o){case"top":return new ht(0,-1);case"bottom":return new ht(0,1);case"right":return new ht(1,0);case"left":return new ht(-1,0)}}function Ec(t,e,n){return e[1].difference(e[0]).normalize()}function Pc(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function Ac(t,e,n){const{sourceBBox:r}=t,o=r.center();return e[0].difference(o).normalize()}function hl(t,e,n){const{targetBBox:r}=t,o=r.center();return e[e.length-1].difference(o).normalize()}function Mc(t,e){const n=Math.cos(e),r=Math.sin(e),s=r*t.x+n*t.y;t.x=n*t.x-r*t.y,t.y=s}function hu(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function bi(t,e){return t.x*e.y-t.y*e.x}Rs.Directions=zi,Rs.TangentDirections=Kr;const nn={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Ia=Dn.extend({className:function(){var t=Dn.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Dn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[nn.RENDER],attrs:[nn.UPDATE],router:[nn.UPDATE],connector:[nn.CONNECTOR],smooth:[nn.UPDATE],manhattan:[nn.UPDATE],toolMarkup:[nn.LEGACY_TOOLS],labels:[nn.LABELS],labelMarkup:[nn.LABELS],vertices:[nn.VERTICES,nn.UPDATE],vertexMarkup:[nn.VERTICES],source:[nn.SOURCE,nn.UPDATE],target:[nn.TARGET,nn.UPDATE]},initFlag:[nn.RENDER,nn.SOURCE,nn.TARGET,nn.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,nn.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,nn.SOURCE)}if(this.hasFlag(t,nn.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,nn.TARGET)}const{paper:n,sourceView:r,targetView:o}=this;if(n&&(r&&!n.isViewMounted(r)||o&&!n.isViewMounted(o)))return t;if(this.hasFlag(t,nn.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),this.removeFlag(t,[nn.RENDER,nn.UPDATE,nn.VERTICES,nn.LABELS,nn.TOOLS,nn.LEGACY_TOOLS,nn.CONNECTOR]);let s=!1;this.hasFlag(t,nn.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,nn.VERTICES));const{model:c}=this,{attributes:v}=c;let m=this.hasFlag(t,nn.LABELS),S=this.hasFlag(t,nn.LEGACY_TOOLS);m&&(this.onLabelsChange(c,v.labels,e),t=this.removeFlag(t,nn.LABELS),s=!0),S&&(this.renderTools(),t=this.removeFlag(t,nn.LEGACY_TOOLS));const A=this.hasFlag(t,nn.UPDATE),b=this.hasFlag(t,nn.CONNECTOR);return(A||b)&&(A?e.translateBy&&c.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[nn.UPDATE,nn.TOOLS,nn.CONNECTOR]),m=!1,S=!1,s=!0),m&&this.updateLabelPositions(),S&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(t,nn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,nn.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(nn.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1&&e[n[1]]){if(2===r)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=Yt(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,o=e.length;r<o;r++){var s=e[r],c=s.attr("class");c&&(c=So(c),n[Pn.camelCase(c)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=Yt(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)n.appendChild(e[r].node);else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return(n=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Yt("g").append(e):Yt(r[0])).addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},o=this.model,s=o.attributes.labels||[],c=s.length;if(0===c)return e&&e.remove(),this;e?e.empty():(e=t.labels=Yt("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(sr(Bt(this,"className"))),e.attr("model-id",o.id)));for(var v=0;v<c;v++){var A,b,S=this._normalizeLabelMarkup(this._getLabelMarkup(s[v].markup));if(S)A=S.node,b=S.selectors;else{var tt=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),ot=o._getDefaultLabel(),Ct=this._normalizeLabelMarkup(this._getLabelMarkup(ot.markup))||tt;A=Ct.node,b=Ct.selectors}A.setAttribute("label-idx",v),e.append(A),n[v]=A;var Dt=this.selector;if(b[Dt])throw new Error("dia.LinkView: ambiguous label root selector.");b[Dt]=A,r[v]=b}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:o}=this,{labels:s}=r;if(!s||!n.hasLabels())return;const{node:c}=s;o.labelsLayer?e.getLayerView(o.labelsLayer).insertSortedNode(c,n.get("z")):c.parentNode!==t&&t.appendChild(c)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},onMount:function(){this.mountLabels()},unmount:function(){Dn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[o=null]=this.findBySelector(e,n,r);return o},_mergeLabelAttrs:function(t,e,n,r){return null===e?null:void 0===e?null===n?null:void 0===n?t?void 0:r:t?n:qe({},r,n):t?qe({},n,e):qe({},r,n,e)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),o=t._builtins.defaultLabel.attrs,s=t._getDefaultLabel(),c=s.markup,v=s.attrs,m=0,S=e.length;m<S;m++){var A=this._labelCache[m];A.setAttribute("cursor",n?"move":"default");var b=this._labelSelectors[m],G=e[m],Tt=this._mergeLabelAttrs(G.markup||c,G.attrs,v,o);this.updateDOMSubtreeAttributes(A,Tt,{rootBBox:new de(G.size),selectors:b})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,t=Pn(this._V.linkTools.node).empty(),e=Fr(this.model.get("toolMarkup")||this.model.toolMarkup),n=Yt(e());return t.append(n.node),this._toolCache=n,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=Fr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Yt(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=Pn(this._V.markerVertices.node).empty(),e=Fr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(Yt(e(Ve({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=Pn(this._V.markerArrowheads.node);t.empty();var e=Fr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Yt(e({end:"source"})),this._V.targetArrowhead=Yt(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),o=[this.sourceAnchor,...r,this.targetAnchor],s=o.length,c=new Fn(o);c.simplify({threshold:.001});const v=c.points.map(S=>S.toJSON()),m=v.length;return s===m?0:(n.vertices(v.slice(1,m-1),t),s-m)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new ht(this.sourceAnchor);case"target":return new ht(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new ht(this.sourcePoint);case"target":return new ht(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const o=new Fn(n);o.translate(t,e),this.route=o.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,o=this.targetAnchor=n.target,s=this.findRoute(e);this.route=s;var c=this.findConnectionPoints(s,r,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),o=this.findPath(t,r.source||e,r.target||n);this.path=o},findMarkerPoints:function(t,e,n){var c,v,r=t[0],o=t[t.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),c=ht(e).move(r||n,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),v=ht(n).move(o||e,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=c||e.clone(),s.targetPoint=v||n.clone(),{source:c,target:v}},findAnchorsOrdered:function(t,e,n,r){var o,s,c,v,m=this.model,S=m.get(t),A=m.get(n),b=this.getEndView(t),G=this.getEndView(n),tt=this.getEndMagnet(t),ot=this.getEndMagnet(n);b?(c=e?new ht(e):G?ot:new ht(A),o=this.getAnchor(S.anchor,b,tt,c,t)):o=new ht(S),G?(v=new ht(r||o),s=this.getAnchor(A.anchor,G,ot,v,n)):s=new ht(A);var Tt={};return Tt[t]=o,Tt[n]=s,Tt},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var b,G,tt,Dt,r=t[0],o=t[t.length-1],s=this.model,c=s.get("source"),v=s.get("target"),m=this.sourceView,S=this.targetView,A=this.paper.options;if(m&&!m.isNodeConnection(this.sourceMagnet)){b=this.sourceMagnet||m.el;var ot=c.connectionPoint||A.defaultConnectionPoint,Ct=new be(r||n,e);tt=this.getConnectionPoint(ot,m,b,Ct,"source")}else tt=e;if(S&&!S.isNodeConnection(this.targetMagnet)){G=this.targetMagnet||S.el;var Nt=v.connectionPoint||A.defaultConnectionPoint,U=new be(o||e,n);Dt=this.getConnectionPoint(Nt,S,G,U,"target")}else Dt=n;return{source:tt,target:Dt}},getAnchor:function(t,e,n,r,o){var v,s=e.isNodeConnection(n),c=this.paper.options;if(t||(t=s?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)v=t;else{var m=t.name;if("function"!=typeof(v=c[s?"linkAnchorNamespace":"anchorNamespace"][m]))throw new Error("Unknown anchor: "+m)}var A=v.call(this,e,n,r,t.args||{},o,this);return A?A.round(this.decimalsRounding):new ht},getConnectionPoint:function(t,e,n,r,o){var s,S,c=r.end,v=this.paper.options;if("function"==typeof v.linkConnectionPoint&&(s=v.linkConnectionPoint(this,e,n===e.el?void 0:n,r.start,o)))return s;if(!t)return c;if("function"==typeof t)S=t;else{var A=t.name;if("function"!=typeof(S=v.connectionPointNamespace[A]))throw new Error("Unknown connection point: "+A)}return(s=S.call(this,r,e,n,t.args||{},o,this))?s.round(this.decimalsRounding):c},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var o=e._builtins.defaultLabel.position,s=e._getDefaultLabel(),c=this._normalizeLabelPosition(s.position),v=qe({},o,c),m=0,S=n.length;m<S;m++){var A=this._labelCache[m];if(A){var G=this._normalizeLabelPosition(n[m].position),tt=qe({},v,G),ot=this._getLabelTransformationMatrix(tt);A.setAttribute("transform",Yt.matrixToTransformString(ot)),this._cleanLabelMatrices(m)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let o in r){const{id:s}=r[o];s&&s in e&&delete e[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength?(r=this.getPointAtLength(n-(this.options.doubleLinkToolsOffset||e)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===Pn.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,o=e.get(t),s=o&&o.id;if(!s)return this[r]=null,this.updateEndMagnet(t),!0;const c=n.getModelById(s);if(!c)throw new Error("LinkView: invalid "+t+" cell.");const v=c.findView(n);return!!v&&(this[r]=v,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=ke(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:qe({},e,t)},addLabel:function(t,e,n,r){var o,s,v,c=0;"number"!=typeof t?(o=t.x,s=t.y,"number"==typeof e?(c=e,v=n):v=e):(o=t,s=e,"number"==typeof n?(c=n,v=r):v=n);var m=this._getDefaultLabelPositionArgs(),A=this._mergeLabelPositionArgs(v,m),b={position:this.getLabelPosition(o,s,c,A)};return this.model.insertLabel(-1,b,v),-1},addVertex:function(t,e,n){var r="number"!=typeof t,o=r?t.x:t,s=r?t.y:e,c=r?e:n,v={x:o,y:s},m=this.getVertexIndex(o,s);return this.model.insertVertex(m,v,c),m},sendToken:function(t,e,n){var o,s,c;an(e)?(o=e.duration,s="reverse"===e.direction,c=e.connection):(o=e,s=!1,c=null);var v={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(v.keyPoints="1;0",v.keyTimes="0;1");var S,m=Yt(t);if("string"==typeof c)S=this.findBySelector(c,this.el,this.selectors)[0];else{var A=this._V;S=A.connection?A.connection.node:this.el.querySelector("path")}if(!(S instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");m.appendTo(this.paper.cells).animateAlongPath(v,S),setTimeout(function r(b,G){return function(){b.remove(),"function"==typeof G&&G()}}(m,n),o)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||x,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return t.map(ht);n=r}var o=ve(n)?n:e[n.name];if(!ve(o))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');return o.call(this,t,n.args||{},this)||t.map(ht)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||I,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=ve(o)?o:r[o.name];if(!ve(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var v=wt(o.args||{});v.raw=!0;var m=c.call(this,e,n,t,v,this);return"string"==typeof m&&(m=new Ae(Yt.normalizePathData(m))),m},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(ni(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var c,o={},s=0;"number"==typeof n?(s=n,c=r):c=n,c&&(o.args=c);var Tt,Ct,v=!(c&&c.absoluteDistance),m=c&&c.absoluteDistance&&c.reverseDistance,S=c&&c.absoluteOffset,A=this.path,b={segmentSubdivisions:this.getConnectionSubdivisions()},G=new ht(t,e),tt=A.closestPointT(G,b),ot=A.lengthAtT(tt,b);if(v&&(ot=ot/this.getConnectionLength()||0),m&&(ot=-1*(this.getConnectionLength()-ot)||1),o.distance=ot,S||(Tt=A.tangentAtT(tt)),Tt)Ct=Tt.pointOffset(G);else{var Dt=A.pointAtT(tt),Nt=G.difference(Dt);Ct={x:Nt.x,y:Nt.y}}return o.offset=Ct,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");r=t.args||{},e=t.distance,n=t.angle||0}var o=e>0&&e<=1,s=0,c={x:0,y:0};if(t.offset){var v=t.offset;"number"==typeof v&&(s=v),v.x&&(c.x=v.x),v.y&&(c.y=v.y)}var Tt,m=0!==c.x||0!==c.y||0===s,S=r.keepGradient,A=r.ensureLegibility,b=this.path,G={segmentSubdivisions:this.getConnectionSubdivisions()},tt=o?e*this.getConnectionLength():e,ot=b.tangentAtLength(tt,G),Ct=n;if(ot){if(m)(Tt=ot.start).offset(c);else{var Dt=ot.clone();Dt.rotate(ot.start,-90),Dt.setLength(s),Tt=Dt.end}S&&(Ct=ot.angle()+n,A&&(Ct=Zr((Ct+90)%180-90)))}else Tt=b.start,m&&Tt.offset(c);return Yt.createSVGMatrix().translate(Tt.x,Tt.y).rotate(Ct)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new ht(e.e,e.f)},getVertexIndex:function(t,e){for(var r=this.model.vertices(),o=this.getClosestPointLength(new ht(t,e)),s=0,c=r.length;s<c&&!(o<this.getClosestPointLength(r[s]));s++);return s},notifyPointerdown(t,e,n){Dn.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){Dn.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),Dn.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Dn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Dn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){Dn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){switch(this.notifyPointerdown(t,e,n),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,n);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,n);case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;switch(r&&this.eventData(t,r),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}r&&Ve(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;switch(r&&(this.eventData(t,r),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){Dn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Dn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Dn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Dn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){Dn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var o=Yt(t.target).findParentByClass("link-tool",this.el);if(o){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,n,r)}this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else Dn.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){var o=parseInt(t.currentTarget.getAttribute("label-idx"),10),s=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),v=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(c,v);this.eventData(t,{action:"label-move",labelIdx:o,positionAngle:s,positionArgs:m,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var o=parseInt(t.target.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var o=parseInt(t.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var o=t.target.getAttribute("end"),s=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(t,s)}},dragStart:function(t,e,n){!this.can("linkMove")||this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),o={position:this.getLabelPosition(e,n,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(r.labelIdx,o)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?this._snapArrowhead(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,o=this.model.prop(n);if(o&&!co.endsEqual(r,o)){var c=this.paper;r.id&&this.notify("link:disconnect",e,c.findViewByModel(r.id),t.initialMagnet,n),o.id&&this.notify("link:connect",e,c.findViewByModel(o.id),t.magnetUnderPointer,n)}},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:o,connectionStrategy:s}=r.options,c=this.eventData(t);var v=o.radius||50,m=r.findViewsInArea({x:e-v,y:n-v,width:2*v,height:2*v}),S=c.closestView||null,A=c.closestMagnet||null,b=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var G=Number.MAX_VALUE,tt=new ht(e,n);m.forEach(function(U){const K=[];"false"!==U.el.getAttribute("magnet")&&K.push({bbox:U.model.getBBox(),magnet:U.el}),U.$("[magnet]").toArray().forEach(it=>{K.push({bbox:U.getNodeBBox(it),magnet:it})}),K.forEach(it=>{const{magnet:gt,bbox:It}=it,Ot=It.center().squaredDistance(tt);Ot<G&&(A===gt||r.options.validateConnection.apply(r,c.validateConnectionArgs(U,U.el===gt?null:gt)))&&(G=Ot,c.closestView=U,c.closestMagnet=gt)})},this);var ot,Tt=null,Ct=c.closestView,Dt=c.closestMagnet;Dt&&(Tt=c.magnetProxy=Ct.findProxyNode(Dt,"highlighter"));var Nt=c.arrowhead,L=A!==Dt;if(S&&L&&S.unhighlight(b,{connecting:!0,snapping:!0}),Ct){const{prevEnd:U,prevX:K,prevY:it}=c;if(c.prevX=e,c.prevY=n,!L&&("function"!=typeof s||K===e&&it===n)||(ot=Ct.getLinkEnd(Dt,e,n,this.model,Nt),!L&&Ce(U,ot)))return;c.prevEnd=ot,L&&Ct.highlight(Tt,{connecting:!0,snapping:!0})}else ot={x:e,y:n};this.model.set(Nt,ot||{x:e,y:n},{ui:!0}),S&&this.notify("link:snap:disconnect",t,S,A,Nt),Ct&&this.notify("link:snap:connect",t,Ct,Dt,Nt)},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:o,model:s}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=o.findView(t);if(c){const v=r.magnetUnderPointer=c.findMagnet(t),m=r.magnetProxy=c.findProxyNode(v,"highlighter");v&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(c,v))?m&&c.highlight(m,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,s.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:s,magnetProxy:c,arrowhead:v}=t;if(!s||!c||!o)return;o.unhighlight(c,{connecting:!0});const m=o.getLinkEnd(s,e,n,r,v);r.set(v,m,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,o=0;"source"===t?(r=2,n="target"):(o=2,n="source");var s=this.model.get(n);if(s.id){var c=e[r]=this.paper.findViewByModel(s.id),v=c.getMagnetFromLinkEnd(s);v===c.el&&(v=void 0),e[r+1]=v}return function m(S,A){return e[o]=S,e[o+1]=S.el===A?void 0:A,e}},_markAvailableMagnets:function(t){function e(b,G){var tt=b.paper;return tt.options.validateConnection.apply(tt,this.validateConnectionArgs(b,G))}var n=this.paper,r=n.model.getCells();t.marked={};for(var o=0,s=r.length;o<s;o++){var c=r[o].findView(n);if(c){var v=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&v.push(c.el);var m=v.filter(e.bind(t,c));if(m.length>0){for(var S=0,A=m.length;S<A;S++)c.highlight(m[S],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),t.marked[c.model.id]=m}}}},_unmarkAvailableMagnets:function(t){for(var n,r,e=Object.keys(t.marked),o=0,s=e.length;o<s;o++){r=t.marked[n=e[o]];var c=this.paper.findViewByModel(n);if(c){for(var v=0,m=r.length;v<m;v++)c.unhighlight(r[v],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:wt(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n},onRemove:function(){Dn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:nn});Object.defineProperty(Ia.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new de(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new de(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(Ia.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new de(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new de(this.targetAnchor):t.getNodeBBox(n||t.el)}});const ii={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},kc=Po.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return sr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;(t=+t)||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let o=-1/0;for(let s in n)s=+s,s<t&&s>o&&(o=s);return e.insertBefore(r,o!==-1/0?n[o].nextSibling:e.firstChild),r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}}),Lc=Sa.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let o;try{const s=Yt(e);if(o=s.convertToPathData().trim(),"PATH"===s.tagName()&&r){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(s){const c=t.getNodeBoundingRect(e);o=Yt.rectToPath(Ve({},n,c.toJSON()))}return o},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:o,layer:s}=r;let c=t.getNodeMatrix(e);if(o){!s&&e===t.el&&n.remove();let v=t.getNodeBoundingRect(e);const m=v.x+v.width/2,S=v.y+v.height/2;v=Yt.transformRect(v,c);const A=Math.max(v.width,1),b=Math.max(v.height,1),G=(A+o)/A,tt=(b+o)/b,ot=Yt.createSVGMatrix({a:G,b:0,c:0,d:tt,e:m-G*m,f:S-tt*S});c=c.multiply(ot)}n.attr({d:this.getPathData(t,e),transform:Yt.matrixToTransformString(c)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),Oc=20,gs=Sa.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Oc,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,s=e.tagName();if(!Yt.isSVGGraphicsElement(e)||o.includes(s))return e.remove(),!1;if(r.includes(s)){const c=t.vel.findOne(`#${e.id}`);if(c){const{node:v}=c;let m=t.getNodeBoundingRect(v);t.model.isElement()&&(m=Yt.transformRect(m,t.getNodeMatrix(v)));const S=Yt("rect",m.toJSON()),{x:A,y:b}=m.center(),{angle:G,cx:tt=A,cy:ot=b}=c.rotate();G&&S.rotate(G,tt,ot),e.parent().append(S)}return e.remove(),!1}return n.forEach(c=>{"fill"===c&&"none"===e.attr("fill")||e.removeAttr(c)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:o}=n,s=e.tagName();let c;if("G"===s){if(!o)return null;c=e.clone(),function Rc(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}(c,v=>this.transformMaskChild(t,v))}else{if(r.includes(s))return null;c=e.clone()}return this.transformMaskRoot(t,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:o}=this,{padding:s,attrs:c}=o,v="stroke-width"in c?c["stroke-width"]:1,m="none"!==e.attr("fill");let S=parseFloat(e.attr("stroke-width"));isNaN(S)&&(S=1);const A=S+2*s,b=A+2*v;let G=this.getMaskShape(t,e);if(!G){const tt=t.getNodeBoundingRect(e.node);tt.inflate(tt.width?0:.5,tt.height?0:.5),G=Yt("rect",tt.toJSON())}return G.attr(c),Yt("mask",{id:this.getMaskId()}).append([G.clone().attr({fill:m?n:"none",stroke:n,"stroke-width":b}),G.clone().attr({fill:m?r:"none",stroke:r,"stroke-width":A})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:o,attrs:s,maskClip:c=Oc,layer:v}=n,m="stroke"in s?s.stroke:"#000000";!v&&e===t.el&&r.remove();const S=t.getNodeBoundingRect(e).inflate(o+c),A=this.getMask(t,Yt(e));this.addMask(t.paper,A),r.attr(S.toJSON()),r.attr({transform:Yt.matrixToTransformString(t.getNodeMatrix(e)),mask:`url(#${A.id})`,fill:m})},unhighlight(t){this.removeMask(t.paper)}}),Ns=Sa.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:sr("highlight-opacity"),highlight:function(t,e){Yt(e).addClass(this.opacityClassName)},unhighlight:function(t,e){Yt(e).removeClass(this.opacityClassName)}}),Nc=sr("highlighted"),Dc=Sa.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Nc},highlight:function(t,e){Yt(e).addClass(this.options.className)},unhighlight:function(t,e){Yt(e).removeClass(this.options.className)}},{className:Nc});function Fc(t,e,n,r){return t.getPointAtRatio("ratio"in r?r.ratio:.5)}function pu(t,e,n,r){return t.getPointAtLength("length"in r?r.length:20)}function Xa(t){return function(e,n,r,o){if(r instanceof Element){var c,s=this.paper.findView(r);if(s)if(s.isNodeConnection(r)){var v="fixedAt"in o?o.fixedAt:"50%";c=Ds(s,v)}else c=s.getNodeBBox(r).center();else c=new ht;return t.call(this,e,n,c,o)}return t.apply(this,arguments)}}function Ds(t,e){var n=parseFloat(e);return ni(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const vd=Xa(function Vc(t,e,n,r){var o=1e6,s=t.getConnection(),c=t.getConnectionSubdivisions(),v=new be(n.clone().offset(0,o),n.clone().offset(0,-o)),m=new be(n.clone().offset(o,0),n.clone().offset(-o,0)),S=v.intersect(s,{segmentSubdivisions:c}),A=m.intersect(s,{segmentSubdivisions:c}),b=[];return S&&Array.prototype.push.apply(b,S),A&&Array.prototype.push.apply(b,A),b.length>0?n.chooseClosest(b):"fallbackAt"in r?Ds(t,r.fallbackAt):pl(t,e,n,r)}),pl=Xa(function gu(t,e,n,r){return t.getClosestPoint(n)||new ht});function Ka(t,e,n){if(Je(n)){const{x:o,y:s}=n;if(isFinite(s)){const c=new be(e,t),{start:v,end:m}=c.parallel(s);e=v,t=m}n=o}if(!isFinite(n))return t;var r=t.distance(e);return 0===n&&r>0?t:t.move(e,-Math.min(n,r-1))}function vu(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function vl(t,e,n,r){var o=e.getNodeBBox(n);r.stroke&&o.inflate(vu(n)/2);var s=t.intersect(o);return Ka(s?t.start.chooseClosest(s):t.end,t.start,r.offset)}var mu="segmentSubdivisons",ml="shapeBBox";const yd=function md(t,e,n,r){let{offset:o,alignOffset:s,align:c}=r;return c&&function gl(t,e,n=0){let r,o,s,c;const{start:v,end:m}=t;switch(e){case"left":r="x",o=m,s=v,c=-1;break;case"right":r="x",o=v,s=m,c=1;break;case"top":r="y",o=m,s=v,c=-1;break;case"bottom":r="y",o=v,s=m,c=1;break;default:return}v[r]<m[r]?o[r]=s[r]:s[r]=o[r],isFinite(n)&&(o[r]+=c*n,s[r]+=c*n)}(t,c,s),Ka(t.end,t.start,o)},xd=vl,ea=function ta(t,e,n,r){var o=e.model.angle();if(0===o)return vl(t,e,n,r);var s=e.getNodeUnrotatedBBox(n);r.stroke&&s.inflate(vu(n)/2);var c=s.center(),v=t.clone().rotate(c,o),m=v.setLength(1e6).intersect(s);return Ka(m?v.start.chooseClosest(m).rotate(c,-o):t.end,t.start,r.offset)},yl=function Hc(t,e,n,r){var o,s,c=r.selector,v=t.end;if(o="string"==typeof c?e.findBySelector(c)[0]:Array.isArray(c)?Pi(n,c):function Bc(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!Yt.isSVGGraphicsElement(o)){if(o===n||!Yt.isSVGGraphicsElement(n))return v;o=n}var Nt,m=e.getNodeShape(o),S=e.getNodeMatrix(o),A=e.getRootTranslateMatrix(),b=e.getRootRotateMatrix(),G=A.multiply(b).multiply(S),tt=G.inverse(),ot=Yt.transformLine(t,tt),Tt=ot.start.clone(),Ct=e.getNodeData(o);if(!1===r.insideout&&(Ct[ml]||(Ct[ml]=m.bbox()),Ct[ml].containsPoint(Tt)))return v;if(m instanceof Ae){var L=r.precision||2;Ct[mu]||(Ct[mu]=m.getSegmentSubdivisions({precision:L})),Nt={precision:L,segmentSubdivisions:Ct[mu]}}!0===r.extrapolate&&ot.setLength(1e6),(s=ot.intersect(m,Nt))?Yt.isArray(s)&&(s=Tt.chooseClosest(s)):!0===r.sticky&&(s=m instanceof de?m.pointNearestToPoint(Tt):m instanceof Tr?m.intersectionWithLineFromCenterToPoint(Tt):m.closestPoint(Tt,Nt));var U=s?Yt.transformPoint(s,G):v,K=r.offset||0;return r.stroke&&(K+=vu(o)/2),Ka(U,t.start,K)};function fo(t){return function(e,n,r,o){var s=!!o.rotate,c=s?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),v=c[t](),m=o.dx;if(m){var S=ni(m);m=parseFloat(m),isFinite(m)&&(S&&(m/=100,m*=c.width),v.x+=m)}var A=o.dy;if(A){var b=ni(A);A=parseFloat(A),isFinite(A)&&(b&&(A/=100,A*=c.height),v.y+=A)}return s?v.rotate(e.model.getBBox().center(),-e.model.angle()):v}}const Ye=fo("center"),xu=fo("topMiddle"),bl=fo("bottomMiddle"),Ja=fo("leftMiddle"),bd=fo("rightMiddle"),Cl=fo("origin"),jc=fo("topRight"),oi=fo("bottomLeft"),Cd=fo("corner"),_d=Xa(function xl(t,e,n,r){var o=t.model.angle(),s=t.getNodeBBox(e),c=s.center(),v=s.origin(),m=s.corner(),S=r.padding;if(isFinite(S)||(S=0),v.y+S<=n.y&&n.y<=m.y-S){var A=n.y-c.y;c.x+=0===o||180===o?0:1*A/Math.tan(Sr(o)),c.y+=A}else if(v.x+S<=n.x&&n.x<=m.x-S){var b=n.x-c.x;c.y+=90===o||270===o?0:b*Math.tan(Sr(o)),c.x+=b}return c}),Uc=Xa(function yu(t,e,n,r){var s,c,v,o=!!r.rotate;o?(s=t.getNodeUnrotatedBBox(e),v=t.model.getBBox().center(),c=t.model.angle()):s=t.getNodeBBox(e);var A,m=r.padding;switch(isFinite(m)&&s.inflate(m),o&&n.rotate(v,c),s.sideNearestToPoint(n)){case"left":A=s.leftMiddle();break;case"right":A=s.rightMiddle();break;case"top":A=s.topMiddle();break;case"bottom":A=s.bottomMiddle()}return o?A.rotate(v,-c):A}),wd=function vs(t,e,n,r,o){return t.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)},Qa={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},bu=9007199254740991,ho=Dn.Highlighting,ai={[ho.DEFAULT]:{name:"stroke",options:{padding:3}},[ho.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[ho.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},_l=[{name:ii.BACK},{name:ii.CELLS},{name:ii.LABELS},{name:ii.FRONT},{name:ii.TOOLS}],Td=Po.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Ar,linkView:Ia,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:ai,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new co,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,r,o,s){return("target"===o?n:t)instanceof Ar},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Qa.EXACT,frozen:!1,onViewUpdate:function(t,e,n,r,o){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:k,anchorNamespace:H,linkAnchorNamespace:M,connectionPointNamespace:B},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&Jt(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new Yo;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=Pn(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!jn(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Qa.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var o=this.SORT_DELAYING_BATCHES;o.includes(e)&&!n.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:s,origin:c,highlighting:v,cellViewNamespace:m,interactive:S}=t;!m&&"undefined"!=typeof joint&&Jt(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),ve(e)||(t.defaultConnector=Wt(e)),ve(n)||(t.defaultRouter=Wt(n)),ve(r)||(t.defaultConnectionPoint=Wt(r)),ve(o)||(t.defaultAnchor=Wt(o)),ve(s)||(t.defaultLinkAnchor=Wt(s)),Je(S)&&(t.interactive=Ve({},S)),Je(v)&&(t.highlighting=Es({},v,ai)),t.origin=Ve({},c)},children:function(){var t=Yt.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:sr("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:sr("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:sr("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:o,background:s,grid:c}=t;return this.svg=n,this.defs=r,this.layers=o,this.$background=Pn(s),this.$grid=Pn(c),this.renderLayers(),Yt.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=_l){this.removeLayers(),t.forEach(({name:o})=>{const c=new kc({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const e=this.getLayerView(ii.CELLS),n=this.getLayerView(ii.TOOLS),r=this.getLayerView(ii.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(sr("viewport")),r.vel.addClass(sr("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t,e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t,e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),Yt.createSVGMatrix(t)}t=Yt.createSVGMatrix(t);var r=Yt.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return Yt.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof Dn)for(var r=t.model,o=this.model.getConnectedLinks(r),s=0,c=o.length;s<c;s++){var v=o[s],m=this.findViewByModel(v);if(m){var S=["UPDATE"];v.getTargetCell()===r&&S.push("TARGET"),v.getSourceCell()===r&&S.push("SOURCE");var A=Math.max(e+1,m.UPDATE_PRIORITY);this.scheduleViewUpdate(m,m.getFlag(S),A,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof Dn))return!1;var n=t.model;if(n.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var r=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o),t.updateEndMagnet("source"));var s=0,c=this.findViewByModel(n.getTargetCell());if(c&&!this.isViewMounted(c)&&(s=this.dumpView(c),t.updateEndMagnet("target")),0===r&&0===s)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var s=this.updateViews(r);o&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:o,options:s}=this,{FLAG_REMOVE:c,FLAG_INSERT:v,UPDATE_PRIORITY:m,cid:S}=t;let A=o.priorities[n];if(A||(A=o.priorities[n]={}),n>m)for(let tt=n-1;tt>=m;tt--){const ot=o.priorities[tt];!ot||!(S in ot)||(A[S]|=ot[S],delete ot[S])}let b=A[S]||0;if((b&e)===e)return;b||o.count++,e&c&&b&v?A[S]^=v:e&v&&b&c&&(A[S]^=c),A[S]|=e;const G=s.onViewUpdate;"function"==typeof G&&G.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var n=t.cid,r=this._updates.priorities[t.UPDATE_PRIORITY],o=this.registerMountedView(t)|r[n];return delete r[n],o},dumpView:function(t,e){var n=this.dumpViewUpdate(t);return n?this.updateView(t,n,e):0},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,model:s}=t;if(t instanceof Dn){if(e&r)return this.removeView(s),0;e&o&&(this.insertView(t),e^=o)}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=gi({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,o=bu;do{r++,e=this.updateViewsBatch(t),n+=e.updated,o=Math.min(e.priority,o)}while(!e.empty);const s={updated:n,batches:r,priority:o};return this.notifyAfterRender(s,t),s},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:bu});var n=this._updates,r=n.id;if(r){ss(r),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var o=this.updateViewsBatch(t),s=gi({},t,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(s),v=c.unmounted,m=c.mounted,S=e.processed,A=n.count;o.updated>0&&(o.processed=S+=o.updated+o.unmounted,e.priority=Math.min(o.priority,e.priority),o.empty&&0===m?(o.unmounted+=v,o.mounted+=m,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=bu,n.count=0):e.processed=S);var b=t.progress;if(A&&"function"==typeof b&&b.call(this,o.empty,S,A,o,this),n.id!==r)return}n.id=za(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;"function"!=typeof e&&(e=this.options.beforeRender,"function"!=typeof e)||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,n=this._updates,r=0,o=0,s=0,c=0,v=bu,m=!0,S=this.options,A=n.priorities,b="viewport"in t?t.viewport:S.viewport;"function"!=typeof b&&(b=null);var G=S.onViewPostponed;"function"!=typeof G&&(G=null);var tt=Object.keys(A);t:for(var ot=0,Tt=tt.length;ot<Tt;ot++){var Ct=+tt[ot],Dt=A[Ct];for(var Nt in Dt){if(r>=e){m=!1;break t}var L=wa[Nt];if(L){var U=Dt[Nt];if(0==(U&L.FLAG_REMOVE)){var K=Nt in n.unmounted;if(L.DETACHABLE&&b&&!b.call(this,L,!K,this)){K||(this.registerUnmountedView(L),L.unmount()),n.unmounted[Nt]|=U,delete Dt[Nt],s++;continue}K&&(U|=L.FLAG_INSERT,c++),U|=this.registerMountedView(L)}var it=this.updateView(L,U,t);it>0&&(Dt[Nt]=it,!G||!G.call(this,L,it,this)||Dt[Nt])?(o++,m=!1):(v>Ct&&(v=Ct),r++,delete Dt[Nt])}else delete Dt[Nt]}}return{priority:v,updated:r,postponed:o,unmounted:s,mounted:c,empty:m}},getUnmountedViews:function(){const e=Object.keys(this._updates.unmounted),n=e.length,r=new Array(n);for(var o=0;o<n;o++)r[o]=wa[e[o]];return r},getMountedViews:function(){const e=Object.keys(this._updates.mounted),n=e.length,r=new Array(n);for(var o=0;o<n;o++)r[o]=wa[e[o]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var o=this._updates,s=o.unmountedCids,c=o.unmounted,v=0,m=(Math.min(s.length,"mountBatchSize"in e?e.mountBatchSize:1/0));v<m;v++){var S=s[v];if(S in c){var A=wa[S];if(A){if(A.DETACHABLE&&t&&!t.call(this,A,!1,this)){s.push(S);continue}n++;var b=this.registerMountedView(A);b&&this.scheduleViewUpdate(A,b,A.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,v),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var o=this._updates,s=o.mountedCids,c=o.mounted,v=0,m=(Math.min(s.length,"unmountBatchSize"in e?e.unmountBatchSize:1/0));v<m;v++){var S=s[v];if(S in c){var A=wa[S];if(A){if(!A.DETACHABLE||t.call(this,A,!0,this)){s.push(S);continue}n++,this.registerUnmountedView(A)&&A.unmount()}}}return s.splice(0,v),n},checkViewport:function(t){var e=gi({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);return r>0&&(e.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,e.mountBatchSize)),{mounted:this.checkUnmountedViews(n,e),unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,o=e.freezeKey;if(n&&n!==o){if(r&&o)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var s=e.id;e.id=null,this.isAsync()&&s&&ss(s)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,(!n||n!==r||!e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Qa.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return jn(e)||(e=this.el.clientWidth),jn(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:o}=n;let s=void 0===t?r:t,c=void 0===e?o:e;if(r===s&&o===c)return;n.width=s,n.height=c,this._setDimensions();const v=this.getComputedSize();this.trigger("resize",v.width,v.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;jn(e)&&(e=Math.round(e)),jn(n)&&(n=Math.round(n)),this.$el.css({width:null===e?"":e,height:null===n?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){r=an(t)?t:Ve({gridWidth:t,gridHeight:e,padding:n},r);const{x:o,y:s,width:c,height:v}=this.getFitToContentArea(r),{sx:m,sy:S}=this.scale();return this.setOrigin(-o*m,-s*S),this.setDimensions(c*m,v*S),new de(o,s,c,v)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=To(t.padding||0),o=Math.max(t.minWidth||0,e),s=Math.max(t.minHeight||0,n),c=t.maxWidth||Number.MAX_VALUE,v=t.maxHeight||Number.MAX_VALUE,m=t.allowNewOrigin,S="contentArea"in t?new de(t.contentArea):this.getContentArea(t),{sx:A,sy:b}=this.scale();S.x*=A,S.y*=b,S.width*=A,S.height*=b;let G=Math.ceil((S.width+S.x)/e),tt=Math.ceil((S.height+S.y)/n);t.allowNegativeBottomRight||(G=Math.max(G,1),tt=Math.max(tt,1)),G*=e,tt*=n;let ot=0;("negative"===m&&S.x<0||"positive"===m&&S.x>=0||"any"===m)&&(ot=Math.ceil(-S.x/e)*e,ot+=r.left,G+=ot);let Tt=0;return("negative"===m&&S.y<0||"positive"===m&&S.y>=0||"any"===m)&&(Tt=Math.ceil(-S.y/n)*n,Tt+=r.top,tt+=Tt),G+=r.right,tt+=r.bottom,G=Math.max(G,o),tt=Math.max(tt,s),G=Math.min(G,c),tt=Math.min(tt,v),new de(-ot/A,-Tt/b,G/A,tt/b)},scaleContentToFit:function(t){var e,n;if(t||(t={}),"contentArea"in t){var r=t.contentArea;e=this.localToPaperRect(r),n=new ht(r)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(e.width&&e.height){gi(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var S,o=To(t.padding),s=t.minScaleX||t.minScale,c=t.maxScaleX||t.maxScale,v=t.minScaleY||t.minScale,m=t.maxScaleY||t.maxScale;if(t.fittingBBox)S=t.fittingBBox;else{var A=this.translate(),b=this.getComputedSize();S={x:A.tx,y:A.ty,width:b.width,height:b.height}}S=new de(S).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var G=this.scale(),tt=S.width/e.width*G.sx,ot=S.height/e.height*G.sy;if(t.preserveAspectRatio&&(tt=ot=Math.min(tt,ot)),t.scaleGrid){var Tt=t.scaleGrid;tt=Tt*Math.floor(tt/Tt),ot=Tt*Math.floor(ot/Tt)}tt=Math.min(c,Math.max(s,tt)),ot=Math.min(m,Math.max(v,ot));var Ct=this.options.origin,Dt=S.x-n.x*tt-Ct.x,Nt=S.y-n.y*ot-Ct.y;this.scale(tt,ot),this.translate(Dt,Nt)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new de:Yt(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return n=ve(e)?e.apply(this,t):!0===e?this.getArea():e?new de(e):null,n},createViewForModel:function(t){const{options:e}=this;var n,r,o=e.cellViewNamespace,s=t.get("type")+"View",c=Pi(o,s,".");return t.isLink()?(n=e.linkView,r=Ia):(n=e.elementView,r=Ar),new(n.prototype instanceof pr.View?c||n:n.call(this,t)||c||r)({model:t,interactive:e.interactive,labelsLayer:!0===e.labelsLayer?ii.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,o=n[e];if(o){var{cid:s}=o;const{mounted:c,unmounted:v}=r;o.remove(),delete n[e],delete c[s],delete v[s]}return o},renderView:function(t,e){const{id:n}=t,r=this._views;let o,s,c=!0;return n in r&&(o=r[n],o.model===t?(s=o.FLAG_INSERT,c=!1):this.removeView(t)),c&&(o=r[n]=this.createViewForModel(t),o.paper=this,s=this.registerUnmountedView(o)|o.getFlag(Bt(o,"initFlag"))),this.requestViewUpdate(o,s,o.UPDATE_PRIORITY,e),o},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,r=t.length;n<r;n++)this.renderView(t[n],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Hi(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var t=Pn(this.cells).children("[model-id]"),e=this.model.get("cells");!function(t,e){var n=Pn(t),r=n.map(function(){var s=this.parentNode,c=s.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,c),s.removeChild(c)}});Array.prototype.sort.call(n,e).each(function(o){r[o].call(this)})}(t,function(n,r){var o=e.get(n.getAttribute("model-id")),s=e.get(r.getAttribute("model-id")),c=o.attributes.z||0,v=s.attributes.z||0;return c===v?0:c<v?-1:1})},insertView:function(t){const e=this.getLayerView(ii.CELLS),{el:n,model:r}=t;this.options.sorting===Qa.APPROX?e.insertSortedNode(n,r.get("z")):e.insertNode(n),t.onMount()},scale:function(t,e,n,r){if(void 0===t)return Yt.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(n=0,r=0);var o=this.translate();(n||r||o.tx||o.ty)&&this.translate(o.tx-n*(t-1),o.ty-r*(e-1)),t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var v=this.matrix();return v.a=t,v.d=e,this.matrix(v),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(void 0===t)return Yt.matrixToRotate(this.matrix());if(void 0===e){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var o=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(o),this},translate:function(t,e){if(void 0===t)return Yt.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:o}=n;t||(t=0),e||(e=0);const s=this.matrix();if(s.e===t&&s.f===e)return this;s.e=t,s.f=e,this.matrix(s);const{tx:c,ty:v}=this.translate();return r.x=c,r.y=v,this.trigger("translate",c,v),o&&this.drawGrid(),this},findView:function(t){var e=Vn(t)?this.cells.querySelector(t):t instanceof Pn?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Vn(t)||jn(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new ht(t),this.model.getElements().map(this.findViewByModel,this).filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=gi(e||{},{strict:!1}),t=new de(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(o){return o&&t[r](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){"string"==typeof t&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new ht(t,e);return Yt.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,r){var o=new de(t,e,n,r);return Yt.transformRect(o,this.matrix())},paperToLocalPoint:function(t,e){var n=new ht(t,e);return Yt.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,r){var o=new de(t,e,n,r);return Yt.transformRect(o,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new ht(t,e);return Yt.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,r){var o=new de(t,e,n,r);return Yt.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new ht(t,e);return Yt.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,r){var o=new de(t,e,n,r);return Yt.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var r=new ht(t,e).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var o=this.pageOffset(),s=new de(t,e,n,r);return s.x-=o.x,s.y-=o.y,this.paperToLocalRect(s)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new ht(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Ia))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,o=r.constructor.validations;return!(!n.multiLinks&&!o.multiLinks.call(this,r,e)||!n.linkPinning&&!o.linkPinning.call(this,r,e)||"function"==typeof n.allowLink&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return ve(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===e){if(!r||n&&(e=r[n],!1===e))return!1;e||(e=r.default)}if(!e)return!1;Vn(e)&&(e={name:e});const s=e.name,c=o[s];if(!c)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:c,options:e.options||{},name:s}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:o,options:s}=r;o.highlight(t,e,s)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:o,options:s}=r;o.unhighlight(t,e,s)},pointerdblclick:function(t){t.preventDefault(),t=Er(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=Er(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=Er(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=Er(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,n.x,n.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,n.x,n.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=Er(t);var r=this.snapToGrid(t.clientX,t.clientY),o=e.sourceView;o?o.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=Er(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(Pn.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=Er(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=Er(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=Er(t);const{target:e,relatedTarget:n,currentTarget:r}=t,o=this.findView(e);if(this.guard(t,o))return;const s=this.findView(n);o&&(s===o||(o.mouseenter(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=Er(t);const{target:e,relatedTarget:n,currentTarget:r}=t,o=this.findView(e);if(this.guard(t,o))return;const s=this.findView(n);o&&(s===o||(o.mouseleave(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseleave",t)},mousewheel:function(t){t=Er(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),o=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,o):this.trigger("blank:mousewheel",t,r.x,r.y,o)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=Er(t),this.guard(t,r))return;var o=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,o.x,o.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var o=this.findView(n);if(o){if(t=Er(t),this.guard(t,o))return;var s=this.snapToGrid(t.clientX,t.clientY);e.call(this,o,t,n,s.x,s.y)}}},onmagnet:function(t){this.magnetEvent(t,function(e,n,r,o,s){e.onmagnet(n,o,s)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,o,s){e.magnetpointerdblclick(n,r,o,s)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(e,n,r,o,s){e.magnetcontextmenu(n,r,o,s)})},onlabel:function(t){var n=this.findView(t.currentTarget);if(n){if(t=Er(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,r.x,r.y)}},getPointerArgs(t){const e=Er(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return!!("mousedown"===t.type&&2===t.button||this.options.guard&&this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof ji||this.svg===t.target||this.el===t.target||Pn.contains(this.svg,t.target)))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Yt("svg",{width:"100%",height:"100%"},Yt("defs")),patterns:{},add:function(t,e){Yt(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(Yt("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Vn(t)&&Array.isArray(e[t]))return e[t].map(function(m){return Ve({},m)});var n=t||{args:[{}]},r=Array.isArray(n),o=n.name;if(!r&&!o&&!n.markup&&(o="dot"),o&&Array.isArray(e[o])){var s=e[o].map(function(m){return Ve({},m)}),c=Array.isArray(n.args)?n.args:[n.args||{}];gi(c[0],fe(t,"args"));for(var v=0;v<c.length;v++)s[v]&&Ve(s[v],c[v]);return s}return r?n:[n]},drawGrid:function(t){var e=this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,v){var m="pattern_"+v,S=qe(c,n[v],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});S.width=e*(r.a||1)*(S.scaleFactor||1),S.height=e*(r.d||1)*(S.scaleFactor||1),o.exist(m)||o.add(m,Yt("pattern",{id:m,patternUnits:"userSpaceOnUse"},Yt(S.markup)));var A=o.get(m);ve(S.update)&&S.update(A.node.childNodes[0],S);var b=S.ox%S.width;b<0&&(b+=S.width);var G=S.oy%S.height;G<0&&(G+=S.height),A.attr({x:b,y:G,width:S.width,height:S.height})});var s=(new XMLSerializer).serializeToString(o.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",r=this.scale(),o=this.translate();an(e)&&(e=o.tx+r.sx*(e.x||0)+"px "+(o.ty+r.sy*(e.y||0))+"px"),an(n)&&(n=(n=new de(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var n,r=(e=e||{}).size,o=e.repeat||"no-repeat",s=e.opacity||1,c=Math.abs(e.quality)||1,v=this.constructor.backgroundPatterns[We(o)];if(ve(v)){t.width*=c,t.height*=c;var m=v(t,e);if(!(m instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=m.toDataURL("image/png"),o="repeat",an(r)?(r.width*=m.width/t.width,r.height*=m.height/t.height):void 0===r&&(e.size={width:m.width/c,height:m.height/c})}else n=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:s,backgroundRepeat:o,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(this.updateBackgroundColor((t=t||{}).color),t.image){t=this._background=Wt(t),In(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Hi(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!an(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+cr(JSON.stringify(t))),!this.isDefined(e)){var o=uo[n]&&uo[n](t.args||{});if(!o)throw new Error("Non-existing filter "+n);var s=Ve({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});Yt(o,s).appendTo(this.defs)}return e},defineGradient:function(t){if(!an(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:o=r+e.id+cr(JSON.stringify(t)),stops:s,attrs:c={}}=t;if(this.isDefined(o))return o;const v=ke(s).map(({offset:S,color:A,opacity:b})=>Yt("stop").attr({offset:S,"stop-color":A,"stop-opacity":Number.isFinite(b)?b:1})),m=Yt(r,c,v);return m.id=o,m.appendTo(n),o},definePattern:function(t){if(!an(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+cr(JSON.stringify(t)),markup:o,attrs:s={}}=t;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=Yt("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(s),"string"==typeof o)c.append(Yt(o));else{const{fragment:v}=pi(o);c.append(v)}return c.appendTo(n),r},defineMarker:function(t){if(!an(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+cr(JSON.stringify(t)),markup:o,attrs:s={},markerUnits:c="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const v=Yt("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(v.id=r,v.attr(s),o)if("string"==typeof o)v.append(Yt(o));else{const{fragment:m}=pi(o);v.append(m)}else{const{type:m="path"}=t,S=Yt(m,fe(t,"type","id","markup","attrs","markerUnits"));v.append(S)}return v.appendTo(n),r}},{sorting:Qa,Layers:ii,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var o=e.getContext("2d");return o.drawImage(t,0,0,n,r),o.setTransform(-1,0,0,-1,e.width,e.height),o.drawImage(t,0,0,n,r),o.setTransform(-1,0,0,1,e.width,0),o.drawImage(t,0,0,n,r),o.setTransform(1,0,0,-1,0,e.height),o.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var o=e.getContext("2d");return o.drawImage(t,0,0,n,r),o.translate(2*n,0),o.scale(-1,1),o.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var o=e.getContext("2d");return o.drawImage(t,0,0,n,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,o=document.createElement("canvas");o.width=3*n,o.height=3*r;for(var s=o.getContext("2d"),c=jn(e.watermarkAngle)?-e.watermarkAngle:-20,v=Sr(c),m=o.width/4,S=o.height/4,A=0;A<4;A++)for(var b=0;b<4;b++)(A+b)%2>0&&(s.setTransform(1,0,0,1,(2*A-1)*m,(2*b-1)*S),s.rotate(v),s.drawImage(t,-n/2,-r/2,n,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){Yt(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;Yt(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,o=e.height,s=e.thickness;n=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Yt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,o=e.height,s=e.thickness;n=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Yt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,o=e.height,s=e.thickness;n=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Yt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}});class wl{constructor(e){this.offsetX=20,this.offsetY=20,this.graph=new Yo,this.paper=new Td({el:Pn("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",n=>{"standard.Ellipse"===n.model.attributes.type&&e(n.model.id)})}makeElement(e,n){const s=16*(.6*Math.max(...n.split("\n").map(v=>v.length))+1)*1.3,c=16*(n.split("\n").length+1)*1.5;return new ed({id:e,size:{width:s,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:n,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:s,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(e,n){return new qi({source:{id:e},target:{id:n},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(e){const n=[],r=[];return e.forEach(o=>{const s=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(o.average_success)}% (${o.question_count} Total)`;n.push(this.makeElement(o.pk,s)),o.next_category_ids.forEach(c=>{r.push(this.makeLink(o.pk,c))})}),n.concat(r)}buildGraphFromAdjacencyList(e){const n=this.makeCellsFromAdjacencyList(e);this.graph.resetCells(n);const r=yi.layout(this.graph,{dagre:Ro(),graphlib:No(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Gc=f(19329);function Ed(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",6),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(7);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",n.parentNodeName," ")}}function Fs(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"h2",6),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&t){i.\u0275\u0275nextContext();const n=i.\u0275\u0275reference(7);i.\u0275\u0275classProp("tui-skeleton",0===n.children.length)}}let Wc=(()=>{class t{constructor(n,r,o){this.categoryService=n,this.router=r,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(n=>{this.rawCategories=n,this.conceptMapGraph=new wl(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const n=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{n.push(r)}),!n)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(n)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(n){return null===this.rawCategories.find(r=>r.pk===n).parent}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(Gc.H),i.\u0275\u0275directiveInject(et.F0),i.\u0275\u0275directiveInject(i.Injector))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:8,vars:7,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["tuiButton","","size","s","appearance","primary","icon","tuiIconArrowLeft","aria-label","Back",1,"tui-space_right-4",3,"disabled","click"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"div",0)(1,"button",1),i.\u0275\u0275listener("click",function(){return r.reset()}),i.\u0275\u0275text(2," Back "),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Ed,3,3,"ng-container",2),i.\u0275\u0275template(4,Fs,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"div",4,5)),2&n){const o=i.\u0275\u0275reference(5),s=i.\u0275\u0275reference(7);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===s.children.length),i.\u0275\u0275property("disabled",!r.parentNode),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===s.children.length)}},directives:[Re.v0,O.O5],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();var Sl=f(30567),$c=f(78659),po=f(27221),Vs=f(40520),Cu=f(22552);let Bs=(()=>{class t{constructor(n,r){this.http=n,this.apiService=r}getCourseEvent(n){const r=this.apiService.getURL("event",n);return this.http.get(r).pipe((0,po.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(n){const r=this.apiService.getURL("event",n);return this.http.delete(r).pipe((0,po.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(n){const r=this.apiService.getURL("event");return this.http.post(r,n).pipe((0,po.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(n){const r=this.apiService.getURL("event",n.id);return this.http.put(r,n).pipe((0,po.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const n=this.apiService.getURL("event","get-event-types");return this.http.get(n).pipe((0,po.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const n=this.apiService.getURL("event");return this.http.get(n).pipe((0,po.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(n,r){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:n.id,course:r},{observe:"response"}).pipe((0,po.K)(this.apiService.handleError("Error occurred during question import.")))}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275inject(Vs.eN),i.\u0275\u0275inject(Cu.s))},t.\u0275prov=i.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ms=f(71105),_u=f(27482);function Tl(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.event.name)}}function Yc(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",n.num_attempts," / ",n.question.max_submission_allowed," Attempts Taken ")}}const Hs=function(t,e,n){return["/course",t,"event",e,"problem",n]};function El(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,Hs,r.courseId,r.eventId,n.question.id))}}const Xc=function(t,e){return["/course",t,"problem",e]};function Kc(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Xc,r.courseId,n.question.id))}}const wu=function(t){return["/problem",t,"edit"]};function Jc(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,wu,n.question.id))}}function Mo(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,Yc,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,El,3,5,"ng-container",10),i.\u0275\u0275template(15,Kc,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,Jc,3,3,"ng-container",0),i.\u0275\u0275elementEnd()()),2&t){const n=e.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",n.question.parent_category_name?n.question.parent_category_name+": ":""," ",n.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",o.highlight(o.getStatus(n)))("value",o.getStatus(n)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,n.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",n.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",o.user.is_teacher)}}function Za(t,e){1&t&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function Pd(t,e){1&t&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function Qc(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Za,2,0,"h2",13),i.\u0275\u0275template(2,Pd,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",n)}}function Ad(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,Tl,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,Mo,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Qc,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",n.eventId)("tui-container_adaptive",n.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",n.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.uqjs.length)}}let Zc=(()=>{class t{constructor(n,r,o,s,c,v){this.authenticationService=n,this.router=r,this.route=o,this.uqjService=s,this.courseEventService=c,this.courseService=v,this.authenticationService.currentUser.subscribe(m=>this.user=m)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(n=>{n.success?(0,Sl.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(n){return n.question.event&&n.question.is_exam?n.question.is_exam&&n.num_attempts>0?"Submitted":n.question.is_exam?"Not Submitted":void 0:n.status}highlight(n){return 0===n.localeCompare("Solved")?"success":0===n.localeCompare("Partially Solved")?"warning":0===n.localeCompare("Wrong")?"error":"warning"}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(st.$),i.\u0275\u0275directiveInject(et.F0),i.\u0275\u0275directiveInject(et.gz),i.\u0275\u0275directiveInject($c.O),i.\u0275\u0275directiveInject(Bs),i.\u0275\u0275directiveInject(vt.N))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["tuiButton","","size","m","appearance","primary",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(n,r){1&n&&i.\u0275\u0275template(0,Ad,6,7,"ng-container",0),2&n&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[O.O5,O.sg,ms.h,_u.Gi,Re.v0,et.yS],pipes:[O.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})();var qa=f(22307);const Id=["importDialog"];function Md(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-island",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275elementStart(2,"div",5)(3,"figure",6),i.\u0275\u0275element(4,"tui-svg",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",8),i.\u0275\u0275text(6,"Add Event"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("hoverable",!0))}function kd(t,e){1&t&&i.\u0275\u0275element(0,"tui-tag",20)}function Ld(t,e){1&t&&i.\u0275\u0275element(0,"tui-tag",21)}function Od(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade Not Yet Available "),i.\u0275\u0275elementContainerEnd())}function Rd(t,e){if(1&t&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&t){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,n.total_event_grade,"1.0-1"),"% ")}}const Nd=function(t,e){return["/course",t,"event",e]};function Dd(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",22),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Nd,r.courseId,n.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"Open":"Complete"," ")}}function qc(t,e){1&t&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&t&&i.\u0275\u0275property("disabled",!0)}const tf=function(t,e){return["/course",t,"new-event",e]};function ef(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"a",24),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,tf,r.courseId,n.id))}}function Fd(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",10),i.\u0275\u0275template(6,kd,1,0,"tui-tag",11),i.\u0275\u0275template(7,Ld,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"p",13),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"p",14),i.\u0275\u0275template(16,Od,2,0,"ng-container",15),i.\u0275\u0275template(17,Rd,2,4,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",17),i.\u0275\u0275template(20,Dd,3,5,"ng-container",15),i.\u0275\u0275template(21,qc,2,1,"ng-template",null,18,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,ef,2,4,"a",19),i.\u0275\u0275elementEnd()()),2&t){const n=e.$implicit,r=i.\u0275\u0275reference(8),o=i.\u0275\u0275reference(18),s=i.\u0275\u0275reference(22),c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(11,11,n.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(14,14,n.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",n.is_open&&n.is_exam)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",n.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",n.has_edit_permission)}}function Vd(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",29)(1,"p",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",30),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(n).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(s,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd()()}if(2&t){const n=e.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.name)}}const Bd=function(t){return["/course",t,"new-event"]};function nf(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",26)(2,"a",27),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",6),i.\u0275\u0275element(4,"tui-svg",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",8),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,Vd,7,2,"tui-island",28),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&t){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,Bd,n.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",n.courseEvents)}}function Hd(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,nf,8,5,"ng-container",1),i.\u0275\u0275elementStart(1,"button",25),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",n.courseEvents)}}let jd=(()=>{class t{constructor(n,r,o,s){this.authenticationService=n,this.courseEventService=r,this.dialogService=o,this.notificationsService=s}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(n=>this.user=n),this.courseEventService.getEventTypes().subscribe(n=>{this.eventTypes=n})}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(n=>{this.courseEvents=n}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(n,r){this.courseEventService.importCourseEvent(n,r).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(st.$),i.\u0275\u0275directiveInject(Bs),i.\u0275\u0275directiveInject(qa.RO),i.\u0275\u0275directiveInject(Qe.$F))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course-events-snippet"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Id,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.importDialog=o.first)}},inputs:{events:"events",course:"course"},decls:5,vars:2,consts:[[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["tuiButton","","appearance","primary","size","m","class","tui-form__button","aria-label","Edit",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["tuiButton","","appearance","primary","size","m",1,"tui-form__button",3,"routerLink"],["tuiButton","","appearance","primary","size","m","href","","aria-label","Complete",1,"tui-form__button",3,"disabled"],["tuiButton","","appearance","primary","size","m","aria-label","Edit",1,"tui-form__button",3,"routerLink"],["tuiButton","","type","button","size","m","aria-label","Cancel",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["tuiIsland","","size","s","textAlign","center",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["tuiButton","","appearance","primary","size","s","aria-label","Import",3,"click"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Md,7,1,"ng-container",1),i.\u0275\u0275template(2,Fd,24,17,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Hd,3,1,"ng-template",null,3,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.events))},directives:[O.O5,ms.h,Te.P,O.sg,_u.Gi,Re.v0,et.yS],pipes:[O.uU,O.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})(),rf=(()=>{class t{constructor(n,r){this.http=n,this.apiService=r}useTokens(n,r){const o=new Vs.WM({"Content-Type":"application/json"}),s=this.apiService.getURL("token-use","use",r);return this.http.post(s,n,{headers:o}).pipe((0,po.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275inject(Vs.eN),i.\u0275\u0275inject(Cu.s))},t.\u0275prov=i.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pl=f(43588);function Ud(t,e){1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function zd(t,e){1&t&&i.\u0275\u0275element(0,"tui-tag",17)}function to(t,e){1&t&&i.\u0275\u0275element(0,"tui-tag",18)}function Gd(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,zd,1,0,"tui-tag",15),i.\u0275\u0275template(2,to,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",n)}}function Wd(t,e){1&t&&i.\u0275\u0275element(0,"tui-tag",19)}const $d=function(){return{standalone:!0}};function of(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,Gd,4,2,"ng-container",11),i.\u0275\u0275template(5,Wd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(o){return i.\u0275\u0275restoreView(n).$implicit.num_used=o})("ngModelChange",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().calculateCurrentTotal()}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd()()}if(2&t){const n=e.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",n.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",n.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",n.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",n.num_used)("ngModelOptions",i.\u0275\u0275pureFunction0(10,$d))("min",0)("max",n.option.maximum_number_of_use)}}let Yd=(()=>{class t{constructor(n,r,o,s){this.tokenUseService=n,this.route=r,this.authenticationService=o,this.notificationsService=s,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const n in this.tokenUses)this.remainingTokens-=this.tokenUses[n].num_used*this.tokenUses[n].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const n=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(o=>r[o.option.id]=o.num_used),this.tokenUseService.useTokens(r,n).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(rf),i.\u0275\u0275directiveInject(et.gz),i.\u0275\u0275directiveInject(st.$),i.\u0275\u0275directiveInject(Qe.$F))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["tuiButton","","appearance","primary","size","m","type","submit","aria-label","Confirm Changes",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","ngModelOptions","min","max","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(n,r){1&n&&(i.\u0275\u0275template(0,Ud,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"form",3)(7,"div",4),i.\u0275\u0275template(8,of,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6)(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd()()()),2&n&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[O.O5,fn.Ls,nt.\u0275NgNoValidate,nt.NgControlStatusGroup,nt.NgForm,O.sg,ms.h,_u.Gi,Pl.EA,Pl.aQ,nt.NgControlStatus,nt.NgModel,Re.v0],pipes:[O.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})();var af=f(76508),go=f(78697);function Xd(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd()()),2&t){const n=e.$implicit,r=e.index,o=i.\u0275\u0275reference(4),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("order",r%2*-r)("margin-top",r+"rem"),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",o.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("text",n.name||"Anonymous User")("rounded",!0)("autoColor",!0),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(s.getGetOrdinal(n.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.token?n.token+" Tokens":"No Tokens"," ")}}function Al(t,e){1&t&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function Kd(t,e){1&t&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function Jd(t,e){1&t&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function Qd(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(n.rank)," ")}}function Zd(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"td",21)(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&t){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("text",n.name||"Anonymous User")("rounded",!0)("autoColor",!0),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.name||"Anonymous User"," ")}}function qd(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.token||"No Tokens"," ")}}function th(t,e){1&t&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,Qd,2,1,"td",20),i.\u0275\u0275template(2,Zd,4,4,"td",20),i.\u0275\u0275template(3,qd,2,1,"td",20),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function eh(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275template(2,Xd,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),i.\u0275\u0275template(7,Al,2,0,"th",7),i.\u0275\u0275template(8,Kd,2,0,"th",7),i.\u0275\u0275template(9,Jd,2,0,"th",7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,th,4,3,"tr",9),i.\u0275\u0275elementEnd()()()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,n.leaderBoard,n.filterInTopX,n.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",n.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,n.leaderBoard,n.filterOutTopX,n.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",n.leaderBoard)}}let nh=(()=>{class t{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(n,r)=>n.rank>r,this.filterInTopX=(n,r)=>n.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(n){return n.sort((o,s)=>s.token-o.token).map((o,s)=>({rank:s+1,name:o.name,token:o.token}))}getGetOrdinal(n){const r=["th","st","nd","rd"],o=n%100;return n+(r[(o-20)%10]||r[o]||r[0])}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["textAlign","center","class","top-x-island",3,"order","marginTop",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"text","rounded","autoColor"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"text","rounded","autoColor"]],template:function(n,r){1&n&&i.\u0275\u0275template(0,eh,13,15,"div",0),2&n&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[O.O5,O.sg,ms.h,af.JP,go.c4,go.Nx,go.EE,go.DZ,go.Ws,go.jY,go.LU,go.fu,go.Bl,go.Kt],pipes:[Ft.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),t})();function rh(t,e){1&t&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Concepts"),i.\u0275\u0275elementEnd())}function ih(t,e){1&t&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function oh(t,e){1&t&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function ah(t,e){1&t&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function sh(t,e){1&t&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function uh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",18),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",n.course)}}function lh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",19),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==n.course?null:n.course.question_set)("uqjs",null==n.course?null:n.course.uqjs)}}function ch(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",20),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("events",null==n.course?null:n.course.events)("course",n.course)}}function fh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",21),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==n.course?null:n.course.course_reg)}}function dh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",22),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==n.course?null:n.course.leader_board)("rankTopX",3)}}function hh(t,e){1&t&&i.\u0275\u0275element(0,"tui-svg",23)}let ph=(()=>{class t{constructor(n,r,o){this.authenticationService=n,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(n=>{this.course=n})}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(st.$),i.\u0275\u0275directiveInject(vt.N),i.\u0275\u0275directiveInject(et.gz))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course"]],decls:20,vars:15,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-space_bottom-10"],["tuiLink","","rel","noopener noreferrer","target","_blank",3,"href"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["tuiTab","","aria-label","Concepts",4,"tuiTab"],["tuiTab","","aria-label","Questions",4,"tuiTab"],["tuiTab","","aria-label","Events",4,"tuiTab"],["tuiTab","","aria-label","Token Use",4,"tuiTab"],["tuiTab","","aria-label","Leaderboard",4,"tuiTab"],[4,"ngIf"],["more",""],["tuiTab","","aria-label","Concepts"],["tuiTab","","aria-label","Questions"],["tuiTab","","aria-label","Events"],["tuiTab","","aria-label","Token Use"],["tuiTab","","aria-label","Leaderboard"],[3,"currCourse"],[3,"questions","uqjs"],[3,"events","course"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",2)(4,"a",3),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"tui-tabs-with-more",4,5),i.\u0275\u0275template(8,rh,2,0,"button",6),i.\u0275\u0275template(9,ih,2,0,"button",7),i.\u0275\u0275template(10,oh,2,0,"button",8),i.\u0275\u0275template(11,ah,2,0,"button",9),i.\u0275\u0275template(12,sh,2,0,"button",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,uh,2,1,"ng-container",11),i.\u0275\u0275template(14,lh,2,2,"ng-container",11),i.\u0275\u0275template(15,ch,2,2,"ng-container",11),i.\u0275\u0275template(16,fh,2,1,"ng-container",11),i.\u0275\u0275template(17,dh,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(18,hh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(7),s=i.\u0275\u0275reference(19);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275property("href",null==r.course?null:r.course.url,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.url," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",s),i.\u0275\u0275advance(7),i.\u0275\u0275property("ngIf",0===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===o.activeItemIndex)}},directives:[Ur.V,Si.WN,Si.tl,Si.yu,O.O5,Wc,Zc,jd,Yd,nh,Te.P],styles:[""]}),t})();var le=f(68858);let Su=(()=>{class t{static createForm(){return(new nt.FormBuilder).group({name:new nt.FormControl(null,[nt.Validators.required]),type:new nt.FormControl("",[nt.Validators.required]),countForTokens:new nt.FormControl(!1,[nt.Validators.required]),startEndDatePicker:new nt.FormControl(new le.VR(le.TU.currentLocal(),le.TU.currentLocal().append({day:7})),[nt.Validators.required]),startTimePicker:new nt.FormControl(le.qD.currentLocal(),[nt.Validators.required]),endTimePicker:new nt.FormControl(le.qD.currentLocal(),[nt.Validators.required])},{validator:t.dateValidator})}static createFormWithData(n){return(new nt.FormBuilder).group({name:new nt.FormControl(n.name,[nt.Validators.required]),type:new nt.FormControl(n.type,[nt.Validators.required]),countForTokens:new nt.FormControl(n.count_for_tokens,[nt.Validators.required]),startEndDatePicker:new nt.FormControl(new le.VR(le.TU.fromLocalNativeDate(new Date(n.start_date)),le.TU.fromLocalNativeDate(new Date(n.end_date))),[nt.Validators.required]),startTimePicker:new nt.FormControl(le.qD.fromLocalNativeDate(new Date(n.start_date)),[nt.Validators.required]),endTimePicker:new nt.FormControl(le.qD.fromLocalNativeDate(new Date(n.end_date)),[nt.Validators.required])},{validator:t.dateValidator})}static formatFormData(n,r,o){return{id:o,name:n.get("name").value,type:n.get("type").value,count_for_tokens:n.get("countForTokens").value,start_date:this.dateAndTimeToLocal(n.get("startEndDatePicker").value.from,n.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(n.get("startEndDatePicker").value.to,n.get("endTimePicker").value),course:r}}static dateAndTimeToLocal(n,r){return new Date(n.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return t.dateValidator=e=>{const n=e.get("startEndDatePicker").value,r=e.get("startTimePicker").value,o=e.get("endTimePicker").value;return!n.from||!n.to||n.isSingleDay&&o.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},t})();var gh=f(21086),Tu=f(24850);function sf(t,e){return t?(0,mr.Gx)(t).pipe((0,Tu.U)(n=>e?e.fromControlValue(n):n)):(0,gh.of)(null)}var ts=f(3174),Eu=f(13774),ys=f(35302),ko=f(35137),Il=f(295),Ma=f(40022),Wn=f(39193),uf=f(52164),Ci=f(61895),lf=f(70589),ka=f(45261),La=f(15411);const cf={mask:()=>!1},Ml=(t,e,n,r)=>{if(!e||!e.isSingleDay||!n)return t;const o=e.from.append(n,r).append({day:1},!r);return r?o.dayBefore(t)?t:o:t&&o.dayAfter(t)?t:o},kl={HH:23,MM:59,SS:59,MS:999};var ur=f(72997),xs=f(85113);function js(t,{value:e,min:n,max:r,dateFormat:o,dateSeparator:s}){return e&&e.toString(o,s)===t?t:le.TU.normalizeParse(t,o).dayLimit(n,r).toString(o,s)}function yh(t){return e=>e.length!==le.ek?{value:e}:{value:js(e,t)}}function Pu(t,e){return le.TU.normalizeParse(t.slice(0,le.ek),e.dateFormat).dayLimit(e.min,e.max)}function xh(t,e){const{dateFormat:n,dateSeparator:r}=e;switch(t.length){case le.ek:return Pu(t,e).toString(n,r);case le.ek+le.mH.length:return Pu(t,e).toString(n,r)+le.mH;case le.FZ:return e.value&&e.value.toString(n,r)===t?t:le.VR.sort(Pu(t.slice(0,le.ek),e),Pu(t.slice(le.ek+le.mH.length),e)).toString(n,r);default:return t}}function bh(t){return e=>({value:xh(e,t)})}function df(t="HH:MM",e={}){const n=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},kl),e);return o=>{const s=[],c=o.split("");return n.forEach(m=>{const S=t.indexOf(m),A=parseInt(String(r[m]).substr(0,1),10);parseInt(c[S],10)>A&&(c[S+1]=c[S],c[S]="0",s.push(S))}),!n.some(m=>parseInt(o.substr(t.indexOf(m),2),10)>r[m])&&{value:c.join(""),indexesOfPipedChars:s}}}const Au=Array(2).fill(Wn.hW),hf=Array(4).fill(Wn.hW);function pf(t,e){return"YMD"===(xs.z.assert(1===e.length,"Separator should consist of only 1 symbol"),t)?[...hf,e,...Au,e,...Au]:[...Au,e,...Au,e,...hf]}function Ch(t,e){xs.z.assert(1===e.length,"Separator should consist of only 1 symbol");const n=pf(t,e);return[...n,Cn.f$,Cn.F,Cn.f$,...n]}function Iu(t,e){const{length:n}=String(t),r=Array(n).fill(Wn.hW);return e&&r.unshift(e),r}function Mu(t,e={}){const{HH:n,MM:r,SS:o,MS:s}=Object.assign(Object.assign({},kl),e);return[...Iu(n),...Iu(r,":"),...t.includes("HH:MM:SS")?Iu(o,":"):[],..."HH:MM:SS.MSS"===t?Iu(s,"."):[]]}var Us=f(35628),zs=f(7625),ku=f(6083),Lo=f(93030),es=f(26171),$e=f(24710),Gs=f(53256),Ws=f(2141),Lu=f(66695);let wh=(()=>{let t=class{constructor(n){this.tuiColor="",this.tuiBackground="",n.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ie.gH))},t.\u0275dir=i.\u0275\u0275defineDirective({type:t,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(n,r){2&n&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,$e.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,Et.TH)()],t.prototype,"tuiColor",void 0),(0,$e.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,Et.TH)()],t.prototype,"tuiBackground",void 0),t=(0,$e.gn)([(0,$e.fM)(0,(0,i.Inject)(ie.gH))],t),t})(),Ou=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({}),t})();var bs=f(46579);const Th=({month:t,rowIndex:e,colIndex:n,firstDayOfWeek:r})=>{xs.z.assert(Number.isInteger(e)),xs.z.assert((0,bs.Z2)(e,0,6)),xs.z.assert(Number.isInteger(n)),xs.z.assert((0,bs.Z2)(n,0,le.NA));let o=e*le.NA+n-((t,e)=>{const n=new Date(t.year,t.month,1).getDay();return n>=e?n-e:le.NA-(e-n)})(t,r)+1;return o>t.daysCount&&(o-=t.daysCount,t=t.append({month:1})),o<=0&&(o=(t=t.append({month:-1})).daysCount+o),new le.TU(t.year,t.month,o)};let gf=(()=>{let t=class{constructor(n){this.firstDayOfWeek=n,this.currentMonth=null,this.currentSheet=[]}transform(n,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(n))return this.currentSheet;const o=[];for(let s=0;s<6;s++){const c=[];for(let v=0;v<le.NA;v++){const m=Th({month:n,rowIndex:s,colIndex:v,firstDayOfWeek:this.firstDayOfWeek}),A=(b,G=n)=>b.year>G.year||b.month>G.month;if(!((b,G=n)=>b.year<G.year||b.month<G.month)(m)||r){if(A(m)&&!r)break;c.push(m)}}o.push(c)}return this.currentSheet=o.filter(s=>s.length),this.currentMonth=n,this.currentSheet}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ka.Sy,16))},t.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:t,pure:!0}),t=(0,$e.gn)([(0,$e.fM)(0,(0,i.Inject)(ka.Sy))],t),t})(),Eh=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({}),t})();function Ph(t,e){1&t&&i.\u0275\u0275element(0,"div",3),2&t&&i.\u0275\u0275property("innerText",e.$implicit)}function Ah(t,e){if(1&t&&i.\u0275\u0275element(0,"div",12),2&t){const n=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",n[1])}}function Ih(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,Ah,1,1,"div",13),i.\u0275\u0275elementEnd()),2&t){const n=e.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.length>1)}}function Mh(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(o){i.\u0275\u0275restoreView(n);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(o&&s)})("tuiPressedChange",function(o){i.\u0275\u0275restoreView(n);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(o&&s)})("click",function(){i.\u0275\u0275restoreView(n);const o=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(o)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Ih,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd()()}if(2&t){const n=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",n.isWeekend)("t-cell_today",r.itemIsToday(n))("t-cell_interval",r.itemIsInterval(n)),i.\u0275\u0275attribute("data-range",r.getItemRange(n))("data-state",r.getItemState(n)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(n)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,n,r.toMarkers,r.itemIsToday(n),!!r.getItemRange(n)))}}function kh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Mh,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&t){const n=e.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(n)||r.showAdjacent)}}function Lh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,kh,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&t){const n=e.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o[r][n])}}function Oh(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,Lh,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[n].length)}}function Rh(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Oh,2,1,"div",4),i.\u0275\u0275elementEnd()),2&t){const n=e.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",n.length)}}let Nh=(()=>{let t=class{constructor(n){this.weekDays$=n,this.pressedItem=null,this.today=le.TU.currentLocal(),this.month=le.ql.currentLocal(),this.disabledItemHandler=Cn.Iy,this.markerHandler=Wn.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,o,s)=>{if(o||s)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof le.TU||this.value.isSingleDay)}getItemState(n){const{disabledItemHandler:r,pressedItem:o,hoveredItem:s}=this;return r(n)?"disabled":o&&o.daySame(n)?"pressed":s&&s.daySame(n)?"hovered":null}getItemRange(n){const{value:r,hoveredItem:o}=this;return r?r instanceof le.TU?r.daySame(n)?"single":null:r.from.daySame(n)&&!r.isSingleDay||o&&o.dayAfter(r.from)&&r.from.daySame(n)&&r.isSingleDay||o&&o.daySame(n)&&o.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(n)&&!r.isSingleDay||o&&o.dayBefore(r.from)&&r.from.daySame(n)&&r.isSingleDay||o&&o.daySame(n)&&o.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(n)?"single":null:null}itemIsToday(n){return this.today.daySame(n)}itemIsUnavailable(n){return!this.month.monthSame(n)}itemIsInterval(n){const{value:r,hoveredItem:o}=this;if(null===r||r instanceof le.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(n)&&r.to.dayAfter(n);if(null===o)return!1;const s=le.VR.sort(r.from,o);return s.from.daySameOrBefore(n)&&s.to.dayAfter(n)}onItemHovered(n){this.updateHoveredItem(n||null)}onItemPressed(n){this.pressedItem=n||null}onItemClick(n){this.dayClick.emit(n)}updateHoveredItem(n){(0,Bn.Hm)(this.hoveredItem,n,(r,o)=>r.daySame(o))||(this.hoveredItem=n,this.hoveredItemChange.emit(n))}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ka.lQ))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(n,r){2&n&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Ph,1,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Rh,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[O.sg,Ma.Ls,Gs.Xj,O.O5,Ws.c,Lu.n,wh],pipes:[O.Ov,gf,Lo.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"month",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"markerHandler",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"value",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"hoveredItem",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"showAdjacent",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"hoveredItemChange",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"dayClick",void 0),(0,$e.gn)([(0,i.HostBinding)("class._single")],t.prototype,"isSingle",null),t=(0,$e.gn)([(0,$e.fM)(0,(0,i.Inject)(ka.lQ))],t),t})(),Dh=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Ma.WD,Lo.I,Gs.Ih,Ws.V,Lu.f,Ou,Eh]]}),t})();var vf=f(43360);function vo(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(o){const c=i.\u0275\u0275restoreView(n).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=i.\u0275\u0275restoreView(n).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const s=i.\u0275\u0275restoreView(n).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(s)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&t){const n=e.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(n))("t-cell_interval",r.itemIsInterval(n)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(n)),i.\u0275\u0275attribute("data-range",r.getItemRange(n))("data-state",r.getItemState(n)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n)}}function Fh(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,vo,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&t){const n=e.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o.getItem(r,n))}}function Vh(t,e){1&t&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Fh,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Bh=(()=>{let t=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=le.ql.currentLocal().year,this.value=null,this.initialItem=le.ql.currentLocal(),this.min=le.K1,this.max=le.Oy,this.disabledItemHandler=Cn.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:n}=this;return!!n&&this.isRange(n)&&n.from.yearSame(n.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const n=this.initialItem.year-100;return this.min.year>n?this.min.year:n}get calculatedMax(){const n=this.initialItem.year+100;return this.max.year<n?this.max.year+1:n}isRange(n){return n instanceof le.dt}scrollItemIntoView(n){return this.initialItem.year===n}getItem(n,r){return 4*n+r+this.calculatedMin}getItemState(n){const{disabledItemHandler:r,max:o,pressedItem:s,hoveredItem:c}=this;return o.year<n||r!==Cn.Iy&&r(n)?"disabled":s===n?"pressed":c===n?"hovered":null}getItemRange(n){const{value:r,hoveredItem:o}=this;return null===r?null:r instanceof le.F4?r.year===n?"single":null:r.from.year===n&&!r.from.yearSame(r.to)||null!==o&&o>r.from.year&&r.from.year===n&&r.from.yearSame(r.to)||null!==o&&o===n&&o<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===n&&!r.from.yearSame(r.to)||null!==o&&o<r.from.year&&r.from.year===n&&r.from.yearSame(r.to)||null!==o&&o===n&&o>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===n?"single":null}itemIsToday(n){return this.currentYear===n}itemIsInterval(n){const{value:r,hoveredItem:o}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==o&&r.from.year!==o&&(0,bs.Z2)(n,Math.min(r.from.year,o),Math.max(r.from.year,o)):r.from.year<=n&&r.to.year>n)}onItemHovered(n,r){this.updateHoveredItem(n,r)}onItemPressed(n,r){this.updatePressedItem(n,r)}onItemClick(n){this.yearClick.emit(new le.F4(n))}updateHoveredItem(n,r){this.hoveredItem=n?r:null}updatePressedItem(n,r){this.pressedItem=n?r:null}};return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(n,r){2&n&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(n,r){1&n&&i.\u0275\u0275template(0,Vh,2,1,"div",0),2&n&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[Gs.Xj,Ma.Ls,vf.M,Ws.c,Lu.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"value",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"initialItem",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"yearClick",void 0),(0,$e.gn)([(0,i.HostBinding)("class._single")],t.prototype,"isSingle",null),t})(),Ai=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[Ws.V,Lu.f,Gs.Ih,Ma.WD,vf.e]]}),t})();var gr=f(61279),Ru=f(33703),na=f(37940),mf=f(3054);const Hh=["wrapper"];function jh(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd()()}if(2&t){const n=e.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",n[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",n[1])("focusable",!1)}}const Uh=["*"];let zh=(()=>{let t=class extends ys.Xn{constructor(n){super(),this.spinTexts$=n,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,Ut.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(n){this.updateFocused(n)}onFocusVisible(n){this.updateFocusVisible(n)}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ka.U4))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-spin-button"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Hh,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Uh,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(n,r){1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,jh,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&n&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[O.O5,es.A,Ru.t,mf.U,na.q,Re.v0],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,$e.gn)([(0,i.ViewChild)("wrapper")],t.prototype,"wrapper",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabled",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"mode",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"leftDisabled",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"rightDisabled",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"leftClick",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"rightClick",void 0),t=(0,$e.gn)([(0,$e.fM)(0,(0,i.Inject)(ka.U4))],t),t})(),Ol=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,na.c,mf.F,Ru.u,es.Z,Re.fN]]}),t})();var yf=f(5767);function ra(t,e){if(1&t&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.value.formattedYear," ")}}function xf(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.value.formattedYear," ")}}let Nu=(()=>{let t=class{constructor(){this.value=le.ql.currentLocal(),this.min=le.K1,this.max=le.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(n){const r=this.value.append(n);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(n){this.value.monthSame(n)||(this.value=n,this.valueChange.emit(n))}};return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,ra,2,1,"ng-container",1),i.\u0275\u0275template(5,xf,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",o)}},directives:[zh,O.O5,Ur.V,Ru.t],pipes:[O.Ov,yf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"value",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"valueChange",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"yearClick",void 0),t})(),vr=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Ru.u,Ol,Ur.j,yf.g]]}),t})();function br(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPickerYearClick(o)}),i.\u0275\u0275elementEnd()()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",n.min)("max",n.max)("initialItem",n.year)("value",n.value)}}function bf(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPaginationYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",n.computedMinViewedMonth)("max",n.computedMaxViewedMonth)("value",n.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",n.showAdjacent)("value",n.value)("month",n.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,n.disabledItemHandler,n.disabledItemHandlerMapper,n.min,n.max))("markerHandler",n.markerHandler)("hoveredItem",n.hoveredItem)}}let Rl=(()=>{let t=class{constructor(){this.month=le.ql.currentLocal(),this.value=null,this.disabledItemHandler=Cn.Iy,this.min=le.K1,this.max=le.Oy,this.minViewedMonth=le.K1,this.maxViewedMonth=le.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=Wn.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(n,r,o)=>s=>s.dayBefore(r)||s.dayAfter(o)||n(s)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(n){this.year=n}onPickerYearClick({year:n}){this.year=null,this.updateViewedMonth(new le.ql(n,this.month.month))}onPaginationValueChange(n){this.updateViewedMonth(n)}onDayClick(n){this.dayClick.emit(n)}onHoveredItemChange(n){this.updateHoveredDay(n)}updateViewedMonth(n){this.month.monthSame(n)||(this.month=n,this.monthChange.emit(n))}updateHoveredDay(n){(0,Bn.Hm)(this.hoveredItem,n,(r,o)=>r.daySame(o))||(this.hoveredItem=n,this.hoveredItemChange.emit(n))}};return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(n,r){if(1&n&&(i.\u0275\u0275template(0,br,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,bf,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",o)}},directives:[O.O5,gr.IB,Bh,Nu,Nh],pipes:[Lo.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"month",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"value",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"minViewedMonth",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"maxViewedMonth",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"hoveredItem",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"showAdjacent",void 0),(0,$e.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"markerHandler",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"dayClick",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"monthChange",void 0),(0,$e.gn)([(0,i.Output)()],t.prototype,"hoveredItemChange",void 0),t})(),$s=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,vr,Dh,Ai,gr.Jy,Lo.I]]}),t})();var Jr=f(56249);let Gh=(()=>{let t=class{constructor(n,r,o){this.disabledItemHandler=Cn.Iy,this.markerHandler=Wn.zE,this.defaultViewedMonthFirst=le.ql.currentLocal(),this.defaultViewedMonthSecond=le.ql.currentLocal().append({month:1}),this.min=le.K1,this.max=le.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(s,c)=>s.append({month:c}),n&&n.pipe((0,mr.YP)(r),(0,zs.R)(o)).subscribe(s=>{this.value=s,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(n){this.userViewedMonthFirst=n,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:n.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(n){this.userViewedMonthSecond=n,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:n.year-this.userViewedMonthFirst.year}))}onDayClick(n){this.dayClick.emit(n)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(n){return n.monthSameOrAfter(this.max)?this.max:n.monthBefore(this.min)?this.min.append({month:1}):n}updatedViewedMonthFirst(n){return n.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):n.monthSameOrBefore(this.min)?this.min:n}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ur.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ie.a3))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([ie.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionFirstViewedMonth(s)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionSecondViewedMonth(s)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&n&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[Rl],pipes:[Lo.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"markerHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"defaultViewedMonthFirst",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"defaultViewedMonthSecond",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"value",void 0),(0,zt.gn)([(0,i.Output)()],t.prototype,"dayClick",void 0),t=(0,zt.gn)([(0,zt.fM)(0,(0,i.Inject)(ur.cU)),(0,zt.fM)(0,(0,i.Optional)()),(0,zt.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,zt.fM)(2,(0,i.Inject)(ie.a3))],t),t})(),Wh=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[Lo.I,gr.Jy,$s]]}),t})();const Cf=function(t,e,n,r){return[t,e,n,r,!0]},Nl=function(t,e,n,r){return[t,e,n,r,!1]};function Ys(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",n.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,Cf,n.min,n.maxLengthMapper,n.value,n.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,Nl,n.max,n.maxLengthMapper,n.value,n.maxLength)))("defaultViewedMonthFirst",n.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,n.defaultViewedMonth,n.monthShiftMapper))("disabledItemHandler",n.calculatedDisabledItemHandler)("value",n.value)}}function Dl(t,e){1&t&&i.\u0275\u0275element(0,"tui-svg",9)}function $h(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const s=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("keydown.space.prevent",function(){const s=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("click",function(){const s=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,Dl,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&t){const n=e.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(n)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(n))}}const _f=function(t,e,n,r,o,s){return[t,e,n,r,o,s]};function Du(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,$h,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",n.value)("markerHandler",n.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,Cf,n.min,n.maxLengthMapper,n.value,n.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,Nl,n.max,n.maxLengthMapper,n.value,n.maxLength)))("month",n.computedMonth)("disabledItemHandler",n.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,_f,n.items,n.mapper,n.min,n.max,n.minLength,i.\u0275\u0275pipeBind1(7,26,n.otherDateText$))))}}let Gi=(()=>{let t=class{constructor(n,r,o,s){this.otherDateText$=s,this.defaultViewedMonth=le.ql.currentLocal(),this.disabledItemHandler=Cn.Iy,this.markerHandler=Wn.zE,this.items=[],this.min=le.K1,this.max=le.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=Ml,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,v,m,S,A)=>[...c.filter(b=>(null===S||b.range.from.append(S).daySameOrBefore(b.range.to))&&b.range.to.daySameOrAfter(v)&&(null===m||b.range.from.daySameOrBefore(m))),A],n&&n.pipe((0,mr.YP)(r),(0,zs.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(n){const{activePeriod:r}=this;return"string"==typeof n&&null===r||r===n}onRangeChange(n){this.updateValue(n)}onDayClick(n){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(le.VR.sort(r.from,n)):this.value=new le.VR(n,n)}onItemSelect(n){"string"==typeof n?null!==this.activePeriod&&this.updateValue(null):this.updateValue(n.range.dayLimit(this.min,this.max))}updateValue(n){this.value=n,this.valueChange.emit(n),this.rangeChange.emit(n)}get activePeriod(){return this.items.find(n=>(0,Bn.Hm)(this.value,n.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(n,r,o){return s=>{if(!r||!r.isSingleDay||!o)return n(s);const c=r.from.append(o,!0).append({day:1}),v=r.from.append(o).append({day:-1});return c.dayBefore(s)&&v.dayAfter(s)||n(s)}}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(ur.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ie.a3),i.\u0275\u0275directiveInject(ur.q5))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([ie.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(n,r){if(1&n&&(i.\u0275\u0275template(0,Ys,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,Du,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&n){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",o)}},directives:[O.O5,Gh,es.A,Rl,Jr.qi,O.sg,Jr.vK,Te.P],pipes:[Lo.c,O.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"defaultViewedMonth",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"markerHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"items",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"minLength",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"maxLength",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"value",void 0),(0,zt.gn)([(0,i.Output)()],t.prototype,"valueChange",void 0),(0,zt.gn)([(0,i.Output)()],t.prototype,"rangeChange",void 0),(0,zt.gn)([Et.UM],t.prototype,"calculateDisabledItemHandler",null),t=(0,zt.gn)([(0,zt.fM)(0,(0,i.Inject)(ur.cU)),(0,zt.fM)(0,(0,i.Optional)()),(0,zt.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,zt.fM)(2,(0,i.Inject)(ie.a3)),(0,zt.fM)(3,(0,i.Inject)(ur.q5))],t),t})(),Cs=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,Lo.I,es.Z,$s,$s,Te.E,Jr.pc,Wh]]}),t})();var _s=f(38190);function Yh(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onPressed(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&t){const n=e.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(n))("readOnly",r.readOnly)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Xh(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function Kh(t,e){if(1&t&&i.\u0275\u0275element(0,"tui-svg",7),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function Jh(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRangeChange(o)}),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",n.defaultViewedMonth)("disabledItemHandler",n.disabledItemHandler)("items",n.items)("min",n.min)("max",n.max)("markerHandler",n.markerHandler)("minLength",n.minLength)("maxLength",n.maxLength)("value",n.value)}}const wf=["*",[["input"]]],ia=["*","input"],Sf=[{provide:ys.M$,useExisting:(0,i.forwardRef)(()=>Ii)},{provide:ko.KZ,useExisting:(0,i.forwardRef)(()=>Ii)},{provide:ur.cU,deps:[[new i.Optional,new i.Self,nt.NgControl],[new i.Optional,(0,i.forwardRef)(()=>ur.LD)]],useFactory:(t,e)=>sf(t,e)},ku.Sm];let Ii=(()=>{let t=class extends ys.F9{constructor(n,r,o,s,c,v,m,S,A,b,G,tt){super(n,r,tt),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=m,this.textfieldExampleText=S,this.dateFormat=A,this.dateSeparator=b,this.dateTexts$=G,this.valueTransformer=tt,this.textMaskOptions={mask:Ch(this.dateFormat,this.dateSeparator),pipe:bh(this),guide:!1},this.disabledItemHandler=Cn.Iy,this.markerHandler=Wn.zE,this.defaultViewedMonth=le.ql.currentLocal(),this.items=[],this.min=le.K1,this.max=le.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=Ml,this.dateFiller$=this.dateTexts$.pipe((0,Tu.U)(ot=>(0,le.Yl)(ot[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,uf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?cf:this.textMaskOptions}get activePeriod(){return this.items.find(n=>(0,Bn.Hm)(this.value,n.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:n,nativeValue:r,activePeriod:o}=this;return o?String(o):n?n.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(n){return this.activePeriod?"":this.getDateRangeFiller(n)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new Us.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,zs.R)(this.destroy$)).subscribe(n=>{this.updateValue(n)}):this.toggle()}onOpenChange(n){this.open=n}onValueChange(n){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),n||this.onOpenChange(!0),n.length!==le.FZ)return void this.updateValue(null);const r=le.VR.normalizeParse(n,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(n){this.toggle(),this.focusInput(),n||(this.nativeValue=""),(0,Bn.Hm)(this.value,n,(r,o)=>r.daySame(o))||this.updateValue(n)}onItemSelect(n){this.toggle(),this.focusInput(),"string"==typeof n?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(n.range.dayLimit(this.min,this.max))}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}onActiveZone(n){this.updateFocused(n),!n&&!this.itemSelected&&(this.nativeValue.length===le.ek||this.nativeValue.length===le.ek+le.mH.length)&&this.updateValue(le.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(n=>String(n)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(n=!1){this.nativeFocusableElement&&(0,Ut.NY)(this.nativeFocusableElement,!0,n)}clampValue(n){const r=this.minLength&&n.from.append(this.minLength).dayAfter(n.to)?new le.VR(n.from,n.from.append(this.minLength).append({day:-1})):n,o=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(o)?new le.VR(r.from,o):r}getDateRangeFiller(n){return`${n}${le.mH}${n}`}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(nt.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(ko.fL),i.\u0275\u0275directiveInject(qa.RO),i.\u0275\u0275directiveInject(ur.vk,8),i.\u0275\u0275directiveInject(yt.kI),i.\u0275\u0275directiveInject(yt.pX),i.\u0275\u0275directiveInject(le.P_),i.\u0275\u0275directiveInject(le.q_),i.\u0275\u0275directiveInject(ur.zf),i.\u0275\u0275directiveInject(ur.LD,8))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-input-date-range"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Ci.yc,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(Sf),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:ia,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(n,r){if(1&n&&(i.\u0275\u0275projectionDef(wf),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)})("tuiActiveZoneChange",function(s){return r.onActiveZone(s)}),i.\u0275\u0275template(1,Yh,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Xh,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Kh,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Jh,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[La.o1,Il.e,Ma.Ls,Ci.yc,Ci.B1,_s.n,yt.D9,yt._K,yn.hd,Te.P,Gi],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,zt.gn)([(0,i.ViewChild)(Ci.yc)],t.prototype,"textfield",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"markerHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"defaultViewedMonth",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"items",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"minLength",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"maxLength",void 0),(0,zt.gn)([(0,i.HostListener)("click")],t.prototype,"onClick",null),t=(0,zt.gn)([(0,zt.fM)(0,(0,i.Optional)()),(0,zt.fM)(0,(0,i.Self)()),(0,zt.fM)(0,(0,i.Inject)(nt.NgControl)),(0,zt.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,zt.fM)(2,(0,i.Inject)(i.Injector)),(0,zt.fM)(3,(0,i.Inject)(ko.fL)),(0,zt.fM)(4,(0,i.Inject)(qa.RO)),(0,zt.fM)(5,(0,i.Optional)()),(0,zt.fM)(5,(0,i.Inject)(ur.vk)),(0,zt.fM)(6,(0,i.Inject)(yt.kI)),(0,zt.fM)(7,(0,i.Inject)(yt.pX)),(0,zt.fM)(8,(0,i.Inject)(le.P_)),(0,zt.fM)(9,(0,i.Inject)(le.q_)),(0,zt.fM)(10,(0,i.Inject)(ur.zf)),(0,zt.fM)(11,(0,i.Optional)()),(0,zt.fM)(11,(0,i.Inject)(ur.LD))],t),t})();var Fl;let ws=Fl=class extends lf.dh{get value(){return this.host.computedValue}onValueChange(e){this.host.onValueChange(e)}process(e){e.inputMode="numeric"}};ws.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(ws)))(n||ws)}}(),ws.\u0275dir=i.\u0275\u0275defineDirective({type:ws,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:ka.S0,useExisting:(0,i.forwardRef)(()=>Fl)}]),i.\u0275\u0275InheritDefinitionFeature]});let Xn=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,yn.QA,Il.A,Ma.WD,Us.wq,Ci.KW,yt.cn,La.jh,Te.E,Cs,_s.S]]}),t})();var Qh=f(56498);function Tf(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(n).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(s)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&t){const n=e.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(n)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n," ")}}function Fu(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,Tf,2,3,"button",4),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.filtered)}}const Ef={icon:({$implicit:t})=>"s"===t?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:kl,itemSize:"m"},Vu=new i.InjectionToken("Default parameters for input time component",{factory:()=>Ef});var Vl;let Or=Vl=class extends ys.F9{constructor(e,n,r,o){super(e,n),this.timeTexts$=r,this.options=o,this.disabledItemHandler=Cn.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,Ut.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(e){!this.nativeFocusableElement||(this.nativeFocusableElement.value=e)}getFiller$(e){return this.timeTexts$.pipe((0,Tu.U)(n=>n[e]))}onClick(){this.open=!this.open}onValueChange(e){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const n=this.getMatch(e);if(void 0!==n)return void this.updateValue(n);if(e.length!==this.mode.length)return void this.updateValue(null);const r=le.qD.fromString(e);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(e){if(this.updateFocused(e),e||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const n=le.qD.fromString(this.nativeValue);this.updateValue(n),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(e){this.updateHovered(e)}onArrowUp(e){this.items.length||this.processArrow(e,1)}onArrowDown(e){this.items.length||this.processArrow(e,-1)}onMenuClick(e){this.focusInput(),this.updateValue(e)}onOpen(e){this.open=e}writeValue(e){super.writeValue(e),this.nativeValue=e?this.computedValue:""}calculateMask(e){return{mask:Mu(e,this.options.maxValues),pipe:df(e,this.options.maxValues),guide:!1}}filter(e,n,r){return e.filter(o=>o.toString(n).includes(r))}findNearestTimeFromItems(e){return this.items.reduce((n,r)=>Math.abs(r.toAbsoluteMilliseconds()-e.toAbsoluteMilliseconds())<Math.abs(n.toAbsoluteMilliseconds()-e.toAbsoluteMilliseconds())?r:n)}getMatch(e){return this.items.find(n=>(0,Cn.zy)(n,e))}close(){this.open=!1}processArrow(e,n){const{target:r}=e;if(this.readOnly||!(r instanceof HTMLInputElement))return;const o=r.selectionStart||0;this.shiftTime(this.calculateShift(o,n)),r.setSelectionRange(o,o),e.preventDefault()}calculateShift(e,n){return e<=2?{hours:n}:e<=5?{minutes:n}:e<=8?{seconds:n}:{ms:n}}shiftTime(e){if(null===this.value)return;const n=this.value.shift(e);this.nativeValue=n.toString(this.mode),this.updateValue(n)}focusInput(e=!1){this.nativeFocusableElement&&((0,Ut.NY)(this.nativeFocusableElement,!0,e),this.close())}};Or.\u0275fac=function(e){return new(e||Or)(i.\u0275\u0275directiveInject(nt.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ur.Yq),i.\u0275\u0275directiveInject(Vu))},Or.\u0275cmp=i.\u0275\u0275defineComponent({type:Or,selectors:[["tui-input-time"]],viewQuery:function(e,n){if(1&e&&i.\u0275\u0275viewQuery(Ci.yc,5),2&e){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(n.textfield=r.first)}},hostBindings:function(e,n){1&e&&i.\u0275\u0275listener("click",function(){return n.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:ko.KZ,useExisting:(0,i.forwardRef)(()=>Vl)},ku.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(e,n){if(1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(o){return n.onOpen(o)})("focusedChange",function(o){return n.onFocused(o)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(o){return n.onValueChange(o)})("hoveredChange",function(o){return n.onHovered(o)})("keydown.arrowUp",function(o){return n.onArrowUp(o)})("keydown.arrowDown",function(o){return n.onArrowDown(o)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,Fu,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&e){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",n.interactive&&!!n.filtered.length)("content",r)("open",n.interactive&&n.open&&!!n.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,n.getFiller$(n.mode)))("nativeId",n.nativeId)("pseudoFocused",n.innerPseudoFocused)("pseudoHovered",n.pseudoHovered)("pseudoPressed",n.pseudoPressed)("invalid",n.computedInvalid)("focusable",n.focusable)("disabled",n.disabled)("readOnly",n.readOnly)("textMask",n.textMaskOptions)("iconContent",n.icon)("value",n.computedValue)("postfix",n.postfix)}},directives:[La.o1,Ci.yc,Ci.B1,_s.n,yt.D9,yn.hd,Jr.qi,O.sg,Jr.vK],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),Or.ctorParameters=()=>[{type:nt.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[nt.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:Qh.y,decorators:[{type:i.Inject,args:[ur.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[Vu]}]}],(0,zt.gn)([(0,i.ViewChild)(Ci.yc)],Or.prototype,"textfield",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],Or.prototype,"disabledItemHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],Or.prototype,"items",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],Or.prototype,"itemSize",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],Or.prototype,"strict",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],Or.prototype,"mode",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],Or.prototype,"postfix",void 0),(0,zt.gn)([Et.UM],Or.prototype,"getFiller$",null),(0,zt.gn)([(0,i.HostListener)("click")],Or.prototype,"onClick",null),(0,zt.gn)([Et.UM],Or.prototype,"calculateMask",null),(0,zt.gn)([Et.UM],Or.prototype,"filter",null),Or=Vl=(0,zt.gn)([(0,zt.fM)(0,(0,i.Optional)()),(0,zt.fM)(0,(0,i.Self)()),(0,zt.fM)(0,(0,i.Inject)(nt.NgControl)),(0,zt.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,zt.fM)(2,(0,i.Inject)(ur.Yq)),(0,zt.fM)(3,(0,i.Inject)(Vu))],Or);let qh=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,yn.QA,Jr.pc,La.jh,Ci.KW,_s.S,yt.cn]]}),t})();function tp(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit;i.\u0275\u0275property("value",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n[1]," ")}}function ep(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,tp,2,2,"button",23),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.localEventTypes)}}function np(t,e){1&t&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const rp=function(t){return["/course",t]};let Pf=(()=>{class t{constructor(n,r,o,s){this.route=n,this.courseEventService=r,this.router=o,this.notificationsService=s,this.eventId=null,this.timeOptions=function vh(t=0,e=le.Ix,n=[0,30]){const r=[];for(let o=t;o<e;o++)for(let s=0;s<n.length;s++){const c=new le.qD(o,n[s]);r.push(c)}return r}()}ngOnInit(){this.formData=Su.createForm(),this.courseEventService.getEventTypes().subscribe(n=>this.localEventTypes=n),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(n=>{this.formData=Su.createFormWithData(n)}))}get form(){return this.formData.controls}submitEvent(n){const r=Su.formatFormData(n,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(et.gz),i.\u0275\u0275directiveInject(Bs),i.\u0275\u0275directiveInject(et.F0),i.\u0275\u0275directiveInject(Qe.$F))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name","aria-label","Event Name"],["formControlName","name"],["formControlName","type","aria-label","Event Type"],[4,"tuiDataList"],["formControlName","type"],["formControlName","countForTokens","aria-label","Counts for Tokens"],["formControlName","countForTokens"],["formControlName","startEndDatePicker","aria-label","Start and End Date"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["formControlName","startTimePicker","aria-label","Start Time",3,"items"],["formControlName","startTimePicker"],["formControlName","endTimePicker","aria-label","End Time",3,"items"],["formControlName","endTimePicker"],["status","error","class","tui-space_top-4",4,"ngIf"],[1,"tui-form__buttons"],["tuiButton","","appearance","primary","size","m","type","submit","aria-label","Submit",1,"tui-form__button",3,"disabled"],["tuiButton","","appearance","secondary","size","m","aria-label","Back",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(n,r){1&n&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,ep,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(30,np,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20)(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd()()()()),2&n&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,rp,r.courseId)))},directives:[nt.\u0275NgNoValidate,nt.NgControlStatusGroup,nt.FormGroupDirective,pt.K3,pt.wU,nt.NgControlStatus,nt.FormControlName,Ke.y,ts.uJ,ts.OI,Jr.gX,Jr.qi,O.sg,Jr.vK,Eu.p,Ii,ws,Or,O.O5,fn.Ls,Re.v0,et.yS],styles:[""]}),t})();var Xs=f(25775),ip=f(42654),Bl=f(7394);let op=(()=>{class t{constructor(n,r){this.http=n,this.apiService=r}getUserStat(n){const r=this.apiService.getURL("user-stats",n);return this.http.get(r).pipe((0,po.K)(this.apiService.handleError("Error occurred while getting user stats")))}getUserDifficultyStats(n){const r=this.apiService.getURL("user-stats","difficulty",n);return this.http.get(r).pipe((0,po.K)(this.apiService.handleError("Error occurred while getting user stats")))}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275inject(Vs.eN),i.\u0275\u0275inject(Cu.s))},t.\u0275prov=i.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ap=f(59796);class Af{static createForm(){return(new nt.FormBuilder).group({report:new nt.FormControl("",[nt.Validators.required]),report_details:new nt.FormControl("")})}static extractData(e){return e.value}}let Br=(()=>{class t{constructor(n,r){this.http=n,this.apiService=r}reportQuestion(n,r){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},r),{question:n})).pipe((0,po.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275inject(Vs.eN),i.\u0275\u0275inject(Cu.s))},t.\u0275prov=i.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _i=f(24417),If=f(26537);function sp(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit;i.\u0275\u0275property("value",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n[1]," ")}}function up(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,sp,2,2,"button",8),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.reportOptions)}}function Mf(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Reason "),i.\u0275\u0275template(5,up,2,1,"tui-data-list",4),i.\u0275\u0275element(6,"tui-field-error",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),i.\u0275\u0275text(9," Details "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"div",2)(11,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().submitReport()}),i.\u0275\u0275text(12," Submit Report "),i.\u0275\u0275elementEnd()()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",n.formGroup),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",n.reportOptions?i.\u0275\u0275pipeBind3(3,3,n.reportOptions,0,1):""),i.\u0275\u0275advance(9),i.\u0275\u0275property("disabled",n.formGroup.invalid)}}const lp=function(){return{label:"Report this question",size:"m"}};let cp=(()=>{class t{constructor(n,r){this.reportQuestionService=n,this.notificationsService=r,this.open=!1,this.openChange=new i.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}ngOnInit(){this.formGroup=Af.createForm()}get form(){return this.formGroup.controls}toggleDialog(n){this.open=n,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Af.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(Br),i.\u0275\u0275directiveInject(Qe.$F))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["tuiButton","","type","submit","size","m",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(n,r){1&n&&(i.\u0275\u0275template(0,Mf,13,7,"ng-template",0),i.\u0275\u0275listener("tuiDialogChange",function(s){return r.toggleDialog(s)})),2&n&&i.\u0275\u0275property("tuiDialogOptions",i.\u0275\u0275pureFunction0(2,lp))("tuiDialog",r.open)},directives:[qa.iu,nt.NgControlStatusGroup,nt.FormGroupDirective,ts.uJ,ts.OI,nt.NgControlStatus,nt.FormControlName,Jr.gX,Jr.qi,O.sg,Jr.vK,Ke.y,_i.Jl,_i.eQ,Re.v0],pipes:[If.J],styles:[""]}),t})();const Hl=function(t){return["../",t]};function kf(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"div",20)(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tui-svg",22),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!n.category)("tui-skeleton_text",!n.category),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(8,Hl,null==n.parentCategory?null:n.parentCategory.pk)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==n.parentCategory?null:n.parentCategory.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!n.category)}}function fp(t,e){1&t&&i.\u0275\u0275element(0,"tui-svg",30)}function dp(t,e){1&t&&i.\u0275\u0275element(0,"tui-svg",30)}function hp(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"a",26,27),i.\u0275\u0275text(2),i.\u0275\u0275template(3,dp,1,0,"tui-svg",28),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit,r=i.\u0275\u0275reference(1);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(4,Hl,n.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.category.full_name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive)}}function Lf(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-opt-group",25)(1,"a",26,27),i.\u0275\u0275text(3),i.\u0275\u0275template(4,fp,1,0,"tui-svg",28),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,hp,4,6,"a",29),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit,r=i.\u0275\u0275reference(2);i.\u0275\u0275property("label",n.category.name),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Hl,n.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" All\xa0",n.category.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.children)}}function Of(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-data-list",23),i.\u0275\u0275template(1,Lf,6,8,"tui-opt-group",24),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.nestedCategories)}}function pp(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"button",32),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&t){const n=e.$implicit;i.\u0275\u0275property("value",n[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n[1]," ")}}function gp(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,pp,2,2,"button",31),i.\u0275\u0275elementEnd()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.difficulties)}}function vp(t,e){if(1&t&&i.\u0275\u0275element(0,"app-problem-view",33),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",n.currentQuestionId)}}function mp(t,e){if(1&t&&(i.\u0275\u0275elementStart(0,"div",34),i.\u0275\u0275element(1,"tui-marker-icon",35),i.\u0275\u0275elementStart(2,"h1",36),i.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),i.\u0275\u0275elementEnd()()),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!n.category||!n.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!n.category||!n.uqjs)}}let Ss=(()=>{class t{constructor(n,r,o,s,c,v){this.route=n,this.uqjService=r,this.difficultyService=o,this.courseService=s,this.categoryService=c,this.userStatsService=v,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new ip.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(n=>{this.categories=n,this.nestedCategories=n.reduce((r,o)=>o.parent?r:[...r,{category:o,children:n.filter(s=>s.parent===o.pk).map(s=>({category:s,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var o,s;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=n.find(A=>this.categoryId===A.pk),this.parentCategory=n.find(A=>this.category.parent===A.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserDifficultyStats(this.categoryId),v=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),m=this.difficultyService.getDifficulties(),S=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,Sl.D)([v,m,c,S]).subscribe(([A,b,G,tt])=>{this.uqjs=rn.shuffle(A),this.difficulties=b,this.userDifficultyStats=G,this.categoryUserSuccessRate=tt.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(n,r){var o,s;this.difficulty=n,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=rn.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){const n=this.userDifficultyStats.find(r=>r.difficulty===this.difficulty);this.userSuccessRate=0!=this.userDifficultyStats.length?this.difficulty?n?n.avgSuccess:0:this.categoryUserSuccessRate:0}openReportQuestion(){this.reportQuestionModal=!0}}return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(et.gz),i.\u0275\u0275directiveInject($c.O),i.\u0275\u0275directiveInject(Bl.G),i.\u0275\u0275directiveInject(vt.N),i.\u0275\u0275directiveInject(Gc.H),i.\u0275\u0275directiveInject(op))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-practice-problem"]],decls:31,vars:38,consts:[[1,"practice"],["sidebarId","practiceSidebar","position","left","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"tuiTextfieldCleaner","valueContent","ngModel","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["tuiButton","","size","s","icon","tuiIconAttention",3,"click"],["tuiButton","","size","s","icon","tuiIconArrowLeft",3,"click"],["tuiButton","","size","s","iconRight","tuiIconArrowRight",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["tuiOption","","role","menuitemradio","routerLinkActive","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["tuiOption","","role","menuitemradio","routerLinkActive","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["src","tuiIconAlertCircleLarge","mode","error","size","s",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(n,r){if(1&n&&(i.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2),i.\u0275\u0275template(3,kf,4,10,"div",3),i.\u0275\u0275elementStart(4,"tui-hosted-dropdown",4)(5,"button",5),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,Of,2,1,"ng-template",null,6,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(9,"p",7),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",8),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-select",9),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(s,r.include_solved)}),i.\u0275\u0275pipe(14,"stringifyTuiDataList"),i.\u0275\u0275text(15," Choose a level of difficulty "),i.\u0275\u0275template(16,gp,2,1,"tui-data-list",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"tui-checkbox-labeled",11),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(r.difficulty,s)}),i.\u0275\u0275text(18," Include Solved "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(19,"div",12)(20,"button",13),i.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),i.\u0275\u0275text(21," Report "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(22,"button",14),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(23," Previous Question "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"button",15),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(25," Next Question "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(26,"div",16),i.\u0275\u0275template(27,vp,1,1,"app-problem-view",17),i.\u0275\u0275template(28,mp,4,4,"ng-template",null,18,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(30,"app-problem-report-modal",19),i.\u0275\u0275listener("openChange",function(s){return r.reportQuestionModal=s}),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(8),s=i.\u0275\u0275reference(29);let c;i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.parentCategory),i.\u0275\u0275advance(1),i.\u0275\u0275property("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(c=null==r.category?null:r.category.name)&&void 0!==c?c:"Category Name"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userDifficultyStats)("tui-skeleton_text",!r.category||!r.userDifficultyStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userDifficultyStats)("tui-skeleton_text",!r.category||!r.userDifficultyStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*(null==r.category?null:r.category.average_success)).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(14,34,r.difficulties,0,1):"")("ngModel",r.difficulty),i.\u0275\u0275advance(4),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.include_solved),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[ap.k,O.O5,Ur.V,et.yS,Te.P,La.o1,Jr.qi,O.sg,Jr.Rs,Jr.vK,et.Od,ts.uJ,ts.OI,yt.sz,yt.be,nt.NgControlStatus,nt.NgModel,Jr.gX,Eu.p,nt.DefaultValueAccessor,Re.v0,Xs.z,pn.B,cp],pipes:[If.J],styles:[".practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),t})();const yp=[{path:"",component:he,canActivate:[X.a]},{path:":courseId",component:ph,canActivate:[X.a]},{path:":courseId/register",component:sa,canActivate:[X.a]},{path:":courseId/new-event",component:Pf,canActivate:[X.a]},{path:":courseId/new-event/:eventId",component:Pf,canActivate:[X.a]},{path:":courseId/event/:eventId",component:Zc,canActivate:[X.a]},{path:":courseId/problem/:id",component:Xs.z,canActivate:[X.a]},{path:":courseId/event/:eventId/problem/:id",component:Xs.z,canActivate:[X.a]},{path:":courseId/practice/category/:categoryId",component:Ss,canActivate:[X.a]}];let xp=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[et.Bz.forChild(yp)],et.Bz]}),t})();var bp=f(16995);function Cp(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onFocused(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&t){const n=e.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(n))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function _p(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function Rf(t,e){if(1&t&&i.\u0275\u0275element(0,"tui-svg",8),2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!n.computedDisabled),i.\u0275\u0275property("src",n.calendarIcon)}}function Nf(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);const o=i.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&t){const n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",n.items[0]," ")}}function wp(t,e){if(1&t){const n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onMonthChange(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,Nf,3,1,"div",10)}if(2&t){const n=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",n.min)("max",n.max)("markerHandler",n.markerHandler)("disabledItemHandler",n.disabledItemHandler)("month",n.computedActiveYearMonth)("value",n.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===n.items.length)}}const Sp=["*",[["input"]]],Tp=["*","input"],Pp=[{provide:ko.KZ,useExisting:(0,i.forwardRef)(()=>Df)},{provide:ur.cU,deps:[[new i.Optional,new i.Self,nt.NgControl],[new i.Optional,ur.HF]],useFactory:(t,e)=>sf(t,e)},{provide:ys.M$,useExisting:(0,i.forwardRef)(()=>Df)},ku.Sm];let Df=(()=>{let t=class extends ys.F9{constructor(n,r,o,s,c,v,m,S,A,b,G){super(n,r,G),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=m,this.dateFormat=S,this.dateSeparator=A,this.dateTexts$=b,this.valueTransformer=G,this.month=null,this.textMaskOptions={mask:pf(this.dateFormat,this.dateSeparator),pipe:yh(this),guide:!1},this.min=le.K1,this.max=le.Oy,this.disabledItemHandler=Cn.Iy,this.markerHandler=Wn.zE,this.items=[],this.defaultActiveYearMonth=le.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,Tu.U)(tt=>(0,le.Yl)(tt[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,uf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:n,nativeValue:r,activeItem:o}=this;return o?String(o):n?n.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?cf:this.textMaskOptions}get activeItem(){const{value:n}=this;return n&&this.items.find(r=>r.day.daySame(n))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(n){return this.activeItem?"":n}onMobileClick(){this.mobileCalendar?this.dialogService.open(new Us.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,zs.R)(this.destroy$)).subscribe(n=>{this.updateValue(n)}):this.open=!this.open}onValueChange(n){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),n||this.onOpenChange(!0),this.updateValue(n.length!==le.ek?null:le.TU.normalizeParse(n,this.dateFormat))}onDayClick(n){this.updateValue(n),this.open=!1}onHovered(n){this.updateHovered(n)}onMonthChange(n){this.month=n}onOpenChange(n){this.open=n}onFocused(n){this.updateFocused(n)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}valueIdenticalComparator(n,r){return(0,Bn.Hm)(n,r,(o,s)=>o.daySame(s))}};return t.\u0275fac=function(n){return new(n||t)(i.\u0275\u0275directiveInject(nt.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(ko.fL),i.\u0275\u0275directiveInject(qa.RO),i.\u0275\u0275directiveInject(ur.vk,8),i.\u0275\u0275directiveInject(yt.kI),i.\u0275\u0275directiveInject(le.P_),i.\u0275\u0275directiveInject(le.q_),i.\u0275\u0275directiveInject(ur.zf),i.\u0275\u0275directiveInject(ur.HF,8))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["tui-input-date"]],viewQuery:function(n,r){if(1&n&&i.\u0275\u0275viewQuery(Ci.yc,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(n,r){1&n&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(Pp),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Tp,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(n,r){if(1&n&&(i.\u0275\u0275projectionDef(Sp),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)}),i.\u0275\u0275template(1,Cp,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,_p,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Rf,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,wp,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&n){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,5,r.filler$)),i.\u0275\u0275advance(6),i.\u0275\u0275property("polymorpheus",r.type)}},directives:[La.o1,Ma.Ls,Ci.yc,Ci.B1,_s.n,yt.D9,yn.hd,Te.P,Us.GL,Rl,es.A,O.O5,Ur.V],pipes:[O.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,zt.gn)([(0,i.ViewChild)(Ci.yc)],t.prototype,"textfield",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"min",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"max",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"disabledItemHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"markerHandler",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"items",void 0),(0,zt.gn)([(0,i.Input)(),(0,Et.TH)()],t.prototype,"defaultActiveYearMonth",void 0),(0,zt.gn)([(0,i.HostListener)("click")],t.prototype,"onClick",null),t=(0,zt.gn)([(0,zt.fM)(0,(0,i.Optional)()),(0,zt.fM)(0,(0,i.Self)()),(0,zt.fM)(0,(0,i.Inject)(nt.NgControl)),(0,zt.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,zt.fM)(2,(0,i.Inject)(i.Injector)),(0,zt.fM)(3,(0,i.Inject)(ko.fL)),(0,zt.fM)(4,(0,i.Inject)(qa.RO)),(0,zt.fM)(5,(0,i.Optional)()),(0,zt.fM)(5,(0,i.Inject)(ur.vk)),(0,zt.fM)(6,(0,i.Inject)(yt.kI)),(0,zt.fM)(7,(0,i.Inject)(le.P_)),(0,zt.fM)(8,(0,i.Inject)(le.q_)),(0,zt.fM)(9,(0,i.Inject)(ur.zf)),(0,zt.fM)(10,(0,i.Optional)()),(0,zt.fM)(10,(0,i.Inject)(ur.HF))],t),t})();var Ff;let Ks=Ff=class extends lf.dh{get value(){return this.host.computedValue}onValueChange(e){this.host.onValueChange(e)}process(e){e.inputMode="numeric"}};Ks.\u0275fac=function(){let t;return function(n){return(t||(t=i.\u0275\u0275getInheritedFactory(Ks)))(n||Ks)}}(),Ks.\u0275dir=i.\u0275\u0275defineDirective({type:Ks,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:ka.S0,useExisting:(0,i.forwardRef)(()=>Ff)}]),i.\u0275\u0275InheritDefinitionFeature]});let Ap=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[O.ez,yn.QA,Us.wq,es.Z,$s,Te.E,Ur.j,La.jh,Ci.KW,_s.S,Ma.WD,yt.cn]]}),t})();var Ip=f(96560),Mp=f(22079),kp=f(70228),Lp=f(38333),Op=f(66235),Rp=f(24736),Np=f(63821),Dp=f(68476),Fp=f(54554);let Vp=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({providers:[Bs,vt.N,rf],imports:[[O.ez,Op.J,xp,nt.FormsModule,bp._l,Rp.D,Np.ProblemsModule,nt.ReactiveFormsModule,Fp.l,yn.QA,Il.A,af.Jm,Re.fN,$s,Eu.s,Jr.pc,qa.up,Ip.S,Ke.C,Ft.p,La.jh,Pl.$H,Ap,Xn,pt.Qf,qh,ms.y,Ur.j,Mp.dS,pn.z,kp.z,fn.Hi,ts.Jy,Dp.T,xt,Te.E,go.jz,Si.$$,_u.d3,yt.cn,Lp.qE.forRoot()]]}),t})()},71066:(P,W,f)=>{var p,g,E;E="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,p=[f(29610),f(58259),W],void 0!==(g=function(k,M,B){E.Backbone=function(w,E,x,I){var k=w.Backbone,M=Array.prototype.slice;E.VERSION="1.4.1",E.$=I,E.noConflict=function(){return w.Backbone=k,this},E.emulateHTTP=!1,E.emulateJSON=!1;var O,B=E.Events={},H=/\s+/,X=function(D,z,rt,xt,$t){var xe,Qt=0;if(rt&&"object"==typeof rt)for((void 0!==xt&&"context"in $t&&void 0===$t.context&&($t.context=xt),xe=x.keys(rt));Qt<xe.length;Qt++)z=X(D,z,xe[Qt],rt[xe[Qt]],$t);else if(rt&&H.test(rt))for(xe=rt.split(H);Qt<xe.length;Qt++)z=D(z,xe[Qt],xt,$t);else z=D(z,rt,xt,$t);return z};B.on=function(D,z,rt){return this._events=X(et,this._events||{},D,z,{context:rt,ctx:this,listening:O}),O&&((this._listeners||(this._listeners={}))[O.id]=O,O.interop=!1),this},B.listenTo=function(D,z,rt){if(!D)return this;var xt=D._listenId||(D._listenId=x.uniqueId("l")),$t=this._listeningTo||(this._listeningTo={}),Qt=O=$t[xt];Qt||(this._listenId||(this._listenId=x.uniqueId("l")),Qt=O=$t[xt]=new nt(this,D));var xe=ct(D,z,rt,this);if(O=void 0,xe)throw xe;return Qt.interop&&Qt.on(z,rt),this};var et=function(D,z,rt,xt){if(rt){var $t=D[z]||(D[z]=[]),Qt=xt.context,xe=xt.ctx,Ne=xt.listening;Ne&&Ne.count++,$t.push({callback:rt,context:Qt,ctx:Qt||xe,listening:Ne})}return D},ct=function(D,z,rt,xt){try{D.on(z,rt,xt)}catch($t){return $t}};B.off=function(D,z,rt){return this._events?(this._events=X(i,this._events,D,z,{context:rt,listeners:this._listeners}),this):this},B.stopListening=function(D,z,rt){var xt=this._listeningTo;if(!xt)return this;for(var $t=D?[D._listenId]:x.keys(xt),Qt=0;Qt<$t.length;Qt++){var xe=xt[$t[Qt]];if(!xe)break;xe.obj.off(z,rt,this),xe.interop&&xe.off(z,rt)}return x.isEmpty(xt)&&(this._listeningTo=void 0),this};var i=function(D,z,rt,xt){if(D){var Ne,$t=xt.context,Qt=xt.listeners,xe=0;if(!z&&!$t&&!rt){for(Ne=x.keys(Qt);xe<Ne.length;xe++)Qt[Ne[xe]].cleanup();return}for(Ne=z?[z]:x.keys(D);xe<Ne.length;xe++){var Ke=D[z=Ne[xe]];if(!Ke)break;for(var pn=[],yn=0;yn<Ke.length;yn++){var gn=Ke[yn];if(rt&&rt!==gn.callback&&rt!==gn.callback._callback||$t&&$t!==gn.context)pn.push(gn);else{var ir=gn.listening;ir&&ir.off(z,rt)}}pn.length?D[z]=pn:delete D[z]}return D}};B.once=function(D,z,rt){var xt=X(st,{},D,z,this.off.bind(this));return"string"==typeof D&&null==rt&&(z=void 0),this.on(xt,z,rt)},B.listenToOnce=function(D,z,rt){var xt=X(st,{},z,rt,this.stopListening.bind(this,D));return this.listenTo(D,xt)};var st=function(D,z,rt,xt){if(rt){var $t=D[z]=x.once(function(){xt(z,$t),rt.apply(this,arguments)});$t._callback=rt}return D};B.trigger=function(D){if(!this._events)return this;for(var z=Math.max(0,arguments.length-1),rt=Array(z),xt=0;xt<z;xt++)rt[xt]=arguments[xt+1];return X(vt,this._events,D,void 0,rt),this};var vt=function(D,z,rt,xt){if(D){var $t=D[z],Qt=D.all;$t&&Qt&&(Qt=Qt.slice()),$t&&pt($t,xt),Qt&&pt(Qt,[z].concat(xt))}return D},pt=function(D,z){var rt,xt=-1,$t=D.length,Qt=z[0],xe=z[1],Ne=z[2];switch(z.length){case 0:for(;++xt<$t;)(rt=D[xt]).callback.call(rt.ctx);return;case 1:for(;++xt<$t;)(rt=D[xt]).callback.call(rt.ctx,Qt);return;case 2:for(;++xt<$t;)(rt=D[xt]).callback.call(rt.ctx,Qt,xe);return;case 3:for(;++xt<$t;)(rt=D[xt]).callback.call(rt.ctx,Qt,xe,Ne);return;default:for(;++xt<$t;)(rt=D[xt]).callback.apply(rt.ctx,z);return}},nt=function(D,z){this.id=D._listenId,this.listener=D,this.obj=z,this.interop=!0,this.count=0,this._events=void 0};nt.prototype.on=B.on,nt.prototype.off=function(D,z){var rt;this.interop?(this._events=X(i,this._events,D,z,{context:void 0,listeners:void 0}),rt=!this._events):(this.count--,rt=0===this.count),rt&&this.cleanup()},nt.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},B.bind=B.on,B.unbind=B.off,x.extend(E,B);var yt=E.Model=function(D,z){var rt=D||{};z||(z={}),this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},z.collection&&(this.collection=z.collection),z.parse&&(rt=this.parse(rt,z)||{});var xt=x.result(this,"defaults");rt=x.defaults(x.extend({},xt,rt),xt),this.set(rt,z),this.changed={},this.initialize.apply(this,arguments)};x.extend(yt.prototype,B,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(D){return x.clone(this.attributes)},sync:function(){return E.sync.apply(this,arguments)},get:function(D){return this.attributes[D]},escape:function(D){return x.escape(this.get(D))},has:function(D){return null!=this.get(D)},matches:function(D){return!!x.iteratee(D,this)(this.attributes)},set:function(D,z,rt){if(null==D)return this;var xt;if("object"==typeof D?(xt=D,rt=z):(xt={})[D]=z,rt||(rt={}),!this._validate(xt,rt))return!1;var $t=rt.unset,Qt=rt.silent,xe=[],Ne=this._changing;this._changing=!0,Ne||(this._previousAttributes=x.clone(this.attributes),this.changed={});var Ke=this.attributes,pn=this.changed,yn=this._previousAttributes;for(var gn in xt)x.isEqual(Ke[gn],z=xt[gn])||xe.push(gn),x.isEqual(yn[gn],z)?delete pn[gn]:pn[gn]=z,$t?delete Ke[gn]:Ke[gn]=z;if(this.idAttribute in xt){var ir=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,ir,rt)}if(!Qt){xe.length&&(this._pending=rt);for(var tr=0;tr<xe.length;tr++)this.trigger("change:"+xe[tr],this,Ke[xe[tr]],rt)}if(Ne)return this;if(!Qt)for(;this._pending;)rt=this._pending,this._pending=!1,this.trigger("change",this,rt);return this._pending=!1,this._changing=!1,this},unset:function(D,z){return this.set(D,void 0,x.extend({},z,{unset:!0}))},clear:function(D){var z={};for(var rt in this.attributes)z[rt]=void 0;return this.set(z,x.extend({},D,{unset:!0}))},hasChanged:function(D){return null==D?!x.isEmpty(this.changed):x.has(this.changed,D)},changedAttributes:function(D){if(!D)return!!this.hasChanged()&&x.clone(this.changed);var xt,z=this._changing?this._previousAttributes:this.attributes,rt={};for(var $t in D){var Qt=D[$t];x.isEqual(z[$t],Qt)||(rt[$t]=Qt,xt=!0)}return!!xt&&rt},previous:function(D){return null!=D&&this._previousAttributes?this._previousAttributes[D]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(D){D=x.extend({parse:!0},D);var z=this,rt=D.success;return D.success=function(xt){var $t=D.parse?z.parse(xt,D):xt;if(!z.set($t,D))return!1;rt&&rt.call(D.context,z,xt,D),z.trigger("sync",z,xt,D)},Ze(this,D),this.sync("read",this,D)},save:function(D,z,rt){var xt;null==D||"object"==typeof D?(xt=D,rt=z):(xt={})[D]=z;var $t=(rt=x.extend({validate:!0,parse:!0},rt)).wait;if(xt&&!$t){if(!this.set(xt,rt))return!1}else if(!this._validate(xt,rt))return!1;var Qt=this,xe=rt.success,Ne=this.attributes;rt.success=function(yn){Qt.attributes=Ne;var gn=rt.parse?Qt.parse(yn,rt):yn;if($t&&(gn=x.extend({},xt,gn)),gn&&!Qt.set(gn,rt))return!1;xe&&xe.call(rt.context,Qt,yn,rt),Qt.trigger("sync",Qt,yn,rt)},Ze(this,rt),xt&&$t&&(this.attributes=x.extend({},Ne,xt));var Ke=this.isNew()?"create":rt.patch?"patch":"update";"patch"===Ke&&!rt.attrs&&(rt.attrs=xt);var pn=this.sync(Ke,this,rt);return this.attributes=Ne,pn},destroy:function(D){D=D?x.clone(D):{};var z=this,rt=D.success,xt=D.wait,$t=function(){z.stopListening(),z.trigger("destroy",z,z.collection,D)};D.success=function(xe){xt&&$t(),rt&&rt.call(D.context,z,xe,D),z.isNew()||z.trigger("sync",z,xe,D)};var Qt=!1;return this.isNew()?x.defer(D.success):(Ze(this,D),Qt=this.sync("delete",this,D)),xt||$t(),Qt},url:function(){var D=x.result(this,"urlRoot")||x.result(this.collection,"url")||ln();if(this.isNew())return D;var z=this.get(this.idAttribute);return D.replace(/[^\/]$/,"$&/")+encodeURIComponent(z)},parse:function(D,z){return D},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(D){return this._validate({},x.extend({},D,{validate:!0}))},_validate:function(D,z){if(!z.validate||!this.validate)return!0;D=x.extend({},this.attributes,D);var rt=this.validationError=this.validate(D,z)||null;return!rt||(this.trigger("invalid",this,rt,x.extend(z,{validationError:rt})),!1)}});var Pt=E.Collection=function(D,z){z||(z={}),this.preinitialize.apply(this,arguments),z.model&&(this.model=z.model),void 0!==z.comparator&&(this.comparator=z.comparator),this._reset(),this.initialize.apply(this,arguments),D&&this.reset(D,x.extend({silent:!0},z))},Ft={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},jt=function(D,z,rt){rt=Math.min(Math.max(rt,0),D.length);var Qt,xt=Array(D.length-rt),$t=z.length;for(Qt=0;Qt<xt.length;Qt++)xt[Qt]=D[Qt+rt];for(Qt=0;Qt<$t;Qt++)D[Qt+rt]=z[Qt];for(Qt=0;Qt<xt.length;Qt++)D[Qt+$t+rt]=xt[Qt]};x.extend(Pt.prototype,B,{model:yt,preinitialize:function(){},initialize:function(){},toJSON:function(D){return this.map(function(z){return z.toJSON(D)})},sync:function(){return E.sync.apply(this,arguments)},add:function(D,z){return this.set(D,x.extend({merge:!1},z,C))},remove:function(D,z){z=x.extend({},z);var rt=!x.isArray(D);D=rt?[D]:D.slice();var xt=this._removeModels(D,z);return!z.silent&&xt.length&&(z.changes={added:[],merged:[],removed:xt},this.trigger("update",this,z)),rt?xt[0]:xt},set:function(D,z){if(null!=D){(z=x.extend({},Ft,z)).parse&&!this._isModel(D)&&(D=this.parse(D,z)||[]);var rt=!x.isArray(D);D=rt?[D]:D.slice();var xt=z.at;null!=xt&&(xt=+xt),xt>this.length&&(xt=this.length),xt<0&&(xt+=this.length+1);var zn,or,$t=[],Qt=[],xe=[],Ne=[],Ke={},pn=z.add,yn=z.merge,gn=z.remove,ir=!1,tr=this.comparator&&null==xt&&!1!==z.sort,ui=x.isString(this.comparator)?this.comparator:null;for(or=0;or<D.length;or++){var er=this.get(zn=D[or]);if(er){if(yn&&zn!==er){var lr=this._isModel(zn)?zn.attributes:zn;z.parse&&(lr=er.parse(lr,z)),er.set(lr,z),xe.push(er),tr&&!ir&&(ir=er.hasChanged(ui))}Ke[er.cid]||(Ke[er.cid]=!0,$t.push(er)),D[or]=er}else pn&&(zn=D[or]=this._prepareModel(zn,z))&&(Qt.push(zn),this._addReference(zn,z),Ke[zn.cid]=!0,$t.push(zn))}if(gn){for(or=0;or<this.length;or++)Ke[(zn=this.models[or]).cid]||Ne.push(zn);Ne.length&&this._removeModels(Ne,z)}var Mr=!1;if($t.length&&!tr&&pn&&gn?(Mr=this.length!==$t.length||x.some(this.models,function(Cr,yr){return Cr!==$t[yr]}),this.models.length=0,jt(this.models,$t,0),this.length=this.models.length):Qt.length&&(tr&&(ir=!0),jt(this.models,Qt,null==xt?this.length:xt),this.length=this.models.length),ir&&this.sort({silent:!0}),!z.silent){for(or=0;or<Qt.length;or++)null!=xt&&(z.index=xt+or),(zn=Qt[or]).trigger("add",zn,this,z);(ir||Mr)&&this.trigger("sort",this,z),(Qt.length||Ne.length||xe.length)&&(z.changes={added:Qt,removed:Ne,merged:xe},this.trigger("update",this,z))}return rt?D[0]:D}},reset:function(D,z){z=z?x.clone(z):{};for(var rt=0;rt<this.models.length;rt++)this._removeReference(this.models[rt],z);return z.previousModels=this.models,this._reset(),D=this.add(D,x.extend({silent:!0},z)),z.silent||this.trigger("reset",this,z),D},push:function(D,z){return this.add(D,x.extend({at:this.length},z))},pop:function(D){var z=this.at(this.length-1);return this.remove(z,D)},unshift:function(D,z){return this.add(D,x.extend({at:0},z))},shift:function(D){var z=this.at(0);return this.remove(z,D)},slice:function(){return M.apply(this.models,arguments)},get:function(D){if(null!=D)return this._byId[D]||this._byId[this.modelId(this._isModel(D)?D.attributes:D,D.idAttribute)]||D.cid&&this._byId[D.cid]},has:function(D){return null!=this.get(D)},at:function(D){return D<0&&(D+=this.length),this.models[D]},where:function(D,z){return this[z?"find":"filter"](D)},findWhere:function(D){return this.where(D,!0)},sort:function(D){var z=this.comparator;if(!z)throw new Error("Cannot sort a set without a comparator");D||(D={});var rt=z.length;return x.isFunction(z)&&(z=z.bind(this)),1===rt||x.isString(z)?this.models=this.sortBy(z):this.models.sort(z),D.silent||this.trigger("sort",this,D),this},pluck:function(D){return this.map(D+"")},fetch:function(D){var z=(D=x.extend({parse:!0},D)).success,rt=this;return D.success=function(xt){rt[D.reset?"reset":"set"](xt,D),z&&z.call(D.context,rt,xt,D),rt.trigger("sync",rt,xt,D)},Ze(this,D),this.sync("read",this,D)},create:function(D,z){var rt=(z=z?x.clone(z):{}).wait;if(!(D=this._prepareModel(D,z)))return!1;rt||this.add(D,z);var xt=this,$t=z.success;return z.success=function(Qt,xe,Ne){rt&&xt.add(Qt,Ne),$t&&$t.call(Ne.context,Qt,xe,Ne)},D.save(null,z),D},parse:function(D,z){return D},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(D,z){return D[z||this.model.prototype.idAttribute||"id"]},values:function(){return new te(this,ae)},keys:function(){return new te(this,ue)},entries:function(){return new te(this,he)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(D,z){return this._isModel(D)?(D.collection||(D.collection=this),D):((z=z?x.clone(z):{}).collection=this,(rt=this.model.prototype?new this.model(D,z):this.model(D,z)).validationError?(this.trigger("invalid",this,rt.validationError,z),!1):rt);var rt},_removeModels:function(D,z){for(var rt=[],xt=0;xt<D.length;xt++){var $t=this.get(D[xt]);if($t){var Qt=this.indexOf($t);this.models.splice(Qt,1),this.length--,delete this._byId[$t.cid];var xe=this.modelId($t.attributes,$t.idAttribute);null!=xe&&delete this._byId[xe],z.silent||(z.index=Qt,$t.trigger("remove",$t,this,z)),rt.push($t),this._removeReference($t,z)}}return rt},_isModel:function(D){return D instanceof yt},_addReference:function(D,z){this._byId[D.cid]=D;var rt=this.modelId(D.attributes,D.idAttribute);null!=rt&&(this._byId[rt]=D),D.on("all",this._onModelEvent,this)},_removeReference:function(D,z){delete this._byId[D.cid];var rt=this.modelId(D.attributes,D.idAttribute);null!=rt&&delete this._byId[rt],this===D.collection&&delete D.collection,D.off("all",this._onModelEvent,this)},_onModelEvent:function(D,z,rt,xt){if(z){if(("add"===D||"remove"===D)&&rt!==this)return;if("destroy"===D&&this.remove(z,xt),"changeId"===D){var $t=this.modelId(z.previousAttributes(),z.idAttribute),Qt=this.modelId(z.attributes,z.idAttribute);null!=$t&&delete this._byId[$t],null!=Qt&&(this._byId[Qt]=z)}}this.trigger.apply(this,arguments)}});var ne="function"==typeof Symbol&&Symbol.iterator;ne&&(Pt.prototype[ne]=Pt.prototype.values);var te=function(D,z){this._collection=D,this._kind=z,this._index=0},ae=1,ue=2,he=3;ne&&(te.prototype[ne]=function(){return this}),te.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var z,D=this._collection.at(this._index);if(this._index++,this._kind===ae)z=D;else{var rt=this._collection.modelId(D.attributes,D.idAttribute);z=this._kind===ue?rt:[rt,D]}return{value:z,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Ee=E.View=function(D){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(D,fn)),this._ensureElement(),this.initialize.apply(this,arguments)},Qe=/^(\S+)\s*(.*)$/,fn=["model","collection","el","id","attributes","className","tagName","events"];x.extend(Ee.prototype,B,{tagName:"div",$:function(D){return this.$el.find(D)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(D){return this.undelegateEvents(),this._setElement(D),this.delegateEvents(),this},_setElement:function(D){this.$el=D instanceof E.$?D:E.$(D),this.el=this.$el[0]},delegateEvents:function(D){if(D||(D=x.result(this,"events")),!D)return this;for(var z in this.undelegateEvents(),D){var rt=D[z];if(x.isFunction(rt)||(rt=this[rt]),rt){var xt=z.match(Qe);this.delegate(xt[1],xt[2],rt.bind(this))}}return this},delegate:function(D,z,rt){return this.$el.on(D+".delegateEvents"+this.cid,z,rt),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(D,z,rt){return this.$el.off(D+".delegateEvents"+this.cid,z,rt),this},_createElement:function(D){return document.createElement(D)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var D=x.extend({},x.result(this,"attributes"));this.id&&(D.id=x.result(this,"id")),this.className&&(D.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(D)}},_setAttributes:function(D){this.$el.attr(D)}});var hr=function(D,z,rt,xt){x.each(rt,function($t,Qt){z[Qt]&&(D.prototype[Qt]=function(D,z,rt,xt){switch(z){case 1:return function(){return D[rt](this[xt])};case 2:return function($t){return D[rt](this[xt],$t)};case 3:return function($t,Qt){return D[rt](this[xt],Hr($t,this),Qt)};case 4:return function($t,Qt,xe){return D[rt](this[xt],Hr($t,this),Qt,xe)};default:return function(){var $t=M.call(arguments);return $t.unshift(this[xt]),D[rt].apply(D,$t)}}}(z,$t,Qt,xt))})},Hr=function(D,z){return x.isFunction(D)?D:x.isObject(D)&&!z._isModel(D)?jr(D):x.isString(D)?function(rt){return rt.get(D)}:D},jr=function(D){var z=x.matches(D);return function(rt){return z(rt.attributes)}};x.each([[Pt,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[yt,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(D){var z=D[0],rt=D[1],xt=D[2];z.mixin=function($t){var Qt=x.reduce(x.functions($t),function(xe,Ne){return xe[Ne]=0,xe},{});hr(z,$t,Qt,xt)},hr(z,x,rt,xt)}),E.sync=function(D,z,rt){var xt=mr[D];x.defaults(rt||(rt={}),{emulateHTTP:E.emulateHTTP,emulateJSON:E.emulateJSON});var $t={type:xt,dataType:"json"};if(rt.url||($t.url=x.result(z,"url")||ln()),null==rt.data&&z&&("create"===D||"update"===D||"patch"===D)&&($t.contentType="application/json",$t.data=JSON.stringify(rt.attrs||z.toJSON(rt))),rt.emulateJSON&&($t.contentType="application/x-www-form-urlencoded",$t.data=$t.data?{model:$t.data}:{}),rt.emulateHTTP&&("PUT"===xt||"DELETE"===xt||"PATCH"===xt)){$t.type="POST",rt.emulateJSON&&($t.data._method=xt);var Qt=rt.beforeSend;rt.beforeSend=function(Ke){if(Ke.setRequestHeader("X-HTTP-Method-Override",xt),Qt)return Qt.apply(this,arguments)}}"GET"!==$t.type&&!rt.emulateJSON&&($t.processData=!1);var xe=rt.error;rt.error=function(Ke,pn,yn){rt.textStatus=pn,rt.errorThrown=yn,xe&&xe.call(rt.context,Ke,pn,yn)};var Ne=rt.xhr=E.ajax(x.extend($t,rt));return z.trigger("request",z,Ne,rt),Ne};var mr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};E.ajax=function(){return E.$.ajax.apply(E.$,arguments)};var Bn=E.Router=function(D){D||(D={}),this.preinitialize.apply(this,arguments),D.routes&&(this.routes=D.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ut=/\((.*?)\)/g,Et=/(\(\?)?:\w+/g,ie=/\*\w+/g,pe=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(Bn.prototype,B,{preinitialize:function(){},initialize:function(){},route:function(D,z,rt){x.isRegExp(D)||(D=this._routeToRegExp(D)),x.isFunction(z)&&(rt=z,z=""),rt||(rt=this[z]);var xt=this;return E.history.route(D,function($t){var Qt=xt._extractParameters(D,$t);!1!==xt.execute(rt,Qt,z)&&(xt.trigger.apply(xt,["route:"+z].concat(Qt)),xt.trigger("route",z,Qt),E.history.trigger("route",xt,z,Qt))}),this},execute:function(D,z,rt){D&&D.apply(this,z)},navigate:function(D,z){return E.history.navigate(D,z),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var D,z=x.keys(this.routes);null!=(D=z.pop());)this.route(D,this.routes[D])}},_routeToRegExp:function(D){return D=D.replace(pe,"\\$&").replace(Ut,"(?:$1)?").replace(Et,function(z,rt){return rt?z:"([^/?]+)"}).replace(ie,"([^?]*?)"),new RegExp("^"+D+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(D,z){var rt=D.exec(z).slice(1);return x.map(rt,function(xt,$t){return $t===rt.length-1?xt||null:xt?decodeURIComponent(xt):null})}});var Te=E.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},hn=/^[#\/]|\s+$/g,Rn=/^\/+|\/+$/g,rr=/#.*$/;Te.started=!1,x.extend(Te.prototype,B,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(D){return decodeURI(D.replace(/%25/g,"%2525"))},getSearch:function(){var D=this.location.href.replace(/#.*/,"").match(/\?.+/);return D?D[0]:""},getHash:function(D){var z=(D||this).location.href.match(/#(.*)$/);return z?z[1]:""},getPath:function(){var D=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===D.charAt(0)?D.slice(1):D},getFragment:function(D){return null==D&&(D=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),D.replace(hn,"")},start:function(D){if(Te.started)throw new Error("Backbone.history has already been started");if(Te.started=!0,this.options=x.extend({root:"/"},this.options,D),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Rn,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var z=this.root.slice(0,-1)||"/";return this.location.replace(z+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var rt=document.body,xt=rt.insertBefore(this.iframe,rt.firstChild).contentWindow;xt.document.open(),xt.document.close(),xt.location.hash="#"+this.fragment}var $t=window.addEventListener||function(Qt,xe){return attachEvent("on"+Qt,xe)};if(this._usePushState?$t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?$t("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var D=window.removeEventListener||function(z,rt){return detachEvent("on"+z,rt)};this._usePushState?D("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&D("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Te.started=!1},route:function(D,z){this.handlers.unshift({route:D,callback:z})},checkUrl:function(D){var z=this.getFragment();if(z===this.fragment&&this.iframe&&(z=this.getHash(this.iframe.contentWindow)),z===this.fragment)return!1;this.iframe&&this.navigate(z),this.loadUrl()},loadUrl:function(D){return!!this.matchRoot()&&(D=this.fragment=this.getFragment(D),x.some(this.handlers,function(z){if(z.route.test(D))return z.callback(D),!0}))},navigate:function(D,z){if(!Te.started)return!1;(!z||!0===z)&&(z={trigger:!!z}),D=this.getFragment(D||"");var rt=this.root;(""===D||"?"===D.charAt(0))&&(rt=rt.slice(0,-1)||"/");var xt=rt+D;D=D.replace(rr,"");var $t=this.decodeFragment(D);if(this.fragment!==$t){if(this.fragment=$t,this._usePushState)this.history[z.replace?"replaceState":"pushState"]({},document.title,xt);else{if(!this._wantsHashChange)return this.location.assign(xt);if(this._updateHash(this.location,D,z.replace),this.iframe&&D!==this.getHash(this.iframe.contentWindow)){var Qt=this.iframe.contentWindow;z.replace||(Qt.document.open(),Qt.document.close()),this._updateHash(Qt.location,D,z.replace)}}if(z.trigger)return this.loadUrl(D)}},_updateHash:function(D,z,rt){if(rt){var xt=D.href.replace(/(javascript:|#).*$/,"");D.replace(xt+"#"+z)}else D.hash="#"+z}}),E.history=new Te;yt.extend=Pt.extend=Bn.extend=Ee.extend=Te.extend=function(D,z){var xt,rt=this;return xt=D&&x.has(D,"constructor")?D.constructor:function(){return rt.apply(this,arguments)},x.extend(xt,rt,z),xt.prototype=x.create(rt.prototype,D),xt.prototype.constructor=xt,xt.__super__=rt.prototype,xt};var ln=function(){throw new Error('A "url" property or function must be specified')},Ze=function(D,z){var rt=z.error;z.error=function(xt){rt&&rt.call(z.context,D,xt,z),D.trigger("error",D,xt,z)}};return E}(E,B,k,M)}.apply(W,p))&&(P.exports=g)},59695:(P,W,f)=>{P.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(P,W,f)=>{"use strict";var p=f(45760),g=f(67365);P.exports={run:function w(I){var k="greedy"===I.graph().acyclicer?g(I,function M(B){return function(H){return B.edge(H).weight}}(I)):function E(I){var k=[],M={},B={};return p.forEach(I.nodes(),function H(O){p.has(B,O)||(B[O]=!0,M[O]=!0,p.forEach(I.outEdges(O),function(X){p.has(M,X.w)?k.push(X):H(X.w)}),delete M[O])}),k}(I);p.forEach(k,function(B){var H=I.edge(B);I.removeEdge(B),H.forwardName=B.name,H.reversed=!0,I.setEdge(B.w,B.v,H,p.uniqueId("rev"))})},undo:function x(I){p.forEach(I.edges(),function(k){var M=I.edge(k);if(M.reversed){I.removeEdge(k);var B=M.forwardName;delete M.reversed,delete M.forwardName,I.setEdge(k.w,k.v,M,B)}})}}},79999:(P,W,f)=>{var p=f(45760),g=f(11510);function E(x,I,k,M,B,H){var X=B[I][H-1],et=g.addDummyNode(x,"border",{width:0,height:0,rank:H,borderType:I},k);B[I][H]=et,x.setParent(et,M),X&&x.setEdge(X,et,{weight:1})}P.exports=function w(x){p.forEach(x.children(),function I(k){var M=x.children(k),B=x.node(k);if(M.length&&p.forEach(M,I),p.has(B,"minRank")){B.borderLeft=[],B.borderRight=[];for(var H=B.minRank,O=B.maxRank+1;H<O;++H)E(x,"borderLeft","_bl",k,B,H),E(x,"borderRight","_br",k,B,H)}})}},83870:(P,W,f)=>{"use strict";var p=f(45760);function E(H){p.forEach(H.nodes(),function(O){x(H.node(O))}),p.forEach(H.edges(),function(O){x(H.edge(O))})}function x(H){var O=H.width;H.width=H.height,H.height=O}function k(H){H.y=-H.y}function B(H){var O=H.x;H.x=H.y,H.y=O}P.exports={adjust:function g(H){var O=H.graph().rankdir.toLowerCase();("lr"===O||"rl"===O)&&E(H)},undo:function w(H){var O=H.graph().rankdir.toLowerCase();("bt"===O||"rl"===O)&&function I(H){p.forEach(H.nodes(),function(O){k(H.node(O))}),p.forEach(H.edges(),function(O){var X=H.edge(O);p.forEach(X.points,k),p.has(X,"y")&&k(X)})}(H),("lr"===O||"rl"===O)&&(function M(H){p.forEach(H.nodes(),function(O){B(H.node(O))}),p.forEach(H.edges(),function(O){var X=H.edge(O);p.forEach(X.points,B),p.has(X,"x")&&B(X)})}(H),E(H))}}},3226:P=>{function W(){var g={};g._next=g._prev=g,this._sentinel=g}function f(g){g._prev._next=g._next,g._next._prev=g._prev,delete g._next,delete g._prev}function p(g,w){if("_next"!==g&&"_prev"!==g)return w}P.exports=W,W.prototype.dequeue=function(){var g=this._sentinel,w=g._prev;if(w!==g)return f(w),w},W.prototype.enqueue=function(g){var w=this._sentinel;g._prev&&g._next&&f(g),g._next=w._next,w._next._prev=g,w._next=g,g._prev=w},W.prototype.toString=function(){for(var g=[],w=this._sentinel,E=w._prev;E!==w;)g.push(JSON.stringify(E,p)),E=E._prev;return"["+g.join(", ")+"]"}},71914:(P,W,f)=>{var p=f(45760),g=f(11510),w=f(36456).Graph;P.exports={debugOrdering:function E(x){var I=g.buildLayerMatrix(x),k=new w({compound:!0,multigraph:!0}).setGraph({});return p.forEach(x.nodes(),function(M){k.setNode(M,{label:M}),k.setParent(M,"layer"+x.node(M).rank)}),p.forEach(x.edges(),function(M){k.setEdge(M.v,M.w,{},M.name)}),p.forEach(I,function(M,B){k.setNode("layer"+B,{rank:"same"}),p.reduce(M,function(O,X){return k.setEdge(O,X,{style:"invis"}),X})}),k}}},36456:(P,W,f)=>{var p;try{p=f(85510)}catch(g){}p||(p=window.graphlib),P.exports=p},67365:(P,W,f)=>{var p=f(45760),g=f(36456).Graph,w=f(3226);P.exports=function x(H,O){if(H.nodeCount()<=1)return[];var X=function M(H,O){var X=new g,et=0,ct=0;p.forEach(H.nodes(),function(vt){X.setNode(vt,{v:vt,in:0,out:0})}),p.forEach(H.edges(),function(vt){var pt=X.edge(vt.v,vt.w)||0,nt=O(vt);X.setEdge(vt.v,vt.w,pt+nt),ct=Math.max(ct,X.node(vt.v).out+=nt),et=Math.max(et,X.node(vt.w).in+=nt)});var i=p.range(ct+et+3).map(function(){return new w}),st=et+1;return p.forEach(X.nodes(),function(vt){B(i,st,X.node(vt))}),{graph:X,buckets:i,zeroIdx:st}}(H,O||E),et=function I(H,O,X){for(var st,et=[],ct=O[O.length-1],i=O[0];H.nodeCount();){for(;st=i.dequeue();)k(H,O,X,st);for(;st=ct.dequeue();)k(H,O,X,st);if(H.nodeCount())for(var vt=O.length-2;vt>0;--vt)if(st=O[vt].dequeue()){et=et.concat(k(H,O,X,st,!0));break}}return et}(X.graph,X.buckets,X.zeroIdx);return p.flatten(p.map(et,function(ct){return H.outEdges(ct.v,ct.w)}),!0)};var E=p.constant(1);function k(H,O,X,et,ct){var i=ct?[]:void 0;return p.forEach(H.inEdges(et.v),function(st){var vt=H.edge(st),pt=H.node(st.v);ct&&i.push({v:st.v,w:st.w}),pt.out-=vt,B(O,X,pt)}),p.forEach(H.outEdges(et.v),function(st){var vt=H.edge(st),nt=H.node(st.w);nt.in-=vt,B(O,X,nt)}),H.removeNode(et.v),i}function B(H,O,X){X.out?X.in?H[X.out-X.in+O].enqueue(X):H[H.length-1].enqueue(X):H[0].enqueue(X)}},14850:(P,W,f)=>{"use strict";var p=f(45760),g=f(12234),w=f(91496),E=f(94124),x=f(11510).normalizeRanks,I=f(60162),k=f(11510).removeEmptyRanks,M=f(1230),B=f(79999),H=f(83870),O=f(32974),X=f(78226),et=f(11510),ct=f(36456).Graph;P.exports=function i(Ut,Et){var ie=Et&&Et.debugTiming?et.time:et.notime;ie("layout",function(){var pe=ie("  buildLayoutGraph",function(){return function te(Ut){var Et=new ct({multigraph:!0,compound:!0}),ie=Bn(Ut.graph());return Et.setGraph(p.merge({},nt,mr(ie,pt),p.pick(ie,yt))),p.forEach(Ut.nodes(),function(pe){var Te=Bn(Ut.node(pe));Et.setNode(pe,p.defaults(mr(Te,Pt),Ft)),Et.setParent(pe,Ut.parent(pe))}),p.forEach(Ut.edges(),function(pe){var Te=Bn(Ut.edge(pe));Et.setEdge(pe,p.merge({},jt,mr(Te,C),p.pick(Te,ne)))}),Et}(Ut)});ie("  runLayout",function(){!function st(Ut,Et){Et("    makeSpaceForEdgeLabels",function(){!function ae(Ut){var Et=Ut.graph();Et.ranksep/=2,p.forEach(Ut.edges(),function(ie){var pe=Ut.edge(ie);pe.minlen*=2,"c"!==pe.labelpos.toLowerCase()&&("TB"===Et.rankdir||"BT"===Et.rankdir?pe.width+=pe.labeloffset:pe.height+=pe.labeloffset)})}(Ut)}),Et("    removeSelfEdges",function(){!function jr(Ut){p.forEach(Ut.edges(),function(Et){if(Et.v===Et.w){var ie=Ut.node(Et.v);ie.selfEdges||(ie.selfEdges=[]),ie.selfEdges.push({e:Et,label:Ut.edge(Et)}),Ut.removeEdge(Et)}})}(Ut)}),Et("    acyclic",function(){g.run(Ut)}),Et("    nestingGraph.run",function(){M.run(Ut)}),Et("    rank",function(){E(et.asNonCompoundGraph(Ut))}),Et("    injectEdgeLabelProxies",function(){!function ue(Ut){p.forEach(Ut.edges(),function(Et){var ie=Ut.edge(Et);if(ie.width&&ie.height){var pe=Ut.node(Et.v),Te=Ut.node(Et.w);et.addDummyNode(Ut,"edge-proxy",{rank:(Te.rank-pe.rank)/2+pe.rank,e:Et},"_ep")}})}(Ut)}),Et("    removeEmptyRanks",function(){k(Ut)}),Et("    nestingGraph.cleanup",function(){M.cleanup(Ut)}),Et("    normalizeRanks",function(){x(Ut)}),Et("    assignRankMinMax",function(){!function he(Ut){var Et=0;p.forEach(Ut.nodes(),function(ie){var pe=Ut.node(ie);pe.borderTop&&(pe.minRank=Ut.node(pe.borderTop).rank,pe.maxRank=Ut.node(pe.borderBottom).rank,Et=p.max(Et,pe.maxRank))}),Ut.graph().maxRank=Et}(Ut)}),Et("    removeEdgeLabelProxies",function(){!function Ee(Ut){p.forEach(Ut.nodes(),function(Et){var ie=Ut.node(Et);"edge-proxy"===ie.dummy&&(Ut.edge(ie.e).labelRank=ie.rank,Ut.removeNode(Et))})}(Ut)}),Et("    normalize.run",function(){w.run(Ut)}),Et("    parentDummyChains",function(){I(Ut)}),Et("    addBorderSegments",function(){B(Ut)}),Et("    order",function(){O(Ut)}),Et("    insertSelfEdges",function(){!function zt(Ut){var Et=et.buildLayerMatrix(Ut);p.forEach(Et,function(ie){var pe=0;p.forEach(ie,function(Te,hn){var Rn=Ut.node(Te);Rn.order=hn+pe,p.forEach(Rn.selfEdges,function(rr){et.addDummyNode(Ut,"selfedge",{width:rr.label.width,height:rr.label.height,rank:Rn.rank,order:hn+ ++pe,e:rr.e,label:rr.label},"_se")}),delete Rn.selfEdges})})}(Ut)}),Et("    adjustCoordinateSystem",function(){H.adjust(Ut)}),Et("    position",function(){X(Ut)}),Et("    positionSelfEdges",function(){!function Cn(Ut){p.forEach(Ut.nodes(),function(Et){var ie=Ut.node(Et);if("selfedge"===ie.dummy){var pe=Ut.node(ie.e.v),Te=pe.x+pe.width/2,hn=pe.y,Rn=ie.x-Te,rr=pe.height/2;Ut.setEdge(ie.e,ie.label),Ut.removeNode(Et),ie.label.points=[{x:Te+2*Rn/3,y:hn-rr},{x:Te+5*Rn/6,y:hn-rr},{x:Te+Rn,y:hn},{x:Te+5*Rn/6,y:hn+rr},{x:Te+2*Rn/3,y:hn+rr}],ie.label.x=ie.x,ie.label.y=ie.y}})}(Ut)}),Et("    removeBorderNodes",function(){!function Hr(Ut){p.forEach(Ut.nodes(),function(Et){if(Ut.children(Et).length){var ie=Ut.node(Et),pe=Ut.node(ie.borderTop),Te=Ut.node(ie.borderBottom),hn=Ut.node(p.last(ie.borderLeft)),Rn=Ut.node(p.last(ie.borderRight));ie.width=Math.abs(Rn.x-hn.x),ie.height=Math.abs(Te.y-pe.y),ie.x=hn.x+ie.width/2,ie.y=pe.y+ie.height/2}}),p.forEach(Ut.nodes(),function(Et){"border"===Ut.node(Et).dummy&&Ut.removeNode(Et)})}(Ut)}),Et("    normalize.undo",function(){w.undo(Ut)}),Et("    fixupEdgeLabelCoords",function(){!function Re(Ut){p.forEach(Ut.edges(),function(Et){var ie=Ut.edge(Et);if(p.has(ie,"x"))switch(("l"===ie.labelpos||"r"===ie.labelpos)&&(ie.width-=ie.labeloffset),ie.labelpos){case"l":ie.x-=ie.width/2+ie.labeloffset;break;case"r":ie.x+=ie.width/2+ie.labeloffset}})}(Ut)}),Et("    undoCoordinateSystem",function(){H.undo(Ut)}),Et("    translateGraph",function(){!function Qe(Ut){var Et=Number.POSITIVE_INFINITY,ie=0,pe=Number.POSITIVE_INFINITY,Te=0,hn=Ut.graph(),Rn=hn.marginx||0,rr=hn.marginy||0;function ki(ln){var Ze=ln.x,D=ln.y,z=ln.width,rt=ln.height;Et=Math.min(Et,Ze-z/2),ie=Math.max(ie,Ze+z/2),pe=Math.min(pe,D-rt/2),Te=Math.max(Te,D+rt/2)}p.forEach(Ut.nodes(),function(ln){ki(Ut.node(ln))}),p.forEach(Ut.edges(),function(ln){var Ze=Ut.edge(ln);p.has(Ze,"x")&&ki(Ze)}),Et-=Rn,pe-=rr,p.forEach(Ut.nodes(),function(ln){var Ze=Ut.node(ln);Ze.x-=Et,Ze.y-=pe}),p.forEach(Ut.edges(),function(ln){var Ze=Ut.edge(ln);p.forEach(Ze.points,function(D){D.x-=Et,D.y-=pe}),p.has(Ze,"x")&&(Ze.x-=Et),p.has(Ze,"y")&&(Ze.y-=pe)}),hn.width=ie-Et+Rn,hn.height=Te-pe+rr}(Ut)}),Et("    assignNodeIntersects",function(){!function fn(Ut){p.forEach(Ut.edges(),function(Et){var hn,Rn,ie=Ut.edge(Et),pe=Ut.node(Et.v),Te=Ut.node(Et.w);ie.points?(hn=ie.points[0],Rn=ie.points[ie.points.length-1]):(ie.points=[],hn=Te,Rn=pe),ie.points.unshift(et.intersectRect(pe,hn)),ie.points.push(et.intersectRect(Te,Rn))})}(Ut)}),Et("    reversePoints",function(){!function hr(Ut){p.forEach(Ut.edges(),function(Et){var ie=Ut.edge(Et);ie.reversed&&ie.points.reverse()})}(Ut)}),Et("    acyclic.undo",function(){g.undo(Ut)})}(pe,ie)}),ie("  updateInputGraph",function(){!function vt(Ut,Et){p.forEach(Ut.nodes(),function(ie){var pe=Ut.node(ie),Te=Et.node(ie);pe&&(pe.x=Te.x,pe.y=Te.y,Et.children(ie).length&&(pe.width=Te.width,pe.height=Te.height))}),p.forEach(Ut.edges(),function(ie){var pe=Ut.edge(ie),Te=Et.edge(ie);pe.points=Te.points,p.has(Te,"x")&&(pe.x=Te.x,pe.y=Te.y)}),Ut.graph().width=Et.graph().width,Ut.graph().height=Et.graph().height}(Ut,pe)})})};var pt=["nodesep","edgesep","ranksep","marginx","marginy"],nt={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},yt=["acyclicer","ranker","rankdir","align"],Pt=["width","height"],Ft={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],jt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ne=["labelpos"];function mr(Ut,Et){return p.mapValues(p.pick(Ut,Et),Number)}function Bn(Ut){var Et={};return p.forEach(Ut,function(ie,pe){Et[pe.toLowerCase()]=ie}),Et}},45760:(P,W,f)=>{var p;try{p={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(g){}p||(p=window._),P.exports=p},1230:(P,W,f)=>{var p=f(45760),g=f(11510);function E(M,B,H,O,X,et,ct){var i=M.children(ct);if(i.length){var st=g.addBorderNode(M,"_bt"),vt=g.addBorderNode(M,"_bb"),pt=M.node(ct);M.setParent(st,ct),pt.borderTop=st,M.setParent(vt,ct),pt.borderBottom=vt,p.forEach(i,function(nt){E(M,B,H,O,X,et,nt);var yt=M.node(nt),Pt=yt.borderTop?yt.borderTop:nt,Ft=yt.borderBottom?yt.borderBottom:nt,C=yt.borderTop?O:2*O,jt=Pt!==Ft?1:X-et[ct]+1;M.setEdge(st,Pt,{weight:C,minlen:jt,nestingEdge:!0}),M.setEdge(Ft,vt,{weight:C,minlen:jt,nestingEdge:!0})}),M.parent(ct)||M.setEdge(B,st,{weight:0,minlen:X+et[ct]})}else ct!==B&&M.setEdge(B,ct,{weight:0,minlen:H})}P.exports={run:function w(M){var B=g.addDummyNode(M,"root",{},"_root"),H=function x(M){var B={};function H(O,X){var et=M.children(O);et&&et.length&&p.forEach(et,function(ct){H(ct,X+1)}),B[O]=X}return p.forEach(M.children(),function(O){H(O,1)}),B}(M),O=p.max(p.values(H))-1,X=2*O+1;M.graph().nestingRoot=B,p.forEach(M.edges(),function(ct){M.edge(ct).minlen*=X});var et=function I(M){return p.reduce(M.edges(),function(B,H){return B+M.edge(H).weight},0)}(M)+1;p.forEach(M.children(),function(ct){E(M,B,X,et,O,H,ct)}),M.graph().nodeRankFactor=X},cleanup:function k(M){var B=M.graph();M.removeNode(B.nestingRoot),delete B.nestingRoot,p.forEach(M.edges(),function(H){M.edge(H).nestingEdge&&M.removeEdge(H)})}}},91496:(P,W,f)=>{"use strict";var p=f(45760),g=f(11510);P.exports={run:function w(I){I.graph().dummyChains=[],p.forEach(I.edges(),function(k){!function E(I,k){var M=k.v,B=I.node(M).rank,H=k.w,O=I.node(H).rank,X=k.name,et=I.edge(k),ct=et.labelRank;if(O!==B+1){var i,st,vt;for(I.removeEdge(k),vt=0,++B;B<O;++vt,++B)et.points=[],i=g.addDummyNode(I,"edge",st={width:0,height:0,edgeLabel:et,edgeObj:k,rank:B},"_d"),B===ct&&(st.width=et.width,st.height=et.height,st.dummy="edge-label",st.labelpos=et.labelpos),I.setEdge(M,i,{weight:et.weight},X),0===vt&&I.graph().dummyChains.push(i),M=i;I.setEdge(M,H,{weight:et.weight},X)}}(I,k)})},undo:function x(I){p.forEach(I.graph().dummyChains,function(k){var H,M=I.node(k),B=M.edgeLabel;for(I.setEdge(M.edgeObj,B);M.dummy;)H=I.successors(k)[0],I.removeNode(k),B.points.push({x:M.x,y:M.y}),"edge-label"===M.dummy&&(B.x=M.x,B.y=M.y,B.width=M.width,B.height=M.height),M=I.node(k=H)})}}},33034:(P,W,f)=>{var p=f(45760);P.exports=function g(w,E,x){var k,I={};p.forEach(x,function(M){for(var H,O,B=w.parent(M);B;){if((H=w.parent(B))?(O=I[H],I[H]=B):(O=k,k=B),O&&O!==B)return void E.setEdge(O,B);B=H}})}},81323:(P,W,f)=>{var p=f(45760);P.exports=function g(w,E){return p.map(E,function(x){var I=w.inEdges(x);if(I.length){var k=p.reduce(I,function(M,B){var H=w.edge(B),O=w.node(B.v);return{sum:M.sum+H.weight*O.order,weight:M.weight+H.weight}},{sum:0,weight:0});return{v:x,barycenter:k.sum/k.weight,weight:k.weight}}return{v:x}})}},1686:(P,W,f)=>{var p=f(45760),g=f(36456).Graph;P.exports=function w(x,I,k){var M=function E(x){for(var I;x.hasNode(I=p.uniqueId("_root")););return I}(x),B=new g({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(H){return x.node(H)});return p.forEach(x.nodes(),function(H){var O=x.node(H),X=x.parent(H);(O.rank===I||O.minRank<=I&&I<=O.maxRank)&&(B.setNode(H),B.setParent(H,X||M),p.forEach(x[k](H),function(et){var ct=et.v===H?et.w:et.v,i=B.edge(ct,H),st=p.isUndefined(i)?0:i.weight;B.setEdge(ct,H,{weight:x.edge(et).weight+st})}),p.has(O,"minRank")&&B.setNode(H,{borderLeft:O.borderLeft[I],borderRight:O.borderRight[I]}))}),B}},18796:(P,W,f)=>{"use strict";var p=f(45760);function w(E,x,I){for(var k=p.zipObject(I,p.map(I,function(et,ct){return ct})),M=p.flatten(p.map(x,function(et){return p.sortBy(p.map(E.outEdges(et),function(ct){return{pos:k[ct.w],weight:E.edge(ct).weight}}),"pos")}),!0),B=1;B<I.length;)B<<=1;var H=2*B-1;B-=1;var O=p.map(new Array(H),function(){return 0}),X=0;return p.forEach(M.forEach(function(et){var ct=et.pos+B;O[ct]+=et.weight;for(var i=0;ct>0;)ct%2&&(i+=O[ct+1]),O[ct=ct-1>>1]+=et.weight;X+=et.weight*i})),X}P.exports=function g(E,x){for(var I=0,k=1;k<x.length;++k)I+=w(E,x[k-1],x[k]);return I}},32974:(P,W,f)=>{"use strict";var p=f(45760),g=f(49402),w=f(18796),E=f(61057),x=f(1686),I=f(33034),k=f(36456).Graph,M=f(11510);function H(et,ct,i){return p.map(ct,function(st){return x(et,st,i)})}function O(et,ct){var i=new k;p.forEach(et,function(st){var vt=st.graph().root,pt=E(st,vt,i,ct);p.forEach(pt.vs,function(nt,yt){st.node(nt).order=yt}),I(st,i,pt.vs)})}function X(et,ct){p.forEach(ct,function(i){p.forEach(i,function(st,vt){et.node(st).order=vt})})}P.exports=function B(et){var ct=M.maxRank(et),i=H(et,p.range(1,ct+1),"inEdges"),st=H(et,p.range(ct-1,-1,-1),"outEdges"),vt=g(et);X(et,vt);for(var nt,pt=Number.POSITIVE_INFINITY,yt=0,Pt=0;Pt<4;++yt,++Pt){O(yt%2?i:st,yt%4>=2),vt=M.buildLayerMatrix(et);var Ft=w(et,vt);Ft<pt&&(Pt=0,nt=p.cloneDeep(vt),pt=Ft)}X(et,nt)}},49402:(P,W,f)=>{"use strict";var p=f(45760);P.exports=function g(w){var E={},x=p.filter(w.nodes(),function(H){return!w.children(H).length}),I=p.max(p.map(x,function(H){return w.node(H).rank})),k=p.map(p.range(I+1),function(){return[]}),B=p.sortBy(x,function(H){return w.node(H).rank});return p.forEach(B,function M(H){if(!p.has(E,H)){E[H]=!0;var O=w.node(H);k[O.rank].push(H),p.forEach(w.successors(H),M)}}),k}},83826:(P,W,f)=>{"use strict";var p=f(45760);P.exports=function g(x,I){var k={};return p.forEach(x,function(B,H){var O=k[B.v]={indegree:0,in:[],out:[],vs:[B.v],i:H};p.isUndefined(B.barycenter)||(O.barycenter=B.barycenter,O.weight=B.weight)}),p.forEach(I.edges(),function(B){var H=k[B.v],O=k[B.w];!p.isUndefined(H)&&!p.isUndefined(O)&&(O.indegree++,H.out.push(k[B.w]))}),function w(x){var I=[];function k(H){return function(O){O.merged||(p.isUndefined(O.barycenter)||p.isUndefined(H.barycenter)||O.barycenter>=H.barycenter)&&function E(x,I){var k=0,M=0;x.weight&&(k+=x.barycenter*x.weight,M+=x.weight),I.weight&&(k+=I.barycenter*I.weight,M+=I.weight),x.vs=I.vs.concat(x.vs),x.barycenter=k/M,x.weight=M,x.i=Math.min(I.i,x.i),I.merged=!0}(H,O)}}function M(H){return function(O){O.in.push(H),0==--O.indegree&&x.push(O)}}for(;x.length;){var B=x.pop();I.push(B),p.forEach(B.in.reverse(),k(B)),p.forEach(B.out,M(B))}return p.map(p.filter(I,function(H){return!H.merged}),function(H){return p.pick(H,["vs","i","barycenter","weight"])})}(p.filter(k,function(B){return!B.indegree}))}},61057:(P,W,f)=>{var p=f(45760),g=f(81323),w=f(83826),E=f(93803);P.exports=function x(M,B,H,O){var X=M.children(B),et=M.node(B),ct=et?et.borderLeft:void 0,i=et?et.borderRight:void 0,st={};ct&&(X=p.filter(X,function(Ft){return Ft!==ct&&Ft!==i}));var vt=g(M,X);p.forEach(vt,function(Ft){if(M.children(Ft.v).length){var C=x(M,Ft.v,H,O);st[Ft.v]=C,p.has(C,"barycenter")&&function k(M,B){p.isUndefined(M.barycenter)?(M.barycenter=B.barycenter,M.weight=B.weight):(M.barycenter=(M.barycenter*M.weight+B.barycenter*B.weight)/(M.weight+B.weight),M.weight+=B.weight)}(Ft,C)}});var pt=w(vt,H);!function I(M,B){p.forEach(M,function(H){H.vs=p.flatten(H.vs.map(function(O){return B[O]?B[O].vs:O}),!0)})}(pt,st);var nt=E(pt,O);if(ct&&(nt.vs=p.flatten([ct,nt.vs,i],!0),M.predecessors(ct).length)){var yt=M.node(M.predecessors(ct)[0]),Pt=M.node(M.predecessors(i)[0]);p.has(nt,"barycenter")||(nt.barycenter=0,nt.weight=0),nt.barycenter=(nt.barycenter*nt.weight+yt.order+Pt.order)/(nt.weight+2),nt.weight+=2}return nt}},93803:(P,W,f)=>{var p=f(45760),g=f(11510);function E(I,k,M){for(var B;k.length&&(B=p.last(k)).i<=M;)k.pop(),I.push(B.vs),M++;return M}P.exports=function w(I,k){var M=g.partition(I,function(st){return p.has(st,"barycenter")}),B=M.lhs,H=p.sortBy(M.rhs,function(st){return-st.i}),O=[],X=0,et=0,ct=0;B.sort(function x(I){return function(k,M){return k.barycenter<M.barycenter?-1:k.barycenter>M.barycenter?1:I?M.i-k.i:k.i-M.i}}(!!k)),ct=E(O,H,ct),p.forEach(B,function(st){ct+=st.vs.length,O.push(st.vs),X+=st.barycenter*st.weight,et+=st.weight,ct=E(O,H,ct)});var i={vs:p.flatten(O,!0)};return et&&(i.barycenter=X/et,i.weight=et),i}},60162:(P,W,f)=>{var p=f(45760);P.exports=function g(x){var I=function E(x){var I={},k=0;return p.forEach(x.children(),function M(B){var H=k;p.forEach(x.children(B),M),I[B]={low:H,lim:k++}}),I}(x);p.forEach(x.graph().dummyChains,function(k){for(var M=x.node(k),B=M.edgeObj,H=function w(x,I,k,M){var et,ct,B=[],H=[],O=Math.min(I[k].low,I[M].low),X=Math.max(I[k].lim,I[M].lim);et=k;do{et=x.parent(et),B.push(et)}while(et&&(I[et].low>O||X>I[et].lim));for(ct=et,et=M;(et=x.parent(et))!==ct;)H.push(et);return{path:B.concat(H.reverse()),lca:ct}}(x,I,B.v,B.w),O=H.path,X=H.lca,et=0,ct=O[et],i=!0;k!==B.w;){if(M=x.node(k),i){for(;(ct=O[et])!==X&&x.node(ct).maxRank<M.rank;)et++;ct===X&&(i=!1)}if(!i){for(;et<O.length-1&&x.node(ct=O[et+1]).minRank<=M.rank;)et++;ct=O[et]}x.setParent(k,ct),k=x.successors(k)[0]}})}},54058:(P,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,w=f(11510);function E(pt,nt){var yt={};return p.reduce(nt,function Pt(Ft,C){var jt=0,ne=0,te=Ft.length,ae=p.last(C);return p.forEach(C,function(ue,he){var Ee=function I(pt,nt){if(pt.node(nt).dummy)return p.find(pt.predecessors(nt),function(yt){return pt.node(yt).dummy})}(pt,ue),Qe=Ee?pt.node(Ee).order:te;(Ee||ue===ae)&&(p.forEach(C.slice(ne,he+1),function(fn){p.forEach(pt.predecessors(fn),function(Re){var hr=pt.node(Re),Hr=hr.order;(Hr<jt||Qe<Hr)&&(!hr.dummy||!pt.node(fn).dummy)&&k(yt,Re,fn)})}),ne=he+1,jt=Qe)}),C}),yt}function x(pt,nt){var yt={};function Pt(C,jt,ne,te,ae){var ue;p.forEach(p.range(jt,ne),function(he){pt.node(ue=C[he]).dummy&&p.forEach(pt.predecessors(ue),function(Ee){var Qe=pt.node(Ee);Qe.dummy&&(Qe.order<te||Qe.order>ae)&&k(yt,Ee,ue)})})}return p.reduce(nt,function Ft(C,jt){var te,ne=-1,ae=0;return p.forEach(jt,function(ue,he){if("border"===pt.node(ue).dummy){var Ee=pt.predecessors(ue);Ee.length&&(te=pt.node(Ee[0]).order,Pt(jt,ae,he,ne,te),ae=he,ne=te)}Pt(jt,ae,jt.length,te,C.length)}),jt}),yt}function k(pt,nt,yt){if(nt>yt){var Pt=nt;nt=yt,yt=Pt}var Ft=pt[nt];Ft||(pt[nt]=Ft={}),Ft[yt]=!0}function M(pt,nt,yt){if(nt>yt){var Pt=nt;nt=yt,yt=Pt}return p.has(pt[nt],yt)}function B(pt,nt,yt,Pt){var Ft={},C={},jt={};return p.forEach(nt,function(ne){p.forEach(ne,function(te,ae){Ft[te]=te,C[te]=te,jt[te]=ae})}),p.forEach(nt,function(ne){var te=-1;p.forEach(ne,function(ae){var ue=Pt(ae);if(ue.length)for(var he=((ue=p.sortBy(ue,function(Re){return jt[Re]})).length-1)/2,Ee=Math.floor(he),Qe=Math.ceil(he);Ee<=Qe;++Ee){var fn=ue[Ee];C[ae]===ae&&te<jt[fn]&&!M(yt,ae,fn)&&(C[fn]=ae,C[ae]=Ft[ae]=Ft[fn],te=jt[fn])}})}),{root:Ft,align:C}}function H(pt,nt,yt,Pt,Ft){var C={},jt=function O(pt,nt,yt,Pt){var Ft=new g,C=pt.graph(),jt=function st(pt,nt,yt){return function(Pt,Ft,C){var ae,jt=Pt.node(Ft),ne=Pt.node(C),te=0;if(te+=jt.width/2,p.has(jt,"labelpos"))switch(jt.labelpos.toLowerCase()){case"l":ae=-jt.width/2;break;case"r":ae=jt.width/2}if(ae&&(te+=yt?ae:-ae),ae=0,te+=(jt.dummy?nt:pt)/2,te+=(ne.dummy?nt:pt)/2,te+=ne.width/2,p.has(ne,"labelpos"))switch(ne.labelpos.toLowerCase()){case"l":ae=ne.width/2;break;case"r":ae=-ne.width/2}return ae&&(te+=yt?ae:-ae),ae=0,te}}(C.nodesep,C.edgesep,Pt);return p.forEach(nt,function(ne){var te;p.forEach(ne,function(ae){var ue=yt[ae];if(Ft.setNode(ue),te){var he=yt[te],Ee=Ft.edge(he,ue);Ft.setEdge(he,ue,Math.max(jt(pt,ae,te),Ee||0))}te=ae})}),Ft}(pt,nt,yt,Ft),ne=Ft?"borderLeft":"borderRight";function te(he,Ee){for(var Qe=jt.nodes(),fn=Qe.pop(),Re={};fn;)Re[fn]?he(fn):(Re[fn]=!0,Qe.push(fn),Qe=Qe.concat(Ee(fn))),fn=Qe.pop()}return te(function ae(he){C[he]=jt.inEdges(he).reduce(function(Ee,Qe){return Math.max(Ee,C[Qe.v]+jt.edge(Qe))},0)},jt.predecessors.bind(jt)),te(function ue(he){var Ee=jt.outEdges(he).reduce(function(fn,Re){return Math.min(fn,C[Re.w]-jt.edge(Re))},Number.POSITIVE_INFINITY),Qe=pt.node(he);Ee!==Number.POSITIVE_INFINITY&&Qe.borderType!==ne&&(C[he]=Math.max(C[he],Ee))},jt.successors.bind(jt)),p.forEach(Pt,function(he){C[he]=C[yt[he]]}),C}function X(pt,nt){return p.minBy(p.values(nt),function(yt){var Pt=Number.NEGATIVE_INFINITY,Ft=Number.POSITIVE_INFINITY;return p.forIn(yt,function(C,jt){var ne=function vt(pt,nt){return pt.node(nt).width}(pt,jt)/2;Pt=Math.max(C+ne,Pt),Ft=Math.min(C-ne,Ft)}),Pt-Ft})}function et(pt,nt){var yt=p.values(nt),Pt=p.min(yt),Ft=p.max(yt);p.forEach(["u","d"],function(C){p.forEach(["l","r"],function(jt){var ae,ne=C+jt,te=pt[ne];if(te!==nt){var ue=p.values(te);(ae="l"===jt?Pt-p.min(ue):Ft-p.max(ue))&&(pt[ne]=p.mapValues(te,function(he){return he+ae}))}})})}function ct(pt,nt){return p.mapValues(pt.ul,function(yt,Pt){if(nt)return pt[nt.toLowerCase()][Pt];var Ft=p.sortBy(p.map(pt,Pt));return(Ft[1]+Ft[2])/2})}P.exports={positionX:function i(pt){var Ft,nt=w.buildLayerMatrix(pt),yt=p.merge(E(pt,nt),x(pt,nt)),Pt={};p.forEach(["u","d"],function(jt){Ft="u"===jt?nt:p.values(nt).reverse(),p.forEach(["l","r"],function(ne){"r"===ne&&(Ft=p.map(Ft,function(he){return p.values(he).reverse()}));var te=("u"===jt?pt.predecessors:pt.successors).bind(pt),ae=B(0,Ft,yt,te),ue=H(pt,Ft,ae.root,ae.align,"r"===ne);"r"===ne&&(ue=p.mapValues(ue,function(he){return-he})),Pt[jt+ne]=ue})});var C=X(pt,Pt);return et(Pt,C),ct(Pt,pt.graph().align)},findType1Conflicts:E,findType2Conflicts:x,addConflict:k,hasConflict:M,verticalAlignment:B,horizontalCompaction:H,alignCoordinates:et,findSmallestWidthAlignment:X,balance:ct}},78226:(P,W,f)=>{"use strict";var p=f(45760),g=f(11510),w=f(54058).positionX;P.exports=function E(I){(function x(I){var k=g.buildLayerMatrix(I),M=I.graph().ranksep,B=0;p.forEach(k,function(H){var O=p.max(p.map(H,function(X){return I.node(X).height}));p.forEach(H,function(X){I.node(X).y=B+O/2}),B+=O+M})})(I=g.asNonCompoundGraph(I)),p.forEach(w(I),function(k,M){I.node(M).x=k})}},96632:(P,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,w=f(1916).slack;function x(M,B){return p.forEach(M.nodes(),function H(O){p.forEach(B.nodeEdges(O),function(X){var et=X.v,ct=O===et?X.w:et;!M.hasNode(ct)&&!w(B,X)&&(M.setNode(ct,{}),M.setEdge(O,ct,{}),H(ct))})}),M.nodeCount()}function I(M,B){return p.minBy(B.edges(),function(H){if(M.hasNode(H.v)!==M.hasNode(H.w))return w(B,H)})}function k(M,B,H){p.forEach(M.nodes(),function(O){B.node(O).rank+=H})}P.exports=function E(M){var X,et,B=new g({directed:!1}),H=M.nodes()[0],O=M.nodeCount();for(B.setNode(H,{});x(B,M)<O;)X=I(B,M),et=B.hasNode(X.v)?w(M,X):-w(M,X),k(B,M,et);return B}},94124:(P,W,f)=>{"use strict";var g=f(1916).longestPath,w=f(96632),E=f(63804);P.exports=function x(B){switch(B.graph().ranker){case"network-simplex":default:!function M(B){E(B)}(B);break;case"tight-tree":!function k(B){g(B),w(B)}(B);break;case"longest-path":I(B)}};var I=g},63804:(P,W,f)=>{"use strict";var p=f(45760),g=f(96632),w=f(1916).slack,E=f(1916).longestPath,x=f(36456).alg.preorder,I=f(36456).alg.postorder,k=f(11510).simplify;function M(yt){yt=k(yt),E(yt);var Ft,Pt=g(yt);for(X(Pt),B(Pt,yt);Ft=ct(Pt);)st(Pt,yt,Ft,i(Pt,yt,Ft))}function B(yt,Pt){var Ft=I(yt,yt.nodes());Ft=Ft.slice(0,Ft.length-1),p.forEach(Ft,function(C){!function H(yt,Pt,Ft){var C=yt.node(Ft);yt.edge(Ft,C.parent).cutvalue=O(yt,Pt,Ft)}(yt,Pt,C)})}function O(yt,Pt,Ft){var jt=yt.node(Ft).parent,ne=!0,te=Pt.edge(Ft,jt),ae=0;return te||(ne=!1,te=Pt.edge(jt,Ft)),ae=te.weight,p.forEach(Pt.nodeEdges(Ft),function(ue){var he=ue.v===Ft,Ee=he?ue.w:ue.v;if(Ee!==jt){var Qe=he===ne,fn=Pt.edge(ue).weight;if(ae+=Qe?fn:-fn,function pt(yt,Pt,Ft){return yt.hasEdge(Pt,Ft)}(yt,Ft,Ee)){var Re=yt.edge(Ft,Ee).cutvalue;ae+=Qe?-Re:Re}}}),ae}function X(yt,Pt){arguments.length<2&&(Pt=yt.nodes()[0]),et(yt,{},1,Pt)}function et(yt,Pt,Ft,C,jt){var ne=Ft,te=yt.node(C);return Pt[C]=!0,p.forEach(yt.neighbors(C),function(ae){p.has(Pt,ae)||(Ft=et(yt,Pt,Ft,ae,C))}),te.low=ne,te.lim=Ft++,jt?te.parent=jt:delete te.parent,Ft}function ct(yt){return p.find(yt.edges(),function(Pt){return yt.edge(Pt).cutvalue<0})}function i(yt,Pt,Ft){var C=Ft.v,jt=Ft.w;Pt.hasEdge(C,jt)||(C=Ft.w,jt=Ft.v);var ne=yt.node(C),te=yt.node(jt),ae=ne,ue=!1;ne.lim>te.lim&&(ae=te,ue=!0);var he=p.filter(Pt.edges(),function(Ee){return ue===nt(0,yt.node(Ee.v),ae)&&ue!==nt(0,yt.node(Ee.w),ae)});return p.minBy(he,function(Ee){return w(Pt,Ee)})}function st(yt,Pt,Ft,C){yt.removeEdge(Ft.v,Ft.w),yt.setEdge(C.v,C.w,{}),X(yt),B(yt,Pt),function vt(yt,Pt){var Ft=p.find(yt.nodes(),function(jt){return!Pt.node(jt).parent}),C=x(yt,Ft);C=C.slice(1),p.forEach(C,function(jt){var ne=yt.node(jt).parent,te=Pt.edge(jt,ne),ae=!1;te||(te=Pt.edge(ne,jt),ae=!0),Pt.node(jt).rank=Pt.node(ne).rank+(ae?te.minlen:-te.minlen)})}(yt,Pt)}function nt(yt,Pt,Ft){return Ft.low<=Pt.lim&&Pt.lim<=Ft.lim}P.exports=M,M.initLowLimValues=X,M.initCutValues=B,M.calcCutValue=O,M.leaveEdge=ct,M.enterEdge=i,M.exchangeEdges=st},1916:(P,W,f)=>{"use strict";var p=f(45760);P.exports={longestPath:function g(E){var x={};p.forEach(E.sources(),function I(k){var M=E.node(k);if(p.has(x,k))return M.rank;x[k]=!0;var B=p.min(p.map(E.outEdges(k),function(H){return I(H.w)-E.edge(H).minlen}));return(B===Number.POSITIVE_INFINITY||null==B)&&(B=0),M.rank=B})},slack:function w(E,x){return E.node(x.w).rank-E.node(x.v).rank-E.edge(x).minlen}}},11510:(P,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph;function w(vt,pt,nt,yt){var Pt;do{Pt=p.uniqueId(yt)}while(vt.hasNode(Pt));return nt.dummy=pt,vt.setNode(Pt,nt),Pt}function et(vt){return p.max(p.map(vt.nodes(),function(pt){var nt=vt.node(pt).rank;if(!p.isUndefined(nt))return nt}))}P.exports={addDummyNode:w,simplify:function E(vt){var pt=(new g).setGraph(vt.graph());return p.forEach(vt.nodes(),function(nt){pt.setNode(nt,vt.node(nt))}),p.forEach(vt.edges(),function(nt){var yt=pt.edge(nt.v,nt.w)||{weight:0,minlen:1},Pt=vt.edge(nt);pt.setEdge(nt.v,nt.w,{weight:yt.weight+Pt.weight,minlen:Math.max(yt.minlen,Pt.minlen)})}),pt},asNonCompoundGraph:function x(vt){var pt=new g({multigraph:vt.isMultigraph()}).setGraph(vt.graph());return p.forEach(vt.nodes(),function(nt){vt.children(nt).length||pt.setNode(nt,vt.node(nt))}),p.forEach(vt.edges(),function(nt){pt.setEdge(nt,vt.edge(nt))}),pt},successorWeights:function I(vt){var pt=p.map(vt.nodes(),function(nt){var yt={};return p.forEach(vt.outEdges(nt),function(Pt){yt[Pt.w]=(yt[Pt.w]||0)+vt.edge(Pt).weight}),yt});return p.zipObject(vt.nodes(),pt)},predecessorWeights:function k(vt){var pt=p.map(vt.nodes(),function(nt){var yt={};return p.forEach(vt.inEdges(nt),function(Pt){yt[Pt.v]=(yt[Pt.v]||0)+vt.edge(Pt).weight}),yt});return p.zipObject(vt.nodes(),pt)},intersectRect:function M(vt,pt){var ne,te,nt=vt.x,yt=vt.y,Pt=pt.x-nt,Ft=pt.y-yt,C=vt.width/2,jt=vt.height/2;if(!Pt&&!Ft)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Ft)*C>Math.abs(Pt)*jt?(Ft<0&&(jt=-jt),ne=jt*Pt/Ft,te=jt):(Pt<0&&(C=-C),ne=C,te=C*Ft/Pt),{x:nt+ne,y:yt+te}},buildLayerMatrix:function B(vt){var pt=p.map(p.range(et(vt)+1),function(){return[]});return p.forEach(vt.nodes(),function(nt){var yt=vt.node(nt),Pt=yt.rank;p.isUndefined(Pt)||(pt[Pt][yt.order]=nt)}),pt},normalizeRanks:function H(vt){var pt=p.min(p.map(vt.nodes(),function(nt){return vt.node(nt).rank}));p.forEach(vt.nodes(),function(nt){var yt=vt.node(nt);p.has(yt,"rank")&&(yt.rank-=pt)})},removeEmptyRanks:function O(vt){var pt=p.min(p.map(vt.nodes(),function(Ft){return vt.node(Ft).rank})),nt=[];p.forEach(vt.nodes(),function(Ft){var C=vt.node(Ft).rank-pt;nt[C]||(nt[C]=[]),nt[C].push(Ft)});var yt=0,Pt=vt.graph().nodeRankFactor;p.forEach(nt,function(Ft,C){p.isUndefined(Ft)&&C%Pt!=0?--yt:yt&&p.forEach(Ft,function(jt){vt.node(jt).rank+=yt})})},addBorderNode:function X(vt,pt,nt,yt){var Pt={width:0,height:0};return arguments.length>=4&&(Pt.rank=nt,Pt.order=yt),w(vt,"border",Pt,pt)},maxRank:et,partition:function ct(vt,pt){var nt={lhs:[],rhs:[]};return p.forEach(vt,function(yt){pt(yt)?nt.lhs.push(yt):nt.rhs.push(yt)}),nt},time:function i(vt,pt){var nt=p.now();try{return pt()}finally{console.log(vt+" time: "+(p.now()-nt)+"ms")}},notime:function st(vt,pt){return pt()}}},28126:P=>{P.exports="0.8.5"},85510:(P,W,f)=>{var p=f(51838);P.exports={Graph:p.Graph,json:f(21088),alg:f(83430),version:p.version}},86730:(P,W,f)=>{var p=f(79138);P.exports=function g(w){var I,E={},x=[];function k(M){p.has(E,M)||(E[M]=!0,I.push(M),p.each(w.successors(M),k),p.each(w.predecessors(M),k))}return p.each(w.nodes(),function(M){I=[],k(M),I.length&&x.push(I)}),x}},22163:(P,W,f)=>{var p=f(79138);function w(E,x,I,k,M,B){p.has(k,x)||(k[x]=!0,I||B.push(x),p.each(M(x),function(H){w(E,H,I,k,M,B)}),I&&B.push(x))}P.exports=function g(E,x,I){p.isArray(x)||(x=[x]);var k=(E.isDirected()?E.successors:E.neighbors).bind(E),M=[],B={};return p.each(x,function(H){if(!E.hasNode(H))throw new Error("Graph does not have node: "+H);w(E,H,"post"===I,B,k,M)}),M}},25668:(P,W,f)=>{var p=f(61718),g=f(79138);P.exports=function w(E,x,I){return g.transform(E.nodes(),function(k,M){k[M]=p(E,M,x,I)},{})}},61718:(P,W,f)=>{var p=f(79138),g=f(31919);P.exports=function E(I,k,M,B){return function x(I,k,M,B){var X,et,H={},O=new g,ct=function(i){var st=i.v!==X?i.v:i.w,vt=H[st],pt=M(i),nt=et.distance+pt;if(pt<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+pt);nt<vt.distance&&(vt.distance=nt,vt.predecessor=X,O.decrease(st,nt))};for(I.nodes().forEach(function(i){var st=i===k?0:Number.POSITIVE_INFINITY;H[i]={distance:st},O.add(i,st)});O.size()>0&&(X=O.removeMin(),(et=H[X]).distance!==Number.POSITIVE_INFINITY);)B(X).forEach(ct);return H}(I,String(k),M||w,B||function(H){return I.outEdges(H)})};var w=p.constant(1)},9611:(P,W,f)=>{var p=f(79138),g=f(73585);P.exports=function w(E){return p.filter(g(E),function(x){return x.length>1||1===x.length&&E.hasEdge(x[0],x[0])})}},22881:(P,W,f)=>{var p=f(79138);P.exports=function w(x,I,k){return function E(x,I,k){var M={},B=x.nodes();return B.forEach(function(H){M[H]={},M[H][H]={distance:0},B.forEach(function(O){H!==O&&(M[H][O]={distance:Number.POSITIVE_INFINITY})}),k(H).forEach(function(O){var X=O.v===H?O.w:O.v,et=I(O);M[H][X]={distance:et,predecessor:H}})}),B.forEach(function(H){var O=M[H];B.forEach(function(X){var et=M[X];B.forEach(function(ct){var st=O[ct],vt=et[ct],pt=et[H].distance+st.distance;pt<vt.distance&&(vt.distance=pt,vt.predecessor=st.predecessor)})})}),M}(x,I||g,k||function(M){return x.outEdges(M)})};var g=p.constant(1)},83430:(P,W,f)=>{P.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(P,W,f)=>{var p=f(52180);P.exports=function g(w){try{p(w)}catch(E){if(E instanceof p.CycleException)return!1;throw E}return!0}},46694:(P,W,f)=>{var p=f(22163);P.exports=function g(w,E){return p(w,E,"post")}},5330:(P,W,f)=>{var p=f(22163);P.exports=function g(w,E){return p(w,E,"pre")}},46823:(P,W,f)=>{var p=f(79138),g=f(66568),w=f(31919);P.exports=function E(x,I){var H,k=new g,M={},B=new w;function O(et){var ct=et.v===H?et.w:et.v,i=B.priority(ct);if(void 0!==i){var st=I(et);st<i&&(M[ct]=H,B.decrease(ct,st))}}if(0===x.nodeCount())return k;p.each(x.nodes(),function(et){B.add(et,Number.POSITIVE_INFINITY),k.setNode(et)}),B.decrease(x.nodes()[0],0);for(var X=!1;B.size()>0;){if(H=B.removeMin(),p.has(M,H))k.setEdge(H,M[H]);else{if(X)throw new Error("Input graph is not connected: "+x);X=!0}x.nodeEdges(H).forEach(O)}return k}},73585:(P,W,f)=>{var p=f(79138);P.exports=function g(w){var E=0,x=[],I={},k=[];function M(B){var H=I[B]={onStack:!0,lowlink:E,index:E++};if(x.push(B),w.successors(B).forEach(function(et){p.has(I,et)?I[et].onStack&&(H.lowlink=Math.min(H.lowlink,I[et].index)):(M(et),H.lowlink=Math.min(H.lowlink,I[et].lowlink))}),H.lowlink===H.index){var X,O=[];do{X=x.pop(),I[X].onStack=!1,O.push(X)}while(B!==X);k.push(O)}}return w.nodes().forEach(function(B){p.has(I,B)||M(B)}),k}},52180:(P,W,f)=>{var p=f(79138);function g(E){var x={},I={},k=[];if(p.each(E.sinks(),function M(B){if(p.has(I,B))throw new w;p.has(x,B)||(I[B]=!0,x[B]=!0,p.each(E.predecessors(B),M),delete I[B],k.push(B))}),p.size(x)!==E.nodeCount())throw new w;return k}function w(){}P.exports=g,g.CycleException=w,w.prototype=new Error},31919:(P,W,f)=>{var p=f(79138);function g(){this._arr=[],this._keyIndices={}}P.exports=g,g.prototype.size=function(){return this._arr.length},g.prototype.keys=function(){return this._arr.map(function(w){return w.key})},g.prototype.has=function(w){return p.has(this._keyIndices,w)},g.prototype.priority=function(w){var E=this._keyIndices[w];if(void 0!==E)return this._arr[E].priority},g.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},g.prototype.add=function(w,E){var x=this._keyIndices;if(w=String(w),!p.has(x,w)){var I=this._arr,k=I.length;return x[w]=k,I.push({key:w,priority:E}),this._decrease(k),!0}return!1},g.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var w=this._arr.pop();return delete this._keyIndices[w.key],this._heapify(0),w.key},g.prototype.decrease=function(w,E){var x=this._keyIndices[w];if(E>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+w+" Old: "+this._arr[x].priority+" New: "+E);this._arr[x].priority=E,this._decrease(x)},g.prototype._heapify=function(w){var E=this._arr,x=2*w,I=x+1,k=w;x<E.length&&(k=E[x].priority<E[k].priority?x:k,I<E.length&&(k=E[I].priority<E[k].priority?I:k),k!==w&&(this._swap(w,k),this._heapify(k)))},g.prototype._decrease=function(w){for(var I,E=this._arr,x=E[w].priority;0!==w&&!(E[I=w>>1].priority<x);)this._swap(w,I),w=I},g.prototype._swap=function(w,E){var x=this._arr,I=this._keyIndices,k=x[w],M=x[E];x[w]=M,x[E]=k,I[M.key]=w,I[k.key]=E}},66568:(P,W,f)=>{"use strict";var p=f(79138);P.exports=x;var w="\0";function x(O){this._isDirected=!p.has(O,"directed")||O.directed,this._isMultigraph=!!p.has(O,"multigraph")&&O.multigraph,this._isCompound=!!p.has(O,"compound")&&O.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[w]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function I(O,X){O[X]?O[X]++:O[X]=1}function k(O,X){--O[X]||delete O[X]}function M(O,X,et,ct){var i=""+X,st=""+et;if(!O&&i>st){var vt=i;i=st,st=vt}return i+"\x01"+st+"\x01"+(p.isUndefined(ct)?"\0":ct)}function B(O,X,et,ct){var i=""+X,st=""+et;if(!O&&i>st){var vt=i;i=st,st=vt}var pt={v:i,w:st};return ct&&(pt.name=ct),pt}function H(O,X){return M(O,X.v,X.w,X.name)}x.prototype._nodeCount=0,x.prototype._edgeCount=0,x.prototype.isDirected=function(){return this._isDirected},x.prototype.isMultigraph=function(){return this._isMultigraph},x.prototype.isCompound=function(){return this._isCompound},x.prototype.setGraph=function(O){return this._label=O,this},x.prototype.graph=function(){return this._label},x.prototype.setDefaultNodeLabel=function(O){return p.isFunction(O)||(O=p.constant(O)),this._defaultNodeLabelFn=O,this},x.prototype.nodeCount=function(){return this._nodeCount},x.prototype.nodes=function(){return p.keys(this._nodes)},x.prototype.sources=function(){var O=this;return p.filter(this.nodes(),function(X){return p.isEmpty(O._in[X])})},x.prototype.sinks=function(){var O=this;return p.filter(this.nodes(),function(X){return p.isEmpty(O._out[X])})},x.prototype.setNodes=function(O,X){var et=arguments,ct=this;return p.each(O,function(i){et.length>1?ct.setNode(i,X):ct.setNode(i)}),this},x.prototype.setNode=function(O,X){return p.has(this._nodes,O)?(arguments.length>1&&(this._nodes[O]=X),this):(this._nodes[O]=arguments.length>1?X:this._defaultNodeLabelFn(O),this._isCompound&&(this._parent[O]=w,this._children[O]={},this._children[w][O]=!0),this._in[O]={},this._preds[O]={},this._out[O]={},this._sucs[O]={},++this._nodeCount,this)},x.prototype.node=function(O){return this._nodes[O]},x.prototype.hasNode=function(O){return p.has(this._nodes,O)},x.prototype.removeNode=function(O){var X=this;if(p.has(this._nodes,O)){var et=function(ct){X.removeEdge(X._edgeObjs[ct])};delete this._nodes[O],this._isCompound&&(this._removeFromParentsChildList(O),delete this._parent[O],p.each(this.children(O),function(ct){X.setParent(ct)}),delete this._children[O]),p.each(p.keys(this._in[O]),et),delete this._in[O],delete this._preds[O],p.each(p.keys(this._out[O]),et),delete this._out[O],delete this._sucs[O],--this._nodeCount}return this},x.prototype.setParent=function(O,X){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(X))X=w;else{for(var et=X+="";!p.isUndefined(et);et=this.parent(et))if(et===O)throw new Error("Setting "+X+" as parent of "+O+" would create a cycle");this.setNode(X)}return this.setNode(O),this._removeFromParentsChildList(O),this._parent[O]=X,this._children[X][O]=!0,this},x.prototype._removeFromParentsChildList=function(O){delete this._children[this._parent[O]][O]},x.prototype.parent=function(O){if(this._isCompound){var X=this._parent[O];if(X!==w)return X}},x.prototype.children=function(O){if(p.isUndefined(O)&&(O=w),this._isCompound){var X=this._children[O];if(X)return p.keys(X)}else{if(O===w)return this.nodes();if(this.hasNode(O))return[]}},x.prototype.predecessors=function(O){var X=this._preds[O];if(X)return p.keys(X)},x.prototype.successors=function(O){var X=this._sucs[O];if(X)return p.keys(X)},x.prototype.neighbors=function(O){var X=this.predecessors(O);if(X)return p.union(X,this.successors(O))},x.prototype.isLeaf=function(O){return 0===(this.isDirected()?this.successors(O):this.neighbors(O)).length},x.prototype.filterNodes=function(O){var X=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});X.setGraph(this.graph());var et=this;p.each(this._nodes,function(st,vt){O(vt)&&X.setNode(vt,st)}),p.each(this._edgeObjs,function(st){X.hasNode(st.v)&&X.hasNode(st.w)&&X.setEdge(st,et.edge(st))});var ct={};function i(st){var vt=et.parent(st);return void 0===vt||X.hasNode(vt)?(ct[st]=vt,vt):vt in ct?ct[vt]:i(vt)}return this._isCompound&&p.each(X.nodes(),function(st){X.setParent(st,i(st))}),X},x.prototype.setDefaultEdgeLabel=function(O){return p.isFunction(O)||(O=p.constant(O)),this._defaultEdgeLabelFn=O,this},x.prototype.edgeCount=function(){return this._edgeCount},x.prototype.edges=function(){return p.values(this._edgeObjs)},x.prototype.setPath=function(O,X){var et=this,ct=arguments;return p.reduce(O,function(i,st){return ct.length>1?et.setEdge(i,st,X):et.setEdge(i,st),st}),this},x.prototype.setEdge=function(){var O,X,et,ct,i=!1,st=arguments[0];"object"==typeof st&&null!==st&&"v"in st?(O=st.v,X=st.w,et=st.name,2===arguments.length&&(ct=arguments[1],i=!0)):(O=st,X=arguments[1],et=arguments[3],arguments.length>2&&(ct=arguments[2],i=!0)),O=""+O,X=""+X,p.isUndefined(et)||(et=""+et);var vt=M(this._isDirected,O,X,et);if(p.has(this._edgeLabels,vt))return i&&(this._edgeLabels[vt]=ct),this;if(!p.isUndefined(et)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(O),this.setNode(X),this._edgeLabels[vt]=i?ct:this._defaultEdgeLabelFn(O,X,et);var pt=B(this._isDirected,O,X,et);return O=pt.v,X=pt.w,Object.freeze(pt),this._edgeObjs[vt]=pt,I(this._preds[X],O),I(this._sucs[O],X),this._in[X][vt]=pt,this._out[O][vt]=pt,this._edgeCount++,this},x.prototype.edge=function(O,X,et){var ct=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,O,X,et);return this._edgeLabels[ct]},x.prototype.hasEdge=function(O,X,et){var ct=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,O,X,et);return p.has(this._edgeLabels,ct)},x.prototype.removeEdge=function(O,X,et){var ct=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,O,X,et),i=this._edgeObjs[ct];return i&&(O=i.v,X=i.w,delete this._edgeLabels[ct],delete this._edgeObjs[ct],k(this._preds[X],O),k(this._sucs[O],X),delete this._in[X][ct],delete this._out[O][ct],this._edgeCount--),this},x.prototype.inEdges=function(O,X){var et=this._in[O];if(et){var ct=p.values(et);return X?p.filter(ct,function(i){return i.v===X}):ct}},x.prototype.outEdges=function(O,X){var et=this._out[O];if(et){var ct=p.values(et);return X?p.filter(ct,function(i){return i.w===X}):ct}},x.prototype.nodeEdges=function(O,X){var et=this.inEdges(O,X);if(et)return et.concat(this.outEdges(O,X))}},51838:(P,W,f)=>{P.exports={Graph:f(66568),version:f(75089)}},21088:(P,W,f)=>{var p=f(79138),g=f(66568);function E(k){return p.map(k.nodes(),function(M){var B=k.node(M),H=k.parent(M),O={v:M};return p.isUndefined(B)||(O.value=B),p.isUndefined(H)||(O.parent=H),O})}function x(k){return p.map(k.edges(),function(M){var B=k.edge(M),H={v:M.v,w:M.w};return p.isUndefined(M.name)||(H.name=M.name),p.isUndefined(B)||(H.value=B),H})}P.exports={write:function w(k){var M={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:E(k),edges:x(k)};return p.isUndefined(k.graph())||(M.value=p.clone(k.graph())),M},read:function I(k){var M=new g(k.options).setGraph(k.value);return p.each(k.nodes,function(B){M.setNode(B.v,B.value),B.parent&&M.setParent(B.v,B.parent)}),p.each(k.edges,function(B){M.setEdge({v:B.v,w:B.w,name:B.name},B.value)}),M}}},79138:(P,W,f)=>{var p;try{p={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(g){}p||(p=window._),P.exports=p},75089:P=>{P.exports="2.1.8"},58259:function(P,W){var p;!function(g,w){"use strict";"object"==typeof P.exports?P.exports=g.document?w(g,!0):function(E){if(!E.document)throw new Error("jQuery requires a window with a document");return w(E)}:w(g)}("undefined"!=typeof window?window:this,function(g,w){"use strict";var E=[],x=Object.getPrototypeOf,I=E.slice,k=E.flat?function(l){return E.flat.call(l)}:function(l){return E.concat.apply([],l)},M=E.push,B=E.indexOf,H={},O=H.toString,X=H.hasOwnProperty,et=X.toString,ct=et.call(Object),i={},st=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},vt=function(d){return null!=d&&d===d.window},pt=g.document,nt={type:!0,src:!0,nonce:!0,noModule:!0};function yt(l,d,y){var _,R,F=(y=y||pt).createElement("script");if(F.text=l,d)for(_ in nt)(R=d[_]||d.getAttribute&&d.getAttribute(_))&&F.setAttribute(_,R);y.head.appendChild(F).parentNode.removeChild(F)}function Pt(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?H[O.call(l)]||"object":typeof l}var C=function(l,d){return new C.fn.init(l,d)};function jt(l){var d=!!l&&"length"in l&&l.length,y=Pt(l);return!st(l)&&!vt(l)&&("array"===y||0===d||"number"==typeof d&&d>0&&d-1 in l)}C.fn=C.prototype={jquery:"3.6.0",constructor:C,length:0,toArray:function(){return I.call(this)},get:function(l){return null==l?I.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=C.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return C.each(this,l)},map:function(l){return this.pushStack(C.map(this,function(d,y){return l.call(d,y,d)}))},slice:function(){return this.pushStack(I.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,y=+l+(l<0?d:0);return this.pushStack(y>=0&&y<d?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:E.sort,splice:E.splice},C.extend=C.fn.extend=function(){var l,d,y,_,R,F,Y=arguments[0]||{},lt=1,ut=arguments.length,At=!1;for("boolean"==typeof Y&&(At=Y,Y=arguments[lt]||{},lt++),"object"!=typeof Y&&!st(Y)&&(Y={}),lt===ut&&(Y=this,lt--);lt<ut;lt++)if(null!=(l=arguments[lt]))for(d in l)_=l[d],"__proto__"!==d&&Y!==_&&(At&&_&&(C.isPlainObject(_)||(R=Array.isArray(_)))?(y=Y[d],F=R&&!Array.isArray(y)?[]:R||C.isPlainObject(y)?y:{},R=!1,Y[d]=C.extend(At,F,_)):void 0!==_&&(Y[d]=_));return Y},C.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,y;return!(!l||"[object Object]"!==O.call(l)||(d=x(l))&&("function"!=typeof(y=X.call(d,"constructor")&&d.constructor)||et.call(y)!==ct))},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,y){yt(l,{nonce:d&&d.nonce},y)},each:function(l,d){var y,_=0;if(jt(l))for(y=l.length;_<y&&!1!==d.call(l[_],_,l[_]);_++);else for(_ in l)if(!1===d.call(l[_],_,l[_]))break;return l},makeArray:function(l,d){var y=d||[];return null!=l&&(jt(Object(l))?C.merge(y,"string"==typeof l?[l]:l):M.call(y,l)),y},inArray:function(l,d,y){return null==d?-1:B.call(d,l,y)},merge:function(l,d){for(var y=+d.length,_=0,R=l.length;_<y;_++)l[R++]=d[_];return l.length=R,l},grep:function(l,d,y){for(var R=[],F=0,Y=l.length,lt=!y;F<Y;F++)!d(l[F],F)!==lt&&R.push(l[F]);return R},map:function(l,d,y){var _,R,F=0,Y=[];if(jt(l))for(_=l.length;F<_;F++)null!=(R=d(l[F],F,y))&&Y.push(R);else for(F in l)null!=(R=d(l[F],F,y))&&Y.push(R);return k(Y)},guid:1,support:i}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=E[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){H["[object "+d+"]"]=d.toLowerCase()});var ne=function(l){var d,y,_,R,F,Y,lt,ut,At,Ht,re,Rt,Xt,Se,en,Ie,Jn,Zn,Lr,Ge="sizzle"+1*new Date,De=l.document,ar=0,Nn=0,nr=Eo(),Yt=Eo(),$r=Eo(),sr=Eo(),So=function(Z,dt){return Z===dt&&(re=!0),0},pi={}.hasOwnProperty,cr=[],Pi=cr.pop,ei=cr.push,Ji=cr.push,Ua=cr.slice,ao=function(Z,dt){for(var _t=0,Kt=Z.length;_t<Kt;_t++)if(Z[_t]===dt)return _t;return-1},as="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",In="[\\x20\\t\\r\\n\\f]",so="(?:\\\\[\\da-fA-F]{1,6}"+In+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Er="\\["+In+"*("+so+")(?:"+In+"*([*^$|!~]?=)"+In+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+so+"))|)"+In+"*\\]",za=":("+so+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Er+")*)|.*)\\)|)",ss=new RegExp(In+"+","g"),Yr=new RegExp("^"+In+"+|((?:^|[^\\\\])(?:\\\\.)*)"+In+"+$","g"),ni=new RegExp("^"+In+"*,"+In+"*"),ma=new RegExp("^"+In+"*([>+~]|"+In+")"+In+"*"),Js=new RegExp(In+"|>"),Bu=new RegExp(za),Hu=new RegExp("^"+so+"$"),Ts={ID:new RegExp("^#("+so+")"),CLASS:new RegExp("^\\.("+so+")"),TAG:new RegExp("^("+so+"|[*])"),ATTR:new RegExp("^"+Er),PSEUDO:new RegExp("^"+za),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+In+"*(even|odd|(([+-]|)(\\d*)n|)"+In+"*(?:([+-]|)"+In+"*(\\d+)|))"+In+"*\\)|)","i"),bool:new RegExp("^(?:"+as+")$","i"),needsContext:new RegExp("^"+In+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+In+"*((?:-\\d)?\\d*)"+In+"*\\)|)(?=[^-]|$)","i")},ju=/HTML$/i,zl=/^(?:input|select|textarea|button)$/i,Gl=/^h\d$/i,Qi=/^[^{]+\{\s*\[native \w/,Wl=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,To=/[+~]/,Fi=new RegExp("\\\\[\\da-fA-F]{1,6}"+In+"?|\\\\([^\\r\\n\\f])","g"),Vi=function(Z,dt){var _t="0x"+Z.slice(1)-65536;return dt||(_t<0?String.fromCharCode(_t+65536):String.fromCharCode(_t>>10|55296,1023&_t|56320))},uo=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,us=function(Z,dt){return dt?"\0"===Z?"\ufffd":Z.slice(0,-1)+"\\"+Z.charCodeAt(Z.length-1).toString(16)+" ":"\\"+Z},Fr=function(){Rt()},$l=Ce(function(Z){return!0===Z.disabled&&"fieldset"===Z.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Ji.apply(cr=Ua.call(De.childNodes),De.childNodes)}catch(Z){Ji={apply:cr.length?function(dt,_t){ei.apply(dt,Ua.call(_t))}:function(dt,_t){for(var Kt=dt.length,Mt=0;dt[Kt++]=_t[Mt++];);dt.length=Kt-1}}}function qn(Z,dt,_t,Kt){var Mt,Jt,Bt,fe,ge,Be,Pe,We=dt&&dt.ownerDocument,xn=dt?dt.nodeType:9;if(_t=_t||[],"string"!=typeof Z||!Z||1!==xn&&9!==xn&&11!==xn)return _t;if(!Kt&&(Rt(dt),dt=dt||Xt,en)){if(11!==xn&&(ge=Wl.exec(Z)))if(Mt=ge[1]){if(9===xn){if(!(Bt=dt.getElementById(Mt)))return _t;if(Bt.id===Mt)return _t.push(Bt),_t}else if(We&&(Bt=We.getElementById(Mt))&&Lr(dt,Bt)&&Bt.id===Mt)return _t.push(Bt),_t}else{if(ge[2])return Ji.apply(_t,dt.getElementsByTagName(Z)),_t;if((Mt=ge[3])&&y.getElementsByClassName&&dt.getElementsByClassName)return Ji.apply(_t,dt.getElementsByClassName(Mt)),_t}if(y.qsa&&!sr[Z+" "]&&(!Ie||!Ie.test(Z))&&(1!==xn||"object"!==dt.nodeName.toLowerCase())){if(Pe=Z,We=dt,1===xn&&(Js.test(Z)||ma.test(Z))){for(((We=To.test(Z)&&wt(dt.parentNode)||dt)!==dt||!y.scope)&&((fe=dt.getAttribute("id"))?fe=fe.replace(uo,us):dt.setAttribute("id",fe=Ge)),Jt=(Be=Y(Z)).length;Jt--;)Be[Jt]=(fe?"#"+fe:":scope")+" "+Vt(Be[Jt]);Pe=Be.join(",")}try{return Ji.apply(_t,We.querySelectorAll(Pe)),_t}catch(qe){sr(Z,!0)}finally{fe===Ge&&dt.removeAttribute("id")}}}return ut(Z.replace(Yr,"$1"),dt,_t,Kt)}function Eo(){var Z=[];return function dt(_t,Kt){return Z.push(_t+" ")>_.cacheLength&&delete dt[Z.shift()],dt[_t+" "]=Kt}}function xr(Z){return Z[Ge]=!0,Z}function Bi(Z){var dt=Xt.createElement("fieldset");try{return!!Z(dt)}catch(_t){return!1}finally{dt.parentNode&&dt.parentNode.removeChild(dt),dt=null}}function Ve(Z,dt){for(var _t=Z.split("|"),Kt=_t.length;Kt--;)_.attrHandle[_t[Kt]]=dt}function gi(Z,dt){var _t=dt&&Z,Kt=_t&&1===Z.nodeType&&1===dt.nodeType&&Z.sourceIndex-dt.sourceIndex;if(Kt)return Kt;if(_t)for(;_t=_t.nextSibling;)if(_t===dt)return-1;return Z?1:-1}function Es(Z){return function(dt){return"input"===dt.nodeName.toLowerCase()&&dt.type===Z}}function Hi(Z){return function(dt){var _t=dt.nodeName.toLowerCase();return("input"===_t||"button"===_t)&&dt.type===Z}}function Ps(Z){return function(dt){return"form"in dt?dt.parentNode&&!1===dt.disabled?"label"in dt?"label"in dt.parentNode?dt.parentNode.disabled===Z:dt.disabled===Z:dt.isDisabled===Z||dt.isDisabled!==!Z&&$l(dt)===Z:dt.disabled===Z:"label"in dt&&dt.disabled===Z}}function vi(Z){return xr(function(dt){return dt=+dt,xr(function(_t,Kt){for(var Mt,Jt=Z([],_t.length,dt),Bt=Jt.length;Bt--;)_t[Mt=Jt[Bt]]&&(_t[Mt]=!(Kt[Mt]=_t[Mt]))})})}function wt(Z){return Z&&void 0!==Z.getElementsByTagName&&Z}for(d in y=qn.support={},F=qn.isXML=function(Z){var _t=Z&&(Z.ownerDocument||Z).documentElement;return!ju.test(Z&&Z.namespaceURI||_t&&_t.nodeName||"HTML")},Rt=qn.setDocument=function(Z){var dt,_t,Kt=Z?Z.ownerDocument||Z:De;return Kt==Xt||9!==Kt.nodeType||!Kt.documentElement||(Se=(Xt=Kt).documentElement,en=!F(Xt),De!=Xt&&(_t=Xt.defaultView)&&_t.top!==_t&&(_t.addEventListener?_t.addEventListener("unload",Fr,!1):_t.attachEvent&&_t.attachEvent("onunload",Fr)),y.scope=Bi(function(Mt){return Se.appendChild(Mt).appendChild(Xt.createElement("div")),void 0!==Mt.querySelectorAll&&!Mt.querySelectorAll(":scope fieldset div").length}),y.attributes=Bi(function(Mt){return Mt.className="i",!Mt.getAttribute("className")}),y.getElementsByTagName=Bi(function(Mt){return Mt.appendChild(Xt.createComment("")),!Mt.getElementsByTagName("*").length}),y.getElementsByClassName=Qi.test(Xt.getElementsByClassName),y.getById=Bi(function(Mt){return Se.appendChild(Mt).id=Ge,!Xt.getElementsByName||!Xt.getElementsByName(Ge).length}),y.getById?(_.filter.ID=function(Mt){var Jt=Mt.replace(Fi,Vi);return function(Bt){return Bt.getAttribute("id")===Jt}},_.find.ID=function(Mt,Jt){if(void 0!==Jt.getElementById&&en){var Bt=Jt.getElementById(Mt);return Bt?[Bt]:[]}}):(_.filter.ID=function(Mt){var Jt=Mt.replace(Fi,Vi);return function(Bt){var fe=void 0!==Bt.getAttributeNode&&Bt.getAttributeNode("id");return fe&&fe.value===Jt}},_.find.ID=function(Mt,Jt){if(void 0!==Jt.getElementById&&en){var Bt,fe,ge,Be=Jt.getElementById(Mt);if(Be){if((Bt=Be.getAttributeNode("id"))&&Bt.value===Mt)return[Be];for(ge=Jt.getElementsByName(Mt),fe=0;Be=ge[fe++];)if((Bt=Be.getAttributeNode("id"))&&Bt.value===Mt)return[Be]}return[]}}),_.find.TAG=y.getElementsByTagName?function(Mt,Jt){return void 0!==Jt.getElementsByTagName?Jt.getElementsByTagName(Mt):y.qsa?Jt.querySelectorAll(Mt):void 0}:function(Mt,Jt){var Bt,fe=[],ge=0,Be=Jt.getElementsByTagName(Mt);if("*"===Mt){for(;Bt=Be[ge++];)1===Bt.nodeType&&fe.push(Bt);return fe}return Be},_.find.CLASS=y.getElementsByClassName&&function(Mt,Jt){if(void 0!==Jt.getElementsByClassName&&en)return Jt.getElementsByClassName(Mt)},Jn=[],Ie=[],(y.qsa=Qi.test(Xt.querySelectorAll))&&(Bi(function(Mt){var Jt;Se.appendChild(Mt).innerHTML="<a id='"+Ge+"'></a><select id='"+Ge+"-\r\\' msallowcapture=''><option selected=''></option></select>",Mt.querySelectorAll("[msallowcapture^='']").length&&Ie.push("[*^$]="+In+"*(?:''|\"\")"),Mt.querySelectorAll("[selected]").length||Ie.push("\\["+In+"*(?:value|"+as+")"),Mt.querySelectorAll("[id~="+Ge+"-]").length||Ie.push("~="),(Jt=Xt.createElement("input")).setAttribute("name",""),Mt.appendChild(Jt),Mt.querySelectorAll("[name='']").length||Ie.push("\\["+In+"*name"+In+"*="+In+"*(?:''|\"\")"),Mt.querySelectorAll(":checked").length||Ie.push(":checked"),Mt.querySelectorAll("a#"+Ge+"+*").length||Ie.push(".#.+[+~]"),Mt.querySelectorAll("\\\f"),Ie.push("[\\r\\n\\f]")}),Bi(function(Mt){Mt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Jt=Xt.createElement("input");Jt.setAttribute("type","hidden"),Mt.appendChild(Jt).setAttribute("name","D"),Mt.querySelectorAll("[name=d]").length&&Ie.push("name"+In+"*[*^$|!~]?="),2!==Mt.querySelectorAll(":enabled").length&&Ie.push(":enabled",":disabled"),Se.appendChild(Mt).disabled=!0,2!==Mt.querySelectorAll(":disabled").length&&Ie.push(":enabled",":disabled"),Mt.querySelectorAll("*,:x"),Ie.push(",.*:")})),(y.matchesSelector=Qi.test(Zn=Se.matches||Se.webkitMatchesSelector||Se.mozMatchesSelector||Se.oMatchesSelector||Se.msMatchesSelector))&&Bi(function(Mt){y.disconnectedMatch=Zn.call(Mt,"*"),Zn.call(Mt,"[s!='']:x"),Jn.push("!=",za)}),Ie=Ie.length&&new RegExp(Ie.join("|")),Jn=Jn.length&&new RegExp(Jn.join("|")),dt=Qi.test(Se.compareDocumentPosition),Lr=dt||Qi.test(Se.contains)?function(Mt,Jt){var Bt=9===Mt.nodeType?Mt.documentElement:Mt,fe=Jt&&Jt.parentNode;return Mt===fe||!(!fe||1!==fe.nodeType||!(Bt.contains?Bt.contains(fe):Mt.compareDocumentPosition&&16&Mt.compareDocumentPosition(fe)))}:function(Mt,Jt){if(Jt)for(;Jt=Jt.parentNode;)if(Jt===Mt)return!0;return!1},So=dt?function(Mt,Jt){if(Mt===Jt)return re=!0,0;var Bt=!Mt.compareDocumentPosition-!Jt.compareDocumentPosition;return Bt||(1&(Bt=(Mt.ownerDocument||Mt)==(Jt.ownerDocument||Jt)?Mt.compareDocumentPosition(Jt):1)||!y.sortDetached&&Jt.compareDocumentPosition(Mt)===Bt?Mt==Xt||Mt.ownerDocument==De&&Lr(De,Mt)?-1:Jt==Xt||Jt.ownerDocument==De&&Lr(De,Jt)?1:Ht?ao(Ht,Mt)-ao(Ht,Jt):0:4&Bt?-1:1)}:function(Mt,Jt){if(Mt===Jt)return re=!0,0;var Bt,fe=0,ge=Mt.parentNode,Be=Jt.parentNode,Pe=[Mt],We=[Jt];if(!ge||!Be)return Mt==Xt?-1:Jt==Xt?1:ge?-1:Be?1:Ht?ao(Ht,Mt)-ao(Ht,Jt):0;if(ge===Be)return gi(Mt,Jt);for(Bt=Mt;Bt=Bt.parentNode;)Pe.unshift(Bt);for(Bt=Jt;Bt=Bt.parentNode;)We.unshift(Bt);for(;Pe[fe]===We[fe];)fe++;return fe?gi(Pe[fe],We[fe]):Pe[fe]==De?-1:We[fe]==De?1:0}),Xt},qn.matches=function(Z,dt){return qn(Z,null,null,dt)},qn.matchesSelector=function(Z,dt){if(Rt(Z),y.matchesSelector&&en&&!sr[dt+" "]&&(!Jn||!Jn.test(dt))&&(!Ie||!Ie.test(dt)))try{var _t=Zn.call(Z,dt);if(_t||y.disconnectedMatch||Z.document&&11!==Z.document.nodeType)return _t}catch(Kt){sr(dt,!0)}return qn(dt,Xt,null,[Z]).length>0},qn.contains=function(Z,dt){return(Z.ownerDocument||Z)!=Xt&&Rt(Z),Lr(Z,dt)},qn.attr=function(Z,dt){(Z.ownerDocument||Z)!=Xt&&Rt(Z);var _t=_.attrHandle[dt.toLowerCase()],Kt=_t&&pi.call(_.attrHandle,dt.toLowerCase())?_t(Z,dt,!en):void 0;return void 0!==Kt?Kt:y.attributes||!en?Z.getAttribute(dt):(Kt=Z.getAttributeNode(dt))&&Kt.specified?Kt.value:null},qn.escape=function(Z){return(Z+"").replace(uo,us)},qn.error=function(Z){throw new Error("Syntax error, unrecognized expression: "+Z)},qn.uniqueSort=function(Z){var dt,_t=[],Kt=0,Mt=0;if(re=!y.detectDuplicates,Ht=!y.sortStable&&Z.slice(0),Z.sort(So),re){for(;dt=Z[Mt++];)dt===Z[Mt]&&(Kt=_t.push(Mt));for(;Kt--;)Z.splice(_t[Kt],1)}return Ht=null,Z},R=qn.getText=function(Z){var dt,_t="",Kt=0,Mt=Z.nodeType;if(Mt){if(1===Mt||9===Mt||11===Mt){if("string"==typeof Z.textContent)return Z.textContent;for(Z=Z.firstChild;Z;Z=Z.nextSibling)_t+=R(Z)}else if(3===Mt||4===Mt)return Z.nodeValue}else for(;dt=Z[Kt++];)_t+=R(dt);return _t},(_=qn.selectors={cacheLength:50,createPseudo:xr,match:Ts,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Z){return Z[1]=Z[1].replace(Fi,Vi),Z[3]=(Z[3]||Z[4]||Z[5]||"").replace(Fi,Vi),"~="===Z[2]&&(Z[3]=" "+Z[3]+" "),Z.slice(0,4)},CHILD:function(Z){return Z[1]=Z[1].toLowerCase(),"nth"===Z[1].slice(0,3)?(Z[3]||qn.error(Z[0]),Z[4]=+(Z[4]?Z[5]+(Z[6]||1):2*("even"===Z[3]||"odd"===Z[3])),Z[5]=+(Z[7]+Z[8]||"odd"===Z[3])):Z[3]&&qn.error(Z[0]),Z},PSEUDO:function(Z){var dt,_t=!Z[6]&&Z[2];return Ts.CHILD.test(Z[0])?null:(Z[3]?Z[2]=Z[4]||Z[5]||"":_t&&Bu.test(_t)&&(dt=Y(_t,!0))&&(dt=_t.indexOf(")",_t.length-dt)-_t.length)&&(Z[0]=Z[0].slice(0,dt),Z[2]=_t.slice(0,dt)),Z.slice(0,3))}},filter:{TAG:function(Z){var dt=Z.replace(Fi,Vi).toLowerCase();return"*"===Z?function(){return!0}:function(_t){return _t.nodeName&&_t.nodeName.toLowerCase()===dt}},CLASS:function(Z){var dt=nr[Z+" "];return dt||(dt=new RegExp("(^|"+In+")"+Z+"("+In+"|$)"))&&nr(Z,function(_t){return dt.test("string"==typeof _t.className&&_t.className||void 0!==_t.getAttribute&&_t.getAttribute("class")||"")})},ATTR:function(Z,dt,_t){return function(Kt){var Mt=qn.attr(Kt,Z);return null==Mt?"!="===dt:!dt||(Mt+="","="===dt?Mt===_t:"!="===dt?Mt!==_t:"^="===dt?_t&&0===Mt.indexOf(_t):"*="===dt?_t&&Mt.indexOf(_t)>-1:"$="===dt?_t&&Mt.slice(-_t.length)===_t:"~="===dt?(" "+Mt.replace(ss," ")+" ").indexOf(_t)>-1:"|="===dt&&(Mt===_t||Mt.slice(0,_t.length+1)===_t+"-"))}},CHILD:function(Z,dt,_t,Kt,Mt){var Jt="nth"!==Z.slice(0,3),Bt="last"!==Z.slice(-4),fe="of-type"===dt;return 1===Kt&&0===Mt?function(ge){return!!ge.parentNode}:function(ge,Be,Pe){var We,xn,qe,Le,an,jn,Vn=Jt!==Bt?"nextSibling":"previousSibling",Un=ge.parentNode,pr=fe&&ge.nodeName.toLowerCase(),lo=!Pe&&!fe,fr=!1;if(Un){if(Jt){for(;Vn;){for(Le=ge;Le=Le[Vn];)if(fe?Le.nodeName.toLowerCase()===pr:1===Le.nodeType)return!1;jn=Vn="only"===Z&&!jn&&"nextSibling"}return!0}if(jn=[Bt?Un.firstChild:Un.lastChild],Bt&&lo){for(fr=(an=(We=(xn=(qe=(Le=Un)[Ge]||(Le[Ge]={}))[Le.uniqueID]||(qe[Le.uniqueID]={}))[Z]||[])[0]===ar&&We[1])&&We[2],Le=an&&Un.childNodes[an];Le=++an&&Le&&Le[Vn]||(fr=an=0)||jn.pop();)if(1===Le.nodeType&&++fr&&Le===ge){xn[Z]=[ar,an,fr];break}}else if(lo&&(fr=an=(We=(xn=(qe=(Le=ge)[Ge]||(Le[Ge]={}))[Le.uniqueID]||(qe[Le.uniqueID]={}))[Z]||[])[0]===ar&&We[1]),!1===fr)for(;(Le=++an&&Le&&Le[Vn]||(fr=an=0)||jn.pop())&&((fe?Le.nodeName.toLowerCase()!==pr:1!==Le.nodeType)||!++fr||(lo&&((xn=(qe=Le[Ge]||(Le[Ge]={}))[Le.uniqueID]||(qe[Le.uniqueID]={}))[Z]=[ar,fr]),Le!==ge)););return(fr-=Mt)===Kt||fr%Kt==0&&fr/Kt>=0}}},PSEUDO:function(Z,dt){var _t,Kt=_.pseudos[Z]||_.setFilters[Z.toLowerCase()]||qn.error("unsupported pseudo: "+Z);return Kt[Ge]?Kt(dt):Kt.length>1?(_t=[Z,Z,"",dt],_.setFilters.hasOwnProperty(Z.toLowerCase())?xr(function(Mt,Jt){for(var Bt,fe=Kt(Mt,dt),ge=fe.length;ge--;)Mt[Bt=ao(Mt,fe[ge])]=!(Jt[Bt]=fe[ge])}):function(Mt){return Kt(Mt,0,_t)}):Kt}},pseudos:{not:xr(function(Z){var dt=[],_t=[],Kt=lt(Z.replace(Yr,"$1"));return Kt[Ge]?xr(function(Mt,Jt,Bt,fe){for(var ge,Be=Kt(Mt,null,fe,[]),Pe=Mt.length;Pe--;)(ge=Be[Pe])&&(Mt[Pe]=!(Jt[Pe]=ge))}):function(Mt,Jt,Bt){return dt[0]=Mt,Kt(dt,null,Bt,_t),dt[0]=null,!_t.pop()}}),has:xr(function(Z){return function(dt){return qn(Z,dt).length>0}}),contains:xr(function(Z){return Z=Z.replace(Fi,Vi),function(dt){return(dt.textContent||R(dt)).indexOf(Z)>-1}}),lang:xr(function(Z){return Hu.test(Z||"")||qn.error("unsupported lang: "+Z),Z=Z.replace(Fi,Vi).toLowerCase(),function(dt){var _t;do{if(_t=en?dt.lang:dt.getAttribute("xml:lang")||dt.getAttribute("lang"))return(_t=_t.toLowerCase())===Z||0===_t.indexOf(Z+"-")}while((dt=dt.parentNode)&&1===dt.nodeType);return!1}}),target:function(Z){var dt=l.location&&l.location.hash;return dt&&dt.slice(1)===Z.id},root:function(Z){return Z===Se},focus:function(Z){return Z===Xt.activeElement&&(!Xt.hasFocus||Xt.hasFocus())&&!!(Z.type||Z.href||~Z.tabIndex)},enabled:Ps(!1),disabled:Ps(!0),checked:function(Z){var dt=Z.nodeName.toLowerCase();return"input"===dt&&!!Z.checked||"option"===dt&&!!Z.selected},selected:function(Z){return!0===Z.selected},empty:function(Z){for(Z=Z.firstChild;Z;Z=Z.nextSibling)if(Z.nodeType<6)return!1;return!0},parent:function(Z){return!_.pseudos.empty(Z)},header:function(Z){return Gl.test(Z.nodeName)},input:function(Z){return zl.test(Z.nodeName)},button:function(Z){var dt=Z.nodeName.toLowerCase();return"input"===dt&&"button"===Z.type||"button"===dt},text:function(Z){var dt;return"input"===Z.nodeName.toLowerCase()&&"text"===Z.type&&(null==(dt=Z.getAttribute("type"))||"text"===dt.toLowerCase())},first:vi(function(){return[0]}),last:vi(function(Z,dt){return[dt-1]}),eq:vi(function(Z,dt,_t){return[_t<0?_t+dt:_t]}),even:vi(function(Z,dt){for(var _t=0;_t<dt;_t+=2)Z.push(_t);return Z}),odd:vi(function(Z,dt){for(var _t=1;_t<dt;_t+=2)Z.push(_t);return Z}),lt:vi(function(Z,dt,_t){for(var Kt=_t<0?_t+dt:_t>dt?dt:_t;--Kt>=0;)Z.push(Kt);return Z}),gt:vi(function(Z,dt,_t){for(var Kt=_t<0?_t+dt:_t;++Kt<dt;)Z.push(Kt);return Z})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[d]=Es(d);for(d in{submit:!0,reset:!0})_.pseudos[d]=Hi(d);function Wt(){}function Vt(Z){for(var dt=0,_t=Z.length,Kt="";dt<_t;dt++)Kt+=Z[dt].value;return Kt}function Ce(Z,dt,_t){var Kt=dt.dir,Mt=dt.next,Jt=Mt||Kt,Bt=_t&&"parentNode"===Jt,fe=Nn++;return dt.first?function(ge,Be,Pe){for(;ge=ge[Kt];)if(1===ge.nodeType||Bt)return Z(ge,Be,Pe);return!1}:function(ge,Be,Pe){var We,xn,qe,Le=[ar,fe];if(Pe){for(;ge=ge[Kt];)if((1===ge.nodeType||Bt)&&Z(ge,Be,Pe))return!0}else for(;ge=ge[Kt];)if(1===ge.nodeType||Bt)if(xn=(qe=ge[Ge]||(ge[Ge]={}))[ge.uniqueID]||(qe[ge.uniqueID]={}),Mt&&Mt===ge.nodeName.toLowerCase())ge=ge[Kt]||ge;else{if((We=xn[Jt])&&We[0]===ar&&We[1]===fe)return Le[2]=We[2];if(xn[Jt]=Le,Le[2]=Z(ge,Be,Pe))return!0}return!1}}function ve(Z){return Z.length>1?function(dt,_t,Kt){for(var Mt=Z.length;Mt--;)if(!Z[Mt](dt,_t,Kt))return!1;return!0}:Z[0]}function ke(Z,dt,_t,Kt,Mt){for(var Jt,Bt=[],fe=0,ge=Z.length,Be=null!=dt;fe<ge;fe++)(Jt=Z[fe])&&(!_t||_t(Jt,Kt,Mt))&&(Bt.push(Jt),Be&&dt.push(fe));return Bt}function Yn(Z,dt,_t,Kt,Mt,Jt){return Kt&&!Kt[Ge]&&(Kt=Yn(Kt)),Mt&&!Mt[Ge]&&(Mt=Yn(Mt,Jt)),xr(function(Bt,fe,ge,Be){var Pe,We,xn,qe=[],Le=[],an=fe.length,jn=Bt||function Je(Z,dt,_t){for(var Kt=0,Mt=dt.length;Kt<Mt;Kt++)qn(Z,dt[Kt],_t);return _t}(dt||"*",ge.nodeType?[ge]:ge,[]),Vn=!Z||!Bt&&dt?jn:ke(jn,qe,Z,ge,Be),Un=_t?Mt||(Bt?Z:an||Kt)?[]:fe:Vn;if(_t&&_t(Vn,Un,ge,Be),Kt)for(Pe=ke(Un,Le),Kt(Pe,[],ge,Be),We=Pe.length;We--;)(xn=Pe[We])&&(Un[Le[We]]=!(Vn[Le[We]]=xn));if(Bt){if(Mt||Z){if(Mt){for(Pe=[],We=Un.length;We--;)(xn=Un[We])&&Pe.push(Vn[We]=xn);Mt(null,Un=[],Pe,Be)}for(We=Un.length;We--;)(xn=Un[We])&&(Pe=Mt?ao(Bt,xn):qe[We])>-1&&(Bt[Pe]=!(fe[Pe]=xn))}}else Un=ke(Un===fe?Un.splice(an,Un.length):Un),Mt?Mt(null,fe,Un,Be):Ji.apply(fe,Un)})}function Ga(Z){for(var dt,_t,Kt,Mt=Z.length,Jt=_.relative[Z[0].type],Bt=Jt||_.relative[" "],fe=Jt?1:0,ge=Ce(function(We){return We===dt},Bt,!0),Be=Ce(function(We){return ao(dt,We)>-1},Bt,!0),Pe=[function(We,xn,qe){var Le=!Jt&&(qe||xn!==At)||((dt=xn).nodeType?ge(We,xn,qe):Be(We,xn,qe));return dt=null,Le}];fe<Mt;fe++)if(_t=_.relative[Z[fe].type])Pe=[Ce(ve(Pe),_t)];else{if((_t=_.filter[Z[fe].type].apply(null,Z[fe].matches))[Ge]){for(Kt=++fe;Kt<Mt&&!_.relative[Z[Kt].type];Kt++);return Yn(fe>1&&ve(Pe),fe>1&&Vt(Z.slice(0,fe-1).concat({value:" "===Z[fe-2].type?"*":""})).replace(Yr,"$1"),_t,fe<Kt&&Ga(Z.slice(fe,Kt)),Kt<Mt&&Ga(Z=Z.slice(Kt)),Kt<Mt&&Vt(Z))}Pe.push(_t)}return ve(Pe)}return Wt.prototype=_.filters=_.pseudos,_.setFilters=new Wt,Y=qn.tokenize=function(Z,dt){var _t,Kt,Mt,Jt,Bt,fe,ge,Be=Yt[Z+" "];if(Be)return dt?0:Be.slice(0);for(Bt=Z,fe=[],ge=_.preFilter;Bt;){for(Jt in(!_t||(Kt=ni.exec(Bt)))&&(Kt&&(Bt=Bt.slice(Kt[0].length)||Bt),fe.push(Mt=[])),_t=!1,(Kt=ma.exec(Bt))&&(_t=Kt.shift(),Mt.push({value:_t,type:Kt[0].replace(Yr," ")}),Bt=Bt.slice(_t.length)),_.filter)(Kt=Ts[Jt].exec(Bt))&&(!ge[Jt]||(Kt=ge[Jt](Kt)))&&(_t=Kt.shift(),Mt.push({value:_t,type:Jt,matches:Kt}),Bt=Bt.slice(_t.length));if(!_t)break}return dt?Bt.length:Bt?qn.error(Z):Yt(Z,fe).slice(0)},lt=qn.compile=function(Z,dt){var _t,Kt=[],Mt=[],Jt=$r[Z+" "];if(!Jt){for(dt||(dt=Y(Z)),_t=dt.length;_t--;)(Jt=Ga(dt[_t]))[Ge]?Kt.push(Jt):Mt.push(Jt);Jt=$r(Z,function Yl(Z,dt){var _t=dt.length>0,Kt=Z.length>0,Mt=function(Jt,Bt,fe,ge,Be){var Pe,We,xn,qe=0,Le="0",an=Jt&&[],jn=[],Vn=At,Un=Jt||Kt&&_.find.TAG("*",Be),pr=ar+=null==Vn?1:Math.random()||.1,lo=Un.length;for(Be&&(At=Bt==Xt||Bt||Be);Le!==lo&&null!=(Pe=Un[Le]);Le++){if(Kt&&Pe){for(We=0,!Bt&&Pe.ownerDocument!=Xt&&(Rt(Pe),fe=!en);xn=Z[We++];)if(xn(Pe,Bt||Xt,fe)){ge.push(Pe);break}Be&&(ar=pr)}_t&&((Pe=!xn&&Pe)&&qe--,Jt&&an.push(Pe))}if(qe+=Le,_t&&Le!==qe){for(We=0;xn=dt[We++];)xn(an,jn,Bt,fe);if(Jt){if(qe>0)for(;Le--;)an[Le]||jn[Le]||(jn[Le]=Pi.call(ge));jn=ke(jn)}Ji.apply(ge,jn),Be&&!Jt&&jn.length>0&&qe+dt.length>1&&qn.uniqueSort(ge)}return Be&&(ar=pr,At=Vn),an};return _t?xr(Mt):Mt}(Mt,Kt)),Jt.selector=Z}return Jt},ut=qn.select=function(Z,dt,_t,Kt){var Mt,Jt,Bt,fe,ge,Be="function"==typeof Z&&Z,Pe=!Kt&&Y(Z=Be.selector||Z);if(_t=_t||[],1===Pe.length){if((Jt=Pe[0]=Pe[0].slice(0)).length>2&&"ID"===(Bt=Jt[0]).type&&9===dt.nodeType&&en&&_.relative[Jt[1].type]){if(!(dt=(_.find.ID(Bt.matches[0].replace(Fi,Vi),dt)||[])[0]))return _t;Be&&(dt=dt.parentNode),Z=Z.slice(Jt.shift().value.length)}for(Mt=Ts.needsContext.test(Z)?0:Jt.length;Mt--&&!_.relative[fe=(Bt=Jt[Mt]).type];)if((ge=_.find[fe])&&(Kt=ge(Bt.matches[0].replace(Fi,Vi),To.test(Jt[0].type)&&wt(dt.parentNode)||dt))){if(Jt.splice(Mt,1),!(Z=Kt.length&&Vt(Jt)))return Ji.apply(_t,Kt),_t;break}}return(Be||lt(Z,Pe))(Kt,dt,!en,_t,!dt||To.test(Z)&&wt(dt.parentNode)||dt),_t},y.sortStable=Ge.split("").sort(So).join("")===Ge,y.detectDuplicates=!!re,Rt(),y.sortDetached=Bi(function(Z){return 1&Z.compareDocumentPosition(Xt.createElement("fieldset"))}),Bi(function(Z){return Z.innerHTML="<a href='#'></a>","#"===Z.firstChild.getAttribute("href")})||Ve("type|href|height|width",function(Z,dt,_t){if(!_t)return Z.getAttribute(dt,"type"===dt.toLowerCase()?1:2)}),(!y.attributes||!Bi(function(Z){return Z.innerHTML="<input/>",Z.firstChild.setAttribute("value",""),""===Z.firstChild.getAttribute("value")}))&&Ve("value",function(Z,dt,_t){if(!_t&&"input"===Z.nodeName.toLowerCase())return Z.defaultValue}),Bi(function(Z){return null==Z.getAttribute("disabled")})||Ve(as,function(Z,dt,_t){var Kt;if(!_t)return!0===Z[dt]?dt.toLowerCase():(Kt=Z.getAttributeNode(dt))&&Kt.specified?Kt.value:null}),qn}(g);C.find=ne,C.expr=ne.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=ne.uniqueSort,C.text=ne.getText,C.isXMLDoc=ne.isXML,C.contains=ne.contains,C.escapeSelector=ne.escape;var te=function(l,d,y){for(var _=[],R=void 0!==y;(l=l[d])&&9!==l.nodeType;)if(1===l.nodeType){if(R&&C(l).is(y))break;_.push(l)}return _},ae=function(l,d){for(var y=[];l;l=l.nextSibling)1===l.nodeType&&l!==d&&y.push(l);return y},ue=C.expr.match.needsContext;function he(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var Ee=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Qe(l,d,y){return st(d)?C.grep(l,function(_,R){return!!d.call(_,R,_)!==y}):d.nodeType?C.grep(l,function(_){return _===d!==y}):"string"!=typeof d?C.grep(l,function(_){return B.call(d,_)>-1!==y}):C.filter(d,l,y)}C.filter=function(l,d,y){var _=d[0];return y&&(l=":not("+l+")"),1===d.length&&1===_.nodeType?C.find.matchesSelector(_,l)?[_]:[]:C.find.matches(l,C.grep(d,function(R){return 1===R.nodeType}))},C.fn.extend({find:function(l){var d,y,_=this.length,R=this;if("string"!=typeof l)return this.pushStack(C(l).filter(function(){for(d=0;d<_;d++)if(C.contains(R[d],this))return!0}));for(y=this.pushStack([]),d=0;d<_;d++)C.find(l,R[d],y);return _>1?C.uniqueSort(y):y},filter:function(l){return this.pushStack(Qe(this,l||[],!1))},not:function(l){return this.pushStack(Qe(this,l||[],!0))},is:function(l){return!!Qe(this,"string"==typeof l&&ue.test(l)?C(l):l||[],!1).length}});var fn,Re=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,hr=C.fn.init=function(l,d,y){var _,R;if(!l)return this;if(y=y||fn,"string"==typeof l){if(!(_="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:Re.exec(l))||!_[1]&&d)return!d||d.jquery?(d||y).find(l):this.constructor(d).find(l);if(_[1]){if(C.merge(this,C.parseHTML(_[1],(d=d instanceof C?d[0]:d)&&d.nodeType?d.ownerDocument||d:pt,!0)),Ee.test(_[1])&&C.isPlainObject(d))for(_ in d)st(this[_])?this[_](d[_]):this.attr(_,d[_]);return this}return(R=pt.getElementById(_[2]))&&(this[0]=R,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):st(l)?void 0!==y.ready?y.ready(l):l(C):C.makeArray(l,this)};hr.prototype=C.fn,fn=C(pt);var Hr=/^(?:parents|prev(?:Until|All))/,jr={children:!0,contents:!0,next:!0,prev:!0};function zt(l,d){for(;(l=l[d])&&1!==l.nodeType;);return l}C.fn.extend({has:function(l){var d=C(l,this),y=d.length;return this.filter(function(){for(var _=0;_<y;_++)if(C.contains(this,d[_]))return!0})},closest:function(l,d){var y,_=0,R=this.length,F=[],Y="string"!=typeof l&&C(l);if(!ue.test(l))for(;_<R;_++)for(y=this[_];y&&y!==d;y=y.parentNode)if(y.nodeType<11&&(Y?Y.index(y)>-1:1===y.nodeType&&C.find.matchesSelector(y,l))){F.push(y);break}return this.pushStack(F.length>1?C.uniqueSort(F):F)},index:function(l){return l?"string"==typeof l?B.call(C(l),this[0]):B.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(l,d))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),C.each({parent:function(l){var d=l.parentNode;return d&&11!==d.nodeType?d:null},parents:function(l){return te(l,"parentNode")},parentsUntil:function(l,d,y){return te(l,"parentNode",y)},next:function(l){return zt(l,"nextSibling")},prev:function(l){return zt(l,"previousSibling")},nextAll:function(l){return te(l,"nextSibling")},prevAll:function(l){return te(l,"previousSibling")},nextUntil:function(l,d,y){return te(l,"nextSibling",y)},prevUntil:function(l,d,y){return te(l,"previousSibling",y)},siblings:function(l){return ae((l.parentNode||{}).firstChild,l)},children:function(l){return ae(l.firstChild)},contents:function(l){return null!=l.contentDocument&&x(l.contentDocument)?l.contentDocument:(he(l,"template")&&(l=l.content||l),C.merge([],l.childNodes))}},function(l,d){C.fn[l]=function(y,_){var R=C.map(this,d,y);return"Until"!==l.slice(-5)&&(_=y),_&&"string"==typeof _&&(R=C.filter(_,R)),this.length>1&&(jr[l]||C.uniqueSort(R),Hr.test(l)&&R.reverse()),this.pushStack(R)}});var Cn=/[^\x20\t\r\n\f]+/g;function Bn(l){return l}function Ut(l){throw l}function Et(l,d,y,_){var R;try{l&&st(R=l.promise)?R.call(l).done(d).fail(y):l&&st(R=l.then)?R.call(l,d,y):d.apply(void 0,[l].slice(_))}catch(F){y.apply(void 0,[F])}}C.Callbacks=function(l){l="string"==typeof l?function mr(l){var d={};return C.each(l.match(Cn)||[],function(y,_){d[_]=!0}),d}(l):C.extend({},l);var d,y,_,R,F=[],Y=[],lt=-1,ut=function(){for(R=R||l.once,_=d=!0;Y.length;lt=-1)for(y=Y.shift();++lt<F.length;)!1===F[lt].apply(y[0],y[1])&&l.stopOnFalse&&(lt=F.length,y=!1);l.memory||(y=!1),d=!1,R&&(F=y?[]:"")},At={add:function(){return F&&(y&&!d&&(lt=F.length-1,Y.push(y)),function Ht(re){C.each(re,function(Rt,Xt){st(Xt)?(!l.unique||!At.has(Xt))&&F.push(Xt):Xt&&Xt.length&&"string"!==Pt(Xt)&&Ht(Xt)})}(arguments),y&&!d&&ut()),this},remove:function(){return C.each(arguments,function(Ht,re){for(var Rt;(Rt=C.inArray(re,F,Rt))>-1;)F.splice(Rt,1),Rt<=lt&&lt--}),this},has:function(Ht){return Ht?C.inArray(Ht,F)>-1:F.length>0},empty:function(){return F&&(F=[]),this},disable:function(){return R=Y=[],F=y="",this},disabled:function(){return!F},lock:function(){return R=Y=[],!y&&!d&&(F=y=""),this},locked:function(){return!!R},fireWith:function(Ht,re){return R||(re=[Ht,(re=re||[]).slice?re.slice():re],Y.push(re),d||ut()),this},fire:function(){return At.fireWith(this,arguments),this},fired:function(){return!!_}};return At},C.extend({Deferred:function(l){var d=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],y="pending",_={state:function(){return y},always:function(){return R.done(arguments).fail(arguments),this},catch:function(F){return _.then(null,F)},pipe:function(){var F=arguments;return C.Deferred(function(Y){C.each(d,function(lt,ut){var At=st(F[ut[4]])&&F[ut[4]];R[ut[1]](function(){var Ht=At&&At.apply(this,arguments);Ht&&st(Ht.promise)?Ht.promise().progress(Y.notify).done(Y.resolve).fail(Y.reject):Y[ut[0]+"With"](this,At?[Ht]:arguments)})}),F=null}).promise()},then:function(F,Y,lt){var ut=0;function At(Ht,re,Rt,Xt){return function(){var Se=this,en=arguments,Ie=function(){var Zn,Lr;if(!(Ht<ut)){if((Zn=Rt.apply(Se,en))===re.promise())throw new TypeError("Thenable self-resolution");st(Lr=Zn&&("object"==typeof Zn||"function"==typeof Zn)&&Zn.then)?Xt?Lr.call(Zn,At(ut,re,Bn,Xt),At(ut,re,Ut,Xt)):(ut++,Lr.call(Zn,At(ut,re,Bn,Xt),At(ut,re,Ut,Xt),At(ut,re,Bn,re.notifyWith))):(Rt!==Bn&&(Se=void 0,en=[Zn]),(Xt||re.resolveWith)(Se,en))}},Jn=Xt?Ie:function(){try{Ie()}catch(Zn){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(Zn,Jn.stackTrace),Ht+1>=ut&&(Rt!==Ut&&(Se=void 0,en=[Zn]),re.rejectWith(Se,en))}};Ht?Jn():(C.Deferred.getStackHook&&(Jn.stackTrace=C.Deferred.getStackHook()),g.setTimeout(Jn))}}return C.Deferred(function(Ht){d[0][3].add(At(0,Ht,st(lt)?lt:Bn,Ht.notifyWith)),d[1][3].add(At(0,Ht,st(F)?F:Bn)),d[2][3].add(At(0,Ht,st(Y)?Y:Ut))}).promise()},promise:function(F){return null!=F?C.extend(F,_):_}},R={};return C.each(d,function(F,Y){var lt=Y[2],ut=Y[5];_[Y[1]]=lt.add,ut&&lt.add(function(){y=ut},d[3-F][2].disable,d[3-F][3].disable,d[0][2].lock,d[0][3].lock),lt.add(Y[3].fire),R[Y[0]]=function(){return R[Y[0]+"With"](this===R?void 0:this,arguments),this},R[Y[0]+"With"]=lt.fireWith}),_.promise(R),l&&l.call(R,R),R},when:function(l){var d=arguments.length,y=d,_=Array(y),R=I.call(arguments),F=C.Deferred(),Y=function(lt){return function(ut){_[lt]=this,R[lt]=arguments.length>1?I.call(arguments):ut,--d||F.resolveWith(_,R)}};if(d<=1&&(Et(l,F.done(Y(y)).resolve,F.reject,!d),"pending"===F.state()||st(R[y]&&R[y].then)))return F.then();for(;y--;)Et(R[y],Y(y),F.reject);return F.promise()}});var ie=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(l,d){g.console&&g.console.warn&&l&&ie.test(l.name)&&g.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},C.readyException=function(l){g.setTimeout(function(){throw l})};var pe=C.Deferred();function Te(){pt.removeEventListener("DOMContentLoaded",Te),g.removeEventListener("load",Te),C.ready()}C.fn.ready=function(l){return pe.then(l).catch(function(d){C.readyException(d)}),this},C.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--C.readyWait:C.isReady)||(C.isReady=!0,!(!0!==l&&--C.readyWait>0)&&pe.resolveWith(pt,[C]))}}),C.ready.then=pe.then,"complete"===pt.readyState||"loading"!==pt.readyState&&!pt.documentElement.doScroll?g.setTimeout(C.ready):(pt.addEventListener("DOMContentLoaded",Te),g.addEventListener("load",Te));var hn=function(l,d,y,_,R,F,Y){var lt=0,ut=l.length,At=null==y;if("object"===Pt(y))for(lt in R=!0,y)hn(l,d,lt,y[lt],!0,F,Y);else if(void 0!==_&&(R=!0,st(_)||(Y=!0),At&&(Y?(d.call(l,_),d=null):(At=d,d=function(Ht,re,Rt){return At.call(C(Ht),Rt)})),d))for(;lt<ut;lt++)d(l[lt],y,Y?_:_.call(l[lt],lt,d(l[lt],y)));return R?l:At?d.call(l):ut?d(l[0],y):F},Rn=/^-ms-/,rr=/-([a-z])/g;function ki(l,d){return d.toUpperCase()}function ln(l){return l.replace(Rn,"ms-").replace(rr,ki)}var Ze=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function D(){this.expando=C.expando+D.uid++}D.uid=1,D.prototype={cache:function(l){var d=l[this.expando];return d||(d={},Ze(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,y){var _,R=this.cache(l);if("string"==typeof d)R[ln(d)]=y;else for(_ in d)R[ln(_)]=d[_];return R},get:function(l,d){return void 0===d?this.cache(l):l[this.expando]&&l[this.expando][ln(d)]},access:function(l,d,y){return void 0===d||d&&"string"==typeof d&&void 0===y?this.get(l,d):(this.set(l,d,y),void 0!==y?y:d)},remove:function(l,d){var y,_=l[this.expando];if(void 0!==_){if(void 0!==d)for((y=(d=Array.isArray(d)?d.map(ln):(d=ln(d))in _?[d]:d.match(Cn)||[]).length);y--;)delete _[d[y]];(void 0===d||C.isEmptyObject(_))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return void 0!==d&&!C.isEmptyObject(d)}};var z=new D,rt=new D,xt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$t=/[A-Z]/g;function xe(l,d,y){var _;if(void 0===y&&1===l.nodeType)if(_="data-"+d.replace($t,"-$&").toLowerCase(),"string"==typeof(y=l.getAttribute(_))){try{y=function Qt(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:xt.test(l)?JSON.parse(l):l)}(y)}catch(R){}rt.set(l,d,y)}else y=void 0;return y}C.extend({hasData:function(l){return rt.hasData(l)||z.hasData(l)},data:function(l,d,y){return rt.access(l,d,y)},removeData:function(l,d){rt.remove(l,d)},_data:function(l,d,y){return z.access(l,d,y)},_removeData:function(l,d){z.remove(l,d)}}),C.fn.extend({data:function(l,d){var y,_,R,F=this[0],Y=F&&F.attributes;if(void 0===l){if(this.length&&(R=rt.get(F),1===F.nodeType&&!z.get(F,"hasDataAttrs"))){for(y=Y.length;y--;)Y[y]&&0===(_=Y[y].name).indexOf("data-")&&(_=ln(_.slice(5)),xe(F,_,R[_]));z.set(F,"hasDataAttrs",!0)}return R}return"object"==typeof l?this.each(function(){rt.set(this,l)}):hn(this,function(lt){var ut;if(F&&void 0===lt)return void 0!==(ut=rt.get(F,l))||void 0!==(ut=xe(F,l))?ut:void 0;this.each(function(){rt.set(this,l,lt)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){rt.remove(this,l)})}}),C.extend({queue:function(l,d,y){var _;if(l)return _=z.get(l,d=(d||"fx")+"queue"),y&&(!_||Array.isArray(y)?_=z.access(l,d,C.makeArray(y)):_.push(y)),_||[]},dequeue:function(l,d){var y=C.queue(l,d=d||"fx"),_=y.length,R=y.shift(),F=C._queueHooks(l,d);"inprogress"===R&&(R=y.shift(),_--),R&&("fx"===d&&y.unshift("inprogress"),delete F.stop,R.call(l,function(){C.dequeue(l,d)},F)),!_&&F&&F.empty.fire()},_queueHooks:function(l,d){var y=d+"queueHooks";return z.get(l,y)||z.access(l,y,{empty:C.Callbacks("once memory").add(function(){z.remove(l,[d+"queue",y])})})}}),C.fn.extend({queue:function(l,d){var y=2;return"string"!=typeof l&&(d=l,l="fx",y--),arguments.length<y?C.queue(this[0],l):void 0===d?this:this.each(function(){var _=C.queue(this,l,d);C._queueHooks(this,l),"fx"===l&&"inprogress"!==_[0]&&C.dequeue(this,l)})},dequeue:function(l){return this.each(function(){C.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var y,_=1,R=C.Deferred(),F=this,Y=this.length,lt=function(){--_||R.resolveWith(F,[F])};for("string"!=typeof l&&(d=l,l=void 0),l=l||"fx";Y--;)(y=z.get(F[Y],l+"queueHooks"))&&y.empty&&(_++,y.empty.add(lt));return lt(),R.promise(d)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ke=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),pn=["Top","Right","Bottom","Left"],yn=pt.documentElement,gn=function(l){return C.contains(l.ownerDocument,l)},ir={composed:!0};yn.getRootNode&&(gn=function(l){return C.contains(l.ownerDocument,l)||l.getRootNode(ir)===l.ownerDocument});var tr=function(l,d){return"none"===(l=d||l).style.display||""===l.style.display&&gn(l)&&"none"===C.css(l,"display")};function ui(l,d,y,_){var R,F,Y=20,lt=_?function(){return _.cur()}:function(){return C.css(l,d,"")},ut=lt(),At=y&&y[3]||(C.cssNumber[d]?"":"px"),Ht=l.nodeType&&(C.cssNumber[d]||"px"!==At&&+ut)&&Ke.exec(C.css(l,d));if(Ht&&Ht[3]!==At){for(At=At||Ht[3],Ht=+(ut/=2)||1;Y--;)C.style(l,d,Ht+At),(1-F)*(1-(F=lt()/ut||.5))<=0&&(Y=0),Ht/=F;C.style(l,d,(Ht*=2)+At),y=y||[]}return y&&(Ht=+Ht||+ut||0,R=y[1]?Ht+(y[1]+1)*y[2]:+y[2],_&&(_.unit=At,_.start=Ht,_.end=R)),R}var zn={};function or(l){var d,y=l.ownerDocument,_=l.nodeName,R=zn[_];return R||(d=y.body.appendChild(y.createElement(_)),R=C.css(d,"display"),d.parentNode.removeChild(d),"none"===R&&(R="block"),zn[_]=R,R)}function er(l,d){for(var y,_,R=[],F=0,Y=l.length;F<Y;F++)(_=l[F]).style&&(y=_.style.display,d?("none"===y&&(R[F]=z.get(_,"display")||null,R[F]||(_.style.display="")),""===_.style.display&&tr(_)&&(R[F]=or(_))):"none"!==y&&(R[F]="none",z.set(_,"display",y)));for(F=0;F<Y;F++)null!=R[F]&&(l[F].style.display=R[F]);return l}C.fn.extend({show:function(){return er(this,!0)},hide:function(){return er(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){tr(this)?C(this).show():C(this).hide()})}});var d,y,lr=/^(?:checkbox|radio)$/i,Mr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,li=/^$|^module$|\/(?:java|ecma)script/i;d=pt.createDocumentFragment().appendChild(pt.createElement("div")),(y=pt.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),d.appendChild(y),i.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",i.option=!!d.lastChild;var Cr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function yr(l,d){var y;return y=void 0!==l.getElementsByTagName?l.getElementsByTagName(d||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(d||"*"):[],void 0===d||d&&he(l,d)?C.merge([l],y):y}function Oo(l,d){for(var y=0,_=l.length;y<_;y++)z.set(l[y],"globalEval",!d||z.get(d[y],"globalEval"))}Cr.tbody=Cr.tfoot=Cr.colgroup=Cr.caption=Cr.thead,Cr.th=Cr.td,i.option||(Cr.optgroup=Cr.option=[1,"<select multiple='multiple'>","</select>"]);var rs=/<|&#?\w+;/;function mo(l,d,y,_,R){for(var F,Y,lt,ut,At,Ht,re=d.createDocumentFragment(),Rt=[],Xt=0,Se=l.length;Xt<Se;Xt++)if((F=l[Xt])||0===F)if("object"===Pt(F))C.merge(Rt,F.nodeType?[F]:F);else if(rs.test(F)){for(Y=Y||re.appendChild(d.createElement("div")),lt=(Mr.exec(F)||["",""])[1].toLowerCase(),Y.innerHTML=(ut=Cr[lt]||Cr._default)[1]+C.htmlPrefilter(F)+ut[2],Ht=ut[0];Ht--;)Y=Y.lastChild;C.merge(Rt,Y.childNodes),(Y=re.firstChild).textContent=""}else Rt.push(d.createTextNode(F));for(re.textContent="",Xt=0;F=Rt[Xt++];)if(_&&C.inArray(F,_)>-1)R&&R.push(F);else if(At=gn(F),Y=yr(re.appendChild(F),"script"),At&&Oo(Y),y)for(Ht=0;F=Y[Ht++];)li.test(F.type||"")&&y.push(F);return re}var sa=/^([^.]*)(?:\.(.+)|)/;function Ur(){return!0}function Si(){return!1}function Pn(l,d){return l===function Ra(){try{return pt.activeElement}catch(l){}}()==("focus"===d)}function Ro(l,d,y,_,R,F){var Y,lt;if("object"==typeof d){for(lt in"string"!=typeof y&&(_=_||y,y=void 0),d)Ro(l,lt,y,_,d[lt],F);return l}if(null==_&&null==R?(R=y,_=y=void 0):null==R&&("string"==typeof y?(R=_,_=void 0):(R=_,_=y,y=void 0)),!1===R)R=Si;else if(!R)return l;return 1===F&&(Y=R,R=function(ut){return C().off(ut),Y.apply(this,arguments)},R.guid=Y.guid||(Y.guid=C.guid++)),l.each(function(){C.event.add(this,d,R,_,y)})}function yo(l,d,y){y?(z.set(l,d,!1),C.event.add(l,d,{namespace:!1,handler:function(_){var R,F,Y=z.get(this,d);if(1&_.isTrigger&&this[d]){if(Y.length)(C.event.special[d]||{}).delegateType&&_.stopPropagation();else if(Y=I.call(arguments),z.set(this,d,Y),R=y(this,d),this[d](),Y!==(F=z.get(this,d))||R?z.set(this,d,!1):F={},Y!==F)return _.stopImmediatePropagation(),_.preventDefault(),F&&F.value}else Y.length&&(z.set(this,d,{value:C.event.trigger(C.extend(Y[0],C.Event.prototype),Y.slice(1),this)}),_.stopImmediatePropagation())}})):void 0===z.get(l,d)&&C.event.add(l,d,Ur)}C.event={global:{},add:function(l,d,y,_,R){var F,Y,lt,ut,At,Ht,re,Rt,Xt,Se,en,Ie=z.get(l);if(Ze(l))for(y.handler&&(y=(F=y).handler,R=F.selector),R&&C.find.matchesSelector(yn,R),y.guid||(y.guid=C.guid++),(ut=Ie.events)||(ut=Ie.events=Object.create(null)),(Y=Ie.handle)||(Y=Ie.handle=function(Jn){return void 0!==C&&C.event.triggered!==Jn.type?C.event.dispatch.apply(l,arguments):void 0}),At=(d=(d||"").match(Cn)||[""]).length;At--;)Xt=en=(lt=sa.exec(d[At])||[])[1],Se=(lt[2]||"").split(".").sort(),Xt&&(re=C.event.special[Xt]||{},re=C.event.special[Xt=(R?re.delegateType:re.bindType)||Xt]||{},Ht=C.extend({type:Xt,origType:en,data:_,handler:y,guid:y.guid,selector:R,needsContext:R&&C.expr.match.needsContext.test(R),namespace:Se.join(".")},F),(Rt=ut[Xt])||((Rt=ut[Xt]=[]).delegateCount=0,(!re.setup||!1===re.setup.call(l,_,Se,Y))&&l.addEventListener&&l.addEventListener(Xt,Y)),re.add&&(re.add.call(l,Ht),Ht.handler.guid||(Ht.handler.guid=y.guid)),R?Rt.splice(Rt.delegateCount++,0,Ht):Rt.push(Ht),C.event.global[Xt]=!0)},remove:function(l,d,y,_,R){var F,Y,lt,ut,At,Ht,re,Rt,Xt,Se,en,Ie=z.hasData(l)&&z.get(l);if(Ie&&(ut=Ie.events)){for(At=(d=(d||"").match(Cn)||[""]).length;At--;)if(Xt=en=(lt=sa.exec(d[At])||[])[1],Se=(lt[2]||"").split(".").sort(),Xt){for(re=C.event.special[Xt]||{},Rt=ut[Xt=(_?re.delegateType:re.bindType)||Xt]||[],lt=lt[2]&&new RegExp("(^|\\.)"+Se.join("\\.(?:.*\\.|)")+"(\\.|$)"),Y=F=Rt.length;F--;)Ht=Rt[F],(R||en===Ht.origType)&&(!y||y.guid===Ht.guid)&&(!lt||lt.test(Ht.namespace))&&(!_||_===Ht.selector||"**"===_&&Ht.selector)&&(Rt.splice(F,1),Ht.selector&&Rt.delegateCount--,re.remove&&re.remove.call(l,Ht));Y&&!Rt.length&&((!re.teardown||!1===re.teardown.call(l,Se,Ie.handle))&&C.removeEvent(l,Xt,Ie.handle),delete ut[Xt])}else for(Xt in ut)C.event.remove(l,Xt+d[At],y,_,!0);C.isEmptyObject(ut)&&z.remove(l,"handle events")}},dispatch:function(l){var d,y,_,R,F,Y,lt=new Array(arguments.length),ut=C.event.fix(l),At=(z.get(this,"events")||Object.create(null))[ut.type]||[],Ht=C.event.special[ut.type]||{};for(lt[0]=ut,d=1;d<arguments.length;d++)lt[d]=arguments[d];if(ut.delegateTarget=this,!Ht.preDispatch||!1!==Ht.preDispatch.call(this,ut)){for(Y=C.event.handlers.call(this,ut,At),d=0;(R=Y[d++])&&!ut.isPropagationStopped();)for(ut.currentTarget=R.elem,y=0;(F=R.handlers[y++])&&!ut.isImmediatePropagationStopped();)(!ut.rnamespace||!1===F.namespace||ut.rnamespace.test(F.namespace))&&(ut.handleObj=F,ut.data=F.data,void 0!==(_=((C.event.special[F.origType]||{}).handle||F.handler).apply(R.elem,lt))&&!1===(ut.result=_)&&(ut.preventDefault(),ut.stopPropagation()));return Ht.postDispatch&&Ht.postDispatch.call(this,ut),ut.result}},handlers:function(l,d){var y,_,R,F,Y,lt=[],ut=d.delegateCount,At=l.target;if(ut&&At.nodeType&&!("click"===l.type&&l.button>=1))for(;At!==this;At=At.parentNode||this)if(1===At.nodeType&&("click"!==l.type||!0!==At.disabled)){for(F=[],Y={},y=0;y<ut;y++)void 0===Y[R=(_=d[y]).selector+" "]&&(Y[R]=_.needsContext?C(R,this).index(At)>-1:C.find(R,this,null,[At]).length),Y[R]&&F.push(_);F.length&&lt.push({elem:At,handlers:F})}return At=this,ut<d.length&&lt.push({elem:At,handlers:d.slice(ut)}),lt},addProp:function(l,d){Object.defineProperty(C.Event.prototype,l,{enumerable:!0,configurable:!0,get:st(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(y){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(l){return l[C.expando]?l:new C.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return lr.test(d.type)&&d.click&&he(d,"input")&&yo(d,"click",Ur),!1},trigger:function(l){var d=this||l;return lr.test(d.type)&&d.click&&he(d,"input")&&yo(d,"click"),!0},_default:function(l){var d=l.target;return lr.test(d.type)&&d.click&&he(d,"input")&&z.get(d,"click")||he(d,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},C.removeEvent=function(l,d,y){l.removeEventListener&&l.removeEventListener(d,y)},C.Event=function(l,d){if(!(this instanceof C.Event))return new C.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?Ur:Si,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&C.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Si,isPropagationStopped:Si,isImmediatePropagationStopped:Si,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Ur,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Ur,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Ur,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(l,d){C.event.special[l]={setup:function(){return yo(this,l,Pn),!1},trigger:function(){return yo(this,l),!0},_default:function(){return!0},delegateType:d}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){C.event.special[l]={delegateType:d,bindType:d,handle:function(y){var _,R=this,F=y.relatedTarget,Y=y.handleObj;return(!F||F!==R&&!C.contains(R,F))&&(y.type=Y.origType,_=Y.handler.apply(this,arguments),y.type=d),_}}}),C.fn.extend({on:function(l,d,y,_){return Ro(this,l,d,y,_)},one:function(l,d,y,_){return Ro(this,l,d,y,_,1)},off:function(l,d,y){var _,R;if(l&&l.preventDefault&&l.handleObj)return _=l.handleObj,C(l.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if("object"==typeof l){for(R in l)this.off(R,d,l[R]);return this}return(!1===d||"function"==typeof d)&&(y=d,d=void 0),!1===y&&(y=Si),this.each(function(){C.event.remove(this,l,y,d)})}});var No=/<script|<style|<link/i,rn=/checked\s*(?:[^=]|=\s*.checked.)/i,eo=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Na(l,d){return he(l,"table")&&he(11!==d.nodeType?d:d.firstChild,"tr")&&C(l).children("tbody")[0]||l}function xo(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Nr(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function Zr(l,d){var y,_,R,Y,lt,ut;if(1===d.nodeType){if(z.hasData(l)&&(ut=z.get(l).events))for(R in z.remove(d,"handle events"),ut)for(y=0,_=ut[R].length;y<_;y++)C.event.add(d,R,ut[R][y]);rt.hasData(l)&&(Y=rt.access(l),lt=C.extend({},Y),rt.set(d,lt))}}function Li(l,d){var y=d.nodeName.toLowerCase();"input"===y&&lr.test(l.type)?d.checked=l.checked:("input"===y||"textarea"===y)&&(d.defaultValue=l.defaultValue)}function zr(l,d,y,_){d=k(d);var R,F,Y,lt,ut,At,Ht=0,re=l.length,Rt=re-1,Xt=d[0],Se=st(Xt);if(Se||re>1&&"string"==typeof Xt&&!i.checkClone&&rn.test(Xt))return l.each(function(en){var Ie=l.eq(en);Se&&(d[0]=Xt.call(this,en,Ie.html())),zr(Ie,d,y,_)});if(re&&(F=(R=mo(d,l[0].ownerDocument,!1,l,_)).firstChild,1===R.childNodes.length&&(R=F),F||_)){for(lt=(Y=C.map(yr(R,"script"),xo)).length;Ht<re;Ht++)ut=R,Ht!==Rt&&(ut=C.clone(ut,!0,!0),lt&&C.merge(Y,yr(ut,"script"))),y.call(l[Ht],ut,Ht);if(lt)for(At=Y[Y.length-1].ownerDocument,C.map(Y,Nr),Ht=0;Ht<lt;Ht++)li.test((ut=Y[Ht]).type||"")&&!z.access(ut,"globalEval")&&C.contains(At,ut)&&(ut.src&&"module"!==(ut.type||"").toLowerCase()?C._evalUrl&&!ut.noModule&&C._evalUrl(ut.src,{nonce:ut.nonce||ut.getAttribute("nonce")},At):yt(ut.textContent.replace(eo,""),ut,At))}return l}function Sr(l,d,y){for(var _,R=d?C.filter(d,l):l,F=0;null!=(_=R[F]);F++)!y&&1===_.nodeType&&C.cleanData(yr(_)),_.parentNode&&(y&&gn(_)&&Oo(yr(_,"script")),_.parentNode.removeChild(_));return l}C.extend({htmlPrefilter:function(l){return l},clone:function(l,d,y){var _,R,F,Y,lt=l.cloneNode(!0),ut=gn(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||C.isXMLDoc(l)))for(Y=yr(lt),_=0,R=(F=yr(l)).length;_<R;_++)Li(F[_],Y[_]);if(d)if(y)for(F=F||yr(l),Y=Y||yr(lt),_=0,R=F.length;_<R;_++)Zr(F[_],Y[_]);else Zr(l,lt);return(Y=yr(lt,"script")).length>0&&Oo(Y,!ut&&yr(l,"script")),lt},cleanData:function(l){for(var d,y,_,R=C.event.special,F=0;void 0!==(y=l[F]);F++)if(Ze(y)){if(d=y[z.expando]){if(d.events)for(_ in d.events)R[_]?C.event.remove(y,_):C.removeEvent(y,_,d.handle);y[z.expando]=void 0}y[rt.expando]&&(y[rt.expando]=void 0)}}}),C.fn.extend({detach:function(l){return Sr(this,l,!0)},remove:function(l){return Sr(this,l)},text:function(l){return hn(this,function(d){return void 0===d?C.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return zr(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Na(this,l).appendChild(l)})},prepend:function(){return zr(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Na(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return zr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return zr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;null!=(l=this[d]);d++)1===l.nodeType&&(C.cleanData(yr(l,!1)),l.textContent="");return this},clone:function(l,d){return l=null!=l&&l,d=null==d?l:d,this.map(function(){return C.clone(this,l,d)})},html:function(l){return hn(this,function(d){var y=this[0]||{},_=0,R=this.length;if(void 0===d&&1===y.nodeType)return y.innerHTML;if("string"==typeof d&&!No.test(d)&&!Cr[(Mr.exec(d)||["",""])[1].toLowerCase()]){d=C.htmlPrefilter(d);try{for(;_<R;_++)1===(y=this[_]||{}).nodeType&&(C.cleanData(yr(y,!1)),y.innerHTML=d);y=0}catch(F){}}y&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return zr(this,arguments,function(d){var y=this.parentNode;C.inArray(this,l)<0&&(C.cleanData(yr(this)),y&&y.replaceChild(d,this))},l)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){C.fn[l]=function(y){for(var _,R=[],F=C(y),Y=F.length-1,lt=0;lt<=Y;lt++)_=lt===Y?this:this.clone(!0),C(F[lt])[d](_),M.apply(R,_.get());return this.pushStack(R)}});var bo=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),no=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=g),d.getComputedStyle(l)},ua=function(l,d,y){var _,R,F={};for(R in d)F[R]=l.style[R],l.style[R]=d[R];for(R in _=y.call(l),d)l.style[R]=F[R];return _},is=new RegExp(pn.join("|"),"i");function Wi(l,d,y){var _,R,F,Y,lt=l.style;return(y=y||no(l))&&(""===(Y=y.getPropertyValue(d)||y[d])&&!gn(l)&&(Y=C.style(l,d)),!i.pixelBoxStyles()&&bo.test(Y)&&is.test(d)&&(_=lt.width,R=lt.minWidth,F=lt.maxWidth,lt.minWidth=lt.maxWidth=lt.width=Y,Y=y.width,lt.width=_,lt.minWidth=R,lt.maxWidth=F)),void 0!==Y?Y+"":Y}function la(l,d){return{get:function(){if(!l())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function l(){if(At){ut.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",At.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yn.appendChild(ut).appendChild(At);var Ht=g.getComputedStyle(At);y="1%"!==Ht.top,lt=12===d(Ht.marginLeft),At.style.right="60%",F=36===d(Ht.right),_=36===d(Ht.width),At.style.position="absolute",R=12===d(At.offsetWidth/3),yn.removeChild(ut),At=null}}function d(Ht){return Math.round(parseFloat(Ht))}var y,_,R,F,Y,lt,ut=pt.createElement("div"),At=pt.createElement("div");!At.style||(At.style.backgroundClip="content-box",At.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===At.style.backgroundClip,C.extend(i,{boxSizingReliable:function(){return l(),_},pixelBoxStyles:function(){return l(),F},pixelPosition:function(){return l(),y},reliableMarginLeft:function(){return l(),lt},scrollboxSize:function(){return l(),R},reliableTrDimensions:function(){var Ht,re,Rt,Xt;return null==Y&&(Ht=pt.createElement("table"),re=pt.createElement("tr"),Rt=pt.createElement("div"),Ht.style.cssText="position:absolute;left:-11111px;border-collapse:separate",re.style.cssText="border:1px solid",re.style.height="1px",Rt.style.height="9px",Rt.style.display="block",yn.appendChild(Ht).appendChild(re).appendChild(Rt),Xt=g.getComputedStyle(re),Y=parseInt(Xt.height,10)+parseInt(Xt.borderTopWidth,10)+parseInt(Xt.borderBottomWidth,10)===re.offsetHeight,yn.removeChild(Ht)),Y}}))}();var Da=["Webkit","Moz","ms"],on=pt.createElement("div").style,Do={};function Oi(l){return C.cssProps[l]||Do[l]||(l in on?l:Do[l]=function Fa(l){for(var d=l[0].toUpperCase()+l.slice(1),y=Da.length;y--;)if((l=Da[y]+d)in on)return l}(l)||l)}var ro=/^(none|table(?!-c[ea]).+)/,io=/^--/,Dr={position:"absolute",visibility:"hidden",display:"block"},$i={letterSpacing:"0",fontWeight:"400"};function Va(l,d,y){var _=Ke.exec(d);return _?Math.max(0,_[2]-(y||0))+(_[3]||"px"):d}function Fo(l,d,y,_,R,F){var Y="width"===d?1:0,lt=0,ut=0;if(y===(_?"border":"content"))return 0;for(;Y<4;Y+=2)"margin"===y&&(ut+=C.css(l,y+pn[Y],!0,R)),_?("content"===y&&(ut-=C.css(l,"padding"+pn[Y],!0,R)),"margin"!==y&&(ut-=C.css(l,"border"+pn[Y]+"Width",!0,R))):(ut+=C.css(l,"padding"+pn[Y],!0,R),"padding"!==y?ut+=C.css(l,"border"+pn[Y]+"Width",!0,R):lt+=C.css(l,"border"+pn[Y]+"Width",!0,R));return!_&&F>=0&&(ut+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-F-ut-lt-.5))||0),ut}function ca(l,d,y){var _=no(l),F=(!i.boxSizingReliable()||y)&&"border-box"===C.css(l,"boxSizing",!1,_),Y=F,lt=Wi(l,d,_),ut="offset"+d[0].toUpperCase()+d.slice(1);if(bo.test(lt)){if(!y)return lt;lt="auto"}return(!i.boxSizingReliable()&&F||!i.reliableTrDimensions()&&he(l,"tr")||"auto"===lt||!parseFloat(lt)&&"inline"===C.css(l,"display",!1,_))&&l.getClientRects().length&&(F="border-box"===C.css(l,"boxSizing",!1,_),(Y=ut in l)&&(lt=l[ut])),(lt=parseFloat(lt)||0)+Fo(l,d,y||(F?"border":"content"),Y,_,lt)+"px"}function ht(l,d,y,_,R){return new ht.prototype.init(l,d,y,_,R)}C.extend({cssHooks:{opacity:{get:function(l,d){if(d){var y=Wi(l,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,y,_){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var R,F,Y,lt=ln(d),ut=io.test(d),At=l.style;if(ut||(d=Oi(lt)),Y=C.cssHooks[d]||C.cssHooks[lt],void 0===y)return Y&&"get"in Y&&void 0!==(R=Y.get(l,!1,_))?R:At[d];if("string"==(F=typeof y)&&(R=Ke.exec(y))&&R[1]&&(y=ui(l,d,R),F="number"),null==y||y!=y)return;"number"===F&&!ut&&(y+=R&&R[3]||(C.cssNumber[lt]?"":"px")),!i.clearCloneStyle&&""===y&&0===d.indexOf("background")&&(At[d]="inherit"),(!Y||!("set"in Y)||void 0!==(y=Y.set(l,y,_)))&&(ut?At.setProperty(d,y):At[d]=y)}},css:function(l,d,y,_){var R,F,Y,lt=ln(d);return io.test(d)||(d=Oi(lt)),(Y=C.cssHooks[d]||C.cssHooks[lt])&&"get"in Y&&(R=Y.get(l,!0,y)),void 0===R&&(R=Wi(l,d,_)),"normal"===R&&d in $i&&(R=$i[d]),""===y||y?(F=parseFloat(R),!0===y||isFinite(F)?F||0:R):R}}),C.each(["height","width"],function(l,d){C.cssHooks[d]={get:function(y,_,R){if(_)return!ro.test(C.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?ca(y,d,R):ua(y,Dr,function(){return ca(y,d,R)})},set:function(y,_,R){var F,Y=no(y),lt=!i.scrollboxSize()&&"absolute"===Y.position,At=(lt||R)&&"border-box"===C.css(y,"boxSizing",!1,Y),Ht=R?Fo(y,d,R,At,Y):0;return At&&lt&&(Ht-=Math.ceil(y["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(Y[d])-Fo(y,d,"border",!1,Y)-.5)),Ht&&(F=Ke.exec(_))&&"px"!==(F[3]||"px")&&(y.style[d]=_,_=C.css(y,d)),Va(0,_,Ht)}}}),C.cssHooks.marginLeft=la(i.reliableMarginLeft,function(l,d){if(d)return(parseFloat(Wi(l,"marginLeft"))||l.getBoundingClientRect().left-ua(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(l,d){C.cssHooks[l+d]={expand:function(y){for(var _=0,R={},F="string"==typeof y?y.split(" "):[y];_<4;_++)R[l+pn[_]+d]=F[_]||F[_-2]||F[0];return R}},"margin"!==l&&(C.cssHooks[l+d].set=Va)}),C.fn.extend({css:function(l,d){return hn(this,function(y,_,R){var F,Y,lt={},ut=0;if(Array.isArray(_)){for(F=no(y),Y=_.length;ut<Y;ut++)lt[_[ut]]=C.css(y,_[ut],!1,F);return lt}return void 0!==R?C.style(y,_,R):C.css(y,_)},l,d,arguments.length>1)}}),C.Tween=ht,(ht.prototype={constructor:ht,init:function(l,d,y,_,R,F){this.elem=l,this.prop=y,this.easing=R||C.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=_,this.unit=F||(C.cssNumber[y]?"":"px")},cur:function(){var l=ht.propHooks[this.prop];return l&&l.get?l.get(this):ht.propHooks._default.get(this)},run:function(l){var d,y=ht.propHooks[this.prop];return this.pos=d=this.options.duration?C.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):ht.propHooks._default.set(this),this}}).init.prototype=ht.prototype,(ht.propHooks={_default:{get:function(l){var d;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(d=C.css(l.elem,l.prop,""))&&"auto"!==d?d:0},set:function(l){C.fx.step[l.prop]?C.fx.step[l.prop](l):1!==l.elem.nodeType||!C.cssHooks[l.prop]&&null==l.elem.style[Oi(l.prop)]?l.elem[l.prop]=l.now:C.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=ht.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},C.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},C.fx=ht.prototype.init,C.fx.step={};var ci,Co,fa=/^(?:toggle|show|hide)$/,be=/queueHooks$/;function qr(){Co&&(!1===pt.hidden&&g.requestAnimationFrame?g.requestAnimationFrame(qr):g.setTimeout(qr,C.fx.interval),C.fx.tick())}function Vo(){return g.setTimeout(function(){ci=void 0}),ci=Date.now()}function Ri(l,d){var y,_=0,R={height:l};for(d=d?1:0;_<4;_+=2-d)R["margin"+(y=pn[_])]=R["padding"+y]=l;return d&&(R.opacity=R.width=l),R}function Bo(l,d,y){for(var _,R=(_r.tweeners[d]||[]).concat(_r.tweeners["*"]),F=0,Y=R.length;F<Y;F++)if(_=R[F].call(y,d,l))return _}function _r(l,d,y){var _,R,F=0,Y=_r.prefilters.length,lt=C.Deferred().always(function(){delete ut.elem}),ut=function(){if(R)return!1;for(var re=ci||Vo(),Rt=Math.max(0,At.startTime+At.duration-re),Se=1-(Rt/At.duration||0),en=0,Ie=At.tweens.length;en<Ie;en++)At.tweens[en].run(Se);return lt.notifyWith(l,[At,Se,Rt]),Se<1&&Ie?Rt:(Ie||lt.notifyWith(l,[At,1,0]),lt.resolveWith(l,[At]),!1)},At=lt.promise({elem:l,props:C.extend({},d),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},y),originalProperties:d,originalOptions:y,startTime:ci||Vo(),duration:y.duration,tweens:[],createTween:function(re,Rt){var Xt=C.Tween(l,At.opts,re,Rt,At.opts.specialEasing[re]||At.opts.easing);return At.tweens.push(Xt),Xt},stop:function(re){var Rt=0,Xt=re?At.tweens.length:0;if(R)return this;for(R=!0;Rt<Xt;Rt++)At.tweens[Rt].run(1);return re?(lt.notifyWith(l,[At,1,0]),lt.resolveWith(l,[At,re])):lt.rejectWith(l,[At,re]),this}}),Ht=At.props;for(function os(l,d){var y,_,R,F,Y;for(y in l)if(R=d[_=ln(y)],F=l[y],Array.isArray(F)&&(R=F[1],F=l[y]=F[0]),y!==_&&(l[_]=F,delete l[y]),(Y=C.cssHooks[_])&&"expand"in Y)for(y in F=Y.expand(F),delete l[_],F)y in l||(l[y]=F[y],d[y]=R);else d[_]=R}(Ht,At.opts.specialEasing);F<Y;F++)if(_=_r.prefilters[F].call(At,l,Ht,At.opts))return st(_.stop)&&(C._queueHooks(At.elem,At.opts.queue).stop=_.stop.bind(_)),_;return C.map(Ht,Bo,At),st(At.opts.start)&&At.opts.start.call(l,At),At.progress(At.opts.progress).done(At.opts.done,At.opts.complete).fail(At.opts.fail).always(At.opts.always),C.fx.timer(C.extend(ut,{elem:l,anim:At,queue:At.opts.queue})),At}C.Animation=C.extend(_r,{tweeners:{"*":[function(l,d){var y=this.createTween(l,d);return ui(y.elem,l,Ke.exec(d),y),y}]},tweener:function(l,d){st(l)?(d=l,l=["*"]):l=l.match(Cn);for(var y,_=0,R=l.length;_<R;_++)(_r.tweeners[y=l[_]]=_r.tweeners[y]||[]).unshift(d)},prefilters:[function Tr(l,d,y){var _,R,F,Y,lt,ut,At,Ht,re="width"in d||"height"in d,Rt=this,Xt={},Se=l.style,en=l.nodeType&&tr(l),Ie=z.get(l,"fxshow");for(_ in y.queue||(null==(Y=C._queueHooks(l,"fx")).unqueued&&(Y.unqueued=0,lt=Y.empty.fire,Y.empty.fire=function(){Y.unqueued||lt()}),Y.unqueued++,Rt.always(function(){Rt.always(function(){Y.unqueued--,C.queue(l,"fx").length||Y.empty.fire()})})),d)if(fa.test(R=d[_])){if(delete d[_],F=F||"toggle"===R,R===(en?"hide":"show")){if("show"!==R||!Ie||void 0===Ie[_])continue;en=!0}Xt[_]=Ie&&Ie[_]||C.style(l,_)}if((ut=!C.isEmptyObject(d))||!C.isEmptyObject(Xt))for(_ in re&&1===l.nodeType&&(y.overflow=[Se.overflow,Se.overflowX,Se.overflowY],null==(At=Ie&&Ie.display)&&(At=z.get(l,"display")),"none"===(Ht=C.css(l,"display"))&&(At?Ht=At:(er([l],!0),At=l.style.display||At,Ht=C.css(l,"display"),er([l]))),("inline"===Ht||"inline-block"===Ht&&null!=At)&&"none"===C.css(l,"float")&&(ut||(Rt.done(function(){Se.display=At}),null==At&&(At="none"===(Ht=Se.display)?"":Ht)),Se.display="inline-block")),y.overflow&&(Se.overflow="hidden",Rt.always(function(){Se.overflow=y.overflow[0],Se.overflowX=y.overflow[1],Se.overflowY=y.overflow[2]})),ut=!1,Xt)ut||(Ie?"hidden"in Ie&&(en=Ie.hidden):Ie=z.access(l,"fxshow",{display:At}),F&&(Ie.hidden=!en),en&&er([l],!0),Rt.done(function(){for(_ in en||er([l]),z.remove(l,"fxshow"),Xt)C.style(l,_,Xt[_])})),ut=Bo(en?Ie[_]:0,_,Rt),_ in Ie||(Ie[_]=ut.start,en&&(ut.end=ut.start,ut.start=0))}],prefilter:function(l,d){d?_r.prefilters.unshift(l):_r.prefilters.push(l)}}),C.speed=function(l,d,y){var _=l&&"object"==typeof l?C.extend({},l):{complete:y||!y&&d||st(l)&&l,duration:l,easing:y&&d||d&&!st(d)&&d};return C.fx.off?_.duration=0:"number"!=typeof _.duration&&(_.duration=_.duration in C.fx.speeds?C.fx.speeds[_.duration]:C.fx.speeds._default),(null==_.queue||!0===_.queue)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){st(_.old)&&_.old.call(this),_.queue&&C.dequeue(this,_.queue)},_},C.fn.extend({fadeTo:function(l,d,y,_){return this.filter(tr).css("opacity",0).show().end().animate({opacity:d},l,y,_)},animate:function(l,d,y,_){var R=C.isEmptyObject(l),F=C.speed(d,y,_),Y=function(){var lt=_r(this,C.extend({},l),F);(R||z.get(this,"finish"))&&lt.stop(!0)};return Y.finish=Y,R||!1===F.queue?this.each(Y):this.queue(F.queue,Y)},stop:function(l,d,y){var _=function(R){var F=R.stop;delete R.stop,F(y)};return"string"!=typeof l&&(y=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var R=!0,F=null!=l&&l+"queueHooks",Y=C.timers,lt=z.get(this);if(F)lt[F]&&lt[F].stop&&_(lt[F]);else for(F in lt)lt[F]&&lt[F].stop&&be.test(F)&&_(lt[F]);for(F=Y.length;F--;)Y[F].elem===this&&(null==l||Y[F].queue===l)&&(Y[F].anim.stop(y),R=!1,Y.splice(F,1));(R||!y)&&C.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var d,y=z.get(this),_=y[l+"queue"],R=y[l+"queueHooks"],F=C.timers,Y=_?_.length:0;for(y.finish=!0,C.queue(this,l,[]),R&&R.stop&&R.stop.call(this,!0),d=F.length;d--;)F[d].elem===this&&F[d].queue===l&&(F[d].anim.stop(!0),F.splice(d,1));for(d=0;d<Y;d++)_[d]&&_[d].finish&&_[d].finish.call(this);delete y.finish})}}),C.each(["toggle","show","hide"],function(l,d){var y=C.fn[d];C.fn[d]=function(_,R,F){return null==_||"boolean"==typeof _?y.apply(this,arguments):this.animate(Ri(d,!0),_,R,F)}}),C.each({slideDown:Ri("show"),slideUp:Ri("hide"),slideToggle:Ri("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){C.fn[l]=function(y,_,R){return this.animate(d,y,_,R)}}),C.timers=[],C.fx.tick=function(){var l,d=0,y=C.timers;for(ci=Date.now();d<y.length;d++)!(l=y[d])()&&y[d]===l&&y.splice(d--,1);y.length||C.fx.stop(),ci=void 0},C.fx.timer=function(l){C.timers.push(l),C.fx.start()},C.fx.interval=13,C.fx.start=function(){Co||(Co=!0,qr())},C.fx.stop=function(){Co=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(l,d){return l=C.fx&&C.fx.speeds[l]||l,this.queue(d=d||"fx",function(y,_){var R=g.setTimeout(y,l);_.stop=function(){g.clearTimeout(R)}})},function(){var l=pt.createElement("input"),y=pt.createElement("select").appendChild(pt.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=y.selected,(l=pt.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var fi,di=C.expr.attrHandle;C.fn.extend({attr:function(l,d){return hn(this,C.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){C.removeAttr(this,l)})}}),C.extend({attr:function(l,d,y){var _,R,F=l.nodeType;if(3!==F&&8!==F&&2!==F)return void 0===l.getAttribute?C.prop(l,d,y):((1!==F||!C.isXMLDoc(l))&&(R=C.attrHooks[d.toLowerCase()]||(C.expr.match.bool.test(d)?fi:void 0)),void 0!==y?null===y?void C.removeAttr(l,d):R&&"set"in R&&void 0!==(_=R.set(l,y,d))?_:(l.setAttribute(d,y+""),y):R&&"get"in R&&null!==(_=R.get(l,d))?_:null==(_=C.find.attr(l,d))?void 0:_)},attrHooks:{type:{set:function(l,d){if(!i.radioValue&&"radio"===d&&he(l,"input")){var y=l.value;return l.setAttribute("type",d),y&&(l.value=y),d}}}},removeAttr:function(l,d){var y,_=0,R=d&&d.match(Cn);if(R&&1===l.nodeType)for(;y=R[_++];)l.removeAttribute(y)}}),fi={set:function(l,d,y){return!1===d?C.removeAttr(l,y):l.setAttribute(y,y),y}},C.each(C.expr.match.bool.source.match(/\w+/g),function(l,d){var y=di[d]||C.find.attr;di[d]=function(_,R,F){var Y,lt,ut=R.toLowerCase();return F||(lt=di[ut],di[ut]=Y,Y=null!=y(_,R,F)?ut:null,di[ut]=lt),Y}});var oo=/^(?:input|select|textarea|button)$/i,Ho=/^(?:a|area)$/i;function Gr(l){return(l.match(Cn)||[]).join(" ")}function ti(l){return l.getAttribute&&l.getAttribute("class")||""}function de(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(Cn)||[]}C.fn.extend({prop:function(l,d){return hn(this,C.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[C.propFix[l]||l]})}}),C.extend({prop:function(l,d,y){var _,R,F=l.nodeType;if(3!==F&&8!==F&&2!==F)return(1!==F||!C.isXMLDoc(l))&&(R=C.propHooks[d=C.propFix[d]||d]),void 0!==y?R&&"set"in R&&void 0!==(_=R.set(l,y,d))?_:l[d]=y:R&&"get"in R&&null!==(_=R.get(l,d))?_:l[d]},propHooks:{tabIndex:{get:function(l){var d=C.find.attr(l,"tabindex");return d?parseInt(d,10):oo.test(l.nodeName)||Ho.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(C.propHooks.selected={get:function(l){return null},set:function(l){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(l){var d,y,_,R,F,Y,lt,ut=0;if(st(l))return this.each(function(At){C(this).addClass(l.call(this,At,ti(this)))});if((d=de(l)).length)for(;y=this[ut++];)if(R=ti(y),_=1===y.nodeType&&" "+Gr(R)+" "){for(Y=0;F=d[Y++];)_.indexOf(" "+F+" ")<0&&(_+=F+" ");R!==(lt=Gr(_))&&y.setAttribute("class",lt)}return this},removeClass:function(l){var d,y,_,R,F,Y,lt,ut=0;if(st(l))return this.each(function(At){C(this).removeClass(l.call(this,At,ti(this)))});if(!arguments.length)return this.attr("class","");if((d=de(l)).length)for(;y=this[ut++];)if(R=ti(y),_=1===y.nodeType&&" "+Gr(R)+" "){for(Y=0;F=d[Y++];)for(;_.indexOf(" "+F+" ")>-1;)_=_.replace(" "+F+" "," ");R!==(lt=Gr(_))&&y.setAttribute("class",lt)}return this},toggleClass:function(l,d){var y=typeof l,_="string"===y||Array.isArray(l);return"boolean"==typeof d&&_?d?this.addClass(l):this.removeClass(l):st(l)?this.each(function(R){C(this).toggleClass(l.call(this,R,ti(this),d),d)}):this.each(function(){var R,F,Y,lt;if(_)for(F=0,Y=C(this),lt=de(l);R=lt[F++];)Y.hasClass(R)?Y.removeClass(R):Y.addClass(R);else(void 0===l||"boolean"===y)&&((R=ti(this))&&z.set(this,"__className__",R),this.setAttribute&&this.setAttribute("class",R||!1===l?"":z.get(this,"__className__")||""))})},hasClass:function(l){var d,y,_=0;for(d=" "+l+" ";y=this[_++];)if(1===y.nodeType&&(" "+Gr(ti(y))+" ").indexOf(d)>-1)return!0;return!1}});var da=/\r/g;C.fn.extend({val:function(l){var d,y,_,R=this[0];return arguments.length?(_=st(l),this.each(function(F){var Y;1===this.nodeType&&(null==(Y=_?l.call(this,F,C(this).val()):l)?Y="":"number"==typeof Y?Y+="":Array.isArray(Y)&&(Y=C.map(Y,function(lt){return null==lt?"":lt+""})),(!(d=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])||!("set"in d)||void 0===d.set(this,Y,"value"))&&(this.value=Y))})):R?(d=C.valHooks[R.type]||C.valHooks[R.nodeName.toLowerCase()])&&"get"in d&&void 0!==(y=d.get(R,"value"))?y:"string"==typeof(y=R.value)?y.replace(da,""):null==y?"":y:void 0}}),C.extend({valHooks:{option:{get:function(l){var d=C.find.attr(l,"value");return null!=d?d:Gr(C.text(l))}},select:{get:function(l){var d,y,_,R=l.options,F=l.selectedIndex,Y="select-one"===l.type,lt=Y?null:[],ut=Y?F+1:R.length;for(_=F<0?ut:Y?F:0;_<ut;_++)if(((y=R[_]).selected||_===F)&&!y.disabled&&(!y.parentNode.disabled||!he(y.parentNode,"optgroup"))){if(d=C(y).val(),Y)return d;lt.push(d)}return lt},set:function(l,d){for(var y,_,R=l.options,F=C.makeArray(d),Y=R.length;Y--;)((_=R[Y]).selected=C.inArray(C.valHooks.option.get(_),F)>-1)&&(y=!0);return y||(l.selectedIndex=-1),F}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=C.inArray(C(l).val(),d)>-1}},i.checkOn||(C.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in g;var Wr=/^(?:focusinfocus|focusoutblur)$/,Yi=function(l){l.stopPropagation()};C.extend(C.event,{trigger:function(l,d,y,_){var R,F,Y,lt,ut,At,Ht,re,Rt=[y||pt],Xt=X.call(l,"type")?l.type:l,Se=X.call(l,"namespace")?l.namespace.split("."):[];if(F=re=Y=y=y||pt,3!==y.nodeType&&8!==y.nodeType&&!Wr.test(Xt+C.event.triggered)&&(Xt.indexOf(".")>-1&&(Se=Xt.split("."),Xt=Se.shift(),Se.sort()),ut=Xt.indexOf(":")<0&&"on"+Xt,(l=l[C.expando]?l:new C.Event(Xt,"object"==typeof l&&l)).isTrigger=_?2:3,l.namespace=Se.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Se.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=y),d=null==d?[l]:C.makeArray(d,[l]),Ht=C.event.special[Xt]||{},_||!Ht.trigger||!1!==Ht.trigger.apply(y,d))){if(!_&&!Ht.noBubble&&!vt(y)){for(Wr.test((lt=Ht.delegateType||Xt)+Xt)||(F=F.parentNode);F;F=F.parentNode)Rt.push(F),Y=F;Y===(y.ownerDocument||pt)&&Rt.push(Y.defaultView||Y.parentWindow||g)}for(R=0;(F=Rt[R++])&&!l.isPropagationStopped();)re=F,l.type=R>1?lt:Ht.bindType||Xt,(At=(z.get(F,"events")||Object.create(null))[l.type]&&z.get(F,"handle"))&&At.apply(F,d),(At=ut&&F[ut])&&At.apply&&Ze(F)&&(l.result=At.apply(F,d),!1===l.result&&l.preventDefault());return l.type=Xt,!_&&!l.isDefaultPrevented()&&(!Ht._default||!1===Ht._default.apply(Rt.pop(),d))&&Ze(y)&&ut&&st(y[Xt])&&!vt(y)&&((Y=y[ut])&&(y[ut]=null),C.event.triggered=Xt,l.isPropagationStopped()&&re.addEventListener(Xt,Yi),y[Xt](),l.isPropagationStopped()&&re.removeEventListener(Xt,Yi),C.event.triggered=void 0,Y&&(y[ut]=Y)),l.result}},simulate:function(l,d,y){var _=C.extend(new C.Event,y,{type:l,isSimulated:!0});C.event.trigger(_,null,d)}}),C.fn.extend({trigger:function(l,d){return this.each(function(){C.event.trigger(l,d,this)})},triggerHandler:function(l,d){var y=this[0];if(y)return C.event.trigger(l,d,y,!0)}}),i.focusin||C.each({focus:"focusin",blur:"focusout"},function(l,d){var y=function(_){C.event.simulate(d,_.target,C.event.fix(_))};C.event.special[d]={setup:function(){var _=this.ownerDocument||this.document||this,R=z.access(_,d);R||_.addEventListener(l,y,!0),z.access(_,d,(R||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,R=z.access(_,d)-1;R?z.access(_,d,R):(_.removeEventListener(l,y,!0),z.remove(_,d))}}});var Ni=g.location,Fn={guid:Date.now()},_o=/\?/;C.parseXML=function(l){var d,y;if(!l||"string"!=typeof l)return null;try{d=(new g.DOMParser).parseFromString(l,"text/xml")}catch(_){}return y=d&&d.getElementsByTagName("parsererror")[0],(!d||y)&&C.error("Invalid XML: "+(y?C.map(y.childNodes,function(_){return _.textContent}).join("\n"):l)),d};var Ba=/\[\]$/,jo=/\r?\n/g,wo=/^(?:submit|button|image|reset|file)$/i,ha=/^(?:input|select|textarea|keygen)/i;function Sn(l,d,y,_){var R;if(Array.isArray(d))C.each(d,function(F,Y){y||Ba.test(l)?_(l,Y):Sn(l+"["+("object"==typeof Y&&null!=Y?F:"")+"]",Y,y,_)});else if(y||"object"!==Pt(d))_(l,d);else for(R in d)Sn(l+"["+R+"]",d[R],y,_)}C.param=function(l,d){var y,_=[],R=function(F,Y){var lt=st(Y)?Y():Y;_[_.length]=encodeURIComponent(F)+"="+encodeURIComponent(null==lt?"":lt)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!C.isPlainObject(l))C.each(l,function(){R(this.name,this.value)});else for(y in l)Sn(y,l[y],d,R);return _.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=C.prop(this,"elements");return l?C.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!C(this).is(":disabled")&&ha.test(this.nodeName)&&!wo.test(l)&&(this.checked||!lr.test(l))}).map(function(l,d){var y=C(this).val();return null==y?null:Array.isArray(y)?C.map(y,function(_){return{name:d.name,value:_.replace(jo,"\r\n")}}):{name:d.name,value:y.replace(jo,"\r\n")}}).get()}});var Uo=/%20/g,Ae=/#.*$/,hi=/([?&])_=[^&]*/,Xi=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ha=/^(?:GET|HEAD)$/,kr=/^\/\//,Ki={},Ti={},pa="*/".concat("*"),Ei=pt.createElement("a");function ga(l){return function(d,y){"string"!=typeof d&&(y=d,d="*");var _,R=0,F=d.toLowerCase().match(Cn)||[];if(st(y))for(;_=F[R++];)"+"===_[0]?(_=_.slice(1)||"*",(l[_]=l[_]||[]).unshift(y)):(l[_]=l[_]||[]).push(y)}}function va(l,d,y,_){var R={},F=l===Ti;function Y(lt){var ut;return R[lt]=!0,C.each(l[lt]||[],function(At,Ht){var re=Ht(d,y,_);return"string"!=typeof re||F||R[re]?F?!(ut=re):void 0:(d.dataTypes.unshift(re),Y(re),!1)}),ut}return Y(d.dataTypes[0])||!R["*"]&&Y("*")}function Gn(l,d){var y,_,R=C.ajaxSettings.flatOptions||{};for(y in d)void 0!==d[y]&&((R[y]?l:_||(_={}))[y]=d[y]);return _&&C.extend(!0,l,_),l}Ei.href=Ni.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ni.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ni.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pa,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Gn(Gn(l,C.ajaxSettings),d):Gn(C.ajaxSettings,l)},ajaxPrefilter:ga(Ki),ajaxTransport:ga(Ti),ajax:function(l,d){"object"==typeof l&&(d=l,l=void 0);var y,_,R,F,Y,lt,ut,At,Ht,re,Rt=C.ajaxSetup({},d=d||{}),Xt=Rt.context||Rt,Se=Rt.context&&(Xt.nodeType||Xt.jquery)?C(Xt):C.event,en=C.Deferred(),Ie=C.Callbacks("once memory"),Jn=Rt.statusCode||{},Zn={},Lr={},Ge="canceled",De={readyState:0,getResponseHeader:function(Nn){var nr;if(ut){if(!F)for(F={};nr=Xi.exec(R);)F[nr[1].toLowerCase()+" "]=(F[nr[1].toLowerCase()+" "]||[]).concat(nr[2]);nr=F[Nn.toLowerCase()+" "]}return null==nr?null:nr.join(", ")},getAllResponseHeaders:function(){return ut?R:null},setRequestHeader:function(Nn,nr){return null==ut&&(Nn=Lr[Nn.toLowerCase()]=Lr[Nn.toLowerCase()]||Nn,Zn[Nn]=nr),this},overrideMimeType:function(Nn){return null==ut&&(Rt.mimeType=Nn),this},statusCode:function(Nn){var nr;if(Nn)if(ut)De.always(Nn[De.status]);else for(nr in Nn)Jn[nr]=[Jn[nr],Nn[nr]];return this},abort:function(Nn){var nr=Nn||Ge;return y&&y.abort(nr),ar(0,nr),this}};if(en.promise(De),Rt.url=((l||Rt.url||Ni.href)+"").replace(kr,Ni.protocol+"//"),Rt.type=d.method||d.type||Rt.method||Rt.type,Rt.dataTypes=(Rt.dataType||"*").toLowerCase().match(Cn)||[""],null==Rt.crossDomain){lt=pt.createElement("a");try{lt.href=Rt.url,lt.href=lt.href,Rt.crossDomain=Ei.protocol+"//"+Ei.host!=lt.protocol+"//"+lt.host}catch(Nn){Rt.crossDomain=!0}}if(Rt.data&&Rt.processData&&"string"!=typeof Rt.data&&(Rt.data=C.param(Rt.data,Rt.traditional)),va(Ki,Rt,d,De),ut)return De;for(Ht in(At=C.event&&Rt.global)&&0==C.active++&&C.event.trigger("ajaxStart"),Rt.type=Rt.type.toUpperCase(),Rt.hasContent=!Ha.test(Rt.type),_=Rt.url.replace(Ae,""),Rt.hasContent?Rt.data&&Rt.processData&&0===(Rt.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Rt.data=Rt.data.replace(Uo,"+")):(re=Rt.url.slice(_.length),Rt.data&&(Rt.processData||"string"==typeof Rt.data)&&(_+=(_o.test(_)?"&":"?")+Rt.data,delete Rt.data),!1===Rt.cache&&(_=_.replace(hi,"$1"),re=(_o.test(_)?"&":"?")+"_="+Fn.guid+++re),Rt.url=_+re),Rt.ifModified&&(C.lastModified[_]&&De.setRequestHeader("If-Modified-Since",C.lastModified[_]),C.etag[_]&&De.setRequestHeader("If-None-Match",C.etag[_])),(Rt.data&&Rt.hasContent&&!1!==Rt.contentType||d.contentType)&&De.setRequestHeader("Content-Type",Rt.contentType),De.setRequestHeader("Accept",Rt.dataTypes[0]&&Rt.accepts[Rt.dataTypes[0]]?Rt.accepts[Rt.dataTypes[0]]+("*"!==Rt.dataTypes[0]?", "+pa+"; q=0.01":""):Rt.accepts["*"]),Rt.headers)De.setRequestHeader(Ht,Rt.headers[Ht]);if(Rt.beforeSend&&(!1===Rt.beforeSend.call(Xt,De,Rt)||ut))return De.abort();if(Ge="abort",Ie.add(Rt.complete),De.done(Rt.success),De.fail(Rt.error),y=va(Ti,Rt,d,De)){if(De.readyState=1,At&&Se.trigger("ajaxSend",[De,Rt]),ut)return De;Rt.async&&Rt.timeout>0&&(Y=g.setTimeout(function(){De.abort("timeout")},Rt.timeout));try{ut=!1,y.send(Zn,ar)}catch(Nn){if(ut)throw Nn;ar(-1,Nn)}}else ar(-1,"No Transport");function ar(Nn,nr,Yt,$r){var sr,So,pi,cr,Pi,ei=nr;ut||(ut=!0,Y&&g.clearTimeout(Y),y=void 0,R=$r||"",De.readyState=Nn>0?4:0,sr=Nn>=200&&Nn<300||304===Nn,Yt&&(cr=function sn(l,d,y){for(var _,R,F,Y,lt=l.contents,ut=l.dataTypes;"*"===ut[0];)ut.shift(),void 0===_&&(_=l.mimeType||d.getResponseHeader("Content-Type"));if(_)for(R in lt)if(lt[R]&&lt[R].test(_)){ut.unshift(R);break}if(ut[0]in y)F=ut[0];else{for(R in y){if(!ut[0]||l.converters[R+" "+ut[0]]){F=R;break}Y||(Y=R)}F=F||Y}if(F)return F!==ut[0]&&ut.unshift(F),y[F]}(Rt,De,Yt)),!sr&&C.inArray("script",Rt.dataTypes)>-1&&C.inArray("json",Rt.dataTypes)<0&&(Rt.converters["text script"]=function(){}),cr=function ja(l,d,y,_){var R,F,Y,lt,ut,At={},Ht=l.dataTypes.slice();if(Ht[1])for(Y in l.converters)At[Y.toLowerCase()]=l.converters[Y];for(F=Ht.shift();F;)if(l.responseFields[F]&&(y[l.responseFields[F]]=d),!ut&&_&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),ut=F,F=Ht.shift())if("*"===F)F=ut;else if("*"!==ut&&ut!==F){if(!(Y=At[ut+" "+F]||At["* "+F]))for(R in At)if((lt=R.split(" "))[1]===F&&(Y=At[ut+" "+lt[0]]||At["* "+lt[0]])){!0===Y?Y=At[R]:!0!==At[R]&&(F=lt[0],Ht.unshift(lt[1]));break}if(!0!==Y)if(Y&&l.throws)d=Y(d);else try{d=Y(d)}catch(re){return{state:"parsererror",error:Y?re:"No conversion from "+ut+" to "+F}}}return{state:"success",data:d}}(Rt,cr,De,sr),sr?(Rt.ifModified&&((Pi=De.getResponseHeader("Last-Modified"))&&(C.lastModified[_]=Pi),(Pi=De.getResponseHeader("etag"))&&(C.etag[_]=Pi)),204===Nn||"HEAD"===Rt.type?ei="nocontent":304===Nn?ei="notmodified":(ei=cr.state,So=cr.data,sr=!(pi=cr.error))):(pi=ei,(Nn||!ei)&&(ei="error",Nn<0&&(Nn=0))),De.status=Nn,De.statusText=(nr||ei)+"",sr?en.resolveWith(Xt,[So,ei,De]):en.rejectWith(Xt,[De,ei,pi]),De.statusCode(Jn),Jn=void 0,At&&Se.trigger(sr?"ajaxSuccess":"ajaxError",[De,Rt,sr?So:pi]),Ie.fireWith(Xt,[De,ei]),At&&(Se.trigger("ajaxComplete",[De,Rt]),--C.active||C.event.trigger("ajaxStop")))}return De},getJSON:function(l,d,y){return C.get(l,d,y,"json")},getScript:function(l,d){return C.get(l,void 0,d,"script")}}),C.each(["get","post"],function(l,d){C[d]=function(y,_,R,F){return st(_)&&(F=F||R,R=_,_=void 0),C.ajax(C.extend({url:y,type:d,dataType:F,data:_,success:R},C.isPlainObject(y)&&y))}}),C.ajaxPrefilter(function(l){var d;for(d in l.headers)"content-type"===d.toLowerCase()&&(l.contentType=l.headers[d]||"")}),C._evalUrl=function(l,d,y){return C.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){C.globalEval(_,d,y)}})},C.fn.extend({wrapAll:function(l){var d;return this[0]&&(st(l)&&(l=l.call(this[0])),d=C(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(l){return st(l)?this.each(function(d){C(this).wrapInner(l.call(this,d))}):this.each(function(){var d=C(this),y=d.contents();y.length?y.wrapAll(l):d.append(l)})},wrap:function(l){var d=st(l);return this.each(function(y){C(this).wrapAll(d?l.call(this,y):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(l){return!C.expr.pseudos.visible(l)},C.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new g.XMLHttpRequest}catch(l){}};var Di={0:200,1223:204},N=C.ajaxSettings.xhr();i.cors=!!N&&"withCredentials"in N,i.ajax=N=!!N,C.ajaxTransport(function(l){var d,y;if(i.cors||N&&!l.crossDomain)return{send:function(_,R){var F,Y=l.xhr();if(Y.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(F in l.xhrFields)Y[F]=l.xhrFields[F];for(F in l.mimeType&&Y.overrideMimeType&&Y.overrideMimeType(l.mimeType),!l.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest"),_)Y.setRequestHeader(F,_[F]);d=function(lt){return function(){d&&(d=y=Y.onload=Y.onerror=Y.onabort=Y.ontimeout=Y.onreadystatechange=null,"abort"===lt?Y.abort():"error"===lt?"number"!=typeof Y.status?R(0,"error"):R(Y.status,Y.statusText):R(Di[Y.status]||Y.status,Y.statusText,"text"!==(Y.responseType||"text")||"string"!=typeof Y.responseText?{binary:Y.response}:{text:Y.responseText},Y.getAllResponseHeaders()))}},Y.onload=d(),y=Y.onerror=Y.ontimeout=d("error"),void 0!==Y.onabort?Y.onabort=y:Y.onreadystatechange=function(){4===Y.readyState&&g.setTimeout(function(){d&&y()})},d=d("abort");try{Y.send(l.hasContent&&l.data||null)}catch(lt){if(d)throw lt}},abort:function(){d&&d()}}}),C.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return C.globalEval(l),l}}}),C.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),C.ajaxTransport("script",function(l){var d,y;if(l.crossDomain||l.scriptAttrs)return{send:function(_,R){d=C("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",y=function(F){d.remove(),y=null,F&&R("error"===F.type?404:200,F.type)}),pt.head.appendChild(d[0])},abort:function(){y&&y()}}});var l,J=[],at=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=J.pop()||C.expando+"_"+Fn.guid++;return this[l]=!0,l}}),C.ajaxPrefilter("json jsonp",function(l,d,y){var _,R,F,Y=!1!==l.jsonp&&(at.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&at.test(l.data)&&"data");if(Y||"jsonp"===l.dataTypes[0])return _=l.jsonpCallback=st(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,Y?l[Y]=l[Y].replace(at,"$1"+_):!1!==l.jsonp&&(l.url+=(_o.test(l.url)?"&":"?")+l.jsonp+"="+_),l.converters["script json"]=function(){return F||C.error(_+" was not called"),F[0]},l.dataTypes[0]="json",R=g[_],g[_]=function(){F=arguments},y.always(function(){void 0===R?C(g).removeProp(_):g[_]=R,l[_]&&(l.jsonpCallback=d.jsonpCallback,J.push(_)),F&&st(R)&&R(F[0]),F=R=void 0}),"script"}),i.createHTMLDocument=((l=pt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),C.parseHTML=function(l,d,y){return"string"!=typeof l?[]:("boolean"==typeof d&&(y=d,d=!1),d||(i.createHTMLDocument?((_=(d=pt.implementation.createHTMLDocument("")).createElement("base")).href=pt.location.href,d.head.appendChild(_)):d=pt),F=!y&&[],(R=Ee.exec(l))?[d.createElement(R[1])]:(R=mo([l],d,F),F&&F.length&&C(F).remove(),C.merge([],R.childNodes)));var _,R,F},C.fn.load=function(l,d,y){var _,R,F,Y=this,lt=l.indexOf(" ");return lt>-1&&(_=Gr(l.slice(lt)),l=l.slice(0,lt)),st(d)?(y=d,d=void 0):d&&"object"==typeof d&&(R="POST"),Y.length>0&&C.ajax({url:l,type:R||"GET",dataType:"html",data:d}).done(function(ut){F=arguments,Y.html(_?C("<div>").append(C.parseHTML(ut)).find(_):ut)}).always(y&&function(ut,At){Y.each(function(){y.apply(this,F||[ut.responseText,At,ut])})}),this},C.expr.pseudos.animated=function(l){return C.grep(C.timers,function(d){return l===d.elem}).length},C.offset={setOffset:function(l,d,y){var _,R,F,Y,lt,ut,Ht=C.css(l,"position"),re=C(l),Rt={};"static"===Ht&&(l.style.position="relative"),lt=re.offset(),F=C.css(l,"top"),ut=C.css(l,"left"),("absolute"===Ht||"fixed"===Ht)&&(F+ut).indexOf("auto")>-1?(Y=(_=re.position()).top,R=_.left):(Y=parseFloat(F)||0,R=parseFloat(ut)||0),st(d)&&(d=d.call(l,y,C.extend({},lt))),null!=d.top&&(Rt.top=d.top-lt.top+Y),null!=d.left&&(Rt.left=d.left-lt.left+R),"using"in d?d.using.call(l,Rt):re.css(Rt)}},C.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(R){C.offset.setOffset(this,l,R)});var d,y,_=this[0];return _?_.getClientRects().length?{top:(d=_.getBoundingClientRect()).top+(y=_.ownerDocument.defaultView).pageYOffset,left:d.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,d,y,_=this[0],R={top:0,left:0};if("fixed"===C.css(_,"position"))d=_.getBoundingClientRect();else{for(d=this.offset(),y=_.ownerDocument,l=_.offsetParent||y.documentElement;l&&(l===y.body||l===y.documentElement)&&"static"===C.css(l,"position");)l=l.parentNode;l&&l!==_&&1===l.nodeType&&((R=C(l).offset()).top+=C.css(l,"borderTopWidth",!0),R.left+=C.css(l,"borderLeftWidth",!0))}return{top:d.top-R.top-C.css(_,"marginTop",!0),left:d.left-R.left-C.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===C.css(l,"position");)l=l.offsetParent;return l||yn})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var y="pageYOffset"===d;C.fn[l]=function(_){return hn(this,function(R,F,Y){var lt;if(vt(R)?lt=R:9===R.nodeType&&(lt=R.defaultView),void 0===Y)return lt?lt[d]:R[F];lt?lt.scrollTo(y?lt.pageXOffset:Y,y?Y:lt.pageYOffset):R[F]=Y},l,_,arguments.length)}}),C.each(["top","left"],function(l,d){C.cssHooks[d]=la(i.pixelPosition,function(y,_){if(_)return _=Wi(y,d),bo.test(_)?C(y).position()[d]+"px":_})}),C.each({Height:"height",Width:"width"},function(l,d){C.each({padding:"inner"+l,content:d,"":"outer"+l},function(y,_){C.fn[_]=function(R,F){var Y=arguments.length&&(y||"boolean"!=typeof R),lt=y||(!0===R||!0===F?"margin":"border");return hn(this,function(ut,At,Ht){var re;return vt(ut)?0===_.indexOf("outer")?ut["inner"+l]:ut.document.documentElement["client"+l]:9===ut.nodeType?(re=ut.documentElement,Math.max(ut.body["scroll"+l],re["scroll"+l],ut.body["offset"+l],re["offset"+l],re["client"+l])):void 0===Ht?C.css(ut,At,lt):C.style(ut,At,Ht,lt)},d,Y?R:void 0,Y)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){C.fn[d]=function(y){return this.on(d,y)}}),C.fn.extend({bind:function(l,d,y){return this.on(l,null,d,y)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,y,_){return this.on(d,l,y,_)},undelegate:function(l,d,y){return 1===arguments.length?this.off(l,"**"):this.off(d,l||"**",y)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){C.fn[d]=function(y,_){return arguments.length>0?this.on(d,null,y,_):this.trigger(d)}});var mt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(l,d){var y,_,R;if("string"==typeof d&&(y=l[d],d=l,l=y),st(l))return _=I.call(arguments,2),R=function(){return l.apply(d||this,_.concat(I.call(arguments)))},R.guid=l.guid=l.guid||C.guid++,R},C.holdReady=function(l){l?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=he,C.isFunction=st,C.isWindow=vt,C.camelCase=ln,C.type=Pt,C.now=Date.now,C.isNumeric=function(l){var d=C.type(l);return("number"===d||"string"===d)&&!isNaN(l-parseFloat(l))},C.trim=function(l){return null==l?"":(l+"").replace(mt,"")},void 0!==(p=function(){return C}.apply(W,[]))&&(P.exports=p);var Lt=g.jQuery,St=g.$;return C.noConflict=function(l){return g.$===C&&(g.$=St),l&&g.jQuery===C&&(g.jQuery=Lt),C},void 0===w&&(g.jQuery=g.$=C),C})},37244:(P,W,f)=>{var w=f(53436)(f(12119),"DataView");P.exports=w},54994:(P,W,f)=>{var p=f(64312),g=f(46421),w=f(15764),E=f(18685),x=f(26676);function I(k){var M=-1,B=null==k?0:k.length;for(this.clear();++M<B;){var H=k[M];this.set(H[0],H[1])}}I.prototype.clear=p,I.prototype.delete=g,I.prototype.get=w,I.prototype.has=E,I.prototype.set=x,P.exports=I},9215:(P,W,f)=>{var p=f(41840),g=f(34378),w=f(54981),E=f(67343),x=f(98895);function I(k){var M=-1,B=null==k?0:k.length;for(this.clear();++M<B;){var H=k[M];this.set(H[0],H[1])}}I.prototype.clear=p,I.prototype.delete=g,I.prototype.get=w,I.prototype.has=E,I.prototype.set=x,P.exports=I},51501:(P,W,f)=>{var w=f(53436)(f(12119),"Map");P.exports=w},99850:(P,W,f)=>{var p=f(10638),g=f(11184),w=f(70866),E=f(43771),x=f(51772);function I(k){var M=-1,B=null==k?0:k.length;for(this.clear();++M<B;){var H=k[M];this.set(H[0],H[1])}}I.prototype.clear=p,I.prototype.delete=g,I.prototype.get=w,I.prototype.has=E,I.prototype.set=x,P.exports=I},44267:(P,W,f)=>{var w=f(53436)(f(12119),"Promise");P.exports=w},46323:(P,W,f)=>{var w=f(53436)(f(12119),"Set");P.exports=w},58849:(P,W,f)=>{var p=f(99850),g=f(4600),w=f(31387);function E(x){var I=-1,k=null==x?0:x.length;for(this.__data__=new p;++I<k;)this.add(x[I])}E.prototype.add=E.prototype.push=g,E.prototype.has=w,P.exports=E},2858:(P,W,f)=>{var p=f(9215),g=f(13720),w=f(64410),E=f(45576),x=f(22247),I=f(41585);function k(M){var B=this.__data__=new p(M);this.size=B.size}k.prototype.clear=g,k.prototype.delete=w,k.prototype.get=E,k.prototype.has=x,k.prototype.set=I,P.exports=k},60443:(P,W,f)=>{var p=f(12119);P.exports=p.Symbol},73457:(P,W,f)=>{var p=f(12119);P.exports=p.Uint8Array},24243:(P,W,f)=>{var w=f(53436)(f(12119),"WeakMap");P.exports=w},26999:P=>{P.exports=function W(f,p,g){switch(g.length){case 0:return f.call(p);case 1:return f.call(p,g[0]);case 2:return f.call(p,g[0],g[1]);case 3:return f.call(p,g[0],g[1],g[2])}return f.apply(p,g)}},96837:P=>{P.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length;++g<w&&!1!==p(f[g],g,f););return f}},69779:P=>{P.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length,E=0,x=[];++g<w;){var I=f[g];p(I,g,f)&&(x[E++]=I)}return x}},61253:(P,W,f)=>{var p=f(14164);P.exports=function g(w,E){return!(null==w||!w.length)&&p(w,E,0)>-1}},37609:P=>{P.exports=function W(f,p,g){for(var w=-1,E=null==f?0:f.length;++w<E;)if(g(p,f[w]))return!0;return!1}},72271:(P,W,f)=>{var p=f(85334),g=f(77151),w=f(21503),E=f(80891),x=f(58442),I=f(48159),M=Object.prototype.hasOwnProperty;P.exports=function B(H,O){var X=w(H),et=!X&&g(H),ct=!X&&!et&&E(H),i=!X&&!et&&!ct&&I(H),st=X||et||ct||i,vt=st?p(H.length,String):[],pt=vt.length;for(var nt in H)(O||M.call(H,nt))&&(!st||!("length"==nt||ct&&("offset"==nt||"parent"==nt)||i&&("buffer"==nt||"byteLength"==nt||"byteOffset"==nt)||x(nt,pt)))&&vt.push(nt);return vt}},84633:P=>{P.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length,E=Array(w);++g<w;)E[g]=p(f[g],g,f);return E}},85059:P=>{P.exports=function W(f,p){for(var g=-1,w=p.length,E=f.length;++g<w;)f[E+g]=p[g];return f}},8745:P=>{P.exports=function W(f,p,g,w){var E=-1,x=null==f?0:f.length;for(w&&x&&(g=f[++E]);++E<x;)g=p(g,f[E],E,f);return g}},79503:P=>{P.exports=function W(f,p){for(var g=-1,w=null==f?0:f.length;++g<w;)if(p(f[g],g,f))return!0;return!1}},75481:(P,W,f)=>{var g=f(11847)("length");P.exports=g},49276:(P,W,f)=>{var p=f(85683),g=f(20217);P.exports=function w(E,x,I){(void 0!==I&&!g(E[x],I)||void 0===I&&!(x in E))&&p(E,x,I)}},89719:(P,W,f)=>{var p=f(85683),g=f(20217),E=Object.prototype.hasOwnProperty;P.exports=function x(I,k,M){var B=I[k];(!E.call(I,k)||!g(B,M)||void 0===M&&!(k in I))&&p(I,k,M)}},43503:(P,W,f)=>{var p=f(20217);P.exports=function g(w,E){for(var x=w.length;x--;)if(p(w[x][0],E))return x;return-1}},94121:(P,W,f)=>{var p=f(31989),g=f(118);P.exports=function w(E,x){return E&&p(x,g(x),E)}},99287:(P,W,f)=>{var p=f(31989),g=f(16555);P.exports=function w(E,x){return E&&p(x,g(x),E)}},85683:(P,W,f)=>{var p=f(56713);P.exports=function g(w,E,x){"__proto__"==E&&p?p(w,E,{configurable:!0,enumerable:!0,value:x,writable:!0}):w[E]=x}},44462:(P,W,f)=>{var p=f(2858),g=f(96837),w=f(89719),E=f(94121),x=f(99287),I=f(19292),k=f(99454),M=f(84444),B=f(59905),H=f(47597),O=f(6967),X=f(28794),et=f(76782),ct=f(37878),i=f(4264),st=f(21503),vt=f(80891),pt=f(13222),nt=f(25940),yt=f(90799),Pt=f(118),Ft=f(16555),te="[object Arguments]",Qe="[object Function]",Hr="[object Object]",D={};D[te]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[Hr]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[Qe]=D["[object WeakMap]"]=!1,P.exports=function z(rt,xt,$t,Qt,xe,Ne){var Ke,pn=1&xt,yn=2&xt,gn=4&xt;if($t&&(Ke=xe?$t(rt,Qt,xe,Ne):$t(rt)),void 0!==Ke)return Ke;if(!nt(rt))return rt;var ir=st(rt);if(ir){if(Ke=et(rt),!pn)return k(rt,Ke)}else{var tr=X(rt),ui=tr==Qe||"[object GeneratorFunction]"==tr;if(vt(rt))return I(rt,pn);if(tr==Hr||tr==te||ui&&!xe){if(Ke=yn||ui?{}:i(rt),!pn)return yn?B(rt,x(Ke,rt)):M(rt,E(Ke,rt))}else{if(!D[tr])return xe?rt:{};Ke=ct(rt,tr,pn)}}Ne||(Ne=new p);var zn=Ne.get(rt);if(zn)return zn;Ne.set(rt,Ke),yt(rt)?rt.forEach(function(lr){Ke.add(z(lr,xt,$t,lr,rt,Ne))}):pt(rt)&&rt.forEach(function(lr,Mr){Ke.set(Mr,z(lr,xt,$t,Mr,rt,Ne))});var er=ir?void 0:(gn?yn?O:H:yn?Ft:Pt)(rt);return g(er||rt,function(lr,Mr){er&&(lr=rt[Mr=lr]),w(Ke,Mr,z(lr,xt,$t,Mr,rt,Ne))}),Ke}},78858:(P,W,f)=>{var p=f(25940),g=Object.create,w=function(){function E(){}return function(x){if(!p(x))return{};if(g)return g(x);E.prototype=x;var I=new E;return E.prototype=void 0,I}}();P.exports=w},43132:(P,W,f)=>{var p=f(45184),w=f(16539)(p);P.exports=w},67308:(P,W,f)=>{var p=f(44129);P.exports=function g(w,E,x){for(var I=-1,k=w.length;++I<k;){var M=w[I],B=E(M);if(null!=B&&(void 0===H?B==B&&!p(B):x(B,H)))var H=B,O=M}return O}},33609:(P,W,f)=>{var p=f(43132);P.exports=function g(w,E){var x=[];return p(w,function(I,k,M){E(I,k,M)&&x.push(I)}),x}},65317:P=>{P.exports=function W(f,p,g,w){for(var E=f.length,x=g+(w?1:-1);w?x--:++x<E;)if(p(f[x],x,f))return x;return-1}},50686:(P,W,f)=>{var p=f(85059),g=f(75039);P.exports=function w(E,x,I,k,M){var B=-1,H=E.length;for(I||(I=g),M||(M=[]);++B<H;){var O=E[B];x>0&&I(O)?x>1?w(O,x-1,I,k,M):p(M,O):k||(M[M.length]=O)}return M}},30755:(P,W,f)=>{var g=f(40456)();P.exports=g},45184:(P,W,f)=>{var p=f(30755),g=f(118);P.exports=function w(E,x){return E&&p(E,x,g)}},15456:(P,W,f)=>{var p=f(65456),g=f(68533);P.exports=function w(E,x){for(var I=0,k=(x=p(x,E)).length;null!=E&&I<k;)E=E[g(x[I++])];return I&&I==k?E:void 0}},38247:(P,W,f)=>{var p=f(85059),g=f(21503);P.exports=function w(E,x,I){var k=x(E);return g(E)?k:p(k,I(E))}},93337:(P,W,f)=>{var p=f(60443),g=f(21318),w=f(92902),I=p?p.toStringTag:void 0;P.exports=function k(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":I&&I in Object(M)?g(M):w(M)}},31100:P=>{P.exports=function W(f,p){return f>p}},84781:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function p(g,w){return null!=g&&f.call(g,w)}},69989:P=>{P.exports=function W(f,p){return null!=f&&p in Object(f)}},14164:(P,W,f)=>{var p=f(65317),g=f(70968),w=f(24977);P.exports=function E(x,I,k){return I==I?w(x,I,k):p(x,g,k)}},60186:(P,W,f)=>{var p=f(93337),g=f(72671);P.exports=function E(x){return g(x)&&"[object Arguments]"==p(x)}},85740:(P,W,f)=>{var p=f(58325),g=f(72671);P.exports=function w(E,x,I,k,M){return E===x||(null==E||null==x||!g(E)&&!g(x)?E!=E&&x!=x:p(E,x,I,k,w,M))}},58325:(P,W,f)=>{var p=f(2858),g=f(63914),w=f(78583),E=f(32286),x=f(28794),I=f(21503),k=f(80891),M=f(48159),H="[object Arguments]",O="[object Array]",X="[object Object]",ct=Object.prototype.hasOwnProperty;P.exports=function i(st,vt,pt,nt,yt,Pt){var Ft=I(st),C=I(vt),jt=Ft?O:x(st),ne=C?O:x(vt),te=(jt=jt==H?X:jt)==X,ae=(ne=ne==H?X:ne)==X,ue=jt==ne;if(ue&&k(st)){if(!k(vt))return!1;Ft=!0,te=!1}if(ue&&!te)return Pt||(Pt=new p),Ft||M(st)?g(st,vt,pt,nt,yt,Pt):w(st,vt,jt,pt,nt,yt,Pt);if(!(1&pt)){var he=te&&ct.call(st,"__wrapped__"),Ee=ae&&ct.call(vt,"__wrapped__");if(he||Ee){var Qe=he?st.value():st,fn=Ee?vt.value():vt;return Pt||(Pt=new p),yt(Qe,fn,pt,nt,Pt)}}return!!ue&&(Pt||(Pt=new p),E(st,vt,pt,nt,yt,Pt))}},97021:(P,W,f)=>{var p=f(28794),g=f(72671);P.exports=function E(x){return g(x)&&"[object Map]"==p(x)}},40431:(P,W,f)=>{var p=f(2858),g=f(85740);P.exports=function x(I,k,M,B){var H=M.length,O=H,X=!B;if(null==I)return!O;for(I=Object(I);H--;){var et=M[H];if(X&&et[2]?et[1]!==I[et[0]]:!(et[0]in I))return!1}for(;++H<O;){var ct=(et=M[H])[0],i=I[ct],st=et[1];if(X&&et[2]){if(void 0===i&&!(ct in I))return!1}else{var vt=new p;if(B)var pt=B(i,st,ct,I,k,vt);if(!(void 0===pt?g(st,i,3,B,vt):pt))return!1}}return!0}},70968:P=>{P.exports=function W(f){return f!=f}},37304:(P,W,f)=>{var p=f(75946),g=f(91943),w=f(25940),E=f(52827),I=/^\[object .+?Constructor\]$/,O=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");P.exports=function X(et){return!(!w(et)||g(et))&&(p(et)?O:I).test(E(et))}},771:(P,W,f)=>{var p=f(28794),g=f(72671);P.exports=function E(x){return g(x)&&"[object Set]"==p(x)}},1083:(P,W,f)=>{var p=f(93337),g=f(96231),w=f(72671),ue={};ue["[object Float32Array]"]=ue["[object Float64Array]"]=ue["[object Int8Array]"]=ue["[object Int16Array]"]=ue["[object Int32Array]"]=ue["[object Uint8Array]"]=ue["[object Uint8ClampedArray]"]=ue["[object Uint16Array]"]=ue["[object Uint32Array]"]=!0,ue["[object Arguments]"]=ue["[object Array]"]=ue["[object ArrayBuffer]"]=ue["[object Boolean]"]=ue["[object DataView]"]=ue["[object Date]"]=ue["[object Error]"]=ue["[object Function]"]=ue["[object Map]"]=ue["[object Number]"]=ue["[object Object]"]=ue["[object RegExp]"]=ue["[object Set]"]=ue["[object String]"]=ue["[object WeakMap]"]=!1,P.exports=function he(Ee){return w(Ee)&&g(Ee.length)&&!!ue[p(Ee)]}},96517:(P,W,f)=>{var p=f(98133),g=f(9458),w=f(32608),E=f(21503),x=f(87495);P.exports=function I(k){return"function"==typeof k?k:null==k?w:"object"==typeof k?E(k)?g(k[0],k[1]):p(k):x(k)}},81172:(P,W,f)=>{var p=f(45488),g=f(85491),E=Object.prototype.hasOwnProperty;P.exports=function x(I){if(!p(I))return g(I);var k=[];for(var M in Object(I))E.call(I,M)&&"constructor"!=M&&k.push(M);return k}},92809:(P,W,f)=>{var p=f(25940),g=f(45488),w=f(32158),x=Object.prototype.hasOwnProperty;P.exports=function I(k){if(!p(k))return w(k);var M=g(k),B=[];for(var H in k)"constructor"==H&&(M||!x.call(k,H))||B.push(H);return B}},99069:P=>{P.exports=function W(f,p){return f<p}},92046:(P,W,f)=>{var p=f(43132),g=f(56507);P.exports=function w(E,x){var I=-1,k=g(E)?Array(E.length):[];return p(E,function(M,B,H){k[++I]=x(M,B,H)}),k}},98133:(P,W,f)=>{var p=f(40431),g=f(22379),w=f(642);P.exports=function E(x){var I=g(x);return 1==I.length&&I[0][2]?w(I[0][0],I[0][1]):function(k){return k===x||p(k,x,I)}}},9458:(P,W,f)=>{var p=f(85740),g=f(8817),w=f(11172),E=f(45352),x=f(22442),I=f(642),k=f(68533);P.exports=function H(O,X){return E(O)&&x(X)?I(k(O),X):function(et){var ct=g(et,O);return void 0===ct&&ct===X?w(et,O):p(X,ct,3)}}},73842:(P,W,f)=>{var p=f(2858),g=f(49276),w=f(30755),E=f(33675),x=f(25940),I=f(16555),k=f(99351);P.exports=function M(B,H,O,X,et){B!==H&&w(H,function(ct,i){if(et||(et=new p),x(ct))E(B,H,i,O,M,X,et);else{var st=X?X(k(B,i),ct,i+"",B,H,et):void 0;void 0===st&&(st=ct),g(B,i,st)}},I)}},33675:(P,W,f)=>{var p=f(49276),g=f(19292),w=f(65208),E=f(99454),x=f(4264),I=f(77151),k=f(21503),M=f(21330),B=f(80891),H=f(75946),O=f(25940),X=f(97614),et=f(48159),ct=f(99351),i=f(8067);P.exports=function st(vt,pt,nt,yt,Pt,Ft,C){var jt=ct(vt,nt),ne=ct(pt,nt),te=C.get(ne);if(te)p(vt,nt,te);else{var ae=Ft?Ft(jt,ne,nt+"",vt,pt,C):void 0,ue=void 0===ae;if(ue){var he=k(ne),Ee=!he&&B(ne),Qe=!he&&!Ee&&et(ne);ae=ne,he||Ee||Qe?k(jt)?ae=jt:M(jt)?ae=E(jt):Ee?(ue=!1,ae=g(ne,!0)):Qe?(ue=!1,ae=w(ne,!0)):ae=[]:X(ne)||I(ne)?(ae=jt,I(jt)?ae=i(jt):(!O(jt)||H(jt))&&(ae=x(ne))):ue=!1}ue&&(C.set(ne,ae),Pt(ae,ne,yt,Ft,C),C.delete(ne)),p(vt,nt,ae)}}},6119:(P,W,f)=>{var p=f(84633),g=f(15456),w=f(96517),E=f(92046),x=f(18750),I=f(85647),k=f(41215),M=f(32608),B=f(21503);P.exports=function H(O,X,et){X=X.length?p(X,function(st){return B(st)?function(vt){return g(vt,1===st.length?st[0]:st)}:st}):[M];var ct=-1;X=p(X,I(w));var i=E(O,function(st,vt,pt){return{criteria:p(X,function(yt){return yt(st)}),index:++ct,value:st}});return x(i,function(st,vt){return k(st,vt,et)})}},83021:(P,W,f)=>{var p=f(95495),g=f(11172);P.exports=function w(E,x){return p(E,x,function(I,k){return g(E,k)})}},95495:(P,W,f)=>{var p=f(15456),g=f(55963),w=f(65456);P.exports=function E(x,I,k){for(var M=-1,B=I.length,H={};++M<B;){var O=I[M],X=p(x,O);k(X,O)&&g(H,w(O,x),X)}return H}},11847:P=>{P.exports=function W(f){return function(p){return null==p?void 0:p[f]}}},39222:(P,W,f)=>{var p=f(15456);P.exports=function g(w){return function(E){return p(E,w)}}},16307:P=>{var W=Math.ceil,f=Math.max;P.exports=function p(g,w,E,x){for(var I=-1,k=f(W((w-g)/(E||1)),0),M=Array(k);k--;)M[x?k:++I]=g,g+=E;return M}},13570:P=>{P.exports=function W(f,p,g,w,E){return E(f,function(x,I,k){g=w?(w=!1,x):p(g,x,I,k)}),g}},23269:(P,W,f)=>{var p=f(32608),g=f(53983),w=f(72185);P.exports=function E(x,I){return w(g(x,I,p),x+"")}},55963:(P,W,f)=>{var p=f(89719),g=f(65456),w=f(58442),E=f(25940),x=f(68533);P.exports=function I(k,M,B,H){if(!E(k))return k;for(var O=-1,X=(M=g(M,k)).length,et=X-1,ct=k;null!=ct&&++O<X;){var i=x(M[O]),st=B;if("__proto__"===i||"constructor"===i||"prototype"===i)return k;if(O!=et){var vt=ct[i];void 0===(st=H?H(vt,i,ct):void 0)&&(st=E(vt)?vt:w(M[O+1])?[]:{})}p(ct,i,st),ct=ct[i]}return k}},69510:(P,W,f)=>{var p=f(76684),g=f(56713),w=f(32608);P.exports=g?function(x,I){return g(x,"toString",{configurable:!0,enumerable:!1,value:p(I),writable:!0})}:w},18750:P=>{P.exports=function W(f,p){var g=f.length;for(f.sort(p);g--;)f[g]=f[g].value;return f}},85334:P=>{P.exports=function W(f,p){for(var g=-1,w=Array(f);++g<f;)w[g]=p(g);return w}},93935:(P,W,f)=>{var p=f(60443),g=f(84633),w=f(21503),E=f(44129),I=p?p.prototype:void 0,k=I?I.toString:void 0;P.exports=function M(B){if("string"==typeof B)return B;if(w(B))return g(B,M)+"";if(E(B))return k?k.call(B):"";var H=B+"";return"0"==H&&1/B==-1/0?"-0":H}},83348:(P,W,f)=>{var p=f(42760),g=/^\s+/;P.exports=function w(E){return E&&E.slice(0,p(E)+1).replace(g,"")}},85647:P=>{P.exports=function W(f){return function(p){return f(p)}}},80707:(P,W,f)=>{var p=f(58849),g=f(61253),w=f(37609),E=f(25972),x=f(14575),I=f(24174);P.exports=function M(B,H,O){var X=-1,et=g,ct=B.length,i=!0,st=[],vt=st;if(O)i=!1,et=w;else if(ct>=200){var pt=H?null:x(B);if(pt)return I(pt);i=!1,et=E,vt=new p}else vt=H?[]:st;t:for(;++X<ct;){var nt=B[X],yt=H?H(nt):nt;if(nt=O||0!==nt?nt:0,i&&yt==yt){for(var Pt=vt.length;Pt--;)if(vt[Pt]===yt)continue t;H&&vt.push(yt),st.push(nt)}else et(vt,yt,O)||(vt!==st&&vt.push(yt),st.push(nt))}return st}},19179:(P,W,f)=>{var p=f(84633);P.exports=function g(w,E){return p(E,function(x){return w[x]})}},38645:P=>{P.exports=function W(f,p,g){for(var w=-1,E=f.length,x=p.length,I={};++w<E;)g(I,f[w],w<x?p[w]:void 0);return I}},25972:P=>{P.exports=function W(f,p){return f.has(p)}},21481:(P,W,f)=>{var p=f(32608);P.exports=function g(w){return"function"==typeof w?w:p}},65456:(P,W,f)=>{var p=f(21503),g=f(45352),w=f(32855),E=f(73943);P.exports=function x(I,k){return p(I)?I:g(I,k)?[I]:w(E(I))}},43362:(P,W,f)=>{var p=f(73457);P.exports=function g(w){var E=new w.constructor(w.byteLength);return new p(E).set(new p(w)),E}},19292:(P,W,f)=>{P=f.nmd(P);var p=f(12119),g=W&&!W.nodeType&&W,w=g&&P&&!P.nodeType&&P,x=w&&w.exports===g?p.Buffer:void 0,I=x?x.allocUnsafe:void 0;P.exports=function k(M,B){if(B)return M.slice();var H=M.length,O=I?I(H):new M.constructor(H);return M.copy(O),O}},17e3:(P,W,f)=>{var p=f(43362);P.exports=function g(w,E){var x=E?p(w.buffer):w.buffer;return new w.constructor(x,w.byteOffset,w.byteLength)}},74098:P=>{var W=/\w*$/;P.exports=function f(p){var g=new p.constructor(p.source,W.exec(p));return g.lastIndex=p.lastIndex,g}},62533:(P,W,f)=>{var p=f(60443),g=p?p.prototype:void 0,w=g?g.valueOf:void 0;P.exports=function E(x){return w?Object(w.call(x)):{}}},65208:(P,W,f)=>{var p=f(43362);P.exports=function g(w,E){var x=E?p(w.buffer):w.buffer;return new w.constructor(x,w.byteOffset,w.length)}},13443:(P,W,f)=>{var p=f(44129);P.exports=function g(w,E){if(w!==E){var x=void 0!==w,I=null===w,k=w==w,M=p(w),B=void 0!==E,H=null===E,O=E==E,X=p(E);if(!H&&!X&&!M&&w>E||M&&B&&O&&!H&&!X||I&&B&&O||!x&&O||!k)return 1;if(!I&&!M&&!X&&w<E||X&&x&&k&&!I&&!M||H&&x&&k||!B&&k||!O)return-1}return 0}},41215:(P,W,f)=>{var p=f(13443);P.exports=function g(w,E,x){for(var I=-1,k=w.criteria,M=E.criteria,B=k.length,H=x.length;++I<B;){var O=p(k[I],M[I]);if(O)return I>=H?O:O*("desc"==x[I]?-1:1)}return w.index-E.index}},99454:P=>{P.exports=function W(f,p){var g=-1,w=f.length;for(p||(p=Array(w));++g<w;)p[g]=f[g];return p}},31989:(P,W,f)=>{var p=f(89719),g=f(85683);P.exports=function w(E,x,I,k){var M=!I;I||(I={});for(var B=-1,H=x.length;++B<H;){var O=x[B],X=k?k(I[O],E[O],O,I,E):void 0;void 0===X&&(X=E[O]),M?g(I,O,X):p(I,O,X)}return I}},84444:(P,W,f)=>{var p=f(31989),g=f(39383);P.exports=function w(E,x){return p(E,g(E),x)}},59905:(P,W,f)=>{var p=f(31989),g=f(53051);P.exports=function w(E,x){return p(E,g(E),x)}},24610:(P,W,f)=>{var p=f(12119);P.exports=p["__core-js_shared__"]},84944:(P,W,f)=>{var p=f(23269),g=f(93342);P.exports=function w(E){return p(function(x,I){var k=-1,M=I.length,B=M>1?I[M-1]:void 0,H=M>2?I[2]:void 0;for(B=E.length>3&&"function"==typeof B?(M--,B):void 0,H&&g(I[0],I[1],H)&&(B=M<3?void 0:B,M=1),x=Object(x);++k<M;){var O=I[k];O&&E(x,O,k,B)}return x})}},16539:(P,W,f)=>{var p=f(56507);P.exports=function g(w,E){return function(x,I){if(null==x)return x;if(!p(x))return w(x,I);for(var k=x.length,M=E?k:-1,B=Object(x);(E?M--:++M<k)&&!1!==I(B[M],M,B););return x}}},40456:P=>{P.exports=function W(f){return function(p,g,w){for(var E=-1,x=Object(p),I=w(p),k=I.length;k--;){var M=I[f?k:++E];if(!1===g(x[M],M,x))break}return p}}},24653:(P,W,f)=>{var p=f(96517),g=f(56507),w=f(118);P.exports=function E(x){return function(I,k,M){var B=Object(I);if(!g(I)){var H=p(k,3);I=w(I),k=function(X){return H(B[X],X,B)}}var O=x(I,k,M);return O>-1?B[H?I[O]:O]:void 0}}},97509:(P,W,f)=>{var p=f(16307),g=f(93342),w=f(12232);P.exports=function E(x){return function(I,k,M){return M&&"number"!=typeof M&&g(I,k,M)&&(k=M=void 0),I=w(I),void 0===k?(k=I,I=0):k=w(k),M=void 0===M?I<k?1:-1:w(M),p(I,k,M,x)}}},14575:(P,W,f)=>{var p=f(46323),g=f(12552),w=f(24174),x=p&&1/w(new p([,-0]))[1]==1/0?function(I){return new p(I)}:g;P.exports=x},56713:(P,W,f)=>{var p=f(53436),g=function(){try{var w=p(Object,"defineProperty");return w({},"",{}),w}catch(E){}}();P.exports=g},63914:(P,W,f)=>{var p=f(58849),g=f(79503),w=f(25972);P.exports=function I(k,M,B,H,O,X){var et=1&B,ct=k.length,i=M.length;if(ct!=i&&!(et&&i>ct))return!1;var st=X.get(k),vt=X.get(M);if(st&&vt)return st==M&&vt==k;var pt=-1,nt=!0,yt=2&B?new p:void 0;for(X.set(k,M),X.set(M,k);++pt<ct;){var Pt=k[pt],Ft=M[pt];if(H)var C=et?H(Ft,Pt,pt,M,k,X):H(Pt,Ft,pt,k,M,X);if(void 0!==C){if(C)continue;nt=!1;break}if(yt){if(!g(M,function(jt,ne){if(!w(yt,ne)&&(Pt===jt||O(Pt,jt,B,H,X)))return yt.push(ne)})){nt=!1;break}}else if(Pt!==Ft&&!O(Pt,Ft,B,H,X)){nt=!1;break}}return X.delete(k),X.delete(M),nt}},78583:(P,W,f)=>{var p=f(60443),g=f(73457),w=f(20217),E=f(63914),x=f(83205),I=f(24174),yt=p?p.prototype:void 0,Pt=yt?yt.valueOf:void 0;P.exports=function Ft(C,jt,ne,te,ae,ue,he){switch(ne){case"[object DataView]":if(C.byteLength!=jt.byteLength||C.byteOffset!=jt.byteOffset)return!1;C=C.buffer,jt=jt.buffer;case"[object ArrayBuffer]":return!(C.byteLength!=jt.byteLength||!ue(new g(C),new g(jt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return w(+C,+jt);case"[object Error]":return C.name==jt.name&&C.message==jt.message;case"[object RegExp]":case"[object String]":return C==jt+"";case"[object Map]":var Ee=x;case"[object Set]":if(Ee||(Ee=I),C.size!=jt.size&&!(1&te))return!1;var fn=he.get(C);if(fn)return fn==jt;te|=2,he.set(C,jt);var Re=E(Ee(C),Ee(jt),te,ae,ue,he);return he.delete(C),Re;case"[object Symbol]":if(Pt)return Pt.call(C)==Pt.call(jt)}return!1}},32286:(P,W,f)=>{var p=f(47597),E=Object.prototype.hasOwnProperty;P.exports=function x(I,k,M,B,H,O){var X=1&M,et=p(I),ct=et.length;if(ct!=p(k).length&&!X)return!1;for(var vt=ct;vt--;){var pt=et[vt];if(!(X?pt in k:E.call(k,pt)))return!1}var nt=O.get(I),yt=O.get(k);if(nt&&yt)return nt==k&&yt==I;var Pt=!0;O.set(I,k),O.set(k,I);for(var Ft=X;++vt<ct;){var C=I[pt=et[vt]],jt=k[pt];if(B)var ne=X?B(jt,C,pt,k,I,O):B(C,jt,pt,I,k,O);if(!(void 0===ne?C===jt||H(C,jt,M,B,O):ne)){Pt=!1;break}Ft||(Ft="constructor"==pt)}if(Pt&&!Ft){var te=I.constructor,ae=k.constructor;te!=ae&&"constructor"in I&&"constructor"in k&&!("function"==typeof te&&te instanceof te&&"function"==typeof ae&&ae instanceof ae)&&(Pt=!1)}return O.delete(I),O.delete(k),Pt}},3975:(P,W,f)=>{var p=f(22274),g=f(53983),w=f(72185);P.exports=function E(x){return w(g(x,void 0,p),x+"")}},79122:P=>{var W="object"==typeof global&&global&&global.Object===Object&&global;P.exports=W},47597:(P,W,f)=>{var p=f(38247),g=f(39383),w=f(118);P.exports=function E(x){return p(x,w,g)}},6967:(P,W,f)=>{var p=f(38247),g=f(53051),w=f(16555);P.exports=function E(x){return p(x,w,g)}},54537:(P,W,f)=>{var p=f(23819);P.exports=function g(w,E){var x=w.__data__;return p(E)?x["string"==typeof E?"string":"hash"]:x.map}},22379:(P,W,f)=>{var p=f(22442),g=f(118);P.exports=function w(E){for(var x=g(E),I=x.length;I--;){var k=x[I],M=E[k];x[I]=[k,M,p(M)]}return x}},53436:(P,W,f)=>{var p=f(37304),g=f(51990);P.exports=function w(E,x){var I=g(E,x);return p(I)?I:void 0}},29519:(P,W,f)=>{var g=f(69385)(Object.getPrototypeOf,Object);P.exports=g},21318:(P,W,f)=>{var p=f(60443),g=Object.prototype,w=g.hasOwnProperty,E=g.toString,x=p?p.toStringTag:void 0;P.exports=function I(k){var M=w.call(k,x),B=k[x];try{k[x]=void 0;var H=!0}catch(X){}var O=E.call(k);return H&&(M?k[x]=B:delete k[x]),O}},39383:(P,W,f)=>{var p=f(69779),g=f(49975),E=Object.prototype.propertyIsEnumerable,x=Object.getOwnPropertySymbols;P.exports=x?function(k){return null==k?[]:(k=Object(k),p(x(k),function(M){return E.call(k,M)}))}:g},53051:(P,W,f)=>{var p=f(85059),g=f(29519),w=f(39383),E=f(49975);P.exports=Object.getOwnPropertySymbols?function(k){for(var M=[];k;)p(M,w(k)),k=g(k);return M}:E},28794:(P,W,f)=>{var p=f(37244),g=f(51501),w=f(44267),E=f(46323),x=f(24243),I=f(93337),k=f(52827),M="[object Map]",H="[object Promise]",O="[object Set]",X="[object WeakMap]",et="[object DataView]",ct=k(p),i=k(g),st=k(w),vt=k(E),pt=k(x),nt=I;(p&&nt(new p(new ArrayBuffer(1)))!=et||g&&nt(new g)!=M||w&&nt(w.resolve())!=H||E&&nt(new E)!=O||x&&nt(new x)!=X)&&(nt=function(yt){var Pt=I(yt),Ft="[object Object]"==Pt?yt.constructor:void 0,C=Ft?k(Ft):"";if(C)switch(C){case ct:return et;case i:return M;case st:return H;case vt:return O;case pt:return X}return Pt}),P.exports=nt},51990:P=>{P.exports=function W(f,p){return null==f?void 0:f[p]}},47283:(P,W,f)=>{var p=f(65456),g=f(77151),w=f(21503),E=f(58442),x=f(96231),I=f(68533);P.exports=function k(M,B,H){for(var O=-1,X=(B=p(B,M)).length,et=!1;++O<X;){var ct=I(B[O]);if(!(et=null!=M&&H(M,ct)))break;M=M[ct]}return et||++O!=X?et:!!(X=null==M?0:M.length)&&x(X)&&E(ct,X)&&(w(M)||g(M))}},77609:P=>{var I=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");P.exports=function k(M){return I.test(M)}},64312:(P,W,f)=>{var p=f(60862);P.exports=function g(){this.__data__=p?p(null):{},this.size=0}},46421:P=>{P.exports=function W(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}},15764:(P,W,f)=>{var p=f(60862),E=Object.prototype.hasOwnProperty;P.exports=function x(I){var k=this.__data__;if(p){var M=k[I];return"__lodash_hash_undefined__"===M?void 0:M}return E.call(k,I)?k[I]:void 0}},18685:(P,W,f)=>{var p=f(60862),w=Object.prototype.hasOwnProperty;P.exports=function E(x){var I=this.__data__;return p?void 0!==I[x]:w.call(I,x)}},26676:(P,W,f)=>{var p=f(60862);P.exports=function w(E,x){var I=this.__data__;return this.size+=this.has(E)?0:1,I[E]=p&&void 0===x?"__lodash_hash_undefined__":x,this}},76782:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function p(g){var w=g.length,E=new g.constructor(w);return w&&"string"==typeof g[0]&&f.call(g,"index")&&(E.index=g.index,E.input=g.input),E}},37878:(P,W,f)=>{var p=f(43362),g=f(17e3),w=f(74098),E=f(62533),x=f(65208);P.exports=function ne(te,ae,ue){var he=te.constructor;switch(ae){case"[object ArrayBuffer]":return p(te);case"[object Boolean]":case"[object Date]":return new he(+te);case"[object DataView]":return g(te,ue);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(te,ue);case"[object Map]":case"[object Set]":return new he;case"[object Number]":case"[object String]":return new he(te);case"[object RegExp]":return w(te);case"[object Symbol]":return E(te)}}},4264:(P,W,f)=>{var p=f(78858),g=f(29519),w=f(45488);P.exports=function E(x){return"function"!=typeof x.constructor||w(x)?{}:p(g(x))}},75039:(P,W,f)=>{var p=f(60443),g=f(77151),w=f(21503),E=p?p.isConcatSpreadable:void 0;P.exports=function x(I){return w(I)||g(I)||!!(E&&I&&I[E])}},58442:P=>{var f=/^(?:0|[1-9]\d*)$/;P.exports=function p(g,w){var E=typeof g;return!!(w=null==w?9007199254740991:w)&&("number"==E||"symbol"!=E&&f.test(g))&&g>-1&&g%1==0&&g<w}},93342:(P,W,f)=>{var p=f(20217),g=f(56507),w=f(58442),E=f(25940);P.exports=function x(I,k,M){if(!E(M))return!1;var B=typeof k;return!!("number"==B?g(M)&&w(k,M.length):"string"==B&&k in M)&&p(M[k],I)}},45352:(P,W,f)=>{var p=f(21503),g=f(44129),w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;P.exports=function x(I,k){if(p(I))return!1;var M=typeof I;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=I&&!g(I))||E.test(I)||!w.test(I)||null!=k&&I in Object(k)}},23819:P=>{P.exports=function W(f){var p=typeof f;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==f:null===f}},91943:(P,W,f)=>{var E,p=f(24610),g=(E=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"";P.exports=function w(E){return!!g&&g in E}},45488:P=>{var W=Object.prototype;P.exports=function f(p){var g=p&&p.constructor;return p===("function"==typeof g&&g.prototype||W)}},22442:(P,W,f)=>{var p=f(25940);P.exports=function g(w){return w==w&&!p(w)}},41840:P=>{P.exports=function W(){this.__data__=[],this.size=0}},34378:(P,W,f)=>{var p=f(43503),w=Array.prototype.splice;P.exports=function E(x){var I=this.__data__,k=p(I,x);return!(k<0||(k==I.length-1?I.pop():w.call(I,k,1),--this.size,0))}},54981:(P,W,f)=>{var p=f(43503);P.exports=function g(w){var E=this.__data__,x=p(E,w);return x<0?void 0:E[x][1]}},67343:(P,W,f)=>{var p=f(43503);P.exports=function g(w){return p(this.__data__,w)>-1}},98895:(P,W,f)=>{var p=f(43503);P.exports=function g(w,E){var x=this.__data__,I=p(x,w);return I<0?(++this.size,x.push([w,E])):x[I][1]=E,this}},10638:(P,W,f)=>{var p=f(54994),g=f(9215),w=f(51501);P.exports=function E(){this.size=0,this.__data__={hash:new p,map:new(w||g),string:new p}}},11184:(P,W,f)=>{var p=f(54537);P.exports=function g(w){var E=p(this,w).delete(w);return this.size-=E?1:0,E}},70866:(P,W,f)=>{var p=f(54537);P.exports=function g(w){return p(this,w).get(w)}},43771:(P,W,f)=>{var p=f(54537);P.exports=function g(w){return p(this,w).has(w)}},51772:(P,W,f)=>{var p=f(54537);P.exports=function g(w,E){var x=p(this,w),I=x.size;return x.set(w,E),this.size+=x.size==I?0:1,this}},83205:P=>{P.exports=function W(f){var p=-1,g=Array(f.size);return f.forEach(function(w,E){g[++p]=[E,w]}),g}},642:P=>{P.exports=function W(f,p){return function(g){return null!=g&&g[f]===p&&(void 0!==p||f in Object(g))}}},90719:(P,W,f)=>{var p=f(30535);P.exports=function w(E){var x=p(E,function(k){return 500===I.size&&I.clear(),k}),I=x.cache;return x}},60862:(P,W,f)=>{var g=f(53436)(Object,"create");P.exports=g},85491:(P,W,f)=>{var g=f(69385)(Object.keys,Object);P.exports=g},32158:P=>{P.exports=function W(f){var p=[];if(null!=f)for(var g in Object(f))p.push(g);return p}},73597:(P,W,f)=>{P=f.nmd(P);var p=f(79122),g=W&&!W.nodeType&&W,w=g&&P&&!P.nodeType&&P,x=w&&w.exports===g&&p.process,I=function(){try{return w&&w.require&&w.require("util").types||x&&x.binding&&x.binding("util")}catch(M){}}();P.exports=I},92902:P=>{var f=Object.prototype.toString;P.exports=function p(g){return f.call(g)}},69385:P=>{P.exports=function W(f,p){return function(g){return f(p(g))}}},53983:(P,W,f)=>{var p=f(26999),g=Math.max;P.exports=function w(E,x,I){return x=g(void 0===x?E.length-1:x,0),function(){for(var k=arguments,M=-1,B=g(k.length-x,0),H=Array(B);++M<B;)H[M]=k[x+M];M=-1;for(var O=Array(x+1);++M<x;)O[M]=k[M];return O[x]=I(H),p(E,this,O)}}},12119:(P,W,f)=>{var p=f(79122),g="object"==typeof self&&self&&self.Object===Object&&self,w=p||g||Function("return this")();P.exports=w},99351:P=>{P.exports=function W(f,p){if(("constructor"!==p||"function"!=typeof f[p])&&"__proto__"!=p)return f[p]}},4600:P=>{P.exports=function f(p){return this.__data__.set(p,"__lodash_hash_undefined__"),this}},31387:P=>{P.exports=function W(f){return this.__data__.has(f)}},24174:P=>{P.exports=function W(f){var p=-1,g=Array(f.size);return f.forEach(function(w){g[++p]=w}),g}},72185:(P,W,f)=>{var p=f(69510),w=f(10029)(p);P.exports=w},10029:P=>{var p=Date.now;P.exports=function g(w){var E=0,x=0;return function(){var I=p(),k=16-(I-x);if(x=I,k>0){if(++E>=800)return arguments[0]}else E=0;return w.apply(void 0,arguments)}}},13720:(P,W,f)=>{var p=f(9215);P.exports=function g(){this.__data__=new p,this.size=0}},64410:P=>{P.exports=function W(f){var p=this.__data__,g=p.delete(f);return this.size=p.size,g}},45576:P=>{P.exports=function W(f){return this.__data__.get(f)}},22247:P=>{P.exports=function W(f){return this.__data__.has(f)}},41585:(P,W,f)=>{var p=f(9215),g=f(51501),w=f(99850);P.exports=function x(I,k){var M=this.__data__;if(M instanceof p){var B=M.__data__;if(!g||B.length<199)return B.push([I,k]),this.size=++M.size,this;M=this.__data__=new w(B)}return M.set(I,k),this.size=M.size,this}},24977:P=>{P.exports=function W(f,p,g){for(var w=g-1,E=f.length;++w<E;)if(f[w]===p)return w;return-1}},52315:(P,W,f)=>{var p=f(75481),g=f(77609),w=f(81149);P.exports=function E(x){return g(x)?w(x):p(x)}},32855:(P,W,f)=>{var p=f(90719),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w=/\\(\\)?/g,E=p(function(x){var I=[];return 46===x.charCodeAt(0)&&I.push(""),x.replace(g,function(k,M,B,H){I.push(B?H.replace(w,"$1"):M||k)}),I});P.exports=E},68533:(P,W,f)=>{var p=f(44129);P.exports=function w(E){if("string"==typeof E||p(E))return E;var x=E+"";return"0"==x&&1/E==-1/0?"-0":x}},52827:P=>{var f=Function.prototype.toString;P.exports=function p(g){if(null!=g){try{return f.call(g)}catch(w){}try{return g+""}catch(w){}}return""}},42760:P=>{var W=/\s/;P.exports=function f(p){for(var g=p.length;g--&&W.test(p.charAt(g)););return g}},81149:P=>{var W="\\ud800-\\udfff",x="["+W+"]",I="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",k="\\ud83c[\\udffb-\\udfff]",B="[^"+W+"]",H="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",et="(?:"+I+"|"+k+")?",ct="[\\ufe0e\\ufe0f]?",st=ct+et+"(?:\\u200d(?:"+[B,H,O].join("|")+")"+ct+et+")*",vt="(?:"+[B+I+"?",I,H,O,x].join("|")+")",pt=RegExp(k+"(?="+k+")|"+vt+st,"g");P.exports=function nt(yt){for(var Pt=pt.lastIndex=0;pt.test(yt);)++Pt;return Pt}},11094:(P,W,f)=>{var p=f(44462);P.exports=function w(E){return p(E,4)}},90733:(P,W,f)=>{var p=f(44462);P.exports=function E(x){return p(x,5)}},76684:P=>{P.exports=function W(f){return function(){return f}}},28800:(P,W,f)=>{var p=f(23269),g=f(20217),w=f(93342),E=f(16555),x=Object.prototype,I=x.hasOwnProperty,k=p(function(M,B){M=Object(M);var H=-1,O=B.length,X=O>2?B[2]:void 0;for(X&&w(B[0],B[1],X)&&(O=1);++H<O;)for(var et=B[H],ct=E(et),i=-1,st=ct.length;++i<st;){var vt=ct[i],pt=M[vt];(void 0===pt||g(pt,x[vt])&&!I.call(M,vt))&&(M[vt]=et[vt])}return M});P.exports=k},35474:(P,W,f)=>{P.exports=f(89851)},20217:P=>{P.exports=function W(f,p){return f===p||f!=f&&p!=p}},35281:(P,W,f)=>{var p=f(69779),g=f(33609),w=f(96517),E=f(21503);P.exports=function x(I,k){return(E(I)?p:g)(I,w(k,3))}},62516:(P,W,f)=>{var w=f(24653)(f(36397));P.exports=w},36397:(P,W,f)=>{var p=f(65317),g=f(96517),w=f(44401),E=Math.max;P.exports=function x(I,k,M){var B=null==I?0:I.length;if(!B)return-1;var H=null==M?0:w(M);return H<0&&(H=E(B+H,0)),p(I,g(k,3),H)}},22274:(P,W,f)=>{var p=f(50686);P.exports=function g(w){return null!=w&&w.length?p(w,1):[]}},89851:(P,W,f)=>{var p=f(96837),g=f(43132),w=f(21481),E=f(21503);P.exports=function x(I,k){return(E(I)?p:g)(I,w(k))}},41176:(P,W,f)=>{var p=f(30755),g=f(21481),w=f(16555);P.exports=function E(x,I){return null==x?x:p(x,g(I),w)}},8817:(P,W,f)=>{var p=f(15456);P.exports=function g(w,E,x){var I=null==w?void 0:p(w,E);return void 0===I?x:I}},54842:(P,W,f)=>{var p=f(84781),g=f(47283);P.exports=function w(E,x){return null!=E&&g(E,x,p)}},11172:(P,W,f)=>{var p=f(69989),g=f(47283);P.exports=function w(E,x){return null!=E&&g(E,x,p)}},32608:P=>{P.exports=function W(f){return f}},77151:(P,W,f)=>{var p=f(60186),g=f(72671),w=Object.prototype,E=w.hasOwnProperty,x=w.propertyIsEnumerable,I=p(function(){return arguments}())?p:function(k){return g(k)&&E.call(k,"callee")&&!x.call(k,"callee")};P.exports=I},21503:P=>{P.exports=Array.isArray},56507:(P,W,f)=>{var p=f(75946),g=f(96231);P.exports=function w(E){return null!=E&&g(E.length)&&!p(E)}},21330:(P,W,f)=>{var p=f(56507),g=f(72671);P.exports=function w(E){return g(E)&&p(E)}},80891:(P,W,f)=>{P=f.nmd(P);var p=f(12119),g=f(63580),w=W&&!W.nodeType&&W,E=w&&P&&!P.nodeType&&P,I=E&&E.exports===w?p.Buffer:void 0;P.exports=(I?I.isBuffer:void 0)||g},71973:(P,W,f)=>{var p=f(81172),g=f(28794),w=f(77151),E=f(21503),x=f(56507),I=f(80891),k=f(45488),M=f(48159),X=Object.prototype.hasOwnProperty;P.exports=function et(ct){if(null==ct)return!0;if(x(ct)&&(E(ct)||"string"==typeof ct||"function"==typeof ct.splice||I(ct)||M(ct)||w(ct)))return!ct.length;var i=g(ct);if("[object Map]"==i||"[object Set]"==i)return!ct.size;if(k(ct))return!p(ct).length;for(var st in ct)if(X.call(ct,st))return!1;return!0}},75946:(P,W,f)=>{var p=f(93337),g=f(25940);P.exports=function k(M){if(!g(M))return!1;var B=p(M);return"[object Function]"==B||"[object GeneratorFunction]"==B||"[object AsyncFunction]"==B||"[object Proxy]"==B}},96231:P=>{P.exports=function f(p){return"number"==typeof p&&p>-1&&p%1==0&&p<=9007199254740991}},13222:(P,W,f)=>{var p=f(97021),g=f(85647),w=f(73597),E=w&&w.isMap,x=E?g(E):p;P.exports=x},25940:P=>{P.exports=function W(f){var p=typeof f;return null!=f&&("object"==p||"function"==p)}},72671:P=>{P.exports=function W(f){return null!=f&&"object"==typeof f}},97614:(P,W,f)=>{var p=f(93337),g=f(29519),w=f(72671),k=Function.prototype.toString,M=Object.prototype.hasOwnProperty,B=k.call(Object);P.exports=function H(O){if(!w(O)||"[object Object]"!=p(O))return!1;var X=g(O);if(null===X)return!0;var et=M.call(X,"constructor")&&X.constructor;return"function"==typeof et&&et instanceof et&&k.call(et)==B}},90799:(P,W,f)=>{var p=f(771),g=f(85647),w=f(73597),E=w&&w.isSet,x=E?g(E):p;P.exports=x},30248:(P,W,f)=>{var p=f(93337),g=f(21503),w=f(72671);P.exports=function x(I){return"string"==typeof I||!g(I)&&w(I)&&"[object String]"==p(I)}},44129:(P,W,f)=>{var p=f(93337),g=f(72671);P.exports=function E(x){return"symbol"==typeof x||g(x)&&"[object Symbol]"==p(x)}},48159:(P,W,f)=>{var p=f(1083),g=f(85647),w=f(73597),E=w&&w.isTypedArray,x=E?g(E):p;P.exports=x},34235:P=>{P.exports=function W(f){return void 0===f}},118:(P,W,f)=>{var p=f(72271),g=f(81172),w=f(56507);P.exports=function E(x){return w(x)?p(x):g(x)}},16555:(P,W,f)=>{var p=f(72271),g=f(92809),w=f(56507);P.exports=function E(x){return w(x)?p(x,!0):g(x)}},25809:P=>{P.exports=function W(f){var p=null==f?0:f.length;return p?f[p-1]:void 0}},17489:function(P,W,f){var p;P=f.nmd(P),function(){var g,I="Expected a function",M="__lodash_hash_undefined__",H="__lodash_placeholder__",C=128,Re=1/0,hr=9007199254740991,zt=4294967295,Bn=[["ary",C],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ut="[object Arguments]",Et="[object Array]",pe="[object Boolean]",Te="[object Date]",Rn="[object Error]",rr="[object Function]",ki="[object GeneratorFunction]",ln="[object Map]",Ze="[object Number]",z="[object Object]",rt="[object Promise]",$t="[object RegExp]",Qt="[object Set]",xe="[object String]",Ne="[object Symbol]",pn="[object WeakMap]",gn="[object ArrayBuffer]",ir="[object DataView]",tr="[object Float32Array]",ui="[object Float64Array]",zn="[object Int8Array]",or="[object Int16Array]",er="[object Int32Array]",lr="[object Uint8Array]",Mr="[object Uint8ClampedArray]",li="[object Uint16Array]",Cr="[object Uint32Array]",yr=/\b__p \+= '';/g,Oo=/\b(__p \+=) '' \+/g,rs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mo=/&(?:amp|lt|gt|quot|#39);/g,sa=/[&<>"']/g,Ur=RegExp(mo.source),Si=RegExp(sa.source),Pn=/<%-([\s\S]+?)%>/g,Ra=/<%([\s\S]+?)%>/g,Ro=/<%=([\s\S]+?)%>/g,yo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,No=/^\w*$/,rn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eo=/[\\^$.*+?()[\]{}|]/g,Na=RegExp(eo.source),xo=/^\s+/,Nr=/\s/,Zr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Li=/\{\n\/\* \[wrapped with (.+)\] \*/,zr=/,? & /,Sr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bo=/[()=,{}\[\]\/\s]/,no=/\\(\\)?/g,ua=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,is=/\w*$/,Wi=/^[-+]0x[0-9a-f]+$/i,la=/^0b[01]+$/i,Da=/^\[object .+?Constructor\]$/,on=/^0o[0-7]+$/i,Do=/^(?:0|[1-9]\d*)$/,Fa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oi=/($^)/,ro=/['\n\r\u2028\u2029\\]/g,io="\\ud800-\\udfff",Fo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ca="\\u2700-\\u27bf",ht="a-z\\xdf-\\xf6\\xf8-\\xff",qr="A-Z\\xc0-\\xd6\\xd8-\\xde",Vo="\\ufe0e\\ufe0f",Ri="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tr="["+io+"]",os="["+Ri+"]",_r="["+Fo+"]",fi="\\d+",di="["+ca+"]",oo="["+ht+"]",Ho="[^"+io+Ri+fi+ca+ht+qr+"]",Gr="\\ud83c[\\udffb-\\udfff]",de="[^"+io+"]",da="(?:\\ud83c[\\udde6-\\uddff]){2}",Wr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yi="["+qr+"]",Fn="(?:"+oo+"|"+Ho+")",_o="(?:"+Yi+"|"+Ho+")",Ba="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",jo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",wo="(?:"+_r+"|"+Gr+")?",ha="["+Vo+"]?",hi=ha+wo+"(?:\\u200d(?:"+[de,da,Wr].join("|")+")"+ha+wo+")*",Xi="(?:"+[di,da,Wr].join("|")+")"+hi,wr="(?:"+[de+_r+"?",_r,da,Wr,Tr].join("|")+")",Ha=RegExp("['\u2019]","g"),kr=RegExp(_r,"g"),Ki=RegExp(Gr+"(?="+Gr+")|"+wr+hi,"g"),Ti=RegExp([Yi+"?"+oo+"+"+Ba+"(?="+[os,Yi,"$"].join("|")+")",_o+"+"+jo+"(?="+[os,Yi+Fn,"$"].join("|")+")",Yi+"?"+Fn+"+"+Ba,Yi+"+"+jo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fi,Xi].join("|"),"g"),pa=RegExp("[\\u200d"+io+Fo+Vo+"]"),Ei=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ga=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],va=-1,Gn={};Gn[tr]=Gn[ui]=Gn[zn]=Gn[or]=Gn[er]=Gn[lr]=Gn[Mr]=Gn[li]=Gn[Cr]=!0,Gn[Ut]=Gn[Et]=Gn[gn]=Gn[pe]=Gn[ir]=Gn[Te]=Gn[Rn]=Gn[rr]=Gn[ln]=Gn[Ze]=Gn[z]=Gn[$t]=Gn[Qt]=Gn[xe]=Gn[pn]=!1;var sn={};sn[Ut]=sn[Et]=sn[gn]=sn[ir]=sn[pe]=sn[Te]=sn[tr]=sn[ui]=sn[zn]=sn[or]=sn[er]=sn[ln]=sn[Ze]=sn[z]=sn[$t]=sn[Qt]=sn[xe]=sn[Ne]=sn[lr]=sn[Mr]=sn[li]=sn[Cr]=!0,sn[Rn]=sn[rr]=sn[pn]=!1;var J={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,mt=parseInt,Lt="object"==typeof global&&global&&global.Object===Object&&global,St="object"==typeof self&&self&&self.Object===Object&&self,l=Lt||St||Function("return this")(),d=W&&!W.nodeType&&W,y=d&&P&&!P.nodeType&&P,_=y&&y.exports===d,R=_&&Lt.process,F=function(){try{return y&&y.require&&y.require("util").types||R&&R.binding&&R.binding("util")}catch(Wt){}}(),Y=F&&F.isArrayBuffer,lt=F&&F.isDate,ut=F&&F.isMap,At=F&&F.isRegExp,Ht=F&&F.isSet,re=F&&F.isTypedArray;function Rt(wt,Wt,Vt){switch(Vt.length){case 0:return wt.call(Wt);case 1:return wt.call(Wt,Vt[0]);case 2:return wt.call(Wt,Vt[0],Vt[1]);case 3:return wt.call(Wt,Vt[0],Vt[1],Vt[2])}return wt.apply(Wt,Vt)}function Xt(wt,Wt,Vt,Ce){for(var ve=-1,Je=null==wt?0:wt.length;++ve<Je;){var ke=wt[ve];Wt(Ce,ke,Vt(ke),wt)}return Ce}function Se(wt,Wt){for(var Vt=-1,Ce=null==wt?0:wt.length;++Vt<Ce&&!1!==Wt(wt[Vt],Vt,wt););return wt}function en(wt,Wt){for(var Vt=null==wt?0:wt.length;Vt--&&!1!==Wt(wt[Vt],Vt,wt););return wt}function Ie(wt,Wt){for(var Vt=-1,Ce=null==wt?0:wt.length;++Vt<Ce;)if(!Wt(wt[Vt],Vt,wt))return!1;return!0}function Jn(wt,Wt){for(var Vt=-1,Ce=null==wt?0:wt.length,ve=0,Je=[];++Vt<Ce;){var ke=wt[Vt];Wt(ke,Vt,wt)&&(Je[ve++]=ke)}return Je}function Zn(wt,Wt){return!(null==wt||!wt.length)&&cr(wt,Wt,0)>-1}function Lr(wt,Wt,Vt){for(var Ce=-1,ve=null==wt?0:wt.length;++Ce<ve;)if(Vt(Wt,wt[Ce]))return!0;return!1}function Ge(wt,Wt){for(var Vt=-1,Ce=null==wt?0:wt.length,ve=Array(Ce);++Vt<Ce;)ve[Vt]=Wt(wt[Vt],Vt,wt);return ve}function De(wt,Wt){for(var Vt=-1,Ce=Wt.length,ve=wt.length;++Vt<Ce;)wt[ve+Vt]=Wt[Vt];return wt}function ar(wt,Wt,Vt,Ce){var ve=-1,Je=null==wt?0:wt.length;for(Ce&&Je&&(Vt=wt[++ve]);++ve<Je;)Vt=Wt(Vt,wt[ve],ve,wt);return Vt}function Nn(wt,Wt,Vt,Ce){var ve=null==wt?0:wt.length;for(Ce&&ve&&(Vt=wt[--ve]);ve--;)Vt=Wt(Vt,wt[ve],ve,wt);return Vt}function nr(wt,Wt){for(var Vt=-1,Ce=null==wt?0:wt.length;++Vt<Ce;)if(Wt(wt[Vt],Vt,wt))return!0;return!1}var Yt=Ua("length");function So(wt,Wt,Vt){var Ce;return Vt(wt,function(ve,Je,ke){if(Wt(ve,Je,ke))return Ce=Je,!1}),Ce}function pi(wt,Wt,Vt,Ce){for(var ve=wt.length,Je=Vt+(Ce?1:-1);Ce?Je--:++Je<ve;)if(Wt(wt[Je],Je,wt))return Je;return-1}function cr(wt,Wt,Vt){return Wt==Wt?function $l(wt,Wt,Vt){for(var Ce=Vt-1,ve=wt.length;++Ce<ve;)if(wt[Ce]===Wt)return Ce;return-1}(wt,Wt,Vt):pi(wt,ei,Vt)}function Pi(wt,Wt,Vt,Ce){for(var ve=Vt-1,Je=wt.length;++ve<Je;)if(Ce(wt[ve],Wt))return ve;return-1}function ei(wt){return wt!=wt}function Ji(wt,Wt){var Vt=null==wt?0:wt.length;return Vt?so(wt,Wt)/Vt:NaN}function Ua(wt){return function(Wt){return null==Wt?g:Wt[wt]}}function ao(wt){return function(Wt){return null==wt?g:wt[Wt]}}function as(wt,Wt,Vt,Ce,ve){return ve(wt,function(Je,ke,Yn){Vt=Ce?(Ce=!1,Je):Wt(Vt,Je,ke,Yn)}),Vt}function so(wt,Wt){for(var Vt,Ce=-1,ve=wt.length;++Ce<ve;){var Je=Wt(wt[Ce]);Je!==g&&(Vt=Vt===g?Je:Vt+Je)}return Vt}function Er(wt,Wt){for(var Vt=-1,Ce=Array(wt);++Vt<wt;)Ce[Vt]=Wt(Vt);return Ce}function ss(wt){return wt&&wt.slice(0,Bi(wt)+1).replace(xo,"")}function Yr(wt){return function(Wt){return wt(Wt)}}function ni(wt,Wt){return Ge(Wt,function(Vt){return wt[Vt]})}function ma(wt,Wt){return wt.has(Wt)}function Js(wt,Wt){for(var Vt=-1,Ce=wt.length;++Vt<Ce&&cr(Wt,wt[Vt],0)>-1;);return Vt}function Bu(wt,Wt){for(var Vt=wt.length;Vt--&&cr(Wt,wt[Vt],0)>-1;);return Vt}function Hu(wt,Wt){for(var Vt=wt.length,Ce=0;Vt--;)wt[Vt]===Wt&&++Ce;return Ce}var Ts=ao({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),ju=ao({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function zl(wt){return"\\"+J[wt]}function Qi(wt){return pa.test(wt)}function Fi(wt){var Wt=-1,Vt=Array(wt.size);return wt.forEach(function(Ce,ve){Vt[++Wt]=[ve,Ce]}),Vt}function Vi(wt,Wt){return function(Vt){return wt(Wt(Vt))}}function uo(wt,Wt){for(var Vt=-1,Ce=wt.length,ve=0,Je=[];++Vt<Ce;){var ke=wt[Vt];(ke===Wt||ke===H)&&(wt[Vt]=H,Je[ve++]=Vt)}return Je}function us(wt){var Wt=-1,Vt=Array(wt.size);return wt.forEach(function(Ce){Vt[++Wt]=Ce}),Vt}function Eo(wt){return Qi(wt)?function gi(wt){for(var Wt=Ki.lastIndex=0;Ki.test(wt);)++Wt;return Wt}(wt):Yt(wt)}function xr(wt){return Qi(wt)?function Es(wt){return wt.match(Ki)||[]}(wt):function $r(wt){return wt.split("")}(wt)}function Bi(wt){for(var Wt=wt.length;Wt--&&Nr.test(wt.charAt(Wt)););return Wt}var Ve=ao({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),vi=function wt(Wt){var a,Vt=(Wt=null==Wt?l:vi.defaults(l.Object(),Wt,vi.pick(l,ga))).Array,Ce=Wt.Date,ve=Wt.Error,Je=Wt.Function,ke=Wt.Math,Yn=Wt.Object,Ga=Wt.RegExp,Yl=Wt.String,Z=Wt.TypeError,dt=Vt.prototype,Kt=Yn.prototype,Mt=Wt["__core-js_shared__"],Jt=Je.prototype.toString,Bt=Kt.hasOwnProperty,fe=0,ge=(a=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",Be=Kt.toString,Pe=Jt.call(Yn),We=l._,xn=Ga("^"+Jt.call(Bt).replace(eo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=_?Wt.Buffer:g,Le=Wt.Symbol,an=Wt.Uint8Array,jn=qe?qe.allocUnsafe:g,Vn=Vi(Yn.getPrototypeOf,Yn),Un=Yn.create,pr=Kt.propertyIsEnumerable,lo=dt.splice,fr=Le?Le.isConcatSpreadable:g,As=Le?Le.iterator:g,ya=Le?Le.toStringTag:g,Qs=function(){try{var a=Ja(Yn,"defineProperty");return a({},"",{}),a}catch(u){}}(),Xl=Wt.clearTimeout!==l.clearTimeout&&Wt.clearTimeout,Kl=Ce&&Ce.now!==l.Date.now&&Ce.now,Bf=Wt.setTimeout!==l.setTimeout&&Wt.setTimeout,Zs=ke.ceil,ls=ke.floor,qs=Yn.getOwnPropertySymbols,Jl=qe?qe.isBuffer:g,tu=Wt.isFinite,xa=dt.join,eu=Vi(Yn.keys,Yn),Pr=ke.max,Xr=ke.min,Ql=Ce.now,Zl=Wt.parseInt,Is=ke.random,ql=dt.reverse,ba=Ja(Wt,"DataView"),zo=Ja(Wt,"Map"),Ms=Ja(Wt,"Promise"),Wa=Ja(Wt,"Set"),dn=Ja(Wt,"WeakMap"),cs=Ja(Yn,"create"),ji=dn&&new dn,co={},tc=Za(ba),ks=Za(zo),ec=Za(Ms),Uu=Za(Wa),Hf=Za(dn),nu=Le?Le.prototype:g,Ls=nu?nu.valueOf:g,nc=nu?nu.toString:g;function Q(a){if(br(a)&&!cn(a)&&!(a instanceof Mn)){if(a instanceof Zi)return a;if(Bt.call(a,"__wrapped__"))return Qc(a)}return new Zi(a)}var fs=function(){function a(){}return function(u){if(!vr(u))return{};if(Un)return Un(u);a.prototype=u;var h=new a;return a.prototype=g,h}}();function ru(){}function Zi(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=g}function Mn(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=zt,this.__views__=[]}function _a(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var T=a[u];this.set(T[0],T[1])}}function Go(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var T=a[u];this.set(T[0],T[1])}}function Wo(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var T=a[u];this.set(T[0],T[1])}}function $o(a){var u=-1,h=null==a?0:a.length;for(this.__data__=new Wo;++u<h;)this.add(a[u])}function yi(a){var u=this.__data__=new Go(a);this.size=u.size}function nd(a,u){var h=cn(a),T=!h&&Oa(a),j=!h&&!T&&na(a),q=!h&&!T&&!j&&Cs(a),ft=h||T||j||q,bt=ft?Er(a.length,Yl):[],kt=bt.length;for(var Zt in a)(u||Bt.call(a,Zt))&&(!ft||!("length"==Zt||j&&("offset"==Zt||"parent"==Zt)||q&&("buffer"==Zt||"byteLength"==Zt||"byteOffset"==Zt)||ho(Zt,kt)))&&bt.push(Zt);return bt}function rd(a){var u=a.length;return u?a[rl(0,u-1)]:g}function Up(a,u){return wu(bi(a),ds(u,0,a.length))}function zp(a){return wu(bi(a))}function sc(a,u,h){(h!==g&&!vo(a[u],h)||h===g&&!(u in a))&&Xo(a,u,h)}function iu(a,u,h){var T=a[u];(!Bt.call(a,u)||!vo(T,h)||h===g&&!(u in a))&&Xo(a,u,h)}function zu(a,u){for(var h=a.length;h--;)if(vo(a[h][0],u))return h;return-1}function Gu(a,u,h,T){return Ko(a,function(j,q,ft){u(T,j,h(j),ft)}),T}function id(a,u){return a&&Io(u,Br(u),a)}function Xo(a,u,h){"__proto__"==u&&Qs?Qs(a,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[u]=h}function Wu(a,u){for(var h=-1,T=u.length,j=Vt(T),q=null==a;++h<T;)j[h]=q?g:Xs(a,u[h]);return j}function ds(a,u,h){return a==a&&(h!==g&&(a=a<=h?a:h),u!==g&&(a=a>=u?a:u)),a}function qi(a,u,h,T,j,q){var ft,bt=1&u,kt=2&u,Zt=4&u;if(h&&(ft=j?h(a,T,j,q):h(a)),ft!==g)return ft;if(!vr(a))return a;var qt=cn(a);if(qt){if(ft=function wd(a){var u=a.length,h=new a.constructor(u);return u&&"string"==typeof a[0]&&Bt.call(a,"index")&&(h.index=a.index,h.input=a.input),h}(a),!bt)return bi(a,ft)}else{var oe=oi(a),_e=oe==rr||oe==ki;if(na(a))return dl(a,bt);if(oe==z||oe==Ut||_e&&!j){if(ft=kt||_e?{}:Qa(a),!bt)return kt?function nn(a,u){return Io(a,jc(a),u)}(a,function od(a,u){return a&&Io(u,_i(u),a)}(ft,a)):function gd(a,u){return Io(a,Cl(a),u)}(a,id(ft,a))}else{if(!sn[oe])return j?a:{};ft=function zc(a,u,h){var T=a.constructor;switch(u){case gn:return du(a);case pe:case Te:return new T(+a);case ir:return function Ec(a,u){var h=u?du(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}(a,h);case tr:case ui:case zn:case or:case er:case lr:case Mr:case li:case Cr:return hl(a,h);case ln:return new T;case Ze:case xe:return new T(a);case $t:return function Pc(a){var u=new a.constructor(a.source,is.exec(a));return u.lastIndex=a.lastIndex,u}(a);case Qt:return new T;case Ne:return function Ac(a){return Ls?Yn(Ls.call(a)):{}}(a)}}(a,oe,bt)}}q||(q=new yi);var Me=q.get(a);if(Me)return Me;q.set(a,ft),_f(a)?a.forEach(function(je){ft.add(qi(je,u,h,je,a,q))}):bf(a)&&a.forEach(function(je,En){ft.set(En,qi(je,u,h,En,a,q))});var mn=qt?g:(Zt?kt?fo:yl:kt?_i:Br)(a);return Se(mn||a,function(je,En){mn&&(je=a[En=je]),iu(ft,En,qi(je,u,h,En,a,q))}),ft}function ad(a,u,h){var T=h.length;if(null==a)return!T;for(a=Yn(a);T--;){var j=h[T],ft=a[j];if(ft===g&&!(j in a)||!(0,u[j])(ft))return!1}return!0}function wa(a,u,h){if("function"!=typeof a)throw new Z(I);return Hs(function(){a.apply(g,h)},u)}function Po(a,u,h,T){var j=-1,q=Zn,ft=!0,bt=a.length,kt=[],Zt=u.length;if(!bt)return kt;h&&(u=Ge(u,Yr(h))),T?(q=Lr,ft=!1):u.length>=200&&(q=ma,ft=!1,u=new $o(u));t:for(;++j<bt;){var qt=a[j],oe=null==h?qt:h(qt);if(qt=T||0!==qt?qt:0,ft&&oe==oe){for(var _e=Zt;_e--;)if(u[_e]===oe)continue t;kt.push(qt)}else q(u,oe,T)||kt.push(qt)}return kt}Q.templateSettings={escape:Pn,evaluate:Ra,interpolate:Ro,variable:"",imports:{_:Q}},(Q.prototype=ru.prototype).constructor=Q,(Zi.prototype=fs(ru.prototype)).constructor=Zi,(Mn.prototype=fs(ru.prototype)).constructor=Mn,_a.prototype.clear=function oc(){this.__data__=cs?cs(null):{},this.size=0},_a.prototype.delete=function jf(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},_a.prototype.get=function Uf(a){var u=this.__data__;if(cs){var h=u[a];return h===M?g:h}return Bt.call(u,a)?u[a]:g},_a.prototype.has=function zf(a){var u=this.__data__;return cs?u[a]!==g:Bt.call(u,a)},_a.prototype.set=function Gf(a,u){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=cs&&u===g?M:u,this},Go.prototype.clear=function Wf(){this.__data__=[],this.size=0},Go.prototype.delete=function $f(a){var u=this.__data__,h=zu(u,a);return!(h<0||(h==u.length-1?u.pop():lo.call(u,h,1),--this.size,0))},Go.prototype.get=function Yf(a){var u=this.__data__,h=zu(u,a);return h<0?g:u[h][1]},Go.prototype.has=function Xf(a){return zu(this.__data__,a)>-1},Go.prototype.set=function Kf(a,u){var h=this.__data__,T=zu(h,a);return T<0?(++this.size,h.push([a,u])):h[T][1]=u,this},Wo.prototype.clear=function ac(){this.size=0,this.__data__={hash:new _a,map:new(zo||Go),string:new _a}},Wo.prototype.delete=function Jf(a){var u=xu(this,a).delete(a);return this.size-=u?1:0,u},Wo.prototype.get=function Qf(a){return xu(this,a).get(a)},Wo.prototype.has=function mi(a){return xu(this,a).has(a)},Wo.prototype.set=function Zf(a,u){var h=xu(this,a),T=h.size;return h.set(a,u),this.size+=h.size==T?0:1,this},$o.prototype.add=$o.prototype.push=function qf(a){return this.__data__.set(a,M),this},$o.prototype.has=function Yo(a){return this.__data__.has(a)},yi.prototype.clear=function td(){this.__data__=new Go,this.size=0},yi.prototype.delete=function Bp(a){var u=this.__data__,h=u.delete(a);return this.size=u.size,h},yi.prototype.get=function Hp(a){return this.__data__.get(a)},yi.prototype.has=function ed(a){return this.__data__.has(a)},yi.prototype.set=function jp(a,u){var h=this.__data__;if(h instanceof Go){var T=h.__data__;if(!zo||T.length<199)return T.push([a,u]),this.size=++h.size,this;h=this.__data__=new Wo(T)}return h.set(a,u),this.size=h.size,this};var Ko=kc(Ao),ou=kc(Yu,!0);function Sa(a,u){var h=!0;return Ko(a,function(T,j,q){return h=!!u(T,j,q)}),h}function Jo(a,u,h){for(var T=-1,j=a.length;++T<j;){var q=a[T],ft=u(q);if(null!=ft&&(bt===g?ft==ft&&!Gi(ft):h(ft,bt)))var bt=ft,kt=q}return kt}function kn(a,u){var h=[];return Ko(a,function(T,j,q){u(T,j,q)&&h.push(T)}),h}function Ar(a,u,h,T,j){var q=-1,ft=a.length;for(h||(h=bu),j||(j=[]);++q<ft;){var bt=a[q];u>0&&h(bt)?u>1?Ar(bt,u-1,h,T,j):De(j,bt):T||(j[j.length]=bt)}return j}var $u=Lc(),uc=Lc(!0);function Ao(a,u){return a&&$u(a,u,Br)}function Yu(a,u){return a&&uc(a,u,Br)}function $a(a,u){return Jn(u,function(h){return ra(a[h])})}function Qo(a,u){for(var h=0,T=(u=Pa(u,a)).length;null!=a&&h<T;)a=a[Mo(u[h++])];return h&&h==T?a:g}function ri(a,u,h){var T=u(a);return cn(a)?T:De(T,h(a))}function Vr(a){return null==a?a===g?"[object Undefined]":"[object Null]":ya&&ya in Yn(a)?function bd(a){var u=Bt.call(a,ya),h=a[ya];try{a[ya]=g;var T=!0}catch(q){}var j=Be.call(a);return T&&(u?a[ya]=h:delete a[ya]),j}(a):function Cu(a){return Be.call(a)}(a)}function hs(a,u){return a>u}function lc(a,u){return null!=a&&Bt.call(a,u)}function cc(a,u){return null!=a&&u in Yn(a)}function Xu(a,u,h){for(var T=h?Lr:Zn,j=a[0].length,q=a.length,ft=q,bt=Vt(q),kt=1/0,Zt=[];ft--;){var qt=a[ft];ft&&u&&(qt=Ge(qt,Yr(u))),kt=Xr(qt.length,kt),bt[ft]=!h&&(u||j>=120&&qt.length>=120)?new $o(ft&&qt):g}qt=a[0];var oe=-1,_e=bt[0];t:for(;++oe<j&&Zt.length<kt;){var Me=qt[oe],Xe=u?u(Me):Me;if(Me=h||0!==Me?Me:0,!(_e?ma(_e,Xe):T(Zt,Xe,h))){for(ft=q;--ft;){var mn=bt[ft];if(!(mn?ma(mn,Xe):T(a[ft],Xe,h)))continue t}_e&&_e.push(Xe),Zt.push(Me)}}return Zt}function Ta(a,u,h){var T=null==(a=ms(a,u=Pa(u,a)))?a:a[Mo(to(u))];return null==T?g:Rt(T,a,h)}function dc(a){return br(a)&&Vr(a)==Ut}function Ya(a,u,h,T,j){return a===u||(null==a||null==u||!br(a)&&!br(u)?a!=a&&u!=u:function hc(a,u,h,T,j,q){var ft=cn(a),bt=cn(u),kt=ft?Et:oi(a),Zt=bt?Et:oi(u),qt=(kt=kt==Ut?z:kt)==z,oe=(Zt=Zt==Ut?z:Zt)==z,_e=kt==Zt;if(_e&&na(a)){if(!na(u))return!1;ft=!0,qt=!1}if(_e&&!qt)return q||(q=new yi),ft||Cs(a)?Hc(a,u,h,T,j,q):function yd(a,u,h,T,j,q,ft){switch(h){case ir:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case gn:return!(a.byteLength!=u.byteLength||!q(new an(a),new an(u)));case pe:case Te:case Ze:return vo(+a,+u);case Rn:return a.name==u.name&&a.message==u.message;case $t:case xe:return a==u+"";case ln:var bt=Fi;case Qt:if(bt||(bt=us),a.size!=u.size&&!(1&T))return!1;var Zt=ft.get(a);if(Zt)return Zt==u;T|=2,ft.set(a,u);var qt=Hc(bt(a),bt(u),T,j,q,ft);return ft.delete(a),qt;case Ne:if(Ls)return Ls.call(a)==Ls.call(u)}return!1}(a,u,kt,h,T,j,q);if(!(1&h)){var Me=qt&&Bt.call(a,"__wrapped__"),Xe=oe&&Bt.call(u,"__wrapped__");if(Me||Xe){var mn=Me?a.value():a,je=Xe?u.value():u;return q||(q=new yi),j(mn,je,h,T,q)}}return!!_e&&(q||(q=new yi),function xd(a,u,h,T,j,q){var ft=1&h,bt=yl(a),kt=bt.length;if(kt!=yl(u).length&&!ft)return!1;for(var oe=kt;oe--;){var _e=bt[oe];if(!(ft?_e in u:Bt.call(u,_e)))return!1}var Me=q.get(a),Xe=q.get(u);if(Me&&Xe)return Me==u&&Xe==a;var mn=!0;q.set(a,u),q.set(u,a);for(var je=ft;++oe<kt;){var En=a[_e=bt[oe]],On=u[_e];if(T)var Mi=ft?T(On,En,_e,u,a,q):T(En,On,_e,a,u,q);if(!(Mi===g?En===On||j(En,On,h,T,q):Mi)){mn=!1;break}je||(je="constructor"==_e)}if(mn&&!je){var wi=a.constructor,Ir=u.constructor;wi!=Ir&&"constructor"in a&&"constructor"in u&&!("function"==typeof wi&&wi instanceof wi&&"function"==typeof Ir&&Ir instanceof Ir)&&(mn=!1)}return q.delete(a),q.delete(u),mn}(a,u,h,T,j,q))}(a,u,h,T,Ya,j))}function Zo(a,u,h,T){var j=h.length,q=j,ft=!T;if(null==a)return!q;for(a=Yn(a);j--;){var bt=h[j];if(ft&&bt[2]?bt[1]!==a[bt[0]]:!(bt[0]in a))return!1}for(;++j<q;){var kt=(bt=h[j])[0],Zt=a[kt],qt=bt[1];if(ft&&bt[2]){if(Zt===g&&!(kt in a))return!1}else{var oe=new yi;if(T)var _e=T(Zt,qt,kt,a,u,oe);if(!(_e===g?Ya(qt,Zt,3,T,oe):_e))return!1}}return!0}function Qu(a){return!(!vr(a)||function Gc(a){return!!ge&&ge in a}(a))&&(ra(a)?xn:Da).test(Za(a))}function au(a){return"function"==typeof a?a:null==a?Ct:"object"==typeof a?cn(a)?yc(a[0],a[1]):tl(a):ce(a)}function Zu(a){if(!Fs(a))return eu(a);var u=[];for(var h in Yn(a))Bt.call(a,h)&&"constructor"!=h&&u.push(h);return u}function qu(a,u){return a<u}function mc(a,u){var h=-1,T=Ai(a)?Vt(a.length):[];return Ko(a,function(j,q,ft){T[++h]=u(j,q,ft)}),T}function tl(a){var u=bl(a);return 1==u.length&&u[0][2]?Sl(u[0][0],u[0][1]):function(h){return h===a||Zo(h,a,u)}}function yc(a,u){return _l(a)&&Wc(u)?Sl(Mo(a),u):function(h){var T=Xs(h,a);return T===g&&T===u?Bl(h,a):Ya(u,T,3)}}function Ea(a,u,h,T,j){a!==u&&$u(u,function(q,ft){if(j||(j=new yi),vr(q))!function su(a,u,h,T,j,q,ft){var bt=Tl(a,h),kt=Tl(u,h),Zt=ft.get(kt);if(Zt)sc(a,h,Zt);else{var qt=q?q(bt,kt,h+"",a,u,ft):g,oe=qt===g;if(oe){var _e=cn(kt),Me=!_e&&na(kt),Xe=!_e&&!Me&&Cs(kt);qt=kt,_e||Me||Xe?cn(bt)?qt=bt:gr(bt)?qt=bi(bt):Me?(oe=!1,qt=dl(kt,!0)):Xe?(oe=!1,qt=hl(kt,!0)):qt=[]:Ys(kt)||Oa(kt)?(qt=bt,Oa(bt)?qt=Fl(bt):(!vr(bt)||ra(bt))&&(qt=Qa(kt))):oe=!1}oe&&(ft.set(kt,qt),j(qt,kt,T,q,ft),ft.delete(kt)),sc(a,h,qt)}}(a,u,ft,h,Ea,T,j);else{var bt=T?T(Tl(a,ft),q,ft+"",a,u,j):g;bt===g&&(bt=q),sc(a,ft,bt)}},_i)}function ps(a,u){var h=a.length;if(h)return ho(u+=u<0?h:0,h)?a[u]:g}function uu(a,u,h){u=u.length?Ge(u,function(q){return cn(q)?function(ft){return Qo(ft,1===q.length?q[0]:q)}:q}):[Ct];var T=-1;return u=Ge(u,Yr(Ye())),function In(wt,Wt){var Vt=wt.length;for(wt.sort(Wt);Vt--;)wt[Vt]=wt[Vt].value;return wt}(mc(a,function(q,ft,bt){return{criteria:Ge(u,function(Zt){return Zt(q)}),index:++T,value:q}}),function(q,ft){return function pd(a,u,h){for(var T=-1,j=a.criteria,q=u.criteria,ft=j.length,bt=h.length;++T<ft;){var kt=Ic(j[T],q[T]);if(kt)return T>=bt?kt:kt*("desc"==h[T]?-1:1)}return a.index-u.index}(q,ft,h)})}function el(a,u,h){for(var T=-1,j=u.length,q={};++T<j;){var ft=u[T],bt=Qo(a,ft);h(bt,ft)&&Os(q,Pa(ft,a),bt)}return q}function nl(a,u,h,T){var j=T?Pi:cr,q=-1,ft=u.length,bt=a;for(a===u&&(u=bi(u)),h&&(bt=Ge(a,Yr(h)));++q<ft;)for(var kt=0,Zt=u[q],qt=h?h(Zt):Zt;(kt=j(bt,qt,kt,T))>-1;)bt!==a&&lo.call(bt,kt,1),lo.call(a,kt,1);return a}function bc(a,u){for(var h=a?u.length:0,T=h-1;h--;){var j=u[h];if(h==T||j!==q){var q=j;ho(j)?lo.call(a,j,1):cl(a,j)}}return a}function rl(a,u){return a+ls(Is()*(u-a+1))}function ol(a,u){var h="";if(!a||u<1||u>hr)return h;do{u%2&&(h+=a),(u=ls(u/2))&&(a+=a)}while(u);return h}function _n(a,u){return El(Bs(a,u,Ct),a+"")}function fd(a){return rd(Ss(a))}function Cc(a,u){var h=Ss(a);return wu(h,ds(u,0,h.length))}function Os(a,u,h,T){if(!vr(a))return a;for(var j=-1,q=(u=Pa(u,a)).length,ft=q-1,bt=a;null!=bt&&++j<q;){var kt=Mo(u[j]),Zt=h;if("__proto__"===kt||"constructor"===kt||"prototype"===kt)return a;if(j!=ft){var qt=bt[kt];(Zt=T?T(qt,kt,bt):g)===g&&(Zt=vr(qt)?qt:ho(u[j+1])?[]:{})}iu(bt,kt,Zt),bt=bt[kt]}return a}var al=ji?function(a,u){return ji.set(a,u),a}:Ct,dd=Qs?function(a,u){return Qs(a,"toString",{configurable:!0,enumerable:!1,value:G(u),writable:!0})}:Ct;function lu(a){return wu(Ss(a))}function xi(a,u,h){var T=-1,j=a.length;u<0&&(u=-u>j?0:j+u),(h=h>j?j:h)<0&&(h+=j),j=u>h?0:h-u>>>0,u>>>=0;for(var q=Vt(j);++T<j;)q[T]=a[T+u];return q}function sl(a,u){var h;return Ko(a,function(T,j,q){return!(h=u(T,j,q))}),!!h}function cu(a,u,h){var T=0,j=null==a?T:a.length;if("number"==typeof u&&u==u&&j<=2147483647){for(;T<j;){var q=T+j>>>1,ft=a[q];null!==ft&&!Gi(ft)&&(h?ft<=u:ft<u)?T=q+1:j=q}return j}return ul(a,u,Ct,h)}function ul(a,u,h,T){var j=0,q=null==a?0:a.length;if(0===q)return 0;for(var ft=(u=h(u))!=u,bt=null===u,kt=Gi(u),Zt=u===g;j<q;){var qt=ls((j+q)/2),oe=h(a[qt]),_e=oe!==g,Me=null===oe,Xe=oe==oe,mn=Gi(oe);if(ft)var je=T||Xe;else je=Zt?Xe&&(T||_e):bt?Xe&&_e&&(T||!Me):kt?Xe&&_e&&!Me&&(T||!mn):!Me&&!mn&&(T?oe<=u:oe<u);je?j=qt+1:q=qt}return Xr(q,4294967294)}function _c(a,u){for(var h=-1,T=a.length,j=0,q=[];++h<T;){var ft=a[h],bt=u?u(ft):ft;if(!h||!vo(bt,kt)){var kt=bt;q[j++]=0===ft?0:ft}}return q}function ll(a){return"number"==typeof a?a:Gi(a)?NaN:+a}function Ui(a){if("string"==typeof a)return a;if(cn(a))return Ge(a,Ui)+"";if(Gi(a))return nc?nc.call(a):"";var u=a+"";return"0"==u&&1/a==-Re?"-0":u}function qo(a,u,h){var T=-1,j=Zn,q=a.length,ft=!0,bt=[],kt=bt;if(h)ft=!1,j=Lr;else if(q>=200){var Zt=u?null:md(a);if(Zt)return us(Zt);ft=!1,j=ma,kt=new $o}else kt=u?[]:bt;t:for(;++T<q;){var qt=a[T],oe=u?u(qt):qt;if(qt=h||0!==qt?qt:0,ft&&oe==oe){for(var _e=kt.length;_e--;)if(kt[_e]===oe)continue t;u&&kt.push(oe),bt.push(qt)}else j(kt,oe,h)||(kt!==bt&&kt.push(oe),bt.push(qt))}return bt}function cl(a,u){return null==(a=ms(a,u=Pa(u,a)))||delete a[Mo(to(u))]}function wc(a,u,h,T){return Os(a,u,h(Qo(a,u)),T)}function fu(a,u,h,T){for(var j=a.length,q=T?j:-1;(T?q--:++q<j)&&u(a[q],q,a););return h?xi(a,T?0:q,T?q+1:j):xi(a,T?q+1:0,T?j:q)}function Sc(a,u){var h=a;return h instanceof Mn&&(h=h.value()),ar(u,function(T,j){return j.func.apply(j.thisArg,De([T],j.args))},h)}function fl(a,u,h){var T=a.length;if(T<2)return T?qo(a[0]):[];for(var j=-1,q=Vt(T);++j<T;)for(var ft=a[j],bt=-1;++bt<T;)bt!=j&&(q[j]=Po(q[j]||ft,a[bt],u,h));return qo(Ar(q,1),u,h)}function zi(a,u,h){for(var T=-1,j=a.length,q=u.length,ft={};++T<j;)h(ft,a[T],T<q?u[T]:g);return ft}function Kr(a){return gr(a)?a:[]}function Rs(a){return"function"==typeof a?a:Ct}function Pa(a,u){return cn(a)?a:_l(a,u)?[a]:Jc(Xn(a))}var hd=_n;function Aa(a,u,h){var T=a.length;return h=h===g?T:h,!u&&h>=T?a:xi(a,u,h)}var Tc=Xl||function(a){return l.clearTimeout(a)};function dl(a,u){if(u)return a.slice();var h=a.length,T=jn?jn(h):new a.constructor(h);return a.copy(T),T}function du(a){var u=new a.constructor(a.byteLength);return new an(u).set(new an(a)),u}function hl(a,u){var h=u?du(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function Ic(a,u){if(a!==u){var h=a!==g,T=null===a,j=a==a,q=Gi(a),ft=u!==g,bt=null===u,kt=u==u,Zt=Gi(u);if(!bt&&!Zt&&!q&&a>u||q&&ft&&kt&&!bt&&!Zt||T&&ft&&kt||!h&&kt||!j)return 1;if(!T&&!q&&!Zt&&a<u||Zt&&h&&j&&!T&&!q||bt&&h&&j||!ft&&j||!kt)return-1}return 0}function Mc(a,u,h,T){for(var j=-1,q=a.length,ft=h.length,bt=-1,kt=u.length,Zt=Pr(q-ft,0),qt=Vt(kt+Zt),oe=!T;++bt<kt;)qt[bt]=u[bt];for(;++j<ft;)(oe||j<q)&&(qt[h[j]]=a[j]);for(;Zt--;)qt[bt++]=a[j++];return qt}function hu(a,u,h,T){for(var j=-1,q=a.length,ft=-1,bt=h.length,kt=-1,Zt=u.length,qt=Pr(q-bt,0),oe=Vt(qt+Zt),_e=!T;++j<qt;)oe[j]=a[j];for(var Me=j;++kt<Zt;)oe[Me+kt]=u[kt];for(;++ft<bt;)(_e||j<q)&&(oe[Me+h[ft]]=a[j++]);return oe}function bi(a,u){var h=-1,T=a.length;for(u||(u=Vt(T));++h<T;)u[h]=a[h];return u}function Io(a,u,h,T){var j=!h;h||(h={});for(var q=-1,ft=u.length;++q<ft;){var bt=u[q],kt=T?T(h[bt],a[bt],bt,h,a):g;kt===g&&(kt=a[bt]),j?Xo(h,bt,kt):iu(h,bt,kt)}return h}function Ia(a,u){return function(h,T){var j=cn(h)?Xt:Gu,q=u?u():{};return j(h,a,Ye(T,2),q)}}function ii(a){return _n(function(u,h){var T=-1,j=h.length,q=j>1?h[j-1]:g,ft=j>2?h[2]:g;for(q=a.length>3&&"function"==typeof q?(j--,q):g,ft&&ai(h[0],h[1],ft)&&(q=j<3?g:q,j=1),u=Yn(u);++T<j;){var bt=h[T];bt&&a(u,bt,T,q)}return u})}function kc(a,u){return function(h,T){if(null==h)return h;if(!Ai(h))return a(h,T);for(var j=h.length,q=u?j:-1,ft=Yn(h);(u?q--:++q<j)&&!1!==T(ft[q],q,ft););return h}}function Lc(a){return function(u,h,T){for(var j=-1,q=Yn(u),ft=T(u),bt=ft.length;bt--;){var kt=ft[a?bt:++j];if(!1===h(q[kt],kt,q))break}return u}}function Rc(a){return function(u){var h=Qi(u=Xn(u))?xr(u):g,T=h?h[0]:u.charAt(0),j=h?Aa(h,1).join(""):u.slice(1);return T[a]()+j}}function gs(a){return function(u){return ar(v(Nf(u).replace(Ha,"")),a,"")}}function Ns(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=fs(a.prototype),T=a.apply(h,u);return vr(T)?T:h}}function Dc(a){return function(u,h,T){var j=Yn(u);if(!Ai(u)){var q=Ye(h,3);u=Br(u),h=function(bt){return q(j[bt],bt,j)}}var ft=a(u,h,T);return ft>-1?j[q?u[ft]:ft]:g}}function Fc(a){return ea(function(u){var h=u.length,T=h,j=Zi.prototype.thru;for(a&&u.reverse();T--;){var q=u[T];if("function"!=typeof q)throw new Z(I);if(j&&!ft&&"wrapper"==yu(q))var ft=new Zi([],!0)}for(T=ft?T:h;++T<h;){var bt=yu(q=u[T]),kt="wrapper"==bt?xl(q):g;ft=kt&&wl(kt[0])&&424==kt[1]&&!kt[4].length&&1==kt[9]?ft[yu(kt[0])].apply(ft,kt[3]):1==q.length&&wl(q)?ft[bt]():ft.thru(q)}return function(){var Zt=arguments,qt=Zt[0];if(ft&&1==Zt.length&&cn(qt))return ft.plant(qt).value();for(var oe=0,_e=h?u[oe].apply(this,Zt):qt;++oe<h;)_e=u[oe].call(this,_e);return _e}})}function pu(a,u,h,T,j,q,ft,bt,kt,Zt){var qt=u&C,oe=1&u,_e=2&u,Me=24&u,Xe=512&u,mn=_e?g:Ns(a);return function je(){for(var En=arguments.length,On=Vt(En),Mi=En;Mi--;)On[Mi]=arguments[Mi];if(Me)var wi=vs(je),Ir=Hu(On,wi);if(T&&(On=Mc(On,T,j,Me)),q&&(On=hu(On,q,ft,Me)),En-=Ir,Me&&En<Zt){var Rr=uo(On,wi);return vu(a,u,pu,je.placeholder,h,On,Rr,bt,kt,Zt-En)}var aa=oe?h:this,ns=_e?aa[a]:a;return En=On.length,bt?On=_u(On,bt):Xe&&En>1&&On.reverse(),qt&&kt<En&&(On.length=kt),this&&this!==l&&this instanceof je&&(ns=mn||Ns(ns)),ns.apply(aa,On)}}function Vc(a,u){return function(h,T){return function fc(a,u,h,T){return Ao(a,function(j,q,ft){u(T,h(j),q,ft)}),T}(h,a,u(T),{})}}function gu(a,u){return function(h,T){var j;if(h===g&&T===g)return u;if(h!==g&&(j=h),T!==g){if(j===g)return T;"string"==typeof h||"string"==typeof T?(h=Ui(h),T=Ui(T)):(h=ll(h),T=ll(T)),j=a(h,T)}return j}}function Xa(a){return ea(function(u){return u=Ge(u,Yr(Ye())),_n(function(h){var T=this;return a(u,function(j){return Rt(j,T,h)})})})}function Ds(a,u){var h=(u=u===g?" ":Ui(u)).length;if(h<2)return h?ol(u,a):u;var T=ol(u,Zs(a/Eo(u)));return Qi(u)?Aa(xr(T),0,a).join(""):T.slice(0,a)}function pl(a){return function(u,h,T){return T&&"number"!=typeof T&&ai(u,h,T)&&(h=T=g),u=ia(u),h===g?(h=u,u=0):h=ia(h),function il(a,u,h,T){for(var j=-1,q=Pr(Zs((u-a)/(h||1)),0),ft=Vt(q);q--;)ft[T?q:++j]=a,a+=h;return ft}(u,h,T=T===g?u<h?1:-1:ia(T),a)}}function Ka(a){return function(u,h){return"string"==typeof u&&"string"==typeof h||(u=Ii(u),h=Ii(h)),a(u,h)}}function vu(a,u,h,T,j,q,ft,bt,kt,Zt){var qt=8&u;u|=qt?32:64,4&(u&=~(qt?64:32))||(u&=-4);var mn=[a,u,j,qt?q:g,qt?ft:g,qt?g:q,qt?g:ft,bt,kt,Zt],je=h.apply(g,mn);return wl(a)&&Yc(je,mn),je.placeholder=T,Xc(je,a,u)}function gl(a){var u=ke[a];return function(h,T){if(h=Ii(h),(T=null==T?0:Xr(vn(T),292))&&tu(h)){var j=(Xn(h)+"e").split("e");return+((j=(Xn(u(j[0]+"e"+(+j[1]+T)))+"e").split("e"))[0]+"e"+(+j[1]-T))}return u(h)}}var md=Wa&&1/us(new Wa([,-0]))[1]==Re?function(a){return new Wa(a)}:It;function vl(a){return function(u){var h=oi(u);return h==ln?Fi(u):h==Qt?function Fr(wt){var Wt=-1,Vt=Array(wt.size);return wt.forEach(function(Ce){Vt[++Wt]=[Ce,Ce]}),Vt}(u):function za(wt,Wt){return Ge(Wt,function(Vt){return[Vt,wt[Vt]]})}(u,a(u))}}function ta(a,u,h,T,j,q,ft,bt){var kt=2&u;if(!kt&&"function"!=typeof a)throw new Z(I);var Zt=T?T.length:0;if(Zt||(u&=-97,T=j=g),ft=ft===g?ft:Pr(vn(ft),0),bt=bt===g?bt:vn(bt),Zt-=j?j.length:0,64&u){var qt=T,oe=j;T=j=g}var _e=kt?g:xl(a),Me=[a,u,h,T,j,qt,oe,q,ft,bt];if(_e&&function po(a,u){var h=a[1],T=u[1],j=h|T;if(!(j<131||(T==C&&8==h||T==C&&256==h&&a[7].length<=u[8]||384==T&&u[7].length<=u[8]&&8==h)))return a;1&T&&(a[2]=u[2],j|=1&h?0:4);var bt=u[3];if(bt){var kt=a[3];a[3]=kt?Mc(kt,bt,u[4]):bt,a[4]=kt?uo(a[3],H):u[4]}(bt=u[5])&&(a[5]=(kt=a[5])?hu(kt,bt,u[6]):bt,a[6]=kt?uo(a[5],H):u[6]),(bt=u[7])&&(a[7]=bt),T&C&&(a[8]=null==a[8]?u[8]:Xr(a[8],u[8])),null==a[9]&&(a[9]=u[9]),a[0]=u[0],a[1]=j}(Me,_e),a=Me[0],u=Me[1],h=Me[2],T=Me[3],j=Me[4],!(bt=Me[9]=Me[9]===g?kt?0:a.length:Pr(Me[9]-Zt,0))&&24&u&&(u&=-25),u&&1!=u)Xe=8==u||16==u?function Nc(a,u,h){var T=Ns(a);return function j(){for(var q=arguments.length,ft=Vt(q),bt=q,kt=vs(j);bt--;)ft[bt]=arguments[bt];var Zt=q<3&&ft[0]!==kt&&ft[q-1]!==kt?[]:uo(ft,kt);return(q-=Zt.length)<h?vu(a,u,pu,j.placeholder,g,ft,Zt,g,g,h-q):Rt(this&&this!==l&&this instanceof j?T:a,this,ft)}}(a,u,bt):32!=u&&33!=u||j.length?pu.apply(g,Me):function vd(a,u,h,T){var j=1&u,q=Ns(a);return function ft(){for(var bt=-1,kt=arguments.length,Zt=-1,qt=T.length,oe=Vt(qt+kt),_e=this&&this!==l&&this instanceof ft?q:a;++Zt<qt;)oe[Zt]=T[Zt];for(;kt--;)oe[Zt++]=arguments[++bt];return Rt(_e,j?h:this,oe)}}(a,u,h,T);else var Xe=function Oc(a,u,h){var T=1&u,j=Ns(a);return function q(){return(this&&this!==l&&this instanceof q?j:a).apply(T?h:this,arguments)}}(a,u,h);return Xc((_e?al:Yc)(Xe,Me),a,u)}function Bc(a,u,h,T){return a===g||vo(a,Kt[h])&&!Bt.call(T,h)?u:a}function mu(a,u,h,T,j,q){return vr(a)&&vr(u)&&(q.set(u,a),Ea(a,u,g,mu,q),q.delete(u)),a}function ml(a){return Ys(a)?g:a}function Hc(a,u,h,T,j,q){var ft=1&h,bt=a.length,kt=u.length;if(bt!=kt&&!(ft&&kt>bt))return!1;var Zt=q.get(a),qt=q.get(u);if(Zt&&qt)return Zt==u&&qt==a;var oe=-1,_e=!0,Me=2&h?new $o:g;for(q.set(a,u),q.set(u,a);++oe<bt;){var Xe=a[oe],mn=u[oe];if(T)var je=ft?T(mn,Xe,oe,u,a,q):T(Xe,mn,oe,a,u,q);if(je!==g){if(je)continue;_e=!1;break}if(Me){if(!nr(u,function(En,On){if(!ma(Me,On)&&(Xe===En||j(Xe,En,h,T,q)))return Me.push(On)})){_e=!1;break}}else if(Xe!==mn&&!j(Xe,mn,h,T,q)){_e=!1;break}}return q.delete(a),q.delete(u),_e}function ea(a){return El(Bs(a,g,ef),a+"")}function yl(a){return ri(a,Br,Cl)}function fo(a){return ri(a,_i,jc)}var xl=ji?function(a){return ji.get(a)}:It;function yu(a){for(var u=a.name+"",h=co[u],T=Bt.call(co,u)?h.length:0;T--;){var j=h[T],q=j.func;if(null==q||q==a)return j.name}return u}function vs(a){return(Bt.call(Q,"placeholder")?Q:a).placeholder}function Ye(){var a=Q.iteratee||Dt;return a=a===Dt?au:a,arguments.length?a(arguments[0],arguments[1]):a}function xu(a,u){var h=a.__data__;return function Td(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?h["string"==typeof u?"string":"hash"]:h.map}function bl(a){for(var u=Br(a),h=u.length;h--;){var T=u[h],j=a[T];u[h]=[T,j,Wc(j)]}return u}function Ja(a,u){var h=function Gl(wt,Wt){return null==wt?g:wt[Wt]}(a,u);return Qu(h)?h:g}var Cl=qs?function(a){return null==a?[]:(a=Yn(a),Jn(qs(a),function(u){return pr.call(a,u)}))}:Hn,jc=qs?function(a){for(var u=[];a;)De(u,Cl(a)),a=Vn(a);return u}:Hn,oi=Vr;function Uc(a,u,h){for(var T=-1,j=(u=Pa(u,a)).length,q=!1;++T<j;){var ft=Mo(u[T]);if(!(q=null!=a&&h(a,ft)))break;a=a[ft]}return q||++T!=j?q:!!(j=null==a?0:a.length)&&Nu(j)&&ho(ft,j)&&(cn(a)||Oa(a))}function Qa(a){return"function"!=typeof a.constructor||Fs(a)?{}:fs(Vn(a))}function bu(a){return cn(a)||Oa(a)||!!(fr&&a&&a[fr])}function ho(a,u){var h=typeof a;return!!(u=null==u?hr:u)&&("number"==h||"symbol"!=h&&Do.test(a))&&a>-1&&a%1==0&&a<u}function ai(a,u,h){if(!vr(h))return!1;var T=typeof u;return!!("number"==T?Ai(h)&&ho(u,h.length):"string"==T&&u in h)&&vo(h[u],a)}function _l(a,u){if(cn(a))return!1;var h=typeof a;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=a&&!Gi(a))||No.test(a)||!yo.test(a)||null!=u&&a in Yn(u)}function wl(a){var u=yu(a),h=Q[u];if("function"!=typeof h||!(u in Mn.prototype))return!1;if(a===h)return!0;var T=xl(h);return!!T&&a===T[0]}(ba&&oi(new ba(new ArrayBuffer(1)))!=ir||zo&&oi(new zo)!=ln||Ms&&oi(Ms.resolve())!=rt||Wa&&oi(new Wa)!=Qt||dn&&oi(new dn)!=pn)&&(oi=function(a){var u=Vr(a),h=u==z?a.constructor:g,T=h?Za(h):"";if(T)switch(T){case tc:return ir;case ks:return ln;case ec:return rt;case Uu:return Qt;case Hf:return pn}return u});var Ed=Mt?ra:An;function Fs(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||Kt)}function Wc(a){return a==a&&!vr(a)}function Sl(a,u){return function(h){return null!=h&&h[a]===u&&(u!==g||a in Yn(h))}}function Bs(a,u,h){return u=Pr(u===g?a.length-1:u,0),function(){for(var T=arguments,j=-1,q=Pr(T.length-u,0),ft=Vt(q);++j<q;)ft[j]=T[u+j];j=-1;for(var bt=Vt(u+1);++j<u;)bt[j]=T[j];return bt[u]=h(ft),Rt(a,this,bt)}}function ms(a,u){return u.length<2?a:Qo(a,xi(u,0,-1))}function _u(a,u){for(var h=a.length,T=Xr(u.length,h),j=bi(a);T--;){var q=u[T];a[T]=ho(q,h)?j[q]:g}return a}function Tl(a,u){if(("constructor"!==u||"function"!=typeof a[u])&&"__proto__"!=u)return a[u]}var Yc=Kc(al),Hs=Bf||function(a,u){return l.setTimeout(a,u)},El=Kc(dd);function Xc(a,u,h){var T=u+"";return El(a,function Sd(a,u){var h=u.length;if(!h)return a;var T=h-1;return u[T]=(h>1?"& ":"")+u[T],u=u.join(h>2?", ":" "),a.replace(Zr,"{\n/* [wrapped with "+u+"] */\n")}(T,function Pd(a,u){return Se(Bn,function(h){var T="_."+h[0];u&h[1]&&!Zn(a,T)&&a.push(T)}),a.sort()}(function _d(a){var u=a.match(Li);return u?u[1].split(zr):[]}(T),h)))}function Kc(a){var u=0,h=0;return function(){var T=Ql(),j=16-(T-h);if(h=T,j>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(g,arguments)}}function wu(a,u){var h=-1,T=a.length,j=T-1;for(u=u===g?T:u;++h<u;){var q=rl(h,j),ft=a[q];a[q]=a[h],a[h]=ft}return a.length=u,a}var Jc=function $c(a){var u=Ou(a,function(T){return 500===h.size&&h.clear(),T}),h=u.cache;return u}(function(a){var u=[];return 46===a.charCodeAt(0)&&u.push(""),a.replace(rn,function(h,T,j,q){u.push(j?q.replace(no,"$1"):T||h)}),u});function Mo(a){if("string"==typeof a||Gi(a))return a;var u=a+"";return"0"==u&&1/a==-Re?"-0":u}function Za(a){if(null!=a){try{return Jt.call(a)}catch(u){}try{return a+""}catch(u){}}return""}function Qc(a){if(a instanceof Mn)return a.clone();var u=new Zi(a.__wrapped__,a.__chain__);return u.__actions__=bi(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}var Id=_n(function(a,u){return gr(a)?Po(a,Ar(u,1,gr,!0)):[]}),Md=_n(function(a,u){var h=to(u);return gr(h)&&(h=g),gr(a)?Po(a,Ar(u,1,gr,!0),Ye(h,2)):[]}),kd=_n(function(a,u){var h=to(u);return gr(h)&&(h=g),gr(a)?Po(a,Ar(u,1,gr,!0),g,h):[]});function qc(a,u,h){var T=null==a?0:a.length;if(!T)return-1;var j=null==h?0:vn(h);return j<0&&(j=Pr(T+j,0)),pi(a,Ye(u,3),j)}function tf(a,u,h){var T=null==a?0:a.length;if(!T)return-1;var j=T-1;return h!==g&&(j=vn(h),j=h<0?Pr(T+j,0):Xr(j,T-1)),pi(a,Ye(u,3),j,!0)}function ef(a){return null!=a&&a.length?Ar(a,1):[]}function nf(a){return a&&a.length?a[0]:g}var rf=_n(function(a){var u=Ge(a,Kr);return u.length&&u[0]===a[0]?Xu(u):[]}),Pl=_n(function(a){var u=to(a),h=Ge(a,Kr);return u===to(h)?u=g:h.pop(),h.length&&h[0]===a[0]?Xu(h,Ye(u,2)):[]}),Ud=_n(function(a){var u=to(a),h=Ge(a,Kr);return(u="function"==typeof u?u:g)&&h.pop(),h.length&&h[0]===a[0]?Xu(h,g,u):[]});function to(a){var u=null==a?0:a.length;return u?a[u-1]:g}var $d=_n(of);function of(a,u){return a&&a.length&&u&&u.length?nl(a,u):a}var go=ea(function(a,u){var h=null==a?0:a.length,T=Wu(a,u);return bc(a,Ge(u,function(j){return ho(j,h)?+j:j}).sort(Ic)),T});function Al(a){return null==a?a:ql.call(a)}var lh=_n(function(a){return qo(Ar(a,1,gr,!0))}),ch=_n(function(a){var u=to(a);return gr(u)&&(u=g),qo(Ar(a,1,gr,!0),Ye(u,2))}),fh=_n(function(a){var u=to(a);return u="function"==typeof u?u:g,qo(Ar(a,1,gr,!0),g,u)});function le(a){if(!a||!a.length)return[];var u=0;return a=Jn(a,function(h){if(gr(h))return u=Pr(h.length,u),!0}),Er(u,function(h){return Ge(a,Ua(h))})}function Su(a,u){if(!a||!a.length)return[];var h=le(a);return null==u?h:Ge(h,function(T){return Rt(u,g,T)})}var gh=_n(function(a,u){return gr(a)?Po(a,u):[]}),Tu=_n(function(a){return fl(Jn(a,gr))}),Wp=_n(function(a){var u=to(a);return gr(u)&&(u=g),fl(Jn(a,gr),Ye(u,2))}),vh=_n(function(a){var u=to(a);return u="function"==typeof u?u:g,fl(Jn(a,gr),g,u)}),$p=_n(le),ts=_n(function(a){var u=a.length,h=u>1?a[u-1]:g;return h="function"==typeof h?(a.pop(),h):g,Su(a,h)});function Eu(a){var u=Q(a);return u.__chain__=!0,u}function ko(a,u){return u(a)}var Il=ea(function(a){var u=a.length,h=u?a[0]:0,T=this.__wrapped__,j=function(q){return Wu(q,a)};return!(u>1||this.__actions__.length)&&T instanceof Mn&&ho(h)?((T=T.slice(h,+h+(u?1:0))).__actions__.push({func:ko,args:[j],thisArg:g}),new Zi(T,this.__chain__).thru(function(q){return u&&!q.length&&q.push(g),q})):this.thru(j)}),Xp=Ia(function(a,u,h){Bt.call(a,h)?++a[h]:Xo(a,h,1)}),Jp=Dc(qc),Qp=Dc(tf);function mh(a,u){return(cn(a)?Se:Ko)(a,Ye(u,3))}function Ml(a,u){return(cn(a)?en:ou)(a,Ye(u,3))}var kl=Ia(function(a,u,h){Bt.call(a,h)?a[h].push(u):Xo(a,h,[u])}),ur=_n(function(a,u,h){var T=-1,j="function"==typeof u,q=Ai(a)?Vt(a.length):[];return Ko(a,function(ft){q[++T]=j?Rt(u,ft,h):Ta(ft,u,h)}),q}),xs=Ia(function(a,u,h){Xo(a,h,u)});function js(a,u){return(cn(a)?Ge:mc)(a,Ye(u,3))}var Pu=Ia(function(a,u,h){a[h?0:1].push(u)},function(){return[[],[]]}),Iu=_n(function(a,u){if(null==a)return[];var h=u.length;return h>1&&ai(a,u[0],u[1])?u=[]:h>2&&ai(u[0],u[1],u[2])&&(u=[u[0]]),uu(a,Ar(u,1),[])}),Mu=Kl||function(){return l.Date.now()};function zs(a,u,h){return u=h?g:u,ta(a,C,g,g,g,g,u=a&&null==u?a.length:u)}function ku(a,u){var h;if("function"!=typeof u)throw new Z(I);return a=vn(a),function(){return--a>0&&(h=u.apply(this,arguments)),a<=1&&(u=g),h}}var Lo=_n(function(a,u,h){var T=1;if(h.length){var j=uo(h,vs(Lo));T|=32}return ta(a,T,u,h,j)}),es=_n(function(a,u,h){var T=3;if(h.length){var j=uo(h,vs(es));T|=32}return ta(u,T,a,h,j)});function Ws(a,u,h){var T,j,q,ft,bt,kt,Zt=0,qt=!1,oe=!1,_e=!0;if("function"!=typeof a)throw new Z(I);function Me(Rr){var aa=T,ns=j;return T=j=g,Zt=Rr,ft=a.apply(ns,aa)}function Xe(Rr){return Zt=Rr,bt=Hs(En,u),qt?Me(Rr):ft}function je(Rr){var aa=Rr-kt;return kt===g||aa>=u||aa<0||oe&&Rr-Zt>=q}function En(){var Rr=Mu();if(je(Rr))return On(Rr);bt=Hs(En,function mn(Rr){var ig=u-(Rr-kt);return oe?Xr(ig,q-(Rr-Zt)):ig}(Rr))}function On(Rr){return bt=g,_e&&T?Me(Rr):(T=j=g,ft)}function Ir(){var Rr=Mu(),aa=je(Rr);if(T=arguments,j=this,kt=Rr,aa){if(bt===g)return Xe(kt);if(oe)return Tc(bt),bt=Hs(En,u),Me(kt)}return bt===g&&(bt=Hs(En,u)),ft}return u=Ii(u)||0,vr(h)&&(qt=!!h.leading,q=(oe="maxWait"in h)?Pr(Ii(h.maxWait)||0,u):q,_e="trailing"in h?!!h.trailing:_e),Ir.cancel=function Mi(){bt!==g&&Tc(bt),Zt=0,T=kt=j=bt=g},Ir.flush=function wi(){return bt===g?ft:On(Mu())},Ir}var Lu=_n(function(a,u){return wa(a,1,u)}),_h=_n(function(a,u,h){return wa(a,Ii(u)||0,h)});function Ou(a,u){if("function"!=typeof a||null!=u&&"function"!=typeof u)throw new Z(I);var h=function(){var T=arguments,j=u?u.apply(this,T):T[0],q=h.cache;if(q.has(j))return q.get(j);var ft=a.apply(this,T);return h.cache=q.set(j,ft)||q,ft};return h.cache=new(Ou.Cache||Wo),h}function bs(a){if("function"!=typeof a)throw new Z(I);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}Ou.Cache=Wo;var Th=hd(function(a,u){var h=(u=1==u.length&&cn(u[0])?Ge(u[0],Yr(Ye())):Ge(Ar(u,1),Yr(Ye()))).length;return _n(function(T){for(var j=-1,q=Xr(T.length,h);++j<q;)T[j]=u[j].call(this,T[j]);return Rt(a,this,T)})}),Ll=_n(function(a,u){var h=uo(u,vs(Ll));return ta(a,32,g,u,h)}),gf=_n(function(a,u){var h=uo(u,vs(gf));return ta(a,64,g,u,h)}),Eh=ea(function(a,u){return ta(a,256,g,g,g,u)});function vo(a,u){return a===u||a!=a&&u!=u}var Fh=Ka(hs),Vh=Ka(function(a,u){return a>=u}),Oa=dc(function(){return arguments}())?dc:function(a){return br(a)&&Bt.call(a,"callee")&&!pr.call(a,"callee")},cn=Vt.isArray,Bh=Y?Yr(Y):function ud(a){return br(a)&&Vr(a)==gn};function Ai(a){return null!=a&&Nu(a.length)&&!ra(a)}function gr(a){return br(a)&&Ai(a)}var na=Jl||An,mf=lt?Yr(lt):function Ku(a){return br(a)&&Vr(a)==Te};function Ol(a){if(!br(a))return!1;var u=Vr(a);return u==Rn||"[object DOMException]"==u||"string"==typeof a.message&&"string"==typeof a.name&&!Ys(a)}function ra(a){if(!vr(a))return!1;var u=Vr(a);return u==rr||u==ki||"[object AsyncFunction]"==u||"[object Proxy]"==u}function xf(a){return"number"==typeof a&&a==vn(a)}function Nu(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=hr}function vr(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function br(a){return null!=a&&"object"==typeof a}var bf=ut?Yr(ut):function Ju(a){return br(a)&&oi(a)==ln};function Nl(a){return"number"==typeof a||br(a)&&Vr(a)==Ze}function Ys(a){if(!br(a)||Vr(a)!=z)return!1;var u=Vn(a);if(null===u)return!0;var h=Bt.call(u,"constructor")&&u.constructor;return"function"==typeof h&&h instanceof h&&Jt.call(h)==Pe}var Dl=At?Yr(At):function pc(a){return br(a)&&Vr(a)==$t},_f=Ht?Yr(Ht):function gc(a){return br(a)&&oi(a)==Qt};function Du(a){return"string"==typeof a||!cn(a)&&br(a)&&Vr(a)==xe}function Gi(a){return"symbol"==typeof a||br(a)&&Vr(a)==Ne}var Cs=re?Yr(re):function ld(a){return br(a)&&Nu(a.length)&&!!Gn[Vr(a)]},Kh=Ka(qu),Jh=Ka(function(a,u){return a<=u});function wf(a){if(!a)return[];if(Ai(a))return Du(a)?xr(a):bi(a);if(As&&a[As])return function To(wt){for(var Wt,Vt=[];!(Wt=wt.next()).done;)Vt.push(Wt.value);return Vt}(a[As]());var u=oi(a);return(u==ln?Fi:u==Qt?us:Ss)(a)}function ia(a){return a?(a=Ii(a))===Re||a===-Re?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function vn(a){var u=ia(a),h=u%1;return u==u?h?u-h:u:0}function Sf(a){return a?ds(vn(a),0,zt):0}function Ii(a){if("number"==typeof a)return a;if(Gi(a))return NaN;if(vr(a)){var u="function"==typeof a.valueOf?a.valueOf():a;a=vr(u)?u+"":u}if("string"!=typeof a)return 0===a?a:+a;a=ss(a);var h=la.test(a);return h||on.test(a)?mt(a.slice(2),h?2:8):Wi.test(a)?NaN:+a}function Fl(a){return Io(a,_i(a))}function Xn(a){return null==a?"":Ui(a)}var Qh=ii(function(a,u){if(Fs(u)||Ai(u))Io(u,Br(u),a);else for(var h in u)Bt.call(u,h)&&iu(a,h,u[h])}),Tf=ii(function(a,u){Io(u,_i(u),a)}),Fu=ii(function(a,u,h,T){Io(u,_i(u),a,T)}),Zh=ii(function(a,u,h,T){Io(u,Br(u),a,T)}),ng=ea(Wu),Vu=_n(function(a,u){a=Yn(a);var h=-1,T=u.length,j=T>2?u[2]:g;for(j&&ai(u[0],u[1],j)&&(T=1);++h<T;)for(var q=u[h],ft=_i(q),bt=-1,kt=ft.length;++bt<kt;){var Zt=ft[bt],qt=a[Zt];(qt===g||vo(qt,Kt[Zt])&&!Bt.call(a,Zt))&&(a[Zt]=q[Zt])}return a}),rg=_n(function(a){return a.push(g,mu),Rt(Mf,g,a)});function Xs(a,u,h){var T=null==a?g:Qo(a,u);return T===g?h:T}function Bl(a,u){return null!=a&&Uc(a,u,cc)}var op=Vc(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=Be.call(u)),a[u]=h},G(Ct)),ap=Vc(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=Be.call(u)),Bt.call(a,u)?a[u].push(h):a[u]=[h]},Ye),Af=_n(Ta);function Br(a){return Ai(a)?nd(a):Zu(a)}function _i(a){return Ai(a)?nd(a,!0):function vc(a){if(!vr(a))return function Vs(a){var u=[];if(null!=a)for(var h in Yn(a))u.push(h);return u}(a);var u=Fs(a),h=[];for(var T in a)"constructor"==T&&(u||!Bt.call(a,T))||h.push(T);return h}(a)}var up=ii(function(a,u,h){Ea(a,u,h)}),Mf=ii(function(a,u,h,T){Ea(a,u,h,T)}),lp=ea(function(a,u){var h={};if(null==a)return h;var T=!1;u=Ge(u,function(q){return q=Pa(q,a),T||(T=q.length>1),q}),Io(a,fo(a),h),T&&(h=qi(h,7,ml));for(var j=u.length;j--;)cl(h,u[j]);return h}),Hl=ea(function(a,u){return null==a?{}:function cd(a,u){return el(a,u,function(h,T){return Bl(a,T)})}(a,u)});function kf(a,u){if(null==a)return{};var h=Ge(fo(a),function(T){return[T]});return u=Ye(u),el(a,h,function(T,j){return u(T,j[0])})}var Lf=vl(Br),Of=vl(_i);function Ss(a){return null==a?[]:ni(a,Br(a))}var _p=gs(function(a,u,h){return u=u.toLowerCase(),a+(h?Rf(u):u)});function Rf(a){return c(Xn(a).toLowerCase())}function Nf(a){return(a=Xn(a))&&a.replace(Fa,Ts).replace(kr,"")}var Ep=gs(function(a,u,h){return a+(h?"-":"")+u.toLowerCase()}),Pp=gs(function(a,u,h){return a+(h?" ":"")+u.toLowerCase()}),Df=Rc("toLowerCase"),Lp=gs(function(a,u,h){return a+(h?"_":"")+u.toLowerCase()}),Rp=gs(function(a,u,h){return a+(h?" ":"")+c(u)}),s=gs(function(a,u,h){return a+(h?" ":"")+u.toUpperCase()}),c=Rc("toUpperCase");function v(a,u,h){return a=Xn(a),(u=h?g:u)===g?function Wl(wt){return Ei.test(wt)}(a)?function Hi(wt){return wt.match(Ti)||[]}(a):function sr(wt){return wt.match(Sr)||[]}(a):a.match(u)||[]}var m=_n(function(a,u){try{return Rt(a,g,u)}catch(h){return Ol(h)?h:new ve(h)}}),S=ea(function(a,u){return Se(u,function(h){h=Mo(h),Xo(a,h,Lo(a[h],a))}),a});function G(a){return function(){return a}}var ot=Fc(),Tt=Fc(!0);function Ct(a){return a}function Dt(a){return au("function"==typeof a?a:qi(a,1))}var U=_n(function(a,u){return function(h){return Ta(h,a,u)}}),K=_n(function(a,u){return function(h){return Ta(a,h,u)}});function it(a,u,h){var T=Br(u),j=$a(u,T);null==h&&(!vr(u)||!j.length&&T.length)&&(h=u,u=a,a=this,j=$a(u,Br(u)));var q=!(vr(h)&&"chain"in h&&!h.chain),ft=ra(a);return Se(j,function(bt){var kt=u[bt];a[bt]=kt,ft&&(a.prototype[bt]=function(){var Zt=this.__chain__;if(q||Zt){var qt=a(this.__wrapped__),oe=qt.__actions__=bi(this.__actions__);return oe.push({func:kt,args:arguments,thisArg:a}),qt.__chain__=Zt,qt}return kt.apply(a,De([this.value()],arguments))})}),a}function It(){}var Gt=Xa(Ge),se=Xa(Ie),ee=Xa(nr);function ce(a){return _l(a)?Ua(Mo(a)):function xc(a){return function(u){return Qo(u,a)}}(a)}var ye=pl(),Oe=pl(!0);function Hn(){return[]}function An(){return!1}var $n=gu(function(a,u){return a+u},0),Kn=gl("ceil"),bn=gu(function(a,u){return a/u},1),dr=gl("floor"),si=gu(function(a,u){return a*u},1),oa=gl("round"),jl=gu(function(a,u){return a-u},0);return Q.after=function Us(a,u){if("function"!=typeof u)throw new Z(I);return a=vn(a),function(){if(--a<1)return u.apply(this,arguments)}},Q.ary=zs,Q.assign=Qh,Q.assignIn=Tf,Q.assignInWith=Fu,Q.assignWith=Zh,Q.at=ng,Q.before=ku,Q.bind=Lo,Q.bindAll=S,Q.bindKey=es,Q.castArray=function Lh(){if(!arguments.length)return[];var a=arguments[0];return cn(a)?a:[a]},Q.chain=Eu,Q.chunk=function Ad(a,u,h){u=(h?ai(a,u,h):u===g)?1:Pr(vn(u),0);var T=null==a?0:a.length;if(!T||u<1)return[];for(var j=0,q=0,ft=Vt(Zs(T/u));j<T;)ft[q++]=xi(a,j,j+=u);return ft},Q.compact=function Zc(a){for(var u=-1,h=null==a?0:a.length,T=0,j=[];++u<h;){var q=a[u];q&&(j[T++]=q)}return j},Q.concat=function qa(){var a=arguments.length;if(!a)return[];for(var u=Vt(a-1),h=arguments[0],T=a;T--;)u[T-1]=arguments[T];return De(cn(h)?bi(h):[h],Ar(u,1))},Q.cond=function A(a){var u=null==a?0:a.length,h=Ye();return a=u?Ge(a,function(T){if("function"!=typeof T[1])throw new Z(I);return[h(T[0]),T[1]]}):[],_n(function(T){for(var j=-1;++j<u;){var q=a[j];if(Rt(q[0],this,T))return Rt(q[1],this,T)}})},Q.conforms=function b(a){return function Gp(a){var u=Br(a);return function(h){return ad(h,a,u)}}(qi(a,1))},Q.constant=G,Q.countBy=Xp,Q.create=function Ef(a,u){var h=fs(a);return null==u?h:id(h,u)},Q.curry=function $e(a,u,h){var T=ta(a,8,g,g,g,g,g,u=h?g:u);return T.placeholder=$e.placeholder,T},Q.curryRight=function Gs(a,u,h){var T=ta(a,16,g,g,g,g,g,u=h?g:u);return T.placeholder=Gs.placeholder,T},Q.debounce=Ws,Q.defaults=Vu,Q.defaultsDeep=rg,Q.defer=Lu,Q.delay=_h,Q.difference=Id,Q.differenceBy=Md,Q.differenceWith=kd,Q.drop=function Ld(a,u,h){var T=null==a?0:a.length;return T?xi(a,(u=h||u===g?1:vn(u))<0?0:u,T):[]},Q.dropRight=function Od(a,u,h){var T=null==a?0:a.length;return T?xi(a,0,(u=T-(u=h||u===g?1:vn(u)))<0?0:u):[]},Q.dropRightWhile=function Rd(a,u){return a&&a.length?fu(a,Ye(u,3),!0,!0):[]},Q.dropWhile=function Nd(a,u){return a&&a.length?fu(a,Ye(u,3),!0):[]},Q.fill=function Dd(a,u,h,T){var j=null==a?0:a.length;return j?(h&&"number"!=typeof h&&ai(a,u,h)&&(h=0,T=j),function Dn(a,u,h,T){var j=a.length;for((h=vn(h))<0&&(h=-h>j?0:j+h),(T=T===g||T>j?j:vn(T))<0&&(T+=j),T=h>T?0:Sf(T);h<T;)a[h++]=u;return a}(a,u,h,T)):[]},Q.filter=function Kp(a,u){return(cn(a)?Jn:kn)(a,Ye(u,3))},Q.flatMap=function Zp(a,u){return Ar(js(a,u),1)},Q.flatMapDeep=function ff(a,u){return Ar(js(a,u),Re)},Q.flatMapDepth=function qp(a,u,h){return h=h===g?1:vn(h),Ar(js(a,u),h)},Q.flatten=ef,Q.flattenDeep=function Fd(a){return null!=a&&a.length?Ar(a,Re):[]},Q.flattenDepth=function Vd(a,u){return null!=a&&a.length?Ar(a,u=u===g?1:vn(u)):[]},Q.flip=function wh(a){return ta(a,512)},Q.flow=ot,Q.flowRight=Tt,Q.fromPairs=function Bd(a){for(var u=-1,h=null==a?0:a.length,T={};++u<h;){var j=a[u];T[j[0]]=j[1]}return T},Q.functions=function rp(a){return null==a?[]:$a(a,Br(a))},Q.functionsIn=function Pf(a){return null==a?[]:$a(a,_i(a))},Q.groupBy=kl,Q.initial=function jd(a){return null!=a&&a.length?xi(a,0,-1):[]},Q.intersection=rf,Q.intersectionBy=Pl,Q.intersectionWith=Ud,Q.invert=op,Q.invertBy=ap,Q.invokeMap=ur,Q.iteratee=Dt,Q.keyBy=xs,Q.keys=Br,Q.keysIn=_i,Q.map=js,Q.mapKeys=function If(a,u){var h={};return u=Ye(u,3),Ao(a,function(T,j,q){Xo(h,u(T,j,q),T)}),h},Q.mapValues=function sp(a,u){var h={};return u=Ye(u,3),Ao(a,function(T,j,q){Xo(h,j,u(T,j,q))}),h},Q.matches=function Nt(a){return tl(qi(a,1))},Q.matchesProperty=function L(a,u){return yc(a,qi(u,1))},Q.memoize=Ou,Q.merge=up,Q.mergeWith=Mf,Q.method=U,Q.methodOf=K,Q.mixin=it,Q.negate=bs,Q.nthArg=function Ot(a){return a=vn(a),_n(function(u){return ps(u,a)})},Q.omit=lp,Q.omitBy=function cp(a,u){return kf(a,bs(Ye(u)))},Q.once=function Sh(a){return ku(2,a)},Q.orderBy=function yh(a,u,h,T){return null==a?[]:(cn(u)||(u=null==u?[]:[u]),cn(h=T?g:h)||(h=null==h?[]:[h]),uu(a,u,h))},Q.over=Gt,Q.overArgs=Th,Q.overEvery=se,Q.overSome=ee,Q.partial=Ll,Q.partialRight=gf,Q.partition=Pu,Q.pick=Hl,Q.pickBy=kf,Q.property=ce,Q.propertyOf=function me(a){return function(u){return null==a?g:Qo(a,u)}},Q.pull=$d,Q.pullAll=of,Q.pullAllBy=function Yd(a,u,h){return a&&a.length&&u&&u.length?nl(a,u,Ye(h,2)):a},Q.pullAllWith=function af(a,u,h){return a&&a.length&&u&&u.length?nl(a,u,g,h):a},Q.pullAt=go,Q.range=ye,Q.rangeRight=Oe,Q.rearg=Eh,Q.reject=function df(a,u){return(cn(a)?Jn:kn)(a,bs(Ye(u,3)))},Q.remove=function Xd(a,u){var h=[];if(!a||!a.length)return h;var T=-1,j=[],q=a.length;for(u=Ye(u,3);++T<q;){var ft=a[T];u(ft,T,a)&&(h.push(ft),j.push(T))}return bc(a,j),h},Q.rest=function Ph(a,u){if("function"!=typeof a)throw new Z(I);return _n(a,u=u===g?u:vn(u))},Q.reverse=Al,Q.sampleSize=function Au(a,u,h){return u=(h?ai(a,u,h):u===g)?1:vn(u),(cn(a)?Up:Cc)(a,u)},Q.set=function dp(a,u,h){return null==a?a:Os(a,u,h)},Q.setWith=function hp(a,u,h,T){return T="function"==typeof T?T:g,null==a?a:Os(a,u,h,T)},Q.shuffle=function hf(a){return(cn(a)?zp:lu)(a)},Q.slice=function Kd(a,u,h){var T=null==a?0:a.length;return T?(h&&"number"!=typeof h&&ai(a,u,h)?(u=0,h=T):(u=null==u?0:vn(u),h=h===g?T:vn(h)),xi(a,u,h)):[]},Q.sortBy=Iu,Q.sortedUniq=function nh(a){return a&&a.length?_c(a):[]},Q.sortedUniqBy=function rh(a,u){return a&&a.length?_c(a,Ye(u,2)):[]},Q.split=function Op(a,u,h){return h&&"number"!=typeof h&&ai(a,u,h)&&(u=h=g),(h=h===g?zt:h>>>0)?(a=Xn(a))&&("string"==typeof u||null!=u&&!Dl(u))&&!(u=Ui(u))&&Qi(a)?Aa(xr(a),0,h):a.split(u,h):[]},Q.spread=function Ah(a,u){if("function"!=typeof a)throw new Z(I);return u=null==u?0:Pr(vn(u),0),_n(function(h){var T=h[u],j=Aa(h,0,u);return T&&De(j,T),Rt(a,this,j)})},Q.tail=function ih(a){var u=null==a?0:a.length;return u?xi(a,1,u):[]},Q.take=function oh(a,u,h){return a&&a.length?xi(a,0,(u=h||u===g?1:vn(u))<0?0:u):[]},Q.takeRight=function ah(a,u,h){var T=null==a?0:a.length;return T?xi(a,(u=T-(u=h||u===g?1:vn(u)))<0?0:u,T):[]},Q.takeRightWhile=function sh(a,u){return a&&a.length?fu(a,Ye(u,3),!1,!0):[]},Q.takeWhile=function uh(a,u){return a&&a.length?fu(a,Ye(u,3)):[]},Q.tap=function ys(a,u){return u(a),a},Q.throttle=function Ih(a,u,h){var T=!0,j=!0;if("function"!=typeof a)throw new Z(I);return vr(h)&&(T="leading"in h?!!h.leading:T,j="trailing"in h?!!h.trailing:j),Ws(a,u,{leading:T,maxWait:u,trailing:j})},Q.thru=ko,Q.toArray=wf,Q.toPairs=Lf,Q.toPairsIn=Of,Q.toPath=function ze(a){return cn(a)?Ge(a,Mo):Gi(a)?[a]:bi(Jc(Xn(a)))},Q.toPlainObject=Fl,Q.transform=function pp(a,u,h){var T=cn(a),j=T||na(a)||Cs(a);if(u=Ye(u,4),null==h){var q=a&&a.constructor;h=j?T?new q:[]:vr(a)&&ra(q)?fs(Vn(a)):{}}return(j?Se:Ao)(a,function(ft,bt,kt){return u(h,ft,bt,kt)}),h},Q.unary=function Mh(a){return zs(a,1)},Q.union=lh,Q.unionBy=ch,Q.unionWith=fh,Q.uniq=function dh(a){return a&&a.length?qo(a):[]},Q.uniqBy=function hh(a,u){return a&&a.length?qo(a,Ye(u,2)):[]},Q.uniqWith=function ph(a,u){return u="function"==typeof u?u:g,a&&a.length?qo(a,g,u):[]},Q.unset=function gp(a,u){return null==a||cl(a,u)},Q.unzip=le,Q.unzipWith=Su,Q.update=function vp(a,u,h){return null==a?a:wc(a,u,Rs(h))},Q.updateWith=function mp(a,u,h,T){return T="function"==typeof T?T:g,null==a?a:wc(a,u,Rs(h),T)},Q.values=Ss,Q.valuesIn=function yp(a){return null==a?[]:ni(a,_i(a))},Q.without=gh,Q.words=v,Q.wrap=function kh(a,u){return Ll(Rs(u),a)},Q.xor=Tu,Q.xorBy=Wp,Q.xorWith=vh,Q.zip=$p,Q.zipObject=function Yp(a,u){return zi(a||[],u||[],iu)},Q.zipObjectDeep=function sf(a,u){return zi(a||[],u||[],Os)},Q.zipWith=ts,Q.entries=Lf,Q.entriesIn=Of,Q.extend=Tf,Q.extendWith=Fu,it(Q,Q),Q.add=$n,Q.attempt=m,Q.camelCase=_p,Q.capitalize=Rf,Q.ceil=Kn,Q.clamp=function xp(a,u,h){return h===g&&(h=u,u=g),h!==g&&(h=(h=Ii(h))==h?h:0),u!==g&&(u=(u=Ii(u))==u?u:0),ds(Ii(a),u,h)},Q.clone=function Oh(a){return qi(a,4)},Q.cloneDeep=function Nh(a){return qi(a,5)},Q.cloneDeepWith=function Dh(a,u){return qi(a,5,u="function"==typeof u?u:g)},Q.cloneWith=function Rh(a,u){return qi(a,4,u="function"==typeof u?u:g)},Q.conformsTo=function vf(a,u){return null==u||ad(a,u,Br(u))},Q.deburr=Nf,Q.defaultTo=function tt(a,u){return null==a||a!=a?u:a},Q.divide=bn,Q.endsWith=function wp(a,u,h){a=Xn(a),u=Ui(u);var T=a.length,j=h=h===g?T:ds(vn(h),0,T);return(h-=u.length)>=0&&a.slice(h,j)==u},Q.eq=vo,Q.escape=function Sp(a){return(a=Xn(a))&&Si.test(a)?a.replace(sa,ju):a},Q.escapeRegExp=function Tp(a){return(a=Xn(a))&&Na.test(a)?a.replace(eo,"\\$&"):a},Q.every=function cf(a,u,h){var T=cn(a)?Ie:Sa;return h&&ai(a,u,h)&&(u=g),T(a,Ye(u,3))},Q.find=Jp,Q.findIndex=qc,Q.findKey=function Vl(a,u){return So(a,Ye(u,3),Ao)},Q.findLast=Qp,Q.findLastIndex=tf,Q.findLastKey=function Or(a,u){return So(a,Ye(u,3),Yu)},Q.floor=dr,Q.forEach=mh,Q.forEachRight=Ml,Q.forIn=function qh(a,u){return null==a?a:$u(a,Ye(u,3),_i)},Q.forInRight=function tp(a,u){return null==a?a:uc(a,Ye(u,3),_i)},Q.forOwn=function ep(a,u){return a&&Ao(a,Ye(u,3))},Q.forOwnRight=function np(a,u){return a&&Yu(a,Ye(u,3))},Q.get=Xs,Q.gt=Fh,Q.gte=Vh,Q.has=function ip(a,u){return null!=a&&Uc(a,u,lc)},Q.hasIn=Bl,Q.head=nf,Q.identity=Ct,Q.includes=function tg(a,u,h,T){a=Ai(a)?a:Ss(a),h=h&&!T?vn(h):0;var j=a.length;return h<0&&(h=Pr(j+h,0)),Du(a)?h<=j&&a.indexOf(u,h)>-1:!!j&&cr(a,u,h)>-1},Q.indexOf=function Hd(a,u,h){var T=null==a?0:a.length;if(!T)return-1;var j=null==h?0:vn(h);return j<0&&(j=Pr(T+j,0)),cr(a,u,j)},Q.inRange=function bp(a,u,h){return u=ia(u),h===g?(h=u,u=0):h=ia(h),function sd(a,u,h){return a>=Xr(u,h)&&a<Pr(u,h)}(a=Ii(a),u,h)},Q.invoke=Af,Q.isArguments=Oa,Q.isArray=cn,Q.isArrayBuffer=Bh,Q.isArrayLike=Ai,Q.isArrayLikeObject=gr,Q.isBoolean=function Ru(a){return!0===a||!1===a||br(a)&&Vr(a)==pe},Q.isBuffer=na,Q.isDate=mf,Q.isElement=function Hh(a){return br(a)&&1===a.nodeType&&!Ys(a)},Q.isEmpty=function jh(a){if(null==a)return!0;if(Ai(a)&&(cn(a)||"string"==typeof a||"function"==typeof a.splice||na(a)||Cs(a)||Oa(a)))return!a.length;var u=oi(a);if(u==ln||u==Qt)return!a.size;if(Fs(a))return!Zu(a).length;for(var h in a)if(Bt.call(a,h))return!1;return!0},Q.isEqual=function Uh(a,u){return Ya(a,u)},Q.isEqualWith=function zh(a,u,h){var T=(h="function"==typeof h?h:g)?h(a,u):g;return T===g?Ya(a,u,g,h):!!T},Q.isError=Ol,Q.isFinite=function yf(a){return"number"==typeof a&&tu(a)},Q.isFunction=ra,Q.isInteger=xf,Q.isLength=Nu,Q.isMap=bf,Q.isMatch=function Rl(a,u){return a===u||Zo(a,u,bl(u))},Q.isMatchWith=function $s(a,u,h){return h="function"==typeof h?h:g,Zo(a,u,bl(u),h)},Q.isNaN=function Jr(a){return Nl(a)&&a!=+a},Q.isNative=function Gh(a){if(Ed(a))throw new ve("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Qu(a)},Q.isNil=function Cf(a){return null==a},Q.isNull=function Wh(a){return null===a},Q.isNumber=Nl,Q.isObject=vr,Q.isObjectLike=br,Q.isPlainObject=Ys,Q.isRegExp=Dl,Q.isSafeInteger=function $h(a){return xf(a)&&a>=-hr&&a<=hr},Q.isSet=_f,Q.isString=Du,Q.isSymbol=Gi,Q.isTypedArray=Cs,Q.isUndefined=function _s(a){return a===g},Q.isWeakMap=function Yh(a){return br(a)&&oi(a)==pn},Q.isWeakSet=function Xh(a){return br(a)&&"[object WeakSet]"==Vr(a)},Q.join=function zd(a,u){return null==a?"":xa.call(a,u)},Q.kebabCase=Ep,Q.last=to,Q.lastIndexOf=function Gd(a,u,h){var T=null==a?0:a.length;if(!T)return-1;var j=T;return h!==g&&(j=(j=vn(h))<0?Pr(T+j,0):Xr(j,T-1)),u==u?function qn(wt,Wt,Vt){for(var Ce=Vt+1;Ce--;)if(wt[Ce]===Wt)return Ce;return Ce}(a,u,j):pi(a,ei,j,!0)},Q.lowerCase=Pp,Q.lowerFirst=Df,Q.lt=Kh,Q.lte=Jh,Q.max=function Ln(a){return a&&a.length?Jo(a,Ct,hs):g},Q.maxBy=function un(a,u){return a&&a.length?Jo(a,Ye(u,2),hs):g},Q.mean=function Tn(a){return Ji(a,Ct)},Q.meanBy=function He(a,u){return Ji(a,Ye(u,2))},Q.min=function we(a){return a&&a.length?Jo(a,Ct,qu):g},Q.minBy=function Qr(a,u){return a&&a.length?Jo(a,Ye(u,2),qu):g},Q.stubArray=Hn,Q.stubFalse=An,Q.stubObject=function Qn(){return{}},Q.stubString=function Fe(){return""},Q.stubTrue=function tn(){return!0},Q.multiply=si,Q.nth=function Wd(a,u){return a&&a.length?ps(a,vn(u)):g},Q.noConflict=function gt(){return l._===this&&(l._=We),this},Q.noop=It,Q.now=Mu,Q.pad=function Ff(a,u,h){a=Xn(a);var T=(u=vn(u))?Eo(a):0;if(!u||T>=u)return a;var j=(u-T)/2;return Ds(ls(j),h)+a+Ds(Zs(j),h)},Q.padEnd=function Ks(a,u,h){a=Xn(a);var T=(u=vn(u))?Eo(a):0;return u&&T<u?a+Ds(u-T,h):a},Q.padStart=function Ap(a,u,h){a=Xn(a);var T=(u=vn(u))?Eo(a):0;return u&&T<u?Ds(u-T,h)+a:a},Q.parseInt=function Ip(a,u,h){return h||null==u?u=0:u&&(u=+u),Zl(Xn(a).replace(xo,""),u||0)},Q.random=function Cp(a,u,h){if(h&&"boolean"!=typeof h&&ai(a,u,h)&&(u=h=g),h===g&&("boolean"==typeof u?(h=u,u=g):"boolean"==typeof a&&(h=a,a=g)),a===g&&u===g?(a=0,u=1):(a=ia(a),u===g?(u=a,a=0):u=ia(u)),a>u){var T=a;a=u,u=T}if(h||a%1||u%1){var j=Is();return Xr(a+j*(u-a+at("1e-"+((j+"").length-1))),u)}return rl(a,u)},Q.reduce=function xh(a,u,h){var T=cn(a)?ar:as,j=arguments.length<3;return T(a,Ye(u,4),h,j,Ko)},Q.reduceRight=function bh(a,u,h){var T=cn(a)?Nn:as,j=arguments.length<3;return T(a,Ye(u,4),h,j,ou)},Q.repeat=function Mp(a,u,h){return u=(h?ai(a,u,h):u===g)?1:vn(u),ol(Xn(a),u)},Q.replace=function kp(){var a=arguments,u=Xn(a[0]);return a.length<3?u:u.replace(a[1],a[2])},Q.result=function fp(a,u,h){var T=-1,j=(u=Pa(u,a)).length;for(j||(j=1,a=g);++T<j;){var q=null==a?g:a[Mo(u[T])];q===g&&(T=j,q=h),a=ra(q)?q.call(a):q}return a},Q.round=oa,Q.runInContext=wt,Q.sample=function eg(a){return(cn(a)?rd:fd)(a)},Q.size=function pf(a){if(null==a)return 0;if(Ai(a))return Du(a)?Eo(a):a.length;var u=oi(a);return u==ln||u==Qt?a.size:Zu(a).length},Q.snakeCase=Lp,Q.some=function Ch(a,u,h){var T=cn(a)?nr:sl;return h&&ai(a,u,h)&&(u=g),T(a,Ye(u,3))},Q.sortedIndex=function Jd(a,u){return cu(a,u)},Q.sortedIndexBy=function Qd(a,u,h){return ul(a,u,Ye(h,2))},Q.sortedIndexOf=function Zd(a,u){var h=null==a?0:a.length;if(h){var T=cu(a,u);if(T<h&&vo(a[T],u))return T}return-1},Q.sortedLastIndex=function qd(a,u){return cu(a,u,!0)},Q.sortedLastIndexBy=function th(a,u,h){return ul(a,u,Ye(h,2),!0)},Q.sortedLastIndexOf=function eh(a,u){if(null!=a&&a.length){var T=cu(a,u,!0)-1;if(vo(a[T],u))return T}return-1},Q.startCase=Rp,Q.startsWith=function Np(a,u,h){return a=Xn(a),h=null==h?0:ds(vn(h),0,a.length),u=Ui(u),a.slice(h,h+u.length)==u},Q.subtract=jl,Q.sum=function Ul(a){return a&&a.length?so(a,Ct):0},Q.sumBy=function Vf(a,u){return a&&a.length?so(a,Ye(u,2)):0},Q.template=function Dp(a,u,h){var T=Q.templateSettings;h&&ai(a,u,h)&&(u=g),a=Xn(a),u=Fu({},u,T,Bc);var bt,kt,j=Fu({},u.imports,T.imports,Bc),q=Br(j),ft=ni(j,q),Zt=0,qt=u.interpolate||Oi,oe="__p += '",_e=Ga((u.escape||Oi).source+"|"+qt.source+"|"+(qt===Ro?ua:Oi).source+"|"+(u.evaluate||Oi).source+"|$","g"),Me="//# sourceURL="+(Bt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++va+"]")+"\n";a.replace(_e,function(je,En,On,Mi,wi,Ir){return On||(On=Mi),oe+=a.slice(Zt,Ir).replace(ro,zl),En&&(bt=!0,oe+="' +\n__e("+En+") +\n'"),wi&&(kt=!0,oe+="';\n"+wi+";\n__p += '"),On&&(oe+="' +\n((__t = ("+On+")) == null ? '' : __t) +\n'"),Zt=Ir+je.length,je}),oe+="';\n";var Xe=Bt.call(u,"variable")&&u.variable;if(Xe){if(bo.test(Xe))throw new ve("Invalid `variable` option passed into `_.template`")}else oe="with (obj) {\n"+oe+"\n}\n";oe=(kt?oe.replace(yr,""):oe).replace(Oo,"$1").replace(rs,"$1;"),oe="function("+(Xe||"obj")+") {\n"+(Xe?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(bt?", __e = _.escape":"")+(kt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+oe+"return __p\n}";var mn=m(function(){return Je(q,Me+"return "+oe).apply(g,ft)});if(mn.source=oe,Ol(mn))throw mn;return mn},Q.times=function Ue(a,u){if((a=vn(a))<1||a>hr)return[];var h=zt,T=Xr(a,zt);u=Ye(u),a-=zt;for(var j=Er(T,u);++h<a;)u(h);return j},Q.toFinite=ia,Q.toInteger=vn,Q.toLength=Sf,Q.toLower=function Fp(a){return Xn(a).toLowerCase()},Q.toNumber=Ii,Q.toSafeInteger=function ws(a){return a?ds(vn(a),-hr,hr):0===a?a:0},Q.toString=Xn,Q.toUpper=function Vp(a){return Xn(a).toUpperCase()},Q.trim=function t(a,u,h){if((a=Xn(a))&&(h||u===g))return ss(a);if(!a||!(u=Ui(u)))return a;var T=xr(a),j=xr(u);return Aa(T,Js(T,j),Bu(T,j)+1).join("")},Q.trimEnd=function e(a,u,h){if((a=Xn(a))&&(h||u===g))return a.slice(0,Bi(a)+1);if(!a||!(u=Ui(u)))return a;var T=xr(a);return Aa(T,0,Bu(T,xr(u))+1).join("")},Q.trimStart=function n(a,u,h){if((a=Xn(a))&&(h||u===g))return a.replace(xo,"");if(!a||!(u=Ui(u)))return a;var T=xr(a);return Aa(T,Js(T,xr(u))).join("")},Q.truncate=function r(a,u){var h=30,T="...";if(vr(u)){var j="separator"in u?u.separator:j;h="length"in u?vn(u.length):h,T="omission"in u?Ui(u.omission):T}var q=(a=Xn(a)).length;if(Qi(a)){var ft=xr(a);q=ft.length}if(h>=q)return a;var bt=h-Eo(T);if(bt<1)return T;var kt=ft?Aa(ft,0,bt).join(""):a.slice(0,bt);if(j===g)return kt+T;if(ft&&(bt+=kt.length-bt),Dl(j)){if(a.slice(bt).search(j)){var Zt,qt=kt;for(j.global||(j=Ga(j.source,Xn(is.exec(j))+"g")),j.lastIndex=0;Zt=j.exec(qt);)var oe=Zt.index;kt=kt.slice(0,oe===g?bt:oe)}}else if(a.indexOf(Ui(j),bt)!=bt){var _e=kt.lastIndexOf(j);_e>-1&&(kt=kt.slice(0,_e))}return kt+T},Q.unescape=function o(a){return(a=Xn(a))&&Ur.test(a)?a.replace(mo,Ve):a},Q.uniqueId=function wn(a){var u=++fe;return Xn(a)+u},Q.upperCase=s,Q.upperFirst=c,Q.each=mh,Q.eachRight=Ml,Q.first=nf,it(Q,function(){var a={};return Ao(Q,function(u,h){Bt.call(Q.prototype,h)||(a[h]=u)}),a}(),{chain:!1}),Q.VERSION="4.17.21",Se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Q[a].placeholder=Q}),Se(["drop","take"],function(a,u){Mn.prototype[a]=function(h){h=h===g?1:Pr(vn(h),0);var T=this.__filtered__&&!u?new Mn(this):this.clone();return T.__filtered__?T.__takeCount__=Xr(h,T.__takeCount__):T.__views__.push({size:Xr(h,zt),type:a+(T.__dir__<0?"Right":"")}),T},Mn.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),Se(["filter","map","takeWhile"],function(a,u){var h=u+1,T=1==h||3==h;Mn.prototype[a]=function(j){var q=this.clone();return q.__iteratees__.push({iteratee:Ye(j,3),type:h}),q.__filtered__=q.__filtered__||T,q}}),Se(["head","last"],function(a,u){var h="take"+(u?"Right":"");Mn.prototype[a]=function(){return this[h](1).value()[0]}}),Se(["initial","tail"],function(a,u){var h="drop"+(u?"":"Right");Mn.prototype[a]=function(){return this.__filtered__?new Mn(this):this[h](1)}}),Mn.prototype.compact=function(){return this.filter(Ct)},Mn.prototype.find=function(a){return this.filter(a).head()},Mn.prototype.findLast=function(a){return this.reverse().find(a)},Mn.prototype.invokeMap=_n(function(a,u){return"function"==typeof a?new Mn(this):this.map(function(h){return Ta(h,a,u)})}),Mn.prototype.reject=function(a){return this.filter(bs(Ye(a)))},Mn.prototype.slice=function(a,u){a=vn(a);var h=this;return h.__filtered__&&(a>0||u<0)?new Mn(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),u!==g&&(h=(u=vn(u))<0?h.dropRight(-u):h.take(u-a)),h)},Mn.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Mn.prototype.toArray=function(){return this.take(zt)},Ao(Mn.prototype,function(a,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),T=/^(?:head|last)$/.test(u),j=Q[T?"take"+("last"==u?"Right":""):u],q=T||/^find/.test(u);!j||(Q.prototype[u]=function(){var ft=this.__wrapped__,bt=T?[1]:arguments,kt=ft instanceof Mn,Zt=bt[0],qt=kt||cn(ft),oe=function(En){var On=j.apply(Q,De([En],bt));return T&&_e?On[0]:On};qt&&h&&"function"==typeof Zt&&1!=Zt.length&&(kt=qt=!1);var _e=this.__chain__,Me=!!this.__actions__.length,Xe=q&&!_e,mn=kt&&!Me;if(!q&&qt){ft=mn?ft:new Mn(this);var je=a.apply(ft,bt);return je.__actions__.push({func:ko,args:[oe],thisArg:g}),new Zi(je,_e)}return Xe&&mn?a.apply(this,bt):(je=this.thru(oe),Xe?T?je.value()[0]:je.value():je)})}),Se(["pop","push","shift","sort","splice","unshift"],function(a){var u=dt[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",T=/^(?:pop|shift)$/.test(a);Q.prototype[a]=function(){var j=arguments;if(T&&!this.__chain__){var q=this.value();return u.apply(cn(q)?q:[],j)}return this[h](function(ft){return u.apply(cn(ft)?ft:[],j)})}}),Ao(Mn.prototype,function(a,u){var h=Q[u];if(h){var T=h.name+"";Bt.call(co,T)||(co[T]=[]),co[T].push({name:u,func:h})}}),co[pu(g,2).name]=[{name:"wrapper",func:g}],Mn.prototype.clone=function Ca(){var a=new Mn(this.__wrapped__);return a.__actions__=bi(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=bi(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=bi(this.__views__),a},Mn.prototype.reverse=function rc(){if(this.__filtered__){var a=new Mn(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},Mn.prototype.value=function ic(){var a=this.__wrapped__.value(),u=this.__dir__,h=cn(a),T=u<0,j=h?a.length:0,q=function Cd(a,u,h){for(var T=-1,j=h.length;++T<j;){var q=h[T],ft=q.size;switch(q.type){case"drop":a+=ft;break;case"dropRight":u-=ft;break;case"take":u=Xr(u,a+ft);break;case"takeRight":a=Pr(a,u-ft)}}return{start:a,end:u}}(0,j,this.__views__),ft=q.start,bt=q.end,kt=bt-ft,Zt=T?bt:ft-1,qt=this.__iteratees__,oe=qt.length,_e=0,Me=Xr(kt,this.__takeCount__);if(!h||!T&&j==kt&&Me==kt)return Sc(a,this.__actions__);var Xe=[];t:for(;kt--&&_e<Me;){for(var mn=-1,je=a[Zt+=u];++mn<oe;){var En=qt[mn],Mi=En.type,wi=(0,En.iteratee)(je);if(2==Mi)je=wi;else if(!wi){if(1==Mi)continue t;break t}}Xe[_e++]=je}return Xe},Q.prototype.at=Il,Q.prototype.chain=function Ma(){return Eu(this)},Q.prototype.commit=function Wn(){return new Zi(this.value(),this.__chain__)},Q.prototype.next=function uf(){this.__values__===g&&(this.__values__=wf(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?g:this.__values__[this.__index__++]}},Q.prototype.plant=function lf(a){for(var u,h=this;h instanceof ru;){var T=Qc(h);T.__index__=0,T.__values__=g,u?j.__wrapped__=T:u=T;var j=T;h=h.__wrapped__}return j.__wrapped__=a,u},Q.prototype.reverse=function ka(){var a=this.__wrapped__;if(a instanceof Mn){var u=a;return this.__actions__.length&&(u=new Mn(this)),(u=u.reverse()).__actions__.push({func:ko,args:[Al],thisArg:g}),new Zi(u,this.__chain__)}return this.thru(Al)},Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=function La(){return Sc(this.__wrapped__,this.__actions__)},Q.prototype.first=Q.prototype.head,As&&(Q.prototype[As]=function Ci(){return this}),Q}();l._=vi,(p=function(){return vi}.call(W,f,W,P))!==g&&(P.exports=p)}.call(this)},19984:(P,W,f)=>{var p=f(84633),g=f(96517),w=f(92046),E=f(21503);P.exports=function x(I,k){return(E(I)?p:w)(I,g(k,3))}},10203:(P,W,f)=>{var p=f(85683),g=f(45184),w=f(96517);P.exports=function E(x,I){var k={};return I=w(I,3),g(x,function(M,B,H){p(k,B,I(M,B,H))}),k}},18176:(P,W,f)=>{var p=f(67308),g=f(31100),w=f(32608);P.exports=function E(x){return x&&x.length?p(x,w,g):void 0}},30535:(P,W,f)=>{var p=f(99850);function w(E,x){if("function"!=typeof E||null!=x&&"function"!=typeof x)throw new TypeError("Expected a function");var I=function(){var k=arguments,M=x?x.apply(this,k):k[0],B=I.cache;if(B.has(M))return B.get(M);var H=E.apply(this,k);return I.cache=B.set(M,H)||B,H};return I.cache=new(w.Cache||p),I}w.Cache=p,P.exports=w},80567:(P,W,f)=>{var p=f(73842),w=f(84944)(function(E,x,I){p(E,x,I)});P.exports=w},29439:(P,W,f)=>{var p=f(67308),g=f(99069),w=f(32608);P.exports=function E(x){return x&&x.length?p(x,w,g):void 0}},29525:(P,W,f)=>{var p=f(67308),g=f(96517),w=f(99069);P.exports=function E(x,I){return x&&x.length?p(x,g(I,2),w):void 0}},12552:P=>{P.exports=function W(){}},31710:(P,W,f)=>{var p=f(12119);P.exports=function(){return p.Date.now()}},16372:(P,W,f)=>{var p=f(83021),w=f(3975)(function(E,x){return null==E?{}:p(E,x)});P.exports=w},87495:(P,W,f)=>{var p=f(11847),g=f(39222),w=f(45352),E=f(68533);P.exports=function x(I){return w(I)?p(E(I)):g(I)}},90361:(P,W,f)=>{var g=f(97509)();P.exports=g},81337:(P,W,f)=>{var p=f(8745),g=f(43132),w=f(96517),E=f(13570),x=f(21503);P.exports=function I(k,M,B){var H=x(k)?p:E,O=arguments.length<3;return H(k,w(M,4),B,O,g)}},55637:(P,W,f)=>{var p=f(81172),g=f(28794),w=f(56507),E=f(30248),x=f(52315);P.exports=function M(B){if(null==B)return 0;if(w(B))return E(B)?x(B):B.length;var H=g(B);return"[object Map]"==H||"[object Set]"==H?B.size:p(B).length}},12906:(P,W,f)=>{var p=f(50686),g=f(6119),w=f(23269),E=f(93342),x=w(function(I,k){if(null==I)return[];var M=k.length;return M>1&&E(I,k[0],k[1])?k=[]:M>2&&E(k[0],k[1],k[2])&&(k=[k[0]]),g(I,p(k,1),[])});P.exports=x},49975:P=>{P.exports=function W(){return[]}},63580:P=>{P.exports=function W(){return!1}},12232:(P,W,f)=>{var p=f(51467),g=1/0;P.exports=function E(x){return x?(x=p(x))===g||x===-g?17976931348623157e292*(x<0?-1:1):x==x?x:0:0===x?x:0}},44401:(P,W,f)=>{var p=f(12232);P.exports=function g(w){var E=p(w),x=E%1;return E==E?x?E-x:E:0}},51467:(P,W,f)=>{var p=f(83348),g=f(25940),w=f(44129),x=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;P.exports=function B(H){if("number"==typeof H)return H;if(w(H))return NaN;if(g(H)){var O="function"==typeof H.valueOf?H.valueOf():H;H=g(O)?O+"":O}if("string"!=typeof H)return 0===H?H:+H;H=p(H);var X=I.test(H);return X||k.test(H)?M(H.slice(2),X?2:8):x.test(H)?NaN:+H}},8067:(P,W,f)=>{var p=f(31989),g=f(16555);P.exports=function w(E){return p(E,g(E))}},73943:(P,W,f)=>{var p=f(93935);P.exports=function g(w){return null==w?"":p(w)}},89416:(P,W,f)=>{var p=f(96837),g=f(78858),w=f(45184),E=f(96517),x=f(29519),I=f(21503),k=f(80891),M=f(75946),B=f(25940),H=f(48159);P.exports=function O(X,et,ct){var i=I(X),st=i||k(X)||H(X);if(et=E(et,4),null==ct){var vt=X&&X.constructor;ct=st?i?new vt:[]:B(X)&&M(vt)?g(x(X)):{}}return(st?p:w)(X,function(pt,nt,yt){return et(ct,pt,nt,yt)}),ct}},68921:(P,W,f)=>{var p=f(50686),g=f(23269),w=f(80707),E=f(21330),x=g(function(I){return w(p(I,1,E,!0))});P.exports=x},51541:(P,W,f)=>{var p=f(73943),g=0;P.exports=function w(E){var x=++g;return p(E)+x}},90377:(P,W,f)=>{var p=f(19179),g=f(118);P.exports=function w(E){return null==E?[]:p(E,g(E))}},21617:(P,W,f)=>{var p=f(89719),g=f(38645);P.exports=function w(E,x){return g(E||[],x||[],p)}},29610:function(P){P.exports=function(){var W="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},p=Array.prototype,g=Object.prototype,w="undefined"!=typeof Symbol?Symbol.prototype:null,E=p.push,x=p.slice,I=g.toString,k=g.hasOwnProperty,M="undefined"!=typeof ArrayBuffer,B="undefined"!=typeof DataView,H=Array.isArray,O=Object.keys,X=Object.create,et=M&&ArrayBuffer.isView,ct=isNaN,i=isFinite,st=!{toString:null}.propertyIsEnumerable("toString"),vt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],pt=Math.pow(2,53)-1;function nt(N,J){return J=null==J?N.length-1:+J,function(){for(var at=Math.max(arguments.length-J,0),mt=Array(at),Lt=0;Lt<at;Lt++)mt[Lt]=arguments[Lt+J];switch(J){case 0:return N.call(this,mt);case 1:return N.call(this,arguments[0],mt);case 2:return N.call(this,arguments[0],arguments[1],mt)}var St=Array(J+1);for(Lt=0;Lt<J;Lt++)St[Lt]=arguments[Lt];return St[J]=mt,N.apply(this,St)}}function yt(N){var J=typeof N;return"function"===J||"object"===J&&!!N}function Pt(N){return void 0===N}function Ft(N){return!0===N||!1===N||"[object Boolean]"===I.call(N)}function C(N){var J="[object "+N+"]";return function(at){return I.call(at)===J}}var jt=C("String"),ne=C("Number"),te=C("Date"),ae=C("RegExp"),ue=C("Error"),he=C("Symbol"),Ee=C("ArrayBuffer"),Qe=C("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(Qe=function(N){return"function"==typeof N||!1});var Re=Qe,hr=C("Object"),Hr=B&&hr(new DataView(new ArrayBuffer(8))),jr="undefined"!=typeof Map&&hr(new Map),zt=C("DataView"),Cn=Hr?function(N){return null!=N&&Re(N.getInt8)&&Ee(N.buffer)}:zt,mr=H||C("Array");function Bn(N,J){return null!=N&&k.call(N,J)}var Ut=C("Arguments");!function(){Ut(arguments)||(Ut=function(N){return Bn(N,"callee")})}();var Et=Ut;function ie(N){return ne(N)&&ct(N)}function pe(N){return function(){return N}}function Te(N){return function(J){var at=N(J);return"number"==typeof at&&at>=0&&at<=pt}}function hn(N){return function(J){return null==J?void 0:J[N]}}var Rn=hn("byteLength"),rr=Te(Rn),ki=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,ln=M?function(N){return et?et(N)&&!Cn(N):rr(N)&&ki.test(I.call(N))}:pe(!1),Ze=hn("length");function D(N,J){J=function(l){for(var d={},y=l.length,_=0;_<y;++_)d[l[_]]=!0;return{contains:function(R){return!0===d[R]},push:function(R){return d[R]=!0,l.push(R)}}}(J);var at=vt.length,mt=N.constructor,Lt=Re(mt)&&mt.prototype||g,St="constructor";for(Bn(N,St)&&!J.contains(St)&&J.push(St);at--;)(St=vt[at])in N&&N[St]!==Lt[St]&&!J.contains(St)&&J.push(St)}function z(N){if(!yt(N))return[];if(O)return O(N);var J=[];for(var at in N)Bn(N,at)&&J.push(at);return st&&D(N,J),J}function rt(N,J){var at=z(J),mt=at.length;if(null==N)return!mt;for(var Lt=Object(N),St=0;St<mt;St++){var l=at[St];if(J[l]!==Lt[l]||!(l in Lt))return!1}return!0}function xt(N){return N instanceof xt?N:this instanceof xt?void(this._wrapped=N):new xt(N)}function $t(N){return new Uint8Array(N.buffer||N,N.byteOffset||0,Rn(N))}xt.VERSION=W,xt.prototype.valueOf=xt.prototype.toJSON=xt.prototype.value=function(){return this._wrapped},xt.prototype.toString=function(){return String(this._wrapped)};var Qt="[object DataView]";function xe(N,J,at,mt){if(N===J)return 0!==N||1/N==1/J;if(null==N||null==J)return!1;if(N!=N)return J!=J;var Lt=typeof N;return("function"===Lt||"object"===Lt||"object"==typeof J)&&function St(l,d,y,_){l instanceof xt&&(l=l._wrapped),d instanceof xt&&(d=d._wrapped);var R=I.call(l);if(R!==I.call(d))return!1;if(Hr&&"[object Object]"==R&&Cn(l)){if(!Cn(d))return!1;R=Qt}switch(R){case"[object RegExp]":case"[object String]":return""+l==""+d;case"[object Number]":return+l!=+l?+d!=+d:0==+l?1/+l==1/d:+l==+d;case"[object Date]":case"[object Boolean]":return+l==+d;case"[object Symbol]":return w.valueOf.call(l)===w.valueOf.call(d);case"[object ArrayBuffer]":case Qt:return St($t(l),$t(d),y,_)}var F="[object Array]"===R;if(!F&&ln(l)){if(Rn(l)!==Rn(d))return!1;if(l.buffer===d.buffer&&l.byteOffset===d.byteOffset)return!0;F=!0}if(!F){if("object"!=typeof l||"object"!=typeof d)return!1;var Y=l.constructor,lt=d.constructor;if(Y!==lt&&!(Re(Y)&&Y instanceof Y&&Re(lt)&&lt instanceof lt)&&"constructor"in l&&"constructor"in d)return!1}_=_||[];for(var ut=(y=y||[]).length;ut--;)if(y[ut]===l)return _[ut]===d;if(y.push(l),_.push(d),F){if((ut=l.length)!==d.length)return!1;for(;ut--;)if(!xe(l[ut],d[ut],y,_))return!1}else{var At,Ht=z(l);if(ut=Ht.length,z(d).length!==ut)return!1;for(;ut--;)if(!Bn(d,At=Ht[ut])||!xe(l[At],d[At],y,_))return!1}return y.pop(),_.pop(),!0}(N,J,at,mt)}function Ne(N){if(!yt(N))return[];var J=[];for(var at in N)J.push(at);return st&&D(N,J),J}function Ke(N){var J=Ze(N);return function(at){if(null==at)return!1;var mt=Ne(at);if(Ze(mt))return!1;for(var Lt=0;Lt<J;Lt++)if(!Re(at[N[Lt]]))return!1;return N!==ui||!Re(at[pn])}}var pn="forEach",gn=["clear","delete"],ir=["get","has","set"],tr=gn.concat(pn,ir),ui=gn.concat(ir),zn=["add"].concat(gn,pn,"has"),or=jr?Ke(tr):C("Map"),er=jr?Ke(ui):C("WeakMap"),lr=jr?Ke(zn):C("Set"),Mr=C("WeakSet");function li(N){for(var J=z(N),at=J.length,mt=Array(at),Lt=0;Lt<at;Lt++)mt[Lt]=N[J[Lt]];return mt}function Cr(N){for(var J={},at=z(N),mt=0,Lt=at.length;mt<Lt;mt++)J[N[at[mt]]]=at[mt];return J}function yr(N){var J=[];for(var at in N)Re(N[at])&&J.push(at);return J.sort()}function Oo(N,J){return function(at){var mt=arguments.length;if(J&&(at=Object(at)),mt<2||null==at)return at;for(var Lt=1;Lt<mt;Lt++)for(var St=arguments[Lt],l=N(St),d=l.length,y=0;y<d;y++){var _=l[y];J&&void 0!==at[_]||(at[_]=St[_])}return at}}var rs=Oo(Ne),mo=Oo(z),sa=Oo(Ne,!0);function Ur(N){if(!yt(N))return{};if(X)return X(N);var J=function(){};J.prototype=N;var at=new J;return J.prototype=null,at}function Si(N){return mr(N)?N:[N]}function Pn(N){return xt.toPath(N)}function Ra(N,J){for(var at=J.length,mt=0;mt<at;mt++){if(null==N)return;N=N[J[mt]]}return at?N:void 0}function Ro(N,J,at){var mt=Ra(N,Pn(J));return Pt(mt)?at:mt}function yo(N){return N}function No(N){return N=mo({},N),function(J){return rt(J,N)}}function rn(N){return N=Pn(N),function(J){return Ra(J,N)}}function eo(N,J,at){if(void 0===J)return N;switch(null==at?3:at){case 1:return function(mt){return N.call(J,mt)};case 3:return function(mt,Lt,St){return N.call(J,mt,Lt,St)};case 4:return function(mt,Lt,St,l){return N.call(J,mt,Lt,St,l)}}return function(){return N.apply(J,arguments)}}function Na(N,J,at){return null==N?yo:Re(N)?eo(N,J,at):yt(N)&&!mr(N)?No(N):rn(N)}function xo(N,J){return Na(N,J,1/0)}function Nr(N,J,at){return xt.iteratee!==xo?xt.iteratee(N,J):Na(N,J,at)}function Zr(){}function Li(N,J){return null==J&&(J=N,N=0),N+Math.floor(Math.random()*(J-N+1))}xt.toPath=Si,xt.iteratee=xo;var zr=Date.now||function(){return(new Date).getTime()};function Sr(N){var J=function(St){return N[St]},at="(?:"+z(N).join("|")+")",mt=RegExp(at),Lt=RegExp(at,"g");return function(St){return mt.test(St=null==St?"":""+St)?St.replace(Lt,J):St}}var bo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},no=Sr(bo),ua=Sr(Cr(bo)),is=xt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Wi=/(.)^/,la={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Da=/\\|'|\r|\n|\u2028|\u2029/g;function on(N){return"\\"+la[N]}var Do=/^\s*(\w|\$)+\s*$/,Fa=0;function Oi(N,J,at,mt,Lt){if(!(mt instanceof J))return N.apply(at,Lt);var St=Ur(N.prototype),l=N.apply(St,Lt);return yt(l)?l:St}var ro=nt(function(N,J){var at=ro.placeholder,mt=function(){for(var Lt=0,St=J.length,l=Array(St),d=0;d<St;d++)l[d]=J[d]===at?arguments[Lt++]:J[d];for(;Lt<arguments.length;)l.push(arguments[Lt++]);return Oi(N,mt,this,this,l)};return mt});ro.placeholder=xt;var io=nt(function(N,J,at){if(!Re(N))throw new TypeError("Bind must be called on a function");var mt=nt(function(Lt){return Oi(N,mt,J,this,at.concat(Lt))});return mt}),Dr=Te(Ze);function $i(N,J,at,mt){if(mt=mt||[],J||0===J){if(J<=0)return mt.concat(N)}else J=1/0;for(var Lt=mt.length,St=0,l=Ze(N);St<l;St++){var d=N[St];if(Dr(d)&&(mr(d)||Et(d)))if(J>1)$i(d,J-1,at,mt),Lt=mt.length;else for(var y=0,_=d.length;y<_;)mt[Lt++]=d[y++];else at||(mt[Lt++]=d)}return mt}var Va=nt(function(N,J){var at=(J=$i(J,!1,!1)).length;if(at<1)throw new Error("bindAll must be passed function names");for(;at--;){var mt=J[at];N[mt]=io(N[mt],N)}return N}),Fo=nt(function(N,J,at){return setTimeout(function(){return N.apply(null,at)},J)}),ca=ro(Fo,xt,1);function ht(N){return function(){return!N.apply(this,arguments)}}function ci(N,J){var at;return function(){return--N>0&&(at=J.apply(this,arguments)),N<=1&&(J=null),at}}var Co=ro(ci,2);function fa(N,J,at){J=Nr(J,at);for(var mt,Lt=z(N),St=0,l=Lt.length;St<l;St++)if(J(N[mt=Lt[St]],mt,N))return mt}function be(N){return function(J,at,mt){at=Nr(at,mt);for(var Lt=Ze(J),St=N>0?0:Lt-1;St>=0&&St<Lt;St+=N)if(at(J[St],St,J))return St;return-1}}var qr=be(1),Vo=be(-1);function Ri(N,J,at,mt){for(var Lt=(at=Nr(at,mt,1))(J),St=0,l=Ze(N);St<l;){var d=Math.floor((St+l)/2);at(N[d])<Lt?St=d+1:l=d}return St}function Bo(N,J,at){return function(mt,Lt,St){var l=0,d=Ze(mt);if("number"==typeof St)N>0?l=St>=0?St:Math.max(St+d,l):d=St>=0?Math.min(St+1,d):St+d+1;else if(at&&St&&d)return mt[St=at(mt,Lt)]===Lt?St:-1;if(Lt!=Lt)return(St=J(x.call(mt,l,d),ie))>=0?St+l:-1;for(St=N>0?l:d-1;St>=0&&St<d;St+=N)if(mt[St]===Lt)return St;return-1}}var Tr=Bo(1,qr,Ri),os=Bo(-1,Vo);function _r(N,J,at){var mt=(Dr(N)?qr:fa)(N,J,at);if(void 0!==mt&&-1!==mt)return N[mt]}function fi(N,J,at){var mt,Lt;if(J=eo(J,at),Dr(N))for(mt=0,Lt=N.length;mt<Lt;mt++)J(N[mt],mt,N);else{var St=z(N);for(mt=0,Lt=St.length;mt<Lt;mt++)J(N[St[mt]],St[mt],N)}return N}function di(N,J,at){J=Nr(J,at);for(var mt=!Dr(N)&&z(N),Lt=(mt||N).length,St=Array(Lt),l=0;l<Lt;l++){var d=mt?mt[l]:l;St[l]=J(N[d],d,N)}return St}function oo(N){var J=function(at,mt,Lt,St){var l=!Dr(at)&&z(at),d=(l||at).length,y=N>0?0:d-1;for(St||(Lt=at[l?l[y]:y],y+=N);y>=0&&y<d;y+=N){var _=l?l[y]:y;Lt=mt(Lt,at[_],_,at)}return Lt};return function(at,mt,Lt,St){var l=arguments.length>=3;return J(at,eo(mt,St,4),Lt,l)}}var Ho=oo(1),Gr=oo(-1);function ti(N,J,at){var mt=[];return J=Nr(J,at),fi(N,function(Lt,St,l){J(Lt,St,l)&&mt.push(Lt)}),mt}function de(N,J,at){J=Nr(J,at);for(var mt=!Dr(N)&&z(N),Lt=(mt||N).length,St=0;St<Lt;St++){var l=mt?mt[St]:St;if(!J(N[l],l,N))return!1}return!0}function da(N,J,at){J=Nr(J,at);for(var mt=!Dr(N)&&z(N),Lt=(mt||N).length,St=0;St<Lt;St++){var l=mt?mt[St]:St;if(J(N[l],l,N))return!0}return!1}function Wr(N,J,at,mt){return Dr(N)||(N=li(N)),("number"!=typeof at||mt)&&(at=0),Tr(N,J,at)>=0}var Yi=nt(function(N,J,at){var mt,Lt;return Re(J)?Lt=J:(J=Pn(J),mt=J.slice(0,-1),J=J[J.length-1]),di(N,function(St){var l=Lt;if(!l){if(mt&&mt.length&&(St=Ra(St,mt)),null==St)return;l=St[J]}return null==l?l:l.apply(St,at)})});function Ni(N,J){return di(N,rn(J))}function Fn(N,J,at){var mt,Lt,St=-1/0,l=-1/0;if(null==J||"number"==typeof J&&"object"!=typeof N[0]&&null!=N)for(var d=0,y=(N=Dr(N)?N:li(N)).length;d<y;d++)null!=(mt=N[d])&&mt>St&&(St=mt);else J=Nr(J,at),fi(N,function(_,R,F){((Lt=J(_,R,F))>l||Lt===-1/0&&St===-1/0)&&(St=_,l=Lt)});return St}var _o=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ba(N){return N?mr(N)?x.call(N):jt(N)?N.match(_o):Dr(N)?di(N,yo):li(N):[]}function jo(N,J,at){if(null==J||at)return Dr(N)||(N=li(N)),N[Li(N.length-1)];var mt=Ba(N),Lt=Ze(mt);J=Math.max(Math.min(J,Lt),0);for(var St=Lt-1,l=0;l<J;l++){var d=Li(l,St),y=mt[l];mt[l]=mt[d],mt[d]=y}return mt.slice(0,J)}function wo(N,J){return function(at,mt,Lt){var St=J?[[],[]]:{};return mt=Nr(mt,Lt),fi(at,function(l,d){var y=mt(l,d,at);N(St,l,y)}),St}}var ha=wo(function(N,J,at){Bn(N,at)?N[at].push(J):N[at]=[J]}),Sn=wo(function(N,J,at){N[at]=J}),Uo=wo(function(N,J,at){Bn(N,at)?N[at]++:N[at]=1}),Ae=wo(function(N,J,at){N[at?0:1].push(J)},!0);function hi(N,J,at){return J in at}var Xi=nt(function(N,J){var at={},mt=J[0];if(null==N)return at;Re(mt)?(J.length>1&&(mt=eo(mt,J[1])),J=Ne(N)):(mt=hi,J=$i(J,!1,!1),N=Object(N));for(var Lt=0,St=J.length;Lt<St;Lt++){var l=J[Lt],d=N[l];mt(d,l,N)&&(at[l]=d)}return at}),wr=nt(function(N,J){var at,mt=J[0];return Re(mt)?(mt=ht(mt),J.length>1&&(at=J[1])):(J=di($i(J,!1,!1),String),mt=function(Lt,St){return!Wr(J,St)}),Xi(N,mt,at)});function Ha(N,J,at){return x.call(N,0,Math.max(0,N.length-(null==J||at?1:J)))}function kr(N,J,at){return null==N||N.length<1?null==J||at?void 0:[]:null==J||at?N[0]:Ha(N,N.length-J)}function Ki(N,J,at){return x.call(N,null==J||at?1:J)}var Ti=nt(function(N,J){return J=$i(J,!0,!0),ti(N,function(at){return!Wr(J,at)})}),pa=nt(function(N,J){return Ti(N,J)});function Ei(N,J,at,mt){Ft(J)||(mt=at,at=J,J=!1),null!=at&&(at=Nr(at,mt));for(var Lt=[],St=[],l=0,d=Ze(N);l<d;l++){var y=N[l],_=at?at(y,l,N):y;J&&!at?(l&&St===_||Lt.push(y),St=_):at?Wr(St,_)||(St.push(_),Lt.push(y)):Wr(Lt,y)||Lt.push(y)}return Lt}var ga=nt(function(N){return Ei($i(N,!0,!0))});function va(N){for(var J=N&&Fn(N,Ze).length||0,at=Array(J),mt=0;mt<J;mt++)at[mt]=Ni(N,mt);return at}var Gn=nt(va);function sn(N,J){return N._chain?xt(J).chain():J}function ja(N){return fi(yr(N),function(J){var at=xt[J]=N[J];xt.prototype[J]=function(){var mt=[this._wrapped];return E.apply(mt,arguments),sn(this,at.apply(xt,mt))}}),xt}fi(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var J=p[N];xt.prototype[N]=function(){var at=this._wrapped;return null!=at&&(J.apply(at,arguments),"shift"!==N&&"splice"!==N||0!==at.length||delete at[0]),sn(this,at)}}),fi(["concat","join","slice"],function(N){var J=p[N];xt.prototype[N]=function(){var at=this._wrapped;return null!=at&&(at=J.apply(at,arguments)),sn(this,at)}});var Di=ja({__proto__:null,VERSION:W,restArguments:nt,isObject:yt,isNull:function(N){return null===N},isUndefined:Pt,isBoolean:Ft,isElement:function(N){return!(!N||1!==N.nodeType)},isString:jt,isNumber:ne,isDate:te,isRegExp:ae,isError:ue,isSymbol:he,isArrayBuffer:Ee,isDataView:Cn,isArray:mr,isFunction:Re,isArguments:Et,isFinite:function(N){return!he(N)&&i(N)&&!isNaN(parseFloat(N))},isNaN:ie,isTypedArray:ln,isEmpty:function(N){if(null==N)return!0;var J=Ze(N);return"number"==typeof J&&(mr(N)||jt(N)||Et(N))?0===J:0===Ze(z(N))},isMatch:rt,isEqual:function(N,J){return xe(N,J)},isMap:or,isWeakMap:er,isSet:lr,isWeakSet:Mr,keys:z,allKeys:Ne,values:li,pairs:function(N){for(var J=z(N),at=J.length,mt=Array(at),Lt=0;Lt<at;Lt++)mt[Lt]=[J[Lt],N[J[Lt]]];return mt},invert:Cr,functions:yr,methods:yr,extend:rs,extendOwn:mo,assign:mo,defaults:sa,create:function(N,J){var at=Ur(N);return J&&mo(at,J),at},clone:function(N){return yt(N)?mr(N)?N.slice():rs({},N):N},tap:function(N,J){return J(N),N},get:Ro,has:function(N,J){for(var at=(J=Pn(J)).length,mt=0;mt<at;mt++){var Lt=J[mt];if(!Bn(N,Lt))return!1;N=N[Lt]}return!!at},mapObject:function(N,J,at){J=Nr(J,at);for(var mt=z(N),Lt=mt.length,St={},l=0;l<Lt;l++){var d=mt[l];St[d]=J(N[d],d,N)}return St},identity:yo,constant:pe,noop:Zr,toPath:Si,property:rn,propertyOf:function(N){return null==N?Zr:function(J){return Ro(N,J)}},matcher:No,matches:No,times:function(N,J,at){var mt=Array(Math.max(0,N));J=eo(J,at,1);for(var Lt=0;Lt<N;Lt++)mt[Lt]=J(Lt);return mt},random:Li,now:zr,escape:no,unescape:ua,templateSettings:is,template:function(N,J,at){!J&&at&&(J=at),J=sa({},J,xt.templateSettings);var mt=RegExp([(J.escape||Wi).source,(J.interpolate||Wi).source,(J.evaluate||Wi).source].join("|")+"|$","g"),Lt=0,St="__p+='";N.replace(mt,function(_,R,F,Y,lt){return St+=N.slice(Lt,lt).replace(Da,on),Lt=lt+_.length,R?St+="'+\n((__t=("+R+"))==null?'':_.escape(__t))+\n'":F?St+="'+\n((__t=("+F+"))==null?'':__t)+\n'":Y&&(St+="';\n"+Y+"\n__p+='"),_}),St+="';\n";var l,d=J.variable;if(d){if(!Do.test(d))throw new Error("variable is not a bare identifier: "+d)}else St="with(obj||{}){\n"+St+"}\n",d="obj";St="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+St+"return __p;\n";try{l=new Function(d,"_",St)}catch(_){throw _.source=St,_}var y=function(_){return l.call(this,_,xt)};return y.source="function("+d+"){\n"+St+"}",y},result:function(N,J,at){var mt=(J=Pn(J)).length;if(!mt)return Re(at)?at.call(N):at;for(var Lt=0;Lt<mt;Lt++){var St=null==N?void 0:N[J[Lt]];void 0===St&&(St=at,Lt=mt),N=Re(St)?St.call(N):St}return N},uniqueId:function(N){var J=++Fa+"";return N?N+J:J},chain:function(N){var J=xt(N);return J._chain=!0,J},iteratee:xo,partial:ro,bind:io,bindAll:Va,memoize:function(N,J){var at=function(mt){var Lt=at.cache,St=""+(J?J.apply(this,arguments):mt);return Bn(Lt,St)||(Lt[St]=N.apply(this,arguments)),Lt[St]};return at.cache={},at},delay:Fo,defer:ca,throttle:function(N,J,at){var mt,Lt,St,l,d=0;at||(at={});var y=function(){d=!1===at.leading?0:zr(),mt=null,l=N.apply(Lt,St),mt||(Lt=St=null)},_=function(){var R=zr();d||!1!==at.leading||(d=R);var F=J-(R-d);return Lt=this,St=arguments,F<=0||F>J?(mt&&(clearTimeout(mt),mt=null),d=R,l=N.apply(Lt,St),mt||(Lt=St=null)):mt||!1===at.trailing||(mt=setTimeout(y,F)),l};return _.cancel=function(){clearTimeout(mt),d=0,mt=Lt=St=null},_},debounce:function(N,J,at){var mt,Lt,St,l,d,y=function(){var R=zr()-Lt;J>R?mt=setTimeout(y,J-R):(mt=null,at||(l=N.apply(d,St)),mt||(St=d=null))},_=nt(function(R){return d=this,St=R,Lt=zr(),mt||(mt=setTimeout(y,J),at&&(l=N.apply(d,St))),l});return _.cancel=function(){clearTimeout(mt),mt=St=d=null},_},wrap:function(N,J){return ro(J,N)},negate:ht,compose:function(){var N=arguments,J=N.length-1;return function(){for(var at=J,mt=N[J].apply(this,arguments);at--;)mt=N[at].call(this,mt);return mt}},after:function(N,J){return function(){if(--N<1)return J.apply(this,arguments)}},before:ci,once:Co,findKey:fa,findIndex:qr,findLastIndex:Vo,sortedIndex:Ri,indexOf:Tr,lastIndexOf:os,find:_r,detect:_r,findWhere:function(N,J){return _r(N,No(J))},each:fi,forEach:fi,map:di,collect:di,reduce:Ho,foldl:Ho,inject:Ho,reduceRight:Gr,foldr:Gr,filter:ti,select:ti,reject:function(N,J,at){return ti(N,ht(Nr(J)),at)},every:de,all:de,some:da,any:da,contains:Wr,includes:Wr,include:Wr,invoke:Yi,pluck:Ni,where:function(N,J){return ti(N,No(J))},max:Fn,min:function(N,J,at){var mt,Lt,St=1/0,l=1/0;if(null==J||"number"==typeof J&&"object"!=typeof N[0]&&null!=N)for(var d=0,y=(N=Dr(N)?N:li(N)).length;d<y;d++)null!=(mt=N[d])&&mt<St&&(St=mt);else J=Nr(J,at),fi(N,function(_,R,F){((Lt=J(_,R,F))<l||Lt===1/0&&St===1/0)&&(St=_,l=Lt)});return St},shuffle:function(N){return jo(N,1/0)},sample:jo,sortBy:function(N,J,at){var mt=0;return J=Nr(J,at),Ni(di(N,function(Lt,St,l){return{value:Lt,index:mt++,criteria:J(Lt,St,l)}}).sort(function(Lt,St){var l=Lt.criteria,d=St.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return Lt.index-St.index}),"value")},groupBy:ha,indexBy:Sn,countBy:Uo,partition:Ae,toArray:Ba,size:function(N){return null==N?0:Dr(N)?N.length:z(N).length},pick:Xi,omit:wr,first:kr,head:kr,take:kr,initial:Ha,last:function(N,J,at){return null==N||N.length<1?null==J||at?void 0:[]:null==J||at?N[N.length-1]:Ki(N,Math.max(0,N.length-J))},rest:Ki,tail:Ki,drop:Ki,compact:function(N){return ti(N,Boolean)},flatten:function(N,J){return $i(N,J,!1)},without:pa,uniq:Ei,unique:Ei,union:ga,intersection:function(N){for(var J=[],at=arguments.length,mt=0,Lt=Ze(N);mt<Lt;mt++){var St=N[mt];if(!Wr(J,St)){var l;for(l=1;l<at&&Wr(arguments[l],St);l++);l===at&&J.push(St)}}return J},difference:Ti,unzip:va,transpose:va,zip:Gn,object:function(N,J){for(var at={},mt=0,Lt=Ze(N);mt<Lt;mt++)J?at[N[mt]]=J[mt]:at[N[mt][0]]=N[mt][1];return at},range:function(N,J,at){null==J&&(J=N||0,N=0),at||(at=J<N?-1:1);for(var mt=Math.max(Math.ceil((J-N)/at),0),Lt=Array(mt),St=0;St<mt;St++,N+=at)Lt[St]=N;return Lt},chunk:function(N,J){if(null==J||J<1)return[];for(var at=[],mt=0,Lt=N.length;mt<Lt;)at.push(x.call(N,mt,mt+=J));return at},mixin:ja,default:xt});return Di._=Di,Di}()}}]);