(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[968],{68968:(P,W,f)=>{"use strict";f.r(W),f.d(W,{CourseModule:()=>z});var g={};f.r(g),f.d(g,{ellipseWithEllipse:()=>R,ellipseWithLine:()=>Ao,exists:()=>wn,lineWithLine:()=>Si,pathWithEllipse:()=>se,pathWithLine:()=>ue,pathWithPath:()=>ke,pathWithPolygon:()=>Ke,pathWithPolyline:()=>Fe,pathWithRect:()=>Ee,polygonWithEllipse:()=>w,polygonWithLine:()=>x,polygonWithPolygon:()=>Y,polygonWithPolyline:()=>F,polygonWithRect:()=>N,polylineWithEllipse:()=>we,polylineWithLine:()=>Ie,polylineWithPolyline:()=>d,polylineWithRect:()=>l,rectWithEllipse:()=>oe,rectWithLine:()=>Q,rectWithRect:()=>de});var v={};f.r(v),f.d(v,{Curve:()=>dn,Ellipse:()=>Zn,Line:()=>ft,Path:()=>Ct,Point:()=>ve,Polygon:()=>Xt,Polyline:()=>ln,Rect:()=>rt,bezier:()=>Qo,ellipse:()=>Fa,intersection:()=>Cr,line:()=>_i,normalizeAngle:()=>Dn,point:()=>Wn,random:()=>So,rect:()=>Eo,scale:()=>wo,snapToGrid:()=>hi,toDeg:()=>no,toRad:()=>Fn,types:()=>Wt});var T={};f.r(T),f.d(T,{absolute:()=>Gf,bottom:()=>Xa,ellipse:()=>Pi,ellipseSpread:()=>iu,fn:()=>Wf,left:()=>As,line:()=>ru,right:()=>ic,top:()=>Z});var E={};f.r(E),f.d(E,{bottom:()=>Qf,inside:()=>qf,insideOriented:()=>Zf,left:()=>Yf,manual:()=>$f,outside:()=>Jf,outsideOriented:()=>Lo,radial:()=>ed,radialOriented:()=>td,right:()=>Xf,top:()=>Kf});var b={};f.r(b),f.d(b,{manhattan:()=>Rs,metro:()=>rl,normal:()=>Nr,oneSide:()=>Yu,orthogonal:()=>Ku});var A={};f.r(A),f.d(A,{curve:()=>Ds,jumpover:()=>al,normal:()=>wc,rounded:()=>gu,smooth:()=>Sc});var k={};f.r(k),f.d(k,{addClass:()=>bd,mask:()=>Oc,opacity:()=>is,stroke:()=>Mc});var M={};f.r(M),f.d(M,{connectionClosest:()=>Rc,connectionLength:()=>Lc,connectionPerpendicular:()=>bu,connectionRatio:()=>kc,resolveRef:()=>oa});var B={};f.r(B),f.d(B,{anchor:()=>Bc,bbox:()=>Cd,boundary:()=>Vo,rectangle:()=>wd});var j={};f.r(j),f.d(j,{bottom:()=>Su,bottomLeft:()=>Hc,bottomRight:()=>zr,center:()=>ss,left:()=>gl,midSide:()=>Ed,modelCenter:()=>jc,perpendicular:()=>Td,right:()=>Pa,top:()=>Bt,topLeft:()=>Sd,topRight:()=>vl});var L=f(69808),X=f(32205),te=f(6741),le=f(80998),i=f(5e3),ae=f(23146),he=f(83936),fe=f(25635),ee=f(93075),ge=f(9419),Te=f(66206),Ne=f(99848);let C=(()=>{class e{transform(t,r){return t.is_teacher||r.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function Ve(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,t))}}function Qe(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ve,3,5,"ng-container",6),i.\u0275\u0275pipe(2,"tuiFilter"),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function Xe(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const et=function(){return[0,0,0,0,0,0]};function nt(e,n){1&e&&i.\u0275\u0275template(0,Xe,2,1,"ng-container",6),2&e&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,et))}let ut=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.route=r,this.courseService=o,this.STATUS=le.Q,this.courseNameSearch="",this.matchCourseName=(s,c)=>""===c||s.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(he.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(s){return r.courseNameSearch=s}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,Qe,3,5,"ng-container",4),i.\u0275\u0275template(7,nt,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",o)}},directives:[fe.K3,fe.wU,ee.NgControlStatus,ee.NgModel,ge.be,L.O5,L.sg,Te.V],pipes:[Ne.S,C],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class bt{static createNameForm(){return(new ee.FormBuilder).group({nameControl:new ee.FormControl("",[ee.Validators.required])})}static createConfirmNameForm(){return(new ee.FormBuilder).group({confirmNameControl:new ee.FormControl("")})}static createStudentNumberForm(){return(new ee.FormBuilder).group({studentNumberControl:new ee.FormControl("",[ee.Validators.required])})}static createVerifyForm(){return(new ee.FormBuilder).group({verifyControl:new ee.FormControl("",[ee.Validators.required])})}}var Ht=f(4024),Qt=f(769),Et=f(46693);function Jn(e,n){1&e&&i.\u0275\u0275projection(0,0,["*ngIf","visible"])}const Pr=["*"];let Ir=(()=>{class e{constructor(){this.visible=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-registration-step"]],ngContentSelectors:Pr,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,Jn,1,0,"ng-content",0)),2&t&&i.\u0275\u0275property("ngIf",r.visible)},directives:[L.O5],styles:[""]}),e})();var Le=f(52014),gn=f(28634),ar=f(34530),Cn=f(14335),Be=f(35640),Ce=f(73442),Ze=f(33186),lt=f(41065),mt=f(84620),nn=f(35379),mn=f(18583),zn=f(92198);function di(e,n){1&e&&i.\u0275\u0275elementContainer(0)}const Yt=["*"],jt=["tuiStep",""];function D(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",4),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("src",t.icon)}}let G=(()=>{let e=class{constructor(){this.steps=gn.Mm,this.orientation="horizontal",this.activeItemIndex=0,this.activeItemIndexChange=new i.EventEmitter}get changes$(){return(0,ar.Fp)(this.steps).pipe((0,mn.g)(0))}onHorizontal(t,r){"horizontal"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,r))}onVertical(t,r){"vertical"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,r))}indexOf(t){return(0,Cn.ct)(this.steps).findIndex(({nativeElement:r})=>r===t)}isActive(t){return t===this.activeItemIndex}activate(t){this.activeItemIndex!==t&&(this.activeItemIndex=t,this.activeItemIndexChange.emit(t))}moveFocus(t,r){const o=(0,Cn.ct)(this.steps).map(({nativeElement:s})=>s);(0,Be.pr)(o.indexOf(t),o,r)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(t,r,o){if(1&t&&i.\u0275\u0275contentQuery(o,re,4,i.ElementRef),2&t){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(r.steps=s)}},hostVars:1,hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("keydown.arrowRight",function(s){return r.onHorizontal(s,1)})("keydown.arrowLeft",function(s){return r.onHorizontal(s,-1)})("keydown.arrowDown",function(s){return r.onVertical(s,1)})("keydown.arrowUp",function(s){return r.onVertical(s,-1)}),2&t&&i.\u0275\u0275attribute("data-orientation",r.orientation)},inputs:{orientation:"orientation",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:Yt,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,di,1,0,"ng-container",0),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275projection(2)),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.changes$))},directives:[L.O5],pipes:[L.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,Le.gn)([(0,i.ContentChildren)((0,i.forwardRef)(()=>re),{read:i.ElementRef})],e.prototype,"steps",void 0),(0,Le.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-orientation"),(0,Ce.TH)()],e.prototype,"orientation",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"activeItemIndex",void 0),(0,Le.gn)([(0,i.Output)()],e.prototype,"activeItemIndexChange",void 0),(0,Le.gn)([Ce.UM],e.prototype,"changes$",null),(0,Le.gn)([(0,i.HostListener)("keydown.arrowRight",["$event","1"]),(0,i.HostListener)("keydown.arrowLeft",["$event","-1"])],e.prototype,"onHorizontal",null),(0,Le.gn)([(0,i.HostListener)("keydown.arrowDown",["$event","1"]),(0,i.HostListener)("keydown.arrowUp",["$event","-1"])],e.prototype,"onVertical",null),e})(),re=(()=>{let e=class{constructor(t,r,o,s){this.stepper=o,this.elementRef=s,this.state="normal",this.icon="",this.focusVisible=!1,r.pipe((0,zn.h)(nn.y)).subscribe(()=>{this.activate()}),t.subscribe(c=>{this.focusVisible=c})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ze.ku),i.\u0275\u0275directiveInject(lt.Ok),i.\u0275\u0275directiveInject(G),i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.activate()}),2&t&&(i.\u0275\u0275hostProperty("tabIndex",r.tabIndex),i.\u0275\u0275attribute("data-state",r.state),i.\u0275\u0275classProp("_focus-visible",r.focusVisible)("_active",r.isActive)("_vertical",r.isVertical))},inputs:{state:"state",icon:"icon"},features:[i.\u0275\u0275ProvidersFeature([Ze.a3,lt.Ok,Ze.ku])],attrs:jt,ngContentSelectors:Yt,decls:5,vars:1,consts:[["class","marker marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"marker","marker_error"],["src","tuiIconCheckLarge",1,"marker","marker_pass"],[1,"marker","marker_index"],[1,"marker","marker_custom",3,"src"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,D,1,1,"tui-svg",0),i.\u0275\u0275element(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),i.\u0275\u0275projection(4)),2&t&&i.\u0275\u0275property("ngIf",r.icon)},directives:[L.O5,mt.P],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:0 0;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:2rem;outline:0;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:'';position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not(._active)   .marker_custom[_ngcontent-%COMP%] ~ .marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal]):not(._active)   .marker_index[_ngcontent-%COMP%]{display:none}.marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}._active[_nghost-%COMP%]   .marker_error[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=error])   .marker_error[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_pass[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=pass])   .marker_pass[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_custom[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal])   .marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}"],changeDetection:0}),(0,Le.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-state"),(0,Ce.TH)()],e.prototype,"state",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"icon",void 0),(0,Le.gn)([(0,i.HostBinding)("class._focus-visible")],e.prototype,"focusVisible",void 0),(0,Le.gn)([(0,i.HostBinding)("class._active")],e.prototype,"isActive",null),(0,Le.gn)([(0,i.HostBinding)("class._vertical")],e.prototype,"isVertical",null),(0,Le.gn)([(0,i.HostBinding)("tabIndex")],e.prototype,"tabIndex",null),(0,Le.gn)([(0,i.HostListener)("click")],e.prototype,"activate",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,i.Inject)(Ze.ku)),(0,Le.fM)(1,(0,i.Inject)(lt.Ok)),(0,Le.fM)(2,(0,i.Inject)(G)),(0,Le.fM)(3,(0,i.Inject)(i.ElementRef))],e),e})(),me=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,mt.E]]}),e})();const Ge=["headerStep"];function Ye(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",2,3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t," ")}}const ct=["*"];let It=(()=>{class e{constructor(t){this.changeDetector=t,this.steps=[],this.currentStep=0}ngAfterContentInit(){this.setStep(this.currentStep)}ngAfterContentChecked(){this.changeDetector.detectChanges()}getStep(t){return this.tuiStepComponents.toArray()[t]}setNextStep(){this.setStepComplete(this.currentStep),this.setStep(this.currentStep+1)}setPrevStep(){this.setStep(this.currentStep-1)}setStepComplete(t){this.getStep(t).state="pass",this.getStep(t).icon="tuiIconCheckLarge"}setStep(t){this.currentStep=t,this.stepComponents.toArray().forEach((r,o)=>r.visible=t===o)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-registration-stepper"]],contentQueries:function(t,r,o){if(1&t&&i.\u0275\u0275contentQuery(o,Ir,4),2&t){let s;i.\u0275\u0275queryRefresh(s=i.\u0275\u0275loadQuery())&&(r.stepComponents=s)}},viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Ge,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.tuiStepComponents=o)}},inputs:{steps:"steps"},ngContentSelectors:ct,decls:3,vars:2,consts:[[3,"activeItemIndex","activeItemIndexChange"],["tuiStep","",3,"disabled",4,"ngFor","ngForOf"],["tuiStep","",3,"disabled"],["headerStep",""]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-stepper",0),i.\u0275\u0275listener("activeItemIndexChange",function(s){return r.currentStep=s}),i.\u0275\u0275template(1,Ye,3,2,"button",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(2)),2&t&&(i.\u0275\u0275property("activeItemIndex",r.currentStep),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.steps))},directives:[G,L.sg,re],styles:[""],changeDetection:0}),e})();var Vt=f(96063),rn=f(8871),en=f(67795);const on=["stepper"];function Un(e,n){1&e&&i.\u0275\u0275element(0,"div",5)}function Hn(e,n){1&e&&i.\u0275\u0275element(0,"div",6)}const Ur=function(e){return["/course",e]};function Pn(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",7),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8)(4,"a",9),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,Ur,t.courseId))}}function Gn(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",10),i.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function jn(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"tui-input",26),i.\u0275\u0275text(3," Student Number\xa0"),i.\u0275\u0275element(4,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",27),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0))}function Kn(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"tui-input",28),i.\u0275\u0275text(3," Please confirm that this is your name.\xa0"),i.\u0275\u0275element(4,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("readOnly",!0)("tuiTextfieldCleaner",!0))}function mr(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Attempts Remaining: ",t.attemptsRemaining," ")}}function Gr(e,n){1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1," You don't have any attempts remaining! Contact your instructor. "),i.\u0275\u0275elementEnd())}const sr=function(){return["Enter Name","Confirm Identity","Verification","Registered"]};function nr(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",11),i.\u0275\u0275text(2," Before completing registration, make sure you are also registered in the same class on Canvas. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"app-course-registration-stepper",12,13)(5,"app-course-registration-step")(6,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onNameFormSubmit()}),i.\u0275\u0275elementStart(7,"div",15)(8,"tui-input",16),i.\u0275\u0275text(9," Enter your full name as it appears on Canvas\xa0"),i.\u0275\u0275element(10,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",8)(13,"button",19),i.\u0275\u0275text(14," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",20),i.\u0275\u0275text(16," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(17,"app-course-registration-step")(18,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onConfirmationFormSubmit()}),i.\u0275\u0275template(19,jn,6,1,"ng-container",1),i.\u0275\u0275template(20,Kn,6,2,"ng-container",1),i.\u0275\u0275elementStart(21,"div",8)(22,"button",21),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275reference(4).setPrevStep()}),i.\u0275\u0275text(23,"Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"button",20),i.\u0275\u0275text(25," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(26,"app-course-registration-step")(27,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onVerificationFormSubmit()}),i.\u0275\u0275elementStart(28,"div",15)(29,"tui-input",22),i.\u0275\u0275text(30," Verification Code\xa0"),i.\u0275\u0275element(31,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(32,"tui-field-error",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"div",24)(34,"tui-notification",25),i.\u0275\u0275template(35,mr,2,1,"span",1),i.\u0275\u0275template(36,Gr,2,0,"span",1),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(37,"div",8)(38,"button",19),i.\u0275\u0275text(39," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(40,"button",20),i.\u0275\u0275text(41," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(42,"app-course-registration-step")(43,"p",15),i.\u0275\u0275text(44,"Registration Complete."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"div",8)(46,"button",19),i.\u0275\u0275text(47," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(48,"a",9),i.\u0275\u0275text(49," Open Course "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("steps",i.\u0275\u0275pureFunction0(19,sr)),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.nameForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",t.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.needsStudentNumber?t.studentNumberForm:t.confirmNameForm),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.needsStudentNumber),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.needsStudentNumber),i.\u0275\u0275advance(4),i.\u0275\u0275property("showLoader",t.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.verifyForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("textMask",t.verificationNumberMask)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275propertyInterpolate("status",t.attemptsRemaining<3?"error":"info"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.attemptsRemaining>=1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.attemptsRemaining<1),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",t.loadingContent),i.\u0275\u0275advance(6),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(20,Ur,t.courseId))}}function bo(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Un,1,0,"div",3),i.\u0275\u0275template(4,Hn,1,0,"div",4),i.\u0275\u0275template(5,Pn,6,3,"ng-container",1),i.\u0275\u0275template(6,Gn,3,0,"ng-container",1),i.\u0275\u0275template(7,nr,50,22,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function Na(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",30),i.\u0275\u0275element(2,"tui-marker-icon",31),i.\u0275\u0275elementStart(3,"h1",32),i.\u0275\u0275text(4," Unable to find the course for registration. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",33),i.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd())}let Go=(()=>{class e{constructor(t,r,o,s){this.route=t,this.courseService=r,this.changeDetector=o,this.notificationsService=s,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.verificationNumberMask={guide:!1,mask:[/\d/,/\d/]},this.courseId=this.route.snapshot.params.courseId,this.needsStudentNumber=!1,this.loadingContent=!1}ngOnInit(){this.nameForm=bt.createNameForm(),this.confirmNameForm=bt.createConfirmNameForm(),this.studentNumberForm=bt.createStudentNumberForm(),this.verifyForm=bt.createVerifyForm(),this.getRegistrationStatus(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}getRegistrationStatus(){this.courseService.getCourseRegistrationStatus(this.courseId).subscribe(t=>{this.attemptsRemaining=null==t?void 0:t.attempts_remaining,t.status===le.m.BLOCKED&&(this.blocked=!0),t.status===le.m.REGISTERED&&(this.registered=!0)})}onNameFormSubmit(){this.resetFormValues();const t=this.generateCourseRegistrationRequest();!t.name||(this.needsStudentNumber=!1,this.loadingContent=!0,this.registerAndUpdateStepper(t))}onConfirmationFormSubmit(){const t=this.generateCourseRegistrationRequest();!t.name&&!t.student_number||(this.loadingContent=!0,this.registerAndUpdateStepper(t))}onVerificationFormSubmit(){const t=this.generateCourseRegistrationRequest();!t.code||(this.loadingContent=!0,this.verifyRegistrationAndUpdateStepper(t))}registerAndUpdateStepper(t){this.courseService.register(this.courseId,t).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}verifyRegistrationAndUpdateStepper(t){this.courseService.registerVerify(this.courseId,t).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}cleanUpLoadingContent(){this.loadingContent=!1,this.changeDetector.detectChanges()}setStepperStatusFromRegistration(t){var r;this.serverGuessedName=null==t?void 0:t.guessed_name,this.serverGuessedName&&this.confirmNameForm.get("confirmNameControl").setValue(null==t?void 0:t.guessed_name),this.attemptsRemaining=null!==(r=null==t?void 0:t.attempts_remaining)&&void 0!==r?r:this.attemptsRemaining,t.success?this.stepper.setNextStep():0===this.stepper.currentStep&&(this.needsStudentNumber=!0,this.stepper.setNextStep())}generateCourseRegistrationRequest(){return{name:this.nameForm.value.nameControl||null,confirmed_name:this.confirmNameForm.value.confirmNameControl||null,student_number:this.studentNumberForm.value.studentNumberControl||null,code:this.verifyForm.value.verifyControl||null}}sendErrorMessage(){this.notificationsService.show("Check that your inputted values are accurate and try again.",{status:"error"}).subscribe()}resetFormValues(){this.serverGuessedName=null,this.confirmNameForm.reset(),this.studentNumberForm.reset(),this.verifyForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(he.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Ht.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(on,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"steps"],["stepper",""],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Full Name on Canvas","formControlName","nameControl",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","nameControl"],["appearance","secondary","aria-label","Previous","size","m","tuiButton","","type","button",1,"tui-form__button",3,"disabled"],["aria-label","Next","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],["appearance","secondary","aria-label","Previous","size","m","tuiButton","","type","button",1,"tui-form__button",3,"click"],["aria-label","Verification Code","formControlName","verifyControl",3,"textMask","tuiTextfieldCleaner"],["formControlName","verifyControl"],[1,"tui-space_top-3"],[3,"status"],["aria-label","Student Number","formControlName","studentNumberControl",3,"tuiTextfieldCleaner"],["formControlName","studentNumberControl"],["aria-label","Confirm Name","formControlName","confirmNameControl",3,"readOnly","tuiTextfieldCleaner"],["formControlName","confirmNameControl"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,bo,8,10,"ng-container",1),i.\u0275\u0275template(2,Na,7,0,"ng-container",1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.courseNotFound),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[L.O5,Qt.Ls,Et.v0,te.yS,It,Ir,ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,fe.K3,fe.wU,ee.NgControlStatus,ee.FormControlName,ge.be,Vt.y,en.hd,rn.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();var Zr=f(37080),sn=f(58259),_o=f(59695),la=f.n(_o),Co=f(85510),to=f.n(Co),zt=f(17489);const{round:ca,floor:Mi,PI:Wo}=Math,wo={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},Dn=function(e){return e%360+(e<0?360:0)},hi=function(e,n){return n*ca(e/n)},no=function(e){return 180*e/Wo%360},Fn=function(e,n){return(e=(n=n||!1)?e:e%360)*Wo/180},So=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return Mi(Math.random()*(n-e+1)+e)},{cos:Oi,sin:ro,atan2:Ra}=Math,fa=function(e,n){var t=Fn(e.y),r=Fn(n.y),c=Fn(n.x-e.x),h=ro(c)*Oi(r),m=Oi(t)*ro(r)-ro(t)*Oi(r)*Oi(c),y=no(Ra(h,m))-22.5;return y<0&&(y+=360),["NE","E","SE","S","SW","W","NW","N"][y=parseInt(y/45)]},pi=function(e,n){var t=e.x,r=e.y;return(t-=n.x)*t+(r-=n.y)*r},da=function(e,n){return Math.sqrt(pi(e,n))},Wt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:To,cos:$o,sin:ha,sqrt:bi,min:ki,max:Li,atan2:Ar,round:gi,pow:Da,PI:io}=Math,ve=function(e,n){if(!(this instanceof ve))return new ve(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};ve.fromPolar=function(e,n,t){t=new ve(t);var r=To(e*$o(n)),o=To(e*ha(n)),s=Dn(no(n));return s<90?o=-o:s<180?(r=-r,o=-o):s<270&&(r=-r),new ve(t.x+r,t.y+o)},ve.random=function(e,n,t,r){return new ve(So(e,n),So(t,r))},ve.prototype={type:Wt.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new ve(e[0]);for(var t=null,r=1/0,o=0;o<n;o++){var s=new ve(e[o]),c=this.squaredDistance(s);c<r&&(t=s,r=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=ki(Li(this.x,e.x),e.x+e.width),this.y=ki(Li(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return fa(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new ve(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new ve(this.x-(e||0),this.y-(n||0))},distance:function(e){return da(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new ve((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return bi(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return To(e.x-this.x)+To(e.y-this.y)},move:function(e,n){var t=Fn(new ve(e).theta(this));return this.offset($o(t)*n,-ha(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new ve(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new ve(0,0),n=Fn(Dn(-n));var t=$o(n),r=ha(n),s=r*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=s,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Da(10,e)}return this.x=gi(this.x*n)/n,this.y=gi(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new ve(t)||new ve(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=hi(this.x,e),this.y=hi(this.y,n||e),this},squaredDistance:function(e){return pi(this,e)},theta:function(e){e=new ve(e);var r=Ar(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*io+r),180*r/io},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ve(e)||new ve(0,0);var n=this.x,t=this.y;return this.x=bi((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=Fn(e.theta(new ve(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new ve(0,0).angleBetween(this,e)}},ve.prototype.translate=ve.prototype.offset;const Wn=ve,{max:vi,min:oo}=Math,ft=function(e,n){return this instanceof ft?e instanceof ft?new ft(e.start,e.end):(this.start=new ve(e),void(this.end=new ve(n))):new ft(e,n)};ft.prototype={type:Wt.Line,angle:function(){var e=new ve(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=oo(this.start.x,this.end.x),n=oo(this.start.y,this.end.y),t=vi(this.start.x,this.end.x),r=vi(this.start.y,this.end.y);return new rt(e,n,t-e,r-n)},bearing:function(){return fa(this.start,this.end)},clone:function(){return new ft(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new ft(this.start,e).vector()),t=oo(1,vi(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var r=this.length();return!(new ft(n,e).length()>r||new ft(e,t).length()>r)},divideAt:function(e){var n=this.pointAt(e);return[new ft(this.start,n),new ft(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new ft(this.start,n),new ft(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof ft&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new ve(this.end.x-this.start.x,this.end.y-this.start.y),t=new ve(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*t.y-n.y*t.x,o=new ve(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*t.y-o.y*t.x,c=o.x*n.y-o.y*n.x;if(0===r||s*r<0||c*r<0)return null;if(r>0){if(s>r||c>r)return null}else if(s<r||c<r)return null;return[new ve(this.start.x+s*n.x/r,this.start.y+s*n.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return da(this.start,this.end)},midpoint:function(){return new ve((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:r}=n,o=t.clone().rotate(r,270),s=r.clone().rotate(t,90);return t.move(s,e),r.move(o,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,r=!0;e<0&&(r=!1,e=-e);var o=this.length();return e>=o?r?t.clone():n.clone():this.pointAt((r?e:o-e)/o)},pointOffset:function(e){e=new ve(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return pi(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAt(e),o=new ft(n,t);return o.translate(r.x-n.x,r.y-n.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAtLength(e),o=new ft(n,t);return o.translate(r.x-n.x,r.y-n.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new ve(this.end.x-this.start.x,this.end.y-this.start.y)}},ft.prototype.intersection=ft.prototype.intersect;const _i=ft,{sqrt:Ni,round:Ri,pow:ao}=Math,Zn=function(e,n,t){return this instanceof Zn?e instanceof Zn?new Zn(new ve(e.x,e.y),e.a,e.b):(e=new ve(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new Zn(e,n,t)};Zn.fromRect=function(e){return e=new rt(e),new Zn(e.center(),e.width/2,e.height/2)},Zn.prototype={type:Wt.Ellipse,bbox:function(){return new rt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ve(this.x,this.y)},clone:function(){return new Zn(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,r=e.end,o=this.a,s=this.b,c=e.vector(),h=t.difference(new ve(this)),m=new ve(c.x/(o*o),c.y/(s*s)),_=new ve(h.x/(o*o),h.y/(s*s)),S=c.dot(m),y=c.dot(_),J=y*y-S*(h.dot(_)-1);if(J<0)return null;if(J>0){var ne=Ni(J),ye=(-y-ne)/S,xe=(-y+ne)/S;if((ye<0||1<ye)&&(xe<0||1<xe))return null;0<=ye&&ye<=1&&n.push(t.lerp(r,ye)),0<=xe&&xe<=1&&n.push(t.lerp(r,xe))}else{var Ae=-y/S;if(!(0<=Ae&&Ae<=1))return null;n.push(t.lerp(r,Ae))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new ve(e),n&&e.rotate(new ve(this.x,this.y),n);var o,t=e.x-this.x,r=e.y-this.y;if(0===t)return o=this.bbox().pointNearestToPoint(e),n?o.rotate(new ve(this.x,this.y),-n):o;var s=r/t,_=Ni(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return o=new ve(this.x+(_=t<0?-_:_),this.y+s*_),n?o.rotate(new ve(this.x,this.y),-n):o},normalizedDistance:function(e){var n=e.x,t=e.y,r=this.a,o=this.b,s=this.x,c=this.y;return(n-s)*(n-s)/(r*r)+(t-c)*(t-c)/(o*o)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=ao(10,e)}return this.x=Ri(this.x*n)/n,this.y=Ri(this.y*n)/n,this.a=Ri(this.a*n)/n,this.b=Ri(this.b*n)/n,this},tangentTheta:function(e){var y,H,t=e.x,r=e.y,o=this.a,s=this.b,c=this.bbox().center(),h=c.x,m=c.y;return t>c.x+o/2||t<c.x-o/2?H=o*o/(t-h)-o*o*(r-m)*((y=t>c.x?r-30:r+30)-m)/(s*s*(t-h))+h:y=s*s/(r-m)-s*s*(t-h)*((H=r>c.y?t+30:t-30)-h)/(o*o*(r-m))+m,new ve(H,y).theta(e)},toString:function(){return new ve(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Fa=Zn,{abs:pa,cos:pr,sin:Wr,min:yr,max:Yo,round:Di,pow:qr}=Math,rt=function(e,n,t,r){if(!(this instanceof rt))return new rt(e,n,t,r);Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===r?0:r};rt.fromEllipse=function(e){return e=new Zn(e),new rt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},rt.fromPointUnion=function(...e){if(0===e.length)return null;const n=new ve;let t,r,o,s;t=r=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const h=n.x,m=n.y;h<t&&(t=h),h>o&&(o=h),m<r&&(r=m),m>s&&(s=m)}return new rt(t,r,o-t,s-r)},rt.fromRectUnion=function(...e){if(0===e.length)return null;const n=new rt;let t,r,o,s;t=r=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const h=n.x,m=n.y,_=h+n.width,S=m+n.height;h<t&&(t=h),_>o&&(o=_),m<r&&(r=m),S>s&&(s=S)}return new rt(t,r,o-t,s-r)},rt.prototype={type:Wt.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,r=Fn(e),o=pa(Wr(r)),s=pa(pr(r)),c=n*s+t*o,h=n*o+t*s;return this.x+=(n-c)/2,this.y+=(t-h)/2,this.width=c,this.height=h,this},bottomLeft:function(){return new ve(this.x,this.y+this.height)},bottomLine:function(){return new ft(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ve(this.x+this.width/2,this.y+this.height)},center:function(){return new ve(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new rt(this)},containsPoint:function(e){return(e=new ve(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new rt(this).normalize(),t=new rt(e).normalize(),r=n.width,o=n.height,s=t.width,c=t.height;if(!(r&&o&&s&&c))return!1;var h=n.x,m=n.y,_=t.x,S=t.y;return s+=_,r+=h,c+=S,o+=m,h<=_&&s<=r&&m<=S&&c<=o},corner:function(){return new ve(this.x+this.width,this.y+this.height)},equals:function(e){var n=new rt(this).normalize(),t=new rt(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),r=e.origin(),o=e.corner();if(o.x<=n.x||o.y<=n.y||r.x>=t.x||r.y>=t.y)return null;var s=Yo(n.x,r.x),c=Yo(n.y,r.y);return new rt(s,c,yr(t.x,o.x)-s,yr(t.y,o.y)-c)},intersectionWithLine:function(e){var s,c,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],r=[],o=[],h=t.length;for(c=0;c<h;c++)null!==(s=e.intersect(t[c]))&&o.indexOf(s.toString())<0&&(r.push(s),o.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new ve(e);var r,t=new ve(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new ft(t,e),c=o.length-1;c>=0;--c){var h=o[c].intersection(s);if(null!==h){r=h;break}}return r&&n&&r.rotate(t,-n),r},leftLine:function(){return new ft(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ve(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new rt(e),n||(n=e.center());var t,r,o,s,c,h,m,_,S=n.x,y=n.y;t=r=o=s=c=h=m=_=1/0;var H=e.topLeft();H.x<S&&(t=(this.x-S)/(H.x-S)),H.y<y&&(c=(this.y-y)/(H.y-y));var J=e.bottomRight();J.x>S&&(r=(this.x+this.width-S)/(J.x-S)),J.y>y&&(h=(this.y+this.height-y)/(J.y-y));var ne=e.topRight();ne.x>S&&(o=(this.x+this.width-S)/(ne.x-S)),ne.y<y&&(m=(this.y-y)/(ne.y-y));var ye=e.bottomLeft();return ye.x<S&&(s=(this.x-S)/(ye.x-S)),ye.y>y&&(_=(this.y+this.height-y)/(ye.y-y)),{sx:yr(t,r,o,s),sy:yr(c,h,m,_)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return yr(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,r=-this.height),this.x=e,this.y=n,this.width=t,this.height=r,this},offset:function(e,n){return ve.prototype.offset.call(this,e,n)},origin:function(){return new ve(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ve(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new ve(this.x+this.width,e.y);case"left":return new ve(this.x,e.y);case"bottom":return new ve(e.x,this.y+this.height);case"top":return new ve(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new ft(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ve(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=qr(10,e)}return this.x=Di(this.x*n)/n,this.y=Di(this.y*n)/n,this.width=Di(this.width*n)/n,this.height=Di(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new ve(e);var t=this.x+this.width-e.x,r=e.y-this.y,s=e.x-this.x,c="left";return t<s&&(s=t,c="right"),r<s&&(s=r,c="top"),this.y+this.height-e.y<s&&(c="bottom"),c},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),r=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=r.x-t.x,this.height=r.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new ft(this.topLeft(),this.topRight())},topMiddle:function(){return new ve(this.x+this.width/2,this.y)},topRight:function(){return new ve(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return rt.fromRectUnion(this,e)},update:function(e,n,t,r){return Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=r||0,this}},rt.prototype.bottomRight=rt.prototype.corner,rt.prototype.topLeft=rt.prototype.origin,rt.prototype.translate=rt.prototype.offset;const Eo=rt;function Po(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),r=t.length;for(let o=0;o<r;o+=2)n.push({x:+t[o],y:+t[o+1]});return n}function Mr(e){const n=e.length;if(0===n)return[];const t=[];for(let r=0;r<n;r++){const o=e[r].clone();t.push(o)}return t}function Ci(e){const{abs:n}=Math;var t,r,s,o=e.length;if(0===o)return[];for(t=0;t<o;t++)(void 0===s||e[t].y<s.y||e[t].y===s.y&&e[t].x>s.x)&&(s=e[t]);var c=[];for(t=0;t<o;t++){var h=s.theta(e[t]);0===h&&(h=360),c.push([e[t],t,h])}c.sort(function(ot,ht){var pt=ot[2]-ht[2];return 0===pt&&(pt=ht[1]-ot[1]),pt}),c.length>2&&c.unshift(c[c.length-1]);for(var H,J,ne,ye,xe,Ae,S={},y=[];0!==c.length;)if(J=(H=c.pop())[0],!S.hasOwnProperty(H[0]+"@@"+H[1]))for(var Me=!1;!Me;)if(y.length<2)y.push(H),Me=!0;else{ye=(ne=y.pop())[0];var O=(Ae=(xe=y.pop())[0]).cross(ye,J);if(O<0)y.push(xe),y.push(ne),y.push(H),Me=!0;else if(0===O){var K=ye.angleBetween(Ae,J);n(K-180)<1e-10||ye.equals(J)||Ae.equals(ye)?(S[ne[0]+"@@"+ne[1]]=ye,y.push(xe)):n((K+1)%360-1)<1e-10&&(y.push(xe),c.push(ne))}else S[ne[0]+"@@"+ne[1]]=ye,y.push(xe)}y.length>2&&y.pop();var ie,pe=-1;for(r=y.length,t=0;t<r;t++){var Pe=y[t][1];(void 0===ie||Pe<ie)&&(ie=Pe,pe=t)}var Oe=[];if(pe>0){var ze=y.slice(pe),tt=y.slice(0,pe);Oe=ze.concat(tt)}else Oe=y;var Je=[];for(r=Oe.length,t=0;t<r;t++)Je.push(Oe[t][0]);return Je}const ln=function(e){return this instanceof ln?"string"==typeof e?new ln.parse(e):void(this.points=Array.isArray(e)?e.map(ve):[]):new ln(e)};ln.parse=function(e){return new ln(Po(e))},ln.fromRect=function(e){return new ln([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},ln.prototype={type:Wt.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,r=-1/0,o=this.points,s=o.length;if(0===s)return null;for(var c=0;c<s;c++){var h=o[c],m=h.x,_=h.y;m<e&&(e=m),m>n&&(n=m),_<t&&(t=_),_>r&&(r=_)}return new rt(e,t,n-e,r-t)},clone:function(){return new ln(Mr(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var r,o=1/0,s=0,c=t-1,h=0;h<c;h++){var m=new ft(n[h],n[h+1]),_=m.length(),S=m.closestPointNormalizedLength(e),H=m.pointAt(S).squaredDistance(e);H<o&&(o=H,r=s+S*_),s+=_}return r},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var r=e.x,o=e.y,s=t-1,c=0,h=0,m=new ft,_=new ft,S=new ve;c<t;c++){var y=n[s],H=n[c];if(e.equals(y)||(m.start=y,m.end=H,m.containsPoint(e)))return!0;if(o<=y.y&&o>H.y||o>y.y&&o<=H.y){var J=y.x-r>H.x-r?y.x-r:H.x-r;J>=0&&(S.x=r+J,S.y=o,_.start=e,_.end=S,m.intersect(_)&&h++)}s=c}return h%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new ln(Ci(this.points))},equals:function(e){if(!e)return!1;var n=this.points,r=n.length;if(e.points.length!==r)return!1;for(var o=0;o<r;o++)if(!n[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var n=new ft(e),t=[],r=this.lengthPoints(),o=new ft,s=0,c=r.length-1;s<c;s++){o.start=r[s],o.end=r[s+1];var h=n.intersectionWithLine(o);h&&t.push(h[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new ft,r=n-1,o=0;o<r;o++)if(t.start=e[o],t.end=e[o+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,r=n-1,o=0;o<r;o++)t+=e[o].distance(e[o+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var o=0,s=t-1,c=0;c<s;c++){var h=r?c:s-1-c,m=n[h],_=n[h+1],S=new ft(m,_),y=m.distance(_);if(e<=o+y)return S.pointAtLength((r?1:-1)*(e-o));o+=y}return(r?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.points,o=r.length,s=0;s<o;s++)r[s].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let r=0;for(;n[r+2];){const s=r+1,m=n[s];new ft(n[r],n[r+2]).closestPoint(m).distance(m)<=t?n.splice(s,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o,s=0,c=t-1,h=0;h<c;h++){var m=r?h:c-1-h,_=n[m],S=n[m+1],y=new ft(_,S),H=_.distance(S);if(y.isDifferentiable()){if(e<=s+H)return y.tangentAtLength((r?1:-1)*(e-s));o=y}s+=H}return o?o.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",r=0;r<n;r++){var o=e[r];t+=o.x+","+o.y+" "}return t.trim()}},Object.defineProperty(ln.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(ln.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:Fi,sqrt:ga,min:Xo,max:Io,pow:Vi}=Math,dn=function(e,n,t,r){return this instanceof dn?e instanceof dn?new dn(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new ve(e),this.controlPoint1=new ve(n),this.controlPoint2=new ve(t),void(this.end=new ve(r))):new dn(e,n,t,r)};function Bi(e){var n,t,r=[];for(t=arguments.length,n=1;n<t;n++)r.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(t=r.length,n=0;n<t;n++){var c,h,s=r[n];for(h in s)s.hasOwnProperty(h)&&(delete o[h],c=Object.getOwnPropertyDescriptor(s,h),Object.defineProperty(o,h,c))}return o}dn.throughPoints=function(){function n(t){var r=t.length,o=[],s=[],c=2;o[0]=t[0]/c;for(var h=1;h<r;h++)s[h]=1/c,o[h]=(t[h]-o[h-1])/(c=(h<r-1?4:3.5)-s[h]);for(h=1;h<r;h++)o[r-h-1]-=s[r-h]*o[r-h];return o}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function e(t){var c,r=[],o=[],s=t.length-1;if(1==s)return r[0]=new ve((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new ve(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,o];var h=[];for(c=1;c<s-1;c++)h[c]=4*t[c].x+2*t[c+1].x;h[0]=t[0].x+2*t[1].x,h[s-1]=(8*t[s-1].x+t[s].x)/2;var m=n(h);for(c=1;c<s-1;++c)h[c]=4*t[c].y+2*t[c+1].y;h[0]=t[0].y+2*t[1].y,h[s-1]=(8*t[s-1].y+t[s].y)/2;var _=n(h);for(c=0;c<s;c++)r.push(new ve(m[c],_[c])),o.push(c<s-1?new ve(2*t[c+1].x-m[c+1],2*t[c+1].y-_[c+1]):new ve((t[s].x+m[s-1])/2,(t[s].y+_[s-1])/2));return[r,o]}(t),o=[],s=r[0].length,c=0;c<s;c++){var h=new ve(r[0][c].x,r[0][c].y),m=new ve(r[1][c].x,r[1][c].y);o.push(new dn(t[c],h,m,t[c+1]))}return o}}(),dn.prototype={type:Wt.Curve,bbox:function(){for(var ye,xe,Ae,Me,O,U,K,ie,e=this.start,n=this.controlPoint1,t=this.controlPoint2,r=this.end,o=e.x,s=e.y,c=n.x,h=n.y,m=t.x,_=t.y,S=r.x,y=r.y,H=new Array,J=new Array,ne=[new Array,new Array],pe=0;pe<2;++pe)if(0===pe?(xe=6*o-12*c+6*m,ye=-3*o+9*c-9*m+3*S,Ae=3*c-3*o):(xe=6*s-12*h+6*_,ye=-3*s+9*h-9*_+3*y,Ae=3*h-3*s),Fi(ye)<1e-12){if(Fi(xe)<1e-12)continue;0<(Me=-Ae/xe)&&Me<1&&J.push(Me)}else ie=ga(K=xe*xe-4*Ae*ye),!(K<0)&&(0<(O=(-xe+ie)/(2*ye))&&O<1&&J.push(O),0<(U=(-xe-ie)/(2*ye))&&U<1&&J.push(U));for(var ze,tt,Je,Pe=J.length,Oe=Pe;Pe--;)ne[0][Pe]=tt=(ze=1-(Me=J[Pe]))*ze*ze*o+3*ze*ze*Me*c+3*ze*Me*Me*m+Me*Me*Me*S,ne[1][Pe]=Je=ze*ze*ze*s+3*ze*ze*Me*h+3*ze*Me*Me*_+Me*Me*Me*y,H[Pe]={X:tt,Y:Je};J[Oe]=0,J[Oe+1]=1,H[Oe]={X:o,Y:s},H[Oe+1]={X:S,Y:y},ne[0][Oe]=o,ne[1][Oe]=s,ne[0][Oe+1]=S,ne[1][Oe+1]=y,J.length=Oe+2,ne[0].length=Oe+2,ne[1].length=Oe+2,H.length=Oe+2;var ot=Xo.apply(null,ne[0]),ht=Xo.apply(null,ne[1]),pt=Io.apply(null,ne[0]),Pt=Io.apply(null,ne[1]);return new rt(ot,ht,pt-ot,Pt-ht)},clone:function(){return new dn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.closestPointLength(e,o);if(!s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){for(var o,s,c,h,m,_,S,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,r=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,y=r.length,H=y?1/y:0,J=0;J<y;J++){var ne=r[J],ye=ne.start.distance(e),xe=ne.end.distance(e),Ae=ye+xe;(!S||Ae<S)&&(o=ne,s=J*H,c=(J+1)*H,h=ye,m=xe,_=ne.start.distance(ne.end),S=Ae)}for(var Me=Vi(10,-t);;){var O=h?Fi(h-m)/h:0,U=m?Fi(h-m)/m:0;if(O<Me||U<Me||!h||h<_*Me||!m||m<_*Me)return h<=m?s:c;var Oe=o.divide(.5);H/=2;var ze=Oe[0].start.distance(e),tt=Oe[0].end.distance(e),Je=ze+tt,ot=Oe[1].start.distance(e),ht=Oe[1].end.distance(e);Je<=ot+ht?(o=Oe[0],c-=H,h=ze,m=tt):(o=Oe[1],s+=H,h=ot,m=ht)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return[new dn(n,n,n,n),new dn(n,t,r,o)];if(e>=1)return[new dn(n,t,r,o),new dn(o,o,o,o)];var s=this.getSkeletonPoints(e),m=s.divider,_=s.dividerControlPoint1,S=s.dividerControlPoint2;return[new dn(n,s.startControlPoint1,s.startControlPoint2,m),new dn(m,_,S,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var s=new ft(n,t).pointAt(e),c=new ft(t,r).pointAt(e),h=new ft(r,o).pointAt(e),m=new ft(s,c).pointAt(e),_=new ft(c,h).pointAt(e);return{startControlPoint1:s,startControlPoint2:m,divider:new ft(m,_).pointAt(e),dividerControlPoint1:_,dividerControlPoint2:h}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new dn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var r=this.endpointDistance(),o=Vi(10,-n),s=0;;){s+=1;for(var c=[],h=t.length,m=0;m<h;m++){var S=t[m].divide(.5);c.push(S[0],S[1])}for(var y=0,H=c.length,J=0;J<H;J++)y+=c[J].endpointDistance();if(s>1&&(0!==y?(y-r)/y:0)<o)return c;t=c,r=y}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,o=t.length,s=0;s<o;s++)r+=t[s].endpointDistance();return r},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,o=n.divider,s=new ft(t,n.dividerControlPoint1);return s.translate(o.x-t.x,o.y-t.y),s},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.length(o);return this.tAtLength(s*e,o)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var c,h,m,_,S,r=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.subdivisions?this.getSubdivisions({precision:r}):n.subdivisions,s={precision:r,subdivisions:o},y=0,H=o.length,J=1/H,ne=0;ne<H;ne++){var ye=t?ne:H-1-ne,xe=o[ne],Ae=xe.endpointDistance();if(e<=y+Ae){c=xe,h=ye*J,m=(ye+1)*J,_=t?e-y:Ae+y-e,S=t?Ae+y-e:e-y;break}y+=Ae}if(!c)return t?1:0;for(var Me=this.length(s),O=Vi(10,-r);;){if((0!==Me?_/Me:0)<O)return h;if((0!==Me?S/Me:0)<O)return m;var K,ie,pe=c.divide(.5);J/=2;var Pe=pe[0].endpointDistance(),Oe=pe[1].endpointDistance();_<=Pe?(c=pe[0],m-=J,ie=Pe-(K=_)):(c=pe[1],h+=J,ie=Oe-(K=_-Pe)),_=K,S=ie}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[t[0].start.clone()],o=t.length,s=0;s<o;s++)r.push(t[s].end.clone());return r},toPolyline:function(e){return new ln(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},dn.prototype.divide=dn.prototype.divideAtT;const Ct=function(e){if(!(this instanceof Ct))return new Ct(e);if("string"==typeof e)return new Ct.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(h,m){return h.concat(m)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var o=null;for(n=0;n<t;n++){var s=e[n];if(!(s instanceof ft||s instanceof dn))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(Ct.createSegment("M",s.start)),o&&!o.end.equals(s.start)&&this.appendSegment(Ct.createSegment("M",s.start)),s instanceof ft?this.appendSegment(Ct.createSegment("L",s.end)):s instanceof dn&&this.appendSegment(Ct.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),o=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof ft)this.appendSegment(Ct.createSegment("M",e.start)),this.appendSegment(Ct.createSegment("L",e.end));else if(e instanceof dn)this.appendSegment(Ct.createSegment("M",e.start)),this.appendSegment(Ct.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof ln))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(Ct.createSegment(0===n?"M":"L",e.points[n]))}}};function ei(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}Ct.parse=function(e){if(!e)return new Ct;for(var n=new Ct,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=r.length,s=0;s<o;s++){var m=r[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),_=Ct.createSegment.apply(this,m);n.appendSegment(_)}return n},Ct.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=Ct.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],r=arguments.length,o=1;o<r;o++)t.push(arguments[o]);return ei(n,t)},Ct.prototype={type:Wt.Path,appendSegment:function(e){var r,n=this.segments,t=n.length,o=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(_,S){return _.concat(S)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,h=0;h<c;h++)r=this.prepareSegment(e[h],o,null),n.push(r),o=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,o,null),n.push(r)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,r=0;r<n;r++){var o=e[r];if(o.isVisible){var s=o.bbox();t=t?t.union(s):s}}if(t)return t;var c=e[n-1];return new rt(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new Ct,r=0;r<n;r++){var o=e[r].clone();t.appendSegment(o)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointT(e,o);return s?this.lengthAtT(s,o):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointLength(e,o);if(0===s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,h=1/0,m=0;m<r;m++){var _=t[m];if(_.isVisible){var y=_.closestPointT(e,{precision:o,subdivisions:s[m]}),H=_.pointAtT(y),J=new ft(H,e).squaredLength();J<h&&(c={segmentIndex:m,value:y},h=J)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,h=1/0,m=0;m<r;m++){var _=t[m],S=s[m];if(_.isDifferentiable()){var y=_.closestPointT(e,{precision:o,subdivisions:S}),H=_.pointAtT(y),J=new ft(H,e).squaredLength();J<h&&(c=_.tangentAtT(y),h=J)}}return c||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var r=t.length,o=0,s=0;s<r;s++)t[s].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},h=this.length(c);return this.divideAtLength(h*e,c)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var r=!0;e<0&&(r=!1,e=-e);var c,h,_,S,y,H,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,m=0;for(c=0;c<t;c++){var ne=r?c:t-1-c;h=this.getSegment(ne);var ye=s[ne],xe=h.length({precision:o,subdivisions:ye});if(h.isDifferentiable()&&(y=h,H=ne,e<=m+xe)){S=ne,_=h.divideAtLength((r?1:-1)*(e-m),{precision:o,subdivisions:ye});break}m+=xe}if(!y)return null;_||(S=H,_=y.divideAtT(r?1:0));var Ae=this.clone();Ae.replaceSegment(S,_);var Me=S,O=S+1,U=S+2;_[0].isDifferentiable()||(Ae.removeSegment(Me),O-=1,U-=1);var K=Ae.getSegment(O).start;Ae.insertSegment(O,Ct.createSegment("M",K)),U+=1,_[1].isDifferentiable()||(Ae.removeSegment(U-1),U-=1);var ie=U-Me-1;for(c=U;c<Ae.segments.length;c++){var pe=this.getSegment(c-ie);if("Z"===(h=Ae.getSegment(c)).type&&!pe.subpathStartSegment.end.equals(h.subpathStartSegment.end)){var Pe=Ct.createSegment("L",pe.end);Ae.replaceSegment(c,Pe)}}return[new Ct(Ae.segments.slice(0,O)),new Ct(Ae.segments.slice(O))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,r=n.length;if(t.length!==r)return!1;for(var o=0;o<r;o++){var s=n[o],c=t[o];if(s.type!==c.type||!s.equals(c))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],s=0;s<t;s++){var h=n[s].getSubdivisions({precision:r});o.push(h)}return o},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,r=[];for(let o=0;o<t;o++){const s=n[o];s.isSubpathStart?r.push(new Ct(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(e,n){var t=this.segments,r=t.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var o,s=null,c=null;if(0!==r&&(c=e>=1?(s=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(S,y){return S.concat(y)},[]))[0].isSegment)throw new Error("Segments required.");for(var h=n.length,m=0;m<h;m++)o=this.prepareSegment(n[m],s,c),t.splice(e+m,0,o),s=o}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,s,c),t.splice(e,0,o)}},intersectionWithLine:function(e,n){var t=null,r=this.toPolylines(n);if(!r)return null;for(var o=0,s=r.length;o<s;o++){var h=e.intersect(r[o]);h&&(t||(t=[]),Array.isArray(h)?Array.prototype.push.apply(t,h):t.push(h))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=0,c=0;c<t;c++)s+=n[c].length({subdivisions:o[c]});return s},lengthAtT:function(e,n){var t=this.segments,r=t.length;if(0===r)return 0;var o=e.segmentIndex;if(o<0)return 0;var s=e.value;o>=r?(o=r-1,s=1):s<0?s=0:s>1&&(s=1);for(var c=void 0===(n=n||{}).precision?this.PRECISION:n.precision,h=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):n.segmentSubdivisions,_=0,S=0;S<o;S++){var y=t[S];_+=y.length({precisison:c,subdivisions:h[S]})}return _+(y=t[o]).lengthAtT(s,{precisison:c,subdivisions:h[o]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},h=this.length(c);return this.pointAtLength(h*e,c)},pointAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var h,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,m=0,_=0;_<r;_++){var S=o?_:r-1-_,y=t[S],H=c[S],J=y.length({precision:s,subdivisions:H});if(y.isVisible){if(e<=m+J)return y.pointAtLength((o?1:-1)*(e-m),{precision:s,subdivisions:H});h=y}m+=J}return h?o?h.end:h.start:t[r-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].pointAtT(0);if(r>=t)return n[t-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].pointAtT(o)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=t),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var r=n.splice(e,1)[0],o=r.previousSegment,s=r.nextSegment;o&&(o.nextSegment=s),s&&(s.previousSegment=o),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,n){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var o,s=t[e],c=s.previousSegment,h=s.nextSegment,m=s.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(H,J){return H.concat(J)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var _=n.length,S=0;S<_;S++)o=this.prepareSegment(n[S],c,h),t.splice(e+S,0,o),c=o,m&&o.isSubpathStart&&(m=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,c,h),t.splice(e,1,o),m&&o.isSubpathStart&&(m=!1)}m&&h&&this.updateSubpathStartSegment(h)},round:function(e){for(var n=this.segments,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.segments,o=r.length,s=0;s<o;s++)r[s].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},h=this.length(c);return this.segmentIndexAtLength(h*e,c)},segmentIndexAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,h=null,m=0,_=0;_<r;_++){var S=o?_:r-1-_,y=t[S],J=y.length({precision:s,subdivisions:c[S]});if(y.isVisible){if(e<=m+J)return S;h=S}m+=J}return h},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},h=this.length(c);return this.tangentAtLength(h*e,c)},tangentAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var h,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,m=0,_=0;_<r;_++){var S=o?_:r-1-_,y=t[S],H=c[S],J=y.length({precision:s,subdivisions:H});if(y.isDifferentiable()){if(e<=m+J)return y.tangentAtLength((o?1:-1)*(e-m),{precision:s,subdivisions:H});h=y}m+=J}return h?h.tangentAtT(o?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].tangentAtT(0);if(r>=t)return n[t-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].tangentAtT(o)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=[],c=[],h=0;h<t;h++){var m=n[h];if(m.isVisible){var _=o[h];if(_.length>0){var S=_.map(function(y){return y.start});Array.prototype.push.apply(c,S)}else c.push(m.start)}else c.length>0&&(c.push(n[h-1].end),s.push(c),c=[])}return c.length>0&&(c.push(this.end),s.push(c)),s},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var r=0,o=t.length;r<o;r++)n.push(new ln(t[r]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",r=0;r<n;r++)t+=e[r].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Ct.createSegment("M",0,0)),this}},Object.defineProperty(Ct.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var r=e[t];if(r.isVisible)return r.start}return e[n-1].end}}),Object.defineProperty(Ct.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var r=e[t];if(r.isVisible)return r.end}return e[n-1].end}});var wi={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(wi,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(wi,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(wi,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var rr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof rr))return ei(rr,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof ft){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ve(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(ei(rr,o));return r}if(1===n)return this.end=new ve(e[0]),this;for(r=[],t=0;t<n;t+=1)r.push(new rr(e[t]));return r},Va={clone:function(){return new rr(this.end)},divideAt:function(e){var t=new ft(this.start,this.end).divideAt(e);return[new rr(t[0]),new rr(t[1])]},divideAtLength:function(e){var t=new ft(this.start,this.end).divideAtLength(e);return[new rr(t[0]),new rr(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(Va,"type",{configurable:!0,enumerable:!0,value:"L"}),rr.prototype=Bi(wi,ft.prototype,Va);var _r=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof _r))return ei(_r,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,s;if(e[0]instanceof dn){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new ve(+e[0],+e[1]),this.controlPoint2=new ve(+e[2],+e[3]),this.end=new ve(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=6)o=e.slice(t,t+6),r.push(ei(_r,o));return r}if(3===n)return this.controlPoint1=new ve(e[0]),this.controlPoint2=new ve(e[1]),this.end=new ve(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(r=[],t=0;t<n;t+=3)s=e.slice(t,t+3),r.push(ei(_r,s));return r},Ko={clone:function(){return new _r(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var r=new dn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new _r(r[0]),new _r(r[1])]},divideAtLength:function(e,n){var r=new dn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new _r(r[0]),new _r(r[1])]},divideAtT:function(e){var t=new dn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new _r(t[0]),new _r(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(Ko,"type",{configurable:!0,enumerable:!0,value:"C"}),_r.prototype=Bi(wi,dn.prototype,Ko);var Or=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Or))return ei(Or,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,s;if(e[0]instanceof ft){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof dn){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ve(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(ei(0===t?Or:rr,o));return r}if(1===n)return this.end=new ve(e[0]),this;for(r=[],t=0;t<n;t+=1)s=e[t],r.push(0===t?new Or(s):new rr(s));return r},so={bbox:function(){return null},clone:function(){return new Or(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(so,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(so,"type",{configurable:!0,enumerable:!0,value:"M"}),Or.prototype=Bi(wi,so);var Hi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Hi))return ei(Hi,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},ji={clone:function(){return new Hi},divideAt:function(e){var t=new ft(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new rr(t[0]):this.clone(),new rr(t[1])]},divideAtLength:function(e){var t=new ft(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new rr(t[0]):this.clone(),new rr(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(ji,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(ji,"type",{configurable:!0,enumerable:!0,value:"Z"}),Hi.prototype=Bi(wi,ft.prototype,ji);var Ba=Ct.segmentTypes={L:rr,C:_r,M:Or,Z:Hi,z:Hi};Ct.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Ba).join("")+",.]*$"),Ct.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const Qo={curveThroughPoints:function(e){return console.warn("deprecated"),new Ct(dn.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,n=[],t=[],r=e.length-1;if(1==r)return n[0]=new ve((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new ve(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var s=[];for(o=1;o<r-1;o++)s[o]=4*e[o].x+2*e[o+1].x;s[0]=e[0].x+2*e[1].x,s[r-1]=(8*e[r-1].x+e[r].x)/2;var c=this.getFirstControlPoints(s);for(o=1;o<r-1;++o)s[o]=4*e[o].y+2*e[o+1].y;s[0]=e[0].y+2*e[1].y,s[r-1]=(8*e[r-1].y+e[r].y)/2;var h=this.getFirstControlPoints(s);for(o=0;o<r;o++)n.push(new ve(c[o],h[o])),t.push(o<r-1?new ve(2*e[o+1].x-c[o+1],2*e[o+1].y-h[o+1]):new ve((e[r].x+c[r-1])/2,(e[r].y+h[r-1])/2));return[n,t]},getCurveDivider:function(e,n,t,r){console.warn("deprecated");var o=new dn(e,n,t,r);return function(c){var h=o.divide(c);return[{p0:h[0].start,p1:h[0].controlPoint1,p2:h[0].controlPoint2,p3:h[0].end},{p0:h[1].start,p1:h[1].controlPoint1,p2:h[1].controlPoint2,p3:h[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],r=[],o=2;t[0]=e[0]/o;for(var s=1;s<n;s++)r[s]=1/o,t[s]=(e[s]-t[s-1])/(o=(s<n-1?4:3.5)-r[s]);for(s=1;s<n;s++)t[n-s-1]-=r[n-s]*t[n-s];return t},getInversionSolver:function(e,n,t,r){console.warn("deprecated");var o=new dn(e,n,t,r);return function(c){return o.closestPointT(c)}}},Xt=function(e){return this instanceof Xt?"string"==typeof e?new Xt.parse(e):void(this.points=Array.isArray(e)?e.map(ve):[]):new Xt(e)};function wn(e,n,t,r){switch(e.type){case Wt.Line:if(n.type===Wt.Line)return Si(e,n);break;case Wt.Ellipse:switch(n.type){case Wt.Line:return Ao(e,n);case Wt.Ellipse:return R(e,n)}break;case Wt.Rect:switch(n.type){case Wt.Line:return Q(e,n);case Wt.Ellipse:return oe(e,n);case Wt.Rect:return de(e,n)}break;case Wt.Polyline:switch(n.type){case Wt.Line:return Ie(e,n);case Wt.Ellipse:return we(e,n);case Wt.Rect:return l(e,n);case Wt.Polyline:return d(e,n)}break;case Wt.Polygon:switch(n.type){case Wt.Line:return x(e,n);case Wt.Ellipse:return w(e,n);case Wt.Rect:return N(e,n);case Wt.Polyline:return F(e,n);case Wt.Polygon:return Y(e,n)}break;case Wt.Path:switch(n.type){case Wt.Line:return ue(e,n,t);case Wt.Ellipse:return se(e,n,t);case Wt.Rect:return Ee(e,n,t);case Wt.Polyline:return Fe(e,n,t);case Wt.Polygon:return Ke(e,n,t);case Wt.Path:return ke(e,n,t,r)}}switch(n.type){case Wt.Ellipse:case Wt.Rect:case Wt.Polyline:case Wt.Polygon:case Wt.Path:return wn(n,e,r,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function Si(e,n){const t=e.start.x,r=e.start.y,c=n.start.x,h=n.start.y,S=e.end.x-t,y=e.end.y-r,H=n.end.x-c,J=n.end.y-h,ne=t-c,ye=r-h,xe=S*J-H*y,Ae=(S*ye-y*ne)/xe,Me=(H*ye-J*ne)/xe;return Ae>=0&&Ae<=1&&Me>=0&&Me<=1}function Ao(e,n){const t=e.a,r=e.b,o=e.x,s=e.y,c=n.start.x-o,m=n.start.y-s,S=t*t,y=r*r,H=n.end.x-o-c,J=n.end.y-s-m,ne=H*H/S+J*J/y,ye=2*c*H/S+2*m*J/y,Ae=ye*ye-4*ne*(c*c/S+m*m/y-1);if(0===Ae){const Me=-ye/2/ne;return Me>=0&&Me<=1}if(Ae>0){const Me=Math.sqrt(Ae),O=(-ye+Me)/2/ne,U=(-ye-Me)/2/ne;return O>=0&&O<=1||U>=0&&U<=1}return!1}function R(e,n){return function kr(e,n,t,r){const{cos:o,sin:s}=Math,c=s(n),h=o(n),m=s(r),_=o(r),S=c*c,y=h*h,J=m*m,ne=_*_,xe=e.a*e.a,Ae=e.b*e.b,Me=t.a*t.a,O=t.b*t.b,U=xe*S+Ae*y,K=Me*J+O*ne,ie=xe*y+Ae*S,pe=Me*ne+O*J;let Pe=2*(Ae-xe)*(c*h),Oe=2*(O-Me)*(m*_),ze=-2*U*e.x-Pe*e.y,tt=-2*K*t.x-Oe*t.y,Je=-Pe*e.x-2*ie*e.y,ot=-Oe*t.x-2*pe*t.y;const ht=U*e.x*e.x+ie*e.y*e.y+Pe*e.x*e.y-xe*Ae,pt=K*t.x*t.x+pe*t.y*t.y+Oe*t.x*t.y-Me*O;Pe/=2,Oe/=2,ze/=2,tt/=2,Je/=2,ot/=2;const Pt=Tt([[U,Pe,ze],[Pe,ie,Je],[ze,Je,ht]]),kn=Tt([[K,Oe,tt],[Oe,pe,ot],[tt,ot,pt]]),Sn=.33333333*(Tt([[K,Pe,ze],[Oe,ie,Je],[tt,Je,ht]])+Tt([[U,Oe,ze],[Pe,pe,Je],[ze,ot,ht]])+Tt([[U,Pe,tt],[Pe,ie,ot],[ze,Je,pt]])),Bn=.33333333*(Tt([[U,Oe,tt],[Pe,pe,ot],[ze,ot,pt]])+Tt([[K,Pe,tt],[Oe,ie,ot],[tt,Je,pt]])+Tt([[K,Oe,ze],[Oe,pe,Je],[tt,ot,ht]])),kt=At([[Pt,Sn],[Sn,Bn]]),$t=At([[Pt,Bn],[Sn,kn]]),Dt=At([[Sn,Bn],[Bn,kn]]);return!(At([[2*kt,$t],[$t,2*Dt]])>0&&(Bn>0||Sn>0))}(e,0,n,0)}function Q(e,n){const{start:t,end:r}=n,{x:o,y:s,width:c,height:h}=e;return!(t.x>o+c&&r.x>o+c||t.x<o&&r.x<o||t.y>s+h&&r.y>s+h||t.y<s&&r.y<s)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||Si(e.topLine(),n)||Si(e.rightLine(),n)||Si(e.bottomLine(),n)||Si(e.leftLine(),n))}function oe(e,n){return!!de(e,rt.fromEllipse(n))&&w(Xt.fromRect(e),n)}function de(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Ie(e,n){return $e(e,n,{interior:!1})}function we(e,n){return vt(e,n,{interior:!1})}function l(e,n){return Ut(e,n,{interior:!1})}function d(e,n){return In(e,n,{interior:!1})}function x(e,n){return $e(e,n,{interior:!0})}function w(e,n){return vt(e,n,{interior:!0})}function N(e,n){return Ut(e,n,{interior:!0})}function F(e,n){return In(e,n,{interior:!0})}function Y(e,n){return Vn(e,n,{interior:!0})}function ue(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:s}=r.getSegment(-1);return"Z"===s?x(o,n):Ie(o,n)})}function se(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:s}=r.getSegment(-1);return"Z"===s?w(o,n):we(o,n)})}function Ee(e,n,t){return Ke(e,Xt.fromRect(n),t)}function Fe(e,n,t){return St(e,n,t,{interior:!1})}function Ke(e,n,t){return St(e,n,t,{interior:!0})}function ke(e,n,t,r){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Ke(n,s,r):Fe(n,s,r)})}function $e(e,n,t={}){const{interior:r=!1}=t;let o;if(r){if(e.containsPoint(n.start))return!0;const{start:h,end:m,points:_}=e;o=m.equals(h)?_:[..._,h]}else o=e.points;const{length:s}=o,c=new ft;for(let h=0;h<s-1;h++)if(c.start=o[h],c.end=o[h+1],Si(n,c))return!0;return!1}function vt(e,n,t={}){const{start:r,end:o,points:s}=e;if(n.containsPoint(r))return!0;let c;const{interior:h=!1}=t;if(h){if(e.containsPoint(n.center()))return!0;c=o.equals(r)?s:[...s,r]}else c=s;const{length:m}=c,_=new ft;for(let S=0;S<m-1;S++)if(_.start=c[S],_.end=c[S+1],Ao(n,_))return!0;return!1}function Ut(e,n,t){return Vn(e,Xt.fromRect(n),t)}function St(e,n,t,r){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Vn(n,s,r):In(n,s,r)})}function In(e,n,t={}){const{interior:r=!1}=t;let o;if(r){const{start:m}=n;if(e.containsPoint(m))return!0;o=e.clone().close()}else o=e;const s=n.points,{length:c}=s,h=new ft;for(let m=0;m<c-1;m++)if(h.start=s[m],h.end=s[m+1],Ie(o,h))return!0;return!1}function Vn(e,n,t){return n.containsPoint(e.start)||In(e,n.clone().close(),t)}function At(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Tt(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Xt.parse=function(e){return new Xt(Po(e))},Xt.fromRect=function(e){return new Xt([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Xt.prototype=Bi(ln.prototype,{type:Wt.Polygon,clone:function(){return new Xt(Mr(this.points))},convexHull:function(){return new Xt(Ci(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const Cr=g,Re=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,o=r.PI,s=r.atan2,c=r.sqrt,h=r.min,m=r.max,_=r.cos,S=r.sin,y=function(O,U,K){if(!(this instanceof y))return y.apply(Object.create(y.prototype),arguments);if(O){if(y.isV(O)&&(O=O.node),U=U||{},y.isString(O)){if("svg"===(O=O.trim()).toLowerCase())O=y.createSvgDocument();else if("<"===O[0]){var ie=y.createSvgDocument(O);if(ie.childNodes.length>1){var Pe,Oe,pe=[];for(Pe=0,Oe=ie.childNodes.length;Pe<Oe;Pe++){var ze=ie.childNodes[Pe];pe.push(new y(document.importNode(ze,!0)))}return pe}O=document.importNode(ie.firstChild,!0)}else O=document.createElementNS(n.svg,O);y.ensureId(O)}return this.node=O,this.setAttributes(U),K&&this.append(K),this}},H=y.prototype;function ne(O,U,K){K||(K={});for(var ie=K.includeAnnotationIndices,pe=K.eol,Pe=K.lineHeight,Oe=K.baseSize,ze=0,tt={},Je=U.length-1,ot=0;ot<=Je;ot++){var ht=U[ot],pt=null;if(y.isObject(ht)){var Pt=ht.attrs,kn=y("tspan",Pt),Sn=kn.node,Bn=ht.t;pe&&ot===Je&&(Bn+=pe),Sn.textContent=Bn;var kt=Pt.class;kt&&kn.addClass(kt),ie&&kn.attr("annotations",ht.annotations),pt=parseFloat(Pt["font-size"]),isFinite(pt)||(pt=Oe),pt&&pt>ze&&(ze=pt)}else pe&&ot===Je&&(ht+=pe),Sn=document.createTextNode(ht||" "),Oe&&Oe>ze&&(ze=Oe);O.appendChild(Sn)}return ze&&(tt.maxFontSize=ze),Pe?tt.lineHeight=Pe:ze&&(tt.lineHeight=1.2*ze),tt}Object.defineProperty(H,"id",{enumerable:!0,get:function(){return this.node.id},set:function(O){this.node.id=O}}),H.getTransformToElement=function(O){var U=this.node;if(y.isSVGGraphicsElement(O)&&y.isSVGGraphicsElement(U)){var K=y.toNode(O).getScreenCTM(),ie=U.getScreenCTM();if(K&&ie)return K.inverse().multiply(ie)}return y.createSVGMatrix()},H.transform=function(O,U){var K=this.node;if(y.isUndefined(O))return y.transformStringToMatrix(this.attr("transform"));if(U&&U.absolute)return this.attr("transform",y.matrixToTransformString(O));var ie=y.createSVGTransform(O);return K.transform.baseVal.appendItem(ie),this},H.translate=function(O,U,K){K=K||{},U=U||0;var ie=this.attr("transform")||"",pe=y.parseTransformString(ie);return ie=pe.value,y.isUndefined(O)?pe.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(K.absolute?O:pe.translate.tx+O)+","+(K.absolute?U:pe.translate.ty+U)+") "+ie).trim()),this)},H.rotate=function(O,U,K,ie){ie=ie||{};var pe=this.attr("transform")||"",Pe=y.parseTransformString(pe);return pe=Pe.value,y.isUndefined(O)?Pe.rotate:(pe=pe.replace(/rotate\([^)]*\)/g,"").trim(),O%=360,this.attr("transform",(pe+" rotate("+(ie.absolute?O:Pe.rotate.angle+O)+(void 0!==U&&void 0!==K?","+U+","+K:"")+")").trim()),this)},H.scale=function(O,U){U=y.isUndefined(U)?O:U;var K=this.attr("transform")||"",ie=y.parseTransformString(K);return K=ie.value,y.isUndefined(O)?ie.scale:(K=K.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(K+" scale("+O+","+U+")").trim()),this)},H.bbox=function(O,U){var K,ie=this.node,pe=ie.ownerSVGElement;if(!pe)return new rt(0,0,0,0);try{K=ie.getBBox()}catch(Oe){K={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(O)return new rt(K);var Pe=this.getTransformToElement(U||pe);return y.transformRect(K,Pe)},H.getBBox=function(O){var K,U={},ie=this.node;if(!ie.ownerSVGElement||!y.isSVGGraphicsElement(ie))return new rt(0,0,0,0);if(O&&(O.target&&(U.target=y.toNode(O.target)),O.recursive&&(U.recursive=O.recursive)),U.recursive){var Oe=this.children(),ze=Oe.length;if(0===ze)return this.getBBox({target:U.target,recursive:!1});U.target||(U.target=this);for(var tt=0;tt<ze;tt++){var ot,Je=Oe[tt];ot=0===Je.children().length?Je.getBBox({target:U.target,recursive:!1}):Je.getBBox({target:U.target,recursive:!0}),K=K?K.union(ot):ot}return K}try{K=ie.getBBox()}catch(ht){K={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(U.target){var Pe=this.getTransformToElement(U.target);return y.transformRect(K,Pe)}return new rt(K)};var ye=/em$/;function xe(O,U){var K=parseFloat(O);return ye.test(O)?K*U:K}H.text=function(O,U){if(O&&"string"!=typeof O)throw new Error("Vectorizer: text() expects the first argument to be a string.");O=y.sanitizeText(O),U||(U={});var K=U.displayEmpty,ie=U.eol,pe=U.textPath,Pe=U.textVerticalAnchor,Oe="middle"===Pe||"bottom"===Pe||"top"===Pe,ze=U.x;void 0===ze&&(ze=this.attr("x")||0);var tt=U.includeAnnotationIndices,Je=U.annotations;Je&&!y.isArray(Je)&&(Je=[Je]);var ot=U.lineHeight,ht="auto"===ot,pt=ht?"1.5em":ot||"1em";this.empty(),this.attr({"xml:space":"preserve",display:O||K?null:"none"});var Pt=parseFloat(this.attr("font-size"));Pt||(Pt=16,(Oe||Je)&&this.attr("font-size",Pt));var Sn,kn=document;pe?("string"==typeof pe&&(pe={d:pe}),Sn=function J(O,U){O||(O={});var K=y("textPath"),ie=O.d;if(ie&&void 0===O["xlink:href"]){var pe=y("path").attr("d",ie).appendTo(U.defs());K.attr("xlink:href","#"+pe.id)}return y.isObject(O)&&K.attr(O),K.node}(pe,this)):Sn=kn.createDocumentFragment();for(var Dt,Bn=0,kt=O.split("\n"),$t=[],Ft=0,pn=kt.length-1;Ft<=pn;Ft++){var _n,Ln=pt,Rn="v-line",fn=kn.createElementNS(n.svg,"tspan"),or=kt[Ft];if(or)if(Je){var vn=(_n=ne(fn,y.annotateString(or,Je,{offset:-Bn,includeAnnotationIndices:tt}),{includeAnnotationIndices:tt,eol:Ft!==pn&&ie,lineHeight:ht?null:pt,baseSize:Pt})).lineHeight;vn&&ht&&0!==Ft&&(Ln=vn),0===Ft&&(Dt=.8*_n.maxFontSize)}else ie&&Ft!==pn&&(or+=ie),fn.textContent=or;else{fn.textContent="-",Rn+=" v-empty-line";var Nt=fn.style;Nt.fillOpacity=0,Nt.strokeOpacity=0,Je&&(_n={})}_n&&$t.push(_n),Ft>0&&fn.setAttribute("dy",Ln),(Ft>0||pe)&&fn.setAttribute("x",ze),fn.className.baseVal=Rn,Sn.appendChild(fn),Bn+=or.length+1}if(Oe)if(Je)Ln=function Ae(O,U,K,ie){if(!Array.isArray(U))return 0;var pe=U.length;if(!pe)return 0;for(var Pe=U[0],Oe=xe(Pe.maxFontSize,K)||K,ze=0,tt=xe(ie,K),Je=1;Je<pe;Je++)ze+=xe((Pe=U[Je]).lineHeight,K)||tt;var pt,ht=xe(Pe.maxFontSize,K)||K;switch(O){case"middle":pt=Oe/2-.15*ht-ze/2;break;case"bottom":pt=-.25*ht-ze;break;default:pt=.8*Oe}return pt}(Pe,$t,Pt,pt);else if("top"===Pe)Ln="0.8em";else{var gt;switch(pn>0?(gt=parseFloat(pt)||1,gt*=pn,ye.test(pt)||(gt/=Pt)):gt=0,Pe){case"middle":Ln=.3-gt/2+"em";break;case"bottom":Ln=-gt-.3+"em"}}else 0===Pe?Ln="0em":Pe?Ln=Pe:(Ln=0,null===this.attr("y")&&this.attr("y",Dt||"0.8em"));return Sn.firstChild.setAttribute("dy",Ln),this.append(Sn),this},H.removeAttr=function(O){var U=y.qualifyAttr(O),K=this.node;return U.ns?K.hasAttributeNS(U.ns,U.local)&&K.removeAttributeNS(U.ns,U.local):K.hasAttribute(O)&&K.removeAttribute(O),this},H.attr=function(O,U){if(y.isUndefined(O)){for(var K=this.node.attributes,ie={},pe=0;pe<K.length;pe++)ie[K[pe].name]=K[pe].value;return ie}if(y.isString(O)&&y.isUndefined(U))return this.node.getAttribute(O);if("object"==typeof O)for(var Pe in O)O.hasOwnProperty(Pe)&&this.setAttribute(Pe,O[Pe]);else this.setAttribute(O,U);return this},H.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",y.normalizePathData(this.attr("d"))),this},H.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},H.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},H.setAttributes=function(O){for(var U in O)O.hasOwnProperty(U)&&this.setAttribute(U,O[U]);return this},H.append=function(O){y.isArray(O)||(O=[O]);for(var U=0,K=O.length;U<K;U++)this.node.appendChild(y.toNode(O[U]));return this},H.prepend=function(O){var U=this.node.firstChild;return U?y(U).before(O):this.append(O)},H.before=function(O){var U=this.node,K=U.parentNode;if(K){y.isArray(O)||(O=[O]);for(var ie=0,pe=O.length;ie<pe;ie++)K.insertBefore(y.toNode(O[ie]),U)}return this},H.appendTo=function(O){return y.toNode(O).appendChild(this.node),this},H.svg=function(){return this.node instanceof window.SVGSVGElement?this:y(this.node.ownerSVGElement)},H.tagName=function(){return this.node.tagName.toUpperCase()},H.defs=function(){var O=this.svg()||this,U=O.node.getElementsByTagName("defs")[0];return U?y(U):y("defs").appendTo(O)},H.clone=function(){var O=y(this.node.cloneNode(!0));return O.node.id=y.uniqueId(),O},H.findOne=function(O){var U=this.node.querySelector(O);return U?y(U):void 0},H.find=function(O){var U=[],K=this.node.querySelectorAll(O);if(K)for(var ie=0;ie<K.length;ie++)U.push(y(K[ie]));return U},H.children=function(){for(var O=this.node.childNodes,U=[],K=0;K<O.length;K++)1===O[K].nodeType&&U.push(y(O[K]));return U},H.parent=function(){return y(this.node.parentNode)||null},H.index=function(){for(var O=0,U=this.node.previousSibling;U;)1===U.nodeType&&O++,U=U.previousSibling;return O},H.findParentByClass=function(O,U){for(var K=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==U&&ie!==K;){var pe=y(ie);if(pe.hasClass(O))return pe;ie=ie.parentNode}return null},H.contains=function(O){var U=this.node,K=y.toNode(O),ie=K&&K.parentNode;return U===ie||!!(ie&&1===ie.nodeType&&16&U.compareDocumentPosition(ie))},H.toLocalPoint=function(O,U){var K=this.svg().node,ie=K.createSVGPoint();ie.x=O,ie.y=U;try{var pe=ie.matrixTransform(K.getScreenCTM().inverse()),Pe=this.getTransformToElement(K).inverse()}catch(Oe){return ie}return pe.matrixTransform(Pe)},H.translateCenterToPoint=function(O){var K=this.getBBox({target:this.svg()}).center();return this.translate(O.x-K.x,O.y-K.y),this},H.translateAndAutoOrient=function(O,U,K){O=new ve(O),U=new ve(U),K||(K=this.svg());var ie=this.scale();this.attr("transform","");var pe=this.getBBox({target:K}).scale(ie.sx,ie.sy),Pe=y.createSVGTransform();Pe.setTranslate(-pe.x-pe.width/2,-pe.y-pe.height/2);var Oe=y.createSVGTransform(),ze=O.angleBetween(U,O.clone().offset(1,0));ze&&Oe.setRotate(ze,0,0);var tt=y.createSVGTransform(),Je=O.clone().move(U,pe.width/2);tt.setTranslate(2*O.x-Je.x,2*O.y-Je.y);var ot=this.getTransformToElement(K),ht=y.createSVGTransform();return ht.setMatrix(tt.matrix.multiply(Oe.matrix.multiply(Pe.matrix.multiply(ot.scale(ie.sx,ie.sy))))),this.attr("transform",y.matrixToTransformString(ht.matrix)),this},H.animateAlongPath=function(O,U){U=y.toNode(U);var K=y.ensureId(U),ie=y("animateMotion",O),pe=y("mpath",{"xlink:href":"#"+K});ie.append(pe),this.append(ie);try{ie.node.beginElement()}catch(pt){if("fake"===document.documentElement.getAttribute("smiling")){var Pe=ie.node;Pe.animators=[];var Oe=Pe.getAttribute("id");Oe&&(id2anim[Oe]=Pe);for(var ze=getTargets(Pe),tt=0,Je=ze.length;tt<Je;tt++){var ht=new Animator(Pe,ze[tt],tt);animators.push(ht),Pe.animators[tt]=ht,ht.register()}}}return this},H.hasClass=function(O){return new RegExp("(\\s|^)"+O+"(\\s|$)").test(this.node.getAttribute("class"))},H.addClass=function(O){if(O&&!this.hasClass(O)){var U=this.node.getAttribute("class")||"";this.node.setAttribute("class",(U+" "+O).trim())}return this},H.removeClass=function(O){if(O&&this.hasClass(O)){var U=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+O+"(\\s|$)","g"),"$2");this.node.setAttribute("class",U)}return this},H.toggleClass=function(O,U){return(y.isUndefined(U)?this.hasClass(O):!U)?this.removeClass(O):this.addClass(O),this},H.sample=function(O){O=O||1;for(var Pe,U=this.node,K=U.getTotalLength(),ie=[],pe=0;pe<K;)Pe=U.getPointAtLength(pe),ie.push({x:Pe.x,y:Pe.y,distance:pe}),pe+=O;return ie},H.convertToPath=function(){var O=y("path");O.attr(this.attr());var U=this.convertToPathData();return U&&O.attr("d",U),O},H.convertToPathData=function(){var O=this.tagName();switch(O){case"PATH":return this.attr("d");case"LINE":return y.convertLineToPathData(this.node);case"POLYGON":return y.convertPolygonToPathData(this.node);case"POLYLINE":return y.convertPolylineToPathData(this.node);case"ELLIPSE":return y.convertEllipseToPathData(this.node);case"CIRCLE":return y.convertCircleToPathData(this.node);case"RECT":return y.convertRectToPathData(this.node)}throw new Error(O+" cannot be converted to PATH.")},y.prototype.toGeometryShape=function(){var O,U,K,ie,pe,Pe,Oe,ze,tt,Je,ot,ht,pt,Pt,kn;switch(this.tagName()){case"RECT":return O=parseFloat(this.attr("x"))||0,U=parseFloat(this.attr("y"))||0,K=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new rt(O,U,K,ie);case"CIRCLE":return pe=parseFloat(this.attr("cx"))||0,Pe=parseFloat(this.attr("cy"))||0,Oe=parseFloat(this.attr("r"))||0,new Zn({x:pe,y:Pe},Oe,Oe);case"ELLIPSE":return pe=parseFloat(this.attr("cx"))||0,Pe=parseFloat(this.attr("cy"))||0,ze=parseFloat(this.attr("rx"))||0,tt=parseFloat(this.attr("ry"))||0,new Zn({x:pe,y:Pe},ze,tt);case"POLYLINE":return Je=y.getPointsFromSvgNode(this),new ln(Je);case"POLYGON":return(Je=y.getPointsFromSvgNode(this)).length>1&&Je.push(Je[0]),new ln(Je);case"PATH":return ot=this.attr("d"),Ct.isDataSupported(ot)||(ot=y.normalizePathData(ot)),new Ct(ot);case"LINE":return ht=parseFloat(this.attr("x1"))||0,Pt=parseFloat(this.attr("y1"))||0,pt=parseFloat(this.attr("x2"))||0,kn=parseFloat(this.attr("y2"))||0,new ft({x:ht,y:Pt},{x:pt,y:kn})}return this.getBBox()},H.findIntersection=function(O,U){var K=this.svg().node,ie=this.getBBox({target:U=U||K}),pe=ie.center();if(ie.intersectionWithLineFromCenterToPoint(O)){var Pe,Oe=this.tagName();if("RECT"===Oe){var ze=new rt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),tt=this.getTransformToElement(U),Je=y.decomposeMatrix(tt),ot=K.createSVGTransform();ot.setRotate(-Je.rotation,pe.x,pe.y);var ht=y.transformRect(ze,ot.matrix.multiply(tt));Pe=new rt(ht).intersectionWithLineFromCenterToPoint(O,Je.rotation)}else if("PATH"===Oe||"POLYGON"===Oe||"POLYLINE"===Oe||"CIRCLE"===Oe||"ELLIPSE"===Oe){var Bn,kt,$t,Ft,pn,Pt=("PATH"===Oe?this:this.convertToPath()).sample(),kn=1/0,Sn=[];for(Bn=0;Bn<Pt.length;Bn++)$t=($t=y.createSVGPoint((kt=Pt[Bn]).x,kt.y)).matrixTransform(this.getTransformToElement(U)),(pn=(kt=new ve($t)).distance(pe)+(Ft=1.1*kt.distance(O)))<kn?(kn=pn,Sn=[{sample:kt,refDistance:Ft}]):pn<kn+1&&Sn.push({sample:kt,refDistance:Ft});Sn.sort(function(Ln,Rn){return Ln.refDistance-Rn.refDistance}),Sn[0]&&(Pe=Sn[0].sample)}return Pe}},H.setAttribute=function(O,U){var K=this.node;if(null===U)return this.removeAttr(O),this;var ie=y.qualifyAttr(O);return ie.ns?K.setAttributeNS(ie.ns,O,U):"id"===O?K.id=U:K.setAttribute(O,U),this},y.createSvgDocument=function(O){if(O){const K=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${O}</svg>`,{documentElement:ie}=y.parseXML(K,{async:!1});return ie}const U=document.createElementNS(n.svg,"svg");return U.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),U.setAttribute("version","1.1"),U},y.createSVGStyle=function(O){const{node:U}=y("style",{type:"text/css"},[y.createCDATASection(O)]);return U},y.createCDATASection=function(O=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(O)},y.idCounter=0,y.uniqueId=function(){return"v-"+ ++y.idCounter},y.toNode=function(O){return y.isV(O)?O.node:O.nodeName&&O||O[0]},y.ensureId=function(O){return(O=y.toNode(O)).id||(O.id=y.uniqueId())},y.sanitizeText=function(O){return(O||"").replace(/ /g,"\xa0")},y.isUndefined=function(O){return void 0===O},y.isString=function(O){return"string"==typeof O},y.isObject=function(O){return O&&"object"==typeof O},y.isArray=Array.isArray,y.parseXML=function(O,U){var K;U=U||{};try{var ie=new DOMParser;y.isUndefined(U.async)||(ie.async=U.async),K=ie.parseFromString(O,"text/xml")}catch(pe){K=void 0}if(!K||K.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+O);return K},y.qualifyAttr=function(O){if(-1!==O.indexOf(":")){var U=O.split(":");return{ns:n[U[0]],local:U[1]}}return{ns:null,local:O}},y.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,y.transformSeparatorRegex=/[ ,]+/,y.transformationListRegex=/^(\w+)\((.*)\)/,y.transformStringToMatrix=function(O){var U=y.createSVGMatrix(),K=O&&O.match(y.transformRegex);if(!K)return U;for(var ie=0,pe=K.length;ie<pe;ie++){var Oe=K[ie].match(y.transformationListRegex);if(Oe){var ze,tt,Je,ot,ht,pt=y.createSVGMatrix(),Pt=Oe[2].split(y.transformSeparatorRegex);switch(Oe[1].toLowerCase()){case"scale":ze=parseFloat(Pt[0]),tt=void 0===Pt[1]?ze:parseFloat(Pt[1]),pt=pt.scaleNonUniform(ze,tt);break;case"translate":Je=parseFloat(Pt[0]),ot=parseFloat(Pt[1]),pt=pt.translate(Je,ot);break;case"rotate":ht=parseFloat(Pt[0]),Je=parseFloat(Pt[1])||0,ot=parseFloat(Pt[2])||0,pt=0!==Je||0!==ot?pt.translate(Je,ot).rotate(ht).translate(-Je,-ot):pt.rotate(ht);break;case"skewx":ht=parseFloat(Pt[0]),pt=pt.skewX(ht);break;case"skewy":ht=parseFloat(Pt[0]),pt=pt.skewY(ht);break;case"matrix":pt.a=parseFloat(Pt[0]),pt.b=parseFloat(Pt[1]),pt.c=parseFloat(Pt[2]),pt.d=parseFloat(Pt[3]),pt.e=parseFloat(Pt[4]),pt.f=parseFloat(Pt[5]);break;default:continue}U=U.multiply(pt)}}return U},y.matrixToTransformString=function(O){return O||(O=!0),"matrix("+(void 0!==O.a?O.a:1)+","+(void 0!==O.b?O.b:0)+","+(void 0!==O.c?O.c:0)+","+(void 0!==O.d?O.d:1)+","+(void 0!==O.e?O.e:0)+","+(void 0!==O.f?O.f:0)+")"},y.parseTransformString=function(O){var U,K,ie;if(O){var pe=y.transformSeparatorRegex;if(O.trim().indexOf("matrix")>=0){var Pe=y.transformStringToMatrix(O),Oe=y.decomposeMatrix(Pe);ie=[Oe.scaleX,Oe.scaleY],K=[Oe.rotation];var ze=[];(0!==(U=[Oe.translateX,Oe.translateY])[0]||0!==U[1])&&ze.push("translate("+U+")"),(1!==ie[0]||1!==ie[1])&&ze.push("scale("+ie+")"),0!==K[0]&&ze.push("rotate("+K+")"),O=ze.join(" ")}else{var tt=O.match(/translate\((.*?)\)/);tt&&(U=tt[1].split(pe));var Je=O.match(/rotate\((.*?)\)/);Je&&(K=Je[1].split(pe));var ot=O.match(/scale\((.*?)\)/);ot&&(ie=ot[1].split(pe))}}var ht=ie&&ie[0]?parseFloat(ie[0]):1;return{value:O,translate:{tx:U&&U[0]?parseInt(U[0],10):0,ty:U&&U[1]?parseInt(U[1],10):0},rotate:{angle:K&&K[0]?parseInt(K[0],10):0,cx:K&&K[1]?parseInt(K[1],10):void 0,cy:K&&K[2]?parseInt(K[2],10):void 0},scale:{sx:ht,sy:ie&&ie[1]?parseFloat(ie[1]):ht}}},y.deltaTransformPoint=function(O,U){return{x:U.x*O.a+U.y*O.c+0,y:U.x*O.b+U.y*O.d+0}},y.decomposeMatrix=function(O){var U=y.deltaTransformPoint(O,{x:0,y:1}),K=y.deltaTransformPoint(O,{x:1,y:0}),ie=180/o*s(U.y,U.x)-90,pe=180/o*s(K.y,K.x);return{translateX:O.e,translateY:O.f,scaleX:c(O.a*O.a+O.b*O.b),scaleY:c(O.c*O.c+O.d*O.d),skewX:ie,skewY:pe,rotation:ie}},y.matrixToScale=function(O){var U,K,ie,pe;return O?(U=y.isUndefined(O.a)?1:O.a,pe=y.isUndefined(O.d)?1:O.d,K=O.b,ie=O.c):U=pe=1,{sx:K?c(U*U+K*K):U,sy:ie?c(ie*ie+pe*pe):pe}},y.matrixToRotate=function(O){var U={x:0,y:1};return O&&(U=y.deltaTransformPoint(O,U)),{angle:Dn(no(s(U.y,U.x))-90)}},y.matrixToTranslate=function(O){return{tx:O&&O.e||0,ty:O&&O.f||0}},y.isV=function(O){return O instanceof y},y.isVElement=y.isV,y.isSVGGraphicsElement=function(O){return!!O&&(O=y.toNode(O))instanceof SVGElement&&"function"==typeof O.getScreenCTM};var Me=y("svg").node;return y.createSVGMatrix=function(O){var U=Me.createSVGMatrix();for(var K in O)U[K]=O[K];return U},y.createSVGTransform=function(O){return y.isUndefined(O)?Me.createSVGTransform():(O instanceof SVGMatrix||(O=y.createSVGMatrix(O)),Me.createSVGTransformFromMatrix(O))},y.createSVGPoint=function(O,U){var K=Me.createSVGPoint();return K.x=O,K.y=U,K},y.transformRect=function(O,U){var K=Me.createSVGPoint();K.x=O.x,K.y=O.y;var ie=K.matrixTransform(U);K.x=O.x+O.width,K.y=O.y;var pe=K.matrixTransform(U);K.x=O.x+O.width,K.y=O.y+O.height;var Pe=K.matrixTransform(U);K.x=O.x,K.y=O.y+O.height;var Oe=K.matrixTransform(U),ze=h(ie.x,pe.x,Pe.x,Oe.x),tt=m(ie.x,pe.x,Pe.x,Oe.x),Je=h(ie.y,pe.y,Pe.y,Oe.y),ot=m(ie.y,pe.y,Pe.y,Oe.y);return new rt(ze,Je,tt-ze,ot-Je)},y.transformPoint=function(O,U){return new ve(y.createSVGPoint(O.x,O.y).matrixTransform(U))},y.transformLine=function(O,U){return new ft(y.transformPoint(O.start,U),y.transformPoint(O.end,U))},y.transformPolyline=function(O,U){var K=O instanceof ln?O.points:O;y.isArray(K)||(K=[]);for(var ie=[],pe=0,Pe=K.length;pe<Pe;pe++)ie[pe]=y.transformPoint(K[pe],U);return new ln(ie)},y.styleToObject=function(O){for(var U={},K=O.split(";"),ie=0;ie<K.length;ie++){var Pe=K[ie].split("=");U[Pe[0].trim()]=Pe[1].trim()}return U},y.createSlicePathData=function(O,U,K,ie){var pe=2*o-1e-6,Pe=O,Oe=U,ze=K,tt=ie,Je=(tt<ze&&(Je=ze,ze=tt,tt=Je),tt-ze),ot=Je<o?"0":"1",ht=_(ze),pt=S(ze),Pt=_(tt),kn=S(tt);return Je>=pe?Pe?"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+Oe+"M0,"+Pe+"A"+Pe+","+Pe+" 0 1,0 0,"+-Pe+"A"+Pe+","+Pe+" 0 1,0 0,"+Pe+"Z":"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+Oe+"Z":Pe?"M"+Oe*ht+","+Oe*pt+"A"+Oe+","+Oe+" 0 "+ot+",1 "+Oe*Pt+","+Oe*kn+"L"+Pe*Pt+","+Pe*kn+"A"+Pe+","+Pe+" 0 "+ot+",0 "+Pe*ht+","+Pe*pt+"Z":"M"+Oe*ht+","+Oe*pt+"A"+Oe+","+Oe+" 0 "+ot+",1 "+Oe*Pt+","+Oe*kn+"L0,0Z"},y.mergeAttrs=function(O,U){for(var K in U)O[K]="class"===K?O[K]?O[K]+" "+U[K]:U[K]:"style"===K?y.isObject(O[K])&&y.isObject(U[K])?y.mergeAttrs(O[K],U[K]):y.isObject(O[K])?y.mergeAttrs(O[K],y.styleToObject(U[K])):y.isObject(U[K])?y.mergeAttrs(y.styleToObject(O[K]),U[K]):y.mergeAttrs(y.styleToObject(O[K]),y.styleToObject(U[K])):U[K];return O},y.annotateString=function(O,U,K){U=U||[];for(var Pe,ze,tt,ie=(K=K||{}).offset||0,pe=[],Oe=[],Je=0;Je<O.length;Je++){ze=Oe[Je]=O[Je];for(var ot=0;ot<U.length;ot++){var ht=U[ot];Je>=ht.start+ie&&Je<ht.end+ie&&(y.isObject(ze)?ze.attrs=y.mergeAttrs(y.mergeAttrs({},ze.attrs),ht.attrs):ze=Oe[Je]={t:O[Je],attrs:ht.attrs},K.includeAnnotationIndices&&(ze.annotations||(ze.annotations=[])).push(ot))}(tt=Oe[Je-1])?y.isObject(ze)&&y.isObject(tt)?JSON.stringify(ze.attrs)===JSON.stringify(tt.attrs)?Pe.t+=ze.t:(pe.push(Pe),Pe=ze):y.isObject(ze)||y.isObject(tt)?(pe.push(Pe),Pe=ze):Pe=(Pe||"")+ze:Pe=ze}return Pe&&pe.push(Pe),pe},y.findAnnotationsAtIndex=function(O,U){var K=[];return O&&O.forEach(function(ie){ie.start<U&&U<=ie.end&&K.push(ie)}),K},y.findAnnotationsBetweenIndexes=function(O,U,K){var ie=[];return O&&O.forEach(function(pe){(U>=pe.start&&U<pe.end||K>pe.start&&K<=pe.end||pe.start>=U&&pe.end<K)&&ie.push(pe)}),ie},y.shiftAnnotations=function(O,U,K){return O&&O.forEach(function(ie){ie.start<U&&ie.end>=U?ie.end+=K:ie.start>=U&&(ie.start+=K,ie.end+=K)}),O},y.convertLineToPathData=function(O){return["M",(O=y(O)).attr("x1"),O.attr("y1"),"L",O.attr("x2"),O.attr("y2")].join(" ")},y.convertPolygonToPathData=function(O){var U=y.getPointsFromSvgNode(O);return 0===U.length?null:y.svgPointsToPath(U)+" Z"},y.convertPolylineToPathData=function(O){var U=y.getPointsFromSvgNode(O);return 0===U.length?null:y.svgPointsToPath(U)},y.svgPointsToPath=function(O){for(var U=0,K=O.length;U<K;U++)O[U]=O[U].x+" "+O[U].y;return"M "+O.join(" L")},y.getPointsFromSvgNode=function(O){var U=[],K=(O=y.toNode(O)).points;if(K)for(var ie=0,pe=K.numberOfItems;ie<pe;ie++)U.push(K.getItem(ie));return U},y.KAPPA=.551784,y.convertCircleToPathData=function(O){O=y(O);var U=parseFloat(O.attr("cx"))||0,K=parseFloat(O.attr("cy"))||0,ie=parseFloat(O.attr("r")),pe=ie*y.KAPPA;return["M",U,K-ie,"C",U+pe,K-ie,U+ie,K-pe,U+ie,K,"C",U+ie,K+pe,U+pe,K+ie,U,K+ie,"C",U-pe,K+ie,U-ie,K+pe,U-ie,K,"C",U-ie,K-pe,U-pe,K-ie,U,K-ie,"Z"].join(" ")},y.convertEllipseToPathData=function(O){O=y(O);var U=parseFloat(O.attr("cx"))||0,K=parseFloat(O.attr("cy"))||0,ie=parseFloat(O.attr("rx")),pe=parseFloat(O.attr("ry"))||ie,Pe=ie*y.KAPPA,Oe=pe*y.KAPPA;return["M",U,K-pe,"C",U+Pe,K-pe,U+ie,K-Oe,U+ie,K,"C",U+ie,K+Oe,U+Pe,K+pe,U,K+pe,"C",U-Pe,K+pe,U-ie,K+Oe,U-ie,K,"C",U-ie,K-Oe,U-Pe,K-pe,U,K-pe,"Z"].join(" ")},y.convertRectToPathData=function(O){return O=y(O),y.rectToPath({x:parseFloat(O.attr("x"))||0,y:parseFloat(O.attr("y"))||0,width:parseFloat(O.attr("width"))||0,height:parseFloat(O.attr("height"))||0,rx:parseFloat(O.attr("rx"))||0,ry:parseFloat(O.attr("ry"))||0})},y.rectToPath=function(O){var K=O.x,ie=O.y,pe=O.width,Pe=O.height,Oe=h(O.rx||O["top-rx"]||0,pe/2),ze=h(O.rx||O["bottom-rx"]||0,pe/2),tt=h(O.ry||O["top-ry"]||0,Pe/2),Je=h(O.ry||O["bottom-ry"]||0,Pe/2);return(Oe||ze||tt||Je?["M",K,ie+tt,"v",Pe-tt-Je,"a",ze,Je,0,0,0,ze,Je,"h",pe-2*ze,"a",ze,Je,0,0,0,ze,-Je,"v",-(Pe-Je-tt),"a",Oe,tt,0,0,0,-Oe,-tt,"h",-(pe-2*Oe),"a",Oe,tt,0,0,0,-Oe,tt,"Z"]:["M",K,ie,"H",K+pe,"V",ie+Pe,"H",K,"V",ie,"Z"]).join(" ")},y.normalizePathData=function(){var O="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",U=new RegExp("([a-z])["+O+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+O+"]*,?["+O+"]*)+)","ig"),K=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+O+"]*,?["+O+"]*","ig"),ie=Math,pe=ie.PI,Pe=ie.sin,Oe=ie.cos,ze=ie.tan,tt=ie.asin,Je=ie.sqrt,ot=ie.abs;function ht(kt,$t,Dt,Ft,pn,Ln){var Rn=.3333333333333333,fn=2/3;return[Rn*kt+fn*Dt,Rn*$t+fn*Ft,Rn*pn+fn*Dt,Rn*Ln+fn*Ft,pn,Ln]}function pt(kt,$t,Dt){return{x:kt*Oe(Dt)-$t*Pe(Dt),y:kt*Pe(Dt)+$t*Oe(Dt)}}function Pt(kt,$t,Dt,Ft,pn,Ln,Rn,fn,or,_n){var gt,qt=120*pe/180,vn=pe/180*(+pn||0),Nt=[];if(_n)Jr=_n[0],br=_n[1],Xl=_n[2],Kl=_n[3];else{$t=(gt=pt(kt,$t,-vn)).y;var Qr=((kt=gt.x)-(fn=(gt=pt(fn,or,-vn)).x))/2,fi=($t-(or=gt.y))/2,La=Qr*Qr/(Dt*Dt)+fi*fi/(Ft*Ft);La>1&&(Dt*=La=Je(La),Ft*=La);var xg=Dt*Dt,bg=Ft*Ft,$g=(Ln==Rn?-1:1)*Je(ot((xg*bg-xg*fi*fi-bg*Qr*Qr)/(xg*fi*fi+bg*Qr*Qr))),Xl=$g*Dt*fi/Ft+(kt+fn)/2,Kl=$g*-Ft*Qr/Dt+($t+or)/2,Jr=tt((($t-Kl)/Ft).toFixed(9)),br=tt(((or-Kl)/Ft).toFixed(9));(Jr=kt<Xl?pe-Jr:Jr)<0&&(Jr=2*pe+Jr),(br=fn<Xl?pe-br:br)<0&&(br=2*pe+br),Rn&&Jr>br&&(Jr-=2*pe),!Rn&&br>Jr&&(br-=2*pe)}var _g=br-Jr;if(ot(_g)>qt){var ev=br,tv=fn,nv=or;Nt=Pt(fn=Xl+Dt*Oe(br=Jr+qt*(Rn&&br>Jr?1:-1)),or=Kl+Ft*Pe(br),Dt,Ft,pn,0,Rn,tv,nv,[br,ev,Xl,Kl])}_g=br-Jr;var rv=Oe(Jr),iv=Pe(Jr),ov=Oe(br),av=Pe(br),Yg=ze(_g/4),Xg=4/3*(Dt*Yg),Kg=4/3*(Ft*Yg),Qg=[kt,$t],Fu=[kt+Xg*iv,$t-Kg*rv],Jg=[fn+Xg*av,or-Kg*ov],Zg=[fn,or];if(Fu[0]=2*Qg[0]-Fu[0],Fu[1]=2*Qg[1]-Fu[1],_n)return[Fu,Jg,Zg].concat(Nt);for(var qg=[],sv=(Nt=[Fu,Jg,Zg].concat(Nt).join().split(",")).length,ws=0;ws<sv;ws++)qg[ws]=ws%2?pt(Nt[ws-1],Nt[ws],vn).y:pt(Nt[ws],Nt[ws+1],vn).x;return qg}function Bn(kt){var $t=function Sn(kt){if((!Array.isArray(kt)||!Array.isArray(kt&&kt[0]))&&(kt=function kn(kt){if(!kt)return null;var $t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Dt=[];return String(kt).replace(U,function(Ft,pn,Ln){var Rn=[],fn=pn.toLowerCase();for(Ln.replace(K,function(or,_n){_n&&Rn.push(+_n)}),"m"===fn&&Rn.length>2&&(Dt.push([pn].concat(Rn.splice(0,2))),fn="l",pn="m"===pn?"l":"L");Rn.length>=$t[fn]&&(Dt.push([pn].concat(Rn.splice(0,$t[fn]))),$t[fn]););}),Dt}(kt)),!kt||!kt.length)return[["M",0,0]];for(var fn,$t=[],Dt=0,Ft=0,pn=0,Ln=0,or=kt.length,_n=0;_n<or;_n++){var qt=[];$t.push(qt);var Nt,gt,vn=kt[_n];if((fn=vn[0])!=fn.toUpperCase())switch(qt[0]=fn.toUpperCase(),qt[0]){case"A":qt[1]=vn[1],qt[2]=vn[2],qt[3]=vn[3],qt[4]=vn[4],qt[5]=vn[5],qt[6]=+vn[6]+Dt,qt[7]=+vn[7]+Ft;break;case"V":qt[1]=+vn[1]+Ft;break;case"H":qt[1]=+vn[1]+Dt;break;case"M":for(pn=+vn[1]+Dt,Ln=+vn[2]+Ft,Nt=vn.length,gt=1;gt<Nt;gt++)qt[gt]=+vn[gt]+(gt%2?Dt:Ft);break;default:for(Nt=vn.length,gt=1;gt<Nt;gt++)qt[gt]=+vn[gt]+(gt%2?Dt:Ft)}else for(var Qr=vn.length,fi=0;fi<Qr;fi++)qt[fi]=vn[fi];switch(qt[0]){case"Z":Dt=+pn,Ft=+Ln;break;case"H":Dt=qt[1];break;case"V":Ft=qt[1];break;case"M":pn=qt[qt.length-2],Ln=qt[qt.length-1],Dt=qt[qt.length-2],Ft=qt[qt.length-1];break;default:Dt=qt[qt.length-2],Ft=qt[qt.length-1]}}return $t}(kt),Dt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Ft(Nt,gt,Qr){var fi,La;if(!Nt)return["C",gt.x,gt.y,gt.x,gt.y,gt.x,gt.y];switch(Nt[0]in{T:1,Q:1}||(gt.qx=null,gt.qy=null),Nt[0]){case"M":gt.X=Nt[1],gt.Y=Nt[2];break;case"A":Nt=0===parseFloat(Nt[1])||0===parseFloat(Nt[2])?["L",Nt[6],Nt[7]]:["C"].concat(Pt.apply(0,[gt.x,gt.y].concat(Nt.slice(1))));break;case"S":"C"===Qr||"S"===Qr?(fi=2*gt.x-gt.bx,La=2*gt.y-gt.by):(fi=gt.x,La=gt.y),Nt=["C",fi,La].concat(Nt.slice(1));break;case"T":"Q"===Qr||"T"===Qr?(gt.qx=2*gt.x-gt.qx,gt.qy=2*gt.y-gt.qy):(gt.qx=gt.x,gt.qy=gt.y),Nt=["C"].concat(ht(gt.x,gt.y,gt.qx,gt.qy,Nt[1],Nt[2]));break;case"Q":gt.qx=Nt[1],gt.qy=Nt[2],Nt=["C"].concat(ht(gt.x,gt.y,Nt[1],Nt[2],Nt[3],Nt[4]));break;case"H":Nt=["L"].concat(Nt[1],gt.y);break;case"V":Nt=["L"].concat(gt.x,Nt[1])}return Nt}function pn(Nt,gt){if(Nt[gt].length>7){Nt[gt].shift();for(var Qr=Nt[gt];Qr.length;)Ln[gt]="A",Nt.splice(gt++,0,["C"].concat(Qr.splice(0,6)));Nt.splice(gt,1),or=$t.length}}for(var Ln=[],Rn="",fn="",or=$t.length,_n=0;_n<or;_n++){$t[_n]&&(Rn=$t[_n][0]),"C"!==Rn&&(Ln[_n]=Rn,_n>0&&(fn=Ln[_n-1])),$t[_n]=Ft($t[_n],Dt,fn),"A"!==Ln[_n]&&"C"===Rn&&(Ln[_n]="C"),pn($t,_n);var qt=$t[_n],vn=qt.length;Dt.x=qt[vn-2],Dt.y=qt[vn-1],Dt.bx=parseFloat(qt[vn-4])||Dt.x,Dt.by=parseFloat(qt[vn-3])||Dt.y}return(!$t[0][0]||"M"!==$t[0][0])&&$t.unshift(["M",0,0]),$t}return function(kt){return Bn(kt).join(",").split(",").join(" ")}}(),y.namespace=n,y.g=v,y}(),wr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Fr=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,wr.classNamePrefix.length)!==wr.classNamePrefix&&(n=wr.classNamePrefix+n),n}).join(" ")},$r=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,wr.classNamePrefix.length)===wr.classNamePrefix&&(n=n.substr(wr.classNamePrefix.length)),n}).join(" ")},mi=function(e,n){for(var t={},r={},o=Re.namespace.svg,s=n||o,c=document.createDocumentFragment(),h=[e,c,s];h.length>0;){s=h.pop();for(var m=h.pop(),_=h.pop(),S=0,y=_.length;S<y;S++){var H=_[S];if(!H.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var J=H.tagName;H.hasOwnProperty("namespaceURI")&&(s=H.namespaceURI);var ne=document.createElementNS(s,J),ye=s===o,xe=ye?Re:sn,Ae=H.attributes;Ae&&xe(ne).attr(Ae);var Me=H.style;if(Me&&sn(ne).css(Me),H.hasOwnProperty("className")){var O=H.className;ye?ne.className.baseVal=O:ne.className=O}if(H.hasOwnProperty("textContent")&&(ne.textContent=H.textContent),H.hasOwnProperty("selector")){var U=H.selector;if(t[U])throw new Error("json-dom-parser: selector must be unique");t[U]=ne,xe(ne).attr("joint-selector",U)}if(H.hasOwnProperty("groupSelector")){var K=H.groupSelector;Array.isArray(K)||(K=[K]);for(var ie=0,pe=K.length;ie<pe;ie++){var Pe=K[ie],Oe=r[Pe];Oe||(Oe=r[Pe]=[]),Oe.push(ne)}}m.appendChild(ne);var ze=H.children;Array.isArray(ze)&&h.push(ze,ne,s)}}return{fragment:c,selectors:t,groupSelectors:r}},Yr=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},$n=function(e,n,t){for(var o,r=Array.isArray(n)?n:n.split(t||"/"),s=0,c=r.length;s<c;){if(o=r[s++],Object(e)!==e||!(o in e))return;e=e[o]}return e},zi=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},Vr=function(e,n,t,r){const o=Array.isArray(n)?n:n.split(r||"/"),s=o.length-1;let c=e,h=0;for(;h<s;h++){const m=o[h];if(!zi(c,m))return e;c=c[m]||(c[m]={})}return c[o[s]]=t,e},Ti=function(e,n,t){const r=Array.isArray(n)?n:n.split(t||"/"),o=r.length-1;let s=e,c=0;for(;c<o;c++){const h=r[c];if(!zi(s,h))return e;const m=s[h];if(!m)return e;s=m}return delete s[r[o]],e},uo=function(e){return uo.id=uo.id||1,e.id=void 0===e.id?"j_"+uo.id++:e.id,e.id},Tn=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Yn=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var r in e)void 0===t[r]&&(t[r]=e[r]);n=t}var o=n.target;if(o){var s=o.correspondingUseElement;s&&(n.target=s)}return n},Jo=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),s=setTimeout(function(){t(r+o)},o);return n=r+o,s}}return function(t,r,...o){return e(void 0!==r?t.bind(r,...o):t)}}(),va=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),On=function(e){return yn(e)&&"%"===e.slice(-1)},Ss=function(e,n){var r=parseFloat(e);if(Number.isNaN(r))return null;var s,o={};if(o.value=r,null==n)s="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;s=n.join("|")}else yn(n)&&(s=n);var c=function t(h){var m=new RegExp("(?:\\d+(?:\\.\\d+)*)("+h+")$").exec(e);return m?m[1]:null}(s);return null===c?null:(o.unit=c,o)},qo=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,r,o,s;return t=r=o=s=0,isFinite(e.vertical)&&(t=o=+e.vertical),isFinite(e.horizontal)&&(r=s=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:t,right:r,bottom:o,left:s}},Ts={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var r=(11-6*n-11*e)/4;return-r*r+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(r){var o=e(r);return o<n?n:o>t?t:o}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},ti={number:function(e,n){var t=n-e;return function(r){return e+t*r}},object:function(e,n){var t=Object.keys(e);return function(r){var o,s,c={};for(o=t.length-1;-1!=o;o--)c[s=t[o]]=e[s]+(n[s]-e[s])*r;return c}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),r=parseInt(n.slice(1),16),o=255&t,s=(255&r)-o,c=65280&t,h=(65280&r)-c,m=16711680&t,_=(16711680&r)-m;return function(S){return"#"+(1<<24|o+s*S&255|c+h*S&65280|m+_*S&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=t.exec(e),o=t.exec(n),s=o[1].indexOf("."),c=s>0?o[1].length-s-1:0,h=+o[1]-(e=+r[1]),m=r[2];return function(_){return(e+h*_).toFixed(c)+m}}},Ei={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return ur('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return ur('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return ur('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ur(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return ur('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return ur('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},ur=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(r){for(var o=Array.from(arguments),s=o.slice(1,4).find(function(m){return!!m}),c=s.split("."),h=t[c.shift()];void 0!==h&&c.length;)h=h[c.shift()];return void 0!==h?h:""})}},wt=zt.assign,Br=zt.defaults,za=zt.defaultsDeep,yi=zt.invokeMap||zt.invoke,Zs=zt.sortedIndexBy||zt.sortedIndex,ma=zt.uniqBy||zt.uniq,lr=zt.clone,be=zt.cloneDeep,Ue=zt.isEmpty,De=zt.isEqual,qe=zt.isFunction,_t=zt.isPlainObject,yt=zt.toArray,An=zt.groupBy,zu=zt.flattenDeep,q=zt.without,ce=zt.difference,We=zt.union,Se=zt.has,He=zt.result,je=zt.omit,at=zt.pick,xt=zt.forIn,Ot=zt.camelCase,Rt=zt.uniqueId,Mt=function(){if(zt.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=qe(n)?n:er;return e.push(function(r,o){var s=t(r,o);return void 0!==s?s:Array.isArray(r)&&!Array.isArray(o)?o:void 0}),zt.mergeWith.apply(this,e)}return zt.merge.apply(this,arguments)},st=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},hn=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},yn=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},er=function(){};var e,n,tn=f(71066);function Mo(e){e=ma(e);const n=yt(e).reduce(function(t,r){return t[r.id]=r.clone(),t},{});return yt(e).forEach(function(t){const r=n[t.id];if(r.isLink()){const c=r.source(),h=r.target();c.id&&n[c.id]&&r.prop("source/id",n[c.id].id),h.id&&n[h.id]&&r.prop("target/id",n[h.id].id)}const o=t.get("parent");o&&n[o]&&r.set("parent",n[o].id);const s=yt(t.get("embeds")).reduce(function(c,h){return n[h]&&c.push(n[h].id),c},[]);Ue(s)||r.set("embeds",s)}),n}const Sr={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Hr=Object.keys(Sr).map(e=>Sr[e]).join(""),Ga="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",ya=/\s/g,Es=new RegExp(`^(${Ga}\\*)?([${Hr}])([-+]{1,2}${Ga})?$`,"g");function ec(e){throw new Error(`Invalid calc() expression: ${e}`)}function zf(e,n){const t=Es.exec(e.replace(ya,""));t||ec(e),Es.lastIndex=0;const[,r=1,o,s=0]=t,{x:c,y:h,width:m,height:_}=n;let S=0;switch(o){case Sr.width:S=m;break;case Sr.height:S=_;break;case Sr.x:S=c;break;case Sr.y:S=h;break;case Sr.minimum:S=Math.min(_,m);break;case Sr.maximum:S=Math.max(_,m);break;case Sr.diagonal:S=Math.sqrt(_*_+m*m)}return parseFloat(r)*S+function Uf(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)}function Wa(e){return"string"==typeof e&&e.includes("calc")}const qs="calc(".length;function Uu(e,n){let t=e,r=0;for(;;){let o=t.indexOf("calc(",r);if(-1===o)return t;let s=o+qs,c=1;e:for(;;){switch(t[s]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:ec(t)}s++}let h=t.slice(o+qs,s);Wa(h)&&(h=Uu(h,n));const m=String(zf(h,n));t=t.slice(0,o)+m+t.slice(s+1),r=o+m.length}}function Oo(e,n){return function(t,r){var o=On(t);t=parseFloat(t),o&&(t/=100);var s={};if(isFinite(t)){var c=o||t>=0&&t<=1?t*r[n]:Math.max(t+r[n],0);s[e]=c}return s}}function eu(e,n,t){return function(r,o){var c,s=On(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var h=o[t]();c=s||r>0&&r<1?h[e]+o[n]*r:h[e]+r}var m=ve();return m[e]=c||0,m}}function tc(e,n,t){return function(r,o){var s;s="middle"===r?o[n]/2:r===t?o[n]:isFinite(r)?r>-1&&r<1?-o[n]*r:-r:On(r)?o[n]*parseFloat(r)/100:0;var c=ve();return c[e]=-(o[e]+s),c}}function gr(e,n){var t="joint-shape",r=n&&n.resetOffset;return function(o,s,c){var h=sn(c),m=h.data(t);if(!m||m.value!==o){var _=e(o);m={value:o,shape:_,shapeBBox:_.bbox()},h.data(t,m)}var S=m.shape.clone(),y=m.shapeBBox.clone(),H=y.origin(),J=s.origin();y.x=J.x,y.y=J.y;var ne=s.maxRectScaleToFit(y,J);return S.scale(0===y.width||0===s.width?1:ne.sx,0===y.height||0===s.height?1:ne.sy,H),r&&S.translate(-H.x,-H.y),S}}function Lr(e){var t=gr(function n(r){return new Ct(Re.normalizePathData(r))},e);return function(r,o,s){return{d:t(r,o,s).serialize()}}}function nc(e){var n=gr(ln,e);return function(t,r,o){return{points:n(t,r,o).serialize()}}}function tu(e,n){var t=new ve(1,0);return function(r){var o,s,c=this[e](r);return c?(s=n.rotate?c.vector().vectorAngle(t):0,o=c.start):(o=this.path.start,s=0),0===s?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+s+")"}}}function Gu(e){return function(t,r,o){const s=Re(o);s.attr(e)!==t&&s.attr(e,t)}}function $a(e,n,t){return void 0!==t.text}function xa(){return this.model.isLink()}function ba(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(n["stroke-opacity"]=r,n["fill-opacity"]=r),n}function nu(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const Kt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Gu("href")},xlinkHref:{set:Gu("xlink:href")},filter:{qualify:_t,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:_t,set:nu},stroke:{qualify:_t,set:nu},sourceMarker:{qualify:_t,set:function(e,n,t,r){return e=wt(ba(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:_t,set:function(e,n,t,r){return e=wt(ba(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:_t,set:function(e,n,t,r){return e=wt(ba(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!_t(t.textWrap)},set:function(e,n,t,r){var o=sn(t),s="joint-text",c=o.data(s),h=at(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:m}=h;Wa(m)&&(h.x=Uu(m,n));var _=h.fontSize=r["font-size"]||r.fontSize,S=JSON.stringify([e,h]);if(void 0===c||c!==S){_&&t.setAttribute("font-size",_);var y=h.textPath;if(st(y)){var H=y.selector;if("string"==typeof H){var J=this.findBySelector(H)[0];J instanceof SVGPathElement&&(h.textPath=wt({"xlink:href":"#"+J.id},y))}}Re(t).text(""+e,h),o.data(s,S)}}},textWrap:{qualify:_t,set:function(e,n,t,r){var o=e.width||0,s={};s.width=On(o)?n.width*parseFloat(o)/100:o<=0?n.width+o:o;var c=e.height||0;s.height=On(c)?n.height*parseFloat(c)/100:c<=0?n.height+c:c;var h,m=e.text;void 0===m&&(m=r.text),h=void 0!==m?function(e,n,t={},r={}){var o=n.width,s=n.height,c=r.svgDocument||Re("svg").node,h=Re("tspan").node,m=Re("text").attr(t).append(h).node,_=document.createTextNode("");m.style.opacity=0,m.style.display="block",h.style.display="block",h.appendChild(_),c.appendChild(m),r.svgDocument||document.body.appendChild(c);var S=r.separator||" ",y=r.eol||"\n",H=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,J=r.maxLineCount;hn(J)||(J=1/0);for(var Ae,Me,O,ne=e.split(S),ye=[],xe=[],U=0,K=0,ie=ne.length;U<ie;U++){var pe=ne[U];if(pe){var Pe=!1;if(y&&pe.indexOf(y)>=0){if(pe.length>1){for(var Oe=pe.split(y),ze=0,tt=Oe.length-1;ze<tt;ze++)Oe.splice(2*ze+1,0,y);ne.splice(U,1,...Oe.filter(Dt=>""!==Dt)),U--,ie=ne.length;continue}xe[++K]="",Pe=!0}if(!Pe)if(_.data=xe[K]?xe[K]+" "+pe:pe,h.getComputedTextLength()<=o)xe[K]=_.data,(Ae||Me)&&(ye[K++]=!0,Ae=0,Me=0);else{if(!xe[K]||Ae){var Je=!!Ae;if(Ae=pe.length-1,Je||!Ae){if(!Ae){if(!xe[K]){xe=[];break}ne.splice(U,2,pe+ne[U+1]),ie--,ye[K++]=!0,U--;continue}ne[U]=pe.substring(0,Ae),ne[U+1]=pe.substring(Ae)+(void 0===ne[U+1]?"":ne[U+1])}else{if(Me)ne.splice(U,2,ne[U]+ne[U+1]),Me=0;else{var ot=pe.search(H);ot>-1&&ot!==pe.length-1&&0!==ot&&(Me=ot+1,Ae=0),ne.splice(U,1,pe.substring(0,Me||Ae),pe.substring(Me||Ae)),ie++}K&&!ye[K-1]&&K--}U--;continue}K++,U--}var ht=null;if(xe.length>J)ht=J-1;else if(void 0!==s){var pt;void 0===O&&(O=(pt="auto"===t.lineHeight?{value:1.5,unit:"em"}:Ss(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===pt.unit&&(O*=m.getBBox().height)),O*xe.length>s&&(ht=Math.floor(s/O)-1)}if(null!==ht){xe.splice(ht+1);var Pt=r.ellipsis;if(!Pt||ht<0)break;"string"!=typeof Pt&&(Pt="\u2026");var kn=xe[ht];if(!kn&&!Pe)break;var Bn,kt,Sn=kn.length;do{if(kt=kn[Sn],Bn=kn.substring(0,Sn),kt?kt.match(S)&&(Bn+=kt):Bn+="string"==typeof S?S:" ",_.data=Bn+=Pt,h.getComputedTextLength()<=o){xe[ht]=Bn;break}Sn--}while(Sn>=0);break}}}return r.svgDocument?c.removeChild(m):document.body.removeChild(c),xe.join(y)}(""+m,s,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",Kt.text.set.call(this,h,n,t,r)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var r=sn(t),o="joint-title",s=r.data(o);if(void 0===s||s!==e){r.data(o,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var h=document.createElementNS(t.namespaceURI,"title");h.textContent=e,t.insertBefore(h,c)}}}},lineHeight:{qualify:$a},textVerticalAnchor:{qualify:$a},textPath:{qualify:$a},annotations:{qualify:$a},eol:{qualify:$a},displayEmpty:{qualify:$a},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:_t,set:function(e,n,t){sn(t).css(e)}},html:{set:function(e,n,t){sn(t).html(e+"")}},ref:{},refX:{position:eu("x","width","origin")},refY:{position:eu("y","height","origin")},refDx:{position:eu("x","width","corner")},refDy:{position:eu("y","height","corner")},refWidth:{set:Oo("width","width")},refHeight:{set:Oo("height","height")},refRx:{set:Oo("rx","width")},refRy:{set:Oo("ry","height")},refRInscribed:{set:function(e){var n=Oo("r","width"),t=Oo("r","height");return function(r,o){return(o.height>o.width?n:t)(r,o)}}()},refRCircumscribed:{set:function(e,n){var t=On(e);e=parseFloat(e),t&&(e/=100);var o,r=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(o=t||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:o}}},refCx:{set:Oo("cx","width")},refCy:{set:Oo("cy","height")},xAlignment:{offset:tc("x","width","right")},yAlignment:{offset:tc("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:Lr({resetOffset:!0})},refDKeepOffset:{set:Lr({resetOffset:!1})},refPointsResetOffset:{set:nc({resetOffset:!0})},refPointsKeepOffset:{set:nc({resetOffset:!1})},connection:{qualify:xa,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),o=r.divideAtLength(t),s=r.divideAtLength(-t);o&&s&&(n=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:xa,set:tu("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:xa,set:tu("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:xa,set:tu("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:xa,set:tu("getTangentAtRatio",{rotate:!1})}};Kt["xlink:href"]=Kt.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{Kt[e]={qualify:Wa,set:function(t,r){return{[e]:Uu(t,r)}}}}),Kt.refR=Kt.refRInscribed,Kt.refD=Kt.refDResetOffset,Kt.refPoints=Kt.refPointsResetOffset,Kt.atConnectionLength=Kt.atConnectionLengthKeepGradient,Kt.atConnectionRatio=Kt.atConnectionRatioKeepGradient,Kt.refX2=Kt.refX,Kt.refY2=Kt.refY,Kt.refWidth2=Kt.refWidth,Kt.refHeight2=Kt.refHeight,Kt["ref-x"]=Kt.refX,Kt["ref-y"]=Kt.refY,Kt["ref-dy"]=Kt.refDy,Kt["ref-dx"]=Kt.refDx,Kt["ref-width"]=Kt.refWidth,Kt["ref-height"]=Kt.refHeight,Kt["x-alignment"]=Kt.xAlignment,Kt["y-alignment"]=Kt.yAlignment;const Ya=Kt,ni=tn.Model.extend({constructor:function(e,n){var t,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Rt("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(r=this.parse(r,n)||{}),(t=He(this,"defaults"))&&(r=Mt({},t,r)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=He(this.constructor.prototype,"defaults").attrs||{},r={};xt(this.attributes.attrs,function(s,c){const h=n[c];xt(s,function(m,_){st(m)&&!Array.isArray(m)?xt(m,function(S,y){(!h||!h[_]||!De(h[_][y],S))&&(r[c]=r[c]||{},(r[c][_]||(r[c][_]={}))[y]=S)}):(!h||!De(h[_],m))&&(r[c]=r[c]||{},r[c][_]=m)})});const o=be(je(this.attributes,"attrs"));return o.attrs=r,o},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};xt(this.get("attrs"),function(s,c){s&&s.port&&(void 0!==s.port.id?n[s.port.id]=s.port:n[s.port]={id:s.port})});var t={};xt(e,function(s,c){n[c]||(t[c]=!0)}),this.graph&&!Ue(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(s){t[s.get("target").port]&&s.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(s){t[s.get("source").port]&&s.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const o=this.getEmbeddedCells();for(let s=0,c=o.length;s<c;s++){const h=o[s];h&&h.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],t=t-r.length+1;var o=n.get("cells"),s=o.indexOf(this)!==o.length-r.length;s||(s=r.some(function(c,h){return c.get("z")!==t+h})),s&&(this.startBatch("to-front"),t+=r.length,r.forEach(function(c,h){c.set("z",t+h,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var s=0!==n.get("cells").indexOf(this);s||(s=r.some(function(c,h){return c.get("z")!==t+h})),s&&(this.startBatch("to-back"),t-=r.length,r.forEach(function(c,h){c.set("z",t+h,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const r=wt([],this.get("embeds"));e.forEach(o=>{r[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,n)}),this.set("embeds",ma(r),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(r=>r.unset("parent",n)),this.set("embeds",q(this.get("embeds"),...e.map(r=>r.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var r=t.shift();n.push(r),t.push.apply(t,r.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(o){n.push.apply(n,o.getEmbeddedCells(e))});else n=yt(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=yn(e)?e:e.id,r=this.parent();if(n=Br({deep:!0},n),this.graph&&n.deep){for(;r;){if(r===t)return!0;r=this.graph.getCell(r).parent()}return!1}return r===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return yt(Mo([this].concat(this.getEmbeddedCells({deep:!0}))));var n=tn.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var r="/",o=yn(e);if(o||Array.isArray(e)){if(arguments.length>1){var s,c;o?c=(s=e).split("/"):(s=e.join(r),c=e.slice());var h=c[0],m=c.length;if((t=t||{}).propertyPath=s,t.propertyValue=n,t.propertyPathArray=c,1===m)return this.set(h,n,t);for(var _={},S=_,y=h,H=1;H<m;H++){var J=c[H],ne=Number.isFinite(o?Number(J):J);S=S[y]=ne?[]:{},y=J}_=Vr(_,c,n,"/");var ye=Mt({},this.attributes);t.rewrite&&Ti(ye,s,"/");var xe=Mt(ye,_);return this.set(h,xe[h],t)}return $n(this.attributes,e,r)}return this.set(Mt({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),r=t[0];if("attrs"===r&&(n.dirty=!0),1===t.length)return this.unset(e,n);var o=t.slice(1),s=be(this.get(r));return Ti(s,o,"/"),this.set(r,s,n)},attr:function(e,n,t){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):yn(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,r){r=r||"/",t=wt({duration:100,delay:10,timingFunction:Ts.linear,valueFunction:ti.number},t);var c,s=0,h=function(y){var H,J,ne;(J=(y-=s=s||y)/t.duration)<1?this._transitionIds[e]=H=Jo(h):(J=1,delete this._transitionIds[e]),ne=c(t.timingFunction(J)),t.transitionId=H,this.prop(e,ne,t),H||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:m}=this;let _;return _=setTimeout(y=>{m[e]&&(m[e]=q(m[e],_),0===m[e].length&&delete m[e]),this.stopPendingTransitions(e,r),c=t.valueFunction($n(this.attributes,e,r),n),this._transitionIds[e]=Jo(y),this.trigger("transition:start",this,e)},t.delay,h),m[e]||(m[e]=[]),m[e].push(_),_},getTransitions:function(){return We(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(s=>De(o,s.split(n).slice(0,o.length)))}return r.forEach(o=>{t[o].forEach(c=>clearTimeout(c)),delete t[o]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(s=>De(o,s.split(n).slice(0,o.length)))}r.forEach(o=>{va(t[o]),delete t[o],this.trigger("transition:end",this,o)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,wt({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,wt({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new ve(0,0)},getPointFromConnectedLink:function(){return new ve},getBBox:function(){return new rt(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const r=new ve(n,t);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||Ya[e]},define:function(e,n,t,r){t=wt({defaults:za({type:e},n,this.prototype.defaults)},t);var o=this.extend(t,r);return"undefined"!=typeof joint&&Se(joint,"shapes")&&Vr(joint.shapes,e,o,"."),o}}),ko=ni.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?lr(this.get("source")):e instanceof ni?((r=lr(n)||{}).id=e.id,this.set("source",r,t)):_t(e)?this.set("source",r=e,n):((r=lr(n)||{}).x=e.x,r.y=e.y,this.set("source",r,t));var r},target:function(e,n,t){return void 0===e?lr(this.get("target")):e instanceof ni?((r=lr(n)||{}).id=e.id,this.set("target",r,t)):_t(e)?this.set("target",r=e,n):((r=lr(n)||{}).x=e.x,r.y=e.y,this.set("target",r,t));var r},router:function(e,n,t){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?lr(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:n},o?n:t)},connector:function(e,n,t){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?lr(r):r:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:n},o?n:t)},label:function(e,n,t){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),r.splice(e,0,n),this.labels(r,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(n);return this.prop(["vertices",e],o,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],r=0;r<e.length;r++){var o=e[r],s=this._normalizeVertex(o);t.push(s)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var s=this._normalizeVertex(n);return r.splice(e,0,s),this.vertices(r,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return _t(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+n}},t)},scale:function(e,n,t,r){return this.applyToPoints(function(o){return ve(o).scale(e,n,t).toJSON()},r)},applyToPoints:function(e,n){if(!qe(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:r,target:o}=this.attributes;r.id||(t.source=e(r)),o.id||(t.target=e(o));var s=this.vertices();return s.length>0&&(t.vertices=s.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ve(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ve(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ve),this.getTargetPoint()];return new ln(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();t&&r&&(n=t===r||t.isEmbeddedIn(r)?r:r.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,r)),o&&(!n||n.id!==o.id)&&o.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,r=n.id,o=t.id;if(!r||!o)return!1;var s=r===o;if(!s&&e.deep&&this.graph){var c=this.getSourceCell(),h=this.getTargetCell();s=c.isEmbeddedIn(h)||h.isEmbeddedIn(c)}return s},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=yn(e)||hn(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function _a(e,n,t){var r=e.toJSON();return r.angle=n||0,Br({},t,r)}function Is(e,n,t){return e.map(function(r,o,s){var c=this.pointAt((o+.5)/s.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),_a(c.round(),0,r)},_i(n,t))}function rc(e,n,t,r){var o=n.center(),s=n.width/n.height,c=n.topMiddle(),h=Zn.fromRect(n);return e.map(function(m,_,S){var y=t+r(_,S.length),H=c.clone().rotate(o,-y).scale(s,1,o),J=m.compensateRotation?-h.tangentTheta(H):0;return(m.dx||m.dy)&&H.offset(m.dx||0,m.dy||0),m.dr&&H.move(o,m.dr),_a(H.round(),J,m)})}function Wu(e,n){var t=n.x;yn(t)&&(t=parseFloat(t)/100*e.width);var r=n.y;return yn(r)&&(r=parseFloat(r)/100*e.height),Wn(t||0,r||0)}const Gf=function(e,n,t){return e.map(Wu.bind(null,n))},Wf=function(e,n,t){return t.fn(e,n,t)},ru=function(e,n,t){return Is(e,Wu(n,t.start||n.origin()),Wu(n,t.end||n.corner()))},As=function(e,n,t){return Is(e,n.origin(),n.bottomLeft())},ic=function(e,n,t){return Is(e,n.topRight(),n.corner())},Z=function(e,n,t){return Is(e,n.origin(),n.topRight())},Xa=function(e,n,t){return Is(e,n.bottomLeft(),n.corner())},iu=function(e,n,t){var o=t.step||360/e.length;return rc(e,n,t.startAngle||0,function(s){return s*o})},Pi=function(e,n,t){var o=t.step||20;return rc(e,n,t.startAngle||0,function(s,c){return(s+.5-c/2)*o})};function Jt(e,n){return za({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function oc(e,n,t,r){r=Br({},r,{offset:15});var c,h,m,_,o=n.center().theta(e),s=ac(n),S=r.offset,y=0;o<s[1]||o>s[2]?(m=".3em",c=S,h=0,_="start"):o<s[0]?(m="0",c=0,h=-S,t?(y=-90,_="start"):_="middle"):o<s[3]?(m=".3em",c=-S,h=0,_="end"):(m=".6em",c=0,h=S,t?(y=90,_="start"):_="middle");var H=Math.round;return Jt({x:H(c),y:H(h),angle:y,attrs:{".":{y:m,"text-anchor":_}}})}function ac(e){var n=e.center(),t=n.theta(e.origin()),r=n.theta(e.bottomLeft()),o=n.theta(e.corner());return[t,n.theta(e.topRight()),o,r]}function sc(e,n,t,r){var s,c,h,m,o=n.center().theta(e),_=(r=Br({},r,{offset:15})).offset,S=0,y=ac(n);o<y[1]||o>y[2]?(h=".3em",s=-_,c=0,m="end"):o<y[0]?(h=".6em",s=0,c=_,t?(S=90,m="start"):m="middle"):o<y[3]?(h=".3em",s=_,c=0,m="start"):(h="0em",s=0,c=-_,t?(S=-90,m="start"):m="middle");var H=Math.round;return Jt({x:H(s),y:H(c),angle:S,attrs:{".":{y:h,"text-anchor":m}}})}function ea(e,n,t){t=Br({},t,{offset:20});var m,r=Wn(0,0),o=-e.theta(r),s=o,c=e.clone().move(r,t.offset).difference(e).round(),h=".3em";(o+90)%180==0?(m=n?"end":"middle",!n&&-270===o&&(h="0em")):o>-270&&o<-90?(m="start",s=o-180):m="end";var _=Math.round;return Jt({x:_(c.x),y:_(c.y),angle:n?s:0,attrs:{".":{y:h,"text-anchor":m}}})}const $f=function(e,n,t){return Jt(t,n)},Yf=function(e,n,t){return Jt(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Xf=function(e,n,t){return Jt(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Kf=function(e,n,t){return Jt(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Qf=function(e,n,t){return Jt(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Lo=function(e,n,t){return oc(e,n,!0,t)},Jf=function(e,n,t){return oc(e,n,!1,t)},Zf=function(e,n,t){return sc(e,n,!0,t)},qf=function(e,n,t){return sc(e,n,!1,t)},ed=function(e,n,t){return ea(e.difference(n.center()),!1,t)},td=function(e,n,t){return ea(e.difference(n.center()),!0,t)};var fo=function(e){var n=be(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=T,this.portLabelLayoutNamespace=E,this._init(n)};fo.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),r=this.getPortsByGroup(e),o=t.position||{},s=o.name,c=this.portLayoutNamespace;c[s]||(s="left");var h=o.args||{},m=r.map(function(y){return y&&y.position&&y.position.args}),_=c[s](m,n,h),S={ports:r,result:[]};return yt(_).reduce(function(y,H,J){var ne=y.ports[J];return y.result.push({portId:ne.id,portTransformation:H,labelTransformation:this._getPortLabelLayout(ne,ve(H),n),portAttrs:ne.attrs,portSize:ne.size,labelSize:ne.label.size}),y}.bind(this),S),S.result},_getPortLabelLayout:function(e,n,t){var r=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return r[o]?r[o](n,t,e.label.position.args):null},_init:function(e){if(st(e.groups))for(var n=Object.keys(e.groups),t=0,r=n.length;t<r;t++){var o=n[t];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var s=yt(e.items),c=0,h=s.length;c<h;c++)this.ports.push(this._evaluatePort(s[c]))},_evaluateGroup:function(e){return Mt(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=wt({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=Mt({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=Mt({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=wt({},t.size,n.size),n},_getZIndex:function(e,n){return hn(n.z)?n.z:hn(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return Mt({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var r,t={};qe(e)?(r="fn",t.fn=e):yn(e)?r=e:void 0===e?r=n?"left":null:Array.isArray(e)?(r="absolute",t.x=e[0],t.y=e[1]):st(e)&&(r=e.name,wt(t,e.args));var o={args:t};return r&&(o.name=r),o},_getLabel:function(e,n){var t=e.label||{},r=t;return r.position=this._getPosition(t.position,n),r}};const nd={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};yt(e.items).forEach(function(h){n[h.id]=!0});var t=this.previous("ports")||{},r={};yt(t.items).forEach(function(h){n[h.id]||(r[h.id]=!0)});var o=this.graph;o&&!Ue(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(h){r[h.get("target").port]&&h.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(h){r[h.get("source").port]&&h.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return be(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=yt(this.prop(["ports","items"])).filter(t=>t.group===e);return be(n)},getPort:function(e){return be(yt(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,rt(this.size())).reduce(function(t,r){var o=r.portTransformation;return t[r.portId]={x:o.x,y:o.y,angle:o.angle},t},{})},getPortIndex:function(e){var n=st(e)?e.id:e;return this._isValidPortId(n)?yt(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!st(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=wt([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const r="number"==typeof e?e:this.getPortIndex(e);if(!st(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const o=wt([],this.prop("ports/items"));return o.splice(r,0,n),this.prop("ports/items",o,t),this},portProp:function(e,n,t,r){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?s[0]=["ports","items",o].concat(n):yn(n)?s[0]=["ports/items/",o,"/",n].join(""):(s=["ports/items/"+o],_t(n)&&(s.push(n),s.push(t))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=yt((e=e||{}).items);return t.forEach(function(r){"object"!=typeof r&&n.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),ma(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!st(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",wt([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},r=this.getPortIndex(e);if(-1!==r){const o=wt([],this.prop(["ports","items"]));o.splice(r,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,r;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;r=wt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(c){const h=st(c)?c.id:c;return s.id===h})})}else t=e||{},r=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],r,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new fo(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var r=t.filter(function(s){if(!n.find(function(c){return c.id===s.id}))return s}),o=n.filter(function(s){if(!t.find(function(c){return c.id===s.id}))return s});o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},rd={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,r=n.node.childNodes.length;t<r;t++)e.push(n.node.childNodes[t]);var o=An(this.model._portSettingsData.getPorts(),"z"),s="auto";yt(o[s]).forEach(function(S){var y=this._getPortElement(S);n.append(y),e.push(y)},this);for(var c=Object.keys(o),h=0;h<c.length;h++){var m=c[h];if(m!==s){var _=parseInt(m,10);this._appendPorts(o[m],_,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var r=this._getContainerElement(),o=yt(e).map(this._getPortElement,this);t[n]||n<0?Re(t[Math.max(n,0)]).before(o):r.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const r=t.portContentElement.node,o=t.portContentSelectors,[s=null]=this.findBySelector(n,r,o);return s},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){yi(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,r,o;var s=Re(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var h=this.parseDOMJSON(c,s.node),m=h.fragment;n=m.childNodes.length>1?Re("g").append(m):Re(m.firstChild),o=h.selectors}else n=Re(c),Array.isArray(n)&&(n=Re("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const _=this._getPortLabelMarkup(e.label);if(Array.isArray(_)){const{fragment:H,selectors:J}=this.parseDOMJSON(_,s.node),ne=H.childNodes.length;ne>0&&(r=J,t=1===ne?Re(H.firstChild):Re("g").append(H))}else t=Re(_),Array.isArray(t)&&(t=Re("g").append(t));var S;if(o&&r){for(var y in r)if(o[y]&&y!==this.selector)throw new Error("ElementView: selectors within port must be unique.");S=wt({},o,r)}else S=o||r;return s.append(n.addClass("joint-port-body")),t&&s.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:t,portSelectors:S,portLabelSelectors:r,portContentElement:n,portContentSelectors:o},s},_updatePortGroup:function(e){for(var n=rt(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),r=0,o=t.length;r<o;r++){var s=t[r],h=this._portElementsCache[s.portId]||{},m=s.portTransformation;this.applyPortTransform(h.portElement,m),this.updateDOMSubtreeAttributes(h.portElement.node,s.portAttrs,{rootBBox:new rt(s.portSize),selectors:h.portSelectors});var _=s.labelTransformation;_&&h.portLabelElement&&(this.applyPortTransform(h.portLabelElement,_,-m.angle||0),this.updateDOMSubtreeAttributes(h.portLabelElement.node,_.attrs,{rootBBox:new rt(s.labelSize),selectors:h.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var r=Re.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Xr=ni.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),ni.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const r=hn(n);t=(r?t:e)||{};const{parentRelative:o,deep:s,restrictedArea:c}=t;let h;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const m=this.getParentCell();m&&!m.isLink()&&(h=m.get("position"))}if(r){if(h&&(e+=h.x,n+=h.y),s||c){const{x:m,y:_}=this.get("position");this.translate(e-m,n-_,t)}else this.set("position",{x:e,y:n},t);return this}{const m=ve(this.get("position"));return o?m.difference(h):m}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=t.restrictedArea;if(o&&t.translateBy===this.id)if("function"==typeof o){var s=o.call(this,r.x+e,r.y+n,t);e=s.x-r.x,n=s.y-r.y}else{var c=this.getBBox({deep:!0}),h=r.x-c.x,m=r.y-c.y,_=Math.max(o.x+h,Math.min(o.x+o.width+h-c.width,r.x+e)),S=Math.max(o.y+m,Math.min(o.y+o.height+m-c.height,r.y+n));e=_-r.x,n=S-r.y}var y={x:r.x+e,y:r.y+n};return t.tx=e,t.ty=n,t.transition?(st(t.transition)||(t.transition={}),this.transition("position",y,wt({},t.transition,{valueFunction:ti.object})),yi(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",y,t),yi(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(st(e)&&(t=n,n=hn(e.height)?e.height:r.height,e=hn(e.width)?e.width:r.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var r=this.get("size");switch(t.direction){case"left":case"right":n=r.height;break;case"top":case"bottom":e=r.width}var c,o=Dn(this.get("angle")||0),s=this.getBBox();if(o){var h={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(h+=Math.floor((o+45)/90),h%=4);var m=s[["bottomLeft","corner","topRight","origin"][h]](),_=ve(m).rotate(s.center(),-o),S=Math.sqrt(e*e+n*n)/2,y=h*Math.PI/2;y+=Math.atan(h%2==0?n/e:e/n),y-=Fn(o);var H=ve.fromPolar(S,y,_);c=ve(H).offset(e/-2,n/-2)}else switch(c=s.topLeft(),t.direction){case"top":case"top-right":c.offset(0,s.height-n);break;case"left":case"bottom-left":c.offset(s.width-e,0);break;case"top-left":c.offset(s.width-e,s.height-n)}this.set("size",{width:e,height:n},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,r){var o=this.getBBox().scale(e,n,t);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(y=>y.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&yi(t,"fitEmbeds",e);const{left:r,right:o,top:s,bottom:c}=qo(e.padding);let{x:h,y:m,width:_,height:S}=n.getCellsBBox(t);return h-=r,m-=s,_+=r+o,S+=c+s,this.set({position:{x:h,y:m},size:{width:_,height:S}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,r){if(t){var o=this.getBBox().center(),s=this.get("size"),c=this.get("position");o.rotate(t,this.get("angle")-e);var h=o.x-s.width/2-c.x,m=o.y-s.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(c.x+h,c.y+m,r),this.rotate(e,n,null,r),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,r);return this},angle:function(){return Dn(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:r,rotate:o}=e;if(r&&n){const y=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return y.push(this),n.getCellsBBox(y,e)}const{angle:s=0,position:{x:c,y:h},size:{width:m,height:_}}=t,S=new rt(c,h,m,_);return o&&S.rotateAroundCenter(s),S},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),r=t.center(),o=e.get(n);if(!o)return r;var s=o.port;if(!s||!this.hasPort(s))return r;var c=this.portProp(s,["group"]),h=this.getPortsPositions(c),m=new ve(h[s]).offset(t.origin()),_=this.angle();return _&&m.rotate(r,-_),m}});wt(Xr.prototype,nd);const $u={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,r=t>0&&n[0]||[],o=t>1&&n[t-1]||{};return Array.isArray(r)||(o instanceof ni?r=n:r instanceof ni&&(n.length>1&&n.pop(),r=n)),o instanceof ni&&(o={}),e.call(this,r,o)}}},Ca=tn.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&Se(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,s=new("link"===e.type?ko:$n(t.cellNamespace,e.type,".")||Xr)(e,n);return n.dry||(s.graph=t.graph),s},comparator:function(e){return e.get("z")||0}}),No=tn.Model.extend({initialize:function(e,n){var t=new Ca([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});tn.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=tn.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var r;return"object"==typeof e?(r=e,t=n):(r={})[e]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,t),r=je(r,"cells")),tn.Model.prototype.set.call(this,r,t)},clear:function(e){e=wt({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(r){return r.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof tn.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!yn(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof tn.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=zu(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=yt(e).map(function(r){return this._prepareCell(r,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),yi(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,r=n.inbound,o=n.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=[],c={};function h(y,H){if(xt(y.getOutboundEdges(H.id),function(ne,ye){if(!c[ye]){var xe=y.getCell(ye);s.push(xe),c[ye]=!0,t&&(r&&m(y,xe),o&&h(y,xe))}}.bind(y)),t&&H.isLink()){var J=H.getTargetCell();J&&J.isLink()&&(c[J.id]||(s.push(J),h(y,J)))}}function m(y,H){if(xt(y.getInboundEdges(H.id),function(ne,ye){if(!c[ye]){var xe=y.getCell(ye);s.push(xe),c[ye]=!0,t&&(r&&m(y,xe),o&&h(y,xe))}}.bind(y)),t&&H.isLink()){var J=H.getSourceCell();J&&J.isLink()&&(c[J.id]||(s.push(J),m(y,J)))}}if(o&&h(this,e),r&&m(this,e),n.deep){var _=e.getEmbeddedCells({deep:!0}),S={};_.forEach(function(y){y.isElement()&&(S[y.id]=!0)}),_.forEach(function(y){y.isLink()||(o&&xt(this.getOutboundEdges(y.id),function(H,J){if(!c[J]){var ne=this.getCell(J),{source:ye,target:xe}=ne.attributes,Ae=ye.id,Me=xe.id;if(!n.includeEnclosed&&Ae&&S[Ae]&&Me&&S[Me])return;s.push(this.getCell(J)),c[J]=!0}}.bind(this)),r&&xt(this.getInboundEdges(y.id),function(H,J){if(!c[J]){var ne=this.getCell(J),{source:ye,target:xe}=ne.attributes,Ae=ye.id,Me=xe.id;if(!n.includeEnclosed&&Ae&&S[Ae]&&Me&&S[Me])return;s.push(this.getCell(J)),c[J]=!0}}.bind(this)))},this)}return s},getNeighbors:function(e,n){n||(n={});var t=n.inbound,r=n.outbound;void 0===t&&void 0===r&&(t=r=!0);var o=this.getConnectedLinks(e,n).reduce(function(h,m){var{source:_,target:S}=m.attributes,y=m.hasLoop(n);if(t&&Se(_,"id")&&!h[_.id]){var H=this.getCell(_.id);H.isElement()&&(y||H&&H!==e&&(!n.deep||!H.isEmbeddedIn(e)))&&(h[_.id]=H)}if(r&&Se(S,"id")&&!h[S.id]){var J=this.getCell(S.id);J.isElement()&&(y||J&&J!==e&&(!n.deep||!J.isEmbeddedIn(e)))&&(h[S.id]=J)}return h}.bind(this),{});if(e.isLink()){if(t){var s=e.getSourceCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}if(r){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return yt(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var r=[],o=t.get("parent");o;)r.push(o),o=this.getCell(o).get("parent");return r},this);e=e.sort(function(t,r){return t.length-r.length});var n=yt(e.shift()).find(function(t){return e.every(function(r){return r.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},wt({},n=n||{},{outbound:!0})),t},cloneCells:Mo,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],r={},o=[],s=[];return yt(e).forEach(function(c){r[c.id]||(t.push(c),r[c.id]=c,c.isLink()?s.push(c):o.push(c)),n.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(m){r[m.id]||(t.push(m),r[m.id]=m,m.isLink()?s.push(m):o.push(m))})}),s.forEach(function(c){var{source:h,target:m}=c.attributes;if(h.id&&!r[h.id]){var _=this.getCell(h.id);t.push(_),r[_.id]=_,o.push(_)}if(m.id&&!r[m.id]){var S=this.getCell(m.id);t.push(this.getCell(m.id)),r[S.id]=S,o.push(S)}},this),o.forEach(function(c){this.getConnectedLinks(c,n).forEach(function(m){var{source:_,target:S}=m.attributes;!r[m.id]&&_.id&&r[_.id]&&S.id&&r[S.id]&&(t.push(m),r[m.id]=m)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},wt({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const r={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){var c=s.shift();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const h=this.getNeighbors(c,t);for(let m=0,_=h.length;m<_;m++){const S=h[m];o[S.id]=o[c.id]+1,s.push(S)}}},dfs:function(e,n,t={}){const r={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){const c=s.pop();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const h=this.getNeighbors(c,t),m=s.length;for(let _=0,S=h.length;_<S;_++){const y=h[_];o[y.id]=o[c.id]+1,s.splice(m,0,y)}}},getSources:function(){var e=[];return xt(this._nodes,function(n,t){(!this._in[t]||Ue(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return xt(this._nodes,function(n,t){(!this._out[t]||Ue(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||Ue(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Ue(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var r=(t=t||{}).inbound,o=t.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:h,target:m}=c.attributes;if(r&&Se(h,"id")&&h.id===n.id||o&&Se(m,"id")&&m.id===n.id)return s=!0,!1}),s},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){yi(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new rt(e),{strict:r=!1}=n,o=r?"containsRect":"intersect";return this.getElements().filter(s=>t[o](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(r):this.findModelsFromPoint(r[t]())).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return yt(e).reduce(function(r,o){const s=o.getBBox({rotate:t});return s?r?r.union(s):s:r},null)},translate:function(e,n,t){var r=this.getCells().filter(function(o){return!o.isEmbedded()});return yi(r,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,r){var o=this.getCellsBBox(t);if(o){var s=Math.max(e/o.width,0),c=Math.max(n/o.height,0);yi(t,"scale",s,c,o.origin(),r)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",wt({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",wt({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(r=>n[r]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:r}=n.attributes;if(t.id&&r.id){var o=n.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(h){var{source:m,target:_}=h.attributes;return m&&m.id===t.id&&(!m.port||m.port===t.port)&&_&&_.id===r.id&&(!_.port||_.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:r}=n.attributes;return t.id&&r.id}}});!function(e,n,t){if(yn(t)){if(!$u[t])throw new Error('Unknown wrapper: "'+t+'"');t=$u[t]}if(!qe(t))throw new Error("Wrapper must be a function.");yt(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=t(e[r])})}(No.prototype,0,$u.cells);const Ms={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var r=this.getCell(n),o=t.node(n);e.setPosition?e.setPosition(r,o):r.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,n,t){const o=this.getCell(n.name),s=t.edge(n),c=s.points||[],h=new ln(c);if(e.setVertices||e.setLinkVertices)if(qe(e.setVertices))e.setVertices(o,c);else{h.simplify({threshold:.001});const m=h.points.map(S=>S.toJSON());o.set("vertices",m.slice(1,m.length-1))}if(e.setLabels&&"x"in s&&"y"in s){const m={x:s.x,y:s.y};if(qe(e.setLabels))e.setLabels(o,m,c);else{const _=h.closestPointLength(m),S=h.pointAtLength(_),y=_/h.length(),H=new ve(m).difference(S).toJSON();o.label(0,{position:{distance:y,offset:H}})}}},layout:function(e,n){var t;t=e instanceof No?e:(new No).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(n=Br(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Ms.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(S){return S.id}}),s={},c=n.marginX||0,h=n.marginY||0;if(n.rankDir&&(s.rankdir=n.rankDir),n.align&&(s.align=n.align),n.nodeSep&&(s.nodesep=n.nodeSep),n.edgeSep&&(s.edgesep=n.edgeSep),n.rankSep&&(s.ranksep=n.rankSep),n.ranker&&(s.ranker=n.ranker),c&&(s.marginx=c),h&&(s.marginy=h),o.setGraph(s),r.layout(o,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),Ms.fromGraphLib(o,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var m=o.nodes().filter(function(S){return o.children(S).length>0}).map(t.getCell.bind(t)).sort(function(S,y){return y.getAncestors().length-S.getAncestors().length});yi(m,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var _=o.graph();return new rt(c,h,Math.abs(_.width-2*c),Math.abs(_.height-2*h))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||er,r=n.importEdge||er,o=this instanceof No?this:new No;return e.nodes().forEach(function(s){t.call(o,s,e,o,n)}),e.edges().forEach(function(s){r.call(o,s,e,o,n)}),o},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=at(n,"directed","compound","multigraph"),o=new t.Graph(r),s=n.setNodeLabel||er,c=n.setEdgeLabel||er,h=n.setEdgeName||er,m=e.get("cells"),_=0,S=m.length;_<S;_++){var y=m.at(_);if(y.isLink()){var H=y.get("source"),J=y.get("target");if(!H.id||!J.id)break;o.setEdge(H.id,J.id,c(y),h(y))}else if(o.setNode(y.id,s(y)),o.isCompound()&&y.has("parent")){var ne=y.get("parent");m.has(ne)&&o.setParent(y.id,ne)}}return o}};No.prototype.toGraphLib=function(e){return Ms.toGraphLib(this,e)},No.prototype.fromGraphLib=function(e,n){return Ms.fromGraphLib.call(this,e,n)};const Wi={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(r){t=!1}return this._results[e]=t,t}},od=(Xr.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Xr.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Xr.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Xr.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Xr.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Xr.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Xr.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Xr.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Xr.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Xr.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Xr.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Xr.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=On(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=On(e);t&&(e=parseFloat(e)/100);var r=n.x,o=n.y,s=n.width,c=n.height,m=t?c*e:e,_=Re.KAPPA,S=_*(s/2),y=_*(t?c*e:e),J=r+s/2,ne=r+s,ye=o+m,xe=ye-m,Ae=o+c-m,Me=o+c;return{d:["M",r,ye,"L",r,Ae,"C",r,Ae+y,J-S,Me,J,Me,"C",J+S,Me,ne,Ae+y,ne,Ae,"L",ne,ye,"C",ne,ye-y,J+S,xe,J,xe,"C",J-S,xe,r,ye-y,r,ye,"Z"].join(" ")}}}}});var Ro=Wi.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Xr.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Ro]},{attributes:{text:{set:function(e,n,t,r){if(!(t instanceof HTMLElement)){var o=r.style||{},s={text:e,width:-5,height:"100%"},c=wt({textVerticalAnchor:"middle"},o);return Ya.textWrap.set.call(this,s,n,t,c),{fill:o.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const wa=ko.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),ta=(ko.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ko.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Sa=tn.View.extend({options:{},theme:null,themeClassNamePrefix:Fr("theme-"),requireSetThemeOverride:!1,defaultTheme:wr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=wt({},this.options,e),tn.View.call(this,e)},initialize:function(){ta[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=He(this,"children")),e){var n=this.svgElement,r=mi(e,Re.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var r=t.getAttribute(e);if(r)return r;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(He(this,"el"));else{var e=He(this,"tagName"),n=wt({},He(this,"attributes")),t=wt({},He(this,"style"));this.id&&(n.id=He(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(Re.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof tn.$?e:tn.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=Re(this.el))},_ensureElClassName:function(){var e=He(this,"className");if(e){var n=Fr(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),ta[this.cid]=null,tn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var r=this.getEventNamespace();for(var o in n){var s=n[o];"function"!=typeof s&&(s=this[s]),s&&sn(e).on(o+r,t,s.bind(this))}return this},undelegateElementEvents:function(e){return sn(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=He(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,r="__"+this.cid+"__";return void 0===n?t&&t[r]||{}:(t||(t=e.data={}),t[r]||(t[r]={}),wt(t[r],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&wt({},e[0])||{},t=e[1]&&wt({},e[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,tn.View.extend.call(this,n,t)}});if(sn.event&&!("dbltap"in sn.event.special)){const e=wr.doubleTapInterval,n=30;sn.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...r){const{handleObj:o,target:s}=t,c=sn.data(s),h=(new Date).getTime(),m="lastTouch"in c?h-c.lastTouch:0;m<e&&m>n?(c.lastTouch=null,t.type=o.origType,o.handler.call(this,t,...r)):c.lastTouch=h}}}function ho(e){return e?Array.isArray(e)?e:[e]:[]}const Do=Sa.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(_t(n)){const r=e.model.isLink(),{label:o=null,port:s,selector:c}=n;r&&null!==o?t=e.findLabelNode(o,c):!r&&s?t=e.findPortNode(s,c):[t]=e.findBySelector(c)}else n&&(t=Re.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:r,transformGroup:o}=this;if(!e||o)return;const{vel:s,paper:c}=n,{layer:h}=r;if(h){const m=this.transformGroup=Re("g").addClass("highlight-transform").append(t);c.getLayerView(h).insertSortedNode(m.node,r.z)}else(!t.parentNode||t.nextSibling)&&s.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const r=n.getRootTranslateMatrix(),o=n.getRootRotateMatrix(),s=r.multiply(o);e.attr("transform",Re.matrixToTransformString(s))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:r,id:o}=this;if(r)return;const s=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),s?(this.highlight(n,s),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:r}=this;e&&this.unhighlight(n,e),this.unmount(),r._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const r=this.uniqueId(n,t);this.add(e,n,r,t)},unhighlight:function(e,n,t){const r=this.uniqueId(n,t);this.remove(e,r)},get(e,n=null){const{cid:t}=e,{_views:r}=this,o=r[t];if(null===n){const s=[];if(!o)return s;for(let c in o){const h=o[c];h instanceof this&&s.push(h)}return s}if(!o)return null;if(n in o){const s=o[n];if(s instanceof this)return s}return null},add(e,n,t,r={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const o=Do.get(e,t);o&&o.remove();const s=new this(r);return s.id=t,this._addRef(e,t,s),s.requestUpdate(e,n),s},_addRef(e,n,t){const{cid:r}=e,{_views:o}=this;let s=o[r];s||(s=o[r]={}),s[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:r}=this,o=r[t];if(o){n&&delete o[n];for(let s in o)return;delete r[t]}},remove(e,n=null){ho(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){ho(this.get(e,n)).forEach(r=>{(t||r.UPDATABLE)&&r.update()})},transform(e,n=null){ho(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>Re.ensureId(e)+JSON.stringify(n)}),Ja={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},cn=Sa.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,r,o){e.push("type-"+o.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,o,s,e={},n={},t=0,c=He(this,"presentationAttributes");for(var h in c)if(c.hasOwnProperty(h)){var m=c[h];for(Array.isArray(m)||(m=[m]),r=0,o=m.length;r<o;r++){var _=e[s=m[r]];_||(_=e[s]=1<<t++),n[h]|=_}}var S=He(this,"initFlag");for(Array.isArray(S)||(S=[S]),r=0,o=S.length;r<o;r++)e[s=S[r]]||(e[s]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)t|=n[e[r]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||uo(this),Sa.call(this,e)},initialize:function(){this.setFlags(),Sa.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=mi(e),r=t.selectors,o=t.groupSelectors;for(var s in o){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=o[s]}if(n){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=n}return{fragment:t.fragment,selectors:r}},can:function(e){var n=qe(this.options.interactive)?this.options.interactive(this):this.options.interactive;return st(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var r=t[e];if(r)return Array.isArray(r)?r:[r]}return wr.useCSSSelectors?sn(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return Re.transformRect(n,r.multiply(o).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return Re.transformRect(n,r.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return Re.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=Re.createSVGMatrix(),n=this.model,t=n.angle();if(t){var r=n.getBBox(),o=r.width/2,s=r.height/2;e=e.translate(o,s).rotate(t).translate(-o,-s)}return e},_notifyHighlight:function(e,n,t={}){const{el:r}=this;let o;if([o=r]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=o!==r,void 0===t.type){let s;switch(!0){case t.embedding:s=Ja.EMBEDDING;break;case t.connecting:s=Ja.CONNECTING;break;case t.magnetAvailability:s=Ja.MAGNET_AVAILABILITY;break;case t.elementAvailability:s=Ja.ELEMENT_AVAILABILITY;break;default:s=Ja.DEFAULT}t.type=s}return this.notify(e,o,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const r=t.getAttribute("magnet"),o=t===n;if((r||o)&&"false"!==r)return t;if(o)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[r]=this.findBySelector(t);if(r)return r}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var r=Re(e).index()+1;t=e.tagName+":nth-child("+r+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var r=this.paper,o=r.model,s=r.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,n,t,s,"source"),target:{x:n,y:t}}).addTo(o,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(e,...n){var t=this.model,r=t.id,o=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),c={id:r};return null!=s&&(c.magnet=s),null!=o?(c.port=o,!t.hasPort(o)&&!s&&(c.selector=this.getSelector(e))):null==s&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...n)},customizeLinkEnd:function(e,n,t,r,o,s){const{paper:c}=this,{connectionStrategy:h}=c.options;if("function"==typeof h){var m=h.call(c,e,this,n,new ve(t,r),o,s,c);if(m)return m}return e},getMagnetFromLinkEnd:function(e){var s,n=this.el,t=e.port,r=e.magnet,o=this.model;return null!=t&&o.isElement()&&o.hasPort(t)?s=this.findPortNode(t,r)||n:(r||(r=e.selector),!r&&null!=t&&(r='[port="'+t+'"]'),s=this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,n,t,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(n,t,r);o.notifyPointerdown(e,t,r),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,n,t){var r=this.eventData(e),o=r.linkView;if(o)o.pointermove(e,n,t);else{var s=this.paper,c=s.options.magnetThreshold,h=this.getEventTarget(e),m=r.targetMagnet;if("onleave"===c){if(m===h||Re(m).contains(h))return}else if(s.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,m,n,t)}},dragLinkEnd:function(e,n,t){var o=this.eventData(e).linkView;!o||(o.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){Ue(n)||(e instanceof SVGElement?Re(e).attr(n):sn(e).attr(n))},processNodeAttributes:function(e,n){var t,r,o,s,c,h,m,_,S,y=[];for(t in n)!n.hasOwnProperty(t)||(r=n[t],!(o=this.getAttributeDefinition(t))||qe(o.qualify)&&!o.qualify.call(this,r,e,n)?(h||(h={}),h[Tn(t)]=r):(yn(o.set)&&(h||(h={}),h[o.set]=r),null!==r&&y.push(t,o)));for(s=0,c=y.length;s<c;s+=2)r=n[t=y[s]],qe((o=y[s+1]).set)&&(m||(m={}),m[t]=r),qe(o.position)&&(_||(_={}),_[t]=r),qe(o.offset)&&(S||(S={}),S[t]=r);return{raw:n,normal:h,set:m,position:_,offset:S}},updateRelativeAttributes:function(e,n,t,r){r||(r={});var o,s,h=n.raw||{},m=n.normal||{},_=n.set,S=n.position,y=n.offset;for(o in _){s=_[o];var H=this.getAttributeDefinition(o).set.call(this,s,t.clone(),e,h);st(H)?wt(m,H):void 0!==H&&(m[o]=H)}if(e instanceof HTMLElement)this.setNodeAttributes(e,m);else{var xe,Ae,Me,J=m.transform,ne=Re.transformStringToMatrix(J),ye=ve(ne.e,ne.f);if(J&&(m=je(m,"transform"),ne.e=ne.f=0),S||y){var O=this.getNodeScale(e,r.scalableNode);xe=O.sx,Ae=O.sy}var U=!1;for(o in S)s=S[o],(Me=this.getAttributeDefinition(o).position.call(this,s,t.clone(),e,h))&&(ye.offset(ve(Me).scale(xe,Ae)),U||(U=!0));this.setNodeAttributes(e,m);var K=!1;if(y){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var pe=Re.transformRect(ie,ne).scale(1/xe,1/Ae);for(o in y)s=y[o],(Me=this.getAttributeDefinition(o).offset.call(this,s,pe,e,h))&&(ye.offset(ve(Me).scale(xe,Ae)),K||(K=!0))}}(void 0!==J||U||K)&&(ye.round(1),ne.e=ye.x,ne.f=ye.y,e.setAttribute("transform",Re.matrixToTransformString(ne)))}},getNodeScale:function(e,n){var t,r;if(n&&n.contains(e)){var o=n.scale();t=1/o.sx,r=1/o.sy}else t=1,r=1;return{sx:t,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=Re.ensureId(e),r=n[t];return r||(r=n[t]={}),r},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=Re(e).getBBox()),new rt(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=Re(e).getTransformToElement(t)}return Re.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=Re(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,r){var o,s,c,h,m={},_=[];for(var S in e)if(e.hasOwnProperty(S)&&_t(c=e[S])){var y=t[S]=this.findBySelector(S,n,r);for(o=0,s=y.length;o<s;o++){var H=y[o];h=Re.ensureId(H);var J=r&&r[S]===H,ne=m[h];if(ne){ne.array||(_.push(h),ne.array=!0,ne.attributes=[ne.attributes],ne.selectedLength=[ne.selectedLength]);var ye=ne.attributes,xe=ne.selectedLength;if(J)ye.unshift(c),xe.unshift(-1);else{var Ae=Zs(xe,s);ye.splice(Ae,0,c),xe.splice(Ae,0,s)}}else m[h]={attributes:c,selectedLength:J?-1:s,node:H,array:!1}}}for(o=0,s=_.length;o<s;o++)(c=m[h=_[o]]).attributes=Mt({},...c.attributes.reverse());return m},getEventTarget:function(e,n={}){const{target:t,type:r,clientX:o=0,clientY:s=0}=e;return n.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,s):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=rt()),t.selectors||(t.selectors=this.selectors);var h,m,_,S,y,r={},o={},s=[],c=[],H=t.roAttributes,J=this.findNodesAttributes(H||n,e,r,t.selectors),ne=H?this.findNodesAttributes(n,e,r,t.selectors):J;for(var ye in J)if((y=this.processNodeAttributes(m=(S=J[ye]).node,_=S.attributes)).set||y.position||y.offset){var Me,xe=ne[ye]&&ne[ye].attributes,Ae=xe&&void 0===_.ref?xe.ref:_.ref;if(Ae){if(!(Me=(r[Ae]||this.findBySelector(Ae,e,t.selectors))[0]))throw new Error('dia.CellView: "'+Ae+'" reference does not exist.')}else Me=null;if(h={node:m,refNode:Me,processedAttributes:y,allAttributes:xe},Me){var O=c.findIndex(function(ot){return ot.refNode===m});O>-1?c.splice(O,0,h):c.push(h)}else s.push(h)}else this.setNodeAttributes(m,y.normal);s.push(...c);for(var U,K=0,ie=s.length;K<ie;K++){m=(h=s[K]).node,Me=h.refNode;var pe=Re(t.rotatableNode),Pe=Me?Re.ensureId(Me):"",Oe=!!pe&&!!Me&&pe.contains(Me),ze=o[Pe];if(!ze){var tt=Oe?pe:e;ze=o[Pe]=Me?Re(Me).getBBox({target:tt}):t.rootBBox}H?(y=this.processNodeAttributes(m,h.allAttributes),this.mergeProcessedAttributes(y,h.processedAttributes)):y=h.processedAttributes;var Je=ze;Oe&&!pe.contains(m)&&(U||(U=Re.transformStringToMatrix(pe.attr("transform"))),Je=Re.transformRect(ze,U)),this.updateRelativeAttributes(m,y,Je,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),wt(e.set,n.set),wt(e.position,n.position),wt(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Do.remove(this)},updateHighlighters:function(e=!1){Do.update(this,null,e)},transformHighlighters:function(){Do.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,n,t),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,r){this.notify("cell:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){this.notify(n,e,t,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),r=n.findView(t);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:Ja,addPresentationAttributes:function(e){return Mt({},He(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return ma(n.concat(t))})}}),xn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Os=cn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=cn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){cn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[xn.UPDATE],position:[xn.TRANSLATE,xn.TOOLS],size:[xn.RESIZE,xn.PORTS,xn.TOOLS],angle:[xn.ROTATE,xn.TOOLS],markup:[xn.RENDER],ports:[xn.PORTS]},initFlag:[xn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=wr;this.hasFlag(e,xn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,xn.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[xn.RENDER,xn.UPDATE,xn.RESIZE,xn.TRANSLATE,xn.ROTATE,xn.PORTS,xn.TOOLS]);else{let o=!1;this.hasFlag(e,xn.RESIZE)&&(this.resize(n),o=!0,e=this.removeFlag(e,[xn.RESIZE,xn.UPDATE])),this.hasFlag(e,xn.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,xn.UPDATE),o=!0,t&&(e=this.removeFlag(e,xn.PORTS))),this.hasFlag(e,xn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,xn.TRANSLATE),r=!0),this.hasFlag(e,xn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,xn.ROTATE),r=!0),this.hasFlag(e,xn.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,xn.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,xn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,xn.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=wr;t&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new rt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===o?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=Re(t[this.rotatableSelector])||null,this.scalableNode=Re(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(Re(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),wr.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),r=n.size(),o=this.scalableNode,s=!1;o.node.getElementsByTagName("path").length>0&&(s=!0);var c=o.getBBox({recursive:s});o.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var _=this.rotatableNode,S=_&&_.attr("transform");if(S){_.attr("transform",S+" rotate("+-t+","+r.width/2+","+r.height/2+")");var y=o.getBBox({target:this.paper.cells});n.set("position",{x:y.x,y:y.y},wt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,r=(e.paper||this.paper).model,o=e.initialZIndices={},s=n.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...s,...c].forEach(_=>o[_.id]=_.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const h=r.getElements().reduce((_,S)=>Math.max(_,S.attributes.z||0),0);c.forEach(_=>{_.attributes.z<=h&&_.set("z",h+1,{ui:!0})}),n.stopBatch("to-front");const m=n.parent();m?(r.getCell(m).unembed(n,{ui:!0}),e.initialParentId=m):e.initialParentId=null},processEmbedding:function(e={},n,t,r){const o=e.model||this.model,s=e.paper||this.paper,c=s.model,{findParentBy:h,frontParentOnly:m,validateEmbedding:_}=s.options;let S;S=qe(h)?yt(h.call(c,this,n,t,r)):"pointer"===h?yt(c.findModelsFromPoint({x:t,y:r})):c.findModelsUnderElement(o,{searchBy:h}),S=S.filter(J=>J instanceof ni&&o.id!==J.id&&!J.isEmbeddedIn(o)),m&&(S=S.slice(-1));let y=null;const H=e.candidateEmbedView;for(let J=S.length-1;J>=0;J--){const ne=S[J];if(H&&H.model.id==ne.id){y=H;break}{const ye=ne.findView(s);if(!qe(_)||_.call(s,this,ye)){y=ye;break}}}y&&y!=H&&(this.clearEmbedding(e),e.candidateEmbedView=y.highlight(y.findProxyNode(null,"container"),{embedding:!0})),!y&&H&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,r=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=r.options,{initialParentId:s}=e;if(s&&"function"==typeof o&&!o.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(t,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,r=n||this.model,s=(e.paper||this.paper).model;switch(t){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:h,initialZIndices:m}=e;if(h){const{x:S,y}=h;r.position(S,y,{deep:!0,ui:!0})}m&&Object.keys(m).forEach(S=>{const y=s.getCell(S);y&&y.set("z",m[S],{ui:!0})});const _=s.getCell(c);_&&_.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const r=this.findAttribute("port",e);if(r){const o=this.findPortNode(r,t);if(o)return o}else{const[o]=this.findBySelector(t);if(o)return o}}return e},notifyPointerdown(e,n,t){cn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){cn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),cn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){cn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){cn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){cn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(r.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,r)},pointerup:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(r.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var o=r.targetMagnet;o&&this.magnetpointerclick(e,o,n,t),this.checkMouseleave(e)},mouseover:function(e){cn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){cn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){cn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){cn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,r){cn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,r)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,r){this.notify("element:magnet:pointerdblclick",e,n,t,r)},magnetcontextmenu:function(e,n,t,r){this.notify("element:magnet:contextmenu",e,n,t,r)},dragStart:function(e,n,t){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const o=r.model.position();r.eventData(e,{initialPosition:o,pointerOffset:o.difference(n,t),restrictedArea:this.paper.getRestrictedArea(r,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),o.options.validateMagnet(this,r,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,r,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),o.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var r=this.paper,o=r.options.gridSize,s=this.model,c=this.eventData(e),{pointerOffset:h,restrictedArea:m,embedding:_}=c,S=hi(n+h.x,o),y=hi(t+h.y,o);s.position(S,y,{restrictedArea:m,deep:!0,ui:!0}),r.options.embeddingMode&&(_||(this.prepareEmbedding(c),_=!0),this.processEmbedding(c,e,n,t)),this.eventData(e,{embedding:_})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,r){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,r)}},{Flags:xn});wt(Os.prototype,rd);const Nr=function(e,n,t){return e},Yu=function(e,n,t){var _,S,y,r=n.side||"bottom",o=qo(n.padding||40),s=t.sourceBBox,c=t.targetBBox,h=s.center(),m=c.center();switch(r){case"bottom":y=1,_="y",S="height";break;case"top":y=-1,_="y",S="height";break;case"left":y=-1,_="x",S="width";break;case"right":y=1,_="x",S="width";break;default:throw new Error("Router: invalid side")}return h[_]+=y*(s[S]/2+o[r]),m[_]+=y*(c[S]/2+o[r]),y*(h[_]-m[_])>0?m[_]=h[_]:h[_]=m[_],[h].concat(e,m)};var fc={N:"S",S:"N",E:"W",W:"E"},po={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Za(e,n,t){var r=new ve(e.x,n.y);return t.containsPoint(r)&&(r=new ve(n.x,e.y)),r}function qa(e,n){return e["W"===n||"E"===n?"width":"height"]}function cr(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function ks(e){return new rt(e.x,e.y,0,0)}function Tr(e){var n=qo(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function au(e,n){return e.sourceBBox.clone().moveAndExpand(Tr(n))}function dc(e,n){return e.targetBBox.clone().moveAndExpand(Tr(n))}function su(e,n,t){var r=new ve(e.x,n.y),o=new ve(n.x,e.y),s=cr(e,r),c=cr(e,o),h=fc[t],m=s===t||s!==h&&(c===h||c!==t)?r:o;return{points:[m],direction:cr(m,n)}}function uu(e,n,t){var r=Za(e,n,t);return{points:[r],direction:cr(r,n)}}function Ls(e,n,t,r){var m,o={},s=[new ve(e.x,n.y),new ve(n.x,e.y)],c=s.filter(function(y){return!t.containsPoint(y)}),h=c.filter(function(y){return cr(y,e)!==r});if(h.length>0)m=h.filter(function(y){return cr(e,y)===r}).pop(),o.points=[m=m||h[0]],o.direction=cr(m,n);else{m=ce(s,c)[0];var _=new ve(n).move(m,-qa(t,r)/2),S=Za(_,e,t);o.points=[S,_],o.direction=cr(_,n)}return o}function hc(e,n,t,r){var o=uu(n,e,r),s=o.points[0];if(t.containsPoint(s)){var c=(o=uu(e,n,t)).points[0];if(r.containsPoint(c)){var h=new ve(e).move(c,-qa(t,cr(e,c))/2),m=new ve(n).move(s,-qa(r,cr(n,s))/2),_=new ft(h,m).midpoint(),S=uu(e,_,t),y=su(_,n,S.direction);o.points=[S.points[0],y.points[0]],o.direction=y.direction}}return o}function Xu(e,n,t,r,o){var S,y,H,s={},c=t.union(r).inflate(1),h=c.center().distance(n)>c.center().distance(e),m=h?n:e,_=h?e:n;return o?(S=ve.fromPolar(c.width+c.height,po[o],m),S=c.pointNearestToPoint(S).move(S,-1)):S=c.pointNearestToPoint(m).move(m,1),y=Za(S,_,c),S.round().equals(y.round())?(y=ve.fromPolar(c.width+c.height,Fn(S.theta(m))+Math.PI/2,_),H=Za(S,y=c.pointNearestToPoint(y).move(_,1).round(),c),s.points=h?[y,H,S]:[S,H,y]):s.points=h?[y,S]:[S,y],s.direction=cr(h?S:y,n),s}function Ku(e,n,t){var r=au(t,n),o=dc(t,n),s=function ld(e,n){return e.sourceAnchor?e.sourceAnchor:au(e,n).center()}(t,n),c=function cd(e,n){return e.targetAnchor?e.targetAnchor:dc(e,n).center()}(t,n);r=r.union(ks(s)),o=o.union(ks(c)),(e=yt(e).map(ve)).unshift(s),e.push(c);for(var h,m=[],_=0,S=e.length-1;_<S;_++){var y=null,H=e[_],J=e[_+1],ne=!!cr(H,J);if(0===_)_+1===S?r.intersect(o.clone().inflate(1))?y=Xu(H,J,r,o):ne||(y=hc(H,J,r,o)):r.containsPoint(J)?y=Xu(H,J,r,ks(J).moveAndExpand(Tr(n))):ne||(y=uu(H,J,r));else if(_+1===S){var ye=ne&&cr(J,H)===h;o.containsPoint(H)||ye?y=Xu(H,J,ks(H).moveAndExpand(Tr(n)),o,h):ne||(y=Ls(H,J,o,h))}else ne||(y=su(H,J,h));y?(Array.prototype.push.apply(m,y.points),h=y.direction):h=cr(H,J),_+1<S&&m.push(J)}return m}var es={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!qe(Ku))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Ku(e,wt({},es,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function Qu(e){this.map={},this.options=e,this.mapGridSize=100}function Ta(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function lu(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function Ju(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function pc(e,n){return e.sourceAnchor?e.sourceAnchor:lu(e,n).center()}function Zu(e,n,t,r,o){var s=360/t,c=e.theta(function gc(e,n,t,r){var o=r.step;return new ve(e.x+(n.x-e.x)/t.x*o,e.y+(n.y-e.y)/t.y*o)}(e,n,r,o)),h=Dn(c+s/2);return s*Math.floor(h/s)}function cu(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function el(e,n){if(!e)return n;var t=Math.abs(e),r=Math.round(t/n);return r?n+(t-r*n)/r:t}function ts(e,n){return e.round(n)}function Ea(e,n,t){return ts(function vc(e,n){var t=n.source,r=hi(e.x-t.x,n.x)+t.x,o=hi(e.y-t.y,n.y)+t.y;return new ve(r,o)}(e.clone(),n),t)}function Ns(e){return e.clone().toString()}function fu(e){return new ve(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function mc(e,n,t,r,o,s,c){for(var y,h=[],m=fu(o.difference(t)),_=Ns(t),S=e[_];S;){var H=fu((y=n[_]).difference(S));H.equals(m)||(h.unshift(y),m=H),S=e[_=Ns(S)]}var J=n[_];return fu(J.difference(r)).equals(m)||h.unshift(J),h}function yc(e,n){for(var t=1/0,r=0,o=n.length;r<o;r++){var s=e.manhattanDistance(n[r]);s<t&&(t=s)}return t}function tl(e,n,t,r,o){var s=o.precision,c=o.directionMap,h=e.difference(n.center()),m=st(c)?Object.keys(c):[],_=yt(t),S=m.reduce(function(y,H){if(_.includes(H)){for(var Me,J=c[H],ne=new ve(e.x+J.x*(Math.abs(h.x)+n.width),e.y+J.y*(Math.abs(h.y)+n.height)),xe=new ft(e,ne).intersect(n)||[],Ae=xe.length,O=null,U=0;U<Ae;U++){var K=xe[U],ie=e.squaredDistance(K);(void 0===Me||ie>Me)&&(Me=ie,O=K)}if(O){var pe=Ea(O,r,s);n.containsPoint(pe)&&(pe=Ea(pe.offset(J.x*r.x,J.y*r.y),r,s)),y.push(pe)}}return y},[]);return n.containsPoint(e)||S.push(Ea(e,r,s)),S}function hd(e,n,t,r){var s,c,o=r.precision;s=ts(e instanceof rt?pc(this,r).clone():e.clone(),o),c=ts(n instanceof rt?function fd(e,n){return e.targetAnchor?e.targetAnchor:Ju(e,n).center()}(this,r).clone():n.clone(),o);var m,_,S,y,h=function qu(e,n,t){return{source:n.clone(),x:el(t.x-n.x,e),y:el(t.y-n.y,e)}}(r.step,s,c);if(S=e instanceof rt?tl(m=s,e,r.startDirections,h,r):[m=s],n instanceof rt?(_=c,y=tl(c,n,r.endDirections,h,r)):y=[_=c],S=S.filter(vn=>!t(vn)),y=y.filter(vn=>!t(vn)),S.length>0&&y.length>0){for(var H=new Ta,J={},ne={},ye={},xe=0,Ae=S.length;xe<Ae;xe++){var Me=S[xe],O=Ns(Me);H.add(O,yc(Me,y)),J[O]=Me,ye[O]=0}var ie,pe,U=r.previousDirectionAngle,K=void 0===U,Pe=r.directions;!function dd(e,n,t){var r=t.step;yt(t.directions).forEach(function(o){o.gridOffsetX=o.offsetX/r*n.x,o.gridOffsetY=o.offsetY/r*n.y})}(0,h,r);for(var Oe=Pe.length,ze=yt(y).reduce(function(vn,Nt){var gt=Ns(Nt);return vn.push(gt),vn},[]),tt=r.maximumLoops;!H.isEmpty()&&tt>0;){var Sn,Je=H.pop(),ot=J[Je],ht=ne[Je],pt=ye[Je],Pt=void 0===ht,kn=ot.equals(m);Sn=Pt?K?kn?null:Zu(m,ot,Oe,h,r):U:Zu(ht,ot,Oe,h,r);var Bn=S.length===y.length;if(Bn)for(var kt=0;kt<S.length;kt++)if(!S[kt].equals(y[kt])){Bn=!1;break}if((!Pt||!Bn)&&ze.indexOf(Je)>=0)return r.previousDirectionAngle=Sn,mc(ne,J,ot,m,_);for(xe=0;xe<Oe;xe++){var Dt=(ie=Pe[xe]).angle;if(pe=cu(Sn,Dt),K&&kn||!(pe>r.maxAllowedDirectionChange)){var Ft=Ea(ot.clone().offset(ie.gridOffsetX,ie.gridOffsetY),h,o),pn=Ns(Ft);if(!H.isClose(pn)&&!t(Ft)){if(ze.indexOf(pn)>=0&&!Ft.equals(_)&&cu(Dt,Zu(Ft,_,Oe,h,r))>r.maxAllowedDirectionChange)continue;var qt=pt+ie.cost+(kn?0:r.penalties[pe]);(!H.isOpen(pn)||qt<ye[pn])&&(J[pn]=Ft,ne[pn]=ot,ye[pn]=qt,H.add(pn,qt+yc(Ft,y)))}}}tt--}}return r.fallbackRoute.call(this,m,_,r)}Qu.prototype.build=function(e,n){var t=this.options,r=yt(t.excludeEnds).reduce(function(m,_){var S=n.get(_);if(S){var y=e.getCell(S.id);y&&m.push(y)}return m},[]),o=[],s=e.getCell(n.get("source").id);s&&(o=We(o,s.getAncestors().map(function(m){return m.id})));var c=e.getCell(n.get("target").id);c&&(o=We(o,c.getAncestors().map(function(m){return m.id})));var h=this.mapGridSize;return e.getElements().reduce(function(m,_){var S=yt(t.excludeTypes).includes(_.get("type")),y=r.find(function(U){return U.id===_.id}),H=o.includes(_.id);if(!(S||y||H))for(var ne=_.getBBox().moveAndExpand(t.paddingBox),ye=ne.origin().snapToGrid(h),xe=ne.corner().snapToGrid(h),Ae=ye.x;Ae<=xe.x;Ae+=h)for(var Me=ye.y;Me<=xe.y;Me+=h){var O=Ae+"@"+Me;m[O]=m[O]||[],m[O].push(ne)}return m},this.map),this},Qu.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return yt(this.map[n]).every(function(t){return!t.containsPoint(e)})},Ta.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=Zs(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(t,0,e)},Ta.prototype.remove=function(e){this.hash[e]=this.CLOSE},Ta.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},Ta.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},Ta.prototype.isEmpty=function(){return 0===this.items.length},Ta.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const Rs=function(e,n,t){return function xc(e,n,t){(function nl(e){if(e.directions=He(e,"directions"),e.penalties=He(e,"penalties"),e.paddingBox=He(e,"paddingBox"),e.padding=He(e,"padding"),e.padding){var n=qo(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}yt(e.directions).forEach(function(t){var r=new ve(0,0),o=new ve(t.offsetX,t.offsetY);t.angle=Dn(r.theta(o))})})(n),t.options.perpendicular=!!n.perpendicular;var r=lu(t,n),o=Ju(t,n),s=pc(t,n);let c;if("function"==typeof n.isPointObstacle)c=n.isPointObstacle;else{const O=new Qu(n);O.build(t.paper.model,t.model),c=U=>!O.isPointAccessible(U)}for(var S,y,h=yt(e).map(ve),m=[],_=s,H=0,J=h.length;H<=J;H++){var ne=null;if(y=S||r,!(S=h[H])&&(S=o,(!t.model.get("source").id||!t.model.get("target").id)&&qe(n.draggingRoute))){var xe=y===r?s:y,Ae=S.origin();ne=n.draggingRoute.call(t,xe,Ae,n)}if(null===(ne=ne||hd.call(t,y,S,c,n)))return n.fallbackRouter(e,n,t);var Me=ne[0];Me&&Me.equals(_)&&ne.shift(),_=ne[ne.length-1]||_,Array.prototype.push.apply(m,ne)}return m}(e,wt({},es,n),t)};var pd={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var r=e.theta(n),o=[],s={x:n.x,y:e.y},c={x:e.x,y:n.y};if(r%180>90){var h=s;s=c,c=h}var m=r%90<45?s:c,_=new ft(e,m),S=90*Math.ceil(r/90),y=ve.fromPolar(_.squaredLength(),Fn(S+135),m),H=new ft(n,y),J=_.intersection(H),ne=J||n,xe=360/t.directions.length,Ae=(J?ne:e).theta(n),Me=Dn(Ae+xe/2),O=xe*Math.floor(Me/xe);return t.previousDirectionAngle=O,ne&&o.push(ne.round()),o.push(n),o}};const rl=function(e,n,t){if(!qe(Rs))throw new Error("Metro requires the manhattan router.");return Rs(e,wt({},pd,n),t)};var bc=["arc","gap","cubic"],_c=["smooth"],du=1/3,hu=2/3;function ri(e,n,t){var r=[].concat(e,t,n);return r.reduce(function(o,s,c){var h=r[c+1];return null!=h&&(o[c]=_i(s,h)),o},[])}function ol(e,n){return _i(e,n).squaredLength()}function ii(e,n,t,r){var s,o=new Ct;return s=Ct.createSegment("M",e[0].start),o.appendSegment(s),yt(e).forEach(function(c,h){if(c.isJump){var m,_,S,y;if("arc"===t){m=-90,_=c.start.difference(c.end);var H=Number(_.x<0||0===_.x&&_.y<0);H&&(m+=180);var ye,J=c.midpoint(),ne=new ft(J,c.end).rotate(J,m);S=(ye=new ft(c.start,J)).pointAt(2/3).rotate(c.start,m),y=ne.pointAt(1/3).rotate(ne.end,-m),s=Ct.createSegment("C",S,y,ne.end),o.appendSegment(s),ye=new ft(J,c.end),S=ne.pointAt(1/3).rotate(ne.end,m),y=ye.pointAt(1/3).rotate(c.end,-m),s=Ct.createSegment("C",S,y,c.end),o.appendSegment(s)}else if("gap"===t)s=Ct.createSegment("M",c.end),o.appendSegment(s);else if("cubic"===t){m=c.start.theta(c.end);var xe=.6*n,Ae=1.35*n;_=c.start.difference(c.end),(H=Number(_.x<0||0===_.x&&_.y<0))&&(Ae*=-1),S=ve(c.start.x+xe,c.start.y+Ae).rotate(c.start,m),y=ve(c.end.x-xe,c.end.y+Ae).rotate(c.end,m),s=Ct.createSegment("C",S,y,c.end),o.appendSegment(s)}}else{var Me=e[h+1];0==r||!Me||Me.isJump?(s=Ct.createSegment("L",c.end),o.appendSegment(s)):function na(e,n,t,r,o){var J,s=t.distance(r)/2,c=t.distance(o)/2,h=-Math.min(e,s),m=-Math.min(e,c),_=t.clone().move(r,h).round(),S=t.clone().move(o,m).round(),y=new ve(du*_.x+hu*t.x,hu*t.y+du*_.y),H=new ve(du*S.x+hu*t.x,hu*t.y+du*S.y);J=Ct.createSegment("L",_),n.appendSegment(J),J=Ct.createSegment("C",y,H,S),n.appendSegment(J)}(r,o,c.end,c.start,Me.end)}}),o}const al=function(e,n,t,r){!function vd(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var r=n.model;r.on("batch:stop",function(){this.hasActiveBatch()||function pu(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const r=n[t],o=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(o)}}(n)}),r.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var o=r.raw,s=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),h=r.radius||0,m=r.ignoreConnectors||_c;-1===bc.indexOf(c)&&(c=bc[0]);var _=this.paper,y=_.model.getLinks();if(1===y.length)return ii(ri(e,n,t),s,c,h);var H=this.model,J=y.indexOf(H),ne=_.options.defaultConnector||{},ye=y.filter(function(K,ie){var pe=K.get("connector")||ne;return!(yt(m).includes(pe.name)||ie>J&&"jumpover"===pe.name)}),xe=ye.map(function(K){return _.findViewByModel(K)}),Ae=ri(e,n,t),Me=xe.map(function(K){return null==K?[]:K===this?Ae:ri(K.sourcePoint,K.targetPoint,K.route)},this),O=Ae.reduce(function(K,ie){var pe=ye.reduce(function(Pe,Oe,ze){if(Oe!==H){var tt=function il(e,n){return yt(n).reduce(function(t,r){var o=e.intersection(r);return o&&t.push(o),t},[])}(ie,Me[ze]);Pe.push.apply(Pe,tt)}return Pe},[]).sort(function(Pe,Oe){return ol(ie.start,Pe)-ol(ie.start,Oe)});return pe.length>0?K.push.apply(K,function Cc(e,n,t){return n.reduce(function(r,o,s){if(!0===o.skip)return r;var c=r.pop()||e,h=Wn(o).move(c.start,-t),m=Wn(o).move(c.start,+t),_=n[s+1];if(null!=_){var S=m.distance(_);S<=t&&(m=_.move(c.start,S),_.skip=!0)}else if(h.distance(c.end)<2*t+1)return r.push(c),r;if(m.distance(c.start)<2*t+1)return r.push(c),r;var J=_i(h,m);return J.isJump=!0,r.push(_i(c.start,h),J,_i(m,c.end)),r},[])}(ie,pe,s)):K.push(ie),K},[]),U=ii(O,s,c,h);return o?U:U.serialize()},wc=function(e,n,t,r){var o=r&&r.raw,s=[e].concat(t).concat([n]),c=new ln(s),h=new Ct(c);return o?h:h.serialize()},gu=function(e,n,t,r){r||(r={});var h,o=r.radius||10,s=r.raw,c=new Ct;h=Ct.createSegment("M",e),c.appendSegment(h);for(var S,y,H,J,ne,ye,xe,Ae,Me,O,U,m=1/3,_=2/3,K=0,ie=t.length;K<ie;K++)S=new ve(t[K]),y=t[K-1]||e,H=t[K+1]||n,J=ne||S.distance(y)/2,ne=S.distance(H)/2,ye=-Math.min(o,J),xe=-Math.min(o,ne),Ae=S.clone().move(y,ye).round(),Me=S.clone().move(H,xe).round(),O=new ve(m*Ae.x+_*S.x,_*S.y+m*Ae.y),U=new ve(m*Me.x+_*S.x,_*S.y+m*Me.y),h=Ct.createSegment("L",Ae),c.appendSegment(h),h=Ct.createSegment("C",O,U,Me),c.appendSegment(h);return h=Ct.createSegment("L",n),c.appendSegment(h),s?c:c.serialize()},Sc=function(e,n,t,r){var s,o=r&&r.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([n]),h=dn.throughPoints(c);s=new Ct(h)}else{var m;if(s=new Ct,m=Ct.createSegment("M",e),s.appendSegment(m),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var _=(e.x+n.x)/2;m=Ct.createSegment("C",_,e.y,_,n.y,n.x,n.y),s.appendSegment(m)}else{var S=(e.y+n.y)/2;m=Ct.createSegment("C",e.x,S,n.x,S,n.x,n.y),s.appendSegment(m)}}return o?s:s.serialize()},oi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},jr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ds=function(e,n,t=[],r={},o){const s=Boolean(r.raw),{direction:c=oi.AUTO,precision:h=3}=r,m={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new ve(r.sourceTangent):null,targetTangent:r.targetTangent?new ve(r.targetTangent):null};m.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new ve(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new ve(r.sourceDirection).normalize():null,m.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new ve(1,0).rotate(null,r.targetDirection):r.targetDirection?new ve(r.targetDirection).normalize():null;const _=[e,...t.map(ye=>new ve(ye)),n];let S,y;if(m.sourceTangent)S=m.sourceTangent;else{const ye=function Ic(e,n,t,r){if(r.sourceDirection)switch(r.sourceDirection){case jr.UP:return new ve(0,-1);case jr.DOWN:return new ve(0,1);case jr.LEFT:return new ve(-1,0);case jr.RIGHT:return new ve(1,0);case jr.AUTO:return ul(e,n);case jr.CLOSEST_POINT:return vu(0,n);case jr.OUTWARDS:return Ec(e,n);default:return r.sourceDirection}switch(t){case oi.HORIZONTAL:return function sl(e,n,t){const{sourceBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.x>n[1].x?"right":"left",o)?new ve(-1,0):new ve(1,0)}(e,n);case oi.VERTICAL:return function md(e,n,t){const{sourceBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.y>n[1].y?"bottom":"top",o)?new ve(0,-1):new ve(0,1)}(e,n);case oi.CLOSEST_POINT:return vu(0,n);case oi.OUTWARDS:return Ec(e,n);default:return ul(e,n)}}(o,_,c,m),xe=_[0].distance(_[1])*m.coeff,Me=mu(ye,_[1].difference(_[0]).normalize());if(Me>Math.PI/4){const O=xe+(Me-Math.PI/4)*m.angleTangentCoefficient;S=ye.clone().scale(O,O)}else S=ye.clone().scale(xe,xe)}if(m.targetTangent)y=m.targetTangent;else{const ye=function Ac(e,n,t,r){if(r.targetDirection)switch(r.targetDirection){case jr.UP:return new ve(0,-1);case jr.DOWN:return new ve(0,1);case jr.LEFT:return new ve(-1,0);case jr.RIGHT:return new ve(0,1);case jr.AUTO:return ll(e,n);case jr.CLOSEST_POINT:return Tc(0,n);case jr.OUTWARDS:return Pc(e,n);default:return r.targetDirection}switch(t){case oi.HORIZONTAL:return function ra(e,n,t){const{targetBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.x>n[n.length-2].x?"left":"right",o)?new ve(-1,0):new ve(1,0)}(e,n);case oi.VERTICAL:return function ia(e,n,t){const{targetBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.y>n[n.length-2].y?"top":"bottom",o)?new ve(0,-1):new ve(0,1)}(e,n);case oi.CLOSEST_POINT:return Tc(0,n);case oi.OUTWARDS:return Pc(e,n);default:return ll(e,n)}}(o,_,c,m),xe=_.length-1,Ae=_[xe-1].distance(_[xe])*m.coeff,O=mu(ye,_[xe-1].difference(_[xe]).normalize());if(O>Math.PI/4){const U=Ae+(O-Math.PI/4)*m.angleTangentCoefficient;y=ye.clone().scale(U,U)}else y=ye.clone().scale(Ae,Ae)}const J=function ai(e,n,t,r){const{tau:o,coeff:s}=r,c=[],h=[],m=[],_=e.length-1;for(let S=0;S<_;S++)c[S]=e[S].distance(e[S+1]);h[0]=n,h[_]=t;for(let S=1;S<_;S++){let y,H;y=1===S?e[S-1].clone().offset(h[S-1].x,h[S-1].y):e[S-1].clone(),H=S===_-1?e[S+1].clone().offset(h[S+1].x,h[S+1].y):e[S+1].clone();const J=y.difference(e[S]).normalize(),ne=H.difference(e[S]).normalize(),ye=mu(J,ne);let Ae,xe=(Math.PI-ye)/2;const Me=cl(J,ne);let O;O=cl(e[S].difference(e[S+1]),e[S].difference(e[S-1])),Me<0&&(xe=-xe),ye<Math.PI/2&&(xe<0&&O<0||xe>0&&O>0)&&(xe-=Math.PI),Ae=ne.clone(),yd(Ae,xe);const U=Ae.clone(),K=Ae.clone(),ie=c[S-1]*s,pe=c[S]*s;U.scale(ie,ie),K.scale(pe,pe),h[S]=[U,K]}for(let S=0;S<_;S++){let y,H;y=0===S?e[S+1].difference(h[S].x/o,h[S].y/o):e[S+1].difference(h[S][1].x/o,h[S][1].y/o),H=S===_-1?e[S].clone().offset(h[S+1].x/o,h[S+1].y/o):e[S].difference(h[S+1][0].x/o,h[S+1][0].y/o),m[S]=[y,e[S],e[S+1],H]}return m}(_,S,y,m).map(ye=>function go(e,n){const{tau:t}=n,r=new ve;r.x=e[1].x+(e[2].x-e[0].x)/(6*t),r.y=e[1].y+(e[2].y-e[0].y)/(6*t);const o=new ve;return o.x=e[2].x+(e[3].x-e[1].x)/(6*t),o.y=e[2].y+(e[3].y-e[1].y)/(6*t),new dn(e[1],r,o,e[2])}(ye,m)),ne=new Ct(J).round(h);return s?ne:ne.serialize()};function ul(e,n,t){const{sourceBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[0]:n[1]),o){case"top":return new ve(0,-1);case"bottom":return new ve(0,1);case"right":return new ve(1,0);case"left":return new ve(-1,0)}}function ll(e,n,t){const{targetBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[n.length-1]:n[n.length-2]),o){case"top":return new ve(0,-1);case"bottom":return new ve(0,1);case"right":return new ve(1,0);case"left":return new ve(-1,0)}}function vu(e,n,t){return n[1].difference(n[0]).normalize()}function Tc(e,n,t){const r=n.length-1;return n[r-1].difference(n[r]).normalize()}function Ec(e,n,t){const{sourceBBox:r}=e,o=r.center();return n[0].difference(o).normalize()}function Pc(e,n,t){const{targetBBox:r}=e,o=r.center();return n[n.length-1].difference(o).normalize()}function yd(e,n){const t=Math.cos(n),r=Math.sin(n),s=r*e.x+t*e.y;e.x=t*e.x-r*e.y,e.y=s}function mu(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function cl(e,n){return e.x*n.y-e.y*n.x}Ds.Directions=oi,Ds.TangentDirections=jr;const Gt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Fs=cn.extend({className:function(){var e=cn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){cn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Gt.RENDER],attrs:[Gt.UPDATE],router:[Gt.UPDATE],connector:[Gt.CONNECTOR],smooth:[Gt.UPDATE],manhattan:[Gt.UPDATE],toolMarkup:[Gt.LEGACY_TOOLS],labels:[Gt.LABELS],labelMarkup:[Gt.LABELS],vertices:[Gt.VERTICES,Gt.UPDATE],vertexMarkup:[Gt.VERTICES],source:[Gt.SOURCE,Gt.UPDATE],target:[Gt.TARGET,Gt.UPDATE]},initFlag:[Gt.RENDER,Gt.SOURCE,Gt.TARGET,Gt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,Gt.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Gt.SOURCE)}if(this.hasFlag(e,Gt.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Gt.TARGET)}const{paper:t,sourceView:r,targetView:o}=this;if(t&&(r&&!t.isViewMounted(r)||o&&!t.isViewMounted(o)))return e;if(this.hasFlag(e,Gt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[Gt.RENDER,Gt.UPDATE,Gt.VERTICES,Gt.LABELS,Gt.TOOLS,Gt.LEGACY_TOOLS,Gt.CONNECTOR]);let s=!1;this.hasFlag(e,Gt.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,Gt.VERTICES));const{model:c}=this,{attributes:h}=c;let m=this.hasFlag(e,Gt.LABELS),_=this.hasFlag(e,Gt.LEGACY_TOOLS);m&&(this.onLabelsChange(c,h.labels,n),e=this.removeFlag(e,Gt.LABELS),s=!0),_&&(this.renderTools(),e=this.removeFlag(e,Gt.LEGACY_TOOLS));const S=this.hasFlag(e,Gt.UPDATE),y=this.hasFlag(e,Gt.CONNECTOR);return(S||y)&&(S?n.translateBy&&c.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[Gt.UPDATE,Gt.TOOLS,Gt.CONNECTOR]),m=!1,_=!1,s=!0),m&&this.updateLabelPositions(),_&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,Gt.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,Gt.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Gt.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],r=t.length;if(r>1&&n[t[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=Re(e);Array.isArray(n)||(n=[n]);for(var t=this._V,r=0,o=n.length;r<o;r++){var s=n[r],c=s.attr("class");c&&(c=$r(c),t[sn.camelCase(c)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=Re(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)t.appendChild(n[r].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Re("g").append(n):Re(r[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},r=this._labelSelectors={},o=this.model,s=o.attributes.labels||[],c=s.length;if(0===c)return n&&n.remove(),this;n?n.empty():(n=e.labels=Re("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(Fr(He(this,"className"))),n.attr("model-id",o.id)));for(var h=0;h<c;h++){var S,y,_=this._normalizeLabelMarkup(this._getLabelMarkup(s[h].markup));if(_)S=_.node,y=_.selectors;else{var J=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),ne=o._getDefaultLabel(),xe=this._normalizeLabelMarkup(this._getLabelMarkup(ne.markup))||J;S=xe.node,y=xe.selectors}S.setAttribute("label-idx",h),n.append(S),t[h]=S;var Ae=this.selector;if(y[Ae])throw new Error("dia.LinkView: ambiguous label root selector.");y[Ae]=S,r[h]=y}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:r,options:o}=this,{labels:s}=r;if(!s||!t.hasLabels())return;const{node:c}=s;o.labelsLayer?n.getLayerView(o.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){cn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const r=this._labelSelectors[e],[o=null]=this.findBySelector(n,t,r);return o},_mergeLabelAttrs:function(e,n,t,r){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:r:e?t:Mt({},r,t):e?Mt({},t,n):Mt({},r,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,s=e._getDefaultLabel(),c=s.markup,h=s.attrs,m=0,_=n.length;m<_;m++){var S=this._labelCache[m];S.setAttribute("cursor",t?"move":"default");var y=this._labelSelectors[m],H=n[m],ye=this._mergeLabelAttrs(H.markup||c,H.attrs,h,o);this.updateDOMSubtreeAttributes(S,ye,{rootBBox:new rt(H.size),selectors:y})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=sn(this._V.linkTools.node).empty(),n=ur(this.model.get("toolMarkup")||this.model.toolMarkup),t=Re(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=ur(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Re(n())):r=t.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=sn(this._V.markerVertices.node).empty(),n=ur(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,r){e.append(Re(n(wt({idx:r},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=sn(this._V.markerArrowheads.node);e.empty();var n=ur(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Re(n({end:"source"})),this._V.targetArrowhead=Re(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),o=[this.sourceAnchor,...r,this.targetAnchor],s=o.length,c=new ln(o);c.simplify({threshold:.001});const h=c.points.map(_=>_.toJSON()),m=h.length;return s===m?0:(t.vertices(h.slice(1,m-1),e),s-m)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ve(this.sourceAnchor);case"target":return new ve(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ve(this.sourcePoint);case"target":return new ve(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:r}=this;if(!t||!r)return;const o=new ln(t);o.translate(e,n),this.route=o.points,this._translateConnectionPoints(e,n),r.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),r=this.sourceAnchor=t.source,o=this.targetAnchor=t.target,s=this.findRoute(n);this.route=s;var c=this.findConnectionPoints(s,r,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,r=this.findMarkerPoints(e,n,t),o=this.findPath(e,r.source||n,r.target||t);this.path=o},findMarkerPoints:function(e,n,t){var c,h,r=e[0],o=e[e.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),c=ve(n).move(r||t,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),h=ve(t).move(o||n,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=c||n.clone(),s.targetPoint=h||t.clone(),{source:c,target:h}},findAnchorsOrdered:function(e,n,t,r){var o,s,c,h,m=this.model,_=m.get(e),S=m.get(t),y=this.getEndView(e),H=this.getEndView(t),J=this.getEndMagnet(e),ne=this.getEndMagnet(t);y?(c=n?new ve(n):H?ne:new ve(S),o=this.getAnchor(_.anchor,y,J,c,e)):o=new ve(_),H?(h=new ve(r||o),s=this.getAnchor(S.anchor,H,ne,h,t)):s=new ve(S);var ye={};return ye[e]=o,ye[t]=s,ye},findAnchors:function(e){var n=this.model,t=e[0],r=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",r,"source",t):this.findAnchorsOrdered("source",t,"target",r)},findConnectionPoints:function(e,n,t){var y,H,J,Ae,r=e[0],o=e[e.length-1],s=this.model,c=s.get("source"),h=s.get("target"),m=this.sourceView,_=this.targetView,S=this.paper.options;if(m&&!m.isNodeConnection(this.sourceMagnet)){y=this.sourceMagnet||m.el;var ne=c.connectionPoint||S.defaultConnectionPoint,xe=new ft(r||t,n);J=this.getConnectionPoint(ne,m,y,xe,"source")}else J=n;if(_&&!_.isNodeConnection(this.targetMagnet)){H=this.targetMagnet||_.el;var Me=h.connectionPoint||S.defaultConnectionPoint,U=new ft(o||n,t);Ae=this.getConnectionPoint(Me,_,H,U,"target")}else Ae=t;return{source:J,target:Ae}},getAnchor:function(e,n,t,r,o){var h,s=n.isNodeConnection(t),c=this.paper.options;if(e||(e=s?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)h=e;else{var m=e.name;if("function"!=typeof(h=c[s?"linkAnchorNamespace":"anchorNamespace"][m]))throw new Error("Unknown anchor: "+m)}var S=h.call(this,n,t,r,e.args||{},o,this);return S?S.round(this.decimalsRounding):new ve},getConnectionPoint:function(e,n,t,r,o){var s,_,c=r.end,h=this.paper.options;if("function"==typeof h.linkConnectionPoint&&(s=h.linkConnectionPoint(this,n,t===n.el?void 0:t,r.start,o)))return s;if(!e)return c;if("function"==typeof e)_=e;else{var S=e.name;if("function"!=typeof(_=h.connectionPointNamespace[S]))throw new Error("Unknown connection point: "+S)}return(s=_.call(this,r,n,t,e.args||{},o,this))?s.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var o=n._builtins.defaultLabel.position,s=n._getDefaultLabel(),c=this._normalizeLabelPosition(s.position),h=Mt({},o,c),m=0,_=t.length;m<_;m++){var S=this._labelCache[m];if(S){var H=this._normalizeLabelPosition(t[m].position),J=Mt({},h,H),ne=this._getLabelTransformationMatrix(J);S.setAttribute("transform",Re.matrixToTransformString(ne)),this._cleanLabelMatrices(m)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,r=t[e];if(r)for(let o in r){const{id:s}=r[o];s&&s in n&&delete n[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var r=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(r=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===sn.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,r=`${e}View`,o=n.get(e),s=o&&o.id;if(!s)return this[r]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(s);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const h=c.findView(t);return!!h&&(this[r]=h,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let r=t.getMagnetFromLinkEnd(this.model.get(e));r===t.el&&(r=null),this[n]=r}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=yt(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:Mt({},n,e)},addLabel:function(e,n,t,r){var o,s,h,c=0;"number"!=typeof e?(o=e.x,s=e.y,"number"==typeof n?(c=n,h=t):h=n):(o=e,s=n,"number"==typeof t?(c=t,h=r):h=t);var m=this._getDefaultLabelPositionArgs(),S=this._mergeLabelPositionArgs(h,m),y={position:this.getLabelPosition(o,s,c,S)};return this.model.insertLabel(-1,y,h),-1},addVertex:function(e,n,t){var r="number"!=typeof e,o=r?e.x:e,s=r?e.y:n,c=r?n:t,h={x:o,y:s},m=this.getVertexIndex(o,s);return this.model.insertVertex(m,h,c),m},sendToken:function(e,n,t){var o,s,c;st(n)?(o=n.duration,s="reverse"===n.direction,c=n.connection):(o=n,s=!1,c=null);var h={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(h.keyPoints="1;0",h.keyTimes="0;1");var _,m=Re(e);if("string"==typeof c)_=this.findBySelector(c,this.el,this.selectors)[0];else{var S=this._V;_=S.connection?S.connection.node:this.el.querySelector("path")}if(!(_ instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");m.appendTo(this.paper.cells).animateAlongPath(h,_),setTimeout(function r(y,H){return function(){y.remove(),"function"==typeof H&&H()}}(m,t),o)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||b,t=this.model.router(),r=this.paper.options.defaultRouter;if(!t){if(!r)return e.map(ve);t=r}var o=qe(t)?t:n[t.name];if(!qe(o))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return o.call(this,e,t.args||{},this)||e.map(ve)},findPath:function(e,n,t){var r=this.paper.options.connectorNamespace||A,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=qe(o)?o:r[o.name];if(!qe(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var h=lr(o.args||{});h.raw=!0;var m=c.call(this,n,t,e,h,this);return"string"==typeof m&&(m=new Ct(Re.normalizePathData(m))),m},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(On(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,r){var c,o={},s=0;"number"==typeof t?(s=t,c=r):c=t,c&&(o.args=c);var ye,xe,h=!(c&&c.absoluteDistance),m=c&&c.absoluteDistance&&c.reverseDistance,_=c&&c.absoluteOffset,S=this.path,y={segmentSubdivisions:this.getConnectionSubdivisions()},H=new ve(e,n),J=S.closestPointT(H,y),ne=S.lengthAtT(J,y);if(h&&(ne=ne/this.getConnectionLength()||0),m&&(ne=-1*(this.getConnectionLength()-ne)||1),o.distance=ne,_||(ye=S.tangentAtT(J)),ye)xe=ye.pointOffset(H);else{var Ae=S.pointAtT(J),Me=H.difference(Ae);xe={x:Me.x,y:Me.y}}return o.offset=xe,o.angle=s,o},_getLabelTransformationMatrix:function(e){var n,t=0,r={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},n=e.distance,t=e.angle||0}var o=n>0&&n<=1,s=0,c={x:0,y:0};if(e.offset){var h=e.offset;"number"==typeof h&&(s=h),h.x&&(c.x=h.x),h.y&&(c.y=h.y)}var ye,m=0!==c.x||0!==c.y||0===s,_=r.keepGradient,S=r.ensureLegibility,y=this.path,H={segmentSubdivisions:this.getConnectionSubdivisions()},J=o?n*this.getConnectionLength():n,ne=y.tangentAtLength(J,H),xe=t;if(ne){if(m)(ye=ne.start).offset(c);else{var Ae=ne.clone();Ae.rotate(ne.start,-90),Ae.setLength(s),ye=Ae.end}_&&(xe=ne.angle()+t,S&&(xe=Dn((xe+90)%180-90)))}else ye=y.start,m&&ye.offset(c);return Re.createSVGMatrix().translate(ye.x,ye.y).rotate(xe)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new ve(n.e,n.f)},getVertexIndex:function(e,n){for(var r=this.model.vertices(),o=this.getClosestPointLength(new ve(e,n)),s=0,c=r.length;s<c&&!(o<this.getClosestPointLength(r[s]));s++);return s},notifyPointerdown(e,n,t){cn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){cn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),cn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){cn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){cn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){cn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}r&&wt(r,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){cn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){cn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){cn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){cn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,r){cn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){var o=Re(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,r)}this.notifyPointerdown(e,t,r),this.paper.delegateDragEvents(this,e.data)}else cn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var r=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),s=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),h=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(c,h);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:s,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),s=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var r=this.eventData(e),o={position:this.getLabelPosition(n,t,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(r.labelIdx,o)},dragVertex:function(e,n,t){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var r=this.eventData(e);this.model.translate(n-r.dx,t-r.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var r=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,n,t),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,r=e.initialEnd,o=this.model.prop(t);if(o&&!ko.endsEqual(r,o)){var c=this.paper;r.id&&this.notify("link:disconnect",n,c.findViewByModel(r.id),e.initialMagnet,t),o.id&&this.notify("link:connect",n,c.findViewByModel(o.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:r}=this,{snapLinks:o,connectionStrategy:s}=r.options,c=this.eventData(e);var h=o.radius||50,m=r.findViewsInArea({x:n-h,y:t-h,width:2*h,height:2*h}),_=c.closestView||null,S=c.closestMagnet||null,y=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var H=Number.MAX_VALUE,J=new ve(n,t);m.forEach(function(U){const K=[];"false"!==U.el.getAttribute("magnet")&&K.push({bbox:U.model.getBBox(),magnet:U.el}),U.$("[magnet]").toArray().forEach(ie=>{K.push({bbox:U.getNodeBBox(ie),magnet:ie})}),K.forEach(ie=>{const{magnet:pe,bbox:Pe}=ie,Oe=Pe.center().squaredDistance(J);Oe<H&&(S===pe||r.options.validateConnection.apply(r,c.validateConnectionArgs(U,U.el===pe?null:pe)))&&(H=Oe,c.closestView=U,c.closestMagnet=pe)})},this);var ne,ye=null,xe=c.closestView,Ae=c.closestMagnet;Ae&&(ye=c.magnetProxy=xe.findProxyNode(Ae,"highlighter"));var Me=c.arrowhead,O=S!==Ae;if(_&&O&&_.unhighlight(y,{connecting:!0,snapping:!0}),xe){const{prevEnd:U,prevX:K,prevY:ie}=c;if(c.prevX=n,c.prevY=t,!O&&("function"!=typeof s||K===n&&ie===t)||(ne=xe.getLinkEnd(Ae,n,t,this.model,Me),!O&&De(U,ne)))return;c.prevEnd=ne,O&&xe.highlight(ye,{connecting:!0,snapping:!0})}else ne={x:n,y:t};this.model.set(Me,ne||{x:n,y:t},{ui:!0}),_&&this.notify("link:snap:disconnect",e,_,S,Me),xe&&this.notify("link:snap:connect",e,xe,Ae,Me)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,r){const{paper:o,model:s}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=o.findView(e);if(c){const h=r.magnetUnderPointer=c.findMagnet(e),m=r.magnetProxy=c.findProxyNode(h,"highlighter");h&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(c,h))?m&&c.highlight(m,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,s.set(r.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:s,magnetProxy:c,arrowhead:h}=e;if(!s||!c||!o)return;o.unhighlight(c,{connecting:!0});const m=o.getLinkEnd(s,n,t,r,h);r.set(h,m,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,r=0,o=0;"source"===e?(r=2,t="target"):(o=2,t="source");var s=this.model.get(t);if(s.id){var c=n[r]=this.paper.findViewByModel(s.id),h=c.getMagnetFromLinkEnd(s);h===c.el&&(h=void 0),n[r+1]=h}return function m(_,S){return n[o]=_,n[o+1]=_.el===S?void 0:S,n}},_markAvailableMagnets:function(e){function n(y,H){var J=y.paper;return J.options.validateConnection.apply(J,this.validateConnectionArgs(y,H))}var t=this.paper,r=t.model.getCells();e.marked={};for(var o=0,s=r.length;o<s;o++){var c=r[o].findView(t);if(c){var h=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&h.push(c.el);var m=h.filter(n.bind(e,c));if(m.length>0){for(var _=0,S=m.length;_<S;_++)c.highlight(m[_],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=m}}}},_unmarkAvailableMagnets:function(e){for(var t,r,n=Object.keys(e.marked),o=0,s=n.length;o<s;o++){r=e.marked[t=n[o]];var c=this.paper.findViewByModel(t);if(c){for(var h=0,m=r.length;h<m;h++)c.unhighlight(r[h],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:lr(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){cn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Gt});Object.defineProperty(Fs.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new rt(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new rt(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(Fs.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new rt(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new rt(this.targetAnchor):e.getNodeBBox(t||e.el)}});const si={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},rs=Sa.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Fr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let s in t)s=+s,s<e&&s>o&&(o=s);return n.insertBefore(r,o!==-1/0?t[o].nextSibling:n.firstChild),r},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),Mc=Do.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:r}=t;let o;try{const s=Re(n);if(o=s.convertToPathData().trim(),"PATH"===s.tagName()&&r){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(s){const c=e.getNodeBoundingRect(n);o=Re.rectToPath(wt({},t,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:r}=this,{padding:o,layer:s}=r;let c=e.getNodeMatrix(n);if(o){!s&&n===e.el&&t.remove();let h=e.getNodeBoundingRect(n);const m=h.x+h.width/2,_=h.y+h.height/2;h=Re.transformRect(h,c);const S=Math.max(h.width,1),y=Math.max(h.height,1),H=(S+o)/S,J=(y+o)/y,ne=Re.createSVGMatrix({a:H,b:0,c:0,d:J,e:m-H*m,f:_-J*_});c=c.multiply(ne)}t.attr({d:this.getPathData(e,n),transform:Re.matrixToTransformString(c)})},highlight(e,n){const{vel:t,options:r}=this;t.attr(r.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),fl=20,Oc=Do.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:fl,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,s=n.tagName();if(!Re.isSVGGraphicsElement(n)||o.includes(s))return n.remove(),!1;if(r.includes(s)){const c=e.vel.findOne(`#${n.id}`);if(c){const{node:h}=c;let m=e.getNodeBoundingRect(h);e.model.isElement()&&(m=Re.transformRect(m,e.getNodeMatrix(h)));const _=Re("rect",m.toJSON()),{x:S,y}=m.center(),{angle:H,cx:J=S,cy:ne=y}=c.rotate();H&&_.rotate(H,J,ne),n.parent().append(_)}return n.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===n.attr("fill")||n.removeAttr(c)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(r=>{n.removeAttr(r)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:r}=this,{deep:o}=t,s=n.tagName();let c;if("G"===s){if(!o)return null;c=n.clone(),function xd(e,n){const t=e.children();for(;t.length>0;){const r=t.shift();n(r)&&t.push(...r.children())}}(c,h=>this.transformMaskChild(e,h))}else{if(r.includes(s))return null;c=n.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:r,options:o}=this,{padding:s,attrs:c}=o,h="stroke-width"in c?c["stroke-width"]:1,m="none"!==n.attr("fill");let _=parseFloat(n.attr("stroke-width"));isNaN(_)&&(_=1);const S=_+2*s,y=S+2*h;let H=this.getMaskShape(e,n);if(!H){const J=e.getNodeBoundingRect(n.node);J.inflate(J.width?0:.5,J.height?0:.5),H=Re("rect",J.toJSON())}return H.attr(c),Re("mask",{id:this.getMaskId()}).append([H.clone().attr({fill:m?t:"none",stroke:t,"stroke-width":y}),H.clone().attr({fill:m?r:"none",stroke:r,"stroke-width":S})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:r}=this,{padding:o,attrs:s,maskClip:c=fl,layer:h}=t,m="stroke"in s?s.stroke:"#000000";!h&&n===e.el&&r.remove();const _=e.getNodeBoundingRect(n).inflate(o+c),S=this.getMask(e,Re(n));this.addMask(e.paper,S),r.attr(_.toJSON()),r.attr({transform:Re.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${S.id})`,fill:m})},unhighlight(e){this.removeMask(e.paper)}}),is=Do.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Fr("highlight-opacity"),highlight:function(e,n){Re(n).addClass(this.opacityClassName)},unhighlight:function(e,n){Re(n).removeClass(this.opacityClassName)}}),os=Fr("highlighted"),bd=Do.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:os},highlight:function(e,n){Re(n).addClass(this.options.className)},unhighlight:function(e,n){Re(n).removeClass(this.options.className)}},{className:os});function kc(e,n,t,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function Lc(e,n,t,r){return e.getPointAtLength("length"in r?r.length:20)}function oa(e){return function(n,t,r,o){if(r instanceof Element){var c,s=this.paper.findView(r);if(s)if(s.isNodeConnection(r)){var h="fixedAt"in o?o.fixedAt:"50%";c=xu(s,h)}else c=s.getNodeBBox(r).center();else c=new ve;return e.call(this,n,t,c,o)}return e.apply(this,arguments)}}function xu(e,n){var t=parseFloat(n);return On(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const bu=oa(function yu(e,n,t,r){var o=1e6,s=e.getConnection(),c=e.getConnectionSubdivisions(),h=new ft(t.clone().offset(0,o),t.clone().offset(0,-o)),m=new ft(t.clone().offset(o,0),t.clone().offset(-o,0)),_=h.intersect(s,{segmentSubdivisions:c}),S=m.intersect(s,{segmentSubdivisions:c}),y=[];return _&&Array.prototype.push.apply(y,_),S&&Array.prototype.push.apply(y,S),y.length>0?t.chooseClosest(y):"fallbackAt"in r?xu(e,r.fallbackAt):Rc(e,n,t,r)}),Rc=oa(function Nc(e,n,t,r){return e.getClosestPoint(t)||new ve});function Vs(e,n,t){if(_t(t)){const{x:o,y:s}=t;if(isFinite(s)){const c=new ft(n,e),{start:h,end:m}=c.parallel(s);n=h,e=m}t=o}if(!isFinite(t))return e;var r=e.distance(n);return 0===t&&r>0?e:e.move(n,-Math.min(t,r-1))}function as(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function Fc(e,n,t,r){var o=n.getNodeBBox(t);r.stroke&&o.inflate(as(t)/2);var s=e.intersect(o);return Vs(s?e.start.chooseClosest(s):e.end,e.start,r.offset)}var _u="segmentSubdivisons",Cu="shapeBBox";const Bc=function dl(e,n,t,r){let{offset:o,alignOffset:s,align:c}=r;return c&&function Dc(e,n,t=0){let r,o,s,c;const{start:h,end:m}=e;switch(n){case"left":r="x",o=m,s=h,c=-1;break;case"right":r="x",o=h,s=m,c=1;break;case"top":r="y",o=m,s=h,c=-1;break;case"bottom":r="y",o=h,s=m,c=1;break;default:return}h[r]<m[r]?o[r]=s[r]:s[r]=o[r],isFinite(t)&&(o[r]+=c*t,s[r]+=c*t)}(e,c,s),Vs(e.end,e.start,o)},Cd=Fc,wd=function Vc(e,n,t,r){var o=n.model.angle();if(0===o)return Fc(e,n,t,r);var s=n.getNodeUnrotatedBBox(t);r.stroke&&s.inflate(as(t)/2);var c=s.center(),h=e.clone().rotate(c,o),m=h.setLength(1e6).intersect(s);return Vs(m?h.start.chooseClosest(m).rotate(c,-o):e.end,e.start,r.offset)},Vo=function _d(e,n,t,r){var o,s,c=r.selector,h=e.end;if(o="string"==typeof c?n.findBySelector(c)[0]:Array.isArray(c)?$n(t,c):function Fo(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!Re.isSVGGraphicsElement(o)){if(o===t||!Re.isSVGGraphicsElement(t))return h;o=t}var Me,m=n.getNodeShape(o),_=n.getNodeMatrix(o),S=n.getRootTranslateMatrix(),y=n.getRootRotateMatrix(),H=S.multiply(y).multiply(_),J=H.inverse(),ne=Re.transformLine(e,J),ye=ne.start.clone(),xe=n.getNodeData(o);if(!1===r.insideout&&(xe[Cu]||(xe[Cu]=m.bbox()),xe[Cu].containsPoint(ye)))return h;if(m instanceof Ct){var O=r.precision||2;xe[_u]||(xe[_u]=m.getSegmentSubdivisions({precision:O})),Me={precision:O,segmentSubdivisions:xe[_u]}}!0===r.extrapolate&&ne.setLength(1e6),(s=ne.intersect(m,Me))?Re.isArray(s)&&(s=ye.chooseClosest(s)):!0===r.sticky&&(s=m instanceof rt?m.pointNearestToPoint(ye):m instanceof Zn?m.intersectionWithLineFromCenterToPoint(ye):m.closestPoint(ye,Me));var U=s?Re.transformPoint(s,H):h,K=r.offset||0;return r.stroke&&(K+=as(o)/2),Vs(U,e.start,K)};function Yi(e){return function(n,t,r,o){var s=!!o.rotate,c=s?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),h=c[e](),m=o.dx;if(m){var _=On(m);m=parseFloat(m),isFinite(m)&&(_&&(m/=100,m*=c.width),h.x+=m)}var S=o.dy;if(S){var y=On(S);S=parseFloat(S),isFinite(S)&&(y&&(S/=100,S*=c.height),h.y+=S)}return s?h.rotate(n.model.getBBox().center(),-n.model.angle()):h}}const ss=Yi("center"),Bt=Yi("topMiddle"),Su=Yi("bottomMiddle"),gl=Yi("leftMiddle"),Pa=Yi("rightMiddle"),Sd=Yi("origin"),vl=Yi("topRight"),Hc=Yi("bottomLeft"),zr=Yi("corner"),Td=oa(function hl(e,n,t,r){var o=e.model.angle(),s=e.getNodeBBox(n),c=s.center(),h=s.origin(),m=s.corner(),_=r.padding;if(isFinite(_)||(_=0),h.y+_<=t.y&&t.y<=m.y-_){var S=t.y-c.y;c.x+=0===o||180===o?0:1*S/Math.tan(Fn(o)),c.y+=S}else if(h.x+_<=t.x&&t.x<=m.x-_){var y=t.x-c.x;c.y+=90===o||270===o?0:y*Math.tan(Fn(o)),c.x+=y}return c}),Ed=oa(function pl(e,n,t,r){var s,c,h,o=!!r.rotate;o?(s=e.getNodeUnrotatedBBox(n),h=e.model.getBBox().center(),c=e.model.angle()):s=e.getNodeBBox(n);var S,m=r.padding;switch(isFinite(m)&&s.inflate(m),o&&t.rotate(h,c),s.sideNearestToPoint(t)){case"left":S=s.leftMiddle();break;case"right":S=s.rightMiddle();break;case"top":S=s.topMiddle();break;case"bottom":S=s.bottomMiddle()}return o?S.rotate(h,-c):S}),jc=function wu(e,n,t,r,o){return e.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)},us={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Tu=9007199254740991,yl=cn.Highlighting,vo={[yl.DEFAULT]:{name:"stroke",options:{padding:3}},[yl.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[yl.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Kr=[{name:si.BACK},{name:si.CELLS},{name:si.LABELS},{name:si.FRONT},{name:si.TOOLS}],xl=Sa.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Os,linkView:Fs,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:vo,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new ko,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,r,o,s){return("target"===o?t:e)instanceof Os},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:us.EXACT,frozen:!1,onViewUpdate:function(e,n,t,r,o){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(e,t,r)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:k,anchorNamespace:j,linkAnchorNamespace:M,connectionPointNamespace:B},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&Se(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new No;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=sn(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var r=t.position;this.isAsync()||!hn(r)?this.renderView(e,t):(t.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,t),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===us.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(n)&&!t.hasActiveBatch(r)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(n)&&!t.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:s,origin:c,highlighting:h,cellViewNamespace:m,interactive:_}=e;!m&&"undefined"!=typeof joint&&Se(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),qe(n)||(e.defaultConnector=be(n)),qe(t)||(e.defaultRouter=be(t)),qe(r)||(e.defaultConnectionPoint=be(r)),qe(o)||(e.defaultAnchor=be(o)),qe(s)||(e.defaultLinkAnchor=be(s)),_t(_)&&(e.interactive=wt({},_)),_t(h)&&(e.highlighting=za({},h,vo)),e.origin=wt({},c)},children:function(){var e=Re.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Fr("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Fr("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Fr("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:r,layers:o,background:s,grid:c}=e;return this.svg=t,this.defs=r,this.layers=o,this.$background=sn(s),this.$grid=sn(c),this.renderLayers(),Re.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Kr){this.removeLayers(),e.forEach(({name:o})=>{const c=new rs({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const n=this.getLayerView(si.CELLS),t=this.getLayerView(si.TOOLS),r=this.getLayerView(si.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(Fr("viewport")),r.vel.addClass(Fr("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),Re.createSVGMatrix(e)}e=Re.createSVGMatrix(e);var r=Re.matrixToTransformString(e);return n.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return Re.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof cn)for(var r=e.model,o=this.model.getConnectedLinks(r),s=0,c=o.length;s<c;s++){var h=o[s],m=this.findViewByModel(h);if(m){var _=["UPDATE"];h.getTargetCell()===r&&_.push("TARGET"),h.getSourceCell()===r&&_.push("SOURCE");var S=Math.max(n+1,m.UPDATE_PRIORITY);this.scheduleViewUpdate(m,m.getFlag(_),S,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof cn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var r=0,o=this.findViewByModel(t.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o),e.updateEndMagnet("source"));var s=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(s=this.dumpView(c),e.updateEndMagnet("target")),0===r&&0===s)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,r){r||(r={}),this.scheduleViewUpdate(e,n,t,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var s=this.updateViews(r);o&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(e,n,t,r){const{_updates:o,options:s}=this,{FLAG_REMOVE:c,FLAG_INSERT:h,UPDATE_PRIORITY:m,cid:_}=e;let S=o.priorities[t];if(S||(S=o.priorities[t]={}),t>m)for(let J=t-1;J>=m;J--){const ne=o.priorities[J];!ne||!(_ in ne)||(S[_]|=ne[_],delete ne[_])}let y=S[_]||0;if((y&n)===n)return;y||o.count++,n&c&&y&h?S[_]^=h:n&h&&y&c&&(S[_]^=c),S[_]|=n;const H=s.onViewUpdate;"function"==typeof H&&H.call(this,e,n,t,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|r[t];return delete r[t],o},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,model:s}=e;if(e instanceof cn){if(n&r)return this.removeView(s),0;n&o&&(this.insertView(e),n^=o)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var r=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],r},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var r=t.unmounted[n]||0;return delete t.unmounted[n],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=Br({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,r=0,o=Tu;do{r++,n=this.updateViewsBatch(e),t+=n.updated,o=Math.min(n.priority,o)}while(!n.empty);const s={updated:t,batches:r,priority:o};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let r in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:Tu});var t=this._updates,r=t.id;if(r){va(r),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),s=Br({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(s),h=c.unmounted,m=c.mounted,_=n.processed,S=t.count;o.updated>0&&(o.processed=_+=o.updated+o.unmounted,n.priority=Math.min(o.priority,n.priority),o.empty&&0===m?(o.unmounted+=h,o.mounted+=m,o.priority=n.priority,this.notifyAfterRender(o,e),n.processed=0,n.priority=Tu,t.count=0):n.processed=_);var y=e.progress;if(S&&"function"==typeof y&&y.call(this,o.empty,_,S,o,this),t.id!==r)return}t.id=Jo(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,r=0,o=0,s=0,c=0,h=Tu,m=!0,_=this.options,S=t.priorities,y="viewport"in e?e.viewport:_.viewport;"function"!=typeof y&&(y=null);var H=_.onViewPostponed;"function"!=typeof H&&(H=null);var J=Object.keys(S);e:for(var ne=0,ye=J.length;ne<ye;ne++){var xe=+J[ne],Ae=S[xe];for(var Me in Ae){if(r>=n){m=!1;break e}var O=ta[Me];if(O){var U=Ae[Me];if(0==(U&O.FLAG_REMOVE)){var K=Me in t.unmounted;if(O.DETACHABLE&&y&&!y.call(this,O,!K,this)){K||(this.registerUnmountedView(O),O.unmount()),t.unmounted[Me]|=U,delete Ae[Me],s++;continue}K&&(U|=O.FLAG_INSERT,c++),U|=this.registerMountedView(O)}var ie=this.updateView(O,U,e);ie>0&&(Ae[Me]=ie,!H||!H.call(this,O,ie,this)||Ae[Me])?(o++,m=!1):(h>xe&&(h=xe),r++,delete Ae[Me])}else delete Ae[Me]}}return{priority:h,updated:r,postponed:o,unmounted:s,mounted:c,empty:m}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=ta[n[o]];return r},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=ta[n[o]];return r},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var o=this._updates,s=o.unmountedCids,c=o.unmounted,h=0,m=(Math.min(s.length,"mountBatchSize"in n?n.mountBatchSize:1/0));h<m;h++){var _=s[h];if(_ in c){var S=ta[_];if(S){if(S.DETACHABLE&&e&&!e.call(this,S,!1,this)){s.push(_);continue}t++;var y=this.registerMountedView(S);y&&this.scheduleViewUpdate(S,y,S.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,h),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var o=this._updates,s=o.mountedCids,c=o.mounted,h=0,m=(Math.min(s.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));h<m;h++){var _=s[h];if(_ in c){var S=ta[_];if(S){if(!S.DETACHABLE||e.call(this,S,!0,this)){s.push(_);continue}t++,this.registerUnmountedView(S)&&S.unmount()}}}return s.splice(0,h),t},checkViewport:function(e){var n=Br({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,r=this.checkMountedViews(t,n);return r>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:r}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,r=this.options.frozen,o=n.freezeKey;if(t&&t!==o){if(r&&o)return;n.freezeKey=t,n.keyFrozen=r}this.options.frozen=!0;var s=n.id;n.id=null,this.isAsync()&&s&&va(s)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,r=n.freezeKey;t&&r&&t!==r||(n.freezeKey=null,(!t||t!==r||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===us.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return hn(n)||(n=this.el.clientWidth),hn(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:r,height:o}=t;let s=void 0===e?r:e,c=void 0===n?o:n;if(r===s&&o===c)return;t.width=s,t.height=c,this._setDimensions();const h=this.getComputedSize();this.trigger("resize",h.width,h.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;hn(n)&&(n=Math.round(n)),hn(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,r){r=st(e)?e:wt({gridWidth:e,gridHeight:n,padding:t},r);const{x:o,y:s,width:c,height:h}=this.getFitToContentArea(r),{sx:m,sy:_}=this.scale();return this.setOrigin(-o*m,-s*_),this.setDimensions(c*m,h*_),new rt(o,s,c,h)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,r=qo(e.padding||0),o=Math.max(e.minWidth||0,n),s=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,h=e.maxHeight||Number.MAX_VALUE,m=e.allowNewOrigin,_="contentArea"in e?new rt(e.contentArea):this.getContentArea(e),{sx:S,sy:y}=this.scale();_.x*=S,_.y*=y,_.width*=S,_.height*=y;let H=Math.ceil((_.width+_.x)/n),J=Math.ceil((_.height+_.y)/t);e.allowNegativeBottomRight||(H=Math.max(H,1),J=Math.max(J,1)),H*=n,J*=t;let ne=0;("negative"===m&&_.x<0||"positive"===m&&_.x>=0||"any"===m)&&(ne=Math.ceil(-_.x/n)*n,ne+=r.left,H+=ne);let ye=0;return("negative"===m&&_.y<0||"positive"===m&&_.y>=0||"any"===m)&&(ye=Math.ceil(-_.y/t)*t,ye+=r.top,J+=ye),H+=r.right,J+=r.bottom,H=Math.max(H,o),J=Math.max(J,s),H=Math.min(H,c),J=Math.min(J,h),new rt(-ne/S,-ye/y,H/S,J/y)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var r=e.contentArea;n=this.localToPaperRect(r),t=new ve(r)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){Br(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var _,o=qo(e.padding),s=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,h=e.minScaleY||e.minScale,m=e.maxScaleY||e.maxScale;if(e.fittingBBox)_=e.fittingBBox;else{var S=this.translate(),y=this.getComputedSize();_={x:S.tx,y:S.ty,width:y.width,height:y.height}}_=new rt(_).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var H=this.scale(),J=_.width/n.width*H.sx,ne=_.height/n.height*H.sy;if(e.preserveAspectRatio&&(J=ne=Math.min(J,ne)),e.scaleGrid){var ye=e.scaleGrid;J=ye*Math.floor(J/ye),ne=ye*Math.floor(ne/ye)}J=Math.min(c,Math.max(s,J)),ne=Math.min(m,Math.max(h,ne));var xe=this.options.origin,Ae=_.x-t.x*J-xe.x,Me=_.y-t.y*ne-xe.y;this.scale(J,ne),this.translate(Ae,Me)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new rt:Re(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=qe(n)?n.apply(this,e):!0===n?this.getArea():n?new rt(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,r,o=n.cellViewNamespace,s=e.get("type")+"View",c=$n(o,s,".");return e.isLink()?(t=n.linkView,r=Fs):(t=n.elementView,r=Os),new(t.prototype instanceof tn.View?c||t:t.call(this,e)||c||r)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?si.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:r}=this,o=t[n];if(o){var{cid:s}=o;const{mounted:c,unmounted:h}=r;o.remove(),delete t[n],delete c[s],delete h[s]}return o},renderView:function(e,n){const{id:t}=e,r=this._views;let o,s,c=!0;return t in r&&(o=r[t],o.model===e?(s=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=r[t]=this.createViewForModel(e),o.paper=this,s=this.registerUnmountedView(o)|o.getFlag(He(o,"initFlag"))),this.requestViewUpdate(o,s,o.UPDATE_PRIORITY,n),o},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,r=e.length;t<r;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){yi(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=sn(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=sn(e),r=t.map(function(){var s=this.parentNode,c=s.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,c),s.removeChild(c)}});Array.prototype.sort.call(t,n).each(function(o){r[o].call(this)})}(e,function(t,r){var o=n.get(t.getAttribute("model-id")),s=n.get(r.getAttribute("model-id")),c=o.attributes.z||0,h=s.attributes.z||0;return c===h?0:c<h?-1:1})},insertView:function(e){const n=this.getLayerView(si.CELLS),{el:t,model:r}=e;this.options.sorting===us.APPROX?n.insertSortedNode(t,r.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,r){if(void 0===e)return Re.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,r=0);var o=this.translate();(t||r||o.tx||o.ty)&&this.translate(o.tx-t*(e-1),o.ty-r*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var h=this.matrix();return h.a=e,h.d=n,this.matrix(h),this.trigger("scale",e,n,t,r),this},rotate:function(e,n,t){if(void 0===e)return Re.matrixToRotate(this.matrix());if(void 0===n){var r=this.cells.getBBox();n=r.width/2,t=r.height/2}var o=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(o),this},translate:function(e,n){if(void 0===e)return Re.matrixToTranslate(this.matrix());const{options:t}=this,{origin:r,drawGrid:o}=t;e||(e=0),n||(n=0);const s=this.matrix();if(s.e===e&&s.f===n)return this;s.e=e,s.f=n,this.matrix(s);const{tx:c,ty:h}=this.translate();return r.x=c,r.y=h,this.trigger("translate",c,h),o&&this.drawGrid(),this},findView:function(e){var n=yn(e)?this.cells.querySelector(e):e instanceof sn?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=yn(e)||hn(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new ve(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=Br(n||{},{strict:!1}),e=new rt(e);var t=this.model.getElements().map(this.findViewByModel,this),r=n.strict?"containsRect":"intersect";return t.filter(function(o){return o&&e[r](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new ve(e,n);return Re.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,r){var o=new rt(e,n,t,r);return Re.transformRect(o,this.matrix())},paperToLocalPoint:function(e,n){var t=new ve(e,n);return Re.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,r){var o=new rt(e,n,t,r);return Re.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new ve(e,n);return Re.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,r){var o=new rt(e,n,t,r);return Re.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new ve(e,n);return Re.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,r){var o=new rt(e,n,t,r);return Re.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,r){return this.localToPaperRect(e,n,t,r).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var r=new ve(e,n).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,n,t,r){var o=this.pageOffset(),s=new rt(e,n,t,r);return s.x-=o.x,s.y-=o.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ve(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Fs))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,r=this.model,o=r.constructor.validations;return!(!t.multiLinks&&!o.multiLinks.call(this,r,n)||!t.linkPinning&&!o.linkPinning.call(this,r,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return qe(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===n){if(!r||t&&(n=r[t],!1===n))return!1;n||(n=r.default)}if(!n)return!1;yn(n)&&(n={name:n});const s=n.name,c=o[s];if(!c)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:c,options:n.options||{},name:s}},onCellHighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:s}=r;o.highlight(e,n,s)},onCellUnhighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:s}=r;o.unhighlight(e,n,s)},pointerdblclick:function(e){e.preventDefault(),e=Yn(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=Yn(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=Yn(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=Yn(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=Yn(e);var r=this.snapToGrid(e.clientX,e.clientY),o=n.sourceView;o?o.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=Yn(e),t=this.snapToGrid(n.clientX,n.clientY),r=this.eventData(e).sourceView;r?r.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(sn.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=Yn(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Yn(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Yn(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseenter(e),this.el.contains(t)))||s||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Yn(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseleave(e),this.el.contains(t)))||s||r===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=Yn(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,r=this.snapToGrid(t.clientX,t.clientY),o=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,r.x,r.y,o):this.trigger("blank:mousewheel",e,r.x,r.y,o)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var r=this.findView(n);if(r){if(e=Yn(e),this.guard(e,r))return;var o=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,t,o.x,o.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var o=this.findView(t);if(o){if(e=Yn(e),this.guard(e,o))return;var s=this.snapToGrid(e.clientX,e.clientY);n.call(this,o,e,t,s.x,s.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,r,o,s){n.onmagnet(t,o,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,r,o,s){n.magnetpointerdblclick(t,r,o,s)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,r,o,s){n.magnetcontextmenu(t,r,o,s)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=Yn(e),this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,r.x,r.y)}},getPointerArgs(e){const n=Yn(e),{x:t,y:r}=this.snapToGrid(n.clientX,n.clientY);return[n,t,r]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof ni||this.svg===e.target||this.el===e.target||sn.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Re("svg",{width:"100%",height:"100%"},Re("defs")),patterns:{},add:function(e,n){Re(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(Re("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(yn(e)&&Array.isArray(n[e]))return n[e].map(function(m){return wt({},m)});var t=e||{args:[{}]},r=Array.isArray(t),o=t.name;if(!r&&!o&&!t.markup&&(o="dot"),o&&Array.isArray(n[o])){var s=n[o].map(function(m){return wt({},m)}),c=Array.isArray(t.args)?t.args:[t.args||{}];Br(c[0],je(e,"args"));for(var h=0;h<c.length;h++)s[h]&&wt(s[h],c[h]);return s}return r?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],r=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,h){var m="pattern_"+h,_=Mt(c,t[h],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});_.width=n*(r.a||1)*(_.scaleFactor||1),_.height=n*(r.d||1)*(_.scaleFactor||1),o.exist(m)||o.add(m,Re("pattern",{id:m,patternUnits:"userSpaceOnUse"},Re(_.markup)));var S=o.get(m);qe(_.update)&&_.update(S.node.childNodes[0],_);var y=_.ox%_.width;y<0&&(y+=_.width);var H=_.oy%_.height;H<0&&(H+=_.height),S.attr({x:y,y:H,width:_.width,height:_.height})});var s=(new XMLSerializer).serializeToString(o.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",r=this.scale(),o=this.translate();st(n)&&(n=o.tx+r.sx*(n.x||0)+"px "+(o.ty+r.sy*(n.y||0))+"px"),st(t)&&(t=(t=new rt(t).scale(r.sx,r.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,r=(n=n||{}).size,o=n.repeat||"no-repeat",s=n.opacity||1,c=Math.abs(n.quality)||1,h=this.constructor.backgroundPatterns[Ot(o)];if(qe(h)){e.width*=c,e.height*=c;var m=h(e,n);if(!(m instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=m.toDataURL("image/png"),o="repeat",st(r)?(r.width*=m.width/e.width,r.height*=m.height/e.height):void 0===r&&(n.size={width:m.width/c,height:m.height/c})}else t=e.src,void 0===r&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:o,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=be(e),uo(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,yi(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!st(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+Yr(JSON.stringify(e))),!this.isDefined(n)){var o=Ei[t]&&Ei[t](e.args||{});if(!o)throw new Error("Non-existing filter "+t);var s=wt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});Re(o,s).appendTo(this.defs)}return n},defineGradient:function(e){if(!st(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:r,id:o=r+n.id+Yr(JSON.stringify(e)),stops:s,attrs:c={}}=e;if(this.isDefined(o))return o;const h=yt(s).map(({offset:_,color:S,opacity:y})=>Re("stop").attr({offset:_,"stop-color":S,"stop-opacity":Number.isFinite(y)?y:1})),m=Re(r,c,h);return m.id=o,m.appendTo(t),o},definePattern:function(e){if(!st(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+Yr(JSON.stringify(e)),markup:o,attrs:s={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=Re("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(s),"string"==typeof o)c.append(Re(o));else{const{fragment:h}=mi(o);c.append(h)}return c.appendTo(t),r},defineMarker:function(e){if(!st(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+Yr(JSON.stringify(e)),markup:o,attrs:s={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const h=Re("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(h.id=r,h.attr(s),o)if("string"==typeof o)h.append(Re(o));else{const{fragment:m}=mi(o);h.append(m)}else{const{type:m="path"}=e,_=Re(m,je(e,"type","id","markup","attrs","markerUnits"));h.append(_)}return h.appendTo(t),r}},{sorting:us,Layers:si,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,-1,n.width,n.height),o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,1,n.width,0),o.drawImage(e,0,0,t,r),o.setTransform(1,0,0,-1,0,n.height),o.drawImage(e,0,0,t,r),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(2*t,0),o.scale(-1,1),o.drawImage(e,0,0,t,r),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(e,0,0,t,r),n},watermark:function(e,n){n=n||{};var t=e.width,r=e.height,o=document.createElement("canvas");o.width=3*t,o.height=3*r;for(var s=o.getContext("2d"),c=hn(n.watermarkAngle)?-n.watermarkAngle:-20,h=Fn(c),m=o.width/4,_=o.height/4,S=0;S<4;S++)for(var y=0;y<4;y++)(S+y)%2>0&&(s.setTransform(1,0,0,1,(2*S-1)*m,(2*y-1)*_),s.rotate(h),s.drawImage(e,-t/2,-r/2,t,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){Re(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;Re(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Re(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Re(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Re(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class Id{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new No,this.paper=new xl({el:sn("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const s=16*(.6*Math.max(...t.split("\n").map(h=>h.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new od({id:n,size:{width:s,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:s,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new wa({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],r=[];return n.forEach(o=>{const s=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(100*o.average_success)}% (${o.question_count} Total)`;t.push(this.makeElement(o.pk,s)),o.next_category_ids.forEach(c=>{r.push(this.makeLink(o.pk,c))})}),t.concat(r)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const r=Ms.layout(this.graph,{dagre:la(),graphlib:to(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Bs=f(19329);function Ad(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().reset()}),i.\u0275\u0275text(1," Back "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275property("disabled",!t.parentNode)}}function Md(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function Hs(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"h2",7),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let zc=(()=>{class e{constructor(t,r,o){this.categoryService=t,this.router=r,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new Id(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{t.push(r)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(r=>r.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Bs.H),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(i.Injector))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"disabled","click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Ad,2,3,"button",1),i.\u0275\u0275template(2,Md,3,3,"ng-container",2),i.\u0275\u0275template(3,Hs,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"div",4,5)),2&t){const o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===s.children.length)}},directives:[L.O5,Et.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var bl=f(30567),Uc=f(78659),xi=f(27221),ls=f(40520),js=f(22552);let zs=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.get(r).pipe((0,xi.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.delete(r).pipe((0,xi.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const r=this.apiService.getURL("event");return this.http.post(r,t).pipe((0,xi.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const r=this.apiService.getURL("event",t.id);return this.http.put(r,t).pipe((0,xi.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,xi.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,xi.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,r){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:t.id,course:r},{observe:"response"}).pipe((0,xi.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ls.eN),i.\u0275\u0275inject(js.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var cs=f(71105),Us=f(27482);function _l(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.event.name)}}function Gc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const Gs=function(e,n,t){return["/course",e,"event",n,"problem",t]};function Cl(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,Gs,r.courseId,r.eventId,t.question.id))}}const Wc=function(e,n){return["/course",e,"problem",n]};function $c(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Wc,r.courseId,t.question.id))}}const Eu=function(e){return["/problem",e,"edit"]};function Yc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,Eu,t.question.id))}}function mo(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,Gc,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,Cl,3,5,"ng-container",10),i.\u0275\u0275template(15,$c,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,Yc,3,3,"ng-container",0),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",o.highlight(o.getStatus(t)))("value",o.getStatus(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,t.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",o.user.is_teacher)}}function Ia(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function Od(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function Xc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ia,2,0,"h2",13),i.\u0275\u0275template(2,Od,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",t)}}function kd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,_l,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,mo,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Xc,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.uqjs.length)}}let Kc=(()=>{class e{constructor(t,r,o,s,c,h){this.authenticationService=t,this.router=r,this.route=o,this.uqjService=s,this.courseEventService=c,this.courseService=h,this.authenticationService.currentUser.subscribe(m=>this.user=m)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,bl.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(Uc.O),i.\u0275\u0275directiveInject(zs),i.\u0275\u0275directiveInject(he.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,kd,6,7,"ng-container",0),2&t&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[L.O5,L.sg,cs.h,Us.Gi,Et.v0,te.yS],pipes:[L.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var Aa=f(22307),Xi=f(95428),Qc=f(50284),fr=f(61895),dr=f(56249);const Ld=["importDialog"];function Nd(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.getEventFilterOptions())}}function Rd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-island",8),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275elementStart(2,"div",9)(3,"figure",10),i.\u0275\u0275element(4,"tui-svg",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",12),i.\u0275\u0275text(6,"Add Event"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("hoverable",!0))}function Dd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",24)}function Jc(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",25)}function Zc(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade Not Yet Available "),i.\u0275\u0275elementContainerEnd())}function qc(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Fd=function(e,n){return["/course",e,"event",n]};function Vd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",26),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Fd,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"Open":"Complete"," ")}}function Bd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",27),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const ef=function(e,n){return["/course",e,"new-event",n]};function Hd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,ef,r.courseId,t.id))}}function jd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",13),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",12),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",14),i.\u0275\u0275template(6,Dd,1,0,"tui-tag",15),i.\u0275\u0275template(7,Jc,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"p",17),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"p",18),i.\u0275\u0275template(16,Zc,2,0,"ng-container",19),i.\u0275\u0275template(17,qc,2,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",21),i.\u0275\u0275template(20,Vd,3,5,"ng-container",19),i.\u0275\u0275template(21,Bd,2,1,"ng-template",null,22,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,Hd,2,4,"a",23),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(8),o=i.\u0275\u0275reference(18),s=i.\u0275\u0275reference(22),c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(11,11,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(14,14,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open&&t.is_exam)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function zd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",33)(1,"p",13),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",12),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",34),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(s,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name)}}const Ud=function(e){return["/course",e,"new-event"]};function Gd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",30)(2,"a",31),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",10),i.\u0275\u0275element(4,"tui-svg",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",12),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,zd,7,2,"tui-island",32),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,Ud,t.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",t.courseEvents)}}function Wd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,Gd,8,5,"ng-container",4),i.\u0275\u0275elementStart(1,"button",29),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",t.courseEvents)}}var xr=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(xr||(xr={})),xr))();let $d=(()=>{class e{constructor(t,r,o,s){this.authenticationService=t,this.courseEventService=r,this.dialogService=o,this.notificationsService=s,this.filter=xr.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(xr)}getEvents(){switch(this.filter){case xr.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case xr.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case xr.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,r){this.courseEventService.importCourseEvent(t,r).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(zs),i.\u0275\u0275directiveInject(Aa.RO),i.\u0275\u0275directiveInject(Ht.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Ld,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.importDialog=o.first)}},inputs:{events:"events",course:"course"},decls:8,vars:3,consts:[["tuiTextfieldSize","s",3,"ngModel","ngModelChange"],["tuiTextfield","","placeholder","Choose your hero"],[3,"items",4,"tuiDataList"],[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],[3,"items"],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","m","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","m","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-select",0),i.\u0275\u0275listener("ngModelChange",function(s){return r.filter=s}),i.\u0275\u0275element(1,"input",1),i.\u0275\u0275template(2,Nd,1,1,"tui-data-list-wrapper",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,Rd,7,1,"ng-container",4),i.\u0275\u0275template(5,jd,24,17,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Wd,3,1,"ng-template",null,6,i.\u0275\u0275templateRefExtractor)),2&t&&(i.\u0275\u0275property("ngModel",r.filter),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.getEvents()))},directives:[Xi.uJ,Xi.OI,ge.sz,ee.NgControlStatus,ee.NgModel,fr.MB,dr.gX,Qc.eC,L.O5,cs.h,mt.P,L.sg,Us.Gi,Et.v0,te.yS],pipes:[L.uU,L.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})(),tf=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}useTokens(t,r){const o=new ls.WM({"Content-Type":"application/json"}),s=this.apiService.getURL("token-use","use",r);return this.http.post(s,t,{headers:o}).pipe((0,xi.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ls.eN),i.\u0275\u0275inject(js.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var wl=f(21922);function nf(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Yd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",17)}function Xd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",18)}function Kd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Yd,1,0,"tui-tag",15),i.\u0275\u0275template(2,Xd,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",t)}}function Qd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}const Sl=function(){return{standalone:!0}};function Jd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,Kd,4,2,"ng-container",11),i.\u0275\u0275template(5,Qd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(o){return i.\u0275\u0275restoreView(t).$implicit.num_used=o}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",i.\u0275\u0275pureFunction0(10,Sl))}}let Zd=(()=>{class e{constructor(t,r,o,s){this.tokenUseService=t,this.route=r,this.authenticationService=o,this.notificationsService=s,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(o=>r[o.option.id]=o.num_used),this.tokenUseService.useTokens(r,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(tf),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(Ht.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,nf,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"form",3)(7,"div",4),i.\u0275\u0275template(8,Jd,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6)(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[L.O5,Qt.Ls,ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.NgForm,L.sg,cs.h,Us.Gi,wl.EA,wl.aQ,ee.NgControlStatus,ee.NgModel,Et.v0],pipes:[L.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var rf=f(76508),Ki=f(78697);function qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275reference(4),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("margin-top",r+"rem")("order",r%2*-r),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",o.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(s.getGetOrdinal(t.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function eh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function th(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function nh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function rh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(t.rank)," ")}}function ih(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21)(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function oh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function ah(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,rh,2,1,"td",20),i.\u0275\u0275template(2,ih,4,4,"td",20),i.\u0275\u0275template(3,oh,2,1,"td",20),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function sh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275template(2,qd,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),i.\u0275\u0275template(7,eh,2,0,"th",7),i.\u0275\u0275template(8,th,2,0,"th",7),i.\u0275\u0275template(9,nh,2,0,"th",7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,ah,4,3,"tr",9),i.\u0275\u0275elementEnd()()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",t.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}let uh=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(t,r)=>t.rank>r,this.filterInTopX=(t,r)=>t.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(t){return t.sort((o,s)=>s.token-o.token).map((o,s)=>({rank:s+1,name:o.name,token:o.token}))}getGetOrdinal(t){const r=["th","st","nd","rd"],o=t%100;return t+(r[(o-20)%10]||r[o]||r[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,sh,13,15,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[L.O5,L.sg,cs.h,rf.JP,Ki.c4,Ki.Nx,Ki.EE,Ki.DZ,Ki.Ws,Ki.jY,Ki.LU,Ki.fu,Ki.Bl,Ki.Kt],pipes:[Ne.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();var Pu=f(56197);function lh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function ch(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",20)}function fh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function dh(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const of=function(e,n){return["/course",e,"event",n]};function Tl(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,of,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function af(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const sf=function(e,n){return["/course",e,"new-event",n]};function hh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,sf,r.course.id,t.id))}}function ph(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,lh,1,0,"tui-tag",11),i.\u0275\u0275template(14,ch,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275template(17,fh,2,0,"ng-container",14),i.\u0275\u0275template(18,dh,2,4,"ng-template",null,15,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",16),i.\u0275\u0275template(21,Tl,3,5,"ng-container",14),i.\u0275\u0275template(22,af,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(24,hh,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(19),s=i.\u0275\u0275reference(23),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function gh(e,n){if(1&e&&i.\u0275\u0275template(0,ph,25,16,"div",5),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function vh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function mh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",26)}function yh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,of,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function xh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function uf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,sf,r.course.id,t.id))}}function bh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,vh,1,0,"tui-tag",11),i.\u0275\u0275template(14,mh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",16),i.\u0275\u0275template(20,yh,3,5,"ng-container",14),i.\u0275\u0275template(21,xh,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,uf,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(22),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==s.user?null:s.user.is_teacher))("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Iu(e,n){if(1&e&&i.\u0275\u0275template(0,bh,24,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.pastEvents)}}let _h=(()=>{class e{constructor(t){this.authenticationService=t,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t),this.upcomingEvents=this.events.filter(t=>t.is_open||t.is_not_available_yet).filter(t=>"CHALLENGE"==t.type),this.pastEvents=this.events.filter(t=>t.is_closed).filter(t=>"CHALLENGE"==t.type)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),i.\u0275\u0275text(3," Upcoming Challenges "),i.\u0275\u0275template(4,gh,1,1,"ng-template",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-accordion-item",4),i.\u0275\u0275text(6," Past Challenges "),i.\u0275\u0275template(7,Iu,1,1,"ng-template",3),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[Pu.oc,Pu.Kc,Pu.dv,L.sg,L.O5,Us.Gi,Et.v0,te.yS],pipes:[L.uU,L.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function Ch(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Concept Map"),i.\u0275\u0275elementEnd())}function wh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function Sh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function Th(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function Eh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function Ph(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1,"Challenges"),i.\u0275\u0275elementEnd())}function Ih(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",19),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",t.course)}}function Ah(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==t.course?null:t.course.question_set)("uqjs",null==t.course?null:t.course.uqjs)}}function Mh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function Oh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",22),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==t.course?null:t.course.course_reg)}}function kh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",23),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==t.course?null:t.course.leader_board)("rankTopX",3)}}function Lh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-challenge-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function Nh(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",24)}let Rh=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(he.N),i.\u0275\u0275directiveInject(te.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:21,vars:13,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-text_h6"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h6",2),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-tabs-with-more",3,4),i.\u0275\u0275template(7,Ch,2,0,"button",5),i.\u0275\u0275template(8,wh,2,0,"button",6),i.\u0275\u0275template(9,Sh,2,0,"button",7),i.\u0275\u0275template(10,Th,2,0,"button",8),i.\u0275\u0275template(11,Eh,2,0,"button",9),i.\u0275\u0275template(12,Ph,2,0,"button",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,Ih,2,1,"ng-container",11),i.\u0275\u0275template(14,Ah,2,2,"ng-container",11),i.\u0275\u0275template(15,Mh,2,2,"ng-container",11),i.\u0275\u0275template(16,Oh,2,1,"ng-container",11),i.\u0275\u0275template(17,kh,2,2,"ng-container",11),i.\u0275\u0275template(18,Lh,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(19,Nh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(6),s=i.\u0275\u0275reference(20);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.description," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",s),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",0===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",5===o.activeItemIndex)}},directives:[Zr.WN,Zr.tl,Zr.yu,L.O5,zc,Kc,$d,Zd,uh,_h,mt.P],styles:[""]}),e})();var it=f(68858);let Au=(()=>{class e{static createForm(){return(new ee.FormBuilder).group({name:new ee.FormControl(null,[ee.Validators.required]),type:new ee.FormControl("",[ee.Validators.required]),countForTokens:new ee.FormControl(!1,[ee.Validators.required]),startEndDatePicker:new ee.FormControl(new it.VR(it.TU.currentLocal(),it.TU.currentLocal().append({day:7})),[ee.Validators.required]),startTimePicker:new ee.FormControl(it.qD.currentLocal(),[ee.Validators.required]),endTimePicker:new ee.FormControl(it.qD.currentLocal(),[ee.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new ee.FormBuilder).group({name:new ee.FormControl(t.name,[ee.Validators.required]),type:new ee.FormControl(t.type,[ee.Validators.required]),countForTokens:new ee.FormControl(t.count_for_tokens,[ee.Validators.required]),startEndDatePicker:new ee.FormControl(new it.VR(it.TU.fromLocalNativeDate(new Date(t.start_date)),it.TU.fromLocalNativeDate(new Date(t.end_date))),[ee.Validators.required]),startTimePicker:new ee.FormControl(it.qD.fromLocalNativeDate(new Date(t.start_date)),[ee.Validators.required]),endTimePicker:new ee.FormControl(it.qD.fromLocalNativeDate(new Date(t.end_date)),[ee.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,r,o){return{id:o,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:r,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,r){return new Date(t.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,r=n.get("startTimePicker").value,o=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&o.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var Ws=f(86097),El=f(13774),aa=f(35302),Qi=f(35137),Pl=f(295),Ji=f(40022),yo=f(39193),lf=f(52164),Il=f(70589),Ii=f(45261),sa=f(15411),Ma=f(83618),Xn=f(72997),fs=f(85113);function cf(e,{value:n,min:t,max:r,dateFormat:o,dateSeparator:s}){return n&&n.toString(o,s)===e?e:it.TU.normalizeParse(e,o).dayLimit(t,r).toString(o,s)}function Dh(e){return n=>n.length!==it.ek?{value:n}:{value:cf(n,e)}}function Mu(e,n){return it.TU.normalizeParse(e.slice(0,it.ek),n.dateFormat).dayLimit(n.min,n.max)}function Ou(e,n){const{dateFormat:t,dateSeparator:r}=n;switch(e.length){case it.ek:return Mu(e,n).toString(t,r);case it.ek+it.mH.length:return Mu(e,n).toString(t,r)+it.mH;case it.FZ:return n.value&&n.value.toString(t,r)===e?e:it.VR.sort(Mu(e.slice(0,it.ek),n),Mu(e.slice(it.ek+it.mH.length),n)).toString(t,r);default:return e}}function Fh(e){return n=>({value:Ou(n,e)})}function Al(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},Ma.bM),n);return o=>{const s=[],c=o.split("");return t.forEach(m=>{const _=e.indexOf(m),S=parseInt(String(r[m]).substr(0,1),10);parseInt(c[_],10)>S&&(c[_+1]=c[_],c[_]="0",s.push(_))}),!t.some(m=>parseInt(o.substr(e.indexOf(m),2),10)>r[m])&&{value:c.join(""),indexesOfPipedChars:s}}}const ds=Array(2).fill(yo.hW),Ml=Array(4).fill(yo.hW);function Ol(e,n){return"YMD"===(fs.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...Ml,n,...ds,n,...ds]:[...ds,n,...ds,n,...Ml]}function ff(e,n){fs.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=Ol(e,n);return[...t,gn.f$,gn.F,gn.f$,...t]}function $s(e,n){const{length:t}=String(e),r=Array(t).fill(yo.hW);return n&&r.unshift(n),r}function Bh(e,n={}){const{HH:t,MM:r,SS:o,MS:s}=Object.assign(Object.assign({},Ma.bM),n);return[...$s(t),...$s(r,":"),...e.includes("HH:MM:SS")?$s(o,":"):[],..."HH:MM:SS.MSS"===e?$s(s,"."):[]]}var Bo=f(35628),kl=f(24850),Oa=f(7625),hs=f(6083),xo=f(93030),ps=f(26171),Lt=f(24710),Ys=f(53256),ku=f(2141),Lu=f(66695);let jh=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ze.gH))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Lt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,Ce.TH)()],e.prototype,"tuiColor",void 0),(0,Lt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,Ce.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Lt.gn)([(0,Lt.fM)(0,(0,i.Inject)(Ze.gH))],e),e})(),zh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();var Ll=f(46579);const Gh=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:r})=>{fs.z.assert(Number.isInteger(n)),fs.z.assert((0,Ll.Z2)(n,0,6)),fs.z.assert(Number.isInteger(t)),fs.z.assert((0,Ll.Z2)(t,0,it.NA));let o=n*it.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:it.NA-(n-t)})(e,r)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new it.TU(e.year,e.month,o)};let $h=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const o=[];for(let s=0;s<6;s++){const c=[];for(let h=0;h<it.NA;h++){const m=Gh({month:t,rowIndex:s,colIndex:h,firstDayOfWeek:this.firstDayOfWeek}),S=(y,H=t)=>y.year>H.year||y.month>H.month;if(!((y,H=t)=>y.year<H.year||y.month<H.month)(m)||r){if(S(m)&&!r)break;c.push(m)}}o.push(c)}return this.currentSheet=o.filter(s=>s.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ii.Sy,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Lt.gn)([(0,Lt.fM)(0,(0,i.Inject)(Ii.Sy))],e),e})(),Yh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function Xh(e,n){1&e&&i.\u0275\u0275element(0,"div",3),2&e&&i.\u0275\u0275property("innerText",n.$implicit)}function Zi(e,n){if(1&e&&i.\u0275\u0275element(0,"div",12),2&e){const t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",t[1])}}function Kh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,Zi,1,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.length>1)}}function Qh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(o){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(o&&s)})("tuiPressedChange",function(o){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(o&&s)})("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(o)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Kh,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,t,r.toMarkers,r.itemIsToday(t),!!r.getItemRange(t)))}}function ka(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Qh,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(t)||r.showAdjacent)}}function Zt(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ka,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o[r][t])}}function Jh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,Zt,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[t].length)}}function ui(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Jh,2,1,"div",4),i.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let hr=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=it.TU.currentLocal(),this.month=it.ql.currentLocal(),this.disabledItemHandler=gn.Iy,this.markerHandler=yo.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,o,s)=>{if(o||s)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof it.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:r,pressedItem:o,hoveredItem:s}=this;return r(t)?"disabled":o&&o.daySame(t)?"pressed":s&&s.daySame(t)?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return r?r instanceof it.TU?r.daySame(t)?"single":null:r.from.daySame(t)&&!r.isSingleDay||o&&o.dayAfter(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(t)&&!r.isSingleDay||o&&o.dayBefore(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:r,hoveredItem:o}=this;if(null===r||r instanceof it.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(t)&&r.to.dayAfter(t);if(null===o)return!1;const s=it.VR.sort(r.from,o);return s.from.daySameOrBefore(t)&&s.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,Cn.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ii.lQ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Xh,1,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,ui,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[L.sg,Ji.Ls,Ys.Xj,L.O5,ku.c,Lu.n,jh],pipes:[L.Ov,$h,xo.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"month",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"markerHandler",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"value",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"hoveredItem",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"showAdjacent",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Lt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Lt.gn)([(0,Lt.fM)(0,(0,i.Inject)(Ii.lQ))],e),e})(),Zh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Ji.WD,xo.I,Ys.Ih,ku.V,Lu.f,zh,Yh]]}),e})();var Ho=f(43360);function qh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const s=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(s)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t)}}function ep(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,qh,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o.getItem(r,t))}}function tp(e,n){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,ep,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Nl=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=it.ql.currentLocal().year,this.value=null,this.initialItem=it.ql.currentLocal(),this.min=it.K1,this.max=it.Oy,this.disabledItemHandler=gn.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof it.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,r){return 4*t+r+this.calculatedMin}getItemState(t){const{disabledItemHandler:r,max:o,pressedItem:s,hoveredItem:c}=this;return o.year<t||r!==gn.Iy&&r(t)?"disabled":s===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return null===r?null:r instanceof it.F4?r.year===t?"single":null:r.from.year===t&&!r.from.yearSame(r.to)||null!==o&&o>r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===t&&!r.from.yearSame(r.to)||null!==o&&o<r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:r,hoveredItem:o}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==o&&r.from.year!==o&&(0,Ll.Z2)(t,Math.min(r.from.year,o),Math.max(r.from.year,o)):r.from.year<=t&&r.to.year>t)}onItemHovered(t,r){this.updateHoveredItem(t,r)}onItemPressed(t,r){this.updatePressedItem(t,r)}onItemClick(t){this.yearClick.emit(new it.F4(t))}updateHoveredItem(t,r){this.hoveredItem=t?r:null}updatePressedItem(t,r){this.pressedItem=t?r:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,tp,2,1,"div",0),2&t&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[Ys.Xj,Ji.Ls,Ho.M,ku.c,Lu.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"value",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"initialItem",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),(0,Lt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),np=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[ku.V,Lu.f,Ys.Ih,Ji.WD,Ho.e]]}),e})();var qi=f(61279),Xs=f(33703),jo=f(89627),Qn=f(37940),tr=f(3054);const pf=["wrapper"];function rp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",t[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",t[1])("focusable",!1)}}const ip=["*"];let op=(()=>{let e=class extends aa.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,Be.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ii.U4))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(pf,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:ip,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,rp,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[L.O5,ps.A,Xs.t,tr.U,Qn.q,Et.v0],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Lt.gn)([(0,i.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabled",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"mode",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"leftDisabled",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"rightDisabled",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"leftClick",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"rightClick",void 0),e=(0,Lt.gn)([(0,Lt.fM)(0,(0,i.Inject)(Ii.U4))],e),e})(),ap=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Qn.c,tr.F,Xs.u,ps.Z,Et.fN]]}),e})();var gf=f(5767);function sp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function vf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let Ks=(()=>{let e=class{constructor(){this.value=it.ql.currentLocal(),this.min=it.K1,this.max=it.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const r=this.value.append(t);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,sp,2,1,"ng-container",1),i.\u0275\u0275template(5,vf,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",o)}},directives:[op,L.O5,jo.V,Xs.t],pipes:[L.Ov,gf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"value",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),e})(),Rl=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Xs.u,ap,jo.j,gf.g]]}),e})();function up(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPickerYearClick(o)}),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function mf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let gs=(()=>{let e=class{constructor(){this.month=it.ql.currentLocal(),this.value=null,this.disabledItemHandler=gn.Iy,this.min=it.K1,this.max=it.Oy,this.minViewedMonth=it.K1,this.maxViewedMonth=it.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=yo.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,r,o)=>s=>s.dayBefore(r)||s.dayAfter(o)||t(s)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new it.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,Cn.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,up,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,mf,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",o)}},directives:[L.O5,qi.IB,Nl,Ks,hr],pipes:[xo.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"month",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"value",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"minViewedMonth",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"hoveredItem",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"showAdjacent",void 0),(0,Lt.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"markerHandler",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"monthChange",void 0),(0,Lt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),Rr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Rl,Zh,np,qi.Jy,xo.I]]}),e})(),vs=(()=>{let e=class{constructor(t,r,o){this.disabledItemHandler=gn.Iy,this.markerHandler=yo.zE,this.defaultViewedMonthFirst=it.ql.currentLocal(),this.defaultViewedMonthSecond=it.ql.currentLocal().append({month:1}),this.min=it.K1,this.max=it.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(s,c)=>s.append({month:c}),t&&t.pipe((0,ar.YP)(r),(0,Oa.R)(o)).subscribe(s=>{this.value=s,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Xn.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Ze.a3))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([Ze.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionFirstViewedMonth(s)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionSecondViewedMonth(s)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[gs],pipes:[xo.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"value",void 0),(0,Le.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),e=(0,Le.gn)([(0,Le.fM)(0,(0,i.Inject)(Xn.cU)),(0,Le.fM)(0,(0,i.Optional)()),(0,Le.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Le.fM)(2,(0,i.Inject)(Ze.a3))],e),e})(),lp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[xo.I,qi.Jy,Rr]]}),e})();const yf=function(e,n,t,r){return[e,n,t,r,!0]},xf=function(e,n,t,r){return[e,n,t,r,!1]};function cp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,yf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,xf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function fp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",9)}function bf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("keydown.space.prevent",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,fp,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(t))}}const zo=function(e,n,t,r,o,s){return[e,n,t,r,o,s]};function an(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,bf,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,yf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,xf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,zo,t.items,t.mapper,t.min,t.max,t.minLength,i.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let _f=(()=>{let e=class{constructor(t,r,o,s){this.otherDateText$=s,this.defaultViewedMonth=it.ql.currentLocal(),this.disabledItemHandler=gn.Iy,this.markerHandler=yo.zE,this.items=[],this.min=it.K1,this.max=it.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=Ma.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,h,m,_,S)=>[...c.filter(y=>(null===_||y.range.from.append(_).daySameOrBefore(y.range.to))&&y.range.to.daySameOrAfter(h)&&(null===m||y.range.from.daySameOrBefore(m))),S],t&&t.pipe((0,ar.YP)(r),(0,Oa.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:r}=this;return"string"==typeof t&&null===r||r===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(it.VR.sort(r.from,t)):this.value=new it.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,Cn.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,r,o){return s=>{if(!r||!r.isSingleDay||!o)return t(s);const c=r.from.append(o,!0).append({day:1}),h=r.from.append(o).append({day:-1});return c.dayBefore(s)&&h.dayAfter(s)||t(s)}}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Xn.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Ze.a3),i.\u0275\u0275directiveInject(Xn.q5))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([Ze.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,cp,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,an,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",o)}},directives:[L.O5,vs,ps.A,gs,dr.qi,L.sg,dr.vK,mt.P],pipes:[xo.c,L.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"minLength",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"maxLength",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"value",void 0),(0,Le.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Le.gn)([(0,i.Output)()],e.prototype,"rangeChange",void 0),(0,Le.gn)([Ce.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,i.Inject)(Xn.cU)),(0,Le.fM)(0,(0,i.Optional)()),(0,Le.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Le.fM)(2,(0,i.Inject)(Ze.a3)),(0,Le.fM)(3,(0,i.Inject)(Xn.q5))],e),e})(),Ai=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,xo.I,ps.Z,Rr,Rr,mt.E,dr.pc,lp]]}),e})();var Uo=f(38190);function dp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPressed(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(t))("readOnly",r.readOnly)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Mn(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function hp(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Cf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRangeChange(o)}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const Nu=["*",[["input"]]],pp=["*","input"],vp=[{provide:aa.M$,useExisting:(0,i.forwardRef)(()=>Dl)},{provide:Qi.KZ,useExisting:(0,i.forwardRef)(()=>Dl)},{provide:Xn.cU,deps:[[new i.Optional,new i.Self,ee.NgControl],[new i.Optional,(0,i.forwardRef)(()=>Xn.LD)]],useFactory:(e,n)=>(0,Ws.q7)(e,n)},hs.Sm];let Dl=(()=>{let e=class extends aa.F9{constructor(t,r,o,s,c,h,m,_,S,y,H,J){super(t,r,J),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=h,this.textfieldSize=m,this.textfieldExampleText=_,this.dateFormat=S,this.dateSeparator=y,this.dateTexts$=H,this.valueTransformer=J,this.textMaskOptions={mask:ff(this.dateFormat,this.dateSeparator),pipe:Fh(this),guide:!1},this.disabledItemHandler=gn.Iy,this.markerHandler=yo.zE,this.defaultViewedMonth=it.ql.currentLocal(),this.items=[],this.min=it.K1,this.max=it.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=Ma.EP,this.dateFiller$=this.dateTexts$.pipe((0,kl.U)(ne=>(0,it.Yl)(ne[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,lf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?Ma.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,Cn.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:r,activePeriod:o}=this;return o?String(o):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new Bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,Oa.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==it.FZ)return void this.updateValue(null);const r=it.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,Cn.Hm)(this.value,t,(r,o)=>r.daySame(o))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===it.ek||this.nativeValue.length===it.ek+it.mH.length)&&this.updateValue(it.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,Be.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const r=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new it.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,o=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(o)?new it.VR(r.from,o):r}getDateRangeFiller(t){return`${t}${it.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Qi.fL),i.\u0275\u0275directiveInject(Aa.RO),i.\u0275\u0275directiveInject(Xn.vk,8),i.\u0275\u0275directiveInject(ge.kI),i.\u0275\u0275directiveInject(ge.pX),i.\u0275\u0275directiveInject(it.P_),i.\u0275\u0275directiveInject(it.q_),i.\u0275\u0275directiveInject(Xn.zf),i.\u0275\u0275directiveInject(Xn.LD,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(fr.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(vp),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:pp,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Nu),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)})("tuiActiveZoneChange",function(s){return r.onActiveZone(s)}),i.\u0275\u0275template(1,dp,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Mn,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,hp,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Cf,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[sa.o1,Pl.e,Ji.Ls,fr.yc,fr.B1,Uo.n,ge.D9,ge._K,en.hd,mt.P,_f],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Le.gn)([(0,i.ViewChild)(fr.yc)],e.prototype,"textfield",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"minLength",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"maxLength",void 0),(0,Le.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,i.Optional)()),(0,Le.fM)(0,(0,i.Self)()),(0,Le.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Le.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Le.fM)(2,(0,i.Inject)(i.Injector)),(0,Le.fM)(3,(0,i.Inject)(Qi.fL)),(0,Le.fM)(4,(0,i.Inject)(Aa.RO)),(0,Le.fM)(5,(0,i.Optional)()),(0,Le.fM)(5,(0,i.Inject)(Xn.vk)),(0,Le.fM)(6,(0,i.Inject)(ge.kI)),(0,Le.fM)(7,(0,i.Inject)(ge.pX)),(0,Le.fM)(8,(0,i.Inject)(it.P_)),(0,Le.fM)(9,(0,i.Inject)(it.q_)),(0,Le.fM)(10,(0,i.Inject)(Xn.zf)),(0,Le.fM)(11,(0,i.Optional)()),(0,Le.fM)(11,(0,i.Inject)(Xn.LD))],e),e})();var wf;let ms=wf=class extends Il.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};ms.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(ms)))(t||ms)}}(),ms.\u0275dir=i.\u0275\u0275defineDirective({type:ms,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:Ii.S0,useExisting:(0,i.forwardRef)(()=>wf)}]),i.\u0275\u0275InheritDefinitionFeature]});let mp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,en.QA,Pl.A,Ji.WD,Bo.wq,fr.KW,ge.cn,sa.jh,mt.E,Ai,Uo.S]]}),e})();var yp=f(56498);function xp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(s)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function bp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,xp,2,3,"button",4),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.filtered)}}const Sf={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:Ma.bM,itemSize:"m"},ys=new i.InjectionToken("Default parameters for input time component",{factory:()=>Sf});var Qs;let vr=Qs=class extends aa.F9{constructor(n,t,r,o){super(n,t),this.timeTexts$=r,this.options=o,this.disabledItemHandler=gn.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,Be.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,kl.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const r=it.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=it.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:Bh(n,this.options.maxValues),pipe:Al(n,this.options.maxValues),guide:!1}}filter(n,t,r){return n.filter(o=>o.toString(t).includes(r))}findNearestTimeFromItems(n){return this.items.reduce((t,r)=>Math.abs(r.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?r:t)}getMatch(n){return this.items.find(t=>(0,gn.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:r}=n;if(this.readOnly||!(r instanceof HTMLInputElement))return;const o=r.selectionStart||0;this.shiftTime(this.calculateShift(o,t)),r.setSelectionRange(o,o),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,Be.NY)(this.nativeFocusableElement,!0,n),this.close())}};vr.\u0275fac=function(n){return new(n||vr)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Xn.Yq),i.\u0275\u0275directiveInject(ys))},vr.\u0275cmp=i.\u0275\u0275defineComponent({type:vr,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(fr.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.textfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Qi.KZ,useExisting:(0,i.forwardRef)(()=>Qs)},hs.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(o){return t.onOpen(o)})("focusedChange",function(o){return t.onFocused(o)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("keydown.arrowUp",function(o){return t.onArrowUp(o)})("keydown.arrowDown",function(o){return t.onArrowDown(o)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,bp,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",r)("open",t.interactive&&t.open&&!!t.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[sa.o1,fr.yc,fr.B1,Uo.n,ge.D9,en.hd,dr.qi,L.sg,dr.vK],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),vr.ctorParameters=()=>[{type:ee.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ee.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:yp.y,decorators:[{type:i.Inject,args:[Xn.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[ys]}]}],(0,Le.gn)([(0,i.ViewChild)(fr.yc)],vr.prototype,"textfield",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],vr.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],vr.prototype,"items",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],vr.prototype,"itemSize",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],vr.prototype,"strict",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],vr.prototype,"mode",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],vr.prototype,"postfix",void 0),(0,Le.gn)([Ce.UM],vr.prototype,"getFiller$",null),(0,Le.gn)([(0,i.HostListener)("click")],vr.prototype,"onClick",null),(0,Le.gn)([Ce.UM],vr.prototype,"calculateMask",null),(0,Le.gn)([Ce.UM],vr.prototype,"filter",null),vr=Qs=(0,Le.gn)([(0,Le.fM)(0,(0,i.Optional)()),(0,Le.fM)(0,(0,i.Self)()),(0,Le.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Le.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Le.fM)(2,(0,i.Inject)(Xn.Yq)),(0,Le.fM)(3,(0,i.Inject)(ys))],vr);let Cp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,en.QA,dr.pc,sa.jh,fr.KW,Uo.S,ge.cn]]}),e})();function wp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Er(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,wp,2,2,"button",23),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.localEventTypes)}}function li(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const Sp=function(e){return["/course",e]};let Tf=(()=>{class e{constructor(t,r,o,s){this.route=t,this.courseEventService=r,this.router=o,this.notificationsService=s,this.eventId=null,this.timeOptions=(0,Ws.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=Au.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=Au.createFormWithData(t)}))}submitEvent(t){const r=Au.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(zs),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(Ht.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,Er,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(30,li,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20)(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Sp,r.courseId)))},directives:[ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,fe.K3,fe.wU,ee.NgControlStatus,ee.FormControlName,Vt.y,Xi.uJ,Xi.OI,dr.gX,dr.qi,L.sg,dr.vK,El.p,Dl,ms,vr,L.O5,Qt.Ls,Et.v0,te.yS],styles:[""]}),e})();var Fl=f(25775),Ef=f(42654),Pf=f(7394);let Tp=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getUserStatsByCategory(t){const r=this.apiService.getURL("user-stats","category",t);return this.http.get(r).pipe((0,xi.K)(this.apiService.handleError("Error occurred while getting user stats")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ls.eN),i.\u0275\u0275inject(js.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ep=f(59796);class Vl{static createForm(){return(new ee.FormBuilder).group({report:new ee.FormControl("",[ee.Validators.required]),report_details:new ee.FormControl("")})}static extractData(n){return n.value}}let Pp=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}reportQuestion(t,r){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},r),{question:t})).pipe((0,xi.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ls.eN),i.\u0275\u0275inject(js.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var If=f(24417),Bl=f(26537);function Af(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Mf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Af,2,2,"button",8),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.reportOptions)}}function Ip(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Reason "),i.\u0275\u0275template(5,Mf,2,1,"tui-data-list",4),i.\u0275\u0275element(6,"tui-field-error",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),i.\u0275\u0275text(9," Details "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"div",2)(11,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().submitReport()}),i.\u0275\u0275text(12," Submit Report "),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",t.formGroup),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",t.reportOptions?i.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),i.\u0275\u0275advance(9),i.\u0275\u0275property("disabled",t.formGroup.invalid)}}const Ap=function(){return{label:"Report this question",size:"m"}};let Mp=(()=>{class e{constructor(t,r){this.reportQuestionService=t,this.notificationsService=r,this.open=!1,this.openChange=new i.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=Vl.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Vl.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Pp),i.\u0275\u0275directiveInject(Ht.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,Ip,13,7,"ng-template",0),i.\u0275\u0275listener("tuiDialogChange",function(s){return r.toggleDialog(s)})),2&t&&i.\u0275\u0275property("tuiDialogOptions",i.\u0275\u0275pureFunction0(2,Ap))("tuiDialog",r.open)},directives:[Aa.iu,ee.NgControlStatusGroup,ee.FormGroupDirective,Xi.uJ,Xi.OI,ee.NgControlStatus,ee.FormControlName,dr.gX,dr.qi,L.sg,dr.vK,Vt.y,If.Jl,If.eQ,Et.v0],pipes:[Bl.J],styles:[""]}),e})();const Hl=function(e){return["../",e]};function xs(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",22)(1,"a",23),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tui-svg",24),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(8,Hl,null==t.parentCategory?null:t.parentCategory.pk)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)}}function Op(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function kp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function Lp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28,29),i.\u0275\u0275text(2),i.\u0275\u0275template(3,kp,1,0,"tui-svg",30),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(1);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(4,Hl,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive)}}function Np(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),i.\u0275\u0275text(3),i.\u0275\u0275template(4,Op,1,0,"tui-svg",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Lp,4,6,"a",31),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(2);i.\u0275\u0275property("label",t.category.name),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Hl,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.children)}}function Rp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",25),i.\u0275\u0275template(1,Np,6,8,"tui-opt-group",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.nestedCategories)}}function Of(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",34),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function kf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Of,2,2,"button",33),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function Dp(e,n){if(1&e&&i.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",t.currentQuestionId)}}function Fp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275element(1,"tui-marker-icon",37),i.\u0275\u0275elementStart(2,"h1",38),i.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const Vp=function(){return["../../../"]};let Bp=(()=>{class e{constructor(t,r,o,s,c,h){this.route=t,this.uqjService=r,this.difficultyService=o,this.courseService=s,this.categoryService=c,this.userStatsService=h,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new Ef.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((r,o)=>o.parent?r:[...r,{category:o,children:t.filter(s=>s.parent===o.pk).map(s=>({category:s,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var o,s;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=t.find(S=>this.categoryId===S.pk),this.parentCategory=t.find(S=>this.category.parent===S.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserStatsByCategory(this.categoryId),h=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),m=this.difficultyService.getDifficulties(),_=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,bl.D)([h,m,c,_]).subscribe(([S,y,H,J])=>{this.uqjs=zt.shuffle(S),this.difficulties=y,this.userStats=H,this.categoryUserSuccessRate=J.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,r){var o,s;this.difficulty=t,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=zt.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const r=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",o=this.userStats.find(s=>s.difficulty===r);this.userSuccessRate=o?o.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(s=>s.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(Uc.O),i.\u0275\u0275directiveInject(Pf.G),i.\u0275\u0275directiveInject(he.N),i.\u0275\u0275directiveInject(Bs.H),i.\u0275\u0275directiveInject(Tp))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:34,vars:40,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),i.\u0275\u0275text(5," Back to course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,xs,4,10,"div",5),i.\u0275\u0275elementStart(7,"tui-hosted-dropdown",6)(8,"button",7),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(10,Rp,2,1,"ng-template",null,8,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(12,"p",9),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"p",10),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"tui-select",11),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(s,r.include_solved)}),i.\u0275\u0275pipe(17,"stringifyTuiDataList"),i.\u0275\u0275text(18," Choose a level of difficulty "),i.\u0275\u0275template(19,kf,2,1,"tui-data-list",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"tui-checkbox-labeled",13),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(r.difficulty,s)}),i.\u0275\u0275text(21," Include Solved "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(22,"div",14)(23,"button",15),i.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),i.\u0275\u0275text(24," Report "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"button",16),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(26," Previous Question "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(27,"button",17),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(28," Next Question "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(29,"div",18),i.\u0275\u0275template(30,Dp,1,1,"app-problem-view",19),i.\u0275\u0275template(31,Fp,4,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(33,"app-problem-report-modal",21),i.\u0275\u0275listener("openChange",function(s){return r.reportQuestionModal=s}),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(11),s=i.\u0275\u0275reference(32);let c;i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(39,Vp)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentCategory),i.\u0275\u0275advance(1),i.\u0275\u0275property("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(c=null==r.category?null:r.category.name)&&void 0!==c?c:"Category Name"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*r.categorySuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.difficulty)("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(17,35,r.difficulties,0,1):""),i.\u0275\u0275advance(4),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.include_solved),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[Ep.k,Et.v0,te.yS,L.O5,jo.V,mt.P,sa.o1,dr.qi,L.sg,dr.Rs,dr.vK,te.Od,Xi.uJ,Xi.OI,ge.sz,ee.NgControlStatus,ee.NgModel,ge.be,dr.gX,El.p,ee.DefaultValueAccessor,Fl.z,rn.B,Mp],pipes:[Bl.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),Lf=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,xi.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const r=this.apiService.getURL("goal");return this.http.post(r,t).pipe((0,xi.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const r=this.apiService.getURL("goal-item");return this.http.post(r,t).pipe((0,xi.K)(this.apiService.handleError("Unable to create goal item.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(ls.eN),i.\u0275\u0275inject(js.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Hp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;let r;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate3(" Solve ",t.number_of_questions," ",null!==(r=t.difficulty)&&void 0!==r?r:""," questions from ",t.category," ")}}function jp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div"),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div"),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(12," Items "),i.\u0275\u0275template(13,Hp,2,3,"div",0),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index;i.\u0275\u0275attribute("data-index",r),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Goal ",r," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Start date: ",t.start_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" End date: ",t.end_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Progress: ",t.progress," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Is Finished: ",t.is_finished," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Number of questions: ",t.number_of_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.goal_items)}}let zp=(()=>{class e{constructor(t){this.goalService=t}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.goals=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Lf))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"h1"),i.\u0275\u0275text(1,"Goals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,jp,14,8,"div",0),i.\u0275\u0275elementStart(3,"a",1),i.\u0275\u0275text(4,"Create a new goal"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",r.goals),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink","create"))},directives:[L.sg,te.yS],styles:[""]}),e})();class bs{static createGoalForm(){return(new ee.FormBuilder).group({end_date:new ee.FormControl(it.TU.currentLocal(),[ee.Validators.required]),end_time:new ee.FormControl(it.qD.currentLocal(),[ee.Validators.required]),goal_items:new ee.FormArray([bs.createGoalItemForm()],[ee.Validators.required])})}static createGoalItemForm(){return(new ee.FormBuilder).group({category:new ee.FormControl("",[ee.Validators.required]),difficulty:new ee.FormControl("",[ee.Validators.required]),number_of_questions:new ee.FormControl("",[ee.Validators.required])})}static formatGoalFormData(n,t){return{course_id:t,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static formatGoalItemFormData(n,t){return Object.assign({goal:t},n.value)}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function ci(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(t))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function zl(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Xp(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",8),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Kp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function Qp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMonthChange(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,Kp,3,1,"div",10)}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===t.items.length)}}const Jp=["*",[["input"]]],Ul=["*","input"],Gl=[{provide:Qi.KZ,useExisting:(0,i.forwardRef)(()=>Wl)},{provide:Xn.cU,deps:[[new i.Optional,new i.Self,ee.NgControl],[new i.Optional,Xn.HF]],useFactory:(e,n)=>(0,Ws.q7)(e,n)},{provide:aa.M$,useExisting:(0,i.forwardRef)(()=>Wl)},hs.Sm];let Wl=(()=>{let e=class extends aa.F9{constructor(t,r,o,s,c,h,m,_,S,y,H){super(t,r,H),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=h,this.textfieldSize=m,this.dateFormat=_,this.dateSeparator=S,this.dateTexts$=y,this.valueTransformer=H,this.month=null,this.textMaskOptions={mask:Ol(this.dateFormat,this.dateSeparator),pipe:Dh(this),guide:!1},this.min=it.K1,this.max=it.Oy,this.disabledItemHandler=gn.Iy,this.markerHandler=yo.zE,this.items=[],this.defaultActiveYearMonth=it.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,kl.U)(J=>(0,it.Yl)(J[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,lf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:r,activeItem:o}=this;return o?String(o):t?t.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?Ma.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(r=>r.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new Bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,Oa.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==it.ek?null:it.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,r){return(0,Cn.Hm)(t,r,(o,s)=>o.daySame(s))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Qi.fL),i.\u0275\u0275directiveInject(Aa.RO),i.\u0275\u0275directiveInject(Xn.vk,8),i.\u0275\u0275directiveInject(ge.kI),i.\u0275\u0275directiveInject(it.P_),i.\u0275\u0275directiveInject(it.q_),i.\u0275\u0275directiveInject(Xn.zf),i.\u0275\u0275directiveInject(Xn.HF,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(fr.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(Gl),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Ul,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Jp),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)}),i.\u0275\u0275template(1,ci,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,zl,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Xp,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Qp,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,5,r.filler$)),i.\u0275\u0275advance(6),i.\u0275\u0275property("polymorpheus",r.type)}},directives:[sa.o1,Ji.Ls,fr.yc,fr.B1,Uo.n,ge.D9,en.hd,mt.P,Bo.GL,gs,ps.A,L.O5,jo.V],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Le.gn)([(0,i.ViewChild)(fr.yc)],e.prototype,"textfield",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,Le.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,i.Optional)()),(0,Le.fM)(0,(0,i.Self)()),(0,Le.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Le.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Le.fM)(2,(0,i.Inject)(i.Injector)),(0,Le.fM)(3,(0,i.Inject)(Qi.fL)),(0,Le.fM)(4,(0,i.Inject)(Aa.RO)),(0,Le.fM)(5,(0,i.Optional)()),(0,Le.fM)(5,(0,i.Inject)(Xn.vk)),(0,Le.fM)(6,(0,i.Inject)(ge.kI)),(0,Le.fM)(7,(0,i.Inject)(it.P_)),(0,Le.fM)(8,(0,i.Inject)(it.q_)),(0,Le.fM)(9,(0,i.Inject)(Xn.zf)),(0,Le.fM)(10,(0,i.Optional)()),(0,Le.fM)(10,(0,i.Inject)(Xn.HF))],e),e})();var Bf;let _s=Bf=class extends Il.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};_s.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(_s)))(t||_s)}}(),_s.\u0275dir=i.\u0275\u0275defineDirective({type:_s,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:Ii.S0,useExisting:(0,i.forwardRef)(()=>Bf)}]),i.\u0275\u0275InheritDefinitionFeature]});let qp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,en.QA,Bo.wq,ps.Z,Rr,mt.E,jo.j,sa.jh,fr.KW,Uo.S,Ji.WD,ge.cn]]}),e})();var ua=f(27670),Hf=f(60390);function eg(e,n){if(1&e&&i.\u0275\u0275element(0,"div",3),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275property("content",t)}}function tg(e,n){1&e&&i.\u0275\u0275projection(0,2)}const $l=["*",[["input"]],[["","polymorpheus-outlet",""]]],Yl=function(e,n,t,r,o){return[e,n,t,r,o]};var Du;let Dr=Du=class extends aa.F9{constructor(n,t,r,o){super(n,t),this.numberFormat=r,this.isIOS=o,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(s,c,h,m)=>({mask:(0,ua.EC)({allowNegative:s,decimalLimit:h,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,ua.YT)(this.numberFormat)}),pipe:(0,ua.qs)("always"===c?h:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,m,s,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;t.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(n.preventDefault(),r.selectionStart++)}onValueChange(n){if((0,ua.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,ua.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if(yo.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const r=Math.min(this.max,Math.max(this.min,t));this.updateValue(r),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const r=Math.abs(n)%1>0;let o="always"===this.decimal||r?this.precision:0;const s=r?(0,Hf.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(o=s.length),(0,Hf.uf)(n,o,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,ua.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,ua.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var jf;Dr.\u0275fac=function(n){return new(n||Dr)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Ii.HO),i.\u0275\u0275directiveInject(Qi.FA))},Dr.\u0275cmp=i.\u0275\u0275defineComponent({type:Dr,selectors:[["tui-input-number"]],contentQueries:function(n,t,r){if(1&n&&i.\u0275\u0275contentQuery(r,Bo.r1,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=o.first)}},viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(fr.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.primitiveTextfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("keydown.0",function(o){return t.onZero(o)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Qi.KZ,useExisting:(0,i.forwardRef)(()=>Du)},{provide:aa.M$,useExisting:(0,i.forwardRef)(()=>Du)}]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(i.\u0275\u0275projectionDef($l),i.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("focusedChange",function(o){return t.onFocused(o)})("pressedChange",function(o){return t.onPressed(o)})("keydown",function(o){return t.onKeyDown(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275projection(2),i.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275template(4,eg,1,1,"div",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,tg,1,0,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",i.\u0275\u0275pipeBindV(1,13,i.\u0275\u0275pureFunction5(19,Yl,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[fr.yc,fr.B1,Uo.n,ge.D9,ge.fy,en.hd,L.O5,Bo.r1],pipes:[xo.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Dr.ctorParameters=()=>[{type:ee.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ee.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:i.Inject,args:[Ii.HO]}]},{type:Boolean,decorators:[{type:i.Inject,args:[Qi.FA]}]}],(0,Le.gn)([(0,i.ViewChild)(fr.yc)],Dr.prototype,"primitiveTextfield",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],Dr.prototype,"min",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],Dr.prototype,"max",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],Dr.prototype,"decimal",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],Dr.prototype,"precision",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],Dr.prototype,"prefix",void 0),(0,Le.gn)([(0,i.Input)(),(0,Ce.TH)()],Dr.prototype,"postfix",void 0),(0,Le.gn)([(0,i.ContentChild)(Bo.r1)],Dr.prototype,"polymorpheusValueContent",void 0),(0,Le.gn)([(0,i.HostListener)("keydown.0",["$event"])],Dr.prototype,"onZero",null),Dr=Du=(0,Le.gn)([(0,Le.fM)(0,(0,i.Optional)()),(0,Le.fM)(0,(0,i.Self)()),(0,Le.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Le.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Le.fM)(2,(0,i.Inject)(Ii.HO)),(0,Le.fM)(3,(0,i.Inject)(Qi.FA))],Dr);let Cs=jf=class extends Il.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};Cs.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(Cs)))(t||Cs)}}(),Cs.\u0275dir=i.\u0275\u0275defineDirective({type:Cs,selectors:[["tui-input-number"]],features:[i.\u0275\u0275ProvidersFeature([{provide:Ii.S0,useExisting:(0,i.forwardRef)(()=>jf)}]),i.\u0275\u0275InheritDefinitionFeature]});let ig=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,en.QA,xo.I,fr.KW,ge.cn,Uo.S,Bo.wq]]}),e})();function og(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t.pk),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function ag(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,og,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.categories)}}function sg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function ug(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,sg,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function lg(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",13),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Category "),i.\u0275\u0275template(5,ag,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",4)(8,"tui-select",13),i.\u0275\u0275pipe(9,"stringifyTuiDataList"),i.\u0275\u0275text(10," Difficulty "),i.\u0275\u0275template(11,ug,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",4)(14,"tui-input-number",15),i.\u0275\u0275text(15," Number of questions "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",4)(18,"button",16),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).index;return i.\u0275\u0275nextContext().removeGoalItem(s)}),i.\u0275\u0275text(19," Remove "),i.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.categories?i.\u0275\u0275pipeBind3(3,8,r.categories,"pk","full_name"):"")("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(9,12,r.difficulties,0,1):"")("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions"))}}let cg=(()=>{class e{constructor(t,r,o,s,c,h){this.goalService=t,this.categoryService=r,this.difficultyService=o,this.router=s,this.activatedRoute=c,this.notificationService=h,this.timeOptions=(0,Ws.eN)()}ngOnInit(){this.courseId=this.activatedRoute.snapshot.params.courseId,this.goalForm=bs.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,r){return t.get(r)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(bs.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}onSubmit(){return function Up(e,n,t,r){return new(t||(t=Promise))(function(s,c){function h(S){try{_(r.next(S))}catch(y){c(y)}}function m(S){try{_(r.throw(S))}catch(y){c(y)}}function _(S){S.done?s(S.value):function o(s){return s instanceof t?s:new t(function(c){c(s)})}(S.value).then(h,m)}_((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){const t=bs.formatGoalFormData(this.goalForm,this.courseId),r=yield this.goalService.createGoal(t).toPromise();for(const o of this.getGoalItemFormControls()){const s=bs.formatGoalItemFormData(o,r.id);yield this.goalService.createGoalItem(s).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Lf),i.\u0275\u0275directiveInject(Bs.H),i.\u0275\u0275directiveInject(Pf.G),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(Ht.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],decls:21,vars:4,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconPlus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Goal"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"tui-input-date",5),i.\u0275\u0275text(7," End date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",4)(10,"tui-input-time",7),i.\u0275\u0275text(11," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"h3",2),i.\u0275\u0275text(14,"Goal Items"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(15,lg,20,16,"div",9),i.\u0275\u0275elementStart(16,"div",10)(17,"button",11),i.\u0275\u0275listener("click",function(){return r.addGoalItem()}),i.\u0275\u0275text(18," Add Another "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"button",12),i.\u0275\u0275text(20," Submit "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.goalForm),i.\u0275\u0275advance(9),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.getGoalItemFormControls()),i.\u0275\u0275advance(4),i.\u0275\u0275property("disabled",r.goalForm.invalid))},directives:[ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,Wl,_s,ee.NgControlStatus,ee.FormControlName,Vt.y,vr,L.sg,Xi.uJ,Xi.OI,ee.FormControlDirective,dr.gX,dr.qi,dr.vK,Dr,Cs,Et.v0],pipes:[Bl.J],styles:[""]}),e})();const fg=[{path:"",component:ut,canActivate:[X.a]},{path:":courseId",component:Rh,canActivate:[X.a]},{path:":courseId/register",component:Go,canActivate:[X.a]},{path:":courseId/new-event",component:Tf,canActivate:[X.a]},{path:":courseId/new-event/:eventId",component:Tf,canActivate:[X.a]},{path:":courseId/event/:eventId",component:Kc,canActivate:[X.a]},{path:":courseId/problem/:id",component:Fl.z,canActivate:[X.a]},{path:":courseId/event/:eventId/problem/:id",component:Fl.z,canActivate:[X.a]},{path:":courseId/practice/category/:categoryId",component:Bp,canActivate:[X.a]},{path:":courseId/goal",component:zp,canActivate:[X.a]},{path:":courseId/goal/create",component:cg,canActivate:[X.a]}];let dg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[te.Bz.forChild(fg)],te.Bz]}),e})();var hg=f(16995),pg=f(96560),gg=f(22079),vg=f(70228),mg=f(38333),yg=f(66235),a=f(24736),u=f(63821),p=f(68476),I=f(54554);let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[zs,he.N,tf],imports:[[L.ez,yg.J,dg,ee.FormsModule,hg._l,a.D,u.ProblemsModule,ee.ReactiveFormsModule,I.l,en.QA,Pu.iK,Pl.A,rf.Jm,Et.fN,Rr,El.s,dr.pc,Qc.zX,Aa.up,pg.S,Vt.C,Ne.p,sa.jh,wl.$H,qp,mp,fe.Qf,ig,Cp,cs.y,jo.j,gg.dS,rn.z,vg.z,Qt.Hi,Xi.Jy,p.T,me,mt.E,Ki.jz,Zr.$$,mg.qE.forRoot(),Us.d3,ge.cn]]}),e})()},71066:(P,W,f)=>{var g,v,E;E="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,g=[f(29610),f(58259),W],void 0!==(v=function(k,M,B){E.Backbone=function(T,E,b,A){var k=T.Backbone,M=Array.prototype.slice;E.VERSION="1.4.1",E.$=A,E.noConflict=function(){return T.Backbone=k,this},E.emulateHTTP=!1,E.emulateJSON=!1;var L,B=E.Events={},j=/\s+/,X=function(D,G,re,me,Ge){var ct,Ye=0;if(re&&"object"==typeof re)for((void 0!==me&&"context"in Ge&&void 0===Ge.context&&(Ge.context=me),ct=b.keys(re));Ye<ct.length;Ye++)G=X(D,G,ct[Ye],re[ct[Ye]],Ge);else if(re&&j.test(re))for(ct=re.split(j);Ye<ct.length;Ye++)G=D(G,ct[Ye],me,Ge);else G=D(G,re,me,Ge);return G};B.on=function(D,G,re){return this._events=X(te,this._events||{},D,G,{context:re,ctx:this,listening:L}),L&&((this._listeners||(this._listeners={}))[L.id]=L,L.interop=!1),this},B.listenTo=function(D,G,re){if(!D)return this;var me=D._listenId||(D._listenId=b.uniqueId("l")),Ge=this._listeningTo||(this._listeningTo={}),Ye=L=Ge[me];Ye||(this._listenId||(this._listenId=b.uniqueId("l")),Ye=L=Ge[me]=new ee(this,D));var ct=le(D,G,re,this);if(L=void 0,ct)throw ct;return Ye.interop&&Ye.on(G,re),this};var te=function(D,G,re,me){if(re){var Ge=D[G]||(D[G]=[]),Ye=me.context,ct=me.ctx,It=me.listening;It&&It.count++,Ge.push({callback:re,context:Ye,ctx:Ye||ct,listening:It})}return D},le=function(D,G,re,me){try{D.on(G,re,me)}catch(Ge){return Ge}};B.off=function(D,G,re){return this._events?(this._events=X(i,this._events,D,G,{context:re,listeners:this._listeners}),this):this},B.stopListening=function(D,G,re){var me=this._listeningTo;if(!me)return this;for(var Ge=D?[D._listenId]:b.keys(me),Ye=0;Ye<Ge.length;Ye++){var ct=me[Ge[Ye]];if(!ct)break;ct.obj.off(G,re,this),ct.interop&&ct.off(G,re)}return b.isEmpty(me)&&(this._listeningTo=void 0),this};var i=function(D,G,re,me){if(D){var It,Ge=me.context,Ye=me.listeners,ct=0;if(!G&&!Ge&&!re){for(It=b.keys(Ye);ct<It.length;ct++)Ye[It[ct]].cleanup();return}for(It=G?[G]:b.keys(D);ct<It.length;ct++){var Vt=D[G=It[ct]];if(!Vt)break;for(var rn=[],en=0;en<Vt.length;en++){var on=Vt[en];if(re&&re!==on.callback&&re!==on.callback._callback||Ge&&Ge!==on.context)rn.push(on);else{var Un=on.listening;Un&&Un.off(G,re)}}rn.length?D[G]=rn:delete D[G]}return D}};B.once=function(D,G,re){var me=X(ae,{},D,G,this.off.bind(this));return"string"==typeof D&&null==re&&(G=void 0),this.on(me,G,re)},B.listenToOnce=function(D,G,re){var me=X(ae,{},G,re,this.stopListening.bind(this,D));return this.listenTo(D,me)};var ae=function(D,G,re,me){if(re){var Ge=D[G]=b.once(function(){me(G,Ge),re.apply(this,arguments)});Ge._callback=re}return D};B.trigger=function(D){if(!this._events)return this;for(var G=Math.max(0,arguments.length-1),re=Array(G),me=0;me<G;me++)re[me]=arguments[me+1];return X(he,this._events,D,void 0,re),this};var he=function(D,G,re,me){if(D){var Ge=D[G],Ye=D.all;Ge&&Ye&&(Ye=Ye.slice()),Ge&&fe(Ge,me),Ye&&fe(Ye,[G].concat(me))}return D},fe=function(D,G){var re,me=-1,Ge=D.length,Ye=G[0],ct=G[1],It=G[2];switch(G.length){case 0:for(;++me<Ge;)(re=D[me]).callback.call(re.ctx);return;case 1:for(;++me<Ge;)(re=D[me]).callback.call(re.ctx,Ye);return;case 2:for(;++me<Ge;)(re=D[me]).callback.call(re.ctx,Ye,ct);return;case 3:for(;++me<Ge;)(re=D[me]).callback.call(re.ctx,Ye,ct,It);return;default:for(;++me<Ge;)(re=D[me]).callback.apply(re.ctx,G);return}},ee=function(D,G){this.id=D._listenId,this.listener=D,this.obj=G,this.interop=!0,this.count=0,this._events=void 0};ee.prototype.on=B.on,ee.prototype.off=function(D,G){var re;this.interop?(this._events=X(i,this._events,D,G,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},ee.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},B.bind=B.on,B.unbind=B.off,b.extend(E,B);var ge=E.Model=function(D,G){var re=D||{};G||(G={}),this.preinitialize.apply(this,arguments),this.cid=b.uniqueId(this.cidPrefix),this.attributes={},G.collection&&(this.collection=G.collection),G.parse&&(re=this.parse(re,G)||{});var me=b.result(this,"defaults");re=b.defaults(b.extend({},me,re),me),this.set(re,G),this.changed={},this.initialize.apply(this,arguments)};b.extend(ge.prototype,B,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(D){return b.clone(this.attributes)},sync:function(){return E.sync.apply(this,arguments)},get:function(D){return this.attributes[D]},escape:function(D){return b.escape(this.get(D))},has:function(D){return null!=this.get(D)},matches:function(D){return!!b.iteratee(D,this)(this.attributes)},set:function(D,G,re){if(null==D)return this;var me;if("object"==typeof D?(me=D,re=G):(me={})[D]=G,re||(re={}),!this._validate(me,re))return!1;var Ge=re.unset,Ye=re.silent,ct=[],It=this._changing;this._changing=!0,It||(this._previousAttributes=b.clone(this.attributes),this.changed={});var Vt=this.attributes,rn=this.changed,en=this._previousAttributes;for(var on in me)b.isEqual(Vt[on],G=me[on])||ct.push(on),b.isEqual(en[on],G)?delete rn[on]:rn[on]=G,Ge?delete Vt[on]:Vt[on]=G;if(this.idAttribute in me){var Un=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Un,re)}if(!Ye){ct.length&&(this._pending=re);for(var Hn=0;Hn<ct.length;Hn++)this.trigger("change:"+ct[Hn],this,Vt[ct[Hn]],re)}if(It)return this;if(!Ye)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(D,G){return this.set(D,void 0,b.extend({},G,{unset:!0}))},clear:function(D){var G={};for(var re in this.attributes)G[re]=void 0;return this.set(G,b.extend({},D,{unset:!0}))},hasChanged:function(D){return null==D?!b.isEmpty(this.changed):b.has(this.changed,D)},changedAttributes:function(D){if(!D)return!!this.hasChanged()&&b.clone(this.changed);var me,G=this._changing?this._previousAttributes:this.attributes,re={};for(var Ge in D){var Ye=D[Ge];b.isEqual(G[Ge],Ye)||(re[Ge]=Ye,me=!0)}return!!me&&re},previous:function(D){return null!=D&&this._previousAttributes?this._previousAttributes[D]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(D){D=b.extend({parse:!0},D);var G=this,re=D.success;return D.success=function(me){var Ge=D.parse?G.parse(me,D):me;if(!G.set(Ge,D))return!1;re&&re.call(D.context,G,me,D),G.trigger("sync",G,me,D)},jt(this,D),this.sync("read",this,D)},save:function(D,G,re){var me;null==D||"object"==typeof D?(me=D,re=G):(me={})[D]=G;var Ge=(re=b.extend({validate:!0,parse:!0},re)).wait;if(me&&!Ge){if(!this.set(me,re))return!1}else if(!this._validate(me,re))return!1;var Ye=this,ct=re.success,It=this.attributes;re.success=function(en){Ye.attributes=It;var on=re.parse?Ye.parse(en,re):en;if(Ge&&(on=b.extend({},me,on)),on&&!Ye.set(on,re))return!1;ct&&ct.call(re.context,Ye,en,re),Ye.trigger("sync",Ye,en,re)},jt(this,re),me&&Ge&&(this.attributes=b.extend({},It,me));var Vt=this.isNew()?"create":re.patch?"patch":"update";"patch"===Vt&&!re.attrs&&(re.attrs=me);var rn=this.sync(Vt,this,re);return this.attributes=It,rn},destroy:function(D){D=D?b.clone(D):{};var G=this,re=D.success,me=D.wait,Ge=function(){G.stopListening(),G.trigger("destroy",G,G.collection,D)};D.success=function(ct){me&&Ge(),re&&re.call(D.context,G,ct,D),G.isNew()||G.trigger("sync",G,ct,D)};var Ye=!1;return this.isNew()?b.defer(D.success):(jt(this,D),Ye=this.sync("delete",this,D)),me||Ge(),Ye},url:function(){var D=b.result(this,"urlRoot")||b.result(this.collection,"url")||Yt();if(this.isNew())return D;var G=this.get(this.idAttribute);return D.replace(/[^\/]$/,"$&/")+encodeURIComponent(G)},parse:function(D,G){return D},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(D){return this._validate({},b.extend({},D,{validate:!0}))},_validate:function(D,G){if(!G.validate||!this.validate)return!0;D=b.extend({},this.attributes,D);var re=this.validationError=this.validate(D,G)||null;return!re||(this.trigger("invalid",this,re,b.extend(G,{validationError:re})),!1)}});var Te=E.Collection=function(D,G){G||(G={}),this.preinitialize.apply(this,arguments),G.model&&(this.model=G.model),void 0!==G.comparator&&(this.comparator=G.comparator),this._reset(),this.initialize.apply(this,arguments),D&&this.reset(D,b.extend({silent:!0},G))},Ne={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},Ve=function(D,G,re){re=Math.min(Math.max(re,0),D.length);var Ye,me=Array(D.length-re),Ge=G.length;for(Ye=0;Ye<me.length;Ye++)me[Ye]=D[Ye+re];for(Ye=0;Ye<Ge;Ye++)D[Ye+re]=G[Ye];for(Ye=0;Ye<me.length;Ye++)D[Ye+Ge+re]=me[Ye]};b.extend(Te.prototype,B,{model:ge,preinitialize:function(){},initialize:function(){},toJSON:function(D){return this.map(function(G){return G.toJSON(D)})},sync:function(){return E.sync.apply(this,arguments)},add:function(D,G){return this.set(D,b.extend({merge:!1},G,C))},remove:function(D,G){G=b.extend({},G);var re=!b.isArray(D);D=re?[D]:D.slice();var me=this._removeModels(D,G);return!G.silent&&me.length&&(G.changes={added:[],merged:[],removed:me},this.trigger("update",this,G)),re?me[0]:me},set:function(D,G){if(null!=D){(G=b.extend({},Ne,G)).parse&&!this._isModel(D)&&(D=this.parse(D,G)||[]);var re=!b.isArray(D);D=re?[D]:D.slice();var me=G.at;null!=me&&(me=+me),me>this.length&&(me=this.length),me<0&&(me+=this.length+1);var Pn,Gn,Ge=[],Ye=[],ct=[],It=[],Vt={},rn=G.add,en=G.merge,on=G.remove,Un=!1,Hn=this.comparator&&null==me&&!1!==G.sort,Ur=b.isString(this.comparator)?this.comparator:null;for(Gn=0;Gn<D.length;Gn++){var jn=this.get(Pn=D[Gn]);if(jn){if(en&&Pn!==jn){var Kn=this._isModel(Pn)?Pn.attributes:Pn;G.parse&&(Kn=jn.parse(Kn,G)),jn.set(Kn,G),ct.push(jn),Hn&&!Un&&(Un=jn.hasChanged(Ur))}Vt[jn.cid]||(Vt[jn.cid]=!0,Ge.push(jn)),D[Gn]=jn}else rn&&(Pn=D[Gn]=this._prepareModel(Pn,G))&&(Ye.push(Pn),this._addReference(Pn,G),Vt[Pn.cid]=!0,Ge.push(Pn))}if(on){for(Gn=0;Gn<this.length;Gn++)Vt[(Pn=this.models[Gn]).cid]||It.push(Pn);It.length&&this._removeModels(It,G)}var mr=!1;if(Ge.length&&!Hn&&rn&&on?(mr=this.length!==Ge.length||b.some(this.models,function(sr,nr){return sr!==Ge[nr]}),this.models.length=0,Ve(this.models,Ge,0),this.length=this.models.length):Ye.length&&(Hn&&(Un=!0),Ve(this.models,Ye,null==me?this.length:me),this.length=this.models.length),Un&&this.sort({silent:!0}),!G.silent){for(Gn=0;Gn<Ye.length;Gn++)null!=me&&(G.index=me+Gn),(Pn=Ye[Gn]).trigger("add",Pn,this,G);(Un||mr)&&this.trigger("sort",this,G),(Ye.length||It.length||ct.length)&&(G.changes={added:Ye,removed:It,merged:ct},this.trigger("update",this,G))}return re?D[0]:D}},reset:function(D,G){G=G?b.clone(G):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],G);return G.previousModels=this.models,this._reset(),D=this.add(D,b.extend({silent:!0},G)),G.silent||this.trigger("reset",this,G),D},push:function(D,G){return this.add(D,b.extend({at:this.length},G))},pop:function(D){var G=this.at(this.length-1);return this.remove(G,D)},unshift:function(D,G){return this.add(D,b.extend({at:0},G))},shift:function(D){var G=this.at(0);return this.remove(G,D)},slice:function(){return M.apply(this.models,arguments)},get:function(D){if(null!=D)return this._byId[D]||this._byId[this.modelId(this._isModel(D)?D.attributes:D,D.idAttribute)]||D.cid&&this._byId[D.cid]},has:function(D){return null!=this.get(D)},at:function(D){return D<0&&(D+=this.length),this.models[D]},where:function(D,G){return this[G?"find":"filter"](D)},findWhere:function(D){return this.where(D,!0)},sort:function(D){var G=this.comparator;if(!G)throw new Error("Cannot sort a set without a comparator");D||(D={});var re=G.length;return b.isFunction(G)&&(G=G.bind(this)),1===re||b.isString(G)?this.models=this.sortBy(G):this.models.sort(G),D.silent||this.trigger("sort",this,D),this},pluck:function(D){return this.map(D+"")},fetch:function(D){var G=(D=b.extend({parse:!0},D)).success,re=this;return D.success=function(me){re[D.reset?"reset":"set"](me,D),G&&G.call(D.context,re,me,D),re.trigger("sync",re,me,D)},jt(this,D),this.sync("read",this,D)},create:function(D,G){var re=(G=G?b.clone(G):{}).wait;if(!(D=this._prepareModel(D,G)))return!1;re||this.add(D,G);var me=this,Ge=G.success;return G.success=function(Ye,ct,It){re&&me.add(Ye,It),Ge&&Ge.call(It.context,Ye,ct,It)},D.save(null,G),D},parse:function(D,G){return D},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(D,G){return D[G||this.model.prototype.idAttribute||"id"]},values:function(){return new Xe(this,et)},keys:function(){return new Xe(this,nt)},entries:function(){return new Xe(this,ut)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(D,G){return this._isModel(D)?(D.collection||(D.collection=this),D):((G=G?b.clone(G):{}).collection=this,(re=this.model.prototype?new this.model(D,G):this.model(D,G)).validationError?(this.trigger("invalid",this,re.validationError,G),!1):re);var re},_removeModels:function(D,G){for(var re=[],me=0;me<D.length;me++){var Ge=this.get(D[me]);if(Ge){var Ye=this.indexOf(Ge);this.models.splice(Ye,1),this.length--,delete this._byId[Ge.cid];var ct=this.modelId(Ge.attributes,Ge.idAttribute);null!=ct&&delete this._byId[ct],G.silent||(G.index=Ye,Ge.trigger("remove",Ge,this,G)),re.push(Ge),this._removeReference(Ge,G)}}return re},_isModel:function(D){return D instanceof ge},_addReference:function(D,G){this._byId[D.cid]=D;var re=this.modelId(D.attributes,D.idAttribute);null!=re&&(this._byId[re]=D),D.on("all",this._onModelEvent,this)},_removeReference:function(D,G){delete this._byId[D.cid];var re=this.modelId(D.attributes,D.idAttribute);null!=re&&delete this._byId[re],this===D.collection&&delete D.collection,D.off("all",this._onModelEvent,this)},_onModelEvent:function(D,G,re,me){if(G){if(("add"===D||"remove"===D)&&re!==this)return;if("destroy"===D&&this.remove(G,me),"changeId"===D){var Ge=this.modelId(G.previousAttributes(),G.idAttribute),Ye=this.modelId(G.attributes,G.idAttribute);null!=Ge&&delete this._byId[Ge],null!=Ye&&(this._byId[Ye]=G)}}this.trigger.apply(this,arguments)}});var Qe="function"==typeof Symbol&&Symbol.iterator;Qe&&(Te.prototype[Qe]=Te.prototype.values);var Xe=function(D,G){this._collection=D,this._kind=G,this._index=0},et=1,nt=2,ut=3;Qe&&(Xe.prototype[Qe]=function(){return this}),Xe.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var G,D=this._collection.at(this._index);if(this._index++,this._kind===et)G=D;else{var re=this._collection.modelId(D.attributes,D.idAttribute);G=this._kind===nt?re:[re,D]}return{value:G,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var bt=E.View=function(D){this.cid=b.uniqueId("view"),this.preinitialize.apply(this,arguments),b.extend(this,b.pick(D,Qt)),this._ensureElement(),this.initialize.apply(this,arguments)},Ht=/^(\S+)\s*(.*)$/,Qt=["model","collection","el","id","attributes","className","tagName","events"];b.extend(bt.prototype,B,{tagName:"div",$:function(D){return this.$el.find(D)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(D){return this.undelegateEvents(),this._setElement(D),this.delegateEvents(),this},_setElement:function(D){this.$el=D instanceof E.$?D:E.$(D),this.el=this.$el[0]},delegateEvents:function(D){if(D||(D=b.result(this,"events")),!D)return this;for(var G in this.undelegateEvents(),D){var re=D[G];if(b.isFunction(re)||(re=this[re]),re){var me=G.match(Ht);this.delegate(me[1],me[2],re.bind(this))}}return this},delegate:function(D,G,re){return this.$el.on(D+".delegateEvents"+this.cid,G,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(D,G,re){return this.$el.off(D+".delegateEvents"+this.cid,G,re),this},_createElement:function(D){return document.createElement(D)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var D=b.extend({},b.result(this,"attributes"));this.id&&(D.id=b.result(this,"id")),this.className&&(D.class=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(D)}},_setAttributes:function(D){this.$el.attr(D)}});var Jn=function(D,G,re,me){b.each(re,function(Ge,Ye){G[Ye]&&(D.prototype[Ye]=function(D,G,re,me){switch(G){case 1:return function(){return D[re](this[me])};case 2:return function(Ge){return D[re](this[me],Ge)};case 3:return function(Ge,Ye){return D[re](this[me],Pr(Ge,this),Ye)};case 4:return function(Ge,Ye,ct){return D[re](this[me],Pr(Ge,this),Ye,ct)};default:return function(){var Ge=M.call(arguments);return Ge.unshift(this[me]),D[re].apply(D,Ge)}}}(G,Ge,Ye,me))})},Pr=function(D,G){return b.isFunction(D)?D:b.isObject(D)&&!G._isModel(D)?Ir(D):b.isString(D)?function(re){return re.get(D)}:D},Ir=function(D){var G=b.matches(D);return function(re){return G(re.attributes)}};b.each([[Te,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[ge,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(D){var G=D[0],re=D[1],me=D[2];G.mixin=function(Ge){var Ye=b.reduce(b.functions(Ge),function(ct,It){return ct[It]=0,ct},{});Jn(G,Ge,Ye,me)},Jn(G,b,re,me)}),E.sync=function(D,G,re){var me=ar[D];b.defaults(re||(re={}),{emulateHTTP:E.emulateHTTP,emulateJSON:E.emulateJSON});var Ge={type:me,dataType:"json"};if(re.url||(Ge.url=b.result(G,"url")||Yt()),null==re.data&&G&&("create"===D||"update"===D||"patch"===D)&&(Ge.contentType="application/json",Ge.data=JSON.stringify(re.attrs||G.toJSON(re))),re.emulateJSON&&(Ge.contentType="application/x-www-form-urlencoded",Ge.data=Ge.data?{model:Ge.data}:{}),re.emulateHTTP&&("PUT"===me||"DELETE"===me||"PATCH"===me)){Ge.type="POST",re.emulateJSON&&(Ge.data._method=me);var Ye=re.beforeSend;re.beforeSend=function(Vt){if(Vt.setRequestHeader("X-HTTP-Method-Override",me),Ye)return Ye.apply(this,arguments)}}"GET"!==Ge.type&&!re.emulateJSON&&(Ge.processData=!1);var ct=re.error;re.error=function(Vt,rn,en){re.textStatus=rn,re.errorThrown=en,ct&&ct.call(re.context,Vt,rn,en)};var It=re.xhr=E.ajax(b.extend(Ge,re));return G.trigger("request",G,It,re),It};var ar={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};E.ajax=function(){return E.$.ajax.apply(E.$,arguments)};var Cn=E.Router=function(D){D||(D={}),this.preinitialize.apply(this,arguments),D.routes&&(this.routes=D.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Be=/\((.*?)\)/g,Ce=/(\(\?)?:\w+/g,Ze=/\*\w+/g,lt=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(Cn.prototype,B,{preinitialize:function(){},initialize:function(){},route:function(D,G,re){b.isRegExp(D)||(D=this._routeToRegExp(D)),b.isFunction(G)&&(re=G,G=""),re||(re=this[G]);var me=this;return E.history.route(D,function(Ge){var Ye=me._extractParameters(D,Ge);!1!==me.execute(re,Ye,G)&&(me.trigger.apply(me,["route:"+G].concat(Ye)),me.trigger("route",G,Ye),E.history.trigger("route",me,G,Ye))}),this},execute:function(D,G,re){D&&D.apply(this,G)},navigate:function(D,G){return E.history.navigate(D,G),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var D,G=b.keys(this.routes);null!=(D=G.pop());)this.route(D,this.routes[D])}},_routeToRegExp:function(D){return D=D.replace(lt,"\\$&").replace(Be,"(?:$1)?").replace(Ce,function(G,re){return re?G:"([^/?]+)"}).replace(Ze,"([^?]*?)"),new RegExp("^"+D+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(D,G){var re=D.exec(G).slice(1);return b.map(re,function(me,Ge){return Ge===re.length-1?me||null:me?decodeURIComponent(me):null})}});var mt=E.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},nn=/^[#\/]|\s+$/g,mn=/^\/+|\/+$/g,zn=/#.*$/;mt.started=!1,b.extend(mt.prototype,B,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(D){return decodeURI(D.replace(/%25/g,"%2525"))},getSearch:function(){var D=this.location.href.replace(/#.*/,"").match(/\?.+/);return D?D[0]:""},getHash:function(D){var G=(D||this).location.href.match(/#(.*)$/);return G?G[1]:""},getPath:function(){var D=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===D.charAt(0)?D.slice(1):D},getFragment:function(D){return null==D&&(D=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),D.replace(nn,"")},start:function(D){if(mt.started)throw new Error("Backbone.history has already been started");if(mt.started=!0,this.options=b.extend({root:"/"},this.options,D),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(mn,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var G=this.root.slice(0,-1)||"/";return this.location.replace(G+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,me=re.insertBefore(this.iframe,re.firstChild).contentWindow;me.document.open(),me.document.close(),me.location.hash="#"+this.fragment}var Ge=window.addEventListener||function(Ye,ct){return attachEvent("on"+Ye,ct)};if(this._usePushState?Ge("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Ge("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var D=window.removeEventListener||function(G,re){return detachEvent("on"+G,re)};this._usePushState?D("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&D("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),mt.started=!1},route:function(D,G){this.handlers.unshift({route:D,callback:G})},checkUrl:function(D){var G=this.getFragment();if(G===this.fragment&&this.iframe&&(G=this.getHash(this.iframe.contentWindow)),G===this.fragment)return!1;this.iframe&&this.navigate(G),this.loadUrl()},loadUrl:function(D){return!!this.matchRoot()&&(D=this.fragment=this.getFragment(D),b.some(this.handlers,function(G){if(G.route.test(D))return G.callback(D),!0}))},navigate:function(D,G){if(!mt.started)return!1;(!G||!0===G)&&(G={trigger:!!G}),D=this.getFragment(D||"");var re=this.root;(""===D||"?"===D.charAt(0))&&(re=re.slice(0,-1)||"/");var me=re+D;D=D.replace(zn,"");var Ge=this.decodeFragment(D);if(this.fragment!==Ge){if(this.fragment=Ge,this._usePushState)this.history[G.replace?"replaceState":"pushState"]({},document.title,me);else{if(!this._wantsHashChange)return this.location.assign(me);if(this._updateHash(this.location,D,G.replace),this.iframe&&D!==this.getHash(this.iframe.contentWindow)){var Ye=this.iframe.contentWindow;G.replace||(Ye.document.open(),Ye.document.close()),this._updateHash(Ye.location,D,G.replace)}}if(G.trigger)return this.loadUrl(D)}},_updateHash:function(D,G,re){if(re){var me=D.href.replace(/(javascript:|#).*$/,"");D.replace(me+"#"+G)}else D.hash="#"+G}}),E.history=new mt;ge.extend=Te.extend=Cn.extend=bt.extend=mt.extend=function(D,G){var me,re=this;return me=D&&b.has(D,"constructor")?D.constructor:function(){return re.apply(this,arguments)},b.extend(me,re,G),me.prototype=b.create(re.prototype,D),me.prototype.constructor=me,me.__super__=re.prototype,me};var Yt=function(){throw new Error('A "url" property or function must be specified')},jt=function(D,G){var re=G.error;G.error=function(me){re&&re.call(G.context,D,me,G),D.trigger("error",D,me,G)}};return E}(E,B,k,M)}.apply(W,g))&&(P.exports=v)},59695:(P,W,f)=>{P.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(P,W,f)=>{"use strict";var g=f(45760),v=f(67365);P.exports={run:function T(A){var k="greedy"===A.graph().acyclicer?v(A,function M(B){return function(j){return B.edge(j).weight}}(A)):function E(A){var k=[],M={},B={};return g.forEach(A.nodes(),function j(L){g.has(B,L)||(B[L]=!0,M[L]=!0,g.forEach(A.outEdges(L),function(X){g.has(M,X.w)?k.push(X):j(X.w)}),delete M[L])}),k}(A);g.forEach(k,function(B){var j=A.edge(B);A.removeEdge(B),j.forwardName=B.name,j.reversed=!0,A.setEdge(B.w,B.v,j,g.uniqueId("rev"))})},undo:function b(A){g.forEach(A.edges(),function(k){var M=A.edge(k);if(M.reversed){A.removeEdge(k);var B=M.forwardName;delete M.reversed,delete M.forwardName,A.setEdge(k.w,k.v,M,B)}})}}},79999:(P,W,f)=>{var g=f(45760),v=f(11510);function E(b,A,k,M,B,j){var X=B[A][j-1],te=v.addDummyNode(b,"border",{width:0,height:0,rank:j,borderType:A},k);B[A][j]=te,b.setParent(te,M),X&&b.setEdge(X,te,{weight:1})}P.exports=function T(b){g.forEach(b.children(),function A(k){var M=b.children(k),B=b.node(k);if(M.length&&g.forEach(M,A),g.has(B,"minRank")){B.borderLeft=[],B.borderRight=[];for(var j=B.minRank,L=B.maxRank+1;j<L;++j)E(b,"borderLeft","_bl",k,B,j),E(b,"borderRight","_br",k,B,j)}})}},83870:(P,W,f)=>{"use strict";var g=f(45760);function E(j){g.forEach(j.nodes(),function(L){b(j.node(L))}),g.forEach(j.edges(),function(L){b(j.edge(L))})}function b(j){var L=j.width;j.width=j.height,j.height=L}function k(j){j.y=-j.y}function B(j){var L=j.x;j.x=j.y,j.y=L}P.exports={adjust:function v(j){var L=j.graph().rankdir.toLowerCase();("lr"===L||"rl"===L)&&E(j)},undo:function T(j){var L=j.graph().rankdir.toLowerCase();("bt"===L||"rl"===L)&&function A(j){g.forEach(j.nodes(),function(L){k(j.node(L))}),g.forEach(j.edges(),function(L){var X=j.edge(L);g.forEach(X.points,k),g.has(X,"y")&&k(X)})}(j),("lr"===L||"rl"===L)&&(function M(j){g.forEach(j.nodes(),function(L){B(j.node(L))}),g.forEach(j.edges(),function(L){var X=j.edge(L);g.forEach(X.points,B),g.has(X,"x")&&B(X)})}(j),E(j))}}},3226:P=>{function W(){var v={};v._next=v._prev=v,this._sentinel=v}function f(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function g(v,T){if("_next"!==v&&"_prev"!==v)return T}P.exports=W,W.prototype.dequeue=function(){var v=this._sentinel,T=v._prev;if(T!==v)return f(T),T},W.prototype.enqueue=function(v){var T=this._sentinel;v._prev&&v._next&&f(v),v._next=T._next,T._next._prev=v,T._next=v,v._prev=T},W.prototype.toString=function(){for(var v=[],T=this._sentinel,E=T._prev;E!==T;)v.push(JSON.stringify(E,g)),E=E._prev;return"["+v.join(", ")+"]"}},71914:(P,W,f)=>{var g=f(45760),v=f(11510),T=f(36456).Graph;P.exports={debugOrdering:function E(b){var A=v.buildLayerMatrix(b),k=new T({compound:!0,multigraph:!0}).setGraph({});return g.forEach(b.nodes(),function(M){k.setNode(M,{label:M}),k.setParent(M,"layer"+b.node(M).rank)}),g.forEach(b.edges(),function(M){k.setEdge(M.v,M.w,{},M.name)}),g.forEach(A,function(M,B){k.setNode("layer"+B,{rank:"same"}),g.reduce(M,function(L,X){return k.setEdge(L,X,{style:"invis"}),X})}),k}}},36456:(P,W,f)=>{var g;try{g=f(85510)}catch(v){}g||(g=window.graphlib),P.exports=g},67365:(P,W,f)=>{var g=f(45760),v=f(36456).Graph,T=f(3226);P.exports=function b(j,L){if(j.nodeCount()<=1)return[];var X=function M(j,L){var X=new v,te=0,le=0;g.forEach(j.nodes(),function(he){X.setNode(he,{v:he,in:0,out:0})}),g.forEach(j.edges(),function(he){var fe=X.edge(he.v,he.w)||0,ee=L(he);X.setEdge(he.v,he.w,fe+ee),le=Math.max(le,X.node(he.v).out+=ee),te=Math.max(te,X.node(he.w).in+=ee)});var i=g.range(le+te+3).map(function(){return new T}),ae=te+1;return g.forEach(X.nodes(),function(he){B(i,ae,X.node(he))}),{graph:X,buckets:i,zeroIdx:ae}}(j,L||E),te=function A(j,L,X){for(var ae,te=[],le=L[L.length-1],i=L[0];j.nodeCount();){for(;ae=i.dequeue();)k(j,L,X,ae);for(;ae=le.dequeue();)k(j,L,X,ae);if(j.nodeCount())for(var he=L.length-2;he>0;--he)if(ae=L[he].dequeue()){te=te.concat(k(j,L,X,ae,!0));break}}return te}(X.graph,X.buckets,X.zeroIdx);return g.flatten(g.map(te,function(le){return j.outEdges(le.v,le.w)}),!0)};var E=g.constant(1);function k(j,L,X,te,le){var i=le?[]:void 0;return g.forEach(j.inEdges(te.v),function(ae){var he=j.edge(ae),fe=j.node(ae.v);le&&i.push({v:ae.v,w:ae.w}),fe.out-=he,B(L,X,fe)}),g.forEach(j.outEdges(te.v),function(ae){var he=j.edge(ae),ee=j.node(ae.w);ee.in-=he,B(L,X,ee)}),j.removeNode(te.v),i}function B(j,L,X){X.out?X.in?j[X.out-X.in+L].enqueue(X):j[j.length-1].enqueue(X):j[0].enqueue(X)}},14850:(P,W,f)=>{"use strict";var g=f(45760),v=f(12234),T=f(91496),E=f(94124),b=f(11510).normalizeRanks,A=f(60162),k=f(11510).removeEmptyRanks,M=f(1230),B=f(79999),j=f(83870),L=f(32974),X=f(78226),te=f(11510),le=f(36456).Graph;P.exports=function i(Be,Ce){var Ze=Ce&&Ce.debugTiming?te.time:te.notime;Ze("layout",function(){var lt=Ze("  buildLayoutGraph",function(){return function Xe(Be){var Ce=new le({multigraph:!0,compound:!0}),Ze=Cn(Be.graph());return Ce.setGraph(g.merge({},ee,ar(Ze,fe),g.pick(Ze,ge))),g.forEach(Be.nodes(),function(lt){var mt=Cn(Be.node(lt));Ce.setNode(lt,g.defaults(ar(mt,Te),Ne)),Ce.setParent(lt,Be.parent(lt))}),g.forEach(Be.edges(),function(lt){var mt=Cn(Be.edge(lt));Ce.setEdge(lt,g.merge({},Ve,ar(mt,C),g.pick(mt,Qe)))}),Ce}(Be)});Ze("  runLayout",function(){!function ae(Be,Ce){Ce("    makeSpaceForEdgeLabels",function(){!function et(Be){var Ce=Be.graph();Ce.ranksep/=2,g.forEach(Be.edges(),function(Ze){var lt=Be.edge(Ze);lt.minlen*=2,"c"!==lt.labelpos.toLowerCase()&&("TB"===Ce.rankdir||"BT"===Ce.rankdir?lt.width+=lt.labeloffset:lt.height+=lt.labeloffset)})}(Be)}),Ce("    removeSelfEdges",function(){!function Ir(Be){g.forEach(Be.edges(),function(Ce){if(Ce.v===Ce.w){var Ze=Be.node(Ce.v);Ze.selfEdges||(Ze.selfEdges=[]),Ze.selfEdges.push({e:Ce,label:Be.edge(Ce)}),Be.removeEdge(Ce)}})}(Be)}),Ce("    acyclic",function(){v.run(Be)}),Ce("    nestingGraph.run",function(){M.run(Be)}),Ce("    rank",function(){E(te.asNonCompoundGraph(Be))}),Ce("    injectEdgeLabelProxies",function(){!function nt(Be){g.forEach(Be.edges(),function(Ce){var Ze=Be.edge(Ce);if(Ze.width&&Ze.height){var lt=Be.node(Ce.v),mt=Be.node(Ce.w);te.addDummyNode(Be,"edge-proxy",{rank:(mt.rank-lt.rank)/2+lt.rank,e:Ce},"_ep")}})}(Be)}),Ce("    removeEmptyRanks",function(){k(Be)}),Ce("    nestingGraph.cleanup",function(){M.cleanup(Be)}),Ce("    normalizeRanks",function(){b(Be)}),Ce("    assignRankMinMax",function(){!function ut(Be){var Ce=0;g.forEach(Be.nodes(),function(Ze){var lt=Be.node(Ze);lt.borderTop&&(lt.minRank=Be.node(lt.borderTop).rank,lt.maxRank=Be.node(lt.borderBottom).rank,Ce=g.max(Ce,lt.maxRank))}),Be.graph().maxRank=Ce}(Be)}),Ce("    removeEdgeLabelProxies",function(){!function bt(Be){g.forEach(Be.nodes(),function(Ce){var Ze=Be.node(Ce);"edge-proxy"===Ze.dummy&&(Be.edge(Ze.e).labelRank=Ze.rank,Be.removeNode(Ce))})}(Be)}),Ce("    normalize.run",function(){T.run(Be)}),Ce("    parentDummyChains",function(){A(Be)}),Ce("    addBorderSegments",function(){B(Be)}),Ce("    order",function(){L(Be)}),Ce("    insertSelfEdges",function(){!function Le(Be){var Ce=te.buildLayerMatrix(Be);g.forEach(Ce,function(Ze){var lt=0;g.forEach(Ze,function(mt,nn){var mn=Be.node(mt);mn.order=nn+lt,g.forEach(mn.selfEdges,function(zn){te.addDummyNode(Be,"selfedge",{width:zn.label.width,height:zn.label.height,rank:mn.rank,order:nn+ ++lt,e:zn.e,label:zn.label},"_se")}),delete mn.selfEdges})})}(Be)}),Ce("    adjustCoordinateSystem",function(){j.adjust(Be)}),Ce("    position",function(){X(Be)}),Ce("    positionSelfEdges",function(){!function gn(Be){g.forEach(Be.nodes(),function(Ce){var Ze=Be.node(Ce);if("selfedge"===Ze.dummy){var lt=Be.node(Ze.e.v),mt=lt.x+lt.width/2,nn=lt.y,mn=Ze.x-mt,zn=lt.height/2;Be.setEdge(Ze.e,Ze.label),Be.removeNode(Ce),Ze.label.points=[{x:mt+2*mn/3,y:nn-zn},{x:mt+5*mn/6,y:nn-zn},{x:mt+mn,y:nn},{x:mt+5*mn/6,y:nn+zn},{x:mt+2*mn/3,y:nn+zn}],Ze.label.x=Ze.x,Ze.label.y=Ze.y}})}(Be)}),Ce("    removeBorderNodes",function(){!function Pr(Be){g.forEach(Be.nodes(),function(Ce){if(Be.children(Ce).length){var Ze=Be.node(Ce),lt=Be.node(Ze.borderTop),mt=Be.node(Ze.borderBottom),nn=Be.node(g.last(Ze.borderLeft)),mn=Be.node(g.last(Ze.borderRight));Ze.width=Math.abs(mn.x-nn.x),Ze.height=Math.abs(mt.y-lt.y),Ze.x=nn.x+Ze.width/2,Ze.y=lt.y+Ze.height/2}}),g.forEach(Be.nodes(),function(Ce){"border"===Be.node(Ce).dummy&&Be.removeNode(Ce)})}(Be)}),Ce("    normalize.undo",function(){T.undo(Be)}),Ce("    fixupEdgeLabelCoords",function(){!function Et(Be){g.forEach(Be.edges(),function(Ce){var Ze=Be.edge(Ce);if(g.has(Ze,"x"))switch(("l"===Ze.labelpos||"r"===Ze.labelpos)&&(Ze.width-=Ze.labeloffset),Ze.labelpos){case"l":Ze.x-=Ze.width/2+Ze.labeloffset;break;case"r":Ze.x+=Ze.width/2+Ze.labeloffset}})}(Be)}),Ce("    undoCoordinateSystem",function(){j.undo(Be)}),Ce("    translateGraph",function(){!function Ht(Be){var Ce=Number.POSITIVE_INFINITY,Ze=0,lt=Number.POSITIVE_INFINITY,mt=0,nn=Be.graph(),mn=nn.marginx||0,zn=nn.marginy||0;function di(Yt){var jt=Yt.x,D=Yt.y,G=Yt.width,re=Yt.height;Ce=Math.min(Ce,jt-G/2),Ze=Math.max(Ze,jt+G/2),lt=Math.min(lt,D-re/2),mt=Math.max(mt,D+re/2)}g.forEach(Be.nodes(),function(Yt){di(Be.node(Yt))}),g.forEach(Be.edges(),function(Yt){var jt=Be.edge(Yt);g.has(jt,"x")&&di(jt)}),Ce-=mn,lt-=zn,g.forEach(Be.nodes(),function(Yt){var jt=Be.node(Yt);jt.x-=Ce,jt.y-=lt}),g.forEach(Be.edges(),function(Yt){var jt=Be.edge(Yt);g.forEach(jt.points,function(D){D.x-=Ce,D.y-=lt}),g.has(jt,"x")&&(jt.x-=Ce),g.has(jt,"y")&&(jt.y-=lt)}),nn.width=Ze-Ce+mn,nn.height=mt-lt+zn}(Be)}),Ce("    assignNodeIntersects",function(){!function Qt(Be){g.forEach(Be.edges(),function(Ce){var nn,mn,Ze=Be.edge(Ce),lt=Be.node(Ce.v),mt=Be.node(Ce.w);Ze.points?(nn=Ze.points[0],mn=Ze.points[Ze.points.length-1]):(Ze.points=[],nn=mt,mn=lt),Ze.points.unshift(te.intersectRect(lt,nn)),Ze.points.push(te.intersectRect(mt,mn))})}(Be)}),Ce("    reversePoints",function(){!function Jn(Be){g.forEach(Be.edges(),function(Ce){var Ze=Be.edge(Ce);Ze.reversed&&Ze.points.reverse()})}(Be)}),Ce("    acyclic.undo",function(){v.undo(Be)})}(lt,Ze)}),Ze("  updateInputGraph",function(){!function he(Be,Ce){g.forEach(Be.nodes(),function(Ze){var lt=Be.node(Ze),mt=Ce.node(Ze);lt&&(lt.x=mt.x,lt.y=mt.y,Ce.children(Ze).length&&(lt.width=mt.width,lt.height=mt.height))}),g.forEach(Be.edges(),function(Ze){var lt=Be.edge(Ze),mt=Ce.edge(Ze);lt.points=mt.points,g.has(mt,"x")&&(lt.x=mt.x,lt.y=mt.y)}),Be.graph().width=Ce.graph().width,Be.graph().height=Ce.graph().height}(Be,lt)})})};var fe=["nodesep","edgesep","ranksep","marginx","marginy"],ee={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ge=["acyclicer","ranker","rankdir","align"],Te=["width","height"],Ne={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],Ve={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Qe=["labelpos"];function ar(Be,Ce){return g.mapValues(g.pick(Be,Ce),Number)}function Cn(Be){var Ce={};return g.forEach(Be,function(Ze,lt){Ce[lt.toLowerCase()]=Ze}),Ce}},45760:(P,W,f)=>{var g;try{g={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(v){}g||(g=window._),P.exports=g},1230:(P,W,f)=>{var g=f(45760),v=f(11510);function E(M,B,j,L,X,te,le){var i=M.children(le);if(i.length){var ae=v.addBorderNode(M,"_bt"),he=v.addBorderNode(M,"_bb"),fe=M.node(le);M.setParent(ae,le),fe.borderTop=ae,M.setParent(he,le),fe.borderBottom=he,g.forEach(i,function(ee){E(M,B,j,L,X,te,ee);var ge=M.node(ee),Te=ge.borderTop?ge.borderTop:ee,Ne=ge.borderBottom?ge.borderBottom:ee,C=ge.borderTop?L:2*L,Ve=Te!==Ne?1:X-te[le]+1;M.setEdge(ae,Te,{weight:C,minlen:Ve,nestingEdge:!0}),M.setEdge(Ne,he,{weight:C,minlen:Ve,nestingEdge:!0})}),M.parent(le)||M.setEdge(B,ae,{weight:0,minlen:X+te[le]})}else le!==B&&M.setEdge(B,le,{weight:0,minlen:j})}P.exports={run:function T(M){var B=v.addDummyNode(M,"root",{},"_root"),j=function b(M){var B={};function j(L,X){var te=M.children(L);te&&te.length&&g.forEach(te,function(le){j(le,X+1)}),B[L]=X}return g.forEach(M.children(),function(L){j(L,1)}),B}(M),L=g.max(g.values(j))-1,X=2*L+1;M.graph().nestingRoot=B,g.forEach(M.edges(),function(le){M.edge(le).minlen*=X});var te=function A(M){return g.reduce(M.edges(),function(B,j){return B+M.edge(j).weight},0)}(M)+1;g.forEach(M.children(),function(le){E(M,B,X,te,L,j,le)}),M.graph().nodeRankFactor=X},cleanup:function k(M){var B=M.graph();M.removeNode(B.nestingRoot),delete B.nestingRoot,g.forEach(M.edges(),function(j){M.edge(j).nestingEdge&&M.removeEdge(j)})}}},91496:(P,W,f)=>{"use strict";var g=f(45760),v=f(11510);P.exports={run:function T(A){A.graph().dummyChains=[],g.forEach(A.edges(),function(k){!function E(A,k){var M=k.v,B=A.node(M).rank,j=k.w,L=A.node(j).rank,X=k.name,te=A.edge(k),le=te.labelRank;if(L!==B+1){var i,ae,he;for(A.removeEdge(k),he=0,++B;B<L;++he,++B)te.points=[],i=v.addDummyNode(A,"edge",ae={width:0,height:0,edgeLabel:te,edgeObj:k,rank:B},"_d"),B===le&&(ae.width=te.width,ae.height=te.height,ae.dummy="edge-label",ae.labelpos=te.labelpos),A.setEdge(M,i,{weight:te.weight},X),0===he&&A.graph().dummyChains.push(i),M=i;A.setEdge(M,j,{weight:te.weight},X)}}(A,k)})},undo:function b(A){g.forEach(A.graph().dummyChains,function(k){var j,M=A.node(k),B=M.edgeLabel;for(A.setEdge(M.edgeObj,B);M.dummy;)j=A.successors(k)[0],A.removeNode(k),B.points.push({x:M.x,y:M.y}),"edge-label"===M.dummy&&(B.x=M.x,B.y=M.y,B.width=M.width,B.height=M.height),M=A.node(k=j)})}}},33034:(P,W,f)=>{var g=f(45760);P.exports=function v(T,E,b){var k,A={};g.forEach(b,function(M){for(var j,L,B=T.parent(M);B;){if((j=T.parent(B))?(L=A[j],A[j]=B):(L=k,k=B),L&&L!==B)return void E.setEdge(L,B);B=j}})}},81323:(P,W,f)=>{var g=f(45760);P.exports=function v(T,E){return g.map(E,function(b){var A=T.inEdges(b);if(A.length){var k=g.reduce(A,function(M,B){var j=T.edge(B),L=T.node(B.v);return{sum:M.sum+j.weight*L.order,weight:M.weight+j.weight}},{sum:0,weight:0});return{v:b,barycenter:k.sum/k.weight,weight:k.weight}}return{v:b}})}},1686:(P,W,f)=>{var g=f(45760),v=f(36456).Graph;P.exports=function T(b,A,k){var M=function E(b){for(var A;b.hasNode(A=g.uniqueId("_root")););return A}(b),B=new v({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(j){return b.node(j)});return g.forEach(b.nodes(),function(j){var L=b.node(j),X=b.parent(j);(L.rank===A||L.minRank<=A&&A<=L.maxRank)&&(B.setNode(j),B.setParent(j,X||M),g.forEach(b[k](j),function(te){var le=te.v===j?te.w:te.v,i=B.edge(le,j),ae=g.isUndefined(i)?0:i.weight;B.setEdge(le,j,{weight:b.edge(te).weight+ae})}),g.has(L,"minRank")&&B.setNode(j,{borderLeft:L.borderLeft[A],borderRight:L.borderRight[A]}))}),B}},18796:(P,W,f)=>{"use strict";var g=f(45760);function T(E,b,A){for(var k=g.zipObject(A,g.map(A,function(te,le){return le})),M=g.flatten(g.map(b,function(te){return g.sortBy(g.map(E.outEdges(te),function(le){return{pos:k[le.w],weight:E.edge(le).weight}}),"pos")}),!0),B=1;B<A.length;)B<<=1;var j=2*B-1;B-=1;var L=g.map(new Array(j),function(){return 0}),X=0;return g.forEach(M.forEach(function(te){var le=te.pos+B;L[le]+=te.weight;for(var i=0;le>0;)le%2&&(i+=L[le+1]),L[le=le-1>>1]+=te.weight;X+=te.weight*i})),X}P.exports=function v(E,b){for(var A=0,k=1;k<b.length;++k)A+=T(E,b[k-1],b[k]);return A}},32974:(P,W,f)=>{"use strict";var g=f(45760),v=f(49402),T=f(18796),E=f(61057),b=f(1686),A=f(33034),k=f(36456).Graph,M=f(11510);function j(te,le,i){return g.map(le,function(ae){return b(te,ae,i)})}function L(te,le){var i=new k;g.forEach(te,function(ae){var he=ae.graph().root,fe=E(ae,he,i,le);g.forEach(fe.vs,function(ee,ge){ae.node(ee).order=ge}),A(ae,i,fe.vs)})}function X(te,le){g.forEach(le,function(i){g.forEach(i,function(ae,he){te.node(ae).order=he})})}P.exports=function B(te){var le=M.maxRank(te),i=j(te,g.range(1,le+1),"inEdges"),ae=j(te,g.range(le-1,-1,-1),"outEdges"),he=v(te);X(te,he);for(var ee,fe=Number.POSITIVE_INFINITY,ge=0,Te=0;Te<4;++ge,++Te){L(ge%2?i:ae,ge%4>=2),he=M.buildLayerMatrix(te);var Ne=T(te,he);Ne<fe&&(Te=0,ee=g.cloneDeep(he),fe=Ne)}X(te,ee)}},49402:(P,W,f)=>{"use strict";var g=f(45760);P.exports=function v(T){var E={},b=g.filter(T.nodes(),function(j){return!T.children(j).length}),A=g.max(g.map(b,function(j){return T.node(j).rank})),k=g.map(g.range(A+1),function(){return[]}),B=g.sortBy(b,function(j){return T.node(j).rank});return g.forEach(B,function M(j){if(!g.has(E,j)){E[j]=!0;var L=T.node(j);k[L.rank].push(j),g.forEach(T.successors(j),M)}}),k}},83826:(P,W,f)=>{"use strict";var g=f(45760);P.exports=function v(b,A){var k={};return g.forEach(b,function(B,j){var L=k[B.v]={indegree:0,in:[],out:[],vs:[B.v],i:j};g.isUndefined(B.barycenter)||(L.barycenter=B.barycenter,L.weight=B.weight)}),g.forEach(A.edges(),function(B){var j=k[B.v],L=k[B.w];!g.isUndefined(j)&&!g.isUndefined(L)&&(L.indegree++,j.out.push(k[B.w]))}),function T(b){var A=[];function k(j){return function(L){L.merged||(g.isUndefined(L.barycenter)||g.isUndefined(j.barycenter)||L.barycenter>=j.barycenter)&&function E(b,A){var k=0,M=0;b.weight&&(k+=b.barycenter*b.weight,M+=b.weight),A.weight&&(k+=A.barycenter*A.weight,M+=A.weight),b.vs=A.vs.concat(b.vs),b.barycenter=k/M,b.weight=M,b.i=Math.min(A.i,b.i),A.merged=!0}(j,L)}}function M(j){return function(L){L.in.push(j),0==--L.indegree&&b.push(L)}}for(;b.length;){var B=b.pop();A.push(B),g.forEach(B.in.reverse(),k(B)),g.forEach(B.out,M(B))}return g.map(g.filter(A,function(j){return!j.merged}),function(j){return g.pick(j,["vs","i","barycenter","weight"])})}(g.filter(k,function(B){return!B.indegree}))}},61057:(P,W,f)=>{var g=f(45760),v=f(81323),T=f(83826),E=f(93803);P.exports=function b(M,B,j,L){var X=M.children(B),te=M.node(B),le=te?te.borderLeft:void 0,i=te?te.borderRight:void 0,ae={};le&&(X=g.filter(X,function(Ne){return Ne!==le&&Ne!==i}));var he=v(M,X);g.forEach(he,function(Ne){if(M.children(Ne.v).length){var C=b(M,Ne.v,j,L);ae[Ne.v]=C,g.has(C,"barycenter")&&function k(M,B){g.isUndefined(M.barycenter)?(M.barycenter=B.barycenter,M.weight=B.weight):(M.barycenter=(M.barycenter*M.weight+B.barycenter*B.weight)/(M.weight+B.weight),M.weight+=B.weight)}(Ne,C)}});var fe=T(he,j);!function A(M,B){g.forEach(M,function(j){j.vs=g.flatten(j.vs.map(function(L){return B[L]?B[L].vs:L}),!0)})}(fe,ae);var ee=E(fe,L);if(le&&(ee.vs=g.flatten([le,ee.vs,i],!0),M.predecessors(le).length)){var ge=M.node(M.predecessors(le)[0]),Te=M.node(M.predecessors(i)[0]);g.has(ee,"barycenter")||(ee.barycenter=0,ee.weight=0),ee.barycenter=(ee.barycenter*ee.weight+ge.order+Te.order)/(ee.weight+2),ee.weight+=2}return ee}},93803:(P,W,f)=>{var g=f(45760),v=f(11510);function E(A,k,M){for(var B;k.length&&(B=g.last(k)).i<=M;)k.pop(),A.push(B.vs),M++;return M}P.exports=function T(A,k){var M=v.partition(A,function(ae){return g.has(ae,"barycenter")}),B=M.lhs,j=g.sortBy(M.rhs,function(ae){return-ae.i}),L=[],X=0,te=0,le=0;B.sort(function b(A){return function(k,M){return k.barycenter<M.barycenter?-1:k.barycenter>M.barycenter?1:A?M.i-k.i:k.i-M.i}}(!!k)),le=E(L,j,le),g.forEach(B,function(ae){le+=ae.vs.length,L.push(ae.vs),X+=ae.barycenter*ae.weight,te+=ae.weight,le=E(L,j,le)});var i={vs:g.flatten(L,!0)};return te&&(i.barycenter=X/te,i.weight=te),i}},60162:(P,W,f)=>{var g=f(45760);P.exports=function v(b){var A=function E(b){var A={},k=0;return g.forEach(b.children(),function M(B){var j=k;g.forEach(b.children(B),M),A[B]={low:j,lim:k++}}),A}(b);g.forEach(b.graph().dummyChains,function(k){for(var M=b.node(k),B=M.edgeObj,j=function T(b,A,k,M){var te,le,B=[],j=[],L=Math.min(A[k].low,A[M].low),X=Math.max(A[k].lim,A[M].lim);te=k;do{te=b.parent(te),B.push(te)}while(te&&(A[te].low>L||X>A[te].lim));for(le=te,te=M;(te=b.parent(te))!==le;)j.push(te);return{path:B.concat(j.reverse()),lca:le}}(b,A,B.v,B.w),L=j.path,X=j.lca,te=0,le=L[te],i=!0;k!==B.w;){if(M=b.node(k),i){for(;(le=L[te])!==X&&b.node(le).maxRank<M.rank;)te++;le===X&&(i=!1)}if(!i){for(;te<L.length-1&&b.node(le=L[te+1]).minRank<=M.rank;)te++;le=L[te]}b.setParent(k,le),k=b.successors(k)[0]}})}},54058:(P,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph,T=f(11510);function E(fe,ee){var ge={};return g.reduce(ee,function Te(Ne,C){var Ve=0,Qe=0,Xe=Ne.length,et=g.last(C);return g.forEach(C,function(nt,ut){var bt=function A(fe,ee){if(fe.node(ee).dummy)return g.find(fe.predecessors(ee),function(ge){return fe.node(ge).dummy})}(fe,nt),Ht=bt?fe.node(bt).order:Xe;(bt||nt===et)&&(g.forEach(C.slice(Qe,ut+1),function(Qt){g.forEach(fe.predecessors(Qt),function(Et){var Jn=fe.node(Et),Pr=Jn.order;(Pr<Ve||Ht<Pr)&&(!Jn.dummy||!fe.node(Qt).dummy)&&k(ge,Et,Qt)})}),Qe=ut+1,Ve=Ht)}),C}),ge}function b(fe,ee){var ge={};function Te(C,Ve,Qe,Xe,et){var nt;g.forEach(g.range(Ve,Qe),function(ut){fe.node(nt=C[ut]).dummy&&g.forEach(fe.predecessors(nt),function(bt){var Ht=fe.node(bt);Ht.dummy&&(Ht.order<Xe||Ht.order>et)&&k(ge,bt,nt)})})}return g.reduce(ee,function Ne(C,Ve){var Xe,Qe=-1,et=0;return g.forEach(Ve,function(nt,ut){if("border"===fe.node(nt).dummy){var bt=fe.predecessors(nt);bt.length&&(Xe=fe.node(bt[0]).order,Te(Ve,et,ut,Qe,Xe),et=ut,Qe=Xe)}Te(Ve,et,Ve.length,Xe,C.length)}),Ve}),ge}function k(fe,ee,ge){if(ee>ge){var Te=ee;ee=ge,ge=Te}var Ne=fe[ee];Ne||(fe[ee]=Ne={}),Ne[ge]=!0}function M(fe,ee,ge){if(ee>ge){var Te=ee;ee=ge,ge=Te}return g.has(fe[ee],ge)}function B(fe,ee,ge,Te){var Ne={},C={},Ve={};return g.forEach(ee,function(Qe){g.forEach(Qe,function(Xe,et){Ne[Xe]=Xe,C[Xe]=Xe,Ve[Xe]=et})}),g.forEach(ee,function(Qe){var Xe=-1;g.forEach(Qe,function(et){var nt=Te(et);if(nt.length)for(var ut=((nt=g.sortBy(nt,function(Et){return Ve[Et]})).length-1)/2,bt=Math.floor(ut),Ht=Math.ceil(ut);bt<=Ht;++bt){var Qt=nt[bt];C[et]===et&&Xe<Ve[Qt]&&!M(ge,et,Qt)&&(C[Qt]=et,C[et]=Ne[et]=Ne[Qt],Xe=Ve[Qt])}})}),{root:Ne,align:C}}function j(fe,ee,ge,Te,Ne){var C={},Ve=function L(fe,ee,ge,Te){var Ne=new v,C=fe.graph(),Ve=function ae(fe,ee,ge){return function(Te,Ne,C){var et,Ve=Te.node(Ne),Qe=Te.node(C),Xe=0;if(Xe+=Ve.width/2,g.has(Ve,"labelpos"))switch(Ve.labelpos.toLowerCase()){case"l":et=-Ve.width/2;break;case"r":et=Ve.width/2}if(et&&(Xe+=ge?et:-et),et=0,Xe+=(Ve.dummy?ee:fe)/2,Xe+=(Qe.dummy?ee:fe)/2,Xe+=Qe.width/2,g.has(Qe,"labelpos"))switch(Qe.labelpos.toLowerCase()){case"l":et=Qe.width/2;break;case"r":et=-Qe.width/2}return et&&(Xe+=ge?et:-et),et=0,Xe}}(C.nodesep,C.edgesep,Te);return g.forEach(ee,function(Qe){var Xe;g.forEach(Qe,function(et){var nt=ge[et];if(Ne.setNode(nt),Xe){var ut=ge[Xe],bt=Ne.edge(ut,nt);Ne.setEdge(ut,nt,Math.max(Ve(fe,et,Xe),bt||0))}Xe=et})}),Ne}(fe,ee,ge,Ne),Qe=Ne?"borderLeft":"borderRight";function Xe(ut,bt){for(var Ht=Ve.nodes(),Qt=Ht.pop(),Et={};Qt;)Et[Qt]?ut(Qt):(Et[Qt]=!0,Ht.push(Qt),Ht=Ht.concat(bt(Qt))),Qt=Ht.pop()}return Xe(function et(ut){C[ut]=Ve.inEdges(ut).reduce(function(bt,Ht){return Math.max(bt,C[Ht.v]+Ve.edge(Ht))},0)},Ve.predecessors.bind(Ve)),Xe(function nt(ut){var bt=Ve.outEdges(ut).reduce(function(Qt,Et){return Math.min(Qt,C[Et.w]-Ve.edge(Et))},Number.POSITIVE_INFINITY),Ht=fe.node(ut);bt!==Number.POSITIVE_INFINITY&&Ht.borderType!==Qe&&(C[ut]=Math.max(C[ut],bt))},Ve.successors.bind(Ve)),g.forEach(Te,function(ut){C[ut]=C[ge[ut]]}),C}function X(fe,ee){return g.minBy(g.values(ee),function(ge){var Te=Number.NEGATIVE_INFINITY,Ne=Number.POSITIVE_INFINITY;return g.forIn(ge,function(C,Ve){var Qe=function he(fe,ee){return fe.node(ee).width}(fe,Ve)/2;Te=Math.max(C+Qe,Te),Ne=Math.min(C-Qe,Ne)}),Te-Ne})}function te(fe,ee){var ge=g.values(ee),Te=g.min(ge),Ne=g.max(ge);g.forEach(["u","d"],function(C){g.forEach(["l","r"],function(Ve){var et,Qe=C+Ve,Xe=fe[Qe];if(Xe!==ee){var nt=g.values(Xe);(et="l"===Ve?Te-g.min(nt):Ne-g.max(nt))&&(fe[Qe]=g.mapValues(Xe,function(ut){return ut+et}))}})})}function le(fe,ee){return g.mapValues(fe.ul,function(ge,Te){if(ee)return fe[ee.toLowerCase()][Te];var Ne=g.sortBy(g.map(fe,Te));return(Ne[1]+Ne[2])/2})}P.exports={positionX:function i(fe){var Ne,ee=T.buildLayerMatrix(fe),ge=g.merge(E(fe,ee),b(fe,ee)),Te={};g.forEach(["u","d"],function(Ve){Ne="u"===Ve?ee:g.values(ee).reverse(),g.forEach(["l","r"],function(Qe){"r"===Qe&&(Ne=g.map(Ne,function(ut){return g.values(ut).reverse()}));var Xe=("u"===Ve?fe.predecessors:fe.successors).bind(fe),et=B(0,Ne,ge,Xe),nt=j(fe,Ne,et.root,et.align,"r"===Qe);"r"===Qe&&(nt=g.mapValues(nt,function(ut){return-ut})),Te[Ve+Qe]=nt})});var C=X(fe,Te);return te(Te,C),le(Te,fe.graph().align)},findType1Conflicts:E,findType2Conflicts:b,addConflict:k,hasConflict:M,verticalAlignment:B,horizontalCompaction:j,alignCoordinates:te,findSmallestWidthAlignment:X,balance:le}},78226:(P,W,f)=>{"use strict";var g=f(45760),v=f(11510),T=f(54058).positionX;P.exports=function E(A){(function b(A){var k=v.buildLayerMatrix(A),M=A.graph().ranksep,B=0;g.forEach(k,function(j){var L=g.max(g.map(j,function(X){return A.node(X).height}));g.forEach(j,function(X){A.node(X).y=B+L/2}),B+=L+M})})(A=v.asNonCompoundGraph(A)),g.forEach(T(A),function(k,M){A.node(M).x=k})}},96632:(P,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph,T=f(1916).slack;function b(M,B){return g.forEach(M.nodes(),function j(L){g.forEach(B.nodeEdges(L),function(X){var te=X.v,le=L===te?X.w:te;!M.hasNode(le)&&!T(B,X)&&(M.setNode(le,{}),M.setEdge(L,le,{}),j(le))})}),M.nodeCount()}function A(M,B){return g.minBy(B.edges(),function(j){if(M.hasNode(j.v)!==M.hasNode(j.w))return T(B,j)})}function k(M,B,j){g.forEach(M.nodes(),function(L){B.node(L).rank+=j})}P.exports=function E(M){var X,te,B=new v({directed:!1}),j=M.nodes()[0],L=M.nodeCount();for(B.setNode(j,{});b(B,M)<L;)X=A(B,M),te=B.hasNode(X.v)?T(M,X):-T(M,X),k(B,M,te);return B}},94124:(P,W,f)=>{"use strict";var v=f(1916).longestPath,T=f(96632),E=f(63804);P.exports=function b(B){switch(B.graph().ranker){case"network-simplex":default:!function M(B){E(B)}(B);break;case"tight-tree":!function k(B){v(B),T(B)}(B);break;case"longest-path":A(B)}};var A=v},63804:(P,W,f)=>{"use strict";var g=f(45760),v=f(96632),T=f(1916).slack,E=f(1916).longestPath,b=f(36456).alg.preorder,A=f(36456).alg.postorder,k=f(11510).simplify;function M(ge){ge=k(ge),E(ge);var Ne,Te=v(ge);for(X(Te),B(Te,ge);Ne=le(Te);)ae(Te,ge,Ne,i(Te,ge,Ne))}function B(ge,Te){var Ne=A(ge,ge.nodes());Ne=Ne.slice(0,Ne.length-1),g.forEach(Ne,function(C){!function j(ge,Te,Ne){var C=ge.node(Ne);ge.edge(Ne,C.parent).cutvalue=L(ge,Te,Ne)}(ge,Te,C)})}function L(ge,Te,Ne){var Ve=ge.node(Ne).parent,Qe=!0,Xe=Te.edge(Ne,Ve),et=0;return Xe||(Qe=!1,Xe=Te.edge(Ve,Ne)),et=Xe.weight,g.forEach(Te.nodeEdges(Ne),function(nt){var ut=nt.v===Ne,bt=ut?nt.w:nt.v;if(bt!==Ve){var Ht=ut===Qe,Qt=Te.edge(nt).weight;if(et+=Ht?Qt:-Qt,function fe(ge,Te,Ne){return ge.hasEdge(Te,Ne)}(ge,Ne,bt)){var Et=ge.edge(Ne,bt).cutvalue;et+=Ht?-Et:Et}}}),et}function X(ge,Te){arguments.length<2&&(Te=ge.nodes()[0]),te(ge,{},1,Te)}function te(ge,Te,Ne,C,Ve){var Qe=Ne,Xe=ge.node(C);return Te[C]=!0,g.forEach(ge.neighbors(C),function(et){g.has(Te,et)||(Ne=te(ge,Te,Ne,et,C))}),Xe.low=Qe,Xe.lim=Ne++,Ve?Xe.parent=Ve:delete Xe.parent,Ne}function le(ge){return g.find(ge.edges(),function(Te){return ge.edge(Te).cutvalue<0})}function i(ge,Te,Ne){var C=Ne.v,Ve=Ne.w;Te.hasEdge(C,Ve)||(C=Ne.w,Ve=Ne.v);var Qe=ge.node(C),Xe=ge.node(Ve),et=Qe,nt=!1;Qe.lim>Xe.lim&&(et=Xe,nt=!0);var ut=g.filter(Te.edges(),function(bt){return nt===ee(0,ge.node(bt.v),et)&&nt!==ee(0,ge.node(bt.w),et)});return g.minBy(ut,function(bt){return T(Te,bt)})}function ae(ge,Te,Ne,C){ge.removeEdge(Ne.v,Ne.w),ge.setEdge(C.v,C.w,{}),X(ge),B(ge,Te),function he(ge,Te){var Ne=g.find(ge.nodes(),function(Ve){return!Te.node(Ve).parent}),C=b(ge,Ne);C=C.slice(1),g.forEach(C,function(Ve){var Qe=ge.node(Ve).parent,Xe=Te.edge(Ve,Qe),et=!1;Xe||(Xe=Te.edge(Qe,Ve),et=!0),Te.node(Ve).rank=Te.node(Qe).rank+(et?Xe.minlen:-Xe.minlen)})}(ge,Te)}function ee(ge,Te,Ne){return Ne.low<=Te.lim&&Te.lim<=Ne.lim}P.exports=M,M.initLowLimValues=X,M.initCutValues=B,M.calcCutValue=L,M.leaveEdge=le,M.enterEdge=i,M.exchangeEdges=ae},1916:(P,W,f)=>{"use strict";var g=f(45760);P.exports={longestPath:function v(E){var b={};g.forEach(E.sources(),function A(k){var M=E.node(k);if(g.has(b,k))return M.rank;b[k]=!0;var B=g.min(g.map(E.outEdges(k),function(j){return A(j.w)-E.edge(j).minlen}));return(B===Number.POSITIVE_INFINITY||null==B)&&(B=0),M.rank=B})},slack:function T(E,b){return E.node(b.w).rank-E.node(b.v).rank-E.edge(b).minlen}}},11510:(P,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph;function T(he,fe,ee,ge){var Te;do{Te=g.uniqueId(ge)}while(he.hasNode(Te));return ee.dummy=fe,he.setNode(Te,ee),Te}function te(he){return g.max(g.map(he.nodes(),function(fe){var ee=he.node(fe).rank;if(!g.isUndefined(ee))return ee}))}P.exports={addDummyNode:T,simplify:function E(he){var fe=(new v).setGraph(he.graph());return g.forEach(he.nodes(),function(ee){fe.setNode(ee,he.node(ee))}),g.forEach(he.edges(),function(ee){var ge=fe.edge(ee.v,ee.w)||{weight:0,minlen:1},Te=he.edge(ee);fe.setEdge(ee.v,ee.w,{weight:ge.weight+Te.weight,minlen:Math.max(ge.minlen,Te.minlen)})}),fe},asNonCompoundGraph:function b(he){var fe=new v({multigraph:he.isMultigraph()}).setGraph(he.graph());return g.forEach(he.nodes(),function(ee){he.children(ee).length||fe.setNode(ee,he.node(ee))}),g.forEach(he.edges(),function(ee){fe.setEdge(ee,he.edge(ee))}),fe},successorWeights:function A(he){var fe=g.map(he.nodes(),function(ee){var ge={};return g.forEach(he.outEdges(ee),function(Te){ge[Te.w]=(ge[Te.w]||0)+he.edge(Te).weight}),ge});return g.zipObject(he.nodes(),fe)},predecessorWeights:function k(he){var fe=g.map(he.nodes(),function(ee){var ge={};return g.forEach(he.inEdges(ee),function(Te){ge[Te.v]=(ge[Te.v]||0)+he.edge(Te).weight}),ge});return g.zipObject(he.nodes(),fe)},intersectRect:function M(he,fe){var Qe,Xe,ee=he.x,ge=he.y,Te=fe.x-ee,Ne=fe.y-ge,C=he.width/2,Ve=he.height/2;if(!Te&&!Ne)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Ne)*C>Math.abs(Te)*Ve?(Ne<0&&(Ve=-Ve),Qe=Ve*Te/Ne,Xe=Ve):(Te<0&&(C=-C),Qe=C,Xe=C*Ne/Te),{x:ee+Qe,y:ge+Xe}},buildLayerMatrix:function B(he){var fe=g.map(g.range(te(he)+1),function(){return[]});return g.forEach(he.nodes(),function(ee){var ge=he.node(ee),Te=ge.rank;g.isUndefined(Te)||(fe[Te][ge.order]=ee)}),fe},normalizeRanks:function j(he){var fe=g.min(g.map(he.nodes(),function(ee){return he.node(ee).rank}));g.forEach(he.nodes(),function(ee){var ge=he.node(ee);g.has(ge,"rank")&&(ge.rank-=fe)})},removeEmptyRanks:function L(he){var fe=g.min(g.map(he.nodes(),function(Ne){return he.node(Ne).rank})),ee=[];g.forEach(he.nodes(),function(Ne){var C=he.node(Ne).rank-fe;ee[C]||(ee[C]=[]),ee[C].push(Ne)});var ge=0,Te=he.graph().nodeRankFactor;g.forEach(ee,function(Ne,C){g.isUndefined(Ne)&&C%Te!=0?--ge:ge&&g.forEach(Ne,function(Ve){he.node(Ve).rank+=ge})})},addBorderNode:function X(he,fe,ee,ge){var Te={width:0,height:0};return arguments.length>=4&&(Te.rank=ee,Te.order=ge),T(he,"border",Te,fe)},maxRank:te,partition:function le(he,fe){var ee={lhs:[],rhs:[]};return g.forEach(he,function(ge){fe(ge)?ee.lhs.push(ge):ee.rhs.push(ge)}),ee},time:function i(he,fe){var ee=g.now();try{return fe()}finally{console.log(he+" time: "+(g.now()-ee)+"ms")}},notime:function ae(he,fe){return fe()}}},28126:P=>{P.exports="0.8.5"},85510:(P,W,f)=>{var g=f(51838);P.exports={Graph:g.Graph,json:f(21088),alg:f(83430),version:g.version}},86730:(P,W,f)=>{var g=f(79138);P.exports=function v(T){var A,E={},b=[];function k(M){g.has(E,M)||(E[M]=!0,A.push(M),g.each(T.successors(M),k),g.each(T.predecessors(M),k))}return g.each(T.nodes(),function(M){A=[],k(M),A.length&&b.push(A)}),b}},22163:(P,W,f)=>{var g=f(79138);function T(E,b,A,k,M,B){g.has(k,b)||(k[b]=!0,A||B.push(b),g.each(M(b),function(j){T(E,j,A,k,M,B)}),A&&B.push(b))}P.exports=function v(E,b,A){g.isArray(b)||(b=[b]);var k=(E.isDirected()?E.successors:E.neighbors).bind(E),M=[],B={};return g.each(b,function(j){if(!E.hasNode(j))throw new Error("Graph does not have node: "+j);T(E,j,"post"===A,B,k,M)}),M}},25668:(P,W,f)=>{var g=f(61718),v=f(79138);P.exports=function T(E,b,A){return v.transform(E.nodes(),function(k,M){k[M]=g(E,M,b,A)},{})}},61718:(P,W,f)=>{var g=f(79138),v=f(31919);P.exports=function E(A,k,M,B){return function b(A,k,M,B){var X,te,j={},L=new v,le=function(i){var ae=i.v!==X?i.v:i.w,he=j[ae],fe=M(i),ee=te.distance+fe;if(fe<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+fe);ee<he.distance&&(he.distance=ee,he.predecessor=X,L.decrease(ae,ee))};for(A.nodes().forEach(function(i){var ae=i===k?0:Number.POSITIVE_INFINITY;j[i]={distance:ae},L.add(i,ae)});L.size()>0&&(X=L.removeMin(),(te=j[X]).distance!==Number.POSITIVE_INFINITY);)B(X).forEach(le);return j}(A,String(k),M||T,B||function(j){return A.outEdges(j)})};var T=g.constant(1)},9611:(P,W,f)=>{var g=f(79138),v=f(73585);P.exports=function T(E){return g.filter(v(E),function(b){return b.length>1||1===b.length&&E.hasEdge(b[0],b[0])})}},22881:(P,W,f)=>{var g=f(79138);P.exports=function T(b,A,k){return function E(b,A,k){var M={},B=b.nodes();return B.forEach(function(j){M[j]={},M[j][j]={distance:0},B.forEach(function(L){j!==L&&(M[j][L]={distance:Number.POSITIVE_INFINITY})}),k(j).forEach(function(L){var X=L.v===j?L.w:L.v,te=A(L);M[j][X]={distance:te,predecessor:j}})}),B.forEach(function(j){var L=M[j];B.forEach(function(X){var te=M[X];B.forEach(function(le){var ae=L[le],he=te[le],fe=te[j].distance+ae.distance;fe<he.distance&&(he.distance=fe,he.predecessor=ae.predecessor)})})}),M}(b,A||v,k||function(M){return b.outEdges(M)})};var v=g.constant(1)},83430:(P,W,f)=>{P.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(P,W,f)=>{var g=f(52180);P.exports=function v(T){try{g(T)}catch(E){if(E instanceof g.CycleException)return!1;throw E}return!0}},46694:(P,W,f)=>{var g=f(22163);P.exports=function v(T,E){return g(T,E,"post")}},5330:(P,W,f)=>{var g=f(22163);P.exports=function v(T,E){return g(T,E,"pre")}},46823:(P,W,f)=>{var g=f(79138),v=f(66568),T=f(31919);P.exports=function E(b,A){var j,k=new v,M={},B=new T;function L(te){var le=te.v===j?te.w:te.v,i=B.priority(le);if(void 0!==i){var ae=A(te);ae<i&&(M[le]=j,B.decrease(le,ae))}}if(0===b.nodeCount())return k;g.each(b.nodes(),function(te){B.add(te,Number.POSITIVE_INFINITY),k.setNode(te)}),B.decrease(b.nodes()[0],0);for(var X=!1;B.size()>0;){if(j=B.removeMin(),g.has(M,j))k.setEdge(j,M[j]);else{if(X)throw new Error("Input graph is not connected: "+b);X=!0}b.nodeEdges(j).forEach(L)}return k}},73585:(P,W,f)=>{var g=f(79138);P.exports=function v(T){var E=0,b=[],A={},k=[];function M(B){var j=A[B]={onStack:!0,lowlink:E,index:E++};if(b.push(B),T.successors(B).forEach(function(te){g.has(A,te)?A[te].onStack&&(j.lowlink=Math.min(j.lowlink,A[te].index)):(M(te),j.lowlink=Math.min(j.lowlink,A[te].lowlink))}),j.lowlink===j.index){var X,L=[];do{X=b.pop(),A[X].onStack=!1,L.push(X)}while(B!==X);k.push(L)}}return T.nodes().forEach(function(B){g.has(A,B)||M(B)}),k}},52180:(P,W,f)=>{var g=f(79138);function v(E){var b={},A={},k=[];if(g.each(E.sinks(),function M(B){if(g.has(A,B))throw new T;g.has(b,B)||(A[B]=!0,b[B]=!0,g.each(E.predecessors(B),M),delete A[B],k.push(B))}),g.size(b)!==E.nodeCount())throw new T;return k}function T(){}P.exports=v,v.CycleException=T,T.prototype=new Error},31919:(P,W,f)=>{var g=f(79138);function v(){this._arr=[],this._keyIndices={}}P.exports=v,v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(T){return T.key})},v.prototype.has=function(T){return g.has(this._keyIndices,T)},v.prototype.priority=function(T){var E=this._keyIndices[T];if(void 0!==E)return this._arr[E].priority},v.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(T,E){var b=this._keyIndices;if(T=String(T),!g.has(b,T)){var A=this._arr,k=A.length;return b[T]=k,A.push({key:T,priority:E}),this._decrease(k),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var T=this._arr.pop();return delete this._keyIndices[T.key],this._heapify(0),T.key},v.prototype.decrease=function(T,E){var b=this._keyIndices[T];if(E>this._arr[b].priority)throw new Error("New priority is greater than current priority. Key: "+T+" Old: "+this._arr[b].priority+" New: "+E);this._arr[b].priority=E,this._decrease(b)},v.prototype._heapify=function(T){var E=this._arr,b=2*T,A=b+1,k=T;b<E.length&&(k=E[b].priority<E[k].priority?b:k,A<E.length&&(k=E[A].priority<E[k].priority?A:k),k!==T&&(this._swap(T,k),this._heapify(k)))},v.prototype._decrease=function(T){for(var A,E=this._arr,b=E[T].priority;0!==T&&!(E[A=T>>1].priority<b);)this._swap(T,A),T=A},v.prototype._swap=function(T,E){var b=this._arr,A=this._keyIndices,k=b[T],M=b[E];b[T]=M,b[E]=k,A[M.key]=T,A[k.key]=E}},66568:(P,W,f)=>{"use strict";var g=f(79138);P.exports=b;var T="\0";function b(L){this._isDirected=!g.has(L,"directed")||L.directed,this._isMultigraph=!!g.has(L,"multigraph")&&L.multigraph,this._isCompound=!!g.has(L,"compound")&&L.compound,this._label=void 0,this._defaultNodeLabelFn=g.constant(void 0),this._defaultEdgeLabelFn=g.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[T]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function A(L,X){L[X]?L[X]++:L[X]=1}function k(L,X){--L[X]||delete L[X]}function M(L,X,te,le){var i=""+X,ae=""+te;if(!L&&i>ae){var he=i;i=ae,ae=he}return i+"\x01"+ae+"\x01"+(g.isUndefined(le)?"\0":le)}function B(L,X,te,le){var i=""+X,ae=""+te;if(!L&&i>ae){var he=i;i=ae,ae=he}var fe={v:i,w:ae};return le&&(fe.name=le),fe}function j(L,X){return M(L,X.v,X.w,X.name)}b.prototype._nodeCount=0,b.prototype._edgeCount=0,b.prototype.isDirected=function(){return this._isDirected},b.prototype.isMultigraph=function(){return this._isMultigraph},b.prototype.isCompound=function(){return this._isCompound},b.prototype.setGraph=function(L){return this._label=L,this},b.prototype.graph=function(){return this._label},b.prototype.setDefaultNodeLabel=function(L){return g.isFunction(L)||(L=g.constant(L)),this._defaultNodeLabelFn=L,this},b.prototype.nodeCount=function(){return this._nodeCount},b.prototype.nodes=function(){return g.keys(this._nodes)},b.prototype.sources=function(){var L=this;return g.filter(this.nodes(),function(X){return g.isEmpty(L._in[X])})},b.prototype.sinks=function(){var L=this;return g.filter(this.nodes(),function(X){return g.isEmpty(L._out[X])})},b.prototype.setNodes=function(L,X){var te=arguments,le=this;return g.each(L,function(i){te.length>1?le.setNode(i,X):le.setNode(i)}),this},b.prototype.setNode=function(L,X){return g.has(this._nodes,L)?(arguments.length>1&&(this._nodes[L]=X),this):(this._nodes[L]=arguments.length>1?X:this._defaultNodeLabelFn(L),this._isCompound&&(this._parent[L]=T,this._children[L]={},this._children[T][L]=!0),this._in[L]={},this._preds[L]={},this._out[L]={},this._sucs[L]={},++this._nodeCount,this)},b.prototype.node=function(L){return this._nodes[L]},b.prototype.hasNode=function(L){return g.has(this._nodes,L)},b.prototype.removeNode=function(L){var X=this;if(g.has(this._nodes,L)){var te=function(le){X.removeEdge(X._edgeObjs[le])};delete this._nodes[L],this._isCompound&&(this._removeFromParentsChildList(L),delete this._parent[L],g.each(this.children(L),function(le){X.setParent(le)}),delete this._children[L]),g.each(g.keys(this._in[L]),te),delete this._in[L],delete this._preds[L],g.each(g.keys(this._out[L]),te),delete this._out[L],delete this._sucs[L],--this._nodeCount}return this},b.prototype.setParent=function(L,X){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(g.isUndefined(X))X=T;else{for(var te=X+="";!g.isUndefined(te);te=this.parent(te))if(te===L)throw new Error("Setting "+X+" as parent of "+L+" would create a cycle");this.setNode(X)}return this.setNode(L),this._removeFromParentsChildList(L),this._parent[L]=X,this._children[X][L]=!0,this},b.prototype._removeFromParentsChildList=function(L){delete this._children[this._parent[L]][L]},b.prototype.parent=function(L){if(this._isCompound){var X=this._parent[L];if(X!==T)return X}},b.prototype.children=function(L){if(g.isUndefined(L)&&(L=T),this._isCompound){var X=this._children[L];if(X)return g.keys(X)}else{if(L===T)return this.nodes();if(this.hasNode(L))return[]}},b.prototype.predecessors=function(L){var X=this._preds[L];if(X)return g.keys(X)},b.prototype.successors=function(L){var X=this._sucs[L];if(X)return g.keys(X)},b.prototype.neighbors=function(L){var X=this.predecessors(L);if(X)return g.union(X,this.successors(L))},b.prototype.isLeaf=function(L){return 0===(this.isDirected()?this.successors(L):this.neighbors(L)).length},b.prototype.filterNodes=function(L){var X=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});X.setGraph(this.graph());var te=this;g.each(this._nodes,function(ae,he){L(he)&&X.setNode(he,ae)}),g.each(this._edgeObjs,function(ae){X.hasNode(ae.v)&&X.hasNode(ae.w)&&X.setEdge(ae,te.edge(ae))});var le={};function i(ae){var he=te.parent(ae);return void 0===he||X.hasNode(he)?(le[ae]=he,he):he in le?le[he]:i(he)}return this._isCompound&&g.each(X.nodes(),function(ae){X.setParent(ae,i(ae))}),X},b.prototype.setDefaultEdgeLabel=function(L){return g.isFunction(L)||(L=g.constant(L)),this._defaultEdgeLabelFn=L,this},b.prototype.edgeCount=function(){return this._edgeCount},b.prototype.edges=function(){return g.values(this._edgeObjs)},b.prototype.setPath=function(L,X){var te=this,le=arguments;return g.reduce(L,function(i,ae){return le.length>1?te.setEdge(i,ae,X):te.setEdge(i,ae),ae}),this},b.prototype.setEdge=function(){var L,X,te,le,i=!1,ae=arguments[0];"object"==typeof ae&&null!==ae&&"v"in ae?(L=ae.v,X=ae.w,te=ae.name,2===arguments.length&&(le=arguments[1],i=!0)):(L=ae,X=arguments[1],te=arguments[3],arguments.length>2&&(le=arguments[2],i=!0)),L=""+L,X=""+X,g.isUndefined(te)||(te=""+te);var he=M(this._isDirected,L,X,te);if(g.has(this._edgeLabels,he))return i&&(this._edgeLabels[he]=le),this;if(!g.isUndefined(te)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(L),this.setNode(X),this._edgeLabels[he]=i?le:this._defaultEdgeLabelFn(L,X,te);var fe=B(this._isDirected,L,X,te);return L=fe.v,X=fe.w,Object.freeze(fe),this._edgeObjs[he]=fe,A(this._preds[X],L),A(this._sucs[L],X),this._in[X][he]=fe,this._out[L][he]=fe,this._edgeCount++,this},b.prototype.edge=function(L,X,te){var le=1===arguments.length?j(this._isDirected,arguments[0]):M(this._isDirected,L,X,te);return this._edgeLabels[le]},b.prototype.hasEdge=function(L,X,te){var le=1===arguments.length?j(this._isDirected,arguments[0]):M(this._isDirected,L,X,te);return g.has(this._edgeLabels,le)},b.prototype.removeEdge=function(L,X,te){var le=1===arguments.length?j(this._isDirected,arguments[0]):M(this._isDirected,L,X,te),i=this._edgeObjs[le];return i&&(L=i.v,X=i.w,delete this._edgeLabels[le],delete this._edgeObjs[le],k(this._preds[X],L),k(this._sucs[L],X),delete this._in[X][le],delete this._out[L][le],this._edgeCount--),this},b.prototype.inEdges=function(L,X){var te=this._in[L];if(te){var le=g.values(te);return X?g.filter(le,function(i){return i.v===X}):le}},b.prototype.outEdges=function(L,X){var te=this._out[L];if(te){var le=g.values(te);return X?g.filter(le,function(i){return i.w===X}):le}},b.prototype.nodeEdges=function(L,X){var te=this.inEdges(L,X);if(te)return te.concat(this.outEdges(L,X))}},51838:(P,W,f)=>{P.exports={Graph:f(66568),version:f(75089)}},21088:(P,W,f)=>{var g=f(79138),v=f(66568);function E(k){return g.map(k.nodes(),function(M){var B=k.node(M),j=k.parent(M),L={v:M};return g.isUndefined(B)||(L.value=B),g.isUndefined(j)||(L.parent=j),L})}function b(k){return g.map(k.edges(),function(M){var B=k.edge(M),j={v:M.v,w:M.w};return g.isUndefined(M.name)||(j.name=M.name),g.isUndefined(B)||(j.value=B),j})}P.exports={write:function T(k){var M={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:E(k),edges:b(k)};return g.isUndefined(k.graph())||(M.value=g.clone(k.graph())),M},read:function A(k){var M=new v(k.options).setGraph(k.value);return g.each(k.nodes,function(B){M.setNode(B.v,B.value),B.parent&&M.setParent(B.v,B.parent)}),g.each(k.edges,function(B){M.setEdge({v:B.v,w:B.w,name:B.name},B.value)}),M}}},79138:(P,W,f)=>{var g;try{g={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(v){}g||(g=window._),P.exports=g},75089:P=>{P.exports="2.1.8"},58259:function(P,W){var g;!function(v,T){"use strict";"object"==typeof P.exports?P.exports=v.document?T(v,!0):function(E){if(!E.document)throw new Error("jQuery requires a window with a document");return T(E)}:T(v)}("undefined"!=typeof window?window:this,function(v,T){"use strict";var E=[],b=Object.getPrototypeOf,A=E.slice,k=E.flat?function(l){return E.flat.call(l)}:function(l){return E.concat.apply([],l)},M=E.push,B=E.indexOf,j={},L=j.toString,X=j.hasOwnProperty,te=X.toString,le=te.call(Object),i={},ae=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},he=function(d){return null!=d&&d===d.window},fe=v.document,ee={type:!0,src:!0,nonce:!0,noModule:!0};function ge(l,d,x){var w,N,F=(x=x||fe).createElement("script");if(F.text=l,d)for(w in ee)(N=d[w]||d.getAttribute&&d.getAttribute(w))&&F.setAttribute(w,N);x.head.appendChild(F).parentNode.removeChild(F)}function Te(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?j[L.call(l)]||"object":typeof l}var C=function(l,d){return new C.fn.init(l,d)};function Ve(l){var d=!!l&&"length"in l&&l.length,x=Te(l);return!ae(l)&&!he(l)&&("array"===x||0===d||"number"==typeof d&&d>0&&d-1 in l)}C.fn=C.prototype={jquery:"3.6.0",constructor:C,length:0,toArray:function(){return A.call(this)},get:function(l){return null==l?A.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=C.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return C.each(this,l)},map:function(l){return this.pushStack(C.map(this,function(d,x){return l.call(d,x,d)}))},slice:function(){return this.pushStack(A.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,x=+l+(l<0?d:0);return this.pushStack(x>=0&&x<d?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:E.sort,splice:E.splice},C.extend=C.fn.extend=function(){var l,d,x,w,N,F,Y=arguments[0]||{},ue=1,se=arguments.length,Ee=!1;for("boolean"==typeof Y&&(Ee=Y,Y=arguments[ue]||{},ue++),"object"!=typeof Y&&!ae(Y)&&(Y={}),ue===se&&(Y=this,ue--);ue<se;ue++)if(null!=(l=arguments[ue]))for(d in l)w=l[d],"__proto__"!==d&&Y!==w&&(Ee&&w&&(C.isPlainObject(w)||(N=Array.isArray(w)))?(x=Y[d],F=N&&!Array.isArray(x)?[]:N||C.isPlainObject(x)?x:{},N=!1,Y[d]=C.extend(Ee,F,w)):void 0!==w&&(Y[d]=w));return Y},C.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,x;return!(!l||"[object Object]"!==L.call(l)||(d=b(l))&&("function"!=typeof(x=X.call(d,"constructor")&&d.constructor)||te.call(x)!==le))},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,x){ge(l,{nonce:d&&d.nonce},x)},each:function(l,d){var x,w=0;if(Ve(l))for(x=l.length;w<x&&!1!==d.call(l[w],w,l[w]);w++);else for(w in l)if(!1===d.call(l[w],w,l[w]))break;return l},makeArray:function(l,d){var x=d||[];return null!=l&&(Ve(Object(l))?C.merge(x,"string"==typeof l?[l]:l):M.call(x,l)),x},inArray:function(l,d,x){return null==d?-1:B.call(d,l,x)},merge:function(l,d){for(var x=+d.length,w=0,N=l.length;w<x;w++)l[N++]=d[w];return l.length=N,l},grep:function(l,d,x){for(var N=[],F=0,Y=l.length,ue=!x;F<Y;F++)!d(l[F],F)!==ue&&N.push(l[F]);return N},map:function(l,d,x){var w,N,F=0,Y=[];if(Ve(l))for(w=l.length;F<w;F++)null!=(N=d(l[F],F,x))&&Y.push(N);else for(F in l)null!=(N=d(l[F],F,x))&&Y.push(N);return k(Y)},guid:1,support:i}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=E[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){j["[object "+d+"]"]=d.toLowerCase()});var Qe=function(l){var d,x,w,N,F,Y,ue,se,Ee,Fe,Ke,ke,$e,vt,Ut,St,In,Vn,kr,At="sizzle"+1*new Date,Tt=l.document,Cr=0,bn=0,Re=co(),wr=co(),Fr=co(),$r=co(),mi=function(q,ce){return q===ce&&(Ke=!0),0},Yr={}.hasOwnProperty,$n=[],zi=$n.pop,Vr=$n.push,Ti=$n.push,Ha=$n.slice,Ui=function(q,ce){for(var _e=0,We=q.length;_e<We;_e++)if(q[_e]===ce)return _e;return-1},uo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Tn="[\\x20\\t\\r\\n\\f]",Yn="(?:\\\\[\\da-fA-F]{1,6}"+Tn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Jo="\\["+Tn+"*("+Yn+")(?:"+Tn+"*([*^$|!~]?=)"+Tn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Yn+"))|)"+Tn+"*\\]",va=":("+Yn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Jo+")*)|.*)\\)|)",Vu=new RegExp(Tn+"+","g"),On=new RegExp("^"+Tn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Tn+"+$","g"),Ss=new RegExp("^"+Tn+"*,"+Tn+"*"),Zo=new RegExp("^"+Tn+"*([>+~]|"+Tn+")"+Tn+"*"),Bu=new RegExp(Tn+"|>"),Js=new RegExp(va),Ql=new RegExp("^"+Yn+"$"),ja={ID:new RegExp("^#("+Yn+")"),CLASS:new RegExp("^\\.("+Yn+")"),TAG:new RegExp("^("+Yn+"|[*])"),ATTR:new RegExp("^"+Jo),PSEUDO:new RegExp("^"+va),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Tn+"*(even|odd|(([+-]|)(\\d*)n|)"+Tn+"*(?:([+-]|)"+Tn+"*(\\d+)|))"+Tn+"*\\)|)","i"),bool:new RegExp("^(?:"+uo+")$","i"),needsContext:new RegExp("^"+Tn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Tn+"*((?:-\\d)?\\d*)"+Tn+"*\\)|)(?=[^-]|$)","i")},Jl=/HTML$/i,Zl=/^(?:input|select|textarea|button)$/i,Hu=/^h\d$/i,Gi=/^[^{]+\{\s*\[native \w/,qo=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ts=/[+~]/,ti=new RegExp("\\\\[\\da-fA-F]{1,6}"+Tn+"?|\\\\([^\\r\\n\\f])","g"),Ei=function(q,ce){var _e="0x"+q.slice(1)-65536;return ce||(_e<0?String.fromCharCode(_e+65536):String.fromCharCode(_e>>10|55296,1023&_e|56320))},lo=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ur=function(q,ce){return ce?"\0"===q?"\ufffd":q.slice(0,-1)+"\\"+q.charCodeAt(q.length-1).toString(16)+" ":"\\"+q},ju=function(){ke()},ql=qe(function(q){return!0===q.disabled&&"fieldset"===q.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Ti.apply($n=Ha.call(Tt.childNodes),Tt.childNodes)}catch(q){Ti={apply:$n.length?function(ce,_e){Vr.apply(ce,Ha.call(_e))}:function(ce,_e){for(var We=ce.length,Se=0;ce[We++]=_e[Se++];);ce.length=We-1}}}function Nn(q,ce,_e,We){var Se,He,je,at,dt,xt,Ot,Rt=ce&&ce.ownerDocument,Mt=ce?ce.nodeType:9;if(_e=_e||[],"string"!=typeof q||!q||1!==Mt&&9!==Mt&&11!==Mt)return _e;if(!We&&(ke(ce),ce=ce||$e,Ut)){if(11!==Mt&&(dt=qo.exec(q)))if(Se=dt[1]){if(9===Mt){if(!(je=ce.getElementById(Se)))return _e;if(je.id===Se)return _e.push(je),_e}else if(Rt&&(je=Rt.getElementById(Se))&&kr(ce,je)&&je.id===Se)return _e.push(je),_e}else{if(dt[2])return Ti.apply(_e,ce.getElementsByTagName(q)),_e;if((Se=dt[3])&&x.getElementsByClassName&&ce.getElementsByClassName)return Ti.apply(_e,ce.getElementsByClassName(Se)),_e}if(x.qsa&&!$r[q+" "]&&(!St||!St.test(q))&&(1!==Mt||"object"!==ce.nodeName.toLowerCase())){if(Ot=q,Rt=ce,1===Mt&&(Bu.test(q)||Zo.test(q))){for(((Rt=Ts.test(q)&&be(ce.parentNode)||ce)!==ce||!x.scope)&&((at=ce.getAttribute("id"))?at=at.replace(lo,ur):ce.setAttribute("id",at=At)),He=(xt=Y(q)).length;He--;)xt[He]=(at?"#"+at:":scope")+" "+De(xt[He]);Ot=xt.join(",")}try{return Ti.apply(_e,Rt.querySelectorAll(Ot)),_e}catch(En){$r(q,!0)}finally{at===At&&ce.removeAttribute("id")}}}return se(q.replace(On,"$1"),ce,_e,We)}function co(){var q=[];return function ce(_e,We){return q.push(_e+" ")>w.cacheLength&&delete ce[q.shift()],ce[_e+" "]=We}}function ir(q){return q[At]=!0,q}function wt(q){var ce=$e.createElement("fieldset");try{return!!q(ce)}catch(_e){return!1}finally{ce.parentNode&&ce.parentNode.removeChild(ce),ce=null}}function Br(q,ce){for(var _e=q.split("|"),We=_e.length;We--;)w.attrHandle[_e[We]]=ce}function za(q,ce){var _e=ce&&q,We=_e&&1===q.nodeType&&1===ce.nodeType&&q.sourceIndex-ce.sourceIndex;if(We)return We;if(_e)for(;_e=_e.nextSibling;)if(_e===ce)return-1;return q?1:-1}function yi(q){return function(ce){return"input"===ce.nodeName.toLowerCase()&&ce.type===q}}function Zs(q){return function(ce){var _e=ce.nodeName.toLowerCase();return("input"===_e||"button"===_e)&&ce.type===q}}function ma(q){return function(ce){return"form"in ce?ce.parentNode&&!1===ce.disabled?"label"in ce?"label"in ce.parentNode?ce.parentNode.disabled===q:ce.disabled===q:ce.isDisabled===q||ce.isDisabled!==!q&&ql(ce)===q:ce.disabled===q:"label"in ce&&ce.disabled===q}}function lr(q){return ir(function(ce){return ce=+ce,ir(function(_e,We){for(var Se,He=q([],_e.length,ce),je=He.length;je--;)_e[Se=He[je]]&&(_e[Se]=!(We[Se]=_e[Se]))})})}function be(q){return q&&void 0!==q.getElementsByTagName&&q}for(d in x=Nn.support={},F=Nn.isXML=function(q){var _e=q&&(q.ownerDocument||q).documentElement;return!Jl.test(q&&q.namespaceURI||_e&&_e.nodeName||"HTML")},ke=Nn.setDocument=function(q){var ce,_e,We=q?q.ownerDocument||q:Tt;return We==$e||9!==We.nodeType||!We.documentElement||(vt=($e=We).documentElement,Ut=!F($e),Tt!=$e&&(_e=$e.defaultView)&&_e.top!==_e&&(_e.addEventListener?_e.addEventListener("unload",ju,!1):_e.attachEvent&&_e.attachEvent("onunload",ju)),x.scope=wt(function(Se){return vt.appendChild(Se).appendChild($e.createElement("div")),void 0!==Se.querySelectorAll&&!Se.querySelectorAll(":scope fieldset div").length}),x.attributes=wt(function(Se){return Se.className="i",!Se.getAttribute("className")}),x.getElementsByTagName=wt(function(Se){return Se.appendChild($e.createComment("")),!Se.getElementsByTagName("*").length}),x.getElementsByClassName=Gi.test($e.getElementsByClassName),x.getById=wt(function(Se){return vt.appendChild(Se).id=At,!$e.getElementsByName||!$e.getElementsByName(At).length}),x.getById?(w.filter.ID=function(Se){var He=Se.replace(ti,Ei);return function(je){return je.getAttribute("id")===He}},w.find.ID=function(Se,He){if(void 0!==He.getElementById&&Ut){var je=He.getElementById(Se);return je?[je]:[]}}):(w.filter.ID=function(Se){var He=Se.replace(ti,Ei);return function(je){var at=void 0!==je.getAttributeNode&&je.getAttributeNode("id");return at&&at.value===He}},w.find.ID=function(Se,He){if(void 0!==He.getElementById&&Ut){var je,at,dt,xt=He.getElementById(Se);if(xt){if((je=xt.getAttributeNode("id"))&&je.value===Se)return[xt];for(dt=He.getElementsByName(Se),at=0;xt=dt[at++];)if((je=xt.getAttributeNode("id"))&&je.value===Se)return[xt]}return[]}}),w.find.TAG=x.getElementsByTagName?function(Se,He){return void 0!==He.getElementsByTagName?He.getElementsByTagName(Se):x.qsa?He.querySelectorAll(Se):void 0}:function(Se,He){var je,at=[],dt=0,xt=He.getElementsByTagName(Se);if("*"===Se){for(;je=xt[dt++];)1===je.nodeType&&at.push(je);return at}return xt},w.find.CLASS=x.getElementsByClassName&&function(Se,He){if(void 0!==He.getElementsByClassName&&Ut)return He.getElementsByClassName(Se)},In=[],St=[],(x.qsa=Gi.test($e.querySelectorAll))&&(wt(function(Se){var He;vt.appendChild(Se).innerHTML="<a id='"+At+"'></a><select id='"+At+"-\r\\' msallowcapture=''><option selected=''></option></select>",Se.querySelectorAll("[msallowcapture^='']").length&&St.push("[*^$]="+Tn+"*(?:''|\"\")"),Se.querySelectorAll("[selected]").length||St.push("\\["+Tn+"*(?:value|"+uo+")"),Se.querySelectorAll("[id~="+At+"-]").length||St.push("~="),(He=$e.createElement("input")).setAttribute("name",""),Se.appendChild(He),Se.querySelectorAll("[name='']").length||St.push("\\["+Tn+"*name"+Tn+"*="+Tn+"*(?:''|\"\")"),Se.querySelectorAll(":checked").length||St.push(":checked"),Se.querySelectorAll("a#"+At+"+*").length||St.push(".#.+[+~]"),Se.querySelectorAll("\\\f"),St.push("[\\r\\n\\f]")}),wt(function(Se){Se.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var He=$e.createElement("input");He.setAttribute("type","hidden"),Se.appendChild(He).setAttribute("name","D"),Se.querySelectorAll("[name=d]").length&&St.push("name"+Tn+"*[*^$|!~]?="),2!==Se.querySelectorAll(":enabled").length&&St.push(":enabled",":disabled"),vt.appendChild(Se).disabled=!0,2!==Se.querySelectorAll(":disabled").length&&St.push(":enabled",":disabled"),Se.querySelectorAll("*,:x"),St.push(",.*:")})),(x.matchesSelector=Gi.test(Vn=vt.matches||vt.webkitMatchesSelector||vt.mozMatchesSelector||vt.oMatchesSelector||vt.msMatchesSelector))&&wt(function(Se){x.disconnectedMatch=Vn.call(Se,"*"),Vn.call(Se,"[s!='']:x"),In.push("!=",va)}),St=St.length&&new RegExp(St.join("|")),In=In.length&&new RegExp(In.join("|")),ce=Gi.test(vt.compareDocumentPosition),kr=ce||Gi.test(vt.contains)?function(Se,He){var je=9===Se.nodeType?Se.documentElement:Se,at=He&&He.parentNode;return Se===at||!(!at||1!==at.nodeType||!(je.contains?je.contains(at):Se.compareDocumentPosition&&16&Se.compareDocumentPosition(at)))}:function(Se,He){if(He)for(;He=He.parentNode;)if(He===Se)return!0;return!1},mi=ce?function(Se,He){if(Se===He)return Ke=!0,0;var je=!Se.compareDocumentPosition-!He.compareDocumentPosition;return je||(1&(je=(Se.ownerDocument||Se)==(He.ownerDocument||He)?Se.compareDocumentPosition(He):1)||!x.sortDetached&&He.compareDocumentPosition(Se)===je?Se==$e||Se.ownerDocument==Tt&&kr(Tt,Se)?-1:He==$e||He.ownerDocument==Tt&&kr(Tt,He)?1:Fe?Ui(Fe,Se)-Ui(Fe,He):0:4&je?-1:1)}:function(Se,He){if(Se===He)return Ke=!0,0;var je,at=0,dt=Se.parentNode,xt=He.parentNode,Ot=[Se],Rt=[He];if(!dt||!xt)return Se==$e?-1:He==$e?1:dt?-1:xt?1:Fe?Ui(Fe,Se)-Ui(Fe,He):0;if(dt===xt)return za(Se,He);for(je=Se;je=je.parentNode;)Ot.unshift(je);for(je=He;je=je.parentNode;)Rt.unshift(je);for(;Ot[at]===Rt[at];)at++;return at?za(Ot[at],Rt[at]):Ot[at]==Tt?-1:Rt[at]==Tt?1:0}),$e},Nn.matches=function(q,ce){return Nn(q,null,null,ce)},Nn.matchesSelector=function(q,ce){if(ke(q),x.matchesSelector&&Ut&&!$r[ce+" "]&&(!In||!In.test(ce))&&(!St||!St.test(ce)))try{var _e=Vn.call(q,ce);if(_e||x.disconnectedMatch||q.document&&11!==q.document.nodeType)return _e}catch(We){$r(ce,!0)}return Nn(ce,$e,null,[q]).length>0},Nn.contains=function(q,ce){return(q.ownerDocument||q)!=$e&&ke(q),kr(q,ce)},Nn.attr=function(q,ce){(q.ownerDocument||q)!=$e&&ke(q);var _e=w.attrHandle[ce.toLowerCase()],We=_e&&Yr.call(w.attrHandle,ce.toLowerCase())?_e(q,ce,!Ut):void 0;return void 0!==We?We:x.attributes||!Ut?q.getAttribute(ce):(We=q.getAttributeNode(ce))&&We.specified?We.value:null},Nn.escape=function(q){return(q+"").replace(lo,ur)},Nn.error=function(q){throw new Error("Syntax error, unrecognized expression: "+q)},Nn.uniqueSort=function(q){var ce,_e=[],We=0,Se=0;if(Ke=!x.detectDuplicates,Fe=!x.sortStable&&q.slice(0),q.sort(mi),Ke){for(;ce=q[Se++];)ce===q[Se]&&(We=_e.push(Se));for(;We--;)q.splice(_e[We],1)}return Fe=null,q},N=Nn.getText=function(q){var ce,_e="",We=0,Se=q.nodeType;if(Se){if(1===Se||9===Se||11===Se){if("string"==typeof q.textContent)return q.textContent;for(q=q.firstChild;q;q=q.nextSibling)_e+=N(q)}else if(3===Se||4===Se)return q.nodeValue}else for(;ce=q[We++];)_e+=N(ce);return _e},(w=Nn.selectors={cacheLength:50,createPseudo:ir,match:ja,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(q){return q[1]=q[1].replace(ti,Ei),q[3]=(q[3]||q[4]||q[5]||"").replace(ti,Ei),"~="===q[2]&&(q[3]=" "+q[3]+" "),q.slice(0,4)},CHILD:function(q){return q[1]=q[1].toLowerCase(),"nth"===q[1].slice(0,3)?(q[3]||Nn.error(q[0]),q[4]=+(q[4]?q[5]+(q[6]||1):2*("even"===q[3]||"odd"===q[3])),q[5]=+(q[7]+q[8]||"odd"===q[3])):q[3]&&Nn.error(q[0]),q},PSEUDO:function(q){var ce,_e=!q[6]&&q[2];return ja.CHILD.test(q[0])?null:(q[3]?q[2]=q[4]||q[5]||"":_e&&Js.test(_e)&&(ce=Y(_e,!0))&&(ce=_e.indexOf(")",_e.length-ce)-_e.length)&&(q[0]=q[0].slice(0,ce),q[2]=_e.slice(0,ce)),q.slice(0,3))}},filter:{TAG:function(q){var ce=q.replace(ti,Ei).toLowerCase();return"*"===q?function(){return!0}:function(_e){return _e.nodeName&&_e.nodeName.toLowerCase()===ce}},CLASS:function(q){var ce=Re[q+" "];return ce||(ce=new RegExp("(^|"+Tn+")"+q+"("+Tn+"|$)"))&&Re(q,function(_e){return ce.test("string"==typeof _e.className&&_e.className||void 0!==_e.getAttribute&&_e.getAttribute("class")||"")})},ATTR:function(q,ce,_e){return function(We){var Se=Nn.attr(We,q);return null==Se?"!="===ce:!ce||(Se+="","="===ce?Se===_e:"!="===ce?Se!==_e:"^="===ce?_e&&0===Se.indexOf(_e):"*="===ce?_e&&Se.indexOf(_e)>-1:"$="===ce?_e&&Se.slice(-_e.length)===_e:"~="===ce?(" "+Se.replace(Vu," ")+" ").indexOf(_e)>-1:"|="===ce&&(Se===_e||Se.slice(0,_e.length+1)===_e+"-"))}},CHILD:function(q,ce,_e,We,Se){var He="nth"!==q.slice(0,3),je="last"!==q.slice(-4),at="of-type"===ce;return 1===We&&0===Se?function(dt){return!!dt.parentNode}:function(dt,xt,Ot){var Rt,Mt,En,st,hn,yn,er=He!==je?"nextSibling":"previousSibling",tn=dt.parentNode,Mo=at&&dt.nodeName.toLowerCase(),Sr=!Ot&&!at,Hr=!1;if(tn){if(He){for(;er;){for(st=dt;st=st[er];)if(at?st.nodeName.toLowerCase()===Mo:1===st.nodeType)return!1;yn=er="only"===q&&!yn&&"nextSibling"}return!0}if(yn=[je?tn.firstChild:tn.lastChild],je&&Sr){for(Hr=(hn=(Rt=(Mt=(En=(st=tn)[At]||(st[At]={}))[st.uniqueID]||(En[st.uniqueID]={}))[q]||[])[0]===Cr&&Rt[1])&&Rt[2],st=hn&&tn.childNodes[hn];st=++hn&&st&&st[er]||(Hr=hn=0)||yn.pop();)if(1===st.nodeType&&++Hr&&st===dt){Mt[q]=[Cr,hn,Hr];break}}else if(Sr&&(Hr=hn=(Rt=(Mt=(En=(st=dt)[At]||(st[At]={}))[st.uniqueID]||(En[st.uniqueID]={}))[q]||[])[0]===Cr&&Rt[1]),!1===Hr)for(;(st=++hn&&st&&st[er]||(Hr=hn=0)||yn.pop())&&((at?st.nodeName.toLowerCase()!==Mo:1!==st.nodeType)||!++Hr||(Sr&&((Mt=(En=st[At]||(st[At]={}))[st.uniqueID]||(En[st.uniqueID]={}))[q]=[Cr,Hr]),st!==dt)););return(Hr-=Se)===We||Hr%We==0&&Hr/We>=0}}},PSEUDO:function(q,ce){var _e,We=w.pseudos[q]||w.setFilters[q.toLowerCase()]||Nn.error("unsupported pseudo: "+q);return We[At]?We(ce):We.length>1?(_e=[q,q,"",ce],w.setFilters.hasOwnProperty(q.toLowerCase())?ir(function(Se,He){for(var je,at=We(Se,ce),dt=at.length;dt--;)Se[je=Ui(Se,at[dt])]=!(He[je]=at[dt])}):function(Se){return We(Se,0,_e)}):We}},pseudos:{not:ir(function(q){var ce=[],_e=[],We=ue(q.replace(On,"$1"));return We[At]?ir(function(Se,He,je,at){for(var dt,xt=We(Se,null,at,[]),Ot=Se.length;Ot--;)(dt=xt[Ot])&&(Se[Ot]=!(He[Ot]=dt))}):function(Se,He,je){return ce[0]=Se,We(ce,null,je,_e),ce[0]=null,!_e.pop()}}),has:ir(function(q){return function(ce){return Nn(q,ce).length>0}}),contains:ir(function(q){return q=q.replace(ti,Ei),function(ce){return(ce.textContent||N(ce)).indexOf(q)>-1}}),lang:ir(function(q){return Ql.test(q||"")||Nn.error("unsupported lang: "+q),q=q.replace(ti,Ei).toLowerCase(),function(ce){var _e;do{if(_e=Ut?ce.lang:ce.getAttribute("xml:lang")||ce.getAttribute("lang"))return(_e=_e.toLowerCase())===q||0===_e.indexOf(q+"-")}while((ce=ce.parentNode)&&1===ce.nodeType);return!1}}),target:function(q){var ce=l.location&&l.location.hash;return ce&&ce.slice(1)===q.id},root:function(q){return q===vt},focus:function(q){return q===$e.activeElement&&(!$e.hasFocus||$e.hasFocus())&&!!(q.type||q.href||~q.tabIndex)},enabled:ma(!1),disabled:ma(!0),checked:function(q){var ce=q.nodeName.toLowerCase();return"input"===ce&&!!q.checked||"option"===ce&&!!q.selected},selected:function(q){return!0===q.selected},empty:function(q){for(q=q.firstChild;q;q=q.nextSibling)if(q.nodeType<6)return!1;return!0},parent:function(q){return!w.pseudos.empty(q)},header:function(q){return Hu.test(q.nodeName)},input:function(q){return Zl.test(q.nodeName)},button:function(q){var ce=q.nodeName.toLowerCase();return"input"===ce&&"button"===q.type||"button"===ce},text:function(q){var ce;return"input"===q.nodeName.toLowerCase()&&"text"===q.type&&(null==(ce=q.getAttribute("type"))||"text"===ce.toLowerCase())},first:lr(function(){return[0]}),last:lr(function(q,ce){return[ce-1]}),eq:lr(function(q,ce,_e){return[_e<0?_e+ce:_e]}),even:lr(function(q,ce){for(var _e=0;_e<ce;_e+=2)q.push(_e);return q}),odd:lr(function(q,ce){for(var _e=1;_e<ce;_e+=2)q.push(_e);return q}),lt:lr(function(q,ce,_e){for(var We=_e<0?_e+ce:_e>ce?ce:_e;--We>=0;)q.push(We);return q}),gt:lr(function(q,ce,_e){for(var We=_e<0?_e+ce:_e;++We<ce;)q.push(We);return q})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[d]=yi(d);for(d in{submit:!0,reset:!0})w.pseudos[d]=Zs(d);function Ue(){}function De(q){for(var ce=0,_e=q.length,We="";ce<_e;ce++)We+=q[ce].value;return We}function qe(q,ce,_e){var We=ce.dir,Se=ce.next,He=Se||We,je=_e&&"parentNode"===He,at=bn++;return ce.first?function(dt,xt,Ot){for(;dt=dt[We];)if(1===dt.nodeType||je)return q(dt,xt,Ot);return!1}:function(dt,xt,Ot){var Rt,Mt,En,st=[Cr,at];if(Ot){for(;dt=dt[We];)if((1===dt.nodeType||je)&&q(dt,xt,Ot))return!0}else for(;dt=dt[We];)if(1===dt.nodeType||je)if(Mt=(En=dt[At]||(dt[At]={}))[dt.uniqueID]||(En[dt.uniqueID]={}),Se&&Se===dt.nodeName.toLowerCase())dt=dt[We]||dt;else{if((Rt=Mt[He])&&Rt[0]===Cr&&Rt[1]===at)return st[2]=Rt[2];if(Mt[He]=st,st[2]=q(dt,xt,Ot))return!0}return!1}}function _t(q){return q.length>1?function(ce,_e,We){for(var Se=q.length;Se--;)if(!q[Se](ce,_e,We))return!1;return!0}:q[0]}function qn(q,ce,_e,We,Se){for(var He,je=[],at=0,dt=q.length,xt=null!=ce;at<dt;at++)(He=q[at])&&(!_e||_e(He,We,Se))&&(je.push(He),xt&&ce.push(at));return je}function An(q,ce,_e,We,Se,He){return We&&!We[At]&&(We=An(We)),Se&&!Se[At]&&(Se=An(Se,He)),ir(function(je,at,dt,xt){var Ot,Rt,Mt,En=[],st=[],hn=at.length,yn=je||function yt(q,ce,_e){for(var We=0,Se=ce.length;We<Se;We++)Nn(q,ce[We],_e);return _e}(ce||"*",dt.nodeType?[dt]:dt,[]),er=!q||!je&&ce?yn:qn(yn,En,q,dt,xt),tn=_e?Se||(je?q:hn||We)?[]:at:er;if(_e&&_e(er,tn,dt,xt),We)for(Ot=qn(tn,st),We(Ot,[],dt,xt),Rt=Ot.length;Rt--;)(Mt=Ot[Rt])&&(tn[st[Rt]]=!(er[st[Rt]]=Mt));if(je){if(Se||q){if(Se){for(Ot=[],Rt=tn.length;Rt--;)(Mt=tn[Rt])&&Ot.push(er[Rt]=Mt);Se(null,tn=[],Ot,xt)}for(Rt=tn.length;Rt--;)(Mt=tn[Rt])&&(Ot=Se?Ui(je,Mt):En[Rt])>-1&&(je[Ot]=!(at[Ot]=Mt))}}else tn=qn(tn===at?tn.splice(hn,tn.length):tn),Se?Se(null,at,tn,xt):Ti.apply(at,tn)})}function Ua(q){for(var ce,_e,We,Se=q.length,He=w.relative[q[0].type],je=He||w.relative[" "],at=He?1:0,dt=qe(function(Rt){return Rt===ce},je,!0),xt=qe(function(Rt){return Ui(ce,Rt)>-1},je,!0),Ot=[function(Rt,Mt,En){var st=!He&&(En||Mt!==Ee)||((ce=Mt).nodeType?dt(Rt,Mt,En):xt(Rt,Mt,En));return ce=null,st}];at<Se;at++)if(_e=w.relative[q[at].type])Ot=[qe(_t(Ot),_e)];else{if((_e=w.filter[q[at].type].apply(null,q[at].matches))[At]){for(We=++at;We<Se&&!w.relative[q[We].type];We++);return An(at>1&&_t(Ot),at>1&&De(q.slice(0,at-1).concat({value:" "===q[at-2].type?"*":""})).replace(On,"$1"),_e,at<We&&Ua(q.slice(at,We)),We<Se&&Ua(q=q.slice(We)),We<Se&&De(q))}Ot.push(_e)}return _t(Ot)}return Ue.prototype=w.filters=w.pseudos,w.setFilters=new Ue,Y=Nn.tokenize=function(q,ce){var _e,We,Se,He,je,at,dt,xt=wr[q+" "];if(xt)return ce?0:xt.slice(0);for(je=q,at=[],dt=w.preFilter;je;){for(He in(!_e||(We=Ss.exec(je)))&&(We&&(je=je.slice(We[0].length)||je),at.push(Se=[])),_e=!1,(We=Zo.exec(je))&&(_e=We.shift(),Se.push({value:_e,type:We[0].replace(On," ")}),je=je.slice(_e.length)),w.filter)(We=ja[He].exec(je))&&(!dt[He]||(We=dt[He](We)))&&(_e=We.shift(),Se.push({value:_e,type:He,matches:We}),je=je.slice(_e.length));if(!_e)break}return ce?je.length:je?Nn.error(q):wr(q,at).slice(0)},ue=Nn.compile=function(q,ce){var _e,We=[],Se=[],He=Fr[q+" "];if(!He){for(ce||(ce=Y(q)),_e=ce.length;_e--;)(He=Ua(ce[_e]))[At]?We.push(He):Se.push(He);He=Fr(q,function zu(q,ce){var _e=ce.length>0,We=q.length>0,Se=function(He,je,at,dt,xt){var Ot,Rt,Mt,En=0,st="0",hn=He&&[],yn=[],er=Ee,tn=He||We&&w.find.TAG("*",xt),Mo=Cr+=null==er?1:Math.random()||.1,Sr=tn.length;for(xt&&(Ee=je==$e||je||xt);st!==Sr&&null!=(Ot=tn[st]);st++){if(We&&Ot){for(Rt=0,!je&&Ot.ownerDocument!=$e&&(ke(Ot),at=!Ut);Mt=q[Rt++];)if(Mt(Ot,je||$e,at)){dt.push(Ot);break}xt&&(Cr=Mo)}_e&&((Ot=!Mt&&Ot)&&En--,He&&hn.push(Ot))}if(En+=st,_e&&st!==En){for(Rt=0;Mt=ce[Rt++];)Mt(hn,yn,je,at);if(He){if(En>0)for(;st--;)hn[st]||yn[st]||(yn[st]=zi.call(dt));yn=qn(yn)}Ti.apply(dt,yn),xt&&!He&&yn.length>0&&En+ce.length>1&&Nn.uniqueSort(dt)}return xt&&(Cr=Mo,Ee=er),hn};return _e?ir(Se):Se}(Se,We)),He.selector=q}return He},se=Nn.select=function(q,ce,_e,We){var Se,He,je,at,dt,xt="function"==typeof q&&q,Ot=!We&&Y(q=xt.selector||q);if(_e=_e||[],1===Ot.length){if((He=Ot[0]=Ot[0].slice(0)).length>2&&"ID"===(je=He[0]).type&&9===ce.nodeType&&Ut&&w.relative[He[1].type]){if(!(ce=(w.find.ID(je.matches[0].replace(ti,Ei),ce)||[])[0]))return _e;xt&&(ce=ce.parentNode),q=q.slice(He.shift().value.length)}for(Se=ja.needsContext.test(q)?0:He.length;Se--&&!w.relative[at=(je=He[Se]).type];)if((dt=w.find[at])&&(We=dt(je.matches[0].replace(ti,Ei),Ts.test(He[0].type)&&be(ce.parentNode)||ce))){if(He.splice(Se,1),!(q=We.length&&De(He)))return Ti.apply(_e,We),_e;break}}return(xt||ue(q,Ot))(We,ce,!Ut,_e,!ce||Ts.test(q)&&be(ce.parentNode)||ce),_e},x.sortStable=At.split("").sort(mi).join("")===At,x.detectDuplicates=!!Ke,ke(),x.sortDetached=wt(function(q){return 1&q.compareDocumentPosition($e.createElement("fieldset"))}),wt(function(q){return q.innerHTML="<a href='#'></a>","#"===q.firstChild.getAttribute("href")})||Br("type|href|height|width",function(q,ce,_e){if(!_e)return q.getAttribute(ce,"type"===ce.toLowerCase()?1:2)}),(!x.attributes||!wt(function(q){return q.innerHTML="<input/>",q.firstChild.setAttribute("value",""),""===q.firstChild.getAttribute("value")}))&&Br("value",function(q,ce,_e){if(!_e&&"input"===q.nodeName.toLowerCase())return q.defaultValue}),wt(function(q){return null==q.getAttribute("disabled")})||Br(uo,function(q,ce,_e){var We;if(!_e)return!0===q[ce]?ce.toLowerCase():(We=q.getAttributeNode(ce))&&We.specified?We.value:null}),Nn}(v);C.find=Qe,C.expr=Qe.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=Qe.uniqueSort,C.text=Qe.getText,C.isXMLDoc=Qe.isXML,C.contains=Qe.contains,C.escapeSelector=Qe.escape;var Xe=function(l,d,x){for(var w=[],N=void 0!==x;(l=l[d])&&9!==l.nodeType;)if(1===l.nodeType){if(N&&C(l).is(x))break;w.push(l)}return w},et=function(l,d){for(var x=[];l;l=l.nextSibling)1===l.nodeType&&l!==d&&x.push(l);return x},nt=C.expr.match.needsContext;function ut(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var bt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ht(l,d,x){return ae(d)?C.grep(l,function(w,N){return!!d.call(w,N,w)!==x}):d.nodeType?C.grep(l,function(w){return w===d!==x}):"string"!=typeof d?C.grep(l,function(w){return B.call(d,w)>-1!==x}):C.filter(d,l,x)}C.filter=function(l,d,x){var w=d[0];return x&&(l=":not("+l+")"),1===d.length&&1===w.nodeType?C.find.matchesSelector(w,l)?[w]:[]:C.find.matches(l,C.grep(d,function(N){return 1===N.nodeType}))},C.fn.extend({find:function(l){var d,x,w=this.length,N=this;if("string"!=typeof l)return this.pushStack(C(l).filter(function(){for(d=0;d<w;d++)if(C.contains(N[d],this))return!0}));for(x=this.pushStack([]),d=0;d<w;d++)C.find(l,N[d],x);return w>1?C.uniqueSort(x):x},filter:function(l){return this.pushStack(Ht(this,l||[],!1))},not:function(l){return this.pushStack(Ht(this,l||[],!0))},is:function(l){return!!Ht(this,"string"==typeof l&&nt.test(l)?C(l):l||[],!1).length}});var Qt,Et=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Jn=C.fn.init=function(l,d,x){var w,N;if(!l)return this;if(x=x||Qt,"string"==typeof l){if(!(w="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:Et.exec(l))||!w[1]&&d)return!d||d.jquery?(d||x).find(l):this.constructor(d).find(l);if(w[1]){if(C.merge(this,C.parseHTML(w[1],(d=d instanceof C?d[0]:d)&&d.nodeType?d.ownerDocument||d:fe,!0)),bt.test(w[1])&&C.isPlainObject(d))for(w in d)ae(this[w])?this[w](d[w]):this.attr(w,d[w]);return this}return(N=fe.getElementById(w[2]))&&(this[0]=N,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):ae(l)?void 0!==x.ready?x.ready(l):l(C):C.makeArray(l,this)};Jn.prototype=C.fn,Qt=C(fe);var Pr=/^(?:parents|prev(?:Until|All))/,Ir={children:!0,contents:!0,next:!0,prev:!0};function Le(l,d){for(;(l=l[d])&&1!==l.nodeType;);return l}C.fn.extend({has:function(l){var d=C(l,this),x=d.length;return this.filter(function(){for(var w=0;w<x;w++)if(C.contains(this,d[w]))return!0})},closest:function(l,d){var x,w=0,N=this.length,F=[],Y="string"!=typeof l&&C(l);if(!nt.test(l))for(;w<N;w++)for(x=this[w];x&&x!==d;x=x.parentNode)if(x.nodeType<11&&(Y?Y.index(x)>-1:1===x.nodeType&&C.find.matchesSelector(x,l))){F.push(x);break}return this.pushStack(F.length>1?C.uniqueSort(F):F)},index:function(l){return l?"string"==typeof l?B.call(C(l),this[0]):B.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(l,d))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),C.each({parent:function(l){var d=l.parentNode;return d&&11!==d.nodeType?d:null},parents:function(l){return Xe(l,"parentNode")},parentsUntil:function(l,d,x){return Xe(l,"parentNode",x)},next:function(l){return Le(l,"nextSibling")},prev:function(l){return Le(l,"previousSibling")},nextAll:function(l){return Xe(l,"nextSibling")},prevAll:function(l){return Xe(l,"previousSibling")},nextUntil:function(l,d,x){return Xe(l,"nextSibling",x)},prevUntil:function(l,d,x){return Xe(l,"previousSibling",x)},siblings:function(l){return et((l.parentNode||{}).firstChild,l)},children:function(l){return et(l.firstChild)},contents:function(l){return null!=l.contentDocument&&b(l.contentDocument)?l.contentDocument:(ut(l,"template")&&(l=l.content||l),C.merge([],l.childNodes))}},function(l,d){C.fn[l]=function(x,w){var N=C.map(this,d,x);return"Until"!==l.slice(-5)&&(w=x),w&&"string"==typeof w&&(N=C.filter(w,N)),this.length>1&&(Ir[l]||C.uniqueSort(N),Pr.test(l)&&N.reverse()),this.pushStack(N)}});var gn=/[^\x20\t\r\n\f]+/g;function Cn(l){return l}function Be(l){throw l}function Ce(l,d,x,w){var N;try{l&&ae(N=l.promise)?N.call(l).done(d).fail(x):l&&ae(N=l.then)?N.call(l,d,x):d.apply(void 0,[l].slice(w))}catch(F){x.apply(void 0,[F])}}C.Callbacks=function(l){l="string"==typeof l?function ar(l){var d={};return C.each(l.match(gn)||[],function(x,w){d[w]=!0}),d}(l):C.extend({},l);var d,x,w,N,F=[],Y=[],ue=-1,se=function(){for(N=N||l.once,w=d=!0;Y.length;ue=-1)for(x=Y.shift();++ue<F.length;)!1===F[ue].apply(x[0],x[1])&&l.stopOnFalse&&(ue=F.length,x=!1);l.memory||(x=!1),d=!1,N&&(F=x?[]:"")},Ee={add:function(){return F&&(x&&!d&&(ue=F.length-1,Y.push(x)),function Fe(Ke){C.each(Ke,function(ke,$e){ae($e)?(!l.unique||!Ee.has($e))&&F.push($e):$e&&$e.length&&"string"!==Te($e)&&Fe($e)})}(arguments),x&&!d&&se()),this},remove:function(){return C.each(arguments,function(Fe,Ke){for(var ke;(ke=C.inArray(Ke,F,ke))>-1;)F.splice(ke,1),ke<=ue&&ue--}),this},has:function(Fe){return Fe?C.inArray(Fe,F)>-1:F.length>0},empty:function(){return F&&(F=[]),this},disable:function(){return N=Y=[],F=x="",this},disabled:function(){return!F},lock:function(){return N=Y=[],!x&&!d&&(F=x=""),this},locked:function(){return!!N},fireWith:function(Fe,Ke){return N||(Ke=[Fe,(Ke=Ke||[]).slice?Ke.slice():Ke],Y.push(Ke),d||se()),this},fire:function(){return Ee.fireWith(this,arguments),this},fired:function(){return!!w}};return Ee},C.extend({Deferred:function(l){var d=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],x="pending",w={state:function(){return x},always:function(){return N.done(arguments).fail(arguments),this},catch:function(F){return w.then(null,F)},pipe:function(){var F=arguments;return C.Deferred(function(Y){C.each(d,function(ue,se){var Ee=ae(F[se[4]])&&F[se[4]];N[se[1]](function(){var Fe=Ee&&Ee.apply(this,arguments);Fe&&ae(Fe.promise)?Fe.promise().progress(Y.notify).done(Y.resolve).fail(Y.reject):Y[se[0]+"With"](this,Ee?[Fe]:arguments)})}),F=null}).promise()},then:function(F,Y,ue){var se=0;function Ee(Fe,Ke,ke,$e){return function(){var vt=this,Ut=arguments,St=function(){var Vn,kr;if(!(Fe<se)){if((Vn=ke.apply(vt,Ut))===Ke.promise())throw new TypeError("Thenable self-resolution");ae(kr=Vn&&("object"==typeof Vn||"function"==typeof Vn)&&Vn.then)?$e?kr.call(Vn,Ee(se,Ke,Cn,$e),Ee(se,Ke,Be,$e)):(se++,kr.call(Vn,Ee(se,Ke,Cn,$e),Ee(se,Ke,Be,$e),Ee(se,Ke,Cn,Ke.notifyWith))):(ke!==Cn&&(vt=void 0,Ut=[Vn]),($e||Ke.resolveWith)(vt,Ut))}},In=$e?St:function(){try{St()}catch(Vn){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(Vn,In.stackTrace),Fe+1>=se&&(ke!==Be&&(vt=void 0,Ut=[Vn]),Ke.rejectWith(vt,Ut))}};Fe?In():(C.Deferred.getStackHook&&(In.stackTrace=C.Deferred.getStackHook()),v.setTimeout(In))}}return C.Deferred(function(Fe){d[0][3].add(Ee(0,Fe,ae(ue)?ue:Cn,Fe.notifyWith)),d[1][3].add(Ee(0,Fe,ae(F)?F:Cn)),d[2][3].add(Ee(0,Fe,ae(Y)?Y:Be))}).promise()},promise:function(F){return null!=F?C.extend(F,w):w}},N={};return C.each(d,function(F,Y){var ue=Y[2],se=Y[5];w[Y[1]]=ue.add,se&&ue.add(function(){x=se},d[3-F][2].disable,d[3-F][3].disable,d[0][2].lock,d[0][3].lock),ue.add(Y[3].fire),N[Y[0]]=function(){return N[Y[0]+"With"](this===N?void 0:this,arguments),this},N[Y[0]+"With"]=ue.fireWith}),w.promise(N),l&&l.call(N,N),N},when:function(l){var d=arguments.length,x=d,w=Array(x),N=A.call(arguments),F=C.Deferred(),Y=function(ue){return function(se){w[ue]=this,N[ue]=arguments.length>1?A.call(arguments):se,--d||F.resolveWith(w,N)}};if(d<=1&&(Ce(l,F.done(Y(x)).resolve,F.reject,!d),"pending"===F.state()||ae(N[x]&&N[x].then)))return F.then();for(;x--;)Ce(N[x],Y(x),F.reject);return F.promise()}});var Ze=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(l,d){v.console&&v.console.warn&&l&&Ze.test(l.name)&&v.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},C.readyException=function(l){v.setTimeout(function(){throw l})};var lt=C.Deferred();function mt(){fe.removeEventListener("DOMContentLoaded",mt),v.removeEventListener("load",mt),C.ready()}C.fn.ready=function(l){return lt.then(l).catch(function(d){C.readyException(d)}),this},C.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--C.readyWait:C.isReady)||(C.isReady=!0,!(!0!==l&&--C.readyWait>0)&&lt.resolveWith(fe,[C]))}}),C.ready.then=lt.then,"complete"===fe.readyState||"loading"!==fe.readyState&&!fe.documentElement.doScroll?v.setTimeout(C.ready):(fe.addEventListener("DOMContentLoaded",mt),v.addEventListener("load",mt));var nn=function(l,d,x,w,N,F,Y){var ue=0,se=l.length,Ee=null==x;if("object"===Te(x))for(ue in N=!0,x)nn(l,d,ue,x[ue],!0,F,Y);else if(void 0!==w&&(N=!0,ae(w)||(Y=!0),Ee&&(Y?(d.call(l,w),d=null):(Ee=d,d=function(Fe,Ke,ke){return Ee.call(C(Fe),ke)})),d))for(;ue<se;ue++)d(l[ue],x,Y?w:w.call(l[ue],ue,d(l[ue],x)));return N?l:Ee?d.call(l):se?d(l[0],x):F},mn=/^-ms-/,zn=/-([a-z])/g;function di(l,d){return d.toUpperCase()}function Yt(l){return l.replace(mn,"ms-").replace(zn,di)}var jt=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function D(){this.expando=C.expando+D.uid++}D.uid=1,D.prototype={cache:function(l){var d=l[this.expando];return d||(d={},jt(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,x){var w,N=this.cache(l);if("string"==typeof d)N[Yt(d)]=x;else for(w in d)N[Yt(w)]=d[w];return N},get:function(l,d){return void 0===d?this.cache(l):l[this.expando]&&l[this.expando][Yt(d)]},access:function(l,d,x){return void 0===d||d&&"string"==typeof d&&void 0===x?this.get(l,d):(this.set(l,d,x),void 0!==x?x:d)},remove:function(l,d){var x,w=l[this.expando];if(void 0!==w){if(void 0!==d)for((x=(d=Array.isArray(d)?d.map(Yt):(d=Yt(d))in w?[d]:d.match(gn)||[]).length);x--;)delete w[d[x]];(void 0===d||C.isEmptyObject(w))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return void 0!==d&&!C.isEmptyObject(d)}};var G=new D,re=new D,me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ge=/[A-Z]/g;function ct(l,d,x){var w;if(void 0===x&&1===l.nodeType)if(w="data-"+d.replace(Ge,"-$&").toLowerCase(),"string"==typeof(x=l.getAttribute(w))){try{x=function Ye(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:me.test(l)?JSON.parse(l):l)}(x)}catch(N){}re.set(l,d,x)}else x=void 0;return x}C.extend({hasData:function(l){return re.hasData(l)||G.hasData(l)},data:function(l,d,x){return re.access(l,d,x)},removeData:function(l,d){re.remove(l,d)},_data:function(l,d,x){return G.access(l,d,x)},_removeData:function(l,d){G.remove(l,d)}}),C.fn.extend({data:function(l,d){var x,w,N,F=this[0],Y=F&&F.attributes;if(void 0===l){if(this.length&&(N=re.get(F),1===F.nodeType&&!G.get(F,"hasDataAttrs"))){for(x=Y.length;x--;)Y[x]&&0===(w=Y[x].name).indexOf("data-")&&(w=Yt(w.slice(5)),ct(F,w,N[w]));G.set(F,"hasDataAttrs",!0)}return N}return"object"==typeof l?this.each(function(){re.set(this,l)}):nn(this,function(ue){var se;if(F&&void 0===ue)return void 0!==(se=re.get(F,l))||void 0!==(se=ct(F,l))?se:void 0;this.each(function(){re.set(this,l,ue)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),C.extend({queue:function(l,d,x){var w;if(l)return w=G.get(l,d=(d||"fx")+"queue"),x&&(!w||Array.isArray(x)?w=G.access(l,d,C.makeArray(x)):w.push(x)),w||[]},dequeue:function(l,d){var x=C.queue(l,d=d||"fx"),w=x.length,N=x.shift(),F=C._queueHooks(l,d);"inprogress"===N&&(N=x.shift(),w--),N&&("fx"===d&&x.unshift("inprogress"),delete F.stop,N.call(l,function(){C.dequeue(l,d)},F)),!w&&F&&F.empty.fire()},_queueHooks:function(l,d){var x=d+"queueHooks";return G.get(l,x)||G.access(l,x,{empty:C.Callbacks("once memory").add(function(){G.remove(l,[d+"queue",x])})})}}),C.fn.extend({queue:function(l,d){var x=2;return"string"!=typeof l&&(d=l,l="fx",x--),arguments.length<x?C.queue(this[0],l):void 0===d?this:this.each(function(){var w=C.queue(this,l,d);C._queueHooks(this,l),"fx"===l&&"inprogress"!==w[0]&&C.dequeue(this,l)})},dequeue:function(l){return this.each(function(){C.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var x,w=1,N=C.Deferred(),F=this,Y=this.length,ue=function(){--w||N.resolveWith(F,[F])};for("string"!=typeof l&&(d=l,l=void 0),l=l||"fx";Y--;)(x=G.get(F[Y],l+"queueHooks"))&&x.empty&&(w++,x.empty.add(ue));return ue(),N.promise(d)}});var It=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vt=new RegExp("^(?:([+-])=|)("+It+")([a-z%]*)$","i"),rn=["Top","Right","Bottom","Left"],en=fe.documentElement,on=function(l){return C.contains(l.ownerDocument,l)},Un={composed:!0};en.getRootNode&&(on=function(l){return C.contains(l.ownerDocument,l)||l.getRootNode(Un)===l.ownerDocument});var Hn=function(l,d){return"none"===(l=d||l).style.display||""===l.style.display&&on(l)&&"none"===C.css(l,"display")};function Ur(l,d,x,w){var N,F,Y=20,ue=w?function(){return w.cur()}:function(){return C.css(l,d,"")},se=ue(),Ee=x&&x[3]||(C.cssNumber[d]?"":"px"),Fe=l.nodeType&&(C.cssNumber[d]||"px"!==Ee&&+se)&&Vt.exec(C.css(l,d));if(Fe&&Fe[3]!==Ee){for(Ee=Ee||Fe[3],Fe=+(se/=2)||1;Y--;)C.style(l,d,Fe+Ee),(1-F)*(1-(F=ue()/se||.5))<=0&&(Y=0),Fe/=F;C.style(l,d,(Fe*=2)+Ee),x=x||[]}return x&&(Fe=+Fe||+se||0,N=x[1]?Fe+(x[1]+1)*x[2]:+x[2],w&&(w.unit=Ee,w.start=Fe,w.end=N)),N}var Pn={};function Gn(l){var d,x=l.ownerDocument,w=l.nodeName,N=Pn[w];return N||(d=x.body.appendChild(x.createElement(w)),N=C.css(d,"display"),d.parentNode.removeChild(d),"none"===N&&(N="block"),Pn[w]=N,N)}function jn(l,d){for(var x,w,N=[],F=0,Y=l.length;F<Y;F++)(w=l[F]).style&&(x=w.style.display,d?("none"===x&&(N[F]=G.get(w,"display")||null,N[F]||(w.style.display="")),""===w.style.display&&Hn(w)&&(N[F]=Gn(w))):"none"!==x&&(N[F]="none",G.set(w,"display",x)));for(F=0;F<Y;F++)null!=N[F]&&(l[F].style.display=N[F]);return l}C.fn.extend({show:function(){return jn(this,!0)},hide:function(){return jn(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Hn(this)?C(this).show():C(this).hide()})}});var d,x,Kn=/^(?:checkbox|radio)$/i,mr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Gr=/^$|^module$|\/(?:java|ecma)script/i;d=fe.createDocumentFragment().appendChild(fe.createElement("div")),(x=fe.createElement("input")).setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),d.appendChild(x),i.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",i.option=!!d.lastChild;var sr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function nr(l,d){var x;return x=void 0!==l.getElementsByTagName?l.getElementsByTagName(d||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(d||"*"):[],void 0===d||d&&ut(l,d)?C.merge([l],x):x}function bo(l,d){for(var x=0,w=l.length;x<w;x++)G.set(l[x],"globalEval",!d||G.get(d[x],"globalEval"))}sr.tbody=sr.tfoot=sr.colgroup=sr.caption=sr.thead,sr.th=sr.td,i.option||(sr.optgroup=sr.option=[1,"<select multiple='multiple'>","</select>"]);var Na=/<|&#?\w+;/;function eo(l,d,x,w,N){for(var F,Y,ue,se,Ee,Fe,Ke=d.createDocumentFragment(),ke=[],$e=0,vt=l.length;$e<vt;$e++)if((F=l[$e])||0===F)if("object"===Te(F))C.merge(ke,F.nodeType?[F]:F);else if(Na.test(F)){for(Y=Y||Ke.appendChild(d.createElement("div")),ue=(mr.exec(F)||["",""])[1].toLowerCase(),Y.innerHTML=(se=sr[ue]||sr._default)[1]+C.htmlPrefilter(F)+se[2],Fe=se[0];Fe--;)Y=Y.lastChild;C.merge(ke,Y.childNodes),(Y=Ke.firstChild).textContent=""}else ke.push(d.createTextNode(F));for(Ke.textContent="",$e=0;F=ke[$e++];)if(w&&C.inArray(F,w)>-1)N&&N.push(F);else if(Ee=on(F),Y=nr(Ke.appendChild(F),"script"),Ee&&bo(Y),x)for(Fe=0;F=Y[Fe++];)Gr.test(F.type||"")&&x.push(F);return Ke}var Go=/^([^.]*)(?:\.(.+)|)/;function Zr(){return!0}function sn(){return!1}function _o(l,d){return l===function la(){try{return fe.activeElement}catch(l){}}()==("focus"===d)}function Co(l,d,x,w,N,F){var Y,ue;if("object"==typeof d){for(ue in"string"!=typeof x&&(w=w||x,x=void 0),d)Co(l,ue,x,w,d[ue],F);return l}if(null==w&&null==N?(N=x,w=x=void 0):null==N&&("string"==typeof x?(N=w,w=void 0):(N=w,w=x,x=void 0)),!1===N)N=sn;else if(!N)return l;return 1===F&&(Y=N,N=function(se){return C().off(se),Y.apply(this,arguments)},N.guid=Y.guid||(Y.guid=C.guid++)),l.each(function(){C.event.add(this,d,N,w,x)})}function to(l,d,x){x?(G.set(l,d,!1),C.event.add(l,d,{namespace:!1,handler:function(w){var N,F,Y=G.get(this,d);if(1&w.isTrigger&&this[d]){if(Y.length)(C.event.special[d]||{}).delegateType&&w.stopPropagation();else if(Y=A.call(arguments),G.set(this,d,Y),N=x(this,d),this[d](),Y!==(F=G.get(this,d))||N?G.set(this,d,!1):F={},Y!==F)return w.stopImmediatePropagation(),w.preventDefault(),F&&F.value}else Y.length&&(G.set(this,d,{value:C.event.trigger(C.extend(Y[0],C.Event.prototype),Y.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===G.get(l,d)&&C.event.add(l,d,Zr)}C.event={global:{},add:function(l,d,x,w,N){var F,Y,ue,se,Ee,Fe,Ke,ke,$e,vt,Ut,St=G.get(l);if(jt(l))for(x.handler&&(x=(F=x).handler,N=F.selector),N&&C.find.matchesSelector(en,N),x.guid||(x.guid=C.guid++),(se=St.events)||(se=St.events=Object.create(null)),(Y=St.handle)||(Y=St.handle=function(In){return void 0!==C&&C.event.triggered!==In.type?C.event.dispatch.apply(l,arguments):void 0}),Ee=(d=(d||"").match(gn)||[""]).length;Ee--;)$e=Ut=(ue=Go.exec(d[Ee])||[])[1],vt=(ue[2]||"").split(".").sort(),$e&&(Ke=C.event.special[$e]||{},Ke=C.event.special[$e=(N?Ke.delegateType:Ke.bindType)||$e]||{},Fe=C.extend({type:$e,origType:Ut,data:w,handler:x,guid:x.guid,selector:N,needsContext:N&&C.expr.match.needsContext.test(N),namespace:vt.join(".")},F),(ke=se[$e])||((ke=se[$e]=[]).delegateCount=0,(!Ke.setup||!1===Ke.setup.call(l,w,vt,Y))&&l.addEventListener&&l.addEventListener($e,Y)),Ke.add&&(Ke.add.call(l,Fe),Fe.handler.guid||(Fe.handler.guid=x.guid)),N?ke.splice(ke.delegateCount++,0,Fe):ke.push(Fe),C.event.global[$e]=!0)},remove:function(l,d,x,w,N){var F,Y,ue,se,Ee,Fe,Ke,ke,$e,vt,Ut,St=G.hasData(l)&&G.get(l);if(St&&(se=St.events)){for(Ee=(d=(d||"").match(gn)||[""]).length;Ee--;)if($e=Ut=(ue=Go.exec(d[Ee])||[])[1],vt=(ue[2]||"").split(".").sort(),$e){for(Ke=C.event.special[$e]||{},ke=se[$e=(w?Ke.delegateType:Ke.bindType)||$e]||[],ue=ue[2]&&new RegExp("(^|\\.)"+vt.join("\\.(?:.*\\.|)")+"(\\.|$)"),Y=F=ke.length;F--;)Fe=ke[F],(N||Ut===Fe.origType)&&(!x||x.guid===Fe.guid)&&(!ue||ue.test(Fe.namespace))&&(!w||w===Fe.selector||"**"===w&&Fe.selector)&&(ke.splice(F,1),Fe.selector&&ke.delegateCount--,Ke.remove&&Ke.remove.call(l,Fe));Y&&!ke.length&&((!Ke.teardown||!1===Ke.teardown.call(l,vt,St.handle))&&C.removeEvent(l,$e,St.handle),delete se[$e])}else for($e in se)C.event.remove(l,$e+d[Ee],x,w,!0);C.isEmptyObject(se)&&G.remove(l,"handle events")}},dispatch:function(l){var d,x,w,N,F,Y,ue=new Array(arguments.length),se=C.event.fix(l),Ee=(G.get(this,"events")||Object.create(null))[se.type]||[],Fe=C.event.special[se.type]||{};for(ue[0]=se,d=1;d<arguments.length;d++)ue[d]=arguments[d];if(se.delegateTarget=this,!Fe.preDispatch||!1!==Fe.preDispatch.call(this,se)){for(Y=C.event.handlers.call(this,se,Ee),d=0;(N=Y[d++])&&!se.isPropagationStopped();)for(se.currentTarget=N.elem,x=0;(F=N.handlers[x++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||!1===F.namespace||se.rnamespace.test(F.namespace))&&(se.handleObj=F,se.data=F.data,void 0!==(w=((C.event.special[F.origType]||{}).handle||F.handler).apply(N.elem,ue))&&!1===(se.result=w)&&(se.preventDefault(),se.stopPropagation()));return Fe.postDispatch&&Fe.postDispatch.call(this,se),se.result}},handlers:function(l,d){var x,w,N,F,Y,ue=[],se=d.delegateCount,Ee=l.target;if(se&&Ee.nodeType&&!("click"===l.type&&l.button>=1))for(;Ee!==this;Ee=Ee.parentNode||this)if(1===Ee.nodeType&&("click"!==l.type||!0!==Ee.disabled)){for(F=[],Y={},x=0;x<se;x++)void 0===Y[N=(w=d[x]).selector+" "]&&(Y[N]=w.needsContext?C(N,this).index(Ee)>-1:C.find(N,this,null,[Ee]).length),Y[N]&&F.push(w);F.length&&ue.push({elem:Ee,handlers:F})}return Ee=this,se<d.length&&ue.push({elem:Ee,handlers:d.slice(se)}),ue},addProp:function(l,d){Object.defineProperty(C.Event.prototype,l,{enumerable:!0,configurable:!0,get:ae(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(x){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(l){return l[C.expando]?l:new C.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return Kn.test(d.type)&&d.click&&ut(d,"input")&&to(d,"click",Zr),!1},trigger:function(l){var d=this||l;return Kn.test(d.type)&&d.click&&ut(d,"input")&&to(d,"click"),!0},_default:function(l){var d=l.target;return Kn.test(d.type)&&d.click&&ut(d,"input")&&G.get(d,"click")||ut(d,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},C.removeEvent=function(l,d,x){l.removeEventListener&&l.removeEventListener(d,x)},C.Event=function(l,d){if(!(this instanceof C.Event))return new C.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?Zr:sn,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&C.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:sn,isPropagationStopped:sn,isImmediatePropagationStopped:sn,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Zr,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Zr,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Zr,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(l,d){C.event.special[l]={setup:function(){return to(this,l,_o),!1},trigger:function(){return to(this,l),!0},_default:function(){return!0},delegateType:d}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){C.event.special[l]={delegateType:d,bindType:d,handle:function(x){var w,N=this,F=x.relatedTarget,Y=x.handleObj;return(!F||F!==N&&!C.contains(N,F))&&(x.type=Y.origType,w=Y.handler.apply(this,arguments),x.type=d),w}}}),C.fn.extend({on:function(l,d,x,w){return Co(this,l,d,x,w)},one:function(l,d,x,w){return Co(this,l,d,x,w,1)},off:function(l,d,x){var w,N;if(l&&l.preventDefault&&l.handleObj)return w=l.handleObj,C(l.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof l){for(N in l)this.off(N,d,l[N]);return this}return(!1===d||"function"==typeof d)&&(x=d,d=void 0),!1===x&&(x=sn),this.each(function(){C.event.remove(this,l,x,d)})}});var zt=/<script|<style|<link/i,ca=/checked\s*(?:[^=]|=\s*.checked.)/i,Mi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Wo(l,d){return ut(l,"table")&&ut(11!==d.nodeType?d:d.firstChild,"tr")&&C(l).children("tbody")[0]||l}function wo(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Dn(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function hi(l,d){var x,w,N,Y,ue,se;if(1===d.nodeType){if(G.hasData(l)&&(se=G.get(l).events))for(N in G.remove(d,"handle events"),se)for(x=0,w=se[N].length;x<w;x++)C.event.add(d,N,se[N][x]);re.hasData(l)&&(Y=re.access(l),ue=C.extend({},Y),re.set(d,ue))}}function no(l,d){var x=d.nodeName.toLowerCase();"input"===x&&Kn.test(l.type)?d.checked=l.checked:("input"===x||"textarea"===x)&&(d.defaultValue=l.defaultValue)}function Fn(l,d,x,w){d=k(d);var N,F,Y,ue,se,Ee,Fe=0,Ke=l.length,ke=Ke-1,$e=d[0],vt=ae($e);if(vt||Ke>1&&"string"==typeof $e&&!i.checkClone&&ca.test($e))return l.each(function(Ut){var St=l.eq(Ut);vt&&(d[0]=$e.call(this,Ut,St.html())),Fn(St,d,x,w)});if(Ke&&(F=(N=eo(d,l[0].ownerDocument,!1,l,w)).firstChild,1===N.childNodes.length&&(N=F),F||w)){for(ue=(Y=C.map(nr(N,"script"),wo)).length;Fe<Ke;Fe++)se=N,Fe!==ke&&(se=C.clone(se,!0,!0),ue&&C.merge(Y,nr(se,"script"))),x.call(l[Fe],se,Fe);if(ue)for(Ee=Y[Y.length-1].ownerDocument,C.map(Y,Dn),Fe=0;Fe<ue;Fe++)Gr.test((se=Y[Fe]).type||"")&&!G.access(se,"globalEval")&&C.contains(Ee,se)&&(se.src&&"module"!==(se.type||"").toLowerCase()?C._evalUrl&&!se.noModule&&C._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},Ee):ge(se.textContent.replace(Mi,""),se,Ee))}return l}function So(l,d,x){for(var w,N=d?C.filter(d,l):l,F=0;null!=(w=N[F]);F++)!x&&1===w.nodeType&&C.cleanData(nr(w)),w.parentNode&&(x&&on(w)&&bo(nr(w,"script")),w.parentNode.removeChild(w));return l}C.extend({htmlPrefilter:function(l){return l},clone:function(l,d,x){var w,N,F,Y,ue=l.cloneNode(!0),se=on(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||C.isXMLDoc(l)))for(Y=nr(ue),w=0,N=(F=nr(l)).length;w<N;w++)no(F[w],Y[w]);if(d)if(x)for(F=F||nr(l),Y=Y||nr(ue),w=0,N=F.length;w<N;w++)hi(F[w],Y[w]);else hi(l,ue);return(Y=nr(ue,"script")).length>0&&bo(Y,!se&&nr(l,"script")),ue},cleanData:function(l){for(var d,x,w,N=C.event.special,F=0;void 0!==(x=l[F]);F++)if(jt(x)){if(d=x[G.expando]){if(d.events)for(w in d.events)N[w]?C.event.remove(x,w):C.removeEvent(x,w,d.handle);x[G.expando]=void 0}x[re.expando]&&(x[re.expando]=void 0)}}}),C.fn.extend({detach:function(l){return So(this,l,!0)},remove:function(l){return So(this,l)},text:function(l){return nn(this,function(d){return void 0===d?C.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return Fn(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Wo(this,l).appendChild(l)})},prepend:function(){return Fn(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Wo(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return Fn(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Fn(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;null!=(l=this[d]);d++)1===l.nodeType&&(C.cleanData(nr(l,!1)),l.textContent="");return this},clone:function(l,d){return l=null!=l&&l,d=null==d?l:d,this.map(function(){return C.clone(this,l,d)})},html:function(l){return nn(this,function(d){var x=this[0]||{},w=0,N=this.length;if(void 0===d&&1===x.nodeType)return x.innerHTML;if("string"==typeof d&&!zt.test(d)&&!sr[(mr.exec(d)||["",""])[1].toLowerCase()]){d=C.htmlPrefilter(d);try{for(;w<N;w++)1===(x=this[w]||{}).nodeType&&(C.cleanData(nr(x,!1)),x.innerHTML=d);x=0}catch(F){}}x&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return Fn(this,arguments,function(d){var x=this.parentNode;C.inArray(this,l)<0&&(C.cleanData(nr(this)),x&&x.replaceChild(d,this))},l)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){C.fn[l]=function(x){for(var w,N=[],F=C(x),Y=F.length-1,ue=0;ue<=Y;ue++)w=ue===Y?this:this.clone(!0),C(F[ue])[d](w),M.apply(N,w.get());return this.pushStack(N)}});var Oi=new RegExp("^("+It+")(?!px)[a-z%]+$","i"),ro=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=v),d.getComputedStyle(l)},Ra=function(l,d,x){var w,N,F={};for(N in d)F[N]=l.style[N],l.style[N]=d[N];for(N in w=x.call(l),d)l.style[N]=F[N];return w},fa=new RegExp(rn.join("|"),"i");function pi(l,d,x){var w,N,F,Y,ue=l.style;return(x=x||ro(l))&&(""===(Y=x.getPropertyValue(d)||x[d])&&!on(l)&&(Y=C.style(l,d)),!i.pixelBoxStyles()&&Oi.test(Y)&&fa.test(d)&&(w=ue.width,N=ue.minWidth,F=ue.maxWidth,ue.minWidth=ue.maxWidth=ue.width=Y,Y=x.width,ue.width=w,ue.minWidth=N,ue.maxWidth=F)),void 0!==Y?Y+"":Y}function da(l,d){return{get:function(){if(!l())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function l(){if(Ee){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",en.appendChild(se).appendChild(Ee);var Fe=v.getComputedStyle(Ee);x="1%"!==Fe.top,ue=12===d(Fe.marginLeft),Ee.style.right="60%",F=36===d(Fe.right),w=36===d(Fe.width),Ee.style.position="absolute",N=12===d(Ee.offsetWidth/3),en.removeChild(se),Ee=null}}function d(Fe){return Math.round(parseFloat(Fe))}var x,w,N,F,Y,ue,se=fe.createElement("div"),Ee=fe.createElement("div");!Ee.style||(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===Ee.style.backgroundClip,C.extend(i,{boxSizingReliable:function(){return l(),w},pixelBoxStyles:function(){return l(),F},pixelPosition:function(){return l(),x},reliableMarginLeft:function(){return l(),ue},scrollboxSize:function(){return l(),N},reliableTrDimensions:function(){var Fe,Ke,ke,$e;return null==Y&&(Fe=fe.createElement("table"),Ke=fe.createElement("tr"),ke=fe.createElement("div"),Fe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ke.style.cssText="border:1px solid",Ke.style.height="1px",ke.style.height="9px",ke.style.display="block",en.appendChild(Fe).appendChild(Ke).appendChild(ke),$e=v.getComputedStyle(Ke),Y=parseInt($e.height,10)+parseInt($e.borderTopWidth,10)+parseInt($e.borderBottomWidth,10)===Ke.offsetHeight,en.removeChild(Fe)),Y}}))}();var Wt=["Webkit","Moz","ms"],To=fe.createElement("div").style,$o={};function bi(l){return C.cssProps[l]||$o[l]||(l in To?l:$o[l]=function ha(l){for(var d=l[0].toUpperCase()+l.slice(1),x=Wt.length;x--;)if((l=Wt[x]+d)in To)return l}(l)||l)}var ki=/^(none|table(?!-c[ea]).+)/,Li=/^--/,Ar={position:"absolute",visibility:"hidden",display:"block"},gi={letterSpacing:"0",fontWeight:"400"};function Da(l,d,x){var w=Vt.exec(d);return w?Math.max(0,w[2]-(x||0))+(w[3]||"px"):d}function io(l,d,x,w,N,F){var Y="width"===d?1:0,ue=0,se=0;if(x===(w?"border":"content"))return 0;for(;Y<4;Y+=2)"margin"===x&&(se+=C.css(l,x+rn[Y],!0,N)),w?("content"===x&&(se-=C.css(l,"padding"+rn[Y],!0,N)),"margin"!==x&&(se-=C.css(l,"border"+rn[Y]+"Width",!0,N))):(se+=C.css(l,"padding"+rn[Y],!0,N),"padding"!==x?se+=C.css(l,"border"+rn[Y]+"Width",!0,N):ue+=C.css(l,"border"+rn[Y]+"Width",!0,N));return!w&&F>=0&&(se+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-F-se-ue-.5))||0),se}function ve(l,d,x){var w=ro(l),F=(!i.boxSizingReliable()||x)&&"border-box"===C.css(l,"boxSizing",!1,w),Y=F,ue=pi(l,d,w),se="offset"+d[0].toUpperCase()+d.slice(1);if(Oi.test(ue)){if(!x)return ue;ue="auto"}return(!i.boxSizingReliable()&&F||!i.reliableTrDimensions()&&ut(l,"tr")||"auto"===ue||!parseFloat(ue)&&"inline"===C.css(l,"display",!1,w))&&l.getClientRects().length&&(F="border-box"===C.css(l,"boxSizing",!1,w),(Y=se in l)&&(ue=l[se])),(ue=parseFloat(ue)||0)+io(l,d,x||(F?"border":"content"),Y,w,ue)+"px"}function Wn(l,d,x,w,N){return new Wn.prototype.init(l,d,x,w,N)}C.extend({cssHooks:{opacity:{get:function(l,d){if(d){var x=pi(l,"opacity");return""===x?"1":x}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,x,w){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var N,F,Y,ue=Yt(d),se=Li.test(d),Ee=l.style;if(se||(d=bi(ue)),Y=C.cssHooks[d]||C.cssHooks[ue],void 0===x)return Y&&"get"in Y&&void 0!==(N=Y.get(l,!1,w))?N:Ee[d];if("string"==(F=typeof x)&&(N=Vt.exec(x))&&N[1]&&(x=Ur(l,d,N),F="number"),null==x||x!=x)return;"number"===F&&!se&&(x+=N&&N[3]||(C.cssNumber[ue]?"":"px")),!i.clearCloneStyle&&""===x&&0===d.indexOf("background")&&(Ee[d]="inherit"),(!Y||!("set"in Y)||void 0!==(x=Y.set(l,x,w)))&&(se?Ee.setProperty(d,x):Ee[d]=x)}},css:function(l,d,x,w){var N,F,Y,ue=Yt(d);return Li.test(d)||(d=bi(ue)),(Y=C.cssHooks[d]||C.cssHooks[ue])&&"get"in Y&&(N=Y.get(l,!0,x)),void 0===N&&(N=pi(l,d,w)),"normal"===N&&d in gi&&(N=gi[d]),""===x||x?(F=parseFloat(N),!0===x||isFinite(F)?F||0:N):N}}),C.each(["height","width"],function(l,d){C.cssHooks[d]={get:function(x,w,N){if(w)return!ki.test(C.css(x,"display"))||x.getClientRects().length&&x.getBoundingClientRect().width?ve(x,d,N):Ra(x,Ar,function(){return ve(x,d,N)})},set:function(x,w,N){var F,Y=ro(x),ue=!i.scrollboxSize()&&"absolute"===Y.position,Ee=(ue||N)&&"border-box"===C.css(x,"boxSizing",!1,Y),Fe=N?io(x,d,N,Ee,Y):0;return Ee&&ue&&(Fe-=Math.ceil(x["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(Y[d])-io(x,d,"border",!1,Y)-.5)),Fe&&(F=Vt.exec(w))&&"px"!==(F[3]||"px")&&(x.style[d]=w,w=C.css(x,d)),Da(0,w,Fe)}}}),C.cssHooks.marginLeft=da(i.reliableMarginLeft,function(l,d){if(d)return(parseFloat(pi(l,"marginLeft"))||l.getBoundingClientRect().left-Ra(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(l,d){C.cssHooks[l+d]={expand:function(x){for(var w=0,N={},F="string"==typeof x?x.split(" "):[x];w<4;w++)N[l+rn[w]+d]=F[w]||F[w-2]||F[0];return N}},"margin"!==l&&(C.cssHooks[l+d].set=Da)}),C.fn.extend({css:function(l,d){return nn(this,function(x,w,N){var F,Y,ue={},se=0;if(Array.isArray(w)){for(F=ro(x),Y=w.length;se<Y;se++)ue[w[se]]=C.css(x,w[se],!1,F);return ue}return void 0!==N?C.style(x,w,N):C.css(x,w)},l,d,arguments.length>1)}}),C.Tween=Wn,(Wn.prototype={constructor:Wn,init:function(l,d,x,w,N,F){this.elem=l,this.prop=x,this.easing=N||C.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=w,this.unit=F||(C.cssNumber[x]?"":"px")},cur:function(){var l=Wn.propHooks[this.prop];return l&&l.get?l.get(this):Wn.propHooks._default.get(this)},run:function(l){var d,x=Wn.propHooks[this.prop];return this.pos=d=this.options.duration?C.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):Wn.propHooks._default.set(this),this}}).init.prototype=Wn.prototype,(Wn.propHooks={_default:{get:function(l){var d;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(d=C.css(l.elem,l.prop,""))&&"auto"!==d?d:0},set:function(l){C.fx.step[l.prop]?C.fx.step[l.prop](l):1!==l.elem.nodeType||!C.cssHooks[l.prop]&&null==l.elem.style[bi(l.prop)]?l.elem[l.prop]=l.now:C.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=Wn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},C.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},C.fx=Wn.prototype.init,C.fx.step={};var vi,oo,ft=/^(?:toggle|show|hide)$/,_i=/queueHooks$/;function Ni(){oo&&(!1===fe.hidden&&v.requestAnimationFrame?v.requestAnimationFrame(Ni):v.setTimeout(Ni,C.fx.interval),C.fx.tick())}function Ri(){return v.setTimeout(function(){vi=void 0}),vi=Date.now()}function ao(l,d){var x,w=0,N={height:l};for(d=d?1:0;w<4;w+=2-d)N["margin"+(x=rn[w])]=N["padding"+x]=l;return d&&(N.opacity=N.width=l),N}function Zn(l,d,x){for(var w,N=(pr.tweeners[d]||[]).concat(pr.tweeners["*"]),F=0,Y=N.length;F<Y;F++)if(w=N[F].call(x,d,l))return w}function pr(l,d,x){var w,N,F=0,Y=pr.prefilters.length,ue=C.Deferred().always(function(){delete se.elem}),se=function(){if(N)return!1;for(var Ke=vi||Ri(),ke=Math.max(0,Ee.startTime+Ee.duration-Ke),vt=1-(ke/Ee.duration||0),Ut=0,St=Ee.tweens.length;Ut<St;Ut++)Ee.tweens[Ut].run(vt);return ue.notifyWith(l,[Ee,vt,ke]),vt<1&&St?ke:(St||ue.notifyWith(l,[Ee,1,0]),ue.resolveWith(l,[Ee]),!1)},Ee=ue.promise({elem:l,props:C.extend({},d),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},x),originalProperties:d,originalOptions:x,startTime:vi||Ri(),duration:x.duration,tweens:[],createTween:function(Ke,ke){var $e=C.Tween(l,Ee.opts,Ke,ke,Ee.opts.specialEasing[Ke]||Ee.opts.easing);return Ee.tweens.push($e),$e},stop:function(Ke){var ke=0,$e=Ke?Ee.tweens.length:0;if(N)return this;for(N=!0;ke<$e;ke++)Ee.tweens[ke].run(1);return Ke?(ue.notifyWith(l,[Ee,1,0]),ue.resolveWith(l,[Ee,Ke])):ue.rejectWith(l,[Ee,Ke]),this}}),Fe=Ee.props;for(function pa(l,d){var x,w,N,F,Y;for(x in l)if(N=d[w=Yt(x)],F=l[x],Array.isArray(F)&&(N=F[1],F=l[x]=F[0]),x!==w&&(l[w]=F,delete l[x]),(Y=C.cssHooks[w])&&"expand"in Y)for(x in F=Y.expand(F),delete l[w],F)x in l||(l[x]=F[x],d[x]=N);else d[w]=N}(Fe,Ee.opts.specialEasing);F<Y;F++)if(w=pr.prefilters[F].call(Ee,l,Fe,Ee.opts))return ae(w.stop)&&(C._queueHooks(Ee.elem,Ee.opts.queue).stop=w.stop.bind(w)),w;return C.map(Fe,Zn,Ee),ae(Ee.opts.start)&&Ee.opts.start.call(l,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),C.fx.timer(C.extend(se,{elem:l,anim:Ee,queue:Ee.opts.queue})),Ee}C.Animation=C.extend(pr,{tweeners:{"*":[function(l,d){var x=this.createTween(l,d);return Ur(x.elem,l,Vt.exec(d),x),x}]},tweener:function(l,d){ae(l)?(d=l,l=["*"]):l=l.match(gn);for(var x,w=0,N=l.length;w<N;w++)(pr.tweeners[x=l[w]]=pr.tweeners[x]||[]).unshift(d)},prefilters:[function Fa(l,d,x){var w,N,F,Y,ue,se,Ee,Fe,Ke="width"in d||"height"in d,ke=this,$e={},vt=l.style,Ut=l.nodeType&&Hn(l),St=G.get(l,"fxshow");for(w in x.queue||(null==(Y=C._queueHooks(l,"fx")).unqueued&&(Y.unqueued=0,ue=Y.empty.fire,Y.empty.fire=function(){Y.unqueued||ue()}),Y.unqueued++,ke.always(function(){ke.always(function(){Y.unqueued--,C.queue(l,"fx").length||Y.empty.fire()})})),d)if(ft.test(N=d[w])){if(delete d[w],F=F||"toggle"===N,N===(Ut?"hide":"show")){if("show"!==N||!St||void 0===St[w])continue;Ut=!0}$e[w]=St&&St[w]||C.style(l,w)}if((se=!C.isEmptyObject(d))||!C.isEmptyObject($e))for(w in Ke&&1===l.nodeType&&(x.overflow=[vt.overflow,vt.overflowX,vt.overflowY],null==(Ee=St&&St.display)&&(Ee=G.get(l,"display")),"none"===(Fe=C.css(l,"display"))&&(Ee?Fe=Ee:(jn([l],!0),Ee=l.style.display||Ee,Fe=C.css(l,"display"),jn([l]))),("inline"===Fe||"inline-block"===Fe&&null!=Ee)&&"none"===C.css(l,"float")&&(se||(ke.done(function(){vt.display=Ee}),null==Ee&&(Ee="none"===(Fe=vt.display)?"":Fe)),vt.display="inline-block")),x.overflow&&(vt.overflow="hidden",ke.always(function(){vt.overflow=x.overflow[0],vt.overflowX=x.overflow[1],vt.overflowY=x.overflow[2]})),se=!1,$e)se||(St?"hidden"in St&&(Ut=St.hidden):St=G.access(l,"fxshow",{display:Ee}),F&&(St.hidden=!Ut),Ut&&jn([l],!0),ke.done(function(){for(w in Ut||jn([l]),G.remove(l,"fxshow"),$e)C.style(l,w,$e[w])})),se=Zn(Ut?St[w]:0,w,ke),w in St||(St[w]=se.start,Ut&&(se.end=se.start,se.start=0))}],prefilter:function(l,d){d?pr.prefilters.unshift(l):pr.prefilters.push(l)}}),C.speed=function(l,d,x){var w=l&&"object"==typeof l?C.extend({},l):{complete:x||!x&&d||ae(l)&&l,duration:l,easing:x&&d||d&&!ae(d)&&d};return C.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in C.fx.speeds?C.fx.speeds[w.duration]:C.fx.speeds._default),(null==w.queue||!0===w.queue)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){ae(w.old)&&w.old.call(this),w.queue&&C.dequeue(this,w.queue)},w},C.fn.extend({fadeTo:function(l,d,x,w){return this.filter(Hn).css("opacity",0).show().end().animate({opacity:d},l,x,w)},animate:function(l,d,x,w){var N=C.isEmptyObject(l),F=C.speed(d,x,w),Y=function(){var ue=pr(this,C.extend({},l),F);(N||G.get(this,"finish"))&&ue.stop(!0)};return Y.finish=Y,N||!1===F.queue?this.each(Y):this.queue(F.queue,Y)},stop:function(l,d,x){var w=function(N){var F=N.stop;delete N.stop,F(x)};return"string"!=typeof l&&(x=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var N=!0,F=null!=l&&l+"queueHooks",Y=C.timers,ue=G.get(this);if(F)ue[F]&&ue[F].stop&&w(ue[F]);else for(F in ue)ue[F]&&ue[F].stop&&_i.test(F)&&w(ue[F]);for(F=Y.length;F--;)Y[F].elem===this&&(null==l||Y[F].queue===l)&&(Y[F].anim.stop(x),N=!1,Y.splice(F,1));(N||!x)&&C.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var d,x=G.get(this),w=x[l+"queue"],N=x[l+"queueHooks"],F=C.timers,Y=w?w.length:0;for(x.finish=!0,C.queue(this,l,[]),N&&N.stop&&N.stop.call(this,!0),d=F.length;d--;)F[d].elem===this&&F[d].queue===l&&(F[d].anim.stop(!0),F.splice(d,1));for(d=0;d<Y;d++)w[d]&&w[d].finish&&w[d].finish.call(this);delete x.finish})}}),C.each(["toggle","show","hide"],function(l,d){var x=C.fn[d];C.fn[d]=function(w,N,F){return null==w||"boolean"==typeof w?x.apply(this,arguments):this.animate(ao(d,!0),w,N,F)}}),C.each({slideDown:ao("show"),slideUp:ao("hide"),slideToggle:ao("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){C.fn[l]=function(x,w,N){return this.animate(d,x,w,N)}}),C.timers=[],C.fx.tick=function(){var l,d=0,x=C.timers;for(vi=Date.now();d<x.length;d++)!(l=x[d])()&&x[d]===l&&x.splice(d--,1);x.length||C.fx.stop(),vi=void 0},C.fx.timer=function(l){C.timers.push(l),C.fx.start()},C.fx.interval=13,C.fx.start=function(){oo||(oo=!0,Ni())},C.fx.stop=function(){oo=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(l,d){return l=C.fx&&C.fx.speeds[l]||l,this.queue(d=d||"fx",function(x,w){var N=v.setTimeout(x,l);w.stop=function(){v.clearTimeout(N)}})},function(){var l=fe.createElement("input"),x=fe.createElement("select").appendChild(fe.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=x.selected,(l=fe.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var Wr,yr=C.expr.attrHandle;C.fn.extend({attr:function(l,d){return nn(this,C.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){C.removeAttr(this,l)})}}),C.extend({attr:function(l,d,x){var w,N,F=l.nodeType;if(3!==F&&8!==F&&2!==F)return void 0===l.getAttribute?C.prop(l,d,x):((1!==F||!C.isXMLDoc(l))&&(N=C.attrHooks[d.toLowerCase()]||(C.expr.match.bool.test(d)?Wr:void 0)),void 0!==x?null===x?void C.removeAttr(l,d):N&&"set"in N&&void 0!==(w=N.set(l,x,d))?w:(l.setAttribute(d,x+""),x):N&&"get"in N&&null!==(w=N.get(l,d))?w:null==(w=C.find.attr(l,d))?void 0:w)},attrHooks:{type:{set:function(l,d){if(!i.radioValue&&"radio"===d&&ut(l,"input")){var x=l.value;return l.setAttribute("type",d),x&&(l.value=x),d}}}},removeAttr:function(l,d){var x,w=0,N=d&&d.match(gn);if(N&&1===l.nodeType)for(;x=N[w++];)l.removeAttribute(x)}}),Wr={set:function(l,d,x){return!1===d?C.removeAttr(l,x):l.setAttribute(x,x),x}},C.each(C.expr.match.bool.source.match(/\w+/g),function(l,d){var x=yr[d]||C.find.attr;yr[d]=function(w,N,F){var Y,ue,se=N.toLowerCase();return F||(ue=yr[se],yr[se]=Y,Y=null!=x(w,N,F)?se:null,yr[se]=ue),Y}});var Yo=/^(?:input|select|textarea|button)$/i,Di=/^(?:a|area)$/i;function qr(l){return(l.match(gn)||[]).join(" ")}function rt(l){return l.getAttribute&&l.getAttribute("class")||""}function Eo(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(gn)||[]}C.fn.extend({prop:function(l,d){return nn(this,C.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[C.propFix[l]||l]})}}),C.extend({prop:function(l,d,x){var w,N,F=l.nodeType;if(3!==F&&8!==F&&2!==F)return(1!==F||!C.isXMLDoc(l))&&(N=C.propHooks[d=C.propFix[d]||d]),void 0!==x?N&&"set"in N&&void 0!==(w=N.set(l,x,d))?w:l[d]=x:N&&"get"in N&&null!==(w=N.get(l,d))?w:l[d]},propHooks:{tabIndex:{get:function(l){var d=C.find.attr(l,"tabindex");return d?parseInt(d,10):Yo.test(l.nodeName)||Di.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(C.propHooks.selected={get:function(l){return null},set:function(l){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(l){var d,x,w,N,F,Y,ue,se=0;if(ae(l))return this.each(function(Ee){C(this).addClass(l.call(this,Ee,rt(this)))});if((d=Eo(l)).length)for(;x=this[se++];)if(N=rt(x),w=1===x.nodeType&&" "+qr(N)+" "){for(Y=0;F=d[Y++];)w.indexOf(" "+F+" ")<0&&(w+=F+" ");N!==(ue=qr(w))&&x.setAttribute("class",ue)}return this},removeClass:function(l){var d,x,w,N,F,Y,ue,se=0;if(ae(l))return this.each(function(Ee){C(this).removeClass(l.call(this,Ee,rt(this)))});if(!arguments.length)return this.attr("class","");if((d=Eo(l)).length)for(;x=this[se++];)if(N=rt(x),w=1===x.nodeType&&" "+qr(N)+" "){for(Y=0;F=d[Y++];)for(;w.indexOf(" "+F+" ")>-1;)w=w.replace(" "+F+" "," ");N!==(ue=qr(w))&&x.setAttribute("class",ue)}return this},toggleClass:function(l,d){var x=typeof l,w="string"===x||Array.isArray(l);return"boolean"==typeof d&&w?d?this.addClass(l):this.removeClass(l):ae(l)?this.each(function(N){C(this).toggleClass(l.call(this,N,rt(this),d),d)}):this.each(function(){var N,F,Y,ue;if(w)for(F=0,Y=C(this),ue=Eo(l);N=ue[F++];)Y.hasClass(N)?Y.removeClass(N):Y.addClass(N);else(void 0===l||"boolean"===x)&&((N=rt(this))&&G.set(this,"__className__",N),this.setAttribute&&this.setAttribute("class",N||!1===l?"":G.get(this,"__className__")||""))})},hasClass:function(l){var d,x,w=0;for(d=" "+l+" ";x=this[w++];)if(1===x.nodeType&&(" "+qr(rt(x))+" ").indexOf(d)>-1)return!0;return!1}});var Po=/\r/g;C.fn.extend({val:function(l){var d,x,w,N=this[0];return arguments.length?(w=ae(l),this.each(function(F){var Y;1===this.nodeType&&(null==(Y=w?l.call(this,F,C(this).val()):l)?Y="":"number"==typeof Y?Y+="":Array.isArray(Y)&&(Y=C.map(Y,function(ue){return null==ue?"":ue+""})),(!(d=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])||!("set"in d)||void 0===d.set(this,Y,"value"))&&(this.value=Y))})):N?(d=C.valHooks[N.type]||C.valHooks[N.nodeName.toLowerCase()])&&"get"in d&&void 0!==(x=d.get(N,"value"))?x:"string"==typeof(x=N.value)?x.replace(Po,""):null==x?"":x:void 0}}),C.extend({valHooks:{option:{get:function(l){var d=C.find.attr(l,"value");return null!=d?d:qr(C.text(l))}},select:{get:function(l){var d,x,w,N=l.options,F=l.selectedIndex,Y="select-one"===l.type,ue=Y?null:[],se=Y?F+1:N.length;for(w=F<0?se:Y?F:0;w<se;w++)if(((x=N[w]).selected||w===F)&&!x.disabled&&(!x.parentNode.disabled||!ut(x.parentNode,"optgroup"))){if(d=C(x).val(),Y)return d;ue.push(d)}return ue},set:function(l,d){for(var x,w,N=l.options,F=C.makeArray(d),Y=N.length;Y--;)((w=N[Y]).selected=C.inArray(C.valHooks.option.get(w),F)>-1)&&(x=!0);return x||(l.selectedIndex=-1),F}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=C.inArray(C(l).val(),d)>-1}},i.checkOn||(C.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in v;var Mr=/^(?:focusinfocus|focusoutblur)$/,Ci=function(l){l.stopPropagation()};C.extend(C.event,{trigger:function(l,d,x,w){var N,F,Y,ue,se,Ee,Fe,Ke,ke=[x||fe],$e=X.call(l,"type")?l.type:l,vt=X.call(l,"namespace")?l.namespace.split("."):[];if(F=Ke=Y=x=x||fe,3!==x.nodeType&&8!==x.nodeType&&!Mr.test($e+C.event.triggered)&&($e.indexOf(".")>-1&&(vt=$e.split("."),$e=vt.shift(),vt.sort()),se=$e.indexOf(":")<0&&"on"+$e,(l=l[C.expando]?l:new C.Event($e,"object"==typeof l&&l)).isTrigger=w?2:3,l.namespace=vt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+vt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=x),d=null==d?[l]:C.makeArray(d,[l]),Fe=C.event.special[$e]||{},w||!Fe.trigger||!1!==Fe.trigger.apply(x,d))){if(!w&&!Fe.noBubble&&!he(x)){for(Mr.test((ue=Fe.delegateType||$e)+$e)||(F=F.parentNode);F;F=F.parentNode)ke.push(F),Y=F;Y===(x.ownerDocument||fe)&&ke.push(Y.defaultView||Y.parentWindow||v)}for(N=0;(F=ke[N++])&&!l.isPropagationStopped();)Ke=F,l.type=N>1?ue:Fe.bindType||$e,(Ee=(G.get(F,"events")||Object.create(null))[l.type]&&G.get(F,"handle"))&&Ee.apply(F,d),(Ee=se&&F[se])&&Ee.apply&&jt(F)&&(l.result=Ee.apply(F,d),!1===l.result&&l.preventDefault());return l.type=$e,!w&&!l.isDefaultPrevented()&&(!Fe._default||!1===Fe._default.apply(ke.pop(),d))&&jt(x)&&se&&ae(x[$e])&&!he(x)&&((Y=x[se])&&(x[se]=null),C.event.triggered=$e,l.isPropagationStopped()&&Ke.addEventListener($e,Ci),x[$e](),l.isPropagationStopped()&&Ke.removeEventListener($e,Ci),C.event.triggered=void 0,Y&&(x[se]=Y)),l.result}},simulate:function(l,d,x){var w=C.extend(new C.Event,x,{type:l,isSimulated:!0});C.event.trigger(w,null,d)}}),C.fn.extend({trigger:function(l,d){return this.each(function(){C.event.trigger(l,d,this)})},triggerHandler:function(l,d){var x=this[0];if(x)return C.event.trigger(l,d,x,!0)}}),i.focusin||C.each({focus:"focusin",blur:"focusout"},function(l,d){var x=function(w){C.event.simulate(d,w.target,C.event.fix(w))};C.event.special[d]={setup:function(){var w=this.ownerDocument||this.document||this,N=G.access(w,d);N||w.addEventListener(l,x,!0),G.access(w,d,(N||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,N=G.access(w,d)-1;N?G.access(w,d,N):(w.removeEventListener(l,x,!0),G.remove(w,d))}}});var ln=v.location,Fi={guid:Date.now()},ga=/\?/;C.parseXML=function(l){var d,x;if(!l||"string"!=typeof l)return null;try{d=(new v.DOMParser).parseFromString(l,"text/xml")}catch(w){}return x=d&&d.getElementsByTagName("parsererror")[0],(!d||x)&&C.error("Invalid XML: "+(x?C.map(x.childNodes,function(w){return w.textContent}).join("\n"):l)),d};var Xo=/\[\]$/,Io=/\r?\n/g,Vi=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;function Bi(l,d,x,w){var N;if(Array.isArray(d))C.each(d,function(F,Y){x||Xo.test(l)?w(l,Y):Bi(l+"["+("object"==typeof Y&&null!=Y?F:"")+"]",Y,x,w)});else if(x||"object"!==Te(d))w(l,d);else for(N in d)Bi(l+"["+N+"]",d[N],x,w)}C.param=function(l,d){var x,w=[],N=function(F,Y){var ue=ae(Y)?Y():Y;w[w.length]=encodeURIComponent(F)+"="+encodeURIComponent(null==ue?"":ue)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!C.isPlainObject(l))C.each(l,function(){N(this.name,this.value)});else for(x in l)Bi(x,l[x],d,N);return w.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=C.prop(this,"elements");return l?C.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!C(this).is(":disabled")&&dn.test(this.nodeName)&&!Vi.test(l)&&(this.checked||!Kn.test(l))}).map(function(l,d){var x=C(this).val();return null==x?null:Array.isArray(x)?C.map(x,function(w){return{name:d.name,value:w.replace(Io,"\r\n")}}):{name:d.name,value:x.replace(Io,"\r\n")}}).get()}});var Ct=/%20/g,ei=/#.*$/,wi=/([?&])_=[^&]*/,rr=/^(.*?):[ \t]*([^\r\n]*)$/gm,_r=/^(?:GET|HEAD)$/,Ko=/^\/\//,Or={},so={},Hi="*/".concat("*"),ji=fe.createElement("a");function Ba(l){return function(d,x){"string"!=typeof d&&(x=d,d="*");var w,N=0,F=d.toLowerCase().match(gn)||[];if(ae(x))for(;w=F[N++];)"+"===w[0]?(w=w.slice(1)||"*",(l[w]=l[w]||[]).unshift(x)):(l[w]=l[w]||[]).push(x)}}function Qo(l,d,x,w){var N={},F=l===so;function Y(ue){var se;return N[ue]=!0,C.each(l[ue]||[],function(Ee,Fe){var Ke=Fe(d,x,w);return"string"!=typeof Ke||F||N[Ke]?F?!(se=Ke):void 0:(d.dataTypes.unshift(Ke),Y(Ke),!1)}),se}return Y(d.dataTypes[0])||!N["*"]&&Y("*")}function Xt(l,d){var x,w,N=C.ajaxSettings.flatOptions||{};for(x in d)void 0!==d[x]&&((N[x]?l:w||(w={}))[x]=d[x]);return w&&C.extend(!0,l,w),l}ji.href=ln.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ln.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ln.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Xt(Xt(l,C.ajaxSettings),d):Xt(C.ajaxSettings,l)},ajaxPrefilter:Ba(Or),ajaxTransport:Ba(so),ajax:function(l,d){"object"==typeof l&&(d=l,l=void 0);var x,w,N,F,Y,ue,se,Ee,Fe,Ke,ke=C.ajaxSetup({},d=d||{}),$e=ke.context||ke,vt=ke.context&&($e.nodeType||$e.jquery)?C($e):C.event,Ut=C.Deferred(),St=C.Callbacks("once memory"),In=ke.statusCode||{},Vn={},kr={},At="canceled",Tt={readyState:0,getResponseHeader:function(bn){var Re;if(se){if(!F)for(F={};Re=rr.exec(N);)F[Re[1].toLowerCase()+" "]=(F[Re[1].toLowerCase()+" "]||[]).concat(Re[2]);Re=F[bn.toLowerCase()+" "]}return null==Re?null:Re.join(", ")},getAllResponseHeaders:function(){return se?N:null},setRequestHeader:function(bn,Re){return null==se&&(bn=kr[bn.toLowerCase()]=kr[bn.toLowerCase()]||bn,Vn[bn]=Re),this},overrideMimeType:function(bn){return null==se&&(ke.mimeType=bn),this},statusCode:function(bn){var Re;if(bn)if(se)Tt.always(bn[Tt.status]);else for(Re in bn)In[Re]=[In[Re],bn[Re]];return this},abort:function(bn){var Re=bn||At;return x&&x.abort(Re),Cr(0,Re),this}};if(Ut.promise(Tt),ke.url=((l||ke.url||ln.href)+"").replace(Ko,ln.protocol+"//"),ke.type=d.method||d.type||ke.method||ke.type,ke.dataTypes=(ke.dataType||"*").toLowerCase().match(gn)||[""],null==ke.crossDomain){ue=fe.createElement("a");try{ue.href=ke.url,ue.href=ue.href,ke.crossDomain=ji.protocol+"//"+ji.host!=ue.protocol+"//"+ue.host}catch(bn){ke.crossDomain=!0}}if(ke.data&&ke.processData&&"string"!=typeof ke.data&&(ke.data=C.param(ke.data,ke.traditional)),Qo(Or,ke,d,Tt),se)return Tt;for(Fe in(Ee=C.event&&ke.global)&&0==C.active++&&C.event.trigger("ajaxStart"),ke.type=ke.type.toUpperCase(),ke.hasContent=!_r.test(ke.type),w=ke.url.replace(ei,""),ke.hasContent?ke.data&&ke.processData&&0===(ke.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ke.data=ke.data.replace(Ct,"+")):(Ke=ke.url.slice(w.length),ke.data&&(ke.processData||"string"==typeof ke.data)&&(w+=(ga.test(w)?"&":"?")+ke.data,delete ke.data),!1===ke.cache&&(w=w.replace(wi,"$1"),Ke=(ga.test(w)?"&":"?")+"_="+Fi.guid+++Ke),ke.url=w+Ke),ke.ifModified&&(C.lastModified[w]&&Tt.setRequestHeader("If-Modified-Since",C.lastModified[w]),C.etag[w]&&Tt.setRequestHeader("If-None-Match",C.etag[w])),(ke.data&&ke.hasContent&&!1!==ke.contentType||d.contentType)&&Tt.setRequestHeader("Content-Type",ke.contentType),Tt.setRequestHeader("Accept",ke.dataTypes[0]&&ke.accepts[ke.dataTypes[0]]?ke.accepts[ke.dataTypes[0]]+("*"!==ke.dataTypes[0]?", "+Hi+"; q=0.01":""):ke.accepts["*"]),ke.headers)Tt.setRequestHeader(Fe,ke.headers[Fe]);if(ke.beforeSend&&(!1===ke.beforeSend.call($e,Tt,ke)||se))return Tt.abort();if(At="abort",St.add(ke.complete),Tt.done(ke.success),Tt.fail(ke.error),x=Qo(so,ke,d,Tt)){if(Tt.readyState=1,Ee&&vt.trigger("ajaxSend",[Tt,ke]),se)return Tt;ke.async&&ke.timeout>0&&(Y=v.setTimeout(function(){Tt.abort("timeout")},ke.timeout));try{se=!1,x.send(Vn,Cr)}catch(bn){if(se)throw bn;Cr(-1,bn)}}else Cr(-1,"No Transport");function Cr(bn,Re,wr,Fr){var $r,mi,Yr,$n,zi,Vr=Re;se||(se=!0,Y&&v.clearTimeout(Y),x=void 0,N=Fr||"",Tt.readyState=bn>0?4:0,$r=bn>=200&&bn<300||304===bn,wr&&($n=function wn(l,d,x){for(var w,N,F,Y,ue=l.contents,se=l.dataTypes;"*"===se[0];)se.shift(),void 0===w&&(w=l.mimeType||d.getResponseHeader("Content-Type"));if(w)for(N in ue)if(ue[N]&&ue[N].test(w)){se.unshift(N);break}if(se[0]in x)F=se[0];else{for(N in x){if(!se[0]||l.converters[N+" "+se[0]]){F=N;break}Y||(Y=N)}F=F||Y}if(F)return F!==se[0]&&se.unshift(F),x[F]}(ke,Tt,wr)),!$r&&C.inArray("script",ke.dataTypes)>-1&&C.inArray("json",ke.dataTypes)<0&&(ke.converters["text script"]=function(){}),$n=function Si(l,d,x,w){var N,F,Y,ue,se,Ee={},Fe=l.dataTypes.slice();if(Fe[1])for(Y in l.converters)Ee[Y.toLowerCase()]=l.converters[Y];for(F=Fe.shift();F;)if(l.responseFields[F]&&(x[l.responseFields[F]]=d),!se&&w&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),se=F,F=Fe.shift())if("*"===F)F=se;else if("*"!==se&&se!==F){if(!(Y=Ee[se+" "+F]||Ee["* "+F]))for(N in Ee)if((ue=N.split(" "))[1]===F&&(Y=Ee[se+" "+ue[0]]||Ee["* "+ue[0]])){!0===Y?Y=Ee[N]:!0!==Ee[N]&&(F=ue[0],Fe.unshift(ue[1]));break}if(!0!==Y)if(Y&&l.throws)d=Y(d);else try{d=Y(d)}catch(Ke){return{state:"parsererror",error:Y?Ke:"No conversion from "+se+" to "+F}}}return{state:"success",data:d}}(ke,$n,Tt,$r),$r?(ke.ifModified&&((zi=Tt.getResponseHeader("Last-Modified"))&&(C.lastModified[w]=zi),(zi=Tt.getResponseHeader("etag"))&&(C.etag[w]=zi)),204===bn||"HEAD"===ke.type?Vr="nocontent":304===bn?Vr="notmodified":(Vr=$n.state,mi=$n.data,$r=!(Yr=$n.error))):(Yr=Vr,(bn||!Vr)&&(Vr="error",bn<0&&(bn=0))),Tt.status=bn,Tt.statusText=(Re||Vr)+"",$r?Ut.resolveWith($e,[mi,Vr,Tt]):Ut.rejectWith($e,[Tt,Vr,Yr]),Tt.statusCode(In),In=void 0,Ee&&vt.trigger($r?"ajaxSuccess":"ajaxError",[Tt,ke,$r?mi:Yr]),St.fireWith($e,[Tt,Vr]),Ee&&(vt.trigger("ajaxComplete",[Tt,ke]),--C.active||C.event.trigger("ajaxStop")))}return Tt},getJSON:function(l,d,x){return C.get(l,d,x,"json")},getScript:function(l,d){return C.get(l,void 0,d,"script")}}),C.each(["get","post"],function(l,d){C[d]=function(x,w,N,F){return ae(w)&&(F=F||N,N=w,w=void 0),C.ajax(C.extend({url:x,type:d,dataType:F,data:w,success:N},C.isPlainObject(x)&&x))}}),C.ajaxPrefilter(function(l){var d;for(d in l.headers)"content-type"===d.toLowerCase()&&(l.contentType=l.headers[d]||"")}),C._evalUrl=function(l,d,x){return C.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){C.globalEval(w,d,x)}})},C.fn.extend({wrapAll:function(l){var d;return this[0]&&(ae(l)&&(l=l.call(this[0])),d=C(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(l){return ae(l)?this.each(function(d){C(this).wrapInner(l.call(this,d))}):this.each(function(){var d=C(this),x=d.contents();x.length?x.wrapAll(l):d.append(l)})},wrap:function(l){var d=ae(l);return this.each(function(x){C(this).wrapAll(d?l.call(this,x):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(l){return!C.expr.pseudos.visible(l)},C.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new v.XMLHttpRequest}catch(l){}};var Ao={0:200,1223:204},R=C.ajaxSettings.xhr();i.cors=!!R&&"withCredentials"in R,i.ajax=R=!!R,C.ajaxTransport(function(l){var d,x;if(i.cors||R&&!l.crossDomain)return{send:function(w,N){var F,Y=l.xhr();if(Y.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(F in l.xhrFields)Y[F]=l.xhrFields[F];for(F in l.mimeType&&Y.overrideMimeType&&Y.overrideMimeType(l.mimeType),!l.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest"),w)Y.setRequestHeader(F,w[F]);d=function(ue){return function(){d&&(d=x=Y.onload=Y.onerror=Y.onabort=Y.ontimeout=Y.onreadystatechange=null,"abort"===ue?Y.abort():"error"===ue?"number"!=typeof Y.status?N(0,"error"):N(Y.status,Y.statusText):N(Ao[Y.status]||Y.status,Y.statusText,"text"!==(Y.responseType||"text")||"string"!=typeof Y.responseText?{binary:Y.response}:{text:Y.responseText},Y.getAllResponseHeaders()))}},Y.onload=d(),x=Y.onerror=Y.ontimeout=d("error"),void 0!==Y.onabort?Y.onabort=x:Y.onreadystatechange=function(){4===Y.readyState&&v.setTimeout(function(){d&&x()})},d=d("abort");try{Y.send(l.hasContent&&l.data||null)}catch(ue){if(d)throw ue}},abort:function(){d&&d()}}}),C.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return C.globalEval(l),l}}}),C.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),C.ajaxTransport("script",function(l){var d,x;if(l.crossDomain||l.scriptAttrs)return{send:function(w,N){d=C("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",x=function(F){d.remove(),x=null,F&&N("error"===F.type?404:200,F.type)}),fe.head.appendChild(d[0])},abort:function(){x&&x()}}});var l,Q=[],oe=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Q.pop()||C.expando+"_"+Fi.guid++;return this[l]=!0,l}}),C.ajaxPrefilter("json jsonp",function(l,d,x){var w,N,F,Y=!1!==l.jsonp&&(oe.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&oe.test(l.data)&&"data");if(Y||"jsonp"===l.dataTypes[0])return w=l.jsonpCallback=ae(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,Y?l[Y]=l[Y].replace(oe,"$1"+w):!1!==l.jsonp&&(l.url+=(ga.test(l.url)?"&":"?")+l.jsonp+"="+w),l.converters["script json"]=function(){return F||C.error(w+" was not called"),F[0]},l.dataTypes[0]="json",N=v[w],v[w]=function(){F=arguments},x.always(function(){void 0===N?C(v).removeProp(w):v[w]=N,l[w]&&(l.jsonpCallback=d.jsonpCallback,Q.push(w)),F&&ae(N)&&N(F[0]),F=N=void 0}),"script"}),i.createHTMLDocument=((l=fe.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),C.parseHTML=function(l,d,x){return"string"!=typeof l?[]:("boolean"==typeof d&&(x=d,d=!1),d||(i.createHTMLDocument?((w=(d=fe.implementation.createHTMLDocument("")).createElement("base")).href=fe.location.href,d.head.appendChild(w)):d=fe),F=!x&&[],(N=bt.exec(l))?[d.createElement(N[1])]:(N=eo([l],d,F),F&&F.length&&C(F).remove(),C.merge([],N.childNodes)));var w,N,F},C.fn.load=function(l,d,x){var w,N,F,Y=this,ue=l.indexOf(" ");return ue>-1&&(w=qr(l.slice(ue)),l=l.slice(0,ue)),ae(d)?(x=d,d=void 0):d&&"object"==typeof d&&(N="POST"),Y.length>0&&C.ajax({url:l,type:N||"GET",dataType:"html",data:d}).done(function(se){F=arguments,Y.html(w?C("<div>").append(C.parseHTML(se)).find(w):se)}).always(x&&function(se,Ee){Y.each(function(){x.apply(this,F||[se.responseText,Ee,se])})}),this},C.expr.pseudos.animated=function(l){return C.grep(C.timers,function(d){return l===d.elem}).length},C.offset={setOffset:function(l,d,x){var w,N,F,Y,ue,se,Fe=C.css(l,"position"),Ke=C(l),ke={};"static"===Fe&&(l.style.position="relative"),ue=Ke.offset(),F=C.css(l,"top"),se=C.css(l,"left"),("absolute"===Fe||"fixed"===Fe)&&(F+se).indexOf("auto")>-1?(Y=(w=Ke.position()).top,N=w.left):(Y=parseFloat(F)||0,N=parseFloat(se)||0),ae(d)&&(d=d.call(l,x,C.extend({},ue))),null!=d.top&&(ke.top=d.top-ue.top+Y),null!=d.left&&(ke.left=d.left-ue.left+N),"using"in d?d.using.call(l,ke):Ke.css(ke)}},C.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(N){C.offset.setOffset(this,l,N)});var d,x,w=this[0];return w?w.getClientRects().length?{top:(d=w.getBoundingClientRect()).top+(x=w.ownerDocument.defaultView).pageYOffset,left:d.left+x.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,d,x,w=this[0],N={top:0,left:0};if("fixed"===C.css(w,"position"))d=w.getBoundingClientRect();else{for(d=this.offset(),x=w.ownerDocument,l=w.offsetParent||x.documentElement;l&&(l===x.body||l===x.documentElement)&&"static"===C.css(l,"position");)l=l.parentNode;l&&l!==w&&1===l.nodeType&&((N=C(l).offset()).top+=C.css(l,"borderTopWidth",!0),N.left+=C.css(l,"borderLeftWidth",!0))}return{top:d.top-N.top-C.css(w,"marginTop",!0),left:d.left-N.left-C.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===C.css(l,"position");)l=l.offsetParent;return l||en})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var x="pageYOffset"===d;C.fn[l]=function(w){return nn(this,function(N,F,Y){var ue;if(he(N)?ue=N:9===N.nodeType&&(ue=N.defaultView),void 0===Y)return ue?ue[d]:N[F];ue?ue.scrollTo(x?ue.pageXOffset:Y,x?Y:ue.pageYOffset):N[F]=Y},l,w,arguments.length)}}),C.each(["top","left"],function(l,d){C.cssHooks[d]=da(i.pixelPosition,function(x,w){if(w)return w=pi(x,d),Oi.test(w)?C(x).position()[d]+"px":w})}),C.each({Height:"height",Width:"width"},function(l,d){C.each({padding:"inner"+l,content:d,"":"outer"+l},function(x,w){C.fn[w]=function(N,F){var Y=arguments.length&&(x||"boolean"!=typeof N),ue=x||(!0===N||!0===F?"margin":"border");return nn(this,function(se,Ee,Fe){var Ke;return he(se)?0===w.indexOf("outer")?se["inner"+l]:se.document.documentElement["client"+l]:9===se.nodeType?(Ke=se.documentElement,Math.max(se.body["scroll"+l],Ke["scroll"+l],se.body["offset"+l],Ke["offset"+l],Ke["client"+l])):void 0===Fe?C.css(se,Ee,ue):C.style(se,Ee,Fe,ue)},d,Y?N:void 0,Y)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){C.fn[d]=function(x){return this.on(d,x)}}),C.fn.extend({bind:function(l,d,x){return this.on(l,null,d,x)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,x,w){return this.on(d,l,x,w)},undelegate:function(l,d,x){return 1===arguments.length?this.off(l,"**"):this.off(d,l||"**",x)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){C.fn[d]=function(x,w){return arguments.length>0?this.on(d,null,x,w):this.trigger(d)}});var de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(l,d){var x,w,N;if("string"==typeof d&&(x=l[d],d=l,l=x),ae(l))return w=A.call(arguments,2),N=function(){return l.apply(d||this,w.concat(A.call(arguments)))},N.guid=l.guid=l.guid||C.guid++,N},C.holdReady=function(l){l?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=ut,C.isFunction=ae,C.isWindow=he,C.camelCase=Yt,C.type=Te,C.now=Date.now,C.isNumeric=function(l){var d=C.type(l);return("number"===d||"string"===d)&&!isNaN(l-parseFloat(l))},C.trim=function(l){return null==l?"":(l+"").replace(de,"")},void 0!==(g=function(){return C}.apply(W,[]))&&(P.exports=g);var Ie=v.jQuery,we=v.$;return C.noConflict=function(l){return v.$===C&&(v.$=we),l&&v.jQuery===C&&(v.jQuery=Ie),C},void 0===T&&(v.jQuery=v.$=C),C})},37244:(P,W,f)=>{var T=f(53436)(f(12119),"DataView");P.exports=T},54994:(P,W,f)=>{var g=f(64312),v=f(46421),T=f(15764),E=f(18685),b=f(26676);function A(k){var M=-1,B=null==k?0:k.length;for(this.clear();++M<B;){var j=k[M];this.set(j[0],j[1])}}A.prototype.clear=g,A.prototype.delete=v,A.prototype.get=T,A.prototype.has=E,A.prototype.set=b,P.exports=A},9215:(P,W,f)=>{var g=f(41840),v=f(34378),T=f(54981),E=f(67343),b=f(98895);function A(k){var M=-1,B=null==k?0:k.length;for(this.clear();++M<B;){var j=k[M];this.set(j[0],j[1])}}A.prototype.clear=g,A.prototype.delete=v,A.prototype.get=T,A.prototype.has=E,A.prototype.set=b,P.exports=A},51501:(P,W,f)=>{var T=f(53436)(f(12119),"Map");P.exports=T},99850:(P,W,f)=>{var g=f(10638),v=f(11184),T=f(70866),E=f(43771),b=f(51772);function A(k){var M=-1,B=null==k?0:k.length;for(this.clear();++M<B;){var j=k[M];this.set(j[0],j[1])}}A.prototype.clear=g,A.prototype.delete=v,A.prototype.get=T,A.prototype.has=E,A.prototype.set=b,P.exports=A},44267:(P,W,f)=>{var T=f(53436)(f(12119),"Promise");P.exports=T},46323:(P,W,f)=>{var T=f(53436)(f(12119),"Set");P.exports=T},58849:(P,W,f)=>{var g=f(99850),v=f(4600),T=f(31387);function E(b){var A=-1,k=null==b?0:b.length;for(this.__data__=new g;++A<k;)this.add(b[A])}E.prototype.add=E.prototype.push=v,E.prototype.has=T,P.exports=E},2858:(P,W,f)=>{var g=f(9215),v=f(13720),T=f(64410),E=f(45576),b=f(22247),A=f(41585);function k(M){var B=this.__data__=new g(M);this.size=B.size}k.prototype.clear=v,k.prototype.delete=T,k.prototype.get=E,k.prototype.has=b,k.prototype.set=A,P.exports=k},60443:(P,W,f)=>{var g=f(12119);P.exports=g.Symbol},73457:(P,W,f)=>{var g=f(12119);P.exports=g.Uint8Array},24243:(P,W,f)=>{var T=f(53436)(f(12119),"WeakMap");P.exports=T},26999:P=>{P.exports=function W(f,g,v){switch(v.length){case 0:return f.call(g);case 1:return f.call(g,v[0]);case 2:return f.call(g,v[0],v[1]);case 3:return f.call(g,v[0],v[1],v[2])}return f.apply(g,v)}},96837:P=>{P.exports=function W(f,g){for(var v=-1,T=null==f?0:f.length;++v<T&&!1!==g(f[v],v,f););return f}},69779:P=>{P.exports=function W(f,g){for(var v=-1,T=null==f?0:f.length,E=0,b=[];++v<T;){var A=f[v];g(A,v,f)&&(b[E++]=A)}return b}},61253:(P,W,f)=>{var g=f(14164);P.exports=function v(T,E){return!(null==T||!T.length)&&g(T,E,0)>-1}},37609:P=>{P.exports=function W(f,g,v){for(var T=-1,E=null==f?0:f.length;++T<E;)if(v(g,f[T]))return!0;return!1}},72271:(P,W,f)=>{var g=f(85334),v=f(77151),T=f(21503),E=f(80891),b=f(58442),A=f(48159),M=Object.prototype.hasOwnProperty;P.exports=function B(j,L){var X=T(j),te=!X&&v(j),le=!X&&!te&&E(j),i=!X&&!te&&!le&&A(j),ae=X||te||le||i,he=ae?g(j.length,String):[],fe=he.length;for(var ee in j)(L||M.call(j,ee))&&(!ae||!("length"==ee||le&&("offset"==ee||"parent"==ee)||i&&("buffer"==ee||"byteLength"==ee||"byteOffset"==ee)||b(ee,fe)))&&he.push(ee);return he}},84633:P=>{P.exports=function W(f,g){for(var v=-1,T=null==f?0:f.length,E=Array(T);++v<T;)E[v]=g(f[v],v,f);return E}},85059:P=>{P.exports=function W(f,g){for(var v=-1,T=g.length,E=f.length;++v<T;)f[E+v]=g[v];return f}},8745:P=>{P.exports=function W(f,g,v,T){var E=-1,b=null==f?0:f.length;for(T&&b&&(v=f[++E]);++E<b;)v=g(v,f[E],E,f);return v}},79503:P=>{P.exports=function W(f,g){for(var v=-1,T=null==f?0:f.length;++v<T;)if(g(f[v],v,f))return!0;return!1}},75481:(P,W,f)=>{var v=f(11847)("length");P.exports=v},49276:(P,W,f)=>{var g=f(85683),v=f(20217);P.exports=function T(E,b,A){(void 0!==A&&!v(E[b],A)||void 0===A&&!(b in E))&&g(E,b,A)}},89719:(P,W,f)=>{var g=f(85683),v=f(20217),E=Object.prototype.hasOwnProperty;P.exports=function b(A,k,M){var B=A[k];(!E.call(A,k)||!v(B,M)||void 0===M&&!(k in A))&&g(A,k,M)}},43503:(P,W,f)=>{var g=f(20217);P.exports=function v(T,E){for(var b=T.length;b--;)if(g(T[b][0],E))return b;return-1}},94121:(P,W,f)=>{var g=f(31989),v=f(118);P.exports=function T(E,b){return E&&g(b,v(b),E)}},99287:(P,W,f)=>{var g=f(31989),v=f(16555);P.exports=function T(E,b){return E&&g(b,v(b),E)}},85683:(P,W,f)=>{var g=f(56713);P.exports=function v(T,E,b){"__proto__"==E&&g?g(T,E,{configurable:!0,enumerable:!0,value:b,writable:!0}):T[E]=b}},44462:(P,W,f)=>{var g=f(2858),v=f(96837),T=f(89719),E=f(94121),b=f(99287),A=f(19292),k=f(99454),M=f(84444),B=f(59905),j=f(47597),L=f(6967),X=f(28794),te=f(76782),le=f(37878),i=f(4264),ae=f(21503),he=f(80891),fe=f(13222),ee=f(25940),ge=f(90799),Te=f(118),Ne=f(16555),Xe="[object Arguments]",Ht="[object Function]",Pr="[object Object]",D={};D[Xe]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[Pr]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[Ht]=D["[object WeakMap]"]=!1,P.exports=function G(re,me,Ge,Ye,ct,It){var Vt,rn=1&me,en=2&me,on=4&me;if(Ge&&(Vt=ct?Ge(re,Ye,ct,It):Ge(re)),void 0!==Vt)return Vt;if(!ee(re))return re;var Un=ae(re);if(Un){if(Vt=te(re),!rn)return k(re,Vt)}else{var Hn=X(re),Ur=Hn==Ht||"[object GeneratorFunction]"==Hn;if(he(re))return A(re,rn);if(Hn==Pr||Hn==Xe||Ur&&!ct){if(Vt=en||Ur?{}:i(re),!rn)return en?B(re,b(Vt,re)):M(re,E(Vt,re))}else{if(!D[Hn])return ct?re:{};Vt=le(re,Hn,rn)}}It||(It=new g);var Pn=It.get(re);if(Pn)return Pn;It.set(re,Vt),ge(re)?re.forEach(function(Kn){Vt.add(G(Kn,me,Ge,Kn,re,It))}):fe(re)&&re.forEach(function(Kn,mr){Vt.set(mr,G(Kn,me,Ge,mr,re,It))});var jn=Un?void 0:(on?en?L:j:en?Ne:Te)(re);return v(jn||re,function(Kn,mr){jn&&(Kn=re[mr=Kn]),T(Vt,mr,G(Kn,me,Ge,mr,re,It))}),Vt}},78858:(P,W,f)=>{var g=f(25940),v=Object.create,T=function(){function E(){}return function(b){if(!g(b))return{};if(v)return v(b);E.prototype=b;var A=new E;return E.prototype=void 0,A}}();P.exports=T},43132:(P,W,f)=>{var g=f(45184),T=f(16539)(g);P.exports=T},67308:(P,W,f)=>{var g=f(44129);P.exports=function v(T,E,b){for(var A=-1,k=T.length;++A<k;){var M=T[A],B=E(M);if(null!=B&&(void 0===j?B==B&&!g(B):b(B,j)))var j=B,L=M}return L}},33609:(P,W,f)=>{var g=f(43132);P.exports=function v(T,E){var b=[];return g(T,function(A,k,M){E(A,k,M)&&b.push(A)}),b}},65317:P=>{P.exports=function W(f,g,v,T){for(var E=f.length,b=v+(T?1:-1);T?b--:++b<E;)if(g(f[b],b,f))return b;return-1}},50686:(P,W,f)=>{var g=f(85059),v=f(75039);P.exports=function T(E,b,A,k,M){var B=-1,j=E.length;for(A||(A=v),M||(M=[]);++B<j;){var L=E[B];b>0&&A(L)?b>1?T(L,b-1,A,k,M):g(M,L):k||(M[M.length]=L)}return M}},30755:(P,W,f)=>{var v=f(40456)();P.exports=v},45184:(P,W,f)=>{var g=f(30755),v=f(118);P.exports=function T(E,b){return E&&g(E,b,v)}},15456:(P,W,f)=>{var g=f(65456),v=f(68533);P.exports=function T(E,b){for(var A=0,k=(b=g(b,E)).length;null!=E&&A<k;)E=E[v(b[A++])];return A&&A==k?E:void 0}},38247:(P,W,f)=>{var g=f(85059),v=f(21503);P.exports=function T(E,b,A){var k=b(E);return v(E)?k:g(k,A(E))}},93337:(P,W,f)=>{var g=f(60443),v=f(21318),T=f(92902),A=g?g.toStringTag:void 0;P.exports=function k(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":A&&A in Object(M)?v(M):T(M)}},31100:P=>{P.exports=function W(f,g){return f>g}},84781:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function g(v,T){return null!=v&&f.call(v,T)}},69989:P=>{P.exports=function W(f,g){return null!=f&&g in Object(f)}},14164:(P,W,f)=>{var g=f(65317),v=f(70968),T=f(24977);P.exports=function E(b,A,k){return A==A?T(b,A,k):g(b,v,k)}},60186:(P,W,f)=>{var g=f(93337),v=f(72671);P.exports=function E(b){return v(b)&&"[object Arguments]"==g(b)}},85740:(P,W,f)=>{var g=f(58325),v=f(72671);P.exports=function T(E,b,A,k,M){return E===b||(null==E||null==b||!v(E)&&!v(b)?E!=E&&b!=b:g(E,b,A,k,T,M))}},58325:(P,W,f)=>{var g=f(2858),v=f(63914),T=f(78583),E=f(32286),b=f(28794),A=f(21503),k=f(80891),M=f(48159),j="[object Arguments]",L="[object Array]",X="[object Object]",le=Object.prototype.hasOwnProperty;P.exports=function i(ae,he,fe,ee,ge,Te){var Ne=A(ae),C=A(he),Ve=Ne?L:b(ae),Qe=C?L:b(he),Xe=(Ve=Ve==j?X:Ve)==X,et=(Qe=Qe==j?X:Qe)==X,nt=Ve==Qe;if(nt&&k(ae)){if(!k(he))return!1;Ne=!0,Xe=!1}if(nt&&!Xe)return Te||(Te=new g),Ne||M(ae)?v(ae,he,fe,ee,ge,Te):T(ae,he,Ve,fe,ee,ge,Te);if(!(1&fe)){var ut=Xe&&le.call(ae,"__wrapped__"),bt=et&&le.call(he,"__wrapped__");if(ut||bt){var Ht=ut?ae.value():ae,Qt=bt?he.value():he;return Te||(Te=new g),ge(Ht,Qt,fe,ee,Te)}}return!!nt&&(Te||(Te=new g),E(ae,he,fe,ee,ge,Te))}},97021:(P,W,f)=>{var g=f(28794),v=f(72671);P.exports=function E(b){return v(b)&&"[object Map]"==g(b)}},40431:(P,W,f)=>{var g=f(2858),v=f(85740);P.exports=function b(A,k,M,B){var j=M.length,L=j,X=!B;if(null==A)return!L;for(A=Object(A);j--;){var te=M[j];if(X&&te[2]?te[1]!==A[te[0]]:!(te[0]in A))return!1}for(;++j<L;){var le=(te=M[j])[0],i=A[le],ae=te[1];if(X&&te[2]){if(void 0===i&&!(le in A))return!1}else{var he=new g;if(B)var fe=B(i,ae,le,A,k,he);if(!(void 0===fe?v(ae,i,3,B,he):fe))return!1}}return!0}},70968:P=>{P.exports=function W(f){return f!=f}},37304:(P,W,f)=>{var g=f(75946),v=f(91943),T=f(25940),E=f(52827),A=/^\[object .+?Constructor\]$/,L=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");P.exports=function X(te){return!(!T(te)||v(te))&&(g(te)?L:A).test(E(te))}},771:(P,W,f)=>{var g=f(28794),v=f(72671);P.exports=function E(b){return v(b)&&"[object Set]"==g(b)}},1083:(P,W,f)=>{var g=f(93337),v=f(96231),T=f(72671),nt={};nt["[object Float32Array]"]=nt["[object Float64Array]"]=nt["[object Int8Array]"]=nt["[object Int16Array]"]=nt["[object Int32Array]"]=nt["[object Uint8Array]"]=nt["[object Uint8ClampedArray]"]=nt["[object Uint16Array]"]=nt["[object Uint32Array]"]=!0,nt["[object Arguments]"]=nt["[object Array]"]=nt["[object ArrayBuffer]"]=nt["[object Boolean]"]=nt["[object DataView]"]=nt["[object Date]"]=nt["[object Error]"]=nt["[object Function]"]=nt["[object Map]"]=nt["[object Number]"]=nt["[object Object]"]=nt["[object RegExp]"]=nt["[object Set]"]=nt["[object String]"]=nt["[object WeakMap]"]=!1,P.exports=function ut(bt){return T(bt)&&v(bt.length)&&!!nt[g(bt)]}},96517:(P,W,f)=>{var g=f(98133),v=f(9458),T=f(32608),E=f(21503),b=f(87495);P.exports=function A(k){return"function"==typeof k?k:null==k?T:"object"==typeof k?E(k)?v(k[0],k[1]):g(k):b(k)}},81172:(P,W,f)=>{var g=f(45488),v=f(85491),E=Object.prototype.hasOwnProperty;P.exports=function b(A){if(!g(A))return v(A);var k=[];for(var M in Object(A))E.call(A,M)&&"constructor"!=M&&k.push(M);return k}},92809:(P,W,f)=>{var g=f(25940),v=f(45488),T=f(32158),b=Object.prototype.hasOwnProperty;P.exports=function A(k){if(!g(k))return T(k);var M=v(k),B=[];for(var j in k)"constructor"==j&&(M||!b.call(k,j))||B.push(j);return B}},99069:P=>{P.exports=function W(f,g){return f<g}},92046:(P,W,f)=>{var g=f(43132),v=f(56507);P.exports=function T(E,b){var A=-1,k=v(E)?Array(E.length):[];return g(E,function(M,B,j){k[++A]=b(M,B,j)}),k}},98133:(P,W,f)=>{var g=f(40431),v=f(22379),T=f(642);P.exports=function E(b){var A=v(b);return 1==A.length&&A[0][2]?T(A[0][0],A[0][1]):function(k){return k===b||g(k,b,A)}}},9458:(P,W,f)=>{var g=f(85740),v=f(8817),T=f(11172),E=f(45352),b=f(22442),A=f(642),k=f(68533);P.exports=function j(L,X){return E(L)&&b(X)?A(k(L),X):function(te){var le=v(te,L);return void 0===le&&le===X?T(te,L):g(X,le,3)}}},73842:(P,W,f)=>{var g=f(2858),v=f(49276),T=f(30755),E=f(33675),b=f(25940),A=f(16555),k=f(99351);P.exports=function M(B,j,L,X,te){B!==j&&T(j,function(le,i){if(te||(te=new g),b(le))E(B,j,i,L,M,X,te);else{var ae=X?X(k(B,i),le,i+"",B,j,te):void 0;void 0===ae&&(ae=le),v(B,i,ae)}},A)}},33675:(P,W,f)=>{var g=f(49276),v=f(19292),T=f(65208),E=f(99454),b=f(4264),A=f(77151),k=f(21503),M=f(21330),B=f(80891),j=f(75946),L=f(25940),X=f(97614),te=f(48159),le=f(99351),i=f(8067);P.exports=function ae(he,fe,ee,ge,Te,Ne,C){var Ve=le(he,ee),Qe=le(fe,ee),Xe=C.get(Qe);if(Xe)g(he,ee,Xe);else{var et=Ne?Ne(Ve,Qe,ee+"",he,fe,C):void 0,nt=void 0===et;if(nt){var ut=k(Qe),bt=!ut&&B(Qe),Ht=!ut&&!bt&&te(Qe);et=Qe,ut||bt||Ht?k(Ve)?et=Ve:M(Ve)?et=E(Ve):bt?(nt=!1,et=v(Qe,!0)):Ht?(nt=!1,et=T(Qe,!0)):et=[]:X(Qe)||A(Qe)?(et=Ve,A(Ve)?et=i(Ve):(!L(Ve)||j(Ve))&&(et=b(Qe))):nt=!1}nt&&(C.set(Qe,et),Te(et,Qe,ge,Ne,C),C.delete(Qe)),g(he,ee,et)}}},6119:(P,W,f)=>{var g=f(84633),v=f(15456),T=f(96517),E=f(92046),b=f(18750),A=f(85647),k=f(41215),M=f(32608),B=f(21503);P.exports=function j(L,X,te){X=X.length?g(X,function(ae){return B(ae)?function(he){return v(he,1===ae.length?ae[0]:ae)}:ae}):[M];var le=-1;X=g(X,A(T));var i=E(L,function(ae,he,fe){return{criteria:g(X,function(ge){return ge(ae)}),index:++le,value:ae}});return b(i,function(ae,he){return k(ae,he,te)})}},83021:(P,W,f)=>{var g=f(95495),v=f(11172);P.exports=function T(E,b){return g(E,b,function(A,k){return v(E,k)})}},95495:(P,W,f)=>{var g=f(15456),v=f(55963),T=f(65456);P.exports=function E(b,A,k){for(var M=-1,B=A.length,j={};++M<B;){var L=A[M],X=g(b,L);k(X,L)&&v(j,T(L,b),X)}return j}},11847:P=>{P.exports=function W(f){return function(g){return null==g?void 0:g[f]}}},39222:(P,W,f)=>{var g=f(15456);P.exports=function v(T){return function(E){return g(E,T)}}},16307:P=>{var W=Math.ceil,f=Math.max;P.exports=function g(v,T,E,b){for(var A=-1,k=f(W((T-v)/(E||1)),0),M=Array(k);k--;)M[b?k:++A]=v,v+=E;return M}},13570:P=>{P.exports=function W(f,g,v,T,E){return E(f,function(b,A,k){v=T?(T=!1,b):g(v,b,A,k)}),v}},23269:(P,W,f)=>{var g=f(32608),v=f(53983),T=f(72185);P.exports=function E(b,A){return T(v(b,A,g),b+"")}},55963:(P,W,f)=>{var g=f(89719),v=f(65456),T=f(58442),E=f(25940),b=f(68533);P.exports=function A(k,M,B,j){if(!E(k))return k;for(var L=-1,X=(M=v(M,k)).length,te=X-1,le=k;null!=le&&++L<X;){var i=b(M[L]),ae=B;if("__proto__"===i||"constructor"===i||"prototype"===i)return k;if(L!=te){var he=le[i];void 0===(ae=j?j(he,i,le):void 0)&&(ae=E(he)?he:T(M[L+1])?[]:{})}g(le,i,ae),le=le[i]}return k}},69510:(P,W,f)=>{var g=f(76684),v=f(56713),T=f(32608);P.exports=v?function(b,A){return v(b,"toString",{configurable:!0,enumerable:!1,value:g(A),writable:!0})}:T},18750:P=>{P.exports=function W(f,g){var v=f.length;for(f.sort(g);v--;)f[v]=f[v].value;return f}},85334:P=>{P.exports=function W(f,g){for(var v=-1,T=Array(f);++v<f;)T[v]=g(v);return T}},93935:(P,W,f)=>{var g=f(60443),v=f(84633),T=f(21503),E=f(44129),A=g?g.prototype:void 0,k=A?A.toString:void 0;P.exports=function M(B){if("string"==typeof B)return B;if(T(B))return v(B,M)+"";if(E(B))return k?k.call(B):"";var j=B+"";return"0"==j&&1/B==-1/0?"-0":j}},83348:(P,W,f)=>{var g=f(42760),v=/^\s+/;P.exports=function T(E){return E&&E.slice(0,g(E)+1).replace(v,"")}},85647:P=>{P.exports=function W(f){return function(g){return f(g)}}},80707:(P,W,f)=>{var g=f(58849),v=f(61253),T=f(37609),E=f(25972),b=f(14575),A=f(24174);P.exports=function M(B,j,L){var X=-1,te=v,le=B.length,i=!0,ae=[],he=ae;if(L)i=!1,te=T;else if(le>=200){var fe=j?null:b(B);if(fe)return A(fe);i=!1,te=E,he=new g}else he=j?[]:ae;e:for(;++X<le;){var ee=B[X],ge=j?j(ee):ee;if(ee=L||0!==ee?ee:0,i&&ge==ge){for(var Te=he.length;Te--;)if(he[Te]===ge)continue e;j&&he.push(ge),ae.push(ee)}else te(he,ge,L)||(he!==ae&&he.push(ge),ae.push(ee))}return ae}},19179:(P,W,f)=>{var g=f(84633);P.exports=function v(T,E){return g(E,function(b){return T[b]})}},38645:P=>{P.exports=function W(f,g,v){for(var T=-1,E=f.length,b=g.length,A={};++T<E;)v(A,f[T],T<b?g[T]:void 0);return A}},25972:P=>{P.exports=function W(f,g){return f.has(g)}},21481:(P,W,f)=>{var g=f(32608);P.exports=function v(T){return"function"==typeof T?T:g}},65456:(P,W,f)=>{var g=f(21503),v=f(45352),T=f(32855),E=f(73943);P.exports=function b(A,k){return g(A)?A:v(A,k)?[A]:T(E(A))}},43362:(P,W,f)=>{var g=f(73457);P.exports=function v(T){var E=new T.constructor(T.byteLength);return new g(E).set(new g(T)),E}},19292:(P,W,f)=>{P=f.nmd(P);var g=f(12119),v=W&&!W.nodeType&&W,T=v&&P&&!P.nodeType&&P,b=T&&T.exports===v?g.Buffer:void 0,A=b?b.allocUnsafe:void 0;P.exports=function k(M,B){if(B)return M.slice();var j=M.length,L=A?A(j):new M.constructor(j);return M.copy(L),L}},17e3:(P,W,f)=>{var g=f(43362);P.exports=function v(T,E){var b=E?g(T.buffer):T.buffer;return new T.constructor(b,T.byteOffset,T.byteLength)}},74098:P=>{var W=/\w*$/;P.exports=function f(g){var v=new g.constructor(g.source,W.exec(g));return v.lastIndex=g.lastIndex,v}},62533:(P,W,f)=>{var g=f(60443),v=g?g.prototype:void 0,T=v?v.valueOf:void 0;P.exports=function E(b){return T?Object(T.call(b)):{}}},65208:(P,W,f)=>{var g=f(43362);P.exports=function v(T,E){var b=E?g(T.buffer):T.buffer;return new T.constructor(b,T.byteOffset,T.length)}},13443:(P,W,f)=>{var g=f(44129);P.exports=function v(T,E){if(T!==E){var b=void 0!==T,A=null===T,k=T==T,M=g(T),B=void 0!==E,j=null===E,L=E==E,X=g(E);if(!j&&!X&&!M&&T>E||M&&B&&L&&!j&&!X||A&&B&&L||!b&&L||!k)return 1;if(!A&&!M&&!X&&T<E||X&&b&&k&&!A&&!M||j&&b&&k||!B&&k||!L)return-1}return 0}},41215:(P,W,f)=>{var g=f(13443);P.exports=function v(T,E,b){for(var A=-1,k=T.criteria,M=E.criteria,B=k.length,j=b.length;++A<B;){var L=g(k[A],M[A]);if(L)return A>=j?L:L*("desc"==b[A]?-1:1)}return T.index-E.index}},99454:P=>{P.exports=function W(f,g){var v=-1,T=f.length;for(g||(g=Array(T));++v<T;)g[v]=f[v];return g}},31989:(P,W,f)=>{var g=f(89719),v=f(85683);P.exports=function T(E,b,A,k){var M=!A;A||(A={});for(var B=-1,j=b.length;++B<j;){var L=b[B],X=k?k(A[L],E[L],L,A,E):void 0;void 0===X&&(X=E[L]),M?v(A,L,X):g(A,L,X)}return A}},84444:(P,W,f)=>{var g=f(31989),v=f(39383);P.exports=function T(E,b){return g(E,v(E),b)}},59905:(P,W,f)=>{var g=f(31989),v=f(53051);P.exports=function T(E,b){return g(E,v(E),b)}},24610:(P,W,f)=>{var g=f(12119);P.exports=g["__core-js_shared__"]},84944:(P,W,f)=>{var g=f(23269),v=f(93342);P.exports=function T(E){return g(function(b,A){var k=-1,M=A.length,B=M>1?A[M-1]:void 0,j=M>2?A[2]:void 0;for(B=E.length>3&&"function"==typeof B?(M--,B):void 0,j&&v(A[0],A[1],j)&&(B=M<3?void 0:B,M=1),b=Object(b);++k<M;){var L=A[k];L&&E(b,L,k,B)}return b})}},16539:(P,W,f)=>{var g=f(56507);P.exports=function v(T,E){return function(b,A){if(null==b)return b;if(!g(b))return T(b,A);for(var k=b.length,M=E?k:-1,B=Object(b);(E?M--:++M<k)&&!1!==A(B[M],M,B););return b}}},40456:P=>{P.exports=function W(f){return function(g,v,T){for(var E=-1,b=Object(g),A=T(g),k=A.length;k--;){var M=A[f?k:++E];if(!1===v(b[M],M,b))break}return g}}},24653:(P,W,f)=>{var g=f(96517),v=f(56507),T=f(118);P.exports=function E(b){return function(A,k,M){var B=Object(A);if(!v(A)){var j=g(k,3);A=T(A),k=function(X){return j(B[X],X,B)}}var L=b(A,k,M);return L>-1?B[j?A[L]:L]:void 0}}},97509:(P,W,f)=>{var g=f(16307),v=f(93342),T=f(12232);P.exports=function E(b){return function(A,k,M){return M&&"number"!=typeof M&&v(A,k,M)&&(k=M=void 0),A=T(A),void 0===k?(k=A,A=0):k=T(k),M=void 0===M?A<k?1:-1:T(M),g(A,k,M,b)}}},14575:(P,W,f)=>{var g=f(46323),v=f(12552),T=f(24174),b=g&&1/T(new g([,-0]))[1]==1/0?function(A){return new g(A)}:v;P.exports=b},56713:(P,W,f)=>{var g=f(53436),v=function(){try{var T=g(Object,"defineProperty");return T({},"",{}),T}catch(E){}}();P.exports=v},63914:(P,W,f)=>{var g=f(58849),v=f(79503),T=f(25972);P.exports=function A(k,M,B,j,L,X){var te=1&B,le=k.length,i=M.length;if(le!=i&&!(te&&i>le))return!1;var ae=X.get(k),he=X.get(M);if(ae&&he)return ae==M&&he==k;var fe=-1,ee=!0,ge=2&B?new g:void 0;for(X.set(k,M),X.set(M,k);++fe<le;){var Te=k[fe],Ne=M[fe];if(j)var C=te?j(Ne,Te,fe,M,k,X):j(Te,Ne,fe,k,M,X);if(void 0!==C){if(C)continue;ee=!1;break}if(ge){if(!v(M,function(Ve,Qe){if(!T(ge,Qe)&&(Te===Ve||L(Te,Ve,B,j,X)))return ge.push(Qe)})){ee=!1;break}}else if(Te!==Ne&&!L(Te,Ne,B,j,X)){ee=!1;break}}return X.delete(k),X.delete(M),ee}},78583:(P,W,f)=>{var g=f(60443),v=f(73457),T=f(20217),E=f(63914),b=f(83205),A=f(24174),ge=g?g.prototype:void 0,Te=ge?ge.valueOf:void 0;P.exports=function Ne(C,Ve,Qe,Xe,et,nt,ut){switch(Qe){case"[object DataView]":if(C.byteLength!=Ve.byteLength||C.byteOffset!=Ve.byteOffset)return!1;C=C.buffer,Ve=Ve.buffer;case"[object ArrayBuffer]":return!(C.byteLength!=Ve.byteLength||!nt(new v(C),new v(Ve)));case"[object Boolean]":case"[object Date]":case"[object Number]":return T(+C,+Ve);case"[object Error]":return C.name==Ve.name&&C.message==Ve.message;case"[object RegExp]":case"[object String]":return C==Ve+"";case"[object Map]":var bt=b;case"[object Set]":if(bt||(bt=A),C.size!=Ve.size&&!(1&Xe))return!1;var Qt=ut.get(C);if(Qt)return Qt==Ve;Xe|=2,ut.set(C,Ve);var Et=E(bt(C),bt(Ve),Xe,et,nt,ut);return ut.delete(C),Et;case"[object Symbol]":if(Te)return Te.call(C)==Te.call(Ve)}return!1}},32286:(P,W,f)=>{var g=f(47597),E=Object.prototype.hasOwnProperty;P.exports=function b(A,k,M,B,j,L){var X=1&M,te=g(A),le=te.length;if(le!=g(k).length&&!X)return!1;for(var he=le;he--;){var fe=te[he];if(!(X?fe in k:E.call(k,fe)))return!1}var ee=L.get(A),ge=L.get(k);if(ee&&ge)return ee==k&&ge==A;var Te=!0;L.set(A,k),L.set(k,A);for(var Ne=X;++he<le;){var C=A[fe=te[he]],Ve=k[fe];if(B)var Qe=X?B(Ve,C,fe,k,A,L):B(C,Ve,fe,A,k,L);if(!(void 0===Qe?C===Ve||j(C,Ve,M,B,L):Qe)){Te=!1;break}Ne||(Ne="constructor"==fe)}if(Te&&!Ne){var Xe=A.constructor,et=k.constructor;Xe!=et&&"constructor"in A&&"constructor"in k&&!("function"==typeof Xe&&Xe instanceof Xe&&"function"==typeof et&&et instanceof et)&&(Te=!1)}return L.delete(A),L.delete(k),Te}},3975:(P,W,f)=>{var g=f(22274),v=f(53983),T=f(72185);P.exports=function E(b){return T(v(b,void 0,g),b+"")}},79122:P=>{var W="object"==typeof global&&global&&global.Object===Object&&global;P.exports=W},47597:(P,W,f)=>{var g=f(38247),v=f(39383),T=f(118);P.exports=function E(b){return g(b,T,v)}},6967:(P,W,f)=>{var g=f(38247),v=f(53051),T=f(16555);P.exports=function E(b){return g(b,T,v)}},54537:(P,W,f)=>{var g=f(23819);P.exports=function v(T,E){var b=T.__data__;return g(E)?b["string"==typeof E?"string":"hash"]:b.map}},22379:(P,W,f)=>{var g=f(22442),v=f(118);P.exports=function T(E){for(var b=v(E),A=b.length;A--;){var k=b[A],M=E[k];b[A]=[k,M,g(M)]}return b}},53436:(P,W,f)=>{var g=f(37304),v=f(51990);P.exports=function T(E,b){var A=v(E,b);return g(A)?A:void 0}},29519:(P,W,f)=>{var v=f(69385)(Object.getPrototypeOf,Object);P.exports=v},21318:(P,W,f)=>{var g=f(60443),v=Object.prototype,T=v.hasOwnProperty,E=v.toString,b=g?g.toStringTag:void 0;P.exports=function A(k){var M=T.call(k,b),B=k[b];try{k[b]=void 0;var j=!0}catch(X){}var L=E.call(k);return j&&(M?k[b]=B:delete k[b]),L}},39383:(P,W,f)=>{var g=f(69779),v=f(49975),E=Object.prototype.propertyIsEnumerable,b=Object.getOwnPropertySymbols;P.exports=b?function(k){return null==k?[]:(k=Object(k),g(b(k),function(M){return E.call(k,M)}))}:v},53051:(P,W,f)=>{var g=f(85059),v=f(29519),T=f(39383),E=f(49975);P.exports=Object.getOwnPropertySymbols?function(k){for(var M=[];k;)g(M,T(k)),k=v(k);return M}:E},28794:(P,W,f)=>{var g=f(37244),v=f(51501),T=f(44267),E=f(46323),b=f(24243),A=f(93337),k=f(52827),M="[object Map]",j="[object Promise]",L="[object Set]",X="[object WeakMap]",te="[object DataView]",le=k(g),i=k(v),ae=k(T),he=k(E),fe=k(b),ee=A;(g&&ee(new g(new ArrayBuffer(1)))!=te||v&&ee(new v)!=M||T&&ee(T.resolve())!=j||E&&ee(new E)!=L||b&&ee(new b)!=X)&&(ee=function(ge){var Te=A(ge),Ne="[object Object]"==Te?ge.constructor:void 0,C=Ne?k(Ne):"";if(C)switch(C){case le:return te;case i:return M;case ae:return j;case he:return L;case fe:return X}return Te}),P.exports=ee},51990:P=>{P.exports=function W(f,g){return null==f?void 0:f[g]}},47283:(P,W,f)=>{var g=f(65456),v=f(77151),T=f(21503),E=f(58442),b=f(96231),A=f(68533);P.exports=function k(M,B,j){for(var L=-1,X=(B=g(B,M)).length,te=!1;++L<X;){var le=A(B[L]);if(!(te=null!=M&&j(M,le)))break;M=M[le]}return te||++L!=X?te:!!(X=null==M?0:M.length)&&b(X)&&E(le,X)&&(T(M)||v(M))}},77609:P=>{var A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");P.exports=function k(M){return A.test(M)}},64312:(P,W,f)=>{var g=f(60862);P.exports=function v(){this.__data__=g?g(null):{},this.size=0}},46421:P=>{P.exports=function W(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}},15764:(P,W,f)=>{var g=f(60862),E=Object.prototype.hasOwnProperty;P.exports=function b(A){var k=this.__data__;if(g){var M=k[A];return"__lodash_hash_undefined__"===M?void 0:M}return E.call(k,A)?k[A]:void 0}},18685:(P,W,f)=>{var g=f(60862),T=Object.prototype.hasOwnProperty;P.exports=function E(b){var A=this.__data__;return g?void 0!==A[b]:T.call(A,b)}},26676:(P,W,f)=>{var g=f(60862);P.exports=function T(E,b){var A=this.__data__;return this.size+=this.has(E)?0:1,A[E]=g&&void 0===b?"__lodash_hash_undefined__":b,this}},76782:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function g(v){var T=v.length,E=new v.constructor(T);return T&&"string"==typeof v[0]&&f.call(v,"index")&&(E.index=v.index,E.input=v.input),E}},37878:(P,W,f)=>{var g=f(43362),v=f(17e3),T=f(74098),E=f(62533),b=f(65208);P.exports=function Qe(Xe,et,nt){var ut=Xe.constructor;switch(et){case"[object ArrayBuffer]":return g(Xe);case"[object Boolean]":case"[object Date]":return new ut(+Xe);case"[object DataView]":return v(Xe,nt);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return b(Xe,nt);case"[object Map]":case"[object Set]":return new ut;case"[object Number]":case"[object String]":return new ut(Xe);case"[object RegExp]":return T(Xe);case"[object Symbol]":return E(Xe)}}},4264:(P,W,f)=>{var g=f(78858),v=f(29519),T=f(45488);P.exports=function E(b){return"function"!=typeof b.constructor||T(b)?{}:g(v(b))}},75039:(P,W,f)=>{var g=f(60443),v=f(77151),T=f(21503),E=g?g.isConcatSpreadable:void 0;P.exports=function b(A){return T(A)||v(A)||!!(E&&A&&A[E])}},58442:P=>{var f=/^(?:0|[1-9]\d*)$/;P.exports=function g(v,T){var E=typeof v;return!!(T=null==T?9007199254740991:T)&&("number"==E||"symbol"!=E&&f.test(v))&&v>-1&&v%1==0&&v<T}},93342:(P,W,f)=>{var g=f(20217),v=f(56507),T=f(58442),E=f(25940);P.exports=function b(A,k,M){if(!E(M))return!1;var B=typeof k;return!!("number"==B?v(M)&&T(k,M.length):"string"==B&&k in M)&&g(M[k],A)}},45352:(P,W,f)=>{var g=f(21503),v=f(44129),T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;P.exports=function b(A,k){if(g(A))return!1;var M=typeof A;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=A&&!v(A))||E.test(A)||!T.test(A)||null!=k&&A in Object(k)}},23819:P=>{P.exports=function W(f){var g=typeof f;return"string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==f:null===f}},91943:(P,W,f)=>{var E,g=f(24610),v=(E=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"";P.exports=function T(E){return!!v&&v in E}},45488:P=>{var W=Object.prototype;P.exports=function f(g){var v=g&&g.constructor;return g===("function"==typeof v&&v.prototype||W)}},22442:(P,W,f)=>{var g=f(25940);P.exports=function v(T){return T==T&&!g(T)}},41840:P=>{P.exports=function W(){this.__data__=[],this.size=0}},34378:(P,W,f)=>{var g=f(43503),T=Array.prototype.splice;P.exports=function E(b){var A=this.__data__,k=g(A,b);return!(k<0||(k==A.length-1?A.pop():T.call(A,k,1),--this.size,0))}},54981:(P,W,f)=>{var g=f(43503);P.exports=function v(T){var E=this.__data__,b=g(E,T);return b<0?void 0:E[b][1]}},67343:(P,W,f)=>{var g=f(43503);P.exports=function v(T){return g(this.__data__,T)>-1}},98895:(P,W,f)=>{var g=f(43503);P.exports=function v(T,E){var b=this.__data__,A=g(b,T);return A<0?(++this.size,b.push([T,E])):b[A][1]=E,this}},10638:(P,W,f)=>{var g=f(54994),v=f(9215),T=f(51501);P.exports=function E(){this.size=0,this.__data__={hash:new g,map:new(T||v),string:new g}}},11184:(P,W,f)=>{var g=f(54537);P.exports=function v(T){var E=g(this,T).delete(T);return this.size-=E?1:0,E}},70866:(P,W,f)=>{var g=f(54537);P.exports=function v(T){return g(this,T).get(T)}},43771:(P,W,f)=>{var g=f(54537);P.exports=function v(T){return g(this,T).has(T)}},51772:(P,W,f)=>{var g=f(54537);P.exports=function v(T,E){var b=g(this,T),A=b.size;return b.set(T,E),this.size+=b.size==A?0:1,this}},83205:P=>{P.exports=function W(f){var g=-1,v=Array(f.size);return f.forEach(function(T,E){v[++g]=[E,T]}),v}},642:P=>{P.exports=function W(f,g){return function(v){return null!=v&&v[f]===g&&(void 0!==g||f in Object(v))}}},90719:(P,W,f)=>{var g=f(30535);P.exports=function T(E){var b=g(E,function(k){return 500===A.size&&A.clear(),k}),A=b.cache;return b}},60862:(P,W,f)=>{var v=f(53436)(Object,"create");P.exports=v},85491:(P,W,f)=>{var v=f(69385)(Object.keys,Object);P.exports=v},32158:P=>{P.exports=function W(f){var g=[];if(null!=f)for(var v in Object(f))g.push(v);return g}},73597:(P,W,f)=>{P=f.nmd(P);var g=f(79122),v=W&&!W.nodeType&&W,T=v&&P&&!P.nodeType&&P,b=T&&T.exports===v&&g.process,A=function(){try{return T&&T.require&&T.require("util").types||b&&b.binding&&b.binding("util")}catch(M){}}();P.exports=A},92902:P=>{var f=Object.prototype.toString;P.exports=function g(v){return f.call(v)}},69385:P=>{P.exports=function W(f,g){return function(v){return f(g(v))}}},53983:(P,W,f)=>{var g=f(26999),v=Math.max;P.exports=function T(E,b,A){return b=v(void 0===b?E.length-1:b,0),function(){for(var k=arguments,M=-1,B=v(k.length-b,0),j=Array(B);++M<B;)j[M]=k[b+M];M=-1;for(var L=Array(b+1);++M<b;)L[M]=k[M];return L[b]=A(j),g(E,this,L)}}},12119:(P,W,f)=>{var g=f(79122),v="object"==typeof self&&self&&self.Object===Object&&self,T=g||v||Function("return this")();P.exports=T},99351:P=>{P.exports=function W(f,g){if(("constructor"!==g||"function"!=typeof f[g])&&"__proto__"!=g)return f[g]}},4600:P=>{P.exports=function f(g){return this.__data__.set(g,"__lodash_hash_undefined__"),this}},31387:P=>{P.exports=function W(f){return this.__data__.has(f)}},24174:P=>{P.exports=function W(f){var g=-1,v=Array(f.size);return f.forEach(function(T){v[++g]=T}),v}},72185:(P,W,f)=>{var g=f(69510),T=f(10029)(g);P.exports=T},10029:P=>{var g=Date.now;P.exports=function v(T){var E=0,b=0;return function(){var A=g(),k=16-(A-b);if(b=A,k>0){if(++E>=800)return arguments[0]}else E=0;return T.apply(void 0,arguments)}}},13720:(P,W,f)=>{var g=f(9215);P.exports=function v(){this.__data__=new g,this.size=0}},64410:P=>{P.exports=function W(f){var g=this.__data__,v=g.delete(f);return this.size=g.size,v}},45576:P=>{P.exports=function W(f){return this.__data__.get(f)}},22247:P=>{P.exports=function W(f){return this.__data__.has(f)}},41585:(P,W,f)=>{var g=f(9215),v=f(51501),T=f(99850);P.exports=function b(A,k){var M=this.__data__;if(M instanceof g){var B=M.__data__;if(!v||B.length<199)return B.push([A,k]),this.size=++M.size,this;M=this.__data__=new T(B)}return M.set(A,k),this.size=M.size,this}},24977:P=>{P.exports=function W(f,g,v){for(var T=v-1,E=f.length;++T<E;)if(f[T]===g)return T;return-1}},52315:(P,W,f)=>{var g=f(75481),v=f(77609),T=f(81149);P.exports=function E(b){return v(b)?T(b):g(b)}},32855:(P,W,f)=>{var g=f(90719),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T=/\\(\\)?/g,E=g(function(b){var A=[];return 46===b.charCodeAt(0)&&A.push(""),b.replace(v,function(k,M,B,j){A.push(B?j.replace(T,"$1"):M||k)}),A});P.exports=E},68533:(P,W,f)=>{var g=f(44129);P.exports=function T(E){if("string"==typeof E||g(E))return E;var b=E+"";return"0"==b&&1/E==-1/0?"-0":b}},52827:P=>{var f=Function.prototype.toString;P.exports=function g(v){if(null!=v){try{return f.call(v)}catch(T){}try{return v+""}catch(T){}}return""}},42760:P=>{var W=/\s/;P.exports=function f(g){for(var v=g.length;v--&&W.test(g.charAt(v)););return v}},81149:P=>{var W="\\ud800-\\udfff",b="["+W+"]",A="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",k="\\ud83c[\\udffb-\\udfff]",B="[^"+W+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",te="(?:"+A+"|"+k+")?",le="[\\ufe0e\\ufe0f]?",ae=le+te+"(?:\\u200d(?:"+[B,j,L].join("|")+")"+le+te+")*",he="(?:"+[B+A+"?",A,j,L,b].join("|")+")",fe=RegExp(k+"(?="+k+")|"+he+ae,"g");P.exports=function ee(ge){for(var Te=fe.lastIndex=0;fe.test(ge);)++Te;return Te}},11094:(P,W,f)=>{var g=f(44462);P.exports=function T(E){return g(E,4)}},90733:(P,W,f)=>{var g=f(44462);P.exports=function E(b){return g(b,5)}},76684:P=>{P.exports=function W(f){return function(){return f}}},28800:(P,W,f)=>{var g=f(23269),v=f(20217),T=f(93342),E=f(16555),b=Object.prototype,A=b.hasOwnProperty,k=g(function(M,B){M=Object(M);var j=-1,L=B.length,X=L>2?B[2]:void 0;for(X&&T(B[0],B[1],X)&&(L=1);++j<L;)for(var te=B[j],le=E(te),i=-1,ae=le.length;++i<ae;){var he=le[i],fe=M[he];(void 0===fe||v(fe,b[he])&&!A.call(M,he))&&(M[he]=te[he])}return M});P.exports=k},35474:(P,W,f)=>{P.exports=f(89851)},20217:P=>{P.exports=function W(f,g){return f===g||f!=f&&g!=g}},35281:(P,W,f)=>{var g=f(69779),v=f(33609),T=f(96517),E=f(21503);P.exports=function b(A,k){return(E(A)?g:v)(A,T(k,3))}},62516:(P,W,f)=>{var T=f(24653)(f(36397));P.exports=T},36397:(P,W,f)=>{var g=f(65317),v=f(96517),T=f(44401),E=Math.max;P.exports=function b(A,k,M){var B=null==A?0:A.length;if(!B)return-1;var j=null==M?0:T(M);return j<0&&(j=E(B+j,0)),g(A,v(k,3),j)}},22274:(P,W,f)=>{var g=f(50686);P.exports=function v(T){return null!=T&&T.length?g(T,1):[]}},89851:(P,W,f)=>{var g=f(96837),v=f(43132),T=f(21481),E=f(21503);P.exports=function b(A,k){return(E(A)?g:v)(A,T(k))}},41176:(P,W,f)=>{var g=f(30755),v=f(21481),T=f(16555);P.exports=function E(b,A){return null==b?b:g(b,v(A),T)}},8817:(P,W,f)=>{var g=f(15456);P.exports=function v(T,E,b){var A=null==T?void 0:g(T,E);return void 0===A?b:A}},54842:(P,W,f)=>{var g=f(84781),v=f(47283);P.exports=function T(E,b){return null!=E&&v(E,b,g)}},11172:(P,W,f)=>{var g=f(69989),v=f(47283);P.exports=function T(E,b){return null!=E&&v(E,b,g)}},32608:P=>{P.exports=function W(f){return f}},77151:(P,W,f)=>{var g=f(60186),v=f(72671),T=Object.prototype,E=T.hasOwnProperty,b=T.propertyIsEnumerable,A=g(function(){return arguments}())?g:function(k){return v(k)&&E.call(k,"callee")&&!b.call(k,"callee")};P.exports=A},21503:P=>{P.exports=Array.isArray},56507:(P,W,f)=>{var g=f(75946),v=f(96231);P.exports=function T(E){return null!=E&&v(E.length)&&!g(E)}},21330:(P,W,f)=>{var g=f(56507),v=f(72671);P.exports=function T(E){return v(E)&&g(E)}},80891:(P,W,f)=>{P=f.nmd(P);var g=f(12119),v=f(63580),T=W&&!W.nodeType&&W,E=T&&P&&!P.nodeType&&P,A=E&&E.exports===T?g.Buffer:void 0;P.exports=(A?A.isBuffer:void 0)||v},71973:(P,W,f)=>{var g=f(81172),v=f(28794),T=f(77151),E=f(21503),b=f(56507),A=f(80891),k=f(45488),M=f(48159),X=Object.prototype.hasOwnProperty;P.exports=function te(le){if(null==le)return!0;if(b(le)&&(E(le)||"string"==typeof le||"function"==typeof le.splice||A(le)||M(le)||T(le)))return!le.length;var i=v(le);if("[object Map]"==i||"[object Set]"==i)return!le.size;if(k(le))return!g(le).length;for(var ae in le)if(X.call(le,ae))return!1;return!0}},75946:(P,W,f)=>{var g=f(93337),v=f(25940);P.exports=function k(M){if(!v(M))return!1;var B=g(M);return"[object Function]"==B||"[object GeneratorFunction]"==B||"[object AsyncFunction]"==B||"[object Proxy]"==B}},96231:P=>{P.exports=function f(g){return"number"==typeof g&&g>-1&&g%1==0&&g<=9007199254740991}},13222:(P,W,f)=>{var g=f(97021),v=f(85647),T=f(73597),E=T&&T.isMap,b=E?v(E):g;P.exports=b},25940:P=>{P.exports=function W(f){var g=typeof f;return null!=f&&("object"==g||"function"==g)}},72671:P=>{P.exports=function W(f){return null!=f&&"object"==typeof f}},97614:(P,W,f)=>{var g=f(93337),v=f(29519),T=f(72671),k=Function.prototype.toString,M=Object.prototype.hasOwnProperty,B=k.call(Object);P.exports=function j(L){if(!T(L)||"[object Object]"!=g(L))return!1;var X=v(L);if(null===X)return!0;var te=M.call(X,"constructor")&&X.constructor;return"function"==typeof te&&te instanceof te&&k.call(te)==B}},90799:(P,W,f)=>{var g=f(771),v=f(85647),T=f(73597),E=T&&T.isSet,b=E?v(E):g;P.exports=b},30248:(P,W,f)=>{var g=f(93337),v=f(21503),T=f(72671);P.exports=function b(A){return"string"==typeof A||!v(A)&&T(A)&&"[object String]"==g(A)}},44129:(P,W,f)=>{var g=f(93337),v=f(72671);P.exports=function E(b){return"symbol"==typeof b||v(b)&&"[object Symbol]"==g(b)}},48159:(P,W,f)=>{var g=f(1083),v=f(85647),T=f(73597),E=T&&T.isTypedArray,b=E?v(E):g;P.exports=b},34235:P=>{P.exports=function W(f){return void 0===f}},118:(P,W,f)=>{var g=f(72271),v=f(81172),T=f(56507);P.exports=function E(b){return T(b)?g(b):v(b)}},16555:(P,W,f)=>{var g=f(72271),v=f(92809),T=f(56507);P.exports=function E(b){return T(b)?g(b,!0):v(b)}},25809:P=>{P.exports=function W(f){var g=null==f?0:f.length;return g?f[g-1]:void 0}},17489:function(P,W,f){var g;P=f.nmd(P),function(){var v,A="Expected a function",M="__lodash_hash_undefined__",j="__lodash_placeholder__",C=128,Et=1/0,Jn=9007199254740991,Le=4294967295,Cn=[["ary",C],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Be="[object Arguments]",Ce="[object Array]",lt="[object Boolean]",mt="[object Date]",mn="[object Error]",zn="[object Function]",di="[object GeneratorFunction]",Yt="[object Map]",jt="[object Number]",G="[object Object]",re="[object Promise]",Ge="[object RegExp]",Ye="[object Set]",ct="[object String]",It="[object Symbol]",rn="[object WeakMap]",on="[object ArrayBuffer]",Un="[object DataView]",Hn="[object Float32Array]",Ur="[object Float64Array]",Pn="[object Int8Array]",Gn="[object Int16Array]",jn="[object Int32Array]",Kn="[object Uint8Array]",mr="[object Uint8ClampedArray]",Gr="[object Uint16Array]",sr="[object Uint32Array]",nr=/\b__p \+= '';/g,bo=/\b(__p \+=) '' \+/g,Na=/(__e\(.*?\)|\b__t\)) \+\n'';/g,eo=/&(?:amp|lt|gt|quot|#39);/g,Go=/[&<>"']/g,Zr=RegExp(eo.source),sn=RegExp(Go.source),_o=/<%-([\s\S]+?)%>/g,la=/<%([\s\S]+?)%>/g,Co=/<%=([\s\S]+?)%>/g,to=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zt=/^\w*$/,ca=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/[\\^$.*+?()[\]{}|]/g,Wo=RegExp(Mi.source),wo=/^\s+/,Dn=/\s/,hi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,no=/\{\n\/\* \[wrapped with (.+)\] \*/,Fn=/,? & /,So=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oi=/[()=,{}\[\]\/\s]/,ro=/\\(\\)?/g,Ra=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fa=/\w*$/,pi=/^[-+]0x[0-9a-f]+$/i,da=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,To=/^0o[0-7]+$/i,$o=/^(?:0|[1-9]\d*)$/,ha=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=/($^)/,ki=/['\n\r\u2028\u2029\\]/g,Li="\\ud800-\\udfff",io="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ve="\\u2700-\\u27bf",Wn="a-z\\xdf-\\xf6\\xf8-\\xff",Ni="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",ao="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fa="["+Li+"]",pa="["+ao+"]",pr="["+io+"]",Wr="\\d+",yr="["+ve+"]",Yo="["+Wn+"]",Di="[^"+Li+ao+Wr+ve+Wn+Ni+"]",qr="\\ud83c[\\udffb-\\udfff]",Eo="[^"+Li+"]",Po="(?:\\ud83c[\\udde6-\\uddff]){2}",Mr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ci="["+Ni+"]",Fi="(?:"+Yo+"|"+Di+")",ga="(?:"+Ci+"|"+Di+")",Xo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Io="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Vi="(?:"+pr+"|"+qr+")?",dn="["+Ri+"]?",wi=dn+Vi+"(?:\\u200d(?:"+[Eo,Po,Mr].join("|")+")"+dn+Vi+")*",rr="(?:"+[yr,Po,Mr].join("|")+")"+wi,Va="(?:"+[Eo+pr+"?",pr,Po,Mr,Fa].join("|")+")",_r=RegExp("['\u2019]","g"),Ko=RegExp(pr,"g"),Or=RegExp(qr+"(?="+qr+")|"+Va+wi,"g"),so=RegExp([Ci+"?"+Yo+"+"+Xo+"(?="+[pa,Ci,"$"].join("|")+")",ga+"+"+Io+"(?="+[pa,Ci+Fi,"$"].join("|")+")",Ci+"?"+Fi+"+"+Xo,Ci+"+"+Io,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wr,rr].join("|"),"g"),Hi=RegExp("[\\u200d"+Li+io+Ri+"]"),ji=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ba=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qo=-1,Xt={};Xt[Hn]=Xt[Ur]=Xt[Pn]=Xt[Gn]=Xt[jn]=Xt[Kn]=Xt[mr]=Xt[Gr]=Xt[sr]=!0,Xt[Be]=Xt[Ce]=Xt[on]=Xt[lt]=Xt[Un]=Xt[mt]=Xt[mn]=Xt[zn]=Xt[Yt]=Xt[jt]=Xt[G]=Xt[Ge]=Xt[Ye]=Xt[ct]=Xt[rn]=!1;var wn={};wn[Be]=wn[Ce]=wn[on]=wn[Un]=wn[lt]=wn[mt]=wn[Hn]=wn[Ur]=wn[Pn]=wn[Gn]=wn[jn]=wn[Yt]=wn[jt]=wn[G]=wn[Ge]=wn[Ye]=wn[ct]=wn[It]=wn[Kn]=wn[mr]=wn[Gr]=wn[sr]=!0,wn[mn]=wn[zn]=wn[rn]=!1;var Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},oe=parseFloat,de=parseInt,Ie="object"==typeof global&&global&&global.Object===Object&&global,we="object"==typeof self&&self&&self.Object===Object&&self,l=Ie||we||Function("return this")(),d=W&&!W.nodeType&&W,x=d&&P&&!P.nodeType&&P,w=x&&x.exports===d,N=w&&Ie.process,F=function(){try{return x&&x.require&&x.require("util").types||N&&N.binding&&N.binding("util")}catch(Ue){}}(),Y=F&&F.isArrayBuffer,ue=F&&F.isDate,se=F&&F.isMap,Ee=F&&F.isRegExp,Fe=F&&F.isSet,Ke=F&&F.isTypedArray;function ke(be,Ue,De){switch(De.length){case 0:return be.call(Ue);case 1:return be.call(Ue,De[0]);case 2:return be.call(Ue,De[0],De[1]);case 3:return be.call(Ue,De[0],De[1],De[2])}return be.apply(Ue,De)}function $e(be,Ue,De,qe){for(var _t=-1,yt=null==be?0:be.length;++_t<yt;){var qn=be[_t];Ue(qe,qn,De(qn),be)}return qe}function vt(be,Ue){for(var De=-1,qe=null==be?0:be.length;++De<qe&&!1!==Ue(be[De],De,be););return be}function Ut(be,Ue){for(var De=null==be?0:be.length;De--&&!1!==Ue(be[De],De,be););return be}function St(be,Ue){for(var De=-1,qe=null==be?0:be.length;++De<qe;)if(!Ue(be[De],De,be))return!1;return!0}function In(be,Ue){for(var De=-1,qe=null==be?0:be.length,_t=0,yt=[];++De<qe;){var qn=be[De];Ue(qn,De,be)&&(yt[_t++]=qn)}return yt}function Vn(be,Ue){return!(null==be||!be.length)&&$n(be,Ue,0)>-1}function kr(be,Ue,De){for(var qe=-1,_t=null==be?0:be.length;++qe<_t;)if(De(Ue,be[qe]))return!0;return!1}function At(be,Ue){for(var De=-1,qe=null==be?0:be.length,_t=Array(qe);++De<qe;)_t[De]=Ue(be[De],De,be);return _t}function Tt(be,Ue){for(var De=-1,qe=Ue.length,_t=be.length;++De<qe;)be[_t+De]=Ue[De];return be}function Cr(be,Ue,De,qe){var _t=-1,yt=null==be?0:be.length;for(qe&&yt&&(De=be[++_t]);++_t<yt;)De=Ue(De,be[_t],_t,be);return De}function bn(be,Ue,De,qe){var _t=null==be?0:be.length;for(qe&&_t&&(De=be[--_t]);_t--;)De=Ue(De,be[_t],_t,be);return De}function Re(be,Ue){for(var De=-1,qe=null==be?0:be.length;++De<qe;)if(Ue(be[De],De,be))return!0;return!1}var wr=Ha("length");function mi(be,Ue,De){var qe;return De(be,function(_t,yt,qn){if(Ue(_t,yt,qn))return qe=yt,!1}),qe}function Yr(be,Ue,De,qe){for(var _t=be.length,yt=De+(qe?1:-1);qe?yt--:++yt<_t;)if(Ue(be[yt],yt,be))return yt;return-1}function $n(be,Ue,De){return Ue==Ue?function ql(be,Ue,De){for(var qe=De-1,_t=be.length;++qe<_t;)if(be[qe]===Ue)return qe;return-1}(be,Ue,De):Yr(be,Vr,De)}function zi(be,Ue,De,qe){for(var _t=De-1,yt=be.length;++_t<yt;)if(qe(be[_t],Ue))return _t;return-1}function Vr(be){return be!=be}function Ti(be,Ue){var De=null==be?0:be.length;return De?Yn(be,Ue)/De:NaN}function Ha(be){return function(Ue){return null==Ue?v:Ue[be]}}function Ui(be){return function(Ue){return null==be?v:be[Ue]}}function uo(be,Ue,De,qe,_t){return _t(be,function(yt,qn,An){De=qe?(qe=!1,yt):Ue(De,yt,qn,An)}),De}function Yn(be,Ue){for(var De,qe=-1,_t=be.length;++qe<_t;){var yt=Ue(be[qe]);yt!==v&&(De=De===v?yt:De+yt)}return De}function Jo(be,Ue){for(var De=-1,qe=Array(be);++De<be;)qe[De]=Ue(De);return qe}function Vu(be){return be&&be.slice(0,wt(be)+1).replace(wo,"")}function On(be){return function(Ue){return be(Ue)}}function Ss(be,Ue){return At(Ue,function(De){return be[De]})}function Zo(be,Ue){return be.has(Ue)}function Bu(be,Ue){for(var De=-1,qe=be.length;++De<qe&&$n(Ue,be[De],0)>-1;);return De}function Js(be,Ue){for(var De=be.length;De--&&$n(Ue,be[De],0)>-1;);return De}function Ql(be,Ue){for(var De=be.length,qe=0;De--;)be[De]===Ue&&++qe;return qe}var ja=Ui({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Jl=Ui({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zl(be){return"\\"+Q[be]}function Gi(be){return Hi.test(be)}function ti(be){var Ue=-1,De=Array(be.size);return be.forEach(function(qe,_t){De[++Ue]=[_t,qe]}),De}function Ei(be,Ue){return function(De){return be(Ue(De))}}function lo(be,Ue){for(var De=-1,qe=be.length,_t=0,yt=[];++De<qe;){var qn=be[De];(qn===Ue||qn===j)&&(be[De]=j,yt[_t++]=De)}return yt}function ur(be){var Ue=-1,De=Array(be.size);return be.forEach(function(qe){De[++Ue]=qe}),De}function co(be){return Gi(be)?function za(be){for(var Ue=Or.lastIndex=0;Or.test(be);)++Ue;return Ue}(be):wr(be)}function ir(be){return Gi(be)?function yi(be){return be.match(Or)||[]}(be):function Fr(be){return be.split("")}(be)}function wt(be){for(var Ue=be.length;Ue--&&Dn.test(be.charAt(Ue)););return Ue}var Br=Ui({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),lr=function be(Ue){var a,De=(Ue=null==Ue?l:lr.defaults(l.Object(),Ue,lr.pick(l,Ba))).Array,qe=Ue.Date,_t=Ue.Error,yt=Ue.Function,qn=Ue.Math,An=Ue.Object,Ua=Ue.RegExp,zu=Ue.String,q=Ue.TypeError,ce=De.prototype,We=An.prototype,Se=Ue["__core-js_shared__"],He=yt.prototype.toString,je=We.hasOwnProperty,at=0,dt=(a=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",xt=We.toString,Ot=He.call(An),Rt=l._,Mt=Ua("^"+He.call(je).replace(Mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),En=w?Ue.Buffer:v,st=Ue.Symbol,hn=Ue.Uint8Array,yn=En?En.allocUnsafe:v,er=Ei(An.getPrototypeOf,An),tn=An.create,Mo=We.propertyIsEnumerable,Sr=ce.splice,Hr=st?st.isConcatSpreadable:v,Ga=st?st.iterator:v,ya=st?st.toStringTag:v,Es=function(){try{var a=Pa(An,"defineProperty");return a({},"",{}),a}catch(u){}}(),ec=Ue.clearTimeout!==l.clearTimeout&&Ue.clearTimeout,zf=qe&&qe.now!==l.Date.now&&qe.now,Uf=Ue.setTimeout!==l.setTimeout&&Ue.setTimeout,Wa=qn.ceil,Ps=qn.floor,qs=An.getOwnPropertySymbols,Uu=En?En.isBuffer:v,Oo=Ue.isFinite,eu=ce.join,tc=Ei(An.keys,An),gr=qn.max,Lr=qn.min,nc=qe.now,tu=Ue.parseInt,Gu=qn.random,$a=ce.reverse,xa=Pa(Ue,"DataView"),ba=Pa(Ue,"Map"),nu=Pa(Ue,"Promise"),Kt=Pa(Ue,"Set"),Ya=Pa(Ue,"WeakMap"),ni=Pa(An,"create"),ko=Ya&&new Ya,_a={},Is=Ia(xa),rc=Ia(ba),Wu=Ia(nu),Gf=Ia(Kt),Wf=Ia(Ya),ru=st?st.prototype:v,As=ru?ru.valueOf:v,ic=ru?ru.toString:v;function Z(a){if(tr(a)&&!Zt(a)&&!(a instanceof Jt)){if(a instanceof Pi)return a;if(je.call(a,"__wrapped__"))return Xc(a)}return new Pi(a)}var Xa=function(){function a(){}return function(u){if(!Qn(u))return{};if(tn)return tn(u);a.prototype=u;var p=new a;return a.prototype=v,p}}();function iu(){}function Pi(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=v}function Jt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function ea(a){var u=-1,p=null==a?0:a.length;for(this.clear();++u<p;){var I=a[u];this.set(I[0],I[1])}}function Lo(a){var u=-1,p=null==a?0:a.length;for(this.clear();++u<p;){var I=a[u];this.set(I[0],I[1])}}function fo(a){var u=-1,p=null==a?0:a.length;for(this.clear();++u<p;){var I=a[u];this.set(I[0],I[1])}}function Ca(a){var u=-1,p=null==a?0:a.length;for(this.__data__=new fo;++u<p;)this.add(a[u])}function Wi(a){var u=this.__data__=new Lo(a);this.size=u.size}function ad(a,u){var p=Zt(a),I=!p&&ka(a),z=!p&&!I&&Ho(a),e=!p&&!I&&!z&&vs(a),n=p||I||z||e,t=n?Jo(a.length,zu):[],r=t.length;for(var o in a)(u||je.call(a,o))&&(!n||!("length"==o||z&&("offset"==o||"parent"==o)||e&&("buffer"==o||"byteLength"==o||"byteOffset"==o)||vo(o,r)))&&t.push(o);return t}function sd(a){var u=a.length;return u?a[Rs(0,u-1)]:v}function Eg(a,u){return Eu(ai(a),wa(u,0,a.length))}function Pg(a){return Eu(ai(a))}function uc(a,u,p){(p!==v&&!Zi(a[u],p)||p===v&&!(u in a))&&Ro(a,u,p)}function ou(a,u,p){var I=a[u];(!je.call(a,u)||!Zi(I,p)||p===v&&!(u in a))&&Ro(a,u,p)}function Ka(a,u){for(var p=a.length;p--;)if(Zi(a[p][0],u))return p;return-1}function Ig(a,u,p,I){return ho(a,function(z,e,n){u(I,z,p(z),n)}),I}function lc(a,u){return a&&go(u,Er(u),a)}function Ro(a,u,p){"__proto__"==u&&Es?Es(a,u,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[u]=p}function cc(a,u){for(var p=-1,I=u.length,z=De(I),e=null==a;++p<I;)z[p]=e?v:ys(a,u[p]);return z}function wa(a,u,p){return a==a&&(p!==v&&(a=a<=p?a:p),u!==v&&(a=a>=u?a:u)),a}function $i(a,u,p,I,z,e){var n,t=1&u,r=2&u,o=4&u;if(p&&(n=z?p(a,I,z,e):p(a)),n!==v)return n;if(!Qn(a))return a;var s=Zt(a);if(s){if(n=function us(a){var u=a.length,p=new a.constructor(u);return u&&"string"==typeof a[0]&&je.call(a,"index")&&(p.index=a.index,p.input=a.input),p}(a),!t)return ai(a,n)}else{var c=zr(a),h=c==zn||c==di;if(Ho(a))return ll(a,t);if(c==G||c==Be||h&&!z){if(n=r||h?{}:ml(a),!t)return r?function Fs(a,u){return go(a,Hc(a),u)}(a,function ud(a,u){return a&&go(u,li(u),a)}(n,a)):function Gt(a,u){return go(a,vl(a),u)}(a,lc(n,a))}else{if(!wn[c])return z?a:{};n=function Pd(a,u,p){var I=a.constructor;switch(u){case on:return vu(a);case lt:case mt:return new I(+a);case Un:return function Tc(a,u){var p=u?vu(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}(a,p);case Hn:case Ur:case Pn:case Gn:case jn:case Kn:case mr:case Gr:case sr:return Ic(a,p);case Yt:return new I;case jt:case ct:return new I(a);case Ge:return function Ec(a){var u=new a.constructor(a.source,fa.exec(a));return u.lastIndex=a.lastIndex,u}(a);case Ye:return new I;case It:return function Pc(a){return As?An(As.call(a)):{}}(a)}}(a,c,t)}}e||(e=new Wi);var m=e.get(a);if(m)return m;e.set(a,n),mf(a)?a.forEach(function(y){n.add($i(y,u,p,y,a,e))}):pf(a)&&a.forEach(function(y,H){n.set(H,$i(y,u,p,H,a,e))});var S=s?v:(o?r?hl:Yi:r?li:Er)(a);return vt(S||a,function(y,H){S&&(y=a[H=y]),ou(n,H,$i(y,u,p,H,a,e))}),n}function ta(a,u,p){var I=p.length;if(null==a)return!I;for(a=An(a);I--;){var z=p[I],n=a[z];if(n===v&&!(z in a)||!(0,u[z])(n))return!1}return!0}function Sa(a,u,p){if("function"!=typeof a)throw new q(A);return Gs(function(){a.apply(v,p)},u)}function Qa(a,u,p,I){var z=-1,e=Vn,n=!0,t=a.length,r=[],o=u.length;if(!t)return r;p&&(u=At(u,On(p))),I?(e=kr,n=!1):u.length>=200&&(e=Zo,n=!1,u=new Ca(u));e:for(;++z<t;){var s=a[z],c=null==p?s:p(s);if(s=I||0!==s?s:0,n&&c==c){for(var h=o;h--;)if(u[h]===c)continue e;r.push(s)}else e(u,c,I)||r.push(s)}return r}Z.templateSettings={escape:_o,evaluate:la,interpolate:Co,variable:"",imports:{_:Z}},(Z.prototype=iu.prototype).constructor=Z,(Pi.prototype=Xa(iu.prototype)).constructor=Pi,(Jt.prototype=Xa(iu.prototype)).constructor=Jt,ea.prototype.clear=function $f(){this.__data__=ni?ni(null):{},this.size=0},ea.prototype.delete=function Yf(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},ea.prototype.get=function Xf(a){var u=this.__data__;if(ni){var p=u[a];return p===M?v:p}return je.call(u,a)?u[a]:v},ea.prototype.has=function Kf(a){var u=this.__data__;return ni?u[a]!==v:je.call(u,a)},ea.prototype.set=function Qf(a,u){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=ni&&u===v?M:u,this},Lo.prototype.clear=function Jf(){this.__data__=[],this.size=0},Lo.prototype.delete=function Zf(a){var u=this.__data__,p=Ka(u,a);return!(p<0||(p==u.length-1?u.pop():Sr.call(u,p,1),--this.size,0))},Lo.prototype.get=function qf(a){var u=this.__data__,p=Ka(u,a);return p<0?v:u[p][1]},Lo.prototype.has=function ed(a){return Ka(this.__data__,a)>-1},Lo.prototype.set=function td(a,u){var p=this.__data__,I=Ka(p,a);return I<0?(++this.size,p.push([a,u])):p[I][1]=u,this},fo.prototype.clear=function nd(){this.size=0,this.__data__={hash:new ea,map:new(ba||Lo),string:new ea}},fo.prototype.delete=function rd(a){var u=Su(this,a).delete(a);return this.size-=u?1:0,u},fo.prototype.get=function Xr(a){return Su(this,a).get(a)},fo.prototype.has=function id(a){return Su(this,a).has(a)},fo.prototype.set=function $u(a,u){var p=Su(this,a),I=p.size;return p.set(a,u),this.size+=p.size==I?0:1,this},Ca.prototype.add=Ca.prototype.push=function No(a){return this.__data__.set(a,M),this},Ca.prototype.has=function Ms(a){return this.__data__.has(a)},Wi.prototype.clear=function Cg(){this.__data__=new Lo,this.size=0},Wi.prototype.delete=function wg(a){var u=this.__data__,p=u.delete(a);return this.size=u.size,p},Wi.prototype.get=function od(a){return this.__data__.get(a)},Wi.prototype.has=function Sg(a){return this.__data__.has(a)},Wi.prototype.set=function Tg(a,u){var p=this.__data__;if(p instanceof Lo){var I=p.__data__;if(!ba||I.length<199)return I.push([a,u]),this.size=++p.size,this;p=this.__data__=new fo(I)}return p.set(a,u),this.size=p.size,this};var ho=Mc(po),Do=Mc(Za,!0);function Ja(a,u){var p=!0;return ho(a,function(I,z,e){return p=!!u(I,z,e)}),p}function cn(a,u,p){for(var I=-1,z=a.length;++I<z;){var e=a[I],n=u(e);if(null!=n&&(t===v?n==n&&!Rr(n):p(n,t)))var t=n,r=e}return r}function Os(a,u){var p=[];return ho(a,function(I,z,e){u(I,z,e)&&p.push(I)}),p}function Nr(a,u,p,I,z){var e=-1,n=a.length;for(p||(p=yl),z||(z=[]);++e<n;){var t=a[e];u>0&&p(t)?u>1?Nr(t,u-1,p,I,z):Tt(z,t):I||(z[z.length]=t)}return z}var Yu=fl(),fc=fl(!0);function po(a,u){return a&&Yu(a,u,Er)}function Za(a,u){return a&&fc(a,u,Er)}function qa(a,u){return In(u,function(p){return qi(a[p])})}function cr(a,u){for(var p=0,I=(u=ra(u,a)).length;null!=a&&p<I;)a=a[mo(u[p++])];return p&&p==I?a:v}function ks(a,u,p){var I=u(a);return Zt(a)?I:Tt(I,p(a))}function Tr(a){return null==a?a===v?"[object Undefined]":"[object Null]":ya&&ya in An(a)?function Sd(a){var u=je.call(a,ya),p=a[ya];try{a[ya]=v;var I=!0}catch(e){}var z=xt.call(a);return I&&(u?a[ya]=p:delete a[ya]),z}(a):function js(a){return xt.call(a)}(a)}function au(a,u){return a>u}function dc(a,u){return null!=a&&je.call(a,u)}function ld(a,u){return null!=a&&u in An(a)}function su(a,u,p){for(var I=p?kr:Vn,z=a[0].length,e=a.length,n=e,t=De(e),r=1/0,o=[];n--;){var s=a[n];n&&u&&(s=At(s,On(u))),r=Lr(s.length,r),t[n]=!p&&(u||z>=120&&s.length>=120)?new Ca(n&&s):v}s=a[0];var c=-1,h=t[0];e:for(;++c<z&&o.length<r;){var m=s[c],_=u?u(m):m;if(m=p||0!==m?m:0,!(h?Zo(h,_):I(o,_,p))){for(n=e;--n;){var S=t[n];if(!(S?Zo(S,_):I(a[n],_,p)))continue e}h&&h.push(_),o.push(m)}}return o}function Ls(a,u,p){var I=null==(a=cs(a,u=ra(u,a)))?a:a[mo(xr(u))];return null==I?v:ke(I,a,p)}function hc(a){return tr(a)&&Tr(a)==Be}function es(a,u,p,I,z){return a===u||(null==a||null==u||!tr(a)&&!tr(u)?a!=a&&u!=u:function Qu(a,u,p,I,z,e){var n=Zt(a),t=Zt(u),r=n?Ce:zr(a),o=t?Ce:zr(u),s=(r=r==Be?G:r)==G,c=(o=o==Be?G:o)==G,h=r==o;if(h&&Ho(a)){if(!Ho(u))return!1;n=!0,s=!1}if(h&&!s)return e||(e=new Wi),n||vs(a)?Bc(a,u,p,I,z,e):function Cd(a,u,p,I,z,e,n){switch(p){case Un:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case on:return!(a.byteLength!=u.byteLength||!e(new hn(a),new hn(u)));case lt:case mt:case jt:return Zi(+a,+u);case mn:return a.name==u.name&&a.message==u.message;case Ge:case ct:return a==u+"";case Yt:var t=ti;case Ye:if(t||(t=ur),a.size!=u.size&&!(1&I))return!1;var o=n.get(a);if(o)return o==u;I|=2,n.set(a,u);var s=Bc(t(a),t(u),I,z,e,n);return n.delete(a),s;case It:if(As)return As.call(a)==As.call(u)}return!1}(a,u,r,p,I,z,e);if(!(1&p)){var m=s&&je.call(a,"__wrapped__"),_=c&&je.call(u,"__wrapped__");if(m||_){var S=m?a.value():a,y=_?u.value():u;return e||(e=new Wi),z(S,y,p,I,e)}}return!!h&&(e||(e=new Wi),function wd(a,u,p,I,z,e){var n=1&p,t=Yi(a),r=t.length;if(r!=Yi(u).length&&!n)return!1;for(var c=r;c--;){var h=t[c];if(!(n?h in u:je.call(u,h)))return!1}var m=e.get(a),_=e.get(u);if(m&&_)return m==u&&_==a;var S=!0;e.set(a,u),e.set(u,a);for(var y=n;++c<r;){var H=a[h=t[c]],J=u[h];if(I)var ne=n?I(J,H,h,u,a,e):I(H,J,h,a,u,e);if(!(ne===v?H===J||z(H,J,p,I,e):ne)){S=!1;break}y||(y="constructor"==h)}if(S&&!y){var ye=a.constructor,xe=u.constructor;ye!=xe&&"constructor"in a&&"constructor"in u&&!("function"==typeof ye&&ye instanceof ye&&"function"==typeof xe&&xe instanceof xe)&&(S=!1)}return e.delete(a),e.delete(u),S}(a,u,p,I,z,e))}(a,u,p,I,es,z))}function lu(a,u,p,I){var z=p.length,e=z,n=!I;if(null==a)return!e;for(a=An(a);z--;){var t=p[z];if(n&&t[2]?t[1]!==a[t[0]]:!(t[0]in a))return!1}for(;++z<e;){var r=(t=p[z])[0],o=a[r],s=t[1];if(n&&t[2]){if(o===v&&!(r in a))return!1}else{var c=new Wi;if(I)var h=I(o,s,r,a,u,c);if(!(h===v?es(s,o,3,I,c):h))return!1}}return!0}function Ju(a){return!(!Qn(a)||function Ad(a){return!!dt&&dt in a}(a))&&(qi(a)?Mt:Wt).test(Ia(a))}function gc(a){return"function"==typeof a?a:null==a?ci:"object"==typeof a?Zt(a)?ts(a[0],a[1]):vc(a):ua(a)}function cu(a){if(!Hs(a))return tc(a);var u=[];for(var p in An(a))je.call(a,p)&&"constructor"!=p&&u.push(p);return u}function qu(a,u){return a<u}function el(a,u){var p=-1,I=ui(a)?De(a.length):[];return ho(a,function(z,e,n){I[++p]=u(z,e,n)}),I}function vc(a){var u=gl(a);return 1==u.length&&u[0][2]?bl(u[0][0],u[0][1]):function(p){return p===a||lu(p,a,u)}}function ts(a,u){return xl(a)&&zc(u)?bl(mo(a),u):function(p){var I=ys(p,a);return I===v&&I===u?Qs(p,a):es(u,I,3)}}function Ea(a,u,p,I,z){a!==u&&Yu(u,function(e,n){if(z||(z=new Wi),Qn(e))!function Ns(a,u,p,I,z,e,n){var t=_l(a,p),r=_l(u,p),o=n.get(r);if(o)uc(a,p,o);else{var s=e?e(t,r,p+"",a,u,n):v,c=s===v;if(c){var h=Zt(r),m=!h&&Ho(r),_=!h&&!m&&vs(r);s=r,h||m||_?Zt(t)?s=t:hr(t)?s=ai(t):m?(c=!1,s=ll(r,!0)):_?(c=!1,s=Ic(r,!0)):s=[]:Ks(r)||ka(r)?(s=t,ka(t)?s=Uo(t):(!Qn(t)||qi(t))&&(s=ml(r))):c=!1}c&&(n.set(r,s),z(s,r,I,e,n),n.delete(r)),uc(a,p,s)}}(a,u,n,p,Ea,I,z);else{var t=I?I(_l(a,n),e,n+"",a,u,z):v;t===v&&(t=e),uc(a,n,t)}},li)}function fu(a,u){var p=a.length;if(p)return vo(u+=u<0?p:0,p)?a[u]:v}function mc(a,u,p){u=u.length?At(u,function(e){return Zt(e)?function(n){return cr(n,1===e.length?e[0]:e)}:e}):[ci];var I=-1;return u=At(u,On(Bt())),function Tn(be,Ue){var De=be.length;for(be.sort(Ue);De--;)be[De]=be[De].value;return be}(el(a,function(e,n,t){return{criteria:At(u,function(o){return o(e)}),index:++I,value:e}}),function(e,n){return function yd(a,u,p){for(var I=-1,z=a.criteria,e=u.criteria,n=z.length,t=p.length;++I<n;){var r=Ac(z[I],e[I]);if(r)return I>=t?r:r*("desc"==p[I]?-1:1)}return a.index-u.index}(e,n,p)})}function tl(a,u,p){for(var I=-1,z=u.length,e={};++I<z;){var n=u[I],t=cr(a,n);p(t,n)&&ns(e,ra(n,a),t)}return e}function nl(a,u,p,I){var z=I?zi:$n,e=-1,n=u.length,t=a;for(a===u&&(u=ai(u)),p&&(t=At(a,On(p)));++e<n;)for(var r=0,o=u[e],s=p?p(o):o;(r=z(t,s,r,I))>-1;)t!==a&&Sr.call(t,r,1),Sr.call(a,r,1);return a}function xc(a,u){for(var p=a?u.length:0,I=p-1;p--;){var z=u[p];if(p==I||z!==e){var e=z;vo(z)?Sr.call(a,z,1):al(a,z)}}return a}function Rs(a,u){return a+Ps(Gu()*(u-a+1))}function rl(a,u){var p="";if(!a||u<1||u>Jn)return p;do{u%2&&(p+=a),(u=Ps(u/2))&&(a+=a)}while(u);return p}function un(a,u){return Cl(zs(a,u,ci),a+"")}function bc(a){return sd(xs(a))}function gd(a,u){var p=xs(a);return Eu(p,wa(u,0,p.length))}function ns(a,u,p,I){if(!Qn(a))return a;for(var z=-1,e=(u=ra(u,a)).length,n=e-1,t=a;null!=t&&++z<e;){var r=mo(u[z]),o=p;if("__proto__"===r||"constructor"===r||"prototype"===r)return a;if(z!=n){var s=t[r];(o=I?I(s,r,t):v)===v&&(o=Qn(s)?s:vo(u[z+1])?[]:{})}ou(t,r,o),t=t[r]}return a}var _c=ko?function(a,u){return ko.set(a,u),a}:ci,du=Es?function(a,u){return Es(a,"toString",{configurable:!0,enumerable:!1,value:Vf(u),writable:!0})}:ci;function hu(a){return Eu(xs(a))}function ri(a,u,p){var I=-1,z=a.length;u<0&&(u=-u>z?0:z+u),(p=p>z?z:p)<0&&(p+=z),z=u>p?0:p-u>>>0,u>>>=0;for(var e=De(z);++I<z;)e[I]=a[I+u];return e}function vd(a,u){var p;return ho(a,function(I,z,e){return!(p=u(I,z,e))}),!!p}function pu(a,u,p){var I=0,z=null==a?I:a.length;if("number"==typeof u&&u==u&&z<=2147483647){for(;I<z;){var e=I+z>>>1,n=a[e];null!==n&&!Rr(n)&&(p?n<=u:n<u)?I=e+1:z=e}return z}return il(a,u,ci,p)}function il(a,u,p,I){var z=0,e=null==a?0:a.length;if(0===e)return 0;for(var n=(u=p(u))!=u,t=null===u,r=Rr(u),o=u===v;z<e;){var s=Ps((z+e)/2),c=p(a[s]),h=c!==v,m=null===c,_=c==c,S=Rr(c);if(n)var y=I||_;else y=o?_&&(I||h):t?_&&h&&(I||!m):r?_&&h&&!m&&(I||!S):!m&&!S&&(I?c<=u:c<u);y?z=s+1:e=s}return Lr(e,4294967294)}function ol(a,u){for(var p=-1,I=a.length,z=0,e=[];++p<I;){var n=a[p],t=u?u(n):n;if(!p||!Zi(t,r)){var r=t;e[z++]=0===n?0:n}}return e}function Cc(a){return"number"==typeof a?a:Rr(a)?NaN:+a}function ii(a){if("string"==typeof a)return a;if(Zt(a))return At(a,ii)+"";if(Rr(a))return ic?ic.call(a):"";var u=a+"";return"0"==u&&1/a==-Et?"-0":u}function na(a,u,p){var I=-1,z=Vn,e=a.length,n=!0,t=[],r=t;if(p)n=!1,z=kr;else if(e>=200){var o=u?null:Fc(a);if(o)return ur(o);n=!1,z=Zo,r=new Ca}else r=u?[]:t;e:for(;++I<e;){var s=a[I],c=u?u(s):s;if(s=p||0!==s?s:0,n&&c==c){for(var h=r.length;h--;)if(r[h]===c)continue e;u&&r.push(c),t.push(s)}else z(r,c,p)||(r!==t&&r.push(c),t.push(s))}return t}function al(a,u){return null==(a=cs(a,u=ra(u,a)))||delete a[mo(xr(u))]}function wc(a,u,p,I){return ns(a,u,p(cr(a,u)),I)}function gu(a,u,p,I){for(var z=a.length,e=I?z:-1;(I?e--:++e<z)&&u(a[e],e,a););return p?ri(a,I?0:e,I?e+1:z):ri(a,I?e+1:0,I?z:e)}function Sc(a,u){var p=a;return p instanceof Jt&&(p=p.value()),Cr(u,function(I,z){return z.func.apply(z.thisArg,Tt([I],z.args))},p)}function oi(a,u,p){var I=a.length;if(I<2)return I?na(a[0]):[];for(var z=-1,e=De(I);++z<I;)for(var n=a[z],t=-1;++t<I;)t!=z&&(e[z]=Qa(e[z]||n,a[t],u,p));return na(Nr(e,1),u,p)}function jr(a,u,p){for(var I=-1,z=a.length,e=u.length,n={};++I<z;)p(n,a[I],I<e?u[I]:v);return n}function Ds(a){return hr(a)?a:[]}function sl(a){return"function"==typeof a?a:ci}function ra(a,u){return Zt(a)?a:xl(a,u)?[a]:Yc(Mn(a))}var md=un;function ia(a,u,p){var I=a.length;return p=p===v?I:p,!u&&p>=I?a:ri(a,u,p)}var ul=ec||function(a){return l.clearTimeout(a)};function ll(a,u){if(u)return a.slice();var p=a.length,I=yn?yn(p):new a.constructor(p);return a.copy(I),I}function vu(a){var u=new a.constructor(a.byteLength);return new hn(u).set(new hn(a)),u}function Ic(a,u){var p=u?vu(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function Ac(a,u){if(a!==u){var p=a!==v,I=null===a,z=a==a,e=Rr(a),n=u!==v,t=null===u,r=u==u,o=Rr(u);if(!t&&!o&&!e&&a>u||e&&n&&r&&!t&&!o||I&&n&&r||!p&&r||!z)return 1;if(!I&&!e&&!o&&a<u||o&&p&&z&&!I&&!e||t&&p&&z||!n&&z||!r)return-1}return 0}function mu(a,u,p,I){for(var z=-1,e=a.length,n=p.length,t=-1,r=u.length,o=gr(e-n,0),s=De(r+o),c=!I;++t<r;)s[t]=u[t];for(;++z<n;)(c||z<e)&&(s[p[z]]=a[z]);for(;o--;)s[t++]=a[z++];return s}function cl(a,u,p,I){for(var z=-1,e=a.length,n=-1,t=p.length,r=-1,o=u.length,s=gr(e-t,0),c=De(s+o),h=!I;++z<s;)c[z]=a[z];for(var m=z;++r<o;)c[m+r]=u[r];for(;++n<t;)(h||z<e)&&(c[m+p[n]]=a[z++]);return c}function ai(a,u){var p=-1,I=a.length;for(u||(u=De(I));++p<I;)u[p]=a[p];return u}function go(a,u,p,I){var z=!p;p||(p={});for(var e=-1,n=u.length;++e<n;){var t=u[e],r=I?I(p[t],a[t],t,p,a):v;r===v&&(r=a[t]),z?Ro(p,t,r):ou(p,t,r)}return p}function si(a,u){return function(p,I){var z=Zt(p)?$e:Ig,e=u?u():{};return z(p,a,Bt(I,2),e)}}function rs(a){return un(function(u,p){var I=-1,z=p.length,e=z>1?p[z-1]:v,n=z>2?p[2]:v;for(e=a.length>3&&"function"==typeof e?(z--,e):v,n&&Kr(p[0],p[1],n)&&(e=z<3?v:e,z=1),u=An(u);++I<z;){var t=p[I];t&&a(u,t,I,e)}return u})}function Mc(a,u){return function(p,I){if(null==p)return p;if(!ui(p))return a(p,I);for(var z=p.length,e=u?z:-1,n=An(p);(u?e--:++e<z)&&!1!==I(n[e],e,n););return p}}function fl(a){return function(u,p,I){for(var z=-1,e=An(u),n=I(u),t=n.length;t--;){var r=n[a?t:++z];if(!1===p(e[r],r,e))break}return u}}function Oc(a){return function(u){var p=Gi(u=Mn(u))?ir(u):v,I=p?p[0]:u.charAt(0),z=p?ia(p,1).join(""):u.slice(1);return I[a]()+z}}function is(a){return function(u){return Cr(Wp(kf(u).replace(_r,"")),a,"")}}function os(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var p=Xa(a.prototype),I=a.apply(p,u);return Qn(I)?I:p}}function kc(a){return function(u,p,I){var z=An(u);if(!ui(u)){var e=Bt(p,3);u=Er(u),p=function(t){return e(z[t],t,z)}}var n=a(u,p,I);return n>-1?z[e?u[n]:n]:v}}function Lc(a){return Vo(function(u){var p=u.length,I=p,z=Pi.prototype.thru;for(a&&u.reverse();I--;){var e=u[I];if("function"!=typeof e)throw new q(A);if(z&&!n&&"wrapper"==wu(e))var n=new Pi([],!0)}for(I=n?I:p;++I<p;){var t=wu(e=u[I]),r="wrapper"==t?pl(e):v;n=r&&Bs(r[0])&&424==r[1]&&!r[4].length&&1==r[9]?n[wu(r[0])].apply(n,r[3]):1==e.length&&Bs(e)?n[t]():n.thru(e)}return function(){var o=arguments,s=o[0];if(n&&1==o.length&&Zt(s))return n.plant(s).value();for(var c=0,h=p?u[c].apply(this,o):s;++c<p;)h=u[c].call(this,h);return h}})}function yu(a,u,p,I,z,e,n,t,r,o){var s=u&C,c=1&u,h=2&u,m=24&u,_=512&u,S=h?v:os(a);return function y(){for(var H=arguments.length,J=De(H),ne=H;ne--;)J[ne]=arguments[ne];if(m)var ye=ss(y),xe=Ql(J,ye);if(I&&(J=mu(J,I,z,m)),e&&(J=cl(J,e,n,m)),H-=xe,m&&H<o){var Ae=lo(J,ye);return Dc(a,u,yu,y.placeholder,p,J,Ae,t,r,o-H)}var Me=c?p:this,O=h?Me[a]:a;return H=J.length,t?J=Us(J,t):_&&H>1&&J.reverse(),s&&r<H&&(J.length=r),this&&this!==l&&this instanceof y&&(O=S||os(O)),O.apply(Me,J)}}function Nc(a,u){return function(p,I){return function uu(a,u,p,I){return po(a,function(z,e,n){u(I,p(z),e,n)}),I}(p,a,u(I),{})}}function oa(a,u){return function(p,I){var z;if(p===v&&I===v)return u;if(p!==v&&(z=p),I!==v){if(z===v)return I;"string"==typeof p||"string"==typeof I?(p=ii(p),I=ii(I)):(p=Cc(p),I=Cc(I)),z=a(p,I)}return z}}function xu(a){return Vo(function(u){return u=At(u,On(Bt())),un(function(p){var I=this;return a(u,function(z){return ke(z,I,p)})})})}function bu(a,u){var p=(u=u===v?" ":ii(u)).length;if(p<2)return p?rl(u,a):u;var I=rl(u,Wa(a/co(u)));return Gi(u)?ia(ir(I),0,a).join(""):I.slice(0,a)}function Vs(a){return function(u,p,I){return I&&"number"!=typeof I&&Kr(u,p,I)&&(p=I=v),u=zo(u),p===v?(p=u,u=0):p=zo(p),function pd(a,u,p,I){for(var z=-1,e=gr(Wa((u-a)/(p||1)),0),n=De(e);e--;)n[I?e:++z]=a,a+=p;return n}(u,p,I=I===v?u<p?1:-1:zo(I),a)}}function as(a){return function(u,p){return"string"==typeof u&&"string"==typeof p||(u=Ai(u),p=Ai(p)),a(u,p)}}function Dc(a,u,p,I,z,e,n,t,r,o){var s=8&u;u|=s?32:64,4&(u&=~(s?64:32))||(u&=-4);var S=[a,u,z,s?e:v,s?n:v,s?v:e,s?v:n,t,r,o],y=p.apply(v,S);return Bs(a)&&Gc(y,S),y.placeholder=I,Wc(y,a,u)}function dl(a){var u=qn[a];return function(p,I){if(p=Ai(p),(I=null==I?0:Lr(an(I),292))&&Oo(p)){var z=(Mn(p)+"e").split("e");return+((z=(Mn(u(z[0]+"e"+(+z[1]+I)))+"e").split("e"))[0]+"e"+(+z[1]-I))}return u(p)}}var Fc=Kt&&1/ur(new Kt([,-0]))[1]==Et?function(a){return new Kt(a)}:Gl;function Vc(a){return function(u){var p=zr(u);return p==Yt?ti(u):p==Ye?function ju(be){var Ue=-1,De=Array(be.size);return be.forEach(function(qe){De[++Ue]=[qe,qe]}),De}(u):function va(be,Ue){return At(Ue,function(De){return[De,be[De]]})}(u,a(u))}}function Fo(a,u,p,I,z,e,n,t){var r=2&u;if(!r&&"function"!=typeof a)throw new q(A);var o=I?I.length:0;if(o||(u&=-97,I=z=v),n=n===v?n:gr(an(n),0),t=t===v?t:an(t),o-=z?z.length:0,64&u){var s=I,c=z;I=z=v}var h=r?v:pl(a),m=[a,u,p,I,z,s,c,e,n,t];if(h&&function xi(a,u){var p=a[1],I=u[1],z=p|I;if(!(z<131||(I==C&&8==p||I==C&&256==p&&a[7].length<=u[8]||384==I&&u[7].length<=u[8]&&8==p)))return a;1&I&&(a[2]=u[2],z|=1&p?0:4);var t=u[3];if(t){var r=a[3];a[3]=r?mu(r,t,u[4]):t,a[4]=r?lo(a[3],j):u[4]}(t=u[5])&&(a[5]=(r=a[5])?cl(r,t,u[6]):t,a[6]=r?lo(a[5],j):u[6]),(t=u[7])&&(a[7]=t),I&C&&(a[8]=null==a[8]?u[8]:Lr(a[8],u[8])),null==a[9]&&(a[9]=u[9]),a[0]=u[0],a[1]=z}(m,h),a=m[0],u=m[1],p=m[2],I=m[3],z=m[4],!(t=m[9]=m[9]===v?r?0:a.length:gr(m[9]-o,0))&&24&u&&(u&=-25),u&&1!=u)_=8==u||16==u?function bd(a,u,p){var I=os(a);return function z(){for(var e=arguments.length,n=De(e),t=e,r=ss(z);t--;)n[t]=arguments[t];var o=e<3&&n[0]!==r&&n[e-1]!==r?[]:lo(n,r);return(e-=o.length)<p?Dc(a,u,yu,z.placeholder,v,n,o,v,v,p-e):ke(this&&this!==l&&this instanceof z?I:a,this,n)}}(a,u,t):32!=u&&33!=u||z.length?yu.apply(v,m):function Rc(a,u,p,I){var z=1&u,e=os(a);return function n(){for(var t=-1,r=arguments.length,o=-1,s=I.length,c=De(s+r),h=this&&this!==l&&this instanceof n?e:a;++o<s;)c[o]=I[o];for(;r--;)c[o++]=arguments[++t];return ke(h,z?p:this,c)}}(a,u,p,I);else var _=function xd(a,u,p){var I=1&u,z=os(a);return function e(){return(this&&this!==l&&this instanceof e?z:a).apply(I?p:this,arguments)}}(a,u,p);return Wc((h?_c:Gc)(_,m),a,u)}function _u(a,u,p,I){return a===v||Zi(a,We[p])&&!je.call(I,p)?u:a}function Cu(a,u,p,I,z,e){return Qn(a)&&Qn(u)&&(e.set(u,a),Ea(a,u,v,Cu,e),e.delete(u)),a}function _d(a){return Ks(a)?v:a}function Bc(a,u,p,I,z,e){var n=1&p,t=a.length,r=u.length;if(t!=r&&!(n&&r>t))return!1;var o=e.get(a),s=e.get(u);if(o&&s)return o==u&&s==a;var c=-1,h=!0,m=2&p?new Ca:v;for(e.set(a,u),e.set(u,a);++c<t;){var _=a[c],S=u[c];if(I)var y=n?I(S,_,c,u,a,e):I(_,S,c,a,u,e);if(y!==v){if(y)continue;h=!1;break}if(m){if(!Re(u,function(H,J){if(!Zo(m,J)&&(_===H||z(_,H,p,I,e)))return m.push(J)})){h=!1;break}}else if(_!==S&&!z(_,S,p,I,e)){h=!1;break}}return e.delete(a),e.delete(u),h}function Vo(a){return Cl(zs(a,v,qc),a+"")}function Yi(a){return ks(a,Er,vl)}function hl(a){return ks(a,li,Hc)}var pl=ko?function(a){return ko.get(a)}:Gl;function wu(a){for(var u=a.name+"",p=_a[u],I=je.call(_a,u)?p.length:0;I--;){var z=p[I],e=z.func;if(null==e||e==a)return z.name}return u}function ss(a){return(je.call(Z,"placeholder")?Z:a).placeholder}function Bt(){var a=Z.iteratee||zl;return a=a===zl?gc:a,arguments.length?a(arguments[0],arguments[1]):a}function Su(a,u){var p=a.__data__;return function Id(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?p["string"==typeof u?"string":"hash"]:p.map}function gl(a){for(var u=Er(a),p=u.length;p--;){var I=u[p],z=a[I];u[p]=[I,z,zc(z)]}return u}function Pa(a,u){var p=function Hu(be,Ue){return null==be?v:be[Ue]}(a,u);return Ju(p)?p:v}var vl=qs?function(a){return null==a?[]:(a=An(a),In(qs(a),function(u){return Mo.call(a,u)}))}:$l,Hc=qs?function(a){for(var u=[];a;)Tt(u,vl(a)),a=er(a);return u}:$l,zr=Tr;function jc(a,u,p){for(var I=-1,z=(u=ra(u,a)).length,e=!1;++I<z;){var n=mo(u[I]);if(!(e=null!=a&&p(a,n)))break;a=a[n]}return e||++I!=z?e:!!(z=null==a?0:a.length)&&jo(z)&&vo(n,z)&&(Zt(a)||ka(a))}function ml(a){return"function"!=typeof a.constructor||Hs(a)?{}:Xa(er(a))}function yl(a){return Zt(a)||ka(a)||!!(Hr&&a&&a[Hr])}function vo(a,u){var p=typeof a;return!!(u=null==u?Jn:u)&&("number"==p||"symbol"!=p&&$o.test(a))&&a>-1&&a%1==0&&a<u}function Kr(a,u,p){if(!Qn(p))return!1;var I=typeof u;return!!("number"==I?ui(p)&&vo(u,p.length):"string"==I&&u in p)&&Zi(p[u],a)}function xl(a,u){if(Zt(a))return!1;var p=typeof a;return!("number"!=p&&"symbol"!=p&&"boolean"!=p&&null!=a&&!Rr(a))||zt.test(a)||!to.test(a)||null!=u&&a in An(u)}function Bs(a){var u=wu(a),p=Z[u];if("function"!=typeof p||!(u in Jt.prototype))return!1;if(a===p)return!0;var I=pl(p);return!!I&&a===I[0]}(xa&&zr(new xa(new ArrayBuffer(1)))!=Un||ba&&zr(new ba)!=Yt||nu&&zr(nu.resolve())!=re||Kt&&zr(new Kt)!=Ye||Ya&&zr(new Ya)!=rn)&&(zr=function(a){var u=Tr(a),p=u==G?a.constructor:v,I=p?Ia(p):"";if(I)switch(I){case Is:return Un;case rc:return Yt;case Wu:return re;case Gf:return Ye;case Wf:return rn}return u});var Md=Se?qi:Yl;function Hs(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||We)}function zc(a){return a==a&&!Qn(a)}function bl(a,u){return function(p){return null!=p&&p[a]===u&&(u!==v||a in An(p))}}function zs(a,u,p){return u=gr(u===v?a.length-1:u,0),function(){for(var I=arguments,z=-1,e=gr(I.length-u,0),n=De(e);++z<e;)n[z]=I[u+z];z=-1;for(var t=De(u+1);++z<u;)t[z]=I[z];return t[u]=p(n),ke(a,this,t)}}function cs(a,u){return u.length<2?a:cr(a,ri(u,0,-1))}function Us(a,u){for(var p=a.length,I=Lr(u.length,p),z=ai(a);I--;){var e=u[I];a[I]=vo(e,p)?z[e]:v}return a}function _l(a,u){if(("constructor"!==u||"function"!=typeof a[u])&&"__proto__"!=u)return a[u]}var Gc=$c(_c),Gs=Uf||function(a,u){return l.setTimeout(a,u)},Cl=$c(du);function Wc(a,u,p){var I=u+"";return Cl(a,function Tu(a,u){var p=u.length;if(!p)return a;var I=p-1;return u[I]=(p>1?"& ":"")+u[I],u=u.join(p>2?", ":" "),a.replace(hi,"{\n/* [wrapped with "+u+"] */\n")}(I,function Od(a,u){return vt(Cn,function(p){var I="_."+p[0];u&p[1]&&!Vn(a,I)&&a.push(I)}),a.sort()}(function Ed(a){var u=a.match(no);return u?u[1].split(Fn):[]}(I),p)))}function $c(a){var u=0,p=0;return function(){var I=nc(),z=16-(I-p);if(p=I,z>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(v,arguments)}}function Eu(a,u){var p=-1,I=a.length,z=I-1;for(u=u===v?I:u;++p<u;){var e=Rs(p,z),n=a[e];a[e]=a[p],a[p]=n}return a.length=u,a}var Yc=function Uc(a){var u=Oa(a,function(I){return 500===p.size&&p.clear(),I}),p=u.cache;return u}(function(a){var u=[];return 46===a.charCodeAt(0)&&u.push(""),a.replace(ca,function(p,I,z,e){u.push(z?e.replace(ro,"$1"):I||p)}),u});function mo(a){if("string"==typeof a||Rr(a))return a;var u=a+"";return"0"==u&&1/a==-Et?"-0":u}function Ia(a){if(null!=a){try{return He.call(a)}catch(u){}try{return a+""}catch(u){}}return""}function Xc(a){if(a instanceof Jt)return a.clone();var u=new Pi(a.__wrapped__,a.__chain__);return u.__actions__=ai(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}var Xi=un(function(a,u){return hr(a)?Qa(a,Nr(u,1,hr,!0)):[]}),Qc=un(function(a,u){var p=xr(u);return hr(p)&&(p=v),hr(a)?Qa(a,Nr(u,1,hr,!0),Bt(p,2)):[]}),fr=un(function(a,u){var p=xr(u);return hr(p)&&(p=v),hr(a)?Qa(a,Nr(u,1,hr,!0),v,p):[]});function Jc(a,u,p){var I=null==a?0:a.length;if(!I)return-1;var z=null==p?0:an(p);return z<0&&(z=gr(I+z,0)),Yr(a,Bt(u,3),z)}function Zc(a,u,p){var I=null==a?0:a.length;if(!I)return-1;var z=I-1;return p!==v&&(z=an(p),z=p<0?gr(I+z,0):Lr(z,I-1)),Yr(a,Bt(u,3),z,!0)}function qc(a){return null!=a&&a.length?Nr(a,1):[]}function ef(a){return a&&a.length?a[0]:v}var zd=un(function(a){var u=At(a,Ds);return u.length&&u[0]===a[0]?su(u):[]}),Ud=un(function(a){var u=xr(a),p=At(a,Ds);return u===xr(p)?u=v:p.pop(),p.length&&p[0]===a[0]?su(p,Bt(u,2)):[]}),Gd=un(function(a){var u=xr(a),p=At(a,Ds);return(u="function"==typeof u?u:v)&&p.pop(),p.length&&p[0]===a[0]?su(p,v,u):[]});function xr(a){var u=null==a?0:a.length;return u?a[u-1]:v}var wl=un(nf);function nf(a,u){return a&&a.length&&u&&u.length?nl(a,u):a}var Kd=Vo(function(a,u){var p=null==a?0:a.length,I=cc(a,u);return xc(a,At(u,function(z){return vo(z,p)?+z:z}).sort(Ac)),I});function Sl(a){return null==a?a:$a.call(a)}var Pu=un(function(a){return na(Nr(a,1,hr,!0))}),lh=un(function(a){var u=xr(a);return hr(u)&&(u=v),na(Nr(a,1,hr,!0),Bt(u,2))}),ch=un(function(a){var u=xr(a);return u="function"==typeof u?u:v,na(Nr(a,1,hr,!0),v,u)});function Tl(a){if(!a||!a.length)return[];var u=0;return a=In(a,function(p){if(hr(p))return u=gr(p.length,u),!0}),Jo(u,function(p){return At(a,Ha(p))})}function af(a,u){if(!a||!a.length)return[];var p=Tl(a);return null==u?p:At(p,function(I){return ke(u,v,I)})}var sf=un(function(a,u){return hr(a)?Qa(a,u):[]}),hh=un(function(a){return oi(In(a,hr))}),ph=un(function(a){var u=xr(a);return hr(u)&&(u=v),oi(In(a,hr),Bt(u,2))}),gh=un(function(a){var u=xr(a);return u="function"==typeof u?u:v,oi(In(a,hr),v,u)}),vh=un(Tl),xh=un(function(a){var u=a.length,p=u>1?a[u-1]:v;return p="function"==typeof p?(a.pop(),p):v,af(a,p)});function uf(a){var u=Z(a);return u.__chain__=!0,u}function Iu(a,u){return u(a)}var _h=Vo(function(a){var u=a.length,p=u?a[0]:0,I=this.__wrapped__,z=function(e){return cc(e,a)};return!(u>1||this.__actions__.length)&&I instanceof Jt&&vo(p)?((I=I.slice(p,+p+(u?1:0))).__actions__.push({func:Iu,args:[z],thisArg:v}),new Pi(I,this.__chain__).thru(function(e){return u&&!e.length&&e.push(v),e})):this.thru(z)}),Ah=si(function(a,u,p){je.call(a,p)?++a[p]:Ro(a,p,1)}),kh=kc(Jc),Lh=kc(Zc);function Au(a,u){return(Zt(a)?vt:ho)(a,Bt(u,3))}function Ws(a,u){return(Zt(a)?Ut:Do)(a,Bt(u,3))}var El=si(function(a,u,p){je.call(a,p)?a[p].push(u):Ro(a,p,[u])}),Qi=un(function(a,u,p){var I=-1,z="function"==typeof u,e=ui(a)?De(a.length):[];return ho(a,function(n){e[++I]=z?ke(u,n,p):Ls(n,u,p)}),e}),Pl=si(function(a,u,p){Ro(a,p,u)});function Ji(a,u){return(Zt(a)?At:el)(a,Bt(u,3))}var lf=si(function(a,u,p){a[p?0:1].push(u)},function(){return[[],[]]}),Mu=un(function(a,u){if(null==a)return[];var p=u.length;return p>1&&Kr(a,u[0],u[1])?u=[]:p>2&&Kr(u[0],u[1],u[2])&&(u=[u[0]]),mc(a,Nr(u,1),[])}),Ou=zf||function(){return l.Date.now()};function Al(a,u,p){return u=p?v:u,Fo(a,C,v,v,v,v,u=a&&null==u?a.length:u)}function Vh(a,u){var p;if("function"!=typeof u)throw new q(A);return a=an(a),function(){return--a>0&&(p=u.apply(this,arguments)),a<=1&&(u=v),p}}var ds=un(function(a,u,p){var I=1;if(p.length){var z=lo(p,ss(ds));I|=32}return Fo(a,I,u,p,z)}),Ml=un(function(a,u,p){var I=3;if(p.length){var z=lo(p,ss(Ml));I|=32}return Fo(u,I,a,p,z)});function $s(a,u,p){var I,z,e,n,t,r,o=0,s=!1,c=!1,h=!0;if("function"!=typeof a)throw new q(A);function m(Ae){var Me=I,O=z;return I=z=v,o=Ae,n=a.apply(O,Me)}function _(Ae){return o=Ae,t=Gs(H,u),s?m(Ae):n}function y(Ae){var Me=Ae-r;return r===v||Me>=u||Me<0||c&&Ae-o>=e}function H(){var Ae=Ou();if(y(Ae))return J(Ae);t=Gs(H,function S(Ae){var U=u-(Ae-r);return c?Lr(U,e-(Ae-o)):U}(Ae))}function J(Ae){return t=v,h&&I?m(Ae):(I=z=v,n)}function xe(){var Ae=Ou(),Me=y(Ae);if(I=arguments,z=this,r=Ae,Me){if(t===v)return _(r);if(c)return ul(t),t=Gs(H,u),m(r)}return t===v&&(t=Gs(H,u)),n}return u=Ai(u)||0,Qn(p)&&(s=!!p.leading,e=(c="maxWait"in p)?gr(Ai(p.maxWait)||0,u):e,h="trailing"in p?!!p.trailing:h),xe.cancel=function ne(){t!==v&&ul(t),o=0,I=r=z=t=v},xe.flush=function ye(){return t===v?n:J(Ou())},xe}var Bh=un(function(a,u){return Sa(a,1,u)}),Bo=un(function(a,u,p){return Sa(a,Ai(u)||0,p)});function Oa(a,u){if("function"!=typeof a||null!=u&&"function"!=typeof u)throw new q(A);var p=function(){var I=arguments,z=u?u.apply(this,I):I[0],e=p.cache;if(e.has(z))return e.get(z);var n=a.apply(this,I);return p.cache=e.set(z,n)||e,n};return p.cache=new(Oa.Cache||fo),p}function hs(a){if("function"!=typeof a)throw new q(A);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}Oa.Cache=fo;var ps=md(function(a,u){var p=(u=1==u.length&&Zt(u[0])?At(u[0],On(Bt())):At(Nr(u,1),On(Bt()))).length;return un(function(I){for(var z=-1,e=Lr(I.length,p);++z<e;)I[z]=u[z].call(this,I[z]);return ke(a,this,I)})}),Lt=un(function(a,u){var p=lo(u,ss(Lt));return Fo(a,32,v,u,p)}),Ys=un(function(a,u){var p=lo(u,ss(Ys));return Fo(a,64,v,u,p)}),ku=Vo(function(a,u){return Fo(a,256,v,v,v,u)});function Zi(a,u){return a===u||a!=a&&u!=u}var Kh=as(au),Qh=as(function(a,u){return a>=u}),ka=hc(function(){return arguments}())?hc:function(a){return tr(a)&&je.call(a,"callee")&&!Mo.call(a,"callee")},Zt=De.isArray,Jh=Y?On(Y):function Xu(a){return tr(a)&&Tr(a)==on};function ui(a){return null!=a&&jo(a.length)&&!qi(a)}function hr(a){return tr(a)&&ui(a)}var Ho=Uu||Yl,qh=ue?On(ue):function Ku(a){return tr(a)&&Tr(a)==mt};function Nl(a){if(!tr(a))return!1;var u=Tr(a);return u==mn||"[object DOMException]"==u||"string"==typeof a.message&&"string"==typeof a.name&&!Ks(a)}function qi(a){if(!Qn(a))return!1;var u=Tr(a);return u==zn||u==di||"[object AsyncFunction]"==u||"[object Proxy]"==u}function Xs(a){return"number"==typeof a&&a==an(a)}function jo(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Jn}function Qn(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function tr(a){return null!=a&&"object"==typeof a}var pf=se?On(se):function Ta(a){return tr(a)&&zr(a)==Yt};function vf(a){return"number"==typeof a||tr(a)&&Tr(a)==jt}function Ks(a){if(!tr(a)||Tr(a)!=G)return!1;var u=er(a);if(null===u)return!0;var p=je.call(u,"constructor")&&u.constructor;return"function"==typeof p&&p instanceof p&&He.call(p)==Ot}var Rl=Ee?On(Ee):function pc(a){return tr(a)&&Tr(a)==Ge},mf=Fe?On(Fe):function fd(a){return tr(a)&&zr(a)==Ye};function gs(a){return"string"==typeof a||!Zt(a)&&tr(a)&&Tr(a)==ct}function Rr(a){return"symbol"==typeof a||tr(a)&&Tr(a)==It}var vs=Ke?On(Ke):function Zu(a){return tr(a)&&jo(a.length)&&!!Xt[Tr(a)]},cp=as(qu),fp=as(function(a,u){return a<=u});function bf(a){if(!a)return[];if(ui(a))return gs(a)?ir(a):ai(a);if(Ga&&a[Ga])return function Ts(be){for(var Ue,De=[];!(Ue=be.next()).done;)De.push(Ue.value);return De}(a[Ga]());var u=zr(a);return(u==Yt?ti:u==Ye?ur:xs)(a)}function zo(a){return a?(a=Ai(a))===Et||a===-Et?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function an(a){var u=zo(a),p=u%1;return u==u?p?u-p:u:0}function _f(a){return a?wa(an(a),0,Le):0}function Ai(a){if("number"==typeof a)return a;if(Rr(a))return NaN;if(Qn(a)){var u="function"==typeof a.valueOf?a.valueOf():a;a=Qn(u)?u+"":u}if("string"!=typeof a)return 0===a?a:+a;a=Vu(a);var p=da.test(a);return p||To.test(a)?de(a.slice(2),p?2:8):pi.test(a)?NaN:+a}function Uo(a){return go(a,li(a))}function Mn(a){return null==a?"":ii(a)}var hp=rs(function(a,u){if(Hs(u)||ui(u))go(u,Er(u),a);else for(var p in u)je.call(u,p)&&ou(a,p,u[p])}),Cf=rs(function(a,u){go(u,li(u),a)}),Nu=rs(function(a,u,p,I){go(u,li(u),a,I)}),pp=rs(function(a,u,p,I){go(u,Er(u),a,I)}),gp=Vo(cc),Dl=un(function(a,u){a=An(a);var p=-1,I=u.length,z=I>2?u[2]:v;for(z&&Kr(u[0],u[1],z)&&(I=1);++p<I;)for(var e=u[p],n=li(e),t=-1,r=n.length;++t<r;){var o=n[t],s=a[o];(s===v||Zi(s,We[o])&&!je.call(a,o))&&(a[o]=e[o])}return a}),wf=un(function(a){return a.push(v,Cu),ke(Ef,v,a)});function ys(a,u,p){var I=null==a?v:cr(a,u);return I===v?p:I}function Qs(a,u){return null!=a&&jc(a,u,ld)}var vr=Nc(function(a,u,p){null!=u&&"function"!=typeof u.toString&&(u=xt.call(u)),a[u]=p},Vf(ci)),Cp=Nc(function(a,u,p){null!=u&&"function"!=typeof u.toString&&(u=xt.call(u)),je.call(a,u)?a[u].push(p):a[u]=[p]},Bt),wp=un(Ls);function Er(a){return ui(a)?ad(a):cu(a)}function li(a){return ui(a)?ad(a,!0):function dd(a){if(!Qn(a))return function ls(a){var u=[];if(null!=a)for(var p in An(a))u.push(p);return u}(a);var u=Hs(a),p=[];for(var I in a)"constructor"==I&&(u||!je.call(a,I))||p.push(I);return p}(a)}var Fl=rs(function(a,u,p){Ea(a,u,p)}),Ef=rs(function(a,u,p,I){Ea(a,u,p,I)}),Pf=Vo(function(a,u){var p={};if(null==a)return p;var I=!1;u=At(u,function(e){return e=ra(e,a),I||(I=e.length>1),e}),go(a,hl(a),p),I&&(p=$i(p,7,_d));for(var z=u.length;z--;)al(p,u[z]);return p}),Ep=Vo(function(a,u){return null==a?{}:function yc(a,u){return tl(a,u,function(p,I){return Qs(a,I)})}(a,u)});function Vl(a,u){if(null==a)return{};var p=At(hl(a),function(I){return[I]});return u=Bt(u),tl(a,p,function(I,z){return u(I,z[0])})}var Af=Vc(Er),Mf=Vc(li);function xs(a){return null==a?[]:Ss(a,Er(a))}var Rp=is(function(a,u,p){return u=u.toLowerCase(),a+(p?Of(u):u)});function Of(a){return Ff(Mn(a).toLowerCase())}function kf(a){return(a=Mn(a))&&a.replace(ha,ja).replace(Ko,"")}var Bp=is(function(a,u,p){return a+(p?"-":"")+u.toLowerCase()}),Lf=is(function(a,u,p){return a+(p?" ":"")+u.toLowerCase()}),Hp=Oc("toLowerCase"),Ng=is(function(a,u,p){return a+(p?"_":"")+u.toLowerCase()}),Dg=is(function(a,u,p){return a+(p?" ":"")+Ff(u)}),Ru=is(function(a,u,p){return a+(p?" ":"")+u.toUpperCase()}),Ff=Oc("toUpperCase");function Wp(a,u,p){return a=Mn(a),(u=p?v:u)===v?function qo(be){return ji.test(be)}(a)?function Zs(be){return be.match(so)||[]}(a):function $r(be){return be.match(So)||[]}(a):a.match(u)||[]}var $p=un(function(a,u){try{return ke(a,v,u)}catch(p){return Nl(p)?p:new _t(p)}}),zg=Vo(function(a,u){return vt(u,function(p){p=mo(p),Ro(a,p,ds(a[p],a))}),a});function Vf(a){return function(){return a}}var Wg=Lc(),bs=Lc(!0);function ci(a){return a}function zl(a){return gc("function"==typeof a?a:$i(a,1))}var Qp=un(function(a,u){return function(p){return Ls(p,a,u)}}),Jp=un(function(a,u){return function(p){return Ls(a,p,u)}});function Ul(a,u,p){var I=Er(u),z=qa(u,I);null==p&&(!Qn(u)||!z.length&&I.length)&&(p=u,u=a,a=this,z=qa(u,Er(u)));var e=!(Qn(p)&&"chain"in p&&!p.chain),n=qi(a);return vt(z,function(t){var r=u[t];a[t]=r,n&&(a.prototype[t]=function(){var o=this.__chain__;if(e||o){var s=a(this.__wrapped__),c=s.__actions__=ai(this.__actions__);return c.push({func:r,args:arguments,thisArg:a}),s.__chain__=o,s}return r.apply(a,Tt([this.value()],arguments))})}),a}function Gl(){}var Bf=xu(At),_s=xu(St),qp=xu(Re);function ua(a){return xl(a)?Ha(mo(a)):function hd(a){return function(u){return cr(u,a)}}(a)}var eg=Vs(),tg=Vs(!0);function $l(){return[]}function Yl(){return!1}var ig=oa(function(a,u){return a+u},0),og=dl("ceil"),ag=oa(function(a,u){return a/u},1),sg=dl("floor"),pg=oa(function(a,u){return a*u},1),gg=dl("round"),vg=oa(function(a,u){return a-u},0);return Z.after=function Fh(a,u){if("function"!=typeof u)throw new q(A);return a=an(a),function(){if(--a<1)return u.apply(this,arguments)}},Z.ary=Al,Z.assign=hp,Z.assignIn=Cf,Z.assignInWith=Nu,Z.assignWith=pp,Z.at=gp,Z.before=Vh,Z.bind=ds,Z.bindAll=zg,Z.bindKey=Ml,Z.castArray=function Uh(){if(!arguments.length)return[];var a=arguments[0];return Zt(a)?a:[a]},Z.chain=uf,Z.chunk=function kd(a,u,p){u=(p?Kr(a,u,p):u===v)?1:gr(an(u),0);var I=null==a?0:a.length;if(!I||u<1)return[];for(var z=0,e=0,n=De(Wa(I/u));z<I;)n[e++]=ri(a,z,z+=u);return n},Z.compact=function Kc(a){for(var u=-1,p=null==a?0:a.length,I=0,z=[];++u<p;){var e=a[u];e&&(z[I++]=e)}return z},Z.concat=function Aa(){var a=arguments.length;if(!a)return[];for(var u=De(a-1),p=arguments[0],I=a;I--;)u[I-1]=arguments[I];return Tt(Zt(p)?ai(p):[p],Nr(u,1))},Z.cond=function Yp(a){var u=null==a?0:a.length,p=Bt();return a=u?At(a,function(I){if("function"!=typeof I[1])throw new q(A);return[p(I[0]),I[1]]}):[],un(function(I){for(var z=-1;++z<u;){var e=a[z];if(ke(e[0],this,I))return ke(e[1],this,I)}})},Z.conforms=function Ug(a){return function Ag(a){var u=Er(a);return function(p){return ta(p,a,u)}}($i(a,1))},Z.constant=Vf,Z.countBy=Ah,Z.create=function vp(a,u){var p=Xa(a);return null==u?p:lc(p,u)},Z.curry=function Ol(a,u,p){var I=Fo(a,8,v,v,v,v,v,u=p?v:u);return I.placeholder=Ol.placeholder,I},Z.curryRight=function ff(a,u,p){var I=Fo(a,16,v,v,v,v,v,u=p?v:u);return I.placeholder=ff.placeholder,I},Z.debounce=$s,Z.defaults=Dl,Z.defaultsDeep=wf,Z.defer=Bh,Z.delay=Bo,Z.difference=Xi,Z.differenceBy=Qc,Z.differenceWith=fr,Z.drop=function dr(a,u,p){var I=null==a?0:a.length;return I?ri(a,(u=p||u===v?1:an(u))<0?0:u,I):[]},Z.dropRight=function Ld(a,u,p){var I=null==a?0:a.length;return I?ri(a,0,(u=I-(u=p||u===v?1:an(u)))<0?0:u):[]},Z.dropRightWhile=function Nd(a,u){return a&&a.length?gu(a,Bt(u,3),!0,!0):[]},Z.dropWhile=function Rd(a,u){return a&&a.length?gu(a,Bt(u,3),!0):[]},Z.fill=function Dd(a,u,p,I){var z=null==a?0:a.length;return z?(p&&"number"!=typeof p&&Kr(a,u,p)&&(p=0,I=z),function xn(a,u,p,I){var z=a.length;for((p=an(p))<0&&(p=-p>z?0:z+p),(I=I===v||I>z?z:an(I))<0&&(I+=z),I=p>I?0:_f(I);p<I;)a[p++]=u;return a}(a,u,p,I)):[]},Z.filter=function Oh(a,u){return(Zt(a)?In:Os)(a,Bt(u,3))},Z.flatMap=function Nh(a,u){return Nr(Ji(a,u),1)},Z.flatMapDeep=function Rh(a,u){return Nr(Ji(a,u),Et)},Z.flatMapDepth=function it(a,u,p){return p=p===v?1:an(p),Nr(Ji(a,u),p)},Z.flatten=qc,Z.flattenDeep=function Fd(a){return null!=a&&a.length?Nr(a,Et):[]},Z.flattenDepth=function Vd(a,u){return null!=a&&a.length?Nr(a,u=u===v?1:an(u)):[]},Z.flip=function kl(a){return Fo(a,512)},Z.flow=Wg,Z.flowRight=bs,Z.fromPairs=function Bd(a){for(var u=-1,p=null==a?0:a.length,I={};++u<p;){var z=a[u];I[z[0]]=z[1]}return I},Z.functions=function Mg(a){return null==a?[]:qa(a,Er(a))},Z.functionsIn=function Sf(a){return null==a?[]:qa(a,li(a))},Z.groupBy=El,Z.initial=function jd(a){return null!=a&&a.length?ri(a,0,-1):[]},Z.intersection=zd,Z.intersectionBy=Ud,Z.intersectionWith=Gd,Z.invert=vr,Z.invertBy=Cp,Z.invokeMap=Qi,Z.iteratee=zl,Z.keyBy=Pl,Z.keys=Er,Z.keysIn=li,Z.map=Ji,Z.mapKeys=function Sp(a,u){var p={};return u=Bt(u,3),po(a,function(I,z,e){Ro(p,u(I,z,e),I)}),p},Z.mapValues=function Tf(a,u){var p={};return u=Bt(u,3),po(a,function(I,z,e){Ro(p,z,u(I,z,e))}),p},Z.matches=function Xp(a){return vc($i(a,1))},Z.matchesProperty=function Kp(a,u){return ts(a,$i(u,1))},Z.memoize=Oa,Z.merge=Fl,Z.mergeWith=Ef,Z.method=Qp,Z.methodOf=Jp,Z.mixin=Ul,Z.negate=hs,Z.nthArg=function Wl(a){return a=an(a),un(function(u){return fu(u,a)})},Z.omit=Pf,Z.omitBy=function Tp(a,u){return Vl(a,hs(Bt(u)))},Z.once=function xo(a){return Vh(2,a)},Z.orderBy=function yo(a,u,p,I){return null==a?[]:(Zt(u)||(u=null==u?[]:[u]),Zt(p=I?v:p)||(p=null==p?[]:[p]),mc(a,u,p))},Z.over=Bf,Z.overArgs=ps,Z.overEvery=_s,Z.overSome=qp,Z.partial=Lt,Z.partialRight=Ys,Z.partition=lf,Z.pick=Ep,Z.pickBy=Vl,Z.property=ua,Z.propertyOf=function Hf(a){return function(u){return null==a?v:cr(a,u)}},Z.pull=wl,Z.pullAll=nf,Z.pullAllBy=function Yd(a,u,p){return a&&a.length&&u&&u.length?nl(a,u,Bt(p,2)):a},Z.pullAllWith=function Xd(a,u,p){return a&&a.length&&u&&u.length?nl(a,u,v,p):a},Z.pullAt=Kd,Z.range=eg,Z.rangeRight=tg,Z.rearg=ku,Z.reject=function sa(a,u){return(Zt(a)?In:Os)(a,hs(Bt(u,3)))},Z.remove=function Qd(a,u){var p=[];if(!a||!a.length)return p;var I=-1,z=[],e=a.length;for(u=Bt(u,3);++I<e;){var n=a[I];u(n,I,a)&&(p.push(n),z.push(I))}return xc(a,z),p},Z.rest=function Lu(a,u){if("function"!=typeof a)throw new q(A);return un(a,u=u===v?u:an(u))},Z.reverse=Sl,Z.sampleSize=function Xn(a,u,p){return u=(p?Kr(a,u,p):u===v)?1:an(u),(Zt(a)?Eg:gd)(a,u)},Z.set=function If(a,u,p){return null==a?a:ns(a,u,p)},Z.setWith=function Bl(a,u,p,I){return I="function"==typeof I?I:v,null==a?a:ns(a,u,p,I)},Z.shuffle=function fs(a){return(Zt(a)?Pg:hu)(a)},Z.slice=function Jd(a,u,p){var I=null==a?0:a.length;return I?(p&&"number"!=typeof p&&Kr(a,u,p)?(u=0,p=I):(u=null==u?0:an(u),p=p===v?I:an(p)),ri(a,u,p)):[]},Z.sortBy=Mu,Z.sortedUniq=function nh(a){return a&&a.length?ol(a):[]},Z.sortedUniqBy=function rh(a,u){return a&&a.length?ol(a,Bt(u,2)):[]},Z.split=function Rg(a,u,p){return p&&"number"!=typeof p&&Kr(a,u,p)&&(u=p=v),(p=p===v?Le:p>>>0)?(a=Mn(a))&&("string"==typeof u||null!=u&&!Rl(u))&&!(u=ii(u))&&Gi(a)?ia(ir(a),0,p):a.split(u,p):[]},Z.spread=function Hh(a,u){if("function"!=typeof a)throw new q(A);return u=null==u?0:gr(an(u),0),un(function(p){var I=p[u],z=ia(p,0,u);return I&&Tt(z,I),ke(a,this,z)})},Z.tail=function ih(a){var u=null==a?0:a.length;return u?ri(a,1,u):[]},Z.take=function oh(a,u,p){return a&&a.length?ri(a,0,(u=p||u===v?1:an(u))<0?0:u):[]},Z.takeRight=function ah(a,u,p){var I=null==a?0:a.length;return I?ri(a,(u=I-(u=p||u===v?1:an(u)))<0?0:u,I):[]},Z.takeRightWhile=function sh(a,u){return a&&a.length?gu(a,Bt(u,3),!1,!0):[]},Z.takeWhile=function uh(a,u){return a&&a.length?gu(a,Bt(u,3)):[]},Z.tap=function bh(a,u){return u(a),a},Z.throttle=function jh(a,u,p){var I=!0,z=!0;if("function"!=typeof a)throw new q(A);return Qn(p)&&(I="leading"in p?!!p.leading:I,z="trailing"in p?!!p.trailing:z),$s(a,u,{leading:I,maxWait:u,trailing:z})},Z.thru=Iu,Z.toArray=bf,Z.toPairs=Af,Z.toPairsIn=Mf,Z.toPath=function jf(a){return Zt(a)?At(a,mo):Rr(a)?[a]:ai(Yc(Mn(a)))},Z.toPlainObject=Uo,Z.transform=function Ip(a,u,p){var I=Zt(a),z=I||Ho(a)||vs(a);if(u=Bt(u,4),null==p){var e=a&&a.constructor;p=z?I?new e:[]:Qn(a)&&qi(e)?Xa(er(a)):{}}return(z?vt:po)(a,function(n,t,r){return u(p,n,t,r)}),p},Z.unary=function zh(a){return Al(a,1)},Z.union=Pu,Z.unionBy=lh,Z.unionWith=ch,Z.uniq=function fh(a){return a&&a.length?na(a):[]},Z.uniqBy=function dh(a,u){return a&&a.length?na(a,Bt(u,2)):[]},Z.uniqWith=function of(a,u){return u="function"==typeof u?u:v,a&&a.length?na(a,v,u):[]},Z.unset=function Ap(a,u){return null==a||al(a,u)},Z.unzip=Tl,Z.unzipWith=af,Z.update=function Mp(a,u,p){return null==a?a:wc(a,u,sl(p))},Z.updateWith=function Hl(a,u,p,I){return I="function"==typeof I?I:v,null==a?a:wc(a,u,sl(p),I)},Z.values=xs,Z.valuesIn=function Op(a){return null==a?[]:Ss(a,li(a))},Z.without=sf,Z.words=Wp,Z.wrap=function Ll(a,u){return Lt(sl(u),a)},Z.xor=hh,Z.xorBy=ph,Z.xorWith=gh,Z.zip=vh,Z.zipObject=function mh(a,u){return jr(a||[],u||[],ou)},Z.zipObjectDeep=function yh(a,u){return jr(a||[],u||[],ns)},Z.zipWith=xh,Z.entries=Af,Z.entriesIn=Mf,Z.extend=Cf,Z.extendWith=Nu,Ul(Z,Z),Z.add=ig,Z.attempt=$p,Z.camelCase=Rp,Z.capitalize=Of,Z.ceil=og,Z.clamp=function kp(a,u,p){return p===v&&(p=u,u=v),p!==v&&(p=(p=Ai(p))==p?p:0),u!==v&&(u=(u=Ai(u))==u?u:0),wa(Ai(a),u,p)},Z.clone=function Gh(a){return $i(a,4)},Z.cloneDeep=function $h(a){return $i(a,5)},Z.cloneDeepWith=function Yh(a,u){return $i(a,5,u="function"==typeof u?u:v)},Z.cloneWith=function Wh(a,u){return $i(a,4,u="function"==typeof u?u:v)},Z.conformsTo=function Xh(a,u){return null==u||ta(a,u,Er(u))},Z.deburr=kf,Z.defaultTo=function Gg(a,u){return null==a||a!=a?u:a},Z.divide=ag,Z.endsWith=function Dp(a,u,p){a=Mn(a),u=ii(u);var I=a.length,z=p=p===v?I:wa(an(p),0,I);return(p-=u.length)>=0&&a.slice(p,z)==u},Z.eq=Zi,Z.escape=function Fp(a){return(a=Mn(a))&&sn.test(a)?a.replace(Go,Jl):a},Z.escapeRegExp=function Vp(a){return(a=Mn(a))&&Wo.test(a)?a.replace(Mi,"\\$&"):a},Z.every=function Mh(a,u,p){var I=Zt(a)?St:Ja;return p&&Kr(a,u,p)&&(u=v),I(a,Bt(u,3))},Z.find=kh,Z.findIndex=Jc,Z.findKey=function ms(a,u){return mi(a,Bt(u,3),po)},Z.findLast=Lh,Z.findLastIndex=Zc,Z.findLastKey=function mp(a,u){return mi(a,Bt(u,3),Za)},Z.floor=sg,Z.forEach=Au,Z.forEachRight=Ws,Z.forIn=function yp(a,u){return null==a?a:Yu(a,Bt(u,3),li)},Z.forInRight=function xp(a,u){return null==a?a:fc(a,Bt(u,3),li)},Z.forOwn=function bp(a,u){return a&&po(a,Bt(u,3))},Z.forOwnRight=function _p(a,u){return a&&Za(a,Bt(u,3))},Z.get=ys,Z.gt=Kh,Z.gte=Qh,Z.has=function Og(a,u){return null!=a&&jc(a,u,dc)},Z.hasIn=Qs,Z.head=ef,Z.identity=ci,Z.includes=function aa(a,u,p,I){a=ui(a)?a:xs(a),p=p&&!I?an(p):0;var z=a.length;return p<0&&(p=gr(z+p,0)),gs(a)?p<=z&&a.indexOf(u,p)>-1:!!z&&$n(a,u,p)>-1},Z.indexOf=function Hd(a,u,p){var I=null==a?0:a.length;if(!I)return-1;var z=null==p?0:an(p);return z<0&&(z=gr(I+z,0)),$n(a,u,z)},Z.inRange=function Lp(a,u,p){return u=zo(u),p===v?(p=u,u=0):p=zo(p),function cd(a,u,p){return a>=Lr(u,p)&&a<gr(u,p)}(a=Ai(a),u,p)},Z.invoke=wp,Z.isArguments=ka,Z.isArray=Zt,Z.isArrayBuffer=Jh,Z.isArrayLike=ui,Z.isArrayLikeObject=hr,Z.isBoolean=function Zh(a){return!0===a||!1===a||tr(a)&&Tr(a)==lt},Z.isBuffer=Ho,Z.isDate=qh,Z.isElement=function ep(a){return tr(a)&&1===a.nodeType&&!Ks(a)},Z.isEmpty=function tp(a){if(null==a)return!0;if(ui(a)&&(Zt(a)||"string"==typeof a||"function"==typeof a.splice||Ho(a)||vs(a)||ka(a)))return!a.length;var u=zr(a);if(u==Yt||u==Ye)return!a.size;if(Hs(a))return!cu(a).length;for(var p in a)if(je.call(a,p))return!1;return!0},Z.isEqual=function df(a,u){return es(a,u)},Z.isEqualWith=function hf(a,u,p){var I=(p="function"==typeof p?p:v)?p(a,u):v;return I===v?es(a,u,v,p):!!I},Z.isError=Nl,Z.isFinite=function np(a){return"number"==typeof a&&Oo(a)},Z.isFunction=qi,Z.isInteger=Xs,Z.isLength=jo,Z.isMap=pf,Z.isMatch=function rp(a,u){return a===u||lu(a,u,gl(u))},Z.isMatchWith=function ip(a,u,p){return p="function"==typeof p?p:v,lu(a,u,gl(u),p)},Z.isNaN=function op(a){return vf(a)&&a!=+a},Z.isNative=function ap(a){if(Md(a))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ju(a)},Z.isNil=function sp(a){return null==a},Z.isNull=function gf(a){return null===a},Z.isNumber=vf,Z.isObject=Qn,Z.isObjectLike=tr,Z.isPlainObject=Ks,Z.isRegExp=Rl,Z.isSafeInteger=function up(a){return Xs(a)&&a>=-Jn&&a<=Jn},Z.isSet=mf,Z.isString=gs,Z.isSymbol=Rr,Z.isTypedArray=vs,Z.isUndefined=function lp(a){return a===v},Z.isWeakMap=function yf(a){return tr(a)&&zr(a)==rn},Z.isWeakSet=function xf(a){return tr(a)&&"[object WeakSet]"==Tr(a)},Z.join=function Wd(a,u){return null==a?"":eu.call(a,u)},Z.kebabCase=Bp,Z.last=xr,Z.lastIndexOf=function $d(a,u,p){var I=null==a?0:a.length;if(!I)return-1;var z=I;return p!==v&&(z=(z=an(p))<0?gr(I+z,0):Lr(z,I-1)),u==u?function Nn(be,Ue,De){for(var qe=De+1;qe--;)if(be[qe]===Ue)return qe;return qe}(a,u,z):Yr(a,Vr,z,!0)},Z.lowerCase=Lf,Z.lowerFirst=Hp,Z.lt=cp,Z.lte=fp,Z.max=function ug(a){return a&&a.length?cn(a,ci,au):v},Z.maxBy=function lg(a,u){return a&&a.length?cn(a,Bt(u,2),au):v},Z.mean=function cg(a){return Ti(a,ci)},Z.meanBy=function fg(a,u){return Ti(a,Bt(u,2))},Z.min=function dg(a){return a&&a.length?cn(a,ci,qu):v},Z.minBy=function hg(a,u){return a&&a.length?cn(a,Bt(u,2),qu):v},Z.stubArray=$l,Z.stubFalse=Yl,Z.stubObject=function ng(){return{}},Z.stubString=function Du(){return""},Z.stubTrue=function rg(){return!0},Z.multiply=pg,Z.nth=function tf(a,u){return a&&a.length?fu(a,an(u)):v},Z.noConflict=function Zp(){return l._===this&&(l._=Rt),this},Z.noop=Gl,Z.now=Ou,Z.pad=function jp(a,u,p){a=Mn(a);var I=(u=an(u))?co(a):0;if(!u||I>=u)return a;var z=(u-I)/2;return bu(Ps(z),p)+a+bu(Wa(z),p)},Z.padEnd=function zp(a,u,p){a=Mn(a);var I=(u=an(u))?co(a):0;return u&&I<u?a+bu(u-I,p):a},Z.padStart=function jl(a,u,p){a=Mn(a);var I=(u=an(u))?co(a):0;return u&&I<u?bu(u-I,p)+a:a},Z.parseInt=function kg(a,u,p){return p||null==u?u=0:u&&(u=+u),tu(Mn(a).replace(wo,""),u||0)},Z.random=function Np(a,u,p){if(p&&"boolean"!=typeof p&&Kr(a,u,p)&&(u=p=v),p===v&&("boolean"==typeof u?(p=u,u=v):"boolean"==typeof a&&(p=a,a=v)),a===v&&u===v?(a=0,u=1):(a=zo(a),u===v?(u=a,a=0):u=zo(u)),a>u){var I=a;a=u,u=I}if(p||a%1||u%1){var z=Gu();return Lr(a+z*(u-a+oe("1e-"+((z+"").length-1))),u)}return Rs(a,u)},Z.reduce=function Il(a,u,p){var I=Zt(a)?Cr:uo,z=arguments.length<3;return I(a,Bt(u,4),p,z,ho)},Z.reduceRight=function Ii(a,u,p){var I=Zt(a)?bn:uo,z=arguments.length<3;return I(a,Bt(u,4),p,z,Do)},Z.repeat=function Nf(a,u,p){return u=(p?Kr(a,u,p):u===v)?1:an(u),rl(Mn(a),u)},Z.replace=function Lg(){var a=arguments,u=Mn(a[0]);return a.length<3?u:u.replace(a[1],a[2])},Z.result=function Pp(a,u,p){var I=-1,z=(u=ra(u,a)).length;for(z||(z=1,a=v);++I<z;){var e=null==a?v:a[mo(u[I])];e===v&&(I=z,e=p),a=qi(e)?e.call(a):e}return a},Z.round=gg,Z.runInContext=be,Z.sample=function Ma(a){return(Zt(a)?sd:bc)(a)},Z.size=function cf(a){if(null==a)return 0;if(ui(a))return gs(a)?co(a):a.length;var u=zr(a);return u==Yt||u==Ye?a.size:cu(a).length},Z.snakeCase=Ng,Z.some=function Dh(a,u,p){var I=Zt(a)?Re:vd;return p&&Kr(a,u,p)&&(u=v),I(a,Bt(u,3))},Z.sortedIndex=function Zd(a,u){return pu(a,u)},Z.sortedIndexBy=function rf(a,u,p){return il(a,u,Bt(p,2))},Z.sortedIndexOf=function Ki(a,u){var p=null==a?0:a.length;if(p){var I=pu(a,u);if(I<p&&Zi(a[I],u))return I}return-1},Z.sortedLastIndex=function qd(a,u){return pu(a,u,!0)},Z.sortedLastIndexBy=function eh(a,u,p){return il(a,u,Bt(p,2),!0)},Z.sortedLastIndexOf=function th(a,u){if(null!=a&&a.length){var I=pu(a,u,!0)-1;if(Zi(a[I],u))return I}return-1},Z.startCase=Dg,Z.startsWith=function Up(a,u,p){return a=Mn(a),p=null==p?0:wa(an(p),0,a.length),u=ii(u),a.slice(p,p+u.length)==u},Z.subtract=vg,Z.sum=function mg(a){return a&&a.length?Yn(a,ci):0},Z.sumBy=function yg(a,u){return a&&a.length?Yn(a,Bt(u,2)):0},Z.template=function Fg(a,u,p){var I=Z.templateSettings;p&&Kr(a,u,p)&&(u=v),a=Mn(a),u=Nu({},u,I,_u);var t,r,z=Nu({},u.imports,I.imports,_u),e=Er(z),n=Ss(z,e),o=0,s=u.interpolate||bi,c="__p += '",h=Ua((u.escape||bi).source+"|"+s.source+"|"+(s===Co?Ra:bi).source+"|"+(u.evaluate||bi).source+"|$","g"),m="//# sourceURL="+(je.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qo+"]")+"\n";a.replace(h,function(y,H,J,ne,ye,xe){return J||(J=ne),c+=a.slice(o,xe).replace(ki,Zl),H&&(t=!0,c+="' +\n__e("+H+") +\n'"),ye&&(r=!0,c+="';\n"+ye+";\n__p += '"),J&&(c+="' +\n((__t = ("+J+")) == null ? '' : __t) +\n'"),o=xe+y.length,y}),c+="';\n";var _=je.call(u,"variable")&&u.variable;if(_){if(Oi.test(_))throw new _t("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(r?c.replace(nr,""):c).replace(bo,"$1").replace(Na,"$1;"),c="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(t?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var S=$p(function(){return yt(e,m+"return "+c).apply(v,n)});if(S.source=c,Nl(S))throw S;return S},Z.times=function Dr(a,u){if((a=an(a))<1||a>Jn)return[];var p=Le,I=Lr(a,Le);u=Bt(u),a-=Le;for(var z=Jo(I,u);++p<a;)u(p);return z},Z.toFinite=zo,Z.toInteger=an,Z.toLength=_f,Z.toLower=function Rf(a){return Mn(a).toLowerCase()},Z.toNumber=Ai,Z.toSafeInteger=function dp(a){return a?wa(an(a),-Jn,Jn):0===a?a:0},Z.toString=Mn,Z.toUpper=function Vg(a){return Mn(a).toUpperCase()},Z.trim=function Df(a,u,p){if((a=Mn(a))&&(p||u===v))return Vu(a);if(!a||!(u=ii(u)))return a;var I=ir(a),z=ir(u);return ia(I,Bu(I,z),Js(I,z)+1).join("")},Z.trimEnd=function Gp(a,u,p){if((a=Mn(a))&&(p||u===v))return a.slice(0,wt(a)+1);if(!a||!(u=ii(u)))return a;var I=ir(a);return ia(I,0,Js(I,ir(u))+1).join("")},Z.trimStart=function Bg(a,u,p){if((a=Mn(a))&&(p||u===v))return a.replace(wo,"");if(!a||!(u=ii(u)))return a;var I=ir(a);return ia(I,Bu(I,ir(u))).join("")},Z.truncate=function Hg(a,u){var p=30,I="...";if(Qn(u)){var z="separator"in u?u.separator:z;p="length"in u?an(u.length):p,I="omission"in u?ii(u.omission):I}var e=(a=Mn(a)).length;if(Gi(a)){var n=ir(a);e=n.length}if(p>=e)return a;var t=p-co(I);if(t<1)return I;var r=n?ia(n,0,t).join(""):a.slice(0,t);if(z===v)return r+I;if(n&&(t+=r.length-t),Rl(z)){if(a.slice(t).search(z)){var o,s=r;for(z.global||(z=Ua(z.source,Mn(fa.exec(z))+"g")),z.lastIndex=0;o=z.exec(s);)var c=o.index;r=r.slice(0,c===v?t:c)}}else if(a.indexOf(ii(z),t)!=t){var h=r.lastIndexOf(z);h>-1&&(r=r.slice(0,h))}return r+I},Z.unescape=function jg(a){return(a=Mn(a))&&Zr.test(a)?a.replace(eo,Br):a},Z.uniqueId=function Cs(a){var u=++at;return Mn(a)+u},Z.upperCase=Ru,Z.upperFirst=Ff,Z.each=Au,Z.eachRight=Ws,Z.first=ef,Ul(Z,function(){var a={};return po(Z,function(u,p){je.call(Z.prototype,p)||(a[p]=u)}),a}(),{chain:!1}),Z.VERSION="4.17.21",vt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Z[a].placeholder=Z}),vt(["drop","take"],function(a,u){Jt.prototype[a]=function(p){p=p===v?1:gr(an(p),0);var I=this.__filtered__&&!u?new Jt(this):this.clone();return I.__filtered__?I.__takeCount__=Lr(p,I.__takeCount__):I.__views__.push({size:Lr(p,Le),type:a+(I.__dir__<0?"Right":"")}),I},Jt.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),vt(["filter","map","takeWhile"],function(a,u){var p=u+1,I=1==p||3==p;Jt.prototype[a]=function(z){var e=this.clone();return e.__iteratees__.push({iteratee:Bt(z,3),type:p}),e.__filtered__=e.__filtered__||I,e}}),vt(["head","last"],function(a,u){var p="take"+(u?"Right":"");Jt.prototype[a]=function(){return this[p](1).value()[0]}}),vt(["initial","tail"],function(a,u){var p="drop"+(u?"":"Right");Jt.prototype[a]=function(){return this.__filtered__?new Jt(this):this[p](1)}}),Jt.prototype.compact=function(){return this.filter(ci)},Jt.prototype.find=function(a){return this.filter(a).head()},Jt.prototype.findLast=function(a){return this.reverse().find(a)},Jt.prototype.invokeMap=un(function(a,u){return"function"==typeof a?new Jt(this):this.map(function(p){return Ls(p,a,u)})}),Jt.prototype.reject=function(a){return this.filter(hs(Bt(a)))},Jt.prototype.slice=function(a,u){a=an(a);var p=this;return p.__filtered__&&(a>0||u<0)?new Jt(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),u!==v&&(p=(u=an(u))<0?p.dropRight(-u):p.take(u-a)),p)},Jt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Jt.prototype.toArray=function(){return this.take(Le)},po(Jt.prototype,function(a,u){var p=/^(?:filter|find|map|reject)|While$/.test(u),I=/^(?:head|last)$/.test(u),z=Z[I?"take"+("last"==u?"Right":""):u],e=I||/^find/.test(u);!z||(Z.prototype[u]=function(){var n=this.__wrapped__,t=I?[1]:arguments,r=n instanceof Jt,o=t[0],s=r||Zt(n),c=function(H){var J=z.apply(Z,Tt([H],t));return I&&h?J[0]:J};s&&p&&"function"==typeof o&&1!=o.length&&(r=s=!1);var h=this.__chain__,m=!!this.__actions__.length,_=e&&!h,S=r&&!m;if(!e&&s){n=S?n:new Jt(this);var y=a.apply(n,t);return y.__actions__.push({func:Iu,args:[c],thisArg:v}),new Pi(y,h)}return _&&S?a.apply(this,t):(y=this.thru(c),_?I?y.value()[0]:y.value():y)})}),vt(["pop","push","shift","sort","splice","unshift"],function(a){var u=ce[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",I=/^(?:pop|shift)$/.test(a);Z.prototype[a]=function(){var z=arguments;if(I&&!this.__chain__){var e=this.value();return u.apply(Zt(e)?e:[],z)}return this[p](function(n){return u.apply(Zt(n)?n:[],z)})}}),po(Jt.prototype,function(a,u){var p=Z[u];if(p){var I=p.name+"";je.call(_a,I)||(_a[I]=[]),_a[I].push({name:u,func:p})}}),_a[yu(v,2).name]=[{name:"wrapper",func:v}],Jt.prototype.clone=function oc(){var a=new Jt(this.__wrapped__);return a.__actions__=ai(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ai(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ai(this.__views__),a},Jt.prototype.reverse=function ac(){if(this.__filtered__){var a=new Jt(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},Jt.prototype.value=function sc(){var a=this.__wrapped__.value(),u=this.__dir__,p=Zt(a),I=u<0,z=p?a.length:0,e=function Td(a,u,p){for(var I=-1,z=p.length;++I<z;){var e=p[I],n=e.size;switch(e.type){case"drop":a+=n;break;case"dropRight":u-=n;break;case"take":u=Lr(u,a+n);break;case"takeRight":a=gr(a,u-n)}}return{start:a,end:u}}(0,z,this.__views__),n=e.start,t=e.end,r=t-n,o=I?t:n-1,s=this.__iteratees__,c=s.length,h=0,m=Lr(r,this.__takeCount__);if(!p||!I&&z==r&&m==r)return Sc(a,this.__actions__);var _=[];e:for(;r--&&h<m;){for(var S=-1,y=a[o+=u];++S<c;){var H=s[S],ne=H.type,ye=(0,H.iteratee)(y);if(2==ne)y=ye;else if(!ye){if(1==ne)continue e;break e}}_[h++]=y}return _},Z.prototype.at=_h,Z.prototype.chain=function Ch(){return uf(this)},Z.prototype.commit=function wh(){return new Pi(this.value(),this.__chain__)},Z.prototype.next=function Sh(){this.__values__===v&&(this.__values__=bf(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?v:this.__values__[this.__index__++]}},Z.prototype.plant=function Eh(a){for(var u,p=this;p instanceof iu;){var I=Xc(p);I.__index__=0,I.__values__=v,u?z.__wrapped__=I:u=I;var z=I;p=p.__wrapped__}return z.__wrapped__=a,u},Z.prototype.reverse=function Ph(){var a=this.__wrapped__;if(a instanceof Jt){var u=a;return this.__actions__.length&&(u=new Jt(this)),(u=u.reverse()).__actions__.push({func:Iu,args:[Sl],thisArg:v}),new Pi(u,this.__chain__)}return this.thru(Sl)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function Ih(){return Sc(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,Ga&&(Z.prototype[Ga]=function Th(){return this}),Z}();l._=lr,(g=function(){return lr}.call(W,f,W,P))!==v&&(P.exports=g)}.call(this)},19984:(P,W,f)=>{var g=f(84633),v=f(96517),T=f(92046),E=f(21503);P.exports=function b(A,k){return(E(A)?g:T)(A,v(k,3))}},10203:(P,W,f)=>{var g=f(85683),v=f(45184),T=f(96517);P.exports=function E(b,A){var k={};return A=T(A,3),v(b,function(M,B,j){g(k,B,A(M,B,j))}),k}},18176:(P,W,f)=>{var g=f(67308),v=f(31100),T=f(32608);P.exports=function E(b){return b&&b.length?g(b,T,v):void 0}},30535:(P,W,f)=>{var g=f(99850);function T(E,b){if("function"!=typeof E||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var A=function(){var k=arguments,M=b?b.apply(this,k):k[0],B=A.cache;if(B.has(M))return B.get(M);var j=E.apply(this,k);return A.cache=B.set(M,j)||B,j};return A.cache=new(T.Cache||g),A}T.Cache=g,P.exports=T},80567:(P,W,f)=>{var g=f(73842),T=f(84944)(function(E,b,A){g(E,b,A)});P.exports=T},29439:(P,W,f)=>{var g=f(67308),v=f(99069),T=f(32608);P.exports=function E(b){return b&&b.length?g(b,T,v):void 0}},29525:(P,W,f)=>{var g=f(67308),v=f(96517),T=f(99069);P.exports=function E(b,A){return b&&b.length?g(b,v(A,2),T):void 0}},12552:P=>{P.exports=function W(){}},31710:(P,W,f)=>{var g=f(12119);P.exports=function(){return g.Date.now()}},16372:(P,W,f)=>{var g=f(83021),T=f(3975)(function(E,b){return null==E?{}:g(E,b)});P.exports=T},87495:(P,W,f)=>{var g=f(11847),v=f(39222),T=f(45352),E=f(68533);P.exports=function b(A){return T(A)?g(E(A)):v(A)}},90361:(P,W,f)=>{var v=f(97509)();P.exports=v},81337:(P,W,f)=>{var g=f(8745),v=f(43132),T=f(96517),E=f(13570),b=f(21503);P.exports=function A(k,M,B){var j=b(k)?g:E,L=arguments.length<3;return j(k,T(M,4),B,L,v)}},55637:(P,W,f)=>{var g=f(81172),v=f(28794),T=f(56507),E=f(30248),b=f(52315);P.exports=function M(B){if(null==B)return 0;if(T(B))return E(B)?b(B):B.length;var j=v(B);return"[object Map]"==j||"[object Set]"==j?B.size:g(B).length}},12906:(P,W,f)=>{var g=f(50686),v=f(6119),T=f(23269),E=f(93342),b=T(function(A,k){if(null==A)return[];var M=k.length;return M>1&&E(A,k[0],k[1])?k=[]:M>2&&E(k[0],k[1],k[2])&&(k=[k[0]]),v(A,g(k,1),[])});P.exports=b},49975:P=>{P.exports=function W(){return[]}},63580:P=>{P.exports=function W(){return!1}},12232:(P,W,f)=>{var g=f(51467),v=1/0;P.exports=function E(b){return b?(b=g(b))===v||b===-v?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}},44401:(P,W,f)=>{var g=f(12232);P.exports=function v(T){var E=g(T),b=E%1;return E==E?b?E-b:E:0}},51467:(P,W,f)=>{var g=f(83348),v=f(25940),T=f(44129),b=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;P.exports=function B(j){if("number"==typeof j)return j;if(T(j))return NaN;if(v(j)){var L="function"==typeof j.valueOf?j.valueOf():j;j=v(L)?L+"":L}if("string"!=typeof j)return 0===j?j:+j;j=g(j);var X=A.test(j);return X||k.test(j)?M(j.slice(2),X?2:8):b.test(j)?NaN:+j}},8067:(P,W,f)=>{var g=f(31989),v=f(16555);P.exports=function T(E){return g(E,v(E))}},73943:(P,W,f)=>{var g=f(93935);P.exports=function v(T){return null==T?"":g(T)}},89416:(P,W,f)=>{var g=f(96837),v=f(78858),T=f(45184),E=f(96517),b=f(29519),A=f(21503),k=f(80891),M=f(75946),B=f(25940),j=f(48159);P.exports=function L(X,te,le){var i=A(X),ae=i||k(X)||j(X);if(te=E(te,4),null==le){var he=X&&X.constructor;le=ae?i?new he:[]:B(X)&&M(he)?v(b(X)):{}}return(ae?g:T)(X,function(fe,ee,ge){return te(le,fe,ee,ge)}),le}},68921:(P,W,f)=>{var g=f(50686),v=f(23269),T=f(80707),E=f(21330),b=v(function(A){return T(g(A,1,E,!0))});P.exports=b},51541:(P,W,f)=>{var g=f(73943),v=0;P.exports=function T(E){var b=++v;return g(E)+b}},90377:(P,W,f)=>{var g=f(19179),v=f(118);P.exports=function T(E){return null==E?[]:g(E,v(E))}},21617:(P,W,f)=>{var g=f(89719),v=f(38645);P.exports=function T(E,b){return v(E||[],b||[],g)}},29610:function(P){P.exports=function(){var W="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},g=Array.prototype,v=Object.prototype,T="undefined"!=typeof Symbol?Symbol.prototype:null,E=g.push,b=g.slice,A=v.toString,k=v.hasOwnProperty,M="undefined"!=typeof ArrayBuffer,B="undefined"!=typeof DataView,j=Array.isArray,L=Object.keys,X=Object.create,te=M&&ArrayBuffer.isView,le=isNaN,i=isFinite,ae=!{toString:null}.propertyIsEnumerable("toString"),he=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],fe=Math.pow(2,53)-1;function ee(R,Q){return Q=null==Q?R.length-1:+Q,function(){for(var oe=Math.max(arguments.length-Q,0),de=Array(oe),Ie=0;Ie<oe;Ie++)de[Ie]=arguments[Ie+Q];switch(Q){case 0:return R.call(this,de);case 1:return R.call(this,arguments[0],de);case 2:return R.call(this,arguments[0],arguments[1],de)}var we=Array(Q+1);for(Ie=0;Ie<Q;Ie++)we[Ie]=arguments[Ie];return we[Q]=de,R.apply(this,we)}}function ge(R){var Q=typeof R;return"function"===Q||"object"===Q&&!!R}function Te(R){return void 0===R}function Ne(R){return!0===R||!1===R||"[object Boolean]"===A.call(R)}function C(R){var Q="[object "+R+"]";return function(oe){return A.call(oe)===Q}}var Ve=C("String"),Qe=C("Number"),Xe=C("Date"),et=C("RegExp"),nt=C("Error"),ut=C("Symbol"),bt=C("ArrayBuffer"),Ht=C("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(Ht=function(R){return"function"==typeof R||!1});var Et=Ht,Jn=C("Object"),Pr=B&&Jn(new DataView(new ArrayBuffer(8))),Ir="undefined"!=typeof Map&&Jn(new Map),Le=C("DataView"),gn=Pr?function(R){return null!=R&&Et(R.getInt8)&&bt(R.buffer)}:Le,ar=j||C("Array");function Cn(R,Q){return null!=R&&k.call(R,Q)}var Be=C("Arguments");!function(){Be(arguments)||(Be=function(R){return Cn(R,"callee")})}();var Ce=Be;function Ze(R){return Qe(R)&&le(R)}function lt(R){return function(){return R}}function mt(R){return function(Q){var oe=R(Q);return"number"==typeof oe&&oe>=0&&oe<=fe}}function nn(R){return function(Q){return null==Q?void 0:Q[R]}}var mn=nn("byteLength"),zn=mt(mn),di=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Yt=M?function(R){return te?te(R)&&!gn(R):zn(R)&&di.test(A.call(R))}:lt(!1),jt=nn("length");function D(R,Q){Q=function(l){for(var d={},x=l.length,w=0;w<x;++w)d[l[w]]=!0;return{contains:function(N){return!0===d[N]},push:function(N){return d[N]=!0,l.push(N)}}}(Q);var oe=he.length,de=R.constructor,Ie=Et(de)&&de.prototype||v,we="constructor";for(Cn(R,we)&&!Q.contains(we)&&Q.push(we);oe--;)(we=he[oe])in R&&R[we]!==Ie[we]&&!Q.contains(we)&&Q.push(we)}function G(R){if(!ge(R))return[];if(L)return L(R);var Q=[];for(var oe in R)Cn(R,oe)&&Q.push(oe);return ae&&D(R,Q),Q}function re(R,Q){var oe=G(Q),de=oe.length;if(null==R)return!de;for(var Ie=Object(R),we=0;we<de;we++){var l=oe[we];if(Q[l]!==Ie[l]||!(l in Ie))return!1}return!0}function me(R){return R instanceof me?R:this instanceof me?void(this._wrapped=R):new me(R)}function Ge(R){return new Uint8Array(R.buffer||R,R.byteOffset||0,mn(R))}me.VERSION=W,me.prototype.valueOf=me.prototype.toJSON=me.prototype.value=function(){return this._wrapped},me.prototype.toString=function(){return String(this._wrapped)};var Ye="[object DataView]";function ct(R,Q,oe,de){if(R===Q)return 0!==R||1/R==1/Q;if(null==R||null==Q)return!1;if(R!=R)return Q!=Q;var Ie=typeof R;return("function"===Ie||"object"===Ie||"object"==typeof Q)&&function we(l,d,x,w){l instanceof me&&(l=l._wrapped),d instanceof me&&(d=d._wrapped);var N=A.call(l);if(N!==A.call(d))return!1;if(Pr&&"[object Object]"==N&&gn(l)){if(!gn(d))return!1;N=Ye}switch(N){case"[object RegExp]":case"[object String]":return""+l==""+d;case"[object Number]":return+l!=+l?+d!=+d:0==+l?1/+l==1/d:+l==+d;case"[object Date]":case"[object Boolean]":return+l==+d;case"[object Symbol]":return T.valueOf.call(l)===T.valueOf.call(d);case"[object ArrayBuffer]":case Ye:return we(Ge(l),Ge(d),x,w)}var F="[object Array]"===N;if(!F&&Yt(l)){if(mn(l)!==mn(d))return!1;if(l.buffer===d.buffer&&l.byteOffset===d.byteOffset)return!0;F=!0}if(!F){if("object"!=typeof l||"object"!=typeof d)return!1;var Y=l.constructor,ue=d.constructor;if(Y!==ue&&!(Et(Y)&&Y instanceof Y&&Et(ue)&&ue instanceof ue)&&"constructor"in l&&"constructor"in d)return!1}w=w||[];for(var se=(x=x||[]).length;se--;)if(x[se]===l)return w[se]===d;if(x.push(l),w.push(d),F){if((se=l.length)!==d.length)return!1;for(;se--;)if(!ct(l[se],d[se],x,w))return!1}else{var Ee,Fe=G(l);if(se=Fe.length,G(d).length!==se)return!1;for(;se--;)if(!Cn(d,Ee=Fe[se])||!ct(l[Ee],d[Ee],x,w))return!1}return x.pop(),w.pop(),!0}(R,Q,oe,de)}function It(R){if(!ge(R))return[];var Q=[];for(var oe in R)Q.push(oe);return ae&&D(R,Q),Q}function Vt(R){var Q=jt(R);return function(oe){if(null==oe)return!1;var de=It(oe);if(jt(de))return!1;for(var Ie=0;Ie<Q;Ie++)if(!Et(oe[R[Ie]]))return!1;return R!==Ur||!Et(oe[rn])}}var rn="forEach",on=["clear","delete"],Un=["get","has","set"],Hn=on.concat(rn,Un),Ur=on.concat(Un),Pn=["add"].concat(on,rn,"has"),Gn=Ir?Vt(Hn):C("Map"),jn=Ir?Vt(Ur):C("WeakMap"),Kn=Ir?Vt(Pn):C("Set"),mr=C("WeakSet");function Gr(R){for(var Q=G(R),oe=Q.length,de=Array(oe),Ie=0;Ie<oe;Ie++)de[Ie]=R[Q[Ie]];return de}function sr(R){for(var Q={},oe=G(R),de=0,Ie=oe.length;de<Ie;de++)Q[R[oe[de]]]=oe[de];return Q}function nr(R){var Q=[];for(var oe in R)Et(R[oe])&&Q.push(oe);return Q.sort()}function bo(R,Q){return function(oe){var de=arguments.length;if(Q&&(oe=Object(oe)),de<2||null==oe)return oe;for(var Ie=1;Ie<de;Ie++)for(var we=arguments[Ie],l=R(we),d=l.length,x=0;x<d;x++){var w=l[x];Q&&void 0!==oe[w]||(oe[w]=we[w])}return oe}}var Na=bo(It),eo=bo(G),Go=bo(It,!0);function Zr(R){if(!ge(R))return{};if(X)return X(R);var Q=function(){};Q.prototype=R;var oe=new Q;return Q.prototype=null,oe}function sn(R){return ar(R)?R:[R]}function _o(R){return me.toPath(R)}function la(R,Q){for(var oe=Q.length,de=0;de<oe;de++){if(null==R)return;R=R[Q[de]]}return oe?R:void 0}function Co(R,Q,oe){var de=la(R,_o(Q));return Te(de)?oe:de}function to(R){return R}function zt(R){return R=eo({},R),function(Q){return re(Q,R)}}function ca(R){return R=_o(R),function(Q){return la(Q,R)}}function Mi(R,Q,oe){if(void 0===Q)return R;switch(null==oe?3:oe){case 1:return function(de){return R.call(Q,de)};case 3:return function(de,Ie,we){return R.call(Q,de,Ie,we)};case 4:return function(de,Ie,we,l){return R.call(Q,de,Ie,we,l)}}return function(){return R.apply(Q,arguments)}}function Wo(R,Q,oe){return null==R?to:Et(R)?Mi(R,Q,oe):ge(R)&&!ar(R)?zt(R):ca(R)}function wo(R,Q){return Wo(R,Q,1/0)}function Dn(R,Q,oe){return me.iteratee!==wo?me.iteratee(R,Q):Wo(R,Q,oe)}function hi(){}function no(R,Q){return null==Q&&(Q=R,R=0),R+Math.floor(Math.random()*(Q-R+1))}me.toPath=sn,me.iteratee=wo;var Fn=Date.now||function(){return(new Date).getTime()};function So(R){var Q=function(we){return R[we]},oe="(?:"+G(R).join("|")+")",de=RegExp(oe),Ie=RegExp(oe,"g");return function(we){return de.test(we=null==we?"":""+we)?we.replace(Ie,Q):we}}var Oi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ro=So(Oi),Ra=So(sr(Oi)),fa=me.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},pi=/(.)^/,da={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Wt=/\\|'|\r|\n|\u2028|\u2029/g;function To(R){return"\\"+da[R]}var $o=/^\s*(\w|\$)+\s*$/,ha=0;function bi(R,Q,oe,de,Ie){if(!(de instanceof Q))return R.apply(oe,Ie);var we=Zr(R.prototype),l=R.apply(we,Ie);return ge(l)?l:we}var ki=ee(function(R,Q){var oe=ki.placeholder,de=function(){for(var Ie=0,we=Q.length,l=Array(we),d=0;d<we;d++)l[d]=Q[d]===oe?arguments[Ie++]:Q[d];for(;Ie<arguments.length;)l.push(arguments[Ie++]);return bi(R,de,this,this,l)};return de});ki.placeholder=me;var Li=ee(function(R,Q,oe){if(!Et(R))throw new TypeError("Bind must be called on a function");var de=ee(function(Ie){return bi(R,de,Q,this,oe.concat(Ie))});return de}),Ar=mt(jt);function gi(R,Q,oe,de){if(de=de||[],Q||0===Q){if(Q<=0)return de.concat(R)}else Q=1/0;for(var Ie=de.length,we=0,l=jt(R);we<l;we++){var d=R[we];if(Ar(d)&&(ar(d)||Ce(d)))if(Q>1)gi(d,Q-1,oe,de),Ie=de.length;else for(var x=0,w=d.length;x<w;)de[Ie++]=d[x++];else oe||(de[Ie++]=d)}return de}var Da=ee(function(R,Q){var oe=(Q=gi(Q,!1,!1)).length;if(oe<1)throw new Error("bindAll must be passed function names");for(;oe--;){var de=Q[oe];R[de]=Li(R[de],R)}return R}),io=ee(function(R,Q,oe){return setTimeout(function(){return R.apply(null,oe)},Q)}),ve=ki(io,me,1);function Wn(R){return function(){return!R.apply(this,arguments)}}function vi(R,Q){var oe;return function(){return--R>0&&(oe=Q.apply(this,arguments)),R<=1&&(Q=null),oe}}var oo=ki(vi,2);function ft(R,Q,oe){Q=Dn(Q,oe);for(var de,Ie=G(R),we=0,l=Ie.length;we<l;we++)if(Q(R[de=Ie[we]],de,R))return de}function _i(R){return function(Q,oe,de){oe=Dn(oe,de);for(var Ie=jt(Q),we=R>0?0:Ie-1;we>=0&&we<Ie;we+=R)if(oe(Q[we],we,Q))return we;return-1}}var Ni=_i(1),Ri=_i(-1);function ao(R,Q,oe,de){for(var Ie=(oe=Dn(oe,de,1))(Q),we=0,l=jt(R);we<l;){var d=Math.floor((we+l)/2);oe(R[d])<Ie?we=d+1:l=d}return we}function Zn(R,Q,oe){return function(de,Ie,we){var l=0,d=jt(de);if("number"==typeof we)R>0?l=we>=0?we:Math.max(we+d,l):d=we>=0?Math.min(we+1,d):we+d+1;else if(oe&&we&&d)return de[we=oe(de,Ie)]===Ie?we:-1;if(Ie!=Ie)return(we=Q(b.call(de,l,d),Ze))>=0?we+l:-1;for(we=R>0?l:d-1;we>=0&&we<d;we+=R)if(de[we]===Ie)return we;return-1}}var Fa=Zn(1,Ni,ao),pa=Zn(-1,Ri);function pr(R,Q,oe){var de=(Ar(R)?Ni:ft)(R,Q,oe);if(void 0!==de&&-1!==de)return R[de]}function Wr(R,Q,oe){var de,Ie;if(Q=Mi(Q,oe),Ar(R))for(de=0,Ie=R.length;de<Ie;de++)Q(R[de],de,R);else{var we=G(R);for(de=0,Ie=we.length;de<Ie;de++)Q(R[we[de]],we[de],R)}return R}function yr(R,Q,oe){Q=Dn(Q,oe);for(var de=!Ar(R)&&G(R),Ie=(de||R).length,we=Array(Ie),l=0;l<Ie;l++){var d=de?de[l]:l;we[l]=Q(R[d],d,R)}return we}function Yo(R){var Q=function(oe,de,Ie,we){var l=!Ar(oe)&&G(oe),d=(l||oe).length,x=R>0?0:d-1;for(we||(Ie=oe[l?l[x]:x],x+=R);x>=0&&x<d;x+=R){var w=l?l[x]:x;Ie=de(Ie,oe[w],w,oe)}return Ie};return function(oe,de,Ie,we){var l=arguments.length>=3;return Q(oe,Mi(de,we,4),Ie,l)}}var Di=Yo(1),qr=Yo(-1);function rt(R,Q,oe){var de=[];return Q=Dn(Q,oe),Wr(R,function(Ie,we,l){Q(Ie,we,l)&&de.push(Ie)}),de}function Eo(R,Q,oe){Q=Dn(Q,oe);for(var de=!Ar(R)&&G(R),Ie=(de||R).length,we=0;we<Ie;we++){var l=de?de[we]:we;if(!Q(R[l],l,R))return!1}return!0}function Po(R,Q,oe){Q=Dn(Q,oe);for(var de=!Ar(R)&&G(R),Ie=(de||R).length,we=0;we<Ie;we++){var l=de?de[we]:we;if(Q(R[l],l,R))return!0}return!1}function Mr(R,Q,oe,de){return Ar(R)||(R=Gr(R)),("number"!=typeof oe||de)&&(oe=0),Fa(R,Q,oe)>=0}var Ci=ee(function(R,Q,oe){var de,Ie;return Et(Q)?Ie=Q:(Q=_o(Q),de=Q.slice(0,-1),Q=Q[Q.length-1]),yr(R,function(we){var l=Ie;if(!l){if(de&&de.length&&(we=la(we,de)),null==we)return;l=we[Q]}return null==l?l:l.apply(we,oe)})});function ln(R,Q){return yr(R,ca(Q))}function Fi(R,Q,oe){var de,Ie,we=-1/0,l=-1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof R[0]&&null!=R)for(var d=0,x=(R=Ar(R)?R:Gr(R)).length;d<x;d++)null!=(de=R[d])&&de>we&&(we=de);else Q=Dn(Q,oe),Wr(R,function(w,N,F){((Ie=Q(w,N,F))>l||Ie===-1/0&&we===-1/0)&&(we=w,l=Ie)});return we}var ga=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Xo(R){return R?ar(R)?b.call(R):Ve(R)?R.match(ga):Ar(R)?yr(R,to):Gr(R):[]}function Io(R,Q,oe){if(null==Q||oe)return Ar(R)||(R=Gr(R)),R[no(R.length-1)];var de=Xo(R),Ie=jt(de);Q=Math.max(Math.min(Q,Ie),0);for(var we=Ie-1,l=0;l<Q;l++){var d=no(l,we),x=de[l];de[l]=de[d],de[d]=x}return de.slice(0,Q)}function Vi(R,Q){return function(oe,de,Ie){var we=Q?[[],[]]:{};return de=Dn(de,Ie),Wr(oe,function(l,d){var x=de(l,d,oe);R(we,l,x)}),we}}var dn=Vi(function(R,Q,oe){Cn(R,oe)?R[oe].push(Q):R[oe]=[Q]}),Bi=Vi(function(R,Q,oe){R[oe]=Q}),Ct=Vi(function(R,Q,oe){Cn(R,oe)?R[oe]++:R[oe]=1}),ei=Vi(function(R,Q,oe){R[oe?0:1].push(Q)},!0);function wi(R,Q,oe){return Q in oe}var rr=ee(function(R,Q){var oe={},de=Q[0];if(null==R)return oe;Et(de)?(Q.length>1&&(de=Mi(de,Q[1])),Q=It(R)):(de=wi,Q=gi(Q,!1,!1),R=Object(R));for(var Ie=0,we=Q.length;Ie<we;Ie++){var l=Q[Ie],d=R[l];de(d,l,R)&&(oe[l]=d)}return oe}),Va=ee(function(R,Q){var oe,de=Q[0];return Et(de)?(de=Wn(de),Q.length>1&&(oe=Q[1])):(Q=yr(gi(Q,!1,!1),String),de=function(Ie,we){return!Mr(Q,we)}),rr(R,de,oe)});function _r(R,Q,oe){return b.call(R,0,Math.max(0,R.length-(null==Q||oe?1:Q)))}function Ko(R,Q,oe){return null==R||R.length<1?null==Q||oe?void 0:[]:null==Q||oe?R[0]:_r(R,R.length-Q)}function Or(R,Q,oe){return b.call(R,null==Q||oe?1:Q)}var so=ee(function(R,Q){return Q=gi(Q,!0,!0),rt(R,function(oe){return!Mr(Q,oe)})}),Hi=ee(function(R,Q){return so(R,Q)});function ji(R,Q,oe,de){Ne(Q)||(de=oe,oe=Q,Q=!1),null!=oe&&(oe=Dn(oe,de));for(var Ie=[],we=[],l=0,d=jt(R);l<d;l++){var x=R[l],w=oe?oe(x,l,R):x;Q&&!oe?(l&&we===w||Ie.push(x),we=w):oe?Mr(we,w)||(we.push(w),Ie.push(x)):Mr(Ie,x)||Ie.push(x)}return Ie}var Ba=ee(function(R){return ji(gi(R,!0,!0))});function Qo(R){for(var Q=R&&Fi(R,jt).length||0,oe=Array(Q),de=0;de<Q;de++)oe[de]=ln(R,de);return oe}var Xt=ee(Qo);function wn(R,Q){return R._chain?me(Q).chain():Q}function Si(R){return Wr(nr(R),function(Q){var oe=me[Q]=R[Q];me.prototype[Q]=function(){var de=[this._wrapped];return E.apply(de,arguments),wn(this,oe.apply(me,de))}}),me}Wr(["pop","push","reverse","shift","sort","splice","unshift"],function(R){var Q=g[R];me.prototype[R]=function(){var oe=this._wrapped;return null!=oe&&(Q.apply(oe,arguments),"shift"!==R&&"splice"!==R||0!==oe.length||delete oe[0]),wn(this,oe)}}),Wr(["concat","join","slice"],function(R){var Q=g[R];me.prototype[R]=function(){var oe=this._wrapped;return null!=oe&&(oe=Q.apply(oe,arguments)),wn(this,oe)}});var Ao=Si({__proto__:null,VERSION:W,restArguments:ee,isObject:ge,isNull:function(R){return null===R},isUndefined:Te,isBoolean:Ne,isElement:function(R){return!(!R||1!==R.nodeType)},isString:Ve,isNumber:Qe,isDate:Xe,isRegExp:et,isError:nt,isSymbol:ut,isArrayBuffer:bt,isDataView:gn,isArray:ar,isFunction:Et,isArguments:Ce,isFinite:function(R){return!ut(R)&&i(R)&&!isNaN(parseFloat(R))},isNaN:Ze,isTypedArray:Yt,isEmpty:function(R){if(null==R)return!0;var Q=jt(R);return"number"==typeof Q&&(ar(R)||Ve(R)||Ce(R))?0===Q:0===jt(G(R))},isMatch:re,isEqual:function(R,Q){return ct(R,Q)},isMap:Gn,isWeakMap:jn,isSet:Kn,isWeakSet:mr,keys:G,allKeys:It,values:Gr,pairs:function(R){for(var Q=G(R),oe=Q.length,de=Array(oe),Ie=0;Ie<oe;Ie++)de[Ie]=[Q[Ie],R[Q[Ie]]];return de},invert:sr,functions:nr,methods:nr,extend:Na,extendOwn:eo,assign:eo,defaults:Go,create:function(R,Q){var oe=Zr(R);return Q&&eo(oe,Q),oe},clone:function(R){return ge(R)?ar(R)?R.slice():Na({},R):R},tap:function(R,Q){return Q(R),R},get:Co,has:function(R,Q){for(var oe=(Q=_o(Q)).length,de=0;de<oe;de++){var Ie=Q[de];if(!Cn(R,Ie))return!1;R=R[Ie]}return!!oe},mapObject:function(R,Q,oe){Q=Dn(Q,oe);for(var de=G(R),Ie=de.length,we={},l=0;l<Ie;l++){var d=de[l];we[d]=Q(R[d],d,R)}return we},identity:to,constant:lt,noop:hi,toPath:sn,property:ca,propertyOf:function(R){return null==R?hi:function(Q){return Co(R,Q)}},matcher:zt,matches:zt,times:function(R,Q,oe){var de=Array(Math.max(0,R));Q=Mi(Q,oe,1);for(var Ie=0;Ie<R;Ie++)de[Ie]=Q(Ie);return de},random:no,now:Fn,escape:ro,unescape:Ra,templateSettings:fa,template:function(R,Q,oe){!Q&&oe&&(Q=oe),Q=Go({},Q,me.templateSettings);var de=RegExp([(Q.escape||pi).source,(Q.interpolate||pi).source,(Q.evaluate||pi).source].join("|")+"|$","g"),Ie=0,we="__p+='";R.replace(de,function(w,N,F,Y,ue){return we+=R.slice(Ie,ue).replace(Wt,To),Ie=ue+w.length,N?we+="'+\n((__t=("+N+"))==null?'':_.escape(__t))+\n'":F?we+="'+\n((__t=("+F+"))==null?'':__t)+\n'":Y&&(we+="';\n"+Y+"\n__p+='"),w}),we+="';\n";var l,d=Q.variable;if(d){if(!$o.test(d))throw new Error("variable is not a bare identifier: "+d)}else we="with(obj||{}){\n"+we+"}\n",d="obj";we="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+we+"return __p;\n";try{l=new Function(d,"_",we)}catch(w){throw w.source=we,w}var x=function(w){return l.call(this,w,me)};return x.source="function("+d+"){\n"+we+"}",x},result:function(R,Q,oe){var de=(Q=_o(Q)).length;if(!de)return Et(oe)?oe.call(R):oe;for(var Ie=0;Ie<de;Ie++){var we=null==R?void 0:R[Q[Ie]];void 0===we&&(we=oe,Ie=de),R=Et(we)?we.call(R):we}return R},uniqueId:function(R){var Q=++ha+"";return R?R+Q:Q},chain:function(R){var Q=me(R);return Q._chain=!0,Q},iteratee:wo,partial:ki,bind:Li,bindAll:Da,memoize:function(R,Q){var oe=function(de){var Ie=oe.cache,we=""+(Q?Q.apply(this,arguments):de);return Cn(Ie,we)||(Ie[we]=R.apply(this,arguments)),Ie[we]};return oe.cache={},oe},delay:io,defer:ve,throttle:function(R,Q,oe){var de,Ie,we,l,d=0;oe||(oe={});var x=function(){d=!1===oe.leading?0:Fn(),de=null,l=R.apply(Ie,we),de||(Ie=we=null)},w=function(){var N=Fn();d||!1!==oe.leading||(d=N);var F=Q-(N-d);return Ie=this,we=arguments,F<=0||F>Q?(de&&(clearTimeout(de),de=null),d=N,l=R.apply(Ie,we),de||(Ie=we=null)):de||!1===oe.trailing||(de=setTimeout(x,F)),l};return w.cancel=function(){clearTimeout(de),d=0,de=Ie=we=null},w},debounce:function(R,Q,oe){var de,Ie,we,l,d,x=function(){var N=Fn()-Ie;Q>N?de=setTimeout(x,Q-N):(de=null,oe||(l=R.apply(d,we)),de||(we=d=null))},w=ee(function(N){return d=this,we=N,Ie=Fn(),de||(de=setTimeout(x,Q),oe&&(l=R.apply(d,we))),l});return w.cancel=function(){clearTimeout(de),de=we=d=null},w},wrap:function(R,Q){return ki(Q,R)},negate:Wn,compose:function(){var R=arguments,Q=R.length-1;return function(){for(var oe=Q,de=R[Q].apply(this,arguments);oe--;)de=R[oe].call(this,de);return de}},after:function(R,Q){return function(){if(--R<1)return Q.apply(this,arguments)}},before:vi,once:oo,findKey:ft,findIndex:Ni,findLastIndex:Ri,sortedIndex:ao,indexOf:Fa,lastIndexOf:pa,find:pr,detect:pr,findWhere:function(R,Q){return pr(R,zt(Q))},each:Wr,forEach:Wr,map:yr,collect:yr,reduce:Di,foldl:Di,inject:Di,reduceRight:qr,foldr:qr,filter:rt,select:rt,reject:function(R,Q,oe){return rt(R,Wn(Dn(Q)),oe)},every:Eo,all:Eo,some:Po,any:Po,contains:Mr,includes:Mr,include:Mr,invoke:Ci,pluck:ln,where:function(R,Q){return rt(R,zt(Q))},max:Fi,min:function(R,Q,oe){var de,Ie,we=1/0,l=1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof R[0]&&null!=R)for(var d=0,x=(R=Ar(R)?R:Gr(R)).length;d<x;d++)null!=(de=R[d])&&de<we&&(we=de);else Q=Dn(Q,oe),Wr(R,function(w,N,F){((Ie=Q(w,N,F))<l||Ie===1/0&&we===1/0)&&(we=w,l=Ie)});return we},shuffle:function(R){return Io(R,1/0)},sample:Io,sortBy:function(R,Q,oe){var de=0;return Q=Dn(Q,oe),ln(yr(R,function(Ie,we,l){return{value:Ie,index:de++,criteria:Q(Ie,we,l)}}).sort(function(Ie,we){var l=Ie.criteria,d=we.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return Ie.index-we.index}),"value")},groupBy:dn,indexBy:Bi,countBy:Ct,partition:ei,toArray:Xo,size:function(R){return null==R?0:Ar(R)?R.length:G(R).length},pick:rr,omit:Va,first:Ko,head:Ko,take:Ko,initial:_r,last:function(R,Q,oe){return null==R||R.length<1?null==Q||oe?void 0:[]:null==Q||oe?R[R.length-1]:Or(R,Math.max(0,R.length-Q))},rest:Or,tail:Or,drop:Or,compact:function(R){return rt(R,Boolean)},flatten:function(R,Q){return gi(R,Q,!1)},without:Hi,uniq:ji,unique:ji,union:Ba,intersection:function(R){for(var Q=[],oe=arguments.length,de=0,Ie=jt(R);de<Ie;de++){var we=R[de];if(!Mr(Q,we)){var l;for(l=1;l<oe&&Mr(arguments[l],we);l++);l===oe&&Q.push(we)}}return Q},difference:so,unzip:Qo,transpose:Qo,zip:Xt,object:function(R,Q){for(var oe={},de=0,Ie=jt(R);de<Ie;de++)Q?oe[R[de]]=Q[de]:oe[R[de][0]]=R[de][1];return oe},range:function(R,Q,oe){null==Q&&(Q=R||0,R=0),oe||(oe=Q<R?-1:1);for(var de=Math.max(Math.ceil((Q-R)/oe),0),Ie=Array(de),we=0;we<de;we++,R+=oe)Ie[we]=R;return Ie},chunk:function(R,Q){if(null==Q||Q<1)return[];for(var oe=[],de=0,Ie=R.length;de<Ie;)oe.push(b.call(R,de,de+=Q));return oe},mixin:Si,default:me});return Ao._=Ao,Ao}()}}]);