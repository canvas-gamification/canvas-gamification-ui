(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[200],{52200:(S,j,c)=>{"use strict";c.r(j),c.d(j,{CourseModule:()=>fg});var h={};c.r(h),c.d(h,{ellipseWithEllipse:()=>Xo,ellipseWithLine:()=>Mr,exists:()=>or,lineWithLine:()=>ar,pathWithEllipse:()=>wa,pathWithLine:()=>so,pathWithPath:()=>Ta,pathWithPolygon:()=>Zo,pathWithPolyline:()=>Sa,pathWithRect:()=>Qo,polygonWithEllipse:()=>zi,polygonWithLine:()=>ni,polygonWithPolygon:()=>Mo,polygonWithPolyline:()=>Jo,polygonWithRect:()=>Ko,polylineWithEllipse:()=>ao,polylineWithLine:()=>Oi,polylineWithPolyline:()=>ki,polylineWithRect:()=>Or,rectWithEllipse:()=>Xr,rectWithLine:()=>Ao,rectWithRect:()=>Pr});var p={};c.r(p),c.d(p,{Curve:()=>Ft,Ellipse:()=>ir,Line:()=>at,Path:()=>pt,Point:()=>de,Polygon:()=>yr,Polyline:()=>bn,Rect:()=>nt,bezier:()=>Wa,ellipse:()=>Eo,intersection:()=>ea,line:()=>Vr,normalizeAngle:()=>De,point:()=>Yr,random:()=>Kt,rect:()=>Ga,scale:()=>Fe,snapToGrid:()=>tt,toDeg:()=>yt,toRad:()=>xt,types:()=>ht});var C={};c.r(C),c.d(C,{absolute:()=>ta,bottom:()=>Bf,ellipse:()=>jf,ellipseSpread:()=>Hf,fn:()=>ho,left:()=>ms,line:()=>zr,right:()=>Oa,top:()=>Us});var w={};c.r(w),c.d(w,{bottom:()=>Gf,inside:()=>Du,insideOriented:()=>$f,left:()=>Uf,manual:()=>zf,outside:()=>Jl,outsideOriented:()=>Wf,radial:()=>xs,radialOriented:()=>Fu,right:()=>wr,top:()=>Ur});var x={};c.r(x),c.d(x,{manhattan:()=>Ku,metro:()=>od,normal:()=>Ra,oneSide:()=>Zf,orthogonal:()=>Gu});var T={};c.r(T),c.d(T,{curve:()=>qa,jumpover:()=>el,normal:()=>ld,rounded:()=>tl,smooth:()=>lc});var I={};c.r(I),c.d(I,{addClass:()=>vc,mask:()=>_i,opacity:()=>sa,stroke:()=>al});var P={};c.r(P),c.d(P,{connectionClosest:()=>xc,connectionLength:()=>mc,connectionPerpendicular:()=>ua,connectionRatio:()=>ou,resolveRef:()=>Da});var N={};c.r(N),c.d(N,{anchor:()=>Cc,bbox:()=>wc,boundary:()=>go,rectangle:()=>ai});var F={};c.r(F),c.d(F,{bottom:()=>yd,bottomLeft:()=>Pc,bottomRight:()=>Ic,center:()=>Sc,left:()=>Ec,midSide:()=>Ac,modelCenter:()=>du,perpendicular:()=>fu,right:()=>ns,top:()=>Tc,topLeft:()=>Ps,topRight:()=>xd});var M=c(69808),G=c(32205),Q=c(6741),oe=c(53696),o=c(5e3),ne=c(23146),fe=c(83936),ce=c(25635),J=c(93075),he=c(9419),Ce=c(66206),Ie=c(99848);let b=(()=>{class t{transform(e,n){return e.is_teacher||n.is_registered}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:t,pure:!0}),t})();function ke(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-island",7),o.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("course",e)("hasViewPermission",o.\u0275\u0275pipeBind2(2,2,n.user,e))}}function Ge(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,ke,3,5,"ng-container",6),o.\u0275\u0275pipe(2,"tuiFilter"),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind3(2,1,e.allCourses,e.matchCourseName,e.courseNameSearch))}}function Ue(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-island",8),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("skeleton",!0))}const Xe=function(){return[0,0,0,0,0,0]};function Je(t,r){1&t&&o.\u0275\u0275template(0,Ue,2,1,"ng-container",6),2&t&&o.\u0275\u0275property("ngForOf",o.\u0275\u0275pureFunction0(1,Xe))}let ot=(()=>{class t{constructor(e,n,i){this.authenticationService=e,this.route=n,this.courseService=i,this.STATUS=oe.Q,this.courseNameSearch="",this.matchCourseName=(a,s)=>""===s||a.name.toLowerCase().includes(s.toLowerCase()),this.authenticationService.currentUser.subscribe(a=>this.user=a)}ngOnInit(){this.courseService.getCourses().subscribe(e=>{this.allCourses=e})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ne.$),o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(fe.N))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),o.\u0275\u0275text(2,"Course List"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"tui-input",2),o.\u0275\u0275listener("ngModelChange",function(a){return n.courseNameSearch=a}),o.\u0275\u0275text(4," Search Courses "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",3),o.\u0275\u0275template(6,Ge,3,5,"ng-container",4),o.\u0275\u0275template(7,Je,1,2,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()()),2&e){const i=o.\u0275\u0275reference(8);o.\u0275\u0275advance(3),o.\u0275\u0275property("ngModel",n.courseNameSearch)("tuiTextfieldCleaner",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.allCourses)("ngIfElse",i)}},directives:[ce.K3,ce.wU,J.NgControlStatus,J.NgModel,he.be,M.O5,M.sg,Ce.V],pipes:[Ie.S,b],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})();class vt{static createForm(){return(new J.FormBuilder).group({code:new J.FormControl("",[J.Validators.required])})}static extractData(r){return r.value}}var Nt=c(4024),Ut=c(769),_t=c(46693),On=c(96063),gr=c(8871);const Nr=["stepper"];function nr(t,r){1&t&&o.\u0275\u0275element(0,"div",5)}function Wn(t,r){1&t&&o.\u0275\u0275element(0,"div",6)}const vr=function(t){return["/course",t]};function Nn(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",7),o.\u0275\u0275text(2," You are already registered in this course "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8)(4,"a",9),o.\u0275\u0275text(5," Open Course "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(1,vr,e.courseId))}}function Re(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",10),o.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd())}function ze(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",11),o.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"form",12),o.\u0275\u0275listener("ngSubmit",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).onSubmit()}),o.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),o.\u0275\u0275text(6," Enter verification code\xa0"),o.\u0275\u0275element(7,"span",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(8,"tui-field-error",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",8)(10,"button",17),o.\u0275\u0275text(11," Register "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}if(2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("formGroup",e.form),o.\u0275\u0275advance(2),o.\u0275\u0275property("tuiTextfieldCleaner",!0),o.\u0275\u0275advance(5),o.\u0275\u0275property("showLoader",e.loadingContent)}}function Ke(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"h1",2),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,nr,1,0,"div",3),o.\u0275\u0275template(4,Wn,1,0,"div",4),o.\u0275\u0275template(5,Nn,6,3,"ng-container",1),o.\u0275\u0275template(6,Re,3,0,"ng-container",1),o.\u0275\u0275template(7,ze,12,3,"ng-container",1),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",e.showSkeletons)("tui-skeleton_text",e.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Registration for ",e.courseName," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.registered&&!e.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.blocked&&!e.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.registered&&!e.blocked&&!e.showSkeletons)}}function st(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",18),o.\u0275\u0275element(2,"tui-marker-icon",19),o.\u0275\u0275elementStart(3,"h1",20),o.\u0275\u0275text(4," Unable to find the course for registration. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"p",21),o.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd())}let Ct=(()=>{class t{constructor(e,n,i,a,s){this.route=e,this.router=n,this.courseService=i,this.changeDetector=a,this.notificationsService=s,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=vt.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(e=>{this.courseName=e.name,this.showSkeletons=!1,this.registered=e.course_reg.is_verified,this.blocked=e.course_reg.is_blocked,e.registration_mode===oe.J.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const e=vt.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,e).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(Q.F0),o.\u0275\u0275directiveInject(fe.N),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Nt.$F))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-register"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Nr,5),2&e){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(n.stepper=i.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"section",0),o.\u0275\u0275template(1,Ke,8,10,"ng-container",1),o.\u0275\u0275template(2,st,7,0,"ng-container",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.courseNotFound),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.courseNotFound))},directives:[M.O5,Ut.Ls,_t.v0,Q.yS,J.\u0275NgNoValidate,J.NgControlStatusGroup,J.FormGroupDirective,ce.K3,ce.wU,J.NgControlStatus,J.FormControlName,he.be,On.y,gr.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),t})();var zt=c(37080),mt=c(58259),Bn=c(59695),fi=c.n(Bn),Gt=c(85510),Dt=c.n(Gt),O=c(17489);const{round:H,floor:q,PI:pe}=Math,Fe={linear:function(t,r,e){return(e-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]||0}},De=function(t){return t%360+(t<0?360:0)},tt=function(t,r){return r*H(t/r)},yt=function(t){return 180*t/pe%360},xt=function(t,r){return(t=(r=r||!1)?t:t%360)*pe/180},Kt=function(t,r){if(void 0===r)r=void 0===t?1:t,t=0;else if(r<t){const e=t;t=r,r=e}return q(Math.random()*(r-t+1)+t)},{cos:on,sin:Wt,atan2:Hn}=Math,kn=function(t,r){var e=xt(t.y),n=xt(r.y),s=xt(r.x-t.x),l=Wt(s)*on(n),f=on(e)*Wt(n)-Wt(e)*on(n)*on(s),v=yt(Hn(l,f))-22.5;return v<0&&(v+=360),["NE","E","SE","S","SW","W","NW","N"][v=parseInt(v/45)]},Dr=function(t,r){var e=t.x,n=t.y;return(e-=r.x)*e+(n-=r.y)*n},xn=function(t,r){return Math.sqrt(Dr(t,r))},ht={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Tn,cos:Dn,sin:rr,sqrt:Fr,min:Jn,max:$n,atan2:wo,round:ma,pow:ro,PI:So}=Math,de=function(t,r){if(!(this instanceof de))return new de(t,r);if("string"==typeof t){var e=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(e[0]),r=parseFloat(e[1])}else Object(t)===t&&(r=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===r?0:r};de.fromPolar=function(t,r,e){e=new de(e);var n=Tn(t*Dn(r)),i=Tn(t*rr(r)),a=De(yt(r));return a<90?i=-i:a<180?(n=-n,i=-i):a<270&&(n=-n),new de(e.x+n,e.y+i)},de.random=function(t,r,e,n){return new de(Kt(t,r),Kt(e,n))},de.prototype={type:ht.Point,chooseClosest:function(t){var r=t.length;if(1===r)return new de(t[0]);for(var e=null,n=1/0,i=0;i<r;i++){var a=new de(t[i]),s=this.squaredDistance(a);s<n&&(e=a,n=s)}return e},adhereToRect:function(t){return t.containsPoint(this)||(this.x=Jn($n(this.x,t.x),t.x+t.width),this.y=Jn($n(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,r){var e=this.equals(t)||this.equals(r)?NaN:this.theta(r)-this.theta(t);return e<0&&(e+=360),e},bearing:function(t){return kn(this,t)},changeInAngle:function(t,r,e){return this.clone().offset(-t,-r).theta(e)-this.theta(e)},clone:function(){return new de(this)},cross:function(t,r){return t&&r?(r.x-this.x)*(t.y-this.y)-(r.y-this.y)*(t.x-this.x):NaN},difference:function(t,r){return Object(t)===t&&(r=t.y,t=t.x),new de(this.x-(t||0),this.y-(r||0))},distance:function(t){return xn(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,r){return new de((1-r)*this.x+r*t.x,(1-r)*this.y+r*t.y)},magnitude:function(){return Fr(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Tn(t.x-this.x)+Tn(t.y-this.y)},move:function(t,r){var e=xt(new de(t).theta(this));return this.offset(Dn(e)*r,-rr(e)*r)},normalize:function(t){var r=(t||1)/this.magnitude();return this.scale(r,r)},offset:function(t,r){return Object(t)===t&&(r=t.y,t=t.x),this.x+=t||0,this.y+=r||0,this},reflection:function(t){return new de(t).move(this,this.distance(t))},rotate:function(t,r){if(0===r)return this;t=t||new de(0,0),r=xt(De(-r));var e=Dn(r),n=rr(r),a=n*(this.x-t.x)+e*(this.y-t.y)+t.y;return this.x=e*(this.x-t.x)-n*(this.y-t.y)+t.x,this.y=a,this},round:function(t){let r=1;if(t)switch(t){case 1:r=10;break;case 2:r=100;break;case 3:r=1e3;break;default:r=ro(10,t)}return this.x=ma(this.x*r)/r,this.y=ma(this.y*r)/r,this},scale:function(t,r,e){return e=e&&new de(e)||new de(0,0),this.x=e.x+t*(this.x-e.x),this.y=e.y+r*(this.y-e.y),this},snapToGrid:function(t,r){return this.x=tt(this.x,t),this.y=tt(this.y,r||t),this},squaredDistance:function(t){return Dr(this,t)},theta:function(t){t=new de(t);var n=wo(-(t.y-this.y),t.x-this.x);return n<0&&(n=2*So+n),180*n/So},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new de(t)||new de(0,0);var r=this.x,e=this.y;return this.x=Fr((r-t.x)*(r-t.x)+(e-t.y)*(e-t.y)),this.y=xt(t.theta(new de(r,e))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,r){return Object(t)===t&&(r=t.y,t=t.x),this.x=t||0,this.y=r||0,this},vectorAngle:function(t){return new de(0,0).angleBetween(this,t)}},de.prototype.translate=de.prototype.offset;const Yr=de,{max:Vi,min:To}=Math,at=function(t,r){return this instanceof at?t instanceof at?new at(t.start,t.end):(this.start=new de(t),void(this.end=new de(r))):new at(t,r)};at.prototype={type:ht.Line,angle:function(){var t=new de(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=To(this.start.x,this.end.x),r=To(this.start.y,this.end.y),e=Vi(this.start.x,this.end.x),n=Vi(this.start.y,this.end.y);return new nt(t,r,e-t,n-r)},bearing:function(){return kn(this.start,this.end)},clone:function(){return new at(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var r=this.vector().dot(new at(this.start,t).vector()),e=To(1,Vi(0,r/this.squaredLength()));return e!=e?0:e},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var r=this.start,e=this.end;if(0!==r.cross(t,e))return!1;var n=this.length();return!(new at(r,t).length()>n||new at(t,e).length()>n)},divideAt:function(t){var r=this.pointAt(t);return[new at(this.start,r),new at(r,this.end)]},divideAtLength:function(t){var r=this.pointAtLength(t);return[new at(this.start,r),new at(r,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,r){if(t&&t.intersectionWithLine){var e=t.intersectionWithLine(this,r);return e&&t instanceof at&&(e=e[0]),e}return null},intersectionWithLine:function(t){var r=new de(this.end.x-this.start.x,this.end.y-this.start.y),e=new de(t.end.x-t.start.x,t.end.y-t.start.y),n=r.x*e.y-r.y*e.x,i=new de(t.start.x-this.start.x,t.start.y-this.start.y),a=i.x*e.y-i.y*e.x,s=i.x*r.y-i.y*r.x;if(0===n||a*n<0||s*n<0)return null;if(n>0){if(a>n||s>n)return null}else if(a<n||s<n)return null;return[new de(this.start.x+a*r.x/n,this.start.y+a*r.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return xn(this.start,this.end)},midpoint:function(){return new de((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const r=this.clone();if(!this.isDifferentiable())return r;const{start:e,end:n}=r,i=e.clone().rotate(n,270),a=n.clone().rotate(e,90);return e.move(a,t),n.move(i,t),r},pointAt:function(t){var r=this.start,e=this.end;return t<=0?r.clone():t>=1?e.clone():r.lerp(e,t)},pointAtLength:function(t){var r=this.start,e=this.end,n=!0;t<0&&(n=!1,t=-t);var i=this.length();return t>=i?n?e.clone():r.clone():this.pointAt((n?t:i-t)/i)},pointOffset:function(t){t=new de(t);var r=this.start,e=this.end;return((e.x-r.x)*(t.y-r.y)-(e.y-r.y)*(t.x-r.x))/this.length()},rotate:function(t,r){return this.start.rotate(t,r),this.end.rotate(t,r),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,r,e){return this.start.scale(t,r,e),this.end.scale(t,r,e),this},setLength:function(t){var r=this.length();if(!r)return this;var e=t/r;return this.scale(e,e,this.start)},squaredLength:function(){return Dr(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var r=this.start,e=this.end,n=this.pointAt(t),i=new at(r,e);return i.translate(n.x-r.x,n.y-r.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var r=this.start,e=this.end,n=this.pointAtLength(t),i=new at(r,e);return i.translate(n.x-r.x,n.y-r.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,r){return this.start.translate(t,r),this.end.translate(t,r),this},vector:function(){return new de(this.end.x-this.start.x,this.end.y-this.start.y)}},at.prototype.intersection=at.prototype.intersect;const Vr=at,{sqrt:io,round:oo,pow:Bi}=Math,ir=function(t,r,e){return this instanceof ir?t instanceof ir?new ir(new de(t.x,t.y),t.a,t.b):(t=new de(t),this.x=t.x,this.y=t.y,this.a=r,void(this.b=e)):new ir(t,r,e)};ir.fromRect=function(t){return t=new nt(t),new ir(t.center(),t.width/2,t.height/2)},ir.prototype={type:ht.Ellipse,bbox:function(){return new nt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new de(this.x,this.y)},clone:function(){return new ir(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.a+=2*t,this.b+=2*r,this},intersectionWithLine:function(t){var r=[],e=t.start,n=t.end,i=this.a,a=this.b,s=t.vector(),l=e.difference(new de(this)),f=new de(s.x/(i*i),s.y/(a*a)),g=new de(l.x/(i*i),l.y/(a*a)),m=s.dot(f),v=s.dot(g),B=v*v-m*(l.dot(g)-1);if(B<0)return null;if(B>0){var Y=io(B),te=(-v-Y)/m,ue=(-v+Y)/m;if((te<0||1<te)&&(ue<0||1<ue))return null;0<=te&&te<=1&&r.push(e.lerp(n,te)),0<=ue&&ue<=1&&r.push(e.lerp(n,ue))}else{var xe=-v/m;if(!(0<=xe&&xe<=1))return null;r.push(e.lerp(n,xe))}return r},intersectionWithLineFromCenterToPoint:function(t,r){t=new de(t),r&&t.rotate(new de(this.x,this.y),r);var i,e=t.x-this.x,n=t.y-this.y;if(0===e)return i=this.bbox().pointNearestToPoint(t),r?i.rotate(new de(this.x,this.y),-r):i;var a=n/e,g=io(1/(1/(this.a*this.a)+a*a/(this.b*this.b)));return i=new de(this.x+(g=e<0?-g:g),this.y+a*g),r?i.rotate(new de(this.x,this.y),-r):i},normalizedDistance:function(t){var r=t.x,e=t.y,n=this.a,i=this.b,a=this.x,s=this.y;return(r-a)*(r-a)/(n*n)+(e-s)*(e-s)/(i*i)},round:function(t){let r=1;if(t)switch(t){case 1:r=10;break;case 2:r=100;break;case 3:r=1e3;break;default:r=Bi(10,t)}return this.x=oo(this.x*r)/r,this.y=oo(this.y*r)/r,this.a=oo(this.a*r)/r,this.b=oo(this.b*r)/r,this},tangentTheta:function(t){var v,A,e=t.x,n=t.y,i=this.a,a=this.b,s=this.bbox().center(),l=s.x,f=s.y;return e>s.x+i/2||e<s.x-i/2?A=i*i/(e-l)-i*i*(n-f)*((v=e>s.x?n-30:n+30)-f)/(a*a*(e-l))+l:v=a*a/(n-f)-a*a*(e-l)*((A=n>s.y?e+30:e-30)-l)/(i*i*(n-f))+f,new de(A,v).theta(t)},toString:function(){return new de(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Eo=ir,{abs:mr,cos:ya,sin:xa,min:Tr,max:$o,round:Hi,pow:Yo}=Math,nt=function(t,r,e,n){if(!(this instanceof nt))return new nt(t,r,e,n);Object(t)===t&&(r=t.y,e=t.width,n=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===r?0:r,this.width=void 0===e?0:e,this.height=void 0===n?0:n};nt.fromEllipse=function(t){return t=new ir(t),new nt(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},nt.fromPointUnion=function(...t){if(0===t.length)return null;const r=new de;let e,n,i,a;e=n=1/0,i=a=-1/0;for(let s=0;s<t.length;s++){r.update(t[s]);const l=r.x,f=r.y;l<e&&(e=l),l>i&&(i=l),f<n&&(n=f),f>a&&(a=f)}return new nt(e,n,i-e,a-n)},nt.fromRectUnion=function(...t){if(0===t.length)return null;const r=new nt;let e,n,i,a;e=n=1/0,i=a=-1/0;for(let s=0;s<t.length;s++){r.update(t[s]);const l=r.x,f=r.y,g=l+r.width,m=f+r.height;l<e&&(e=l),g>i&&(i=g),f<n&&(n=f),m>a&&(a=m)}return new nt(e,n,i-e,a-n)},nt.prototype={type:ht.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:r,height:e}=this,n=xt(t),i=mr(xa(n)),a=mr(ya(n)),s=r*a+e*i,l=r*i+e*a;return this.x+=(r-s)/2,this.y+=(e-l)/2,this.width=s,this.height=l,this},bottomLeft:function(){return new de(this.x,this.y+this.height)},bottomLine:function(){return new at(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new de(this.x+this.width/2,this.y+this.height)},center:function(){return new de(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new nt(this)},containsPoint:function(t){return(t=new de(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var r=new nt(this).normalize(),e=new nt(t).normalize(),n=r.width,i=r.height,a=e.width,s=e.height;if(!(n&&i&&a&&s))return!1;var l=r.x,f=r.y,g=e.x,m=e.y;return a+=g,n+=l,s+=m,i+=f,l<=g&&a<=n&&f<=m&&s<=i},corner:function(){return new de(this.x+this.width,this.y+this.height)},equals:function(t){var r=new nt(this).normalize(),e=new nt(t).normalize();return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height},inflate:function(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.x-=t,this.y-=r,this.width+=2*t,this.height+=2*r,this},intersect:function(t){var r=this.origin(),e=this.corner(),n=t.origin(),i=t.corner();if(i.x<=r.x||i.y<=r.y||n.x>=e.x||n.y>=e.y)return null;var a=$o(r.x,n.x),s=$o(r.y,n.y);return new nt(a,s,Tr(e.x,i.x)-a,Tr(e.y,i.y)-s)},intersectionWithLine:function(t){var a,s,r=this,e=[r.topLine(),r.rightLine(),r.bottomLine(),r.leftLine()],n=[],i=[],l=e.length;for(s=0;s<l;s++)null!==(a=t.intersect(e[s]))&&i.indexOf(a.toString())<0&&(n.push(a),i.push(a.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(t,r){t=new de(t);var n,e=new de(this.x+this.width/2,this.y+this.height/2);r&&t.rotate(e,r);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],a=new at(e,t),s=i.length-1;s>=0;--s){var l=i[s].intersection(a);if(null!==l){n=l;break}}return n&&r&&n.rotate(e,-r),n},leftLine:function(){return new at(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new de(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,r){t=new nt(t),r||(r=t.center());var e,n,i,a,s,l,f,g,m=r.x,v=r.y;e=n=i=a=s=l=f=g=1/0;var A=t.topLeft();A.x<m&&(e=(this.x-m)/(A.x-m)),A.y<v&&(s=(this.y-v)/(A.y-v));var B=t.bottomRight();B.x>m&&(n=(this.x+this.width-m)/(B.x-m)),B.y>v&&(l=(this.y+this.height-v)/(B.y-v));var Y=t.topRight();Y.x>m&&(i=(this.x+this.width-m)/(Y.x-m)),Y.y<v&&(f=(this.y-v)/(Y.y-v));var te=t.bottomLeft();return te.x<m&&(a=(this.x-m)/(te.x-m)),te.y>v&&(g=(this.y+this.height-v)/(te.y-v)),{sx:Tr(e,n,i,a),sy:Tr(s,l,f,g)}},maxRectUniformScaleToFit:function(t,r){var e=this.maxRectScaleToFit(t,r);return Tr(e.sx,e.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,r=this.y,e=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,e=-this.width),this.height<0&&(r=this.y+this.height,n=-this.height),this.x=t,this.y=r,this.width=e,this.height=n,this},offset:function(t,r){return de.prototype.offset.call(this,t,r)},origin:function(){return new de(this.x,this.y)},pointNearestToPoint:function(t){if(t=new de(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new de(this.x+this.width,t.y);case"left":return new de(this.x,t.y);case"bottom":return new de(t.x,this.y+this.height);case"top":return new de(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new at(this.topRight(),this.bottomRight())},rightMiddle:function(){return new de(this.x+this.width,this.y+this.height/2)},round:function(t){let r=1;if(t)switch(t){case 1:r=10;break;case 2:r=100;break;case 3:r=1e3;break;default:r=Yo(10,t)}return this.x=Hi(this.x*r)/r,this.y=Hi(this.y*r)/r,this.width=Hi(this.width*r)/r,this.height=Hi(this.height*r)/r,this},scale:function(t,r,e){return e=this.origin().scale(t,r,e),this.x=e.x,this.y=e.y,this.width*=t,this.height*=r,this},sideNearestToPoint:function(t){t=new de(t);var e=this.x+this.width-t.x,n=t.y-this.y,a=t.x-this.x,s="left";return e<a&&(a=e,s="right"),n<a&&(a=n,s="top"),this.y+this.height-t.y<a&&(s="bottom"),s},snapToGrid:function(t,r){var e=this.origin().snapToGrid(t,r),n=this.corner().snapToGrid(t,r);return this.x=e.x,this.y=e.y,this.width=n.x-e.x,this.height=n.y-e.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new at(this.topLeft(),this.topRight())},topMiddle:function(){return new de(this.x+this.width/2,this.y)},topRight:function(){return new de(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return nt.fromRectUnion(this,t)},update:function(t,r,e,n){return Object(t)===t&&(r=t.y,e=t.width,n=t.height,t=t.x),this.x=t||0,this.y=r||0,this.width=e||0,this.height=n||0,this}},nt.prototype.bottomRight=nt.prototype.corner,nt.prototype.topLeft=nt.prototype.origin,nt.prototype.translate=nt.prototype.offset;const Ga=nt;function Si(t){if(""===(t=t.trim()))return[];const r=[],e=t.split(/\s*,\s*|\s+/),n=e.length;for(let i=0;i<n;i+=2)r.push({x:+e[i],y:+e[i+1]});return r}function ba(t){const r=t.length;if(0===r)return[];const e=[];for(let n=0;n<r;n++){const i=t[n].clone();e.push(i)}return e}function _a(t){const{abs:r}=Math;var e,n,a,i=t.length;if(0===i)return[];for(e=0;e<i;e++)(void 0===a||t[e].y<a.y||t[e].y===a.y&&t[e].x>a.x)&&(a=t[e]);var s=[];for(e=0;e<i;e++){var l=a.theta(t[e]);0===l&&(l=360),s.push([t[e],e,l])}s.sort(function(et,ut){var lt=et[2]-ut[2];return 0===lt&&(lt=ut[1]-et[1]),lt}),s.length>2&&s.unshift(s[s.length-1]);for(var A,B,Y,te,ue,xe,m={},v=[];0!==s.length;)if(B=(A=s.pop())[0],!m.hasOwnProperty(A[0]+"@@"+A[1]))for(var ge=!1;!ge;)if(v.length<2)v.push(A),ge=!0;else{te=(Y=v.pop())[0];var E=(xe=(ue=v.pop())[0]).cross(te,B);if(E<0)v.push(ue),v.push(Y),v.push(A),ge=!0;else if(0===E){var z=te.angleBetween(xe,B);r(z-180)<1e-10||te.equals(B)||xe.equals(te)?(m[Y[0]+"@@"+Y[1]]=te,v.push(ue)):r((z+1)%360-1)<1e-10&&(v.push(ue),s.push(Y))}else m[Y[0]+"@@"+Y[1]]=te,v.push(ue)}v.length>2&&v.pop();var Z,ae=-1;for(n=v.length,e=0;e<n;e++){var ve=v[e][1];(void 0===Z||ve<Z)&&(Z=ve,ae=e)}var we=[];if(ae>0){var Me=v.slice(ae),Ye=v.slice(0,ae);we=Me.concat(Ye)}else we=v;var We=[];for(n=we.length,e=0;e<n;e++)We.push(we[e][0]);return We}const bn=function(t){return this instanceof bn?"string"==typeof t?new bn.parse(t):void(this.points=Array.isArray(t)?t.map(de):[]):new bn(t)};bn.parse=function(t){return new bn(Si(t))},bn.fromRect=function(t){return new bn([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},bn.prototype={type:ht.Polyline,bbox:function(){var t=1/0,r=-1/0,e=1/0,n=-1/0,i=this.points,a=i.length;if(0===a)return null;for(var s=0;s<a;s++){var l=i[s],f=l.x,g=l.y;f<t&&(t=f),f>r&&(r=f),g<e&&(e=g),g>n&&(n=g)}return new nt(t,e,r-t,n-e)},clone:function(){return new bn(ba(this.points))},closestPoint:function(t){var r=this.closestPointLength(t);return this.pointAtLength(r)},closestPointLength:function(t){var r=this.lengthPoints(),e=r.length;if(0===e||1===e)return 0;for(var n,i=1/0,a=0,s=e-1,l=0;l<s;l++){var f=new at(r[l],r[l+1]),g=f.length(),m=f.closestPointNormalizedLength(t),A=f.pointAt(m).squaredDistance(t);A<i&&(i=A,n=a+m*g),a+=g}return n},closestPointNormalizedLength:function(t){var r=this.closestPointLength(t);if(0===r)return 0;var e=this.length();return 0===e?0:r/e},closestPointTangent:function(t){var r=this.closestPointLength(t);return this.tangentAtLength(r)},containsPoint:function(t){var r=this.points,e=r.length;if(0===e)return!1;for(var n=t.x,i=t.y,a=e-1,s=0,l=0,f=new at,g=new at,m=new de;s<e;s++){var v=r[a],A=r[s];if(t.equals(v)||(f.start=v,f.end=A,f.containsPoint(t)))return!0;if(i<=v.y&&i>A.y||i>v.y&&i<=A.y){var B=v.x-n>A.x-n?v.x-n:A.x-n;B>=0&&(m.x=n+B,m.y=i,g.start=t,g.end=m,f.intersect(g)&&l++)}a=s}return l%2==1},close:function(){const{start:t,end:r,points:e}=this;return t&&r&&!t.equals(r)&&e.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new bn(_a(this.points))},equals:function(t){if(!t)return!1;var r=this.points,n=r.length;if(t.points.length!==n)return!1;for(var i=0;i<n;i++)if(!r[i].equals(t.points[i]))return!1;return!0},intersectionWithLine:function(t){for(var r=new at(t),e=[],n=this.lengthPoints(),i=new at,a=0,s=n.length-1;a<s;a++){i.start=n[a],i.end=n[a+1];var l=r.intersectionWithLine(i);l&&e.push(l[0])}return e.length>0?e:null},isDifferentiable:function(){var t=this.points,r=t.length;if(0===r)return!1;for(var e=new at,n=r-1,i=0;i<n;i++)if(e.start=t[i],e.end=t[i+1],e.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),r=t.length;if(0===r)return 0;for(var e=0,n=r-1,i=0;i<n;i++)e+=t[i].distance(t[i+1]);return e},pointAt:function(t){var r=this.lengthPoints(),e=r.length;if(0===e)return null;if(1===e||t<=0)return r[0].clone();if(t>=1)return r[e-1].clone();var n=this.length();return this.pointAtLength(n*t)},pointAtLength:function(t){var r=this.lengthPoints(),e=r.length;if(0===e)return null;if(1===e)return r[0].clone();var n=!0;t<0&&(n=!1,t=-t);for(var i=0,a=e-1,s=0;s<a;s++){var l=n?s:a-1-s,f=r[l],g=r[l+1],m=new at(f,g),v=f.distance(g);if(t<=i+v)return m.pointAtLength((n?1:-1)*(t-i));i+=v}return(n?r[e-1]:r[0]).clone()},round:function(t){for(var r=this.points,e=r.length,n=0;n<e;n++)r[n].round(t);return this},scale:function(t,r,e){for(var n=this.points,i=n.length,a=0;a<i;a++)n[a].scale(t,r,e);return this},simplify:function(t={}){const r=this.points;if(r.length<3)return this;const e=t.threshold||0;let n=0;for(;r[n+2];){const a=n+1,f=r[a];new at(r[n],r[n+2]).closestPoint(f).distance(f)<=e?r.splice(a,1):n+=1}return this},tangentAt:function(t){var e=this.lengthPoints().length;if(0===e||1===e)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length();return this.tangentAtLength(n*t)},tangentAtLength:function(t){var r=this.lengthPoints(),e=r.length;if(0===e||1===e)return null;var n=!0;t<0&&(n=!1,t=-t);for(var i,a=0,s=e-1,l=0;l<s;l++){var f=n?l:s-1-l,g=r[f],m=r[f+1],v=new at(g,m),A=g.distance(m);if(v.isDifferentiable()){if(t<=a+A)return v.tangentAtLength((n?1:-1)*(t-a));i=v}a+=A}return i?i.tangentAt(n?1:0):null},toString:function(){return this.points+""},translate:function(t,r){for(var e=this.points,n=e.length,i=0;i<n;i++)e[i].translate(t,r);return this},serialize:function(){var t=this.points,r=t.length;if(0===r)return"";for(var e="",n=0;n<r;n++){var i=t[n];e+=i.x+","+i.y+" "}return e.trim()}},Object.defineProperty(bn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(bn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var r=this.points.length;return 0===r?null:this.points[r-1]}});const{abs:Po,sqrt:ps,min:Ti,max:ji,pow:Ei}=Math,Ft=function(t,r,e,n){return this instanceof Ft?t instanceof Ft?new Ft(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new de(t),this.controlPoint1=new de(r),this.controlPoint2=new de(e),void(this.end=new de(n))):new Ft(t,r,e,n)};function Br(t){var r,e,n=[];for(e=arguments.length,r=1;r<e;r++)n.push(arguments[r]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(e=n.length,r=0;r<e;r++){var s,l,a=n[r];for(l in a)a.hasOwnProperty(l)&&(delete i[l],s=Object.getOwnPropertyDescriptor(a,l),Object.defineProperty(i,l,s))}return i}Ft.throughPoints=function(){function r(e){var n=e.length,i=[],a=[],s=2;i[0]=e[0]/s;for(var l=1;l<n;l++)a[l]=1/s,i[l]=(e[l]-i[l-1])/(s=(l<n-1?4:3.5)-a[l]);for(l=1;l<n;l++)i[n-l-1]-=a[n-l]*i[n-l];return i}return function(e){if(!e||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var n=function t(e){var s,n=[],i=[],a=e.length-1;if(1==a)return n[0]=new de((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),i[0]=new de(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,i];var l=[];for(s=1;s<a-1;s++)l[s]=4*e[s].x+2*e[s+1].x;l[0]=e[0].x+2*e[1].x,l[a-1]=(8*e[a-1].x+e[a].x)/2;var f=r(l);for(s=1;s<a-1;++s)l[s]=4*e[s].y+2*e[s+1].y;l[0]=e[0].y+2*e[1].y,l[a-1]=(8*e[a-1].y+e[a].y)/2;var g=r(l);for(s=0;s<a;s++)n.push(new de(f[s],g[s])),i.push(s<a-1?new de(2*e[s+1].x-f[s+1],2*e[s+1].y-g[s+1]):new de((e[a].x+f[a-1])/2,(e[a].y+g[a-1])/2));return[n,i]}(e),i=[],a=n[0].length,s=0;s<a;s++){var l=new de(n[0][s].x,n[0][s].y),f=new de(n[1][s].x,n[1][s].y);i.push(new Ft(e[s],l,f,e[s+1]))}return i}}(),Ft.prototype={type:ht.Curve,bbox:function(){for(var te,ue,xe,ge,E,D,z,Z,t=this.start,r=this.controlPoint1,e=this.controlPoint2,n=this.end,i=t.x,a=t.y,s=r.x,l=r.y,f=e.x,g=e.y,m=n.x,v=n.y,A=new Array,B=new Array,Y=[new Array,new Array],ae=0;ae<2;++ae)if(0===ae?(ue=6*i-12*s+6*f,te=-3*i+9*s-9*f+3*m,xe=3*s-3*i):(ue=6*a-12*l+6*g,te=-3*a+9*l-9*g+3*v,xe=3*l-3*a),Po(te)<1e-12){if(Po(ue)<1e-12)continue;0<(ge=-xe/ue)&&ge<1&&B.push(ge)}else Z=ps(z=ue*ue-4*xe*te),!(z<0)&&(0<(E=(-ue+Z)/(2*te))&&E<1&&B.push(E),0<(D=(-ue-Z)/(2*te))&&D<1&&B.push(D));for(var Me,Ye,We,ve=B.length,we=ve;ve--;)Y[0][ve]=Ye=(Me=1-(ge=B[ve]))*Me*Me*i+3*Me*Me*ge*s+3*Me*ge*ge*f+ge*ge*ge*m,Y[1][ve]=We=Me*Me*Me*a+3*Me*Me*ge*l+3*Me*ge*ge*g+ge*ge*ge*v,A[ve]={X:Ye,Y:We};B[we]=0,B[we+1]=1,A[we]={X:i,Y:a},A[we+1]={X:m,Y:v},Y[0][we]=i,Y[1][we]=a,Y[0][we+1]=m,Y[1][we+1]=v,B.length=we+2,Y[0].length=we+2,Y[1].length=we+2,A.length=we+2;var et=Ti.apply(null,Y[0]),ut=Ti.apply(null,Y[1]),lt=ji.apply(null,Y[0]),Et=ji.apply(null,Y[1]);return new nt(et,ut,lt-et,Et-ut)},clone:function(){return new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,r){return this.pointAtT(this.closestPointT(t,r))},closestPointLength:function(t,r){var e=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i={precision:e,subdivisions:void 0===r.subdivisions?this.getSubdivisions({precision:e}):r.subdivisions};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,r){var e=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i={precision:e,subdivisions:void 0===r.subdivisions?this.getSubdivisions({precision:e}):r.subdivisions},a=this.closestPointLength(t,i);if(!a)return 0;var s=this.length(i);return 0===s?0:a/s},closestPointT:function(t,r){for(var i,a,s,l,f,g,m,e=void 0===(r=r||{}).precision?this.PRECISION:r.precision,n=void 0===r.subdivisions?this.getSubdivisions({precision:e}):r.subdivisions,v=n.length,A=v?1/v:0,B=0;B<v;B++){var Y=n[B],te=Y.start.distance(t),ue=Y.end.distance(t),xe=te+ue;(!m||xe<m)&&(i=Y,a=B*A,s=(B+1)*A,l=te,f=ue,g=Y.start.distance(Y.end),m=xe)}for(var ge=Ei(10,-e);;){var E=l?Po(l-f)/l:0,D=f?Po(l-f)/f:0;if(E<ge||D<ge||!l||l<g*ge||!f||f<g*ge)return l<=f?a:s;var we=i.divide(.5);A/=2;var Me=we[0].start.distance(t),Ye=we[0].end.distance(t),We=Me+Ye,et=we[1].start.distance(t),ut=we[1].end.distance(t);We<=et+ut?(i=we[0],s-=A,l=Me,f=Ye):(i=we[1],a+=A,l=et,f=ut)}},closestPointTangent:function(t,r){return this.tangentAtT(this.closestPointT(t,r))},containsPoint:function(t,r){return this.toPolyline(r).containsPoint(t)},divideAt:function(t,r){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var e=this.tAt(t,r);return this.divideAtT(e)},divideAtLength:function(t,r){var e=this.tAtLength(t,r);return this.divideAtT(e)},divideAtT:function(t){var r=this.start,e=this.controlPoint1,n=this.controlPoint2,i=this.end;if(t<=0)return[new Ft(r,r,r,r),new Ft(r,e,n,i)];if(t>=1)return[new Ft(r,e,n,i),new Ft(i,i,i,i)];var a=this.getSkeletonPoints(t),f=a.divider,g=a.dividerControlPoint1,m=a.dividerControlPoint2;return[new Ft(r,a.startControlPoint1,a.startControlPoint2,f),new Ft(f,g,m,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var r=this.start,e=this.controlPoint1,n=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:r.clone(),startControlPoint2:r.clone(),divider:r.clone(),dividerControlPoint1:e.clone(),dividerControlPoint2:n.clone()};if(t>=1)return{startControlPoint1:e.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var a=new at(r,e).pointAt(t),s=new at(e,n).pointAt(t),l=new at(n,i).pointAt(t),f=new at(a,s).pointAt(t),g=new at(s,l).pointAt(t);return{startControlPoint1:a,startControlPoint2:f,divider:new at(f,g).pointAt(t),dividerControlPoint1:g,dividerControlPoint2:l}},getSubdivisions:function(t){var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,e=[new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===r)return e;for(var n=this.endpointDistance(),i=Ei(10,-r),a=0;;){a+=1;for(var s=[],l=e.length,f=0;f<l;f++){var m=e[f].divide(.5);s.push(m[0],m[1])}for(var v=0,A=s.length,B=0;B<A;B++)v+=s[B].endpointDistance();if(a>1&&(0!==v?(v-n)/v:0)<i)return s;e=s,n=v}},isDifferentiable:function(){var r=this.controlPoint1,e=this.controlPoint2,n=this.end;return!(this.start.equals(r)&&r.equals(e)&&e.equals(n))},length:function(t){for(var e=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,n=0,i=e.length,a=0;a<i;a++)n+=e[a].endpointDistance();return n},lengthAtT:function(t,r){if(t<=0)return 0;var e=void 0===(r=r||{}).precision?this.PRECISION:r.precision;return this.divide(t)[0].length({precision:e})},pointAt:function(t,r){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var e=this.tAt(t,r);return this.pointAtT(e)},pointAtLength:function(t,r){var e=this.tAtLength(t,r);return this.pointAtT(e)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,r,e){return this.start.scale(t,r,e),this.controlPoint1.scale(t,r,e),this.controlPoint2.scale(t,r,e),this.end.scale(t,r,e),this},tangentAt:function(t,r){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.tAt(t,r);return this.tangentAtT(e)},tangentAtLength:function(t,r){if(!this.isDifferentiable())return null;var e=this.tAtLength(t,r);return this.tangentAtT(e)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var r=this.getSkeletonPoints(t),e=r.startControlPoint2,i=r.divider,a=new at(e,r.dividerControlPoint1);return a.translate(i.x-e.x,i.y-e.y),a},tAt:function(t,r){if(t<=0)return 0;if(t>=1)return 1;var e=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i={precision:e,subdivisions:void 0===r.subdivisions?this.getSubdivisions({precision:e}):r.subdivisions},a=this.length(i);return this.tAtLength(a*t,i)},tAtLength:function(t,r){var e=!0;t<0&&(e=!1,t=-t);for(var s,l,f,g,m,n=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i=void 0===r.subdivisions?this.getSubdivisions({precision:n}):r.subdivisions,a={precision:n,subdivisions:i},v=0,A=i.length,B=1/A,Y=0;Y<A;Y++){var te=e?Y:A-1-Y,ue=i[Y],xe=ue.endpointDistance();if(t<=v+xe){s=ue,l=te*B,f=(te+1)*B,g=e?t-v:xe+v-t,m=e?xe+v-t:t-v;break}v+=xe}if(!s)return e?1:0;for(var ge=this.length(a),E=Ei(10,-n);;){if((0!==ge?g/ge:0)<E)return l;if((0!==ge?m/ge:0)<E)return f;var z,Z,ae=s.divide(.5);B/=2;var ve=ae[0].endpointDistance(),we=ae[1].endpointDistance();g<=ve?(s=ae[0],f-=B,Z=ve-(z=g)):(s=ae[1],l+=B,Z=we-(z=g-ve)),g=z,m=Z}},toPoints:function(t){for(var e=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,n=[e[0].start.clone()],i=e.length,a=0;a<i;a++)n.push(e[a].end.clone());return n},toPolyline:function(t){return new bn(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,r){return this.start.translate(t,r),this.controlPoint1.translate(t,r),this.controlPoint2.translate(t,r),this.end.translate(t,r),this}},Ft.prototype.divide=Ft.prototype.divideAtT;const pt=function(t){if(!(this instanceof pt))return new pt(t);if("string"==typeof t)return new pt.parse(t);var r,e;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(e=(t=t.reduce(function(l,f){return l.concat(f)},[])).length,t[0].isSegment)for(r=0;r<e;r++)this.appendSegment(t[r]);else{var i=null;for(r=0;r<e;r++){var a=t[r];if(!(a instanceof at||a instanceof Ft))throw new Error("Cannot construct a path segment from the provided object.");0===r&&this.appendSegment(pt.createSegment("M",a.start)),i&&!i.end.equals(a.start)&&this.appendSegment(pt.createSegment("M",a.start)),a instanceof at?this.appendSegment(pt.createSegment("L",a.end)):a instanceof Ft&&this.appendSegment(pt.createSegment("C",a.controlPoint1,a.controlPoint2,a.end)),i=a}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof at)this.appendSegment(pt.createSegment("M",t.start)),this.appendSegment(pt.createSegment("L",t.end));else if(t instanceof Ft)this.appendSegment(pt.createSegment("M",t.start)),this.appendSegment(pt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof bn))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(e=t.points.length,r=0;r<e;r++){this.appendSegment(pt.createSegment(0===r?"M":"L",t.points[r]))}}};function Er(t,r){return r.unshift(null),new(Function.prototype.bind.apply(t,r))}pt.parse=function(t){if(!t)return new pt;for(var r=new pt,n=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),i=n.length,a=0;a<i;a++){var f=n[a].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),g=pt.createSegment.apply(this,f);r.appendSegment(g)}return r},pt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var r=pt.segmentTypes[t];if(!r)throw new Error(t+" is not a recognized path segment type.");for(var e=[],n=arguments.length,i=1;i<n;i++)e.push(arguments[i]);return Er(r,e)},pt.prototype={type:ht.Path,appendSegment:function(t){var n,r=this.segments,e=r.length,i=0!==e?r[e-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(g,m){return g.concat(m)},[]))[0].isSegment)throw new Error("Segments required.");for(var s=t.length,l=0;l<s;l++)n=this.prepareSegment(t[l],i,null),r.push(n),i=n}else{if(!t||!t.isSegment)throw new Error("Segment required.");n=this.prepareSegment(t,i,null),r.push(n)}},bbox:function(){var t=this.segments,r=t.length;if(0===r)return null;for(var e,n=0;n<r;n++){var i=t[n];if(i.isVisible){var a=i.bbox();e=e?e.union(a):a}}if(e)return e;var s=t[r-1];return new nt(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,r=t.length,e=new pt,n=0;n<r;n++){var i=t[n].clone();e.appendSegment(i)}return e},closestPoint:function(t,r){var e=this.closestPointT(t,r);return e?this.pointAtT(e):null},closestPointLength:function(t,r){var e=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i={precision:e,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):r.segmentSubdivisions},a=this.closestPointT(t,i);return a?this.lengthAtT(a,i):0},closestPointNormalizedLength:function(t,r){var e=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i={precision:e,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:e}):r.segmentSubdivisions},a=this.closestPointLength(t,i);if(0===a)return 0;var s=this.length(i);return 0===s?0:a/s},closestPointT:function(t,r){var e=this.segments,n=e.length;if(0===n)return null;for(var s,i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,a=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions,l=1/0,f=0;f<n;f++){var g=e[f];if(g.isVisible){var v=g.closestPointT(t,{precision:i,subdivisions:a[f]}),A=g.pointAtT(v),B=new at(A,t).squaredLength();B<l&&(s={segmentIndex:f,value:v},l=B)}}return s||{segmentIndex:n-1,value:1}},closestPointTangent:function(t,r){var e=this.segments,n=e.length;if(0===n)return null;for(var s,i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,a=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions,l=1/0,f=0;f<n;f++){var g=e[f],m=a[f];if(g.isDifferentiable()){var v=g.closestPointT(t,{precision:i,subdivisions:m}),A=g.pointAtT(v),B=new at(A,t).squaredLength();B<l&&(s=g.tangentAtT(v),l=B)}}return s||null},containsPoint:function(t,r){var e=this.toPolylines(r);if(!e)return!1;for(var n=e.length,i=0,a=0;a<n;a++)e[a].containsPoint(t)&&i++;return i%2==1},divideAt:function(t,r){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s={precision:i,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions},l=this.length(s);return this.divideAtLength(l*t,s)},divideAtLength:function(t,r){var e=this.segments.length;if(0===e)return null;var n=!0;t<0&&(n=!1,t=-t);var s,l,g,m,v,A,i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,a=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions,f=0;for(s=0;s<e;s++){var Y=n?s:e-1-s;l=this.getSegment(Y);var te=a[Y],ue=l.length({precision:i,subdivisions:te});if(l.isDifferentiable()&&(v=l,A=Y,t<=f+ue)){m=Y,g=l.divideAtLength((n?1:-1)*(t-f),{precision:i,subdivisions:te});break}f+=ue}if(!v)return null;g||(m=A,g=v.divideAtT(n?1:0));var xe=this.clone();xe.replaceSegment(m,g);var ge=m,E=m+1,D=m+2;g[0].isDifferentiable()||(xe.removeSegment(ge),E-=1,D-=1);var z=xe.getSegment(E).start;xe.insertSegment(E,pt.createSegment("M",z)),D+=1,g[1].isDifferentiable()||(xe.removeSegment(D-1),D-=1);var Z=D-ge-1;for(s=D;s<xe.segments.length;s++){var ae=this.getSegment(s-Z);if("Z"===(l=xe.getSegment(s)).type&&!ae.subpathStartSegment.end.equals(l.subpathStartSegment.end)){var ve=pt.createSegment("L",ae.end);xe.replaceSegment(s,ve)}}return[new pt(xe.segments.slice(0,E)),new pt(xe.segments.slice(E))]},equals:function(t){if(!t)return!1;var r=this.segments,e=t.segments,n=r.length;if(e.length!==n)return!1;for(var i=0;i<n;i++){var a=r[i],s=e[i];if(a.type!==s.type||!a.equals(s))return!1}return!0},getSegment:function(t){var r=this.segments,e=r.length;if(0===e)throw new Error("Path has no segments.");if(t<0&&(t=e+t),t>=e||t<0)throw new Error("Index out of range.");return r[t]},getSegmentSubdivisions:function(t){for(var r=this.segments,e=r.length,n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=[],a=0;a<e;a++){var l=r[a].getSubdivisions({precision:n});i.push(l)}return i},getSubpaths:function(){const r=this.clone().validate().segments,e=r.length,n=[];for(let i=0;i<e;i++){const a=r[i];a.isSubpathStart?n.push(new pt(a)):n[n.length-1].appendSegment(a)}return n},insertSegment:function(t,r){var e=this.segments,n=e.length;if(t<0&&(t=n+t+1),t>n||t<0)throw new Error("Index out of range.");var i,a=null,s=null;if(0!==n&&(s=t>=1?(a=e[t-1]).nextSegment:e[0]),Array.isArray(r)){if(!(r=r.reduce(function(m,v){return m.concat(v)},[]))[0].isSegment)throw new Error("Segments required.");for(var l=r.length,f=0;f<l;f++)i=this.prepareSegment(r[f],a,s),e.splice(t+f,0,i),a=i}else{if(!r||!r.isSegment)throw new Error("Segment required.");i=this.prepareSegment(r,a,s),e.splice(t,0,i)}},intersectionWithLine:function(t,r){var e=null,n=this.toPolylines(r);if(!n)return null;for(var i=0,a=n.length;i<a;i++){var l=t.intersect(n[i]);l&&(e||(e=[]),Array.isArray(l)?Array.prototype.push.apply(e,l):e.push(l))}return e},isDifferentiable:function(){for(var t=this.segments,r=t.length,e=0;e<r;e++)if(t[e].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var r=this.segments,e=r.length;if(0===e)return 0;for(var i=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,a=0,s=0;s<e;s++)a+=r[s].length({subdivisions:i[s]});return a},lengthAtT:function(t,r){var e=this.segments,n=e.length;if(0===n)return 0;var i=t.segmentIndex;if(i<0)return 0;var a=t.value;i>=n?(i=n-1,a=1):a<0?a=0:a>1&&(a=1);for(var s=void 0===(r=r||{}).precision?this.PRECISION:r.precision,l=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):r.segmentSubdivisions,g=0,m=0;m<i;m++){var v=e[m];g+=v.length({precisison:s,subdivisions:l[m]})}return g+(v=e[i]).lengthAtT(a,{precisison:s,subdivisions:l[i]})},pointAt:function(t,r){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s={precision:i,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions},l=this.length(s);return this.pointAtLength(l*t,s)},pointAtLength:function(t,r){var e=this.segments,n=e.length;if(0===n)return null;if(0===t)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t);for(var l,a=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):r.segmentSubdivisions,f=0,g=0;g<n;g++){var m=i?g:n-1-g,v=e[m],A=s[m],B=v.length({precision:a,subdivisions:A});if(v.isVisible){if(t<=f+B)return v.pointAtLength((i?1:-1)*(t-f),{precision:a,subdivisions:A});l=v}f+=B}return l?i?l.end:l.start:e[n-1].end.clone()},pointAtT:function(t){var r=this.segments,e=r.length;if(0===e)return null;var n=t.segmentIndex;if(n<0)return r[0].pointAtT(0);if(n>=e)return r[e-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),r[n].pointAtT(i)},PRECISION:3,prepareSegment:function(t,r,e){t.previousSegment=r,t.nextSegment=e,r&&(r.nextSegment=t),e&&(e.previousSegment=t);var n=t;return t.isSubpathStart&&(t.subpathStartSegment=t,n=e),n&&this.updateSubpathStartSegment(n),t},removeSegment:function(t){var r=this.segments,e=r.length;if(0===e)throw new Error("Path has no segments.");if(t<0&&(t=e+t),t>=e||t<0)throw new Error("Index out of range.");var n=r.splice(t,1)[0],i=n.previousSegment,a=n.nextSegment;i&&(i.nextSegment=a),a&&(a.previousSegment=i),n.isSubpathStart&&a&&this.updateSubpathStartSegment(a)},replaceSegment:function(t,r){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var i,a=e[t],s=a.previousSegment,l=a.nextSegment,f=a.isSubpathStart;if(Array.isArray(r)){if(!(r=r.reduce(function(A,B){return A.concat(B)},[]))[0].isSegment)throw new Error("Segments required.");e.splice(t,1);for(var g=r.length,m=0;m<g;m++)i=this.prepareSegment(r[m],s,l),e.splice(t+m,0,i),s=i,f&&i.isSubpathStart&&(f=!1)}else{if(!r||!r.isSegment)throw new Error("Segment required.");i=this.prepareSegment(r,s,l),e.splice(t,1,i),f&&i.isSubpathStart&&(f=!1)}f&&l&&this.updateSubpathStartSegment(l)},round:function(t){for(var r=this.segments,e=r.length,n=0;n<e;n++)r[n].round(t);return this},scale:function(t,r,e){for(var n=this.segments,i=n.length,a=0;a<i;a++)n[a].scale(t,r,e);return this},segmentAt:function(t,r){var e=this.segmentIndexAt(t,r);return e?this.getSegment(e):null},segmentAtLength:function(t,r){var e=this.segmentIndexAtLength(t,r);return e?this.getSegment(e):null},segmentIndexAt:function(t,r){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s={precision:i,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions},l=this.length(s);return this.segmentIndexAtLength(l*t,s)},segmentIndexAtLength:function(t,r){var e=this.segments,n=e.length;if(0===n)return null;var i=!0;t<0&&(i=!1,t=-t);for(var a=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):r.segmentSubdivisions,l=null,f=0,g=0;g<n;g++){var m=i?g:n-1-g,v=e[m],B=v.length({precision:a,subdivisions:s[m]});if(v.isVisible){if(t<=f+B)return m;l=m}f+=B}return l},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,r){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s={precision:i,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):r.segmentSubdivisions},l=this.length(s);return this.tangentAtLength(l*t,s)},tangentAtLength:function(t,r){var e=this.segments,n=e.length;if(0===n)return null;var i=!0;t<0&&(i=!1,t=-t);for(var l,a=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):r.segmentSubdivisions,f=0,g=0;g<n;g++){var m=i?g:n-1-g,v=e[m],A=s[m],B=v.length({precision:a,subdivisions:A});if(v.isDifferentiable()){if(t<=f+B)return v.tangentAtLength((i?1:-1)*(t-f),{precision:a,subdivisions:A});l=v}f+=B}return l?l.tangentAtT(i?1:0):null},tangentAtT:function(t){var r=this.segments,e=r.length;if(0===e)return null;var n=t.segmentIndex;if(n<0)return r[0].tangentAtT(0);if(n>=e)return r[e-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),r[n].tangentAtT(i)},toPoints:function(t){var r=this.segments,e=r.length;if(0===e)return null;for(var i=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,a=[],s=[],l=0;l<e;l++){var f=r[l];if(f.isVisible){var g=i[l];if(g.length>0){var m=g.map(function(v){return v.start});Array.prototype.push.apply(s,m)}else s.push(f.start)}else s.length>0&&(s.push(r[l-1].end),a.push(s),s=[])}return s.length>0&&(s.push(this.end),a.push(s)),a},toPolylines:function(t){var r=[],e=this.toPoints(t);if(!e)return null;for(var n=0,i=e.length;n<i;n++)r.push(new bn(e[n]));return r},toString:function(){for(var t=this.segments,r=t.length,e="",n=0;n<r;n++)e+=t[n].serialize()+" ";return e.trim()},translate:function(t,r){for(var e=this.segments,n=e.length,i=0;i<n;i++)e[i].translate(t,r);return this},updateSubpathStartSegment:function(t){for(var r=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=r?r.subpathStartSegment:null,r=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,pt.createSegment("M",0,0)),this}},Object.defineProperty(pt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,r=t.length;if(0===r)return null;for(var e=0;e<r;e++){var n=t[e];if(n.isVisible)return n.start}return t[r-1].end}}),Object.defineProperty(pt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,r=t.length;if(0===r)return null;for(var e=r-1;e>=0;e--){var n=t[e];if(n.isVisible)return n.end}return t[r-1].end}});var di={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var r=this.length();return t>=1?r:r*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(di,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(di,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(di,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var nn=function(){for(var t=[],r=arguments.length,e=0;e<r;e++)t.push(arguments[e]);if(!(this instanceof nn))return Er(nn,t);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(t[0]instanceof at){if(1===r)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(2===r)return this.end=new de(+t[0],+t[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var i;for(n=[],e=0;e<r;e+=2)i=t.slice(e,e+2),n.push(Er(nn,i));return n}if(1===r)return this.end=new de(t[0]),this;for(n=[],e=0;e<r;e+=1)n.push(new nn(t[e]));return n},Pi={clone:function(){return new nn(this.end)},divideAt:function(t){var e=new at(this.start,this.end).divideAt(t);return[new nn(e[0]),new nn(e[1])]},divideAtLength:function(t){var e=new at(this.start,this.end).divideAtLength(t);return[new nn(e[0]),new nn(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,r,e){return this.end.scale(t,r,e),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,r){return this.end.translate(t,r),this}};Object.defineProperty(Pi,"type",{configurable:!0,enumerable:!0,value:"L"}),nn.prototype=Br(di,at.prototype,Pi);var dr=function(){for(var t=[],r=arguments.length,e=0;e<r;e++)t.push(arguments[e]);if(!(this instanceof dr))return Er(dr,t);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n,a;if(t[0]instanceof Ft){if(1===r)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(6===r)return this.controlPoint1=new de(+t[0],+t[1]),this.controlPoint2=new de(+t[2],+t[3]),this.end=new de(+t[4],+t[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var i;for(n=[],e=0;e<r;e+=6)i=t.slice(e,e+6),n.push(Er(dr,i));return n}if(3===r)return this.controlPoint1=new de(t[0]),this.controlPoint2=new de(t[1]),this.end=new de(t[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(n=[],e=0;e<r;e+=3)a=t.slice(e,e+3),n.push(Er(dr,a));return n},Ca={clone:function(){return new dr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,r){var n=new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,r);return[new dr(n[0]),new dr(n[1])]},divideAtLength:function(t,r){var n=new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,r);return[new dr(n[0]),new dr(n[1])]},divideAtT:function(t){var e=new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new dr(e[0]),new dr(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var r=this.controlPoint1,e=this.controlPoint2,n=this.end;return!(this.start.equals(r)&&r.equals(e)&&e.equals(n))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,r,e){return this.controlPoint1.scale(t,r,e),this.controlPoint2.scale(t,r,e),this.end.scale(t,r,e),this},serialize:function(){var t=this.controlPoint1,r=this.controlPoint2,e=this.end;return this.type+" "+t.x+" "+t.y+" "+r.x+" "+r.y+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,r){return this.controlPoint1.translate(t,r),this.controlPoint2.translate(t,r),this.end.translate(t,r),this}};Object.defineProperty(Ca,"type",{configurable:!0,enumerable:!0,value:"C"}),dr.prototype=Br(di,Ft.prototype,Ca);var Ii=function(){for(var t=[],r=arguments.length,e=0;e<r;e++)t.push(arguments[e]);if(!(this instanceof Ii))return Er(Ii,t);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n,a;if(t[0]instanceof at){if(1===r)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(t[0]instanceof Ft){if(1===r)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof t[0]||"number"==typeof t[0]){if(2===r)return this.end=new de(+t[0],+t[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var i;for(n=[],e=0;e<r;e+=2)i=t.slice(e,e+2),n.push(Er(0===e?Ii:nn,i));return n}if(1===r)return this.end=new de(t[0]),this;for(n=[],e=0;e<r;e+=1)a=t[e],n.push(0===e?new Ii(a):new nn(a));return n},Ai={bbox:function(){return null},clone:function(){return new Ii(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,r,e){return this.end.scale(t,r,e),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,r){return this.end.translate(t,r),this}};Object.defineProperty(Ai,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Ai,"type",{configurable:!0,enumerable:!0,value:"M"}),Ii.prototype=Br(di,Ai);var hi=function(){for(var t=[],r=arguments.length,e=0;e<r;e++)t.push(arguments[e]);if(!(this instanceof hi))return Er(hi,t);if(r>0)throw new Error("Closepath constructor expects no arguments.");return this},Mi={clone:function(){return new hi},divideAt:function(t){var e=new at(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new nn(e[0]):this.clone(),new nn(e[1])]},divideAtLength:function(t){var e=new at(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new nn(e[0]):this.clone(),new nn(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Mi,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Mi,"type",{configurable:!0,enumerable:!0,value:"Z"}),hi.prototype=Br(di,at.prototype,Mi);var Io=pt.segmentTypes={L:nn,C:dr,M:Ii,Z:hi,z:hi};pt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Io).join("")+",.]*$"),pt.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const Wa={curveThroughPoints:function(t){return console.warn("deprecated"),new pt(Ft.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var i,r=[],e=[],n=t.length-1;if(1==n)return r[0]=new de((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),e[0]=new de(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,e];var a=[];for(i=1;i<n-1;i++)a[i]=4*t[i].x+2*t[i+1].x;a[0]=t[0].x+2*t[1].x,a[n-1]=(8*t[n-1].x+t[n].x)/2;var s=this.getFirstControlPoints(a);for(i=1;i<n-1;++i)a[i]=4*t[i].y+2*t[i+1].y;a[0]=t[0].y+2*t[1].y,a[n-1]=(8*t[n-1].y+t[n].y)/2;var l=this.getFirstControlPoints(a);for(i=0;i<n;i++)r.push(new de(s[i],l[i])),e.push(i<n-1?new de(2*t[i+1].x-s[i+1],2*t[i+1].y-l[i+1]):new de((t[n].x+s[n-1])/2,(t[n].y+l[n-1])/2));return[r,e]},getCurveDivider:function(t,r,e,n){console.warn("deprecated");var i=new Ft(t,r,e,n);return function(s){var l=i.divide(s);return[{p0:l[0].start,p1:l[0].controlPoint1,p2:l[0].controlPoint2,p3:l[0].end},{p0:l[1].start,p1:l[1].controlPoint1,p2:l[1].controlPoint2,p3:l[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var r=t.length,e=[],n=[],i=2;e[0]=t[0]/i;for(var a=1;a<r;a++)n[a]=1/i,e[a]=(t[a]-e[a-1])/(i=(a<r-1?4:3.5)-n[a]);for(a=1;a<r;a++)e[r-a-1]-=n[r-a]*e[r-a];return e},getInversionSolver:function(t,r,e,n){console.warn("deprecated");var i=new Ft(t,r,e,n);return function(s){return i.closestPointT(s)}}},yr=function(t){return this instanceof yr?"string"==typeof t?new yr.parse(t):void(this.points=Array.isArray(t)?t.map(de):[]):new yr(t)};function or(t,r,e,n){switch(t.type){case ht.Line:if(r.type===ht.Line)return ar(t,r);break;case ht.Ellipse:switch(r.type){case ht.Line:return Mr(t,r);case ht.Ellipse:return Xo(t,r)}break;case ht.Rect:switch(r.type){case ht.Line:return Ao(t,r);case ht.Ellipse:return Xr(t,r);case ht.Rect:return Pr(t,r)}break;case ht.Polyline:switch(r.type){case ht.Line:return Oi(t,r);case ht.Ellipse:return ao(t,r);case ht.Rect:return Or(t,r);case ht.Polyline:return ki(t,r)}break;case ht.Polygon:switch(r.type){case ht.Line:return ni(t,r);case ht.Ellipse:return zi(t,r);case ht.Rect:return Ko(t,r);case ht.Polyline:return Jo(t,r);case ht.Polygon:return Mo(t,r)}break;case ht.Path:switch(r.type){case ht.Line:return so(t,r,e);case ht.Ellipse:return wa(t,r,e);case ht.Rect:return Qo(t,r,e);case ht.Polyline:return Sa(t,r,e);case ht.Polygon:return Zo(t,r,e);case ht.Path:return Ta(t,r,e,n)}}switch(r.type){case ht.Ellipse:case ht.Rect:case ht.Polyline:case ht.Polygon:case ht.Path:return or(r,t,n,e);default:throw Error(`The intersection for ${t} and ${r} could not be found.`)}}function ar(t,r){const e=t.start.x,n=t.start.y,s=r.start.x,l=r.start.y,m=t.end.x-e,v=t.end.y-n,A=r.end.x-s,B=r.end.y-l,Y=e-s,te=n-l,ue=m*B-A*v,xe=(m*te-v*Y)/ue,ge=(A*te-B*Y)/ue;return xe>=0&&xe<=1&&ge>=0&&ge<=1}function Mr(t,r){const e=t.a,n=t.b,i=t.x,a=t.y,s=r.start.x-i,f=r.start.y-a,m=e*e,v=n*n,A=r.end.x-i-s,B=r.end.y-a-f,Y=A*A/m+B*B/v,te=2*s*A/m+2*f*B/v,xe=te*te-4*Y*(s*s/m+f*f/v-1);if(0===xe){const ge=-te/2/Y;return ge>=0&&ge<=1}if(xe>0){const ge=Math.sqrt(xe),E=(-te+ge)/2/Y,D=(-te-ge)/2/Y;return E>=0&&E<=1||D>=0&&D<=1}return!1}function Xo(t,r){return function Ya(t,r,e,n){const{cos:i,sin:a}=Math,s=a(r),l=i(r),f=a(n),g=i(n),m=s*s,v=l*l,B=f*f,Y=g*g,ue=t.a*t.a,xe=t.b*t.b,ge=e.a*e.a,E=e.b*e.b,D=ue*m+xe*v,z=ge*B+E*Y,Z=ue*v+xe*m,ae=ge*Y+E*B;let ve=2*(xe-ue)*(s*l),we=2*(E-ge)*(f*g),Me=-2*D*t.x-ve*t.y,Ye=-2*z*e.x-we*e.y,We=-ve*t.x-2*Z*t.y,et=-we*e.x-2*ae*e.y;const ut=D*t.x*t.x+Z*t.y*t.y+ve*t.x*t.y-ue*xe,lt=z*e.x*e.x+ae*e.y*e.y+we*e.x*e.y-ge*E;ve/=2,we/=2,Me/=2,Ye/=2,We/=2,et/=2;const Et=pi([[D,ve,Me],[ve,Z,We],[Me,We,ut]]),In=pi([[z,we,Ye],[we,ae,et],[Ye,et,lt]]),yn=.33333333*(pi([[z,ve,Me],[we,Z,We],[Ye,We,ut]])+pi([[D,we,Me],[ve,ae,We],[Me,et,ut]])+pi([[D,ve,Ye],[ve,Z,et],[Me,We,lt]])),Rn=.33333333*(pi([[D,we,Ye],[ve,ae,et],[Me,et,lt]])+pi([[z,ve,Ye],[we,Z,et],[Ye,We,lt]])+pi([[z,we,Me],[we,ae,We],[Ye,et,ut]])),At=Li([[Et,yn],[yn,Rn]]),jt=Li([[Et,Rn],[yn,In]]),Ot=Li([[yn,Rn],[Rn,In]]);return!(Li([[2*At,jt],[jt,2*Ot]])>0&&(Rn>0||yn>0))}(t,0,r,0)}function Ao(t,r){const{start:e,end:n}=r,{x:i,y:a,width:s,height:l}=t;return!(e.x>i+s&&n.x>i+s||e.x<i&&n.x<i||e.y>a+l&&n.y>a+l||e.y<a&&n.y<a)&&(!(!t.containsPoint(r.start)&&!t.containsPoint(r.end))||ar(t.topLine(),r)||ar(t.rightLine(),r)||ar(t.bottomLine(),r)||ar(t.leftLine(),r))}function Xr(t,r){return!!Pr(t,nt.fromEllipse(r))&&zi(yr.fromRect(t),r)}function Pr(t,r){return t.x<r.x+r.width&&t.x+t.width>r.x&&t.y<r.y+r.height&&t.y+t.height>r.y}function Oi(t,r){return Ea(t,r,{interior:!1})}function ao(t,r){return $a(t,r,{interior:!1})}function Or(t,r){return Pa(t,r,{interior:!1})}function ki(t,r){return ri(t,r,{interior:!1})}function ni(t,r){return Ea(t,r,{interior:!0})}function zi(t,r){return $a(t,r,{interior:!0})}function Ko(t,r){return Pa(t,r,{interior:!0})}function Jo(t,r){return ri(t,r,{interior:!0})}function Mo(t,r){return uo(t,r,{interior:!0})}function so(t,r,e){return t.getSubpaths().some(n=>{const[i]=n.toPolylines(e),{type:a}=n.getSegment(-1);return"Z"===a?ni(i,r):Oi(i,r)})}function wa(t,r,e){return t.getSubpaths().some(n=>{const[i]=n.toPolylines(e),{type:a}=n.getSegment(-1);return"Z"===a?zi(i,r):ao(i,r)})}function Qo(t,r,e){return Zo(t,yr.fromRect(r),e)}function Sa(t,r,e){return qo(t,r,e,{interior:!1})}function Zo(t,r,e){return qo(t,r,e,{interior:!0})}function Ta(t,r,e,n){return t.getSubpaths().some(i=>{const[a]=i.toPolylines(e),{type:s}=i.getSegment(-1);return"Z"===s?Zo(r,a,n):Sa(r,a,n)})}function Ea(t,r,e={}){const{interior:n=!1}=e;let i;if(n){if(t.containsPoint(r.start))return!0;const{start:l,end:f,points:g}=t;i=f.equals(l)?g:[...g,l]}else i=t.points;const{length:a}=i,s=new at;for(let l=0;l<a-1;l++)if(s.start=i[l],s.end=i[l+1],ar(r,s))return!0;return!1}function $a(t,r,e={}){const{start:n,end:i,points:a}=t;if(r.containsPoint(n))return!0;let s;const{interior:l=!1}=e;if(l){if(t.containsPoint(r.center()))return!0;s=i.equals(n)?a:[...a,n]}else s=a;const{length:f}=s,g=new at;for(let m=0;m<f-1;m++)if(g.start=s[m],g.end=s[m+1],Mr(r,g))return!0;return!1}function Pa(t,r,e){return uo(t,yr.fromRect(r),e)}function qo(t,r,e,n){return t.getSubpaths().some(i=>{const[a]=i.toPolylines(e),{type:s}=i.getSegment(-1);return"Z"===s?uo(r,a,n):ri(r,a,n)})}function ri(t,r,e={}){const{interior:n=!1}=e;let i;if(n){const{start:f}=r;if(t.containsPoint(f))return!0;i=t.clone().close()}else i=t;const a=r.points,{length:s}=a,l=new at;for(let f=0;f<s-1;f++)if(l.start=a[f],l.end=a[f+1],Oi(i,l))return!0;return!1}function uo(t,r,e){return r.containsPoint(t.start)||ri(t,r.clone().close(),e)}function Li(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function pi(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}yr.parse=function(t){return new yr(Si(t))},yr.fromRect=function(t){return new yr([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},yr.prototype=Br(bn.prototype,{type:ht.Polygon,clone:function(){return new yr(ba(this.points))},convexHull:function(){return new yr(_a(this.points))},lengthPoints:function(){const{start:t,end:r,points:e}=this;return e.length<=1||t.equals(r)?e:[...e,t.clone()]}});const ea=h,Pe=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var r={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n=Math,i=n.PI,a=n.atan2,s=n.sqrt,l=n.min,f=n.max,g=n.cos,m=n.sin,v=function(E,D,z){if(!(this instanceof v))return v.apply(Object.create(v.prototype),arguments);if(E){if(v.isV(E)&&(E=E.node),D=D||{},v.isString(E)){if("svg"===(E=E.trim()).toLowerCase())E=v.createSvgDocument();else if("<"===E[0]){var Z=v.createSvgDocument(E);if(Z.childNodes.length>1){var ve,we,ae=[];for(ve=0,we=Z.childNodes.length;ve<we;ve++){var Me=Z.childNodes[ve];ae.push(new v(document.importNode(Me,!0)))}return ae}E=document.importNode(Z.firstChild,!0)}else E=document.createElementNS(r.svg,E);v.ensureId(E)}return this.node=E,this.setAttributes(D),z&&this.append(z),this}},A=v.prototype;function Y(E,D,z){z||(z={});for(var Z=z.includeAnnotationIndices,ae=z.eol,ve=z.lineHeight,we=z.baseSize,Me=0,Ye={},We=D.length-1,et=0;et<=We;et++){var ut=D[et],lt=null;if(v.isObject(ut)){var Et=ut.attrs,In=v("tspan",Et),yn=In.node,Rn=ut.t;ae&&et===We&&(Rn+=ae),yn.textContent=Rn;var At=Et.class;At&&In.addClass(At),Z&&In.attr("annotations",ut.annotations),lt=parseFloat(Et["font-size"]),isFinite(lt)||(lt=we),lt&&lt>Me&&(Me=lt)}else ae&&et===We&&(ut+=ae),yn=document.createTextNode(ut||" "),we&&we>Me&&(Me=we);E.appendChild(yn)}return Me&&(Ye.maxFontSize=Me),ve?Ye.lineHeight=ve:Me&&(Ye.lineHeight=1.2*Me),Ye}Object.defineProperty(A,"id",{enumerable:!0,get:function(){return this.node.id},set:function(E){this.node.id=E}}),A.getTransformToElement=function(E){var D=this.node;if(v.isSVGGraphicsElement(E)&&v.isSVGGraphicsElement(D)){var z=v.toNode(E).getScreenCTM(),Z=D.getScreenCTM();if(z&&Z)return z.inverse().multiply(Z)}return v.createSVGMatrix()},A.transform=function(E,D){var z=this.node;if(v.isUndefined(E))return v.transformStringToMatrix(this.attr("transform"));if(D&&D.absolute)return this.attr("transform",v.matrixToTransformString(E));var Z=v.createSVGTransform(E);return z.transform.baseVal.appendItem(Z),this},A.translate=function(E,D,z){z=z||{},D=D||0;var Z=this.attr("transform")||"",ae=v.parseTransformString(Z);return Z=ae.value,v.isUndefined(E)?ae.translate:(Z=Z.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(z.absolute?E:ae.translate.tx+E)+","+(z.absolute?D:ae.translate.ty+D)+") "+Z).trim()),this)},A.rotate=function(E,D,z,Z){Z=Z||{};var ae=this.attr("transform")||"",ve=v.parseTransformString(ae);return ae=ve.value,v.isUndefined(E)?ve.rotate:(ae=ae.replace(/rotate\([^)]*\)/g,"").trim(),E%=360,this.attr("transform",(ae+" rotate("+(Z.absolute?E:ve.rotate.angle+E)+(void 0!==D&&void 0!==z?","+D+","+z:"")+")").trim()),this)},A.scale=function(E,D){D=v.isUndefined(D)?E:D;var z=this.attr("transform")||"",Z=v.parseTransformString(z);return z=Z.value,v.isUndefined(E)?Z.scale:(z=z.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(z+" scale("+E+","+D+")").trim()),this)},A.bbox=function(E,D){var z,Z=this.node,ae=Z.ownerSVGElement;if(!ae)return new nt(0,0,0,0);try{z=Z.getBBox()}catch(we){z={x:Z.clientLeft,y:Z.clientTop,width:Z.clientWidth,height:Z.clientHeight}}if(E)return new nt(z);var ve=this.getTransformToElement(D||ae);return v.transformRect(z,ve)},A.getBBox=function(E){var z,D={},Z=this.node;if(!Z.ownerSVGElement||!v.isSVGGraphicsElement(Z))return new nt(0,0,0,0);if(E&&(E.target&&(D.target=v.toNode(E.target)),E.recursive&&(D.recursive=E.recursive)),D.recursive){var we=this.children(),Me=we.length;if(0===Me)return this.getBBox({target:D.target,recursive:!1});D.target||(D.target=this);for(var Ye=0;Ye<Me;Ye++){var et,We=we[Ye];et=0===We.children().length?We.getBBox({target:D.target,recursive:!1}):We.getBBox({target:D.target,recursive:!0}),z=z?z.union(et):et}return z}try{z=Z.getBBox()}catch(ut){z={x:Z.clientLeft,y:Z.clientTop,width:Z.clientWidth,height:Z.clientHeight}}if(D.target){var ve=this.getTransformToElement(D.target);return v.transformRect(z,ve)}return new nt(z)};var te=/em$/;function ue(E,D){var z=parseFloat(E);return te.test(E)?z*D:z}A.text=function(E,D){if(E&&"string"!=typeof E)throw new Error("Vectorizer: text() expects the first argument to be a string.");E=v.sanitizeText(E),D||(D={});var z=D.displayEmpty,Z=D.eol,ae=D.textPath,ve=D.textVerticalAnchor,we="middle"===ve||"bottom"===ve||"top"===ve,Me=D.x;void 0===Me&&(Me=this.attr("x")||0);var Ye=D.includeAnnotationIndices,We=D.annotations;We&&!v.isArray(We)&&(We=[We]);var et=D.lineHeight,ut="auto"===et,lt=ut?"1.5em":et||"1em";this.empty(),this.attr({"xml:space":"preserve",display:E||z?null:"none"});var Et=parseFloat(this.attr("font-size"));Et||(Et=16,(we||We)&&this.attr("font-size",Et));var yn,In=document;ae?("string"==typeof ae&&(ae={d:ae}),yn=function B(E,D){E||(E={});var z=v("textPath"),Z=E.d;if(Z&&void 0===E["xlink:href"]){var ae=v("path").attr("d",Z).appendTo(D.defs());z.attr("xlink:href","#"+ae.id)}return v.isObject(E)&&z.attr(E),z.node}(ae,this)):yn=In.createDocumentFragment();for(var Ot,Rn=0,At=E.split("\n"),jt=[],kt=0,rn=At.length-1;kt<=rn;kt++){var gn,An=lt,Mn="v-line",tn=In.createElementNS(r.svg,"tspan"),tr=At[kt];if(tr)if(We){var sn=(gn=Y(tn,v.annotateString(tr,We,{offset:-Rn,includeAnnotationIndices:Ye}),{includeAnnotationIndices:Ye,eol:kt!==rn&&Z,lineHeight:ut?null:lt,baseSize:Et})).lineHeight;sn&&ut&&0!==kt&&(An=sn),0===kt&&(Ot=.8*gn.maxFontSize)}else Z&&kt!==rn&&(tr+=Z),tn.textContent=tr;else{tn.textContent="-",Mn+=" v-empty-line";var Mt=tn.style;Mt.fillOpacity=0,Mt.strokeOpacity=0,We&&(gn={})}gn&&jt.push(gn),kt>0&&tn.setAttribute("dy",An),(kt>0||ae)&&tn.setAttribute("x",Me),tn.className.baseVal=Mn,yn.appendChild(tn),Rn+=tr.length+1}if(we)if(We)An=function xe(E,D,z,Z){if(!Array.isArray(D))return 0;var ae=D.length;if(!ae)return 0;for(var ve=D[0],we=ue(ve.maxFontSize,z)||z,Me=0,Ye=ue(Z,z),We=1;We<ae;We++)Me+=ue((ve=D[We]).lineHeight,z)||Ye;var lt,ut=ue(ve.maxFontSize,z)||z;switch(E){case"middle":lt=we/2-.15*ut-Me/2;break;case"bottom":lt=-.25*ut-Me;break;default:lt=.8*we}return lt}(ve,jt,Et,lt);else if("top"===ve)An="0.8em";else{var ft;switch(rn>0?(ft=parseFloat(lt)||1,ft*=rn,te.test(lt)||(ft/=Et)):ft=0,ve){case"middle":An=.3-ft/2+"em";break;case"bottom":An=-ft-.3+"em"}}else 0===ve?An="0em":ve?An=ve:(An=0,null===this.attr("y")&&this.attr("y",Ot||"0.8em"));return yn.firstChild.setAttribute("dy",An),this.append(yn),this},A.removeAttr=function(E){var D=v.qualifyAttr(E),z=this.node;return D.ns?z.hasAttributeNS(D.ns,D.local)&&z.removeAttributeNS(D.ns,D.local):z.hasAttribute(E)&&z.removeAttribute(E),this},A.attr=function(E,D){if(v.isUndefined(E)){for(var z=this.node.attributes,Z={},ae=0;ae<z.length;ae++)Z[z[ae].name]=z[ae].value;return Z}if(v.isString(E)&&v.isUndefined(D))return this.node.getAttribute(E);if("object"==typeof E)for(var ve in E)E.hasOwnProperty(ve)&&this.setAttribute(ve,E[ve]);else this.setAttribute(E,D);return this},A.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",v.normalizePathData(this.attr("d"))),this},A.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},A.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},A.setAttributes=function(E){for(var D in E)E.hasOwnProperty(D)&&this.setAttribute(D,E[D]);return this},A.append=function(E){v.isArray(E)||(E=[E]);for(var D=0,z=E.length;D<z;D++)this.node.appendChild(v.toNode(E[D]));return this},A.prepend=function(E){var D=this.node.firstChild;return D?v(D).before(E):this.append(E)},A.before=function(E){var D=this.node,z=D.parentNode;if(z){v.isArray(E)||(E=[E]);for(var Z=0,ae=E.length;Z<ae;Z++)z.insertBefore(v.toNode(E[Z]),D)}return this},A.appendTo=function(E){return v.toNode(E).appendChild(this.node),this},A.svg=function(){return this.node instanceof window.SVGSVGElement?this:v(this.node.ownerSVGElement)},A.tagName=function(){return this.node.tagName.toUpperCase()},A.defs=function(){var E=this.svg()||this,D=E.node.getElementsByTagName("defs")[0];return D?v(D):v("defs").appendTo(E)},A.clone=function(){var E=v(this.node.cloneNode(!0));return E.node.id=v.uniqueId(),E},A.findOne=function(E){var D=this.node.querySelector(E);return D?v(D):void 0},A.find=function(E){var D=[],z=this.node.querySelectorAll(E);if(z)for(var Z=0;Z<z.length;Z++)D.push(v(z[Z]));return D},A.children=function(){for(var E=this.node.childNodes,D=[],z=0;z<E.length;z++)1===E[z].nodeType&&D.push(v(E[z]));return D},A.parent=function(){return v(this.node.parentNode)||null},A.index=function(){for(var E=0,D=this.node.previousSibling;D;)1===D.nodeType&&E++,D=D.previousSibling;return E},A.findParentByClass=function(E,D){for(var z=this.node.ownerSVGElement,Z=this.node.parentNode;Z&&Z!==D&&Z!==z;){var ae=v(Z);if(ae.hasClass(E))return ae;Z=Z.parentNode}return null},A.contains=function(E){var D=this.node,z=v.toNode(E),Z=z&&z.parentNode;return D===Z||!!(Z&&1===Z.nodeType&&16&D.compareDocumentPosition(Z))},A.toLocalPoint=function(E,D){var z=this.svg().node,Z=z.createSVGPoint();Z.x=E,Z.y=D;try{var ae=Z.matrixTransform(z.getScreenCTM().inverse()),ve=this.getTransformToElement(z).inverse()}catch(we){return Z}return ae.matrixTransform(ve)},A.translateCenterToPoint=function(E){var z=this.getBBox({target:this.svg()}).center();return this.translate(E.x-z.x,E.y-z.y),this},A.translateAndAutoOrient=function(E,D,z){E=new de(E),D=new de(D),z||(z=this.svg());var Z=this.scale();this.attr("transform","");var ae=this.getBBox({target:z}).scale(Z.sx,Z.sy),ve=v.createSVGTransform();ve.setTranslate(-ae.x-ae.width/2,-ae.y-ae.height/2);var we=v.createSVGTransform(),Me=E.angleBetween(D,E.clone().offset(1,0));Me&&we.setRotate(Me,0,0);var Ye=v.createSVGTransform(),We=E.clone().move(D,ae.width/2);Ye.setTranslate(2*E.x-We.x,2*E.y-We.y);var et=this.getTransformToElement(z),ut=v.createSVGTransform();return ut.setMatrix(Ye.matrix.multiply(we.matrix.multiply(ve.matrix.multiply(et.scale(Z.sx,Z.sy))))),this.attr("transform",v.matrixToTransformString(ut.matrix)),this},A.animateAlongPath=function(E,D){D=v.toNode(D);var z=v.ensureId(D),Z=v("animateMotion",E),ae=v("mpath",{"xlink:href":"#"+z});Z.append(ae),this.append(Z);try{Z.node.beginElement()}catch(lt){if("fake"===document.documentElement.getAttribute("smiling")){var ve=Z.node;ve.animators=[];var we=ve.getAttribute("id");we&&(id2anim[we]=ve);for(var Me=getTargets(ve),Ye=0,We=Me.length;Ye<We;Ye++){var ut=new Animator(ve,Me[Ye],Ye);animators.push(ut),ve.animators[Ye]=ut,ut.register()}}}return this},A.hasClass=function(E){return new RegExp("(\\s|^)"+E+"(\\s|$)").test(this.node.getAttribute("class"))},A.addClass=function(E){if(E&&!this.hasClass(E)){var D=this.node.getAttribute("class")||"";this.node.setAttribute("class",(D+" "+E).trim())}return this},A.removeClass=function(E){if(E&&this.hasClass(E)){var D=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+E+"(\\s|$)","g"),"$2");this.node.setAttribute("class",D)}return this},A.toggleClass=function(E,D){return(v.isUndefined(D)?this.hasClass(E):!D)?this.removeClass(E):this.addClass(E),this},A.sample=function(E){E=E||1;for(var ve,D=this.node,z=D.getTotalLength(),Z=[],ae=0;ae<z;)ve=D.getPointAtLength(ae),Z.push({x:ve.x,y:ve.y,distance:ae}),ae+=E;return Z},A.convertToPath=function(){var E=v("path");E.attr(this.attr());var D=this.convertToPathData();return D&&E.attr("d",D),E},A.convertToPathData=function(){var E=this.tagName();switch(E){case"PATH":return this.attr("d");case"LINE":return v.convertLineToPathData(this.node);case"POLYGON":return v.convertPolygonToPathData(this.node);case"POLYLINE":return v.convertPolylineToPathData(this.node);case"ELLIPSE":return v.convertEllipseToPathData(this.node);case"CIRCLE":return v.convertCircleToPathData(this.node);case"RECT":return v.convertRectToPathData(this.node)}throw new Error(E+" cannot be converted to PATH.")},v.prototype.toGeometryShape=function(){var E,D,z,Z,ae,ve,we,Me,Ye,We,et,ut,lt,Et,In;switch(this.tagName()){case"RECT":return E=parseFloat(this.attr("x"))||0,D=parseFloat(this.attr("y"))||0,z=parseFloat(this.attr("width"))||0,Z=parseFloat(this.attr("height"))||0,new nt(E,D,z,Z);case"CIRCLE":return ae=parseFloat(this.attr("cx"))||0,ve=parseFloat(this.attr("cy"))||0,we=parseFloat(this.attr("r"))||0,new ir({x:ae,y:ve},we,we);case"ELLIPSE":return ae=parseFloat(this.attr("cx"))||0,ve=parseFloat(this.attr("cy"))||0,Me=parseFloat(this.attr("rx"))||0,Ye=parseFloat(this.attr("ry"))||0,new ir({x:ae,y:ve},Me,Ye);case"POLYLINE":return We=v.getPointsFromSvgNode(this),new bn(We);case"POLYGON":return(We=v.getPointsFromSvgNode(this)).length>1&&We.push(We[0]),new bn(We);case"PATH":return et=this.attr("d"),pt.isDataSupported(et)||(et=v.normalizePathData(et)),new pt(et);case"LINE":return ut=parseFloat(this.attr("x1"))||0,Et=parseFloat(this.attr("y1"))||0,lt=parseFloat(this.attr("x2"))||0,In=parseFloat(this.attr("y2"))||0,new at({x:ut,y:Et},{x:lt,y:In})}return this.getBBox()},A.findIntersection=function(E,D){var z=this.svg().node,Z=this.getBBox({target:D=D||z}),ae=Z.center();if(Z.intersectionWithLineFromCenterToPoint(E)){var ve,we=this.tagName();if("RECT"===we){var Me=new nt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),Ye=this.getTransformToElement(D),We=v.decomposeMatrix(Ye),et=z.createSVGTransform();et.setRotate(-We.rotation,ae.x,ae.y);var ut=v.transformRect(Me,et.matrix.multiply(Ye));ve=new nt(ut).intersectionWithLineFromCenterToPoint(E,We.rotation)}else if("PATH"===we||"POLYGON"===we||"POLYLINE"===we||"CIRCLE"===we||"ELLIPSE"===we){var Rn,At,jt,kt,rn,Et=("PATH"===we?this:this.convertToPath()).sample(),In=1/0,yn=[];for(Rn=0;Rn<Et.length;Rn++)jt=(jt=v.createSVGPoint((At=Et[Rn]).x,At.y)).matrixTransform(this.getTransformToElement(D)),(rn=(At=new de(jt)).distance(ae)+(kt=1.1*At.distance(E)))<In?(In=rn,yn=[{sample:At,refDistance:kt}]):rn<In+1&&yn.push({sample:At,refDistance:kt});yn.sort(function(An,Mn){return An.refDistance-Mn.refDistance}),yn[0]&&(ve=yn[0].sample)}return ve}},A.setAttribute=function(E,D){var z=this.node;if(null===D)return this.removeAttr(E),this;var Z=v.qualifyAttr(E);return Z.ns?z.setAttributeNS(Z.ns,E,D):"id"===E?z.id=D:z.setAttribute(E,D),this},v.createSvgDocument=function(E){if(E){const z=`<svg xmlns="${r.svg}" xmlns:xlink="${r.xlink}" version="1.1">${E}</svg>`,{documentElement:Z}=v.parseXML(z,{async:!1});return Z}const D=document.createElementNS(r.svg,"svg");return D.setAttributeNS(r.xmlns,"xmlns:xlink",r.xlink),D.setAttribute("version","1.1"),D},v.createSVGStyle=function(E){const{node:D}=v("style",{type:"text/css"},[v.createCDATASection(E)]);return D},v.createCDATASection=function(E=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(E)},v.idCounter=0,v.uniqueId=function(){return"v-"+ ++v.idCounter},v.toNode=function(E){return v.isV(E)?E.node:E.nodeName&&E||E[0]},v.ensureId=function(E){return(E=v.toNode(E)).id||(E.id=v.uniqueId())},v.sanitizeText=function(E){return(E||"").replace(/ /g,"\xa0")},v.isUndefined=function(E){return void 0===E},v.isString=function(E){return"string"==typeof E},v.isObject=function(E){return E&&"object"==typeof E},v.isArray=Array.isArray,v.parseXML=function(E,D){var z;D=D||{};try{var Z=new DOMParser;v.isUndefined(D.async)||(Z.async=D.async),z=Z.parseFromString(E,"text/xml")}catch(ae){z=void 0}if(!z||z.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+E);return z},v.qualifyAttr=function(E){if(-1!==E.indexOf(":")){var D=E.split(":");return{ns:r[D[0]],local:D[1]}}return{ns:null,local:E}},v.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,v.transformSeparatorRegex=/[ ,]+/,v.transformationListRegex=/^(\w+)\((.*)\)/,v.transformStringToMatrix=function(E){var D=v.createSVGMatrix(),z=E&&E.match(v.transformRegex);if(!z)return D;for(var Z=0,ae=z.length;Z<ae;Z++){var we=z[Z].match(v.transformationListRegex);if(we){var Me,Ye,We,et,ut,lt=v.createSVGMatrix(),Et=we[2].split(v.transformSeparatorRegex);switch(we[1].toLowerCase()){case"scale":Me=parseFloat(Et[0]),Ye=void 0===Et[1]?Me:parseFloat(Et[1]),lt=lt.scaleNonUniform(Me,Ye);break;case"translate":We=parseFloat(Et[0]),et=parseFloat(Et[1]),lt=lt.translate(We,et);break;case"rotate":ut=parseFloat(Et[0]),We=parseFloat(Et[1])||0,et=parseFloat(Et[2])||0,lt=0!==We||0!==et?lt.translate(We,et).rotate(ut).translate(-We,-et):lt.rotate(ut);break;case"skewx":ut=parseFloat(Et[0]),lt=lt.skewX(ut);break;case"skewy":ut=parseFloat(Et[0]),lt=lt.skewY(ut);break;case"matrix":lt.a=parseFloat(Et[0]),lt.b=parseFloat(Et[1]),lt.c=parseFloat(Et[2]),lt.d=parseFloat(Et[3]),lt.e=parseFloat(Et[4]),lt.f=parseFloat(Et[5]);break;default:continue}D=D.multiply(lt)}}return D},v.matrixToTransformString=function(E){return E||(E=!0),"matrix("+(void 0!==E.a?E.a:1)+","+(void 0!==E.b?E.b:0)+","+(void 0!==E.c?E.c:0)+","+(void 0!==E.d?E.d:1)+","+(void 0!==E.e?E.e:0)+","+(void 0!==E.f?E.f:0)+")"},v.parseTransformString=function(E){var D,z,Z;if(E){var ae=v.transformSeparatorRegex;if(E.trim().indexOf("matrix")>=0){var ve=v.transformStringToMatrix(E),we=v.decomposeMatrix(ve);Z=[we.scaleX,we.scaleY],z=[we.rotation];var Me=[];(0!==(D=[we.translateX,we.translateY])[0]||0!==D[1])&&Me.push("translate("+D+")"),(1!==Z[0]||1!==Z[1])&&Me.push("scale("+Z+")"),0!==z[0]&&Me.push("rotate("+z+")"),E=Me.join(" ")}else{var Ye=E.match(/translate\((.*?)\)/);Ye&&(D=Ye[1].split(ae));var We=E.match(/rotate\((.*?)\)/);We&&(z=We[1].split(ae));var et=E.match(/scale\((.*?)\)/);et&&(Z=et[1].split(ae))}}var ut=Z&&Z[0]?parseFloat(Z[0]):1;return{value:E,translate:{tx:D&&D[0]?parseInt(D[0],10):0,ty:D&&D[1]?parseInt(D[1],10):0},rotate:{angle:z&&z[0]?parseInt(z[0],10):0,cx:z&&z[1]?parseInt(z[1],10):void 0,cy:z&&z[2]?parseInt(z[2],10):void 0},scale:{sx:ut,sy:Z&&Z[1]?parseFloat(Z[1]):ut}}},v.deltaTransformPoint=function(E,D){return{x:D.x*E.a+D.y*E.c+0,y:D.x*E.b+D.y*E.d+0}},v.decomposeMatrix=function(E){var D=v.deltaTransformPoint(E,{x:0,y:1}),z=v.deltaTransformPoint(E,{x:1,y:0}),Z=180/i*a(D.y,D.x)-90,ae=180/i*a(z.y,z.x);return{translateX:E.e,translateY:E.f,scaleX:s(E.a*E.a+E.b*E.b),scaleY:s(E.c*E.c+E.d*E.d),skewX:Z,skewY:ae,rotation:Z}},v.matrixToScale=function(E){var D,z,Z,ae;return E?(D=v.isUndefined(E.a)?1:E.a,ae=v.isUndefined(E.d)?1:E.d,z=E.b,Z=E.c):D=ae=1,{sx:z?s(D*D+z*z):D,sy:Z?s(Z*Z+ae*ae):ae}},v.matrixToRotate=function(E){var D={x:0,y:1};return E&&(D=v.deltaTransformPoint(E,D)),{angle:De(yt(a(D.y,D.x))-90)}},v.matrixToTranslate=function(E){return{tx:E&&E.e||0,ty:E&&E.f||0}},v.isV=function(E){return E instanceof v},v.isVElement=v.isV,v.isSVGGraphicsElement=function(E){return!!E&&(E=v.toNode(E))instanceof SVGElement&&"function"==typeof E.getScreenCTM};var ge=v("svg").node;return v.createSVGMatrix=function(E){var D=ge.createSVGMatrix();for(var z in E)D[z]=E[z];return D},v.createSVGTransform=function(E){return v.isUndefined(E)?ge.createSVGTransform():(E instanceof SVGMatrix||(E=v.createSVGMatrix(E)),ge.createSVGTransformFromMatrix(E))},v.createSVGPoint=function(E,D){var z=ge.createSVGPoint();return z.x=E,z.y=D,z},v.transformRect=function(E,D){var z=ge.createSVGPoint();z.x=E.x,z.y=E.y;var Z=z.matrixTransform(D);z.x=E.x+E.width,z.y=E.y;var ae=z.matrixTransform(D);z.x=E.x+E.width,z.y=E.y+E.height;var ve=z.matrixTransform(D);z.x=E.x,z.y=E.y+E.height;var we=z.matrixTransform(D),Me=l(Z.x,ae.x,ve.x,we.x),Ye=f(Z.x,ae.x,ve.x,we.x),We=l(Z.y,ae.y,ve.y,we.y),et=f(Z.y,ae.y,ve.y,we.y);return new nt(Me,We,Ye-Me,et-We)},v.transformPoint=function(E,D){return new de(v.createSVGPoint(E.x,E.y).matrixTransform(D))},v.transformLine=function(E,D){return new at(v.transformPoint(E.start,D),v.transformPoint(E.end,D))},v.transformPolyline=function(E,D){var z=E instanceof bn?E.points:E;v.isArray(z)||(z=[]);for(var Z=[],ae=0,ve=z.length;ae<ve;ae++)Z[ae]=v.transformPoint(z[ae],D);return new bn(Z)},v.styleToObject=function(E){for(var D={},z=E.split(";"),Z=0;Z<z.length;Z++){var ve=z[Z].split("=");D[ve[0].trim()]=ve[1].trim()}return D},v.createSlicePathData=function(E,D,z,Z){var ae=2*i-1e-6,ve=E,we=D,Me=z,Ye=Z,We=(Ye<Me&&(We=Me,Me=Ye,Ye=We),Ye-Me),et=We<i?"0":"1",ut=g(Me),lt=m(Me),Et=g(Ye),In=m(Ye);return We>=ae?ve?"M0,"+we+"A"+we+","+we+" 0 1,1 0,"+-we+"A"+we+","+we+" 0 1,1 0,"+we+"M0,"+ve+"A"+ve+","+ve+" 0 1,0 0,"+-ve+"A"+ve+","+ve+" 0 1,0 0,"+ve+"Z":"M0,"+we+"A"+we+","+we+" 0 1,1 0,"+-we+"A"+we+","+we+" 0 1,1 0,"+we+"Z":ve?"M"+we*ut+","+we*lt+"A"+we+","+we+" 0 "+et+",1 "+we*Et+","+we*In+"L"+ve*Et+","+ve*In+"A"+ve+","+ve+" 0 "+et+",0 "+ve*ut+","+ve*lt+"Z":"M"+we*ut+","+we*lt+"A"+we+","+we+" 0 "+et+",1 "+we*Et+","+we*In+"L0,0Z"},v.mergeAttrs=function(E,D){for(var z in D)E[z]="class"===z?E[z]?E[z]+" "+D[z]:D[z]:"style"===z?v.isObject(E[z])&&v.isObject(D[z])?v.mergeAttrs(E[z],D[z]):v.isObject(E[z])?v.mergeAttrs(E[z],v.styleToObject(D[z])):v.isObject(D[z])?v.mergeAttrs(v.styleToObject(E[z]),D[z]):v.mergeAttrs(v.styleToObject(E[z]),v.styleToObject(D[z])):D[z];return E},v.annotateString=function(E,D,z){D=D||[];for(var ve,Me,Ye,Z=(z=z||{}).offset||0,ae=[],we=[],We=0;We<E.length;We++){Me=we[We]=E[We];for(var et=0;et<D.length;et++){var ut=D[et];We>=ut.start+Z&&We<ut.end+Z&&(v.isObject(Me)?Me.attrs=v.mergeAttrs(v.mergeAttrs({},Me.attrs),ut.attrs):Me=we[We]={t:E[We],attrs:ut.attrs},z.includeAnnotationIndices&&(Me.annotations||(Me.annotations=[])).push(et))}(Ye=we[We-1])?v.isObject(Me)&&v.isObject(Ye)?JSON.stringify(Me.attrs)===JSON.stringify(Ye.attrs)?ve.t+=Me.t:(ae.push(ve),ve=Me):v.isObject(Me)||v.isObject(Ye)?(ae.push(ve),ve=Me):ve=(ve||"")+Me:ve=Me}return ve&&ae.push(ve),ae},v.findAnnotationsAtIndex=function(E,D){var z=[];return E&&E.forEach(function(Z){Z.start<D&&D<=Z.end&&z.push(Z)}),z},v.findAnnotationsBetweenIndexes=function(E,D,z){var Z=[];return E&&E.forEach(function(ae){(D>=ae.start&&D<ae.end||z>ae.start&&z<=ae.end||ae.start>=D&&ae.end<z)&&Z.push(ae)}),Z},v.shiftAnnotations=function(E,D,z){return E&&E.forEach(function(Z){Z.start<D&&Z.end>=D?Z.end+=z:Z.start>=D&&(Z.start+=z,Z.end+=z)}),E},v.convertLineToPathData=function(E){return["M",(E=v(E)).attr("x1"),E.attr("y1"),"L",E.attr("x2"),E.attr("y2")].join(" ")},v.convertPolygonToPathData=function(E){var D=v.getPointsFromSvgNode(E);return 0===D.length?null:v.svgPointsToPath(D)+" Z"},v.convertPolylineToPathData=function(E){var D=v.getPointsFromSvgNode(E);return 0===D.length?null:v.svgPointsToPath(D)},v.svgPointsToPath=function(E){for(var D=0,z=E.length;D<z;D++)E[D]=E[D].x+" "+E[D].y;return"M "+E.join(" L")},v.getPointsFromSvgNode=function(E){var D=[],z=(E=v.toNode(E)).points;if(z)for(var Z=0,ae=z.numberOfItems;Z<ae;Z++)D.push(z.getItem(Z));return D},v.KAPPA=.551784,v.convertCircleToPathData=function(E){E=v(E);var D=parseFloat(E.attr("cx"))||0,z=parseFloat(E.attr("cy"))||0,Z=parseFloat(E.attr("r")),ae=Z*v.KAPPA;return["M",D,z-Z,"C",D+ae,z-Z,D+Z,z-ae,D+Z,z,"C",D+Z,z+ae,D+ae,z+Z,D,z+Z,"C",D-ae,z+Z,D-Z,z+ae,D-Z,z,"C",D-Z,z-ae,D-ae,z-Z,D,z-Z,"Z"].join(" ")},v.convertEllipseToPathData=function(E){E=v(E);var D=parseFloat(E.attr("cx"))||0,z=parseFloat(E.attr("cy"))||0,Z=parseFloat(E.attr("rx")),ae=parseFloat(E.attr("ry"))||Z,ve=Z*v.KAPPA,we=ae*v.KAPPA;return["M",D,z-ae,"C",D+ve,z-ae,D+Z,z-we,D+Z,z,"C",D+Z,z+we,D+ve,z+ae,D,z+ae,"C",D-ve,z+ae,D-Z,z+we,D-Z,z,"C",D-Z,z-we,D-ve,z-ae,D,z-ae,"Z"].join(" ")},v.convertRectToPathData=function(E){return E=v(E),v.rectToPath({x:parseFloat(E.attr("x"))||0,y:parseFloat(E.attr("y"))||0,width:parseFloat(E.attr("width"))||0,height:parseFloat(E.attr("height"))||0,rx:parseFloat(E.attr("rx"))||0,ry:parseFloat(E.attr("ry"))||0})},v.rectToPath=function(E){var z=E.x,Z=E.y,ae=E.width,ve=E.height,we=l(E.rx||E["top-rx"]||0,ae/2),Me=l(E.rx||E["bottom-rx"]||0,ae/2),Ye=l(E.ry||E["top-ry"]||0,ve/2),We=l(E.ry||E["bottom-ry"]||0,ve/2);return(we||Me||Ye||We?["M",z,Z+Ye,"v",ve-Ye-We,"a",Me,We,0,0,0,Me,We,"h",ae-2*Me,"a",Me,We,0,0,0,Me,-We,"v",-(ve-We-Ye),"a",we,Ye,0,0,0,-we,-Ye,"h",-(ae-2*we),"a",we,Ye,0,0,0,-we,Ye,"Z"]:["M",z,Z,"H",z+ae,"V",Z+ve,"H",z,"V",Z,"Z"]).join(" ")},v.normalizePathData=function(){var E="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",D=new RegExp("([a-z])["+E+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+E+"]*,?["+E+"]*)+)","ig"),z=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+E+"]*,?["+E+"]*","ig"),Z=Math,ae=Z.PI,ve=Z.sin,we=Z.cos,Me=Z.tan,Ye=Z.asin,We=Z.sqrt,et=Z.abs;function ut(At,jt,Ot,kt,rn,An){var Mn=.3333333333333333,tn=2/3;return[Mn*At+tn*Ot,Mn*jt+tn*kt,Mn*rn+tn*Ot,Mn*An+tn*kt,rn,An]}function lt(At,jt,Ot){return{x:At*we(Ot)-jt*ve(Ot),y:At*ve(Ot)+jt*we(Ot)}}function Et(At,jt,Ot,kt,rn,An,Mn,tn,tr,gn){var ft,Xt=120*ae/180,sn=ae/180*(+rn||0),Mt=[];if(gn)ti=gn[0],Sr=gn[1],$l=gn[2],Yl=gn[3];else{jt=(ft=lt(At,jt,-sn)).y;var ei=((At=ft.x)-(tn=(ft=lt(tn,tr,-sn)).x))/2,ci=(jt-(tr=ft.y))/2,Ua=ei*ei/(Ot*Ot)+ci*ci/(kt*kt);Ua>1&&(Ot*=Ua=We(Ua),kt*=Ua);var dg=Ot*Ot,hg=kt*kt,Bg=(An==Mn?-1:1)*We(et((dg*hg-dg*ci*ci-hg*ei*ei)/(dg*ci*ci+hg*ei*ei))),$l=Bg*Ot*ci/kt+(At+tn)/2,Yl=Bg*-kt*ei/Ot+(jt+tr)/2,ti=Ye(((jt-Yl)/kt).toFixed(9)),Sr=Ye(((tr-Yl)/kt).toFixed(9));(ti=At<$l?ae-ti:ti)<0&&(ti=2*ae+ti),(Sr=tn<$l?ae-Sr:Sr)<0&&(Sr=2*ae+Sr),Mn&&ti>Sr&&(ti-=2*ae),!Mn&&Sr>ti&&(Sr-=2*ae)}var pg=Sr-ti;if(et(pg)>Xt){var Yg=Sr,Xg=tn,Kg=tr;Mt=Et(tn=$l+Ot*we(Sr=ti+Xt*(Mn&&Sr>ti?1:-1)),tr=Yl+kt*ve(Sr),Ot,kt,rn,0,Mn,Xg,Kg,[Sr,Yg,$l,Yl])}pg=Sr-ti;var Jg=we(ti),Qg=ve(ti),Zg=we(Sr),qg=ve(Sr),Hg=Me(pg/4),jg=4/3*(Ot*Hg),zg=4/3*(kt*Hg),Ug=[At,jt],Ou=[At+jg*Qg,jt-zg*Jg],Gg=[tn+jg*qg,tr-zg*Zg],Wg=[tn,tr];if(Ou[0]=2*Ug[0]-Ou[0],Ou[1]=2*Ug[1]-Ou[1],gn)return[Ou,Gg,Wg].concat(Mt);for(var $g=[],ev=(Mt=[Ou,Gg,Wg].concat(Mt).join().split(",")).length,hs=0;hs<ev;hs++)$g[hs]=hs%2?lt(Mt[hs-1],Mt[hs],sn).y:lt(Mt[hs],Mt[hs+1],sn).x;return $g}function Rn(At){var jt=function yn(At){if((!Array.isArray(At)||!Array.isArray(At&&At[0]))&&(At=function In(At){if(!At)return null;var jt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Ot=[];return String(At).replace(D,function(kt,rn,An){var Mn=[],tn=rn.toLowerCase();for(An.replace(z,function(tr,gn){gn&&Mn.push(+gn)}),"m"===tn&&Mn.length>2&&(Ot.push([rn].concat(Mn.splice(0,2))),tn="l",rn="m"===rn?"l":"L");Mn.length>=jt[tn]&&(Ot.push([rn].concat(Mn.splice(0,jt[tn]))),jt[tn]););}),Ot}(At)),!At||!At.length)return[["M",0,0]];for(var tn,jt=[],Ot=0,kt=0,rn=0,An=0,tr=At.length,gn=0;gn<tr;gn++){var Xt=[];jt.push(Xt);var Mt,ft,sn=At[gn];if((tn=sn[0])!=tn.toUpperCase())switch(Xt[0]=tn.toUpperCase(),Xt[0]){case"A":Xt[1]=sn[1],Xt[2]=sn[2],Xt[3]=sn[3],Xt[4]=sn[4],Xt[5]=sn[5],Xt[6]=+sn[6]+Ot,Xt[7]=+sn[7]+kt;break;case"V":Xt[1]=+sn[1]+kt;break;case"H":Xt[1]=+sn[1]+Ot;break;case"M":for(rn=+sn[1]+Ot,An=+sn[2]+kt,Mt=sn.length,ft=1;ft<Mt;ft++)Xt[ft]=+sn[ft]+(ft%2?Ot:kt);break;default:for(Mt=sn.length,ft=1;ft<Mt;ft++)Xt[ft]=+sn[ft]+(ft%2?Ot:kt)}else for(var ei=sn.length,ci=0;ci<ei;ci++)Xt[ci]=sn[ci];switch(Xt[0]){case"Z":Ot=+rn,kt=+An;break;case"H":Ot=Xt[1];break;case"V":kt=Xt[1];break;case"M":rn=Xt[Xt.length-2],An=Xt[Xt.length-1],Ot=Xt[Xt.length-2],kt=Xt[Xt.length-1];break;default:Ot=Xt[Xt.length-2],kt=Xt[Xt.length-1]}}return jt}(At),Ot={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function kt(Mt,ft,ei){var ci,Ua;if(!Mt)return["C",ft.x,ft.y,ft.x,ft.y,ft.x,ft.y];switch(Mt[0]in{T:1,Q:1}||(ft.qx=null,ft.qy=null),Mt[0]){case"M":ft.X=Mt[1],ft.Y=Mt[2];break;case"A":Mt=0===parseFloat(Mt[1])||0===parseFloat(Mt[2])?["L",Mt[6],Mt[7]]:["C"].concat(Et.apply(0,[ft.x,ft.y].concat(Mt.slice(1))));break;case"S":"C"===ei||"S"===ei?(ci=2*ft.x-ft.bx,Ua=2*ft.y-ft.by):(ci=ft.x,Ua=ft.y),Mt=["C",ci,Ua].concat(Mt.slice(1));break;case"T":"Q"===ei||"T"===ei?(ft.qx=2*ft.x-ft.qx,ft.qy=2*ft.y-ft.qy):(ft.qx=ft.x,ft.qy=ft.y),Mt=["C"].concat(ut(ft.x,ft.y,ft.qx,ft.qy,Mt[1],Mt[2]));break;case"Q":ft.qx=Mt[1],ft.qy=Mt[2],Mt=["C"].concat(ut(ft.x,ft.y,Mt[1],Mt[2],Mt[3],Mt[4]));break;case"H":Mt=["L"].concat(Mt[1],ft.y);break;case"V":Mt=["L"].concat(ft.x,Mt[1])}return Mt}function rn(Mt,ft){if(Mt[ft].length>7){Mt[ft].shift();for(var ei=Mt[ft];ei.length;)An[ft]="A",Mt.splice(ft++,0,["C"].concat(ei.splice(0,6)));Mt.splice(ft,1),tr=jt.length}}for(var An=[],Mn="",tn="",tr=jt.length,gn=0;gn<tr;gn++){jt[gn]&&(Mn=jt[gn][0]),"C"!==Mn&&(An[gn]=Mn,gn>0&&(tn=An[gn-1])),jt[gn]=kt(jt[gn],Ot,tn),"A"!==An[gn]&&"C"===Mn&&(An[gn]="C"),rn(jt,gn);var Xt=jt[gn],sn=Xt.length;Ot.x=Xt[sn-2],Ot.y=Xt[sn-1],Ot.bx=parseFloat(Xt[sn-4])||Ot.x,Ot.by=parseFloat(Xt[sn-3])||Ot.y}return(!jt[0][0]||"M"!==jt[0][0])&&jt.unshift(["M",0,0]),jt}return function(At){return Rn(At).join(",").split(",").join(" ")}}(),v.namespace=r,v.g=p,v}(),kr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Lr=function(t){return t&&t.toString().split(" ").map(function(r){return r.substr(0,kr.classNamePrefix.length)!==kr.classNamePrefix&&(r=kr.classNamePrefix+r),r}).join(" ")},R=function(t){return t&&t.toString().split(" ").map(function(r){return r.substr(0,kr.classNamePrefix.length)===kr.classNamePrefix&&(r=r.substr(kr.classNamePrefix.length)),r}).join(" ")},W=function(t,r){for(var e={},n={},i=Pe.namespace.svg,a=r||i,s=document.createDocumentFragment(),l=[t,s,a];l.length>0;){a=l.pop();for(var f=l.pop(),g=l.pop(),m=0,v=g.length;m<v;m++){var A=g[m];if(!A.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var B=A.tagName;A.hasOwnProperty("namespaceURI")&&(a=A.namespaceURI);var Y=document.createElementNS(a,B),te=a===i,ue=te?Pe:mt,xe=A.attributes;xe&&ue(Y).attr(xe);var ge=A.style;if(ge&&mt(Y).css(ge),A.hasOwnProperty("className")){var E=A.className;te?Y.className.baseVal=E:Y.className=E}if(A.hasOwnProperty("textContent")&&(Y.textContent=A.textContent),A.hasOwnProperty("selector")){var D=A.selector;if(e[D])throw new Error("json-dom-parser: selector must be unique");e[D]=Y,ue(Y).attr("joint-selector",D)}if(A.hasOwnProperty("groupSelector")){var z=A.groupSelector;Array.isArray(z)||(z=[z]);for(var Z=0,ae=z.length;Z<ae;Z++){var ve=z[Z],we=n[ve];we||(we=n[ve]=[]),we.push(Y)}}f.appendChild(Y);var Me=A.children;Array.isArray(Me)&&l.push(Me,Y,a)}}return{fragment:s,selectors:e,groupSelectors:n}},ee=function(t){let r=0;if(0===t.length)return r;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return r},le=function(t,r,e){for(var i,n=Array.isArray(r)?r:r.split(e||"/"),a=0,s=n.length;a<s;){if(i=n[a++],Object(t)!==t||!(i in t))return;t=t[i]}return t},Te=function(t,r){return"string"!=typeof r&&"number"!=typeof r&&(r=String(r)),!("constructor"===r&&"function"==typeof t[r]||"__proto__"===r)},be=function(t,r,e,n){const i=Array.isArray(r)?r:r.split(n||"/"),a=i.length-1;let s=t,l=0;for(;l<a;l++){const f=i[l];if(!Te(s,f))return t;s=s[f]||(s[f]={})}return s[i[a]]=e,t},u=function(t,r,e){const n=Array.isArray(r)?r:r.split(e||"/"),i=n.length-1;let a=t,s=0;for(;s<i;s++){const l=n[s];if(!Te(a,l))return t;const f=a[l];if(!f)return t;a=f}return delete a[n[i]],t},_=function(t){return _.id=_.id||1,t.id=void 0===t.id?"j_"+_.id++:t.id,t.id},k=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},L=function(t){var r=t,e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);r=e}var i=r.target;if(i){var a=i.correspondingUseElement;a&&(r.target=a)}return r},U=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var r=0;t=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-r)),a=setTimeout(function(){e(n+i)},i);return r=n+i,a}}return function(e,n,...i){return t(void 0!==n?e.bind(n,...i):e)}}(),re=((r="undefined"!=typeof window)&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,r?t.bind(window):t),ye=function(t){return wn(t)&&"%"===t.slice(-1)},Oe=function(t,r){var n=parseFloat(t);if(Number.isNaN(n))return null;var a,i={};if(i.value=n,null==r)a="[A-Za-z]*";else if(Array.isArray(r)){if(0===r.length)return null;a=r.join("|")}else wn(r)&&(a=r);var s=function e(l){var f=new RegExp("(?:\\d+(?:\\.\\d+)*)("+l+")$").exec(t);return f?f[1]:null}(a);return null===s?null:(i.unit=s,i)},St=function(t){if(Object(t)!==t){var r=0;return isFinite(t)&&(r=+t),{top:r,right:r,bottom:r,left:r}}var e,n,i,a;return e=n=i=a=0,isFinite(t.vertical)&&(e=i=+t.vertical),isFinite(t.horizontal)&&(n=a=+t.horizontal),isFinite(t.top)&&(e=+t.top),isFinite(t.right)&&(n=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(a=+t.left),{top:e,right:n,bottom:i,left:a}},It={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var r=t*t,e=r*t;return 4*(t<.5?e:3*(t-r)+e-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var r=0,e=1;;r+=e,e/=2)if(t>=(7-4*r)/11){var n=(11-6*r-11*t)/4;return-n*n+e*e}},reverse:function(t){return function(r){return 1-t(1-r)}},reflect:function(t){return function(r){return.5*(r<.5?t(2*r):2-t(2-2*r))}},clamp:function(t,r,e){return r=r||0,e=e||1,function(n){var i=t(n);return i<r?r:i>e?e:i}},back:function(t){return t||(t=1.70158),function(r){return r*r*((t+1)*r-t)}},elastic:function(t){return t||(t=1.5),function(r){return Math.pow(2,10*(r-1))*Math.cos(20*Math.PI*t/3*r)}}},xr={number:function(t,r){var e=r-t;return function(n){return t+e*n}},object:function(t,r){var e=Object.keys(t);return function(n){var i,a,s={};for(i=e.length-1;-1!=i;i--)s[a=e[i]]=t[a]+(r[a]-t[a])*n;return s}},hexColor:function(t,r){var e=parseInt(t.slice(1),16),n=parseInt(r.slice(1),16),i=255&e,a=(255&n)-i,s=65280&e,l=(65280&n)-s,f=16711680&e,g=(16711680&n)-f;return function(m){return"#"+(1<<24|i+a*m&255|s+l*m&65280|f+g*m&16711680).toString(16).slice(1)}},unit:function(t,r){var e=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=e.exec(t),i=e.exec(r),a=i[1].indexOf("."),s=a>0?i[1].length-a-1:0,l=+i[1]-(t=+n[1]),f=n[2];return function(g){return(t+l*g).toFixed(s)+f}}},un={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return sr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return sr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var r=Number.isFinite(t.x)?t.x:2;return sr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[r,t.y]:r})},dropShadow:function(t){var r="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return sr(r)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var r=Number.isFinite(t.amount)?t.amount:1;return sr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-r),b:.7152-.7152*(1-r),c:.0722-.0722*(1-r),d:.2126-.2126*(1-r),e:.7152+.2848*(1-r),f:.0722-.0722*(1-r),g:.2126-.2126*(1-r),h:.0722+.9278*(1-r)})},sepia:function(t){var r=Number.isFinite(t.amount)?t.amount:1;return sr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-r),b:.769-.769*(1-r),c:.189-.189*(1-r),d:.349-.349*(1-r),e:.686+.314*(1-r),f:.168-.168*(1-r),g:.272-.272*(1-r),h:.534-.534*(1-r),i:.131+.869*(1-r)})},saturate:function(t){var r=Number.isFinite(t.amount)?t.amount:1;return sr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-r})},hueRotate:function(t){return sr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var r=Number.isFinite(t.amount)?t.amount:1;return sr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:r,amount2:1-r})},brightness:function(t){return sr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var r=Number.isFinite(t.amount)?t.amount:1;return sr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:r,amount2:.5-r/2})}},sr=function(t){var r=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(e){return e=e||{},t.replace(r,function(n){for(var i=Array.from(arguments),a=i.slice(1,4).find(function(f){return!!f}),s=a.split("."),l=e[s.shift()];void 0!==l&&s.length;)l=l[s.shift()];return void 0!==l?l:""})}},bt=O.assign,Vn=O.defaults,gi=O.defaultsDeep,jr=O.invokeMap||O.invoke,Ri=O.sortedIndexBy||O.sortedIndex,ko=O.uniqBy||O.uniq,Jt=O.clone,Qn=O.cloneDeep,vi=O.isEmpty,Lo=O.isEqual,vn=O.isFunction,ln=O.isPlainObject,Qt=O.toArray,Bs=O.groupBy,Lu=O.flattenDeep,Aa=O.without,Ru=O.difference,vs=O.union,pr=O.has,ur=O.result,lo=O.omit,oi=O.pick,Zn=O.forIn,Ma=O.camelCase,Hs=O.uniqueId,br=function(){if(O.mergeWith){var t=Array.from(arguments),r=t[t.length-1],e=vn(r)?r:co;return t.push(function(n,i){var a=e(n,i);return void 0!==a?a:Array.isArray(n)&&!Array.isArray(i)?i:void 0}),O.mergeWith.apply(this,t)}return O.merge.apply(this,arguments)},mn=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},an=function(t){return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===Object.prototype.toString.call(t)},wn=function(t){return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t)},co=function(){};var t,r,_r=c(71066);function js(t){t=ko(t);const r=Qt(t).reduce(function(e,n){return e[n.id]=n.clone(),e},{});return Qt(t).forEach(function(e){const n=r[e.id];if(n.isLink()){const s=n.source(),l=n.target();s.id&&r[s.id]&&n.prop("source/id",r[s.id].id),l.id&&r[l.id]&&n.prop("target/id",r[l.id].id)}const i=e.get("parent");i&&r[i]&&n.set("parent",r[i].id);const a=Qt(e.get("embeds")).reduce(function(s,l){return r[l]&&s.push(r[l].id),s},[]);vi(a)||n.set("embeds",a)}),r}const Wi={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},zs=Object.keys(Wi).map(t=>Wi[t]).join(""),mi="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",_e=/\s/g,He=new RegExp(`^(${mi}\\*)?([${zs}])([-+]{1,2}${mi})?$`,"g");function Ae(t){throw new Error(`Invalid calc() expression: ${t}`)}function ct(t,r){const e=He.exec(t.replace(_e,""));e||Ae(t),He.lastIndex=0;const[,n=1,i,a=0]=e,{x:s,y:l,width:f,height:g}=r;let m=0;switch(i){case Wi.width:m=f;break;case Wi.height:m=g;break;case Wi.x:m=s;break;case Wi.y:m=l;break;case Wi.minimum:m=Math.min(g,f);break;case Wi.maximum:m=Math.max(g,f);break;case Wi.diagonal:m=Math.sqrt(g*g+f*f)}return parseFloat(n)*m+function Vt(t){if(!t)return 0;const[r]=t;switch(r){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(a)}function cn(t){return"string"==typeof t&&t.includes("calc")}const _n="calc(".length;function Ro(t,r){let e=t,n=0;for(;;){let i=e.indexOf("calc(",n);if(-1===i)return e;let a=i+_n,s=1;e:for(;;){switch(e[a]){case"(":s++;break;case")":if(s--,0===s)break e;break;case void 0:Ae(e)}a++}let l=e.slice(i+_n,a);cn(l)&&(l=Ro(l,r));const f=String(ct(l,r));e=e.slice(0,i)+f+e.slice(a+1),n=i+f.length}}function fo(t,r){return function(e,n){var i=ye(e);e=parseFloat(e),i&&(e/=100);var a={};if(isFinite(e)){var s=i||e>=0&&e<=1?e*n[r]:Math.max(e+n[r],0);a[t]=s}return a}}function X(t,r,e){return function(n,i){var s,a=ye(n);if(n=parseFloat(n),a&&(n/=100),isFinite(n)){var l=i[e]();s=a||n>0&&n<1?l[t]+i[r]*n:l[t]+n}var f=de();return f[t]=s||0,f}}function se(t,r,e){return function(n,i){var a;a="middle"===n?i[r]/2:n===e?i[r]:isFinite(n)?n>-1&&n<1?-i[r]*n:-n:ye(n)?i[r]*parseFloat(n)/100:0;var s=de();return s[t]=-(i[t]+a),s}}function me(t,r){var e="joint-shape",n=r&&r.resetOffset;return function(i,a,s){var l=mt(s),f=l.data(e);if(!f||f.value!==i){var g=t(i);f={value:i,shape:g,shapeBBox:g.bbox()},l.data(e,f)}var m=f.shape.clone(),v=f.shapeBBox.clone(),A=v.origin(),B=a.origin();v.x=B.x,v.y=B.y;var Y=a.maxRectScaleToFit(v,B);return m.scale(0===v.width||0===a.width?1:Y.sx,0===v.height||0===a.height?1:Y.sy,A),n&&m.translate(-A.x,-A.y),m}}function Ve(t){var e=me(function r(n){return new pt(Pe.normalizePathData(n))},t);return function(n,i,a){return{d:e(n,i,a).serialize()}}}function Se(t){var r=me(bn,t);return function(e,n,i){return{points:r(e,n,i).serialize()}}}function je(t,r){var e=new de(1,0);return function(n){var i,a,s=this[t](n);return s?(a=r.rotate?s.vector().vectorAngle(e):0,i=s.start):(i=this.path.start,a=0),0===a?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+a+")"}}}function Ne(t){return function(e,n,i){const a=Pe(i);a.attr(t)!==e&&a.attr(t,e)}}function qe(t,r,e){return void 0!==e.text}function rt(){return this.model.isLink()}function Tt(t){var r={},e=t.stroke;"string"==typeof e&&(r.stroke=e,r.fill=e);var n=t.strokeOpacity;return void 0===n&&(n=t["stroke-opacity"]),void 0===n&&(n=t.opacity),void 0!==n&&(r["stroke-opacity"]=n,r["fill-opacity"]=n),r}function Pt(t){const{paper:r}=this;return`url(#${"pattern"===t.type?r.definePattern(t):r.defineGradient(t)})`}const Qe={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Ne("href")},xlinkHref:{set:Ne("xlink:href")},filter:{qualify:ln,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:ln,set:Pt},stroke:{qualify:ln,set:Pt},sourceMarker:{qualify:ln,set:function(t,r,e,n){return t=bt(Tt(n),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:ln,set:function(t,r,e,n){return t=bt(Tt(n),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:ln,set:function(t,r,e,n){return t=bt(Tt(n),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,r,e){return!e.textWrap||!ln(e.textWrap)},set:function(t,r,e,n){var i=mt(e),a="joint-text",s=i.data(a),l=oi(n,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:f}=l;cn(f)&&(l.x=Ro(f,r));var g=l.fontSize=n["font-size"]||n.fontSize,m=JSON.stringify([t,l]);if(void 0===s||s!==m){g&&e.setAttribute("font-size",g);var v=l.textPath;if(mn(v)){var A=v.selector;if("string"==typeof A){var B=this.findBySelector(A)[0];B instanceof SVGPathElement&&(l.textPath=bt({"xlink:href":"#"+B.id},v))}}Pe(e).text(""+t,l),i.data(a,m)}}},textWrap:{qualify:ln,set:function(t,r,e,n){var i=t.width||0,a={};a.width=ye(i)?r.width*parseFloat(i)/100:i<=0?r.width+i:i;var s=t.height||0;a.height=ye(s)?r.height*parseFloat(s)/100:s<=0?r.height+s:s;var l,f=t.text;void 0===f&&(f=n.text),l=void 0!==f?function(t,r,e={},n={}){var i=r.width,a=r.height,s=n.svgDocument||Pe("svg").node,l=Pe("tspan").node,f=Pe("text").attr(e).append(l).node,g=document.createTextNode("");f.style.opacity=0,f.style.display="block",l.style.display="block",l.appendChild(g),s.appendChild(f),n.svgDocument||document.body.appendChild(s);var m=n.separator||" ",v=n.eol||"\n",A=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,B=n.maxLineCount;an(B)||(B=1/0);for(var xe,ge,E,Y=t.split(m),te=[],ue=[],D=0,z=0,Z=Y.length;D<Z;D++){var ae=Y[D];if(ae){var ve=!1;if(v&&ae.indexOf(v)>=0){if(ae.length>1){for(var we=ae.split(v),Me=0,Ye=we.length-1;Me<Ye;Me++)we.splice(2*Me+1,0,v);Y.splice(D,1,...we.filter(Ot=>""!==Ot)),D--,Z=Y.length;continue}ue[++z]="",ve=!0}if(!ve)if(g.data=ue[z]?ue[z]+" "+ae:ae,l.getComputedTextLength()<=i)ue[z]=g.data,(xe||ge)&&(te[z++]=!0,xe=0,ge=0);else{if(!ue[z]||xe){var We=!!xe;if(xe=ae.length-1,We||!xe){if(!xe){if(!ue[z]){ue=[];break}Y.splice(D,2,ae+Y[D+1]),Z--,te[z++]=!0,D--;continue}Y[D]=ae.substring(0,xe),Y[D+1]=ae.substring(xe)+(void 0===Y[D+1]?"":Y[D+1])}else{if(ge)Y.splice(D,2,Y[D]+Y[D+1]),ge=0;else{var et=ae.search(A);et>-1&&et!==ae.length-1&&0!==et&&(ge=et+1,xe=0),Y.splice(D,1,ae.substring(0,ge||xe),ae.substring(ge||xe)),Z++}z&&!te[z-1]&&z--}D--;continue}z++,D--}var ut=null;if(ue.length>B)ut=B-1;else if(void 0!==a){var lt;void 0===E&&(E=(lt="auto"===e.lineHeight?{value:1.5,unit:"em"}:Oe(e.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===lt.unit&&(E*=f.getBBox().height)),E*ue.length>a&&(ut=Math.floor(a/E)-1)}if(null!==ut){ue.splice(ut+1);var Et=n.ellipsis;if(!Et||ut<0)break;"string"!=typeof Et&&(Et="\u2026");var In=ue[ut];if(!In&&!ve)break;var Rn,At,yn=In.length;do{if(At=In[yn],Rn=In.substring(0,yn),At?At.match(m)&&(Rn+=At):Rn+="string"==typeof m?m:" ",g.data=Rn+=Et,l.getComputedTextLength()<=i){ue[ut]=Rn;break}yn--}while(yn>=0);break}}}return n.svgDocument?s.removeChild(f):document.body.removeChild(s),ue.join(v)}(""+f,a,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":n["font-size"]||n.fontSize,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",Qe.text.set.call(this,l,r,e,n)}},title:{qualify:function(t,r){return r instanceof SVGElement},set:function(t,r,e){var n=mt(e),i="joint-title",a=n.data(i);if(void 0===a||a!==t){n.data(i,t);var s=e.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=t;else{var l=document.createElementNS(e.namespaceURI,"title");l.textContent=t,e.insertBefore(l,s)}}}},lineHeight:{qualify:qe},textVerticalAnchor:{qualify:qe},textPath:{qualify:qe},annotations:{qualify:qe},eol:{qualify:qe},displayEmpty:{qualify:qe},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:ln,set:function(t,r,e){mt(e).css(t)}},html:{set:function(t,r,e){mt(e).html(t+"")}},ref:{},refX:{position:X("x","width","origin")},refY:{position:X("y","height","origin")},refDx:{position:X("x","width","corner")},refDy:{position:X("y","height","corner")},refWidth:{set:fo("width","width")},refHeight:{set:fo("height","height")},refRx:{set:fo("rx","width")},refRy:{set:fo("ry","height")},refRInscribed:{set:function(t){var r=fo("r","width"),e=fo("r","height");return function(n,i){return(i.height>i.width?r:e)(n,i)}}()},refRCircumscribed:{set:function(t,r){var e=ye(t);t=parseFloat(t),e&&(t/=100);var i,n=Math.sqrt(r.height*r.height+r.width*r.width);return isFinite(t)&&(i=e||t>=0&&t<=1?t*n:Math.max(t+n,0)),{r:i}}},refCx:{set:fo("cx","width")},refCy:{set:fo("cy","height")},xAlignment:{offset:se("x","width","right")},yAlignment:{offset:se("y","height","bottom")},resetOffset:{offset:function(t,r){return t?{x:-r.x,y:-r.y}:{x:0,y:0}}},refDResetOffset:{set:Ve({resetOffset:!0})},refDKeepOffset:{set:Ve({resetOffset:!1})},refPointsResetOffset:{set:Se({resetOffset:!0})},refPointsKeepOffset:{set:Se({resetOffset:!1})},connection:{qualify:rt,set:function({stubs:t=0}){let r;if(isFinite(t)&&0!==t){let e;e=t<0?(this.getConnectionLength()+t)/2:t;const n=this.getConnection(),i=n.divideAtLength(e),a=n.divideAtLength(-e);i&&a&&(r=`${i[0].serialize()} ${a[1].serialize()}`)}return{d:r||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:rt,set:je("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:rt,set:je("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:rt,set:je("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:rt,set:je("getTangentAtRatio",{rotate:!1})}};Qe["xlink:href"]=Qe.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{Qe[t]={qualify:cn,set:function(e,n){return{[t]:Ro(e,n)}}}}),Qe.refR=Qe.refRInscribed,Qe.refD=Qe.refDResetOffset,Qe.refPoints=Qe.refPointsResetOffset,Qe.atConnectionLength=Qe.atConnectionLengthKeepGradient,Qe.atConnectionRatio=Qe.atConnectionRatioKeepGradient,Qe.refX2=Qe.refX,Qe.refY2=Qe.refY,Qe.refWidth2=Qe.refWidth,Qe.refHeight2=Qe.refHeight,Qe["ref-x"]=Qe.refX,Qe["ref-y"]=Qe.refY,Qe["ref-dy"]=Qe.refDy,Qe["ref-dx"]=Qe.refDx,Qe["ref-width"]=Qe.refWidth,Qe["ref-height"]=Qe.refHeight,Qe["x-alignment"]=Qe.xAlignment,Qe["y-alignment"]=Qe.yAlignment;const Zt=Qe,qt=_r.Model.extend({constructor:function(t,r){var e,n=t||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Hs("c"),this.attributes={},r&&r.collection&&(this.collection=r.collection),r&&r.parse&&(n=this.parse(n,r)||{}),(e=ur(this,"defaults"))&&(n=br({},e,n)),this.set(n,r),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,r,e){throw new Error("Must define a translate() method.")},toJSON:function(){const r=ur(this.constructor.prototype,"defaults").attrs||{},n={};Zn(this.attributes.attrs,function(a,s){const l=r[s];Zn(a,function(f,g){mn(f)&&!Array.isArray(f)?Zn(f,function(m,v){(!l||!l[g]||!Lo(l[g][v],m))&&(n[s]=n[s]||{},(n[s][g]||(n[s][g]={}))[v]=m)}):(!l||!Lo(l[g],f))&&(n[s]=n[s]||{},n[s][g]=f)})});const i=Qn(lo(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(t){const r=this.getIdAttribute();(!t||!(r in t))&&this.set(r,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=16*Math.random()|0;return("x"===t?r:3&r|8).toString(16)})},processPorts:function(){var t=this.ports,r={};Zn(this.get("attrs"),function(a,s){a&&a.port&&(void 0!==a.port.id?r[a.port.id]=a.port:r[a.port]={id:a.port})});var e={};Zn(t,function(a,s){r[s]||(e[s]=!0)}),this.graph&&!vi(e)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(a){e[a.get("target").port]&&a.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(a){e[a.get("source").port]&&a.remove()})),this.ports=r},remove:function(t={}){const{graph:r,collection:e}=this;if(!r)return e&&e.remove(this,t),this;r.startBatch("remove");const n=this.getParentCell();n&&n.unembed(this,t);const i=this.getEmbeddedCells();for(let a=0,s=i.length;a<s;a++){const l=i[a];l&&l.remove(t)}return this.trigger("remove",this,r.attributes.cells,t),r.stopBatch("remove"),this},toFront:function(t){var r=this.graph;if(r){t=t||{};var n,e=r.maxZIndex();t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):n=[this],e=e-n.length+1;var i=r.get("cells"),a=i.indexOf(this)!==i.length-n.length;a||(a=n.some(function(s,l){return s.get("z")!==e+l})),a&&(this.startBatch("to-front"),e+=n.length,n.forEach(function(s,l){s.set("z",e+l,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var r=this.graph;if(r){t=t||{};var n,e=r.minZIndex();t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):n=[this];var a=0!==r.get("cells").indexOf(this);a||(a=n.some(function(s,l){return s.get("z")!==e+l})),a&&(this.startBatch("to-back"),e-=n.length,n.forEach(function(s,l){s.set("z",e+l,t)}),this.stopBatch("to-back"))}return this},parent:function(t,r){return void 0===t?this.get("parent"):this.set("parent",t,r)},embed:function(t,r){const e=Array.isArray(t)?t:[t];if(!this.canEmbed(e))throw new Error("Recursive embedding not allowed.");return this._embedCells(e,r),this},unembed:function(t,r){const e=Array.isArray(t)?t:[t];return this._unembedCells(e,r),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(e=>this!==e&&!this.isEmbeddedIn(e))},_embedCells:function(t,r){const e="embed";this.startBatch(e);const n=bt([],this.get("embeds"));t.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,r)}),this.set("embeds",ko(n),r),this.stopBatch(e)},_unembedCells:function(t,r){const e="unembed";this.startBatch(e),t.forEach(n=>n.unset("parent",r)),this.set("embeds",Aa(this.get("embeds"),...t.map(n=>n.id)),r),this.stopBatch(e)},getParentCell:function(){var t=this.parent(),r=this.graph;return t&&r&&r.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var r=this.getParentCell();r;)t.push(r),r=r.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var r;if(t.deep)if(t.breadthFirst){r=[];for(var e=this.getEmbeddedCells();e.length>0;){var n=e.shift();r.push(n),e.push.apply(e,n.getEmbeddedCells())}}else(r=this.getEmbeddedCells()).forEach(function(i){r.push.apply(r,i.getEmbeddedCells(t))});else r=Qt(this.get("embeds")).map(this.graph.getCell,this.graph);return r}return[]},isEmbeddedIn:function(t,r){var e=wn(t)?t:t.id,n=this.parent();if(r=Vn({deep:!0},r),this.graph&&r.deep){for(;n;){if(n===e)return!0;n=this.graph.getCell(n).parent()}return!1}return n===e},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return Qt(js([this].concat(this.getEmbeddedCells({deep:!0}))));var r=_r.Model.prototype.clone.apply(this,arguments);return r.set(this.getIdAttribute(),this.generateId()),r.unset("embeds"),r.unset("parent"),r},prop:function(t,r,e){var n="/",i=wn(t);if(i||Array.isArray(t)){if(arguments.length>1){var a,s;i?s=(a=t).split("/"):(a=t.join(n),s=t.slice());var l=s[0],f=s.length;if((e=e||{}).propertyPath=a,e.propertyValue=r,e.propertyPathArray=s,1===f)return this.set(l,r,e);for(var g={},m=g,v=l,A=1;A<f;A++){var B=s[A],Y=Number.isFinite(i?Number(B):B);m=m[v]=Y?[]:{},v=B}g=be(g,s,r,"/");var te=br({},this.attributes);e.rewrite&&u(te,a,"/");var ue=br(te,g);return this.set(l,ue[l],e)}return le(this.attributes,t,n)}return this.set(br({},this.attributes,t),r)},removeProp:function(t,r){r=r||{};var e=Array.isArray(t)?t:t.split("/"),n=e[0];if("attrs"===n&&(r.dirty=!0),1===e.length)return this.unset(t,r);var i=e.slice(1),a=Qn(this.get(n));return u(a,i,"/"),this.set(n,a,r)},attr:function(t,r,e){var n=Array.from(arguments);return 0===n.length?this.get("attrs"):(n[0]=Array.isArray(t)?["attrs"].concat(t):wn(t)?"attrs/"+t:{attrs:t},this.prop.apply(this,n))},removeAttr:function(t,r){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,r)},transition:function(t,r,e,n){n=n||"/",e=bt({duration:100,delay:10,timingFunction:It.linear,valueFunction:xr.number},e);var s,a=0,l=function(v){var A,B,Y;(B=(v-=a=a||v)/e.duration)<1?this._transitionIds[t]=A=U(l):(B=1,delete this._transitionIds[t]),Y=s(e.timingFunction(B)),e.transitionId=A,this.prop(t,Y,e),A||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:f}=this;let g;return g=setTimeout(v=>{f[t]&&(f[t]=Aa(f[t],g),0===f[t].length&&delete f[t]),this.stopPendingTransitions(t,n),s=e.valueFunction(le(this.attributes,t,n),r),this._transitionIds[t]=U(v),this.trigger("transition:start",this,t)},e.delay,l),f[t]||(f[t]=[]),f[t].push(g),g},getTransitions:function(){return vs(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,r="/"){const{_scheduledTransitionIds:e={}}=this;let n=Object.keys(e);if(t){const i=t.split(r);n=n.filter(a=>Lo(i,a.split(r).slice(0,i.length)))}return n.forEach(i=>{e[i].forEach(s=>clearTimeout(s)),delete e[i]}),this},stopPendingTransitions(t,r="/"){const{_transitionIds:e={}}=this;let n=Object.keys(e);if(t){const i=t.split(r);n=n.filter(a=>Lo(i,a.split(r).slice(0,i.length)))}n.forEach(i=>{re(e[i]),delete e[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,r="/"){return this.stopScheduledTransitions(t,r),this.stopPendingTransitions(t,r),this},addTo:function(t,r){return t.addCell(this,r),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,r){return this.graph&&this.graph.startBatch(t,bt({},r,{cell:this})),this},stopBatch:function(t,r){return this.graph&&this.graph.stopBatch(t,bt({},r,{cell:this})),this},getChangeFlag:function(t){var r=0;if(!t)return r;for(var e in t)!t.hasOwnProperty(e)||!this.hasChanged(e)||(r|=t[e]);return r},angle:function(){return 0},position:function(){return new de(0,0)},getPointFromConnectedLink:function(){return new de},getBBox:function(){return new nt(0,0,0,0)},getPointRotatedAroundCenter(t,r,e){const n=new de(r,e);return t&&n.rotate(this.getBBox().center(),t),n},getAbsolutePointFromRelative(t,r){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,r))},getRelativePointFromAbsolute(t,r){return this.getPointRotatedAroundCenter(this.angle(),t,r).difference(this.position())}},{getAttributeDefinition:function(t){var r=this.attributes;return r&&r[t]||Zt[t]},define:function(t,r,e,n){e=bt({defaults:gi({type:t},r,this.prototype.defaults)},e);var i=this.extend(e,n);return"undefined"!=typeof joint&&pr(joint,"shapes")&&be(joint.shapes,t,i,"."),i}}),gt=qt.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,r,e){return void 0===t?Jt(this.get("source")):t instanceof qt?((n=Jt(r)||{}).id=t.id,this.set("source",n,e)):ln(t)?this.set("source",n=t,r):((n=Jt(r)||{}).x=t.x,n.y=t.y,this.set("source",n,e));var n},target:function(t,r,e){return void 0===t?Jt(this.get("target")):t instanceof qt?((n=Jt(r)||{}).id=t.id,this.set("target",n,e)):ln(t)?this.set("target",n=t,r):((n=Jt(r)||{}).x=t.x,n.y=t.y,this.set("target",n,e));var n},router:function(t,r,e){if(void 0===t){var n=this.get("router");return n?"object"==typeof n?Jt(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i="object"==typeof t||"function"==typeof t;return this.set("router",i?t:{name:t,args:r},i?r:e)},connector:function(t,r,e){if(void 0===t){var n=this.get("connector");return n?"object"==typeof n?Jt(n):n:this.get("smooth")?{name:"smooth"}:null}var i="object"==typeof t||"function"==typeof t;return this.set("connector",i?t:{name:t,args:r},i?r:e)},label:function(t,r,e){var n=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=n.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],r,e)},labels:function(t,r){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,r))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,r,e){if(!r)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1),n.splice(t,0,r),this.labels(n,e)},appendLabel:function(t,r){return this.insertLabel(-1,t,r)},removeLabel:function(t,r){var e=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,e.splice(t,1),this.labels(e,r)},vertex:function(t,r,e){var n=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=n.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(r);return this.prop(["vertices",t],i,e)},vertices:function(t,r){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var e=[],n=0;n<t.length;n++){var i=t[n],a=this._normalizeVertex(i);e.push(a)}return this.set("vertices",e,r)},insertVertex:function(t,r,e){if(!r)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1);var a=this._normalizeVertex(r);return n.splice(t,0,a),this.vertices(n,e)},removeVertex:function(t,r){var e=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,e.splice(t,1),this.vertices(e,r)},_normalizeVertex:function(t){return ln(t)?t:{x:t.x,y:t.y}},translate:function(t,r,e){return(e=e||{}).translateBy=e.translateBy||this.id,e.tx=t,e.ty=r,this.applyToPoints(function(n){return{x:(n.x||0)+t,y:(n.y||0)+r}},e)},scale:function(t,r,e,n){return this.applyToPoints(function(i){return de(i).scale(t,r,e).toJSON()},n)},applyToPoints:function(t,r){if(!vn(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var e={},{source:n,target:i}=this.attributes;n.id||(e.source=t(n)),i.id||(e.target=t(i));var a=this.vertices();return a.length>0&&(e.vertices=a.map(t)),this.set(e,r)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new de(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new de(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(de),this.getTargetPoint()];return new bn(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var r;if(this.graph){var e=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();e&&n&&(r=e===n||e.isEmbeddedIn(n)?n:n.isEmbeddedIn(e)?e:this.graph.getCommonAncestor(e,n)),i&&(!r||r.id!==i.id)&&i.unembed(this,t),r&&r.embed(this,t)}return r},hasLoop:function(t){t=t||{};var{source:r,target:e}=this.attributes,n=r.id,i=e.id;if(!n||!i)return!1;var a=n===i;if(!a&&t.deep&&this.graph){var s=this.getSourceCell(),l=this.getTargetCell();a=s.isEmbeddedIn(l)||l.isEmbeddedIn(s)}return a},getSourceCell:function(){const{graph:t,attributes:r}=this;var e=r.source;return e&&e.id&&t&&t.getCell(e.id)||null},getSourceElement:function(){var t=this,r={};do{if(r[t.id])return null;r[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:r}=this;var e=r.target;return e&&e.id&&t&&t.getCell(e.id)||null},getTargetElement:function(){var t=this,r={};do{if(r[t.id])return null;r[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var r=[this,this.getSourceElement(),this.getTargetElement()].filter(function(e){return!!e});t=this.graph.getCommonAncestor.apply(this.graph,r)}return t||null},isRelationshipEmbeddedIn:function(t){var r=wn(t)||an(t)?t:t.id,e=this.getRelationshipAncestor();return!!e&&(e.id===r||e.isEmbeddedIn(r))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},r={};return r.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,r.position=t.position,r.attrs=t.attrs,r.size=t.size,r}},{endsEqual:function(t,r){return t.id===r.id&&(t.port===r.port||!t.port&&!r.port)}});function Un(t,r,e){var n=t.toJSON();return n.angle=r||0,Vn({},e,n)}function Yn(t,r,e){return t.map(function(n,i,a){var s=this.pointAt((i+.5)/a.length);return(n.dx||n.dy)&&s.offset(n.dx||0,n.dy||0),Un(s.round(),0,n)},Vr(r,e))}function Cr(t,r,e,n){var i=r.center(),a=r.width/r.height,s=r.topMiddle(),l=ir.fromRect(r);return t.map(function(f,g,m){var v=e+n(g,m.length),A=s.clone().rotate(i,-v).scale(a,1,i),B=f.compensateRotation?-l.tangentTheta(A):0;return(f.dx||f.dy)&&A.offset(f.dx||0,f.dy||0),f.dr&&A.move(i,f.dr),Un(A.round(),B,f)})}function Pn(t,r){var e=r.x;wn(e)&&(e=parseFloat(e)/100*t.width);var n=r.y;return wn(n)&&(n=parseFloat(n)/100*t.height),Yr(e||0,n||0)}const ta=function(t,r,e){return t.map(Pn.bind(null,r))},ho=function(t,r,e){return e.fn(t,r,e)},zr=function(t,r,e){return Yn(t,Pn(r,e.start||r.origin()),Pn(r,e.end||r.corner()))},ms=function(t,r,e){return Yn(t,r.origin(),r.bottomLeft())},Oa=function(t,r,e){return Yn(t,r.topRight(),r.corner())},Us=function(t,r,e){return Yn(t,r.origin(),r.topRight())},Bf=function(t,r,e){return Yn(t,r.bottomLeft(),r.corner())},Hf=function(t,r,e){var i=e.step||360/t.length;return Cr(t,r,e.startAngle||0,function(a){return a*i})},jf=function(t,r,e){var i=e.step||20;return Cr(t,r,e.startAngle||0,function(a,s){return(a+.5-s/2)*i})};function $i(t,r){return gi({},t,r,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function ys(t,r,e,n){n=Vn({},n,{offset:15});var s,l,f,g,i=r.center().theta(t),a=Gs(r),m=n.offset,v=0;i<a[1]||i>a[2]?(f=".3em",s=m,l=0,g="start"):i<a[0]?(f="0",s=0,l=-m,e?(v=-90,g="start"):g="middle"):i<a[3]?(f=".3em",s=-m,l=0,g="end"):(f=".6em",s=0,l=m,e?(v=90,g="start"):g="middle");var A=Math.round;return $i({x:A(s),y:A(l),angle:v,attrs:{".":{y:f,"text-anchor":g}}})}function Gs(t){var r=t.center(),e=r.theta(t.origin()),n=r.theta(t.bottomLeft()),i=r.theta(t.corner());return[e,r.theta(t.topRight()),i,n]}function Kl(t,r,e,n){var a,s,l,f,i=r.center().theta(t),g=(n=Vn({},n,{offset:15})).offset,m=0,v=Gs(r);i<v[1]||i>v[2]?(l=".3em",a=-g,s=0,f="end"):i<v[0]?(l=".6em",a=0,s=g,e?(m=90,f="start"):f="middle"):i<v[3]?(l=".3em",a=g,s=0,f="start"):(l="0em",a=0,s=-g,e?(m=-90,f="start"):f="middle");var A=Math.round;return $i({x:A(a),y:A(s),angle:m,attrs:{".":{y:l,"text-anchor":f}}})}function Nu(t,r,e){e=Vn({},e,{offset:20});var f,n=Yr(0,0),i=-t.theta(n),a=i,s=t.clone().move(n,e.offset).difference(t).round(),l=".3em";(i+90)%180==0?(f=r?"end":"middle",!r&&-270===i&&(l="0em")):i>-270&&i<-90?(f="start",a=i-180):f="end";var g=Math.round;return $i({x:g(s.x),y:g(s.y),angle:r?a:0,attrs:{".":{y:l,"text-anchor":f}}})}const zf=function(t,r,e){return $i(e,r)},Uf=function(t,r,e){return $i(e,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},wr=function(t,r,e){return $i(e,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Ur=function(t,r,e){return $i(e,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Gf=function(t,r,e){return $i(e,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Wf=function(t,r,e){return ys(t,r,!0,e)},Jl=function(t,r,e){return ys(t,r,!1,e)},$f=function(t,r,e){return Kl(t,r,!0,e)},Du=function(t,r,e){return Kl(t,r,!1,e)},xs=function(t,r,e){return Nu(t.difference(r.center()),!1,e)},Fu=function(t,r,e){return Nu(t.difference(r.center()),!0,e)};var ka=function(t){var r=Qn(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=C,this.portLabelLayoutNamespace=w,this._init(r)};ka.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(r){return r.group===t})},getGroupPortsMetrics:function(t,r){var e=this.getGroup(t),n=this.getPortsByGroup(t),i=e.position||{},a=i.name,s=this.portLayoutNamespace;s[a]||(a="left");var l=i.args||{},f=n.map(function(v){return v&&v.position&&v.position.args}),g=s[a](f,r,l),m={ports:n,result:[]};return Qt(g).reduce(function(v,A,B){var Y=v.ports[B];return v.result.push({portId:Y.id,portTransformation:A,labelTransformation:this._getPortLabelLayout(Y,de(A),r),portAttrs:Y.attrs,portSize:Y.size,labelSize:Y.label.size}),v}.bind(this),m),m.result},_getPortLabelLayout:function(t,r,e){var n=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return n[i]?n[i](r,e,t.label.position.args):null},_init:function(t){if(mn(t.groups))for(var r=Object.keys(t.groups),e=0,n=r.length;e<n;e++){var i=r[e];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var a=Qt(t.items),s=0,l=a.length;s<l;s++)this.ports.push(this._evaluatePort(a[s]))},_evaluateGroup:function(t){return br(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var r=bt({},t),e=this.getGroup(t.group);return r.markup=r.markup||e.markup,r.attrs=br({},e.attrs,r.attrs),r.position=this._createPositionNode(e,r),r.label=br({},e.label,this._getLabel(r)),r.z=this._getZIndex(e,r),r.size=bt({},e.size,r.size),r},_getZIndex:function(t,r){return an(r.z)?r.z:an(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,r){return br({name:"left",args:{}},t.position,{args:r.args})},_getPosition:function(t,r){var n,e={};vn(t)?(n="fn",e.fn=t):wn(t)?n=t:void 0===t?n=r?"left":null:Array.isArray(t)?(n="absolute",e.x=t[0],e.y=t[1]):mn(t)&&(n=t.name,bt(e,t.args));var i={args:e};return n&&(i.name=n),i},_getLabel:function(t,r){var e=t.label||{},n=e;return n.position=this._getPosition(e.position,r),n}};const bs={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},r={};Qt(t.items).forEach(function(l){r[l.id]=!0});var e=this.previous("ports")||{},n={};Qt(e.items).forEach(function(l){r[l.id]||(n[l.id]=!0)});var i=this.graph;i&&!vi(n)&&(i.getConnectedLinks(this,{inbound:!0}).forEach(function(l){n[l.get("target").port]&&l.remove()}),i.getConnectedLinks(this,{outbound:!0}).forEach(function(l){n[l.get("source").port]&&l.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Qn(this.prop("ports/items"))||[]},getGroupPorts:function(t){const r=Qt(this.prop(["ports","items"])).filter(e=>e.group===t);return Qn(r)},getPort:function(t){return Qn(Qt(this.prop("ports/items")).find(function(r){return r.id&&r.id===t}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,nt(this.size())).reduce(function(e,n){var i=n.portTransformation;return e[n.portId]={x:i.x,y:i.y,angle:i.angle},e},{})},getPortIndex:function(t){var r=mn(t)?t.id:t;return this._isValidPortId(r)?Qt(this.prop("ports/items")).findIndex(function(e){return e.id===r}):-1},addPort:function(t,r){if(!mn(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var e=bt([],this.prop("ports/items"));return e.push(t),this.prop("ports/items",e,r),this},insertPort:function(t,r,e){const n="number"==typeof t?t:this.getPortIndex(t);if(!mn(r)||Array.isArray(r))throw new Error("dia.Element: insertPort requires an object.");const i=bt([],this.prop("ports/items"));return i.splice(n,0,r),this.prop("ports/items",i,e),this},portProp:function(t,r,e,n){var i=this.getPortIndex(t);if(-1===i)throw new Error("Element: unable to find port with id "+t);var a=Array.prototype.slice.call(arguments,1);return Array.isArray(r)?a[0]=["ports","items",i].concat(r):wn(r)?a[0]=["ports/items/",i,"/",r].join(""):(a=["ports/items/"+i],ln(r)&&(a.push(r),a.push(e))),this.prop.apply(this,a)},_validatePorts:function(){var t=this.get("ports")||{},r=[],e=Qt((t=t||{}).items);return e.forEach(function(n){"object"!=typeof n&&r.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),ko(e,"id").length!==e.length&&r.push("Element: found id duplicities in ports."),r},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!mn(t)},addPorts:function(t,r){return t.length&&this.prop("ports/items",bt([],this.prop("ports/items")).concat(t),r),this},removePort:function(t,r){const e=r||{},n=this.getPortIndex(t);if(-1!==n){const i=bt([],this.prop(["ports","items"]));i.splice(n,1),e.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,e),this.stopBatch("port-remove")}return this},removePorts:function(t,r){let e,n;if(Array.isArray(t)){if(e=r||{},0===t.length)return this.this;n=bt([],this.prop(["ports","items"])).filter(function(a){return!t.some(function(s){const l=mn(s)?s.id:s;return a.id===l})})}else e=t||{},n=[];return this.startBatch("port-remove"),e.rewrite=!0,this.prop(["ports","items"],n,e),this.stopBatch("port-remove"),this},_createPortData:function(){var r,t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this._portSettingsData&&(r=this._portSettingsData.getPorts()),this._portSettingsData=new ka(this.get("ports"));var e=this._portSettingsData.getPorts();if(r){var n=e.filter(function(a){if(!r.find(function(s){return s.id===a.id}))return a}),i=r.filter(function(a){if(!e.find(function(s){return s.id===a.id}))return a});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},_s={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],r=this._getContainerElement(),e=0,n=r.node.childNodes.length;e<n;e++)t.push(r.node.childNodes[e]);var i=Bs(this.model._portSettingsData.getPorts(),"z"),a="auto";Qt(i[a]).forEach(function(m){var v=this._getPortElement(m);r.append(v),t.push(v)},this);for(var s=Object.keys(i),l=0;l<s.length;l++){var f=s[l];if(f!==a){var g=parseInt(f,10);this._appendPorts(i[f],g,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,r,e){var n=this._getContainerElement(),i=Qt(t).map(this._getPortElement,this);e[r]||r<0?Pe(e[Math.max(r,0)]).before(i):n.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,r){const e=this._portElementsCache[t];if(!e)return null;const n=e.portContentElement.node,i=e.portContentSelectors,[a=null]=this.findBySelector(r,n,i);return a},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){jr(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let r,e,n,i;var a=Pe(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var l=this.parseDOMJSON(s,a.node),f=l.fragment;r=f.childNodes.length>1?Pe("g").append(f):Pe(f.firstChild),i=l.selectors}else r=Pe(s),Array.isArray(r)&&(r=Pe("g").append(r));if(!r)throw new Error("ElementView: Invalid port markup.");r.attr({port:t.id,"port-group":t.group});const g=this._getPortLabelMarkup(t.label);if(Array.isArray(g)){const{fragment:A,selectors:B}=this.parseDOMJSON(g,a.node),Y=A.childNodes.length;Y>0&&(n=B,e=1===Y?Pe(A.firstChild):Pe("g").append(A))}else e=Pe(g),Array.isArray(e)&&(e=Pe("g").append(e));var m;if(i&&n){for(var v in n)if(i[v]&&v!==this.selector)throw new Error("ElementView: selectors within port must be unique.");m=bt({},i,n)}else m=i||n;return a.append(r.addClass("joint-port-body")),e&&a.append(e.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:a,portLabelElement:e,portSelectors:m,portLabelSelectors:n,portContentElement:r,portContentSelectors:i},a},_updatePortGroup:function(t){for(var r=nt(this.model.size()),e=this.model._portSettingsData.getGroupPortsMetrics(t,r),n=0,i=e.length;n<i;n++){var a=e[n],l=this._portElementsCache[a.portId]||{},f=a.portTransformation;this.applyPortTransform(l.portElement,f),this.updateDOMSubtreeAttributes(l.portElement.node,a.portAttrs,{rootBBox:new nt(a.portSize),selectors:l.portSelectors});var g=a.labelTransformation;g&&l.portLabelElement&&(this.applyPortTransform(l.portLabelElement,g,-f.angle||0),this.updateDOMSubtreeAttributes(l.portLabelElement.node,g.attrs,{rootBBox:new nt(a.labelSize),selectors:l.portLabelSelectors}))}},applyPortTransform:function(t,r,e){var n=Pe.createSVGMatrix().rotate(e||0).translate(r.x||0,r.y||0).rotate(r.angle||0);t.transform(n,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ir=qt.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),qt.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,r,e){const n=an(r);e=(n?e:t)||{};const{parentRelative:i,deep:a,restrictedArea:s}=e;let l;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const f=this.getParentCell();f&&!f.isLink()&&(l=f.get("position"))}if(n){if(l&&(t+=l.x,r+=l.y),a||s){const{x:f,y:g}=this.get("position");this.translate(t-f,r-g,e)}else this.set("position",{x:t,y:r},e);return this}{const f=de(this.get("position"));return i?f.difference(l):f}},translate:function(t,r,e){if(r=r||0,0===(t=t||0)&&0===r)return this;(e=e||{}).translateBy=e.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=e.restrictedArea;if(i&&e.translateBy===this.id)if("function"==typeof i){var a=i.call(this,n.x+t,n.y+r,e);t=a.x-n.x,r=a.y-n.y}else{var s=this.getBBox({deep:!0}),l=n.x-s.x,f=n.y-s.y,g=Math.max(i.x+l,Math.min(i.x+i.width+l-s.width,n.x+t)),m=Math.max(i.y+f,Math.min(i.y+i.height+f-s.height,n.y+r));t=g-n.x,r=m-n.y}var v={x:n.x+t,y:n.y+r};return e.tx=t,e.ty=r,e.transition?(mn(e.transition)||(e.transition={}),this.transition("position",v,bt({},e.transition,{valueFunction:xr.object})),jr(this.getEmbeddedCells(),"translate",t,r,e)):(this.startBatch("translate",e),this.set("position",v,e),jr(this.getEmbeddedCells(),"translate",t,r,e),this.stopBatch("translate",e)),this},size:function(t,r,e){var n=this.get("size");return void 0===t?{width:n.width,height:n.height}:(mn(t)&&(e=r,r=an(t.height)?t.height:n.height,t=an(t.width)?t.width:n.width),this.resize(t,r,e))},resize:function(t,r,e){if(this.startBatch("resize",e=e||{}),e.direction){var n=this.get("size");switch(e.direction){case"left":case"right":r=n.height;break;case"top":case"bottom":t=n.width}var s,i=De(this.get("angle")||0),a=this.getBBox();if(i){var l={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[e.direction];e.absolute&&(l+=Math.floor((i+45)/90),l%=4);var f=a[["bottomLeft","corner","topRight","origin"][l]](),g=de(f).rotate(a.center(),-i),m=Math.sqrt(t*t+r*r)/2,v=l*Math.PI/2;v+=Math.atan(l%2==0?r/t:t/r),v-=xt(i);var A=de.fromPolar(m,v,g);s=de(A).offset(t/-2,r/-2)}else switch(s=a.topLeft(),e.direction){case"top":case"top-right":s.offset(0,a.height-r);break;case"left":case"bottom-left":s.offset(a.width-t,0);break;case"top-left":s.offset(a.width-t,a.height-r)}this.set("size",{width:t,height:r},e),this.position(s.x,s.y,e)}else this.set("size",{width:t,height:r},e);return this.stopBatch("resize",e),this},scale:function(t,r,e,n){var i=this.getBBox().scale(t,r,e);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t={}){const{graph:r}=this;if(!r)throw new Error("Element must be part of a graph.");const e=this.getEmbeddedCells().filter(v=>v.isElement());if(0===e.length)return this;this.startBatch("fit-embeds",t),t.deep&&jr(e,"fitEmbeds",t);const{left:n,right:i,top:a,bottom:s}=St(t.padding);let{x:l,y:f,width:g,height:m}=r.getCellsBBox(e);return l-=n,f-=a,g+=n+i,m+=s+a,this.set({position:{x:l,y:f},size:{width:g,height:m}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,r,e,n){if(e){var i=this.getBBox().center(),a=this.get("size"),s=this.get("position");i.rotate(e,this.get("angle")-t);var l=i.x-a.width/2-s.x,f=i.y-a.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:r,origin:e}),this.position(s.x+l,s.y+f,n),this.rotate(t,r,null,n),this.stopBatch("rotate")}else this.set("angle",r?t:(this.get("angle")+t)%360,n);return this},angle:function(){return De(this.get("angle")||0)},getBBox:function(t={}){const{graph:r,attributes:e}=this,{deep:n,rotate:i}=t;if(n&&r){const v=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return v.push(this),r.getCellsBBox(v,t)}const{angle:a=0,position:{x:s,y:l},size:{width:f,height:g}}=e,m=new nt(s,l,f,g);return i&&m.rotateAroundCenter(a),m},getPointFromConnectedLink:function(t,r){var e=this.getBBox(),n=e.center(),i=t.get(r);if(!i)return n;var a=i.port;if(!a||!this.hasPort(a))return n;var s=this.portProp(a,["group"]),l=this.getPortsPositions(s),f=new de(l[a]).offset(e.origin()),g=this.angle();return g&&f.rotate(n,-g),f}});bt(Ir.prototype,bs);const Vu={cells:function(t){return function(){var r=Array.from(arguments),e=r.length,n=e>0&&r[0]||[],i=e>1&&r[e-1]||{};return Array.isArray(n)||(i instanceof qt?n=r:n instanceof qt&&(r.length>1&&r.pop(),n=r)),i instanceof qt&&(i={}),t.call(this,n,i)}}},Yf=_r.Collection.extend({initialize:function(t,r){this.cellNamespace=r.cellNamespace?r.cellNamespace:"undefined"!=typeof joint&&pr(joint,"shapes")?joint.shapes:null,this.graph=r.graph},model:function(t,r){var e=r.collection,a=new("link"===t.type?gt:le(e.cellNamespace,t.type,".")||Ir)(t,r);return r.dry||(a.graph=e.graph),a},comparator:function(t){return t.get("z")||0}}),No=_r.Model.extend({initialize:function(t,r){var e=new Yf([],{model:(r=r||{}).cellModel,cellNamespace:r.cellNamespace,graph:this});_r.Model.prototype.set.call(this,"cells",e),e.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},e.on("add",this._restructureOnAdd,this),e.on("remove",this._restructureOnRemove,this),e.on("reset",this._restructureOnReset,this),e.on("change:source",this._restructureOnChangeSource,this),e.on("change:target",this._restructureOnChangeTarget,this),e.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:r,target:e}=t.attributes;r.id&&((this._out[r.id]||(this._out[r.id]={}))[t.id]=!0),e.id&&((this._in[e.id]||(this._in[e.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:r,target:e}=t.attributes;r.id&&this._out[r.id]&&this._out[r.id][t.id]&&delete this._out[r.id][t.id],e.id&&this._in[e.id]&&this._in[e.id][t.id]&&delete this._in[e.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var r=t.previous("source");r.id&&this._out[r.id]&&delete this._out[r.id][t.id];var e=t.attributes.source;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var r=t.previous("target");r.id&&this._in[r.id]&&delete this._in[r.id][t.id];var e=t.get("target");e.id&&((this._in[e.id]||(this._in[e.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=_r.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,r){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,r)},set:function(t,r,e){var n;return"object"==typeof t?(n=t,e=r):(n={})[t]=r,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,e),n=lo(n,"cells")),_r.Model.prototype.set.call(this,n,e)},clear:function(t){t=bt({},t,{clear:!0});var r=this.get("cells");if(0===r.length)return this;this.startBatch("clear",t);var e=r.sortBy(function(n){return n.isLink()?1:2});do{e.shift().remove(t)}while(e.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,r){var e;if(t instanceof _r.Model?(e=t.attributes,!t.graph&&(!r||!r.dry)&&(t.graph=this)):e=t,!wn(e.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,r){return Array.isArray(t)?this.addCells(t,r):(t instanceof _r.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,r),r||{}),this)},addCells:function(t,r){return 0===t.length||(t=Lu(t),r.maxPosition=r.position=t.length-1,this.startBatch("add",r),t.forEach(function(e){this.addCell(e,r),r.position--},this),this.stopBatch("add",r)),this},resetCells:function(t,r){var e=Qt(t).map(function(n){return this._prepareCell(n,r)},this);return this.get("cells").reset(e,r),this},removeCells:function(t,r){return t.length&&(this.startBatch("remove"),jr(t,"remove",r),this.stopBatch("remove")),this},_removeCell:function(t,r,e){(e=e||{}).clear||(e.disconnectLinks?this.disconnectLinks(t,e):this.removeLinks(t,e)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,r){var e=(r=r||{}).indirect,n=r.inbound,i=r.outbound;void 0===n&&void 0===i&&(n=i=!0);var a=[],s={};function l(v,A){if(Zn(v.getOutboundEdges(A.id),function(Y,te){if(!s[te]){var ue=v.getCell(te);a.push(ue),s[te]=!0,e&&(n&&f(v,ue),i&&l(v,ue))}}.bind(v)),e&&A.isLink()){var B=A.getTargetCell();B&&B.isLink()&&(s[B.id]||(a.push(B),l(v,B)))}}function f(v,A){if(Zn(v.getInboundEdges(A.id),function(Y,te){if(!s[te]){var ue=v.getCell(te);a.push(ue),s[te]=!0,e&&(n&&f(v,ue),i&&l(v,ue))}}.bind(v)),e&&A.isLink()){var B=A.getSourceCell();B&&B.isLink()&&(s[B.id]||(a.push(B),f(v,B)))}}if(i&&l(this,t),n&&f(this,t),r.deep){var g=t.getEmbeddedCells({deep:!0}),m={};g.forEach(function(v){v.isElement()&&(m[v.id]=!0)}),g.forEach(function(v){v.isLink()||(i&&Zn(this.getOutboundEdges(v.id),function(A,B){if(!s[B]){var Y=this.getCell(B),{source:te,target:ue}=Y.attributes,xe=te.id,ge=ue.id;if(!r.includeEnclosed&&xe&&m[xe]&&ge&&m[ge])return;a.push(this.getCell(B)),s[B]=!0}}.bind(this)),n&&Zn(this.getInboundEdges(v.id),function(A,B){if(!s[B]){var Y=this.getCell(B),{source:te,target:ue}=Y.attributes,xe=te.id,ge=ue.id;if(!r.includeEnclosed&&xe&&m[xe]&&ge&&m[ge])return;a.push(this.getCell(B)),s[B]=!0}}.bind(this)))},this)}return a},getNeighbors:function(t,r){r||(r={});var e=r.inbound,n=r.outbound;void 0===e&&void 0===n&&(e=n=!0);var i=this.getConnectedLinks(t,r).reduce(function(l,f){var{source:g,target:m}=f.attributes,v=f.hasLoop(r);if(e&&pr(g,"id")&&!l[g.id]){var A=this.getCell(g.id);A.isElement()&&(v||A&&A!==t&&(!r.deep||!A.isEmbeddedIn(t)))&&(l[g.id]=A)}if(n&&pr(m,"id")&&!l[m.id]){var B=this.getCell(m.id);B.isElement()&&(v||B&&B!==t&&(!r.deep||!B.isEmbeddedIn(t)))&&(l[m.id]=B)}return l}.bind(this),{});if(t.isLink()){if(e){var a=t.getSourceCell();a&&a.isElement()&&!i[a.id]&&(i[a.id]=a)}if(n){var s=t.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return Qt(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(e){for(var n=[],i=e.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);t=t.sort(function(e,n){return e.length-n.length});var r=Qt(t.shift()).find(function(e){return t.every(function(n){return n.includes(e)})});return this.getCell(r)},getSuccessors:function(t,r){var e=[];return this.search(t,function(n){n!==t&&e.push(n)},bt({},r=r||{},{outbound:!0})),e},cloneCells:js,cloneSubgraph:function(t,r){var e=this.getSubgraph(t,r);return this.cloneCells(e)},getSubgraph:function(t,r){r=r||{};var e=[],n={},i=[],a=[];return Qt(t).forEach(function(s){n[s.id]||(e.push(s),n[s.id]=s,s.isLink()?a.push(s):i.push(s)),r.deep&&s.getEmbeddedCells({deep:!0}).forEach(function(f){n[f.id]||(e.push(f),n[f.id]=f,f.isLink()?a.push(f):i.push(f))})}),a.forEach(function(s){var{source:l,target:f}=s.attributes;if(l.id&&!n[l.id]){var g=this.getCell(l.id);e.push(g),n[g.id]=g,i.push(g)}if(f.id&&!n[f.id]){var m=this.getCell(f.id);e.push(this.getCell(f.id)),n[m.id]=m,i.push(m)}},this),i.forEach(function(s){this.getConnectedLinks(s,r).forEach(function(f){var{source:g,target:m}=f.attributes;!n[f.id]&&g.id&&n[g.id]&&m.id&&n[m.id]&&(e.push(f),n[f.id]=f)})},this),e},getPredecessors:function(t,r){var e=[];return this.search(t,function(n){n!==t&&e.push(n)},bt({},r=r||{},{inbound:!0})),e},search:function(t,r,e){(e=e||{}).breadthFirst?this.bfs(t,r,e):this.dfs(t,r,e)},bfs:function(t,r,e={}){const n={},i={},a=[];for(a.push(t),i[t.id]=0;a.length>0;){var s=a.shift();if(n[s.id]||(n[s.id]=!0,!1===r.call(this,s,i[s.id])))continue;const l=this.getNeighbors(s,e);for(let f=0,g=l.length;f<g;f++){const m=l[f];i[m.id]=i[s.id]+1,a.push(m)}}},dfs:function(t,r,e={}){const n={},i={},a=[];for(a.push(t),i[t.id]=0;a.length>0;){const s=a.pop();if(n[s.id]||(n[s.id]=!0,!1===r.call(this,s,i[s.id])))continue;const l=this.getNeighbors(s,e),f=a.length;for(let g=0,m=l.length;g<m;g++){const v=l[g];i[v.id]=i[s.id]+1,a.splice(f,0,v)}}},getSources:function(){var t=[];return Zn(this._nodes,function(r,e){(!this._in[e]||vi(this._in[e]))&&t.push(this.getCell(e))}.bind(this)),t},getSinks:function(){var t=[];return Zn(this._nodes,function(r,e){(!this._out[e]||vi(this._out[e]))&&t.push(this.getCell(e))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||vi(this._in[t.id])},isSink:function(t){return!this._out[t.id]||vi(this._out[t.id])},isSuccessor:function(t,r){var e=!1;return this.search(t,function(n){if(n===r&&n!==t)return e=!0,!1},{outbound:!0}),e},isPredecessor:function(t,r){var e=!1;return this.search(t,function(n){if(n===r&&n!==t)return e=!0,!1},{inbound:!0}),e},isNeighbor:function(t,r,e){var n=(e=e||{}).inbound,i=e.outbound;void 0===n&&void 0===i&&(n=i=!0);var a=!1;return this.getConnectedLinks(t,e).forEach(function(s){var{source:l,target:f}=s.attributes;if(n&&pr(l,"id")&&l.id===r.id||i&&pr(f,"id")&&f.id===r.id)return a=!0,!1}),a},disconnectLinks:function(t,r){this.getConnectedLinks(t).forEach(function(e){e.set(e.attributes.source.id===t.id?"source":"target",{x:0,y:0},r)})},removeLinks:function(t,r){jr(this.getConnectedLinks(t),"remove",r)},findModelsFromPoint:function(t){return this.getElements().filter(r=>r.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,r={}){const e=new nt(t),{strict:n=!1}=r,i=n?"containsRect":"intersect";return this.getElements().filter(a=>e[i](a.getBBox({rotate:!0})))},findModelsUnderElement:function(t,r={}){const{searchBy:e="bbox"}=r,n=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===e?this.findModelsInArea(n):this.findModelsFromPoint(n[e]())).filter(a=>t.id!==a.id&&!a.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,r={}){const{rotate:e=!0}=r;return Qt(t).reduce(function(n,i){const a=i.getBBox({rotate:e});return a?n?n.union(a):a:n},null)},translate:function(t,r,e){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return jr(n,"translate",t,r,e),this},resize:function(t,r,e){return this.resizeCells(t,r,this.getCells(),e)},resizeCells:function(t,r,e,n){var i=this.getCellsBBox(e);if(i){var a=Math.max(t/i.width,0),s=Math.max(r/i.height,0);jr(e,"scale",a,s,i.origin(),n)}return this},startBatch:function(t,r){return r=r||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",bt({},r,{batchName:t}))},stopBatch:function(t,r){return r=r||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",bt({},r,{batchName:t}))},hasActiveBatch:function(t){const r=this._batches;let e;return e=0===arguments.length?Object.keys(r):Array.isArray(t)?t:[t],e.some(n=>r[n]>0)}},{validations:{multiLinks:function(t,r){var{source:e,target:n}=r.attributes;if(e.id&&n.id){var i=r.getSourceCell();if(i&&t.getConnectedLinks(i,{outbound:!0}).filter(function(l){var{source:f,target:g}=l.attributes;return f&&f.id===e.id&&(!f.port||f.port===e.port)&&g&&g.id===n.id&&(!g.port||g.port===n.port)}).length>1)return!1}return!0},linkPinning:function(t,r){var{source:e,target:n}=r.attributes;return e.id&&n.id}}});!function(t,r,e){if(wn(e)){if(!Vu[e])throw new Error('Unknown wrapper: "'+e+'"');e=Vu[e]}if(!vn(e))throw new Error("Wrapper must be a function.");Qt(["resetCells","addCells","removeCells"]).forEach(function(n){t[n]=e(t[n])})}(No.prototype,0,Vu.cells);const Cs={exportElement:function(t){return t.size()},exportLink:function(t){var r=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:r.width||0,height:r.height||0}},importElement:function(t,r,e){var n=this.getCell(r),i=e.node(r);t.setPosition?t.setPosition(n,i):n.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,r,e){const i=this.getCell(r.name),a=e.edge(r),s=a.points||[],l=new bn(s);if(t.setVertices||t.setLinkVertices)if(vn(t.setVertices))t.setVertices(i,s);else{l.simplify({threshold:.001});const f=l.points.map(m=>m.toJSON());i.set("vertices",f.slice(1,f.length-1))}if(t.setLabels&&"x"in a&&"y"in a){const f={x:a.x,y:a.y};if(vn(t.setLabels))t.setLabels(i,f,s);else{const g=l.closestPointLength(f),m=l.pointAtLength(g),v=g/l.length(),A=new de(f).difference(m).toJSON();i.label(0,{position:{distance:v,offset:A}})}}},layout:function(t,r){var e;e=t instanceof No?t:(new No).resetCells(t,{dry:!0,sort:!1}),t=null;const n=(r=Vn(r||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===n)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=Cs.toGraphLib(e,{graphlib:r.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:r.exportElement,setEdgeLabel:r.exportLink,setEdgeName:function(m){return m.id}}),a={},s=r.marginX||0,l=r.marginY||0;if(r.rankDir&&(a.rankdir=r.rankDir),r.align&&(a.align=r.align),r.nodeSep&&(a.nodesep=r.nodeSep),r.edgeSep&&(a.edgesep=r.edgeSep),r.rankSep&&(a.ranksep=r.rankSep),r.ranker&&(a.ranker=r.ranker),s&&(a.marginx=s),l&&(a.marginy=l),i.setGraph(a),n.layout(i,{debugTiming:!!r.debugTiming}),e.startBatch("layout"),Cs.fromGraphLib(i,{importNode:this.importElement.bind(e,r),importEdge:this.importLink.bind(e,r)}),r.resizeClusters){var f=i.nodes().filter(function(m){return i.children(m).length>0}).map(e.getCell.bind(e)).sort(function(m,v){return v.getAncestors().length-m.getAncestors().length});jr(f,"fitEmbeds",{padding:r.clusterPadding})}e.stopBatch("layout");var g=i.graph();return new nt(s,l,Math.abs(g.width-2*s),Math.abs(g.height-2*l))},fromGraphLib:function(t,r){var e=(r=r||{}).importNode||co,n=r.importEdge||co,i=this instanceof No?this:new No;return t.nodes().forEach(function(a){e.call(i,a,t,i,r)}),t.edges().forEach(function(a){n.call(i,a,t,i,r)}),i},toGraphLib:function(t,r){const e=(r=r||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===e)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=oi(r,"directed","compound","multigraph"),i=new e.Graph(n),a=r.setNodeLabel||co,s=r.setEdgeLabel||co,l=r.setEdgeName||co,f=t.get("cells"),g=0,m=f.length;g<m;g++){var v=f.at(g);if(v.isLink()){var A=v.get("source"),B=v.get("target");if(!A.id||!B.id)break;i.setEdge(A.id,B.id,s(v),l(v))}else if(i.setNode(v.id,a(v)),i.isCompound()&&v.has("parent")){var Y=v.get("parent");f.has(Y)&&i.setParent(v.id,Y)}}return i}};No.prototype.toGraphLib=function(t){return Cs.toGraphLib(this,t)},No.prototype.fromGraphLib=function(t,r){return Cs.fromGraphLib.call(this,t,r)};const Xf={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,r){return this._tests[t]=r},test:function(t){var r=this._tests[t];if(!r)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var e=this._results[t];if(void 0!==e)return e;try{e=r()}catch(n){e=!1}return this._results[t]=e,e}},Ql=(Ir.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ir.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Ir.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Ir.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Ir.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Ir.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Ir.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ir.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ir.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ir.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ir.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Ir.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,r){if(void 0===t)return this.attr("body/lateralArea");var e=ye(t);return this.attr({body:{lateralArea:t},top:e?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t}},r)}},{attributes:{lateralArea:{set:function(t,r){var e=ye(t);e&&(t=parseFloat(t)/100);var n=r.x,i=r.y,a=r.width,s=r.height,f=e?s*t:t,g=Pe.KAPPA,m=g*(a/2),v=g*(e?s*t:t),B=n+a/2,Y=n+a,te=i+f,ue=te-f,xe=i+s-f,ge=i+s;return{d:["M",n,te,"L",n,xe,"C",n,xe+v,B-m,ge,B,ge,"C",B+m,ge,Y,xe+v,Y,xe,"L",Y,te,"C",Y,te-v,B+m,ue,B,ue,"C",B-m,ue,n,te-v,n,te,"Z"].join(" ")}}}}});var Qf=Xf.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Ir.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Qf]},{attributes:{text:{set:function(t,r,e,n){if(!(e instanceof HTMLElement)){var i=n.style||{},a={text:t,width:-5,height:"100%"},s=bt({textVerticalAnchor:"middle"},i);return Zt.textWrap.set.call(this,a,r,e,s),{fill:i.color||null}}e.textContent=t},position:function(t,r,e){if(e instanceof SVGElement)return r.center()}}}});const Fo=gt.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),La=(gt.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),gt.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Ka=_r.View.extend({options:{},theme:null,themeClassNamePrefix:Lr("theme-"),requireSetThemeOverride:!1,defaultTheme:kr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=bt({},this.options,t),_r.View.call(this,t)},initialize:function(){La[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=ur(this,"children")),t){var r=this.svgElement,n=W(t,Pe.namespace[r?"svg":"xhtml"]);(r?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(t,r){for(var e=r;e&&1===e.nodeType;){var n=e.getAttribute(t);if(n)return n;if(e===this.el)return null;e=e.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(ur(this,"el"));else{var t=ur(this,"tagName"),r=bt({},ur(this,"attributes")),e=bt({},ur(this,"style"));this.id&&(r.id=ur(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(r),this._setStyle(e)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(Pe.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof _r.$?t:_r.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=Pe(this.el))},_ensureElClassName:function(){var t=ur(this,"className");if(t){var r=Lr(t);this.svgElement?this.vel.removeClass(t).addClass(r):this.$el.removeClass(t).addClass(r)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,r){return r=r||{},this.theme&&this.requireSetThemeOverride&&!r.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var r=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(r):this.$el.addClass(r),this},removeThemeClassName:function(t){var r=this.themeClassNamePrefix+(t=t||this.theme);return this.svgElement?this.vel.removeClass(r):this.$el.removeClass(r),this},onSetTheme:function(t,r){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),La[this.cid]=null,_r.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,r,e){if(!r)return this;e||(e={});var n=this.getEventNamespace();for(var i in r){var a=r[i];"function"!=typeof a&&(a=this[a]),a&&mt(t).on(i+n,e,a.bind(this))}return this},undelegateElementEvents:function(t){return mt(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,r){return t||(t=ur(this,"documentEvents")),this.delegateElementEvents(document,t,r)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,r){if(!t)throw new Error("eventData(): event object required.");var e=t.data,n="__"+this.cid+"__";return void 0===r?e&&e[n]||{}:(e||(e=t.data={}),e[n]||(e[n]={}),bt(e[n],r),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),r=t[0]&&bt({},t[0])||{},e=t[1]&&bt({},t[1])||{},n=r.render||this.prototype&&this.prototype.render||null;return r.render=function(){return"function"==typeof n&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},r.render.__render__=n,_r.View.extend.call(this,r,e)}});if(mt.event&&!("dbltap"in mt.event.special)){const t=kr.doubleTapInterval,r=30;mt.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(e,...n){const{handleObj:i,target:a}=e,s=mt.data(a),l=(new Date).getTime(),f="lastTouch"in s?l-s.lastTouch:0;f<t&&f>r?(s.lastTouch=null,e.type=i.origType,i.handler.call(this,e,...n)):s.lastTouch=l}}}function Xi(t){return t?Array.isArray(t)?t:[t]:[]}const na=Ka.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(t,r){const{paper:e}=t;this.cellView=t,this.nodeSelector=r,e&&(this.updateRequested=!0,e.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:r}=this;return this.update(t,r),this.mount(),this.transform(),0},findNode(t,r=null){let e;if("string"==typeof r)[e]=t.findBySelector(r);else if(ln(r)){const n=t.model.isLink(),{label:i=null,port:a,selector:s}=r;n&&null!==i?e=t.findLabelNode(i,s):!n&&a?e=t.findPortNode(a,s):[e]=t.findBySelector(s)}else r&&(e=Pe.toNode(r),e instanceof SVGElement||(e=null));return e||null},mount(){const{MOUNTABLE:t,cellView:r,el:e,options:n,transformGroup:i}=this;if(!t||i)return;const{vel:a,paper:s}=r,{layer:l}=n;if(l){const f=this.transformGroup=Pe("g").addClass("highlight-transform").append(e);s.getLayerView(l).insertSortedNode(f.node,n.z)}else(!e.parentNode||e.nextSibling)&&a.append(e)},unmount(){const{MOUNTABLE:t,transformGroup:r,vel:e}=this;!t||(r?(this.transformGroup=null,r.remove()):e.remove())},transform(){const{transformGroup:t,cellView:r,updateRequested:e}=this;if(!t||r.model.isLink()||e)return;const n=r.getRootTranslateMatrix(),i=r.getRootRotateMatrix(),a=n.multiply(i);t.attr("transform",Pe.matrixToTransformString(a))},update(){const{node:t,cellView:r,nodeSelector:e,updateRequested:n,id:i}=this;if(n)return;const a=this.node=this.findNode(r,e);t&&this.unhighlight(r,t),a?(this.highlight(r,a),this.mount()):(this.unmount(),r.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:r,id:e,constructor:n}=this;t&&this.unhighlight(r,t),this.unmount(),n._removeRef(r,e)},highlight(t,r){},unhighlight(t,r){}},{_views:{},highlight:function(t,r,e){const n=this.uniqueId(r,e);this.add(t,r,n,e)},unhighlight:function(t,r,e){const n=this.uniqueId(r,e);this.remove(t,n)},get(t,r=null){const{cid:e}=t,{_views:n}=this,i=n[e];if(null===r){const a=[];if(!i)return a;for(let s in i){const l=i[s];l instanceof this&&a.push(l)}return a}if(!i)return null;if(r in i){const a=i[r];if(a instanceof this)return a}return null},add(t,r,e,n={}){if(!e)throw new Error("dia.HighlighterView: An ID required.");const i=na.get(t,e);i&&i.remove();const a=new this(n);return a.id=e,this._addRef(t,e,a),a.requestUpdate(t,r),a},_addRef(t,r,e){const{cid:n}=t,{_views:i}=this;let a=i[n];a||(a=i[n]={}),a[r]=e},_removeRef(t,r){const{cid:e}=t,{_views:n}=this,i=n[e];if(i){r&&delete i[r];for(let a in i)return;delete n[e]}},remove(t,r=null){Xi(this.get(t,r)).forEach(e=>{e.remove()})},update(t,r=null,e=!1){Xi(this.get(t,r)).forEach(n=>{(e||n.UPDATABLE)&&n.update()})},transform(t,r=null){Xi(this.get(t,r)).forEach(e=>{e.UPDATABLE&&e.transform()})},uniqueId:(t,r="")=>Pe.ensureId(t)+JSON.stringify(r)}),Ja={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},dn=Ka.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],r=this.model.get("type");return r&&r.toLowerCase().split(".").forEach(function(e,n,i){t.push("type-"+i.slice(0,n+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var n,i,a,t={},r={},e=0,s=ur(this,"presentationAttributes");for(var l in s)if(s.hasOwnProperty(l)){var f=s[l];for(Array.isArray(f)||(f=[f]),n=0,i=f.length;n<i;n++){var g=t[a=f[n]];g||(g=t[a]=1<<e++),r[l]|=g}}var m=ur(this,"initFlag");for(Array.isArray(m)||(m=[m]),n=0,i=m.length;n<i;n++)t[a=m[n]]||(t[a]=1<<e++);if(e>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=r},hasFlag:function(t,r){return t&this.getFlag(r)},removeFlag:function(t,r){return t^t&this.getFlag(r)},getFlag:function(t){var r=this._flags;if(!r)return 0;var e=0;if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e|=r[t[n]];else e|=r[t];return e},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||_(this),Ka.call(this,t)},initialize:function(){this.setFlags(),Ka.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,r){var e=t.getChangeFlag(this._presentationAttributes);r.updateHandled||!e||(r.dirty&&this.hasFlag(e,"UPDATE")&&(e|=this.getFlag("RENDER")),r.tool&&(r.async=!1),this.requestUpdate(e,r))},requestUpdate:function(t,r){const{paper:e}=this;e&&t>0&&e.requestViewUpdate(this,t,this.UPDATE_PRIORITY,r)},parseDOMJSON:function(t,r){var e=W(t),n=e.selectors,i=e.groupSelectors;for(var a in i){if(n[a])throw new Error("dia.CellView: ambiguous group selector");n[a]=i[a]}if(r){var s=this.selector;if(n[s])throw new Error("dia.CellView: ambiguous root selector.");n[s]=r}return{fragment:e.fragment,selectors:n}},can:function(t){var r=vn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return mn(r)&&!1!==r[t]||function(t){return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)}(r)&&!1!==r},findBySelector:function(t,r,e){if(r||(r=this.el),e||(e=this.selectors),!t||"."===t)return[r];if(e){var n=e[t];if(n)return Array.isArray(n)?n:[n]}return kr.useCSSSelectors?mt(r).find(t).toArray():[]},notify:function(t){if(this.paper){var r=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(r)),this.paper.trigger.apply(this.paper,[t,this].concat(r))}},getBBox:function(t){var r;if(t&&t.useModelGeometry){var e=this.model;r=e.getBBox().bbox(e.angle())}else r=this.getNodeBBox(this.el);return this.paper.localToPaperRect(r)},getNodeBBox:function(t){var r=this.getNodeBoundingRect(t),e=this.getNodeMatrix(t),n=this.getRootTranslateMatrix(),i=this.getRootRotateMatrix();return Pe.transformRect(r,n.multiply(i).multiply(e))},getNodeUnrotatedBBox:function(t){var r=this.getNodeBoundingRect(t),e=this.getNodeMatrix(t),n=this.getRootTranslateMatrix();return Pe.transformRect(r,n.multiply(e))},getRootTranslateMatrix:function(){var r=this.model.position();return Pe.createSVGMatrix().translate(r.x,r.y)},getRootRotateMatrix:function(){var t=Pe.createSVGMatrix(),r=this.model,e=r.angle();if(e){var n=r.getBBox(),i=n.width/2,a=n.height/2;t=t.translate(i,a).rotate(e).translate(-i,-a)}return t},_notifyHighlight:function(t,r,e={}){const{el:n}=this;let i;if([i=n]="string"==typeof r?this.findBySelector(r):this.$(r),e.partial=i!==n,void 0===e.type){let a;switch(!0){case e.embedding:a=Ja.EMBEDDING;break;case e.connecting:a=Ja.CONNECTING;break;case e.magnetAvailability:a=Ja.MAGNET_AVAILABILITY;break;case e.elementAvailability:a=Ja.ELEMENT_AVAILABILITY;break;default:a=Ja.DEFAULT}e.type=a}return this.notify(t,i,e),this},highlight:function(t,r){return this._notifyHighlight("cell:highlight",t,r)},unhighlight:function(t,r={}){return this._notifyHighlight("cell:unhighlight",t,r)},findMagnet:function(t){const r=this.el;let e=this.$(t)[0];e||(e=r);do{const n=e.getAttribute("magnet"),i=e===r;if((n||i)&&"false"!==n)return e;if(i)return;e=e.parentNode}while(e)},findProxyNode:function(t,r){t||(t=this.el);const e=t.getAttribute(`${r}-selector`);if(e){const[n]=this.findBySelector(e);if(n)return n}return t},getSelector:function(t,r){var e;if(t===this.el)return"string"==typeof r&&(e="> "+r),e;if(t){var n=Pe(t).index()+1;e=t.tagName+":nth-child("+n+")",r&&(e+=" > "+r),e=this.getSelector(t.parentNode,e)}return e},addLinkFromMagnet:function(t,r,e){var n=this.paper,i=n.model,a=n.getDefaultLink(this,t);return a.set({source:this.getLinkEnd(t,r,e,a,"source"),target:{x:r,y:e}}).addTo(i,{async:!1,ui:!0}),a.findView(n)},getLinkEnd:function(t,...r){var e=this.model,n=e.id,i=this.findAttribute("port",t),a=t.getAttribute("joint-selector"),s={id:n};return null!=a&&(s.magnet=a),null!=i?(s.port=i,!e.hasPort(i)&&!a&&(s.selector=this.getSelector(t))):null==a&&this.el!==t&&(s.selector=this.getSelector(t)),this.customizeLinkEnd(s,t,...r)},customizeLinkEnd:function(t,r,e,n,i,a){const{paper:s}=this,{connectionStrategy:l}=s.options;if("function"==typeof l){var f=l.call(s,t,this,r,new de(e,n),i,a,s);if(f)return f}return t},getMagnetFromLinkEnd:function(t){var a,r=this.el,e=t.port,n=t.magnet,i=this.model;return null!=e&&i.isElement()&&i.hasPort(e)?a=this.findPortNode(e,n)||r:(n||(n=t.selector),!n&&null!=e&&(n='[port="'+e+'"]'),a=this.findBySelector(n,r,this.selectors)[0]),this.findProxyNode(a,"magnet")},dragLinkStart:function(t,r,e,n){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(r,e,n);i.notifyPointerdown(t,e,n),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,r,e){var n=this.eventData(t),i=n.linkView;if(i)i.pointermove(t,r,e);else{var a=this.paper,s=a.options.magnetThreshold,l=this.getEventTarget(t),f=n.targetMagnet;if("onleave"===s){if(f===l||Pe(f).contains(l))return}else if(a.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,f,r,e)}},dragLinkEnd:function(t,r,e){var i=this.eventData(t).linkView;!i||(i.pointerup(t,r,e),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,r){vi(r)||(t instanceof SVGElement?Pe(t).attr(r):mt(t).attr(r))},processNodeAttributes:function(t,r){var e,n,i,a,s,l,f,g,m,v=[];for(e in r)!r.hasOwnProperty(e)||(n=r[e],!(i=this.getAttributeDefinition(e))||vn(i.qualify)&&!i.qualify.call(this,n,t,r)?(l||(l={}),l[k(e)]=n):(wn(i.set)&&(l||(l={}),l[i.set]=n),null!==n&&v.push(e,i)));for(a=0,s=v.length;a<s;a+=2)n=r[e=v[a]],vn((i=v[a+1]).set)&&(f||(f={}),f[e]=n),vn(i.position)&&(g||(g={}),g[e]=n),vn(i.offset)&&(m||(m={}),m[e]=n);return{raw:r,normal:l,set:f,position:g,offset:m}},updateRelativeAttributes:function(t,r,e,n){n||(n={});var i,a,l=r.raw||{},f=r.normal||{},g=r.set,m=r.position,v=r.offset;for(i in g){a=g[i];var A=this.getAttributeDefinition(i).set.call(this,a,e.clone(),t,l);mn(A)?bt(f,A):void 0!==A&&(f[i]=A)}if(t instanceof HTMLElement)this.setNodeAttributes(t,f);else{var ue,xe,ge,B=f.transform,Y=Pe.transformStringToMatrix(B),te=de(Y.e,Y.f);if(B&&(f=lo(f,"transform"),Y.e=Y.f=0),m||v){var E=this.getNodeScale(t,n.scalableNode);ue=E.sx,xe=E.sy}var D=!1;for(i in m)a=m[i],(ge=this.getAttributeDefinition(i).position.call(this,a,e.clone(),t,l))&&(te.offset(de(ge).scale(ue,xe)),D||(D=!0));this.setNodeAttributes(t,f);var z=!1;if(v){var Z=this.getNodeBoundingRect(t);if(Z.width>0&&Z.height>0){var ae=Pe.transformRect(Z,Y).scale(1/ue,1/xe);for(i in v)a=v[i],(ge=this.getAttributeDefinition(i).offset.call(this,a,ae,t,l))&&(te.offset(de(ge).scale(ue,xe)),z||(z=!0))}}(void 0!==B||D||z)&&(te.round(1),Y.e=te.x,Y.f=te.y,t.setAttribute("transform",Pe.matrixToTransformString(Y)))}},getNodeScale:function(t,r){var e,n;if(r&&r.contains(t)){var i=r.scale();e=1/i.sx,n=1/i.sy}else e=1,n=1;return{sx:e,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var r=this.metrics;if(!r)return{};var e=Pe.ensureId(t),n=r[e];return n||(n=r[e]={}),n},getNodeData:function(t){var r=this.nodeCache(t);return r.data||(r.data={}),r.data},getNodeBoundingRect:function(t){var r=this.nodeCache(t);return void 0===r.boundingRect&&(r.boundingRect=Pe(t).getBBox()),new nt(r.boundingRect)},getNodeMatrix:function(t){var r=this.nodeCache(t);if(void 0===r.magnetMatrix){var e=this.rotatableNode||this.el;r.magnetMatrix=Pe(t).getTransformToElement(e)}return Pe.createSVGMatrix(r.magnetMatrix)},getNodeShape:function(t){var r=this.nodeCache(t);return void 0===r.geometryShape&&(r.geometryShape=Pe(t).toGeometryShape()),r.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,r,e,n){var i,a,s,l,f={},g=[];for(var m in t)if(t.hasOwnProperty(m)&&ln(s=t[m])){var v=e[m]=this.findBySelector(m,r,n);for(i=0,a=v.length;i<a;i++){var A=v[i];l=Pe.ensureId(A);var B=n&&n[m]===A,Y=f[l];if(Y){Y.array||(g.push(l),Y.array=!0,Y.attributes=[Y.attributes],Y.selectedLength=[Y.selectedLength]);var te=Y.attributes,ue=Y.selectedLength;if(B)te.unshift(s),ue.unshift(-1);else{var xe=Ri(ue,a);te.splice(xe,0,s),ue.splice(xe,0,a)}}else f[l]={attributes:s,selectedLength:B?-1:a,node:A,array:!1}}}for(i=0,a=g.length;i<a;i++)(s=f[l=g[i]]).attributes=br({},...s.attributes.reverse());return f},getEventTarget:function(t,r={}){const{target:e,type:n,clientX:i=0,clientY:a=0}=t;return r.fromPoint||"touchmove"===n||"touchend"===n?document.elementFromPoint(i,a):e},updateDOMSubtreeAttributes:function(t,r,e){e||(e={}),e.rootBBox||(e.rootBBox=nt()),e.selectors||(e.selectors=this.selectors);var l,f,g,m,v,n={},i={},a=[],s=[],A=e.roAttributes,B=this.findNodesAttributes(A||r,t,n,e.selectors),Y=A?this.findNodesAttributes(r,t,n,e.selectors):B;for(var te in B)if((v=this.processNodeAttributes(f=(m=B[te]).node,g=m.attributes)).set||v.position||v.offset){var ge,ue=Y[te]&&Y[te].attributes,xe=ue&&void 0===g.ref?ue.ref:g.ref;if(xe){if(!(ge=(n[xe]||this.findBySelector(xe,t,e.selectors))[0]))throw new Error('dia.CellView: "'+xe+'" reference does not exist.')}else ge=null;if(l={node:f,refNode:ge,processedAttributes:v,allAttributes:ue},ge){var E=s.findIndex(function(et){return et.refNode===f});E>-1?s.splice(E,0,l):s.push(l)}else a.push(l)}else this.setNodeAttributes(f,v.normal);a.push(...s);for(var D,z=0,Z=a.length;z<Z;z++){f=(l=a[z]).node,ge=l.refNode;var ae=Pe(e.rotatableNode),ve=ge?Pe.ensureId(ge):"",we=!!ae&&!!ge&&ae.contains(ge),Me=i[ve];if(!Me){var Ye=we?ae:t;Me=i[ve]=ge?Pe(ge).getBBox({target:Ye}):e.rootBBox}A?(v=this.processNodeAttributes(f,l.allAttributes),this.mergeProcessedAttributes(v,l.processedAttributes)):v=l.processedAttributes;var We=Me;we&&!ae.contains(f)&&(D||(D=Pe.transformStringToMatrix(ae.attr("transform"))),We=Pe.transformRect(Me,D)),this.updateRelativeAttributes(f,v,We,e)}},mergeProcessedAttributes:function(t,r){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),bt(t.set,r.set),bt(t.position,r.position),bt(t.offset,r.offset);var e=t.normal&&t.normal.transform;void 0!==e&&r.normal&&(r.normal.transform=e),t.normal=r.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var r=this._toolsView;return!(!r||t&&r.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(t){var r=this._toolsView;return r&&r.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){na.remove(this)},updateHighlighters:function(t=!1){na.update(this,null,t)},transformHighlighters:function(){na.transform(this)},pointerdblclick:function(t,r,e){this.notify("cell:pointerdblclick",t,r,e)},pointerclick:function(t,r,e){this.notify("cell:pointerclick",t,r,e)},contextmenu:function(t,r,e){this.notify("cell:contextmenu",t,r,e)},pointerdown:function(t,r,e){const{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,r,e)},pointermove:function(t,r,e){this.notify("cell:pointermove",t,r,e)},pointerup:function(t,r,e){const{graph:n}=this.eventData(t);this.notify("cell:pointerup",t,r,e),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,r,e,n){this.notify("cell:mousewheel",t,r,e,n)},onevent:function(t,r,e,n){this.notify(r,t,e,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:r}=this;r.isAsync()&&r.dumpView(this);const e=this.getEventTarget(t,{fromPoint:!0}),n=r.findView(e);n!==this&&(this.mouseleave(t),n&&n.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Highlighting:Ja,addPresentationAttributes:function(t){return br({},ur(this.prototype,"presentationAttributes"),t,function(r,e){if(r&&e&&("string"==typeof r&&(r=[r]),"string"==typeof e&&(e=[e]),Array.isArray(r)&&Array.isArray(e)))return ko(r.concat(e))})}}),hn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},$s=dn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=dn.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){dn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[hn.UPDATE],position:[hn.TRANSLATE,hn.TOOLS],size:[hn.RESIZE,hn.PORTS,hn.TOOLS],angle:[hn.ROTATE,hn.TOOLS],markup:[hn.RENDER],ports:[hn.PORTS]},initFlag:[hn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,r){const{useCSSSelectors:e}=kr;this.hasFlag(t,hn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let n=!1;if(this.hasFlag(t,hn.RENDER))this.render(),this.updateTools(r),this.updateHighlighters(!0),n=!0,t=this.removeFlag(t,[hn.RENDER,hn.UPDATE,hn.RESIZE,hn.TRANSLATE,hn.ROTATE,hn.PORTS,hn.TOOLS]);else{let i=!1;this.hasFlag(t,hn.RESIZE)&&(this.resize(r),i=!0,t=this.removeFlag(t,[hn.RESIZE,hn.UPDATE])),this.hasFlag(t,hn.UPDATE)&&(this.update(this.model,null,r),t=this.removeFlag(t,hn.UPDATE),i=!0,e&&(t=this.removeFlag(t,hn.PORTS))),this.hasFlag(t,hn.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,hn.TRANSLATE),n=!0),this.hasFlag(t,hn.ROTATE)&&(this.rotate(),t=this.removeFlag(t,hn.ROTATE),n=!0),this.hasFlag(t,hn.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,hn.PORTS)),i&&this.updateHighlighters(!1)}return n&&this.transformHighlighters(),this.hasFlag(t,hn.TOOLS)&&(this.updateTools(r),t=this.removeFlag(t,hn.TOOLS)),t},_initializePorts:function(){},update:function(t,r){this.cleanNodesCache();const{useCSSSelectors:e}=kr;e&&this._removePorts();var n=this.model,i=n.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new nt(n.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:r===i?null:r}),e&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,r=t.get("markup")||t.markup;if(!r)throw new Error("dia.ElementView: markup required");if(Array.isArray(r))return this.renderJSONMarkup(r);if("string"==typeof r)return this.renderStringMarkup(r);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var r=this.parseDOMJSON(t,this.el),e=this.selectors=r.selectors;this.rotatableNode=Pe(e[this.rotatableSelector])||null,this.scalableNode=Pe(e[this.scalableSelector])||null,this.vel.append(r.fragment)},renderStringMarkup:function(t){var r=this.vel;r.append(Pe(t)),this.rotatableNode=r.findOne(".rotatable"),this.scalableNode=r.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),kr.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),r=this.getRotateString();r&&(t+=" "+r),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,r=t.angle;if(!r)return null;var e=t.size;return"rotate("+r+","+e.width/2+","+e.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var r=this.model,e=r.angle(),n=r.size(),i=this.scalableNode,a=!1;i.node.getElementsByTagName("path").length>0&&(a=!0);var s=i.getBBox({recursive:a});i.attr("transform","scale("+n.width/(s.width||1)+","+n.height/(s.height||1)+")");var g=this.rotatableNode,m=g&&g.attr("transform");if(m){g.attr("transform",m+" rotate("+-e+","+n.width/2+","+n.height/2+")");var v=i.getBBox({target:this.paper.cells});r.set("position",{x:v.x,y:v.y},bt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const r=t.model||this.model,n=(t.paper||this.paper).model,i=t.initialZIndices={},a=r.getEmbeddedCells({deep:!0}),s=n.getConnectedLinks(r,{deep:!0,includeEnclosed:!0});[r,...a,...s].forEach(g=>i[g.id]=g.attributes.z),r.startBatch("to-front"),r.toFront({deep:!0,ui:!0});const l=n.getElements().reduce((g,m)=>Math.max(g,m.attributes.z||0),0);s.forEach(g=>{g.attributes.z<=l&&g.set("z",l+1,{ui:!0})}),r.stopBatch("to-front");const f=r.parent();f?(n.getCell(f).unembed(r,{ui:!0}),t.initialParentId=f):t.initialParentId=null},processEmbedding:function(t={},r,e,n){const i=t.model||this.model,a=t.paper||this.paper,s=a.model,{findParentBy:l,frontParentOnly:f,validateEmbedding:g}=a.options;let m;m=vn(l)?Qt(l.call(s,this,r,e,n)):"pointer"===l?Qt(s.findModelsFromPoint({x:e,y:n})):s.findModelsUnderElement(i,{searchBy:l}),m=m.filter(B=>B instanceof qt&&i.id!==B.id&&!B.isEmbeddedIn(i)),f&&(m=m.slice(-1));let v=null;const A=t.candidateEmbedView;for(let B=m.length-1;B>=0;B--){const Y=m[B];if(A&&A.model.id==Y.id){v=A;break}{const te=Y.findView(a);if(!vn(g)||g.call(a,this,te)){v=te;break}}}v&&v!=A&&(this.clearEmbedding(t),t.candidateEmbedView=v.highlight(v.findProxyNode(null,"container"),{embedding:!0})),!v&&A&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var r=t.candidateEmbedView;r&&(r.unhighlight(r.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const r=t.candidateEmbedView,e=t.model||this.model,n=t.paper||this.paper;if(r)r.model.embed(e,{ui:!0}),r.unhighlight(r.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:i}=n.options,{initialParentId:a}=t;if(a&&"function"==typeof i&&!i.call(n,this))return void this._disallowUnembed(t)}n.model.getConnectedLinks(e,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:r,whenNotAllowed:e="revert"}=t,n=r||this.model,a=(t.paper||this.paper).model;switch(e){case"remove":n.remove({ui:!0});break;case"revert":{const{initialParentId:s,initialPosition:l,initialZIndices:f}=t;if(l){const{x:m,y:v}=l;n.position(m,v,{deep:!0,ui:!0})}f&&Object.keys(f).forEach(m=>{const v=a.getCell(m);v&&v.set("z",f[m],{ui:!0})});const g=a.getCell(s);g&&g.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,r=t.model,e=t.paper;t&&!r.isLink();){if(!r.isEmbedded()||t.can("stopDelegation"))return t;r=r.getParentCell(),t=e.findViewByModel(r)}return null},findProxyNode:function(t,r){t||(t=this.el);const e=t.getAttribute(`${r}-selector`);if(e){const n=this.findAttribute("port",t);if(n){const i=this.findPortNode(n,e);if(i)return i}else{const[i]=this.findBySelector(e);if(i)return i}}return t},notifyPointerdown(t,r,e){dn.prototype.pointerdown.call(this,t,r,e),this.notify("element:pointerdown",t,r,e)},notifyPointermove(t,r,e){dn.prototype.pointermove.call(this,t,r,e),this.notify("element:pointermove",t,r,e)},notifyPointerup(t,r,e){this.notify("element:pointerup",t,r,e),dn.prototype.pointerup.call(this,t,r,e)},pointerdblclick:function(t,r,e){dn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,r,e)},pointerclick:function(t,r,e){dn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,r,e)},contextmenu:function(t,r,e){dn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,r,e)},pointerdown:function(t,r,e){this.isPropagationStopped(t)||(this.notifyPointerdown(t,r,e),this.dragStart(t,r,e))},pointermove:function(t,r,e){var n=this.eventData(t);switch(n.action){case"magnet":this.dragMagnet(t,r,e);break;case"move":(n.delegatedView||this).drag(t,r,e);default:this.notifyPointermove(t,r,e)}this.eventData(t,n)},pointerup:function(t,r,e){var n=this.eventData(t);switch(n.action){case"magnet":this.dragMagnetEnd(t,r,e);break;case"move":(n.delegatedView||this).dragEnd(t,r,e);default:this.notifyPointerup(t,r,e)}var i=n.targetMagnet;i&&this.magnetpointerclick(t,i,r,e),this.checkMouseleave(t)},mouseover:function(t){dn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){dn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){dn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){dn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,r,e,n){dn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,r,e,n)},onmagnet:function(t,r,e){this.dragMagnetStart(t,r,e)},magnetpointerdblclick:function(t,r,e,n){this.notify("element:magnet:pointerdblclick",t,r,e,n)},magnetcontextmenu:function(t,r,e,n){this.notify("element:magnet:contextmenu",t,r,e,n)},dragStart:function(t,r,e){var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(t,{action:"move",delegatedView:n});const i=n.model.position();n.eventData(t,{initialPosition:i,pointerOffset:i.difference(r,e),restrictedArea:this.paper.getRestrictedArea(n,r,e)})},dragMagnetStart:function(t,r,e){if(this.can("addLinkFromMagnet")){var n=t.currentTarget,i=this.paper;this.eventData(t,{targetMagnet:n}),t.stopPropagation(),i.options.validateMagnet(this,n,t)?(i.options.magnetThreshold<=0&&this.dragLinkStart(t,n,r,e),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,r,e),i.delegateDragEvents(this,t.data)}},drag:function(t,r,e){var n=this.paper,i=n.options.gridSize,a=this.model,s=this.eventData(t),{pointerOffset:l,restrictedArea:f,embedding:g}=s,m=tt(r+l.x,i),v=tt(e+l.y,i);a.position(m,v,{restrictedArea:f,deep:!0,ui:!0}),n.options.embeddingMode&&(g||(this.prepareEmbedding(s),g=!0),this.processEmbedding(s,t,r,e)),this.eventData(t,{embedding:g})},dragMagnet:function(t,r,e){this.dragLink(t,r,e)},dragEnd:function(t,r,e){var n=this.eventData(t);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(t,r,e){this.dragLinkEnd(t,r,e)},magnetpointerclick:function(t,r,e,n){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,r,e,n)}},{Flags:hn});bt($s.prototype,_s);const Ra=function(t,r,e){return t},Zf=function(t,r,e){var g,m,v,n=r.side||"bottom",i=St(r.padding||40),a=e.sourceBBox,s=e.targetBBox,l=a.center(),f=s.center();switch(n){case"bottom":v=1,g="y",m="height";break;case"top":v=-1,g="y",m="height";break;case"left":v=-1,g="x",m="width";break;case"right":v=1,g="x",m="width";break;default:throw new Error("Router: invalid side")}return l[g]+=v*(a[m]/2+i[n]),f[g]+=v*(s[m]/2+i[n]),v*(l[g]-f[g])>0?f[g]=l[g]:l[g]=f[g],[l].concat(t,f)};var qf={N:"S",S:"N",E:"W",W:"E"},Ki={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Ys(t,r,e){var n=new de(t.x,r.y);return e.containsPoint(n)&&(n=new de(r.x,t.y)),n}function ju(t,r){return t["W"===r||"E"===r?"width":"height"]}function Kr(t,r){return t.x===r.x?t.y>r.y?"N":"S":t.y===r.y?t.x>r.x?"W":"E":null}function Xs(t){return new nt(t.x,t.y,0,0)}function Ks(t){var r=St(t.padding||t.elementPadding||20);return{x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}function zu(t,r){return t.sourceBBox.clone().moveAndExpand(Ks(r))}function Uu(t,r){return t.targetBBox.clone().moveAndExpand(Ks(r))}function Js(t,r,e){var n=new de(t.x,r.y),i=new de(r.x,t.y),a=Kr(t,n),s=Kr(t,i),l=qf[e],f=a===e||a!==l&&(s===l||s!==e)?n:i;return{points:[f],direction:Kr(f,r)}}function ra(t,r,e){var n=Ys(t,r,e);return{points:[n],direction:Kr(n,r)}}function Qs(t,r,e,n){var f,i={},a=[new de(t.x,r.y),new de(r.x,t.y)],s=a.filter(function(v){return!e.containsPoint(v)}),l=s.filter(function(v){return Kr(v,t)!==n});if(l.length>0)f=l.filter(function(v){return Kr(t,v)===n}).pop(),i.points=[f=f||l[0]],i.direction=Kr(f,r);else{f=Ru(a,s)[0];var g=new de(r).move(f,-ju(e,n)/2),m=Ys(g,t,e);i.points=[m,g],i.direction=Kr(g,r)}return i}function nd(t,r,e,n){var i=ra(r,t,n),a=i.points[0];if(e.containsPoint(a)){var s=(i=ra(t,r,e)).points[0];if(n.containsPoint(s)){var l=new de(t).move(s,-ju(e,Kr(t,s))/2),f=new de(r).move(a,-ju(n,Kr(r,a))/2),g=new at(l,f).midpoint(),m=ra(t,g,e),v=Js(g,r,m.direction);i.points=[m.points[0],v.points[0]],i.direction=v.direction}}return i}function Zs(t,r,e,n,i){var m,v,A,a={},s=e.union(n).inflate(1),l=s.center().distance(r)>s.center().distance(t),f=l?r:t,g=l?t:r;return i?(m=de.fromPolar(s.width+s.height,Ki[i],f),m=s.pointNearestToPoint(m).move(m,-1)):m=s.pointNearestToPoint(f).move(f,1),v=Ys(m,g,s),m.round().equals(v.round())?(v=de.fromPolar(s.width+s.height,xt(m.theta(f))+Math.PI/2,g),A=Ys(m,v=s.pointNearestToPoint(v).move(g,1).round(),s),a.points=l?[v,A,m]:[m,A,v]):a.points=l?[v,m]:[m,v],a.direction=Kr(l?m:v,r),a}function Gu(t,r,e){var n=zu(e,r),i=Uu(e,r),a=function ed(t,r){return t.sourceAnchor?t.sourceAnchor:zu(t,r).center()}(e,r),s=function td(t,r){return t.targetAnchor?t.targetAnchor:Uu(t,r).center()}(e,r);n=n.union(Xs(a)),i=i.union(Xs(s)),(t=Qt(t).map(de)).unshift(a),t.push(s);for(var l,f=[],g=0,m=t.length-1;g<m;g++){var v=null,A=t[g],B=t[g+1],Y=!!Kr(A,B);if(0===g)g+1===m?n.intersect(i.clone().inflate(1))?v=Zs(A,B,n,i):Y||(v=nd(A,B,n,i)):n.containsPoint(B)?v=Zs(A,B,n,Xs(B).moveAndExpand(Ks(r))):Y||(v=ra(A,B,n));else if(g+1===m){var te=Y&&Kr(B,A)===l;i.containsPoint(A)||te?v=Zs(A,B,Xs(A).moveAndExpand(Ks(r)),i,l):Y||(v=Qs(A,B,i,l))}else Y||(v=Js(A,B,l));v?(Array.prototype.push.apply(f,v.points),l=v.direction):l=Kr(A,B),g+1<m&&f.push(B)}return f}var po={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,r=this.cost();return[{offsetX:t,offsetY:0,cost:r},{offsetX:-t,offsetY:0,cost:r},{offsetX:0,offsetY:t,cost:r},{offsetX:0,offsetY:-t,cost:r}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,r,e){if(!vn(Gu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Gu(t,bt({},po,r),e)},fallbackRoute:function(t,r,e){return null},draggingRoute:null};function Ss(t){this.map={},this.options=t,this.mapGridSize=100}function yi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function xi(t,r){return r&&r.paddingBox?t.sourceBBox.clone().moveAndExpand(r.paddingBox):t.sourceBBox.clone()}function ql(t,r){return r&&r.paddingBox?t.targetBBox.clone().moveAndExpand(r.paddingBox):t.targetBBox.clone()}function Wu(t,r){return t.sourceAnchor?t.sourceAnchor:xi(t,r).center()}function Na(t,r,e,n,i){var a=360/e,s=t.theta(function ia(t,r,e,n){var i=n.step;return new de(t.x+(r.x-t.x)/e.x*i,t.y+(r.y-t.y)/e.y*i)}(t,r,n,i)),l=De(s+a/2);return a*Math.floor(l/a)}function $u(t,r){var e=Math.abs(t-r);return e>180?360-e:e}function tc(t,r){if(!t)return r;var e=Math.abs(t),n=Math.round(e/r);return n?r+(e-n*r)/n:e}function lr(t,r){return t.round(r)}function Qa(t,r,e){return lr(function nc(t,r){var e=r.source,n=tt(t.x-e.x,r.x)+e.x,i=tt(t.y-e.y,r.y)+e.y;return new de(n,i)}(t.clone(),r),e)}function Za(t){return t.clone().toString()}function Ni(t){return new de(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Yu(t,r,e,n,i,a,s){for(var v,l=[],f=Ni(i.difference(e)),g=Za(e),m=t[g];m;){var A=Ni((v=r[g]).difference(m));A.equals(f)||(l.unshift(v),f=A),m=t[g=Za(m)]}var B=r[g];return Ni(B.difference(n)).equals(f)||l.unshift(B),l}function Ts(t,r){for(var e=1/0,n=0,i=r.length;n<i;n++){var a=t.manhattanDistance(r[n]);a<e&&(e=a)}return e}function oa(t,r,e,n,i){var a=i.precision,s=i.directionMap,l=t.difference(r.center()),f=mn(s)?Object.keys(s):[],g=Qt(e),m=f.reduce(function(v,A){if(g.includes(A)){for(var ge,B=s[A],Y=new de(t.x+B.x*(Math.abs(l.x)+r.width),t.y+B.y*(Math.abs(l.y)+r.height)),ue=new at(t,Y).intersect(r)||[],xe=ue.length,E=null,D=0;D<xe;D++){var z=ue[D],Z=t.squaredDistance(z);(void 0===ge||Z>ge)&&(ge=Z,E=z)}if(E){var ae=Qa(E,n,a);r.containsPoint(ae)&&(ae=Qa(ae.offset(B.x*n.x,B.y*n.y),n,a)),v.push(ae)}}return v},[]);return r.containsPoint(t)||m.push(Qa(t,n,a)),m}function rc(t,r,e,n){var a,s,i=n.precision;a=lr(t instanceof nt?Wu(this,n).clone():t.clone(),i),s=lr(r instanceof nt?function ec(t,r){return t.targetAnchor?t.targetAnchor:ql(t,r).center()}(this,n).clone():r.clone(),i);var f,g,m,v,l=function qs(t,r,e){return{source:r.clone(),x:tc(e.x-r.x,t),y:tc(e.y-r.y,t)}}(n.step,a,s);if(m=t instanceof nt?oa(f=a,t,n.startDirections,l,n):[f=a],r instanceof nt?(g=s,v=oa(s,r,n.endDirections,l,n)):v=[g=s],m=m.filter(sn=>!e(sn)),v=v.filter(sn=>!e(sn)),m.length>0&&v.length>0){for(var A=new yi,B={},Y={},te={},ue=0,xe=m.length;ue<xe;ue++){var ge=m[ue],E=Za(ge);A.add(E,Ts(ge,v)),B[E]=ge,te[E]=0}var Z,ae,D=n.previousDirectionAngle,z=void 0===D,ve=n.directions;!function rd(t,r,e){var n=e.step;Qt(e.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*r.x,i.gridOffsetY=i.offsetY/n*r.y})}(0,l,n);for(var we=ve.length,Me=Qt(v).reduce(function(sn,Mt){var ft=Za(Mt);return sn.push(ft),sn},[]),Ye=n.maximumLoops;!A.isEmpty()&&Ye>0;){var yn,We=A.pop(),et=B[We],ut=Y[We],lt=te[We],Et=void 0===ut,In=et.equals(f);yn=Et?z?In?null:Na(f,et,we,l,n):D:Na(ut,et,we,l,n);var Rn=m.length===v.length;if(Rn)for(var At=0;At<m.length;At++)if(!m[At].equals(v[At])){Rn=!1;break}if((!Et||!Rn)&&Me.indexOf(We)>=0)return n.previousDirectionAngle=yn,Yu(Y,B,et,f,g);for(ue=0;ue<we;ue++){var Ot=(Z=ve[ue]).angle;if(ae=$u(yn,Ot),z&&In||!(ae>n.maxAllowedDirectionChange)){var kt=Qa(et.clone().offset(Z.gridOffsetX,Z.gridOffsetY),l,i),rn=Za(kt);if(!A.isClose(rn)&&!e(kt)){if(Me.indexOf(rn)>=0&&!kt.equals(g)&&$u(Ot,Na(kt,g,we,l,n))>n.maxAllowedDirectionChange)continue;var Xt=lt+Z.cost+(In?0:n.penalties[ae]);(!A.isOpen(rn)||Xt<te[rn])&&(B[rn]=kt,Y[rn]=et,te[rn]=Xt,A.add(rn,Xt+Ts(kt,v)))}}}Ye--}}return n.fallbackRoute.call(this,f,g,n)}Ss.prototype.build=function(t,r){var e=this.options,n=Qt(e.excludeEnds).reduce(function(f,g){var m=r.get(g);if(m){var v=t.getCell(m.id);v&&f.push(v)}return f},[]),i=[],a=t.getCell(r.get("source").id);a&&(i=vs(i,a.getAncestors().map(function(f){return f.id})));var s=t.getCell(r.get("target").id);s&&(i=vs(i,s.getAncestors().map(function(f){return f.id})));var l=this.mapGridSize;return t.getElements().reduce(function(f,g){var m=Qt(e.excludeTypes).includes(g.get("type")),v=n.find(function(D){return D.id===g.id}),A=i.includes(g.id);if(!(m||v||A))for(var Y=g.getBBox().moveAndExpand(e.paddingBox),te=Y.origin().snapToGrid(l),ue=Y.corner().snapToGrid(l),xe=te.x;xe<=ue.x;xe+=l)for(var ge=te.y;ge<=ue.y;ge+=l){var E=xe+"@"+ge;f[E]=f[E]||[],f[E].push(Y)}return f},this.map),this},Ss.prototype.isPointAccessible=function(t){var r=t.clone().snapToGrid(this.mapGridSize).toString();return Qt(this.map[r]).every(function(e){return!e.containsPoint(t)})},yi.prototype.add=function(t,r){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=r;var e=Ri(this.items,t,function(n){return this.values[n]}.bind(this));this.items.splice(e,0,t)},yi.prototype.remove=function(t){this.hash[t]=this.CLOSE},yi.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},yi.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},yi.prototype.isEmpty=function(){return 0===this.items.length},yi.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const Ku=function(t,r,e){return function Xu(t,r,e){(function Jr(t){if(t.directions=ur(t,"directions"),t.penalties=ur(t,"penalties"),t.paddingBox=ur(t,"paddingBox"),t.padding=ur(t,"padding"),t.padding){var r=St(t.padding);t.paddingBox={x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}Qt(t.directions).forEach(function(e){var n=new de(0,0),i=new de(e.offsetX,e.offsetY);e.angle=De(n.theta(i))})})(r),e.options.perpendicular=!!r.perpendicular;var n=xi(e,r),i=ql(e,r),a=Wu(e,r);let s;if("function"==typeof r.isPointObstacle)s=r.isPointObstacle;else{const E=new Ss(r);E.build(e.paper.model,e.model),s=D=>!E.isPointAccessible(D)}for(var m,v,l=Qt(t).map(de),f=[],g=a,A=0,B=l.length;A<=B;A++){var Y=null;if(v=m||n,!(m=l[A])&&(m=i,(!e.model.get("source").id||!e.model.get("target").id)&&vn(r.draggingRoute))){var ue=v===n?a:v,xe=m.origin();Y=r.draggingRoute.call(e,ue,xe,r)}if(null===(Y=Y||rc.call(e,v,m,s,r)))return r.fallbackRouter(t,r,e);var ge=Y[0];ge&&ge.equals(g)&&Y.shift(),g=Y[Y.length-1]||g,Array.prototype.push.apply(f,Y)}return f}(t,bt({},po,r),e)};var id={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,r=this.cost(),e=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:r},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:r},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:r},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:r},{offsetX:t,offsetY:-t,cost:e}]},fallbackRoute:function(t,r,e){var n=t.theta(r),i=[],a={x:r.x,y:t.y},s={x:t.x,y:r.y};if(n%180>90){var l=a;a=s,s=l}var f=n%90<45?a:s,g=new at(t,f),m=90*Math.ceil(n/90),v=de.fromPolar(g.squaredLength(),xt(m+135),f),A=new at(r,v),B=g.intersection(A),Y=B||r,ue=360/e.directions.length,xe=(B?Y:t).theta(r),ge=De(xe+ue/2),E=ue*Math.floor(ge/ue);return e.previousDirectionAngle=E,Y&&i.push(Y.round()),i.push(r),i}};const od=function(t,r,e){if(!vn(Ku))throw new Error("Metro requires the manhattan router.");return Ku(t,bt({},id,r),e)};var ic=["arc","gap","cubic"],ad=["smooth"],eu=1/3,aa=2/3;function Zu(t,r,e){var n=[].concat(t,e,r);return n.reduce(function(i,a,s){var l=n[s+1];return null!=l&&(i[s]=Vr(a,l)),i},[])}function ac(t,r){return Vr(t,r).squaredLength()}function sc(t,r,e,n){var a,i=new pt;return a=pt.createSegment("M",t[0].start),i.appendSegment(a),Qt(t).forEach(function(s,l){if(s.isJump){var f,g,m,v;if("arc"===e){f=-90,g=s.start.difference(s.end);var A=Number(g.x<0||0===g.x&&g.y<0);A&&(f+=180);var te,B=s.midpoint(),Y=new at(B,s.end).rotate(B,f);m=(te=new at(s.start,B)).pointAt(2/3).rotate(s.start,f),v=Y.pointAt(1/3).rotate(Y.end,-f),a=pt.createSegment("C",m,v,Y.end),i.appendSegment(a),te=new at(B,s.end),m=Y.pointAt(1/3).rotate(Y.end,f),v=te.pointAt(1/3).rotate(s.end,-f),a=pt.createSegment("C",m,v,s.end),i.appendSegment(a)}else if("gap"===e)a=pt.createSegment("M",s.end),i.appendSegment(a);else if("cubic"===e){f=s.start.theta(s.end);var ue=.6*r,xe=1.35*r;g=s.start.difference(s.end),(A=Number(g.x<0||0===g.x&&g.y<0))&&(xe*=-1),m=de(s.start.x+ue,s.start.y+xe).rotate(s.start,f),v=de(s.end.x-ue,s.end.y+xe).rotate(s.end,f),a=pt.createSegment("C",m,v,s.end),i.appendSegment(a)}}else{var ge=t[l+1];0==n||!ge||ge.isJump?(a=pt.createSegment("L",s.end),i.appendSegment(a)):function uc(t,r,e,n,i){var B,a=e.distance(n)/2,s=e.distance(i)/2,l=-Math.min(t,a),f=-Math.min(t,s),g=e.clone().move(n,l).round(),m=e.clone().move(i,f).round(),v=new de(eu*g.x+aa*e.x,aa*e.y+eu*g.y),A=new de(eu*m.x+aa*e.x,aa*e.y+eu*m.y);B=pt.createSegment("L",g),r.appendSegment(B),B=pt.createSegment("C",v,A,m),r.appendSegment(B)}(n,i,s.end,s.start,ge.end)}}),i}const el=function(t,r,e,n){!function sd(t){var r=t.paper,e=r._jumpOverUpdateList;if(null==e){e=r._jumpOverUpdateList=[];var n=r.model;n.on("batch:stop",function(){this.hasActiveBatch()||function qu(t){for(var r=t._jumpOverUpdateList,e=0;e<r.length;e++){const n=r[e],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}(r)}),n.on("reset",function(){e=r._jumpOverUpdateList=[]})}e.indexOf(t)<0&&(e.push(t),t.listenToOnce(t.model,"change:connector remove",function(){e.splice(e.indexOf(t),1)}))}(this);var i=n.raw,a=n.size||5,s=n.jump&&(""+n.jump).toLowerCase(),l=n.radius||0,f=n.ignoreConnectors||ad;-1===ic.indexOf(s)&&(s=ic[0]);var g=this.paper,v=g.model.getLinks();if(1===v.length)return sc(Zu(t,r,e),a,s,l);var A=this.model,B=v.indexOf(A),Y=g.options.defaultConnector||{},te=v.filter(function(z,Z){var ae=z.get("connector")||Y;return!(Qt(f).includes(ae.name)||Z>B&&"jumpover"===ae.name)}),ue=te.map(function(z){return g.findViewByModel(z)}),xe=Zu(t,r,e),ge=ue.map(function(z){return null==z?[]:z===this?xe:Zu(z.sourcePoint,z.targetPoint,z.route)},this),E=xe.reduce(function(z,Z){var ae=te.reduce(function(ve,we,Me){if(we!==A){var Ye=function oc(t,r){return Qt(r).reduce(function(e,n){var i=t.intersection(n);return i&&e.push(i),e},[])}(Z,ge[Me]);ve.push.apply(ve,Ye)}return ve},[]).sort(function(ve,we){return ac(Z.start,ve)-ac(Z.start,we)});return ae.length>0?z.push.apply(z,function ud(t,r,e){return r.reduce(function(n,i,a){if(!0===i.skip)return n;var s=n.pop()||t,l=Yr(i).move(s.start,-e),f=Yr(i).move(s.start,+e),g=r[a+1];if(null!=g){var m=f.distance(g);m<=e&&(f=g.move(s.start,m),g.skip=!0)}else if(l.distance(s.end)<2*e+1)return n.push(s),n;if(f.distance(s.start)<2*e+1)return n.push(s),n;var B=Vr(l,f);return B.isJump=!0,n.push(Vr(s.start,l),B,Vr(f,s.end)),n},[])}(Z,ae,a)):z.push(Z),z},[]),D=sc(E,a,s,l);return i?D:D.serialize()},ld=function(t,r,e,n){var i=n&&n.raw,a=[t].concat(e).concat([r]),s=new bn(a),l=new pt(s);return i?l:l.serialize()},tl=function(t,r,e,n){n||(n={});var l,i=n.radius||10,a=n.raw,s=new pt;l=pt.createSegment("M",t),s.appendSegment(l);for(var m,v,A,B,Y,te,ue,xe,ge,E,D,f=1/3,g=2/3,z=0,Z=e.length;z<Z;z++)m=new de(e[z]),v=e[z-1]||t,A=e[z+1]||r,B=Y||m.distance(v)/2,Y=m.distance(A)/2,te=-Math.min(i,B),ue=-Math.min(i,Y),xe=m.clone().move(v,te).round(),ge=m.clone().move(A,ue).round(),E=new de(f*xe.x+g*m.x,g*m.y+f*xe.y),D=new de(f*ge.x+g*m.x,g*m.y+f*ge.y),l=pt.createSegment("L",xe),s.appendSegment(l),l=pt.createSegment("C",E,D,ge),s.appendSegment(l);return l=pt.createSegment("L",r),s.appendSegment(l),a?s:s.serialize()},lc=function(t,r,e,n){var a,i=n&&n.raw;if(e&&0!==e.length){var s=[t].concat(e).concat([r]),l=Ft.throughPoints(s);a=new pt(l)}else{var f;if(a=new pt,f=pt.createSegment("M",t),a.appendSegment(f),Math.abs(t.x-r.x)>=Math.abs(t.y-r.y)){var g=(t.x+r.x)/2;f=pt.createSegment("C",g,t.y,g,r.y,r.x,r.y),a.appendSegment(f)}else{var m=(t.y+r.y)/2;f=pt.createSegment("C",t.x,m,r.x,m,r.x,r.y),a.appendSegment(f)}}return i?a:a.serialize()},bi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Gr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},qa=function(t,r,e=[],n={},i){const a=Boolean(n.raw),{direction:s=bi.AUTO,precision:l=3}=n,f={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new de(n.sourceTangent):null,targetTangent:n.targetTangent?new de(n.targetTangent):null};f.sourceDirection="string"==typeof n.sourceDirection?n.sourceDirection:"number"==typeof n.sourceDirection?new de(1,0).rotate(null,n.sourceDirection):n.sourceDirection?new de(n.sourceDirection).normalize():null,f.targetDirection="string"==typeof n.targetDirection?n.targetDirection:"number"==typeof n.targetDirection?new de(1,0).rotate(null,n.targetDirection):n.targetDirection?new de(n.targetDirection).normalize():null;const g=[t,...e.map(te=>new de(te)),r];let m,v;if(f.sourceTangent)m=f.sourceTangent;else{const te=function il(t,r,e,n){if(n.sourceDirection)switch(n.sourceDirection){case Gr.UP:return new de(0,-1);case Gr.DOWN:return new de(0,1);case Gr.LEFT:return new de(-1,0);case Gr.RIGHT:return new de(1,0);case Gr.AUTO:return nl(t,r);case Gr.CLOSEST_POINT:return tu(0,r);case Gr.OUTWARDS:return nu(t,r);default:return n.sourceDirection}switch(e){case bi.HORIZONTAL:return function cd(t,r,e){const{sourceBBox:n}=t;let i;return"left"===(i=n.width&&n.height?n.sideNearestToPoint(r[0]):n.x>r[1].x?"right":"left",i)?new de(-1,0):new de(1,0)}(t,r);case bi.VERTICAL:return function fc(t,r,e){const{sourceBBox:n}=t;let i;return"top"===(i=n.width&&n.height?n.sideNearestToPoint(r[0]):n.y>r[1].y?"bottom":"top",i)?new de(0,-1):new de(0,1)}(t,r);case bi.CLOSEST_POINT:return tu(0,r);case bi.OUTWARDS:return nu(t,r);default:return nl(t,r)}}(i,g,s,f),ue=g[0].distance(g[1])*f.coeff,ge=ol(te,g[1].difference(g[0]).normalize());if(ge>Math.PI/4){const E=ue+(ge-Math.PI/4)*f.angleTangentCoefficient;m=te.clone().scale(E,E)}else m=te.clone().scale(ue,ue)}if(f.targetTangent)v=f.targetTangent;else{const te=function en(t,r,e,n){if(n.targetDirection)switch(n.targetDirection){case Gr.UP:return new de(0,-1);case Gr.DOWN:return new de(0,1);case Gr.LEFT:return new de(-1,0);case Gr.RIGHT:return new de(0,1);case Gr.AUTO:return dc(t,r);case Gr.CLOSEST_POINT:return rl(0,r);case Gr.OUTWARDS:return hc(t,r);default:return n.targetDirection}switch(e){case bi.HORIZONTAL:return function cc(t,r,e){const{targetBBox:n}=t;let i;return"left"===(i=n.width&&n.height?n.sideNearestToPoint(r[r.length-1]):n.x>r[r.length-2].x?"left":"right",i)?new de(-1,0):new de(1,0)}(t,r);case bi.VERTICAL:return function fd(t,r,e){const{targetBBox:n}=t;let i;return"top"===(i=n.width&&n.height?n.sideNearestToPoint(r[r.length-1]):n.y>r[r.length-2].y?"top":"bottom",i)?new de(0,-1):new de(0,1)}(t,r);case bi.CLOSEST_POINT:return rl(0,r);case bi.OUTWARDS:return hc(t,r);default:return dc(t,r)}}(i,g,s,f),ue=g.length-1,xe=g[ue-1].distance(g[ue])*f.coeff,E=ol(te,g[ue-1].difference(g[ue]).normalize());if(E>Math.PI/4){const D=xe+(E-Math.PI/4)*f.angleTangentCoefficient;v=te.clone().scale(D,D)}else v=te.clone().scale(xe,xe)}const B=function pc(t,r,e,n){const{tau:i,coeff:a}=n,s=[],l=[],f=[],g=t.length-1;for(let m=0;m<g;m++)s[m]=t[m].distance(t[m+1]);l[0]=r,l[g]=e;for(let m=1;m<g;m++){let v,A;v=1===m?t[m-1].clone().offset(l[m-1].x,l[m-1].y):t[m-1].clone(),A=m===g-1?t[m+1].clone().offset(l[m+1].x,l[m+1].y):t[m+1].clone();const B=v.difference(t[m]).normalize(),Y=A.difference(t[m]).normalize(),te=ol(B,Y);let xe,ue=(Math.PI-te)/2;const ge=es(B,Y);let E;E=es(t[m].difference(t[m+1]),t[m].difference(t[m-1])),ge<0&&(ue=-ue),te<Math.PI/2&&(ue<0&&E<0||ue>0&&E>0)&&(ue-=Math.PI),xe=Y.clone(),dd(xe,ue);const D=xe.clone(),z=xe.clone(),Z=s[m-1]*a,ae=s[m]*a;D.scale(Z,Z),z.scale(ae,ae),l[m]=[D,z]}for(let m=0;m<g;m++){let v,A;v=0===m?t[m+1].difference(l[m].x/i,l[m].y/i):t[m+1].difference(l[m][1].x/i,l[m][1].y/i),A=m===g-1?t[m].clone().offset(l[m+1].x/i,l[m+1].y/i):t[m].difference(l[m+1][0].x/i,l[m+1][0].y/i),f[m]=[v,t[m],t[m+1],A]}return f}(g,m,v,f).map(te=>function hd(t,r){const{tau:e}=r,n=new de;n.x=t[1].x+(t[2].x-t[0].x)/(6*e),n.y=t[1].y+(t[2].y-t[0].y)/(6*e);const i=new de;return i.x=t[2].x+(t[3].x-t[1].x)/(6*e),i.y=t[2].y+(t[3].y-t[1].y)/(6*e),new Ft(t[1],n,i,t[2])}(te,f)),Y=new pt(B).round(l);return a?Y:Y.serialize()};function nl(t,r,e){const{sourceBBox:n}=t;let i;switch(i=n.sideNearestToPoint(n.width&&n.height?r[0]:r[1]),i){case"top":return new de(0,-1);case"bottom":return new de(0,1);case"right":return new de(1,0);case"left":return new de(-1,0)}}function dc(t,r,e){const{targetBBox:n}=t;let i;switch(i=n.sideNearestToPoint(n.width&&n.height?r[r.length-1]:r[r.length-2]),i){case"top":return new de(0,-1);case"bottom":return new de(0,1);case"right":return new de(1,0);case"left":return new de(-1,0)}}function tu(t,r,e){return r[1].difference(r[0]).normalize()}function rl(t,r,e){const n=r.length-1;return r[n-1].difference(r[n]).normalize()}function nu(t,r,e){const{sourceBBox:n}=t,i=n.center();return r[0].difference(i).normalize()}function hc(t,r,e){const{targetBBox:n}=t,i=n.center();return r[r.length-1].difference(i).normalize()}function dd(t,r){const e=Math.cos(r),n=Math.sin(r),a=n*t.x+e*t.y;t.x=e*t.x-n*t.y,t.y=a}function ol(t,r){let e=t.dot(r)/(t.magnitude()*r.magnitude());return e<-1&&(e=-1),e>1&&(e=1),Math.acos(e)}function es(t,r){return t.x*r.y-t.y*r.x}qa.Directions=bi,qa.TangentDirections=Gr;const Bt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Wr=dn.extend({className:function(){var t=dn.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){dn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Bt.RENDER],attrs:[Bt.UPDATE],router:[Bt.UPDATE],connector:[Bt.CONNECTOR],smooth:[Bt.UPDATE],manhattan:[Bt.UPDATE],toolMarkup:[Bt.LEGACY_TOOLS],labels:[Bt.LABELS],labelMarkup:[Bt.LABELS],vertices:[Bt.VERTICES,Bt.UPDATE],vertexMarkup:[Bt.VERTICES],source:[Bt.SOURCE,Bt.UPDATE],target:[Bt.TARGET,Bt.UPDATE]},initFlag:[Bt.RENDER,Bt.SOURCE,Bt.TARGET,Bt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,r){if(r||(r={}),this.hasFlag(t,Bt.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Bt.SOURCE)}if(this.hasFlag(t,Bt.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Bt.TARGET)}const{paper:e,sourceView:n,targetView:i}=this;if(e&&(n&&!e.isViewMounted(n)||i&&!e.isViewMounted(i)))return t;if(this.hasFlag(t,Bt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(r),this.removeFlag(t,[Bt.RENDER,Bt.UPDATE,Bt.VERTICES,Bt.LABELS,Bt.TOOLS,Bt.LEGACY_TOOLS,Bt.CONNECTOR]);let a=!1;this.hasFlag(t,Bt.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Bt.VERTICES));const{model:s}=this,{attributes:l}=s;let f=this.hasFlag(t,Bt.LABELS),g=this.hasFlag(t,Bt.LEGACY_TOOLS);f&&(this.onLabelsChange(s,l.labels,r),t=this.removeFlag(t,Bt.LABELS),a=!0),g&&(this.renderTools(),t=this.removeFlag(t,Bt.LEGACY_TOOLS));const m=this.hasFlag(t,Bt.UPDATE),v=this.hasFlag(t,Bt.CONNECTOR);return(m||v)&&(m?r.translateBy&&s.isRelationshipEmbeddedIn(r.translateBy)?this.translate(r.tx,r.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(r),t=this.removeFlag(t,[Bt.UPDATE,Bt.TOOLS,Bt.CONNECTOR]),f=!1,g=!1,a=!0),f&&this.updateLabelPositions(),g&&this.updateToolsPosition(),a&&this.updateHighlighters(),this.hasFlag(t,Bt.TOOLS)&&(this.updateTools(r),t=this.removeFlag(t,Bt.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Bt.UPDATE),t)},isLabelsRenderRequired:function(t={}){const r=this.model.previous("labels");if(!r)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var e=t.propertyPathArray||[],n=e.length;if(n>1&&r[e[1]]){if(2===n)return"markup"in Object(t.propertyValue);if("markup"!==e[2])return!1}}return!0},onLabelsChange:function(t,r,e){this.isLabelsRenderRequired(e)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,r=t.get("markup")||t.markup;if(!r)throw new Error("dia.LinkView: markup required");if(Array.isArray(r))return this.renderJSONMarkup(r);if("string"==typeof r)return this.renderStringMarkup(r);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var r=this.parseDOMJSON(t,this.el);this.selectors=r.selectors,this.vel.append(r.fragment)},renderStringMarkup:function(t){var r=Pe(t);Array.isArray(r)||(r=[r]);for(var e=this._V,n=0,i=r.length;n<i;n++){var a=r[n],s=a.attr("class");s&&(s=R(s),e[mt.camelCase(s)]=a)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(r)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var r=Pe(t),e=document.createDocumentFragment();if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++)e.appendChild(r[n].node);else e.appendChild(r.node);return{fragment:e,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var r=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var e,n=r.childNodes;return(e=n.length>1||"G"!==n[0].nodeName.toUpperCase()?Pe("g").append(r):Pe(n[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,r=t.labels,e=this._labelCache={},n=this._labelSelectors={},i=this.model,a=i.attributes.labels||[],s=a.length;if(0===s)return r&&r.remove(),this;r?r.empty():(r=t.labels=Pe("g").addClass("labels"),this.options.labelsLayer&&(r.addClass(Lr(ur(this,"className"))),r.attr("model-id",i.id)));for(var l=0;l<s;l++){var m,v,g=this._normalizeLabelMarkup(this._getLabelMarkup(a[l].markup));if(g)m=g.node,v=g.selectors;else{var B=this._normalizeLabelMarkup(this._getLabelMarkup(i._builtins.defaultLabel.markup)),Y=i._getDefaultLabel(),ue=this._normalizeLabelMarkup(this._getLabelMarkup(Y.markup))||B;m=ue.node,v=ue.selectors}m.setAttribute("label-idx",l),r.append(m),e[l]=m;var xe=this.selector;if(v[xe])throw new Error("dia.LinkView: ambiguous label root selector.");v[xe]=m,n[l]=v}return r.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:r,model:e,_V:n,options:i}=this,{labels:a}=n;if(!a||!e.hasLabels())return;const{node:s}=a;i.labelsLayer?r.getLayerView(i.labelsLayer).insertSortedNode(s,e.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){const{options:t,_V:r}=this;if(!r)return;const{labels:e}=r;e&&t.labelsLayer&&e.remove()},onMount:function(){this.mountLabels()},unmount:function(){dn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(t,r){const e=this._labelCache[t];if(!e)return null;const n=this._labelSelectors[t],[i=null]=this.findBySelector(r,e,n);return i},_mergeLabelAttrs:function(t,r,e,n){return null===r?null:void 0===r?null===e?null:void 0===e?t?void 0:n:t?e:br({},n,e):t?br({},e,r):br({},n,e,r)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,r=t.get("labels")||[],e=this.can("labelMove"),i=t._builtins.defaultLabel.attrs,a=t._getDefaultLabel(),s=a.markup,l=a.attrs,f=0,g=r.length;f<g;f++){var m=this._labelCache[f];m.setAttribute("cursor",e?"move":"default");var v=this._labelSelectors[f],A=r[f],te=this._mergeLabelAttrs(A.markup||s,A.attrs,l,i);this.updateDOMSubtreeAttributes(m,te,{rootBBox:new nt(A.size),selectors:v})}return this},renderTools:function(){if(!this._V.linkTools)return this;var n,t=mt(this._V.linkTools.node).empty(),r=sr(this.model.get("toolMarkup")||this.model.toolMarkup),e=Pe(r());return t.append(e.node),this._toolCache=e,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(r=sr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=Pe(r())):n=e.clone(),t.append(n.node),this._tool2Cache=n),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=mt(this._V.markerVertices.node).empty(),r=sr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(e,n){t.append(Pe(r(bt({idx:n},e))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=mt(this._V.markerArrowheads.node);t.empty();var r=sr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Pe(r({end:"source"})),this._V.targetArrowhead=Pe(r({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const e=this.model,n=e.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],a=i.length,s=new bn(i);s.simplify({threshold:.001});const l=s.points.map(g=>g.toJSON()),f=l.length;return a===f?0:(e.vertices(l.slice(1,f-1),t),a-f)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new de(this.sourceAnchor);case"target":return new de(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new de(this.sourcePoint);case"target":return new de(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var r=this.sourceView;if(!r)break;return this.sourceMagnet||r.el;case"target":var e=this.targetView;if(!e)break;return this.targetMagnet||e.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,r=0){const{route:e,path:n}=this;if(!e||!n)return;const i=new bn(e);i.translate(t,r),this.route=i.points,this._translateConnectionPoints(t,r),n.translate(t,r),this.updateDOM()},updateDOM(){const{el:t,model:r,selectors:e}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,r.attr(),{selectors:e}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,r=t.vertices(),e=this.findAnchors(r),n=this.sourceAnchor=e.source,i=this.targetAnchor=e.target,a=this.findRoute(r);this.route=a;var s=this.findConnectionPoints(a,n,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:t,sourcePoint:r,targetPoint:e}=this,n=this.findMarkerPoints(t,r,e),i=this.findPath(t,n.source||r,n.target||e);this.path=i},findMarkerPoints:function(t,r,e){var s,l,n=t[0],i=t[t.length-1],a=this._markerCache;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),s=de(r).move(n||e,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),l=de(e).move(i||r,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=s||r.clone(),a.targetPoint=l||e.clone(),{source:s,target:l}},findAnchorsOrdered:function(t,r,e,n){var i,a,s,l,f=this.model,g=f.get(t),m=f.get(e),v=this.getEndView(t),A=this.getEndView(e),B=this.getEndMagnet(t),Y=this.getEndMagnet(e);v?(s=r?new de(r):A?Y:new de(m),i=this.getAnchor(g.anchor,v,B,s,t)):i=new de(g),A?(l=new de(n||i),a=this.getAnchor(m.anchor,A,Y,l,e)):a=new de(m);var te={};return te[t]=i,te[e]=a,te},findAnchors:function(t){var r=this.model,e=t[0],n=t[t.length-1];return r.target().priority&&!r.source().priority?this.findAnchorsOrdered("target",n,"source",e):this.findAnchorsOrdered("source",e,"target",n)},findConnectionPoints:function(t,r,e){var v,A,B,xe,n=t[0],i=t[t.length-1],a=this.model,s=a.get("source"),l=a.get("target"),f=this.sourceView,g=this.targetView,m=this.paper.options;if(f&&!f.isNodeConnection(this.sourceMagnet)){v=this.sourceMagnet||f.el;var Y=s.connectionPoint||m.defaultConnectionPoint,ue=new at(n||e,r);B=this.getConnectionPoint(Y,f,v,ue,"source")}else B=r;if(g&&!g.isNodeConnection(this.targetMagnet)){A=this.targetMagnet||g.el;var ge=l.connectionPoint||m.defaultConnectionPoint,D=new at(i||r,e);xe=this.getConnectionPoint(ge,g,A,D,"target")}else xe=e;return{source:B,target:xe}},getAnchor:function(t,r,e,n,i){var l,a=r.isNodeConnection(e),s=this.paper.options;if(t||(t=a?s.defaultLinkAnchor:s.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:s.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)l=t;else{var f=t.name;if("function"!=typeof(l=s[a?"linkAnchorNamespace":"anchorNamespace"][f]))throw new Error("Unknown anchor: "+f)}var m=l.call(this,r,e,n,t.args||{},i,this);return m?m.round(this.decimalsRounding):new de},getConnectionPoint:function(t,r,e,n,i){var a,g,s=n.end,l=this.paper.options;if("function"==typeof l.linkConnectionPoint&&(a=l.linkConnectionPoint(this,r,e===r.el?void 0:e,n.start,i)))return a;if(!t)return s;if("function"==typeof t)g=t;else{var m=t.name;if("function"!=typeof(g=l.connectionPointNamespace[m]))throw new Error("Unknown connection point: "+m)}return(a=g.call(this,n,r,e,t.args||{},i,this))?a.round(this.decimalsRounding):s},_translateConnectionPoints:function(t,r){var e=this._markerCache;e.sourcePoint.offset(t,r),e.targetPoint.offset(t,r),this.sourcePoint.offset(t,r),this.targetPoint.offset(t,r),this.sourceAnchor.offset(t,r),this.targetAnchor.offset(t,r)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var r=this.model,e=r.get("labels")||[];if(!e.length)return this;for(var i=r._builtins.defaultLabel.position,a=r._getDefaultLabel(),s=this._normalizeLabelPosition(a.position),l=br({},i,s),f=0,g=e.length;f<g;f++){var m=this._labelCache[f];if(m){var A=this._normalizeLabelPosition(e[f].position),B=br({},l,A),Y=this._getLabelTransformationMatrix(B);m.setAttribute("transform",Pe.matrixToTransformString(Y)),this._cleanLabelMatrices(f)}}return this},_cleanLabelMatrices:function(t){const{metrics:r,_labelSelectors:e}=this,n=e[t];if(n)for(let i in n){const{id:a}=n[i];a&&a in r&&delete r[a].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",r=this.options.linkToolsOffset,e=this.getConnectionLength();if(!Number.isNaN(e)){e<this.options.shortLinkLength&&(t="scale(.5)",r/=2);var n=this.getPointAtLength(r);this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&e>=this.options.longLinkLength?(n=this.getPointAtLength(e-(this.options.doubleLinkToolsOffset||r)),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===mt.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:r,paper:e}=this,n=`${t}View`,i=r.get(t),a=i&&i.id;if(!a)return this[n]=null,this.updateEndMagnet(t),!0;const s=e.getModelById(a);if(!s)throw new Error("LinkView: invalid "+t+" cell.");const l=s.findView(e);return!!l&&(this[n]=l,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const r=`${t}Magnet`,e=this.getEndView(t);if(e){let n=e.getMagnetFromLinkEnd(this.model.get(t));n===e.el&&(n=null),this[r]=n}else this[r]=null},_translateAndAutoOrientArrows:function(t,r){var e=Qt(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,e[0]||this.targetPoint,this.paper.cells),r&&r.translateAndAutoOrient(this.targetPoint,e[e.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,r){return null===t?null:void 0===t?null===r?null:r:br({},r,t)},addLabel:function(t,r,e,n){var i,a,l,s=0;"number"!=typeof t?(i=t.x,a=t.y,"number"==typeof r?(s=r,l=e):l=r):(i=t,a=r,"number"==typeof e?(s=e,l=n):l=e);var f=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(l,f),v={position:this.getLabelPosition(i,a,s,m)};return this.model.insertLabel(-1,v,l),-1},addVertex:function(t,r,e){var n="number"!=typeof t,i=n?t.x:t,a=n?t.y:r,s=n?r:e,l={x:i,y:a},f=this.getVertexIndex(i,a);return this.model.insertVertex(f,l,s),f},sendToken:function(t,r,e){var i,a,s;mn(r)?(i=r.duration,a="reverse"===r.direction,s=r.connection):(i=r,a=!1,s=null);var l={dur:(i=i||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};a&&(l.keyPoints="1;0",l.keyTimes="0;1");var g,f=Pe(t);if("string"==typeof s)g=this.findBySelector(s,this.el,this.selectors)[0];else{var m=this._V;g=m.connection?m.connection.node:this.el.querySelector("path")}if(!(g instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");f.appendTo(this.paper.cells).animateAlongPath(l,g),setTimeout(function n(v,A){return function(){v.remove(),"function"==typeof A&&A()}}(f,e),i)},findRoute:function(t){t||(t=[]);var r=this.paper.options.routerNamespace||x,e=this.model.router(),n=this.paper.options.defaultRouter;if(!e){if(!n)return t.map(de);e=n}var i=vn(e)?e:r[e.name];if(!vn(i))throw new Error('dia.LinkView: unknown router: "'+e.name+'".');return i.call(this,t,e.args||{},this)||t.map(de)},findPath:function(t,r,e){var n=this.paper.options.connectorNamespace||T,i=this.model.connector();i||(i=this.paper.options.defaultConnector||{});var s=vn(i)?i:n[i.name];if(!vn(s))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var l=Jt(i.args||{});l.raw=!0;var f=s.call(this,r,e,t,l,this);return"string"==typeof f&&(f=new pt(Pe.normalizePathData(f))),f},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var r=this.metrics;if(r.hasOwnProperty("data"))return r.data;var e=t.serialize();return r.data=e,e},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var r=this.metrics;if(r.hasOwnProperty("segmentSubdivisions"))return r.segmentSubdivisions;var e=t.getSegmentSubdivisions();return r.segmentSubdivisions=e,e},getConnectionLength:function(){var t=this.path;if(!t)return 0;var r=this.metrics;if(r.hasOwnProperty("length"))return r.length;var e=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return r.length=e,e},getPointAtLength:function(t){var r=this.path;return r?r.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var r=this.path;return r?(ye(t)&&(t=parseFloat(t)/100),r.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var r=this.path;return r?r.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var r=this.path;return r?r.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var r=this.path;return r?r.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var r=this.path;return r?r.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var r=this.path;return r?r.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,r,e,n){var s,i={},a=0;"number"==typeof e?(a=e,s=n):s=e,s&&(i.args=s);var te,ue,l=!(s&&s.absoluteDistance),f=s&&s.absoluteDistance&&s.reverseDistance,g=s&&s.absoluteOffset,m=this.path,v={segmentSubdivisions:this.getConnectionSubdivisions()},A=new de(t,r),B=m.closestPointT(A,v),Y=m.lengthAtT(B,v);if(l&&(Y=Y/this.getConnectionLength()||0),f&&(Y=-1*(this.getConnectionLength()-Y)||1),i.distance=Y,g||(te=m.tangentAtT(B)),te)ue=te.pointOffset(A);else{var xe=m.pointAtT(B),ge=A.difference(xe);ue={x:ge.x,y:ge.y}}return i.offset=ue,i.angle=a,i},_getLabelTransformationMatrix:function(t){var r,e=0,n={};if("number"==typeof t)r=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");n=t.args||{},r=t.distance,e=t.angle||0}var i=r>0&&r<=1,a=0,s={x:0,y:0};if(t.offset){var l=t.offset;"number"==typeof l&&(a=l),l.x&&(s.x=l.x),l.y&&(s.y=l.y)}var te,f=0!==s.x||0!==s.y||0===a,g=n.keepGradient,m=n.ensureLegibility,v=this.path,A={segmentSubdivisions:this.getConnectionSubdivisions()},B=i?r*this.getConnectionLength():r,Y=v.tangentAtLength(B,A),ue=e;if(Y){if(f)(te=Y.start).offset(s);else{var xe=Y.clone();xe.rotate(Y.start,-90),xe.setLength(a),te=xe.end}g&&(ue=Y.angle()+e,m&&(ue=De((ue+90)%180-90)))}else te=v.start,f&&te.offset(s);return Pe.createSVGMatrix().translate(te.x,te.y).rotate(ue)},getLabelCoordinates:function(t){var r=this._getLabelTransformationMatrix(t);return new de(r.e,r.f)},getVertexIndex:function(t,r){for(var n=this.model.vertices(),i=this.getClosestPointLength(new de(t,r)),a=0,s=n.length;a<s&&!(i<this.getClosestPointLength(n[a]));a++);return a},notifyPointerdown(t,r,e){dn.prototype.pointerdown.call(this,t,r,e),this.notify("link:pointerdown",t,r,e)},notifyPointermove(t,r,e){dn.prototype.pointermove.call(this,t,r,e),this.notify("link:pointermove",t,r,e)},notifyPointerup(t,r,e){this.notify("link:pointerup",t,r,e),dn.prototype.pointerup.call(this,t,r,e)},pointerdblclick:function(t,r,e){dn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,r,e)},pointerclick:function(t,r,e){dn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,r,e)},contextmenu:function(t,r,e){dn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,r,e)},pointerdown:function(t,r,e){switch(this.notifyPointerdown(t,r,e),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,r,e);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,r,e);case"marker-arrowhead":return void this.dragArrowheadStart(t,r,e);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,r,e);case"marker-source":case"marker-target":return}this.dragStart(t,r,e)},pointermove:function(t,r,e){var n=this._dragData;switch(n&&this.eventData(t,n),this.eventData(t).action){case"vertex-move":this.dragVertex(t,r,e);break;case"label-move":this.dragLabel(t,r,e);break;case"arrowhead-move":this.dragArrowhead(t,r,e);break;case"move":this.drag(t,r,e)}n&&bt(n,this.eventData(t)),this.notifyPointermove(t,r,e)},pointerup:function(t,r,e){var n=this._dragData;switch(n&&(this.eventData(t,n),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,r,e);break;case"label-move":this.dragLabelEnd(t,r,e);break;case"arrowhead-move":this.dragArrowheadEnd(t,r,e);break;case"move":this.dragEnd(t,r,e)}this.notifyPointerup(t,r,e),this.checkMouseleave(t)},mouseover:function(t){dn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){dn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){dn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){dn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,r,e,n){dn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,r,e,n)},onevent:function(t,r,e,n){var i=Pe(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===r)return void this.model.remove({ui:!0});this.notify(r,t,e,n)}this.notifyPointerdown(t,e,n),this.paper.delegateDragEvents(this,t.data)}else dn.prototype.onevent.apply(this,arguments)},onlabel:function(t,r,e){this.notifyPointerdown(t,r,e),this.dragLabelStart(t,r,e),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,r,e){if(this.can("vertexAdd")){var n=this.addVertex({x:r,y:e},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(t,r,e){if(this.can("labelMove")){var i=parseInt(t.currentTarget.getAttribute("label-idx"),10),a=this._getLabelPositionAngle(i),s=this._getLabelPositionArgs(i),l=this._getDefaultLabelPositionArgs(),f=this._mergeLabelPositionArgs(s,l);this.eventData(t,{action:"label-move",labelIdx:i,positionAngle:a,positionArgs:f,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,r,e){if(this.can("vertexMove")){var i=parseInt(t.target.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,r,e){if(this.can("vertexRemove")){var i=parseInt(t.target.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,r,e){if(this.can("arrowheadMove")){var i=t.target.getAttribute("end"),a=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,a)}},dragStart:function(t,r,e){!this.can("linkMove")||this.eventData(t,{action:"move",dx:r,dy:e})},dragLabel:function(t,r,e){var n=this.eventData(t),i={position:this.getLabelPosition(r,e,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset,this.model.label(n.labelIdx,i)},dragVertex:function(t,r,e){var n=this.eventData(t);this.model.vertex(n.vertexIdx,{x:r,y:e},{ui:!0})},dragArrowhead:function(t,r,e){this.paper.options.snapLinks?this._snapArrowhead(t,r,e):this._connectArrowhead(this.getEventTarget(t),r,e,this.eventData(t))},drag:function(t,r,e){var n=this.eventData(t);this.model.translate(r-n.dx,e-n.dy,{ui:!0}),this.eventData(t,{dx:r,dy:e})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,r,e){var n=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,r,e),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,t)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,r){var e=t.arrowhead,n=t.initialEnd,i=this.model.prop(e);if(i&&!gt.endsEqual(n,i)){var s=this.paper;n.id&&this.notify("link:disconnect",r,s.findViewByModel(n.id),t.initialMagnet,e),i.id&&this.notify("link:connect",r,s.findViewByModel(i.id),t.magnetUnderPointer,e)}},_snapArrowhead:function(t,r,e){const{paper:n}=this,{snapLinks:i,connectionStrategy:a}=n.options,s=this.eventData(t);var l=i.radius||50,f=n.findViewsInArea({x:r-l,y:e-l,width:2*l,height:2*l}),g=s.closestView||null,m=s.closestMagnet||null,v=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var A=Number.MAX_VALUE,B=new de(r,e);f.forEach(function(D){const z=[];"false"!==D.el.getAttribute("magnet")&&z.push({bbox:D.model.getBBox(),magnet:D.el}),D.$("[magnet]").toArray().forEach(Z=>{z.push({bbox:D.getNodeBBox(Z),magnet:Z})}),z.forEach(Z=>{const{magnet:ae,bbox:ve}=Z,we=ve.center().squaredDistance(B);we<A&&(m===ae||n.options.validateConnection.apply(n,s.validateConnectionArgs(D,D.el===ae?null:ae)))&&(A=we,s.closestView=D,s.closestMagnet=ae)})},this);var Y,te=null,ue=s.closestView,xe=s.closestMagnet;xe&&(te=s.magnetProxy=ue.findProxyNode(xe,"highlighter"));var ge=s.arrowhead,E=m!==xe;if(g&&E&&g.unhighlight(v,{connecting:!0,snapping:!0}),ue){const{prevEnd:D,prevX:z,prevY:Z}=s;if(s.prevX=r,s.prevY=e,!E&&("function"!=typeof a||z===r&&Z===e)||(Y=ue.getLinkEnd(xe,r,e,this.model,ge),!E&&Lo(D,Y)))return;s.prevEnd=Y,E&&ue.highlight(te,{connecting:!0,snapping:!0})}else Y={x:r,y:e};this.model.set(ge,Y||{x:r,y:e},{ui:!0}),g&&this.notify("link:snap:disconnect",t,g,m,ge),ue&&this.notify("link:snap:connect",t,ue,xe,ge)},_snapArrowheadEnd:function(t){var r=t.closestView,e=t.closestMagnet;r&&e&&(r.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=r.findMagnet(e)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,r,e,n){const{paper:i,model:a}=this;if(n.eventTarget!==t){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});const s=n.viewUnderPointer=i.findView(t);if(s){const l=n.magnetUnderPointer=s.findMagnet(t),f=n.magnetProxy=s.findProxyNode(l,"highlighter");l&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(s,l))?f&&s.highlight(f,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=t,a.set(n.arrowhead,{x:r,y:e},{ui:!0})},_connectArrowheadEnd:function(t={},r,e){const{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:a,magnetProxy:s,arrowhead:l}=t;if(!a||!s||!i)return;i.unhighlight(s,{connecting:!0});const f=i.getLinkEnd(a,r,e,n,l);n.set(l,f,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var r=this.el.style;t.pointerEvents=r.pointerEvents,r.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var r=[];r[4]=t,r[5]=this;var e,n=0,i=0;"source"===t?(n=2,e="target"):(i=2,e="source");var a=this.model.get(e);if(a.id){var s=r[n]=this.paper.findViewByModel(a.id),l=s.getMagnetFromLinkEnd(a);l===s.el&&(l=void 0),r[n+1]=l}return function f(g,m){return r[i]=g,r[i+1]=g.el===m?void 0:m,r}},_markAvailableMagnets:function(t){function r(v,A){var B=v.paper;return B.options.validateConnection.apply(B,this.validateConnectionArgs(v,A))}var e=this.paper,n=e.model.getCells();t.marked={};for(var i=0,a=n.length;i<a;i++){var s=n[i].findView(e);if(s){var l=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&l.push(s.el);var f=l.filter(r.bind(t,s));if(f.length>0){for(var g=0,m=f.length;g<m;g++)s.highlight(f[g],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=f}}}},_unmarkAvailableMagnets:function(t){for(var e,n,r=Object.keys(t.marked),i=0,a=r.length;i<a;i++){n=t.marked[e=r[i]];var s=this.paper.findViewByModel(e);if(s){for(var l=0,f=n.length;l<f;l++)s.unhighlight(n[l],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,r){r||(r={});var e={action:"arrowhead-move",arrowhead:t,whenNotAllowed:r.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Jt(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(e),!0!==r.ignoreBackwardsCompatibility&&(this._dragData=e),e},onRemove:function(){dn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Bt});Object.defineProperty(Wr.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var r=this.model.source();return new nt(r.x,r.y)}var e=this.sourceMagnet;return t.isNodeConnection(e)?new nt(this.sourceAnchor):t.getNodeBBox(e||t.el)}}),Object.defineProperty(Wr.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var r=this.model.target();return new nt(r.x,r.y)}var e=this.targetMagnet;return t.isNodeConnection(e)?new nt(this.targetAnchor):t.getNodeBBox(e||t.el)}});const Ji={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},ru=Ka.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Lr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,r){this.el.insertBefore(t,this.insertPivot(r))},insertNode:function(t){const{el:r}=this;t.parentNode!==r&&r.appendChild(t)},insertPivot:function(t){const{el:r,pivotNodes:e}=this;(t=+t)||(t=0);let n=e[t];if(n)return n;n=e[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let a in e)a=+a,a<t&&a>i&&(i=a);return r.insertBefore(n,i!==-1/0?e[i].nextSibling:r.firstChild),n},removePivots:function(){const{el:t,pivotNodes:r}=this;for(let e in r)t.removeChild(r[e]);this.pivotNodes={}}}),al=na.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,r){const{options:e}=this,{useFirstSubpath:n}=e;let i;try{const a=Pe(r);if(i=a.convertToPathData().trim(),"PATH"===a.tagName()&&n){const s=i.search(/.M/i)+1;s>0&&(i=i.substr(0,s))}}catch(a){const s=t.getNodeBoundingRect(r);i=Pe.rectToPath(bt({},e,s.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,r){const{vel:e,options:n}=this,{padding:i,layer:a}=n;let s=t.getNodeMatrix(r);if(i){!a&&r===t.el&&e.remove();let l=t.getNodeBoundingRect(r);const f=l.x+l.width/2,g=l.y+l.height/2;l=Pe.transformRect(l,s);const m=Math.max(l.width,1),v=Math.max(l.height,1),A=(m+i)/m,B=(v+i)/v,Y=Pe.createSVGMatrix({a:A,b:0,c:0,d:B,e:f-A*f,f:g-B*g});s=s.multiply(Y)}e.attr({d:this.getPathData(t,r),transform:Pe.matrixToTransformString(s)})},highlight(t,r){const{vel:e,options:n}=this;e.attr(n.attrs),t.isNodeConnection(r)?this.highlightConnection(t):this.highlightNode(t,r)}}),sl=20,_i=na.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:sl,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,r){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:e,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,a=r.tagName();if(!Pe.isSVGGraphicsElement(r)||i.includes(a))return r.remove(),!1;if(n.includes(a)){const s=t.vel.findOne(`#${r.id}`);if(s){const{node:l}=s;let f=t.getNodeBoundingRect(l);t.model.isElement()&&(f=Pe.transformRect(f,t.getNodeMatrix(l)));const g=Pe("rect",f.toJSON()),{x:m,y:v}=f.center(),{angle:A,cx:B=m,cy:Y=v}=s.rotate();A&&g.rotate(A,B,Y),r.parent().append(g)}return r.remove(),!1}return e.forEach(s=>{"fill"===s&&"none"===r.attr("fill")||r.removeAttr(s)}),!0},transformMaskRoot(t,r){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:e}=this;e.forEach(n=>{r.removeAttr(n)})},getMaskShape(t,r){const{options:e,MASK_REPLACE_TAGS:n}=this,{deep:i}=e,a=r.tagName();let s;if("G"===a){if(!i)return null;s=r.clone(),function gc(t,r){const e=t.children();for(;e.length>0;){const n=e.shift();r(n)&&e.push(...n.children())}}(s,l=>this.transformMaskChild(t,l))}else{if(n.includes(a))return null;s=r.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,r){const{VISIBLE:e,INVISIBLE:n,options:i}=this,{padding:a,attrs:s}=i,l="stroke-width"in s?s["stroke-width"]:1,f="none"!==r.attr("fill");let g=parseFloat(r.attr("stroke-width"));isNaN(g)&&(g=1);const m=g+2*a,v=m+2*l;let A=this.getMaskShape(t,r);if(!A){const B=t.getNodeBoundingRect(r.node);B.inflate(B.width?0:.5,B.height?0:.5),A=Pe("rect",B.toJSON())}return A.attr(s),Pe("mask",{id:this.getMaskId()}).append([A.clone().attr({fill:f?e:"none",stroke:e,"stroke-width":v}),A.clone().attr({fill:f?n:"none",stroke:n,"stroke-width":m})])},removeMask(t){const r=t.svg.getElementById(this.getMaskId());r&&t.defs.removeChild(r)},addMask(t,r){t.defs.appendChild(r.node)},highlight(t,r){const{options:e,vel:n}=this,{padding:i,attrs:a,maskClip:s=sl,layer:l}=e,f="stroke"in a?a.stroke:"#000000";!l&&r===t.el&&n.remove();const g=t.getNodeBoundingRect(r).inflate(i+s),m=this.getMask(t,Pe(r));this.addMask(t.paper,m),n.attr(g.toJSON()),n.attr({transform:Pe.matrixToTransformString(t.getNodeMatrix(r)),mask:`url(#${m.id})`,fill:f})},unhighlight(t){this.removeMask(t.paper)}}),sa=na.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Lr("highlight-opacity"),highlight:function(t,r){Pe(r).addClass(this.opacityClassName)},unhighlight:function(t,r){Pe(r).removeClass(this.opacityClassName)}}),iu=Lr("highlighted"),vc=na.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:iu},highlight:function(t,r){Pe(r).addClass(this.options.className)},unhighlight:function(t,r){Pe(r).removeClass(this.options.className)}},{className:iu});function ou(t,r,e,n){return t.getPointAtRatio("ratio"in n?n.ratio:.5)}function mc(t,r,e,n){return t.getPointAtLength("length"in n?n.length:20)}function Da(t){return function(r,e,n,i){if(n instanceof Element){var s,a=this.paper.findView(n);if(a)if(a.isNodeConnection(n)){var l="fixedAt"in i?i.fixedAt:"50%";s=au(a,l)}else s=a.getNodeBBox(n).center();else s=new de;return t.call(this,r,e,s,i)}return t.apply(this,arguments)}}function au(t,r){var e=parseFloat(r);return ye(r)?t.getPointAtRatio(e/100):t.getPointAtLength(e)}const ua=Da(function ul(t,r,e,n){var i=1e6,a=t.getConnection(),s=t.getConnectionSubdivisions(),l=new at(e.clone().offset(0,i),e.clone().offset(0,-i)),f=new at(e.clone().offset(i,0),e.clone().offset(-i,0)),g=l.intersect(a,{segmentSubdivisions:s}),m=f.intersect(a,{segmentSubdivisions:s}),v=[];return g&&Array.prototype.push.apply(v,g),m&&Array.prototype.push.apply(v,m),v.length>0?e.chooseClosest(v):"fallbackAt"in n?au(t,n.fallbackAt):xc(t,r,e,n)}),xc=Da(function yc(t,r,e,n){return t.getClosestPoint(e)||new de});function Qi(t,r,e){if(ln(e)){const{x:i,y:a}=e;if(isFinite(a)){const s=new at(r,t),{start:l,end:f}=s.parallel(a);r=l,t=f}e=i}if(!isFinite(e))return t;var n=t.distance(r);return 0===e&&n>0?t:t.move(r,-Math.min(e,n-1))}function su(t){var r=t.getAttribute("stroke-width");return null===r?0:parseFloat(r)||0}function _c(t,r,e,n){var i=r.getNodeBBox(e);n.stroke&&i.inflate(su(e)/2);var a=t.intersect(i);return Qi(a?t.start.chooseClosest(a):t.end,t.start,n.offset)}var uu="segmentSubdivisons",lu="shapeBBox";const Cc=function ll(t,r,e,n){let{offset:i,alignOffset:a,align:s}=n;return s&&function bc(t,r,e=0){let n,i,a,s;const{start:l,end:f}=t;switch(r){case"left":n="x",i=f,a=l,s=-1;break;case"right":n="x",i=l,a=f,s=1;break;case"top":n="y",i=f,a=l,s=-1;break;case"bottom":n="y",i=l,a=f,s=1;break;default:return}l[n]<f[n]?i[n]=a[n]:a[n]=i[n],isFinite(e)&&(i[n]+=s*e,a[n]+=s*e)}(t,s,a),Qi(t.end,t.start,i)},wc=_c,ai=function pd(t,r,e,n){var i=r.model.angle();if(0===i)return _c(t,r,e,n);var a=r.getNodeUnrotatedBBox(e);n.stroke&&a.inflate(su(e)/2);var s=a.center(),l=t.clone().rotate(s,i),f=l.setLength(1e6).intersect(a);return Qi(f?l.start.chooseClosest(f).rotate(s,-i):t.end,t.start,n.offset)},go=function vd(t,r,e,n){var i,a,s=n.selector,l=t.end;if(i="string"==typeof s?r.findBySelector(s)[0]:Array.isArray(s)?le(e,s):function gd(t){if(!t)return null;var r=t;do{var e=r.tagName;if("string"!=typeof e)return null;if("G"===(e=e.toUpperCase()))r=r.firstElementChild;else{if("TITLE"!==e)break;r=r.nextElementSibling}}while(r);return r}(e),!Pe.isSVGGraphicsElement(i)){if(i===e||!Pe.isSVGGraphicsElement(e))return l;i=e}var ge,f=r.getNodeShape(i),g=r.getNodeMatrix(i),m=r.getRootTranslateMatrix(),v=r.getRootRotateMatrix(),A=m.multiply(v).multiply(g),B=A.inverse(),Y=Pe.transformLine(t,B),te=Y.start.clone(),ue=r.getNodeData(i);if(!1===n.insideout&&(ue[lu]||(ue[lu]=f.bbox()),ue[lu].containsPoint(te)))return l;if(f instanceof pt){var E=n.precision||2;ue[uu]||(ue[uu]=f.getSegmentSubdivisions({precision:E})),ge={precision:E,segmentSubdivisions:ue[uu]}}!0===n.extrapolate&&Y.setLength(1e6),(a=Y.intersect(f,ge))?Pe.isArray(a)&&(a=te.chooseClosest(a)):!0===n.sticky&&(a=f instanceof nt?f.pointNearestToPoint(te):f instanceof ir?f.intersectionWithLineFromCenterToPoint(te):f.closestPoint(te,ge));var D=a?Pe.transformPoint(a,A):l,z=n.offset||0;return n.stroke&&(z+=su(i)/2),Qi(D,t.start,z)};function Vo(t){return function(r,e,n,i){var a=!!i.rotate,s=a?r.getNodeUnrotatedBBox(e):r.getNodeBBox(e),l=s[t](),f=i.dx;if(f){var g=ye(f);f=parseFloat(f),isFinite(f)&&(g&&(f/=100,f*=s.width),l.x+=f)}var m=i.dy;if(m){var v=ye(m);m=parseFloat(m),isFinite(m)&&(v&&(m/=100,m*=s.height),l.y+=m)}return a?l.rotate(r.model.getBBox().center(),-r.model.angle()):l}}const Sc=Vo("center"),Tc=Vo("topMiddle"),yd=Vo("bottomMiddle"),Ec=Vo("leftMiddle"),ns=Vo("rightMiddle"),Ps=Vo("origin"),xd=Vo("topRight"),Pc=Vo("bottomLeft"),Ic=Vo("corner"),fu=Da(function md(t,r,e,n){var i=t.model.angle(),a=t.getNodeBBox(r),s=a.center(),l=a.origin(),f=a.corner(),g=n.padding;if(isFinite(g)||(g=0),l.y+g<=e.y&&e.y<=f.y-g){var m=e.y-s.y;s.x+=0===i||180===i?0:1*m/Math.tan(xt(i)),s.y+=m}else if(l.x+g<=e.x&&e.x<=f.x-g){var v=e.x-s.x;s.y+=90===i||270===i?0:v*Math.tan(xt(i)),s.x+=v}return s}),Ac=Da(function cu(t,r,e,n){var a,s,l,i=!!n.rotate;i?(a=t.getNodeUnrotatedBBox(r),l=t.model.getBBox().center(),s=t.model.angle()):a=t.getNodeBBox(r);var m,f=n.padding;switch(isFinite(f)&&a.inflate(f),i&&e.rotate(l,s),a.sideNearestToPoint(e)){case"left":m=a.leftMiddle();break;case"right":m=a.rightMiddle();break;case"top":m=a.topMiddle();break;case"bottom":m=a.bottomMiddle()}return i?m.rotate(l,-s):m}),du=function ts(t,r,e,n,i){return t.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)},la={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},As=9007199254740991,rs=dn.Highlighting,cl={[rs.DEFAULT]:{name:"stroke",options:{padding:3}},[rs.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[rs.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},fl=[{name:Ji.BACK},{name:Ji.CELLS},{name:Ji.LABELS},{name:Ji.FRONT},{name:Ji.TOOLS}],_d=Ka.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:$s,linkView:Wr,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,r){return!1},highlighting:cl,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new gt,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,r,e){return"passive"!==r.getAttribute("magnet")},validateConnection:function(t,r,e,n,i,a){return("target"===i?e:t)instanceof $s},embeddingMode:!1,validateEmbedding:function(t,r){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:la.EXACT,frozen:!1,onViewUpdate:function(t,r,e,n,i){r&(t.FLAG_INSERT|t.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(t,e,n)},onViewPostponed:function(t,r,e){return e.forcePostponedViewUpdate(t,r)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:I,anchorNamespace:F,linkAnchorNamespace:P,connectionPointNamespace:N},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:t,el:r}=this;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&pr(joint,"shapes")?joint.shapes:null);const e=this.model=t.model||new No;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=mt(r.ownerDocument),this.resetViews(e.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,r,e){var n=e.position;this.isAsync()||!an(n)?this.renderView(t,e):(e.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(t,e),0===n&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,r,e){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,e)},onCellChange:function(t,r){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===la.APPROX){const e=this.findViewByModel(t);e&&this.requestViewUpdate(e,e.FLAG_INSERT,e.UPDATE_PRIORITY,r)}},onGraphReset:function(t,r){this.resetLayers(),this.resetViews(t.models,r)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var r=t&&t.batchName,e=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(r)&&!e.hasActiveBatch(n)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(r)&&!e.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:r,defaultRouter:e,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:a,origin:s,highlighting:l,cellViewNamespace:f,interactive:g}=t;!f&&"undefined"!=typeof joint&&pr(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),vn(r)||(t.defaultConnector=Qn(r)),vn(e)||(t.defaultRouter=Qn(e)),vn(n)||(t.defaultConnectionPoint=Qn(n)),vn(i)||(t.defaultAnchor=Qn(i)),vn(a)||(t.defaultLinkAnchor=Qn(a)),ln(g)&&(t.interactive=bt({},g)),ln(l)&&(t.highlighting=gi({},l,cl)),t.origin=bt({},s)},children:function(){var t=Pe.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Lr("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Lr("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Lr("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:r}=this;if(t in r)return r[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:r}=this,{svg:e,defs:n,layers:i,background:a,grid:s}=t;return this.svg=e,this.defs=n,this.layers=i,this.$background=mt(a),this.$grid=mt(s),this.renderLayers(),Pe.ensureId(e),r.background&&this.drawBackground(r.background),r.drawGrid&&this.drawGrid(),this},renderLayers:function(t=fl){this.removeLayers(),t.forEach(({name:i})=>{const s=new ru({name:i});this.layers.appendChild(s.el),this._layers[i]=s});const r=this.getLayerView(Ji.CELLS),e=this.getLayerView(Ji.TOOLS),n=this.getLayerView(Ji.LABELS);this.tools=e.el,this.cells=this.viewport=r.el,r.vel.addClass(Lr("viewport")),n.vel.addClass(Lr("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t,r=>{t[r].remove(),delete t[r]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t,r=>{t[r].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var r=this.layers;if(void 0===t){var e=r.getAttribute("transform");return(this._viewportTransformString||null)===e?t=this._viewportMatrix:(t=r.getCTM(),this._viewportMatrix=t,this._viewportTransformString=e),Pe.createSVGMatrix(t)}t=Pe.createSVGMatrix(t);var n=Pe.matrixToTransformString(t);return r.setAttribute("transform",n),this._viewportMatrix=t,this._viewportTransformString=r.getAttribute("transform"),this},clientMatrix:function(){return Pe.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,r,e){if(t instanceof dn)for(var n=t.model,i=this.model.getConnectedLinks(n),a=0,s=i.length;a<s;a++){var l=i[a],f=this.findViewByModel(l);if(f){var g=["UPDATE"];l.getTargetCell()===n&&g.push("TARGET"),l.getSourceCell()===n&&g.push("SOURCE");var m=Math.max(r+1,f.UPDATE_PRIORITY);this.scheduleViewUpdate(f,f.getFlag(g),m,e)}}},forcePostponedViewUpdate:function(t,r){if(!(t&&t instanceof dn))return!1;var e=t.model;if(e.isElement())return!1;if(0==(r&t.getFlag(["SOURCE","TARGET"]))){var n=0,i=this.findViewByModel(e.getSourceCell());i&&!this.isViewMounted(i)&&(n=this.dumpView(i),t.updateEndMagnet("source"));var a=0,s=this.findViewByModel(e.getTargetCell());if(s&&!this.isViewMounted(s)&&(a=this.dumpView(s),t.updateEndMagnet("target")),0===n&&0===a)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,r,e,n){n||(n={}),this.scheduleViewUpdate(t,r,e,n);var i=this.isAsync();if(!(this.isFrozen()||i&&!1!==n.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var a=this.updateViews(n);i&&this.notifyAfterRender(a,n)}},scheduleViewUpdate:function(t,r,e,n){const{_updates:i,options:a}=this,{FLAG_REMOVE:s,FLAG_INSERT:l,UPDATE_PRIORITY:f,cid:g}=t;let m=i.priorities[e];if(m||(m=i.priorities[e]={}),e>f)for(let B=e-1;B>=f;B--){const Y=i.priorities[B];!Y||!(g in Y)||(m[g]|=Y[g],delete Y[g])}let v=m[g]||0;if((v&r)===r)return;v||i.count++,r&s&&v&l?m[g]^=l:r&l&&v&s&&(m[g]^=s),m[g]|=r;const A=a.onViewUpdate;"function"==typeof A&&A.call(this,t,r,e,n||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=t.cid,n=this._updates.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|n[e];return delete n[e],i},dumpView:function(t,r){var e=this.dumpViewUpdate(t);return e?this.updateView(t,e,r):0},updateView:function(t,r,e){if(!t)return 0;const{FLAG_REMOVE:n,FLAG_INSERT:i,model:a}=t;if(t instanceof dn){if(r&n)return this.removeView(a),0;r&i&&(this.insertView(t),r^=i)}return r?t.confirmUpdate(r,e||{}):0},requireView:function(t,r){var e=this.findViewByModel(t);return e?(this.dumpView(e,r),e):null},registerUnmountedView:function(t){var r=t.cid,e=this._updates;if(r in e.unmounted)return 0;var n=e.unmounted[r]|=t.FLAG_INSERT;return e.unmountedCids.push(r),delete e.mounted[r],n},registerMountedView:function(t){var r=t.cid,e=this._updates;if(r in e.mounted)return 0;e.mounted[r]=!0,e.mountedCids.push(r);var n=e.unmounted[r]||0;return delete e.unmounted[r],n},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var r=Vn({},t,{viewport:null});this.checkViewport(r),this.updateViews(r)},updateViews:function(t){this.notifyBeforeRender(t);let r,e=0,n=0,i=As;do{n++,r=this.updateViewsBatch(t),e+=r.updated,i=Math.min(r.priority,i)}while(!r.empty);const a={updated:e,batches:n,priority:i};return this.notifyAfterRender(a,t),a},hasScheduledUpdates:function(){const t=this._updates.priorities,r=Object.keys(t);let e=r.length;for(;e>0&&e--;)for(let n in t[r[e]])return!0;return!1},updateViewsAsync:function(t,r){t||(t={}),r||(r={processed:0,priority:As});var e=this._updates,n=e.id;if(n){re(n),0===r.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var i=this.updateViewsBatch(t),a=Vn({},t,{mountBatchSize:1e3-i.mounted,unmountBatchSize:1e3-i.unmounted}),s=this.checkViewport(a),l=s.unmounted,f=s.mounted,g=r.processed,m=e.count;i.updated>0&&(i.processed=g+=i.updated+i.unmounted,r.priority=Math.min(i.priority,r.priority),i.empty&&0===f?(i.unmounted+=l,i.mounted+=f,i.priority=r.priority,this.notifyAfterRender(i,t),r.processed=0,r.priority=As,e.count=0):r.processed=g);var v=t.progress;if(m&&"function"==typeof v&&v.call(this,i.empty,g,m,i,this),e.id!==n)return}e.id=U(this.updateViewsAsync,this,t,r)},notifyBeforeRender:function(t={}){let r=t.beforeRender;"function"!=typeof r&&(r=this.options.beforeRender,"function"!=typeof r)||r.call(this,t,this)},notifyAfterRender:function(t,r={}){let e=r.afterRender;"function"!=typeof e&&(e=this.options.afterRender),"function"==typeof e&&e.call(this,t,r,this),this.trigger("render:done",t,r)},updateViewsBatch:function(t){t||(t={});var r=t.batchSize||1/0,e=this._updates,n=0,i=0,a=0,s=0,l=As,f=!0,g=this.options,m=e.priorities,v="viewport"in t?t.viewport:g.viewport;"function"!=typeof v&&(v=null);var A=g.onViewPostponed;"function"!=typeof A&&(A=null);var B=Object.keys(m);e:for(var Y=0,te=B.length;Y<te;Y++){var ue=+B[Y],xe=m[ue];for(var ge in xe){if(n>=r){f=!1;break e}var E=La[ge];if(E){var D=xe[ge];if(0==(D&E.FLAG_REMOVE)){var z=ge in e.unmounted;if(E.DETACHABLE&&v&&!v.call(this,E,!z,this)){z||(this.registerUnmountedView(E),E.unmount()),e.unmounted[ge]|=D,delete xe[ge],a++;continue}z&&(D|=E.FLAG_INSERT,s++),D|=this.registerMountedView(E)}var Z=this.updateView(E,D,t);Z>0&&(xe[ge]=Z,!A||!A.call(this,E,Z,this)||xe[ge])?(i++,f=!1):(l>ue&&(l=ue),n++,delete xe[ge])}else delete xe[ge]}}return{priority:l,updated:n,postponed:i,unmounted:a,mounted:s,empty:f}},getUnmountedViews:function(){const r=Object.keys(this._updates.unmounted),e=r.length,n=new Array(e);for(var i=0;i<e;i++)n[i]=La[r[i]];return n},getMountedViews:function(){const r=Object.keys(this._updates.mounted),e=r.length,n=new Array(e);for(var i=0;i<e;i++)n[i]=La[r[i]];return n},checkUnmountedViews:function(t,r){r||(r={});var e=0;"function"!=typeof t&&(t=null);for(var i=this._updates,a=i.unmountedCids,s=i.unmounted,l=0,f=(Math.min(a.length,"mountBatchSize"in r?r.mountBatchSize:1/0));l<f;l++){var g=a[l];if(g in s){var m=La[g];if(m){if(m.DETACHABLE&&t&&!t.call(this,m,!1,this)){a.push(g);continue}e++;var v=this.registerMountedView(m);v&&this.scheduleViewUpdate(m,v,m.UPDATE_PRIORITY,{mounting:!0})}}}return a.splice(0,l),e},checkMountedViews:function(t,r){r||(r={});var e=0;if("function"!=typeof t)return e;for(var i=this._updates,a=i.mountedCids,s=i.mounted,l=0,f=(Math.min(a.length,"unmountBatchSize"in r?r.unmountBatchSize:1/0));l<f;l++){var g=a[l];if(g in s){var m=La[g];if(m){if(!m.DETACHABLE||t.call(this,m,!0,this)){a.push(g);continue}e++,this.registerUnmountedView(m)&&m.unmount()}}}return a.splice(0,l),e},checkViewport:function(t){var r=Vn({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),e="viewport"in r?r.viewport:this.options.viewport,n=this.checkMountedViews(e,r);return n>0&&(r.mountBatchSize=Math.min(this._updates.unmountedCids.length-n,r.mountBatchSize)),{mounted:this.checkUnmountedViews(e,r),unmounted:n}},freeze:function(t){t||(t={});var r=this._updates,e=t.key,n=this.options.frozen,i=r.freezeKey;if(e&&e!==i){if(n&&i)return;r.freezeKey=e,r.keyFrozen=n}this.options.frozen=!0;var a=r.id;r.id=null,this.isAsync()&&a&&re(a)},unfreeze:function(t){t||(t={});var r=this._updates,e=t.key,n=r.freezeKey;e&&n&&e!==n||(r.freezeKey=null,(!e||e!==n||!r.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=r.keyFrozen=!1,r.sort&&(this.sortViews(),r.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===la.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,r=t.width,e=t.height;return an(r)||(r=this.el.clientWidth),an(e)||(e=this.el.clientHeight),{width:r,height:e}},setDimensions:function(t,r){const{options:e}=this,{width:n,height:i}=e;let a=void 0===t?n:t,s=void 0===r?i:r;if(n===a&&i===s)return;e.width=a,e.height=s,this._setDimensions();const l=this.getComputedSize();this.trigger("resize",l.width,l.height)},_setDimensions:function(){const{options:t}=this;let r=t.width,e=t.height;an(r)&&(r=Math.round(r)),an(e)&&(e=Math.round(e)),this.$el.css({width:null===r?"":r,height:null===e?"":e})},setOrigin:function(t,r){return this.translate(t||0,r||0)},fitToContent:function(t,r,e,n){n=mn(t)?t:bt({gridWidth:t,gridHeight:r,padding:e},n);const{x:i,y:a,width:s,height:l}=this.getFitToContentArea(n),{sx:f,sy:g}=this.scale();return this.setOrigin(-i*f,-a*g),this.setDimensions(s*f,l*g),new nt(i,a,s,l)},getFitToContentArea:function(t={}){const r=t.gridWidth||1,e=t.gridHeight||1,n=St(t.padding||0),i=Math.max(t.minWidth||0,r),a=Math.max(t.minHeight||0,e),s=t.maxWidth||Number.MAX_VALUE,l=t.maxHeight||Number.MAX_VALUE,f=t.allowNewOrigin,g="contentArea"in t?new nt(t.contentArea):this.getContentArea(t),{sx:m,sy:v}=this.scale();g.x*=m,g.y*=v,g.width*=m,g.height*=v;let A=Math.ceil((g.width+g.x)/r),B=Math.ceil((g.height+g.y)/e);t.allowNegativeBottomRight||(A=Math.max(A,1),B=Math.max(B,1)),A*=r,B*=e;let Y=0;("negative"===f&&g.x<0||"positive"===f&&g.x>=0||"any"===f)&&(Y=Math.ceil(-g.x/r)*r,Y+=n.left,A+=Y);let te=0;return("negative"===f&&g.y<0||"positive"===f&&g.y>=0||"any"===f)&&(te=Math.ceil(-g.y/e)*e,te+=n.top,B+=te),A+=n.right,B+=n.bottom,A=Math.max(A,i),B=Math.max(B,a),A=Math.min(A,s),B=Math.min(B,l),new nt(-Y/m,-te/v,A/m,B/v)},scaleContentToFit:function(t){var r,e;if(t||(t={}),"contentArea"in t){var n=t.contentArea;r=this.localToPaperRect(n),e=new de(n)}else r=this.getContentBBox(t),e=this.paperToLocalPoint(r);if(r.width&&r.height){Vn(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var g,i=St(t.padding),a=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,f=t.maxScaleY||t.maxScale;if(t.fittingBBox)g=t.fittingBBox;else{var m=this.translate(),v=this.getComputedSize();g={x:m.tx,y:m.ty,width:v.width,height:v.height}}g=new nt(g).moveAndExpand({x:i.left,y:i.top,width:-i.left-i.right,height:-i.top-i.bottom});var A=this.scale(),B=g.width/r.width*A.sx,Y=g.height/r.height*A.sy;if(t.preserveAspectRatio&&(B=Y=Math.min(B,Y)),t.scaleGrid){var te=t.scaleGrid;B=te*Math.floor(B/te),Y=te*Math.floor(Y/te)}B=Math.min(s,Math.max(a,B)),Y=Math.min(f,Math.max(l,Y));var ue=this.options.origin,xe=g.x-e.x*B-ue.x,ge=g.y-e.y*Y-ue.y;this.scale(B,Y),this.translate(xe,ge)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new nt:Pe(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:r}=this.options;let e;return e=vn(r)?r.apply(this,t):!0===r?this.getArea():r?new nt(r):null,e},createViewForModel:function(t){const{options:r}=this;var e,n,i=r.cellViewNamespace,a=t.get("type")+"View",s=le(i,a,".");return t.isLink()?(e=r.linkView,n=Wr):(e=r.elementView,n=$s),new(e.prototype instanceof _r.View?s||e:e.call(this,t)||s||n)({model:t,interactive:r.interactive,labelsLayer:!0===r.labelsLayer?Ji.LABELS:r.labelsLayer})},removeView:function(t){const{id:r}=t,{_views:e,_updates:n}=this,i=e[r];if(i){var{cid:a}=i;const{mounted:s,unmounted:l}=n;i.remove(),delete e[r],delete s[a],delete l[a]}return i},renderView:function(t,r){const{id:e}=t,n=this._views;let i,a,s=!0;return e in n&&(i=n[e],i.model===t?(a=i.FLAG_INSERT,s=!1):this.removeView(t)),s&&(i=n[e]=this.createViewForModel(t),i.paper=this,a=this.registerUnmountedView(i)|i.getFlag(ur(i,"initFlag"))),this.requestViewUpdate(i,a,i.UPDATE_PRIORITY,r),i},onImageDragStart:function(){return!1},resetViews:function(t,r){r||(r={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var e=0,n=t.length;e<n;e++)this.renderView(t[e],r);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){jr(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var t=mt(this.cells).children("[model-id]"),r=this.model.get("cells");!function(t,r){var e=mt(t),n=e.map(function(){var a=this.parentNode,s=a.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(a===this)throw new Error("You can't sort elements if any one is a descendant of another.");a.insertBefore(this,s),a.removeChild(s)}});Array.prototype.sort.call(e,r).each(function(i){n[i].call(this)})}(t,function(e,n){var i=r.get(e.getAttribute("model-id")),a=r.get(n.getAttribute("model-id")),s=i.attributes.z||0,l=a.attributes.z||0;return s===l?0:s<l?-1:1})},insertView:function(t){const r=this.getLayerView(Ji.CELLS),{el:e,model:n}=t;this.options.sorting===la.APPROX?r.insertSortedNode(e,n.get("z")):r.insertNode(e),t.onMount()},scale:function(t,r,e,n){if(void 0===t)return Pe.matrixToScale(this.matrix());void 0===r&&(r=t),void 0===e&&(e=0,n=0);var i=this.translate();(e||n||i.tx||i.ty)&&this.translate(i.tx-e*(t-1),i.ty-n*(r-1)),t=Math.max(t||0,this.MIN_SCALE),r=Math.max(r||0,this.MIN_SCALE);var l=this.matrix();return l.a=t,l.d=r,this.matrix(l),this.trigger("scale",t,r,e,n),this},rotate:function(t,r,e){if(void 0===t)return Pe.matrixToRotate(this.matrix());if(void 0===r){var n=this.cells.getBBox();r=n.width/2,e=n.height/2}var i=this.matrix().translate(r,e).rotate(t).translate(-r,-e);return this.matrix(i),this},translate:function(t,r){if(void 0===t)return Pe.matrixToTranslate(this.matrix());const{options:e}=this,{origin:n,drawGrid:i}=e;t||(t=0),r||(r=0);const a=this.matrix();if(a.e===t&&a.f===r)return this;a.e=t,a.f=r,this.matrix(a);const{tx:s,ty:l}=this.translate();return n.x=s,n.y=l,this.trigger("translate",s,l),i&&this.drawGrid(),this},findView:function(t){var r=wn(t)?this.cells.querySelector(t):t instanceof mt?t[0]:t,e=this.findAttribute("model-id",r);if(e)return this._views[e]},findViewByModel:function(t){var r=wn(t)||an(t)?t:t&&t.id;return this._views[r]},findViewsFromPoint:function(t){return t=new de(t),this.model.getElements().map(this.findViewByModel,this).filter(function(e){return e&&e.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,r){r=Vn(r||{},{strict:!1}),t=new nt(t);var e=this.model.getElements().map(this.findViewByModel,this),n=r.strict?"containsRect":"intersect";return e.filter(function(i){return i&&t[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...r){"string"==typeof t&&this.trigger("tools:event",t,...r)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,r){return this.clientToLocalPoint(t,r).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,r){var e=new de(t,r);return Pe.transformPoint(e,this.matrix())},localToPaperRect:function(t,r,e,n){var i=new nt(t,r,e,n);return Pe.transformRect(i,this.matrix())},paperToLocalPoint:function(t,r){var e=new de(t,r);return Pe.transformPoint(e,this.matrix().inverse())},paperToLocalRect:function(t,r,e,n){var i=new nt(t,r,e,n);return Pe.transformRect(i,this.matrix().inverse())},localToClientPoint:function(t,r){var e=new de(t,r);return Pe.transformPoint(e,this.clientMatrix())},localToClientRect:function(t,r,e,n){var i=new nt(t,r,e,n);return Pe.transformRect(i,this.clientMatrix())},clientToLocalPoint:function(t,r){var e=new de(t,r);return Pe.transformPoint(e,this.clientMatrix().inverse())},clientToLocalRect:function(t,r,e,n){var i=new nt(t,r,e,n);return Pe.transformRect(i,this.clientMatrix().inverse())},localToPagePoint:function(t,r){return this.localToPaperPoint(t,r).offset(this.pageOffset())},localToPageRect:function(t,r,e,n){return this.localToPaperRect(t,r,e,n).offset(this.pageOffset())},pageToLocalPoint:function(t,r){var n=new de(t,r).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,r,e,n){var i=this.pageOffset(),a=new nt(t,r,e,n);return a.x-=i.x,a.y-=i.y,this.paperToLocalRect(a)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new de(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Wr))throw new Error("Must provide a linkView.");var r=t.model,e=this.options,n=this.model,i=n.constructor.validations;return!(!e.multiLinks&&!i.multiLinks.call(this,n,r)||!e.linkPinning&&!i.linkPinning.call(this,n,r)||"function"==typeof e.allowLink&&!e.allowLink.call(this,t,this))},getDefaultLink:function(t,r){return vn(this.options.defaultLink)?this.options.defaultLink.call(this,t,r):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:r,type:e}=t;const{highlighting:n,highlighterNamespace:i}=this.options;if(void 0===r){if(!n||e&&(r=n[e],!1===r))return!1;r||(r=n.default)}if(!r)return!1;wn(r)&&(r={name:r});const a=r.name,s=i[a];if(!s)throw new Error('Unknown highlighter ("'+a+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+a+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+a+'") is missing required unhighlight() method');return{highlighter:s,options:r.options||{},name:a}},onCellHighlight:function(t,r,e){const n=this.resolveHighlighter(e);if(!n)return;const{highlighter:i,options:a}=n;i.highlight(t,r,a)},onCellUnhighlight:function(t,r,e){const n=this.resolveHighlighter(e);if(!n)return;const{highlighter:i,options:a}=n;i.unhighlight(t,r,a)},pointerdblclick:function(t){t.preventDefault(),t=L(t);var r=this.findView(t.target);if(!this.guard(t,r)){var e=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdblclick(t,e.x,e.y):this.trigger("blank:pointerdblclick",t,e.x,e.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=L(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=L(t);var r=this.findView(t.target);if(!this.guard(t,r)){var e=this.snapToGrid(t.clientX,t.clientY);r?r.contextmenu(t,e.x,e.y):this.trigger("blank:contextmenu",t,e.x,e.y)}},pointerdown:function(t){t=L(t);var r=this.findView(t.target);if(!this.guard(t,r)){var e=this.snapToGrid(t.clientX,t.clientY);r?(t.preventDefault(),r.pointerdown(t,e.x,e.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,e.x,e.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var r=this.eventData(t);if(r.mousemoved||(r.mousemoved=0),!(++r.mousemoved<=this.options.moveThreshold)){t=L(t);var n=this.snapToGrid(t.clientX,t.clientY),i=r.sourceView;i?i.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,r)}},pointerup:function(t){this.undelegateDocumentEvents();var r=L(t),e=this.snapToGrid(r.clientX,r.clientY),n=this.eventData(t).sourceView;n?n.pointerup(r,e.x,e.y):this.trigger("blank:pointerup",r,e.x,e.y),r.isPropagationStopped()||this.pointerclick(mt.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=L(t);var r=this.findView(t.target);if(!this.guard(t,r))if(r)r.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=L(t);var r=this.findView(t.target);if(!this.guard(t,r))if(r)r.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=L(t);const{target:r,relatedTarget:e,currentTarget:n}=t,i=this.findView(r);if(this.guard(t,i))return;const a=this.findView(e);i&&(a===i||(i.mouseenter(t),this.el.contains(e)))||a||n===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=L(t);const{target:r,relatedTarget:e,currentTarget:n}=t,i=this.findView(r);if(this.guard(t,i))return;const a=this.findView(e);i&&(a===i||(i.mouseleave(t),this.el.contains(e)))||a||n===this.el&&this.trigger("paper:mouseleave",t)},mousewheel:function(t){t=L(t);var r=this.findView(t.target);if(!this.guard(t,r)){var e=t.originalEvent,n=this.snapToGrid(e.clientX,e.clientY),i=Math.max(-1,Math.min(1,e.wheelDelta));r?r.mousewheel(t,n.x,n.y,i):this.trigger("blank:mousewheel",t,n.x,n.y,i)}},onevent:function(t){var r=t.currentTarget,e=r.getAttribute("event");if(e){var n=this.findView(r);if(n){if(t=L(t),this.guard(t,n))return;var i=this.snapToGrid(t.clientX,t.clientY);n.onevent(t,e,i.x,i.y)}}},magnetEvent:function(t,r){var e=t.currentTarget;if(e.getAttribute("magnet")){var i=this.findView(e);if(i){if(t=L(t),this.guard(t,i))return;var a=this.snapToGrid(t.clientX,t.clientY);r.call(this,i,t,e,a.x,a.y)}}},onmagnet:function(t){this.magnetEvent(t,function(r,e,n,i,a){r.onmagnet(e,i,a)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(r,e,n,i,a){r.magnetpointerdblclick(e,n,i,a)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(r,e,n,i,a){r.magnetcontextmenu(e,n,i,a)})},onlabel:function(t){var e=this.findView(t.currentTarget);if(e){if(t=L(t),this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e.onlabel(t,n.x,n.y)}},getPointerArgs(t){const r=L(t),{x:e,y:n}=this.snapToGrid(r.clientX,r.clientY);return[r,e,n]},delegateDragEvents:function(t,r){r||(r={}),this.eventData({data:r},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,r),this.undelegateEvents()},guard:function(t,r){return!!("mousedown"===t.type&&2===t.button||this.options.guard&&this.options.guard(t,r))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(r&&r.model&&r.model instanceof qt||this.svg===t.target||this.el===t.target||mt.contains(this.svg,t.target)))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Pe("svg",{width:"100%",height:"100%"},Pe("defs")),patterns:{},add:function(t,r){Pe(this.root.node.childNodes[0]).append(r),this.patterns[t]=r,this.root.append(Pe("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(e){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(e))},this),this},_resolveDrawGridOption:function(t){var r=this.constructor.gridPatterns;if(wn(t)&&Array.isArray(r[t]))return r[t].map(function(f){return bt({},f)});var e=t||{args:[{}]},n=Array.isArray(e),i=e.name;if(!n&&!i&&!e.markup&&(i="dot"),i&&Array.isArray(r[i])){var a=r[i].map(function(f){return bt({},f)}),s=Array.isArray(e.args)?e.args:[e.args||{}];Vn(s[0],lo(t,"args"));for(var l=0;l<s.length;l++)a[l]&&bt(a[l],s[l]);return a}return n?e:[e]},drawGrid:function(t){var r=this.options.gridSize;if(r<=1)return this.clearGrid();var e=Array.isArray(t)?t:[t],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(s,l){var f="pattern_"+l,g=br(s,e[l],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});g.width=r*(n.a||1)*(g.scaleFactor||1),g.height=r*(n.d||1)*(g.scaleFactor||1),i.exist(f)||i.add(f,Pe("pattern",{id:f,patternUnits:"userSpaceOnUse"},Pe(g.markup)));var m=i.get(f);vn(g.update)&&g.update(m.node.childNodes[0],g);var v=g.ox%g.width;v<0&&(v+=g.width);var A=g.oy%g.height;A<0&&(A+=g.height),m.attr({x:v,y:A,width:g.width,height:g.height})});var a=(new XMLSerializer).serializeToString(i.root.node);return a="url(data:image/svg+xml;base64,"+btoa(a)+")",this.$grid.css("backgroundImage",a),this},updateBackgroundImage:function(t){var r=(t=t||{}).position||"center",e=t.size||"auto auto",n=this.scale(),i=this.translate();mn(r)&&(r=i.tx+n.sx*(r.x||0)+"px "+(i.ty+n.sy*(r.y||0))+"px"),mn(e)&&(e=(e=new nt(e).scale(n.sx,n.sy)).width+"px "+e.height+"px"),this.$background.css({backgroundSize:e,backgroundPosition:r})},drawBackgroundImage:function(t,r){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===r.id){var e,n=(r=r||{}).size,i=r.repeat||"no-repeat",a=r.opacity||1,s=Math.abs(r.quality)||1,l=this.constructor.backgroundPatterns[Ma(i)];if(vn(l)){t.width*=s,t.height*=s;var f=l(t,r);if(!(f instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");e=f.toDataURL("image/png"),i="repeat",mn(n)?(n.width*=f.width/t.width,n.height*=f.height/t.height):void 0===n&&(r.size={width:f.width/s,height:f.height/s})}else e=t.src,void 0===n&&(r.size={width:t.width,height:t.height});this.$background.css({opacity:a,backgroundRepeat:i,backgroundImage:"url("+e+")"}),this.updateBackgroundImage(r)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(this.updateBackgroundColor((t=t||{}).color),t.image){t=this._background=Qn(t),_(t);var r=document.createElement("img");r.onload=this.drawBackgroundImage.bind(this,r,t),r.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,jr(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!mn(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var r=t.id,e=t.name;if(r||(r=e+this.svg.id+ee(JSON.stringify(t))),!this.isDefined(r)){var i=un[e]&&un[e](t.args||{});if(!i)throw new Error("Non-existing filter "+e);var a=bt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:r});Pe(i,a).appendTo(this.defs)}return r},defineGradient:function(t){if(!mn(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:r,defs:e}=this,{type:n,id:i=n+r.id+ee(JSON.stringify(t)),stops:a,attrs:s={}}=t;if(this.isDefined(i))return i;const l=Qt(a).map(({offset:g,color:m,opacity:v})=>Pe("stop").attr({offset:g,"stop-color":m,"stop-opacity":Number.isFinite(v)?v:1})),f=Pe(n,s,l);return f.id=i,f.appendTo(e),i},definePattern:function(t){if(!mn(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:r,defs:e}=this,{id:n=r.id+ee(JSON.stringify(t)),markup:i,attrs:a={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;const s=Pe("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=n,s.attr(a),"string"==typeof i)s.append(Pe(i));else{const{fragment:l}=W(i);s.append(l)}return s.appendTo(e),n},defineMarker:function(t){if(!mn(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:r,defs:e}=this,{id:n=r.id+ee(JSON.stringify(t)),markup:i,attrs:a={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(n))return n;const l=Pe("marker",{orient:"auto",overflow:"visible",markerUnits:s});if(l.id=n,l.attr(a),i)if("string"==typeof i)l.append(Pe(i));else{const{fragment:f}=W(i);l.append(f)}else{const{type:f="path"}=t,g=Pe(f,lo(t,"type","id","markup","attrs","markerUnits"));l.append(g)}return l.appendTo(e),n}},{sorting:la,Layers:Ji,backgroundPatterns:{flipXy:function(t){var r=document.createElement("canvas"),e=t.width,n=t.height;r.width=2*e,r.height=2*n;var i=r.getContext("2d");return i.drawImage(t,0,0,e,n),i.setTransform(-1,0,0,-1,r.width,r.height),i.drawImage(t,0,0,e,n),i.setTransform(-1,0,0,1,r.width,0),i.drawImage(t,0,0,e,n),i.setTransform(1,0,0,-1,0,r.height),i.drawImage(t,0,0,e,n),r},flipX:function(t){var r=document.createElement("canvas"),e=t.width,n=t.height;r.width=2*e,r.height=n;var i=r.getContext("2d");return i.drawImage(t,0,0,e,n),i.translate(2*e,0),i.scale(-1,1),i.drawImage(t,0,0,e,n),r},flipY:function(t){var r=document.createElement("canvas"),e=t.width,n=t.height;r.width=e,r.height=2*n;var i=r.getContext("2d");return i.drawImage(t,0,0,e,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(t,0,0,e,n),r},watermark:function(t,r){r=r||{};var e=t.width,n=t.height,i=document.createElement("canvas");i.width=3*e,i.height=3*n;for(var a=i.getContext("2d"),s=an(r.watermarkAngle)?-r.watermarkAngle:-20,l=xt(s),f=i.width/4,g=i.height/4,m=0;m<4;m++)for(var v=0;v<4;v++)(m+v)%2>0&&(a.setTransform(1,0,0,1,(2*m-1)*f,(2*v-1)*g),a.rotate(l),a.drawImage(t,-e/2,-n/2,e,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,r){Pe(t).attr({width:r.thickness*r.sx,height:r.thickness*r.sy,fill:r.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,r){var e=r.sx<=1?r.thickness*r.sx:r.thickness;Pe(t).attr({width:e,height:e,fill:r.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,r){var e,n=r.width,i=r.height,a=r.thickness;e=n-a>=0&&i-a>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",Pe(t).attr({d:e,stroke:r.color,"stroke-width":r.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,r){var e,n=r.width,i=r.height,a=r.thickness;e=n-a>=0&&i-a>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",Pe(t).attr({d:e,stroke:r.color,"stroke-width":r.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,r){var e,n=r.width,i=r.height,a=r.thickness;e=n-a>=0&&i-a>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",Pe(t).attr({d:e,stroke:r.color,"stroke-width":r.thickness})}}]}});class Mc{constructor(r){this.offsetX=20,this.offsetY=20,this.graph=new No,this.paper=new _d({el:mt("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",e=>{"standard.Ellipse"===e.model.attributes.type&&r(e.model.id)})}makeElement(r,e){const a=16*(.6*Math.max(...e.split("\n").map(l=>l.length))+1)*1.3,s=16*(e.split("\n").length+1)*1.5;return new Ql({id:r,size:{width:a,height:s},fill:"var(--tui-secondary)",attrs:{label:{text:e,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:a,height:s,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(r,e){return new Fo({source:{id:r},target:{id:e},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(r){const e=[],n=[];return r.forEach(i=>{const a=`${i.name.replaceAll(" ","\n")}\n\n${Math.round(100*i.average_success)}% (${i.question_count} Total)`;e.push(this.makeElement(i.pk,a)),i.next_category_ids.forEach(s=>{n.push(this.makeLink(i.pk,s))})}),e.concat(n)}buildGraphFromAdjacencyList(r){const e=this.makeCellsFromAdjacencyList(r);this.graph.resetCells(e);const n=Cs.layout(this.graph,{dagre:fi(),graphlib:Dt(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${n.width+2*this.offsetX}px`,this.paper.svg.style.height=`${n.height+2*this.offsetY}px`}}var Zi=c(19329);function Oc(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().reset()}),o.\u0275\u0275text(1," Back "),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext(),n=o.\u0275\u0275reference(6);o.\u0275\u0275classProp("tui-skeleton",0===n.children.length),o.\u0275\u0275property("disabled",!e.parentNode)}}function kc(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"h2",7),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(),n=o.\u0275\u0275reference(6);o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",0===n.children.length),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Sub-Categories for ",e.parentNodeName," ")}}function Cd(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"h2",7),o.\u0275\u0275text(1," Top-Level Categories "),o.\u0275\u0275elementEnd()),2&t){o.\u0275\u0275nextContext();const e=o.\u0275\u0275reference(6);o.\u0275\u0275classProp("tui-skeleton",0===e.children.length)}}let Lc=(()=>{class t{constructor(e,n,i){this.categoryService=e,this.router=n,this.injector=i,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(e=>{this.rawCategories=e,this.conceptMapGraph=new Mc(n=>{this.parentNode=n,this.isTopLevel(n)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",n]).then()}),this.renderGraph()})}renderGraph(){const e=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(n=>n.pk===this.parentNode).full_name:null,this.rawCategories.filter(n=>n.parent===this.parentNode).forEach(n=>{e.push(n)}),!e)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(e)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(e){return null===this.rawCategories.find(n=>n.pk===e).parent}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Zi.H),o.\u0275\u0275directiveInject(Q.F0),o.\u0275\u0275directiveInject(o.Injector))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"disabled","click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,Oc,2,3,"button",1),o.\u0275\u0275template(2,kc,3,3,"ng-container",2),o.\u0275\u0275template(3,Cd,2,2,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"div",4,5)),2&e){const i=o.\u0275\u0275reference(4),a=o.\u0275\u0275reference(6);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!i),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.parentNode)("ngIfElse",i),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("tui-skeleton",0===a.children.length)}},directives:[M.O5,_t.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();var Rc=c(30567),Nc=c(78659),qn=c(27221),ca=c(40520),Fa=c(22552);let is=(()=>{class t{constructor(e,n){this.http=e,this.apiService=n}getCourseEvent(e){const n=this.apiService.getURL("event",e);return this.http.get(n).pipe((0,qn.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(e){const n=this.apiService.getURL("event",e);return this.http.delete(n).pipe((0,qn.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(e){const n=this.apiService.getURL("event");return this.http.post(n,e).pipe((0,qn.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(e){const n=this.apiService.getURL("event",e.id);return this.http.put(n,e).pipe((0,qn.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const e=this.apiService.getURL("event","get-event-types");return this.http.get(e).pipe((0,qn.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const e=this.apiService.getURL("event");return this.http.get(e).pipe((0,qn.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(e,n){const i=this.apiService.getURL("event","import-event");return this.http.post(i,{event:e.id,course:n},{observe:"response"}).pipe((0,qn.K)(this.apiService.handleError("Error occurred during question import.")))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ca.eN),o.\u0275\u0275inject(Fa.s))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var fa=c(71105),vo=c(27482);function Lt(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"h1",3),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.event.name)}}function hu(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"p",8),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2(" ",e.num_attempts," / ",e.question.max_submission_allowed," Attempts Taken ")}}const dl=function(t,r,e){return["/course",t,"event",r,"problem",e]};function Va(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",12),o.\u0275\u0275text(2," Open "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction3(1,dl,n.courseId,n.eventId,e.question.id))}}const wd=function(t,r){return["/course",t,"problem",r]};function hl(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"a",12),o.\u0275\u0275text(1," Open "),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,wd,n.courseId,e.question.id))}}const Dc=function(t){return["/problem",t,"edit"]};function $r(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",12),o.\u0275\u0275text(2," Edit "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(1,Dc,e.question.id))}}function Sd(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h2",5),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",6),o.\u0275\u0275element(6,"tui-tag",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"p",8),o.\u0275\u0275text(8),o.\u0275\u0275pipe(9,"titlecase"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"p",8),o.\u0275\u0275text(11),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(12,hu,3,2,"ng-container",0),o.\u0275\u0275elementStart(13,"div",9),o.\u0275\u0275template(14,Va,3,5,"ng-container",10),o.\u0275\u0275template(15,hl,2,4,"ng-template",null,11,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(17,$r,3,3,"ng-container",0),o.\u0275\u0275elementEnd()()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(16),i=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.question.parent_category_name?e.question.parent_category_name+": ":""," ",e.question.category_name,""),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.question.title),o.\u0275\u0275advance(2),o.\u0275\u0275property("status",i.highlight(i.getStatus(e)))("value",i.getStatus(e)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(9,11,e.question.type_name)),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("",e.formatted_current_tokens_received," Tokens Received"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",i.eventId),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",i.eventId)("ngIfElse",n),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",i.user.is_teacher)}}function Td(t,r){1&t&&(o.\u0275\u0275elementStart(0,"h2",15),o.\u0275\u0275text(1," There aren't any questions available in this event. "),o.\u0275\u0275elementEnd())}function Fc(t,r){1&t&&(o.\u0275\u0275elementStart(0,"h2",15),o.\u0275\u0275text(1," There aren't any questions available in this course. "),o.\u0275\u0275elementEnd())}function Ed(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Td,2,0,"h2",13),o.\u0275\u0275template(2,Fc,2,0,"ng-template",null,14,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275reference(3),n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.eventId)("ngIfElse",e)}}function Vc(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275template(2,Lt,3,1,"ng-container",0),o.\u0275\u0275elementStart(3,"div",1),o.\u0275\u0275template(4,Sd,18,13,"tui-island",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,Ed,4,2,"ng-container",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-container",e.eventId)("tui-container_adaptive",e.eventId),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.eventId),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",e.uqjs),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.uqjs.length)}}let Bc=(()=>{class t{constructor(e,n,i,a,s,l){this.authenticationService=e,this.router=n,this.route=i,this.uqjService=a,this.courseEventService=s,this.courseService=l,this.authenticationService.currentUser.subscribe(f=>this.user=f)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(e=>{e.success?(0,Rc.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(n=>{this.event=n.event,this.uqjs=n.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(e){return e.question.event&&e.question.is_exam?e.question.is_exam&&e.num_attempts>0?"Submitted":e.question.is_exam?"Not Submitted":void 0:e.status}highlight(e){return 0===e.localeCompare("Solved")?"success":0===e.localeCompare("Partially Solved")?"warning":0===e.localeCompare("Wrong")?"error":"warning"}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ne.$),o.\u0275\u0275directiveInject(Q.F0),o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(Nc.O),o.\u0275\u0275directiveInject(is),o.\u0275\u0275directiveInject(fe.N))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(e,n){1&e&&o.\u0275\u0275template(0,Vc,6,7,"ng-container",0),2&e&&o.\u0275\u0275property("ngIf",n.uqjs)},directives:[M.O5,M.sg,fa.h,vo.Gi,_t.v0,Q.yS],pipes:[M.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})();var Ba=c(22307),qi=c(95428),mo=c(50284),pn=c(61895),Xn=c(56249),Di=c(84620);const pl=["importDialog"];function Pd(t,r){if(1&t&&o.\u0275\u0275element(0,"tui-data-list-wrapper",7),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("items",e.getEventFilterOptions())}}function Id(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-island",8),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().openEventImportDialog()}),o.\u0275\u0275elementStart(2,"div",9)(3,"figure",10),o.\u0275\u0275element(4,"tui-svg",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"h2",12),o.\u0275\u0275text(6,"Add Event"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hoverable",!0))}function Ms(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",24)}function Hc(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",25)}function jc(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275text(1," Grade Not Yet Available "),o.\u0275\u0275elementContainerEnd())}function Ad(t,r){if(1&t&&(o.\u0275\u0275text(0),o.\u0275\u0275pipe(1,"number")),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275textInterpolate1(" Grade: ",o.\u0275\u0275pipeBind2(1,1,e.total_event_grade,"1.0-1"),"% ")}}const Md=function(t,r){return["/course",t,"event",r]};function Od(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",26),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(2,Md,n.courseId,e.id)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.user.is_teacher?"Open":"Complete"," ")}}function kd(t,r){1&t&&(o.\u0275\u0275elementStart(0,"a",27),o.\u0275\u0275text(1," Complete "),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("disabled",!0)}const zc=function(t,r){return["/course",t,"new-event",r]};function Uc(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"a",28),o.\u0275\u0275text(1," Edit "),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,zc,n.courseId,e.id))}}function Ld(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-island")(1,"p",13),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h2",12),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",14),o.\u0275\u0275template(6,Ms,1,0,"tui-tag",15),o.\u0275\u0275template(7,Hc,1,0,"ng-template",null,16,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p",17),o.\u0275\u0275text(10),o.\u0275\u0275pipe(11,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"p",17),o.\u0275\u0275text(13),o.\u0275\u0275pipe(14,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"p",18),o.\u0275\u0275template(16,jc,2,0,"ng-container",19),o.\u0275\u0275template(17,Ad,2,4,"ng-template",null,20,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"div",21),o.\u0275\u0275template(20,Od,3,5,"ng-container",19),o.\u0275\u0275template(21,kd,2,1,"ng-template",null,22,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(23,Uc,2,4,"a",23),o.\u0275\u0275elementEnd()()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(8),i=o.\u0275\u0275reference(18),a=o.\u0275\u0275reference(22),s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.type),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.name),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",e.is_open)("ngIfElse",n),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1("From: ",o.\u0275\u0275pipeBind2(11,11,e.start_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("Until: ",o.\u0275\u0275pipeBind2(14,14,e.end_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.is_open&&e.is_exam)("ngIfElse",i),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",e.is_allowed_to_open||(null==s.user?null:s.user.is_teacher))("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.has_edit_permission)}}function gl(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-island",33)(1,"p",13),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h3",12),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",34),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(e).$implicit,s=o.\u0275\u0275nextContext(3);return s.importCourseEvent(a,s.courseId)}),o.\u0275\u0275text(6," Import "),o.\u0275\u0275elementEnd()()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.type),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.name)}}const Gc=function(t){return["/course",t,"new-event"]};function Os(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",30)(2,"a",31),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().$implicit.complete()}),o.\u0275\u0275elementStart(3,"figure",10),o.\u0275\u0275element(4,"tui-svg",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"h2",12),o.\u0275\u0275text(6,"Create New Event"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(7,gl,7,2,"tui-island",32),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275property("hoverable",!0)("routerLink",o.\u0275\u0275pureFunction1(3,Gc,e.courseId)),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",e.courseEvents)}}function vl(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275template(0,Os,8,5,"ng-container",4),o.\u0275\u0275elementStart(1,"button",29),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e).$implicit.complete()}),o.\u0275\u0275text(2," Cancel "),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",e.courseEvents)}}var Bo=(()=>(function(t){t.ALL="Assignments and Exams",t.ASSIGNMENT="Assignments Only",t.EXAM="Exams Only"}(Bo||(Bo={})),Bo))();let Wc=(()=>{class t{constructor(e,n,i,a){this.authenticationService=e,this.courseEventService=n,this.dialogService=i,this.notificationsService=a,this.filter=Bo.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(e=>this.user=e),this.courseEventService.getEventTypes().subscribe(e=>{this.eventTypes=e})}getEventFilterOptions(){return Object.values(Bo)}getEvents(){switch(this.filter){case Bo.ALL:return this.events.filter(e=>"ASSIGNMENT"===e.type||"EXAM"===e.type);case Bo.ASSIGNMENT:return this.events.filter(e=>"ASSIGNMENT"===e.type);case Bo.EXAM:return this.events.filter(e=>"EXAM"===e.type)}}getUpcomingEvents(){return this.getEvents().filter(e=>e.is_open||e.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(e=>e.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(e=>{this.courseEvents=e}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(e,n){this.courseEventService.importCourseEvent(e,n).subscribe(i=>{201===i.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ne.$),o.\u0275\u0275directiveInject(is),o.\u0275\u0275directiveInject(Ba.RO),o.\u0275\u0275directiveInject(Nt.$F))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-course-events-snippet"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(pl,5),2&e){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(n.importDialog=i.first)}},inputs:{events:"events",course:"course"},decls:8,vars:3,consts:[["tuiTextfieldSize","s",3,"ngModel","ngModelChange"],["tuiTextfield","","placeholder","Choose your hero"],[3,"items",4,"tuiDataList"],[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],[3,"items"],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","m","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","m","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"tui-select",0),o.\u0275\u0275listener("ngModelChange",function(a){return n.filter=a}),o.\u0275\u0275element(1,"input",1),o.\u0275\u0275template(2,Pd,1,1,"tui-data-list-wrapper",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275template(4,Id,7,1,"ng-container",4),o.\u0275\u0275template(5,Ld,24,17,"tui-island",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(6,vl,3,1,"ng-template",null,6,o.\u0275\u0275templateRefExtractor)),2&e&&(o.\u0275\u0275property("ngModel",n.filter),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",null==n.course?null:n.course.has_create_event_permission),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.getEvents()))},directives:[qi.uJ,qi.OI,he.sz,J.NgControlStatus,J.NgModel,pn.MB,Xn.gX,mo.eC,M.O5,fa.h,Di.P,M.sg,vo.Gi,_t.v0,Q.yS],pipes:[M.uU,M.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})(),ks=(()=>{class t{constructor(e,n){this.http=e,this.apiService=n}useTokens(e,n){const i=new ca.WM({"Content-Type":"application/json"}),a=this.apiService.getURL("token-use","use",n);return this.http.post(a,e,{headers:i}).pipe((0,qn.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ca.eN),o.\u0275\u0275inject(Fa.s))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var pu=c(21922);function yo(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",8),o.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd())}function Ha(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",17)}function Rd(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",18)}function $c(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Ha,1,0,"tui-tag",15),o.\u0275\u0275template(2,Rd,1,0,"ng-template",null,16,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275reference(3),n=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.num_used===n.option.maximum_number_of_use)("ngIfElse",e)}}function Nd(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",19)}const Dd=function(){return{standalone:!0}};function Fd(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",10),o.\u0275\u0275template(4,$c,4,2,"ng-container",11),o.\u0275\u0275template(5,Nd,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"p",13),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p",13),o.\u0275\u0275text(10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"p",13),o.\u0275\u0275text(12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"tui-input-count",14),o.\u0275\u0275listener("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(i){return o.\u0275\u0275restoreView(e).$implicit.num_used=i}),o.\u0275\u0275text(14," Number of Tokens Used "),o.\u0275\u0275elementEnd()()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275reference(6);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.option.assignment_name),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",e.num_used>0)("ngIfElse",n),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1("",e.option.tokens_required," Tokens Required"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("",e.option.points_given," Extra Grade Points Given"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("",e.option.maximum_number_of_use," Maximum Uses"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngModel",e.num_used)("max",e.option.maximum_number_of_use)("min",0)("ngModelOptions",o.\u0275\u0275pureFunction0(10,Dd))}}let Vd=(()=>{class t{constructor(e,n,i,a){this.tokenUseService=e,this.route=n,this.authenticationService=i,this.notificationsService=a,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const e in this.tokenUses)this.remainingTokens-=this.tokenUses[e].num_used*this.tokenUses[e].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const e=this.route.snapshot.params.courseId,n={};this.tokenUses.forEach(i=>n[i.option.id]=i.num_used),this.tokenUseService.useTokens(n,e).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ks),o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(ne.$),o.\u0275\u0275directiveInject(Nt.$F))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,yo,3,0,"ng-container",0),o.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),o.\u0275\u0275text(3),o.\u0275\u0275pipe(4,"number"),o.\u0275\u0275pipe(5,"number"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(6,"form",3)(7,"div",4),o.\u0275\u0275template(8,Fd,15,11,"tui-island",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",6)(10,"button",7),o.\u0275\u0275listener("click",function(){return n.confirmChanges()}),o.\u0275\u0275text(11," Confirm Changes "),o.\u0275\u0275elementEnd()()()),2&e&&(o.\u0275\u0275property("ngIf",null==n.user?null:n.user.is_teacher),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("error",n.invalid),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2(" ",o.\u0275\u0275pipeBind2(4,7,n.remainingTokens,"1.0-1"),"/",o.\u0275\u0275pipeBind2(5,10,n.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",n.courseReg.token_uses),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",n.invalid))},directives:[M.O5,Ut.Ls,J.\u0275NgNoValidate,J.NgControlStatusGroup,J.NgForm,M.sg,fa.h,vo.Gi,pu.EA,pu.aQ,J.NgControlStatus,J.NgModel,_t.v0],pipes:[M.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),t})();var Yc=c(76508),eo=c(78697);function Bd(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-island",10),o.\u0275\u0275element(1,"div",11),o.\u0275\u0275elementStart(2,"figure",12),o.\u0275\u0275element(3,"tui-avatar",13,14),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"p",15),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"h3",16),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p",17),o.\u0275\u0275text(10),o.\u0275\u0275elementEnd()()),2&t){const e=r.$implicit,n=r.index,i=o.\u0275\u0275reference(4),a=o.\u0275\u0275nextContext(2);o.\u0275\u0275styleProp("margin-top",n+"rem")("order",n%2*-n),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("background-color",i.bgColor),o.\u0275\u0275advance(2),o.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",e.name||"Anonymous User"),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(a.getGetOrdinal(e.rank)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",e.name||"Anonymous User"," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",e.token?e.token+" Tokens":"No Tokens"," ")}}function Hd(t,r){1&t&&(o.\u0275\u0275elementStart(0,"th",18),o.\u0275\u0275text(1,"Rank"),o.\u0275\u0275elementEnd())}function jd(t,r){1&t&&(o.\u0275\u0275elementStart(0,"th",18),o.\u0275\u0275text(1,"Name"),o.\u0275\u0275elementEnd())}function zd(t,r){1&t&&(o.\u0275\u0275elementStart(0,"th",18),o.\u0275\u0275text(1,"Tokens"),o.\u0275\u0275elementEnd())}function Ud(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"td",21),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.getGetOrdinal(e.rank)," ")}}function Xc(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"td",21)(1,"div",22),o.\u0275\u0275element(2,"tui-avatar",23),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",e.name||"Anonymous User"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.name||"Anonymous User"," ")}}function Kc(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"td",21),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.token||"No Tokens"," ")}}function Jc(t,r){1&t&&(o.\u0275\u0275elementStart(0,"tr",19),o.\u0275\u0275template(1,Ud,2,1,"td",20),o.\u0275\u0275template(2,Xc,4,4,"td",20),o.\u0275\u0275template(3,Kc,2,1,"td",20),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiCell","rank"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiCell","name"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiCell","token"))}function Gd(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",1)(1,"div",2),o.\u0275\u0275template(2,Bd,11,12,"tui-island",3),o.\u0275\u0275pipe(3,"tuiFilter"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),o.\u0275\u0275template(7,Hd,2,0,"th",7),o.\u0275\u0275template(8,jd,2,0,"th",7),o.\u0275\u0275template(9,zd,2,0,"th",7),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(10,"tbody",8),o.\u0275\u0275pipe(11,"tuiFilter"),o.\u0275\u0275template(12,Jc,4,3,"tr",9),o.\u0275\u0275elementEnd()()()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind3(3,7,e.leaderBoard,e.filterInTopX,e.rankTopX)),o.\u0275\u0275advance(2),o.\u0275\u0275property("columns",e.displayedColumns),o.\u0275\u0275advance(3),o.\u0275\u0275property("tuiHead","rank"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiHead","name"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiHead","token"),o.\u0275\u0275advance(1),o.\u0275\u0275property("data",o.\u0275\u0275pipeBind3(11,11,e.leaderBoard,e.filterOutTopX,e.rankTopX)),o.\u0275\u0275advance(2),o.\u0275\u0275property("tuiRowOf",e.leaderBoard)}}let Wd=(()=>{class t{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(e,n)=>e.rank>n,this.filterInTopX=(e,n)=>e.rank<=n}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(e){return e.sort((i,a)=>a.token-i.token).map((i,a)=>({rank:a+1,name:i.name,token:i.token}))}getGetOrdinal(e){const n=["th","st","nd","rd"],i=e%100;return e+(n[(i-20)%10]||n[i]||n[0])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(e,n){1&e&&o.\u0275\u0275template(0,Gd,13,15,"div",0),2&e&&o.\u0275\u0275property("ngIf",n.leaderBoard)},directives:[M.O5,M.sg,fa.h,Yc.JP,eo.c4,eo.Nx,eo.EE,eo.DZ,eo.Ws,eo.jY,eo.LU,eo.fu,eo.Bl,eo.Kt],pipes:[Ie.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),t})();var gu=c(56197);function Qc(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",19)}function $d(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",20)}function Yd(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275text(1," Grade: TBA "),o.\u0275\u0275elementContainerEnd())}function Xd(t,r){if(1&t&&(o.\u0275\u0275text(0),o.\u0275\u0275pipe(1,"number")),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275textInterpolate1(" Grade: ",o.\u0275\u0275pipeBind2(1,1,e.total_event_grade,"1.0-1"),"% ")}}const Zc=function(t,r){return["/course",t,"event",r]};function Kd(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",21),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(2,Zc,n.course.id,e.id)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.user.is_teacher?"View":"Complete"," ")}}function Jd(t,r){1&t&&(o.\u0275\u0275elementStart(0,"a",22),o.\u0275\u0275text(1," Complete "),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("disabled",!0)}const Ci=function(t,r){return["/course",t,"new-event",r]};function Qd(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"a",23),o.\u0275\u0275text(1," Edit "),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,Ci,n.course.id,e.id))}}function Zd(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",6)(1,"div",7),o.\u0275\u0275text(2," Challenge "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",9)(6,"div"),o.\u0275\u0275text(7),o.\u0275\u0275pipe(8,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div"),o.\u0275\u0275text(10),o.\u0275\u0275pipe(11,"date"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(12,"div",10),o.\u0275\u0275template(13,Qc,1,0,"tui-tag",11),o.\u0275\u0275template(14,$d,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",13),o.\u0275\u0275template(17,Yd,2,0,"ng-container",14),o.\u0275\u0275template(18,Xd,2,4,"ng-template",null,15,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"div",16),o.\u0275\u0275template(21,Kd,3,5,"ng-container",14),o.\u0275\u0275template(22,Jd,2,1,"ng-template",null,17,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(24,Qd,2,4,"a",18),o.\u0275\u0275elementEnd()()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(15),i=o.\u0275\u0275reference(19),a=o.\u0275\u0275reference(23),s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(e.name),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("From: ",o.\u0275\u0275pipeBind2(8,10,e.start_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("Until: ",o.\u0275\u0275pipeBind2(11,13,e.end_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.is_open)("ngIfElse",n),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",e.is_not_available_yet)("ngIfElse",i),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",e.is_allowed_to_open||(null==s.user?null:s.user.is_teacher))("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.has_edit_permission)}}function qd(t,r){if(1&t&&o.\u0275\u0275template(0,Zd,25,16,"div",5),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngForOf",e.upcomingEvents)}}function qc(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",19)}function eh(t,r){1&t&&o.\u0275\u0275element(0,"tui-tag",26)}function th(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",21),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(2,Zc,n.course.id,e.id)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.user.is_teacher?"View":"Complete"," ")}}function nh(t,r){1&t&&(o.\u0275\u0275elementStart(0,"a",22),o.\u0275\u0275text(1," Complete "),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("disabled",!0)}function rh(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"a",23),o.\u0275\u0275text(1," Edit "),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,Ci,n.course.id,e.id))}}function ml(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",25)(1,"div",7),o.\u0275\u0275text(2," Challenge "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",9)(6,"div"),o.\u0275\u0275text(7),o.\u0275\u0275pipe(8,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div"),o.\u0275\u0275text(10),o.\u0275\u0275pipe(11,"date"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(12,"div",10),o.\u0275\u0275template(13,qc,1,0,"tui-tag",11),o.\u0275\u0275template(14,eh,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",13),o.\u0275\u0275text(17),o.\u0275\u0275pipe(18,"number"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"div",16),o.\u0275\u0275template(20,th,3,5,"ng-container",14),o.\u0275\u0275template(21,nh,2,1,"ng-template",null,17,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(23,rh,2,4,"a",18),o.\u0275\u0275elementEnd()()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(15),i=o.\u0275\u0275reference(22),a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(e.name),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("From: ",o.\u0275\u0275pipeBind2(8,9,e.start_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("Until: ",o.\u0275\u0275pipeBind2(11,12,e.end_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.is_open)("ngIfElse",n),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" Grade: ",o.\u0275\u0275pipeBind2(18,15,e.total_event_grade,"1.0-1"),"% "),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.is_allowed_to_open||(null==a.user?null:a.user.is_teacher))("ngIfElse",i),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.has_edit_permission)}}function ih(t,r){if(1&t&&o.\u0275\u0275template(0,ml,24,18,"div",24),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngForOf",e.pastEvents)}}let oh=(()=>{class t{constructor(e){this.authenticationService=e,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(e=>this.user=e),this.upcomingEvents=this.events.filter(e=>e.is_open||e.is_not_available_yet).filter(e=>"CHALLENGE"==e.type),this.pastEvents=this.events.filter(e=>e.is_closed).filter(e=>"CHALLENGE"==e.type)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ne.$))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),o.\u0275\u0275text(3," Upcoming Challenges "),o.\u0275\u0275template(4,qd,1,1,"ng-template",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"tui-accordion-item",4),o.\u0275\u0275text(6," Past Challenges "),o.\u0275\u0275template(7,ih,1,1,"ng-template",3),o.\u0275\u0275elementEnd()()()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("closeOthers",!1),o.\u0275\u0275advance(1),o.\u0275\u0275property("disableHover",!0))},directives:[gu.oc,gu.Kc,gu.dv,M.sg,M.O5,vo.Gi,_t.v0,Q.yS],pipes:[M.uU,M.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),t})();function ah(t,r){1&t&&(o.\u0275\u0275elementStart(0,"button",13),o.\u0275\u0275text(1,"Concept Map"),o.\u0275\u0275elementEnd())}function sh(t,r){1&t&&(o.\u0275\u0275elementStart(0,"button",14),o.\u0275\u0275text(1,"Questions"),o.\u0275\u0275elementEnd())}function uh(t,r){1&t&&(o.\u0275\u0275elementStart(0,"button",15),o.\u0275\u0275text(1,"Events"),o.\u0275\u0275elementEnd())}function lh(t,r){1&t&&(o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275text(1,"Token Use"),o.\u0275\u0275elementEnd())}function ch(t,r){1&t&&(o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275text(1,"Leaderboard"),o.\u0275\u0275elementEnd())}function fh(t,r){1&t&&(o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275text(1,"Challenges"),o.\u0275\u0275elementEnd())}function dh(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-concept-map",19),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("currCourse",e.course)}}function hh(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-question-snippet",20),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("questions",null==e.course?null:e.course.question_set)("uqjs",null==e.course?null:e.course.uqjs)}}function ph(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-events-snippet",21),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("course",e.course)("events",null==e.course?null:e.course.events)}}function gh(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-token-use-snippet",22),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("courseReg",null==e.course?null:e.course.course_reg)}}function vh(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-leader-board",23),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("leaderBoard",null==e.course?null:e.course.leader_board)("rankTopX",3)}}function mh(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-challenge-snippet",21),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("course",e.course)("events",null==e.course?null:e.course.events)}}function yh(t,r){1&t&&o.\u0275\u0275element(0,"tui-svg",24)}let xh=(()=>{class t{constructor(e,n,i){this.authenticationService=e,this.courseService=n,this.route=i,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(a=>this.user=a)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(e=>{this.course=e})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ne.$),o.\u0275\u0275directiveInject(fe.N),o.\u0275\u0275directiveInject(Q.gz))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-course"]],decls:21,vars:13,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-text_h6"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h6",2),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"tui-tabs-with-more",3,4),o.\u0275\u0275template(7,ah,2,0,"button",5),o.\u0275\u0275template(8,sh,2,0,"button",6),o.\u0275\u0275template(9,uh,2,0,"button",7),o.\u0275\u0275template(10,lh,2,0,"button",8),o.\u0275\u0275template(11,ch,2,0,"button",9),o.\u0275\u0275template(12,fh,2,0,"button",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(13,dh,2,1,"ng-container",11),o.\u0275\u0275template(14,hh,2,2,"ng-container",11),o.\u0275\u0275template(15,ph,2,2,"ng-container",11),o.\u0275\u0275template(16,gh,2,1,"ng-container",11),o.\u0275\u0275template(17,vh,2,2,"ng-container",11),o.\u0275\u0275template(18,mh,2,2,"ng-container",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(19,yh,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor)),2&e){const i=o.\u0275\u0275reference(6),a=o.\u0275\u0275reference(20);o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!n.course),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",null==n.course?null:n.course.name," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",null==n.course?null:n.course.description," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!n.course),o.\u0275\u0275property("moreContent",a),o.\u0275\u0275advance(8),o.\u0275\u0275property("ngIf",0===i.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1===i.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",2===i.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",3===i.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",4===i.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",5===i.activeItemIndex)}},directives:[zt.WN,zt.tl,zt.yu,M.O5,Lc,Bc,Wc,Vd,Wd,oh,Di.P],styles:[""]}),t})();var Ze=c(68858);let yl=(()=>{class t{static createForm(){return(new J.FormBuilder).group({name:new J.FormControl(null,[J.Validators.required]),type:new J.FormControl("",[J.Validators.required]),countForTokens:new J.FormControl(!1,[J.Validators.required]),startEndDatePicker:new J.FormControl(new Ze.VR(Ze.TU.currentLocal(),Ze.TU.currentLocal().append({day:7})),[J.Validators.required]),startTimePicker:new J.FormControl(Ze.qD.currentLocal(),[J.Validators.required]),endTimePicker:new J.FormControl(Ze.qD.currentLocal(),[J.Validators.required])},{validator:t.dateValidator})}static createFormWithData(e){return(new J.FormBuilder).group({name:new J.FormControl(e.name,[J.Validators.required]),type:new J.FormControl(e.type,[J.Validators.required]),countForTokens:new J.FormControl(e.count_for_tokens,[J.Validators.required]),startEndDatePicker:new J.FormControl(new Ze.VR(Ze.TU.fromLocalNativeDate(new Date(e.start_date)),Ze.TU.fromLocalNativeDate(new Date(e.end_date))),[J.Validators.required]),startTimePicker:new J.FormControl(Ze.qD.fromLocalNativeDate(new Date(e.start_date)),[J.Validators.required]),endTimePicker:new J.FormControl(Ze.qD.fromLocalNativeDate(new Date(e.end_date)),[J.Validators.required])},{validator:t.dateValidator})}static formatFormData(e,n,i){return{id:i,name:e.get("name").value,type:e.get("type").value,count_for_tokens:e.get("countForTokens").value,start_date:this.dateAndTimeToLocal(e.get("startEndDatePicker").value.from,e.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(e.get("startEndDatePicker").value.to,e.get("endTimePicker").value),course:n,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(e,n){return new Date(e.toLocalNativeDate().getTime()+n.toAbsoluteMilliseconds())}}return t.dateValidator=r=>{const e=r.get("startEndDatePicker").value,n=r.get("startTimePicker").value,i=r.get("endTimePicker").value;return!e.from||!e.to||e.isSingleDay&&i.toAbsoluteMilliseconds()<=n.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},t})();var vu=c(86097),xl=c(13774),Le=c(52014),Ho=c(35302),to=c(35137),si=c(28634),da=c(14335),Ls=c(35640),it=c(73442),bl=c(295),ha=c(40022),xo=c(39193),_l=c(52164),Cl=c(70589),Qr=c(45261),pa=c(15411),ja=c(83618),Gn=c(72997),os=c(85113);function ef(t,{value:r,min:e,max:n,dateFormat:i,dateSeparator:a}){return r&&r.toString(i,a)===t?t:Ze.TU.normalizeParse(t,i).dayLimit(e,n).toString(i,a)}function bh(t){return r=>r.length!==Ze.ek?{value:r}:{value:ef(r,t)}}function mu(t,r){return Ze.TU.normalizeParse(t.slice(0,Ze.ek),r.dateFormat).dayLimit(r.min,r.max)}function _h(t,r){const{dateFormat:e,dateSeparator:n}=r;switch(t.length){case Ze.ek:return mu(t,r).toString(e,n);case Ze.ek+Ze.mH.length:return mu(t,r).toString(e,n)+Ze.mH;case Ze.FZ:return r.value&&r.value.toString(e,n)===t?t:Ze.VR.sort(mu(t.slice(0,Ze.ek),r),mu(t.slice(Ze.ek+Ze.mH.length),r)).toString(e,n);default:return t}}function Ch(t){return r=>({value:_h(r,t)})}function tf(t="HH:MM",r={}){const e=["HH","MM","SS","MS"],n=Object.assign(Object.assign({},ja.bM),r);return i=>{const a=[],s=i.split("");return e.forEach(f=>{const g=t.indexOf(f),m=parseInt(String(n[f]).substr(0,1),10);parseInt(s[g],10)>m&&(s[g+1]=s[g],s[g]="0",a.push(g))}),!e.some(f=>parseInt(i.substr(t.indexOf(f),2),10)>n[f])&&{value:s.join(""),indexesOfPipedChars:a}}}const yu=Array(2).fill(xo.hW),nf=Array(4).fill(xo.hW);function rf(t,r){return"YMD"===(os.z.assert(1===r.length,"Separator should consist of only 1 symbol"),t)?[...nf,r,...yu,r,...yu]:[...yu,r,...yu,r,...nf]}function wh(t,r){os.z.assert(1===r.length,"Separator should consist of only 1 symbol");const e=rf(t,r);return[...e,si.f$,si.F,si.f$,...e]}function xu(t,r){const{length:e}=String(t),n=Array(e).fill(xo.hW);return r&&n.unshift(r),n}function of(t,r={}){const{HH:e,MM:n,SS:i,MS:a}=Object.assign(Object.assign({},ja.bM),r);return[...xu(e),...xu(n,":"),...t.includes("HH:MM:SS")?xu(i,":"):[],..."HH:MM:SS.MSS"===t?xu(a,"."):[]]}var bo=c(35628),wl=c(24850),bu=c(7625),Sl=c(6083),Tl=c(34530),Zr=c(33186),_o=c(93030),as=c(26171),Rt=c(24710),_u=c(53256),Cu=c(2141),wu=c(66695);let Th=(()=>{let t=class{constructor(e){this.tuiColor="",this.tuiBackground="",e.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Zr.gH))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275attribute("data-tui-color",n.tuiColor)("data-tui-background",n.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Rt.gn)([(0,o.Input)(),(0,o.HostBinding)("attr.data-tui-color"),(0,it.TH)()],t.prototype,"tuiColor",void 0),(0,Rt.gn)([(0,o.Input)(),(0,o.HostBinding)("attr.data-tui-background"),(0,it.TH)()],t.prototype,"tuiBackground",void 0),t=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Zr.gH))],t),t})(),Eh=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})();var El=c(46579);const Su=({month:t,rowIndex:r,colIndex:e,firstDayOfWeek:n})=>{os.z.assert(Number.isInteger(r)),os.z.assert((0,El.Z2)(r,0,6)),os.z.assert(Number.isInteger(e)),os.z.assert((0,El.Z2)(e,0,Ze.NA));let i=r*Ze.NA+e-((t,r)=>{const e=new Date(t.year,t.month,1).getDay();return e>=r?e-r:Ze.NA-(r-e)})(t,n)+1;return i>t.daysCount&&(i-=t.daysCount,t=t.append({month:1})),i<=0&&(i=(t=t.append({month:-1})).daysCount+i),new Ze.TU(t.year,t.month,i)};let af=(()=>{let t=class{constructor(e){this.firstDayOfWeek=e,this.currentMonth=null,this.currentSheet=[]}transform(e,n=!1){if(this.currentMonth&&this.currentMonth.monthSame(e))return this.currentSheet;const i=[];for(let a=0;a<6;a++){const s=[];for(let l=0;l<Ze.NA;l++){const f=Su({month:e,rowIndex:a,colIndex:l,firstDayOfWeek:this.firstDayOfWeek}),m=(v,A=e)=>v.year>A.year||v.month>A.month;if(!((v,A=e)=>v.year<A.year||v.month<A.month)(f)||n){if(m(f)&&!n)break;s.push(f)}}i.push(s)}return this.currentSheet=i.filter(a=>a.length),this.currentMonth=e,this.currentSheet}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Qr.Sy,16))},t.\u0275pipe=o.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:t,pure:!0}),t=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Qr.Sy))],t),t})(),sf=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})();function Pl(t,r){1&t&&o.\u0275\u0275element(0,"div",3),2&t&&o.\u0275\u0275property("innerText",r.$implicit)}function uf(t,r){if(1&t&&o.\u0275\u0275element(0,"div",12),2&t){const e=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275property("tuiBackground",e[1])}}function lf(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275element(1,"div",12),o.\u0275\u0275template(2,uf,1,1,"div",13),o.\u0275\u0275elementEnd()),2&t){const e=r.ngIf;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiBackground",e[0]),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.length>1)}}function cf(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",8),o.\u0275\u0275listener("tuiHoveredChange",function(i){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().tuiLet;return o.\u0275\u0275nextContext(4).onItemHovered(i&&a)})("tuiPressedChange",function(i){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().tuiLet;return o.\u0275\u0275nextContext(4).onItemPressed(i&&a)})("click",function(){o.\u0275\u0275restoreView(e);const i=o.\u0275\u0275nextContext().tuiLet;return o.\u0275\u0275nextContext(4).onItemClick(i)}),o.\u0275\u0275elementStart(1,"div",9),o.\u0275\u0275text(2),o.\u0275\u0275template(3,lf,3,2,"div",10),o.\u0275\u0275pipe(4,"tuiMapper"),o.\u0275\u0275elementEnd()()}if(2&t){const e=o.\u0275\u0275nextContext().tuiLet,n=o.\u0275\u0275nextContext(4);o.\u0275\u0275classProp("t-cell_weekend",e.isWeekend)("t-cell_today",n.itemIsToday(e))("t-cell_interval",n.itemIsInterval(e)),o.\u0275\u0275attribute("data-range",n.getItemRange(e))("data-state",n.getItemState(e)),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("t-item_unavailable",n.itemIsUnavailable(e)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.day," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind4(4,12,e,n.toMarkers,n.itemIsToday(e),!!n.getItemRange(e)))}}function ff(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,cf,5,17,"div",7),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.tuiLet,n=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.itemIsUnavailable(e)||n.showAdjacent)}}function Ah(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,ff,2,1,"ng-container",2),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext().$implicit,i=o.\u0275\u0275nextContext().tuiLet;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",i[n][e])}}function Mh(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",5),o.\u0275\u0275template(1,Ah,2,1,"ng-container",6),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext().tuiLet;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiRepeatTimesOf",n[e].length)}}function Oh(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,Mh,2,1,"div",4),o.\u0275\u0275elementEnd()),2&t){const e=r.tuiLet;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiRepeatTimesOf",e.length)}}let Tu=(()=>{let t=class{constructor(e){this.weekDays$=e,this.pressedItem=null,this.today=Ze.TU.currentLocal(),this.month=Ze.ql.currentLocal(),this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new o.EventEmitter,this.dayClick=new o.EventEmitter,this.toMarkers=(n,i,a)=>{if(i||a)return null;const s=this.markerHandler(n);return 0===s.length?null:s}}get isSingle(){return null!==this.value&&(this.value instanceof Ze.TU||this.value.isSingleDay)}getItemState(e){const{disabledItemHandler:n,pressedItem:i,hoveredItem:a}=this;return n(e)?"disabled":i&&i.daySame(e)?"pressed":a&&a.daySame(e)?"hovered":null}getItemRange(e){const{value:n,hoveredItem:i}=this;return n?n instanceof Ze.TU?n.daySame(e)?"single":null:n.from.daySame(e)&&!n.isSingleDay||i&&i.dayAfter(n.from)&&n.from.daySame(e)&&n.isSingleDay||i&&i.daySame(e)&&i.dayBefore(n.from)&&n.isSingleDay?"start":n.to.daySame(e)&&!n.isSingleDay||i&&i.dayBefore(n.from)&&n.from.daySame(e)&&n.isSingleDay||i&&i.daySame(e)&&i.dayAfter(n.from)&&n.isSingleDay?"end":n.isSingleDay&&n.from.daySame(e)?"single":null:null}itemIsToday(e){return this.today.daySame(e)}itemIsUnavailable(e){return!this.month.monthSame(e)}itemIsInterval(e){const{value:n,hoveredItem:i}=this;if(null===n||n instanceof Ze.TU)return!1;if(!n.isSingleDay)return n.from.daySameOrBefore(e)&&n.to.dayAfter(e);if(null===i)return!1;const a=Ze.VR.sort(n.from,i);return a.from.daySameOrBefore(e)&&a.to.dayAfter(e)}onItemHovered(e){this.updateHoveredItem(e||null)}onItemPressed(e){this.pressedItem=e||null}onItemClick(e){this.dayClick.emit(e)}updateHoveredItem(e){(0,da.Hm)(this.hoveredItem,e,(n,i)=>n.daySame(i))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Qr.lQ))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275classProp("_single",n.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,Pl,1,1,"div",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,Oh,2,1,"div",2),o.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,2,n.weekDays$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("tuiLet",o.\u0275\u0275pipeBind2(4,4,n.month,!0)))},directives:[M.sg,ha.Ls,_u.Xj,M.O5,Cu.c,wu.n,Th],pipes:[M.Ov,af,_o.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"month",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"markerHandler",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"hoveredItem",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"showAdjacent",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"hoveredItemChange",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"dayClick",void 0),(0,Rt.gn)([(0,o.HostBinding)("class._single")],t.prototype,"isSingle",null),t=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Qr.lQ))],t),t})(),Eu=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,ha.WD,_o.I,_u.Ih,Cu.V,wu.f,Eh,sf]]}),t})();var df=c(43360);function kh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",4),o.\u0275\u0275listener("tuiHoveredChange",function(i){const s=o.\u0275\u0275restoreView(e).tuiLet;return o.\u0275\u0275nextContext(3).onItemHovered(i,s)})("tuiPressedChange",function(i){const s=o.\u0275\u0275restoreView(e).tuiLet;return o.\u0275\u0275nextContext(3).onItemPressed(i,s)})("click",function(){const a=o.\u0275\u0275restoreView(e).tuiLet;return o.\u0275\u0275nextContext(3).onItemClick(a)}),o.\u0275\u0275elementStart(1,"div",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()}if(2&t){const e=r.tuiLet,n=o.\u0275\u0275nextContext(3);o.\u0275\u0275classProp("t-cell_today",n.itemIsToday(e))("t-cell_interval",n.itemIsInterval(e)),o.\u0275\u0275property("tuiScrollIntoView",n.scrollItemIntoView(e)),o.\u0275\u0275attribute("data-range",n.getItemRange(e))("data-state",n.getItemState(e)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e)}}function Il(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,kh,3,8,"div",3),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext().$implicit,i=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",i.getItem(n,e))}}function hf(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",1),o.\u0275\u0275template(1,Il,2,1,"ng-container",2),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiRepeatTimesOf",4))}let Lh=(()=>{let t=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=Ze.ql.currentLocal().year,this.value=null,this.initialItem=Ze.ql.currentLocal(),this.min=Ze.K1,this.max=Ze.Oy,this.disabledItemHandler=si.Iy,this.yearClick=new o.EventEmitter}get isSingle(){const{value:e}=this;return!!e&&this.isRange(e)&&e.from.yearSame(e.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const e=this.initialItem.year-100;return this.min.year>e?this.min.year:e}get calculatedMax(){const e=this.initialItem.year+100;return this.max.year<e?this.max.year+1:e}isRange(e){return e instanceof Ze.dt}scrollItemIntoView(e){return this.initialItem.year===e}getItem(e,n){return 4*e+n+this.calculatedMin}getItemState(e){const{disabledItemHandler:n,max:i,pressedItem:a,hoveredItem:s}=this;return i.year<e||n!==si.Iy&&n(e)?"disabled":a===e?"pressed":s===e?"hovered":null}getItemRange(e){const{value:n,hoveredItem:i}=this;return null===n?null:n instanceof Ze.F4?n.year===e?"single":null:n.from.year===e&&!n.from.yearSame(n.to)||null!==i&&i>n.from.year&&n.from.year===e&&n.from.yearSame(n.to)||null!==i&&i===e&&i<n.from.year&&n.from.yearSame(n.to)?"start":n.to.year===e&&!n.from.yearSame(n.to)||null!==i&&i<n.from.year&&n.from.year===e&&n.from.yearSame(n.to)||null!==i&&i===e&&i>n.from.year&&n.from.yearSame(n.to)?"end":n.from.yearSame(n.to)&&n.from.year===e?"single":null}itemIsToday(e){return this.currentYear===e}itemIsInterval(e){const{value:n,hoveredItem:i}=this;return!(null===n||!this.isRange(n))&&(n.from.yearSame(n.to)?null!==i&&n.from.year!==i&&(0,El.Z2)(e,Math.min(n.from.year,i),Math.max(n.from.year,i)):n.from.year<=e&&n.to.year>e)}onItemHovered(e,n){this.updateHoveredItem(e,n)}onItemPressed(e,n){this.updatePressedItem(e,n)}onItemClick(e){this.yearClick.emit(new Ze.F4(e))}updateHoveredItem(e,n){this.hoveredItem=e?n:null}updatePressedItem(e,n){this.pressedItem=e?n:null}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275classProp("_single",n.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(e,n){1&e&&o.\u0275\u0275template(0,hf,2,1,"div",0),2&e&&o.\u0275\u0275property("tuiRepeatTimesOf",n.rows)},directives:[_u.Xj,ha.Ls,df.M,Cu.c,wu.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"initialItem",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"yearClick",void 0),(0,Rt.gn)([(0,o.HostBinding)("class._single")],t.prototype,"isSingle",null),t})(),Rh=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[Cu.V,wu.f,_u.Ih,ha.WD,df.e]]}),t})();var Al=c(61279),Pu=c(33703),ss=c(89627),vf=c(37940),mf=c(3054);const Nh=["wrapper"];function Dh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",1,2),o.\u0275\u0275listener("tuiFocusedChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onFocused(i)})("tuiFocusVisibleChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onFocusVisible(i)})("keydown.arrowLeft",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onRightClick()}),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onLeftClick()}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"span",4),o.\u0275\u0275projection(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",5),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onRightClick()}),o.\u0275\u0275elementEnd()()}if(2&t){const e=r.ngIf,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("tuiFocusable",n.computedFocusable),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("arrow_hidden",n.leftComputedDisabled),o.\u0275\u0275property("title",e[0])("focusable",!1),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("arrow_hidden",n.rightComputedDisabled),o.\u0275\u0275property("title",e[1])("focusable",!1)}}const Fh=["*"];let no=(()=>{let t=class extends Ho.Xn{constructor(e){super(),this.spinTexts$=e,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new o.EventEmitter,this.rightClick=new o.EventEmitter}get focused(){return!!this.wrapper&&(0,Ls.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(e){this.updateFocused(e)}onFocusVisible(e){this.updateFocusVisible(e)}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Qr.U4))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-spin-button"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Nh,5),2&e){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(n.wrapper=i.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Fh,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,Dh,6,9,"div",0),o.\u0275\u0275pipe(1,"async")),2&e&&o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,1,n.spinTexts$))},directives:[M.O5,as.A,Pu.t,mf.U,vf.q,_t.v0],pipes:[M.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Rt.gn)([(0,o.ViewChild)("wrapper")],t.prototype,"wrapper",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabled",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"mode",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"leftDisabled",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"rightDisabled",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"leftClick",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"rightClick",void 0),t=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Qr.U4))],t),t})(),Vh=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,vf.c,mf.F,Pu.u,as.Z,_t.fN]]}),t})();var yf=c(5767);function za(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275text(1),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.value.formattedYear," ")}}function $t(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",3),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onYearClick()}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("tuiFocusable",!1),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.value.formattedYear," ")}}let Bh=(()=>{let t=class{constructor(){this.value=Ze.ql.currentLocal(),this.min=Ze.K1,this.max=Ze.Oy,this.valueChange=new o.EventEmitter,this.yearClick=new o.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(e){const n=this.value.append(e);this.min.monthSameOrAfter(n)?this.updateValue(this.min):this.max.monthSameOrBefore(n)?this.updateValue(this.max):this.updateValue(n)}updateValue(e){this.value.monthSame(e)||(this.value=e,this.valueChange.emit(e))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),o.\u0275\u0275listener("leftClick",function(){return n.onPrevMonthClick()})("rightClick",function(){return n.onNextMonthClick()}),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275pipe(3,"tuiMonth"),o.\u0275\u0275template(4,za,2,1,"ng-container",1),o.\u0275\u0275template(5,$t,2,2,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e){const i=o.\u0275\u0275reference(6);o.\u0275\u0275property("focusable",!1)("leftDisabled",n.prevMonthDisabled)("rightDisabled",n.nextMonthDisabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(2,6,o.\u0275\u0275pipeBind1(3,8,n.value))," "),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.oneYear)("ngIfElse",i)}},directives:[no,M.O5,ss.V,Pu.t],pipes:[M.Ov,yf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"valueChange",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"yearClick",void 0),t})(),ui=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,Pu.u,Vh,ss.j,yf.g]]}),t})();function cr(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),o.\u0275\u0275listener("yearClick",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onPickerYearClick(i)}),o.\u0275\u0275elementEnd()()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("min",e.min)("max",e.max)("initialItem",e.year)("value",e.value)}}function Hh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),o.\u0275\u0275listener("valueChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onPaginationValueChange(i)})("yearClick",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onPaginationYearClick(i)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),o.\u0275\u0275listener("hoveredItemChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onHoveredItemChange(i)})("dayClick",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDayClick(i)}),o.\u0275\u0275pipe(2,"tuiMapper"),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("min",e.computedMinViewedMonth)("max",e.computedMaxViewedMonth)("value",e.month),o.\u0275\u0275advance(1),o.\u0275\u0275property("showAdjacent",e.showAdjacent)("value",e.value)("month",e.month)("disabledItemHandler",o.\u0275\u0275pipeBind4(2,9,e.disabledItemHandler,e.disabledItemHandlerMapper,e.min,e.max))("markerHandler",e.markerHandler)("hoveredItem",e.hoveredItem)}}let Co=(()=>{let t=class{constructor(){this.month=Ze.ql.currentLocal(),this.value=null,this.disabledItemHandler=si.Iy,this.min=Ze.K1,this.max=Ze.Oy,this.minViewedMonth=Ze.K1,this.maxViewedMonth=Ze.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=xo.zE,this.dayClick=new o.EventEmitter,this.monthChange=new o.EventEmitter,this.hoveredItemChange=new o.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(e,n,i)=>a=>a.dayBefore(n)||a.dayAfter(i)||e(a)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(e){this.year=e}onPickerYearClick({year:e}){this.year=null,this.updateViewedMonth(new Ze.ql(e,this.month.month))}onPaginationValueChange(e){this.updateViewedMonth(e)}onDayClick(e){this.dayClick.emit(e)}onHoveredItemChange(e){this.updateHoveredDay(e)}updateViewedMonth(e){this.month.monthSame(e)||(this.month=e,this.monthChange.emit(e))}updateHoveredDay(e){(0,da.Hm)(this.hoveredItem,e,(n,i)=>n.daySame(i))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(e,n){if(1&e&&(o.\u0275\u0275template(0,cr,2,4,"tui-scrollbar",0),o.\u0275\u0275template(1,Hh,3,14,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&e){const i=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",n.year)("ngIfElse",i)}},directives:[M.O5,Al.IB,Lh,Bh,Tu],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"month",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"minViewedMonth",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"maxViewedMonth",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"hoveredItem",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"showAdjacent",void 0),(0,Rt.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"markerHandler",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"dayClick",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"monthChange",void 0),(0,Rt.gn)([(0,o.Output)()],t.prototype,"hoveredItemChange",void 0),t})(),Rs=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,ui,Eu,Rh,Al.Jy,_o.I]]}),t})(),jh=(()=>{let t=class{constructor(e,n,i){this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.defaultViewedMonthFirst=Ze.ql.currentLocal(),this.defaultViewedMonthSecond=Ze.ql.currentLocal().append({month:1}),this.min=Ze.K1,this.max=Ze.Oy,this.value=null,this.dayClick=new o.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(a,s)=>a.append({month:s}),e&&e.pipe((0,Tl.YP)(n),(0,bu.R)(i)).subscribe(a=>{this.value=a,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(e){this.userViewedMonthFirst=e,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:e.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(e){this.userViewedMonthSecond=e,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:e.year-this.userViewedMonthFirst.year}))}onDayClick(e){this.dayClick.emit(e)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(e){return e.monthSameOrAfter(this.max)?this.max:e.monthBefore(this.min)?this.min.append({month:1}):e}updatedViewedMonthFirst(e){return e.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):e.monthSameOrBefore(this.min)?this.min:e}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Gn.cU,8),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Zr.a3))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[o.\u0275\u0275ProvidersFeature([Zr.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"tui-calendar",0),o.\u0275\u0275listener("hoveredItemChange",function(a){return n.hoveredItem=a})("dayClick",function(a){return n.onDayClick(a)})("monthChange",function(a){return n.onSectionFirstViewedMonth(a)}),o.\u0275\u0275pipe(1,"tuiMapper"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"tui-calendar",1),o.\u0275\u0275listener("hoveredItemChange",function(a){return n.hoveredItem=a})("dayClick",function(a){return n.onDayClick(a)})("monthChange",function(a){return n.onSectionSecondViewedMonth(a)}),o.\u0275\u0275pipe(3,"tuiMapper"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("min",n.min)("max",n.max)("month",n.userViewedMonthFirst)("markerHandler",n.markerHandler)("maxViewedMonth",o.\u0275\u0275pipeBind3(1,18,n.cappedUserViewedMonthSecond,n.monthOffset,-1))("value",n.value)("disabledItemHandler",n.disabledItemHandler)("showAdjacent",!1)("hoveredItem",n.hoveredItem),o.\u0275\u0275advance(2),o.\u0275\u0275property("min",n.min)("max",n.max)("month",n.userViewedMonthSecond)("markerHandler",n.markerHandler)("minViewedMonth",o.\u0275\u0275pipeBind3(3,22,n.cappedUserViewedMonthFirst,n.monthOffset,1))("value",n.value)("disabledItemHandler",n.disabledItemHandler)("showAdjacent",!1)("hoveredItem",n.hoveredItem))},directives:[Co],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"defaultViewedMonthFirst",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"defaultViewedMonthSecond",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"value",void 0),(0,Le.gn)([(0,o.Output)()],t.prototype,"dayClick",void 0),t=(0,Le.gn)([(0,Le.fM)(0,(0,o.Inject)(Gn.cU)),(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(Zr.a3))],t),t})(),zh=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[_o.I,Al.Jy,Rs]]}),t})();const xf=function(t,r,e,n){return[t,r,e,n,!0]},bf=function(t,r,e,n){return[t,r,e,n,!1]};function Ml(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),o.\u0275\u0275listener("dayClick",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDayClick(i)}),o.\u0275\u0275pipe(1,"tuiMapper"),o.\u0275\u0275pipe(2,"tuiMapper"),o.\u0275\u0275pipe(3,"tuiMapper"),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("markerHandler",e.markerHandler)("min",o.\u0275\u0275pipeBindV(1,7,o.\u0275\u0275pureFunction4(22,xf,e.min,e.maxLengthMapper,e.value,e.maxLength)))("max",o.\u0275\u0275pipeBindV(2,13,o.\u0275\u0275pureFunction4(27,bf,e.max,e.maxLengthMapper,e.value,e.maxLength)))("defaultViewedMonthFirst",e.defaultViewedMonth)("defaultViewedMonthSecond",o.\u0275\u0275pipeBind2(3,19,e.defaultViewedMonth,e.monthShiftMapper))("disabledItemHandler",e.calculatedDisabledItemHandler)("value",e.value)}}function Uh(t,r){1&t&&o.\u0275\u0275element(0,"tui-svg",9)}function jo(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",7),o.\u0275\u0275listener("keydown.enter.prevent",function(){const a=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(a)})("keydown.space.prevent",function(){const a=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(a)})("click",function(){const a=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(a)}),o.\u0275\u0275text(1),o.\u0275\u0275template(2,Uh,1,0,"tui-svg",8),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275attribute("aria-checked",n.isItemActive(e)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isItemActive(e))}}const _f=function(t,r,e,n,i,a){return[t,r,e,n,i,a]};function Iu(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),o.\u0275\u0275listener("dayClick",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDayClick(i)}),o.\u0275\u0275pipe(2,"tuiMapper"),o.\u0275\u0275pipe(3,"tuiMapper"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"tui-data-list",5),o.\u0275\u0275template(5,jo,3,3,"button",6),o.\u0275\u0275pipe(6,"tuiMapper"),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd()()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("value",e.value)("markerHandler",e.markerHandler)("min",o.\u0275\u0275pipeBindV(2,7,o.\u0275\u0275pureFunction4(28,xf,e.min,e.maxLengthMapper,e.value,e.maxLength)))("max",o.\u0275\u0275pipeBindV(3,13,o.\u0275\u0275pureFunction4(33,bf,e.max,e.maxLengthMapper,e.value,e.maxLength)))("month",e.computedMonth)("disabledItemHandler",e.calculatedDisabledItemHandler),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBindV(6,19,o.\u0275\u0275pureFunction6(38,_f,e.items,e.mapper,e.min,e.max,e.minLength,o.\u0275\u0275pipeBind1(7,26,e.otherDateText$))))}}let Kn=(()=>{let t=class{constructor(e,n,i,a){this.otherDateText$=a,this.defaultViewedMonth=Ze.ql.currentLocal(),this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.items=[],this.min=Ze.K1,this.max=Ze.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new o.EventEmitter,this.rangeChange=new o.EventEmitter,this.maxLengthMapper=ja.EP,this.monthShiftMapper=s=>s.append({month:1}),this.mapper=(s,l,f,g,m)=>[...s.filter(v=>(null===g||v.range.from.append(g).daySameOrBefore(v.range.to))&&v.range.to.daySameOrAfter(l)&&(null===f||v.range.from.daySameOrBefore(f))),m],e&&e.pipe((0,Tl.YP)(n),(0,bu.R)(i)).subscribe(s=>{this.value=s})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(e){const{activePeriod:n}=this;return"string"==typeof e&&null===n||n===e}onRangeChange(e){this.updateValue(e)}onDayClick(e){const{value:n}=this;null!==n&&n.isSingleDay?this.updateValue(Ze.VR.sort(n.from,e)):this.value=new Ze.VR(e,e)}onItemSelect(e){"string"==typeof e?null!==this.activePeriod&&this.updateValue(null):this.updateValue(e.range.dayLimit(this.min,this.max))}updateValue(e){this.value=e,this.valueChange.emit(e),this.rangeChange.emit(e)}get activePeriod(){return this.items.find(e=>(0,da.Hm)(this.value,e.range,(n,i)=>n.from.daySame(i.from.dayLimit(this.min,this.max))&&n.to.daySame(i.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(e,n,i){return a=>{if(!n||!n.isSingleDay||!i)return e(a);const s=n.from.append(i,!0).append({day:1}),l=n.from.append(i).append({day:-1});return s.dayBefore(a)&&l.dayAfter(a)||e(a)}}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Gn.cU,8),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Zr.a3),o.\u0275\u0275directiveInject(Gn.q5))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[o.\u0275\u0275ProvidersFeature([Zr.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(e,n){if(1&e&&(o.\u0275\u0275template(0,Ml,4,32,"tui-primitive-calendar-range",0),o.\u0275\u0275template(1,Iu,8,45,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&e){const i=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",!n.items.length)("ngIfElse",i)}},directives:[M.O5,jh,as.A,Co,Xn.qi,M.sg,Xn.vK,Di.P],pipes:[_o.c,M.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"minLength",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"maxLength",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"value",void 0),(0,Le.gn)([(0,o.Output)()],t.prototype,"valueChange",void 0),(0,Le.gn)([(0,o.Output)()],t.prototype,"rangeChange",void 0),(0,Le.gn)([it.UM],t.prototype,"calculateDisabledItemHandler",null),t=(0,Le.gn)([(0,Le.fM)(0,(0,o.Inject)(Gn.cU)),(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(Zr.a3)),(0,Le.fM)(3,(0,o.Inject)(Gn.q5))],t),t})(),er=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,_o.I,as.Z,Rs,Rs,Di.E,Xn.pc,zh]]}),t})();var zo=c(38190),Uo=c(67795);function Gh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),o.\u0275\u0275listener("valueChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onValueChange(i)})("hoveredChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onHovered(i)})("pressedChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onPressed(i)}),o.\u0275\u0275projection(1),o.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),o.\u0275\u0275elementEnd()}if(2&t){const e=r.tuiLet,n=o.\u0275\u0275nextContext(),i=o.\u0275\u0275reference(4),a=o.\u0275\u0275reference(6);o.\u0275\u0275property("pseudoFocused",n.innerPseudoFocused)("pseudoHovered",n.pseudoHovered)("pseudoPressed",n.pseudoPressed)("invalid",n.computedInvalid)("tuiTextfieldExampleText",n.computedExampleText)("nativeId",n.nativeId)("filler",n.getComputedRangeFiller(e))("readOnly",n.readOnly)("iconContent",n.computedMobile?i:a)("disabled",n.computedDisabled)("textMask",n.computedMask)("value",n.computedValue)}}function Wh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-svg",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onMobileClick()}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!e.computedDisabled),o.\u0275\u0275property("src",e.calendarIcon)}}function $h(t,r){if(1&t&&o.\u0275\u0275element(0,"tui-svg",7),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!e.computedDisabled),o.\u0275\u0275property("src",e.calendarIcon)}}function Yh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-calendar-range",8),o.\u0275\u0275listener("valueChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onRangeChange(i)}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("defaultViewedMonth",e.defaultViewedMonth)("disabledItemHandler",e.disabledItemHandler)("items",e.items)("min",e.min)("max",e.max)("markerHandler",e.markerHandler)("minLength",e.minLength)("maxLength",e.maxLength)("value",e.value)}}const Xh=["*",[["input"]]],Cf=["*","input"],Ol=[{provide:Ho.M$,useExisting:(0,o.forwardRef)(()=>kl)},{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>kl)},{provide:Gn.cU,deps:[[new o.Optional,new o.Self,J.NgControl],[new o.Optional,(0,o.forwardRef)(()=>Gn.LD)]],useFactory:(t,r)=>(0,vu.q7)(t,r)},Sl.Sm];let kl=(()=>{let t=class extends Ho.F9{constructor(e,n,i,a,s,l,f,g,m,v,A,B){super(e,n,B),this.injector=i,this.isMobile=a,this.dialogService=s,this.mobileCalendar=l,this.textfieldSize=f,this.textfieldExampleText=g,this.dateFormat=m,this.dateSeparator=v,this.dateTexts$=A,this.valueTransformer=B,this.textMaskOptions={mask:wh(this.dateFormat,this.dateSeparator),pipe:Ch(this),guide:!1},this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.defaultViewedMonth=Ze.ql.currentLocal(),this.items=[],this.min=Ze.K1,this.max=Ze.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=ja.EP,this.dateFiller$=this.dateTexts$.pipe((0,wl.U)(Y=>(0,Ze.Yl)(Y[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,_l.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?ja.DV:this.textMaskOptions}get activePeriod(){return this.items.find(e=>(0,da.Hm)(this.value,e.range,(n,i)=>n.from.daySame(i.from.dayLimit(this.min,this.max))&&n.to.daySame(i.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:e,nativeValue:n,activePeriod:i}=this;return i?String(i):e?e.getFormattedDayRange(this.dateFormat,this.dateSeparator):n}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(e){!this.nativeFocusableElement||(this.nativeFocusableElement.value=e)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(e){return this.activePeriod?"":this.getDateRangeFiller(e)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,bu.R)(this.destroy$)).subscribe(e=>{this.updateValue(e)}):this.toggle()}onOpenChange(e){this.open=e}onValueChange(e){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),e||this.onOpenChange(!0),e.length!==Ze.FZ)return void this.updateValue(null);const n=Ze.VR.normalizeParse(e,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(n):n)}onRangeChange(e){this.toggle(),this.focusInput(),e||(this.nativeValue=""),(0,da.Hm)(this.value,e,(n,i)=>n.daySame(i))||this.updateValue(e)}onItemSelect(e){this.toggle(),this.focusInput(),"string"==typeof e?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(e.range.dayLimit(this.min,this.max))}onHovered(e){this.updateHovered(e)}onPressed(e){this.updatePressed(e)}onActiveZone(e){this.updateFocused(e),!e&&!this.itemSelected&&(this.nativeValue.length===Ze.ek||this.nativeValue.length===Ze.ek+Ze.mH.length)&&this.updateValue(Ze.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(e){super.writeValue(e),this.nativeValue=e?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(e=>String(e)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(e=!1){this.nativeFocusableElement&&(0,Ls.NY)(this.nativeFocusableElement,!0,e)}clampValue(e){const n=this.minLength&&e.from.append(this.minLength).dayAfter(e.to)?new Ze.VR(e.from,e.from.append(this.minLength).append({day:-1})):e,i=this.maxLength?n.from.append(this.maxLength).append({day:-1}):this.max;return n.to.dayAfter(i)?new Ze.VR(n.from,i):n}getDateRangeFiller(e){return`${e}${Ze.mH}${e}`}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(J.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(to.fL),o.\u0275\u0275directiveInject(Ba.RO),o.\u0275\u0275directiveInject(Gn.vk,8),o.\u0275\u0275directiveInject(he.kI),o.\u0275\u0275directiveInject(he.pX),o.\u0275\u0275directiveInject(Ze.P_),o.\u0275\u0275directiveInject(Ze.q_),o.\u0275\u0275directiveInject(Gn.zf),o.\u0275\u0275directiveInject(Gn.LD,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-input-date-range"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(pn.yc,5),2&e){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(n.textfield=i.first)}},hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("click",function(){return n.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[o.\u0275\u0275ProvidersFeature(Ol),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Cf,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(e,n){if(1&e&&(o.\u0275\u0275projectionDef(Xh),o.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),o.\u0275\u0275listener("openChange",function(a){return n.onOpenChange(a)})("tuiActiveZoneChange",function(a){return n.onActiveZone(a)}),o.\u0275\u0275template(1,Gh,3,12,"tui-primitive-textfield",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,Wh,1,3,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(5,$h,1,3,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,Yh,1,9,"ng-template",null,4,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e){const i=o.\u0275\u0275reference(8);o.\u0275\u0275property("canOpen",n.canOpen)("content",i)("open",n.open&&n.canOpen),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",o.\u0275\u0275pipeBind1(2,4,n.dateFiller$))}},directives:[pa.o1,bl.e,ha.Ls,pn.yc,pn.B1,zo.n,he.D9,he._K,Uo.hd,Di.P,Kn],pipes:[M.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Le.gn)([(0,o.ViewChild)(pn.yc)],t.prototype,"textfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"minLength",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"maxLength",void 0),(0,Le.gn)([(0,o.HostListener)("click")],t.prototype,"onClick",null),t=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(J.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(o.Injector)),(0,Le.fM)(3,(0,o.Inject)(to.fL)),(0,Le.fM)(4,(0,o.Inject)(Ba.RO)),(0,Le.fM)(5,(0,o.Optional)()),(0,Le.fM)(5,(0,o.Inject)(Gn.vk)),(0,Le.fM)(6,(0,o.Inject)(he.kI)),(0,Le.fM)(7,(0,o.Inject)(he.pX)),(0,Le.fM)(8,(0,o.Inject)(Ze.P_)),(0,Le.fM)(9,(0,o.Inject)(Ze.q_)),(0,Le.fM)(10,(0,o.Inject)(Gn.zf)),(0,Le.fM)(11,(0,o.Optional)()),(0,Le.fM)(11,(0,o.Inject)(Gn.LD))],t),t})();var Ll;let Go=Ll=class extends Cl.dh{get value(){return this.host.computedValue}onValueChange(r){this.host.onValueChange(r)}process(r){r.inputMode="numeric"}};Go.\u0275fac=function(){let t;return function(e){return(t||(t=o.\u0275\u0275getInheritedFactory(Go)))(e||Go)}}(),Go.\u0275dir=o.\u0275\u0275defineDirective({type:Go,selectors:[["tui-input-date-range"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Qr.S0,useExisting:(0,o.forwardRef)(()=>Ll)}]),o.\u0275\u0275InheritDefinitionFeature]});let wi=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,Uo.QA,bl.A,ha.WD,bo.wq,pn.KW,he.cn,pa.jh,Di.E,er,zo.S]]}),t})();var us=c(56498);function Kh(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext(2).onMenuClick(a)}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("size",n.itemSize)("disabled",n.disabledItemHandler(e)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e," ")}}function Jh(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list",3),o.\u0275\u0275template(1,Kh,2,3,"button",4),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.filtered)}}const wf={icon:({$implicit:t})=>"s"===t?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:ja.bM,itemSize:"m"},Ds=new o.InjectionToken("Default parameters for input time component",{factory:()=>wf});var Yt;let fr=Yt=class extends Ho.F9{constructor(r,e,n,i){super(r,e),this.timeTexts$=n,this.options=i,this.disabledItemHandler=si.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,Ls.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(r){!this.nativeFocusableElement||(this.nativeFocusableElement.value=r)}getFiller$(r){return this.timeTexts$.pipe((0,wl.U)(e=>e[r]))}onClick(){this.open=!this.open}onValueChange(r){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const e=this.getMatch(r);if(void 0!==e)return void this.updateValue(e);if(r.length!==this.mode.length)return void this.updateValue(null);const n=Ze.qD.fromString(r);this.updateValue(this.strict?this.findNearestTimeFromItems(n):n)}onFocused(r){if(this.updateFocused(r),r||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const e=Ze.qD.fromString(this.nativeValue);this.updateValue(e),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(r){this.updateHovered(r)}onArrowUp(r){this.items.length||this.processArrow(r,1)}onArrowDown(r){this.items.length||this.processArrow(r,-1)}onMenuClick(r){this.focusInput(),this.updateValue(r)}onOpen(r){this.open=r}writeValue(r){super.writeValue(r),this.nativeValue=r?this.computedValue:""}calculateMask(r){return{mask:of(r,this.options.maxValues),pipe:tf(r,this.options.maxValues),guide:!1}}filter(r,e,n){return r.filter(i=>i.toString(e).includes(n))}findNearestTimeFromItems(r){return this.items.reduce((e,n)=>Math.abs(n.toAbsoluteMilliseconds()-r.toAbsoluteMilliseconds())<Math.abs(e.toAbsoluteMilliseconds()-r.toAbsoluteMilliseconds())?n:e)}getMatch(r){return this.items.find(e=>(0,si.zy)(e,r))}close(){this.open=!1}processArrow(r,e){const{target:n}=r;if(this.readOnly||!(n instanceof HTMLInputElement))return;const i=n.selectionStart||0;this.shiftTime(this.calculateShift(i,e)),n.setSelectionRange(i,i),r.preventDefault()}calculateShift(r,e){return r<=2?{hours:e}:r<=5?{minutes:e}:r<=8?{seconds:e}:{ms:e}}shiftTime(r){if(null===this.value)return;const e=this.value.shift(r);this.nativeValue=e.toString(this.mode),this.updateValue(e)}focusInput(r=!1){this.nativeFocusableElement&&((0,Ls.NY)(this.nativeFocusableElement,!0,r),this.close())}};fr.\u0275fac=function(r){return new(r||fr)(o.\u0275\u0275directiveInject(J.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Gn.Yq),o.\u0275\u0275directiveInject(Ds))},fr.\u0275cmp=o.\u0275\u0275defineComponent({type:fr,selectors:[["tui-input-time"]],viewQuery:function(r,e){if(1&r&&o.\u0275\u0275viewQuery(pn.yc,5),2&r){let n;o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(e.textfield=n.first)}},hostBindings:function(r,e){1&r&&o.\u0275\u0275listener("click",function(){return e.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[o.\u0275\u0275ProvidersFeature([{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>Yt)},Sl.yn]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(r,e){if(1&r&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),o.\u0275\u0275listener("openChange",function(i){return e.onOpen(i)})("focusedChange",function(i){return e.onFocused(i)}),o.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),o.\u0275\u0275listener("valueChange",function(i){return e.onValueChange(i)})("hoveredChange",function(i){return e.onHovered(i)})("keydown.arrowUp",function(i){return e.onArrowUp(i)})("keydown.arrowDown",function(i){return e.onArrowDown(i)}),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275projection(3),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(4,Jh,2,1,"ng-template",null,2,o.\u0275\u0275templateRefExtractor)),2&r){const n=o.\u0275\u0275reference(5);o.\u0275\u0275property("canOpen",e.interactive&&!!e.filtered.length)("content",n)("open",e.interactive&&e.open&&!!e.filtered.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("filler",o.\u0275\u0275pipeBind1(2,16,e.getFiller$(e.mode)))("nativeId",e.nativeId)("pseudoFocused",e.innerPseudoFocused)("pseudoHovered",e.pseudoHovered)("pseudoPressed",e.pseudoPressed)("invalid",e.computedInvalid)("focusable",e.focusable)("disabled",e.disabled)("readOnly",e.readOnly)("textMask",e.textMaskOptions)("iconContent",e.icon)("value",e.computedValue)("postfix",e.postfix)}},directives:[pa.o1,pn.yc,pn.B1,zo.n,he.D9,Uo.hd,Xn.qi,M.sg,Xn.vK],pipes:[M.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),fr.ctorParameters=()=>[{type:J.NgControl,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[J.NgControl]}]},{type:o.ChangeDetectorRef,decorators:[{type:o.Inject,args:[o.ChangeDetectorRef]}]},{type:us.y,decorators:[{type:o.Inject,args:[Gn.Yq]}]},{type:void 0,decorators:[{type:o.Inject,args:[Ds]}]}],(0,Le.gn)([(0,o.ViewChild)(pn.yc)],fr.prototype,"textfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],fr.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],fr.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],fr.prototype,"itemSize",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],fr.prototype,"strict",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],fr.prototype,"mode",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],fr.prototype,"postfix",void 0),(0,Le.gn)([it.UM],fr.prototype,"getFiller$",null),(0,Le.gn)([(0,o.HostListener)("click")],fr.prototype,"onClick",null),(0,Le.gn)([it.UM],fr.prototype,"calculateMask",null),(0,Le.gn)([it.UM],fr.prototype,"filter",null),fr=Yt=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(J.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(Gn.Yq)),(0,Le.fM)(3,(0,o.Inject)(Ds))],fr);let Fi=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,Uo.QA,Xn.pc,pa.jh,pn.KW,zo.S,he.cn]]}),t})();function Sf(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",24),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e[1]," ")}}function Zh(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,Sf,2,2,"button",23),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.localEventTypes)}}function Sn(t,r){1&t&&(o.\u0275\u0275elementStart(0,"tui-notification",25),o.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),o.\u0275\u0275elementEnd())}const qh=function(t){return["/course",t]};let Rl=(()=>{class t{constructor(e,n,i,a){this.route=e,this.courseEventService=n,this.router=i,this.notificationsService=a,this.eventId=null,this.timeOptions=(0,vu.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=yl.createForm(),this.courseEventService.getEventTypes().subscribe(e=>this.localEventTypes=e),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(e=>{this.formData=yl.createFormWithData(e)}))}submitEvent(e){const n=yl.formatFormData(e,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(n).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},i=>{this.notificationsService.show(i,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(n).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},i=>{this.notificationsService.show(i,{status:"error"}).subscribe()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(is),o.\u0275\u0275directiveInject(Q.F0),o.\u0275\u0275directiveInject(Nt.$F))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0)(1,"form",1),o.\u0275\u0275listener("ngSubmit",function(){return n.submitEvent(n.formData)}),o.\u0275\u0275elementStart(2,"h2",2),o.\u0275\u0275text(3,"Create New Event"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),o.\u0275\u0275text(6,"Event Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(7,"tui-field-error",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),o.\u0275\u0275text(10," Event Type "),o.\u0275\u0275template(11,Zh,2,1,"tui-data-list",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"tui-field-error",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),o.\u0275\u0275text(15,"Counts for tokens "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(16,"tui-field-error",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),o.\u0275\u0275text(19," Start and end date "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(20,"tui-field-error",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),o.\u0275\u0275text(24," Start time "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(25,"tui-field-error",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),o.\u0275\u0275text(28," End time "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(29,"tui-field-error",18),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(30,Sn,2,0,"tui-notification",19),o.\u0275\u0275elementStart(31,"div",20)(32,"button",21),o.\u0275\u0275text(33," Submit "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(34,"a",22),o.\u0275\u0275text(35,"Back"),o.\u0275\u0275elementEnd()()()()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroup",n.formData),o.\u0275\u0275advance(22),o.\u0275\u0275property("items",n.timeOptions),o.\u0275\u0275advance(4),o.\u0275\u0275property("items",n.timeOptions),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",null==n.formData.errors?null:n.formData.errors.forbiddenDateRange),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",n.formData.invalid),o.\u0275\u0275advance(2),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(6,qh,n.courseId)))},directives:[J.\u0275NgNoValidate,J.NgControlStatusGroup,J.FormGroupDirective,ce.K3,ce.wU,J.NgControlStatus,J.FormControlName,On.y,qi.uJ,qi.OI,Xn.gX,Xn.qi,M.sg,Xn.vK,xl.p,kl,Go,fr,M.O5,Ut.Ls,_t.v0,Q.yS],styles:[""]}),t})();var ls=c(25775),ep=c(42654),Tf=c(7394);let tp=(()=>{class t{constructor(e,n){this.http=e,this.apiService=n}getUserStatsByCategory(e){const n=this.apiService.getURL("user-stats","category",e);return this.http.get(n).pipe((0,qn.K)(this.apiService.handleError("Error occurred while getting user stats")))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ca.eN),o.\u0275\u0275inject(Fa.s))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var np=c(59796);class Ef{static createForm(){return(new J.FormBuilder).group({report:new J.FormControl("",[J.Validators.required]),report_details:new J.FormControl("")})}static extractData(r){return r.value}}let rp=(()=>{class t{constructor(e,n){this.http=e,this.apiService=n}reportQuestion(e,n){const i=this.apiService.getURL("question-report");return this.http.post(i,Object.assign(Object.assign({},n),{question:e})).pipe((0,qn.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ca.eN),o.\u0275\u0275inject(Fa.s))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pf=c(24417),Nl=c(26537);function ip(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",9),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e[1]," ")}}function op(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,ip,2,2,"button",8),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.reportOptions)}}function ap(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),o.\u0275\u0275pipe(3,"stringifyTuiDataList"),o.\u0275\u0275text(4," Reason "),o.\u0275\u0275template(5,op,2,1,"tui-data-list",4),o.\u0275\u0275element(6,"tui-field-error",5),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),o.\u0275\u0275text(9," Details "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(10,"div",2)(11,"button",7),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().submitReport()}),o.\u0275\u0275text(12," Submit Report "),o.\u0275\u0275elementEnd()()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",e.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("valueContent",e.reportOptions?o.\u0275\u0275pipeBind3(3,3,e.reportOptions,0,1):""),o.\u0275\u0275advance(9),o.\u0275\u0275property("disabled",e.formGroup.invalid)}}const sp=function(){return{label:"Report this question",size:"m"}};let up=(()=>{class t{constructor(e,n){this.reportQuestionService=e,this.notificationsService=n,this.open=!1,this.openChange=new o.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=Ef.createForm()}toggleDialog(e){this.open=e,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Ef.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(rp),o.\u0275\u0275directiveInject(Nt.$F))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,ap,13,7,"ng-template",0),o.\u0275\u0275listener("tuiDialogChange",function(a){return n.toggleDialog(a)})),2&e&&o.\u0275\u0275property("tuiDialogOptions",o.\u0275\u0275pureFunction0(2,sp))("tuiDialog",n.open)},directives:[Ba.iu,J.NgControlStatusGroup,J.FormGroupDirective,qi.uJ,qi.OI,J.NgControlStatus,J.FormControlName,Xn.gX,Xn.qi,M.sg,Xn.vK,On.y,Pf.Jl,Pf.eQ,_t.v0],pipes:[Nl.J],styles:[""]}),t})();const Fs=function(t){return["../",t]};function lp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",22)(1,"a",23),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"tui-svg",24),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!e.category)("tui-skeleton_text",!e.category),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(8,Fs,null==e.parentCategory?null:e.parentCategory.pk)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",null==e.parentCategory?null:e.parentCategory.name," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!e.category)}}function Dl(t,r){1&t&&o.\u0275\u0275element(0,"tui-svg",32)}function cp(t,r){1&t&&o.\u0275\u0275element(0,"tui-svg",32)}function fp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"a",28,29),o.\u0275\u0275text(2),o.\u0275\u0275template(3,cp,1,0,"tui-svg",30),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(1);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(4,Fs,e.category.pk)),o.\u0275\u0275attribute("aria-checked",n.isActive),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",e.category.full_name," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isActive)}}function dp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),o.\u0275\u0275text(3),o.\u0275\u0275template(4,Dl,1,0,"tui-svg",30),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,fp,4,6,"a",31),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(2);o.\u0275\u0275property("label",e.category.name),o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(6,Fs,e.category.pk)),o.\u0275\u0275attribute("aria-checked",n.isActive),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" All\xa0",e.category.name," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isActive),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.children)}}function Ar(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list",25),o.\u0275\u0275template(1,dp,6,8,"tui-opt-group",26),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.nestedCategories)}}function li(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",34),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e[1]," ")}}function hp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,li,2,2,"button",33),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.difficulties)}}function pp(t,r){if(1&t&&o.\u0275\u0275element(0,"app-problem-view",35),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("questionId",e.currentQuestionId)}}function gp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",36),o.\u0275\u0275element(1,"tui-marker-icon",37),o.\u0275\u0275elementStart(2,"h1",38),o.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),o.\u0275\u0275elementEnd()()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!e.category||!e.uqjs),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!e.category||!e.uqjs)}}const If=function(){return["../../../"]};let vp=(()=>{class t{constructor(e,n,i,a,s,l){this.route=e,this.uqjService=n,this.difficultyService=i,this.courseService=a,this.categoryService=s,this.userStatsService=l,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new ep.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(e=>{this.categories=e,this.nestedCategories=e.reduce((n,i)=>i.parent?n:[...n,{category:i,children:e.filter(a=>a.parent===i.pk).map(a=>({category:a,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(n=>{var i,a;this.courseId=Number.parseInt(n.get("courseId")),this.categoryId=Number.parseInt(n.get("categoryId")),this.category=e.find(m=>this.categoryId===m.pk),this.parentCategory=e.find(m=>this.category.parent===m.pk),this.cursor=0,this.uqjs=void 0;const s=this.userStatsService.getUserStatsByCategory(this.categoryId),l=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(a=null===(i=this.parentCategory)||void 0===i?void 0:i.pk)&&void 0!==a?a:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),f=this.difficultyService.getDifficulties(),g=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,Rc.D)([l,f,s,g]).subscribe(([m,v,A,B])=>{this.uqjs=O.shuffle(m),this.difficulties=v,this.userStats=A,this.categoryUserSuccessRate=B.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(e,n){var i,a;this.difficulty=e,this.include_solved=n,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(a=null===(i=this.parentCategory)||void 0===i?void 0:i.pk)&&void 0!==a?a:this.categoryId,difficulty:this.difficulty,is_solved:!!n&&void 0,is_verified:!0,is_practice:!0}).subscribe(s=>{this.uqjs=O.shuffle(s),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var e;const n=null!==(e=this.difficulty)&&void 0!==e?e:"ALL",i=this.userStats.find(a=>a.difficulty===n);this.userSuccessRate=i?i.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(a=>a.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(Nc.O),o.\u0275\u0275directiveInject(Tf.G),o.\u0275\u0275directiveInject(fe.N),o.\u0275\u0275directiveInject(Zi.H),o.\u0275\u0275directiveInject(tp))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-practice-problem"]],decls:34,vars:40,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),o.\u0275\u0275text(5," Back to course "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(6,lp,4,10,"div",5),o.\u0275\u0275elementStart(7,"tui-hosted-dropdown",6)(8,"button",7),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(10,Ar,2,1,"ng-template",null,8,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(12,"p",9),o.\u0275\u0275text(13),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"p",10),o.\u0275\u0275text(15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"tui-select",11),o.\u0275\u0275listener("ngModelChange",function(a){return n.updateQuestions(a,n.include_solved)}),o.\u0275\u0275pipe(17,"stringifyTuiDataList"),o.\u0275\u0275text(18," Choose a level of difficulty "),o.\u0275\u0275template(19,hp,2,1,"tui-data-list",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"tui-checkbox-labeled",13),o.\u0275\u0275listener("ngModelChange",function(a){return n.updateQuestions(n.difficulty,a)}),o.\u0275\u0275text(21," Include Solved "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(22,"div",14)(23,"button",15),o.\u0275\u0275listener("click",function(){return n.openReportQuestion()}),o.\u0275\u0275text(24," Report "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(25,"button",16),o.\u0275\u0275listener("click",function(){return n.prevQuestion()}),o.\u0275\u0275text(26," Previous Question "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(27,"button",17),o.\u0275\u0275listener("click",function(){return n.nextQuestion()}),o.\u0275\u0275text(28," Next Question "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(29,"div",18),o.\u0275\u0275template(30,pp,1,1,"app-problem-view",19),o.\u0275\u0275template(31,gp,4,4,"ng-template",null,20,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(33,"app-problem-report-modal",21),o.\u0275\u0275listener("openChange",function(a){return n.reportQuestionModal=a}),o.\u0275\u0275elementEnd()),2&e){const i=o.\u0275\u0275reference(11),a=o.\u0275\u0275reference(32);let s;o.\u0275\u0275advance(4),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction0(39,If)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.parentCategory),o.\u0275\u0275advance(1),o.\u0275\u0275property("content",i),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!n.category),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2(" ",n.parentCategory?"":"All ","",null!==(s=null==n.category?null:n.category.name)&&void 0!==s?s:"Category Name"," "),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("tui-skeleton",!n.category||!n.userStats)("tui-skeleton_text",!n.category||!n.userStats),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*n.userSuccessRate).toFixed(2)+"%"||0," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!n.category||!n.userStats)("tui-skeleton_text",!n.category||!n.userStats),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*n.categorySuccessRate).toFixed(2)+"%"||0," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!n.difficulties||!n.category),o.\u0275\u0275property("ngModel",n.difficulty)("tuiTextfieldCleaner",!0)("valueContent",n.difficulties?o.\u0275\u0275pipeBind3(17,35,n.difficulties,0,1):""),o.\u0275\u0275advance(4),o.\u0275\u0275classProp("tui-skeleton",!n.difficulties||!n.category),o.\u0275\u0275property("ngModel",n.include_solved),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("tui-skeleton",!n.category||!n.uqjs),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("tui-skeleton",!n.category||!n.uqjs),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("tui-skeleton",!n.category||!n.uqjs),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.currentQuestionId&&n.category&&n.uqjs)("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("open",n.reportQuestionModal)("questionId",n.currentQuestionId)}},directives:[np.k,_t.v0,Q.yS,M.O5,ss.V,Di.P,pa.o1,Xn.qi,M.sg,Xn.Rs,Xn.vK,Q.Od,qi.uJ,qi.OI,he.sz,J.NgControlStatus,J.NgModel,he.be,Xn.gX,xl.p,J.DefaultValueAccessor,ls.z,gr.B,up],pipes:[Nl.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),t})(),Fl=(()=>{class t{constructor(e,n){this.http=e,this.apiService=n}getGoal(e){const n=this.apiService.getURL("goal",e);return this.http.get(n).pipe((0,qn.K)(this.apiService.handleError("Unable to fetch goal.")))}getGoals(){const e=this.apiService.getURL("goal");return this.http.get(e).pipe((0,qn.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(e){const n=this.apiService.getURL("goal");return this.http.post(n,e).pipe((0,qn.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(e){const n=this.apiService.getURL("goal-item");return this.http.post(n,e).pipe((0,qn.K)(this.apiService.handleError("Unable to create goal item.")))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ca.eN),o.\u0275\u0275inject(Fa.s))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function mp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;let n;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate3(" Solve ",e.number_of_questions," ",null!==(n=e.difficulty)&&void 0!==n?n:""," questions from ",e.category," ")}}const Af=function(t){return[t]};function yp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275text(1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div"),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275text(7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div"),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div"),o.\u0275\u0275text(11),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(12," Items "),o.\u0275\u0275template(13,mp,2,3,"div",0),o.\u0275\u0275elementStart(14,"a",1),o.\u0275\u0275text(15,"Open"),o.\u0275\u0275elementEnd()()),2&t){const e=r.$implicit,n=r.index;o.\u0275\u0275attribute("data-index",n),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Goal ",n," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Start date: ",e.start_date," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" End date: ",e.end_date," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Progress: ",e.progress," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Is Finished: ",e.is_finished," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Number of questions: ",e.number_of_questions," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",e.goal_items),o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(9,Af,e.id))}}let xp=(()=>{class t{constructor(e){this.goalService=e}ngOnInit(){this.goalService.getGoals().subscribe(e=>{this.goals=e})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Fl))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-goal-page"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"h1"),o.\u0275\u0275text(1,"Goals"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,yp,16,11,"div",0),o.\u0275\u0275elementStart(3,"a",1),o.\u0275\u0275text(4,"Create a new goal"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.goals),o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink","create"))},directives:[M.sg,Q.yS],styles:[""]}),t})();class fs{static createGoalForm(){return(new J.FormBuilder).group({end_date:new J.FormControl(Ze.TU.currentLocal(),[J.Validators.required]),end_time:new J.FormControl(Ze.qD.currentLocal(),[J.Validators.required]),goal_items:new J.FormArray([fs.createGoalItemForm()],[J.Validators.required])})}static createGoalItemForm(){return(new J.FormBuilder).group({category:new J.FormControl("",[J.Validators.required]),difficulty:new J.FormControl("",[J.Validators.required]),number_of_questions:new J.FormControl("",[J.Validators.required])})}static formatGoalFormData(r,e){return{course_id:e,end_date:this.dateAndTimeToLocal(r.get("end_date").value,r.get("end_time").value)}}static formatGoalItemFormData(r,e){return Object.assign({goal:e},r.value)}static dateAndTimeToLocal(r,e){return new Date(r.toLocalNativeDate().getTime()+e.toAbsoluteMilliseconds()).toISOString()}}function Tp(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),o.\u0275\u0275listener("valueChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onValueChange(i)})("hoveredChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onHovered(i)})("focusedChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onFocused(i)}),o.\u0275\u0275projection(1),o.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),o.\u0275\u0275elementEnd()}if(2&t){const e=r.tuiLet,n=o.\u0275\u0275nextContext(),i=o.\u0275\u0275reference(4),a=o.\u0275\u0275reference(6);o.\u0275\u0275property("pseudoFocused",n.pseudoFocused)("pseudoHovered",n.pseudoHovered)("invalid",n.computedInvalid)("filler",n.getComputedFiller(e))("nativeId",n.nativeId)("readOnly",n.readOnly)("focusable",n.computedFocusable)("iconContent",n.computedMobile?i:a)("disabled",n.computedDisabled)("textMask",n.computedMask)("value",n.computedValue)}}function Ep(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-svg",7),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onMobileClick()}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!e.computedDisabled),o.\u0275\u0275property("src",e.calendarIcon)}}function Pp(t,r){if(1&t&&o.\u0275\u0275element(0,"tui-svg",8),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!e.computedDisabled),o.\u0275\u0275property("src",e.calendarIcon)}}function Ip(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",11)(1,"button",12),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(e);const i=o.\u0275\u0275nextContext(2);return i.onDayClick(i.items[0].day)}),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()}if(2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",e.items[0]," ")}}function Ap(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-calendar",9),o.\u0275\u0275listener("dayClick",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDayClick(i)})("monthChange",function(i){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onMonthChange(i)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(1,Ip,3,1,"div",10)}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("min",e.min)("max",e.max)("markerHandler",e.markerHandler)("disabledItemHandler",e.disabledItemHandler)("month",e.computedActiveYearMonth)("value",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1===e.items.length)}}const Mp=["*",[["input"]]],Op=["*","input"],Lp=[{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>Hl)},{provide:Gn.cU,deps:[[new o.Optional,new o.Self,J.NgControl],[new o.Optional,Gn.HF]],useFactory:(t,r)=>(0,vu.q7)(t,r)},{provide:Ho.M$,useExisting:(0,o.forwardRef)(()=>Hl)},Sl.Sm];let Hl=(()=>{let t=class extends Ho.F9{constructor(e,n,i,a,s,l,f,g,m,v,A){super(e,n,A),this.injector=i,this.isMobile=a,this.dialogService=s,this.mobileCalendar=l,this.textfieldSize=f,this.dateFormat=g,this.dateSeparator=m,this.dateTexts$=v,this.valueTransformer=A,this.month=null,this.textMaskOptions={mask:rf(this.dateFormat,this.dateSeparator),pipe:bh(this),guide:!1},this.min=Ze.K1,this.max=Ze.Oy,this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.items=[],this.defaultActiveYearMonth=Ze.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,wl.U)(B=>(0,Ze.Yl)(B[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,_l.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:e,nativeValue:n,activeItem:i}=this;return i?String(i):e?e.toString(this.dateFormat,this.dateSeparator):n}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(e){!this.nativeFocusableElement||(this.nativeFocusableElement.value=e)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?ja.DV:this.textMaskOptions}get activeItem(){const{value:e}=this;return e&&this.items.find(n=>n.day.daySame(e))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(e){return this.activeItem?"":e}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,bu.R)(this.destroy$)).subscribe(e=>{this.updateValue(e)}):this.open=!this.open}onValueChange(e){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),e||this.onOpenChange(!0),this.updateValue(e.length!==Ze.ek?null:Ze.TU.normalizeParse(e,this.dateFormat))}onDayClick(e){this.updateValue(e),this.open=!1}onHovered(e){this.updateHovered(e)}onMonthChange(e){this.month=e}onOpenChange(e){this.open=e}onFocused(e){this.updateFocused(e)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(e){super.writeValue(e),this.nativeValue=e?this.computedValue:""}valueIdenticalComparator(e,n){return(0,da.Hm)(e,n,(i,a)=>i.daySame(a))}};return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(J.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(to.fL),o.\u0275\u0275directiveInject(Ba.RO),o.\u0275\u0275directiveInject(Gn.vk,8),o.\u0275\u0275directiveInject(he.kI),o.\u0275\u0275directiveInject(Ze.P_),o.\u0275\u0275directiveInject(Ze.q_),o.\u0275\u0275directiveInject(Gn.zf),o.\u0275\u0275directiveInject(Gn.HF,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["tui-input-date"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(pn.yc,5),2&e){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(n.textfield=i.first)}},hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("click",function(){return n.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[o.\u0275\u0275ProvidersFeature(Lp),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Op,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(e,n){if(1&e&&(o.\u0275\u0275projectionDef(Mp),o.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),o.\u0275\u0275listener("openChange",function(a){return n.onOpenChange(a)}),o.\u0275\u0275template(1,Tp,3,11,"tui-primitive-textfield",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,Ep,1,3,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(5,Pp,1,3,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,Ap,2,7,"ng-template",4,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e){const i=o.\u0275\u0275reference(8);o.\u0275\u0275property("canOpen",n.canOpen)("open",n.open&&n.canOpen)("content",i),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",o.\u0275\u0275pipeBind1(2,5,n.filler$)),o.\u0275\u0275advance(6),o.\u0275\u0275property("polymorpheus",n.type)}},directives:[pa.o1,ha.Ls,pn.yc,pn.B1,zo.n,he.D9,Uo.hd,Di.P,bo.GL,Co,as.A,M.O5,ss.V],pipes:[M.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Le.gn)([(0,o.ViewChild)(pn.yc)],t.prototype,"textfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],t.prototype,"defaultActiveYearMonth",void 0),(0,Le.gn)([(0,o.HostListener)("click")],t.prototype,"onClick",null),t=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(J.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(o.Injector)),(0,Le.fM)(3,(0,o.Inject)(to.fL)),(0,Le.fM)(4,(0,o.Inject)(Ba.RO)),(0,Le.fM)(5,(0,o.Optional)()),(0,Le.fM)(5,(0,o.Inject)(Gn.vk)),(0,Le.fM)(6,(0,o.Inject)(he.kI)),(0,Le.fM)(7,(0,o.Inject)(Ze.P_)),(0,Le.fM)(8,(0,o.Inject)(Ze.q_)),(0,Le.fM)(9,(0,o.Inject)(Gn.zf)),(0,Le.fM)(10,(0,o.Optional)()),(0,Le.fM)(10,(0,o.Inject)(Gn.HF))],t),t})();var kf;let ds=kf=class extends Cl.dh{get value(){return this.host.computedValue}onValueChange(r){this.host.onValueChange(r)}process(r){r.inputMode="numeric"}};ds.\u0275fac=function(){let t;return function(e){return(t||(t=o.\u0275\u0275getInheritedFactory(ds)))(e||ds)}}(),ds.\u0275dir=o.\u0275\u0275defineDirective({type:ds,selectors:[["tui-input-date"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Qr.S0,useExisting:(0,o.forwardRef)(()=>kf)}]),o.\u0275\u0275InheritDefinitionFeature]});let Rp=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,Uo.QA,bo.wq,as.Z,Rs,Di.E,ss.j,pa.jh,pn.KW,zo.S,ha.WD,he.cn]]}),t})();var Wo=c(27670),jl=c(60390);function Lf(t,r){if(1&t&&o.\u0275\u0275element(0,"div",3),2&t){o.\u0275\u0275nextContext();const e=o.\u0275\u0275reference(6);o.\u0275\u0275property("content",e)}}function Np(t,r){1&t&&o.\u0275\u0275projection(0,2)}const Dp=["*",[["input"]],[["","polymorpheus-outlet",""]]],Fp=function(t,r,e,n,i){return[t,r,e,n,i]};var Mu;let Rr=Mu=class extends Ho.F9{constructor(r,e,n,i){super(r,e),this.numberFormat=n,this.isIOS=i,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(a,s,l,f)=>({mask:(0,Wo.EC)({allowNegative:a,decimalLimit:l,allowDecimal:"never"!==s,requireDecimal:"always"===s,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,Wo.YT)(this.numberFormat)}),pipe:(0,Wo.qs)("always"===s?l:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,f,a,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(r){const e=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:n}=this;e.length<this.precision||!n||!n.selectionStart||"0"!==this.nativeValue[n.selectionStart]||(r.preventDefault(),n.selectionStart++)}onValueChange(r){if((0,Wo.Y5)(r))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const e=this.absoluteCapInputValue(r);null===e||isNaN(e)||(this.updateValue(e),e!==(0,Wo.uk)(r,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(r){if(xo.YZ.includes(r.key)){if("never"===this.decimal)return void r.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(r.preventDefault(),this.setCaretAfterComma())}}onFocused(r){if(this.updateFocused(r),r)return;const e=this.nativeNumberValue;if(isNaN(e))return void this.clear();const n=Math.min(this.max,Math.max(this.min,e));this.updateValue(n),this.nativeValue=this.formattedValue}onHovered(r){this.updateHovered(r)}onPressed(r){this.updatePressed(r)}getFormattedValue(r){const n=Math.abs(r)%1>0;let i="always"===this.decimal||n?this.precision:0;const a=n?(0,jl.Nk)(r,this.precision):"";return this.focused&&"always"!==this.decimal&&(i=a.length),(0,jl.uf)(r,i,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const r=this.nativeNumberValue;return r<0?r>this.max:r<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(r){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=r,this.nativeFocusableElement.value=r)}get nativeNumberValue(){return(0,Wo.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(r){const e=(0,Wo.uk)(r,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),n=e<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),e):Math.min(e,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(n)||n<this.min||n>this.max?null:n}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const r=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(r,r)}};var qr;Rr.\u0275fac=function(r){return new(r||Rr)(o.\u0275\u0275directiveInject(J.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Qr.HO),o.\u0275\u0275directiveInject(to.FA))},Rr.\u0275cmp=o.\u0275\u0275defineComponent({type:Rr,selectors:[["tui-input-number"]],contentQueries:function(r,e,n){if(1&r&&o.\u0275\u0275contentQuery(n,bo.r1,5),2&r){let i;o.\u0275\u0275queryRefresh(i=o.\u0275\u0275loadQuery())&&(e.polymorpheusValueContent=i.first)}},viewQuery:function(r,e){if(1&r&&o.\u0275\u0275viewQuery(pn.yc,5),2&r){let n;o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(e.primitiveTextfield=n.first)}},hostBindings:function(r,e){1&r&&o.\u0275\u0275listener("keydown.0",function(i){return e.onZero(i)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[o.\u0275\u0275ProvidersFeature([{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>Mu)},{provide:Ho.M$,useExisting:(0,o.forwardRef)(()=>Mu)}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(r,e){1&r&&(o.\u0275\u0275projectionDef(Dp),o.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),o.\u0275\u0275listener("valueChange",function(i){return e.onValueChange(i)})("hoveredChange",function(i){return e.onHovered(i)})("focusedChange",function(i){return e.onFocused(i)})("pressedChange",function(i){return e.onPressed(i)})("keydown",function(i){return e.onKeyDown(i)}),o.\u0275\u0275pipe(1,"tuiMapper"),o.\u0275\u0275projection(2),o.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),o.\u0275\u0275template(4,Lf,1,1,"div",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,Np,1,0,"ng-template",null,2,o.\u0275\u0275templateRefExtractor)),2&r&&(o.\u0275\u0275property("pseudoHovered",e.computedHovered)("pseudoFocused",e.computedFocused)("pseudoPressed",e.computedPressed)("invalid",e.computedInvalid)("tuiTextfieldMaxLength",e.calculatedMaxLength)("readOnly",e.readOnly)("disabled",e.computedDisabled)("textMask",o.\u0275\u0275pipeBindV(1,13,o.\u0275\u0275pureFunction5(19,Fp,e.isNegativeAllowed,e.mask,e.decimal,e.precision,e.nativeFocusableElement)))("value",e.computedValue)("prefix",e.prefix)("postfix",e.postfix)("focusable",e.focusable),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",e.polymorpheusValueContent))},directives:[pn.yc,pn.B1,zo.n,he.D9,he.fy,Uo.hd,M.O5,bo.r1],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Rr.ctorParameters=()=>[{type:J.NgControl,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[J.NgControl]}]},{type:o.ChangeDetectorRef,decorators:[{type:o.Inject,args:[o.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:o.Inject,args:[Qr.HO]}]},{type:Boolean,decorators:[{type:o.Inject,args:[to.FA]}]}],(0,Le.gn)([(0,o.ViewChild)(pn.yc)],Rr.prototype,"primitiveTextfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],Rr.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],Rr.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],Rr.prototype,"decimal",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],Rr.prototype,"precision",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],Rr.prototype,"prefix",void 0),(0,Le.gn)([(0,o.Input)(),(0,it.TH)()],Rr.prototype,"postfix",void 0),(0,Le.gn)([(0,o.ContentChild)(bo.r1)],Rr.prototype,"polymorpheusValueContent",void 0),(0,Le.gn)([(0,o.HostListener)("keydown.0",["$event"])],Rr.prototype,"onZero",null),Rr=Mu=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(J.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(Qr.HO)),(0,Le.fM)(3,(0,o.Inject)(to.FA))],Rr);let va=qr=class extends Cl.dh{get value(){return this.host.computedValue}onValueChange(r){this.host.onValueChange(r)}process(r){this.input=r}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};va.\u0275fac=function(){let t;return function(e){return(t||(t=o.\u0275\u0275getInheritedFactory(va)))(e||va)}}(),va.\u0275dir=o.\u0275\u0275defineDirective({type:va,selectors:[["tui-input-number"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Qr.S0,useExisting:(0,o.forwardRef)(()=>qr)}]),o.\u0275\u0275InheritDefinitionFeature]});let Bp=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,Uo.QA,_o.I,pn.KW,he.cn,zo.S,bo.wq]]}),t})();function Hp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.pk),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.full_name," ")}}function jp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,Hp,2,2,"button",17),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.categories)}}function zp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e[1]," ")}}function Ul(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,zp,2,2,"button",17),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.difficulties)}}function Up(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",13),o.\u0275\u0275pipe(3,"stringifyTuiDataList"),o.\u0275\u0275text(4," Category "),o.\u0275\u0275template(5,jp,2,1,"tui-data-list",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"tui-field-error",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div",4)(8,"tui-select",13),o.\u0275\u0275pipe(9,"stringifyTuiDataList"),o.\u0275\u0275text(10," Difficulty "),o.\u0275\u0275template(11,Ul,2,1,"tui-data-list",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"tui-field-error",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",4)(14,"tui-input-number",15),o.\u0275\u0275text(15," Number of questions "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(16,"tui-field-error",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"div",4)(18,"button",16),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().removeGoalItem(a)}),o.\u0275\u0275text(19," Remove "),o.\u0275\u0275elementEnd()()()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("valueContent",n.categories?o.\u0275\u0275pipeBind3(3,8,n.categories,"pk","full_name"):"")("formControl",n.getFormControl(e,"category")),o.\u0275\u0275advance(4),o.\u0275\u0275property("formControl",n.getFormControl(e,"category")),o.\u0275\u0275advance(2),o.\u0275\u0275property("valueContent",n.difficulties?o.\u0275\u0275pipeBind3(9,12,n.difficulties,0,1):"")("formControl",n.getFormControl(e,"difficulty")),o.\u0275\u0275advance(4),o.\u0275\u0275property("formControl",n.getFormControl(e,"difficulty")),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControl",n.getFormControl(e,"number_of_questions")),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControl",n.getFormControl(e,"number_of_questions"))}}let Gl=(()=>{class t{constructor(e,n,i,a,s,l){this.goalService=e,this.categoryService=n,this.difficultyService=i,this.router=a,this.activatedRoute=s,this.notificationService=l,this.timeOptions=(0,vu.eN)()}ngOnInit(){this.courseId=this.activatedRoute.snapshot.params.courseId,this.goalForm=fs.createGoalForm(),this.categoryService.getCategories().subscribe(e=>this.categories=e),this.difficultyService.getDifficulties().subscribe(e=>this.difficulties=e)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(e,n){return e.get(n)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(fs.createGoalItemForm())}removeGoalItem(e){this.getGoalItems().removeAt(e)}onSubmit(){return function cs(t,r,e,n){return new(e||(e=Promise))(function(a,s){function l(m){try{g(n.next(m))}catch(v){s(v)}}function f(m){try{g(n.throw(m))}catch(v){s(v)}}function g(m){m.done?a(m.value):function i(a){return a instanceof e?a:new e(function(s){s(a)})}(m.value).then(l,f)}g((n=n.apply(t,r||[])).next())})}(this,void 0,void 0,function*(){const e=fs.formatGoalFormData(this.goalForm,this.courseId),n=yield this.goalService.createGoal(e).toPromise();for(const i of this.getGoalItemFormControls()){const a=fs.formatGoalItemFormData(i,n.id);yield this.goalService.createGoalItem(a).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Fl),o.\u0275\u0275directiveInject(Zi.H),o.\u0275\u0275directiveInject(Tf.G),o.\u0275\u0275directiveInject(Q.F0),o.\u0275\u0275directiveInject(Q.gz),o.\u0275\u0275directiveInject(Nt.$F))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-goal-create"]],decls:21,vars:4,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconPlus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0)(1,"form",1),o.\u0275\u0275listener("ngSubmit",function(){return n.onSubmit()}),o.\u0275\u0275elementStart(2,"h2",2),o.\u0275\u0275text(3,"Create New Goal"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"tui-input-date",5),o.\u0275\u0275text(7," End date "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(8,"tui-field-error",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",4)(10,"tui-input-time",7),o.\u0275\u0275text(11," End time "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"tui-field-error",8),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(13,"h3",2),o.\u0275\u0275text(14,"Goal Items"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(15,Up,20,16,"div",9),o.\u0275\u0275elementStart(16,"div",10)(17,"button",11),o.\u0275\u0275listener("click",function(){return n.addGoalItem()}),o.\u0275\u0275text(18," Add Another "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"button",12),o.\u0275\u0275text(20," Submit "),o.\u0275\u0275elementEnd()()()()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroup",n.goalForm),o.\u0275\u0275advance(9),o.\u0275\u0275property("items",n.timeOptions),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",n.getGoalItemFormControls()),o.\u0275\u0275advance(4),o.\u0275\u0275property("disabled",n.goalForm.invalid))},directives:[J.\u0275NgNoValidate,J.NgControlStatusGroup,J.FormGroupDirective,Hl,ds,J.NgControlStatus,J.FormControlName,On.y,fr,M.sg,qi.uJ,qi.OI,J.FormControlDirective,Xn.gX,Xn.qi,Xn.vK,Rr,va,_t.v0],pipes:[Nl.J],styles:[""]}),t})();var Rf=c(35326);function Gp(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n.value(e)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.label(n.activeItemIndexes[e]))}}function Wp(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275text(1),o.\u0275\u0275elementStart(2,"tui-ring-chart",2),o.\u0275\u0275listener("activeItemIndexChange",function(i){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext(2).activeItemIndexes[s]=i}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,Gp,4,2,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275reference(4),i=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2(" ",e," ",i.goal.stats[e].total," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("value",i.values(e))("activeItemIndex",i.activeItemIndexes[e])("content",n)("colorHandler",i.color)}}function $p(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,Wp,5,6,"div",1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.goalItemIds())}}let Nf=(()=>{class t{constructor(e,n){this.goalService=e,this.activatedRoute=n}ngOnInit(){this.goalService.getGoal(this.activatedRoute.snapshot.params.goalId).subscribe(n=>{this.goal=n,this.activeItemIndexes={},Object.keys(n.stats).forEach(i=>this.activeItemIndexes[i]=NaN)})}values(e){return[this.goal.stats[e].correct,this.goal.stats[e].partially_correct,this.goal.stats[e].wrong]}value(e){return isNaN(this.activeItemIndexes[e])?this.goal.stats[e].total:this.values(e)[this.activeItemIndexes[e]]}color(e){return{0:"success",1:"primary",2:"error"}[e]}label(e){return isNaN(e)?"Total":{0:"Correct",1:"Partially Correct",2:"Wrong"}[e]}goalItemIds(){return Object.keys(this.goal.stats).map(e=>parseInt(e))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Fl),o.\u0275\u0275directiveInject(Q.gz))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-goal"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value","activeItemIndex","content","colorHandler","activeItemIndexChange"],["content",""]],template:function(e,n){1&e&&o.\u0275\u0275template(0,$p,2,1,"div",0),2&e&&o.\u0275\u0275property("ngIf",n.goal)},directives:[M.O5,M.sg,Rf.i],styles:[""]}),t})();const Yp=[{path:"",component:ot,canActivate:[G.a]},{path:":courseId",component:xh,canActivate:[G.a]},{path:":courseId/register",component:Ct,canActivate:[G.a]},{path:":courseId/new-event",component:Rl,canActivate:[G.a]},{path:":courseId/new-event/:eventId",component:Rl,canActivate:[G.a]},{path:":courseId/event/:eventId",component:Bc,canActivate:[G.a]},{path:":courseId/problem/:id",component:ls.z,canActivate:[G.a]},{path:":courseId/event/:eventId/problem/:id",component:ls.z,canActivate:[G.a]},{path:":courseId/practice/category/:categoryId",component:vp,canActivate:[G.a]},{path:":courseId/goal",component:xp,canActivate:[G.a]},{path:":courseId/goal/create",component:Gl,canActivate:[G.a]},{path:":courseId/goal/:goalId",component:Nf,canActivate:[G.a]}];let Xp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[Q.Bz.forChild(Yp)],Q.Bz]}),t})();var Kp=c(16995);c(41065),c(35379),c(18583),c(92198);let tg=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[M.ez,Di.E]]}),t})();var ng=c(96560),rg=c(22079),ig=c(70228),og=c(38333),ag=c(66235),sg=c(24736),ug=c(63821),lg=c(68476),cg=c(54554);let fg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[is,fe.N,ks],imports:[[M.ez,ag.J,Xp,J.FormsModule,Kp._l,sg.D,ug.ProblemsModule,J.ReactiveFormsModule,cg.l,Uo.QA,gu.iK,bl.A,Yc.Jm,_t.fN,Rs,xl.s,Xn.pc,mo.zX,Ba.up,ng.S,On.C,Ie.p,pa.jh,pu.$H,Rp,wi,ce.Qf,Bp,Fi,fa.y,ss.j,rg.dS,gr.z,ig.z,Ut.Hi,Rf.R,qi.Jy,lg.T,tg,Di.E,eo.jz,og.qE.forRoot(),zt.$$,vo.d3,he.cn]]}),t})()},71066:(S,j,c)=>{var h,p,w;w="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,h=[c(29610),c(58259),j],void 0!==(p=function(I,P,N){w.Backbone=function(C,w,x,T){var I=C.Backbone,P=Array.prototype.slice;w.VERSION="1.4.1",w.$=T,w.noConflict=function(){return C.Backbone=I,this},w.emulateHTTP=!1,w.emulateJSON=!1;var M,N=w.Events={},F=/\s+/,G=function(O,H,q,pe,Fe){var tt,De=0;if(q&&"object"==typeof q)for((void 0!==pe&&"context"in Fe&&void 0===Fe.context&&(Fe.context=pe),tt=x.keys(q));De<tt.length;De++)H=G(O,H,tt[De],q[tt[De]],Fe);else if(q&&F.test(q))for(tt=q.split(F);De<tt.length;De++)H=O(H,tt[De],pe,Fe);else H=O(H,q,pe,Fe);return H};N.on=function(O,H,q){return this._events=G(Q,this._events||{},O,H,{context:q,ctx:this,listening:M}),M&&((this._listeners||(this._listeners={}))[M.id]=M,M.interop=!1),this},N.listenTo=function(O,H,q){if(!O)return this;var pe=O._listenId||(O._listenId=x.uniqueId("l")),Fe=this._listeningTo||(this._listeningTo={}),De=M=Fe[pe];De||(this._listenId||(this._listenId=x.uniqueId("l")),De=M=Fe[pe]=new J(this,O));var tt=oe(O,H,q,this);if(M=void 0,tt)throw tt;return De.interop&&De.on(H,q),this};var Q=function(O,H,q,pe){if(q){var Fe=O[H]||(O[H]=[]),De=pe.context,tt=pe.ctx,yt=pe.listening;yt&&yt.count++,Fe.push({callback:q,context:De,ctx:De||tt,listening:yt})}return O},oe=function(O,H,q,pe){try{O.on(H,q,pe)}catch(Fe){return Fe}};N.off=function(O,H,q){return this._events?(this._events=G(o,this._events,O,H,{context:q,listeners:this._listeners}),this):this},N.stopListening=function(O,H,q){var pe=this._listeningTo;if(!pe)return this;for(var Fe=O?[O._listenId]:x.keys(pe),De=0;De<Fe.length;De++){var tt=pe[Fe[De]];if(!tt)break;tt.obj.off(H,q,this),tt.interop&&tt.off(H,q)}return x.isEmpty(pe)&&(this._listeningTo=void 0),this};var o=function(O,H,q,pe){if(O){var yt,Fe=pe.context,De=pe.listeners,tt=0;if(!H&&!Fe&&!q){for(yt=x.keys(De);tt<yt.length;tt++)De[yt[tt]].cleanup();return}for(yt=H?[H]:x.keys(O);tt<yt.length;tt++){var xt=O[H=yt[tt]];if(!xt)break;for(var Kt=[],on=0;on<xt.length;on++){var Wt=xt[on];if(q&&q!==Wt.callback&&q!==Wt.callback._callback||Fe&&Fe!==Wt.context)Kt.push(Wt);else{var Hn=Wt.listening;Hn&&Hn.off(H,q)}}Kt.length?O[H]=Kt:delete O[H]}return O}};N.once=function(O,H,q){var pe=G(ne,{},O,H,this.off.bind(this));return"string"==typeof O&&null==q&&(H=void 0),this.on(pe,H,q)},N.listenToOnce=function(O,H,q){var pe=G(ne,{},H,q,this.stopListening.bind(this,O));return this.listenTo(O,pe)};var ne=function(O,H,q,pe){if(q){var Fe=O[H]=x.once(function(){pe(H,Fe),q.apply(this,arguments)});Fe._callback=q}return O};N.trigger=function(O){if(!this._events)return this;for(var H=Math.max(0,arguments.length-1),q=Array(H),pe=0;pe<H;pe++)q[pe]=arguments[pe+1];return G(fe,this._events,O,void 0,q),this};var fe=function(O,H,q,pe){if(O){var Fe=O[H],De=O.all;Fe&&De&&(De=De.slice()),Fe&&ce(Fe,pe),De&&ce(De,[H].concat(pe))}return O},ce=function(O,H){var q,pe=-1,Fe=O.length,De=H[0],tt=H[1],yt=H[2];switch(H.length){case 0:for(;++pe<Fe;)(q=O[pe]).callback.call(q.ctx);return;case 1:for(;++pe<Fe;)(q=O[pe]).callback.call(q.ctx,De);return;case 2:for(;++pe<Fe;)(q=O[pe]).callback.call(q.ctx,De,tt);return;case 3:for(;++pe<Fe;)(q=O[pe]).callback.call(q.ctx,De,tt,yt);return;default:for(;++pe<Fe;)(q=O[pe]).callback.apply(q.ctx,H);return}},J=function(O,H){this.id=O._listenId,this.listener=O,this.obj=H,this.interop=!0,this.count=0,this._events=void 0};J.prototype.on=N.on,J.prototype.off=function(O,H){var q;this.interop?(this._events=G(o,this._events,O,H,{context:void 0,listeners:void 0}),q=!this._events):(this.count--,q=0===this.count),q&&this.cleanup()},J.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},N.bind=N.on,N.unbind=N.off,x.extend(w,N);var he=w.Model=function(O,H){var q=O||{};H||(H={}),this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},H.collection&&(this.collection=H.collection),H.parse&&(q=this.parse(q,H)||{});var pe=x.result(this,"defaults");q=x.defaults(x.extend({},pe,q),pe),this.set(q,H),this.changed={},this.initialize.apply(this,arguments)};x.extend(he.prototype,N,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(O){return x.clone(this.attributes)},sync:function(){return w.sync.apply(this,arguments)},get:function(O){return this.attributes[O]},escape:function(O){return x.escape(this.get(O))},has:function(O){return null!=this.get(O)},matches:function(O){return!!x.iteratee(O,this)(this.attributes)},set:function(O,H,q){if(null==O)return this;var pe;if("object"==typeof O?(pe=O,q=H):(pe={})[O]=H,q||(q={}),!this._validate(pe,q))return!1;var Fe=q.unset,De=q.silent,tt=[],yt=this._changing;this._changing=!0,yt||(this._previousAttributes=x.clone(this.attributes),this.changed={});var xt=this.attributes,Kt=this.changed,on=this._previousAttributes;for(var Wt in pe)x.isEqual(xt[Wt],H=pe[Wt])||tt.push(Wt),x.isEqual(on[Wt],H)?delete Kt[Wt]:Kt[Wt]=H,Fe?delete xt[Wt]:xt[Wt]=H;if(this.idAttribute in pe){var Hn=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Hn,q)}if(!De){tt.length&&(this._pending=q);for(var kn=0;kn<tt.length;kn++)this.trigger("change:"+tt[kn],this,xt[tt[kn]],q)}if(yt)return this;if(!De)for(;this._pending;)q=this._pending,this._pending=!1,this.trigger("change",this,q);return this._pending=!1,this._changing=!1,this},unset:function(O,H){return this.set(O,void 0,x.extend({},H,{unset:!0}))},clear:function(O){var H={};for(var q in this.attributes)H[q]=void 0;return this.set(H,x.extend({},O,{unset:!0}))},hasChanged:function(O){return null==O?!x.isEmpty(this.changed):x.has(this.changed,O)},changedAttributes:function(O){if(!O)return!!this.hasChanged()&&x.clone(this.changed);var pe,H=this._changing?this._previousAttributes:this.attributes,q={};for(var Fe in O){var De=O[Fe];x.isEqual(H[Fe],De)||(q[Fe]=De,pe=!0)}return!!pe&&q},previous:function(O){return null!=O&&this._previousAttributes?this._previousAttributes[O]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(O){O=x.extend({parse:!0},O);var H=this,q=O.success;return O.success=function(pe){var Fe=O.parse?H.parse(pe,O):pe;if(!H.set(Fe,O))return!1;q&&q.call(O.context,H,pe,O),H.trigger("sync",H,pe,O)},Dt(this,O),this.sync("read",this,O)},save:function(O,H,q){var pe;null==O||"object"==typeof O?(pe=O,q=H):(pe={})[O]=H;var Fe=(q=x.extend({validate:!0,parse:!0},q)).wait;if(pe&&!Fe){if(!this.set(pe,q))return!1}else if(!this._validate(pe,q))return!1;var De=this,tt=q.success,yt=this.attributes;q.success=function(on){De.attributes=yt;var Wt=q.parse?De.parse(on,q):on;if(Fe&&(Wt=x.extend({},pe,Wt)),Wt&&!De.set(Wt,q))return!1;tt&&tt.call(q.context,De,on,q),De.trigger("sync",De,on,q)},Dt(this,q),pe&&Fe&&(this.attributes=x.extend({},yt,pe));var xt=this.isNew()?"create":q.patch?"patch":"update";"patch"===xt&&!q.attrs&&(q.attrs=pe);var Kt=this.sync(xt,this,q);return this.attributes=yt,Kt},destroy:function(O){O=O?x.clone(O):{};var H=this,q=O.success,pe=O.wait,Fe=function(){H.stopListening(),H.trigger("destroy",H,H.collection,O)};O.success=function(tt){pe&&Fe(),q&&q.call(O.context,H,tt,O),H.isNew()||H.trigger("sync",H,tt,O)};var De=!1;return this.isNew()?x.defer(O.success):(Dt(this,O),De=this.sync("delete",this,O)),pe||Fe(),De},url:function(){var O=x.result(this,"urlRoot")||x.result(this.collection,"url")||Gt();if(this.isNew())return O;var H=this.get(this.idAttribute);return O.replace(/[^\/]$/,"$&/")+encodeURIComponent(H)},parse:function(O,H){return O},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(O){return this._validate({},x.extend({},O,{validate:!0}))},_validate:function(O,H){if(!H.validate||!this.validate)return!0;O=x.extend({},this.attributes,O);var q=this.validationError=this.validate(O,H)||null;return!q||(this.trigger("invalid",this,q,x.extend(H,{validationError:q})),!1)}});var Ce=w.Collection=function(O,H){H||(H={}),this.preinitialize.apply(this,arguments),H.model&&(this.model=H.model),void 0!==H.comparator&&(this.comparator=H.comparator),this._reset(),this.initialize.apply(this,arguments),O&&this.reset(O,x.extend({silent:!0},H))},Ie={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},ke=function(O,H,q){q=Math.min(Math.max(q,0),O.length);var De,pe=Array(O.length-q),Fe=H.length;for(De=0;De<pe.length;De++)pe[De]=O[De+q];for(De=0;De<Fe;De++)O[De+q]=H[De];for(De=0;De<pe.length;De++)O[De+Fe+q]=pe[De]};x.extend(Ce.prototype,N,{model:he,preinitialize:function(){},initialize:function(){},toJSON:function(O){return this.map(function(H){return H.toJSON(O)})},sync:function(){return w.sync.apply(this,arguments)},add:function(O,H){return this.set(O,x.extend({merge:!1},H,b))},remove:function(O,H){H=x.extend({},H);var q=!x.isArray(O);O=q?[O]:O.slice();var pe=this._removeModels(O,H);return!H.silent&&pe.length&&(H.changes={added:[],merged:[],removed:pe},this.trigger("update",this,H)),q?pe[0]:pe},set:function(O,H){if(null!=O){(H=x.extend({},Ie,H)).parse&&!this._isModel(O)&&(O=this.parse(O,H)||[]);var q=!x.isArray(O);O=q?[O]:O.slice();var pe=H.at;null!=pe&&(pe=+pe),pe>this.length&&(pe=this.length),pe<0&&(pe+=this.length+1);var xn,ht,Fe=[],De=[],tt=[],yt=[],xt={},Kt=H.add,on=H.merge,Wt=H.remove,Hn=!1,kn=this.comparator&&null==pe&&!1!==H.sort,Dr=x.isString(this.comparator)?this.comparator:null;for(ht=0;ht<O.length;ht++){var Tn=this.get(xn=O[ht]);if(Tn){if(on&&xn!==Tn){var Dn=this._isModel(xn)?xn.attributes:xn;H.parse&&(Dn=Tn.parse(Dn,H)),Tn.set(Dn,H),tt.push(Tn),kn&&!Hn&&(Hn=Tn.hasChanged(Dr))}xt[Tn.cid]||(xt[Tn.cid]=!0,Fe.push(Tn)),O[ht]=Tn}else Kt&&(xn=O[ht]=this._prepareModel(xn,H))&&(De.push(xn),this._addReference(xn,H),xt[xn.cid]=!0,Fe.push(xn))}if(Wt){for(ht=0;ht<this.length;ht++)xt[(xn=this.models[ht]).cid]||yt.push(xn);yt.length&&this._removeModels(yt,H)}var rr=!1;if(Fe.length&&!kn&&Kt&&Wt?(rr=this.length!==Fe.length||x.some(this.models,function(Jn,$n){return Jn!==Fe[$n]}),this.models.length=0,ke(this.models,Fe,0),this.length=this.models.length):De.length&&(kn&&(Hn=!0),ke(this.models,De,null==pe?this.length:pe),this.length=this.models.length),Hn&&this.sort({silent:!0}),!H.silent){for(ht=0;ht<De.length;ht++)null!=pe&&(H.index=pe+ht),(xn=De[ht]).trigger("add",xn,this,H);(Hn||rr)&&this.trigger("sort",this,H),(De.length||yt.length||tt.length)&&(H.changes={added:De,removed:yt,merged:tt},this.trigger("update",this,H))}return q?O[0]:O}},reset:function(O,H){H=H?x.clone(H):{};for(var q=0;q<this.models.length;q++)this._removeReference(this.models[q],H);return H.previousModels=this.models,this._reset(),O=this.add(O,x.extend({silent:!0},H)),H.silent||this.trigger("reset",this,H),O},push:function(O,H){return this.add(O,x.extend({at:this.length},H))},pop:function(O){var H=this.at(this.length-1);return this.remove(H,O)},unshift:function(O,H){return this.add(O,x.extend({at:0},H))},shift:function(O){var H=this.at(0);return this.remove(H,O)},slice:function(){return P.apply(this.models,arguments)},get:function(O){if(null!=O)return this._byId[O]||this._byId[this.modelId(this._isModel(O)?O.attributes:O,O.idAttribute)]||O.cid&&this._byId[O.cid]},has:function(O){return null!=this.get(O)},at:function(O){return O<0&&(O+=this.length),this.models[O]},where:function(O,H){return this[H?"find":"filter"](O)},findWhere:function(O){return this.where(O,!0)},sort:function(O){var H=this.comparator;if(!H)throw new Error("Cannot sort a set without a comparator");O||(O={});var q=H.length;return x.isFunction(H)&&(H=H.bind(this)),1===q||x.isString(H)?this.models=this.sortBy(H):this.models.sort(H),O.silent||this.trigger("sort",this,O),this},pluck:function(O){return this.map(O+"")},fetch:function(O){var H=(O=x.extend({parse:!0},O)).success,q=this;return O.success=function(pe){q[O.reset?"reset":"set"](pe,O),H&&H.call(O.context,q,pe,O),q.trigger("sync",q,pe,O)},Dt(this,O),this.sync("read",this,O)},create:function(O,H){var q=(H=H?x.clone(H):{}).wait;if(!(O=this._prepareModel(O,H)))return!1;q||this.add(O,H);var pe=this,Fe=H.success;return H.success=function(De,tt,yt){q&&pe.add(De,yt),Fe&&Fe.call(yt.context,De,tt,yt)},O.save(null,H),O},parse:function(O,H){return O},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(O,H){return O[H||this.model.prototype.idAttribute||"id"]},values:function(){return new Ue(this,Xe)},keys:function(){return new Ue(this,Je)},entries:function(){return new Ue(this,ot)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(O,H){return this._isModel(O)?(O.collection||(O.collection=this),O):((H=H?x.clone(H):{}).collection=this,(q=this.model.prototype?new this.model(O,H):this.model(O,H)).validationError?(this.trigger("invalid",this,q.validationError,H),!1):q);var q},_removeModels:function(O,H){for(var q=[],pe=0;pe<O.length;pe++){var Fe=this.get(O[pe]);if(Fe){var De=this.indexOf(Fe);this.models.splice(De,1),this.length--,delete this._byId[Fe.cid];var tt=this.modelId(Fe.attributes,Fe.idAttribute);null!=tt&&delete this._byId[tt],H.silent||(H.index=De,Fe.trigger("remove",Fe,this,H)),q.push(Fe),this._removeReference(Fe,H)}}return q},_isModel:function(O){return O instanceof he},_addReference:function(O,H){this._byId[O.cid]=O;var q=this.modelId(O.attributes,O.idAttribute);null!=q&&(this._byId[q]=O),O.on("all",this._onModelEvent,this)},_removeReference:function(O,H){delete this._byId[O.cid];var q=this.modelId(O.attributes,O.idAttribute);null!=q&&delete this._byId[q],this===O.collection&&delete O.collection,O.off("all",this._onModelEvent,this)},_onModelEvent:function(O,H,q,pe){if(H){if(("add"===O||"remove"===O)&&q!==this)return;if("destroy"===O&&this.remove(H,pe),"changeId"===O){var Fe=this.modelId(H.previousAttributes(),H.idAttribute),De=this.modelId(H.attributes,H.idAttribute);null!=Fe&&delete this._byId[Fe],null!=De&&(this._byId[De]=H)}}this.trigger.apply(this,arguments)}});var Ge="function"==typeof Symbol&&Symbol.iterator;Ge&&(Ce.prototype[Ge]=Ce.prototype.values);var Ue=function(O,H){this._collection=O,this._kind=H,this._index=0},Xe=1,Je=2,ot=3;Ge&&(Ue.prototype[Ge]=function(){return this}),Ue.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var H,O=this._collection.at(this._index);if(this._index++,this._kind===Xe)H=O;else{var q=this._collection.modelId(O.attributes,O.idAttribute);H=this._kind===Je?q:[q,O]}return{value:H,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var vt=w.View=function(O){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(O,Ut)),this._ensureElement(),this.initialize.apply(this,arguments)},Nt=/^(\S+)\s*(.*)$/,Ut=["model","collection","el","id","attributes","className","tagName","events"];x.extend(vt.prototype,N,{tagName:"div",$:function(O){return this.$el.find(O)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(O){return this.undelegateEvents(),this._setElement(O),this.delegateEvents(),this},_setElement:function(O){this.$el=O instanceof w.$?O:w.$(O),this.el=this.$el[0]},delegateEvents:function(O){if(O||(O=x.result(this,"events")),!O)return this;for(var H in this.undelegateEvents(),O){var q=O[H];if(x.isFunction(q)||(q=this[q]),q){var pe=H.match(Nt);this.delegate(pe[1],pe[2],q.bind(this))}}return this},delegate:function(O,H,q){return this.$el.on(O+".delegateEvents"+this.cid,H,q),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(O,H,q){return this.$el.off(O+".delegateEvents"+this.cid,H,q),this},_createElement:function(O){return document.createElement(O)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var O=x.extend({},x.result(this,"attributes"));this.id&&(O.id=x.result(this,"id")),this.className&&(O.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(O)}},_setAttributes:function(O){this.$el.attr(O)}});var On=function(O,H,q,pe){x.each(q,function(Fe,De){H[De]&&(O.prototype[De]=function(O,H,q,pe){switch(H){case 1:return function(){return O[q](this[pe])};case 2:return function(Fe){return O[q](this[pe],Fe)};case 3:return function(Fe,De){return O[q](this[pe],gr(Fe,this),De)};case 4:return function(Fe,De,tt){return O[q](this[pe],gr(Fe,this),De,tt)};default:return function(){var Fe=P.call(arguments);return Fe.unshift(this[pe]),O[q].apply(O,Fe)}}}(H,Fe,De,pe))})},gr=function(O,H){return x.isFunction(O)?O:x.isObject(O)&&!H._isModel(O)?Nr(O):x.isString(O)?function(q){return q.get(O)}:O},Nr=function(O){var H=x.matches(O);return function(q){return H(q.attributes)}};x.each([[Ce,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[he,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(O){var H=O[0],q=O[1],pe=O[2];H.mixin=function(Fe){var De=x.reduce(x.functions(Fe),function(tt,yt){return tt[yt]=0,tt},{});On(H,Fe,De,pe)},On(H,x,q,pe)}),w.sync=function(O,H,q){var pe=vr[O];x.defaults(q||(q={}),{emulateHTTP:w.emulateHTTP,emulateJSON:w.emulateJSON});var Fe={type:pe,dataType:"json"};if(q.url||(Fe.url=x.result(H,"url")||Gt()),null==q.data&&H&&("create"===O||"update"===O||"patch"===O)&&(Fe.contentType="application/json",Fe.data=JSON.stringify(q.attrs||H.toJSON(q))),q.emulateJSON&&(Fe.contentType="application/x-www-form-urlencoded",Fe.data=Fe.data?{model:Fe.data}:{}),q.emulateHTTP&&("PUT"===pe||"DELETE"===pe||"PATCH"===pe)){Fe.type="POST",q.emulateJSON&&(Fe.data._method=pe);var De=q.beforeSend;q.beforeSend=function(xt){if(xt.setRequestHeader("X-HTTP-Method-Override",pe),De)return De.apply(this,arguments)}}"GET"!==Fe.type&&!q.emulateJSON&&(Fe.processData=!1);var tt=q.error;q.error=function(xt,Kt,on){q.textStatus=Kt,q.errorThrown=on,tt&&tt.call(q.context,xt,Kt,on)};var yt=q.xhr=w.ajax(x.extend(Fe,q));return H.trigger("request",H,yt,q),yt};var vr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};w.ajax=function(){return w.$.ajax.apply(w.$,arguments)};var Nn=w.Router=function(O){O||(O={}),this.preinitialize.apply(this,arguments),O.routes&&(this.routes=O.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Re=/\((.*?)\)/g,ze=/(\(\?)?:\w+/g,Ke=/\*\w+/g,st=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(Nn.prototype,N,{preinitialize:function(){},initialize:function(){},route:function(O,H,q){x.isRegExp(O)||(O=this._routeToRegExp(O)),x.isFunction(H)&&(q=H,H=""),q||(q=this[H]);var pe=this;return w.history.route(O,function(Fe){var De=pe._extractParameters(O,Fe);!1!==pe.execute(q,De,H)&&(pe.trigger.apply(pe,["route:"+H].concat(De)),pe.trigger("route",H,De),w.history.trigger("route",pe,H,De))}),this},execute:function(O,H,q){O&&O.apply(this,H)},navigate:function(O,H){return w.history.navigate(O,H),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var O,H=x.keys(this.routes);null!=(O=H.pop());)this.route(O,this.routes[O])}},_routeToRegExp:function(O){return O=O.replace(st,"\\$&").replace(Re,"(?:$1)?").replace(ze,function(H,q){return q?H:"([^/?]+)"}).replace(Ke,"([^?]*?)"),new RegExp("^"+O+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(O,H){var q=O.exec(H).slice(1);return x.map(q,function(pe,Fe){return Fe===q.length-1?pe||null:pe?decodeURIComponent(pe):null})}});var Ct=w.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},zt=/^[#\/]|\s+$/g,mt=/^\/+|\/+$/g,Bn=/#.*$/;Ct.started=!1,x.extend(Ct.prototype,N,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(O){return decodeURI(O.replace(/%25/g,"%2525"))},getSearch:function(){var O=this.location.href.replace(/#.*/,"").match(/\?.+/);return O?O[0]:""},getHash:function(O){var H=(O||this).location.href.match(/#(.*)$/);return H?H[1]:""},getPath:function(){var O=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===O.charAt(0)?O.slice(1):O},getFragment:function(O){return null==O&&(O=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),O.replace(zt,"")},start:function(O){if(Ct.started)throw new Error("Backbone.history has already been started");if(Ct.started=!0,this.options=x.extend({root:"/"},this.options,O),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(mt,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var H=this.root.slice(0,-1)||"/";return this.location.replace(H+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var q=document.body,pe=q.insertBefore(this.iframe,q.firstChild).contentWindow;pe.document.open(),pe.document.close(),pe.location.hash="#"+this.fragment}var Fe=window.addEventListener||function(De,tt){return attachEvent("on"+De,tt)};if(this._usePushState?Fe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Fe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var O=window.removeEventListener||function(H,q){return detachEvent("on"+H,q)};this._usePushState?O("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&O("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ct.started=!1},route:function(O,H){this.handlers.unshift({route:O,callback:H})},checkUrl:function(O){var H=this.getFragment();if(H===this.fragment&&this.iframe&&(H=this.getHash(this.iframe.contentWindow)),H===this.fragment)return!1;this.iframe&&this.navigate(H),this.loadUrl()},loadUrl:function(O){return!!this.matchRoot()&&(O=this.fragment=this.getFragment(O),x.some(this.handlers,function(H){if(H.route.test(O))return H.callback(O),!0}))},navigate:function(O,H){if(!Ct.started)return!1;(!H||!0===H)&&(H={trigger:!!H}),O=this.getFragment(O||"");var q=this.root;(""===O||"?"===O.charAt(0))&&(q=q.slice(0,-1)||"/");var pe=q+O;O=O.replace(Bn,"");var Fe=this.decodeFragment(O);if(this.fragment!==Fe){if(this.fragment=Fe,this._usePushState)this.history[H.replace?"replaceState":"pushState"]({},document.title,pe);else{if(!this._wantsHashChange)return this.location.assign(pe);if(this._updateHash(this.location,O,H.replace),this.iframe&&O!==this.getHash(this.iframe.contentWindow)){var De=this.iframe.contentWindow;H.replace||(De.document.open(),De.document.close()),this._updateHash(De.location,O,H.replace)}}if(H.trigger)return this.loadUrl(O)}},_updateHash:function(O,H,q){if(q){var pe=O.href.replace(/(javascript:|#).*$/,"");O.replace(pe+"#"+H)}else O.hash="#"+H}}),w.history=new Ct;he.extend=Ce.extend=Nn.extend=vt.extend=Ct.extend=function(O,H){var pe,q=this;return pe=O&&x.has(O,"constructor")?O.constructor:function(){return q.apply(this,arguments)},x.extend(pe,q,H),pe.prototype=x.create(q.prototype,O),pe.prototype.constructor=pe,pe.__super__=q.prototype,pe};var Gt=function(){throw new Error('A "url" property or function must be specified')},Dt=function(O,H){var q=H.error;H.error=function(pe){q&&q.call(H.context,O,pe,H),O.trigger("error",O,pe,H)}};return w}(w,N,I,P)}.apply(j,h))&&(S.exports=p)},59695:(S,j,c)=>{S.exports={graphlib:c(36456),layout:c(14850),debug:c(71914),util:{time:c(11510).time,notime:c(11510).notime},version:c(28126)}},12234:(S,j,c)=>{"use strict";var h=c(45760),p=c(67365);S.exports={run:function C(T){var I="greedy"===T.graph().acyclicer?p(T,function P(N){return function(F){return N.edge(F).weight}}(T)):function w(T){var I=[],P={},N={};return h.forEach(T.nodes(),function F(M){h.has(N,M)||(N[M]=!0,P[M]=!0,h.forEach(T.outEdges(M),function(G){h.has(P,G.w)?I.push(G):F(G.w)}),delete P[M])}),I}(T);h.forEach(I,function(N){var F=T.edge(N);T.removeEdge(N),F.forwardName=N.name,F.reversed=!0,T.setEdge(N.w,N.v,F,h.uniqueId("rev"))})},undo:function x(T){h.forEach(T.edges(),function(I){var P=T.edge(I);if(P.reversed){T.removeEdge(I);var N=P.forwardName;delete P.reversed,delete P.forwardName,T.setEdge(I.w,I.v,P,N)}})}}},79999:(S,j,c)=>{var h=c(45760),p=c(11510);function w(x,T,I,P,N,F){var G=N[T][F-1],Q=p.addDummyNode(x,"border",{width:0,height:0,rank:F,borderType:T},I);N[T][F]=Q,x.setParent(Q,P),G&&x.setEdge(G,Q,{weight:1})}S.exports=function C(x){h.forEach(x.children(),function T(I){var P=x.children(I),N=x.node(I);if(P.length&&h.forEach(P,T),h.has(N,"minRank")){N.borderLeft=[],N.borderRight=[];for(var F=N.minRank,M=N.maxRank+1;F<M;++F)w(x,"borderLeft","_bl",I,N,F),w(x,"borderRight","_br",I,N,F)}})}},83870:(S,j,c)=>{"use strict";var h=c(45760);function w(F){h.forEach(F.nodes(),function(M){x(F.node(M))}),h.forEach(F.edges(),function(M){x(F.edge(M))})}function x(F){var M=F.width;F.width=F.height,F.height=M}function I(F){F.y=-F.y}function N(F){var M=F.x;F.x=F.y,F.y=M}S.exports={adjust:function p(F){var M=F.graph().rankdir.toLowerCase();("lr"===M||"rl"===M)&&w(F)},undo:function C(F){var M=F.graph().rankdir.toLowerCase();("bt"===M||"rl"===M)&&function T(F){h.forEach(F.nodes(),function(M){I(F.node(M))}),h.forEach(F.edges(),function(M){var G=F.edge(M);h.forEach(G.points,I),h.has(G,"y")&&I(G)})}(F),("lr"===M||"rl"===M)&&(function P(F){h.forEach(F.nodes(),function(M){N(F.node(M))}),h.forEach(F.edges(),function(M){var G=F.edge(M);h.forEach(G.points,N),h.has(G,"x")&&N(G)})}(F),w(F))}}},3226:S=>{function j(){var p={};p._next=p._prev=p,this._sentinel=p}function c(p){p._prev._next=p._next,p._next._prev=p._prev,delete p._next,delete p._prev}function h(p,C){if("_next"!==p&&"_prev"!==p)return C}S.exports=j,j.prototype.dequeue=function(){var p=this._sentinel,C=p._prev;if(C!==p)return c(C),C},j.prototype.enqueue=function(p){var C=this._sentinel;p._prev&&p._next&&c(p),p._next=C._next,C._next._prev=p,C._next=p,p._prev=C},j.prototype.toString=function(){for(var p=[],C=this._sentinel,w=C._prev;w!==C;)p.push(JSON.stringify(w,h)),w=w._prev;return"["+p.join(", ")+"]"}},71914:(S,j,c)=>{var h=c(45760),p=c(11510),C=c(36456).Graph;S.exports={debugOrdering:function w(x){var T=p.buildLayerMatrix(x),I=new C({compound:!0,multigraph:!0}).setGraph({});return h.forEach(x.nodes(),function(P){I.setNode(P,{label:P}),I.setParent(P,"layer"+x.node(P).rank)}),h.forEach(x.edges(),function(P){I.setEdge(P.v,P.w,{},P.name)}),h.forEach(T,function(P,N){I.setNode("layer"+N,{rank:"same"}),h.reduce(P,function(M,G){return I.setEdge(M,G,{style:"invis"}),G})}),I}}},36456:(S,j,c)=>{var h;try{h=c(85510)}catch(p){}h||(h=window.graphlib),S.exports=h},67365:(S,j,c)=>{var h=c(45760),p=c(36456).Graph,C=c(3226);S.exports=function x(F,M){if(F.nodeCount()<=1)return[];var G=function P(F,M){var G=new p,Q=0,oe=0;h.forEach(F.nodes(),function(fe){G.setNode(fe,{v:fe,in:0,out:0})}),h.forEach(F.edges(),function(fe){var ce=G.edge(fe.v,fe.w)||0,J=M(fe);G.setEdge(fe.v,fe.w,ce+J),oe=Math.max(oe,G.node(fe.v).out+=J),Q=Math.max(Q,G.node(fe.w).in+=J)});var o=h.range(oe+Q+3).map(function(){return new C}),ne=Q+1;return h.forEach(G.nodes(),function(fe){N(o,ne,G.node(fe))}),{graph:G,buckets:o,zeroIdx:ne}}(F,M||w),Q=function T(F,M,G){for(var ne,Q=[],oe=M[M.length-1],o=M[0];F.nodeCount();){for(;ne=o.dequeue();)I(F,M,G,ne);for(;ne=oe.dequeue();)I(F,M,G,ne);if(F.nodeCount())for(var fe=M.length-2;fe>0;--fe)if(ne=M[fe].dequeue()){Q=Q.concat(I(F,M,G,ne,!0));break}}return Q}(G.graph,G.buckets,G.zeroIdx);return h.flatten(h.map(Q,function(oe){return F.outEdges(oe.v,oe.w)}),!0)};var w=h.constant(1);function I(F,M,G,Q,oe){var o=oe?[]:void 0;return h.forEach(F.inEdges(Q.v),function(ne){var fe=F.edge(ne),ce=F.node(ne.v);oe&&o.push({v:ne.v,w:ne.w}),ce.out-=fe,N(M,G,ce)}),h.forEach(F.outEdges(Q.v),function(ne){var fe=F.edge(ne),J=F.node(ne.w);J.in-=fe,N(M,G,J)}),F.removeNode(Q.v),o}function N(F,M,G){G.out?G.in?F[G.out-G.in+M].enqueue(G):F[F.length-1].enqueue(G):F[0].enqueue(G)}},14850:(S,j,c)=>{"use strict";var h=c(45760),p=c(12234),C=c(91496),w=c(94124),x=c(11510).normalizeRanks,T=c(60162),I=c(11510).removeEmptyRanks,P=c(1230),N=c(79999),F=c(83870),M=c(32974),G=c(78226),Q=c(11510),oe=c(36456).Graph;S.exports=function o(Re,ze){var Ke=ze&&ze.debugTiming?Q.time:Q.notime;Ke("layout",function(){var st=Ke("  buildLayoutGraph",function(){return function Ue(Re){var ze=new oe({multigraph:!0,compound:!0}),Ke=Nn(Re.graph());return ze.setGraph(h.merge({},J,vr(Ke,ce),h.pick(Ke,he))),h.forEach(Re.nodes(),function(st){var Ct=Nn(Re.node(st));ze.setNode(st,h.defaults(vr(Ct,Ce),Ie)),ze.setParent(st,Re.parent(st))}),h.forEach(Re.edges(),function(st){var Ct=Nn(Re.edge(st));ze.setEdge(st,h.merge({},ke,vr(Ct,b),h.pick(Ct,Ge)))}),ze}(Re)});Ke("  runLayout",function(){!function ne(Re,ze){ze("    makeSpaceForEdgeLabels",function(){!function Xe(Re){var ze=Re.graph();ze.ranksep/=2,h.forEach(Re.edges(),function(Ke){var st=Re.edge(Ke);st.minlen*=2,"c"!==st.labelpos.toLowerCase()&&("TB"===ze.rankdir||"BT"===ze.rankdir?st.width+=st.labeloffset:st.height+=st.labeloffset)})}(Re)}),ze("    removeSelfEdges",function(){!function Nr(Re){h.forEach(Re.edges(),function(ze){if(ze.v===ze.w){var Ke=Re.node(ze.v);Ke.selfEdges||(Ke.selfEdges=[]),Ke.selfEdges.push({e:ze,label:Re.edge(ze)}),Re.removeEdge(ze)}})}(Re)}),ze("    acyclic",function(){p.run(Re)}),ze("    nestingGraph.run",function(){P.run(Re)}),ze("    rank",function(){w(Q.asNonCompoundGraph(Re))}),ze("    injectEdgeLabelProxies",function(){!function Je(Re){h.forEach(Re.edges(),function(ze){var Ke=Re.edge(ze);if(Ke.width&&Ke.height){var st=Re.node(ze.v),Ct=Re.node(ze.w);Q.addDummyNode(Re,"edge-proxy",{rank:(Ct.rank-st.rank)/2+st.rank,e:ze},"_ep")}})}(Re)}),ze("    removeEmptyRanks",function(){I(Re)}),ze("    nestingGraph.cleanup",function(){P.cleanup(Re)}),ze("    normalizeRanks",function(){x(Re)}),ze("    assignRankMinMax",function(){!function ot(Re){var ze=0;h.forEach(Re.nodes(),function(Ke){var st=Re.node(Ke);st.borderTop&&(st.minRank=Re.node(st.borderTop).rank,st.maxRank=Re.node(st.borderBottom).rank,ze=h.max(ze,st.maxRank))}),Re.graph().maxRank=ze}(Re)}),ze("    removeEdgeLabelProxies",function(){!function vt(Re){h.forEach(Re.nodes(),function(ze){var Ke=Re.node(ze);"edge-proxy"===Ke.dummy&&(Re.edge(Ke.e).labelRank=Ke.rank,Re.removeNode(ze))})}(Re)}),ze("    normalize.run",function(){C.run(Re)}),ze("    parentDummyChains",function(){T(Re)}),ze("    addBorderSegments",function(){N(Re)}),ze("    order",function(){M(Re)}),ze("    insertSelfEdges",function(){!function nr(Re){var ze=Q.buildLayerMatrix(Re);h.forEach(ze,function(Ke){var st=0;h.forEach(Ke,function(Ct,zt){var mt=Re.node(Ct);mt.order=zt+st,h.forEach(mt.selfEdges,function(Bn){Q.addDummyNode(Re,"selfedge",{width:Bn.label.width,height:Bn.label.height,rank:mt.rank,order:zt+ ++st,e:Bn.e,label:Bn.label},"_se")}),delete mt.selfEdges})})}(Re)}),ze("    adjustCoordinateSystem",function(){F.adjust(Re)}),ze("    position",function(){G(Re)}),ze("    positionSelfEdges",function(){!function Wn(Re){h.forEach(Re.nodes(),function(ze){var Ke=Re.node(ze);if("selfedge"===Ke.dummy){var st=Re.node(Ke.e.v),Ct=st.x+st.width/2,zt=st.y,mt=Ke.x-Ct,Bn=st.height/2;Re.setEdge(Ke.e,Ke.label),Re.removeNode(ze),Ke.label.points=[{x:Ct+2*mt/3,y:zt-Bn},{x:Ct+5*mt/6,y:zt-Bn},{x:Ct+mt,y:zt},{x:Ct+5*mt/6,y:zt+Bn},{x:Ct+2*mt/3,y:zt+Bn}],Ke.label.x=Ke.x,Ke.label.y=Ke.y}})}(Re)}),ze("    removeBorderNodes",function(){!function gr(Re){h.forEach(Re.nodes(),function(ze){if(Re.children(ze).length){var Ke=Re.node(ze),st=Re.node(Ke.borderTop),Ct=Re.node(Ke.borderBottom),zt=Re.node(h.last(Ke.borderLeft)),mt=Re.node(h.last(Ke.borderRight));Ke.width=Math.abs(mt.x-zt.x),Ke.height=Math.abs(Ct.y-st.y),Ke.x=zt.x+Ke.width/2,Ke.y=st.y+Ke.height/2}}),h.forEach(Re.nodes(),function(ze){"border"===Re.node(ze).dummy&&Re.removeNode(ze)})}(Re)}),ze("    normalize.undo",function(){C.undo(Re)}),ze("    fixupEdgeLabelCoords",function(){!function _t(Re){h.forEach(Re.edges(),function(ze){var Ke=Re.edge(ze);if(h.has(Ke,"x"))switch(("l"===Ke.labelpos||"r"===Ke.labelpos)&&(Ke.width-=Ke.labeloffset),Ke.labelpos){case"l":Ke.x-=Ke.width/2+Ke.labeloffset;break;case"r":Ke.x+=Ke.width/2+Ke.labeloffset}})}(Re)}),ze("    undoCoordinateSystem",function(){F.undo(Re)}),ze("    translateGraph",function(){!function Nt(Re){var ze=Number.POSITIVE_INFINITY,Ke=0,st=Number.POSITIVE_INFINITY,Ct=0,zt=Re.graph(),mt=zt.marginx||0,Bn=zt.marginy||0;function fi(Gt){var Dt=Gt.x,O=Gt.y,H=Gt.width,q=Gt.height;ze=Math.min(ze,Dt-H/2),Ke=Math.max(Ke,Dt+H/2),st=Math.min(st,O-q/2),Ct=Math.max(Ct,O+q/2)}h.forEach(Re.nodes(),function(Gt){fi(Re.node(Gt))}),h.forEach(Re.edges(),function(Gt){var Dt=Re.edge(Gt);h.has(Dt,"x")&&fi(Dt)}),ze-=mt,st-=Bn,h.forEach(Re.nodes(),function(Gt){var Dt=Re.node(Gt);Dt.x-=ze,Dt.y-=st}),h.forEach(Re.edges(),function(Gt){var Dt=Re.edge(Gt);h.forEach(Dt.points,function(O){O.x-=ze,O.y-=st}),h.has(Dt,"x")&&(Dt.x-=ze),h.has(Dt,"y")&&(Dt.y-=st)}),zt.width=Ke-ze+mt,zt.height=Ct-st+Bn}(Re)}),ze("    assignNodeIntersects",function(){!function Ut(Re){h.forEach(Re.edges(),function(ze){var zt,mt,Ke=Re.edge(ze),st=Re.node(ze.v),Ct=Re.node(ze.w);Ke.points?(zt=Ke.points[0],mt=Ke.points[Ke.points.length-1]):(Ke.points=[],zt=Ct,mt=st),Ke.points.unshift(Q.intersectRect(st,zt)),Ke.points.push(Q.intersectRect(Ct,mt))})}(Re)}),ze("    reversePoints",function(){!function On(Re){h.forEach(Re.edges(),function(ze){var Ke=Re.edge(ze);Ke.reversed&&Ke.points.reverse()})}(Re)}),ze("    acyclic.undo",function(){p.undo(Re)})}(st,Ke)}),Ke("  updateInputGraph",function(){!function fe(Re,ze){h.forEach(Re.nodes(),function(Ke){var st=Re.node(Ke),Ct=ze.node(Ke);st&&(st.x=Ct.x,st.y=Ct.y,ze.children(Ke).length&&(st.width=Ct.width,st.height=Ct.height))}),h.forEach(Re.edges(),function(Ke){var st=Re.edge(Ke),Ct=ze.edge(Ke);st.points=Ct.points,h.has(Ct,"x")&&(st.x=Ct.x,st.y=Ct.y)}),Re.graph().width=ze.graph().width,Re.graph().height=ze.graph().height}(Re,st)})})};var ce=["nodesep","edgesep","ranksep","marginx","marginy"],J={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},he=["acyclicer","ranker","rankdir","align"],Ce=["width","height"],Ie={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],ke={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ge=["labelpos"];function vr(Re,ze){return h.mapValues(h.pick(Re,ze),Number)}function Nn(Re){var ze={};return h.forEach(Re,function(Ke,st){ze[st.toLowerCase()]=Ke}),ze}},45760:(S,j,c)=>{var h;try{h={cloneDeep:c(90733),constant:c(76684),defaults:c(28800),each:c(35474),filter:c(35281),find:c(62516),flatten:c(22274),forEach:c(89851),forIn:c(41176),has:c(54842),isUndefined:c(34235),last:c(25809),map:c(19984),mapValues:c(10203),max:c(18176),merge:c(80567),min:c(29439),minBy:c(29525),now:c(31710),pick:c(16372),range:c(90361),reduce:c(81337),sortBy:c(12906),uniqueId:c(51541),values:c(90377),zipObject:c(21617)}}catch(p){}h||(h=window._),S.exports=h},1230:(S,j,c)=>{var h=c(45760),p=c(11510);function w(P,N,F,M,G,Q,oe){var o=P.children(oe);if(o.length){var ne=p.addBorderNode(P,"_bt"),fe=p.addBorderNode(P,"_bb"),ce=P.node(oe);P.setParent(ne,oe),ce.borderTop=ne,P.setParent(fe,oe),ce.borderBottom=fe,h.forEach(o,function(J){w(P,N,F,M,G,Q,J);var he=P.node(J),Ce=he.borderTop?he.borderTop:J,Ie=he.borderBottom?he.borderBottom:J,b=he.borderTop?M:2*M,ke=Ce!==Ie?1:G-Q[oe]+1;P.setEdge(ne,Ce,{weight:b,minlen:ke,nestingEdge:!0}),P.setEdge(Ie,fe,{weight:b,minlen:ke,nestingEdge:!0})}),P.parent(oe)||P.setEdge(N,ne,{weight:0,minlen:G+Q[oe]})}else oe!==N&&P.setEdge(N,oe,{weight:0,minlen:F})}S.exports={run:function C(P){var N=p.addDummyNode(P,"root",{},"_root"),F=function x(P){var N={};function F(M,G){var Q=P.children(M);Q&&Q.length&&h.forEach(Q,function(oe){F(oe,G+1)}),N[M]=G}return h.forEach(P.children(),function(M){F(M,1)}),N}(P),M=h.max(h.values(F))-1,G=2*M+1;P.graph().nestingRoot=N,h.forEach(P.edges(),function(oe){P.edge(oe).minlen*=G});var Q=function T(P){return h.reduce(P.edges(),function(N,F){return N+P.edge(F).weight},0)}(P)+1;h.forEach(P.children(),function(oe){w(P,N,G,Q,M,F,oe)}),P.graph().nodeRankFactor=G},cleanup:function I(P){var N=P.graph();P.removeNode(N.nestingRoot),delete N.nestingRoot,h.forEach(P.edges(),function(F){P.edge(F).nestingEdge&&P.removeEdge(F)})}}},91496:(S,j,c)=>{"use strict";var h=c(45760),p=c(11510);S.exports={run:function C(T){T.graph().dummyChains=[],h.forEach(T.edges(),function(I){!function w(T,I){var P=I.v,N=T.node(P).rank,F=I.w,M=T.node(F).rank,G=I.name,Q=T.edge(I),oe=Q.labelRank;if(M!==N+1){var o,ne,fe;for(T.removeEdge(I),fe=0,++N;N<M;++fe,++N)Q.points=[],o=p.addDummyNode(T,"edge",ne={width:0,height:0,edgeLabel:Q,edgeObj:I,rank:N},"_d"),N===oe&&(ne.width=Q.width,ne.height=Q.height,ne.dummy="edge-label",ne.labelpos=Q.labelpos),T.setEdge(P,o,{weight:Q.weight},G),0===fe&&T.graph().dummyChains.push(o),P=o;T.setEdge(P,F,{weight:Q.weight},G)}}(T,I)})},undo:function x(T){h.forEach(T.graph().dummyChains,function(I){var F,P=T.node(I),N=P.edgeLabel;for(T.setEdge(P.edgeObj,N);P.dummy;)F=T.successors(I)[0],T.removeNode(I),N.points.push({x:P.x,y:P.y}),"edge-label"===P.dummy&&(N.x=P.x,N.y=P.y,N.width=P.width,N.height=P.height),P=T.node(I=F)})}}},33034:(S,j,c)=>{var h=c(45760);S.exports=function p(C,w,x){var I,T={};h.forEach(x,function(P){for(var F,M,N=C.parent(P);N;){if((F=C.parent(N))?(M=T[F],T[F]=N):(M=I,I=N),M&&M!==N)return void w.setEdge(M,N);N=F}})}},81323:(S,j,c)=>{var h=c(45760);S.exports=function p(C,w){return h.map(w,function(x){var T=C.inEdges(x);if(T.length){var I=h.reduce(T,function(P,N){var F=C.edge(N),M=C.node(N.v);return{sum:P.sum+F.weight*M.order,weight:P.weight+F.weight}},{sum:0,weight:0});return{v:x,barycenter:I.sum/I.weight,weight:I.weight}}return{v:x}})}},1686:(S,j,c)=>{var h=c(45760),p=c(36456).Graph;S.exports=function C(x,T,I){var P=function w(x){for(var T;x.hasNode(T=h.uniqueId("_root")););return T}(x),N=new p({compound:!0}).setGraph({root:P}).setDefaultNodeLabel(function(F){return x.node(F)});return h.forEach(x.nodes(),function(F){var M=x.node(F),G=x.parent(F);(M.rank===T||M.minRank<=T&&T<=M.maxRank)&&(N.setNode(F),N.setParent(F,G||P),h.forEach(x[I](F),function(Q){var oe=Q.v===F?Q.w:Q.v,o=N.edge(oe,F),ne=h.isUndefined(o)?0:o.weight;N.setEdge(oe,F,{weight:x.edge(Q).weight+ne})}),h.has(M,"minRank")&&N.setNode(F,{borderLeft:M.borderLeft[T],borderRight:M.borderRight[T]}))}),N}},18796:(S,j,c)=>{"use strict";var h=c(45760);function C(w,x,T){for(var I=h.zipObject(T,h.map(T,function(Q,oe){return oe})),P=h.flatten(h.map(x,function(Q){return h.sortBy(h.map(w.outEdges(Q),function(oe){return{pos:I[oe.w],weight:w.edge(oe).weight}}),"pos")}),!0),N=1;N<T.length;)N<<=1;var F=2*N-1;N-=1;var M=h.map(new Array(F),function(){return 0}),G=0;return h.forEach(P.forEach(function(Q){var oe=Q.pos+N;M[oe]+=Q.weight;for(var o=0;oe>0;)oe%2&&(o+=M[oe+1]),M[oe=oe-1>>1]+=Q.weight;G+=Q.weight*o})),G}S.exports=function p(w,x){for(var T=0,I=1;I<x.length;++I)T+=C(w,x[I-1],x[I]);return T}},32974:(S,j,c)=>{"use strict";var h=c(45760),p=c(49402),C=c(18796),w=c(61057),x=c(1686),T=c(33034),I=c(36456).Graph,P=c(11510);function F(Q,oe,o){return h.map(oe,function(ne){return x(Q,ne,o)})}function M(Q,oe){var o=new I;h.forEach(Q,function(ne){var fe=ne.graph().root,ce=w(ne,fe,o,oe);h.forEach(ce.vs,function(J,he){ne.node(J).order=he}),T(ne,o,ce.vs)})}function G(Q,oe){h.forEach(oe,function(o){h.forEach(o,function(ne,fe){Q.node(ne).order=fe})})}S.exports=function N(Q){var oe=P.maxRank(Q),o=F(Q,h.range(1,oe+1),"inEdges"),ne=F(Q,h.range(oe-1,-1,-1),"outEdges"),fe=p(Q);G(Q,fe);for(var J,ce=Number.POSITIVE_INFINITY,he=0,Ce=0;Ce<4;++he,++Ce){M(he%2?o:ne,he%4>=2),fe=P.buildLayerMatrix(Q);var Ie=C(Q,fe);Ie<ce&&(Ce=0,J=h.cloneDeep(fe),ce=Ie)}G(Q,J)}},49402:(S,j,c)=>{"use strict";var h=c(45760);S.exports=function p(C){var w={},x=h.filter(C.nodes(),function(F){return!C.children(F).length}),T=h.max(h.map(x,function(F){return C.node(F).rank})),I=h.map(h.range(T+1),function(){return[]}),N=h.sortBy(x,function(F){return C.node(F).rank});return h.forEach(N,function P(F){if(!h.has(w,F)){w[F]=!0;var M=C.node(F);I[M.rank].push(F),h.forEach(C.successors(F),P)}}),I}},83826:(S,j,c)=>{"use strict";var h=c(45760);S.exports=function p(x,T){var I={};return h.forEach(x,function(N,F){var M=I[N.v]={indegree:0,in:[],out:[],vs:[N.v],i:F};h.isUndefined(N.barycenter)||(M.barycenter=N.barycenter,M.weight=N.weight)}),h.forEach(T.edges(),function(N){var F=I[N.v],M=I[N.w];!h.isUndefined(F)&&!h.isUndefined(M)&&(M.indegree++,F.out.push(I[N.w]))}),function C(x){var T=[];function I(F){return function(M){M.merged||(h.isUndefined(M.barycenter)||h.isUndefined(F.barycenter)||M.barycenter>=F.barycenter)&&function w(x,T){var I=0,P=0;x.weight&&(I+=x.barycenter*x.weight,P+=x.weight),T.weight&&(I+=T.barycenter*T.weight,P+=T.weight),x.vs=T.vs.concat(x.vs),x.barycenter=I/P,x.weight=P,x.i=Math.min(T.i,x.i),T.merged=!0}(F,M)}}function P(F){return function(M){M.in.push(F),0==--M.indegree&&x.push(M)}}for(;x.length;){var N=x.pop();T.push(N),h.forEach(N.in.reverse(),I(N)),h.forEach(N.out,P(N))}return h.map(h.filter(T,function(F){return!F.merged}),function(F){return h.pick(F,["vs","i","barycenter","weight"])})}(h.filter(I,function(N){return!N.indegree}))}},61057:(S,j,c)=>{var h=c(45760),p=c(81323),C=c(83826),w=c(93803);S.exports=function x(P,N,F,M){var G=P.children(N),Q=P.node(N),oe=Q?Q.borderLeft:void 0,o=Q?Q.borderRight:void 0,ne={};oe&&(G=h.filter(G,function(Ie){return Ie!==oe&&Ie!==o}));var fe=p(P,G);h.forEach(fe,function(Ie){if(P.children(Ie.v).length){var b=x(P,Ie.v,F,M);ne[Ie.v]=b,h.has(b,"barycenter")&&function I(P,N){h.isUndefined(P.barycenter)?(P.barycenter=N.barycenter,P.weight=N.weight):(P.barycenter=(P.barycenter*P.weight+N.barycenter*N.weight)/(P.weight+N.weight),P.weight+=N.weight)}(Ie,b)}});var ce=C(fe,F);!function T(P,N){h.forEach(P,function(F){F.vs=h.flatten(F.vs.map(function(M){return N[M]?N[M].vs:M}),!0)})}(ce,ne);var J=w(ce,M);if(oe&&(J.vs=h.flatten([oe,J.vs,o],!0),P.predecessors(oe).length)){var he=P.node(P.predecessors(oe)[0]),Ce=P.node(P.predecessors(o)[0]);h.has(J,"barycenter")||(J.barycenter=0,J.weight=0),J.barycenter=(J.barycenter*J.weight+he.order+Ce.order)/(J.weight+2),J.weight+=2}return J}},93803:(S,j,c)=>{var h=c(45760),p=c(11510);function w(T,I,P){for(var N;I.length&&(N=h.last(I)).i<=P;)I.pop(),T.push(N.vs),P++;return P}S.exports=function C(T,I){var P=p.partition(T,function(ne){return h.has(ne,"barycenter")}),N=P.lhs,F=h.sortBy(P.rhs,function(ne){return-ne.i}),M=[],G=0,Q=0,oe=0;N.sort(function x(T){return function(I,P){return I.barycenter<P.barycenter?-1:I.barycenter>P.barycenter?1:T?P.i-I.i:I.i-P.i}}(!!I)),oe=w(M,F,oe),h.forEach(N,function(ne){oe+=ne.vs.length,M.push(ne.vs),G+=ne.barycenter*ne.weight,Q+=ne.weight,oe=w(M,F,oe)});var o={vs:h.flatten(M,!0)};return Q&&(o.barycenter=G/Q,o.weight=Q),o}},60162:(S,j,c)=>{var h=c(45760);S.exports=function p(x){var T=function w(x){var T={},I=0;return h.forEach(x.children(),function P(N){var F=I;h.forEach(x.children(N),P),T[N]={low:F,lim:I++}}),T}(x);h.forEach(x.graph().dummyChains,function(I){for(var P=x.node(I),N=P.edgeObj,F=function C(x,T,I,P){var Q,oe,N=[],F=[],M=Math.min(T[I].low,T[P].low),G=Math.max(T[I].lim,T[P].lim);Q=I;do{Q=x.parent(Q),N.push(Q)}while(Q&&(T[Q].low>M||G>T[Q].lim));for(oe=Q,Q=P;(Q=x.parent(Q))!==oe;)F.push(Q);return{path:N.concat(F.reverse()),lca:oe}}(x,T,N.v,N.w),M=F.path,G=F.lca,Q=0,oe=M[Q],o=!0;I!==N.w;){if(P=x.node(I),o){for(;(oe=M[Q])!==G&&x.node(oe).maxRank<P.rank;)Q++;oe===G&&(o=!1)}if(!o){for(;Q<M.length-1&&x.node(oe=M[Q+1]).minRank<=P.rank;)Q++;oe=M[Q]}x.setParent(I,oe),I=x.successors(I)[0]}})}},54058:(S,j,c)=>{"use strict";var h=c(45760),p=c(36456).Graph,C=c(11510);function w(ce,J){var he={};return h.reduce(J,function Ce(Ie,b){var ke=0,Ge=0,Ue=Ie.length,Xe=h.last(b);return h.forEach(b,function(Je,ot){var vt=function T(ce,J){if(ce.node(J).dummy)return h.find(ce.predecessors(J),function(he){return ce.node(he).dummy})}(ce,Je),Nt=vt?ce.node(vt).order:Ue;(vt||Je===Xe)&&(h.forEach(b.slice(Ge,ot+1),function(Ut){h.forEach(ce.predecessors(Ut),function(_t){var On=ce.node(_t),gr=On.order;(gr<ke||Nt<gr)&&(!On.dummy||!ce.node(Ut).dummy)&&I(he,_t,Ut)})}),Ge=ot+1,ke=Nt)}),b}),he}function x(ce,J){var he={};function Ce(b,ke,Ge,Ue,Xe){var Je;h.forEach(h.range(ke,Ge),function(ot){ce.node(Je=b[ot]).dummy&&h.forEach(ce.predecessors(Je),function(vt){var Nt=ce.node(vt);Nt.dummy&&(Nt.order<Ue||Nt.order>Xe)&&I(he,vt,Je)})})}return h.reduce(J,function Ie(b,ke){var Ue,Ge=-1,Xe=0;return h.forEach(ke,function(Je,ot){if("border"===ce.node(Je).dummy){var vt=ce.predecessors(Je);vt.length&&(Ue=ce.node(vt[0]).order,Ce(ke,Xe,ot,Ge,Ue),Xe=ot,Ge=Ue)}Ce(ke,Xe,ke.length,Ue,b.length)}),ke}),he}function I(ce,J,he){if(J>he){var Ce=J;J=he,he=Ce}var Ie=ce[J];Ie||(ce[J]=Ie={}),Ie[he]=!0}function P(ce,J,he){if(J>he){var Ce=J;J=he,he=Ce}return h.has(ce[J],he)}function N(ce,J,he,Ce){var Ie={},b={},ke={};return h.forEach(J,function(Ge){h.forEach(Ge,function(Ue,Xe){Ie[Ue]=Ue,b[Ue]=Ue,ke[Ue]=Xe})}),h.forEach(J,function(Ge){var Ue=-1;h.forEach(Ge,function(Xe){var Je=Ce(Xe);if(Je.length)for(var ot=((Je=h.sortBy(Je,function(_t){return ke[_t]})).length-1)/2,vt=Math.floor(ot),Nt=Math.ceil(ot);vt<=Nt;++vt){var Ut=Je[vt];b[Xe]===Xe&&Ue<ke[Ut]&&!P(he,Xe,Ut)&&(b[Ut]=Xe,b[Xe]=Ie[Xe]=Ie[Ut],Ue=ke[Ut])}})}),{root:Ie,align:b}}function F(ce,J,he,Ce,Ie){var b={},ke=function M(ce,J,he,Ce){var Ie=new p,b=ce.graph(),ke=function ne(ce,J,he){return function(Ce,Ie,b){var Xe,ke=Ce.node(Ie),Ge=Ce.node(b),Ue=0;if(Ue+=ke.width/2,h.has(ke,"labelpos"))switch(ke.labelpos.toLowerCase()){case"l":Xe=-ke.width/2;break;case"r":Xe=ke.width/2}if(Xe&&(Ue+=he?Xe:-Xe),Xe=0,Ue+=(ke.dummy?J:ce)/2,Ue+=(Ge.dummy?J:ce)/2,Ue+=Ge.width/2,h.has(Ge,"labelpos"))switch(Ge.labelpos.toLowerCase()){case"l":Xe=Ge.width/2;break;case"r":Xe=-Ge.width/2}return Xe&&(Ue+=he?Xe:-Xe),Xe=0,Ue}}(b.nodesep,b.edgesep,Ce);return h.forEach(J,function(Ge){var Ue;h.forEach(Ge,function(Xe){var Je=he[Xe];if(Ie.setNode(Je),Ue){var ot=he[Ue],vt=Ie.edge(ot,Je);Ie.setEdge(ot,Je,Math.max(ke(ce,Xe,Ue),vt||0))}Ue=Xe})}),Ie}(ce,J,he,Ie),Ge=Ie?"borderLeft":"borderRight";function Ue(ot,vt){for(var Nt=ke.nodes(),Ut=Nt.pop(),_t={};Ut;)_t[Ut]?ot(Ut):(_t[Ut]=!0,Nt.push(Ut),Nt=Nt.concat(vt(Ut))),Ut=Nt.pop()}return Ue(function Xe(ot){b[ot]=ke.inEdges(ot).reduce(function(vt,Nt){return Math.max(vt,b[Nt.v]+ke.edge(Nt))},0)},ke.predecessors.bind(ke)),Ue(function Je(ot){var vt=ke.outEdges(ot).reduce(function(Ut,_t){return Math.min(Ut,b[_t.w]-ke.edge(_t))},Number.POSITIVE_INFINITY),Nt=ce.node(ot);vt!==Number.POSITIVE_INFINITY&&Nt.borderType!==Ge&&(b[ot]=Math.max(b[ot],vt))},ke.successors.bind(ke)),h.forEach(Ce,function(ot){b[ot]=b[he[ot]]}),b}function G(ce,J){return h.minBy(h.values(J),function(he){var Ce=Number.NEGATIVE_INFINITY,Ie=Number.POSITIVE_INFINITY;return h.forIn(he,function(b,ke){var Ge=function fe(ce,J){return ce.node(J).width}(ce,ke)/2;Ce=Math.max(b+Ge,Ce),Ie=Math.min(b-Ge,Ie)}),Ce-Ie})}function Q(ce,J){var he=h.values(J),Ce=h.min(he),Ie=h.max(he);h.forEach(["u","d"],function(b){h.forEach(["l","r"],function(ke){var Xe,Ge=b+ke,Ue=ce[Ge];if(Ue!==J){var Je=h.values(Ue);(Xe="l"===ke?Ce-h.min(Je):Ie-h.max(Je))&&(ce[Ge]=h.mapValues(Ue,function(ot){return ot+Xe}))}})})}function oe(ce,J){return h.mapValues(ce.ul,function(he,Ce){if(J)return ce[J.toLowerCase()][Ce];var Ie=h.sortBy(h.map(ce,Ce));return(Ie[1]+Ie[2])/2})}S.exports={positionX:function o(ce){var Ie,J=C.buildLayerMatrix(ce),he=h.merge(w(ce,J),x(ce,J)),Ce={};h.forEach(["u","d"],function(ke){Ie="u"===ke?J:h.values(J).reverse(),h.forEach(["l","r"],function(Ge){"r"===Ge&&(Ie=h.map(Ie,function(ot){return h.values(ot).reverse()}));var Ue=("u"===ke?ce.predecessors:ce.successors).bind(ce),Xe=N(0,Ie,he,Ue),Je=F(ce,Ie,Xe.root,Xe.align,"r"===Ge);"r"===Ge&&(Je=h.mapValues(Je,function(ot){return-ot})),Ce[ke+Ge]=Je})});var b=G(ce,Ce);return Q(Ce,b),oe(Ce,ce.graph().align)},findType1Conflicts:w,findType2Conflicts:x,addConflict:I,hasConflict:P,verticalAlignment:N,horizontalCompaction:F,alignCoordinates:Q,findSmallestWidthAlignment:G,balance:oe}},78226:(S,j,c)=>{"use strict";var h=c(45760),p=c(11510),C=c(54058).positionX;S.exports=function w(T){(function x(T){var I=p.buildLayerMatrix(T),P=T.graph().ranksep,N=0;h.forEach(I,function(F){var M=h.max(h.map(F,function(G){return T.node(G).height}));h.forEach(F,function(G){T.node(G).y=N+M/2}),N+=M+P})})(T=p.asNonCompoundGraph(T)),h.forEach(C(T),function(I,P){T.node(P).x=I})}},96632:(S,j,c)=>{"use strict";var h=c(45760),p=c(36456).Graph,C=c(1916).slack;function x(P,N){return h.forEach(P.nodes(),function F(M){h.forEach(N.nodeEdges(M),function(G){var Q=G.v,oe=M===Q?G.w:Q;!P.hasNode(oe)&&!C(N,G)&&(P.setNode(oe,{}),P.setEdge(M,oe,{}),F(oe))})}),P.nodeCount()}function T(P,N){return h.minBy(N.edges(),function(F){if(P.hasNode(F.v)!==P.hasNode(F.w))return C(N,F)})}function I(P,N,F){h.forEach(P.nodes(),function(M){N.node(M).rank+=F})}S.exports=function w(P){var G,Q,N=new p({directed:!1}),F=P.nodes()[0],M=P.nodeCount();for(N.setNode(F,{});x(N,P)<M;)G=T(N,P),Q=N.hasNode(G.v)?C(P,G):-C(P,G),I(N,P,Q);return N}},94124:(S,j,c)=>{"use strict";var p=c(1916).longestPath,C=c(96632),w=c(63804);S.exports=function x(N){switch(N.graph().ranker){case"network-simplex":default:!function P(N){w(N)}(N);break;case"tight-tree":!function I(N){p(N),C(N)}(N);break;case"longest-path":T(N)}};var T=p},63804:(S,j,c)=>{"use strict";var h=c(45760),p=c(96632),C=c(1916).slack,w=c(1916).longestPath,x=c(36456).alg.preorder,T=c(36456).alg.postorder,I=c(11510).simplify;function P(he){he=I(he),w(he);var Ie,Ce=p(he);for(G(Ce),N(Ce,he);Ie=oe(Ce);)ne(Ce,he,Ie,o(Ce,he,Ie))}function N(he,Ce){var Ie=T(he,he.nodes());Ie=Ie.slice(0,Ie.length-1),h.forEach(Ie,function(b){!function F(he,Ce,Ie){var b=he.node(Ie);he.edge(Ie,b.parent).cutvalue=M(he,Ce,Ie)}(he,Ce,b)})}function M(he,Ce,Ie){var ke=he.node(Ie).parent,Ge=!0,Ue=Ce.edge(Ie,ke),Xe=0;return Ue||(Ge=!1,Ue=Ce.edge(ke,Ie)),Xe=Ue.weight,h.forEach(Ce.nodeEdges(Ie),function(Je){var ot=Je.v===Ie,vt=ot?Je.w:Je.v;if(vt!==ke){var Nt=ot===Ge,Ut=Ce.edge(Je).weight;if(Xe+=Nt?Ut:-Ut,function ce(he,Ce,Ie){return he.hasEdge(Ce,Ie)}(he,Ie,vt)){var _t=he.edge(Ie,vt).cutvalue;Xe+=Nt?-_t:_t}}}),Xe}function G(he,Ce){arguments.length<2&&(Ce=he.nodes()[0]),Q(he,{},1,Ce)}function Q(he,Ce,Ie,b,ke){var Ge=Ie,Ue=he.node(b);return Ce[b]=!0,h.forEach(he.neighbors(b),function(Xe){h.has(Ce,Xe)||(Ie=Q(he,Ce,Ie,Xe,b))}),Ue.low=Ge,Ue.lim=Ie++,ke?Ue.parent=ke:delete Ue.parent,Ie}function oe(he){return h.find(he.edges(),function(Ce){return he.edge(Ce).cutvalue<0})}function o(he,Ce,Ie){var b=Ie.v,ke=Ie.w;Ce.hasEdge(b,ke)||(b=Ie.w,ke=Ie.v);var Ge=he.node(b),Ue=he.node(ke),Xe=Ge,Je=!1;Ge.lim>Ue.lim&&(Xe=Ue,Je=!0);var ot=h.filter(Ce.edges(),function(vt){return Je===J(0,he.node(vt.v),Xe)&&Je!==J(0,he.node(vt.w),Xe)});return h.minBy(ot,function(vt){return C(Ce,vt)})}function ne(he,Ce,Ie,b){he.removeEdge(Ie.v,Ie.w),he.setEdge(b.v,b.w,{}),G(he),N(he,Ce),function fe(he,Ce){var Ie=h.find(he.nodes(),function(ke){return!Ce.node(ke).parent}),b=x(he,Ie);b=b.slice(1),h.forEach(b,function(ke){var Ge=he.node(ke).parent,Ue=Ce.edge(ke,Ge),Xe=!1;Ue||(Ue=Ce.edge(Ge,ke),Xe=!0),Ce.node(ke).rank=Ce.node(Ge).rank+(Xe?Ue.minlen:-Ue.minlen)})}(he,Ce)}function J(he,Ce,Ie){return Ie.low<=Ce.lim&&Ce.lim<=Ie.lim}S.exports=P,P.initLowLimValues=G,P.initCutValues=N,P.calcCutValue=M,P.leaveEdge=oe,P.enterEdge=o,P.exchangeEdges=ne},1916:(S,j,c)=>{"use strict";var h=c(45760);S.exports={longestPath:function p(w){var x={};h.forEach(w.sources(),function T(I){var P=w.node(I);if(h.has(x,I))return P.rank;x[I]=!0;var N=h.min(h.map(w.outEdges(I),function(F){return T(F.w)-w.edge(F).minlen}));return(N===Number.POSITIVE_INFINITY||null==N)&&(N=0),P.rank=N})},slack:function C(w,x){return w.node(x.w).rank-w.node(x.v).rank-w.edge(x).minlen}}},11510:(S,j,c)=>{"use strict";var h=c(45760),p=c(36456).Graph;function C(fe,ce,J,he){var Ce;do{Ce=h.uniqueId(he)}while(fe.hasNode(Ce));return J.dummy=ce,fe.setNode(Ce,J),Ce}function Q(fe){return h.max(h.map(fe.nodes(),function(ce){var J=fe.node(ce).rank;if(!h.isUndefined(J))return J}))}S.exports={addDummyNode:C,simplify:function w(fe){var ce=(new p).setGraph(fe.graph());return h.forEach(fe.nodes(),function(J){ce.setNode(J,fe.node(J))}),h.forEach(fe.edges(),function(J){var he=ce.edge(J.v,J.w)||{weight:0,minlen:1},Ce=fe.edge(J);ce.setEdge(J.v,J.w,{weight:he.weight+Ce.weight,minlen:Math.max(he.minlen,Ce.minlen)})}),ce},asNonCompoundGraph:function x(fe){var ce=new p({multigraph:fe.isMultigraph()}).setGraph(fe.graph());return h.forEach(fe.nodes(),function(J){fe.children(J).length||ce.setNode(J,fe.node(J))}),h.forEach(fe.edges(),function(J){ce.setEdge(J,fe.edge(J))}),ce},successorWeights:function T(fe){var ce=h.map(fe.nodes(),function(J){var he={};return h.forEach(fe.outEdges(J),function(Ce){he[Ce.w]=(he[Ce.w]||0)+fe.edge(Ce).weight}),he});return h.zipObject(fe.nodes(),ce)},predecessorWeights:function I(fe){var ce=h.map(fe.nodes(),function(J){var he={};return h.forEach(fe.inEdges(J),function(Ce){he[Ce.v]=(he[Ce.v]||0)+fe.edge(Ce).weight}),he});return h.zipObject(fe.nodes(),ce)},intersectRect:function P(fe,ce){var Ge,Ue,J=fe.x,he=fe.y,Ce=ce.x-J,Ie=ce.y-he,b=fe.width/2,ke=fe.height/2;if(!Ce&&!Ie)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Ie)*b>Math.abs(Ce)*ke?(Ie<0&&(ke=-ke),Ge=ke*Ce/Ie,Ue=ke):(Ce<0&&(b=-b),Ge=b,Ue=b*Ie/Ce),{x:J+Ge,y:he+Ue}},buildLayerMatrix:function N(fe){var ce=h.map(h.range(Q(fe)+1),function(){return[]});return h.forEach(fe.nodes(),function(J){var he=fe.node(J),Ce=he.rank;h.isUndefined(Ce)||(ce[Ce][he.order]=J)}),ce},normalizeRanks:function F(fe){var ce=h.min(h.map(fe.nodes(),function(J){return fe.node(J).rank}));h.forEach(fe.nodes(),function(J){var he=fe.node(J);h.has(he,"rank")&&(he.rank-=ce)})},removeEmptyRanks:function M(fe){var ce=h.min(h.map(fe.nodes(),function(Ie){return fe.node(Ie).rank})),J=[];h.forEach(fe.nodes(),function(Ie){var b=fe.node(Ie).rank-ce;J[b]||(J[b]=[]),J[b].push(Ie)});var he=0,Ce=fe.graph().nodeRankFactor;h.forEach(J,function(Ie,b){h.isUndefined(Ie)&&b%Ce!=0?--he:he&&h.forEach(Ie,function(ke){fe.node(ke).rank+=he})})},addBorderNode:function G(fe,ce,J,he){var Ce={width:0,height:0};return arguments.length>=4&&(Ce.rank=J,Ce.order=he),C(fe,"border",Ce,ce)},maxRank:Q,partition:function oe(fe,ce){var J={lhs:[],rhs:[]};return h.forEach(fe,function(he){ce(he)?J.lhs.push(he):J.rhs.push(he)}),J},time:function o(fe,ce){var J=h.now();try{return ce()}finally{console.log(fe+" time: "+(h.now()-J)+"ms")}},notime:function ne(fe,ce){return ce()}}},28126:S=>{S.exports="0.8.5"},85510:(S,j,c)=>{var h=c(51838);S.exports={Graph:h.Graph,json:c(21088),alg:c(83430),version:h.version}},86730:(S,j,c)=>{var h=c(79138);S.exports=function p(C){var T,w={},x=[];function I(P){h.has(w,P)||(w[P]=!0,T.push(P),h.each(C.successors(P),I),h.each(C.predecessors(P),I))}return h.each(C.nodes(),function(P){T=[],I(P),T.length&&x.push(T)}),x}},22163:(S,j,c)=>{var h=c(79138);function C(w,x,T,I,P,N){h.has(I,x)||(I[x]=!0,T||N.push(x),h.each(P(x),function(F){C(w,F,T,I,P,N)}),T&&N.push(x))}S.exports=function p(w,x,T){h.isArray(x)||(x=[x]);var I=(w.isDirected()?w.successors:w.neighbors).bind(w),P=[],N={};return h.each(x,function(F){if(!w.hasNode(F))throw new Error("Graph does not have node: "+F);C(w,F,"post"===T,N,I,P)}),P}},25668:(S,j,c)=>{var h=c(61718),p=c(79138);S.exports=function C(w,x,T){return p.transform(w.nodes(),function(I,P){I[P]=h(w,P,x,T)},{})}},61718:(S,j,c)=>{var h=c(79138),p=c(31919);S.exports=function w(T,I,P,N){return function x(T,I,P,N){var G,Q,F={},M=new p,oe=function(o){var ne=o.v!==G?o.v:o.w,fe=F[ne],ce=P(o),J=Q.distance+ce;if(ce<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+o+" Weight: "+ce);J<fe.distance&&(fe.distance=J,fe.predecessor=G,M.decrease(ne,J))};for(T.nodes().forEach(function(o){var ne=o===I?0:Number.POSITIVE_INFINITY;F[o]={distance:ne},M.add(o,ne)});M.size()>0&&(G=M.removeMin(),(Q=F[G]).distance!==Number.POSITIVE_INFINITY);)N(G).forEach(oe);return F}(T,String(I),P||C,N||function(F){return T.outEdges(F)})};var C=h.constant(1)},9611:(S,j,c)=>{var h=c(79138),p=c(73585);S.exports=function C(w){return h.filter(p(w),function(x){return x.length>1||1===x.length&&w.hasEdge(x[0],x[0])})}},22881:(S,j,c)=>{var h=c(79138);S.exports=function C(x,T,I){return function w(x,T,I){var P={},N=x.nodes();return N.forEach(function(F){P[F]={},P[F][F]={distance:0},N.forEach(function(M){F!==M&&(P[F][M]={distance:Number.POSITIVE_INFINITY})}),I(F).forEach(function(M){var G=M.v===F?M.w:M.v,Q=T(M);P[F][G]={distance:Q,predecessor:F}})}),N.forEach(function(F){var M=P[F];N.forEach(function(G){var Q=P[G];N.forEach(function(oe){var ne=M[oe],fe=Q[oe],ce=Q[F].distance+ne.distance;ce<fe.distance&&(fe.distance=ce,fe.predecessor=ne.predecessor)})})}),P}(x,T||p,I||function(P){return x.outEdges(P)})};var p=h.constant(1)},83430:(S,j,c)=>{S.exports={components:c(86730),dijkstra:c(61718),dijkstraAll:c(25668),findCycles:c(9611),floydWarshall:c(22881),isAcyclic:c(9366),postorder:c(46694),preorder:c(5330),prim:c(46823),tarjan:c(73585),topsort:c(52180)}},9366:(S,j,c)=>{var h=c(52180);S.exports=function p(C){try{h(C)}catch(w){if(w instanceof h.CycleException)return!1;throw w}return!0}},46694:(S,j,c)=>{var h=c(22163);S.exports=function p(C,w){return h(C,w,"post")}},5330:(S,j,c)=>{var h=c(22163);S.exports=function p(C,w){return h(C,w,"pre")}},46823:(S,j,c)=>{var h=c(79138),p=c(66568),C=c(31919);S.exports=function w(x,T){var F,I=new p,P={},N=new C;function M(Q){var oe=Q.v===F?Q.w:Q.v,o=N.priority(oe);if(void 0!==o){var ne=T(Q);ne<o&&(P[oe]=F,N.decrease(oe,ne))}}if(0===x.nodeCount())return I;h.each(x.nodes(),function(Q){N.add(Q,Number.POSITIVE_INFINITY),I.setNode(Q)}),N.decrease(x.nodes()[0],0);for(var G=!1;N.size()>0;){if(F=N.removeMin(),h.has(P,F))I.setEdge(F,P[F]);else{if(G)throw new Error("Input graph is not connected: "+x);G=!0}x.nodeEdges(F).forEach(M)}return I}},73585:(S,j,c)=>{var h=c(79138);S.exports=function p(C){var w=0,x=[],T={},I=[];function P(N){var F=T[N]={onStack:!0,lowlink:w,index:w++};if(x.push(N),C.successors(N).forEach(function(Q){h.has(T,Q)?T[Q].onStack&&(F.lowlink=Math.min(F.lowlink,T[Q].index)):(P(Q),F.lowlink=Math.min(F.lowlink,T[Q].lowlink))}),F.lowlink===F.index){var G,M=[];do{G=x.pop(),T[G].onStack=!1,M.push(G)}while(N!==G);I.push(M)}}return C.nodes().forEach(function(N){h.has(T,N)||P(N)}),I}},52180:(S,j,c)=>{var h=c(79138);function p(w){var x={},T={},I=[];if(h.each(w.sinks(),function P(N){if(h.has(T,N))throw new C;h.has(x,N)||(T[N]=!0,x[N]=!0,h.each(w.predecessors(N),P),delete T[N],I.push(N))}),h.size(x)!==w.nodeCount())throw new C;return I}function C(){}S.exports=p,p.CycleException=C,C.prototype=new Error},31919:(S,j,c)=>{var h=c(79138);function p(){this._arr=[],this._keyIndices={}}S.exports=p,p.prototype.size=function(){return this._arr.length},p.prototype.keys=function(){return this._arr.map(function(C){return C.key})},p.prototype.has=function(C){return h.has(this._keyIndices,C)},p.prototype.priority=function(C){var w=this._keyIndices[C];if(void 0!==w)return this._arr[w].priority},p.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},p.prototype.add=function(C,w){var x=this._keyIndices;if(C=String(C),!h.has(x,C)){var T=this._arr,I=T.length;return x[C]=I,T.push({key:C,priority:w}),this._decrease(I),!0}return!1},p.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var C=this._arr.pop();return delete this._keyIndices[C.key],this._heapify(0),C.key},p.prototype.decrease=function(C,w){var x=this._keyIndices[C];if(w>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+C+" Old: "+this._arr[x].priority+" New: "+w);this._arr[x].priority=w,this._decrease(x)},p.prototype._heapify=function(C){var w=this._arr,x=2*C,T=x+1,I=C;x<w.length&&(I=w[x].priority<w[I].priority?x:I,T<w.length&&(I=w[T].priority<w[I].priority?T:I),I!==C&&(this._swap(C,I),this._heapify(I)))},p.prototype._decrease=function(C){for(var T,w=this._arr,x=w[C].priority;0!==C&&!(w[T=C>>1].priority<x);)this._swap(C,T),C=T},p.prototype._swap=function(C,w){var x=this._arr,T=this._keyIndices,I=x[C],P=x[w];x[C]=P,x[w]=I,T[P.key]=C,T[I.key]=w}},66568:(S,j,c)=>{"use strict";var h=c(79138);S.exports=x;var C="\0";function x(M){this._isDirected=!h.has(M,"directed")||M.directed,this._isMultigraph=!!h.has(M,"multigraph")&&M.multigraph,this._isCompound=!!h.has(M,"compound")&&M.compound,this._label=void 0,this._defaultNodeLabelFn=h.constant(void 0),this._defaultEdgeLabelFn=h.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[C]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function T(M,G){M[G]?M[G]++:M[G]=1}function I(M,G){--M[G]||delete M[G]}function P(M,G,Q,oe){var o=""+G,ne=""+Q;if(!M&&o>ne){var fe=o;o=ne,ne=fe}return o+"\x01"+ne+"\x01"+(h.isUndefined(oe)?"\0":oe)}function N(M,G,Q,oe){var o=""+G,ne=""+Q;if(!M&&o>ne){var fe=o;o=ne,ne=fe}var ce={v:o,w:ne};return oe&&(ce.name=oe),ce}function F(M,G){return P(M,G.v,G.w,G.name)}x.prototype._nodeCount=0,x.prototype._edgeCount=0,x.prototype.isDirected=function(){return this._isDirected},x.prototype.isMultigraph=function(){return this._isMultigraph},x.prototype.isCompound=function(){return this._isCompound},x.prototype.setGraph=function(M){return this._label=M,this},x.prototype.graph=function(){return this._label},x.prototype.setDefaultNodeLabel=function(M){return h.isFunction(M)||(M=h.constant(M)),this._defaultNodeLabelFn=M,this},x.prototype.nodeCount=function(){return this._nodeCount},x.prototype.nodes=function(){return h.keys(this._nodes)},x.prototype.sources=function(){var M=this;return h.filter(this.nodes(),function(G){return h.isEmpty(M._in[G])})},x.prototype.sinks=function(){var M=this;return h.filter(this.nodes(),function(G){return h.isEmpty(M._out[G])})},x.prototype.setNodes=function(M,G){var Q=arguments,oe=this;return h.each(M,function(o){Q.length>1?oe.setNode(o,G):oe.setNode(o)}),this},x.prototype.setNode=function(M,G){return h.has(this._nodes,M)?(arguments.length>1&&(this._nodes[M]=G),this):(this._nodes[M]=arguments.length>1?G:this._defaultNodeLabelFn(M),this._isCompound&&(this._parent[M]=C,this._children[M]={},this._children[C][M]=!0),this._in[M]={},this._preds[M]={},this._out[M]={},this._sucs[M]={},++this._nodeCount,this)},x.prototype.node=function(M){return this._nodes[M]},x.prototype.hasNode=function(M){return h.has(this._nodes,M)},x.prototype.removeNode=function(M){var G=this;if(h.has(this._nodes,M)){var Q=function(oe){G.removeEdge(G._edgeObjs[oe])};delete this._nodes[M],this._isCompound&&(this._removeFromParentsChildList(M),delete this._parent[M],h.each(this.children(M),function(oe){G.setParent(oe)}),delete this._children[M]),h.each(h.keys(this._in[M]),Q),delete this._in[M],delete this._preds[M],h.each(h.keys(this._out[M]),Q),delete this._out[M],delete this._sucs[M],--this._nodeCount}return this},x.prototype.setParent=function(M,G){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h.isUndefined(G))G=C;else{for(var Q=G+="";!h.isUndefined(Q);Q=this.parent(Q))if(Q===M)throw new Error("Setting "+G+" as parent of "+M+" would create a cycle");this.setNode(G)}return this.setNode(M),this._removeFromParentsChildList(M),this._parent[M]=G,this._children[G][M]=!0,this},x.prototype._removeFromParentsChildList=function(M){delete this._children[this._parent[M]][M]},x.prototype.parent=function(M){if(this._isCompound){var G=this._parent[M];if(G!==C)return G}},x.prototype.children=function(M){if(h.isUndefined(M)&&(M=C),this._isCompound){var G=this._children[M];if(G)return h.keys(G)}else{if(M===C)return this.nodes();if(this.hasNode(M))return[]}},x.prototype.predecessors=function(M){var G=this._preds[M];if(G)return h.keys(G)},x.prototype.successors=function(M){var G=this._sucs[M];if(G)return h.keys(G)},x.prototype.neighbors=function(M){var G=this.predecessors(M);if(G)return h.union(G,this.successors(M))},x.prototype.isLeaf=function(M){return 0===(this.isDirected()?this.successors(M):this.neighbors(M)).length},x.prototype.filterNodes=function(M){var G=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});G.setGraph(this.graph());var Q=this;h.each(this._nodes,function(ne,fe){M(fe)&&G.setNode(fe,ne)}),h.each(this._edgeObjs,function(ne){G.hasNode(ne.v)&&G.hasNode(ne.w)&&G.setEdge(ne,Q.edge(ne))});var oe={};function o(ne){var fe=Q.parent(ne);return void 0===fe||G.hasNode(fe)?(oe[ne]=fe,fe):fe in oe?oe[fe]:o(fe)}return this._isCompound&&h.each(G.nodes(),function(ne){G.setParent(ne,o(ne))}),G},x.prototype.setDefaultEdgeLabel=function(M){return h.isFunction(M)||(M=h.constant(M)),this._defaultEdgeLabelFn=M,this},x.prototype.edgeCount=function(){return this._edgeCount},x.prototype.edges=function(){return h.values(this._edgeObjs)},x.prototype.setPath=function(M,G){var Q=this,oe=arguments;return h.reduce(M,function(o,ne){return oe.length>1?Q.setEdge(o,ne,G):Q.setEdge(o,ne),ne}),this},x.prototype.setEdge=function(){var M,G,Q,oe,o=!1,ne=arguments[0];"object"==typeof ne&&null!==ne&&"v"in ne?(M=ne.v,G=ne.w,Q=ne.name,2===arguments.length&&(oe=arguments[1],o=!0)):(M=ne,G=arguments[1],Q=arguments[3],arguments.length>2&&(oe=arguments[2],o=!0)),M=""+M,G=""+G,h.isUndefined(Q)||(Q=""+Q);var fe=P(this._isDirected,M,G,Q);if(h.has(this._edgeLabels,fe))return o&&(this._edgeLabels[fe]=oe),this;if(!h.isUndefined(Q)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(M),this.setNode(G),this._edgeLabels[fe]=o?oe:this._defaultEdgeLabelFn(M,G,Q);var ce=N(this._isDirected,M,G,Q);return M=ce.v,G=ce.w,Object.freeze(ce),this._edgeObjs[fe]=ce,T(this._preds[G],M),T(this._sucs[M],G),this._in[G][fe]=ce,this._out[M][fe]=ce,this._edgeCount++,this},x.prototype.edge=function(M,G,Q){var oe=1===arguments.length?F(this._isDirected,arguments[0]):P(this._isDirected,M,G,Q);return this._edgeLabels[oe]},x.prototype.hasEdge=function(M,G,Q){var oe=1===arguments.length?F(this._isDirected,arguments[0]):P(this._isDirected,M,G,Q);return h.has(this._edgeLabels,oe)},x.prototype.removeEdge=function(M,G,Q){var oe=1===arguments.length?F(this._isDirected,arguments[0]):P(this._isDirected,M,G,Q),o=this._edgeObjs[oe];return o&&(M=o.v,G=o.w,delete this._edgeLabels[oe],delete this._edgeObjs[oe],I(this._preds[G],M),I(this._sucs[M],G),delete this._in[G][oe],delete this._out[M][oe],this._edgeCount--),this},x.prototype.inEdges=function(M,G){var Q=this._in[M];if(Q){var oe=h.values(Q);return G?h.filter(oe,function(o){return o.v===G}):oe}},x.prototype.outEdges=function(M,G){var Q=this._out[M];if(Q){var oe=h.values(Q);return G?h.filter(oe,function(o){return o.w===G}):oe}},x.prototype.nodeEdges=function(M,G){var Q=this.inEdges(M,G);if(Q)return Q.concat(this.outEdges(M,G))}},51838:(S,j,c)=>{S.exports={Graph:c(66568),version:c(75089)}},21088:(S,j,c)=>{var h=c(79138),p=c(66568);function w(I){return h.map(I.nodes(),function(P){var N=I.node(P),F=I.parent(P),M={v:P};return h.isUndefined(N)||(M.value=N),h.isUndefined(F)||(M.parent=F),M})}function x(I){return h.map(I.edges(),function(P){var N=I.edge(P),F={v:P.v,w:P.w};return h.isUndefined(P.name)||(F.name=P.name),h.isUndefined(N)||(F.value=N),F})}S.exports={write:function C(I){var P={options:{directed:I.isDirected(),multigraph:I.isMultigraph(),compound:I.isCompound()},nodes:w(I),edges:x(I)};return h.isUndefined(I.graph())||(P.value=h.clone(I.graph())),P},read:function T(I){var P=new p(I.options).setGraph(I.value);return h.each(I.nodes,function(N){P.setNode(N.v,N.value),N.parent&&P.setParent(N.v,N.parent)}),h.each(I.edges,function(N){P.setEdge({v:N.v,w:N.w,name:N.name},N.value)}),P}}},79138:(S,j,c)=>{var h;try{h={clone:c(11094),constant:c(76684),each:c(35474),filter:c(35281),has:c(54842),isArray:c(21503),isEmpty:c(71973),isFunction:c(75946),isUndefined:c(34235),keys:c(118),map:c(19984),reduce:c(81337),size:c(55637),transform:c(89416),union:c(68921),values:c(90377)}}catch(p){}h||(h=window._),S.exports=h},75089:S=>{S.exports="2.1.8"},58259:function(S,j){var h;!function(p,C){"use strict";"object"==typeof S.exports?S.exports=p.document?C(p,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return C(w)}:C(p)}("undefined"!=typeof window?window:this,function(p,C){"use strict";var w=[],x=Object.getPrototypeOf,T=w.slice,I=w.flat?function(u){return w.flat.call(u)}:function(u){return w.concat.apply([],u)},P=w.push,N=w.indexOf,F={},M=F.toString,G=F.hasOwnProperty,Q=G.toString,oe=Q.call(Object),o={},ne=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},fe=function(d){return null!=d&&d===d.window},ce=p.document,J={type:!0,src:!0,nonce:!0,noModule:!0};function he(u,d,y){var _,k,L=(y=y||ce).createElement("script");if(L.text=u,d)for(_ in J)(k=d[_]||d.getAttribute&&d.getAttribute(_))&&L.setAttribute(_,k);y.head.appendChild(L).parentNode.removeChild(L)}function Ce(u){return null==u?u+"":"object"==typeof u||"function"==typeof u?F[M.call(u)]||"object":typeof u}var b=function(u,d){return new b.fn.init(u,d)};function ke(u){var d=!!u&&"length"in u&&u.length,y=Ce(u);return!ne(u)&&!fe(u)&&("array"===y||0===d||"number"==typeof d&&d>0&&d-1 in u)}b.fn=b.prototype={jquery:"3.6.0",constructor:b,length:0,toArray:function(){return T.call(this)},get:function(u){return null==u?T.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var d=b.merge(this.constructor(),u);return d.prevObject=this,d},each:function(u){return b.each(this,u)},map:function(u){return this.pushStack(b.map(this,function(d,y){return u.call(d,y,d)}))},slice:function(){return this.pushStack(T.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(u,d){return(d+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(u,d){return d%2}))},eq:function(u){var d=this.length,y=+u+(u<0?d:0);return this.pushStack(y>=0&&y<d?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:P,sort:w.sort,splice:w.splice},b.extend=b.fn.extend=function(){var u,d,y,_,k,L,U=arguments[0]||{},re=1,ie=arguments.length,ye=!1;for("boolean"==typeof U&&(ye=U,U=arguments[re]||{},re++),"object"!=typeof U&&!ne(U)&&(U={}),re===ie&&(U=this,re--);re<ie;re++)if(null!=(u=arguments[re]))for(d in u)_=u[d],"__proto__"!==d&&U!==_&&(ye&&_&&(b.isPlainObject(_)||(k=Array.isArray(_)))?(y=U[d],L=k&&!Array.isArray(y)?[]:k||b.isPlainObject(y)?y:{},k=!1,U[d]=b.extend(ye,L,_)):void 0!==_&&(U[d]=_));return U},b.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var d,y;return!(!u||"[object Object]"!==M.call(u)||(d=x(u))&&("function"!=typeof(y=G.call(d,"constructor")&&d.constructor)||Q.call(y)!==oe))},isEmptyObject:function(u){var d;for(d in u)return!1;return!0},globalEval:function(u,d,y){he(u,{nonce:d&&d.nonce},y)},each:function(u,d){var y,_=0;if(ke(u))for(y=u.length;_<y&&!1!==d.call(u[_],_,u[_]);_++);else for(_ in u)if(!1===d.call(u[_],_,u[_]))break;return u},makeArray:function(u,d){var y=d||[];return null!=u&&(ke(Object(u))?b.merge(y,"string"==typeof u?[u]:u):P.call(y,u)),y},inArray:function(u,d,y){return null==d?-1:N.call(d,u,y)},merge:function(u,d){for(var y=+d.length,_=0,k=u.length;_<y;_++)u[k++]=d[_];return u.length=k,u},grep:function(u,d,y){for(var k=[],L=0,U=u.length,re=!y;L<U;L++)!d(u[L],L)!==re&&k.push(u[L]);return k},map:function(u,d,y){var _,k,L=0,U=[];if(ke(u))for(_=u.length;L<_;L++)null!=(k=d(u[L],L,y))&&U.push(k);else for(L in u)null!=(k=d(u[L],L,y))&&U.push(k);return I(U)},guid:1,support:o}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=w[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,d){F["[object "+d+"]"]=d.toLowerCase()});var Ge=function(u){var d,y,_,k,L,U,re,ie,ye,Oe,$e,Ee,Be,dt,Ht,wt,Ln,jn,Hr,St="sizzle"+1*new Date,It=u.document,xr=0,un=0,Fn=mn(),sr=mn(),gs=mn(),ii=mn(),Oo=function(X,se){return X===se&&($e=!0),0},Ui={}.hasOwnProperty,hr=[],bt=hr.pop,Vn=hr.push,gi=hr.push,jr=hr.slice,Ri=function(X,se){for(var me=0,Ve=X.length;me<Ve;me++)if(X[me]===se)return me;return-1},ko="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Jt="[\\x20\\t\\r\\n\\f]",Qn="(?:\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",vi="\\["+Jt+"*("+Qn+")(?:"+Jt+"*([*^$|!~]?=)"+Jt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Qn+"))|)"+Jt+"*\\]",Lo=":("+Qn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",vn=new RegExp(Jt+"+","g"),ln=new RegExp("^"+Jt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Jt+"+$","g"),Qt=new RegExp("^"+Jt+"*,"+Jt+"*"),Ia=new RegExp("^"+Jt+"*([>+~]|"+Jt+")"+Jt+"*"),Bs=new RegExp(Jt+"|>"),ku=new RegExp(Lo),Lu=new RegExp("^"+Qn+"$"),Aa={ID:new RegExp("^#("+Qn+")"),CLASS:new RegExp("^\\.("+Qn+")"),TAG:new RegExp("^("+Qn+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+Lo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Jt+"*(even|odd|(([+-]|)(\\d*)n|)"+Jt+"*(?:([+-]|)"+Jt+"*(\\d+)|))"+Jt+"*\\)|)","i"),bool:new RegExp("^(?:"+ko+")$","i"),needsContext:new RegExp("^"+Jt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Jt+"*((?:-\\d)?\\d*)"+Jt+"*\\)|)(?=[^-]|$)","i")},Ru=/HTML$/i,Xl=/^(?:input|select|textarea|button)$/i,vs=/^h\d$/i,pr=/^[^{]+\{\s*\[native \w/,ur=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lo=/[+~]/,oi=new RegExp("\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\([^\\r\\n\\f])","g"),Gi=function(X,se){var me="0x"+X.slice(1)-65536;return se||(me<0?String.fromCharCode(me+65536):String.fromCharCode(me>>10|55296,1023&me|56320))},Zn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ma=function(X,se){return se?"\0"===X?"\ufffd":X.slice(0,-1)+"\\"+X.charCodeAt(X.length-1).toString(16)+" ":"\\"+X},Hs=function(){Ee()},br=ct(function(X){return!0===X.disabled&&"fieldset"===X.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{gi.apply(hr=jr.call(It.childNodes),It.childNodes)}catch(X){gi={apply:hr.length?function(se,me){Vn.apply(se,jr.call(me))}:function(se,me){for(var Ve=se.length,Se=0;se[Ve++]=me[Se++];);se.length=Ve-1}}}function En(X,se,me,Ve){var Se,je,Ne,qe,rt,Tt,Pt,Qe=se&&se.ownerDocument,Zt=se?se.nodeType:9;if(me=me||[],"string"!=typeof X||!X||1!==Zt&&9!==Zt&&11!==Zt)return me;if(!Ve&&(Ee(se),se=se||Be,Ht)){if(11!==Zt&&(rt=ur.exec(X)))if(Se=rt[1]){if(9===Zt){if(!(Ne=se.getElementById(Se)))return me;if(Ne.id===Se)return me.push(Ne),me}else if(Qe&&(Ne=Qe.getElementById(Se))&&Hr(se,Ne)&&Ne.id===Se)return me.push(Ne),me}else{if(rt[2])return gi.apply(me,se.getElementsByTagName(X)),me;if((Se=rt[3])&&y.getElementsByClassName&&se.getElementsByClassName)return gi.apply(me,se.getElementsByClassName(Se)),me}if(y.qsa&&!ii[X+" "]&&(!wt||!wt.test(X))&&(1!==Zt||"object"!==se.nodeName.toLowerCase())){if(Pt=X,Qe=se,1===Zt&&(Bs.test(X)||Ia.test(X))){for(((Qe=lo.test(X)&&_e(se.parentNode)||se)!==se||!y.scope)&&((qe=se.getAttribute("id"))?qe=qe.replace(Zn,Ma):se.setAttribute("id",qe=St)),je=(Tt=U(X)).length;je--;)Tt[je]=(qe?"#"+qe:":scope")+" "+Ae(Tt[je]);Pt=Tt.join(",")}try{return gi.apply(me,Qe.querySelectorAll(Pt)),me}catch(qt){ii(X,!0)}finally{qe===St&&se.removeAttribute("id")}}}return ie(X.replace(ln,"$1"),se,me,Ve)}function mn(){var X=[];return function se(me,Ve){return X.push(me+" ")>_.cacheLength&&delete se[X.shift()],se[me+" "]=Ve}}function an(X){return X[St]=!0,X}function wn(X){var se=Be.createElement("fieldset");try{return!!X(se)}catch(me){return!1}finally{se.parentNode&&se.parentNode.removeChild(se),se=null}}function co(X,se){for(var me=X.split("|"),Ve=me.length;Ve--;)_.attrHandle[me[Ve]]=se}function _r(X,se){var me=se&&X,Ve=me&&1===X.nodeType&&1===se.nodeType&&X.sourceIndex-se.sourceIndex;if(Ve)return Ve;if(me)for(;me=me.nextSibling;)if(me===se)return-1;return X?1:-1}function js(X){return function(se){return"input"===se.nodeName.toLowerCase()&&se.type===X}}function Wi(X){return function(se){var me=se.nodeName.toLowerCase();return("input"===me||"button"===me)&&se.type===X}}function zs(X){return function(se){return"form"in se?se.parentNode&&!1===se.disabled?"label"in se?"label"in se.parentNode?se.parentNode.disabled===X:se.disabled===X:se.isDisabled===X||se.isDisabled!==!X&&br(se)===X:se.disabled===X:"label"in se&&se.disabled===X}}function mi(X){return an(function(se){return se=+se,an(function(me,Ve){for(var Se,je=X([],me.length,se),Ne=je.length;Ne--;)me[Se=je[Ne]]&&(me[Se]=!(Ve[Se]=me[Se]))})})}function _e(X){return X&&void 0!==X.getElementsByTagName&&X}for(d in y=En.support={},L=En.isXML=function(X){var me=X&&(X.ownerDocument||X).documentElement;return!Ru.test(X&&X.namespaceURI||me&&me.nodeName||"HTML")},Ee=En.setDocument=function(X){var se,me,Ve=X?X.ownerDocument||X:It;return Ve==Be||9!==Ve.nodeType||!Ve.documentElement||(dt=(Be=Ve).documentElement,Ht=!L(Be),It!=Be&&(me=Be.defaultView)&&me.top!==me&&(me.addEventListener?me.addEventListener("unload",Hs,!1):me.attachEvent&&me.attachEvent("onunload",Hs)),y.scope=wn(function(Se){return dt.appendChild(Se).appendChild(Be.createElement("div")),void 0!==Se.querySelectorAll&&!Se.querySelectorAll(":scope fieldset div").length}),y.attributes=wn(function(Se){return Se.className="i",!Se.getAttribute("className")}),y.getElementsByTagName=wn(function(Se){return Se.appendChild(Be.createComment("")),!Se.getElementsByTagName("*").length}),y.getElementsByClassName=pr.test(Be.getElementsByClassName),y.getById=wn(function(Se){return dt.appendChild(Se).id=St,!Be.getElementsByName||!Be.getElementsByName(St).length}),y.getById?(_.filter.ID=function(Se){var je=Se.replace(oi,Gi);return function(Ne){return Ne.getAttribute("id")===je}},_.find.ID=function(Se,je){if(void 0!==je.getElementById&&Ht){var Ne=je.getElementById(Se);return Ne?[Ne]:[]}}):(_.filter.ID=function(Se){var je=Se.replace(oi,Gi);return function(Ne){var qe=void 0!==Ne.getAttributeNode&&Ne.getAttributeNode("id");return qe&&qe.value===je}},_.find.ID=function(Se,je){if(void 0!==je.getElementById&&Ht){var Ne,qe,rt,Tt=je.getElementById(Se);if(Tt){if((Ne=Tt.getAttributeNode("id"))&&Ne.value===Se)return[Tt];for(rt=je.getElementsByName(Se),qe=0;Tt=rt[qe++];)if((Ne=Tt.getAttributeNode("id"))&&Ne.value===Se)return[Tt]}return[]}}),_.find.TAG=y.getElementsByTagName?function(Se,je){return void 0!==je.getElementsByTagName?je.getElementsByTagName(Se):y.qsa?je.querySelectorAll(Se):void 0}:function(Se,je){var Ne,qe=[],rt=0,Tt=je.getElementsByTagName(Se);if("*"===Se){for(;Ne=Tt[rt++];)1===Ne.nodeType&&qe.push(Ne);return qe}return Tt},_.find.CLASS=y.getElementsByClassName&&function(Se,je){if(void 0!==je.getElementsByClassName&&Ht)return je.getElementsByClassName(Se)},Ln=[],wt=[],(y.qsa=pr.test(Be.querySelectorAll))&&(wn(function(Se){var je;dt.appendChild(Se).innerHTML="<a id='"+St+"'></a><select id='"+St+"-\r\\' msallowcapture=''><option selected=''></option></select>",Se.querySelectorAll("[msallowcapture^='']").length&&wt.push("[*^$]="+Jt+"*(?:''|\"\")"),Se.querySelectorAll("[selected]").length||wt.push("\\["+Jt+"*(?:value|"+ko+")"),Se.querySelectorAll("[id~="+St+"-]").length||wt.push("~="),(je=Be.createElement("input")).setAttribute("name",""),Se.appendChild(je),Se.querySelectorAll("[name='']").length||wt.push("\\["+Jt+"*name"+Jt+"*="+Jt+"*(?:''|\"\")"),Se.querySelectorAll(":checked").length||wt.push(":checked"),Se.querySelectorAll("a#"+St+"+*").length||wt.push(".#.+[+~]"),Se.querySelectorAll("\\\f"),wt.push("[\\r\\n\\f]")}),wn(function(Se){Se.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var je=Be.createElement("input");je.setAttribute("type","hidden"),Se.appendChild(je).setAttribute("name","D"),Se.querySelectorAll("[name=d]").length&&wt.push("name"+Jt+"*[*^$|!~]?="),2!==Se.querySelectorAll(":enabled").length&&wt.push(":enabled",":disabled"),dt.appendChild(Se).disabled=!0,2!==Se.querySelectorAll(":disabled").length&&wt.push(":enabled",":disabled"),Se.querySelectorAll("*,:x"),wt.push(",.*:")})),(y.matchesSelector=pr.test(jn=dt.matches||dt.webkitMatchesSelector||dt.mozMatchesSelector||dt.oMatchesSelector||dt.msMatchesSelector))&&wn(function(Se){y.disconnectedMatch=jn.call(Se,"*"),jn.call(Se,"[s!='']:x"),Ln.push("!=",Lo)}),wt=wt.length&&new RegExp(wt.join("|")),Ln=Ln.length&&new RegExp(Ln.join("|")),se=pr.test(dt.compareDocumentPosition),Hr=se||pr.test(dt.contains)?function(Se,je){var Ne=9===Se.nodeType?Se.documentElement:Se,qe=je&&je.parentNode;return Se===qe||!(!qe||1!==qe.nodeType||!(Ne.contains?Ne.contains(qe):Se.compareDocumentPosition&&16&Se.compareDocumentPosition(qe)))}:function(Se,je){if(je)for(;je=je.parentNode;)if(je===Se)return!0;return!1},Oo=se?function(Se,je){if(Se===je)return $e=!0,0;var Ne=!Se.compareDocumentPosition-!je.compareDocumentPosition;return Ne||(1&(Ne=(Se.ownerDocument||Se)==(je.ownerDocument||je)?Se.compareDocumentPosition(je):1)||!y.sortDetached&&je.compareDocumentPosition(Se)===Ne?Se==Be||Se.ownerDocument==It&&Hr(It,Se)?-1:je==Be||je.ownerDocument==It&&Hr(It,je)?1:Oe?Ri(Oe,Se)-Ri(Oe,je):0:4&Ne?-1:1)}:function(Se,je){if(Se===je)return $e=!0,0;var Ne,qe=0,rt=Se.parentNode,Tt=je.parentNode,Pt=[Se],Qe=[je];if(!rt||!Tt)return Se==Be?-1:je==Be?1:rt?-1:Tt?1:Oe?Ri(Oe,Se)-Ri(Oe,je):0;if(rt===Tt)return _r(Se,je);for(Ne=Se;Ne=Ne.parentNode;)Pt.unshift(Ne);for(Ne=je;Ne=Ne.parentNode;)Qe.unshift(Ne);for(;Pt[qe]===Qe[qe];)qe++;return qe?_r(Pt[qe],Qe[qe]):Pt[qe]==It?-1:Qe[qe]==It?1:0}),Be},En.matches=function(X,se){return En(X,null,null,se)},En.matchesSelector=function(X,se){if(Ee(X),y.matchesSelector&&Ht&&!ii[se+" "]&&(!Ln||!Ln.test(se))&&(!wt||!wt.test(se)))try{var me=jn.call(X,se);if(me||y.disconnectedMatch||X.document&&11!==X.document.nodeType)return me}catch(Ve){ii(se,!0)}return En(se,Be,null,[X]).length>0},En.contains=function(X,se){return(X.ownerDocument||X)!=Be&&Ee(X),Hr(X,se)},En.attr=function(X,se){(X.ownerDocument||X)!=Be&&Ee(X);var me=_.attrHandle[se.toLowerCase()],Ve=me&&Ui.call(_.attrHandle,se.toLowerCase())?me(X,se,!Ht):void 0;return void 0!==Ve?Ve:y.attributes||!Ht?X.getAttribute(se):(Ve=X.getAttributeNode(se))&&Ve.specified?Ve.value:null},En.escape=function(X){return(X+"").replace(Zn,Ma)},En.error=function(X){throw new Error("Syntax error, unrecognized expression: "+X)},En.uniqueSort=function(X){var se,me=[],Ve=0,Se=0;if($e=!y.detectDuplicates,Oe=!y.sortStable&&X.slice(0),X.sort(Oo),$e){for(;se=X[Se++];)se===X[Se]&&(Ve=me.push(Se));for(;Ve--;)X.splice(me[Ve],1)}return Oe=null,X},k=En.getText=function(X){var se,me="",Ve=0,Se=X.nodeType;if(Se){if(1===Se||9===Se||11===Se){if("string"==typeof X.textContent)return X.textContent;for(X=X.firstChild;X;X=X.nextSibling)me+=k(X)}else if(3===Se||4===Se)return X.nodeValue}else for(;se=X[Ve++];)me+=k(se);return me},(_=En.selectors={cacheLength:50,createPseudo:an,match:Aa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(X){return X[1]=X[1].replace(oi,Gi),X[3]=(X[3]||X[4]||X[5]||"").replace(oi,Gi),"~="===X[2]&&(X[3]=" "+X[3]+" "),X.slice(0,4)},CHILD:function(X){return X[1]=X[1].toLowerCase(),"nth"===X[1].slice(0,3)?(X[3]||En.error(X[0]),X[4]=+(X[4]?X[5]+(X[6]||1):2*("even"===X[3]||"odd"===X[3])),X[5]=+(X[7]+X[8]||"odd"===X[3])):X[3]&&En.error(X[0]),X},PSEUDO:function(X){var se,me=!X[6]&&X[2];return Aa.CHILD.test(X[0])?null:(X[3]?X[2]=X[4]||X[5]||"":me&&ku.test(me)&&(se=U(me,!0))&&(se=me.indexOf(")",me.length-se)-me.length)&&(X[0]=X[0].slice(0,se),X[2]=me.slice(0,se)),X.slice(0,3))}},filter:{TAG:function(X){var se=X.replace(oi,Gi).toLowerCase();return"*"===X?function(){return!0}:function(me){return me.nodeName&&me.nodeName.toLowerCase()===se}},CLASS:function(X){var se=Fn[X+" "];return se||(se=new RegExp("(^|"+Jt+")"+X+"("+Jt+"|$)"))&&Fn(X,function(me){return se.test("string"==typeof me.className&&me.className||void 0!==me.getAttribute&&me.getAttribute("class")||"")})},ATTR:function(X,se,me){return function(Ve){var Se=En.attr(Ve,X);return null==Se?"!="===se:!se||(Se+="","="===se?Se===me:"!="===se?Se!==me:"^="===se?me&&0===Se.indexOf(me):"*="===se?me&&Se.indexOf(me)>-1:"$="===se?me&&Se.slice(-me.length)===me:"~="===se?(" "+Se.replace(vn," ")+" ").indexOf(me)>-1:"|="===se&&(Se===me||Se.slice(0,me.length+1)===me+"-"))}},CHILD:function(X,se,me,Ve,Se){var je="nth"!==X.slice(0,3),Ne="last"!==X.slice(-4),qe="of-type"===se;return 1===Ve&&0===Se?function(rt){return!!rt.parentNode}:function(rt,Tt,Pt){var Qe,Zt,qt,gt,Un,Yn,Cr=je!==Ne?"nextSibling":"previousSibling",Pn=rt.parentNode,ta=qe&&rt.nodeName.toLowerCase(),ho=!Pt&&!qe,zr=!1;if(Pn){if(je){for(;Cr;){for(gt=rt;gt=gt[Cr];)if(qe?gt.nodeName.toLowerCase()===ta:1===gt.nodeType)return!1;Yn=Cr="only"===X&&!Yn&&"nextSibling"}return!0}if(Yn=[Ne?Pn.firstChild:Pn.lastChild],Ne&&ho){for(zr=(Un=(Qe=(Zt=(qt=(gt=Pn)[St]||(gt[St]={}))[gt.uniqueID]||(qt[gt.uniqueID]={}))[X]||[])[0]===xr&&Qe[1])&&Qe[2],gt=Un&&Pn.childNodes[Un];gt=++Un&&gt&&gt[Cr]||(zr=Un=0)||Yn.pop();)if(1===gt.nodeType&&++zr&&gt===rt){Zt[X]=[xr,Un,zr];break}}else if(ho&&(zr=Un=(Qe=(Zt=(qt=(gt=rt)[St]||(gt[St]={}))[gt.uniqueID]||(qt[gt.uniqueID]={}))[X]||[])[0]===xr&&Qe[1]),!1===zr)for(;(gt=++Un&&gt&&gt[Cr]||(zr=Un=0)||Yn.pop())&&((qe?gt.nodeName.toLowerCase()!==ta:1!==gt.nodeType)||!++zr||(ho&&((Zt=(qt=gt[St]||(gt[St]={}))[gt.uniqueID]||(qt[gt.uniqueID]={}))[X]=[xr,zr]),gt!==rt)););return(zr-=Se)===Ve||zr%Ve==0&&zr/Ve>=0}}},PSEUDO:function(X,se){var me,Ve=_.pseudos[X]||_.setFilters[X.toLowerCase()]||En.error("unsupported pseudo: "+X);return Ve[St]?Ve(se):Ve.length>1?(me=[X,X,"",se],_.setFilters.hasOwnProperty(X.toLowerCase())?an(function(Se,je){for(var Ne,qe=Ve(Se,se),rt=qe.length;rt--;)Se[Ne=Ri(Se,qe[rt])]=!(je[Ne]=qe[rt])}):function(Se){return Ve(Se,0,me)}):Ve}},pseudos:{not:an(function(X){var se=[],me=[],Ve=re(X.replace(ln,"$1"));return Ve[St]?an(function(Se,je,Ne,qe){for(var rt,Tt=Ve(Se,null,qe,[]),Pt=Se.length;Pt--;)(rt=Tt[Pt])&&(Se[Pt]=!(je[Pt]=rt))}):function(Se,je,Ne){return se[0]=Se,Ve(se,null,Ne,me),se[0]=null,!me.pop()}}),has:an(function(X){return function(se){return En(X,se).length>0}}),contains:an(function(X){return X=X.replace(oi,Gi),function(se){return(se.textContent||k(se)).indexOf(X)>-1}}),lang:an(function(X){return Lu.test(X||"")||En.error("unsupported lang: "+X),X=X.replace(oi,Gi).toLowerCase(),function(se){var me;do{if(me=Ht?se.lang:se.getAttribute("xml:lang")||se.getAttribute("lang"))return(me=me.toLowerCase())===X||0===me.indexOf(X+"-")}while((se=se.parentNode)&&1===se.nodeType);return!1}}),target:function(X){var se=u.location&&u.location.hash;return se&&se.slice(1)===X.id},root:function(X){return X===dt},focus:function(X){return X===Be.activeElement&&(!Be.hasFocus||Be.hasFocus())&&!!(X.type||X.href||~X.tabIndex)},enabled:zs(!1),disabled:zs(!0),checked:function(X){var se=X.nodeName.toLowerCase();return"input"===se&&!!X.checked||"option"===se&&!!X.selected},selected:function(X){return!0===X.selected},empty:function(X){for(X=X.firstChild;X;X=X.nextSibling)if(X.nodeType<6)return!1;return!0},parent:function(X){return!_.pseudos.empty(X)},header:function(X){return vs.test(X.nodeName)},input:function(X){return Xl.test(X.nodeName)},button:function(X){var se=X.nodeName.toLowerCase();return"input"===se&&"button"===X.type||"button"===se},text:function(X){var se;return"input"===X.nodeName.toLowerCase()&&"text"===X.type&&(null==(se=X.getAttribute("type"))||"text"===se.toLowerCase())},first:mi(function(){return[0]}),last:mi(function(X,se){return[se-1]}),eq:mi(function(X,se,me){return[me<0?me+se:me]}),even:mi(function(X,se){for(var me=0;me<se;me+=2)X.push(me);return X}),odd:mi(function(X,se){for(var me=1;me<se;me+=2)X.push(me);return X}),lt:mi(function(X,se,me){for(var Ve=me<0?me+se:me>se?se:me;--Ve>=0;)X.push(Ve);return X}),gt:mi(function(X,se,me){for(var Ve=me<0?me+se:me;++Ve<se;)X.push(Ve);return X})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[d]=js(d);for(d in{submit:!0,reset:!0})_.pseudos[d]=Wi(d);function He(){}function Ae(X){for(var se=0,me=X.length,Ve="";se<me;se++)Ve+=X[se].value;return Ve}function ct(X,se,me){var Ve=se.dir,Se=se.next,je=Se||Ve,Ne=me&&"parentNode"===je,qe=un++;return se.first?function(rt,Tt,Pt){for(;rt=rt[Ve];)if(1===rt.nodeType||Ne)return X(rt,Tt,Pt);return!1}:function(rt,Tt,Pt){var Qe,Zt,qt,gt=[xr,qe];if(Pt){for(;rt=rt[Ve];)if((1===rt.nodeType||Ne)&&X(rt,Tt,Pt))return!0}else for(;rt=rt[Ve];)if(1===rt.nodeType||Ne)if(Zt=(qt=rt[St]||(rt[St]={}))[rt.uniqueID]||(qt[rt.uniqueID]={}),Se&&Se===rt.nodeName.toLowerCase())rt=rt[Ve]||rt;else{if((Qe=Zt[je])&&Qe[0]===xr&&Qe[1]===qe)return gt[2]=Qe[2];if(Zt[je]=gt,gt[2]=X(rt,Tt,Pt))return!0}return!1}}function Vt(X){return X.length>1?function(se,me,Ve){for(var Se=X.length;Se--;)if(!X[Se](se,me,Ve))return!1;return!0}:X[0]}function zn(X,se,me,Ve,Se){for(var je,Ne=[],qe=0,rt=X.length,Tt=null!=se;qe<rt;qe++)(je=X[qe])&&(!me||me(je,Ve,Se))&&(Ne.push(je),Tt&&se.push(qe));return Ne}function _n(X,se,me,Ve,Se,je){return Ve&&!Ve[St]&&(Ve=_n(Ve)),Se&&!Se[St]&&(Se=_n(Se,je)),an(function(Ne,qe,rt,Tt){var Pt,Qe,Zt,qt=[],gt=[],Un=qe.length,Yn=Ne||function cn(X,se,me){for(var Ve=0,Se=se.length;Ve<Se;Ve++)En(X,se[Ve],me);return me}(se||"*",rt.nodeType?[rt]:rt,[]),Cr=!X||!Ne&&se?Yn:zn(Yn,qt,X,rt,Tt),Pn=me?Se||(Ne?X:Un||Ve)?[]:qe:Cr;if(me&&me(Cr,Pn,rt,Tt),Ve)for(Pt=zn(Pn,gt),Ve(Pt,[],rt,Tt),Qe=Pt.length;Qe--;)(Zt=Pt[Qe])&&(Pn[gt[Qe]]=!(Cr[gt[Qe]]=Zt));if(Ne){if(Se||X){if(Se){for(Pt=[],Qe=Pn.length;Qe--;)(Zt=Pn[Qe])&&Pt.push(Cr[Qe]=Zt);Se(null,Pn=[],Pt,Tt)}for(Qe=Pn.length;Qe--;)(Zt=Pn[Qe])&&(Pt=Se?Ri(Ne,Zt):qt[Qe])>-1&&(Ne[Pt]=!(qe[Pt]=Zt))}}else Pn=zn(Pn===qe?Pn.splice(Un,Pn.length):Pn),Se?Se(null,qe,Pn,Tt):gi.apply(qe,Pn)})}function Ro(X){for(var se,me,Ve,Se=X.length,je=_.relative[X[0].type],Ne=je||_.relative[" "],qe=je?1:0,rt=ct(function(Qe){return Qe===se},Ne,!0),Tt=ct(function(Qe){return Ri(se,Qe)>-1},Ne,!0),Pt=[function(Qe,Zt,qt){var gt=!je&&(qt||Zt!==ye)||((se=Zt).nodeType?rt(Qe,Zt,qt):Tt(Qe,Zt,qt));return se=null,gt}];qe<Se;qe++)if(me=_.relative[X[qe].type])Pt=[ct(Vt(Pt),me)];else{if((me=_.filter[X[qe].type].apply(null,X[qe].matches))[St]){for(Ve=++qe;Ve<Se&&!_.relative[X[Ve].type];Ve++);return _n(qe>1&&Vt(Pt),qe>1&&Ae(X.slice(0,qe-1).concat({value:" "===X[qe-2].type?"*":""})).replace(ln,"$1"),me,qe<Ve&&Ro(X.slice(qe,Ve)),Ve<Se&&Ro(X=X.slice(Ve)),Ve<Se&&Ae(X))}Pt.push(me)}return Vt(Pt)}return He.prototype=_.filters=_.pseudos,_.setFilters=new He,U=En.tokenize=function(X,se){var me,Ve,Se,je,Ne,qe,rt,Tt=sr[X+" "];if(Tt)return se?0:Tt.slice(0);for(Ne=X,qe=[],rt=_.preFilter;Ne;){for(je in(!me||(Ve=Qt.exec(Ne)))&&(Ve&&(Ne=Ne.slice(Ve[0].length)||Ne),qe.push(Se=[])),me=!1,(Ve=Ia.exec(Ne))&&(me=Ve.shift(),Se.push({value:me,type:Ve[0].replace(ln," ")}),Ne=Ne.slice(me.length)),_.filter)(Ve=Aa[je].exec(Ne))&&(!rt[je]||(Ve=rt[je](Ve)))&&(me=Ve.shift(),Se.push({value:me,type:je,matches:Ve}),Ne=Ne.slice(me.length));if(!me)break}return se?Ne.length:Ne?En.error(X):sr(X,qe).slice(0)},re=En.compile=function(X,se){var me,Ve=[],Se=[],je=gs[X+" "];if(!je){for(se||(se=U(X)),me=se.length;me--;)(je=Ro(se[me]))[St]?Ve.push(je):Se.push(je);je=gs(X,function fo(X,se){var me=se.length>0,Ve=X.length>0,Se=function(je,Ne,qe,rt,Tt){var Pt,Qe,Zt,qt=0,gt="0",Un=je&&[],Yn=[],Cr=ye,Pn=je||Ve&&_.find.TAG("*",Tt),ta=xr+=null==Cr?1:Math.random()||.1,ho=Pn.length;for(Tt&&(ye=Ne==Be||Ne||Tt);gt!==ho&&null!=(Pt=Pn[gt]);gt++){if(Ve&&Pt){for(Qe=0,!Ne&&Pt.ownerDocument!=Be&&(Ee(Pt),qe=!Ht);Zt=X[Qe++];)if(Zt(Pt,Ne||Be,qe)){rt.push(Pt);break}Tt&&(xr=ta)}me&&((Pt=!Zt&&Pt)&&qt--,je&&Un.push(Pt))}if(qt+=gt,me&&gt!==qt){for(Qe=0;Zt=se[Qe++];)Zt(Un,Yn,Ne,qe);if(je){if(qt>0)for(;gt--;)Un[gt]||Yn[gt]||(Yn[gt]=bt.call(rt));Yn=zn(Yn)}gi.apply(rt,Yn),Tt&&!je&&Yn.length>0&&qt+se.length>1&&En.uniqueSort(rt)}return Tt&&(xr=ta,ye=Cr),Un};return me?an(Se):Se}(Se,Ve)),je.selector=X}return je},ie=En.select=function(X,se,me,Ve){var Se,je,Ne,qe,rt,Tt="function"==typeof X&&X,Pt=!Ve&&U(X=Tt.selector||X);if(me=me||[],1===Pt.length){if((je=Pt[0]=Pt[0].slice(0)).length>2&&"ID"===(Ne=je[0]).type&&9===se.nodeType&&Ht&&_.relative[je[1].type]){if(!(se=(_.find.ID(Ne.matches[0].replace(oi,Gi),se)||[])[0]))return me;Tt&&(se=se.parentNode),X=X.slice(je.shift().value.length)}for(Se=Aa.needsContext.test(X)?0:je.length;Se--&&!_.relative[qe=(Ne=je[Se]).type];)if((rt=_.find[qe])&&(Ve=rt(Ne.matches[0].replace(oi,Gi),lo.test(je[0].type)&&_e(se.parentNode)||se))){if(je.splice(Se,1),!(X=Ve.length&&Ae(je)))return gi.apply(me,Ve),me;break}}return(Tt||re(X,Pt))(Ve,se,!Ht,me,!se||lo.test(X)&&_e(se.parentNode)||se),me},y.sortStable=St.split("").sort(Oo).join("")===St,y.detectDuplicates=!!$e,Ee(),y.sortDetached=wn(function(X){return 1&X.compareDocumentPosition(Be.createElement("fieldset"))}),wn(function(X){return X.innerHTML="<a href='#'></a>","#"===X.firstChild.getAttribute("href")})||co("type|href|height|width",function(X,se,me){if(!me)return X.getAttribute(se,"type"===se.toLowerCase()?1:2)}),(!y.attributes||!wn(function(X){return X.innerHTML="<input/>",X.firstChild.setAttribute("value",""),""===X.firstChild.getAttribute("value")}))&&co("value",function(X,se,me){if(!me&&"input"===X.nodeName.toLowerCase())return X.defaultValue}),wn(function(X){return null==X.getAttribute("disabled")})||co(ko,function(X,se,me){var Ve;if(!me)return!0===X[se]?se.toLowerCase():(Ve=X.getAttributeNode(se))&&Ve.specified?Ve.value:null}),En}(p);b.find=Ge,b.expr=Ge.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=Ge.uniqueSort,b.text=Ge.getText,b.isXMLDoc=Ge.isXML,b.contains=Ge.contains,b.escapeSelector=Ge.escape;var Ue=function(u,d,y){for(var _=[],k=void 0!==y;(u=u[d])&&9!==u.nodeType;)if(1===u.nodeType){if(k&&b(u).is(y))break;_.push(u)}return _},Xe=function(u,d){for(var y=[];u;u=u.nextSibling)1===u.nodeType&&u!==d&&y.push(u);return y},Je=b.expr.match.needsContext;function ot(u,d){return u.nodeName&&u.nodeName.toLowerCase()===d.toLowerCase()}var vt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Nt(u,d,y){return ne(d)?b.grep(u,function(_,k){return!!d.call(_,k,_)!==y}):d.nodeType?b.grep(u,function(_){return _===d!==y}):"string"!=typeof d?b.grep(u,function(_){return N.call(d,_)>-1!==y}):b.filter(d,u,y)}b.filter=function(u,d,y){var _=d[0];return y&&(u=":not("+u+")"),1===d.length&&1===_.nodeType?b.find.matchesSelector(_,u)?[_]:[]:b.find.matches(u,b.grep(d,function(k){return 1===k.nodeType}))},b.fn.extend({find:function(u){var d,y,_=this.length,k=this;if("string"!=typeof u)return this.pushStack(b(u).filter(function(){for(d=0;d<_;d++)if(b.contains(k[d],this))return!0}));for(y=this.pushStack([]),d=0;d<_;d++)b.find(u,k[d],y);return _>1?b.uniqueSort(y):y},filter:function(u){return this.pushStack(Nt(this,u||[],!1))},not:function(u){return this.pushStack(Nt(this,u||[],!0))},is:function(u){return!!Nt(this,"string"==typeof u&&Je.test(u)?b(u):u||[],!1).length}});var Ut,_t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,On=b.fn.init=function(u,d,y){var _,k;if(!u)return this;if(y=y||Ut,"string"==typeof u){if(!(_="<"===u[0]&&">"===u[u.length-1]&&u.length>=3?[null,u,null]:_t.exec(u))||!_[1]&&d)return!d||d.jquery?(d||y).find(u):this.constructor(d).find(u);if(_[1]){if(b.merge(this,b.parseHTML(_[1],(d=d instanceof b?d[0]:d)&&d.nodeType?d.ownerDocument||d:ce,!0)),vt.test(_[1])&&b.isPlainObject(d))for(_ in d)ne(this[_])?this[_](d[_]):this.attr(_,d[_]);return this}return(k=ce.getElementById(_[2]))&&(this[0]=k,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):ne(u)?void 0!==y.ready?y.ready(u):u(b):b.makeArray(u,this)};On.prototype=b.fn,Ut=b(ce);var gr=/^(?:parents|prev(?:Until|All))/,Nr={children:!0,contents:!0,next:!0,prev:!0};function nr(u,d){for(;(u=u[d])&&1!==u.nodeType;);return u}b.fn.extend({has:function(u){var d=b(u,this),y=d.length;return this.filter(function(){for(var _=0;_<y;_++)if(b.contains(this,d[_]))return!0})},closest:function(u,d){var y,_=0,k=this.length,L=[],U="string"!=typeof u&&b(u);if(!Je.test(u))for(;_<k;_++)for(y=this[_];y&&y!==d;y=y.parentNode)if(y.nodeType<11&&(U?U.index(y)>-1:1===y.nodeType&&b.find.matchesSelector(y,u))){L.push(y);break}return this.pushStack(L.length>1?b.uniqueSort(L):L)},index:function(u){return u?"string"==typeof u?N.call(b(u),this[0]):N.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,d){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(u,d))))},addBack:function(u){return this.add(null==u?this.prevObject:this.prevObject.filter(u))}}),b.each({parent:function(u){var d=u.parentNode;return d&&11!==d.nodeType?d:null},parents:function(u){return Ue(u,"parentNode")},parentsUntil:function(u,d,y){return Ue(u,"parentNode",y)},next:function(u){return nr(u,"nextSibling")},prev:function(u){return nr(u,"previousSibling")},nextAll:function(u){return Ue(u,"nextSibling")},prevAll:function(u){return Ue(u,"previousSibling")},nextUntil:function(u,d,y){return Ue(u,"nextSibling",y)},prevUntil:function(u,d,y){return Ue(u,"previousSibling",y)},siblings:function(u){return Xe((u.parentNode||{}).firstChild,u)},children:function(u){return Xe(u.firstChild)},contents:function(u){return null!=u.contentDocument&&x(u.contentDocument)?u.contentDocument:(ot(u,"template")&&(u=u.content||u),b.merge([],u.childNodes))}},function(u,d){b.fn[u]=function(y,_){var k=b.map(this,d,y);return"Until"!==u.slice(-5)&&(_=y),_&&"string"==typeof _&&(k=b.filter(_,k)),this.length>1&&(Nr[u]||b.uniqueSort(k),gr.test(u)&&k.reverse()),this.pushStack(k)}});var Wn=/[^\x20\t\r\n\f]+/g;function Nn(u){return u}function Re(u){throw u}function ze(u,d,y,_){var k;try{u&&ne(k=u.promise)?k.call(u).done(d).fail(y):u&&ne(k=u.then)?k.call(u,d,y):d.apply(void 0,[u].slice(_))}catch(L){y.apply(void 0,[L])}}b.Callbacks=function(u){u="string"==typeof u?function vr(u){var d={};return b.each(u.match(Wn)||[],function(y,_){d[_]=!0}),d}(u):b.extend({},u);var d,y,_,k,L=[],U=[],re=-1,ie=function(){for(k=k||u.once,_=d=!0;U.length;re=-1)for(y=U.shift();++re<L.length;)!1===L[re].apply(y[0],y[1])&&u.stopOnFalse&&(re=L.length,y=!1);u.memory||(y=!1),d=!1,k&&(L=y?[]:"")},ye={add:function(){return L&&(y&&!d&&(re=L.length-1,U.push(y)),function Oe($e){b.each($e,function(Ee,Be){ne(Be)?(!u.unique||!ye.has(Be))&&L.push(Be):Be&&Be.length&&"string"!==Ce(Be)&&Oe(Be)})}(arguments),y&&!d&&ie()),this},remove:function(){return b.each(arguments,function(Oe,$e){for(var Ee;(Ee=b.inArray($e,L,Ee))>-1;)L.splice(Ee,1),Ee<=re&&re--}),this},has:function(Oe){return Oe?b.inArray(Oe,L)>-1:L.length>0},empty:function(){return L&&(L=[]),this},disable:function(){return k=U=[],L=y="",this},disabled:function(){return!L},lock:function(){return k=U=[],!y&&!d&&(L=y=""),this},locked:function(){return!!k},fireWith:function(Oe,$e){return k||($e=[Oe,($e=$e||[]).slice?$e.slice():$e],U.push($e),d||ie()),this},fire:function(){return ye.fireWith(this,arguments),this},fired:function(){return!!_}};return ye},b.extend({Deferred:function(u){var d=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],y="pending",_={state:function(){return y},always:function(){return k.done(arguments).fail(arguments),this},catch:function(L){return _.then(null,L)},pipe:function(){var L=arguments;return b.Deferred(function(U){b.each(d,function(re,ie){var ye=ne(L[ie[4]])&&L[ie[4]];k[ie[1]](function(){var Oe=ye&&ye.apply(this,arguments);Oe&&ne(Oe.promise)?Oe.promise().progress(U.notify).done(U.resolve).fail(U.reject):U[ie[0]+"With"](this,ye?[Oe]:arguments)})}),L=null}).promise()},then:function(L,U,re){var ie=0;function ye(Oe,$e,Ee,Be){return function(){var dt=this,Ht=arguments,wt=function(){var jn,Hr;if(!(Oe<ie)){if((jn=Ee.apply(dt,Ht))===$e.promise())throw new TypeError("Thenable self-resolution");ne(Hr=jn&&("object"==typeof jn||"function"==typeof jn)&&jn.then)?Be?Hr.call(jn,ye(ie,$e,Nn,Be),ye(ie,$e,Re,Be)):(ie++,Hr.call(jn,ye(ie,$e,Nn,Be),ye(ie,$e,Re,Be),ye(ie,$e,Nn,$e.notifyWith))):(Ee!==Nn&&(dt=void 0,Ht=[jn]),(Be||$e.resolveWith)(dt,Ht))}},Ln=Be?wt:function(){try{wt()}catch(jn){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(jn,Ln.stackTrace),Oe+1>=ie&&(Ee!==Re&&(dt=void 0,Ht=[jn]),$e.rejectWith(dt,Ht))}};Oe?Ln():(b.Deferred.getStackHook&&(Ln.stackTrace=b.Deferred.getStackHook()),p.setTimeout(Ln))}}return b.Deferred(function(Oe){d[0][3].add(ye(0,Oe,ne(re)?re:Nn,Oe.notifyWith)),d[1][3].add(ye(0,Oe,ne(L)?L:Nn)),d[2][3].add(ye(0,Oe,ne(U)?U:Re))}).promise()},promise:function(L){return null!=L?b.extend(L,_):_}},k={};return b.each(d,function(L,U){var re=U[2],ie=U[5];_[U[1]]=re.add,ie&&re.add(function(){y=ie},d[3-L][2].disable,d[3-L][3].disable,d[0][2].lock,d[0][3].lock),re.add(U[3].fire),k[U[0]]=function(){return k[U[0]+"With"](this===k?void 0:this,arguments),this},k[U[0]+"With"]=re.fireWith}),_.promise(k),u&&u.call(k,k),k},when:function(u){var d=arguments.length,y=d,_=Array(y),k=T.call(arguments),L=b.Deferred(),U=function(re){return function(ie){_[re]=this,k[re]=arguments.length>1?T.call(arguments):ie,--d||L.resolveWith(_,k)}};if(d<=1&&(ze(u,L.done(U(y)).resolve,L.reject,!d),"pending"===L.state()||ne(k[y]&&k[y].then)))return L.then();for(;y--;)ze(k[y],U(y),L.reject);return L.promise()}});var Ke=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(u,d){p.console&&p.console.warn&&u&&Ke.test(u.name)&&p.console.warn("jQuery.Deferred exception: "+u.message,u.stack,d)},b.readyException=function(u){p.setTimeout(function(){throw u})};var st=b.Deferred();function Ct(){ce.removeEventListener("DOMContentLoaded",Ct),p.removeEventListener("load",Ct),b.ready()}b.fn.ready=function(u){return st.then(u).catch(function(d){b.readyException(d)}),this},b.extend({isReady:!1,readyWait:1,ready:function(u){(!0===u?--b.readyWait:b.isReady)||(b.isReady=!0,!(!0!==u&&--b.readyWait>0)&&st.resolveWith(ce,[b]))}}),b.ready.then=st.then,"complete"===ce.readyState||"loading"!==ce.readyState&&!ce.documentElement.doScroll?p.setTimeout(b.ready):(ce.addEventListener("DOMContentLoaded",Ct),p.addEventListener("load",Ct));var zt=function(u,d,y,_,k,L,U){var re=0,ie=u.length,ye=null==y;if("object"===Ce(y))for(re in k=!0,y)zt(u,d,re,y[re],!0,L,U);else if(void 0!==_&&(k=!0,ne(_)||(U=!0),ye&&(U?(d.call(u,_),d=null):(ye=d,d=function(Oe,$e,Ee){return ye.call(b(Oe),Ee)})),d))for(;re<ie;re++)d(u[re],y,U?_:_.call(u[re],re,d(u[re],y)));return k?u:ye?d.call(u):ie?d(u[0],y):L},mt=/^-ms-/,Bn=/-([a-z])/g;function fi(u,d){return d.toUpperCase()}function Gt(u){return u.replace(mt,"ms-").replace(Bn,fi)}var Dt=function(u){return 1===u.nodeType||9===u.nodeType||!+u.nodeType};function O(){this.expando=b.expando+O.uid++}O.uid=1,O.prototype={cache:function(u){var d=u[this.expando];return d||(d={},Dt(u)&&(u.nodeType?u[this.expando]=d:Object.defineProperty(u,this.expando,{value:d,configurable:!0}))),d},set:function(u,d,y){var _,k=this.cache(u);if("string"==typeof d)k[Gt(d)]=y;else for(_ in d)k[Gt(_)]=d[_];return k},get:function(u,d){return void 0===d?this.cache(u):u[this.expando]&&u[this.expando][Gt(d)]},access:function(u,d,y){return void 0===d||d&&"string"==typeof d&&void 0===y?this.get(u,d):(this.set(u,d,y),void 0!==y?y:d)},remove:function(u,d){var y,_=u[this.expando];if(void 0!==_){if(void 0!==d)for((y=(d=Array.isArray(d)?d.map(Gt):(d=Gt(d))in _?[d]:d.match(Wn)||[]).length);y--;)delete _[d[y]];(void 0===d||b.isEmptyObject(_))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var d=u[this.expando];return void 0!==d&&!b.isEmptyObject(d)}};var H=new O,q=new O,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fe=/[A-Z]/g;function tt(u,d,y){var _;if(void 0===y&&1===u.nodeType)if(_="data-"+d.replace(Fe,"-$&").toLowerCase(),"string"==typeof(y=u.getAttribute(_))){try{y=function De(u){return"true"===u||"false"!==u&&("null"===u?null:u===+u+""?+u:pe.test(u)?JSON.parse(u):u)}(y)}catch(k){}q.set(u,d,y)}else y=void 0;return y}b.extend({hasData:function(u){return q.hasData(u)||H.hasData(u)},data:function(u,d,y){return q.access(u,d,y)},removeData:function(u,d){q.remove(u,d)},_data:function(u,d,y){return H.access(u,d,y)},_removeData:function(u,d){H.remove(u,d)}}),b.fn.extend({data:function(u,d){var y,_,k,L=this[0],U=L&&L.attributes;if(void 0===u){if(this.length&&(k=q.get(L),1===L.nodeType&&!H.get(L,"hasDataAttrs"))){for(y=U.length;y--;)U[y]&&0===(_=U[y].name).indexOf("data-")&&(_=Gt(_.slice(5)),tt(L,_,k[_]));H.set(L,"hasDataAttrs",!0)}return k}return"object"==typeof u?this.each(function(){q.set(this,u)}):zt(this,function(re){var ie;if(L&&void 0===re)return void 0!==(ie=q.get(L,u))||void 0!==(ie=tt(L,u))?ie:void 0;this.each(function(){q.set(this,u,re)})},null,d,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){q.remove(this,u)})}}),b.extend({queue:function(u,d,y){var _;if(u)return _=H.get(u,d=(d||"fx")+"queue"),y&&(!_||Array.isArray(y)?_=H.access(u,d,b.makeArray(y)):_.push(y)),_||[]},dequeue:function(u,d){var y=b.queue(u,d=d||"fx"),_=y.length,k=y.shift(),L=b._queueHooks(u,d);"inprogress"===k&&(k=y.shift(),_--),k&&("fx"===d&&y.unshift("inprogress"),delete L.stop,k.call(u,function(){b.dequeue(u,d)},L)),!_&&L&&L.empty.fire()},_queueHooks:function(u,d){var y=d+"queueHooks";return H.get(u,y)||H.access(u,y,{empty:b.Callbacks("once memory").add(function(){H.remove(u,[d+"queue",y])})})}}),b.fn.extend({queue:function(u,d){var y=2;return"string"!=typeof u&&(d=u,u="fx",y--),arguments.length<y?b.queue(this[0],u):void 0===d?this:this.each(function(){var _=b.queue(this,u,d);b._queueHooks(this,u),"fx"===u&&"inprogress"!==_[0]&&b.dequeue(this,u)})},dequeue:function(u){return this.each(function(){b.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,d){var y,_=1,k=b.Deferred(),L=this,U=this.length,re=function(){--_||k.resolveWith(L,[L])};for("string"!=typeof u&&(d=u,u=void 0),u=u||"fx";U--;)(y=H.get(L[U],u+"queueHooks"))&&y.empty&&(_++,y.empty.add(re));return re(),k.promise(d)}});var yt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=new RegExp("^(?:([+-])=|)("+yt+")([a-z%]*)$","i"),Kt=["Top","Right","Bottom","Left"],on=ce.documentElement,Wt=function(u){return b.contains(u.ownerDocument,u)},Hn={composed:!0};on.getRootNode&&(Wt=function(u){return b.contains(u.ownerDocument,u)||u.getRootNode(Hn)===u.ownerDocument});var kn=function(u,d){return"none"===(u=d||u).style.display||""===u.style.display&&Wt(u)&&"none"===b.css(u,"display")};function Dr(u,d,y,_){var k,L,U=20,re=_?function(){return _.cur()}:function(){return b.css(u,d,"")},ie=re(),ye=y&&y[3]||(b.cssNumber[d]?"":"px"),Oe=u.nodeType&&(b.cssNumber[d]||"px"!==ye&&+ie)&&xt.exec(b.css(u,d));if(Oe&&Oe[3]!==ye){for(ye=ye||Oe[3],Oe=+(ie/=2)||1;U--;)b.style(u,d,Oe+ye),(1-L)*(1-(L=re()/ie||.5))<=0&&(U=0),Oe/=L;b.style(u,d,(Oe*=2)+ye),y=y||[]}return y&&(Oe=+Oe||+ie||0,k=y[1]?Oe+(y[1]+1)*y[2]:+y[2],_&&(_.unit=ye,_.start=Oe,_.end=k)),k}var xn={};function ht(u){var d,y=u.ownerDocument,_=u.nodeName,k=xn[_];return k||(d=y.body.appendChild(y.createElement(_)),k=b.css(d,"display"),d.parentNode.removeChild(d),"none"===k&&(k="block"),xn[_]=k,k)}function Tn(u,d){for(var y,_,k=[],L=0,U=u.length;L<U;L++)(_=u[L]).style&&(y=_.style.display,d?("none"===y&&(k[L]=H.get(_,"display")||null,k[L]||(_.style.display="")),""===_.style.display&&kn(_)&&(k[L]=ht(_))):"none"!==y&&(k[L]="none",H.set(_,"display",y)));for(L=0;L<U;L++)null!=k[L]&&(u[L].style.display=k[L]);return u}b.fn.extend({show:function(){return Tn(this,!0)},hide:function(){return Tn(this)},toggle:function(u){return"boolean"==typeof u?u?this.show():this.hide():this.each(function(){kn(this)?b(this).show():b(this).hide()})}});var d,y,Dn=/^(?:checkbox|radio)$/i,rr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Fr=/^$|^module$|\/(?:java|ecma)script/i;d=ce.createDocumentFragment().appendChild(ce.createElement("div")),(y=ce.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),d.appendChild(y),o.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",o.option=!!d.lastChild;var Jn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function $n(u,d){var y;return y=void 0!==u.getElementsByTagName?u.getElementsByTagName(d||"*"):void 0!==u.querySelectorAll?u.querySelectorAll(d||"*"):[],void 0===d||d&&ot(u,d)?b.merge([u],y):y}function wo(u,d){for(var y=0,_=u.length;y<_;y++)H.set(u[y],"globalEval",!d||H.get(d[y],"globalEval"))}Jn.tbody=Jn.tfoot=Jn.colgroup=Jn.caption=Jn.thead,Jn.th=Jn.td,o.option||(Jn.optgroup=Jn.option=[1,"<select multiple='multiple'>","</select>"]);var ma=/<|&#?\w+;/;function ro(u,d,y,_,k){for(var L,U,re,ie,ye,Oe,$e=d.createDocumentFragment(),Ee=[],Be=0,dt=u.length;Be<dt;Be++)if((L=u[Be])||0===L)if("object"===Ce(L))b.merge(Ee,L.nodeType?[L]:L);else if(ma.test(L)){for(U=U||$e.appendChild(d.createElement("div")),re=(rr.exec(L)||["",""])[1].toLowerCase(),U.innerHTML=(ie=Jn[re]||Jn._default)[1]+b.htmlPrefilter(L)+ie[2],Oe=ie[0];Oe--;)U=U.lastChild;b.merge(Ee,U.childNodes),(U=$e.firstChild).textContent=""}else Ee.push(d.createTextNode(L));for($e.textContent="",Be=0;L=Ee[Be++];)if(_&&b.inArray(L,_)>-1)k&&k.push(L);else if(ye=Wt(L),U=$n($e.appendChild(L),"script"),ye&&wo(U),y)for(Oe=0;L=U[Oe++];)Fr.test(L.type||"")&&y.push(L);return $e}var So=/^([^.]*)(?:\.(.+)|)/;function de(){return!0}function Yr(){return!1}function Vi(u,d){return u===function To(){try{return ce.activeElement}catch(u){}}()==("focus"===d)}function at(u,d,y,_,k,L){var U,re;if("object"==typeof d){for(re in"string"!=typeof y&&(_=_||y,y=void 0),d)at(u,re,y,_,d[re],L);return u}if(null==_&&null==k?(k=y,_=y=void 0):null==k&&("string"==typeof y?(k=_,_=void 0):(k=_,_=y,y=void 0)),!1===k)k=Yr;else if(!k)return u;return 1===L&&(U=k,k=function(ie){return b().off(ie),U.apply(this,arguments)},k.guid=U.guid||(U.guid=b.guid++)),u.each(function(){b.event.add(this,d,k,_,y)})}function Vr(u,d,y){y?(H.set(u,d,!1),b.event.add(u,d,{namespace:!1,handler:function(_){var k,L,U=H.get(this,d);if(1&_.isTrigger&&this[d]){if(U.length)(b.event.special[d]||{}).delegateType&&_.stopPropagation();else if(U=T.call(arguments),H.set(this,d,U),k=y(this,d),this[d](),U!==(L=H.get(this,d))||k?H.set(this,d,!1):L={},U!==L)return _.stopImmediatePropagation(),_.preventDefault(),L&&L.value}else U.length&&(H.set(this,d,{value:b.event.trigger(b.extend(U[0],b.Event.prototype),U.slice(1),this)}),_.stopImmediatePropagation())}})):void 0===H.get(u,d)&&b.event.add(u,d,de)}b.event={global:{},add:function(u,d,y,_,k){var L,U,re,ie,ye,Oe,$e,Ee,Be,dt,Ht,wt=H.get(u);if(Dt(u))for(y.handler&&(y=(L=y).handler,k=L.selector),k&&b.find.matchesSelector(on,k),y.guid||(y.guid=b.guid++),(ie=wt.events)||(ie=wt.events=Object.create(null)),(U=wt.handle)||(U=wt.handle=function(Ln){return void 0!==b&&b.event.triggered!==Ln.type?b.event.dispatch.apply(u,arguments):void 0}),ye=(d=(d||"").match(Wn)||[""]).length;ye--;)Be=Ht=(re=So.exec(d[ye])||[])[1],dt=(re[2]||"").split(".").sort(),Be&&($e=b.event.special[Be]||{},$e=b.event.special[Be=(k?$e.delegateType:$e.bindType)||Be]||{},Oe=b.extend({type:Be,origType:Ht,data:_,handler:y,guid:y.guid,selector:k,needsContext:k&&b.expr.match.needsContext.test(k),namespace:dt.join(".")},L),(Ee=ie[Be])||((Ee=ie[Be]=[]).delegateCount=0,(!$e.setup||!1===$e.setup.call(u,_,dt,U))&&u.addEventListener&&u.addEventListener(Be,U)),$e.add&&($e.add.call(u,Oe),Oe.handler.guid||(Oe.handler.guid=y.guid)),k?Ee.splice(Ee.delegateCount++,0,Oe):Ee.push(Oe),b.event.global[Be]=!0)},remove:function(u,d,y,_,k){var L,U,re,ie,ye,Oe,$e,Ee,Be,dt,Ht,wt=H.hasData(u)&&H.get(u);if(wt&&(ie=wt.events)){for(ye=(d=(d||"").match(Wn)||[""]).length;ye--;)if(Be=Ht=(re=So.exec(d[ye])||[])[1],dt=(re[2]||"").split(".").sort(),Be){for($e=b.event.special[Be]||{},Ee=ie[Be=(_?$e.delegateType:$e.bindType)||Be]||[],re=re[2]&&new RegExp("(^|\\.)"+dt.join("\\.(?:.*\\.|)")+"(\\.|$)"),U=L=Ee.length;L--;)Oe=Ee[L],(k||Ht===Oe.origType)&&(!y||y.guid===Oe.guid)&&(!re||re.test(Oe.namespace))&&(!_||_===Oe.selector||"**"===_&&Oe.selector)&&(Ee.splice(L,1),Oe.selector&&Ee.delegateCount--,$e.remove&&$e.remove.call(u,Oe));U&&!Ee.length&&((!$e.teardown||!1===$e.teardown.call(u,dt,wt.handle))&&b.removeEvent(u,Be,wt.handle),delete ie[Be])}else for(Be in ie)b.event.remove(u,Be+d[ye],y,_,!0);b.isEmptyObject(ie)&&H.remove(u,"handle events")}},dispatch:function(u){var d,y,_,k,L,U,re=new Array(arguments.length),ie=b.event.fix(u),ye=(H.get(this,"events")||Object.create(null))[ie.type]||[],Oe=b.event.special[ie.type]||{};for(re[0]=ie,d=1;d<arguments.length;d++)re[d]=arguments[d];if(ie.delegateTarget=this,!Oe.preDispatch||!1!==Oe.preDispatch.call(this,ie)){for(U=b.event.handlers.call(this,ie,ye),d=0;(k=U[d++])&&!ie.isPropagationStopped();)for(ie.currentTarget=k.elem,y=0;(L=k.handlers[y++])&&!ie.isImmediatePropagationStopped();)(!ie.rnamespace||!1===L.namespace||ie.rnamespace.test(L.namespace))&&(ie.handleObj=L,ie.data=L.data,void 0!==(_=((b.event.special[L.origType]||{}).handle||L.handler).apply(k.elem,re))&&!1===(ie.result=_)&&(ie.preventDefault(),ie.stopPropagation()));return Oe.postDispatch&&Oe.postDispatch.call(this,ie),ie.result}},handlers:function(u,d){var y,_,k,L,U,re=[],ie=d.delegateCount,ye=u.target;if(ie&&ye.nodeType&&!("click"===u.type&&u.button>=1))for(;ye!==this;ye=ye.parentNode||this)if(1===ye.nodeType&&("click"!==u.type||!0!==ye.disabled)){for(L=[],U={},y=0;y<ie;y++)void 0===U[k=(_=d[y]).selector+" "]&&(U[k]=_.needsContext?b(k,this).index(ye)>-1:b.find(k,this,null,[ye]).length),U[k]&&L.push(_);L.length&&re.push({elem:ye,handlers:L})}return ye=this,ie<d.length&&re.push({elem:ye,handlers:d.slice(ie)}),re},addProp:function(u,d){Object.defineProperty(b.Event.prototype,u,{enumerable:!0,configurable:!0,get:ne(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(y){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(u){return u[b.expando]?u:new b.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var d=this||u;return Dn.test(d.type)&&d.click&&ot(d,"input")&&Vr(d,"click",de),!1},trigger:function(u){var d=this||u;return Dn.test(d.type)&&d.click&&ot(d,"input")&&Vr(d,"click"),!0},_default:function(u){var d=u.target;return Dn.test(d.type)&&d.click&&ot(d,"input")&&H.get(d,"click")||ot(d,"a")}},beforeunload:{postDispatch:function(u){void 0!==u.result&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},b.removeEvent=function(u,d,y){u.removeEventListener&&u.removeEventListener(d,y)},b.Event=function(u,d){if(!(this instanceof b.Event))return new b.Event(u,d);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||void 0===u.defaultPrevented&&!1===u.returnValue?de:Yr,this.target=u.target&&3===u.target.nodeType?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,d&&b.extend(this,d),this.timeStamp=u&&u.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Yr,isPropagationStopped:Yr,isImmediatePropagationStopped:Yr,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=de,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=de,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=de,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(u,d){b.event.special[u]={setup:function(){return Vr(this,u,Vi),!1},trigger:function(){return Vr(this,u),!0},_default:function(){return!0},delegateType:d}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,d){b.event.special[u]={delegateType:d,bindType:d,handle:function(y){var _,k=this,L=y.relatedTarget,U=y.handleObj;return(!L||L!==k&&!b.contains(k,L))&&(y.type=U.origType,_=U.handler.apply(this,arguments),y.type=d),_}}}),b.fn.extend({on:function(u,d,y,_){return at(this,u,d,y,_)},one:function(u,d,y,_){return at(this,u,d,y,_,1)},off:function(u,d,y){var _,k;if(u&&u.preventDefault&&u.handleObj)return _=u.handleObj,b(u.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if("object"==typeof u){for(k in u)this.off(k,d,u[k]);return this}return(!1===d||"function"==typeof d)&&(y=d,d=void 0),!1===y&&(y=Yr),this.each(function(){b.event.remove(this,u,y,d)})}});var io=/<script|<style|<link/i,oo=/checked\s*(?:[^=]|=\s*.checked.)/i,Bi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ir(u,d){return ot(u,"table")&&ot(11!==d.nodeType?d:d.firstChild,"tr")&&b(u).children("tbody")[0]||u}function Eo(u){return u.type=(null!==u.getAttribute("type"))+"/"+u.type,u}function mr(u){return"true/"===(u.type||"").slice(0,5)?u.type=u.type.slice(5):u.removeAttribute("type"),u}function ya(u,d){var y,_,k,U,re,ie;if(1===d.nodeType){if(H.hasData(u)&&(ie=H.get(u).events))for(k in H.remove(d,"handle events"),ie)for(y=0,_=ie[k].length;y<_;y++)b.event.add(d,k,ie[k][y]);q.hasData(u)&&(U=q.access(u),re=b.extend({},U),q.set(d,re))}}function xa(u,d){var y=d.nodeName.toLowerCase();"input"===y&&Dn.test(u.type)?d.checked=u.checked:("input"===y||"textarea"===y)&&(d.defaultValue=u.defaultValue)}function Tr(u,d,y,_){d=I(d);var k,L,U,re,ie,ye,Oe=0,$e=u.length,Ee=$e-1,Be=d[0],dt=ne(Be);if(dt||$e>1&&"string"==typeof Be&&!o.checkClone&&oo.test(Be))return u.each(function(Ht){var wt=u.eq(Ht);dt&&(d[0]=Be.call(this,Ht,wt.html())),Tr(wt,d,y,_)});if($e&&(L=(k=ro(d,u[0].ownerDocument,!1,u,_)).firstChild,1===k.childNodes.length&&(k=L),L||_)){for(re=(U=b.map($n(k,"script"),Eo)).length;Oe<$e;Oe++)ie=k,Oe!==Ee&&(ie=b.clone(ie,!0,!0),re&&b.merge(U,$n(ie,"script"))),y.call(u[Oe],ie,Oe);if(re)for(ye=U[U.length-1].ownerDocument,b.map(U,mr),Oe=0;Oe<re;Oe++)Fr.test((ie=U[Oe]).type||"")&&!H.access(ie,"globalEval")&&b.contains(ye,ie)&&(ie.src&&"module"!==(ie.type||"").toLowerCase()?b._evalUrl&&!ie.noModule&&b._evalUrl(ie.src,{nonce:ie.nonce||ie.getAttribute("nonce")},ye):he(ie.textContent.replace(Bi,""),ie,ye))}return u}function $o(u,d,y){for(var _,k=d?b.filter(d,u):u,L=0;null!=(_=k[L]);L++)!y&&1===_.nodeType&&b.cleanData($n(_)),_.parentNode&&(y&&Wt(_)&&wo($n(_,"script")),_.parentNode.removeChild(_));return u}b.extend({htmlPrefilter:function(u){return u},clone:function(u,d,y){var _,k,L,U,re=u.cloneNode(!0),ie=Wt(u);if(!(o.noCloneChecked||1!==u.nodeType&&11!==u.nodeType||b.isXMLDoc(u)))for(U=$n(re),_=0,k=(L=$n(u)).length;_<k;_++)xa(L[_],U[_]);if(d)if(y)for(L=L||$n(u),U=U||$n(re),_=0,k=L.length;_<k;_++)ya(L[_],U[_]);else ya(u,re);return(U=$n(re,"script")).length>0&&wo(U,!ie&&$n(u,"script")),re},cleanData:function(u){for(var d,y,_,k=b.event.special,L=0;void 0!==(y=u[L]);L++)if(Dt(y)){if(d=y[H.expando]){if(d.events)for(_ in d.events)k[_]?b.event.remove(y,_):b.removeEvent(y,_,d.handle);y[H.expando]=void 0}y[q.expando]&&(y[q.expando]=void 0)}}}),b.fn.extend({detach:function(u){return $o(this,u,!0)},remove:function(u){return $o(this,u)},text:function(u){return zt(this,function(d){return void 0===d?b.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=d)})},null,u,arguments.length)},append:function(){return Tr(this,arguments,function(u){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ir(this,u).appendChild(u)})},prepend:function(){return Tr(this,arguments,function(u){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=ir(this,u);d.insertBefore(u,d.firstChild)}})},before:function(){return Tr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Tr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,d=0;null!=(u=this[d]);d++)1===u.nodeType&&(b.cleanData($n(u,!1)),u.textContent="");return this},clone:function(u,d){return u=null!=u&&u,d=null==d?u:d,this.map(function(){return b.clone(this,u,d)})},html:function(u){return zt(this,function(d){var y=this[0]||{},_=0,k=this.length;if(void 0===d&&1===y.nodeType)return y.innerHTML;if("string"==typeof d&&!io.test(d)&&!Jn[(rr.exec(d)||["",""])[1].toLowerCase()]){d=b.htmlPrefilter(d);try{for(;_<k;_++)1===(y=this[_]||{}).nodeType&&(b.cleanData($n(y,!1)),y.innerHTML=d);y=0}catch(L){}}y&&this.empty().append(d)},null,u,arguments.length)},replaceWith:function(){var u=[];return Tr(this,arguments,function(d){var y=this.parentNode;b.inArray(this,u)<0&&(b.cleanData($n(this)),y&&y.replaceChild(d,this))},u)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,d){b.fn[u]=function(y){for(var _,k=[],L=b(y),U=L.length-1,re=0;re<=U;re++)_=re===U?this:this.clone(!0),b(L[re])[d](_),P.apply(k,_.get());return this.pushStack(k)}});var Hi=new RegExp("^("+yt+")(?!px)[a-z%]+$","i"),Yo=function(u){var d=u.ownerDocument.defaultView;return(!d||!d.opener)&&(d=p),d.getComputedStyle(u)},nt=function(u,d,y){var _,k,L={};for(k in d)L[k]=u.style[k],u.style[k]=d[k];for(k in _=y.call(u),d)u.style[k]=L[k];return _},Ga=new RegExp(Kt.join("|"),"i");function Si(u,d,y){var _,k,L,U,re=u.style;return(y=y||Yo(u))&&(""===(U=y.getPropertyValue(d)||y[d])&&!Wt(u)&&(U=b.style(u,d)),!o.pixelBoxStyles()&&Hi.test(U)&&Ga.test(d)&&(_=re.width,k=re.minWidth,L=re.maxWidth,re.minWidth=re.maxWidth=re.width=U,U=y.width,re.width=_,re.minWidth=k,re.maxWidth=L)),void 0!==U?U+"":U}function ba(u,d){return{get:function(){if(!u())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function u(){if(ye){ie.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ye.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",on.appendChild(ie).appendChild(ye);var Oe=p.getComputedStyle(ye);y="1%"!==Oe.top,re=12===d(Oe.marginLeft),ye.style.right="60%",L=36===d(Oe.right),_=36===d(Oe.width),ye.style.position="absolute",k=12===d(ye.offsetWidth/3),on.removeChild(ie),ye=null}}function d(Oe){return Math.round(parseFloat(Oe))}var y,_,k,L,U,re,ie=ce.createElement("div"),ye=ce.createElement("div");!ye.style||(ye.style.backgroundClip="content-box",ye.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===ye.style.backgroundClip,b.extend(o,{boxSizingReliable:function(){return u(),_},pixelBoxStyles:function(){return u(),L},pixelPosition:function(){return u(),y},reliableMarginLeft:function(){return u(),re},scrollboxSize:function(){return u(),k},reliableTrDimensions:function(){var Oe,$e,Ee,Be;return null==U&&(Oe=ce.createElement("table"),$e=ce.createElement("tr"),Ee=ce.createElement("div"),Oe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",$e.style.cssText="border:1px solid",$e.style.height="1px",Ee.style.height="9px",Ee.style.display="block",on.appendChild(Oe).appendChild($e).appendChild(Ee),Be=p.getComputedStyle($e),U=parseInt(Be.height,10)+parseInt(Be.borderTopWidth,10)+parseInt(Be.borderBottomWidth,10)===$e.offsetHeight,on.removeChild(Oe)),U}}))}();var _a=["Webkit","Moz","ms"],bn=ce.createElement("div").style,Po={};function Ti(u){return b.cssProps[u]||Po[u]||(u in bn?u:Po[u]=function ps(u){for(var d=u[0].toUpperCase()+u.slice(1),y=_a.length;y--;)if((u=_a[y]+d)in bn)return u}(u)||u)}var ji=/^(none|table(?!-c[ea]).+)/,Ei=/^--/,Ft={position:"absolute",visibility:"hidden",display:"block"},Br={letterSpacing:"0",fontWeight:"400"};function pt(u,d,y){var _=xt.exec(d);return _?Math.max(0,_[2]-(y||0))+(_[3]||"px"):d}function Er(u,d,y,_,k,L){var U="width"===d?1:0,re=0,ie=0;if(y===(_?"border":"content"))return 0;for(;U<4;U+=2)"margin"===y&&(ie+=b.css(u,y+Kt[U],!0,k)),_?("content"===y&&(ie-=b.css(u,"padding"+Kt[U],!0,k)),"margin"!==y&&(ie-=b.css(u,"border"+Kt[U]+"Width",!0,k))):(ie+=b.css(u,"padding"+Kt[U],!0,k),"padding"!==y?ie+=b.css(u,"border"+Kt[U]+"Width",!0,k):re+=b.css(u,"border"+Kt[U]+"Width",!0,k));return!_&&L>=0&&(ie+=Math.max(0,Math.ceil(u["offset"+d[0].toUpperCase()+d.slice(1)]-L-ie-re-.5))||0),ie}function di(u,d,y){var _=Yo(u),L=(!o.boxSizingReliable()||y)&&"border-box"===b.css(u,"boxSizing",!1,_),U=L,re=Si(u,d,_),ie="offset"+d[0].toUpperCase()+d.slice(1);if(Hi.test(re)){if(!y)return re;re="auto"}return(!o.boxSizingReliable()&&L||!o.reliableTrDimensions()&&ot(u,"tr")||"auto"===re||!parseFloat(re)&&"inline"===b.css(u,"display",!1,_))&&u.getClientRects().length&&(L="border-box"===b.css(u,"boxSizing",!1,_),(U=ie in u)&&(re=u[ie])),(re=parseFloat(re)||0)+Er(u,d,y||(L?"border":"content"),U,_,re)+"px"}function nn(u,d,y,_,k){return new nn.prototype.init(u,d,y,_,k)}b.extend({cssHooks:{opacity:{get:function(u,d){if(d){var y=Si(u,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(u,d,y,_){if(u&&3!==u.nodeType&&8!==u.nodeType&&u.style){var k,L,U,re=Gt(d),ie=Ei.test(d),ye=u.style;if(ie||(d=Ti(re)),U=b.cssHooks[d]||b.cssHooks[re],void 0===y)return U&&"get"in U&&void 0!==(k=U.get(u,!1,_))?k:ye[d];if("string"==(L=typeof y)&&(k=xt.exec(y))&&k[1]&&(y=Dr(u,d,k),L="number"),null==y||y!=y)return;"number"===L&&!ie&&(y+=k&&k[3]||(b.cssNumber[re]?"":"px")),!o.clearCloneStyle&&""===y&&0===d.indexOf("background")&&(ye[d]="inherit"),(!U||!("set"in U)||void 0!==(y=U.set(u,y,_)))&&(ie?ye.setProperty(d,y):ye[d]=y)}},css:function(u,d,y,_){var k,L,U,re=Gt(d);return Ei.test(d)||(d=Ti(re)),(U=b.cssHooks[d]||b.cssHooks[re])&&"get"in U&&(k=U.get(u,!0,y)),void 0===k&&(k=Si(u,d,_)),"normal"===k&&d in Br&&(k=Br[d]),""===y||y?(L=parseFloat(k),!0===y||isFinite(L)?L||0:k):k}}),b.each(["height","width"],function(u,d){b.cssHooks[d]={get:function(y,_,k){if(_)return!ji.test(b.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?di(y,d,k):nt(y,Ft,function(){return di(y,d,k)})},set:function(y,_,k){var L,U=Yo(y),re=!o.scrollboxSize()&&"absolute"===U.position,ye=(re||k)&&"border-box"===b.css(y,"boxSizing",!1,U),Oe=k?Er(y,d,k,ye,U):0;return ye&&re&&(Oe-=Math.ceil(y["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(U[d])-Er(y,d,"border",!1,U)-.5)),Oe&&(L=xt.exec(_))&&"px"!==(L[3]||"px")&&(y.style[d]=_,_=b.css(y,d)),pt(0,_,Oe)}}}),b.cssHooks.marginLeft=ba(o.reliableMarginLeft,function(u,d){if(d)return(parseFloat(Si(u,"marginLeft"))||u.getBoundingClientRect().left-nt(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(u,d){b.cssHooks[u+d]={expand:function(y){for(var _=0,k={},L="string"==typeof y?y.split(" "):[y];_<4;_++)k[u+Kt[_]+d]=L[_]||L[_-2]||L[0];return k}},"margin"!==u&&(b.cssHooks[u+d].set=pt)}),b.fn.extend({css:function(u,d){return zt(this,function(y,_,k){var L,U,re={},ie=0;if(Array.isArray(_)){for(L=Yo(y),U=_.length;ie<U;ie++)re[_[ie]]=b.css(y,_[ie],!1,L);return re}return void 0!==k?b.style(y,_,k):b.css(y,_)},u,d,arguments.length>1)}}),b.Tween=nn,(nn.prototype={constructor:nn,init:function(u,d,y,_,k,L){this.elem=u,this.prop=y,this.easing=k||b.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=_,this.unit=L||(b.cssNumber[y]?"":"px")},cur:function(){var u=nn.propHooks[this.prop];return u&&u.get?u.get(this):nn.propHooks._default.get(this)},run:function(u){var d,y=nn.propHooks[this.prop];return this.pos=d=this.options.duration?b.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):u,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):nn.propHooks._default.set(this),this}}).init.prototype=nn.prototype,(nn.propHooks={_default:{get:function(u){var d;return 1!==u.elem.nodeType||null!=u.elem[u.prop]&&null==u.elem.style[u.prop]?u.elem[u.prop]:(d=b.css(u.elem,u.prop,""))&&"auto"!==d?d:0},set:function(u){b.fx.step[u.prop]?b.fx.step[u.prop](u):1!==u.elem.nodeType||!b.cssHooks[u.prop]&&null==u.elem.style[Ti(u.prop)]?u.elem[u.prop]=u.now:b.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=nn.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},b.easing={linear:function(u){return u},swing:function(u){return.5-Math.cos(u*Math.PI)/2},_default:"swing"},b.fx=nn.prototype.init,b.fx.step={};var Pi,dr,Ca=/^(?:toggle|show|hide)$/,Ii=/queueHooks$/;function Ai(){dr&&(!1===ce.hidden&&p.requestAnimationFrame?p.requestAnimationFrame(Ai):p.setTimeout(Ai,b.fx.interval),b.fx.tick())}function hi(){return p.setTimeout(function(){Pi=void 0}),Pi=Date.now()}function Mi(u,d){var y,_=0,k={height:u};for(d=d?1:0;_<4;_+=2-d)k["margin"+(y=Kt[_])]=k["padding"+y]=u;return d&&(k.opacity=k.width=u),k}function Io(u,d,y){for(var _,k=(or.tweeners[d]||[]).concat(or.tweeners["*"]),L=0,U=k.length;L<U;L++)if(_=k[L].call(y,d,u))return _}function or(u,d,y){var _,k,L=0,U=or.prefilters.length,re=b.Deferred().always(function(){delete ie.elem}),ie=function(){if(k)return!1;for(var $e=Pi||hi(),Ee=Math.max(0,ye.startTime+ye.duration-$e),dt=1-(Ee/ye.duration||0),Ht=0,wt=ye.tweens.length;Ht<wt;Ht++)ye.tweens[Ht].run(dt);return re.notifyWith(u,[ye,dt,Ee]),dt<1&&wt?Ee:(wt||re.notifyWith(u,[ye,1,0]),re.resolveWith(u,[ye]),!1)},ye=re.promise({elem:u,props:b.extend({},d),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},y),originalProperties:d,originalOptions:y,startTime:Pi||hi(),duration:y.duration,tweens:[],createTween:function($e,Ee){var Be=b.Tween(u,ye.opts,$e,Ee,ye.opts.specialEasing[$e]||ye.opts.easing);return ye.tweens.push(Be),Be},stop:function($e){var Ee=0,Be=$e?ye.tweens.length:0;if(k)return this;for(k=!0;Ee<Be;Ee++)ye.tweens[Ee].run(1);return $e?(re.notifyWith(u,[ye,1,0]),re.resolveWith(u,[ye,$e])):re.rejectWith(u,[ye,$e]),this}}),Oe=ye.props;for(function yr(u,d){var y,_,k,L,U;for(y in u)if(k=d[_=Gt(y)],L=u[y],Array.isArray(L)&&(k=L[1],L=u[y]=L[0]),y!==_&&(u[_]=L,delete u[y]),(U=b.cssHooks[_])&&"expand"in U)for(y in L=U.expand(L),delete u[_],L)y in u||(u[y]=L[y],d[y]=k);else d[_]=k}(Oe,ye.opts.specialEasing);L<U;L++)if(_=or.prefilters[L].call(ye,u,Oe,ye.opts))return ne(_.stop)&&(b._queueHooks(ye.elem,ye.opts.queue).stop=_.stop.bind(_)),_;return b.map(Oe,Io,ye),ne(ye.opts.start)&&ye.opts.start.call(u,ye),ye.progress(ye.opts.progress).done(ye.opts.done,ye.opts.complete).fail(ye.opts.fail).always(ye.opts.always),b.fx.timer(b.extend(ie,{elem:u,anim:ye,queue:ye.opts.queue})),ye}b.Animation=b.extend(or,{tweeners:{"*":[function(u,d){var y=this.createTween(u,d);return Dr(y.elem,u,xt.exec(d),y),y}]},tweener:function(u,d){ne(u)?(d=u,u=["*"]):u=u.match(Wn);for(var y,_=0,k=u.length;_<k;_++)(or.tweeners[y=u[_]]=or.tweeners[y]||[]).unshift(d)},prefilters:[function Wa(u,d,y){var _,k,L,U,re,ie,ye,Oe,$e="width"in d||"height"in d,Ee=this,Be={},dt=u.style,Ht=u.nodeType&&kn(u),wt=H.get(u,"fxshow");for(_ in y.queue||(null==(U=b._queueHooks(u,"fx")).unqueued&&(U.unqueued=0,re=U.empty.fire,U.empty.fire=function(){U.unqueued||re()}),U.unqueued++,Ee.always(function(){Ee.always(function(){U.unqueued--,b.queue(u,"fx").length||U.empty.fire()})})),d)if(Ca.test(k=d[_])){if(delete d[_],L=L||"toggle"===k,k===(Ht?"hide":"show")){if("show"!==k||!wt||void 0===wt[_])continue;Ht=!0}Be[_]=wt&&wt[_]||b.style(u,_)}if((ie=!b.isEmptyObject(d))||!b.isEmptyObject(Be))for(_ in $e&&1===u.nodeType&&(y.overflow=[dt.overflow,dt.overflowX,dt.overflowY],null==(ye=wt&&wt.display)&&(ye=H.get(u,"display")),"none"===(Oe=b.css(u,"display"))&&(ye?Oe=ye:(Tn([u],!0),ye=u.style.display||ye,Oe=b.css(u,"display"),Tn([u]))),("inline"===Oe||"inline-block"===Oe&&null!=ye)&&"none"===b.css(u,"float")&&(ie||(Ee.done(function(){dt.display=ye}),null==ye&&(ye="none"===(Oe=dt.display)?"":Oe)),dt.display="inline-block")),y.overflow&&(dt.overflow="hidden",Ee.always(function(){dt.overflow=y.overflow[0],dt.overflowX=y.overflow[1],dt.overflowY=y.overflow[2]})),ie=!1,Be)ie||(wt?"hidden"in wt&&(Ht=wt.hidden):wt=H.access(u,"fxshow",{display:ye}),L&&(wt.hidden=!Ht),Ht&&Tn([u],!0),Ee.done(function(){for(_ in Ht||Tn([u]),H.remove(u,"fxshow"),Be)b.style(u,_,Be[_])})),ie=Io(Ht?wt[_]:0,_,Ee),_ in wt||(wt[_]=ie.start,Ht&&(ie.end=ie.start,ie.start=0))}],prefilter:function(u,d){d?or.prefilters.unshift(u):or.prefilters.push(u)}}),b.speed=function(u,d,y){var _=u&&"object"==typeof u?b.extend({},u):{complete:y||!y&&d||ne(u)&&u,duration:u,easing:y&&d||d&&!ne(d)&&d};return b.fx.off?_.duration=0:"number"!=typeof _.duration&&(_.duration=_.duration in b.fx.speeds?b.fx.speeds[_.duration]:b.fx.speeds._default),(null==_.queue||!0===_.queue)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){ne(_.old)&&_.old.call(this),_.queue&&b.dequeue(this,_.queue)},_},b.fn.extend({fadeTo:function(u,d,y,_){return this.filter(kn).css("opacity",0).show().end().animate({opacity:d},u,y,_)},animate:function(u,d,y,_){var k=b.isEmptyObject(u),L=b.speed(d,y,_),U=function(){var re=or(this,b.extend({},u),L);(k||H.get(this,"finish"))&&re.stop(!0)};return U.finish=U,k||!1===L.queue?this.each(U):this.queue(L.queue,U)},stop:function(u,d,y){var _=function(k){var L=k.stop;delete k.stop,L(y)};return"string"!=typeof u&&(y=d,d=u,u=void 0),d&&this.queue(u||"fx",[]),this.each(function(){var k=!0,L=null!=u&&u+"queueHooks",U=b.timers,re=H.get(this);if(L)re[L]&&re[L].stop&&_(re[L]);else for(L in re)re[L]&&re[L].stop&&Ii.test(L)&&_(re[L]);for(L=U.length;L--;)U[L].elem===this&&(null==u||U[L].queue===u)&&(U[L].anim.stop(y),k=!1,U.splice(L,1));(k||!y)&&b.dequeue(this,u)})},finish:function(u){return!1!==u&&(u=u||"fx"),this.each(function(){var d,y=H.get(this),_=y[u+"queue"],k=y[u+"queueHooks"],L=b.timers,U=_?_.length:0;for(y.finish=!0,b.queue(this,u,[]),k&&k.stop&&k.stop.call(this,!0),d=L.length;d--;)L[d].elem===this&&L[d].queue===u&&(L[d].anim.stop(!0),L.splice(d,1));for(d=0;d<U;d++)_[d]&&_[d].finish&&_[d].finish.call(this);delete y.finish})}}),b.each(["toggle","show","hide"],function(u,d){var y=b.fn[d];b.fn[d]=function(_,k,L){return null==_||"boolean"==typeof _?y.apply(this,arguments):this.animate(Mi(d,!0),_,k,L)}}),b.each({slideDown:Mi("show"),slideUp:Mi("hide"),slideToggle:Mi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,d){b.fn[u]=function(y,_,k){return this.animate(d,y,_,k)}}),b.timers=[],b.fx.tick=function(){var u,d=0,y=b.timers;for(Pi=Date.now();d<y.length;d++)!(u=y[d])()&&y[d]===u&&y.splice(d--,1);y.length||b.fx.stop(),Pi=void 0},b.fx.timer=function(u){b.timers.push(u),b.fx.start()},b.fx.interval=13,b.fx.start=function(){dr||(dr=!0,Ai())},b.fx.stop=function(){dr=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(u,d){return u=b.fx&&b.fx.speeds[u]||u,this.queue(d=d||"fx",function(y,_){var k=p.setTimeout(y,u);_.stop=function(){p.clearTimeout(k)}})},function(){var u=ce.createElement("input"),y=ce.createElement("select").appendChild(ce.createElement("option"));u.type="checkbox",o.checkOn=""!==u.value,o.optSelected=y.selected,(u=ce.createElement("input")).value="t",u.type="radio",o.radioValue="t"===u.value}();var ar,Mr=b.expr.attrHandle;b.fn.extend({attr:function(u,d){return zt(this,b.attr,u,d,arguments.length>1)},removeAttr:function(u){return this.each(function(){b.removeAttr(this,u)})}}),b.extend({attr:function(u,d,y){var _,k,L=u.nodeType;if(3!==L&&8!==L&&2!==L)return void 0===u.getAttribute?b.prop(u,d,y):((1!==L||!b.isXMLDoc(u))&&(k=b.attrHooks[d.toLowerCase()]||(b.expr.match.bool.test(d)?ar:void 0)),void 0!==y?null===y?void b.removeAttr(u,d):k&&"set"in k&&void 0!==(_=k.set(u,y,d))?_:(u.setAttribute(d,y+""),y):k&&"get"in k&&null!==(_=k.get(u,d))?_:null==(_=b.find.attr(u,d))?void 0:_)},attrHooks:{type:{set:function(u,d){if(!o.radioValue&&"radio"===d&&ot(u,"input")){var y=u.value;return u.setAttribute("type",d),y&&(u.value=y),d}}}},removeAttr:function(u,d){var y,_=0,k=d&&d.match(Wn);if(k&&1===u.nodeType)for(;y=k[_++];)u.removeAttribute(y)}}),ar={set:function(u,d,y){return!1===d?b.removeAttr(u,y):u.setAttribute(y,y),y}},b.each(b.expr.match.bool.source.match(/\w+/g),function(u,d){var y=Mr[d]||b.find.attr;Mr[d]=function(_,k,L){var U,re,ie=k.toLowerCase();return L||(re=Mr[ie],Mr[ie]=U,U=null!=y(_,k,L)?ie:null,Mr[ie]=re),U}});var Xo=/^(?:input|select|textarea|button)$/i,Ao=/^(?:a|area)$/i;function Xr(u){return(u.match(Wn)||[]).join(" ")}function Pr(u){return u.getAttribute&&u.getAttribute("class")||""}function Oi(u){return Array.isArray(u)?u:"string"==typeof u&&u.match(Wn)||[]}b.fn.extend({prop:function(u,d){return zt(this,b.prop,u,d,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[b.propFix[u]||u]})}}),b.extend({prop:function(u,d,y){var _,k,L=u.nodeType;if(3!==L&&8!==L&&2!==L)return(1!==L||!b.isXMLDoc(u))&&(k=b.propHooks[d=b.propFix[d]||d]),void 0!==y?k&&"set"in k&&void 0!==(_=k.set(u,y,d))?_:u[d]=y:k&&"get"in k&&null!==(_=k.get(u,d))?_:u[d]},propHooks:{tabIndex:{get:function(u){var d=b.find.attr(u,"tabindex");return d?parseInt(d,10):Xo.test(u.nodeName)||Ao.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),o.optSelected||(b.propHooks.selected={get:function(u){return null},set:function(u){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(u){var d,y,_,k,L,U,re,ie=0;if(ne(u))return this.each(function(ye){b(this).addClass(u.call(this,ye,Pr(this)))});if((d=Oi(u)).length)for(;y=this[ie++];)if(k=Pr(y),_=1===y.nodeType&&" "+Xr(k)+" "){for(U=0;L=d[U++];)_.indexOf(" "+L+" ")<0&&(_+=L+" ");k!==(re=Xr(_))&&y.setAttribute("class",re)}return this},removeClass:function(u){var d,y,_,k,L,U,re,ie=0;if(ne(u))return this.each(function(ye){b(this).removeClass(u.call(this,ye,Pr(this)))});if(!arguments.length)return this.attr("class","");if((d=Oi(u)).length)for(;y=this[ie++];)if(k=Pr(y),_=1===y.nodeType&&" "+Xr(k)+" "){for(U=0;L=d[U++];)for(;_.indexOf(" "+L+" ")>-1;)_=_.replace(" "+L+" "," ");k!==(re=Xr(_))&&y.setAttribute("class",re)}return this},toggleClass:function(u,d){var y=typeof u,_="string"===y||Array.isArray(u);return"boolean"==typeof d&&_?d?this.addClass(u):this.removeClass(u):ne(u)?this.each(function(k){b(this).toggleClass(u.call(this,k,Pr(this),d),d)}):this.each(function(){var k,L,U,re;if(_)for(L=0,U=b(this),re=Oi(u);k=re[L++];)U.hasClass(k)?U.removeClass(k):U.addClass(k);else(void 0===u||"boolean"===y)&&((k=Pr(this))&&H.set(this,"__className__",k),this.setAttribute&&this.setAttribute("class",k||!1===u?"":H.get(this,"__className__")||""))})},hasClass:function(u){var d,y,_=0;for(d=" "+u+" ";y=this[_++];)if(1===y.nodeType&&(" "+Xr(Pr(y))+" ").indexOf(d)>-1)return!0;return!1}});var ao=/\r/g;b.fn.extend({val:function(u){var d,y,_,k=this[0];return arguments.length?(_=ne(u),this.each(function(L){var U;1===this.nodeType&&(null==(U=_?u.call(this,L,b(this).val()):u)?U="":"number"==typeof U?U+="":Array.isArray(U)&&(U=b.map(U,function(re){return null==re?"":re+""})),(!(d=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])||!("set"in d)||void 0===d.set(this,U,"value"))&&(this.value=U))})):k?(d=b.valHooks[k.type]||b.valHooks[k.nodeName.toLowerCase()])&&"get"in d&&void 0!==(y=d.get(k,"value"))?y:"string"==typeof(y=k.value)?y.replace(ao,""):null==y?"":y:void 0}}),b.extend({valHooks:{option:{get:function(u){var d=b.find.attr(u,"value");return null!=d?d:Xr(b.text(u))}},select:{get:function(u){var d,y,_,k=u.options,L=u.selectedIndex,U="select-one"===u.type,re=U?null:[],ie=U?L+1:k.length;for(_=L<0?ie:U?L:0;_<ie;_++)if(((y=k[_]).selected||_===L)&&!y.disabled&&(!y.parentNode.disabled||!ot(y.parentNode,"optgroup"))){if(d=b(y).val(),U)return d;re.push(d)}return re},set:function(u,d){for(var y,_,k=u.options,L=b.makeArray(d),U=k.length;U--;)((_=k[U]).selected=b.inArray(b.valHooks.option.get(_),L)>-1)&&(y=!0);return y||(u.selectedIndex=-1),L}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(u,d){if(Array.isArray(d))return u.checked=b.inArray(b(u).val(),d)>-1}},o.checkOn||(b.valHooks[this].get=function(u){return null===u.getAttribute("value")?"on":u.value})}),o.focusin="onfocusin"in p;var Or=/^(?:focusinfocus|focusoutblur)$/,ki=function(u){u.stopPropagation()};b.extend(b.event,{trigger:function(u,d,y,_){var k,L,U,re,ie,ye,Oe,$e,Ee=[y||ce],Be=G.call(u,"type")?u.type:u,dt=G.call(u,"namespace")?u.namespace.split("."):[];if(L=$e=U=y=y||ce,3!==y.nodeType&&8!==y.nodeType&&!Or.test(Be+b.event.triggered)&&(Be.indexOf(".")>-1&&(dt=Be.split("."),Be=dt.shift(),dt.sort()),ie=Be.indexOf(":")<0&&"on"+Be,(u=u[b.expando]?u:new b.Event(Be,"object"==typeof u&&u)).isTrigger=_?2:3,u.namespace=dt.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+dt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=y),d=null==d?[u]:b.makeArray(d,[u]),Oe=b.event.special[Be]||{},_||!Oe.trigger||!1!==Oe.trigger.apply(y,d))){if(!_&&!Oe.noBubble&&!fe(y)){for(Or.test((re=Oe.delegateType||Be)+Be)||(L=L.parentNode);L;L=L.parentNode)Ee.push(L),U=L;U===(y.ownerDocument||ce)&&Ee.push(U.defaultView||U.parentWindow||p)}for(k=0;(L=Ee[k++])&&!u.isPropagationStopped();)$e=L,u.type=k>1?re:Oe.bindType||Be,(ye=(H.get(L,"events")||Object.create(null))[u.type]&&H.get(L,"handle"))&&ye.apply(L,d),(ye=ie&&L[ie])&&ye.apply&&Dt(L)&&(u.result=ye.apply(L,d),!1===u.result&&u.preventDefault());return u.type=Be,!_&&!u.isDefaultPrevented()&&(!Oe._default||!1===Oe._default.apply(Ee.pop(),d))&&Dt(y)&&ie&&ne(y[Be])&&!fe(y)&&((U=y[ie])&&(y[ie]=null),b.event.triggered=Be,u.isPropagationStopped()&&$e.addEventListener(Be,ki),y[Be](),u.isPropagationStopped()&&$e.removeEventListener(Be,ki),b.event.triggered=void 0,U&&(y[ie]=U)),u.result}},simulate:function(u,d,y){var _=b.extend(new b.Event,y,{type:u,isSimulated:!0});b.event.trigger(_,null,d)}}),b.fn.extend({trigger:function(u,d){return this.each(function(){b.event.trigger(u,d,this)})},triggerHandler:function(u,d){var y=this[0];if(y)return b.event.trigger(u,d,y,!0)}}),o.focusin||b.each({focus:"focusin",blur:"focusout"},function(u,d){var y=function(_){b.event.simulate(d,_.target,b.event.fix(_))};b.event.special[d]={setup:function(){var _=this.ownerDocument||this.document||this,k=H.access(_,d);k||_.addEventListener(u,y,!0),H.access(_,d,(k||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,k=H.access(_,d)-1;k?H.access(_,d,k):(_.removeEventListener(u,y,!0),H.remove(_,d))}}});var ni=p.location,zi={guid:Date.now()},Ko=/\?/;b.parseXML=function(u){var d,y;if(!u||"string"!=typeof u)return null;try{d=(new p.DOMParser).parseFromString(u,"text/xml")}catch(_){}return y=d&&d.getElementsByTagName("parsererror")[0],(!d||y)&&b.error("Invalid XML: "+(y?b.map(y.childNodes,function(_){return _.textContent}).join("\n"):u)),d};var Jo=/\[\]$/,Mo=/\r?\n/g,so=/^(?:submit|button|image|reset|file)$/i,wa=/^(?:input|select|textarea|keygen)/i;function Qo(u,d,y,_){var k;if(Array.isArray(d))b.each(d,function(L,U){y||Jo.test(u)?_(u,U):Qo(u+"["+("object"==typeof U&&null!=U?L:"")+"]",U,y,_)});else if(y||"object"!==Ce(d))_(u,d);else for(k in d)Qo(u+"["+k+"]",d[k],y,_)}b.param=function(u,d){var y,_=[],k=function(L,U){var re=ne(U)?U():U;_[_.length]=encodeURIComponent(L)+"="+encodeURIComponent(null==re?"":re)};if(null==u)return"";if(Array.isArray(u)||u.jquery&&!b.isPlainObject(u))b.each(u,function(){k(this.name,this.value)});else for(y in u)Qo(y,u[y],d,k);return _.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=b.prop(this,"elements");return u?b.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!b(this).is(":disabled")&&wa.test(this.nodeName)&&!so.test(u)&&(this.checked||!Dn.test(u))}).map(function(u,d){var y=b(this).val();return null==y?null:Array.isArray(y)?b.map(y,function(_){return{name:d.name,value:_.replace(Mo,"\r\n")}}):{name:d.name,value:y.replace(Mo,"\r\n")}}).get()}});var Sa=/%20/g,Zo=/#.*$/,Ta=/([?&])_=[^&]*/,Ea=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pa=/^(?:GET|HEAD)$/,qo=/^\/\//,ri={},uo={},Ya="*/".concat("*"),Li=ce.createElement("a");function pi(u){return function(d,y){"string"!=typeof d&&(y=d,d="*");var _,k=0,L=d.toLowerCase().match(Wn)||[];if(ne(y))for(;_=L[k++];)"+"===_[0]?(_=_.slice(1)||"*",(u[_]=u[_]||[]).unshift(y)):(u[_]=u[_]||[]).push(y)}}function ea(u,d,y,_){var k={},L=u===uo;function U(re){var ie;return k[re]=!0,b.each(u[re]||[],function(ye,Oe){var $e=Oe(d,y,_);return"string"!=typeof $e||L||k[$e]?L?!(ie=$e):void 0:(d.dataTypes.unshift($e),U($e),!1)}),ie}return U(d.dataTypes[0])||!k["*"]&&U("*")}function Cn(u,d){var y,_,k=b.ajaxSettings.flatOptions||{};for(y in d)void 0!==d[y]&&((k[y]?u:_||(_={}))[y]=d[y]);return _&&b.extend(!0,u,_),u}Li.href=ni.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ni.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ni.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ya,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,d){return d?Cn(Cn(u,b.ajaxSettings),d):Cn(b.ajaxSettings,u)},ajaxPrefilter:pi(ri),ajaxTransport:pi(uo),ajax:function(u,d){"object"==typeof u&&(d=u,u=void 0);var y,_,k,L,U,re,ie,ye,Oe,$e,Ee=b.ajaxSetup({},d=d||{}),Be=Ee.context||Ee,dt=Ee.context&&(Be.nodeType||Be.jquery)?b(Be):b.event,Ht=b.Deferred(),wt=b.Callbacks("once memory"),Ln=Ee.statusCode||{},jn={},Hr={},St="canceled",It={readyState:0,getResponseHeader:function(un){var Fn;if(ie){if(!L)for(L={};Fn=Ea.exec(k);)L[Fn[1].toLowerCase()+" "]=(L[Fn[1].toLowerCase()+" "]||[]).concat(Fn[2]);Fn=L[un.toLowerCase()+" "]}return null==Fn?null:Fn.join(", ")},getAllResponseHeaders:function(){return ie?k:null},setRequestHeader:function(un,Fn){return null==ie&&(un=Hr[un.toLowerCase()]=Hr[un.toLowerCase()]||un,jn[un]=Fn),this},overrideMimeType:function(un){return null==ie&&(Ee.mimeType=un),this},statusCode:function(un){var Fn;if(un)if(ie)It.always(un[It.status]);else for(Fn in un)Ln[Fn]=[Ln[Fn],un[Fn]];return this},abort:function(un){var Fn=un||St;return y&&y.abort(Fn),xr(0,Fn),this}};if(Ht.promise(It),Ee.url=((u||Ee.url||ni.href)+"").replace(qo,ni.protocol+"//"),Ee.type=d.method||d.type||Ee.method||Ee.type,Ee.dataTypes=(Ee.dataType||"*").toLowerCase().match(Wn)||[""],null==Ee.crossDomain){re=ce.createElement("a");try{re.href=Ee.url,re.href=re.href,Ee.crossDomain=Li.protocol+"//"+Li.host!=re.protocol+"//"+re.host}catch(un){Ee.crossDomain=!0}}if(Ee.data&&Ee.processData&&"string"!=typeof Ee.data&&(Ee.data=b.param(Ee.data,Ee.traditional)),ea(ri,Ee,d,It),ie)return It;for(Oe in(ye=b.event&&Ee.global)&&0==b.active++&&b.event.trigger("ajaxStart"),Ee.type=Ee.type.toUpperCase(),Ee.hasContent=!Pa.test(Ee.type),_=Ee.url.replace(Zo,""),Ee.hasContent?Ee.data&&Ee.processData&&0===(Ee.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Ee.data=Ee.data.replace(Sa,"+")):($e=Ee.url.slice(_.length),Ee.data&&(Ee.processData||"string"==typeof Ee.data)&&(_+=(Ko.test(_)?"&":"?")+Ee.data,delete Ee.data),!1===Ee.cache&&(_=_.replace(Ta,"$1"),$e=(Ko.test(_)?"&":"?")+"_="+zi.guid+++$e),Ee.url=_+$e),Ee.ifModified&&(b.lastModified[_]&&It.setRequestHeader("If-Modified-Since",b.lastModified[_]),b.etag[_]&&It.setRequestHeader("If-None-Match",b.etag[_])),(Ee.data&&Ee.hasContent&&!1!==Ee.contentType||d.contentType)&&It.setRequestHeader("Content-Type",Ee.contentType),It.setRequestHeader("Accept",Ee.dataTypes[0]&&Ee.accepts[Ee.dataTypes[0]]?Ee.accepts[Ee.dataTypes[0]]+("*"!==Ee.dataTypes[0]?", "+Ya+"; q=0.01":""):Ee.accepts["*"]),Ee.headers)It.setRequestHeader(Oe,Ee.headers[Oe]);if(Ee.beforeSend&&(!1===Ee.beforeSend.call(Be,It,Ee)||ie))return It.abort();if(St="abort",wt.add(Ee.complete),It.done(Ee.success),It.fail(Ee.error),y=ea(uo,Ee,d,It)){if(It.readyState=1,ye&&dt.trigger("ajaxSend",[It,Ee]),ie)return It;Ee.async&&Ee.timeout>0&&(U=p.setTimeout(function(){It.abort("timeout")},Ee.timeout));try{ie=!1,y.send(jn,xr)}catch(un){if(ie)throw un;xr(-1,un)}}else xr(-1,"No Transport");function xr(un,Fn,sr,gs){var ii,Oo,Ui,hr,bt,Vn=Fn;ie||(ie=!0,U&&p.clearTimeout(U),y=void 0,k=gs||"",It.readyState=un>0?4:0,ii=un>=200&&un<300||304===un,sr&&(hr=function Pe(u,d,y){for(var _,k,L,U,re=u.contents,ie=u.dataTypes;"*"===ie[0];)ie.shift(),void 0===_&&(_=u.mimeType||d.getResponseHeader("Content-Type"));if(_)for(k in re)if(re[k]&&re[k].test(_)){ie.unshift(k);break}if(ie[0]in y)L=ie[0];else{for(k in y){if(!ie[0]||u.converters[k+" "+ie[0]]){L=k;break}U||(U=k)}L=L||U}if(L)return L!==ie[0]&&ie.unshift(L),y[L]}(Ee,It,sr)),!ii&&b.inArray("script",Ee.dataTypes)>-1&&b.inArray("json",Ee.dataTypes)<0&&(Ee.converters["text script"]=function(){}),hr=function kr(u,d,y,_){var k,L,U,re,ie,ye={},Oe=u.dataTypes.slice();if(Oe[1])for(U in u.converters)ye[U.toLowerCase()]=u.converters[U];for(L=Oe.shift();L;)if(u.responseFields[L]&&(y[u.responseFields[L]]=d),!ie&&_&&u.dataFilter&&(d=u.dataFilter(d,u.dataType)),ie=L,L=Oe.shift())if("*"===L)L=ie;else if("*"!==ie&&ie!==L){if(!(U=ye[ie+" "+L]||ye["* "+L]))for(k in ye)if((re=k.split(" "))[1]===L&&(U=ye[ie+" "+re[0]]||ye["* "+re[0]])){!0===U?U=ye[k]:!0!==ye[k]&&(L=re[0],Oe.unshift(re[1]));break}if(!0!==U)if(U&&u.throws)d=U(d);else try{d=U(d)}catch($e){return{state:"parsererror",error:U?$e:"No conversion from "+ie+" to "+L}}}return{state:"success",data:d}}(Ee,hr,It,ii),ii?(Ee.ifModified&&((bt=It.getResponseHeader("Last-Modified"))&&(b.lastModified[_]=bt),(bt=It.getResponseHeader("etag"))&&(b.etag[_]=bt)),204===un||"HEAD"===Ee.type?Vn="nocontent":304===un?Vn="notmodified":(Vn=hr.state,Oo=hr.data,ii=!(Ui=hr.error))):(Ui=Vn,(un||!Vn)&&(Vn="error",un<0&&(un=0))),It.status=un,It.statusText=(Fn||Vn)+"",ii?Ht.resolveWith(Be,[Oo,Vn,It]):Ht.rejectWith(Be,[It,Vn,Ui]),It.statusCode(Ln),Ln=void 0,ye&&dt.trigger(ii?"ajaxSuccess":"ajaxError",[It,Ee,ii?Oo:Ui]),wt.fireWith(Be,[It,Vn]),ye&&(dt.trigger("ajaxComplete",[It,Ee]),--b.active||b.event.trigger("ajaxStop")))}return It},getJSON:function(u,d,y){return b.get(u,d,y,"json")},getScript:function(u,d){return b.get(u,void 0,d,"script")}}),b.each(["get","post"],function(u,d){b[d]=function(y,_,k,L){return ne(_)&&(L=L||k,k=_,_=void 0),b.ajax(b.extend({url:y,type:d,dataType:L,data:_,success:k},b.isPlainObject(y)&&y))}}),b.ajaxPrefilter(function(u){var d;for(d in u.headers)"content-type"===d.toLowerCase()&&(u.contentType=u.headers[d]||"")}),b._evalUrl=function(u,d,y){return b.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){b.globalEval(_,d,y)}})},b.fn.extend({wrapAll:function(u){var d;return this[0]&&(ne(u)&&(u=u.call(this[0])),d=b(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(u){return ne(u)?this.each(function(d){b(this).wrapInner(u.call(this,d))}):this.each(function(){var d=b(this),y=d.contents();y.length?y.wrapAll(u):d.append(u)})},wrap:function(u){var d=ne(u);return this.each(function(y){b(this).wrapAll(d?u.call(this,y):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(u){return!b.expr.pseudos.visible(u)},b.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new p.XMLHttpRequest}catch(u){}};var Lr={0:200,1223:204},R=b.ajaxSettings.xhr();o.cors=!!R&&"withCredentials"in R,o.ajax=R=!!R,b.ajaxTransport(function(u){var d,y;if(o.cors||R&&!u.crossDomain)return{send:function(_,k){var L,U=u.xhr();if(U.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(L in u.xhrFields)U[L]=u.xhrFields[L];for(L in u.mimeType&&U.overrideMimeType&&U.overrideMimeType(u.mimeType),!u.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest"),_)U.setRequestHeader(L,_[L]);d=function(re){return function(){d&&(d=y=U.onload=U.onerror=U.onabort=U.ontimeout=U.onreadystatechange=null,"abort"===re?U.abort():"error"===re?"number"!=typeof U.status?k(0,"error"):k(U.status,U.statusText):k(Lr[U.status]||U.status,U.statusText,"text"!==(U.responseType||"text")||"string"!=typeof U.responseText?{binary:U.response}:{text:U.responseText},U.getAllResponseHeaders()))}},U.onload=d(),y=U.onerror=U.ontimeout=d("error"),void 0!==U.onabort?U.onabort=y:U.onreadystatechange=function(){4===U.readyState&&p.setTimeout(function(){d&&y()})},d=d("abort");try{U.send(u.hasContent&&u.data||null)}catch(re){if(d)throw re}},abort:function(){d&&d()}}}),b.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return b.globalEval(u),u}}}),b.ajaxPrefilter("script",function(u){void 0===u.cache&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),b.ajaxTransport("script",function(u){var d,y;if(u.crossDomain||u.scriptAttrs)return{send:function(_,k){d=b("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",y=function(L){d.remove(),y=null,L&&k("error"===L.type?404:200,L.type)}),ce.head.appendChild(d[0])},abort:function(){y&&y()}}});var u,W=[],ee=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=W.pop()||b.expando+"_"+zi.guid++;return this[u]=!0,u}}),b.ajaxPrefilter("json jsonp",function(u,d,y){var _,k,L,U=!1!==u.jsonp&&(ee.test(u.url)?"url":"string"==typeof u.data&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&ee.test(u.data)&&"data");if(U||"jsonp"===u.dataTypes[0])return _=u.jsonpCallback=ne(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,U?u[U]=u[U].replace(ee,"$1"+_):!1!==u.jsonp&&(u.url+=(Ko.test(u.url)?"&":"?")+u.jsonp+"="+_),u.converters["script json"]=function(){return L||b.error(_+" was not called"),L[0]},u.dataTypes[0]="json",k=p[_],p[_]=function(){L=arguments},y.always(function(){void 0===k?b(p).removeProp(_):p[_]=k,u[_]&&(u.jsonpCallback=d.jsonpCallback,W.push(_)),L&&ne(k)&&k(L[0]),L=k=void 0}),"script"}),o.createHTMLDocument=((u=ce.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===u.childNodes.length),b.parseHTML=function(u,d,y){return"string"!=typeof u?[]:("boolean"==typeof d&&(y=d,d=!1),d||(o.createHTMLDocument?((_=(d=ce.implementation.createHTMLDocument("")).createElement("base")).href=ce.location.href,d.head.appendChild(_)):d=ce),L=!y&&[],(k=vt.exec(u))?[d.createElement(k[1])]:(k=ro([u],d,L),L&&L.length&&b(L).remove(),b.merge([],k.childNodes)));var _,k,L},b.fn.load=function(u,d,y){var _,k,L,U=this,re=u.indexOf(" ");return re>-1&&(_=Xr(u.slice(re)),u=u.slice(0,re)),ne(d)?(y=d,d=void 0):d&&"object"==typeof d&&(k="POST"),U.length>0&&b.ajax({url:u,type:k||"GET",dataType:"html",data:d}).done(function(ie){L=arguments,U.html(_?b("<div>").append(b.parseHTML(ie)).find(_):ie)}).always(y&&function(ie,ye){U.each(function(){y.apply(this,L||[ie.responseText,ye,ie])})}),this},b.expr.pseudos.animated=function(u){return b.grep(b.timers,function(d){return u===d.elem}).length},b.offset={setOffset:function(u,d,y){var _,k,L,U,re,ie,Oe=b.css(u,"position"),$e=b(u),Ee={};"static"===Oe&&(u.style.position="relative"),re=$e.offset(),L=b.css(u,"top"),ie=b.css(u,"left"),("absolute"===Oe||"fixed"===Oe)&&(L+ie).indexOf("auto")>-1?(U=(_=$e.position()).top,k=_.left):(U=parseFloat(L)||0,k=parseFloat(ie)||0),ne(d)&&(d=d.call(u,y,b.extend({},re))),null!=d.top&&(Ee.top=d.top-re.top+U),null!=d.left&&(Ee.left=d.left-re.left+k),"using"in d?d.using.call(u,Ee):$e.css(Ee)}},b.fn.extend({offset:function(u){if(arguments.length)return void 0===u?this:this.each(function(k){b.offset.setOffset(this,u,k)});var d,y,_=this[0];return _?_.getClientRects().length?{top:(d=_.getBoundingClientRect()).top+(y=_.ownerDocument.defaultView).pageYOffset,left:d.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var u,d,y,_=this[0],k={top:0,left:0};if("fixed"===b.css(_,"position"))d=_.getBoundingClientRect();else{for(d=this.offset(),y=_.ownerDocument,u=_.offsetParent||y.documentElement;u&&(u===y.body||u===y.documentElement)&&"static"===b.css(u,"position");)u=u.parentNode;u&&u!==_&&1===u.nodeType&&((k=b(u).offset()).top+=b.css(u,"borderTopWidth",!0),k.left+=b.css(u,"borderLeftWidth",!0))}return{top:d.top-k.top-b.css(_,"marginTop",!0),left:d.left-k.left-b.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&"static"===b.css(u,"position");)u=u.offsetParent;return u||on})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,d){var y="pageYOffset"===d;b.fn[u]=function(_){return zt(this,function(k,L,U){var re;if(fe(k)?re=k:9===k.nodeType&&(re=k.defaultView),void 0===U)return re?re[d]:k[L];re?re.scrollTo(y?re.pageXOffset:U,y?U:re.pageYOffset):k[L]=U},u,_,arguments.length)}}),b.each(["top","left"],function(u,d){b.cssHooks[d]=ba(o.pixelPosition,function(y,_){if(_)return _=Si(y,d),Hi.test(_)?b(y).position()[d]+"px":_})}),b.each({Height:"height",Width:"width"},function(u,d){b.each({padding:"inner"+u,content:d,"":"outer"+u},function(y,_){b.fn[_]=function(k,L){var U=arguments.length&&(y||"boolean"!=typeof k),re=y||(!0===k||!0===L?"margin":"border");return zt(this,function(ie,ye,Oe){var $e;return fe(ie)?0===_.indexOf("outer")?ie["inner"+u]:ie.document.documentElement["client"+u]:9===ie.nodeType?($e=ie.documentElement,Math.max(ie.body["scroll"+u],$e["scroll"+u],ie.body["offset"+u],$e["offset"+u],$e["client"+u])):void 0===Oe?b.css(ie,ye,re):b.style(ie,ye,Oe,re)},d,U?k:void 0,U)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,d){b.fn[d]=function(y){return this.on(d,y)}}),b.fn.extend({bind:function(u,d,y){return this.on(u,null,d,y)},unbind:function(u,d){return this.off(u,null,d)},delegate:function(u,d,y,_){return this.on(d,u,y,_)},undelegate:function(u,d,y){return 1===arguments.length?this.off(u,"**"):this.off(d,u||"**",y)},hover:function(u,d){return this.mouseenter(u).mouseleave(d||u)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,d){b.fn[d]=function(y,_){return arguments.length>0?this.on(d,null,y,_):this.trigger(d)}});var le=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;b.proxy=function(u,d){var y,_,k;if("string"==typeof d&&(y=u[d],d=u,u=y),ne(u))return _=T.call(arguments,2),k=function(){return u.apply(d||this,_.concat(T.call(arguments)))},k.guid=u.guid=u.guid||b.guid++,k},b.holdReady=function(u){u?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=ot,b.isFunction=ne,b.isWindow=fe,b.camelCase=Gt,b.type=Ce,b.now=Date.now,b.isNumeric=function(u){var d=b.type(u);return("number"===d||"string"===d)&&!isNaN(u-parseFloat(u))},b.trim=function(u){return null==u?"":(u+"").replace(le,"")},void 0!==(h=function(){return b}.apply(j,[]))&&(S.exports=h);var Te=p.jQuery,be=p.$;return b.noConflict=function(u){return p.$===b&&(p.$=be),u&&p.jQuery===b&&(p.jQuery=Te),b},void 0===C&&(p.jQuery=p.$=b),b})},37244:(S,j,c)=>{var C=c(53436)(c(12119),"DataView");S.exports=C},54994:(S,j,c)=>{var h=c(64312),p=c(46421),C=c(15764),w=c(18685),x=c(26676);function T(I){var P=-1,N=null==I?0:I.length;for(this.clear();++P<N;){var F=I[P];this.set(F[0],F[1])}}T.prototype.clear=h,T.prototype.delete=p,T.prototype.get=C,T.prototype.has=w,T.prototype.set=x,S.exports=T},9215:(S,j,c)=>{var h=c(41840),p=c(34378),C=c(54981),w=c(67343),x=c(98895);function T(I){var P=-1,N=null==I?0:I.length;for(this.clear();++P<N;){var F=I[P];this.set(F[0],F[1])}}T.prototype.clear=h,T.prototype.delete=p,T.prototype.get=C,T.prototype.has=w,T.prototype.set=x,S.exports=T},51501:(S,j,c)=>{var C=c(53436)(c(12119),"Map");S.exports=C},99850:(S,j,c)=>{var h=c(10638),p=c(11184),C=c(70866),w=c(43771),x=c(51772);function T(I){var P=-1,N=null==I?0:I.length;for(this.clear();++P<N;){var F=I[P];this.set(F[0],F[1])}}T.prototype.clear=h,T.prototype.delete=p,T.prototype.get=C,T.prototype.has=w,T.prototype.set=x,S.exports=T},44267:(S,j,c)=>{var C=c(53436)(c(12119),"Promise");S.exports=C},46323:(S,j,c)=>{var C=c(53436)(c(12119),"Set");S.exports=C},58849:(S,j,c)=>{var h=c(99850),p=c(4600),C=c(31387);function w(x){var T=-1,I=null==x?0:x.length;for(this.__data__=new h;++T<I;)this.add(x[T])}w.prototype.add=w.prototype.push=p,w.prototype.has=C,S.exports=w},2858:(S,j,c)=>{var h=c(9215),p=c(13720),C=c(64410),w=c(45576),x=c(22247),T=c(41585);function I(P){var N=this.__data__=new h(P);this.size=N.size}I.prototype.clear=p,I.prototype.delete=C,I.prototype.get=w,I.prototype.has=x,I.prototype.set=T,S.exports=I},60443:(S,j,c)=>{var h=c(12119);S.exports=h.Symbol},73457:(S,j,c)=>{var h=c(12119);S.exports=h.Uint8Array},24243:(S,j,c)=>{var C=c(53436)(c(12119),"WeakMap");S.exports=C},26999:S=>{S.exports=function j(c,h,p){switch(p.length){case 0:return c.call(h);case 1:return c.call(h,p[0]);case 2:return c.call(h,p[0],p[1]);case 3:return c.call(h,p[0],p[1],p[2])}return c.apply(h,p)}},96837:S=>{S.exports=function j(c,h){for(var p=-1,C=null==c?0:c.length;++p<C&&!1!==h(c[p],p,c););return c}},69779:S=>{S.exports=function j(c,h){for(var p=-1,C=null==c?0:c.length,w=0,x=[];++p<C;){var T=c[p];h(T,p,c)&&(x[w++]=T)}return x}},61253:(S,j,c)=>{var h=c(14164);S.exports=function p(C,w){return!(null==C||!C.length)&&h(C,w,0)>-1}},37609:S=>{S.exports=function j(c,h,p){for(var C=-1,w=null==c?0:c.length;++C<w;)if(p(h,c[C]))return!0;return!1}},72271:(S,j,c)=>{var h=c(85334),p=c(77151),C=c(21503),w=c(80891),x=c(58442),T=c(48159),P=Object.prototype.hasOwnProperty;S.exports=function N(F,M){var G=C(F),Q=!G&&p(F),oe=!G&&!Q&&w(F),o=!G&&!Q&&!oe&&T(F),ne=G||Q||oe||o,fe=ne?h(F.length,String):[],ce=fe.length;for(var J in F)(M||P.call(F,J))&&(!ne||!("length"==J||oe&&("offset"==J||"parent"==J)||o&&("buffer"==J||"byteLength"==J||"byteOffset"==J)||x(J,ce)))&&fe.push(J);return fe}},84633:S=>{S.exports=function j(c,h){for(var p=-1,C=null==c?0:c.length,w=Array(C);++p<C;)w[p]=h(c[p],p,c);return w}},85059:S=>{S.exports=function j(c,h){for(var p=-1,C=h.length,w=c.length;++p<C;)c[w+p]=h[p];return c}},8745:S=>{S.exports=function j(c,h,p,C){var w=-1,x=null==c?0:c.length;for(C&&x&&(p=c[++w]);++w<x;)p=h(p,c[w],w,c);return p}},79503:S=>{S.exports=function j(c,h){for(var p=-1,C=null==c?0:c.length;++p<C;)if(h(c[p],p,c))return!0;return!1}},75481:(S,j,c)=>{var p=c(11847)("length");S.exports=p},49276:(S,j,c)=>{var h=c(85683),p=c(20217);S.exports=function C(w,x,T){(void 0!==T&&!p(w[x],T)||void 0===T&&!(x in w))&&h(w,x,T)}},89719:(S,j,c)=>{var h=c(85683),p=c(20217),w=Object.prototype.hasOwnProperty;S.exports=function x(T,I,P){var N=T[I];(!w.call(T,I)||!p(N,P)||void 0===P&&!(I in T))&&h(T,I,P)}},43503:(S,j,c)=>{var h=c(20217);S.exports=function p(C,w){for(var x=C.length;x--;)if(h(C[x][0],w))return x;return-1}},94121:(S,j,c)=>{var h=c(31989),p=c(118);S.exports=function C(w,x){return w&&h(x,p(x),w)}},99287:(S,j,c)=>{var h=c(31989),p=c(16555);S.exports=function C(w,x){return w&&h(x,p(x),w)}},85683:(S,j,c)=>{var h=c(56713);S.exports=function p(C,w,x){"__proto__"==w&&h?h(C,w,{configurable:!0,enumerable:!0,value:x,writable:!0}):C[w]=x}},44462:(S,j,c)=>{var h=c(2858),p=c(96837),C=c(89719),w=c(94121),x=c(99287),T=c(19292),I=c(99454),P=c(84444),N=c(59905),F=c(47597),M=c(6967),G=c(28794),Q=c(76782),oe=c(37878),o=c(4264),ne=c(21503),fe=c(80891),ce=c(13222),J=c(25940),he=c(90799),Ce=c(118),Ie=c(16555),Ue="[object Arguments]",Nt="[object Function]",gr="[object Object]",O={};O[Ue]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[gr]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[Nt]=O["[object WeakMap]"]=!1,S.exports=function H(q,pe,Fe,De,tt,yt){var xt,Kt=1&pe,on=2&pe,Wt=4&pe;if(Fe&&(xt=tt?Fe(q,De,tt,yt):Fe(q)),void 0!==xt)return xt;if(!J(q))return q;var Hn=ne(q);if(Hn){if(xt=Q(q),!Kt)return I(q,xt)}else{var kn=G(q),Dr=kn==Nt||"[object GeneratorFunction]"==kn;if(fe(q))return T(q,Kt);if(kn==gr||kn==Ue||Dr&&!tt){if(xt=on||Dr?{}:o(q),!Kt)return on?N(q,x(xt,q)):P(q,w(xt,q))}else{if(!O[kn])return tt?q:{};xt=oe(q,kn,Kt)}}yt||(yt=new h);var xn=yt.get(q);if(xn)return xn;yt.set(q,xt),he(q)?q.forEach(function(Dn){xt.add(H(Dn,pe,Fe,Dn,q,yt))}):ce(q)&&q.forEach(function(Dn,rr){xt.set(rr,H(Dn,pe,Fe,rr,q,yt))});var Tn=Hn?void 0:(Wt?on?M:F:on?Ie:Ce)(q);return p(Tn||q,function(Dn,rr){Tn&&(Dn=q[rr=Dn]),C(xt,rr,H(Dn,pe,Fe,rr,q,yt))}),xt}},78858:(S,j,c)=>{var h=c(25940),p=Object.create,C=function(){function w(){}return function(x){if(!h(x))return{};if(p)return p(x);w.prototype=x;var T=new w;return w.prototype=void 0,T}}();S.exports=C},43132:(S,j,c)=>{var h=c(45184),C=c(16539)(h);S.exports=C},67308:(S,j,c)=>{var h=c(44129);S.exports=function p(C,w,x){for(var T=-1,I=C.length;++T<I;){var P=C[T],N=w(P);if(null!=N&&(void 0===F?N==N&&!h(N):x(N,F)))var F=N,M=P}return M}},33609:(S,j,c)=>{var h=c(43132);S.exports=function p(C,w){var x=[];return h(C,function(T,I,P){w(T,I,P)&&x.push(T)}),x}},65317:S=>{S.exports=function j(c,h,p,C){for(var w=c.length,x=p+(C?1:-1);C?x--:++x<w;)if(h(c[x],x,c))return x;return-1}},50686:(S,j,c)=>{var h=c(85059),p=c(75039);S.exports=function C(w,x,T,I,P){var N=-1,F=w.length;for(T||(T=p),P||(P=[]);++N<F;){var M=w[N];x>0&&T(M)?x>1?C(M,x-1,T,I,P):h(P,M):I||(P[P.length]=M)}return P}},30755:(S,j,c)=>{var p=c(40456)();S.exports=p},45184:(S,j,c)=>{var h=c(30755),p=c(118);S.exports=function C(w,x){return w&&h(w,x,p)}},15456:(S,j,c)=>{var h=c(65456),p=c(68533);S.exports=function C(w,x){for(var T=0,I=(x=h(x,w)).length;null!=w&&T<I;)w=w[p(x[T++])];return T&&T==I?w:void 0}},38247:(S,j,c)=>{var h=c(85059),p=c(21503);S.exports=function C(w,x,T){var I=x(w);return p(w)?I:h(I,T(w))}},93337:(S,j,c)=>{var h=c(60443),p=c(21318),C=c(92902),T=h?h.toStringTag:void 0;S.exports=function I(P){return null==P?void 0===P?"[object Undefined]":"[object Null]":T&&T in Object(P)?p(P):C(P)}},31100:S=>{S.exports=function j(c,h){return c>h}},84781:S=>{var c=Object.prototype.hasOwnProperty;S.exports=function h(p,C){return null!=p&&c.call(p,C)}},69989:S=>{S.exports=function j(c,h){return null!=c&&h in Object(c)}},14164:(S,j,c)=>{var h=c(65317),p=c(70968),C=c(24977);S.exports=function w(x,T,I){return T==T?C(x,T,I):h(x,p,I)}},60186:(S,j,c)=>{var h=c(93337),p=c(72671);S.exports=function w(x){return p(x)&&"[object Arguments]"==h(x)}},85740:(S,j,c)=>{var h=c(58325),p=c(72671);S.exports=function C(w,x,T,I,P){return w===x||(null==w||null==x||!p(w)&&!p(x)?w!=w&&x!=x:h(w,x,T,I,C,P))}},58325:(S,j,c)=>{var h=c(2858),p=c(63914),C=c(78583),w=c(32286),x=c(28794),T=c(21503),I=c(80891),P=c(48159),F="[object Arguments]",M="[object Array]",G="[object Object]",oe=Object.prototype.hasOwnProperty;S.exports=function o(ne,fe,ce,J,he,Ce){var Ie=T(ne),b=T(fe),ke=Ie?M:x(ne),Ge=b?M:x(fe),Ue=(ke=ke==F?G:ke)==G,Xe=(Ge=Ge==F?G:Ge)==G,Je=ke==Ge;if(Je&&I(ne)){if(!I(fe))return!1;Ie=!0,Ue=!1}if(Je&&!Ue)return Ce||(Ce=new h),Ie||P(ne)?p(ne,fe,ce,J,he,Ce):C(ne,fe,ke,ce,J,he,Ce);if(!(1&ce)){var ot=Ue&&oe.call(ne,"__wrapped__"),vt=Xe&&oe.call(fe,"__wrapped__");if(ot||vt){var Nt=ot?ne.value():ne,Ut=vt?fe.value():fe;return Ce||(Ce=new h),he(Nt,Ut,ce,J,Ce)}}return!!Je&&(Ce||(Ce=new h),w(ne,fe,ce,J,he,Ce))}},97021:(S,j,c)=>{var h=c(28794),p=c(72671);S.exports=function w(x){return p(x)&&"[object Map]"==h(x)}},40431:(S,j,c)=>{var h=c(2858),p=c(85740);S.exports=function x(T,I,P,N){var F=P.length,M=F,G=!N;if(null==T)return!M;for(T=Object(T);F--;){var Q=P[F];if(G&&Q[2]?Q[1]!==T[Q[0]]:!(Q[0]in T))return!1}for(;++F<M;){var oe=(Q=P[F])[0],o=T[oe],ne=Q[1];if(G&&Q[2]){if(void 0===o&&!(oe in T))return!1}else{var fe=new h;if(N)var ce=N(o,ne,oe,T,I,fe);if(!(void 0===ce?p(ne,o,3,N,fe):ce))return!1}}return!0}},70968:S=>{S.exports=function j(c){return c!=c}},37304:(S,j,c)=>{var h=c(75946),p=c(91943),C=c(25940),w=c(52827),T=/^\[object .+?Constructor\]$/,M=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");S.exports=function G(Q){return!(!C(Q)||p(Q))&&(h(Q)?M:T).test(w(Q))}},771:(S,j,c)=>{var h=c(28794),p=c(72671);S.exports=function w(x){return p(x)&&"[object Set]"==h(x)}},1083:(S,j,c)=>{var h=c(93337),p=c(96231),C=c(72671),Je={};Je["[object Float32Array]"]=Je["[object Float64Array]"]=Je["[object Int8Array]"]=Je["[object Int16Array]"]=Je["[object Int32Array]"]=Je["[object Uint8Array]"]=Je["[object Uint8ClampedArray]"]=Je["[object Uint16Array]"]=Je["[object Uint32Array]"]=!0,Je["[object Arguments]"]=Je["[object Array]"]=Je["[object ArrayBuffer]"]=Je["[object Boolean]"]=Je["[object DataView]"]=Je["[object Date]"]=Je["[object Error]"]=Je["[object Function]"]=Je["[object Map]"]=Je["[object Number]"]=Je["[object Object]"]=Je["[object RegExp]"]=Je["[object Set]"]=Je["[object String]"]=Je["[object WeakMap]"]=!1,S.exports=function ot(vt){return C(vt)&&p(vt.length)&&!!Je[h(vt)]}},96517:(S,j,c)=>{var h=c(98133),p=c(9458),C=c(32608),w=c(21503),x=c(87495);S.exports=function T(I){return"function"==typeof I?I:null==I?C:"object"==typeof I?w(I)?p(I[0],I[1]):h(I):x(I)}},81172:(S,j,c)=>{var h=c(45488),p=c(85491),w=Object.prototype.hasOwnProperty;S.exports=function x(T){if(!h(T))return p(T);var I=[];for(var P in Object(T))w.call(T,P)&&"constructor"!=P&&I.push(P);return I}},92809:(S,j,c)=>{var h=c(25940),p=c(45488),C=c(32158),x=Object.prototype.hasOwnProperty;S.exports=function T(I){if(!h(I))return C(I);var P=p(I),N=[];for(var F in I)"constructor"==F&&(P||!x.call(I,F))||N.push(F);return N}},99069:S=>{S.exports=function j(c,h){return c<h}},92046:(S,j,c)=>{var h=c(43132),p=c(56507);S.exports=function C(w,x){var T=-1,I=p(w)?Array(w.length):[];return h(w,function(P,N,F){I[++T]=x(P,N,F)}),I}},98133:(S,j,c)=>{var h=c(40431),p=c(22379),C=c(642);S.exports=function w(x){var T=p(x);return 1==T.length&&T[0][2]?C(T[0][0],T[0][1]):function(I){return I===x||h(I,x,T)}}},9458:(S,j,c)=>{var h=c(85740),p=c(8817),C=c(11172),w=c(45352),x=c(22442),T=c(642),I=c(68533);S.exports=function F(M,G){return w(M)&&x(G)?T(I(M),G):function(Q){var oe=p(Q,M);return void 0===oe&&oe===G?C(Q,M):h(G,oe,3)}}},73842:(S,j,c)=>{var h=c(2858),p=c(49276),C=c(30755),w=c(33675),x=c(25940),T=c(16555),I=c(99351);S.exports=function P(N,F,M,G,Q){N!==F&&C(F,function(oe,o){if(Q||(Q=new h),x(oe))w(N,F,o,M,P,G,Q);else{var ne=G?G(I(N,o),oe,o+"",N,F,Q):void 0;void 0===ne&&(ne=oe),p(N,o,ne)}},T)}},33675:(S,j,c)=>{var h=c(49276),p=c(19292),C=c(65208),w=c(99454),x=c(4264),T=c(77151),I=c(21503),P=c(21330),N=c(80891),F=c(75946),M=c(25940),G=c(97614),Q=c(48159),oe=c(99351),o=c(8067);S.exports=function ne(fe,ce,J,he,Ce,Ie,b){var ke=oe(fe,J),Ge=oe(ce,J),Ue=b.get(Ge);if(Ue)h(fe,J,Ue);else{var Xe=Ie?Ie(ke,Ge,J+"",fe,ce,b):void 0,Je=void 0===Xe;if(Je){var ot=I(Ge),vt=!ot&&N(Ge),Nt=!ot&&!vt&&Q(Ge);Xe=Ge,ot||vt||Nt?I(ke)?Xe=ke:P(ke)?Xe=w(ke):vt?(Je=!1,Xe=p(Ge,!0)):Nt?(Je=!1,Xe=C(Ge,!0)):Xe=[]:G(Ge)||T(Ge)?(Xe=ke,T(ke)?Xe=o(ke):(!M(ke)||F(ke))&&(Xe=x(Ge))):Je=!1}Je&&(b.set(Ge,Xe),Ce(Xe,Ge,he,Ie,b),b.delete(Ge)),h(fe,J,Xe)}}},6119:(S,j,c)=>{var h=c(84633),p=c(15456),C=c(96517),w=c(92046),x=c(18750),T=c(85647),I=c(41215),P=c(32608),N=c(21503);S.exports=function F(M,G,Q){G=G.length?h(G,function(ne){return N(ne)?function(fe){return p(fe,1===ne.length?ne[0]:ne)}:ne}):[P];var oe=-1;G=h(G,T(C));var o=w(M,function(ne,fe,ce){return{criteria:h(G,function(he){return he(ne)}),index:++oe,value:ne}});return x(o,function(ne,fe){return I(ne,fe,Q)})}},83021:(S,j,c)=>{var h=c(95495),p=c(11172);S.exports=function C(w,x){return h(w,x,function(T,I){return p(w,I)})}},95495:(S,j,c)=>{var h=c(15456),p=c(55963),C=c(65456);S.exports=function w(x,T,I){for(var P=-1,N=T.length,F={};++P<N;){var M=T[P],G=h(x,M);I(G,M)&&p(F,C(M,x),G)}return F}},11847:S=>{S.exports=function j(c){return function(h){return null==h?void 0:h[c]}}},39222:(S,j,c)=>{var h=c(15456);S.exports=function p(C){return function(w){return h(w,C)}}},16307:S=>{var j=Math.ceil,c=Math.max;S.exports=function h(p,C,w,x){for(var T=-1,I=c(j((C-p)/(w||1)),0),P=Array(I);I--;)P[x?I:++T]=p,p+=w;return P}},13570:S=>{S.exports=function j(c,h,p,C,w){return w(c,function(x,T,I){p=C?(C=!1,x):h(p,x,T,I)}),p}},23269:(S,j,c)=>{var h=c(32608),p=c(53983),C=c(72185);S.exports=function w(x,T){return C(p(x,T,h),x+"")}},55963:(S,j,c)=>{var h=c(89719),p=c(65456),C=c(58442),w=c(25940),x=c(68533);S.exports=function T(I,P,N,F){if(!w(I))return I;for(var M=-1,G=(P=p(P,I)).length,Q=G-1,oe=I;null!=oe&&++M<G;){var o=x(P[M]),ne=N;if("__proto__"===o||"constructor"===o||"prototype"===o)return I;if(M!=Q){var fe=oe[o];void 0===(ne=F?F(fe,o,oe):void 0)&&(ne=w(fe)?fe:C(P[M+1])?[]:{})}h(oe,o,ne),oe=oe[o]}return I}},69510:(S,j,c)=>{var h=c(76684),p=c(56713),C=c(32608);S.exports=p?function(x,T){return p(x,"toString",{configurable:!0,enumerable:!1,value:h(T),writable:!0})}:C},18750:S=>{S.exports=function j(c,h){var p=c.length;for(c.sort(h);p--;)c[p]=c[p].value;return c}},85334:S=>{S.exports=function j(c,h){for(var p=-1,C=Array(c);++p<c;)C[p]=h(p);return C}},93935:(S,j,c)=>{var h=c(60443),p=c(84633),C=c(21503),w=c(44129),T=h?h.prototype:void 0,I=T?T.toString:void 0;S.exports=function P(N){if("string"==typeof N)return N;if(C(N))return p(N,P)+"";if(w(N))return I?I.call(N):"";var F=N+"";return"0"==F&&1/N==-1/0?"-0":F}},83348:(S,j,c)=>{var h=c(42760),p=/^\s+/;S.exports=function C(w){return w&&w.slice(0,h(w)+1).replace(p,"")}},85647:S=>{S.exports=function j(c){return function(h){return c(h)}}},80707:(S,j,c)=>{var h=c(58849),p=c(61253),C=c(37609),w=c(25972),x=c(14575),T=c(24174);S.exports=function P(N,F,M){var G=-1,Q=p,oe=N.length,o=!0,ne=[],fe=ne;if(M)o=!1,Q=C;else if(oe>=200){var ce=F?null:x(N);if(ce)return T(ce);o=!1,Q=w,fe=new h}else fe=F?[]:ne;e:for(;++G<oe;){var J=N[G],he=F?F(J):J;if(J=M||0!==J?J:0,o&&he==he){for(var Ce=fe.length;Ce--;)if(fe[Ce]===he)continue e;F&&fe.push(he),ne.push(J)}else Q(fe,he,M)||(fe!==ne&&fe.push(he),ne.push(J))}return ne}},19179:(S,j,c)=>{var h=c(84633);S.exports=function p(C,w){return h(w,function(x){return C[x]})}},38645:S=>{S.exports=function j(c,h,p){for(var C=-1,w=c.length,x=h.length,T={};++C<w;)p(T,c[C],C<x?h[C]:void 0);return T}},25972:S=>{S.exports=function j(c,h){return c.has(h)}},21481:(S,j,c)=>{var h=c(32608);S.exports=function p(C){return"function"==typeof C?C:h}},65456:(S,j,c)=>{var h=c(21503),p=c(45352),C=c(32855),w=c(73943);S.exports=function x(T,I){return h(T)?T:p(T,I)?[T]:C(w(T))}},43362:(S,j,c)=>{var h=c(73457);S.exports=function p(C){var w=new C.constructor(C.byteLength);return new h(w).set(new h(C)),w}},19292:(S,j,c)=>{S=c.nmd(S);var h=c(12119),p=j&&!j.nodeType&&j,C=p&&S&&!S.nodeType&&S,x=C&&C.exports===p?h.Buffer:void 0,T=x?x.allocUnsafe:void 0;S.exports=function I(P,N){if(N)return P.slice();var F=P.length,M=T?T(F):new P.constructor(F);return P.copy(M),M}},17e3:(S,j,c)=>{var h=c(43362);S.exports=function p(C,w){var x=w?h(C.buffer):C.buffer;return new C.constructor(x,C.byteOffset,C.byteLength)}},74098:S=>{var j=/\w*$/;S.exports=function c(h){var p=new h.constructor(h.source,j.exec(h));return p.lastIndex=h.lastIndex,p}},62533:(S,j,c)=>{var h=c(60443),p=h?h.prototype:void 0,C=p?p.valueOf:void 0;S.exports=function w(x){return C?Object(C.call(x)):{}}},65208:(S,j,c)=>{var h=c(43362);S.exports=function p(C,w){var x=w?h(C.buffer):C.buffer;return new C.constructor(x,C.byteOffset,C.length)}},13443:(S,j,c)=>{var h=c(44129);S.exports=function p(C,w){if(C!==w){var x=void 0!==C,T=null===C,I=C==C,P=h(C),N=void 0!==w,F=null===w,M=w==w,G=h(w);if(!F&&!G&&!P&&C>w||P&&N&&M&&!F&&!G||T&&N&&M||!x&&M||!I)return 1;if(!T&&!P&&!G&&C<w||G&&x&&I&&!T&&!P||F&&x&&I||!N&&I||!M)return-1}return 0}},41215:(S,j,c)=>{var h=c(13443);S.exports=function p(C,w,x){for(var T=-1,I=C.criteria,P=w.criteria,N=I.length,F=x.length;++T<N;){var M=h(I[T],P[T]);if(M)return T>=F?M:M*("desc"==x[T]?-1:1)}return C.index-w.index}},99454:S=>{S.exports=function j(c,h){var p=-1,C=c.length;for(h||(h=Array(C));++p<C;)h[p]=c[p];return h}},31989:(S,j,c)=>{var h=c(89719),p=c(85683);S.exports=function C(w,x,T,I){var P=!T;T||(T={});for(var N=-1,F=x.length;++N<F;){var M=x[N],G=I?I(T[M],w[M],M,T,w):void 0;void 0===G&&(G=w[M]),P?p(T,M,G):h(T,M,G)}return T}},84444:(S,j,c)=>{var h=c(31989),p=c(39383);S.exports=function C(w,x){return h(w,p(w),x)}},59905:(S,j,c)=>{var h=c(31989),p=c(53051);S.exports=function C(w,x){return h(w,p(w),x)}},24610:(S,j,c)=>{var h=c(12119);S.exports=h["__core-js_shared__"]},84944:(S,j,c)=>{var h=c(23269),p=c(93342);S.exports=function C(w){return h(function(x,T){var I=-1,P=T.length,N=P>1?T[P-1]:void 0,F=P>2?T[2]:void 0;for(N=w.length>3&&"function"==typeof N?(P--,N):void 0,F&&p(T[0],T[1],F)&&(N=P<3?void 0:N,P=1),x=Object(x);++I<P;){var M=T[I];M&&w(x,M,I,N)}return x})}},16539:(S,j,c)=>{var h=c(56507);S.exports=function p(C,w){return function(x,T){if(null==x)return x;if(!h(x))return C(x,T);for(var I=x.length,P=w?I:-1,N=Object(x);(w?P--:++P<I)&&!1!==T(N[P],P,N););return x}}},40456:S=>{S.exports=function j(c){return function(h,p,C){for(var w=-1,x=Object(h),T=C(h),I=T.length;I--;){var P=T[c?I:++w];if(!1===p(x[P],P,x))break}return h}}},24653:(S,j,c)=>{var h=c(96517),p=c(56507),C=c(118);S.exports=function w(x){return function(T,I,P){var N=Object(T);if(!p(T)){var F=h(I,3);T=C(T),I=function(G){return F(N[G],G,N)}}var M=x(T,I,P);return M>-1?N[F?T[M]:M]:void 0}}},97509:(S,j,c)=>{var h=c(16307),p=c(93342),C=c(12232);S.exports=function w(x){return function(T,I,P){return P&&"number"!=typeof P&&p(T,I,P)&&(I=P=void 0),T=C(T),void 0===I?(I=T,T=0):I=C(I),P=void 0===P?T<I?1:-1:C(P),h(T,I,P,x)}}},14575:(S,j,c)=>{var h=c(46323),p=c(12552),C=c(24174),x=h&&1/C(new h([,-0]))[1]==1/0?function(T){return new h(T)}:p;S.exports=x},56713:(S,j,c)=>{var h=c(53436),p=function(){try{var C=h(Object,"defineProperty");return C({},"",{}),C}catch(w){}}();S.exports=p},63914:(S,j,c)=>{var h=c(58849),p=c(79503),C=c(25972);S.exports=function T(I,P,N,F,M,G){var Q=1&N,oe=I.length,o=P.length;if(oe!=o&&!(Q&&o>oe))return!1;var ne=G.get(I),fe=G.get(P);if(ne&&fe)return ne==P&&fe==I;var ce=-1,J=!0,he=2&N?new h:void 0;for(G.set(I,P),G.set(P,I);++ce<oe;){var Ce=I[ce],Ie=P[ce];if(F)var b=Q?F(Ie,Ce,ce,P,I,G):F(Ce,Ie,ce,I,P,G);if(void 0!==b){if(b)continue;J=!1;break}if(he){if(!p(P,function(ke,Ge){if(!C(he,Ge)&&(Ce===ke||M(Ce,ke,N,F,G)))return he.push(Ge)})){J=!1;break}}else if(Ce!==Ie&&!M(Ce,Ie,N,F,G)){J=!1;break}}return G.delete(I),G.delete(P),J}},78583:(S,j,c)=>{var h=c(60443),p=c(73457),C=c(20217),w=c(63914),x=c(83205),T=c(24174),he=h?h.prototype:void 0,Ce=he?he.valueOf:void 0;S.exports=function Ie(b,ke,Ge,Ue,Xe,Je,ot){switch(Ge){case"[object DataView]":if(b.byteLength!=ke.byteLength||b.byteOffset!=ke.byteOffset)return!1;b=b.buffer,ke=ke.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=ke.byteLength||!Je(new p(b),new p(ke)));case"[object Boolean]":case"[object Date]":case"[object Number]":return C(+b,+ke);case"[object Error]":return b.name==ke.name&&b.message==ke.message;case"[object RegExp]":case"[object String]":return b==ke+"";case"[object Map]":var vt=x;case"[object Set]":if(vt||(vt=T),b.size!=ke.size&&!(1&Ue))return!1;var Ut=ot.get(b);if(Ut)return Ut==ke;Ue|=2,ot.set(b,ke);var _t=w(vt(b),vt(ke),Ue,Xe,Je,ot);return ot.delete(b),_t;case"[object Symbol]":if(Ce)return Ce.call(b)==Ce.call(ke)}return!1}},32286:(S,j,c)=>{var h=c(47597),w=Object.prototype.hasOwnProperty;S.exports=function x(T,I,P,N,F,M){var G=1&P,Q=h(T),oe=Q.length;if(oe!=h(I).length&&!G)return!1;for(var fe=oe;fe--;){var ce=Q[fe];if(!(G?ce in I:w.call(I,ce)))return!1}var J=M.get(T),he=M.get(I);if(J&&he)return J==I&&he==T;var Ce=!0;M.set(T,I),M.set(I,T);for(var Ie=G;++fe<oe;){var b=T[ce=Q[fe]],ke=I[ce];if(N)var Ge=G?N(ke,b,ce,I,T,M):N(b,ke,ce,T,I,M);if(!(void 0===Ge?b===ke||F(b,ke,P,N,M):Ge)){Ce=!1;break}Ie||(Ie="constructor"==ce)}if(Ce&&!Ie){var Ue=T.constructor,Xe=I.constructor;Ue!=Xe&&"constructor"in T&&"constructor"in I&&!("function"==typeof Ue&&Ue instanceof Ue&&"function"==typeof Xe&&Xe instanceof Xe)&&(Ce=!1)}return M.delete(T),M.delete(I),Ce}},3975:(S,j,c)=>{var h=c(22274),p=c(53983),C=c(72185);S.exports=function w(x){return C(p(x,void 0,h),x+"")}},79122:S=>{var j="object"==typeof global&&global&&global.Object===Object&&global;S.exports=j},47597:(S,j,c)=>{var h=c(38247),p=c(39383),C=c(118);S.exports=function w(x){return h(x,C,p)}},6967:(S,j,c)=>{var h=c(38247),p=c(53051),C=c(16555);S.exports=function w(x){return h(x,C,p)}},54537:(S,j,c)=>{var h=c(23819);S.exports=function p(C,w){var x=C.__data__;return h(w)?x["string"==typeof w?"string":"hash"]:x.map}},22379:(S,j,c)=>{var h=c(22442),p=c(118);S.exports=function C(w){for(var x=p(w),T=x.length;T--;){var I=x[T],P=w[I];x[T]=[I,P,h(P)]}return x}},53436:(S,j,c)=>{var h=c(37304),p=c(51990);S.exports=function C(w,x){var T=p(w,x);return h(T)?T:void 0}},29519:(S,j,c)=>{var p=c(69385)(Object.getPrototypeOf,Object);S.exports=p},21318:(S,j,c)=>{var h=c(60443),p=Object.prototype,C=p.hasOwnProperty,w=p.toString,x=h?h.toStringTag:void 0;S.exports=function T(I){var P=C.call(I,x),N=I[x];try{I[x]=void 0;var F=!0}catch(G){}var M=w.call(I);return F&&(P?I[x]=N:delete I[x]),M}},39383:(S,j,c)=>{var h=c(69779),p=c(49975),w=Object.prototype.propertyIsEnumerable,x=Object.getOwnPropertySymbols;S.exports=x?function(I){return null==I?[]:(I=Object(I),h(x(I),function(P){return w.call(I,P)}))}:p},53051:(S,j,c)=>{var h=c(85059),p=c(29519),C=c(39383),w=c(49975);S.exports=Object.getOwnPropertySymbols?function(I){for(var P=[];I;)h(P,C(I)),I=p(I);return P}:w},28794:(S,j,c)=>{var h=c(37244),p=c(51501),C=c(44267),w=c(46323),x=c(24243),T=c(93337),I=c(52827),P="[object Map]",F="[object Promise]",M="[object Set]",G="[object WeakMap]",Q="[object DataView]",oe=I(h),o=I(p),ne=I(C),fe=I(w),ce=I(x),J=T;(h&&J(new h(new ArrayBuffer(1)))!=Q||p&&J(new p)!=P||C&&J(C.resolve())!=F||w&&J(new w)!=M||x&&J(new x)!=G)&&(J=function(he){var Ce=T(he),Ie="[object Object]"==Ce?he.constructor:void 0,b=Ie?I(Ie):"";if(b)switch(b){case oe:return Q;case o:return P;case ne:return F;case fe:return M;case ce:return G}return Ce}),S.exports=J},51990:S=>{S.exports=function j(c,h){return null==c?void 0:c[h]}},47283:(S,j,c)=>{var h=c(65456),p=c(77151),C=c(21503),w=c(58442),x=c(96231),T=c(68533);S.exports=function I(P,N,F){for(var M=-1,G=(N=h(N,P)).length,Q=!1;++M<G;){var oe=T(N[M]);if(!(Q=null!=P&&F(P,oe)))break;P=P[oe]}return Q||++M!=G?Q:!!(G=null==P?0:P.length)&&x(G)&&w(oe,G)&&(C(P)||p(P))}},77609:S=>{var T=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");S.exports=function I(P){return T.test(P)}},64312:(S,j,c)=>{var h=c(60862);S.exports=function p(){this.__data__=h?h(null):{},this.size=0}},46421:S=>{S.exports=function j(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h}},15764:(S,j,c)=>{var h=c(60862),w=Object.prototype.hasOwnProperty;S.exports=function x(T){var I=this.__data__;if(h){var P=I[T];return"__lodash_hash_undefined__"===P?void 0:P}return w.call(I,T)?I[T]:void 0}},18685:(S,j,c)=>{var h=c(60862),C=Object.prototype.hasOwnProperty;S.exports=function w(x){var T=this.__data__;return h?void 0!==T[x]:C.call(T,x)}},26676:(S,j,c)=>{var h=c(60862);S.exports=function C(w,x){var T=this.__data__;return this.size+=this.has(w)?0:1,T[w]=h&&void 0===x?"__lodash_hash_undefined__":x,this}},76782:S=>{var c=Object.prototype.hasOwnProperty;S.exports=function h(p){var C=p.length,w=new p.constructor(C);return C&&"string"==typeof p[0]&&c.call(p,"index")&&(w.index=p.index,w.input=p.input),w}},37878:(S,j,c)=>{var h=c(43362),p=c(17e3),C=c(74098),w=c(62533),x=c(65208);S.exports=function Ge(Ue,Xe,Je){var ot=Ue.constructor;switch(Xe){case"[object ArrayBuffer]":return h(Ue);case"[object Boolean]":case"[object Date]":return new ot(+Ue);case"[object DataView]":return p(Ue,Je);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(Ue,Je);case"[object Map]":case"[object Set]":return new ot;case"[object Number]":case"[object String]":return new ot(Ue);case"[object RegExp]":return C(Ue);case"[object Symbol]":return w(Ue)}}},4264:(S,j,c)=>{var h=c(78858),p=c(29519),C=c(45488);S.exports=function w(x){return"function"!=typeof x.constructor||C(x)?{}:h(p(x))}},75039:(S,j,c)=>{var h=c(60443),p=c(77151),C=c(21503),w=h?h.isConcatSpreadable:void 0;S.exports=function x(T){return C(T)||p(T)||!!(w&&T&&T[w])}},58442:S=>{var c=/^(?:0|[1-9]\d*)$/;S.exports=function h(p,C){var w=typeof p;return!!(C=null==C?9007199254740991:C)&&("number"==w||"symbol"!=w&&c.test(p))&&p>-1&&p%1==0&&p<C}},93342:(S,j,c)=>{var h=c(20217),p=c(56507),C=c(58442),w=c(25940);S.exports=function x(T,I,P){if(!w(P))return!1;var N=typeof I;return!!("number"==N?p(P)&&C(I,P.length):"string"==N&&I in P)&&h(P[I],T)}},45352:(S,j,c)=>{var h=c(21503),p=c(44129),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/;S.exports=function x(T,I){if(h(T))return!1;var P=typeof T;return!("number"!=P&&"symbol"!=P&&"boolean"!=P&&null!=T&&!p(T))||w.test(T)||!C.test(T)||null!=I&&T in Object(I)}},23819:S=>{S.exports=function j(c){var h=typeof c;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==c:null===c}},91943:(S,j,c)=>{var w,h=c(24610),p=(w=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"";S.exports=function C(w){return!!p&&p in w}},45488:S=>{var j=Object.prototype;S.exports=function c(h){var p=h&&h.constructor;return h===("function"==typeof p&&p.prototype||j)}},22442:(S,j,c)=>{var h=c(25940);S.exports=function p(C){return C==C&&!h(C)}},41840:S=>{S.exports=function j(){this.__data__=[],this.size=0}},34378:(S,j,c)=>{var h=c(43503),C=Array.prototype.splice;S.exports=function w(x){var T=this.__data__,I=h(T,x);return!(I<0||(I==T.length-1?T.pop():C.call(T,I,1),--this.size,0))}},54981:(S,j,c)=>{var h=c(43503);S.exports=function p(C){var w=this.__data__,x=h(w,C);return x<0?void 0:w[x][1]}},67343:(S,j,c)=>{var h=c(43503);S.exports=function p(C){return h(this.__data__,C)>-1}},98895:(S,j,c)=>{var h=c(43503);S.exports=function p(C,w){var x=this.__data__,T=h(x,C);return T<0?(++this.size,x.push([C,w])):x[T][1]=w,this}},10638:(S,j,c)=>{var h=c(54994),p=c(9215),C=c(51501);S.exports=function w(){this.size=0,this.__data__={hash:new h,map:new(C||p),string:new h}}},11184:(S,j,c)=>{var h=c(54537);S.exports=function p(C){var w=h(this,C).delete(C);return this.size-=w?1:0,w}},70866:(S,j,c)=>{var h=c(54537);S.exports=function p(C){return h(this,C).get(C)}},43771:(S,j,c)=>{var h=c(54537);S.exports=function p(C){return h(this,C).has(C)}},51772:(S,j,c)=>{var h=c(54537);S.exports=function p(C,w){var x=h(this,C),T=x.size;return x.set(C,w),this.size+=x.size==T?0:1,this}},83205:S=>{S.exports=function j(c){var h=-1,p=Array(c.size);return c.forEach(function(C,w){p[++h]=[w,C]}),p}},642:S=>{S.exports=function j(c,h){return function(p){return null!=p&&p[c]===h&&(void 0!==h||c in Object(p))}}},90719:(S,j,c)=>{var h=c(30535);S.exports=function C(w){var x=h(w,function(I){return 500===T.size&&T.clear(),I}),T=x.cache;return x}},60862:(S,j,c)=>{var p=c(53436)(Object,"create");S.exports=p},85491:(S,j,c)=>{var p=c(69385)(Object.keys,Object);S.exports=p},32158:S=>{S.exports=function j(c){var h=[];if(null!=c)for(var p in Object(c))h.push(p);return h}},73597:(S,j,c)=>{S=c.nmd(S);var h=c(79122),p=j&&!j.nodeType&&j,C=p&&S&&!S.nodeType&&S,x=C&&C.exports===p&&h.process,T=function(){try{return C&&C.require&&C.require("util").types||x&&x.binding&&x.binding("util")}catch(P){}}();S.exports=T},92902:S=>{var c=Object.prototype.toString;S.exports=function h(p){return c.call(p)}},69385:S=>{S.exports=function j(c,h){return function(p){return c(h(p))}}},53983:(S,j,c)=>{var h=c(26999),p=Math.max;S.exports=function C(w,x,T){return x=p(void 0===x?w.length-1:x,0),function(){for(var I=arguments,P=-1,N=p(I.length-x,0),F=Array(N);++P<N;)F[P]=I[x+P];P=-1;for(var M=Array(x+1);++P<x;)M[P]=I[P];return M[x]=T(F),h(w,this,M)}}},12119:(S,j,c)=>{var h=c(79122),p="object"==typeof self&&self&&self.Object===Object&&self,C=h||p||Function("return this")();S.exports=C},99351:S=>{S.exports=function j(c,h){if(("constructor"!==h||"function"!=typeof c[h])&&"__proto__"!=h)return c[h]}},4600:S=>{S.exports=function c(h){return this.__data__.set(h,"__lodash_hash_undefined__"),this}},31387:S=>{S.exports=function j(c){return this.__data__.has(c)}},24174:S=>{S.exports=function j(c){var h=-1,p=Array(c.size);return c.forEach(function(C){p[++h]=C}),p}},72185:(S,j,c)=>{var h=c(69510),C=c(10029)(h);S.exports=C},10029:S=>{var h=Date.now;S.exports=function p(C){var w=0,x=0;return function(){var T=h(),I=16-(T-x);if(x=T,I>0){if(++w>=800)return arguments[0]}else w=0;return C.apply(void 0,arguments)}}},13720:(S,j,c)=>{var h=c(9215);S.exports=function p(){this.__data__=new h,this.size=0}},64410:S=>{S.exports=function j(c){var h=this.__data__,p=h.delete(c);return this.size=h.size,p}},45576:S=>{S.exports=function j(c){return this.__data__.get(c)}},22247:S=>{S.exports=function j(c){return this.__data__.has(c)}},41585:(S,j,c)=>{var h=c(9215),p=c(51501),C=c(99850);S.exports=function x(T,I){var P=this.__data__;if(P instanceof h){var N=P.__data__;if(!p||N.length<199)return N.push([T,I]),this.size=++P.size,this;P=this.__data__=new C(N)}return P.set(T,I),this.size=P.size,this}},24977:S=>{S.exports=function j(c,h,p){for(var C=p-1,w=c.length;++C<w;)if(c[C]===h)return C;return-1}},52315:(S,j,c)=>{var h=c(75481),p=c(77609),C=c(81149);S.exports=function w(x){return p(x)?C(x):h(x)}},32855:(S,j,c)=>{var h=c(90719),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,w=h(function(x){var T=[];return 46===x.charCodeAt(0)&&T.push(""),x.replace(p,function(I,P,N,F){T.push(N?F.replace(C,"$1"):P||I)}),T});S.exports=w},68533:(S,j,c)=>{var h=c(44129);S.exports=function C(w){if("string"==typeof w||h(w))return w;var x=w+"";return"0"==x&&1/w==-1/0?"-0":x}},52827:S=>{var c=Function.prototype.toString;S.exports=function h(p){if(null!=p){try{return c.call(p)}catch(C){}try{return p+""}catch(C){}}return""}},42760:S=>{var j=/\s/;S.exports=function c(h){for(var p=h.length;p--&&j.test(h.charAt(p)););return p}},81149:S=>{var j="\\ud800-\\udfff",x="["+j+"]",T="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",I="\\ud83c[\\udffb-\\udfff]",N="[^"+j+"]",F="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",Q="(?:"+T+"|"+I+")?",oe="[\\ufe0e\\ufe0f]?",ne=oe+Q+"(?:\\u200d(?:"+[N,F,M].join("|")+")"+oe+Q+")*",fe="(?:"+[N+T+"?",T,F,M,x].join("|")+")",ce=RegExp(I+"(?="+I+")|"+fe+ne,"g");S.exports=function J(he){for(var Ce=ce.lastIndex=0;ce.test(he);)++Ce;return Ce}},11094:(S,j,c)=>{var h=c(44462);S.exports=function C(w){return h(w,4)}},90733:(S,j,c)=>{var h=c(44462);S.exports=function w(x){return h(x,5)}},76684:S=>{S.exports=function j(c){return function(){return c}}},28800:(S,j,c)=>{var h=c(23269),p=c(20217),C=c(93342),w=c(16555),x=Object.prototype,T=x.hasOwnProperty,I=h(function(P,N){P=Object(P);var F=-1,M=N.length,G=M>2?N[2]:void 0;for(G&&C(N[0],N[1],G)&&(M=1);++F<M;)for(var Q=N[F],oe=w(Q),o=-1,ne=oe.length;++o<ne;){var fe=oe[o],ce=P[fe];(void 0===ce||p(ce,x[fe])&&!T.call(P,fe))&&(P[fe]=Q[fe])}return P});S.exports=I},35474:(S,j,c)=>{S.exports=c(89851)},20217:S=>{S.exports=function j(c,h){return c===h||c!=c&&h!=h}},35281:(S,j,c)=>{var h=c(69779),p=c(33609),C=c(96517),w=c(21503);S.exports=function x(T,I){return(w(T)?h:p)(T,C(I,3))}},62516:(S,j,c)=>{var C=c(24653)(c(36397));S.exports=C},36397:(S,j,c)=>{var h=c(65317),p=c(96517),C=c(44401),w=Math.max;S.exports=function x(T,I,P){var N=null==T?0:T.length;if(!N)return-1;var F=null==P?0:C(P);return F<0&&(F=w(N+F,0)),h(T,p(I,3),F)}},22274:(S,j,c)=>{var h=c(50686);S.exports=function p(C){return null!=C&&C.length?h(C,1):[]}},89851:(S,j,c)=>{var h=c(96837),p=c(43132),C=c(21481),w=c(21503);S.exports=function x(T,I){return(w(T)?h:p)(T,C(I))}},41176:(S,j,c)=>{var h=c(30755),p=c(21481),C=c(16555);S.exports=function w(x,T){return null==x?x:h(x,p(T),C)}},8817:(S,j,c)=>{var h=c(15456);S.exports=function p(C,w,x){var T=null==C?void 0:h(C,w);return void 0===T?x:T}},54842:(S,j,c)=>{var h=c(84781),p=c(47283);S.exports=function C(w,x){return null!=w&&p(w,x,h)}},11172:(S,j,c)=>{var h=c(69989),p=c(47283);S.exports=function C(w,x){return null!=w&&p(w,x,h)}},32608:S=>{S.exports=function j(c){return c}},77151:(S,j,c)=>{var h=c(60186),p=c(72671),C=Object.prototype,w=C.hasOwnProperty,x=C.propertyIsEnumerable,T=h(function(){return arguments}())?h:function(I){return p(I)&&w.call(I,"callee")&&!x.call(I,"callee")};S.exports=T},21503:S=>{S.exports=Array.isArray},56507:(S,j,c)=>{var h=c(75946),p=c(96231);S.exports=function C(w){return null!=w&&p(w.length)&&!h(w)}},21330:(S,j,c)=>{var h=c(56507),p=c(72671);S.exports=function C(w){return p(w)&&h(w)}},80891:(S,j,c)=>{S=c.nmd(S);var h=c(12119),p=c(63580),C=j&&!j.nodeType&&j,w=C&&S&&!S.nodeType&&S,T=w&&w.exports===C?h.Buffer:void 0;S.exports=(T?T.isBuffer:void 0)||p},71973:(S,j,c)=>{var h=c(81172),p=c(28794),C=c(77151),w=c(21503),x=c(56507),T=c(80891),I=c(45488),P=c(48159),G=Object.prototype.hasOwnProperty;S.exports=function Q(oe){if(null==oe)return!0;if(x(oe)&&(w(oe)||"string"==typeof oe||"function"==typeof oe.splice||T(oe)||P(oe)||C(oe)))return!oe.length;var o=p(oe);if("[object Map]"==o||"[object Set]"==o)return!oe.size;if(I(oe))return!h(oe).length;for(var ne in oe)if(G.call(oe,ne))return!1;return!0}},75946:(S,j,c)=>{var h=c(93337),p=c(25940);S.exports=function I(P){if(!p(P))return!1;var N=h(P);return"[object Function]"==N||"[object GeneratorFunction]"==N||"[object AsyncFunction]"==N||"[object Proxy]"==N}},96231:S=>{S.exports=function c(h){return"number"==typeof h&&h>-1&&h%1==0&&h<=9007199254740991}},13222:(S,j,c)=>{var h=c(97021),p=c(85647),C=c(73597),w=C&&C.isMap,x=w?p(w):h;S.exports=x},25940:S=>{S.exports=function j(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)}},72671:S=>{S.exports=function j(c){return null!=c&&"object"==typeof c}},97614:(S,j,c)=>{var h=c(93337),p=c(29519),C=c(72671),I=Function.prototype.toString,P=Object.prototype.hasOwnProperty,N=I.call(Object);S.exports=function F(M){if(!C(M)||"[object Object]"!=h(M))return!1;var G=p(M);if(null===G)return!0;var Q=P.call(G,"constructor")&&G.constructor;return"function"==typeof Q&&Q instanceof Q&&I.call(Q)==N}},90799:(S,j,c)=>{var h=c(771),p=c(85647),C=c(73597),w=C&&C.isSet,x=w?p(w):h;S.exports=x},30248:(S,j,c)=>{var h=c(93337),p=c(21503),C=c(72671);S.exports=function x(T){return"string"==typeof T||!p(T)&&C(T)&&"[object String]"==h(T)}},44129:(S,j,c)=>{var h=c(93337),p=c(72671);S.exports=function w(x){return"symbol"==typeof x||p(x)&&"[object Symbol]"==h(x)}},48159:(S,j,c)=>{var h=c(1083),p=c(85647),C=c(73597),w=C&&C.isTypedArray,x=w?p(w):h;S.exports=x},34235:S=>{S.exports=function j(c){return void 0===c}},118:(S,j,c)=>{var h=c(72271),p=c(81172),C=c(56507);S.exports=function w(x){return C(x)?h(x):p(x)}},16555:(S,j,c)=>{var h=c(72271),p=c(92809),C=c(56507);S.exports=function w(x){return C(x)?h(x,!0):p(x)}},25809:S=>{S.exports=function j(c){var h=null==c?0:c.length;return h?c[h-1]:void 0}},17489:function(S,j,c){var h;S=c.nmd(S),function(){var p,T="Expected a function",P="__lodash_hash_undefined__",F="__lodash_placeholder__",b=128,_t=1/0,On=9007199254740991,nr=4294967295,Nn=[["ary",b],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Re="[object Arguments]",ze="[object Array]",st="[object Boolean]",Ct="[object Date]",mt="[object Error]",Bn="[object Function]",fi="[object GeneratorFunction]",Gt="[object Map]",Dt="[object Number]",H="[object Object]",q="[object Promise]",Fe="[object RegExp]",De="[object Set]",tt="[object String]",yt="[object Symbol]",Kt="[object WeakMap]",Wt="[object ArrayBuffer]",Hn="[object DataView]",kn="[object Float32Array]",Dr="[object Float64Array]",xn="[object Int8Array]",ht="[object Int16Array]",Tn="[object Int32Array]",Dn="[object Uint8Array]",rr="[object Uint8ClampedArray]",Fr="[object Uint16Array]",Jn="[object Uint32Array]",$n=/\b__p \+= '';/g,wo=/\b(__p \+=) '' \+/g,ma=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39);/g,So=/[&<>"']/g,de=RegExp(ro.source),Yr=RegExp(So.source),Vi=/<%-([\s\S]+?)%>/g,To=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,Vr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,io=/^\w*$/,oo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bi=/[\\^$.*+?()[\]{}|]/g,ir=RegExp(Bi.source),Eo=/^\s+/,mr=/\s/,ya=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xa=/\{\n\/\* \[wrapped with (.+)\] \*/,Tr=/,? & /,$o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hi=/[()=,{}\[\]\/\s]/,Yo=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ga=/\w*$/,Si=/^[-+]0x[0-9a-f]+$/i,ba=/^0b[01]+$/i,_a=/^\[object .+?Constructor\]$/,bn=/^0o[0-7]+$/i,Po=/^(?:0|[1-9]\d*)$/,ps=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ti=/($^)/,ji=/['\n\r\u2028\u2029\\]/g,Ei="\\ud800-\\udfff",Er="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",di="\\u2700-\\u27bf",nn="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="A-Z\\xc0-\\xd6\\xd8-\\xde",hi="\\ufe0e\\ufe0f",Mi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wa="["+Ei+"]",yr="["+Mi+"]",or="["+Er+"]",ar="\\d+",Mr="["+di+"]",Xo="["+nn+"]",Ao="[^"+Ei+Mi+ar+di+nn+Ai+"]",Xr="\\ud83c[\\udffb-\\udfff]",Oi="[^"+Ei+"]",ao="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",ki="["+Ai+"]",zi="(?:"+Xo+"|"+Ao+")",Ko="(?:"+ki+"|"+Ao+")",Jo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Mo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",so="(?:"+or+"|"+Xr+")?",wa="["+hi+"]?",Ta=wa+so+"(?:\\u200d(?:"+[Oi,ao,Or].join("|")+")"+wa+so+")*",Ea="(?:"+[Mr,ao,Or].join("|")+")"+Ta,$a="(?:"+[Oi+or+"?",or,ao,Or,Wa].join("|")+")",Pa=RegExp("['\u2019]","g"),qo=RegExp(or,"g"),ri=RegExp(Xr+"(?="+Xr+")|"+$a+Ta,"g"),uo=RegExp([ki+"?"+Xo+"+"+Jo+"(?="+[yr,ki,"$"].join("|")+")",Ko+"+"+Mo+"(?="+[yr,ki+zi,"$"].join("|")+")",ki+"?"+zi+"+"+Jo,ki+"+"+Mo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ar,Ea].join("|"),"g"),Ya=RegExp("[\\u200d"+Ei+Er+hi+"]"),Li=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ea=-1,Cn={};Cn[kn]=Cn[Dr]=Cn[xn]=Cn[ht]=Cn[Tn]=Cn[Dn]=Cn[rr]=Cn[Fr]=Cn[Jn]=!0,Cn[Re]=Cn[ze]=Cn[Wt]=Cn[st]=Cn[Hn]=Cn[Ct]=Cn[mt]=Cn[Bn]=Cn[Gt]=Cn[Dt]=Cn[H]=Cn[Fe]=Cn[De]=Cn[tt]=Cn[Kt]=!1;var Pe={};Pe[Re]=Pe[ze]=Pe[Wt]=Pe[Hn]=Pe[st]=Pe[Ct]=Pe[kn]=Pe[Dr]=Pe[xn]=Pe[ht]=Pe[Tn]=Pe[Gt]=Pe[Dt]=Pe[H]=Pe[Fe]=Pe[De]=Pe[tt]=Pe[yt]=Pe[Dn]=Pe[rr]=Pe[Fr]=Pe[Jn]=!0,Pe[mt]=Pe[Bn]=Pe[Kt]=!1;var W={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,le=parseInt,Te="object"==typeof global&&global&&global.Object===Object&&global,be="object"==typeof self&&self&&self.Object===Object&&self,u=Te||be||Function("return this")(),d=j&&!j.nodeType&&j,y=d&&S&&!S.nodeType&&S,_=y&&y.exports===d,k=_&&Te.process,L=function(){try{return y&&y.require&&y.require("util").types||k&&k.binding&&k.binding("util")}catch(He){}}(),U=L&&L.isArrayBuffer,re=L&&L.isDate,ie=L&&L.isMap,ye=L&&L.isRegExp,Oe=L&&L.isSet,$e=L&&L.isTypedArray;function Ee(_e,He,Ae){switch(Ae.length){case 0:return _e.call(He);case 1:return _e.call(He,Ae[0]);case 2:return _e.call(He,Ae[0],Ae[1]);case 3:return _e.call(He,Ae[0],Ae[1],Ae[2])}return _e.apply(He,Ae)}function Be(_e,He,Ae,ct){for(var Vt=-1,cn=null==_e?0:_e.length;++Vt<cn;){var zn=_e[Vt];He(ct,zn,Ae(zn),_e)}return ct}function dt(_e,He){for(var Ae=-1,ct=null==_e?0:_e.length;++Ae<ct&&!1!==He(_e[Ae],Ae,_e););return _e}function Ht(_e,He){for(var Ae=null==_e?0:_e.length;Ae--&&!1!==He(_e[Ae],Ae,_e););return _e}function wt(_e,He){for(var Ae=-1,ct=null==_e?0:_e.length;++Ae<ct;)if(!He(_e[Ae],Ae,_e))return!1;return!0}function Ln(_e,He){for(var Ae=-1,ct=null==_e?0:_e.length,Vt=0,cn=[];++Ae<ct;){var zn=_e[Ae];He(zn,Ae,_e)&&(cn[Vt++]=zn)}return cn}function jn(_e,He){return!(null==_e||!_e.length)&&hr(_e,He,0)>-1}function Hr(_e,He,Ae){for(var ct=-1,Vt=null==_e?0:_e.length;++ct<Vt;)if(Ae(He,_e[ct]))return!0;return!1}function St(_e,He){for(var Ae=-1,ct=null==_e?0:_e.length,Vt=Array(ct);++Ae<ct;)Vt[Ae]=He(_e[Ae],Ae,_e);return Vt}function It(_e,He){for(var Ae=-1,ct=He.length,Vt=_e.length;++Ae<ct;)_e[Vt+Ae]=He[Ae];return _e}function xr(_e,He,Ae,ct){var Vt=-1,cn=null==_e?0:_e.length;for(ct&&cn&&(Ae=_e[++Vt]);++Vt<cn;)Ae=He(Ae,_e[Vt],Vt,_e);return Ae}function un(_e,He,Ae,ct){var Vt=null==_e?0:_e.length;for(ct&&Vt&&(Ae=_e[--Vt]);Vt--;)Ae=He(Ae,_e[Vt],Vt,_e);return Ae}function Fn(_e,He){for(var Ae=-1,ct=null==_e?0:_e.length;++Ae<ct;)if(He(_e[Ae],Ae,_e))return!0;return!1}var sr=jr("length");function Oo(_e,He,Ae){var ct;return Ae(_e,function(Vt,cn,zn){if(He(Vt,cn,zn))return ct=cn,!1}),ct}function Ui(_e,He,Ae,ct){for(var Vt=_e.length,cn=Ae+(ct?1:-1);ct?cn--:++cn<Vt;)if(He(_e[cn],cn,_e))return cn;return-1}function hr(_e,He,Ae){return He==He?function br(_e,He,Ae){for(var ct=Ae-1,Vt=_e.length;++ct<Vt;)if(_e[ct]===He)return ct;return-1}(_e,He,Ae):Ui(_e,Vn,Ae)}function bt(_e,He,Ae,ct){for(var Vt=Ae-1,cn=_e.length;++Vt<cn;)if(ct(_e[Vt],He))return Vt;return-1}function Vn(_e){return _e!=_e}function gi(_e,He){var Ae=null==_e?0:_e.length;return Ae?Qn(_e,He)/Ae:NaN}function jr(_e){return function(He){return null==He?p:He[_e]}}function Ri(_e){return function(He){return null==_e?p:_e[He]}}function ko(_e,He,Ae,ct,Vt){return Vt(_e,function(cn,zn,_n){Ae=ct?(ct=!1,cn):He(Ae,cn,zn,_n)}),Ae}function Qn(_e,He){for(var Ae,ct=-1,Vt=_e.length;++ct<Vt;){var cn=He(_e[ct]);cn!==p&&(Ae=Ae===p?cn:Ae+cn)}return Ae}function vi(_e,He){for(var Ae=-1,ct=Array(_e);++Ae<_e;)ct[Ae]=He(Ae);return ct}function vn(_e){return _e&&_e.slice(0,wn(_e)+1).replace(Eo,"")}function ln(_e){return function(He){return _e(He)}}function Qt(_e,He){return St(He,function(Ae){return _e[Ae]})}function Ia(_e,He){return _e.has(He)}function Bs(_e,He){for(var Ae=-1,ct=_e.length;++Ae<ct&&hr(He,_e[Ae],0)>-1;);return Ae}function ku(_e,He){for(var Ae=_e.length;Ae--&&hr(He,_e[Ae],0)>-1;);return Ae}function Lu(_e,He){for(var Ae=_e.length,ct=0;Ae--;)_e[Ae]===He&&++ct;return ct}var Aa=Ri({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ru=Ri({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xl(_e){return"\\"+W[_e]}function pr(_e){return Ya.test(_e)}function oi(_e){var He=-1,Ae=Array(_e.size);return _e.forEach(function(ct,Vt){Ae[++He]=[Vt,ct]}),Ae}function Gi(_e,He){return function(Ae){return _e(He(Ae))}}function Zn(_e,He){for(var Ae=-1,ct=_e.length,Vt=0,cn=[];++Ae<ct;){var zn=_e[Ae];(zn===He||zn===F)&&(_e[Ae]=F,cn[Vt++]=Ae)}return cn}function Ma(_e){var He=-1,Ae=Array(_e.size);return _e.forEach(function(ct){Ae[++He]=ct}),Ae}function mn(_e){return pr(_e)?function _r(_e){for(var He=ri.lastIndex=0;ri.test(_e);)++He;return He}(_e):sr(_e)}function an(_e){return pr(_e)?function js(_e){return _e.match(ri)||[]}(_e):function gs(_e){return _e.split("")}(_e)}function wn(_e){for(var He=_e.length;He--&&mr.test(_e.charAt(He)););return He}var co=Ri({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mi=function _e(He){var e,Ae=(He=null==He?u:mi.defaults(u.Object(),He,mi.pick(u,pi))).Array,ct=He.Date,Vt=He.Error,cn=He.Function,zn=He.Math,_n=He.Object,Ro=He.RegExp,fo=He.String,X=He.TypeError,se=Ae.prototype,Ve=_n.prototype,Se=He["__core-js_shared__"],je=cn.prototype.toString,Ne=Ve.hasOwnProperty,qe=0,rt=(e=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",Tt=Ve.toString,Pt=je.call(_n),Qe=u._,Zt=Ro("^"+je.call(Ne).replace(Bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=_?He.Buffer:p,gt=He.Symbol,Un=He.Uint8Array,Yn=qt?qt.allocUnsafe:p,Cr=Gi(_n.getPrototypeOf,_n),Pn=_n.create,ta=Ve.propertyIsEnumerable,ho=se.splice,zr=gt?gt.isConcatSpreadable:p,ms=gt?gt.iterator:p,Oa=gt?gt.toStringTag:p,Us=function(){try{var e=Va(_n,"defineProperty");return e({},"",{}),e}catch(n){}}(),Bf=He.clearTimeout!==u.clearTimeout&&He.clearTimeout,Hf=ct&&ct.now!==u.Date.now&&ct.now,jf=He.setTimeout!==u.setTimeout&&He.setTimeout,$i=zn.ceil,ys=zn.floor,Gs=_n.getOwnPropertySymbols,Kl=qt?qt.isBuffer:p,Nu=He.isFinite,zf=se.join,Uf=Gi(_n.keys,_n),wr=zn.max,Ur=zn.min,Gf=ct.now,Wf=He.parseInt,Jl=zn.random,$f=se.reverse,Du=Va(He,"DataView"),xs=Va(He,"Map"),Fu=Va(He,"Promise"),ka=Va(He,"Set"),bs=Va(He,"WeakMap"),_s=Va(_n,"create"),Ir=bs&&new bs,Xa={},Vu=Ha(Du),Yf=Ha(xs),No=Ha(Fu),Cs=Ha(ka),Xf=Ha(bs),Bu=gt?gt.prototype:p,Ws=Bu?Bu.valueOf:p,Ql=Bu?Bu.toString:p;function K(e){if(er(e)&&!$t(e)&&!(e instanceof fn)){if(e instanceof Yi)return e;if(Ne.call(e,"__wrapped__"))return $c(e)}return new Yi(e)}var ws=function(){function e(){}return function(n){if(!Kn(n))return{};if(Pn)return Pn(n);e.prototype=n;var i=new e;return e.prototype=p,i}}();function Hu(){}function Yi(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=p}function fn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nr,this.__views__=[]}function Do(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var a=e[n];this.set(a[0],a[1])}}function Fo(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var a=e[n];this.set(a[0],a[1])}}function Xi(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var a=e[n];this.set(a[0],a[1])}}function Ra(e){var n=-1,i=null==e?0:e.length;for(this.__data__=new Xi;++n<i;)this.add(e[n])}function Ki(e){var n=this.__data__=new Fo(e);this.size=n.size}function zu(e,n){var i=$t(e),a=!i&&za(e),s=!i&&!a&&Co(e),l=!i&&!a&&!s&&us(e),f=i||a||s||l,g=f?vi(e.length,fo):[],m=g.length;for(var v in e)(n||Ne.call(e,v))&&(!f||!("length"==v||s&&("offset"==v||"parent"==v)||l&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||mo(v,m)))&&g.push(v);return g}function Uu(e){var n=e.length;return n?e[nu(0,n-1)]:p}function ed(e,n){return ks(ai(e),yi(n,0,e.length))}function td(e){return ks(ai(e))}function Js(e,n,i){(i!==p&&!no(e[n],i)||i===p&&!(n in e))&&po(e,n,i)}function ra(e,n,i){var a=e[n];(!Ne.call(e,n)||!no(a,i)||i===p&&!(n in e))&&po(e,n,i)}function Qs(e,n){for(var i=e.length;i--;)if(no(e[i][0],n))return i;return-1}function nd(e,n,i,a){return ia(e,function(s,l,f){n(a,s,i(s),f)}),a}function Zs(e,n){return e&&go(n,Ar(n),e)}function po(e,n,i){"__proto__"==n&&Us?Us(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i}function Ss(e,n){for(var i=-1,a=n.length,s=Ae(a),l=null==e;++i<a;)s[i]=l?p:Fs(e,n[i]);return s}function yi(e,n,i){return e==e&&(i!==p&&(e=e<=i?e:i),n!==p&&(e=e>=n?e:n)),e}function xi(e,n,i,a,s,l){var f,g=1&n,m=2&n,v=4&n;if(i&&(f=s?i(e,a,s,l):i(e)),f!==p)return f;if(!Kn(e))return e;var A=$t(e);if(A){if(f=function Ed(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&Ne.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!g)return ai(e,f)}else{var B=$r(e),Y=B==Bn||B==fi;if(Co(e))return bc(e,g);if(B==H||B==Re||Y&&!s){if(f=m||Y?{}:Vc(e),!g)return m?function md(e,n){return go(e,Dc(e),n)}(e,function Gu(e,n){return e&&go(n,li(n),e)}(f,e)):function Vo(e,n){return go(e,hl(e),n)}(e,Zs(f,e))}else{if(!Pe[B])return s?e:{};f=function Bc(e,n,i){var a=e.constructor;switch(n){case Wt:return ll(e);case st:case Ct:return new a(+e);case Hn:return function _c(e,n){var i=n?ll(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case kn:case Dr:case xn:case ht:case Tn:case Dn:case rr:case Fr:case Jn:return uu(e,i);case Gt:return new a;case Dt:case tt:return new a(e);case Fe:return function pd(e){var n=new e.constructor(e.source,Ga.exec(e));return n.lastIndex=e.lastIndex,n}(e);case De:return new a;case yt:return function gd(e){return Ws?_n(Ws.call(e)):{}}(e)}}(e,B,g)}}l||(l=new Ki);var te=l.get(e);if(te)return te;l.set(e,f),Ll(e)?e.forEach(function(ge){f.add(xi(ge,n,i,ge,e,l))}):zo(e)&&e.forEach(function(ge,E){f.set(E,xi(ge,n,i,E,e,l))});var xe=A?p:(v?m?Fa:ca:m?li:Ar)(e);return dt(xe||e,function(ge,E){xe&&(ge=e[E=ge]),ra(f,E,xi(ge,n,i,E,e,l))}),f}function Wu(e,n,i){var a=i.length;if(null==e)return!a;for(e=_n(e);a--;){var s=i[a],f=e[s];if(f===p&&!(s in e)||!(0,n[s])(f))return!1}return!0}function ec(e,n,i){if("function"!=typeof e)throw new X(T);return Os(function(){e.apply(p,i)},n)}function Na(e,n,i,a){var s=-1,l=jn,f=!0,g=e.length,m=[],v=n.length;if(!g)return m;i&&(n=St(n,ln(i))),a?(l=Hr,f=!1):n.length>=200&&(l=Ia,f=!1,n=new Ra(n));e:for(;++s<g;){var A=e[s],B=null==i?A:i(A);if(A=a||0!==A?A:0,f&&B==B){for(var Y=v;Y--;)if(n[Y]===B)continue e;m.push(A)}else l(n,B,a)||m.push(A)}return m}K.templateSettings={escape:Vi,evaluate:To,interpolate:at,variable:"",imports:{_:K}},(K.prototype=Hu.prototype).constructor=K,(Yi.prototype=ws(Hu.prototype)).constructor=Yi,(fn.prototype=ws(Hu.prototype)).constructor=fn,Do.prototype.clear=function yg(){this.__data__=_s?_s(null):{},this.size=0},Do.prototype.delete=function Kf(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Do.prototype.get=function Jf(e){var n=this.__data__;if(_s){var i=n[e];return i===P?p:i}return Ne.call(n,e)?n[e]:p},Do.prototype.has=function Qf(e){var n=this.__data__;return _s?n[e]!==p:Ne.call(n,e)},Do.prototype.set=function xg(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=_s&&n===p?P:n,this},Fo.prototype.clear=function bg(){this.__data__=[],this.size=0},Fo.prototype.delete=function _g(e){var n=this.__data__,i=Qs(n,e);return!(i<0||(i==n.length-1?n.pop():ho.call(n,i,1),--this.size,0))},Fo.prototype.get=function La(e){var n=this.__data__,i=Qs(n,e);return i<0?p:n[i][1]},Fo.prototype.has=function Ka(e){return Qs(this.__data__,e)>-1},Fo.prototype.set=function Zl(e,n){var i=this.__data__,a=Qs(i,e);return a<0?(++this.size,i.push([e,n])):i[a][1]=n,this},Xi.prototype.clear=function na(){this.size=0,this.__data__={hash:new Do,map:new(xs||Fo),string:new Do}},Xi.prototype.delete=function Ja(e){var n=hu(this,e).delete(e);return this.size-=n?1:0,n},Xi.prototype.get=function dn(e){return hu(this,e).get(e)},Xi.prototype.has=function hn(e){return hu(this,e).has(e)},Xi.prototype.set=function $s(e,n){var i=hu(this,e),a=i.size;return i.set(e,n),this.size+=i.size==a?0:1,this},Ra.prototype.add=Ra.prototype.push=function Zf(e){return this.__data__.set(e,P),this},Ra.prototype.has=function qf(e){return this.__data__.has(e)},Ki.prototype.clear=function Ys(){this.__data__=new Fo,this.size=0},Ki.prototype.delete=function ju(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i},Ki.prototype.get=function Kr(e){return this.__data__.get(e)},Ki.prototype.has=function Xs(e){return this.__data__.has(e)},Ki.prototype.set=function Ks(e,n){var i=this.__data__;if(i instanceof Fo){var a=i.__data__;if(!xs||a.length<199)return a.push([e,n]),this.size=++i.size,this;i=this.__data__=new Xi(a)}return i.set(e,n),this.size=i.size,this};var ia=Sc(Ni),$u=Sc(Yu,!0);function rd(e,n){var i=!0;return ia(e,function(a,s,l){return i=!!n(a,s,l)}),i}function qs(e,n,i){for(var a=-1,s=e.length;++a<s;){var l=e[a],f=n(l);if(null!=f&&(g===p?f==f&&!wi(f):i(f,g)))var g=f,m=l}return m}function nc(e,n){var i=[];return ia(e,function(a,s,l){n(a,s,l)&&i.push(a)}),i}function lr(e,n,i,a,s){var l=-1,f=e.length;for(i||(i=qi),s||(s=[]);++l<f;){var g=e[l];n>0&&i(g)?n>1?lr(g,n-1,i,a,s):It(s,g):a||(s[s.length]=g)}return s}var Qa=Tc(),Za=Tc(!0);function Ni(e,n){return e&&Qa(e,n,Ar)}function Yu(e,n){return e&&Za(e,n,Ar)}function Ts(e,n){return Ln(n,function(i){return jo(e[i])})}function oa(e,n){for(var i=0,a=(n=ua(n,e)).length;null!=e&&i<a;)e=e[yo(n[i++])];return i&&i==a?e:p}function rc(e,n,i){var a=n(e);return $t(e)?a:It(a,i(e))}function Jr(e){return null==e?e===p?"[object Undefined]":"[object Null]":Oa&&Oa in _n(e)?function wd(e){var n=Ne.call(e,Oa),i=e[Oa];try{e[Oa]=p;var a=!0}catch(l){}var s=Tt.call(e);return a&&(n?e[Oa]=i:delete e[Oa]),s}(e):function kd(e){return Tt.call(e)}(e)}function Xu(e,n){return e>n}function Ku(e,n){return null!=e&&Ne.call(e,n)}function id(e,n){return null!=e&&n in _n(e)}function Ju(e,n,i){for(var a=i?Hr:jn,s=e[0].length,l=e.length,f=l,g=Ae(l),m=1/0,v=[];f--;){var A=e[f];f&&n&&(A=St(A,ln(n))),m=Ur(A.length,m),g[f]=!i&&(n||s>=120&&A.length>=120)?new Ra(f&&A):p}A=e[0];var B=-1,Y=g[0];e:for(;++B<s&&v.length<m;){var te=A[B],ue=n?n(te):te;if(te=i||0!==te?te:0,!(Y?Ia(Y,ue):a(v,ue,i))){for(f=l;--f;){var xe=g[f];if(!(xe?Ia(xe,ue):a(e[f],ue,i)))continue e}Y&&Y.push(ue),v.push(te)}}return v}function Es(e,n,i){var a=null==(e=Uc(e,n=ua(n,e)))?e:e[yo(Ci(n))];return null==a?p:Ee(a,e,i)}function Qu(e){return er(e)&&Jr(e)==Re}function aa(e,n,i,a,s){return e===n||(null==e||null==n||!er(e)&&!er(n)?e!=e&&n!=n:function Zu(e,n,i,a,s,l){var f=$t(e),g=$t(n),m=f?ze:$r(e),v=g?ze:$r(n),A=(m=m==Re?H:m)==H,B=(v=v==Re?H:v)==H,Y=m==v;if(Y&&Co(e)){if(!Co(n))return!1;f=!0,A=!1}if(Y&&!A)return l||(l=new Ki),f||us(e)?Lc(e,n,i,a,s,l):function Rc(e,n,i,a,s,l,f){switch(i){case Hn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Wt:return!(e.byteLength!=n.byteLength||!l(new Un(e),new Un(n)));case st:case Ct:case Dt:return no(+e,+n);case mt:return e.name==n.name&&e.message==n.message;case Fe:case tt:return e==n+"";case Gt:var g=oi;case De:if(g||(g=Ma),e.size!=n.size&&!(1&a))return!1;var v=f.get(e);if(v)return v==n;a|=2,f.set(e,n);var A=Lc(g(e),g(n),a,s,l,f);return f.delete(e),A;case yt:if(Ws)return Ws.call(e)==Ws.call(n)}return!1}(e,n,m,i,a,s,l);if(!(1&i)){var te=A&&Ne.call(e,"__wrapped__"),ue=B&&Ne.call(n,"__wrapped__");if(te||ue){var xe=te?e.value():e,ge=ue?n.value():n;return l||(l=new Ki),s(xe,ge,i,a,l)}}return!!Y&&(l||(l=new Ki),function Nc(e,n,i,a,s,l){var f=1&i,g=ca(e),m=g.length;if(m!=ca(n).length&&!f)return!1;for(var B=m;B--;){var Y=g[B];if(!(f?Y in n:Ne.call(n,Y)))return!1}var te=l.get(e),ue=l.get(n);if(te&&ue)return te==n&&ue==e;var xe=!0;l.set(e,n),l.set(n,e);for(var ge=f;++B<m;){var E=e[Y=g[B]],D=n[Y];if(a)var z=f?a(D,E,Y,n,e,l):a(E,D,Y,e,n,l);if(!(z===p?E===D||s(E,D,i,a,l):z)){xe=!1;break}ge||(ge="constructor"==Y)}if(xe&&!ge){var Z=e.constructor,ae=n.constructor;Z!=ae&&"constructor"in e&&"constructor"in n&&!("function"==typeof Z&&Z instanceof Z&&"function"==typeof ae&&ae instanceof ae)&&(xe=!1)}return l.delete(e),l.delete(n),xe}(e,n,i,a,s,l))}(e,n,i,a,aa,s))}function qu(e,n,i,a){var s=i.length,l=s,f=!a;if(null==e)return!l;for(e=_n(e);s--;){var g=i[s];if(f&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++s<l;){var m=(g=i[s])[0],v=e[m],A=g[1];if(f&&g[2]){if(v===p&&!(m in e))return!1}else{var B=new Ki;if(a)var Y=a(v,A,m,e,n,B);if(!(Y===p?aa(A,v,3,a,B):Y))return!1}}return!0}function oc(e){return!(!Kn(e)||function Pd(e){return!!rt&&rt in e}(e))&&(jo(e)?Zt:_a).test(Ha(e))}function uc(e){return"function"==typeof e?e:null==e?qr:"object"==typeof e?$t(e)?Gr(e[0],e[1]):bi(e):Nf(e)}function el(e){if(!Ms(e))return Uf(e);var n=[];for(var i in _n(e))Ne.call(e,i)&&"constructor"!=i&&n.push(i);return n}function tl(e,n){return e<n}function lc(e,n){var i=-1,a=ui(e)?Ae(e.length):[];return ia(e,function(s,l,f){a[++i]=n(s,l,f)}),a}function bi(e){var n=dl(e);return 1==n.length&&n[0][2]?jc(n[0][0],n[0][1]):function(i){return i===e||qu(i,e,n)}}function Gr(e,n){return Xn(e)&&Hc(n)?jc(yo(e),n):function(i){var a=Fs(i,e);return a===p&&a===n?Dl(i,e):aa(n,a,3)}}function qa(e,n,i,a,s){e!==n&&Qa(n,function(l,f){if(s||(s=new Ki),Kn(l))!function cd(e,n,i,a,s,l,f){var g=gl(e,i),m=gl(n,i),v=f.get(m);if(v)Js(e,i,v);else{var A=l?l(g,m,i+"",e,n,f):p,B=A===p;if(B){var Y=$t(m),te=!Y&&Co(m),ue=!Y&&!te&&us(m);A=m,Y||te||ue?$t(g)?A=g:cr(g)?A=ai(g):te?(B=!1,A=bc(m,!0)):ue?(B=!1,A=uu(m,!0)):A=[]:Ns(m)||za(m)?(A=g,za(g)?A=Sf(g):(!Kn(g)||jo(g))&&(A=Vc(m))):B=!1}B&&(f.set(m,A),s(A,m,a,l,f),f.delete(m)),Js(e,i,A)}}(e,n,f,i,qa,a,s);else{var g=a?a(gl(e,f),l,f+"",e,n,s):p;g===p&&(g=l),Js(e,f,g)}},li)}function cc(e,n){var i=e.length;if(i)return mo(n+=n<0?i:0,i)?e[n]:p}function fc(e,n,i){n=n.length?St(n,function(l){return $t(l)?function(f){return oa(f,1===l.length?l[0]:l)}:l}):[qr];var a=-1;return n=St(n,ln(Lt())),function Jt(_e,He){var Ae=_e.length;for(_e.sort(He);Ae--;)_e[Ae]=_e[Ae].value;return _e}(lc(e,function(l,f,g){return{criteria:St(n,function(v){return v(l)}),index:++a,value:l}}),function(l,f){return function vd(e,n,i){for(var a=-1,s=e.criteria,l=n.criteria,f=s.length,g=i.length;++a<f;){var m=lu(s[a],l[a]);if(m)return a>=g?m:m*("desc"==i[a]?-1:1)}return e.index-n.index}(l,f,i)})}function nl(e,n,i){for(var a=-1,s=n.length,l={};++a<s;){var f=n[a],g=oa(e,f);i(g,f)&&es(l,ua(f,e),g)}return l}function tu(e,n,i,a){var s=a?bt:hr,l=-1,f=n.length,g=e;for(e===n&&(n=ai(n)),i&&(g=St(e,ln(i)));++l<f;)for(var m=0,v=n[l],A=i?i(v):v;(m=s(g,A,m,a))>-1;)g!==e&&ho.call(g,m,1),ho.call(e,m,1);return e}function rl(e,n){for(var i=e?n.length:0,a=i-1;i--;){var s=n[i];if(i==a||s!==l){var l=s;mo(s)?ho.call(e,s,1):iu(e,s)}}return e}function nu(e,n){return e+ys(Jl()*(n-e+1))}function il(e,n){var i="";if(!e||n<1||n>On)return i;do{n%2&&(i+=e),(n=ys(n/2))&&(e+=e)}while(n);return i}function en(e,n){return vl(zc(e,n,qr),e+"")}function dd(e){return Uu(cs(e))}function ol(e,n){var i=cs(e);return ks(i,yi(n,0,i.length))}function es(e,n,i,a){if(!Kn(e))return e;for(var s=-1,l=(n=ua(n,e)).length,f=l-1,g=e;null!=g&&++s<l;){var m=yo(n[s]),v=i;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(s!=f){var A=g[m];(v=a?a(A,m,g):p)===p&&(v=Kn(A)?A:mo(n[s+1])?[]:{})}ra(g,m,v),g=g[m]}return e}var pc=Ir?function(e,n){return Ir.set(e,n),e}:qr,hd=Us?function(e,n){return Us(e,"toString",{configurable:!0,enumerable:!1,value:zl(n),writable:!0})}:qr;function Bt(e){return ks(cs(e))}function Wr(e,n,i){var a=-1,s=e.length;n<0&&(n=-n>s?0:s+n),(i=i>s?s:i)<0&&(i+=s),s=n>i?0:i-n>>>0,n>>>=0;for(var l=Ae(s);++a<s;)l[a]=e[a+n];return l}function Ji(e,n){var i;return ia(e,function(a,s,l){return!(i=n(a,s,l))}),!!i}function ru(e,n,i){var a=0,s=null==e?a:e.length;if("number"==typeof n&&n==n&&s<=2147483647){for(;a<s;){var l=a+s>>>1,f=e[l];null!==f&&!wi(f)&&(i?f<=n:f<n)?a=l+1:s=l}return s}return al(e,n,qr,i)}function al(e,n,i,a){var s=0,l=null==e?0:e.length;if(0===l)return 0;for(var f=(n=i(n))!=n,g=null===n,m=wi(n),v=n===p;s<l;){var A=ys((s+l)/2),B=i(e[A]),Y=B!==p,te=null===B,ue=B==B,xe=wi(B);if(f)var ge=a||ue;else ge=v?ue&&(a||Y):g?ue&&Y&&(a||!te):m?ue&&Y&&!te&&(a||!xe):!te&&!xe&&(a?B<=n:B<n);ge?s=A+1:l=A}return Ur(l,4294967294)}function sl(e,n){for(var i=-1,a=e.length,s=0,l=[];++i<a;){var f=e[i],g=n?n(f):f;if(!i||!no(g,m)){var m=g;l[s++]=0===f?0:f}}return l}function gc(e){return"number"==typeof e?e:wi(e)?NaN:+e}function _i(e){if("string"==typeof e)return e;if($t(e))return St(e,_i)+"";if(wi(e))return Ql?Ql.call(e):"";var n=e+"";return"0"==n&&1/e==-_t?"-0":n}function sa(e,n,i){var a=-1,s=jn,l=e.length,f=!0,g=[],m=g;if(i)f=!1,s=Hr;else if(l>=200){var v=n?null:_d(e);if(v)return Ma(v);f=!1,s=Ia,m=new Ra}else m=n?[]:g;e:for(;++a<l;){var A=e[a],B=n?n(A):A;if(A=i||0!==A?A:0,f&&B==B){for(var Y=m.length;Y--;)if(m[Y]===B)continue e;n&&m.push(B),g.push(A)}else s(m,B,i)||(m!==g&&m.push(B),g.push(A))}return g}function iu(e,n){return null==(e=Uc(e,n=ua(n,e)))||delete e[yo(Ci(n))]}function vc(e,n,i,a){return es(e,n,i(oa(e,n)),a)}function ou(e,n,i,a){for(var s=e.length,l=a?s:-1;(a?l--:++l<s)&&n(e[l],l,e););return i?Wr(e,a?0:l,a?l+1:s):Wr(e,a?l+1:0,a?s:l)}function mc(e,n){var i=e;return i instanceof fn&&(i=i.value()),xr(n,function(a,s){return s.func.apply(s.thisArg,It([a],s.args))},i)}function ul(e,n,i){var a=e.length;if(a<2)return a?sa(e[0]):[];for(var s=-1,l=Ae(a);++s<a;)for(var f=e[s],g=-1;++g<a;)g!=s&&(l[s]=Na(l[s]||f,e[g],n,i));return sa(lr(l,1),n,i)}function yc(e,n,i){for(var a=-1,s=e.length,l=n.length,f={};++a<s;)i(f,e[a],a<l?n[a]:p);return f}function Da(e){return cr(e)?e:[]}function au(e){return"function"==typeof e?e:qr}function ua(e,n){return $t(e)?e:Xn(e,n)?[e]:pu(Sn(e))}var xc=en;function Qi(e,n,i){var a=e.length;return i=i===p?a:i,!n&&i>=a?e:Wr(e,n,i)}var su=Bf||function(e){return u.clearTimeout(e)};function bc(e,n){if(n)return e.slice();var i=e.length,a=Yn?Yn(i):new e.constructor(i);return e.copy(a),a}function ll(e){var n=new e.constructor(e.byteLength);return new Un(n).set(new Un(e)),n}function uu(e,n){var i=n?ll(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function lu(e,n){if(e!==n){var i=e!==p,a=null===e,s=e==e,l=wi(e),f=n!==p,g=null===n,m=n==n,v=wi(n);if(!g&&!v&&!l&&e>n||l&&f&&m&&!g&&!v||a&&f&&m||!i&&m||!s)return 1;if(!a&&!l&&!v&&e<n||v&&i&&s&&!a&&!l||g&&i&&s||!f&&s||!m)return-1}return 0}function Cc(e,n,i,a){for(var s=-1,l=e.length,f=i.length,g=-1,m=n.length,v=wr(l-f,0),A=Ae(m+v),B=!a;++g<m;)A[g]=n[g];for(;++s<f;)(B||s<l)&&(A[i[s]]=e[s]);for(;v--;)A[g++]=e[s++];return A}function wc(e,n,i,a){for(var s=-1,l=e.length,f=-1,g=i.length,m=-1,v=n.length,A=wr(l-g,0),B=Ae(A+v),Y=!a;++s<A;)B[s]=e[s];for(var te=s;++m<v;)B[te+m]=n[m];for(;++f<g;)(Y||s<l)&&(B[te+i[f]]=e[s++]);return B}function ai(e,n){var i=-1,a=e.length;for(n||(n=Ae(a));++i<a;)n[i]=e[i];return n}function go(e,n,i,a){var s=!i;i||(i={});for(var l=-1,f=n.length;++l<f;){var g=n[l],m=a?a(i[g],e[g],g,i,e):p;m===p&&(m=e[g]),s?po(i,g,m):ra(i,g,m)}return i}function cu(e,n){return function(i,a){var s=$t(i)?Be:nd,l=n?n():{};return s(i,e,Lt(a,2),l)}}function ts(e){return en(function(n,i){var a=-1,s=i.length,l=s>1?i[s-1]:p,f=s>2?i[2]:p;for(l=e.length>3&&"function"==typeof l?(s--,l):p,f&&pn(i[0],i[1],f)&&(l=s<3?p:l,s=1),n=_n(n);++a<s;){var g=i[a];g&&e(n,g,a,l)}return n})}function Sc(e,n){return function(i,a){if(null==i)return i;if(!ui(i))return e(i,a);for(var s=i.length,l=n?s:-1,f=_n(i);(n?l--:++l<s)&&!1!==a(f[l],l,f););return i}}function Tc(e){return function(n,i,a){for(var s=-1,l=_n(n),f=a(n),g=f.length;g--;){var m=f[e?g:++s];if(!1===i(l[m],m,l))break}return n}}function Ec(e){return function(n){var i=pr(n=Sn(n))?an(n):p,a=i?i[0]:n.charAt(0),s=i?Qi(i,1).join(""):n.slice(1);return a[e]()+s}}function ns(e){return function(n){return xr(jl(wp(n).replace(Pa,"")),e,"")}}function Ps(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=ws(e.prototype),a=e.apply(i,n);return Kn(a)?a:i}}function Pc(e){return function(n,i,a){var s=_n(n);if(!ui(n)){var l=Lt(i,3);n=Ar(n),i=function(g){return l(s[g],g,s)}}var f=e(n,i,a);return f>-1?s[l?n[f]:f]:p}}function Ic(e){return qn(function(n){var i=n.length,a=i,s=Yi.prototype.thru;for(e&&n.reverse();a--;){var l=n[a];if("function"!=typeof l)throw new X(T);if(s&&!f&&"wrapper"==fa(l))var f=new Yi([],!0)}for(a=f?a:i;++a<i;){var g=fa(l=n[a]),m="wrapper"==g?is(l):p;f=m&&pl(m[0])&&424==m[1]&&!m[4].length&&1==m[9]?f[fa(m[0])].apply(f,m[3]):1==l.length&&pl(l)?f[g]():f.thru(l)}return function(){var v=arguments,A=v[0];if(f&&1==v.length&&$t(A))return f.plant(A).value();for(var B=0,Y=i?n[B].apply(this,v):A;++B<i;)Y=n[B].call(this,Y);return Y}})}function fu(e,n,i,a,s,l,f,g,m,v){var A=n&b,B=1&n,Y=2&n,te=24&n,ue=512&n,xe=Y?p:Ps(e);return function ge(){for(var E=arguments.length,D=Ae(E),z=E;z--;)D[z]=arguments[z];if(te)var Z=vo(ge),ae=Lu(D,Z);if(a&&(D=Cc(D,a,s,te)),l&&(D=wc(D,l,f,te)),E-=ae,te&&E<v){var ve=Zn(D,Z);return cl(e,n,fu,ge.placeholder,i,D,ve,g,m,v-E)}var we=B?i:this,Me=Y?we[e]:e;return E=D.length,g?D=Ld(D,g):ue&&E>1&&D.reverse(),A&&m<E&&(D.length=m),this&&this!==u&&this instanceof ge&&(Me=xe||Ps(Me)),Me.apply(we,D)}}function Ac(e,n){return function(i,a){return function ic(e,n,i,a){return Ni(e,function(s,l,f){n(a,i(s),l,f)}),a}(i,e,n(a),{})}}function du(e,n){return function(i,a){var s;if(i===p&&a===p)return n;if(i!==p&&(s=i),a!==p){if(s===p)return a;"string"==typeof i||"string"==typeof a?(i=_i(i),a=_i(a)):(i=gc(i),a=gc(a)),s=e(i,a)}return s}}function la(e){return qn(function(n){return n=St(n,ln(Lt())),en(function(i){var a=this;return e(n,function(s){return Ee(s,a,i)})})})}function Is(e,n){var i=(n=n===p?" ":_i(n)).length;if(i<2)return i?il(n,e):n;var a=il(n,$i(e/mn(n)));return pr(n)?Qi(an(a),0,e).join(""):a.slice(0,e)}function As(e){return function(n,i,a){return a&&"number"!=typeof a&&pn(n,i,a)&&(i=a=p),n=ga(n),i===p?(i=n,n=0):i=ga(i),function hc(e,n,i,a){for(var s=-1,l=wr($i((n-e)/(i||1)),0),f=Ae(l);l--;)f[a?l:++s]=e,e+=i;return f}(n,i,a=a===p?n<i?1:-1:ga(a),e)}}function rs(e){return function(n,i){return"string"==typeof n&&"string"==typeof i||(n=Fi(n),i=Fi(i)),e(n,i)}}function cl(e,n,i,a,s,l,f,g,m,v){var A=8&n;n|=A?32:64,4&(n&=~(A?64:32))||(n&=-4);var xe=[e,n,s,A?l:p,A?f:p,A?p:l,A?p:f,g,m,v],ge=i.apply(p,xe);return pl(e)&&Gc(ge,xe),ge.placeholder=a,Bo(ge,e,n)}function fl(e){var n=zn[e];return function(i,a){if(i=Fi(i),(a=null==a?0:Ur(Yt(a),292))&&Nu(i)){var s=(Sn(i)+"e").split("e");return+((s=(Sn(n(s[0]+"e"+(+s[1]+a)))+"e").split("e"))[0]+"e"+(+s[1]-a))}return n(i)}}var _d=ka&&1/Ma(new ka([,-0]))[1]==_t?function(e){return new ka(e)}:Gl;function Mc(e){return function(n){var i=$r(n);return i==Gt?oi(n):i==De?function Hs(_e){var He=-1,Ae=Array(_e.size);return _e.forEach(function(ct){Ae[++He]=[ct,ct]}),Ae}(n):function Lo(_e,He){return St(He,function(Ae){return[Ae,_e[Ae]]})}(n,e(n))}}function Zi(e,n,i,a,s,l,f,g){var m=2&n;if(!m&&"function"!=typeof e)throw new X(T);var v=a?a.length:0;if(v||(n&=-97,a=s=p),f=f===p?f:wr(Yt(f),0),g=g===p?g:Yt(g),v-=s?s.length:0,64&n){var A=a,B=s;a=s=p}var Y=m?p:is(e),te=[e,n,i,a,s,A,B,l,f,g];if(Y&&function Md(e,n){var i=e[1],a=n[1],s=i|a;if(!(s<131||(a==b&&8==i||a==b&&256==i&&e[7].length<=n[8]||384==a&&n[7].length<=n[8]&&8==i)))return e;1&a&&(e[2]=n[2],s|=1&i?0:4);var g=n[3];if(g){var m=e[3];e[3]=m?Cc(m,g,n[4]):g,e[4]=m?Zn(e[3],F):n[4]}(g=n[5])&&(e[5]=(m=e[5])?wc(m,g,n[6]):g,e[6]=m?Zn(e[5],F):n[6]),(g=n[7])&&(e[7]=g),a&b&&(e[8]=null==e[8]?n[8]:Ur(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=s}(te,Y),e=te[0],n=te[1],i=te[2],a=te[3],s=te[4],!(g=te[9]=te[9]===p?m?0:e.length:wr(te[9]-v,0))&&24&n&&(n&=-25),n&&1!=n)ue=8==n||16==n?function xd(e,n,i){var a=Ps(e);return function s(){for(var l=arguments.length,f=Ae(l),g=l,m=vo(s);g--;)f[g]=arguments[g];var v=l<3&&f[0]!==m&&f[l-1]!==m?[]:Zn(f,m);return(l-=v.length)<i?cl(e,n,fu,s.placeholder,p,f,v,p,p,i-l):Ee(this&&this!==u&&this instanceof s?a:e,this,f)}}(e,n,g):32!=n&&33!=n||s.length?fu.apply(p,te):function bd(e,n,i,a){var s=1&n,l=Ps(e);return function f(){for(var g=-1,m=arguments.length,v=-1,A=a.length,B=Ae(A+m),Y=this&&this!==u&&this instanceof f?l:e;++v<A;)B[v]=a[v];for(;m--;)B[v++]=arguments[++g];return Ee(Y,s?i:this,B)}}(e,n,i,a);else var ue=function yd(e,n,i){var a=1&n,s=Ps(e);return function l(){return(this&&this!==u&&this instanceof l?s:e).apply(a?i:this,arguments)}}(e,n,i);return Bo((Y?pc:Gc)(ue,te),e,n)}function Oc(e,n,i,a){return e===p||no(e,Ve[i])&&!Ne.call(a,i)?n:e}function kc(e,n,i,a,s,l){return Kn(e)&&Kn(n)&&(l.set(n,e),qa(e,n,p,kc,l),l.delete(n)),e}function Cd(e){return Ns(e)?p:e}function Lc(e,n,i,a,s,l){var f=1&i,g=e.length,m=n.length;if(g!=m&&!(f&&m>g))return!1;var v=l.get(e),A=l.get(n);if(v&&A)return v==n&&A==e;var B=-1,Y=!0,te=2&i?new Ra:p;for(l.set(e,n),l.set(n,e);++B<g;){var ue=e[B],xe=n[B];if(a)var ge=f?a(xe,ue,B,n,e,l):a(ue,xe,B,e,n,l);if(ge!==p){if(ge)continue;Y=!1;break}if(te){if(!Fn(n,function(E,D){if(!Ia(te,D)&&(ue===E||s(ue,E,i,a,l)))return te.push(D)})){Y=!1;break}}else if(ue!==xe&&!s(ue,xe,i,a,l)){Y=!1;break}}return l.delete(e),l.delete(n),Y}function qn(e){return vl(zc(e,p,Jc),e+"")}function ca(e){return rc(e,Ar,hl)}function Fa(e){return rc(e,li,Dc)}var is=Ir?function(e){return Ir.get(e)}:Gl;function fa(e){for(var n=e.name+"",i=Xa[n],a=Ne.call(Xa,n)?i.length:0;a--;){var s=i[a],l=s.func;if(null==l||l==e)return s.name}return n}function vo(e){return(Ne.call(K,"placeholder")?K:e).placeholder}function Lt(){var e=K.iteratee||va;return e=e===va?uc:e,arguments.length?e(arguments[0],arguments[1]):e}function hu(e,n){var i=e.__data__;return function Di(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?i["string"==typeof n?"string":"hash"]:i.map}function dl(e){for(var n=Ar(e),i=n.length;i--;){var a=n[i],s=e[a];n[i]=[a,s,Hc(s)]}return n}function Va(e,n){var i=function vs(_e,He){return null==_e?p:_e[He]}(e,n);return oc(i)?i:p}var hl=Gs?function(e){return null==e?[]:(e=_n(e),Ln(Gs(e),function(n){return ta.call(e,n)}))}:Vs,Dc=Gs?function(e){for(var n=[];e;)It(n,hl(e)),e=Cr(e);return n}:Vs,$r=Jr;function Fc(e,n,i){for(var a=-1,s=(n=ua(n,e)).length,l=!1;++a<s;){var f=yo(n[a]);if(!(l=null!=e&&i(e,f)))break;e=e[f]}return l||++a!=s?l:!!(s=null==e?0:e.length)&&Iu(s)&&mo(f,s)&&($t(e)||za(e))}function Vc(e){return"function"!=typeof e.constructor||Ms(e)?{}:ws(Cr(e))}function qi(e){return $t(e)||za(e)||!!(zr&&e&&e[zr])}function mo(e,n){var i=typeof e;return!!(n=null==n?On:n)&&("number"==i||"symbol"!=i&&Po.test(e))&&e>-1&&e%1==0&&e<n}function pn(e,n,i){if(!Kn(i))return!1;var a=typeof n;return!!("number"==a?ui(i)&&mo(n,i.length):"string"==a&&n in i)&&no(i[n],e)}function Xn(e,n){if($t(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!wi(e))||io.test(e)||!Vr.test(e)||null!=n&&e in _n(n)}function pl(e){var n=fa(e),i=K[n];if("function"!=typeof i||!(n in fn.prototype))return!1;if(e===i)return!0;var a=is(i);return!!a&&e===a[0]}(Du&&$r(new Du(new ArrayBuffer(1)))!=Hn||xs&&$r(new xs)!=Gt||Fu&&$r(Fu.resolve())!=q||ka&&$r(new ka)!=De||bs&&$r(new bs)!=Kt)&&($r=function(e){var n=Jr(e),i=n==H?e.constructor:p,a=i?Ha(i):"";if(a)switch(a){case Vu:return Hn;case Yf:return Gt;case No:return q;case Cs:return De;case Xf:return Kt}return n});var Id=Se?jo:Wl;function Ms(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Ve)}function Hc(e){return e==e&&!Kn(e)}function jc(e,n){return function(i){return null!=i&&i[e]===n&&(n!==p||e in _n(i))}}function zc(e,n,i){return n=wr(n===p?e.length-1:n,0),function(){for(var a=arguments,s=-1,l=wr(a.length-n,0),f=Ae(l);++s<l;)f[s]=a[n+s];s=-1;for(var g=Ae(n+1);++s<n;)g[s]=a[s];return g[n]=i(f),Ee(e,this,g)}}function Uc(e,n){return n.length<2?e:oa(e,Wr(n,0,-1))}function Ld(e,n){for(var i=e.length,a=Ur(n.length,i),s=ai(e);a--;){var l=n[a];e[a]=mo(l,i)?s[l]:p}return e}function gl(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var Gc=Wc(pc),Os=jf||function(e,n){return u.setTimeout(e,n)},vl=Wc(hd);function Bo(e,n,i){var a=n+"";return vl(e,function Ba(e,n){var i=n.length;if(!i)return e;var a=i-1;return n[a]=(i>1?"& ":"")+n[a],n=n.join(i>2?", ":" "),e.replace(ya,"{\n/* [wrapped with "+n+"] */\n")}(a,function Rd(e,n){return dt(Nn,function(i){var a="_."+i[0];n&i[1]&&!jn(e,a)&&e.push(a)}),e.sort()}(function Td(e){var n=e.match(xa);return n?n[1].split(Tr):[]}(a),i)))}function Wc(e){var n=0,i=0;return function(){var a=Gf(),s=16-(a-i);if(i=a,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(p,arguments)}}function ks(e,n){var i=-1,a=e.length,s=a-1;for(n=n===p?a:n;++i<n;){var l=nu(i,s),f=e[l];e[l]=e[i],e[i]=f}return e.length=n,e}var pu=function Ad(e){var n=Tu(e,function(a){return 500===i.size&&i.clear(),a}),i=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(oo,function(i,a,s,l){n.push(s?l.replace(Yo,"$1"):a||i)}),n});function yo(e){if("string"==typeof e||wi(e))return e;var n=e+"";return"0"==n&&1/e==-_t?"-0":n}function Ha(e){if(null!=e){try{return je.call(e)}catch(n){}try{return e+""}catch(n){}}return""}function $c(e){if(e instanceof fn)return e.clone();var n=new Yi(e.__wrapped__,e.__chain__);return n.__actions__=ai(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Vd=en(function(e,n){return cr(e)?Na(e,lr(n,1,cr,!0)):[]}),Yc=en(function(e,n){var i=Ci(n);return cr(i)&&(i=p),cr(e)?Na(e,lr(n,1,cr,!0),Lt(i,2)):[]}),eo=en(function(e,n){var i=Ci(n);return cr(i)&&(i=p),cr(e)?Na(e,lr(n,1,cr,!0),p,i):[]});function Xc(e,n,i){var a=null==e?0:e.length;if(!a)return-1;var s=null==i?0:Yt(i);return s<0&&(s=wr(a+s,0)),Ui(e,Lt(n,3),s)}function Kc(e,n,i){var a=null==e?0:e.length;if(!a)return-1;var s=a-1;return i!==p&&(s=Yt(i),s=i<0?wr(a+s,0):Ur(s,a-1)),Ui(e,Lt(n,3),s,!0)}function Jc(e){return null!=e&&e.length?lr(e,1):[]}function Qc(e){return e&&e.length?e[0]:p}var Xd=en(function(e){var n=St(e,Da);return n.length&&n[0]===e[0]?Ju(n):[]}),Zc=en(function(e){var n=Ci(e),i=St(e,Da);return n===Ci(i)?n=p:i.pop(),i.length&&i[0]===e[0]?Ju(i,Lt(n,2)):[]}),Kd=en(function(e){var n=Ci(e),i=St(e,Da);return(n="function"==typeof n?n:p)&&i.pop(),i.length&&i[0]===e[0]?Ju(i,p,n):[]});function Ci(e){var n=null==e?0:e.length;return n?e[n-1]:p}var qd=en(qc);function qc(e,n){return e&&e.length&&n&&n.length?tu(e,n):e}var nh=qn(function(e,n){var i=null==e?0:e.length,a=Ss(e,n);return rl(e,St(n,function(s){return mo(s,i)?+s:s}).sort(lu)),a});function ml(e){return null==e?e:$f.call(e)}var yh=en(function(e){return sa(lr(e,1,cr,!0))}),xh=en(function(e){var n=Ci(e);return cr(n)&&(n=p),sa(lr(e,1,cr,!0),Lt(n,2))}),Ze=en(function(e){var n=Ci(e);return n="function"==typeof n?n:p,sa(lr(e,1,cr,!0),p,n)});function Le(e){if(!e||!e.length)return[];var n=0;return e=Ln(e,function(i){if(cr(i))return n=wr(i.length,n),!0}),vi(n,function(i){return St(e,jr(i))})}function Ho(e,n){if(!e||!e.length)return[];var i=Le(e);return null==n?i:St(i,function(a){return Ee(n,p,a)})}var to=en(function(e,n){return cr(e)?Na(e,n):[]}),si=en(function(e){return ul(Ln(e,cr))}),da=en(function(e){var n=Ci(e);return cr(n)&&(n=p),ul(Ln(e,cr),Lt(n,2))}),Ls=en(function(e){var n=Ci(e);return n="function"==typeof n?n:p,ul(Ln(e,cr),p,n)}),it=en(Le),xo=en(function(e){var n=e.length,i=n>1?e[n-1]:p;return i="function"==typeof i?(e.pop(),i):p,Ho(e,i)});function _l(e){var n=K(e);return n.__chain__=!0,n}function Qr(e,n){return n(e)}var pa=qn(function(e){var n=e.length,i=n?e[0]:0,a=this.__wrapped__,s=function(l){return Ss(l,e)};return!(n>1||this.__actions__.length)&&a instanceof fn&&mo(i)?((a=a.slice(i,+i+(n?1:0))).__actions__.push({func:Qr,args:[s],thisArg:p}),new Yi(a,this.__chain__).thru(function(l){return n&&!l.length&&l.push(p),l})):this.thru(s)}),Ch=cu(function(e,n,i){Ne.call(e,i)?++e[i]:po(e,i,1)}),yu=Pc(Xc),nf=Pc(Kc);function of(e,n){return($t(e)?dt:ia)(e,Lt(n,3))}function bo(e,n){return($t(e)?Ht:$u)(e,Lt(n,3))}var wl=cu(function(e,n,i){Ne.call(e,i)?e[i].push(n):po(e,i,[n])}),Sl=en(function(e,n,i){var a=-1,s="function"==typeof n,l=ui(e)?Ae(e.length):[];return ia(e,function(f){l[++a]=s?Ee(n,f,i):Es(f,n,i)}),l}),Tl=cu(function(e,n,i){po(e,i,n)});function Zr(e,n){return($t(e)?St:lc)(e,Lt(n,3))}var as=cu(function(e,n,i){e[i?0:1].push(n)},function(){return[[],[]]}),Ph=en(function(e,n){if(null==e)return[];var i=n.length;return i>1&&pn(e,n[0],n[1])?n=[]:i>2&&pn(n[0],n[1],n[2])&&(n=[n[0]]),fc(e,lr(n,1),[])}),Su=Hf||function(){return u.Date.now()};function af(e,n,i){return n=i?p:n,Zi(e,b,p,p,p,p,n=e&&null==n?e.length:n)}function sf(e,n){var i;if("function"!=typeof n)throw new X(T);return e=Yt(e),function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=p),i}}var Pl=en(function(e,n,i){var a=1;if(i.length){var s=Zn(i,vo(Pl));a|=32}return Zi(e,a,n,i,s)}),uf=en(function(e,n,i){var a=3;if(i.length){var s=Zn(i,vo(uf));a|=32}return Zi(n,a,e,i,s)});function ff(e,n,i){var a,s,l,f,g,m,v=0,A=!1,B=!1,Y=!0;if("function"!=typeof e)throw new X(T);function te(ve){var we=a,Me=s;return a=s=p,v=ve,f=e.apply(Me,we)}function ue(ve){return v=ve,g=Os(E,n),A?te(ve):f}function ge(ve){var we=ve-m;return m===p||we>=n||we<0||B&&ve-v>=l}function E(){var ve=Su();if(ge(ve))return D(ve);g=Os(E,function xe(ve){var Ye=n-(ve-m);return B?Ur(Ye,l-(ve-v)):Ye}(ve))}function D(ve){return g=p,Y&&a?te(ve):(a=s=p,f)}function ae(){var ve=Su(),we=ge(ve);if(a=arguments,s=this,m=ve,we){if(g===p)return ue(m);if(B)return su(g),g=Os(E,n),te(m)}return g===p&&(g=Os(E,n)),f}return n=Fi(n)||0,Kn(i)&&(A=!!i.leading,l=(B="maxWait"in i)?wr(Fi(i.maxWait)||0,n):l,Y="trailing"in i?!!i.trailing:Y),ae.cancel=function z(){g!==p&&su(g),v=0,a=m=s=g=p},ae.flush=function Z(){return g===p?f:D(Su())},ae}var Ah=en(function(e,n){return ec(e,1,n)}),Mh=en(function(e,n,i){return ec(e,Fi(n)||0,i)});function Tu(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new X(T);var i=function(){var a=arguments,s=n?n.apply(this,a):a[0],l=i.cache;if(l.has(s))return l.get(s);var f=e.apply(this,a);return i.cache=l.set(s,f)||l,f};return i.cache=new(Tu.Cache||Xi),i}function Eu(e){if("function"!=typeof e)throw new X(T);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Tu.Cache=Xi;var kh=xc(function(e,n){var i=(n=1==n.length&&$t(n[0])?St(n[0],ln(Lt())):St(lr(n,1),ln(Lt()))).length;return en(function(a){for(var s=-1,l=Ur(a.length,i);++s<l;)a[s]=n[s].call(this,a[s]);return Ee(e,this,a)})}),Il=en(function(e,n){var i=Zn(n,vo(Il));return Zi(e,32,p,n,i)}),hf=en(function(e,n){var i=Zn(n,vo(hf));return Zi(e,64,p,n,i)}),pf=qn(function(e,n){return Zi(e,256,p,p,p,n)});function no(e,n){return e===n||e!=e&&n!=n}var Vh=rs(Xu),yf=rs(function(e,n){return e>=n}),za=Qu(function(){return arguments}())?Qu:function(e){return er(e)&&Ne.call(e,"callee")&&!ta.call(e,"callee")},$t=Ae.isArray,Bh=U?ln(U):function ad(e){return er(e)&&Jr(e)==Wt};function ui(e){return null!=e&&Iu(e.length)&&!jo(e)}function cr(e){return er(e)&&ui(e)}var Co=Kl||Wl,Rs=re?ln(re):function eu(e){return er(e)&&Jr(e)==Ct};function Ml(e){if(!er(e))return!1;var n=Jr(e);return n==mt||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Ns(e)}function jo(e){if(!Kn(e))return!1;var n=Jr(e);return n==Bn||n==fi||"[object AsyncFunction]"==n||"[object Proxy]"==n}function _f(e){return"number"==typeof e&&e==Yt(e)}function Iu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=On}function Kn(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function er(e){return null!=e&&"object"==typeof e}var zo=ie?ln(ie):function sd(e){return er(e)&&$r(e)==Gt};function Cf(e){return"number"==typeof e||er(e)&&Jr(e)==Dt}function Ns(e){if(!er(e)||Jr(e)!=H)return!1;var n=Cr(e);if(null===n)return!0;var i=Ne.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&je.call(i)==Pt}var Ol=ye?ln(ye):function ac(e){return er(e)&&Jr(e)==Fe},Ll=Oe?ln(Oe):function ud(e){return er(e)&&$r(e)==De};function Go(e){return"string"==typeof e||!$t(e)&&er(e)&&Jr(e)==tt}function wi(e){return"symbol"==typeof e||er(e)&&Jr(e)==yt}var us=$e?ln($e):function sc(e){return er(e)&&Iu(e.length)&&!!Cn[Jr(e)]},wg=rs(tl),wf=rs(function(e,n){return e<=n});function Ds(e){if(!e)return[];if(ui(e))return Go(e)?an(e):ai(e);if(ms&&e[ms])return function lo(_e){for(var He,Ae=[];!(He=_e.next()).done;)Ae.push(He.value);return Ae}(e[ms]());var n=$r(e);return(n==Gt?oi:n==De?Ma:cs)(e)}function ga(e){return e?(e=Fi(e))===_t||e===-_t?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Yt(e){var n=ga(e),i=n%1;return n==n?i?n-i:n:0}function fr(e){return e?yi(Yt(e),0,nr):0}function Fi(e){if("number"==typeof e)return e;if(wi(e))return NaN;if(Kn(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=Kn(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=vn(e);var i=ba.test(e);return i||bn.test(e)?le(e.slice(2),i?2:8):Si.test(e)?NaN:+e}function Sf(e){return go(e,li(e))}function Sn(e){return null==e?"":_i(e)}var qh=ts(function(e,n){if(Ms(n)||ui(n))go(n,Ar(n),e);else for(var i in n)Ne.call(n,i)&&ra(e,i,n[i])}),Rl=ts(function(e,n){go(n,li(n),e)}),ls=ts(function(e,n,i,a){go(n,li(n),e,a)}),ep=ts(function(e,n,i,a){go(n,Ar(n),e,a)}),Tf=qn(Ss),np=en(function(e,n){e=_n(e);var i=-1,a=n.length,s=a>2?n[2]:p;for(s&&pn(n[0],n[1],s)&&(a=1);++i<a;)for(var l=n[i],f=li(l),g=-1,m=f.length;++g<m;){var v=f[g],A=e[v];(A===p||no(A,Ve[v])&&!Ne.call(e,v))&&(e[v]=l[v])}return e}),Ef=en(function(e){return e.push(p,kc),Ee(If,p,e)});function Fs(e,n,i){var a=null==e?p:oa(e,n);return a===p?i:a}function Dl(e,n){return null!=e&&Fc(e,n,id)}var cp=Ac(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=Tt.call(n)),e[n]=i},zl(qr)),fp=Ac(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=Tt.call(n)),Ne.call(e,n)?e[n].push(i):e[n]=[i]},Lt),dp=en(Es);function Ar(e){return ui(e)?zu(e):el(e)}function li(e){return ui(e)?zu(e,!0):function ld(e){if(!Kn(e))return function Od(e){var n=[];if(null!=e)for(var i in _n(e))n.push(i);return n}(e);var n=Ms(e),i=[];for(var a in e)"constructor"==a&&(n||!Ne.call(e,a))||i.push(a);return i}(e)}var gp=ts(function(e,n,i){qa(e,n,i)}),If=ts(function(e,n,i,a){qa(e,n,i,a)}),vp=qn(function(e,n){var i={};if(null==e)return i;var a=!1;n=St(n,function(l){return l=ua(l,e),a||(a=l.length>1),l}),go(e,Fa(e),i),a&&(i=xi(i,7,Cd));for(var s=n.length;s--;)iu(i,n[s]);return i}),mp=qn(function(e,n){return null==e?{}:function fd(e,n){return nl(e,n,function(i,a){return Dl(e,a)})}(e,n)});function Af(e,n){if(null==e)return{};var i=St(Fa(e),function(a){return[a]});return n=Lt(n),nl(e,i,function(a,s){return n(a,s[0])})}var bp=Mc(Ar),Bl=Mc(li);function cs(e){return null==e?[]:Qt(e,Ar(e))}var _p=ns(function(e,n,i){return n=n.toLowerCase(),e+(i?Cp(n):n)});function Cp(e){return Wo(Sn(e).toLowerCase())}function wp(e){return(e=Sn(e))&&e.replace(ps,Aa).replace(qo,"")}var kg=ns(function(e,n,i){return e+(i?"-":"")+n.toLowerCase()}),Lg=ns(function(e,n,i){return e+(i?" ":"")+n.toLowerCase()}),Rg=Ec("toLowerCase"),Tp=ns(function(e,n,i){return e+(i?"_":"")+n.toLowerCase()}),Pp=ns(function(e,n,i){return e+(i?" ":"")+Wo(n)}),Rp=ns(function(e,n,i){return e+(i?" ":"")+n.toUpperCase()}),Wo=Ec("toUpperCase");function jl(e,n,i){return e=Sn(e),(n=i?p:n)===p?function ur(_e){return Li.test(_e)}(e)?function Wi(_e){return _e.match(uo)||[]}(e):function ii(_e){return _e.match($o)||[]}(e):e.match(n)||[]}var Lf=en(function(e,n){try{return Ee(e,p,n)}catch(i){return Ml(i)?i:new Vt(i)}}),Np=qn(function(e,n){return dt(n,function(i){i=yo(i),po(e,i,Pl(e[i],e))}),e});function zl(e){return function(){return e}}var Vp=Ic(),Rr=Ic(!0);function qr(e){return e}function va(e){return uc("function"==typeof e?e:xi(e,1))}var jp=en(function(e,n){return function(i){return Es(i,e,n)}}),zp=en(function(e,n){return function(i){return Es(e,i,n)}});function Ul(e,n,i){var a=Ar(n),s=Ts(n,a);null==i&&(!Kn(n)||!s.length&&a.length)&&(i=n,n=e,e=this,s=Ts(n,Ar(n)));var l=!(Kn(i)&&"chain"in i&&!i.chain),f=jo(e);return dt(s,function(g){var m=n[g];e[g]=m,f&&(e.prototype[g]=function(){var v=this.__chain__;if(l||v){var A=e(this.__wrapped__),B=A.__actions__=ai(this.__actions__);return B.push({func:m,args:arguments,thisArg:e}),A.__chain__=v,A}return m.apply(e,It([this.value()],arguments))})}),e}function Gl(){}var Gp=la(St),Wp=la(wt),$p=la(Fn);function Nf(e){return Xn(e)?jr(yo(e)):function dc(e){return function(n){return oa(n,e)}}(e)}var Xp=As(),Kp=As(!0);function Vs(){return[]}function Wl(){return!1}var Ff=du(function(e,n){return e+n},0),Vf=fl("ceil"),tg=du(function(e,n){return e/n},1),ng=fl("floor"),lg=du(function(e,n){return e*n},1),cg=fl("round"),fg=du(function(e,n){return e-n},0);return K.after=function Ih(e,n){if("function"!=typeof n)throw new X(T);return e=Yt(e),function(){if(--e<1)return n.apply(this,arguments)}},K.ary=af,K.assign=qh,K.assignIn=Rl,K.assignInWith=ls,K.assignWith=ep,K.at=Tf,K.before=sf,K.bind=Pl,K.bindAll=Np,K.bindKey=uf,K.castArray=function ss(){if(!arguments.length)return[];var e=arguments[0];return $t(e)?e:[e]},K.chain=_l,K.chunk=function Nd(e,n,i){n=(i?pn(e,n,i):n===p)?1:wr(Yt(n),0);var a=null==e?0:e.length;if(!a||n<1)return[];for(var s=0,l=0,f=Ae($i(a/n));s<a;)f[l++]=Wr(e,s,s+=n);return f},K.compact=function Dd(e){for(var n=-1,i=null==e?0:e.length,a=0,s=[];++n<i;){var l=e[n];l&&(s[a++]=l)}return s},K.concat=function Fd(){var e=arguments.length;if(!e)return[];for(var n=Ae(e-1),i=arguments[0],a=e;a--;)n[a-1]=arguments[a];return It($t(i)?ai(i):[i],lr(n,1))},K.cond=function Dp(e){var n=null==e?0:e.length,i=Lt();return e=n?St(e,function(a){if("function"!=typeof a[1])throw new X(T);return[i(a[0]),a[1]]}):[],en(function(a){for(var s=-1;++s<n;){var l=e[s];if(Ee(l[0],this,a))return Ee(l[1],this,a)}})},K.conforms=function Fp(e){return function ql(e){var n=Ar(e);return function(i){return Wu(i,e,n)}}(xi(e,1))},K.constant=zl,K.countBy=Ch,K.create=function tp(e,n){var i=ws(e);return null==n?i:Zs(i,n)},K.curry=function lf(e,n,i){var a=Zi(e,8,p,p,p,p,p,n=i?p:n);return a.placeholder=lf.placeholder,a},K.curryRight=function cf(e,n,i){var a=Zi(e,16,p,p,p,p,p,n=i?p:n);return a.placeholder=cf.placeholder,a},K.debounce=ff,K.defaults=np,K.defaultsDeep=Ef,K.defer=Ah,K.delay=Mh,K.difference=Vd,K.differenceBy=Yc,K.differenceWith=eo,K.drop=function Bd(e,n,i){var a=null==e?0:e.length;return a?Wr(e,(n=i||n===p?1:Yt(n))<0?0:n,a):[]},K.dropRight=function Hd(e,n,i){var a=null==e?0:e.length;return a?Wr(e,0,(n=a-(n=i||n===p?1:Yt(n)))<0?0:n):[]},K.dropRightWhile=function jd(e,n){return e&&e.length?ou(e,Lt(n,3),!0,!0):[]},K.dropWhile=function zd(e,n){return e&&e.length?ou(e,Lt(n,3),!0):[]},K.fill=function Ud(e,n,i,a){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&pn(e,n,i)&&(i=0,a=s),function tc(e,n,i,a){var s=e.length;for((i=Yt(i))<0&&(i=-i>s?0:s+i),(a=a===p||a>s?s:Yt(a))<0&&(a+=s),a=i>a?0:fr(a);i<a;)e[i++]=n;return e}(e,n,i,a)):[]},K.filter=function Cg(e,n){return($t(e)?Ln:nc)(e,Lt(n,3))},K.flatMap=function rf(e,n){return lr(Zr(e,n),1)},K.flatMapDeep=function wh(e,n){return lr(Zr(e,n),_t)},K.flatMapDepth=function xu(e,n,i){return i=i===p?1:Yt(i),lr(Zr(e,n),i)},K.flatten=Jc,K.flattenDeep=function Gd(e){return null!=e&&e.length?lr(e,_t):[]},K.flattenDepth=function Wd(e,n){return null!=e&&e.length?lr(e,n=n===p?1:Yt(n)):[]},K.flip=function Oh(e){return Zi(e,512)},K.flow=Vp,K.flowRight=Rr,K.fromPairs=function gu(e){for(var n=-1,i=null==e?0:e.length,a={};++n<i;){var s=e[n];a[s[0]]=s[1]}return a},K.functions=function sp(e){return null==e?[]:Ts(e,Ar(e))},K.functionsIn=function up(e){return null==e?[]:Ts(e,li(e))},K.groupBy=wl,K.initial=function Yd(e){return null!=e&&e.length?Wr(e,0,-1):[]},K.intersection=Xd,K.intersectionBy=Zc,K.intersectionWith=Kd,K.invert=cp,K.invertBy=fp,K.invokeMap=Sl,K.iteratee=va,K.keyBy=Tl,K.keys=Ar,K.keysIn=li,K.map=Zr,K.mapKeys=function hp(e,n){var i={};return n=Lt(n,3),Ni(e,function(a,s,l){po(i,n(a,s,l),a)}),i},K.mapValues=function pp(e,n){var i={};return n=Lt(n,3),Ni(e,function(a,s,l){po(i,s,n(a,s,l))}),i},K.matches=function Bp(e){return bi(xi(e,1))},K.matchesProperty=function Hp(e,n){return Gr(e,xi(n,1))},K.memoize=Tu,K.merge=gp,K.mergeWith=If,K.method=jp,K.methodOf=zp,K.mixin=Ul,K.negate=Eu,K.nthArg=function Rf(e){return e=Yt(e),en(function(n){return cc(n,e)})},K.omit=vp,K.omitBy=function Fl(e,n){return Af(e,Eu(Lt(n)))},K.once=function df(e){return sf(2,e)},K.orderBy=function _o(e,n,i,a){return null==e?[]:($t(n)||(n=null==n?[]:[n]),$t(i=a?p:i)||(i=null==i?[]:[i]),fc(e,n,i))},K.over=Gp,K.overArgs=kh,K.overEvery=Wp,K.overSome=$p,K.partial=Il,K.partialRight=hf,K.partition=as,K.pick=mp,K.pickBy=Af,K.property=Nf,K.propertyOf=function Yp(e){return function(n){return null==e?p:oa(e,n)}},K.pull=qd,K.pullAll=qc,K.pullAllBy=function eh(e,n,i){return e&&e.length&&n&&n.length?tu(e,n,Lt(i,2)):e},K.pullAllWith=function th(e,n,i){return e&&e.length&&n&&n.length?tu(e,n,p,i):e},K.pullAt=nh,K.range=Xp,K.rangeRight=Kp,K.rearg=pf,K.reject=function Cu(e,n){return($t(e)?Ln:nc)(e,Eu(Lt(n,3)))},K.remove=function rh(e,n){var i=[];if(!e||!e.length)return i;var a=-1,s=[],l=e.length;for(n=Lt(n,3);++a<l;){var f=e[a];n(f,a,e)&&(i.push(f),s.push(a))}return rl(e,s),i},K.rest=function gf(e,n){if("function"!=typeof e)throw new X(T);return en(e,n=n===p?n:Yt(n))},K.reverse=ml,K.sampleSize=function Sh(e,n,i){return n=(i?pn(e,n,i):n===p)?1:Yt(n),($t(e)?ed:ol)(e,n)},K.set=function xp(e,n,i){return null==e?e:es(e,n,i)},K.setWith=function Vl(e,n,i,a){return a="function"==typeof a?a:p,null==e?e:es(e,n,i,a)},K.shuffle=function Th(e){return($t(e)?td:Bt)(e)},K.slice=function ih(e,n,i){var a=null==e?0:e.length;return a?(i&&"number"!=typeof i&&pn(e,n,i)?(n=0,i=a):(n=null==n?0:Yt(n),i=i===p?a:Yt(i)),Wr(e,n,i)):[]},K.sortBy=Ph,K.sortedUniq=function fh(e){return e&&e.length?sl(e):[]},K.sortedUniqBy=function dh(e,n){return e&&e.length?sl(e,Lt(n,2)):[]},K.split=function Ep(e,n,i){return i&&"number"!=typeof i&&pn(e,n,i)&&(n=i=p),(i=i===p?nr:i>>>0)?(e=Sn(e))&&("string"==typeof n||null!=n&&!Ol(n))&&!(n=_i(n))&&pr(e)?Qi(an(e),0,i):e.split(n,i):[]},K.spread=function Lh(e,n){if("function"!=typeof e)throw new X(T);return n=null==n?0:wr(Yt(n),0),en(function(i){var a=i[n],s=Qi(i,0,n);return a&&It(s,a),Ee(e,this,s)})},K.tail=function hh(e){var n=null==e?0:e.length;return n?Wr(e,1,n):[]},K.take=function ph(e,n,i){return e&&e.length?Wr(e,0,(n=i||n===p?1:Yt(n))<0?0:n):[]},K.takeRight=function gh(e,n,i){var a=null==e?0:e.length;return a?Wr(e,(n=a-(n=i||n===p?1:Yt(n)))<0?0:n,a):[]},K.takeRightWhile=function vh(e,n){return e&&e.length?ou(e,Lt(n,3),!1,!0):[]},K.takeWhile=function mh(e,n){return e&&e.length?ou(e,Lt(n,3)):[]},K.tap=function Cl(e,n){return n(e),e},K.throttle=function Rh(e,n,i){var a=!0,s=!0;if("function"!=typeof e)throw new X(T);return Kn(i)&&(a="leading"in i?!!i.leading:a,s="trailing"in i?!!i.trailing:s),ff(e,n,{leading:a,maxWait:n,trailing:s})},K.thru=Qr,K.toArray=Ds,K.toPairs=bp,K.toPairsIn=Bl,K.toPath=function qp(e){return $t(e)?St(e,yo):wi(e)?[e]:ai(pu(Sn(e)))},K.toPlainObject=Sf,K.transform=function Sg(e,n,i){var a=$t(e),s=a||Co(e)||us(e);if(n=Lt(n,4),null==i){var l=e&&e.constructor;i=s?a?new l:[]:Kn(e)&&jo(l)?ws(Cr(e)):{}}return(s?dt:Ni)(e,function(f,g,m){return n(i,f,g,m)}),i},K.unary=function Al(e){return af(e,1)},K.union=yh,K.unionBy=xh,K.unionWith=Ze,K.uniq=function yl(e){return e&&e.length?sa(e):[]},K.uniqBy=function vu(e,n){return e&&e.length?sa(e,Lt(n,2)):[]},K.uniqWith=function xl(e,n){return n="function"==typeof n?n:p,e&&e.length?sa(e,p,n):[]},K.unset=function Tg(e,n){return null==e||iu(e,n)},K.unzip=Le,K.unzipWith=Ho,K.update=function Eg(e,n,i){return null==e?e:vc(e,n,au(i))},K.updateWith=function Pg(e,n,i,a){return a="function"==typeof a?a:p,null==e?e:vc(e,n,au(i),a)},K.values=cs,K.valuesIn=function Ig(e){return null==e?[]:Qt(e,li(e))},K.without=to,K.words=jl,K.wrap=function Pu(e,n){return Il(au(n),e)},K.xor=si,K.xorBy=da,K.xorWith=Ls,K.zip=it,K.zipObject=function bl(e,n){return yc(e||[],n||[],ra)},K.zipObjectDeep=function ha(e,n){return yc(e||[],n||[],es)},K.zipWith=xo,K.entries=bp,K.entriesIn=Bl,K.extend=Rl,K.extendWith=ls,Ul(K,K),K.add=Ff,K.attempt=Lf,K.camelCase=_p,K.capitalize=Cp,K.ceil=Vf,K.clamp=function Mf(e,n,i){return i===p&&(i=n,n=p),i!==p&&(i=(i=Fi(i))==i?i:0),n!==p&&(n=(n=Fi(n))==n?n:0),yi(Fi(e),n,i)},K.clone=function vf(e){return xi(e,4)},K.cloneDeep=function Nh(e){return xi(e,5)},K.cloneDeepWith=function Dh(e,n){return xi(e,5,n="function"==typeof n?n:p)},K.cloneWith=function mf(e,n){return xi(e,4,n="function"==typeof n?n:p)},K.conformsTo=function Fh(e,n){return null==n||Wu(e,n,Ar(n))},K.deburr=wp,K.defaultTo=function Mu(e,n){return null==e||e!=e?n:e},K.divide=tg,K.endsWith=function Mg(e,n,i){e=Sn(e),n=_i(n);var a=e.length,s=i=i===p?a:yi(Yt(i),0,a);return(i-=n.length)>=0&&e.slice(i,s)==n},K.eq=no,K.escape=function Au(e){return(e=Sn(e))&&Yr.test(e)?e.replace(So,Ru):e},K.escapeRegExp=function Og(e){return(e=Sn(e))&&ir.test(e)?e.replace(Bi,"\\$&"):e},K.every=function tf(e,n,i){var a=$t(e)?wt:rd;return i&&pn(e,n,i)&&(n=p),a(e,Lt(n,3))},K.find=yu,K.findIndex=Xc,K.findKey=function rp(e,n){return Oo(e,Lt(n,3),Ni)},K.findLast=nf,K.findLastIndex=Kc,K.findLastKey=function Pf(e,n){return Oo(e,Lt(n,3),Yu)},K.floor=ng,K.forEach=of,K.forEachRight=bo,K.forIn=function Nl(e,n){return null==e?e:Qa(e,Lt(n,3),li)},K.forInRight=function ip(e,n){return null==e?e:Za(e,Lt(n,3),li)},K.forOwn=function op(e,n){return e&&Ni(e,Lt(n,3))},K.forOwnRight=function ap(e,n){return e&&Yu(e,Lt(n,3))},K.get=Fs,K.gt=Vh,K.gte=yf,K.has=function lp(e,n){return null!=e&&Fc(e,n,Ku)},K.hasIn=Dl,K.head=Qc,K.identity=qr,K.includes=function bu(e,n,i,a){e=ui(e)?e:cs(e),i=i&&!a?Yt(i):0;var s=e.length;return i<0&&(i=wr(s+i,0)),Go(e)?i<=s&&e.indexOf(n,i)>-1:!!s&&hr(e,n,i)>-1},K.indexOf=function $d(e,n,i){var a=null==e?0:e.length;if(!a)return-1;var s=null==i?0:Yt(i);return s<0&&(s=wr(a+s,0)),hr(e,n,s)},K.inRange=function Ag(e,n,i){return n=ga(n),i===p?(i=n,n=0):i=ga(i),function od(e,n,i){return e>=Ur(n,i)&&e<wr(n,i)}(e=Fi(e),n,i)},K.invoke=dp,K.isArguments=za,K.isArray=$t,K.isArrayBuffer=Bh,K.isArrayLike=ui,K.isArrayLikeObject=cr,K.isBoolean=function Hh(e){return!0===e||!1===e||er(e)&&Jr(e)==st},K.isBuffer=Co,K.isDate=Rs,K.isElement=function jh(e){return er(e)&&1===e.nodeType&&!Ns(e)},K.isEmpty=function zh(e){if(null==e)return!0;if(ui(e)&&($t(e)||"string"==typeof e||"function"==typeof e.splice||Co(e)||us(e)||za(e)))return!e.length;var n=$r(e);if(n==Gt||n==De)return!e.size;if(Ms(e))return!el(e).length;for(var i in e)if(Ne.call(e,i))return!1;return!0},K.isEqual=function xf(e,n){return aa(e,n)},K.isEqualWith=function bf(e,n,i){var a=(i="function"==typeof i?i:p)?i(e,n):p;return a===p?aa(e,n,p,i):!!a},K.isError=Ml,K.isFinite=function Uh(e){return"number"==typeof e&&Nu(e)},K.isFunction=jo,K.isInteger=_f,K.isLength=Iu,K.isMap=zo,K.isMatch=function Uo(e,n){return e===n||qu(e,n,dl(n))},K.isMatchWith=function Gh(e,n,i){return i="function"==typeof i?i:p,qu(e,n,dl(n),i)},K.isNaN=function Wh(e){return Cf(e)&&e!=+e},K.isNative=function $h(e){if(Id(e))throw new Vt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return oc(e)},K.isNil=function Xh(e){return null==e},K.isNull=function Yh(e){return null===e},K.isNumber=Cf,K.isObject=Kn,K.isObjectLike=er,K.isPlainObject=Ns,K.isRegExp=Ol,K.isSafeInteger=function kl(e){return _f(e)&&e>=-On&&e<=On},K.isSet=Ll,K.isString=Go,K.isSymbol=wi,K.isTypedArray=us,K.isUndefined=function Kh(e){return e===p},K.isWeakMap=function Jh(e){return er(e)&&$r(e)==Kt},K.isWeakSet=function Qh(e){return er(e)&&"[object WeakSet]"==Jr(e)},K.join=function Jd(e,n){return null==e?"":zf.call(e,n)},K.kebabCase=kg,K.last=Ci,K.lastIndexOf=function Qd(e,n,i){var a=null==e?0:e.length;if(!a)return-1;var s=a;return i!==p&&(s=(s=Yt(i))<0?wr(a+s,0):Ur(s,a-1)),n==n?function En(_e,He,Ae){for(var ct=Ae+1;ct--;)if(_e[ct]===He)return ct;return ct}(e,n,s):Ui(e,Vn,s,!0)},K.lowerCase=Lg,K.lowerFirst=Rg,K.lt=wg,K.lte=wf,K.max=function rg(e){return e&&e.length?qs(e,qr,Xu):p},K.maxBy=function ig(e,n){return e&&e.length?qs(e,Lt(n,2),Xu):p},K.mean=function og(e){return gi(e,qr)},K.meanBy=function ag(e,n){return gi(e,Lt(n,2))},K.min=function sg(e){return e&&e.length?qs(e,qr,tl):p},K.minBy=function ug(e,n){return e&&e.length?qs(e,Lt(n,2),tl):p},K.stubArray=Vs,K.stubFalse=Wl,K.stubObject=function Jp(){return{}},K.stubString=function Qp(){return""},K.stubTrue=function Zp(){return!0},K.multiply=lg,K.nth=function Zd(e,n){return e&&e.length?cc(e,Yt(n)):p},K.noConflict=function Up(){return u._===this&&(u._=Qe),this},K.noop=Gl,K.now=Su,K.pad=function Sp(e,n,i){e=Sn(e);var a=(n=Yt(n))?mn(e):0;if(!n||a>=n)return e;var s=(n-a)/2;return Is(ys(s),i)+e+Is($i(s),i)},K.padEnd=function Ng(e,n,i){e=Sn(e);var a=(n=Yt(n))?mn(e):0;return n&&a<n?e+Is(n-a,i):e},K.padStart=function Dg(e,n,i){e=Sn(e);var a=(n=Yt(n))?mn(e):0;return n&&a<n?Is(n-a,i)+e:e},K.parseInt=function Fg(e,n,i){return i||null==n?n=0:n&&(n=+n),Wf(Sn(e).replace(Eo,""),n||0)},K.random=function Of(e,n,i){if(i&&"boolean"!=typeof i&&pn(e,n,i)&&(n=i=p),i===p&&("boolean"==typeof n?(i=n,n=p):"boolean"==typeof e&&(i=e,e=p)),e===p&&n===p?(e=0,n=1):(e=ga(e),n===p?(n=e,e=0):n=ga(n)),e>n){var a=e;e=n,n=a}if(i||e%1||n%1){var s=Jl();return Ur(e+s*(n-e+ee("1e-"+((s+"").length-1))),n)}return nu(e,n)},K.reduce=function Rt(e,n,i){var a=$t(e)?xr:ko,s=arguments.length<3;return a(e,Lt(n,4),i,s,ia)},K.reduceRight=function _u(e,n,i){var a=$t(e)?un:ko,s=arguments.length<3;return a(e,Lt(n,4),i,s,$u)},K.repeat=function Vg(e,n,i){return n=(i?pn(e,n,i):n===p)?1:Yt(n),il(Sn(e),n)},K.replace=function fs(){var e=arguments,n=Sn(e[0]);return e.length<3?n:n.replace(e[1],e[2])},K.result=function yp(e,n,i){var a=-1,s=(n=ua(n,e)).length;for(s||(s=1,e=p);++a<s;){var l=null==e?p:e[yo(n[a])];l===p&&(a=s,l=i),e=jo(l)?l.call(e):l}return e},K.round=cg,K.runInContext=_e,K.sample=function wu(e){return($t(e)?Uu:dd)(e)},K.size=function Eh(e){if(null==e)return 0;if(ui(e))return Go(e)?mn(e):e.length;var n=$r(e);return n==Gt||n==De?e.size:el(e).length},K.snakeCase=Tp,K.some=function El(e,n,i){var a=$t(e)?Fn:Ji;return i&&pn(e,n,i)&&(n=p),a(e,Lt(n,3))},K.sortedIndex=function oh(e,n){return ru(e,n)},K.sortedIndexBy=function ah(e,n,i){return al(e,n,Lt(i,2))},K.sortedIndexOf=function sh(e,n){var i=null==e?0:e.length;if(i){var a=ru(e,n);if(a<i&&no(e[a],n))return a}return-1},K.sortedLastIndex=function uh(e,n){return ru(e,n,!0)},K.sortedLastIndexBy=function lh(e,n,i){return al(e,n,Lt(i,2),!0)},K.sortedLastIndexOf=function ch(e,n){if(null!=e&&e.length){var a=ru(e,n,!0)-1;if(no(e[a],n))return a}return-1},K.startCase=Pp,K.startsWith=function Ip(e,n,i){return e=Sn(e),i=null==i?0:yi(Yt(i),0,e.length),n=_i(n),e.slice(i,i+n.length)==n},K.subtract=fg,K.sum=function t(e){return e&&e.length?Qn(e,qr):0},K.sumBy=function r(e,n){return e&&e.length?Qn(e,Lt(n,2)):0},K.template=function Ap(e,n,i){var a=K.templateSettings;i&&pn(e,n,i)&&(n=p),e=Sn(e),n=ls({},n,a,Oc);var g,m,s=ls({},n.imports,a.imports,Oc),l=Ar(s),f=Qt(s,l),v=0,A=n.interpolate||Ti,B="__p += '",Y=Ro((n.escape||Ti).source+"|"+A.source+"|"+(A===at?nt:Ti).source+"|"+(n.evaluate||Ti).source+"|$","g"),te="//# sourceURL="+(Ne.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ea+"]")+"\n";e.replace(Y,function(ge,E,D,z,Z,ae){return D||(D=z),B+=e.slice(v,ae).replace(ji,Xl),E&&(g=!0,B+="' +\n__e("+E+") +\n'"),Z&&(m=!0,B+="';\n"+Z+";\n__p += '"),D&&(B+="' +\n((__t = ("+D+")) == null ? '' : __t) +\n'"),v=ae+ge.length,ge}),B+="';\n";var ue=Ne.call(n,"variable")&&n.variable;if(ue){if(Hi.test(ue))throw new Vt("Invalid `variable` option passed into `_.template`")}else B="with (obj) {\n"+B+"\n}\n";B=(m?B.replace($n,""):B).replace(wo,"$1").replace(ma,"$1;"),B="function("+(ue||"obj")+") {\n"+(ue?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(g?", __e = _.escape":"")+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+B+"return __p\n}";var xe=Lf(function(){return cn(l,te+"return "+B).apply(p,f)});if(xe.source=B,Ml(xe))throw xe;return xe},K.times=function Df(e,n){if((e=Yt(e))<1||e>On)return[];var i=nr,a=Ur(e,nr);n=Lt(n),e-=nr;for(var s=vi(a,n);++i<e;)n(i);return s},K.toFinite=ga,K.toInteger=Yt,K.toLength=fr,K.toLower=function Mp(e){return Sn(e).toLowerCase()},K.toNumber=Fi,K.toSafeInteger=function Zh(e){return e?yi(Yt(e),-On,On):0===e?e:0},K.toString=Sn,K.toUpper=function Op(e){return Sn(e).toUpperCase()},K.trim=function kp(e,n,i){if((e=Sn(e))&&(i||n===p))return vn(e);if(!e||!(n=_i(n)))return e;var a=an(e),s=an(n);return Qi(a,Bs(a,s),ku(a,s)+1).join("")},K.trimEnd=function Lp(e,n,i){if((e=Sn(e))&&(i||n===p))return e.slice(0,wn(e)+1);if(!e||!(n=_i(n)))return e;var a=an(e);return Qi(a,0,ku(a,an(n))+1).join("")},K.trimStart=function Hl(e,n,i){if((e=Sn(e))&&(i||n===p))return e.replace(Eo,"");if(!e||!(n=_i(n)))return e;var a=an(e);return Qi(a,Bs(a,an(n))).join("")},K.truncate=function kf(e,n){var i=30,a="...";if(Kn(n)){var s="separator"in n?n.separator:s;i="length"in n?Yt(n.length):i,a="omission"in n?_i(n.omission):a}var l=(e=Sn(e)).length;if(pr(e)){var f=an(e);l=f.length}if(i>=l)return e;var g=i-mn(a);if(g<1)return a;var m=f?Qi(f,0,g).join(""):e.slice(0,g);if(s===p)return m+a;if(f&&(g+=m.length-g),Ol(s)){if(e.slice(g).search(s)){var v,A=m;for(s.global||(s=Ro(s.source,Sn(Ga.exec(s))+"g")),s.lastIndex=0;v=s.exec(A);)var B=v.index;m=m.slice(0,B===p?g:B)}}else if(e.indexOf(_i(s),g)!=g){var Y=m.lastIndexOf(s);Y>-1&&(m=m.slice(0,Y))}return m+a},K.unescape=function ds(e){return(e=Sn(e))&&de.test(e)?e.replace(ro,co):e},K.uniqueId=function eg(e){var n=++qe;return Sn(e)+n},K.upperCase=Rp,K.upperFirst=Wo,K.each=of,K.eachRight=bo,K.first=Qc,Ul(K,function(){var e={};return Ni(K,function(n,i){Ne.call(K.prototype,i)||(e[i]=n)}),e}(),{chain:!1}),K.VERSION="4.17.21",dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){K[e].placeholder=K}),dt(["drop","take"],function(e,n){fn.prototype[e]=function(i){i=i===p?1:wr(Yt(i),0);var a=this.__filtered__&&!n?new fn(this):this.clone();return a.__filtered__?a.__takeCount__=Ur(i,a.__takeCount__):a.__views__.push({size:Ur(i,nr),type:e+(a.__dir__<0?"Right":"")}),a},fn.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),dt(["filter","map","takeWhile"],function(e,n){var i=n+1,a=1==i||3==i;fn.prototype[e]=function(s){var l=this.clone();return l.__iteratees__.push({iteratee:Lt(s,3),type:i}),l.__filtered__=l.__filtered__||a,l}}),dt(["head","last"],function(e,n){var i="take"+(n?"Right":"");fn.prototype[e]=function(){return this[i](1).value()[0]}}),dt(["initial","tail"],function(e,n){var i="drop"+(n?"":"Right");fn.prototype[e]=function(){return this.__filtered__?new fn(this):this[i](1)}}),fn.prototype.compact=function(){return this.filter(qr)},fn.prototype.find=function(e){return this.filter(e).head()},fn.prototype.findLast=function(e){return this.reverse().find(e)},fn.prototype.invokeMap=en(function(e,n){return"function"==typeof e?new fn(this):this.map(function(i){return Es(i,e,n)})}),fn.prototype.reject=function(e){return this.filter(Eu(Lt(e)))},fn.prototype.slice=function(e,n){e=Yt(e);var i=this;return i.__filtered__&&(e>0||n<0)?new fn(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==p&&(i=(n=Yt(n))<0?i.dropRight(-n):i.take(n-e)),i)},fn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},fn.prototype.toArray=function(){return this.take(nr)},Ni(fn.prototype,function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),a=/^(?:head|last)$/.test(n),s=K[a?"take"+("last"==n?"Right":""):n],l=a||/^find/.test(n);!s||(K.prototype[n]=function(){var f=this.__wrapped__,g=a?[1]:arguments,m=f instanceof fn,v=g[0],A=m||$t(f),B=function(E){var D=s.apply(K,It([E],g));return a&&Y?D[0]:D};A&&i&&"function"==typeof v&&1!=v.length&&(m=A=!1);var Y=this.__chain__,te=!!this.__actions__.length,ue=l&&!Y,xe=m&&!te;if(!l&&A){f=xe?f:new fn(this);var ge=e.apply(f,g);return ge.__actions__.push({func:Qr,args:[B],thisArg:p}),new Yi(ge,Y)}return ue&&xe?e.apply(this,g):(ge=this.thru(B),ue?a?ge.value()[0]:ge.value():ge)})}),dt(["pop","push","shift","sort","splice","unshift"],function(e){var n=se[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);K.prototype[e]=function(){var s=arguments;if(a&&!this.__chain__){var l=this.value();return n.apply($t(l)?l:[],s)}return this[i](function(f){return n.apply($t(f)?f:[],s)})}}),Ni(fn.prototype,function(e,n){var i=K[n];if(i){var a=i.name+"";Ne.call(Xa,a)||(Xa[a]=[]),Xa[a].push({name:n,func:i})}}),Xa[fu(p,2).name]=[{name:"wrapper",func:p}],fn.prototype.clone=function gg(){var e=new fn(this.__wrapped__);return e.__actions__=ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ai(this.__views__),e},fn.prototype.reverse=function vg(){if(this.__filtered__){var e=new fn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},fn.prototype.value=function mg(){var e=this.__wrapped__.value(),n=this.__dir__,i=$t(e),a=n<0,s=i?e.length:0,l=function Sd(e,n,i){for(var a=-1,s=i.length;++a<s;){var l=i[a],f=l.size;switch(l.type){case"drop":e+=f;break;case"dropRight":n-=f;break;case"take":n=Ur(n,e+f);break;case"takeRight":e=wr(e,n-f)}}return{start:e,end:n}}(0,s,this.__views__),f=l.start,g=l.end,m=g-f,v=a?g:f-1,A=this.__iteratees__,B=A.length,Y=0,te=Ur(m,this.__takeCount__);if(!i||!a&&s==m&&te==m)return mc(e,this.__actions__);var ue=[];e:for(;m--&&Y<te;){for(var xe=-1,ge=e[v+=n];++xe<B;){var E=A[xe],z=E.type,Z=(0,E.iteratee)(ge);if(2==z)ge=Z;else if(!Z){if(1==z)continue e;break e}}ue[Y++]=ge}return ue},K.prototype.at=pa,K.prototype.chain=function ja(){return _l(this)},K.prototype.commit=function Gn(){return new Yi(this.value(),this.__chain__)},K.prototype.next=function os(){this.__values__===p&&(this.__values__=Ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?p:this.__values__[this.__index__++]}},K.prototype.plant=function bh(e){for(var n,i=this;i instanceof Hu;){var a=$c(i);a.__index__=0,a.__values__=p,n?s.__wrapped__=a:n=a;var s=a;i=i.__wrapped__}return s.__wrapped__=e,n},K.prototype.reverse=function mu(){var e=this.__wrapped__;if(e instanceof fn){var n=e;return this.__actions__.length&&(n=new fn(this)),(n=n.reverse()).__actions__.push({func:Qr,args:[ml],thisArg:p}),new Yi(n,this.__chain__)}return this.thru(ml)},K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=function _h(){return mc(this.__wrapped__,this.__actions__)},K.prototype.first=K.prototype.head,ms&&(K.prototype[ms]=function ef(){return this}),K}();u._=mi,(h=function(){return mi}.call(j,c,j,S))!==p&&(S.exports=h)}.call(this)},19984:(S,j,c)=>{var h=c(84633),p=c(96517),C=c(92046),w=c(21503);S.exports=function x(T,I){return(w(T)?h:C)(T,p(I,3))}},10203:(S,j,c)=>{var h=c(85683),p=c(45184),C=c(96517);S.exports=function w(x,T){var I={};return T=C(T,3),p(x,function(P,N,F){h(I,N,T(P,N,F))}),I}},18176:(S,j,c)=>{var h=c(67308),p=c(31100),C=c(32608);S.exports=function w(x){return x&&x.length?h(x,C,p):void 0}},30535:(S,j,c)=>{var h=c(99850);function C(w,x){if("function"!=typeof w||null!=x&&"function"!=typeof x)throw new TypeError("Expected a function");var T=function(){var I=arguments,P=x?x.apply(this,I):I[0],N=T.cache;if(N.has(P))return N.get(P);var F=w.apply(this,I);return T.cache=N.set(P,F)||N,F};return T.cache=new(C.Cache||h),T}C.Cache=h,S.exports=C},80567:(S,j,c)=>{var h=c(73842),C=c(84944)(function(w,x,T){h(w,x,T)});S.exports=C},29439:(S,j,c)=>{var h=c(67308),p=c(99069),C=c(32608);S.exports=function w(x){return x&&x.length?h(x,C,p):void 0}},29525:(S,j,c)=>{var h=c(67308),p=c(96517),C=c(99069);S.exports=function w(x,T){return x&&x.length?h(x,p(T,2),C):void 0}},12552:S=>{S.exports=function j(){}},31710:(S,j,c)=>{var h=c(12119);S.exports=function(){return h.Date.now()}},16372:(S,j,c)=>{var h=c(83021),C=c(3975)(function(w,x){return null==w?{}:h(w,x)});S.exports=C},87495:(S,j,c)=>{var h=c(11847),p=c(39222),C=c(45352),w=c(68533);S.exports=function x(T){return C(T)?h(w(T)):p(T)}},90361:(S,j,c)=>{var p=c(97509)();S.exports=p},81337:(S,j,c)=>{var h=c(8745),p=c(43132),C=c(96517),w=c(13570),x=c(21503);S.exports=function T(I,P,N){var F=x(I)?h:w,M=arguments.length<3;return F(I,C(P,4),N,M,p)}},55637:(S,j,c)=>{var h=c(81172),p=c(28794),C=c(56507),w=c(30248),x=c(52315);S.exports=function P(N){if(null==N)return 0;if(C(N))return w(N)?x(N):N.length;var F=p(N);return"[object Map]"==F||"[object Set]"==F?N.size:h(N).length}},12906:(S,j,c)=>{var h=c(50686),p=c(6119),C=c(23269),w=c(93342),x=C(function(T,I){if(null==T)return[];var P=I.length;return P>1&&w(T,I[0],I[1])?I=[]:P>2&&w(I[0],I[1],I[2])&&(I=[I[0]]),p(T,h(I,1),[])});S.exports=x},49975:S=>{S.exports=function j(){return[]}},63580:S=>{S.exports=function j(){return!1}},12232:(S,j,c)=>{var h=c(51467),p=1/0;S.exports=function w(x){return x?(x=h(x))===p||x===-p?17976931348623157e292*(x<0?-1:1):x==x?x:0:0===x?x:0}},44401:(S,j,c)=>{var h=c(12232);S.exports=function p(C){var w=h(C),x=w%1;return w==w?x?w-x:w:0}},51467:(S,j,c)=>{var h=c(83348),p=c(25940),C=c(44129),x=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,I=/^0o[0-7]+$/i,P=parseInt;S.exports=function N(F){if("number"==typeof F)return F;if(C(F))return NaN;if(p(F)){var M="function"==typeof F.valueOf?F.valueOf():F;F=p(M)?M+"":M}if("string"!=typeof F)return 0===F?F:+F;F=h(F);var G=T.test(F);return G||I.test(F)?P(F.slice(2),G?2:8):x.test(F)?NaN:+F}},8067:(S,j,c)=>{var h=c(31989),p=c(16555);S.exports=function C(w){return h(w,p(w))}},73943:(S,j,c)=>{var h=c(93935);S.exports=function p(C){return null==C?"":h(C)}},89416:(S,j,c)=>{var h=c(96837),p=c(78858),C=c(45184),w=c(96517),x=c(29519),T=c(21503),I=c(80891),P=c(75946),N=c(25940),F=c(48159);S.exports=function M(G,Q,oe){var o=T(G),ne=o||I(G)||F(G);if(Q=w(Q,4),null==oe){var fe=G&&G.constructor;oe=ne?o?new fe:[]:N(G)&&P(fe)?p(x(G)):{}}return(ne?h:C)(G,function(ce,J,he){return Q(oe,ce,J,he)}),oe}},68921:(S,j,c)=>{var h=c(50686),p=c(23269),C=c(80707),w=c(21330),x=p(function(T){return C(h(T,1,w,!0))});S.exports=x},51541:(S,j,c)=>{var h=c(73943),p=0;S.exports=function C(w){var x=++p;return h(w)+x}},90377:(S,j,c)=>{var h=c(19179),p=c(118);S.exports=function C(w){return null==w?[]:h(w,p(w))}},21617:(S,j,c)=>{var h=c(89719),p=c(38645);S.exports=function C(w,x){return p(w||[],x||[],h)}},29610:function(S){S.exports=function(){var j="1.13.2",c="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},h=Array.prototype,p=Object.prototype,C="undefined"!=typeof Symbol?Symbol.prototype:null,w=h.push,x=h.slice,T=p.toString,I=p.hasOwnProperty,P="undefined"!=typeof ArrayBuffer,N="undefined"!=typeof DataView,F=Array.isArray,M=Object.keys,G=Object.create,Q=P&&ArrayBuffer.isView,oe=isNaN,o=isFinite,ne=!{toString:null}.propertyIsEnumerable("toString"),fe=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ce=Math.pow(2,53)-1;function J(R,W){return W=null==W?R.length-1:+W,function(){for(var ee=Math.max(arguments.length-W,0),le=Array(ee),Te=0;Te<ee;Te++)le[Te]=arguments[Te+W];switch(W){case 0:return R.call(this,le);case 1:return R.call(this,arguments[0],le);case 2:return R.call(this,arguments[0],arguments[1],le)}var be=Array(W+1);for(Te=0;Te<W;Te++)be[Te]=arguments[Te];return be[W]=le,R.apply(this,be)}}function he(R){var W=typeof R;return"function"===W||"object"===W&&!!R}function Ce(R){return void 0===R}function Ie(R){return!0===R||!1===R||"[object Boolean]"===T.call(R)}function b(R){var W="[object "+R+"]";return function(ee){return T.call(ee)===W}}var ke=b("String"),Ge=b("Number"),Ue=b("Date"),Xe=b("RegExp"),Je=b("Error"),ot=b("Symbol"),vt=b("ArrayBuffer"),Nt=b("Function");"object"!=typeof Int8Array&&"function"!=typeof(c.document&&c.document.childNodes)&&(Nt=function(R){return"function"==typeof R||!1});var _t=Nt,On=b("Object"),gr=N&&On(new DataView(new ArrayBuffer(8))),Nr="undefined"!=typeof Map&&On(new Map),nr=b("DataView"),Wn=gr?function(R){return null!=R&&_t(R.getInt8)&&vt(R.buffer)}:nr,vr=F||b("Array");function Nn(R,W){return null!=R&&I.call(R,W)}var Re=b("Arguments");!function(){Re(arguments)||(Re=function(R){return Nn(R,"callee")})}();var ze=Re;function Ke(R){return Ge(R)&&oe(R)}function st(R){return function(){return R}}function Ct(R){return function(W){var ee=R(W);return"number"==typeof ee&&ee>=0&&ee<=ce}}function zt(R){return function(W){return null==W?void 0:W[R]}}var mt=zt("byteLength"),Bn=Ct(mt),fi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Gt=P?function(R){return Q?Q(R)&&!Wn(R):Bn(R)&&fi.test(T.call(R))}:st(!1),Dt=zt("length");function O(R,W){W=function(u){for(var d={},y=u.length,_=0;_<y;++_)d[u[_]]=!0;return{contains:function(k){return!0===d[k]},push:function(k){return d[k]=!0,u.push(k)}}}(W);var ee=fe.length,le=R.constructor,Te=_t(le)&&le.prototype||p,be="constructor";for(Nn(R,be)&&!W.contains(be)&&W.push(be);ee--;)(be=fe[ee])in R&&R[be]!==Te[be]&&!W.contains(be)&&W.push(be)}function H(R){if(!he(R))return[];if(M)return M(R);var W=[];for(var ee in R)Nn(R,ee)&&W.push(ee);return ne&&O(R,W),W}function q(R,W){var ee=H(W),le=ee.length;if(null==R)return!le;for(var Te=Object(R),be=0;be<le;be++){var u=ee[be];if(W[u]!==Te[u]||!(u in Te))return!1}return!0}function pe(R){return R instanceof pe?R:this instanceof pe?void(this._wrapped=R):new pe(R)}function Fe(R){return new Uint8Array(R.buffer||R,R.byteOffset||0,mt(R))}pe.VERSION=j,pe.prototype.valueOf=pe.prototype.toJSON=pe.prototype.value=function(){return this._wrapped},pe.prototype.toString=function(){return String(this._wrapped)};var De="[object DataView]";function tt(R,W,ee,le){if(R===W)return 0!==R||1/R==1/W;if(null==R||null==W)return!1;if(R!=R)return W!=W;var Te=typeof R;return("function"===Te||"object"===Te||"object"==typeof W)&&function be(u,d,y,_){u instanceof pe&&(u=u._wrapped),d instanceof pe&&(d=d._wrapped);var k=T.call(u);if(k!==T.call(d))return!1;if(gr&&"[object Object]"==k&&Wn(u)){if(!Wn(d))return!1;k=De}switch(k){case"[object RegExp]":case"[object String]":return""+u==""+d;case"[object Number]":return+u!=+u?+d!=+d:0==+u?1/+u==1/d:+u==+d;case"[object Date]":case"[object Boolean]":return+u==+d;case"[object Symbol]":return C.valueOf.call(u)===C.valueOf.call(d);case"[object ArrayBuffer]":case De:return be(Fe(u),Fe(d),y,_)}var L="[object Array]"===k;if(!L&&Gt(u)){if(mt(u)!==mt(d))return!1;if(u.buffer===d.buffer&&u.byteOffset===d.byteOffset)return!0;L=!0}if(!L){if("object"!=typeof u||"object"!=typeof d)return!1;var U=u.constructor,re=d.constructor;if(U!==re&&!(_t(U)&&U instanceof U&&_t(re)&&re instanceof re)&&"constructor"in u&&"constructor"in d)return!1}_=_||[];for(var ie=(y=y||[]).length;ie--;)if(y[ie]===u)return _[ie]===d;if(y.push(u),_.push(d),L){if((ie=u.length)!==d.length)return!1;for(;ie--;)if(!tt(u[ie],d[ie],y,_))return!1}else{var ye,Oe=H(u);if(ie=Oe.length,H(d).length!==ie)return!1;for(;ie--;)if(!Nn(d,ye=Oe[ie])||!tt(u[ye],d[ye],y,_))return!1}return y.pop(),_.pop(),!0}(R,W,ee,le)}function yt(R){if(!he(R))return[];var W=[];for(var ee in R)W.push(ee);return ne&&O(R,W),W}function xt(R){var W=Dt(R);return function(ee){if(null==ee)return!1;var le=yt(ee);if(Dt(le))return!1;for(var Te=0;Te<W;Te++)if(!_t(ee[R[Te]]))return!1;return R!==Dr||!_t(ee[Kt])}}var Kt="forEach",Wt=["clear","delete"],Hn=["get","has","set"],kn=Wt.concat(Kt,Hn),Dr=Wt.concat(Hn),xn=["add"].concat(Wt,Kt,"has"),ht=Nr?xt(kn):b("Map"),Tn=Nr?xt(Dr):b("WeakMap"),Dn=Nr?xt(xn):b("Set"),rr=b("WeakSet");function Fr(R){for(var W=H(R),ee=W.length,le=Array(ee),Te=0;Te<ee;Te++)le[Te]=R[W[Te]];return le}function Jn(R){for(var W={},ee=H(R),le=0,Te=ee.length;le<Te;le++)W[R[ee[le]]]=ee[le];return W}function $n(R){var W=[];for(var ee in R)_t(R[ee])&&W.push(ee);return W.sort()}function wo(R,W){return function(ee){var le=arguments.length;if(W&&(ee=Object(ee)),le<2||null==ee)return ee;for(var Te=1;Te<le;Te++)for(var be=arguments[Te],u=R(be),d=u.length,y=0;y<d;y++){var _=u[y];W&&void 0!==ee[_]||(ee[_]=be[_])}return ee}}var ma=wo(yt),ro=wo(H),So=wo(yt,!0);function de(R){if(!he(R))return{};if(G)return G(R);var W=function(){};W.prototype=R;var ee=new W;return W.prototype=null,ee}function Yr(R){return vr(R)?R:[R]}function Vi(R){return pe.toPath(R)}function To(R,W){for(var ee=W.length,le=0;le<ee;le++){if(null==R)return;R=R[W[le]]}return ee?R:void 0}function at(R,W,ee){var le=To(R,Vi(W));return Ce(le)?ee:le}function Vr(R){return R}function io(R){return R=ro({},R),function(W){return q(W,R)}}function oo(R){return R=Vi(R),function(W){return To(W,R)}}function Bi(R,W,ee){if(void 0===W)return R;switch(null==ee?3:ee){case 1:return function(le){return R.call(W,le)};case 3:return function(le,Te,be){return R.call(W,le,Te,be)};case 4:return function(le,Te,be,u){return R.call(W,le,Te,be,u)}}return function(){return R.apply(W,arguments)}}function ir(R,W,ee){return null==R?Vr:_t(R)?Bi(R,W,ee):he(R)&&!vr(R)?io(R):oo(R)}function Eo(R,W){return ir(R,W,1/0)}function mr(R,W,ee){return pe.iteratee!==Eo?pe.iteratee(R,W):ir(R,W,ee)}function ya(){}function xa(R,W){return null==W&&(W=R,R=0),R+Math.floor(Math.random()*(W-R+1))}pe.toPath=Yr,pe.iteratee=Eo;var Tr=Date.now||function(){return(new Date).getTime()};function $o(R){var W=function(be){return R[be]},ee="(?:"+H(R).join("|")+")",le=RegExp(ee),Te=RegExp(ee,"g");return function(be){return le.test(be=null==be?"":""+be)?be.replace(Te,W):be}}var Hi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Yo=$o(Hi),nt=$o(Jn(Hi)),Ga=pe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Si=/(.)^/,ba={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},_a=/\\|'|\r|\n|\u2028|\u2029/g;function bn(R){return"\\"+ba[R]}var Po=/^\s*(\w|\$)+\s*$/,ps=0;function Ti(R,W,ee,le,Te){if(!(le instanceof W))return R.apply(ee,Te);var be=de(R.prototype),u=R.apply(be,Te);return he(u)?u:be}var ji=J(function(R,W){var ee=ji.placeholder,le=function(){for(var Te=0,be=W.length,u=Array(be),d=0;d<be;d++)u[d]=W[d]===ee?arguments[Te++]:W[d];for(;Te<arguments.length;)u.push(arguments[Te++]);return Ti(R,le,this,this,u)};return le});ji.placeholder=pe;var Ei=J(function(R,W,ee){if(!_t(R))throw new TypeError("Bind must be called on a function");var le=J(function(Te){return Ti(R,le,W,this,ee.concat(Te))});return le}),Ft=Ct(Dt);function Br(R,W,ee,le){if(le=le||[],W||0===W){if(W<=0)return le.concat(R)}else W=1/0;for(var Te=le.length,be=0,u=Dt(R);be<u;be++){var d=R[be];if(Ft(d)&&(vr(d)||ze(d)))if(W>1)Br(d,W-1,ee,le),Te=le.length;else for(var y=0,_=d.length;y<_;)le[Te++]=d[y++];else ee||(le[Te++]=d)}return le}var pt=J(function(R,W){var ee=(W=Br(W,!1,!1)).length;if(ee<1)throw new Error("bindAll must be passed function names");for(;ee--;){var le=W[ee];R[le]=Ei(R[le],R)}return R}),Er=J(function(R,W,ee){return setTimeout(function(){return R.apply(null,ee)},W)}),di=ji(Er,pe,1);function nn(R){return function(){return!R.apply(this,arguments)}}function Pi(R,W){var ee;return function(){return--R>0&&(ee=W.apply(this,arguments)),R<=1&&(W=null),ee}}var dr=ji(Pi,2);function Ca(R,W,ee){W=mr(W,ee);for(var le,Te=H(R),be=0,u=Te.length;be<u;be++)if(W(R[le=Te[be]],le,R))return le}function Ii(R){return function(W,ee,le){ee=mr(ee,le);for(var Te=Dt(W),be=R>0?0:Te-1;be>=0&&be<Te;be+=R)if(ee(W[be],be,W))return be;return-1}}var Ai=Ii(1),hi=Ii(-1);function Mi(R,W,ee,le){for(var Te=(ee=mr(ee,le,1))(W),be=0,u=Dt(R);be<u;){var d=Math.floor((be+u)/2);ee(R[d])<Te?be=d+1:u=d}return be}function Io(R,W,ee){return function(le,Te,be){var u=0,d=Dt(le);if("number"==typeof be)R>0?u=be>=0?be:Math.max(be+d,u):d=be>=0?Math.min(be+1,d):be+d+1;else if(ee&&be&&d)return le[be=ee(le,Te)]===Te?be:-1;if(Te!=Te)return(be=W(x.call(le,u,d),Ke))>=0?be+u:-1;for(be=R>0?u:d-1;be>=0&&be<d;be+=R)if(le[be]===Te)return be;return-1}}var Wa=Io(1,Ai,Mi),yr=Io(-1,hi);function or(R,W,ee){var le=(Ft(R)?Ai:Ca)(R,W,ee);if(void 0!==le&&-1!==le)return R[le]}function ar(R,W,ee){var le,Te;if(W=Bi(W,ee),Ft(R))for(le=0,Te=R.length;le<Te;le++)W(R[le],le,R);else{var be=H(R);for(le=0,Te=be.length;le<Te;le++)W(R[be[le]],be[le],R)}return R}function Mr(R,W,ee){W=mr(W,ee);for(var le=!Ft(R)&&H(R),Te=(le||R).length,be=Array(Te),u=0;u<Te;u++){var d=le?le[u]:u;be[u]=W(R[d],d,R)}return be}function Xo(R){var W=function(ee,le,Te,be){var u=!Ft(ee)&&H(ee),d=(u||ee).length,y=R>0?0:d-1;for(be||(Te=ee[u?u[y]:y],y+=R);y>=0&&y<d;y+=R){var _=u?u[y]:y;Te=le(Te,ee[_],_,ee)}return Te};return function(ee,le,Te,be){var u=arguments.length>=3;return W(ee,Bi(le,be,4),Te,u)}}var Ao=Xo(1),Xr=Xo(-1);function Pr(R,W,ee){var le=[];return W=mr(W,ee),ar(R,function(Te,be,u){W(Te,be,u)&&le.push(Te)}),le}function Oi(R,W,ee){W=mr(W,ee);for(var le=!Ft(R)&&H(R),Te=(le||R).length,be=0;be<Te;be++){var u=le?le[be]:be;if(!W(R[u],u,R))return!1}return!0}function ao(R,W,ee){W=mr(W,ee);for(var le=!Ft(R)&&H(R),Te=(le||R).length,be=0;be<Te;be++){var u=le?le[be]:be;if(W(R[u],u,R))return!0}return!1}function Or(R,W,ee,le){return Ft(R)||(R=Fr(R)),("number"!=typeof ee||le)&&(ee=0),Wa(R,W,ee)>=0}var ki=J(function(R,W,ee){var le,Te;return _t(W)?Te=W:(W=Vi(W),le=W.slice(0,-1),W=W[W.length-1]),Mr(R,function(be){var u=Te;if(!u){if(le&&le.length&&(be=To(be,le)),null==be)return;u=be[W]}return null==u?u:u.apply(be,ee)})});function ni(R,W){return Mr(R,oo(W))}function zi(R,W,ee){var le,Te,be=-1/0,u=-1/0;if(null==W||"number"==typeof W&&"object"!=typeof R[0]&&null!=R)for(var d=0,y=(R=Ft(R)?R:Fr(R)).length;d<y;d++)null!=(le=R[d])&&le>be&&(be=le);else W=mr(W,ee),ar(R,function(_,k,L){((Te=W(_,k,L))>u||Te===-1/0&&be===-1/0)&&(be=_,u=Te)});return be}var Ko=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Jo(R){return R?vr(R)?x.call(R):ke(R)?R.match(Ko):Ft(R)?Mr(R,Vr):Fr(R):[]}function Mo(R,W,ee){if(null==W||ee)return Ft(R)||(R=Fr(R)),R[xa(R.length-1)];var le=Jo(R),Te=Dt(le);W=Math.max(Math.min(W,Te),0);for(var be=Te-1,u=0;u<W;u++){var d=xa(u,be),y=le[u];le[u]=le[d],le[d]=y}return le.slice(0,W)}function so(R,W){return function(ee,le,Te){var be=W?[[],[]]:{};return le=mr(le,Te),ar(ee,function(u,d){var y=le(u,d,ee);R(be,u,y)}),be}}var wa=so(function(R,W,ee){Nn(R,ee)?R[ee].push(W):R[ee]=[W]}),Qo=so(function(R,W,ee){R[ee]=W}),Sa=so(function(R,W,ee){Nn(R,ee)?R[ee]++:R[ee]=1}),Zo=so(function(R,W,ee){R[ee?0:1].push(W)},!0);function Ta(R,W,ee){return W in ee}var Ea=J(function(R,W){var ee={},le=W[0];if(null==R)return ee;_t(le)?(W.length>1&&(le=Bi(le,W[1])),W=yt(R)):(le=Ta,W=Br(W,!1,!1),R=Object(R));for(var Te=0,be=W.length;Te<be;Te++){var u=W[Te],d=R[u];le(d,u,R)&&(ee[u]=d)}return ee}),$a=J(function(R,W){var ee,le=W[0];return _t(le)?(le=nn(le),W.length>1&&(ee=W[1])):(W=Mr(Br(W,!1,!1),String),le=function(Te,be){return!Or(W,be)}),Ea(R,le,ee)});function Pa(R,W,ee){return x.call(R,0,Math.max(0,R.length-(null==W||ee?1:W)))}function qo(R,W,ee){return null==R||R.length<1?null==W||ee?void 0:[]:null==W||ee?R[0]:Pa(R,R.length-W)}function ri(R,W,ee){return x.call(R,null==W||ee?1:W)}var uo=J(function(R,W){return W=Br(W,!0,!0),Pr(R,function(ee){return!Or(W,ee)})}),Ya=J(function(R,W){return uo(R,W)});function Li(R,W,ee,le){Ie(W)||(le=ee,ee=W,W=!1),null!=ee&&(ee=mr(ee,le));for(var Te=[],be=[],u=0,d=Dt(R);u<d;u++){var y=R[u],_=ee?ee(y,u,R):y;W&&!ee?(u&&be===_||Te.push(y),be=_):ee?Or(be,_)||(be.push(_),Te.push(y)):Or(Te,y)||Te.push(y)}return Te}var pi=J(function(R){return Li(Br(R,!0,!0))});function ea(R){for(var W=R&&zi(R,Dt).length||0,ee=Array(W),le=0;le<W;le++)ee[le]=ni(R,le);return ee}var Cn=J(ea);function Pe(R,W){return R._chain?pe(W).chain():W}function kr(R){return ar($n(R),function(W){var ee=pe[W]=R[W];pe.prototype[W]=function(){var le=[this._wrapped];return w.apply(le,arguments),Pe(this,ee.apply(pe,le))}}),pe}ar(["pop","push","reverse","shift","sort","splice","unshift"],function(R){var W=h[R];pe.prototype[R]=function(){var ee=this._wrapped;return null!=ee&&(W.apply(ee,arguments),"shift"!==R&&"splice"!==R||0!==ee.length||delete ee[0]),Pe(this,ee)}}),ar(["concat","join","slice"],function(R){var W=h[R];pe.prototype[R]=function(){var ee=this._wrapped;return null!=ee&&(ee=W.apply(ee,arguments)),Pe(this,ee)}});var Lr=kr({__proto__:null,VERSION:j,restArguments:J,isObject:he,isNull:function(R){return null===R},isUndefined:Ce,isBoolean:Ie,isElement:function(R){return!(!R||1!==R.nodeType)},isString:ke,isNumber:Ge,isDate:Ue,isRegExp:Xe,isError:Je,isSymbol:ot,isArrayBuffer:vt,isDataView:Wn,isArray:vr,isFunction:_t,isArguments:ze,isFinite:function(R){return!ot(R)&&o(R)&&!isNaN(parseFloat(R))},isNaN:Ke,isTypedArray:Gt,isEmpty:function(R){if(null==R)return!0;var W=Dt(R);return"number"==typeof W&&(vr(R)||ke(R)||ze(R))?0===W:0===Dt(H(R))},isMatch:q,isEqual:function(R,W){return tt(R,W)},isMap:ht,isWeakMap:Tn,isSet:Dn,isWeakSet:rr,keys:H,allKeys:yt,values:Fr,pairs:function(R){for(var W=H(R),ee=W.length,le=Array(ee),Te=0;Te<ee;Te++)le[Te]=[W[Te],R[W[Te]]];return le},invert:Jn,functions:$n,methods:$n,extend:ma,extendOwn:ro,assign:ro,defaults:So,create:function(R,W){var ee=de(R);return W&&ro(ee,W),ee},clone:function(R){return he(R)?vr(R)?R.slice():ma({},R):R},tap:function(R,W){return W(R),R},get:at,has:function(R,W){for(var ee=(W=Vi(W)).length,le=0;le<ee;le++){var Te=W[le];if(!Nn(R,Te))return!1;R=R[Te]}return!!ee},mapObject:function(R,W,ee){W=mr(W,ee);for(var le=H(R),Te=le.length,be={},u=0;u<Te;u++){var d=le[u];be[d]=W(R[d],d,R)}return be},identity:Vr,constant:st,noop:ya,toPath:Yr,property:oo,propertyOf:function(R){return null==R?ya:function(W){return at(R,W)}},matcher:io,matches:io,times:function(R,W,ee){var le=Array(Math.max(0,R));W=Bi(W,ee,1);for(var Te=0;Te<R;Te++)le[Te]=W(Te);return le},random:xa,now:Tr,escape:Yo,unescape:nt,templateSettings:Ga,template:function(R,W,ee){!W&&ee&&(W=ee),W=So({},W,pe.templateSettings);var le=RegExp([(W.escape||Si).source,(W.interpolate||Si).source,(W.evaluate||Si).source].join("|")+"|$","g"),Te=0,be="__p+='";R.replace(le,function(_,k,L,U,re){return be+=R.slice(Te,re).replace(_a,bn),Te=re+_.length,k?be+="'+\n((__t=("+k+"))==null?'':_.escape(__t))+\n'":L?be+="'+\n((__t=("+L+"))==null?'':__t)+\n'":U&&(be+="';\n"+U+"\n__p+='"),_}),be+="';\n";var u,d=W.variable;if(d){if(!Po.test(d))throw new Error("variable is not a bare identifier: "+d)}else be="with(obj||{}){\n"+be+"}\n",d="obj";be="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+be+"return __p;\n";try{u=new Function(d,"_",be)}catch(_){throw _.source=be,_}var y=function(_){return u.call(this,_,pe)};return y.source="function("+d+"){\n"+be+"}",y},result:function(R,W,ee){var le=(W=Vi(W)).length;if(!le)return _t(ee)?ee.call(R):ee;for(var Te=0;Te<le;Te++){var be=null==R?void 0:R[W[Te]];void 0===be&&(be=ee,Te=le),R=_t(be)?be.call(R):be}return R},uniqueId:function(R){var W=++ps+"";return R?R+W:W},chain:function(R){var W=pe(R);return W._chain=!0,W},iteratee:Eo,partial:ji,bind:Ei,bindAll:pt,memoize:function(R,W){var ee=function(le){var Te=ee.cache,be=""+(W?W.apply(this,arguments):le);return Nn(Te,be)||(Te[be]=R.apply(this,arguments)),Te[be]};return ee.cache={},ee},delay:Er,defer:di,throttle:function(R,W,ee){var le,Te,be,u,d=0;ee||(ee={});var y=function(){d=!1===ee.leading?0:Tr(),le=null,u=R.apply(Te,be),le||(Te=be=null)},_=function(){var k=Tr();d||!1!==ee.leading||(d=k);var L=W-(k-d);return Te=this,be=arguments,L<=0||L>W?(le&&(clearTimeout(le),le=null),d=k,u=R.apply(Te,be),le||(Te=be=null)):le||!1===ee.trailing||(le=setTimeout(y,L)),u};return _.cancel=function(){clearTimeout(le),d=0,le=Te=be=null},_},debounce:function(R,W,ee){var le,Te,be,u,d,y=function(){var k=Tr()-Te;W>k?le=setTimeout(y,W-k):(le=null,ee||(u=R.apply(d,be)),le||(be=d=null))},_=J(function(k){return d=this,be=k,Te=Tr(),le||(le=setTimeout(y,W),ee&&(u=R.apply(d,be))),u});return _.cancel=function(){clearTimeout(le),le=be=d=null},_},wrap:function(R,W){return ji(W,R)},negate:nn,compose:function(){var R=arguments,W=R.length-1;return function(){for(var ee=W,le=R[W].apply(this,arguments);ee--;)le=R[ee].call(this,le);return le}},after:function(R,W){return function(){if(--R<1)return W.apply(this,arguments)}},before:Pi,once:dr,findKey:Ca,findIndex:Ai,findLastIndex:hi,sortedIndex:Mi,indexOf:Wa,lastIndexOf:yr,find:or,detect:or,findWhere:function(R,W){return or(R,io(W))},each:ar,forEach:ar,map:Mr,collect:Mr,reduce:Ao,foldl:Ao,inject:Ao,reduceRight:Xr,foldr:Xr,filter:Pr,select:Pr,reject:function(R,W,ee){return Pr(R,nn(mr(W)),ee)},every:Oi,all:Oi,some:ao,any:ao,contains:Or,includes:Or,include:Or,invoke:ki,pluck:ni,where:function(R,W){return Pr(R,io(W))},max:zi,min:function(R,W,ee){var le,Te,be=1/0,u=1/0;if(null==W||"number"==typeof W&&"object"!=typeof R[0]&&null!=R)for(var d=0,y=(R=Ft(R)?R:Fr(R)).length;d<y;d++)null!=(le=R[d])&&le<be&&(be=le);else W=mr(W,ee),ar(R,function(_,k,L){((Te=W(_,k,L))<u||Te===1/0&&be===1/0)&&(be=_,u=Te)});return be},shuffle:function(R){return Mo(R,1/0)},sample:Mo,sortBy:function(R,W,ee){var le=0;return W=mr(W,ee),ni(Mr(R,function(Te,be,u){return{value:Te,index:le++,criteria:W(Te,be,u)}}).sort(function(Te,be){var u=Te.criteria,d=be.criteria;if(u!==d){if(u>d||void 0===u)return 1;if(u<d||void 0===d)return-1}return Te.index-be.index}),"value")},groupBy:wa,indexBy:Qo,countBy:Sa,partition:Zo,toArray:Jo,size:function(R){return null==R?0:Ft(R)?R.length:H(R).length},pick:Ea,omit:$a,first:qo,head:qo,take:qo,initial:Pa,last:function(R,W,ee){return null==R||R.length<1?null==W||ee?void 0:[]:null==W||ee?R[R.length-1]:ri(R,Math.max(0,R.length-W))},rest:ri,tail:ri,drop:ri,compact:function(R){return Pr(R,Boolean)},flatten:function(R,W){return Br(R,W,!1)},without:Ya,uniq:Li,unique:Li,union:pi,intersection:function(R){for(var W=[],ee=arguments.length,le=0,Te=Dt(R);le<Te;le++){var be=R[le];if(!Or(W,be)){var u;for(u=1;u<ee&&Or(arguments[u],be);u++);u===ee&&W.push(be)}}return W},difference:uo,unzip:ea,transpose:ea,zip:Cn,object:function(R,W){for(var ee={},le=0,Te=Dt(R);le<Te;le++)W?ee[R[le]]=W[le]:ee[R[le][0]]=R[le][1];return ee},range:function(R,W,ee){null==W&&(W=R||0,R=0),ee||(ee=W<R?-1:1);for(var le=Math.max(Math.ceil((W-R)/ee),0),Te=Array(le),be=0;be<le;be++,R+=ee)Te[be]=R;return Te},chunk:function(R,W){if(null==W||W<1)return[];for(var ee=[],le=0,Te=R.length;le<Te;)ee.push(x.call(R,le,le+=W));return ee},mixin:kr,default:pe});return Lr._=Lr,Lr}()}}]);