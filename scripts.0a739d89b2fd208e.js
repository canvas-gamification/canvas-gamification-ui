if(function(R,yt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=R.document?yt(R,!0):function(tt){if(!tt.document)throw new Error("jQuery requires a window with a document");return yt(tt)}:yt(R)}("undefined"!=typeof window?window:this,function(R,yt){"use strict";var tt=[],Wt=Object.getPrototypeOf,Se=tt.slice,Qi=tt.flat?function(c){return tt.flat.call(c)}:function(c){return tt.concat.apply([],c)},Te=tt.push,ni=tt.indexOf,kr={},qe=kr.toString,Ze=kr.hasOwnProperty,xr=Ze.toString,Kr=xr.call(Object),$t={},Dt=function(c){return"function"==typeof c&&"number"!=typeof c.nodeType&&"function"!=typeof c.item},Er=function(c){return null!=c&&c===c.window},Ut=R.document,Nr={type:!0,src:!0,nonce:!0,noModule:!0};function Mr(c,v,I){var y,S,D=(I=I||Ut).createElement("script");if(D.text=c,v)for(y in Nr)(S=v[y]||v.getAttribute&&v.getAttribute(y))&&D.setAttribute(y,S);I.head.appendChild(D).parentNode.removeChild(D)}function vr(c){return null==c?c+"":"object"==typeof c||"function"==typeof c?kr[qe.call(c)]||"object":typeof c}var C=function(c,v){return new C.fn.init(c,v)};function nn(c){var v=!!c&&"length"in c&&c.length,I=vr(c);return!Dt(c)&&!Er(c)&&("array"===I||0===v||"number"==typeof v&&0<v&&v-1 in c)}C.fn=C.prototype={jquery:"3.6.0",constructor:C,length:0,toArray:function(){return Se.call(this)},get:function(c){return null==c?Se.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var v=C.merge(this.constructor(),c);return v.prevObject=this,v},each:function(c){return C.each(this,c)},map:function(c){return this.pushStack(C.map(this,function(v,I){return c.call(v,I,v)}))},slice:function(){return this.pushStack(Se.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(c,v){return(v+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(c,v){return v%2}))},eq:function(c){var v=this.length,I=+c+(c<0?v:0);return this.pushStack(0<=I&&I<v?[this[I]]:[])},end:function(){return this.prevObject||this.constructor()},push:Te,sort:tt.sort,splice:tt.splice},C.extend=C.fn.extend=function(){var c,v,I,y,S,D,z=arguments[0]||{},_=1,U=arguments.length,J=!1;for("boolean"==typeof z&&(J=z,z=arguments[_]||{},_++),"object"==typeof z||Dt(z)||(z={}),_===U&&(z=this,_--);_<U;_++)if(null!=(c=arguments[_]))for(v in c)y=c[v],"__proto__"!==v&&z!==y&&(J&&y&&(C.isPlainObject(y)||(S=Array.isArray(y)))?(I=z[v],D=S&&!Array.isArray(I)?[]:S||C.isPlainObject(I)?I:{},S=!1,z[v]=C.extend(J,D,y)):void 0!==y&&(z[v]=y));return z},C.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var v,I;return!(!c||"[object Object]"!==qe.call(c)||(v=Wt(c))&&("function"!=typeof(I=Ze.call(v,"constructor")&&v.constructor)||xr.call(I)!==Kr))},isEmptyObject:function(c){var v;for(v in c)return!1;return!0},globalEval:function(c,v,I){Mr(c,{nonce:v&&v.nonce},I)},each:function(c,v){var I,y=0;if(nn(c))for(I=c.length;y<I&&!1!==v.call(c[y],y,c[y]);y++);else for(y in c)if(!1===v.call(c[y],y,c[y]))break;return c},makeArray:function(c,v){var I=v||[];return null!=c&&(nn(Object(c))?C.merge(I,"string"==typeof c?[c]:c):Te.call(I,c)),I},inArray:function(c,v,I){return null==v?-1:ni.call(v,c,I)},merge:function(c,v){for(var I=+v.length,y=0,S=c.length;y<I;y++)c[S++]=v[y];return c.length=S,c},grep:function(c,v,I){for(var y=[],S=0,D=c.length,z=!I;S<D;S++)!v(c[S],S)!==z&&y.push(c[S]);return y},map:function(c,v,I){var y,S,D=0,z=[];if(nn(c))for(y=c.length;D<y;D++)null!=(S=v(c[D],D,I))&&z.push(S);else for(D in c)null!=(S=v(c[D],D,I))&&z.push(S);return Qi(z)},guid:1,support:$t}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=tt[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,v){kr["[object "+v+"]"]=v.toLowerCase()});var ar=function(c){var v,I,y,S,D,z,_,U,J,rt,ct,q,nt,Ct,Nt,bt,Ge,Ye,we,Ae="sizzle"+1*new Date,Lt=c.document,er=0,re=0,he=aa(),oi=aa(),Qn=aa(),ae=aa(),on=function(N,L){return N===L&&(ct=!0),0},bi={}.hasOwnProperty,Wr=[],ui=Wr.pop,Tr=Wr.push,Fe=Wr.push,un=Wr.slice,Qr=function(N,L){for(var Z=0,$=N.length;Z<$;Z++)if(N[Z]===L)return Z;return-1},ln="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rt="[\\x20\\t\\r\\n\\f]",fe="(?:\\\\[\\da-fA-F]{1,6}"+Rt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ue="\\["+Rt+"*("+fe+")(?:"+Rt+"*([*^$|!~]?=)"+Rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+fe+"))|)"+Rt+"*\\]",lr=":("+fe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ue+")*)|.*)\\)|)",Ve=new RegExp(Rt+"+","g"),cr=new RegExp("^"+Rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Rt+"+$","g"),xi=new RegExp("^"+Rt+"*,"+Rt+"*"),xa=new RegExp("^"+Rt+"*([>+~]|"+Rt+")"+Rt+"*"),Ks=new RegExp(Rt+"|>"),Qs=new RegExp(lr),Fo=new RegExp("^"+fe+"$"),Na={ID:new RegExp("^#("+fe+")"),CLASS:new RegExp("^\\.("+fe+")"),TAG:new RegExp("^("+fe+"|[*])"),ATTR:new RegExp("^"+Ue),PSEUDO:new RegExp("^"+lr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Rt+"*(even|odd|(([+-]|)(\\d*)n|)"+Rt+"*(?:([+-]|)"+Rt+"*(\\d+)|))"+Rt+"*\\)|)","i"),bool:new RegExp("^(?:"+ln+")$","i"),needsContext:new RegExp("^"+Rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Rt+"*((?:-\\d)?\\d*)"+Rt+"*\\)|)(?=[^-]|$)","i")},cn=/HTML$/i,Uo=/^(?:input|select|textarea|button)$/i,Ma=/^h\d$/i,ia=/^[^{]+\{\s*\[native \w/,Vo=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qs=/[+~]/,li=new RegExp("\\\\[\\da-fA-F]{1,6}"+Rt+"?|\\\\([^\\r\\n\\f])","g"),qn=function(N,L){var Z="0x"+N.slice(1)-65536;return L||(Z<0?String.fromCharCode(Z+65536):String.fromCharCode(Z>>10|55296,1023&Z|56320))},Xo=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,$s=function(N,L){return L?"\0"===N?"\ufffd":N.slice(0,-1)+"\\"+N.charCodeAt(N.length-1).toString(16)+" ":"\\"+N},Bi=function(){q()},ll=cs(function(N){return!0===N.disabled&&"fieldset"===N.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Fe.apply(Wr=un.call(Lt.childNodes),Lt.childNodes)}catch(N){Fe={apply:Wr.length?function(L,Z){Tr.apply(L,un.call(Z))}:function(L,Z){for(var $=L.length,X=0;L[$++]=Z[X++];);L.length=$-1}}}function be(N,L,Z,$){var X,ot,st,dt,mt,St,Pt,Bt=L&&L.ownerDocument,Qt=L?L.nodeType:9;if(Z=Z||[],"string"!=typeof N||!N||1!==Qt&&9!==Qt&&11!==Qt)return Z;if(!$&&(q(L),L=L||nt,Nt)){if(11!==Qt&&(mt=Vo.exec(N)))if(X=mt[1]){if(9===Qt){if(!(st=L.getElementById(X)))return Z;if(st.id===X)return Z.push(st),Z}else if(Bt&&(st=Bt.getElementById(X))&&we(L,st)&&st.id===X)return Z.push(st),Z}else{if(mt[2])return Fe.apply(Z,L.getElementsByTagName(N)),Z;if((X=mt[3])&&I.getElementsByClassName&&L.getElementsByClassName)return Fe.apply(Z,L.getElementsByClassName(X)),Z}if(I.qsa&&!ae[N+" "]&&(!bt||!bt.test(N))&&(1!==Qt||"object"!==L.nodeName.toLowerCase())){if(Pt=N,Bt=L,1===Qt&&(Ks.test(N)||xa.test(N))){for((Bt=qs.test(N)&&ls(L.parentNode)||L)===L&&I.scope||((dt=L.getAttribute("id"))?dt=dt.replace(Xo,$s):L.setAttribute("id",dt=Ae)),ot=(St=z(N)).length;ot--;)St[ot]=(dt?"#"+dt:":scope")+" "+to(St[ot]);Pt=St.join(",")}try{return Fe.apply(Z,Bt.querySelectorAll(Pt)),Z}catch(je){ae(N,!0)}finally{dt===Ae&&L.removeAttribute("id")}}}return U(N.replace(cr,"$1"),L,Z,$)}function aa(){var N=[];return function L(Z,$){return N.push(Z+" ")>y.cacheLength&&delete L[N.shift()],L[Z+" "]=$}}function bn(N){return N[Ae]=!0,N}function fr(N){var L=nt.createElement("fieldset");try{return!!N(L)}catch(Z){return!1}finally{L.parentNode&&L.parentNode.removeChild(L),L=null}}function sa(N,L){for(var Z=N.split("|"),$=Z.length;$--;)y.attrHandle[Z[$]]=L}function Ho(N,L){var Z=L&&N,$=Z&&1===N.nodeType&&1===L.nodeType&&N.sourceIndex-L.sourceIndex;if($)return $;if(Z)for(;Z=Z.nextSibling;)if(Z===L)return-1;return N?1:-1}function Jo(N){return function(L){return"input"===L.nodeName.toLowerCase()&&L.type===N}}function Ko(N){return function(L){var Z=L.nodeName.toLowerCase();return("input"===Z||"button"===Z)&&L.type===N}}function Zi(N){return function(L){return"form"in L?L.parentNode&&!1===L.disabled?"label"in L?"label"in L.parentNode?L.parentNode.disabled===N:L.disabled===N:L.isDisabled===N||L.isDisabled!==!N&&ll(L)===N:L.disabled===N:"label"in L&&L.disabled===N}}function hr(N){return bn(function(L){return L=+L,bn(function(Z,$){for(var X,ot=N([],Z.length,L),st=ot.length;st--;)Z[X=ot[st]]&&(Z[X]=!($[X]=Z[X]))})})}function ls(N){return N&&void 0!==N.getElementsByTagName&&N}for(v in I=be.support={},D=be.isXML=function(N){var Z=N&&(N.ownerDocument||N).documentElement;return!cn.test(N&&N.namespaceURI||Z&&Z.nodeName||"HTML")},q=be.setDocument=function(N){var L,Z,$=N?N.ownerDocument||N:Lt;return $!=nt&&9===$.nodeType&&$.documentElement&&(Ct=(nt=$).documentElement,Nt=!D(nt),Lt!=nt&&(Z=nt.defaultView)&&Z.top!==Z&&(Z.addEventListener?Z.addEventListener("unload",Bi,!1):Z.attachEvent&&Z.attachEvent("onunload",Bi)),I.scope=fr(function(X){return Ct.appendChild(X).appendChild(nt.createElement("div")),void 0!==X.querySelectorAll&&!X.querySelectorAll(":scope fieldset div").length}),I.attributes=fr(function(X){return X.className="i",!X.getAttribute("className")}),I.getElementsByTagName=fr(function(X){return X.appendChild(nt.createComment("")),!X.getElementsByTagName("*").length}),I.getElementsByClassName=ia.test(nt.getElementsByClassName),I.getById=fr(function(X){return Ct.appendChild(X).id=Ae,!nt.getElementsByName||!nt.getElementsByName(Ae).length}),I.getById?(y.filter.ID=function(X){var ot=X.replace(li,qn);return function(st){return st.getAttribute("id")===ot}},y.find.ID=function(X,ot){if(void 0!==ot.getElementById&&Nt){var st=ot.getElementById(X);return st?[st]:[]}}):(y.filter.ID=function(X){var ot=X.replace(li,qn);return function(st){var dt=void 0!==st.getAttributeNode&&st.getAttributeNode("id");return dt&&dt.value===ot}},y.find.ID=function(X,ot){if(void 0!==ot.getElementById&&Nt){var st,dt,mt,St=ot.getElementById(X);if(St){if((st=St.getAttributeNode("id"))&&st.value===X)return[St];for(mt=ot.getElementsByName(X),dt=0;St=mt[dt++];)if((st=St.getAttributeNode("id"))&&st.value===X)return[St]}return[]}}),y.find.TAG=I.getElementsByTagName?function(X,ot){return void 0!==ot.getElementsByTagName?ot.getElementsByTagName(X):I.qsa?ot.querySelectorAll(X):void 0}:function(X,ot){var st,dt=[],mt=0,St=ot.getElementsByTagName(X);if("*"===X){for(;st=St[mt++];)1===st.nodeType&&dt.push(st);return dt}return St},y.find.CLASS=I.getElementsByClassName&&function(X,ot){if(void 0!==ot.getElementsByClassName&&Nt)return ot.getElementsByClassName(X)},Ge=[],bt=[],(I.qsa=ia.test(nt.querySelectorAll))&&(fr(function(X){var ot;Ct.appendChild(X).innerHTML="<a id='"+Ae+"'></a><select id='"+Ae+"-\r\\' msallowcapture=''><option selected=''></option></select>",X.querySelectorAll("[msallowcapture^='']").length&&bt.push("[*^$]="+Rt+"*(?:''|\"\")"),X.querySelectorAll("[selected]").length||bt.push("\\["+Rt+"*(?:value|"+ln+")"),X.querySelectorAll("[id~="+Ae+"-]").length||bt.push("~="),(ot=nt.createElement("input")).setAttribute("name",""),X.appendChild(ot),X.querySelectorAll("[name='']").length||bt.push("\\["+Rt+"*name"+Rt+"*="+Rt+"*(?:''|\"\")"),X.querySelectorAll(":checked").length||bt.push(":checked"),X.querySelectorAll("a#"+Ae+"+*").length||bt.push(".#.+[+~]"),X.querySelectorAll("\\\f"),bt.push("[\\r\\n\\f]")}),fr(function(X){X.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ot=nt.createElement("input");ot.setAttribute("type","hidden"),X.appendChild(ot).setAttribute("name","D"),X.querySelectorAll("[name=d]").length&&bt.push("name"+Rt+"*[*^$|!~]?="),2!==X.querySelectorAll(":enabled").length&&bt.push(":enabled",":disabled"),Ct.appendChild(X).disabled=!0,2!==X.querySelectorAll(":disabled").length&&bt.push(":enabled",":disabled"),X.querySelectorAll("*,:x"),bt.push(",.*:")})),(I.matchesSelector=ia.test(Ye=Ct.matches||Ct.webkitMatchesSelector||Ct.mozMatchesSelector||Ct.oMatchesSelector||Ct.msMatchesSelector))&&fr(function(X){I.disconnectedMatch=Ye.call(X,"*"),Ye.call(X,"[s!='']:x"),Ge.push("!=",lr)}),bt=bt.length&&new RegExp(bt.join("|")),Ge=Ge.length&&new RegExp(Ge.join("|")),L=ia.test(Ct.compareDocumentPosition),we=L||ia.test(Ct.contains)?function(X,ot){var st=9===X.nodeType?X.documentElement:X,dt=ot&&ot.parentNode;return X===dt||!(!dt||1!==dt.nodeType||!(st.contains?st.contains(dt):X.compareDocumentPosition&&16&X.compareDocumentPosition(dt)))}:function(X,ot){if(ot)for(;ot=ot.parentNode;)if(ot===X)return!0;return!1},on=L?function(X,ot){if(X===ot)return ct=!0,0;var st=!X.compareDocumentPosition-!ot.compareDocumentPosition;return st||(1&(st=(X.ownerDocument||X)==(ot.ownerDocument||ot)?X.compareDocumentPosition(ot):1)||!I.sortDetached&&ot.compareDocumentPosition(X)===st?X==nt||X.ownerDocument==Lt&&we(Lt,X)?-1:ot==nt||ot.ownerDocument==Lt&&we(Lt,ot)?1:rt?Qr(rt,X)-Qr(rt,ot):0:4&st?-1:1)}:function(X,ot){if(X===ot)return ct=!0,0;var st,dt=0,mt=X.parentNode,St=ot.parentNode,Pt=[X],Bt=[ot];if(!mt||!St)return X==nt?-1:ot==nt?1:mt?-1:St?1:rt?Qr(rt,X)-Qr(rt,ot):0;if(mt===St)return Ho(X,ot);for(st=X;st=st.parentNode;)Pt.unshift(st);for(st=ot;st=st.parentNode;)Bt.unshift(st);for(;Pt[dt]===Bt[dt];)dt++;return dt?Ho(Pt[dt],Bt[dt]):Pt[dt]==Lt?-1:Bt[dt]==Lt?1:0}),nt},be.matches=function(N,L){return be(N,null,null,L)},be.matchesSelector=function(N,L){if(q(N),I.matchesSelector&&Nt&&!ae[L+" "]&&(!Ge||!Ge.test(L))&&(!bt||!bt.test(L)))try{var Z=Ye.call(N,L);if(Z||I.disconnectedMatch||N.document&&11!==N.document.nodeType)return Z}catch($){ae(L,!0)}return 0<be(L,nt,null,[N]).length},be.contains=function(N,L){return(N.ownerDocument||N)!=nt&&q(N),we(N,L)},be.attr=function(N,L){(N.ownerDocument||N)!=nt&&q(N);var Z=y.attrHandle[L.toLowerCase()],$=Z&&bi.call(y.attrHandle,L.toLowerCase())?Z(N,L,!Nt):void 0;return void 0!==$?$:I.attributes||!Nt?N.getAttribute(L):($=N.getAttributeNode(L))&&$.specified?$.value:null},be.escape=function(N){return(N+"").replace(Xo,$s)},be.error=function(N){throw new Error("Syntax error, unrecognized expression: "+N)},be.uniqueSort=function(N){var L,Z=[],$=0,X=0;if(ct=!I.detectDuplicates,rt=!I.sortStable&&N.slice(0),N.sort(on),ct){for(;L=N[X++];)L===N[X]&&($=Z.push(X));for(;$--;)N.splice(Z[$],1)}return rt=null,N},S=be.getText=function(N){var L,Z="",$=0,X=N.nodeType;if(X){if(1===X||9===X||11===X){if("string"==typeof N.textContent)return N.textContent;for(N=N.firstChild;N;N=N.nextSibling)Z+=S(N)}else if(3===X||4===X)return N.nodeValue}else for(;L=N[$++];)Z+=S(L);return Z},(y=be.selectors={cacheLength:50,createPseudo:bn,match:Na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(N){return N[1]=N[1].replace(li,qn),N[3]=(N[3]||N[4]||N[5]||"").replace(li,qn),"~="===N[2]&&(N[3]=" "+N[3]+" "),N.slice(0,4)},CHILD:function(N){return N[1]=N[1].toLowerCase(),"nth"===N[1].slice(0,3)?(N[3]||be.error(N[0]),N[4]=+(N[4]?N[5]+(N[6]||1):2*("even"===N[3]||"odd"===N[3])),N[5]=+(N[7]+N[8]||"odd"===N[3])):N[3]&&be.error(N[0]),N},PSEUDO:function(N){var L,Z=!N[6]&&N[2];return Na.CHILD.test(N[0])?null:(N[3]?N[2]=N[4]||N[5]||"":Z&&Qs.test(Z)&&(L=z(Z,!0))&&(L=Z.indexOf(")",Z.length-L)-Z.length)&&(N[0]=N[0].slice(0,L),N[2]=Z.slice(0,L)),N.slice(0,3))}},filter:{TAG:function(N){var L=N.replace(li,qn).toLowerCase();return"*"===N?function(){return!0}:function(Z){return Z.nodeName&&Z.nodeName.toLowerCase()===L}},CLASS:function(N){var L=he[N+" "];return L||(L=new RegExp("(^|"+Rt+")"+N+"("+Rt+"|$)"))&&he(N,function(Z){return L.test("string"==typeof Z.className&&Z.className||void 0!==Z.getAttribute&&Z.getAttribute("class")||"")})},ATTR:function(N,L,Z){return function($){var X=be.attr($,N);return null==X?"!="===L:!L||(X+="","="===L?X===Z:"!="===L?X!==Z:"^="===L?Z&&0===X.indexOf(Z):"*="===L?Z&&-1<X.indexOf(Z):"$="===L?Z&&X.slice(-Z.length)===Z:"~="===L?-1<(" "+X.replace(Ve," ")+" ").indexOf(Z):"|="===L&&(X===Z||X.slice(0,Z.length+1)===Z+"-"))}},CHILD:function(N,L,Z,$,X){var ot="nth"!==N.slice(0,3),st="last"!==N.slice(-4),dt="of-type"===L;return 1===$&&0===X?function(mt){return!!mt.parentNode}:function(mt,St,Pt){var Bt,Qt,je,_t,Zt,gr,mr=ot!==st?"nextSibling":"previousSibling",ye=mt.parentNode,$n=dt&&mt.nodeName.toLowerCase(),Yr=!Pt&&!dt,rr=!1;if(ye){if(ot){for(;mr;){for(_t=mt;_t=_t[mr];)if(dt?_t.nodeName.toLowerCase()===$n:1===_t.nodeType)return!1;gr=mr="only"===N&&!gr&&"nextSibling"}return!0}if(gr=[st?ye.firstChild:ye.lastChild],st&&Yr){for(rr=(Zt=(Bt=(Qt=(je=(_t=ye)[Ae]||(_t[Ae]={}))[_t.uniqueID]||(je[_t.uniqueID]={}))[N]||[])[0]===er&&Bt[1])&&Bt[2],_t=Zt&&ye.childNodes[Zt];_t=++Zt&&_t&&_t[mr]||(rr=Zt=0)||gr.pop();)if(1===_t.nodeType&&++rr&&_t===mt){Qt[N]=[er,Zt,rr];break}}else if(Yr&&(rr=Zt=(Bt=(Qt=(je=(_t=mt)[Ae]||(_t[Ae]={}))[_t.uniqueID]||(je[_t.uniqueID]={}))[N]||[])[0]===er&&Bt[1]),!1===rr)for(;(_t=++Zt&&_t&&_t[mr]||(rr=Zt=0)||gr.pop())&&((dt?_t.nodeName.toLowerCase()!==$n:1!==_t.nodeType)||!++rr||(Yr&&((Qt=(je=_t[Ae]||(_t[Ae]={}))[_t.uniqueID]||(je[_t.uniqueID]={}))[N]=[er,rr]),_t!==mt)););return(rr-=X)===$||rr%$==0&&0<=rr/$}}},PSEUDO:function(N,L){var Z,$=y.pseudos[N]||y.setFilters[N.toLowerCase()]||be.error("unsupported pseudo: "+N);return $[Ae]?$(L):1<$.length?(Z=[N,N,"",L],y.setFilters.hasOwnProperty(N.toLowerCase())?bn(function(X,ot){for(var st,dt=$(X,L),mt=dt.length;mt--;)X[st=Qr(X,dt[mt])]=!(ot[st]=dt[mt])}):function(X){return $(X,0,Z)}):$}},pseudos:{not:bn(function(N){var L=[],Z=[],$=_(N.replace(cr,"$1"));return $[Ae]?bn(function(X,ot,st,dt){for(var mt,St=$(X,null,dt,[]),Pt=X.length;Pt--;)(mt=St[Pt])&&(X[Pt]=!(ot[Pt]=mt))}):function(X,ot,st){return L[0]=X,$(L,null,st,Z),L[0]=null,!Z.pop()}}),has:bn(function(N){return function(L){return 0<be(N,L).length}}),contains:bn(function(N){return N=N.replace(li,qn),function(L){return-1<(L.textContent||S(L)).indexOf(N)}}),lang:bn(function(N){return Fo.test(N||"")||be.error("unsupported lang: "+N),N=N.replace(li,qn).toLowerCase(),function(L){var Z;do{if(Z=Nt?L.lang:L.getAttribute("xml:lang")||L.getAttribute("lang"))return(Z=Z.toLowerCase())===N||0===Z.indexOf(N+"-")}while((L=L.parentNode)&&1===L.nodeType);return!1}}),target:function(N){var L=c.location&&c.location.hash;return L&&L.slice(1)===N.id},root:function(N){return N===Ct},focus:function(N){return N===nt.activeElement&&(!nt.hasFocus||nt.hasFocus())&&!!(N.type||N.href||~N.tabIndex)},enabled:Zi(!1),disabled:Zi(!0),checked:function(N){var L=N.nodeName.toLowerCase();return"input"===L&&!!N.checked||"option"===L&&!!N.selected},selected:function(N){return!0===N.selected},empty:function(N){for(N=N.firstChild;N;N=N.nextSibling)if(N.nodeType<6)return!1;return!0},parent:function(N){return!y.pseudos.empty(N)},header:function(N){return Ma.test(N.nodeName)},input:function(N){return Uo.test(N.nodeName)},button:function(N){var L=N.nodeName.toLowerCase();return"input"===L&&"button"===N.type||"button"===L},text:function(N){var L;return"input"===N.nodeName.toLowerCase()&&"text"===N.type&&(null==(L=N.getAttribute("type"))||"text"===L.toLowerCase())},first:hr(function(){return[0]}),last:hr(function(N,L){return[L-1]}),eq:hr(function(N,L,Z){return[Z<0?Z+L:Z]}),even:hr(function(N,L){for(var Z=0;Z<L;Z+=2)N.push(Z);return N}),odd:hr(function(N,L){for(var Z=1;Z<L;Z+=2)N.push(Z);return N}),lt:hr(function(N,L,Z){for(var $=Z<0?Z+L:L<Z?L:Z;0<=--$;)N.push($);return N}),gt:hr(function(N,L,Z){for(var $=Z<0?Z+L:Z;++$<L;)N.push($);return N})}}).pseudos.nth=y.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[v]=Jo(v);for(v in{submit:!0,reset:!0})y.pseudos[v]=Ko(v);function Qo(){}function to(N){for(var L=0,Z=N.length,$="";L<Z;L++)$+=N[L].value;return $}function cs(N,L,Z){var $=L.dir,X=L.next,ot=X||$,st=Z&&"parentNode"===ot,dt=re++;return L.first?function(mt,St,Pt){for(;mt=mt[$];)if(1===mt.nodeType||st)return N(mt,St,Pt);return!1}:function(mt,St,Pt){var Bt,Qt,je,_t=[er,dt];if(Pt){for(;mt=mt[$];)if((1===mt.nodeType||st)&&N(mt,St,Pt))return!0}else for(;mt=mt[$];)if(1===mt.nodeType||st)if(Qt=(je=mt[Ae]||(mt[Ae]={}))[mt.uniqueID]||(je[mt.uniqueID]={}),X&&X===mt.nodeName.toLowerCase())mt=mt[$]||mt;else{if((Bt=Qt[ot])&&Bt[0]===er&&Bt[1]===dt)return _t[2]=Bt[2];if((Qt[ot]=_t)[2]=N(mt,St,Pt))return!0}return!1}}function qo(N){return 1<N.length?function(L,Z,$){for(var X=N.length;X--;)if(!N[X](L,Z,$))return!1;return!0}:N[0]}function fs(N,L,Z,$,X){for(var ot,st=[],dt=0,mt=N.length,St=null!=L;dt<mt;dt++)(ot=N[dt])&&(Z&&!Z(ot,$,X)||(st.push(ot),St&&L.push(dt)));return st}function fn(N,L,Z,$,X,ot){return $&&!$[Ae]&&($=fn($)),X&&!X[Ae]&&(X=fn(X,ot)),bn(function(st,dt,mt,St){var Pt,Bt,Qt,je=[],_t=[],Zt=dt.length,gr=st||function($n,Yr,rr){for(var Fr=0,Bn=Yr.length;Fr<Bn;Fr++)be($n,Yr[Fr],rr);return rr}(L||"*",mt.nodeType?[mt]:mt,[]),mr=!N||!st&&L?gr:fs(gr,je,N,mt,St),ye=Z?X||(st?N:Zt||$)?[]:dt:mr;if(Z&&Z(mr,ye,mt,St),$)for(Pt=fs(ye,_t),$(Pt,[],mt,St),Bt=Pt.length;Bt--;)(Qt=Pt[Bt])&&(ye[_t[Bt]]=!(mr[_t[Bt]]=Qt));if(st){if(X||N){if(X){for(Pt=[],Bt=ye.length;Bt--;)(Qt=ye[Bt])&&Pt.push(mr[Bt]=Qt);X(null,ye=[],Pt,St)}for(Bt=ye.length;Bt--;)(Qt=ye[Bt])&&-1<(Pt=X?Qr(st,Qt):je[Bt])&&(st[Pt]=!(dt[Pt]=Qt))}}else ye=fs(ye===dt?ye.splice(Zt,ye.length):ye),X?X(null,dt,ye,St):Fe.apply(dt,ye)})}function K(N){for(var L,Z,$,X=N.length,ot=y.relative[N[0].type],st=ot||y.relative[" "],dt=ot?1:0,mt=cs(function(Bt){return Bt===L},st,!0),St=cs(function(Bt){return-1<Qr(L,Bt)},st,!0),Pt=[function(Bt,Qt,je){var _t=!ot&&(je||Qt!==J)||((L=Qt).nodeType?mt(Bt,Qt,je):St(Bt,Qt,je));return L=null,_t}];dt<X;dt++)if(Z=y.relative[N[dt].type])Pt=[cs(qo(Pt),Z)];else{if((Z=y.filter[N[dt].type].apply(null,N[dt].matches))[Ae]){for($=++dt;$<X&&!y.relative[N[$].type];$++);return fn(1<dt&&qo(Pt),1<dt&&to(N.slice(0,dt-1).concat({value:" "===N[dt-2].type?"*":""})).replace(cr,"$1"),Z,dt<$&&K(N.slice(dt,$)),$<X&&K(N=N.slice($)),$<X&&to(N))}Pt.push(Z)}return qo(Pt)}return Qo.prototype=y.filters=y.pseudos,y.setFilters=new Qo,z=be.tokenize=function(N,L){var Z,$,X,ot,st,dt,mt,St=oi[N+" "];if(St)return L?0:St.slice(0);for(st=N,dt=[],mt=y.preFilter;st;){for(ot in Z&&!($=xi.exec(st))||($&&(st=st.slice($[0].length)||st),dt.push(X=[])),Z=!1,($=xa.exec(st))&&(Z=$.shift(),X.push({value:Z,type:$[0].replace(cr," ")}),st=st.slice(Z.length)),y.filter)!($=Na[ot].exec(st))||mt[ot]&&!($=mt[ot]($))||(Z=$.shift(),X.push({value:Z,type:ot,matches:$}),st=st.slice(Z.length));if(!Z)break}return L?st.length:st?be.error(N):oi(N,dt).slice(0)},_=be.compile=function(N,L){var Z,$,X,ot,st,dt,mt=[],St=[],Pt=Qn[N+" "];if(!Pt){for(L||(L=z(N)),Z=L.length;Z--;)(Pt=K(L[Z]))[Ae]?mt.push(Pt):St.push(Pt);(Pt=Qn(N,($=St,ot=0<(X=mt).length,st=0<$.length,dt=function(Bt,Qt,je,_t,Zt){var gr,mr,ye,$n=0,Yr="0",rr=Bt&&[],Fr=[],Bn=J,oa=Bt||st&&y.find.TAG("*",Zt),eo=er+=null==Bn?1:Math.random()||.1,ro=oa.length;for(Zt&&(J=Qt==nt||Qt||Zt);Yr!==ro&&null!=(gr=oa[Yr]);Yr++){if(st&&gr){for(mr=0,Qt||gr.ownerDocument==nt||(q(gr),je=!Nt);ye=$[mr++];)if(ye(gr,Qt||nt,je)){_t.push(gr);break}Zt&&(er=eo)}ot&&((gr=!ye&&gr)&&$n--,Bt&&rr.push(gr))}if($n+=Yr,ot&&Yr!==$n){for(mr=0;ye=X[mr++];)ye(rr,Fr,Qt,je);if(Bt){if(0<$n)for(;Yr--;)rr[Yr]||Fr[Yr]||(Fr[Yr]=ui.call(_t));Fr=fs(Fr)}Fe.apply(_t,Fr),Zt&&!Bt&&0<Fr.length&&1<$n+X.length&&be.uniqueSort(_t)}return Zt&&(er=eo,J=Bn),rr},ot?bn(dt):dt))).selector=N}return Pt},U=be.select=function(N,L,Z,$){var X,ot,st,dt,mt,St="function"==typeof N&&N,Pt=!$&&z(N=St.selector||N);if(Z=Z||[],1===Pt.length){if(2<(ot=Pt[0]=Pt[0].slice(0)).length&&"ID"===(st=ot[0]).type&&9===L.nodeType&&Nt&&y.relative[ot[1].type]){if(!(L=(y.find.ID(st.matches[0].replace(li,qn),L)||[])[0]))return Z;St&&(L=L.parentNode),N=N.slice(ot.shift().value.length)}for(X=Na.needsContext.test(N)?0:ot.length;X--&&!y.relative[dt=(st=ot[X]).type];)if((mt=y.find[dt])&&($=mt(st.matches[0].replace(li,qn),qs.test(ot[0].type)&&ls(L.parentNode)||L))){if(ot.splice(X,1),!(N=$.length&&to(ot)))return Fe.apply(Z,$),Z;break}}return(St||_(N,Pt))($,L,!Nt,Z,!L||qs.test(N)&&ls(L.parentNode)||L),Z},I.sortStable=Ae.split("").sort(on).join("")===Ae,I.detectDuplicates=!!ct,q(),I.sortDetached=fr(function(N){return 1&N.compareDocumentPosition(nt.createElement("fieldset"))}),fr(function(N){return N.innerHTML="<a href='#'></a>","#"===N.firstChild.getAttribute("href")})||sa("type|href|height|width",function(N,L,Z){if(!Z)return N.getAttribute(L,"type"===L.toLowerCase()?1:2)}),I.attributes&&fr(function(N){return N.innerHTML="<input/>",N.firstChild.setAttribute("value",""),""===N.firstChild.getAttribute("value")})||sa("value",function(N,L,Z){if(!Z&&"input"===N.nodeName.toLowerCase())return N.defaultValue}),fr(function(N){return null==N.getAttribute("disabled")})||sa(ln,function(N,L,Z){var $;if(!Z)return!0===N[L]?L.toLowerCase():($=N.getAttributeNode(L))&&$.specified?$.value:null}),be}(R);C.find=ar,C.expr=ar.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=ar.uniqueSort,C.text=ar.getText,C.isXMLDoc=ar.isXML,C.contains=ar.contains,C.escapeSelector=ar.escape;var kn=function(c,v,I){for(var y=[],S=void 0!==I;(c=c[v])&&9!==c.nodeType;)if(1===c.nodeType){if(S&&C(c).is(I))break;y.push(c)}return y},Or=function(c,v){for(var I=[];c;c=c.nextSibling)1===c.nodeType&&c!==v&&I.push(c);return I},qi=C.expr.match.needsContext;function Rr(c,v){return c.nodeName&&c.nodeName.toLowerCase()===v.toLowerCase()}var Ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Oi(c,v,I){return Dt(v)?C.grep(c,function(y,S){return!!v.call(y,S,y)!==I}):v.nodeType?C.grep(c,function(y){return y===v!==I}):"string"!=typeof v?C.grep(c,function(y){return-1<ni.call(v,y)!==I}):C.filter(v,c,I)}C.filter=function(c,v,I){var y=v[0];return I&&(c=":not("+c+")"),1===v.length&&1===y.nodeType?C.find.matchesSelector(y,c)?[y]:[]:C.find.matches(c,C.grep(v,function(S){return 1===S.nodeType}))},C.fn.extend({find:function(c){var v,I,y=this.length,S=this;if("string"!=typeof c)return this.pushStack(C(c).filter(function(){for(v=0;v<y;v++)if(C.contains(S[v],this))return!0}));for(I=this.pushStack([]),v=0;v<y;v++)C.find(c,S[v],I);return 1<y?C.uniqueSort(I):I},filter:function(c){return this.pushStack(Oi(this,c||[],!1))},not:function(c){return this.pushStack(Oi(this,c||[],!0))},is:function(c){return!!Oi(this,"string"==typeof c&&qi.test(c)?C(c):c||[],!1).length}});var Xa,En=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(c,v,I){var y,S;if(!c)return this;if(I=I||Xa,"string"==typeof c){if(!(y="<"===c[0]&&">"===c[c.length-1]&&3<=c.length?[null,c,null]:En.exec(c))||!y[1]&&v)return!v||v.jquery?(v||I).find(c):this.constructor(v).find(c);if(y[1]){if(C.merge(this,C.parseHTML(y[1],(v=v instanceof C?v[0]:v)&&v.nodeType?v.ownerDocument||v:Ut,!0)),Ke.test(y[1])&&C.isPlainObject(v))for(y in v)Dt(this[y])?this[y](v[y]):this.attr(y,v[y]);return this}return(S=Ut.getElementById(y[2]))&&(this[0]=S,this.length=1),this}return c.nodeType?(this[0]=c,this.length=1,this):Dt(c)?void 0!==I.ready?I.ready(c):c(C):C.makeArray(c,this)}).prototype=C.fn,Xa=C(Ut);var In=/^(?:parents|prev(?:Until|All))/,Ha={children:!0,contents:!0,next:!0,prev:!0};function Ri(c,v){for(;(c=c[v])&&1!==c.nodeType;);return c}C.fn.extend({has:function(c){var v=C(c,this),I=v.length;return this.filter(function(){for(var y=0;y<I;y++)if(C.contains(this,v[y]))return!0})},closest:function(c,v){var I,y=0,S=this.length,D=[],z="string"!=typeof c&&C(c);if(!qi.test(c))for(;y<S;y++)for(I=this[y];I&&I!==v;I=I.parentNode)if(I.nodeType<11&&(z?-1<z.index(I):1===I.nodeType&&C.find.matchesSelector(I,c))){D.push(I);break}return this.pushStack(1<D.length?C.uniqueSort(D):D)},index:function(c){return c?"string"==typeof c?ni.call(C(c),this[0]):ni.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,v){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(c,v))))},addBack:function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))}}),C.each({parent:function(c){var v=c.parentNode;return v&&11!==v.nodeType?v:null},parents:function(c){return kn(c,"parentNode")},parentsUntil:function(c,v,I){return kn(c,"parentNode",I)},next:function(c){return Ri(c,"nextSibling")},prev:function(c){return Ri(c,"previousSibling")},nextAll:function(c){return kn(c,"nextSibling")},prevAll:function(c){return kn(c,"previousSibling")},nextUntil:function(c,v,I){return kn(c,"nextSibling",I)},prevUntil:function(c,v,I){return kn(c,"previousSibling",I)},siblings:function(c){return Or((c.parentNode||{}).firstChild,c)},children:function(c){return Or(c.firstChild)},contents:function(c){return null!=c.contentDocument&&Wt(c.contentDocument)?c.contentDocument:(Rr(c,"template")&&(c=c.content||c),C.merge([],c.childNodes))}},function(c,v){C.fn[c]=function(I,y){var S=C.map(this,v,I);return"Until"!==c.slice(-5)&&(y=I),y&&"string"==typeof y&&(S=C.filter(y,S)),1<this.length&&(Ha[c]||C.uniqueSort(S),In.test(c)&&S.reverse()),this.pushStack(S)}});var _e=/[^\x20\t\r\n\f]+/g;function Gr(c){return c}function pi(c){throw c}function Ja(c,v,I,y){var S;try{c&&Dt(S=c.promise)?S.call(c).done(v).fail(I):c&&Dt(S=c.then)?S.call(c,v,I):v.apply(void 0,[c].slice(y))}catch(D){I.apply(void 0,[D])}}C.Callbacks=function(c){var I;c="string"==typeof c?(I={},C.each(c.match(_e)||[],function(q,nt){I[nt]=!0}),I):C.extend({},c);var y,S,D,z,_=[],U=[],J=-1,rt=function(){for(z=z||c.once,D=y=!0;U.length;J=-1)for(S=U.shift();++J<_.length;)!1===_[J].apply(S[0],S[1])&&c.stopOnFalse&&(J=_.length,S=!1);c.memory||(S=!1),y=!1,z&&(_=S?[]:"")},ct={add:function(){return _&&(S&&!y&&(J=_.length-1,U.push(S)),function q(nt){C.each(nt,function(Ct,Nt){Dt(Nt)?c.unique&&ct.has(Nt)||_.push(Nt):Nt&&Nt.length&&"string"!==vr(Nt)&&q(Nt)})}(arguments),S&&!y&&rt()),this},remove:function(){return C.each(arguments,function(q,nt){for(var Ct;-1<(Ct=C.inArray(nt,_,Ct));)_.splice(Ct,1),Ct<=J&&J--}),this},has:function(q){return q?-1<C.inArray(q,_):0<_.length},empty:function(){return _&&(_=[]),this},disable:function(){return z=U=[],_=S="",this},disabled:function(){return!_},lock:function(){return z=U=[],S||y||(_=S=""),this},locked:function(){return!!z},fireWith:function(q,nt){return z||(nt=[q,(nt=nt||[]).slice?nt.slice():nt],U.push(nt),y||rt()),this},fire:function(){return ct.fireWith(this,arguments),this},fired:function(){return!!D}};return ct},C.extend({Deferred:function(c){var v=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],I="pending",y={state:function(){return I},always:function(){return S.done(arguments).fail(arguments),this},catch:function(D){return y.then(null,D)},pipe:function(){var D=arguments;return C.Deferred(function(z){C.each(v,function(_,U){var J=Dt(D[U[4]])&&D[U[4]];S[U[1]](function(){var rt=J&&J.apply(this,arguments);rt&&Dt(rt.promise)?rt.promise().progress(z.notify).done(z.resolve).fail(z.reject):z[U[0]+"With"](this,J?[rt]:arguments)})}),D=null}).promise()},then:function(D,z,_){var U=0;function J(rt,ct,q,nt){return function(){var Ct=this,Nt=arguments,bt=function(){var Ye,we;if(!(rt<U)){if((Ye=q.apply(Ct,Nt))===ct.promise())throw new TypeError("Thenable self-resolution");Dt(we=Ye&&("object"==typeof Ye||"function"==typeof Ye)&&Ye.then)?nt?we.call(Ye,J(U,ct,Gr,nt),J(U,ct,pi,nt)):(U++,we.call(Ye,J(U,ct,Gr,nt),J(U,ct,pi,nt),J(U,ct,Gr,ct.notifyWith))):(q!==Gr&&(Ct=void 0,Nt=[Ye]),(nt||ct.resolveWith)(Ct,Nt))}},Ge=nt?bt:function(){try{bt()}catch(Ye){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(Ye,Ge.stackTrace),U<=rt+1&&(q!==pi&&(Ct=void 0,Nt=[Ye]),ct.rejectWith(Ct,Nt))}};rt?Ge():(C.Deferred.getStackHook&&(Ge.stackTrace=C.Deferred.getStackHook()),R.setTimeout(Ge))}}return C.Deferred(function(rt){v[0][3].add(J(0,rt,Dt(_)?_:Gr,rt.notifyWith)),v[1][3].add(J(0,rt,Dt(D)?D:Gr)),v[2][3].add(J(0,rt,Dt(z)?z:pi))}).promise()},promise:function(D){return null!=D?C.extend(D,y):y}},S={};return C.each(v,function(D,z){var _=z[2],U=z[5];y[z[1]]=_.add,U&&_.add(function(){I=U},v[3-D][2].disable,v[3-D][3].disable,v[0][2].lock,v[0][3].lock),_.add(z[3].fire),S[z[0]]=function(){return S[z[0]+"With"](this===S?void 0:this,arguments),this},S[z[0]+"With"]=_.fireWith}),y.promise(S),c&&c.call(S,S),S},when:function(c){var v=arguments.length,I=v,y=Array(I),S=Se.call(arguments),D=C.Deferred(),z=function(_){return function(U){y[_]=this,S[_]=1<arguments.length?Se.call(arguments):U,--v||D.resolveWith(y,S)}};if(v<=1&&(Ja(c,D.done(z(I)).resolve,D.reject,!v),"pending"===D.state()||Dt(S[I]&&S[I].then)))return D.then();for(;I--;)Ja(S[I],z(I),D.reject);return D.promise()}});var an=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(c,v){R.console&&R.console.warn&&c&&an.test(c.name)&&R.console.warn("jQuery.Deferred exception: "+c.message,c.stack,v)},C.readyException=function(c){R.setTimeout(function(){throw c})};var jr=C.Deferred();function mi(){Ut.removeEventListener("DOMContentLoaded",mi),R.removeEventListener("load",mi),C.ready()}C.fn.ready=function(c){return jr.then(c).catch(function(v){C.readyException(v)}),this},C.extend({isReady:!1,readyWait:1,ready:function(c){(!0===c?--C.readyWait:C.isReady)||(C.isReady=!0)!==c&&0<--C.readyWait||jr.resolveWith(Ut,[C])}}),C.ready.then=jr.then,"complete"===Ut.readyState||"loading"!==Ut.readyState&&!Ut.documentElement.doScroll?R.setTimeout(C.ready):(Ut.addEventListener("DOMContentLoaded",mi),R.addEventListener("load",mi));var We=function(c,v,I,y,S,D,z){var _=0,U=c.length,J=null==I;if("object"===vr(I))for(_ in S=!0,I)We(c,v,_,I[_],!0,D,z);else if(void 0!==y&&(S=!0,Dt(y)||(z=!0),J&&(z?(v.call(c,y),v=null):(J=v,v=function(rt,ct,q){return J.call(C(rt),q)})),v))for(;_<U;_++)v(c[_],I,z?y:y.call(c[_],_,v(c[_],I)));return S?c:J?v.call(c):U?v(c[0],I):D},Gi=/^-ms-/,ii=/-([a-z])/g;function $i(c,v){return v.toUpperCase()}function Sr(c){return c.replace(Gi,"ms-").replace(ii,$i)}var Jn=function(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType};function $e(){this.expando=C.expando+$e.uid++}$e.uid=1,$e.prototype={cache:function(c){var v=c[this.expando];return v||(v={},Jn(c)&&(c.nodeType?c[this.expando]=v:Object.defineProperty(c,this.expando,{value:v,configurable:!0}))),v},set:function(c,v,I){var y,S=this.cache(c);if("string"==typeof v)S[Sr(v)]=I;else for(y in v)S[Sr(y)]=v[y];return S},get:function(c,v){return void 0===v?this.cache(c):c[this.expando]&&c[this.expando][Sr(v)]},access:function(c,v,I){return void 0===v||v&&"string"==typeof v&&void 0===I?this.get(c,v):(this.set(c,v,I),void 0!==I?I:v)},remove:function(c,v){var I,y=c[this.expando];if(void 0!==y){if(void 0!==v)for((I=(v=Array.isArray(v)?v.map(Sr):(v=Sr(v))in y?[v]:v.match(_e)||[]).length);I--;)delete y[v[I]];(void 0===v||C.isEmptyObject(y))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var v=c[this.expando];return void 0!==v&&!C.isEmptyObject(v)}};var x=new $e,O=new $e,W=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function ut(c,v,I){var y,S;if(void 0===I&&1===c.nodeType)if(y="data-"+v.replace(Q,"-$&").toLowerCase(),"string"==typeof(I=c.getAttribute(y))){try{I="true"===(S=I)||"false"!==S&&("null"===S?null:S===+S+""?+S:W.test(S)?JSON.parse(S):S)}catch(D){}O.set(c,v,I)}else I=void 0;return I}C.extend({hasData:function(c){return O.hasData(c)||x.hasData(c)},data:function(c,v,I){return O.access(c,v,I)},removeData:function(c,v){O.remove(c,v)},_data:function(c,v,I){return x.access(c,v,I)},_removeData:function(c,v){x.remove(c,v)}}),C.fn.extend({data:function(c,v){var I,y,S,D=this[0],z=D&&D.attributes;if(void 0===c){if(this.length&&(S=O.get(D),1===D.nodeType&&!x.get(D,"hasDataAttrs"))){for(I=z.length;I--;)z[I]&&0===(y=z[I].name).indexOf("data-")&&(y=Sr(y.slice(5)),ut(D,y,S[y]));x.set(D,"hasDataAttrs",!0)}return S}return"object"==typeof c?this.each(function(){O.set(this,c)}):We(this,function(_){var U;if(D&&void 0===_)return void 0!==(U=O.get(D,c))||void 0!==(U=ut(D,c))?U:void 0;this.each(function(){O.set(this,c,_)})},null,v,1<arguments.length,null,!0)},removeData:function(c){return this.each(function(){O.remove(this,c)})}}),C.extend({queue:function(c,v,I){var y;if(c)return y=x.get(c,v=(v||"fx")+"queue"),I&&(!y||Array.isArray(I)?y=x.access(c,v,C.makeArray(I)):y.push(I)),y||[]},dequeue:function(c,v){var I=C.queue(c,v=v||"fx"),y=I.length,S=I.shift(),D=C._queueHooks(c,v);"inprogress"===S&&(S=I.shift(),y--),S&&("fx"===v&&I.unshift("inprogress"),delete D.stop,S.call(c,function(){C.dequeue(c,v)},D)),!y&&D&&D.empty.fire()},_queueHooks:function(c,v){var I=v+"queueHooks";return x.get(c,I)||x.access(c,I,{empty:C.Callbacks("once memory").add(function(){x.remove(c,[v+"queue",I])})})}}),C.fn.extend({queue:function(c,v){var I=2;return"string"!=typeof c&&(v=c,c="fx",I--),arguments.length<I?C.queue(this[0],c):void 0===v?this:this.each(function(){var y=C.queue(this,c,v);C._queueHooks(this,c),"fx"===c&&"inprogress"!==y[0]&&C.dequeue(this,c)})},dequeue:function(c){return this.each(function(){C.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,v){var I,y=1,S=C.Deferred(),D=this,z=this.length,_=function(){--y||S.resolveWith(D,[D])};for("string"!=typeof c&&(v=c,c=void 0),c=c||"fx";z--;)(I=x.get(D[z],c+"queueHooks"))&&I.empty&&(y++,I.empty.add(_));return _(),S.promise(v)}});var lt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vt=new RegExp("^(?:([+-])=|)("+lt+")([a-z%]*)$","i"),Ot=["Top","Right","Bottom","Left"],ve=Ut.documentElement,Oe=function(c){return C.contains(c.ownerDocument,c)},Le={composed:!0};ve.getRootNode&&(Oe=function(c){return C.contains(c.ownerDocument,c)||c.getRootNode(Le)===c.ownerDocument});var pe=function(c,v){return"none"===(c=v||c).style.display||""===c.style.display&&Oe(c)&&"none"===C.css(c,"display")};function tr(c,v,I,y){var S,D,z=20,_=y?function(){return y.cur()}:function(){return C.css(c,v,"")},U=_(),J=I&&I[3]||(C.cssNumber[v]?"":"px"),rt=c.nodeType&&(C.cssNumber[v]||"px"!==J&&+U)&&vt.exec(C.css(c,v));if(rt&&rt[3]!==J){for(J=J||rt[3],rt=+(U/=2)||1;z--;)C.style(c,v,rt+J),(1-D)*(1-(D=_()/U||.5))<=0&&(z=0),rt/=D;C.style(c,v,(rt*=2)+J),I=I||[]}return I&&(rt=+rt||+U||0,S=I[1]?rt+(I[1]+1)*I[2]:+I[2],y&&(y.unit=J,y.start=rt,y.end=S)),S}var zn={};function Br(c,v){for(var I,y,S,D,z,_,U,J=[],rt=0,ct=c.length;rt<ct;rt++)(y=c[rt]).style&&(I=y.style.display,v?("none"===I&&(J[rt]=x.get(y,"display")||null,J[rt]||(y.style.display="")),""===y.style.display&&pe(y)&&(J[rt]=(U=z=D=void 0,z=(S=y).ownerDocument,(U=zn[_=S.nodeName])||(D=z.body.appendChild(z.createElement(_)),U=C.css(D,"display"),D.parentNode.removeChild(D),"none"===U&&(U="block"),zn[_]=U)))):"none"!==I&&(J[rt]="none",x.set(y,"display",I)));for(rt=0;rt<ct;rt++)null!=J[rt]&&(c[rt].style.display=J[rt]);return c}C.fn.extend({show:function(){return Br(this,!0)},hide:function(){return Br(this)},toggle:function(c){return"boolean"==typeof c?c?this.show():this.hide():this.each(function(){pe(this)?C(this).show():C(this).hide()})}});var Ie,He,ur=/^(?:checkbox|radio)$/i,An=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zr=/^$|^module$|\/(?:java|ecma)script/i;Ie=Ut.createDocumentFragment().appendChild(Ut.createElement("div")),(He=Ut.createElement("input")).setAttribute("type","radio"),He.setAttribute("checked","checked"),He.setAttribute("name","t"),Ie.appendChild(He),$t.checkClone=Ie.cloneNode(!0).cloneNode(!0).lastChild.checked,Ie.innerHTML="<textarea>x</textarea>",$t.noCloneChecked=!!Ie.cloneNode(!0).lastChild.defaultValue,Ie.innerHTML="<option></option>",$t.option=!!Ie.lastChild;var _r={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pr(c,v){var I;return I=void 0!==c.getElementsByTagName?c.getElementsByTagName(v||"*"):void 0!==c.querySelectorAll?c.querySelectorAll(v||"*"):[],void 0===v||v&&Rr(c,v)?C.merge([c],I):I}function ta(c,v){for(var I=0,y=c.length;I<y;I++)x.set(c[I],"globalEval",!v||x.get(v[I],"globalEval"))}_r.tbody=_r.tfoot=_r.colgroup=_r.caption=_r.thead,_r.th=_r.td,$t.option||(_r.optgroup=_r.option=[1,"<select multiple='multiple'>","</select>"]);var Lc=/<|&#?\w+;/;function rl(c,v,I,y,S){for(var D,z,_,U,J,rt,ct=v.createDocumentFragment(),q=[],nt=0,Ct=c.length;nt<Ct;nt++)if((D=c[nt])||0===D)if("object"===vr(D))C.merge(q,D.nodeType?[D]:D);else if(Lc.test(D)){for(z=z||ct.appendChild(v.createElement("div")),_=(An.exec(D)||["",""])[1].toLowerCase(),z.innerHTML=(U=_r[_]||_r._default)[1]+C.htmlPrefilter(D)+U[2],rt=U[0];rt--;)z=z.lastChild;C.merge(q,z.childNodes),(z=ct.firstChild).textContent=""}else q.push(v.createTextNode(D));for(ct.textContent="",nt=0;D=q[nt++];)if(y&&-1<C.inArray(D,y))S&&S.push(D);else if(J=Oe(D),z=pr(ct.appendChild(D),"script"),J&&ta(z),I)for(rt=0;D=z[rt++];)Zr.test(D.type||"")&&I.push(D);return ct}var zs=/^([^.]*)(?:\.(.+)|)/;function yn(){return!0}function Ii(){return!1}function So(c,v){return c===function(){try{return Ut.activeElement}catch(I){}}()==("focus"===v)}function Os(c,v,I,y,S,D){var z,_;if("object"==typeof v){for(_ in"string"!=typeof I&&(y=y||I,I=void 0),v)Os(c,_,I,y,v[_],D);return c}if(null==y&&null==S?(S=I,y=I=void 0):null==S&&("string"==typeof I?(S=y,y=void 0):(S=y,y=I,I=void 0)),!1===S)S=Ii;else if(!S)return c;return 1===D&&(z=S,(S=function(U){return C().off(U),z.apply(this,arguments)}).guid=z.guid||(z.guid=C.guid++)),c.each(function(){C.event.add(this,v,S,y,I)})}function Ka(c,v,I){I?(x.set(c,v,!1),C.event.add(c,v,{namespace:!1,handler:function(y){var S,D,z=x.get(this,v);if(1&y.isTrigger&&this[v]){if(z.length)(C.event.special[v]||{}).delegateType&&y.stopPropagation();else if(z=Se.call(arguments),x.set(this,v,z),S=I(this,v),this[v](),z!==(D=x.get(this,v))||S?x.set(this,v,!1):D={},z!==D)return y.stopImmediatePropagation(),y.preventDefault(),D&&D.value}else z.length&&(x.set(this,v,{value:C.event.trigger(C.extend(z[0],C.Event.prototype),z.slice(1),this)}),y.stopImmediatePropagation())}})):void 0===x.get(c,v)&&C.event.add(c,v,yn)}C.event={global:{},add:function(c,v,I,y,S){var D,z,_,U,J,rt,ct,q,nt,Ct,Nt,bt=x.get(c);if(Jn(c))for(I.handler&&(I=(D=I).handler,S=D.selector),S&&C.find.matchesSelector(ve,S),I.guid||(I.guid=C.guid++),(U=bt.events)||(U=bt.events=Object.create(null)),(z=bt.handle)||(z=bt.handle=function(Ge){return void 0!==C&&C.event.triggered!==Ge.type?C.event.dispatch.apply(c,arguments):void 0}),J=(v=(v||"").match(_e)||[""]).length;J--;)nt=Nt=(_=zs.exec(v[J])||[])[1],Ct=(_[2]||"").split(".").sort(),nt&&(ct=C.event.special[nt]||{},ct=C.event.special[nt=(S?ct.delegateType:ct.bindType)||nt]||{},rt=C.extend({type:nt,origType:Nt,data:y,handler:I,guid:I.guid,selector:S,needsContext:S&&C.expr.match.needsContext.test(S),namespace:Ct.join(".")},D),(q=U[nt])||((q=U[nt]=[]).delegateCount=0,ct.setup&&!1!==ct.setup.call(c,y,Ct,z)||c.addEventListener&&c.addEventListener(nt,z)),ct.add&&(ct.add.call(c,rt),rt.handler.guid||(rt.handler.guid=I.guid)),S?q.splice(q.delegateCount++,0,rt):q.push(rt),C.event.global[nt]=!0)},remove:function(c,v,I,y,S){var D,z,_,U,J,rt,ct,q,nt,Ct,Nt,bt=x.hasData(c)&&x.get(c);if(bt&&(U=bt.events)){for(J=(v=(v||"").match(_e)||[""]).length;J--;)if(nt=Nt=(_=zs.exec(v[J])||[])[1],Ct=(_[2]||"").split(".").sort(),nt){for(ct=C.event.special[nt]||{},q=U[nt=(y?ct.delegateType:ct.bindType)||nt]||[],_=_[2]&&new RegExp("(^|\\.)"+Ct.join("\\.(?:.*\\.|)")+"(\\.|$)"),z=D=q.length;D--;)rt=q[D],!S&&Nt!==rt.origType||I&&I.guid!==rt.guid||_&&!_.test(rt.namespace)||y&&y!==rt.selector&&("**"!==y||!rt.selector)||(q.splice(D,1),rt.selector&&q.delegateCount--,ct.remove&&ct.remove.call(c,rt));z&&!q.length&&(ct.teardown&&!1!==ct.teardown.call(c,Ct,bt.handle)||C.removeEvent(c,nt,bt.handle),delete U[nt])}else for(nt in U)C.event.remove(c,nt+v[J],I,y,!0);C.isEmptyObject(U)&&x.remove(c,"handle events")}},dispatch:function(c){var v,I,y,S,D,z,_=new Array(arguments.length),U=C.event.fix(c),J=(x.get(this,"events")||Object.create(null))[U.type]||[],rt=C.event.special[U.type]||{};for(_[0]=U,v=1;v<arguments.length;v++)_[v]=arguments[v];if(U.delegateTarget=this,!rt.preDispatch||!1!==rt.preDispatch.call(this,U)){for(z=C.event.handlers.call(this,U,J),v=0;(S=z[v++])&&!U.isPropagationStopped();)for(U.currentTarget=S.elem,I=0;(D=S.handlers[I++])&&!U.isImmediatePropagationStopped();)U.rnamespace&&!1!==D.namespace&&!U.rnamespace.test(D.namespace)||(U.handleObj=D,U.data=D.data,void 0!==(y=((C.event.special[D.origType]||{}).handle||D.handler).apply(S.elem,_))&&!1===(U.result=y)&&(U.preventDefault(),U.stopPropagation()));return rt.postDispatch&&rt.postDispatch.call(this,U),U.result}},handlers:function(c,v){var I,y,S,D,z,_=[],U=v.delegateCount,J=c.target;if(U&&J.nodeType&&!("click"===c.type&&1<=c.button))for(;J!==this;J=J.parentNode||this)if(1===J.nodeType&&("click"!==c.type||!0!==J.disabled)){for(D=[],z={},I=0;I<U;I++)void 0===z[S=(y=v[I]).selector+" "]&&(z[S]=y.needsContext?-1<C(S,this).index(J):C.find(S,this,null,[J]).length),z[S]&&D.push(y);D.length&&_.push({elem:J,handlers:D})}return J=this,U<v.length&&_.push({elem:J,handlers:v.slice(U)}),_},addProp:function(c,v){Object.defineProperty(C.Event.prototype,c,{enumerable:!0,configurable:!0,get:Dt(v)?function(){if(this.originalEvent)return v(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(I){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:I})}})},fix:function(c){return c[C.expando]?c:new C.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var v=this||c;return ur.test(v.type)&&v.click&&Rr(v,"input")&&Ka(v,"click",yn),!1},trigger:function(c){var v=this||c;return ur.test(v.type)&&v.click&&Rr(v,"input")&&Ka(v,"click"),!0},_default:function(c){var v=c.target;return ur.test(v.type)&&v.click&&Rr(v,"input")&&x.get(v,"click")||Rr(v,"a")}},beforeunload:{postDispatch:function(c){void 0!==c.result&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}},C.removeEvent=function(c,v,I){c.removeEventListener&&c.removeEventListener(v,I)},C.Event=function(c,v){if(!(this instanceof C.Event))return new C.Event(c,v);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?yn:Ii,this.target=c.target&&3===c.target.nodeType?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,v&&C.extend(this,v),this.timeStamp=c&&c.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ii,isPropagationStopped:Ii,isImmediatePropagationStopped:Ii,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=yn,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=yn,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=yn,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(c,v){C.event.special[c]={setup:function(){return Ka(this,c,So),!1},trigger:function(){return Ka(this,c),!0},_default:function(){return!0},delegateType:v}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,v){C.event.special[c]={delegateType:v,bindType:v,handle:function(I){var y,S=I.relatedTarget,D=I.handleObj;return S&&(S===this||C.contains(this,S))||(I.type=D.origType,y=D.handler.apply(this,arguments),I.type=v),y}}}),C.fn.extend({on:function(c,v,I,y){return Os(this,c,v,I,y)},one:function(c,v,I,y){return Os(this,c,v,I,y,1)},off:function(c,v,I){var y,S;if(c&&c.preventDefault&&c.handleObj)return y=c.handleObj,C(c.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if("object"==typeof c){for(S in c)this.off(S,v,c[S]);return this}return!1!==v&&"function"!=typeof v||(I=v,v=void 0),!1===I&&(I=Ii),this.each(function(){C.event.remove(this,c,I,v)})}});var Rs=/<script|<style|<link/i,To=/checked\s*(?:[^=]|=\s*.checked.)/i,Qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lo(c,v){return Rr(c,"table")&&Rr(11!==v.nodeType?v:v.firstChild,"tr")&&C(c).children("tbody")[0]||c}function nl(c){return c.type=(null!==c.getAttribute("type"))+"/"+c.type,c}function Gs(c){return"true/"===(c.type||"").slice(0,5)?c.type=c.type.slice(5):c.removeAttribute("type"),c}function js(c,v){var I,y,S,D,z,_;if(1===v.nodeType){if(x.hasData(c)&&(_=x.get(c).events))for(S in x.remove(v,"handle events"),_)for(I=0,y=_[S].length;I<y;I++)C.event.add(v,S,_[S][I]);O.hasData(c)&&(D=O.access(c),z=C.extend({},D),O.set(v,z))}}function On(c,v,I,y){v=Qi(v);var S,D,z,_,U,J,rt=0,ct=c.length,q=ct-1,nt=v[0],Ct=Dt(nt);if(Ct||1<ct&&"string"==typeof nt&&!$t.checkClone&&To.test(nt))return c.each(function(Nt){var bt=c.eq(Nt);Ct&&(v[0]=nt.call(this,Nt,bt.html())),On(bt,v,I,y)});if(ct&&(D=(S=rl(v,c[0].ownerDocument,!1,c,y)).firstChild,1===S.childNodes.length&&(S=D),D||y)){for(_=(z=C.map(pr(S,"script"),nl)).length;rt<ct;rt++)U=S,rt!==q&&(U=C.clone(U,!0,!0),_&&C.merge(z,pr(U,"script"))),I.call(c[rt],U,rt);if(_)for(J=z[z.length-1].ownerDocument,C.map(z,Gs),rt=0;rt<_;rt++)Zr.test((U=z[rt]).type||"")&&!x.access(U,"globalEval")&&C.contains(J,U)&&(U.src&&"module"!==(U.type||"").toLowerCase()?C._evalUrl&&!U.noModule&&C._evalUrl(U.src,{nonce:U.nonce||U.getAttribute("nonce")},J):Mr(U.textContent.replace(Qa,""),U,J))}return c}function il(c,v,I){for(var y,S=v?C.filter(v,c):c,D=0;null!=(y=S[D]);D++)I||1!==y.nodeType||C.cleanData(pr(y)),y.parentNode&&(I&&Oe(y)&&ta(pr(y,"script")),y.parentNode.removeChild(y));return c}C.extend({htmlPrefilter:function(c){return c},clone:function(c,v,I){var y,S,D,z,_,U,J,rt=c.cloneNode(!0),ct=Oe(c);if(!($t.noCloneChecked||1!==c.nodeType&&11!==c.nodeType||C.isXMLDoc(c)))for(z=pr(rt),y=0,S=(D=pr(c)).length;y<S;y++)_=D[y],"input"===(J=(U=z[y]).nodeName.toLowerCase())&&ur.test(_.type)?U.checked=_.checked:"input"!==J&&"textarea"!==J||(U.defaultValue=_.defaultValue);if(v)if(I)for(D=D||pr(c),z=z||pr(rt),y=0,S=D.length;y<S;y++)js(D[y],z[y]);else js(c,rt);return 0<(z=pr(rt,"script")).length&&ta(z,!ct&&pr(c,"script")),rt},cleanData:function(c){for(var v,I,y,S=C.event.special,D=0;void 0!==(I=c[D]);D++)if(Jn(I)){if(v=I[x.expando]){if(v.events)for(y in v.events)S[y]?C.event.remove(I,y):C.removeEvent(I,y,v.handle);I[x.expando]=void 0}I[O.expando]&&(I[O.expando]=void 0)}}}),C.fn.extend({detach:function(c){return il(this,c,!0)},remove:function(c){return il(this,c)},text:function(c){return We(this,function(v){return void 0===v?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=v)})},null,c,arguments.length)},append:function(){return On(this,arguments,function(c){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lo(this,c).appendChild(c)})},prepend:function(){return On(this,arguments,function(c){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var v=Lo(this,c);v.insertBefore(c,v.firstChild)}})},before:function(){return On(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return On(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,v=0;null!=(c=this[v]);v++)1===c.nodeType&&(C.cleanData(pr(c,!1)),c.textContent="");return this},clone:function(c,v){return c=null!=c&&c,v=null==v?c:v,this.map(function(){return C.clone(this,c,v)})},html:function(c){return We(this,function(v){var I=this[0]||{},y=0,S=this.length;if(void 0===v&&1===I.nodeType)return I.innerHTML;if("string"==typeof v&&!Rs.test(v)&&!_r[(An.exec(v)||["",""])[1].toLowerCase()]){v=C.htmlPrefilter(v);try{for(;y<S;y++)1===(I=this[y]||{}).nodeType&&(C.cleanData(pr(I,!1)),I.innerHTML=v);I=0}catch(D){}}I&&this.empty().append(v)},null,c,arguments.length)},replaceWith:function(){var c=[];return On(this,arguments,function(v){var I=this.parentNode;C.inArray(this,c)<0&&(C.cleanData(pr(this)),I&&I.replaceChild(v,this))},c)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,v){C.fn[c]=function(I){for(var y,S=[],D=C(I),z=D.length-1,_=0;_<=z;_++)y=_===z?this:this.clone(!0),C(D[_])[v](y),Te.apply(S,y.get());return this.pushStack(S)}});var Do=new RegExp("^("+lt+")(?!px)[a-z%]+$","i"),qa=function(c){var v=c.ownerDocument.defaultView;return v&&v.opener||(v=R),v.getComputedStyle(c)},Bs=function(c,v,I){var y,S,D={};for(S in v)D[S]=c.style[S],c.style[S]=v[S];for(S in y=I.call(c),v)c.style[S]=D[S];return y},$a=new RegExp(Ot.join("|"),"i");function pa(c,v,I){var y,S,D,z,_=c.style;return(I=I||qa(c))&&(""!==(z=I.getPropertyValue(v)||I[v])||Oe(c)||(z=C.style(c,v)),!$t.pixelBoxStyles()&&Do.test(z)&&$a.test(v)&&(y=_.width,S=_.minWidth,D=_.maxWidth,_.minWidth=_.maxWidth=_.width=z,z=I.width,_.width=y,_.minWidth=S,_.maxWidth=D)),void 0!==z?z+"":z}function Po(c,v){return{get:function(){if(!c())return(this.get=v).apply(this,arguments);delete this.get}}}!function(){function c(){if(J){U.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",J.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ve.appendChild(U).appendChild(J);var rt=R.getComputedStyle(J);I="1%"!==rt.top,_=12===v(rt.marginLeft),J.style.right="60%",D=36===v(rt.right),y=36===v(rt.width),J.style.position="absolute",S=12===v(J.offsetWidth/3),ve.removeChild(U),J=null}}function v(rt){return Math.round(parseFloat(rt))}var I,y,S,D,z,_,U=Ut.createElement("div"),J=Ut.createElement("div");J.style&&(J.style.backgroundClip="content-box",J.cloneNode(!0).style.backgroundClip="",$t.clearCloneStyle="content-box"===J.style.backgroundClip,C.extend($t,{boxSizingReliable:function(){return c(),y},pixelBoxStyles:function(){return c(),D},pixelPosition:function(){return c(),I},reliableMarginLeft:function(){return c(),_},scrollboxSize:function(){return c(),S},reliableTrDimensions:function(){var rt,ct,q,nt;return null==z&&(rt=Ut.createElement("table"),ct=Ut.createElement("tr"),q=Ut.createElement("div"),rt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ct.style.cssText="border:1px solid",ct.style.height="1px",q.style.height="9px",q.style.display="block",ve.appendChild(rt).appendChild(ct).appendChild(q),nt=R.getComputedStyle(ct),z=parseInt(nt.height,10)+parseInt(nt.borderTopWidth,10)+parseInt(nt.borderBottomWidth,10)===ct.offsetHeight,ve.removeChild(rt)),z}}))}();var ko=["Webkit","Moz","ms"],Zs=Ut.createElement("div").style,Eo={};function _s(c){return C.cssProps[c]||Eo[c]||(c in Zs?c:Eo[c]=function(I){for(var y=I[0].toUpperCase()+I.slice(1),S=ko.length;S--;)if((I=ko[S]+y)in Zs)return I}(c)||c)}var al=/^(none|table(?!-c[ea]).+)/,zo=/^--/,ma={position:"absolute",visibility:"hidden",display:"block"},Oo={letterSpacing:"0",fontWeight:"400"};function Ia(c,v,I){var y=vt.exec(v);return y?Math.max(0,y[2]-(I||0))+(y[3]||"px"):v}function Ws(c,v,I,y,S,D){var z="width"===v?1:0,_=0,U=0;if(I===(y?"border":"content"))return 0;for(;z<4;z+=2)"margin"===I&&(U+=C.css(c,I+Ot[z],!0,S)),y?("content"===I&&(U-=C.css(c,"padding"+Ot[z],!0,S)),"margin"!==I&&(U-=C.css(c,"border"+Ot[z]+"Width",!0,S))):(U+=C.css(c,"padding"+Ot[z],!0,S),"padding"!==I?U+=C.css(c,"border"+Ot[z]+"Width",!0,S):_+=C.css(c,"border"+Ot[z]+"Width",!0,S));return!y&&0<=D&&(U+=Math.max(0,Math.ceil(c["offset"+v[0].toUpperCase()+v.slice(1)]-D-U-_-.5))||0),U}function Aa(c,v,I){var y=qa(c),S=(!$t.boxSizingReliable()||I)&&"border-box"===C.css(c,"boxSizing",!1,y),D=S,z=pa(c,v,y),_="offset"+v[0].toUpperCase()+v.slice(1);if(Do.test(z)){if(!I)return z;z="auto"}return(!$t.boxSizingReliable()&&S||!$t.reliableTrDimensions()&&Rr(c,"tr")||"auto"===z||!parseFloat(z)&&"inline"===C.css(c,"display",!1,y))&&c.getClientRects().length&&(S="border-box"===C.css(c,"boxSizing",!1,y),(D=_ in c)&&(z=c[_])),(z=parseFloat(z)||0)+Ws(c,v,I||(S?"border":"content"),D,y,z)+"px"}function Rn(c,v,I,y,S){return new Rn.prototype.init(c,v,I,y,S)}C.extend({cssHooks:{opacity:{get:function(c,v){if(v){var I=pa(c,"opacity");return""===I?"1":I}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(c,v,I,y){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var S,D,z,_=Sr(v),U=zo.test(v),J=c.style;if(U||(v=_s(_)),z=C.cssHooks[v]||C.cssHooks[_],void 0===I)return z&&"get"in z&&void 0!==(S=z.get(c,!1,y))?S:J[v];"string"==(D=typeof I)&&(S=vt.exec(I))&&S[1]&&(I=tr(c,v,S),D="number"),null!=I&&I==I&&("number"!==D||U||(I+=S&&S[3]||(C.cssNumber[_]?"":"px")),$t.clearCloneStyle||""!==I||0!==v.indexOf("background")||(J[v]="inherit"),z&&"set"in z&&void 0===(I=z.set(c,I,y))||(U?J.setProperty(v,I):J[v]=I))}},css:function(c,v,I,y){var S,D,z,_=Sr(v);return zo.test(v)||(v=_s(_)),(z=C.cssHooks[v]||C.cssHooks[_])&&"get"in z&&(S=z.get(c,!0,I)),void 0===S&&(S=pa(c,v,y)),"normal"===S&&v in Oo&&(S=Oo[v]),""===I||I?(D=parseFloat(S),!0===I||isFinite(D)?D||0:S):S}}),C.each(["height","width"],function(c,v){C.cssHooks[v]={get:function(I,y,S){if(y)return!al.test(C.css(I,"display"))||I.getClientRects().length&&I.getBoundingClientRect().width?Aa(I,v,S):Bs(I,ma,function(){return Aa(I,v,S)})},set:function(I,y,S){var D,z=qa(I),_=!$t.scrollboxSize()&&"absolute"===z.position,U=(_||S)&&"border-box"===C.css(I,"boxSizing",!1,z),J=S?Ws(I,v,S,U,z):0;return U&&_&&(J-=Math.ceil(I["offset"+v[0].toUpperCase()+v.slice(1)]-parseFloat(z[v])-Ws(I,v,"border",!1,z)-.5)),J&&(D=vt.exec(y))&&"px"!==(D[3]||"px")&&(I.style[v]=y,y=C.css(I,v)),Ia(0,y,J)}}}),C.cssHooks.marginLeft=Po($t.reliableMarginLeft,function(c,v){if(v)return(parseFloat(pa(c,"marginLeft"))||c.getBoundingClientRect().left-Bs(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(c,v){C.cssHooks[c+v]={expand:function(I){for(var y=0,S={},D="string"==typeof I?I.split(" "):[I];y<4;y++)S[c+Ot[y]+v]=D[y]||D[y-2]||D[0];return S}},"margin"!==c&&(C.cssHooks[c+v].set=Ia)}),C.fn.extend({css:function(c,v){return We(this,function(I,y,S){var D,z,_={},U=0;if(Array.isArray(y)){for(D=qa(I),z=y.length;U<z;U++)_[y[U]]=C.css(I,y[U],!1,D);return _}return void 0!==S?C.style(I,y,S):C.css(I,y)},c,v,1<arguments.length)}}),((C.Tween=Rn).prototype={constructor:Rn,init:function(c,v,I,y,S,D){this.elem=c,this.prop=I,this.easing=S||C.easing._default,this.options=v,this.start=this.now=this.cur(),this.end=y,this.unit=D||(C.cssNumber[I]?"":"px")},cur:function(){var c=Rn.propHooks[this.prop];return c&&c.get?c.get(this):Rn.propHooks._default.get(this)},run:function(c){var v,I=Rn.propHooks[this.prop];return this.pos=v=this.options.duration?C.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):c,this.now=(this.end-this.start)*v+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),I&&I.set?I.set(this):Rn.propHooks._default.set(this),this}}).init.prototype=Rn.prototype,(Rn.propHooks={_default:{get:function(c){var v;return 1!==c.elem.nodeType||null!=c.elem[c.prop]&&null==c.elem.style[c.prop]?c.elem[c.prop]:(v=C.css(c.elem,c.prop,""))&&"auto"!==v?v:0},set:function(c){C.fx.step[c.prop]?C.fx.step[c.prop](c):1!==c.elem.nodeType||!C.cssHooks[c.prop]&&null==c.elem.style[_s(c.prop)]?c.elem[c.prop]=c.now:C.style(c.elem,c.prop,c.now+c.unit)}}}).scrollTop=Rn.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},C.easing={linear:function(c){return c},swing:function(c){return.5-Math.cos(c*Math.PI)/2},_default:"swing"},C.fx=Rn.prototype.init,C.fx.step={};var ea,Cn,Ai,Ys,ya=/^(?:toggle|show|hide)$/,Ca=/queueHooks$/;function Fs(){Cn&&(!1===Ut.hidden&&R.requestAnimationFrame?R.requestAnimationFrame(Fs):R.setTimeout(Fs,C.fx.interval),C.fx.tick())}function sn(){return R.setTimeout(function(){ea=void 0}),ea=Date.now()}function ts(c,v){var I,y=0,S={height:c};for(v=v?1:0;y<4;y+=2-v)S["margin"+(I=Ot[y])]=S["padding"+I]=c;return v&&(S.opacity=S.width=c),S}function Us(c,v,I){for(var y,S=(wn.tweeners[v]||[]).concat(wn.tweeners["*"]),D=0,z=S.length;D<z;D++)if(y=S[D].call(I,v,c))return y}function wn(c,v,I){var y,S,D=0,z=wn.prefilters.length,_=C.Deferred().always(function(){delete U.elem}),U=function(){if(S)return!1;for(var ct=ea||sn(),q=Math.max(0,J.startTime+J.duration-ct),nt=1-(q/J.duration||0),Ct=0,Nt=J.tweens.length;Ct<Nt;Ct++)J.tweens[Ct].run(nt);return _.notifyWith(c,[J,nt,q]),nt<1&&Nt?q:(Nt||_.notifyWith(c,[J,1,0]),_.resolveWith(c,[J]),!1)},J=_.promise({elem:c,props:C.extend({},v),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},I),originalProperties:v,originalOptions:I,startTime:ea||sn(),duration:I.duration,tweens:[],createTween:function(ct,q){var nt=C.Tween(c,J.opts,ct,q,J.opts.specialEasing[ct]||J.opts.easing);return J.tweens.push(nt),nt},stop:function(ct){var q=0,nt=ct?J.tweens.length:0;if(S)return this;for(S=!0;q<nt;q++)J.tweens[q].run(1);return ct?(_.notifyWith(c,[J,1,0]),_.resolveWith(c,[J,ct])):_.rejectWith(c,[J,ct]),this}}),rt=J.props;for(function(ct,q){var nt,Ct,Nt,bt,Ge;for(nt in ct)if(Nt=q[Ct=Sr(nt)],bt=ct[nt],Array.isArray(bt)&&(Nt=bt[1],bt=ct[nt]=bt[0]),nt!==Ct&&(ct[Ct]=bt,delete ct[nt]),(Ge=C.cssHooks[Ct])&&"expand"in Ge)for(nt in bt=Ge.expand(bt),delete ct[Ct],bt)nt in ct||(ct[nt]=bt[nt],q[nt]=Nt);else q[Ct]=Nt}(rt,J.opts.specialEasing);D<z;D++)if(y=wn.prefilters[D].call(J,c,rt,J.opts))return Dt(y.stop)&&(C._queueHooks(J.elem,J.opts.queue).stop=y.stop.bind(y)),y;return C.map(rt,Us,J),Dt(J.opts.start)&&J.opts.start.call(c,J),J.progress(J.opts.progress).done(J.opts.done,J.opts.complete).fail(J.opts.fail).always(J.opts.always),C.fx.timer(C.extend(U,{elem:c,anim:J,queue:J.opts.queue})),J}C.Animation=C.extend(wn,{tweeners:{"*":[function(c,v){var I=this.createTween(c,v);return tr(I.elem,c,vt.exec(v),I),I}]},tweener:function(c,v){Dt(c)?(v=c,c=["*"]):c=c.match(_e);for(var I,y=0,S=c.length;y<S;y++)(wn.tweeners[I=c[y]]=wn.tweeners[I]||[]).unshift(v)},prefilters:[function(c,v,I){var y,S,D,z,_,U,J,rt,ct="width"in v||"height"in v,q=this,nt={},Ct=c.style,Nt=c.nodeType&&pe(c),bt=x.get(c,"fxshow");for(y in I.queue||(null==(z=C._queueHooks(c,"fx")).unqueued&&(z.unqueued=0,_=z.empty.fire,z.empty.fire=function(){z.unqueued||_()}),z.unqueued++,q.always(function(){q.always(function(){z.unqueued--,C.queue(c,"fx").length||z.empty.fire()})})),v)if(ya.test(S=v[y])){if(delete v[y],D=D||"toggle"===S,S===(Nt?"hide":"show")){if("show"!==S||!bt||void 0===bt[y])continue;Nt=!0}nt[y]=bt&&bt[y]||C.style(c,y)}if((U=!C.isEmptyObject(v))||!C.isEmptyObject(nt))for(y in ct&&1===c.nodeType&&(I.overflow=[Ct.overflow,Ct.overflowX,Ct.overflowY],null==(J=bt&&bt.display)&&(J=x.get(c,"display")),"none"===(rt=C.css(c,"display"))&&(J?rt=J:(Br([c],!0),J=c.style.display||J,rt=C.css(c,"display"),Br([c]))),("inline"===rt||"inline-block"===rt&&null!=J)&&"none"===C.css(c,"float")&&(U||(q.done(function(){Ct.display=J}),null==J&&(J="none"===(rt=Ct.display)?"":rt)),Ct.display="inline-block")),I.overflow&&(Ct.overflow="hidden",q.always(function(){Ct.overflow=I.overflow[0],Ct.overflowX=I.overflow[1],Ct.overflowY=I.overflow[2]})),U=!1,nt)U||(bt?"hidden"in bt&&(Nt=bt.hidden):bt=x.access(c,"fxshow",{display:J}),D&&(bt.hidden=!Nt),Nt&&Br([c],!0),q.done(function(){for(y in Nt||Br([c]),x.remove(c,"fxshow"),nt)C.style(c,y,nt[y])})),U=Us(Nt?bt[y]:0,y,q),y in bt||(bt[y]=U.start,Nt&&(U.end=U.start,U.start=0))}],prefilter:function(c,v){v?wn.prefilters.unshift(c):wn.prefilters.push(c)}}),C.speed=function(c,v,I){var y=c&&"object"==typeof c?C.extend({},c):{complete:I||!I&&v||Dt(c)&&c,duration:c,easing:I&&v||v&&!Dt(v)&&v};return C.fx.off?y.duration=0:"number"!=typeof y.duration&&(y.duration=y.duration in C.fx.speeds?C.fx.speeds[y.duration]:C.fx.speeds._default),null!=y.queue&&!0!==y.queue||(y.queue="fx"),y.old=y.complete,y.complete=function(){Dt(y.old)&&y.old.call(this),y.queue&&C.dequeue(this,y.queue)},y},C.fn.extend({fadeTo:function(c,v,I,y){return this.filter(pe).css("opacity",0).show().end().animate({opacity:v},c,I,y)},animate:function(c,v,I,y){var S=C.isEmptyObject(c),D=C.speed(v,I,y),z=function(){var _=wn(this,C.extend({},c),D);(S||x.get(this,"finish"))&&_.stop(!0)};return z.finish=z,S||!1===D.queue?this.each(z):this.queue(D.queue,z)},stop:function(c,v,I){var y=function(S){var D=S.stop;delete S.stop,D(I)};return"string"!=typeof c&&(I=v,v=c,c=void 0),v&&this.queue(c||"fx",[]),this.each(function(){var S=!0,D=null!=c&&c+"queueHooks",z=C.timers,_=x.get(this);if(D)_[D]&&_[D].stop&&y(_[D]);else for(D in _)_[D]&&_[D].stop&&Ca.test(D)&&y(_[D]);for(D=z.length;D--;)z[D].elem!==this||null!=c&&z[D].queue!==c||(z[D].anim.stop(I),S=!1,z.splice(D,1));!S&&I||C.dequeue(this,c)})},finish:function(c){return!1!==c&&(c=c||"fx"),this.each(function(){var v,I=x.get(this),y=I[c+"queue"],S=I[c+"queueHooks"],D=C.timers,z=y?y.length:0;for(I.finish=!0,C.queue(this,c,[]),S&&S.stop&&S.stop.call(this,!0),v=D.length;v--;)D[v].elem===this&&D[v].queue===c&&(D[v].anim.stop(!0),D.splice(v,1));for(v=0;v<z;v++)y[v]&&y[v].finish&&y[v].finish.call(this);delete I.finish})}}),C.each(["toggle","show","hide"],function(c,v){var I=C.fn[v];C.fn[v]=function(y,S,D){return null==y||"boolean"==typeof y?I.apply(this,arguments):this.animate(ts(v,!0),y,S,D)}}),C.each({slideDown:ts("show"),slideUp:ts("hide"),slideToggle:ts("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,v){C.fn[c]=function(I,y,S){return this.animate(v,I,y,S)}}),C.timers=[],C.fx.tick=function(){var c,v=0,I=C.timers;for(ea=Date.now();v<I.length;v++)(c=I[v])()||I[v]!==c||I.splice(v--,1);I.length||C.fx.stop(),ea=void 0},C.fx.timer=function(c){C.timers.push(c),C.fx.start()},C.fx.interval=13,C.fx.start=function(){Cn||(Cn=!0,Fs())},C.fx.stop=function(){Cn=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(c,v){return c=C.fx&&C.fx.speeds[c]||c,this.queue(v=v||"fx",function(I,y){var S=R.setTimeout(I,c);y.stop=function(){R.clearTimeout(S)}})},Ai=Ut.createElement("input"),Ys=Ut.createElement("select").appendChild(Ut.createElement("option")),Ai.type="checkbox",$t.checkOn=""!==Ai.value,$t.optSelected=Ys.selected,(Ai=Ut.createElement("input")).value="t",Ai.type="radio",$t.radioValue="t"===Ai.value;var es,yi=C.expr.attrHandle;C.fn.extend({attr:function(c,v){return We(this,C.attr,c,v,1<arguments.length)},removeAttr:function(c){return this.each(function(){C.removeAttr(this,c)})}}),C.extend({attr:function(c,v,I){var y,S,D=c.nodeType;if(3!==D&&8!==D&&2!==D)return void 0===c.getAttribute?C.prop(c,v,I):(1===D&&C.isXMLDoc(c)||(S=C.attrHooks[v.toLowerCase()]||(C.expr.match.bool.test(v)?es:void 0)),void 0!==I?null===I?void C.removeAttr(c,v):S&&"set"in S&&void 0!==(y=S.set(c,I,v))?y:(c.setAttribute(v,I+""),I):S&&"get"in S&&null!==(y=S.get(c,v))?y:null==(y=C.find.attr(c,v))?void 0:y)},attrHooks:{type:{set:function(c,v){if(!$t.radioValue&&"radio"===v&&Rr(c,"input")){var I=c.value;return c.setAttribute("type",v),I&&(c.value=I),v}}}},removeAttr:function(c,v){var I,y=0,S=v&&v.match(_e);if(S&&1===c.nodeType)for(;I=S[y++];)c.removeAttribute(I)}}),es={set:function(c,v,I){return!1===v?C.removeAttr(c,I):c.setAttribute(I,I),I}},C.each(C.expr.match.bool.source.match(/\w+/g),function(c,v){var I=yi[v]||C.find.attr;yi[v]=function(y,S,D){var z,_,U=S.toLowerCase();return D||(_=yi[U],yi[U]=z,z=null!=I(y,S,D)?U:null,yi[U]=_),z}});var Vs=/^(?:input|select|textarea|button)$/i,rs=/^(?:a|area)$/i;function Gn(c){return(c.match(_e)||[]).join(" ")}function Kn(c){return c.getAttribute&&c.getAttribute("class")||""}function ns(c){return Array.isArray(c)?c:"string"==typeof c&&c.match(_e)||[]}C.fn.extend({prop:function(c,v){return We(this,C.prop,c,v,1<arguments.length)},removeProp:function(c){return this.each(function(){delete this[C.propFix[c]||c]})}}),C.extend({prop:function(c,v,I){var y,S,D=c.nodeType;if(3!==D&&8!==D&&2!==D)return 1===D&&C.isXMLDoc(c)||(S=C.propHooks[v=C.propFix[v]||v]),void 0!==I?S&&"set"in S&&void 0!==(y=S.set(c,I,v))?y:c[v]=I:S&&"get"in S&&null!==(y=S.get(c,v))?y:c[v]},propHooks:{tabIndex:{get:function(c){var v=C.find.attr(c,"tabindex");return v?parseInt(v,10):Vs.test(c.nodeName)||rs.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),$t.optSelected||(C.propHooks.selected={get:function(c){return null},set:function(c){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(c){var v,I,y,S,D,z,_,U=0;if(Dt(c))return this.each(function(J){C(this).addClass(c.call(this,J,Kn(this)))});if((v=ns(c)).length)for(;I=this[U++];)if(S=Kn(I),y=1===I.nodeType&&" "+Gn(S)+" "){for(z=0;D=v[z++];)y.indexOf(" "+D+" ")<0&&(y+=D+" ");S!==(_=Gn(y))&&I.setAttribute("class",_)}return this},removeClass:function(c){var v,I,y,S,D,z,_,U=0;if(Dt(c))return this.each(function(J){C(this).removeClass(c.call(this,J,Kn(this)))});if(!arguments.length)return this.attr("class","");if((v=ns(c)).length)for(;I=this[U++];)if(S=Kn(I),y=1===I.nodeType&&" "+Gn(S)+" "){for(z=0;D=v[z++];)for(;-1<y.indexOf(" "+D+" ");)y=y.replace(" "+D+" "," ");S!==(_=Gn(y))&&I.setAttribute("class",_)}return this},toggleClass:function(c,v){var I=typeof c,y="string"===I||Array.isArray(c);return"boolean"==typeof v&&y?v?this.addClass(c):this.removeClass(c):Dt(c)?this.each(function(S){C(this).toggleClass(c.call(this,S,Kn(this),v),v)}):this.each(function(){var S,D,z,_;if(y)for(D=0,z=C(this),_=ns(c);S=_[D++];)z.hasClass(S)?z.removeClass(S):z.addClass(S);else void 0!==c&&"boolean"!==I||((S=Kn(this))&&x.set(this,"__className__",S),this.setAttribute&&this.setAttribute("class",S||!1===c?"":x.get(this,"__className__")||""))})},hasClass:function(c){var v,I,y=0;for(v=" "+c+" ";I=this[y++];)if(1===I.nodeType&&-1<(" "+Gn(Kn(I))+" ").indexOf(v))return!0;return!1}});var Ro=/\r/g;C.fn.extend({val:function(c){var v,I,y,S=this[0];return arguments.length?(y=Dt(c),this.each(function(D){var z;1===this.nodeType&&(null==(z=y?c.call(this,D,C(this).val()):c)?z="":"number"==typeof z?z+="":Array.isArray(z)&&(z=C.map(z,function(_){return null==_?"":_+""})),(v=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in v&&void 0!==v.set(this,z,"value")||(this.value=z))})):S?(v=C.valHooks[S.type]||C.valHooks[S.nodeName.toLowerCase()])&&"get"in v&&void 0!==(I=v.get(S,"value"))?I:"string"==typeof(I=S.value)?I.replace(Ro,""):null==I?"":I:void 0}}),C.extend({valHooks:{option:{get:function(c){var v=C.find.attr(c,"value");return null!=v?v:Gn(C.text(c))}},select:{get:function(c){var v,I,y,S=c.options,D=c.selectedIndex,z="select-one"===c.type,_=z?null:[],U=z?D+1:S.length;for(y=D<0?U:z?D:0;y<U;y++)if(((I=S[y]).selected||y===D)&&!I.disabled&&(!I.parentNode.disabled||!Rr(I.parentNode,"optgroup"))){if(v=C(I).val(),z)return v;_.push(v)}return _},set:function(c,v){for(var I,y,S=c.options,D=C.makeArray(v),z=S.length;z--;)((y=S[z]).selected=-1<C.inArray(C.valHooks.option.get(y),D))&&(I=!0);return I||(c.selectedIndex=-1),D}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(c,v){if(Array.isArray(v))return c.checked=-1<C.inArray(C(c).val(),v)}},$t.checkOn||(C.valHooks[this].get=function(c){return null===c.getAttribute("value")?"on":c.value})}),$t.focusin="onfocusin"in R;var Xs=/^(?:focusinfocus|focusoutblur)$/,ra=function(c){c.stopPropagation()};C.extend(C.event,{trigger:function(c,v,I,y){var S,D,z,_,U,J,rt,ct,q=[I||Ut],nt=Ze.call(c,"type")?c.type:c,Ct=Ze.call(c,"namespace")?c.namespace.split("."):[];if(D=ct=z=I=I||Ut,3!==I.nodeType&&8!==I.nodeType&&!Xs.test(nt+C.event.triggered)&&(-1<nt.indexOf(".")&&(nt=(Ct=nt.split(".")).shift(),Ct.sort()),U=nt.indexOf(":")<0&&"on"+nt,(c=c[C.expando]?c:new C.Event(nt,"object"==typeof c&&c)).isTrigger=y?2:3,c.namespace=Ct.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+Ct.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=I),v=null==v?[c]:C.makeArray(v,[c]),rt=C.event.special[nt]||{},y||!rt.trigger||!1!==rt.trigger.apply(I,v))){if(!y&&!rt.noBubble&&!Er(I)){for(Xs.test((_=rt.delegateType||nt)+nt)||(D=D.parentNode);D;D=D.parentNode)q.push(D),z=D;z===(I.ownerDocument||Ut)&&q.push(z.defaultView||z.parentWindow||R)}for(S=0;(D=q[S++])&&!c.isPropagationStopped();)ct=D,c.type=1<S?_:rt.bindType||nt,(J=(x.get(D,"events")||Object.create(null))[c.type]&&x.get(D,"handle"))&&J.apply(D,v),(J=U&&D[U])&&J.apply&&Jn(D)&&(c.result=J.apply(D,v),!1===c.result&&c.preventDefault());return c.type=nt,y||c.isDefaultPrevented()||rt._default&&!1!==rt._default.apply(q.pop(),v)||!Jn(I)||U&&Dt(I[nt])&&!Er(I)&&((z=I[U])&&(I[U]=null),C.event.triggered=nt,c.isPropagationStopped()&&ct.addEventListener(nt,ra),I[nt](),c.isPropagationStopped()&&ct.removeEventListener(nt,ra),C.event.triggered=void 0,z&&(I[U]=z)),c.result}},simulate:function(c,v,I){var y=C.extend(new C.Event,I,{type:c,isSimulated:!0});C.event.trigger(y,null,v)}}),C.fn.extend({trigger:function(c,v){return this.each(function(){C.event.trigger(c,v,this)})},triggerHandler:function(c,v){var I=this[0];if(I)return C.event.trigger(c,v,I,!0)}}),$t.focusin||C.each({focus:"focusin",blur:"focusout"},function(c,v){var I=function(y){C.event.simulate(v,y.target,C.event.fix(y))};C.event.special[v]={setup:function(){var y=this.ownerDocument||this.document||this,S=x.access(y,v);S||y.addEventListener(c,I,!0),x.access(y,v,(S||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,S=x.access(y,v)-1;S?x.access(y,v,S):(y.removeEventListener(c,I,!0),x.remove(y,v))}}});var Ci=R.location,is={guid:Date.now()},ji=/\?/;C.parseXML=function(c){var v,I;if(!c||"string"!=typeof c)return null;try{v=(new R.DOMParser).parseFromString(c,"text/xml")}catch(y){}return I=v&&v.getElementsByTagName("parsererror")[0],v&&!I||C.error("Invalid XML: "+(I?C.map(I.childNodes,function(y){return y.textContent}).join("\n"):c)),v};var wa=/\[\]$/,ai=/\r?\n/g,Go=/^(?:submit|button|image|reset|file)$/i,as=/^(?:input|select|textarea|keygen)/i;function ss(c,v,I,y){var S;if(Array.isArray(v))C.each(v,function(D,z){I||wa.test(c)?y(c,z):ss(c+"["+("object"==typeof z&&null!=z?D:"")+"]",z,I,y)});else if(I||"object"!==vr(v))y(c,v);else for(S in v)ss(c+"["+S+"]",v[S],I,y)}C.param=function(c,v){var I,y=[],S=function(D,z){var _=Dt(z)?z():z;y[y.length]=encodeURIComponent(D)+"="+encodeURIComponent(null==_?"":_)};if(null==c)return"";if(Array.isArray(c)||c.jquery&&!C.isPlainObject(c))C.each(c,function(){S(this.name,this.value)});else for(I in c)ss(I,c[I],v,S);return y.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=C.prop(this,"elements");return c?C.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!C(this).is(":disabled")&&as.test(this.nodeName)&&!Go.test(c)&&(this.checked||!ur.test(c))}).map(function(c,v){var I=C(this).val();return null==I?null:Array.isArray(I)?C.map(I,function(y){return{name:v.name,value:y.replace(ai,"\r\n")}}):{name:v.name,value:I.replace(ai,"\r\n")}}).get()}});var os=/%20/g,jo=/#.*$/,Bo=/([?&])_=[^&]*/,sl=/^(.*?):[ \t]*([^\r\n]*)$/gm,ol=/^(?:GET|HEAD)$/,Hs=/^\/\//,Zo={},wi={},_o="*/".concat("*"),Wo=Ut.createElement("a");function us(c){return function(v,I){"string"!=typeof v&&(I=v,v="*");var y,S=0,D=v.toLowerCase().match(_e)||[];if(Dt(I))for(;y=D[S++];)"+"===y[0]?(y=y.slice(1)||"*",(c[y]=c[y]||[]).unshift(I)):(c[y]=c[y]||[]).push(I)}}function Js(c,v,I,y){var S={},D=c===wi;function z(_){var U;return S[_]=!0,C.each(c[_]||[],function(J,rt){var ct=rt(v,I,y);return"string"!=typeof ct||D||S[ct]?D?!(U=ct):void 0:(v.dataTypes.unshift(ct),z(ct),!1)}),U}return z(v.dataTypes[0])||!S["*"]&&z("*")}function ba(c,v){var I,y,S=C.ajaxSettings.flatOptions||{};for(I in v)void 0!==v[I]&&((S[I]?c:y||(y={}))[I]=v[I]);return y&&C.extend(!0,c,y),c}Wo.href=Ci.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ci.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ci.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_o,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,v){return v?ba(ba(c,C.ajaxSettings),v):ba(C.ajaxSettings,c)},ajaxPrefilter:us(Zo),ajaxTransport:us(wi),ajax:function(c,v){"object"==typeof c&&(v=c,c=void 0);var I,y,S,D,z,_,U,J,rt,ct,q=C.ajaxSetup({},v=v||{}),nt=q.context||q,Ct=q.context&&(nt.nodeType||nt.jquery)?C(nt):C.event,Nt=C.Deferred(),bt=C.Callbacks("once memory"),Ge=q.statusCode||{},Ye={},we={},Ae="canceled",Lt={readyState:0,getResponseHeader:function(re){var he;if(U){if(!D)for(D={};he=sl.exec(S);)D[he[1].toLowerCase()+" "]=(D[he[1].toLowerCase()+" "]||[]).concat(he[2]);he=D[re.toLowerCase()+" "]}return null==he?null:he.join(", ")},getAllResponseHeaders:function(){return U?S:null},setRequestHeader:function(re,he){return null==U&&(re=we[re.toLowerCase()]=we[re.toLowerCase()]||re,Ye[re]=he),this},overrideMimeType:function(re){return null==U&&(q.mimeType=re),this},statusCode:function(re){var he;if(re)if(U)Lt.always(re[Lt.status]);else for(he in re)Ge[he]=[Ge[he],re[he]];return this},abort:function(re){var he=re||Ae;return I&&I.abort(he),er(0,he),this}};if(Nt.promise(Lt),q.url=((c||q.url||Ci.href)+"").replace(Hs,Ci.protocol+"//"),q.type=v.method||v.type||q.method||q.type,q.dataTypes=(q.dataType||"*").toLowerCase().match(_e)||[""],null==q.crossDomain){_=Ut.createElement("a");try{_.href=q.url,_.href=_.href,q.crossDomain=Wo.protocol+"//"+Wo.host!=_.protocol+"//"+_.host}catch(re){q.crossDomain=!0}}if(q.data&&q.processData&&"string"!=typeof q.data&&(q.data=C.param(q.data,q.traditional)),Js(Zo,q,v,Lt),U)return Lt;for(rt in(J=C.event&&q.global)&&0==C.active++&&C.event.trigger("ajaxStart"),q.type=q.type.toUpperCase(),q.hasContent=!ol.test(q.type),y=q.url.replace(jo,""),q.hasContent?q.data&&q.processData&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&(q.data=q.data.replace(os,"+")):(ct=q.url.slice(y.length),q.data&&(q.processData||"string"==typeof q.data)&&(y+=(ji.test(y)?"&":"?")+q.data,delete q.data),!1===q.cache&&(y=y.replace(Bo,"$1"),ct=(ji.test(y)?"&":"?")+"_="+is.guid+++ct),q.url=y+ct),q.ifModified&&(C.lastModified[y]&&Lt.setRequestHeader("If-Modified-Since",C.lastModified[y]),C.etag[y]&&Lt.setRequestHeader("If-None-Match",C.etag[y])),(q.data&&q.hasContent&&!1!==q.contentType||v.contentType)&&Lt.setRequestHeader("Content-Type",q.contentType),Lt.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+_o+"; q=0.01":""):q.accepts["*"]),q.headers)Lt.setRequestHeader(rt,q.headers[rt]);if(q.beforeSend&&(!1===q.beforeSend.call(nt,Lt,q)||U))return Lt.abort();if(Ae="abort",bt.add(q.complete),Lt.done(q.success),Lt.fail(q.error),I=Js(wi,q,v,Lt)){if(Lt.readyState=1,J&&Ct.trigger("ajaxSend",[Lt,q]),U)return Lt;q.async&&0<q.timeout&&(z=R.setTimeout(function(){Lt.abort("timeout")},q.timeout));try{U=!1,I.send(Ye,er)}catch(re){if(U)throw re;er(-1,re)}}else er(-1,"No Transport");function er(re,he,oi,Qn){var ae,on,bi,Wr,ui,Tr=he;U||(U=!0,z&&R.clearTimeout(z),I=void 0,S=Qn||"",Lt.readyState=0<re?4:0,ae=200<=re&&re<300||304===re,oi&&(Wr=function(Fe,un,Qr){for(var ln,Rt,fe,Ue,lr=Fe.contents,Ve=Fe.dataTypes;"*"===Ve[0];)Ve.shift(),void 0===ln&&(ln=Fe.mimeType||un.getResponseHeader("Content-Type"));if(ln)for(Rt in lr)if(lr[Rt]&&lr[Rt].test(ln)){Ve.unshift(Rt);break}if(Ve[0]in Qr)fe=Ve[0];else{for(Rt in Qr){if(!Ve[0]||Fe.converters[Rt+" "+Ve[0]]){fe=Rt;break}Ue||(Ue=Rt)}fe=fe||Ue}if(fe)return fe!==Ve[0]&&Ve.unshift(fe),Qr[fe]}(q,Lt,oi)),!ae&&-1<C.inArray("script",q.dataTypes)&&C.inArray("json",q.dataTypes)<0&&(q.converters["text script"]=function(){}),Wr=function(Fe,un,Qr,ln){var Rt,fe,Ue,lr,Ve,cr={},xi=Fe.dataTypes.slice();if(xi[1])for(Ue in Fe.converters)cr[Ue.toLowerCase()]=Fe.converters[Ue];for(fe=xi.shift();fe;)if(Fe.responseFields[fe]&&(Qr[Fe.responseFields[fe]]=un),!Ve&&ln&&Fe.dataFilter&&(un=Fe.dataFilter(un,Fe.dataType)),Ve=fe,fe=xi.shift())if("*"===fe)fe=Ve;else if("*"!==Ve&&Ve!==fe){if(!(Ue=cr[Ve+" "+fe]||cr["* "+fe]))for(Rt in cr)if((lr=Rt.split(" "))[1]===fe&&(Ue=cr[Ve+" "+lr[0]]||cr["* "+lr[0]])){!0===Ue?Ue=cr[Rt]:!0!==cr[Rt]&&(fe=lr[0],xi.unshift(lr[1]));break}if(!0!==Ue)if(Ue&&Fe.throws)un=Ue(un);else try{un=Ue(un)}catch(xa){return{state:"parsererror",error:Ue?xa:"No conversion from "+Ve+" to "+fe}}}return{state:"success",data:un}}(q,Wr,Lt,ae),ae?(q.ifModified&&((ui=Lt.getResponseHeader("Last-Modified"))&&(C.lastModified[y]=ui),(ui=Lt.getResponseHeader("etag"))&&(C.etag[y]=ui)),204===re||"HEAD"===q.type?Tr="nocontent":304===re?Tr="notmodified":(Tr=Wr.state,on=Wr.data,ae=!(bi=Wr.error))):(bi=Tr,!re&&Tr||(Tr="error",re<0&&(re=0))),Lt.status=re,Lt.statusText=(he||Tr)+"",ae?Nt.resolveWith(nt,[on,Tr,Lt]):Nt.rejectWith(nt,[Lt,Tr,bi]),Lt.statusCode(Ge),Ge=void 0,J&&Ct.trigger(ae?"ajaxSuccess":"ajaxError",[Lt,q,ae?on:bi]),bt.fireWith(nt,[Lt,Tr]),J&&(Ct.trigger("ajaxComplete",[Lt,q]),--C.active||C.event.trigger("ajaxStop")))}return Lt},getJSON:function(c,v,I){return C.get(c,v,I,"json")},getScript:function(c,v){return C.get(c,void 0,v,"script")}}),C.each(["get","post"],function(c,v){C[v]=function(I,y,S,D){return Dt(y)&&(D=D||S,S=y,y=void 0),C.ajax(C.extend({url:I,type:v,dataType:D,data:y,success:S},C.isPlainObject(I)&&I))}}),C.ajaxPrefilter(function(c){var v;for(v in c.headers)"content-type"===v.toLowerCase()&&(c.contentType=c.headers[v]||"")}),C._evalUrl=function(c,v,I){return C.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){C.globalEval(y,v,I)}})},C.fn.extend({wrapAll:function(c){var v;return this[0]&&(Dt(c)&&(c=c.call(this[0])),v=C(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&v.insertBefore(this[0]),v.map(function(){for(var I=this;I.firstElementChild;)I=I.firstElementChild;return I}).append(this)),this},wrapInner:function(c){return Dt(c)?this.each(function(v){C(this).wrapInner(c.call(this,v))}):this.each(function(){var v=C(this),I=v.contents();I.length?I.wrapAll(c):v.append(c)})},wrap:function(c){var v=Dt(c);return this.each(function(I){C(this).wrapAll(v?c.call(this,I):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(c){return!C.expr.pseudos.visible(c)},C.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new R.XMLHttpRequest}catch(c){}};var ul={0:200,1223:204},na=C.ajaxSettings.xhr();$t.cors=!!na&&"withCredentials"in na,$t.ajax=na=!!na,C.ajaxTransport(function(c){var v,I;if($t.cors||na&&!c.crossDomain)return{send:function(y,S){var D,z=c.xhr();if(z.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(D in c.xhrFields)z[D]=c.xhrFields[D];for(D in c.mimeType&&z.overrideMimeType&&z.overrideMimeType(c.mimeType),c.crossDomain||y["X-Requested-With"]||(y["X-Requested-With"]="XMLHttpRequest"),y)z.setRequestHeader(D,y[D]);v=function(_){return function(){v&&(v=I=z.onload=z.onerror=z.onabort=z.ontimeout=z.onreadystatechange=null,"abort"===_?z.abort():"error"===_?"number"!=typeof z.status?S(0,"error"):S(z.status,z.statusText):S(ul[z.status]||z.status,z.statusText,"text"!==(z.responseType||"text")||"string"!=typeof z.responseText?{binary:z.response}:{text:z.responseText},z.getAllResponseHeaders()))}},z.onload=v(),I=z.onerror=z.ontimeout=v("error"),void 0!==z.onabort?z.onabort=I:z.onreadystatechange=function(){4===z.readyState&&R.setTimeout(function(){v&&I()})},v=v("abort");try{z.send(c.hasContent&&c.data||null)}catch(_){if(v)throw _}},abort:function(){v&&v()}}}),C.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return C.globalEval(c),c}}}),C.ajaxPrefilter("script",function(c){void 0===c.cache&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),C.ajaxTransport("script",function(c){var v,I;if(c.crossDomain||c.scriptAttrs)return{send:function(y,S){v=C("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",I=function(D){v.remove(),I=null,D&&S("error"===D.type?404:200,D.type)}),Ut.head.appendChild(v[0])},abort:function(){I&&I()}}});var si,jn=[],Yo=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=jn.pop()||C.expando+"_"+is.guid++;return this[c]=!0,c}}),C.ajaxPrefilter("json jsonp",function(c,v,I){var y,S,D,z=!1!==c.jsonp&&(Yo.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yo.test(c.data)&&"data");if(z||"jsonp"===c.dataTypes[0])return y=c.jsonpCallback=Dt(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,z?c[z]=c[z].replace(Yo,"$1"+y):!1!==c.jsonp&&(c.url+=(ji.test(c.url)?"&":"?")+c.jsonp+"="+y),c.converters["script json"]=function(){return D||C.error(y+" was not called"),D[0]},c.dataTypes[0]="json",S=R[y],R[y]=function(){D=arguments},I.always(function(){void 0===S?C(R).removeProp(y):R[y]=S,c[y]&&(c.jsonpCallback=v.jsonpCallback,jn.push(y)),D&&Dt(S)&&S(D[0]),D=S=void 0}),"script"}),$t.createHTMLDocument=((si=Ut.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===si.childNodes.length),C.parseHTML=function(c,v,I){return"string"!=typeof c?[]:("boolean"==typeof v&&(I=v,v=!1),v||($t.createHTMLDocument?((y=(v=Ut.implementation.createHTMLDocument("")).createElement("base")).href=Ut.location.href,v.head.appendChild(y)):v=Ut),D=!I&&[],(S=Ke.exec(c))?[v.createElement(S[1])]:(S=rl([c],v,D),D&&D.length&&C(D).remove(),C.merge([],S.childNodes)));var y,S,D},C.fn.load=function(c,v,I){var y,S,D,z=this,_=c.indexOf(" ");return-1<_&&(y=Gn(c.slice(_)),c=c.slice(0,_)),Dt(v)?(I=v,v=void 0):v&&"object"==typeof v&&(S="POST"),0<z.length&&C.ajax({url:c,type:S||"GET",dataType:"html",data:v}).done(function(U){D=arguments,z.html(y?C("<div>").append(C.parseHTML(U)).find(y):U)}).always(I&&function(U,J){z.each(function(){I.apply(this,D||[U.responseText,J,U])})}),this},C.expr.pseudos.animated=function(c){return C.grep(C.timers,function(v){return c===v.elem}).length},C.offset={setOffset:function(c,v,I){var y,S,D,z,_,U,J=C.css(c,"position"),rt=C(c),ct={};"static"===J&&(c.style.position="relative"),_=rt.offset(),D=C.css(c,"top"),U=C.css(c,"left"),("absolute"===J||"fixed"===J)&&-1<(D+U).indexOf("auto")?(z=(y=rt.position()).top,S=y.left):(z=parseFloat(D)||0,S=parseFloat(U)||0),Dt(v)&&(v=v.call(c,I,C.extend({},_))),null!=v.top&&(ct.top=v.top-_.top+z),null!=v.left&&(ct.left=v.left-_.left+S),"using"in v?v.using.call(c,ct):rt.css(ct)}},C.fn.extend({offset:function(c){if(arguments.length)return void 0===c?this:this.each(function(S){C.offset.setOffset(this,c,S)});var v,I,y=this[0];return y?y.getClientRects().length?{top:(v=y.getBoundingClientRect()).top+(I=y.ownerDocument.defaultView).pageYOffset,left:v.left+I.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var c,v,I,y=this[0],S={top:0,left:0};if("fixed"===C.css(y,"position"))v=y.getBoundingClientRect();else{for(v=this.offset(),I=y.ownerDocument,c=y.offsetParent||I.documentElement;c&&(c===I.body||c===I.documentElement)&&"static"===C.css(c,"position");)c=c.parentNode;c&&c!==y&&1===c.nodeType&&((S=C(c).offset()).top+=C.css(c,"borderTopWidth",!0),S.left+=C.css(c,"borderLeftWidth",!0))}return{top:v.top-S.top-C.css(y,"marginTop",!0),left:v.left-S.left-C.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&"static"===C.css(c,"position");)c=c.offsetParent;return c||ve})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,v){var I="pageYOffset"===v;C.fn[c]=function(y){return We(this,function(S,D,z){var _;if(Er(S)?_=S:9===S.nodeType&&(_=S.defaultView),void 0===z)return _?_[v]:S[D];_?_.scrollTo(I?_.pageXOffset:z,I?z:_.pageYOffset):S[D]=z},c,y,arguments.length)}}),C.each(["top","left"],function(c,v){C.cssHooks[v]=Po($t.pixelPosition,function(I,y){if(y)return y=pa(I,v),Do.test(y)?C(I).position()[v]+"px":y})}),C.each({Height:"height",Width:"width"},function(c,v){C.each({padding:"inner"+c,content:v,"":"outer"+c},function(I,y){C.fn[y]=function(S,D){var z=arguments.length&&(I||"boolean"!=typeof S),_=I||(!0===S||!0===D?"margin":"border");return We(this,function(U,J,rt){var ct;return Er(U)?0===y.indexOf("outer")?U["inner"+c]:U.document.documentElement["client"+c]:9===U.nodeType?(ct=U.documentElement,Math.max(U.body["scroll"+c],ct["scroll"+c],U.body["offset"+c],ct["offset"+c],ct["client"+c])):void 0===rt?C.css(U,J,_):C.style(U,J,rt,_)},v,z?S:void 0,z)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,v){C.fn[v]=function(I){return this.on(v,I)}}),C.fn.extend({bind:function(c,v,I){return this.on(c,null,v,I)},unbind:function(c,v){return this.off(c,null,v)},delegate:function(c,v,I,y){return this.on(v,c,I,y)},undelegate:function(c,v,I){return 1===arguments.length?this.off(c,"**"):this.off(v,c||"**",I)},hover:function(c,v){return this.mouseenter(c).mouseleave(v||c)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,v){C.fn[v]=function(I,y){return 0<arguments.length?this.on(v,null,I,y):this.trigger(v)}});var Re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(c,v){var I,y,S;if("string"==typeof v&&(I=c[v],v=c,c=I),Dt(c))return y=Se.call(arguments,2),(S=function(){return c.apply(v||this,y.concat(Se.call(arguments)))}).guid=c.guid=c.guid||C.guid++,S},C.holdReady=function(c){c?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=Rr,C.isFunction=Dt,C.isWindow=Er,C.camelCase=Sr,C.type=vr,C.now=Date.now,C.isNumeric=function(c){var v=C.type(c);return("number"===v||"string"===v)&&!isNaN(c-parseFloat(c))},C.trim=function(c){return null==c?"":(c+"").replace(Re,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var De=R.jQuery,Dc=R.$;return C.noConflict=function(c){return R.$===C&&(R.$=Dc),c&&R.jQuery===C&&(R.jQuery=De),C},void 0===yt&&(R.jQuery=R.$=C),C}),function(){var R,Se="Expected a function",Te="__lodash_hash_undefined__",kr="__lodash_placeholder__",C=128,En=1/0,In=9007199254740991,_e=4294967295,Ja=[["ary",C],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],an="[object Arguments]",jr="[object Array]",We="[object Boolean]",Gi="[object Date]",$i="[object Error]",Sr="[object Function]",Jn="[object GeneratorFunction]",$e="[object Map]",x="[object Number]",W="[object Object]",Q="[object Promise]",lt="[object RegExp]",vt="[object Set]",Ot="[object String]",ve="[object Symbol]",Le="[object WeakMap]",tr="[object ArrayBuffer]",zn="[object DataView]",Br="[object Float32Array]",Ie="[object Float64Array]",He="[object Int8Array]",ur="[object Int16Array]",An="[object Int32Array]",Zr="[object Uint8Array]",_r="[object Uint8ClampedArray]",pr="[object Uint16Array]",ta="[object Uint32Array]",Lc=/\b__p \+= '';/g,rl=/\b(__p \+=) '' \+/g,zs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yn=/&(?:amp|lt|gt|quot|#39);/g,Ii=/[&<>"']/g,So=RegExp(yn.source),Os=RegExp(Ii.source),Ka=/<%-([\s\S]+?)%>/g,Rs=/<%([\s\S]+?)%>/g,To=/<%=([\s\S]+?)%>/g,Qa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lo=/^\w*$/,nl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gs=/[\\^$.*+?()[\]{}|]/g,js=RegExp(Gs.source),On=/^\s+/,il=/\s/,Do=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qa=/\{\n\/\* \[wrapped with (.+)\] \*/,Bs=/,? & /,$a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pa=/[()=,{}\[\]\/\s]/,Po=/\\(\\)?/g,ko=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zs=/\w*$/,Eo=/^[-+]0x[0-9a-f]+$/i,_s=/^0b[01]+$/i,al=/^\[object .+?Constructor\]$/,zo=/^0o[0-7]+$/i,ma=/^(?:0|[1-9]\d*)$/,Oo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ia=/($^)/,Ws=/['\n\r\u2028\u2029\\]/g,Aa="\\ud800-\\udfff",Ai="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ys="\\u2700-\\u27bf",ya="a-z\\xdf-\\xf6\\xf8-\\xff",Us="A-Z\\xc0-\\xd6\\xd8-\\xde",wn="\\ufe0e\\ufe0f",es="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vs="["+Aa+"]",rs="["+es+"]",Gn="["+Ai+"]",Kn="\\d+",ns="["+Ys+"]",Ro="["+ya+"]",Xs="[^"+Aa+es+Kn+Ys+ya+Us+"]",ra="\\ud83c[\\udffb-\\udfff]",is="[^"+Aa+"]",ji="(?:\\ud83c[\\udde6-\\uddff]){2}",wa="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="["+Us+"]",as="(?:"+Ro+"|"+Xs+")",ss="(?:"+ai+"|"+Xs+")",os="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",jo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Bo="(?:"+Gn+"|"+ra+")?",sl="["+wn+"]?",wi=sl+Bo+"(?:\\u200d(?:"+[is,ji,wa].join("|")+")"+sl+Bo+")*",_o="(?:"+[ns,ji,wa].join("|")+")"+wi,Wo="(?:"+[is+Gn+"?",Gn,ji,wa,Vs].join("|")+")",us=RegExp("['\u2019]","g"),Js=RegExp(Gn,"g"),ba=RegExp(ra+"(?="+ra+")|"+Wo+wi,"g"),ul=RegExp([ai+"?"+Ro+"+"+os+"(?="+[rs,ai,"$"].join("|")+")",ss+"+"+jo+"(?="+[rs,ai+as,"$"].join("|")+")",ai+"?"+as+"+"+os,ai+"+"+jo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kn,_o].join("|"),"g"),na=RegExp("[\\u200d"+Aa+Ai+wn+"]"),si=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yo=-1,Re={};Re[Br]=Re[Ie]=Re[He]=Re[ur]=Re[An]=Re[Zr]=Re[_r]=Re[pr]=Re[ta]=!0,Re[an]=Re[jr]=Re[tr]=Re[We]=Re[zn]=Re[Gi]=Re[$i]=Re[Sr]=Re[$e]=Re[x]=Re[W]=Re[lt]=Re[vt]=Re[Ot]=Re[Le]=!1;var De={};De[an]=De[jr]=De[tr]=De[zn]=De[We]=De[Gi]=De[Br]=De[Ie]=De[He]=De[ur]=De[An]=De[$e]=De[x]=De[W]=De[lt]=De[vt]=De[Ot]=De[ve]=De[Zr]=De[_r]=De[pr]=De[ta]=!0,De[$i]=De[Sr]=De[Le]=!1;var I={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},y=parseFloat,S=parseInt,D="object"==typeof global&&global&&global.Object===Object&&global,z="object"==typeof self&&self&&self.Object===Object&&self,_=D||z||Function("return this")(),U="object"==typeof exports&&exports&&!exports.nodeType&&exports,J=U&&"object"==typeof module&&module&&!module.nodeType&&module,rt=J&&J.exports===U,ct=rt&&D.process,q=function(){try{return J&&J.require&&J.require("util").types||ct&&ct.binding&&ct.binding("util")}catch(N){}}(),nt=q&&q.isArrayBuffer,Ct=q&&q.isDate,Nt=q&&q.isMap,bt=q&&q.isRegExp,Ge=q&&q.isSet,Ye=q&&q.isTypedArray;function we(K,N,L){switch(L.length){case 0:return K.call(N);case 1:return K.call(N,L[0]);case 2:return K.call(N,L[0],L[1]);case 3:return K.call(N,L[0],L[1],L[2])}return K.apply(N,L)}function Ae(K,N,L,Z){for(var $=-1,X=null==K?0:K.length;++$<X;){var ot=K[$];N(Z,ot,L(ot),K)}return Z}function Lt(K,N){for(var L=-1,Z=null==K?0:K.length;++L<Z&&!1!==N(K[L],L,K););return K}function er(K,N){for(var L=null==K?0:K.length;L--&&!1!==N(K[L],L,K););return K}function re(K,N){for(var L=-1,Z=null==K?0:K.length;++L<Z;)if(!N(K[L],L,K))return!1;return!0}function he(K,N){for(var L=-1,Z=null==K?0:K.length,$=0,X=[];++L<Z;){var ot=K[L];N(ot,L,K)&&(X[$++]=ot)}return X}function oi(K,N){return!(null==K||!K.length)&&Rt(K,N,0)>-1}function Qn(K,N,L){for(var Z=-1,$=null==K?0:K.length;++Z<$;)if(L(N,K[Z]))return!0;return!1}function ae(K,N){for(var L=-1,Z=null==K?0:K.length,$=Array(Z);++L<Z;)$[L]=N(K[L],L,K);return $}function on(K,N){for(var L=-1,Z=N.length,$=K.length;++L<Z;)K[$+L]=N[L];return K}function bi(K,N,L,Z){var $=-1,X=null==K?0:K.length;for(Z&&X&&(L=K[++$]);++$<X;)L=N(L,K[$],$,K);return L}function Wr(K,N,L,Z){var $=null==K?0:K.length;for(Z&&$&&(L=K[--$]);$--;)L=N(L,K[$],$,K);return L}function ui(K,N){for(var L=-1,Z=null==K?0:K.length;++L<Z;)if(N(K[L],L,K))return!0;return!1}var Tr=Ve("length");function Qr(K,N,L){var Z;return L(K,function($,X,ot){if(N($,X,ot))return Z=X,!1}),Z}function ln(K,N,L,Z){for(var $=K.length,X=L+(Z?1:-1);Z?X--:++X<$;)if(N(K[X],X,K))return X;return-1}function Rt(K,N,L){return N==N?function Jo(K,N,L){for(var Z=L-1,$=K.length;++Z<$;)if(K[Z]===N)return Z;return-1}(K,N,L):ln(K,Ue,L)}function fe(K,N,L,Z){for(var $=L-1,X=K.length;++$<X;)if(Z(K[$],N))return $;return-1}function Ue(K){return K!=K}function lr(K,N){var L=null==K?0:K.length;return L?Ks(K,N)/L:NaN}function Ve(K){return function(N){return null==N?R:N[K]}}function cr(K){return function(N){return null==K?R:K[N]}}function xi(K,N,L,Z,$){return $(K,function(X,ot,st){L=Z?(Z=!1,X):N(L,X,ot,st)}),L}function Ks(K,N){for(var L,Z=-1,$=K.length;++Z<$;){var X=N(K[Z]);X!==R&&(L=L===R?X:L+X)}return L}function Qs(K,N){for(var L=-1,Z=Array(K);++L<K;)Z[L]=N(L);return Z}function Na(K){return K&&K.slice(0,ls(K)+1).replace(On,"")}function cn(K){return function(N){return K(N)}}function Uo(K,N){return ae(N,function(L){return K[L]})}function Ma(K,N){return K.has(N)}function ia(K,N){for(var L=-1,Z=K.length;++L<Z&&Rt(N,K[L],0)>-1;);return L}function Vo(K,N){for(var L=K.length;L--&&Rt(N,K[L],0)>-1;);return L}function qs(K,N){for(var L=K.length,Z=0;L--;)K[L]===N&&++Z;return Z}var li=cr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),qn=cr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xo(K){return"\\"+I[K]}function Bi(K){return na.test(K)}function aa(K){var N=-1,L=Array(K.size);return K.forEach(function(Z,$){L[++N]=[$,Z]}),L}function bn(K,N){return function(L){return K(N(L))}}function fr(K,N){for(var L=-1,Z=K.length,$=0,X=[];++L<Z;){var ot=K[L];(ot===N||ot===kr)&&(K[L]=kr,X[$++]=L)}return X}function sa(K){var N=-1,L=Array(K.size);return K.forEach(function(Z){L[++N]=Z}),L}function Zi(K){return Bi(K)?function to(K){for(var N=ba.lastIndex=0;ba.test(K);)++N;return N}(K):Tr(K)}function hr(K){return Bi(K)?function cs(K){return K.match(ba)||[]}(K):function Fe(K){return K.split("")}(K)}function ls(K){for(var N=K.length;N--&&il.test(K.charAt(N)););return N}var Qo=cr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fn=function K(N){var n,L=(N=null==N?_:fn.defaults(_.Object(),N,fn.pick(_,jn))).Array,Z=N.Date,$=N.Error,X=N.Function,ot=N.Math,st=N.Object,dt=N.RegExp,mt=N.String,St=N.TypeError,Pt=L.prototype,Qt=st.prototype,je=N["__core-js_shared__"],_t=X.prototype.toString,Zt=Qt.hasOwnProperty,gr=0,mr=(n=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",ye=Qt.toString,$n=_t.call(st),Yr=_._,rr=dt("^"+_t.call(Zt).replace(Gs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fr=rt?N.Buffer:R,Bn=N.Symbol,oa=N.Uint8Array,eo=Fr?Fr.allocUnsafe:R,ro=bn(st.getPrototypeOf,st),Pc=st.create,wh=Qt.propertyIsEnumerable,$o=Pt.splice,kc=Bn?Bn.isConcatSpreadable:R,hs=Bn?Bn.iterator:R,Sa=Bn?Bn.toStringTag:R,Zn=function(){try{var n=_a(st,"defineProperty");return n({},"",{}),n}catch(a){}}(),Ta=N.clearTimeout!==_.clearTimeout&&N.clearTimeout,tu=Z&&Z.now!==_.Date.now&&Z.now,xn=N.setTimeout!==_.setTimeout&&N.setTimeout,gs=ot.ceil,La=ot.floor,no=st.getOwnPropertySymbols,bh=Fr?Fr.isBuffer:R,cl=N.isFinite,fl=Pt.join,Ec=bn(st.keys,st),Tt=ot.max,Ir=ot.min,hl=Z.now,gl=N.parseInt,dl=ot.random,zc=Pt.reverse,eu=_a(N,"DataView"),io=_a(N,"Map"),ru=_a(N,"Promise"),ds=_a(N,"Set"),vs=_a(N,"WeakMap"),F=_a(st,"create"),ua=vs&&new vs,la={},vl=Ee(eu),It=Ee(io),Da=Ee(ru),Oc=Ee(ds),nu=Ee(vs),iu=Bn?Bn.prototype:R,Ar=iu?iu.valueOf:R,Rc=iu?iu.toString:R;function k(n){if(nr(n)&&!Xt(n)&&!(n instanceof se)){if(n instanceof qr)return n;if(Zt.call(n,"__wrapped__"))return mf(n)}return new qr(n)}var ps=function(){function n(){}return function(a){if(!Qe(a))return{};if(Pc)return Pc(a);n.prototype=a;var o=new n;return n.prototype=R,o}}();function au(){}function qr(n,a){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=R}function se(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function Pa(n){var a=-1,o=null==n?0:n.length;for(this.clear();++a<o;){var h=n[a];this.set(h[0],h[1])}}function _i(n){var a=-1,o=null==n?0:n.length;for(this.clear();++a<o;){var h=n[a];this.set(h[0],h[1])}}function xt(n){var a=-1,o=null==n?0:n.length;for(this.clear();++a<o;){var h=n[a];this.set(h[0],h[1])}}function ca(n){var a=-1,o=null==n?0:n.length;for(this.__data__=new xt;++a<o;)this.add(n[a])}function $r(n){var a=this.__data__=new _i(n);this.size=a.size}function fa(n,a){var o=Xt(n),h=!o&&Fa(n),p=!o&&!h&&zi(n),A=!o&&!h&&!p&&Ps(n),b=o||h||p||A,T=b?Qs(n.length,mt):[],P=T.length;for(var G in n)(a||Zt.call(n,G))&&(!b||!("length"==G||p&&("offset"==G||"parent"==G)||A&&("buffer"==G||"byteLength"==G||"byteOffset"==G)||Fi(G,P)))&&T.push(G);return T}function uu(n){var a=n.length;return a?n[Dr(0,a-1)]:R}function Fc(n,a){return Xi(sr(n),ha(a,0,n.length))}function Uc(n){return Xi(sr(n))}function lu(n,a,o){(o!==R&&!di(n[a],o)||o===R&&!(a in n))&&ci(n,a,o)}function za(n,a,o){var h=n[a];(!Zt.call(n,a)||!di(h,o)||o===R&&!(a in n))&&ci(n,a,o)}function Oa(n,a){for(var o=n.length;o--;)if(di(n[o][0],a))return o;return-1}function Al(n,a,o,h){return Mi(n,function(p,A,b){a(h,p,o(p),b)}),h}function yl(n,a){return n&&ei(a,Pr(a),n)}function ci(n,a,o){"__proto__"==a&&Zn?Zn(n,a,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[a]=o}function ms(n,a){for(var o=-1,h=a.length,p=L(h),A=null==n;++o<h;)p[o]=A?R:yc(n,a[o]);return p}function ha(n,a,o){return n==n&&(o!==R&&(n=n<=o?n:o),a!==R&&(n=n>=a?n:a)),n}function Wn(n,a,o,h,p,A){var b,T=1&a,P=2&a,G=4&a;if(o&&(b=p?o(n,h,p,A):o(n)),b!==R)return b;if(!Qe(n))return n;var m=Xt(n);if(m){if(b=function Oh(n){var a=n.length,o=new n.constructor(a);return a&&"string"==typeof n[0]&&Zt.call(n,"index")&&(o.index=n.index,o.input=n.input),o}(n),!T)return sr(n,b)}else{var w=Hr(n),M=w==Sr||w==Jn;if(zi(n))return bu(n,T);if(w==W||w==an||M&&!p){if(b=P||M?{}:gf(n),!T)return P?function kh(n,a){return ei(n,Ul(n),a)}(n,function Vc(n,a){return n&&ei(a,Ln(a),n)}(b,n)):function Wi(n,a){return ei(n,ki(n),a)}(n,yl(b,n))}else{if(!De[w])return p?n:{};b=function Rh(n,a,o){var h=n.constructor;switch(a){case tr:return El(n);case We:case Gi:return new h(+n);case zn:return function Un(n,a){var o=a?El(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}(n,o);case Br:case Ie:case He:case ur:case An:case Zr:case _r:case pr:case ta:return dr(n,o);case $e:return new h;case x:case Ot:return new h(n);case lt:return function af(n){var a=new n.constructor(n.source,Zs.exec(n));return a.lastIndex=n.lastIndex,a}(n);case vt:return new h;case ve:return function sf(n){return Ar?st(Ar.call(n)):{}}(n)}}(n,w,T)}}A||(A=new $r);var E=A.get(n);if(E)return E;A.set(n,b),qf(n)?n.forEach(function(B){b.add(Wn(B,a,o,B,n,A))}):Vu(n)&&n.forEach(function(B,H){b.set(H,Wn(B,a,o,H,n,A))});var Y=m?R:(G?P?_l:Zl:P?Ln:Pr)(n);return Lt(Y||n,function(B,H){Y&&(B=n[H=B]),za(b,H,Wn(B,a,o,H,n,A))}),b}function Cl(n,a,o){var h=o.length;if(null==n)return!h;for(n=st(n);h--;){var p=o[h],b=n[p];if(b===R&&!(p in n)||!(0,a[p])(b))return!1}return!0}function wl(n,a,o){if("function"!=typeof n)throw new St(Se);return Jr(function(){n.apply(R,o)},a)}function Is(n,a,o,h){var p=-1,A=oi,b=!0,T=n.length,P=[],G=a.length;if(!T)return P;o&&(a=ae(a,cn(o))),h?(A=Qn,b=!1):a.length>=200&&(A=Ma,b=!1,a=new ca(a));t:for(;++p<T;){var m=n[p],w=null==o?m:o(m);if(m=h||0!==m?m:0,b&&w==w){for(var M=G;M--;)if(a[M]===w)continue t;P.push(m)}else A(a,w,h)||P.push(m)}return P}k.templateSettings={escape:Ka,evaluate:Rs,interpolate:To,variable:"",imports:{_:k}},(k.prototype=au.prototype).constructor=k,(qr.prototype=ps(au.prototype)).constructor=qr,(se.prototype=ps(au.prototype)).constructor=se,Pa.prototype.clear=function Gc(){this.__data__=F?F(null):{},this.size=0},Pa.prototype.delete=function jc(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a},Pa.prototype.get=function Bc(n){var a=this.__data__;if(F){var o=a[n];return o===Te?R:o}return Zt.call(a,n)?a[n]:R},Pa.prototype.has=function Pe(n){var a=this.__data__;return F?a[n]!==R:Zt.call(a,n)},Pa.prototype.set=function ou(n,a){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=F&&a===R?Te:a,this},_i.prototype.clear=function Zc(){this.__data__=[],this.size=0},_i.prototype.delete=function _c(n){var a=this.__data__,o=Oa(a,n);return!(o<0||(o==a.length-1?a.pop():$o.call(a,o,1),--this.size,0))},_i.prototype.get=function pl(n){var a=this.__data__,o=Oa(a,n);return o<0?R:a[o][1]},_i.prototype.has=function me(n){return Oa(this.__data__,n)>-1},_i.prototype.set=function ao(n,a){var o=this.__data__,h=Oa(o,n);return h<0?(++this.size,o.push([n,a])):o[h][1]=a,this},xt.prototype.clear=function Ni(){this.size=0,this.__data__={hash:new Pa,map:new(io||_i),string:new Pa}},xt.prototype.delete=function ka(n){var a=Pu(this,n).delete(n);return this.size-=a?1:0,a},xt.prototype.get=function Ur(n){return Pu(this,n).get(n)},xt.prototype.has=function Wc(n){return Pu(this,n).has(n)},xt.prototype.set=function _n(n,a){var o=Pu(this,n),h=o.size;return o.set(n,a),this.size+=o.size==h?0:1,this},ca.prototype.add=ca.prototype.push=function Ea(n){return this.__data__.set(n,Te),this},ca.prototype.has=function ml(n){return this.__data__.has(n)},$r.prototype.clear=function Il(){this.__data__=new _i,this.size=0},$r.prototype.delete=function Nh(n){var a=this.__data__,o=a.delete(n);return this.size=a.size,o},$r.prototype.get=function Mh(n){return this.__data__.get(n)},$r.prototype.has=function Nn(n){return this.__data__.has(n)},$r.prototype.set=function Yc(n,a){var o=this.__data__;if(o instanceof _i){var h=o.__data__;if(!io||h.length<199)return h.push([n,a]),this.size=++o.size,this;o=this.__data__=new xt(h)}return o.set(n,a),this.size=o.size,this};var Mi=Ol(Si),so=Ol(ys,!0);function Hc(n,a){var o=!0;return Mi(n,function(h,p,A){return o=!!a(h,p,A)}),o}function oo(n,a,o){for(var h=-1,p=n.length;++h<p;){var A=n[h],b=a(A);if(null!=b&&(T===R?b==b&&!Hn(b):o(b,T)))var T=b,P=A}return P}function bl(n,a){var o=[];return Mi(n,function(h,p,A){a(h,p,A)&&o.push(h)}),o}function Lr(n,a,o,h,p){var A=-1,b=n.length;for(o||(o=jh),p||(p=[]);++A<b;){var T=n[A];a>0&&o(T)?a>1?Lr(T,a-1,o,h,p):on(p,T):h||(p[p.length]=T)}return p}var As=Rl(),cu=Rl(!0);function Si(n,a){return n&&As(n,a,Pr)}function ys(n,a){return n&&cu(n,a,Pr)}function fi(n,a){return he(a,function(o){return vi(n[o])})}function Ra(n,a){for(var o=0,h=(a=Di(a,n)).length;null!=n&&o<h;)n=n[Vt(a[o++])];return o&&o==h?n:R}function Kc(n,a,o){var h=a(n);return Xt(n)?h:on(h,o(n))}function tn(n){return null==n?n===R?"[object Undefined]":"[object Null]":Sa&&Sa in st(n)?function Fl(n){var a=Zt.call(n,Sa),o=n[Sa];try{n[Sa]=R;var h=!0}catch(A){}var p=ye.call(n);return h&&(a?n[Sa]=o:delete n[Sa]),p}(n):function Vi(n){return ye.call(n)}(n)}function it(n,a){return n>a}function Yn(n,a){return null!=n&&Zt.call(n,a)}function ti(n,a){return null!=n&&a in st(n)}function Ga(n,a,o){for(var h=o?Qn:oi,p=n[0].length,A=n.length,b=A,T=L(A),P=1/0,G=[];b--;){var m=n[b];b&&a&&(m=ae(m,cn(a))),P=Ir(m.length,P),T[b]=!o&&(a||p>=120&&m.length>=120)?new ca(b&&m):R}m=n[0];var w=-1,M=T[0];t:for(;++w<p&&G.length<P;){var E=m[w],j=a?a(E):E;if(E=o||0!==E?E:0,!(M?Ma(M,j):h(G,j,o))){for(b=A;--b;){var Y=T[b];if(!(Y?Ma(Y,j):h(n[b],j,o)))continue t}M&&M.push(j),G.push(E)}}return G}function Ti(n,a,o){var h=null==(n=Jl(n,a=Di(a,n)))?n:n[Vt(Tn(a))];return null==h?R:we(h,n,o)}function xl(n){return nr(n)&&tn(n)==an}function Cs(n,a,o,h,p){return n===a||(null==n||null==a||!nr(n)&&!nr(a)?n!=n&&a!=a:function qc(n,a,o,h,p,A){var b=Xt(n),T=Xt(a),P=b?jr:Hr(n),G=T?jr:Hr(a),m=(P=P==an?W:P)==W,w=(G=G==an?W:G)==W,M=P==G;if(M&&zi(n)){if(!zi(a))return!1;b=!0,m=!1}if(M&&!m)return A||(A=new $r),b||Ps(n)?Bl(n,a,o,h,p,A):function po(n,a,o,h,p,A,b){switch(o){case zn:if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case tr:return!(n.byteLength!=a.byteLength||!A(new oa(n),new oa(a)));case We:case Gi:case x:return di(+n,+a);case $i:return n.name==a.name&&n.message==a.message;case lt:case Ot:return n==a+"";case $e:var T=aa;case vt:if(T||(T=sa),n.size!=a.size&&!(1&h))return!1;var G=b.get(n);if(G)return G==a;h|=2,b.set(n,a);var m=Bl(T(n),T(a),h,p,A,b);return b.delete(n),m;case ve:if(Ar)return Ar.call(n)==Ar.call(a)}return!1}(n,a,P,o,h,p,A);if(!(1&o)){var E=m&&Zt.call(n,"__wrapped__"),j=w&&Zt.call(a,"__wrapped__");if(E||j){var Y=E?n.value():n,B=j?a.value():a;return A||(A=new $r),p(Y,B,o,h,A)}}return!!M&&(A||(A=new $r),function lf(n,a,o,h,p,A){var b=1&o,T=Zl(n),P=T.length;if(P!=Zl(a).length&&!b)return!1;for(var w=P;w--;){var M=T[w];if(!(b?M in a:Zt.call(a,M)))return!1}var E=A.get(n),j=A.get(a);if(E&&j)return E==a&&j==n;var Y=!0;A.set(n,a),A.set(a,n);for(var B=b;++w<P;){var H=n[M=T[w]],et=a[M];if(h)var at=b?h(et,H,M,a,n,A):h(H,et,M,n,a,A);if(!(at===R?H===et||p(H,et,o,h,A):at)){Y=!1;break}B||(B="constructor"==M)}if(Y&&!B){var ft=n.constructor,gt=a.constructor;ft!=gt&&"constructor"in n&&"constructor"in a&&!("function"==typeof ft&&ft instanceof ft&&"function"==typeof gt&&gt instanceof gt)&&(Y=!1)}return A.delete(n),A.delete(a),Y}(n,a,o,h,p,A))}(n,a,o,h,Cs,p))}function hu(n,a,o,h){var p=o.length,A=p,b=!h;if(null==n)return!A;for(n=st(n);p--;){var T=o[p];if(b&&T[2]?T[1]!==n[T[0]]:!(T[0]in n))return!1}for(;++p<A;){var P=(T=o[p])[0],G=n[P],m=T[1];if(b&&T[2]){if(G===R&&!(P in n))return!1}else{var w=new $r;if(h)var M=h(G,m,P,n,a,w);if(!(M===R?Cs(m,G,3,h,w):M))return!1}}return!0}function Ne(n){return!(!Qe(n)||function Hl(n){return!!mr&&mr in n}(n))&&(vi(n)?rr:al).test(Ee(n))}function Vr(n){return"function"==typeof n?n:null==n?Dn:"object"==typeof n?Xt(n)?Tl(n[0],n[1]):$c(n):Ah(n)}function vu(n){if(!Ss(n))return Ec(n);var a=[];for(var o in st(n))Zt.call(n,o)&&"constructor"!=o&&a.push(o);return a}function pu(n,a){return n<a}function Sl(n,a){var o=-1,h=vn(n)?L(n.length):[];return Mi(n,function(p,A,b){h[++o]=a(p,A,b)}),h}function $c(n){var a=Yl(n);return 1==a.length&&a[0][2]?vf(a[0][0],a[0][1]):function(o){return o===n||hu(o,n,a)}}function Tl(n,a){return Vl(n)&&df(a)?vf(Vt(n),a):function(o){var h=yc(o,n);return h===R&&h===a?Cc(o,n):Cs(a,h,3)}}function mu(n,a,o,h,p){n!==a&&As(a,function(A,b){if(p||(p=new $r),Qe(A))!function Th(n,a,o,h,p,A,b){var T=Kl(n,o),P=Kl(a,o),G=b.get(P);if(G)lu(n,o,G);else{var m=A?A(T,P,o+"",n,a,b):R,w=m===R;if(w){var M=Xt(P),E=!M&&zi(P),j=!M&&!E&&Ps(P);m=P,M||E||j?Xt(T)?m=T:or(T)?m=sr(T):E?(w=!1,m=bu(P,!0)):j?(w=!1,m=dr(P,!0)):m=[]:No(P)||Fa(P)?(m=T,Fa(T)?m=eh(T):(!Qe(T)||vi(T))&&(m=gf(P))):w=!1}w&&(b.set(P,m),p(m,P,h,A,b),b.delete(P)),lu(n,o,m)}}(n,a,b,o,mu,h,p);else{var T=h?h(Kl(n,b),A,b+"",n,a,p):R;T===R&&(T=A),lu(n,b,T)}},Ln)}function Ll(n,a){var o=n.length;if(o)return Fi(a+=a<0?o:0,o)?n[a]:R}function tf(n,a,o){a=a.length?ae(a,function(A){return Xt(A)?function(b){return Ra(b,1===A.length?A[0]:A)}:A}):[Dn];var h=-1;return a=ae(a,cn(jt())),function xa(K,N){var L=K.length;for(K.sort(N);L--;)K[L]=K[L].value;return K}(Sl(n,function(A,b,T){return{criteria:ae(a,function(G){return G(A)}),index:++h,value:A}}),function(A,b){return function Xe(n,a,o){for(var h=-1,p=n.criteria,A=a.criteria,b=p.length,T=o.length;++h<b;){var P=zl(p[h],A[h]);if(P)return h>=T?P:P*("desc"==o[h]?-1:1)}return n.index-a.index}(A,b,o)})}function Dl(n,a,o){for(var h=-1,p=a.length,A={};++h<p;){var b=a[h],T=Ra(n,b);o(T,b)&&Mt(A,Di(b,n),T)}return A}function Iu(n,a,o,h){var p=h?fe:Rt,A=-1,b=a.length,T=n;for(n===a&&(a=sr(a)),o&&(T=ae(n,cn(o)));++A<b;)for(var P=0,G=a[A],m=o?o(G):G;(P=p(T,m,P,h))>-1;)T!==n&&$o.call(T,P,1),$o.call(n,P,1);return n}function ef(n,a){for(var o=n?a.length:0,h=o-1;o--;){var p=a[o];if(o==h||p!==A){var A=p;Fi(p)?$o.call(n,p,1):qt(n,p)}}return n}function Dr(n,a){return n+La(dl()*(a-n+1))}function Au(n,a){var o="";if(!n||a<1||a>In)return o;do{a%2&&(o+=n),(a=La(a/2))&&(n+=n)}while(a);return o}function te(n,a){return ku(Vn(n,a,Dn),n+"")}function Dh(n){return uu(ks(n))}function Ph(n,a){var o=ks(n);return Xi(o,ha(a,0,o.length))}function Mt(n,a,o,h){if(!Qe(n))return n;for(var p=-1,A=(a=Di(a,n)).length,b=A-1,T=n;null!=T&&++p<A;){var P=Vt(a[p]),G=o;if("__proto__"===P||"constructor"===P||"prototype"===P)return n;if(p!=b){var m=T[P];(G=h?h(m,P,T):R)===R&&(G=Qe(m)?m:Fi(a[p+1])?[]:{})}za(T,P,G),T=T[P]}return n}var Mn=ua?function(n,a){return ua.set(n,a),n}:Dn,yu=Zn?function(n,a){return Zn(n,"toString",{configurable:!0,enumerable:!1,value:Ku(a),writable:!0})}:Dn;function Fn(n){return Xi(ks(n))}function Sn(n,a,o){var h=-1,p=n.length;a<0&&(a=-a>p?0:p+a),(o=o>p?p:o)<0&&(o+=p),p=a>o?0:o-a>>>0,a>>>=0;for(var A=L(p);++h<p;)A[h]=n[h+a];return A}function ja(n,a){var o;return Mi(n,function(h,p,A){return!(o=a(h,p,A))}),!!o}function en(n,a,o){var h=0,p=null==n?h:n.length;if("number"==typeof a&&a==a&&p<=2147483647){for(;h<p;){var A=h+p>>>1,b=n[A];null!==b&&!Hn(b)&&(o?b<=a:b<a)?h=A+1:p=A}return p}return Xr(n,a,Dn,o)}function Xr(n,a,o,h){var p=0,A=null==n?0:n.length;if(0===A)return 0;for(var b=(a=o(a))!=a,T=null===a,P=Hn(a),G=a===R;p<A;){var m=La((p+A)/2),w=o(n[m]),M=w!==R,E=null===w,j=w==w,Y=Hn(w);if(b)var B=h||j;else B=G?j&&(h||M):T?j&&M&&(h||!E):P?j&&M&&!E&&(h||!Y):!E&&!Y&&(h?w<=a:w<a);B?p=m+1:A=m}return Ir(A,4294967294)}function Li(n,a){for(var o=-1,h=n.length,p=0,A=[];++o<h;){var b=n[o],T=a?a(b):b;if(!o||!di(T,P)){var P=T;A[p++]=0===b?0:b}}return A}function bs(n){return"number"==typeof n?n:Hn(n)?NaN:+n}function Ht(n){if("string"==typeof n)return n;if(Xt(n))return ae(n,Ht)+"";if(Hn(n))return Rc?Rc.call(n):"";var a=n+"";return"0"==a&&1/n==-En?"-0":a}function Be(n,a,o){var h=-1,p=oi,A=n.length,b=!0,T=[],P=T;if(o)b=!1,p=Qn;else if(A>=200){var G=a?null:oe(n);if(G)return sa(G);b=!1,p=Ma,P=new ca}else P=a?[]:T;t:for(;++h<A;){var m=n[h],w=a?a(m):m;if(m=o||0!==m?m:0,b&&w==w){for(var M=P.length;M--;)if(P[M]===w)continue t;a&&P.push(w),T.push(m)}else p(P,w,o)||(P!==T&&P.push(w),T.push(m))}return T}function qt(n,a){return null==(n=Jl(n,a=Di(a,n)))||delete n[Vt(Tn(a))]}function rf(n,a,o,h){return Mt(n,a,o(Ra(n,a)),h)}function lo(n,a,o,h){for(var p=n.length,A=h?p:-1;(h?A--:++A<p)&&a(n[A],A,n););return o?Sn(n,h?0:A,h?A+1:p):Sn(n,h?A+1:0,h?p:A)}function nf(n,a){var o=n;return o instanceof se&&(o=o.value()),bi(a,function(h,p){return p.func.apply(p.thisArg,on([h],p.args))},o)}function Cu(n,a,o){var h=n.length;if(h<2)return h?Be(n[0]):[];for(var p=-1,A=L(h);++p<h;)for(var b=n[p],T=-1;++T<h;)T!=p&&(A[p]=Is(A[p]||b,n[T],a,o));return Be(Lr(A,1),a,o)}function wu(n,a,o){for(var h=-1,p=n.length,A=a.length,b={};++h<p;)o(b,n[h],h<A?a[h]:R);return b}function co(n){return or(n)?n:[]}function kl(n){return"function"==typeof n?n:Dn}function Di(n,a){return Xt(n)?n:Vl(n,a)?[n]:ne(Ce(n))}var hi=te;function ke(n,a,o){var h=n.length;return o=o===R?h:o,!a&&o>=h?n:Sn(n,a,o)}var Pi=Ta||function(n){return _.clearTimeout(n)};function bu(n,a){if(a)return n.slice();var o=n.length,h=eo?eo(o):new n.constructor(o);return n.copy(h),h}function El(n){var a=new n.constructor(n.byteLength);return new oa(a).set(new oa(n)),a}function dr(n,a){var o=a?El(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}function zl(n,a){if(n!==a){var o=n!==R,h=null===n,p=n==n,A=Hn(n),b=a!==R,T=null===a,P=a==a,G=Hn(a);if(!T&&!G&&!A&&n>a||A&&b&&P&&!T&&!G||h&&b&&P||!o&&P||!p)return 1;if(!h&&!A&&!G&&n<a||G&&o&&p&&!h&&!A||T&&o&&p||!b&&p||!P)return-1}return 0}function rn(n,a,o,h){for(var p=-1,A=n.length,b=o.length,T=-1,P=a.length,G=Tt(A-b,0),m=L(P+G),w=!h;++T<P;)m[T]=a[T];for(;++p<b;)(w||p<A)&&(m[o[p]]=n[p]);for(;G--;)m[T++]=n[p++];return m}function yr(n,a,o,h){for(var p=-1,A=n.length,b=-1,T=o.length,P=-1,G=a.length,m=Tt(A-T,0),w=L(m+G),M=!h;++p<m;)w[p]=n[p];for(var E=p;++P<G;)w[E+P]=a[P];for(;++b<T;)(M||p<A)&&(w[E+o[b]]=n[p++]);return w}function sr(n,a){var o=-1,h=n.length;for(a||(a=L(h));++o<h;)a[o]=n[o];return a}function ei(n,a,o,h){var p=!o;o||(o={});for(var A=-1,b=a.length;++A<b;){var T=a[A],P=h?h(o[T],n[T],T,o,n):R;P===R&&(P=n[T]),p?ci(o,T,P):za(o,T,P)}return o}function fo(n,a){return function(o,h){var p=Xt(o)?Ae:Al,A=a?a():{};return p(o,n,jt(h,2),A)}}function xs(n){return te(function(a,o){var h=-1,p=o.length,A=p>1?o[p-1]:R,b=p>2?o[2]:R;for(A=n.length>3&&"function"==typeof A?(p--,A):R,b&&hn(o[0],o[1],b)&&(A=p<3?R:A,p=1),a=st(a);++h<p;){var T=o[h];T&&n(a,T,h,A)}return a})}function Ol(n,a){return function(o,h){if(null==o)return o;if(!vn(o))return n(o,h);for(var p=o.length,A=a?p:-1,b=st(o);(a?A--:++A<p)&&!1!==h(b[A],A,b););return o}}function Rl(n){return function(a,o,h){for(var p=-1,A=st(a),b=h(a),T=b.length;T--;){var P=b[n?T:++p];if(!1===o(A[P],P,A))break}return a}}function of(n){return function(a){var o=Bi(a=Ce(a))?hr(a):R,h=o?o[0]:a.charAt(0),p=o?ke(o,1).join(""):a.slice(1);return h[n]()+p}}function da(n){return function(a){return bi(fh(ch(a).replace(us,"")),n,"")}}function Ns(n){return function(){var a=arguments;switch(a.length){case 0:return new n;case 1:return new n(a[0]);case 2:return new n(a[0],a[1]);case 3:return new n(a[0],a[1],a[2]);case 4:return new n(a[0],a[1],a[2],a[3]);case 5:return new n(a[0],a[1],a[2],a[3],a[4]);case 6:return new n(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new n(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var o=ps(n.prototype),h=n.apply(o,a);return Qe(h)?h:o}}function xu(n){return function(a,o,h){var p=st(a);if(!vn(a)){var A=jt(o,3);a=Pr(a),o=function(T){return A(p[T],T,p)}}var b=n(a,o,h);return b>-1?p[A?a[b]:b]:R}}function Yi(n){return gi(function(a){var o=a.length,h=o,p=qr.prototype.thru;for(n&&a.reverse();h--;){var A=a[h];if("function"!=typeof A)throw new St(Se);if(p&&!b&&"wrapper"==Du(A))var b=new qr([],!0)}for(h=b?h:o;++h<o;){var T=Du(A=a[h]),P="wrapper"==T?Wl(A):R;b=P&&Xl(P[0])&&424==P[1]&&!P[4].length&&1==P[9]?b[Du(P[0])].apply(b,P[3]):1==A.length&&Xl(A)?b[T]():b.thru(A)}return function(){var G=arguments,m=G[0];if(b&&1==G.length&&Xt(m))return b.plant(m).value();for(var w=0,M=o?a[w].apply(this,G):m;++w<o;)M=a[w].call(this,M);return M}})}function Ba(n,a,o,h,p,A,b,T,P,G){var m=a&C,w=1&a,M=2&a,E=24&a,j=512&a,Y=M?R:Ns(n);return function B(){for(var H=arguments.length,et=L(H),at=H;at--;)et[at]=arguments[at];if(E)var ft=Ms(B),gt=qs(et,ft);if(h&&(et=rn(et,h,p,E)),A&&(et=yr(et,A,b,E)),H-=gt,E&&H<G){var ht=fr(et,ft);return Su(n,a,Ba,B.placeholder,o,et,ht,T,P,G-H)}var wt=w?o:this,ee=M?wt[n]:n;return H=et.length,T?et=_h(et,T):j&&H>1&&et.reverse(),m&&P<H&&(et.length=P),this&&this!==_&&this instanceof B&&(ee=Y||Ns(ee)),ee.apply(wt,et)}}function Gl(n,a){return function(o,h){return function uo(n,a,o,h){return Si(n,function(p,A,b){a(h,o(p),A,b)}),h}(o,n,a(h),{})}}function ho(n,a){return function(o,h){var p;if(o===R&&h===R)return a;if(o!==R&&(p=o),h!==R){if(p===R)return h;"string"==typeof o||"string"==typeof h?(o=Ht(o),h=Ht(h)):(o=bs(o),h=bs(h)),p=n(o,h)}return p}}function Nu(n){return gi(function(a){return a=ae(a,cn(jt())),te(function(o){var h=this;return n(a,function(p){return we(p,h,o)})})})}function go(n,a){var o=(a=a===R?" ":Ht(a)).length;if(o<2)return o?Au(a,n):a;var h=Au(a,gs(n/Zi(a)));return Bi(a)?ke(hr(h),0,n).join(""):h.slice(0,n)}function Za(n){return function(a,o,h){return h&&"number"!=typeof h&&hn(a,o,h)&&(o=h=R),a=Ki(a),o===R?(o=a,a=0):o=Ki(o),function Lh(n,a,o,h){for(var p=-1,A=Tt(gs((a-n)/(o||1)),0),b=L(A);A--;)b[h?A:++p]=n,n+=o;return b}(a,o,h=h===R?a<o?1:-1:Ki(h),n)}}function va(n){return function(a,o){return"string"==typeof a&&"string"==typeof o||(a=ri(a),o=ri(o)),n(a,o)}}function Su(n,a,o,h,p,A,b,T,P,G){var m=8&a;a|=m?32:64,4&(a&=~(m?64:32))||(a&=-4);var Y=[n,a,p,m?A:R,m?b:R,m?R:A,m?R:b,T,P,G],B=o.apply(R,Y);return Xl(n)&&pf(B,Y),B.placeholder=h,Eu(B,n,a)}function Tu(n){var a=ot[n];return function(o,h){if(o=ri(o),(h=null==h?0:Ir(Jt(h),292))&&cl(o)){var p=(Ce(o)+"e").split("e");return+((p=(Ce(a(p[0]+"e"+(+p[1]+h)))+"e").split("e"))[0]+"e"+(+p[1]-h))}return a(o)}}var oe=ds&&1/sa(new ds([,-0]))[1]==En?function(n){return new ds(n)}:Mc;function Lu(n){return function(a){var o=Hr(a);return o==$e?aa(a):o==vt?function Ho(K){var N=-1,L=Array(K.size);return K.forEach(function(Z){L[++N]=[Z,Z]}),L}(a):function Fo(K,N){return ae(N,function(L){return[L,K[L]]})}(a,n(a))}}function Cr(n,a,o,h,p,A,b,T){var P=2&a;if(!P&&"function"!=typeof n)throw new St(Se);var G=h?h.length:0;if(G||(a&=-97,h=p=R),b=b===R?b:Tt(Jt(b),0),T=T===R?T:Jt(T),G-=p?p.length:0,64&a){var m=h,w=p;h=p=R}var M=P?R:Wl(n),E=[n,a,o,h,p,m,w,A,b,T];if(M&&function Zh(n,a){var o=n[1],h=a[1],p=o|h;if(!(p<131||(h==C&&8==o||h==C&&256==o&&n[7].length<=a[8]||384==h&&a[7].length<=a[8]&&8==o)))return n;1&h&&(n[2]=a[2],p|=1&o?0:4);var T=a[3];if(T){var P=n[3];n[3]=P?rn(P,T,a[4]):T,n[4]=P?fr(n[3],kr):a[4]}(T=a[5])&&(n[5]=(P=n[5])?yr(P,T,a[6]):T,n[6]=P?fr(n[5],kr):a[6]),(T=a[7])&&(n[7]=T),h&C&&(n[8]=null==n[8]?a[8]:Ir(n[8],a[8])),null==n[9]&&(n[9]=a[9]),n[0]=a[0],n[1]=p}(E,M),n=E[0],a=E[1],o=E[2],h=E[3],p=E[4],!(T=E[9]=E[9]===R?P?0:n.length:Tt(E[9]-G,0))&&24&a&&(a&=-25),a&&1!=a)j=8==a||16==a?function uf(n,a,o){var h=Ns(n);return function p(){for(var A=arguments.length,b=L(A),T=A,P=Ms(p);T--;)b[T]=arguments[T];var G=A<3&&b[0]!==P&&b[A-1]!==P?[]:fr(b,P);return(A-=G.length)<o?Su(n,a,Ba,p.placeholder,R,b,G,R,R,o-A):we(this&&this!==_&&this instanceof p?h:n,this,b)}}(n,a,T):32!=a&&33!=a||p.length?Ba.apply(R,E):function Mu(n,a,o,h){var p=1&a,A=Ns(n);return function b(){for(var T=-1,P=arguments.length,G=-1,m=h.length,w=L(m+P),M=this&&this!==_&&this instanceof b?A:n;++G<m;)w[G]=h[G];for(;P--;)w[G++]=arguments[++T];return we(M,p?o:this,w)}}(n,a,o,h);else var j=function Eh(n,a,o){var h=1&a,p=Ns(n);return function A(){return(this&&this!==_&&this instanceof A?p:n).apply(h?o:this,arguments)}}(n,a,o);return Eu((M?Mn:pf)(j,E),n,a)}function jl(n,a,o,h){return n===R||di(n,Qt[o])&&!Zt.call(h,o)?a:n}function vo(n,a,o,h,p,A){return Qe(n)&&Qe(a)&&(A.set(a,n),mu(n,a,R,vo,A),A.delete(a)),n}function zh(n){return No(n)?R:n}function Bl(n,a,o,h,p,A){var b=1&o,T=n.length,P=a.length;if(T!=P&&!(b&&P>T))return!1;var G=A.get(n),m=A.get(a);if(G&&m)return G==a&&m==n;var w=-1,M=!0,E=2&o?new ca:R;for(A.set(n,a),A.set(a,n);++w<T;){var j=n[w],Y=a[w];if(h)var B=b?h(Y,j,w,a,n,A):h(j,Y,w,n,a,A);if(B!==R){if(B)continue;M=!1;break}if(E){if(!ui(a,function(H,et){if(!Ma(E,et)&&(j===H||p(j,H,o,h,A)))return E.push(et)})){M=!1;break}}else if(j!==Y&&!p(j,Y,o,h,A)){M=!1;break}}return A.delete(n),A.delete(a),M}function gi(n){return ku(Vn(n,R,yf),n+"")}function Zl(n){return Kc(n,Pr,ki)}function _l(n){return Kc(n,Ln,Ul)}var Wl=ua?function(n){return ua.get(n)}:Mc;function Du(n){for(var a=n.name+"",o=la[a],h=Zt.call(la,a)?o.length:0;h--;){var p=o[h],A=p.func;if(null==A||A==n)return p.name}return a}function Ms(n){return(Zt.call(k,"placeholder")?k:n).placeholder}function jt(){var n=k.iteratee||Nc;return n=n===Nc?Vr:n,arguments.length?n(arguments[0],arguments[1]):n}function Pu(n,a){var o=n.__data__;return function Bh(n){var a=typeof n;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n}(a)?o["string"==typeof a?"string":"hash"]:o.map}function Yl(n){for(var a=Pr(n),o=a.length;o--;){var h=a[o],p=n[h];a[o]=[h,p,df(p)]}return a}function _a(n,a){var o=function $s(K,N){return null==K?R:K[N]}(n,a);return Ne(o)?o:R}var ki=no?function(n){return null==n?[]:(n=st(n),he(no(n),function(a){return wh.call(n,a)}))}:$u,Ul=no?function(n){for(var a=[];n;)on(a,ki(n)),n=ro(n);return a}:$u,Hr=tn;function hf(n,a,o){for(var h=-1,p=(a=Di(a,n)).length,A=!1;++h<p;){var b=Vt(a[h]);if(!(A=null!=n&&o(n,b)))break;n=n[b]}return A||++h!=p?A:!!(p=null==n?0:n.length)&&Uu(p)&&Fi(b,p)&&(Xt(n)||Fa(n))}function gf(n){return"function"!=typeof n.constructor||Ss(n)?{}:ps(ro(n))}function jh(n){return Xt(n)||Fa(n)||!!(kc&&n&&n[kc])}function Fi(n,a){var o=typeof n;return!!(a=null==a?In:a)&&("number"==o||"symbol"!=o&&ma.test(n))&&n>-1&&n%1==0&&n<a}function hn(n,a,o){if(!Qe(o))return!1;var h=typeof a;return!!("number"==h?vn(o)&&Fi(a,o.length):"string"==h&&a in o)&&di(o[a],n)}function Vl(n,a){if(Xt(n))return!1;var o=typeof n;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=n&&!Hn(n))||Lo.test(n)||!Qa.test(n)||null!=a&&n in st(a)}function Xl(n){var a=Du(n),o=k[a];if("function"!=typeof o||!(a in se.prototype))return!1;if(n===o)return!0;var h=Wl(o);return!!h&&n===h[0]}(eu&&Hr(new eu(new ArrayBuffer(1)))!=zn||io&&Hr(new io)!=$e||ru&&Hr(ru.resolve())!=Q||ds&&Hr(new ds)!=vt||vs&&Hr(new vs)!=Le)&&(Hr=function(n){var a=tn(n),o=a==W?n.constructor:R,h=o?Ee(o):"";if(h)switch(h){case vl:return zn;case It:return $e;case Da:return Q;case Oc:return vt;case nu:return Le}return a});var wr=je?vi:tl;function Ss(n){var a=n&&n.constructor;return n===("function"==typeof a&&a.prototype||Qt)}function df(n){return n==n&&!Qe(n)}function vf(n,a){return function(o){return null!=o&&o[n]===a&&(a!==R||n in st(o))}}function Vn(n,a,o){return a=Tt(a===R?n.length-1:a,0),function(){for(var h=arguments,p=-1,A=Tt(h.length-a,0),b=L(A);++p<A;)b[p]=h[a+p];p=-1;for(var T=L(a+1);++p<a;)T[p]=h[p];return T[a]=o(b),we(n,this,T)}}function Jl(n,a){return a.length<2?n:Ra(n,Sn(a,0,-1))}function _h(n,a){for(var o=n.length,h=Ir(a.length,o),p=sr(n);h--;){var A=a[h];n[h]=Fi(A,o)?p[A]:R}return n}function Kl(n,a){if(("constructor"!==a||"function"!=typeof n[a])&&"__proto__"!=a)return n[a]}var pf=Ei(Mn),Jr=xn||function(n,a){return _.setTimeout(n,a)},ku=Ei(yu);function Eu(n,a,o){var h=a+"";return ku(n,function Gh(n,a){var o=a.length;if(!o)return n;var h=o-1;return a[h]=(o>1?"& ":"")+a[h],a=a.join(o>2?", ":" "),n.replace(Do,"{\n/* [wrapped with "+a+"] */\n")}(h,function Wh(n,a){return Lt(Ja,function(o){var h="_."+o[0];a&o[1]&&!oi(n,h)&&n.push(h)}),n.sort()}(function ff(n){var a=n.match(qa);return a?a[1].split(Bs):[]}(h),o)))}function Ei(n){var a=0,o=0;return function(){var h=hl(),p=16-(h-o);if(o=h,p>0){if(++a>=800)return arguments[0]}else a=0;return n.apply(R,arguments)}}function Xi(n,a){var o=-1,h=n.length,p=h-1;for(a=a===R?h:a;++o<a;){var A=Dr(o,p),b=n[A];n[A]=n[o],n[o]=b}return n.length=a,n}var ne=function Je(n){var a=Wu(n,function(h){return 500===o.size&&o.clear(),h}),o=a.cache;return a}(function(n){var a=[];return 46===n.charCodeAt(0)&&a.push(""),n.replace(nl,function(o,h,p,A){a.push(p?A.replace(Po,"$1"):h||o)}),a});function Vt(n){if("string"==typeof n||Hn(n))return n;var a=n+"";return"0"==a&&1/n==-En?"-0":a}function Ee(n){if(null!=n){try{return _t.call(n)}catch(a){}try{return n+""}catch(a){}}return""}function mf(n){if(n instanceof se)return n.clone();var a=new qr(n.__wrapped__,n.__chain__);return a.__actions__=sr(n.__actions__),a.__index__=n.__index__,a.__values__=n.__values__,a}var Ql=te(function(n,a){return or(n)?Is(n,Lr(a,1,or,!0)):[]}),gn=te(function(n,a){var o=Tn(a);return or(o)&&(o=R),or(n)?Is(n,Lr(a,1,or,!0),jt(o,2)):[]}),Ou=te(function(n,a){var o=Tn(a);return or(o)&&(o=R),or(n)?Is(n,Lr(a,1,or,!0),R,o):[]});function ql(n,a,o){var h=null==n?0:n.length;if(!h)return-1;var p=null==o?0:Jt(o);return p<0&&(p=Tt(h+p,0)),ln(n,jt(a,3),p)}function mo(n,a,o){var h=null==n?0:n.length;if(!h)return-1;var p=h-1;return o!==R&&(p=Jt(o),p=o<0?Tt(h+p,0):Ir(p,h-1)),ln(n,jt(a,3),p,!0)}function yf(n){return null!=n&&n.length?Lr(n,1):[]}function ec(n){return n&&n.length?n[0]:R}var Cf=te(function(n){var a=ae(n,co);return a.length&&a[0]===n[0]?Ga(a):[]}),wf=te(function(n){var a=Tn(n),o=ae(n,co);return a===Tn(o)?a=R:o.pop(),o.length&&o[0]===n[0]?Ga(o,jt(a,2)):[]}),bf=te(function(n){var a=Tn(n),o=ae(n,co);return(a="function"==typeof a?a:R)&&o.pop(),o.length&&o[0]===n[0]?Ga(o,R,a):[]});function Tn(n){var a=null==n?0:n.length;return a?n[a-1]:R}var Kh=te(Nf);function Nf(n,a){return n&&n.length&&a&&a.length?Iu(n,a):n}var Io=gi(function(n,a){var o=null==n?0:n.length,h=ms(n,a);return ef(n,ae(a,function(p){return Fi(p,o)?+p:p}).sort(zl)),h});function Ya(n){return null==n?n:zc.call(n)}var Pf=te(function(n){return Be(Lr(n,1,or,!0))}),sg=te(function(n){var a=Tn(n);return or(a)&&(a=R),Be(Lr(n,1,or,!0),jt(a,2))}),ju=te(function(n){var a=Tn(n);return a="function"==typeof a?a:R,Be(Lr(n,1,or,!0),R,a)});function sc(n){if(!n||!n.length)return[];var a=0;return n=he(n,function(o){if(or(o))return a=Tt(o.length,a),!0}),Qs(a,function(o){return ae(n,Ve(o))})}function kf(n,a){if(!n||!n.length)return[];var o=sc(n);return null==a?o:ae(o,function(h){return we(a,R,h)})}var Ef=te(function(n,a){return or(n)?Is(n,a):[]}),ug=te(function(n){return Cu(he(n,or))}),zf=te(function(n){var a=Tn(n);return or(a)&&(a=R),Cu(he(n,or),jt(a,2))}),lg=te(function(n){var a=Tn(n);return a="function"==typeof a?a:R,Cu(he(n,or),R,a)}),cg=te(sc),gg=te(function(n){var a=n.length,o=a>1?n[a-1]:R;return o="function"==typeof o?(n.pop(),o):R,kf(n,o)});function Xn(n){var a=k(n);return a.__chain__=!0,a}function Ts(n,a){return a(n)}var dg=gi(function(n){var a=n.length,o=a?n[0]:0,h=this.__wrapped__,p=function(A){return ms(A,n)};return!(a>1||this.__actions__.length)&&h instanceof se&&Fi(o)?((h=h.slice(o,+o+(a?1:0))).__actions__.push({func:Ts,args:[p],thisArg:R}),new qr(h,this.__chain__).thru(function(A){return a&&!A.length&&A.push(R),A})):this.thru(p)}),Bf=fo(function(n,a,o){Zt.call(n,o)?++n[o]:ci(n,o,1)}),Ag=xu(ql),yg=xu(mo);function Wf(n,a){return(Xt(n)?Lt:Mi)(n,jt(a,3))}function uc(n,a){return(Xt(n)?er:so)(n,jt(a,3))}var Yt=fo(function(n,a,o){Zt.call(n,o)?n[o].push(a):ci(n,o,[a])}),wg=te(function(n,a,o){var h=-1,p="function"==typeof a,A=vn(n)?L(n.length):[];return Mi(n,function(b){A[++h]=p?we(a,b,o):Ti(b,a,o)}),A}),Yf=fo(function(n,a,o){ci(n,o,a)});function Zu(n,a){return(Xt(n)?ae:Sl)(n,jt(a,3))}var xg=fo(function(n,a,o){n[o?0:1].push(a)},function(){return[[],[]]}),Vf=te(function(n,a){if(null==n)return[];var o=a.length;return o>1&&hn(n,a[0],a[1])?a=[]:o>2&&hn(a[0],a[1],a[2])&&(a=[a[0]]),tf(n,Lr(a,1),[])}),_u=tu||function(){return _.Date.now()};function lc(n,a,o){return a=o?R:a,Cr(n,C,R,R,R,R,a=n&&null==a?n.length:a)}function yo(n,a){var o;if("function"!=typeof a)throw new St(Se);return n=Jt(n),function(){return--n>0&&(o=a.apply(this,arguments)),n<=1&&(a=R),o}}var Co=te(function(n,a,o){var h=1;if(o.length){var p=fr(o,Ms(Co));h|=32}return Cr(n,h,a,o,p)}),Hf=te(function(n,a,o){var h=3;if(o.length){var p=fr(o,Ms(Hf));h|=32}return Cr(a,h,n,o,p)});function Kf(n,a,o){var h,p,A,b,T,P,G=0,m=!1,w=!1,M=!0;if("function"!=typeof n)throw new St(Se);function E(ht){var wt=h,ee=p;return h=p=R,G=ht,b=n.apply(ee,wt)}function j(ht){return G=ht,T=Jr(H,a),m?E(ht):b}function B(ht){var wt=ht-P;return P===R||wt>=a||wt<0||w&&ht-G>=A}function H(){var ht=_u();if(B(ht))return et(ht);T=Jr(H,function Y(ht){var le=a-(ht-P);return w?Ir(le,A-(ht-G)):le}(ht))}function et(ht){return T=R,M&&h?E(ht):(h=p=R,b)}function gt(){var ht=_u(),wt=B(ht);if(h=arguments,p=this,P=ht,wt){if(T===R)return j(P);if(w)return Pi(T),T=Jr(H,a),E(P)}return T===R&&(T=Jr(H,a)),b}return a=ri(a)||0,Qe(o)&&(m=!!o.leading,A=(w="maxWait"in o)?Tt(ri(o.maxWait)||0,a):A,M="trailing"in o?!!o.trailing:M),gt.cancel=function at(){T!==R&&Pi(T),G=0,h=P=p=T=R},gt.flush=function ft(){return T===R?b:et(_u())},gt}var Dg=te(function(n,a){return wl(n,1,a)}),fc=te(function(n,a,o){return wl(n,ri(a)||0,o)});function Wu(n,a){if("function"!=typeof n||null!=a&&"function"!=typeof a)throw new St(Se);var o=function(){var h=arguments,p=a?a.apply(this,h):h[0],A=o.cache;if(A.has(p))return A.get(p);var b=n.apply(this,h);return o.cache=A.set(p,b)||A,b};return o.cache=new(Wu.Cache||xt),o}function Yu(n){if("function"!=typeof n)throw new St(Se);return function(){var a=arguments;switch(a.length){case 0:return!n.call(this);case 1:return!n.call(this,a[0]);case 2:return!n.call(this,a[0],a[1]);case 3:return!n.call(this,a[0],a[1],a[2])}return!n.apply(this,a)}}Wu.Cache=xt;var kg=hi(function(n,a){var o=(a=1==a.length&&Xt(a[0])?ae(a[0],cn(jt())):ae(Lr(a,1),cn(jt()))).length;return te(function(h){for(var p=-1,A=Ir(h.length,o);++p<A;)h[p]=a[p].call(this,h[p]);return we(n,this,h)})}),gc=te(function(n,a){var o=fr(a,Ms(gc));return Cr(n,32,R,a,o)}),dc=te(function(n,a){var o=fr(a,Ms(dc));return Cr(n,64,R,a,o)}),Hi=gi(function(n,a){return Cr(n,256,R,R,R,a)});function di(n,a){return n===a||n!=n&&a!=a}var Fg=va(it),Ug=va(function(n,a){return n>=a}),Fa=xl(function(){return arguments}())?xl:function(n){return nr(n)&&Zt.call(n,"callee")&&!wh.call(n,"callee")},Xt=L.isArray,Ds=nt?cn(nt):function fu(n){return nr(n)&&tn(n)==tr};function vn(n){return null!=n&&Uu(n.length)&&!vi(n)}function or(n){return nr(n)&&vn(n)}var zi=bh||tl,wo=Ct?cn(Ct):function Nl(n){return nr(n)&&tn(n)==Gi};function vc(n){if(!nr(n))return!1;var a=tn(n);return a==$i||"[object DOMException]"==a||"string"==typeof n.message&&"string"==typeof n.name&&!No(n)}function vi(n){if(!Qe(n))return!1;var a=tn(n);return a==Sr||a==Jn||"[object AsyncFunction]"==a||"[object Proxy]"==a}function ge(n){return"number"==typeof n&&n==Jt(n)}function Uu(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=In}function Qe(n){var a=typeof n;return null!=n&&("object"==a||"function"==a)}function nr(n){return null!=n&&"object"==typeof n}var Vu=Nt?cn(Nt):function ws(n){return nr(n)&&Hr(n)==$e};function xo(n){return"number"==typeof n||nr(n)&&tn(n)==x}function No(n){if(!nr(n)||tn(n)!=W)return!1;var a=ro(n);if(null===a)return!0;var o=Zt.call(a,"constructor")&&a.constructor;return"function"==typeof o&&o instanceof o&&_t.call(o)==$n}var pc=bt?cn(bt):function gu(n){return nr(n)&&tn(n)==lt},qf=Ge?cn(Ge):function du(n){return nr(n)&&Hr(n)==vt};function Xu(n){return"string"==typeof n||!Xt(n)&&nr(n)&&tn(n)==Ot}function Hn(n){return"symbol"==typeof n||nr(n)&&tn(n)==ve}var Ps=Ye?cn(Ye):function Sh(n){return nr(n)&&Uu(n.length)&&!!Re[tn(n)]},id=va(pu),ad=va(function(n,a){return n<=a});function $f(n){if(!n)return[];if(vn(n))return Xu(n)?hr(n):sr(n);if(hs&&n[hs])return function be(K){for(var N,L=[];!(N=K.next()).done;)L.push(N.value);return L}(n[hs]());var a=Hr(n);return(a==$e?aa:a==vt?sa:ks)(n)}function Ki(n){return n?(n=ri(n))===En||n===-En?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function Jt(n){var a=Ki(n),o=a%1;return a==a?o?a-o:a:0}function th(n){return n?ha(Jt(n),0,_e):0}function ri(n){if("number"==typeof n)return n;if(Hn(n))return NaN;if(Qe(n)){var a="function"==typeof n.valueOf?n.valueOf():n;n=Qe(a)?a+"":a}if("string"!=typeof n)return 0===n?n:+n;n=Na(n);var o=_s.test(n);return o||zo.test(n)?S(n.slice(2),o?2:8):Eo.test(n)?NaN:+n}function eh(n){return ei(n,Ln(n))}function Ce(n){return null==n?"":Ht(n)}var od=xs(function(n,a){if(Ss(a)||vn(a))ei(a,Pr(a),n);else for(var o in a)Zt.call(a,o)&&za(n,o,a[o])}),rh=xs(function(n,a){ei(a,Ln(a),n)}),Hu=xs(function(n,a,o,h){ei(a,Ln(a),n,h)}),ud=xs(function(n,a,o,h){ei(a,Pr(a),n,h)}),mc=gi(ms),cd=te(function(n,a){n=st(n);var o=-1,h=a.length,p=h>2?a[2]:R;for(p&&hn(a[0],a[1],p)&&(h=1);++o<h;)for(var A=a[o],b=Ln(A),T=-1,P=b.length;++T<P;){var G=b[T],m=n[G];(m===R||di(m,Qt[G])&&!Zt.call(n,G))&&(n[G]=A[G])}return n}),fd=te(function(n){return n.push(R,vo),we(nh,R,n)});function yc(n,a,o){var h=null==n?R:Ra(n,a);return h===R?o:h}function Cc(n,a){return null!=n&&hf(n,a,ti)}var md=Gl(function(n,a,o){null!=a&&"function"!=typeof a.toString&&(a=ye.call(a)),n[a]=o},Ku(Dn)),Id=Gl(function(n,a,o){null!=a&&"function"!=typeof a.toString&&(a=ye.call(a)),Zt.call(n,a)?n[a].push(o):n[a]=[o]},jt),Ad=te(Ti);function Pr(n){return vn(n)?fa(n):vu(n)}function Ln(n){return vn(n)?fa(n,!0):function Ml(n){if(!Qe(n))return function Ui(n){var a=[];if(null!=n)for(var o in st(n))a.push(o);return a}(n);var a=Ss(n),o=[];for(var h in n)"constructor"==h&&(a||!Zt.call(n,h))||o.push(h);return o}(n)}var wd=xs(function(n,a,o){mu(n,a,o)}),nh=xs(function(n,a,o,h){mu(n,a,o,h)}),bd=gi(function(n,a){var o={};if(null==n)return o;var h=!1;a=ae(a,function(A){return A=Di(A,n),h||(h=A.length>1),A}),ei(n,_l(n),o),h&&(o=Wn(o,7,zh));for(var p=a.length;p--;)qt(o,a[p]);return o}),Nd=gi(function(n,a){return null==n?{}:function ga(n,a){return Dl(n,a,function(o,h){return Cc(n,h)})}(n,a)});function ih(n,a){if(null==n)return{};var o=ae(_l(n),function(h){return[h]});return a=jt(a),Dl(n,o,function(h,p){return a(h,p[0])})}var ah=Lu(Pr),sh=Lu(Ln);function ks(n){return null==n?[]:Uo(n,Pr(n))}var zd=da(function(n,a,o){return a=a.toLowerCase(),n+(o?lh(a):a)});function lh(n){return xc(Ce(n).toLowerCase())}function ch(n){return(n=Ce(n))&&n.replace(Oo,li).replace(Js,"")}var jd=da(function(n,a,o){return n+(o?"-":"")+a.toLowerCase()}),Bd=da(function(n,a,o){return n+(o?" ":"")+a.toLowerCase()}),Zd=of("toLowerCase"),Xd=da(function(n,a,o){return n+(o?"_":"")+a.toLowerCase()}),wc=da(function(n,a,o){return n+(o?" ":"")+xc(a)}),nv=da(function(n,a,o){return n+(o?" ":"")+a.toUpperCase()}),xc=of("toUpperCase");function fh(n,a,o){return n=Ce(n),(a=o?R:a)===R?function ll(K){return si.test(K)}(n)?function qo(K){return K.match(ul)||[]}(n):function un(K){return K.match($a)||[]}(n):n.match(a)||[]}var hh=te(function(n,a){try{return we(n,R,a)}catch(o){return vc(o)?o:new $(o)}}),iv=gi(function(n,a){return Lt(a,function(o){o=Vt(o),ci(n,o,Co(n[o],n))}),n});function Ku(n){return function(){return n}}var ov=Yi(),uv=Yi(!0);function Dn(n){return n}function Nc(n){return Vr("function"==typeof n?n:Wn(n,1))}var vh=te(function(n,a){return function(o){return Ti(o,n,a)}}),cv=te(function(n,a){return function(o){return Ti(n,o,a)}});function Qu(n,a,o){var h=Pr(a),p=fi(a,h);null==o&&(!Qe(a)||!p.length&&h.length)&&(o=a,a=n,n=this,p=fi(a,Pr(a)));var A=!(Qe(o)&&"chain"in o&&!o.chain),b=vi(n);return Lt(p,function(T){var P=a[T];n[T]=P,b&&(n.prototype[T]=function(){var G=this.__chain__;if(A||G){var m=n(this.__wrapped__),w=m.__actions__=sr(this.__actions__);return w.push({func:P,args:arguments,thisArg:n}),m.__chain__=G,m}return P.apply(n,on([this.value()],arguments))})}),n}function Mc(){}var fv=Nu(ae),Ih=Nu(re),hv=Nu(ui);function Ah(n){return Vl(n)?Ve(Vt(n)):function Pl(n){return function(a){return Ra(a,n)}}(n)}var yh=Za(),Ch=Za(!0);function $u(){return[]}function tl(){return!1}var Av=ho(function(n,a){return n+a},0),Sv=Tu("ceil"),yv=ho(function(n,a){return n/a},1),Cv=Tu("floor"),s=ho(function(n,a){return n*a},1),u=Tu("round"),l=ho(function(n,a){return n-a},0);return k.after=function Xf(n,a){if("function"!=typeof a)throw new St(Se);return n=Jt(n),function(){if(--n<1)return a.apply(this,arguments)}},k.ary=lc,k.assign=od,k.assignIn=rh,k.assignInWith=Hu,k.assignWith=ud,k.at=mc,k.before=yo,k.bind=Co,k.bindAll=iv,k.bindKey=Hf,k.castArray=function jg(){if(!arguments.length)return[];var n=arguments[0];return Xt(n)?n:[n]},k.chain=Xn,k.chunk=function Yh(n,a,o){a=(o?hn(n,a,o):a===R)?1:Tt(Jt(a),0);var h=null==n?0:n.length;if(!h||a<1)return[];for(var p=0,A=0,b=L(gs(h/a));p<h;)b[A++]=Sn(n,p,p+=a);return b},k.compact=function Fh(n){for(var a=-1,o=null==n?0:n.length,h=0,p=[];++a<o;){var A=n[a];A&&(p[h++]=A)}return p},k.concat=function zu(){var n=arguments.length;if(!n)return[];for(var a=L(n-1),o=arguments[0],h=n;h--;)a[h-1]=arguments[h];return on(Xt(o)?sr(o):[o],Lr(a,1))},k.cond=function av(n){var a=null==n?0:n.length,o=jt();return n=a?ae(n,function(h){if("function"!=typeof h[1])throw new St(Se);return[o(h[0]),h[1]]}):[],te(function(h){for(var p=-1;++p<a;){var A=n[p];if(we(A[0],this,h))return we(A[1],this,h)}})},k.conforms=function sv(n){return function Xc(n){var a=Pr(n);return function(o){return Cl(o,n,a)}}(Wn(n,1))},k.constant=Ku,k.countBy=Bf,k.create=function ld(n,a){var o=ps(n);return null==a?o:yl(o,a)},k.curry=function Jf(n,a,o){var h=Cr(n,8,R,R,R,R,R,a=o?R:a);return h.placeholder=Jf.placeholder,h},k.curryRight=function cc(n,a,o){var h=Cr(n,16,R,R,R,R,R,a=o?R:a);return h.placeholder=cc.placeholder,h},k.debounce=Kf,k.defaults=cd,k.defaultsDeep=fd,k.defer=Dg,k.delay=fc,k.difference=Ql,k.differenceBy=gn,k.differenceWith=Ou,k.drop=function Ru(n,a,o){var h=null==n?0:n.length;return h?Sn(n,(a=o||a===R?1:Jt(a))<0?0:a,h):[]},k.dropRight=function If(n,a,o){var h=null==n?0:n.length;return h?Sn(n,0,(a=h-(a=o||a===R?1:Jt(a)))<0?0:a):[]},k.dropRightWhile=function Af(n,a){return n&&n.length?lo(n,jt(a,3),!0,!0):[]},k.dropWhile=function Uh(n,a){return n&&n.length?lo(n,jt(a,3),!0):[]},k.fill=function Vh(n,a,o,h){var p=null==n?0:n.length;return p?(o&&"number"!=typeof o&&hn(n,a,o)&&(o=0,h=p),function Jc(n,a,o,h){var p=n.length;for((o=Jt(o))<0&&(o=-o>p?0:p+o),(h=h===R||h>p?p:Jt(h))<0&&(h+=p),h=o>h?0:th(h);o<h;)n[o++]=a;return n}(n,a,o,h)):[]},k.filter=function Ig(n,a){return(Xt(n)?he:bl)(n,jt(a,3))},k.flatMap=function oc(n,a){return Lr(Zu(n,a),1)},k.flatMapDeep=function _f(n,a){return Lr(Zu(n,a),En)},k.flatMapDepth=function Cg(n,a,o){return o=o===R?1:Jt(o),Lr(Zu(n,a),o)},k.flatten=yf,k.flattenDeep=function Xh(n){return null!=n&&n.length?Lr(n,En):[]},k.flattenDepth=function $l(n,a){return null!=n&&n.length?Lr(n,a=a===R?1:Jt(a)):[]},k.flip=function hc(n){return Cr(n,512)},k.flow=ov,k.flowRight=uv,k.fromPairs=function tc(n){for(var a=-1,o=null==n?0:n.length,h={};++a<o;){var p=n[a];h[p[0]]=p[1]}return h},k.functions=function Ua(n){return null==n?[]:fi(n,Pr(n))},k.functionsIn=function vd(n){return null==n?[]:fi(n,Ln(n))},k.groupBy=Yt,k.initial=function Wa(n){return null!=n&&n.length?Sn(n,0,-1):[]},k.intersection=Cf,k.intersectionBy=wf,k.intersectionWith=bf,k.invert=md,k.invertBy=Id,k.invokeMap=wg,k.iteratee=Nc,k.keyBy=Yf,k.keys=Pr,k.keysIn=Ln,k.map=Zu,k.mapKeys=function yd(n,a){var o={};return a=jt(a,3),Si(n,function(h,p,A){ci(o,a(h,p,A),h)}),o},k.mapValues=function Cd(n,a){var o={};return a=jt(a,3),Si(n,function(h,p,A){ci(o,p,a(h,p,A))}),o},k.matches=function dh(n){return $c(Wn(n,1))},k.matchesProperty=function lv(n,a){return Tl(n,Wn(a,1))},k.memoize=Wu,k.merge=wd,k.mergeWith=nh,k.method=vh,k.methodOf=cv,k.mixin=Qu,k.negate=Yu,k.nthArg=function mh(n){return n=Jt(n),te(function(a){return Ll(a,n)})},k.omit=bd,k.omitBy=function xd(n,a){return ih(n,Yu(jt(a)))},k.once=function Pg(n){return yo(2,n)},k.orderBy=function bg(n,a,o,h){return null==n?[]:(Xt(a)||(a=null==a?[]:[a]),Xt(o=h?R:o)||(o=null==o?[]:[o]),tf(n,a,o))},k.over=fv,k.overArgs=kg,k.overEvery=Ih,k.overSome=hv,k.partial=gc,k.partialRight=dc,k.partition=xg,k.pick=Nd,k.pickBy=ih,k.property=Ah,k.propertyOf=function qu(n){return function(a){return null==n?R:Ra(n,a)}},k.pull=Kh,k.pullAll=Nf,k.pullAllBy=function Mf(n,a,o){return n&&n.length&&a&&a.length?Iu(n,a,jt(o,2)):n},k.pullAllWith=function Qh(n,a,o){return n&&n.length&&a&&a.length?Iu(n,a,R,o):n},k.pullAt=Io,k.range=yh,k.rangeRight=Ch,k.rearg=Hi,k.reject=function Uf(n,a){return(Xt(n)?he:bl)(n,Yu(jt(a,3)))},k.remove=function Gu(n,a){var o=[];if(!n||!n.length)return o;var h=-1,p=[],A=n.length;for(a=jt(a,3);++h<A;){var b=n[h];a(b,h,n)&&(o.push(b),p.push(h))}return ef(n,p),o},k.rest=function Eg(n,a){if("function"!=typeof n)throw new St(Se);return te(n,a=a===R?a:Jt(a))},k.reverse=Ya,k.sampleSize=function Sg(n,a,o){return a=(o?hn(n,a,o):a===R)?1:Jt(a),(Xt(n)?Fc:Ph)(n,a)},k.set=function Sd(n,a,o){return null==n?n:Mt(n,a,o)},k.setWith=function Td(n,a,o,h){return h="function"==typeof h?h:R,null==n?n:Mt(n,a,o,h)},k.shuffle=function Tg(n){return(Xt(n)?Uc:Fn)(n)},k.slice=function nc(n,a,o){var h=null==n?0:n.length;return h?(o&&"number"!=typeof o&&hn(n,a,o)?(a=0,o=h):(a=null==a?0:Jt(a),o=o===R?h:Jt(o)),Sn(n,a,o)):[]},k.sortBy=Vf,k.sortedUniq=function ic(n){return n&&n.length?Li(n):[]},k.sortedUniqBy=function rg(n,a){return n&&n.length?Li(n,jt(a,2)):[]},k.split=function Hd(n,a,o){return o&&"number"!=typeof o&&hn(n,a,o)&&(a=o=R),(o=o===R?_e:o>>>0)?(n=Ce(n))&&("string"==typeof a||null!=a&&!pc(a))&&!(a=Ht(a))&&Bi(n)?ke(hr(n),0,o):n.split(a,o):[]},k.spread=function zg(n,a){if("function"!=typeof n)throw new St(Se);return a=null==a?0:Tt(Jt(a),0),te(function(o){var h=o[a],p=ke(o,0,a);return h&&on(p,h),we(n,this,p)})},k.tail=function ng(n){var a=null==n?0:n.length;return a?Sn(n,1,a):[]},k.take=function Lf(n,a,o){return n&&n.length?Sn(n,0,(a=o||a===R?1:Jt(a))<0?0:a):[]},k.takeRight=function ig(n,a,o){var h=null==n?0:n.length;return h?Sn(n,(a=h-(a=o||a===R?1:Jt(a)))<0?0:a,h):[]},k.takeRightWhile=function Df(n,a){return n&&n.length?lo(n,jt(a,3),!1,!0):[]},k.takeWhile=function ag(n,a){return n&&n.length?lo(n,jt(a,3)):[]},k.tap=function dn(n,a){return a(n),n},k.throttle=function Og(n,a,o){var h=!0,p=!0;if("function"!=typeof n)throw new St(Se);return Qe(o)&&(h="leading"in o?!!o.leading:h,p="trailing"in o?!!o.trailing:p),Kf(n,a,{leading:h,maxWait:a,trailing:p})},k.thru=Ts,k.toArray=$f,k.toPairs=ah,k.toPairsIn=sh,k.toPath=function mv(n){return Xt(n)?ae(n,Vt):Hn(n)?[n]:sr(ne(Ce(n)))},k.toPlainObject=eh,k.transform=function Ld(n,a,o){var h=Xt(n),p=h||zi(n)||Ps(n);if(a=jt(a,4),null==o){var A=n&&n.constructor;o=p?h?new A:[]:Qe(n)&&vi(A)?ps(ro(n)):{}}return(p?Lt:Si)(n,function(b,T,P){return a(o,b,T,P)}),o},k.unary=function Rg(n){return lc(n,1)},k.union=Pf,k.unionBy=sg,k.unionWith=ju,k.uniq=function Bu(n){return n&&n.length?Be(n):[]},k.uniqBy=function ac(n,a){return n&&n.length?Be(n,jt(a,2)):[]},k.uniqWith=function og(n,a){return a="function"==typeof a?a:R,n&&n.length?Be(n,R,a):[]},k.unset=function oh(n,a){return null==n||qt(n,a)},k.unzip=sc,k.unzipWith=kf,k.update=function Dd(n,a,o){return null==n?n:rf(n,a,kl(o))},k.updateWith=function uh(n,a,o,h){return h="function"==typeof h?h:R,null==n?n:rf(n,a,kl(o),h)},k.values=ks,k.valuesIn=function Mo(n){return null==n?[]:Uo(n,Ln(n))},k.without=Ef,k.words=fh,k.wrap=function Gg(n,a){return gc(kl(a),n)},k.xor=ug,k.xorBy=zf,k.xorWith=lg,k.zip=cg,k.zipObject=function fg(n,a){return wu(n||[],a||[],za)},k.zipObjectDeep=function hg(n,a){return wu(n||[],a||[],Mt)},k.zipWith=gg,k.entries=ah,k.entriesIn=sh,k.extend=rh,k.extendWith=Hu,Qu(k,k),k.add=Av,k.attempt=hh,k.camelCase=zd,k.capitalize=lh,k.ceil=Sv,k.clamp=function Pd(n,a,o){return o===R&&(o=a,a=R),o!==R&&(o=(o=ri(o))==o?o:0),a!==R&&(a=(a=ri(a))==a?a:0),ha(ri(n),a,o)},k.clone=function Bg(n){return Wn(n,4)},k.cloneDeep=function _g(n){return Wn(n,5)},k.cloneDeepWith=function Wg(n,a){return Wn(n,5,a="function"==typeof a?a:R)},k.cloneWith=function Zg(n,a){return Wn(n,4,a="function"==typeof a?a:R)},k.conformsTo=function Yg(n,a){return null==a||Cl(n,a,Pr(a))},k.deburr=ch,k.defaultTo=function gh(n,a){return null==n||n!=n?a:n},k.divide=yv,k.endsWith=function Od(n,a,o){n=Ce(n),a=Ht(a);var h=n.length,p=o=o===R?h:ha(Jt(o),0,h);return(o-=a.length)>=0&&n.slice(o,p)==a},k.eq=di,k.escape=function Rd(n){return(n=Ce(n))&&Os.test(n)?n.replace(Ii,qn):n},k.escapeRegExp=function Gd(n){return(n=Ce(n))&&js.test(n)?n.replace(Gs,"\\$&"):n},k.every=function Zf(n,a,o){var h=Xt(n)?re:Hc;return o&&hn(n,a,o)&&(a=R),h(n,jt(a,3))},k.find=Ag,k.findIndex=ql,k.findKey=function hd(n,a){return Qr(n,jt(a,3),Si)},k.findLast=yg,k.findLastIndex=mo,k.findLastKey=function Ju(n,a){return Qr(n,jt(a,3),ys)},k.floor=Cv,k.forEach=Wf,k.forEachRight=uc,k.forIn=function Ic(n,a){return null==n?n:As(n,jt(a,3),Ln)},k.forInRight=function gd(n,a){return null==n?n:cu(n,jt(a,3),Ln)},k.forOwn=function dd(n,a){return n&&Si(n,jt(a,3))},k.forOwnRight=function Ac(n,a){return n&&ys(n,jt(a,3))},k.get=yc,k.gt=Fg,k.gte=Ug,k.has=function pd(n,a){return null!=n&&hf(n,a,Yn)},k.hasIn=Cc,k.head=ec,k.identity=Dn,k.includes=function Ls(n,a,o,h){n=vn(n)?n:ks(n),o=o&&!h?Jt(o):0;var p=n.length;return o<0&&(o=Tt(p+o,0)),Xu(n)?o<=p&&n.indexOf(a,o)>-1:!!p&&Rt(n,a,o)>-1},k.indexOf=function rc(n,a,o){var h=null==n?0:n.length;if(!h)return-1;var p=null==o?0:Jt(o);return p<0&&(p=Tt(h+p,0)),Rt(n,a,p)},k.inRange=function kd(n,a,o){return a=Ki(a),o===R?(o=a,a=0):o=Ki(o),function Qc(n,a,o){return n>=Ir(a,o)&&n<Tt(a,o)}(n=ri(n),a,o)},k.invoke=Ad,k.isArguments=Fa,k.isArray=Xt,k.isArrayBuffer=Ds,k.isArrayLike=vn,k.isArrayLikeObject=or,k.isBoolean=function Fu(n){return!0===n||!1===n||nr(n)&&tn(n)==We},k.isBuffer=zi,k.isDate=wo,k.isElement=function Vg(n){return nr(n)&&1===n.nodeType&&!No(n)},k.isEmpty=function Xg(n){if(null==n)return!0;if(vn(n)&&(Xt(n)||"string"==typeof n||"function"==typeof n.splice||zi(n)||Ps(n)||Fa(n)))return!n.length;var a=Hr(n);if(a==$e||a==vt)return!n.size;if(Ss(n))return!vu(n).length;for(var o in n)if(Zt.call(n,o))return!1;return!0},k.isEqual=function Ji(n,a){return Cs(n,a)},k.isEqualWith=function Hg(n,a,o){var h=(o="function"==typeof o?o:R)?o(n,a):R;return h===R?Cs(n,a,R,o):!!h},k.isError=vc,k.isFinite=function bo(n){return"number"==typeof n&&cl(n)},k.isFunction=vi,k.isInteger=ge,k.isLength=Uu,k.isMap=Vu,k.isMatch=function Jg(n,a){return n===a||hu(n,a,Yl(a))},k.isMatchWith=function Kg(n,a,o){return o="function"==typeof o?o:R,hu(n,a,Yl(a),o)},k.isNaN=function Qg(n){return xo(n)&&n!=+n},k.isNative=function qg(n){if(wr(n))throw new $("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ne(n)},k.isNil=function $g(n){return null==n},k.isNull=function Qf(n){return null===n},k.isNumber=xo,k.isObject=Qe,k.isObjectLike=nr,k.isPlainObject=No,k.isRegExp=pc,k.isSafeInteger=function td(n){return ge(n)&&n>=-In&&n<=In},k.isSet=qf,k.isString=Xu,k.isSymbol=Hn,k.isTypedArray=Ps,k.isUndefined=function ed(n){return n===R},k.isWeakMap=function rd(n){return nr(n)&&Hr(n)==Le},k.isWeakSet=function nd(n){return nr(n)&&"[object WeakSet]"==tn(n)},k.join=function Hh(n,a){return null==n?"":fl.call(n,a)},k.kebabCase=jd,k.last=Tn,k.lastIndexOf=function Jh(n,a,o){var h=null==n?0:n.length;if(!h)return-1;var p=h;return o!==R&&(p=(p=Jt(o))<0?Tt(h+p,0):Ir(p,h-1)),a==a?function Ko(K,N,L){for(var Z=L+1;Z--;)if(K[Z]===N)return Z;return Z}(n,a,p):ln(n,Ue,p,!0)},k.lowerCase=Bd,k.lowerFirst=Zd,k.lt=id,k.lte=ad,k.max=function wv(n){return n&&n.length?oo(n,Dn,it):R},k.maxBy=function bv(n,a){return n&&n.length?oo(n,jt(a,2),it):R},k.mean=function t(n){return lr(n,Dn)},k.meanBy=function e(n,a){return lr(n,jt(a,2))},k.min=function r(n){return n&&n.length?oo(n,Dn,pu):R},k.minBy=function i(n,a){return n&&n.length?oo(n,jt(a,2),pu):R},k.stubArray=$u,k.stubFalse=tl,k.stubObject=function gv(){return{}},k.stubString=function dv(){return""},k.stubTrue=function vv(){return!0},k.multiply=s,k.nth=function xf(n,a){return n&&n.length?Ll(n,Jt(a)):R},k.noConflict=function ph(){return _._===this&&(_._=Yr),this},k.noop=Mc,k.now=_u,k.pad=function _d(n,a,o){n=Ce(n);var h=(a=Jt(a))?Zi(n):0;if(!a||h>=a)return n;var p=(a-h)/2;return go(La(p),o)+n+go(gs(p),o)},k.padEnd=function Wd(n,a,o){n=Ce(n);var h=(a=Jt(a))?Zi(n):0;return a&&h<a?n+go(a-h,o):n},k.padStart=function Yd(n,a,o){n=Ce(n);var h=(a=Jt(a))?Zi(n):0;return a&&h<a?go(a-h,o)+n:n},k.parseInt=function Fd(n,a,o){return o||null==a?a=0:a&&(a=+a),gl(Ce(n).replace(On,""),a||0)},k.random=function Ed(n,a,o){if(o&&"boolean"!=typeof o&&hn(n,a,o)&&(a=o=R),o===R&&("boolean"==typeof a?(o=a,a=R):"boolean"==typeof n&&(o=n,n=R)),n===R&&a===R?(n=0,a=1):(n=Ki(n),a===R?(a=n,n=0):a=Ki(a)),n>a){var h=n;n=a,a=h}if(o||n%1||a%1){var p=dl();return Ir(n+p*(a-n+y("1e-"+((p+"").length-1))),a)}return Dr(n,a)},k.reduce=function Ff(n,a,o){var h=Xt(n)?bi:xi,p=arguments.length<3;return h(n,jt(a,4),o,p,Mi)},k.reduceRight=function Ng(n,a,o){var h=Xt(n)?Wr:xi,p=arguments.length<3;return h(n,jt(a,4),o,p,so)},k.repeat=function Ud(n,a,o){return a=(o?hn(n,a,o):a===R)?1:Jt(a),Au(Ce(n),a)},k.replace=function Vd(){var n=arguments,a=Ce(n[0]);return n.length<3?a:a.replace(n[1],n[2])},k.result=function Md(n,a,o){var h=-1,p=(a=Di(a,n)).length;for(p||(p=1,n=R);++h<p;){var A=null==n?R:n[Vt(a[h])];A===R&&(h=p,A=o),n=vi(A)?A.call(n):A}return n},k.round=u,k.runInContext=K,k.sample=function Mg(n){return(Xt(n)?uu:Dh)(n)},k.size=function Lg(n){if(null==n)return 0;if(vn(n))return Xu(n)?Zi(n):n.length;var a=Hr(n);return a==$e||a==vt?n.size:vu(n).length},k.snakeCase=Xd,k.some=function Ao(n,a,o){var h=Xt(n)?ui:ja;return o&&hn(n,a,o)&&(a=R),h(n,jt(a,3))},k.sortedIndex=function qh(n,a){return en(n,a)},k.sortedIndexBy=function Sf(n,a,o){return Xr(n,a,jt(o,2))},k.sortedIndexOf=function Tf(n,a){var o=null==n?0:n.length;if(o){var h=en(n,a);if(h<o&&di(n[h],a))return h}return-1},k.sortedLastIndex=function $h(n,a){return en(n,a,!0)},k.sortedLastIndexBy=function tg(n,a,o){return Xr(n,a,jt(o,2),!0)},k.sortedLastIndexOf=function eg(n,a){if(null!=n&&n.length){var h=en(n,a,!0)-1;if(di(n[h],a))return h}return-1},k.startCase=wc,k.startsWith=function bc(n,a,o){return n=Ce(n),o=null==o?0:ha(Jt(o),0,n.length),a=Ht(a),n.slice(o,o+a.length)==a},k.subtract=l,k.sum=function f(n){return n&&n.length?Ks(n,Dn):0},k.sumBy=function d(n,a){return n&&n.length?Ks(n,jt(a,2)):0},k.template=function Jd(n,a,o){var h=k.templateSettings;o&&hn(n,a,o)&&(a=R),n=Ce(n),a=Hu({},a,h,jl);var T,P,p=Hu({},a.imports,h.imports,jl),A=Pr(p),b=Uo(p,A),G=0,m=a.interpolate||Ia,w="__p += '",M=dt((a.escape||Ia).source+"|"+m.source+"|"+(m===To?ko:Ia).source+"|"+(a.evaluate||Ia).source+"|$","g"),E="//# sourceURL="+(Zt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yo+"]")+"\n";n.replace(M,function(B,H,et,at,ft,gt){return et||(et=at),w+=n.slice(G,gt).replace(Ws,Xo),H&&(T=!0,w+="' +\n__e("+H+") +\n'"),ft&&(P=!0,w+="';\n"+ft+";\n__p += '"),et&&(w+="' +\n((__t = ("+et+")) == null ? '' : __t) +\n'"),G=gt+B.length,B}),w+="';\n";var j=Zt.call(a,"variable")&&a.variable;if(j){if(pa.test(j))throw new $("Invalid `variable` option passed into `_.template`")}else w="with (obj) {\n"+w+"\n}\n";w=(P?w.replace(Lc,""):w).replace(rl,"$1").replace(zs,"$1;"),w="function("+(j||"obj")+") {\n"+(j?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(P?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+w+"return __p\n}";var Y=hh(function(){return X(A,E+"return "+w).apply(R,b)});if(Y.source=w,vc(Y))throw Y;return Y},k.times=function pv(n,a){if((n=Jt(n))<1||n>In)return[];var o=_e,h=Ir(n,_e);a=jt(a),n-=_e;for(var p=Qs(h,a);++o<n;)a(o);return p},k.toFinite=Ki,k.toInteger=Jt,k.toLength=th,k.toLower=function Kd(n){return Ce(n).toLowerCase()},k.toNumber=ri,k.toSafeInteger=function sd(n){return n?ha(Jt(n),-In,In):0===n?n:0},k.toString=Ce,k.toUpper=function Qd(n){return Ce(n).toUpperCase()},k.trim=function qd(n,a,o){if((n=Ce(n))&&(o||a===R))return Na(n);if(!n||!(a=Ht(a)))return n;var h=hr(n),p=hr(a);return ke(h,ia(h,p),Vo(h,p)+1).join("")},k.trimEnd=function $d(n,a,o){if((n=Ce(n))&&(o||a===R))return n.slice(0,ls(n)+1);if(!n||!(a=Ht(a)))return n;var h=hr(n);return ke(h,0,Vo(h,hr(a))+1).join("")},k.trimStart=function tv(n,a,o){if((n=Ce(n))&&(o||a===R))return n.replace(On,"");if(!n||!(a=Ht(a)))return n;var h=hr(n);return ke(h,ia(h,hr(a))).join("")},k.truncate=function ev(n,a){var o=30,h="...";if(Qe(a)){var p="separator"in a?a.separator:p;o="length"in a?Jt(a.length):o,h="omission"in a?Ht(a.omission):h}var A=(n=Ce(n)).length;if(Bi(n)){var b=hr(n);A=b.length}if(o>=A)return n;var T=o-Zi(h);if(T<1)return h;var P=b?ke(b,0,T).join(""):n.slice(0,T);if(p===R)return P+h;if(b&&(T+=P.length-T),pc(p)){if(n.slice(T).search(p)){var G,m=P;for(p.global||(p=dt(p.source,Ce(Zs.exec(p))+"g")),p.lastIndex=0;G=p.exec(m);)var w=G.index;P=P.slice(0,w===R?T:w)}}else if(n.indexOf(Ht(p),T)!=T){var M=P.lastIndexOf(p);M>-1&&(P=P.slice(0,M))}return P+h},k.unescape=function rv(n){return(n=Ce(n))&&So.test(n)?n.replace(yn,Qo):n},k.uniqueId=function Iv(n){var a=++gr;return Ce(n)+a},k.upperCase=nv,k.upperFirst=xc,k.each=Wf,k.eachRight=uc,k.first=ec,Qu(k,function(){var n={};return Si(k,function(a,o){Zt.call(k.prototype,o)||(n[o]=a)}),n}(),{chain:!1}),k.VERSION="4.17.21",Lt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){k[n].placeholder=k}),Lt(["drop","take"],function(n,a){se.prototype[n]=function(o){o=o===R?1:Tt(Jt(o),0);var h=this.__filtered__&&!a?new se(this):this.clone();return h.__filtered__?h.__takeCount__=Ir(o,h.__takeCount__):h.__views__.push({size:Ir(o,_e),type:n+(h.__dir__<0?"Right":"")}),h},se.prototype[n+"Right"]=function(o){return this.reverse()[n](o).reverse()}}),Lt(["filter","map","takeWhile"],function(n,a){var o=a+1,h=1==o||3==o;se.prototype[n]=function(p){var A=this.clone();return A.__iteratees__.push({iteratee:jt(p,3),type:o}),A.__filtered__=A.__filtered__||h,A}}),Lt(["head","last"],function(n,a){var o="take"+(a?"Right":"");se.prototype[n]=function(){return this[o](1).value()[0]}}),Lt(["initial","tail"],function(n,a){var o="drop"+(a?"":"Right");se.prototype[n]=function(){return this.__filtered__?new se(this):this[o](1)}}),se.prototype.compact=function(){return this.filter(Dn)},se.prototype.find=function(n){return this.filter(n).head()},se.prototype.findLast=function(n){return this.reverse().find(n)},se.prototype.invokeMap=te(function(n,a){return"function"==typeof n?new se(this):this.map(function(o){return Ti(o,n,a)})}),se.prototype.reject=function(n){return this.filter(Yu(jt(n)))},se.prototype.slice=function(n,a){n=Jt(n);var o=this;return o.__filtered__&&(n>0||a<0)?new se(o):(n<0?o=o.takeRight(-n):n&&(o=o.drop(n)),a!==R&&(o=(a=Jt(a))<0?o.dropRight(-a):o.take(a-n)),o)},se.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},se.prototype.toArray=function(){return this.take(_e)},Si(se.prototype,function(n,a){var o=/^(?:filter|find|map|reject)|While$/.test(a),h=/^(?:head|last)$/.test(a),p=k[h?"take"+("last"==a?"Right":""):a],A=h||/^find/.test(a);!p||(k.prototype[a]=function(){var b=this.__wrapped__,T=h?[1]:arguments,P=b instanceof se,G=T[0],m=P||Xt(b),w=function(H){var et=p.apply(k,on([H],T));return h&&M?et[0]:et};m&&o&&"function"==typeof G&&1!=G.length&&(P=m=!1);var M=this.__chain__,E=!!this.__actions__.length,j=A&&!M,Y=P&&!E;if(!A&&m){b=Y?b:new se(this);var B=n.apply(b,T);return B.__actions__.push({func:Ts,args:[w],thisArg:R}),new qr(B,M)}return j&&Y?n.apply(this,T):(B=this.thru(w),j?h?B.value()[0]:B.value():B)})}),Lt(["pop","push","shift","sort","splice","unshift"],function(n){var a=Pt[n],o=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",h=/^(?:pop|shift)$/.test(n);k.prototype[n]=function(){var p=arguments;if(h&&!this.__chain__){var A=this.value();return a.apply(Xt(A)?A:[],p)}return this[o](function(b){return a.apply(Xt(b)?b:[],p)})}}),Si(se.prototype,function(n,a){var o=k[a];if(o){var h=o.name+"";Zt.call(la,h)||(la[h]=[]),la[h].push({name:a,func:o})}}),la[Ba(R,2).name]=[{name:"wrapper",func:R}],se.prototype.clone=function su(){var n=new se(this.__wrapped__);return n.__actions__=sr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=sr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=sr(this.__views__),n},se.prototype.reverse=function xh(){if(this.__filtered__){var n=new se(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},se.prototype.value=function pt(){var n=this.__wrapped__.value(),a=this.__dir__,o=Xt(n),h=a<0,p=o?n.length:0,A=function cf(n,a,o){for(var h=-1,p=o.length;++h<p;){var A=o[h],b=A.size;switch(A.type){case"drop":n+=b;break;case"dropRight":a-=b;break;case"take":a=Ir(a,n+b);break;case"takeRight":n=Tt(n,a-b)}}return{start:n,end:a}}(0,p,this.__views__),b=A.start,T=A.end,P=T-b,G=h?T:b-1,m=this.__iteratees__,w=m.length,M=0,E=Ir(P,this.__takeCount__);if(!o||!h&&p==P&&E==P)return nf(n,this.__actions__);var j=[];t:for(;P--&&M<E;){for(var Y=-1,B=n[G+=a];++Y<w;){var H=m[Y],at=H.type,ft=(0,H.iteratee)(B);if(2==at)B=ft;else if(!ft){if(1==at)continue t;break t}}j[M++]=B}return j},k.prototype.at=dg,k.prototype.chain=function vg(){return Xn(this)},k.prototype.commit=function pg(){return new qr(this.value(),this.__chain__)},k.prototype.next=function mg(){this.__values__===R&&(this.__values__=$f(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?R:this.__values__[this.__index__++]}},k.prototype.plant=function Rf(n){for(var a,o=this;o instanceof au;){var h=mf(o);h.__index__=0,h.__values__=R,a?p.__wrapped__=h:a=h;var p=h;o=o.__wrapped__}return p.__wrapped__=n,a},k.prototype.reverse=function Gf(){var n=this.__wrapped__;if(n instanceof se){var a=n;return this.__actions__.length&&(a=new se(this)),(a=a.reverse()).__actions__.push({func:Ts,args:[Ya],thisArg:R}),new qr(a,this.__chain__)}return this.thru(Ya)},k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=function jf(){return nf(this.__wrapped__,this.__actions__)},k.prototype.first=k.prototype.head,hs&&(k.prototype[hs]=function Of(){return this}),k}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(_._=fn,define(function(){return fn})):J?((J.exports=fn)._=fn,U._=fn):_._=fn}.call(this),function(R){var yt="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(Se,Qi,Te){yt.Backbone=R(yt,Te,Se,Qi)});else if("undefined"!=typeof exports){var Wt,tt=require("underscore");try{Wt=require("jquery")}catch(Se){}R(yt,exports,tt,Wt)}else yt.Backbone=R(yt,{},yt._,yt.jQuery||yt.Zepto||yt.ender||yt.$)}(function(R,yt,tt,Wt){var Se=R.Backbone,Qi=Array.prototype.slice;yt.VERSION="1.4.0",yt.$=Wt,yt.noConflict=function(){return R.Backbone=Se,this},yt.emulateHTTP=!1,yt.emulateJSON=!1;var kr,Te=yt.Events={},ni=/\s+/,qe=function(x,O,W,Q,ut){var vt,lt=0;if(W&&"object"==typeof W)for((void 0!==Q&&"context"in ut&&void 0===ut.context&&(ut.context=Q),vt=tt.keys(W));lt<vt.length;lt++)O=qe(x,O,vt[lt],W[vt[lt]],ut);else if(W&&ni.test(W))for(vt=W.split(ni);lt<vt.length;lt++)O=x(O,vt[lt],Q,ut);else O=x(O,W,Q,ut);return O};Te.on=function(x,O,W){return this._events=qe(Ze,this._events||{},x,O,{context:W,ctx:this,listening:kr}),kr&&((this._listeners||(this._listeners={}))[kr.id]=kr,kr.interop=!1),this},Te.listenTo=function(x,O,W){if(!x)return this;var Q=x._listenId||(x._listenId=tt.uniqueId("l")),ut=this._listeningTo||(this._listeningTo={}),lt=kr=ut[Q];lt||(this._listenId||(this._listenId=tt.uniqueId("l")),lt=kr=ut[Q]=new Ut(this,x));var vt=xr(x,O,W,this);if(kr=void 0,vt)throw vt;return lt.interop&&lt.on(O,W),this};var Ze=function(x,O,W,Q){if(W){var ut=x[O]||(x[O]=[]),lt=Q.context,vt=Q.ctx,Ot=Q.listening;Ot&&Ot.count++,ut.push({callback:W,context:lt,ctx:lt||vt,listening:Ot})}return x},xr=function(x,O,W,Q){try{x.on(O,W,Q)}catch(ut){return ut}};Te.off=function(x,O,W){return this._events?(this._events=qe(Kr,this._events,x,O,{context:W,listeners:this._listeners}),this):this},Te.stopListening=function(x,O,W){var Q=this._listeningTo;if(!Q)return this;for(var ut=x?[x._listenId]:tt.keys(Q),lt=0;lt<ut.length;lt++){var vt=Q[ut[lt]];if(!vt)break;vt.obj.off(O,W,this),vt.interop&&vt.off(O,W)}return tt.isEmpty(Q)&&(this._listeningTo=void 0),this};var Kr=function(x,O,W,Q){if(x){var Ot,ut=Q.context,lt=Q.listeners,vt=0;if(!O&&!ut&&!W){for(Ot=tt.keys(lt);vt<Ot.length;vt++)lt[Ot[vt]].cleanup();return}for(Ot=O?[O]:tt.keys(x);vt<Ot.length;vt++){var ve=x[O=Ot[vt]];if(!ve)break;for(var Oe=[],Le=0;Le<ve.length;Le++){var pe=ve[Le];if(W&&W!==pe.callback&&W!==pe.callback._callback||ut&&ut!==pe.context)Oe.push(pe);else{var tr=pe.listening;tr&&tr.off(O,W)}}Oe.length?x[O]=Oe:delete x[O]}return x}};Te.once=function(x,O,W){var Q=qe($t,{},x,O,this.off.bind(this));return"string"==typeof x&&null==W&&(O=void 0),this.on(Q,O,W)},Te.listenToOnce=function(x,O,W){var Q=qe($t,{},O,W,this.stopListening.bind(this,x));return this.listenTo(x,Q)};var $t=function(x,O,W,Q){if(W){var ut=x[O]=tt.once(function(){Q(O,ut),W.apply(this,arguments)});ut._callback=W}return x};Te.trigger=function(x){if(!this._events)return this;for(var O=Math.max(0,arguments.length-1),W=Array(O),Q=0;Q<O;Q++)W[Q]=arguments[Q+1];return qe(Dt,this._events,x,void 0,W),this};var Dt=function(x,O,W,Q){if(x){var ut=x[O],lt=x.all;ut&&lt&&(lt=lt.slice()),ut&&Er(ut,Q),lt&&Er(lt,[O].concat(Q))}return x},Er=function(x,O){var W,Q=-1,ut=x.length,lt=O[0],vt=O[1],Ot=O[2];switch(O.length){case 0:for(;++Q<ut;)(W=x[Q]).callback.call(W.ctx);return;case 1:for(;++Q<ut;)(W=x[Q]).callback.call(W.ctx,lt);return;case 2:for(;++Q<ut;)(W=x[Q]).callback.call(W.ctx,lt,vt);return;case 3:for(;++Q<ut;)(W=x[Q]).callback.call(W.ctx,lt,vt,Ot);return;default:for(;++Q<ut;)(W=x[Q]).callback.apply(W.ctx,O);return}},Ut=function(x,O){this.id=x._listenId,this.listener=x,this.obj=O,this.interop=!0,this.count=0,this._events=void 0};Ut.prototype.on=Te.on,Ut.prototype.off=function(x,O){var W;this.interop?(this._events=qe(Kr,this._events,x,O,{context:void 0,listeners:void 0}),W=!this._events):(this.count--,W=0===this.count),W&&this.cleanup()},Ut.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},Te.bind=Te.on,Te.unbind=Te.off,tt.extend(yt,Te);var Nr=yt.Model=function(x,O){var W=x||{};O||(O={}),this.preinitialize.apply(this,arguments),this.cid=tt.uniqueId(this.cidPrefix),this.attributes={},O.collection&&(this.collection=O.collection),O.parse&&(W=this.parse(W,O)||{});var Q=tt.result(this,"defaults");W=tt.defaults(tt.extend({},Q,W),Q),this.set(W,O),this.changed={},this.initialize.apply(this,arguments)};tt.extend(Nr.prototype,Te,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(x){return tt.clone(this.attributes)},sync:function(){return yt.sync.apply(this,arguments)},get:function(x){return this.attributes[x]},escape:function(x){return tt.escape(this.get(x))},has:function(x){return null!=this.get(x)},matches:function(x){return!!tt.iteratee(x,this)(this.attributes)},set:function(x,O,W){if(null==x)return this;var Q;if("object"==typeof x?(Q=x,W=O):(Q={})[x]=O,W||(W={}),!this._validate(Q,W))return!1;var ut=W.unset,lt=W.silent,vt=[],Ot=this._changing;this._changing=!0,Ot||(this._previousAttributes=tt.clone(this.attributes),this.changed={});var ve=this.attributes,Oe=this.changed,Le=this._previousAttributes;for(var pe in Q)tt.isEqual(ve[pe],O=Q[pe])||vt.push(pe),tt.isEqual(Le[pe],O)?delete Oe[pe]:Oe[pe]=O,ut?delete ve[pe]:ve[pe]=O;if(this.idAttribute in Q&&(this.id=this.get(this.idAttribute)),!lt){vt.length&&(this._pending=W);for(var tr=0;tr<vt.length;tr++)this.trigger("change:"+vt[tr],this,ve[vt[tr]],W)}if(Ot)return this;if(!lt)for(;this._pending;)W=this._pending,this._pending=!1,this.trigger("change",this,W);return this._pending=!1,this._changing=!1,this},unset:function(x,O){return this.set(x,void 0,tt.extend({},O,{unset:!0}))},clear:function(x){var O={};for(var W in this.attributes)O[W]=void 0;return this.set(O,tt.extend({},x,{unset:!0}))},hasChanged:function(x){return null==x?!tt.isEmpty(this.changed):tt.has(this.changed,x)},changedAttributes:function(x){if(!x)return!!this.hasChanged()&&tt.clone(this.changed);var Q,O=this._changing?this._previousAttributes:this.attributes,W={};for(var ut in x){var lt=x[ut];tt.isEqual(O[ut],lt)||(W[ut]=lt,Q=!0)}return!!Q&&W},previous:function(x){return null!=x&&this._previousAttributes?this._previousAttributes[x]:null},previousAttributes:function(){return tt.clone(this._previousAttributes)},fetch:function(x){x=tt.extend({parse:!0},x);var O=this,W=x.success;return x.success=function(Q){var ut=x.parse?O.parse(Q,x):Q;if(!O.set(ut,x))return!1;W&&W.call(x.context,O,Q,x),O.trigger("sync",O,Q,x)},$e(this,x),this.sync("read",this,x)},save:function(x,O,W){var Q;null==x||"object"==typeof x?(Q=x,W=O):(Q={})[x]=O;var ut=(W=tt.extend({validate:!0,parse:!0},W)).wait;if(Q&&!ut){if(!this.set(Q,W))return!1}else if(!this._validate(Q,W))return!1;var lt=this,vt=W.success,Ot=this.attributes;W.success=function(Le){lt.attributes=Ot;var pe=W.parse?lt.parse(Le,W):Le;if(ut&&(pe=tt.extend({},Q,pe)),pe&&!lt.set(pe,W))return!1;vt&&vt.call(W.context,lt,Le,W),lt.trigger("sync",lt,Le,W)},$e(this,W),Q&&ut&&(this.attributes=tt.extend({},Ot,Q));var ve=this.isNew()?"create":W.patch?"patch":"update";"patch"===ve&&!W.attrs&&(W.attrs=Q);var Oe=this.sync(ve,this,W);return this.attributes=Ot,Oe},destroy:function(x){x=x?tt.clone(x):{};var O=this,W=x.success,Q=x.wait,ut=function(){O.stopListening(),O.trigger("destroy",O,O.collection,x)};x.success=function(vt){Q&&ut(),W&&W.call(x.context,O,vt,x),O.isNew()||O.trigger("sync",O,vt,x)};var lt=!1;return this.isNew()?tt.defer(x.success):($e(this,x),lt=this.sync("delete",this,x)),Q||ut(),lt},url:function(){var x=tt.result(this,"urlRoot")||tt.result(this.collection,"url")||Jn();if(this.isNew())return x;var O=this.get(this.idAttribute);return x.replace(/[^\/]$/,"$&/")+encodeURIComponent(O)},parse:function(x,O){return x},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(x){return this._validate({},tt.extend({},x,{validate:!0}))},_validate:function(x,O){if(!O.validate||!this.validate)return!0;x=tt.extend({},this.attributes,x);var W=this.validationError=this.validate(x,O)||null;return!W||(this.trigger("invalid",this,W,tt.extend(O,{validationError:W})),!1)}});var Mr=yt.Collection=function(x,O){O||(O={}),this.preinitialize.apply(this,arguments),O.model&&(this.model=O.model),void 0!==O.comparator&&(this.comparator=O.comparator),this._reset(),this.initialize.apply(this,arguments),x&&this.reset(x,tt.extend({silent:!0},O))},vr={add:!0,remove:!0,merge:!0},zr={add:!0,remove:!1},C=function(x,O,W){W=Math.min(Math.max(W,0),x.length);var lt,Q=Array(x.length-W),ut=O.length;for(lt=0;lt<Q.length;lt++)Q[lt]=x[lt+W];for(lt=0;lt<ut;lt++)x[lt+W]=O[lt];for(lt=0;lt<Q.length;lt++)x[lt+ut+W]=Q[lt]};tt.extend(Mr.prototype,Te,{model:Nr,preinitialize:function(){},initialize:function(){},toJSON:function(x){return this.map(function(O){return O.toJSON(x)})},sync:function(){return yt.sync.apply(this,arguments)},add:function(x,O){return this.set(x,tt.extend({merge:!1},O,zr))},remove:function(x,O){O=tt.extend({},O);var W=!tt.isArray(x);x=W?[x]:x.slice();var Q=this._removeModels(x,O);return!O.silent&&Q.length&&(O.changes={added:[],merged:[],removed:Q},this.trigger("update",this,O)),W?Q[0]:Q},set:function(x,O){if(null!=x){(O=tt.extend({},vr,O)).parse&&!this._isModel(x)&&(x=this.parse(x,O)||[]);var W=!tt.isArray(x);x=W?[x]:x.slice();var Q=O.at;null!=Q&&(Q=+Q),Q>this.length&&(Q=this.length),Q<0&&(Q+=this.length+1);var Ie,He,ut=[],lt=[],vt=[],Ot=[],ve={},Oe=O.add,Le=O.merge,pe=O.remove,tr=!1,zn=this.comparator&&null==Q&&!1!==O.sort,Br=tt.isString(this.comparator)?this.comparator:null;for(He=0;He<x.length;He++){var ur=this.get(Ie=x[He]);if(ur){if(Le&&Ie!==ur){var An=this._isModel(Ie)?Ie.attributes:Ie;O.parse&&(An=ur.parse(An,O)),ur.set(An,O),vt.push(ur),zn&&!tr&&(tr=ur.hasChanged(Br))}ve[ur.cid]||(ve[ur.cid]=!0,ut.push(ur)),x[He]=ur}else Oe&&(Ie=x[He]=this._prepareModel(Ie,O))&&(lt.push(Ie),this._addReference(Ie,O),ve[Ie.cid]=!0,ut.push(Ie))}if(pe){for(He=0;He<this.length;He++)ve[(Ie=this.models[He]).cid]||Ot.push(Ie);Ot.length&&this._removeModels(Ot,O)}var Zr=!1;if(ut.length&&!zn&&Oe&&pe?(Zr=this.length!==ut.length||tt.some(this.models,function(pr,ta){return pr!==ut[ta]}),this.models.length=0,C(this.models,ut,0),this.length=this.models.length):lt.length&&(zn&&(tr=!0),C(this.models,lt,null==Q?this.length:Q),this.length=this.models.length),tr&&this.sort({silent:!0}),!O.silent){for(He=0;He<lt.length;He++)null!=Q&&(O.index=Q+He),(Ie=lt[He]).trigger("add",Ie,this,O);(tr||Zr)&&this.trigger("sort",this,O),(lt.length||Ot.length||vt.length)&&(O.changes={added:lt,removed:Ot,merged:vt},this.trigger("update",this,O))}return W?x[0]:x}},reset:function(x,O){O=O?tt.clone(O):{};for(var W=0;W<this.models.length;W++)this._removeReference(this.models[W],O);return O.previousModels=this.models,this._reset(),x=this.add(x,tt.extend({silent:!0},O)),O.silent||this.trigger("reset",this,O),x},push:function(x,O){return this.add(x,tt.extend({at:this.length},O))},pop:function(x){var O=this.at(this.length-1);return this.remove(O,x)},unshift:function(x,O){return this.add(x,tt.extend({at:0},O))},shift:function(x){var O=this.at(0);return this.remove(O,x)},slice:function(){return Qi.apply(this.models,arguments)},get:function(x){if(null!=x)return this._byId[x]||this._byId[this.modelId(this._isModel(x)?x.attributes:x)]||x.cid&&this._byId[x.cid]},has:function(x){return null!=this.get(x)},at:function(x){return x<0&&(x+=this.length),this.models[x]},where:function(x,O){return this[O?"find":"filter"](x)},findWhere:function(x){return this.where(x,!0)},sort:function(x){var O=this.comparator;if(!O)throw new Error("Cannot sort a set without a comparator");x||(x={});var W=O.length;return tt.isFunction(O)&&(O=O.bind(this)),1===W||tt.isString(O)?this.models=this.sortBy(O):this.models.sort(O),x.silent||this.trigger("sort",this,x),this},pluck:function(x){return this.map(x+"")},fetch:function(x){var O=(x=tt.extend({parse:!0},x)).success,W=this;return x.success=function(Q){W[x.reset?"reset":"set"](Q,x),O&&O.call(x.context,W,Q,x),W.trigger("sync",W,Q,x)},$e(this,x),this.sync("read",this,x)},create:function(x,O){var W=(O=O?tt.clone(O):{}).wait;if(!(x=this._prepareModel(x,O)))return!1;W||this.add(x,O);var Q=this,ut=O.success;return O.success=function(lt,vt,Ot){W&&Q.add(lt,Ot),ut&&ut.call(Ot.context,lt,vt,Ot)},x.save(null,O),x},parse:function(x,O){return x},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(x){return x[this.model.prototype.idAttribute||"id"]},values:function(){return new ar(this,kn)},keys:function(){return new ar(this,Or)},entries:function(){return new ar(this,qi)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(x,O){if(this._isModel(x))return x.collection||(x.collection=this),x;(O=O?tt.clone(O):{}).collection=this;var W=new this.model(x,O);return W.validationError?(this.trigger("invalid",this,W.validationError,O),!1):W},_removeModels:function(x,O){for(var W=[],Q=0;Q<x.length;Q++){var ut=this.get(x[Q]);if(ut){var lt=this.indexOf(ut);this.models.splice(lt,1),this.length--,delete this._byId[ut.cid];var vt=this.modelId(ut.attributes);null!=vt&&delete this._byId[vt],O.silent||(O.index=lt,ut.trigger("remove",ut,this,O)),W.push(ut),this._removeReference(ut,O)}}return W},_isModel:function(x){return x instanceof Nr},_addReference:function(x,O){this._byId[x.cid]=x;var W=this.modelId(x.attributes);null!=W&&(this._byId[W]=x),x.on("all",this._onModelEvent,this)},_removeReference:function(x,O){delete this._byId[x.cid];var W=this.modelId(x.attributes);null!=W&&delete this._byId[W],this===x.collection&&delete x.collection,x.off("all",this._onModelEvent,this)},_onModelEvent:function(x,O,W,Q){if(O){if(("add"===x||"remove"===x)&&W!==this)return;if("destroy"===x&&this.remove(O,Q),"change"===x){var ut=this.modelId(O.previousAttributes()),lt=this.modelId(O.attributes);ut!==lt&&(null!=ut&&delete this._byId[ut],null!=lt&&(this._byId[lt]=O))}}this.trigger.apply(this,arguments)}});var nn="function"==typeof Symbol&&Symbol.iterator;nn&&(Mr.prototype[nn]=Mr.prototype.values);var ar=function(x,O){this._collection=x,this._kind=O,this._index=0},kn=1,Or=2,qi=3;nn&&(ar.prototype[nn]=function(){return this}),ar.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var O,x=this._collection.at(this._index);if(this._index++,this._kind===kn)O=x;else{var W=this._collection.modelId(x.attributes);O=this._kind===Or?W:[W,x]}return{value:O,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Rr=yt.View=function(x){this.cid=tt.uniqueId("view"),this.preinitialize.apply(this,arguments),tt.extend(this,tt.pick(x,Oi)),this._ensureElement(),this.initialize.apply(this,arguments)},Ke=/^(\S+)\s*(.*)$/,Oi=["model","collection","el","id","attributes","className","tagName","events"];tt.extend(Rr.prototype,Te,{tagName:"div",$:function(x){return this.$el.find(x)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(x){return this.undelegateEvents(),this._setElement(x),this.delegateEvents(),this},_setElement:function(x){this.$el=x instanceof yt.$?x:yt.$(x),this.el=this.$el[0]},delegateEvents:function(x){if(x||(x=tt.result(this,"events")),!x)return this;for(var O in this.undelegateEvents(),x){var W=x[O];if(tt.isFunction(W)||(W=this[W]),W){var Q=O.match(Ke);this.delegate(Q[1],Q[2],W.bind(this))}}return this},delegate:function(x,O,W){return this.$el.on(x+".delegateEvents"+this.cid,O,W),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(x,O,W){return this.$el.off(x+".delegateEvents"+this.cid,O,W),this},_createElement:function(x){return document.createElement(x)},_ensureElement:function(){if(this.el)this.setElement(tt.result(this,"el"));else{var x=tt.extend({},tt.result(this,"attributes"));this.id&&(x.id=tt.result(this,"id")),this.className&&(x.class=tt.result(this,"className")),this.setElement(this._createElement(tt.result(this,"tagName"))),this._setAttributes(x)}},_setAttributes:function(x){this.$el.attr(x)}});var En=function(x,O,W,Q){tt.each(W,function(ut,lt){O[lt]&&(x.prototype[lt]=function(x,O,W,Q){switch(O){case 1:return function(){return x[W](this[Q])};case 2:return function(ut){return x[W](this[Q],ut)};case 3:return function(ut,lt){return x[W](this[Q],In(ut,this),lt)};case 4:return function(ut,lt,vt){return x[W](this[Q],In(ut,this),lt,vt)};default:return function(){var ut=Qi.call(arguments);return ut.unshift(this[Q]),x[W].apply(x,ut)}}}(O,ut,lt,Q))})},In=function(x,O){return tt.isFunction(x)?x:tt.isObject(x)&&!O._isModel(x)?Ha(x):tt.isString(x)?function(W){return W.get(x)}:x},Ha=function(x){var O=tt.matches(x);return function(W){return O(W.attributes)}};tt.each([[Mr,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[Nr,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(x){var O=x[0],W=x[1],Q=x[2];O.mixin=function(ut){var lt=tt.reduce(tt.functions(ut),function(vt,Ot){return vt[Ot]=0,vt},{});En(O,ut,lt,Q)},En(O,tt,W,Q)}),yt.sync=function(x,O,W){var Q=Gr[x];tt.defaults(W||(W={}),{emulateHTTP:yt.emulateHTTP,emulateJSON:yt.emulateJSON});var ut={type:Q,dataType:"json"};if(W.url||(ut.url=tt.result(O,"url")||Jn()),null==W.data&&O&&("create"===x||"update"===x||"patch"===x)&&(ut.contentType="application/json",ut.data=JSON.stringify(W.attrs||O.toJSON(W))),W.emulateJSON&&(ut.contentType="application/x-www-form-urlencoded",ut.data=ut.data?{model:ut.data}:{}),W.emulateHTTP&&("PUT"===Q||"DELETE"===Q||"PATCH"===Q)){ut.type="POST",W.emulateJSON&&(ut.data._method=Q);var lt=W.beforeSend;W.beforeSend=function(ve){if(ve.setRequestHeader("X-HTTP-Method-Override",Q),lt)return lt.apply(this,arguments)}}"GET"!==ut.type&&!W.emulateJSON&&(ut.processData=!1);var vt=W.error;W.error=function(ve,Oe,Le){W.textStatus=Oe,W.errorThrown=Le,vt&&vt.call(W.context,ve,Oe,Le)};var Ot=W.xhr=yt.ajax(tt.extend(ut,W));return O.trigger("request",O,Ot,W),Ot};var Gr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};yt.ajax=function(){return yt.$.ajax.apply(yt.$,arguments)};var pi=yt.Router=function(x){x||(x={}),this.preinitialize.apply(this,arguments),x.routes&&(this.routes=x.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ja=/\((.*?)\)/g,an=/(\(\?)?:\w+/g,jr=/\*\w+/g,mi=/[\-{}\[\]+?.,\\\^$|#\s]/g;tt.extend(pi.prototype,Te,{preinitialize:function(){},initialize:function(){},route:function(x,O,W){tt.isRegExp(x)||(x=this._routeToRegExp(x)),tt.isFunction(O)&&(W=O,O=""),W||(W=this[O]);var Q=this;return yt.history.route(x,function(ut){var lt=Q._extractParameters(x,ut);!1!==Q.execute(W,lt,O)&&(Q.trigger.apply(Q,["route:"+O].concat(lt)),Q.trigger("route",O,lt),yt.history.trigger("route",Q,O,lt))}),this},execute:function(x,O,W){x&&x.apply(this,O)},navigate:function(x,O){return yt.history.navigate(x,O),this},_bindRoutes:function(){if(this.routes){this.routes=tt.result(this,"routes");for(var x,O=tt.keys(this.routes);null!=(x=O.pop());)this.route(x,this.routes[x])}},_routeToRegExp:function(x){return x=x.replace(mi,"\\$&").replace(Ja,"(?:$1)?").replace(an,function(O,W){return W?O:"([^/?]+)"}).replace(jr,"([^?]*?)"),new RegExp("^"+x+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(x,O){var W=x.exec(O).slice(1);return tt.map(W,function(Q,ut){return ut===W.length-1?Q||null:Q?decodeURIComponent(Q):null})}});var We=yt.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},Gi=/^[#\/]|\s+$/g,ii=/^\/+|\/+$/g,$i=/#.*$/;We.started=!1,tt.extend(We.prototype,Te,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(x){return decodeURI(x.replace(/%25/g,"%2525"))},getSearch:function(){var x=this.location.href.replace(/#.*/,"").match(/\?.+/);return x?x[0]:""},getHash:function(x){var O=(x||this).location.href.match(/#(.*)$/);return O?O[1]:""},getPath:function(){var x=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===x.charAt(0)?x.slice(1):x},getFragment:function(x){return null==x&&(x=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),x.replace(Gi,"")},start:function(x){if(We.started)throw new Error("Backbone.history has already been started");if(We.started=!0,this.options=tt.extend({root:"/"},this.options,x),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(ii,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var O=this.root.slice(0,-1)||"/";return this.location.replace(O+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var W=document.body,Q=W.insertBefore(this.iframe,W.firstChild).contentWindow;Q.document.open(),Q.document.close(),Q.location.hash="#"+this.fragment}var ut=window.addEventListener||function(lt,vt){return attachEvent("on"+lt,vt)};if(this._usePushState?ut("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ut("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var x=window.removeEventListener||function(O,W){return detachEvent("on"+O,W)};this._usePushState?x("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&x("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),We.started=!1},route:function(x,O){this.handlers.unshift({route:x,callback:O})},checkUrl:function(x){var O=this.getFragment();if(O===this.fragment&&this.iframe&&(O=this.getHash(this.iframe.contentWindow)),O===this.fragment)return!1;this.iframe&&this.navigate(O),this.loadUrl()},loadUrl:function(x){return!!this.matchRoot()&&(x=this.fragment=this.getFragment(x),tt.some(this.handlers,function(O){if(O.route.test(x))return O.callback(x),!0}))},navigate:function(x,O){if(!We.started)return!1;(!O||!0===O)&&(O={trigger:!!O}),x=this.getFragment(x||"");var W=this.root;(""===x||"?"===x.charAt(0))&&(W=W.slice(0,-1)||"/");var Q=W+x;x=x.replace($i,"");var ut=this.decodeFragment(x);if(this.fragment!==ut){if(this.fragment=ut,this._usePushState)this.history[O.replace?"replaceState":"pushState"]({},document.title,Q);else{if(!this._wantsHashChange)return this.location.assign(Q);if(this._updateHash(this.location,x,O.replace),this.iframe&&x!==this.getHash(this.iframe.contentWindow)){var lt=this.iframe.contentWindow;O.replace||(lt.document.open(),lt.document.close()),this._updateHash(lt.location,x,O.replace)}}if(O.trigger)return this.loadUrl(x)}},_updateHash:function(x,O,W){if(W){var Q=x.href.replace(/(javascript:|#).*$/,"");x.replace(Q+"#"+O)}else x.hash="#"+O}}),yt.history=new We,Nr.extend=Mr.extend=pi.extend=Rr.extend=We.extend=function(x,O){var Q,W=this;return Q=x&&tt.has(x,"constructor")?x.constructor:function(){return W.apply(this,arguments)},tt.extend(Q,W,O),Q.prototype=tt.create(W.prototype,x),Q.prototype.constructor=Q,Q.__super__=W.prototype,Q};var Jn=function(){throw new Error('A "url" property or function must be specified')},$e=function(x,O){var W=O.error;O.error=function(Q){W&&W.call(O.context,x,Q,O),x.trigger("error",x,Q,O)}};return yt}),function(R,yt){"object"==typeof exports&&"undefined"!=typeof module?yt(exports,require("backbone"),require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","backbone","lodash","jquery"],yt):yt((R=R||self).joint={},R.Backbone,R._,R.$)}(this,function(R,yt,tt,Wt){"use strict";yt=yt&&yt.hasOwnProperty("default")?yt.default:yt,tt=tt&&tt.hasOwnProperty("default")?tt.default:tt,Wt=Wt&&Wt.hasOwnProperty("default")?Wt.default:Wt;var Se="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ni(t,e){return t(e={exports:{}},e.exports),e.exports}var qe=function(t){return t&&t.Math==Math&&t},Ze=qe("object"==typeof globalThis&&globalThis)||qe("object"==typeof window&&window)||qe("object"==typeof self&&self)||qe("object"==typeof Se&&Se)||function(){return this}()||Function("return this")(),xr=function(t){try{return!!t()}catch(e){return!0}},Kr=!xr(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),$t={}.propertyIsEnumerable,Dt=Object.getOwnPropertyDescriptor,Ut=Dt&&!$t.call({1:2},1)?function(e){var r=Dt(this,e);return!!r&&r.enumerable}:$t,Nr={f:Ut},Mr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},vr={}.toString,zr=function(t){return vr.call(t).slice(8,-1)},C="".split,nn=xr(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==zr(t)?C.call(t,""):Object(t)}:Object,ar=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},kn=function(t){return nn(ar(t))},Or=function(t){return"object"==typeof t?null!==t:"function"==typeof t},qi=function(t,e){if(!Or(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!Or(i=r.call(t))||"function"==typeof(r=t.valueOf)&&!Or(i=r.call(t))||!e&&"function"==typeof(r=t.toString)&&!Or(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")},Rr={}.hasOwnProperty,Ke=function(t,e){return Rr.call(t,e)},Oi=Ze.document,Xa=Or(Oi)&&Or(Oi.createElement),En=function(t){return Xa?Oi.createElement(t):{}},In=!Kr&&!xr(function(){return 7!=Object.defineProperty(En("div"),"a",{get:function(){return 7}}).a}),Ha=Object.getOwnPropertyDescriptor,Ri=Kr?Ha:function(e,r){if(e=kn(e),r=qi(r,!0),In)try{return Ha(e,r)}catch(i){}if(Ke(e,r))return Mr(!Nr.f.call(e,r),e[r])},_e={f:Ri},Gr=function(t){if(!Or(t))throw TypeError(String(t)+" is not an object");return t},pi=Object.defineProperty,Ja=Kr?pi:function(e,r,i){if(Gr(e),r=qi(r,!0),Gr(i),In)try{return pi(e,r,i)}catch(s){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[r]=i.value),e},an={f:Ja},jr=Kr?function(t,e,r){return an.f(t,e,Mr(1,r))}:function(t,e,r){return t[e]=r,t},mi=function(t,e){try{jr(Ze,t,e)}catch(r){Ze[t]=e}return e},We="__core-js_shared__",ii=Ze[We]||mi(We,{}),$i=Function.toString;"function"!=typeof ii.inspectSource&&(ii.inspectSource=function(t){return $i.call(t)});var Oe,Le,pe,Sr=ii.inspectSource,Jn=Ze.WeakMap,$e="function"==typeof Jn&&/native code/.test(Sr(Jn)),O=ni(function(t){(t.exports=function(e,r){return ii[e]||(ii[e]=void 0!==r?r:{})})("versions",[]).push({version:"3.8.3",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),W=0,Q=Math.random(),ut=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++W+Q).toString(36)},lt=O("keys"),vt=function(t){return lt[t]||(lt[t]=ut(t))},Ot={};if($e){var Br=ii.state||(ii.state=new(0,Ze.WeakMap)),Ie=Br.get,He=Br.has,ur=Br.set;Oe=function(t,e){return e.facade=t,ur.call(Br,t,e),e},Le=function(t){return Ie.call(Br,t)||{}},pe=function(t){return He.call(Br,t)}}else{var An=vt("state");Ot[An]=!0,Oe=function(t,e){return e.facade=t,jr(t,An,e),e},Le=function(t){return Ke(t,An)?t[An]:{}},pe=function(t){return Ke(t,An)}}var ra,Zr={set:Oe,get:Le,has:pe,enforce:function(t){return pe(t)?Le(t):Oe(t,{})},getterFor:function(t){return function(e){var r;if(!Or(e)||(r=Le(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},zs=ni(function(t){var e=Zr.get,r=Zr.enforce,i=String(String).split("String");(t.exports=function(s,u,l,f){var o,d=!!f&&!!f.unsafe,n=!!f&&!!f.enumerable,a=!!f&&!!f.noTargetGet;"function"==typeof l&&("string"==typeof u&&!Ke(l,"name")&&jr(l,"name",u),(o=r(l)).source||(o.source=i.join("string"==typeof u?u:""))),s!==Ze?(d?!a&&s[u]&&(n=!0):delete s[u],n?s[u]=l:jr(s,u,l)):n?s[u]=l:mi(u,l)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||Sr(this)})}),yn=Ze,Ii=function(t){return"function"==typeof t?t:void 0},So=function(t,e){return arguments.length<2?Ii(yn[t])||Ii(Ze[t]):yn[t]&&yn[t][e]||Ze[t]&&Ze[t][e]},Os=Math.ceil,Ka=Math.floor,Rs=function(t){return isNaN(t=+t)?0:(t>0?Ka:Os)(t)},To=Math.min,Qa=function(t){return t>0?To(Rs(t),9007199254740991):0},Lo=Math.max,nl=Math.min,js=function(t){return function(e,r,i){var f,s=kn(e),u=Qa(s.length),l=function(t,e){var r=Rs(t);return r<0?Lo(r+e,0):nl(r,e)}(i,u);if(t&&r!=r){for(;u>l;)if((f=s[l++])!=f)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===r)return t||l||0;return!t&&-1}},On={includes:js(!0),indexOf:js(!1)},qa=On.indexOf,Bs=function(t,e){var u,r=kn(t),i=0,s=[];for(u in r)!Ke(Ot,u)&&Ke(r,u)&&s.push(u);for(;e.length>i;)Ke(r,u=e[i++])&&(~qa(s,u)||s.push(u));return s},$a=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pa=$a.concat("length","prototype"),Po=Object.getOwnPropertyNames||function(e){return Bs(e,pa)},ko={f:Po},Eo={f:Object.getOwnPropertySymbols},_s=So("Reflect","ownKeys")||function(e){var r=ko.f(Gr(e)),i=Eo.f;return i?r.concat(i(e)):r},al=function(t,e){for(var r=_s(e),i=an.f,s=_e.f,u=0;u<r.length;u++){var l=r[u];Ke(t,l)||i(t,l,s(e,l))}},zo=/#|\.prototype\./,ma=function(t,e){var r=Ia[Oo(t)];return r==Aa||r!=Ws&&("function"==typeof e?xr(e):!!e)},Oo=ma.normalize=function(t){return String(t).replace(zo,".").toLowerCase()},Ia=ma.data={},Ws=ma.NATIVE="N",Aa=ma.POLYFILL="P",Rn=ma,ea=_e.f,Cn=function(t,e){var l,f,d,n,a,r=t.target,i=t.global,s=t.stat;if(l=i?Ze:s?Ze[r]||mi(r,{}):(Ze[r]||{}).prototype)for(f in e){if(n=e[f],d=t.noTargetGet?(a=ea(l,f))&&a.value:l[f],!Rn(i?f:r+(s?".":"#")+f,t.forced)&&void 0!==d){if(typeof n==typeof d)continue;al(n,d)}(t.sham||d&&d.sham)&&jr(n,"sham",!0),zs(l,f,n,t)}},Ai=!!Object.getOwnPropertySymbols&&!xr(function(){return!String(Symbol())}),Ys=Ai&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ya=O("wks"),Ca=Ze.Symbol,Fs=Ys?Ca:Ca&&Ca.withoutSetter||ut,sn=function(t){return Ke(ya,t)||(ya[t]=Ai&&Ke(Ca,t)?Ca[t]:Fs("Symbol."+t)),ya[t]},ts=Object.keys||function(e){return Bs(e,$a)},Us=Kr?Object.defineProperties:function(e,r){Gr(e);for(var l,i=ts(r),s=i.length,u=0;s>u;)an.f(e,l=i[u++],r[l]);return e},wn=So("document","documentElement"),Vs="prototype",Gn=vt("IE_PROTO"),Kn=function(){},ns=function(t){return"<script>"+t+"<\/script>"},Ci=function(){try{ra=document.domain&&new ActiveXObject("htmlfile")}catch(e){}Ci=ra?function(t){t.write(ns("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ra):function(){var r,t=En("iframe");return t.style.display="none",wn.appendChild(t),t.src=String("javascript:"),(r=t.contentWindow.document).open(),r.write(ns("document.F=Object")),r.close(),r.F}();for(var t=$a.length;t--;)delete Ci[Vs][$a[t]];return Ci()};Ot[Gn]=!0;var is=Object.create||function(e,r){var i;return null!==e?(Kn[Vs]=Gr(e),i=new Kn,Kn[Vs]=null,i[Gn]=e):i=Ci(),void 0===r?i:Us(i,r)},ji=sn("unscopables"),wa=Array.prototype;null==wa[ji]&&an.f(wa,ji,{configurable:!0,value:is(null)});var ai=function(t){wa[ji][t]=!0},Go=Object.defineProperty,as={},ss=function(t){throw t},os=function(t,e){if(Ke(as,t))return as[t];e||(e={});var r=[][t],i=!!Ke(e,"ACCESSORS")&&e.ACCESSORS,s=Ke(e,0)?e[0]:ss,u=Ke(e,1)?e[1]:void 0;return as[t]=!!r&&!xr(function(){if(i&&!Kr)return!0;var l={length:-1};i?Go(l,1,{enumerable:!0,get:ss}):l[1]=1,r.call(l,s,u)})},jo=On.includes,Bo=os("indexOf",{ACCESSORS:!0,1:0});Cn({target:"Array",proto:!0,forced:!Bo},{includes:function(e){return jo(this,e,arguments.length>1?arguments[1]:void 0)}}),ai("includes");var Hs=function(t,e,r){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,s){return t.call(e,i,s)};case 3:return function(i,s,u){return t.call(e,i,s,u)}}return function(){return t.apply(e,arguments)}},Zo=Function.call,wi=function(t,e,r){return Hs(Zo,Ze[t].prototype[e],r)},us=(wi("Array","includes"),function(t){return Object(ar(t))}),Js=Array.isArray||function(e){return"Array"==zr(e)},ba=sn("species"),ul=function(t,e){var r;return Js(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Js(r.prototype)?Or(r)&&null===(r=r[ba])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},na=[].push,si=function(t){var e=1==t,r=2==t,i=3==t,s=4==t,u=6==t,l=7==t,f=5==t||u;return function(d,n,a,o){for(var m,w,h=us(d),p=nn(h),A=Hs(n,a,3),b=Qa(p.length),T=0,P=o||ul,G=e?P(d,b):r||l?P(d,0):void 0;b>T;T++)if((f||T in p)&&(w=A(m=p[T],T,h),t))if(e)G[T]=w;else if(w)switch(t){case 3:return!0;case 5:return m;case 6:return T;case 2:na.call(G,m)}else switch(t){case 4:return!1;case 7:na.call(G,m)}return u?-1:i||s?s:G}},jn={forEach:si(0),map:si(1),filter:si(2),some:si(3),every:si(4),find:si(5),findIndex:si(6),filterOut:si(7)},S=jn.find,D="find",z=!0,_=os(D);D in[]&&Array(1)[D](function(){z=!1}),Cn({target:"Array",proto:!0,forced:z||!_},{find:function(e){return S(this,e,arguments.length>1?arguments[1]:void 0)}}),ai(D),wi("Array","find");var er,re,he,ct=function(t){return function(e,r){var l,f,i=String(ar(e)),s=Rs(r),u=i.length;return s<0||s>=u?t?"":void 0:(l=i.charCodeAt(s))<55296||l>56319||s+1===u||(f=i.charCodeAt(s+1))<56320||f>57343?t?i.charAt(s):l:t?i.slice(s,s+2):f-56320+(l-55296<<10)+65536}},q={codeAt:ct(!1),charAt:ct(!0)},Nt=!xr(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),bt=vt("IE_PROTO"),Ge=Object.prototype,Ye=Nt?Object.getPrototypeOf:function(t){return t=us(t),Ke(t,bt)?t[bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ge:null},we=sn("iterator"),Ae=!1;[].keys&&("next"in(he=[].keys())?(re=Ye(Ye(he)))!==Object.prototype&&(er=re):Ae=!0);var oi=null==er||xr(function(){var t={};return er[we].call(t)!==t});oi&&(er={}),!Ke(er,we)&&jr(er,we,function(){return this});var Qn={IteratorPrototype:er,BUGGY_SAFARI_ITERATORS:Ae},bi=an.f,Wr=sn("toStringTag"),ui=function(t,e,r){t&&!Ke(t=r?t:t.prototype,Wr)&&bi(t,Wr,{configurable:!0,value:e})},Tr={},Fe=Qn.IteratorPrototype,un=function(){return this},Rt=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,e={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),t=e instanceof Array}catch(i){}return function(s,u){return Gr(s),function(t){if(!Or(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(u),t?r.call(s,u):s.__proto__=u,s}}():void 0),fe=Qn.IteratorPrototype,Ue=Qn.BUGGY_SAFARI_ITERATORS,lr=sn("iterator"),cr="values",xi="entries",xa=function(){return this},Qs=q.charAt,Fo="String Iterator",Na=Zr.set,cn=Zr.getterFor(Fo);!function(t,e,r,i,s,u,l){!function(t,e,r){var i="String Iterator";t.prototype=is(Fe,{next:Mr(1,r)}),ui(t,i,!1),Tr[i]=un}(r,0,function(){var s,e=cn(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(s=Qs(r,i),e.index+=s.length,{value:s,done:!1})});var A,f=function(P){if(P===s&&h)return h;if(!Ue&&P in a)return a[P];switch(P){case"keys":case cr:case xi:return function(){return new r(this,P)}}return function(){return new r(this)}},a=t.prototype,o=a[lr]||a["@@iterator"]||s,h=!Ue&&o||f(s);o&&(A=Ye(o.call(new t)),fe!==Object.prototype&&A.next&&(Ye(A)!==fe&&(Rt?Rt(A,fe):"function"!=typeof A[lr]&&jr(A,lr,xa)),ui(A,"String Iterator",!0))),a[lr]!==h&&jr(a,lr,h),Tr[e]=h}(String,"String",function(t){Na(this,{type:Fo,string:String(t),index:0})});var ia=function(t,e,r,i){try{return i?e(Gr(r)[0],r[1]):e(r)}catch(s){throw function(t){var e=t.return;void 0!==e&&Gr(e.call(t))}(t),s}},Vo=sn("iterator"),qs=Array.prototype,li=function(t){return void 0!==t&&(Tr.Array===t||qs[Vo]===t)},qn=function(t,e,r){var i=qi(e);i in t?an.f(t,i,Mr(0,r)):t[i]=r},$s={};$s[sn("toStringTag")]="z";var Bi="[object z]"===String($s),ll=sn("toStringTag"),be="Arguments"==zr(function(){return arguments}()),bn=Bi?zr:function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(r){}}(e=Object(t),ll))?r:be?zr(e):"Object"==(i=zr(e))&&"function"==typeof e.callee?"Arguments":i},fr=sn("iterator"),sa=function(t){if(null!=t)return t[fr]||t["@@iterator"]||Tr[bn(t)]},Jo=sn("iterator"),Ko=!1;try{var Zi=0,hr={next:function(){return{done:!!Zi++}},return:function(){Ko=!0}};hr[Jo]=function(){return this},Array.from(hr,function(){throw 2})}catch(t){}var Qo=!function(t,e){if(!Ko)return!1;var r=!1;try{var i={};i[Jo]=function(){return{next:function(){return{done:r=!0}}}},function(t){Array.from(t)}(i)}catch(s){}return r}();Cn({target:"Array",stat:!0,forced:Qo},{from:function(e){var n,a,o,h,p,A,r=us(e),i="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u,f=sa(r),d=0;if(l&&(u=Hs(u,s>2?arguments[2]:void 0,2)),null==f||i==Array&&li(f))for(a=new i(n=Qa(r.length));n>d;d++)A=l?u(r[d],d):r[d],qn(a,d,A);else for(p=(h=f.call(r)).next,a=new i;!(o=p.call(h)).done;d++)A=l?ia(h,u,[o.value,d],!0):o.value,qn(a,d,A);return a.length=d,a}});var fs=jn.findIndex,fn="findIndex",K=!0,N=os(fn);fn in[]&&Array(1)[fn](function(){K=!1}),Cn({target:"Array",proto:!0,forced:K||!N},{findIndex:function(e){return fs(this,e,arguments.length>1?arguments[1]:void 0)}}),ai(fn),wi("Array","findIndex"),ni(function(t,e){!function(){var r=e,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(u){this.message=u}(s.prototype=new Error).name="InvalidCharacterError",r.btoa||(r.btoa=function(u){for(var f,d,l=String(u),n=0,a=i,o="";l.charAt(0|n)||(a="=",n%1);o+=a.charAt(63&f>>8-n%1*8)){if((d=l.charCodeAt(n+=3/4))>255)throw new s("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");f=f<<8|d}return o}),r.atob||(r.atob=function(u){var l=String(u).replace(/=+$/,"");if(l.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,n,f=0,a=0,o="";n=l.charAt(a++);~n&&(d=f%4?64*d+n:n,f++%4)?o+=String.fromCharCode(255&d>>(-2*f&6)):0)n=i.indexOf(n);return o})}()}),Cn({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var mt=Ze.isFinite,St=Number.isFinite||function(e){return"number"==typeof e&&mt(e)};Cn({target:"Number",stat:!0},{isFinite:St});var je=sn("match"),Zt=function(t){if(function(t){var e;return Or(t)&&(void 0!==(e=t[je])?!!e:"RegExp"==zr(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},gr=sn("match"),mr=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[gr]=!1,"/./"[t](e)}catch(i){}}return!1};Cn({target:"String",proto:!0,forced:!mr("includes")},{includes:function(e){return!!~String(ar(this)).indexOf(Zt(e),arguments.length>1?arguments[1]:void 0)}}),wi("String","includes");var t,rr=_e.f,Fr="".startsWith,Bn=Math.min,oa=mr("startsWith"),eo=!(oa||(t=rr(String.prototype,"startsWith"),!t||t.writable));Cn({target:"String",proto:!0,forced:!eo&&!oa},{startsWith:function(e){var r=String(ar(this));Zt(e);var i=Qa(Bn(arguments.length>1?arguments[1]:void 0,r.length)),s=String(e);return Fr?Fr.call(r,s,i):r.slice(i,i+s.length)===s}}),wi("String","startsWith"),function(){function t(i,s){return this.slice(i,s)}function e(i,s){arguments.length<2&&(s=0);for(var u=0,l=i.length;u<l;++u,++s)this[s]=255&i[u]}function r(i){var s;if("number"==typeof i){s=new Array(i);for(var u=0;u<i;++u)s[u]=0}else s=i.slice(0);return s.subarray=t,s.buffer=s,s.byteLength=s.length,s.set=e,"object"==typeof i&&i.buffer&&(s.buffer=i.buffer),s}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=r,window.Uint32Array=r,window.Int32Array=r)}();var $o=Math.round,kc=Math.floor,hs=Math.PI,Zn=function(t){return t%360+(t<0?360:0)},Ta=function(t,e){return e*$o(t/e)},tu=function(t){return 180*t/hs%360},xn=function(t,e){return(t=(e=e||!1)?t:t%360)*hs/180},gs=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){var r=t;t=e,e=r}return kc(Math.random()*(e-t+1)+t)},La=Math.cos,no=Math.sin,bh=Math.atan2,cl=function(t,e){var r=xn(t.y),i=xn(e.y),l=xn(e.x-t.x),f=no(l)*La(i),d=La(r)*no(i)-no(r)*La(i)*La(l),o=tu(bh(f,d))-22.5;return o<0&&(o+=360),["NE","E","SE","S","SW","W","NW","N"][o=parseInt(o/45)]},fl=function(t,e){var r=t.x,i=t.y;return(r-=e.x)*r+(i-=e.y)*i},Ec=function(t,e){return Math.sqrt(fl(t,e))},Tt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},Ir=Math.abs,hl=Math.cos,gl=Math.sin,dl=Math.sqrt,zc=Math.min,eu=Math.max,io=Math.atan2,ru=Math.round,ds=Math.pow,vs=Math.PI,F=function(t,e){if(!(this instanceof F))return new F(t,e);if("string"==typeof t){var r=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(r[0]),e=parseFloat(r[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};F.fromPolar=function(t,e,r){r=new F(r);var i=Ir(t*hl(e)),s=Ir(t*gl(e)),u=Zn(tu(e));return u<90?s=-s:u<180?(i=-i,s=-s):u<270&&(i=-i),new F(r.x+i,r.y+s)},F.random=function(t,e,r,i){return new F(gs(t,e),gs(r,i))},F.prototype={type:Tt.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new F(t[0]);for(var r=null,i=1/0,s=0;s<e;s++){var u=new F(t[s]),l=this.squaredDistance(u);l<i&&(r=u,i=l)}return r},adhereToRect:function(t){return t.containsPoint(this)||(this.x=zc(eu(this.x,t.x),t.x+t.width),this.y=zc(eu(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var r=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return r<0&&(r+=360),r},bearing:function(t){return cl(this,t)},changeInAngle:function(t,e,r){return this.clone().offset(-t,-e).theta(r)-this.theta(r)},clone:function(){return new F(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new F(this.x-(t||0),this.y-(e||0))},distance:function(t){return Ec(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){return new F((1-e)*this.x+e*t.x,(1-e)*this.y+e*t.y)},magnitude:function(){return dl(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Ir(t.x-this.x)+Ir(t.y-this.y)},move:function(t,e){var r=xn(new F(t).theta(this));return this.offset(hl(r)*e,-gl(r)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new F(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new F(0,0),e=xn(Zn(-e));var r=hl(e),i=gl(e),u=i*(this.x-t.x)+r*(this.y-t.y)+t.y;return this.x=r*(this.x-t.x)-i*(this.y-t.y)+t.x,this.y=u,this},round:function(t){var e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=ds(10,t)}return this.x=ru(this.x*e)/e,this.y=ru(this.y*e)/e,this},scale:function(t,e,r){return r=r&&new F(r)||new F(0,0),this.x=r.x+t*(this.x-r.x),this.y=r.y+e*(this.y-r.y),this},snapToGrid:function(t,e){return this.x=Ta(this.x,t),this.y=Ta(this.y,e||t),this},squaredDistance:function(t){return fl(this,t)},theta:function(t){t=new F(t);var i=io(-(t.y-this.y),t.x-this.x);return i<0&&(i=2*vs+i),180*i/vs},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new F(t)||new F(0,0);var e=this.x,r=this.y;return this.x=dl((e-t.x)*(e-t.x)+(r-t.y)*(r-t.y)),this.y=xn(t.theta(new F(e,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new F(0,0).angleBetween(this,t)}},F.prototype.translate=F.prototype.offset;var ua=F,la=Math.max,vl=Math.min,It=function(t,e){return this instanceof It?t instanceof It?new It(t.start,t.end):(this.start=new F(t),void(this.end=new F(e))):new It(t,e)};It.prototype={type:Tt.Line,angle:function(){var t=new F(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=vl(this.start.x,this.end.x),e=vl(this.start.y,this.end.y),r=la(this.start.x,this.end.x),i=la(this.start.y,this.end.y);return new pt(t,e,r-t,i-e)},bearing:function(){return cl(this.start,this.end)},clone:function(){return new It(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new It(this.start,t).vector()),r=vl(1,la(0,e/this.squaredLength()));return r!=r?0:r},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,r=this.end;if(0!==e.cross(t,r))return!1;var i=this.length();return!(new It(e,t).length()>i||new It(t,r).length()>i)},divideAt:function(t){var e=this.pointAt(t);return[new It(this.start,e),new It(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new It(this.start,e),new It(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var r=t.intersectionWithLine(this,e);return r&&t instanceof It&&(r=r[0]),r}return null},intersectionWithLine:function(t){var e=new F(this.end.x-this.start.x,this.end.y-this.start.y),r=new F(t.end.x-t.start.x,t.end.y-t.start.y),i=e.x*r.y-e.y*r.x,s=new F(t.start.x-this.start.x,t.start.y-this.start.y),u=s.x*r.y-s.y*r.x,l=s.x*e.y-s.y*e.x;if(0===i||u*i<0||l*i<0)return null;if(i>0){if(u>i||l>i)return null}else if(u<i||l<i)return null;return[new F(this.start.x+u*e.x/i,this.start.y+u*e.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Ec(this.start,this.end)},midpoint:function(){return new F((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){var e=this.clone();if(!this.isDifferentiable())return e;var r=e.start,i=e.end,s=r.clone().rotate(i,270),u=i.clone().rotate(r,90);return r.move(u,t),i.move(s,t),e},pointAt:function(t){var e=this.start,r=this.end;return t<=0?e.clone():t>=1?r.clone():e.lerp(r,t)},pointAtLength:function(t){var e=this.start,r=this.end,i=!0;t<0&&(i=!1,t=-t);var s=this.length();return t>=s?i?r.clone():e.clone():this.pointAt((i?t:s-t)/s)},pointOffset:function(t){t=new F(t);var e=this.start,r=this.end;return((r.x-e.x)*(t.y-e.y)-(r.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,r){return this.start.scale(t,e,r),this.end.scale(t,e,r),this},setLength:function(t){var e=this.length();if(!e)return this;var r=t/e;return this.scale(r,r,this.start)},squaredLength:function(){return fl(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,i=this.pointAt(t),s=new It(e,r);return s.translate(i.x-e.x,i.y-e.y),s},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,i=this.pointAtLength(t),s=new It(e,r);return s.translate(i.x-e.x,i.y-e.y),s},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new F(this.end.x-this.start.x,this.end.y-this.start.y)}},It.prototype.intersection=It.prototype.intersect;var Da=It,Oc=Math.sqrt,nu=Math.round,iu=Math.pow,Ar=function(t,e,r){return this instanceof Ar?t instanceof Ar?new Ar(new F(t.x,t.y),t.a,t.b):(t=new F(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=r)):new Ar(t,e,r)};Ar.fromRect=function(t){return t=new pt(t),new Ar(t.center(),t.width/2,t.height/2)},Ar.prototype={type:Tt.Ellipse,bbox:function(){return new pt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new F(this.x,this.y)},clone:function(){return new Ar(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],r=t.start,i=t.end,s=this.a,u=this.b,l=t.vector(),f=r.difference(new F(this)),d=new F(l.x/(s*s),l.y/(u*u)),n=new F(f.x/(s*s),f.y/(u*u)),a=l.dot(d),o=l.dot(n),p=o*o-a*(f.dot(n)-1);if(p<0)return null;if(p>0){var A=Oc(p),b=(-o-A)/a,T=(-o+A)/a;if((b<0||1<b)&&(T<0||1<T))return null;0<=b&&b<=1&&e.push(r.lerp(i,b)),0<=T&&T<=1&&e.push(r.lerp(i,T))}else{var P=-o/a;if(!(0<=P&&P<=1))return null;e.push(r.lerp(i,P))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new F(t),e&&t.rotate(new F(this.x,this.y),e);var s,r=t.x-this.x,i=t.y-this.y;if(0===r)return s=this.bbox().pointNearestToPoint(t),e?s.rotate(new F(this.x,this.y),-e):s;var u=i/r,n=Oc(1/(1/(this.a*this.a)+u*u/(this.b*this.b)));return s=new F(this.x+(n=r<0?-n:n),this.y+u*n),e?s.rotate(new F(this.x,this.y),-e):s},normalizedDistance:function(t){var e=t.x,r=t.y,i=this.a,s=this.b,u=this.x,l=this.y;return(e-u)*(e-u)/(i*i)+(r-l)*(r-l)/(s*s)},round:function(t){var e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=iu(10,t)}return this.x=nu(this.x*e)/e,this.y=nu(this.y*e)/e,this.a=nu(this.a*e)/e,this.b=nu(this.b*e)/e,this},tangentTheta:function(t){var o,h,r=t.x,i=t.y,s=this.a,u=this.b,l=this.bbox().center(),f=l.x,d=l.y;return r>l.x+s/2||r<l.x-s/2?h=s*s/(r-f)-s*s*(i-d)*((o=r>l.x?i-30:i+30)-d)/(u*u*(r-f))+f:o=u*u/(i-d)-u*u*(r-f)*((h=i>l.y?r+30:r-30)-f)/(s*s*(i-d))+d,new F(h,o).theta(t)},toString:function(){return new F(this.x,this.y).toString()+" "+this.a+" "+this.b}};var Rc=Ar,k=Math.abs,ps=Math.cos,au=Math.sin,qr=Math.min,se=Math.max,su=Math.round,xh=Math.pow,pt=function(t,e,r,i){if(!(this instanceof pt))return new pt(t,e,r,i);Object(t)===t&&(e=t.y,r=t.width,i=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===r?0:r,this.height=void 0===i?0:i};pt.fromEllipse=function(t){return t=new Ar(t),new pt(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},pt.fromPointUnion=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return null;var i,s,u,l,r=new F;i=s=1/0,u=l=-1/0;for(var f=0;f<t.length;f++){r.update(t[f]);var d=r.x,n=r.y;d<i&&(i=d),d>u&&(u=d),n<s&&(s=n),n>l&&(l=n)}return new pt(i,s,u-i,l-s)},pt.fromRectUnion=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return null;var i,s,u,l,r=new pt;i=s=1/0,u=l=-1/0;for(var f=0;f<t.length;f++){r.update(t[f]);var d=r.x,n=r.y,a=d+r.width,o=n+r.height;d<i&&(i=d),a>u&&(u=a),n<s&&(s=n),o>l&&(l=o)}return new pt(i,s,u-i,l-s)},pt.prototype={type:Tt.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;var r=this.width,i=this.height,s=xn(t),u=k(au(s)),l=k(ps(s)),f=r*l+i*u,d=r*u+i*l;return this.x+=(r-f)/2,this.y+=(i-d)/2,this.width=f,this.height=d,this},bottomLeft:function(){return new F(this.x,this.y+this.height)},bottomLine:function(){return new It(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new F(this.x+this.width/2,this.y+this.height)},center:function(){return new F(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new pt(this)},containsPoint:function(t){return(t=new F(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new pt(this).normalize(),r=new pt(t).normalize(),i=e.width,s=e.height,u=r.width,l=r.height;if(!(i&&s&&u&&l))return!1;var f=e.x,d=e.y,n=r.x,a=r.y;return u+=n,i+=f,l+=a,s+=d,f<=n&&u<=i&&d<=a&&l<=s},corner:function(){return new F(this.x+this.width,this.y+this.height)},equals:function(t){var e=new pt(this).normalize(),r=new pt(t).normalize();return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),r=this.corner(),i=t.origin(),s=t.corner();if(s.x<=e.x||s.y<=e.y||i.x>=r.x||i.y>=r.y)return null;var u=se(e.x,i.x),l=se(e.y,i.y);return new pt(u,l,qr(r.x,s.x)-u,qr(r.y,s.y)-l)},intersectionWithLine:function(t){var u,l,e=this,r=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],i=[],s=[],f=r.length;for(l=0;l<f;l++)null!==(u=t.intersect(r[l]))&&s.indexOf(u.toString())<0&&(i.push(u),s.push(u.toString()));return i.length>0?i:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new F(t);var i,r=new F(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(r,e);for(var s=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],u=new It(r,t),l=s.length-1;l>=0;--l){var f=s[l].intersection(u);if(null!==f){i=f;break}}return i&&e&&i.rotate(r,-e),i},leftLine:function(){return new It(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new F(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new pt(t),e||(e=t.center());var r,i,s,u,l,f,d,n,a=e.x,o=e.y;r=i=s=u=l=f=d=n=1/0;var h=t.topLeft();h.x<a&&(r=(this.x-a)/(h.x-a)),h.y<o&&(l=(this.y-o)/(h.y-o));var p=t.bottomRight();p.x>a&&(i=(this.x+this.width-a)/(p.x-a)),p.y>o&&(f=(this.y+this.height-o)/(p.y-o));var A=t.topRight();A.x>a&&(s=(this.x+this.width-a)/(A.x-a)),A.y<o&&(d=(this.y-o)/(A.y-o));var b=t.bottomLeft();return b.x<a&&(u=(this.x-a)/(b.x-a)),b.y>o&&(n=(this.y+this.height-o)/(b.y-o)),{sx:qr(r,i,s,u),sy:qr(l,f,d,n)}},maxRectUniformScaleToFit:function(t,e){var r=this.maxRectScaleToFit(t,e);return qr(r.sx,r.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,r=this.width,i=this.height;return this.width<0&&(t=this.x+this.width,r=-this.width),this.height<0&&(e=this.y+this.height,i=-this.height),this.x=t,this.y=e,this.width=r,this.height=i,this},offset:function(t,e){return F.prototype.offset.call(this,t,e)},origin:function(){return new F(this.x,this.y)},pointNearestToPoint:function(t){if(t=new F(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new F(this.x+this.width,t.y);case"left":return new F(this.x,t.y);case"bottom":return new F(t.x,this.y+this.height);case"top":return new F(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new It(this.topRight(),this.bottomRight())},rightMiddle:function(){return new F(this.x+this.width,this.y+this.height/2)},round:function(t){var e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=xh(10,t)}return this.x=su(this.x*e)/e,this.y=su(this.y*e)/e,this.width=su(this.width*e)/e,this.height=su(this.height*e)/e,this},scale:function(t,e,r){return r=this.origin().scale(t,e,r),this.x=r.x,this.y=r.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new F(t);var r=this.x+this.width-t.x,i=t.y-this.y,u=t.x-this.x,l="left";return r<u&&(u=r,l="right"),i<u&&(u=i,l="top"),this.y+this.height-t.y<u&&(l="bottom"),l},snapToGrid:function(t,e){var r=this.origin().snapToGrid(t,e),i=this.corner().snapToGrid(t,e);return this.x=r.x,this.y=r.y,this.width=i.x-r.x,this.height=i.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new It(this.topLeft(),this.topRight())},topMiddle:function(){return new F(this.x+this.width/2,this.y)},topRight:function(){return new F(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return pt.fromRectUnion(this,t)},update:function(t,e,r,i){return Object(t)===t&&(e=t.y,r=t.width,i=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=r||0,this.height=i||0,this}},pt.prototype.bottomRight=pt.prototype.corner,pt.prototype.topLeft=pt.prototype.origin,pt.prototype.translate=pt.prototype.offset;var Pa=pt;function Gc(t){if(""===(t=t.trim()))return[];for(var e=[],r=t.split(/\s*,\s*|\s+/),i=r.length,s=0;s<i;s+=2)e.push({x:+r[s],y:+r[s+1]});return e}function jc(t){var e=t.length;if(0===e)return[];for(var r=[],i=0;i<e;i++){var s=t[i].clone();r.push(s)}return r}function Bc(t){var r,i,u,e=Math.abs,s=t.length;if(0===s)return[];for(r=0;r<s;r++)(void 0===u||t[r].y<u.y||t[r].y===u.y&&t[r].x>u.x)&&(u=t[r]);var l=[];for(r=0;r<s;r++){var f=u.theta(t[r]);0===f&&(f=360),l.push([t[r],r,f])}l.sort(function(ft,gt){var ht=ft[2]-gt[2];return 0===ht&&(ht=gt[1]-ft[1]),ht}),l.length>2&&l.unshift(l[l.length-1]);for(var h,p,A,b,T,P,a={},o=[];0!==l.length;)if(p=(h=l.pop())[0],!a.hasOwnProperty(h[0]+"@@"+h[1]))for(var G=!1;!G;)if(o.length<2)o.push(h),G=!0;else{b=(A=o.pop())[0];var m=(P=(T=o.pop())[0]).cross(b,p);if(m<0)o.push(T),o.push(A),o.push(h),G=!0;else if(0===m){var M=b.angleBetween(P,p);e(M-180)<1e-10||b.equals(p)||P.equals(b)?(a[A[0]+"@@"+A[1]]=b,o.push(T)):e((M+1)%360-1)<1e-10&&(o.push(T),l.push(A))}else a[A[0]+"@@"+A[1]]=b,o.push(T)}o.length>2&&o.pop();var E,j=-1;for(i=o.length,r=0;r<i;r++){var Y=o[r][1];(void 0===E||Y<E)&&(E=Y,j=r)}var B=[];if(j>0){var H=o.slice(j),et=o.slice(0,j);B=H.concat(et)}else B=o;var at=[];for(i=B.length,r=0;r<i;r++)at.push(B[r][0]);return at}var Pe=function(t){return this instanceof Pe?"string"==typeof t?new Pe.parse(t):void(this.points=Array.isArray(t)?t.map(F):[]):new Pe(t)};Pe.parse=function(t){return new Pe(Gc(t))},Pe.fromRect=function(t){return new Pe([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},Pe.prototype={type:Tt.Polyline,bbox:function(){var t=1/0,e=-1/0,r=1/0,i=-1/0,s=this.points,u=s.length;if(0===u)return null;for(var l=0;l<u;l++){var f=s[l],d=f.x,n=f.y;d<t&&(t=d),d>e&&(e=d),n<r&&(r=n),n>i&&(i=n)}return new pt(t,r,e-t,i-r)},clone:function(){return new Pe(jc(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),r=e.length;if(0===r||1===r)return 0;for(var i,s=1/0,u=0,l=r-1,f=0;f<l;f++){var d=new It(e[f],e[f+1]),n=d.length(),a=d.closestPointNormalizedLength(t),h=d.pointAt(a).squaredDistance(t);h<s&&(s=h,i=u+a*n),u+=n}return i},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var r=this.length();return 0===r?0:e/r},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,r=e.length;if(0===r)return!1;for(var i=t.x,s=t.y,u=r-1,l=0,f=0,d=new It,n=new It,a=new F;l<r;l++){var o=e[u],h=e[l];if(t.equals(o)||(d.start=o,d.end=h,d.containsPoint(t)))return!0;if(s<=o.y&&s>h.y||s>o.y&&s<=h.y){var p=o.x-i>h.x-i?o.x-i:h.x-i;p>=0&&(a.x=i+p,a.y=s,n.start=t,n.end=a,d.intersect(n)&&f++)}u=l}return f%2==1},close:function(){var t=this,e=t.start,r=t.end,i=t.points;return e&&r&&!e.equals(r)&&i.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Pe(Bc(this.points))},equals:function(t){if(!t)return!1;var e=this.points,i=e.length;if(t.points.length!==i)return!1;for(var s=0;s<i;s++)if(!e[s].equals(t.points[s]))return!1;return!0},intersectionWithLine:function(t){for(var e=new It(t),r=[],i=this.lengthPoints(),s=new It,u=0,l=i.length-1;u<l;u++){s.start=i[u],s.end=i[u+1];var f=e.intersectionWithLine(s);f&&r.push(f[0])}return r.length>0?r:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var r=new It,i=e-1,s=0;s<i;s++)if(r.start=t[s],r.end=t[s+1],r.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var r=0,i=e-1,s=0;s<i;s++)r+=t[s].distance(t[s+1]);return r},pointAt:function(t){var e=this.lengthPoints(),r=e.length;if(0===r)return null;if(1===r||t<=0)return e[0].clone();if(t>=1)return e[r-1].clone();var i=this.length();return this.pointAtLength(i*t)},pointAtLength:function(t){var e=this.lengthPoints(),r=e.length;if(0===r)return null;if(1===r)return e[0].clone();var i=!0;t<0&&(i=!1,t=-t);for(var s=0,u=r-1,l=0;l<u;l++){var f=i?l:u-1-l,d=e[f],n=e[f+1],a=new It(d,n),o=d.distance(n);if(t<=s+o)return a.pointAtLength((i?1:-1)*(t-s));s+=o}return(i?e[r-1]:e[0]).clone()},round:function(t){for(var e=this.points,r=e.length,i=0;i<r;i++)e[i].round(t);return this},scale:function(t,e,r){for(var i=this.points,s=i.length,u=0;u<s;u++)i[u].scale(t,e,r);return this},simplify:function(t){void 0===t&&(t={});var e=this.points;if(e.length<3)return this;for(var r=t.threshold||0,i=0;e[i+2];){var u=i+1,d=e[u];new It(e[i],e[i+2]).closestPoint(d).distance(d)<=r?e.splice(u,1):i+=1}return this},tangentAt:function(t){var r=this.lengthPoints().length;if(0===r||1===r)return null;t<0&&(t=0),t>1&&(t=1);var i=this.length();return this.tangentAtLength(i*t)},tangentAtLength:function(t){var e=this.lengthPoints(),r=e.length;if(0===r||1===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var s,u=0,l=r-1,f=0;f<l;f++){var d=i?f:l-1-f,n=e[d],a=e[d+1],o=new It(n,a),h=n.distance(a);if(o.isDifferentiable()){if(t<=u+h)return o.tangentAtLength((i?1:-1)*(t-u));s=o}u+=h}return s?s.tangentAt(i?1:0):null},toString:function(){return this.points+""},translate:function(t,e){for(var r=this.points,i=r.length,s=0;s<i;s++)r[s].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var r="",i=0;i<e;i++){var s=t[i];r+=s.x+","+s.y+" "}return r.trim()}},Object.defineProperty(Pe.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Pe.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points.length;return 0===e?null:this.points[e-1]}});var ou=Math.abs,_i=Math.sqrt,Zc=Math.min,_c=Math.max,pl=Math.pow,me=function(t,e,r,i){return this instanceof me?t instanceof me?new me(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new F(t),this.controlPoint1=new F(e),this.controlPoint2=new F(r),void(this.end=new F(i))):new me(t,e,r,i)};function ao(t){var r,i,e=arguments,s=[];for(i=arguments.length,r=1;r<i;r++)s.push(e[r]);if(!t)throw new Error("Missing a parent object.");var u=Object.create(t);for(i=s.length,r=0;r<i;r++){var f,d,l=s[r];for(d in l)l.hasOwnProperty(d)&&(delete u[d],f=Object.getOwnPropertyDescriptor(l,d),Object.defineProperty(u,d,f))}return u}me.throughPoints=function(){function e(r){var i=r.length,s=[],u=[],l=2;s[0]=r[0]/l;for(var f=1;f<i;f++)u[f]=1/l,s[f]=(r[f]-s[f-1])/(l=(f<i-1?4:3.5)-u[f]);for(f=1;f<i;f++)s[i-f-1]-=u[i-f]*s[i-f];return s}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var i=function t(r){var l,i=[],s=[],u=r.length-1;if(1==u)return i[0]=new F((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),s[0]=new F(2*i[0].x-r[0].x,2*i[0].y-r[0].y),[i,s];var f=[];for(l=1;l<u-1;l++)f[l]=4*r[l].x+2*r[l+1].x;f[0]=r[0].x+2*r[1].x,f[u-1]=(8*r[u-1].x+r[u].x)/2;var d=e(f);for(l=1;l<u-1;++l)f[l]=4*r[l].y+2*r[l+1].y;f[0]=r[0].y+2*r[1].y,f[u-1]=(8*r[u-1].y+r[u].y)/2;var n=e(f);for(l=0;l<u;l++)i.push(new F(d[l],n[l])),s.push(l<u-1?new F(2*r[l+1].x-d[l+1],2*r[l+1].y-n[l+1]):new F((r[u].x+d[u-1])/2,(r[u].y+n[u-1])/2));return[i,s]}(r),s=[],u=i[0].length,l=0;l<u;l++){var f=new F(i[0][l].x,i[0][l].y),d=new F(i[1][l].x,i[1][l].y);s.push(new me(r[l],f,d,r[l+1]))}return s}}(),me.prototype={type:Tt.Curve,bbox:function(){for(var b,T,P,G,m,w,M,E,t=this.start,e=this.controlPoint1,r=this.controlPoint2,i=this.end,s=t.x,u=t.y,l=e.x,f=e.y,d=r.x,n=r.y,a=i.x,o=i.y,h=new Array,p=new Array,A=[new Array,new Array],j=0;j<2;++j)if(0===j?(T=6*s-12*l+6*d,b=-3*s+9*l-9*d+3*a,P=3*l-3*s):(T=6*u-12*f+6*n,b=-3*u+9*f-9*n+3*o,P=3*f-3*u),ou(b)<1e-12){if(ou(T)<1e-12)continue;0<(G=-P/T)&&G<1&&p.push(G)}else E=_i(M=T*T-4*P*b),!(M<0)&&(0<(m=(-T+E)/(2*b))&&m<1&&p.push(m),0<(w=(-T-E)/(2*b))&&w<1&&p.push(w));for(var H,et,at,Y=p.length,B=Y;Y--;)A[0][Y]=et=(H=1-(G=p[Y]))*H*H*s+3*H*H*G*l+3*H*G*G*d+G*G*G*a,A[1][Y]=at=H*H*H*u+3*H*H*G*f+3*H*G*G*n+G*G*G*o,h[Y]={X:et,Y:at};p[B]=0,p[B+1]=1,h[B]={X:s,Y:u},h[B+1]={X:a,Y:o},A[0][B]=s,A[1][B]=u,A[0][B+1]=a,A[1][B+1]=o,p.length=B+2,A[0].length=B+2,A[1].length=B+2,h.length=B+2;var ft=Zc.apply(null,A[0]),gt=Zc.apply(null,A[1]),ht=_c.apply(null,A[0]),wt=_c.apply(null,A[1]);return new pt(ft,gt,ht-ft,wt-gt)},clone:function(){return new me(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:r,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:r}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,s),s)},closestPointNormalizedLength:function(t,e){var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:r,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:r}):e.subdivisions},u=this.closestPointLength(t,s);if(!u)return 0;var l=this.length(s);return 0===l?0:u/l},closestPointT:function(t,e){for(var s,u,l,f,d,n,a,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i=void 0===e.subdivisions?this.getSubdivisions({precision:r}):e.subdivisions,o=i.length,h=o?1/o:0,p=0;p<o;p++){var A=i[p],b=A.start.distance(t),T=A.end.distance(t),P=b+T;(!a||P<a)&&(s=A,u=p*h,l=(p+1)*h,f=b,d=T,n=A.start.distance(A.end),a=P)}for(var G=pl(10,-r);;){var m=f?ou(f-d)/f:0,w=d?ou(f-d)/d:0;if(m<G||w<G||!f||f<n*G||!d||d<n*G)return f<=d?u:l;var B=s.divide(.5);h/=2;var H=B[0].start.distance(t),et=B[0].end.distance(t),at=H+et,ft=B[1].start.distance(t),gt=B[1].end.distance(t);at<=ft+gt?(s=B[0],l-=h,f=H,d=et):(s=B[1],u+=h,f=ft,d=gt)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var r=this.tAt(t,e);return this.divideAtT(r)},divideAtLength:function(t,e){var r=this.tAtLength(t,e);return this.divideAtT(r)},divideAtT:function(t){var e=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(t<=0)return[new me(e,e,e,e),new me(e,r,i,s)];if(t>=1)return[new me(e,r,i,s),new me(s,s,s,s)];var u=this.getSkeletonPoints(t),d=u.divider,n=u.dividerControlPoint1,a=u.dividerControlPoint2;return[new me(e,u.startControlPoint1,u.startControlPoint2,d),new me(d,n,a,s)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:i.clone()};if(t>=1)return{startControlPoint1:r.clone(),startControlPoint2:i.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};var u=new It(e,r).pointAt(t),l=new It(r,i).pointAt(t),f=new It(i,s).pointAt(t),d=new It(u,l).pointAt(t),n=new It(l,f).pointAt(t);return{startControlPoint1:u,startControlPoint2:d,divider:new It(d,n).pointAt(t),dividerControlPoint1:n,dividerControlPoint2:f}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=[new me(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return r;for(var i=this.endpointDistance(),s=pl(10,-e),u=0;;){u+=1;for(var l=[],f=r.length,d=0;d<f;d++){var a=r[d].divide(.5);l.push(a[0],a[1])}for(var o=0,h=l.length,p=0;p<h;p++)o+=l[p].endpointDistance();if(u>1&&(0!==o?(o-i)/o:0)<s)return l;r=l,i=o}},isDifferentiable:function(){var e=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(this.start.equals(e)&&e.equals(r)&&r.equals(i))},length:function(t){for(var r=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,i=0,s=r.length,u=0;u<s;u++)i+=r[u].endpointDistance();return i},lengthAtT:function(t,e){if(t<=0)return 0;var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:r})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var r=this.tAt(t,e);return this.pointAtT(r)},pointAtLength:function(t,e){var r=this.tAtLength(t,e);return this.pointAtT(r)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,r){return this.start.scale(t,e,r),this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var r=this.tAt(t,e);return this.tangentAtT(r)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var r=this.tAtLength(t,e);return this.tangentAtT(r)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),r=e.startControlPoint2,s=e.divider,u=new It(r,e.dividerControlPoint1);return u.translate(s.x-r.x,s.y-r.y),u},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:r,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:r}):e.subdivisions},u=this.length(s);return this.tAtLength(u*t,s)},tAtLength:function(t,e){var r=!0;t<0&&(r=!1,t=-t);for(var l,f,d,n,a,i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions,u={precision:i,subdivisions:s},o=0,h=s.length,p=1/h,A=0;A<h;A++){var b=r?A:h-1-A,T=s[A],P=T.endpointDistance();if(t<=o+P){l=T,f=b*p,d=(b+1)*p,n=r?t-o:P+o-t,a=r?P+o-t:t-o;break}o+=P}if(!l)return r?1:0;for(var G=this.length(u),m=pl(10,-i);;){if((0!==G?n/G:0)<m)return f;if((0!==G?a/G:0)<m)return d;var M,E,j=l.divide(.5);p/=2;var Y=j[0].endpointDistance(),B=j[1].endpointDistance();n<=Y?(l=j[0],d-=p,E=Y-(M=n)):(l=j[1],f+=p,E=B-(M=n-Y)),n=M,a=E}},toPoints:function(t){for(var r=void 0===(t=t||{}).subdivisions?this.getSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.subdivisions,i=[r[0].start.clone()],s=r.length,u=0;u<s;u++)i.push(r[u].end.clone());return i},toPolyline:function(t){return new Pe(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},me.prototype.divide=me.prototype.divideAtT;var xt=function(t){if(!(this instanceof xt))return new xt(t);if("string"==typeof t)return new xt.parse(t);var e,r;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(r=(t=t.reduce(function(f,d){return f.concat(d)},[])).length,t[0].isSegment)for(e=0;e<r;e++)this.appendSegment(t[e]);else{var s=null;for(e=0;e<r;e++){var u=t[e];if(!(u instanceof It||u instanceof me))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(xt.createSegment("M",u.start)),s&&!s.end.equals(u.start)&&this.appendSegment(xt.createSegment("M",u.start)),u instanceof It?this.appendSegment(xt.createSegment("L",u.end)):u instanceof me&&this.appendSegment(xt.createSegment("C",u.controlPoint1,u.controlPoint2,u.end)),s=u}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof It)this.appendSegment(xt.createSegment("M",t.start)),this.appendSegment(xt.createSegment("L",t.end));else if(t instanceof me)this.appendSegment(xt.createSegment("M",t.start)),this.appendSegment(xt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof Pe))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(r=t.points.length,e=0;e<r;e++){this.appendSegment(xt.createSegment(0===e?"M":"L",t.points[e]))}}};function Ni(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}xt.parse=function(t){if(!t)return new xt;for(var e=new xt,i=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),s=i.length,u=0;u<s;u++){var d=i[u].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),n=xt.createSegment.apply(this,d);e.appendSegment(n)}return e},xt.createSegment=function(t){var e=arguments;if(!t)throw new Error("Type must be provided.");var r=xt.segmentTypes[t];if(!r)throw new Error(t+" is not a recognized path segment type.");for(var i=[],s=arguments.length,u=1;u<s;u++)i.push(e[u]);return Ni(r,i)},xt.prototype={type:Tt.Path,appendSegment:function(t){var i,e=this.segments,r=e.length,s=0!==r?e[r-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(n,a){return n.concat(a)},[]))[0].isSegment)throw new Error("Segments required.");for(var l=t.length,f=0;f<l;f++)i=this.prepareSegment(t[f],s,null),e.push(i),s=i}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,null),e.push(i)}},bbox:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var r,i=0;i<e;i++){var s=t[i];if(s.isVisible){var u=s.bbox();r=r?r.union(u):u}}if(r)return r;var l=t[e-1];return new pt(l.end.x,l.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,r=new xt,i=0;i<e;i++){var s=t[i].clone();r.appendSegment(s)}return r},closestPoint:function(t,e){var r=this.closestPointT(t,e);return r?this.pointAtT(r):null},closestPointLength:function(t,e){var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:r,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions},u=this.closestPointT(t,s);return u?this.lengthAtT(u,s):0},closestPointNormalizedLength:function(t,e){var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s={precision:r,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions},u=this.closestPointLength(t,s);if(0===u)return 0;var l=this.length(s);return 0===l?0:u/l},closestPointT:function(t,e){var r=this.segments,i=r.length;if(0===i)return null;for(var l,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,f=1/0,d=0;d<i;d++){var n=r[d];if(n.isVisible){var o=n.closestPointT(t,{precision:s,subdivisions:u[d]}),h=n.pointAtT(o),p=new It(h,t).squaredLength();p<f&&(l={segmentIndex:d,value:o},f=p)}}return l||{segmentIndex:i-1,value:1}},closestPointTangent:function(t,e){var r=this.segments,i=r.length;if(0===i)return null;for(var l,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,f=1/0,d=0;d<i;d++){var n=r[d],a=u[d];if(n.isDifferentiable()){var o=n.closestPointT(t,{precision:s,subdivisions:a}),h=n.pointAtT(o),p=new It(h,t).squaredLength();p<f&&(l=n.tangentAtT(o),f=p)}}return l||null},containsPoint:function(t,e){var r=this.toPolylines(e);if(!r)return!1;for(var i=r.length,s=0,u=0;u<i;u++)r[u].containsPoint(t)&&s++;return s%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.divideAtLength(f*t,l)},divideAtLength:function(t,e){var r=this.segments.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);var l,f,n,a,o,h,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,d=0;for(l=0;l<r;l++){var A=i?l:r-1-l;f=this.getSegment(A);var b=u[A],T=f.length({precision:s,subdivisions:b});if(f.isDifferentiable()&&(o=f,h=A,t<=d+T)){a=A,n=f.divideAtLength((i?1:-1)*(t-d),{precision:s,subdivisions:b});break}d+=T}if(!o)return null;n||(a=h,n=o.divideAtT(i?1:0));var P=this.clone();P.replaceSegment(a,n);var G=a,m=a+1,w=a+2;n[0].isDifferentiable()||(P.removeSegment(G),m-=1,w-=1);var M=P.getSegment(m).start;P.insertSegment(m,xt.createSegment("M",M)),w+=1,n[1].isDifferentiable()||(P.removeSegment(w-1),w-=1);var E=w-G-1;for(l=w;l<P.segments.length;l++){var j=this.getSegment(l-E);if("Z"===(f=P.getSegment(l)).type&&!j.subpathStartSegment.end.equals(f.subpathStartSegment.end)){var Y=xt.createSegment("L",j.end);P.replaceSegment(l,Y)}}return[new xt(P.segments.slice(0,m)),new xt(P.segments.slice(m))]},equals:function(t){if(!t)return!1;var e=this.segments,r=t.segments,i=e.length;if(r.length!==i)return!1;for(var s=0;s<i;s++){var u=e[s],l=r[s];if(u.type!==l.type||!u.equals(l))return!1}return!0},getSegment:function(t){var e=this.segments,r=e.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,r=e.length,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=[],u=0;u<r;u++){var f=e[u].getSubdivisions({precision:i});s.push(f)}return s},getSubpaths:function(){for(var e=this.clone().validate().segments,r=e.length,i=[],s=0;s<r;s++){var u=e[s];u.isSubpathStart?i.push(new xt(u)):i[i.length-1].appendSegment(u)}return i},insertSegment:function(t,e){var r=this.segments,i=r.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");var s,u=null,l=null;if(0!==i&&(l=t>=1?(u=r[t-1]).nextSegment:r[0]),Array.isArray(e)){if(!(e=e.reduce(function(a,o){return a.concat(o)},[]))[0].isSegment)throw new Error("Segments required.");for(var f=e.length,d=0;d<f;d++)s=this.prepareSegment(e[d],u,l),r.splice(t+d,0,s),u=s}else{if(!e||!e.isSegment)throw new Error("Segment required.");s=this.prepareSegment(e,u,l),r.splice(t,0,s)}},intersectionWithLine:function(t,e){var r=null,i=this.toPolylines(e);if(!i)return null;for(var s=0,u=i.length;s<u;s++){var f=t.intersect(i[s]);f&&(r||(r=[]),Array.isArray(f)?Array.prototype.push.apply(r,f):r.push(f))}return r},isDifferentiable:function(){for(var t=this.segments,e=t.length,r=0;r<e;r++)if(t[r].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,r=e.length;if(0===r)return 0;for(var s=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,u=0,l=0;l<r;l++)u+=e[l].length({subdivisions:s[l]});return u},lengthAtT:function(t,e){var r=this.segments,i=r.length;if(0===i)return 0;var s=t.segmentIndex;if(s<0)return 0;var u=t.value;s>=i?(s=i-1,u=1):u<0?u=0:u>1&&(u=1);for(var l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,f=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:l}):e.segmentSubdivisions,n=0,a=0;a<s;a++){var o=r[a];n+=o.length({precisison:l,subdivisions:f[a]})}return n+(o=r[s]).lengthAtT(u,{precisison:l,subdivisions:f[s]})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.pointAtLength(f*t,l)},pointAtLength:function(t,e){var r=this.segments,i=r.length;if(0===i)return null;if(0===t)return this.start.clone();var s=!0;t<0&&(s=!1,t=-t);for(var f,u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):e.segmentSubdivisions,d=0,n=0;n<i;n++){var a=s?n:i-1-n,o=r[a],h=l[a],p=o.length({precision:u,subdivisions:h});if(o.isVisible){if(t<=d+p)return o.pointAtLength((s?1:-1)*(t-d),{precision:u,subdivisions:h});f=o}d+=p}return f?s?f.end:f.start:r[i-1].end.clone()},pointAtT:function(t){var e=this.segments,r=e.length;if(0===r)return null;var i=t.segmentIndex;if(i<0)return e[0].pointAtT(0);if(i>=r)return e[r-1].pointAtT(1);var s=t.value;return s<0?s=0:s>1&&(s=1),e[i].pointAtT(s)},PRECISION:3,prepareSegment:function(t,e,r){t.previousSegment=e,t.nextSegment=r,e&&(e.nextSegment=t),r&&(r.previousSegment=t);var i=t;return t.isSubpathStart&&(t.subpathStartSegment=t,i=r),i&&this.updateSubpathStartSegment(i),t},removeSegment:function(t){var e=this.segments,r=e.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var i=e.splice(t,1)[0],s=i.previousSegment,u=i.nextSegment;s&&(s.nextSegment=u),u&&(u.previousSegment=s),i.isSubpathStart&&u&&this.updateSubpathStartSegment(u)},replaceSegment:function(t,e){var r=this.segments,i=r.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),t>=i||t<0)throw new Error("Index out of range.");var s,u=r[t],l=u.previousSegment,f=u.nextSegment,d=u.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(h,p){return h.concat(p)},[]))[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var n=e.length,a=0;a<n;a++)s=this.prepareSegment(e[a],l,f),r.splice(t+a,0,s),l=s,d&&s.isSubpathStart&&(d=!1)}else{if(!e||!e.isSegment)throw new Error("Segment required.");s=this.prepareSegment(e,l,f),r.splice(t,1,s),d&&s.isSubpathStart&&(d=!1)}d&&f&&this.updateSubpathStartSegment(f)},round:function(t){for(var e=this.segments,r=e.length,i=0;i<r;i++)e[i].round(t);return this},scale:function(t,e,r){for(var i=this.segments,s=i.length,u=0;u<s;u++)i[u].scale(t,e,r);return this},segmentAt:function(t,e){var r=this.segmentIndexAt(t,e);return r?this.getSegment(r):null},segmentAtLength:function(t,e){var r=this.segmentIndexAtLength(t,e);return r?this.getSegment(r):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.segmentIndexAtLength(f*t,l)},segmentIndexAtLength:function(t,e){var r=this.segments,i=r.length;if(0===i)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):e.segmentSubdivisions,f=null,d=0,n=0;n<i;n++){var a=s?n:i-1-n,o=r[a],p=o.length({precision:u,subdivisions:l[a]});if(o.isVisible){if(t<=d+p)return a;f=a}d+=p}return f},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l={precision:s,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions},f=this.length(l);return this.tangentAtLength(f*t,l)},tangentAtLength:function(t,e){var r=this.segments,i=r.length;if(0===i)return null;var s=!0;t<0&&(s=!1,t=-t);for(var f,u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):e.segmentSubdivisions,d=0,n=0;n<i;n++){var a=s?n:i-1-n,o=r[a],h=l[a],p=o.length({precision:u,subdivisions:h});if(o.isDifferentiable()){if(t<=d+p)return o.tangentAtLength((s?1:-1)*(t-d),{precision:u,subdivisions:h});f=o}d+=p}return f?f.tangentAtT(s?1:0):null},tangentAtT:function(t){var e=this.segments,r=e.length;if(0===r)return null;var i=t.segmentIndex;if(i<0)return e[0].tangentAtT(0);if(i>=r)return e[r-1].tangentAtT(1);var s=t.value;return s<0?s=0:s>1&&(s=1),e[i].tangentAtT(s)},toPoints:function(t){var e=this.segments,r=e.length;if(0===r)return null;for(var s=void 0===(t=t||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===t.precision?this.PRECISION:t.precision}):t.segmentSubdivisions,u=[],l=[],f=0;f<r;f++){var d=e[f];if(d.isVisible){var n=s[f];if(n.length>0){var a=n.map(function(o){return o.start});Array.prototype.push.apply(l,a)}else l.push(d.start)}else l.length>0&&(l.push(e[f-1].end),u.push(l),l=[])}return l.length>0&&(l.push(this.end),u.push(l)),u},toPolylines:function(t){var e=[],r=this.toPoints(t);if(!r)return null;for(var i=0,s=r.length;i<s;i++)e.push(new Pe(r[i]));return e},toString:function(){for(var t=this.segments,e=t.length,r="",i=0;i<e;i++)r+=t[i].serialize()+" ";return r.trim()},translate:function(t,e){for(var r=this.segments,i=r.length,s=0;s<i;s++)r[s].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,xt.createSegment("M",0,0)),this}},Object.defineProperty(xt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var r=0;r<e;r++){var i=t[r];if(i.isVisible)return i.start}return t[e-1].end}}),Object.defineProperty(xt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var r=e-1;r>=0;r--){var i=t[r];if(i.isVisible)return i.end}return t[e-1].end}});var ka={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(ka,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(ka,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(ka,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ur=function(){for(var t=arguments,e=[],r=arguments.length,i=0;i<r;i++)e.push(t[i]);if(!(this instanceof Ur))return Ni(Ur,e);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var s;if(e[0]instanceof It){if(1===r)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===r)return this.end=new F(+e[0],+e[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var u;for(s=[],i=0;i<r;i+=2)u=e.slice(i,i+2),s.push(Ni(Ur,u));return s}if(1===r)return this.end=new F(e[0]),this;for(s=[],i=0;i<r;i+=1)s.push(new Ur(e[i]));return s},Wc={clone:function(){return new Ur(this.end)},divideAt:function(t){var r=new It(this.start,this.end).divideAt(t);return[new Ur(r[0]),new Ur(r[1])]},divideAtLength:function(t){var r=new It(this.start,this.end).divideAtLength(t);return[new Ur(r[0]),new Ur(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,r){return this.end.scale(t,e,r),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Wc,"type",{configurable:!0,enumerable:!0,value:"L"}),Ur.prototype=ao(ka,It.prototype,Wc);var _n=function(){for(var t=arguments,e=[],r=arguments.length,i=0;i<r;i++)e.push(t[i]);if(!(this instanceof _n))return Ni(_n,e);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var s,l;if(e[0]instanceof me){if(1===r)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===r)return this.controlPoint1=new F(+e[0],+e[1]),this.controlPoint2=new F(+e[2],+e[3]),this.end=new F(+e[4],+e[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var u;for(s=[],i=0;i<r;i+=6)u=e.slice(i,i+6),s.push(Ni(_n,u));return s}if(3===r)return this.controlPoint1=new F(e[0]),this.controlPoint2=new F(e[1]),this.end=new F(e[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(s=[],i=0;i<r;i+=3)l=e.slice(i,i+3),s.push(Ni(_n,l));return s},ca={clone:function(){return new _n(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var i=new me(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new _n(i[0]),new _n(i[1])]},divideAtLength:function(t,e){var i=new me(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new _n(i[0]),new _n(i[1])]},divideAtT:function(t){var r=new me(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new _n(r[0]),new _n(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(this.start.equals(e)&&e.equals(r)&&r.equals(i))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,r){return this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,r=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(ca,"type",{configurable:!0,enumerable:!0,value:"C"}),_n.prototype=ao(ka,me.prototype,ca);var Ea=function(){for(var t=arguments,e=[],r=arguments.length,i=0;i<r;i++)e.push(t[i]);if(!(this instanceof Ea))return Ni(Ea,e);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var s,l;if(e[0]instanceof It){if(1===r)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(e[0]instanceof me){if(1===r)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===r)return this.end=new F(+e[0],+e[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var u;for(s=[],i=0;i<r;i+=2)u=e.slice(i,i+2),s.push(Ni(0===i?Ea:Ur,u));return s}if(1===r)return this.end=new F(e[0]),this;for(s=[],i=0;i<r;i+=1)l=e[i],s.push(0===i?new Ea(l):new Ur(l));return s},ml={bbox:function(){return null},clone:function(){return new Ea(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,r){return this.end.scale(t,e,r),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(ml,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(ml,"type",{configurable:!0,enumerable:!0,value:"M"}),Ea.prototype=ao(ka,ml);var $r=function(){for(var t=arguments,e=[],r=arguments.length,i=0;i<r;i++)e.push(t[i]);if(!(this instanceof $r))return Ni($r,e);if(r>0)throw new Error("Closepath constructor expects no arguments.");return this},Il={clone:function(){return new $r},divideAt:function(t){var r=new It(this.start,this.end).divideAt(t);return[r[1].isDifferentiable()?new Ur(r[0]):this.clone(),new Ur(r[1])]},divideAtLength:function(t){var r=new It(this.start,this.end).divideAtLength(t);return[r[1].isDifferentiable()?new Ur(r[0]):this.clone(),new Ur(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Il,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Il,"type",{configurable:!0,enumerable:!0,value:"Z"}),$r.prototype=ao(ka,It.prototype,Il);var Nh=xt.segmentTypes={L:Ur,C:_n,M:Ea,Z:$r,z:$r};xt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Nh).join("")+",.]*$"),xt.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};var Mh={curveThroughPoints:function(t){return console.warn("deprecated"),new xt(me.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var s,e=[],r=[],i=t.length-1;if(1==i)return e[0]=new F((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new F(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,r];var u=[];for(s=1;s<i-1;s++)u[s]=4*t[s].x+2*t[s+1].x;u[0]=t[0].x+2*t[1].x,u[i-1]=(8*t[i-1].x+t[i].x)/2;var l=this.getFirstControlPoints(u);for(s=1;s<i-1;++s)u[s]=4*t[s].y+2*t[s+1].y;u[0]=t[0].y+2*t[1].y,u[i-1]=(8*t[i-1].y+t[i].y)/2;var f=this.getFirstControlPoints(u);for(s=0;s<i;s++)e.push(new F(l[s],f[s])),r.push(s<i-1?new F(2*t[s+1].x-l[s+1],2*t[s+1].y-f[s+1]):new F((t[i].x+l[i-1])/2,(t[i].y+f[i-1])/2));return[e,r]},getCurveDivider:function(t,e,r,i){console.warn("deprecated");var s=new me(t,e,r,i);return function(l){var f=s.divide(l);return[{p0:f[0].start,p1:f[0].controlPoint1,p2:f[0].controlPoint2,p3:f[0].end},{p0:f[1].start,p1:f[1].controlPoint1,p2:f[1].controlPoint2,p3:f[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,r=[],i=[],s=2;r[0]=t[0]/s;for(var u=1;u<e;u++)i[u]=1/s,r[u]=(t[u]-r[u-1])/(s=(u<e-1?4:3.5)-i[u]);for(u=1;u<e;u++)r[e-u-1]-=i[e-u]*r[e-u];return r},getInversionSolver:function(t,e,r,i){console.warn("deprecated");var s=new me(t,e,r,i);return function(l){return s.closestPointT(l)}}},Nn=function(t){return this instanceof Nn?"string"==typeof t?new Nn.parse(t):void(this.points=Array.isArray(t)?t.map(F):[]):new Nn(t)};function fa(t,e){var r=t.start.x,i=t.start.y,l=e.start.x,f=e.start.y,a=t.end.x-r,o=t.end.y-i,h=e.end.x-l,p=e.end.y-f,A=r-l,b=i-f,T=a*p-h*o,P=(a*b-o*A)/T,G=(h*b-p*A)/T;return P>=0&&P<=1&&G>=0&&G<=1}function uu(t,e){var r=t.a,i=t.b,s=t.x,u=t.y,l=e.start.x-s,d=e.start.y-u,a=r*r,o=i*i,h=e.end.x-s-l,p=e.end.y-u-d,A=h*h/a+p*p/o,b=2*l*h/a+2*d*p/o,P=b*b-4*A*(l*l/a+d*d/o-1);if(0===P){var G=-b/2/A;return G>=0&&G<=1}if(P>0){var m=Math.sqrt(P),w=(-b+m)/2/A,M=(-b-m)/2/A;return w>=0&&w<=1||M>=0&&M<=1}return!1}function Fc(t,e){return function Si(t,e,r,i){var s=Math.cos,u=Math.sin,l=u(e),f=s(e),d=u(i),n=s(i),a=l*l,o=f*f,p=d*d,A=n*n,T=t.a*t.a,P=t.b*t.b,G=r.a*r.a,m=r.b*r.b,w=T*a+P*o,M=G*p+m*A,E=T*o+P*a,j=G*A+m*p,Y=2*(P-T)*(l*f),B=2*(m-G)*(d*n),H=-2*w*t.x-Y*t.y,et=-2*M*r.x-B*r.y,at=-Y*t.x-2*E*t.y,ft=-B*r.x-2*j*r.y,gt=w*t.x*t.x+E*t.y*t.y+Y*t.x*t.y-T*P,ht=M*r.x*r.x+j*r.y*r.y+B*r.x*r.y-G*m;B/=2,et/=2,ft/=2;var wt=fi([[w,Y/=2,H/=2],[Y,E,at/=2],[H,at,gt]]),ee=fi([[M,B,et],[B,j,ft],[et,ft,ht]]),le=.33333333*(fi([[M,Y,H],[B,E,at],[et,at,gt]])+fi([[w,B,H],[Y,j,at],[H,ft,gt]])+fi([[w,Y,et],[Y,E,ft],[H,at,ht]])),ze=.33333333*(fi([[w,B,et],[Y,j,ft],[H,ft,ht]])+fi([[M,Y,et],[B,E,ft],[et,at,ht]])+fi([[M,B,H],[B,j,at],[et,ft,gt]])),kt=ys([[wt,le],[le,ze]]),Ft=ys([[wt,ze],[le,ee]]),Gt=ys([[le,ze],[ze,ee]]);return!(ys([[2*kt,Ft],[Ft,2*Gt]])>0&&(ze>0||le>0))}(t,0,e,0)}function Uc(t,e){var r=e.start,i=e.end,s=t.x,u=t.y,l=t.width,f=t.height;return!(r.x>s+l&&i.x>s+l||r.x<s&&i.x<s||r.y>u+f&&i.y>u+f||r.y<u&&i.y<u)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||fa(t.topLine(),e)||fa(t.rightLine(),e)||fa(t.bottomLine(),e)||fa(t.leftLine(),e))}function lu(t,e){return!!za(t,pt.fromEllipse(e))&&ms(Nn.fromRect(t),e)}function za(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Oa(t,e){return oo(t,e,{interior:!1})}function Al(t,e){return Jc(t,e,{interior:!1})}function yl(t,e){return bl(t,e,{interior:!1})}function Vc(t,e){return As(t,e,{interior:!1})}function ci(t,e){return oo(t,e,{interior:!0})}function ms(t,e){return Jc(t,e,{interior:!0})}function ha(t,e){return bl(t,e,{interior:!0})}function Wn(t,e){return As(t,e,{interior:!0})}function Xc(t,e){return cu(t,e,{interior:!0})}function Cl(t,e,r){return t.getSubpaths().some(function(i){var u=i.toPolylines(r)[0];return"Z"===i.getSegment(-1).type?ci(u,e):Oa(u,e)})}function wl(t,e,r){return t.getSubpaths().some(function(i){var u=i.toPolylines(r)[0];return"Z"===i.getSegment(-1).type?ms(u,e):Al(u,e)})}function Is(t,e,r){return so(t,Nn.fromRect(e),r)}function Mi(t,e,r){return Lr(t,e,r,{interior:!1})}function so(t,e,r){return Lr(t,e,r,{interior:!0})}function Hc(t,e,r,i){return t.getSubpaths().some(function(s){var l=s.toPolylines(r)[0];return"Z"===s.getSegment(-1).type?so(e,l,i):Mi(e,l,i)})}function oo(t,e,r){void 0===r&&(r={});var s,i=r.interior;if(void 0===i&&(i=!1),i){if(t.containsPoint(e.start))return!0;var u=t.start,f=t.points;s=t.end.equals(u)?f:f.concat([u])}else s=t.points;for(var d=s.length,n=new It,a=0;a<d-1;a++)if(n.start=s[a],n.end=s[a+1],fa(e,n))return!0;return!1}function Jc(t,e,r){void 0===r&&(r={});var i=t.start,s=t.end,u=t.points;if(e.containsPoint(i))return!0;var l,f=r.interior;if(void 0===f&&(f=!1),f){if(t.containsPoint(e.center()))return!0;l=s.equals(i)?u:u.concat([i])}else l=u;for(var d=l.length,n=new It,a=0;a<d-1;a++)if(n.start=l[a],n.end=l[a+1],uu(e,n))return!0;return!1}function bl(t,e,r){return cu(t,Nn.fromRect(e),r)}function Lr(t,e,r,i){return t.getSubpaths().some(function(s){var l=s.toPolylines(r)[0];return"Z"===s.getSegment(-1).type?cu(e,l,i):As(e,l,i)})}function As(t,e,r){void 0===r&&(r={});var s,i=r.interior;if(void 0===i&&(i=!1),i){if(t.containsPoint(e.start))return!0;s=t.clone().close()}else s=t;for(var l=e.points,f=l.length,d=new It,n=0;n<f-1;n++)if(d.start=l[n],d.end=l[n+1],Oa(s,d))return!0;return!1}function cu(t,e,r){return e.containsPoint(t.start)||As(t,e.clone().close(),r)}function ys(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function fi(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}Nn.parse=function(t){return new Nn(Gc(t))},Nn.fromRect=function(t){return new Nn([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},Nn.prototype=ao(Pe.prototype,{type:Tt.Polygon,clone:function(){return new Nn(jc(this.points))},convexHull:function(){return new Nn(Bc(this.points))},lengthPoints:function(){var t=this,e=t.start,i=t.points;return i.length<=1||e.equals(t.end)?i:i.concat([e.clone()])}});var Ra={exists:function Yc(t,e,r,i){switch(t.type){case Tt.Line:if(e.type===Tt.Line)return fa(t,e);break;case Tt.Ellipse:switch(e.type){case Tt.Line:return uu(t,e);case Tt.Ellipse:return Fc(t,e)}break;case Tt.Rect:switch(e.type){case Tt.Line:return Uc(t,e);case Tt.Ellipse:return lu(t,e);case Tt.Rect:return za(t,e)}break;case Tt.Polyline:switch(e.type){case Tt.Line:return Oa(t,e);case Tt.Ellipse:return Al(t,e);case Tt.Rect:return yl(t,e);case Tt.Polyline:return Vc(t,e)}break;case Tt.Polygon:switch(e.type){case Tt.Line:return ci(t,e);case Tt.Ellipse:return ms(t,e);case Tt.Rect:return ha(t,e);case Tt.Polyline:return Wn(t,e);case Tt.Polygon:return Xc(t,e)}break;case Tt.Path:switch(e.type){case Tt.Line:return Cl(t,e,r);case Tt.Ellipse:return wl(t,e,r);case Tt.Rect:return Is(t,e,r);case Tt.Polyline:return Mi(t,e,r);case Tt.Polygon:return so(t,e,r);case Tt.Path:return Hc(t,e,r,i)}}switch(e.type){case Tt.Ellipse:case Tt.Rect:case Tt.Polyline:case Tt.Polygon:case Tt.Path:return Yc(e,t,i,r);default:throw Error("The intersection for "+t+" and "+e+" could not be found.")}},lineWithLine:fa,ellipseWithLine:uu,ellipseWithEllipse:Fc,rectWithLine:Uc,rectWithEllipse:lu,rectWithRect:za,polylineWithLine:Oa,polylineWithEllipse:Al,polylineWithRect:yl,polylineWithPolyline:Vc,polygonWithLine:ci,polygonWithEllipse:ms,polygonWithRect:ha,polygonWithPolyline:Wn,polygonWithPolygon:Xc,pathWithLine:Cl,pathWithEllipse:wl,pathWithRect:Is,pathWithPolyline:Mi,pathWithPolygon:so,pathWithPath:Hc},tn={intersection:Ra,scale:{linear:function(t,e,r){return(r-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]||0}},normalizeAngle:Zn,snapToGrid:Ta,toDeg:tu,toRad:xn,random:gs,bezier:Mh,Curve:me,Ellipse:Ar,ellipse:Rc,Line:It,line:Da,Path:xt,Point:F,point:ua,Polyline:Pe,Polygon:Nn,Rect:pt,rect:Pa,types:Tt},it=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},i=Math,s=i.PI,u=i.atan2,l=i.sqrt,f=i.min,d=i.max,n=i.cos,a=i.sin,o=function(m,w,M){if(!(this instanceof o))return o.apply(Object.create(o.prototype),arguments);if(m){if(o.isV(m)&&(m=m.node),w=w||{},o.isString(m)){if("svg"===(m=m.trim()).toLowerCase())m=o.createSvgDocument();else if("<"===m[0]){var E=o.createSvgDocument(m);if(E.childNodes.length>1){var Y,B,j=[];for(Y=0,B=E.childNodes.length;Y<B;Y++){var H=E.childNodes[Y];j.push(new o(document.importNode(H,!0)))}return j}m=document.importNode(E.firstChild,!0)}else m=document.createElementNS(e.svg,m);o.ensureId(m)}return this.node=m,this.setAttributes(w),M&&this.append(M),this}},h=o.prototype;function A(m,w,M){M||(M={});for(var E=M.includeAnnotationIndices,j=M.eol,Y=M.lineHeight,B=M.baseSize,H=0,et={},at=w.length-1,ft=0;ft<=at;ft++){var gt=w[ft],ht=null;if(o.isObject(gt)){var wt=gt.attrs,ee=o("tspan",wt),le=ee.node,ze=gt.t;j&&ft===at&&(ze+=j),le.textContent=ze;var kt=wt.class;kt&&ee.addClass(kt),E&&ee.attr("annotations",gt.annotations),ht=parseFloat(wt["font-size"]),isFinite(ht)||(ht=B),ht&&ht>H&&(H=ht)}else j&&ft===at&&(gt+=j),le=document.createTextNode(gt||" "),B&&B>H&&(H=B);m.appendChild(le)}return H&&(et.maxFontSize=H),Y?et.lineHeight=Y:H&&(et.lineHeight=1.2*H),et}Object.defineProperty(h,"id",{enumerable:!0,get:function(){return this.node.id},set:function(m){this.node.id=m}}),h.getTransformToElement=function(m){var w=this.node;if(o.isSVGGraphicsElement(m)&&o.isSVGGraphicsElement(w)){var M=o.toNode(m).getScreenCTM(),E=w.getScreenCTM();if(M&&E)return M.inverse().multiply(E)}return o.createSVGMatrix()},h.transform=function(m,w){var M=this.node;if(o.isUndefined(m))return o.transformStringToMatrix(this.attr("transform"));if(w&&w.absolute)return this.attr("transform",o.matrixToTransformString(m));var E=o.createSVGTransform(m);return M.transform.baseVal.appendItem(E),this},h.translate=function(m,w,M){M=M||{},w=w||0;var E=this.attr("transform")||"",j=o.parseTransformString(E);return E=j.value,o.isUndefined(m)?j.translate:(E=E.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(M.absolute?m:j.translate.tx+m)+","+(M.absolute?w:j.translate.ty+w)+") "+E).trim()),this)},h.rotate=function(m,w,M,E){E=E||{};var j=this.attr("transform")||"",Y=o.parseTransformString(j);return j=Y.value,o.isUndefined(m)?Y.rotate:(j=j.replace(/rotate\([^)]*\)/g,"").trim(),m%=360,this.attr("transform",(j+" rotate("+(E.absolute?m:Y.rotate.angle+m)+(void 0!==w&&void 0!==M?","+w+","+M:"")+")").trim()),this)},h.scale=function(m,w){w=o.isUndefined(w)?m:w;var M=this.attr("transform")||"",E=o.parseTransformString(M);return M=E.value,o.isUndefined(m)?E.scale:(M=M.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(M+" scale("+m+","+w+")").trim()),this)},h.bbox=function(m,w){var M,E=this.node,j=E.ownerSVGElement;if(!j)return new pt(0,0,0,0);try{M=E.getBBox()}catch(B){M={x:E.clientLeft,y:E.clientTop,width:E.clientWidth,height:E.clientHeight}}if(m)return new pt(M);var Y=this.getTransformToElement(w||j);return o.transformRect(M,Y)},h.getBBox=function(m){var M,w={},E=this.node;if(!E.ownerSVGElement||!o.isSVGGraphicsElement(E))return new pt(0,0,0,0);if(m&&(m.target&&(w.target=o.toNode(m.target)),m.recursive&&(w.recursive=m.recursive)),w.recursive){var B=this.children(),H=B.length;if(0===H)return this.getBBox({target:w.target,recursive:!1});w.target||(w.target=this);for(var et=0;et<H;et++){var ft,at=B[et];ft=0===at.children().length?at.getBBox({target:w.target,recursive:!1}):at.getBBox({target:w.target,recursive:!0}),M=M?M.union(ft):ft}return M}try{M=E.getBBox()}catch(gt){M={x:E.clientLeft,y:E.clientTop,width:E.clientWidth,height:E.clientHeight}}if(w.target){var Y=this.getTransformToElement(w.target);return o.transformRect(M,Y)}return new pt(M)};var b=/em$/;function T(m,w){var M=parseFloat(m);return b.test(m)?M*w:M}h.text=function(m,w){if(m&&"string"!=typeof m)throw new Error("Vectorizer: text() expects the first argument to be a string.");m=o.sanitizeText(m),w||(w={});var M=w.displayEmpty,E=w.eol,j=w.textPath,Y=w.textVerticalAnchor,B="middle"===Y||"bottom"===Y||"top"===Y,H=w.x;void 0===H&&(H=this.attr("x")||0);var et=w.includeAnnotationIndices,at=w.annotations;at&&!o.isArray(at)&&(at=[at]);var ft=w.lineHeight,gt="auto"===ft,ht=gt?"1.5em":ft||"1em";this.empty(),this.attr({"xml:space":"preserve",display:m||M?null:"none"});var wt=parseFloat(this.attr("font-size"));wt||(wt=16,(B||at)&&this.attr("font-size",wt));var le,ee=document;j?("string"==typeof j&&(j={d:j}),le=function p(m,w){m||(m={});var M=o("textPath"),E=m.d;if(E&&void 0===m["xlink:href"]){var j=o("path").attr("d",E).appendTo(w.defs());M.attr("xlink:href","#"+j.id)}return o.isObject(m)&&M.attr(m),M.node}(j,this)):le=ee.createDocumentFragment();for(var Gt,ze=0,kt=m.split("\n"),Ft=[],Et=0,ue=kt.length-1;Et<=ue;Et++){var de,xe=ht,Me="v-line",ie=ee.createElementNS(e.svg,"tspan"),ir=kt[Et];if(ir)if(at){var ce=(de=A(ie,o.annotateString(ir,at,{offset:-ze,includeAnnotationIndices:et}),{includeAnnotationIndices:et,eol:Et!==ue&&E,lineHeight:gt?null:ht,baseSize:wt})).lineHeight;ce&&gt&&0!==Et&&(xe=ce),0===Et&&(Gt=.8*de.maxFontSize)}else E&&Et!==ue&&(ir+=E),ie.textContent=ir;else{ie.textContent="-",Me+=" v-empty-line";var zt=ie.style;zt.fillOpacity=0,zt.strokeOpacity=0,at&&(de={})}de&&Ft.push(de),Et>0&&ie.setAttribute("dy",xe),(Et>0||j)&&ie.setAttribute("x",H),ie.className.baseVal=Me,le.appendChild(ie),ze+=ir.length+1}if(B)if(at)xe=function P(m,w,M,E){if(!Array.isArray(w))return 0;var j=w.length;if(!j)return 0;for(var Y=w[0],B=T(Y.maxFontSize,M)||M,H=0,et=T(E,M),at=1;at<j;at++)H+=T((Y=w[at]).lineHeight,M)||et;var ht,gt=T(Y.maxFontSize,M)||M;switch(m){case"middle":ht=B/2-.15*gt-H/2;break;case"bottom":ht=-.25*gt-H;break;default:ht=.8*B}return ht}(Y,Ft,wt,ht);else if("top"===Y)xe="0.8em";else{var At;switch(ue>0?(At=parseFloat(ht)||1,At*=ue,b.test(ht)||(At/=wt)):At=0,Y){case"middle":xe=.3-At/2+"em";break;case"bottom":xe=-At-.3+"em"}}else 0===Y?xe="0em":Y?xe=Y:(xe=0,null===this.attr("y")&&this.attr("y",Gt||"0.8em"));return le.firstChild.setAttribute("dy",xe),this.append(le),this},h.removeAttr=function(m){var w=o.qualifyAttr(m),M=this.node;return w.ns?M.hasAttributeNS(w.ns,w.local)&&M.removeAttributeNS(w.ns,w.local):M.hasAttribute(m)&&M.removeAttribute(m),this},h.attr=function(m,w){if(o.isUndefined(m)){for(var M=this.node.attributes,E={},j=0;j<M.length;j++)E[M[j].name]=M[j].value;return E}if(o.isString(m)&&o.isUndefined(w))return this.node.getAttribute(m);if("object"==typeof m)for(var Y in m)m.hasOwnProperty(Y)&&this.setAttribute(Y,m[Y]);else this.setAttribute(m,w);return this},h.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",o.normalizePathData(this.attr("d"))),this},h.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},h.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},h.setAttributes=function(m){for(var w in m)m.hasOwnProperty(w)&&this.setAttribute(w,m[w]);return this},h.append=function(m){o.isArray(m)||(m=[m]);for(var w=0,M=m.length;w<M;w++)this.node.appendChild(o.toNode(m[w]));return this},h.prepend=function(m){var w=this.node.firstChild;return w?o(w).before(m):this.append(m)},h.before=function(m){var w=this.node,M=w.parentNode;if(M){o.isArray(m)||(m=[m]);for(var E=0,j=m.length;E<j;E++)M.insertBefore(o.toNode(m[E]),w)}return this},h.appendTo=function(m){return o.toNode(m).appendChild(this.node),this},h.svg=function(){return this.node instanceof window.SVGSVGElement?this:o(this.node.ownerSVGElement)},h.tagName=function(){return this.node.tagName.toUpperCase()},h.defs=function(){var m=this.svg()||this,w=m.node.getElementsByTagName("defs")[0];return w?o(w):o("defs").appendTo(m)},h.clone=function(){var m=o(this.node.cloneNode(!0));return m.node.id=o.uniqueId(),m},h.findOne=function(m){var w=this.node.querySelector(m);return w?o(w):void 0},h.find=function(m){var w=[],M=this.node.querySelectorAll(m);if(M)for(var E=0;E<M.length;E++)w.push(o(M[E]));return w},h.children=function(){for(var m=this.node.childNodes,w=[],M=0;M<m.length;M++)1===m[M].nodeType&&w.push(o(m[M]));return w},h.parent=function(){return o(this.node.parentNode)||null},h.index=function(){for(var m=0,w=this.node.previousSibling;w;)1===w.nodeType&&m++,w=w.previousSibling;return m},h.findParentByClass=function(m,w){for(var M=this.node.ownerSVGElement,E=this.node.parentNode;E&&E!==w&&E!==M;){var j=o(E);if(j.hasClass(m))return j;E=E.parentNode}return null},h.contains=function(m){var w=this.node,M=o.toNode(m),E=M&&M.parentNode;return w===E||!!(E&&1===E.nodeType&&16&w.compareDocumentPosition(E))},h.toLocalPoint=function(m,w){var M=this.svg().node,E=M.createSVGPoint();E.x=m,E.y=w;try{var j=E.matrixTransform(M.getScreenCTM().inverse()),Y=this.getTransformToElement(M).inverse()}catch(B){return E}return j.matrixTransform(Y)},h.translateCenterToPoint=function(m){var M=this.getBBox({target:this.svg()}).center();return this.translate(m.x-M.x,m.y-M.y),this},h.translateAndAutoOrient=function(m,w,M){m=new F(m),w=new F(w),M||(M=this.svg());var E=this.scale();this.attr("transform","");var j=this.getBBox({target:M}).scale(E.sx,E.sy),Y=o.createSVGTransform();Y.setTranslate(-j.x-j.width/2,-j.y-j.height/2);var B=o.createSVGTransform(),H=m.angleBetween(w,m.clone().offset(1,0));H&&B.setRotate(H,0,0);var et=o.createSVGTransform(),at=m.clone().move(w,j.width/2);et.setTranslate(2*m.x-at.x,2*m.y-at.y);var ft=this.getTransformToElement(M),gt=o.createSVGTransform();return gt.setMatrix(et.matrix.multiply(B.matrix.multiply(Y.matrix.multiply(ft.scale(E.sx,E.sy))))),this.attr("transform",o.matrixToTransformString(gt.matrix)),this},h.animateAlongPath=function(m,w){w=o.toNode(w);var M=o.ensureId(w),E=o("animateMotion",m),j=o("mpath",{"xlink:href":"#"+M});E.append(j),this.append(E);try{E.node.beginElement()}catch(ht){if("fake"===document.documentElement.getAttribute("smiling")){var Y=E.node;Y.animators=[];var B=Y.getAttribute("id");B&&(id2anim[B]=Y);for(var H=getTargets(Y),et=0,at=H.length;et<at;et++){var gt=new Animator(Y,H[et],et);animators.push(gt),Y.animators[et]=gt,gt.register()}}}return this},h.hasClass=function(m){return new RegExp("(\\s|^)"+m+"(\\s|$)").test(this.node.getAttribute("class"))},h.addClass=function(m){if(m&&!this.hasClass(m)){var w=this.node.getAttribute("class")||"";this.node.setAttribute("class",(w+" "+m).trim())}return this},h.removeClass=function(m){if(m&&this.hasClass(m)){var w=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+m+"(\\s|$)","g"),"$2");this.node.setAttribute("class",w)}return this},h.toggleClass=function(m,w){return(o.isUndefined(w)?this.hasClass(m):!w)?this.removeClass(m):this.addClass(m),this},h.sample=function(m){m=m||1;for(var Y,w=this.node,M=w.getTotalLength(),E=[],j=0;j<M;)Y=w.getPointAtLength(j),E.push({x:Y.x,y:Y.y,distance:j}),j+=m;return E},h.convertToPath=function(){var m=o("path");m.attr(this.attr());var w=this.convertToPathData();return w&&m.attr("d",w),m},h.convertToPathData=function(){var m=this.tagName();switch(m){case"PATH":return this.attr("d");case"LINE":return o.convertLineToPathData(this.node);case"POLYGON":return o.convertPolygonToPathData(this.node);case"POLYLINE":return o.convertPolylineToPathData(this.node);case"ELLIPSE":return o.convertEllipseToPathData(this.node);case"CIRCLE":return o.convertCircleToPathData(this.node);case"RECT":return o.convertRectToPathData(this.node)}throw new Error(m+" cannot be converted to PATH.")},o.prototype.toGeometryShape=function(){var m,w,M,E,j,Y,B,H,et,at,ft,gt,ht,wt,ee;switch(this.tagName()){case"RECT":return m=parseFloat(this.attr("x"))||0,w=parseFloat(this.attr("y"))||0,M=parseFloat(this.attr("width"))||0,E=parseFloat(this.attr("height"))||0,new pt(m,w,M,E);case"CIRCLE":return j=parseFloat(this.attr("cx"))||0,Y=parseFloat(this.attr("cy"))||0,B=parseFloat(this.attr("r"))||0,new Ar({x:j,y:Y},B,B);case"ELLIPSE":return j=parseFloat(this.attr("cx"))||0,Y=parseFloat(this.attr("cy"))||0,H=parseFloat(this.attr("rx"))||0,et=parseFloat(this.attr("ry"))||0,new Ar({x:j,y:Y},H,et);case"POLYLINE":return at=o.getPointsFromSvgNode(this),new Pe(at);case"POLYGON":return(at=o.getPointsFromSvgNode(this)).length>1&&at.push(at[0]),new Pe(at);case"PATH":return ft=this.attr("d"),xt.isDataSupported(ft)||(ft=o.normalizePathData(ft)),new xt(ft);case"LINE":return gt=parseFloat(this.attr("x1"))||0,wt=parseFloat(this.attr("y1"))||0,ht=parseFloat(this.attr("x2"))||0,ee=parseFloat(this.attr("y2"))||0,new It({x:gt,y:wt},{x:ht,y:ee})}return this.getBBox()},h.findIntersection=function(m,w){var M=this.svg().node,E=this.getBBox({target:w=w||M}),j=E.center();if(E.intersectionWithLineFromCenterToPoint(m)){var Y,B=this.tagName();if("RECT"===B){var H=new pt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),et=this.getTransformToElement(w),at=o.decomposeMatrix(et),ft=M.createSVGTransform();ft.setRotate(-at.rotation,j.x,j.y);var gt=o.transformRect(H,ft.matrix.multiply(et));Y=new pt(gt).intersectionWithLineFromCenterToPoint(m,at.rotation)}else if("PATH"===B||"POLYGON"===B||"POLYLINE"===B||"CIRCLE"===B||"ELLIPSE"===B){var ze,kt,Ft,Et,ue,wt=("PATH"===B?this:this.convertToPath()).sample(),ee=1/0,le=[];for(ze=0;ze<wt.length;ze++)Ft=(Ft=o.createSVGPoint((kt=wt[ze]).x,kt.y)).matrixTransform(this.getTransformToElement(w)),(ue=(kt=new F(Ft)).distance(j)+(Et=1.1*kt.distance(m)))<ee?(ee=ue,le=[{sample:kt,refDistance:Et}]):ue<ee+1&&le.push({sample:kt,refDistance:Et});le.sort(function(xe,Me){return xe.refDistance-Me.refDistance}),le[0]&&(Y=le[0].sample)}return Y}},h.setAttribute=function(m,w){var M=this.node;if(null===w)return this.removeAttr(m),this;var E=o.qualifyAttr(m);return E.ns?M.setAttributeNS(E.ns,m,w):"id"===m?M.id=w:M.setAttribute(m,w),this},o.createSvgDocument=function(m){if(m)return o.parseXML('<svg xmlns="'+e.svg+'" xmlns:xlink="'+e.xlink+'" version="1.1">'+m+"</svg>",{async:!1}).documentElement;var j=document.createElementNS(e.svg,"svg");return j.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),j.setAttribute("version","1.1"),j},o.createSVGStyle=function(m){return o("style",{type:"text/css"},[o.createCDATASection(m)]).node},o.createCDATASection=function(m){return void 0===m&&(m=""),document.implementation.createDocument(null,"xml",null).createCDATASection(m)},o.idCounter=0,o.uniqueId=function(){return"v-"+ ++o.idCounter},o.toNode=function(m){return o.isV(m)?m.node:m.nodeName&&m||m[0]},o.ensureId=function(m){return(m=o.toNode(m)).id||(m.id=o.uniqueId())},o.sanitizeText=function(m){return(m||"").replace(/ /g,"\xa0")},o.isUndefined=function(m){return void 0===m},o.isString=function(m){return"string"==typeof m},o.isObject=function(m){return m&&"object"==typeof m},o.isArray=Array.isArray,o.parseXML=function(m,w){var M;w=w||{};try{var E=new DOMParser;o.isUndefined(w.async)||(E.async=w.async),M=E.parseFromString(m,"text/xml")}catch(j){M=void 0}if(!M||M.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+m);return M},o.qualifyAttr=function(m){if(-1!==m.indexOf(":")){var w=m.split(":");return{ns:e[w[0]],local:w[1]}}return{ns:null,local:m}},o.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,o.transformSeparatorRegex=/[ ,]+/,o.transformationListRegex=/^(\w+)\((.*)\)/,o.transformStringToMatrix=function(m){var w=o.createSVGMatrix(),M=m&&m.match(o.transformRegex);if(!M)return w;for(var E=0,j=M.length;E<j;E++){var B=M[E].match(o.transformationListRegex);if(B){var H,et,at,ft,gt,ht=o.createSVGMatrix(),wt=B[2].split(o.transformSeparatorRegex);switch(B[1].toLowerCase()){case"scale":H=parseFloat(wt[0]),et=void 0===wt[1]?H:parseFloat(wt[1]),ht=ht.scaleNonUniform(H,et);break;case"translate":at=parseFloat(wt[0]),ft=parseFloat(wt[1]),ht=ht.translate(at,ft);break;case"rotate":gt=parseFloat(wt[0]),at=parseFloat(wt[1])||0,ft=parseFloat(wt[2])||0,ht=0!==at||0!==ft?ht.translate(at,ft).rotate(gt).translate(-at,-ft):ht.rotate(gt);break;case"skewx":gt=parseFloat(wt[0]),ht=ht.skewX(gt);break;case"skewy":gt=parseFloat(wt[0]),ht=ht.skewY(gt);break;case"matrix":ht.a=parseFloat(wt[0]),ht.b=parseFloat(wt[1]),ht.c=parseFloat(wt[2]),ht.d=parseFloat(wt[3]),ht.e=parseFloat(wt[4]),ht.f=parseFloat(wt[5]);break;default:continue}w=w.multiply(ht)}}return w},o.matrixToTransformString=function(m){return m||(m=!0),"matrix("+(void 0!==m.a?m.a:1)+","+(void 0!==m.b?m.b:0)+","+(void 0!==m.c?m.c:0)+","+(void 0!==m.d?m.d:1)+","+(void 0!==m.e?m.e:0)+","+(void 0!==m.f?m.f:0)+")"},o.parseTransformString=function(m){var w,M,E;if(m){var j=o.transformSeparatorRegex;if(m.trim().indexOf("matrix")>=0){var Y=o.transformStringToMatrix(m),B=o.decomposeMatrix(Y);E=[B.scaleX,B.scaleY],M=[B.rotation];var H=[];(0!==(w=[B.translateX,B.translateY])[0]||0!==w[1])&&H.push("translate("+w+")"),(1!==E[0]||1!==E[1])&&H.push("scale("+E+")"),0!==M[0]&&H.push("rotate("+M+")"),m=H.join(" ")}else{var et=m.match(/translate\((.*?)\)/);et&&(w=et[1].split(j));var at=m.match(/rotate\((.*?)\)/);at&&(M=at[1].split(j));var ft=m.match(/scale\((.*?)\)/);ft&&(E=ft[1].split(j))}}var gt=E&&E[0]?parseFloat(E[0]):1;return{value:m,translate:{tx:w&&w[0]?parseInt(w[0],10):0,ty:w&&w[1]?parseInt(w[1],10):0},rotate:{angle:M&&M[0]?parseInt(M[0],10):0,cx:M&&M[1]?parseInt(M[1],10):void 0,cy:M&&M[2]?parseInt(M[2],10):void 0},scale:{sx:gt,sy:E&&E[1]?parseFloat(E[1]):gt}}},o.deltaTransformPoint=function(m,w){return{x:w.x*m.a+w.y*m.c+0,y:w.x*m.b+w.y*m.d+0}},o.decomposeMatrix=function(m){var w=o.deltaTransformPoint(m,{x:0,y:1}),M=o.deltaTransformPoint(m,{x:1,y:0}),E=180/s*u(w.y,w.x)-90,j=180/s*u(M.y,M.x);return{translateX:m.e,translateY:m.f,scaleX:l(m.a*m.a+m.b*m.b),scaleY:l(m.c*m.c+m.d*m.d),skewX:E,skewY:j,rotation:E}},o.matrixToScale=function(m){var w,M,E,j;return m?(w=o.isUndefined(m.a)?1:m.a,j=o.isUndefined(m.d)?1:m.d,M=m.b,E=m.c):w=j=1,{sx:M?l(w*w+M*M):w,sy:E?l(E*E+j*j):j}},o.matrixToRotate=function(m){var w={x:0,y:1};return m&&(w=o.deltaTransformPoint(m,w)),{angle:Zn(tu(u(w.y,w.x))-90)}},o.matrixToTranslate=function(m){return{tx:m&&m.e||0,ty:m&&m.f||0}},o.isV=function(m){return m instanceof o},o.isVElement=o.isV,o.isSVGGraphicsElement=function(m){return!!m&&(m=o.toNode(m))instanceof SVGElement&&"function"==typeof m.getScreenCTM};var G=o("svg").node;return o.createSVGMatrix=function(m){var w=G.createSVGMatrix();for(var M in m)w[M]=m[M];return w},o.createSVGTransform=function(m){return o.isUndefined(m)?G.createSVGTransform():(m instanceof SVGMatrix||(m=o.createSVGMatrix(m)),G.createSVGTransformFromMatrix(m))},o.createSVGPoint=function(m,w){var M=G.createSVGPoint();return M.x=m,M.y=w,M},o.transformRect=function(m,w){var M=G.createSVGPoint();M.x=m.x,M.y=m.y;var E=M.matrixTransform(w);M.x=m.x+m.width,M.y=m.y;var j=M.matrixTransform(w);M.x=m.x+m.width,M.y=m.y+m.height;var Y=M.matrixTransform(w);M.x=m.x,M.y=m.y+m.height;var B=M.matrixTransform(w),H=f(E.x,j.x,Y.x,B.x),et=d(E.x,j.x,Y.x,B.x),at=f(E.y,j.y,Y.y,B.y),ft=d(E.y,j.y,Y.y,B.y);return new pt(H,at,et-H,ft-at)},o.transformPoint=function(m,w){return new F(o.createSVGPoint(m.x,m.y).matrixTransform(w))},o.transformLine=function(m,w){return new It(o.transformPoint(m.start,w),o.transformPoint(m.end,w))},o.transformPolyline=function(m,w){var M=m instanceof Pe?m.points:m;o.isArray(M)||(M=[]);for(var E=[],j=0,Y=M.length;j<Y;j++)E[j]=o.transformPoint(M[j],w);return new Pe(E)},o.styleToObject=function(m){for(var w={},M=m.split(";"),E=0;E<M.length;E++){var Y=M[E].split("=");w[Y[0].trim()]=Y[1].trim()}return w},o.createSlicePathData=function(m,w,M,E){var j=2*s-1e-6,Y=m,B=w,H=M,et=E,at=(et<H&&(at=H,H=et,et=at),et-H),ft=at<s?"0":"1",gt=n(H),ht=a(H),wt=n(et),ee=a(et);return at>=j?Y?"M0,"+B+"A"+B+","+B+" 0 1,1 0,"+-B+"A"+B+","+B+" 0 1,1 0,"+B+"M0,"+Y+"A"+Y+","+Y+" 0 1,0 0,"+-Y+"A"+Y+","+Y+" 0 1,0 0,"+Y+"Z":"M0,"+B+"A"+B+","+B+" 0 1,1 0,"+-B+"A"+B+","+B+" 0 1,1 0,"+B+"Z":Y?"M"+B*gt+","+B*ht+"A"+B+","+B+" 0 "+ft+",1 "+B*wt+","+B*ee+"L"+Y*wt+","+Y*ee+"A"+Y+","+Y+" 0 "+ft+",0 "+Y*gt+","+Y*ht+"Z":"M"+B*gt+","+B*ht+"A"+B+","+B+" 0 "+ft+",1 "+B*wt+","+B*ee+"L0,0Z"},o.mergeAttrs=function(m,w){for(var M in w)m[M]="class"===M?m[M]?m[M]+" "+w[M]:w[M]:"style"===M?o.isObject(m[M])&&o.isObject(w[M])?o.mergeAttrs(m[M],w[M]):o.isObject(m[M])?o.mergeAttrs(m[M],o.styleToObject(w[M])):o.isObject(w[M])?o.mergeAttrs(o.styleToObject(m[M]),w[M]):o.mergeAttrs(o.styleToObject(m[M]),o.styleToObject(w[M])):w[M];return m},o.annotateString=function(m,w,M){w=w||[];for(var Y,H,et,E=(M=M||{}).offset||0,j=[],B=[],at=0;at<m.length;at++){H=B[at]=m[at];for(var ft=0;ft<w.length;ft++){var gt=w[ft];at>=gt.start+E&&at<gt.end+E&&(o.isObject(H)?H.attrs=o.mergeAttrs(o.mergeAttrs({},H.attrs),gt.attrs):H=B[at]={t:m[at],attrs:gt.attrs},M.includeAnnotationIndices&&(H.annotations||(H.annotations=[])).push(ft))}(et=B[at-1])?o.isObject(H)&&o.isObject(et)?JSON.stringify(H.attrs)===JSON.stringify(et.attrs)?Y.t+=H.t:(j.push(Y),Y=H):o.isObject(H)||o.isObject(et)?(j.push(Y),Y=H):Y=(Y||"")+H:Y=H}return Y&&j.push(Y),j},o.findAnnotationsAtIndex=function(m,w){var M=[];return m&&m.forEach(function(E){E.start<w&&w<=E.end&&M.push(E)}),M},o.findAnnotationsBetweenIndexes=function(m,w,M){var E=[];return m&&m.forEach(function(j){(w>=j.start&&w<j.end||M>j.start&&M<=j.end||j.start>=w&&j.end<M)&&E.push(j)}),E},o.shiftAnnotations=function(m,w,M){return m&&m.forEach(function(E){E.start<w&&E.end>=w?E.end+=M:E.start>=w&&(E.start+=M,E.end+=M)}),m},o.convertLineToPathData=function(m){return["M",(m=o(m)).attr("x1"),m.attr("y1"),"L",m.attr("x2"),m.attr("y2")].join(" ")},o.convertPolygonToPathData=function(m){var w=o.getPointsFromSvgNode(m);return 0===w.length?null:o.svgPointsToPath(w)+" Z"},o.convertPolylineToPathData=function(m){var w=o.getPointsFromSvgNode(m);return 0===w.length?null:o.svgPointsToPath(w)},o.svgPointsToPath=function(m){for(var w=0,M=m.length;w<M;w++)m[w]=m[w].x+" "+m[w].y;return"M "+m.join(" L")},o.getPointsFromSvgNode=function(m){var w=[],M=(m=o.toNode(m)).points;if(M)for(var E=0,j=M.numberOfItems;E<j;E++)w.push(M.getItem(E));return w},o.KAPPA=.551784,o.convertCircleToPathData=function(m){m=o(m);var w=parseFloat(m.attr("cx"))||0,M=parseFloat(m.attr("cy"))||0,E=parseFloat(m.attr("r")),j=E*o.KAPPA;return["M",w,M-E,"C",w+j,M-E,w+E,M-j,w+E,M,"C",w+E,M+j,w+j,M+E,w,M+E,"C",w-j,M+E,w-E,M+j,w-E,M,"C",w-E,M-j,w-j,M-E,w,M-E,"Z"].join(" ")},o.convertEllipseToPathData=function(m){m=o(m);var w=parseFloat(m.attr("cx"))||0,M=parseFloat(m.attr("cy"))||0,E=parseFloat(m.attr("rx")),j=parseFloat(m.attr("ry"))||E,Y=E*o.KAPPA,B=j*o.KAPPA;return["M",w,M-j,"C",w+Y,M-j,w+E,M-B,w+E,M,"C",w+E,M+B,w+Y,M+j,w,M+j,"C",w-Y,M+j,w-E,M+B,w-E,M,"C",w-E,M-B,w-Y,M-j,w,M-j,"Z"].join(" ")},o.convertRectToPathData=function(m){return m=o(m),o.rectToPath({x:parseFloat(m.attr("x"))||0,y:parseFloat(m.attr("y"))||0,width:parseFloat(m.attr("width"))||0,height:parseFloat(m.attr("height"))||0,rx:parseFloat(m.attr("rx"))||0,ry:parseFloat(m.attr("ry"))||0})},o.rectToPath=function(m){var M=m.x,E=m.y,j=m.width,Y=m.height,B=f(m.rx||m["top-rx"]||0,j/2),H=f(m.rx||m["bottom-rx"]||0,j/2),et=f(m.ry||m["top-ry"]||0,Y/2),at=f(m.ry||m["bottom-ry"]||0,Y/2);return(B||H||et||at?["M",M,E+et,"v",Y-et-at,"a",H,at,0,0,0,H,at,"h",j-2*H,"a",H,at,0,0,0,H,-at,"v",-(Y-at-et),"a",B,et,0,0,0,-B,-et,"h",-(j-2*B),"a",B,et,0,0,0,-B,et,"Z"]:["M",M,E,"H",M+j,"V",E+Y,"H",M,"V",E,"Z"]).join(" ")},o.normalizePathData=function(){var m="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",w=new RegExp("([a-z])["+m+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+m+"]*,?["+m+"]*)+)","ig"),M=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+m+"]*,?["+m+"]*","ig"),E=Math,j=E.PI,Y=E.sin,B=E.cos,H=E.tan,et=E.asin,at=E.sqrt,ft=E.abs;function gt(kt,Ft,Gt,Et,ue,xe){var Me=1/3,ie=2/3;return[Me*kt+ie*Gt,Me*Ft+ie*Et,Me*ue+ie*Gt,Me*xe+ie*Et,ue,xe]}function ht(kt,Ft,Gt){return{x:kt*B(Gt)-Ft*Y(Gt),y:kt*Y(Gt)+Ft*B(Gt)}}function wt(kt,Ft,Gt,Et,ue,xe,Me,ie,ir,de){var At,Kt=120*j/180,ce=j/180*(+ue||0),zt=[];if(de)mn=de[0],br=de[1],Sc=de[2],Tc=de[3];else{Ft=(At=ht(kt,Ft,-ce)).y;var pn=((kt=At.x)-(ie=(At=ht(ie,ir,-ce)).x))/2,Pn=(Ft-(ir=At.y))/2,Va=pn*pn/(Gt*Gt)+Pn*Pn/(Et*Et);Va>1&&(Gt*=Va=at(Va),Et*=Va);var xv=Gt*Gt,Nv=Et*Et,Tv=(xe==Me?-1:1)*at(ft((xv*Nv-xv*Pn*Pn-Nv*pn*pn)/(xv*Pn*Pn+Nv*pn*pn))),Sc=Tv*Gt*Pn/Et+(kt+ie)/2,Tc=Tv*-Et*pn/Gt+(Ft+ir)/2,mn=et(((Ft-Tc)/Et).toFixed(9)),br=et(((ir-Tc)/Et).toFixed(9));(mn=kt<Sc?j-mn:mn)<0&&(mn=2*j+mn),(br=ie<Sc?j-br:br)<0&&(br=2*j+br),Me&&mn>br&&(mn-=2*j),!Me&&br>mn&&(br-=2*j)}var Mv=br-mn;if(ft(Mv)>Kt){var Rv=br,Gv=ie,jv=ir;zt=wt(ie=Sc+Gt*B(br=mn+Kt*(Me&&br>mn?1:-1)),ir=Tc+Et*Y(br),Gt,Et,ue,0,Me,Gv,jv,[br,Rv,Sc,Tc])}Mv=br-mn;var Bv=B(mn),Zv=Y(mn),_v=B(br),Wv=Y(br),Lv=H(Mv/4),Dv=4/3*(Gt*Lv),Pv=4/3*(Et*Lv),kv=[kt,Ft],el=[kt+Dv*Zv,Ft-Pv*Bv],Ev=[ie+Dv*Wv,ir-Pv*_v],zv=[ie,ir];if(el[0]=2*kv[0]-el[0],el[1]=2*kv[1]-el[1],de)return[el,Ev,zv].concat(zt);for(var Ov=[],Yv=(zt=[el,Ev,zv].concat(zt).join().split(",")).length,Es=0;Es<Yv;Es++)Ov[Es]=Es%2?ht(zt[Es-1],zt[Es],ce).y:ht(zt[Es],zt[Es+1],ce).x;return Ov}function ze(kt){var Ft=function le(kt){if((!Array.isArray(kt)||!Array.isArray(kt&&kt[0]))&&(kt=function ee(kt){if(!kt)return null;var Ft={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Gt=[];return String(kt).replace(w,function(Et,ue,xe){var Me=[],ie=ue.toLowerCase();for(xe.replace(M,function(ir,de){de&&Me.push(+de)}),"m"===ie&&Me.length>2&&(Gt.push([ue].concat(Me.splice(0,2))),ie="l",ue="m"===ue?"l":"L");Me.length>=Ft[ie]&&(Gt.push([ue].concat(Me.splice(0,Ft[ie]))),Ft[ie]););}),Gt}(kt)),!kt||!kt.length)return[["M",0,0]];for(var ie,Ft=[],Gt=0,Et=0,ue=0,xe=0,ir=kt.length,de=0;de<ir;de++){var Kt=[];Ft.push(Kt);var zt,At,ce=kt[de];if((ie=ce[0])!=ie.toUpperCase())switch(Kt[0]=ie.toUpperCase(),Kt[0]){case"A":Kt[1]=ce[1],Kt[2]=ce[2],Kt[3]=ce[3],Kt[4]=ce[4],Kt[5]=ce[5],Kt[6]=+ce[6]+Gt,Kt[7]=+ce[7]+Et;break;case"V":Kt[1]=+ce[1]+Et;break;case"H":Kt[1]=+ce[1]+Gt;break;case"M":for(ue=+ce[1]+Gt,xe=+ce[2]+Et,zt=ce.length,At=1;At<zt;At++)Kt[At]=+ce[At]+(At%2?Gt:Et);break;default:for(zt=ce.length,At=1;At<zt;At++)Kt[At]=+ce[At]+(At%2?Gt:Et)}else for(var pn=ce.length,Pn=0;Pn<pn;Pn++)Kt[Pn]=ce[Pn];switch(Kt[0]){case"Z":Gt=+ue,Et=+xe;break;case"H":Gt=Kt[1];break;case"V":Et=Kt[1];break;case"M":ue=Kt[Kt.length-2],xe=Kt[Kt.length-1],Gt=Kt[Kt.length-2],Et=Kt[Kt.length-1];break;default:Gt=Kt[Kt.length-2],Et=Kt[Kt.length-1]}}return Ft}(kt),Gt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Et(zt,At,pn){var Pn,Va;if(!zt)return["C",At.x,At.y,At.x,At.y,At.x,At.y];switch(zt[0]in{T:1,Q:1}||(At.qx=null,At.qy=null),zt[0]){case"M":At.X=zt[1],At.Y=zt[2];break;case"A":zt=0===parseFloat(zt[1])||0===parseFloat(zt[2])?["L",zt[6],zt[7]]:["C"].concat(wt.apply(0,[At.x,At.y].concat(zt.slice(1))));break;case"S":"C"===pn||"S"===pn?(Pn=2*At.x-At.bx,Va=2*At.y-At.by):(Pn=At.x,Va=At.y),zt=["C",Pn,Va].concat(zt.slice(1));break;case"T":"Q"===pn||"T"===pn?(At.qx=2*At.x-At.qx,At.qy=2*At.y-At.qy):(At.qx=At.x,At.qy=At.y),zt=["C"].concat(gt(At.x,At.y,At.qx,At.qy,zt[1],zt[2]));break;case"Q":At.qx=zt[1],At.qy=zt[2],zt=["C"].concat(gt(At.x,At.y,zt[1],zt[2],zt[3],zt[4]));break;case"H":zt=["L"].concat(zt[1],At.y);break;case"V":zt=["L"].concat(At.x,zt[1])}return zt}function ue(zt,At){if(zt[At].length>7){zt[At].shift();for(var pn=zt[At];pn.length;)xe[At]="A",zt.splice(At++,0,["C"].concat(pn.splice(0,6)));zt.splice(At,1),ir=Ft.length}}for(var xe=[],Me="",ie="",ir=Ft.length,de=0;de<ir;de++){Ft[de]&&(Me=Ft[de][0]),"C"!==Me&&(xe[de]=Me,de>0&&(ie=xe[de-1])),Ft[de]=Et(Ft[de],Gt,ie),"A"!==xe[de]&&"C"===Me&&(xe[de]="C"),ue(Ft,de);var Kt=Ft[de],ce=Kt.length;Gt.x=Kt[ce-2],Gt.y=Kt[ce-1],Gt.bx=parseFloat(Kt[ce-4])||Gt.x,Gt.by=parseFloat(Kt[ce-3])||Gt.y}return(!Ft[0][0]||"M"!==Ft[0][0])&&Ft.unshift(["M",0,0]),Ft}return function(kt){return ze(kt).join(",").split(",").join(" ")}}(),o.namespace=e,o.g=tn,o}(),Yn={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},ti=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,Yn.classNamePrefix.length)!==Yn.classNamePrefix&&(e=Yn.classNamePrefix+e),e}).join(" ")},Qc=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,Yn.classNamePrefix.length)===Yn.classNamePrefix&&(e=e.substr(Yn.classNamePrefix.length)),e}).join(" ")},Ga=function(t,e){for(var r={},i={},s=it.namespace.svg,u=e||s,l=document.createDocumentFragment(),f=[t,l,u];f.length>0;){u=f.pop();for(var d=f.pop(),n=f.pop(),a=0,o=n.length;a<o;a++){var h=n[a];if(!h.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var p=h.tagName;h.hasOwnProperty("namespaceURI")&&(u=h.namespaceURI);var A=document.createElementNS(u,p),b=u===s,T=b?it:Wt,P=h.attributes;P&&T(A).attr(P);var G=h.style;if(G&&Wt(A).css(G),h.hasOwnProperty("className")){var m=h.className;b?A.className.baseVal=m:A.className=m}if(h.hasOwnProperty("textContent")&&(A.textContent=h.textContent),h.hasOwnProperty("selector")){var w=h.selector;if(r[w])throw new Error("json-dom-parser: selector must be unique");r[w]=A,T(A).attr("joint-selector",w)}if(h.hasOwnProperty("groupSelector")){var M=h.groupSelector;Array.isArray(M)||(M=[M]);for(var E=0,j=M.length;E<j;E++){var Y=M[E],B=i[Y];B||(B=i[Y]=[]),B.push(A)}}d.appendChild(A);var H=h.children;Array.isArray(H)&&f.push(H,A,u)}}return{fragment:l,selectors:r,groupSelectors:i}},uo=function(t){var e=0;if(0===t.length)return e;for(var r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e},Ti=function(t,e,r){for(var s,i=Array.isArray(e)?e:e.split(r||"/"),u=0,l=i.length;u<l;){if(s=i[u++],Object(t)!==t||!(s in t))return;t=t[s]}return t},xl=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),!("constructor"===e&&"function"==typeof t[e]||"__proto__"===e)},fu=function(t,e,r,i){for(var s=Array.isArray(e)?e:e.split(i||"/"),u=s.length-1,l=t,f=0;f<u;f++){var d=s[f];if(!xl(l,d))return t;l=l[d]||(l[d]={})}return l[s[u]]=r,t},Nl=function(t,e,r){for(var i=Array.isArray(e)?e:e.split(r||"/"),s=i.length-1,u=t,l=0;l<s;l++){var f=i[l];if(!xl(u,f))return t;var d=u[f];if(!d)return t;u=d}return delete u[i[s]],t},Cs=function(t,e,r){e=e||"/";var i={};for(var s in t)if(t.hasOwnProperty(s)){var u="object"==typeof t[s];if(u&&r&&r(t[s])&&(u=!1),u){var l=Cs(t[s],e,r);for(var f in l)!l.hasOwnProperty(f)||(i[s+e+f]=l[f])}else i[s]=t[s]}return i},qc=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},ws=function(t){return ws.id=ws.id||1,t.id=void 0===t.id?"j_"+ws.id++:t.id,t.id},hu=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},Ne=function(t){var e=t,r=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(r){for(var i in t)void 0===r[i]&&(r[i]=t[i]);e=r}var s=e.target;if(s){var u=s.correspondingUseElement;u&&(e.target=u)}return e},gu=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(r){var i=(new Date).getTime(),s=Math.max(0,16-(i-e)),u=setTimeout(function(){r(i+s)},s);return e=i+s,u}}return function(r,i){for(var s=[],u=arguments.length-2;u-- >0;)s[u]=arguments[u+2];return t(void 0!==i?r.bind.apply(r,[i].concat(s)):r)}}(),du=function(){var t,e="undefined"!=typeof window;return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),Vr=function(t){return yr(t)&&"%"===t.slice(-1)},vu=function(t,e){var i=parseFloat(t);if(Number.isNaN(i))return null;var u,s={};if(s.value=i,null==e)u="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;u=e.join("|")}else yr(e)&&(u=e);var l=function r(f){var d=new RegExp("(?:\\d+(?:\\.\\d+)*)("+f+")$").exec(t);return d?d[1]:null}(u);return null===l?null:(s.unit=l,s)},Ml=function(t,e,r,i){void 0===r&&(r={}),void 0===i&&(i={});var s=e.width,u=e.height,l=i.svgDocument||it("svg").node,f=it("tspan").node,d=it("text").attr(r).append(f).node,n=document.createTextNode("");d.style.opacity=0,d.style.display="block",f.style.display="block",f.appendChild(n),l.appendChild(d),i.svgDocument||document.body.appendChild(l);var a=i.separator||" ",o=i.eol||"\n",h=i.hyphen?new RegExp(i.hyphen):/[^\w\d]/,p=i.maxLineCount;rn(p)||(p=1/0);for(var P,G,m,A=t.split(a),b=[],T=[],w=0,M=0,E=A.length;w<E;w++){var j=A[w];if(j){var Y=!1;if(o&&j.indexOf(o)>=0){if(j.length>1){for(var B=j.split(o),H=0,et=B.length-1;H<et;H++)B.splice(2*H+1,0,o);A.splice.apply(A,[w,1].concat(B.filter(function(Gt){return""!==Gt}))),w--,E=A.length;continue}T[++M]="",Y=!0}if(!Y)if(n.data=T[M]?T[M]+" "+j:j,f.getComputedTextLength()<=s)T[M]=n.data,(P||G)&&(b[M++]=!0,P=0,G=0);else{if(!T[M]||P){var at=!!P;if(P=j.length-1,at||!P){if(!P){if(!T[M]){T=[];break}A.splice(w,2,j+A[w+1]),E--,b[M++]=!0,w--;continue}A[w]=j.substring(0,P),A[w+1]=j.substring(P)+(void 0===A[w+1]?"":A[w+1])}else{if(G)A.splice(w,2,A[w]+A[w+1]),G=0;else{var ft=j.search(h);ft>-1&&ft!==j.length-1&&0!==ft&&(G=ft+1,P=0),A.splice(w,1,j.substring(0,G||P),j.substring(G||P)),E++}M&&!b[M-1]&&M--}w--;continue}M++,w--}var gt=null;if(T.length>p)gt=p-1;else if(void 0!==u){var ht;void 0===m&&(m=(ht="auto"===r.lineHeight?{value:1.5,unit:"em"}:vu(r.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===ht.unit&&(m*=d.getBBox().height)),m*T.length>u&&(gt=Math.floor(u/m)-1)}if(null!==gt){T.splice(gt+1);var wt=i.ellipsis;if(!wt||gt<0)break;"string"!=typeof wt&&(wt="\u2026");var ee=T[gt];if(!ee&&!Y)break;var ze,kt,le=ee.length;do{if(kt=ee[le],ze=ee.substring(0,le),kt?kt.match(a)&&(ze+=kt):ze+="string"==typeof a?a:" ",n.data=ze+=wt,f.getComputedTextLength()<=s){T[gt]=ze;break}le--}while(le>=0);break}}}return i.svgDocument?l.removeChild(d):document.body.removeChild(l),T.join(o)},pu=function(t){var e=Wt(Wt.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var r=this;Wt.each(r.attributes,function(){var s=this.name,u=this.value;(s.startsWith("on")||u.startsWith("javascript:")||u.startsWith("data:")||u.startsWith("vbscript:"))&&Wt(r).removeAttr(s)})}),e.html()},Sl=function(t,e){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}},Tl=function(t){t=t.replace(/\s/g,"");var u,e=(t=decodeURIComponent(t)).indexOf(","),r=t.slice(0,e),i=r.split(":")[1].split(";")[0],s=t.slice(e+1);u=r.indexOf("base64")>=0?atob(s):unescape(encodeURIComponent(s));for(var l=new Uint8Array(u.length),f=0;f<u.length;f++)l[f]=u.charCodeAt(f);return new Blob([l],{type:i})},Ll=function(t,e){var r=Wt(t),i=r.map(function(){var u=this.parentNode,l=u.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(u===this)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(this,l),u.removeChild(l)}});return Array.prototype.sort.call(r,e).each(function(s){i[s].call(this)})},ga=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var r,i,s,u;return r=i=s=u=0,isFinite(t.vertical)&&(r=s=+t.vertical),isFinite(t.horizontal)&&(i=u=+t.horizontal),isFinite(t.top)&&(r=+t.top),isFinite(t.right)&&(i=+t.right),isFinite(t.bottom)&&(s=+t.bottom),isFinite(t.left)&&(u=+t.left),{top:r,right:i,bottom:s,left:u}},Dl={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,r=1;;e+=r,r/=2)if(t>=(7-4*e)/11){var i=(11-6*e-11*t)/4;return-i*i+r*r}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,r){return e=e||0,r=r||1,function(i){var s=t(i);return s<e?e:s>r?r:s}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Pl={number:function(t,e){var r=e-t;return function(i){return t+r*i}},object:function(t,e){var r=Object.keys(t);return function(i){var s,u,l={};for(s=r.length-1;-1!=s;s--)l[u=r[s]]=t[u]+(e[u]-t[u])*i;return l}},hexColor:function(t,e){var r=parseInt(t.slice(1),16),i=parseInt(e.slice(1),16),s=255&r,u=(255&i)-s,l=65280&r,f=(65280&i)-l,d=16711680&r,n=(16711680&i)-d;return function(a){return"#"+(1<<24|s+u*a&255|l+f*a&65280|d+n*a&16711680).toString(16).slice(1)}},unit:function(t,e){var r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=r.exec(t),s=r.exec(e),u=s[1].indexOf("."),l=u>0?s[1].length-u-1:0,f=+s[1]-(t=+i[1]),d=i[2];return function(n){return(t+f*n).toFixed(l)+d}}},Iu={outline:function(t){var r=Number.isFinite(t.margin)?t.margin:2,i=Number.isFinite(t.width)?t.width:1;return Dr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:r+i,innerRadius:r})},highlight:function(t){return Dr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Dr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Dr(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Dr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Dr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Dr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Dr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Dr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Dr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Dr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},ef={number:function(t,e,r){r=r||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var s=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),u=s[1]||" ",l=s[2]||">",f=s[3]||"",d=s[4]||"",n=s[5],a=+s[6],o=s[7],h=s[8],p=s[9],A=1,b="",T="",P=!1;switch(h&&(h=+h.substring(1)),(n||"0"===u&&"="===l)&&(n=u="0",l="=",o&&(a-=Math.floor((a-1)/4))),p){case"n":o=!0,p="g";break;case"%":A=100,T="%",p="f";break;case"p":A=100,T="%",p="r";break;case"b":case"o":case"x":case"X":"#"===d&&(b="0"+p.toLowerCase());break;case"c":case"d":P=!0,h=0;break;case"s":A=-1,p="r"}"$"===d&&(b=r.currency[0],T=r.currency[1]),"r"==p&&!h&&(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h))));var G=n&&o;if(P&&e%1)return"";var m=e<0||0===e&&1/e<0?(e=-e,"-"):f,w=T;if(A<0){var M=this.prefix(e,h);e=M.scale(e),w=M.symbol+T}else e*=A;var E=(e=this.convert(p,e,h)).lastIndexOf("."),j=E<0?e:e.substring(0,E),Y=E<0?"":r.decimal+e.substring(E+1);function B(at){for(var ft=at.length,gt=[],ht=0,wt=r.grouping[0];ft>0&&wt>0;)gt.push(at.substring(ft-=wt,ft+wt)),wt=r.grouping[ht=(ht+1)%r.grouping.length];return gt.reverse().join(r.thousands)}!n&&o&&r.grouping&&(j=B(j));var H=b.length+j.length+Y.length+(G?0:m.length),et=H<a?new Array(H=a-H+1).join(u):"";return G&&(j=B(et+j)),m+=b,e=j+Y,("<"===l?m+e+et:">"===l?et+m+e:"^"===l?et.substring(0,H>>=1)+m+e+et.substring(H):m+(G?e:et+e))+w},string:function(t,e){for(var r,i="{",s=!1,u=[];-1!==(r=t.indexOf(i));){var l,f,d;if(l=t.slice(0,r),s){d=(f=l.split(":")).shift().split("."),l=e;for(var n=0;n<d.length;n++)l=l[d[n]];f.length&&(l=this.number(f,l))}u.push(l),t=t.slice(r+1),i=(s=!s)?"}":"{"}return u.push(t),u.join("")},convert:function(t,e,r){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(r);case"e":return e.toExponential(r);case"f":return e.toFixed(r);case"r":return(e=this.round(e,this.precision(e,r))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),r))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var r=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(s,u){var l=Math.pow(10,3*Math.abs(8-u));return{scale:u>8?function(f){return f/l}:function(f){return f*l},symbol:s}}),i=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i<=0?i+1:i-1)/3)))),r[8+i/3]}},Dr=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},t.replace(e,function(i){for(var s=Array.from(arguments),u=s.slice(1,4).find(function(d){return!!d}),l=u.split("."),f=r[l.shift()];void 0!==f&&l.length;)f=f[l.shift()];return void 0!==f?f:""})}},Au=tt.assign,te=tt.defaults,Dh=Au,Ph=tt.defaultsDeep,Mt=tt.assign,Mn=tt.defaults,yu=tt.defaultsDeep,Fn=tt.invokeMap||tt.invoke,Sn=tt.sortedIndexBy||tt.sortedIndex,ja=tt.uniqBy||tt.uniq,en=tt.clone,Xr=tt.cloneDeep,Li=tt.isEmpty,bs=tt.isEqual,Ht=tt.isFunction,Be=tt.isPlainObject,qt=tt.toArray,rf=tt.debounce,lo=tt.groupBy,nf=tt.sortBy,Cu=tt.flattenDeep,wu=tt.without,co=tt.difference,kl=tt.intersection,Di=tt.union,hi=tt.has,ke=tt.result,Pi=tt.omit,bu=tt.pick,El=tt.bindAll,Un=tt.forIn,af=tt.camelCase,sf=tt.uniqueId,dr=function(){if(tt.mergeWith){var t=Array.from(arguments),e=t[t.length-1],r=Ht(e)?e:sr;return t.push(function(i,s){var u=r(i,s);return void 0!==u?u:Array.isArray(i)&&!Array.isArray(s)?s:void 0}),tt.mergeWith.apply(this,t)}return tt.merge.apply(this,arguments)},zl=function(t){return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)},Xe=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},rn=function(t){return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===Object.prototype.toString.call(t)},yr=function(t){return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t)},sr=function(){};function ei(t){t=ja(t);var e=qt(t).reduce(function(r,i){return r[i.id]=i.clone(),r},{});return qt(t).forEach(function(r){var i=e[r.id];if(i.isLink()){var s=i.source(),u=i.target();s.id&&e[s.id]&&i.prop("source/id",e[s.id].id),u.id&&e[u.id]&&i.prop("target/id",e[u.id].id)}var l=r.get("parent");l&&e[l]&&i.set("parent",e[l].id);var f=qt(r.get("embeds")).reduce(function(d,n){return e[n]&&d.push(e[n].id),d},[]);Li(f)||i.set("embeds",f)}),e}var Wi={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},kh=Object.keys(Wi).map(function(t){return Wi[t]}).join(""),fo="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",xs=/\s/g,Ol=new RegExp("^("+fo+"\\*)?(["+kh+"])([-+]{1,2}"+fo+")?$","g");function Rl(t){throw new Error("Invalid calc() expression: "+t)}function Eh(t,e){var r=Ol.exec(t.replace(xs,""));r||Rl(t),Ol.lastIndex=0;var i=r[1];void 0===i&&(i=1);var u=r[3];void 0===u&&(u=0);var l=e.x,f=e.y,d=e.width,n=e.height,a=0;switch(r[2]){case Wi.width:a=d;break;case Wi.height:a=n;break;case Wi.x:a=l;break;case Wi.y:a=f;break;case Wi.minimum:a=Math.min(n,d);break;case Wi.maximum:a=Math.max(n,d);break;case Wi.diagonal:a=Math.sqrt(n*n+d*d)}return parseFloat(i)*a+function of(t){if(!t)return 0;switch(t[0]){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(u)}function da(t){return"string"==typeof t&&t.includes("calc")}var uf="calc(".length;function xu(t,e){for(var r=t,i=0;;){var s=r.indexOf("calc(",i);if(-1===s)return r;var u=s+uf,l=1;t:for(;;){switch(r[u]){case"(":l++;break;case")":if(0==--l)break t;break;case void 0:Rl(r)}u++}var f=r.slice(s+uf,u);da(f)&&(f=xu(f,e));var d=String(Eh(f,e));r=r.slice(0,s)+d+r.slice(u+1),i=s+d.length}}function Yi(t,e){return function(r,i){var s=Vr(r);r=parseFloat(r),s&&(r/=100);var u={};if(isFinite(r)){var l=s||r>=0&&r<=1?r*i[e]:Math.max(r+i[e],0);u[t]=l}return u}}function Ba(t,e,r){return function(i,s){var l,u=Vr(i);if(i=parseFloat(i),u&&(i/=100),isFinite(i)){var f=s[r]();l=u||i>0&&i<1?f[t]+s[e]*i:f[t]+i}var d=F();return d[t]=l||0,d}}function Gl(t,e,r){return function(i,s){var u;u="middle"===i?s[e]/2:i===r?s[e]:isFinite(i)?i>-1&&i<1?-s[e]*i:-i:Vr(i)?s[e]*parseFloat(i)/100:0;var l=F();return l[t]=-(s[t]+u),l}}function ho(t,e){var r="joint-shape",i=e&&e.resetOffset;return function(s,u,l){var f=Wt(l),d=f.data(r);if(!d||d.value!==s){var n=t(s);d={value:s,shape:n,shapeBBox:n.bbox()},f.data(r,d)}var a=d.shape.clone(),o=d.shapeBBox.clone(),h=o.origin(),p=u.origin();o.x=p.x,o.y=p.y;var A=u.maxRectScaleToFit(o,p);return a.scale(0===o.width||0===u.width?1:A.sx,0===o.height||0===u.height?1:A.sy,h),i&&a.translate(-h.x,-h.y),a}}function Nu(t){var r=ho(function e(i){return new xt(it.normalizePathData(i))},t);return function(i,s,u){return{d:r(i,s,u).serialize()}}}function go(t){var e=ho(Pe,t);return function(r,i,s){return{points:e(r,i,s).serialize()}}}function Mu(t,e){var r=new F(1,0);return function(i){var s,u,l=this[t](i);return l?(u=e.rotate?l.vector().vectorAngle(r):0,s=l.start):(s=this.path.start,u=0),0===u?{transform:"translate("+s.x+","+s.y+")"}:{transform:"translate("+s.x+","+s.y+") rotate("+u+")"}}}function Za(t,e,r){return void 0!==r.text}function va(){return this.model.isLink()}function Su(t){var e={},r=t.stroke;"string"==typeof r&&(e.stroke=r,e.fill=r);var i=t.strokeOpacity;return void 0===i&&(i=t["stroke-opacity"]),void 0===i&&(i=t.opacity),void 0!==i&&(e["stroke-opacity"]=i,e["fill-opacity"]=i),e}function Tu(t){var r=this.paper;return"url(#"+("pattern"===t.type?r.definePattern(t):r.defineGradient(t))+")"}var e,r,oe={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:Be,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Be,set:Tu},stroke:{qualify:Be,set:Tu},sourceMarker:{qualify:Be,set:function(t,e,r,i){return t=Mt(Su(i),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Be,set:function(t,e,r,i){return t=Mt(Su(i),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Be,set:function(t,e,r,i){return t=Mt(Su(i),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,r){return!r.textWrap||!Be(r.textWrap)},set:function(t,e,r,i){var s=Wt(r),u="joint-text",l=s.data(u),f=bu(i,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty"),d=f.x;da(d)&&(f.x=xu(d,e));var n=f.fontSize=i["font-size"]||i.fontSize,a=JSON.stringify([t,f]);if(void 0===l||l!==a){n&&r.setAttribute("font-size",n);var o=f.textPath;if(Xe(o)){var h=o.selector;if("string"==typeof h){var p=this.findBySelector(h)[0];p instanceof SVGPathElement&&(f.textPath=Mt({"xlink:href":"#"+p.id},o))}}it(r).text(""+t,f),s.data(u,a)}}},textWrap:{qualify:Be,set:function(t,e,r,i){var s=t.width||0,u={};u.width=Vr(s)?e.width*parseFloat(s)/100:s<=0?e.width+s:s;var l=t.height||0;u.height=Vr(l)?e.height*parseFloat(l)/100:l<=0?e.height+l:l;var f,d=t.text;void 0===d&&(d=i.text),f=void 0!==d?Ml(""+d,u,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight,"letter-spacing":"letter-spacing"in i?i["letter-spacing"]:i.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",oe.text.set.call(this,f,e,r,i)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,r){var i=Wt(r),s="joint-title",u=i.data(s);if(void 0===u||u!==t){i.data(s,t);var l=r.firstChild;if(l&&"TITLE"===l.tagName.toUpperCase())l.textContent=t;else{var f=document.createElementNS(r.namespaceURI,"title");f.textContent=t,r.insertBefore(f,l)}}}},lineHeight:{qualify:Za},textVerticalAnchor:{qualify:Za},textPath:{qualify:Za},annotations:{qualify:Za},eol:{qualify:Za},displayEmpty:{qualify:Za},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:Be,set:function(t,e,r){Wt(r).css(t)}},html:{set:function(t,e,r){Wt(r).html(t+"")}},ref:{},refX:{position:Ba("x","width","origin")},refY:{position:Ba("y","height","origin")},refDx:{position:Ba("x","width","corner")},refDy:{position:Ba("y","height","corner")},refWidth:{set:Yi("width","width")},refHeight:{set:Yi("height","height")},refRx:{set:Yi("rx","width")},refRy:{set:Yi("ry","height")},refRInscribed:{set:(e=Yi("r","width"),r=Yi("r","height"),function(i,s){return(s.height>s.width?e:r)(i,s)})},refRCircumscribed:{set:function(t,e){var r=Vr(t);t=parseFloat(t),r&&(t/=100);var s,i=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(s=r||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r:s}}},refCx:{set:Yi("cx","width")},refCy:{set:Yi("cy","height")},xAlignment:{offset:Gl("x","width","right")},yAlignment:{offset:Gl("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:Nu({resetOffset:!0})},refDKeepOffset:{set:Nu({resetOffset:!1})},refPointsResetOffset:{set:go({resetOffset:!0})},refPointsKeepOffset:{set:go({resetOffset:!1})},connection:{qualify:va,set:function(t){var r,e=t.stubs;if(void 0===e&&(e=0),isFinite(e)&&0!==e){var i;i=e<0?(this.getConnectionLength()+e)/2:e;var s=this.getConnection(),u=s.divideAtLength(i),l=s.divideAtLength(-i);u&&l&&(r=u[0].serialize()+" "+l[1].serialize())}return{d:r||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:va,set:Mu("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:va,set:Mu("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:va,set:Mu("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:va,set:Mu("getTangentAtRatio",{rotate:!1})}};["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(function(t){oe[t]={qualify:da,set:function(r,i){var s;return(s={})[t]=xu(r,i),s}}}),oe.refR=oe.refRInscribed,oe.refD=oe.refDResetOffset,oe.refPoints=oe.refPointsResetOffset,oe.atConnectionLength=oe.atConnectionLengthKeepGradient,oe.atConnectionRatio=oe.atConnectionRatioKeepGradient,oe.refX2=oe.refX,oe.refY2=oe.refY,oe.refWidth2=oe.refWidth,oe.refHeight2=oe.refHeight,oe["ref-x"]=oe.refX,oe["ref-y"]=oe.refY,oe["ref-dy"]=oe.refDy,oe["ref-dx"]=oe.refDx,oe["ref-width"]=oe.refWidth,oe["ref-height"]=oe.refHeight,oe["x-alignment"]=oe.xAlignment,oe["y-alignment"]=oe.yAlignment;var Lu=oe,Cr=yt.Model.extend({constructor:function(t,e){var r,i=t||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=sf("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(i=this.parse(i,e)||{}),(r=ke(this,"defaults"))&&(i=dr({},r,i)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,r){throw new Error("Must define a translate() method.")},toJSON:function(){var e=ke(this.constructor.prototype,"defaults").attrs||{},i={};Un(this.attributes.attrs,function(u,l){var f=e[l];Un(u,function(d,n){Xe(d)&&!Array.isArray(d)?Un(d,function(a,o){(!f||!f[n]||!bs(f[n][o],a))&&(i[l]=i[l]||{},(i[l][n]||(i[l][n]={}))[o]=a)}):(!f||!bs(f[n],d))&&(i[l]=i[l]||{},i[l][n]=d)})});var s=Xr(Pi(this.attributes,"attrs"));return s.attrs=i,s},initialize:function(t){(!t||!t.id)&&this.set("id",this.generateId(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},generateId:function(){return qc()},processPorts:function(){var t=this.ports,e={};Un(this.get("attrs"),function(u,l){u&&u.port&&(void 0!==u.port.id?e[u.port.id]=u.port:e[u.port]={id:u.port})});var r={};Un(t,function(u,l){e[l]||(r[l]=!0)}),this.graph&&!Li(r)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(u){r[u.get("target").port]&&u.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(u){r[u.get("source").port]&&u.remove()})),this.ports=e},remove:function(t){void 0===t&&(t={});var r=this.graph,i=this.collection;if(!r)return i&&i.remove(this,t),this;r.startBatch("remove");var s=this.getParentCell();s&&s.unembed(this,t);for(var u=this.getEmbeddedCells(),l=0,f=u.length;l<f;l++){var d=u[l];d&&d.remove(t)}return this.trigger("remove",this,r.attributes.cells,t),r.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};var i,r=e.maxZIndex();t.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):i=[this],r=r-i.length+1;var s=e.get("cells"),u=s.indexOf(this)!==s.length-i.length;u||(u=i.some(function(l,f){return l.get("z")!==r+f})),u&&(this.startBatch("to-front"),r+=i.length,i.forEach(function(l,f){l.set("z",r+f,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};var i,r=e.minZIndex();t.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):i=[this];var u=0!==e.get("cells").indexOf(this);u||(u=i.some(function(l,f){return l.get("z")!==r+f})),u&&(this.startBatch("to-back"),r-=i.length,i.forEach(function(l,f){l.set("z",r+f,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){var r=Array.isArray(t)?t:[t];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");return this._embedCells(r,e),this},unembed:function(t,e){var r=Array.isArray(t)?t:[t];return this._unembedCells(r,e),this},canEmbed:function(t){var e=this;return(Array.isArray(t)?t:[t]).every(function(i){return e!==i&&!e.isEmbeddedIn(i)})},_embedCells:function(t,e){var r=this,i="embed";this.startBatch(i);var s=Mt([],this.get("embeds"));t.forEach(function(u){s[u.isLink()?"unshift":"push"](u.id),u.parent(r.id,e)}),this.set("embeds",ja(s),e),this.stopBatch(i)},_unembedCells:function(t,e){var r="unembed";this.startBatch(r),t.forEach(function(i){return i.unset("parent",e)}),this.set("embeds",wu.apply(void 0,[this.get("embeds")].concat(t.map(function(i){return i.id}))),e),this.stopBatch(r)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var r=this.getEmbeddedCells();r.length>0;){var i=r.shift();e.push(i),r.push.apply(r,i.getEmbeddedCells())}}else(e=this.getEmbeddedCells()).forEach(function(s){e.push.apply(e,s.getEmbeddedCells(t))});else e=qt(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var r=yr(t)?t:t.id,i=this.parent();if(e=Mn({deep:!0},e),this.graph&&e.deep){for(;i;){if(i===r)return!0;i=this.graph.getCell(i).parent()}return!1}return i===r},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return qt(ei([this].concat(this.getEmbeddedCells({deep:!0}))));var e=yt.Model.prototype.clone.apply(this,arguments);return e.set("id",this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,r){var i="/",s=yr(t);if(s||Array.isArray(t)){if(arguments.length>1){var u,l;s?l=(u=t).split("/"):(u=t.join(i),l=t.slice());var f=l[0],d=l.length;if((r=r||{}).propertyPath=u,r.propertyValue=e,r.propertyPathArray=l,1===d)return this.set(f,e,r);for(var n={},a=n,o=f,h=1;h<d;h++){var p=l[h],A=Number.isFinite(s?Number(p):p);a=a[o]=A?[]:{},o=p}n=fu(n,l,e,"/");var b=dr({},this.attributes);r.rewrite&&Nl(b,u,"/");var T=dr(b,n);return this.set(f,T[f],r)}return Ti(this.attributes,t,i)}return this.set(dr({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var r=Array.isArray(t)?t:t.split("/"),i=r[0];if("attrs"===i&&(e.dirty=!0),1===r.length)return this.unset(t,e);var s=r.slice(1),u=Xr(this.get(i));return Nl(u,s,"/"),this.set(i,u,e)},attr:function(t,e,r){var i=Array.from(arguments);return 0===i.length?this.get("attrs"):(i[0]=Array.isArray(t)?["attrs"].concat(t):yr(t)?"attrs/"+t:{attrs:t},this.prop.apply(this,i))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,r,i){i=i||"/",r=Mt({duration:100,delay:10,timingFunction:Dl.linear,valueFunction:Pl.number},r);var l,u=0,f=function(a){var o,h,p;(h=(a-=u=u||a)/r.duration)<1?this._transitionIds[t]=o=gu(f):(h=1,delete this._transitionIds[t]),p=l(r.timingFunction(h)),r.transitionId=o,this.prop(t,p,r),o||this.trigger("transition:end",this,t)}.bind(this),d=function(a){this.stopTransitions(t),l=r.valueFunction(Ti(this.attributes,t,i),e),this._transitionIds[t]=gu(a),this.trigger("transition:start",this,t)}.bind(this),n=setTimeout(d,r.delay,f);return this._transitionIds[t]=n,n},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(t,e){var r=this;void 0===e&&(e="/");var s=this._transitionIds,u=Object.keys(s);if(t){var l=t.split(e);u=u.filter(function(f){return bs(l,f.split(e).slice(0,l.length))})}return u.forEach(function(f){var d=s[f];du(d),clearTimeout(d),delete s[f],r.trigger("transition:end",r,d)}),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Mt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Mt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var r in t)!t.hasOwnProperty(r)||!this.hasChanged(r)||(e|=t[r]);return e},angle:function(){return 0},position:function(){return new F(0,0)},getPointFromConnectedLink:function(){return new F},getBBox:function(){return new pt(0,0,0,0)},getPointRotatedAroundCenter:function(e,r,i){var s=new F(r,i);return e&&s.rotate(this.getBBox().center(),e),s},getAbsolutePointFromRelative:function(e,r){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,r))},getRelativePointFromAbsolute:function(e,r){return this.getPointRotatedAroundCenter(this.angle(),e,r).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes;return e&&e[t]||Lu[t]},define:function(t,e,r,i){r=Mt({defaults:yu({type:t},e,this.prototype.defaults)},r);var s=this.extend(r,i);return"undefined"!=typeof joint&&hi(joint,"shapes")&&fu(joint.shapes,t,s,"."),s}}),jl=function(t,e,r){if(yr(r)){if(!vo[r])throw new Error('Unknown wrapper: "'+r+'"');r=vo[r]}if(!Ht(r))throw new Error("Wrapper must be a function.");qt(e).forEach(function(i){t[i]=r(t[i])})},vo={cells:function(t){return function(){var e=Array.from(arguments),r=e.length,i=r>0&&e[0]||[],s=r>1&&e[r-1]||{};return Array.isArray(i)||(s instanceof Cr?i=e:i instanceof Cr&&(e.length>1&&e.pop(),i=e)),s instanceof Cr&&(s={}),t.call(this,i,s)}}},zh={wrapWith:jl,wrappers:vo,addClassNamePrefix:ti,removeClassNamePrefix:Qc,parseDOMJSON:Ga,hashCode:uo,getByPath:Ti,setByPath:fu,unsetByPath:Nl,flattenObject:Cs,uuid:qc,guid:ws,toKebabCase:hu,normalizeEvent:Ne,nextFrame:gu,cancelFrame:du,shapePerimeterConnectionPoint:function(t,e,r,i){var s,u;if(!r){var l=e.$(".scalable")[0],f=e.$(".rotatable")[0];l&&l.firstChild?r=l.firstChild:f&&f.firstChild&&(r=f.firstChild)}return r?(u=it(r).findIntersection(i,t.paper.cells))||(s=it(r).getBBox({target:t.paper.cells})):u=(s=e.model.getBBox()).intersectionWithLineFromCenterToPoint(i),u||s.center()},isPercentage:Vr,parseCssNumeric:vu,breakText:Ml,sanitizeHTML:pu,downloadBlob:Sl,downloadDataUri:function(t,e){var r=Tl(t);Sl(r,e)},dataUriToBlob:Tl,imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var s=new XMLHttpRequest;s.open("GET",t,!0),s.addEventListener("error",function(){e(new Error("Failed to load image "+t))}),s.responseType=window.FileReader?"blob":"arraybuffer",s.addEventListener("load",function(){window.FileReader?function(u,l){if(200===u.status){var f=new FileReader;f.onload=function(d){l(null,d.target.result)},f.onerror=function(){l(new Error("Failed to load image "+t))},f.readAsDataURL(u.response)}else l(new Error("Failed to load image "+t))}(s,e):function(u,l){if(200===u.status){var d=new Uint8Array(u.response),n=t.split(".").pop()||"png";l(null,"data:image/"+({svg:"svg+xml"}[n]||n)+";base64,"+btoa(function(p){for(var b=[],T=0;T<p.length;T+=32768)b.push(String.fromCharCode.apply(null,p.subarray(T,T+32768)));return b.join("")}(d)))}else l(new Error("Failed to load image "+t))}(s,e)}),s.send()},getElementBBox:function(t){var e=Wt(t);if(0===e.length)throw new Error("Element not found");var r=e[0],i=r.ownerDocument,s=r.getBoundingClientRect(),u=0,l=0;if(r.ownerSVGElement){var f=it(r),d=f.getBBox({target:f.svg()});u=s.width-d.width,l=s.height-d.height}return{x:s.left+window.pageXOffset-i.documentElement.offsetLeft+u/2,y:s.top+window.pageYOffset-i.documentElement.offsetTop+l/2,width:s.width-u,height:s.height-l}},sortElements:Ll,setAttributesBySelector:function(t,e){var r=Wt(t);Un(e,function(i,s){var u=r.find(s).addBack().filter(s);hi(i,"class")&&(u.addClass(i.class),i=Pi(i,"class")),u.attr(i)})},normalizeSides:ga,timing:Dl,interpolate:Pl,filter:Iu,format:ef,template:Dr,toggleFullScreen:function(t){var e=window.top.document;function r(i,s){for(var u=["webkit","moz","ms","o",""],l=0;l<u.length;l++){var f=u[l],d=f?f+s:s.substr(0,1).toLowerCase()+s.substr(1);if(void 0!==i[d])return Ht(i[d])?i[d]():i[d]}}t=t||e.body,r(e,"FullscreenElement")||r(e,"FullScreenElement")?r(e,"ExitFullscreen")||r(e,"CancelFullScreen"):r(t,"RequestFullscreen")||r(t,"RequestFullScreen")},mixin:Au,supplement:te,deepMixin:Dh,deepSupplement:Ph,assign:Mt,defaults:Mn,defaultsDeep:yu,invoke:Fn,sortedIndex:Sn,uniq:ja,clone:en,cloneDeep:Xr,isEmpty:Li,isEqual:bs,isFunction:Ht,isPlainObject:Be,toArray:qt,debounce:rf,groupBy:lo,sortBy:nf,flattenDeep:Cu,without:wu,difference:co,intersection:kl,union:Di,has:hi,result:ke,omit:Pi,pick:bu,bindAll:El,forIn:Un,camelCase:af,uniqueId:sf,merge:dr,isBoolean:zl,isObject:Xe,isNumber:rn,isString:yr,noop:sr,cloneCells:ei};function Bl(t,e,r){var i=t.toJSON();return i.angle=e||0,Mn({},r,i)}function po(t,e,r){return t.map(function(i,s,u){var l=this.pointAt((s+.5)/u.length);return(i.dx||i.dy)&&l.offset(i.dx||0,i.dy||0),Bl(l.round(),0,i)},Da(e,r))}function lf(t,e,r,i){var s=e.center(),u=e.width/e.height,l=e.topMiddle(),f=Ar.fromRect(e);return t.map(function(d,n,a){var o=r+i(n,a.length),h=l.clone().rotate(s,-o).scale(u,1,s),p=d.compensateRotation?-f.tangentTheta(h):0;return(d.dx||d.dy)&&h.offset(d.dx||0,d.dy||0),d.dr&&h.move(s,d.dr),Bl(h.round(),p,d)})}function gi(t,e){var r=e.x;yr(r)&&(r=parseFloat(r)/100*t.width);var i=e.y;return yr(i)&&(i=parseFloat(i)/100*t.height),ua(r||0,i||0)}var Fl={absolute:function(t,e,r){return t.map(gi.bind(null,e))},fn:function(t,e,r){return r.fn(t,e,r)},line:function(t,e,r){return po(t,gi(e,r.start||e.origin()),gi(e,r.end||e.corner()))},left:function(t,e,r){return po(t,e.origin(),e.bottomLeft())},right:function(t,e,r){return po(t,e.topRight(),e.corner())},top:function(t,e,r){return po(t,e.origin(),e.topRight())},bottom:function(t,e,r){return po(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,r){var s=r.step||360/t.length;return lf(t,e,r.startAngle||0,function(u){return u*s})},ellipse:function(t,e,r){var s=r.step||20;return lf(t,e,r.startAngle||0,function(u,l){return(u+.5-l/2)*s})}};function ki(t,e){return yu({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Ul(t,e,r,i){i=Mn({},i,{offset:15});var l,f,d,n,s=e.center().theta(t),u=Hr(e),a=i.offset,o=0;s<u[1]||s>u[2]?(d=".3em",l=a,f=0,n="start"):s<u[0]?(d="0",l=0,f=-a,r?(o=-90,n="start"):n="middle"):s<u[3]?(d=".3em",l=-a,f=0,n="end"):(d=".6em",l=0,f=a,r?(o=90,n="start"):n="middle");var h=Math.round;return ki({x:h(l),y:h(f),angle:o,attrs:{".":{y:d,"text-anchor":n}}})}function Hr(t){var e=t.center(),r=e.theta(t.origin()),i=e.theta(t.bottomLeft()),s=e.theta(t.corner());return[r,e.theta(t.topRight()),s,i]}function cf(t,e,r,i){var u,l,f,d,s=e.center().theta(t),n=(i=Mn({},i,{offset:15})).offset,a=0,o=Hr(e);s<o[1]||s>o[2]?(f=".3em",u=-n,l=0,d="end"):s<o[0]?(f=".6em",u=0,l=n,r?(a=90,d="start"):d="middle"):s<o[3]?(f=".3em",u=n,l=0,d="start"):(f="0em",u=0,l=-n,r?(a=-90,d="start"):d="middle");var h=Math.round;return ki({x:h(u),y:h(l),angle:a,attrs:{".":{y:f,"text-anchor":d}}})}function ff(t,e,r){r=Mn({},r,{offset:20});var d,i=ua(0,0),s=-t.theta(i),u=s,l=t.clone().move(i,r.offset).difference(t).round(),f=".3em";(s+90)%180==0?(d=e?"end":"middle",!e&&-270===s&&(f="0em")):s>-270&&s<-90?(d="start",u=s-180):d="end";var n=Math.round;return ki({x:n(l.x),y:n(l.y),angle:e?u:0,attrs:{".":{y:f,"text-anchor":d}}})}var Hl={manual:function(t,e,r){return ki(r,e)},left:function(t,e,r){return ki(r,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,r){return ki(r,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,r){return ki(r,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,r){return ki(r,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,r){return Ul(t,e,!0,r)},outside:function(t,e,r){return Ul(t,e,!1,r)},insideOriented:function(t,e,r){return cf(t,e,!0,r)},inside:function(t,e,r){return cf(t,e,!1,r)},radial:function(t,e,r){return ff(t.difference(e.center()),!1,r)},radialOriented:function(t,e,r){return ff(t.difference(e.center()),!0,r)}},wr=Cr.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,r){return void 0===t?en(this.get("source")):t instanceof Cr?((i=en(e)||{}).id=t.id,this.set("source",i,r)):Be(t)?this.set("source",i=t,e):((i=en(e)||{}).x=t.x,i.y=t.y,this.set("source",i,r));var i},target:function(t,e,r){return void 0===t?en(this.get("target")):t instanceof Cr?((i=en(e)||{}).id=t.id,this.set("target",i,r)):Be(t)?this.set("target",i=t,e):((i=en(e)||{}).x=t.x,i.y=t.y,this.set("target",i,r));var i},router:function(t,e,r){if(void 0===t){var i=this.get("router");return i?"object"==typeof i?en(i):i:this.get("manhattan")?{name:"orthogonal"}:null}var s="object"==typeof t||"function"==typeof t;return this.set("router",s?t:{name:t,args:e},s?e:r)},connector:function(t,e,r){if(void 0===t){var i=this.get("connector");return i?"object"==typeof i?en(i):i:this.get("smooth")?{name:"smooth"}:null}var s="object"==typeof t||"function"==typeof t;return this.set("connector",s?t:{name:t,args:e},s?e:r)},label:function(t,e,r){var i=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=i.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,r)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){var e=this.attributes.labels;return Array.isArray(e)&&e.length>0},insertLabel:function(t,e,r){if(!e)throw new Error("dia.Link: no label provided");var i=this.labels(),s=i.length;return(t=isFinite(t)&&null!==t?0|t:s)<0&&(t=s+t+1),i.splice(t,0,e),this.labels(i,r)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var r=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,r.splice(t,1),this.labels(r,e)},vertex:function(t,e,r){var i=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=i.length+t),arguments.length<=1)return this.prop(["vertices",t]);var s=this._normalizeVertex(e);return this.prop(["vertices",t],s,r)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var r=[],i=0;i<t.length;i++){var s=t[i],u=this._normalizeVertex(s);r.push(u)}return this.set("vertices",r,e)},insertVertex:function(t,e,r){if(!e)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),s=i.length;(t=isFinite(t)&&null!==t?0|t:s)<0&&(t=s+t+1);var u=this._normalizeVertex(e);return i.splice(t,0,u),this.vertices(i,r)},removeVertex:function(t,e){var r=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,r.splice(t,1),this.vertices(r,e)},_normalizeVertex:function(t){return Be(t)?t:{x:t.x,y:t.y}},translate:function(t,e,r){return(r=r||{}).translateBy=r.translateBy||this.id,r.tx=t,r.ty=e,this.applyToPoints(function(i){return{x:(i.x||0)+t,y:(i.y||0)+e}},r)},scale:function(t,e,r,i){return this.applyToPoints(function(s){return F(s).scale(t,e,r).toJSON()},i)},applyToPoints:function(t,e){if(!Ht(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},i=this.attributes,s=i.source,u=i.target;s.id||(r.source=t(s)),u.id||(r.target=t(u));var l=this.vertices();return l.length>0&&(r.vertices=l.map(t)),this.set(r,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new F(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new F(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){var t=[this.getSourcePoint()].concat(this.vertices().map(F),[this.getTargetPoint()]);return new Pe(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var r=this.getSourceElement(),i=this.getTargetElement(),s=this.getParentCell();r&&i&&(e=r===i||r.isEmbeddedIn(i)?i:i.isEmbeddedIn(r)?r:this.graph.getCommonAncestor(r,i)),s&&(!e||e.id!==s.id)&&s.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.attributes,s=e.source.id,u=e.target.id;if(!s||!u)return!1;var l=s===u;if(!l&&t.deep&&this.graph){var f=this.getSourceCell(),d=this.getTargetCell();l=f.isEmbeddedIn(d)||d.isEmbeddedIn(f)}return l},getSourceCell:function(){var e=this.graph,i=this.attributes.source;return i&&i.id&&e&&e.getCell(i.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){var e=this.graph,i=this.attributes.target;return i&&i.id&&e&&e.getCell(i.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=yr(t)||rn(t)?t:t.id,r=this.getRelationshipAncestor();return!!r&&(r.id===e||r.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){return t.id===e.id&&(t.port===e.port||!t.port&&!e.port)}}),Ss=function(t){var e=Xr(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Fl,this.portLabelLayoutNamespace=Hl,this._init(e)};Ss.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var r=this.getGroup(t),i=this.getPortsByGroup(t),s=r.position||{},u=s.name,l=this.portLayoutNamespace;l[u]||(u="left");var f=s.args||{},d=i.map(function(o){return o&&o.position&&o.position.args}),n=l[u](d,e,f),a={ports:i,result:[]};return qt(n).reduce(function(o,h,p){var A=o.ports[p];return o.result.push({portId:A.id,portTransformation:h,labelTransformation:this._getPortLabelLayout(A,F(h),e),portAttrs:A.attrs,portSize:A.size,labelSize:A.label.size}),o}.bind(this),a),a.result},_getPortLabelLayout:function(t,e,r){var i=this.portLabelLayoutNamespace,s=t.label.position.name||"left";return i[s]?i[s](e,r,t.label.position.args):null},_init:function(t){if(Xe(t.groups))for(var e=Object.keys(t.groups),r=0,i=e.length;r<i;r++){var s=e[r];this.groups[s]=this._evaluateGroup(t.groups[s])}for(var u=qt(t.items),l=0,f=u.length;l<f;l++)this.ports.push(this._evaluatePort(u[l]))},_evaluateGroup:function(t){return dr(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Mt({},t),r=this.getGroup(t.group);return e.markup=e.markup||r.markup,e.attrs=dr({},r.attrs,e.attrs),e.position=this._createPositionNode(r,e),e.label=dr({},r.label,this._getLabel(e)),e.z=this._getZIndex(r,e),e.size=Mt({},r.size,e.size),e},_getZIndex:function(t,e){return rn(e.z)?e.z:rn(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return dr({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var i,r={};Ht(t)?(i="fn",r.fn=t):yr(t)?i=t:void 0===t?i=e?"left":null:Array.isArray(t)?(i="absolute",r.x=t[0],r.y=t[1]):Xe(t)&&(i=t.name,Mt(r,t.args));var s={args:r};return i&&(s.name=i),s},_getLabel:function(t,e){var r=t.label||{},i=r;return i.position=this._getPosition(r.position,e),i}};var df={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};qt(t.items).forEach(function(f){e[f.id]=!0});var r=this.previous("ports")||{},i={};qt(r.items).forEach(function(f){e[f.id]||(i[f.id]=!0)});var s=this.graph;s&&!Li(i)&&(s.getConnectedLinks(this,{inbound:!0}).forEach(function(f){i[f.get("target").port]&&f.remove()}),s.getConnectedLinks(this,{outbound:!0}).forEach(function(f){i[f.get("source").port]&&f.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Xr(this.prop("ports/items"))||[]},getGroupPorts:function(t){var e=qt(this.prop(["ports","items"])).filter(function(r){return r.group===t});return Xr(e)},getPort:function(t){return Xr(qt(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,pt(this.size())).reduce(function(r,i){var s=i.portTransformation;return r[i.portId]={x:s.x,y:s.y,angle:s.angle},r},{})},getPortIndex:function(t){var e=Xe(t)?t.id:t;return this._isValidPortId(e)?qt(this.prop("ports/items")).findIndex(function(r){return r.id===e}):-1},addPort:function(t,e){if(!Xe(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var r=Mt([],this.prop("ports/items"));return r.push(t),this.prop("ports/items",r,e),this},insertPort:function(t,e,r){var i="number"==typeof t?t:this.getPortIndex(t);if(!Xe(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");var s=Mt([],this.prop("ports/items"));return s.splice(i,0,e),this.prop("ports/items",s,r),this},portProp:function(t,e,r,i){var s=this.getPortIndex(t);if(-1===s)throw new Error("Element: unable to find port with id "+t);var u=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?u[0]=["ports","items",s].concat(e):yr(e)?u[0]=["ports/items/",s,"/",e].join(""):(u=["ports/items/"+s],Be(e)&&(u.push(e),u.push(r))),this.prop.apply(this,u)},_validatePorts:function(){var t=this.get("ports")||{},e=[],r=qt((t=t||{}).items);return r.forEach(function(i){"object"!=typeof i&&e.push("Element: invalid port ",i),this._isValidPortId(i.id)||(i.id=this.generatePortId())},this),ja(r,"id").length!==r.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!Xe(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Mt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){var r=e||{},i=this.getPortIndex(t);if(-1!==i){var s=Mt([],this.prop(["ports","items"]));s.splice(i,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],s,r),this.stopBatch("port-remove")}return this},removePorts:function(t,e){var r,i;if(Array.isArray(t)){if(r=e||{},0===t.length)return this.this;i=Mt([],this.prop(["ports","items"])).filter(function(u){return!t.some(function(l){var f=Xe(l)?l.id:l;return u.id===f})})}else r=t||{},i=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],i,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e,t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new Ss(this.get("ports"));var r=this._portSettingsData.getPorts();if(e){var i=r.filter(function(u){if(!e.find(function(l){return l.id===u.id}))return u}),s=e.filter(function(u){if(!r.find(function(l){return l.id===u.id}))return u});s.length>0&&this.trigger("ports:remove",this,s),i.length>0&&this.trigger("ports:add",this,i)}}},vf={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),r=0,i=e.node.childNodes.length;r<i;r++)t.push(e.node.childNodes[r]);var s=lo(this.model._portSettingsData.getPorts(),"z"),u="auto";qt(s[u]).forEach(function(a){var o=this._getPortElement(a);e.append(o),t.push(o)},this);for(var l=Object.keys(s),f=0;f<l.length;f++){var d=l[f];if(d!==u){var n=parseInt(d,10);this._appendPorts(s[d],n,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,r){var i=this._getContainerElement(),s=qt(t).map(this._getPortElement,this);r[e]||e<0?it(r[Math.max(e,0)]).before(s):i.append(s)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){var r=this._portElementsCache[t];if(!r)return null;var l=this.findBySelector(e,r.portContentElement.node,r.portContentSelectors)[0];return void 0===l&&(l=null),l},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Fn(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e,r,i,s,u=it(this.portContainerMarkup).addClass("joint-port"),l=this._getPortMarkup(t);if(Array.isArray(l)){var f=this.parseDOMJSON(l,u.node),d=f.fragment;e=d.childNodes.length>1?it("g").append(d):it(d.firstChild),s=f.selectors}else e=it(l),Array.isArray(e)&&(e=it("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});var A,n=this._getPortLabelMarkup(t.label);if(Array.isArray(n)){var a=this.parseDOMJSON(n,u.node),o=a.fragment,p=o.childNodes.length;p>0&&(i=a.selectors,r=1===p?it(o.firstChild):it("g").append(o))}else r=it(n),Array.isArray(r)&&(r=it("g").append(r));if(s&&i){for(var b in i)if(s[b]&&b!==this.selector)throw new Error("ElementView: selectors within port must be unique.");A=Mt({},s,i)}else A=s||i;return u.append(e.addClass("joint-port-body")),r&&u.append(r.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:u,portLabelElement:r,portSelectors:A,portLabelSelectors:i,portContentElement:e,portContentSelectors:s},u},_updatePortGroup:function(t){for(var e=pt(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(t,e),i=0,s=r.length;i<s;i++){var u=r[i],f=this._portElementsCache[u.portId]||{},d=u.portTransformation;this.applyPortTransform(f.portElement,d),this.updateDOMSubtreeAttributes(f.portElement.node,u.portAttrs,{rootBBox:new pt(u.portSize),selectors:f.portSelectors});var n=u.labelTransformation;n&&f.portLabelElement&&(this.applyPortTransform(f.portLabelElement,n,-d.angle||0),this.updateDOMSubtreeAttributes(f.portLabelElement.node,n.attrs,{rootBBox:new pt(u.labelSize),selectors:f.portLabelSelectors}))}},applyPortTransform:function(t,e,r){var i=it.createSVGMatrix().rotate(r||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(i,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Je=Cr.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Cr.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,r){var f,i=rn(e),s=(r=(i?r:t)||{}).parentRelative,u=r.deep,l=r.restrictedArea;if(s){if(!this.graph)throw new Error("Element must be part of a graph.");var d=this.getParentCell();d&&!d.isLink()&&(f=d.get("position"))}if(i){if(f&&(t+=f.x,e+=f.y),u||l){var n=this.get("position");this.translate(t-n.x,e-n.y,r)}else this.set("position",{x:t,y:e},r);return this}var h=F(this.get("position"));return s?h.difference(f):h},translate:function(t,e,r){if(e=e||0,0===(t=t||0)&&0===e)return this;(r=r||{}).translateBy=r.translateBy||this.id;var i=this.get("position")||{x:0,y:0},s=r.restrictedArea;if(s&&r.translateBy===this.id)if("function"==typeof s){var u=s.call(this,i.x+t,i.y+e,r);t=u.x-i.x,e=u.y-i.y}else{var l=this.getBBox({deep:!0}),f=i.x-l.x,d=i.y-l.y,n=Math.max(s.x+f,Math.min(s.x+s.width+f-l.width,i.x+t)),a=Math.max(s.y+d,Math.min(s.y+s.height+d-l.height,i.y+e));t=n-i.x,e=a-i.y}var o={x:i.x+t,y:i.y+e};return r.tx=t,r.ty=e,r.transition?(Xe(r.transition)||(r.transition={}),this.transition("position",o,Mt({},r.transition,{valueFunction:Pl.object})),Fn(this.getEmbeddedCells(),"translate",t,e,r)):(this.startBatch("translate",r),this.set("position",o,r),Fn(this.getEmbeddedCells(),"translate",t,e,r),this.stopBatch("translate",r)),this},size:function(t,e,r){var i=this.get("size");return void 0===t?{width:i.width,height:i.height}:(Xe(t)&&(r=e,e=rn(t.height)?t.height:i.height,t=rn(t.width)?t.width:i.width),this.resize(t,e,r))},resize:function(t,e,r){if(this.startBatch("resize",r=r||{}),r.direction){var i=this.get("size");switch(r.direction){case"left":case"right":e=i.height;break;case"top":case"bottom":t=i.width}var l,s=Zn(this.get("angle")||0),u=this.getBBox();if(s){var f={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(f+=Math.floor((s+45)/90),f%=4);var d=u[["bottomLeft","corner","topRight","origin"][f]](),n=F(d).rotate(u.center(),-s),a=Math.sqrt(t*t+e*e)/2,o=f*Math.PI/2;o+=Math.atan(f%2==0?e/t:t/e),o-=xn(s);var h=F.fromPolar(a,o,n);l=F(h).offset(t/-2,e/-2)}else switch(l=u.topLeft(),r.direction){case"top":case"top-right":l.offset(0,u.height-e);break;case"left":case"bottom-left":l.offset(u.width-t,0);break;case"top-left":l.offset(u.width-t,u.height-e)}this.set("size",{width:t,height:e},r),this.position(l.x,l.y,r)}else this.set("size",{width:t,height:e},r);return this.stopBatch("resize",r),this},scale:function(t,e,r,i){var s=this.getBBox().scale(t,e,r);return this.startBatch("scale",i),this.position(s.x,s.y,i),this.resize(s.width,s.height,i),this.stopBatch("scale"),this},fitEmbeds:function(t){void 0===t&&(t={});var r=this.graph;if(!r)throw new Error("Element must be part of a graph.");var i=this.getEmbeddedCells().filter(function(A){return A.isElement()});if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&Fn(i,"fitEmbeds",t);var s=ga(t.padding),u=s.left,l=s.right,f=s.top,d=s.bottom,n=r.getCellsBBox(i),a=n.x,o=n.y,h=n.width,p=n.height;return this.set({position:{x:a-=u,y:o-=f},size:{width:h+=u+l,height:p+=d+f}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,r,i){if(r){var s=this.getBBox().center(),u=this.get("size"),l=this.get("position");s.rotate(r,this.get("angle")-t);var f=s.x-u.width/2-l.x,d=s.y-u.height/2-l.y;this.startBatch("rotate",{angle:t,absolute:e,origin:r}),this.position(l.x+f,l.y+d,i),this.rotate(t,e,null,i),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,i);return this},angle:function(){return Zn(this.get("angle")||0)},getBBox:function(t){void 0===t&&(t={});var r=this.graph,i=this.attributes,u=t.rotate;if(t.deep&&r){var l=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return l.push(this),r.getCellsBBox(l,t)}var f=i.angle;void 0===f&&(f=0);var d=i.position,o=i.size,A=new pt(d.x,d.y,o.width,o.height);return u&&A.rotateAroundCenter(f),A},getPointFromConnectedLink:function(t,e){var r=this.getBBox(),i=r.center(),s=t.get(e);if(!s)return i;var u=s.port;if(!u||!this.hasPort(u))return i;var l=this.portProp(u,["group"]),f=this.getPortsPositions(l),d=new F(f[u]).offset(r.origin()),n=this.angle();return n&&d.rotate(i,-n),d}});Mt(Je.prototype,df);var Zh=yt.Collection.extend({initialize:function(t,e){this.cellNamespace=e.cellNamespace?e.cellNamespace:"undefined"!=typeof joint&&hi(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var r=e.collection,u=new("link"===t.type?wr:Ti(r.cellNamespace,t.type,".")||Je)(t,e);return e.dry||(u.graph=r.graph),u},comparator:function(t){return t.get("z")||0}}),Ui=yt.Model.extend({initialize:function(t,e){var r=new Zh([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});yt.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.attributes,r=e.source,i=e.target;r.id&&((this._out[r.id]||(this._out[r.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.attributes,r=e.source,i=e.target;r.id&&this._out[r.id]&&this._out[r.id][t.id]&&delete this._out[r.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var r=t.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var r=t.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=yt.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,r){var i;return"object"==typeof t?(i=t,r=e):(i={})[t]=e,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,r),i=Pi(i,"cells")),yt.Model.prototype.set.call(this,i,r)},clear:function(t){t=Mt({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var r=e.sortBy(function(i){return i.isLink()?1:2});do{r.shift().remove(t)}while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var r;if(t instanceof yt.Model?(r=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):r=t,!yr(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof yt.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=Cu(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(r){this.addCell(r,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var r=qt(t).map(function(i){return this._prepareCell(i,e)},this);return this.get("cells").reset(r,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Fn(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,r){(r=r||{}).clear||(r.disconnectLinks?this.disconnectLinks(t,r):this.removeLinks(t,r)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(function(t){return t.isElement()})},getLinks:function(){return this.get("cells").filter(function(t){return t.isLink()})},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var r=(e=e||{}).indirect,i=e.inbound,s=e.outbound;void 0===i&&void 0===s&&(i=s=!0);var u=[],l={};function f(o,h){if(Un(o.getOutboundEdges(h.id),function(A,b){if(!l[b]){var T=o.getCell(b);u.push(T),l[b]=!0,r&&(i&&d(o,T),s&&f(o,T))}}.bind(o)),r&&h.isLink()){var p=h.getTargetCell();p&&p.isLink()&&(l[p.id]||(u.push(p),f(o,p)))}}function d(o,h){if(Un(o.getInboundEdges(h.id),function(A,b){if(!l[b]){var T=o.getCell(b);u.push(T),l[b]=!0,r&&(i&&d(o,T),s&&f(o,T))}}.bind(o)),r&&h.isLink()){var p=h.getSourceCell();p&&p.isLink()&&(l[p.id]||(u.push(p),d(o,p)))}}if(s&&f(this,t),i&&d(this,t),e.deep){var n=t.getEmbeddedCells({deep:!0}),a={};n.forEach(function(o){o.isElement()&&(a[o.id]=!0)}),n.forEach(function(o){o.isLink()||(s&&Un(this.getOutboundEdges(o.id),function(h,p){if(!l[p]){var b=this.getCell(p).attributes,G=b.source.id,m=b.target.id;if(!e.includeEnclosed&&G&&a[G]&&m&&a[m])return;u.push(this.getCell(p)),l[p]=!0}}.bind(this)),i&&Un(this.getInboundEdges(o.id),function(h,p){if(!l[p]){var b=this.getCell(p).attributes,G=b.source.id,m=b.target.id;if(!e.includeEnclosed&&G&&a[G]&&m&&a[m])return;u.push(this.getCell(p)),l[p]=!0}}.bind(this)))},this)}return u},getNeighbors:function(t,e){e||(e={});var r=e.inbound,i=e.outbound;void 0===r&&void 0===i&&(r=i=!0);var s=this.getConnectedLinks(t,e).reduce(function(f,d){var n=d.attributes,a=n.source,o=n.target,h=d.hasLoop(e);if(r&&hi(a,"id")&&!f[a.id]){var p=this.getCell(a.id);p.isElement()&&(h||p&&p!==t&&(!e.deep||!p.isEmbeddedIn(t)))&&(f[a.id]=p)}if(i&&hi(o,"id")&&!f[o.id]){var A=this.getCell(o.id);A.isElement()&&(h||A&&A!==t&&(!e.deep||!A.isEmbeddedIn(t)))&&(f[o.id]=A)}return f}.bind(this),{});if(t.isLink()){if(r){var u=t.getSourceCell();u&&u.isElement()&&!s[u.id]&&(s[u.id]=u)}if(i){var l=t.getTargetCell();l&&l.isElement()&&!s[l.id]&&(s[l.id]=l)}}return qt(s)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(r){for(var i=[],s=r.get("parent");s;)i.push(s),s=this.getCell(s).get("parent");return i},this);t=t.sort(function(r,i){return r.length-i.length});var e=qt(t.shift()).find(function(r){return t.every(function(i){return i.includes(r)})});return this.getCell(e)},getSuccessors:function(t,e){var r=[];return this.search(t,function(i){i!==t&&r.push(i)},Mt({},e=e||{},{outbound:!0})),r},cloneCells:ei,cloneSubgraph:function(t,e){var r=this.getSubgraph(t,e);return this.cloneCells(r)},getSubgraph:function(t,e){e=e||{};var r=[],i={},s=[],u=[];return qt(t).forEach(function(l){i[l.id]||(r.push(l),i[l.id]=l,l.isLink()?u.push(l):s.push(l)),e.deep&&l.getEmbeddedCells({deep:!0}).forEach(function(d){i[d.id]||(r.push(d),i[d.id]=d,d.isLink()?u.push(d):s.push(d))})}),u.forEach(function(l){var f=l.attributes,d=f.source,n=f.target;if(d.id&&!i[d.id]){var a=this.getCell(d.id);r.push(a),i[a.id]=a,s.push(a)}if(n.id&&!i[n.id]){var o=this.getCell(n.id);r.push(this.getCell(n.id)),i[o.id]=o,s.push(o)}},this),s.forEach(function(l){this.getConnectedLinks(l,e).forEach(function(d){var n=d.attributes,a=n.source,o=n.target;!i[d.id]&&a.id&&i[a.id]&&o.id&&i[o.id]&&(r.push(d),i[d.id]=d)})},this),r},getPredecessors:function(t,e){var r=[];return this.search(t,function(i){i!==t&&r.push(i)},Mt({},e=e||{},{inbound:!0})),r},search:function(t,e,r){(r=r||{}).breadthFirst?this.bfs(t,e,r):this.dfs(t,e,r)},bfs:function(t,e,r){void 0===r&&(r={});var i={},s={},u=[];for(u.push(t),s[t.id]=0;u.length>0;){var l=u.shift();if(!i[l.id]&&(i[l.id]=!0,!1!==e.call(this,l,s[l.id])))for(var f=this.getNeighbors(l,r),d=0,n=f.length;d<n;d++){var a=f[d];s[a.id]=s[l.id]+1,u.push(a)}}},dfs:function(t,e,r){void 0===r&&(r={});var i={},s={},u=[];for(u.push(t),s[t.id]=0;u.length>0;){var l=u.pop();if(!i[l.id]&&(i[l.id]=!0,!1!==e.call(this,l,s[l.id])))for(var f=this.getNeighbors(l,r),d=u.length,n=0,a=f.length;n<a;n++){var o=f[n];s[o.id]=s[l.id]+1,u.splice(d,0,o)}}},getSources:function(){var t=[];return Un(this._nodes,function(e,r){(!this._in[r]||Li(this._in[r]))&&t.push(this.getCell(r))}.bind(this)),t},getSinks:function(){var t=[];return Un(this._nodes,function(e,r){(!this._out[r]||Li(this._out[r]))&&t.push(this.getCell(r))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||Li(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Li(this._out[t.id])},isSuccessor:function(t,e){var r=!1;return this.search(t,function(i){if(i===e&&i!==t)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(t,e){var r=!1;return this.search(t,function(i){if(i===e&&i!==t)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(t,e,r){var i=(r=r||{}).inbound,s=r.outbound;void 0===i&&void 0===s&&(i=s=!0);var u=!1;return this.getConnectedLinks(t,r).forEach(function(l){var f=l.attributes,d=f.source,n=f.target;if(i&&hi(d,"id")&&d.id===e.id||s&&hi(n,"id")&&n.id===e.id)return u=!0,!1}),u},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(r){r.set(r.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){Fn(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(function(e){return e.getBBox({rotate:!0}).containsPoint(t)})},findModelsInArea:function(t,e){void 0===e&&(e={});var r=new pt(t),i=e.strict;void 0===i&&(i=!1);var s=i?"containsRect":"intersect";return this.getElements().filter(function(u){return r[s](u.getBBox({rotate:!0}))})},findModelsUnderElement:function(t,e){void 0===e&&(e={});var r=e.searchBy;void 0===r&&(r="bbox");var i=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===r?this.findModelsInArea(i):this.findModelsFromPoint(i[r]())).filter(function(u){return t.id!==u.id&&!u.isEmbeddedIn(t)})},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e){void 0===e&&(e={});var r=e.rotate;return void 0===r&&(r=!0),qt(t).reduce(function(i,s){var u=s.getBBox({rotate:r});return u?i?i.union(u):u:i},null)},translate:function(t,e,r){var i=this.getCells().filter(function(s){return!s.isEmbedded()});return Fn(i,"translate",t,e,r),this},resize:function(t,e,r){return this.resizeCells(t,e,this.getCells(),r)},resizeCells:function(t,e,r,i){var s=this.getCellsBBox(r);if(s){var u=Math.max(t/s.width,0),l=Math.max(e/s.height,0);Fn(r,"scale",u,l,s.origin(),i)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Mt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Mt({},e,{batchName:t}))},hasActiveBatch:function(t){var e=this._batches;return(0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t]).some(function(i){return e[i]>0})}},{validations:{multiLinks:function(t,e){var r=e.attributes,i=r.source,s=r.target;if(i.id&&s.id){var u=e.getSourceCell();if(u&&t.getConnectedLinks(u,{outbound:!0}).filter(function(d){var n=d.attributes,a=n.source,o=n.target;return a&&a.id===i.id&&(!a.port||a.port===i.port)&&o&&o.id===s.id&&(!o.port||o.port===s.port)}).length>1)return!1}return!0},linkPinning:function(t,e){var r=e.attributes;return r.source.id&&r.target.id}}});jl(Ui.prototype,["resetCells","addCells","removeCells"],vo.cells);var Vi={},Vn=yt.View.extend({options:{},theme:null,themeClassNamePrefix:ti("theme-"),requireSetThemeOverride:!1,defaultTheme:Yn.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Mt({},this.options,t),yt.View.call(this,t)},initialize:function(){Vi[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=ke(this,"children")),t){var e=this.svgElement,i=Ga(t,it.namespace[e?"svg":"xhtml"]);(e?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttribute:function(t,e){for(var r=e;r&&1===r.nodeType;){var i=r.getAttribute(t);if(i)return i;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(ke(this,"el"));else{var t=ke(this,"tagName"),e=Mt({},ke(this,"attributes")),r=Mt({},ke(this,"style"));this.id&&(e.id=ke(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(it.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof yt.$?t:yt.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=it(this.el))},_ensureElClassName:function(){var t=ke(this,"className");if(t){var e=ti(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){var e=this.themeClassNamePrefix+(t=t||this.theme);return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Vi[this.cid]=null,yt.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,r){if(!e)return this;r||(r={});var i=this.getEventNamespace();for(var s in e){var u=e[s];"function"!=typeof u&&(u=this[u]),u&&Wt(t).on(s+i,r,u.bind(this))}return this},undelegateElementEvents:function(t){return Wt(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=ke(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var r=t.data,i="__"+this.cid+"__";return void 0===e?r&&r[i]||{}:(r||(r=t.data={}),r[i]||(r[i]={}),Mt(r[i],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Mt({},t[0])||{},r=t[1]&&Mt({},t[1])||{},i=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof i&&i.apply(this,arguments),this.render.__render__===i&&this.onRender(),this},e.render.__render__=i,yt.View.extend.call(this,e,r)}});if(Wt.event&&!("dbltap"in Wt.event.special)){var _h=Yn.doubleTapInterval;Wt.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var s=t.handleObj,u=t.target,l=Wt.data(u),f=(new Date).getTime(),d="lastTouch"in l?f-l.lastTouch:0;d<_h&&d>30?(l.lastTouch=null,t.type=s.origType,(e=s.handler).call.apply(e,[this,t].concat(r))):l.lastTouch=f}}}var pf={views:Vi,View:Vn},Jr={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},ku=Vn.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return ti(this.options.name+"-layer")},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){var r=this.el;t.parentNode!==r&&r.appendChild(t)},insertPivot:function(t){var r=this.el,i=this.pivotNodes;(t=+t)||(t=0);var s=i[t];if(s)return s;s=i[t]=document.createComment("z-index:"+(t+1));var u=-1/0;for(var l in i)(l=+l)<t&&l>u&&(u=l);return r.insertBefore(s,u!==-1/0?i[u].nextSibling:r.firstChild),s},removePivots:function(){var e=this.el,r=this.pivotNodes;for(var i in r)e.removeChild(r[i]);this.pivotNodes={}}});function Eu(t){return t?Array.isArray(t)?t:[t]:[]}var Ei=Vn.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate:function(e,r){var i=e.paper;this.cellView=e,this.nodeSelector=r,i&&(this.updateRequested=!0,i.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate:function(){return this.updateRequested=!1,this.update(this.cellView,this.nodeSelector),this.mount(),this.transform(),0},findNode:function(e,r){var u;if(void 0===r&&(r=null),"string"==typeof r)u=e.findBySelector(r)[0];else if(Be(r)){var l=e.model.isLink(),f=r.label;void 0===f&&(f=null);var d=r.port,n=r.selector;u=l&&null!==f?e.findLabelNode(f,n):!l&&d?e.findPortNode(d,n):e.findBySelector(n)[0]}else r&&((u=it.toNode(r))instanceof SVGElement||(u=null));return u||null},mount:function(){var e=this,i=e.cellView,s=e.el,u=e.options;if(e.MOUNTABLE&&!e.transformGroup){var f=i.vel,d=i.paper,n=u.layer;if(n){var a=this.transformGroup=it("g").addClass("highlight-transform").append(s);d.getLayerView(n).insertSortedNode(a.node,u.z)}else(!s.parentNode||s.nextSibling)&&f.append(s)}},unmount:function(){var e=this,i=e.transformGroup,s=e.vel;!e.MOUNTABLE||(i?(this.transformGroup=null,i.remove()):s.remove())},transform:function(){var e=this,r=e.transformGroup,i=e.cellView,s=e.updateRequested;if(r&&!i.model.isLink()&&!s){var u=i.getRootTranslateMatrix(),l=i.getRootRotateMatrix(),f=u.multiply(l);r.attr("transform",it.matrixToTransformString(f))}},update:function(){var e=this,r=e.node,i=e.cellView,l=e.id;if(!e.updateRequested){var f=this.node=this.findNode(i,e.nodeSelector);r&&this.unhighlight(i,r),f?(this.highlight(i,f),this.mount()):(this.unmount(),i.notify("cell:highlight:invalid",l,this))}},onRemove:function(){var e=this,r=e.node,i=e.cellView,s=e.id,u=e.constructor;r&&this.unhighlight(i,r),this.unmount(),u._removeRef(i,s)},highlight:function(e,r){},unhighlight:function(e,r){}},{_views:{},highlight:function(t,e,r){var i=this.uniqueId(e,r);this.add(t,e,i,r)},unhighlight:function(t,e,r){var i=this.uniqueId(e,r);this.remove(t,i)},get:function(e,r){void 0===r&&(r=null);var l=this._views[e.cid];if(null===r){var f=[];if(!l)return f;for(var d in l){var n=l[d];n instanceof this&&f.push(n)}return f}if(!l)return null;if(r in l){var a=l[r];if(a instanceof this)return a}return null},add:function(e,r,i,s){if(void 0===s&&(s={}),!i)throw new Error("dia.HighlighterView: An ID required.");var u=Ei.get(e,i);u&&u.remove();var l=new this(s);return l.id=i,this._addRef(e,i,l),l.requestUpdate(e,r),l},_addRef:function(e,r,i){var s=e.cid,l=this._views,f=l[s];f||(f=l[s]={}),f[r]=i},_removeRef:function(e,r){var i=e.cid,u=this._views,l=u[i];if(l){for(var f in r&&delete l[r],l)return;delete u[i]}},remove:function(e,r){void 0===r&&(r=null),Eu(this.get(e,r)).forEach(function(i){i.remove()})},update:function(e,r,i){void 0===r&&(r=null),void 0===i&&(i=!1),Eu(this.get(e,r)).forEach(function(s){(i||s.UPDATABLE)&&s.update()})},transform:function(e,r){void 0===r&&(r=null),Eu(this.get(e,r)).forEach(function(i){i.UPDATABLE&&i.transform()})},uniqueId:function(e,r){return void 0===r&&(r=""),it.ensureId(e)+JSON.stringify(r)}}),Xi={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},ne=Vn.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(r,i,s){t.push("type-"+s.slice(0,i+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var i,s,u,t={},e={},r=0,l=ke(this,"presentationAttributes");for(var f in l)if(l.hasOwnProperty(f)){var d=l[f];for(Array.isArray(d)||(d=[d]),i=0,s=d.length;i<s;i++){var n=t[u=d[i]];n||(n=t[u]=1<<r++),e[f]|=n}}var a=ke(this,"initFlag");for(Array.isArray(a)||(a=[a]),i=0,s=a.length;i<s;i++)t[u=a[i]]||(t[u]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var r=0;if(Array.isArray(t))for(var i=0,s=t.length;i<s;i++)r|=e[t[i]];else r|=e[t];return r},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||ws(this),Vn.call(this,t)},initialize:function(){this.setFlags(),Vn.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount:function(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var r=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!r||(e.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(r,e))},requestUpdate:function(t,e){var i=this.paper;i&&t>0&&i.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var r=Ga(t),i=r.selectors,s=r.groupSelectors;for(var u in s){if(i[u])throw new Error("dia.CellView: ambiguous group selector");i[u]=s[u]}if(e){var l=this.selector;if(i[l])throw new Error("dia.CellView: ambiguous root selector.");i[l]=e}return{fragment:r.fragment,selectors:i}},can:function(t){var e=Ht(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Xe(e)&&!1!==e[t]||zl(e)&&!1!==e},findBySelector:function(t,e,r){if(e||(e=this.el),r||(r=this.selectors),!t||"."===t)return[e];if(r){var i=r[t];if(i)return Array.isArray(i)?i:[i]}return Yn.useCSSSelectors?Wt(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var r=this.model;e=r.getBBox().bbox(r.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),r=this.getNodeMatrix(t),i=this.getRootTranslateMatrix(),s=this.getRootRotateMatrix();return it.transformRect(e,i.multiply(s).multiply(r))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),r=this.getNodeMatrix(t),i=this.getRootTranslateMatrix();return it.transformRect(e,i.multiply(r))},getRootTranslateMatrix:function(){var e=this.model.position();return it.createSVGMatrix().translate(e.x,e.y)},getRootRotateMatrix:function(){var t=it.createSVGMatrix(),e=this.model,r=e.angle();if(r){var i=e.getBBox(),s=i.width/2,u=i.height/2;t=t.translate(s,u).rotate(r).translate(-s,-u)}return t},_notifyHighlight:function(t,e,r){void 0===r&&(r={});var f,l=this.el;if(f="string"==typeof e?void 0===(f=this.findBySelector(e)[0])?l:f:void 0===(f=this.$(e)[0])?l:f,r.partial=f!==l,void 0===r.type){var d;switch(!0){case r.embedding:d=Xi.EMBEDDING;break;case r.connecting:d=Xi.CONNECTING;break;case r.magnetAvailability:d=Xi.MAGNET_AVAILABILITY;break;case r.elementAvailability:d=Xi.ELEMENT_AVAILABILITY;break;default:d=Xi.DEFAULT}r.type=d}return this.notify(t,f,r),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e){return void 0===e&&(e={}),this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){var e=this.el,r=this.$(t)[0];r||(r=e);do{var i=r.getAttribute("magnet"),s=r===e;if((i||s)&&"false"!==i)return r;if(s)return;r=r.parentNode}while(r)},findProxyNode:function(t,e){t||(t=this.el);var r=t.getAttribute(e+"-selector");if(r){var s=this.findBySelector(r)[0];if(s)return s}return t},getSelector:function(t,e){var r;if(t===this.el)return"string"==typeof e&&(r="> "+e),r;if(t){var i=it(t).index()+1;r=t.tagName+":nth-child("+i+")",e&&(r+=" > "+e),r=this.getSelector(t.parentNode,r)}return r},addLinkFromMagnet:function(t,e,r){var i=this.paper,s=i.model,u=i.getDefaultLink(this,t);return u.set({source:this.getLinkEnd(t,e,r,u,"source"),target:{x:e,y:r}}).addTo(s,{async:!1,ui:!0}),u.findView(i)},getLinkEnd:function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var s=this.model,u=s.id,l=this.findAttribute("port",t),f=t.getAttribute("joint-selector"),d={id:u};return null!=f&&(d.magnet=f),null!=l?(d.port=l,!s.hasPort(l)&&!f&&(d.selector=this.getSelector(t))):null==f&&this.el!==t&&(d.selector=this.getSelector(t)),(e=this).customizeLinkEnd.apply(e,[d,t].concat(r))},customizeLinkEnd:function(t,e,r,i,s,u){var f=this.paper,n=f.options.connectionStrategy;if("function"==typeof n){var a=n.call(f,t,this,e,new F(r,i),s,u,f);if(a)return a}return t},getMagnetFromLinkEnd:function(t){var u,e=this.el,r=t.port,i=t.magnet,s=this.model;return null!=r&&s.isElement()&&s.hasPort(r)?u=this.findPortNode(r,i)||e:(i||(i=t.selector),!i&&null!=r&&(i='[port="'+r+'"]'),u=this.findBySelector(i,e,this.selectors)[0]),this.findProxyNode(u,"magnet")},dragLinkStart:function(t,e,r,i){this.model.startBatch("add-link");var s=this.addLinkFromMagnet(e,r,i);s.notifyPointerdown(t,r,i),s.eventData(t,s.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:s})},dragLink:function(t,e,r){var i=this.eventData(t),s=i.linkView;if(s)s.pointermove(t,e,r);else{var u=this.paper,l=u.options.magnetThreshold,f=this.getEventTarget(t),d=i.targetMagnet;if("onleave"===l){if(d===f||it(d).contains(f))return}else if(u.eventData(t).mousemoved<=l)return;this.dragLinkStart(t,d,e,r)}},dragLinkEnd:function(t,e,r){var s=this.eventData(t).linkView;!s||(s.pointerup(t,e,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Li(e)||(t instanceof SVGElement?it(t).attr(e):Wt(t).attr(e))},processNodeAttributes:function(t,e){var r,i,s,u,l,f,d,n,a,o=[];for(r in e)!e.hasOwnProperty(r)||(i=e[r],!(s=this.getAttributeDefinition(r))||Ht(s.qualify)&&!s.qualify.call(this,i,t,e)?(f||(f={}),f[hu(r)]=i):(yr(s.set)&&(f||(f={}),f[s.set]=i),null!==i&&o.push(r,s)));for(u=0,l=o.length;u<l;u+=2)i=e[r=o[u]],Ht((s=o[u+1]).set)&&(d||(d={}),d[r]=i),Ht(s.position)&&(n||(n={}),n[r]=i),Ht(s.offset)&&(a||(a={}),a[r]=i);return{raw:e,normal:f,set:d,position:n,offset:a}},updateRelativeAttributes:function(t,e,r,i){i||(i={});var s,u,f=e.raw||{},d=e.normal||{},n=e.set,a=e.position,o=e.offset;for(s in n){u=n[s];var h=this.getAttributeDefinition(s).set.call(this,u,r.clone(),t,f);Xe(h)?Mt(d,h):void 0!==h&&(d[s]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,d);else{var T,P,G,p=d.transform,A=it.transformStringToMatrix(p),b=F(A.e,A.f);if(p&&(d=Pi(d,"transform"),A.e=A.f=0),a||o){var m=this.getNodeScale(t,i.scalableNode);T=m.sx,P=m.sy}var w=!1;for(s in a)u=a[s],(G=this.getAttributeDefinition(s).position.call(this,u,r.clone(),t,f))&&(b.offset(F(G).scale(T,P)),w||(w=!0));this.setNodeAttributes(t,d);var M=!1;if(o){var E=this.getNodeBoundingRect(t);if(E.width>0&&E.height>0){var j=it.transformRect(E,A).scale(1/T,1/P);for(s in o)u=o[s],(G=this.getAttributeDefinition(s).offset.call(this,u,j,t,f))&&(b.offset(F(G).scale(T,P)),M||(M=!0))}}(void 0!==p||w||M)&&(b.round(1),A.e=b.x,A.f=b.y,t.setAttribute("transform",it.matrixToTransformString(A)))}},getNodeScale:function(t,e){var r,i;if(e&&e.contains(t)){var s=e.scale();r=1/s.sx,i=1/s.sy}else r=1,i=1;return{sx:r,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var r=it.ensureId(t),i=e[r];return i||(i=e[r]={}),i},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=it(t).getBBox()),new pt(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var r=this.rotatableNode||this.el;e.magnetMatrix=it(t).getTransformToElement(r)}return it.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=it(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,r,i){var s,u,l,f,d={},n=[];for(var a in t)if(t.hasOwnProperty(a)&&Be(l=t[a])){var o=r[a]=this.findBySelector(a,e,i);for(s=0,u=o.length;s<u;s++){var h=o[s];f=it.ensureId(h);var p=i&&i[a]===h,A=d[f];if(A){A.array||(n.push(f),A.array=!0,A.attributes=[A.attributes],A.selectedLength=[A.selectedLength]);var b=A.attributes,T=A.selectedLength;if(p)b.unshift(l),T.unshift(-1);else{var P=Sn(T,u);b.splice(P,0,l),T.splice(P,0,u)}}else d[f]={attributes:l,selectedLength:p?-1:u,node:h,array:!1}}}for(s=0,u=n.length;s<u;s++)(l=d[f=n[s]]).attributes=dr.apply(void 0,[{}].concat(l.attributes.reverse()));return d},getEventTarget:function(t,e){void 0===e&&(e={});var r=t.target,i=t.type,s=t.clientX;void 0===s&&(s=0);var u=t.clientY;return void 0===u&&(u=0),e.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(s,u):r},updateDOMSubtreeAttributes:function(t,e,r){r||(r={}),r.rootBBox||(r.rootBBox=pt()),r.selectors||(r.selectors=this.selectors);var f,d,n,a,o,i={},s={},u=[],l=[],h=r.roAttributes,p=this.findNodesAttributes(h||e,t,i,r.selectors),A=h?this.findNodesAttributes(e,t,i,r.selectors):p;for(var b in p)if((o=this.processNodeAttributes(d=(a=p[b]).node,n=a.attributes)).set||o.position||o.offset){var G,T=A[b]&&A[b].attributes,P=T&&void 0===n.ref?T.ref:n.ref;if(P){if(!(G=(i[P]||this.findBySelector(P,t,r.selectors))[0]))throw new Error('dia.CellView: "'+P+'" reference does not exist.')}else G=null;if(f={node:d,refNode:G,processedAttributes:o,allAttributes:T},G){var m=l.findIndex(function(ft){return ft.refNode===d});m>-1?l.splice(m,0,f):l.push(f)}else u.push(f)}else this.setNodeAttributes(d,o.normal);u.push.apply(u,l);for(var w,M=0,E=u.length;M<E;M++){d=(f=u[M]).node,G=f.refNode;var j=it(r.rotatableNode),Y=G?it.ensureId(G):"",B=!!j&&!!G&&j.contains(G),H=s[Y];if(!H){var et=B?j:t;H=s[Y]=G?it(G).getBBox({target:et}):r.rootBBox}h?(o=this.processNodeAttributes(d,f.allAttributes),this.mergeProcessedAttributes(o,f.processedAttributes)):o=f.processedAttributes;var at=H;B&&!j.contains(d)&&(w||(w=it.transformStringToMatrix(j.attr("transform"))),at=it.transformRect(H,w)),this.updateRelativeAttributes(d,o,at,r)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Mt(t.set,e.set),Mt(t.position,e.position),Mt(t.offset,e.offset);var r=t.normal&&t.normal.transform;void 0!==r&&e.normal&&(e.normal.transform=r),t.normal=e.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Ei.remove(this)},updateHighlighters:function(t){void 0===t&&(t=!1),Ei.update(this,null,t)},transformHighlighters:function(){Ei.transform(this)},pointerdblclick:function(t,e,r){this.notify("cell:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){this.notify("cell:pointerclick",t,e,r)},contextmenu:function(t,e,r){this.notify("cell:contextmenu",t,e,r)},pointerdown:function(t,e,r){var s=this.model,u=s.graph;u&&(s.startBatch("pointer"),this.eventData(t,{graph:u})),this.notify("cell:pointerdown",t,e,r)},pointermove:function(t,e,r){this.notify("cell:pointermove",t,e,r)},pointerup:function(t,e,r){var s=this.eventData(t).graph;this.notify("cell:pointerup",t,e,r),s&&s.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,r,i){this.notify("cell:mousewheel",t,e,r,i)},onevent:function(t,e,r,i){this.notify(e,t,r,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave:function(e){var i=this.paper;i.isAsync()&&i.dumpView(this);var s=this.getEventTarget(e,{fromPoint:!0}),u=i.findView(s);u!==this&&(this.mouseleave(e),u&&u.mouseenter(e))},setInteractivity:function(t){this.options.interactive=t}},{Highlighting:Xi,addPresentationAttributes:function(t){return dr({},ke(this.prototype,"presentationAttributes"),t,function(e,r){if(e&&r&&("string"==typeof e&&(e=[e]),"string"==typeof r&&(r=[r]),Array.isArray(e)&&Array.isArray(r)))return ja(e.concat(r))})}}),Vt={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ee=ne.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=ne.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){ne.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Vt.UPDATE],position:[Vt.TRANSLATE,Vt.TOOLS],size:[Vt.RESIZE,Vt.PORTS,Vt.TOOLS],angle:[Vt.ROTATE,Vt.TOOLS],markup:[Vt.RENDER],ports:[Vt.PORTS]},initFlag:[Vt.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){var r=Yn.useCSSSelectors;this.hasFlag(t,Vt.PORTS)&&(this._removePorts(),this._cleanPortsCache());var i=!1;if(this.hasFlag(t,Vt.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),i=!0,t=this.removeFlag(t,[Vt.RENDER,Vt.UPDATE,Vt.RESIZE,Vt.TRANSLATE,Vt.ROTATE,Vt.PORTS,Vt.TOOLS]);else{var s=!1;this.hasFlag(t,Vt.RESIZE)&&(this.resize(e),s=!0,t=this.removeFlag(t,[Vt.RESIZE,Vt.UPDATE])),this.hasFlag(t,Vt.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Vt.UPDATE),s=!0,r&&(t=this.removeFlag(t,Vt.PORTS))),this.hasFlag(t,Vt.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Vt.TRANSLATE),i=!0),this.hasFlag(t,Vt.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Vt.ROTATE),i=!0),this.hasFlag(t,Vt.PORTS)&&(this._renderPorts(),s=!0,t=this.removeFlag(t,Vt.PORTS)),s&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(t,Vt.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Vt.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();var r=Yn.useCSSSelectors;r&&this._removePorts();var i=this.model,s=i.attr();this.updateDOMSubtreeAttributes(this.el,s,{rootBBox:new pt(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===s?null:e}),r&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),r=this.selectors=e.selectors;this.rotatableNode=it(r[this.rotatableSelector])||null,this.scalableNode=it(r[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(it(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Yn.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var r=t.size;return"rotate("+e+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,r=e.angle(),i=e.size(),s=this.scalableNode,u=!1;s.node.getElementsByTagName("path").length>0&&(u=!0);var l=s.getBBox({recursive:u});s.attr("transform","scale("+i.width/(l.width||1)+","+i.height/(l.height||1)+")");var n=this.rotatableNode,a=n&&n.attr("transform");if(a){n.attr("transform",a+" rotate("+-r+","+i.width/2+","+i.height/2+")");var o=s.getBBox({target:this.paper.cells});e.set("position",{x:o.x,y:o.y},Mt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t){void 0===t&&(t={});var e=t.model||this.model,i=(t.paper||this.paper).model,s=t.initialZIndices={},u=e.getEmbeddedCells({deep:!0}),l=i.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e].concat(u,l).forEach(function(a){return s[a.id]=a.attributes.z}),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});var f=i.getElements().reduce(function(a,o){return Math.max(a,o.attributes.z||0)},0);l.forEach(function(a){a.attributes.z<=f&&a.set("z",f+1,{ui:!0})}),e.stopBatch("to-front");var d=e.parent();d?(i.getCell(d).unembed(e,{ui:!0}),t.initialParentId=d):t.initialParentId=null},processEmbedding:function(t,e,r,i){void 0===t&&(t={});var o,s=t.model||this.model,u=t.paper||this.paper,l=u.model,f=u.options,d=f.findParentBy,n=f.frontParentOnly,a=f.validateEmbedding;o=(o=Ht(d)?qt(d.call(l,this,e,r,i)):"pointer"===d?qt(l.findModelsFromPoint({x:r,y:i})):l.findModelsUnderElement(s,{searchBy:d})).filter(function(P){return P instanceof Cr&&s.id!==P.id&&!P.isEmbeddedIn(s)}),n&&(o=o.slice(-1));for(var h=null,p=t.candidateEmbedView,A=o.length-1;A>=0;A--){var b=o[A];if(p&&p.model.id==b.id){h=p;break}var T=b.findView(u);if(!Ht(a)||a.call(u,this,T)){h=T;break}}h&&h!=p&&(this.clearEmbedding(t),t.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&p&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t){void 0===t&&(t={});var e=t.candidateEmbedView,r=t.model||this.model,i=t.paper||this.paper;if(e)e.model.embed(r,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{var u=i.options.validateUnembedding;if(t.initialParentId&&"function"==typeof u&&!u.call(i,this))return void this._disallowUnembed(t)}i.model.getConnectedLinks(r,{deep:!0}).forEach(function(f){f.reparent({ui:!0})})},_disallowUnembed:function(t){var r=t.whenNotAllowed;void 0===r&&(r="revert");var i=t.model||this.model,u=(t.paper||this.paper).model;switch(r){case"remove":i.remove({ui:!0});break;case"revert":var l=t.initialParentId,f=t.initialPosition,d=t.initialZIndices;f&&i.position(f.x,f.y,{deep:!0,ui:!0}),d&&Object.keys(d).forEach(function(h){var p=u.getCell(h);p&&p.set("z",d[h],{ui:!0})});var o=u.getCell(l);o&&o.embed(i,{ui:!0})}},getDelegatedView:function(){for(var t=this,e=t.model,r=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=r.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);var r=t.getAttribute(e+"-selector");if(r){var i=this.findAttribute("port",t);if(i){var s=this.findPortNode(i,r);if(s)return s}else{var l=this.findBySelector(r)[0];if(l)return l}}return t},notifyPointerdown:function(e,r,i){ne.prototype.pointerdown.call(this,e,r,i),this.notify("element:pointerdown",e,r,i)},notifyPointermove:function(e,r,i){ne.prototype.pointermove.call(this,e,r,i),this.notify("element:pointermove",e,r,i)},notifyPointerup:function(e,r,i){this.notify("element:pointerup",e,r,i),ne.prototype.pointerup.call(this,e,r,i)},pointerdblclick:function(t,e,r){ne.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){ne.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,r)},contextmenu:function(t,e,r){ne.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,r)},pointerdown:function(t,e,r){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,r),this.dragStart(t,e,r))},pointermove:function(t,e,r){var i=this.eventData(t);switch(i.action){case"magnet":this.dragMagnet(t,e,r);break;case"move":(i.delegatedView||this).drag(t,e,r);default:this.notifyPointermove(t,e,r)}this.eventData(t,i)},pointerup:function(t,e,r){var i=this.eventData(t);switch(i.action){case"magnet":this.dragMagnetEnd(t,e,r);break;case"move":(i.delegatedView||this).dragEnd(t,e,r);default:this.notifyPointerup(t,e,r)}var s=i.targetMagnet;s&&this.magnetpointerclick(t,s,e,r),this.checkMouseleave(t)},mouseover:function(t){ne.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){ne.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){ne.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){ne.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,r,i){ne.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,r,i)},onmagnet:function(t,e,r){this.dragMagnetStart(t,e,r)},magnetpointerdblclick:function(t,e,r,i){this.notify("element:magnet:pointerdblclick",t,e,r,i)},magnetcontextmenu:function(t,e,r,i){this.notify("element:magnet:contextmenu",t,e,r,i)},dragStart:function(t,e,r){var i=this.getDelegatedView();if(i&&i.can("elementMove")){this.eventData(t,{action:"move",delegatedView:i});var s=i.model.position();i.eventData(t,{initialPosition:s,pointerOffset:s.difference(e,r),restrictedArea:this.paper.getRestrictedArea(i,e,r)})}},dragMagnetStart:function(t,e,r){if(this.can("addLinkFromMagnet")){var i=t.currentTarget,s=this.paper;this.eventData(t,{targetMagnet:i}),t.stopPropagation(),s.options.validateMagnet(this,i,t)?(s.options.magnetThreshold<=0&&this.dragLinkStart(t,i,e,r),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,r),s.delegateDragEvents(this,t.data)}},drag:function(t,e,r){var i=this.paper,s=i.options.gridSize,u=this.model,l=this.eventData(t),f=l.pointerOffset,d=l.restrictedArea,n=l.embedding,a=Ta(e+f.x,s),o=Ta(r+f.y,s);u.position(a,o,{restrictedArea:d,deep:!0,ui:!0}),i.options.embeddingMode&&(n||(this.prepareEmbedding(l),n=!0),this.processEmbedding(l,t,e,r)),this.eventData(t,{embedding:n})},dragMagnet:function(t,e,r){this.dragLink(t,e,r)},dragEnd:function(t,e,r){var i=this.eventData(t);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(t,e,r){this.dragLinkEnd(t,e,r)},magnetpointerclick:function(t,e,r,i){var s=this.paper;s.eventData(t).mousemoved>s.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,r,i)}},{Flags:Vt});Mt(Ee.prototype,vf);var Yh={N:"S",S:"N",E:"W",W:"E"},Fh={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function zu(t,e,r){var i=new F(t.x,e.y);return r.containsPoint(i)&&(i=new F(e.x,t.y)),i}function Ql(t,e){return t["W"===e||"E"===e?"width":"height"]}function gn(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Ou(t){return new pt(t.x,t.y,0,0)}function Ru(t){var e=ga(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function If(t,e){return t.sourceBBox.clone().moveAndExpand(Ru(e))}function Af(t,e){return t.targetBBox.clone().moveAndExpand(Ru(e))}function ql(t,e,r){var i=new F(t.x,e.y),s=new F(e.x,t.y),u=gn(t,i),l=gn(t,s),f=Yh[r],d=u===r||u!==f&&(l===f||l!==r)?i:s;return{points:[d],direction:gn(d,e)}}function mo(t,e,r){var i=zu(t,e,r);return{points:[i],direction:gn(i,e)}}function yf(t,e,r,i){var d,s={},u=[new F(t.x,e.y),new F(e.x,t.y)],l=u.filter(function(o){return!r.containsPoint(o)}),f=l.filter(function(o){return gn(o,t)!==i});if(f.length>0)d=f.filter(function(o){return gn(t,o)===i}).pop(),s.points=[d=d||f[0]],s.direction=gn(d,e);else{d=co(u,l)[0];var n=new F(e).move(d,-Ql(r,i)/2),a=zu(n,t,r);s.points=[a,n],s.direction=gn(n,e)}return s}function Xh(t,e,r,i){var s=mo(e,t,i),u=s.points[0];if(r.containsPoint(u)){var l=(s=mo(t,e,r)).points[0];if(i.containsPoint(l)){var f=new F(t).move(l,-Ql(r,gn(t,l))/2),d=new F(e).move(u,-Ql(i,gn(e,u))/2),n=new It(f,d).midpoint(),a=mo(t,n,r),o=ql(n,e,a.direction);s.points=[a.points[0],o.points[0]],s.direction=o.direction}}return s}function $l(t,e,r,i,s){var a,o,h,u={},l=r.union(i).inflate(1),f=l.center().distance(e)>l.center().distance(t),d=f?e:t,n=f?t:e;return s?(a=F.fromPolar(l.width+l.height,Fh[s],d),a=l.pointNearestToPoint(a).move(a,-1)):a=l.pointNearestToPoint(d).move(d,1),o=zu(a,n,l),a.round().equals(o.round())?(o=F.fromPolar(l.width+l.height,xn(a.theta(d))+Math.PI/2,n),h=zu(a,o=l.pointNearestToPoint(o).move(n,1).round(),l),u.points=f?[o,h,a]:[a,h,o]):u.points=f?[o,a]:[a,o],u.direction=gn(f?a:o,e),u}function tc(t,e,r){var i=If(r,e),s=Af(r,e),u=function Uh(t,e){return t.sourceAnchor?t.sourceAnchor:If(t,e).center()}(r,e),l=function Vh(t,e){return t.targetAnchor?t.targetAnchor:Af(t,e).center()}(r,e);i=i.union(Ou(u)),s=s.union(Ou(l)),(t=qt(t).map(F)).unshift(u),t.push(l);for(var f,d=[],n=0,a=t.length-1;n<a;n++){var o=null,h=t[n],p=t[n+1],A=!!gn(h,p);if(0===n)n+1===a?i.intersect(s.clone().inflate(1))?o=$l(h,p,i,s):A||(o=Xh(h,p,i,s)):i.containsPoint(p)?o=$l(h,p,i,Ou(p).moveAndExpand(Ru(e))):A||(o=mo(h,p,i));else if(n+1===a){var b=A&&gn(p,h)===f;s.containsPoint(h)||b?o=$l(h,p,Ou(h).moveAndExpand(Ru(e)),s,f):A||(o=yf(h,p,s,f))}else A||(o=ql(h,p,f));o?(Array.prototype.push.apply(d,o.points),f=o.direction):f=gn(h,p),n+1<a&&d.push(p)}return d}var ec={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,r){if(!Ht(tc))throw new Error("Manhattan requires the orthogonal router as default fallback.");return tc(t,Mt({},ec,e),r)},fallbackRoute:function(t,e,r){return null},draggingRoute:null};function rc(t){this.map={},this.options=t,this.mapGridSize=100}function Wa(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Cf(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function wf(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function bf(t,e){return t.sourceAnchor?t.sourceAnchor:Cf(t,e).center()}function Tn(t,e,r,i,s){var u=360/r,l=t.theta(function Jh(t,e,r,i){var s=i.step;return new F(t.x+(e.x-t.x)/r.x*s,t.y+(e.y-t.y)/r.y*s)}(t,e,i,s)),f=Zn(l+u/2);return u*Math.floor(f/u)}function xf(t,e){var r=Math.abs(t-e);return r>180?360-r:r}function Mf(t,e){if(!t)return e;var r=Math.abs(t),i=Math.round(r/e);return i?e+(r-i*e)/i:r}function Io(t,e){return t.round(e)}function Gu(t,e,r){return Io(function Qh(t,e){var r=e.source,i=Ta(t.x-r.x,e.x)+r.x,s=Ta(t.y-r.y,e.y)+r.y;return new F(i,s)}(t.clone(),e),r)}function Ya(t){return t.clone().toString()}function nc(t){return new F(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function qh(t,e,r,i,s,u,l){for(var o,f=[],d=nc(s.difference(r)),n=Ya(r),a=t[n];a;){var h=nc((o=e[n]).difference(a));h.equals(d)||(f.unshift(o),d=h),a=t[n=Ya(a)]}var p=e[n];return nc(p.difference(i)).equals(d)||f.unshift(p),f}function Sf(t,e){for(var r=1/0,i=0,s=e.length;i<s;i++){var u=t.manhattanDistance(e[i]);u<r&&(r=u)}return r}function Tf(t,e,r,i,s){var u=s.precision,l=s.directionMap,f=t.difference(e.center()),d=Xe(l)?Object.keys(l):[],n=qt(r),a=d.reduce(function(o,h){if(n.includes(h)){for(var G,p=l[h],A=new F(t.x+p.x*(Math.abs(f.x)+e.width),t.y+p.y*(Math.abs(f.y)+e.height)),T=new It(t,A).intersect(e)||[],P=T.length,m=null,w=0;w<P;w++){var M=T[w],E=t.squaredDistance(M);(void 0===G||E>G)&&(G=E,m=M)}if(m){var j=Gu(m,i,u);e.containsPoint(j)&&(j=Gu(j.offset(p.x*i.x,p.y*i.y),i,u)),o.push(j)}}return o},[]);return e.containsPoint(t)||a.push(Gu(t,i,u)),a}function $h(t,e,r,i){var u,l,s=i.precision;u=Io(t instanceof pt?bf(this,i).clone():t.clone(),s),l=Io(e instanceof pt?function Hh(t,e){return t.targetAnchor?t.targetAnchor:wf(t,e).center()}(this,i).clone():e.clone(),s);var d,n,a,o,f=function Nf(t,e,r){return{source:e.clone(),x:Mf(r.x-e.x,t),y:Mf(r.y-e.y,t)}}(i.step,u,l);if(a=t instanceof pt?Tf(d=u,t,i.startDirections,f,i):[d=u],e instanceof pt?(n=l,o=Tf(l,e,i.endDirections,f,i)):o=[n=l],a=a.filter(function(ce){return!r(ce)}),o=o.filter(function(ce){return!r(ce)}),a.length>0&&o.length>0){for(var h=new Wa,p={},A={},b={},T=0,P=a.length;T<P;T++){var G=a[T],m=Ya(G);h.add(m,Sf(G,o)),p[m]=G,b[m]=0}var E,j,w=i.previousDirectionAngle,M=void 0===w,Y=i.directions;!function Kh(t,e,r){var i=r.step;qt(r.directions).forEach(function(s){s.gridOffsetX=s.offsetX/i*e.x,s.gridOffsetY=s.offsetY/i*e.y})}(0,f,i);for(var B=Y.length,H=qt(o).reduce(function(ce,zt){var At=Ya(zt);return ce.push(At),ce},[]),et=i.maximumLoops;!h.isEmpty()&&et>0;){var le,at=h.pop(),ft=p[at],gt=A[at],ht=b[at],wt=void 0===gt,ee=ft.equals(d);le=wt?M?ee?null:Tn(d,ft,B,f,i):w:Tn(gt,ft,B,f,i);var ze=a.length===o.length;if(ze)for(var kt=0;kt<a.length;kt++)if(!a[kt].equals(o[kt])){ze=!1;break}if((!wt||!ze)&&H.indexOf(at)>=0)return i.previousDirectionAngle=le,qh(A,p,ft,d,n);for(T=0;T<B;T++){var Gt=(E=Y[T]).angle;if(j=xf(le,Gt),M&&ee||!(j>i.maxAllowedDirectionChange)){var Et=Gu(ft.clone().offset(E.gridOffsetX,E.gridOffsetY),f,s),ue=Ya(Et);if(!h.isClose(ue)&&!r(Et)){if(H.indexOf(ue)>=0&&!Et.equals(n)&&xf(Gt,Tn(Et,n,B,f,i))>i.maxAllowedDirectionChange)continue;var Kt=ht+E.cost+(ee?0:i.penalties[j]);(!h.isOpen(ue)||Kt<b[ue])&&(p[ue]=Et,A[ue]=ft,b[ue]=Kt,h.add(ue,Kt+Sf(Et,o)))}}}et--}}return i.fallbackRoute.call(this,d,n,i)}rc.prototype.build=function(t,e){var r=this.options,i=qt(r.excludeEnds).reduce(function(d,n){var a=e.get(n);if(a){var o=t.getCell(a.id);o&&d.push(o)}return d},[]),s=[],u=t.getCell(e.get("source").id);u&&(s=Di(s,u.getAncestors().map(function(d){return d.id})));var l=t.getCell(e.get("target").id);l&&(s=Di(s,l.getAncestors().map(function(d){return d.id})));var f=this.mapGridSize;return t.getElements().reduce(function(d,n){var a=qt(r.excludeTypes).includes(n.get("type")),o=i.find(function(w){return w.id===n.id}),h=s.includes(n.id);if(!(a||o||h))for(var A=n.getBBox().moveAndExpand(r.paddingBox),b=A.origin().snapToGrid(f),T=A.corner().snapToGrid(f),P=b.x;P<=T.x;P+=f)for(var G=b.y;G<=T.y;G+=f){var m=P+"@"+G;d[m]=d[m]||[],d[m].push(A)}return d},this.map),this},rc.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return qt(this.map[e]).every(function(r){return!r.containsPoint(t)})},Wa.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var r=Sn(this.items,t,function(i){return this.values[i]}.bind(this));this.items.splice(r,0,t)},Wa.prototype.remove=function(t){this.hash[t]=this.CLOSE},Wa.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},Wa.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},Wa.prototype.isEmpty=function(){return 0===this.items.length},Wa.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};var ic=function(t,e,r){return function eg(t,e,r){(function tg(t){if(t.directions=ke(t,"directions"),t.penalties=ke(t,"penalties"),t.paddingBox=ke(t,"paddingBox"),t.padding=ke(t,"padding"),t.padding){var e=ga(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}qt(t.directions).forEach(function(r){var i=new F(0,0),s=new F(r.offsetX,r.offsetY);r.angle=Zn(i.theta(s))})})(e),r.options.perpendicular=!!e.perpendicular;var l,i=Cf(r,e),s=wf(r,e),u=bf(r,e);if("function"==typeof e.isPointObstacle)l=e.isPointObstacle;else{var f=new rc(e);f.build(r.paper.model,r.model),l=function(w){return!f.isPointAccessible(w)}}for(var o,h,d=qt(t).map(F),n=[],a=u,p=0,A=d.length;p<=A;p++){var b=null;if(h=o||i,!(o=d[p])&&(o=s,(!r.model.get("source").id||!r.model.get("target").id)&&Ht(e.draggingRoute))){var P=h===i?u:h,G=o.origin();b=e.draggingRoute.call(r,P,G,e)}if(null===(b=b||$h.call(r,h,o,l,e)))return e.fallbackRouter(t,e,r);var m=b[0];m&&m.equals(a)&&b.shift(),a=b[b.length-1]||a,Array.prototype.push.apply(n,b)}return n}(t,Mt({},ec,e),r)},rg={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),r=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:r},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:r},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:r},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:r}]},fallbackRoute:function(t,e,r){var i=t.theta(e),s=[],u={x:e.x,y:t.y},l={x:t.x,y:e.y};if(i%180>90){var f=u;u=l,l=f}var d=i%90<45?u:l,n=new It(t,d),a=90*Math.ceil(i/90),o=F.fromPolar(n.squaredLength(),xn(a+135),d),h=new It(e,o),p=n.intersection(h),A=p||e,T=360/r.directions.length,P=(p?A:t).theta(e),G=Zn(P+T/2),m=T*Math.floor(G/T);return r.previousDirectionAngle=m,A&&s.push(A.round()),s.push(e),s}},Lf={normal:function(t,e,r){return t},oneSide:function(t,e,r){var n,a,o,i=e.side||"bottom",s=ga(e.padding||40),u=r.sourceBBox,l=r.targetBBox,f=u.center(),d=l.center();switch(i){case"bottom":o=1,n="y",a="height";break;case"top":o=-1,n="y",a="height";break;case"left":o=-1,n="x",a="width";break;case"right":o=1,n="x",a="width";break;default:throw new Error("Router: invalid side")}return f[n]+=o*(u[a]/2+s[i]),d[n]+=o*(l[a]/2+s[i]),o*(f[n]-d[n])>0?d[n]=f[n]:f[n]=d[n],[f].concat(t,d)},orthogonal:tc,manhattan:ic,metro:function(t,e,r){if(!Ht(ic))throw new Error("Metro requires the manhattan router.");return ic(t,Mt({},rg,e),r)}},Df=["arc","gap","cubic"],sg=["smooth"],ju=1/3,Bu=2/3;function ac(t,e,r){var i=[].concat(t,r,e);return i.reduce(function(s,u,l){var f=i[l+1];return null!=f&&(s[l]=Da(u,f)),s},[])}function Ef(t,e){return Da(t,e).squaredLength()}function zf(t,e,r,i){var u,s=new xt;return u=xt.createSegment("M",t[0].start),s.appendSegment(u),qt(t).forEach(function(l,f){if(l.isJump){var d,n,a,o;if("arc"===r){d=-90,n=l.start.difference(l.end);var h=Number(n.x<0||0===n.x&&n.y<0);h&&(d+=180);var b,p=l.midpoint(),A=new It(p,l.end).rotate(p,d);a=(b=new It(l.start,p)).pointAt(2/3).rotate(l.start,d),o=A.pointAt(1/3).rotate(A.end,-d),u=xt.createSegment("C",a,o,A.end),s.appendSegment(u),b=new It(p,l.end),a=A.pointAt(1/3).rotate(A.end,d),o=b.pointAt(1/3).rotate(l.end,-d),u=xt.createSegment("C",a,o,l.end),s.appendSegment(u)}else if("gap"===r)u=xt.createSegment("M",l.end),s.appendSegment(u);else if("cubic"===r){d=l.start.theta(l.end);var T=.6*e,P=1.35*e;n=l.start.difference(l.end),(h=Number(n.x<0||0===n.x&&n.y<0))&&(P*=-1),a=F(l.start.x+T,l.start.y+P).rotate(l.start,d),o=F(l.end.x-T,l.end.y+P).rotate(l.end,d),u=xt.createSegment("C",a,o,l.end),s.appendSegment(u)}}else{var G=t[f+1];0==i||!G||G.isJump?(u=xt.createSegment("L",l.end),s.appendSegment(u)):function lg(t,e,r,i,s){var p,u=r.distance(i)/2,l=r.distance(s)/2,f=-Math.min(t,u),d=-Math.min(t,l),n=r.clone().move(i,f).round(),a=r.clone().move(s,d).round(),o=new F(ju*n.x+Bu*r.x,Bu*r.y+ju*n.y),h=new F(ju*a.x+Bu*r.x,Bu*r.y+ju*a.y);p=xt.createSegment("L",n),e.appendSegment(p),p=xt.createSegment("C",o,h,a),e.appendSegment(p)}(i,s,l.end,l.start,G.end)}}),s}var Xn={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},dn={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ts=function(t,e,r,i,s){void 0===r&&(r=[]),void 0===i&&(i={});var u=Boolean(i.raw),l=i.direction;void 0===l&&(l=Xn.AUTO);var f=i.precision;void 0===f&&(f=3);var d={coeff:i.distanceCoefficient||.6,angleTangentCoefficient:i.angleTangentCoefficient||80,tau:i.tension||.5,sourceTangent:i.sourceTangent?new F(i.sourceTangent):null,targetTangent:i.targetTangent?new F(i.targetTangent):null};d.sourceDirection="string"==typeof i.sourceDirection?i.sourceDirection:"number"==typeof i.sourceDirection?new F(1,0).rotate(null,i.sourceDirection):i.sourceDirection?new F(i.sourceDirection).normalize():null,d.targetDirection="string"==typeof i.targetDirection?i.targetDirection:"number"==typeof i.targetDirection?new F(1,0).rotate(null,i.targetDirection):i.targetDirection?new F(i.targetDirection).normalize():null;var a,T,n=[t].concat(r.map(function(H){return new F(H)}),[e]);if(d.sourceTangent)a=d.sourceTangent;else{var o=function Ig(t,e,r,i){if(i.sourceDirection)switch(i.sourceDirection){case dn.UP:return new F(0,-1);case dn.DOWN:return new F(0,1);case dn.LEFT:return new F(-1,0);case dn.RIGHT:return new F(0,1);case dn.AUTO:return Of(t,e);case dn.CLOSEST_POINT:return Gf(0,e);case dn.OUTWARDS:return Bf(t,e);default:return i.sourceDirection}switch(r){case Xn.HORIZONTAL:return function dg(t,e,r){var i=t.sourceBBox;return"left"===(i.width&&i.height?i.sideNearestToPoint(e[0]):i.x>e[1].x?"right":"left")?new F(-1,0):new F(1,0)}(t,e);case Xn.VERTICAL:return function pg(t,e,r){var i=t.sourceBBox;return"top"===(i.width&&i.height?i.sideNearestToPoint(e[0]):i.y>e[1].y?"bottom":"top")?new F(0,-1):new F(0,1)}(t,e);case Xn.CLOSEST_POINT:return Gf(0,e);case Xn.OUTWARDS:return Bf(t,e);default:return Of(t,e)}}(s,n,l,d),h=n[0].distance(n[1])*d.coeff,A=oc(o,n[1].difference(n[0]).normalize());if(A>Math.PI/4){var b=h+(A-Math.PI/4)*d.angleTangentCoefficient;a=o.clone().scale(b,b)}else a=o.clone().scale(h,h)}if(d.targetTangent)T=d.targetTangent;else{var P=function Ag(t,e,r,i){if(i.targetDirection)switch(i.targetDirection){case dn.UP:return new F(0,-1);case dn.DOWN:return new F(0,1);case dn.LEFT:return new F(-1,0);case dn.RIGHT:return new F(0,1);case dn.AUTO:return Rf(t,e);case dn.CLOSEST_POINT:return jf(0,e);case dn.OUTWARDS:return Zf(t,e);default:return i.targetDirection}switch(r){case Xn.HORIZONTAL:return function vg(t,e,r){var i=t.targetBBox;return"left"===(i.width&&i.height?i.sideNearestToPoint(e[e.length-1]):i.x>e[e.length-2].x?"left":"right")?new F(-1,0):new F(1,0)}(t,e);case Xn.VERTICAL:return function mg(t,e,r){var i=t.targetBBox;return"top"===(i.width&&i.height?i.sideNearestToPoint(e[e.length-1]):i.y>e[e.length-2].y?"top":"bottom")?new F(0,-1):new F(0,1)}(t,e);case Xn.CLOSEST_POINT:return jf(0,e);case Xn.OUTWARDS:return Zf(t,e);default:return Rf(t,e)}}(s,n,l,d),G=n.length-1,m=n[G-1].distance(n[G])*d.coeff,M=oc(P,n[G-1].difference(n[G]).normalize());if(M>Math.PI/4){var E=m+(M-Math.PI/4)*d.angleTangentCoefficient;T=P.clone().scale(E,E)}else T=P.clone().scale(m,m)}var j=function Cg(t,e,r,i){for(var s=i.tau,u=i.coeff,l=[],f=[],d=[],n=t.length-1,a=0;a<n;a++)l[a]=t[a].distance(t[a+1]);f[0]=e,f[n]=r;for(var o=1;o<n;o++){var h=void 0,p=void 0;h=1===o?t[o-1].clone().offset(f[o-1].x,f[o-1].y):t[o-1].clone(),p=o===n-1?t[o+1].clone().offset(f[o+1].x,f[o+1].y):t[o+1].clone();var w,A=h.difference(t[o]).normalize(),b=p.difference(t[o]).normalize(),T=oc(A,b),P=(Math.PI-T)/2,G=void 0,m=_f(A,b);w=_f(t[o].difference(t[o+1]),t[o].difference(t[o-1])),m<0&&(P=-P),T<Math.PI/2&&(P<0&&w<0||P>0&&w>0)&&(P-=Math.PI),yg(G=b.clone(),P);var M=G.clone(),E=G.clone(),j=l[o-1]*u,Y=l[o]*u;M.scale(j,j),E.scale(Y,Y),f[o]=[M,E]}for(var B=0;B<n;B++){var H,et;H=0===B?t[B+1].difference(f[B].x/s,f[B].y/s):t[B+1].difference(f[B][1].x/s,f[B][1].y/s),et=B===n-1?t[B].clone().offset(f[B+1].x/s,f[B+1].y/s):t[B].difference(f[B+1][0].x/s,f[B+1][0].y/s),d[B]=[H,t[B],t[B+1],et]}return d}(n,a,T,d),Y=j.map(function(H){return function Wf(t,e){var r=e.tau,i=new F;i.x=t[1].x+(t[2].x-t[0].x)/(6*r),i.y=t[1].y+(t[2].y-t[0].y)/(6*r);var s=new F;return s.x=t[2].x+(t[3].x-t[1].x)/(6*r),s.y=t[2].y+(t[3].y-t[1].y)/(6*r),new me(t[1],i,s,t[2])}(H,d)}),B=new xt(Y).round(f);return u?B:B.serialize()};function Of(t,e,r){var i=t.sourceBBox;switch(i.sideNearestToPoint(i.width&&i.height?e[0]:e[1])){case"top":return new F(0,-1);case"bottom":return new F(0,1);case"right":return new F(1,0);case"left":return new F(-1,0)}}function Rf(t,e,r){var i=t.targetBBox;switch(i.sideNearestToPoint(i.width&&i.height?e[e.length-1]:e[e.length-2])){case"top":return new F(0,-1);case"bottom":return new F(0,1);case"right":return new F(1,0);case"left":return new F(-1,0)}}function Gf(t,e,r){return e[1].difference(e[0]).normalize()}function jf(t,e,r){var i=e.length-1;return e[i-1].difference(e[i]).normalize()}function Bf(t,e,r){var s=t.sourceBBox.center();return e[0].difference(s).normalize()}function Zf(t,e,r){var s=t.targetBBox.center();return e[e.length-1].difference(s).normalize()}function yg(t,e){var r=Math.cos(e),i=Math.sin(e),u=i*t.x+r*t.y;t.x=r*t.x-i*t.y,t.y=u}function oc(t,e){var r=t.dot(e)/(t.magnitude()*e.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function _f(t,e){return t.x*e.y-t.y*e.x}Ts.Directions=Xn,Ts.TangentDirections=dn;var uc={jumpover:function(t,e,r,i){!function og(t){var e=t.paper,r=e._jumpOverUpdateList;if(null==r){r=e._jumpOverUpdateList=[];var i=e.model;i.on("batch:stop",function(){this.hasActiveBatch()||function sc(t){for(var e=t._jumpOverUpdateList,r=0;r<e.length;r++){var i=e[r],s=i.getFlag(i.constructor.Flags.CONNECTOR);i.requestUpdate(s)}}(e)}),i.on("reset",function(){r=e._jumpOverUpdateList=[]})}r.indexOf(t)<0&&(r.push(t),t.listenToOnce(t.model,"change:connector remove",function(){r.splice(r.indexOf(t),1)}))}(this);var s=i.raw,u=i.size||5,l=i.jump&&(""+i.jump).toLowerCase(),f=i.radius||0,d=i.ignoreConnectors||sg;-1===Df.indexOf(l)&&(l=Df[0]);var n=this.paper,o=n.model.getLinks();if(1===o.length)return zf(ac(t,e,r),u,l,f);var h=this.model,p=o.indexOf(h),A=n.options.defaultConnector||{},b=o.filter(function(M,E){var j=M.get("connector")||A;return!(qt(d).includes(j.name)||E>p&&"jumpover"===j.name)}),T=b.map(function(M){return n.findViewByModel(M)}),P=ac(t,e,r),G=T.map(function(M){return null==M?[]:M===this?P:ac(M.sourcePoint,M.targetPoint,M.route)},this),m=P.reduce(function(M,E){var j=b.reduce(function(Y,B,H){if(B!==h){var et=function kf(t,e){return qt(e).reduce(function(r,i){var s=t.intersection(i);return s&&r.push(s),r},[])}(E,G[H]);Y.push.apply(Y,et)}return Y},[]).sort(function(Y,B){return Ef(E.start,Y)-Ef(E.start,B)});return j.length>0?M.push.apply(M,function ug(t,e,r){return e.reduce(function(i,s,u){if(!0===s.skip)return i;var l=i.pop()||t,f=ua(s).move(l.start,-r),d=ua(s).move(l.start,+r),n=e[u+1];if(null!=n){var a=d.distance(n);a<=r&&(d=n.move(l.start,a),n.skip=!0)}else if(f.distance(l.end)<2*r+1)return i.push(l),i;if(d.distance(l.start)<2*r+1)return i.push(l),i;var p=Da(f,d);return p.isJump=!0,i.push(Da(l.start,f),p,Da(d,l.end)),i},[])}(E,j,u)):M.push(E),M},[]),w=zf(m,u,l,f);return s?w:w.serialize()},normal:function(t,e,r,i){var s=i&&i.raw,u=[t].concat(r).concat([e]),l=new Pe(u),f=new xt(l);return s?f:f.serialize()},rounded:function(t,e,r,i){i||(i={});var f,s=i.radius||10,u=i.raw,l=new xt;f=xt.createSegment("M",t),l.appendSegment(f);for(var a,o,h,p,A,b,T,P,G,m,w,d=1/3,n=2/3,M=0,E=r.length;M<E;M++)a=new F(r[M]),o=r[M-1]||t,h=r[M+1]||e,p=A||a.distance(o)/2,A=a.distance(h)/2,b=-Math.min(s,p),T=-Math.min(s,A),P=a.clone().move(o,b).round(),G=a.clone().move(h,T).round(),m=new F(d*P.x+n*a.x,n*a.y+d*P.y),w=new F(d*G.x+n*a.x,n*a.y+d*G.y),f=xt.createSegment("L",P),l.appendSegment(f),f=xt.createSegment("C",m,w,G),l.appendSegment(f);return f=xt.createSegment("L",e),l.appendSegment(f),u?l:l.serialize()},smooth:function(t,e,r,i){var u,s=i&&i.raw;if(r&&0!==r.length){var l=[t].concat(r).concat([e]),f=me.throughPoints(l);u=new xt(f)}else{var d;if(u=new xt,d=xt.createSegment("M",t),u.appendSegment(d),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var n=(t.x+e.x)/2;d=xt.createSegment("C",n,t.y,n,e.y,e.x,e.y),u.appendSegment(d)}else{var a=(t.y+e.y)/2;d=xt.createSegment("C",t.x,a,e.x,a,e.x,e.y),u.appendSegment(d)}}return s?u:u.serialize()},curve:Ts},Yt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Ls=ne.extend({className:function(){var t=ne.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){ne.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Yt.RENDER],attrs:[Yt.UPDATE],router:[Yt.UPDATE],connector:[Yt.CONNECTOR],smooth:[Yt.UPDATE],manhattan:[Yt.UPDATE],toolMarkup:[Yt.LEGACY_TOOLS],labels:[Yt.LABELS],labelMarkup:[Yt.LABELS],vertices:[Yt.VERTICES,Yt.UPDATE],vertexMarkup:[Yt.VERTICES],source:[Yt.SOURCE,Yt.UPDATE],target:[Yt.TARGET,Yt.UPDATE]},initFlag:[Yt.RENDER,Yt.SOURCE,Yt.TARGET,Yt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Yt.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Yt.SOURCE)}if(this.hasFlag(t,Yt.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Yt.TARGET)}var r=this,i=r.paper,s=r.sourceView,u=r.targetView;if(i&&(s&&!i.isViewMounted(s)||u&&!i.isViewMounted(u)))return t;if(this.hasFlag(t,Yt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),this.removeFlag(t,[Yt.RENDER,Yt.UPDATE,Yt.VERTICES,Yt.LABELS,Yt.TOOLS,Yt.LEGACY_TOOLS,Yt.CONNECTOR]);var l=!1;this.hasFlag(t,Yt.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Yt.VERTICES));var d=this.model,n=d.attributes,a=this.hasFlag(t,Yt.LABELS),o=this.hasFlag(t,Yt.LEGACY_TOOLS);a&&(this.onLabelsChange(d,n.labels,e),t=this.removeFlag(t,Yt.LABELS),l=!0),o&&(this.renderTools(),t=this.removeFlag(t,Yt.LEGACY_TOOLS));var h=this.hasFlag(t,Yt.UPDATE),p=this.hasFlag(t,Yt.CONNECTOR);return(h||p)&&(h?e.translateBy&&d.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[Yt.UPDATE,Yt.TOOLS,Yt.CONNECTOR]),a=!1,o=!1,l=!0),a&&this.updateLabelPositions(),o&&this.updateToolsPosition(),l&&this.updateHighlighters(),this.hasFlag(t,Yt.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Yt.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Yt.UPDATE),t)},isLabelsRenderRequired:function(t){void 0===t&&(t={});var e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var r=t.propertyPathArray||[],i=r.length;if(i>1&&e[r[1]]){if(2===i)return"markup"in Object(t.propertyValue);if("markup"!==r[2])return!1}}return!0},onLabelsChange:function(t,e,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=it(t);Array.isArray(e)||(e=[e]);for(var r=this._V,i=0,s=e.length;i<s;i++){var u=e[i],l=u.attr("class");l&&(l=Qc(l),r[Wt.camelCase(l)]=u)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=it(t),r=document.createDocumentFragment();if(Array.isArray(e))for(var i=0,s=e.length;i<s;i++)r.appendChild(e[i].node);else r.appendChild(e.node);return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var r,i=e.childNodes;return(r=i.length>1||"G"!==i[0].nodeName.toUpperCase()?it("g").append(e):it(i[0])).addClass("label"),{node:r.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,r=this._labelCache={},i=this._labelSelectors={},s=this.model,u=s.attributes.labels||[],l=u.length;if(0===l)return e&&e.remove(),this;e?e.empty():(e=t.labels=it("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(ti(ke(this,"className"))),e.attr("model-id",s.id)));for(var f=0;f<l;f++){var a,o,n=this._normalizeLabelMarkup(this._getLabelMarkup(u[f].markup));if(n)a=n.node,o=n.selectors;else{var p=this._normalizeLabelMarkup(this._getLabelMarkup(s._builtins.defaultLabel.markup)),A=s._getDefaultLabel(),T=this._normalizeLabelMarkup(this._getLabelMarkup(A.markup))||p;a=T.node,o=T.selectors}a.setAttribute("label-idx",f),e.append(a),r[f]=a;var P=this.selector;if(o[P])throw new Error("dia.LinkView: ambiguous label root selector.");o[P]=a,i[f]=o}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){var t=this,e=t.el,r=t.paper,i=t.model,u=t.options,l=t._V.labels;if(l&&i.hasLabels()){var f=l.node;u.labelsLayer?r.getLayerView(u.labelsLayer).insertSortedNode(f,i.get("z")):f.parentNode!==e&&e.appendChild(f)}},unmountLabels:function(){var r=this._V;if(r){var i=r.labels;i&&this.options.labelsLayer&&i.remove()}},onMount:function(){this.mountLabels()},unmount:function(){ne.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(t,e){var r=this._labelCache[t];if(!r)return null;var u=this.findBySelector(e,r,this._labelSelectors[t])[0];return void 0===u&&(u=null),u},_mergeLabelAttrs:function(t,e,r,i){return null===e?null:void 0===e?null===r?null:void 0===r?t?void 0:i:t?r:dr({},i,r):t?dr({},r,e):dr({},i,r,e)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],r=this.can("labelMove"),s=t._builtins.defaultLabel.attrs,u=t._getDefaultLabel(),l=u.markup,f=u.attrs,d=0,n=e.length;d<n;d++){var a=this._labelCache[d];a.setAttribute("cursor",r?"move":"default");var o=this._labelSelectors[d],h=e[d],b=this._mergeLabelAttrs(h.markup||l,h.attrs,f,s);this.updateDOMSubtreeAttributes(a,b,{rootBBox:new pt(h.size),selectors:o})}return this},renderTools:function(){if(!this._V.linkTools)return this;var i,t=Wt(this._V.linkTools.node).empty(),e=Dr(this.model.get("toolMarkup")||this.model.toolMarkup),r=it(e());return t.append(r.node),this._toolCache=r,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=Dr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),i=it(e())):i=r.clone(),t.append(i.node),this._tool2Cache=i),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=Wt(this._V.markerVertices.node).empty(),e=Dr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,i){t.append(it(e(Mt({idx:i},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=Wt(this._V.markerArrowheads.node);t.empty();var e=Dr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=it(e({end:"source"})),this._V.targetArrowhead=it(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){var r=this.model,i=r.vertices(),s=[this.sourceAnchor].concat(i,[this.targetAnchor]),u=s.length,l=new Pe(s);l.simplify({threshold:.001});var f=l.points.map(function(n){return n.toJSON()}),d=f.length;return u===d?0:(r.vertices(f.slice(1,d-1),t),u-d)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new F(this.sourceAnchor);case"target":return new F(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new F(this.sourcePoint);case"target":return new F(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=this.route,s=this.path;if(i&&s){var u=new Pe(i);u.translate(t,e),this.route=u.points,this._translateConnectionPoints(t,e),s.translate(t,e),this.updateDOM()}},updateDOM:function(){var e=this,r=e.el,i=e.model,s=e.selectors;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(r,i.attr(),{selectors:s}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){var r=this.model.vertices(),i=this.findAnchors(r),s=this.sourceAnchor=i.source,u=this.targetAnchor=i.target,l=this.findRoute(r);this.route=l;var f=this.findConnectionPoints(l,s,u);this.sourcePoint=f.source,this.targetPoint=f.target},updatePath:function(){var t=this,e=t.route,r=t.sourcePoint,i=t.targetPoint,s=this.findMarkerPoints(e,r,i),u=this.findPath(e,s.source||r,s.target||i);this.path=u},findMarkerPoints:function(t,e,r){var l,f,i=t[0],s=t[t.length-1],u=this._markerCache;return this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.getBBox(),l=F(e).move(i||r,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.getBBox(),f=F(r).move(s||e,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=l||e.clone(),u.targetPoint=f||r.clone(),{source:l,target:f}},findAnchorsOrdered:function(t,e,r,i){var s,u,l,f,d=this.model,n=d.get(t),a=d.get(r),o=this.getEndView(t),h=this.getEndView(r),p=this.getEndMagnet(t),A=this.getEndMagnet(r);o?(l=e?new F(e):h?A:new F(a),s=this.getAnchor(n.anchor,o,p,l,t)):s=new F(n),h?(f=new F(i||s),u=this.getAnchor(a.anchor,h,A,f,r)):u=new F(a);var b={};return b[t]=s,b[r]=u,b},findAnchors:function(t){var e=this.model,r=t[0],i=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",i,"source",r):this.findAnchorsOrdered("source",r,"target",i)},findConnectionPoints:function(t,e,r){var o,h,p,P,i=t[0],s=t[t.length-1],u=this.model,l=u.get("source"),f=u.get("target"),d=this.sourceView,n=this.targetView,a=this.paper.options;if(d&&!d.isNodeConnection(this.sourceMagnet)){o=this.sourceMagnet||d.el;var A=l.connectionPoint||a.defaultConnectionPoint,T=new It(i||r,e);p=this.getConnectionPoint(A,d,o,T,"source")}else p=e;if(n&&!n.isNodeConnection(this.targetMagnet)){h=this.targetMagnet||n.el;var G=f.connectionPoint||a.defaultConnectionPoint,w=new It(s||e,r);P=this.getConnectionPoint(G,n,h,w,"target")}else P=r;return{source:p,target:P}},getAnchor:function(t,e,r,i,s){var f,u=e.isNodeConnection(r),l=this.paper.options;if(t||(t=u?l.defaultLinkAnchor:l.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:l.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)f=t;else{var d=t.name;if("function"!=typeof(f=l[u?"linkAnchorNamespace":"anchorNamespace"][d]))throw new Error("Unknown anchor: "+d)}var a=f.call(this,e,r,i,t.args||{},s,this);return a?a.round(this.decimalsRounding):new F},getConnectionPoint:function(t,e,r,i,s){var u,n,l=i.end,f=this.paper.options;if("function"==typeof f.linkConnectionPoint&&(u=f.linkConnectionPoint(this,e,r===e.el?void 0:r,i.start,s)))return u;if(!t)return l;if("function"==typeof t)n=t;else{var a=t.name;if("function"!=typeof(n=f.connectionPointNamespace[a]))throw new Error("Unknown connection point: "+a)}return(u=n.call(this,i,e,r,t.args||{},s,this))?u.round(this.decimalsRounding):l},_translateConnectionPoints:function(t,e){var r=this._markerCache;r.sourcePoint.offset(t,e),r.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var e=this.model,r=e.get("labels")||[];if(!r.length)return this;for(var s=e._builtins.defaultLabel.position,u=e._getDefaultLabel(),l=this._normalizeLabelPosition(u.position),f=dr({},s,l),d=0,n=r.length;d<n;d++){var a=this._labelCache[d];if(a){var h=this._normalizeLabelPosition(r[d].position),p=dr({},f,h),A=this._getLabelTransformationMatrix(p);a.setAttribute("transform",it.matrixToTransformString(A)),this._cleanLabelMatrices(d)}}return this},_cleanLabelMatrices:function(t){var r=this.metrics,s=this._labelSelectors[t];if(s)for(var u in s){var f=s[u].id;f&&f in r&&delete r[f].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var i=this.getPointAtLength(e);this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+t),this.options.doubleLinkTools&&r>=this.options.longLinkLength?(i=this.getPointAtLength(r-(this.options.doubleLinkToolsOffset||e)),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+t),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===Wt.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){var i=this.paper,s=t+"View",u=this.model.get(t),l=u&&u.id;if(!l)return this[s]=null,this.updateEndMagnet(t),!0;var f=i.getModelById(l);if(!f)throw new Error("LinkView: invalid "+t+" cell.");var d=f.findView(i);return!!d&&(this[s]=d,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){var e=t+"Magnet",r=this.getEndView(t);if(r){var i=r.getMagnetFromLinkEnd(this.model.get(t));i===r.el&&(i=null),this[e]=i}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var r=qt(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:dr({},e,t)},addLabel:function(t,e,r,i){var s,u,f,l=0;"number"!=typeof t?(s=t.x,u=t.y,"number"==typeof e?(l=e,f=r):f=e):(s=t,u=e,"number"==typeof r?(l=r,f=i):f=r);var d=this._getDefaultLabelPositionArgs(),a=this._mergeLabelPositionArgs(f,d),o={position:this.getLabelPosition(s,u,l,a)};return this.model.insertLabel(-1,o,f),-1},addVertex:function(t,e,r){var i="number"!=typeof t,s=i?t.x:t,u=i?t.y:e,l=i?e:r,f={x:s,y:u},d=this.getVertexIndex(s,u);return this.model.insertVertex(d,f,l),d},sendToken:function(t,e,r){var s,u,l;Xe(e)?(s=e.duration,u="reverse"===e.direction,l=e.connection):(s=e,u=!1,l=null);var f={dur:(s=s||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};u&&(f.keyPoints="1;0",f.keyTimes="0;1");var n,d=it(t);if("string"==typeof l)n=this.findBySelector(l,this.el,this.selectors)[0];else{var a=this._V;n=a.connection?a.connection.node:this.el.querySelector("path")}if(!(n instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");d.appendTo(this.paper.cells).animateAlongPath(f,n),setTimeout(function i(o,h){return function(){o.remove(),"function"==typeof h&&h()}}(d,r),s)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||Lf,r=this.model.router(),i=this.paper.options.defaultRouter;if(!r){if(!i)return t.map(F);r=i}var s=Ht(r)?r:e[r.name];if(!Ht(s))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');return s.call(this,t,r.args||{},this)||t.map(F)},findPath:function(t,e,r){var i=this.paper.options.connectorNamespace||uc,s=this.model.connector();s||(s=this.paper.options.defaultConnector||{});var l=Ht(s)?s:i[s.name];if(!Ht(l))throw new Error('dia.LinkView: unknown connector: "'+s.name+'".');var f=en(s.args||{});f.raw=!0;var d=l.call(this,e,r,t,f,this);return"string"==typeof d&&(d=new xt(it.normalizePathData(d))),d},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var r=t.serialize();return e.data=r,r},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var r=t.getSegmentSubdivisions();return e.segmentSubdivisions=r,r},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var r=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=r,r},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Vr(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,r,i){var l,s={},u=0;"number"==typeof r?(u=r,l=i):l=r,l&&(s.args=l);var b,T,f=!(l&&l.absoluteDistance),d=l&&l.absoluteDistance&&l.reverseDistance,n=l&&l.absoluteOffset,a=this.path,o={segmentSubdivisions:this.getConnectionSubdivisions()},h=new F(t,e),p=a.closestPointT(h,o),A=a.lengthAtT(p,o);if(f&&(A=A/this.getConnectionLength()||0),d&&(A=-1*(this.getConnectionLength()-A)||1),s.distance=A,n||(b=a.tangentAtT(p)),b)T=b.pointOffset(h);else{var P=a.pointAtT(p),G=h.difference(P);T={x:G.x,y:G.y}}return s.offset=T,s.angle=u,s},_getLabelTransformationMatrix:function(t){var e,r=0,i={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");i=t.args||{},e=t.distance,r=t.angle||0}var s=e>0&&e<=1,u=0,l={x:0,y:0};if(t.offset){var f=t.offset;"number"==typeof f&&(u=f),f.x&&(l.x=f.x),f.y&&(l.y=f.y)}var b,d=0!==l.x||0!==l.y||0===u,n=i.keepGradient,a=i.ensureLegibility,o=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},p=s?e*this.getConnectionLength():e,A=o.tangentAtLength(p,h),T=r;if(A){if(d)(b=A.start).offset(l);else{var P=A.clone();P.rotate(A.start,-90),P.setLength(u),b=P.end}n&&(T=A.angle()+r,a&&(T=Zn((T+90)%180-90)))}else b=o.start,d&&b.offset(l);return it.createSVGMatrix().translate(b.x,b.y).rotate(T)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new F(e.e,e.f)},getVertexIndex:function(t,e){for(var i=this.model.vertices(),s=this.getClosestPointLength(new F(t,e)),u=0,l=i.length;u<l&&!(s<this.getClosestPointLength(i[u]));u++);return u},notifyPointerdown:function(e,r,i){ne.prototype.pointerdown.call(this,e,r,i),this.notify("link:pointerdown",e,r,i)},notifyPointermove:function(e,r,i){ne.prototype.pointermove.call(this,e,r,i),this.notify("link:pointermove",e,r,i)},notifyPointerup:function(e,r,i){this.notify("link:pointerup",e,r,i),ne.prototype.pointerup.call(this,e,r,i)},pointerdblclick:function(t,e,r){ne.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){ne.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,r)},contextmenu:function(t,e,r){ne.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,r)},pointerdown:function(t,e,r){switch(this.notifyPointerdown(t,e,r),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,r);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,r);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,r);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,r);case"marker-source":case"marker-target":return}this.dragStart(t,e,r)},pointermove:function(t,e,r){var i=this._dragData;switch(i&&this.eventData(t,i),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,r);break;case"label-move":this.dragLabel(t,e,r);break;case"arrowhead-move":this.dragArrowhead(t,e,r);break;case"move":this.drag(t,e,r)}i&&Mt(i,this.eventData(t)),this.notifyPointermove(t,e,r)},pointerup:function(t,e,r){var i=this._dragData;switch(i&&(this.eventData(t,i),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,r);break;case"label-move":this.dragLabelEnd(t,e,r);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,r);break;case"move":this.dragEnd(t,e,r)}this.notifyPointerup(t,e,r),this.checkMouseleave(t)},mouseover:function(t){ne.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){ne.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){ne.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){ne.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,r,i){ne.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,r,i)},onevent:function(t,e,r,i){var s=it(t.target).findParentByClass("link-tool",this.el);if(s){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,r,i)}this.notifyPointerdown(t,r,i),this.paper.delegateDragEvents(this,t.data)}else ne.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,r){this.notifyPointerdown(t,e,r),this.dragLabelStart(t,e,r),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,r){if(this.can("vertexAdd")){var i=this.addVertex({x:e,y:r},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragLabelStart:function(t,e,r){if(this.can("labelMove")){var s=parseInt(t.currentTarget.getAttribute("label-idx"),10),u=this._getLabelPositionAngle(s),l=this._getLabelPositionArgs(s),f=this._getDefaultLabelPositionArgs(),d=this._mergeLabelPositionArgs(l,f);this.eventData(t,{action:"label-move",labelIdx:s,positionAngle:u,positionArgs:d,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,r){if(this.can("vertexMove")){var s=parseInt(t.target.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:s})}},dragVertexRemoveStart:function(t,e,r){if(this.can("vertexRemove")){var s=parseInt(t.target.getAttribute("idx"),10);this.model.removeVertex(s)}},dragArrowheadStart:function(t,e,r){if(this.can("arrowheadMove")){var s=t.target.getAttribute("end"),u=this.startArrowheadMove(s,{ignoreBackwardsCompatibility:!0});this.eventData(t,u)}},dragStart:function(t,e,r){!this.can("linkMove")||this.eventData(t,{action:"move",dx:e,dy:r})},dragLabel:function(t,e,r){var i=this.eventData(t),s={position:this.getLabelPosition(e,r,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete s.position.offset,this.model.label(i.labelIdx,s)},dragVertex:function(t,e,r){var i=this.eventData(t);this.model.vertex(i.vertexIdx,{x:e,y:r},{ui:!0})},dragArrowhead:function(t,e,r){this.paper.options.snapLinks?this._snapArrowhead(t,e,r):this._connectArrowhead(this.getEventTarget(t),e,r,this.eventData(t))},drag:function(t,e,r){var i=this.eventData(t);this.model.translate(e-i.dx,r-i.dy,{ui:!0}),this.eventData(t,{dx:e,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,r){var i=this.eventData(t),s=this.paper;s.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,e,r),s.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,t)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var r=t.arrowhead,i=t.initialEnd,s=this.model.prop(r);if(s&&!wr.endsEqual(i,s)){var l=this.paper;i.id&&this.notify("link:disconnect",e,l.findViewByModel(i.id),t.initialMagnet,r),s.id&&this.notify("link:connect",e,l.findViewByModel(s.id),t.magnetUnderPointer,r)}},_snapArrowhead:function(t,e,r){var s=this.paper,u=s.options,l=u.snapLinks,f=u.connectionStrategy,d=this.eventData(t),n=l.radius||50,a=s.findViewsInArea({x:e-n,y:r-n,width:2*n,height:2*n}),o=d.closestView||null,h=d.closestMagnet||null,p=d.magnetProxy||null;d.closestView=d.closestMagnet=d.magnetProxy=null;var A=Number.MAX_VALUE,b=new F(e,r);a.forEach(function(B){var H=[];"false"!==B.el.getAttribute("magnet")&&H.push({bbox:B.model.getBBox(),magnet:B.el}),B.$("[magnet]").toArray().forEach(function(et){H.push({bbox:B.getNodeBBox(et),magnet:et})}),H.forEach(function(et){var at=et.magnet,gt=et.bbox.center().squaredDistance(b);gt<A&&(h===at||s.options.validateConnection.apply(s,d.validateConnectionArgs(B,B.el===at?null:at)))&&(A=gt,d.closestView=B,d.closestMagnet=at)})},this);var T,P=null,G=d.closestView,m=d.closestMagnet;m&&(P=d.magnetProxy=G.findProxyNode(m,"highlighter"));var w=d.arrowhead,M=h!==m;if(o&&M&&o.unhighlight(p,{connecting:!0,snapping:!0}),G){var E=d.prevEnd,j=d.prevX,Y=d.prevY;if(d.prevX=e,d.prevY=r,!M&&("function"!=typeof f||j===e&&Y===r)||(T=G.getLinkEnd(m,e,r,this.model,w),!M&&bs(E,T)))return;d.prevEnd=T,M&&G.highlight(P,{connecting:!0,snapping:!0})}else T={x:e,y:r};this.model.set(w,T||{x:e,y:r},{ui:!0}),o&&this.notify("link:snap:disconnect",t,o,h,w),G&&this.notify("link:snap:connect",t,G,m,w)},_snapArrowheadEnd:function(t){var e=t.closestView,r=t.closestMagnet;e&&r&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(r)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,r,i){var u=this.paper,l=this.model;if(i.eventTarget!==t){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});var f=i.viewUnderPointer=u.findView(t);if(f){var d=i.magnetUnderPointer=f.findMagnet(t),n=i.magnetProxy=f.findProxyNode(d,"highlighter");d&&this.paper.options.validateConnection.apply(u,i.validateConnectionArgs(f,d))?n&&f.highlight(n,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=t,l.set(i.arrowhead,{x:e,y:r},{ui:!0})},_connectArrowheadEnd:function(t,e,r){void 0===t&&(t={});var s=this.model,u=t.viewUnderPointer,l=t.magnetUnderPointer,f=t.magnetProxy,d=t.arrowhead;if(l&&f&&u){u.unhighlight(f,{connecting:!0});var n=u.getLinkEnd(l,e,r,s,d);s.set(d,n,{ui:!0})}},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var r,i=0,s=0;"source"===t?(i=2,r="target"):(s=2,r="source");var u=this.model.get(r);if(u.id){var l=e[i]=this.paper.findViewByModel(u.id),f=l.getMagnetFromLinkEnd(u);f===l.el&&(f=void 0),e[i+1]=f}return function d(n,a){return e[s]=n,e[s+1]=n.el===a?void 0:a,e}},_markAvailableMagnets:function(t){function e(o,h){var p=o.paper;return p.options.validateConnection.apply(p,this.validateConnectionArgs(o,h))}var r=this.paper,i=r.model.getCells();t.marked={};for(var s=0,u=i.length;s<u;s++){var l=i[s].findView(r);if(l){var f=Array.prototype.slice.call(l.el.querySelectorAll("[magnet]"));"false"!==l.el.getAttribute("magnet")&&f.push(l.el);var d=f.filter(e.bind(t,l));if(d.length>0){for(var n=0,a=d.length;n<a;n++)l.highlight(d[n],{magnetAvailability:!0});l.highlight(null,{elementAvailability:!0}),t.marked[l.model.id]=d}}}},_unmarkAvailableMagnets:function(t){for(var r,i,e=Object.keys(t.marked),s=0,u=e.length;s<u;s++){i=t.marked[r=e[s]];var l=this.paper.findViewByModel(r);if(l){for(var f=0,d=i.length;f<d;f++)l.unhighlight(i[f],{magnetAvailability:!0});l.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var r={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:en(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(r),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=r),r},onRemove:function(){ne.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Yt});Object.defineProperty(Ls.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new pt(e.x,e.y)}var r=this.sourceMagnet;return t.isNodeConnection(r)?new pt(this.sourceAnchor):t.getNodeBBox(r||t.el)}}),Object.defineProperty(Ls.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new pt(e.x,e.y)}var r=this.targetMagnet;return t.isNodeConnection(r)?new pt(this.targetAnchor):t.getNodeBBox(r||t.el)}});var wg=Ei.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData:function(e,r){var l,s=this.options,u=s.useFirstSubpath;try{var f=it(r);if(l=f.convertToPathData().trim(),"PATH"===f.tagName()&&u){var d=l.search(/.M/i)+1;d>0&&(l=l.substr(0,d))}}catch(a){var n=e.getNodeBoundingRect(r);l=it.rectToPath(Mt({},s,n.toJSON()))}return l},highlightConnection:function(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode:function(e,r){var s=this.vel,u=this.options,l=u.padding,f=u.layer,d=e.getNodeMatrix(r);if(l){!f&&r===e.el&&s.remove();var n=e.getNodeBoundingRect(r),a=n.x+n.width/2,o=n.y+n.height/2;n=it.transformRect(n,d);var h=Math.max(n.width,1),p=Math.max(n.height,1),A=(h+l)/h,b=(p+l)/p,T=it.createSVGMatrix({a:A,b:0,c:0,d:b,e:a-A*a,f:o-b*o});d=d.multiply(T)}s.attr({d:this.getPathData(e,r),transform:it.matrixToTransformString(d)})},highlight:function(e,r){this.vel.attr(this.options.attrs),e.isNodeConnection(r)?this.highlightConnection(e):this.highlightNode(e,r)}}),bg=Ei.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:20,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild:function(e,r){var i=this,s=i.MASK_CHILD_ATTRIBUTE_BLACKLIST,u=i.MASK_REPLACE_TAGS,l=i.MASK_REMOVE_TAGS,f=r.tagName();if(!it.isSVGGraphicsElement(r)||l.includes(f))return r.remove(),!1;if(u.includes(f)){var d=e.vel.findOne("#"+r.id);if(d){var n=d.node,a=e.getNodeBoundingRect(n);e.model.isElement()&&(a=it.transformRect(a,e.getNodeMatrix(n)));var o=it("rect",a.toJSON()),h=a.center(),p=h.x,A=h.y,b=d.rotate(),T=b.angle,P=b.cx;void 0===P&&(P=p);var G=b.cy;void 0===G&&(G=A),T&&o.rotate(T,P,G),r.parent().append(o)}return r.remove(),!1}return s.forEach(function(m){"fill"===m&&"none"===r.attr("fill")||r.removeAttr(m)}),!0},transformMaskRoot:function(e,r){this.MASK_ROOT_ATTRIBUTE_BLACKLIST.forEach(function(u){r.removeAttr(u)})},getMaskShape:function(e,r){var n,i=this,l=this.MASK_REPLACE_TAGS,f=this.options.deep,d=r.tagName();if("G"===d){if(!f)return null;!function Zu(t,e){for(var r=t.children();r.length>0;){var i=r.shift();e(i)&&r.push.apply(r,i.children())}}(n=r.clone(),function(a){return i.transformMaskChild(e,a)})}else{if(l.includes(d))return null;n=r.clone()}return this.transformMaskRoot(e,n),n},getMaskId:function(){return"highlight-mask-"+this.cid},getMask:function(e,r){var i=this,s=i.VISIBLE,u=i.INVISIBLE,l=i.options,f=l.padding,d=l.attrs,n="stroke-width"in d?d["stroke-width"]:1,a="none"!==r.attr("fill"),o=parseFloat(r.attr("stroke-width"));isNaN(o)&&(o=1);var h=o+2*f,p=h+2*n,A=this.getMaskShape(e,r);if(!A){var b=e.getNodeBoundingRect(r.node);b.inflate(b.width?0:.5,b.height?0:.5),A=it("rect",b.toJSON())}return A.attr(d),it("mask",{id:this.getMaskId()}).append([A.clone().attr({fill:a?s:"none",stroke:s,"stroke-width":p}),A.clone().attr({fill:a?u:"none",stroke:u,"stroke-width":h})])},removeMask:function(e){var r=e.svg.getElementById(this.getMaskId());r&&e.defs.removeChild(r)},addMask:function(e,r){e.defs.appendChild(r.node)},highlight:function(e,r){var s=this.options,u=this.vel,l=s.padding,f=s.attrs,d=s.maskClip;void 0===d&&(d=20);var a="stroke"in f?f.stroke:"#000000";!s.layer&&r===e.el&&u.remove();var o=e.getNodeBoundingRect(r).inflate(l+d),h=this.getMask(e,it(r));this.addMask(e.paper,h),u.attr(o.toJSON()),u.attr({transform:it.matrixToTransformString(e.getNodeMatrix(r)),mask:"url(#"+h.id+")",fill:a})},unhighlight:function(e){this.removeMask(e.paper)}}),xg=Ei.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:ti("highlight-opacity"),highlight:function(t,e){it(e).addClass(this.opacityClassName)},unhighlight:function(t,e){it(e).removeClass(this.opacityClassName)}}),Ff=ti("highlighted"),Ng=Ei.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Ff},highlight:function(t,e){it(e).addClass(this.options.className)},unhighlight:function(t,e){it(e).removeClass(this.options.className)}},{className:Ff}),Uf={stroke:wg,mask:bg,opacity:xg,addClass:Ng};function Ao(t){return function(e,r,i,s){if(i instanceof Element){var l,u=this.paper.findView(i);if(u)if(u.isNodeConnection(i)){var f="fixedAt"in s?s.fixedAt:"50%";l=Vf(u,f)}else l=u.getNodeBBox(i).center();else l=new F;return t.call(this,e,r,l,s)}return t.apply(this,arguments)}}function Vf(t,e){var r=parseFloat(e);return Vr(e)?t.getPointAtRatio(r/100):t.getPointAtLength(r)}var _u=Ao(function Tg(t,e,r,i){var s=1e6,u=t.getConnection(),l=t.getConnectionSubdivisions(),f=new It(r.clone().offset(0,s),r.clone().offset(0,-s)),d=new It(r.clone().offset(s,0),r.clone().offset(-s,0)),n=f.intersect(u,{segmentSubdivisions:l}),a=d.intersect(u,{segmentSubdivisions:l}),o=[];return n&&Array.prototype.push.apply(o,n),a&&Array.prototype.push.apply(o,a),o.length>0?r.chooseClosest(o):"fallbackAt"in i?Vf(t,i.fallbackAt):Xf(t,e,r,i)}),Xf=Ao(function Lg(t,e,r,i){return t.getClosestPoint(r)||new F}),lc={resolveRef:Ao,connectionRatio:function Mg(t,e,r,i){return t.getPointAtRatio("ratio"in i?i.ratio:.5)},connectionLength:function Sg(t,e,r,i){return t.getPointAtLength("length"in i?i.length:20)},connectionPerpendicular:_u,connectionClosest:Xf};function yo(t,e,r){if(Be(r)){var i=r.x,s=r.y;if(isFinite(s)){var l=new It(e,t).parallel(s);e=l.start,t=l.end}r=i}if(!isFinite(r))return t;var n=t.distance(e);return 0===r&&n>0?t:t.move(e,-Math.min(r,n-1))}function Co(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function cc(t,e,r,i){var s=e.getNodeBBox(r);i.stroke&&s.inflate(Co(r)/2);var u=t.intersect(s);return yo(u?t.start.chooseClosest(u):t.end,t.start,i.offset)}var fc="segmentSubdivisons",hc="shapeBBox",dc={anchor:function Jf(t,e,r,i){var s=i.offset,l=i.align;return l&&function Hf(t,e,r){void 0===r&&(r=0);var i,s,u,l,f=t.start,d=t.end;switch(e){case"left":i="x",s=d,u=f,l=-1;break;case"right":i="x",s=f,u=d,l=1;break;case"top":i="y",s=d,u=f,l=-1;break;case"bottom":i="y",s=f,u=d,l=1;break;default:return}f[i]<d[i]?s[i]=u[i]:u[i]=s[i],isFinite(r)&&(s[i]+=l*r,u[i]+=l*r)}(t,l,i.alignOffset),yo(t.end,t.start,s)},bbox:cc,rectangle:function Kf(t,e,r,i){var s=e.model.angle();if(0===s)return cc(t,e,r,i);var u=e.getNodeUnrotatedBBox(r);i.stroke&&u.inflate(Co(r)/2);var l=u.center(),f=t.clone().rotate(l,s),d=f.setLength(1e6).intersect(u);return yo(d?f.start.chooseClosest(d).rotate(l,-s):t.end,t.start,i.offset)},boundary:function Wu(t,e,r,i){var s,u,l=i.selector,f=t.end;if(s="string"==typeof l?e.findBySelector(l)[0]:Array.isArray(l)?Ti(r,l):function Dg(t){if(!t)return null;var e=t;do{var r=e.tagName;if("string"!=typeof r)return null;if("G"===(r=r.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==r)break;e=e.nextElementSibling}}while(e);return e}(r),!it.isSVGGraphicsElement(s)){if(s===r||!it.isSVGGraphicsElement(r))return f;s=r}var G,d=e.getNodeShape(s),n=e.getNodeMatrix(s),a=e.getRootTranslateMatrix(),o=e.getRootRotateMatrix(),h=a.multiply(o).multiply(n),p=h.inverse(),A=it.transformLine(t,p),b=A.start.clone(),T=e.getNodeData(s);if(!1===i.insideout&&(T[hc]||(T[hc]=d.bbox()),T[hc].containsPoint(b)))return f;if(d instanceof xt){var m=i.precision||2;T[fc]||(T[fc]=d.getSegmentSubdivisions({precision:m})),G={precision:m,segmentSubdivisions:T[fc]}}!0===i.extrapolate&&A.setLength(1e6),(u=A.intersect(d,G))?it.isArray(u)&&(u=b.chooseClosest(u)):!0===i.sticky&&(u=d instanceof pt?d.pointNearestToPoint(b):d instanceof Ar?d.intersectionWithLineFromCenterToPoint(b):d.closestPoint(b,G));var w=u?it.transformPoint(u,h):f,M=i.offset||0;return i.stroke&&(M+=Co(s)/2),yo(w,t.start,M)}};function Hi(t){return function(e,r,i,s){var u=!!s.rotate,l=u?e.getNodeUnrotatedBBox(r):e.getNodeBBox(r),f=l[t](),d=s.dx;if(d){var n=Vr(d);d=parseFloat(d),isFinite(d)&&(n&&(d/=100,d*=l.width),f.x+=d)}var a=s.dy;if(a){var o=Vr(a);a=parseFloat(a),isFinite(a)&&(o&&(a/=100,a*=l.height),f.y+=a)}return u?f.rotate(e.model.getBBox().center(),-e.model.angle()):f}}var Rg=Hi("center"),Gg=Hi("topMiddle"),jg=Hi("bottomMiddle"),Bg=Hi("leftMiddle"),Zg=Hi("rightMiddle"),_g=Hi("origin"),Wg=Hi("topRight"),Yg=Hi("bottomLeft"),di=Hi("corner"),Fg=Ao(function Eg(t,e,r,i){var s=t.model.angle(),u=t.getNodeBBox(e),l=u.center(),f=u.origin(),d=u.corner(),n=i.padding;if(isFinite(n)||(n=0),f.y+n<=r.y&&r.y<=d.y-n){var a=r.y-l.y;l.x+=0===s||180===s?0:1*a/Math.tan(xn(s)),l.y+=a}else if(f.x+n<=r.x&&r.x<=d.x-n){var o=r.x-l.x;l.y+=90===s||270===s?0:o*Math.tan(xn(s)),l.x+=o}return l}),Ug=Ao(function zg(t,e,r,i){var u,l,f,s=!!i.rotate;s?(u=t.getNodeUnrotatedBBox(e),f=t.model.getBBox().center(),l=t.model.angle()):u=t.getNodeBBox(e);var a,d=i.padding;switch(isFinite(d)&&u.inflate(d),s&&r.rotate(f,l),u.sideNearestToPoint(r)){case"left":a=u.leftMiddle();break;case"right":a=u.rightMiddle();break;case"top":a=u.topMiddle();break;case"bottom":a=u.bottomMiddle()}return s?a.rotate(f,-l):a}),Xt={center:Rg,top:Gg,bottom:jg,left:Bg,right:Zg,topLeft:_g,topRight:Wg,bottomLeft:Yg,bottomRight:di,perpendicular:Fg,midSide:Ug,modelCenter:function Og(t,e,r,i,s){return t.model.getPointFromConnectedLink(this.model,s).offset(i.dx,i.dy)}},Ds={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Fu=9007199254740991,zi=ne.Highlighting,wo={};wo[zi.DEFAULT]={name:"stroke",options:{padding:3}},wo[zi.MAGNET_AVAILABILITY]={name:"addClass",options:{className:"available-magnet"}},wo[zi.ELEMENT_AVAILABILITY]={name:"addClass",options:{className:"available-cell"}};var Vg=[{name:Jr.BACK},{name:Jr.CELLS},{name:Jr.LABELS},{name:Jr.FRONT},{name:Jr.TOOLS}],Xg=Vn.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Ee,linkView:Ls,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:wo,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new wr,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,r){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,r,i,s,u){return("target"===s?r:t)instanceof Ee},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Ds.EXACT,frozen:!1,onViewUpdate:function(t,e,r,i,s){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||i.mounting||i.isolate||s.requestConnectedLinksUpdate(t,r,i)},onViewPostponed:function(t,e,r){return r.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Uf,anchorNamespace:Xt,linkAnchorNamespace:lc,connectionPointNamespace:dc},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){var e=this.options,r=this.el;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&hi(joint,"shapes")?joint.shapes:null);var i=this.model=e.model||new Ui;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=Wt(r.ownerDocument),this.resetViews(i.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,r){var i=r.position;this.isAsync()||!rn(i)?this.renderView(t,r):(r.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(t,r),0===i&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,r){var i=this.findViewByModel(t);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,r)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Ds.APPROX){var r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,r=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(e)&&!r.hasActiveBatch(i)&&this.updateViews(t)}var s=this.SORT_DELAYING_BATCHES;s.includes(e)&&!r.hasActiveBatch(s)&&this.sortViews()}},cloneOptions:function(){var e=this.options,r=e.defaultConnector,i=e.defaultRouter,s=e.defaultConnectionPoint,u=e.defaultAnchor,l=e.defaultLinkAnchor,f=e.origin,d=e.highlighting,a=e.interactive;!e.cellViewNamespace&&"undefined"!=typeof joint&&hi(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Ht(r)||(e.defaultConnector=Xr(r)),Ht(i)||(e.defaultRouter=Xr(i)),Ht(s)||(e.defaultConnectionPoint=Xr(s)),Ht(u)||(e.defaultAnchor=Xr(u)),Ht(l)||(e.defaultLinkAnchor=Xr(l)),Be(a)&&(e.interactive=Mt({},a)),Be(d)&&(e.highlighting=yu({},d,wo)),e.origin=Mt({},f)},children:function(){var t=it.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:ti("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:ti("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:ti("layers"),selector:"layers"}]}]},hasLayerView:function(e){return e in this._layers},getLayerView:function(e){var i=this._layers;if(e in i)return i[e];throw new Error('dia.Paper: Unknown layer "'+e+'"')},getLayerNode:function(e){return this.getLayerView(e).el},render:function(){this.renderChildren();var e=this.childNodes,r=this.options,i=e.svg,s=e.defs,u=e.layers,l=e.background,f=e.grid;return this.svg=i,this.defs=s,this.layers=u,this.$background=Wt(l),this.$grid=Wt(f),this.renderLayers(),it.ensureId(i),r.background&&this.drawBackground(r.background),r.drawGrid&&this.drawGrid(),this},renderLayers:function(t){var e=this;void 0===t&&(t=Vg),this.removeLayers(),t.forEach(function(u){var l=u.name,d=new ku({name:l});e.layers.appendChild(d.el),e._layers[l]=d});var r=this.getLayerView(Jr.CELLS),i=this.getLayerView(Jr.TOOLS),s=this.getLayerView(Jr.LABELS);this.tools=i.el,this.cells=this.viewport=r.el,r.vel.addClass(ti("viewport")),s.vel.addClass(ti("viewport"))},removeLayers:function(){var e=this._layers;Object.keys(e,function(r){e[r].remove(),delete e[r]})},resetLayers:function(){var e=this._layers;Object.keys(e,function(r){e[r].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var r=e.getAttribute("transform");return(this._viewportTransformString||null)===r?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=r),it.createSVGMatrix(t)}t=it.createSVGMatrix(t);var i=it.matrixToTransformString(t);return e.setAttribute("transform",i),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return it.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,r){if(t instanceof ne)for(var i=t.model,s=this.model.getConnectedLinks(i),u=0,l=s.length;u<l;u++){var f=s[u],d=this.findViewByModel(f);if(d){var n=["UPDATE"];f.getTargetCell()===i&&n.push("TARGET"),f.getSourceCell()===i&&n.push("SOURCE");var a=Math.max(e+1,d.UPDATE_PRIORITY);this.scheduleViewUpdate(d,d.getFlag(n),a,r)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof ne))return!1;var r=t.model;if(r.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var i=0,s=this.findViewByModel(r.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s),t.updateEndMagnet("source"));var u=0,l=this.findViewByModel(r.getTargetCell());if(l&&!this.isViewMounted(l)&&(u=this.dumpView(l),t.updateEndMagnet("target")),0===i&&0===u)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,r,i){i||(i={}),this.scheduleViewUpdate(t,e,r,i);var s=this.isAsync();if(!(this.isFrozen()||s&&!1!==i.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var u=this.updateViews(i);s&&this.notifyAfterRender(u,i)}},scheduleViewUpdate:function(t,e,r,i){var u=this._updates,l=this.options,f=t.FLAG_REMOVE,d=t.FLAG_INSERT,n=t.UPDATE_PRIORITY,a=t.cid,o=u.priorities[r];if(o||(o=u.priorities[r]={}),r>n)for(var h=r-1;h>=n;h--){var p=u.priorities[h];!p||!(a in p)||(o[a]|=p[a],delete p[a])}var A=o[a]||0;if((A&e)!==e){A||u.count++,e&f&&A&d?o[a]^=d:e&d&&A&f&&(o[a]^=f),o[a]|=e;var b=l.onViewUpdate;"function"==typeof b&&b.call(this,t,e,r,i||{},this)}},dumpViewUpdate:function(t){if(!t)return 0;var r=t.cid,i=this._updates.priorities[t.UPDATE_PRIORITY],s=this.registerMountedView(t)|i[r];return delete i[r],s},dumpView:function(t,e){var r=this.dumpViewUpdate(t);return r?this.updateView(t,r,e):0},updateView:function(t,e,r){if(!t)return 0;var s=t.FLAG_INSERT;if(t instanceof ne){if(e&t.FLAG_REMOVE)return this.removeView(t.model),0;e&s&&(this.insertView(t),e^=s)}return e?t.confirmUpdate(e,r||{}):0},requireView:function(t,e){var r=this.findViewByModel(t);return r?(this.dumpView(r,e),r):null},registerUnmountedView:function(t){var e=t.cid,r=this._updates;if(e in r.unmounted)return 0;var i=r.unmounted[e]|=t.FLAG_INSERT;return r.unmountedCids.push(e),delete r.mounted[e],i},registerMountedView:function(t){var e=t.cid,r=this._updates;if(e in r.mounted)return 0;r.mounted[e]=!0,r.mountedCids.push(e);var i=r.unmounted[e]||0;return delete r.unmounted[e],i},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Mn({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);var e,r=0,i=0,s=Fu;do{i++,r+=(e=this.updateViewsBatch(t)).updated,s=Math.min(e.priority,s)}while(!e.empty);var u={updated:r,batches:i,priority:s};return this.notifyAfterRender(u,t),u},hasScheduledUpdates:function(){for(var t=this._updates.priorities,e=Object.keys(t),r=e.length;r>0&&r--;)for(var i in t[e[r]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:Fu});var r=this._updates,i=r.id;if(i){du(i),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var s=this.updateViewsBatch(t),u=Mn({},t,{mountBatchSize:1e3-s.mounted,unmountBatchSize:1e3-s.unmounted}),l=this.checkViewport(u),f=l.unmounted,d=l.mounted,n=e.processed,a=r.count;s.updated>0&&(s.processed=n+=s.updated+s.unmounted,e.priority=Math.min(s.priority,e.priority),s.empty&&0===d?(s.unmounted+=f,s.mounted+=d,s.priority=e.priority,this.notifyAfterRender(s,t),e.processed=0,e.priority=Fu,r.count=0):e.processed=n);var o=t.progress;if(a&&"function"==typeof o&&o.call(this,s.empty,n,a,s,this),r.id!==i)return}r.id=gu(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t){void 0===t&&(t={});var e=t.beforeRender;"function"!=typeof e&&"function"!=typeof(e=this.options.beforeRender)||e.call(this,t,this)},notifyAfterRender:function(t,e){void 0===e&&(e={});var r=e.afterRender;"function"!=typeof r&&(r=this.options.afterRender),"function"==typeof r&&r.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,r=this._updates,i=0,s=0,u=0,l=0,f=Fu,d=!0,n=this.options,a=r.priorities,o="viewport"in t?t.viewport:n.viewport;"function"!=typeof o&&(o=null);var h=n.onViewPostponed;"function"!=typeof h&&(h=null);var p=Object.keys(a);t:for(var A=0,b=p.length;A<b;A++){var T=+p[A],P=a[T];for(var G in P){if(i>=e){d=!1;break t}var m=Vi[G];if(m){var w=P[G];if(0==(w&m.FLAG_REMOVE)){var M=G in r.unmounted;if(m.DETACHABLE&&o&&!o.call(this,m,!M,this)){M||(this.registerUnmountedView(m),m.unmount()),r.unmounted[G]|=w,delete P[G],u++;continue}M&&(w|=m.FLAG_INSERT,l++),w|=this.registerMountedView(m)}var E=this.updateView(m,w,t);E>0&&(P[G]=E,!h||!h.call(this,m,E,this)||P[G])?(s++,d=!1):(f>T&&(f=T),i++,delete P[G])}else delete P[G]}}return{priority:f,updated:i,postponed:s,unmounted:u,mounted:l,empty:d}},getUnmountedViews:function(){for(var e=Object.keys(this._updates.unmounted),r=e.length,i=new Array(r),s=0;s<r;s++)i[s]=Vi[e[s]];return i},getMountedViews:function(){for(var e=Object.keys(this._updates.mounted),r=e.length,i=new Array(r),s=0;s<r;s++)i[s]=Vi[e[s]];return i},checkUnmountedViews:function(t,e){e||(e={});var r=0;"function"!=typeof t&&(t=null);for(var s=this._updates,u=s.unmountedCids,l=s.unmounted,f=0,d=(Math.min(u.length,"mountBatchSize"in e?e.mountBatchSize:1/0));f<d;f++){var n=u[f];if(n in l){var a=Vi[n];if(a){if(a.DETACHABLE&&t&&!t.call(this,a,!1,this)){u.push(n);continue}r++;var o=this.registerMountedView(a);o&&this.scheduleViewUpdate(a,o,a.UPDATE_PRIORITY,{mounting:!0})}}}return u.splice(0,f),r},checkMountedViews:function(t,e){e||(e={});var r=0;if("function"!=typeof t)return r;for(var s=this._updates,u=s.mountedCids,l=s.mounted,f=0,d=(Math.min(u.length,"unmountBatchSize"in e?e.unmountBatchSize:1/0));f<d;f++){var n=u[f];if(n in l){var a=Vi[n];if(a){if(!a.DETACHABLE||t.call(this,a,!0,this)){u.push(n);continue}r++,this.registerUnmountedView(a)&&a.unmount()}}}return u.splice(0,f),r},checkViewport:function(t){var e=Mn({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in e?e.viewport:this.options.viewport,i=this.checkMountedViews(r,e);return i>0&&(e.mountBatchSize=Math.min(this._updates.unmountedCids.length-i,e.mountBatchSize)),{mounted:this.checkUnmountedViews(r,e),unmounted:i}},freeze:function(t){t||(t={});var e=this._updates,r=t.key,i=this.options.frozen,s=e.freezeKey;if(r&&r!==s){if(i&&s)return;e.freezeKey=r,e.keyFrozen=i}this.options.frozen=!0;var u=e.id;e.id=null,this.isAsync()&&u&&du(u)},unfreeze:function(t){t||(t={});var e=this._updates,r=t.key,i=e.freezeKey;r&&i&&r!==i||(e.freezeKey=null,(!r||r!==i||!e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Ds.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,r=t.height;return rn(e)||(e=this.el.clientWidth),rn(r)||(r=this.el.clientHeight),{width:e,height:r}},setDimensions:function(t,e){var i=this.options,s=i.width,u=i.height,l=void 0===t?s:t,f=void 0===e?u:e;if(s!==l||u!==f){i.width=l,i.height=f,this._setDimensions();var d=this.getComputedSize();this.trigger("resize",d.width,d.height)}},_setDimensions:function(){var e=this.options,r=e.width,i=e.height;rn(r)&&(r=Math.round(r)),rn(i)&&(i=Math.round(i)),this.$el.css({width:null===r?"":r,height:null===i?"":i})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,r,i){i=Xe(t)?t:Mt({gridWidth:t,gridHeight:e,padding:r},i);var s=this.getFitToContentArea(i),u=s.x,l=s.y,f=s.width,d=s.height,n=this.scale(),a=n.sx,o=n.sy;return this.setOrigin(-u*a,-l*o),this.setDimensions(f*a,d*o),new pt(u,l,f,d)},getFitToContentArea:function(t){void 0===t&&(t={});var e=t.gridWidth||1,r=t.gridHeight||1,i=ga(t.padding||0),s=Math.max(t.minWidth||0,e),u=Math.max(t.minHeight||0,r),l=t.maxWidth||Number.MAX_VALUE,f=t.maxHeight||Number.MAX_VALUE,d=t.allowNewOrigin,n="contentArea"in t?new pt(t.contentArea):this.getContentArea(t),a=this.scale(),o=a.sx,h=a.sy;n.x*=o,n.y*=h,n.width*=o,n.height*=h;var p=Math.ceil((n.width+n.x)/e),A=Math.ceil((n.height+n.y)/r);t.allowNegativeBottomRight||(p=Math.max(p,1),A=Math.max(A,1)),p*=e,A*=r;var b=0;("negative"===d&&n.x<0||"positive"===d&&n.x>=0||"any"===d)&&(b=Math.ceil(-n.x/e)*e,p+=b+=i.left);var T=0;return("negative"===d&&n.y<0||"positive"===d&&n.y>=0||"any"===d)&&(T=Math.ceil(-n.y/r)*r,A+=T+=i.top),p+=i.right,A+=i.bottom,p=Math.max(p,s),A=Math.max(A,u),p=Math.min(p,l),A=Math.min(A,f),new pt(-b/o,-T/h,p/o,A/h)},scaleContentToFit:function(t){var e,r;if(t||(t={}),"contentArea"in t){var i=t.contentArea;e=this.localToPaperRect(i),r=new F(i)}else e=this.getContentBBox(t),r=this.paperToLocalPoint(e);if(e.width&&e.height){Mn(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var n,s=ga(t.padding),u=t.minScaleX||t.minScale,l=t.maxScaleX||t.maxScale,f=t.minScaleY||t.minScale,d=t.maxScaleY||t.maxScale;if(t.fittingBBox)n=t.fittingBBox;else{var a=this.translate(),o=this.getComputedSize();n={x:a.tx,y:a.ty,width:o.width,height:o.height}}n=new pt(n).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});var h=this.scale(),p=n.width/e.width*h.sx,A=n.height/e.height*h.sy;if(t.preserveAspectRatio&&(p=A=Math.min(p,A)),t.scaleGrid){var b=t.scaleGrid;p=b*Math.floor(p/b),A=b*Math.floor(A/b)}p=Math.min(l,Math.max(u,p)),A=Math.min(d,Math.max(f,A));var T=this.options.origin,P=n.x-r.x*p-T.x,G=n.y-r.y*A-T.y;this.scale(p,A),this.translate(P,G)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new pt:it(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=this.options,i=r.restrictTranslate;return Ht(i)?i.apply(this,t):!0===i?this.getArea():i?new pt(i):null},createViewForModel:function(t){var i,s,r=this.options,u=r.cellViewNamespace,l=t.get("type")+"View",f=Ti(u,l,".");return t.isLink()?(i=r.linkView,s=Ls):(i=r.elementView,s=Ee),new(i.prototype instanceof yt.View?f||i:i.call(this,t)||f||s)({model:t,interactive:r.interactive,labelsLayer:!0===r.labelsLayer?Jr.LABELS:r.labelsLayer})},removeView:function(t){var e=t.id,i=this._views,s=this._updates,u=i[e];if(u){var l=u.cid,f=s.mounted,d=s.unmounted;u.remove(),delete i[e],delete f[l],delete d[l]}return u},renderView:function(t,e){var s,u,r=t.id,i=this._views,l=!0;return r in i&&((s=i[r]).model===t?(u=s.FLAG_INSERT,l=!1):this.removeView(t)),l&&((s=i[r]=this.createViewForModel(t)).paper=this,u=this.registerUnmountedView(s)|s.getFlag(ke(s,"initFlag"))),this.requestViewUpdate(s,u,s.UPDATE_PRIORITY,e),s},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Fn(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var t=Wt(this.cells).children("[model-id]"),e=this.model.get("cells");Ll(t,function(r,i){var s=e.get(r.getAttribute("model-id")),u=e.get(i.getAttribute("model-id")),l=s.attributes.z||0,f=u.attributes.z||0;return l===f?0:l<f?-1:1})},insertView:function(t){var e=this.getLayerView(Jr.CELLS),r=t.el;this.options.sorting===Ds.APPROX?e.insertSortedNode(r,t.model.get("z")):e.insertNode(r),t.onMount()},scale:function(t,e,r,i){if(void 0===t)return it.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===r&&(r=0,i=0);var s=this.translate();(r||i||s.tx||s.ty)&&this.translate(s.tx-r*(t-1),s.ty-i*(e-1)),t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var f=this.matrix();return f.a=t,f.d=e,this.matrix(f),this.trigger("scale",t,e,r,i),this},rotate:function(t,e,r){if(void 0===t)return it.matrixToRotate(this.matrix());if(void 0===e){var i=this.cells.getBBox();e=i.width/2,r=i.height/2}var s=this.matrix().translate(e,r).rotate(t).translate(-e,-r);return this.matrix(s),this},translate:function(t,e){if(void 0===t)return it.matrixToTranslate(this.matrix());var i=this.options,s=i.origin,u=i.drawGrid;t||(t=0),e||(e=0);var l=this.matrix();if(l.e===t&&l.f===e)return this;l.e=t,l.f=e,this.matrix(l);var f=this.translate(),d=f.tx,n=f.ty;return s.x=d,s.y=n,this.trigger("translate",d,n),u&&this.drawGrid(),this},findView:function(t){var e=yr(t)?this.cells.querySelector(t):t instanceof Wt?t[0]:t,r=this.findAttribute("model-id",e);if(r)return this._views[r]},findViewByModel:function(t){var e=yr(t)||rn(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new F(t),this.model.getElements().map(this.findViewByModel,this).filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=Mn(e||{},{strict:!1}),t=new pt(t);var r=this.model.getElements().map(this.findViewByModel,this),i=e.strict?"containsRect":"intersect";return r.filter(function(s){return s&&t[i](s.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];"string"==typeof t&&(e=this).trigger.apply(e,["tools:event",t].concat(r))},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var r=new F(t,e);return it.transformPoint(r,this.matrix())},localToPaperRect:function(t,e,r,i){var s=new pt(t,e,r,i);return it.transformRect(s,this.matrix())},paperToLocalPoint:function(t,e){var r=new F(t,e);return it.transformPoint(r,this.matrix().inverse())},paperToLocalRect:function(t,e,r,i){var s=new pt(t,e,r,i);return it.transformRect(s,this.matrix().inverse())},localToClientPoint:function(t,e){var r=new F(t,e);return it.transformPoint(r,this.clientMatrix())},localToClientRect:function(t,e,r,i){var s=new pt(t,e,r,i);return it.transformRect(s,this.clientMatrix())},clientToLocalPoint:function(t,e){var r=new F(t,e);return it.transformPoint(r,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,r,i){var s=new pt(t,e,r,i);return it.transformRect(s,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,r,i){return this.localToPaperRect(t,e,r,i).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var i=new F(t,e).difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(t,e,r,i){var s=this.pageOffset(),u=new pt(t,e,r,i);return u.x-=s.x,u.y-=s.y,this.paperToLocalRect(u)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new F(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Ls))throw new Error("Must provide a linkView.");var e=t.model,r=this.options,i=this.model,s=i.constructor.validations;return!(!r.multiLinks&&!s.multiLinks.call(this,i,e)||!r.linkPinning&&!s.linkPinning.call(this,i,e)||"function"==typeof r.allowLink&&!r.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return Ht(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t){void 0===t&&(t={});var e=t.highlighter,r=t.type,i=this.options,s=i.highlighting,u=i.highlighterNamespace;if(void 0===e){if(!s||r&&!1===(e=s[r]))return!1;e||(e=s.default)}if(!e)return!1;yr(e)&&(e={name:e});var l=e.name,f=u[l];if(!f)throw new Error('Unknown highlighter ("'+l+'")');if("function"!=typeof f.highlight)throw new Error('Highlighter ("'+l+'") is missing required highlight() method');if("function"!=typeof f.unhighlight)throw new Error('Highlighter ("'+l+'") is missing required unhighlight() method');return{highlighter:f,options:e.options||{},name:l}},onCellHighlight:function(t,e,r){var i=this.resolveHighlighter(r);i&&i.highlighter.highlight(t,e,i.options)},onCellUnhighlight:function(t,e,r){var i=this.resolveHighlighter(r);i&&i.highlighter.unhighlight(t,e,i.options)},pointerdblclick:function(t){t.preventDefault(),t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,r.x,r.y):this.trigger("blank:pointerdblclick",t,r.x,r.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=Ne(t);var r=this.findView(t.target);if(this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r?r.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,r.x,r.y):this.trigger("blank:contextmenu",t,r.x,r.y)}},pointerdown:function(t){t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,r.x,r.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,r.x,r.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=Ne(t);var i=this.snapToGrid(t.clientX,t.clientY),s=e.sourceView;s?s.pointermove(t,i.x,i.y):this.trigger("blank:pointermove",t,i.x,i.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=Ne(t),r=this.snapToGrid(e.clientX,e.clientY),i=this.eventData(t).sourceView;i?i.pointerup(e,r.x,r.y):this.trigger("blank:pointerup",e,r.x,r.y),e.isPropagationStopped()||this.pointerclick(Wt.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.findView(t.relatedTarget);if(e){if(r===e)return;e.mouseenter(t)}else{if(r)return;this.trigger("paper:mouseenter",t)}}},mouseleave:function(t){var r=(t=Ne(t)).relatedTarget,i=this.findView(t.target);if(!this.guard(t,i)){var s=this.findView(r);i&&(s===i||(t.stopPropagation(),i.mouseleave(t),this.el.contains(r)))||s||this.trigger("paper:mouseleave",t)}},mousewheel:function(t){t=Ne(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=t.originalEvent,i=this.snapToGrid(r.clientX,r.clientY),s=Math.max(-1,Math.min(1,r.wheelDelta));e?e.mousewheel(t,i.x,i.y,s):this.trigger("blank:mousewheel",t,i.x,i.y,s)}},onevent:function(t){var e=t.currentTarget,r=e.getAttribute("event");if(r){var i=this.findView(e);if(i){if(t=Ne(t),this.guard(t,i))return;var s=this.snapToGrid(t.clientX,t.clientY);i.onevent(t,r,s.x,s.y)}}},magnetEvent:function(t,e){var r=t.currentTarget;if(r.getAttribute("magnet")){var s=this.findView(r);if(s){if(t=Ne(t),this.guard(t,s))return;var u=this.snapToGrid(t.clientX,t.clientY);e.call(this,s,t,r,u.x,u.y)}}},onmagnet:function(t){this.magnetEvent(t,function(e,r,i,s,u){e.onmagnet(r,s,u)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,r,i,s,u){e.magnetpointerdblclick(r,i,s,u)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(e,r,i,s,u){e.magnetcontextmenu(r,i,s,u)})},onlabel:function(t){var r=this.findView(t.currentTarget);if(r){if(t=Ne(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onlabel(t,i.x,i.y)}},getPointerArgs:function(e){var r=Ne(e),i=this.snapToGrid(r.clientX,r.clientY);return[r,i.x,i.y]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return!!("mousedown"===t.type&&2===t.button||this.options.guard&&this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof Cr||this.svg===t.target||this.el===t.target||Wt.contains(this.svg,t.target)))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:it("svg",{width:"100%",height:"100%"},it("defs")),patterns:{},add:function(t,e){it(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(it("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(yr(t)&&Array.isArray(e[t]))return e[t].map(function(d){return Mt({},d)});var r=t||{args:[{}]},i=Array.isArray(r),s=r.name;if(!i&&!s&&!r.markup&&(s="dot"),s&&Array.isArray(e[s])){var u=e[s].map(function(d){return Mt({},d)}),l=Array.isArray(r.args)?r.args:[r.args||{}];Mn(l[0],Pi(t,"args"));for(var f=0;f<l.length;f++)u[f]&&Mt(u[f],l[f]);return u}return i?r:[r]},drawGrid:function(t){var e=this.options.gridSize;if(e<=1)return this.clearGrid();var r=Array.isArray(t)?t:[t],i=this.matrix(),s=this._getGridRefs();this._gridSettings.forEach(function(l,f){var d="pattern_"+f,n=dr(l,r[f],{sx:i.a||1,sy:i.d||1,ox:i.e||0,oy:i.f||0});n.width=e*(i.a||1)*(n.scaleFactor||1),n.height=e*(i.d||1)*(n.scaleFactor||1),s.exist(d)||s.add(d,it("pattern",{id:d,patternUnits:"userSpaceOnUse"},it(n.markup)));var a=s.get(d);Ht(n.update)&&n.update(a.node.childNodes[0],n);var o=n.ox%n.width;o<0&&(o+=n.width);var h=n.oy%n.height;h<0&&(h+=n.height),a.attr({x:o,y:h,width:n.width,height:n.height})});var u=(new XMLSerializer).serializeToString(s.root.node);return u="url(data:image/svg+xml;base64,"+btoa(u)+")",this.$grid.css("backgroundImage",u),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",r=t.size||"auto auto",i=this.scale(),s=this.translate();Xe(e)&&(e=s.tx+i.sx*(e.x||0)+"px "+(s.ty+i.sy*(e.y||0))+"px"),Xe(r)&&(r=(r=new pt(r).scale(i.sx,i.sy)).width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var r,i=(e=e||{}).size,s=e.repeat||"no-repeat",u=e.opacity||1,l=Math.abs(e.quality)||1,f=this.constructor.backgroundPatterns[af(s)];if(Ht(f)){t.width*=l,t.height*=l;var d=f(t,e);if(!(d instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=d.toDataURL("image/png"),s="repeat",Xe(i)?(i.width*=d.width/t.width,i.height*=d.height/t.height):void 0===i&&(e.size={width:d.width/l,height:d.height/l})}else r=t.src,void 0===i&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:u,backgroundRepeat:s,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(e)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(this.updateBackgroundColor((t=t||{}).color),t.image){t=this._background=Xr(t),ws(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Fn(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Xe(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,r=t.name;if(e||(e=r+this.svg.id+uo(JSON.stringify(t))),!this.isDefined(e)){var s=Iu[r]&&Iu[r](t.args||{});if(!s)throw new Error("Non-existing filter "+r);var u=Mt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});it(s,u).appendTo(this.defs)}return e},defineGradient:function(t){if(!Xe(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");var i=this.defs,s=t.type,u=t.id;void 0===u&&(u=s+this.svg.id+uo(JSON.stringify(t)));var l=t.stops,f=t.attrs;if(void 0===f&&(f={}),this.isDefined(u))return u;var d=qt(l).map(function(a){var o=a.offset,h=a.color,p=a.opacity;return it("stop").attr({offset:o,"stop-color":h,"stop-opacity":Number.isFinite(p)?p:1})}),n=it(s,f,d);return n.id=u,n.appendTo(i),u},definePattern:function(t){if(!Xe(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");var i=this.defs,s=t.id;void 0===s&&(s=this.svg.id+uo(JSON.stringify(t)));var u=t.markup,l=t.attrs;if(void 0===l&&(l={}),!u)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(s))return s;var f=it("pattern",{patternUnits:"userSpaceOnUse"});if(f.id=s,f.attr(l),"string"==typeof u)f.append(it(u));else{var d=Ga(u);f.append(d.fragment)}return f.appendTo(i),s},defineMarker:function(t){if(!Xe(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");var i=this.defs,s=t.id;void 0===s&&(s=this.svg.id+uo(JSON.stringify(t)));var u=t.markup,l=t.attrs;void 0===l&&(l={});var f=t.markerUnits;if(void 0===f&&(f="userSpaceOnUse"),this.isDefined(s))return s;var d=it("marker",{orient:"auto",overflow:"visible",markerUnits:f});if(d.id=s,d.attr(l),u)if("string"==typeof u)d.append(it(u));else{var n=Ga(u);d.append(n.fragment)}else{var o=t.type;void 0===o&&(o="path");var h=it(o,Pi(t,"type","id","markup","attrs","markerUnits"));d.append(h)}return d.appendTo(i),s}},{sorting:Ds,Layers:Jr,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),r=t.width,i=t.height;e.width=2*r,e.height=2*i;var s=e.getContext("2d");return s.drawImage(t,0,0,r,i),s.setTransform(-1,0,0,-1,e.width,e.height),s.drawImage(t,0,0,r,i),s.setTransform(-1,0,0,1,e.width,0),s.drawImage(t,0,0,r,i),s.setTransform(1,0,0,-1,0,e.height),s.drawImage(t,0,0,r,i),e},flipX:function(t){var e=document.createElement("canvas"),r=t.width,i=t.height;e.width=2*r,e.height=i;var s=e.getContext("2d");return s.drawImage(t,0,0,r,i),s.translate(2*r,0),s.scale(-1,1),s.drawImage(t,0,0,r,i),e},flipY:function(t){var e=document.createElement("canvas"),r=t.width,i=t.height;e.width=r,e.height=2*i;var s=e.getContext("2d");return s.drawImage(t,0,0,r,i),s.translate(0,2*i),s.scale(1,-1),s.drawImage(t,0,0,r,i),e},watermark:function(t,e){e=e||{};var r=t.width,i=t.height,s=document.createElement("canvas");s.width=3*r,s.height=3*i;for(var u=s.getContext("2d"),l=rn(e.watermarkAngle)?-e.watermarkAngle:-20,f=xn(l),d=s.width/4,n=s.height/4,a=0;a<4;a++)for(var o=0;o<4;o++)(a+o)%2>0&&(u.setTransform(1,0,0,1,(2*a-1)*d,(2*o-1)*n),u.rotate(f),u.drawImage(t,-r/2,-i/2,r,i));return s}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){it(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var r=e.sx<=1?e.thickness*e.sx:e.thickness;it(t).attr({width:r,height:r,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var r,i=e.width,s=e.height,u=e.thickness;r=i-u>=0&&s-u>=0?["M",i,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",it(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var r,i=e.width,s=e.height,u=e.thickness;r=i-u>=0&&s-u>=0?["M",i,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",it(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var r,i=e.width,s=e.height,u=e.thickness;r=i-u>=0&&s-u>=0?["M",i,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",it(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}}]}}),Ji=Vn.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){var r=this.paper,i=this.relatedView;return!r||!i||r.guard(t,i)}}),Hg=Vn.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){var e=(t=Mt(this.options,t)).tools;if(!Array.isArray(e))return this;var r=t.relatedView;if(!(r instanceof ne))return this;for(var i=this.tools=[],s=0,u=e.length;s<u;s++){var l=e[s];l instanceof Ji&&(l.configure(r,this),this.vel.append(l.el),i.push(l))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var r=this.isRendered,i=0,s=e.length;i<s;i++){var u=e[i];r?t.tool!==u.cid&&u.isVisible()&&u.update():u.render()}return r||(this.mount(),this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var r=0,i=e.length;r<i;r++){var s=e[r];t===s?s.show():s.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var r=0,i=e.length;r<i;r++){var s=e[r];s!==t&&!s.isVisible()&&(s.show(),s.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,r=t.length;e<r;e++)t[e].remove();this.tools=null},mount:function(){var e=this.options,r=this.el,i=e.relatedView,s=e.layer;void 0===s&&(s=Jr.TOOLS);var u=e.z;return i&&(s?i.paper.getLayerView(s).insertSortedNode(r,u):i.el.appendChild(r)),this}}),vc={Graph:Ui,attributes:Lu,LayersNames:Jr,PaperLayer:ku,Cell:Cr,CellView:ne,Element:Je,ElementView:Ee,Link:wr,LinkView:Ls,Paper:Xg,ToolView:Ji,ToolsView:Hg,HighlighterView:Ei},bo={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,r){var i=this.getCell(e),s=r.node(e);t.setPosition?t.setPosition(i,s):i.set("position",{x:s.x-s.width/2,y:s.y-s.height/2})},importLink:function(t,e,r){var s=this.getCell(e.name),u=r.edge(e),l=u.points||[],f=new Pe(l);if(t.setVertices||t.setLinkVertices)if(Ht(t.setVertices))t.setVertices(s,l);else{f.simplify({threshold:.001});var d=f.points.map(function(b){return b.toJSON()});s.set("vertices",d.slice(1,d.length-1))}if(t.setLabels&&"x"in u&&"y"in u){var a={x:u.x,y:u.y};if(Ht(t.setLabels))t.setLabels(s,a,l);else{var o=f.closestPointLength(a),h=f.pointAtLength(o),p=o/f.length(),A=new F(a).difference(h).toJSON();s.label(0,{position:{distance:p,offset:A}})}}},layout:function(t,e){var r;r=t instanceof Ui?t:(new Ui).resetCells(t,{dry:!0,sort:!1}),t=null;var i=(e=Mn(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===i)throw new Error('The the "dagre" utility is a mandatory dependency.');var s=bo.toGraphLib(r,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(a){return a.id}}),u={},l=e.marginX||0,f=e.marginY||0;if(e.rankDir&&(u.rankdir=e.rankDir),e.align&&(u.align=e.align),e.nodeSep&&(u.nodesep=e.nodeSep),e.edgeSep&&(u.edgesep=e.edgeSep),e.rankSep&&(u.ranksep=e.rankSep),e.ranker&&(u.ranker=e.ranker),l&&(u.marginx=l),f&&(u.marginy=f),s.setGraph(u),i.layout(s,{debugTiming:!!e.debugTiming}),r.startBatch("layout"),bo.fromGraphLib(s,{importNode:this.importElement.bind(r,e),importEdge:this.importLink.bind(r,e)}),e.resizeClusters){var d=s.nodes().filter(function(a){return s.children(a).length>0}).map(r.getCell.bind(r)).sort(function(a,o){return o.getAncestors().length-a.getAncestors().length});Fn(d,"fitEmbeds",{padding:e.clusterPadding})}r.stopBatch("layout");var n=s.graph();return new pt(l,f,Math.abs(n.width-2*l),Math.abs(n.height-2*f))},fromGraphLib:function(t,e){var r=(e=e||{}).importNode||sr,i=e.importEdge||sr,s=this instanceof Ui?this:new Ui;return t.nodes().forEach(function(u){r.call(s,u,t,s,e)}),t.edges().forEach(function(u){i.call(s,u,t,s,e)}),s},toGraphLib:function(t,e){var r=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===r)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var i=bu(e,"directed","compound","multigraph"),s=new r.Graph(i),u=e.setNodeLabel||sr,l=e.setEdgeLabel||sr,f=e.setEdgeName||sr,d=t.get("cells"),n=0,a=d.length;n<a;n++){var o=d.at(n);if(o.isLink()){var h=o.get("source"),p=o.get("target");if(!h.id||!p.id)break;s.setEdge(h.id,p.id,l(o),f(o))}else if(s.setNode(o.id,u(o)),s.isCompound()&&o.has("parent")){var A=o.get("parent");d.has(A)&&s.setParent(o.id,A)}}return s}};Ui.prototype.toGraphLib=function(t){return bo.toGraphLib(this,t)},Ui.prototype.fromGraphLib=function(t,e){return bo.fromGraphLib.call(this,t,e)};var vi={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[t];if(void 0!==r)return r;try{r=e()}catch(i){r=!1}return this._results[t]=r,r}},ge=Je.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),Uu=ge.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),Qe=Ee.extend({presentationAttributes:Ee.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=Ee.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),nr=ge.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Vu=ge.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Jg=ge.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),Kg=ge.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Qg=ge.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),qg=ge.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),Qf=ge.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),$g=Qf.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),xo=vi.test("svgforeignobject"),No=ge.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',xo?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),ge.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Mt({},e),div:{style:Mt({},e)}})},updateContent:function(t,e){this.attr(xo?{".content":{html:pu(e)}}:{".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),pc=Ee.extend({presentationAttributes:xo?Ee.prototype.presentationAttributes:Ee.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=Ee.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var r=this.model;if(xo)Ee.prototype.update.call(this,r,e);else{var i=Pi(e||r.get("attrs"),".content");Ee.prototype.update.call(this,r,i),(!e||hi(e,".content"))&&this.updateContent(r,e)}},updateContent:function(t,e){var r=dr({},(e||t.get("attrs"))[".content"]);r=Pi(r,"text");var i=Ml(t.get("content"),t.get("size"),r,{svgDocument:this.paper.svg}),s=fu({},".content",r,"/");s[".content"].text=i,Ee.prototype.update.call(this,t,s)}}),td={Generic:ge,Rect:Uu,TextView:Qe,Text:nr,Circle:Vu,Ellipse:Jg,Polygon:Kg,Polyline:Qg,Image:qg,Path:Qf,Rhombus:$g,TextBlock:No,TextBlockView:pc},qf=Je.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Xu=Je.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Hn=Je.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Ps=Je.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),ed=Je.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),rd=Je.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),nd=Je.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),id=Je.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),ad=Je.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),$f=Je.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ki=Je.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),th=Je.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var r=Vr(t);return this.attr({body:{lateralArea:t},top:r?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t}},e)}},{attributes:{lateralArea:{set:function(t,e){var r=Vr(t);r&&(t=parseFloat(t)/100);var i=e.x,s=e.y,u=e.width,l=e.height,d=r?l*t:t,n=it.KAPPA,a=n*(u/2),o=n*(r?l*t:t),p=i+u/2,A=i+u,b=s+d,T=b-d,P=s+l-d,G=s+l;return{d:["M",i,b,"L",i,P,"C",i,P+o,p-a,G,p,G,"C",p+a,G,A,P+o,A,P,"L",A,b,"C",A,b-o,p+a,T,p,T,"C",p-a,T,i,b-o,i,b,"Z"].join(" ")}}}}}),sd=vi.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Ce=Je.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},sd]},{attributes:{text:{set:function(t,e,r,i){if(!(r instanceof HTMLElement)){var s=i.style||{},u={text:t,width:-5,height:"100%"},l=Mt({textVerticalAnchor:"middle"},s);return Lu.textWrap.set.call(this,u,e,r,l),{fill:s.color||null}}r.textContent=t},position:function(t,e,r){if(r instanceof SVGElement)return e.center()}}}}),ud={Rectangle:qf,Circle:Xu,Ellipse:Hn,Path:Ps,Polygon:ed,Polyline:rd,Image:nd,BorderedImage:id,EmbeddedImage:ad,InscribedImage:$f,HeaderedRectangle:Ki,Cylinder:th,TextBlock:Ce,Link:wr.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),DoubleLink:wr.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ShadowLink:wr.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]})},mc=ge.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){ge.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,r){var i=ja(this.get("inPorts")),s=co(ja(this.get("outPorts")),i),u=this.createPortItems("in",i),l=this.createPortItems("out",s);this.prop("ports/items",u.concat(l),Mt({rewrite:!0},r))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return qt(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,r){var i=this.get(e);return this.set(e,Array.isArray(i)?i.concat(t):[t],r)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,r){return this.set(e,wu(this.get(e),t),r)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,r){return this.prop("ports/groups/"+t,Xe(e)?e:{},r)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),ld=mc.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),cd=mc.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),hd={Model:mc,Atomic:ld,Coupled:cd,Link:wr.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}})},Ju=ge.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),Ic=Ju.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),gd=Ic.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),dd=Ic.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),Ac=Ju.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),Ua=Ju.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),vd=Ac.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),yc=Ac.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),pd=Ua.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),Cc=Ua.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),md=Ua.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),Id=Ua.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),Ad=Ua.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),Pr=Ua.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),yd={Gate:Ju,IO:Ic,Input:gd,Output:dd,Gate11:Ac,Gate21:Ua,Repeater:vd,Not:yc,Or:pd,And:Cc,Nor:md,Nand:Id,Xor:Ad,Xnor:Pr,Wire:wr.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")})},Ld={KingWhite:ge.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),KingBlack:ge.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),QueenWhite:ge.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),QueenBlack:ge.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),RookWhite:ge.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),RookBlack:ge.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),BishopWhite:ge.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),BishopBlack:ge.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),KnightWhite:ge.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),KnightBlack:ge.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),PawnWhite:ge.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),PawnBlack:ge.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'})},oh=Je.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Dd=oh.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),uh=Je.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),ks=uh.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),Mo=Je.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),Pd=Mo.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),kd=Mo.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),Ed=Mo.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),zd=Mo.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),lh=Je.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),ch=wr.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),Od={Entity:oh,WeakEntity:Dd,Relationship:uh,IdentifyingRelationship:ks,Attribute:Mo,Multivalued:Pd,Derived:kd,Key:Ed,Normal:zd,ISA:lh,Line:ch},Zd={State:Vu.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),StartState:Je.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),EndState:Je.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Arrow:wr.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0})},Yd={Member:Je.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Arrow:wr.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1})},Fd=ge.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),Ud=Ee.extend({presentationAttributes:Ee.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:Ee.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];var i=(t=Ee.prototype.confirmUpdate).call.apply(t,[this].concat(e));return this.hasFlag(i,"TOKENS")&&(this.renderTokens(),this.update(),i=this.removeFlag(i,"TOKENS")),i},renderTokens:function(){var t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(r){t.removeClass(r)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(it("circle"));break;case 2:t.addClass("two"),t.append([it("circle"),it("circle")]);break;case 3:t.addClass("three"),t.append([it("circle"),it("circle"),it("circle")]);break;default:t.addClass("alot"),t.append(it("text").text(e+""))}}}),Hd={Place:Fd,PlaceView:Ud,Transition:ge.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Link:wr.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}})},wc=ge.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),ge.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],r=0;e.forEach(function(i){var s=Array.isArray(i.text)?i.text:[i.text],u=20*s.length+20;t[".uml-class-"+i.type+"-text"].text=s.join("\n"),t[".uml-class-"+i.type+"-rect"].height=u,t[".uml-class-"+i.type+"-rect"].transform="translate(0,"+r+")",r+=u})}}),bc=Ee.extend({initialize:function(){Ee.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),Jd=wc.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Kd=bc,Qd=wc.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),qd=bc,$d=wr.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),tv=wr.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),ev=wr.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),rv=wr.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),nv=wr.define("uml.Association"),xc=ge.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),ge.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),sv={basic:td,standard:ud,devs:hd,logic:yd,chess:Ld,erd:Od,fsa:Zd,org:Yd,pn:Hd,uml:{Class:wc,ClassView:bc,Abstract:Jd,AbstractView:Kd,Interface:Qd,InterfaceView:qd,Generalization:$d,Implementation:tv,Aggregation:ev,Composition:rv,Association:nv,State:xc,StartState:Vu.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),EndState:ge.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Transition:wr.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}})}};function Ku(t,e){return 0===e?"0%":Math.round(t/e*100)+"%"}function gh(t){return function(e,r,i,s){return(r.isNodeConnection(i)?uv:ov)(t,e,r,i,s)}}function ov(t,e,r,i,s){var u=r.model.angle(),l=r.getNodeUnrotatedBBox(i),f=r.model.getBBox().center();s.rotate(f,u);var d=s.x-l.x,n=s.y-l.y;return t&&(d=Ku(d,l.width),n=Ku(n,l.height)),e.anchor={name:"topLeft",args:{dx:d,dy:n,rotate:!0}},e}function uv(t,e,r,i,s){var u=r.getConnection();if(!u)return e;var l=u.closestPointLength(s);if(t){var f=u.length();e.anchor={name:"connectionRatio",args:{ratio:l/f}}}else e.anchor={name:"connectionLength",args:{length:l}};return e}var Dn=sr,Nc=gh(!1),dh=gh(!0),lv={useDefaults:Dn,pinAbsolute:Nc,pinRelative:dh};function vh(t,e,r){return dh.call(this.paper,{},e,r,t,this.model).anchor}function Qu(t,e){var r=t.model;return e?r.getBBox():r.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var ph=Vn.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),Mc=Ji.extend({name:"vertices",options:{handleClass:ph,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,r=t.length;e<r;e++)t[e].remove()},renderHandles:function(){for(var t=this,r=this.relatedView.model.vertices(),i=0,s=r.length;i<s;i++){var u=r[i],l=new this.options.handleClass({index:i,paper:this.paper,guard:function(f){return t.guard(f)}});l.render(),l.position(u.x,u.y),this.simulateRelatedView(l.el),l.vel.appendTo(this.el),this.handles.push(l),this.startHandleListening(l)}},updateHandles:function(){for(var e=this.relatedView.model.vertices(),r=0,i=e.length;r<i;r++){var s=e[r],u=this.handles[r];if(!u)return;u.position(s.x,s.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,r=e.model.vertices(),s=t<r.length-1?r[t+1]:e.targetAnchor;return{prev:new F(t>0?r[t-1]:e.sourceAnchor),next:new F(s)}},onHandleWillChange:function(t,e){this.focus();var i=this.relatedView,s=this.options;i.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),s.stopPropagation||i.notifyPointerdown.apply(i,i.paper.getPointerArgs(e))},onHandleChanging:function(t,e){var i=this.options,s=this.relatedView,u=t.options.index,l=s.paper.getPointerArgs(e),f=l[0],d=l[1],n=l[2],a={x:d,y:n};this.snapVertex(a,u),s.model.vertex(u,a,{ui:!0,tool:this.cid}),t.position(a.x,a.y),i.stopPropagation||s.notifyPointermove(f,d,n)},onHandleChanged:function(t,e){var i=this.options,s=this.relatedView;if(i.vertexAdding&&this.updatePath(),i.redundancyRemoval){s.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),s.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&s.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var l=s.paper.getPointerArgs(e),f=l[0];i.stopPropagation||s.notifyPointerup(f,l[1],l[2]),s.checkMouseleave(f)}},snapVertex:function(t,e){var r=this.options.snapRadius;if(r>0){var i=this.getNeighborPoints(e),s=i.prev,u=i.next;Math.abs(t.x-s.x)<r?t.x=s.x:Math.abs(t.x-u.x)<r&&(t.x=u.x),Math.abs(t.y-s.y)<r?t.y=i.prev.y:Math.abs(t.y-u.y)<r&&(t.y=u.y)}},onHandleRemove:function(t,e){var i=this.relatedView;i.model.removeVertex(t.options.index,{ui:!0}),this.options.vertexAdding&&this.updatePath(),i.checkMouseleave(Ne(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=Ne(t),r=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),i=this.relatedView;i.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var s=i.getVertexIndex(r.x,r.y);this.snapVertex(r,s),i.model.insertVertex(s,r,{ui:!0,tool:this.cid}),this.update();var u=this.handles[s];this.eventData(e,{vertexAdded:!0}),u.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:ph}),mh=Vn.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,r,i){var s=it.createSVGMatrix().translate(t,e).rotate(r),u=this.childNodes.handle;u.setAttribute("transform",it.matrixToTransformString(s)),u.setAttribute("cursor",r%180==0?"row-resize":"col-resize");var l=i.getClosestPoint(new F(t,e)),f=this.childNodes.line;f.setAttribute("x1",t),f.setAttribute("y1",e),f.setAttribute("x2",l.x),f.setAttribute("y2",l.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),fv=Ji.extend({name:"segments",precision:.5,options:{handleClass:mh,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:vh,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var r=0,i=e.length;r<i-1;r++){var l=this.renderHandle(e[r],e[r+1]);this.simulateRelatedView(l.el),this.handles.push(l),l.options.index=r}return this},renderHandle:function(t,e){var r=this,i=new this.options.handleClass({paper:this.paper,guard:function(s){return r.guard(s)}});return i.render(),this.updateHandle(i,t,e),i.vel.appendTo(this.el),this.startHandleListening(i),i},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,r=t.length;e<r;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,r=0,i=e.length;r<i;r++)e[r].options.index+=t},resetAnchor:function(t,e){var r=this.relatedView.model;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):r.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,r){var i=t.options.index,l=this.relatedView.model.vertices(),f=t.options.axis,d=l[i-2]||r.sourceAnchor,n=l[i+1]||r.targetAnchor,a=this.options.snapRadius;return Math.abs(e[f]-d[f])<a?e[f]=d[f]:Math.abs(e[f]-n[f])<a&&(e[f]=n[f]),e},onHandleChanging:function(t,e){var i=this.options,s=this.eventData(e),u=this.relatedView,l=u.paper,f=t.options.index-1,d=Ne(e),n=l.snapToGrid(d.clientX,d.clientY),a=this.snapHandle(t,n.clone(),s),o=t.options.axis,h=this.options.snapHandle?0:n[o]-a[o],p=u.model,A=Xr(p.vertices()),b=A[f],T=A[f+1],P=this.options.anchor;"function"!=typeof P&&(P=null);var G=u.sourceView,m=u.sourceBBox,w=!1,M=!1;if(b?0===f?m.containsPoint(b)?(A.shift(),this.shiftHandleIndexes(-1),w=!0):(b[o]=a[o],M=!0):b[o]=a[o]:((b=u.sourceAnchor.toJSON())[o]=a[o],m.containsPoint(b)?(b[o]=a[o],w=!0):(A.unshift(b),this.shiftHandleIndexes(1),M=!0)),P&&G){if(w){var E=s.sourceAnchor.clone();E[o]=a[o];var j=P.call(u,E,G,u.sourceMagnet||G.el,"source",u);this.resetAnchor("source",j)}M&&this.resetAnchor("source",s.sourceAnchorDef)}var Y=u.targetView,B=u.targetBBox,H=!1,et=!1;if(T?f===A.length-2?B.containsPoint(T)?(A.pop(),H=!0):(T[o]=a[o],et=!0):T[o]=a[o]:((T=u.targetAnchor.toJSON())[o]=a[o],B.containsPoint(T)?H=!0:(A.push(T),et=!0)),P&&Y){if(H){var at=s.targetAnchor.clone();at[o]=a[o];var ft=P.call(u,at,Y,u.targetMagnet||Y.el,"target",u);this.resetAnchor("target",ft)}et&&this.resetAnchor("target",s.targetAnchorDef)}p.vertices(A,{ui:!0,tool:this.cid}),this.updateHandle(t,b,T,h),i.stopPropagation||u.notifyPointermove(d,n.x,n.y)},onHandleChangeStart:function(t,e){var r=this,i=r.options,s=r.handles,u=r.relatedView,l=u.model,f=u.paper,d=t.options.index;if(Array.isArray(s)){for(var n=0,a=s.length;n<a;n++)n!==d&&s[n].hide();this.focus(),this.eventData(e,{sourceAnchor:u.sourceAnchor.clone(),targetAnchor:u.targetAnchor.clone(),sourceAnchorDef:en(l.prop(["source","anchor"])),targetAnchorDef:en(l.prop(["target","anchor"]))}),l.startBatch("segment-move",{ui:!0,tool:this.cid}),i.stopPropagation||u.notifyPointerdown.apply(u,f.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){var i=this.options,s=this.relatedView,u=s.paper,l=s.model;i.redundancyRemoval&&s.removeRedundantLinearVertices({ui:!0,tool:this.cid});var f=Ne(e),d=u.snapToGrid(f.clientX,f.clientY);this.render(),this.blur(),l.stopBatch("segment-move",{ui:!0,tool:this.cid}),i.stopPropagation||s.notifyPointerup(f,d.x,d.y),s.checkMouseleave(f)},updateHandle:function(t,e,r,i){var s=Math.abs(e.x-r.x)<this.precision,u=Math.abs(e.y-r.y)<this.precision;if(s||u){var l=new It(e,r);if(l.length()<this.options.segmentLengthThreshold)t.hide();else{var d=l.midpoint(),n=s?"x":"y";d[n]+=i||0;var a=l.vector().vectorAngle(new F(1,0));t.position(d.x,d.y,a,this.relatedView),t.show(),t.options.axis=n}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:mh}),Ih=Ji.extend({tagName:"path",xAxisVector:new F(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var i,s,t=this.ratio,e=this.relatedView,r=e.getTangentAtRatio(t);if(r?(i=r.start,s=r.vector().vectorAngle(this.xAxisVector)||0):(i=e.getPointAtRatio(t),s=0),!i)return this;var u=it.createSVGMatrix().translate(i.x,i.y).rotate(s);return this.vel.transform(u,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=Ne(t),r=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,r.x,r.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,r=e.paper,i=Ne(t),s=r.snapToGrid(i.clientX,i.clientY);e.pointerup(i,s.x,s.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),hv=Ih.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Ah=Ih.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),qu=Ji.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){var r=this.vel,i=this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix();r.transform(i,{absolute:!0})},getElementMatrix:function(){var r=this.relatedView,i=this.options,s=i.x;void 0===s&&(s=0);var u=i.y;void 0===u&&(u=0);var l=i.offset;void 0===l&&(l={});var d=i.rotate,n=Qu(r,i.useModelGeometry),a=r.model.angle();d||(n=n.bbox(a));var o=l.x;void 0===o&&(o=0);var h=l.y;void 0===h&&(h=0),Vr(s)&&(s=parseFloat(s)/100*n.width),Vr(u)&&(u=parseFloat(u)/100*n.height);var p=it.createSVGMatrix().translate(n.x+n.width/2,n.y+n.height/2);return d&&(p=p.rotate(a)),p.translate(s+o-n.width/2,u+h-n.height/2)},getLinkMatrix:function(){var r=this.relatedView,i=this.options,s=i.offset;void 0===s&&(s=0);var u=i.distance;void 0===u&&(u=0);var f,d,n,l=i.rotate;(f=Vr(u)?r.getTangentAtRatio(parseFloat(u)/100):r.getTangentAtLength(u))?(d=f.start,n=f.vector().vectorAngle(new F(1,0))||0):(d=r.getConnection().start,n=0);var a=it.createSVGMatrix().translate(d.x,d.y).rotate(n).translate(0,s);return l||(a=a.rotate(-n)),a},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),yh=qu.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,r){e.model.remove({ui:!0,tool:r.cid})}}}),Ch=qu.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:function(t){return t.el},action:function(t,e,r){return r.dragstart(t)}},getMagnetNode:function(){var u,i=this.relatedView,s=this.options.magnet;switch(typeof s){case"function":u=s.call(this,i,this);break;case"string":u=i.findBySelector(s)[0];break;default:u=s}if(u||(u=i.el),u instanceof SVGElement)return u;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){var r=this.paper,i=this.relatedView,s=Ne(t),u=r.clientToLocalPoint(s.clientX,s.clientY),l=u.x,f=u.y;i.dragLinkStart(s,this.getMagnetNode(),l,f),r.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.focus()},drag:function(t){var r=this.paper,i=this.relatedView,s=Ne(t),u=r.snapToGrid(s.clientX,s.clientY);i.dragLink(s,u.x,u.y)},dragend:function(t){var r=this.paper,i=this.relatedView,s=Ne(t),u=r.snapToGrid(s.clientX,s.clientY);i.dragLinkEnd(s,u.x,u.y),this.undelegateDocumentEvents(),r.delegateEvents(),this.blur(),i.checkMouseleave(s)}}),$u=Ji.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){var t=this,e=t.relatedView,r=t.options,i=t.vel,s=r.useModelGeometry,u=r.rotate,l=ga(r.padding),f=Qu(e,s).moveAndExpand({x:-l.left,y:-l.top,width:l.left+l.right,height:l.top+l.bottom}),d=e.model;if(d.isElement()){var n=d.angle();if(n)if(u){var a=d.getBBox().center();i.rotate(n,a.x,a.y,{absolute:!0})}else f=f.bbox(n)}return i.attr(f.toJSON()),this}}),tl=Ji.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick",dbltap:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function cv(t,e,r,i,s,u){var l=u.options.snapRadius,f="source"===i,n=this.model.vertex(f?0:-1)||this.getEndAnchor(f?"target":"source");return n&&(Math.abs(n.x-t.x)<l&&(t.x=n.x),Math.abs(n.y-t.y)<l&&(t.y=n.y)),t},anchor:vh,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){return this.relatedView.getEndView(this.type)?(this.updateAnchor(),this.updateArea(),this.el.style.display=""):this.el.style.display="none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var r=this.relatedView,i=this.type,s=r.getEndAnchor(i),u=this.options,l=r.model.prop([i,"anchor"]);e.setAttribute("transform","translate("+s.x+","+s.y+")");var f=l?u.customAnchorAttributes:u.defaultAnchorAttributes;for(var d in f)e.setAttribute(d,f[d])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var d,n,a,r=this.relatedView,i=this.type,s=r.getEndView(i),u=s.model,l=r.getEndMagnet(i),f=this.options.areaPadding;isFinite(f)||(f=0),s.isNodeConnection(l)?(n=0,a=(d=s.getBBox()).center()):(d=s.getNodeUnrotatedBBox(l),n=u.angle(),a=d.center(),n&&a.rotate(u.getBBox().center(),-n)),d.inflate(f),e.setAttribute("x",-d.width/2),e.setAttribute("y",-d.height/2),e.setAttribute("width",d.width),e.setAttribute("height",d.height),e.setAttribute("transform","translate("+a.x+","+a.y+") rotate("+n+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,r=this.relatedView.model;t?r.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):r.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e=this.relatedView,r=this.type,i=e.getEndView(r),s=i.model,u=e.getEndMagnet(r),l=Ne(t),f=this.paper.clientToLocalPoint(l.clientX,l.clientY),d=this.options.snap;if("function"==typeof d&&(f=d.call(e,f,i,u,r,e,this),f=new F(f)),this.options.restrictArea)if(i.isNodeConnection(u)){var n=i.getClosestPoint(f);n&&(f=n)}else{var a=i.getNodeUnrotatedBBox(u),o=s.angle(),h=s.getBBox().center(),p=f.clone().rotate(h,o);a.containsPoint(p)||(f=a.pointNearestToPoint(p).rotate(h,-o))}var A,b=this.options.anchor;"function"==typeof b&&(A=b.call(e,f,i,u,r,e)),this.resetAnchor(A),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(Xr(t)),this.update())}}),vv={Vertices:Mc,Segments:fv,SourceArrowhead:Ah,TargetArrowhead:hv,SourceAnchor:tl.extend({name:"source-anchor",type:"source"}),TargetAnchor:tl.extend({name:"target-anchor",type:"target"}),Button:qu,Remove:yh,Connect:Ch,Boundary:$u},pv=Ji.extend({tagName:"g",children:[{tagName:"circle",selector:"handle",attributes:{cursor:"pointer","stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6}},{tagName:"rect",selector:"extras",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick",dbltap:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{handleAttributes:null,selector:"root",padding:6},getPosition:function(){},setPosition:function(){},resetPosition:function(){},onRender:function(){this.renderChildren(),this.toggleExtras(!1),this.update()},update:function(){var t=this.childNodes,e=t.handle,r=t.extras;if(!e)throw new Error("Control: markup selector `handle` is required");return this.updateHandle(e),r&&this.updateExtras(r),this},updateHandle:function(t){var r=this.relatedView,i=this.options,s=r.model,u=this.getPosition(r,this),l=s.getAbsolutePointFromRelative(u);t.setAttribute("transform","translate("+l.x+","+l.y+")");var f=i.handleAttributes;if(f)for(var d in f)t.setAttribute(d,f[d])},updateExtras:function(t){var r=this.relatedView,i=this.options,u=this.options.selector;if(u){var f=r.findBySelector(u)[0];if(!f)throw new Error("Control: invalid selector.");var d=i.padding;isFinite(d)||(d=0);var n=r.getNodeUnrotatedBBox(f),a=r.model,o=a.angle(),h=n.center();o&&h.rotate(a.getBBox().center(),-o),n.inflate(d),t.setAttribute("x",-n.width/2),t.setAttribute("y",-n.height/2),t.setAttribute("width",n.width),t.setAttribute("height",n.height),t.setAttribute("transform","translate("+h.x+","+h.y+") rotate("+o+")")}else this.toggleExtras(!1)},toggleExtras:function(t){var r=this.childNodes.extras;!r||(r.style.display=t?"":"none")},onPointerDown:function(t){var r=this.relatedView,i=this.paper;this.guard(t)||(t.stopPropagation(),t.preventDefault(),i.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleExtras(!0),r.model.startBatch("control-move",{ui:!0,tool:this.cid}))},onPointerMove:function(t){var r=this.relatedView,i=this.paper,s=r.model,u=Ne(t),d=i.clientToLocalPoint(u.clientX,u.clientY),n=s.getRelativePointFromAbsolute(d);this.setPosition(r,n,this),this.update()},onPointerUp:function(t){var r=this.relatedView;this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleExtras(!1),r.model.stopBatch("control-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){this.resetPosition(this.relatedView,this),this.update()}}),mv={Button:qu,Remove:yh,Connect:Ch,Boundary:$u,Control:pv},Av=it,Cv={DirectedGraph:bo,PortLabel:Hl,Port:Fl};R.V=it,R.Vectorizer=Av,R.anchors=Xt,R.config=Yn,R.connectionPoints=dc,R.connectionStrategies=lv,R.connectors=uc,R.dia=vc,R.elementTools=mv,R.env=vi,R.format={},R.g=tn,R.highlighters=Uf,R.layout=Cv,R.linkAnchors=lc,R.linkTools=vv,R.mvc=pf,R.routers=Lf,R.setTheme=function(t,e){Fn(Vi,"setTheme",t,e=e||{}),Vn.prototype.defaultTheme=t},R.shapes=sv,R.ui={},R.util=zh,R.version="3.5.2",Object.defineProperty(R,"__esModule",{value:!0})}),"undefined"!=typeof joint)var g=joint.g,V=joint.V,Vectorizer=joint.V;