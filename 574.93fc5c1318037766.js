(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[574],{76574:(P,Y,f)=>{"use strict";f.r(Y),f.d(Y,{CourseModule:()=>jl});var p={};f.r(p),f.d(p,{ellipseWithEllipse:()=>D,ellipseWithLine:()=>So,exists:()=>Sn,lineWithLine:()=>xi,pathWithEllipse:()=>le,pathWithLine:()=>ce,pathWithPath:()=>ke,pathWithPolygon:()=>Qe,pathWithPolyline:()=>Be,pathWithRect:()=>Ae,polygonWithEllipse:()=>w,polygonWithLine:()=>x,polygonWithPolygon:()=>X,polygonWithPolyline:()=>H,polygonWithRect:()=>R,polylineWithEllipse:()=>Ce,polylineWithLine:()=>Me,polylineWithPolyline:()=>h,polylineWithRect:()=>l,rectWithEllipse:()=>se,rectWithLine:()=>Q,rectWithRect:()=>pe});var g={};f.r(g),f.d(g,{Curve:()=>pn,Ellipse:()=>Xn,Line:()=>vt,Path:()=>Tt,Point:()=>me,Polygon:()=>Qt,Polyline:()=>dn,Rect:()=>at,bezier:()=>Wo,ellipse:()=>Oa,intersection:()=>yr,line:()=>vi,normalizeAngle:()=>Ln,point:()=>jn,random:()=>xo,rect:()=>_o,scale:()=>yo,snapToGrid:()=>ui,toDeg:()=>Ji,toRad:()=>Nn,types:()=>$t});var S={};f.r(S),f.d(S,{absolute:()=>Df,bottom:()=>Ua,ellipse:()=>Ci,ellipseSpread:()=>Zs,fn:()=>Ff,left:()=>ws,line:()=>Js,right:()=>Zl,top:()=>J});var E={};f.r(E),f.d(E,{bottom:()=>zf,inside:()=>Wf,insideOriented:()=>Gf,left:()=>Bf,manual:()=>Vf,outside:()=>Uf,outsideOriented:()=>Io,radial:()=>$f,radialOriented:()=>Yf,right:()=>Hf,top:()=>jf});var b={};f.r(b),f.d(b,{manhattan:()=>As,metro:()=>Qu,normal:()=>Mr,oneSide:()=>Hu,orthogonal:()=>zu});var M={};f.r(M),f.d(M,{curve:()=>Ms,jumpover:()=>qu,normal:()=>mc,rounded:()=>lu,smooth:()=>yc});var O={};f.r(O),f.d(O,{addClass:()=>dd,mask:()=>Tc,opacity:()=>qa,stroke:()=>Sc});var k={};f.r(k),f.d(k,{connectionClosest:()=>Ac,connectionLength:()=>Pc,connectionPerpendicular:()=>pu,connectionRatio:()=>Ec,resolveRef:()=>ea});var j={};f.r(j),f.d(j,{anchor:()=>Lc,bbox:()=>pd,boundary:()=>Lo,rectangle:()=>gd});var z={};f.r(z),f.d(z,{bottom:()=>yu,bottomLeft:()=>Nc,bottomRight:()=>Fr,center:()=>ns,left:()=>ul,midSide:()=>yd,modelCenter:()=>Rc,perpendicular:()=>md,right:()=>_a,top:()=>Bt,topLeft:()=>vd,topRight:()=>ll});var N=f(69808),K=f(32205),re=f(6741),fe=f(80998),i=f(5e3),ue=f(23146),ge=f(83936),he=f(25635),ee=f(93075),ve=f(9419),Ie=f(66206),De=f(99848);let C=(()=>{class e{transform(t,r){return t.is_teacher||r.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function He(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,t))}}function Je(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,He,3,5,"ng-container",6),i.\u0275\u0275pipe(2,"tuiFilter"),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function Ke(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const tt=function(){return[0,0,0,0,0,0]};function it(e,n){1&e&&i.\u0275\u0275template(0,Ke,2,1,"ng-container",6),2&e&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,tt))}let dt=(()=>{class e{constructor(t,r,a){this.authenticationService=t,this.route=r,this.courseService=a,this.STATUS=fe.Q,this.courseNameSearch="",this.matchCourseName=(u,c)=>""===c||u.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(re.gz),i.\u0275\u0275directiveInject(ge.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(u){return r.courseNameSearch=u}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,Je,3,5,"ng-container",4),i.\u0275\u0275template(7,it,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&t){const a=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",a)}},directives:[he.K3,he.wU,ee.NgControlStatus,ee.NgModel,ve.be,N.O5,N.sg,Ie.V],pipes:[De.S,C],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class wt{static createNameForm(){return(new ee.FormBuilder).group({nameControl:new ee.FormControl("",[ee.Validators.required])})}static createConfirmNameForm(){return(new ee.FormBuilder).group({confirmNameControl:new ee.FormControl("")})}static createStudentNumberForm(){return(new ee.FormBuilder).group({studentNumberControl:new ee.FormControl("",[ee.Validators.required])})}static createVerifyForm(){return(new ee.FormBuilder).group({verifyControl:new ee.FormControl("",[ee.Validators.required])})}}var jt=f(4024),qt=f(769),Mt=f(46693);function Yn(e,n){1&e&&i.\u0275\u0275projection(0,0,["*ngIf","visible"])}const wr=["*"];let Sr=(()=>{class e{constructor(){this.visible=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-registration-step"]],ngContentSelectors:wr,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,Yn,1,0,"ng-content",0)),2&t&&i.\u0275\u0275property("ngIf",r.visible)},directives:[N.O5],styles:[""]}),e})();var Ne=f(52014),vn=f(28634),tr=f(34530),wn=f(14335),je=f(35640),_e=f(73442),Ze=f(33186),ht=f(41065),bt=f(84620),an=f(35379),yn=f(18583),Vn=f(92198);function si(e,n){1&e&&i.\u0275\u0275elementContainer(0)}const Kt=["*"],zt=["tuiStep",""];function B(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",4),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("src",t.icon)}}let G=(()=>{let e=class{constructor(){this.steps=vn.Mm,this.orientation="horizontal",this.activeItemIndex=0,this.activeItemIndexChange=new i.EventEmitter}get changes$(){return(0,tr.Fp)(this.steps).pipe((0,yn.g)(0))}onHorizontal(t,r){"horizontal"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,r))}onVertical(t,r){"vertical"!==this.orientation||!t.target||(t.preventDefault(),this.moveFocus(t.target,r))}indexOf(t){return(0,wn.ct)(this.steps).findIndex(({nativeElement:r})=>r===t)}isActive(t){return t===this.activeItemIndex}activate(t){this.activeItemIndex!==t&&(this.activeItemIndex=t,this.activeItemIndexChange.emit(t))}moveFocus(t,r){const a=(0,wn.ct)(this.steps).map(({nativeElement:u})=>u);(0,je.pr)(a.indexOf(t),a,r)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(t,r,a){if(1&t&&i.\u0275\u0275contentQuery(a,ie,4,i.ElementRef),2&t){let u;i.\u0275\u0275queryRefresh(u=i.\u0275\u0275loadQuery())&&(r.steps=u)}},hostVars:1,hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("keydown.arrowRight",function(u){return r.onHorizontal(u,1)})("keydown.arrowLeft",function(u){return r.onHorizontal(u,-1)})("keydown.arrowDown",function(u){return r.onVertical(u,1)})("keydown.arrowUp",function(u){return r.onVertical(u,-1)}),2&t&&i.\u0275\u0275attribute("data-orientation",r.orientation)},inputs:{orientation:"orientation",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:Kt,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,si,1,0,"ng-container",0),i.\u0275\u0275pipe(1,"async"),i.\u0275\u0275projection(2)),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.changes$))},directives:[N.O5],pipes:[N.Ov],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,Ne.gn)([(0,i.ContentChildren)((0,i.forwardRef)(()=>ie),{read:i.ElementRef})],e.prototype,"steps",void 0),(0,Ne.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-orientation"),(0,_e.TH)()],e.prototype,"orientation",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"activeItemIndex",void 0),(0,Ne.gn)([(0,i.Output)()],e.prototype,"activeItemIndexChange",void 0),(0,Ne.gn)([_e.UM],e.prototype,"changes$",null),(0,Ne.gn)([(0,i.HostListener)("keydown.arrowRight",["$event","1"]),(0,i.HostListener)("keydown.arrowLeft",["$event","-1"])],e.prototype,"onHorizontal",null),(0,Ne.gn)([(0,i.HostListener)("keydown.arrowDown",["$event","1"]),(0,i.HostListener)("keydown.arrowUp",["$event","-1"])],e.prototype,"onVertical",null),e})(),ie=(()=>{let e=class{constructor(t,r,a,u){this.stepper=a,this.elementRef=u,this.state="normal",this.icon="",this.focusVisible=!1,r.pipe((0,Vn.h)(an.y)).subscribe(()=>{this.activate()}),t.subscribe(c=>{this.focusVisible=c})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.elementRef.nativeElement)}activate(){this.stepper.activate(this.index)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ze.ku),i.\u0275\u0275directiveInject(ht.Ok),i.\u0275\u0275directiveInject(G),i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.activate()}),2&t&&(i.\u0275\u0275hostProperty("tabIndex",r.tabIndex),i.\u0275\u0275attribute("data-state",r.state),i.\u0275\u0275classProp("_focus-visible",r.focusVisible)("_active",r.isActive)("_vertical",r.isVertical))},inputs:{state:"state",icon:"icon"},features:[i.\u0275\u0275ProvidersFeature([Ze.a3,ht.Ok,Ze.ku])],attrs:zt,ngContentSelectors:Kt,decls:5,vars:1,consts:[["class","marker marker_custom",3,"src",4,"ngIf"],["src","tuiIconWarningLarge",1,"marker","marker_error"],["src","tuiIconCheckLarge",1,"marker","marker_pass"],[1,"marker","marker_index"],[1,"marker","marker_custom",3,"src"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,B,1,1,"tui-svg",0),i.\u0275\u0275element(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),i.\u0275\u0275projection(4)),2&t&&i.\u0275\u0275property("ngIf",r.icon)},directives:[N.O5,bt.P],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:0 0;font-size:inherit;line-height:inherit;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:2rem;outline:0;cursor:pointer;text-decoration:none;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:'';position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not(._active)   .marker_custom[_ngcontent-%COMP%] ~ .marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal]):not(._active)   .marker_index[_ngcontent-%COMP%]{display:none}.marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}._active[_nghost-%COMP%]   .marker_error[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=error])   .marker_error[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_pass[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=pass])   .marker_pass[_ngcontent-%COMP%]{display:none}._active[_nghost-%COMP%]   .marker_custom[_ngcontent-%COMP%], [_nghost-%COMP%]:not([data-state=normal])   .marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}"],changeDetection:0}),(0,Ne.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-state"),(0,_e.TH)()],e.prototype,"state",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"icon",void 0),(0,Ne.gn)([(0,i.HostBinding)("class._focus-visible")],e.prototype,"focusVisible",void 0),(0,Ne.gn)([(0,i.HostBinding)("class._active")],e.prototype,"isActive",null),(0,Ne.gn)([(0,i.HostBinding)("class._vertical")],e.prototype,"isVertical",null),(0,Ne.gn)([(0,i.HostBinding)("tabIndex")],e.prototype,"tabIndex",null),(0,Ne.gn)([(0,i.HostListener)("click")],e.prototype,"activate",null),e=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Inject)(Ze.ku)),(0,Ne.fM)(1,(0,i.Inject)(ht.Ok)),(0,Ne.fM)(2,(0,i.Inject)(G)),(0,Ne.fM)(3,(0,i.Inject)(i.ElementRef))],e),e})(),ye=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,bt.E]]}),e})();const We=["headerStep"];function Xe(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",2,3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t," ")}}const gt=["*"];let kt=(()=>{class e{constructor(t){this.changeDetector=t,this.steps=[],this.currentStep=0}ngAfterContentInit(){this.setStep(this.currentStep)}ngAfterContentChecked(){this.changeDetector.detectChanges()}getStep(t){return this.tuiStepComponents.toArray()[t]}setNextStep(){this.setStepComplete(this.currentStep),this.setStep(this.currentStep+1)}setPrevStep(){this.setStep(this.currentStep-1)}setStepComplete(t){this.getStep(t).state="pass",this.getStep(t).icon="tuiIconCheckLarge"}setStep(t){this.currentStep=t,this.stepComponents.toArray().forEach((r,a)=>r.visible=t===a)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-registration-stepper"]],contentQueries:function(t,r,a){if(1&t&&i.\u0275\u0275contentQuery(a,Sr,4),2&t){let u;i.\u0275\u0275queryRefresh(u=i.\u0275\u0275loadQuery())&&(r.stepComponents=u)}},viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(We,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(r.tuiStepComponents=a)}},inputs:{steps:"steps"},ngContentSelectors:gt,decls:3,vars:2,consts:[[3,"activeItemIndex","activeItemIndexChange"],["tuiStep","",3,"disabled",4,"ngFor","ngForOf"],["tuiStep","",3,"disabled"],["headerStep",""]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-stepper",0),i.\u0275\u0275listener("activeItemIndexChange",function(u){return r.currentStep=u}),i.\u0275\u0275template(1,Xe,3,2,"button",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275projection(2)),2&t&&(i.\u0275\u0275property("activeItemIndex",r.currentStep),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.steps))},directives:[G,N.sg,ie],styles:[""],changeDetection:0}),e})();var Vt=f(96063),sn=f(8871),nn=f(67795);const un=["stepper"];function Bn(e,n){1&e&&i.\u0275\u0275element(0,"div",5)}function Dn(e,n){1&e&&i.\u0275\u0275element(0,"div",6)}const Vr=function(e){return["/course",e]};function Pn(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",7),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8)(4,"a",9),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,Vr,t.courseId))}}function Hn(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",10),i.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Fn(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"tui-input",26),i.\u0275\u0275text(3," Student Number\xa0"),i.\u0275\u0275element(4,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",27),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0))}function Wn(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"tui-input",28),i.\u0275\u0275text(3," Please confirm that this is your name.\xa0"),i.\u0275\u0275element(4,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tui-field-error",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("readOnly",!0)("tuiTextfieldCleaner",!0))}function dr(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Attempts Remaining: ",t.attemptsRemaining," ")}}function Br(e,n){1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1," You don't have any attempts remaining! Contact your instructor. "),i.\u0275\u0275elementEnd())}const nr=function(){return["Enter Name","Confirm Identity","Verification","Registered"]};function Zn(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",11),i.\u0275\u0275text(2," Before completing registration, make sure you are also registered in the same class on Canvas. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"app-course-registration-stepper",12,13)(5,"app-course-registration-step")(6,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onNameFormSubmit()}),i.\u0275\u0275elementStart(7,"div",15)(8,"tui-input",16),i.\u0275\u0275text(9," Enter your full name as it appears on Canvas\xa0"),i.\u0275\u0275element(10,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",8)(13,"button",19),i.\u0275\u0275text(14," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",20),i.\u0275\u0275text(16," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(17,"app-course-registration-step")(18,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onConfirmationFormSubmit()}),i.\u0275\u0275template(19,Fn,6,1,"ng-container",1),i.\u0275\u0275template(20,Wn,6,2,"ng-container",1),i.\u0275\u0275elementStart(21,"div",8)(22,"button",21),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275reference(4).setPrevStep()}),i.\u0275\u0275text(23,"Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"button",20),i.\u0275\u0275text(25," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(26,"app-course-registration-step")(27,"form",14),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onVerificationFormSubmit()}),i.\u0275\u0275elementStart(28,"div",15)(29,"tui-input",22),i.\u0275\u0275text(30," Verification Code\xa0"),i.\u0275\u0275element(31,"span",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(32,"tui-field-error",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"div",24)(34,"tui-notification",25),i.\u0275\u0275template(35,dr,2,1,"span",1),i.\u0275\u0275template(36,Br,2,0,"span",1),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(37,"div",8)(38,"button",19),i.\u0275\u0275text(39," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(40,"button",20),i.\u0275\u0275text(41," Next "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(42,"app-course-registration-step")(43,"p",15),i.\u0275\u0275text(44,"Registration Complete."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"div",8)(46,"button",19),i.\u0275\u0275text(47," Prev "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(48,"a",9),i.\u0275\u0275text(49," Open Course "),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("steps",i.\u0275\u0275pureFunction0(19,nr)),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.nameForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",t.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.needsStudentNumber?t.studentNumberForm:t.confirmNameForm),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.needsStudentNumber),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.needsStudentNumber),i.\u0275\u0275advance(4),i.\u0275\u0275property("showLoader",t.loadingContent),i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.verifyForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("textMask",t.verificationNumberMask)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275propertyInterpolate("status",t.attemptsRemaining<3?"error":"info"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.attemptsRemaining>=1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.attemptsRemaining<1),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("showLoader",t.loadingContent),i.\u0275\u0275advance(6),i.\u0275\u0275property("disabled",!0),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(20,Vr,t.courseId))}}function go(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Bn,1,0,"div",3),i.\u0275\u0275template(4,Dn,1,0,"div",4),i.\u0275\u0275template(5,Pn,6,3,"ng-container",1),i.\u0275\u0275template(6,Hn,3,0,"ng-container",1),i.\u0275\u0275template(7,Zn,50,22,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function Aa(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",30),i.\u0275\u0275element(2,"tui-marker-icon",31),i.\u0275\u0275elementStart(3,"h1",32),i.\u0275\u0275text(4," Unable to find the course for registration. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",33),i.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd())}let Bo=(()=>{class e{constructor(t,r,a,u){this.route=t,this.courseService=r,this.changeDetector=a,this.notificationsService=u,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.verificationNumberMask={guide:!1,mask:[/\d/,/\d/]},this.courseId=this.route.snapshot.params.courseId,this.needsStudentNumber=!1,this.loadingContent=!1}ngOnInit(){this.nameForm=wt.createNameForm(),this.confirmNameForm=wt.createConfirmNameForm(),this.studentNumberForm=wt.createStudentNumberForm(),this.verifyForm=wt.createVerifyForm(),this.getRegistrationStatus(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}getRegistrationStatus(){this.courseService.getCourseRegistrationStatus(this.courseId).subscribe(t=>{this.attemptsRemaining=null==t?void 0:t.attempts_remaining,t.status===fe.m.BLOCKED&&(this.blocked=!0),t.status===fe.m.REGISTERED&&(this.registered=!0)})}onNameFormSubmit(){this.resetFormValues();const t=this.generateCourseRegistrationRequest();!t.name||(this.needsStudentNumber=!1,this.loadingContent=!0,this.registerAndUpdateStepper(t))}onConfirmationFormSubmit(){const t=this.generateCourseRegistrationRequest();!t.name&&!t.student_number||(this.loadingContent=!0,this.registerAndUpdateStepper(t))}onVerificationFormSubmit(){const t=this.generateCourseRegistrationRequest();!t.code||(this.loadingContent=!0,this.verifyRegistrationAndUpdateStepper(t))}registerAndUpdateStepper(t){this.courseService.register(this.courseId,t).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}verifyRegistrationAndUpdateStepper(t){this.courseService.registerVerify(this.courseId,t).subscribe(r=>{r.bad_request?this.sendErrorMessage():this.setStepperStatusFromRegistration(r),this.cleanUpLoadingContent()})}cleanUpLoadingContent(){this.loadingContent=!1,this.changeDetector.detectChanges()}setStepperStatusFromRegistration(t){var r;this.serverGuessedName=null==t?void 0:t.guessed_name,this.serverGuessedName&&this.confirmNameForm.get("confirmNameControl").setValue(null==t?void 0:t.guessed_name),this.attemptsRemaining=null!==(r=null==t?void 0:t.attempts_remaining)&&void 0!==r?r:this.attemptsRemaining,t.success?this.stepper.setNextStep():0===this.stepper.currentStep&&(this.needsStudentNumber=!0,this.stepper.setNextStep())}generateCourseRegistrationRequest(){return{name:this.nameForm.value.nameControl||null,confirmed_name:this.confirmNameForm.value.confirmNameControl||null,student_number:this.studentNumberForm.value.studentNumberControl||null,code:this.verifyForm.value.verifyControl||null}}sendErrorMessage(){this.notificationsService.show("Check that your inputted values are accurate and try again.",{status:"error"}).subscribe()}resetFormValues(){this.serverGuessedName=null,this.confirmNameForm.reset(),this.studentNumberForm.reset(),this.verifyForm.reset()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(re.gz),i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(jt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(un,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(r.stepper=a.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"steps"],["stepper",""],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Full Name on Canvas","formControlName","nameControl",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","nameControl"],["appearance","secondary","aria-label","Previous","size","m","tuiButton","","type","button",1,"tui-form__button",3,"disabled"],["aria-label","Next","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],["appearance","secondary","aria-label","Previous","size","m","tuiButton","","type","button",1,"tui-form__button",3,"click"],["aria-label","Verification Code","formControlName","verifyControl",3,"textMask","tuiTextfieldCleaner"],["formControlName","verifyControl"],[1,"tui-space_top-3"],[3,"status"],["aria-label","Student Number","formControlName","studentNumberControl",3,"tuiTextfieldCleaner"],["formControlName","studentNumberControl"],["aria-label","Confirm Name","formControlName","confirmNameControl",3,"readOnly","tuiTextfieldCleaner"],["formControlName","confirmNameControl"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,go,8,10,"ng-container",1),i.\u0275\u0275template(2,Aa,7,0,"ng-container",1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.courseNotFound),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[N.O5,qt.Ls,Mt.v0,re.yS,kt,Sr,ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,he.K3,he.wU,ee.NgControlStatus,ee.FormControlName,ve.be,Vt.y,nn.hd,sn.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();var Yr=f(37080),cn=f(58259),vo=f(59695),ra=f.n(vo),mo=f(85510),Qi=f.n(mo),Ut=f(17489);const{round:ia,floor:Ti,PI:Ho}=Math,yo={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},Ln=function(e){return e%360+(e<0?360:0)},ui=function(e,n){return n*ia(e/n)},Ji=function(e){return 180*e/Ho%360},Nn=function(e,n){return(e=(n=n||!1)?e:e%360)*Ho/180},xo=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return Ti(Math.random()*(n-e+1)+e)},{cos:Ei,sin:Zi,atan2:Ma}=Math,oa=function(e,n){var t=Nn(e.y),r=Nn(n.y),c=Nn(n.x-e.x),v=Zi(c)*Ei(r),y=Ei(t)*Zi(r)-Zi(t)*Ei(r)*Ei(c),_=Ji(Ma(v,y))-22.5;return _<0&&(_+=360),["NE","E","SE","S","SW","W","NW","N"][_=parseInt(_/45)]},li=function(e,n){var t=e.x,r=e.y;return(t-=n.x)*t+(r-=n.y)*r},aa=function(e,n){return Math.sqrt(li(e,n))},$t={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:bo,cos:jo,sin:sa,sqrt:gi,min:Pi,max:Ii,atan2:Tr,round:ci,pow:ka,PI:qi}=Math,me=function(e,n){if(!(this instanceof me))return new me(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};me.fromPolar=function(e,n,t){t=new me(t);var r=bo(e*jo(n)),a=bo(e*sa(n)),u=Ln(Ji(n));return u<90?a=-a:u<180?(r=-r,a=-a):u<270&&(r=-r),new me(t.x+r,t.y+a)},me.random=function(e,n,t,r){return new me(xo(e,n),xo(t,r))},me.prototype={type:$t.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new me(e[0]);for(var t=null,r=1/0,a=0;a<n;a++){var u=new me(e[a]),c=this.squaredDistance(u);c<r&&(t=u,r=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Pi(Ii(this.x,e.x),e.x+e.width),this.y=Pi(Ii(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return oa(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new me(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new me(this.x-(e||0),this.y-(n||0))},distance:function(e){return aa(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new me((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return gi(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return bo(e.x-this.x)+bo(e.y-this.y)},move:function(e,n){var t=Nn(new me(e).theta(this));return this.offset(jo(t)*n,-sa(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new me(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new me(0,0),n=Nn(Ln(-n));var t=jo(n),r=sa(n),u=r*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=u,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=ka(10,e)}return this.x=ci(this.x*n)/n,this.y=ci(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new me(t)||new me(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=ui(this.x,e),this.y=ui(this.y,n||e),this},squaredDistance:function(e){return li(this,e)},theta:function(e){e=new me(e);var r=Tr(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*qi+r),180*r/qi},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new me(e)||new me(0,0);var n=this.x,t=this.y;return this.x=gi((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=Nn(e.theta(new me(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new me(0,0).angleBetween(this,e)}},me.prototype.translate=me.prototype.offset;const jn=me,{max:fi,min:eo}=Math,vt=function(e,n){return this instanceof vt?e instanceof vt?new vt(e.start,e.end):(this.start=new me(e),void(this.end=new me(n))):new vt(e,n)};vt.prototype={type:$t.Line,angle:function(){var e=new me(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=eo(this.start.x,this.end.x),n=eo(this.start.y,this.end.y),t=fi(this.start.x,this.end.x),r=fi(this.start.y,this.end.y);return new at(e,n,t-e,r-n)},bearing:function(){return oa(this.start,this.end)},clone:function(){return new vt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new vt(this.start,e).vector()),t=eo(1,fi(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var r=this.length();return!(new vt(n,e).length()>r||new vt(e,t).length()>r)},divideAt:function(e){var n=this.pointAt(e);return[new vt(this.start,n),new vt(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new vt(this.start,n),new vt(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof vt&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new me(this.end.x-this.start.x,this.end.y-this.start.y),t=new me(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*t.y-n.y*t.x,a=new me(e.start.x-this.start.x,e.start.y-this.start.y),u=a.x*t.y-a.y*t.x,c=a.x*n.y-a.y*n.x;if(0===r||u*r<0||c*r<0)return null;if(r>0){if(u>r||c>r)return null}else if(u<r||c<r)return null;return[new me(this.start.x+u*n.x/r,this.start.y+u*n.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return aa(this.start,this.end)},midpoint:function(){return new me((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:r}=n,a=t.clone().rotate(r,270),u=r.clone().rotate(t,90);return t.move(u,e),r.move(a,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,r=!0;e<0&&(r=!1,e=-e);var a=this.length();return e>=a?r?t.clone():n.clone():this.pointAt((r?e:a-e)/a)},pointOffset:function(e){e=new me(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return li(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAt(e),a=new vt(n,t);return a.translate(r.x-n.x,r.y-n.y),a},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAtLength(e),a=new vt(n,t);return a.translate(r.x-n.x,r.y-n.y),a},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new me(this.end.x-this.start.x,this.end.y-this.start.y)}},vt.prototype.intersection=vt.prototype.intersect;const vi=vt,{sqrt:Ai,round:Mi,pow:to}=Math,Xn=function(e,n,t){return this instanceof Xn?e instanceof Xn?new Xn(new me(e.x,e.y),e.a,e.b):(e=new me(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new Xn(e,n,t)};Xn.fromRect=function(e){return e=new at(e),new Xn(e.center(),e.width/2,e.height/2)},Xn.prototype={type:$t.Ellipse,bbox:function(){return new at(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new me(this.x,this.y)},clone:function(){return new Xn(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,r=e.end,a=this.a,u=this.b,c=e.vector(),v=t.difference(new me(this)),y=new me(c.x/(a*a),c.y/(u*u)),T=new me(v.x/(a*a),v.y/(u*u)),A=c.dot(y),_=c.dot(T),ne=_*_-A*(v.dot(T)-1);if(ne<0)return null;if(ne>0){var oe=Ai(ne),we=(-_-oe)/A,Pe=(-_+oe)/A;if((we<0||1<we)&&(Pe<0||1<Pe))return null;0<=we&&we<=1&&n.push(t.lerp(r,we)),0<=Pe&&Pe<=1&&n.push(t.lerp(r,Pe))}else{var Re=-_/A;if(!(0<=Re&&Re<=1))return null;n.push(t.lerp(r,Re))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new me(e),n&&e.rotate(new me(this.x,this.y),n);var a,t=e.x-this.x,r=e.y-this.y;if(0===t)return a=this.bbox().pointNearestToPoint(e),n?a.rotate(new me(this.x,this.y),-n):a;var u=r/t,T=Ai(1/(1/(this.a*this.a)+u*u/(this.b*this.b)));return a=new me(this.x+(T=t<0?-T:T),this.y+u*T),n?a.rotate(new me(this.x,this.y),-n):a},normalizedDistance:function(e){var n=e.x,t=e.y,r=this.a,a=this.b,u=this.x,c=this.y;return(n-u)*(n-u)/(r*r)+(t-c)*(t-c)/(a*a)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=to(10,e)}return this.x=Mi(this.x*n)/n,this.y=Mi(this.y*n)/n,this.a=Mi(this.a*n)/n,this.b=Mi(this.b*n)/n,this},tangentTheta:function(e){var _,W,t=e.x,r=e.y,a=this.a,u=this.b,c=this.bbox().center(),v=c.x,y=c.y;return t>c.x+a/2||t<c.x-a/2?W=a*a/(t-v)-a*a*(r-y)*((_=t>c.x?r-30:r+30)-y)/(u*u*(t-v))+v:_=u*u/(r-y)-u*u*(t-v)*((W=r>c.y?t+30:t-30)-v)/(a*a*(r-y))+y,new me(W,_).theta(e)},toString:function(){return new me(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Oa=Xn,{abs:ua,cos:lr,sin:Hr,min:hr,max:zo,round:ki,pow:Xr}=Math,at=function(e,n,t,r){if(!(this instanceof at))return new at(e,n,t,r);Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===r?0:r};at.fromEllipse=function(e){return e=new Xn(e),new at(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},at.fromPointUnion=function(...e){if(0===e.length)return null;const n=new me;let t,r,a,u;t=r=1/0,a=u=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const v=n.x,y=n.y;v<t&&(t=v),v>a&&(a=v),y<r&&(r=y),y>u&&(u=y)}return new at(t,r,a-t,u-r)},at.fromRectUnion=function(...e){if(0===e.length)return null;const n=new at;let t,r,a,u;t=r=1/0,a=u=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const v=n.x,y=n.y,T=v+n.width,A=y+n.height;v<t&&(t=v),T>a&&(a=T),y<r&&(r=y),A>u&&(u=A)}return new at(t,r,a-t,u-r)},at.prototype={type:$t.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,r=Nn(e),a=ua(Hr(r)),u=ua(lr(r)),c=n*u+t*a,v=n*a+t*u;return this.x+=(n-c)/2,this.y+=(t-v)/2,this.width=c,this.height=v,this},bottomLeft:function(){return new me(this.x,this.y+this.height)},bottomLine:function(){return new vt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new me(this.x+this.width/2,this.y+this.height)},center:function(){return new me(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new at(this)},containsPoint:function(e){return(e=new me(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new at(this).normalize(),t=new at(e).normalize(),r=n.width,a=n.height,u=t.width,c=t.height;if(!(r&&a&&u&&c))return!1;var v=n.x,y=n.y,T=t.x,A=t.y;return u+=T,r+=v,c+=A,a+=y,v<=T&&u<=r&&y<=A&&c<=a},corner:function(){return new me(this.x+this.width,this.y+this.height)},equals:function(e){var n=new at(this).normalize(),t=new at(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),r=e.origin(),a=e.corner();if(a.x<=n.x||a.y<=n.y||r.x>=t.x||r.y>=t.y)return null;var u=zo(n.x,r.x),c=zo(n.y,r.y);return new at(u,c,hr(t.x,a.x)-u,hr(t.y,a.y)-c)},intersectionWithLine:function(e){var u,c,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],r=[],a=[],v=t.length;for(c=0;c<v;c++)null!==(u=e.intersect(t[c]))&&a.indexOf(u.toString())<0&&(r.push(u),a.push(u.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new me(e);var r,t=new me(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var a=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],u=new vt(t,e),c=a.length-1;c>=0;--c){var v=a[c].intersection(u);if(null!==v){r=v;break}}return r&&n&&r.rotate(t,-n),r},leftLine:function(){return new vt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new me(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new at(e),n||(n=e.center());var t,r,a,u,c,v,y,T,A=n.x,_=n.y;t=r=a=u=c=v=y=T=1/0;var W=e.topLeft();W.x<A&&(t=(this.x-A)/(W.x-A)),W.y<_&&(c=(this.y-_)/(W.y-_));var ne=e.bottomRight();ne.x>A&&(r=(this.x+this.width-A)/(ne.x-A)),ne.y>_&&(v=(this.y+this.height-_)/(ne.y-_));var oe=e.topRight();oe.x>A&&(a=(this.x+this.width-A)/(oe.x-A)),oe.y<_&&(y=(this.y-_)/(oe.y-_));var we=e.bottomLeft();return we.x<A&&(u=(this.x-A)/(we.x-A)),we.y>_&&(T=(this.y+this.height-_)/(we.y-_)),{sx:hr(t,r,a,u),sy:hr(c,v,y,T)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return hr(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,r=-this.height),this.x=e,this.y=n,this.width=t,this.height=r,this},offset:function(e,n){return me.prototype.offset.call(this,e,n)},origin:function(){return new me(this.x,this.y)},pointNearestToPoint:function(e){if(e=new me(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new me(this.x+this.width,e.y);case"left":return new me(this.x,e.y);case"bottom":return new me(e.x,this.y+this.height);case"top":return new me(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new vt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new me(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Xr(10,e)}return this.x=ki(this.x*n)/n,this.y=ki(this.y*n)/n,this.width=ki(this.width*n)/n,this.height=ki(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new me(e);var t=this.x+this.width-e.x,r=e.y-this.y,u=e.x-this.x,c="left";return t<u&&(u=t,c="right"),r<u&&(u=r,c="top"),this.y+this.height-e.y<u&&(c="bottom"),c},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),r=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=r.x-t.x,this.height=r.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new vt(this.topLeft(),this.topRight())},topMiddle:function(){return new me(this.x+this.width/2,this.y)},topRight:function(){return new me(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return at.fromRectUnion(this,e)},update:function(e,n,t,r){return Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=r||0,this}},at.prototype.bottomRight=at.prototype.corner,at.prototype.topLeft=at.prototype.origin,at.prototype.translate=at.prototype.offset;const _o=at;function Co(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),r=t.length;for(let a=0;a<r;a+=2)n.push({x:+t[a],y:+t[a+1]});return n}function Er(e){const n=e.length;if(0===n)return[];const t=[];for(let r=0;r<n;r++){const a=e[r].clone();t.push(a)}return t}function mi(e){const{abs:n}=Math;var t,r,u,a=e.length;if(0===a)return[];for(t=0;t<a;t++)(void 0===u||e[t].y<u.y||e[t].y===u.y&&e[t].x>u.x)&&(u=e[t]);var c=[];for(t=0;t<a;t++){var v=u.theta(e[t]);0===v&&(v=360),c.push([e[t],t,v])}c.sort(function(ae,Se){var Te=ae[2]-Se[2];return 0===Te&&(Te=Se[1]-ae[1]),Te}),c.length>2&&c.unshift(c[c.length-1]);for(var W,ne,oe,we,Pe,Re,A={},_=[];0!==c.length;)if(ne=(W=c.pop())[0],!A.hasOwnProperty(W[0]+"@@"+W[1]))for(var Le=!1;!Le;)if(_.length<2)_.push(W),Le=!0;else{we=(oe=_.pop())[0];var L=(Re=(Pe=_.pop())[0]).cross(we,ne);if(L<0)_.push(Pe),_.push(oe),_.push(W),Le=!0;else if(0===L){var o=we.angleBetween(Re,ne);n(o-180)<1e-10||we.equals(ne)||Re.equals(we)?(A[oe[0]+"@@"+oe[1]]=we,_.push(Pe)):n((o+1)%360-1)<1e-10&&(_.push(Pe),c.push(oe))}else A[oe[0]+"@@"+oe[1]]=we,_.push(Pe)}_.length>2&&_.pop();var s,d=-1;for(r=_.length,t=0;t<r;t++){var m=_[t][1];(void 0===s||m<s)&&(s=m,d=t)}var I=[];if(d>0){var F=_.slice(d),q=_.slice(0,d);I=F.concat(q)}else I=_;var te=[];for(r=I.length,t=0;t<r;t++)te.push(I[t][0]);return te}const dn=function(e){return this instanceof dn?"string"==typeof e?new dn.parse(e):void(this.points=Array.isArray(e)?e.map(me):[]):new dn(e)};dn.parse=function(e){return new dn(Co(e))},dn.fromRect=function(e){return new dn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},dn.prototype={type:$t.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,r=-1/0,a=this.points,u=a.length;if(0===u)return null;for(var c=0;c<u;c++){var v=a[c],y=v.x,T=v.y;y<e&&(e=y),y>n&&(n=y),T<t&&(t=T),T>r&&(r=T)}return new at(e,t,n-e,r-t)},clone:function(){return new dn(Er(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var r,a=1/0,u=0,c=t-1,v=0;v<c;v++){var y=new vt(n[v],n[v+1]),T=y.length(),A=y.closestPointNormalizedLength(e),W=y.pointAt(A).squaredDistance(e);W<a&&(a=W,r=u+A*T),u+=T}return r},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var r=e.x,a=e.y,u=t-1,c=0,v=0,y=new vt,T=new vt,A=new me;c<t;c++){var _=n[u],W=n[c];if(e.equals(_)||(y.start=_,y.end=W,y.containsPoint(e)))return!0;if(a<=_.y&&a>W.y||a>_.y&&a<=W.y){var ne=_.x-r>W.x-r?_.x-r:W.x-r;ne>=0&&(A.x=r+ne,A.y=a,T.start=e,T.end=A,y.intersect(T)&&v++)}u=c}return v%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new dn(mi(this.points))},equals:function(e){if(!e)return!1;var n=this.points,r=n.length;if(e.points.length!==r)return!1;for(var a=0;a<r;a++)if(!n[a].equals(e.points[a]))return!1;return!0},intersectionWithLine:function(e){for(var n=new vt(e),t=[],r=this.lengthPoints(),a=new vt,u=0,c=r.length-1;u<c;u++){a.start=r[u],a.end=r[u+1];var v=n.intersectionWithLine(a);v&&t.push(v[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new vt,r=n-1,a=0;a<r;a++)if(t.start=e[a],t.end=e[a+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,r=n-1,a=0;a<r;a++)t+=e[a].distance(e[a+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var a=0,u=t-1,c=0;c<u;c++){var v=r?c:u-1-c,y=n[v],T=n[v+1],A=new vt(y,T),_=y.distance(T);if(e<=a+_)return A.pointAtLength((r?1:-1)*(e-a));a+=_}return(r?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.points,a=r.length,u=0;u<a;u++)r[u].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let r=0;for(;n[r+2];){const u=r+1,y=n[u];new vt(n[r],n[r+2]).closestPoint(y).distance(y)<=t?n.splice(u,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var r=!0;e<0&&(r=!1,e=-e);for(var a,u=0,c=t-1,v=0;v<c;v++){var y=r?v:c-1-v,T=n[y],A=n[y+1],_=new vt(T,A),W=T.distance(A);if(_.isDifferentiable()){if(e<=u+W)return _.tangentAtLength((r?1:-1)*(e-u));a=_}u+=W}return a?a.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,r=t.length,a=0;a<r;a++)t[a].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",r=0;r<n;r++){var a=e[r];t+=a.x+","+a.y+" "}return t.trim()}},Object.defineProperty(dn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(dn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:Oi,sqrt:la,min:Uo,max:wo,pow:Li}=Math,pn=function(e,n,t,r){return this instanceof pn?e instanceof pn?new pn(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new me(e),this.controlPoint1=new me(n),this.controlPoint2=new me(t),void(this.end=new me(r))):new pn(e,n,t,r)};function Ni(e){var n,t,r=[];for(t=arguments.length,n=1;n<t;n++)r.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var a=Object.create(e);for(t=r.length,n=0;n<t;n++){var c,v,u=r[n];for(v in u)u.hasOwnProperty(v)&&(delete a[v],c=Object.getOwnPropertyDescriptor(u,v),Object.defineProperty(a,v,c))}return a}pn.throughPoints=function(){function n(t){var r=t.length,a=[],u=[],c=2;a[0]=t[0]/c;for(var v=1;v<r;v++)u[v]=1/c,a[v]=(t[v]-a[v-1])/(c=(v<r-1?4:3.5)-u[v]);for(v=1;v<r;v++)a[r-v-1]-=u[r-v]*a[r-v];return a}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function e(t){var c,r=[],a=[],u=t.length-1;if(1==u)return r[0]=new me((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),a[0]=new me(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,a];var v=[];for(c=1;c<u-1;c++)v[c]=4*t[c].x+2*t[c+1].x;v[0]=t[0].x+2*t[1].x,v[u-1]=(8*t[u-1].x+t[u].x)/2;var y=n(v);for(c=1;c<u-1;++c)v[c]=4*t[c].y+2*t[c+1].y;v[0]=t[0].y+2*t[1].y,v[u-1]=(8*t[u-1].y+t[u].y)/2;var T=n(v);for(c=0;c<u;c++)r.push(new me(y[c],T[c])),a.push(c<u-1?new me(2*t[c+1].x-y[c+1],2*t[c+1].y-T[c+1]):new me((t[u].x+y[u-1])/2,(t[u].y+T[u-1])/2));return[r,a]}(t),a=[],u=r[0].length,c=0;c<u;c++){var v=new me(r[0][c].x,r[0][c].y),y=new me(r[1][c].x,r[1][c].y);a.push(new pn(t[c],v,y,t[c+1]))}return a}}(),pn.prototype={type:$t.Curve,bbox:function(){for(var we,Pe,Re,Le,L,U,o,s,e=this.start,n=this.controlPoint1,t=this.controlPoint2,r=this.end,a=e.x,u=e.y,c=n.x,v=n.y,y=t.x,T=t.y,A=r.x,_=r.y,W=new Array,ne=new Array,oe=[new Array,new Array],d=0;d<2;++d)if(0===d?(Pe=6*a-12*c+6*y,we=-3*a+9*c-9*y+3*A,Re=3*c-3*a):(Pe=6*u-12*v+6*T,we=-3*u+9*v-9*T+3*_,Re=3*v-3*u),Oi(we)<1e-12){if(Oi(Pe)<1e-12)continue;0<(Le=-Re/Pe)&&Le<1&&ne.push(Le)}else s=la(o=Pe*Pe-4*Re*we),!(o<0)&&(0<(L=(-Pe+s)/(2*we))&&L<1&&ne.push(L),0<(U=(-Pe-s)/(2*we))&&U<1&&ne.push(U));for(var F,q,te,m=ne.length,I=m;m--;)oe[0][m]=q=(F=1-(Le=ne[m]))*F*F*a+3*F*F*Le*c+3*F*Le*Le*y+Le*Le*Le*A,oe[1][m]=te=F*F*F*u+3*F*F*Le*v+3*F*Le*Le*T+Le*Le*Le*_,W[m]={X:q,Y:te};ne[I]=0,ne[I+1]=1,W[I]={X:a,Y:u},W[I+1]={X:A,Y:_},oe[0][I]=a,oe[1][I]=u,oe[0][I+1]=A,oe[1][I+1]=_,ne.length=I+2,oe[0].length=I+2,oe[1].length=I+2,W.length=I+2;var ae=Uo.apply(null,oe[0]),Se=Uo.apply(null,oe[1]),Te=wo.apply(null,oe[0]),Oe=wo.apply(null,oe[1]);return new at(ae,Se,Te-ae,Oe-Se)},clone:function(){return new pn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,a),a)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},u=this.closestPointLength(e,a);if(!u)return 0;var c=this.length(a);return 0===c?0:u/c},closestPointT:function(e,n){for(var a,u,c,v,y,T,A,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,r=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,_=r.length,W=_?1/_:0,ne=0;ne<_;ne++){var oe=r[ne],we=oe.start.distance(e),Pe=oe.end.distance(e),Re=we+Pe;(!A||Re<A)&&(a=oe,u=ne*W,c=(ne+1)*W,v=we,y=Pe,T=oe.start.distance(oe.end),A=Re)}for(var Le=Li(10,-t);;){var L=v?Oi(v-y)/v:0,U=y?Oi(v-y)/y:0;if(L<Le||U<Le||!v||v<T*Le||!y||y<T*Le)return v<=y?u:c;var I=a.divide(.5);W/=2;var F=I[0].start.distance(e),q=I[0].end.distance(e),te=F+q,ae=I[1].start.distance(e),Se=I[1].end.distance(e);te<=ae+Se?(a=I[0],c-=W,v=F,y=q):(a=I[1],u+=W,v=ae,y=Se)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,a=this.end;if(e<=0)return[new pn(n,n,n,n),new pn(n,t,r,a)];if(e>=1)return[new pn(n,t,r,a),new pn(a,a,a,a)];var u=this.getSkeletonPoints(e),y=u.divider,T=u.dividerControlPoint1,A=u.dividerControlPoint2;return[new pn(n,u.startControlPoint1,u.startControlPoint2,y),new pn(y,T,A,a)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,a=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:r.clone(),divider:a.clone(),dividerControlPoint1:a.clone(),dividerControlPoint2:a.clone()};var u=new vt(n,t).pointAt(e),c=new vt(t,r).pointAt(e),v=new vt(r,a).pointAt(e),y=new vt(u,c).pointAt(e),T=new vt(c,v).pointAt(e);return{startControlPoint1:u,startControlPoint2:y,divider:new vt(y,T).pointAt(e),dividerControlPoint1:T,dividerControlPoint2:v}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new pn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var r=this.endpointDistance(),a=Li(10,-n),u=0;;){u+=1;for(var c=[],v=t.length,y=0;y<v;y++){var A=t[y].divide(.5);c.push(A[0],A[1])}for(var _=0,W=c.length,ne=0;ne<W;ne++)_+=c[ne].endpointDistance();if(u>1&&(0!==_?(_-r)/_:0)<a)return c;t=c,r=_}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,a=t.length,u=0;u<a;u++)r+=t[u].endpointDistance();return r},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,a=n.divider,u=new vt(t,n.dividerControlPoint1);return u.translate(a.x-t.x,a.y-t.y),u},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},u=this.length(a);return this.tAtLength(u*e,a)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var c,v,y,T,A,r=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a=void 0===n.subdivisions?this.getSubdivisions({precision:r}):n.subdivisions,u={precision:r,subdivisions:a},_=0,W=a.length,ne=1/W,oe=0;oe<W;oe++){var we=t?oe:W-1-oe,Pe=a[oe],Re=Pe.endpointDistance();if(e<=_+Re){c=Pe,v=we*ne,y=(we+1)*ne,T=t?e-_:Re+_-e,A=t?Re+_-e:e-_;break}_+=Re}if(!c)return t?1:0;for(var Le=this.length(u),L=Li(10,-r);;){if((0!==Le?T/Le:0)<L)return v;if((0!==Le?A/Le:0)<L)return y;var o,s,d=c.divide(.5);ne/=2;var m=d[0].endpointDistance(),I=d[1].endpointDistance();T<=m?(c=d[0],y-=ne,s=m-(o=T)):(c=d[1],v+=ne,s=I-(o=T-m)),T=o,A=s}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[t[0].start.clone()],a=t.length,u=0;u<a;u++)r.push(t[u].end.clone());return r},toPolyline:function(e){return new dn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},pn.prototype.divide=pn.prototype.divideAtT;const Tt=function(e){if(!(this instanceof Tt))return new Tt(e);if("string"==typeof e)return new Tt.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(v,y){return v.concat(y)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var a=null;for(n=0;n<t;n++){var u=e[n];if(!(u instanceof vt||u instanceof pn))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(Tt.createSegment("M",u.start)),a&&!a.end.equals(u.start)&&this.appendSegment(Tt.createSegment("M",u.start)),u instanceof vt?this.appendSegment(Tt.createSegment("L",u.end)):u instanceof pn&&this.appendSegment(Tt.createSegment("C",u.controlPoint1,u.controlPoint2,u.end)),a=u}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof vt)this.appendSegment(Tt.createSegment("M",e.start)),this.appendSegment(Tt.createSegment("L",e.end));else if(e instanceof pn)this.appendSegment(Tt.createSegment("M",e.start)),this.appendSegment(Tt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof dn))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(Tt.createSegment(0===n?"M":"L",e.points[n]))}}};function Kr(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}Tt.parse=function(e){if(!e)return new Tt;for(var n=new Tt,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),a=r.length,u=0;u<a;u++){var y=r[u].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),T=Tt.createSegment.apply(this,y);n.appendSegment(T)}return n},Tt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=Tt.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],r=arguments.length,a=1;a<r;a++)t.push(arguments[a]);return Kr(n,t)},Tt.prototype={type:$t.Path,appendSegment:function(e){var r,n=this.segments,t=n.length,a=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(T,A){return T.concat(A)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,v=0;v<c;v++)r=this.prepareSegment(e[v],a,null),n.push(r),a=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,a,null),n.push(r)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,r=0;r<n;r++){var a=e[r];if(a.isVisible){var u=a.bbox();t=t?t.union(u):u}}if(t)return t;var c=e[n-1];return new at(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new Tt,r=0;r<n;r++){var a=e[r].clone();t.appendSegment(a)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},u=this.closestPointT(e,a);return u?this.lengthAtT(u,a):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},u=this.closestPointLength(e,a);if(0===u)return 0;var c=this.length(a);return 0===c?0:u/c},closestPointT:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,v=1/0,y=0;y<r;y++){var T=t[y];if(T.isVisible){var _=T.closestPointT(e,{precision:a,subdivisions:u[y]}),W=T.pointAtT(_),ne=new vt(W,e).squaredLength();ne<v&&(c={segmentIndex:y,value:_},v=ne)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,v=1/0,y=0;y<r;y++){var T=t[y],A=u[y];if(T.isDifferentiable()){var _=T.closestPointT(e,{precision:a,subdivisions:A}),W=T.pointAtT(_),ne=new vt(W,e).squaredLength();ne<v&&(c=T.tangentAtT(_),v=ne)}}return c||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var r=t.length,a=0,u=0;u<r;u++)t[u].containsPoint(e)&&a++;return a%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},v=this.length(c);return this.divideAtLength(v*e,c)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var r=!0;e<0&&(r=!1,e=-e);var c,v,T,A,_,W,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,y=0;for(c=0;c<t;c++){var oe=r?c:t-1-c;v=this.getSegment(oe);var we=u[oe],Pe=v.length({precision:a,subdivisions:we});if(v.isDifferentiable()&&(_=v,W=oe,e<=y+Pe)){A=oe,T=v.divideAtLength((r?1:-1)*(e-y),{precision:a,subdivisions:we});break}y+=Pe}if(!_)return null;T||(A=W,T=_.divideAtT(r?1:0));var Re=this.clone();Re.replaceSegment(A,T);var Le=A,L=A+1,U=A+2;T[0].isDifferentiable()||(Re.removeSegment(Le),L-=1,U-=1);var o=Re.getSegment(L).start;Re.insertSegment(L,Tt.createSegment("M",o)),U+=1,T[1].isDifferentiable()||(Re.removeSegment(U-1),U-=1);var s=U-Le-1;for(c=U;c<Re.segments.length;c++){var d=this.getSegment(c-s);if("Z"===(v=Re.getSegment(c)).type&&!d.subpathStartSegment.end.equals(v.subpathStartSegment.end)){var m=Tt.createSegment("L",d.end);Re.replaceSegment(c,m)}}return[new Tt(Re.segments.slice(0,L)),new Tt(Re.segments.slice(L))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,r=n.length;if(t.length!==r)return!1;for(var a=0;a<r;a++){var u=n[a],c=t[a];if(u.type!==c.type||!u.equals(c))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=[],u=0;u<t;u++){var v=n[u].getSubdivisions({precision:r});a.push(v)}return a},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,r=[];for(let a=0;a<t;a++){const u=n[a];u.isSubpathStart?r.push(new Tt(u)):r[r.length-1].appendSegment(u)}return r},insertSegment:function(e,n){var t=this.segments,r=t.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var a,u=null,c=null;if(0!==r&&(c=e>=1?(u=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(A,_){return A.concat(_)},[]))[0].isSegment)throw new Error("Segments required.");for(var v=n.length,y=0;y<v;y++)a=this.prepareSegment(n[y],u,c),t.splice(e+y,0,a),u=a}else{if(!n||!n.isSegment)throw new Error("Segment required.");a=this.prepareSegment(n,u,c),t.splice(e,0,a)}},intersectionWithLine:function(e,n){var t=null,r=this.toPolylines(n);if(!r)return null;for(var a=0,u=r.length;a<u;a++){var v=e.intersect(r[a]);v&&(t||(t=[]),Array.isArray(v)?Array.prototype.push.apply(t,v):t.push(v))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var a=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=0,c=0;c<t;c++)u+=n[c].length({subdivisions:a[c]});return u},lengthAtT:function(e,n){var t=this.segments,r=t.length;if(0===r)return 0;var a=e.segmentIndex;if(a<0)return 0;var u=e.value;a>=r?(a=r-1,u=1):u<0?u=0:u>1&&(u=1);for(var c=void 0===(n=n||{}).precision?this.PRECISION:n.precision,v=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):n.segmentSubdivisions,T=0,A=0;A<a;A++){var _=t[A];T+=_.length({precisison:c,subdivisions:v[A]})}return T+(_=t[a]).lengthAtT(u,{precisison:c,subdivisions:v[a]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},v=this.length(c);return this.pointAtLength(v*e,c)},pointAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;if(0===e)return this.start.clone();var a=!0;e<0&&(a=!1,e=-e);for(var v,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,y=0,T=0;T<r;T++){var A=a?T:r-1-T,_=t[A],W=c[A],ne=_.length({precision:u,subdivisions:W});if(_.isVisible){if(e<=y+ne)return _.pointAtLength((a?1:-1)*(e-y),{precision:u,subdivisions:W});v=_}y+=ne}return v?a?v.end:v.start:t[r-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].pointAtT(0);if(r>=t)return n[t-1].pointAtT(1);var a=e.value;return a<0?a=0:a>1&&(a=1),n[r].pointAtT(a)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=t),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var r=n.splice(e,1)[0],a=r.previousSegment,u=r.nextSegment;a&&(a.nextSegment=u),u&&(u.previousSegment=a),r.isSubpathStart&&u&&this.updateSubpathStartSegment(u)},replaceSegment:function(e,n){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var a,u=t[e],c=u.previousSegment,v=u.nextSegment,y=u.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(W,ne){return W.concat(ne)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var T=n.length,A=0;A<T;A++)a=this.prepareSegment(n[A],c,v),t.splice(e+A,0,a),c=a,y&&a.isSubpathStart&&(y=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");a=this.prepareSegment(n,c,v),t.splice(e,1,a),y&&a.isSubpathStart&&(y=!1)}y&&v&&this.updateSubpathStartSegment(v)},round:function(e){for(var n=this.segments,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.segments,a=r.length,u=0;u<a;u++)r[u].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},v=this.length(c);return this.segmentIndexAtLength(v*e,c)},segmentIndexAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var a=!0;e<0&&(a=!1,e=-e);for(var u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,v=null,y=0,T=0;T<r;T++){var A=a?T:r-1-T,_=t[A],ne=_.length({precision:u,subdivisions:c[A]});if(_.isVisible){if(e<=y+ne)return A;v=A}y+=ne}return v},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},v=this.length(c);return this.tangentAtLength(v*e,c)},tangentAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var a=!0;e<0&&(a=!1,e=-e);for(var v,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,y=0,T=0;T<r;T++){var A=a?T:r-1-T,_=t[A],W=c[A],ne=_.length({precision:u,subdivisions:W});if(_.isDifferentiable()){if(e<=y+ne)return _.tangentAtLength((a?1:-1)*(e-y),{precision:u,subdivisions:W});v=_}y+=ne}return v?v.tangentAtT(a?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].tangentAtT(0);if(r>=t)return n[t-1].tangentAtT(1);var a=e.value;return a<0?a=0:a>1&&(a=1),n[r].tangentAtT(a)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var a=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=[],c=[],v=0;v<t;v++){var y=n[v];if(y.isVisible){var T=a[v];if(T.length>0){var A=T.map(function(_){return _.start});Array.prototype.push.apply(c,A)}else c.push(y.start)}else c.length>0&&(c.push(n[v-1].end),u.push(c),c=[])}return c.length>0&&(c.push(this.end),u.push(c)),u},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var r=0,a=t.length;r<a;r++)n.push(new dn(t[r]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",r=0;r<n;r++)t+=e[r].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,r=t.length,a=0;a<r;a++)t[a].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Tt.createSegment("M",0,0)),this}},Object.defineProperty(Tt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var r=e[t];if(r.isVisible)return r.start}return e[n-1].end}}),Object.defineProperty(Tt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var r=e[t];if(r.isVisible)return r.end}return e[n-1].end}});var yi={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(yi,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(yi,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(yi,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var qn=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof qn))return Kr(qn,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof vt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new me(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var a;for(r=[],t=0;t<n;t+=2)a=e.slice(t,t+2),r.push(Kr(qn,a));return r}if(1===n)return this.end=new me(e[0]),this;for(r=[],t=0;t<n;t+=1)r.push(new qn(e[t]));return r},La={clone:function(){return new qn(this.end)},divideAt:function(e){var t=new vt(this.start,this.end).divideAt(e);return[new qn(t[0]),new qn(t[1])]},divideAtLength:function(e){var t=new vt(this.start,this.end).divideAtLength(e);return[new qn(t[0]),new qn(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(La,"type",{configurable:!0,enumerable:!0,value:"L"}),qn.prototype=Ni(yi,vt.prototype,La);var mr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof mr))return Kr(mr,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,u;if(e[0]instanceof pn){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new me(+e[0],+e[1]),this.controlPoint2=new me(+e[2],+e[3]),this.end=new me(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var a;for(r=[],t=0;t<n;t+=6)a=e.slice(t,t+6),r.push(Kr(mr,a));return r}if(3===n)return this.controlPoint1=new me(e[0]),this.controlPoint2=new me(e[1]),this.end=new me(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(r=[],t=0;t<n;t+=3)u=e.slice(t,t+3),r.push(Kr(mr,u));return r},Go={clone:function(){return new mr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var r=new pn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new mr(r[0]),new mr(r[1])]},divideAtLength:function(e,n){var r=new pn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new mr(r[0]),new mr(r[1])]},divideAtT:function(e){var t=new pn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new mr(t[0]),new mr(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(Go,"type",{configurable:!0,enumerable:!0,value:"C"}),mr.prototype=Ni(yi,pn.prototype,Go);var Pr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Pr))return Kr(Pr,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,u;if(e[0]instanceof vt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof pn){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new me(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var a;for(r=[],t=0;t<n;t+=2)a=e.slice(t,t+2),r.push(Kr(0===t?Pr:qn,a));return r}if(1===n)return this.end=new me(e[0]),this;for(r=[],t=0;t<n;t+=1)u=e[t],r.push(0===t?new Pr(u):new qn(u));return r},no={bbox:function(){return null},clone:function(){return new Pr(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(no,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(no,"type",{configurable:!0,enumerable:!0,value:"M"}),Pr.prototype=Ni(yi,no);var Ri=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Ri))return Kr(Ri,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},Di={clone:function(){return new Ri},divideAt:function(e){var t=new vt(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new qn(t[0]):this.clone(),new qn(t[1])]},divideAtLength:function(e){var t=new vt(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new qn(t[0]):this.clone(),new qn(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Di,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Di,"type",{configurable:!0,enumerable:!0,value:"Z"}),Ri.prototype=Ni(yi,vt.prototype,Di);var Na=Tt.segmentTypes={L:qn,C:mr,M:Pr,Z:Ri,z:Ri};Tt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Na).join("")+",.]*$"),Tt.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const Wo={curveThroughPoints:function(e){return console.warn("deprecated"),new Tt(pn.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var a,n=[],t=[],r=e.length-1;if(1==r)return n[0]=new me((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new me(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var u=[];for(a=1;a<r-1;a++)u[a]=4*e[a].x+2*e[a+1].x;u[0]=e[0].x+2*e[1].x,u[r-1]=(8*e[r-1].x+e[r].x)/2;var c=this.getFirstControlPoints(u);for(a=1;a<r-1;++a)u[a]=4*e[a].y+2*e[a+1].y;u[0]=e[0].y+2*e[1].y,u[r-1]=(8*e[r-1].y+e[r].y)/2;var v=this.getFirstControlPoints(u);for(a=0;a<r;a++)n.push(new me(c[a],v[a])),t.push(a<r-1?new me(2*e[a+1].x-c[a+1],2*e[a+1].y-v[a+1]):new me((e[r].x+c[r-1])/2,(e[r].y+v[r-1])/2));return[n,t]},getCurveDivider:function(e,n,t,r){console.warn("deprecated");var a=new pn(e,n,t,r);return function(c){var v=a.divide(c);return[{p0:v[0].start,p1:v[0].controlPoint1,p2:v[0].controlPoint2,p3:v[0].end},{p0:v[1].start,p1:v[1].controlPoint1,p2:v[1].controlPoint2,p3:v[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],r=[],a=2;t[0]=e[0]/a;for(var u=1;u<n;u++)r[u]=1/a,t[u]=(e[u]-t[u-1])/(a=(u<n-1?4:3.5)-r[u]);for(u=1;u<n;u++)t[n-u-1]-=r[n-u]*t[n-u];return t},getInversionSolver:function(e,n,t,r){console.warn("deprecated");var a=new pn(e,n,t,r);return function(c){return a.closestPointT(c)}}},Qt=function(e){return this instanceof Qt?"string"==typeof e?new Qt.parse(e):void(this.points=Array.isArray(e)?e.map(me):[]):new Qt(e)};function Sn(e,n,t,r){switch(e.type){case $t.Line:if(n.type===$t.Line)return xi(e,n);break;case $t.Ellipse:switch(n.type){case $t.Line:return So(e,n);case $t.Ellipse:return D(e,n)}break;case $t.Rect:switch(n.type){case $t.Line:return Q(e,n);case $t.Ellipse:return se(e,n);case $t.Rect:return pe(e,n)}break;case $t.Polyline:switch(n.type){case $t.Line:return Me(e,n);case $t.Ellipse:return Ce(e,n);case $t.Rect:return l(e,n);case $t.Polyline:return h(e,n)}break;case $t.Polygon:switch(n.type){case $t.Line:return x(e,n);case $t.Ellipse:return w(e,n);case $t.Rect:return R(e,n);case $t.Polyline:return H(e,n);case $t.Polygon:return X(e,n)}break;case $t.Path:switch(n.type){case $t.Line:return ce(e,n,t);case $t.Ellipse:return le(e,n,t);case $t.Rect:return Ae(e,n,t);case $t.Polyline:return Be(e,n,t);case $t.Polygon:return Qe(e,n,t);case $t.Path:return ke(e,n,t,r)}}switch(n.type){case $t.Ellipse:case $t.Rect:case $t.Polyline:case $t.Polygon:case $t.Path:return Sn(n,e,r,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function xi(e,n){const t=e.start.x,r=e.start.y,c=n.start.x,v=n.start.y,A=e.end.x-t,_=e.end.y-r,W=n.end.x-c,ne=n.end.y-v,oe=t-c,we=r-v,Pe=A*ne-W*_,Re=(A*we-_*oe)/Pe,Le=(W*we-ne*oe)/Pe;return Re>=0&&Re<=1&&Le>=0&&Le<=1}function So(e,n){const t=e.a,r=e.b,a=e.x,u=e.y,c=n.start.x-a,y=n.start.y-u,A=t*t,_=r*r,W=n.end.x-a-c,ne=n.end.y-u-y,oe=W*W/A+ne*ne/_,we=2*c*W/A+2*y*ne/_,Re=we*we-4*oe*(c*c/A+y*y/_-1);if(0===Re){const Le=-we/2/oe;return Le>=0&&Le<=1}if(Re>0){const Le=Math.sqrt(Re),L=(-we+Le)/2/oe,U=(-we-Le)/2/oe;return L>=0&&L<=1||U>=0&&U<=1}return!1}function D(e,n){return function Ir(e,n,t,r){const{cos:a,sin:u}=Math,c=u(n),v=a(n),y=u(r),T=a(r),A=c*c,_=v*v,ne=y*y,oe=T*T,Pe=e.a*e.a,Re=e.b*e.b,Le=t.a*t.a,L=t.b*t.b,U=Pe*A+Re*_,o=Le*ne+L*oe,s=Pe*_+Re*A,d=Le*oe+L*ne;let m=2*(Re-Pe)*(c*v),I=2*(L-Le)*(y*T),F=-2*U*e.x-m*e.y,q=-2*o*t.x-I*t.y,te=-m*e.x-2*s*e.y,ae=-I*t.x-2*d*t.y;const Se=U*e.x*e.x+s*e.y*e.y+m*e.x*e.y-Pe*Re,Te=o*t.x*t.x+d*t.y*t.y+I*t.x*t.y-Le*L;m/=2,I/=2,F/=2,q/=2,te/=2,ae/=2;const Oe=It([[U,m,F],[m,s,te],[F,te,Se]]),qe=It([[o,I,q],[I,d,ae],[q,ae,Te]]),ot=.33333333*(It([[o,m,F],[I,s,te],[q,te,Se]])+It([[U,I,F],[m,d,te],[F,ae,Se]])+It([[U,m,q],[m,s,ae],[F,te,Te]])),pt=.33333333*(It([[U,I,q],[m,d,ae],[F,ae,Te]])+It([[o,m,q],[I,s,ae],[q,te,Te]])+It([[o,I,F],[I,d,te],[q,ae,Se]])),rt=Ot([[Oe,ot],[ot,pt]]),nt=Ot([[Oe,pt],[ot,qe]]),ut=Ot([[ot,pt],[pt,qe]]);return!(Ot([[2*rt,nt],[nt,2*ut]])>0&&(pt>0||ot>0))}(e,0,n,0)}function Q(e,n){const{start:t,end:r}=n,{x:a,y:u,width:c,height:v}=e;return!(t.x>a+c&&r.x>a+c||t.x<a&&r.x<a||t.y>u+v&&r.y>u+v||t.y<u&&r.y<u)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||xi(e.topLine(),n)||xi(e.rightLine(),n)||xi(e.bottomLine(),n)||xi(e.leftLine(),n))}function se(e,n){return!!pe(e,at.fromEllipse(n))&&w(Qt.fromRect(e),n)}function pe(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Me(e,n){return Ye(e,n,{interior:!1})}function Ce(e,n){return xt(e,n,{interior:!1})}function l(e,n){return Gt(e,n,{interior:!1})}function h(e,n){return In(e,n,{interior:!1})}function x(e,n){return Ye(e,n,{interior:!0})}function w(e,n){return xt(e,n,{interior:!0})}function R(e,n){return Gt(e,n,{interior:!0})}function H(e,n){return In(e,n,{interior:!0})}function X(e,n){return Rn(e,n,{interior:!0})}function ce(e,n,t){return e.getSubpaths().some(r=>{const[a]=r.toPolylines(t),{type:u}=r.getSegment(-1);return"Z"===u?x(a,n):Me(a,n)})}function le(e,n,t){return e.getSubpaths().some(r=>{const[a]=r.toPolylines(t),{type:u}=r.getSegment(-1);return"Z"===u?w(a,n):Ce(a,n)})}function Ae(e,n,t){return Qe(e,Qt.fromRect(n),t)}function Be(e,n,t){return Pt(e,n,t,{interior:!1})}function Qe(e,n,t){return Pt(e,n,t,{interior:!0})}function ke(e,n,t,r){return e.getSubpaths().some(a=>{const[u]=a.toPolylines(t),{type:c}=a.getSegment(-1);return"Z"===c?Qe(n,u,r):Be(n,u,r)})}function Ye(e,n,t={}){const{interior:r=!1}=t;let a;if(r){if(e.containsPoint(n.start))return!0;const{start:v,end:y,points:T}=e;a=y.equals(v)?T:[...T,v]}else a=e.points;const{length:u}=a,c=new vt;for(let v=0;v<u-1;v++)if(c.start=a[v],c.end=a[v+1],xi(n,c))return!0;return!1}function xt(e,n,t={}){const{start:r,end:a,points:u}=e;if(n.containsPoint(r))return!0;let c;const{interior:v=!1}=t;if(v){if(e.containsPoint(n.center()))return!0;c=a.equals(r)?u:[...u,r]}else c=u;const{length:y}=c,T=new vt;for(let A=0;A<y-1;A++)if(T.start=c[A],T.end=c[A+1],So(n,T))return!0;return!1}function Gt(e,n,t){return Rn(e,Qt.fromRect(n),t)}function Pt(e,n,t,r){return e.getSubpaths().some(a=>{const[u]=a.toPolylines(t),{type:c}=a.getSegment(-1);return"Z"===c?Rn(n,u,r):In(n,u,r)})}function In(e,n,t={}){const{interior:r=!1}=t;let a;if(r){const{start:y}=n;if(e.containsPoint(y))return!0;a=e.clone().close()}else a=e;const u=n.points,{length:c}=u,v=new vt;for(let y=0;y<c-1;y++)if(v.start=u[y],v.end=u[y+1],Me(a,v))return!0;return!1}function Rn(e,n,t){return n.containsPoint(e.start)||In(e,n.clone().close(),t)}function Ot(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function It(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Qt.parse=function(e){return new Qt(Co(e))},Qt.fromRect=function(e){return new Qt([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Qt.prototype=Ni(dn.prototype,{type:$t.Polygon,clone:function(){return new Qt(Er(this.points))},convexHull:function(){return new Qt(mi(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const yr=p,Fe=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,a=r.PI,u=r.atan2,c=r.sqrt,v=r.min,y=r.max,T=r.cos,A=r.sin,_=function(L,U,o){if(!(this instanceof _))return _.apply(Object.create(_.prototype),arguments);if(L){if(_.isV(L)&&(L=L.node),U=U||{},_.isString(L)){if("svg"===(L=L.trim()).toLowerCase())L=_.createSvgDocument();else if("<"===L[0]){var s=_.createSvgDocument(L);if(s.childNodes.length>1){var m,I,d=[];for(m=0,I=s.childNodes.length;m<I;m++){var F=s.childNodes[m];d.push(new _(document.importNode(F,!0)))}return d}L=document.importNode(s.firstChild,!0)}else L=document.createElementNS(n.svg,L);_.ensureId(L)}return this.node=L,this.setAttributes(U),o&&this.append(o),this}},W=_.prototype;function oe(L,U,o){o||(o={});for(var s=o.includeAnnotationIndices,d=o.eol,m=o.lineHeight,I=o.baseSize,F=0,q={},te=U.length-1,ae=0;ae<=te;ae++){var Se=U[ae],Te=null;if(_.isObject(Se)){var Oe=Se.attrs,qe=_("tspan",Oe),ot=qe.node,pt=Se.t;d&&ae===te&&(pt+=d),ot.textContent=pt;var rt=Oe.class;rt&&qe.addClass(rt),s&&qe.attr("annotations",Se.annotations),Te=parseFloat(Oe["font-size"]),isFinite(Te)||(Te=I),Te&&Te>F&&(F=Te)}else d&&ae===te&&(Se+=d),ot=document.createTextNode(Se||" "),I&&I>F&&(F=I);L.appendChild(ot)}return F&&(q.maxFontSize=F),m?q.lineHeight=m:F&&(q.lineHeight=1.2*F),q}Object.defineProperty(W,"id",{enumerable:!0,get:function(){return this.node.id},set:function(L){this.node.id=L}}),W.getTransformToElement=function(L){var U=this.node;if(_.isSVGGraphicsElement(L)&&_.isSVGGraphicsElement(U)){var o=_.toNode(L).getScreenCTM(),s=U.getScreenCTM();if(o&&s)return o.inverse().multiply(s)}return _.createSVGMatrix()},W.transform=function(L,U){var o=this.node;if(_.isUndefined(L))return _.transformStringToMatrix(this.attr("transform"));if(U&&U.absolute)return this.attr("transform",_.matrixToTransformString(L));var s=_.createSVGTransform(L);return o.transform.baseVal.appendItem(s),this},W.translate=function(L,U,o){o=o||{},U=U||0;var s=this.attr("transform")||"",d=_.parseTransformString(s);return s=d.value,_.isUndefined(L)?d.translate:(s=s.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(o.absolute?L:d.translate.tx+L)+","+(o.absolute?U:d.translate.ty+U)+") "+s).trim()),this)},W.rotate=function(L,U,o,s){s=s||{};var d=this.attr("transform")||"",m=_.parseTransformString(d);return d=m.value,_.isUndefined(L)?m.rotate:(d=d.replace(/rotate\([^)]*\)/g,"").trim(),L%=360,this.attr("transform",(d+" rotate("+(s.absolute?L:m.rotate.angle+L)+(void 0!==U&&void 0!==o?","+U+","+o:"")+")").trim()),this)},W.scale=function(L,U){U=_.isUndefined(U)?L:U;var o=this.attr("transform")||"",s=_.parseTransformString(o);return o=s.value,_.isUndefined(L)?s.scale:(o=o.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(o+" scale("+L+","+U+")").trim()),this)},W.bbox=function(L,U){var o,s=this.node,d=s.ownerSVGElement;if(!d)return new at(0,0,0,0);try{o=s.getBBox()}catch(I){o={x:s.clientLeft,y:s.clientTop,width:s.clientWidth,height:s.clientHeight}}if(L)return new at(o);var m=this.getTransformToElement(U||d);return _.transformRect(o,m)},W.getBBox=function(L){var o,U={},s=this.node;if(!s.ownerSVGElement||!_.isSVGGraphicsElement(s))return new at(0,0,0,0);if(L&&(L.target&&(U.target=_.toNode(L.target)),L.recursive&&(U.recursive=L.recursive)),U.recursive){var I=this.children(),F=I.length;if(0===F)return this.getBBox({target:U.target,recursive:!1});U.target||(U.target=this);for(var q=0;q<F;q++){var ae,te=I[q];ae=0===te.children().length?te.getBBox({target:U.target,recursive:!1}):te.getBBox({target:U.target,recursive:!0}),o=o?o.union(ae):ae}return o}try{o=s.getBBox()}catch(Se){o={x:s.clientLeft,y:s.clientTop,width:s.clientWidth,height:s.clientHeight}}if(U.target){var m=this.getTransformToElement(U.target);return _.transformRect(o,m)}return new at(o)};var we=/em$/;function Pe(L,U){var o=parseFloat(L);return we.test(L)?o*U:o}W.text=function(L,U){if(L&&"string"!=typeof L)throw new Error("Vectorizer: text() expects the first argument to be a string.");L=_.sanitizeText(L),U||(U={});var o=U.displayEmpty,s=U.eol,d=U.textPath,m=U.textVerticalAnchor,I="middle"===m||"bottom"===m||"top"===m,F=U.x;void 0===F&&(F=this.attr("x")||0);var q=U.includeAnnotationIndices,te=U.annotations;te&&!_.isArray(te)&&(te=[te]);var ae=U.lineHeight,Se="auto"===ae,Te=Se?"1.5em":ae||"1em";this.empty(),this.attr({"xml:space":"preserve",display:L||o?null:"none"});var Oe=parseFloat(this.attr("font-size"));Oe||(Oe=16,(I||te)&&this.attr("font-size",Oe));var ot,qe=document;d?("string"==typeof d&&(d={d}),ot=function ne(L,U){L||(L={});var o=_("textPath"),s=L.d;if(s&&void 0===L["xlink:href"]){var d=_("path").attr("d",s).appendTo(U.defs());o.attr("xlink:href","#"+d.id)}return _.isObject(L)&&o.attr(L),o.node}(d,this)):ot=qe.createDocumentFragment();for(var ut,pt=0,rt=L.split("\n"),nt=[],lt=0,Ht=rt.length-1;lt<=Ht;lt++){var Zt,Xt=Te,on="v-line",At=qe.createElementNS(n.svg,"tspan"),Cn=rt[lt];if(Cn)if(te){var mn=(Zt=oe(At,_.annotateString(Cn,te,{offset:-pt,includeAnnotationIndices:q}),{includeAnnotationIndices:q,eol:lt!==Ht&&s,lineHeight:Se?null:Te,baseSize:Oe})).lineHeight;mn&&Se&&0!==lt&&(Xt=mn),0===lt&&(ut=.8*Zt.maxFontSize)}else s&&lt!==Ht&&(Cn+=s),At.textContent=Cn;else{At.textContent="-",on+=" v-empty-line";var Dt=At.style;Dt.fillOpacity=0,Dt.strokeOpacity=0,te&&(Zt={})}Zt&&nt.push(Zt),lt>0&&At.setAttribute("dy",Xt),(lt>0||d)&&At.setAttribute("x",F),At.className.baseVal=on,ot.appendChild(At),pt+=Cn.length+1}if(I)if(te)Xt=function Re(L,U,o,s){if(!Array.isArray(U))return 0;var d=U.length;if(!d)return 0;for(var m=U[0],I=Pe(m.maxFontSize,o)||o,F=0,q=Pe(s,o),te=1;te<d;te++)F+=Pe((m=U[te]).lineHeight,o)||q;var Te,Se=Pe(m.maxFontSize,o)||o;switch(L){case"middle":Te=I/2-.15*Se-F/2;break;case"bottom":Te=-.25*Se-F;break;default:Te=.8*I}return Te}(m,nt,Oe,Te);else if("top"===m)Xt="0.8em";else{var yt;switch(Ht>0?(yt=parseFloat(Te)||1,yt*=Ht,we.test(Te)||(yt/=Oe)):yt=0,m){case"middle":Xt=.3-yt/2+"em";break;case"bottom":Xt=-yt-.3+"em"}}else 0===m?Xt="0em":m?Xt=m:(Xt=0,null===this.attr("y")&&this.attr("y",ut||"0.8em"));return ot.firstChild.setAttribute("dy",Xt),this.append(ot),this},W.removeAttr=function(L){var U=_.qualifyAttr(L),o=this.node;return U.ns?o.hasAttributeNS(U.ns,U.local)&&o.removeAttributeNS(U.ns,U.local):o.hasAttribute(L)&&o.removeAttribute(L),this},W.attr=function(L,U){if(_.isUndefined(L)){for(var o=this.node.attributes,s={},d=0;d<o.length;d++)s[o[d].name]=o[d].value;return s}if(_.isString(L)&&_.isUndefined(U))return this.node.getAttribute(L);if("object"==typeof L)for(var m in L)L.hasOwnProperty(m)&&this.setAttribute(m,L[m]);else this.setAttribute(L,U);return this},W.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",_.normalizePathData(this.attr("d"))),this},W.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},W.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},W.setAttributes=function(L){for(var U in L)L.hasOwnProperty(U)&&this.setAttribute(U,L[U]);return this},W.append=function(L){_.isArray(L)||(L=[L]);for(var U=0,o=L.length;U<o;U++)this.node.appendChild(_.toNode(L[U]));return this},W.prepend=function(L){var U=this.node.firstChild;return U?_(U).before(L):this.append(L)},W.before=function(L){var U=this.node,o=U.parentNode;if(o){_.isArray(L)||(L=[L]);for(var s=0,d=L.length;s<d;s++)o.insertBefore(_.toNode(L[s]),U)}return this},W.appendTo=function(L){return _.toNode(L).appendChild(this.node),this},W.svg=function(){return this.node instanceof window.SVGSVGElement?this:_(this.node.ownerSVGElement)},W.tagName=function(){return this.node.tagName.toUpperCase()},W.defs=function(){var L=this.svg()||this,U=L.node.getElementsByTagName("defs")[0];return U?_(U):_("defs").appendTo(L)},W.clone=function(){var L=_(this.node.cloneNode(!0));return L.node.id=_.uniqueId(),L},W.findOne=function(L){var U=this.node.querySelector(L);return U?_(U):void 0},W.find=function(L){var U=[],o=this.node.querySelectorAll(L);if(o)for(var s=0;s<o.length;s++)U.push(_(o[s]));return U},W.children=function(){for(var L=this.node.childNodes,U=[],o=0;o<L.length;o++)1===L[o].nodeType&&U.push(_(L[o]));return U},W.parent=function(){return _(this.node.parentNode)||null},W.index=function(){for(var L=0,U=this.node.previousSibling;U;)1===U.nodeType&&L++,U=U.previousSibling;return L},W.findParentByClass=function(L,U){for(var o=this.node.ownerSVGElement,s=this.node.parentNode;s&&s!==U&&s!==o;){var d=_(s);if(d.hasClass(L))return d;s=s.parentNode}return null},W.contains=function(L){var U=this.node,o=_.toNode(L),s=o&&o.parentNode;return U===s||!!(s&&1===s.nodeType&&16&U.compareDocumentPosition(s))},W.toLocalPoint=function(L,U){var o=this.svg().node,s=o.createSVGPoint();s.x=L,s.y=U;try{var d=s.matrixTransform(o.getScreenCTM().inverse()),m=this.getTransformToElement(o).inverse()}catch(I){return s}return d.matrixTransform(m)},W.translateCenterToPoint=function(L){var o=this.getBBox({target:this.svg()}).center();return this.translate(L.x-o.x,L.y-o.y),this},W.translateAndAutoOrient=function(L,U,o){L=new me(L),U=new me(U),o||(o=this.svg());var s=this.scale();this.attr("transform","");var d=this.getBBox({target:o}).scale(s.sx,s.sy),m=_.createSVGTransform();m.setTranslate(-d.x-d.width/2,-d.y-d.height/2);var I=_.createSVGTransform(),F=L.angleBetween(U,L.clone().offset(1,0));F&&I.setRotate(F,0,0);var q=_.createSVGTransform(),te=L.clone().move(U,d.width/2);q.setTranslate(2*L.x-te.x,2*L.y-te.y);var ae=this.getTransformToElement(o),Se=_.createSVGTransform();return Se.setMatrix(q.matrix.multiply(I.matrix.multiply(m.matrix.multiply(ae.scale(s.sx,s.sy))))),this.attr("transform",_.matrixToTransformString(Se.matrix)),this},W.animateAlongPath=function(L,U){U=_.toNode(U);var o=_.ensureId(U),s=_("animateMotion",L),d=_("mpath",{"xlink:href":"#"+o});s.append(d),this.append(s);try{s.node.beginElement()}catch(Te){if("fake"===document.documentElement.getAttribute("smiling")){var m=s.node;m.animators=[];var I=m.getAttribute("id");I&&(id2anim[I]=m);for(var F=getTargets(m),q=0,te=F.length;q<te;q++){var Se=new Animator(m,F[q],q);animators.push(Se),m.animators[q]=Se,Se.register()}}}return this},W.hasClass=function(L){return new RegExp("(\\s|^)"+L+"(\\s|$)").test(this.node.getAttribute("class"))},W.addClass=function(L){if(L&&!this.hasClass(L)){var U=this.node.getAttribute("class")||"";this.node.setAttribute("class",(U+" "+L).trim())}return this},W.removeClass=function(L){if(L&&this.hasClass(L)){var U=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+L+"(\\s|$)","g"),"$2");this.node.setAttribute("class",U)}return this},W.toggleClass=function(L,U){return(_.isUndefined(U)?this.hasClass(L):!U)?this.removeClass(L):this.addClass(L),this},W.sample=function(L){L=L||1;for(var m,U=this.node,o=U.getTotalLength(),s=[],d=0;d<o;)m=U.getPointAtLength(d),s.push({x:m.x,y:m.y,distance:d}),d+=L;return s},W.convertToPath=function(){var L=_("path");L.attr(this.attr());var U=this.convertToPathData();return U&&L.attr("d",U),L},W.convertToPathData=function(){var L=this.tagName();switch(L){case"PATH":return this.attr("d");case"LINE":return _.convertLineToPathData(this.node);case"POLYGON":return _.convertPolygonToPathData(this.node);case"POLYLINE":return _.convertPolylineToPathData(this.node);case"ELLIPSE":return _.convertEllipseToPathData(this.node);case"CIRCLE":return _.convertCircleToPathData(this.node);case"RECT":return _.convertRectToPathData(this.node)}throw new Error(L+" cannot be converted to PATH.")},_.prototype.toGeometryShape=function(){var L,U,o,s,d,m,I,F,q,te,ae,Se,Te,Oe,qe;switch(this.tagName()){case"RECT":return L=parseFloat(this.attr("x"))||0,U=parseFloat(this.attr("y"))||0,o=parseFloat(this.attr("width"))||0,s=parseFloat(this.attr("height"))||0,new at(L,U,o,s);case"CIRCLE":return d=parseFloat(this.attr("cx"))||0,m=parseFloat(this.attr("cy"))||0,I=parseFloat(this.attr("r"))||0,new Xn({x:d,y:m},I,I);case"ELLIPSE":return d=parseFloat(this.attr("cx"))||0,m=parseFloat(this.attr("cy"))||0,F=parseFloat(this.attr("rx"))||0,q=parseFloat(this.attr("ry"))||0,new Xn({x:d,y:m},F,q);case"POLYLINE":return te=_.getPointsFromSvgNode(this),new dn(te);case"POLYGON":return(te=_.getPointsFromSvgNode(this)).length>1&&te.push(te[0]),new dn(te);case"PATH":return ae=this.attr("d"),Tt.isDataSupported(ae)||(ae=_.normalizePathData(ae)),new Tt(ae);case"LINE":return Se=parseFloat(this.attr("x1"))||0,Oe=parseFloat(this.attr("y1"))||0,Te=parseFloat(this.attr("x2"))||0,qe=parseFloat(this.attr("y2"))||0,new vt({x:Se,y:Oe},{x:Te,y:qe})}return this.getBBox()},W.findIntersection=function(L,U){var o=this.svg().node,s=this.getBBox({target:U=U||o}),d=s.center();if(s.intersectionWithLineFromCenterToPoint(L)){var m,I=this.tagName();if("RECT"===I){var F=new at(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),q=this.getTransformToElement(U),te=_.decomposeMatrix(q),ae=o.createSVGTransform();ae.setRotate(-te.rotation,d.x,d.y);var Se=_.transformRect(F,ae.matrix.multiply(q));m=new at(Se).intersectionWithLineFromCenterToPoint(L,te.rotation)}else if("PATH"===I||"POLYGON"===I||"POLYLINE"===I||"CIRCLE"===I||"ELLIPSE"===I){var pt,rt,nt,lt,Ht,Oe=("PATH"===I?this:this.convertToPath()).sample(),qe=1/0,ot=[];for(pt=0;pt<Oe.length;pt++)nt=(nt=_.createSVGPoint((rt=Oe[pt]).x,rt.y)).matrixTransform(this.getTransformToElement(U)),(Ht=(rt=new me(nt)).distance(d)+(lt=1.1*rt.distance(L)))<qe?(qe=Ht,ot=[{sample:rt,refDistance:lt}]):Ht<qe+1&&ot.push({sample:rt,refDistance:lt});ot.sort(function(Xt,on){return Xt.refDistance-on.refDistance}),ot[0]&&(m=ot[0].sample)}return m}},W.setAttribute=function(L,U){var o=this.node;if(null===U)return this.removeAttr(L),this;var s=_.qualifyAttr(L);return s.ns?o.setAttributeNS(s.ns,L,U):"id"===L?o.id=U:o.setAttribute(L,U),this},_.createSvgDocument=function(L){if(L){const o=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${L}</svg>`,{documentElement:s}=_.parseXML(o,{async:!1});return s}const U=document.createElementNS(n.svg,"svg");return U.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),U.setAttribute("version","1.1"),U},_.createSVGStyle=function(L){const{node:U}=_("style",{type:"text/css"},[_.createCDATASection(L)]);return U},_.createCDATASection=function(L=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(L)},_.idCounter=0,_.uniqueId=function(){return"v-"+ ++_.idCounter},_.toNode=function(L){return _.isV(L)?L.node:L.nodeName&&L||L[0]},_.ensureId=function(L){return(L=_.toNode(L)).id||(L.id=_.uniqueId())},_.sanitizeText=function(L){return(L||"").replace(/ /g,"\xa0")},_.isUndefined=function(L){return void 0===L},_.isString=function(L){return"string"==typeof L},_.isObject=function(L){return L&&"object"==typeof L},_.isArray=Array.isArray,_.parseXML=function(L,U){var o;U=U||{};try{var s=new DOMParser;_.isUndefined(U.async)||(s.async=U.async),o=s.parseFromString(L,"text/xml")}catch(d){o=void 0}if(!o||o.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+L);return o},_.qualifyAttr=function(L){if(-1!==L.indexOf(":")){var U=L.split(":");return{ns:n[U[0]],local:U[1]}}return{ns:null,local:L}},_.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,_.transformSeparatorRegex=/[ ,]+/,_.transformationListRegex=/^(\w+)\((.*)\)/,_.transformStringToMatrix=function(L){var U=_.createSVGMatrix(),o=L&&L.match(_.transformRegex);if(!o)return U;for(var s=0,d=o.length;s<d;s++){var I=o[s].match(_.transformationListRegex);if(I){var F,q,te,ae,Se,Te=_.createSVGMatrix(),Oe=I[2].split(_.transformSeparatorRegex);switch(I[1].toLowerCase()){case"scale":F=parseFloat(Oe[0]),q=void 0===Oe[1]?F:parseFloat(Oe[1]),Te=Te.scaleNonUniform(F,q);break;case"translate":te=parseFloat(Oe[0]),ae=parseFloat(Oe[1]),Te=Te.translate(te,ae);break;case"rotate":Se=parseFloat(Oe[0]),te=parseFloat(Oe[1])||0,ae=parseFloat(Oe[2])||0,Te=0!==te||0!==ae?Te.translate(te,ae).rotate(Se).translate(-te,-ae):Te.rotate(Se);break;case"skewx":Se=parseFloat(Oe[0]),Te=Te.skewX(Se);break;case"skewy":Se=parseFloat(Oe[0]),Te=Te.skewY(Se);break;case"matrix":Te.a=parseFloat(Oe[0]),Te.b=parseFloat(Oe[1]),Te.c=parseFloat(Oe[2]),Te.d=parseFloat(Oe[3]),Te.e=parseFloat(Oe[4]),Te.f=parseFloat(Oe[5]);break;default:continue}U=U.multiply(Te)}}return U},_.matrixToTransformString=function(L){return L||(L=!0),"matrix("+(void 0!==L.a?L.a:1)+","+(void 0!==L.b?L.b:0)+","+(void 0!==L.c?L.c:0)+","+(void 0!==L.d?L.d:1)+","+(void 0!==L.e?L.e:0)+","+(void 0!==L.f?L.f:0)+")"},_.parseTransformString=function(L){var U,o,s;if(L){var d=_.transformSeparatorRegex;if(L.trim().indexOf("matrix")>=0){var m=_.transformStringToMatrix(L),I=_.decomposeMatrix(m);s=[I.scaleX,I.scaleY],o=[I.rotation];var F=[];(0!==(U=[I.translateX,I.translateY])[0]||0!==U[1])&&F.push("translate("+U+")"),(1!==s[0]||1!==s[1])&&F.push("scale("+s+")"),0!==o[0]&&F.push("rotate("+o+")"),L=F.join(" ")}else{var q=L.match(/translate\((.*?)\)/);q&&(U=q[1].split(d));var te=L.match(/rotate\((.*?)\)/);te&&(o=te[1].split(d));var ae=L.match(/scale\((.*?)\)/);ae&&(s=ae[1].split(d))}}var Se=s&&s[0]?parseFloat(s[0]):1;return{value:L,translate:{tx:U&&U[0]?parseInt(U[0],10):0,ty:U&&U[1]?parseInt(U[1],10):0},rotate:{angle:o&&o[0]?parseInt(o[0],10):0,cx:o&&o[1]?parseInt(o[1],10):void 0,cy:o&&o[2]?parseInt(o[2],10):void 0},scale:{sx:Se,sy:s&&s[1]?parseFloat(s[1]):Se}}},_.deltaTransformPoint=function(L,U){return{x:U.x*L.a+U.y*L.c+0,y:U.x*L.b+U.y*L.d+0}},_.decomposeMatrix=function(L){var U=_.deltaTransformPoint(L,{x:0,y:1}),o=_.deltaTransformPoint(L,{x:1,y:0}),s=180/a*u(U.y,U.x)-90,d=180/a*u(o.y,o.x);return{translateX:L.e,translateY:L.f,scaleX:c(L.a*L.a+L.b*L.b),scaleY:c(L.c*L.c+L.d*L.d),skewX:s,skewY:d,rotation:s}},_.matrixToScale=function(L){var U,o,s,d;return L?(U=_.isUndefined(L.a)?1:L.a,d=_.isUndefined(L.d)?1:L.d,o=L.b,s=L.c):U=d=1,{sx:o?c(U*U+o*o):U,sy:s?c(s*s+d*d):d}},_.matrixToRotate=function(L){var U={x:0,y:1};return L&&(U=_.deltaTransformPoint(L,U)),{angle:Ln(Ji(u(U.y,U.x))-90)}},_.matrixToTranslate=function(L){return{tx:L&&L.e||0,ty:L&&L.f||0}},_.isV=function(L){return L instanceof _},_.isVElement=_.isV,_.isSVGGraphicsElement=function(L){return!!L&&(L=_.toNode(L))instanceof SVGElement&&"function"==typeof L.getScreenCTM};var Le=_("svg").node;return _.createSVGMatrix=function(L){var U=Le.createSVGMatrix();for(var o in L)U[o]=L[o];return U},_.createSVGTransform=function(L){return _.isUndefined(L)?Le.createSVGTransform():(L instanceof SVGMatrix||(L=_.createSVGMatrix(L)),Le.createSVGTransformFromMatrix(L))},_.createSVGPoint=function(L,U){var o=Le.createSVGPoint();return o.x=L,o.y=U,o},_.transformRect=function(L,U){var o=Le.createSVGPoint();o.x=L.x,o.y=L.y;var s=o.matrixTransform(U);o.x=L.x+L.width,o.y=L.y;var d=o.matrixTransform(U);o.x=L.x+L.width,o.y=L.y+L.height;var m=o.matrixTransform(U);o.x=L.x,o.y=L.y+L.height;var I=o.matrixTransform(U),F=v(s.x,d.x,m.x,I.x),q=y(s.x,d.x,m.x,I.x),te=v(s.y,d.y,m.y,I.y),ae=y(s.y,d.y,m.y,I.y);return new at(F,te,q-F,ae-te)},_.transformPoint=function(L,U){return new me(_.createSVGPoint(L.x,L.y).matrixTransform(U))},_.transformLine=function(L,U){return new vt(_.transformPoint(L.start,U),_.transformPoint(L.end,U))},_.transformPolyline=function(L,U){var o=L instanceof dn?L.points:L;_.isArray(o)||(o=[]);for(var s=[],d=0,m=o.length;d<m;d++)s[d]=_.transformPoint(o[d],U);return new dn(s)},_.styleToObject=function(L){for(var U={},o=L.split(";"),s=0;s<o.length;s++){var m=o[s].split("=");U[m[0].trim()]=m[1].trim()}return U},_.createSlicePathData=function(L,U,o,s){var d=2*a-1e-6,m=L,I=U,F=o,q=s,te=(q<F&&(te=F,F=q,q=te),q-F),ae=te<a?"0":"1",Se=T(F),Te=A(F),Oe=T(q),qe=A(q);return te>=d?m?"M0,"+I+"A"+I+","+I+" 0 1,1 0,"+-I+"A"+I+","+I+" 0 1,1 0,"+I+"M0,"+m+"A"+m+","+m+" 0 1,0 0,"+-m+"A"+m+","+m+" 0 1,0 0,"+m+"Z":"M0,"+I+"A"+I+","+I+" 0 1,1 0,"+-I+"A"+I+","+I+" 0 1,1 0,"+I+"Z":m?"M"+I*Se+","+I*Te+"A"+I+","+I+" 0 "+ae+",1 "+I*Oe+","+I*qe+"L"+m*Oe+","+m*qe+"A"+m+","+m+" 0 "+ae+",0 "+m*Se+","+m*Te+"Z":"M"+I*Se+","+I*Te+"A"+I+","+I+" 0 "+ae+",1 "+I*Oe+","+I*qe+"L0,0Z"},_.mergeAttrs=function(L,U){for(var o in U)L[o]="class"===o?L[o]?L[o]+" "+U[o]:U[o]:"style"===o?_.isObject(L[o])&&_.isObject(U[o])?_.mergeAttrs(L[o],U[o]):_.isObject(L[o])?_.mergeAttrs(L[o],_.styleToObject(U[o])):_.isObject(U[o])?_.mergeAttrs(_.styleToObject(L[o]),U[o]):_.mergeAttrs(_.styleToObject(L[o]),_.styleToObject(U[o])):U[o];return L},_.annotateString=function(L,U,o){U=U||[];for(var m,F,q,s=(o=o||{}).offset||0,d=[],I=[],te=0;te<L.length;te++){F=I[te]=L[te];for(var ae=0;ae<U.length;ae++){var Se=U[ae];te>=Se.start+s&&te<Se.end+s&&(_.isObject(F)?F.attrs=_.mergeAttrs(_.mergeAttrs({},F.attrs),Se.attrs):F=I[te]={t:L[te],attrs:Se.attrs},o.includeAnnotationIndices&&(F.annotations||(F.annotations=[])).push(ae))}(q=I[te-1])?_.isObject(F)&&_.isObject(q)?JSON.stringify(F.attrs)===JSON.stringify(q.attrs)?m.t+=F.t:(d.push(m),m=F):_.isObject(F)||_.isObject(q)?(d.push(m),m=F):m=(m||"")+F:m=F}return m&&d.push(m),d},_.findAnnotationsAtIndex=function(L,U){var o=[];return L&&L.forEach(function(s){s.start<U&&U<=s.end&&o.push(s)}),o},_.findAnnotationsBetweenIndexes=function(L,U,o){var s=[];return L&&L.forEach(function(d){(U>=d.start&&U<d.end||o>d.start&&o<=d.end||d.start>=U&&d.end<o)&&s.push(d)}),s},_.shiftAnnotations=function(L,U,o){return L&&L.forEach(function(s){s.start<U&&s.end>=U?s.end+=o:s.start>=U&&(s.start+=o,s.end+=o)}),L},_.convertLineToPathData=function(L){return["M",(L=_(L)).attr("x1"),L.attr("y1"),"L",L.attr("x2"),L.attr("y2")].join(" ")},_.convertPolygonToPathData=function(L){var U=_.getPointsFromSvgNode(L);return 0===U.length?null:_.svgPointsToPath(U)+" Z"},_.convertPolylineToPathData=function(L){var U=_.getPointsFromSvgNode(L);return 0===U.length?null:_.svgPointsToPath(U)},_.svgPointsToPath=function(L){for(var U=0,o=L.length;U<o;U++)L[U]=L[U].x+" "+L[U].y;return"M "+L.join(" L")},_.getPointsFromSvgNode=function(L){var U=[],o=(L=_.toNode(L)).points;if(o)for(var s=0,d=o.numberOfItems;s<d;s++)U.push(o.getItem(s));return U},_.KAPPA=.551784,_.convertCircleToPathData=function(L){L=_(L);var U=parseFloat(L.attr("cx"))||0,o=parseFloat(L.attr("cy"))||0,s=parseFloat(L.attr("r")),d=s*_.KAPPA;return["M",U,o-s,"C",U+d,o-s,U+s,o-d,U+s,o,"C",U+s,o+d,U+d,o+s,U,o+s,"C",U-d,o+s,U-s,o+d,U-s,o,"C",U-s,o-d,U-d,o-s,U,o-s,"Z"].join(" ")},_.convertEllipseToPathData=function(L){L=_(L);var U=parseFloat(L.attr("cx"))||0,o=parseFloat(L.attr("cy"))||0,s=parseFloat(L.attr("rx")),d=parseFloat(L.attr("ry"))||s,m=s*_.KAPPA,I=d*_.KAPPA;return["M",U,o-d,"C",U+m,o-d,U+s,o-I,U+s,o,"C",U+s,o+I,U+m,o+d,U,o+d,"C",U-m,o+d,U-s,o+I,U-s,o,"C",U-s,o-I,U-m,o-d,U,o-d,"Z"].join(" ")},_.convertRectToPathData=function(L){return L=_(L),_.rectToPath({x:parseFloat(L.attr("x"))||0,y:parseFloat(L.attr("y"))||0,width:parseFloat(L.attr("width"))||0,height:parseFloat(L.attr("height"))||0,rx:parseFloat(L.attr("rx"))||0,ry:parseFloat(L.attr("ry"))||0})},_.rectToPath=function(L){var o=L.x,s=L.y,d=L.width,m=L.height,I=v(L.rx||L["top-rx"]||0,d/2),F=v(L.rx||L["bottom-rx"]||0,d/2),q=v(L.ry||L["top-ry"]||0,m/2),te=v(L.ry||L["bottom-ry"]||0,m/2);return(I||F||q||te?["M",o,s+q,"v",m-q-te,"a",F,te,0,0,0,F,te,"h",d-2*F,"a",F,te,0,0,0,F,-te,"v",-(m-te-q),"a",I,q,0,0,0,-I,-q,"h",-(d-2*I),"a",I,q,0,0,0,-I,q,"Z"]:["M",o,s,"H",o+d,"V",s+m,"H",o,"V",s,"Z"]).join(" ")},_.normalizePathData=function(){var L="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",U=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),o=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig"),s=Math,d=s.PI,m=s.sin,I=s.cos,F=s.tan,q=s.asin,te=s.sqrt,ae=s.abs;function Se(rt,nt,ut,lt,Ht,Xt){var on=.3333333333333333,At=2/3;return[on*rt+At*ut,on*nt+At*lt,on*Ht+At*ut,on*Xt+At*lt,Ht,Xt]}function Te(rt,nt,ut){return{x:rt*I(ut)-nt*m(ut),y:rt*m(ut)+nt*I(ut)}}function Oe(rt,nt,ut,lt,Ht,Xt,on,At,Cn,Zt){var yt,Yt=120*d/180,mn=d/180*(+Ht||0),Dt=[];if(Zt)$r=Zt[0],vr=Zt[1],zl=Zt[2],Ul=Zt[3];else{nt=(yt=Te(rt,nt,-mn)).y;var Wr=((rt=yt.x)-(At=(yt=Te(At,Cn,-mn)).x))/2,ai=(nt-(Cn=yt.y))/2,Ia=Wr*Wr/(ut*ut)+ai*ai/(lt*lt);Ia>1&&(ut*=Ia=te(Ia),lt*=Ia);var sg=ut*ut,ug=lt*lt,bg=(Xt==on?-1:1)*te(ae((sg*ug-sg*ai*ai-ug*Wr*Wr)/(sg*ai*ai+ug*Wr*Wr))),zl=bg*ut*ai/lt+(rt+At)/2,Ul=bg*-lt*Wr/ut+(nt+Cn)/2,$r=q(((nt-Ul)/lt).toFixed(9)),vr=q(((Cn-Ul)/lt).toFixed(9));($r=rt<zl?d-$r:$r)<0&&($r=2*d+$r),(vr=At<zl?d-vr:vr)<0&&(vr=2*d+vr),on&&$r>vr&&($r-=2*d),!on&&vr>$r&&(vr-=2*d)}var lg=vr-$r;if(ae(lg)>Yt){var Ig=vr,Ag=At,Mg=Cn;Dt=Oe(At=zl+ut*I(vr=$r+Yt*(on&&vr>$r?1:-1)),Cn=Ul+lt*m(vr),ut,lt,Ht,0,on,Ag,Mg,[vr,Ig,zl,Ul])}lg=vr-$r;var kg=I($r),Og=m($r),Lg=I(vr),Ng=m(vr),_g=F(lg/4),Cg=4/3*(ut*_g),wg=4/3*(lt*_g),Sg=[rt,nt],Mu=[rt+Cg*Og,nt-wg*kg],Tg=[At+Cg*Ng,Cn-wg*Lg],Eg=[At,Cn];if(Mu[0]=2*Sg[0]-Mu[0],Mu[1]=2*Sg[1]-Mu[1],Zt)return[Mu,Tg,Eg].concat(Dt);for(var Pg=[],Rg=(Dt=[Mu,Tg,Eg].concat(Dt).join().split(",")).length,ms=0;ms<Rg;ms++)Pg[ms]=ms%2?Te(Dt[ms-1],Dt[ms],mn).y:Te(Dt[ms],Dt[ms+1],mn).x;return Pg}function pt(rt){var nt=function ot(rt){if((!Array.isArray(rt)||!Array.isArray(rt&&rt[0]))&&(rt=function qe(rt){if(!rt)return null;var nt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ut=[];return String(rt).replace(U,function(lt,Ht,Xt){var on=[],At=Ht.toLowerCase();for(Xt.replace(o,function(Cn,Zt){Zt&&on.push(+Zt)}),"m"===At&&on.length>2&&(ut.push([Ht].concat(on.splice(0,2))),At="l",Ht="m"===Ht?"l":"L");on.length>=nt[At]&&(ut.push([Ht].concat(on.splice(0,nt[At]))),nt[At]););}),ut}(rt)),!rt||!rt.length)return[["M",0,0]];for(var At,nt=[],ut=0,lt=0,Ht=0,Xt=0,Cn=rt.length,Zt=0;Zt<Cn;Zt++){var Yt=[];nt.push(Yt);var Dt,yt,mn=rt[Zt];if((At=mn[0])!=At.toUpperCase())switch(Yt[0]=At.toUpperCase(),Yt[0]){case"A":Yt[1]=mn[1],Yt[2]=mn[2],Yt[3]=mn[3],Yt[4]=mn[4],Yt[5]=mn[5],Yt[6]=+mn[6]+ut,Yt[7]=+mn[7]+lt;break;case"V":Yt[1]=+mn[1]+lt;break;case"H":Yt[1]=+mn[1]+ut;break;case"M":for(Ht=+mn[1]+ut,Xt=+mn[2]+lt,Dt=mn.length,yt=1;yt<Dt;yt++)Yt[yt]=+mn[yt]+(yt%2?ut:lt);break;default:for(Dt=mn.length,yt=1;yt<Dt;yt++)Yt[yt]=+mn[yt]+(yt%2?ut:lt)}else for(var Wr=mn.length,ai=0;ai<Wr;ai++)Yt[ai]=mn[ai];switch(Yt[0]){case"Z":ut=+Ht,lt=+Xt;break;case"H":ut=Yt[1];break;case"V":lt=Yt[1];break;case"M":Ht=Yt[Yt.length-2],Xt=Yt[Yt.length-1],ut=Yt[Yt.length-2],lt=Yt[Yt.length-1];break;default:ut=Yt[Yt.length-2],lt=Yt[Yt.length-1]}}return nt}(rt),ut={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function lt(Dt,yt,Wr){var ai,Ia;if(!Dt)return["C",yt.x,yt.y,yt.x,yt.y,yt.x,yt.y];switch(Dt[0]in{T:1,Q:1}||(yt.qx=null,yt.qy=null),Dt[0]){case"M":yt.X=Dt[1],yt.Y=Dt[2];break;case"A":Dt=0===parseFloat(Dt[1])||0===parseFloat(Dt[2])?["L",Dt[6],Dt[7]]:["C"].concat(Oe.apply(0,[yt.x,yt.y].concat(Dt.slice(1))));break;case"S":"C"===Wr||"S"===Wr?(ai=2*yt.x-yt.bx,Ia=2*yt.y-yt.by):(ai=yt.x,Ia=yt.y),Dt=["C",ai,Ia].concat(Dt.slice(1));break;case"T":"Q"===Wr||"T"===Wr?(yt.qx=2*yt.x-yt.qx,yt.qy=2*yt.y-yt.qy):(yt.qx=yt.x,yt.qy=yt.y),Dt=["C"].concat(Se(yt.x,yt.y,yt.qx,yt.qy,Dt[1],Dt[2]));break;case"Q":yt.qx=Dt[1],yt.qy=Dt[2],Dt=["C"].concat(Se(yt.x,yt.y,Dt[1],Dt[2],Dt[3],Dt[4]));break;case"H":Dt=["L"].concat(Dt[1],yt.y);break;case"V":Dt=["L"].concat(yt.x,Dt[1])}return Dt}function Ht(Dt,yt){if(Dt[yt].length>7){Dt[yt].shift();for(var Wr=Dt[yt];Wr.length;)Xt[yt]="A",Dt.splice(yt++,0,["C"].concat(Wr.splice(0,6)));Dt.splice(yt,1),Cn=nt.length}}for(var Xt=[],on="",At="",Cn=nt.length,Zt=0;Zt<Cn;Zt++){nt[Zt]&&(on=nt[Zt][0]),"C"!==on&&(Xt[Zt]=on,Zt>0&&(At=Xt[Zt-1])),nt[Zt]=lt(nt[Zt],ut,At),"A"!==Xt[Zt]&&"C"===on&&(Xt[Zt]="C"),Ht(nt,Zt);var Yt=nt[Zt],mn=Yt.length;ut.x=Yt[mn-2],ut.y=Yt[mn-1],ut.bx=parseFloat(Yt[mn-4])||ut.x,ut.by=parseFloat(Yt[mn-3])||ut.y}return(!nt[0][0]||"M"!==nt[0][0])&&nt.unshift(["M",0,0]),nt}return function(rt){return pt(rt).join(",").split(",").join(" ")}}(),_.namespace=n,_.g=g,_}(),xr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Or=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,xr.classNamePrefix.length)!==xr.classNamePrefix&&(n=xr.classNamePrefix+n),n}).join(" ")},jr=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,xr.classNamePrefix.length)===xr.classNamePrefix&&(n=n.substr(xr.classNamePrefix.length)),n}).join(" ")},di=function(e,n){for(var t={},r={},a=Fe.namespace.svg,u=n||a,c=document.createDocumentFragment(),v=[e,c,u];v.length>0;){u=v.pop();for(var y=v.pop(),T=v.pop(),A=0,_=T.length;A<_;A++){var W=T[A];if(!W.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var ne=W.tagName;W.hasOwnProperty("namespaceURI")&&(u=W.namespaceURI);var oe=document.createElementNS(u,ne),we=u===a,Pe=we?Fe:cn,Re=W.attributes;Re&&Pe(oe).attr(Re);var Le=W.style;if(Le&&cn(oe).css(Le),W.hasOwnProperty("className")){var L=W.className;we?oe.className.baseVal=L:oe.className=L}if(W.hasOwnProperty("textContent")&&(oe.textContent=W.textContent),W.hasOwnProperty("selector")){var U=W.selector;if(t[U])throw new Error("json-dom-parser: selector must be unique");t[U]=oe,Pe(oe).attr("joint-selector",U)}if(W.hasOwnProperty("groupSelector")){var o=W.groupSelector;Array.isArray(o)||(o=[o]);for(var s=0,d=o.length;s<d;s++){var m=o[s],I=r[m];I||(I=r[m]=[]),I.push(oe)}}y.appendChild(oe);var F=W.children;Array.isArray(F)&&v.push(F,oe,u)}}return{fragment:c,selectors:t,groupSelectors:r}},zr=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},zn=function(e,n,t){for(var a,r=Array.isArray(n)?n:n.split(t||"/"),u=0,c=r.length;u<c;){if(a=r[u++],Object(e)!==e||!(a in e))return;e=e[a]}return e},Fi=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},Lr=function(e,n,t,r){const a=Array.isArray(n)?n:n.split(r||"/"),u=a.length-1;let c=e,v=0;for(;v<u;v++){const y=a[v];if(!Fi(c,y))return e;c=c[y]||(c[y]={})}return c[a[u]]=t,e},bi=function(e,n,t){const r=Array.isArray(n)?n:n.split(t||"/"),a=r.length-1;let u=e,c=0;for(;c<a;c++){const v=r[c];if(!Fi(u,v))return e;const y=u[v];if(!y)return e;u=y}return delete u[r[a]],e},ro=function(e){return ro.id=ro.id||1,e.id=void 0===e.id?"j_"+ro.id++:e.id,e.id},Tn=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Un=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var r in e)void 0===t[r]&&(t[r]=e[r]);n=t}var a=n.target;if(a){var u=a.correspondingUseElement;u&&(n.target=u)}return n},$o=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var r=(new Date).getTime(),a=Math.max(0,16-(r-n)),u=setTimeout(function(){t(r+a)},a);return n=r+a,u}}return function(t,r,...a){return e(void 0!==r?t.bind(r,...a):t)}}(),ca=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),kn=function(e){return xn(e)&&"%"===e.slice(-1)},ys=function(e,n){var r=parseFloat(e);if(Number.isNaN(r))return null;var u,a={};if(a.value=r,null==n)u="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;u=n.join("|")}else xn(n)&&(u=n);var c=function t(v){var y=new RegExp("(?:\\d+(?:\\.\\d+)*)("+v+")$").exec(e);return y?y[1]:null}(u);return null===c?null:(a.unit=c,a)},Xo=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,r,a,u;return t=r=a=u=0,isFinite(e.vertical)&&(t=a=+e.vertical),isFinite(e.horizontal)&&(r=u=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(a=+e.bottom),isFinite(e.left)&&(u=+e.left),{top:t,right:r,bottom:a,left:u}},xs={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var r=(11-6*n-11*e)/4;return-r*r+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(r){var a=e(r);return a<n?n:a>t?t:a}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},Qr={number:function(e,n){var t=n-e;return function(r){return e+t*r}},object:function(e,n){var t=Object.keys(e);return function(r){var a,u,c={};for(a=t.length-1;-1!=a;a--)c[u=t[a]]=e[u]+(n[u]-e[u])*r;return c}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),r=parseInt(n.slice(1),16),a=255&t,u=(255&r)-a,c=65280&t,v=(65280&r)-c,y=16711680&t,T=(16711680&r)-y;return function(A){return"#"+(1<<24|a+u*A&255|c+v*A&65280|y+T*A&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=t.exec(e),a=t.exec(n),u=a[1].indexOf("."),c=u>0?a[1].length-u-1:0,v=+a[1]-(e=+r[1]),y=r[2];return function(T){return(e+v*T).toFixed(c)+y}}},_i={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return rr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return rr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return rr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return rr(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return rr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return rr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return rr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return rr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return rr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return rr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return rr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},rr=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(r){for(var a=Array.from(arguments),u=a.slice(1,4).find(function(y){return!!y}),c=u.split("."),v=t[c.shift()];void 0!==v&&c.length;)v=v[c.shift()];return void 0!==v?v:""})}},Et=Ut.assign,Nr=Ut.defaults,Fa=Ut.defaultsDeep,hi=Ut.invokeMap||Ut.invoke,$s=Ut.sortedIndexBy||Ut.sortedIndex,fa=Ut.uniqBy||Ut.uniq,ir=Ut.clone,xe=Ut.cloneDeep,Ge=Ut.isEmpty,Ve=Ut.isEqual,et=Ut.isFunction,St=Ut.isPlainObject,_t=Ut.toArray,An=Ut.groupBy,Ru=Ut.flattenDeep,Z=Ut.without,de=Ut.difference,$e=Ut.union,Ee=Ut.has,ze=Ut.result,Ue=Ut.omit,ct=Ut.pick,Ct=Ut.forIn,Nt=Ut.camelCase,Ft=Ut.uniqueId,Lt=function(){if(Ut.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=et(n)?n:Qn;return e.push(function(r,a){var u=t(r,a);return void 0!==u?u:Array.isArray(r)&&!Array.isArray(a)?a:void 0}),Ut.mergeWith.apply(this,e)}return Ut.merge.apply(this,arguments)},ft=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},gn=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},xn=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},Qn=function(){};var e,n,rn=f(71066);function To(e){e=fa(e);const n=_t(e).reduce(function(t,r){return t[r.id]=r.clone(),t},{});return _t(e).forEach(function(t){const r=n[t.id];if(r.isLink()){const c=r.source(),v=r.target();c.id&&n[c.id]&&r.prop("source/id",n[c.id].id),v.id&&n[v.id]&&r.prop("target/id",n[v.id].id)}const a=t.get("parent");a&&n[a]&&r.set("parent",n[a].id);const u=_t(t.get("embeds")).reduce(function(c,v){return n[v]&&c.push(n[v].id),c},[]);Ge(u)||r.set("embeds",u)}),n}const br={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Rr=Object.keys(br).map(e=>br[e]).join(""),Ba="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",da=/\s/g,bs=new RegExp(`^(${Ba}\\*)?([${Rr}])([-+]{1,2}${Ba})?$`,"g");function Xl(e){throw new Error(`Invalid calc() expression: ${e}`)}function Nf(e,n){const t=bs.exec(e.replace(da,""));t||Xl(e),bs.lastIndex=0;const[,r=1,a,u=0]=t,{x:c,y:v,width:y,height:T}=n;let A=0;switch(a){case br.width:A=y;break;case br.height:A=T;break;case br.x:A=c;break;case br.y:A=v;break;case br.minimum:A=Math.min(T,y);break;case br.maximum:A=Math.max(T,y);break;case br.diagonal:A=Math.sqrt(T*T+y*y)}return parseFloat(r)*A+function Rf(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(u)}function Ha(e){return"string"==typeof e&&e.includes("calc")}const Ys="calc(".length;function Du(e,n){let t=e,r=0;for(;;){let a=t.indexOf("calc(",r);if(-1===a)return t;let u=a+Ys,c=1;e:for(;;){switch(t[u]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:Xl(t)}u++}let v=t.slice(a+Ys,u);Ha(v)&&(v=Du(v,n));const y=String(Nf(v,n));t=t.slice(0,a)+y+t.slice(u+1),r=a+y.length}}function Eo(e,n){return function(t,r){var a=kn(t);t=parseFloat(t),a&&(t/=100);var u={};if(isFinite(t)){var c=a||t>=0&&t<=1?t*r[n]:Math.max(t+r[n],0);u[e]=c}return u}}function Xs(e,n,t){return function(r,a){var c,u=kn(r);if(r=parseFloat(r),u&&(r/=100),isFinite(r)){var v=a[t]();c=u||r>0&&r<1?v[e]+a[n]*r:v[e]+r}var y=me();return y[e]=c||0,y}}function Kl(e,n,t){return function(r,a){var u;u="middle"===r?a[n]/2:r===t?a[n]:isFinite(r)?r>-1&&r<1?-a[n]*r:-r:kn(r)?a[n]*parseFloat(r)/100:0;var c=me();return c[e]=-(a[e]+u),c}}function cr(e,n){var t="joint-shape",r=n&&n.resetOffset;return function(a,u,c){var v=cn(c),y=v.data(t);if(!y||y.value!==a){var T=e(a);y={value:a,shape:T,shapeBBox:T.bbox()},v.data(t,y)}var A=y.shape.clone(),_=y.shapeBBox.clone(),W=_.origin(),ne=u.origin();_.x=ne.x,_.y=ne.y;var oe=u.maxRectScaleToFit(_,ne);return A.scale(0===_.width||0===u.width?1:oe.sx,0===_.height||0===u.height?1:oe.sy,W),r&&A.translate(-W.x,-W.y),A}}function Ar(e){var t=cr(function n(r){return new Tt(Fe.normalizePathData(r))},e);return function(r,a,u){return{d:t(r,a,u).serialize()}}}function Ql(e){var n=cr(dn,e);return function(t,r,a){return{points:n(t,r,a).serialize()}}}function Ks(e,n){var t=new me(1,0);return function(r){var a,u,c=this[e](r);return c?(u=n.rotate?c.vector().vectorAngle(t):0,a=c.start):(a=this.path.start,u=0),0===u?{transform:"translate("+a.x+","+a.y+")"}:{transform:"translate("+a.x+","+a.y+") rotate("+u+")"}}}function Fu(e){return function(t,r,a){const u=Fe(a);u.attr(e)!==t&&u.attr(e,t)}}function ja(e,n,t){return void 0!==t.text}function ha(){return this.model.isLink()}function pa(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(n["stroke-opacity"]=r,n["fill-opacity"]=r),n}function Qs(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const Jt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Fu("href")},xlinkHref:{set:Fu("xlink:href")},filter:{qualify:St,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:St,set:Qs},stroke:{qualify:St,set:Qs},sourceMarker:{qualify:St,set:function(e,n,t,r){return e=Et(pa(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:St,set:function(e,n,t,r){return e=Et(pa(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:St,set:function(e,n,t,r){return e=Et(pa(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!St(t.textWrap)},set:function(e,n,t,r){var a=cn(t),u="joint-text",c=a.data(u),v=ct(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:y}=v;Ha(y)&&(v.x=Du(y,n));var T=v.fontSize=r["font-size"]||r.fontSize,A=JSON.stringify([e,v]);if(void 0===c||c!==A){T&&t.setAttribute("font-size",T);var _=v.textPath;if(ft(_)){var W=_.selector;if("string"==typeof W){var ne=this.findBySelector(W)[0];ne instanceof SVGPathElement&&(v.textPath=Et({"xlink:href":"#"+ne.id},_))}}Fe(t).text(""+e,v),a.data(u,A)}}},textWrap:{qualify:St,set:function(e,n,t,r){var a=e.width||0,u={};u.width=kn(a)?n.width*parseFloat(a)/100:a<=0?n.width+a:a;var c=e.height||0;u.height=kn(c)?n.height*parseFloat(c)/100:c<=0?n.height+c:c;var v,y=e.text;void 0===y&&(y=r.text),v=void 0!==y?function(e,n,t={},r={}){var a=n.width,u=n.height,c=r.svgDocument||Fe("svg").node,v=Fe("tspan").node,y=Fe("text").attr(t).append(v).node,T=document.createTextNode("");y.style.opacity=0,y.style.display="block",v.style.display="block",v.appendChild(T),c.appendChild(y),r.svgDocument||document.body.appendChild(c);var A=r.separator||" ",_=r.eol||"\n",W=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,ne=r.maxLineCount;gn(ne)||(ne=1/0);for(var Re,Le,L,oe=e.split(A),we=[],Pe=[],U=0,o=0,s=oe.length;U<s;U++){var d=oe[U];if(d){var m=!1;if(_&&d.indexOf(_)>=0){if(d.length>1){for(var I=d.split(_),F=0,q=I.length-1;F<q;F++)I.splice(2*F+1,0,_);oe.splice(U,1,...I.filter(ut=>""!==ut)),U--,s=oe.length;continue}Pe[++o]="",m=!0}if(!m)if(T.data=Pe[o]?Pe[o]+" "+d:d,v.getComputedTextLength()<=a)Pe[o]=T.data,(Re||Le)&&(we[o++]=!0,Re=0,Le=0);else{if(!Pe[o]||Re){var te=!!Re;if(Re=d.length-1,te||!Re){if(!Re){if(!Pe[o]){Pe=[];break}oe.splice(U,2,d+oe[U+1]),s--,we[o++]=!0,U--;continue}oe[U]=d.substring(0,Re),oe[U+1]=d.substring(Re)+(void 0===oe[U+1]?"":oe[U+1])}else{if(Le)oe.splice(U,2,oe[U]+oe[U+1]),Le=0;else{var ae=d.search(W);ae>-1&&ae!==d.length-1&&0!==ae&&(Le=ae+1,Re=0),oe.splice(U,1,d.substring(0,Le||Re),d.substring(Le||Re)),s++}o&&!we[o-1]&&o--}U--;continue}o++,U--}var Se=null;if(Pe.length>ne)Se=ne-1;else if(void 0!==u){var Te;void 0===L&&(L=(Te="auto"===t.lineHeight?{value:1.5,unit:"em"}:ys(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===Te.unit&&(L*=y.getBBox().height)),L*Pe.length>u&&(Se=Math.floor(u/L)-1)}if(null!==Se){Pe.splice(Se+1);var Oe=r.ellipsis;if(!Oe||Se<0)break;"string"!=typeof Oe&&(Oe="\u2026");var qe=Pe[Se];if(!qe&&!m)break;var pt,rt,ot=qe.length;do{if(rt=qe[ot],pt=qe.substring(0,ot),rt?rt.match(A)&&(pt+=rt):pt+="string"==typeof A?A:" ",T.data=pt+=Oe,v.getComputedTextLength()<=a){Pe[Se]=pt;break}ot--}while(ot>=0);break}}}return r.svgDocument?c.removeChild(y):document.body.removeChild(c),Pe.join(_)}(""+y,u,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",Jt.text.set.call(this,v,n,t,r)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var r=cn(t),a="joint-title",u=r.data(a);if(void 0===u||u!==e){r.data(a,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var v=document.createElementNS(t.namespaceURI,"title");v.textContent=e,t.insertBefore(v,c)}}}},lineHeight:{qualify:ja},textVerticalAnchor:{qualify:ja},textPath:{qualify:ja},annotations:{qualify:ja},eol:{qualify:ja},displayEmpty:{qualify:ja},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:St,set:function(e,n,t){cn(t).css(e)}},html:{set:function(e,n,t){cn(t).html(e+"")}},ref:{},refX:{position:Xs("x","width","origin")},refY:{position:Xs("y","height","origin")},refDx:{position:Xs("x","width","corner")},refDy:{position:Xs("y","height","corner")},refWidth:{set:Eo("width","width")},refHeight:{set:Eo("height","height")},refRx:{set:Eo("rx","width")},refRy:{set:Eo("ry","height")},refRInscribed:{set:function(e){var n=Eo("r","width"),t=Eo("r","height");return function(r,a){return(a.height>a.width?n:t)(r,a)}}()},refRCircumscribed:{set:function(e,n){var t=kn(e);e=parseFloat(e),t&&(e/=100);var a,r=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(a=t||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:a}}},refCx:{set:Eo("cx","width")},refCy:{set:Eo("cy","height")},xAlignment:{offset:Kl("x","width","right")},yAlignment:{offset:Kl("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:Ar({resetOffset:!0})},refDKeepOffset:{set:Ar({resetOffset:!1})},refPointsResetOffset:{set:Ql({resetOffset:!0})},refPointsKeepOffset:{set:Ql({resetOffset:!1})},connection:{qualify:ha,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),a=r.divideAtLength(t),u=r.divideAtLength(-t);a&&u&&(n=`${a[0].serialize()} ${u[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:ha,set:Ks("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:ha,set:Ks("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:ha,set:Ks("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:ha,set:Ks("getTangentAtRatio",{rotate:!1})}};Jt["xlink:href"]=Jt.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{Jt[e]={qualify:Ha,set:function(t,r){return{[e]:Du(t,r)}}}}),Jt.refR=Jt.refRInscribed,Jt.refD=Jt.refDResetOffset,Jt.refPoints=Jt.refPointsResetOffset,Jt.atConnectionLength=Jt.atConnectionLengthKeepGradient,Jt.atConnectionRatio=Jt.atConnectionRatioKeepGradient,Jt.refX2=Jt.refX,Jt.refY2=Jt.refY,Jt.refWidth2=Jt.refWidth,Jt.refHeight2=Jt.refHeight,Jt["ref-x"]=Jt.refX,Jt["ref-y"]=Jt.refY,Jt["ref-dy"]=Jt.refDy,Jt["ref-dx"]=Jt.refDx,Jt["ref-width"]=Jt.refWidth,Jt["ref-height"]=Jt.refHeight,Jt["x-alignment"]=Jt.xAlignment,Jt["y-alignment"]=Jt.yAlignment;const za=Jt,Jr=rn.Model.extend({constructor:function(e,n){var t,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Ft("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(r=this.parse(r,n)||{}),(t=ze(this,"defaults"))&&(r=Lt({},t,r)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=ze(this.constructor.prototype,"defaults").attrs||{},r={};Ct(this.attributes.attrs,function(u,c){const v=n[c];Ct(u,function(y,T){ft(y)&&!Array.isArray(y)?Ct(y,function(A,_){(!v||!v[T]||!Ve(v[T][_],A))&&(r[c]=r[c]||{},(r[c][T]||(r[c][T]={}))[_]=A)}):(!v||!Ve(v[T],y))&&(r[c]=r[c]||{},r[c][T]=y)})});const a=xe(Ue(this.attributes,"attrs"));return a.attrs=r,a},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};Ct(this.get("attrs"),function(u,c){u&&u.port&&(void 0!==u.port.id?n[u.port.id]=u.port:n[u.port]={id:u.port})});var t={};Ct(e,function(u,c){n[c]||(t[c]=!0)}),this.graph&&!Ge(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(u){t[u.get("target").port]&&u.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(u){t[u.get("source").port]&&u.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const a=this.getEmbeddedCells();for(let u=0,c=a.length;u<c;u++){const v=a[u];v&&v.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],t=t-r.length+1;var a=n.get("cells"),u=a.indexOf(this)!==a.length-r.length;u||(u=r.some(function(c,v){return c.get("z")!==t+v})),u&&(this.startBatch("to-front"),t+=r.length,r.forEach(function(c,v){c.set("z",t+v,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var u=0!==n.get("cells").indexOf(this);u||(u=r.some(function(c,v){return c.get("z")!==t+v})),u&&(this.startBatch("to-back"),t-=r.length,r.forEach(function(c,v){c.set("z",t+v,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const r=Et([],this.get("embeds"));e.forEach(a=>{r[a.isLink()?"unshift":"push"](a.id),a.parent(this.id,n)}),this.set("embeds",fa(r),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(r=>r.unset("parent",n)),this.set("embeds",Z(this.get("embeds"),...e.map(r=>r.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var r=t.shift();n.push(r),t.push.apply(t,r.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(a){n.push.apply(n,a.getEmbeddedCells(e))});else n=_t(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=xn(e)?e:e.id,r=this.parent();if(n=Nr({deep:!0},n),this.graph&&n.deep){for(;r;){if(r===t)return!0;r=this.graph.getCell(r).parent()}return!1}return r===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return _t(To([this].concat(this.getEmbeddedCells({deep:!0}))));var n=rn.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var r="/",a=xn(e);if(a||Array.isArray(e)){if(arguments.length>1){var u,c;a?c=(u=e).split("/"):(u=e.join(r),c=e.slice());var v=c[0],y=c.length;if((t=t||{}).propertyPath=u,t.propertyValue=n,t.propertyPathArray=c,1===y)return this.set(v,n,t);for(var T={},A=T,_=v,W=1;W<y;W++){var ne=c[W],oe=Number.isFinite(a?Number(ne):ne);A=A[_]=oe?[]:{},_=ne}T=Lr(T,c,n,"/");var we=Lt({},this.attributes);t.rewrite&&bi(we,u,"/");var Pe=Lt(we,T);return this.set(v,Pe[v],t)}return zn(this.attributes,e,r)}return this.set(Lt({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),r=t[0];if("attrs"===r&&(n.dirty=!0),1===t.length)return this.unset(e,n);var a=t.slice(1),u=xe(this.get(r));return bi(u,a,"/"),this.set(r,u,n)},attr:function(e,n,t){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):xn(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,r){r=r||"/",t=Et({duration:100,delay:10,timingFunction:xs.linear,valueFunction:Qr.number},t);var c,u=0,v=function(_){var W,ne,oe;(ne=(_-=u=u||_)/t.duration)<1?this._transitionIds[e]=W=$o(v):(ne=1,delete this._transitionIds[e]),oe=c(t.timingFunction(ne)),t.transitionId=W,this.prop(e,oe,t),W||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:y}=this;let T;return T=setTimeout(_=>{y[e]&&(y[e]=Z(y[e],T),0===y[e].length&&delete y[e]),this.stopPendingTransitions(e,r),c=t.valueFunction(zn(this.attributes,e,r),n),this._transitionIds[e]=$o(_),this.trigger("transition:start",this,e)},t.delay,v),y[e]||(y[e]=[]),y[e].push(T),T},getTransitions:function(){return $e(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let r=Object.keys(t);if(e){const a=e.split(n);r=r.filter(u=>Ve(a,u.split(n).slice(0,a.length)))}return r.forEach(a=>{t[a].forEach(c=>clearTimeout(c)),delete t[a]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let r=Object.keys(t);if(e){const a=e.split(n);r=r.filter(u=>Ve(a,u.split(n).slice(0,a.length)))}r.forEach(a=>{ca(t[a]),delete t[a],this.trigger("transition:end",this,a)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,Et({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,Et({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new me(0,0)},getPointFromConnectedLink:function(){return new me},getBBox:function(){return new at(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const r=new me(n,t);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||za[e]},define:function(e,n,t,r){t=Et({defaults:Fa({type:e},n,this.prototype.defaults)},t);var a=this.extend(t,r);return"undefined"!=typeof joint&&Ee(joint,"shapes")&&Lr(joint.shapes,e,a,"."),a}}),Po=Jr.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?ir(this.get("source")):e instanceof Jr?((r=ir(n)||{}).id=e.id,this.set("source",r,t)):St(e)?this.set("source",r=e,n):((r=ir(n)||{}).x=e.x,r.y=e.y,this.set("source",r,t));var r},target:function(e,n,t){return void 0===e?ir(this.get("target")):e instanceof Jr?((r=ir(n)||{}).id=e.id,this.set("target",r,t)):St(e)?this.set("target",r=e,n):((r=ir(n)||{}).x=e.x,r.y=e.y,this.set("target",r,t));var r},router:function(e,n,t){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?ir(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var a="object"==typeof e||"function"==typeof e;return this.set("router",a?e:{name:e,args:n},a?n:t)},connector:function(e,n,t){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?ir(r):r:this.get("smooth")?{name:"smooth"}:null}var a="object"==typeof e||"function"==typeof e;return this.set("connector",a?e:{name:e,args:n},a?n:t)},label:function(e,n,t){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var r=this.labels(),a=r.length;return(e=isFinite(e)&&null!==e?0|e:a)<0&&(e=a+e+1),r.splice(e,0,n),this.labels(r,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var a=this._normalizeVertex(n);return this.prop(["vertices",e],a,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],r=0;r<e.length;r++){var a=e[r],u=this._normalizeVertex(a);t.push(u)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),a=r.length;(e=isFinite(e)&&null!==e?0|e:a)<0&&(e=a+e+1);var u=this._normalizeVertex(n);return r.splice(e,0,u),this.vertices(r,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return St(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+n}},t)},scale:function(e,n,t,r){return this.applyToPoints(function(a){return me(a).scale(e,n,t).toJSON()},r)},applyToPoints:function(e,n){if(!et(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:r,target:a}=this.attributes;r.id||(t.source=e(r)),a.id||(t.target=e(a));var u=this.vertices();return u.length>0&&(t.vertices=u.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new me(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new me(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(me),this.getTargetPoint()];return new dn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),r=this.getTargetElement(),a=this.getParentCell();t&&r&&(n=t===r||t.isEmbeddedIn(r)?r:r.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,r)),a&&(!n||n.id!==a.id)&&a.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,r=n.id,a=t.id;if(!r||!a)return!1;var u=r===a;if(!u&&e.deep&&this.graph){var c=this.getSourceCell(),v=this.getTargetCell();u=c.isEmbeddedIn(v)||v.isEmbeddedIn(c)}return u},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=xn(e)||gn(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function ga(e,n,t){var r=e.toJSON();return r.angle=n||0,Nr({},t,r)}function Cs(e,n,t){return e.map(function(r,a,u){var c=this.pointAt((a+.5)/u.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),ga(c.round(),0,r)},vi(n,t))}function Jl(e,n,t,r){var a=n.center(),u=n.width/n.height,c=n.topMiddle(),v=Xn.fromRect(n);return e.map(function(y,T,A){var _=t+r(T,A.length),W=c.clone().rotate(a,-_).scale(u,1,a),ne=y.compensateRotation?-v.tangentTheta(W):0;return(y.dx||y.dy)&&W.offset(y.dx||0,y.dy||0),y.dr&&W.move(a,y.dr),ga(W.round(),ne,y)})}function Vu(e,n){var t=n.x;xn(t)&&(t=parseFloat(t)/100*e.width);var r=n.y;return xn(r)&&(r=parseFloat(r)/100*e.height),jn(t||0,r||0)}const Df=function(e,n,t){return e.map(Vu.bind(null,n))},Ff=function(e,n,t){return t.fn(e,n,t)},Js=function(e,n,t){return Cs(e,Vu(n,t.start||n.origin()),Vu(n,t.end||n.corner()))},ws=function(e,n,t){return Cs(e,n.origin(),n.bottomLeft())},Zl=function(e,n,t){return Cs(e,n.topRight(),n.corner())},J=function(e,n,t){return Cs(e,n.origin(),n.topRight())},Ua=function(e,n,t){return Cs(e,n.bottomLeft(),n.corner())},Zs=function(e,n,t){var a=t.step||360/e.length;return Jl(e,n,t.startAngle||0,function(u){return u*a})},Ci=function(e,n,t){var a=t.step||20;return Jl(e,n,t.startAngle||0,function(u,c){return(u+.5-c/2)*a})};function en(e,n){return Fa({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function ql(e,n,t,r){r=Nr({},r,{offset:15});var c,v,y,T,a=n.center().theta(e),u=ec(n),A=r.offset,_=0;a<u[1]||a>u[2]?(y=".3em",c=A,v=0,T="start"):a<u[0]?(y="0",c=0,v=-A,t?(_=-90,T="start"):T="middle"):a<u[3]?(y=".3em",c=-A,v=0,T="end"):(y=".6em",c=0,v=A,t?(_=90,T="start"):T="middle");var W=Math.round;return en({x:W(c),y:W(v),angle:_,attrs:{".":{y,"text-anchor":T}}})}function ec(e){var n=e.center(),t=n.theta(e.origin()),r=n.theta(e.bottomLeft()),a=n.theta(e.corner());return[t,n.theta(e.topRight()),a,r]}function tc(e,n,t,r){var u,c,v,y,a=n.center().theta(e),T=(r=Nr({},r,{offset:15})).offset,A=0,_=ec(n);a<_[1]||a>_[2]?(v=".3em",u=-T,c=0,y="end"):a<_[0]?(v=".6em",u=0,c=T,t?(A=90,y="start"):y="middle"):a<_[3]?(v=".3em",u=T,c=0,y="start"):(v="0em",u=0,c=-T,t?(A=-90,y="start"):y="middle");var W=Math.round;return en({x:W(u),y:W(c),angle:A,attrs:{".":{y:v,"text-anchor":y}}})}function Ko(e,n,t){t=Nr({},t,{offset:20});var y,r=jn(0,0),a=-e.theta(r),u=a,c=e.clone().move(r,t.offset).difference(e).round(),v=".3em";(a+90)%180==0?(y=n?"end":"middle",!n&&-270===a&&(v="0em")):a>-270&&a<-90?(y="start",u=a-180):y="end";var T=Math.round;return en({x:T(c.x),y:T(c.y),angle:n?u:0,attrs:{".":{y:v,"text-anchor":y}}})}const Vf=function(e,n,t){return en(t,n)},Bf=function(e,n,t){return en(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Hf=function(e,n,t){return en(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},jf=function(e,n,t){return en(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},zf=function(e,n,t){return en(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Io=function(e,n,t){return ql(e,n,!0,t)},Uf=function(e,n,t){return ql(e,n,!1,t)},Gf=function(e,n,t){return tc(e,n,!0,t)},Wf=function(e,n,t){return tc(e,n,!1,t)},$f=function(e,n,t){return Ko(e.difference(n.center()),!1,t)},Yf=function(e,n,t){return Ko(e.difference(n.center()),!0,t)};var ao=function(e){var n=xe(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=E,this._init(n)};ao.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),r=this.getPortsByGroup(e),a=t.position||{},u=a.name,c=this.portLayoutNamespace;c[u]||(u="left");var v=a.args||{},y=r.map(function(_){return _&&_.position&&_.position.args}),T=c[u](y,n,v),A={ports:r,result:[]};return _t(T).reduce(function(_,W,ne){var oe=_.ports[ne];return _.result.push({portId:oe.id,portTransformation:W,labelTransformation:this._getPortLabelLayout(oe,me(W),n),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),_}.bind(this),A),A.result},_getPortLabelLayout:function(e,n,t){var r=this.portLabelLayoutNamespace,a=e.label.position.name||"left";return r[a]?r[a](n,t,e.label.position.args):null},_init:function(e){if(ft(e.groups))for(var n=Object.keys(e.groups),t=0,r=n.length;t<r;t++){var a=n[t];this.groups[a]=this._evaluateGroup(e.groups[a])}for(var u=_t(e.items),c=0,v=u.length;c<v;c++)this.ports.push(this._evaluatePort(u[c]))},_evaluateGroup:function(e){return Lt(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=Et({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=Lt({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=Lt({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=Et({},t.size,n.size),n},_getZIndex:function(e,n){return gn(n.z)?n.z:gn(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return Lt({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var r,t={};et(e)?(r="fn",t.fn=e):xn(e)?r=e:void 0===e?r=n?"left":null:Array.isArray(e)?(r="absolute",t.x=e[0],t.y=e[1]):ft(e)&&(r=e.name,Et(t,e.args));var a={args:t};return r&&(a.name=r),a},_getLabel:function(e,n){var t=e.label||{},r=t;return r.position=this._getPosition(t.position,n),r}};const Xf={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};_t(e.items).forEach(function(v){n[v.id]=!0});var t=this.previous("ports")||{},r={};_t(t.items).forEach(function(v){n[v.id]||(r[v.id]=!0)});var a=this.graph;a&&!Ge(r)&&(a.getConnectedLinks(this,{inbound:!0}).forEach(function(v){r[v.get("target").port]&&v.remove()}),a.getConnectedLinks(this,{outbound:!0}).forEach(function(v){r[v.get("source").port]&&v.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return xe(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=_t(this.prop(["ports","items"])).filter(t=>t.group===e);return xe(n)},getPort:function(e){return xe(_t(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,at(this.size())).reduce(function(t,r){var a=r.portTransformation;return t[r.portId]={x:a.x,y:a.y,angle:a.angle},t},{})},getPortIndex:function(e){var n=ft(e)?e.id:e;return this._isValidPortId(n)?_t(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!ft(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=Et([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const r="number"==typeof e?e:this.getPortIndex(e);if(!ft(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const a=Et([],this.prop("ports/items"));return a.splice(r,0,n),this.prop("ports/items",a,t),this},portProp:function(e,n,t,r){var a=this.getPortIndex(e);if(-1===a)throw new Error("Element: unable to find port with id "+e);var u=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?u[0]=["ports","items",a].concat(n):xn(n)?u[0]=["ports/items/",a,"/",n].join(""):(u=["ports/items/"+a],St(n)&&(u.push(n),u.push(t))),this.prop.apply(this,u)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=_t((e=e||{}).items);return t.forEach(function(r){"object"!=typeof r&&n.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),fa(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!ft(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",Et([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},r=this.getPortIndex(e);if(-1!==r){const a=Et([],this.prop(["ports","items"]));a.splice(r,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],a,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,r;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;r=Et([],this.prop(["ports","items"])).filter(function(u){return!e.some(function(c){const v=ft(c)?c.id:c;return u.id===v})})}else t=e||{},r=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],r,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new ao(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var r=t.filter(function(u){if(!n.find(function(c){return c.id===u.id}))return u}),a=n.filter(function(u){if(!t.find(function(c){return c.id===u.id}))return u});a.length>0&&this.trigger("ports:remove",this,a),r.length>0&&this.trigger("ports:add",this,r)}}},Kf={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,r=n.node.childNodes.length;t<r;t++)e.push(n.node.childNodes[t]);var a=An(this.model._portSettingsData.getPorts(),"z"),u="auto";_t(a[u]).forEach(function(A){var _=this._getPortElement(A);n.append(_),e.push(_)},this);for(var c=Object.keys(a),v=0;v<c.length;v++){var y=c[v];if(y!==u){var T=parseInt(y,10);this._appendPorts(a[y],T,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var r=this._getContainerElement(),a=_t(e).map(this._getPortElement,this);t[n]||n<0?Fe(t[Math.max(n,0)]).before(a):r.append(a)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const r=t.portContentElement.node,a=t.portContentSelectors,[u=null]=this.findBySelector(n,r,a);return u},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){hi(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,r,a;var u=Fe(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var v=this.parseDOMJSON(c,u.node),y=v.fragment;n=y.childNodes.length>1?Fe("g").append(y):Fe(y.firstChild),a=v.selectors}else n=Fe(c),Array.isArray(n)&&(n=Fe("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const T=this._getPortLabelMarkup(e.label);if(Array.isArray(T)){const{fragment:W,selectors:ne}=this.parseDOMJSON(T,u.node),oe=W.childNodes.length;oe>0&&(r=ne,t=1===oe?Fe(W.firstChild):Fe("g").append(W))}else t=Fe(T),Array.isArray(t)&&(t=Fe("g").append(t));var A;if(a&&r){for(var _ in r)if(a[_]&&_!==this.selector)throw new Error("ElementView: selectors within port must be unique.");A=Et({},a,r)}else A=a||r;return u.append(n.addClass("joint-port-body")),t&&u.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:u,portLabelElement:t,portSelectors:A,portLabelSelectors:r,portContentElement:n,portContentSelectors:a},u},_updatePortGroup:function(e){for(var n=at(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),r=0,a=t.length;r<a;r++){var u=t[r],v=this._portElementsCache[u.portId]||{},y=u.portTransformation;this.applyPortTransform(v.portElement,y),this.updateDOMSubtreeAttributes(v.portElement.node,u.portAttrs,{rootBBox:new at(u.portSize),selectors:v.portSelectors});var T=u.labelTransformation;T&&v.portLabelElement&&(this.applyPortTransform(v.portLabelElement,T,-y.angle||0),this.updateDOMSubtreeAttributes(v.portLabelElement.node,T.attrs,{rootBBox:new at(u.labelSize),selectors:v.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var r=Fe.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ur=Jr.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Jr.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const r=gn(n);t=(r?t:e)||{};const{parentRelative:a,deep:u,restrictedArea:c}=t;let v;if(a){if(!this.graph)throw new Error("Element must be part of a graph.");const y=this.getParentCell();y&&!y.isLink()&&(v=y.get("position"))}if(r){if(v&&(e+=v.x,n+=v.y),u||c){const{x:y,y:T}=this.get("position");this.translate(e-y,n-T,t)}else this.set("position",{x:e,y:n},t);return this}{const y=me(this.get("position"));return a?y.difference(v):y}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var r=this.get("position")||{x:0,y:0},a=t.restrictedArea;if(a&&t.translateBy===this.id)if("function"==typeof a){var u=a.call(this,r.x+e,r.y+n,t);e=u.x-r.x,n=u.y-r.y}else{var c=this.getBBox({deep:!0}),v=r.x-c.x,y=r.y-c.y,T=Math.max(a.x+v,Math.min(a.x+a.width+v-c.width,r.x+e)),A=Math.max(a.y+y,Math.min(a.y+a.height+y-c.height,r.y+n));e=T-r.x,n=A-r.y}var _={x:r.x+e,y:r.y+n};return t.tx=e,t.ty=n,t.transition?(ft(t.transition)||(t.transition={}),this.transition("position",_,Et({},t.transition,{valueFunction:Qr.object})),hi(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",_,t),hi(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(ft(e)&&(t=n,n=gn(e.height)?e.height:r.height,e=gn(e.width)?e.width:r.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var r=this.get("size");switch(t.direction){case"left":case"right":n=r.height;break;case"top":case"bottom":e=r.width}var c,a=Ln(this.get("angle")||0),u=this.getBBox();if(a){var v={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(v+=Math.floor((a+45)/90),v%=4);var y=u[["bottomLeft","corner","topRight","origin"][v]](),T=me(y).rotate(u.center(),-a),A=Math.sqrt(e*e+n*n)/2,_=v*Math.PI/2;_+=Math.atan(v%2==0?n/e:e/n),_-=Nn(a);var W=me.fromPolar(A,_,T);c=me(W).offset(e/-2,n/-2)}else switch(c=u.topLeft(),t.direction){case"top":case"top-right":c.offset(0,u.height-n);break;case"left":case"bottom-left":c.offset(u.width-e,0);break;case"top-left":c.offset(u.width-e,u.height-n)}this.set("size",{width:e,height:n},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,r){var a=this.getBBox().scale(e,n,t);return this.startBatch("scale",r),this.position(a.x,a.y,r),this.resize(a.width,a.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(_=>_.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&hi(t,"fitEmbeds",e);const{left:r,right:a,top:u,bottom:c}=Xo(e.padding);let{x:v,y,width:T,height:A}=n.getCellsBBox(t);return v-=r,y-=u,T+=r+a,A+=c+u,this.set({position:{x:v,y},size:{width:T,height:A}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,r){if(t){var a=this.getBBox().center(),u=this.get("size"),c=this.get("position");a.rotate(t,this.get("angle")-e);var v=a.x-u.width/2-c.x,y=a.y-u.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(c.x+v,c.y+y,r),this.rotate(e,n,null,r),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,r);return this},angle:function(){return Ln(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:r,rotate:a}=e;if(r&&n){const _=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return _.push(this),n.getCellsBBox(_,e)}const{angle:u=0,position:{x:c,y:v},size:{width:y,height:T}}=t,A=new at(c,v,y,T);return a&&A.rotateAroundCenter(u),A},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),r=t.center(),a=e.get(n);if(!a)return r;var u=a.port;if(!u||!this.hasPort(u))return r;var c=this.portProp(u,["group"]),v=this.getPortsPositions(c),y=new me(v[u]).offset(t.origin()),T=this.angle();return T&&y.rotate(r,-T),y}});Et(Ur.prototype,Xf);const Bu={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,r=t>0&&n[0]||[],a=t>1&&n[t-1]||{};return Array.isArray(r)||(a instanceof Jr?r=n:r instanceof Jr&&(n.length>1&&n.pop(),r=n)),a instanceof Jr&&(a={}),e.call(this,r,a)}}},va=rn.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&Ee(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,u=new("link"===e.type?Po:zn(t.cellNamespace,e.type,".")||Ur)(e,n);return n.dry||(u.graph=t.graph),u},comparator:function(e){return e.get("z")||0}}),Ao=rn.Model.extend({initialize:function(e,n){var t=new va([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});rn.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=rn.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var r;return"object"==typeof e?(r=e,t=n):(r={})[e]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,t),r=Ue(r,"cells")),rn.Model.prototype.set.call(this,r,t)},clear:function(e){e=Et({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(r){return r.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof rn.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!xn(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof rn.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=Ru(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=_t(e).map(function(r){return this._prepareCell(r,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),hi(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,r=n.inbound,a=n.outbound;void 0===r&&void 0===a&&(r=a=!0);var u=[],c={};function v(_,W){if(Ct(_.getOutboundEdges(W.id),function(oe,we){if(!c[we]){var Pe=_.getCell(we);u.push(Pe),c[we]=!0,t&&(r&&y(_,Pe),a&&v(_,Pe))}}.bind(_)),t&&W.isLink()){var ne=W.getTargetCell();ne&&ne.isLink()&&(c[ne.id]||(u.push(ne),v(_,ne)))}}function y(_,W){if(Ct(_.getInboundEdges(W.id),function(oe,we){if(!c[we]){var Pe=_.getCell(we);u.push(Pe),c[we]=!0,t&&(r&&y(_,Pe),a&&v(_,Pe))}}.bind(_)),t&&W.isLink()){var ne=W.getSourceCell();ne&&ne.isLink()&&(c[ne.id]||(u.push(ne),y(_,ne)))}}if(a&&v(this,e),r&&y(this,e),n.deep){var T=e.getEmbeddedCells({deep:!0}),A={};T.forEach(function(_){_.isElement()&&(A[_.id]=!0)}),T.forEach(function(_){_.isLink()||(a&&Ct(this.getOutboundEdges(_.id),function(W,ne){if(!c[ne]){var oe=this.getCell(ne),{source:we,target:Pe}=oe.attributes,Re=we.id,Le=Pe.id;if(!n.includeEnclosed&&Re&&A[Re]&&Le&&A[Le])return;u.push(this.getCell(ne)),c[ne]=!0}}.bind(this)),r&&Ct(this.getInboundEdges(_.id),function(W,ne){if(!c[ne]){var oe=this.getCell(ne),{source:we,target:Pe}=oe.attributes,Re=we.id,Le=Pe.id;if(!n.includeEnclosed&&Re&&A[Re]&&Le&&A[Le])return;u.push(this.getCell(ne)),c[ne]=!0}}.bind(this)))},this)}return u},getNeighbors:function(e,n){n||(n={});var t=n.inbound,r=n.outbound;void 0===t&&void 0===r&&(t=r=!0);var a=this.getConnectedLinks(e,n).reduce(function(v,y){var{source:T,target:A}=y.attributes,_=y.hasLoop(n);if(t&&Ee(T,"id")&&!v[T.id]){var W=this.getCell(T.id);W.isElement()&&(_||W&&W!==e&&(!n.deep||!W.isEmbeddedIn(e)))&&(v[T.id]=W)}if(r&&Ee(A,"id")&&!v[A.id]){var ne=this.getCell(A.id);ne.isElement()&&(_||ne&&ne!==e&&(!n.deep||!ne.isEmbeddedIn(e)))&&(v[A.id]=ne)}return v}.bind(this),{});if(e.isLink()){if(t){var u=e.getSourceCell();u&&u.isElement()&&!a[u.id]&&(a[u.id]=u)}if(r){var c=e.getTargetCell();c&&c.isElement()&&!a[c.id]&&(a[c.id]=c)}}return _t(a)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var r=[],a=t.get("parent");a;)r.push(a),a=this.getCell(a).get("parent");return r},this);e=e.sort(function(t,r){return t.length-r.length});var n=_t(e.shift()).find(function(t){return e.every(function(r){return r.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},Et({},n=n||{},{outbound:!0})),t},cloneCells:To,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],r={},a=[],u=[];return _t(e).forEach(function(c){r[c.id]||(t.push(c),r[c.id]=c,c.isLink()?u.push(c):a.push(c)),n.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(y){r[y.id]||(t.push(y),r[y.id]=y,y.isLink()?u.push(y):a.push(y))})}),u.forEach(function(c){var{source:v,target:y}=c.attributes;if(v.id&&!r[v.id]){var T=this.getCell(v.id);t.push(T),r[T.id]=T,a.push(T)}if(y.id&&!r[y.id]){var A=this.getCell(y.id);t.push(this.getCell(y.id)),r[A.id]=A,a.push(A)}},this),a.forEach(function(c){this.getConnectedLinks(c,n).forEach(function(y){var{source:T,target:A}=y.attributes;!r[y.id]&&T.id&&r[T.id]&&A.id&&r[A.id]&&(t.push(y),r[y.id]=y)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},Et({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const r={},a={},u=[];for(u.push(e),a[e.id]=0;u.length>0;){var c=u.shift();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,a[c.id])))continue;const v=this.getNeighbors(c,t);for(let y=0,T=v.length;y<T;y++){const A=v[y];a[A.id]=a[c.id]+1,u.push(A)}}},dfs:function(e,n,t={}){const r={},a={},u=[];for(u.push(e),a[e.id]=0;u.length>0;){const c=u.pop();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,a[c.id])))continue;const v=this.getNeighbors(c,t),y=u.length;for(let T=0,A=v.length;T<A;T++){const _=v[T];a[_.id]=a[c.id]+1,u.splice(y,0,_)}}},getSources:function(){var e=[];return Ct(this._nodes,function(n,t){(!this._in[t]||Ge(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return Ct(this._nodes,function(n,t){(!this._out[t]||Ge(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||Ge(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Ge(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var r=(t=t||{}).inbound,a=t.outbound;void 0===r&&void 0===a&&(r=a=!0);var u=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:v,target:y}=c.attributes;if(r&&Ee(v,"id")&&v.id===n.id||a&&Ee(y,"id")&&y.id===n.id)return u=!0,!1}),u},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){hi(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new at(e),{strict:r=!1}=n,a=r?"containsRect":"intersect";return this.getElements().filter(u=>t[a](u.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(r):this.findModelsFromPoint(r[t]())).filter(u=>e.id!==u.id&&!u.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return _t(e).reduce(function(r,a){const u=a.getBBox({rotate:t});return u?r?r.union(u):u:r},null)},translate:function(e,n,t){var r=this.getCells().filter(function(a){return!a.isEmbedded()});return hi(r,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,r){var a=this.getCellsBBox(t);if(a){var u=Math.max(e/a.width,0),c=Math.max(n/a.height,0);hi(t,"scale",u,c,a.origin(),r)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Et({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Et({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(r=>n[r]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:r}=n.attributes;if(t.id&&r.id){var a=n.getSourceCell();if(a&&e.getConnectedLinks(a,{outbound:!0}).filter(function(v){var{source:y,target:T}=v.attributes;return y&&y.id===t.id&&(!y.port||y.port===t.port)&&T&&T.id===r.id&&(!T.port||T.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:r}=n.attributes;return t.id&&r.id}}});!function(e,n,t){if(xn(t)){if(!Bu[t])throw new Error('Unknown wrapper: "'+t+'"');t=Bu[t]}if(!et(t))throw new Error("Wrapper must be a function.");_t(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=t(e[r])})}(Ao.prototype,0,Bu.cells);const Ss={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var r=this.getCell(n),a=t.node(n);e.setPosition?e.setPosition(r,a):r.set("position",{x:a.x-a.width/2,y:a.y-a.height/2})},importLink:function(e,n,t){const a=this.getCell(n.name),u=t.edge(n),c=u.points||[],v=new dn(c);if(e.setVertices||e.setLinkVertices)if(et(e.setVertices))e.setVertices(a,c);else{v.simplify({threshold:.001});const y=v.points.map(A=>A.toJSON());a.set("vertices",y.slice(1,y.length-1))}if(e.setLabels&&"x"in u&&"y"in u){const y={x:u.x,y:u.y};if(et(e.setLabels))e.setLabels(a,y,c);else{const T=v.closestPointLength(y),A=v.pointAtLength(T),_=T/v.length(),W=new me(y).difference(A).toJSON();a.label(0,{position:{distance:_,offset:W}})}}},layout:function(e,n){var t;t=e instanceof Ao?e:(new Ao).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(n=Nr(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var a=Ss.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(A){return A.id}}),u={},c=n.marginX||0,v=n.marginY||0;if(n.rankDir&&(u.rankdir=n.rankDir),n.align&&(u.align=n.align),n.nodeSep&&(u.nodesep=n.nodeSep),n.edgeSep&&(u.edgesep=n.edgeSep),n.rankSep&&(u.ranksep=n.rankSep),n.ranker&&(u.ranker=n.ranker),c&&(u.marginx=c),v&&(u.marginy=v),a.setGraph(u),r.layout(a,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),Ss.fromGraphLib(a,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var y=a.nodes().filter(function(A){return a.children(A).length>0}).map(t.getCell.bind(t)).sort(function(A,_){return _.getAncestors().length-A.getAncestors().length});hi(y,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var T=a.graph();return new at(c,v,Math.abs(T.width-2*c),Math.abs(T.height-2*v))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||Qn,r=n.importEdge||Qn,a=this instanceof Ao?this:new Ao;return e.nodes().forEach(function(u){t.call(a,u,e,a,n)}),e.edges().forEach(function(u){r.call(a,u,e,a,n)}),a},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=ct(n,"directed","compound","multigraph"),a=new t.Graph(r),u=n.setNodeLabel||Qn,c=n.setEdgeLabel||Qn,v=n.setEdgeName||Qn,y=e.get("cells"),T=0,A=y.length;T<A;T++){var _=y.at(T);if(_.isLink()){var W=_.get("source"),ne=_.get("target");if(!W.id||!ne.id)break;a.setEdge(W.id,ne.id,c(_),v(_))}else if(a.setNode(_.id,u(_)),a.isCompound()&&_.has("parent")){var oe=_.get("parent");y.has(oe)&&a.setParent(_.id,oe)}}return a}};Ao.prototype.toGraphLib=function(e){return Ss.toGraphLib(this,e)},Ao.prototype.fromGraphLib=function(e,n){return Ss.fromGraphLib.call(this,e,n)};const Hi={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(r){t=!1}return this._results[e]=t,t}},Jf=(Ur.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ur.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Ur.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Ur.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Ur.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Ur.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Ur.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ur.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ur.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ur.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ur.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Ur.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=kn(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=kn(e);t&&(e=parseFloat(e)/100);var r=n.x,a=n.y,u=n.width,c=n.height,y=t?c*e:e,T=Fe.KAPPA,A=T*(u/2),_=T*(t?c*e:e),ne=r+u/2,oe=r+u,we=a+y,Pe=we-y,Re=a+c-y,Le=a+c;return{d:["M",r,we,"L",r,Re,"C",r,Re+_,ne-A,Le,ne,Le,"C",ne+A,Le,oe,Re+_,oe,Re,"L",oe,we,"C",oe,we-_,ne+A,Pe,ne,Pe,"C",ne-A,Pe,r,we-_,r,we,"Z"].join(" ")}}}}});var Mo=Hi.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Ur.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Mo]},{attributes:{text:{set:function(e,n,t,r){if(!(t instanceof HTMLElement)){var a=r.style||{},u={text:e,width:-5,height:"100%"},c=Et({textVerticalAnchor:"middle"},a);return za.textWrap.set.call(this,u,n,t,c),{fill:a.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const ma=Po.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Qo=(Po.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Po.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),ya=rn.View.extend({options:{},theme:null,themeClassNamePrefix:Or("theme-"),requireSetThemeOverride:!1,defaultTheme:xr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Et({},this.options,e),rn.View.call(this,e)},initialize:function(){Qo[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=ze(this,"children")),e){var n=this.svgElement,r=di(e,Fe.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var r=t.getAttribute(e);if(r)return r;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(ze(this,"el"));else{var e=ze(this,"tagName"),n=Et({},ze(this,"attributes")),t=Et({},ze(this,"style"));this.id&&(n.id=ze(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(Fe.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof rn.$?e:rn.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=Fe(this.el))},_ensureElClassName:function(){var e=ze(this,"className");if(e){var n=Or(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Qo[this.cid]=null,rn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var r=this.getEventNamespace();for(var a in n){var u=n[a];"function"!=typeof u&&(u=this[u]),u&&cn(e).on(a+r,t,u.bind(this))}return this},undelegateElementEvents:function(e){return cn(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=ze(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,r="__"+this.cid+"__";return void 0===n?t&&t[r]||{}:(t||(t=e.data={}),t[r]||(t[r]={}),Et(t[r],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&Et({},e[0])||{},t=e[1]&&Et({},e[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,rn.View.extend.call(this,n,t)}});if(cn.event&&!("dbltap"in cn.event.special)){const e=xr.doubleTapInterval,n=30;cn.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...r){const{handleObj:a,target:u}=t,c=cn.data(u),v=(new Date).getTime(),y="lastTouch"in c?v-c.lastTouch:0;y<e&&y>n?(c.lastTouch=null,t.type=a.origType,a.handler.call(this,t,...r)):c.lastTouch=v}}}function so(e){return e?Array.isArray(e)?e:[e]:[]}const ko=ya.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(St(n)){const r=e.model.isLink(),{label:a=null,port:u,selector:c}=n;r&&null!==a?t=e.findLabelNode(a,c):!r&&u?t=e.findPortNode(u,c):[t]=e.findBySelector(c)}else n&&(t=Fe.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:r,transformGroup:a}=this;if(!e||a)return;const{vel:u,paper:c}=n,{layer:v}=r;if(v){const y=this.transformGroup=Fe("g").addClass("highlight-transform").append(t);c.getLayerView(v).insertSortedNode(y.node,r.z)}else(!t.parentNode||t.nextSibling)&&u.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const r=n.getRootTranslateMatrix(),a=n.getRootRotateMatrix(),u=r.multiply(a);e.attr("transform",Fe.matrixToTransformString(u))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:r,id:a}=this;if(r)return;const u=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),u?(this.highlight(n,u),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",a,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:r}=this;e&&this.unhighlight(n,e),this.unmount(),r._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const r=this.uniqueId(n,t);this.add(e,n,r,t)},unhighlight:function(e,n,t){const r=this.uniqueId(n,t);this.remove(e,r)},get(e,n=null){const{cid:t}=e,{_views:r}=this,a=r[t];if(null===n){const u=[];if(!a)return u;for(let c in a){const v=a[c];v instanceof this&&u.push(v)}return u}if(!a)return null;if(n in a){const u=a[n];if(u instanceof this)return u}return null},add(e,n,t,r={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const a=ko.get(e,t);a&&a.remove();const u=new this(r);return u.id=t,this._addRef(e,t,u),u.requestUpdate(e,n),u},_addRef(e,n,t){const{cid:r}=e,{_views:a}=this;let u=a[r];u||(u=a[r]={}),u[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:r}=this,a=r[t];if(a){n&&delete a[n];for(let u in a)return;delete r[t]}},remove(e,n=null){so(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){so(this.get(e,n)).forEach(r=>{(t||r.UPDATABLE)&&r.update()})},transform(e,n=null){so(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>Fe.ensureId(e)+JSON.stringify(n)}),$a={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},hn=ya.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,r,a){e.push("type-"+a.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,a,u,e={},n={},t=0,c=ze(this,"presentationAttributes");for(var v in c)if(c.hasOwnProperty(v)){var y=c[v];for(Array.isArray(y)||(y=[y]),r=0,a=y.length;r<a;r++){var T=e[u=y[r]];T||(T=e[u]=1<<t++),n[v]|=T}}var A=ze(this,"initFlag");for(Array.isArray(A)||(A=[A]),r=0,a=A.length;r<a;r++)e[u=A[r]]||(e[u]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var r=0,a=e.length;r<a;r++)t|=n[e[r]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||ro(this),ya.call(this,e)},initialize:function(){this.setFlags(),ya.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=di(e),r=t.selectors,a=t.groupSelectors;for(var u in a){if(r[u])throw new Error("dia.CellView: ambiguous group selector");r[u]=a[u]}if(n){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=n}return{fragment:t.fragment,selectors:r}},can:function(e){var n=et(this.options.interactive)?this.options.interactive(this):this.options.interactive;return ft(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var r=t[e];if(r)return Array.isArray(r)?r:[r]}return xr.useCSSSelectors?cn(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),a=this.getRootRotateMatrix();return Fe.transformRect(n,r.multiply(a).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return Fe.transformRect(n,r.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return Fe.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=Fe.createSVGMatrix(),n=this.model,t=n.angle();if(t){var r=n.getBBox(),a=r.width/2,u=r.height/2;e=e.translate(a,u).rotate(t).translate(-a,-u)}return e},_notifyHighlight:function(e,n,t={}){const{el:r}=this;let a;if([a=r]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=a!==r,void 0===t.type){let u;switch(!0){case t.embedding:u=$a.EMBEDDING;break;case t.connecting:u=$a.CONNECTING;break;case t.magnetAvailability:u=$a.MAGNET_AVAILABILITY;break;case t.elementAvailability:u=$a.ELEMENT_AVAILABILITY;break;default:u=$a.DEFAULT}t.type=u}return this.notify(e,a,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const r=t.getAttribute("magnet"),a=t===n;if((r||a)&&"false"!==r)return t;if(a)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[r]=this.findBySelector(t);if(r)return r}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var r=Fe(e).index()+1;t=e.tagName+":nth-child("+r+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var r=this.paper,a=r.model,u=r.getDefaultLink(this,e);return u.set({source:this.getLinkEnd(e,n,t,u,"source"),target:{x:n,y:t}}).addTo(a,{async:!1,ui:!0}),u.findView(r)},getLinkEnd:function(e,...n){var t=this.model,r=t.id,a=this.findAttribute("port",e),u=e.getAttribute("joint-selector"),c={id:r};return null!=u&&(c.magnet=u),null!=a?(c.port=a,!t.hasPort(a)&&!u&&(c.selector=this.getSelector(e))):null==u&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...n)},customizeLinkEnd:function(e,n,t,r,a,u){const{paper:c}=this,{connectionStrategy:v}=c.options;if("function"==typeof v){var y=v.call(c,e,this,n,new me(t,r),a,u,c);if(y)return y}return e},getMagnetFromLinkEnd:function(e){var u,n=this.el,t=e.port,r=e.magnet,a=this.model;return null!=t&&a.isElement()&&a.hasPort(t)?u=this.findPortNode(t,r)||n:(r||(r=e.selector),!r&&null!=t&&(r='[port="'+t+'"]'),u=this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(u,"magnet")},dragLinkStart:function(e,n,t,r){this.model.startBatch("add-link");const a=this.addLinkFromMagnet(n,t,r);a.notifyPointerdown(e,t,r),a.eventData(e,a.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:a})},dragLink:function(e,n,t){var r=this.eventData(e),a=r.linkView;if(a)a.pointermove(e,n,t);else{var u=this.paper,c=u.options.magnetThreshold,v=this.getEventTarget(e),y=r.targetMagnet;if("onleave"===c){if(y===v||Fe(y).contains(v))return}else if(u.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,y,n,t)}},dragLinkEnd:function(e,n,t){var a=this.eventData(e).linkView;!a||(a.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){Ge(n)||(e instanceof SVGElement?Fe(e).attr(n):cn(e).attr(n))},processNodeAttributes:function(e,n){var t,r,a,u,c,v,y,T,A,_=[];for(t in n)!n.hasOwnProperty(t)||(r=n[t],!(a=this.getAttributeDefinition(t))||et(a.qualify)&&!a.qualify.call(this,r,e,n)?(v||(v={}),v[Tn(t)]=r):(xn(a.set)&&(v||(v={}),v[a.set]=r),null!==r&&_.push(t,a)));for(u=0,c=_.length;u<c;u+=2)r=n[t=_[u]],et((a=_[u+1]).set)&&(y||(y={}),y[t]=r),et(a.position)&&(T||(T={}),T[t]=r),et(a.offset)&&(A||(A={}),A[t]=r);return{raw:n,normal:v,set:y,position:T,offset:A}},updateRelativeAttributes:function(e,n,t,r){r||(r={});var a,u,v=n.raw||{},y=n.normal||{},T=n.set,A=n.position,_=n.offset;for(a in T){u=T[a];var W=this.getAttributeDefinition(a).set.call(this,u,t.clone(),e,v);ft(W)?Et(y,W):void 0!==W&&(y[a]=W)}if(e instanceof HTMLElement)this.setNodeAttributes(e,y);else{var Pe,Re,Le,ne=y.transform,oe=Fe.transformStringToMatrix(ne),we=me(oe.e,oe.f);if(ne&&(y=Ue(y,"transform"),oe.e=oe.f=0),A||_){var L=this.getNodeScale(e,r.scalableNode);Pe=L.sx,Re=L.sy}var U=!1;for(a in A)u=A[a],(Le=this.getAttributeDefinition(a).position.call(this,u,t.clone(),e,v))&&(we.offset(me(Le).scale(Pe,Re)),U||(U=!0));this.setNodeAttributes(e,y);var o=!1;if(_){var s=this.getNodeBoundingRect(e);if(s.width>0&&s.height>0){var d=Fe.transformRect(s,oe).scale(1/Pe,1/Re);for(a in _)u=_[a],(Le=this.getAttributeDefinition(a).offset.call(this,u,d,e,v))&&(we.offset(me(Le).scale(Pe,Re)),o||(o=!0))}}(void 0!==ne||U||o)&&(we.round(1),oe.e=we.x,oe.f=we.y,e.setAttribute("transform",Fe.matrixToTransformString(oe)))}},getNodeScale:function(e,n){var t,r;if(n&&n.contains(e)){var a=n.scale();t=1/a.sx,r=1/a.sy}else t=1,r=1;return{sx:t,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=Fe.ensureId(e),r=n[t];return r||(r=n[t]={}),r},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=Fe(e).getBBox()),new at(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=Fe(e).getTransformToElement(t)}return Fe.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=Fe(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,r){var a,u,c,v,y={},T=[];for(var A in e)if(e.hasOwnProperty(A)&&St(c=e[A])){var _=t[A]=this.findBySelector(A,n,r);for(a=0,u=_.length;a<u;a++){var W=_[a];v=Fe.ensureId(W);var ne=r&&r[A]===W,oe=y[v];if(oe){oe.array||(T.push(v),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var we=oe.attributes,Pe=oe.selectedLength;if(ne)we.unshift(c),Pe.unshift(-1);else{var Re=$s(Pe,u);we.splice(Re,0,c),Pe.splice(Re,0,u)}}else y[v]={attributes:c,selectedLength:ne?-1:u,node:W,array:!1}}}for(a=0,u=T.length;a<u;a++)(c=y[v=T[a]]).attributes=Lt({},...c.attributes.reverse());return y},getEventTarget:function(e,n={}){const{target:t,type:r,clientX:a=0,clientY:u=0}=e;return n.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(a,u):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=at()),t.selectors||(t.selectors=this.selectors);var v,y,T,A,_,r={},a={},u=[],c=[],W=t.roAttributes,ne=this.findNodesAttributes(W||n,e,r,t.selectors),oe=W?this.findNodesAttributes(n,e,r,t.selectors):ne;for(var we in ne)if((_=this.processNodeAttributes(y=(A=ne[we]).node,T=A.attributes)).set||_.position||_.offset){var Le,Pe=oe[we]&&oe[we].attributes,Re=Pe&&void 0===T.ref?Pe.ref:T.ref;if(Re){if(!(Le=(r[Re]||this.findBySelector(Re,e,t.selectors))[0]))throw new Error('dia.CellView: "'+Re+'" reference does not exist.')}else Le=null;if(v={node:y,refNode:Le,processedAttributes:_,allAttributes:Pe},Le){var L=c.findIndex(function(ae){return ae.refNode===y});L>-1?c.splice(L,0,v):c.push(v)}else u.push(v)}else this.setNodeAttributes(y,_.normal);u.push(...c);for(var U,o=0,s=u.length;o<s;o++){y=(v=u[o]).node,Le=v.refNode;var d=Fe(t.rotatableNode),m=Le?Fe.ensureId(Le):"",I=!!d&&!!Le&&d.contains(Le),F=a[m];if(!F){var q=I?d:e;F=a[m]=Le?Fe(Le).getBBox({target:q}):t.rootBBox}W?(_=this.processNodeAttributes(y,v.allAttributes),this.mergeProcessedAttributes(_,v.processedAttributes)):_=v.processedAttributes;var te=F;I&&!d.contains(y)&&(U||(U=Fe.transformStringToMatrix(d.attr("transform"))),te=Fe.transformRect(F,U)),this.updateRelativeAttributes(y,_,te,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Et(e.set,n.set),Et(e.position,n.position),Et(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){ko.remove(this)},updateHighlighters:function(e=!1){ko.update(this,null,e)},transformHighlighters:function(){ko.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:r}=this,{graph:a}=r;a&&(r.startBatch("pointer"),this.eventData(e,{graph:a})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,n,t),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,r){this.notify("cell:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){this.notify(n,e,t,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),r=n.findView(t);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:$a,addPresentationAttributes:function(e){return Lt({},ze(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return fa(n.concat(t))})}}),bn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ts=hn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=hn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){hn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[bn.UPDATE],position:[bn.TRANSLATE,bn.TOOLS],size:[bn.RESIZE,bn.PORTS,bn.TOOLS],angle:[bn.ROTATE,bn.TOOLS],markup:[bn.RENDER],ports:[bn.PORTS]},initFlag:[bn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=xr;this.hasFlag(e,bn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,bn.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[bn.RENDER,bn.UPDATE,bn.RESIZE,bn.TRANSLATE,bn.ROTATE,bn.PORTS,bn.TOOLS]);else{let a=!1;this.hasFlag(e,bn.RESIZE)&&(this.resize(n),a=!0,e=this.removeFlag(e,[bn.RESIZE,bn.UPDATE])),this.hasFlag(e,bn.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,bn.UPDATE),a=!0,t&&(e=this.removeFlag(e,bn.PORTS))),this.hasFlag(e,bn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,bn.TRANSLATE),r=!0),this.hasFlag(e,bn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,bn.ROTATE),r=!0),this.hasFlag(e,bn.PORTS)&&(this._renderPorts(),a=!0,e=this.removeFlag(e,bn.PORTS)),a&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,bn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,bn.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=xr;t&&this._removePorts();var r=this.model,a=r.attr();this.updateDOMSubtreeAttributes(this.el,a,{rootBBox:new at(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===a?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=Fe(t[this.rotatableSelector])||null,this.scalableNode=Fe(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(Fe(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),xr.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),r=n.size(),a=this.scalableNode,u=!1;a.node.getElementsByTagName("path").length>0&&(u=!0);var c=a.getBBox({recursive:u});a.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var T=this.rotatableNode,A=T&&T.attr("transform");if(A){T.attr("transform",A+" rotate("+-t+","+r.width/2+","+r.height/2+")");var _=a.getBBox({target:this.paper.cells});n.set("position",{x:_.x,y:_.y},Et({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,r=(e.paper||this.paper).model,a=e.initialZIndices={},u=n.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...u,...c].forEach(T=>a[T.id]=T.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const v=r.getElements().reduce((T,A)=>Math.max(T,A.attributes.z||0),0);c.forEach(T=>{T.attributes.z<=v&&T.set("z",v+1,{ui:!0})}),n.stopBatch("to-front");const y=n.parent();y?(r.getCell(y).unembed(n,{ui:!0}),e.initialParentId=y):e.initialParentId=null},processEmbedding:function(e={},n,t,r){const a=e.model||this.model,u=e.paper||this.paper,c=u.model,{findParentBy:v,frontParentOnly:y,validateEmbedding:T}=u.options;let A;A=et(v)?_t(v.call(c,this,n,t,r)):"pointer"===v?_t(c.findModelsFromPoint({x:t,y:r})):c.findModelsUnderElement(a,{searchBy:v}),A=A.filter(ne=>ne instanceof Jr&&a.id!==ne.id&&!ne.isEmbeddedIn(a)),y&&(A=A.slice(-1));let _=null;const W=e.candidateEmbedView;for(let ne=A.length-1;ne>=0;ne--){const oe=A[ne];if(W&&W.model.id==oe.id){_=W;break}{const we=oe.findView(u);if(!et(T)||T.call(u,this,we)){_=we;break}}}_&&_!=W&&(this.clearEmbedding(e),e.candidateEmbedView=_.highlight(_.findProxyNode(null,"container"),{embedding:!0})),!_&&W&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,r=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:a}=r.options,{initialParentId:u}=e;if(u&&"function"==typeof a&&!a.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(t,{deep:!0}).forEach(a=>{a.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,r=n||this.model,u=(e.paper||this.paper).model;switch(t){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:v,initialZIndices:y}=e;if(v){const{x:A,y:_}=v;r.position(A,_,{deep:!0,ui:!0})}y&&Object.keys(y).forEach(A=>{const _=u.getCell(A);_&&_.set("z",y[A],{ui:!0})});const T=u.getCell(c);T&&T.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const r=this.findAttribute("port",e);if(r){const a=this.findPortNode(r,t);if(a)return a}else{const[a]=this.findBySelector(t);if(a)return a}}return e},notifyPointerdown(e,n,t){hn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){hn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),hn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){hn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){hn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){hn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(r.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,r)},pointerup:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(r.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var a=r.targetMagnet;a&&this.magnetpointerclick(e,a,n,t),this.checkMouseleave(e)},mouseover:function(e){hn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){hn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){hn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){hn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,r){hn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,r)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,r){this.notify("element:magnet:pointerdblclick",e,n,t,r)},magnetcontextmenu:function(e,n,t,r){this.notify("element:magnet:contextmenu",e,n,t,r)},dragStart:function(e,n,t){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const a=r.model.position();r.eventData(e,{initialPosition:a,pointerOffset:a.difference(n,t),restrictedArea:this.paper.getRestrictedArea(r,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,a=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),a.options.validateMagnet(this,r,e)?(a.options.magnetThreshold<=0&&this.dragLinkStart(e,r,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),a.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var r=this.paper,a=r.options.gridSize,u=this.model,c=this.eventData(e),{pointerOffset:v,restrictedArea:y,embedding:T}=c,A=ui(n+v.x,a),_=ui(t+v.y,a);u.position(A,_,{restrictedArea:y,deep:!0,ui:!0}),r.options.embeddingMode&&(T||(this.prepareEmbedding(c),T=!0),this.processEmbedding(c,e,n,t)),this.eventData(e,{embedding:T})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,r){var a=this.paper;a.eventData(e).mousemoved>a.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,r)}},{Flags:bn});Et(Ts.prototype,Kf);const Mr=function(e,n,t){return e},Hu=function(e,n,t){var T,A,_,r=n.side||"bottom",a=Xo(n.padding||40),u=t.sourceBBox,c=t.targetBBox,v=u.center(),y=c.center();switch(r){case"bottom":_=1,T="y",A="height";break;case"top":_=-1,T="y",A="height";break;case"left":_=-1,T="x",A="width";break;case"right":_=1,T="x",A="width";break;default:throw new Error("Router: invalid side")}return v[T]+=_*(u[A]/2+a[r]),y[T]+=_*(c[A]/2+a[r]),_*(v[T]-y[T])>0?y[T]=v[T]:v[T]=y[T],[v].concat(e,y)};var oc={N:"S",S:"N",E:"W",W:"E"},uo={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Ya(e,n,t){var r=new me(e.x,n.y);return t.containsPoint(r)&&(r=new me(n.x,e.y)),r}function Xa(e,n){return e["W"===n||"E"===n?"width":"height"]}function or(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function Es(e){return new at(e.x,e.y,0,0)}function _r(e){var n=Xo(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function eu(e,n){return e.sourceBBox.clone().moveAndExpand(_r(n))}function ac(e,n){return e.targetBBox.clone().moveAndExpand(_r(n))}function tu(e,n,t){var r=new me(e.x,n.y),a=new me(n.x,e.y),u=or(e,r),c=or(e,a),v=oc[t],y=u===t||u!==v&&(c===v||c!==t)?r:a;return{points:[y],direction:or(y,n)}}function nu(e,n,t){var r=Ya(e,n,t);return{points:[r],direction:or(r,n)}}function Ps(e,n,t,r){var y,a={},u=[new me(e.x,n.y),new me(n.x,e.y)],c=u.filter(function(_){return!t.containsPoint(_)}),v=c.filter(function(_){return or(_,e)!==r});if(v.length>0)y=v.filter(function(_){return or(e,_)===r}).pop(),a.points=[y=y||v[0]],a.direction=or(y,n);else{y=de(u,c)[0];var T=new me(n).move(y,-Xa(t,r)/2),A=Ya(T,e,t);a.points=[A,T],a.direction=or(T,n)}return a}function sc(e,n,t,r){var a=nu(n,e,r),u=a.points[0];if(t.containsPoint(u)){var c=(a=nu(e,n,t)).points[0];if(r.containsPoint(c)){var v=new me(e).move(c,-Xa(t,or(e,c))/2),y=new me(n).move(u,-Xa(r,or(n,u))/2),T=new vt(v,y).midpoint(),A=nu(e,T,t),_=tu(T,n,A.direction);a.points=[A.points[0],_.points[0]],a.direction=_.direction}}return a}function ju(e,n,t,r,a){var A,_,W,u={},c=t.union(r).inflate(1),v=c.center().distance(n)>c.center().distance(e),y=v?n:e,T=v?e:n;return a?(A=me.fromPolar(c.width+c.height,uo[a],y),A=c.pointNearestToPoint(A).move(A,-1)):A=c.pointNearestToPoint(y).move(y,1),_=Ya(A,T,c),A.round().equals(_.round())?(_=me.fromPolar(c.width+c.height,Nn(A.theta(y))+Math.PI/2,T),W=Ya(A,_=c.pointNearestToPoint(_).move(T,1).round(),c),u.points=v?[_,W,A]:[A,W,_]):u.points=v?[_,A]:[A,_],u.direction=or(v?A:_,n),u}function zu(e,n,t){var r=eu(t,n),a=ac(t,n),u=function td(e,n){return e.sourceAnchor?e.sourceAnchor:eu(e,n).center()}(t,n),c=function nd(e,n){return e.targetAnchor?e.targetAnchor:ac(e,n).center()}(t,n);r=r.union(Es(u)),a=a.union(Es(c)),(e=_t(e).map(me)).unshift(u),e.push(c);for(var v,y=[],T=0,A=e.length-1;T<A;T++){var _=null,W=e[T],ne=e[T+1],oe=!!or(W,ne);if(0===T)T+1===A?r.intersect(a.clone().inflate(1))?_=ju(W,ne,r,a):oe||(_=sc(W,ne,r,a)):r.containsPoint(ne)?_=ju(W,ne,r,Es(ne).moveAndExpand(_r(n))):oe||(_=nu(W,ne,r));else if(T+1===A){var we=oe&&or(ne,W)===v;a.containsPoint(W)||we?_=ju(W,ne,Es(W).moveAndExpand(_r(n)),a,v):oe||(_=Ps(W,ne,a,v))}else oe||(_=tu(W,ne,v));_?(Array.prototype.push.apply(y,_.points),v=_.direction):v=or(W,ne),T+1<A&&y.push(ne)}return y}var Ka={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!et(zu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return zu(e,Et({},Ka,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function Uu(e){this.map={},this.options=e,this.mapGridSize=100}function xa(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function ru(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function Gu(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function uc(e,n){return e.sourceAnchor?e.sourceAnchor:ru(e,n).center()}function Wu(e,n,t,r,a){var u=360/t,c=e.theta(function lc(e,n,t,r){var a=r.step;return new me(e.x+(n.x-e.x)/t.x*a,e.y+(n.y-e.y)/t.y*a)}(e,n,r,a)),v=Ln(c+u/2);return u*Math.floor(v/u)}function iu(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function Yu(e,n){if(!e)return n;var t=Math.abs(e),r=Math.round(t/n);return r?n+(t-r*n)/r:t}function Qa(e,n){return e.round(n)}function ba(e,n,t){return Qa(function cc(e,n){var t=n.source,r=ui(e.x-t.x,n.x)+t.x,a=ui(e.y-t.y,n.y)+t.y;return new me(r,a)}(e.clone(),n),t)}function Is(e){return e.clone().toString()}function ou(e){return new me(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function fc(e,n,t,r,a,u,c){for(var _,v=[],y=ou(a.difference(t)),T=Is(t),A=e[T];A;){var W=ou((_=n[T]).difference(A));W.equals(y)||(v.unshift(_),y=W),A=e[T=Is(A)]}var ne=n[T];return ou(ne.difference(r)).equals(y)||v.unshift(ne),v}function dc(e,n){for(var t=1/0,r=0,a=n.length;r<a;r++){var u=e.manhattanDistance(n[r]);u<t&&(t=u)}return t}function Xu(e,n,t,r,a){var u=a.precision,c=a.directionMap,v=e.difference(n.center()),y=ft(c)?Object.keys(c):[],T=_t(t),A=y.reduce(function(_,W){if(T.includes(W)){for(var Le,ne=c[W],oe=new me(e.x+ne.x*(Math.abs(v.x)+n.width),e.y+ne.y*(Math.abs(v.y)+n.height)),Pe=new vt(e,oe).intersect(n)||[],Re=Pe.length,L=null,U=0;U<Re;U++){var o=Pe[U],s=e.squaredDistance(o);(void 0===Le||s>Le)&&(Le=s,L=o)}if(L){var d=ba(L,r,u);n.containsPoint(d)&&(d=ba(d.offset(ne.x*r.x,ne.y*r.y),r,u)),_.push(d)}}return _},[]);return n.containsPoint(e)||A.push(ba(e,r,u)),A}function od(e,n,t,r){var u,c,a=r.precision;u=Qa(e instanceof at?uc(this,r).clone():e.clone(),a),c=Qa(n instanceof at?function rd(e,n){return e.targetAnchor?e.targetAnchor:Gu(e,n).center()}(this,r).clone():n.clone(),a);var y,T,A,_,v=function $u(e,n,t){return{source:n.clone(),x:Yu(t.x-n.x,e),y:Yu(t.y-n.y,e)}}(r.step,u,c);if(A=e instanceof at?Xu(y=u,e,r.startDirections,v,r):[y=u],n instanceof at?(T=c,_=Xu(c,n,r.endDirections,v,r)):_=[T=c],A=A.filter(mn=>!t(mn)),_=_.filter(mn=>!t(mn)),A.length>0&&_.length>0){for(var W=new xa,ne={},oe={},we={},Pe=0,Re=A.length;Pe<Re;Pe++){var Le=A[Pe],L=Is(Le);W.add(L,dc(Le,_)),ne[L]=Le,we[L]=0}var s,d,U=r.previousDirectionAngle,o=void 0===U,m=r.directions;!function id(e,n,t){var r=t.step;_t(t.directions).forEach(function(a){a.gridOffsetX=a.offsetX/r*n.x,a.gridOffsetY=a.offsetY/r*n.y})}(0,v,r);for(var I=m.length,F=_t(_).reduce(function(mn,Dt){var yt=Is(Dt);return mn.push(yt),mn},[]),q=r.maximumLoops;!W.isEmpty()&&q>0;){var ot,te=W.pop(),ae=ne[te],Se=oe[te],Te=we[te],Oe=void 0===Se,qe=ae.equals(y);ot=Oe?o?qe?null:Wu(y,ae,I,v,r):U:Wu(Se,ae,I,v,r);var pt=A.length===_.length;if(pt)for(var rt=0;rt<A.length;rt++)if(!A[rt].equals(_[rt])){pt=!1;break}if((!Oe||!pt)&&F.indexOf(te)>=0)return r.previousDirectionAngle=ot,fc(oe,ne,ae,y,T);for(Pe=0;Pe<I;Pe++){var ut=(s=m[Pe]).angle;if(d=iu(ot,ut),o&&qe||!(d>r.maxAllowedDirectionChange)){var lt=ba(ae.clone().offset(s.gridOffsetX,s.gridOffsetY),v,a),Ht=Is(lt);if(!W.isClose(Ht)&&!t(lt)){if(F.indexOf(Ht)>=0&&!lt.equals(T)&&iu(ut,Wu(lt,T,I,v,r))>r.maxAllowedDirectionChange)continue;var Yt=Te+s.cost+(qe?0:r.penalties[d]);(!W.isOpen(Ht)||Yt<we[Ht])&&(ne[Ht]=lt,oe[Ht]=ae,we[Ht]=Yt,W.add(Ht,Yt+dc(lt,_)))}}}q--}}return r.fallbackRoute.call(this,y,T,r)}Uu.prototype.build=function(e,n){var t=this.options,r=_t(t.excludeEnds).reduce(function(y,T){var A=n.get(T);if(A){var _=e.getCell(A.id);_&&y.push(_)}return y},[]),a=[],u=e.getCell(n.get("source").id);u&&(a=$e(a,u.getAncestors().map(function(y){return y.id})));var c=e.getCell(n.get("target").id);c&&(a=$e(a,c.getAncestors().map(function(y){return y.id})));var v=this.mapGridSize;return e.getElements().reduce(function(y,T){var A=_t(t.excludeTypes).includes(T.get("type")),_=r.find(function(U){return U.id===T.id}),W=a.includes(T.id);if(!(A||_||W))for(var oe=T.getBBox().moveAndExpand(t.paddingBox),we=oe.origin().snapToGrid(v),Pe=oe.corner().snapToGrid(v),Re=we.x;Re<=Pe.x;Re+=v)for(var Le=we.y;Le<=Pe.y;Le+=v){var L=Re+"@"+Le;y[L]=y[L]||[],y[L].push(oe)}return y},this.map),this},Uu.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return _t(this.map[n]).every(function(t){return!t.containsPoint(e)})},xa.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=$s(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(t,0,e)},xa.prototype.remove=function(e){this.hash[e]=this.CLOSE},xa.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},xa.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},xa.prototype.isEmpty=function(){return 0===this.items.length},xa.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const As=function(e,n,t){return function hc(e,n,t){(function Ku(e){if(e.directions=ze(e,"directions"),e.penalties=ze(e,"penalties"),e.paddingBox=ze(e,"paddingBox"),e.padding=ze(e,"padding"),e.padding){var n=Xo(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}_t(e.directions).forEach(function(t){var r=new me(0,0),a=new me(t.offsetX,t.offsetY);t.angle=Ln(r.theta(a))})})(n),t.options.perpendicular=!!n.perpendicular;var r=ru(t,n),a=Gu(t,n),u=uc(t,n);let c;if("function"==typeof n.isPointObstacle)c=n.isPointObstacle;else{const L=new Uu(n);L.build(t.paper.model,t.model),c=U=>!L.isPointAccessible(U)}for(var A,_,v=_t(e).map(me),y=[],T=u,W=0,ne=v.length;W<=ne;W++){var oe=null;if(_=A||r,!(A=v[W])&&(A=a,(!t.model.get("source").id||!t.model.get("target").id)&&et(n.draggingRoute))){var Pe=_===r?u:_,Re=A.origin();oe=n.draggingRoute.call(t,Pe,Re,n)}if(null===(oe=oe||od.call(t,_,A,c,n)))return n.fallbackRouter(e,n,t);var Le=oe[0];Le&&Le.equals(T)&&oe.shift(),T=oe[oe.length-1]||T,Array.prototype.push.apply(y,oe)}return y}(e,Et({},Ka,n),t)};var ad={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var r=e.theta(n),a=[],u={x:n.x,y:e.y},c={x:e.x,y:n.y};if(r%180>90){var v=u;u=c,c=v}var y=r%90<45?u:c,T=new vt(e,y),A=90*Math.ceil(r/90),_=me.fromPolar(T.squaredLength(),Nn(A+135),y),W=new vt(n,_),ne=T.intersection(W),oe=ne||n,Pe=360/t.directions.length,Re=(ne?oe:e).theta(n),Le=Ln(Re+Pe/2),L=Pe*Math.floor(Le/Pe);return t.previousDirectionAngle=L,oe&&a.push(oe.round()),a.push(n),a}};const Qu=function(e,n,t){if(!et(As))throw new Error("Metro requires the manhattan router.");return As(e,Et({},ad,n),t)};var pc=["arc","gap","cubic"],gc=["smooth"],au=1/3,su=2/3;function Zr(e,n,t){var r=[].concat(e,t,n);return r.reduce(function(a,u,c){var v=r[c+1];return null!=v&&(a[c]=vi(u,v)),a},[])}function Zu(e,n){return vi(e,n).squaredLength()}function qr(e,n,t,r){var u,a=new Tt;return u=Tt.createSegment("M",e[0].start),a.appendSegment(u),_t(e).forEach(function(c,v){if(c.isJump){var y,T,A,_;if("arc"===t){y=-90,T=c.start.difference(c.end);var W=Number(T.x<0||0===T.x&&T.y<0);W&&(y+=180);var we,ne=c.midpoint(),oe=new vt(ne,c.end).rotate(ne,y);A=(we=new vt(c.start,ne)).pointAt(2/3).rotate(c.start,y),_=oe.pointAt(1/3).rotate(oe.end,-y),u=Tt.createSegment("C",A,_,oe.end),a.appendSegment(u),we=new vt(ne,c.end),A=oe.pointAt(1/3).rotate(oe.end,y),_=we.pointAt(1/3).rotate(c.end,-y),u=Tt.createSegment("C",A,_,c.end),a.appendSegment(u)}else if("gap"===t)u=Tt.createSegment("M",c.end),a.appendSegment(u);else if("cubic"===t){y=c.start.theta(c.end);var Pe=.6*n,Re=1.35*n;T=c.start.difference(c.end),(W=Number(T.x<0||0===T.x&&T.y<0))&&(Re*=-1),A=me(c.start.x+Pe,c.start.y+Re).rotate(c.start,y),_=me(c.end.x-Pe,c.end.y+Re).rotate(c.end,y),u=Tt.createSegment("C",A,_,c.end),a.appendSegment(u)}}else{var Le=e[v+1];0==r||!Le||Le.isJump?(u=Tt.createSegment("L",c.end),a.appendSegment(u)):function Jo(e,n,t,r,a){var ne,u=t.distance(r)/2,c=t.distance(a)/2,v=-Math.min(e,u),y=-Math.min(e,c),T=t.clone().move(r,v).round(),A=t.clone().move(a,y).round(),_=new me(au*T.x+su*t.x,su*t.y+au*T.y),W=new me(au*A.x+su*t.x,su*t.y+au*A.y);ne=Tt.createSegment("L",T),n.appendSegment(ne),ne=Tt.createSegment("C",_,W,A),n.appendSegment(ne)}(r,a,c.end,c.start,Le.end)}}),a}const qu=function(e,n,t,r){!function ud(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var r=n.model;r.on("batch:stop",function(){this.hasActiveBatch()||function uu(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const r=n[t],a=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(a)}}(n)}),r.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var a=r.raw,u=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),v=r.radius||0,y=r.ignoreConnectors||gc;-1===pc.indexOf(c)&&(c=pc[0]);var T=this.paper,_=T.model.getLinks();if(1===_.length)return qr(Zr(e,n,t),u,c,v);var W=this.model,ne=_.indexOf(W),oe=T.options.defaultConnector||{},we=_.filter(function(o,s){var d=o.get("connector")||oe;return!(_t(y).includes(d.name)||s>ne&&"jumpover"===d.name)}),Pe=we.map(function(o){return T.findViewByModel(o)}),Re=Zr(e,n,t),Le=Pe.map(function(o){return null==o?[]:o===this?Re:Zr(o.sourcePoint,o.targetPoint,o.route)},this),L=Re.reduce(function(o,s){var d=we.reduce(function(m,I,F){if(I!==W){var q=function Ju(e,n){return _t(n).reduce(function(t,r){var a=e.intersection(r);return a&&t.push(a),t},[])}(s,Le[F]);m.push.apply(m,q)}return m},[]).sort(function(m,I){return Zu(s.start,m)-Zu(s.start,I)});return d.length>0?o.push.apply(o,function vc(e,n,t){return n.reduce(function(r,a,u){if(!0===a.skip)return r;var c=r.pop()||e,v=jn(a).move(c.start,-t),y=jn(a).move(c.start,+t),T=n[u+1];if(null!=T){var A=y.distance(T);A<=t&&(y=T.move(c.start,A),T.skip=!0)}else if(v.distance(c.end)<2*t+1)return r.push(c),r;if(y.distance(c.start)<2*t+1)return r.push(c),r;var ne=vi(v,y);return ne.isJump=!0,r.push(vi(c.start,v),ne,vi(y,c.end)),r},[])}(s,d,u)):o.push(s),o},[]),U=qr(L,u,c,v);return a?U:U.serialize()},mc=function(e,n,t,r){var a=r&&r.raw,u=[e].concat(t).concat([n]),c=new dn(u),v=new Tt(c);return a?v:v.serialize()},lu=function(e,n,t,r){r||(r={});var v,a=r.radius||10,u=r.raw,c=new Tt;v=Tt.createSegment("M",e),c.appendSegment(v);for(var A,_,W,ne,oe,we,Pe,Re,Le,L,U,y=1/3,T=2/3,o=0,s=t.length;o<s;o++)A=new me(t[o]),_=t[o-1]||e,W=t[o+1]||n,ne=oe||A.distance(_)/2,oe=A.distance(W)/2,we=-Math.min(a,ne),Pe=-Math.min(a,oe),Re=A.clone().move(_,we).round(),Le=A.clone().move(W,Pe).round(),L=new me(y*Re.x+T*A.x,T*A.y+y*Re.y),U=new me(y*Le.x+T*A.x,T*A.y+y*Le.y),v=Tt.createSegment("L",Re),c.appendSegment(v),v=Tt.createSegment("C",L,U,Le),c.appendSegment(v);return v=Tt.createSegment("L",n),c.appendSegment(v),u?c:c.serialize()},yc=function(e,n,t,r){var u,a=r&&r.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([n]),v=pn.throughPoints(c);u=new Tt(v)}else{var y;if(u=new Tt,y=Tt.createSegment("M",e),u.appendSegment(y),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var T=(e.x+n.x)/2;y=Tt.createSegment("C",T,e.y,T,n.y,n.x,n.y),u.appendSegment(y)}else{var A=(e.y+n.y)/2;y=Tt.createSegment("C",e.x,A,n.x,A,n.x,n.y),u.appendSegment(y)}}return a?u:u.serialize()},ei={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Dr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ms=function(e,n,t=[],r={},a){const u=Boolean(r.raw),{direction:c=ei.AUTO,precision:v=3}=r,y={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new me(r.sourceTangent):null,targetTangent:r.targetTangent?new me(r.targetTangent):null};y.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new me(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new me(r.sourceDirection).normalize():null,y.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new me(1,0).rotate(null,r.targetDirection):r.targetDirection?new me(r.targetDirection).normalize():null;const T=[e,...t.map(we=>new me(we)),n];let A,_;if(y.sourceTangent)A=y.sourceTangent;else{const we=function Cc(e,n,t,r){if(r.sourceDirection)switch(r.sourceDirection){case Dr.UP:return new me(0,-1);case Dr.DOWN:return new me(0,1);case Dr.LEFT:return new me(-1,0);case Dr.RIGHT:return new me(1,0);case Dr.AUTO:return tl(e,n);case Dr.CLOSEST_POINT:return cu(0,n);case Dr.OUTWARDS:return bc(e,n);default:return r.sourceDirection}switch(t){case ei.HORIZONTAL:return function el(e,n,t){const{sourceBBox:r}=e;let a;return"left"===(a=r.width&&r.height?r.sideNearestToPoint(n[0]):r.x>n[1].x?"right":"left",a)?new me(-1,0):new me(1,0)}(e,n);case ei.VERTICAL:return function ld(e,n,t){const{sourceBBox:r}=e;let a;return"top"===(a=r.width&&r.height?r.sideNearestToPoint(n[0]):r.y>n[1].y?"bottom":"top",a)?new me(0,-1):new me(0,1)}(e,n);case ei.CLOSEST_POINT:return cu(0,n);case ei.OUTWARDS:return bc(e,n);default:return tl(e,n)}}(a,T,c,y),Pe=T[0].distance(T[1])*y.coeff,Le=fu(we,T[1].difference(T[0]).normalize());if(Le>Math.PI/4){const L=Pe+(Le-Math.PI/4)*y.angleTangentCoefficient;A=we.clone().scale(L,L)}else A=we.clone().scale(Pe,Pe)}if(y.targetTangent)_=y.targetTangent;else{const we=function wc(e,n,t,r){if(r.targetDirection)switch(r.targetDirection){case Dr.UP:return new me(0,-1);case Dr.DOWN:return new me(0,1);case Dr.LEFT:return new me(-1,0);case Dr.RIGHT:return new me(0,1);case Dr.AUTO:return nl(e,n);case Dr.CLOSEST_POINT:return xc(0,n);case Dr.OUTWARDS:return _c(e,n);default:return r.targetDirection}switch(t){case ei.HORIZONTAL:return function Zo(e,n,t){const{targetBBox:r}=e;let a;return"left"===(a=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.x>n[n.length-2].x?"left":"right",a)?new me(-1,0):new me(1,0)}(e,n);case ei.VERTICAL:return function qo(e,n,t){const{targetBBox:r}=e;let a;return"top"===(a=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.y>n[n.length-2].y?"top":"bottom",a)?new me(0,-1):new me(0,1)}(e,n);case ei.CLOSEST_POINT:return xc(0,n);case ei.OUTWARDS:return _c(e,n);default:return nl(e,n)}}(a,T,c,y),Pe=T.length-1,Re=T[Pe-1].distance(T[Pe])*y.coeff,L=fu(we,T[Pe-1].difference(T[Pe]).normalize());if(L>Math.PI/4){const U=Re+(L-Math.PI/4)*y.angleTangentCoefficient;_=we.clone().scale(U,U)}else _=we.clone().scale(Re,Re)}const ne=function ti(e,n,t,r){const{tau:a,coeff:u}=r,c=[],v=[],y=[],T=e.length-1;for(let A=0;A<T;A++)c[A]=e[A].distance(e[A+1]);v[0]=n,v[T]=t;for(let A=1;A<T;A++){let _,W;_=1===A?e[A-1].clone().offset(v[A-1].x,v[A-1].y):e[A-1].clone(),W=A===T-1?e[A+1].clone().offset(v[A+1].x,v[A+1].y):e[A+1].clone();const ne=_.difference(e[A]).normalize(),oe=W.difference(e[A]).normalize(),we=fu(ne,oe);let Re,Pe=(Math.PI-we)/2;const Le=rl(ne,oe);let L;L=rl(e[A].difference(e[A+1]),e[A].difference(e[A-1])),Le<0&&(Pe=-Pe),we<Math.PI/2&&(Pe<0&&L<0||Pe>0&&L>0)&&(Pe-=Math.PI),Re=oe.clone(),cd(Re,Pe);const U=Re.clone(),o=Re.clone(),s=c[A-1]*u,d=c[A]*u;U.scale(s,s),o.scale(d,d),v[A]=[U,o]}for(let A=0;A<T;A++){let _,W;_=0===A?e[A+1].difference(v[A].x/a,v[A].y/a):e[A+1].difference(v[A][1].x/a,v[A][1].y/a),W=A===T-1?e[A].clone().offset(v[A+1].x/a,v[A+1].y/a):e[A].difference(v[A+1][0].x/a,v[A+1][0].y/a),y[A]=[_,e[A],e[A+1],W]}return y}(T,A,_,y).map(we=>function lo(e,n){const{tau:t}=n,r=new me;r.x=e[1].x+(e[2].x-e[0].x)/(6*t),r.y=e[1].y+(e[2].y-e[0].y)/(6*t);const a=new me;return a.x=e[2].x+(e[3].x-e[1].x)/(6*t),a.y=e[2].y+(e[3].y-e[1].y)/(6*t),new pn(e[1],r,a,e[2])}(we,y)),oe=new Tt(ne).round(v);return u?oe:oe.serialize()};function tl(e,n,t){const{sourceBBox:r}=e;let a;switch(a=r.sideNearestToPoint(r.width&&r.height?n[0]:n[1]),a){case"top":return new me(0,-1);case"bottom":return new me(0,1);case"right":return new me(1,0);case"left":return new me(-1,0)}}function nl(e,n,t){const{targetBBox:r}=e;let a;switch(a=r.sideNearestToPoint(r.width&&r.height?n[n.length-1]:n[n.length-2]),a){case"top":return new me(0,-1);case"bottom":return new me(0,1);case"right":return new me(1,0);case"left":return new me(-1,0)}}function cu(e,n,t){return n[1].difference(n[0]).normalize()}function xc(e,n,t){const r=n.length-1;return n[r-1].difference(n[r]).normalize()}function bc(e,n,t){const{sourceBBox:r}=e,a=r.center();return n[0].difference(a).normalize()}function _c(e,n,t){const{targetBBox:r}=e,a=r.center();return n[n.length-1].difference(a).normalize()}function cd(e,n){const t=Math.cos(n),r=Math.sin(n),u=r*e.x+t*e.y;e.x=t*e.x-r*e.y,e.y=u}function fu(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function rl(e,n){return e.x*n.y-e.y*n.x}Ms.Directions=ei,Ms.TangentDirections=Dr;const Wt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},ks=hn.extend({className:function(){var e=hn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){hn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Wt.RENDER],attrs:[Wt.UPDATE],router:[Wt.UPDATE],connector:[Wt.CONNECTOR],smooth:[Wt.UPDATE],manhattan:[Wt.UPDATE],toolMarkup:[Wt.LEGACY_TOOLS],labels:[Wt.LABELS],labelMarkup:[Wt.LABELS],vertices:[Wt.VERTICES,Wt.UPDATE],vertexMarkup:[Wt.VERTICES],source:[Wt.SOURCE,Wt.UPDATE],target:[Wt.TARGET,Wt.UPDATE]},initFlag:[Wt.RENDER,Wt.SOURCE,Wt.TARGET,Wt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,Wt.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Wt.SOURCE)}if(this.hasFlag(e,Wt.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Wt.TARGET)}const{paper:t,sourceView:r,targetView:a}=this;if(t&&(r&&!t.isViewMounted(r)||a&&!t.isViewMounted(a)))return e;if(this.hasFlag(e,Wt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[Wt.RENDER,Wt.UPDATE,Wt.VERTICES,Wt.LABELS,Wt.TOOLS,Wt.LEGACY_TOOLS,Wt.CONNECTOR]);let u=!1;this.hasFlag(e,Wt.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,Wt.VERTICES));const{model:c}=this,{attributes:v}=c;let y=this.hasFlag(e,Wt.LABELS),T=this.hasFlag(e,Wt.LEGACY_TOOLS);y&&(this.onLabelsChange(c,v.labels,n),e=this.removeFlag(e,Wt.LABELS),u=!0),T&&(this.renderTools(),e=this.removeFlag(e,Wt.LEGACY_TOOLS));const A=this.hasFlag(e,Wt.UPDATE),_=this.hasFlag(e,Wt.CONNECTOR);return(A||_)&&(A?n.translateBy&&c.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[Wt.UPDATE,Wt.TOOLS,Wt.CONNECTOR]),y=!1,T=!1,u=!0),y&&this.updateLabelPositions(),T&&this.updateToolsPosition(),u&&this.updateHighlighters(),this.hasFlag(e,Wt.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,Wt.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Wt.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],r=t.length;if(r>1&&n[t[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=Fe(e);Array.isArray(n)||(n=[n]);for(var t=this._V,r=0,a=n.length;r<a;r++){var u=n[r],c=u.attr("class");c&&(c=jr(c),t[cn.camelCase(c)]=u)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=Fe(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var r=0,a=n.length;r<a;r++)t.appendChild(n[r].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Fe("g").append(n):Fe(r[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},r=this._labelSelectors={},a=this.model,u=a.attributes.labels||[],c=u.length;if(0===c)return n&&n.remove(),this;n?n.empty():(n=e.labels=Fe("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(Or(ze(this,"className"))),n.attr("model-id",a.id)));for(var v=0;v<c;v++){var A,_,T=this._normalizeLabelMarkup(this._getLabelMarkup(u[v].markup));if(T)A=T.node,_=T.selectors;else{var ne=this._normalizeLabelMarkup(this._getLabelMarkup(a._builtins.defaultLabel.markup)),oe=a._getDefaultLabel(),Pe=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||ne;A=Pe.node,_=Pe.selectors}A.setAttribute("label-idx",v),n.append(A),t[v]=A;var Re=this.selector;if(_[Re])throw new Error("dia.LinkView: ambiguous label root selector.");_[Re]=A,r[v]=_}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:r,options:a}=this,{labels:u}=r;if(!u||!t.hasLabels())return;const{node:c}=u;a.labelsLayer?n.getLayerView(a.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){hn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const r=this._labelSelectors[e],[a=null]=this.findBySelector(n,t,r);return a},_mergeLabelAttrs:function(e,n,t,r){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:r:e?t:Lt({},r,t):e?Lt({},t,n):Lt({},r,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),a=e._builtins.defaultLabel.attrs,u=e._getDefaultLabel(),c=u.markup,v=u.attrs,y=0,T=n.length;y<T;y++){var A=this._labelCache[y];A.setAttribute("cursor",t?"move":"default");var _=this._labelSelectors[y],W=n[y],we=this._mergeLabelAttrs(W.markup||c,W.attrs,v,a);this.updateDOMSubtreeAttributes(A,we,{rootBBox:new at(W.size),selectors:_})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=cn(this._V.linkTools.node).empty(),n=rr(this.model.get("toolMarkup")||this.model.toolMarkup),t=Fe(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=rr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Fe(n())):r=t.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=cn(this._V.markerVertices.node).empty(),n=rr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,r){e.append(Fe(n(Et({idx:r},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=cn(this._V.markerArrowheads.node);e.empty();var n=rr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Fe(n({end:"source"})),this._V.targetArrowhead=Fe(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),a=[this.sourceAnchor,...r,this.targetAnchor],u=a.length,c=new dn(a);c.simplify({threshold:.001});const v=c.points.map(T=>T.toJSON()),y=v.length;return u===y?0:(t.vertices(v.slice(1,y-1),e),u-y)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new me(this.sourceAnchor);case"target":return new me(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new me(this.sourcePoint);case"target":return new me(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:r}=this;if(!t||!r)return;const a=new dn(t);a.translate(e,n),this.route=a.points,this._translateConnectionPoints(e,n),r.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),r=this.sourceAnchor=t.source,a=this.targetAnchor=t.target,u=this.findRoute(n);this.route=u;var c=this.findConnectionPoints(u,r,a);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,r=this.findMarkerPoints(e,n,t),a=this.findPath(e,r.source||n,r.target||t);this.path=a},findMarkerPoints:function(e,n,t){var c,v,r=e[0],a=e[e.length-1],u=this._markerCache;return this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.getBBox(),c=me(n).move(r||t,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.getBBox(),v=me(t).move(a||n,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=c||n.clone(),u.targetPoint=v||t.clone(),{source:c,target:v}},findAnchorsOrdered:function(e,n,t,r){var a,u,c,v,y=this.model,T=y.get(e),A=y.get(t),_=this.getEndView(e),W=this.getEndView(t),ne=this.getEndMagnet(e),oe=this.getEndMagnet(t);_?(c=n?new me(n):W?oe:new me(A),a=this.getAnchor(T.anchor,_,ne,c,e)):a=new me(T),W?(v=new me(r||a),u=this.getAnchor(A.anchor,W,oe,v,t)):u=new me(A);var we={};return we[e]=a,we[t]=u,we},findAnchors:function(e){var n=this.model,t=e[0],r=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",r,"source",t):this.findAnchorsOrdered("source",t,"target",r)},findConnectionPoints:function(e,n,t){var _,W,ne,Re,r=e[0],a=e[e.length-1],u=this.model,c=u.get("source"),v=u.get("target"),y=this.sourceView,T=this.targetView,A=this.paper.options;if(y&&!y.isNodeConnection(this.sourceMagnet)){_=this.sourceMagnet||y.el;var oe=c.connectionPoint||A.defaultConnectionPoint,Pe=new vt(r||t,n);ne=this.getConnectionPoint(oe,y,_,Pe,"source")}else ne=n;if(T&&!T.isNodeConnection(this.targetMagnet)){W=this.targetMagnet||T.el;var Le=v.connectionPoint||A.defaultConnectionPoint,U=new vt(a||n,t);Re=this.getConnectionPoint(Le,T,W,U,"target")}else Re=t;return{source:ne,target:Re}},getAnchor:function(e,n,t,r,a){var v,u=n.isNodeConnection(t),c=this.paper.options;if(e||(e=u?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)v=e;else{var y=e.name;if("function"!=typeof(v=c[u?"linkAnchorNamespace":"anchorNamespace"][y]))throw new Error("Unknown anchor: "+y)}var A=v.call(this,n,t,r,e.args||{},a,this);return A?A.round(this.decimalsRounding):new me},getConnectionPoint:function(e,n,t,r,a){var u,T,c=r.end,v=this.paper.options;if("function"==typeof v.linkConnectionPoint&&(u=v.linkConnectionPoint(this,n,t===n.el?void 0:t,r.start,a)))return u;if(!e)return c;if("function"==typeof e)T=e;else{var A=e.name;if("function"!=typeof(T=v.connectionPointNamespace[A]))throw new Error("Unknown connection point: "+A)}return(u=T.call(this,r,n,t,e.args||{},a,this))?u.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var a=n._builtins.defaultLabel.position,u=n._getDefaultLabel(),c=this._normalizeLabelPosition(u.position),v=Lt({},a,c),y=0,T=t.length;y<T;y++){var A=this._labelCache[y];if(A){var W=this._normalizeLabelPosition(t[y].position),ne=Lt({},v,W),oe=this._getLabelTransformationMatrix(ne);A.setAttribute("transform",Fe.matrixToTransformString(oe)),this._cleanLabelMatrices(y)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,r=t[e];if(r)for(let a in r){const{id:u}=r[a];u&&u in n&&delete n[u].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var r=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(r=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===cn.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,r=`${e}View`,a=n.get(e),u=a&&a.id;if(!u)return this[r]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(u);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const v=c.findView(t);return!!v&&(this[r]=v,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let r=t.getMagnetFromLinkEnd(this.model.get(e));r===t.el&&(r=null),this[n]=r}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=_t(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:Lt({},n,e)},addLabel:function(e,n,t,r){var a,u,v,c=0;"number"!=typeof e?(a=e.x,u=e.y,"number"==typeof n?(c=n,v=t):v=n):(a=e,u=n,"number"==typeof t?(c=t,v=r):v=t);var y=this._getDefaultLabelPositionArgs(),A=this._mergeLabelPositionArgs(v,y),_={position:this.getLabelPosition(a,u,c,A)};return this.model.insertLabel(-1,_,v),-1},addVertex:function(e,n,t){var r="number"!=typeof e,a=r?e.x:e,u=r?e.y:n,c=r?n:t,v={x:a,y:u},y=this.getVertexIndex(a,u);return this.model.insertVertex(y,v,c),y},sendToken:function(e,n,t){var a,u,c;ft(n)?(a=n.duration,u="reverse"===n.direction,c=n.connection):(a=n,u=!1,c=null);var v={dur:(a=a||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};u&&(v.keyPoints="1;0",v.keyTimes="0;1");var T,y=Fe(e);if("string"==typeof c)T=this.findBySelector(c,this.el,this.selectors)[0];else{var A=this._V;T=A.connection?A.connection.node:this.el.querySelector("path")}if(!(T instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");y.appendTo(this.paper.cells).animateAlongPath(v,T),setTimeout(function r(_,W){return function(){_.remove(),"function"==typeof W&&W()}}(y,t),a)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||b,t=this.model.router(),r=this.paper.options.defaultRouter;if(!t){if(!r)return e.map(me);t=r}var a=et(t)?t:n[t.name];if(!et(a))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return a.call(this,e,t.args||{},this)||e.map(me)},findPath:function(e,n,t){var r=this.paper.options.connectorNamespace||M,a=this.model.connector();a||(a=this.paper.options.defaultConnector||{});var c=et(a)?a:r[a.name];if(!et(c))throw new Error('dia.LinkView: unknown connector: "'+a.name+'".');var v=ir(a.args||{});v.raw=!0;var y=c.call(this,n,t,e,v,this);return"string"==typeof y&&(y=new Tt(Fe.normalizePathData(y))),y},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(kn(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,r){var c,a={},u=0;"number"==typeof t?(u=t,c=r):c=t,c&&(a.args=c);var we,Pe,v=!(c&&c.absoluteDistance),y=c&&c.absoluteDistance&&c.reverseDistance,T=c&&c.absoluteOffset,A=this.path,_={segmentSubdivisions:this.getConnectionSubdivisions()},W=new me(e,n),ne=A.closestPointT(W,_),oe=A.lengthAtT(ne,_);if(v&&(oe=oe/this.getConnectionLength()||0),y&&(oe=-1*(this.getConnectionLength()-oe)||1),a.distance=oe,T||(we=A.tangentAtT(ne)),we)Pe=we.pointOffset(W);else{var Re=A.pointAtT(ne),Le=W.difference(Re);Pe={x:Le.x,y:Le.y}}return a.offset=Pe,a.angle=u,a},_getLabelTransformationMatrix:function(e){var n,t=0,r={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},n=e.distance,t=e.angle||0}var a=n>0&&n<=1,u=0,c={x:0,y:0};if(e.offset){var v=e.offset;"number"==typeof v&&(u=v),v.x&&(c.x=v.x),v.y&&(c.y=v.y)}var we,y=0!==c.x||0!==c.y||0===u,T=r.keepGradient,A=r.ensureLegibility,_=this.path,W={segmentSubdivisions:this.getConnectionSubdivisions()},ne=a?n*this.getConnectionLength():n,oe=_.tangentAtLength(ne,W),Pe=t;if(oe){if(y)(we=oe.start).offset(c);else{var Re=oe.clone();Re.rotate(oe.start,-90),Re.setLength(u),we=Re.end}T&&(Pe=oe.angle()+t,A&&(Pe=Ln((Pe+90)%180-90)))}else we=_.start,y&&we.offset(c);return Fe.createSVGMatrix().translate(we.x,we.y).rotate(Pe)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new me(n.e,n.f)},getVertexIndex:function(e,n){for(var r=this.model.vertices(),a=this.getClosestPointLength(new me(e,n)),u=0,c=r.length;u<c&&!(a<this.getClosestPointLength(r[u]));u++);return u},notifyPointerdown(e,n,t){hn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){hn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),hn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){hn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){hn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){hn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}r&&Et(r,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){hn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){hn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){hn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){hn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,r){hn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){var a=Fe(e.target).findParentByClass("link-tool",this.el);if(a){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,r)}this.notifyPointerdown(e,t,r),this.paper.delegateDragEvents(this,e.data)}else hn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var r=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var a=parseInt(e.currentTarget.getAttribute("label-idx"),10),u=this._getLabelPositionAngle(a),c=this._getLabelPositionArgs(a),v=this._getDefaultLabelPositionArgs(),y=this._mergeLabelPositionArgs(c,v);this.eventData(e,{action:"label-move",labelIdx:a,positionAngle:u,positionArgs:y,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var a=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:a})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var a=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(a)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var a=e.target.getAttribute("end"),u=this.startArrowheadMove(a,{ignoreBackwardsCompatibility:!0});this.eventData(e,u)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var r=this.eventData(e),a={position:this.getLabelPosition(n,t,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete a.position.offset,this.model.label(r.labelIdx,a)},dragVertex:function(e,n,t){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var r=this.eventData(e);this.model.translate(n-r.dx,t-r.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var r=this.eventData(e),a=this.paper;a.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,n,t),a.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,r=e.initialEnd,a=this.model.prop(t);if(a&&!Po.endsEqual(r,a)){var c=this.paper;r.id&&this.notify("link:disconnect",n,c.findViewByModel(r.id),e.initialMagnet,t),a.id&&this.notify("link:connect",n,c.findViewByModel(a.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:r}=this,{snapLinks:a,connectionStrategy:u}=r.options,c=this.eventData(e);var v=a.radius||50,y=r.findViewsInArea({x:n-v,y:t-v,width:2*v,height:2*v}),T=c.closestView||null,A=c.closestMagnet||null,_=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var W=Number.MAX_VALUE,ne=new me(n,t);y.forEach(function(U){const o=[];"false"!==U.el.getAttribute("magnet")&&o.push({bbox:U.model.getBBox(),magnet:U.el}),U.$("[magnet]").toArray().forEach(s=>{o.push({bbox:U.getNodeBBox(s),magnet:s})}),o.forEach(s=>{const{magnet:d,bbox:m}=s,I=m.center().squaredDistance(ne);I<W&&(A===d||r.options.validateConnection.apply(r,c.validateConnectionArgs(U,U.el===d?null:d)))&&(W=I,c.closestView=U,c.closestMagnet=d)})},this);var oe,we=null,Pe=c.closestView,Re=c.closestMagnet;Re&&(we=c.magnetProxy=Pe.findProxyNode(Re,"highlighter"));var Le=c.arrowhead,L=A!==Re;if(T&&L&&T.unhighlight(_,{connecting:!0,snapping:!0}),Pe){const{prevEnd:U,prevX:o,prevY:s}=c;if(c.prevX=n,c.prevY=t,!L&&("function"!=typeof u||o===n&&s===t)||(oe=Pe.getLinkEnd(Re,n,t,this.model,Le),!L&&Ve(U,oe)))return;c.prevEnd=oe,L&&Pe.highlight(we,{connecting:!0,snapping:!0})}else oe={x:n,y:t};this.model.set(Le,oe||{x:n,y:t},{ui:!0}),T&&this.notify("link:snap:disconnect",e,T,A,Le),Pe&&this.notify("link:snap:connect",e,Pe,Re,Le)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,r){const{paper:a,model:u}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=a.findView(e);if(c){const v=r.magnetUnderPointer=c.findMagnet(e),y=r.magnetProxy=c.findProxyNode(v,"highlighter");v&&this.paper.options.validateConnection.apply(a,r.validateConnectionArgs(c,v))?y&&c.highlight(y,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,u.set(r.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:r}=this,{viewUnderPointer:a,magnetUnderPointer:u,magnetProxy:c,arrowhead:v}=e;if(!u||!c||!a)return;a.unhighlight(c,{connecting:!0});const y=a.getLinkEnd(u,n,t,r,v);r.set(v,y,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,r=0,a=0;"source"===e?(r=2,t="target"):(a=2,t="source");var u=this.model.get(t);if(u.id){var c=n[r]=this.paper.findViewByModel(u.id),v=c.getMagnetFromLinkEnd(u);v===c.el&&(v=void 0),n[r+1]=v}return function y(T,A){return n[a]=T,n[a+1]=T.el===A?void 0:A,n}},_markAvailableMagnets:function(e){function n(_,W){var ne=_.paper;return ne.options.validateConnection.apply(ne,this.validateConnectionArgs(_,W))}var t=this.paper,r=t.model.getCells();e.marked={};for(var a=0,u=r.length;a<u;a++){var c=r[a].findView(t);if(c){var v=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&v.push(c.el);var y=v.filter(n.bind(e,c));if(y.length>0){for(var T=0,A=y.length;T<A;T++)c.highlight(y[T],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=y}}}},_unmarkAvailableMagnets:function(e){for(var t,r,n=Object.keys(e.marked),a=0,u=n.length;a<u;a++){r=e.marked[t=n[a]];var c=this.paper.findViewByModel(t);if(c){for(var v=0,y=r.length;v<y;v++)c.unhighlight(r[v],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:ir(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){hn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Wt});Object.defineProperty(ks.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new at(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new at(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(ks.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new at(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new at(this.targetAnchor):e.getNodeBBox(t||e.el)}});const ni={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Za=ya.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Or(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:"+(e+1));let a=-1/0;for(let u in t)u=+u,u<e&&u>a&&(a=u);return n.insertBefore(r,a!==-1/0?t[a].nextSibling:n.firstChild),r},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),Sc=ko.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:r}=t;let a;try{const u=Fe(n);if(a=u.convertToPathData().trim(),"PATH"===u.tagName()&&r){const c=a.search(/.M/i)+1;c>0&&(a=a.substr(0,c))}}catch(u){const c=e.getNodeBoundingRect(n);a=Fe.rectToPath(Et({},t,c.toJSON()))}return a},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:r}=this,{padding:a,layer:u}=r;let c=e.getNodeMatrix(n);if(a){!u&&n===e.el&&t.remove();let v=e.getNodeBoundingRect(n);const y=v.x+v.width/2,T=v.y+v.height/2;v=Fe.transformRect(v,c);const A=Math.max(v.width,1),_=Math.max(v.height,1),W=(A+a)/A,ne=(_+a)/_,oe=Fe.createSVGMatrix({a:W,b:0,c:0,d:ne,e:y-W*y,f:T-ne*T});c=c.multiply(oe)}t.attr({d:this.getPathData(e,n),transform:Fe.matrixToTransformString(c)})},highlight(e,n){const{vel:t,options:r}=this;t.attr(r.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),il=20,Tc=ko.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:il,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:a}=this,u=n.tagName();if(!Fe.isSVGGraphicsElement(n)||a.includes(u))return n.remove(),!1;if(r.includes(u)){const c=e.vel.findOne(`#${n.id}`);if(c){const{node:v}=c;let y=e.getNodeBoundingRect(v);e.model.isElement()&&(y=Fe.transformRect(y,e.getNodeMatrix(v)));const T=Fe("rect",y.toJSON()),{x:A,y:_}=y.center(),{angle:W,cx:ne=A,cy:oe=_}=c.rotate();W&&T.rotate(W,ne,oe),n.parent().append(T)}return n.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===n.attr("fill")||n.removeAttr(c)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(r=>{n.removeAttr(r)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:r}=this,{deep:a}=t,u=n.tagName();let c;if("G"===u){if(!a)return null;c=n.clone(),function fd(e,n){const t=e.children();for(;t.length>0;){const r=t.shift();n(r)&&t.push(...r.children())}}(c,v=>this.transformMaskChild(e,v))}else{if(r.includes(u))return null;c=n.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:r,options:a}=this,{padding:u,attrs:c}=a,v="stroke-width"in c?c["stroke-width"]:1,y="none"!==n.attr("fill");let T=parseFloat(n.attr("stroke-width"));isNaN(T)&&(T=1);const A=T+2*u,_=A+2*v;let W=this.getMaskShape(e,n);if(!W){const ne=e.getNodeBoundingRect(n.node);ne.inflate(ne.width?0:.5,ne.height?0:.5),W=Fe("rect",ne.toJSON())}return W.attr(c),Fe("mask",{id:this.getMaskId()}).append([W.clone().attr({fill:y?t:"none",stroke:t,"stroke-width":_}),W.clone().attr({fill:y?r:"none",stroke:r,"stroke-width":A})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:r}=this,{padding:a,attrs:u,maskClip:c=il,layer:v}=t,y="stroke"in u?u.stroke:"#000000";!v&&n===e.el&&r.remove();const T=e.getNodeBoundingRect(n).inflate(a+c),A=this.getMask(e,Fe(n));this.addMask(e.paper,A),r.attr(T.toJSON()),r.attr({transform:Fe.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${A.id})`,fill:y})},unhighlight(e){this.removeMask(e.paper)}}),qa=ko.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Or("highlight-opacity"),highlight:function(e,n){Fe(n).addClass(this.opacityClassName)},unhighlight:function(e,n){Fe(n).removeClass(this.opacityClassName)}}),es=Or("highlighted"),dd=ko.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:es},highlight:function(e,n){Fe(n).addClass(this.options.className)},unhighlight:function(e,n){Fe(n).removeClass(this.options.className)}},{className:es});function Ec(e,n,t,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function Pc(e,n,t,r){return e.getPointAtLength("length"in r?r.length:20)}function ea(e){return function(n,t,r,a){if(r instanceof Element){var c,u=this.paper.findView(r);if(u)if(u.isNodeConnection(r)){var v="fixedAt"in a?a.fixedAt:"50%";c=hu(u,v)}else c=u.getNodeBBox(r).center();else c=new me;return e.call(this,n,t,c,a)}return e.apply(this,arguments)}}function hu(e,n){var t=parseFloat(n);return kn(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const pu=ea(function du(e,n,t,r){var a=1e6,u=e.getConnection(),c=e.getConnectionSubdivisions(),v=new vt(t.clone().offset(0,a),t.clone().offset(0,-a)),y=new vt(t.clone().offset(a,0),t.clone().offset(-a,0)),T=v.intersect(u,{segmentSubdivisions:c}),A=y.intersect(u,{segmentSubdivisions:c}),_=[];return T&&Array.prototype.push.apply(_,T),A&&Array.prototype.push.apply(_,A),_.length>0?t.chooseClosest(_):"fallbackAt"in r?hu(e,r.fallbackAt):Ac(e,n,t,r)}),Ac=ea(function Ic(e,n,t,r){return e.getClosestPoint(t)||new me});function Os(e,n,t){if(St(t)){const{x:a,y:u}=t;if(isFinite(u)){const c=new vt(n,e),{start:v,end:y}=c.parallel(u);n=v,e=y}t=a}if(!isFinite(t))return e;var r=e.distance(n);return 0===t&&r>0?e:e.move(n,-Math.min(t,r-1))}function ts(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function kc(e,n,t,r){var a=n.getNodeBBox(t);r.stroke&&a.inflate(ts(t)/2);var u=e.intersect(a);return Os(u?e.start.chooseClosest(u):e.end,e.start,r.offset)}var gu="segmentSubdivisons",vu="shapeBBox";const Lc=function ol(e,n,t,r){let{offset:a,alignOffset:u,align:c}=r;return c&&function Mc(e,n,t=0){let r,a,u,c;const{start:v,end:y}=e;switch(n){case"left":r="x",a=y,u=v,c=-1;break;case"right":r="x",a=v,u=y,c=1;break;case"top":r="y",a=y,u=v,c=-1;break;case"bottom":r="y",a=v,u=y,c=1;break;default:return}v[r]<y[r]?a[r]=u[r]:u[r]=a[r],isFinite(t)&&(a[r]+=c*t,u[r]+=c*t)}(e,c,u),Os(e.end,e.start,a)},pd=kc,gd=function Oc(e,n,t,r){var a=n.model.angle();if(0===a)return kc(e,n,t,r);var u=n.getNodeUnrotatedBBox(t);r.stroke&&u.inflate(ts(t)/2);var c=u.center(),v=e.clone().rotate(c,a),y=v.setLength(1e6).intersect(u);return Os(y?v.start.chooseClosest(y).rotate(c,-a):e.end,e.start,r.offset)},Lo=function hd(e,n,t,r){var a,u,c=r.selector,v=e.end;if(a="string"==typeof c?n.findBySelector(c)[0]:Array.isArray(c)?zn(t,c):function Oo(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!Fe.isSVGGraphicsElement(a)){if(a===t||!Fe.isSVGGraphicsElement(t))return v;a=t}var Le,y=n.getNodeShape(a),T=n.getNodeMatrix(a),A=n.getRootTranslateMatrix(),_=n.getRootRotateMatrix(),W=A.multiply(_).multiply(T),ne=W.inverse(),oe=Fe.transformLine(e,ne),we=oe.start.clone(),Pe=n.getNodeData(a);if(!1===r.insideout&&(Pe[vu]||(Pe[vu]=y.bbox()),Pe[vu].containsPoint(we)))return v;if(y instanceof Tt){var L=r.precision||2;Pe[gu]||(Pe[gu]=y.getSegmentSubdivisions({precision:L})),Le={precision:L,segmentSubdivisions:Pe[gu]}}!0===r.extrapolate&&oe.setLength(1e6),(u=oe.intersect(y,Le))?Fe.isArray(u)&&(u=we.chooseClosest(u)):!0===r.sticky&&(u=y instanceof at?y.pointNearestToPoint(we):y instanceof Xn?y.intersectionWithLineFromCenterToPoint(we):y.closestPoint(we,Le));var U=u?Fe.transformPoint(u,W):v,o=r.offset||0;return r.stroke&&(o+=ts(a)/2),Os(U,e.start,o)};function zi(e){return function(n,t,r,a){var u=!!a.rotate,c=u?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),v=c[e](),y=a.dx;if(y){var T=kn(y);y=parseFloat(y),isFinite(y)&&(T&&(y/=100,y*=c.width),v.x+=y)}var A=a.dy;if(A){var _=kn(A);A=parseFloat(A),isFinite(A)&&(_&&(A/=100,A*=c.height),v.y+=A)}return u?v.rotate(n.model.getBBox().center(),-n.model.angle()):v}}const ns=zi("center"),Bt=zi("topMiddle"),yu=zi("bottomMiddle"),ul=zi("leftMiddle"),_a=zi("rightMiddle"),vd=zi("origin"),ll=zi("topRight"),Nc=zi("bottomLeft"),Fr=zi("corner"),md=ea(function al(e,n,t,r){var a=e.model.angle(),u=e.getNodeBBox(n),c=u.center(),v=u.origin(),y=u.corner(),T=r.padding;if(isFinite(T)||(T=0),v.y+T<=t.y&&t.y<=y.y-T){var A=t.y-c.y;c.x+=0===a||180===a?0:1*A/Math.tan(Nn(a)),c.y+=A}else if(v.x+T<=t.x&&t.x<=y.x-T){var _=t.x-c.x;c.y+=90===a||270===a?0:_*Math.tan(Nn(a)),c.x+=_}return c}),yd=ea(function sl(e,n,t,r){var u,c,v,a=!!r.rotate;a?(u=e.getNodeUnrotatedBBox(n),v=e.model.getBBox().center(),c=e.model.angle()):u=e.getNodeBBox(n);var A,y=r.padding;switch(isFinite(y)&&u.inflate(y),a&&t.rotate(v,c),u.sideNearestToPoint(t)){case"left":A=u.leftMiddle();break;case"right":A=u.rightMiddle();break;case"top":A=u.topMiddle();break;case"bottom":A=u.bottomMiddle()}return a?A.rotate(v,-c):A}),Rc=function mu(e,n,t,r,a){return e.model.getPointFromConnectedLink(this.model,a).offset(r.dx,r.dy)},rs={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},xu=9007199254740991,fl=hn.Highlighting,co={[fl.DEFAULT]:{name:"stroke",options:{padding:3}},[fl.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[fl.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Gr=[{name:ni.BACK},{name:ni.CELLS},{name:ni.LABELS},{name:ni.FRONT},{name:ni.TOOLS}],dl=ya.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Ts,linkView:ks,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:co,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Po,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,r,a,u){return("target"===a?t:e)instanceof Ts},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:rs.EXACT,frozen:!1,onViewUpdate:function(e,n,t,r,a){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||a.requestConnectedLinksUpdate(e,t,r)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:O,anchorNamespace:z,linkAnchorNamespace:k,connectionPointNamespace:j},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&Ee(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new Ao;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=cn(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var r=t.position;this.isAsync()||!gn(r)?this.renderView(e,t):(t.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,t),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===rs.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(n)&&!t.hasActiveBatch(r)&&this.updateViews(e)}var a=this.SORT_DELAYING_BATCHES;a.includes(n)&&!t.hasActiveBatch(a)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:r,defaultAnchor:a,defaultLinkAnchor:u,origin:c,highlighting:v,cellViewNamespace:y,interactive:T}=e;!y&&"undefined"!=typeof joint&&Ee(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),et(n)||(e.defaultConnector=xe(n)),et(t)||(e.defaultRouter=xe(t)),et(r)||(e.defaultConnectionPoint=xe(r)),et(a)||(e.defaultAnchor=xe(a)),et(u)||(e.defaultLinkAnchor=xe(u)),St(T)&&(e.interactive=Et({},T)),St(v)&&(e.highlighting=Fa({},v,co)),e.origin=Et({},c)},children:function(){var e=Fe.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Or("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Or("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Or("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:r,layers:a,background:u,grid:c}=e;return this.svg=t,this.defs=r,this.layers=a,this.$background=cn(u),this.$grid=cn(c),this.renderLayers(),Fe.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Gr){this.removeLayers(),e.forEach(({name:a})=>{const c=new Za({name:a});this.layers.appendChild(c.el),this._layers[a]=c});const n=this.getLayerView(ni.CELLS),t=this.getLayerView(ni.TOOLS),r=this.getLayerView(ni.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(Or("viewport")),r.vel.addClass(Or("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),Fe.createSVGMatrix(e)}e=Fe.createSVGMatrix(e);var r=Fe.matrixToTransformString(e);return n.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return Fe.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof hn)for(var r=e.model,a=this.model.getConnectedLinks(r),u=0,c=a.length;u<c;u++){var v=a[u],y=this.findViewByModel(v);if(y){var T=["UPDATE"];v.getTargetCell()===r&&T.push("TARGET"),v.getSourceCell()===r&&T.push("SOURCE");var A=Math.max(n+1,y.UPDATE_PRIORITY);this.scheduleViewUpdate(y,y.getFlag(T),A,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof hn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var r=0,a=this.findViewByModel(t.getSourceCell());a&&!this.isViewMounted(a)&&(r=this.dumpView(a),e.updateEndMagnet("source"));var u=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(u=this.dumpView(c),e.updateEndMagnet("target")),0===r&&0===u)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,r){r||(r={}),this.scheduleViewUpdate(e,n,t,r);var a=this.isAsync();if(!(this.isFrozen()||a&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var u=this.updateViews(r);a&&this.notifyAfterRender(u,r)}},scheduleViewUpdate:function(e,n,t,r){const{_updates:a,options:u}=this,{FLAG_REMOVE:c,FLAG_INSERT:v,UPDATE_PRIORITY:y,cid:T}=e;let A=a.priorities[t];if(A||(A=a.priorities[t]={}),t>y)for(let ne=t-1;ne>=y;ne--){const oe=a.priorities[ne];!oe||!(T in oe)||(A[T]|=oe[T],delete oe[T])}let _=A[T]||0;if((_&n)===n)return;_||a.count++,n&c&&_&v?A[T]^=v:n&v&&_&c&&(A[T]^=c),A[T]|=n;const W=u.onViewUpdate;"function"==typeof W&&W.call(this,e,n,t,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],a=this.registerMountedView(e)|r[t];return delete r[t],a},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:a,model:u}=e;if(e instanceof hn){if(n&r)return this.removeView(u),0;n&a&&(this.insertView(e),n^=a)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var r=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],r},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var r=t.unmounted[n]||0;return delete t.unmounted[n],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=Nr({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,r=0,a=xu;do{r++,n=this.updateViewsBatch(e),t+=n.updated,a=Math.min(n.priority,a)}while(!n.empty);const u={updated:t,batches:r,priority:a};return this.notifyAfterRender(u,e),u},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let r in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:xu});var t=this._updates,r=t.id;if(r){ca(r),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var a=this.updateViewsBatch(e),u=Nr({},e,{mountBatchSize:1e3-a.mounted,unmountBatchSize:1e3-a.unmounted}),c=this.checkViewport(u),v=c.unmounted,y=c.mounted,T=n.processed,A=t.count;a.updated>0&&(a.processed=T+=a.updated+a.unmounted,n.priority=Math.min(a.priority,n.priority),a.empty&&0===y?(a.unmounted+=v,a.mounted+=y,a.priority=n.priority,this.notifyAfterRender(a,e),n.processed=0,n.priority=xu,t.count=0):n.processed=T);var _=e.progress;if(A&&"function"==typeof _&&_.call(this,a.empty,T,A,a,this),t.id!==r)return}t.id=$o(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,r=0,a=0,u=0,c=0,v=xu,y=!0,T=this.options,A=t.priorities,_="viewport"in e?e.viewport:T.viewport;"function"!=typeof _&&(_=null);var W=T.onViewPostponed;"function"!=typeof W&&(W=null);var ne=Object.keys(A);e:for(var oe=0,we=ne.length;oe<we;oe++){var Pe=+ne[oe],Re=A[Pe];for(var Le in Re){if(r>=n){y=!1;break e}var L=Qo[Le];if(L){var U=Re[Le];if(0==(U&L.FLAG_REMOVE)){var o=Le in t.unmounted;if(L.DETACHABLE&&_&&!_.call(this,L,!o,this)){o||(this.registerUnmountedView(L),L.unmount()),t.unmounted[Le]|=U,delete Re[Le],u++;continue}o&&(U|=L.FLAG_INSERT,c++),U|=this.registerMountedView(L)}var s=this.updateView(L,U,e);s>0&&(Re[Le]=s,!W||!W.call(this,L,s,this)||Re[Le])?(a++,y=!1):(v>Pe&&(v=Pe),r++,delete Re[Le])}else delete Re[Le]}}return{priority:v,updated:r,postponed:a,unmounted:u,mounted:c,empty:y}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,r=new Array(t);for(var a=0;a<t;a++)r[a]=Qo[n[a]];return r},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,r=new Array(t);for(var a=0;a<t;a++)r[a]=Qo[n[a]];return r},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var a=this._updates,u=a.unmountedCids,c=a.unmounted,v=0,y=(Math.min(u.length,"mountBatchSize"in n?n.mountBatchSize:1/0));v<y;v++){var T=u[v];if(T in c){var A=Qo[T];if(A){if(A.DETACHABLE&&e&&!e.call(this,A,!1,this)){u.push(T);continue}t++;var _=this.registerMountedView(A);_&&this.scheduleViewUpdate(A,_,A.UPDATE_PRIORITY,{mounting:!0})}}}return u.splice(0,v),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var a=this._updates,u=a.mountedCids,c=a.mounted,v=0,y=(Math.min(u.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));v<y;v++){var T=u[v];if(T in c){var A=Qo[T];if(A){if(!A.DETACHABLE||e.call(this,A,!0,this)){u.push(T);continue}t++,this.registerUnmountedView(A)&&A.unmount()}}}return u.splice(0,v),t},checkViewport:function(e){var n=Nr({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,r=this.checkMountedViews(t,n);return r>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:r}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,r=this.options.frozen,a=n.freezeKey;if(t&&t!==a){if(r&&a)return;n.freezeKey=t,n.keyFrozen=r}this.options.frozen=!0;var u=n.id;n.id=null,this.isAsync()&&u&&ca(u)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,r=n.freezeKey;t&&r&&t!==r||(n.freezeKey=null,(!t||t!==r||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===rs.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return gn(n)||(n=this.el.clientWidth),gn(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:r,height:a}=t;let u=void 0===e?r:e,c=void 0===n?a:n;if(r===u&&a===c)return;t.width=u,t.height=c,this._setDimensions();const v=this.getComputedSize();this.trigger("resize",v.width,v.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;gn(n)&&(n=Math.round(n)),gn(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,r){r=ft(e)?e:Et({gridWidth:e,gridHeight:n,padding:t},r);const{x:a,y:u,width:c,height:v}=this.getFitToContentArea(r),{sx:y,sy:T}=this.scale();return this.setOrigin(-a*y,-u*T),this.setDimensions(c*y,v*T),new at(a,u,c,v)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,r=Xo(e.padding||0),a=Math.max(e.minWidth||0,n),u=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,v=e.maxHeight||Number.MAX_VALUE,y=e.allowNewOrigin,T="contentArea"in e?new at(e.contentArea):this.getContentArea(e),{sx:A,sy:_}=this.scale();T.x*=A,T.y*=_,T.width*=A,T.height*=_;let W=Math.ceil((T.width+T.x)/n),ne=Math.ceil((T.height+T.y)/t);e.allowNegativeBottomRight||(W=Math.max(W,1),ne=Math.max(ne,1)),W*=n,ne*=t;let oe=0;("negative"===y&&T.x<0||"positive"===y&&T.x>=0||"any"===y)&&(oe=Math.ceil(-T.x/n)*n,oe+=r.left,W+=oe);let we=0;return("negative"===y&&T.y<0||"positive"===y&&T.y>=0||"any"===y)&&(we=Math.ceil(-T.y/t)*t,we+=r.top,ne+=we),W+=r.right,ne+=r.bottom,W=Math.max(W,a),ne=Math.max(ne,u),W=Math.min(W,c),ne=Math.min(ne,v),new at(-oe/A,-we/_,W/A,ne/_)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var r=e.contentArea;n=this.localToPaperRect(r),t=new me(r)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){Nr(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var T,a=Xo(e.padding),u=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,v=e.minScaleY||e.minScale,y=e.maxScaleY||e.maxScale;if(e.fittingBBox)T=e.fittingBBox;else{var A=this.translate(),_=this.getComputedSize();T={x:A.tx,y:A.ty,width:_.width,height:_.height}}T=new at(T).moveAndExpand({x:a.left,y:a.top,width:-a.left-a.right,height:-a.top-a.bottom});var W=this.scale(),ne=T.width/n.width*W.sx,oe=T.height/n.height*W.sy;if(e.preserveAspectRatio&&(ne=oe=Math.min(ne,oe)),e.scaleGrid){var we=e.scaleGrid;ne=we*Math.floor(ne/we),oe=we*Math.floor(oe/we)}ne=Math.min(c,Math.max(u,ne)),oe=Math.min(y,Math.max(v,oe));var Pe=this.options.origin,Re=T.x-t.x*ne-Pe.x,Le=T.y-t.y*oe-Pe.y;this.scale(ne,oe),this.translate(Re,Le)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new at:Fe(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=et(n)?n.apply(this,e):!0===n?this.getArea():n?new at(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,r,a=n.cellViewNamespace,u=e.get("type")+"View",c=zn(a,u,".");return e.isLink()?(t=n.linkView,r=ks):(t=n.elementView,r=Ts),new(t.prototype instanceof rn.View?c||t:t.call(this,e)||c||r)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?ni.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:r}=this,a=t[n];if(a){var{cid:u}=a;const{mounted:c,unmounted:v}=r;a.remove(),delete t[n],delete c[u],delete v[u]}return a},renderView:function(e,n){const{id:t}=e,r=this._views;let a,u,c=!0;return t in r&&(a=r[t],a.model===e?(u=a.FLAG_INSERT,c=!1):this.removeView(e)),c&&(a=r[t]=this.createViewForModel(e),a.paper=this,u=this.registerUnmountedView(a)|a.getFlag(ze(a,"initFlag"))),this.requestViewUpdate(a,u,a.UPDATE_PRIORITY,n),a},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,r=e.length;t<r;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){hi(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=cn(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=cn(e),r=t.map(function(){var u=this.parentNode,c=u.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(u===this)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(this,c),u.removeChild(c)}});Array.prototype.sort.call(t,n).each(function(a){r[a].call(this)})}(e,function(t,r){var a=n.get(t.getAttribute("model-id")),u=n.get(r.getAttribute("model-id")),c=a.attributes.z||0,v=u.attributes.z||0;return c===v?0:c<v?-1:1})},insertView:function(e){const n=this.getLayerView(ni.CELLS),{el:t,model:r}=e;this.options.sorting===rs.APPROX?n.insertSortedNode(t,r.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,r){if(void 0===e)return Fe.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,r=0);var a=this.translate();(t||r||a.tx||a.ty)&&this.translate(a.tx-t*(e-1),a.ty-r*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var v=this.matrix();return v.a=e,v.d=n,this.matrix(v),this.trigger("scale",e,n,t,r),this},rotate:function(e,n,t){if(void 0===e)return Fe.matrixToRotate(this.matrix());if(void 0===n){var r=this.cells.getBBox();n=r.width/2,t=r.height/2}var a=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(a),this},translate:function(e,n){if(void 0===e)return Fe.matrixToTranslate(this.matrix());const{options:t}=this,{origin:r,drawGrid:a}=t;e||(e=0),n||(n=0);const u=this.matrix();if(u.e===e&&u.f===n)return this;u.e=e,u.f=n,this.matrix(u);const{tx:c,ty:v}=this.translate();return r.x=c,r.y=v,this.trigger("translate",c,v),a&&this.drawGrid(),this},findView:function(e){var n=xn(e)?this.cells.querySelector(e):e instanceof cn?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=xn(e)||gn(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new me(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=Nr(n||{},{strict:!1}),e=new at(e);var t=this.model.getElements().map(this.findViewByModel,this),r=n.strict?"containsRect":"intersect";return t.filter(function(a){return a&&e[r](a.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new me(e,n);return Fe.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,r){var a=new at(e,n,t,r);return Fe.transformRect(a,this.matrix())},paperToLocalPoint:function(e,n){var t=new me(e,n);return Fe.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,r){var a=new at(e,n,t,r);return Fe.transformRect(a,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new me(e,n);return Fe.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,r){var a=new at(e,n,t,r);return Fe.transformRect(a,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new me(e,n);return Fe.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,r){var a=new at(e,n,t,r);return Fe.transformRect(a,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,r){return this.localToPaperRect(e,n,t,r).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var r=new me(e,n).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,n,t,r){var a=this.pageOffset(),u=new at(e,n,t,r);return u.x-=a.x,u.y-=a.y,this.paperToLocalRect(u)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new me(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof ks))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,r=this.model,a=r.constructor.validations;return!(!t.multiLinks&&!a.multiLinks.call(this,r,n)||!t.linkPinning&&!a.linkPinning.call(this,r,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return et(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:r,highlighterNamespace:a}=this.options;if(void 0===n){if(!r||t&&(n=r[t],!1===n))return!1;n||(n=r.default)}if(!n)return!1;xn(n)&&(n={name:n});const u=n.name,c=a[u];if(!c)throw new Error('Unknown highlighter ("'+u+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+u+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+u+'") is missing required unhighlight() method');return{highlighter:c,options:n.options||{},name:u}},onCellHighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:a,options:u}=r;a.highlight(e,n,u)},onCellUnhighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:a,options:u}=r;a.unhighlight(e,n,u)},pointerdblclick:function(e){e.preventDefault(),e=Un(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=Un(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=Un(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=Un(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=Un(e);var r=this.snapToGrid(e.clientX,e.clientY),a=n.sourceView;a?a.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=Un(e),t=this.snapToGrid(n.clientX,n.clientY),r=this.eventData(e).sourceView;r?r.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(cn.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=Un(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Un(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Un(e);const{target:n,relatedTarget:t,currentTarget:r}=e,a=this.findView(n);if(this.guard(e,a))return;const u=this.findView(t);a&&(u===a||(a.mouseenter(e),this.el.contains(t)))||u||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Un(e);const{target:n,relatedTarget:t,currentTarget:r}=e,a=this.findView(n);if(this.guard(e,a))return;const u=this.findView(t);a&&(u===a||(a.mouseleave(e),this.el.contains(t)))||u||r===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=Un(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,r=this.snapToGrid(t.clientX,t.clientY),a=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,r.x,r.y,a):this.trigger("blank:mousewheel",e,r.x,r.y,a)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var r=this.findView(n);if(r){if(e=Un(e),this.guard(e,r))return;var a=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,t,a.x,a.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var a=this.findView(t);if(a){if(e=Un(e),this.guard(e,a))return;var u=this.snapToGrid(e.clientX,e.clientY);n.call(this,a,e,t,u.x,u.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,r,a,u){n.onmagnet(t,a,u)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,r,a,u){n.magnetpointerdblclick(t,r,a,u)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,r,a,u){n.magnetcontextmenu(t,r,a,u)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=Un(e),this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,r.x,r.y)}},getPointerArgs(e){const n=Un(e),{x:t,y:r}=this.snapToGrid(n.clientX,n.clientY);return[n,t,r]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof Jr||this.svg===e.target||this.el===e.target||cn.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Fe("svg",{width:"100%",height:"100%"},Fe("defs")),patterns:{},add:function(e,n){Fe(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(Fe("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(xn(e)&&Array.isArray(n[e]))return n[e].map(function(y){return Et({},y)});var t=e||{args:[{}]},r=Array.isArray(t),a=t.name;if(!r&&!a&&!t.markup&&(a="dot"),a&&Array.isArray(n[a])){var u=n[a].map(function(y){return Et({},y)}),c=Array.isArray(t.args)?t.args:[t.args||{}];Nr(c[0],Ue(e,"args"));for(var v=0;v<c.length;v++)u[v]&&Et(u[v],c[v]);return u}return r?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],r=this.matrix(),a=this._getGridRefs();this._gridSettings.forEach(function(c,v){var y="pattern_"+v,T=Lt(c,t[v],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});T.width=n*(r.a||1)*(T.scaleFactor||1),T.height=n*(r.d||1)*(T.scaleFactor||1),a.exist(y)||a.add(y,Fe("pattern",{id:y,patternUnits:"userSpaceOnUse"},Fe(T.markup)));var A=a.get(y);et(T.update)&&T.update(A.node.childNodes[0],T);var _=T.ox%T.width;_<0&&(_+=T.width);var W=T.oy%T.height;W<0&&(W+=T.height),A.attr({x:_,y:W,width:T.width,height:T.height})});var u=(new XMLSerializer).serializeToString(a.root.node);return u="url(data:image/svg+xml;base64,"+btoa(u)+")",this.$grid.css("backgroundImage",u),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",r=this.scale(),a=this.translate();ft(n)&&(n=a.tx+r.sx*(n.x||0)+"px "+(a.ty+r.sy*(n.y||0))+"px"),ft(t)&&(t=(t=new at(t).scale(r.sx,r.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,r=(n=n||{}).size,a=n.repeat||"no-repeat",u=n.opacity||1,c=Math.abs(n.quality)||1,v=this.constructor.backgroundPatterns[Nt(a)];if(et(v)){e.width*=c,e.height*=c;var y=v(e,n);if(!(y instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=y.toDataURL("image/png"),a="repeat",ft(r)?(r.width*=y.width/e.width,r.height*=y.height/e.height):void 0===r&&(n.size={width:y.width/c,height:y.height/c})}else t=e.src,void 0===r&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:u,backgroundRepeat:a,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=xe(e),ro(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,hi(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!ft(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+zr(JSON.stringify(e))),!this.isDefined(n)){var a=_i[t]&&_i[t](e.args||{});if(!a)throw new Error("Non-existing filter "+t);var u=Et({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});Fe(a,u).appendTo(this.defs)}return n},defineGradient:function(e){if(!ft(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:r,id:a=r+n.id+zr(JSON.stringify(e)),stops:u,attrs:c={}}=e;if(this.isDefined(a))return a;const v=_t(u).map(({offset:T,color:A,opacity:_})=>Fe("stop").attr({offset:T,"stop-color":A,"stop-opacity":Number.isFinite(_)?_:1})),y=Fe(r,c,v);return y.id=a,y.appendTo(t),a},definePattern:function(e){if(!ft(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+zr(JSON.stringify(e)),markup:a,attrs:u={}}=e;if(!a)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=Fe("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(u),"string"==typeof a)c.append(Fe(a));else{const{fragment:v}=di(a);c.append(v)}return c.appendTo(t),r},defineMarker:function(e){if(!ft(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+zr(JSON.stringify(e)),markup:a,attrs:u={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const v=Fe("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(v.id=r,v.attr(u),a)if("string"==typeof a)v.append(Fe(a));else{const{fragment:y}=di(a);v.append(y)}else{const{type:y="path"}=e,T=Fe(y,Ue(e,"type","id","markup","attrs","markerUnits"));v.append(T)}return v.appendTo(t),r}},{sorting:rs,Layers:ni,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=2*r;var a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.setTransform(-1,0,0,-1,n.width,n.height),a.drawImage(e,0,0,t,r),a.setTransform(-1,0,0,1,n.width,0),a.drawImage(e,0,0,t,r),a.setTransform(1,0,0,-1,0,n.height),a.drawImage(e,0,0,t,r),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=r;var a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.translate(2*t,0),a.scale(-1,1),a.drawImage(e,0,0,t,r),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=t,n.height=2*r;var a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.translate(0,2*r),a.scale(1,-1),a.drawImage(e,0,0,t,r),n},watermark:function(e,n){n=n||{};var t=e.width,r=e.height,a=document.createElement("canvas");a.width=3*t,a.height=3*r;for(var u=a.getContext("2d"),c=gn(n.watermarkAngle)?-n.watermarkAngle:-20,v=Nn(c),y=a.width/4,T=a.height/4,A=0;A<4;A++)for(var _=0;_<4;_++)(A+_)%2>0&&(u.setTransform(1,0,0,1,(2*A-1)*y,(2*_-1)*T),u.rotate(v),u.drawImage(e,-t/2,-r/2,t,r));return a}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){Fe(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;Fe(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,a=n.height,u=n.thickness;t=r-u>=0&&a-u>=0?["M",r,0,"H0 M0 0 V0",a].join(" "):"M 0 0 0 0",Fe(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,a=n.height,u=n.thickness;t=r-u>=0&&a-u>=0?["M",r,0,"H0 M0 0 V0",a].join(" "):"M 0 0 0 0",Fe(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,r=n.width,a=n.height,u=n.thickness;t=r-u>=0&&a-u>=0?["M",r,0,"H0 M0 0 V0",a].join(" "):"M 0 0 0 0",Fe(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class bd{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new Ao,this.paper=new dl({el:cn("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const u=16*(.6*Math.max(...t.split("\n").map(v=>v.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new Jf({id:n,size:{width:u,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:u,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new ma({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],r=[];return n.forEach(a=>{const u=`${a.name.replaceAll(" ","\n")}\n\n${Math.round(100*a.average_success)}% (${a.question_count} Total)`;t.push(this.makeElement(a.pk,u)),a.next_category_ids.forEach(c=>{r.push(this.makeLink(a.pk,c))})}),t.concat(r)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const r=Ss.layout(this.graph,{dagre:ra(),graphlib:Qi(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Ls=f(19329);function _d(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().reset()}),i.\u0275\u0275text(1," Back "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275property("disabled",!t.parentNode)}}function Cd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function Ns(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"h2",7),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let Dc=(()=>{class e{constructor(t,r,a){this.categoryService=t,this.router=r,this.injector=a,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new bd(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{t.push(r)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(r=>r.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ls.H),i.\u0275\u0275directiveInject(re.F0),i.\u0275\u0275directiveInject(i.Injector))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"disabled","click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,_d,2,3,"button",1),i.\u0275\u0275template(2,Cd,3,3,"ng-container",2),i.\u0275\u0275template(3,Ns,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"div",4,5)),2&t){const a=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!a),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",a),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===u.children.length)}},directives:[N.O5,Mt.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var hl=f(30567),Fc=f(78659),pi=f(27221),is=f(40520),Rs=f(22552);let Ds=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.get(r).pipe((0,pi.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.delete(r).pipe((0,pi.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const r=this.apiService.getURL("event");return this.http.post(r,t).pipe((0,pi.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const r=this.apiService.getURL("event",t.id);return this.http.put(r,t).pipe((0,pi.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,pi.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,pi.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,r){const a=this.apiService.getURL("event","import-event");return this.http.post(a,{event:t.id,course:r},{observe:"response"}).pipe((0,pi.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Rs.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var os=f(71105),Fs=f(27482);function pl(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.event.name)}}function Vc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const Vs=function(e,n,t){return["/course",e,"event",n,"problem",t]};function gl(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,Vs,r.courseId,r.eventId,t.question.id))}}const Bc=function(e,n){return["/course",e,"problem",n]};function Hc(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Bc,r.courseId,t.question.id))}}const bu=function(e){return["/problem",e,"edit"]};function jc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,bu,t.question.id))}}function fo(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,Vc,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,gl,3,5,"ng-container",10),i.\u0275\u0275template(15,Hc,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,jc,3,3,"ng-container",0),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",a.highlight(a.getStatus(t)))("value",a.getStatus(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,t.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",a.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",a.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",a.user.is_teacher)}}function Ca(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function wd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function zc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ca,2,0,"h2",13),i.\u0275\u0275template(2,wd,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",t)}}function Sd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,pl,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,fo,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,zc,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.uqjs.length)}}let Uc=(()=>{class e{constructor(t,r,a,u,c,v){this.authenticationService=t,this.router=r,this.route=a,this.uqjService=u,this.courseEventService=c,this.courseService=v,this.authenticationService.currentUser.subscribe(y=>this.user=y)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,hl.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(re.F0),i.\u0275\u0275directiveInject(re.gz),i.\u0275\u0275directiveInject(Fc.O),i.\u0275\u0275directiveInject(Ds),i.\u0275\u0275directiveInject(ge.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Sd,6,7,"ng-container",0),2&t&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[N.O5,N.sg,os.h,Fs.Gi,Mt.v0,re.yS],pipes:[N.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var wa=f(22307),Ui=f(95428),Gc=f(50284),ar=f(61895),sr=f(56249);const Td=["importDialog"];function Ed(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.getEventFilterOptions())}}function Pd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-island",8),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275elementStart(2,"div",9)(3,"figure",10),i.\u0275\u0275element(4,"tui-svg",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",12),i.\u0275\u0275text(6,"Add Event"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("hoverable",!0))}function Id(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",24)}function Wc(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",25)}function $c(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade Not Yet Available "),i.\u0275\u0275elementContainerEnd())}function Yc(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Ad=function(e,n){return["/course",e,"event",n]};function Md(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",26),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Ad,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"Open":"Complete"," ")}}function kd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",27),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const Xc=function(e,n){return["/course",e,"new-event",n]};function Od(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Xc,r.courseId,t.id))}}function Ld(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",13),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",12),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",14),i.\u0275\u0275template(6,Id,1,0,"tui-tag",15),i.\u0275\u0275template(7,Wc,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"p",17),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"p",18),i.\u0275\u0275template(16,$c,2,0,"ng-container",19),i.\u0275\u0275template(17,Yc,2,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",21),i.\u0275\u0275template(20,Md,3,5,"ng-container",19),i.\u0275\u0275template(21,kd,2,1,"ng-template",null,22,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,Od,2,4,"a",23),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(8),a=i.\u0275\u0275reference(18),u=i.\u0275\u0275reference(22),c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(11,11,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(14,14,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open&&t.is_exam)("ngIfElse",a),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Nd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",33)(1,"p",13),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",12),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",34),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(t).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(u,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name)}}const Rd=function(e){return["/course",e,"new-event"]};function Dd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",30)(2,"a",31),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",10),i.\u0275\u0275element(4,"tui-svg",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",12),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,Nd,7,2,"tui-island",32),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,Rd,t.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",t.courseEvents)}}function Fd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,Dd,8,5,"ng-container",4),i.\u0275\u0275elementStart(1,"button",29),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",t.courseEvents)}}var pr=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(pr||(pr={})),pr))();let Vd=(()=>{class e{constructor(t,r,a,u){this.authenticationService=t,this.courseEventService=r,this.dialogService=a,this.notificationsService=u,this.filter=pr.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(pr)}getEvents(){switch(this.filter){case pr.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case pr.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case pr.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,r){this.courseEventService.importCourseEvent(t,r).subscribe(a=>{201===a.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(Ds),i.\u0275\u0275directiveInject(wa.RO),i.\u0275\u0275directiveInject(jt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Td,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(r.importDialog=a.first)}},inputs:{events:"events",course:"course"},decls:8,vars:3,consts:[["tuiTextfieldSize","s",3,"ngModel","ngModelChange"],["tuiTextfield","","placeholder","Choose your hero"],[3,"items",4,"tuiDataList"],[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],[3,"items"],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","m","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","m","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-select",0),i.\u0275\u0275listener("ngModelChange",function(u){return r.filter=u}),i.\u0275\u0275element(1,"input",1),i.\u0275\u0275template(2,Ed,1,1,"tui-data-list-wrapper",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,Pd,7,1,"ng-container",4),i.\u0275\u0275template(5,Ld,24,17,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Fd,3,1,"ng-template",null,6,i.\u0275\u0275templateRefExtractor)),2&t&&(i.\u0275\u0275property("ngModel",r.filter),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.getEvents()))},directives:[Ui.uJ,Ui.OI,ve.sz,ee.NgControlStatus,ee.NgModel,ar.MB,sr.gX,Gc.eC,N.O5,os.h,bt.P,N.sg,Fs.Gi,Mt.v0,re.yS],pipes:[N.uU,N.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})(),Kc=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}useTokens(t,r){const a=new is.WM({"Content-Type":"application/json"}),u=this.apiService.getURL("token-use","use",r);return this.http.post(u,t,{headers:a}).pipe((0,pi.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Rs.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var vl=f(21922);function Qc(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Bd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",17)}function Hd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",18)}function jd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Bd,1,0,"tui-tag",15),i.\u0275\u0275template(2,Hd,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",t)}}function zd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}const ml=function(){return{standalone:!0}};function Ud(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,jd,4,2,"ng-container",11),i.\u0275\u0275template(5,zd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(a){return i.\u0275\u0275restoreView(t).$implicit.num_used=a}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",i.\u0275\u0275pureFunction0(10,ml))}}let Gd=(()=>{class e{constructor(t,r,a,u){this.tokenUseService=t,this.route=r,this.authenticationService=a,this.notificationsService=u,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(a=>r[a.option.id]=a.num_used),this.tokenUseService.useTokens(r,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Kc),i.\u0275\u0275directiveInject(re.gz),i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(jt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,Qc,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"form",3)(7,"div",4),i.\u0275\u0275template(8,Ud,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6)(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[N.O5,qt.Ls,ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.NgForm,N.sg,os.h,Fs.Gi,vl.EA,vl.aQ,ee.NgControlStatus,ee.NgModel,Mt.v0],pipes:[N.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var Jc=f(76508),Gi=f(78697);function Wd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index,a=i.\u0275\u0275reference(4),u=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("margin-top",r+"rem")("order",r%2*-r),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",a.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(u.getGetOrdinal(t.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function $d(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function Yd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function Xd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function Kd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(t.rank)," ")}}function Qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21)(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function Jd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function Zd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,Kd,2,1,"td",20),i.\u0275\u0275template(2,Qd,4,4,"td",20),i.\u0275\u0275template(3,Jd,2,1,"td",20),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275template(2,Wd,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),i.\u0275\u0275template(7,$d,2,0,"th",7),i.\u0275\u0275template(8,Yd,2,0,"th",7),i.\u0275\u0275template(9,Xd,2,0,"th",7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,Zd,4,3,"tr",9),i.\u0275\u0275elementEnd()()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",t.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}let eh=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(t,r)=>t.rank>r,this.filterInTopX=(t,r)=>t.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(t){return t.sort((a,u)=>u.token-a.token).map((a,u)=>({rank:u+1,name:a.name,token:a.token}))}getGetOrdinal(t){const r=["th","st","nd","rd"],a=t%100;return t+(r[(a-20)%10]||r[a]||r[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,qd,13,15,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[N.O5,N.sg,os.h,Jc.JP,Gi.c4,Gi.Nx,Gi.EE,Gi.DZ,Gi.Ws,Gi.jY,Gi.LU,Gi.fu,Gi.Bl,Gi.Kt],pipes:[De.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();var _u=f(56197);function th(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function nh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",20)}function rh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function ih(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Zc=function(e,n){return["/course",e,"event",n]};function yl(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Zc,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function qc(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const ef=function(e,n){return["/course",e,"new-event",n]};function oh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,ef,r.course.id,t.id))}}function ah(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,th,1,0,"tui-tag",11),i.\u0275\u0275template(14,nh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275template(17,rh,2,0,"ng-container",14),i.\u0275\u0275template(18,ih,2,4,"ng-template",null,15,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",16),i.\u0275\u0275template(21,yl,3,5,"ng-container",14),i.\u0275\u0275template(22,qc,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(24,oh,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),a=i.\u0275\u0275reference(19),u=i.\u0275\u0275reference(23),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",a),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function sh(e,n){if(1&e&&i.\u0275\u0275template(0,ah,25,16,"div",5),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function uh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function lh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",26)}function ch(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Zc,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function fh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function tf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,ef,r.course.id,t.id))}}function dh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,uh,1,0,"tui-tag",11),i.\u0275\u0275template(14,lh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",16),i.\u0275\u0275template(20,ch,3,5,"ng-container",14),i.\u0275\u0275template(21,fh,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,tf,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),a=i.\u0275\u0275reference(22),u=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==u.user?null:u.user.is_teacher))("ngIfElse",a),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Cu(e,n){if(1&e&&i.\u0275\u0275template(0,dh,24,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.pastEvents)}}let hh=(()=>{class e{constructor(t){this.authenticationService=t,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t),this.upcomingEvents=this.events.filter(t=>t.is_open||t.is_not_available_yet).filter(t=>"CHALLENGE"==t.type),this.pastEvents=this.events.filter(t=>t.is_closed).filter(t=>"CHALLENGE"==t.type)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),i.\u0275\u0275text(3," Upcoming Challenges "),i.\u0275\u0275template(4,sh,1,1,"ng-template",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-accordion-item",4),i.\u0275\u0275text(6," Past Challenges "),i.\u0275\u0275template(7,Cu,1,1,"ng-template",3),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[_u.oc,_u.Kc,_u.dv,N.sg,N.O5,Fs.Gi,Mt.v0,re.yS],pipes:[N.uU,N.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function ph(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",12),i.\u0275\u0275text(1,"Concept Map"),i.\u0275\u0275elementEnd())}function gh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function vh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function mh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function yh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function xh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Challenges"),i.\u0275\u0275elementEnd())}function bh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",18),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",t.course)}}function _h(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",19),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==t.course?null:t.course.question_set)("uqjs",null==t.course?null:t.course.uqjs)}}function Ch(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function wh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==t.course?null:t.course.course_reg)}}function Sh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",22),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==t.course?null:t.course.leader_board)("rankTopX",3)}}function Th(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-challenge-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function Eh(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",23)}let Ph=(()=>{class e{constructor(t,r,a){this.authenticationService=t,this.courseService=r,this.route=a,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(re.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:19,vars:12,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-tabs-with-more",2,3),i.\u0275\u0275template(5,ph,2,0,"button",4),i.\u0275\u0275template(6,gh,2,0,"button",5),i.\u0275\u0275template(7,vh,2,0,"button",6),i.\u0275\u0275template(8,mh,2,0,"button",7),i.\u0275\u0275template(9,yh,2,0,"button",8),i.\u0275\u0275template(10,xh,2,0,"button",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(11,bh,2,1,"ng-container",10),i.\u0275\u0275template(12,_h,2,2,"ng-container",10),i.\u0275\u0275template(13,Ch,2,2,"ng-container",10),i.\u0275\u0275template(14,wh,2,1,"ng-container",10),i.\u0275\u0275template(15,Sh,2,2,"ng-container",10),i.\u0275\u0275template(16,Th,2,2,"ng-container",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(17,Eh,1,0,"ng-template",null,11,i.\u0275\u0275templateRefExtractor)),2&t){const a=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(18);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",u),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",0===a.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===a.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===a.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===a.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===a.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",5===a.activeItemIndex)}},directives:[Yr.WN,Yr.tl,Yr.yu,N.O5,Dc,Uc,Vd,Gd,eh,hh,bt.P],styles:[""]}),e})();var st=f(68858);let wu=(()=>{class e{static createForm(){return(new ee.FormBuilder).group({name:new ee.FormControl(null,[ee.Validators.required]),type:new ee.FormControl("",[ee.Validators.required]),countForTokens:new ee.FormControl(!1,[ee.Validators.required]),startEndDatePicker:new ee.FormControl(new st.VR(st.TU.currentLocal(),st.TU.currentLocal().append({day:7})),[ee.Validators.required]),startTimePicker:new ee.FormControl(st.qD.currentLocal(),[ee.Validators.required]),endTimePicker:new ee.FormControl(st.qD.currentLocal(),[ee.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new ee.FormBuilder).group({name:new ee.FormControl(t.name,[ee.Validators.required]),type:new ee.FormControl(t.type,[ee.Validators.required]),countForTokens:new ee.FormControl(t.count_for_tokens,[ee.Validators.required]),startEndDatePicker:new ee.FormControl(new st.VR(st.TU.fromLocalNativeDate(new Date(t.start_date)),st.TU.fromLocalNativeDate(new Date(t.end_date))),[ee.Validators.required]),startTimePicker:new ee.FormControl(st.qD.fromLocalNativeDate(new Date(t.start_date)),[ee.Validators.required]),endTimePicker:new ee.FormControl(st.qD.fromLocalNativeDate(new Date(t.end_date)),[ee.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,r,a){return{id:a,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:r,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,r){return new Date(t.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,r=n.get("startTimePicker").value,a=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&a.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var Bs=f(86097),xl=f(13774),ta=f(35302),Wi=f(35137),bl=f(295),$i=f(40022),ho=f(39193),nf=f(52164),_l=f(70589),wi=f(45261),na=f(15411),Sa=f(83618),Gn=f(72997),as=f(85113);function rf(e,{value:n,min:t,max:r,dateFormat:a,dateSeparator:u}){return n&&n.toString(a,u)===e?e:st.TU.normalizeParse(e,a).dayLimit(t,r).toString(a,u)}function Ih(e){return n=>n.length!==st.ek?{value:n}:{value:rf(n,e)}}function Su(e,n){return st.TU.normalizeParse(e.slice(0,st.ek),n.dateFormat).dayLimit(n.min,n.max)}function Tu(e,n){const{dateFormat:t,dateSeparator:r}=n;switch(e.length){case st.ek:return Su(e,n).toString(t,r);case st.ek+st.mH.length:return Su(e,n).toString(t,r)+st.mH;case st.FZ:return n.value&&n.value.toString(t,r)===e?e:st.VR.sort(Su(e.slice(0,st.ek),n),Su(e.slice(st.ek+st.mH.length),n)).toString(t,r);default:return e}}function Ah(e){return n=>({value:Tu(n,e)})}function Cl(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},Sa.bM),n);return a=>{const u=[],c=a.split("");return t.forEach(y=>{const T=e.indexOf(y),A=parseInt(String(r[y]).substr(0,1),10);parseInt(c[T],10)>A&&(c[T+1]=c[T],c[T]="0",u.push(T))}),!t.some(y=>parseInt(a.substr(e.indexOf(y),2),10)>r[y])&&{value:c.join(""),indexesOfPipedChars:u}}}const ss=Array(2).fill(ho.hW),wl=Array(4).fill(ho.hW);function Sl(e,n){return"YMD"===(as.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...wl,n,...ss,n,...ss]:[...ss,n,...ss,n,...wl]}function of(e,n){as.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=Sl(e,n);return[...t,vn.f$,vn.F,vn.f$,...t]}function Hs(e,n){const{length:t}=String(e),r=Array(t).fill(ho.hW);return n&&r.unshift(n),r}function kh(e,n={}){const{HH:t,MM:r,SS:a,MS:u}=Object.assign(Object.assign({},Sa.bM),n);return[...Hs(t),...Hs(r,":"),...e.includes("HH:MM:SS")?Hs(a,":"):[],..."HH:MM:SS.MSS"===e?Hs(u,"."):[]]}var No=f(35628),Tl=f(24850),Ta=f(7625),us=f(6083),po=f(93030),ls=f(26171),Rt=f(24710),js=f(53256),Eu=f(2141),Pu=f(66695);let Lh=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ze.gH))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Rt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,_e.TH)()],e.prototype,"tuiColor",void 0),(0,Rt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,_e.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,i.Inject)(Ze.gH))],e),e})(),Nh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();var El=f(46579);const Dh=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:r})=>{as.z.assert(Number.isInteger(n)),as.z.assert((0,El.Z2)(n,0,6)),as.z.assert(Number.isInteger(t)),as.z.assert((0,El.Z2)(t,0,st.NA));let a=n*st.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:st.NA-(n-t)})(e,r)+1;return a>e.daysCount&&(a-=e.daysCount,e=e.append({month:1})),a<=0&&(a=(e=e.append({month:-1})).daysCount+a),new st.TU(e.year,e.month,a)};let Vh=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const a=[];for(let u=0;u<6;u++){const c=[];for(let v=0;v<st.NA;v++){const y=Dh({month:t,rowIndex:u,colIndex:v,firstDayOfWeek:this.firstDayOfWeek}),A=(_,W=t)=>_.year>W.year||_.month>W.month;if(!((_,W=t)=>_.year<W.year||_.month<W.month)(y)||r){if(A(y)&&!r)break;c.push(y)}}a.push(c)}return this.currentSheet=a.filter(u=>u.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(wi.Sy,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,i.Inject)(wi.Sy))],e),e})(),Bh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function Hh(e,n){1&e&&i.\u0275\u0275element(0,"div",3),2&e&&i.\u0275\u0275property("innerText",n.$implicit)}function Yi(e,n){if(1&e&&i.\u0275\u0275element(0,"div",12),2&e){const t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",t[1])}}function jh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,Yi,1,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.length>1)}}function zh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(a){i.\u0275\u0275restoreView(t);const u=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(a&&u)})("tuiPressedChange",function(a){i.\u0275\u0275restoreView(t);const u=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(a&&u)})("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(a)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,jh,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,t,r.toMarkers,r.itemIsToday(t),!!r.getItemRange(t)))}}function Ea(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,zh,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(t)||r.showAdjacent)}}function tn(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ea,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,a=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",a[r][t])}}function Uh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,tn,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[t].length)}}function ri(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Uh,2,1,"div",4),i.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let ur=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=st.TU.currentLocal(),this.month=st.ql.currentLocal(),this.disabledItemHandler=vn.Iy,this.markerHandler=ho.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,a,u)=>{if(a||u)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof st.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:r,pressedItem:a,hoveredItem:u}=this;return r(t)?"disabled":a&&a.daySame(t)?"pressed":u&&u.daySame(t)?"hovered":null}getItemRange(t){const{value:r,hoveredItem:a}=this;return r?r instanceof st.TU?r.daySame(t)?"single":null:r.from.daySame(t)&&!r.isSingleDay||a&&a.dayAfter(r.from)&&r.from.daySame(t)&&r.isSingleDay||a&&a.daySame(t)&&a.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(t)&&!r.isSingleDay||a&&a.dayBefore(r.from)&&r.from.daySame(t)&&r.isSingleDay||a&&a.daySame(t)&&a.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:r,hoveredItem:a}=this;if(null===r||r instanceof st.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(t)&&r.to.dayAfter(t);if(null===a)return!1;const u=st.VR.sort(r.from,a);return u.from.daySameOrBefore(t)&&u.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,wn.Hm)(this.hoveredItem,t,(r,a)=>r.daySame(a))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(wi.lQ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Hh,1,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,ri,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[N.sg,$i.Ls,js.Xj,N.O5,Eu.c,Pu.n,Lh],pipes:[N.Ov,Vh,po.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"month",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"markerHandler",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"hoveredItem",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"showAdjacent",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Rt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,i.Inject)(wi.lQ))],e),e})(),Gh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,$i.WD,po.I,js.Ih,Eu.V,Pu.f,Nh,Bh]]}),e})();var Ro=f(43360);function Wh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(a){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(a,c)})("tuiPressedChange",function(a){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(a,c)})("click",function(){const u=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(u)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t)}}function $h(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Wh,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,a=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",a.getItem(r,t))}}function Yh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,$h,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Pl=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=st.ql.currentLocal().year,this.value=null,this.initialItem=st.ql.currentLocal(),this.min=st.K1,this.max=st.Oy,this.disabledItemHandler=vn.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof st.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,r){return 4*t+r+this.calculatedMin}getItemState(t){const{disabledItemHandler:r,max:a,pressedItem:u,hoveredItem:c}=this;return a.year<t||r!==vn.Iy&&r(t)?"disabled":u===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:r,hoveredItem:a}=this;return null===r?null:r instanceof st.F4?r.year===t?"single":null:r.from.year===t&&!r.from.yearSame(r.to)||null!==a&&a>r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==a&&a===t&&a<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===t&&!r.from.yearSame(r.to)||null!==a&&a<r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==a&&a===t&&a>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:r,hoveredItem:a}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==a&&r.from.year!==a&&(0,El.Z2)(t,Math.min(r.from.year,a),Math.max(r.from.year,a)):r.from.year<=t&&r.to.year>t)}onItemHovered(t,r){this.updateHoveredItem(t,r)}onItemPressed(t,r){this.updatePressedItem(t,r)}onItemClick(t){this.yearClick.emit(new st.F4(t))}updateHoveredItem(t,r){this.hoveredItem=t?r:null}updatePressedItem(t,r){this.pressedItem=t?r:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Yh,2,1,"div",0),2&t&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[js.Xj,$i.Ls,Ro.M,Eu.c,Pu.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"initialItem",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),(0,Rt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),Xh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[Eu.V,Pu.f,js.Ih,$i.WD,Ro.e]]}),e})();var Xi=f(61279),zs=f(33703),Do=f(89627),$n=f(37940),Jn=f(3054);const uf=["wrapper"];function Kh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(a)})("tuiFocusVisibleChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocusVisible(a)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",t[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",t[1])("focusable",!1)}}const Qh=["*"];let Jh=(()=>{let e=class extends ta.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,je.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(wi.U4))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(uf,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(r.wrapper=a.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Qh,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,Kh,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[N.O5,ls.A,zs.t,Jn.U,$n.q,Mt.v0],pipes:[N.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Rt.gn)([(0,i.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabled",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"mode",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"leftDisabled",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"rightDisabled",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"leftClick",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"rightClick",void 0),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,i.Inject)(wi.U4))],e),e})(),Zh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,$n.c,Jn.F,zs.u,ls.Z,Mt.fN]]}),e})();var lf=f(5767);function qh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function cf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let Us=(()=>{let e=class{constructor(){this.value=st.ql.currentLocal(),this.min=st.K1,this.max=st.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const r=this.value.append(t);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,qh,2,1,"ng-container",1),i.\u0275\u0275template(5,cf,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const a=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",a)}},directives:[Jh,N.O5,Do.V,zs.t],pipes:[N.Ov,lf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),e})(),Il=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,zs.u,Zh,Do.j,lf.g]]}),e})();function ep(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPickerYearClick(a)}),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function ff(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationValueChange(a)})("yearClick",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationYearClick(a)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHoveredItemChange(a)})("dayClick",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(a)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let cs=(()=>{let e=class{constructor(){this.month=st.ql.currentLocal(),this.value=null,this.disabledItemHandler=vn.Iy,this.min=st.K1,this.max=st.Oy,this.minViewedMonth=st.K1,this.maxViewedMonth=st.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=ho.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,r,a)=>u=>u.dayBefore(r)||u.dayAfter(a)||t(u)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new st.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,wn.Hm)(this.hoveredItem,t,(r,a)=>r.daySame(a))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,ep,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,ff,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const a=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",a)}},directives:[N.O5,Xi.IB,Pl,Us,ur],pipes:[po.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"month",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"minViewedMonth",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"hoveredItem",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"showAdjacent",void 0),(0,Rt.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"markerHandler",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"monthChange",void 0),(0,Rt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),kr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,Il,Gh,Xh,Xi.Jy,po.I]]}),e})(),fs=(()=>{let e=class{constructor(t,r,a){this.disabledItemHandler=vn.Iy,this.markerHandler=ho.zE,this.defaultViewedMonthFirst=st.ql.currentLocal(),this.defaultViewedMonthSecond=st.ql.currentLocal().append({month:1}),this.min=st.K1,this.max=st.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(u,c)=>u.append({month:c}),t&&t.pipe((0,tr.YP)(r),(0,Ta.R)(a)).subscribe(u=>{this.value=u,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Gn.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Ze.a3))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([Ze.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionFirstViewedMonth(u)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionSecondViewedMonth(u)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[cs],pipes:[po.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"markerHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"value",void 0),(0,Ne.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),e=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Inject)(Gn.cU)),(0,Ne.fM)(0,(0,i.Optional)()),(0,Ne.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ne.fM)(2,(0,i.Inject)(Ze.a3))],e),e})(),tp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[po.I,Xi.Jy,kr]]}),e})();const df=function(e,n,t,r){return[e,n,t,r,!0]},hf=function(e,n,t,r){return[e,n,t,r,!1]};function np(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(a)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,df,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,hf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function rp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",9)}function pf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)})("keydown.space.prevent",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)})("click",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,rp,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(t))}}const Fo=function(e,n,t,r,a,u){return[e,n,t,r,a,u]};function ln(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(a)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,pf,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,df,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,hf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,Fo,t.items,t.mapper,t.min,t.max,t.minLength,i.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let gf=(()=>{let e=class{constructor(t,r,a,u){this.otherDateText$=u,this.defaultViewedMonth=st.ql.currentLocal(),this.disabledItemHandler=vn.Iy,this.markerHandler=ho.zE,this.items=[],this.min=st.K1,this.max=st.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=Sa.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,v,y,T,A)=>[...c.filter(_=>(null===T||_.range.from.append(T).daySameOrBefore(_.range.to))&&_.range.to.daySameOrAfter(v)&&(null===y||_.range.from.daySameOrBefore(y))),A],t&&t.pipe((0,tr.YP)(r),(0,Ta.R)(a)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:r}=this;return"string"==typeof t&&null===r||r===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(st.VR.sort(r.from,t)):this.value=new st.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,wn.Hm)(this.value,t.range,(r,a)=>r.from.daySame(a.from.dayLimit(this.min,this.max))&&r.to.daySame(a.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,r,a){return u=>{if(!r||!r.isSingleDay||!a)return t(u);const c=r.from.append(a,!0).append({day:1}),v=r.from.append(a).append({day:-1});return c.dayBefore(u)&&v.dayAfter(u)||t(u)}}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Gn.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Ze.a3),i.\u0275\u0275directiveInject(Gn.q5))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([Ze.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,np,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,ln,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const a=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",a)}},directives:[N.O5,fs,ls.A,cs,sr.qi,N.sg,sr.vK,bt.P],pipes:[po.c,N.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"markerHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"items",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"minLength",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"maxLength",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"value",void 0),(0,Ne.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Ne.gn)([(0,i.Output)()],e.prototype,"rangeChange",void 0),(0,Ne.gn)([_e.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Inject)(Gn.cU)),(0,Ne.fM)(0,(0,i.Optional)()),(0,Ne.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ne.fM)(2,(0,i.Inject)(Ze.a3)),(0,Ne.fM)(3,(0,i.Inject)(Gn.q5))],e),e})(),Si=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,po.I,ls.Z,kr,kr,bt.E,sr.pc,tp]]}),e})();var Vo=f(38190);function ip(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(a)})("hoveredChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(a)})("pressedChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPressed(a)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),a=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(t))("readOnly",r.readOnly)("iconContent",r.computedMobile?a:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Mn(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function op(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function vf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRangeChange(a)}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const Iu=["*",[["input"]]],ap=["*","input"],up=[{provide:ta.M$,useExisting:(0,i.forwardRef)(()=>Al)},{provide:Wi.KZ,useExisting:(0,i.forwardRef)(()=>Al)},{provide:Gn.cU,deps:[[new i.Optional,new i.Self,ee.NgControl],[new i.Optional,(0,i.forwardRef)(()=>Gn.LD)]],useFactory:(e,n)=>(0,Bs.q7)(e,n)},us.Sm];let Al=(()=>{let e=class extends ta.F9{constructor(t,r,a,u,c,v,y,T,A,_,W,ne){super(t,r,ne),this.injector=a,this.isMobile=u,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=y,this.textfieldExampleText=T,this.dateFormat=A,this.dateSeparator=_,this.dateTexts$=W,this.valueTransformer=ne,this.textMaskOptions={mask:of(this.dateFormat,this.dateSeparator),pipe:Ah(this),guide:!1},this.disabledItemHandler=vn.Iy,this.markerHandler=ho.zE,this.defaultViewedMonth=st.ql.currentLocal(),this.items=[],this.min=st.K1,this.max=st.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=Sa.EP,this.dateFiller$=this.dateTexts$.pipe((0,Tl.U)(oe=>(0,st.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,nf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?Sa.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,wn.Hm)(this.value,t.range,(r,a)=>r.from.daySame(a.from.dayLimit(this.min,this.max))&&r.to.daySame(a.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:r,activePeriod:a}=this;return a?String(a):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new No.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,Ta.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==st.FZ)return void this.updateValue(null);const r=st.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,wn.Hm)(this.value,t,(r,a)=>r.daySame(a))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===st.ek||this.nativeValue.length===st.ek+st.mH.length)&&this.updateValue(st.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,je.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const r=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new st.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,a=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(a)?new st.VR(r.from,a):r}getDateRangeFiller(t){return`${t}${st.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Wi.fL),i.\u0275\u0275directiveInject(wa.RO),i.\u0275\u0275directiveInject(Gn.vk,8),i.\u0275\u0275directiveInject(ve.kI),i.\u0275\u0275directiveInject(ve.pX),i.\u0275\u0275directiveInject(st.P_),i.\u0275\u0275directiveInject(st.q_),i.\u0275\u0275directiveInject(Gn.zf),i.\u0275\u0275directiveInject(Gn.LD,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(ar.yc,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(r.textfield=a.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(up),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:ap,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Iu),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)})("tuiActiveZoneChange",function(u){return r.onActiveZone(u)}),i.\u0275\u0275template(1,ip,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Mn,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,op,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,vf,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const a=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",a)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[na.o1,bl.e,$i.Ls,ar.yc,ar.B1,Vo.n,ve.D9,ve._K,nn.hd,bt.P,gf],pipes:[N.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Ne.gn)([(0,i.ViewChild)(ar.yc)],e.prototype,"textfield",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"markerHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"items",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"minLength",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"maxLength",void 0),(0,Ne.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Optional)()),(0,Ne.fM)(0,(0,i.Self)()),(0,Ne.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Ne.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ne.fM)(2,(0,i.Inject)(i.Injector)),(0,Ne.fM)(3,(0,i.Inject)(Wi.fL)),(0,Ne.fM)(4,(0,i.Inject)(wa.RO)),(0,Ne.fM)(5,(0,i.Optional)()),(0,Ne.fM)(5,(0,i.Inject)(Gn.vk)),(0,Ne.fM)(6,(0,i.Inject)(ve.kI)),(0,Ne.fM)(7,(0,i.Inject)(ve.pX)),(0,Ne.fM)(8,(0,i.Inject)(st.P_)),(0,Ne.fM)(9,(0,i.Inject)(st.q_)),(0,Ne.fM)(10,(0,i.Inject)(Gn.zf)),(0,Ne.fM)(11,(0,i.Optional)()),(0,Ne.fM)(11,(0,i.Inject)(Gn.LD))],e),e})();var mf;let ds=mf=class extends _l.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};ds.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(ds)))(t||ds)}}(),ds.\u0275dir=i.\u0275\u0275defineDirective({type:ds,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:wi.S0,useExisting:(0,i.forwardRef)(()=>mf)}]),i.\u0275\u0275InheritDefinitionFeature]});let lp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,nn.QA,bl.A,$i.WD,No.wq,ar.KW,ve.cn,na.jh,bt.E,Si,Vo.S]]}),e})();var cp=f(56498);function fp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(u)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function dp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,fp,2,3,"button",4),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.filtered)}}const yf={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:Sa.bM,itemSize:"m"},hs=new i.InjectionToken("Default parameters for input time component",{factory:()=>yf});var Gs;let fr=Gs=class extends ta.F9{constructor(n,t,r,a){super(n,t),this.timeTexts$=r,this.options=a,this.disabledItemHandler=vn.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,je.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,Tl.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const r=st.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=st.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:kh(n,this.options.maxValues),pipe:Cl(n,this.options.maxValues),guide:!1}}filter(n,t,r){return n.filter(a=>a.toString(t).includes(r))}findNearestTimeFromItems(n){return this.items.reduce((t,r)=>Math.abs(r.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?r:t)}getMatch(n){return this.items.find(t=>(0,vn.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:r}=n;if(this.readOnly||!(r instanceof HTMLInputElement))return;const a=r.selectionStart||0;this.shiftTime(this.calculateShift(a,t)),r.setSelectionRange(a,a),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,je.NY)(this.nativeFocusableElement,!0,n),this.close())}};fr.\u0275fac=function(n){return new(n||fr)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Gn.Yq),i.\u0275\u0275directiveInject(hs))},fr.\u0275cmp=i.\u0275\u0275defineComponent({type:fr,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(ar.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.textfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Wi.KZ,useExisting:(0,i.forwardRef)(()=>Gs)},us.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(a){return t.onOpen(a)})("focusedChange",function(a){return t.onFocused(a)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(a){return t.onValueChange(a)})("hoveredChange",function(a){return t.onHovered(a)})("keydown.arrowUp",function(a){return t.onArrowUp(a)})("keydown.arrowDown",function(a){return t.onArrowDown(a)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,dp,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",r)("open",t.interactive&&t.open&&!!t.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[na.o1,ar.yc,ar.B1,Vo.n,ve.D9,nn.hd,sr.qi,N.sg,sr.vK],pipes:[N.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),fr.ctorParameters=()=>[{type:ee.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ee.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:cp.y,decorators:[{type:i.Inject,args:[Gn.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[hs]}]}],(0,Ne.gn)([(0,i.ViewChild)(ar.yc)],fr.prototype,"textfield",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],fr.prototype,"disabledItemHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],fr.prototype,"items",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],fr.prototype,"itemSize",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],fr.prototype,"strict",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],fr.prototype,"mode",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],fr.prototype,"postfix",void 0),(0,Ne.gn)([_e.UM],fr.prototype,"getFiller$",null),(0,Ne.gn)([(0,i.HostListener)("click")],fr.prototype,"onClick",null),(0,Ne.gn)([_e.UM],fr.prototype,"calculateMask",null),(0,Ne.gn)([_e.UM],fr.prototype,"filter",null),fr=Gs=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Optional)()),(0,Ne.fM)(0,(0,i.Self)()),(0,Ne.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Ne.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ne.fM)(2,(0,i.Inject)(Gn.Yq)),(0,Ne.fM)(3,(0,i.Inject)(hs))],fr);let pp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,nn.QA,sr.pc,na.jh,ar.KW,Vo.S,ve.cn]]}),e})();function gp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Cr(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,gp,2,2,"button",23),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.localEventTypes)}}function ii(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const vp=function(e){return["/course",e]};let xf=(()=>{class e{constructor(t,r,a,u){this.route=t,this.courseEventService=r,this.router=a,this.notificationsService=u,this.eventId=null,this.timeOptions=(0,Bs.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=wu.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=wu.createFormWithData(t)}))}submitEvent(t){const r=wu.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},a=>{this.notificationsService.show(a,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},a=>{this.notificationsService.show(a,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(re.gz),i.\u0275\u0275directiveInject(Ds),i.\u0275\u0275directiveInject(re.F0),i.\u0275\u0275directiveInject(jt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,Cr,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(30,ii,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20)(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,vp,r.courseId)))},directives:[ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,he.K3,he.wU,ee.NgControlStatus,ee.FormControlName,Vt.y,Ui.uJ,Ui.OI,sr.gX,sr.qi,N.sg,sr.vK,xl.p,Al,ds,fr,N.O5,qt.Ls,Mt.v0,re.yS],styles:[""]}),e})();var Ml=f(25775),bf=f(42654),_f=f(7394);let mp=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getUserStatsByCategory(t){const r=this.apiService.getURL("user-stats","category",t);return this.http.get(r).pipe((0,pi.K)(this.apiService.handleError("Error occurred while getting user stats")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Rs.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var yp=f(59796);class kl{static createForm(){return(new ee.FormBuilder).group({report:new ee.FormControl("",[ee.Validators.required]),report_details:new ee.FormControl("")})}static extractData(n){return n.value}}let xp=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}reportQuestion(t,r){const a=this.apiService.getURL("question-report");return this.http.post(a,Object.assign(Object.assign({},r),{question:t})).pipe((0,pi.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Rs.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Cf=f(24417),Ol=f(26537);function wf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Sf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,wf,2,2,"button",8),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.reportOptions)}}function bp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Reason "),i.\u0275\u0275template(5,Sf,2,1,"tui-data-list",4),i.\u0275\u0275element(6,"tui-field-error",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),i.\u0275\u0275text(9," Details "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"div",2)(11,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().submitReport()}),i.\u0275\u0275text(12," Submit Report "),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",t.formGroup),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",t.reportOptions?i.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),i.\u0275\u0275advance(9),i.\u0275\u0275property("disabled",t.formGroup.invalid)}}const _p=function(){return{label:"Report this question",size:"m"}};let Cp=(()=>{class e{constructor(t,r){this.reportQuestionService=t,this.notificationsService=r,this.open=!1,this.openChange=new i.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=kl.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,kl.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(xp),i.\u0275\u0275directiveInject(jt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,bp,13,7,"ng-template",0),i.\u0275\u0275listener("tuiDialogChange",function(u){return r.toggleDialog(u)})),2&t&&i.\u0275\u0275property("tuiDialogOptions",i.\u0275\u0275pureFunction0(2,_p))("tuiDialog",r.open)},directives:[wa.iu,ee.NgControlStatusGroup,ee.FormGroupDirective,Ui.uJ,Ui.OI,ee.NgControlStatus,ee.FormControlName,sr.gX,sr.qi,N.sg,sr.vK,Vt.y,Cf.Jl,Cf.eQ,Mt.v0],pipes:[Ol.J],styles:[""]}),e})();const Ll=function(e){return["../",e]};function ps(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",22)(1,"a",23),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tui-svg",24),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(8,Ll,null==t.parentCategory?null:t.parentCategory.pk)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)}}function wp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function Sp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function Tp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28,29),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Sp,1,0,"tui-svg",30),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(1);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(4,Ll,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive)}}function Ep(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),i.\u0275\u0275text(3),i.\u0275\u0275template(4,wp,1,0,"tui-svg",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Tp,4,6,"a",31),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(2);i.\u0275\u0275property("label",t.category.name),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Ll,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.children)}}function Pp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",25),i.\u0275\u0275template(1,Ep,6,8,"tui-opt-group",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.nestedCategories)}}function Tf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",34),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Ef(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Tf,2,2,"button",33),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function Ip(e,n){if(1&e&&i.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",t.currentQuestionId)}}function Ap(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275element(1,"tui-marker-icon",37),i.\u0275\u0275elementStart(2,"h1",38),i.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const Mp=function(){return["../../../"]};let kp=(()=>{class e{constructor(t,r,a,u,c,v){this.route=t,this.uqjService=r,this.difficultyService=a,this.courseService=u,this.categoryService=c,this.userStatsService=v,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new bf.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((r,a)=>a.parent?r:[...r,{category:a,children:t.filter(u=>u.parent===a.pk).map(u=>({category:u,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var a,u;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=t.find(A=>this.categoryId===A.pk),this.parentCategory=t.find(A=>this.category.parent===A.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserStatsByCategory(this.categoryId),v=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(u=null===(a=this.parentCategory)||void 0===a?void 0:a.pk)&&void 0!==u?u:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),y=this.difficultyService.getDifficulties(),T=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,hl.D)([v,y,c,T]).subscribe(([A,_,W,ne])=>{this.uqjs=Ut.shuffle(A),this.difficulties=_,this.userStats=W,this.categoryUserSuccessRate=ne.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,r){var a,u;this.difficulty=t,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(u=null===(a=this.parentCategory)||void 0===a?void 0:a.pk)&&void 0!==u?u:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=Ut.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const r=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",a=this.userStats.find(u=>u.difficulty===r);this.userSuccessRate=a?a.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(u=>u.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(re.gz),i.\u0275\u0275directiveInject(Fc.O),i.\u0275\u0275directiveInject(_f.G),i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(Ls.H),i.\u0275\u0275directiveInject(mp))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:34,vars:40,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),i.\u0275\u0275text(5," Back to course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,ps,4,10,"div",5),i.\u0275\u0275elementStart(7,"tui-hosted-dropdown",6)(8,"button",7),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(10,Pp,2,1,"ng-template",null,8,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(12,"p",9),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"p",10),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"tui-select",11),i.\u0275\u0275listener("ngModelChange",function(u){return r.updateQuestions(u,r.include_solved)}),i.\u0275\u0275pipe(17,"stringifyTuiDataList"),i.\u0275\u0275text(18," Choose a level of difficulty "),i.\u0275\u0275template(19,Ef,2,1,"tui-data-list",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"tui-checkbox-labeled",13),i.\u0275\u0275listener("ngModelChange",function(u){return r.updateQuestions(r.difficulty,u)}),i.\u0275\u0275text(21," Include Solved "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(22,"div",14)(23,"button",15),i.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),i.\u0275\u0275text(24," Report "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"button",16),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(26," Previous Question "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(27,"button",17),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(28," Next Question "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(29,"div",18),i.\u0275\u0275template(30,Ip,1,1,"app-problem-view",19),i.\u0275\u0275template(31,Ap,4,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(33,"app-problem-report-modal",21),i.\u0275\u0275listener("openChange",function(u){return r.reportQuestionModal=u}),i.\u0275\u0275elementEnd()),2&t){const a=i.\u0275\u0275reference(11),u=i.\u0275\u0275reference(32);let c;i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(39,Mp)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentCategory),i.\u0275\u0275advance(1),i.\u0275\u0275property("content",a),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(c=null==r.category?null:r.category.name)&&void 0!==c?c:"Category Name"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*r.categorySuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.difficulty)("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(17,35,r.difficulties,0,1):""),i.\u0275\u0275advance(4),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.include_solved),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[yp.k,Mt.v0,re.yS,N.O5,Do.V,bt.P,na.o1,sr.qi,N.sg,sr.Rs,sr.vK,re.Od,Ui.uJ,Ui.OI,ve.sz,ee.NgControlStatus,ee.NgModel,ve.be,sr.gX,xl.p,ee.DefaultValueAccessor,Ml.z,sn.B,Cp],pipes:[Ol.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),Pf=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,pi.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const r=this.apiService.getURL("goal");return this.http.post(r,t).pipe((0,pi.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const r=this.apiService.getURL("goal-item");return this.http.post(r,t).pipe((0,pi.K)(this.apiService.handleError("Unable to create goal item.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Rs.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Op(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;let r;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate3(" Solve ",t.number_of_questions," ",null!==(r=t.difficulty)&&void 0!==r?r:""," questions from ",t.category," ")}}function Lp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div"),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div"),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(12," Items "),i.\u0275\u0275template(13,Op,2,3,"div",0),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index;i.\u0275\u0275attribute("data-index",r),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Goal ",r," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Start date: ",t.start_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" End date: ",t.end_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Progress: ",t.progress," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Is Finished: ",t.is_finished," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Number of questions: ",t.number_of_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.goal_items)}}let Np=(()=>{class e{constructor(t){this.goalService=t}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.goals=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Pf))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"h1"),i.\u0275\u0275text(1,"Goals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,Lp,14,8,"div",0),i.\u0275\u0275elementStart(3,"a",1),i.\u0275\u0275text(4,"Create a new goal"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",r.goals),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink","create"))},directives:[N.sg,re.yS],styles:[""]}),e})();class Nl{static createGoalForm(){return(new ee.FormBuilder).group({end_date:new ee.FormControl(st.TU.currentLocal(),[ee.Validators.required]),end_time:new ee.FormControl(st.qD.currentLocal(),[ee.Validators.required]),goal_items:new ee.FormArray([],[ee.Validators.required])})}static createGoalItemForm(){return(new ee.FormBuilder).group({category:new ee.FormControl("",[ee.Validators.required]),difficulty:new ee.FormControl("",[ee.Validators.required]),number_of_questions:new ee.FormControl("",[ee.Validators.required])})}static formatGoalFormData(n){return{course_reg:n.get("course_reg").value,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function Rp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(a)})("hoveredChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(a)})("focusedChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(a)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),a=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(t))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?a:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Dp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Fp(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",8),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Vp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const a=i.\u0275\u0275nextContext(2);return a.onDayClick(a.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function Bp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(a)})("monthChange",function(a){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMonthChange(a)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,Vp,3,1,"div",10)}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===t.items.length)}}const Hp=["*",[["input"]]],jp=["*","input"],Up=[{provide:Wi.KZ,useExisting:(0,i.forwardRef)(()=>Rl)},{provide:Gn.cU,deps:[[new i.Optional,new i.Self,ee.NgControl],[new i.Optional,Gn.HF]],useFactory:(e,n)=>(0,Bs.q7)(e,n)},{provide:ta.M$,useExisting:(0,i.forwardRef)(()=>Rl)},us.Sm];let Rl=(()=>{let e=class extends ta.F9{constructor(t,r,a,u,c,v,y,T,A,_,W){super(t,r,W),this.injector=a,this.isMobile=u,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=y,this.dateFormat=T,this.dateSeparator=A,this.dateTexts$=_,this.valueTransformer=W,this.month=null,this.textMaskOptions={mask:Sl(this.dateFormat,this.dateSeparator),pipe:Ih(this),guide:!1},this.min=st.K1,this.max=st.Oy,this.disabledItemHandler=vn.Iy,this.markerHandler=ho.zE,this.items=[],this.defaultActiveYearMonth=st.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,Tl.U)(ne=>(0,st.Yl)(ne[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,nf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:r,activeItem:a}=this;return a?String(a):t?t.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?Sa.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(r=>r.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new No.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,Ta.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==st.ek?null:st.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,r){return(0,wn.Hm)(t,r,(a,u)=>a.daySame(u))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Wi.fL),i.\u0275\u0275directiveInject(wa.RO),i.\u0275\u0275directiveInject(Gn.vk,8),i.\u0275\u0275directiveInject(ve.kI),i.\u0275\u0275directiveInject(st.P_),i.\u0275\u0275directiveInject(st.q_),i.\u0275\u0275directiveInject(Gn.zf),i.\u0275\u0275directiveInject(Gn.HF,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(ar.yc,5),2&t){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(r.textfield=a.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(Up),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:jp,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Hp),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)}),i.\u0275\u0275template(1,Rp,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Dp,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Fp,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Bp,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const a=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",a),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,5,r.filler$)),i.\u0275\u0275advance(6),i.\u0275\u0275property("polymorpheus",r.type)}},directives:[na.o1,$i.Ls,ar.yc,ar.B1,Vo.n,ve.D9,nn.hd,bt.P,No.GL,cs,ls.A,N.O5,Do.V],pipes:[N.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Ne.gn)([(0,i.ViewChild)(ar.yc)],e.prototype,"textfield",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"min",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"max",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"markerHandler",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"items",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,Ne.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Optional)()),(0,Ne.fM)(0,(0,i.Self)()),(0,Ne.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Ne.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ne.fM)(2,(0,i.Inject)(i.Injector)),(0,Ne.fM)(3,(0,i.Inject)(Wi.fL)),(0,Ne.fM)(4,(0,i.Inject)(wa.RO)),(0,Ne.fM)(5,(0,i.Optional)()),(0,Ne.fM)(5,(0,i.Inject)(Gn.vk)),(0,Ne.fM)(6,(0,i.Inject)(ve.kI)),(0,Ne.fM)(7,(0,i.Inject)(st.P_)),(0,Ne.fM)(8,(0,i.Inject)(st.q_)),(0,Ne.fM)(9,(0,i.Inject)(Gn.zf)),(0,Ne.fM)(10,(0,i.Optional)()),(0,Ne.fM)(10,(0,i.Inject)(Gn.HF))],e),e})();var If;let gs=If=class extends _l.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};gs.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(gs)))(t||gs)}}(),gs.\u0275dir=i.\u0275\u0275defineDirective({type:gs,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:wi.S0,useExisting:(0,i.forwardRef)(()=>If)}]),i.\u0275\u0275InheritDefinitionFeature]});let Gp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,nn.QA,No.wq,ls.Z,kr,bt.E,Do.j,na.jh,ar.KW,Vo.S,$i.WD,ve.cn]]}),e})();var Pa=f(27670),Af=f(60390);function Wp(e,n){if(1&e&&i.\u0275\u0275element(0,"div",3),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275property("content",t)}}function Dl(e,n){1&e&&i.\u0275\u0275projection(0,2)}const Mf=["*",[["input"]],[["","polymorpheus-outlet",""]]],kf=function(e,n,t,r,a){return[e,n,t,r,a]};var Au;let gr=Au=class extends ta.F9{constructor(n,t,r,a){super(n,t),this.numberFormat=r,this.isIOS=a,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(u,c,v,y)=>({mask:(0,Pa.EC)({allowNegative:u,decimalLimit:v,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,Pa.YT)(this.numberFormat)}),pipe:(0,Pa.qs)("always"===c?v:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,y,u,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;t.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(n.preventDefault(),r.selectionStart++)}onValueChange(n){if((0,Pa.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,Pa.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if(ho.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const r=Math.min(this.max,Math.max(this.min,t));this.updateValue(r),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const r=Math.abs(n)%1>0;let a="always"===this.decimal||r?this.precision:0;const u=r?(0,Af.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(a=u.length),(0,Af.uf)(n,a,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,Pa.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,Pa.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var Of;gr.\u0275fac=function(n){return new(n||gr)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(wi.HO),i.\u0275\u0275directiveInject(Wi.FA))},gr.\u0275cmp=i.\u0275\u0275defineComponent({type:gr,selectors:[["tui-input-number"]],contentQueries:function(n,t,r){if(1&n&&i.\u0275\u0275contentQuery(r,No.r1,5),2&n){let a;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=a.first)}},viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(ar.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.primitiveTextfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("keydown.0",function(a){return t.onZero(a)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Wi.KZ,useExisting:(0,i.forwardRef)(()=>Au)},{provide:ta.M$,useExisting:(0,i.forwardRef)(()=>Au)}]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(i.\u0275\u0275projectionDef(Mf),i.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),i.\u0275\u0275listener("valueChange",function(a){return t.onValueChange(a)})("hoveredChange",function(a){return t.onHovered(a)})("focusedChange",function(a){return t.onFocused(a)})("pressedChange",function(a){return t.onPressed(a)})("keydown",function(a){return t.onKeyDown(a)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275projection(2),i.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275template(4,Wp,1,1,"div",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Dl,1,0,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",i.\u0275\u0275pipeBindV(1,13,i.\u0275\u0275pureFunction5(19,kf,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[ar.yc,ar.B1,Vo.n,ve.D9,ve.fy,nn.hd,N.O5,No.r1],pipes:[po.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),gr.ctorParameters=()=>[{type:ee.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ee.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:i.Inject,args:[wi.HO]}]},{type:Boolean,decorators:[{type:i.Inject,args:[Wi.FA]}]}],(0,Ne.gn)([(0,i.ViewChild)(ar.yc)],gr.prototype,"primitiveTextfield",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],gr.prototype,"min",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],gr.prototype,"max",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],gr.prototype,"decimal",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],gr.prototype,"precision",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],gr.prototype,"prefix",void 0),(0,Ne.gn)([(0,i.Input)(),(0,_e.TH)()],gr.prototype,"postfix",void 0),(0,Ne.gn)([(0,i.ContentChild)(No.r1)],gr.prototype,"polymorpheusValueContent",void 0),(0,Ne.gn)([(0,i.HostListener)("keydown.0",["$event"])],gr.prototype,"onZero",null),gr=Au=(0,Ne.gn)([(0,Ne.fM)(0,(0,i.Optional)()),(0,Ne.fM)(0,(0,i.Self)()),(0,Ne.fM)(0,(0,i.Inject)(ee.NgControl)),(0,Ne.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ne.fM)(2,(0,i.Inject)(wi.HO)),(0,Ne.fM)(3,(0,i.Inject)(Wi.FA))],gr);let vs=Of=class extends _l.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};vs.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(vs)))(t||vs)}}(),vs.\u0275dir=i.\u0275\u0275defineDirective({type:vs,selectors:[["tui-input-number"]],features:[i.\u0275\u0275ProvidersFeature([{provide:wi.S0,useExisting:(0,i.forwardRef)(()=>Of)}]),i.\u0275\u0275InheritDefinitionFeature]});let Xp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[N.ez,nn.QA,po.I,ar.KW,ve.cn,Vo.S,No.wq]]}),e})();function oi(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t.pk),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function Fl(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,oi,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.categories)}}function Kp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Qp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Kp,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function Jp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",13),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Category "),i.\u0275\u0275template(5,Fl,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",4)(8,"tui-select",13),i.\u0275\u0275pipe(9,"stringifyTuiDataList"),i.\u0275\u0275text(10," Difficulty "),i.\u0275\u0275template(11,Qp,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",4)(14,"tui-input-number",15),i.\u0275\u0275text(15," Number of questions "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",4)(18,"button",16),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(t).index;return i.\u0275\u0275nextContext().removeGoalItem(u)}),i.\u0275\u0275text(19," Remove "),i.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.categories?i.\u0275\u0275pipeBind3(3,8,r.categories,"pk","full_name"):"")("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(9,12,r.difficulties,0,1):"")("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions"))}}let Zp=(()=>{class e{constructor(t,r,a,u,c){this.goalService=t,this.categoryService=r,this.difficultyService=a,this.router=u,this.notificationService=c,this.timeOptions=(0,Bs.eN)()}ngOnInit(){this.goalForm=Nl.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,r){return t.get(r)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(Nl.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}onSubmit(){const t=Nl.formatGoalFormData(this.goalForm);console.debug(t),this.goalService.createGoal(t).subscribe({next:()=>{this.notificationService.show("Goal created successfully",{label:"Success",status:"success"})}})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Pf),i.\u0275\u0275directiveInject(Ls.H),i.\u0275\u0275directiveInject(_f.G),i.\u0275\u0275directiveInject(re.F0),i.\u0275\u0275directiveInject(jt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],decls:21,vars:4,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconPlus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Goal"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"tui-input-date",5),i.\u0275\u0275text(7," End date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",4)(10,"tui-input-time",7),i.\u0275\u0275text(11," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"h3",2),i.\u0275\u0275text(14,"Goal Items"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(15,Jp,20,16,"div",9),i.\u0275\u0275elementStart(16,"div",10)(17,"button",11),i.\u0275\u0275listener("click",function(){return r.addGoalItem()}),i.\u0275\u0275text(18," Add Another "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"button",12),i.\u0275\u0275text(20," Submit "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.goalForm),i.\u0275\u0275advance(9),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.getGoalItemFormControls()),i.\u0275\u0275advance(4),i.\u0275\u0275property("disabled",r.goalForm.invalid))},directives:[ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,Rl,gs,ee.NgControlStatus,ee.FormControlName,Vt.y,fr,N.sg,Ui.uJ,Ui.OI,ee.FormControlDirective,sr.gX,sr.qi,sr.vK,gr,vs,Mt.v0],pipes:[Ol.J],styles:[""]}),e})();const Vl=[{path:"",component:dt,canActivate:[K.a]},{path:":courseId",component:Ph,canActivate:[K.a]},{path:":courseId/register",component:Bo,canActivate:[K.a]},{path:":courseId/new-event",component:xf,canActivate:[K.a]},{path:":courseId/new-event/:eventId",component:xf,canActivate:[K.a]},{path:":courseId/event/:eventId",component:Uc,canActivate:[K.a]},{path:":courseId/problem/:id",component:Ml.z,canActivate:[K.a]},{path:":courseId/event/:eventId/problem/:id",component:Ml.z,canActivate:[K.a]},{path:":courseId/practice/category/:categoryId",component:kp,canActivate:[K.a]},{path:":courseId/goal",component:Np,canActivate:[K.a]},{path:":courseId/goal/create",component:Zp,canActivate:[K.a]}];let qp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[re.Bz.forChild(Vl)],re.Bz]}),e})();var Bl=f(16995),eg=f(96560),tg=f(22079),ng=f(70228),rg=f(38333),Lf=f(66235),ig=f(24736),og=f(63821),ag=f(68476),Hl=f(54554);let jl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[Ds,ge.N,Kc],imports:[[N.ez,Lf.J,qp,ee.FormsModule,Bl._l,ig.D,og.ProblemsModule,ee.ReactiveFormsModule,Hl.l,nn.QA,_u.iK,bl.A,Jc.Jm,Mt.fN,kr,xl.s,sr.pc,Gc.zX,wa.up,eg.S,Vt.C,De.p,na.jh,vl.$H,Gp,lp,he.Qf,Xp,pp,os.y,Do.j,tg.dS,sn.z,ng.z,qt.Hi,Ui.Jy,ag.T,ye,bt.E,Gi.jz,Yr.$$,rg.qE.forRoot(),Fs.d3,ve.cn]]}),e})()},71066:(P,Y,f)=>{var p,g,E;E="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,p=[f(29610),f(58259),Y],void 0!==(g=function(O,k,j){E.Backbone=function(S,E,b,M){var O=S.Backbone,k=Array.prototype.slice;E.VERSION="1.4.1",E.$=M,E.noConflict=function(){return S.Backbone=O,this},E.emulateHTTP=!1,E.emulateJSON=!1;var N,j=E.Events={},z=/\s+/,K=function(B,G,ie,ye,We){var gt,Xe=0;if(ie&&"object"==typeof ie)for((void 0!==ye&&"context"in We&&void 0===We.context&&(We.context=ye),gt=b.keys(ie));Xe<gt.length;Xe++)G=K(B,G,gt[Xe],ie[gt[Xe]],We);else if(ie&&z.test(ie))for(gt=ie.split(z);Xe<gt.length;Xe++)G=B(G,gt[Xe],ye,We);else G=B(G,ie,ye,We);return G};j.on=function(B,G,ie){return this._events=K(re,this._events||{},B,G,{context:ie,ctx:this,listening:N}),N&&((this._listeners||(this._listeners={}))[N.id]=N,N.interop=!1),this},j.listenTo=function(B,G,ie){if(!B)return this;var ye=B._listenId||(B._listenId=b.uniqueId("l")),We=this._listeningTo||(this._listeningTo={}),Xe=N=We[ye];Xe||(this._listenId||(this._listenId=b.uniqueId("l")),Xe=N=We[ye]=new ee(this,B));var gt=fe(B,G,ie,this);if(N=void 0,gt)throw gt;return Xe.interop&&Xe.on(G,ie),this};var re=function(B,G,ie,ye){if(ie){var We=B[G]||(B[G]=[]),Xe=ye.context,gt=ye.ctx,kt=ye.listening;kt&&kt.count++,We.push({callback:ie,context:Xe,ctx:Xe||gt,listening:kt})}return B},fe=function(B,G,ie,ye){try{B.on(G,ie,ye)}catch(We){return We}};j.off=function(B,G,ie){return this._events?(this._events=K(i,this._events,B,G,{context:ie,listeners:this._listeners}),this):this},j.stopListening=function(B,G,ie){var ye=this._listeningTo;if(!ye)return this;for(var We=B?[B._listenId]:b.keys(ye),Xe=0;Xe<We.length;Xe++){var gt=ye[We[Xe]];if(!gt)break;gt.obj.off(G,ie,this),gt.interop&&gt.off(G,ie)}return b.isEmpty(ye)&&(this._listeningTo=void 0),this};var i=function(B,G,ie,ye){if(B){var kt,We=ye.context,Xe=ye.listeners,gt=0;if(!G&&!We&&!ie){for(kt=b.keys(Xe);gt<kt.length;gt++)Xe[kt[gt]].cleanup();return}for(kt=G?[G]:b.keys(B);gt<kt.length;gt++){var Vt=B[G=kt[gt]];if(!Vt)break;for(var sn=[],nn=0;nn<Vt.length;nn++){var un=Vt[nn];if(ie&&ie!==un.callback&&ie!==un.callback._callback||We&&We!==un.context)sn.push(un);else{var Bn=un.listening;Bn&&Bn.off(G,ie)}}sn.length?B[G]=sn:delete B[G]}return B}};j.once=function(B,G,ie){var ye=K(ue,{},B,G,this.off.bind(this));return"string"==typeof B&&null==ie&&(G=void 0),this.on(ye,G,ie)},j.listenToOnce=function(B,G,ie){var ye=K(ue,{},G,ie,this.stopListening.bind(this,B));return this.listenTo(B,ye)};var ue=function(B,G,ie,ye){if(ie){var We=B[G]=b.once(function(){ye(G,We),ie.apply(this,arguments)});We._callback=ie}return B};j.trigger=function(B){if(!this._events)return this;for(var G=Math.max(0,arguments.length-1),ie=Array(G),ye=0;ye<G;ye++)ie[ye]=arguments[ye+1];return K(ge,this._events,B,void 0,ie),this};var ge=function(B,G,ie,ye){if(B){var We=B[G],Xe=B.all;We&&Xe&&(Xe=Xe.slice()),We&&he(We,ye),Xe&&he(Xe,[G].concat(ye))}return B},he=function(B,G){var ie,ye=-1,We=B.length,Xe=G[0],gt=G[1],kt=G[2];switch(G.length){case 0:for(;++ye<We;)(ie=B[ye]).callback.call(ie.ctx);return;case 1:for(;++ye<We;)(ie=B[ye]).callback.call(ie.ctx,Xe);return;case 2:for(;++ye<We;)(ie=B[ye]).callback.call(ie.ctx,Xe,gt);return;case 3:for(;++ye<We;)(ie=B[ye]).callback.call(ie.ctx,Xe,gt,kt);return;default:for(;++ye<We;)(ie=B[ye]).callback.apply(ie.ctx,G);return}},ee=function(B,G){this.id=B._listenId,this.listener=B,this.obj=G,this.interop=!0,this.count=0,this._events=void 0};ee.prototype.on=j.on,ee.prototype.off=function(B,G){var ie;this.interop?(this._events=K(i,this._events,B,G,{context:void 0,listeners:void 0}),ie=!this._events):(this.count--,ie=0===this.count),ie&&this.cleanup()},ee.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},j.bind=j.on,j.unbind=j.off,b.extend(E,j);var ve=E.Model=function(B,G){var ie=B||{};G||(G={}),this.preinitialize.apply(this,arguments),this.cid=b.uniqueId(this.cidPrefix),this.attributes={},G.collection&&(this.collection=G.collection),G.parse&&(ie=this.parse(ie,G)||{});var ye=b.result(this,"defaults");ie=b.defaults(b.extend({},ye,ie),ye),this.set(ie,G),this.changed={},this.initialize.apply(this,arguments)};b.extend(ve.prototype,j,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(B){return b.clone(this.attributes)},sync:function(){return E.sync.apply(this,arguments)},get:function(B){return this.attributes[B]},escape:function(B){return b.escape(this.get(B))},has:function(B){return null!=this.get(B)},matches:function(B){return!!b.iteratee(B,this)(this.attributes)},set:function(B,G,ie){if(null==B)return this;var ye;if("object"==typeof B?(ye=B,ie=G):(ye={})[B]=G,ie||(ie={}),!this._validate(ye,ie))return!1;var We=ie.unset,Xe=ie.silent,gt=[],kt=this._changing;this._changing=!0,kt||(this._previousAttributes=b.clone(this.attributes),this.changed={});var Vt=this.attributes,sn=this.changed,nn=this._previousAttributes;for(var un in ye)b.isEqual(Vt[un],G=ye[un])||gt.push(un),b.isEqual(nn[un],G)?delete sn[un]:sn[un]=G,We?delete Vt[un]:Vt[un]=G;if(this.idAttribute in ye){var Bn=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Bn,ie)}if(!Xe){gt.length&&(this._pending=ie);for(var Dn=0;Dn<gt.length;Dn++)this.trigger("change:"+gt[Dn],this,Vt[gt[Dn]],ie)}if(kt)return this;if(!Xe)for(;this._pending;)ie=this._pending,this._pending=!1,this.trigger("change",this,ie);return this._pending=!1,this._changing=!1,this},unset:function(B,G){return this.set(B,void 0,b.extend({},G,{unset:!0}))},clear:function(B){var G={};for(var ie in this.attributes)G[ie]=void 0;return this.set(G,b.extend({},B,{unset:!0}))},hasChanged:function(B){return null==B?!b.isEmpty(this.changed):b.has(this.changed,B)},changedAttributes:function(B){if(!B)return!!this.hasChanged()&&b.clone(this.changed);var ye,G=this._changing?this._previousAttributes:this.attributes,ie={};for(var We in B){var Xe=B[We];b.isEqual(G[We],Xe)||(ie[We]=Xe,ye=!0)}return!!ye&&ie},previous:function(B){return null!=B&&this._previousAttributes?this._previousAttributes[B]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(B){B=b.extend({parse:!0},B);var G=this,ie=B.success;return B.success=function(ye){var We=B.parse?G.parse(ye,B):ye;if(!G.set(We,B))return!1;ie&&ie.call(B.context,G,ye,B),G.trigger("sync",G,ye,B)},zt(this,B),this.sync("read",this,B)},save:function(B,G,ie){var ye;null==B||"object"==typeof B?(ye=B,ie=G):(ye={})[B]=G;var We=(ie=b.extend({validate:!0,parse:!0},ie)).wait;if(ye&&!We){if(!this.set(ye,ie))return!1}else if(!this._validate(ye,ie))return!1;var Xe=this,gt=ie.success,kt=this.attributes;ie.success=function(nn){Xe.attributes=kt;var un=ie.parse?Xe.parse(nn,ie):nn;if(We&&(un=b.extend({},ye,un)),un&&!Xe.set(un,ie))return!1;gt&&gt.call(ie.context,Xe,nn,ie),Xe.trigger("sync",Xe,nn,ie)},zt(this,ie),ye&&We&&(this.attributes=b.extend({},kt,ye));var Vt=this.isNew()?"create":ie.patch?"patch":"update";"patch"===Vt&&!ie.attrs&&(ie.attrs=ye);var sn=this.sync(Vt,this,ie);return this.attributes=kt,sn},destroy:function(B){B=B?b.clone(B):{};var G=this,ie=B.success,ye=B.wait,We=function(){G.stopListening(),G.trigger("destroy",G,G.collection,B)};B.success=function(gt){ye&&We(),ie&&ie.call(B.context,G,gt,B),G.isNew()||G.trigger("sync",G,gt,B)};var Xe=!1;return this.isNew()?b.defer(B.success):(zt(this,B),Xe=this.sync("delete",this,B)),ye||We(),Xe},url:function(){var B=b.result(this,"urlRoot")||b.result(this.collection,"url")||Kt();if(this.isNew())return B;var G=this.get(this.idAttribute);return B.replace(/[^\/]$/,"$&/")+encodeURIComponent(G)},parse:function(B,G){return B},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(B){return this._validate({},b.extend({},B,{validate:!0}))},_validate:function(B,G){if(!G.validate||!this.validate)return!0;B=b.extend({},this.attributes,B);var ie=this.validationError=this.validate(B,G)||null;return!ie||(this.trigger("invalid",this,ie,b.extend(G,{validationError:ie})),!1)}});var Ie=E.Collection=function(B,G){G||(G={}),this.preinitialize.apply(this,arguments),G.model&&(this.model=G.model),void 0!==G.comparator&&(this.comparator=G.comparator),this._reset(),this.initialize.apply(this,arguments),B&&this.reset(B,b.extend({silent:!0},G))},De={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},He=function(B,G,ie){ie=Math.min(Math.max(ie,0),B.length);var Xe,ye=Array(B.length-ie),We=G.length;for(Xe=0;Xe<ye.length;Xe++)ye[Xe]=B[Xe+ie];for(Xe=0;Xe<We;Xe++)B[Xe+ie]=G[Xe];for(Xe=0;Xe<ye.length;Xe++)B[Xe+We+ie]=ye[Xe]};b.extend(Ie.prototype,j,{model:ve,preinitialize:function(){},initialize:function(){},toJSON:function(B){return this.map(function(G){return G.toJSON(B)})},sync:function(){return E.sync.apply(this,arguments)},add:function(B,G){return this.set(B,b.extend({merge:!1},G,C))},remove:function(B,G){G=b.extend({},G);var ie=!b.isArray(B);B=ie?[B]:B.slice();var ye=this._removeModels(B,G);return!G.silent&&ye.length&&(G.changes={added:[],merged:[],removed:ye},this.trigger("update",this,G)),ie?ye[0]:ye},set:function(B,G){if(null!=B){(G=b.extend({},De,G)).parse&&!this._isModel(B)&&(B=this.parse(B,G)||[]);var ie=!b.isArray(B);B=ie?[B]:B.slice();var ye=G.at;null!=ye&&(ye=+ye),ye>this.length&&(ye=this.length),ye<0&&(ye+=this.length+1);var Pn,Hn,We=[],Xe=[],gt=[],kt=[],Vt={},sn=G.add,nn=G.merge,un=G.remove,Bn=!1,Dn=this.comparator&&null==ye&&!1!==G.sort,Vr=b.isString(this.comparator)?this.comparator:null;for(Hn=0;Hn<B.length;Hn++){var Fn=this.get(Pn=B[Hn]);if(Fn){if(nn&&Pn!==Fn){var Wn=this._isModel(Pn)?Pn.attributes:Pn;G.parse&&(Wn=Fn.parse(Wn,G)),Fn.set(Wn,G),gt.push(Fn),Dn&&!Bn&&(Bn=Fn.hasChanged(Vr))}Vt[Fn.cid]||(Vt[Fn.cid]=!0,We.push(Fn)),B[Hn]=Fn}else sn&&(Pn=B[Hn]=this._prepareModel(Pn,G))&&(Xe.push(Pn),this._addReference(Pn,G),Vt[Pn.cid]=!0,We.push(Pn))}if(un){for(Hn=0;Hn<this.length;Hn++)Vt[(Pn=this.models[Hn]).cid]||kt.push(Pn);kt.length&&this._removeModels(kt,G)}var dr=!1;if(We.length&&!Dn&&sn&&un?(dr=this.length!==We.length||b.some(this.models,function(nr,Zn){return nr!==We[Zn]}),this.models.length=0,He(this.models,We,0),this.length=this.models.length):Xe.length&&(Dn&&(Bn=!0),He(this.models,Xe,null==ye?this.length:ye),this.length=this.models.length),Bn&&this.sort({silent:!0}),!G.silent){for(Hn=0;Hn<Xe.length;Hn++)null!=ye&&(G.index=ye+Hn),(Pn=Xe[Hn]).trigger("add",Pn,this,G);(Bn||dr)&&this.trigger("sort",this,G),(Xe.length||kt.length||gt.length)&&(G.changes={added:Xe,removed:kt,merged:gt},this.trigger("update",this,G))}return ie?B[0]:B}},reset:function(B,G){G=G?b.clone(G):{};for(var ie=0;ie<this.models.length;ie++)this._removeReference(this.models[ie],G);return G.previousModels=this.models,this._reset(),B=this.add(B,b.extend({silent:!0},G)),G.silent||this.trigger("reset",this,G),B},push:function(B,G){return this.add(B,b.extend({at:this.length},G))},pop:function(B){var G=this.at(this.length-1);return this.remove(G,B)},unshift:function(B,G){return this.add(B,b.extend({at:0},G))},shift:function(B){var G=this.at(0);return this.remove(G,B)},slice:function(){return k.apply(this.models,arguments)},get:function(B){if(null!=B)return this._byId[B]||this._byId[this.modelId(this._isModel(B)?B.attributes:B,B.idAttribute)]||B.cid&&this._byId[B.cid]},has:function(B){return null!=this.get(B)},at:function(B){return B<0&&(B+=this.length),this.models[B]},where:function(B,G){return this[G?"find":"filter"](B)},findWhere:function(B){return this.where(B,!0)},sort:function(B){var G=this.comparator;if(!G)throw new Error("Cannot sort a set without a comparator");B||(B={});var ie=G.length;return b.isFunction(G)&&(G=G.bind(this)),1===ie||b.isString(G)?this.models=this.sortBy(G):this.models.sort(G),B.silent||this.trigger("sort",this,B),this},pluck:function(B){return this.map(B+"")},fetch:function(B){var G=(B=b.extend({parse:!0},B)).success,ie=this;return B.success=function(ye){ie[B.reset?"reset":"set"](ye,B),G&&G.call(B.context,ie,ye,B),ie.trigger("sync",ie,ye,B)},zt(this,B),this.sync("read",this,B)},create:function(B,G){var ie=(G=G?b.clone(G):{}).wait;if(!(B=this._prepareModel(B,G)))return!1;ie||this.add(B,G);var ye=this,We=G.success;return G.success=function(Xe,gt,kt){ie&&ye.add(Xe,kt),We&&We.call(kt.context,Xe,gt,kt)},B.save(null,G),B},parse:function(B,G){return B},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(B,G){return B[G||this.model.prototype.idAttribute||"id"]},values:function(){return new Ke(this,tt)},keys:function(){return new Ke(this,it)},entries:function(){return new Ke(this,dt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(B,G){return this._isModel(B)?(B.collection||(B.collection=this),B):((G=G?b.clone(G):{}).collection=this,(ie=this.model.prototype?new this.model(B,G):this.model(B,G)).validationError?(this.trigger("invalid",this,ie.validationError,G),!1):ie);var ie},_removeModels:function(B,G){for(var ie=[],ye=0;ye<B.length;ye++){var We=this.get(B[ye]);if(We){var Xe=this.indexOf(We);this.models.splice(Xe,1),this.length--,delete this._byId[We.cid];var gt=this.modelId(We.attributes,We.idAttribute);null!=gt&&delete this._byId[gt],G.silent||(G.index=Xe,We.trigger("remove",We,this,G)),ie.push(We),this._removeReference(We,G)}}return ie},_isModel:function(B){return B instanceof ve},_addReference:function(B,G){this._byId[B.cid]=B;var ie=this.modelId(B.attributes,B.idAttribute);null!=ie&&(this._byId[ie]=B),B.on("all",this._onModelEvent,this)},_removeReference:function(B,G){delete this._byId[B.cid];var ie=this.modelId(B.attributes,B.idAttribute);null!=ie&&delete this._byId[ie],this===B.collection&&delete B.collection,B.off("all",this._onModelEvent,this)},_onModelEvent:function(B,G,ie,ye){if(G){if(("add"===B||"remove"===B)&&ie!==this)return;if("destroy"===B&&this.remove(G,ye),"changeId"===B){var We=this.modelId(G.previousAttributes(),G.idAttribute),Xe=this.modelId(G.attributes,G.idAttribute);null!=We&&delete this._byId[We],null!=Xe&&(this._byId[Xe]=G)}}this.trigger.apply(this,arguments)}});var Je="function"==typeof Symbol&&Symbol.iterator;Je&&(Ie.prototype[Je]=Ie.prototype.values);var Ke=function(B,G){this._collection=B,this._kind=G,this._index=0},tt=1,it=2,dt=3;Je&&(Ke.prototype[Je]=function(){return this}),Ke.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var G,B=this._collection.at(this._index);if(this._index++,this._kind===tt)G=B;else{var ie=this._collection.modelId(B.attributes,B.idAttribute);G=this._kind===it?ie:[ie,B]}return{value:G,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var wt=E.View=function(B){this.cid=b.uniqueId("view"),this.preinitialize.apply(this,arguments),b.extend(this,b.pick(B,qt)),this._ensureElement(),this.initialize.apply(this,arguments)},jt=/^(\S+)\s*(.*)$/,qt=["model","collection","el","id","attributes","className","tagName","events"];b.extend(wt.prototype,j,{tagName:"div",$:function(B){return this.$el.find(B)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(B){return this.undelegateEvents(),this._setElement(B),this.delegateEvents(),this},_setElement:function(B){this.$el=B instanceof E.$?B:E.$(B),this.el=this.$el[0]},delegateEvents:function(B){if(B||(B=b.result(this,"events")),!B)return this;for(var G in this.undelegateEvents(),B){var ie=B[G];if(b.isFunction(ie)||(ie=this[ie]),ie){var ye=G.match(jt);this.delegate(ye[1],ye[2],ie.bind(this))}}return this},delegate:function(B,G,ie){return this.$el.on(B+".delegateEvents"+this.cid,G,ie),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(B,G,ie){return this.$el.off(B+".delegateEvents"+this.cid,G,ie),this},_createElement:function(B){return document.createElement(B)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var B=b.extend({},b.result(this,"attributes"));this.id&&(B.id=b.result(this,"id")),this.className&&(B.class=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(B)}},_setAttributes:function(B){this.$el.attr(B)}});var Yn=function(B,G,ie,ye){b.each(ie,function(We,Xe){G[Xe]&&(B.prototype[Xe]=function(B,G,ie,ye){switch(G){case 1:return function(){return B[ie](this[ye])};case 2:return function(We){return B[ie](this[ye],We)};case 3:return function(We,Xe){return B[ie](this[ye],wr(We,this),Xe)};case 4:return function(We,Xe,gt){return B[ie](this[ye],wr(We,this),Xe,gt)};default:return function(){var We=k.call(arguments);return We.unshift(this[ye]),B[ie].apply(B,We)}}}(G,We,Xe,ye))})},wr=function(B,G){return b.isFunction(B)?B:b.isObject(B)&&!G._isModel(B)?Sr(B):b.isString(B)?function(ie){return ie.get(B)}:B},Sr=function(B){var G=b.matches(B);return function(ie){return G(ie.attributes)}};b.each([[Ie,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[ve,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(B){var G=B[0],ie=B[1],ye=B[2];G.mixin=function(We){var Xe=b.reduce(b.functions(We),function(gt,kt){return gt[kt]=0,gt},{});Yn(G,We,Xe,ye)},Yn(G,b,ie,ye)}),E.sync=function(B,G,ie){var ye=tr[B];b.defaults(ie||(ie={}),{emulateHTTP:E.emulateHTTP,emulateJSON:E.emulateJSON});var We={type:ye,dataType:"json"};if(ie.url||(We.url=b.result(G,"url")||Kt()),null==ie.data&&G&&("create"===B||"update"===B||"patch"===B)&&(We.contentType="application/json",We.data=JSON.stringify(ie.attrs||G.toJSON(ie))),ie.emulateJSON&&(We.contentType="application/x-www-form-urlencoded",We.data=We.data?{model:We.data}:{}),ie.emulateHTTP&&("PUT"===ye||"DELETE"===ye||"PATCH"===ye)){We.type="POST",ie.emulateJSON&&(We.data._method=ye);var Xe=ie.beforeSend;ie.beforeSend=function(Vt){if(Vt.setRequestHeader("X-HTTP-Method-Override",ye),Xe)return Xe.apply(this,arguments)}}"GET"!==We.type&&!ie.emulateJSON&&(We.processData=!1);var gt=ie.error;ie.error=function(Vt,sn,nn){ie.textStatus=sn,ie.errorThrown=nn,gt&&gt.call(ie.context,Vt,sn,nn)};var kt=ie.xhr=E.ajax(b.extend(We,ie));return G.trigger("request",G,kt,ie),kt};var tr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};E.ajax=function(){return E.$.ajax.apply(E.$,arguments)};var wn=E.Router=function(B){B||(B={}),this.preinitialize.apply(this,arguments),B.routes&&(this.routes=B.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},je=/\((.*?)\)/g,_e=/(\(\?)?:\w+/g,Ze=/\*\w+/g,ht=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(wn.prototype,j,{preinitialize:function(){},initialize:function(){},route:function(B,G,ie){b.isRegExp(B)||(B=this._routeToRegExp(B)),b.isFunction(G)&&(ie=G,G=""),ie||(ie=this[G]);var ye=this;return E.history.route(B,function(We){var Xe=ye._extractParameters(B,We);!1!==ye.execute(ie,Xe,G)&&(ye.trigger.apply(ye,["route:"+G].concat(Xe)),ye.trigger("route",G,Xe),E.history.trigger("route",ye,G,Xe))}),this},execute:function(B,G,ie){B&&B.apply(this,G)},navigate:function(B,G){return E.history.navigate(B,G),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var B,G=b.keys(this.routes);null!=(B=G.pop());)this.route(B,this.routes[B])}},_routeToRegExp:function(B){return B=B.replace(ht,"\\$&").replace(je,"(?:$1)?").replace(_e,function(G,ie){return ie?G:"([^/?]+)"}).replace(Ze,"([^?]*?)"),new RegExp("^"+B+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(B,G){var ie=B.exec(G).slice(1);return b.map(ie,function(ye,We){return We===ie.length-1?ye||null:ye?decodeURIComponent(ye):null})}});var bt=E.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},an=/^[#\/]|\s+$/g,yn=/^\/+|\/+$/g,Vn=/#.*$/;bt.started=!1,b.extend(bt.prototype,j,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(B){return decodeURI(B.replace(/%25/g,"%2525"))},getSearch:function(){var B=this.location.href.replace(/#.*/,"").match(/\?.+/);return B?B[0]:""},getHash:function(B){var G=(B||this).location.href.match(/#(.*)$/);return G?G[1]:""},getPath:function(){var B=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===B.charAt(0)?B.slice(1):B},getFragment:function(B){return null==B&&(B=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),B.replace(an,"")},start:function(B){if(bt.started)throw new Error("Backbone.history has already been started");if(bt.started=!0,this.options=b.extend({root:"/"},this.options,B),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(yn,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var G=this.root.slice(0,-1)||"/";return this.location.replace(G+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var ie=document.body,ye=ie.insertBefore(this.iframe,ie.firstChild).contentWindow;ye.document.open(),ye.document.close(),ye.location.hash="#"+this.fragment}var We=window.addEventListener||function(Xe,gt){return attachEvent("on"+Xe,gt)};if(this._usePushState?We("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?We("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var B=window.removeEventListener||function(G,ie){return detachEvent("on"+G,ie)};this._usePushState?B("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&B("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),bt.started=!1},route:function(B,G){this.handlers.unshift({route:B,callback:G})},checkUrl:function(B){var G=this.getFragment();if(G===this.fragment&&this.iframe&&(G=this.getHash(this.iframe.contentWindow)),G===this.fragment)return!1;this.iframe&&this.navigate(G),this.loadUrl()},loadUrl:function(B){return!!this.matchRoot()&&(B=this.fragment=this.getFragment(B),b.some(this.handlers,function(G){if(G.route.test(B))return G.callback(B),!0}))},navigate:function(B,G){if(!bt.started)return!1;(!G||!0===G)&&(G={trigger:!!G}),B=this.getFragment(B||"");var ie=this.root;(""===B||"?"===B.charAt(0))&&(ie=ie.slice(0,-1)||"/");var ye=ie+B;B=B.replace(Vn,"");var We=this.decodeFragment(B);if(this.fragment!==We){if(this.fragment=We,this._usePushState)this.history[G.replace?"replaceState":"pushState"]({},document.title,ye);else{if(!this._wantsHashChange)return this.location.assign(ye);if(this._updateHash(this.location,B,G.replace),this.iframe&&B!==this.getHash(this.iframe.contentWindow)){var Xe=this.iframe.contentWindow;G.replace||(Xe.document.open(),Xe.document.close()),this._updateHash(Xe.location,B,G.replace)}}if(G.trigger)return this.loadUrl(B)}},_updateHash:function(B,G,ie){if(ie){var ye=B.href.replace(/(javascript:|#).*$/,"");B.replace(ye+"#"+G)}else B.hash="#"+G}}),E.history=new bt;ve.extend=Ie.extend=wn.extend=wt.extend=bt.extend=function(B,G){var ye,ie=this;return ye=B&&b.has(B,"constructor")?B.constructor:function(){return ie.apply(this,arguments)},b.extend(ye,ie,G),ye.prototype=b.create(ie.prototype,B),ye.prototype.constructor=ye,ye.__super__=ie.prototype,ye};var Kt=function(){throw new Error('A "url" property or function must be specified')},zt=function(B,G){var ie=G.error;G.error=function(ye){ie&&ie.call(G.context,B,ye,G),B.trigger("error",B,ye,G)}};return E}(E,j,O,k)}.apply(Y,p))&&(P.exports=g)},59695:(P,Y,f)=>{P.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(P,Y,f)=>{"use strict";var p=f(45760),g=f(67365);P.exports={run:function S(M){var O="greedy"===M.graph().acyclicer?g(M,function k(j){return function(z){return j.edge(z).weight}}(M)):function E(M){var O=[],k={},j={};return p.forEach(M.nodes(),function z(N){p.has(j,N)||(j[N]=!0,k[N]=!0,p.forEach(M.outEdges(N),function(K){p.has(k,K.w)?O.push(K):z(K.w)}),delete k[N])}),O}(M);p.forEach(O,function(j){var z=M.edge(j);M.removeEdge(j),z.forwardName=j.name,z.reversed=!0,M.setEdge(j.w,j.v,z,p.uniqueId("rev"))})},undo:function b(M){p.forEach(M.edges(),function(O){var k=M.edge(O);if(k.reversed){M.removeEdge(O);var j=k.forwardName;delete k.reversed,delete k.forwardName,M.setEdge(O.w,O.v,k,j)}})}}},79999:(P,Y,f)=>{var p=f(45760),g=f(11510);function E(b,M,O,k,j,z){var K=j[M][z-1],re=g.addDummyNode(b,"border",{width:0,height:0,rank:z,borderType:M},O);j[M][z]=re,b.setParent(re,k),K&&b.setEdge(K,re,{weight:1})}P.exports=function S(b){p.forEach(b.children(),function M(O){var k=b.children(O),j=b.node(O);if(k.length&&p.forEach(k,M),p.has(j,"minRank")){j.borderLeft=[],j.borderRight=[];for(var z=j.minRank,N=j.maxRank+1;z<N;++z)E(b,"borderLeft","_bl",O,j,z),E(b,"borderRight","_br",O,j,z)}})}},83870:(P,Y,f)=>{"use strict";var p=f(45760);function E(z){p.forEach(z.nodes(),function(N){b(z.node(N))}),p.forEach(z.edges(),function(N){b(z.edge(N))})}function b(z){var N=z.width;z.width=z.height,z.height=N}function O(z){z.y=-z.y}function j(z){var N=z.x;z.x=z.y,z.y=N}P.exports={adjust:function g(z){var N=z.graph().rankdir.toLowerCase();("lr"===N||"rl"===N)&&E(z)},undo:function S(z){var N=z.graph().rankdir.toLowerCase();("bt"===N||"rl"===N)&&function M(z){p.forEach(z.nodes(),function(N){O(z.node(N))}),p.forEach(z.edges(),function(N){var K=z.edge(N);p.forEach(K.points,O),p.has(K,"y")&&O(K)})}(z),("lr"===N||"rl"===N)&&(function k(z){p.forEach(z.nodes(),function(N){j(z.node(N))}),p.forEach(z.edges(),function(N){var K=z.edge(N);p.forEach(K.points,j),p.has(K,"x")&&j(K)})}(z),E(z))}}},3226:P=>{function Y(){var g={};g._next=g._prev=g,this._sentinel=g}function f(g){g._prev._next=g._next,g._next._prev=g._prev,delete g._next,delete g._prev}function p(g,S){if("_next"!==g&&"_prev"!==g)return S}P.exports=Y,Y.prototype.dequeue=function(){var g=this._sentinel,S=g._prev;if(S!==g)return f(S),S},Y.prototype.enqueue=function(g){var S=this._sentinel;g._prev&&g._next&&f(g),g._next=S._next,S._next._prev=g,S._next=g,g._prev=S},Y.prototype.toString=function(){for(var g=[],S=this._sentinel,E=S._prev;E!==S;)g.push(JSON.stringify(E,p)),E=E._prev;return"["+g.join(", ")+"]"}},71914:(P,Y,f)=>{var p=f(45760),g=f(11510),S=f(36456).Graph;P.exports={debugOrdering:function E(b){var M=g.buildLayerMatrix(b),O=new S({compound:!0,multigraph:!0}).setGraph({});return p.forEach(b.nodes(),function(k){O.setNode(k,{label:k}),O.setParent(k,"layer"+b.node(k).rank)}),p.forEach(b.edges(),function(k){O.setEdge(k.v,k.w,{},k.name)}),p.forEach(M,function(k,j){O.setNode("layer"+j,{rank:"same"}),p.reduce(k,function(N,K){return O.setEdge(N,K,{style:"invis"}),K})}),O}}},36456:(P,Y,f)=>{var p;try{p=f(85510)}catch(g){}p||(p=window.graphlib),P.exports=p},67365:(P,Y,f)=>{var p=f(45760),g=f(36456).Graph,S=f(3226);P.exports=function b(z,N){if(z.nodeCount()<=1)return[];var K=function k(z,N){var K=new g,re=0,fe=0;p.forEach(z.nodes(),function(ge){K.setNode(ge,{v:ge,in:0,out:0})}),p.forEach(z.edges(),function(ge){var he=K.edge(ge.v,ge.w)||0,ee=N(ge);K.setEdge(ge.v,ge.w,he+ee),fe=Math.max(fe,K.node(ge.v).out+=ee),re=Math.max(re,K.node(ge.w).in+=ee)});var i=p.range(fe+re+3).map(function(){return new S}),ue=re+1;return p.forEach(K.nodes(),function(ge){j(i,ue,K.node(ge))}),{graph:K,buckets:i,zeroIdx:ue}}(z,N||E),re=function M(z,N,K){for(var ue,re=[],fe=N[N.length-1],i=N[0];z.nodeCount();){for(;ue=i.dequeue();)O(z,N,K,ue);for(;ue=fe.dequeue();)O(z,N,K,ue);if(z.nodeCount())for(var ge=N.length-2;ge>0;--ge)if(ue=N[ge].dequeue()){re=re.concat(O(z,N,K,ue,!0));break}}return re}(K.graph,K.buckets,K.zeroIdx);return p.flatten(p.map(re,function(fe){return z.outEdges(fe.v,fe.w)}),!0)};var E=p.constant(1);function O(z,N,K,re,fe){var i=fe?[]:void 0;return p.forEach(z.inEdges(re.v),function(ue){var ge=z.edge(ue),he=z.node(ue.v);fe&&i.push({v:ue.v,w:ue.w}),he.out-=ge,j(N,K,he)}),p.forEach(z.outEdges(re.v),function(ue){var ge=z.edge(ue),ee=z.node(ue.w);ee.in-=ge,j(N,K,ee)}),z.removeNode(re.v),i}function j(z,N,K){K.out?K.in?z[K.out-K.in+N].enqueue(K):z[z.length-1].enqueue(K):z[0].enqueue(K)}},14850:(P,Y,f)=>{"use strict";var p=f(45760),g=f(12234),S=f(91496),E=f(94124),b=f(11510).normalizeRanks,M=f(60162),O=f(11510).removeEmptyRanks,k=f(1230),j=f(79999),z=f(83870),N=f(32974),K=f(78226),re=f(11510),fe=f(36456).Graph;P.exports=function i(je,_e){var Ze=_e&&_e.debugTiming?re.time:re.notime;Ze("layout",function(){var ht=Ze("  buildLayoutGraph",function(){return function Ke(je){var _e=new fe({multigraph:!0,compound:!0}),Ze=wn(je.graph());return _e.setGraph(p.merge({},ee,tr(Ze,he),p.pick(Ze,ve))),p.forEach(je.nodes(),function(ht){var bt=wn(je.node(ht));_e.setNode(ht,p.defaults(tr(bt,Ie),De)),_e.setParent(ht,je.parent(ht))}),p.forEach(je.edges(),function(ht){var bt=wn(je.edge(ht));_e.setEdge(ht,p.merge({},He,tr(bt,C),p.pick(bt,Je)))}),_e}(je)});Ze("  runLayout",function(){!function ue(je,_e){_e("    makeSpaceForEdgeLabels",function(){!function tt(je){var _e=je.graph();_e.ranksep/=2,p.forEach(je.edges(),function(Ze){var ht=je.edge(Ze);ht.minlen*=2,"c"!==ht.labelpos.toLowerCase()&&("TB"===_e.rankdir||"BT"===_e.rankdir?ht.width+=ht.labeloffset:ht.height+=ht.labeloffset)})}(je)}),_e("    removeSelfEdges",function(){!function Sr(je){p.forEach(je.edges(),function(_e){if(_e.v===_e.w){var Ze=je.node(_e.v);Ze.selfEdges||(Ze.selfEdges=[]),Ze.selfEdges.push({e:_e,label:je.edge(_e)}),je.removeEdge(_e)}})}(je)}),_e("    acyclic",function(){g.run(je)}),_e("    nestingGraph.run",function(){k.run(je)}),_e("    rank",function(){E(re.asNonCompoundGraph(je))}),_e("    injectEdgeLabelProxies",function(){!function it(je){p.forEach(je.edges(),function(_e){var Ze=je.edge(_e);if(Ze.width&&Ze.height){var ht=je.node(_e.v),bt=je.node(_e.w);re.addDummyNode(je,"edge-proxy",{rank:(bt.rank-ht.rank)/2+ht.rank,e:_e},"_ep")}})}(je)}),_e("    removeEmptyRanks",function(){O(je)}),_e("    nestingGraph.cleanup",function(){k.cleanup(je)}),_e("    normalizeRanks",function(){b(je)}),_e("    assignRankMinMax",function(){!function dt(je){var _e=0;p.forEach(je.nodes(),function(Ze){var ht=je.node(Ze);ht.borderTop&&(ht.minRank=je.node(ht.borderTop).rank,ht.maxRank=je.node(ht.borderBottom).rank,_e=p.max(_e,ht.maxRank))}),je.graph().maxRank=_e}(je)}),_e("    removeEdgeLabelProxies",function(){!function wt(je){p.forEach(je.nodes(),function(_e){var Ze=je.node(_e);"edge-proxy"===Ze.dummy&&(je.edge(Ze.e).labelRank=Ze.rank,je.removeNode(_e))})}(je)}),_e("    normalize.run",function(){S.run(je)}),_e("    parentDummyChains",function(){M(je)}),_e("    addBorderSegments",function(){j(je)}),_e("    order",function(){N(je)}),_e("    insertSelfEdges",function(){!function Ne(je){var _e=re.buildLayerMatrix(je);p.forEach(_e,function(Ze){var ht=0;p.forEach(Ze,function(bt,an){var yn=je.node(bt);yn.order=an+ht,p.forEach(yn.selfEdges,function(Vn){re.addDummyNode(je,"selfedge",{width:Vn.label.width,height:Vn.label.height,rank:yn.rank,order:an+ ++ht,e:Vn.e,label:Vn.label},"_se")}),delete yn.selfEdges})})}(je)}),_e("    adjustCoordinateSystem",function(){z.adjust(je)}),_e("    position",function(){K(je)}),_e("    positionSelfEdges",function(){!function vn(je){p.forEach(je.nodes(),function(_e){var Ze=je.node(_e);if("selfedge"===Ze.dummy){var ht=je.node(Ze.e.v),bt=ht.x+ht.width/2,an=ht.y,yn=Ze.x-bt,Vn=ht.height/2;je.setEdge(Ze.e,Ze.label),je.removeNode(_e),Ze.label.points=[{x:bt+2*yn/3,y:an-Vn},{x:bt+5*yn/6,y:an-Vn},{x:bt+yn,y:an},{x:bt+5*yn/6,y:an+Vn},{x:bt+2*yn/3,y:an+Vn}],Ze.label.x=Ze.x,Ze.label.y=Ze.y}})}(je)}),_e("    removeBorderNodes",function(){!function wr(je){p.forEach(je.nodes(),function(_e){if(je.children(_e).length){var Ze=je.node(_e),ht=je.node(Ze.borderTop),bt=je.node(Ze.borderBottom),an=je.node(p.last(Ze.borderLeft)),yn=je.node(p.last(Ze.borderRight));Ze.width=Math.abs(yn.x-an.x),Ze.height=Math.abs(bt.y-ht.y),Ze.x=an.x+Ze.width/2,Ze.y=ht.y+Ze.height/2}}),p.forEach(je.nodes(),function(_e){"border"===je.node(_e).dummy&&je.removeNode(_e)})}(je)}),_e("    normalize.undo",function(){S.undo(je)}),_e("    fixupEdgeLabelCoords",function(){!function Mt(je){p.forEach(je.edges(),function(_e){var Ze=je.edge(_e);if(p.has(Ze,"x"))switch(("l"===Ze.labelpos||"r"===Ze.labelpos)&&(Ze.width-=Ze.labeloffset),Ze.labelpos){case"l":Ze.x-=Ze.width/2+Ze.labeloffset;break;case"r":Ze.x+=Ze.width/2+Ze.labeloffset}})}(je)}),_e("    undoCoordinateSystem",function(){z.undo(je)}),_e("    translateGraph",function(){!function jt(je){var _e=Number.POSITIVE_INFINITY,Ze=0,ht=Number.POSITIVE_INFINITY,bt=0,an=je.graph(),yn=an.marginx||0,Vn=an.marginy||0;function si(Kt){var zt=Kt.x,B=Kt.y,G=Kt.width,ie=Kt.height;_e=Math.min(_e,zt-G/2),Ze=Math.max(Ze,zt+G/2),ht=Math.min(ht,B-ie/2),bt=Math.max(bt,B+ie/2)}p.forEach(je.nodes(),function(Kt){si(je.node(Kt))}),p.forEach(je.edges(),function(Kt){var zt=je.edge(Kt);p.has(zt,"x")&&si(zt)}),_e-=yn,ht-=Vn,p.forEach(je.nodes(),function(Kt){var zt=je.node(Kt);zt.x-=_e,zt.y-=ht}),p.forEach(je.edges(),function(Kt){var zt=je.edge(Kt);p.forEach(zt.points,function(B){B.x-=_e,B.y-=ht}),p.has(zt,"x")&&(zt.x-=_e),p.has(zt,"y")&&(zt.y-=ht)}),an.width=Ze-_e+yn,an.height=bt-ht+Vn}(je)}),_e("    assignNodeIntersects",function(){!function qt(je){p.forEach(je.edges(),function(_e){var an,yn,Ze=je.edge(_e),ht=je.node(_e.v),bt=je.node(_e.w);Ze.points?(an=Ze.points[0],yn=Ze.points[Ze.points.length-1]):(Ze.points=[],an=bt,yn=ht),Ze.points.unshift(re.intersectRect(ht,an)),Ze.points.push(re.intersectRect(bt,yn))})}(je)}),_e("    reversePoints",function(){!function Yn(je){p.forEach(je.edges(),function(_e){var Ze=je.edge(_e);Ze.reversed&&Ze.points.reverse()})}(je)}),_e("    acyclic.undo",function(){g.undo(je)})}(ht,Ze)}),Ze("  updateInputGraph",function(){!function ge(je,_e){p.forEach(je.nodes(),function(Ze){var ht=je.node(Ze),bt=_e.node(Ze);ht&&(ht.x=bt.x,ht.y=bt.y,_e.children(Ze).length&&(ht.width=bt.width,ht.height=bt.height))}),p.forEach(je.edges(),function(Ze){var ht=je.edge(Ze),bt=_e.edge(Ze);ht.points=bt.points,p.has(bt,"x")&&(ht.x=bt.x,ht.y=bt.y)}),je.graph().width=_e.graph().width,je.graph().height=_e.graph().height}(je,ht)})})};var he=["nodesep","edgesep","ranksep","marginx","marginy"],ee={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ve=["acyclicer","ranker","rankdir","align"],Ie=["width","height"],De={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],He={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Je=["labelpos"];function tr(je,_e){return p.mapValues(p.pick(je,_e),Number)}function wn(je){var _e={};return p.forEach(je,function(Ze,ht){_e[ht.toLowerCase()]=Ze}),_e}},45760:(P,Y,f)=>{var p;try{p={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(g){}p||(p=window._),P.exports=p},1230:(P,Y,f)=>{var p=f(45760),g=f(11510);function E(k,j,z,N,K,re,fe){var i=k.children(fe);if(i.length){var ue=g.addBorderNode(k,"_bt"),ge=g.addBorderNode(k,"_bb"),he=k.node(fe);k.setParent(ue,fe),he.borderTop=ue,k.setParent(ge,fe),he.borderBottom=ge,p.forEach(i,function(ee){E(k,j,z,N,K,re,ee);var ve=k.node(ee),Ie=ve.borderTop?ve.borderTop:ee,De=ve.borderBottom?ve.borderBottom:ee,C=ve.borderTop?N:2*N,He=Ie!==De?1:K-re[fe]+1;k.setEdge(ue,Ie,{weight:C,minlen:He,nestingEdge:!0}),k.setEdge(De,ge,{weight:C,minlen:He,nestingEdge:!0})}),k.parent(fe)||k.setEdge(j,ue,{weight:0,minlen:K+re[fe]})}else fe!==j&&k.setEdge(j,fe,{weight:0,minlen:z})}P.exports={run:function S(k){var j=g.addDummyNode(k,"root",{},"_root"),z=function b(k){var j={};function z(N,K){var re=k.children(N);re&&re.length&&p.forEach(re,function(fe){z(fe,K+1)}),j[N]=K}return p.forEach(k.children(),function(N){z(N,1)}),j}(k),N=p.max(p.values(z))-1,K=2*N+1;k.graph().nestingRoot=j,p.forEach(k.edges(),function(fe){k.edge(fe).minlen*=K});var re=function M(k){return p.reduce(k.edges(),function(j,z){return j+k.edge(z).weight},0)}(k)+1;p.forEach(k.children(),function(fe){E(k,j,K,re,N,z,fe)}),k.graph().nodeRankFactor=K},cleanup:function O(k){var j=k.graph();k.removeNode(j.nestingRoot),delete j.nestingRoot,p.forEach(k.edges(),function(z){k.edge(z).nestingEdge&&k.removeEdge(z)})}}},91496:(P,Y,f)=>{"use strict";var p=f(45760),g=f(11510);P.exports={run:function S(M){M.graph().dummyChains=[],p.forEach(M.edges(),function(O){!function E(M,O){var k=O.v,j=M.node(k).rank,z=O.w,N=M.node(z).rank,K=O.name,re=M.edge(O),fe=re.labelRank;if(N!==j+1){var i,ue,ge;for(M.removeEdge(O),ge=0,++j;j<N;++ge,++j)re.points=[],i=g.addDummyNode(M,"edge",ue={width:0,height:0,edgeLabel:re,edgeObj:O,rank:j},"_d"),j===fe&&(ue.width=re.width,ue.height=re.height,ue.dummy="edge-label",ue.labelpos=re.labelpos),M.setEdge(k,i,{weight:re.weight},K),0===ge&&M.graph().dummyChains.push(i),k=i;M.setEdge(k,z,{weight:re.weight},K)}}(M,O)})},undo:function b(M){p.forEach(M.graph().dummyChains,function(O){var z,k=M.node(O),j=k.edgeLabel;for(M.setEdge(k.edgeObj,j);k.dummy;)z=M.successors(O)[0],M.removeNode(O),j.points.push({x:k.x,y:k.y}),"edge-label"===k.dummy&&(j.x=k.x,j.y=k.y,j.width=k.width,j.height=k.height),k=M.node(O=z)})}}},33034:(P,Y,f)=>{var p=f(45760);P.exports=function g(S,E,b){var O,M={};p.forEach(b,function(k){for(var z,N,j=S.parent(k);j;){if((z=S.parent(j))?(N=M[z],M[z]=j):(N=O,O=j),N&&N!==j)return void E.setEdge(N,j);j=z}})}},81323:(P,Y,f)=>{var p=f(45760);P.exports=function g(S,E){return p.map(E,function(b){var M=S.inEdges(b);if(M.length){var O=p.reduce(M,function(k,j){var z=S.edge(j),N=S.node(j.v);return{sum:k.sum+z.weight*N.order,weight:k.weight+z.weight}},{sum:0,weight:0});return{v:b,barycenter:O.sum/O.weight,weight:O.weight}}return{v:b}})}},1686:(P,Y,f)=>{var p=f(45760),g=f(36456).Graph;P.exports=function S(b,M,O){var k=function E(b){for(var M;b.hasNode(M=p.uniqueId("_root")););return M}(b),j=new g({compound:!0}).setGraph({root:k}).setDefaultNodeLabel(function(z){return b.node(z)});return p.forEach(b.nodes(),function(z){var N=b.node(z),K=b.parent(z);(N.rank===M||N.minRank<=M&&M<=N.maxRank)&&(j.setNode(z),j.setParent(z,K||k),p.forEach(b[O](z),function(re){var fe=re.v===z?re.w:re.v,i=j.edge(fe,z),ue=p.isUndefined(i)?0:i.weight;j.setEdge(fe,z,{weight:b.edge(re).weight+ue})}),p.has(N,"minRank")&&j.setNode(z,{borderLeft:N.borderLeft[M],borderRight:N.borderRight[M]}))}),j}},18796:(P,Y,f)=>{"use strict";var p=f(45760);function S(E,b,M){for(var O=p.zipObject(M,p.map(M,function(re,fe){return fe})),k=p.flatten(p.map(b,function(re){return p.sortBy(p.map(E.outEdges(re),function(fe){return{pos:O[fe.w],weight:E.edge(fe).weight}}),"pos")}),!0),j=1;j<M.length;)j<<=1;var z=2*j-1;j-=1;var N=p.map(new Array(z),function(){return 0}),K=0;return p.forEach(k.forEach(function(re){var fe=re.pos+j;N[fe]+=re.weight;for(var i=0;fe>0;)fe%2&&(i+=N[fe+1]),N[fe=fe-1>>1]+=re.weight;K+=re.weight*i})),K}P.exports=function g(E,b){for(var M=0,O=1;O<b.length;++O)M+=S(E,b[O-1],b[O]);return M}},32974:(P,Y,f)=>{"use strict";var p=f(45760),g=f(49402),S=f(18796),E=f(61057),b=f(1686),M=f(33034),O=f(36456).Graph,k=f(11510);function z(re,fe,i){return p.map(fe,function(ue){return b(re,ue,i)})}function N(re,fe){var i=new O;p.forEach(re,function(ue){var ge=ue.graph().root,he=E(ue,ge,i,fe);p.forEach(he.vs,function(ee,ve){ue.node(ee).order=ve}),M(ue,i,he.vs)})}function K(re,fe){p.forEach(fe,function(i){p.forEach(i,function(ue,ge){re.node(ue).order=ge})})}P.exports=function j(re){var fe=k.maxRank(re),i=z(re,p.range(1,fe+1),"inEdges"),ue=z(re,p.range(fe-1,-1,-1),"outEdges"),ge=g(re);K(re,ge);for(var ee,he=Number.POSITIVE_INFINITY,ve=0,Ie=0;Ie<4;++ve,++Ie){N(ve%2?i:ue,ve%4>=2),ge=k.buildLayerMatrix(re);var De=S(re,ge);De<he&&(Ie=0,ee=p.cloneDeep(ge),he=De)}K(re,ee)}},49402:(P,Y,f)=>{"use strict";var p=f(45760);P.exports=function g(S){var E={},b=p.filter(S.nodes(),function(z){return!S.children(z).length}),M=p.max(p.map(b,function(z){return S.node(z).rank})),O=p.map(p.range(M+1),function(){return[]}),j=p.sortBy(b,function(z){return S.node(z).rank});return p.forEach(j,function k(z){if(!p.has(E,z)){E[z]=!0;var N=S.node(z);O[N.rank].push(z),p.forEach(S.successors(z),k)}}),O}},83826:(P,Y,f)=>{"use strict";var p=f(45760);P.exports=function g(b,M){var O={};return p.forEach(b,function(j,z){var N=O[j.v]={indegree:0,in:[],out:[],vs:[j.v],i:z};p.isUndefined(j.barycenter)||(N.barycenter=j.barycenter,N.weight=j.weight)}),p.forEach(M.edges(),function(j){var z=O[j.v],N=O[j.w];!p.isUndefined(z)&&!p.isUndefined(N)&&(N.indegree++,z.out.push(O[j.w]))}),function S(b){var M=[];function O(z){return function(N){N.merged||(p.isUndefined(N.barycenter)||p.isUndefined(z.barycenter)||N.barycenter>=z.barycenter)&&function E(b,M){var O=0,k=0;b.weight&&(O+=b.barycenter*b.weight,k+=b.weight),M.weight&&(O+=M.barycenter*M.weight,k+=M.weight),b.vs=M.vs.concat(b.vs),b.barycenter=O/k,b.weight=k,b.i=Math.min(M.i,b.i),M.merged=!0}(z,N)}}function k(z){return function(N){N.in.push(z),0==--N.indegree&&b.push(N)}}for(;b.length;){var j=b.pop();M.push(j),p.forEach(j.in.reverse(),O(j)),p.forEach(j.out,k(j))}return p.map(p.filter(M,function(z){return!z.merged}),function(z){return p.pick(z,["vs","i","barycenter","weight"])})}(p.filter(O,function(j){return!j.indegree}))}},61057:(P,Y,f)=>{var p=f(45760),g=f(81323),S=f(83826),E=f(93803);P.exports=function b(k,j,z,N){var K=k.children(j),re=k.node(j),fe=re?re.borderLeft:void 0,i=re?re.borderRight:void 0,ue={};fe&&(K=p.filter(K,function(De){return De!==fe&&De!==i}));var ge=g(k,K);p.forEach(ge,function(De){if(k.children(De.v).length){var C=b(k,De.v,z,N);ue[De.v]=C,p.has(C,"barycenter")&&function O(k,j){p.isUndefined(k.barycenter)?(k.barycenter=j.barycenter,k.weight=j.weight):(k.barycenter=(k.barycenter*k.weight+j.barycenter*j.weight)/(k.weight+j.weight),k.weight+=j.weight)}(De,C)}});var he=S(ge,z);!function M(k,j){p.forEach(k,function(z){z.vs=p.flatten(z.vs.map(function(N){return j[N]?j[N].vs:N}),!0)})}(he,ue);var ee=E(he,N);if(fe&&(ee.vs=p.flatten([fe,ee.vs,i],!0),k.predecessors(fe).length)){var ve=k.node(k.predecessors(fe)[0]),Ie=k.node(k.predecessors(i)[0]);p.has(ee,"barycenter")||(ee.barycenter=0,ee.weight=0),ee.barycenter=(ee.barycenter*ee.weight+ve.order+Ie.order)/(ee.weight+2),ee.weight+=2}return ee}},93803:(P,Y,f)=>{var p=f(45760),g=f(11510);function E(M,O,k){for(var j;O.length&&(j=p.last(O)).i<=k;)O.pop(),M.push(j.vs),k++;return k}P.exports=function S(M,O){var k=g.partition(M,function(ue){return p.has(ue,"barycenter")}),j=k.lhs,z=p.sortBy(k.rhs,function(ue){return-ue.i}),N=[],K=0,re=0,fe=0;j.sort(function b(M){return function(O,k){return O.barycenter<k.barycenter?-1:O.barycenter>k.barycenter?1:M?k.i-O.i:O.i-k.i}}(!!O)),fe=E(N,z,fe),p.forEach(j,function(ue){fe+=ue.vs.length,N.push(ue.vs),K+=ue.barycenter*ue.weight,re+=ue.weight,fe=E(N,z,fe)});var i={vs:p.flatten(N,!0)};return re&&(i.barycenter=K/re,i.weight=re),i}},60162:(P,Y,f)=>{var p=f(45760);P.exports=function g(b){var M=function E(b){var M={},O=0;return p.forEach(b.children(),function k(j){var z=O;p.forEach(b.children(j),k),M[j]={low:z,lim:O++}}),M}(b);p.forEach(b.graph().dummyChains,function(O){for(var k=b.node(O),j=k.edgeObj,z=function S(b,M,O,k){var re,fe,j=[],z=[],N=Math.min(M[O].low,M[k].low),K=Math.max(M[O].lim,M[k].lim);re=O;do{re=b.parent(re),j.push(re)}while(re&&(M[re].low>N||K>M[re].lim));for(fe=re,re=k;(re=b.parent(re))!==fe;)z.push(re);return{path:j.concat(z.reverse()),lca:fe}}(b,M,j.v,j.w),N=z.path,K=z.lca,re=0,fe=N[re],i=!0;O!==j.w;){if(k=b.node(O),i){for(;(fe=N[re])!==K&&b.node(fe).maxRank<k.rank;)re++;fe===K&&(i=!1)}if(!i){for(;re<N.length-1&&b.node(fe=N[re+1]).minRank<=k.rank;)re++;fe=N[re]}b.setParent(O,fe),O=b.successors(O)[0]}})}},54058:(P,Y,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,S=f(11510);function E(he,ee){var ve={};return p.reduce(ee,function Ie(De,C){var He=0,Je=0,Ke=De.length,tt=p.last(C);return p.forEach(C,function(it,dt){var wt=function M(he,ee){if(he.node(ee).dummy)return p.find(he.predecessors(ee),function(ve){return he.node(ve).dummy})}(he,it),jt=wt?he.node(wt).order:Ke;(wt||it===tt)&&(p.forEach(C.slice(Je,dt+1),function(qt){p.forEach(he.predecessors(qt),function(Mt){var Yn=he.node(Mt),wr=Yn.order;(wr<He||jt<wr)&&(!Yn.dummy||!he.node(qt).dummy)&&O(ve,Mt,qt)})}),Je=dt+1,He=jt)}),C}),ve}function b(he,ee){var ve={};function Ie(C,He,Je,Ke,tt){var it;p.forEach(p.range(He,Je),function(dt){he.node(it=C[dt]).dummy&&p.forEach(he.predecessors(it),function(wt){var jt=he.node(wt);jt.dummy&&(jt.order<Ke||jt.order>tt)&&O(ve,wt,it)})})}return p.reduce(ee,function De(C,He){var Ke,Je=-1,tt=0;return p.forEach(He,function(it,dt){if("border"===he.node(it).dummy){var wt=he.predecessors(it);wt.length&&(Ke=he.node(wt[0]).order,Ie(He,tt,dt,Je,Ke),tt=dt,Je=Ke)}Ie(He,tt,He.length,Ke,C.length)}),He}),ve}function O(he,ee,ve){if(ee>ve){var Ie=ee;ee=ve,ve=Ie}var De=he[ee];De||(he[ee]=De={}),De[ve]=!0}function k(he,ee,ve){if(ee>ve){var Ie=ee;ee=ve,ve=Ie}return p.has(he[ee],ve)}function j(he,ee,ve,Ie){var De={},C={},He={};return p.forEach(ee,function(Je){p.forEach(Je,function(Ke,tt){De[Ke]=Ke,C[Ke]=Ke,He[Ke]=tt})}),p.forEach(ee,function(Je){var Ke=-1;p.forEach(Je,function(tt){var it=Ie(tt);if(it.length)for(var dt=((it=p.sortBy(it,function(Mt){return He[Mt]})).length-1)/2,wt=Math.floor(dt),jt=Math.ceil(dt);wt<=jt;++wt){var qt=it[wt];C[tt]===tt&&Ke<He[qt]&&!k(ve,tt,qt)&&(C[qt]=tt,C[tt]=De[tt]=De[qt],Ke=He[qt])}})}),{root:De,align:C}}function z(he,ee,ve,Ie,De){var C={},He=function N(he,ee,ve,Ie){var De=new g,C=he.graph(),He=function ue(he,ee,ve){return function(Ie,De,C){var tt,He=Ie.node(De),Je=Ie.node(C),Ke=0;if(Ke+=He.width/2,p.has(He,"labelpos"))switch(He.labelpos.toLowerCase()){case"l":tt=-He.width/2;break;case"r":tt=He.width/2}if(tt&&(Ke+=ve?tt:-tt),tt=0,Ke+=(He.dummy?ee:he)/2,Ke+=(Je.dummy?ee:he)/2,Ke+=Je.width/2,p.has(Je,"labelpos"))switch(Je.labelpos.toLowerCase()){case"l":tt=Je.width/2;break;case"r":tt=-Je.width/2}return tt&&(Ke+=ve?tt:-tt),tt=0,Ke}}(C.nodesep,C.edgesep,Ie);return p.forEach(ee,function(Je){var Ke;p.forEach(Je,function(tt){var it=ve[tt];if(De.setNode(it),Ke){var dt=ve[Ke],wt=De.edge(dt,it);De.setEdge(dt,it,Math.max(He(he,tt,Ke),wt||0))}Ke=tt})}),De}(he,ee,ve,De),Je=De?"borderLeft":"borderRight";function Ke(dt,wt){for(var jt=He.nodes(),qt=jt.pop(),Mt={};qt;)Mt[qt]?dt(qt):(Mt[qt]=!0,jt.push(qt),jt=jt.concat(wt(qt))),qt=jt.pop()}return Ke(function tt(dt){C[dt]=He.inEdges(dt).reduce(function(wt,jt){return Math.max(wt,C[jt.v]+He.edge(jt))},0)},He.predecessors.bind(He)),Ke(function it(dt){var wt=He.outEdges(dt).reduce(function(qt,Mt){return Math.min(qt,C[Mt.w]-He.edge(Mt))},Number.POSITIVE_INFINITY),jt=he.node(dt);wt!==Number.POSITIVE_INFINITY&&jt.borderType!==Je&&(C[dt]=Math.max(C[dt],wt))},He.successors.bind(He)),p.forEach(Ie,function(dt){C[dt]=C[ve[dt]]}),C}function K(he,ee){return p.minBy(p.values(ee),function(ve){var Ie=Number.NEGATIVE_INFINITY,De=Number.POSITIVE_INFINITY;return p.forIn(ve,function(C,He){var Je=function ge(he,ee){return he.node(ee).width}(he,He)/2;Ie=Math.max(C+Je,Ie),De=Math.min(C-Je,De)}),Ie-De})}function re(he,ee){var ve=p.values(ee),Ie=p.min(ve),De=p.max(ve);p.forEach(["u","d"],function(C){p.forEach(["l","r"],function(He){var tt,Je=C+He,Ke=he[Je];if(Ke!==ee){var it=p.values(Ke);(tt="l"===He?Ie-p.min(it):De-p.max(it))&&(he[Je]=p.mapValues(Ke,function(dt){return dt+tt}))}})})}function fe(he,ee){return p.mapValues(he.ul,function(ve,Ie){if(ee)return he[ee.toLowerCase()][Ie];var De=p.sortBy(p.map(he,Ie));return(De[1]+De[2])/2})}P.exports={positionX:function i(he){var De,ee=S.buildLayerMatrix(he),ve=p.merge(E(he,ee),b(he,ee)),Ie={};p.forEach(["u","d"],function(He){De="u"===He?ee:p.values(ee).reverse(),p.forEach(["l","r"],function(Je){"r"===Je&&(De=p.map(De,function(dt){return p.values(dt).reverse()}));var Ke=("u"===He?he.predecessors:he.successors).bind(he),tt=j(0,De,ve,Ke),it=z(he,De,tt.root,tt.align,"r"===Je);"r"===Je&&(it=p.mapValues(it,function(dt){return-dt})),Ie[He+Je]=it})});var C=K(he,Ie);return re(Ie,C),fe(Ie,he.graph().align)},findType1Conflicts:E,findType2Conflicts:b,addConflict:O,hasConflict:k,verticalAlignment:j,horizontalCompaction:z,alignCoordinates:re,findSmallestWidthAlignment:K,balance:fe}},78226:(P,Y,f)=>{"use strict";var p=f(45760),g=f(11510),S=f(54058).positionX;P.exports=function E(M){(function b(M){var O=g.buildLayerMatrix(M),k=M.graph().ranksep,j=0;p.forEach(O,function(z){var N=p.max(p.map(z,function(K){return M.node(K).height}));p.forEach(z,function(K){M.node(K).y=j+N/2}),j+=N+k})})(M=g.asNonCompoundGraph(M)),p.forEach(S(M),function(O,k){M.node(k).x=O})}},96632:(P,Y,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,S=f(1916).slack;function b(k,j){return p.forEach(k.nodes(),function z(N){p.forEach(j.nodeEdges(N),function(K){var re=K.v,fe=N===re?K.w:re;!k.hasNode(fe)&&!S(j,K)&&(k.setNode(fe,{}),k.setEdge(N,fe,{}),z(fe))})}),k.nodeCount()}function M(k,j){return p.minBy(j.edges(),function(z){if(k.hasNode(z.v)!==k.hasNode(z.w))return S(j,z)})}function O(k,j,z){p.forEach(k.nodes(),function(N){j.node(N).rank+=z})}P.exports=function E(k){var K,re,j=new g({directed:!1}),z=k.nodes()[0],N=k.nodeCount();for(j.setNode(z,{});b(j,k)<N;)K=M(j,k),re=j.hasNode(K.v)?S(k,K):-S(k,K),O(j,k,re);return j}},94124:(P,Y,f)=>{"use strict";var g=f(1916).longestPath,S=f(96632),E=f(63804);P.exports=function b(j){switch(j.graph().ranker){case"network-simplex":default:!function k(j){E(j)}(j);break;case"tight-tree":!function O(j){g(j),S(j)}(j);break;case"longest-path":M(j)}};var M=g},63804:(P,Y,f)=>{"use strict";var p=f(45760),g=f(96632),S=f(1916).slack,E=f(1916).longestPath,b=f(36456).alg.preorder,M=f(36456).alg.postorder,O=f(11510).simplify;function k(ve){ve=O(ve),E(ve);var De,Ie=g(ve);for(K(Ie),j(Ie,ve);De=fe(Ie);)ue(Ie,ve,De,i(Ie,ve,De))}function j(ve,Ie){var De=M(ve,ve.nodes());De=De.slice(0,De.length-1),p.forEach(De,function(C){!function z(ve,Ie,De){var C=ve.node(De);ve.edge(De,C.parent).cutvalue=N(ve,Ie,De)}(ve,Ie,C)})}function N(ve,Ie,De){var He=ve.node(De).parent,Je=!0,Ke=Ie.edge(De,He),tt=0;return Ke||(Je=!1,Ke=Ie.edge(He,De)),tt=Ke.weight,p.forEach(Ie.nodeEdges(De),function(it){var dt=it.v===De,wt=dt?it.w:it.v;if(wt!==He){var jt=dt===Je,qt=Ie.edge(it).weight;if(tt+=jt?qt:-qt,function he(ve,Ie,De){return ve.hasEdge(Ie,De)}(ve,De,wt)){var Mt=ve.edge(De,wt).cutvalue;tt+=jt?-Mt:Mt}}}),tt}function K(ve,Ie){arguments.length<2&&(Ie=ve.nodes()[0]),re(ve,{},1,Ie)}function re(ve,Ie,De,C,He){var Je=De,Ke=ve.node(C);return Ie[C]=!0,p.forEach(ve.neighbors(C),function(tt){p.has(Ie,tt)||(De=re(ve,Ie,De,tt,C))}),Ke.low=Je,Ke.lim=De++,He?Ke.parent=He:delete Ke.parent,De}function fe(ve){return p.find(ve.edges(),function(Ie){return ve.edge(Ie).cutvalue<0})}function i(ve,Ie,De){var C=De.v,He=De.w;Ie.hasEdge(C,He)||(C=De.w,He=De.v);var Je=ve.node(C),Ke=ve.node(He),tt=Je,it=!1;Je.lim>Ke.lim&&(tt=Ke,it=!0);var dt=p.filter(Ie.edges(),function(wt){return it===ee(0,ve.node(wt.v),tt)&&it!==ee(0,ve.node(wt.w),tt)});return p.minBy(dt,function(wt){return S(Ie,wt)})}function ue(ve,Ie,De,C){ve.removeEdge(De.v,De.w),ve.setEdge(C.v,C.w,{}),K(ve),j(ve,Ie),function ge(ve,Ie){var De=p.find(ve.nodes(),function(He){return!Ie.node(He).parent}),C=b(ve,De);C=C.slice(1),p.forEach(C,function(He){var Je=ve.node(He).parent,Ke=Ie.edge(He,Je),tt=!1;Ke||(Ke=Ie.edge(Je,He),tt=!0),Ie.node(He).rank=Ie.node(Je).rank+(tt?Ke.minlen:-Ke.minlen)})}(ve,Ie)}function ee(ve,Ie,De){return De.low<=Ie.lim&&Ie.lim<=De.lim}P.exports=k,k.initLowLimValues=K,k.initCutValues=j,k.calcCutValue=N,k.leaveEdge=fe,k.enterEdge=i,k.exchangeEdges=ue},1916:(P,Y,f)=>{"use strict";var p=f(45760);P.exports={longestPath:function g(E){var b={};p.forEach(E.sources(),function M(O){var k=E.node(O);if(p.has(b,O))return k.rank;b[O]=!0;var j=p.min(p.map(E.outEdges(O),function(z){return M(z.w)-E.edge(z).minlen}));return(j===Number.POSITIVE_INFINITY||null==j)&&(j=0),k.rank=j})},slack:function S(E,b){return E.node(b.w).rank-E.node(b.v).rank-E.edge(b).minlen}}},11510:(P,Y,f)=>{"use strict";var p=f(45760),g=f(36456).Graph;function S(ge,he,ee,ve){var Ie;do{Ie=p.uniqueId(ve)}while(ge.hasNode(Ie));return ee.dummy=he,ge.setNode(Ie,ee),Ie}function re(ge){return p.max(p.map(ge.nodes(),function(he){var ee=ge.node(he).rank;if(!p.isUndefined(ee))return ee}))}P.exports={addDummyNode:S,simplify:function E(ge){var he=(new g).setGraph(ge.graph());return p.forEach(ge.nodes(),function(ee){he.setNode(ee,ge.node(ee))}),p.forEach(ge.edges(),function(ee){var ve=he.edge(ee.v,ee.w)||{weight:0,minlen:1},Ie=ge.edge(ee);he.setEdge(ee.v,ee.w,{weight:ve.weight+Ie.weight,minlen:Math.max(ve.minlen,Ie.minlen)})}),he},asNonCompoundGraph:function b(ge){var he=new g({multigraph:ge.isMultigraph()}).setGraph(ge.graph());return p.forEach(ge.nodes(),function(ee){ge.children(ee).length||he.setNode(ee,ge.node(ee))}),p.forEach(ge.edges(),function(ee){he.setEdge(ee,ge.edge(ee))}),he},successorWeights:function M(ge){var he=p.map(ge.nodes(),function(ee){var ve={};return p.forEach(ge.outEdges(ee),function(Ie){ve[Ie.w]=(ve[Ie.w]||0)+ge.edge(Ie).weight}),ve});return p.zipObject(ge.nodes(),he)},predecessorWeights:function O(ge){var he=p.map(ge.nodes(),function(ee){var ve={};return p.forEach(ge.inEdges(ee),function(Ie){ve[Ie.v]=(ve[Ie.v]||0)+ge.edge(Ie).weight}),ve});return p.zipObject(ge.nodes(),he)},intersectRect:function k(ge,he){var Je,Ke,ee=ge.x,ve=ge.y,Ie=he.x-ee,De=he.y-ve,C=ge.width/2,He=ge.height/2;if(!Ie&&!De)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(De)*C>Math.abs(Ie)*He?(De<0&&(He=-He),Je=He*Ie/De,Ke=He):(Ie<0&&(C=-C),Je=C,Ke=C*De/Ie),{x:ee+Je,y:ve+Ke}},buildLayerMatrix:function j(ge){var he=p.map(p.range(re(ge)+1),function(){return[]});return p.forEach(ge.nodes(),function(ee){var ve=ge.node(ee),Ie=ve.rank;p.isUndefined(Ie)||(he[Ie][ve.order]=ee)}),he},normalizeRanks:function z(ge){var he=p.min(p.map(ge.nodes(),function(ee){return ge.node(ee).rank}));p.forEach(ge.nodes(),function(ee){var ve=ge.node(ee);p.has(ve,"rank")&&(ve.rank-=he)})},removeEmptyRanks:function N(ge){var he=p.min(p.map(ge.nodes(),function(De){return ge.node(De).rank})),ee=[];p.forEach(ge.nodes(),function(De){var C=ge.node(De).rank-he;ee[C]||(ee[C]=[]),ee[C].push(De)});var ve=0,Ie=ge.graph().nodeRankFactor;p.forEach(ee,function(De,C){p.isUndefined(De)&&C%Ie!=0?--ve:ve&&p.forEach(De,function(He){ge.node(He).rank+=ve})})},addBorderNode:function K(ge,he,ee,ve){var Ie={width:0,height:0};return arguments.length>=4&&(Ie.rank=ee,Ie.order=ve),S(ge,"border",Ie,he)},maxRank:re,partition:function fe(ge,he){var ee={lhs:[],rhs:[]};return p.forEach(ge,function(ve){he(ve)?ee.lhs.push(ve):ee.rhs.push(ve)}),ee},time:function i(ge,he){var ee=p.now();try{return he()}finally{console.log(ge+" time: "+(p.now()-ee)+"ms")}},notime:function ue(ge,he){return he()}}},28126:P=>{P.exports="0.8.5"},85510:(P,Y,f)=>{var p=f(51838);P.exports={Graph:p.Graph,json:f(21088),alg:f(83430),version:p.version}},86730:(P,Y,f)=>{var p=f(79138);P.exports=function g(S){var M,E={},b=[];function O(k){p.has(E,k)||(E[k]=!0,M.push(k),p.each(S.successors(k),O),p.each(S.predecessors(k),O))}return p.each(S.nodes(),function(k){M=[],O(k),M.length&&b.push(M)}),b}},22163:(P,Y,f)=>{var p=f(79138);function S(E,b,M,O,k,j){p.has(O,b)||(O[b]=!0,M||j.push(b),p.each(k(b),function(z){S(E,z,M,O,k,j)}),M&&j.push(b))}P.exports=function g(E,b,M){p.isArray(b)||(b=[b]);var O=(E.isDirected()?E.successors:E.neighbors).bind(E),k=[],j={};return p.each(b,function(z){if(!E.hasNode(z))throw new Error("Graph does not have node: "+z);S(E,z,"post"===M,j,O,k)}),k}},25668:(P,Y,f)=>{var p=f(61718),g=f(79138);P.exports=function S(E,b,M){return g.transform(E.nodes(),function(O,k){O[k]=p(E,k,b,M)},{})}},61718:(P,Y,f)=>{var p=f(79138),g=f(31919);P.exports=function E(M,O,k,j){return function b(M,O,k,j){var K,re,z={},N=new g,fe=function(i){var ue=i.v!==K?i.v:i.w,ge=z[ue],he=k(i),ee=re.distance+he;if(he<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+he);ee<ge.distance&&(ge.distance=ee,ge.predecessor=K,N.decrease(ue,ee))};for(M.nodes().forEach(function(i){var ue=i===O?0:Number.POSITIVE_INFINITY;z[i]={distance:ue},N.add(i,ue)});N.size()>0&&(K=N.removeMin(),(re=z[K]).distance!==Number.POSITIVE_INFINITY);)j(K).forEach(fe);return z}(M,String(O),k||S,j||function(z){return M.outEdges(z)})};var S=p.constant(1)},9611:(P,Y,f)=>{var p=f(79138),g=f(73585);P.exports=function S(E){return p.filter(g(E),function(b){return b.length>1||1===b.length&&E.hasEdge(b[0],b[0])})}},22881:(P,Y,f)=>{var p=f(79138);P.exports=function S(b,M,O){return function E(b,M,O){var k={},j=b.nodes();return j.forEach(function(z){k[z]={},k[z][z]={distance:0},j.forEach(function(N){z!==N&&(k[z][N]={distance:Number.POSITIVE_INFINITY})}),O(z).forEach(function(N){var K=N.v===z?N.w:N.v,re=M(N);k[z][K]={distance:re,predecessor:z}})}),j.forEach(function(z){var N=k[z];j.forEach(function(K){var re=k[K];j.forEach(function(fe){var ue=N[fe],ge=re[fe],he=re[z].distance+ue.distance;he<ge.distance&&(ge.distance=he,ge.predecessor=ue.predecessor)})})}),k}(b,M||g,O||function(k){return b.outEdges(k)})};var g=p.constant(1)},83430:(P,Y,f)=>{P.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(P,Y,f)=>{var p=f(52180);P.exports=function g(S){try{p(S)}catch(E){if(E instanceof p.CycleException)return!1;throw E}return!0}},46694:(P,Y,f)=>{var p=f(22163);P.exports=function g(S,E){return p(S,E,"post")}},5330:(P,Y,f)=>{var p=f(22163);P.exports=function g(S,E){return p(S,E,"pre")}},46823:(P,Y,f)=>{var p=f(79138),g=f(66568),S=f(31919);P.exports=function E(b,M){var z,O=new g,k={},j=new S;function N(re){var fe=re.v===z?re.w:re.v,i=j.priority(fe);if(void 0!==i){var ue=M(re);ue<i&&(k[fe]=z,j.decrease(fe,ue))}}if(0===b.nodeCount())return O;p.each(b.nodes(),function(re){j.add(re,Number.POSITIVE_INFINITY),O.setNode(re)}),j.decrease(b.nodes()[0],0);for(var K=!1;j.size()>0;){if(z=j.removeMin(),p.has(k,z))O.setEdge(z,k[z]);else{if(K)throw new Error("Input graph is not connected: "+b);K=!0}b.nodeEdges(z).forEach(N)}return O}},73585:(P,Y,f)=>{var p=f(79138);P.exports=function g(S){var E=0,b=[],M={},O=[];function k(j){var z=M[j]={onStack:!0,lowlink:E,index:E++};if(b.push(j),S.successors(j).forEach(function(re){p.has(M,re)?M[re].onStack&&(z.lowlink=Math.min(z.lowlink,M[re].index)):(k(re),z.lowlink=Math.min(z.lowlink,M[re].lowlink))}),z.lowlink===z.index){var K,N=[];do{K=b.pop(),M[K].onStack=!1,N.push(K)}while(j!==K);O.push(N)}}return S.nodes().forEach(function(j){p.has(M,j)||k(j)}),O}},52180:(P,Y,f)=>{var p=f(79138);function g(E){var b={},M={},O=[];if(p.each(E.sinks(),function k(j){if(p.has(M,j))throw new S;p.has(b,j)||(M[j]=!0,b[j]=!0,p.each(E.predecessors(j),k),delete M[j],O.push(j))}),p.size(b)!==E.nodeCount())throw new S;return O}function S(){}P.exports=g,g.CycleException=S,S.prototype=new Error},31919:(P,Y,f)=>{var p=f(79138);function g(){this._arr=[],this._keyIndices={}}P.exports=g,g.prototype.size=function(){return this._arr.length},g.prototype.keys=function(){return this._arr.map(function(S){return S.key})},g.prototype.has=function(S){return p.has(this._keyIndices,S)},g.prototype.priority=function(S){var E=this._keyIndices[S];if(void 0!==E)return this._arr[E].priority},g.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},g.prototype.add=function(S,E){var b=this._keyIndices;if(S=String(S),!p.has(b,S)){var M=this._arr,O=M.length;return b[S]=O,M.push({key:S,priority:E}),this._decrease(O),!0}return!1},g.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},g.prototype.decrease=function(S,E){var b=this._keyIndices[S];if(E>this._arr[b].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[b].priority+" New: "+E);this._arr[b].priority=E,this._decrease(b)},g.prototype._heapify=function(S){var E=this._arr,b=2*S,M=b+1,O=S;b<E.length&&(O=E[b].priority<E[O].priority?b:O,M<E.length&&(O=E[M].priority<E[O].priority?M:O),O!==S&&(this._swap(S,O),this._heapify(O)))},g.prototype._decrease=function(S){for(var M,E=this._arr,b=E[S].priority;0!==S&&!(E[M=S>>1].priority<b);)this._swap(S,M),S=M},g.prototype._swap=function(S,E){var b=this._arr,M=this._keyIndices,O=b[S],k=b[E];b[S]=k,b[E]=O,M[k.key]=S,M[O.key]=E}},66568:(P,Y,f)=>{"use strict";var p=f(79138);P.exports=b;var S="\0";function b(N){this._isDirected=!p.has(N,"directed")||N.directed,this._isMultigraph=!!p.has(N,"multigraph")&&N.multigraph,this._isCompound=!!p.has(N,"compound")&&N.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function M(N,K){N[K]?N[K]++:N[K]=1}function O(N,K){--N[K]||delete N[K]}function k(N,K,re,fe){var i=""+K,ue=""+re;if(!N&&i>ue){var ge=i;i=ue,ue=ge}return i+"\x01"+ue+"\x01"+(p.isUndefined(fe)?"\0":fe)}function j(N,K,re,fe){var i=""+K,ue=""+re;if(!N&&i>ue){var ge=i;i=ue,ue=ge}var he={v:i,w:ue};return fe&&(he.name=fe),he}function z(N,K){return k(N,K.v,K.w,K.name)}b.prototype._nodeCount=0,b.prototype._edgeCount=0,b.prototype.isDirected=function(){return this._isDirected},b.prototype.isMultigraph=function(){return this._isMultigraph},b.prototype.isCompound=function(){return this._isCompound},b.prototype.setGraph=function(N){return this._label=N,this},b.prototype.graph=function(){return this._label},b.prototype.setDefaultNodeLabel=function(N){return p.isFunction(N)||(N=p.constant(N)),this._defaultNodeLabelFn=N,this},b.prototype.nodeCount=function(){return this._nodeCount},b.prototype.nodes=function(){return p.keys(this._nodes)},b.prototype.sources=function(){var N=this;return p.filter(this.nodes(),function(K){return p.isEmpty(N._in[K])})},b.prototype.sinks=function(){var N=this;return p.filter(this.nodes(),function(K){return p.isEmpty(N._out[K])})},b.prototype.setNodes=function(N,K){var re=arguments,fe=this;return p.each(N,function(i){re.length>1?fe.setNode(i,K):fe.setNode(i)}),this},b.prototype.setNode=function(N,K){return p.has(this._nodes,N)?(arguments.length>1&&(this._nodes[N]=K),this):(this._nodes[N]=arguments.length>1?K:this._defaultNodeLabelFn(N),this._isCompound&&(this._parent[N]=S,this._children[N]={},this._children[S][N]=!0),this._in[N]={},this._preds[N]={},this._out[N]={},this._sucs[N]={},++this._nodeCount,this)},b.prototype.node=function(N){return this._nodes[N]},b.prototype.hasNode=function(N){return p.has(this._nodes,N)},b.prototype.removeNode=function(N){var K=this;if(p.has(this._nodes,N)){var re=function(fe){K.removeEdge(K._edgeObjs[fe])};delete this._nodes[N],this._isCompound&&(this._removeFromParentsChildList(N),delete this._parent[N],p.each(this.children(N),function(fe){K.setParent(fe)}),delete this._children[N]),p.each(p.keys(this._in[N]),re),delete this._in[N],delete this._preds[N],p.each(p.keys(this._out[N]),re),delete this._out[N],delete this._sucs[N],--this._nodeCount}return this},b.prototype.setParent=function(N,K){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(K))K=S;else{for(var re=K+="";!p.isUndefined(re);re=this.parent(re))if(re===N)throw new Error("Setting "+K+" as parent of "+N+" would create a cycle");this.setNode(K)}return this.setNode(N),this._removeFromParentsChildList(N),this._parent[N]=K,this._children[K][N]=!0,this},b.prototype._removeFromParentsChildList=function(N){delete this._children[this._parent[N]][N]},b.prototype.parent=function(N){if(this._isCompound){var K=this._parent[N];if(K!==S)return K}},b.prototype.children=function(N){if(p.isUndefined(N)&&(N=S),this._isCompound){var K=this._children[N];if(K)return p.keys(K)}else{if(N===S)return this.nodes();if(this.hasNode(N))return[]}},b.prototype.predecessors=function(N){var K=this._preds[N];if(K)return p.keys(K)},b.prototype.successors=function(N){var K=this._sucs[N];if(K)return p.keys(K)},b.prototype.neighbors=function(N){var K=this.predecessors(N);if(K)return p.union(K,this.successors(N))},b.prototype.isLeaf=function(N){return 0===(this.isDirected()?this.successors(N):this.neighbors(N)).length},b.prototype.filterNodes=function(N){var K=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});K.setGraph(this.graph());var re=this;p.each(this._nodes,function(ue,ge){N(ge)&&K.setNode(ge,ue)}),p.each(this._edgeObjs,function(ue){K.hasNode(ue.v)&&K.hasNode(ue.w)&&K.setEdge(ue,re.edge(ue))});var fe={};function i(ue){var ge=re.parent(ue);return void 0===ge||K.hasNode(ge)?(fe[ue]=ge,ge):ge in fe?fe[ge]:i(ge)}return this._isCompound&&p.each(K.nodes(),function(ue){K.setParent(ue,i(ue))}),K},b.prototype.setDefaultEdgeLabel=function(N){return p.isFunction(N)||(N=p.constant(N)),this._defaultEdgeLabelFn=N,this},b.prototype.edgeCount=function(){return this._edgeCount},b.prototype.edges=function(){return p.values(this._edgeObjs)},b.prototype.setPath=function(N,K){var re=this,fe=arguments;return p.reduce(N,function(i,ue){return fe.length>1?re.setEdge(i,ue,K):re.setEdge(i,ue),ue}),this},b.prototype.setEdge=function(){var N,K,re,fe,i=!1,ue=arguments[0];"object"==typeof ue&&null!==ue&&"v"in ue?(N=ue.v,K=ue.w,re=ue.name,2===arguments.length&&(fe=arguments[1],i=!0)):(N=ue,K=arguments[1],re=arguments[3],arguments.length>2&&(fe=arguments[2],i=!0)),N=""+N,K=""+K,p.isUndefined(re)||(re=""+re);var ge=k(this._isDirected,N,K,re);if(p.has(this._edgeLabels,ge))return i&&(this._edgeLabels[ge]=fe),this;if(!p.isUndefined(re)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(N),this.setNode(K),this._edgeLabels[ge]=i?fe:this._defaultEdgeLabelFn(N,K,re);var he=j(this._isDirected,N,K,re);return N=he.v,K=he.w,Object.freeze(he),this._edgeObjs[ge]=he,M(this._preds[K],N),M(this._sucs[N],K),this._in[K][ge]=he,this._out[N][ge]=he,this._edgeCount++,this},b.prototype.edge=function(N,K,re){var fe=1===arguments.length?z(this._isDirected,arguments[0]):k(this._isDirected,N,K,re);return this._edgeLabels[fe]},b.prototype.hasEdge=function(N,K,re){var fe=1===arguments.length?z(this._isDirected,arguments[0]):k(this._isDirected,N,K,re);return p.has(this._edgeLabels,fe)},b.prototype.removeEdge=function(N,K,re){var fe=1===arguments.length?z(this._isDirected,arguments[0]):k(this._isDirected,N,K,re),i=this._edgeObjs[fe];return i&&(N=i.v,K=i.w,delete this._edgeLabels[fe],delete this._edgeObjs[fe],O(this._preds[K],N),O(this._sucs[N],K),delete this._in[K][fe],delete this._out[N][fe],this._edgeCount--),this},b.prototype.inEdges=function(N,K){var re=this._in[N];if(re){var fe=p.values(re);return K?p.filter(fe,function(i){return i.v===K}):fe}},b.prototype.outEdges=function(N,K){var re=this._out[N];if(re){var fe=p.values(re);return K?p.filter(fe,function(i){return i.w===K}):fe}},b.prototype.nodeEdges=function(N,K){var re=this.inEdges(N,K);if(re)return re.concat(this.outEdges(N,K))}},51838:(P,Y,f)=>{P.exports={Graph:f(66568),version:f(75089)}},21088:(P,Y,f)=>{var p=f(79138),g=f(66568);function E(O){return p.map(O.nodes(),function(k){var j=O.node(k),z=O.parent(k),N={v:k};return p.isUndefined(j)||(N.value=j),p.isUndefined(z)||(N.parent=z),N})}function b(O){return p.map(O.edges(),function(k){var j=O.edge(k),z={v:k.v,w:k.w};return p.isUndefined(k.name)||(z.name=k.name),p.isUndefined(j)||(z.value=j),z})}P.exports={write:function S(O){var k={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:E(O),edges:b(O)};return p.isUndefined(O.graph())||(k.value=p.clone(O.graph())),k},read:function M(O){var k=new g(O.options).setGraph(O.value);return p.each(O.nodes,function(j){k.setNode(j.v,j.value),j.parent&&k.setParent(j.v,j.parent)}),p.each(O.edges,function(j){k.setEdge({v:j.v,w:j.w,name:j.name},j.value)}),k}}},79138:(P,Y,f)=>{var p;try{p={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(g){}p||(p=window._),P.exports=p},75089:P=>{P.exports="2.1.8"},58259:function(P,Y){var p;!function(g,S){"use strict";"object"==typeof P.exports?P.exports=g.document?S(g,!0):function(E){if(!E.document)throw new Error("jQuery requires a window with a document");return S(E)}:S(g)}("undefined"!=typeof window?window:this,function(g,S){"use strict";var E=[],b=Object.getPrototypeOf,M=E.slice,O=E.flat?function(l){return E.flat.call(l)}:function(l){return E.concat.apply([],l)},k=E.push,j=E.indexOf,z={},N=z.toString,K=z.hasOwnProperty,re=K.toString,fe=re.call(Object),i={},ue=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},ge=function(h){return null!=h&&h===h.window},he=g.document,ee={type:!0,src:!0,nonce:!0,noModule:!0};function ve(l,h,x){var w,R,H=(x=x||he).createElement("script");if(H.text=l,h)for(w in ee)(R=h[w]||h.getAttribute&&h.getAttribute(w))&&H.setAttribute(w,R);x.head.appendChild(H).parentNode.removeChild(H)}function Ie(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?z[N.call(l)]||"object":typeof l}var C=function(l,h){return new C.fn.init(l,h)};function He(l){var h=!!l&&"length"in l&&l.length,x=Ie(l);return!ue(l)&&!ge(l)&&("array"===x||0===h||"number"==typeof h&&h>0&&h-1 in l)}C.fn=C.prototype={jquery:"3.6.0",constructor:C,length:0,toArray:function(){return M.call(this)},get:function(l){return null==l?M.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var h=C.merge(this.constructor(),l);return h.prevObject=this,h},each:function(l){return C.each(this,l)},map:function(l){return this.pushStack(C.map(this,function(h,x){return l.call(h,x,h)}))},slice:function(){return this.pushStack(M.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(l,h){return(h+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(l,h){return h%2}))},eq:function(l){var h=this.length,x=+l+(l<0?h:0);return this.pushStack(x>=0&&x<h?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:k,sort:E.sort,splice:E.splice},C.extend=C.fn.extend=function(){var l,h,x,w,R,H,X=arguments[0]||{},ce=1,le=arguments.length,Ae=!1;for("boolean"==typeof X&&(Ae=X,X=arguments[ce]||{},ce++),"object"!=typeof X&&!ue(X)&&(X={}),ce===le&&(X=this,ce--);ce<le;ce++)if(null!=(l=arguments[ce]))for(h in l)w=l[h],"__proto__"!==h&&X!==w&&(Ae&&w&&(C.isPlainObject(w)||(R=Array.isArray(w)))?(x=X[h],H=R&&!Array.isArray(x)?[]:R||C.isPlainObject(x)?x:{},R=!1,X[h]=C.extend(Ae,H,w)):void 0!==w&&(X[h]=w));return X},C.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var h,x;return!(!l||"[object Object]"!==N.call(l)||(h=b(l))&&("function"!=typeof(x=K.call(h,"constructor")&&h.constructor)||re.call(x)!==fe))},isEmptyObject:function(l){var h;for(h in l)return!1;return!0},globalEval:function(l,h,x){ve(l,{nonce:h&&h.nonce},x)},each:function(l,h){var x,w=0;if(He(l))for(x=l.length;w<x&&!1!==h.call(l[w],w,l[w]);w++);else for(w in l)if(!1===h.call(l[w],w,l[w]))break;return l},makeArray:function(l,h){var x=h||[];return null!=l&&(He(Object(l))?C.merge(x,"string"==typeof l?[l]:l):k.call(x,l)),x},inArray:function(l,h,x){return null==h?-1:j.call(h,l,x)},merge:function(l,h){for(var x=+h.length,w=0,R=l.length;w<x;w++)l[R++]=h[w];return l.length=R,l},grep:function(l,h,x){for(var R=[],H=0,X=l.length,ce=!x;H<X;H++)!h(l[H],H)!==ce&&R.push(l[H]);return R},map:function(l,h,x){var w,R,H=0,X=[];if(He(l))for(w=l.length;H<w;H++)null!=(R=h(l[H],H,x))&&X.push(R);else for(H in l)null!=(R=h(l[H],H,x))&&X.push(R);return O(X)},guid:1,support:i}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=E[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,h){z["[object "+h+"]"]=h.toLowerCase()});var Je=function(l){var h,x,w,R,H,X,ce,le,Ae,Be,Qe,ke,Ye,xt,Gt,Pt,In,Rn,Ir,Ot="sizzle"+1*new Date,It=l.document,yr=0,_n=0,Fe=oo(),xr=oo(),Or=oo(),jr=oo(),di=function(Z,de){return Z===de&&(Qe=!0),0},zr={}.hasOwnProperty,zn=[],Fi=zn.pop,Lr=zn.push,bi=zn.push,Ra=zn.slice,Vi=function(Z,de){for(var be=0,$e=Z.length;be<$e;be++)if(Z[be]===de)return be;return-1},ro="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Tn="[\\x20\\t\\r\\n\\f]",Un="(?:\\\\[\\da-fA-F]{1,6}"+Tn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$o="\\["+Tn+"*("+Un+")(?:"+Tn+"*([*^$|!~]?=)"+Tn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Un+"))|)"+Tn+"*\\]",ca=":("+Un+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$o+")*)|.*)\\)|)",ku=new RegExp(Tn+"+","g"),kn=new RegExp("^"+Tn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Tn+"+$","g"),ys=new RegExp("^"+Tn+"*,"+Tn+"*"),Yo=new RegExp("^"+Tn+"*([>+~]|"+Tn+")"+Tn+"*"),Ou=new RegExp(Tn+"|>"),Ws=new RegExp(ca),Gl=new RegExp("^"+Un+"$"),Da={ID:new RegExp("^#("+Un+")"),CLASS:new RegExp("^\\.("+Un+")"),TAG:new RegExp("^("+Un+"|[*])"),ATTR:new RegExp("^"+$o),PSEUDO:new RegExp("^"+ca),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Tn+"*(even|odd|(([+-]|)(\\d*)n|)"+Tn+"*(?:([+-]|)"+Tn+"*(\\d+)|))"+Tn+"*\\)|)","i"),bool:new RegExp("^(?:"+ro+")$","i"),needsContext:new RegExp("^"+Tn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Tn+"*((?:-\\d)?\\d*)"+Tn+"*\\)|)(?=[^-]|$)","i")},Wl=/HTML$/i,$l=/^(?:input|select|textarea|button)$/i,Lu=/^h\d$/i,Bi=/^[^{]+\{\s*\[native \w/,Xo=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xs=/[+~]/,Qr=new RegExp("\\\\[\\da-fA-F]{1,6}"+Tn+"?|\\\\([^\\r\\n\\f])","g"),_i=function(Z,de){var be="0x"+Z.slice(1)-65536;return de||(be<0?String.fromCharCode(be+65536):String.fromCharCode(be>>10|55296,1023&be|56320))},io=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rr=function(Z,de){return de?"\0"===Z?"\ufffd":Z.slice(0,-1)+"\\"+Z.charCodeAt(Z.length-1).toString(16)+" ":"\\"+Z},Nu=function(){ke()},Yl=et(function(Z){return!0===Z.disabled&&"fieldset"===Z.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{bi.apply(zn=Ra.call(It.childNodes),It.childNodes)}catch(Z){bi={apply:zn.length?function(de,be){Lr.apply(de,Ra.call(be))}:function(de,be){for(var $e=de.length,Ee=0;de[$e++]=be[Ee++];);de.length=$e-1}}}function On(Z,de,be,$e){var Ee,ze,Ue,ct,mt,Ct,Nt,Ft=de&&de.ownerDocument,Lt=de?de.nodeType:9;if(be=be||[],"string"!=typeof Z||!Z||1!==Lt&&9!==Lt&&11!==Lt)return be;if(!$e&&(ke(de),de=de||Ye,Gt)){if(11!==Lt&&(mt=Xo.exec(Z)))if(Ee=mt[1]){if(9===Lt){if(!(Ue=de.getElementById(Ee)))return be;if(Ue.id===Ee)return be.push(Ue),be}else if(Ft&&(Ue=Ft.getElementById(Ee))&&Ir(de,Ue)&&Ue.id===Ee)return be.push(Ue),be}else{if(mt[2])return bi.apply(be,de.getElementsByTagName(Z)),be;if((Ee=mt[3])&&x.getElementsByClassName&&de.getElementsByClassName)return bi.apply(be,de.getElementsByClassName(Ee)),be}if(x.qsa&&!jr[Z+" "]&&(!Pt||!Pt.test(Z))&&(1!==Lt||"object"!==de.nodeName.toLowerCase())){if(Nt=Z,Ft=de,1===Lt&&(Ou.test(Z)||Yo.test(Z))){for(((Ft=xs.test(Z)&&xe(de.parentNode)||de)!==de||!x.scope)&&((ct=de.getAttribute("id"))?ct=ct.replace(io,rr):de.setAttribute("id",ct=Ot)),ze=(Ct=X(Z)).length;ze--;)Ct[ze]=(ct?"#"+ct:":scope")+" "+Ve(Ct[ze]);Nt=Ct.join(",")}try{return bi.apply(be,Ft.querySelectorAll(Nt)),be}catch(En){jr(Z,!0)}finally{ct===Ot&&de.removeAttribute("id")}}}return le(Z.replace(kn,"$1"),de,be,$e)}function oo(){var Z=[];return function de(be,$e){return Z.push(be+" ")>w.cacheLength&&delete de[Z.shift()],de[be+" "]=$e}}function er(Z){return Z[Ot]=!0,Z}function Et(Z){var de=Ye.createElement("fieldset");try{return!!Z(de)}catch(be){return!1}finally{de.parentNode&&de.parentNode.removeChild(de),de=null}}function Nr(Z,de){for(var be=Z.split("|"),$e=be.length;$e--;)w.attrHandle[be[$e]]=de}function Fa(Z,de){var be=de&&Z,$e=be&&1===Z.nodeType&&1===de.nodeType&&Z.sourceIndex-de.sourceIndex;if($e)return $e;if(be)for(;be=be.nextSibling;)if(be===de)return-1;return Z?1:-1}function hi(Z){return function(de){return"input"===de.nodeName.toLowerCase()&&de.type===Z}}function $s(Z){return function(de){var be=de.nodeName.toLowerCase();return("input"===be||"button"===be)&&de.type===Z}}function fa(Z){return function(de){return"form"in de?de.parentNode&&!1===de.disabled?"label"in de?"label"in de.parentNode?de.parentNode.disabled===Z:de.disabled===Z:de.isDisabled===Z||de.isDisabled!==!Z&&Yl(de)===Z:de.disabled===Z:"label"in de&&de.disabled===Z}}function ir(Z){return er(function(de){return de=+de,er(function(be,$e){for(var Ee,ze=Z([],be.length,de),Ue=ze.length;Ue--;)be[Ee=ze[Ue]]&&(be[Ee]=!($e[Ee]=be[Ee]))})})}function xe(Z){return Z&&void 0!==Z.getElementsByTagName&&Z}for(h in x=On.support={},H=On.isXML=function(Z){var be=Z&&(Z.ownerDocument||Z).documentElement;return!Wl.test(Z&&Z.namespaceURI||be&&be.nodeName||"HTML")},ke=On.setDocument=function(Z){var de,be,$e=Z?Z.ownerDocument||Z:It;return $e==Ye||9!==$e.nodeType||!$e.documentElement||(xt=(Ye=$e).documentElement,Gt=!H(Ye),It!=Ye&&(be=Ye.defaultView)&&be.top!==be&&(be.addEventListener?be.addEventListener("unload",Nu,!1):be.attachEvent&&be.attachEvent("onunload",Nu)),x.scope=Et(function(Ee){return xt.appendChild(Ee).appendChild(Ye.createElement("div")),void 0!==Ee.querySelectorAll&&!Ee.querySelectorAll(":scope fieldset div").length}),x.attributes=Et(function(Ee){return Ee.className="i",!Ee.getAttribute("className")}),x.getElementsByTagName=Et(function(Ee){return Ee.appendChild(Ye.createComment("")),!Ee.getElementsByTagName("*").length}),x.getElementsByClassName=Bi.test(Ye.getElementsByClassName),x.getById=Et(function(Ee){return xt.appendChild(Ee).id=Ot,!Ye.getElementsByName||!Ye.getElementsByName(Ot).length}),x.getById?(w.filter.ID=function(Ee){var ze=Ee.replace(Qr,_i);return function(Ue){return Ue.getAttribute("id")===ze}},w.find.ID=function(Ee,ze){if(void 0!==ze.getElementById&&Gt){var Ue=ze.getElementById(Ee);return Ue?[Ue]:[]}}):(w.filter.ID=function(Ee){var ze=Ee.replace(Qr,_i);return function(Ue){var ct=void 0!==Ue.getAttributeNode&&Ue.getAttributeNode("id");return ct&&ct.value===ze}},w.find.ID=function(Ee,ze){if(void 0!==ze.getElementById&&Gt){var Ue,ct,mt,Ct=ze.getElementById(Ee);if(Ct){if((Ue=Ct.getAttributeNode("id"))&&Ue.value===Ee)return[Ct];for(mt=ze.getElementsByName(Ee),ct=0;Ct=mt[ct++];)if((Ue=Ct.getAttributeNode("id"))&&Ue.value===Ee)return[Ct]}return[]}}),w.find.TAG=x.getElementsByTagName?function(Ee,ze){return void 0!==ze.getElementsByTagName?ze.getElementsByTagName(Ee):x.qsa?ze.querySelectorAll(Ee):void 0}:function(Ee,ze){var Ue,ct=[],mt=0,Ct=ze.getElementsByTagName(Ee);if("*"===Ee){for(;Ue=Ct[mt++];)1===Ue.nodeType&&ct.push(Ue);return ct}return Ct},w.find.CLASS=x.getElementsByClassName&&function(Ee,ze){if(void 0!==ze.getElementsByClassName&&Gt)return ze.getElementsByClassName(Ee)},In=[],Pt=[],(x.qsa=Bi.test(Ye.querySelectorAll))&&(Et(function(Ee){var ze;xt.appendChild(Ee).innerHTML="<a id='"+Ot+"'></a><select id='"+Ot+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ee.querySelectorAll("[msallowcapture^='']").length&&Pt.push("[*^$]="+Tn+"*(?:''|\"\")"),Ee.querySelectorAll("[selected]").length||Pt.push("\\["+Tn+"*(?:value|"+ro+")"),Ee.querySelectorAll("[id~="+Ot+"-]").length||Pt.push("~="),(ze=Ye.createElement("input")).setAttribute("name",""),Ee.appendChild(ze),Ee.querySelectorAll("[name='']").length||Pt.push("\\["+Tn+"*name"+Tn+"*="+Tn+"*(?:''|\"\")"),Ee.querySelectorAll(":checked").length||Pt.push(":checked"),Ee.querySelectorAll("a#"+Ot+"+*").length||Pt.push(".#.+[+~]"),Ee.querySelectorAll("\\\f"),Pt.push("[\\r\\n\\f]")}),Et(function(Ee){Ee.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ze=Ye.createElement("input");ze.setAttribute("type","hidden"),Ee.appendChild(ze).setAttribute("name","D"),Ee.querySelectorAll("[name=d]").length&&Pt.push("name"+Tn+"*[*^$|!~]?="),2!==Ee.querySelectorAll(":enabled").length&&Pt.push(":enabled",":disabled"),xt.appendChild(Ee).disabled=!0,2!==Ee.querySelectorAll(":disabled").length&&Pt.push(":enabled",":disabled"),Ee.querySelectorAll("*,:x"),Pt.push(",.*:")})),(x.matchesSelector=Bi.test(Rn=xt.matches||xt.webkitMatchesSelector||xt.mozMatchesSelector||xt.oMatchesSelector||xt.msMatchesSelector))&&Et(function(Ee){x.disconnectedMatch=Rn.call(Ee,"*"),Rn.call(Ee,"[s!='']:x"),In.push("!=",ca)}),Pt=Pt.length&&new RegExp(Pt.join("|")),In=In.length&&new RegExp(In.join("|")),de=Bi.test(xt.compareDocumentPosition),Ir=de||Bi.test(xt.contains)?function(Ee,ze){var Ue=9===Ee.nodeType?Ee.documentElement:Ee,ct=ze&&ze.parentNode;return Ee===ct||!(!ct||1!==ct.nodeType||!(Ue.contains?Ue.contains(ct):Ee.compareDocumentPosition&&16&Ee.compareDocumentPosition(ct)))}:function(Ee,ze){if(ze)for(;ze=ze.parentNode;)if(ze===Ee)return!0;return!1},di=de?function(Ee,ze){if(Ee===ze)return Qe=!0,0;var Ue=!Ee.compareDocumentPosition-!ze.compareDocumentPosition;return Ue||(1&(Ue=(Ee.ownerDocument||Ee)==(ze.ownerDocument||ze)?Ee.compareDocumentPosition(ze):1)||!x.sortDetached&&ze.compareDocumentPosition(Ee)===Ue?Ee==Ye||Ee.ownerDocument==It&&Ir(It,Ee)?-1:ze==Ye||ze.ownerDocument==It&&Ir(It,ze)?1:Be?Vi(Be,Ee)-Vi(Be,ze):0:4&Ue?-1:1)}:function(Ee,ze){if(Ee===ze)return Qe=!0,0;var Ue,ct=0,mt=Ee.parentNode,Ct=ze.parentNode,Nt=[Ee],Ft=[ze];if(!mt||!Ct)return Ee==Ye?-1:ze==Ye?1:mt?-1:Ct?1:Be?Vi(Be,Ee)-Vi(Be,ze):0;if(mt===Ct)return Fa(Ee,ze);for(Ue=Ee;Ue=Ue.parentNode;)Nt.unshift(Ue);for(Ue=ze;Ue=Ue.parentNode;)Ft.unshift(Ue);for(;Nt[ct]===Ft[ct];)ct++;return ct?Fa(Nt[ct],Ft[ct]):Nt[ct]==It?-1:Ft[ct]==It?1:0}),Ye},On.matches=function(Z,de){return On(Z,null,null,de)},On.matchesSelector=function(Z,de){if(ke(Z),x.matchesSelector&&Gt&&!jr[de+" "]&&(!In||!In.test(de))&&(!Pt||!Pt.test(de)))try{var be=Rn.call(Z,de);if(be||x.disconnectedMatch||Z.document&&11!==Z.document.nodeType)return be}catch($e){jr(de,!0)}return On(de,Ye,null,[Z]).length>0},On.contains=function(Z,de){return(Z.ownerDocument||Z)!=Ye&&ke(Z),Ir(Z,de)},On.attr=function(Z,de){(Z.ownerDocument||Z)!=Ye&&ke(Z);var be=w.attrHandle[de.toLowerCase()],$e=be&&zr.call(w.attrHandle,de.toLowerCase())?be(Z,de,!Gt):void 0;return void 0!==$e?$e:x.attributes||!Gt?Z.getAttribute(de):($e=Z.getAttributeNode(de))&&$e.specified?$e.value:null},On.escape=function(Z){return(Z+"").replace(io,rr)},On.error=function(Z){throw new Error("Syntax error, unrecognized expression: "+Z)},On.uniqueSort=function(Z){var de,be=[],$e=0,Ee=0;if(Qe=!x.detectDuplicates,Be=!x.sortStable&&Z.slice(0),Z.sort(di),Qe){for(;de=Z[Ee++];)de===Z[Ee]&&($e=be.push(Ee));for(;$e--;)Z.splice(be[$e],1)}return Be=null,Z},R=On.getText=function(Z){var de,be="",$e=0,Ee=Z.nodeType;if(Ee){if(1===Ee||9===Ee||11===Ee){if("string"==typeof Z.textContent)return Z.textContent;for(Z=Z.firstChild;Z;Z=Z.nextSibling)be+=R(Z)}else if(3===Ee||4===Ee)return Z.nodeValue}else for(;de=Z[$e++];)be+=R(de);return be},(w=On.selectors={cacheLength:50,createPseudo:er,match:Da,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Z){return Z[1]=Z[1].replace(Qr,_i),Z[3]=(Z[3]||Z[4]||Z[5]||"").replace(Qr,_i),"~="===Z[2]&&(Z[3]=" "+Z[3]+" "),Z.slice(0,4)},CHILD:function(Z){return Z[1]=Z[1].toLowerCase(),"nth"===Z[1].slice(0,3)?(Z[3]||On.error(Z[0]),Z[4]=+(Z[4]?Z[5]+(Z[6]||1):2*("even"===Z[3]||"odd"===Z[3])),Z[5]=+(Z[7]+Z[8]||"odd"===Z[3])):Z[3]&&On.error(Z[0]),Z},PSEUDO:function(Z){var de,be=!Z[6]&&Z[2];return Da.CHILD.test(Z[0])?null:(Z[3]?Z[2]=Z[4]||Z[5]||"":be&&Ws.test(be)&&(de=X(be,!0))&&(de=be.indexOf(")",be.length-de)-be.length)&&(Z[0]=Z[0].slice(0,de),Z[2]=be.slice(0,de)),Z.slice(0,3))}},filter:{TAG:function(Z){var de=Z.replace(Qr,_i).toLowerCase();return"*"===Z?function(){return!0}:function(be){return be.nodeName&&be.nodeName.toLowerCase()===de}},CLASS:function(Z){var de=Fe[Z+" "];return de||(de=new RegExp("(^|"+Tn+")"+Z+"("+Tn+"|$)"))&&Fe(Z,function(be){return de.test("string"==typeof be.className&&be.className||void 0!==be.getAttribute&&be.getAttribute("class")||"")})},ATTR:function(Z,de,be){return function($e){var Ee=On.attr($e,Z);return null==Ee?"!="===de:!de||(Ee+="","="===de?Ee===be:"!="===de?Ee!==be:"^="===de?be&&0===Ee.indexOf(be):"*="===de?be&&Ee.indexOf(be)>-1:"$="===de?be&&Ee.slice(-be.length)===be:"~="===de?(" "+Ee.replace(ku," ")+" ").indexOf(be)>-1:"|="===de&&(Ee===be||Ee.slice(0,be.length+1)===be+"-"))}},CHILD:function(Z,de,be,$e,Ee){var ze="nth"!==Z.slice(0,3),Ue="last"!==Z.slice(-4),ct="of-type"===de;return 1===$e&&0===Ee?function(mt){return!!mt.parentNode}:function(mt,Ct,Nt){var Ft,Lt,En,ft,gn,xn,Qn=ze!==Ue?"nextSibling":"previousSibling",rn=mt.parentNode,To=ct&&mt.nodeName.toLowerCase(),br=!Nt&&!ct,Rr=!1;if(rn){if(ze){for(;Qn;){for(ft=mt;ft=ft[Qn];)if(ct?ft.nodeName.toLowerCase()===To:1===ft.nodeType)return!1;xn=Qn="only"===Z&&!xn&&"nextSibling"}return!0}if(xn=[Ue?rn.firstChild:rn.lastChild],Ue&&br){for(Rr=(gn=(Ft=(Lt=(En=(ft=rn)[Ot]||(ft[Ot]={}))[ft.uniqueID]||(En[ft.uniqueID]={}))[Z]||[])[0]===yr&&Ft[1])&&Ft[2],ft=gn&&rn.childNodes[gn];ft=++gn&&ft&&ft[Qn]||(Rr=gn=0)||xn.pop();)if(1===ft.nodeType&&++Rr&&ft===mt){Lt[Z]=[yr,gn,Rr];break}}else if(br&&(Rr=gn=(Ft=(Lt=(En=(ft=mt)[Ot]||(ft[Ot]={}))[ft.uniqueID]||(En[ft.uniqueID]={}))[Z]||[])[0]===yr&&Ft[1]),!1===Rr)for(;(ft=++gn&&ft&&ft[Qn]||(Rr=gn=0)||xn.pop())&&((ct?ft.nodeName.toLowerCase()!==To:1!==ft.nodeType)||!++Rr||(br&&((Lt=(En=ft[Ot]||(ft[Ot]={}))[ft.uniqueID]||(En[ft.uniqueID]={}))[Z]=[yr,Rr]),ft!==mt)););return(Rr-=Ee)===$e||Rr%$e==0&&Rr/$e>=0}}},PSEUDO:function(Z,de){var be,$e=w.pseudos[Z]||w.setFilters[Z.toLowerCase()]||On.error("unsupported pseudo: "+Z);return $e[Ot]?$e(de):$e.length>1?(be=[Z,Z,"",de],w.setFilters.hasOwnProperty(Z.toLowerCase())?er(function(Ee,ze){for(var Ue,ct=$e(Ee,de),mt=ct.length;mt--;)Ee[Ue=Vi(Ee,ct[mt])]=!(ze[Ue]=ct[mt])}):function(Ee){return $e(Ee,0,be)}):$e}},pseudos:{not:er(function(Z){var de=[],be=[],$e=ce(Z.replace(kn,"$1"));return $e[Ot]?er(function(Ee,ze,Ue,ct){for(var mt,Ct=$e(Ee,null,ct,[]),Nt=Ee.length;Nt--;)(mt=Ct[Nt])&&(Ee[Nt]=!(ze[Nt]=mt))}):function(Ee,ze,Ue){return de[0]=Ee,$e(de,null,Ue,be),de[0]=null,!be.pop()}}),has:er(function(Z){return function(de){return On(Z,de).length>0}}),contains:er(function(Z){return Z=Z.replace(Qr,_i),function(de){return(de.textContent||R(de)).indexOf(Z)>-1}}),lang:er(function(Z){return Gl.test(Z||"")||On.error("unsupported lang: "+Z),Z=Z.replace(Qr,_i).toLowerCase(),function(de){var be;do{if(be=Gt?de.lang:de.getAttribute("xml:lang")||de.getAttribute("lang"))return(be=be.toLowerCase())===Z||0===be.indexOf(Z+"-")}while((de=de.parentNode)&&1===de.nodeType);return!1}}),target:function(Z){var de=l.location&&l.location.hash;return de&&de.slice(1)===Z.id},root:function(Z){return Z===xt},focus:function(Z){return Z===Ye.activeElement&&(!Ye.hasFocus||Ye.hasFocus())&&!!(Z.type||Z.href||~Z.tabIndex)},enabled:fa(!1),disabled:fa(!0),checked:function(Z){var de=Z.nodeName.toLowerCase();return"input"===de&&!!Z.checked||"option"===de&&!!Z.selected},selected:function(Z){return!0===Z.selected},empty:function(Z){for(Z=Z.firstChild;Z;Z=Z.nextSibling)if(Z.nodeType<6)return!1;return!0},parent:function(Z){return!w.pseudos.empty(Z)},header:function(Z){return Lu.test(Z.nodeName)},input:function(Z){return $l.test(Z.nodeName)},button:function(Z){var de=Z.nodeName.toLowerCase();return"input"===de&&"button"===Z.type||"button"===de},text:function(Z){var de;return"input"===Z.nodeName.toLowerCase()&&"text"===Z.type&&(null==(de=Z.getAttribute("type"))||"text"===de.toLowerCase())},first:ir(function(){return[0]}),last:ir(function(Z,de){return[de-1]}),eq:ir(function(Z,de,be){return[be<0?be+de:be]}),even:ir(function(Z,de){for(var be=0;be<de;be+=2)Z.push(be);return Z}),odd:ir(function(Z,de){for(var be=1;be<de;be+=2)Z.push(be);return Z}),lt:ir(function(Z,de,be){for(var $e=be<0?be+de:be>de?de:be;--$e>=0;)Z.push($e);return Z}),gt:ir(function(Z,de,be){for(var $e=be<0?be+de:be;++$e<de;)Z.push($e);return Z})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[h]=hi(h);for(h in{submit:!0,reset:!0})w.pseudos[h]=$s(h);function Ge(){}function Ve(Z){for(var de=0,be=Z.length,$e="";de<be;de++)$e+=Z[de].value;return $e}function et(Z,de,be){var $e=de.dir,Ee=de.next,ze=Ee||$e,Ue=be&&"parentNode"===ze,ct=_n++;return de.first?function(mt,Ct,Nt){for(;mt=mt[$e];)if(1===mt.nodeType||Ue)return Z(mt,Ct,Nt);return!1}:function(mt,Ct,Nt){var Ft,Lt,En,ft=[yr,ct];if(Nt){for(;mt=mt[$e];)if((1===mt.nodeType||Ue)&&Z(mt,Ct,Nt))return!0}else for(;mt=mt[$e];)if(1===mt.nodeType||Ue)if(Lt=(En=mt[Ot]||(mt[Ot]={}))[mt.uniqueID]||(En[mt.uniqueID]={}),Ee&&Ee===mt.nodeName.toLowerCase())mt=mt[$e]||mt;else{if((Ft=Lt[ze])&&Ft[0]===yr&&Ft[1]===ct)return ft[2]=Ft[2];if(Lt[ze]=ft,ft[2]=Z(mt,Ct,Nt))return!0}return!1}}function St(Z){return Z.length>1?function(de,be,$e){for(var Ee=Z.length;Ee--;)if(!Z[Ee](de,be,$e))return!1;return!0}:Z[0]}function Kn(Z,de,be,$e,Ee){for(var ze,Ue=[],ct=0,mt=Z.length,Ct=null!=de;ct<mt;ct++)(ze=Z[ct])&&(!be||be(ze,$e,Ee))&&(Ue.push(ze),Ct&&de.push(ct));return Ue}function An(Z,de,be,$e,Ee,ze){return $e&&!$e[Ot]&&($e=An($e)),Ee&&!Ee[Ot]&&(Ee=An(Ee,ze)),er(function(Ue,ct,mt,Ct){var Nt,Ft,Lt,En=[],ft=[],gn=ct.length,xn=Ue||function _t(Z,de,be){for(var $e=0,Ee=de.length;$e<Ee;$e++)On(Z,de[$e],be);return be}(de||"*",mt.nodeType?[mt]:mt,[]),Qn=!Z||!Ue&&de?xn:Kn(xn,En,Z,mt,Ct),rn=be?Ee||(Ue?Z:gn||$e)?[]:ct:Qn;if(be&&be(Qn,rn,mt,Ct),$e)for(Nt=Kn(rn,ft),$e(Nt,[],mt,Ct),Ft=Nt.length;Ft--;)(Lt=Nt[Ft])&&(rn[ft[Ft]]=!(Qn[ft[Ft]]=Lt));if(Ue){if(Ee||Z){if(Ee){for(Nt=[],Ft=rn.length;Ft--;)(Lt=rn[Ft])&&Nt.push(Qn[Ft]=Lt);Ee(null,rn=[],Nt,Ct)}for(Ft=rn.length;Ft--;)(Lt=rn[Ft])&&(Nt=Ee?Vi(Ue,Lt):En[Ft])>-1&&(Ue[Nt]=!(ct[Nt]=Lt))}}else rn=Kn(rn===ct?rn.splice(gn,rn.length):rn),Ee?Ee(null,ct,rn,Ct):bi.apply(ct,rn)})}function Va(Z){for(var de,be,$e,Ee=Z.length,ze=w.relative[Z[0].type],Ue=ze||w.relative[" "],ct=ze?1:0,mt=et(function(Ft){return Ft===de},Ue,!0),Ct=et(function(Ft){return Vi(de,Ft)>-1},Ue,!0),Nt=[function(Ft,Lt,En){var ft=!ze&&(En||Lt!==Ae)||((de=Lt).nodeType?mt(Ft,Lt,En):Ct(Ft,Lt,En));return de=null,ft}];ct<Ee;ct++)if(be=w.relative[Z[ct].type])Nt=[et(St(Nt),be)];else{if((be=w.filter[Z[ct].type].apply(null,Z[ct].matches))[Ot]){for($e=++ct;$e<Ee&&!w.relative[Z[$e].type];$e++);return An(ct>1&&St(Nt),ct>1&&Ve(Z.slice(0,ct-1).concat({value:" "===Z[ct-2].type?"*":""})).replace(kn,"$1"),be,ct<$e&&Va(Z.slice(ct,$e)),$e<Ee&&Va(Z=Z.slice($e)),$e<Ee&&Ve(Z))}Nt.push(be)}return St(Nt)}return Ge.prototype=w.filters=w.pseudos,w.setFilters=new Ge,X=On.tokenize=function(Z,de){var be,$e,Ee,ze,Ue,ct,mt,Ct=xr[Z+" "];if(Ct)return de?0:Ct.slice(0);for(Ue=Z,ct=[],mt=w.preFilter;Ue;){for(ze in(!be||($e=ys.exec(Ue)))&&($e&&(Ue=Ue.slice($e[0].length)||Ue),ct.push(Ee=[])),be=!1,($e=Yo.exec(Ue))&&(be=$e.shift(),Ee.push({value:be,type:$e[0].replace(kn," ")}),Ue=Ue.slice(be.length)),w.filter)($e=Da[ze].exec(Ue))&&(!mt[ze]||($e=mt[ze]($e)))&&(be=$e.shift(),Ee.push({value:be,type:ze,matches:$e}),Ue=Ue.slice(be.length));if(!be)break}return de?Ue.length:Ue?On.error(Z):xr(Z,ct).slice(0)},ce=On.compile=function(Z,de){var be,$e=[],Ee=[],ze=Or[Z+" "];if(!ze){for(de||(de=X(Z)),be=de.length;be--;)(ze=Va(de[be]))[Ot]?$e.push(ze):Ee.push(ze);ze=Or(Z,function Ru(Z,de){var be=de.length>0,$e=Z.length>0,Ee=function(ze,Ue,ct,mt,Ct){var Nt,Ft,Lt,En=0,ft="0",gn=ze&&[],xn=[],Qn=Ae,rn=ze||$e&&w.find.TAG("*",Ct),To=yr+=null==Qn?1:Math.random()||.1,br=rn.length;for(Ct&&(Ae=Ue==Ye||Ue||Ct);ft!==br&&null!=(Nt=rn[ft]);ft++){if($e&&Nt){for(Ft=0,!Ue&&Nt.ownerDocument!=Ye&&(ke(Nt),ct=!Gt);Lt=Z[Ft++];)if(Lt(Nt,Ue||Ye,ct)){mt.push(Nt);break}Ct&&(yr=To)}be&&((Nt=!Lt&&Nt)&&En--,ze&&gn.push(Nt))}if(En+=ft,be&&ft!==En){for(Ft=0;Lt=de[Ft++];)Lt(gn,xn,Ue,ct);if(ze){if(En>0)for(;ft--;)gn[ft]||xn[ft]||(xn[ft]=Fi.call(mt));xn=Kn(xn)}bi.apply(mt,xn),Ct&&!ze&&xn.length>0&&En+de.length>1&&On.uniqueSort(mt)}return Ct&&(yr=To,Ae=Qn),gn};return be?er(Ee):Ee}(Ee,$e)),ze.selector=Z}return ze},le=On.select=function(Z,de,be,$e){var Ee,ze,Ue,ct,mt,Ct="function"==typeof Z&&Z,Nt=!$e&&X(Z=Ct.selector||Z);if(be=be||[],1===Nt.length){if((ze=Nt[0]=Nt[0].slice(0)).length>2&&"ID"===(Ue=ze[0]).type&&9===de.nodeType&&Gt&&w.relative[ze[1].type]){if(!(de=(w.find.ID(Ue.matches[0].replace(Qr,_i),de)||[])[0]))return be;Ct&&(de=de.parentNode),Z=Z.slice(ze.shift().value.length)}for(Ee=Da.needsContext.test(Z)?0:ze.length;Ee--&&!w.relative[ct=(Ue=ze[Ee]).type];)if((mt=w.find[ct])&&($e=mt(Ue.matches[0].replace(Qr,_i),xs.test(ze[0].type)&&xe(de.parentNode)||de))){if(ze.splice(Ee,1),!(Z=$e.length&&Ve(ze)))return bi.apply(be,$e),be;break}}return(Ct||ce(Z,Nt))($e,de,!Gt,be,!de||xs.test(Z)&&xe(de.parentNode)||de),be},x.sortStable=Ot.split("").sort(di).join("")===Ot,x.detectDuplicates=!!Qe,ke(),x.sortDetached=Et(function(Z){return 1&Z.compareDocumentPosition(Ye.createElement("fieldset"))}),Et(function(Z){return Z.innerHTML="<a href='#'></a>","#"===Z.firstChild.getAttribute("href")})||Nr("type|href|height|width",function(Z,de,be){if(!be)return Z.getAttribute(de,"type"===de.toLowerCase()?1:2)}),(!x.attributes||!Et(function(Z){return Z.innerHTML="<input/>",Z.firstChild.setAttribute("value",""),""===Z.firstChild.getAttribute("value")}))&&Nr("value",function(Z,de,be){if(!be&&"input"===Z.nodeName.toLowerCase())return Z.defaultValue}),Et(function(Z){return null==Z.getAttribute("disabled")})||Nr(ro,function(Z,de,be){var $e;if(!be)return!0===Z[de]?de.toLowerCase():($e=Z.getAttributeNode(de))&&$e.specified?$e.value:null}),On}(g);C.find=Je,C.expr=Je.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=Je.uniqueSort,C.text=Je.getText,C.isXMLDoc=Je.isXML,C.contains=Je.contains,C.escapeSelector=Je.escape;var Ke=function(l,h,x){for(var w=[],R=void 0!==x;(l=l[h])&&9!==l.nodeType;)if(1===l.nodeType){if(R&&C(l).is(x))break;w.push(l)}return w},tt=function(l,h){for(var x=[];l;l=l.nextSibling)1===l.nodeType&&l!==h&&x.push(l);return x},it=C.expr.match.needsContext;function dt(l,h){return l.nodeName&&l.nodeName.toLowerCase()===h.toLowerCase()}var wt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function jt(l,h,x){return ue(h)?C.grep(l,function(w,R){return!!h.call(w,R,w)!==x}):h.nodeType?C.grep(l,function(w){return w===h!==x}):"string"!=typeof h?C.grep(l,function(w){return j.call(h,w)>-1!==x}):C.filter(h,l,x)}C.filter=function(l,h,x){var w=h[0];return x&&(l=":not("+l+")"),1===h.length&&1===w.nodeType?C.find.matchesSelector(w,l)?[w]:[]:C.find.matches(l,C.grep(h,function(R){return 1===R.nodeType}))},C.fn.extend({find:function(l){var h,x,w=this.length,R=this;if("string"!=typeof l)return this.pushStack(C(l).filter(function(){for(h=0;h<w;h++)if(C.contains(R[h],this))return!0}));for(x=this.pushStack([]),h=0;h<w;h++)C.find(l,R[h],x);return w>1?C.uniqueSort(x):x},filter:function(l){return this.pushStack(jt(this,l||[],!1))},not:function(l){return this.pushStack(jt(this,l||[],!0))},is:function(l){return!!jt(this,"string"==typeof l&&it.test(l)?C(l):l||[],!1).length}});var qt,Mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Yn=C.fn.init=function(l,h,x){var w,R;if(!l)return this;if(x=x||qt,"string"==typeof l){if(!(w="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:Mt.exec(l))||!w[1]&&h)return!h||h.jquery?(h||x).find(l):this.constructor(h).find(l);if(w[1]){if(C.merge(this,C.parseHTML(w[1],(h=h instanceof C?h[0]:h)&&h.nodeType?h.ownerDocument||h:he,!0)),wt.test(w[1])&&C.isPlainObject(h))for(w in h)ue(this[w])?this[w](h[w]):this.attr(w,h[w]);return this}return(R=he.getElementById(w[2]))&&(this[0]=R,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):ue(l)?void 0!==x.ready?x.ready(l):l(C):C.makeArray(l,this)};Yn.prototype=C.fn,qt=C(he);var wr=/^(?:parents|prev(?:Until|All))/,Sr={children:!0,contents:!0,next:!0,prev:!0};function Ne(l,h){for(;(l=l[h])&&1!==l.nodeType;);return l}C.fn.extend({has:function(l){var h=C(l,this),x=h.length;return this.filter(function(){for(var w=0;w<x;w++)if(C.contains(this,h[w]))return!0})},closest:function(l,h){var x,w=0,R=this.length,H=[],X="string"!=typeof l&&C(l);if(!it.test(l))for(;w<R;w++)for(x=this[w];x&&x!==h;x=x.parentNode)if(x.nodeType<11&&(X?X.index(x)>-1:1===x.nodeType&&C.find.matchesSelector(x,l))){H.push(x);break}return this.pushStack(H.length>1?C.uniqueSort(H):H)},index:function(l){return l?"string"==typeof l?j.call(C(l),this[0]):j.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,h){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(l,h))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),C.each({parent:function(l){var h=l.parentNode;return h&&11!==h.nodeType?h:null},parents:function(l){return Ke(l,"parentNode")},parentsUntil:function(l,h,x){return Ke(l,"parentNode",x)},next:function(l){return Ne(l,"nextSibling")},prev:function(l){return Ne(l,"previousSibling")},nextAll:function(l){return Ke(l,"nextSibling")},prevAll:function(l){return Ke(l,"previousSibling")},nextUntil:function(l,h,x){return Ke(l,"nextSibling",x)},prevUntil:function(l,h,x){return Ke(l,"previousSibling",x)},siblings:function(l){return tt((l.parentNode||{}).firstChild,l)},children:function(l){return tt(l.firstChild)},contents:function(l){return null!=l.contentDocument&&b(l.contentDocument)?l.contentDocument:(dt(l,"template")&&(l=l.content||l),C.merge([],l.childNodes))}},function(l,h){C.fn[l]=function(x,w){var R=C.map(this,h,x);return"Until"!==l.slice(-5)&&(w=x),w&&"string"==typeof w&&(R=C.filter(w,R)),this.length>1&&(Sr[l]||C.uniqueSort(R),wr.test(l)&&R.reverse()),this.pushStack(R)}});var vn=/[^\x20\t\r\n\f]+/g;function wn(l){return l}function je(l){throw l}function _e(l,h,x,w){var R;try{l&&ue(R=l.promise)?R.call(l).done(h).fail(x):l&&ue(R=l.then)?R.call(l,h,x):h.apply(void 0,[l].slice(w))}catch(H){x.apply(void 0,[H])}}C.Callbacks=function(l){l="string"==typeof l?function tr(l){var h={};return C.each(l.match(vn)||[],function(x,w){h[w]=!0}),h}(l):C.extend({},l);var h,x,w,R,H=[],X=[],ce=-1,le=function(){for(R=R||l.once,w=h=!0;X.length;ce=-1)for(x=X.shift();++ce<H.length;)!1===H[ce].apply(x[0],x[1])&&l.stopOnFalse&&(ce=H.length,x=!1);l.memory||(x=!1),h=!1,R&&(H=x?[]:"")},Ae={add:function(){return H&&(x&&!h&&(ce=H.length-1,X.push(x)),function Be(Qe){C.each(Qe,function(ke,Ye){ue(Ye)?(!l.unique||!Ae.has(Ye))&&H.push(Ye):Ye&&Ye.length&&"string"!==Ie(Ye)&&Be(Ye)})}(arguments),x&&!h&&le()),this},remove:function(){return C.each(arguments,function(Be,Qe){for(var ke;(ke=C.inArray(Qe,H,ke))>-1;)H.splice(ke,1),ke<=ce&&ce--}),this},has:function(Be){return Be?C.inArray(Be,H)>-1:H.length>0},empty:function(){return H&&(H=[]),this},disable:function(){return R=X=[],H=x="",this},disabled:function(){return!H},lock:function(){return R=X=[],!x&&!h&&(H=x=""),this},locked:function(){return!!R},fireWith:function(Be,Qe){return R||(Qe=[Be,(Qe=Qe||[]).slice?Qe.slice():Qe],X.push(Qe),h||le()),this},fire:function(){return Ae.fireWith(this,arguments),this},fired:function(){return!!w}};return Ae},C.extend({Deferred:function(l){var h=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],x="pending",w={state:function(){return x},always:function(){return R.done(arguments).fail(arguments),this},catch:function(H){return w.then(null,H)},pipe:function(){var H=arguments;return C.Deferred(function(X){C.each(h,function(ce,le){var Ae=ue(H[le[4]])&&H[le[4]];R[le[1]](function(){var Be=Ae&&Ae.apply(this,arguments);Be&&ue(Be.promise)?Be.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[le[0]+"With"](this,Ae?[Be]:arguments)})}),H=null}).promise()},then:function(H,X,ce){var le=0;function Ae(Be,Qe,ke,Ye){return function(){var xt=this,Gt=arguments,Pt=function(){var Rn,Ir;if(!(Be<le)){if((Rn=ke.apply(xt,Gt))===Qe.promise())throw new TypeError("Thenable self-resolution");ue(Ir=Rn&&("object"==typeof Rn||"function"==typeof Rn)&&Rn.then)?Ye?Ir.call(Rn,Ae(le,Qe,wn,Ye),Ae(le,Qe,je,Ye)):(le++,Ir.call(Rn,Ae(le,Qe,wn,Ye),Ae(le,Qe,je,Ye),Ae(le,Qe,wn,Qe.notifyWith))):(ke!==wn&&(xt=void 0,Gt=[Rn]),(Ye||Qe.resolveWith)(xt,Gt))}},In=Ye?Pt:function(){try{Pt()}catch(Rn){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(Rn,In.stackTrace),Be+1>=le&&(ke!==je&&(xt=void 0,Gt=[Rn]),Qe.rejectWith(xt,Gt))}};Be?In():(C.Deferred.getStackHook&&(In.stackTrace=C.Deferred.getStackHook()),g.setTimeout(In))}}return C.Deferred(function(Be){h[0][3].add(Ae(0,Be,ue(ce)?ce:wn,Be.notifyWith)),h[1][3].add(Ae(0,Be,ue(H)?H:wn)),h[2][3].add(Ae(0,Be,ue(X)?X:je))}).promise()},promise:function(H){return null!=H?C.extend(H,w):w}},R={};return C.each(h,function(H,X){var ce=X[2],le=X[5];w[X[1]]=ce.add,le&&ce.add(function(){x=le},h[3-H][2].disable,h[3-H][3].disable,h[0][2].lock,h[0][3].lock),ce.add(X[3].fire),R[X[0]]=function(){return R[X[0]+"With"](this===R?void 0:this,arguments),this},R[X[0]+"With"]=ce.fireWith}),w.promise(R),l&&l.call(R,R),R},when:function(l){var h=arguments.length,x=h,w=Array(x),R=M.call(arguments),H=C.Deferred(),X=function(ce){return function(le){w[ce]=this,R[ce]=arguments.length>1?M.call(arguments):le,--h||H.resolveWith(w,R)}};if(h<=1&&(_e(l,H.done(X(x)).resolve,H.reject,!h),"pending"===H.state()||ue(R[x]&&R[x].then)))return H.then();for(;x--;)_e(R[x],X(x),H.reject);return H.promise()}});var Ze=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(l,h){g.console&&g.console.warn&&l&&Ze.test(l.name)&&g.console.warn("jQuery.Deferred exception: "+l.message,l.stack,h)},C.readyException=function(l){g.setTimeout(function(){throw l})};var ht=C.Deferred();function bt(){he.removeEventListener("DOMContentLoaded",bt),g.removeEventListener("load",bt),C.ready()}C.fn.ready=function(l){return ht.then(l).catch(function(h){C.readyException(h)}),this},C.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--C.readyWait:C.isReady)||(C.isReady=!0,!(!0!==l&&--C.readyWait>0)&&ht.resolveWith(he,[C]))}}),C.ready.then=ht.then,"complete"===he.readyState||"loading"!==he.readyState&&!he.documentElement.doScroll?g.setTimeout(C.ready):(he.addEventListener("DOMContentLoaded",bt),g.addEventListener("load",bt));var an=function(l,h,x,w,R,H,X){var ce=0,le=l.length,Ae=null==x;if("object"===Ie(x))for(ce in R=!0,x)an(l,h,ce,x[ce],!0,H,X);else if(void 0!==w&&(R=!0,ue(w)||(X=!0),Ae&&(X?(h.call(l,w),h=null):(Ae=h,h=function(Be,Qe,ke){return Ae.call(C(Be),ke)})),h))for(;ce<le;ce++)h(l[ce],x,X?w:w.call(l[ce],ce,h(l[ce],x)));return R?l:Ae?h.call(l):le?h(l[0],x):H},yn=/^-ms-/,Vn=/-([a-z])/g;function si(l,h){return h.toUpperCase()}function Kt(l){return l.replace(yn,"ms-").replace(Vn,si)}var zt=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function B(){this.expando=C.expando+B.uid++}B.uid=1,B.prototype={cache:function(l){var h=l[this.expando];return h||(h={},zt(l)&&(l.nodeType?l[this.expando]=h:Object.defineProperty(l,this.expando,{value:h,configurable:!0}))),h},set:function(l,h,x){var w,R=this.cache(l);if("string"==typeof h)R[Kt(h)]=x;else for(w in h)R[Kt(w)]=h[w];return R},get:function(l,h){return void 0===h?this.cache(l):l[this.expando]&&l[this.expando][Kt(h)]},access:function(l,h,x){return void 0===h||h&&"string"==typeof h&&void 0===x?this.get(l,h):(this.set(l,h,x),void 0!==x?x:h)},remove:function(l,h){var x,w=l[this.expando];if(void 0!==w){if(void 0!==h)for((x=(h=Array.isArray(h)?h.map(Kt):(h=Kt(h))in w?[h]:h.match(vn)||[]).length);x--;)delete w[h[x]];(void 0===h||C.isEmptyObject(w))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var h=l[this.expando];return void 0!==h&&!C.isEmptyObject(h)}};var G=new B,ie=new B,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,We=/[A-Z]/g;function gt(l,h,x){var w;if(void 0===x&&1===l.nodeType)if(w="data-"+h.replace(We,"-$&").toLowerCase(),"string"==typeof(x=l.getAttribute(w))){try{x=function Xe(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:ye.test(l)?JSON.parse(l):l)}(x)}catch(R){}ie.set(l,h,x)}else x=void 0;return x}C.extend({hasData:function(l){return ie.hasData(l)||G.hasData(l)},data:function(l,h,x){return ie.access(l,h,x)},removeData:function(l,h){ie.remove(l,h)},_data:function(l,h,x){return G.access(l,h,x)},_removeData:function(l,h){G.remove(l,h)}}),C.fn.extend({data:function(l,h){var x,w,R,H=this[0],X=H&&H.attributes;if(void 0===l){if(this.length&&(R=ie.get(H),1===H.nodeType&&!G.get(H,"hasDataAttrs"))){for(x=X.length;x--;)X[x]&&0===(w=X[x].name).indexOf("data-")&&(w=Kt(w.slice(5)),gt(H,w,R[w]));G.set(H,"hasDataAttrs",!0)}return R}return"object"==typeof l?this.each(function(){ie.set(this,l)}):an(this,function(ce){var le;if(H&&void 0===ce)return void 0!==(le=ie.get(H,l))||void 0!==(le=gt(H,l))?le:void 0;this.each(function(){ie.set(this,l,ce)})},null,h,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){ie.remove(this,l)})}}),C.extend({queue:function(l,h,x){var w;if(l)return w=G.get(l,h=(h||"fx")+"queue"),x&&(!w||Array.isArray(x)?w=G.access(l,h,C.makeArray(x)):w.push(x)),w||[]},dequeue:function(l,h){var x=C.queue(l,h=h||"fx"),w=x.length,R=x.shift(),H=C._queueHooks(l,h);"inprogress"===R&&(R=x.shift(),w--),R&&("fx"===h&&x.unshift("inprogress"),delete H.stop,R.call(l,function(){C.dequeue(l,h)},H)),!w&&H&&H.empty.fire()},_queueHooks:function(l,h){var x=h+"queueHooks";return G.get(l,x)||G.access(l,x,{empty:C.Callbacks("once memory").add(function(){G.remove(l,[h+"queue",x])})})}}),C.fn.extend({queue:function(l,h){var x=2;return"string"!=typeof l&&(h=l,l="fx",x--),arguments.length<x?C.queue(this[0],l):void 0===h?this:this.each(function(){var w=C.queue(this,l,h);C._queueHooks(this,l),"fx"===l&&"inprogress"!==w[0]&&C.dequeue(this,l)})},dequeue:function(l){return this.each(function(){C.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,h){var x,w=1,R=C.Deferred(),H=this,X=this.length,ce=function(){--w||R.resolveWith(H,[H])};for("string"!=typeof l&&(h=l,l=void 0),l=l||"fx";X--;)(x=G.get(H[X],l+"queueHooks"))&&x.empty&&(w++,x.empty.add(ce));return ce(),R.promise(h)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vt=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),sn=["Top","Right","Bottom","Left"],nn=he.documentElement,un=function(l){return C.contains(l.ownerDocument,l)},Bn={composed:!0};nn.getRootNode&&(un=function(l){return C.contains(l.ownerDocument,l)||l.getRootNode(Bn)===l.ownerDocument});var Dn=function(l,h){return"none"===(l=h||l).style.display||""===l.style.display&&un(l)&&"none"===C.css(l,"display")};function Vr(l,h,x,w){var R,H,X=20,ce=w?function(){return w.cur()}:function(){return C.css(l,h,"")},le=ce(),Ae=x&&x[3]||(C.cssNumber[h]?"":"px"),Be=l.nodeType&&(C.cssNumber[h]||"px"!==Ae&&+le)&&Vt.exec(C.css(l,h));if(Be&&Be[3]!==Ae){for(Ae=Ae||Be[3],Be=+(le/=2)||1;X--;)C.style(l,h,Be+Ae),(1-H)*(1-(H=ce()/le||.5))<=0&&(X=0),Be/=H;C.style(l,h,(Be*=2)+Ae),x=x||[]}return x&&(Be=+Be||+le||0,R=x[1]?Be+(x[1]+1)*x[2]:+x[2],w&&(w.unit=Ae,w.start=Be,w.end=R)),R}var Pn={};function Hn(l){var h,x=l.ownerDocument,w=l.nodeName,R=Pn[w];return R||(h=x.body.appendChild(x.createElement(w)),R=C.css(h,"display"),h.parentNode.removeChild(h),"none"===R&&(R="block"),Pn[w]=R,R)}function Fn(l,h){for(var x,w,R=[],H=0,X=l.length;H<X;H++)(w=l[H]).style&&(x=w.style.display,h?("none"===x&&(R[H]=G.get(w,"display")||null,R[H]||(w.style.display="")),""===w.style.display&&Dn(w)&&(R[H]=Hn(w))):"none"!==x&&(R[H]="none",G.set(w,"display",x)));for(H=0;H<X;H++)null!=R[H]&&(l[H].style.display=R[H]);return l}C.fn.extend({show:function(){return Fn(this,!0)},hide:function(){return Fn(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Dn(this)?C(this).show():C(this).hide()})}});var h,x,Wn=/^(?:checkbox|radio)$/i,dr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Br=/^$|^module$|\/(?:java|ecma)script/i;h=he.createDocumentFragment().appendChild(he.createElement("div")),(x=he.createElement("input")).setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),h.appendChild(x),i.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",i.option=!!h.lastChild;var nr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Zn(l,h){var x;return x=void 0!==l.getElementsByTagName?l.getElementsByTagName(h||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(h||"*"):[],void 0===h||h&&dt(l,h)?C.merge([l],x):x}function go(l,h){for(var x=0,w=l.length;x<w;x++)G.set(l[x],"globalEval",!h||G.get(h[x],"globalEval"))}nr.tbody=nr.tfoot=nr.colgroup=nr.caption=nr.thead,nr.th=nr.td,i.option||(nr.optgroup=nr.option=[1,"<select multiple='multiple'>","</select>"]);var Aa=/<|&#?\w+;/;function Ki(l,h,x,w,R){for(var H,X,ce,le,Ae,Be,Qe=h.createDocumentFragment(),ke=[],Ye=0,xt=l.length;Ye<xt;Ye++)if((H=l[Ye])||0===H)if("object"===Ie(H))C.merge(ke,H.nodeType?[H]:H);else if(Aa.test(H)){for(X=X||Qe.appendChild(h.createElement("div")),ce=(dr.exec(H)||["",""])[1].toLowerCase(),X.innerHTML=(le=nr[ce]||nr._default)[1]+C.htmlPrefilter(H)+le[2],Be=le[0];Be--;)X=X.lastChild;C.merge(ke,X.childNodes),(X=Qe.firstChild).textContent=""}else ke.push(h.createTextNode(H));for(Qe.textContent="",Ye=0;H=ke[Ye++];)if(w&&C.inArray(H,w)>-1)R&&R.push(H);else if(Ae=un(H),X=Zn(Qe.appendChild(H),"script"),Ae&&go(X),x)for(Be=0;H=X[Be++];)Br.test(H.type||"")&&x.push(H);return Qe}var Bo=/^([^.]*)(?:\.(.+)|)/;function Yr(){return!0}function cn(){return!1}function vo(l,h){return l===function ra(){try{return he.activeElement}catch(l){}}()==("focus"===h)}function mo(l,h,x,w,R,H){var X,ce;if("object"==typeof h){for(ce in"string"!=typeof x&&(w=w||x,x=void 0),h)mo(l,ce,x,w,h[ce],H);return l}if(null==w&&null==R?(R=x,w=x=void 0):null==R&&("string"==typeof x?(R=w,w=void 0):(R=w,w=x,x=void 0)),!1===R)R=cn;else if(!R)return l;return 1===H&&(X=R,R=function(le){return C().off(le),X.apply(this,arguments)},R.guid=X.guid||(X.guid=C.guid++)),l.each(function(){C.event.add(this,h,R,w,x)})}function Qi(l,h,x){x?(G.set(l,h,!1),C.event.add(l,h,{namespace:!1,handler:function(w){var R,H,X=G.get(this,h);if(1&w.isTrigger&&this[h]){if(X.length)(C.event.special[h]||{}).delegateType&&w.stopPropagation();else if(X=M.call(arguments),G.set(this,h,X),R=x(this,h),this[h](),X!==(H=G.get(this,h))||R?G.set(this,h,!1):H={},X!==H)return w.stopImmediatePropagation(),w.preventDefault(),H&&H.value}else X.length&&(G.set(this,h,{value:C.event.trigger(C.extend(X[0],C.Event.prototype),X.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===G.get(l,h)&&C.event.add(l,h,Yr)}C.event={global:{},add:function(l,h,x,w,R){var H,X,ce,le,Ae,Be,Qe,ke,Ye,xt,Gt,Pt=G.get(l);if(zt(l))for(x.handler&&(x=(H=x).handler,R=H.selector),R&&C.find.matchesSelector(nn,R),x.guid||(x.guid=C.guid++),(le=Pt.events)||(le=Pt.events=Object.create(null)),(X=Pt.handle)||(X=Pt.handle=function(In){return void 0!==C&&C.event.triggered!==In.type?C.event.dispatch.apply(l,arguments):void 0}),Ae=(h=(h||"").match(vn)||[""]).length;Ae--;)Ye=Gt=(ce=Bo.exec(h[Ae])||[])[1],xt=(ce[2]||"").split(".").sort(),Ye&&(Qe=C.event.special[Ye]||{},Qe=C.event.special[Ye=(R?Qe.delegateType:Qe.bindType)||Ye]||{},Be=C.extend({type:Ye,origType:Gt,data:w,handler:x,guid:x.guid,selector:R,needsContext:R&&C.expr.match.needsContext.test(R),namespace:xt.join(".")},H),(ke=le[Ye])||((ke=le[Ye]=[]).delegateCount=0,(!Qe.setup||!1===Qe.setup.call(l,w,xt,X))&&l.addEventListener&&l.addEventListener(Ye,X)),Qe.add&&(Qe.add.call(l,Be),Be.handler.guid||(Be.handler.guid=x.guid)),R?ke.splice(ke.delegateCount++,0,Be):ke.push(Be),C.event.global[Ye]=!0)},remove:function(l,h,x,w,R){var H,X,ce,le,Ae,Be,Qe,ke,Ye,xt,Gt,Pt=G.hasData(l)&&G.get(l);if(Pt&&(le=Pt.events)){for(Ae=(h=(h||"").match(vn)||[""]).length;Ae--;)if(Ye=Gt=(ce=Bo.exec(h[Ae])||[])[1],xt=(ce[2]||"").split(".").sort(),Ye){for(Qe=C.event.special[Ye]||{},ke=le[Ye=(w?Qe.delegateType:Qe.bindType)||Ye]||[],ce=ce[2]&&new RegExp("(^|\\.)"+xt.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=H=ke.length;H--;)Be=ke[H],(R||Gt===Be.origType)&&(!x||x.guid===Be.guid)&&(!ce||ce.test(Be.namespace))&&(!w||w===Be.selector||"**"===w&&Be.selector)&&(ke.splice(H,1),Be.selector&&ke.delegateCount--,Qe.remove&&Qe.remove.call(l,Be));X&&!ke.length&&((!Qe.teardown||!1===Qe.teardown.call(l,xt,Pt.handle))&&C.removeEvent(l,Ye,Pt.handle),delete le[Ye])}else for(Ye in le)C.event.remove(l,Ye+h[Ae],x,w,!0);C.isEmptyObject(le)&&G.remove(l,"handle events")}},dispatch:function(l){var h,x,w,R,H,X,ce=new Array(arguments.length),le=C.event.fix(l),Ae=(G.get(this,"events")||Object.create(null))[le.type]||[],Be=C.event.special[le.type]||{};for(ce[0]=le,h=1;h<arguments.length;h++)ce[h]=arguments[h];if(le.delegateTarget=this,!Be.preDispatch||!1!==Be.preDispatch.call(this,le)){for(X=C.event.handlers.call(this,le,Ae),h=0;(R=X[h++])&&!le.isPropagationStopped();)for(le.currentTarget=R.elem,x=0;(H=R.handlers[x++])&&!le.isImmediatePropagationStopped();)(!le.rnamespace||!1===H.namespace||le.rnamespace.test(H.namespace))&&(le.handleObj=H,le.data=H.data,void 0!==(w=((C.event.special[H.origType]||{}).handle||H.handler).apply(R.elem,ce))&&!1===(le.result=w)&&(le.preventDefault(),le.stopPropagation()));return Be.postDispatch&&Be.postDispatch.call(this,le),le.result}},handlers:function(l,h){var x,w,R,H,X,ce=[],le=h.delegateCount,Ae=l.target;if(le&&Ae.nodeType&&!("click"===l.type&&l.button>=1))for(;Ae!==this;Ae=Ae.parentNode||this)if(1===Ae.nodeType&&("click"!==l.type||!0!==Ae.disabled)){for(H=[],X={},x=0;x<le;x++)void 0===X[R=(w=h[x]).selector+" "]&&(X[R]=w.needsContext?C(R,this).index(Ae)>-1:C.find(R,this,null,[Ae]).length),X[R]&&H.push(w);H.length&&ce.push({elem:Ae,handlers:H})}return Ae=this,le<h.length&&ce.push({elem:Ae,handlers:h.slice(le)}),ce},addProp:function(l,h){Object.defineProperty(C.Event.prototype,l,{enumerable:!0,configurable:!0,get:ue(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(x){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(l){return l[C.expando]?l:new C.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var h=this||l;return Wn.test(h.type)&&h.click&&dt(h,"input")&&Qi(h,"click",Yr),!1},trigger:function(l){var h=this||l;return Wn.test(h.type)&&h.click&&dt(h,"input")&&Qi(h,"click"),!0},_default:function(l){var h=l.target;return Wn.test(h.type)&&h.click&&dt(h,"input")&&G.get(h,"click")||dt(h,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},C.removeEvent=function(l,h,x){l.removeEventListener&&l.removeEventListener(h,x)},C.Event=function(l,h){if(!(this instanceof C.Event))return new C.Event(l,h);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?Yr:cn,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,h&&C.extend(this,h),this.timeStamp=l&&l.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:cn,isPropagationStopped:cn,isImmediatePropagationStopped:cn,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Yr,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Yr,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Yr,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(l,h){C.event.special[l]={setup:function(){return Qi(this,l,vo),!1},trigger:function(){return Qi(this,l),!0},_default:function(){return!0},delegateType:h}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,h){C.event.special[l]={delegateType:h,bindType:h,handle:function(x){var w,R=this,H=x.relatedTarget,X=x.handleObj;return(!H||H!==R&&!C.contains(R,H))&&(x.type=X.origType,w=X.handler.apply(this,arguments),x.type=h),w}}}),C.fn.extend({on:function(l,h,x,w){return mo(this,l,h,x,w)},one:function(l,h,x,w){return mo(this,l,h,x,w,1)},off:function(l,h,x){var w,R;if(l&&l.preventDefault&&l.handleObj)return w=l.handleObj,C(l.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof l){for(R in l)this.off(R,h,l[R]);return this}return(!1===h||"function"==typeof h)&&(x=h,h=void 0),!1===x&&(x=cn),this.each(function(){C.event.remove(this,l,x,h)})}});var Ut=/<script|<style|<link/i,ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ti=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ho(l,h){return dt(l,"table")&&dt(11!==h.nodeType?h:h.firstChild,"tr")&&C(l).children("tbody")[0]||l}function yo(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Ln(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function ui(l,h){var x,w,R,X,ce,le;if(1===h.nodeType){if(G.hasData(l)&&(le=G.get(l).events))for(R in G.remove(h,"handle events"),le)for(x=0,w=le[R].length;x<w;x++)C.event.add(h,R,le[R][x]);ie.hasData(l)&&(X=ie.access(l),ce=C.extend({},X),ie.set(h,ce))}}function Ji(l,h){var x=h.nodeName.toLowerCase();"input"===x&&Wn.test(l.type)?h.checked=l.checked:("input"===x||"textarea"===x)&&(h.defaultValue=l.defaultValue)}function Nn(l,h,x,w){h=O(h);var R,H,X,ce,le,Ae,Be=0,Qe=l.length,ke=Qe-1,Ye=h[0],xt=ue(Ye);if(xt||Qe>1&&"string"==typeof Ye&&!i.checkClone&&ia.test(Ye))return l.each(function(Gt){var Pt=l.eq(Gt);xt&&(h[0]=Ye.call(this,Gt,Pt.html())),Nn(Pt,h,x,w)});if(Qe&&(H=(R=Ki(h,l[0].ownerDocument,!1,l,w)).firstChild,1===R.childNodes.length&&(R=H),H||w)){for(ce=(X=C.map(Zn(R,"script"),yo)).length;Be<Qe;Be++)le=R,Be!==ke&&(le=C.clone(le,!0,!0),ce&&C.merge(X,Zn(le,"script"))),x.call(l[Be],le,Be);if(ce)for(Ae=X[X.length-1].ownerDocument,C.map(X,Ln),Be=0;Be<ce;Be++)Br.test((le=X[Be]).type||"")&&!G.access(le,"globalEval")&&C.contains(Ae,le)&&(le.src&&"module"!==(le.type||"").toLowerCase()?C._evalUrl&&!le.noModule&&C._evalUrl(le.src,{nonce:le.nonce||le.getAttribute("nonce")},Ae):ve(le.textContent.replace(Ti,""),le,Ae))}return l}function xo(l,h,x){for(var w,R=h?C.filter(h,l):l,H=0;null!=(w=R[H]);H++)!x&&1===w.nodeType&&C.cleanData(Zn(w)),w.parentNode&&(x&&un(w)&&go(Zn(w,"script")),w.parentNode.removeChild(w));return l}C.extend({htmlPrefilter:function(l){return l},clone:function(l,h,x){var w,R,H,X,ce=l.cloneNode(!0),le=un(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||C.isXMLDoc(l)))for(X=Zn(ce),w=0,R=(H=Zn(l)).length;w<R;w++)Ji(H[w],X[w]);if(h)if(x)for(H=H||Zn(l),X=X||Zn(ce),w=0,R=H.length;w<R;w++)ui(H[w],X[w]);else ui(l,ce);return(X=Zn(ce,"script")).length>0&&go(X,!le&&Zn(l,"script")),ce},cleanData:function(l){for(var h,x,w,R=C.event.special,H=0;void 0!==(x=l[H]);H++)if(zt(x)){if(h=x[G.expando]){if(h.events)for(w in h.events)R[w]?C.event.remove(x,w):C.removeEvent(x,w,h.handle);x[G.expando]=void 0}x[ie.expando]&&(x[ie.expando]=void 0)}}}),C.fn.extend({detach:function(l){return xo(this,l,!0)},remove:function(l){return xo(this,l)},text:function(l){return an(this,function(h){return void 0===h?C.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=h)})},null,l,arguments.length)},append:function(){return Nn(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ho(this,l).appendChild(l)})},prepend:function(){return Nn(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var h=Ho(this,l);h.insertBefore(l,h.firstChild)}})},before:function(){return Nn(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Nn(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,h=0;null!=(l=this[h]);h++)1===l.nodeType&&(C.cleanData(Zn(l,!1)),l.textContent="");return this},clone:function(l,h){return l=null!=l&&l,h=null==h?l:h,this.map(function(){return C.clone(this,l,h)})},html:function(l){return an(this,function(h){var x=this[0]||{},w=0,R=this.length;if(void 0===h&&1===x.nodeType)return x.innerHTML;if("string"==typeof h&&!Ut.test(h)&&!nr[(dr.exec(h)||["",""])[1].toLowerCase()]){h=C.htmlPrefilter(h);try{for(;w<R;w++)1===(x=this[w]||{}).nodeType&&(C.cleanData(Zn(x,!1)),x.innerHTML=h);x=0}catch(H){}}x&&this.empty().append(h)},null,l,arguments.length)},replaceWith:function(){var l=[];return Nn(this,arguments,function(h){var x=this.parentNode;C.inArray(this,l)<0&&(C.cleanData(Zn(this)),x&&x.replaceChild(h,this))},l)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,h){C.fn[l]=function(x){for(var w,R=[],H=C(x),X=H.length-1,ce=0;ce<=X;ce++)w=ce===X?this:this.clone(!0),C(H[ce])[h](w),k.apply(R,w.get());return this.pushStack(R)}});var Ei=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),Zi=function(l){var h=l.ownerDocument.defaultView;return(!h||!h.opener)&&(h=g),h.getComputedStyle(l)},Ma=function(l,h,x){var w,R,H={};for(R in h)H[R]=l.style[R],l.style[R]=h[R];for(R in w=x.call(l),h)l.style[R]=H[R];return w},oa=new RegExp(sn.join("|"),"i");function li(l,h,x){var w,R,H,X,ce=l.style;return(x=x||Zi(l))&&(""===(X=x.getPropertyValue(h)||x[h])&&!un(l)&&(X=C.style(l,h)),!i.pixelBoxStyles()&&Ei.test(X)&&oa.test(h)&&(w=ce.width,R=ce.minWidth,H=ce.maxWidth,ce.minWidth=ce.maxWidth=ce.width=X,X=x.width,ce.width=w,ce.minWidth=R,ce.maxWidth=H)),void 0!==X?X+"":X}function aa(l,h){return{get:function(){if(!l())return(this.get=h).apply(this,arguments);delete this.get}}}!function(){function l(){if(Ae){le.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ae.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nn.appendChild(le).appendChild(Ae);var Be=g.getComputedStyle(Ae);x="1%"!==Be.top,ce=12===h(Be.marginLeft),Ae.style.right="60%",H=36===h(Be.right),w=36===h(Be.width),Ae.style.position="absolute",R=12===h(Ae.offsetWidth/3),nn.removeChild(le),Ae=null}}function h(Be){return Math.round(parseFloat(Be))}var x,w,R,H,X,ce,le=he.createElement("div"),Ae=he.createElement("div");!Ae.style||(Ae.style.backgroundClip="content-box",Ae.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===Ae.style.backgroundClip,C.extend(i,{boxSizingReliable:function(){return l(),w},pixelBoxStyles:function(){return l(),H},pixelPosition:function(){return l(),x},reliableMarginLeft:function(){return l(),ce},scrollboxSize:function(){return l(),R},reliableTrDimensions:function(){var Be,Qe,ke,Ye;return null==X&&(Be=he.createElement("table"),Qe=he.createElement("tr"),ke=he.createElement("div"),Be.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Qe.style.cssText="border:1px solid",Qe.style.height="1px",ke.style.height="9px",ke.style.display="block",nn.appendChild(Be).appendChild(Qe).appendChild(ke),Ye=g.getComputedStyle(Qe),X=parseInt(Ye.height,10)+parseInt(Ye.borderTopWidth,10)+parseInt(Ye.borderBottomWidth,10)===Qe.offsetHeight,nn.removeChild(Be)),X}}))}();var $t=["Webkit","Moz","ms"],bo=he.createElement("div").style,jo={};function gi(l){return C.cssProps[l]||jo[l]||(l in bo?l:jo[l]=function sa(l){for(var h=l[0].toUpperCase()+l.slice(1),x=$t.length;x--;)if((l=$t[x]+h)in bo)return l}(l)||l)}var Pi=/^(none|table(?!-c[ea]).+)/,Ii=/^--/,Tr={position:"absolute",visibility:"hidden",display:"block"},ci={letterSpacing:"0",fontWeight:"400"};function ka(l,h,x){var w=Vt.exec(h);return w?Math.max(0,w[2]-(x||0))+(w[3]||"px"):h}function qi(l,h,x,w,R,H){var X="width"===h?1:0,ce=0,le=0;if(x===(w?"border":"content"))return 0;for(;X<4;X+=2)"margin"===x&&(le+=C.css(l,x+sn[X],!0,R)),w?("content"===x&&(le-=C.css(l,"padding"+sn[X],!0,R)),"margin"!==x&&(le-=C.css(l,"border"+sn[X]+"Width",!0,R))):(le+=C.css(l,"padding"+sn[X],!0,R),"padding"!==x?le+=C.css(l,"border"+sn[X]+"Width",!0,R):ce+=C.css(l,"border"+sn[X]+"Width",!0,R));return!w&&H>=0&&(le+=Math.max(0,Math.ceil(l["offset"+h[0].toUpperCase()+h.slice(1)]-H-le-ce-.5))||0),le}function me(l,h,x){var w=Zi(l),H=(!i.boxSizingReliable()||x)&&"border-box"===C.css(l,"boxSizing",!1,w),X=H,ce=li(l,h,w),le="offset"+h[0].toUpperCase()+h.slice(1);if(Ei.test(ce)){if(!x)return ce;ce="auto"}return(!i.boxSizingReliable()&&H||!i.reliableTrDimensions()&&dt(l,"tr")||"auto"===ce||!parseFloat(ce)&&"inline"===C.css(l,"display",!1,w))&&l.getClientRects().length&&(H="border-box"===C.css(l,"boxSizing",!1,w),(X=le in l)&&(ce=l[le])),(ce=parseFloat(ce)||0)+qi(l,h,x||(H?"border":"content"),X,w,ce)+"px"}function jn(l,h,x,w,R){return new jn.prototype.init(l,h,x,w,R)}C.extend({cssHooks:{opacity:{get:function(l,h){if(h){var x=li(l,"opacity");return""===x?"1":x}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,h,x,w){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var R,H,X,ce=Kt(h),le=Ii.test(h),Ae=l.style;if(le||(h=gi(ce)),X=C.cssHooks[h]||C.cssHooks[ce],void 0===x)return X&&"get"in X&&void 0!==(R=X.get(l,!1,w))?R:Ae[h];if("string"==(H=typeof x)&&(R=Vt.exec(x))&&R[1]&&(x=Vr(l,h,R),H="number"),null==x||x!=x)return;"number"===H&&!le&&(x+=R&&R[3]||(C.cssNumber[ce]?"":"px")),!i.clearCloneStyle&&""===x&&0===h.indexOf("background")&&(Ae[h]="inherit"),(!X||!("set"in X)||void 0!==(x=X.set(l,x,w)))&&(le?Ae.setProperty(h,x):Ae[h]=x)}},css:function(l,h,x,w){var R,H,X,ce=Kt(h);return Ii.test(h)||(h=gi(ce)),(X=C.cssHooks[h]||C.cssHooks[ce])&&"get"in X&&(R=X.get(l,!0,x)),void 0===R&&(R=li(l,h,w)),"normal"===R&&h in ci&&(R=ci[h]),""===x||x?(H=parseFloat(R),!0===x||isFinite(H)?H||0:R):R}}),C.each(["height","width"],function(l,h){C.cssHooks[h]={get:function(x,w,R){if(w)return!Pi.test(C.css(x,"display"))||x.getClientRects().length&&x.getBoundingClientRect().width?me(x,h,R):Ma(x,Tr,function(){return me(x,h,R)})},set:function(x,w,R){var H,X=Zi(x),ce=!i.scrollboxSize()&&"absolute"===X.position,Ae=(ce||R)&&"border-box"===C.css(x,"boxSizing",!1,X),Be=R?qi(x,h,R,Ae,X):0;return Ae&&ce&&(Be-=Math.ceil(x["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(X[h])-qi(x,h,"border",!1,X)-.5)),Be&&(H=Vt.exec(w))&&"px"!==(H[3]||"px")&&(x.style[h]=w,w=C.css(x,h)),ka(0,w,Be)}}}),C.cssHooks.marginLeft=aa(i.reliableMarginLeft,function(l,h){if(h)return(parseFloat(li(l,"marginLeft"))||l.getBoundingClientRect().left-Ma(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(l,h){C.cssHooks[l+h]={expand:function(x){for(var w=0,R={},H="string"==typeof x?x.split(" "):[x];w<4;w++)R[l+sn[w]+h]=H[w]||H[w-2]||H[0];return R}},"margin"!==l&&(C.cssHooks[l+h].set=ka)}),C.fn.extend({css:function(l,h){return an(this,function(x,w,R){var H,X,ce={},le=0;if(Array.isArray(w)){for(H=Zi(x),X=w.length;le<X;le++)ce[w[le]]=C.css(x,w[le],!1,H);return ce}return void 0!==R?C.style(x,w,R):C.css(x,w)},l,h,arguments.length>1)}}),C.Tween=jn,(jn.prototype={constructor:jn,init:function(l,h,x,w,R,H){this.elem=l,this.prop=x,this.easing=R||C.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=w,this.unit=H||(C.cssNumber[x]?"":"px")},cur:function(){var l=jn.propHooks[this.prop];return l&&l.get?l.get(this):jn.propHooks._default.get(this)},run:function(l){var h,x=jn.propHooks[this.prop];return this.pos=h=this.options.duration?C.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):jn.propHooks._default.set(this),this}}).init.prototype=jn.prototype,(jn.propHooks={_default:{get:function(l){var h;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(h=C.css(l.elem,l.prop,""))&&"auto"!==h?h:0},set:function(l){C.fx.step[l.prop]?C.fx.step[l.prop](l):1!==l.elem.nodeType||!C.cssHooks[l.prop]&&null==l.elem.style[gi(l.prop)]?l.elem[l.prop]=l.now:C.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=jn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},C.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},C.fx=jn.prototype.init,C.fx.step={};var fi,eo,vt=/^(?:toggle|show|hide)$/,vi=/queueHooks$/;function Ai(){eo&&(!1===he.hidden&&g.requestAnimationFrame?g.requestAnimationFrame(Ai):g.setTimeout(Ai,C.fx.interval),C.fx.tick())}function Mi(){return g.setTimeout(function(){fi=void 0}),fi=Date.now()}function to(l,h){var x,w=0,R={height:l};for(h=h?1:0;w<4;w+=2-h)R["margin"+(x=sn[w])]=R["padding"+x]=l;return h&&(R.opacity=R.width=l),R}function Xn(l,h,x){for(var w,R=(lr.tweeners[h]||[]).concat(lr.tweeners["*"]),H=0,X=R.length;H<X;H++)if(w=R[H].call(x,h,l))return w}function lr(l,h,x){var w,R,H=0,X=lr.prefilters.length,ce=C.Deferred().always(function(){delete le.elem}),le=function(){if(R)return!1;for(var Qe=fi||Mi(),ke=Math.max(0,Ae.startTime+Ae.duration-Qe),xt=1-(ke/Ae.duration||0),Gt=0,Pt=Ae.tweens.length;Gt<Pt;Gt++)Ae.tweens[Gt].run(xt);return ce.notifyWith(l,[Ae,xt,ke]),xt<1&&Pt?ke:(Pt||ce.notifyWith(l,[Ae,1,0]),ce.resolveWith(l,[Ae]),!1)},Ae=ce.promise({elem:l,props:C.extend({},h),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},x),originalProperties:h,originalOptions:x,startTime:fi||Mi(),duration:x.duration,tweens:[],createTween:function(Qe,ke){var Ye=C.Tween(l,Ae.opts,Qe,ke,Ae.opts.specialEasing[Qe]||Ae.opts.easing);return Ae.tweens.push(Ye),Ye},stop:function(Qe){var ke=0,Ye=Qe?Ae.tweens.length:0;if(R)return this;for(R=!0;ke<Ye;ke++)Ae.tweens[ke].run(1);return Qe?(ce.notifyWith(l,[Ae,1,0]),ce.resolveWith(l,[Ae,Qe])):ce.rejectWith(l,[Ae,Qe]),this}}),Be=Ae.props;for(function ua(l,h){var x,w,R,H,X;for(x in l)if(R=h[w=Kt(x)],H=l[x],Array.isArray(H)&&(R=H[1],H=l[x]=H[0]),x!==w&&(l[w]=H,delete l[x]),(X=C.cssHooks[w])&&"expand"in X)for(x in H=X.expand(H),delete l[w],H)x in l||(l[x]=H[x],h[x]=R);else h[w]=R}(Be,Ae.opts.specialEasing);H<X;H++)if(w=lr.prefilters[H].call(Ae,l,Be,Ae.opts))return ue(w.stop)&&(C._queueHooks(Ae.elem,Ae.opts.queue).stop=w.stop.bind(w)),w;return C.map(Be,Xn,Ae),ue(Ae.opts.start)&&Ae.opts.start.call(l,Ae),Ae.progress(Ae.opts.progress).done(Ae.opts.done,Ae.opts.complete).fail(Ae.opts.fail).always(Ae.opts.always),C.fx.timer(C.extend(le,{elem:l,anim:Ae,queue:Ae.opts.queue})),Ae}C.Animation=C.extend(lr,{tweeners:{"*":[function(l,h){var x=this.createTween(l,h);return Vr(x.elem,l,Vt.exec(h),x),x}]},tweener:function(l,h){ue(l)?(h=l,l=["*"]):l=l.match(vn);for(var x,w=0,R=l.length;w<R;w++)(lr.tweeners[x=l[w]]=lr.tweeners[x]||[]).unshift(h)},prefilters:[function Oa(l,h,x){var w,R,H,X,ce,le,Ae,Be,Qe="width"in h||"height"in h,ke=this,Ye={},xt=l.style,Gt=l.nodeType&&Dn(l),Pt=G.get(l,"fxshow");for(w in x.queue||(null==(X=C._queueHooks(l,"fx")).unqueued&&(X.unqueued=0,ce=X.empty.fire,X.empty.fire=function(){X.unqueued||ce()}),X.unqueued++,ke.always(function(){ke.always(function(){X.unqueued--,C.queue(l,"fx").length||X.empty.fire()})})),h)if(vt.test(R=h[w])){if(delete h[w],H=H||"toggle"===R,R===(Gt?"hide":"show")){if("show"!==R||!Pt||void 0===Pt[w])continue;Gt=!0}Ye[w]=Pt&&Pt[w]||C.style(l,w)}if((le=!C.isEmptyObject(h))||!C.isEmptyObject(Ye))for(w in Qe&&1===l.nodeType&&(x.overflow=[xt.overflow,xt.overflowX,xt.overflowY],null==(Ae=Pt&&Pt.display)&&(Ae=G.get(l,"display")),"none"===(Be=C.css(l,"display"))&&(Ae?Be=Ae:(Fn([l],!0),Ae=l.style.display||Ae,Be=C.css(l,"display"),Fn([l]))),("inline"===Be||"inline-block"===Be&&null!=Ae)&&"none"===C.css(l,"float")&&(le||(ke.done(function(){xt.display=Ae}),null==Ae&&(Ae="none"===(Be=xt.display)?"":Be)),xt.display="inline-block")),x.overflow&&(xt.overflow="hidden",ke.always(function(){xt.overflow=x.overflow[0],xt.overflowX=x.overflow[1],xt.overflowY=x.overflow[2]})),le=!1,Ye)le||(Pt?"hidden"in Pt&&(Gt=Pt.hidden):Pt=G.access(l,"fxshow",{display:Ae}),H&&(Pt.hidden=!Gt),Gt&&Fn([l],!0),ke.done(function(){for(w in Gt||Fn([l]),G.remove(l,"fxshow"),Ye)C.style(l,w,Ye[w])})),le=Xn(Gt?Pt[w]:0,w,ke),w in Pt||(Pt[w]=le.start,Gt&&(le.end=le.start,le.start=0))}],prefilter:function(l,h){h?lr.prefilters.unshift(l):lr.prefilters.push(l)}}),C.speed=function(l,h,x){var w=l&&"object"==typeof l?C.extend({},l):{complete:x||!x&&h||ue(l)&&l,duration:l,easing:x&&h||h&&!ue(h)&&h};return C.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in C.fx.speeds?C.fx.speeds[w.duration]:C.fx.speeds._default),(null==w.queue||!0===w.queue)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){ue(w.old)&&w.old.call(this),w.queue&&C.dequeue(this,w.queue)},w},C.fn.extend({fadeTo:function(l,h,x,w){return this.filter(Dn).css("opacity",0).show().end().animate({opacity:h},l,x,w)},animate:function(l,h,x,w){var R=C.isEmptyObject(l),H=C.speed(h,x,w),X=function(){var ce=lr(this,C.extend({},l),H);(R||G.get(this,"finish"))&&ce.stop(!0)};return X.finish=X,R||!1===H.queue?this.each(X):this.queue(H.queue,X)},stop:function(l,h,x){var w=function(R){var H=R.stop;delete R.stop,H(x)};return"string"!=typeof l&&(x=h,h=l,l=void 0),h&&this.queue(l||"fx",[]),this.each(function(){var R=!0,H=null!=l&&l+"queueHooks",X=C.timers,ce=G.get(this);if(H)ce[H]&&ce[H].stop&&w(ce[H]);else for(H in ce)ce[H]&&ce[H].stop&&vi.test(H)&&w(ce[H]);for(H=X.length;H--;)X[H].elem===this&&(null==l||X[H].queue===l)&&(X[H].anim.stop(x),R=!1,X.splice(H,1));(R||!x)&&C.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var h,x=G.get(this),w=x[l+"queue"],R=x[l+"queueHooks"],H=C.timers,X=w?w.length:0;for(x.finish=!0,C.queue(this,l,[]),R&&R.stop&&R.stop.call(this,!0),h=H.length;h--;)H[h].elem===this&&H[h].queue===l&&(H[h].anim.stop(!0),H.splice(h,1));for(h=0;h<X;h++)w[h]&&w[h].finish&&w[h].finish.call(this);delete x.finish})}}),C.each(["toggle","show","hide"],function(l,h){var x=C.fn[h];C.fn[h]=function(w,R,H){return null==w||"boolean"==typeof w?x.apply(this,arguments):this.animate(to(h,!0),w,R,H)}}),C.each({slideDown:to("show"),slideUp:to("hide"),slideToggle:to("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,h){C.fn[l]=function(x,w,R){return this.animate(h,x,w,R)}}),C.timers=[],C.fx.tick=function(){var l,h=0,x=C.timers;for(fi=Date.now();h<x.length;h++)!(l=x[h])()&&x[h]===l&&x.splice(h--,1);x.length||C.fx.stop(),fi=void 0},C.fx.timer=function(l){C.timers.push(l),C.fx.start()},C.fx.interval=13,C.fx.start=function(){eo||(eo=!0,Ai())},C.fx.stop=function(){eo=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(l,h){return l=C.fx&&C.fx.speeds[l]||l,this.queue(h=h||"fx",function(x,w){var R=g.setTimeout(x,l);w.stop=function(){g.clearTimeout(R)}})},function(){var l=he.createElement("input"),x=he.createElement("select").appendChild(he.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=x.selected,(l=he.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var Hr,hr=C.expr.attrHandle;C.fn.extend({attr:function(l,h){return an(this,C.attr,l,h,arguments.length>1)},removeAttr:function(l){return this.each(function(){C.removeAttr(this,l)})}}),C.extend({attr:function(l,h,x){var w,R,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return void 0===l.getAttribute?C.prop(l,h,x):((1!==H||!C.isXMLDoc(l))&&(R=C.attrHooks[h.toLowerCase()]||(C.expr.match.bool.test(h)?Hr:void 0)),void 0!==x?null===x?void C.removeAttr(l,h):R&&"set"in R&&void 0!==(w=R.set(l,x,h))?w:(l.setAttribute(h,x+""),x):R&&"get"in R&&null!==(w=R.get(l,h))?w:null==(w=C.find.attr(l,h))?void 0:w)},attrHooks:{type:{set:function(l,h){if(!i.radioValue&&"radio"===h&&dt(l,"input")){var x=l.value;return l.setAttribute("type",h),x&&(l.value=x),h}}}},removeAttr:function(l,h){var x,w=0,R=h&&h.match(vn);if(R&&1===l.nodeType)for(;x=R[w++];)l.removeAttribute(x)}}),Hr={set:function(l,h,x){return!1===h?C.removeAttr(l,x):l.setAttribute(x,x),x}},C.each(C.expr.match.bool.source.match(/\w+/g),function(l,h){var x=hr[h]||C.find.attr;hr[h]=function(w,R,H){var X,ce,le=R.toLowerCase();return H||(ce=hr[le],hr[le]=X,X=null!=x(w,R,H)?le:null,hr[le]=ce),X}});var zo=/^(?:input|select|textarea|button)$/i,ki=/^(?:a|area)$/i;function Xr(l){return(l.match(vn)||[]).join(" ")}function at(l){return l.getAttribute&&l.getAttribute("class")||""}function _o(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(vn)||[]}C.fn.extend({prop:function(l,h){return an(this,C.prop,l,h,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[C.propFix[l]||l]})}}),C.extend({prop:function(l,h,x){var w,R,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return(1!==H||!C.isXMLDoc(l))&&(R=C.propHooks[h=C.propFix[h]||h]),void 0!==x?R&&"set"in R&&void 0!==(w=R.set(l,x,h))?w:l[h]=x:R&&"get"in R&&null!==(w=R.get(l,h))?w:l[h]},propHooks:{tabIndex:{get:function(l){var h=C.find.attr(l,"tabindex");return h?parseInt(h,10):zo.test(l.nodeName)||ki.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(C.propHooks.selected={get:function(l){return null},set:function(l){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(l){var h,x,w,R,H,X,ce,le=0;if(ue(l))return this.each(function(Ae){C(this).addClass(l.call(this,Ae,at(this)))});if((h=_o(l)).length)for(;x=this[le++];)if(R=at(x),w=1===x.nodeType&&" "+Xr(R)+" "){for(X=0;H=h[X++];)w.indexOf(" "+H+" ")<0&&(w+=H+" ");R!==(ce=Xr(w))&&x.setAttribute("class",ce)}return this},removeClass:function(l){var h,x,w,R,H,X,ce,le=0;if(ue(l))return this.each(function(Ae){C(this).removeClass(l.call(this,Ae,at(this)))});if(!arguments.length)return this.attr("class","");if((h=_o(l)).length)for(;x=this[le++];)if(R=at(x),w=1===x.nodeType&&" "+Xr(R)+" "){for(X=0;H=h[X++];)for(;w.indexOf(" "+H+" ")>-1;)w=w.replace(" "+H+" "," ");R!==(ce=Xr(w))&&x.setAttribute("class",ce)}return this},toggleClass:function(l,h){var x=typeof l,w="string"===x||Array.isArray(l);return"boolean"==typeof h&&w?h?this.addClass(l):this.removeClass(l):ue(l)?this.each(function(R){C(this).toggleClass(l.call(this,R,at(this),h),h)}):this.each(function(){var R,H,X,ce;if(w)for(H=0,X=C(this),ce=_o(l);R=ce[H++];)X.hasClass(R)?X.removeClass(R):X.addClass(R);else(void 0===l||"boolean"===x)&&((R=at(this))&&G.set(this,"__className__",R),this.setAttribute&&this.setAttribute("class",R||!1===l?"":G.get(this,"__className__")||""))})},hasClass:function(l){var h,x,w=0;for(h=" "+l+" ";x=this[w++];)if(1===x.nodeType&&(" "+Xr(at(x))+" ").indexOf(h)>-1)return!0;return!1}});var Co=/\r/g;C.fn.extend({val:function(l){var h,x,w,R=this[0];return arguments.length?(w=ue(l),this.each(function(H){var X;1===this.nodeType&&(null==(X=w?l.call(this,H,C(this).val()):l)?X="":"number"==typeof X?X+="":Array.isArray(X)&&(X=C.map(X,function(ce){return null==ce?"":ce+""})),(!(h=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])||!("set"in h)||void 0===h.set(this,X,"value"))&&(this.value=X))})):R?(h=C.valHooks[R.type]||C.valHooks[R.nodeName.toLowerCase()])&&"get"in h&&void 0!==(x=h.get(R,"value"))?x:"string"==typeof(x=R.value)?x.replace(Co,""):null==x?"":x:void 0}}),C.extend({valHooks:{option:{get:function(l){var h=C.find.attr(l,"value");return null!=h?h:Xr(C.text(l))}},select:{get:function(l){var h,x,w,R=l.options,H=l.selectedIndex,X="select-one"===l.type,ce=X?null:[],le=X?H+1:R.length;for(w=H<0?le:X?H:0;w<le;w++)if(((x=R[w]).selected||w===H)&&!x.disabled&&(!x.parentNode.disabled||!dt(x.parentNode,"optgroup"))){if(h=C(x).val(),X)return h;ce.push(h)}return ce},set:function(l,h){for(var x,w,R=l.options,H=C.makeArray(h),X=R.length;X--;)((w=R[X]).selected=C.inArray(C.valHooks.option.get(w),H)>-1)&&(x=!0);return x||(l.selectedIndex=-1),H}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(l,h){if(Array.isArray(h))return l.checked=C.inArray(C(l).val(),h)>-1}},i.checkOn||(C.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in g;var Er=/^(?:focusinfocus|focusoutblur)$/,mi=function(l){l.stopPropagation()};C.extend(C.event,{trigger:function(l,h,x,w){var R,H,X,ce,le,Ae,Be,Qe,ke=[x||he],Ye=K.call(l,"type")?l.type:l,xt=K.call(l,"namespace")?l.namespace.split("."):[];if(H=Qe=X=x=x||he,3!==x.nodeType&&8!==x.nodeType&&!Er.test(Ye+C.event.triggered)&&(Ye.indexOf(".")>-1&&(xt=Ye.split("."),Ye=xt.shift(),xt.sort()),le=Ye.indexOf(":")<0&&"on"+Ye,(l=l[C.expando]?l:new C.Event(Ye,"object"==typeof l&&l)).isTrigger=w?2:3,l.namespace=xt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+xt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=x),h=null==h?[l]:C.makeArray(h,[l]),Be=C.event.special[Ye]||{},w||!Be.trigger||!1!==Be.trigger.apply(x,h))){if(!w&&!Be.noBubble&&!ge(x)){for(Er.test((ce=Be.delegateType||Ye)+Ye)||(H=H.parentNode);H;H=H.parentNode)ke.push(H),X=H;X===(x.ownerDocument||he)&&ke.push(X.defaultView||X.parentWindow||g)}for(R=0;(H=ke[R++])&&!l.isPropagationStopped();)Qe=H,l.type=R>1?ce:Be.bindType||Ye,(Ae=(G.get(H,"events")||Object.create(null))[l.type]&&G.get(H,"handle"))&&Ae.apply(H,h),(Ae=le&&H[le])&&Ae.apply&&zt(H)&&(l.result=Ae.apply(H,h),!1===l.result&&l.preventDefault());return l.type=Ye,!w&&!l.isDefaultPrevented()&&(!Be._default||!1===Be._default.apply(ke.pop(),h))&&zt(x)&&le&&ue(x[Ye])&&!ge(x)&&((X=x[le])&&(x[le]=null),C.event.triggered=Ye,l.isPropagationStopped()&&Qe.addEventListener(Ye,mi),x[Ye](),l.isPropagationStopped()&&Qe.removeEventListener(Ye,mi),C.event.triggered=void 0,X&&(x[le]=X)),l.result}},simulate:function(l,h,x){var w=C.extend(new C.Event,x,{type:l,isSimulated:!0});C.event.trigger(w,null,h)}}),C.fn.extend({trigger:function(l,h){return this.each(function(){C.event.trigger(l,h,this)})},triggerHandler:function(l,h){var x=this[0];if(x)return C.event.trigger(l,h,x,!0)}}),i.focusin||C.each({focus:"focusin",blur:"focusout"},function(l,h){var x=function(w){C.event.simulate(h,w.target,C.event.fix(w))};C.event.special[h]={setup:function(){var w=this.ownerDocument||this.document||this,R=G.access(w,h);R||w.addEventListener(l,x,!0),G.access(w,h,(R||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,R=G.access(w,h)-1;R?G.access(w,h,R):(w.removeEventListener(l,x,!0),G.remove(w,h))}}});var dn=g.location,Oi={guid:Date.now()},la=/\?/;C.parseXML=function(l){var h,x;if(!l||"string"!=typeof l)return null;try{h=(new g.DOMParser).parseFromString(l,"text/xml")}catch(w){}return x=h&&h.getElementsByTagName("parsererror")[0],(!h||x)&&C.error("Invalid XML: "+(x?C.map(x.childNodes,function(w){return w.textContent}).join("\n"):l)),h};var Uo=/\[\]$/,wo=/\r?\n/g,Li=/^(?:submit|button|image|reset|file)$/i,pn=/^(?:input|select|textarea|keygen)/i;function Ni(l,h,x,w){var R;if(Array.isArray(h))C.each(h,function(H,X){x||Uo.test(l)?w(l,X):Ni(l+"["+("object"==typeof X&&null!=X?H:"")+"]",X,x,w)});else if(x||"object"!==Ie(h))w(l,h);else for(R in h)Ni(l+"["+R+"]",h[R],x,w)}C.param=function(l,h){var x,w=[],R=function(H,X){var ce=ue(X)?X():X;w[w.length]=encodeURIComponent(H)+"="+encodeURIComponent(null==ce?"":ce)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!C.isPlainObject(l))C.each(l,function(){R(this.name,this.value)});else for(x in l)Ni(x,l[x],h,R);return w.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=C.prop(this,"elements");return l?C.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!C(this).is(":disabled")&&pn.test(this.nodeName)&&!Li.test(l)&&(this.checked||!Wn.test(l))}).map(function(l,h){var x=C(this).val();return null==x?null:Array.isArray(x)?C.map(x,function(w){return{name:h.name,value:w.replace(wo,"\r\n")}}):{name:h.name,value:x.replace(wo,"\r\n")}}).get()}});var Tt=/%20/g,Kr=/#.*$/,yi=/([?&])_=[^&]*/,qn=/^(.*?):[ \t]*([^\r\n]*)$/gm,mr=/^(?:GET|HEAD)$/,Go=/^\/\//,Pr={},no={},Ri="*/".concat("*"),Di=he.createElement("a");function Na(l){return function(h,x){"string"!=typeof h&&(x=h,h="*");var w,R=0,H=h.toLowerCase().match(vn)||[];if(ue(x))for(;w=H[R++];)"+"===w[0]?(w=w.slice(1)||"*",(l[w]=l[w]||[]).unshift(x)):(l[w]=l[w]||[]).push(x)}}function Wo(l,h,x,w){var R={},H=l===no;function X(ce){var le;return R[ce]=!0,C.each(l[ce]||[],function(Ae,Be){var Qe=Be(h,x,w);return"string"!=typeof Qe||H||R[Qe]?H?!(le=Qe):void 0:(h.dataTypes.unshift(Qe),X(Qe),!1)}),le}return X(h.dataTypes[0])||!R["*"]&&X("*")}function Qt(l,h){var x,w,R=C.ajaxSettings.flatOptions||{};for(x in h)void 0!==h[x]&&((R[x]?l:w||(w={}))[x]=h[x]);return w&&C.extend(!0,l,w),l}Di.href=dn.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(dn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ri,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,h){return h?Qt(Qt(l,C.ajaxSettings),h):Qt(C.ajaxSettings,l)},ajaxPrefilter:Na(Pr),ajaxTransport:Na(no),ajax:function(l,h){"object"==typeof l&&(h=l,l=void 0);var x,w,R,H,X,ce,le,Ae,Be,Qe,ke=C.ajaxSetup({},h=h||{}),Ye=ke.context||ke,xt=ke.context&&(Ye.nodeType||Ye.jquery)?C(Ye):C.event,Gt=C.Deferred(),Pt=C.Callbacks("once memory"),In=ke.statusCode||{},Rn={},Ir={},Ot="canceled",It={readyState:0,getResponseHeader:function(_n){var Fe;if(le){if(!H)for(H={};Fe=qn.exec(R);)H[Fe[1].toLowerCase()+" "]=(H[Fe[1].toLowerCase()+" "]||[]).concat(Fe[2]);Fe=H[_n.toLowerCase()+" "]}return null==Fe?null:Fe.join(", ")},getAllResponseHeaders:function(){return le?R:null},setRequestHeader:function(_n,Fe){return null==le&&(_n=Ir[_n.toLowerCase()]=Ir[_n.toLowerCase()]||_n,Rn[_n]=Fe),this},overrideMimeType:function(_n){return null==le&&(ke.mimeType=_n),this},statusCode:function(_n){var Fe;if(_n)if(le)It.always(_n[It.status]);else for(Fe in _n)In[Fe]=[In[Fe],_n[Fe]];return this},abort:function(_n){var Fe=_n||Ot;return x&&x.abort(Fe),yr(0,Fe),this}};if(Gt.promise(It),ke.url=((l||ke.url||dn.href)+"").replace(Go,dn.protocol+"//"),ke.type=h.method||h.type||ke.method||ke.type,ke.dataTypes=(ke.dataType||"*").toLowerCase().match(vn)||[""],null==ke.crossDomain){ce=he.createElement("a");try{ce.href=ke.url,ce.href=ce.href,ke.crossDomain=Di.protocol+"//"+Di.host!=ce.protocol+"//"+ce.host}catch(_n){ke.crossDomain=!0}}if(ke.data&&ke.processData&&"string"!=typeof ke.data&&(ke.data=C.param(ke.data,ke.traditional)),Wo(Pr,ke,h,It),le)return It;for(Be in(Ae=C.event&&ke.global)&&0==C.active++&&C.event.trigger("ajaxStart"),ke.type=ke.type.toUpperCase(),ke.hasContent=!mr.test(ke.type),w=ke.url.replace(Kr,""),ke.hasContent?ke.data&&ke.processData&&0===(ke.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ke.data=ke.data.replace(Tt,"+")):(Qe=ke.url.slice(w.length),ke.data&&(ke.processData||"string"==typeof ke.data)&&(w+=(la.test(w)?"&":"?")+ke.data,delete ke.data),!1===ke.cache&&(w=w.replace(yi,"$1"),Qe=(la.test(w)?"&":"?")+"_="+Oi.guid+++Qe),ke.url=w+Qe),ke.ifModified&&(C.lastModified[w]&&It.setRequestHeader("If-Modified-Since",C.lastModified[w]),C.etag[w]&&It.setRequestHeader("If-None-Match",C.etag[w])),(ke.data&&ke.hasContent&&!1!==ke.contentType||h.contentType)&&It.setRequestHeader("Content-Type",ke.contentType),It.setRequestHeader("Accept",ke.dataTypes[0]&&ke.accepts[ke.dataTypes[0]]?ke.accepts[ke.dataTypes[0]]+("*"!==ke.dataTypes[0]?", "+Ri+"; q=0.01":""):ke.accepts["*"]),ke.headers)It.setRequestHeader(Be,ke.headers[Be]);if(ke.beforeSend&&(!1===ke.beforeSend.call(Ye,It,ke)||le))return It.abort();if(Ot="abort",Pt.add(ke.complete),It.done(ke.success),It.fail(ke.error),x=Wo(no,ke,h,It)){if(It.readyState=1,Ae&&xt.trigger("ajaxSend",[It,ke]),le)return It;ke.async&&ke.timeout>0&&(X=g.setTimeout(function(){It.abort("timeout")},ke.timeout));try{le=!1,x.send(Rn,yr)}catch(_n){if(le)throw _n;yr(-1,_n)}}else yr(-1,"No Transport");function yr(_n,Fe,xr,Or){var jr,di,zr,zn,Fi,Lr=Fe;le||(le=!0,X&&g.clearTimeout(X),x=void 0,R=Or||"",It.readyState=_n>0?4:0,jr=_n>=200&&_n<300||304===_n,xr&&(zn=function Sn(l,h,x){for(var w,R,H,X,ce=l.contents,le=l.dataTypes;"*"===le[0];)le.shift(),void 0===w&&(w=l.mimeType||h.getResponseHeader("Content-Type"));if(w)for(R in ce)if(ce[R]&&ce[R].test(w)){le.unshift(R);break}if(le[0]in x)H=le[0];else{for(R in x){if(!le[0]||l.converters[R+" "+le[0]]){H=R;break}X||(X=R)}H=H||X}if(H)return H!==le[0]&&le.unshift(H),x[H]}(ke,It,xr)),!jr&&C.inArray("script",ke.dataTypes)>-1&&C.inArray("json",ke.dataTypes)<0&&(ke.converters["text script"]=function(){}),zn=function xi(l,h,x,w){var R,H,X,ce,le,Ae={},Be=l.dataTypes.slice();if(Be[1])for(X in l.converters)Ae[X.toLowerCase()]=l.converters[X];for(H=Be.shift();H;)if(l.responseFields[H]&&(x[l.responseFields[H]]=h),!le&&w&&l.dataFilter&&(h=l.dataFilter(h,l.dataType)),le=H,H=Be.shift())if("*"===H)H=le;else if("*"!==le&&le!==H){if(!(X=Ae[le+" "+H]||Ae["* "+H]))for(R in Ae)if((ce=R.split(" "))[1]===H&&(X=Ae[le+" "+ce[0]]||Ae["* "+ce[0]])){!0===X?X=Ae[R]:!0!==Ae[R]&&(H=ce[0],Be.unshift(ce[1]));break}if(!0!==X)if(X&&l.throws)h=X(h);else try{h=X(h)}catch(Qe){return{state:"parsererror",error:X?Qe:"No conversion from "+le+" to "+H}}}return{state:"success",data:h}}(ke,zn,It,jr),jr?(ke.ifModified&&((Fi=It.getResponseHeader("Last-Modified"))&&(C.lastModified[w]=Fi),(Fi=It.getResponseHeader("etag"))&&(C.etag[w]=Fi)),204===_n||"HEAD"===ke.type?Lr="nocontent":304===_n?Lr="notmodified":(Lr=zn.state,di=zn.data,jr=!(zr=zn.error))):(zr=Lr,(_n||!Lr)&&(Lr="error",_n<0&&(_n=0))),It.status=_n,It.statusText=(Fe||Lr)+"",jr?Gt.resolveWith(Ye,[di,Lr,It]):Gt.rejectWith(Ye,[It,Lr,zr]),It.statusCode(In),In=void 0,Ae&&xt.trigger(jr?"ajaxSuccess":"ajaxError",[It,ke,jr?di:zr]),Pt.fireWith(Ye,[It,Lr]),Ae&&(xt.trigger("ajaxComplete",[It,ke]),--C.active||C.event.trigger("ajaxStop")))}return It},getJSON:function(l,h,x){return C.get(l,h,x,"json")},getScript:function(l,h){return C.get(l,void 0,h,"script")}}),C.each(["get","post"],function(l,h){C[h]=function(x,w,R,H){return ue(w)&&(H=H||R,R=w,w=void 0),C.ajax(C.extend({url:x,type:h,dataType:H,data:w,success:R},C.isPlainObject(x)&&x))}}),C.ajaxPrefilter(function(l){var h;for(h in l.headers)"content-type"===h.toLowerCase()&&(l.contentType=l.headers[h]||"")}),C._evalUrl=function(l,h,x){return C.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){C.globalEval(w,h,x)}})},C.fn.extend({wrapAll:function(l){var h;return this[0]&&(ue(l)&&(l=l.call(this[0])),h=C(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(l){return ue(l)?this.each(function(h){C(this).wrapInner(l.call(this,h))}):this.each(function(){var h=C(this),x=h.contents();x.length?x.wrapAll(l):h.append(l)})},wrap:function(l){var h=ue(l);return this.each(function(x){C(this).wrapAll(h?l.call(this,x):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(l){return!C.expr.pseudos.visible(l)},C.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new g.XMLHttpRequest}catch(l){}};var So={0:200,1223:204},D=C.ajaxSettings.xhr();i.cors=!!D&&"withCredentials"in D,i.ajax=D=!!D,C.ajaxTransport(function(l){var h,x;if(i.cors||D&&!l.crossDomain)return{send:function(w,R){var H,X=l.xhr();if(X.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(H in l.xhrFields)X[H]=l.xhrFields[H];for(H in l.mimeType&&X.overrideMimeType&&X.overrideMimeType(l.mimeType),!l.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest"),w)X.setRequestHeader(H,w[H]);h=function(ce){return function(){h&&(h=x=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,"abort"===ce?X.abort():"error"===ce?"number"!=typeof X.status?R(0,"error"):R(X.status,X.statusText):R(So[X.status]||X.status,X.statusText,"text"!==(X.responseType||"text")||"string"!=typeof X.responseText?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=h(),x=X.onerror=X.ontimeout=h("error"),void 0!==X.onabort?X.onabort=x:X.onreadystatechange=function(){4===X.readyState&&g.setTimeout(function(){h&&x()})},h=h("abort");try{X.send(l.hasContent&&l.data||null)}catch(ce){if(h)throw ce}},abort:function(){h&&h()}}}),C.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return C.globalEval(l),l}}}),C.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),C.ajaxTransport("script",function(l){var h,x;if(l.crossDomain||l.scriptAttrs)return{send:function(w,R){h=C("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",x=function(H){h.remove(),x=null,H&&R("error"===H.type?404:200,H.type)}),he.head.appendChild(h[0])},abort:function(){x&&x()}}});var l,Q=[],se=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Q.pop()||C.expando+"_"+Oi.guid++;return this[l]=!0,l}}),C.ajaxPrefilter("json jsonp",function(l,h,x){var w,R,H,X=!1!==l.jsonp&&(se.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&se.test(l.data)&&"data");if(X||"jsonp"===l.dataTypes[0])return w=l.jsonpCallback=ue(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,X?l[X]=l[X].replace(se,"$1"+w):!1!==l.jsonp&&(l.url+=(la.test(l.url)?"&":"?")+l.jsonp+"="+w),l.converters["script json"]=function(){return H||C.error(w+" was not called"),H[0]},l.dataTypes[0]="json",R=g[w],g[w]=function(){H=arguments},x.always(function(){void 0===R?C(g).removeProp(w):g[w]=R,l[w]&&(l.jsonpCallback=h.jsonpCallback,Q.push(w)),H&&ue(R)&&R(H[0]),H=R=void 0}),"script"}),i.createHTMLDocument=((l=he.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),C.parseHTML=function(l,h,x){return"string"!=typeof l?[]:("boolean"==typeof h&&(x=h,h=!1),h||(i.createHTMLDocument?((w=(h=he.implementation.createHTMLDocument("")).createElement("base")).href=he.location.href,h.head.appendChild(w)):h=he),H=!x&&[],(R=wt.exec(l))?[h.createElement(R[1])]:(R=Ki([l],h,H),H&&H.length&&C(H).remove(),C.merge([],R.childNodes)));var w,R,H},C.fn.load=function(l,h,x){var w,R,H,X=this,ce=l.indexOf(" ");return ce>-1&&(w=Xr(l.slice(ce)),l=l.slice(0,ce)),ue(h)?(x=h,h=void 0):h&&"object"==typeof h&&(R="POST"),X.length>0&&C.ajax({url:l,type:R||"GET",dataType:"html",data:h}).done(function(le){H=arguments,X.html(w?C("<div>").append(C.parseHTML(le)).find(w):le)}).always(x&&function(le,Ae){X.each(function(){x.apply(this,H||[le.responseText,Ae,le])})}),this},C.expr.pseudos.animated=function(l){return C.grep(C.timers,function(h){return l===h.elem}).length},C.offset={setOffset:function(l,h,x){var w,R,H,X,ce,le,Be=C.css(l,"position"),Qe=C(l),ke={};"static"===Be&&(l.style.position="relative"),ce=Qe.offset(),H=C.css(l,"top"),le=C.css(l,"left"),("absolute"===Be||"fixed"===Be)&&(H+le).indexOf("auto")>-1?(X=(w=Qe.position()).top,R=w.left):(X=parseFloat(H)||0,R=parseFloat(le)||0),ue(h)&&(h=h.call(l,x,C.extend({},ce))),null!=h.top&&(ke.top=h.top-ce.top+X),null!=h.left&&(ke.left=h.left-ce.left+R),"using"in h?h.using.call(l,ke):Qe.css(ke)}},C.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(R){C.offset.setOffset(this,l,R)});var h,x,w=this[0];return w?w.getClientRects().length?{top:(h=w.getBoundingClientRect()).top+(x=w.ownerDocument.defaultView).pageYOffset,left:h.left+x.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,h,x,w=this[0],R={top:0,left:0};if("fixed"===C.css(w,"position"))h=w.getBoundingClientRect();else{for(h=this.offset(),x=w.ownerDocument,l=w.offsetParent||x.documentElement;l&&(l===x.body||l===x.documentElement)&&"static"===C.css(l,"position");)l=l.parentNode;l&&l!==w&&1===l.nodeType&&((R=C(l).offset()).top+=C.css(l,"borderTopWidth",!0),R.left+=C.css(l,"borderLeftWidth",!0))}return{top:h.top-R.top-C.css(w,"marginTop",!0),left:h.left-R.left-C.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===C.css(l,"position");)l=l.offsetParent;return l||nn})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,h){var x="pageYOffset"===h;C.fn[l]=function(w){return an(this,function(R,H,X){var ce;if(ge(R)?ce=R:9===R.nodeType&&(ce=R.defaultView),void 0===X)return ce?ce[h]:R[H];ce?ce.scrollTo(x?ce.pageXOffset:X,x?X:ce.pageYOffset):R[H]=X},l,w,arguments.length)}}),C.each(["top","left"],function(l,h){C.cssHooks[h]=aa(i.pixelPosition,function(x,w){if(w)return w=li(x,h),Ei.test(w)?C(x).position()[h]+"px":w})}),C.each({Height:"height",Width:"width"},function(l,h){C.each({padding:"inner"+l,content:h,"":"outer"+l},function(x,w){C.fn[w]=function(R,H){var X=arguments.length&&(x||"boolean"!=typeof R),ce=x||(!0===R||!0===H?"margin":"border");return an(this,function(le,Ae,Be){var Qe;return ge(le)?0===w.indexOf("outer")?le["inner"+l]:le.document.documentElement["client"+l]:9===le.nodeType?(Qe=le.documentElement,Math.max(le.body["scroll"+l],Qe["scroll"+l],le.body["offset"+l],Qe["offset"+l],Qe["client"+l])):void 0===Be?C.css(le,Ae,ce):C.style(le,Ae,Be,ce)},h,X?R:void 0,X)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,h){C.fn[h]=function(x){return this.on(h,x)}}),C.fn.extend({bind:function(l,h,x){return this.on(l,null,h,x)},unbind:function(l,h){return this.off(l,null,h)},delegate:function(l,h,x,w){return this.on(h,l,x,w)},undelegate:function(l,h,x){return 1===arguments.length?this.off(l,"**"):this.off(h,l||"**",x)},hover:function(l,h){return this.mouseenter(l).mouseleave(h||l)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,h){C.fn[h]=function(x,w){return arguments.length>0?this.on(h,null,x,w):this.trigger(h)}});var pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(l,h){var x,w,R;if("string"==typeof h&&(x=l[h],h=l,l=x),ue(l))return w=M.call(arguments,2),R=function(){return l.apply(h||this,w.concat(M.call(arguments)))},R.guid=l.guid=l.guid||C.guid++,R},C.holdReady=function(l){l?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=dt,C.isFunction=ue,C.isWindow=ge,C.camelCase=Kt,C.type=Ie,C.now=Date.now,C.isNumeric=function(l){var h=C.type(l);return("number"===h||"string"===h)&&!isNaN(l-parseFloat(l))},C.trim=function(l){return null==l?"":(l+"").replace(pe,"")},void 0!==(p=function(){return C}.apply(Y,[]))&&(P.exports=p);var Me=g.jQuery,Ce=g.$;return C.noConflict=function(l){return g.$===C&&(g.$=Ce),l&&g.jQuery===C&&(g.jQuery=Me),C},void 0===S&&(g.jQuery=g.$=C),C})},37244:(P,Y,f)=>{var S=f(53436)(f(12119),"DataView");P.exports=S},54994:(P,Y,f)=>{var p=f(64312),g=f(46421),S=f(15764),E=f(18685),b=f(26676);function M(O){var k=-1,j=null==O?0:O.length;for(this.clear();++k<j;){var z=O[k];this.set(z[0],z[1])}}M.prototype.clear=p,M.prototype.delete=g,M.prototype.get=S,M.prototype.has=E,M.prototype.set=b,P.exports=M},9215:(P,Y,f)=>{var p=f(41840),g=f(34378),S=f(54981),E=f(67343),b=f(98895);function M(O){var k=-1,j=null==O?0:O.length;for(this.clear();++k<j;){var z=O[k];this.set(z[0],z[1])}}M.prototype.clear=p,M.prototype.delete=g,M.prototype.get=S,M.prototype.has=E,M.prototype.set=b,P.exports=M},51501:(P,Y,f)=>{var S=f(53436)(f(12119),"Map");P.exports=S},99850:(P,Y,f)=>{var p=f(10638),g=f(11184),S=f(70866),E=f(43771),b=f(51772);function M(O){var k=-1,j=null==O?0:O.length;for(this.clear();++k<j;){var z=O[k];this.set(z[0],z[1])}}M.prototype.clear=p,M.prototype.delete=g,M.prototype.get=S,M.prototype.has=E,M.prototype.set=b,P.exports=M},44267:(P,Y,f)=>{var S=f(53436)(f(12119),"Promise");P.exports=S},46323:(P,Y,f)=>{var S=f(53436)(f(12119),"Set");P.exports=S},58849:(P,Y,f)=>{var p=f(99850),g=f(4600),S=f(31387);function E(b){var M=-1,O=null==b?0:b.length;for(this.__data__=new p;++M<O;)this.add(b[M])}E.prototype.add=E.prototype.push=g,E.prototype.has=S,P.exports=E},2858:(P,Y,f)=>{var p=f(9215),g=f(13720),S=f(64410),E=f(45576),b=f(22247),M=f(41585);function O(k){var j=this.__data__=new p(k);this.size=j.size}O.prototype.clear=g,O.prototype.delete=S,O.prototype.get=E,O.prototype.has=b,O.prototype.set=M,P.exports=O},60443:(P,Y,f)=>{var p=f(12119);P.exports=p.Symbol},73457:(P,Y,f)=>{var p=f(12119);P.exports=p.Uint8Array},24243:(P,Y,f)=>{var S=f(53436)(f(12119),"WeakMap");P.exports=S},26999:P=>{P.exports=function Y(f,p,g){switch(g.length){case 0:return f.call(p);case 1:return f.call(p,g[0]);case 2:return f.call(p,g[0],g[1]);case 3:return f.call(p,g[0],g[1],g[2])}return f.apply(p,g)}},96837:P=>{P.exports=function Y(f,p){for(var g=-1,S=null==f?0:f.length;++g<S&&!1!==p(f[g],g,f););return f}},69779:P=>{P.exports=function Y(f,p){for(var g=-1,S=null==f?0:f.length,E=0,b=[];++g<S;){var M=f[g];p(M,g,f)&&(b[E++]=M)}return b}},61253:(P,Y,f)=>{var p=f(14164);P.exports=function g(S,E){return!(null==S||!S.length)&&p(S,E,0)>-1}},37609:P=>{P.exports=function Y(f,p,g){for(var S=-1,E=null==f?0:f.length;++S<E;)if(g(p,f[S]))return!0;return!1}},72271:(P,Y,f)=>{var p=f(85334),g=f(77151),S=f(21503),E=f(80891),b=f(58442),M=f(48159),k=Object.prototype.hasOwnProperty;P.exports=function j(z,N){var K=S(z),re=!K&&g(z),fe=!K&&!re&&E(z),i=!K&&!re&&!fe&&M(z),ue=K||re||fe||i,ge=ue?p(z.length,String):[],he=ge.length;for(var ee in z)(N||k.call(z,ee))&&(!ue||!("length"==ee||fe&&("offset"==ee||"parent"==ee)||i&&("buffer"==ee||"byteLength"==ee||"byteOffset"==ee)||b(ee,he)))&&ge.push(ee);return ge}},84633:P=>{P.exports=function Y(f,p){for(var g=-1,S=null==f?0:f.length,E=Array(S);++g<S;)E[g]=p(f[g],g,f);return E}},85059:P=>{P.exports=function Y(f,p){for(var g=-1,S=p.length,E=f.length;++g<S;)f[E+g]=p[g];return f}},8745:P=>{P.exports=function Y(f,p,g,S){var E=-1,b=null==f?0:f.length;for(S&&b&&(g=f[++E]);++E<b;)g=p(g,f[E],E,f);return g}},79503:P=>{P.exports=function Y(f,p){for(var g=-1,S=null==f?0:f.length;++g<S;)if(p(f[g],g,f))return!0;return!1}},75481:(P,Y,f)=>{var g=f(11847)("length");P.exports=g},49276:(P,Y,f)=>{var p=f(85683),g=f(20217);P.exports=function S(E,b,M){(void 0!==M&&!g(E[b],M)||void 0===M&&!(b in E))&&p(E,b,M)}},89719:(P,Y,f)=>{var p=f(85683),g=f(20217),E=Object.prototype.hasOwnProperty;P.exports=function b(M,O,k){var j=M[O];(!E.call(M,O)||!g(j,k)||void 0===k&&!(O in M))&&p(M,O,k)}},43503:(P,Y,f)=>{var p=f(20217);P.exports=function g(S,E){for(var b=S.length;b--;)if(p(S[b][0],E))return b;return-1}},94121:(P,Y,f)=>{var p=f(31989),g=f(118);P.exports=function S(E,b){return E&&p(b,g(b),E)}},99287:(P,Y,f)=>{var p=f(31989),g=f(16555);P.exports=function S(E,b){return E&&p(b,g(b),E)}},85683:(P,Y,f)=>{var p=f(56713);P.exports=function g(S,E,b){"__proto__"==E&&p?p(S,E,{configurable:!0,enumerable:!0,value:b,writable:!0}):S[E]=b}},44462:(P,Y,f)=>{var p=f(2858),g=f(96837),S=f(89719),E=f(94121),b=f(99287),M=f(19292),O=f(99454),k=f(84444),j=f(59905),z=f(47597),N=f(6967),K=f(28794),re=f(76782),fe=f(37878),i=f(4264),ue=f(21503),ge=f(80891),he=f(13222),ee=f(25940),ve=f(90799),Ie=f(118),De=f(16555),Ke="[object Arguments]",jt="[object Function]",wr="[object Object]",B={};B[Ke]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[wr]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[jt]=B["[object WeakMap]"]=!1,P.exports=function G(ie,ye,We,Xe,gt,kt){var Vt,sn=1&ye,nn=2&ye,un=4&ye;if(We&&(Vt=gt?We(ie,Xe,gt,kt):We(ie)),void 0!==Vt)return Vt;if(!ee(ie))return ie;var Bn=ue(ie);if(Bn){if(Vt=re(ie),!sn)return O(ie,Vt)}else{var Dn=K(ie),Vr=Dn==jt||"[object GeneratorFunction]"==Dn;if(ge(ie))return M(ie,sn);if(Dn==wr||Dn==Ke||Vr&&!gt){if(Vt=nn||Vr?{}:i(ie),!sn)return nn?j(ie,b(Vt,ie)):k(ie,E(Vt,ie))}else{if(!B[Dn])return gt?ie:{};Vt=fe(ie,Dn,sn)}}kt||(kt=new p);var Pn=kt.get(ie);if(Pn)return Pn;kt.set(ie,Vt),ve(ie)?ie.forEach(function(Wn){Vt.add(G(Wn,ye,We,Wn,ie,kt))}):he(ie)&&ie.forEach(function(Wn,dr){Vt.set(dr,G(Wn,ye,We,dr,ie,kt))});var Fn=Bn?void 0:(un?nn?N:z:nn?De:Ie)(ie);return g(Fn||ie,function(Wn,dr){Fn&&(Wn=ie[dr=Wn]),S(Vt,dr,G(Wn,ye,We,dr,ie,kt))}),Vt}},78858:(P,Y,f)=>{var p=f(25940),g=Object.create,S=function(){function E(){}return function(b){if(!p(b))return{};if(g)return g(b);E.prototype=b;var M=new E;return E.prototype=void 0,M}}();P.exports=S},43132:(P,Y,f)=>{var p=f(45184),S=f(16539)(p);P.exports=S},67308:(P,Y,f)=>{var p=f(44129);P.exports=function g(S,E,b){for(var M=-1,O=S.length;++M<O;){var k=S[M],j=E(k);if(null!=j&&(void 0===z?j==j&&!p(j):b(j,z)))var z=j,N=k}return N}},33609:(P,Y,f)=>{var p=f(43132);P.exports=function g(S,E){var b=[];return p(S,function(M,O,k){E(M,O,k)&&b.push(M)}),b}},65317:P=>{P.exports=function Y(f,p,g,S){for(var E=f.length,b=g+(S?1:-1);S?b--:++b<E;)if(p(f[b],b,f))return b;return-1}},50686:(P,Y,f)=>{var p=f(85059),g=f(75039);P.exports=function S(E,b,M,O,k){var j=-1,z=E.length;for(M||(M=g),k||(k=[]);++j<z;){var N=E[j];b>0&&M(N)?b>1?S(N,b-1,M,O,k):p(k,N):O||(k[k.length]=N)}return k}},30755:(P,Y,f)=>{var g=f(40456)();P.exports=g},45184:(P,Y,f)=>{var p=f(30755),g=f(118);P.exports=function S(E,b){return E&&p(E,b,g)}},15456:(P,Y,f)=>{var p=f(65456),g=f(68533);P.exports=function S(E,b){for(var M=0,O=(b=p(b,E)).length;null!=E&&M<O;)E=E[g(b[M++])];return M&&M==O?E:void 0}},38247:(P,Y,f)=>{var p=f(85059),g=f(21503);P.exports=function S(E,b,M){var O=b(E);return g(E)?O:p(O,M(E))}},93337:(P,Y,f)=>{var p=f(60443),g=f(21318),S=f(92902),M=p?p.toStringTag:void 0;P.exports=function O(k){return null==k?void 0===k?"[object Undefined]":"[object Null]":M&&M in Object(k)?g(k):S(k)}},31100:P=>{P.exports=function Y(f,p){return f>p}},84781:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function p(g,S){return null!=g&&f.call(g,S)}},69989:P=>{P.exports=function Y(f,p){return null!=f&&p in Object(f)}},14164:(P,Y,f)=>{var p=f(65317),g=f(70968),S=f(24977);P.exports=function E(b,M,O){return M==M?S(b,M,O):p(b,g,O)}},60186:(P,Y,f)=>{var p=f(93337),g=f(72671);P.exports=function E(b){return g(b)&&"[object Arguments]"==p(b)}},85740:(P,Y,f)=>{var p=f(58325),g=f(72671);P.exports=function S(E,b,M,O,k){return E===b||(null==E||null==b||!g(E)&&!g(b)?E!=E&&b!=b:p(E,b,M,O,S,k))}},58325:(P,Y,f)=>{var p=f(2858),g=f(63914),S=f(78583),E=f(32286),b=f(28794),M=f(21503),O=f(80891),k=f(48159),z="[object Arguments]",N="[object Array]",K="[object Object]",fe=Object.prototype.hasOwnProperty;P.exports=function i(ue,ge,he,ee,ve,Ie){var De=M(ue),C=M(ge),He=De?N:b(ue),Je=C?N:b(ge),Ke=(He=He==z?K:He)==K,tt=(Je=Je==z?K:Je)==K,it=He==Je;if(it&&O(ue)){if(!O(ge))return!1;De=!0,Ke=!1}if(it&&!Ke)return Ie||(Ie=new p),De||k(ue)?g(ue,ge,he,ee,ve,Ie):S(ue,ge,He,he,ee,ve,Ie);if(!(1&he)){var dt=Ke&&fe.call(ue,"__wrapped__"),wt=tt&&fe.call(ge,"__wrapped__");if(dt||wt){var jt=dt?ue.value():ue,qt=wt?ge.value():ge;return Ie||(Ie=new p),ve(jt,qt,he,ee,Ie)}}return!!it&&(Ie||(Ie=new p),E(ue,ge,he,ee,ve,Ie))}},97021:(P,Y,f)=>{var p=f(28794),g=f(72671);P.exports=function E(b){return g(b)&&"[object Map]"==p(b)}},40431:(P,Y,f)=>{var p=f(2858),g=f(85740);P.exports=function b(M,O,k,j){var z=k.length,N=z,K=!j;if(null==M)return!N;for(M=Object(M);z--;){var re=k[z];if(K&&re[2]?re[1]!==M[re[0]]:!(re[0]in M))return!1}for(;++z<N;){var fe=(re=k[z])[0],i=M[fe],ue=re[1];if(K&&re[2]){if(void 0===i&&!(fe in M))return!1}else{var ge=new p;if(j)var he=j(i,ue,fe,M,O,ge);if(!(void 0===he?g(ue,i,3,j,ge):he))return!1}}return!0}},70968:P=>{P.exports=function Y(f){return f!=f}},37304:(P,Y,f)=>{var p=f(75946),g=f(91943),S=f(25940),E=f(52827),M=/^\[object .+?Constructor\]$/,N=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");P.exports=function K(re){return!(!S(re)||g(re))&&(p(re)?N:M).test(E(re))}},771:(P,Y,f)=>{var p=f(28794),g=f(72671);P.exports=function E(b){return g(b)&&"[object Set]"==p(b)}},1083:(P,Y,f)=>{var p=f(93337),g=f(96231),S=f(72671),it={};it["[object Float32Array]"]=it["[object Float64Array]"]=it["[object Int8Array]"]=it["[object Int16Array]"]=it["[object Int32Array]"]=it["[object Uint8Array]"]=it["[object Uint8ClampedArray]"]=it["[object Uint16Array]"]=it["[object Uint32Array]"]=!0,it["[object Arguments]"]=it["[object Array]"]=it["[object ArrayBuffer]"]=it["[object Boolean]"]=it["[object DataView]"]=it["[object Date]"]=it["[object Error]"]=it["[object Function]"]=it["[object Map]"]=it["[object Number]"]=it["[object Object]"]=it["[object RegExp]"]=it["[object Set]"]=it["[object String]"]=it["[object WeakMap]"]=!1,P.exports=function dt(wt){return S(wt)&&g(wt.length)&&!!it[p(wt)]}},96517:(P,Y,f)=>{var p=f(98133),g=f(9458),S=f(32608),E=f(21503),b=f(87495);P.exports=function M(O){return"function"==typeof O?O:null==O?S:"object"==typeof O?E(O)?g(O[0],O[1]):p(O):b(O)}},81172:(P,Y,f)=>{var p=f(45488),g=f(85491),E=Object.prototype.hasOwnProperty;P.exports=function b(M){if(!p(M))return g(M);var O=[];for(var k in Object(M))E.call(M,k)&&"constructor"!=k&&O.push(k);return O}},92809:(P,Y,f)=>{var p=f(25940),g=f(45488),S=f(32158),b=Object.prototype.hasOwnProperty;P.exports=function M(O){if(!p(O))return S(O);var k=g(O),j=[];for(var z in O)"constructor"==z&&(k||!b.call(O,z))||j.push(z);return j}},99069:P=>{P.exports=function Y(f,p){return f<p}},92046:(P,Y,f)=>{var p=f(43132),g=f(56507);P.exports=function S(E,b){var M=-1,O=g(E)?Array(E.length):[];return p(E,function(k,j,z){O[++M]=b(k,j,z)}),O}},98133:(P,Y,f)=>{var p=f(40431),g=f(22379),S=f(642);P.exports=function E(b){var M=g(b);return 1==M.length&&M[0][2]?S(M[0][0],M[0][1]):function(O){return O===b||p(O,b,M)}}},9458:(P,Y,f)=>{var p=f(85740),g=f(8817),S=f(11172),E=f(45352),b=f(22442),M=f(642),O=f(68533);P.exports=function z(N,K){return E(N)&&b(K)?M(O(N),K):function(re){var fe=g(re,N);return void 0===fe&&fe===K?S(re,N):p(K,fe,3)}}},73842:(P,Y,f)=>{var p=f(2858),g=f(49276),S=f(30755),E=f(33675),b=f(25940),M=f(16555),O=f(99351);P.exports=function k(j,z,N,K,re){j!==z&&S(z,function(fe,i){if(re||(re=new p),b(fe))E(j,z,i,N,k,K,re);else{var ue=K?K(O(j,i),fe,i+"",j,z,re):void 0;void 0===ue&&(ue=fe),g(j,i,ue)}},M)}},33675:(P,Y,f)=>{var p=f(49276),g=f(19292),S=f(65208),E=f(99454),b=f(4264),M=f(77151),O=f(21503),k=f(21330),j=f(80891),z=f(75946),N=f(25940),K=f(97614),re=f(48159),fe=f(99351),i=f(8067);P.exports=function ue(ge,he,ee,ve,Ie,De,C){var He=fe(ge,ee),Je=fe(he,ee),Ke=C.get(Je);if(Ke)p(ge,ee,Ke);else{var tt=De?De(He,Je,ee+"",ge,he,C):void 0,it=void 0===tt;if(it){var dt=O(Je),wt=!dt&&j(Je),jt=!dt&&!wt&&re(Je);tt=Je,dt||wt||jt?O(He)?tt=He:k(He)?tt=E(He):wt?(it=!1,tt=g(Je,!0)):jt?(it=!1,tt=S(Je,!0)):tt=[]:K(Je)||M(Je)?(tt=He,M(He)?tt=i(He):(!N(He)||z(He))&&(tt=b(Je))):it=!1}it&&(C.set(Je,tt),Ie(tt,Je,ve,De,C),C.delete(Je)),p(ge,ee,tt)}}},6119:(P,Y,f)=>{var p=f(84633),g=f(15456),S=f(96517),E=f(92046),b=f(18750),M=f(85647),O=f(41215),k=f(32608),j=f(21503);P.exports=function z(N,K,re){K=K.length?p(K,function(ue){return j(ue)?function(ge){return g(ge,1===ue.length?ue[0]:ue)}:ue}):[k];var fe=-1;K=p(K,M(S));var i=E(N,function(ue,ge,he){return{criteria:p(K,function(ve){return ve(ue)}),index:++fe,value:ue}});return b(i,function(ue,ge){return O(ue,ge,re)})}},83021:(P,Y,f)=>{var p=f(95495),g=f(11172);P.exports=function S(E,b){return p(E,b,function(M,O){return g(E,O)})}},95495:(P,Y,f)=>{var p=f(15456),g=f(55963),S=f(65456);P.exports=function E(b,M,O){for(var k=-1,j=M.length,z={};++k<j;){var N=M[k],K=p(b,N);O(K,N)&&g(z,S(N,b),K)}return z}},11847:P=>{P.exports=function Y(f){return function(p){return null==p?void 0:p[f]}}},39222:(P,Y,f)=>{var p=f(15456);P.exports=function g(S){return function(E){return p(E,S)}}},16307:P=>{var Y=Math.ceil,f=Math.max;P.exports=function p(g,S,E,b){for(var M=-1,O=f(Y((S-g)/(E||1)),0),k=Array(O);O--;)k[b?O:++M]=g,g+=E;return k}},13570:P=>{P.exports=function Y(f,p,g,S,E){return E(f,function(b,M,O){g=S?(S=!1,b):p(g,b,M,O)}),g}},23269:(P,Y,f)=>{var p=f(32608),g=f(53983),S=f(72185);P.exports=function E(b,M){return S(g(b,M,p),b+"")}},55963:(P,Y,f)=>{var p=f(89719),g=f(65456),S=f(58442),E=f(25940),b=f(68533);P.exports=function M(O,k,j,z){if(!E(O))return O;for(var N=-1,K=(k=g(k,O)).length,re=K-1,fe=O;null!=fe&&++N<K;){var i=b(k[N]),ue=j;if("__proto__"===i||"constructor"===i||"prototype"===i)return O;if(N!=re){var ge=fe[i];void 0===(ue=z?z(ge,i,fe):void 0)&&(ue=E(ge)?ge:S(k[N+1])?[]:{})}p(fe,i,ue),fe=fe[i]}return O}},69510:(P,Y,f)=>{var p=f(76684),g=f(56713),S=f(32608);P.exports=g?function(b,M){return g(b,"toString",{configurable:!0,enumerable:!1,value:p(M),writable:!0})}:S},18750:P=>{P.exports=function Y(f,p){var g=f.length;for(f.sort(p);g--;)f[g]=f[g].value;return f}},85334:P=>{P.exports=function Y(f,p){for(var g=-1,S=Array(f);++g<f;)S[g]=p(g);return S}},93935:(P,Y,f)=>{var p=f(60443),g=f(84633),S=f(21503),E=f(44129),M=p?p.prototype:void 0,O=M?M.toString:void 0;P.exports=function k(j){if("string"==typeof j)return j;if(S(j))return g(j,k)+"";if(E(j))return O?O.call(j):"";var z=j+"";return"0"==z&&1/j==-1/0?"-0":z}},83348:(P,Y,f)=>{var p=f(42760),g=/^\s+/;P.exports=function S(E){return E&&E.slice(0,p(E)+1).replace(g,"")}},85647:P=>{P.exports=function Y(f){return function(p){return f(p)}}},80707:(P,Y,f)=>{var p=f(58849),g=f(61253),S=f(37609),E=f(25972),b=f(14575),M=f(24174);P.exports=function k(j,z,N){var K=-1,re=g,fe=j.length,i=!0,ue=[],ge=ue;if(N)i=!1,re=S;else if(fe>=200){var he=z?null:b(j);if(he)return M(he);i=!1,re=E,ge=new p}else ge=z?[]:ue;e:for(;++K<fe;){var ee=j[K],ve=z?z(ee):ee;if(ee=N||0!==ee?ee:0,i&&ve==ve){for(var Ie=ge.length;Ie--;)if(ge[Ie]===ve)continue e;z&&ge.push(ve),ue.push(ee)}else re(ge,ve,N)||(ge!==ue&&ge.push(ve),ue.push(ee))}return ue}},19179:(P,Y,f)=>{var p=f(84633);P.exports=function g(S,E){return p(E,function(b){return S[b]})}},38645:P=>{P.exports=function Y(f,p,g){for(var S=-1,E=f.length,b=p.length,M={};++S<E;)g(M,f[S],S<b?p[S]:void 0);return M}},25972:P=>{P.exports=function Y(f,p){return f.has(p)}},21481:(P,Y,f)=>{var p=f(32608);P.exports=function g(S){return"function"==typeof S?S:p}},65456:(P,Y,f)=>{var p=f(21503),g=f(45352),S=f(32855),E=f(73943);P.exports=function b(M,O){return p(M)?M:g(M,O)?[M]:S(E(M))}},43362:(P,Y,f)=>{var p=f(73457);P.exports=function g(S){var E=new S.constructor(S.byteLength);return new p(E).set(new p(S)),E}},19292:(P,Y,f)=>{P=f.nmd(P);var p=f(12119),g=Y&&!Y.nodeType&&Y,S=g&&P&&!P.nodeType&&P,b=S&&S.exports===g?p.Buffer:void 0,M=b?b.allocUnsafe:void 0;P.exports=function O(k,j){if(j)return k.slice();var z=k.length,N=M?M(z):new k.constructor(z);return k.copy(N),N}},17e3:(P,Y,f)=>{var p=f(43362);P.exports=function g(S,E){var b=E?p(S.buffer):S.buffer;return new S.constructor(b,S.byteOffset,S.byteLength)}},74098:P=>{var Y=/\w*$/;P.exports=function f(p){var g=new p.constructor(p.source,Y.exec(p));return g.lastIndex=p.lastIndex,g}},62533:(P,Y,f)=>{var p=f(60443),g=p?p.prototype:void 0,S=g?g.valueOf:void 0;P.exports=function E(b){return S?Object(S.call(b)):{}}},65208:(P,Y,f)=>{var p=f(43362);P.exports=function g(S,E){var b=E?p(S.buffer):S.buffer;return new S.constructor(b,S.byteOffset,S.length)}},13443:(P,Y,f)=>{var p=f(44129);P.exports=function g(S,E){if(S!==E){var b=void 0!==S,M=null===S,O=S==S,k=p(S),j=void 0!==E,z=null===E,N=E==E,K=p(E);if(!z&&!K&&!k&&S>E||k&&j&&N&&!z&&!K||M&&j&&N||!b&&N||!O)return 1;if(!M&&!k&&!K&&S<E||K&&b&&O&&!M&&!k||z&&b&&O||!j&&O||!N)return-1}return 0}},41215:(P,Y,f)=>{var p=f(13443);P.exports=function g(S,E,b){for(var M=-1,O=S.criteria,k=E.criteria,j=O.length,z=b.length;++M<j;){var N=p(O[M],k[M]);if(N)return M>=z?N:N*("desc"==b[M]?-1:1)}return S.index-E.index}},99454:P=>{P.exports=function Y(f,p){var g=-1,S=f.length;for(p||(p=Array(S));++g<S;)p[g]=f[g];return p}},31989:(P,Y,f)=>{var p=f(89719),g=f(85683);P.exports=function S(E,b,M,O){var k=!M;M||(M={});for(var j=-1,z=b.length;++j<z;){var N=b[j],K=O?O(M[N],E[N],N,M,E):void 0;void 0===K&&(K=E[N]),k?g(M,N,K):p(M,N,K)}return M}},84444:(P,Y,f)=>{var p=f(31989),g=f(39383);P.exports=function S(E,b){return p(E,g(E),b)}},59905:(P,Y,f)=>{var p=f(31989),g=f(53051);P.exports=function S(E,b){return p(E,g(E),b)}},24610:(P,Y,f)=>{var p=f(12119);P.exports=p["__core-js_shared__"]},84944:(P,Y,f)=>{var p=f(23269),g=f(93342);P.exports=function S(E){return p(function(b,M){var O=-1,k=M.length,j=k>1?M[k-1]:void 0,z=k>2?M[2]:void 0;for(j=E.length>3&&"function"==typeof j?(k--,j):void 0,z&&g(M[0],M[1],z)&&(j=k<3?void 0:j,k=1),b=Object(b);++O<k;){var N=M[O];N&&E(b,N,O,j)}return b})}},16539:(P,Y,f)=>{var p=f(56507);P.exports=function g(S,E){return function(b,M){if(null==b)return b;if(!p(b))return S(b,M);for(var O=b.length,k=E?O:-1,j=Object(b);(E?k--:++k<O)&&!1!==M(j[k],k,j););return b}}},40456:P=>{P.exports=function Y(f){return function(p,g,S){for(var E=-1,b=Object(p),M=S(p),O=M.length;O--;){var k=M[f?O:++E];if(!1===g(b[k],k,b))break}return p}}},24653:(P,Y,f)=>{var p=f(96517),g=f(56507),S=f(118);P.exports=function E(b){return function(M,O,k){var j=Object(M);if(!g(M)){var z=p(O,3);M=S(M),O=function(K){return z(j[K],K,j)}}var N=b(M,O,k);return N>-1?j[z?M[N]:N]:void 0}}},97509:(P,Y,f)=>{var p=f(16307),g=f(93342),S=f(12232);P.exports=function E(b){return function(M,O,k){return k&&"number"!=typeof k&&g(M,O,k)&&(O=k=void 0),M=S(M),void 0===O?(O=M,M=0):O=S(O),k=void 0===k?M<O?1:-1:S(k),p(M,O,k,b)}}},14575:(P,Y,f)=>{var p=f(46323),g=f(12552),S=f(24174),b=p&&1/S(new p([,-0]))[1]==1/0?function(M){return new p(M)}:g;P.exports=b},56713:(P,Y,f)=>{var p=f(53436),g=function(){try{var S=p(Object,"defineProperty");return S({},"",{}),S}catch(E){}}();P.exports=g},63914:(P,Y,f)=>{var p=f(58849),g=f(79503),S=f(25972);P.exports=function M(O,k,j,z,N,K){var re=1&j,fe=O.length,i=k.length;if(fe!=i&&!(re&&i>fe))return!1;var ue=K.get(O),ge=K.get(k);if(ue&&ge)return ue==k&&ge==O;var he=-1,ee=!0,ve=2&j?new p:void 0;for(K.set(O,k),K.set(k,O);++he<fe;){var Ie=O[he],De=k[he];if(z)var C=re?z(De,Ie,he,k,O,K):z(Ie,De,he,O,k,K);if(void 0!==C){if(C)continue;ee=!1;break}if(ve){if(!g(k,function(He,Je){if(!S(ve,Je)&&(Ie===He||N(Ie,He,j,z,K)))return ve.push(Je)})){ee=!1;break}}else if(Ie!==De&&!N(Ie,De,j,z,K)){ee=!1;break}}return K.delete(O),K.delete(k),ee}},78583:(P,Y,f)=>{var p=f(60443),g=f(73457),S=f(20217),E=f(63914),b=f(83205),M=f(24174),ve=p?p.prototype:void 0,Ie=ve?ve.valueOf:void 0;P.exports=function De(C,He,Je,Ke,tt,it,dt){switch(Je){case"[object DataView]":if(C.byteLength!=He.byteLength||C.byteOffset!=He.byteOffset)return!1;C=C.buffer,He=He.buffer;case"[object ArrayBuffer]":return!(C.byteLength!=He.byteLength||!it(new g(C),new g(He)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+C,+He);case"[object Error]":return C.name==He.name&&C.message==He.message;case"[object RegExp]":case"[object String]":return C==He+"";case"[object Map]":var wt=b;case"[object Set]":if(wt||(wt=M),C.size!=He.size&&!(1&Ke))return!1;var qt=dt.get(C);if(qt)return qt==He;Ke|=2,dt.set(C,He);var Mt=E(wt(C),wt(He),Ke,tt,it,dt);return dt.delete(C),Mt;case"[object Symbol]":if(Ie)return Ie.call(C)==Ie.call(He)}return!1}},32286:(P,Y,f)=>{var p=f(47597),E=Object.prototype.hasOwnProperty;P.exports=function b(M,O,k,j,z,N){var K=1&k,re=p(M),fe=re.length;if(fe!=p(O).length&&!K)return!1;for(var ge=fe;ge--;){var he=re[ge];if(!(K?he in O:E.call(O,he)))return!1}var ee=N.get(M),ve=N.get(O);if(ee&&ve)return ee==O&&ve==M;var Ie=!0;N.set(M,O),N.set(O,M);for(var De=K;++ge<fe;){var C=M[he=re[ge]],He=O[he];if(j)var Je=K?j(He,C,he,O,M,N):j(C,He,he,M,O,N);if(!(void 0===Je?C===He||z(C,He,k,j,N):Je)){Ie=!1;break}De||(De="constructor"==he)}if(Ie&&!De){var Ke=M.constructor,tt=O.constructor;Ke!=tt&&"constructor"in M&&"constructor"in O&&!("function"==typeof Ke&&Ke instanceof Ke&&"function"==typeof tt&&tt instanceof tt)&&(Ie=!1)}return N.delete(M),N.delete(O),Ie}},3975:(P,Y,f)=>{var p=f(22274),g=f(53983),S=f(72185);P.exports=function E(b){return S(g(b,void 0,p),b+"")}},79122:P=>{var Y="object"==typeof global&&global&&global.Object===Object&&global;P.exports=Y},47597:(P,Y,f)=>{var p=f(38247),g=f(39383),S=f(118);P.exports=function E(b){return p(b,S,g)}},6967:(P,Y,f)=>{var p=f(38247),g=f(53051),S=f(16555);P.exports=function E(b){return p(b,S,g)}},54537:(P,Y,f)=>{var p=f(23819);P.exports=function g(S,E){var b=S.__data__;return p(E)?b["string"==typeof E?"string":"hash"]:b.map}},22379:(P,Y,f)=>{var p=f(22442),g=f(118);P.exports=function S(E){for(var b=g(E),M=b.length;M--;){var O=b[M],k=E[O];b[M]=[O,k,p(k)]}return b}},53436:(P,Y,f)=>{var p=f(37304),g=f(51990);P.exports=function S(E,b){var M=g(E,b);return p(M)?M:void 0}},29519:(P,Y,f)=>{var g=f(69385)(Object.getPrototypeOf,Object);P.exports=g},21318:(P,Y,f)=>{var p=f(60443),g=Object.prototype,S=g.hasOwnProperty,E=g.toString,b=p?p.toStringTag:void 0;P.exports=function M(O){var k=S.call(O,b),j=O[b];try{O[b]=void 0;var z=!0}catch(K){}var N=E.call(O);return z&&(k?O[b]=j:delete O[b]),N}},39383:(P,Y,f)=>{var p=f(69779),g=f(49975),E=Object.prototype.propertyIsEnumerable,b=Object.getOwnPropertySymbols;P.exports=b?function(O){return null==O?[]:(O=Object(O),p(b(O),function(k){return E.call(O,k)}))}:g},53051:(P,Y,f)=>{var p=f(85059),g=f(29519),S=f(39383),E=f(49975);P.exports=Object.getOwnPropertySymbols?function(O){for(var k=[];O;)p(k,S(O)),O=g(O);return k}:E},28794:(P,Y,f)=>{var p=f(37244),g=f(51501),S=f(44267),E=f(46323),b=f(24243),M=f(93337),O=f(52827),k="[object Map]",z="[object Promise]",N="[object Set]",K="[object WeakMap]",re="[object DataView]",fe=O(p),i=O(g),ue=O(S),ge=O(E),he=O(b),ee=M;(p&&ee(new p(new ArrayBuffer(1)))!=re||g&&ee(new g)!=k||S&&ee(S.resolve())!=z||E&&ee(new E)!=N||b&&ee(new b)!=K)&&(ee=function(ve){var Ie=M(ve),De="[object Object]"==Ie?ve.constructor:void 0,C=De?O(De):"";if(C)switch(C){case fe:return re;case i:return k;case ue:return z;case ge:return N;case he:return K}return Ie}),P.exports=ee},51990:P=>{P.exports=function Y(f,p){return null==f?void 0:f[p]}},47283:(P,Y,f)=>{var p=f(65456),g=f(77151),S=f(21503),E=f(58442),b=f(96231),M=f(68533);P.exports=function O(k,j,z){for(var N=-1,K=(j=p(j,k)).length,re=!1;++N<K;){var fe=M(j[N]);if(!(re=null!=k&&z(k,fe)))break;k=k[fe]}return re||++N!=K?re:!!(K=null==k?0:k.length)&&b(K)&&E(fe,K)&&(S(k)||g(k))}},77609:P=>{var M=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");P.exports=function O(k){return M.test(k)}},64312:(P,Y,f)=>{var p=f(60862);P.exports=function g(){this.__data__=p?p(null):{},this.size=0}},46421:P=>{P.exports=function Y(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}},15764:(P,Y,f)=>{var p=f(60862),E=Object.prototype.hasOwnProperty;P.exports=function b(M){var O=this.__data__;if(p){var k=O[M];return"__lodash_hash_undefined__"===k?void 0:k}return E.call(O,M)?O[M]:void 0}},18685:(P,Y,f)=>{var p=f(60862),S=Object.prototype.hasOwnProperty;P.exports=function E(b){var M=this.__data__;return p?void 0!==M[b]:S.call(M,b)}},26676:(P,Y,f)=>{var p=f(60862);P.exports=function S(E,b){var M=this.__data__;return this.size+=this.has(E)?0:1,M[E]=p&&void 0===b?"__lodash_hash_undefined__":b,this}},76782:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function p(g){var S=g.length,E=new g.constructor(S);return S&&"string"==typeof g[0]&&f.call(g,"index")&&(E.index=g.index,E.input=g.input),E}},37878:(P,Y,f)=>{var p=f(43362),g=f(17e3),S=f(74098),E=f(62533),b=f(65208);P.exports=function Je(Ke,tt,it){var dt=Ke.constructor;switch(tt){case"[object ArrayBuffer]":return p(Ke);case"[object Boolean]":case"[object Date]":return new dt(+Ke);case"[object DataView]":return g(Ke,it);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return b(Ke,it);case"[object Map]":case"[object Set]":return new dt;case"[object Number]":case"[object String]":return new dt(Ke);case"[object RegExp]":return S(Ke);case"[object Symbol]":return E(Ke)}}},4264:(P,Y,f)=>{var p=f(78858),g=f(29519),S=f(45488);P.exports=function E(b){return"function"!=typeof b.constructor||S(b)?{}:p(g(b))}},75039:(P,Y,f)=>{var p=f(60443),g=f(77151),S=f(21503),E=p?p.isConcatSpreadable:void 0;P.exports=function b(M){return S(M)||g(M)||!!(E&&M&&M[E])}},58442:P=>{var f=/^(?:0|[1-9]\d*)$/;P.exports=function p(g,S){var E=typeof g;return!!(S=null==S?9007199254740991:S)&&("number"==E||"symbol"!=E&&f.test(g))&&g>-1&&g%1==0&&g<S}},93342:(P,Y,f)=>{var p=f(20217),g=f(56507),S=f(58442),E=f(25940);P.exports=function b(M,O,k){if(!E(k))return!1;var j=typeof O;return!!("number"==j?g(k)&&S(O,k.length):"string"==j&&O in k)&&p(k[O],M)}},45352:(P,Y,f)=>{var p=f(21503),g=f(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;P.exports=function b(M,O){if(p(M))return!1;var k=typeof M;return!("number"!=k&&"symbol"!=k&&"boolean"!=k&&null!=M&&!g(M))||E.test(M)||!S.test(M)||null!=O&&M in Object(O)}},23819:P=>{P.exports=function Y(f){var p=typeof f;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==f:null===f}},91943:(P,Y,f)=>{var E,p=f(24610),g=(E=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"";P.exports=function S(E){return!!g&&g in E}},45488:P=>{var Y=Object.prototype;P.exports=function f(p){var g=p&&p.constructor;return p===("function"==typeof g&&g.prototype||Y)}},22442:(P,Y,f)=>{var p=f(25940);P.exports=function g(S){return S==S&&!p(S)}},41840:P=>{P.exports=function Y(){this.__data__=[],this.size=0}},34378:(P,Y,f)=>{var p=f(43503),S=Array.prototype.splice;P.exports=function E(b){var M=this.__data__,O=p(M,b);return!(O<0||(O==M.length-1?M.pop():S.call(M,O,1),--this.size,0))}},54981:(P,Y,f)=>{var p=f(43503);P.exports=function g(S){var E=this.__data__,b=p(E,S);return b<0?void 0:E[b][1]}},67343:(P,Y,f)=>{var p=f(43503);P.exports=function g(S){return p(this.__data__,S)>-1}},98895:(P,Y,f)=>{var p=f(43503);P.exports=function g(S,E){var b=this.__data__,M=p(b,S);return M<0?(++this.size,b.push([S,E])):b[M][1]=E,this}},10638:(P,Y,f)=>{var p=f(54994),g=f(9215),S=f(51501);P.exports=function E(){this.size=0,this.__data__={hash:new p,map:new(S||g),string:new p}}},11184:(P,Y,f)=>{var p=f(54537);P.exports=function g(S){var E=p(this,S).delete(S);return this.size-=E?1:0,E}},70866:(P,Y,f)=>{var p=f(54537);P.exports=function g(S){return p(this,S).get(S)}},43771:(P,Y,f)=>{var p=f(54537);P.exports=function g(S){return p(this,S).has(S)}},51772:(P,Y,f)=>{var p=f(54537);P.exports=function g(S,E){var b=p(this,S),M=b.size;return b.set(S,E),this.size+=b.size==M?0:1,this}},83205:P=>{P.exports=function Y(f){var p=-1,g=Array(f.size);return f.forEach(function(S,E){g[++p]=[E,S]}),g}},642:P=>{P.exports=function Y(f,p){return function(g){return null!=g&&g[f]===p&&(void 0!==p||f in Object(g))}}},90719:(P,Y,f)=>{var p=f(30535);P.exports=function S(E){var b=p(E,function(O){return 500===M.size&&M.clear(),O}),M=b.cache;return b}},60862:(P,Y,f)=>{var g=f(53436)(Object,"create");P.exports=g},85491:(P,Y,f)=>{var g=f(69385)(Object.keys,Object);P.exports=g},32158:P=>{P.exports=function Y(f){var p=[];if(null!=f)for(var g in Object(f))p.push(g);return p}},73597:(P,Y,f)=>{P=f.nmd(P);var p=f(79122),g=Y&&!Y.nodeType&&Y,S=g&&P&&!P.nodeType&&P,b=S&&S.exports===g&&p.process,M=function(){try{return S&&S.require&&S.require("util").types||b&&b.binding&&b.binding("util")}catch(k){}}();P.exports=M},92902:P=>{var f=Object.prototype.toString;P.exports=function p(g){return f.call(g)}},69385:P=>{P.exports=function Y(f,p){return function(g){return f(p(g))}}},53983:(P,Y,f)=>{var p=f(26999),g=Math.max;P.exports=function S(E,b,M){return b=g(void 0===b?E.length-1:b,0),function(){for(var O=arguments,k=-1,j=g(O.length-b,0),z=Array(j);++k<j;)z[k]=O[b+k];k=-1;for(var N=Array(b+1);++k<b;)N[k]=O[k];return N[b]=M(z),p(E,this,N)}}},12119:(P,Y,f)=>{var p=f(79122),g="object"==typeof self&&self&&self.Object===Object&&self,S=p||g||Function("return this")();P.exports=S},99351:P=>{P.exports=function Y(f,p){if(("constructor"!==p||"function"!=typeof f[p])&&"__proto__"!=p)return f[p]}},4600:P=>{P.exports=function f(p){return this.__data__.set(p,"__lodash_hash_undefined__"),this}},31387:P=>{P.exports=function Y(f){return this.__data__.has(f)}},24174:P=>{P.exports=function Y(f){var p=-1,g=Array(f.size);return f.forEach(function(S){g[++p]=S}),g}},72185:(P,Y,f)=>{var p=f(69510),S=f(10029)(p);P.exports=S},10029:P=>{var p=Date.now;P.exports=function g(S){var E=0,b=0;return function(){var M=p(),O=16-(M-b);if(b=M,O>0){if(++E>=800)return arguments[0]}else E=0;return S.apply(void 0,arguments)}}},13720:(P,Y,f)=>{var p=f(9215);P.exports=function g(){this.__data__=new p,this.size=0}},64410:P=>{P.exports=function Y(f){var p=this.__data__,g=p.delete(f);return this.size=p.size,g}},45576:P=>{P.exports=function Y(f){return this.__data__.get(f)}},22247:P=>{P.exports=function Y(f){return this.__data__.has(f)}},41585:(P,Y,f)=>{var p=f(9215),g=f(51501),S=f(99850);P.exports=function b(M,O){var k=this.__data__;if(k instanceof p){var j=k.__data__;if(!g||j.length<199)return j.push([M,O]),this.size=++k.size,this;k=this.__data__=new S(j)}return k.set(M,O),this.size=k.size,this}},24977:P=>{P.exports=function Y(f,p,g){for(var S=g-1,E=f.length;++S<E;)if(f[S]===p)return S;return-1}},52315:(P,Y,f)=>{var p=f(75481),g=f(77609),S=f(81149);P.exports=function E(b){return g(b)?S(b):p(b)}},32855:(P,Y,f)=>{var p=f(90719),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,E=p(function(b){var M=[];return 46===b.charCodeAt(0)&&M.push(""),b.replace(g,function(O,k,j,z){M.push(j?z.replace(S,"$1"):k||O)}),M});P.exports=E},68533:(P,Y,f)=>{var p=f(44129);P.exports=function S(E){if("string"==typeof E||p(E))return E;var b=E+"";return"0"==b&&1/E==-1/0?"-0":b}},52827:P=>{var f=Function.prototype.toString;P.exports=function p(g){if(null!=g){try{return f.call(g)}catch(S){}try{return g+""}catch(S){}}return""}},42760:P=>{var Y=/\s/;P.exports=function f(p){for(var g=p.length;g--&&Y.test(p.charAt(g)););return g}},81149:P=>{var Y="\\ud800-\\udfff",b="["+Y+"]",M="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",O="\\ud83c[\\udffb-\\udfff]",j="[^"+Y+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",N="[\\ud800-\\udbff][\\udc00-\\udfff]",re="(?:"+M+"|"+O+")?",fe="[\\ufe0e\\ufe0f]?",ue=fe+re+"(?:\\u200d(?:"+[j,z,N].join("|")+")"+fe+re+")*",ge="(?:"+[j+M+"?",M,z,N,b].join("|")+")",he=RegExp(O+"(?="+O+")|"+ge+ue,"g");P.exports=function ee(ve){for(var Ie=he.lastIndex=0;he.test(ve);)++Ie;return Ie}},11094:(P,Y,f)=>{var p=f(44462);P.exports=function S(E){return p(E,4)}},90733:(P,Y,f)=>{var p=f(44462);P.exports=function E(b){return p(b,5)}},76684:P=>{P.exports=function Y(f){return function(){return f}}},28800:(P,Y,f)=>{var p=f(23269),g=f(20217),S=f(93342),E=f(16555),b=Object.prototype,M=b.hasOwnProperty,O=p(function(k,j){k=Object(k);var z=-1,N=j.length,K=N>2?j[2]:void 0;for(K&&S(j[0],j[1],K)&&(N=1);++z<N;)for(var re=j[z],fe=E(re),i=-1,ue=fe.length;++i<ue;){var ge=fe[i],he=k[ge];(void 0===he||g(he,b[ge])&&!M.call(k,ge))&&(k[ge]=re[ge])}return k});P.exports=O},35474:(P,Y,f)=>{P.exports=f(89851)},20217:P=>{P.exports=function Y(f,p){return f===p||f!=f&&p!=p}},35281:(P,Y,f)=>{var p=f(69779),g=f(33609),S=f(96517),E=f(21503);P.exports=function b(M,O){return(E(M)?p:g)(M,S(O,3))}},62516:(P,Y,f)=>{var S=f(24653)(f(36397));P.exports=S},36397:(P,Y,f)=>{var p=f(65317),g=f(96517),S=f(44401),E=Math.max;P.exports=function b(M,O,k){var j=null==M?0:M.length;if(!j)return-1;var z=null==k?0:S(k);return z<0&&(z=E(j+z,0)),p(M,g(O,3),z)}},22274:(P,Y,f)=>{var p=f(50686);P.exports=function g(S){return null!=S&&S.length?p(S,1):[]}},89851:(P,Y,f)=>{var p=f(96837),g=f(43132),S=f(21481),E=f(21503);P.exports=function b(M,O){return(E(M)?p:g)(M,S(O))}},41176:(P,Y,f)=>{var p=f(30755),g=f(21481),S=f(16555);P.exports=function E(b,M){return null==b?b:p(b,g(M),S)}},8817:(P,Y,f)=>{var p=f(15456);P.exports=function g(S,E,b){var M=null==S?void 0:p(S,E);return void 0===M?b:M}},54842:(P,Y,f)=>{var p=f(84781),g=f(47283);P.exports=function S(E,b){return null!=E&&g(E,b,p)}},11172:(P,Y,f)=>{var p=f(69989),g=f(47283);P.exports=function S(E,b){return null!=E&&g(E,b,p)}},32608:P=>{P.exports=function Y(f){return f}},77151:(P,Y,f)=>{var p=f(60186),g=f(72671),S=Object.prototype,E=S.hasOwnProperty,b=S.propertyIsEnumerable,M=p(function(){return arguments}())?p:function(O){return g(O)&&E.call(O,"callee")&&!b.call(O,"callee")};P.exports=M},21503:P=>{P.exports=Array.isArray},56507:(P,Y,f)=>{var p=f(75946),g=f(96231);P.exports=function S(E){return null!=E&&g(E.length)&&!p(E)}},21330:(P,Y,f)=>{var p=f(56507),g=f(72671);P.exports=function S(E){return g(E)&&p(E)}},80891:(P,Y,f)=>{P=f.nmd(P);var p=f(12119),g=f(63580),S=Y&&!Y.nodeType&&Y,E=S&&P&&!P.nodeType&&P,M=E&&E.exports===S?p.Buffer:void 0;P.exports=(M?M.isBuffer:void 0)||g},71973:(P,Y,f)=>{var p=f(81172),g=f(28794),S=f(77151),E=f(21503),b=f(56507),M=f(80891),O=f(45488),k=f(48159),K=Object.prototype.hasOwnProperty;P.exports=function re(fe){if(null==fe)return!0;if(b(fe)&&(E(fe)||"string"==typeof fe||"function"==typeof fe.splice||M(fe)||k(fe)||S(fe)))return!fe.length;var i=g(fe);if("[object Map]"==i||"[object Set]"==i)return!fe.size;if(O(fe))return!p(fe).length;for(var ue in fe)if(K.call(fe,ue))return!1;return!0}},75946:(P,Y,f)=>{var p=f(93337),g=f(25940);P.exports=function O(k){if(!g(k))return!1;var j=p(k);return"[object Function]"==j||"[object GeneratorFunction]"==j||"[object AsyncFunction]"==j||"[object Proxy]"==j}},96231:P=>{P.exports=function f(p){return"number"==typeof p&&p>-1&&p%1==0&&p<=9007199254740991}},13222:(P,Y,f)=>{var p=f(97021),g=f(85647),S=f(73597),E=S&&S.isMap,b=E?g(E):p;P.exports=b},25940:P=>{P.exports=function Y(f){var p=typeof f;return null!=f&&("object"==p||"function"==p)}},72671:P=>{P.exports=function Y(f){return null!=f&&"object"==typeof f}},97614:(P,Y,f)=>{var p=f(93337),g=f(29519),S=f(72671),O=Function.prototype.toString,k=Object.prototype.hasOwnProperty,j=O.call(Object);P.exports=function z(N){if(!S(N)||"[object Object]"!=p(N))return!1;var K=g(N);if(null===K)return!0;var re=k.call(K,"constructor")&&K.constructor;return"function"==typeof re&&re instanceof re&&O.call(re)==j}},90799:(P,Y,f)=>{var p=f(771),g=f(85647),S=f(73597),E=S&&S.isSet,b=E?g(E):p;P.exports=b},30248:(P,Y,f)=>{var p=f(93337),g=f(21503),S=f(72671);P.exports=function b(M){return"string"==typeof M||!g(M)&&S(M)&&"[object String]"==p(M)}},44129:(P,Y,f)=>{var p=f(93337),g=f(72671);P.exports=function E(b){return"symbol"==typeof b||g(b)&&"[object Symbol]"==p(b)}},48159:(P,Y,f)=>{var p=f(1083),g=f(85647),S=f(73597),E=S&&S.isTypedArray,b=E?g(E):p;P.exports=b},34235:P=>{P.exports=function Y(f){return void 0===f}},118:(P,Y,f)=>{var p=f(72271),g=f(81172),S=f(56507);P.exports=function E(b){return S(b)?p(b):g(b)}},16555:(P,Y,f)=>{var p=f(72271),g=f(92809),S=f(56507);P.exports=function E(b){return S(b)?p(b,!0):g(b)}},25809:P=>{P.exports=function Y(f){var p=null==f?0:f.length;return p?f[p-1]:void 0}},17489:function(P,Y,f){var p;P=f.nmd(P),function(){var g,M="Expected a function",k="__lodash_hash_undefined__",z="__lodash_placeholder__",C=128,Mt=1/0,Yn=9007199254740991,Ne=4294967295,wn=[["ary",C],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],je="[object Arguments]",_e="[object Array]",ht="[object Boolean]",bt="[object Date]",yn="[object Error]",Vn="[object Function]",si="[object GeneratorFunction]",Kt="[object Map]",zt="[object Number]",G="[object Object]",ie="[object Promise]",We="[object RegExp]",Xe="[object Set]",gt="[object String]",kt="[object Symbol]",sn="[object WeakMap]",un="[object ArrayBuffer]",Bn="[object DataView]",Dn="[object Float32Array]",Vr="[object Float64Array]",Pn="[object Int8Array]",Hn="[object Int16Array]",Fn="[object Int32Array]",Wn="[object Uint8Array]",dr="[object Uint8ClampedArray]",Br="[object Uint16Array]",nr="[object Uint32Array]",Zn=/\b__p \+= '';/g,go=/\b(__p \+=) '' \+/g,Aa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ki=/&(?:amp|lt|gt|quot|#39);/g,Bo=/[&<>"']/g,Yr=RegExp(Ki.source),cn=RegExp(Bo.source),vo=/<%-([\s\S]+?)%>/g,ra=/<%([\s\S]+?)%>/g,mo=/<%=([\s\S]+?)%>/g,Qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,ia=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ti=/[\\^$.*+?()[\]{}|]/g,Ho=RegExp(Ti.source),yo=/^\s+/,Ln=/\s/,ui=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ji=/\{\n\/\* \[wrapped with (.+)\] \*/,Nn=/,? & /,xo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ei=/[()=,{}\[\]\/\s]/,Zi=/\\(\\)?/g,Ma=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oa=/\w*$/,li=/^[-+]0x[0-9a-f]+$/i,aa=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,bo=/^0o[0-7]+$/i,jo=/^(?:0|[1-9]\d*)$/,sa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gi=/($^)/,Pi=/['\n\r\u2028\u2029\\]/g,Ii="\\ud800-\\udfff",qi="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",me="\\u2700-\\u27bf",jn="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="A-Z\\xc0-\\xd6\\xd8-\\xde",Mi="\\ufe0e\\ufe0f",to="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oa="["+Ii+"]",ua="["+to+"]",lr="["+qi+"]",Hr="\\d+",hr="["+me+"]",zo="["+jn+"]",ki="[^"+Ii+to+Hr+me+jn+Ai+"]",Xr="\\ud83c[\\udffb-\\udfff]",_o="[^"+Ii+"]",Co="(?:\\ud83c[\\udde6-\\uddff]){2}",Er="[\\ud800-\\udbff][\\udc00-\\udfff]",mi="["+Ai+"]",Oi="(?:"+zo+"|"+ki+")",la="(?:"+mi+"|"+ki+")",Uo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",wo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Li="(?:"+lr+"|"+Xr+")?",pn="["+Mi+"]?",yi=pn+Li+"(?:\\u200d(?:"+[_o,Co,Er].join("|")+")"+pn+Li+")*",qn="(?:"+[hr,Co,Er].join("|")+")"+yi,La="(?:"+[_o+lr+"?",lr,Co,Er,Oa].join("|")+")",mr=RegExp("['\u2019]","g"),Go=RegExp(lr,"g"),Pr=RegExp(Xr+"(?="+Xr+")|"+La+yi,"g"),no=RegExp([mi+"?"+zo+"+"+Uo+"(?="+[ua,mi,"$"].join("|")+")",la+"+"+wo+"(?="+[ua,mi+Oi,"$"].join("|")+")",mi+"?"+Oi+"+"+Uo,mi+"+"+wo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hr,qn].join("|"),"g"),Ri=RegExp("[\\u200d"+Ii+qi+Mi+"]"),Di=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wo=-1,Qt={};Qt[Dn]=Qt[Vr]=Qt[Pn]=Qt[Hn]=Qt[Fn]=Qt[Wn]=Qt[dr]=Qt[Br]=Qt[nr]=!0,Qt[je]=Qt[_e]=Qt[un]=Qt[ht]=Qt[Bn]=Qt[bt]=Qt[yn]=Qt[Vn]=Qt[Kt]=Qt[zt]=Qt[G]=Qt[We]=Qt[Xe]=Qt[gt]=Qt[sn]=!1;var Sn={};Sn[je]=Sn[_e]=Sn[un]=Sn[Bn]=Sn[ht]=Sn[bt]=Sn[Dn]=Sn[Vr]=Sn[Pn]=Sn[Hn]=Sn[Fn]=Sn[Kt]=Sn[zt]=Sn[G]=Sn[We]=Sn[Xe]=Sn[gt]=Sn[kt]=Sn[Wn]=Sn[dr]=Sn[Br]=Sn[nr]=!0,Sn[yn]=Sn[Vn]=Sn[sn]=!1;var Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,pe=parseInt,Me="object"==typeof global&&global&&global.Object===Object&&global,Ce="object"==typeof self&&self&&self.Object===Object&&self,l=Me||Ce||Function("return this")(),h=Y&&!Y.nodeType&&Y,x=h&&P&&!P.nodeType&&P,w=x&&x.exports===h,R=w&&Me.process,H=function(){try{return x&&x.require&&x.require("util").types||R&&R.binding&&R.binding("util")}catch(Ge){}}(),X=H&&H.isArrayBuffer,ce=H&&H.isDate,le=H&&H.isMap,Ae=H&&H.isRegExp,Be=H&&H.isSet,Qe=H&&H.isTypedArray;function ke(xe,Ge,Ve){switch(Ve.length){case 0:return xe.call(Ge);case 1:return xe.call(Ge,Ve[0]);case 2:return xe.call(Ge,Ve[0],Ve[1]);case 3:return xe.call(Ge,Ve[0],Ve[1],Ve[2])}return xe.apply(Ge,Ve)}function Ye(xe,Ge,Ve,et){for(var St=-1,_t=null==xe?0:xe.length;++St<_t;){var Kn=xe[St];Ge(et,Kn,Ve(Kn),xe)}return et}function xt(xe,Ge){for(var Ve=-1,et=null==xe?0:xe.length;++Ve<et&&!1!==Ge(xe[Ve],Ve,xe););return xe}function Gt(xe,Ge){for(var Ve=null==xe?0:xe.length;Ve--&&!1!==Ge(xe[Ve],Ve,xe););return xe}function Pt(xe,Ge){for(var Ve=-1,et=null==xe?0:xe.length;++Ve<et;)if(!Ge(xe[Ve],Ve,xe))return!1;return!0}function In(xe,Ge){for(var Ve=-1,et=null==xe?0:xe.length,St=0,_t=[];++Ve<et;){var Kn=xe[Ve];Ge(Kn,Ve,xe)&&(_t[St++]=Kn)}return _t}function Rn(xe,Ge){return!(null==xe||!xe.length)&&zn(xe,Ge,0)>-1}function Ir(xe,Ge,Ve){for(var et=-1,St=null==xe?0:xe.length;++et<St;)if(Ve(Ge,xe[et]))return!0;return!1}function Ot(xe,Ge){for(var Ve=-1,et=null==xe?0:xe.length,St=Array(et);++Ve<et;)St[Ve]=Ge(xe[Ve],Ve,xe);return St}function It(xe,Ge){for(var Ve=-1,et=Ge.length,St=xe.length;++Ve<et;)xe[St+Ve]=Ge[Ve];return xe}function yr(xe,Ge,Ve,et){var St=-1,_t=null==xe?0:xe.length;for(et&&_t&&(Ve=xe[++St]);++St<_t;)Ve=Ge(Ve,xe[St],St,xe);return Ve}function _n(xe,Ge,Ve,et){var St=null==xe?0:xe.length;for(et&&St&&(Ve=xe[--St]);St--;)Ve=Ge(Ve,xe[St],St,xe);return Ve}function Fe(xe,Ge){for(var Ve=-1,et=null==xe?0:xe.length;++Ve<et;)if(Ge(xe[Ve],Ve,xe))return!0;return!1}var xr=Ra("length");function di(xe,Ge,Ve){var et;return Ve(xe,function(St,_t,Kn){if(Ge(St,_t,Kn))return et=_t,!1}),et}function zr(xe,Ge,Ve,et){for(var St=xe.length,_t=Ve+(et?1:-1);et?_t--:++_t<St;)if(Ge(xe[_t],_t,xe))return _t;return-1}function zn(xe,Ge,Ve){return Ge==Ge?function Yl(xe,Ge,Ve){for(var et=Ve-1,St=xe.length;++et<St;)if(xe[et]===Ge)return et;return-1}(xe,Ge,Ve):zr(xe,Lr,Ve)}function Fi(xe,Ge,Ve,et){for(var St=Ve-1,_t=xe.length;++St<_t;)if(et(xe[St],Ge))return St;return-1}function Lr(xe){return xe!=xe}function bi(xe,Ge){var Ve=null==xe?0:xe.length;return Ve?Un(xe,Ge)/Ve:NaN}function Ra(xe){return function(Ge){return null==Ge?g:Ge[xe]}}function Vi(xe){return function(Ge){return null==xe?g:xe[Ge]}}function ro(xe,Ge,Ve,et,St){return St(xe,function(_t,Kn,An){Ve=et?(et=!1,_t):Ge(Ve,_t,Kn,An)}),Ve}function Un(xe,Ge){for(var Ve,et=-1,St=xe.length;++et<St;){var _t=Ge(xe[et]);_t!==g&&(Ve=Ve===g?_t:Ve+_t)}return Ve}function $o(xe,Ge){for(var Ve=-1,et=Array(xe);++Ve<xe;)et[Ve]=Ge(Ve);return et}function ku(xe){return xe&&xe.slice(0,Et(xe)+1).replace(yo,"")}function kn(xe){return function(Ge){return xe(Ge)}}function ys(xe,Ge){return Ot(Ge,function(Ve){return xe[Ve]})}function Yo(xe,Ge){return xe.has(Ge)}function Ou(xe,Ge){for(var Ve=-1,et=xe.length;++Ve<et&&zn(Ge,xe[Ve],0)>-1;);return Ve}function Ws(xe,Ge){for(var Ve=xe.length;Ve--&&zn(Ge,xe[Ve],0)>-1;);return Ve}function Gl(xe,Ge){for(var Ve=xe.length,et=0;Ve--;)xe[Ve]===Ge&&++et;return et}var Da=Vi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Wl=Vi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $l(xe){return"\\"+Q[xe]}function Bi(xe){return Ri.test(xe)}function Qr(xe){var Ge=-1,Ve=Array(xe.size);return xe.forEach(function(et,St){Ve[++Ge]=[St,et]}),Ve}function _i(xe,Ge){return function(Ve){return xe(Ge(Ve))}}function io(xe,Ge){for(var Ve=-1,et=xe.length,St=0,_t=[];++Ve<et;){var Kn=xe[Ve];(Kn===Ge||Kn===z)&&(xe[Ve]=z,_t[St++]=Ve)}return _t}function rr(xe){var Ge=-1,Ve=Array(xe.size);return xe.forEach(function(et){Ve[++Ge]=et}),Ve}function oo(xe){return Bi(xe)?function Fa(xe){for(var Ge=Pr.lastIndex=0;Pr.test(xe);)++Ge;return Ge}(xe):xr(xe)}function er(xe){return Bi(xe)?function hi(xe){return xe.match(Pr)||[]}(xe):function Or(xe){return xe.split("")}(xe)}function Et(xe){for(var Ge=xe.length;Ge--&&Ln.test(xe.charAt(Ge)););return Ge}var Nr=Vi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ir=function xe(Ge){var o,Ve=(Ge=null==Ge?l:ir.defaults(l.Object(),Ge,ir.pick(l,Na))).Array,et=Ge.Date,St=Ge.Error,_t=Ge.Function,Kn=Ge.Math,An=Ge.Object,Va=Ge.RegExp,Ru=Ge.String,Z=Ge.TypeError,de=Ve.prototype,$e=An.prototype,Ee=Ge["__core-js_shared__"],ze=_t.prototype.toString,Ue=$e.hasOwnProperty,ct=0,mt=(o=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",Ct=$e.toString,Nt=ze.call(An),Ft=l._,Lt=Va("^"+ze.call(Ue).replace(Ti,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),En=w?Ge.Buffer:g,ft=Ge.Symbol,gn=Ge.Uint8Array,xn=En?En.allocUnsafe:g,Qn=_i(An.getPrototypeOf,An),rn=An.create,To=$e.propertyIsEnumerable,br=de.splice,Rr=ft?ft.isConcatSpreadable:g,Ba=ft?ft.iterator:g,da=ft?ft.toStringTag:g,bs=function(){try{var o=_a(An,"defineProperty");return o({},"",{}),o}catch(s){}}(),Xl=Ge.clearTimeout!==l.clearTimeout&&Ge.clearTimeout,Nf=et&&et.now!==l.Date.now&&et.now,Rf=Ge.setTimeout!==l.setTimeout&&Ge.setTimeout,Ha=Kn.ceil,_s=Kn.floor,Ys=An.getOwnPropertySymbols,Du=En?En.isBuffer:g,Eo=Ge.isFinite,Xs=de.join,Kl=_i(An.keys,An),cr=Kn.max,Ar=Kn.min,Ql=et.now,Ks=Ge.parseInt,Fu=Kn.random,ja=de.reverse,ha=_a(Ge,"DataView"),pa=_a(Ge,"Map"),Qs=_a(Ge,"Promise"),Jt=_a(Ge,"Set"),za=_a(Ge,"WeakMap"),Jr=_a(An,"create"),Po=za&&new za,ga={},Cs=Ca(ha),Jl=Ca(pa),Vu=Ca(Qs),Df=Ca(Jt),Ff=Ca(za),Js=ft?ft.prototype:g,ws=Js?Js.valueOf:g,Zl=Js?Js.toString:g;function J(o){if(Jn(o)&&!tn(o)&&!(o instanceof en)){if(o instanceof Ci)return o;if(Ue.call(o,"__wrapped__"))return zc(o)}return new Ci(o)}var Ua=function(){function o(){}return function(s){if(!$n(s))return{};if(rn)return rn(s);o.prototype=s;var d=new o;return o.prototype=g,d}}();function Zs(){}function Ci(o,s){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=g}function en(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ne,this.__views__=[]}function Ko(o){var s=-1,d=null==o?0:o.length;for(this.clear();++s<d;){var m=o[s];this.set(m[0],m[1])}}function Io(o){var s=-1,d=null==o?0:o.length;for(this.clear();++s<d;){var m=o[s];this.set(m[0],m[1])}}function ao(o){var s=-1,d=null==o?0:o.length;for(this.clear();++s<d;){var m=o[s];this.set(m[0],m[1])}}function va(o){var s=-1,d=null==o?0:o.length;for(this.__data__=new ao;++s<d;)this.add(o[s])}function Hi(o){var s=this.__data__=new Io(o);this.size=s.size}function Zf(o,s){var d=tn(o),m=!d&&Ea(o),I=!d&&!m&&Ro(o),F=!d&&!m&&!I&&fs(o),q=d||m||I||F,te=q?$o(o.length,Ru):[],ae=te.length;for(var Se in o)(s||Ue.call(o,Se))&&(!q||!("length"==Se||I&&("offset"==Se||"parent"==Se)||F&&("buffer"==Se||"byteLength"==Se||"byteOffset"==Se)||co(Se,ae)))&&te.push(Se);return te}function qf(o){var s=o.length;return s?o[As(0,s-1)]:g}function pg(o,s){return bu(ti(o),ma(s,0,o.length))}function gg(o){return bu(ti(o))}function nc(o,s,d){(d!==g&&!Yi(o[s],d)||d===g&&!(s in o))&&Mo(o,s,d)}function qs(o,s,d){var m=o[s];(!Ue.call(o,s)||!Yi(m,d)||d===g&&!(s in o))&&Mo(o,s,d)}function Ga(o,s){for(var d=o.length;d--;)if(Yi(o[d][0],s))return d;return-1}function vg(o,s,d,m){return so(o,function(I,F,q){s(m,I,d(I),q)}),m}function rc(o,s){return o&&lo(s,Cr(s),o)}function Mo(o,s,d){"__proto__"==s&&bs?bs(o,s,{configurable:!0,enumerable:!0,value:d,writable:!0}):o[s]=d}function ic(o,s){for(var d=-1,m=s.length,I=Ve(m),F=null==o;++d<m;)I[d]=F?g:hs(o,s[d]);return I}function ma(o,s,d){return o==o&&(d!==g&&(o=o<=d?o:d),s!==g&&(o=o>=s?o:s)),o}function ji(o,s,d,m,I,F){var q,te=1&s,ae=2&s,Se=4&s;if(d&&(q=I?d(o,m,I,F):d(o)),q!==g)return q;if(!$n(o))return o;var Te=tn(o);if(Te){if(q=function rs(o){var s=o.length,d=new o.constructor(s);return s&&"string"==typeof o[0]&&Ue.call(o,"index")&&(d.index=o.index,d.input=o.input),d}(o),!te)return ti(o,q)}else{var Oe=Fr(o),qe=Oe==Vn||Oe==si;if(Ro(o))return nl(o,te);if(Oe==G||Oe==je||qe&&!I){if(q=ae||qe?{}:cl(o),!te)return ae?function ks(o,s){return lo(o,Nc(o),s)}(o,function ed(o,s){return o&&lo(s,ii(s),o)}(q,o)):function Wt(o,s){return lo(o,ll(o),s)}(o,rc(q,o))}else{if(!Sn[Oe])return I?o:{};q=function xd(o,s,d){var m=o.constructor;switch(s){case un:return cu(o);case ht:case bt:return new m(+o);case Bn:return function xc(o,s){var d=s?cu(o.buffer):o.buffer;return new o.constructor(d,o.byteOffset,o.byteLength)}(o,d);case Dn:case Vr:case Pn:case Hn:case Fn:case Wn:case dr:case Br:case nr:return Cc(o,d);case Kt:return new m;case zt:case gt:return new m(o);case We:return function bc(o){var s=new o.constructor(o.source,oa.exec(o));return s.lastIndex=o.lastIndex,s}(o);case Xe:return new m;case kt:return function _c(o){return ws?An(ws.call(o)):{}}(o)}}(o,Oe,te)}}F||(F=new Hi);var ot=F.get(o);if(ot)return ot;F.set(o,q),ff(o)?o.forEach(function(nt){q.add(ji(nt,s,d,nt,o,F))}):uf(o)&&o.forEach(function(nt,ut){q.set(ut,ji(nt,s,d,ut,o,F))});var rt=Te?g:(Se?ae?al:zi:ae?ii:Cr)(o);return xt(rt||o,function(nt,ut){rt&&(nt=o[ut=nt]),qs(q,ut,ji(nt,s,d,ut,o,F))}),q}function Qo(o,s,d){var m=d.length;if(null==o)return!m;for(o=An(o);m--;){var I=d[m],q=o[I];if(q===g&&!(I in o)||!(0,s[I])(q))return!1}return!0}function ya(o,s,d){if("function"!=typeof o)throw new Z(M);return Vs(function(){o.apply(g,d)},s)}function Wa(o,s,d,m){var I=-1,F=Rn,q=!0,te=o.length,ae=[],Se=s.length;if(!te)return ae;d&&(s=Ot(s,kn(d))),m?(F=Ir,q=!1):s.length>=200&&(F=Yo,q=!1,s=new va(s));e:for(;++I<te;){var Te=o[I],Oe=null==d?Te:d(Te);if(Te=m||0!==Te?Te:0,q&&Oe==Oe){for(var qe=Se;qe--;)if(s[qe]===Oe)continue e;ae.push(Te)}else F(s,Oe,m)||ae.push(Te)}return ae}J.templateSettings={escape:vo,evaluate:ra,interpolate:mo,variable:"",imports:{_:J}},(J.prototype=Zs.prototype).constructor=J,(Ci.prototype=Ua(Zs.prototype)).constructor=Ci,(en.prototype=Ua(Zs.prototype)).constructor=en,Ko.prototype.clear=function Vf(){this.__data__=Jr?Jr(null):{},this.size=0},Ko.prototype.delete=function Bf(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s},Ko.prototype.get=function Hf(o){var s=this.__data__;if(Jr){var d=s[o];return d===k?g:d}return Ue.call(s,o)?s[o]:g},Ko.prototype.has=function jf(o){var s=this.__data__;return Jr?s[o]!==g:Ue.call(s,o)},Ko.prototype.set=function zf(o,s){var d=this.__data__;return this.size+=this.has(o)?0:1,d[o]=Jr&&s===g?k:s,this},Io.prototype.clear=function Uf(){this.__data__=[],this.size=0},Io.prototype.delete=function Gf(o){var s=this.__data__,d=Ga(s,o);return!(d<0||(d==s.length-1?s.pop():br.call(s,d,1),--this.size,0))},Io.prototype.get=function Wf(o){var s=this.__data__,d=Ga(s,o);return d<0?g:s[d][1]},Io.prototype.has=function $f(o){return Ga(this.__data__,o)>-1},Io.prototype.set=function Yf(o,s){var d=this.__data__,m=Ga(d,o);return m<0?(++this.size,d.push([o,s])):d[m][1]=s,this},ao.prototype.clear=function Xf(){this.size=0,this.__data__={hash:new Ko,map:new(pa||Io),string:new Ko}},ao.prototype.delete=function Kf(o){var s=yu(this,o).delete(o);return this.size-=s?1:0,s},ao.prototype.get=function Ur(o){return yu(this,o).get(o)},ao.prototype.has=function Qf(o){return yu(this,o).has(o)},ao.prototype.set=function Bu(o,s){var d=yu(this,o),m=d.size;return d.set(o,s),this.size+=d.size==m?0:1,this},va.prototype.add=va.prototype.push=function Ao(o){return this.__data__.set(o,k),this},va.prototype.has=function Ss(o){return this.__data__.has(o)},Hi.prototype.clear=function cg(){this.__data__=new Io,this.size=0},Hi.prototype.delete=function fg(o){var s=this.__data__,d=s.delete(o);return this.size=s.size,d},Hi.prototype.get=function Jf(o){return this.__data__.get(o)},Hi.prototype.has=function dg(o){return this.__data__.has(o)},Hi.prototype.set=function hg(o,s){var d=this.__data__;if(d instanceof Io){var m=d.__data__;if(!pa||m.length<199)return m.push([o,s]),this.size=++d.size,this;d=this.__data__=new ao(m)}return d.set(o,s),this.size=d.size,this};var so=Sc(uo),ko=Sc(Ya,!0);function $a(o,s){var d=!0;return so(o,function(m,I,F){return d=!!s(m,I,F)}),d}function hn(o,s,d){for(var m=-1,I=o.length;++m<I;){var F=o[m],q=s(F);if(null!=q&&(te===g?q==q&&!kr(q):d(q,te)))var te=q,ae=F}return ae}function Ts(o,s){var d=[];return so(o,function(m,I,F){s(m,I,F)&&d.push(m)}),d}function Mr(o,s,d,m,I){var F=-1,q=o.length;for(d||(d=fl),I||(I=[]);++F<q;){var te=o[F];s>0&&d(te)?s>1?Mr(te,s-1,d,m,I):It(I,te):m||(I[I.length]=te)}return I}var Hu=il(),oc=il(!0);function uo(o,s){return o&&Hu(o,s,Cr)}function Ya(o,s){return o&&oc(o,s,Cr)}function Xa(o,s){return In(s,function(d){return Xi(o[d])})}function or(o,s){for(var d=0,m=(s=Zo(s,o)).length;null!=o&&d<m;)o=o[fo(s[d++])];return d&&d==m?o:g}function Es(o,s,d){var m=s(o);return tn(o)?m:It(m,d(o))}function _r(o){return null==o?o===g?"[object Undefined]":"[object Null]":da&&da in An(o)?function vd(o){var s=Ue.call(o,da),d=o[da];try{o[da]=g;var m=!0}catch(F){}var I=Ct.call(o);return m&&(s?o[da]=d:delete o[da]),I}(o):function Rs(o){return Ct.call(o)}(o)}function eu(o,s){return o>s}function ac(o,s){return null!=o&&Ue.call(o,s)}function td(o,s){return null!=o&&s in An(o)}function tu(o,s,d){for(var m=d?Ir:Rn,I=o[0].length,F=o.length,q=F,te=Ve(F),ae=1/0,Se=[];q--;){var Te=o[q];q&&s&&(Te=Ot(Te,kn(s))),ae=Ar(Te.length,ae),te[q]=!d&&(s||I>=120&&Te.length>=120)?new va(q&&Te):g}Te=o[0];var Oe=-1,qe=te[0];e:for(;++Oe<I&&Se.length<ae;){var ot=Te[Oe],pt=s?s(ot):ot;if(ot=d||0!==ot?ot:0,!(qe?Yo(qe,pt):m(Se,pt,d))){for(q=F;--q;){var rt=te[q];if(!(rt?Yo(rt,pt):m(o[q],pt,d)))continue e}qe&&qe.push(pt),Se.push(ot)}}return Se}function Ps(o,s,d){var m=null==(o=os(o,s=Zo(s,o)))?o:o[fo(pr(s))];return null==m?g:ke(m,o,d)}function sc(o){return Jn(o)&&_r(o)==je}function Ka(o,s,d,m,I){return o===s||(null==o||null==s||!Jn(o)&&!Jn(s)?o!=o&&s!=s:function Uu(o,s,d,m,I,F){var q=tn(o),te=tn(s),ae=q?_e:Fr(o),Se=te?_e:Fr(s),Te=(ae=ae==je?G:ae)==G,Oe=(Se=Se==je?G:Se)==G,qe=ae==Se;if(qe&&Ro(o)){if(!Ro(s))return!1;q=!0,Te=!1}if(qe&&!Te)return F||(F=new Hi),q||fs(o)?Lc(o,s,d,m,I,F):function pd(o,s,d,m,I,F,q){switch(d){case Bn:if(o.byteLength!=s.byteLength||o.byteOffset!=s.byteOffset)return!1;o=o.buffer,s=s.buffer;case un:return!(o.byteLength!=s.byteLength||!F(new gn(o),new gn(s)));case ht:case bt:case zt:return Yi(+o,+s);case yn:return o.name==s.name&&o.message==s.message;case We:case gt:return o==s+"";case Kt:var te=Qr;case Xe:if(te||(te=rr),o.size!=s.size&&!(1&m))return!1;var Se=q.get(o);if(Se)return Se==s;m|=2,q.set(o,s);var Te=Lc(te(o),te(s),m,I,F,q);return q.delete(o),Te;case kt:if(ws)return ws.call(o)==ws.call(s)}return!1}(o,s,ae,d,m,I,F);if(!(1&d)){var ot=Te&&Ue.call(o,"__wrapped__"),pt=Oe&&Ue.call(s,"__wrapped__");if(ot||pt){var rt=ot?o.value():o,nt=pt?s.value():s;return F||(F=new Hi),I(rt,nt,d,m,F)}}return!!qe&&(F||(F=new Hi),function gd(o,s,d,m,I,F){var q=1&d,te=zi(o),ae=te.length;if(ae!=zi(s).length&&!q)return!1;for(var Oe=ae;Oe--;){var qe=te[Oe];if(!(q?qe in s:Ue.call(s,qe)))return!1}var ot=F.get(o),pt=F.get(s);if(ot&&pt)return ot==s&&pt==o;var rt=!0;F.set(o,s),F.set(s,o);for(var nt=q;++Oe<ae;){var ut=o[qe=te[Oe]],lt=s[qe];if(m)var Ht=q?m(lt,ut,qe,s,o,F):m(ut,lt,qe,o,s,F);if(!(Ht===g?ut===lt||I(ut,lt,d,m,F):Ht)){rt=!1;break}nt||(nt="constructor"==qe)}if(rt&&!nt){var Xt=o.constructor,on=s.constructor;Xt!=on&&"constructor"in o&&"constructor"in s&&!("function"==typeof Xt&&Xt instanceof Xt&&"function"==typeof on&&on instanceof on)&&(rt=!1)}return F.delete(o),F.delete(s),rt}(o,s,d,m,I,F))}(o,s,d,m,Ka,I))}function ru(o,s,d,m){var I=d.length,F=I,q=!m;if(null==o)return!F;for(o=An(o);I--;){var te=d[I];if(q&&te[2]?te[1]!==o[te[0]]:!(te[0]in o))return!1}for(;++I<F;){var ae=(te=d[I])[0],Se=o[ae],Te=te[1];if(q&&te[2]){if(Se===g&&!(ae in o))return!1}else{var Oe=new Hi;if(m)var qe=m(Se,Te,ae,o,s,Oe);if(!(qe===g?Ka(Te,Se,3,m,Oe):qe))return!1}}return!0}function Gu(o){return!(!$n(o)||function _d(o){return!!mt&&mt in o}(o))&&(Xi(o)?Lt:$t).test(Ca(o))}function lc(o){return"function"==typeof o?o:null==o?oi:"object"==typeof o?tn(o)?Qa(o[0],o[1]):cc(o):Lf(o)}function iu(o){if(!Ns(o))return Kl(o);var s=[];for(var d in An(o))Ue.call(o,d)&&"constructor"!=d&&s.push(d);return s}function $u(o,s){return o<s}function Yu(o,s){var d=-1,m=ri(o)?Ve(o.length):[];return so(o,function(I,F,q){m[++d]=s(I,F,q)}),m}function cc(o){var s=ul(o);return 1==s.length&&s[0][2]?hl(s[0][0],s[0][1]):function(d){return d===o||ru(d,o,s)}}function Qa(o,s){return dl(o)&&Dc(s)?hl(fo(o),s):function(d){var m=hs(d,o);return m===g&&m===s?Gs(d,o):Ka(s,m,3)}}function ba(o,s,d,m,I){o!==s&&Hu(s,function(F,q){if(I||(I=new Hi),$n(F))!function Is(o,s,d,m,I,F,q){var te=pl(o,d),ae=pl(s,d),Se=q.get(ae);if(Se)nc(o,d,Se);else{var Te=F?F(te,ae,d+"",o,s,q):g,Oe=Te===g;if(Oe){var qe=tn(ae),ot=!qe&&Ro(ae),pt=!qe&&!ot&&fs(ae);Te=ae,qe||ot||pt?tn(te)?Te=te:ur(te)?Te=ti(te):ot?(Oe=!1,Te=nl(ae,!0)):pt?(Oe=!1,Te=Cc(ae,!0)):Te=[]:Us(ae)||Ea(ae)?(Te=te,Ea(te)?Te=Vo(te):(!$n(te)||Xi(te))&&(Te=cl(ae))):Oe=!1}Oe&&(q.set(ae,Te),I(Te,ae,m,F,q),q.delete(ae)),nc(o,d,Te)}}(o,s,q,d,ba,m,I);else{var te=m?m(pl(o,q),F,q+"",o,s,I):g;te===g&&(te=F),nc(o,q,te)}},ii)}function ou(o,s){var d=o.length;if(d)return co(s+=s<0?d:0,d)?o[s]:g}function fc(o,s,d){s=s.length?Ot(s,function(F){return tn(F)?function(q){return or(q,1===F.length?F[0]:F)}:F}):[oi];var m=-1;return s=Ot(s,kn(Bt())),function Tn(xe,Ge){var Ve=xe.length;for(xe.sort(Ge);Ve--;)xe[Ve]=xe[Ve].value;return xe}(Yu(o,function(F,q,te){return{criteria:Ot(s,function(Se){return Se(F)}),index:++m,value:F}}),function(F,q){return function cd(o,s,d){for(var m=-1,I=o.criteria,F=s.criteria,q=I.length,te=d.length;++m<q;){var ae=wc(I[m],F[m]);if(ae)return m>=te?ae:ae*("desc"==d[m]?-1:1)}return o.index-s.index}(F,q,d)})}function Xu(o,s,d){for(var m=-1,I=s.length,F={};++m<I;){var q=s[m],te=or(o,q);d(te,q)&&Ja(F,Zo(q,o),te)}return F}function Ku(o,s,d,m){var I=m?Fi:zn,F=-1,q=s.length,te=o;for(o===s&&(s=ti(s)),d&&(te=Ot(o,kn(d)));++F<q;)for(var ae=0,Se=s[F],Te=d?d(Se):Se;(ae=I(te,Te,ae,m))>-1;)te!==o&&br.call(te,ae,1),br.call(o,ae,1);return o}function hc(o,s){for(var d=o?s.length:0,m=d-1;d--;){var I=s[d];if(d==m||I!==F){var F=I;co(I)?br.call(o,I,1):qu(o,I)}}return o}function As(o,s){return o+_s(Fu()*(s-o+1))}function Qu(o,s){var d="";if(!o||s<1||s>Yn)return d;do{s%2&&(d+=o),(s=_s(s/2))&&(o+=o)}while(s);return d}function fn(o,s){return gl(Ds(o,s,oi),o+"")}function pc(o){return qf(ps(o))}function sd(o,s){var d=ps(o);return bu(d,ma(s,0,d.length))}function Ja(o,s,d,m){if(!$n(o))return o;for(var I=-1,F=(s=Zo(s,o)).length,q=F-1,te=o;null!=te&&++I<F;){var ae=fo(s[I]),Se=d;if("__proto__"===ae||"constructor"===ae||"prototype"===ae)return o;if(I!=q){var Te=te[ae];(Se=m?m(Te,ae,te):g)===g&&(Se=$n(Te)?Te:co(s[I+1])?[]:{})}qs(te,ae,Se),te=te[ae]}return o}var gc=Po?function(o,s){return Po.set(o,s),o}:oi,au=bs?function(o,s){return bs(o,"toString",{configurable:!0,enumerable:!1,value:gr(s),writable:!0})}:oi;function su(o){return bu(ps(o))}function Zr(o,s,d){var m=-1,I=o.length;s<0&&(s=-s>I?0:I+s),(d=d>I?I:d)<0&&(d+=I),I=s>d?0:d-s>>>0,s>>>=0;for(var F=Ve(I);++m<I;)F[m]=o[m+s];return F}function ud(o,s){var d;return so(o,function(m,I,F){return!(d=s(m,I,F))}),!!d}function uu(o,s,d){var m=0,I=null==o?m:o.length;if("number"==typeof s&&s==s&&I<=2147483647){for(;m<I;){var F=m+I>>>1,q=o[F];null!==q&&!kr(q)&&(d?q<=s:q<s)?m=F+1:I=F}return I}return Ju(o,s,oi,d)}function Ju(o,s,d,m){var I=0,F=null==o?0:o.length;if(0===F)return 0;for(var q=(s=d(s))!=s,te=null===s,ae=kr(s),Se=s===g;I<F;){var Te=_s((I+F)/2),Oe=d(o[Te]),qe=Oe!==g,ot=null===Oe,pt=Oe==Oe,rt=kr(Oe);if(q)var nt=m||pt;else nt=Se?pt&&(m||qe):te?pt&&qe&&(m||!ot):ae?pt&&qe&&!ot&&(m||!rt):!ot&&!rt&&(m?Oe<=s:Oe<s);nt?I=Te+1:F=Te}return Ar(F,4294967294)}function Zu(o,s){for(var d=-1,m=o.length,I=0,F=[];++d<m;){var q=o[d],te=s?s(q):q;if(!d||!Yi(te,ae)){var ae=te;F[I++]=0===q?0:q}}return F}function vc(o){return"number"==typeof o?o:kr(o)?NaN:+o}function qr(o){if("string"==typeof o)return o;if(tn(o))return Ot(o,qr)+"";if(kr(o))return Zl?Zl.call(o):"";var s=o+"";return"0"==s&&1/o==-Mt?"-0":s}function Jo(o,s,d){var m=-1,I=Rn,F=o.length,q=!0,te=[],ae=te;if(d)q=!1,I=Ir;else if(F>=200){var Se=s?null:kc(o);if(Se)return rr(Se);q=!1,I=Yo,ae=new va}else ae=s?[]:te;e:for(;++m<F;){var Te=o[m],Oe=s?s(Te):Te;if(Te=d||0!==Te?Te:0,q&&Oe==Oe){for(var qe=ae.length;qe--;)if(ae[qe]===Oe)continue e;s&&ae.push(Oe),te.push(Te)}else I(ae,Oe,d)||(ae!==te&&ae.push(Oe),te.push(Te))}return te}function qu(o,s){return null==(o=os(o,s=Zo(s,o)))||delete o[fo(pr(s))]}function mc(o,s,d,m){return Ja(o,s,d(or(o,s)),m)}function lu(o,s,d,m){for(var I=o.length,F=m?I:-1;(m?F--:++F<I)&&s(o[F],F,o););return d?Zr(o,m?0:F,m?F+1:I):Zr(o,m?F+1:0,m?I:F)}function yc(o,s){var d=o;return d instanceof en&&(d=d.value()),yr(s,function(m,I){return I.func.apply(I.thisArg,It([m],I.args))},d)}function ei(o,s,d){var m=o.length;if(m<2)return m?Jo(o[0]):[];for(var I=-1,F=Ve(m);++I<m;)for(var q=o[I],te=-1;++te<m;)te!=I&&(F[I]=Wa(F[I]||q,o[te],s,d));return Jo(Mr(F,1),s,d)}function Dr(o,s,d){for(var m=-1,I=o.length,F=s.length,q={};++m<I;)d(q,o[m],m<F?s[m]:g);return q}function Ms(o){return ur(o)?o:[]}function el(o){return"function"==typeof o?o:oi}function Zo(o,s){return tn(o)?o:dl(o,s)?[o]:jc(Mn(o))}var ld=fn;function qo(o,s,d){var m=o.length;return d=d===g?m:d,!s&&d>=m?o:Zr(o,s,d)}var tl=Xl||function(o){return l.clearTimeout(o)};function nl(o,s){if(s)return o.slice();var d=o.length,m=xn?xn(d):new o.constructor(d);return o.copy(m),m}function cu(o){var s=new o.constructor(o.byteLength);return new gn(s).set(new gn(o)),s}function Cc(o,s){var d=s?cu(o.buffer):o.buffer;return new o.constructor(d,o.byteOffset,o.length)}function wc(o,s){if(o!==s){var d=o!==g,m=null===o,I=o==o,F=kr(o),q=s!==g,te=null===s,ae=s==s,Se=kr(s);if(!te&&!Se&&!F&&o>s||F&&q&&ae&&!te&&!Se||m&&q&&ae||!d&&ae||!I)return 1;if(!m&&!F&&!Se&&o<s||Se&&d&&I&&!m&&!F||te&&d&&I||!q&&I||!ae)return-1}return 0}function fu(o,s,d,m){for(var I=-1,F=o.length,q=d.length,te=-1,ae=s.length,Se=cr(F-q,0),Te=Ve(ae+Se),Oe=!m;++te<ae;)Te[te]=s[te];for(;++I<q;)(Oe||I<F)&&(Te[d[I]]=o[I]);for(;Se--;)Te[te++]=o[I++];return Te}function rl(o,s,d,m){for(var I=-1,F=o.length,q=-1,te=d.length,ae=-1,Se=s.length,Te=cr(F-te,0),Oe=Ve(Te+Se),qe=!m;++I<Te;)Oe[I]=o[I];for(var ot=I;++ae<Se;)Oe[ot+ae]=s[ae];for(;++q<te;)(qe||I<F)&&(Oe[ot+d[q]]=o[I++]);return Oe}function ti(o,s){var d=-1,m=o.length;for(s||(s=Ve(m));++d<m;)s[d]=o[d];return s}function lo(o,s,d,m){var I=!d;d||(d={});for(var F=-1,q=s.length;++F<q;){var te=s[F],ae=m?m(d[te],o[te],te,d,o):g;ae===g&&(ae=o[te]),I?Mo(d,te,ae):qs(d,te,ae)}return d}function ni(o,s){return function(d,m){var I=tn(d)?Ye:vg,F=s?s():{};return I(d,o,Bt(m,2),F)}}function Za(o){return fn(function(s,d){var m=-1,I=d.length,F=I>1?d[I-1]:g,q=I>2?d[2]:g;for(F=o.length>3&&"function"==typeof F?(I--,F):g,q&&Gr(d[0],d[1],q)&&(F=I<3?g:F,I=1),s=An(s);++m<I;){var te=d[m];te&&o(s,te,m,F)}return s})}function Sc(o,s){return function(d,m){if(null==d)return d;if(!ri(d))return o(d,m);for(var I=d.length,F=s?I:-1,q=An(d);(s?F--:++F<I)&&!1!==m(q[F],F,q););return d}}function il(o){return function(s,d,m){for(var I=-1,F=An(s),q=m(s),te=q.length;te--;){var ae=q[o?te:++I];if(!1===d(F[ae],ae,F))break}return s}}function Tc(o){return function(s){var d=Bi(s=Mn(s))?er(s):g,m=d?d[0]:s.charAt(0),I=d?qo(d,1).join(""):s.slice(1);return m[o]()+I}}function qa(o){return function(s){return yr(Mf(Ef(s).replace(mr,"")),o,"")}}function es(o){return function(){var s=arguments;switch(s.length){case 0:return new o;case 1:return new o(s[0]);case 2:return new o(s[0],s[1]);case 3:return new o(s[0],s[1],s[2]);case 4:return new o(s[0],s[1],s[2],s[3]);case 5:return new o(s[0],s[1],s[2],s[3],s[4]);case 6:return new o(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new o(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var d=Ua(o.prototype),m=o.apply(d,s);return $n(m)?m:d}}function Ec(o){return function(s,d,m){var I=An(s);if(!ri(s)){var F=Bt(d,3);s=Cr(s),d=function(te){return F(I[te],te,I)}}var q=o(s,d,m);return q>-1?I[F?s[q]:q]:g}}function Pc(o){return Lo(function(s){var d=s.length,m=d,I=Ci.prototype.thru;for(o&&s.reverse();m--;){var F=s[m];if("function"!=typeof F)throw new Z(M);if(I&&!q&&"wrapper"==mu(F))var q=new Ci([],!0)}for(m=q?m:d;++m<d;){var te=mu(F=s[m]),ae="wrapper"==te?sl(F):g;q=ae&&Ls(ae[0])&&424==ae[1]&&!ae[4].length&&1==ae[9]?q[mu(ae[0])].apply(q,ae[3]):1==F.length&&Ls(F)?q[te]():q.thru(F)}return function(){var Se=arguments,Te=Se[0];if(q&&1==Se.length&&tn(Te))return q.plant(Te).value();for(var Oe=0,qe=d?s[Oe].apply(this,Se):Te;++Oe<d;)qe=s[Oe].call(this,qe);return qe}})}function du(o,s,d,m,I,F,q,te,ae,Se){var Te=s&C,Oe=1&s,qe=2&s,ot=24&s,pt=512&s,rt=qe?g:es(o);return function nt(){for(var ut=arguments.length,lt=Ve(ut),Ht=ut;Ht--;)lt[Ht]=arguments[Ht];if(ot)var Xt=ns(nt),on=Gl(lt,Xt);if(m&&(lt=fu(lt,m,I,ot)),F&&(lt=rl(lt,F,q,ot)),ut-=on,ot&&ut<Se){var At=io(lt,Xt);return Mc(o,s,du,nt.placeholder,d,lt,At,te,ae,Se-ut)}var Cn=Oe?d:this,Zt=qe?Cn[o]:o;return ut=lt.length,te?lt=Fs(lt,te):pt&&ut>1&&lt.reverse(),Te&&ae<ut&&(lt.length=ae),this&&this!==l&&this instanceof nt&&(Zt=rt||es(Zt)),Zt.apply(Cn,lt)}}function Ic(o,s){return function(d,m){return function nu(o,s,d,m){return uo(o,function(I,F,q){s(m,d(I),F,q)}),m}(d,o,s(m),{})}}function ea(o,s){return function(d,m){var I;if(d===g&&m===g)return s;if(d!==g&&(I=d),m!==g){if(I===g)return m;"string"==typeof d||"string"==typeof m?(d=qr(d),m=qr(m)):(d=vc(d),m=vc(m)),I=o(d,m)}return I}}function hu(o){return Lo(function(s){return s=Ot(s,kn(Bt())),fn(function(d){var m=this;return o(s,function(I){return ke(I,m,d)})})})}function pu(o,s){var d=(s=s===g?" ":qr(s)).length;if(d<2)return d?Qu(s,o):s;var m=Qu(s,Ha(o/oo(s)));return Bi(s)?qo(er(m),0,o).join(""):m.slice(0,o)}function Os(o){return function(s,d,m){return m&&"number"!=typeof m&&Gr(s,d,m)&&(d=m=g),s=Fo(s),d===g?(d=s,s=0):d=Fo(d),function ad(o,s,d,m){for(var I=-1,F=cr(Ha((s-o)/(d||1)),0),q=Ve(F);F--;)q[m?F:++I]=o,o+=d;return q}(s,d,m=m===g?s<d?1:-1:Fo(m),o)}}function ts(o){return function(s,d){return"string"==typeof s&&"string"==typeof d||(s=Si(s),d=Si(d)),o(s,d)}}function Mc(o,s,d,m,I,F,q,te,ae,Se){var Te=8&s;s|=Te?32:64,4&(s&=~(Te?64:32))||(s&=-4);var rt=[o,s,I,Te?F:g,Te?q:g,Te?g:F,Te?g:q,te,ae,Se],nt=d.apply(g,rt);return Ls(o)&&Vc(nt,rt),nt.placeholder=m,Bc(nt,o,s)}function ol(o){var s=Kn[o];return function(d,m){if(d=Si(d),(m=null==m?0:Ar(ln(m),292))&&Eo(d)){var I=(Mn(d)+"e").split("e");return+((I=(Mn(s(I[0]+"e"+(+I[1]+m)))+"e").split("e"))[0]+"e"+(+I[1]-m))}return s(d)}}var kc=Jt&&1/rr(new Jt([,-0]))[1]==Mt?function(o){return new Jt(o)}:Bl;function Oc(o){return function(s){var d=Fr(s);return d==Kt?Qr(s):d==Xe?function Nu(xe){var Ge=-1,Ve=Array(xe.size);return xe.forEach(function(et){Ve[++Ge]=[et,et]}),Ve}(s):function ca(xe,Ge){return Ot(Ge,function(Ve){return[Ve,xe[Ve]]})}(s,o(s))}}function Oo(o,s,d,m,I,F,q,te){var ae=2&s;if(!ae&&"function"!=typeof o)throw new Z(M);var Se=m?m.length:0;if(Se||(s&=-97,m=I=g),q=q===g?q:cr(ln(q),0),te=te===g?te:ln(te),Se-=I?I.length:0,64&s){var Te=m,Oe=I;m=I=g}var qe=ae?g:sl(o),ot=[o,s,d,m,I,Te,Oe,F,q,te];if(qe&&function pi(o,s){var d=o[1],m=s[1],I=d|m;if(!(I<131||(m==C&&8==d||m==C&&256==d&&o[7].length<=s[8]||384==m&&s[7].length<=s[8]&&8==d)))return o;1&m&&(o[2]=s[2],I|=1&d?0:4);var te=s[3];if(te){var ae=o[3];o[3]=ae?fu(ae,te,s[4]):te,o[4]=ae?io(o[3],z):s[4]}(te=s[5])&&(o[5]=(ae=o[5])?rl(ae,te,s[6]):te,o[6]=ae?io(o[5],z):s[6]),(te=s[7])&&(o[7]=te),m&C&&(o[8]=null==o[8]?s[8]:Ar(o[8],s[8])),null==o[9]&&(o[9]=s[9]),o[0]=s[0],o[1]=I}(ot,qe),o=ot[0],s=ot[1],d=ot[2],m=ot[3],I=ot[4],!(te=ot[9]=ot[9]===g?ae?0:o.length:cr(ot[9]-Se,0))&&24&s&&(s&=-25),s&&1!=s)pt=8==s||16==s?function dd(o,s,d){var m=es(o);return function I(){for(var F=arguments.length,q=Ve(F),te=F,ae=ns(I);te--;)q[te]=arguments[te];var Se=F<3&&q[0]!==ae&&q[F-1]!==ae?[]:io(q,ae);return(F-=Se.length)<d?Mc(o,s,du,I.placeholder,g,q,Se,g,g,d-F):ke(this&&this!==l&&this instanceof I?m:o,this,q)}}(o,s,te):32!=s&&33!=s||I.length?du.apply(g,ot):function Ac(o,s,d,m){var I=1&s,F=es(o);return function q(){for(var te=-1,ae=arguments.length,Se=-1,Te=m.length,Oe=Ve(Te+ae),qe=this&&this!==l&&this instanceof q?F:o;++Se<Te;)Oe[Se]=m[Se];for(;ae--;)Oe[Se++]=arguments[++te];return ke(qe,I?d:this,Oe)}}(o,s,d,m);else var pt=function fd(o,s,d){var m=1&s,I=es(o);return function F(){return(this&&this!==l&&this instanceof F?I:o).apply(m?d:this,arguments)}}(o,s,d);return Bc((qe?gc:Vc)(pt,ot),o,s)}function gu(o,s,d,m){return o===g||Yi(o,$e[d])&&!Ue.call(m,d)?s:o}function vu(o,s,d,m,I,F){return $n(o)&&$n(s)&&(F.set(s,o),ba(o,s,g,vu,F),F.delete(s)),o}function hd(o){return Us(o)?g:o}function Lc(o,s,d,m,I,F){var q=1&d,te=o.length,ae=s.length;if(te!=ae&&!(q&&ae>te))return!1;var Se=F.get(o),Te=F.get(s);if(Se&&Te)return Se==s&&Te==o;var Oe=-1,qe=!0,ot=2&d?new va:g;for(F.set(o,s),F.set(s,o);++Oe<te;){var pt=o[Oe],rt=s[Oe];if(m)var nt=q?m(rt,pt,Oe,s,o,F):m(pt,rt,Oe,o,s,F);if(nt!==g){if(nt)continue;qe=!1;break}if(ot){if(!Fe(s,function(ut,lt){if(!Yo(ot,lt)&&(pt===ut||I(pt,ut,d,m,F)))return ot.push(lt)})){qe=!1;break}}else if(pt!==rt&&!I(pt,rt,d,m,F)){qe=!1;break}}return F.delete(o),F.delete(s),qe}function Lo(o){return gl(Ds(o,g,Yc),o+"")}function zi(o){return Es(o,Cr,ll)}function al(o){return Es(o,ii,Nc)}var sl=Po?function(o){return Po.get(o)}:Bl;function mu(o){for(var s=o.name+"",d=ga[s],m=Ue.call(ga,s)?d.length:0;m--;){var I=d[m],F=I.func;if(null==F||F==o)return I.name}return s}function ns(o){return(Ue.call(J,"placeholder")?J:o).placeholder}function Bt(){var o=J.iteratee||Fl;return o=o===Fl?lc:o,arguments.length?o(arguments[0],arguments[1]):o}function yu(o,s){var d=o.__data__;return function bd(o){var s=typeof o;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==o:null===o}(s)?d["string"==typeof s?"string":"hash"]:d.map}function ul(o){for(var s=Cr(o),d=s.length;d--;){var m=s[d],I=o[m];s[d]=[m,I,Dc(I)]}return s}function _a(o,s){var d=function Lu(xe,Ge){return null==xe?g:xe[Ge]}(o,s);return Gu(d)?d:g}var ll=Ys?function(o){return null==o?[]:(o=An(o),In(Ys(o),function(s){return To.call(o,s)}))}:Hl,Nc=Ys?function(o){for(var s=[];o;)It(s,ll(o)),o=Qn(o);return s}:Hl,Fr=_r;function Rc(o,s,d){for(var m=-1,I=(s=Zo(s,o)).length,F=!1;++m<I;){var q=fo(s[m]);if(!(F=null!=o&&d(o,q)))break;o=o[q]}return F||++m!=I?F:!!(I=null==o?0:o.length)&&Do(I)&&co(q,I)&&(tn(o)||Ea(o))}function cl(o){return"function"!=typeof o.constructor||Ns(o)?{}:Ua(Qn(o))}function fl(o){return tn(o)||Ea(o)||!!(Rr&&o&&o[Rr])}function co(o,s){var d=typeof o;return!!(s=null==s?Yn:s)&&("number"==d||"symbol"!=d&&jo.test(o))&&o>-1&&o%1==0&&o<s}function Gr(o,s,d){if(!$n(d))return!1;var m=typeof s;return!!("number"==m?ri(d)&&co(s,d.length):"string"==m&&s in d)&&Yi(d[s],o)}function dl(o,s){if(tn(o))return!1;var d=typeof o;return!("number"!=d&&"symbol"!=d&&"boolean"!=d&&null!=o&&!kr(o))||Ut.test(o)||!Qi.test(o)||null!=s&&o in An(s)}function Ls(o){var s=mu(o),d=J[s];if("function"!=typeof d||!(s in en.prototype))return!1;if(o===d)return!0;var m=sl(d);return!!m&&o===m[0]}(ha&&Fr(new ha(new ArrayBuffer(1)))!=Bn||pa&&Fr(new pa)!=Kt||Qs&&Fr(Qs.resolve())!=ie||Jt&&Fr(new Jt)!=Xe||za&&Fr(new za)!=sn)&&(Fr=function(o){var s=_r(o),d=s==G?o.constructor:g,m=d?Ca(d):"";if(m)switch(m){case Cs:return Bn;case Jl:return Kt;case Vu:return ie;case Df:return Xe;case Ff:return sn}return s});var Cd=Ee?Xi:jl;function Ns(o){var s=o&&o.constructor;return o===("function"==typeof s&&s.prototype||$e)}function Dc(o){return o==o&&!$n(o)}function hl(o,s){return function(d){return null!=d&&d[o]===s&&(s!==g||o in An(d))}}function Ds(o,s,d){return s=cr(s===g?o.length-1:s,0),function(){for(var m=arguments,I=-1,F=cr(m.length-s,0),q=Ve(F);++I<F;)q[I]=m[s+I];I=-1;for(var te=Ve(s+1);++I<s;)te[I]=m[I];return te[s]=d(q),ke(o,this,te)}}function os(o,s){return s.length<2?o:or(o,Zr(s,0,-1))}function Fs(o,s){for(var d=o.length,m=Ar(s.length,d),I=ti(o);m--;){var F=s[m];o[m]=co(F,d)?I[F]:g}return o}function pl(o,s){if(("constructor"!==s||"function"!=typeof o[s])&&"__proto__"!=s)return o[s]}var Vc=Hc(gc),Vs=Rf||function(o,s){return l.setTimeout(o,s)},gl=Hc(au);function Bc(o,s,d){var m=s+"";return gl(o,function xu(o,s){var d=s.length;if(!d)return o;var m=d-1;return s[m]=(d>1?"& ":"")+s[m],s=s.join(d>2?", ":" "),o.replace(ui,"{\n/* [wrapped with "+s+"] */\n")}(m,function wd(o,s){return xt(wn,function(d){var m="_."+d[0];s&d[1]&&!Rn(o,m)&&o.push(m)}),o.sort()}(function yd(o){var s=o.match(Ji);return s?s[1].split(Nn):[]}(m),d)))}function Hc(o){var s=0,d=0;return function(){var m=Ql(),I=16-(m-d);if(d=m,I>0){if(++s>=800)return arguments[0]}else s=0;return o.apply(g,arguments)}}function bu(o,s){var d=-1,m=o.length,I=m-1;for(s=s===g?m:s;++d<s;){var F=As(d,I),q=o[F];o[F]=o[d],o[d]=q}return o.length=s,o}var jc=function Fc(o){var s=Ta(o,function(m){return 500===d.size&&d.clear(),m}),d=s.cache;return s}(function(o){var s=[];return 46===o.charCodeAt(0)&&s.push(""),o.replace(ia,function(d,m,I,F){s.push(I?F.replace(Zi,"$1"):m||d)}),s});function fo(o){if("string"==typeof o||kr(o))return o;var s=o+"";return"0"==s&&1/o==-Mt?"-0":s}function Ca(o){if(null!=o){try{return ze.call(o)}catch(s){}try{return o+""}catch(s){}}return""}function zc(o){if(o instanceof en)return o.clone();var s=new Ci(o.__wrapped__,o.__chain__);return s.__actions__=ti(o.__actions__),s.__index__=o.__index__,s.__values__=o.__values__,s}var Ui=fn(function(o,s){return ur(o)?Wa(o,Mr(s,1,ur,!0)):[]}),Gc=fn(function(o,s){var d=pr(s);return ur(d)&&(d=g),ur(o)?Wa(o,Mr(s,1,ur,!0),Bt(d,2)):[]}),ar=fn(function(o,s){var d=pr(s);return ur(d)&&(d=g),ur(o)?Wa(o,Mr(s,1,ur,!0),g,d):[]});function Wc(o,s,d){var m=null==o?0:o.length;if(!m)return-1;var I=null==d?0:ln(d);return I<0&&(I=cr(m+I,0)),zr(o,Bt(s,3),I)}function $c(o,s,d){var m=null==o?0:o.length;if(!m)return-1;var I=m-1;return d!==g&&(I=ln(d),I=d<0?cr(m+I,0):Ar(I,m-1)),zr(o,Bt(s,3),I,!0)}function Yc(o){return null!=o&&o.length?Mr(o,1):[]}function Xc(o){return o&&o.length?o[0]:g}var Nd=fn(function(o){var s=Ot(o,Ms);return s.length&&s[0]===o[0]?tu(s):[]}),Rd=fn(function(o){var s=pr(o),d=Ot(o,Ms);return s===pr(d)?s=g:d.pop(),d.length&&d[0]===o[0]?tu(d,Bt(s,2)):[]}),Dd=fn(function(o){var s=pr(o),d=Ot(o,Ms);return(s="function"==typeof s?s:g)&&d.pop(),d.length&&d[0]===o[0]?tu(d,g,s):[]});function pr(o){var s=null==o?0:o.length;return s?o[s-1]:g}var vl=fn(Qc);function Qc(o,s){return o&&o.length&&s&&s.length?Ku(o,s):o}var jd=Lo(function(o,s){var d=null==o?0:o.length,m=ic(o,s);return hc(o,Ot(s,function(I){return co(I,d)?+I:I}).sort(wc)),m});function ml(o){return null==o?o:ja.call(o)}var _u=fn(function(o){return Jo(Mr(o,1,ur,!0))}),th=fn(function(o){var s=pr(o);return ur(s)&&(s=g),Jo(Mr(o,1,ur,!0),Bt(s,2))}),nh=fn(function(o){var s=pr(o);return s="function"==typeof s?s:g,Jo(Mr(o,1,ur,!0),g,s)});function yl(o){if(!o||!o.length)return[];var s=0;return o=In(o,function(d){if(ur(d))return s=cr(d.length,s),!0}),$o(s,function(d){return Ot(o,Ra(d))})}function qc(o,s){if(!o||!o.length)return[];var d=yl(o);return null==s?d:Ot(d,function(m){return ke(s,g,m)})}var ef=fn(function(o,s){return ur(o)?Wa(o,s):[]}),oh=fn(function(o){return ei(In(o,ur))}),ah=fn(function(o){var s=pr(o);return ur(s)&&(s=g),ei(In(o,ur),Bt(s,2))}),sh=fn(function(o){var s=pr(o);return s="function"==typeof s?s:g,ei(In(o,ur),g,s)}),uh=fn(yl),fh=fn(function(o){var s=o.length,d=s>1?o[s-1]:g;return d="function"==typeof d?(o.pop(),d):g,qc(o,d)});function tf(o){var s=J(o);return s.__chain__=!0,s}function Cu(o,s){return s(o)}var hh=Lo(function(o){var s=o.length,d=s?o[0]:0,m=this.__wrapped__,I=function(F){return ic(F,o)};return!(s>1||this.__actions__.length)&&m instanceof en&&co(d)?((m=m.slice(d,+d+(s?1:0))).__actions__.push({func:Cu,args:[I],thisArg:g}),new Ci(m,this.__chain__).thru(function(F){return s&&!F.length&&F.push(g),F})):this.thru(I)}),_h=ni(function(o,s,d){Ue.call(o,d)?++o[d]:Mo(o,d,1)}),Sh=Ec(Wc),Th=Ec($c);function wu(o,s){return(tn(o)?xt:so)(o,Bt(s,3))}function Bs(o,s){return(tn(o)?Gt:ko)(o,Bt(s,3))}var xl=ni(function(o,s,d){Ue.call(o,d)?o[d].push(s):Mo(o,d,[s])}),Wi=fn(function(o,s,d){var m=-1,I="function"==typeof s,F=ri(o)?Ve(o.length):[];return so(o,function(q){F[++m]=I?ke(s,q,d):Ps(q,s,d)}),F}),bl=ni(function(o,s,d){Mo(o,d,s)});function $i(o,s){return(tn(o)?Ot:Yu)(o,Bt(s,3))}var nf=ni(function(o,s,d){o[d?0:1].push(s)},function(){return[[],[]]}),Su=fn(function(o,s){if(null==o)return[];var d=s.length;return d>1&&Gr(o,s[0],s[1])?s=[]:d>2&&Gr(s[0],s[1],s[2])&&(s=[s[0]]),fc(o,Mr(s,1),[])}),Tu=Nf||function(){return l.Date.now()};function Cl(o,s,d){return s=d?g:s,Oo(o,C,g,g,g,g,s=o&&null==s?o.length:s)}function Mh(o,s){var d;if("function"!=typeof s)throw new Z(M);return o=ln(o),function(){return--o>0&&(d=s.apply(this,arguments)),o<=1&&(s=g),d}}var ss=fn(function(o,s,d){var m=1;if(d.length){var I=io(d,ns(ss));m|=32}return Oo(o,m,s,d,I)}),wl=fn(function(o,s,d){var m=3;if(d.length){var I=io(d,ns(wl));m|=32}return Oo(s,m,o,d,I)});function Hs(o,s,d){var m,I,F,q,te,ae,Se=0,Te=!1,Oe=!1,qe=!0;if("function"!=typeof o)throw new Z(M);function ot(At){var Cn=m,Zt=I;return m=I=g,Se=At,q=o.apply(Zt,Cn)}function pt(At){return Se=At,te=Vs(ut,s),Te?ot(At):q}function nt(At){var Cn=At-ae;return ae===g||Cn>=s||Cn<0||Oe&&At-Se>=F}function ut(){var At=Tu();if(nt(At))return lt(At);te=Vs(ut,function rt(At){var Yt=s-(At-ae);return Oe?Ar(Yt,F-(At-Se)):Yt}(At))}function lt(At){return te=g,qe&&m?ot(At):(m=I=g,q)}function on(){var At=Tu(),Cn=nt(At);if(m=arguments,I=this,ae=At,Cn){if(te===g)return pt(ae);if(Oe)return tl(te),te=Vs(ut,s),ot(ae)}return te===g&&(te=Vs(ut,s)),q}return s=Si(s)||0,$n(d)&&(Te=!!d.leading,F=(Oe="maxWait"in d)?cr(Si(d.maxWait)||0,s):F,qe="trailing"in d?!!d.trailing:qe),on.cancel=function Ht(){te!==g&&tl(te),Se=0,m=ae=I=te=g},on.flush=function Xt(){return te===g?q:lt(Tu())},on}var kh=fn(function(o,s){return ya(o,1,s)}),No=fn(function(o,s,d){return ya(o,Si(s)||0,d)});function Ta(o,s){if("function"!=typeof o||null!=s&&"function"!=typeof s)throw new Z(M);var d=function(){var m=arguments,I=s?s.apply(this,m):m[0],F=d.cache;if(F.has(I))return F.get(I);var q=o.apply(this,m);return d.cache=F.set(I,q)||F,q};return d.cache=new(Ta.Cache||ao),d}function us(o){if("function"!=typeof o)throw new Z(M);return function(){var s=arguments;switch(s.length){case 0:return!o.call(this);case 1:return!o.call(this,s[0]);case 2:return!o.call(this,s[0],s[1]);case 3:return!o.call(this,s[0],s[1],s[2])}return!o.apply(this,s)}}Ta.Cache=ao;var ls=ld(function(o,s){var d=(s=1==s.length&&tn(s[0])?Ot(s[0],kn(Bt())):Ot(Mr(s,1),kn(Bt()))).length;return fn(function(m){for(var I=-1,F=Ar(m.length,d);++I<F;)m[I]=s[I].call(this,m[I]);return ke(o,this,m)})}),Rt=fn(function(o,s){var d=io(s,ns(Rt));return Oo(o,32,g,s,d)}),js=fn(function(o,s){var d=io(s,ns(js));return Oo(o,64,g,s,d)}),Eu=Lo(function(o,s){return Oo(o,256,g,g,g,s)});function Yi(o,s){return o===s||o!=o&&s!=s}var jh=ts(eu),zh=ts(function(o,s){return o>=s}),Ea=sc(function(){return arguments}())?sc:function(o){return Jn(o)&&Ue.call(o,"callee")&&!To.call(o,"callee")},tn=Ve.isArray,Uh=X?kn(X):function ju(o){return Jn(o)&&_r(o)==un};function ri(o){return null!=o&&Do(o.length)&&!Xi(o)}function ur(o){return Jn(o)&&ri(o)}var Ro=Du||jl,Wh=ce?kn(ce):function zu(o){return Jn(o)&&_r(o)==bt};function Pl(o){if(!Jn(o))return!1;var s=_r(o);return s==yn||"[object DOMException]"==s||"string"==typeof o.message&&"string"==typeof o.name&&!Us(o)}function Xi(o){if(!$n(o))return!1;var s=_r(o);return s==Vn||s==si||"[object AsyncFunction]"==s||"[object Proxy]"==s}function zs(o){return"number"==typeof o&&o==ln(o)}function Do(o){return"number"==typeof o&&o>-1&&o%1==0&&o<=Yn}function $n(o){var s=typeof o;return null!=o&&("object"==s||"function"==s)}function Jn(o){return null!=o&&"object"==typeof o}var uf=le?kn(le):function xa(o){return Jn(o)&&Fr(o)==Kt};function cf(o){return"number"==typeof o||Jn(o)&&_r(o)==zt}function Us(o){if(!Jn(o)||_r(o)!=G)return!1;var s=Qn(o);if(null===s)return!0;var d=Ue.call(s,"constructor")&&s.constructor;return"function"==typeof d&&d instanceof d&&ze.call(d)==Nt}var Il=Ae?kn(Ae):function uc(o){return Jn(o)&&_r(o)==We},ff=Be?kn(Be):function rd(o){return Jn(o)&&Fr(o)==Xe};function cs(o){return"string"==typeof o||!tn(o)&&Jn(o)&&_r(o)==gt}function kr(o){return"symbol"==typeof o||Jn(o)&&_r(o)==kt}var fs=Qe?kn(Qe):function Wu(o){return Jn(o)&&Do(o.length)&&!!Qt[_r(o)]},np=ts($u),rp=ts(function(o,s){return o<=s});function pf(o){if(!o)return[];if(ri(o))return cs(o)?er(o):ti(o);if(Ba&&o[Ba])return function xs(xe){for(var Ge,Ve=[];!(Ge=xe.next()).done;)Ve.push(Ge.value);return Ve}(o[Ba]());var s=Fr(o);return(s==Kt?Qr:s==Xe?rr:ps)(o)}function Fo(o){return o?(o=Si(o))===Mt||o===-Mt?17976931348623157e292*(o<0?-1:1):o==o?o:0:0===o?o:0}function ln(o){var s=Fo(o),d=s%1;return s==s?d?s-d:s:0}function gf(o){return o?ma(ln(o),0,Ne):0}function Si(o){if("number"==typeof o)return o;if(kr(o))return NaN;if($n(o)){var s="function"==typeof o.valueOf?o.valueOf():o;o=$n(s)?s+"":s}if("string"!=typeof o)return 0===o?o:+o;o=ku(o);var d=aa.test(o);return d||bo.test(o)?pe(o.slice(2),d?2:8):li.test(o)?NaN:+o}function Vo(o){return lo(o,ii(o))}function Mn(o){return null==o?"":qr(o)}var op=Za(function(o,s){if(Ns(s)||ri(s))lo(s,Cr(s),o);else for(var d in s)Ue.call(s,d)&&qs(o,d,s[d])}),vf=Za(function(o,s){lo(s,ii(s),o)}),Iu=Za(function(o,s,d,m){lo(s,ii(s),o,m)}),ap=Za(function(o,s,d,m){lo(s,Cr(s),o,m)}),sp=Lo(ic),Al=fn(function(o,s){o=An(o);var d=-1,m=s.length,I=m>2?s[2]:g;for(I&&Gr(s[0],s[1],I)&&(m=1);++d<m;)for(var F=s[d],q=ii(F),te=-1,ae=q.length;++te<ae;){var Se=q[te],Te=o[Se];(Te===g||Yi(Te,$e[Se])&&!Ue.call(o,Se))&&(o[Se]=F[Se])}return o}),mf=fn(function(o){return o.push(g,vu),ke(bf,g,o)});function hs(o,s,d){var m=null==o?g:or(o,s);return m===g?d:m}function Gs(o,s){return null!=o&&Rc(o,s,td)}var fr=Ic(function(o,s,d){null!=s&&"function"!=typeof s.toString&&(s=Ct.call(s)),o[s]=d},gr(oi)),pp=Ic(function(o,s,d){null!=s&&"function"!=typeof s.toString&&(s=Ct.call(s)),Ue.call(o,s)?o[s].push(d):o[s]=[d]},Bt),gp=fn(Ps);function Cr(o){return ri(o)?Zf(o):iu(o)}function ii(o){return ri(o)?Zf(o,!0):function id(o){if(!$n(o))return function is(o){var s=[];if(null!=o)for(var d in An(o))s.push(d);return s}(o);var s=Ns(o),d=[];for(var m in o)"constructor"==m&&(s||!Ue.call(o,m))||d.push(m);return d}(o)}var Ml=Za(function(o,s,d){ba(o,s,d)}),bf=Za(function(o,s,d,m){ba(o,s,d,m)}),_f=Lo(function(o,s){var d={};if(null==o)return d;var m=!1;s=Ot(s,function(F){return F=Zo(F,o),m||(m=F.length>1),F}),lo(o,al(o),d),m&&(d=ji(d,7,hd));for(var I=s.length;I--;)qu(d,s[I]);return d}),yp=Lo(function(o,s){return null==o?{}:function dc(o,s){return Xu(o,s,function(d,m){return Gs(o,m)})}(o,s)});function kl(o,s){if(null==o)return{};var d=Ot(al(o),function(m){return[m]});return s=Bt(s),Xu(o,d,function(m,I){return s(m,I[0])})}var wf=Oc(Cr),Sf=Oc(ii);function ps(o){return null==o?[]:ys(o,Cr(o))}var Pp=qa(function(o,s,d){return s=s.toLowerCase(),o+(d?Tf(s):s)});function Tf(o){return Dl(Mn(o).toLowerCase())}function Ef(o){return(o=Mn(o))&&o.replace(sa,Da).replace(Go,"")}var kp=qa(function(o,s,d){return o+(d?"-":"")+s.toLowerCase()}),Pf=qa(function(o,s,d){return o+(d?" ":"")+s.toLowerCase()}),Op=Tc("toLowerCase"),Vp=qa(function(o,s,d){return o+(d?"_":"")+s.toLowerCase()}),Hp=qa(function(o,s,d){return o+(d?" ":"")+Dl(s)}),Wp=qa(function(o,s,d){return o+(d?" ":"")+s.toUpperCase()}),Dl=Tc("toUpperCase");function Mf(o,s,d){return o=Mn(o),(s=d?g:s)===g?function Xo(xe){return Di.test(xe)}(o)?function $s(xe){return xe.match(no)||[]}(o):function jr(xe){return xe.match(xo)||[]}(o):o.match(s)||[]}var kf=fn(function(o,s){try{return ke(o,g,s)}catch(d){return Pl(d)?d:new St(d)}}),$p=Lo(function(o,s){return xt(s,function(d){d=fo(d),Mo(o,d,ss(o[d],o))}),o});function gr(o){return function(){return o}}var vs=Pc(),Xp=Pc(!0);function oi(o){return o}function Fl(o){return lc("function"==typeof o?o:ji(o,1))}var Jp=fn(function(o,s){return function(d){return Ps(d,o,s)}}),Zp=fn(function(o,s){return function(d){return Ps(o,d,s)}});function Vl(o,s,d){var m=Cr(s),I=Xa(s,m);null==d&&(!$n(s)||!I.length&&m.length)&&(d=s,s=o,o=this,I=Xa(s,Cr(s)));var F=!($n(d)&&"chain"in d&&!d.chain),q=Xi(o);return xt(I,function(te){var ae=s[te];o[te]=ae,q&&(o.prototype[te]=function(){var Se=this.__chain__;if(F||Se){var Te=o(this.__wrapped__),Oe=Te.__actions__=ti(this.__actions__);return Oe.push({func:ae,args:arguments,thisArg:o}),Te.__chain__=Se,Te}return ae.apply(o,It([this.value()],arguments))})}),o}function Bl(){}var tg=hu(Ot),ng=hu(Pt),rg=hu(Fe);function Lf(o){return dl(o)?Ra(fo(o)):function od(o){return function(s){return or(s,o)}}(o)}var og=Os(),ag=Os(!0);function Hl(){return[]}function jl(){return!1}var c=ea(function(o,s){return o+s},0),v=ol("ceil"),y=ea(function(o,s){return o/s},1),T=ol("floor"),Pe=ea(function(o,s){return o*s},1),Re=ol("round"),Le=ea(function(o,s){return o-s},0);return J.after=function Ah(o,s){if("function"!=typeof s)throw new Z(M);return o=ln(o),function(){if(--o<1)return s.apply(this,arguments)}},J.ary=Cl,J.assign=op,J.assignIn=vf,J.assignInWith=Iu,J.assignWith=ap,J.at=sp,J.before=Mh,J.bind=ss,J.bindAll=$p,J.bindKey=wl,J.castArray=function Rh(){if(!arguments.length)return[];var o=arguments[0];return tn(o)?o:[o]},J.chain=tf,J.chunk=function Sd(o,s,d){s=(d?Gr(o,s,d):s===g)?1:cr(ln(s),0);var m=null==o?0:o.length;if(!m||s<1)return[];for(var I=0,F=0,q=Ve(Ha(m/s));I<m;)q[F++]=Zr(o,I,I+=s);return q},J.compact=function Uc(o){for(var s=-1,d=null==o?0:o.length,m=0,I=[];++s<d;){var F=o[s];F&&(I[m++]=F)}return I},J.concat=function wa(){var o=arguments.length;if(!o)return[];for(var s=Ve(o-1),d=arguments[0],m=o;m--;)s[m-1]=arguments[m];return It(tn(d)?ti(d):[d],Mr(s,1))},J.cond=function Au(o){var s=null==o?0:o.length,d=Bt();return o=s?Ot(o,function(m){if("function"!=typeof m[1])throw new Z(M);return[d(m[0]),m[1]]}):[],fn(function(m){for(var I=-1;++I<s;){var F=o[I];if(ke(F[0],this,m))return ke(F[1],this,m)}})},J.conforms=function Yp(o){return function mg(o){var s=Cr(o);return function(d){return Qo(d,o,s)}}(ji(o,1))},J.constant=gr,J.countBy=_h,J.create=function up(o,s){var d=Ua(o);return null==s?d:rc(d,s)},J.curry=function Sl(o,s,d){var m=Oo(o,8,g,g,g,g,g,s=d?g:s);return m.placeholder=Sl.placeholder,m},J.curryRight=function of(o,s,d){var m=Oo(o,16,g,g,g,g,g,s=d?g:s);return m.placeholder=of.placeholder,m},J.debounce=Hs,J.defaults=Al,J.defaultsDeep=mf,J.defer=kh,J.delay=No,J.difference=Ui,J.differenceBy=Gc,J.differenceWith=ar,J.drop=function sr(o,s,d){var m=null==o?0:o.length;return m?Zr(o,(s=d||s===g?1:ln(s))<0?0:s,m):[]},J.dropRight=function Td(o,s,d){var m=null==o?0:o.length;return m?Zr(o,0,(s=m-(s=d||s===g?1:ln(s)))<0?0:s):[]},J.dropRightWhile=function Ed(o,s){return o&&o.length?lu(o,Bt(s,3),!0,!0):[]},J.dropWhile=function Pd(o,s){return o&&o.length?lu(o,Bt(s,3),!0):[]},J.fill=function Id(o,s,d,m){var I=null==o?0:o.length;return I?(d&&"number"!=typeof d&&Gr(o,s,d)&&(d=0,m=I),function bn(o,s,d,m){var I=o.length;for((d=ln(d))<0&&(d=-d>I?0:I+d),(m=m===g||m>I?I:ln(m))<0&&(m+=I),m=d>m?0:gf(m);d<m;)o[d++]=s;return o}(o,s,d,m)):[]},J.filter=function wh(o,s){return(tn(o)?In:Ts)(o,Bt(s,3))},J.flatMap=function Eh(o,s){return Mr($i(o,s),1)},J.flatMapDeep=function Ph(o,s){return Mr($i(o,s),Mt)},J.flatMapDepth=function st(o,s,d){return d=d===g?1:ln(d),Mr($i(o,s),d)},J.flatten=Yc,J.flattenDeep=function Ad(o){return null!=o&&o.length?Mr(o,Mt):[]},J.flattenDepth=function Md(o,s){return null!=o&&o.length?Mr(o,s=s===g?1:ln(s)):[]},J.flip=function Tl(o){return Oo(o,512)},J.flow=vs,J.flowRight=Xp,J.fromPairs=function kd(o){for(var s=-1,d=null==o?0:o.length,m={};++s<d;){var I=o[s];m[I[0]]=I[1]}return m},J.functions=function yg(o){return null==o?[]:Xa(o,Cr(o))},J.functionsIn=function yf(o){return null==o?[]:Xa(o,ii(o))},J.groupBy=xl,J.initial=function Ld(o){return null!=o&&o.length?Zr(o,0,-1):[]},J.intersection=Nd,J.intersectionBy=Rd,J.intersectionWith=Dd,J.invert=fr,J.invertBy=pp,J.invokeMap=Wi,J.iteratee=Fl,J.keyBy=bl,J.keys=Cr,J.keysIn=ii,J.map=$i,J.mapKeys=function vp(o,s){var d={};return s=Bt(s,3),uo(o,function(m,I,F){Mo(d,s(m,I,F),m)}),d},J.mapValues=function xf(o,s){var d={};return s=Bt(s,3),uo(o,function(m,I,F){Mo(d,I,s(m,I,F))}),d},J.matches=function Kp(o){return cc(ji(o,1))},J.matchesProperty=function Qp(o,s){return Qa(o,ji(s,1))},J.memoize=Ta,J.merge=Ml,J.mergeWith=bf,J.method=Jp,J.methodOf=Zp,J.mixin=Vl,J.negate=us,J.nthArg=function eg(o){return o=ln(o),fn(function(s){return ou(s,o)})},J.omit=_f,J.omitBy=function mp(o,s){return kl(o,us(Bt(s)))},J.once=function po(o){return Mh(2,o)},J.orderBy=function ho(o,s,d,m){return null==o?[]:(tn(s)||(s=null==s?[]:[s]),tn(d=m?g:d)||(d=null==d?[]:[d]),fc(o,s,d))},J.over=tg,J.overArgs=ls,J.overEvery=ng,J.overSome=rg,J.partial=Rt,J.partialRight=js,J.partition=nf,J.pick=yp,J.pickBy=kl,J.property=Lf,J.propertyOf=function ig(o){return function(s){return null==o?g:or(o,s)}},J.pull=vl,J.pullAll=Qc,J.pullAllBy=function Bd(o,s,d){return o&&o.length&&s&&s.length?Ku(o,s,Bt(d,2)):o},J.pullAllWith=function Hd(o,s,d){return o&&o.length&&s&&s.length?Ku(o,s,g,d):o},J.pullAt=jd,J.range=og,J.rangeRight=ag,J.rearg=Eu,J.reject=function na(o,s){return(tn(o)?In:Ts)(o,us(Bt(s,3)))},J.remove=function zd(o,s){var d=[];if(!o||!o.length)return d;var m=-1,I=[],F=o.length;for(s=Bt(s,3);++m<F;){var q=o[m];s(q,m,o)&&(d.push(q),I.push(m))}return hc(o,I),d},J.rest=function Pu(o,s){if("function"!=typeof o)throw new Z(M);return fn(o,s=s===g?s:ln(s))},J.reverse=ml,J.sampleSize=function Gn(o,s,d){return s=(d?Gr(o,s,d):s===g)?1:ln(s),(tn(o)?pg:sd)(o,s)},J.set=function Cf(o,s,d){return null==o?o:Ja(o,s,d)},J.setWith=function Ol(o,s,d,m){return m="function"==typeof m?m:g,null==o?o:Ja(o,s,d,m)},J.shuffle=function as(o){return(tn(o)?gg:su)(o)},J.slice=function Ud(o,s,d){var m=null==o?0:o.length;return m?(d&&"number"!=typeof d&&Gr(o,s,d)?(s=0,d=m):(s=null==s?0:ln(s),d=d===g?m:ln(d)),Zr(o,s,d)):[]},J.sortBy=Su,J.sortedUniq=function Xd(o){return o&&o.length?Zu(o):[]},J.sortedUniqBy=function Kd(o,s){return o&&o.length?Zu(o,Bt(s,2)):[]},J.split=function Bp(o,s,d){return d&&"number"!=typeof d&&Gr(o,s,d)&&(s=d=g),(d=d===g?Ne:d>>>0)?(o=Mn(o))&&("string"==typeof s||null!=s&&!Il(s))&&!(s=qr(s))&&Bi(o)?qo(er(o),0,d):o.split(s,d):[]},J.spread=function Oh(o,s){if("function"!=typeof o)throw new Z(M);return s=null==s?0:cr(ln(s),0),fn(function(d){var m=d[s],I=qo(d,0,s);return m&&It(I,m),ke(o,this,I)})},J.tail=function Qd(o){var s=null==o?0:o.length;return s?Zr(o,1,s):[]},J.take=function Jd(o,s,d){return o&&o.length?Zr(o,0,(s=d||s===g?1:ln(s))<0?0:s):[]},J.takeRight=function Zd(o,s,d){var m=null==o?0:o.length;return m?Zr(o,(s=m-(s=d||s===g?1:ln(s)))<0?0:s,m):[]},J.takeRightWhile=function qd(o,s){return o&&o.length?lu(o,Bt(s,3),!1,!0):[]},J.takeWhile=function eh(o,s){return o&&o.length?lu(o,Bt(s,3)):[]},J.tap=function dh(o,s){return s(o),o},J.throttle=function Lh(o,s,d){var m=!0,I=!0;if("function"!=typeof o)throw new Z(M);return $n(d)&&(m="leading"in d?!!d.leading:m,I="trailing"in d?!!d.trailing:I),Hs(o,s,{leading:m,maxWait:s,trailing:I})},J.thru=Cu,J.toArray=pf,J.toPairs=wf,J.toPairsIn=Sf,J.toPath=function a(o){return tn(o)?Ot(o,fo):kr(o)?[o]:ti(jc(Mn(o)))},J.toPlainObject=Vo,J.transform=function bp(o,s,d){var m=tn(o),I=m||Ro(o)||fs(o);if(s=Bt(s,4),null==d){var F=o&&o.constructor;d=I?m?new F:[]:$n(o)&&Xi(F)?Ua(Qn(o)):{}}return(I?xt:uo)(o,function(q,te,ae){return s(d,q,te,ae)}),d},J.unary=function Nh(o){return Cl(o,1)},J.union=_u,J.unionBy=th,J.unionWith=nh,J.uniq=function rh(o){return o&&o.length?Jo(o):[]},J.uniqBy=function ih(o,s){return o&&o.length?Jo(o,Bt(s,2)):[]},J.uniqWith=function Zc(o,s){return s="function"==typeof s?s:g,o&&o.length?Jo(o,g,s):[]},J.unset=function _p(o,s){return null==o||qu(o,s)},J.unzip=yl,J.unzipWith=qc,J.update=function Cp(o,s,d){return null==o?o:mc(o,s,el(d))},J.updateWith=function Ll(o,s,d,m){return m="function"==typeof m?m:g,null==o?o:mc(o,s,el(d),m)},J.values=ps,J.valuesIn=function wp(o){return null==o?[]:ys(o,ii(o))},J.without=ef,J.words=Mf,J.wrap=function El(o,s){return Rt(el(s),o)},J.xor=oh,J.xorBy=ah,J.xorWith=sh,J.zip=uh,J.zipObject=function lh(o,s){return Dr(o||[],s||[],qs)},J.zipObjectDeep=function ch(o,s){return Dr(o||[],s||[],Ja)},J.zipWith=fh,J.entries=wf,J.entriesIn=Sf,J.extend=vf,J.extendWith=Iu,Vl(J,J),J.add=c,J.attempt=kf,J.camelCase=Pp,J.capitalize=Tf,J.ceil=v,J.clamp=function Sp(o,s,d){return d===g&&(d=s,s=g),d!==g&&(d=(d=Si(d))==d?d:0),s!==g&&(s=(s=Si(s))==s?s:0),ma(Si(o),s,d)},J.clone=function Dh(o){return ji(o,4)},J.cloneDeep=function Vh(o){return ji(o,5)},J.cloneDeepWith=function Bh(o,s){return ji(o,5,s="function"==typeof s?s:g)},J.cloneWith=function Fh(o,s){return ji(o,4,s="function"==typeof s?s:g)},J.conformsTo=function Hh(o,s){return null==s||Qo(o,s,Cr(s))},J.deburr=Ef,J.defaultTo=function Of(o,s){return null==o||o!=o?s:o},J.divide=y,J.endsWith=function Ip(o,s,d){o=Mn(o),s=qr(s);var m=o.length,I=d=d===g?m:ma(ln(d),0,m);return(d-=s.length)>=0&&o.slice(d,I)==s},J.eq=Yi,J.escape=function Ap(o){return(o=Mn(o))&&cn.test(o)?o.replace(Bo,Wl):o},J.escapeRegExp=function Mp(o){return(o=Mn(o))&&Ho.test(o)?o.replace(Ti,"\\$&"):o},J.every=function Ch(o,s,d){var m=tn(o)?Pt:$a;return d&&Gr(o,s,d)&&(s=g),m(o,Bt(s,3))},J.find=Sh,J.findIndex=Wc,J.findKey=function ds(o,s){return di(o,Bt(s,3),uo)},J.findLast=Th,J.findLastIndex=$c,J.findLastKey=function lp(o,s){return di(o,Bt(s,3),Ya)},J.floor=T,J.forEach=wu,J.forEachRight=Bs,J.forIn=function cp(o,s){return null==o?o:Hu(o,Bt(s,3),ii)},J.forInRight=function fp(o,s){return null==o?o:oc(o,Bt(s,3),ii)},J.forOwn=function dp(o,s){return o&&uo(o,Bt(s,3))},J.forOwnRight=function hp(o,s){return o&&Ya(o,Bt(s,3))},J.get=hs,J.gt=jh,J.gte=zh,J.has=function xg(o,s){return null!=o&&Rc(o,s,ac)},J.hasIn=Gs,J.head=Xc,J.identity=oi,J.includes=function ta(o,s,d,m){o=ri(o)?o:ps(o),d=d&&!m?ln(d):0;var I=o.length;return d<0&&(d=cr(I+d,0)),cs(o)?d<=I&&o.indexOf(s,d)>-1:!!I&&zn(o,s,d)>-1},J.indexOf=function Od(o,s,d){var m=null==o?0:o.length;if(!m)return-1;var I=null==d?0:ln(d);return I<0&&(I=cr(m+I,0)),zn(o,s,I)},J.inRange=function Tp(o,s,d){return s=Fo(s),d===g?(d=s,s=0):d=Fo(d),function nd(o,s,d){return o>=Ar(s,d)&&o<cr(s,d)}(o=Si(o),s,d)},J.invoke=gp,J.isArguments=Ea,J.isArray=tn,J.isArrayBuffer=Uh,J.isArrayLike=ri,J.isArrayLikeObject=ur,J.isBoolean=function Gh(o){return!0===o||!1===o||Jn(o)&&_r(o)==ht},J.isBuffer=Ro,J.isDate=Wh,J.isElement=function $h(o){return Jn(o)&&1===o.nodeType&&!Us(o)},J.isEmpty=function Yh(o){if(null==o)return!0;if(ri(o)&&(tn(o)||"string"==typeof o||"function"==typeof o.splice||Ro(o)||fs(o)||Ea(o)))return!o.length;var s=Fr(o);if(s==Kt||s==Xe)return!o.size;if(Ns(o))return!iu(o).length;for(var d in o)if(Ue.call(o,d))return!1;return!0},J.isEqual=function af(o,s){return Ka(o,s)},J.isEqualWith=function sf(o,s,d){var m=(d="function"==typeof d?d:g)?d(o,s):g;return m===g?Ka(o,s,g,d):!!m},J.isError=Pl,J.isFinite=function Xh(o){return"number"==typeof o&&Eo(o)},J.isFunction=Xi,J.isInteger=zs,J.isLength=Do,J.isMap=uf,J.isMatch=function Kh(o,s){return o===s||ru(o,s,ul(s))},J.isMatchWith=function Qh(o,s,d){return d="function"==typeof d?d:g,ru(o,s,ul(s),d)},J.isNaN=function Jh(o){return cf(o)&&o!=+o},J.isNative=function Zh(o){if(Cd(o))throw new St("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Gu(o)},J.isNil=function qh(o){return null==o},J.isNull=function lf(o){return null===o},J.isNumber=cf,J.isObject=$n,J.isObjectLike=Jn,J.isPlainObject=Us,J.isRegExp=Il,J.isSafeInteger=function ep(o){return zs(o)&&o>=-Yn&&o<=Yn},J.isSet=ff,J.isString=cs,J.isSymbol=kr,J.isTypedArray=fs,J.isUndefined=function tp(o){return o===g},J.isWeakMap=function df(o){return Jn(o)&&Fr(o)==sn},J.isWeakSet=function hf(o){return Jn(o)&&"[object WeakSet]"==_r(o)},J.join=function Fd(o,s){return null==o?"":Xs.call(o,s)},J.kebabCase=kp,J.last=pr,J.lastIndexOf=function Vd(o,s,d){var m=null==o?0:o.length;if(!m)return-1;var I=m;return d!==g&&(I=(I=ln(d))<0?cr(m+I,0):Ar(I,m-1)),s==s?function On(xe,Ge,Ve){for(var et=Ve+1;et--;)if(xe[et]===Ge)return et;return et}(o,s,I):zr(o,Lr,I,!0)},J.lowerCase=Pf,J.lowerFirst=Op,J.lt=np,J.lte=rp,J.max=function A(o){return o&&o.length?hn(o,oi,eu):g},J.maxBy=function _(o,s){return o&&o.length?hn(o,Bt(s,2),eu):g},J.mean=function W(o){return bi(o,oi)},J.meanBy=function ne(o,s){return bi(o,Bt(s,2))},J.min=function oe(o){return o&&o.length?hn(o,oi,$u):g},J.minBy=function we(o,s){return o&&o.length?hn(o,Bt(s,2),$u):g},J.stubArray=Hl,J.stubFalse=jl,J.stubObject=function e(){return{}},J.stubString=function n(){return""},J.stubTrue=function t(){return!0},J.multiply=Pe,J.nth=function Kc(o,s){return o&&o.length?ou(o,ln(s)):g},J.noConflict=function qp(){return l._===this&&(l._=Ft),this},J.noop=Bl,J.now=Tu,J.pad=function Lp(o,s,d){o=Mn(o);var m=(s=ln(s))?oo(o):0;if(!s||m>=s)return o;var I=(s-m)/2;return pu(_s(I),d)+o+pu(Ha(I),d)},J.padEnd=function Np(o,s,d){o=Mn(o);var m=(s=ln(s))?oo(o):0;return s&&m<s?o+pu(s-m,d):o},J.padStart=function Nl(o,s,d){o=Mn(o);var m=(s=ln(s))?oo(o):0;return s&&m<s?pu(s-m,d)+o:o},J.parseInt=function Rp(o,s,d){return d||null==s?s=0:s&&(s=+s),Ks(Mn(o).replace(yo,""),s||0)},J.random=function Ep(o,s,d){if(d&&"boolean"!=typeof d&&Gr(o,s,d)&&(s=d=g),d===g&&("boolean"==typeof s?(d=s,s=g):"boolean"==typeof o&&(d=o,o=g)),o===g&&s===g?(o=0,s=1):(o=Fo(o),s===g?(s=o,o=0):s=Fo(s)),o>s){var m=o;o=s,s=m}if(d||o%1||s%1){var I=Fu();return Ar(o+I*(s-o+se("1e-"+((I+"").length-1))),s)}return As(o,s)},J.reduce=function _l(o,s,d){var m=tn(o)?yr:ro,I=arguments.length<3;return m(o,Bt(s,4),d,I,so)},J.reduceRight=function wi(o,s,d){var m=tn(o)?_n:ro,I=arguments.length<3;return m(o,Bt(s,4),d,I,ko)},J.repeat=function Dp(o,s,d){return s=(d?Gr(o,s,d):s===g)?1:ln(s),Qu(Mn(o),s)},J.replace=function Fp(){var o=arguments,s=Mn(o[0]);return o.length<3?s:s.replace(o[1],o[2])},J.result=function xp(o,s,d){var m=-1,I=(s=Zo(s,o)).length;for(I||(I=1,o=g);++m<I;){var F=null==o?g:o[fo(s[m])];F===g&&(m=I,F=d),o=Xi(F)?F.call(o):F}return o},J.round=Re,J.runInContext=xe,J.sample=function Sa(o){return(tn(o)?qf:pc)(o)},J.size=function rf(o){if(null==o)return 0;if(ri(o))return cs(o)?oo(o):o.length;var s=Fr(o);return s==Kt||s==Xe?o.size:iu(o).length},J.snakeCase=Vp,J.some=function Ih(o,s,d){var m=tn(o)?Fe:ud;return d&&Gr(o,s,d)&&(s=g),m(o,Bt(s,3))},J.sortedIndex=function Gd(o,s){return uu(o,s)},J.sortedIndexBy=function Jc(o,s,d){return Ju(o,s,Bt(d,2))},J.sortedIndexOf=function Gi(o,s){var d=null==o?0:o.length;if(d){var m=uu(o,s);if(m<d&&Yi(o[m],s))return m}return-1},J.sortedLastIndex=function Wd(o,s){return uu(o,s,!0)},J.sortedLastIndexBy=function $d(o,s,d){return Ju(o,s,Bt(d,2),!0)},J.sortedLastIndexOf=function Yd(o,s){if(null!=o&&o.length){var m=uu(o,s,!0)-1;if(Yi(o[m],s))return m}return-1},J.startCase=Hp,J.startsWith=function jp(o,s,d){return o=Mn(o),d=null==d?0:ma(ln(d),0,o.length),s=qr(s),o.slice(d,d+s.length)==s},J.subtract=Le,J.sum=function L(o){return o&&o.length?Un(o,oi):0},J.sumBy=function U(o,s){return o&&o.length?Un(o,Bt(s,2)):0},J.template=function zp(o,s,d){var m=J.templateSettings;d&&Gr(o,s,d)&&(s=g),o=Mn(o),s=Iu({},s,m,gu);var te,ae,I=Iu({},s.imports,m.imports,gu),F=Cr(I),q=ys(I,F),Se=0,Te=s.interpolate||gi,Oe="__p += '",qe=Va((s.escape||gi).source+"|"+Te.source+"|"+(Te===mo?Ma:gi).source+"|"+(s.evaluate||gi).source+"|$","g"),ot="//# sourceURL="+(Ue.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wo+"]")+"\n";o.replace(qe,function(nt,ut,lt,Ht,Xt,on){return lt||(lt=Ht),Oe+=o.slice(Se,on).replace(Pi,$l),ut&&(te=!0,Oe+="' +\n__e("+ut+") +\n'"),Xt&&(ae=!0,Oe+="';\n"+Xt+";\n__p += '"),lt&&(Oe+="' +\n((__t = ("+lt+")) == null ? '' : __t) +\n'"),Se=on+nt.length,nt}),Oe+="';\n";var pt=Ue.call(s,"variable")&&s.variable;if(pt){if(Ei.test(pt))throw new St("Invalid `variable` option passed into `_.template`")}else Oe="with (obj) {\n"+Oe+"\n}\n";Oe=(ae?Oe.replace(Zn,""):Oe).replace(go,"$1").replace(Aa,"$1;"),Oe="function("+(pt||"obj")+") {\n"+(pt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(te?", __e = _.escape":"")+(ae?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Oe+"return __p\n}";var rt=kf(function(){return _t(F,ot+"return "+Oe).apply(g,q)});if(rt.source=Oe,Pl(rt))throw rt;return rt},J.times=function r(o,s){if((o=ln(o))<1||o>Yn)return[];var d=Ne,m=Ar(o,Ne);s=Bt(s),o-=Ne;for(var I=$o(m,s);++d<o;)s(d);return I},J.toFinite=Fo,J.toInteger=ln,J.toLength=gf,J.toLower=function Up(o){return Mn(o).toLowerCase()},J.toNumber=Si,J.toSafeInteger=function ip(o){return o?ma(ln(o),-Yn,Yn):0===o?o:0},J.toString=Mn,J.toUpper=function Rl(o){return Mn(o).toUpperCase()},J.trim=function If(o,s,d){if((o=Mn(o))&&(d||s===g))return ku(o);if(!o||!(s=qr(s)))return o;var m=er(o),I=er(s);return qo(m,Ou(m,I),Ws(m,I)+1).join("")},J.trimEnd=function gs(o,s,d){if((o=Mn(o))&&(d||s===g))return o.slice(0,Et(o)+1);if(!o||!(s=qr(s)))return o;var m=er(o);return qo(m,0,Ws(m,er(s))+1).join("")},J.trimStart=function Gp(o,s,d){if((o=Mn(o))&&(d||s===g))return o.replace(yo,"");if(!o||!(s=qr(s)))return o;var m=er(o);return qo(m,Ou(m,er(s))).join("")},J.truncate=function Pa(o,s){var d=30,m="...";if($n(s)){var I="separator"in s?s.separator:I;d="length"in s?ln(s.length):d,m="omission"in s?qr(s.omission):m}var F=(o=Mn(o)).length;if(Bi(o)){var q=er(o);F=q.length}if(d>=F)return o;var te=d-oo(m);if(te<1)return m;var ae=q?qo(q,0,te).join(""):o.slice(0,te);if(I===g)return ae+m;if(q&&(te+=ae.length-te),Il(I)){if(o.slice(te).search(I)){var Se,Te=ae;for(I.global||(I=Va(I.source,Mn(oa.exec(I))+"g")),I.lastIndex=0;Se=I.exec(Te);)var Oe=Se.index;ae=ae.slice(0,Oe===g?te:Oe)}}else if(o.indexOf(qr(I),te)!=te){var qe=ae.lastIndexOf(I);qe>-1&&(ae=ae.slice(0,qe))}return ae+m},J.unescape=function Af(o){return(o=Mn(o))&&Yr.test(o)?o.replace(Ki,Nr):o},J.uniqueId=function u(o){var s=++ct;return Mn(o)+s},J.upperCase=Wp,J.upperFirst=Dl,J.each=wu,J.eachRight=Bs,J.first=Xc,Vl(J,function(){var o={};return uo(J,function(s,d){Ue.call(J.prototype,d)||(o[d]=s)}),o}(),{chain:!1}),J.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){J[o].placeholder=J}),xt(["drop","take"],function(o,s){en.prototype[o]=function(d){d=d===g?1:cr(ln(d),0);var m=this.__filtered__&&!s?new en(this):this.clone();return m.__filtered__?m.__takeCount__=Ar(d,m.__takeCount__):m.__views__.push({size:Ar(d,Ne),type:o+(m.__dir__<0?"Right":"")}),m},en.prototype[o+"Right"]=function(d){return this.reverse()[o](d).reverse()}}),xt(["filter","map","takeWhile"],function(o,s){var d=s+1,m=1==d||3==d;en.prototype[o]=function(I){var F=this.clone();return F.__iteratees__.push({iteratee:Bt(I,3),type:d}),F.__filtered__=F.__filtered__||m,F}}),xt(["head","last"],function(o,s){var d="take"+(s?"Right":"");en.prototype[o]=function(){return this[d](1).value()[0]}}),xt(["initial","tail"],function(o,s){var d="drop"+(s?"":"Right");en.prototype[o]=function(){return this.__filtered__?new en(this):this[d](1)}}),en.prototype.compact=function(){return this.filter(oi)},en.prototype.find=function(o){return this.filter(o).head()},en.prototype.findLast=function(o){return this.reverse().find(o)},en.prototype.invokeMap=fn(function(o,s){return"function"==typeof o?new en(this):this.map(function(d){return Ps(d,o,s)})}),en.prototype.reject=function(o){return this.filter(us(Bt(o)))},en.prototype.slice=function(o,s){o=ln(o);var d=this;return d.__filtered__&&(o>0||s<0)?new en(d):(o<0?d=d.takeRight(-o):o&&(d=d.drop(o)),s!==g&&(d=(s=ln(s))<0?d.dropRight(-s):d.take(s-o)),d)},en.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},en.prototype.toArray=function(){return this.take(Ne)},uo(en.prototype,function(o,s){var d=/^(?:filter|find|map|reject)|While$/.test(s),m=/^(?:head|last)$/.test(s),I=J[m?"take"+("last"==s?"Right":""):s],F=m||/^find/.test(s);!I||(J.prototype[s]=function(){var q=this.__wrapped__,te=m?[1]:arguments,ae=q instanceof en,Se=te[0],Te=ae||tn(q),Oe=function(ut){var lt=I.apply(J,It([ut],te));return m&&qe?lt[0]:lt};Te&&d&&"function"==typeof Se&&1!=Se.length&&(ae=Te=!1);var qe=this.__chain__,ot=!!this.__actions__.length,pt=F&&!qe,rt=ae&&!ot;if(!F&&Te){q=rt?q:new en(this);var nt=o.apply(q,te);return nt.__actions__.push({func:Cu,args:[Oe],thisArg:g}),new Ci(nt,qe)}return pt&&rt?o.apply(this,te):(nt=this.thru(Oe),pt?m?nt.value()[0]:nt.value():nt)})}),xt(["pop","push","shift","sort","splice","unshift"],function(o){var s=de[o],d=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);J.prototype[o]=function(){var I=arguments;if(m&&!this.__chain__){var F=this.value();return s.apply(tn(F)?F:[],I)}return this[d](function(q){return s.apply(tn(q)?q:[],I)})}}),uo(en.prototype,function(o,s){var d=J[s];if(d){var m=d.name+"";Ue.call(ga,m)||(ga[m]=[]),ga[m].push({name:s,func:d})}}),ga[du(g,2).name]=[{name:"wrapper",func:g}],en.prototype.clone=function ql(){var o=new en(this.__wrapped__);return o.__actions__=ti(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=ti(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=ti(this.__views__),o},en.prototype.reverse=function ec(){if(this.__filtered__){var o=new en(this);o.__dir__=-1,o.__filtered__=!0}else(o=this.clone()).__dir__*=-1;return o},en.prototype.value=function tc(){var o=this.__wrapped__.value(),s=this.__dir__,d=tn(o),m=s<0,I=d?o.length:0,F=function md(o,s,d){for(var m=-1,I=d.length;++m<I;){var F=d[m],q=F.size;switch(F.type){case"drop":o+=q;break;case"dropRight":s-=q;break;case"take":s=Ar(s,o+q);break;case"takeRight":o=cr(o,s-q)}}return{start:o,end:s}}(0,I,this.__views__),q=F.start,te=F.end,ae=te-q,Se=m?te:q-1,Te=this.__iteratees__,Oe=Te.length,qe=0,ot=Ar(ae,this.__takeCount__);if(!d||!m&&I==ae&&ot==ae)return yc(o,this.__actions__);var pt=[];e:for(;ae--&&qe<ot;){for(var rt=-1,nt=o[Se+=s];++rt<Oe;){var ut=Te[rt],Ht=ut.type,Xt=(0,ut.iteratee)(nt);if(2==Ht)nt=Xt;else if(!Xt){if(1==Ht)continue e;break e}}pt[qe++]=nt}return pt},J.prototype.at=hh,J.prototype.chain=function ph(){return tf(this)},J.prototype.commit=function gh(){return new Ci(this.value(),this.__chain__)},J.prototype.next=function vh(){this.__values__===g&&(this.__values__=pf(this.value()));var o=this.__index__>=this.__values__.length;return{done:o,value:o?g:this.__values__[this.__index__++]}},J.prototype.plant=function yh(o){for(var s,d=this;d instanceof Zs;){var m=zc(d);m.__index__=0,m.__values__=g,s?I.__wrapped__=m:s=m;var I=m;d=d.__wrapped__}return I.__wrapped__=o,s},J.prototype.reverse=function xh(){var o=this.__wrapped__;if(o instanceof en){var s=o;return this.__actions__.length&&(s=new en(this)),(s=s.reverse()).__actions__.push({func:Cu,args:[ml],thisArg:g}),new Ci(s,this.__chain__)}return this.thru(ml)},J.prototype.toJSON=J.prototype.valueOf=J.prototype.value=function bh(){return yc(this.__wrapped__,this.__actions__)},J.prototype.first=J.prototype.head,Ba&&(J.prototype[Ba]=function mh(){return this}),J}();l._=ir,(p=function(){return ir}.call(Y,f,Y,P))!==g&&(P.exports=p)}.call(this)},19984:(P,Y,f)=>{var p=f(84633),g=f(96517),S=f(92046),E=f(21503);P.exports=function b(M,O){return(E(M)?p:S)(M,g(O,3))}},10203:(P,Y,f)=>{var p=f(85683),g=f(45184),S=f(96517);P.exports=function E(b,M){var O={};return M=S(M,3),g(b,function(k,j,z){p(O,j,M(k,j,z))}),O}},18176:(P,Y,f)=>{var p=f(67308),g=f(31100),S=f(32608);P.exports=function E(b){return b&&b.length?p(b,S,g):void 0}},30535:(P,Y,f)=>{var p=f(99850);function S(E,b){if("function"!=typeof E||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var M=function(){var O=arguments,k=b?b.apply(this,O):O[0],j=M.cache;if(j.has(k))return j.get(k);var z=E.apply(this,O);return M.cache=j.set(k,z)||j,z};return M.cache=new(S.Cache||p),M}S.Cache=p,P.exports=S},80567:(P,Y,f)=>{var p=f(73842),S=f(84944)(function(E,b,M){p(E,b,M)});P.exports=S},29439:(P,Y,f)=>{var p=f(67308),g=f(99069),S=f(32608);P.exports=function E(b){return b&&b.length?p(b,S,g):void 0}},29525:(P,Y,f)=>{var p=f(67308),g=f(96517),S=f(99069);P.exports=function E(b,M){return b&&b.length?p(b,g(M,2),S):void 0}},12552:P=>{P.exports=function Y(){}},31710:(P,Y,f)=>{var p=f(12119);P.exports=function(){return p.Date.now()}},16372:(P,Y,f)=>{var p=f(83021),S=f(3975)(function(E,b){return null==E?{}:p(E,b)});P.exports=S},87495:(P,Y,f)=>{var p=f(11847),g=f(39222),S=f(45352),E=f(68533);P.exports=function b(M){return S(M)?p(E(M)):g(M)}},90361:(P,Y,f)=>{var g=f(97509)();P.exports=g},81337:(P,Y,f)=>{var p=f(8745),g=f(43132),S=f(96517),E=f(13570),b=f(21503);P.exports=function M(O,k,j){var z=b(O)?p:E,N=arguments.length<3;return z(O,S(k,4),j,N,g)}},55637:(P,Y,f)=>{var p=f(81172),g=f(28794),S=f(56507),E=f(30248),b=f(52315);P.exports=function k(j){if(null==j)return 0;if(S(j))return E(j)?b(j):j.length;var z=g(j);return"[object Map]"==z||"[object Set]"==z?j.size:p(j).length}},12906:(P,Y,f)=>{var p=f(50686),g=f(6119),S=f(23269),E=f(93342),b=S(function(M,O){if(null==M)return[];var k=O.length;return k>1&&E(M,O[0],O[1])?O=[]:k>2&&E(O[0],O[1],O[2])&&(O=[O[0]]),g(M,p(O,1),[])});P.exports=b},49975:P=>{P.exports=function Y(){return[]}},63580:P=>{P.exports=function Y(){return!1}},12232:(P,Y,f)=>{var p=f(51467),g=1/0;P.exports=function E(b){return b?(b=p(b))===g||b===-g?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}},44401:(P,Y,f)=>{var p=f(12232);P.exports=function g(S){var E=p(S),b=E%1;return E==E?b?E-b:E:0}},51467:(P,Y,f)=>{var p=f(83348),g=f(25940),S=f(44129),b=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,O=/^0o[0-7]+$/i,k=parseInt;P.exports=function j(z){if("number"==typeof z)return z;if(S(z))return NaN;if(g(z)){var N="function"==typeof z.valueOf?z.valueOf():z;z=g(N)?N+"":N}if("string"!=typeof z)return 0===z?z:+z;z=p(z);var K=M.test(z);return K||O.test(z)?k(z.slice(2),K?2:8):b.test(z)?NaN:+z}},8067:(P,Y,f)=>{var p=f(31989),g=f(16555);P.exports=function S(E){return p(E,g(E))}},73943:(P,Y,f)=>{var p=f(93935);P.exports=function g(S){return null==S?"":p(S)}},89416:(P,Y,f)=>{var p=f(96837),g=f(78858),S=f(45184),E=f(96517),b=f(29519),M=f(21503),O=f(80891),k=f(75946),j=f(25940),z=f(48159);P.exports=function N(K,re,fe){var i=M(K),ue=i||O(K)||z(K);if(re=E(re,4),null==fe){var ge=K&&K.constructor;fe=ue?i?new ge:[]:j(K)&&k(ge)?g(b(K)):{}}return(ue?p:S)(K,function(he,ee,ve){return re(fe,he,ee,ve)}),fe}},68921:(P,Y,f)=>{var p=f(50686),g=f(23269),S=f(80707),E=f(21330),b=g(function(M){return S(p(M,1,E,!0))});P.exports=b},51541:(P,Y,f)=>{var p=f(73943),g=0;P.exports=function S(E){var b=++g;return p(E)+b}},90377:(P,Y,f)=>{var p=f(19179),g=f(118);P.exports=function S(E){return null==E?[]:p(E,g(E))}},21617:(P,Y,f)=>{var p=f(89719),g=f(38645);P.exports=function S(E,b){return g(E||[],b||[],p)}},29610:function(P){P.exports=function(){var Y="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},p=Array.prototype,g=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,E=p.push,b=p.slice,M=g.toString,O=g.hasOwnProperty,k="undefined"!=typeof ArrayBuffer,j="undefined"!=typeof DataView,z=Array.isArray,N=Object.keys,K=Object.create,re=k&&ArrayBuffer.isView,fe=isNaN,i=isFinite,ue=!{toString:null}.propertyIsEnumerable("toString"),ge=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],he=Math.pow(2,53)-1;function ee(D,Q){return Q=null==Q?D.length-1:+Q,function(){for(var se=Math.max(arguments.length-Q,0),pe=Array(se),Me=0;Me<se;Me++)pe[Me]=arguments[Me+Q];switch(Q){case 0:return D.call(this,pe);case 1:return D.call(this,arguments[0],pe);case 2:return D.call(this,arguments[0],arguments[1],pe)}var Ce=Array(Q+1);for(Me=0;Me<Q;Me++)Ce[Me]=arguments[Me];return Ce[Q]=pe,D.apply(this,Ce)}}function ve(D){var Q=typeof D;return"function"===Q||"object"===Q&&!!D}function Ie(D){return void 0===D}function De(D){return!0===D||!1===D||"[object Boolean]"===M.call(D)}function C(D){var Q="[object "+D+"]";return function(se){return M.call(se)===Q}}var He=C("String"),Je=C("Number"),Ke=C("Date"),tt=C("RegExp"),it=C("Error"),dt=C("Symbol"),wt=C("ArrayBuffer"),jt=C("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(jt=function(D){return"function"==typeof D||!1});var Mt=jt,Yn=C("Object"),wr=j&&Yn(new DataView(new ArrayBuffer(8))),Sr="undefined"!=typeof Map&&Yn(new Map),Ne=C("DataView"),vn=wr?function(D){return null!=D&&Mt(D.getInt8)&&wt(D.buffer)}:Ne,tr=z||C("Array");function wn(D,Q){return null!=D&&O.call(D,Q)}var je=C("Arguments");!function(){je(arguments)||(je=function(D){return wn(D,"callee")})}();var _e=je;function Ze(D){return Je(D)&&fe(D)}function ht(D){return function(){return D}}function bt(D){return function(Q){var se=D(Q);return"number"==typeof se&&se>=0&&se<=he}}function an(D){return function(Q){return null==Q?void 0:Q[D]}}var yn=an("byteLength"),Vn=bt(yn),si=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Kt=k?function(D){return re?re(D)&&!vn(D):Vn(D)&&si.test(M.call(D))}:ht(!1),zt=an("length");function B(D,Q){Q=function(l){for(var h={},x=l.length,w=0;w<x;++w)h[l[w]]=!0;return{contains:function(R){return!0===h[R]},push:function(R){return h[R]=!0,l.push(R)}}}(Q);var se=ge.length,pe=D.constructor,Me=Mt(pe)&&pe.prototype||g,Ce="constructor";for(wn(D,Ce)&&!Q.contains(Ce)&&Q.push(Ce);se--;)(Ce=ge[se])in D&&D[Ce]!==Me[Ce]&&!Q.contains(Ce)&&Q.push(Ce)}function G(D){if(!ve(D))return[];if(N)return N(D);var Q=[];for(var se in D)wn(D,se)&&Q.push(se);return ue&&B(D,Q),Q}function ie(D,Q){var se=G(Q),pe=se.length;if(null==D)return!pe;for(var Me=Object(D),Ce=0;Ce<pe;Ce++){var l=se[Ce];if(Q[l]!==Me[l]||!(l in Me))return!1}return!0}function ye(D){return D instanceof ye?D:this instanceof ye?void(this._wrapped=D):new ye(D)}function We(D){return new Uint8Array(D.buffer||D,D.byteOffset||0,yn(D))}ye.VERSION=Y,ye.prototype.valueOf=ye.prototype.toJSON=ye.prototype.value=function(){return this._wrapped},ye.prototype.toString=function(){return String(this._wrapped)};var Xe="[object DataView]";function gt(D,Q,se,pe){if(D===Q)return 0!==D||1/D==1/Q;if(null==D||null==Q)return!1;if(D!=D)return Q!=Q;var Me=typeof D;return("function"===Me||"object"===Me||"object"==typeof Q)&&function Ce(l,h,x,w){l instanceof ye&&(l=l._wrapped),h instanceof ye&&(h=h._wrapped);var R=M.call(l);if(R!==M.call(h))return!1;if(wr&&"[object Object]"==R&&vn(l)){if(!vn(h))return!1;R=Xe}switch(R){case"[object RegExp]":case"[object String]":return""+l==""+h;case"[object Number]":return+l!=+l?+h!=+h:0==+l?1/+l==1/h:+l==+h;case"[object Date]":case"[object Boolean]":return+l==+h;case"[object Symbol]":return S.valueOf.call(l)===S.valueOf.call(h);case"[object ArrayBuffer]":case Xe:return Ce(We(l),We(h),x,w)}var H="[object Array]"===R;if(!H&&Kt(l)){if(yn(l)!==yn(h))return!1;if(l.buffer===h.buffer&&l.byteOffset===h.byteOffset)return!0;H=!0}if(!H){if("object"!=typeof l||"object"!=typeof h)return!1;var X=l.constructor,ce=h.constructor;if(X!==ce&&!(Mt(X)&&X instanceof X&&Mt(ce)&&ce instanceof ce)&&"constructor"in l&&"constructor"in h)return!1}w=w||[];for(var le=(x=x||[]).length;le--;)if(x[le]===l)return w[le]===h;if(x.push(l),w.push(h),H){if((le=l.length)!==h.length)return!1;for(;le--;)if(!gt(l[le],h[le],x,w))return!1}else{var Ae,Be=G(l);if(le=Be.length,G(h).length!==le)return!1;for(;le--;)if(!wn(h,Ae=Be[le])||!gt(l[Ae],h[Ae],x,w))return!1}return x.pop(),w.pop(),!0}(D,Q,se,pe)}function kt(D){if(!ve(D))return[];var Q=[];for(var se in D)Q.push(se);return ue&&B(D,Q),Q}function Vt(D){var Q=zt(D);return function(se){if(null==se)return!1;var pe=kt(se);if(zt(pe))return!1;for(var Me=0;Me<Q;Me++)if(!Mt(se[D[Me]]))return!1;return D!==Vr||!Mt(se[sn])}}var sn="forEach",un=["clear","delete"],Bn=["get","has","set"],Dn=un.concat(sn,Bn),Vr=un.concat(Bn),Pn=["add"].concat(un,sn,"has"),Hn=Sr?Vt(Dn):C("Map"),Fn=Sr?Vt(Vr):C("WeakMap"),Wn=Sr?Vt(Pn):C("Set"),dr=C("WeakSet");function Br(D){for(var Q=G(D),se=Q.length,pe=Array(se),Me=0;Me<se;Me++)pe[Me]=D[Q[Me]];return pe}function nr(D){for(var Q={},se=G(D),pe=0,Me=se.length;pe<Me;pe++)Q[D[se[pe]]]=se[pe];return Q}function Zn(D){var Q=[];for(var se in D)Mt(D[se])&&Q.push(se);return Q.sort()}function go(D,Q){return function(se){var pe=arguments.length;if(Q&&(se=Object(se)),pe<2||null==se)return se;for(var Me=1;Me<pe;Me++)for(var Ce=arguments[Me],l=D(Ce),h=l.length,x=0;x<h;x++){var w=l[x];Q&&void 0!==se[w]||(se[w]=Ce[w])}return se}}var Aa=go(kt),Ki=go(G),Bo=go(kt,!0);function Yr(D){if(!ve(D))return{};if(K)return K(D);var Q=function(){};Q.prototype=D;var se=new Q;return Q.prototype=null,se}function cn(D){return tr(D)?D:[D]}function vo(D){return ye.toPath(D)}function ra(D,Q){for(var se=Q.length,pe=0;pe<se;pe++){if(null==D)return;D=D[Q[pe]]}return se?D:void 0}function mo(D,Q,se){var pe=ra(D,vo(Q));return Ie(pe)?se:pe}function Qi(D){return D}function Ut(D){return D=Ki({},D),function(Q){return ie(Q,D)}}function ia(D){return D=vo(D),function(Q){return ra(Q,D)}}function Ti(D,Q,se){if(void 0===Q)return D;switch(null==se?3:se){case 1:return function(pe){return D.call(Q,pe)};case 3:return function(pe,Me,Ce){return D.call(Q,pe,Me,Ce)};case 4:return function(pe,Me,Ce,l){return D.call(Q,pe,Me,Ce,l)}}return function(){return D.apply(Q,arguments)}}function Ho(D,Q,se){return null==D?Qi:Mt(D)?Ti(D,Q,se):ve(D)&&!tr(D)?Ut(D):ia(D)}function yo(D,Q){return Ho(D,Q,1/0)}function Ln(D,Q,se){return ye.iteratee!==yo?ye.iteratee(D,Q):Ho(D,Q,se)}function ui(){}function Ji(D,Q){return null==Q&&(Q=D,D=0),D+Math.floor(Math.random()*(Q-D+1))}ye.toPath=cn,ye.iteratee=yo;var Nn=Date.now||function(){return(new Date).getTime()};function xo(D){var Q=function(Ce){return D[Ce]},se="(?:"+G(D).join("|")+")",pe=RegExp(se),Me=RegExp(se,"g");return function(Ce){return pe.test(Ce=null==Ce?"":""+Ce)?Ce.replace(Me,Q):Ce}}var Ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Zi=xo(Ei),Ma=xo(nr(Ei)),oa=ye.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},li=/(.)^/,aa={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$t=/\\|'|\r|\n|\u2028|\u2029/g;function bo(D){return"\\"+aa[D]}var jo=/^\s*(\w|\$)+\s*$/,sa=0;function gi(D,Q,se,pe,Me){if(!(pe instanceof Q))return D.apply(se,Me);var Ce=Yr(D.prototype),l=D.apply(Ce,Me);return ve(l)?l:Ce}var Pi=ee(function(D,Q){var se=Pi.placeholder,pe=function(){for(var Me=0,Ce=Q.length,l=Array(Ce),h=0;h<Ce;h++)l[h]=Q[h]===se?arguments[Me++]:Q[h];for(;Me<arguments.length;)l.push(arguments[Me++]);return gi(D,pe,this,this,l)};return pe});Pi.placeholder=ye;var Ii=ee(function(D,Q,se){if(!Mt(D))throw new TypeError("Bind must be called on a function");var pe=ee(function(Me){return gi(D,pe,Q,this,se.concat(Me))});return pe}),Tr=bt(zt);function ci(D,Q,se,pe){if(pe=pe||[],Q||0===Q){if(Q<=0)return pe.concat(D)}else Q=1/0;for(var Me=pe.length,Ce=0,l=zt(D);Ce<l;Ce++){var h=D[Ce];if(Tr(h)&&(tr(h)||_e(h)))if(Q>1)ci(h,Q-1,se,pe),Me=pe.length;else for(var x=0,w=h.length;x<w;)pe[Me++]=h[x++];else se||(pe[Me++]=h)}return pe}var ka=ee(function(D,Q){var se=(Q=ci(Q,!1,!1)).length;if(se<1)throw new Error("bindAll must be passed function names");for(;se--;){var pe=Q[se];D[pe]=Ii(D[pe],D)}return D}),qi=ee(function(D,Q,se){return setTimeout(function(){return D.apply(null,se)},Q)}),me=Pi(qi,ye,1);function jn(D){return function(){return!D.apply(this,arguments)}}function fi(D,Q){var se;return function(){return--D>0&&(se=Q.apply(this,arguments)),D<=1&&(Q=null),se}}var eo=Pi(fi,2);function vt(D,Q,se){Q=Ln(Q,se);for(var pe,Me=G(D),Ce=0,l=Me.length;Ce<l;Ce++)if(Q(D[pe=Me[Ce]],pe,D))return pe}function vi(D){return function(Q,se,pe){se=Ln(se,pe);for(var Me=zt(Q),Ce=D>0?0:Me-1;Ce>=0&&Ce<Me;Ce+=D)if(se(Q[Ce],Ce,Q))return Ce;return-1}}var Ai=vi(1),Mi=vi(-1);function to(D,Q,se,pe){for(var Me=(se=Ln(se,pe,1))(Q),Ce=0,l=zt(D);Ce<l;){var h=Math.floor((Ce+l)/2);se(D[h])<Me?Ce=h+1:l=h}return Ce}function Xn(D,Q,se){return function(pe,Me,Ce){var l=0,h=zt(pe);if("number"==typeof Ce)D>0?l=Ce>=0?Ce:Math.max(Ce+h,l):h=Ce>=0?Math.min(Ce+1,h):Ce+h+1;else if(se&&Ce&&h)return pe[Ce=se(pe,Me)]===Me?Ce:-1;if(Me!=Me)return(Ce=Q(b.call(pe,l,h),Ze))>=0?Ce+l:-1;for(Ce=D>0?l:h-1;Ce>=0&&Ce<h;Ce+=D)if(pe[Ce]===Me)return Ce;return-1}}var Oa=Xn(1,Ai,to),ua=Xn(-1,Mi);function lr(D,Q,se){var pe=(Tr(D)?Ai:vt)(D,Q,se);if(void 0!==pe&&-1!==pe)return D[pe]}function Hr(D,Q,se){var pe,Me;if(Q=Ti(Q,se),Tr(D))for(pe=0,Me=D.length;pe<Me;pe++)Q(D[pe],pe,D);else{var Ce=G(D);for(pe=0,Me=Ce.length;pe<Me;pe++)Q(D[Ce[pe]],Ce[pe],D)}return D}function hr(D,Q,se){Q=Ln(Q,se);for(var pe=!Tr(D)&&G(D),Me=(pe||D).length,Ce=Array(Me),l=0;l<Me;l++){var h=pe?pe[l]:l;Ce[l]=Q(D[h],h,D)}return Ce}function zo(D){var Q=function(se,pe,Me,Ce){var l=!Tr(se)&&G(se),h=(l||se).length,x=D>0?0:h-1;for(Ce||(Me=se[l?l[x]:x],x+=D);x>=0&&x<h;x+=D){var w=l?l[x]:x;Me=pe(Me,se[w],w,se)}return Me};return function(se,pe,Me,Ce){var l=arguments.length>=3;return Q(se,Ti(pe,Ce,4),Me,l)}}var ki=zo(1),Xr=zo(-1);function at(D,Q,se){var pe=[];return Q=Ln(Q,se),Hr(D,function(Me,Ce,l){Q(Me,Ce,l)&&pe.push(Me)}),pe}function _o(D,Q,se){Q=Ln(Q,se);for(var pe=!Tr(D)&&G(D),Me=(pe||D).length,Ce=0;Ce<Me;Ce++){var l=pe?pe[Ce]:Ce;if(!Q(D[l],l,D))return!1}return!0}function Co(D,Q,se){Q=Ln(Q,se);for(var pe=!Tr(D)&&G(D),Me=(pe||D).length,Ce=0;Ce<Me;Ce++){var l=pe?pe[Ce]:Ce;if(Q(D[l],l,D))return!0}return!1}function Er(D,Q,se,pe){return Tr(D)||(D=Br(D)),("number"!=typeof se||pe)&&(se=0),Oa(D,Q,se)>=0}var mi=ee(function(D,Q,se){var pe,Me;return Mt(Q)?Me=Q:(Q=vo(Q),pe=Q.slice(0,-1),Q=Q[Q.length-1]),hr(D,function(Ce){var l=Me;if(!l){if(pe&&pe.length&&(Ce=ra(Ce,pe)),null==Ce)return;l=Ce[Q]}return null==l?l:l.apply(Ce,se)})});function dn(D,Q){return hr(D,ia(Q))}function Oi(D,Q,se){var pe,Me,Ce=-1/0,l=-1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof D[0]&&null!=D)for(var h=0,x=(D=Tr(D)?D:Br(D)).length;h<x;h++)null!=(pe=D[h])&&pe>Ce&&(Ce=pe);else Q=Ln(Q,se),Hr(D,function(w,R,H){((Me=Q(w,R,H))>l||Me===-1/0&&Ce===-1/0)&&(Ce=w,l=Me)});return Ce}var la=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Uo(D){return D?tr(D)?b.call(D):He(D)?D.match(la):Tr(D)?hr(D,Qi):Br(D):[]}function wo(D,Q,se){if(null==Q||se)return Tr(D)||(D=Br(D)),D[Ji(D.length-1)];var pe=Uo(D),Me=zt(pe);Q=Math.max(Math.min(Q,Me),0);for(var Ce=Me-1,l=0;l<Q;l++){var h=Ji(l,Ce),x=pe[l];pe[l]=pe[h],pe[h]=x}return pe.slice(0,Q)}function Li(D,Q){return function(se,pe,Me){var Ce=Q?[[],[]]:{};return pe=Ln(pe,Me),Hr(se,function(l,h){var x=pe(l,h,se);D(Ce,l,x)}),Ce}}var pn=Li(function(D,Q,se){wn(D,se)?D[se].push(Q):D[se]=[Q]}),Ni=Li(function(D,Q,se){D[se]=Q}),Tt=Li(function(D,Q,se){wn(D,se)?D[se]++:D[se]=1}),Kr=Li(function(D,Q,se){D[se?0:1].push(Q)},!0);function yi(D,Q,se){return Q in se}var qn=ee(function(D,Q){var se={},pe=Q[0];if(null==D)return se;Mt(pe)?(Q.length>1&&(pe=Ti(pe,Q[1])),Q=kt(D)):(pe=yi,Q=ci(Q,!1,!1),D=Object(D));for(var Me=0,Ce=Q.length;Me<Ce;Me++){var l=Q[Me],h=D[l];pe(h,l,D)&&(se[l]=h)}return se}),La=ee(function(D,Q){var se,pe=Q[0];return Mt(pe)?(pe=jn(pe),Q.length>1&&(se=Q[1])):(Q=hr(ci(Q,!1,!1),String),pe=function(Me,Ce){return!Er(Q,Ce)}),qn(D,pe,se)});function mr(D,Q,se){return b.call(D,0,Math.max(0,D.length-(null==Q||se?1:Q)))}function Go(D,Q,se){return null==D||D.length<1?null==Q||se?void 0:[]:null==Q||se?D[0]:mr(D,D.length-Q)}function Pr(D,Q,se){return b.call(D,null==Q||se?1:Q)}var no=ee(function(D,Q){return Q=ci(Q,!0,!0),at(D,function(se){return!Er(Q,se)})}),Ri=ee(function(D,Q){return no(D,Q)});function Di(D,Q,se,pe){De(Q)||(pe=se,se=Q,Q=!1),null!=se&&(se=Ln(se,pe));for(var Me=[],Ce=[],l=0,h=zt(D);l<h;l++){var x=D[l],w=se?se(x,l,D):x;Q&&!se?(l&&Ce===w||Me.push(x),Ce=w):se?Er(Ce,w)||(Ce.push(w),Me.push(x)):Er(Me,x)||Me.push(x)}return Me}var Na=ee(function(D){return Di(ci(D,!0,!0))});function Wo(D){for(var Q=D&&Oi(D,zt).length||0,se=Array(Q),pe=0;pe<Q;pe++)se[pe]=dn(D,pe);return se}var Qt=ee(Wo);function Sn(D,Q){return D._chain?ye(Q).chain():Q}function xi(D){return Hr(Zn(D),function(Q){var se=ye[Q]=D[Q];ye.prototype[Q]=function(){var pe=[this._wrapped];return E.apply(pe,arguments),Sn(this,se.apply(ye,pe))}}),ye}Hr(["pop","push","reverse","shift","sort","splice","unshift"],function(D){var Q=p[D];ye.prototype[D]=function(){var se=this._wrapped;return null!=se&&(Q.apply(se,arguments),"shift"!==D&&"splice"!==D||0!==se.length||delete se[0]),Sn(this,se)}}),Hr(["concat","join","slice"],function(D){var Q=p[D];ye.prototype[D]=function(){var se=this._wrapped;return null!=se&&(se=Q.apply(se,arguments)),Sn(this,se)}});var So=xi({__proto__:null,VERSION:Y,restArguments:ee,isObject:ve,isNull:function(D){return null===D},isUndefined:Ie,isBoolean:De,isElement:function(D){return!(!D||1!==D.nodeType)},isString:He,isNumber:Je,isDate:Ke,isRegExp:tt,isError:it,isSymbol:dt,isArrayBuffer:wt,isDataView:vn,isArray:tr,isFunction:Mt,isArguments:_e,isFinite:function(D){return!dt(D)&&i(D)&&!isNaN(parseFloat(D))},isNaN:Ze,isTypedArray:Kt,isEmpty:function(D){if(null==D)return!0;var Q=zt(D);return"number"==typeof Q&&(tr(D)||He(D)||_e(D))?0===Q:0===zt(G(D))},isMatch:ie,isEqual:function(D,Q){return gt(D,Q)},isMap:Hn,isWeakMap:Fn,isSet:Wn,isWeakSet:dr,keys:G,allKeys:kt,values:Br,pairs:function(D){for(var Q=G(D),se=Q.length,pe=Array(se),Me=0;Me<se;Me++)pe[Me]=[Q[Me],D[Q[Me]]];return pe},invert:nr,functions:Zn,methods:Zn,extend:Aa,extendOwn:Ki,assign:Ki,defaults:Bo,create:function(D,Q){var se=Yr(D);return Q&&Ki(se,Q),se},clone:function(D){return ve(D)?tr(D)?D.slice():Aa({},D):D},tap:function(D,Q){return Q(D),D},get:mo,has:function(D,Q){for(var se=(Q=vo(Q)).length,pe=0;pe<se;pe++){var Me=Q[pe];if(!wn(D,Me))return!1;D=D[Me]}return!!se},mapObject:function(D,Q,se){Q=Ln(Q,se);for(var pe=G(D),Me=pe.length,Ce={},l=0;l<Me;l++){var h=pe[l];Ce[h]=Q(D[h],h,D)}return Ce},identity:Qi,constant:ht,noop:ui,toPath:cn,property:ia,propertyOf:function(D){return null==D?ui:function(Q){return mo(D,Q)}},matcher:Ut,matches:Ut,times:function(D,Q,se){var pe=Array(Math.max(0,D));Q=Ti(Q,se,1);for(var Me=0;Me<D;Me++)pe[Me]=Q(Me);return pe},random:Ji,now:Nn,escape:Zi,unescape:Ma,templateSettings:oa,template:function(D,Q,se){!Q&&se&&(Q=se),Q=Bo({},Q,ye.templateSettings);var pe=RegExp([(Q.escape||li).source,(Q.interpolate||li).source,(Q.evaluate||li).source].join("|")+"|$","g"),Me=0,Ce="__p+='";D.replace(pe,function(w,R,H,X,ce){return Ce+=D.slice(Me,ce).replace($t,bo),Me=ce+w.length,R?Ce+="'+\n((__t=("+R+"))==null?'':_.escape(__t))+\n'":H?Ce+="'+\n((__t=("+H+"))==null?'':__t)+\n'":X&&(Ce+="';\n"+X+"\n__p+='"),w}),Ce+="';\n";var l,h=Q.variable;if(h){if(!jo.test(h))throw new Error("variable is not a bare identifier: "+h)}else Ce="with(obj||{}){\n"+Ce+"}\n",h="obj";Ce="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Ce+"return __p;\n";try{l=new Function(h,"_",Ce)}catch(w){throw w.source=Ce,w}var x=function(w){return l.call(this,w,ye)};return x.source="function("+h+"){\n"+Ce+"}",x},result:function(D,Q,se){var pe=(Q=vo(Q)).length;if(!pe)return Mt(se)?se.call(D):se;for(var Me=0;Me<pe;Me++){var Ce=null==D?void 0:D[Q[Me]];void 0===Ce&&(Ce=se,Me=pe),D=Mt(Ce)?Ce.call(D):Ce}return D},uniqueId:function(D){var Q=++sa+"";return D?D+Q:Q},chain:function(D){var Q=ye(D);return Q._chain=!0,Q},iteratee:yo,partial:Pi,bind:Ii,bindAll:ka,memoize:function(D,Q){var se=function(pe){var Me=se.cache,Ce=""+(Q?Q.apply(this,arguments):pe);return wn(Me,Ce)||(Me[Ce]=D.apply(this,arguments)),Me[Ce]};return se.cache={},se},delay:qi,defer:me,throttle:function(D,Q,se){var pe,Me,Ce,l,h=0;se||(se={});var x=function(){h=!1===se.leading?0:Nn(),pe=null,l=D.apply(Me,Ce),pe||(Me=Ce=null)},w=function(){var R=Nn();h||!1!==se.leading||(h=R);var H=Q-(R-h);return Me=this,Ce=arguments,H<=0||H>Q?(pe&&(clearTimeout(pe),pe=null),h=R,l=D.apply(Me,Ce),pe||(Me=Ce=null)):pe||!1===se.trailing||(pe=setTimeout(x,H)),l};return w.cancel=function(){clearTimeout(pe),h=0,pe=Me=Ce=null},w},debounce:function(D,Q,se){var pe,Me,Ce,l,h,x=function(){var R=Nn()-Me;Q>R?pe=setTimeout(x,Q-R):(pe=null,se||(l=D.apply(h,Ce)),pe||(Ce=h=null))},w=ee(function(R){return h=this,Ce=R,Me=Nn(),pe||(pe=setTimeout(x,Q),se&&(l=D.apply(h,Ce))),l});return w.cancel=function(){clearTimeout(pe),pe=Ce=h=null},w},wrap:function(D,Q){return Pi(Q,D)},negate:jn,compose:function(){var D=arguments,Q=D.length-1;return function(){for(var se=Q,pe=D[Q].apply(this,arguments);se--;)pe=D[se].call(this,pe);return pe}},after:function(D,Q){return function(){if(--D<1)return Q.apply(this,arguments)}},before:fi,once:eo,findKey:vt,findIndex:Ai,findLastIndex:Mi,sortedIndex:to,indexOf:Oa,lastIndexOf:ua,find:lr,detect:lr,findWhere:function(D,Q){return lr(D,Ut(Q))},each:Hr,forEach:Hr,map:hr,collect:hr,reduce:ki,foldl:ki,inject:ki,reduceRight:Xr,foldr:Xr,filter:at,select:at,reject:function(D,Q,se){return at(D,jn(Ln(Q)),se)},every:_o,all:_o,some:Co,any:Co,contains:Er,includes:Er,include:Er,invoke:mi,pluck:dn,where:function(D,Q){return at(D,Ut(Q))},max:Oi,min:function(D,Q,se){var pe,Me,Ce=1/0,l=1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof D[0]&&null!=D)for(var h=0,x=(D=Tr(D)?D:Br(D)).length;h<x;h++)null!=(pe=D[h])&&pe<Ce&&(Ce=pe);else Q=Ln(Q,se),Hr(D,function(w,R,H){((Me=Q(w,R,H))<l||Me===1/0&&Ce===1/0)&&(Ce=w,l=Me)});return Ce},shuffle:function(D){return wo(D,1/0)},sample:wo,sortBy:function(D,Q,se){var pe=0;return Q=Ln(Q,se),dn(hr(D,function(Me,Ce,l){return{value:Me,index:pe++,criteria:Q(Me,Ce,l)}}).sort(function(Me,Ce){var l=Me.criteria,h=Ce.criteria;if(l!==h){if(l>h||void 0===l)return 1;if(l<h||void 0===h)return-1}return Me.index-Ce.index}),"value")},groupBy:pn,indexBy:Ni,countBy:Tt,partition:Kr,toArray:Uo,size:function(D){return null==D?0:Tr(D)?D.length:G(D).length},pick:qn,omit:La,first:Go,head:Go,take:Go,initial:mr,last:function(D,Q,se){return null==D||D.length<1?null==Q||se?void 0:[]:null==Q||se?D[D.length-1]:Pr(D,Math.max(0,D.length-Q))},rest:Pr,tail:Pr,drop:Pr,compact:function(D){return at(D,Boolean)},flatten:function(D,Q){return ci(D,Q,!1)},without:Ri,uniq:Di,unique:Di,union:Na,intersection:function(D){for(var Q=[],se=arguments.length,pe=0,Me=zt(D);pe<Me;pe++){var Ce=D[pe];if(!Er(Q,Ce)){var l;for(l=1;l<se&&Er(arguments[l],Ce);l++);l===se&&Q.push(Ce)}}return Q},difference:no,unzip:Wo,transpose:Wo,zip:Qt,object:function(D,Q){for(var se={},pe=0,Me=zt(D);pe<Me;pe++)Q?se[D[pe]]=Q[pe]:se[D[pe][0]]=D[pe][1];return se},range:function(D,Q,se){null==Q&&(Q=D||0,D=0),se||(se=Q<D?-1:1);for(var pe=Math.max(Math.ceil((Q-D)/se),0),Me=Array(pe),Ce=0;Ce<pe;Ce++,D+=se)Me[Ce]=D;return Me},chunk:function(D,Q){if(null==Q||Q<1)return[];for(var se=[],pe=0,Me=D.length;pe<Me;)se.push(b.call(D,pe,pe+=Q));return se},mixin:xi,default:ye});return So._=So,So}()}}]);