(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[921],{66921:(P,W,f)=>{"use strict";f.r(W),f.d(W,{CourseModule:()=>tg});var p={};f.r(p),f.d(p,{ellipseWithEllipse:()=>Xo,ellipseWithLine:()=>Or,exists:()=>ar,lineWithLine:()=>sr,pathWithEllipse:()=>_a,pathWithLine:()=>so,pathWithPath:()=>wa,pathWithPolygon:()=>Zo,pathWithPolyline:()=>Ca,pathWithRect:()=>Qo,polygonWithEllipse:()=>zi,polygonWithLine:()=>ri,polygonWithPolygon:()=>ko,polygonWithPolyline:()=>Jo,polygonWithRect:()=>Ko,polylineWithEllipse:()=>ao,polylineWithLine:()=>ki,polylineWithPolyline:()=>Oi,polylineWithRect:()=>Lr,rectWithEllipse:()=>Jr,rectWithLine:()=>Mo,rectWithRect:()=>Ar});var g={};f.r(g),f.d(g,{Curve:()=>Kt,Ellipse:()=>or,Line:()=>bt,Path:()=>It,Point:()=>ye,Polygon:()=>br,Polyline:()=>Tn,Rect:()=>gt,bezier:()=>Wa,ellipse:()=>Po,intersection:()=>ea,line:()=>Hr,normalizeAngle:()=>Xe,point:()=>Kr,random:()=>an,rect:()=>Ga,scale:()=>Ke,snapToGrid:()=>pt,toDeg:()=>Ot,toRad:()=>Lt,types:()=>Pt});var S={};f.r(S),f.d(S,{absolute:()=>ta,bottom:()=>Rf,ellipse:()=>Ff,ellipseSpread:()=>Df,fn:()=>ho,left:()=>ms,line:()=>Gr,right:()=>Aa,top:()=>zs});var E={};f.r(E),f.d(E,{bottom:()=>Hf,inside:()=>Du,insideOriented:()=>zf,left:()=>Bf,manual:()=>Vf,outside:()=>Yl,outsideOriented:()=>jf,radial:()=>xs,radialOriented:()=>Fu,right:()=>Tr,top:()=>Wr});var x={};f.r(x),f.d(x,{manhattan:()=>Ku,metro:()=>td,normal:()=>Oa,oneSide:()=>Xf,orthogonal:()=>Gu});var A={};f.r(A),f.d(A,{curve:()=>qa,jumpover:()=>el,normal:()=>od,rounded:()=>tl,smooth:()=>ac});var k={};f.r(k),f.d(k,{addClass:()=>hc,mask:()=>_i,opacity:()=>sa,stroke:()=>al});var M={};f.r(M),f.d(M,{connectionClosest:()=>vc,connectionLength:()=>pc,connectionPerpendicular:()=>ua,connectionRatio:()=>iu,resolveRef:()=>Na});var H={};f.r(H),f.d(H,{anchor:()=>xc,bbox:()=>bc,boundary:()=>go,rectangle:()=>si});var j={};f.r(j),f.d(j,{bottom:()=>pd,bottomLeft:()=>Sc,bottomRight:()=>Tc,center:()=>_c,left:()=>wc,midSide:()=>Ec,modelCenter:()=>fu,perpendicular:()=>cu,right:()=>ns,top:()=>Cc,topLeft:()=>Ps,topRight:()=>gd});var L=f(69808),K=f(32205),ne=f(6741),fe=f(53696),i=f(5e3),ue=f(23146),me=f(83936),ge=f(25635),ee=f(93075),xe=f(9419),Ie=f(66206),He=f(99848);let _=(()=>{class e{transform(t,r){return t.is_teacher||r.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function Ue(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,t))}}function rt(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ue,3,5,"ng-container",6),i.\u0275\u0275pipe(2,"tuiFilter"),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function nt(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const ot=function(){return[0,0,0,0,0,0]};function ut(e,n){1&e&&i.\u0275\u0275template(0,nt,2,1,"ng-container",6),2&e&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,ot))}let yt=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.route=r,this.courseService=o,this.STATUS=fe.Q,this.courseNameSearch="",this.matchCourseName=(u,c)=>""===c||u.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(me.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(u){return r.courseNameSearch=u}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,rt,3,5,"ng-container",4),i.\u0275\u0275template(7,ut,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",o)}},directives:[ge.K3,ge.wU,ee.NgControlStatus,ee.NgModel,xe.be,L.O5,L.sg,Ie.V],pipes:[He.S,_],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class Mt{static createForm(){return(new ee.FormBuilder).group({code:new ee.FormControl("",[ee.Validators.required])})}static extractData(n){return n.value}}var Yt=f(4024),en=f(769),Dt=f(46693),Ln=f(96063),mr=f(8871);const Fr=["stepper"];function rr(e,n){1&e&&i.\u0275\u0275element(0,"div",5)}function Xn(e,n){1&e&&i.\u0275\u0275element(0,"div",6)}const yr=function(e){return["/course",e]};function Fn(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",7),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8)(4,"a",9),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,yr,t.courseId))}}function $e(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",10),i.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function tt(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",11),i.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"form",12),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onSubmit()}),i.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),i.\u0275\u0275text(6," Enter verification code\xa0"),i.\u0275\u0275element(7,"span",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",8)(10,"button",17),i.\u0275\u0275text(11," Register "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.form),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("showLoader",t.loadingContent)}}function st(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,rr,1,0,"div",3),i.\u0275\u0275template(4,Xn,1,0,"div",4),i.\u0275\u0275template(5,Fn,6,3,"ng-container",1),i.\u0275\u0275template(6,$e,3,0,"ng-container",1),i.\u0275\u0275template(7,tt,12,3,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function _t(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",18),i.\u0275\u0275element(2,"tui-marker-icon",19),i.\u0275\u0275elementStart(3,"h1",20),i.\u0275\u0275text(4," Unable to find the course for registration. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",21),i.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd())}let Ft=(()=>{class e{constructor(t,r,o,u,c){this.route=t,this.router=r,this.courseService=o,this.changeDetector=u,this.notificationsService=c,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=Mt.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1,this.registered=t.course_reg.is_verified,this.blocked=t.course_reg.is_blocked,t.registration_mode===fe.J.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const t=Mt.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,t).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(me.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Yt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Fr,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,st,8,10,"ng-container",1),i.\u0275\u0275template(2,_t,7,0,"ng-container",1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.courseNotFound),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[L.O5,en.Ls,Dt.v0,ne.yS,ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,ge.K3,ge.wU,ee.NgControlStatus,ee.FormControlName,xe.be,Ln.y,mr.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();var qt=f(37080),kt=f(58259),jn=f(59695),fi=f.n(jn),tn=f(85510),Xt=f.n(tn),R=f(17489);const{round:U,floor:re,PI:be}=Math,Ke={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},Xe=function(e){return e%360+(e<0?360:0)},pt=function(e,n){return n*U(e/n)},Ot=function(e){return 180*e/be%360},Lt=function(e,n){return(e=(n=n||!1)?e:e%360)*be/180},an=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return re(Math.random()*(n-e+1)+e)},{cos:hn,sin:nn,atan2:zn}=Math,Nn=function(e,n){var t=Lt(e.y),r=Lt(n.y),c=Lt(n.x-e.x),v=nn(c)*hn(r),m=hn(t)*nn(r)-nn(t)*hn(r)*hn(c),b=Ot(zn(v,m))-22.5;return b<0&&(b+=360),["NE","E","SE","S","SW","W","NW","N"][b=parseInt(b/45)]},Vr=function(e,n){var t=e.x,r=e.y;return(t-=n.x)*t+(r-=n.y)*r},Sn=function(e,n){return Math.sqrt(Vr(e,n))},Pt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Mn,cos:Vn,sin:ir,sqrt:Br,min:qn,max:Kn,atan2:So,round:ga,pow:ro,PI:To}=Math,ye=function(e,n){if(!(this instanceof ye))return new ye(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};ye.fromPolar=function(e,n,t){t=new ye(t);var r=Mn(e*Vn(n)),o=Mn(e*ir(n)),u=Xe(Ot(n));return u<90?o=-o:u<180?(r=-r,o=-o):u<270&&(r=-r),new ye(t.x+r,t.y+o)},ye.random=function(e,n,t,r){return new ye(an(e,n),an(t,r))},ye.prototype={type:Pt.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new ye(e[0]);for(var t=null,r=1/0,o=0;o<n;o++){var u=new ye(e[o]),c=this.squaredDistance(u);c<r&&(t=u,r=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=qn(Kn(this.x,e.x),e.x+e.width),this.y=qn(Kn(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return Nn(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new ye(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new ye(this.x-(e||0),this.y-(n||0))},distance:function(e){return Sn(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new ye((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return Br(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Mn(e.x-this.x)+Mn(e.y-this.y)},move:function(e,n){var t=Lt(new ye(e).theta(this));return this.offset(Vn(t)*n,-ir(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new ye(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new ye(0,0),n=Lt(Xe(-n));var t=Vn(n),r=ir(n),u=r*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=u,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=ro(10,e)}return this.x=ga(this.x*n)/n,this.y=ga(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new ye(t)||new ye(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=pt(this.x,e),this.y=pt(this.y,n||e),this},squaredDistance:function(e){return Vr(this,e)},theta:function(e){e=new ye(e);var r=So(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*To+r),180*r/To},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ye(e)||new ye(0,0);var n=this.x,t=this.y;return this.x=Br((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=Lt(e.theta(new ye(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new ye(0,0).angleBetween(this,e)}},ye.prototype.translate=ye.prototype.offset;const Kr=ye,{max:Vi,min:Eo}=Math,bt=function(e,n){return this instanceof bt?e instanceof bt?new bt(e.start,e.end):(this.start=new ye(e),void(this.end=new ye(n))):new bt(e,n)};bt.prototype={type:Pt.Line,angle:function(){var e=new ye(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=Eo(this.start.x,this.end.x),n=Eo(this.start.y,this.end.y),t=Vi(this.start.x,this.end.x),r=Vi(this.start.y,this.end.y);return new gt(e,n,t-e,r-n)},bearing:function(){return Nn(this.start,this.end)},clone:function(){return new bt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new bt(this.start,e).vector()),t=Eo(1,Vi(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var r=this.length();return!(new bt(n,e).length()>r||new bt(e,t).length()>r)},divideAt:function(e){var n=this.pointAt(e);return[new bt(this.start,n),new bt(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new bt(this.start,n),new bt(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof bt&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new ye(this.end.x-this.start.x,this.end.y-this.start.y),t=new ye(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*t.y-n.y*t.x,o=new ye(e.start.x-this.start.x,e.start.y-this.start.y),u=o.x*t.y-o.y*t.x,c=o.x*n.y-o.y*n.x;if(0===r||u*r<0||c*r<0)return null;if(r>0){if(u>r||c>r)return null}else if(u<r||c<r)return null;return[new ye(this.start.x+u*n.x/r,this.start.y+u*n.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Sn(this.start,this.end)},midpoint:function(){return new ye((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:r}=n,o=t.clone().rotate(r,270),u=r.clone().rotate(t,90);return t.move(u,e),r.move(o,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,r=!0;e<0&&(r=!1,e=-e);var o=this.length();return e>=o?r?t.clone():n.clone():this.pointAt((r?e:o-e)/o)},pointOffset:function(e){e=new ye(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return Vr(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAt(e),o=new bt(n,t);return o.translate(r.x-n.x,r.y-n.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAtLength(e),o=new bt(n,t);return o.translate(r.x-n.x,r.y-n.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new ye(this.end.x-this.start.x,this.end.y-this.start.y)}},bt.prototype.intersection=bt.prototype.intersect;const Hr=bt,{sqrt:io,round:oo,pow:Bi}=Math,or=function(e,n,t){return this instanceof or?e instanceof or?new or(new ye(e.x,e.y),e.a,e.b):(e=new ye(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new or(e,n,t)};or.fromRect=function(e){return e=new gt(e),new or(e.center(),e.width/2,e.height/2)},or.prototype={type:Pt.Ellipse,bbox:function(){return new gt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ye(this.x,this.y)},clone:function(){return new or(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,r=e.end,o=this.a,u=this.b,c=e.vector(),v=t.difference(new ye(this)),m=new ye(c.x/(o*o),c.y/(u*u)),T=new ye(v.x/(o*o),v.y/(u*u)),I=c.dot(m),b=c.dot(T),te=b*b-I*(v.dot(T)-1);if(te<0)return null;if(te>0){var oe=io(te),Te=(-b-oe)/I,Pe=(-b+oe)/I;if((Te<0||1<Te)&&(Pe<0||1<Pe))return null;0<=Te&&Te<=1&&n.push(t.lerp(r,Te)),0<=Pe&&Pe<=1&&n.push(t.lerp(r,Pe))}else{var Be=-b/I;if(!(0<=Be&&Be<=1))return null;n.push(t.lerp(r,Be))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new ye(e),n&&e.rotate(new ye(this.x,this.y),n);var o,t=e.x-this.x,r=e.y-this.y;if(0===t)return o=this.bbox().pointNearestToPoint(e),n?o.rotate(new ye(this.x,this.y),-n):o;var u=r/t,T=io(1/(1/(this.a*this.a)+u*u/(this.b*this.b)));return o=new ye(this.x+(T=t<0?-T:T),this.y+u*T),n?o.rotate(new ye(this.x,this.y),-n):o},normalizedDistance:function(e){var n=e.x,t=e.y,r=this.a,o=this.b,u=this.x,c=this.y;return(n-u)*(n-u)/(r*r)+(t-c)*(t-c)/(o*o)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Bi(10,e)}return this.x=oo(this.x*n)/n,this.y=oo(this.y*n)/n,this.a=oo(this.a*n)/n,this.b=oo(this.b*n)/n,this},tangentTheta:function(e){var b,G,t=e.x,r=e.y,o=this.a,u=this.b,c=this.bbox().center(),v=c.x,m=c.y;return t>c.x+o/2||t<c.x-o/2?G=o*o/(t-v)-o*o*(r-m)*((b=t>c.x?r-30:r+30)-m)/(u*u*(t-v))+v:b=u*u/(r-m)-u*u*(t-v)*((G=r>c.y?t+30:t-30)-v)/(o*o*(r-m))+m,new ye(G,b).theta(e)},toString:function(){return new ye(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Po=or,{abs:xr,cos:va,sin:ma,min:Pr,max:$o,round:Hi,pow:Yo}=Math,gt=function(e,n,t,r){if(!(this instanceof gt))return new gt(e,n,t,r);Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===r?0:r};gt.fromEllipse=function(e){return e=new or(e),new gt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},gt.fromPointUnion=function(...e){if(0===e.length)return null;const n=new ye;let t,r,o,u;t=r=1/0,o=u=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const v=n.x,m=n.y;v<t&&(t=v),v>o&&(o=v),m<r&&(r=m),m>u&&(u=m)}return new gt(t,r,o-t,u-r)},gt.fromRectUnion=function(...e){if(0===e.length)return null;const n=new gt;let t,r,o,u;t=r=1/0,o=u=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const v=n.x,m=n.y,T=v+n.width,I=m+n.height;v<t&&(t=v),T>o&&(o=T),m<r&&(r=m),I>u&&(u=I)}return new gt(t,r,o-t,u-r)},gt.prototype={type:Pt.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,r=Lt(e),o=xr(ma(r)),u=xr(va(r)),c=n*u+t*o,v=n*o+t*u;return this.x+=(n-c)/2,this.y+=(t-v)/2,this.width=c,this.height=v,this},bottomLeft:function(){return new ye(this.x,this.y+this.height)},bottomLine:function(){return new bt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ye(this.x+this.width/2,this.y+this.height)},center:function(){return new ye(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new gt(this)},containsPoint:function(e){return(e=new ye(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new gt(this).normalize(),t=new gt(e).normalize(),r=n.width,o=n.height,u=t.width,c=t.height;if(!(r&&o&&u&&c))return!1;var v=n.x,m=n.y,T=t.x,I=t.y;return u+=T,r+=v,c+=I,o+=m,v<=T&&u<=r&&m<=I&&c<=o},corner:function(){return new ye(this.x+this.width,this.y+this.height)},equals:function(e){var n=new gt(this).normalize(),t=new gt(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),r=e.origin(),o=e.corner();if(o.x<=n.x||o.y<=n.y||r.x>=t.x||r.y>=t.y)return null;var u=$o(n.x,r.x),c=$o(n.y,r.y);return new gt(u,c,Pr(t.x,o.x)-u,Pr(t.y,o.y)-c)},intersectionWithLine:function(e){var u,c,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],r=[],o=[],v=t.length;for(c=0;c<v;c++)null!==(u=e.intersect(t[c]))&&o.indexOf(u.toString())<0&&(r.push(u),o.push(u.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new ye(e);var r,t=new ye(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],u=new bt(t,e),c=o.length-1;c>=0;--c){var v=o[c].intersection(u);if(null!==v){r=v;break}}return r&&n&&r.rotate(t,-n),r},leftLine:function(){return new bt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ye(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new gt(e),n||(n=e.center());var t,r,o,u,c,v,m,T,I=n.x,b=n.y;t=r=o=u=c=v=m=T=1/0;var G=e.topLeft();G.x<I&&(t=(this.x-I)/(G.x-I)),G.y<b&&(c=(this.y-b)/(G.y-b));var te=e.bottomRight();te.x>I&&(r=(this.x+this.width-I)/(te.x-I)),te.y>b&&(v=(this.y+this.height-b)/(te.y-b));var oe=e.topRight();oe.x>I&&(o=(this.x+this.width-I)/(oe.x-I)),oe.y<b&&(m=(this.y-b)/(oe.y-b));var Te=e.bottomLeft();return Te.x<I&&(u=(this.x-I)/(Te.x-I)),Te.y>b&&(T=(this.y+this.height-b)/(Te.y-b)),{sx:Pr(t,r,o,u),sy:Pr(c,v,m,T)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return Pr(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,r=-this.height),this.x=e,this.y=n,this.width=t,this.height=r,this},offset:function(e,n){return ye.prototype.offset.call(this,e,n)},origin:function(){return new ye(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ye(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new ye(this.x+this.width,e.y);case"left":return new ye(this.x,e.y);case"bottom":return new ye(e.x,this.y+this.height);case"top":return new ye(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new bt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ye(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Yo(10,e)}return this.x=Hi(this.x*n)/n,this.y=Hi(this.y*n)/n,this.width=Hi(this.width*n)/n,this.height=Hi(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new ye(e);var t=this.x+this.width-e.x,r=e.y-this.y,u=e.x-this.x,c="left";return t<u&&(u=t,c="right"),r<u&&(u=r,c="top"),this.y+this.height-e.y<u&&(c="bottom"),c},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),r=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=r.x-t.x,this.height=r.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new bt(this.topLeft(),this.topRight())},topMiddle:function(){return new ye(this.x+this.width/2,this.y)},topRight:function(){return new ye(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return gt.fromRectUnion(this,e)},update:function(e,n,t,r){return Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=r||0,this}},gt.prototype.bottomRight=gt.prototype.corner,gt.prototype.topLeft=gt.prototype.origin,gt.prototype.translate=gt.prototype.offset;const Ga=gt;function Si(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),r=t.length;for(let o=0;o<r;o+=2)n.push({x:+t[o],y:+t[o+1]});return n}function ya(e){const n=e.length;if(0===n)return[];const t=[];for(let r=0;r<n;r++){const o=e[r].clone();t.push(o)}return t}function xa(e){const{abs:n}=Math;var t,r,u,o=e.length;if(0===o)return[];for(t=0;t<o;t++)(void 0===u||e[t].y<u.y||e[t].y===u.y&&e[t].x>u.x)&&(u=e[t]);var c=[];for(t=0;t<o;t++){var v=u.theta(e[t]);0===v&&(v=360),c.push([e[t],t,v])}c.sort(function(d,C){var N=d[2]-C[2];return 0===N&&(N=C[1]-d[1]),N}),c.length>2&&c.unshift(c[c.length-1]);for(var G,te,oe,Te,Pe,Be,I={},b=[];0!==c.length;)if(te=(G=c.pop())[0],!I.hasOwnProperty(G[0]+"@@"+G[1]))for(var Re=!1;!Re;)if(b.length<2)b.push(G),Re=!0;else{Te=(oe=b.pop())[0];var O=(Be=(Pe=b.pop())[0]).cross(Te,te);if(O<0)b.push(Pe),b.push(oe),b.push(G),Re=!0;else if(0===O){var J=Te.angleBetween(Be,te);n(J-180)<1e-10||Te.equals(te)||Be.equals(Te)?(I[oe[0]+"@@"+oe[1]]=Te,b.push(Pe)):n((J+1)%360-1)<1e-10&&(b.push(Pe),c.push(oe))}else I[oe[0]+"@@"+oe[1]]=Te,b.push(Pe)}b.length>2&&b.pop();var ie,ve=-1;for(r=b.length,t=0;t<r;t++){var Me=b[t][1];(void 0===ie||Me<ie)&&(ie=Me,ve=t)}var Oe=[];if(ve>0){var Ge=b.slice(ve),a=b.slice(0,ve);Oe=Ge.concat(a)}else Oe=b;var s=[];for(r=Oe.length,t=0;t<r;t++)s.push(Oe[t][0]);return s}const Tn=function(e){return this instanceof Tn?"string"==typeof e?new Tn.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new Tn(e)};Tn.parse=function(e){return new Tn(Si(e))},Tn.fromRect=function(e){return new Tn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},Tn.prototype={type:Pt.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,r=-1/0,o=this.points,u=o.length;if(0===u)return null;for(var c=0;c<u;c++){var v=o[c],m=v.x,T=v.y;m<e&&(e=m),m>n&&(n=m),T<t&&(t=T),T>r&&(r=T)}return new gt(e,t,n-e,r-t)},clone:function(){return new Tn(ya(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var r,o=1/0,u=0,c=t-1,v=0;v<c;v++){var m=new bt(n[v],n[v+1]),T=m.length(),I=m.closestPointNormalizedLength(e),G=m.pointAt(I).squaredDistance(e);G<o&&(o=G,r=u+I*T),u+=T}return r},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var r=e.x,o=e.y,u=t-1,c=0,v=0,m=new bt,T=new bt,I=new ye;c<t;c++){var b=n[u],G=n[c];if(e.equals(b)||(m.start=b,m.end=G,m.containsPoint(e)))return!0;if(o<=b.y&&o>G.y||o>b.y&&o<=G.y){var te=b.x-r>G.x-r?b.x-r:G.x-r;te>=0&&(I.x=r+te,I.y=o,T.start=e,T.end=I,m.intersect(T)&&v++)}u=c}return v%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Tn(xa(this.points))},equals:function(e){if(!e)return!1;var n=this.points,r=n.length;if(e.points.length!==r)return!1;for(var o=0;o<r;o++)if(!n[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var n=new bt(e),t=[],r=this.lengthPoints(),o=new bt,u=0,c=r.length-1;u<c;u++){o.start=r[u],o.end=r[u+1];var v=n.intersectionWithLine(o);v&&t.push(v[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new bt,r=n-1,o=0;o<r;o++)if(t.start=e[o],t.end=e[o+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,r=n-1,o=0;o<r;o++)t+=e[o].distance(e[o+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var o=0,u=t-1,c=0;c<u;c++){var v=r?c:u-1-c,m=n[v],T=n[v+1],I=new bt(m,T),b=m.distance(T);if(e<=o+b)return I.pointAtLength((r?1:-1)*(e-o));o+=b}return(r?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.points,o=r.length,u=0;u<o;u++)r[u].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let r=0;for(;n[r+2];){const u=r+1,m=n[u];new bt(n[r],n[r+2]).closestPoint(m).distance(m)<=t?n.splice(u,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o,u=0,c=t-1,v=0;v<c;v++){var m=r?v:c-1-v,T=n[m],I=n[m+1],b=new bt(T,I),G=T.distance(I);if(b.isDifferentiable()){if(e<=u+G)return b.tangentAtLength((r?1:-1)*(e-u));o=b}u+=G}return o?o.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",r=0;r<n;r++){var o=e[r];t+=o.x+","+o.y+" "}return t.trim()}},Object.defineProperty(Tn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Tn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:Io,sqrt:ps,min:Ti,max:ji,pow:Ei}=Math,Kt=function(e,n,t,r){return this instanceof Kt?e instanceof Kt?new Kt(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new ye(e),this.controlPoint1=new ye(n),this.controlPoint2=new ye(t),void(this.end=new ye(r))):new Kt(e,n,t,r)};function jr(e){var n,t,r=[];for(t=arguments.length,n=1;n<t;n++)r.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(t=r.length,n=0;n<t;n++){var c,v,u=r[n];for(v in u)u.hasOwnProperty(v)&&(delete o[v],c=Object.getOwnPropertyDescriptor(u,v),Object.defineProperty(o,v,c))}return o}Kt.throughPoints=function(){function n(t){var r=t.length,o=[],u=[],c=2;o[0]=t[0]/c;for(var v=1;v<r;v++)u[v]=1/c,o[v]=(t[v]-o[v-1])/(c=(v<r-1?4:3.5)-u[v]);for(v=1;v<r;v++)o[r-v-1]-=u[r-v]*o[r-v];return o}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function e(t){var c,r=[],o=[],u=t.length-1;if(1==u)return r[0]=new ye((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new ye(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,o];var v=[];for(c=1;c<u-1;c++)v[c]=4*t[c].x+2*t[c+1].x;v[0]=t[0].x+2*t[1].x,v[u-1]=(8*t[u-1].x+t[u].x)/2;var m=n(v);for(c=1;c<u-1;++c)v[c]=4*t[c].y+2*t[c+1].y;v[0]=t[0].y+2*t[1].y,v[u-1]=(8*t[u-1].y+t[u].y)/2;var T=n(v);for(c=0;c<u;c++)r.push(new ye(m[c],T[c])),o.push(c<u-1?new ye(2*t[c+1].x-m[c+1],2*t[c+1].y-T[c+1]):new ye((t[u].x+m[u-1])/2,(t[u].y+T[u-1])/2));return[r,o]}(t),o=[],u=r[0].length,c=0;c<u;c++){var v=new ye(r[0][c].x,r[0][c].y),m=new ye(r[1][c].x,r[1][c].y);o.push(new Kt(t[c],v,m,t[c+1]))}return o}}(),Kt.prototype={type:Pt.Curve,bbox:function(){for(var Te,Pe,Be,Re,O,z,J,ie,e=this.start,n=this.controlPoint1,t=this.controlPoint2,r=this.end,o=e.x,u=e.y,c=n.x,v=n.y,m=t.x,T=t.y,I=r.x,b=r.y,G=new Array,te=new Array,oe=[new Array,new Array],ve=0;ve<2;++ve)if(0===ve?(Pe=6*o-12*c+6*m,Te=-3*o+9*c-9*m+3*I,Be=3*c-3*o):(Pe=6*u-12*v+6*T,Te=-3*u+9*v-9*T+3*b,Be=3*v-3*u),Io(Te)<1e-12){if(Io(Pe)<1e-12)continue;0<(Re=-Be/Pe)&&Re<1&&te.push(Re)}else ie=ps(J=Pe*Pe-4*Be*Te),!(J<0)&&(0<(O=(-Pe+ie)/(2*Te))&&O<1&&te.push(O),0<(z=(-Pe-ie)/(2*Te))&&z<1&&te.push(z));for(var Ge,a,s,Me=te.length,Oe=Me;Me--;)oe[0][Me]=a=(Ge=1-(Re=te[Me]))*Ge*Ge*o+3*Ge*Ge*Re*c+3*Ge*Re*Re*m+Re*Re*Re*I,oe[1][Me]=s=Ge*Ge*Ge*u+3*Ge*Ge*Re*v+3*Ge*Re*Re*T+Re*Re*Re*b,G[Me]={X:a,Y:s};te[Oe]=0,te[Oe+1]=1,G[Oe]={X:o,Y:u},G[Oe+1]={X:I,Y:b},oe[0][Oe]=o,oe[1][Oe]=u,oe[0][Oe+1]=I,oe[1][Oe+1]=b,te.length=Oe+2,oe[0].length=Oe+2,oe[1].length=Oe+2,G.length=Oe+2;var d=Ti.apply(null,oe[0]),C=Ti.apply(null,oe[1]),N=ji.apply(null,oe[0]),Y=ji.apply(null,oe[1]);return new gt(d,C,N-d,Y-C)},clone:function(){return new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},u=this.closestPointLength(e,o);if(!u)return 0;var c=this.length(o);return 0===c?0:u/c},closestPointT:function(e,n){for(var o,u,c,v,m,T,I,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,r=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,b=r.length,G=b?1/b:0,te=0;te<b;te++){var oe=r[te],Te=oe.start.distance(e),Pe=oe.end.distance(e),Be=Te+Pe;(!I||Be<I)&&(o=oe,u=te*G,c=(te+1)*G,v=Te,m=Pe,T=oe.start.distance(oe.end),I=Be)}for(var Re=Ei(10,-t);;){var O=v?Io(v-m)/v:0,z=m?Io(v-m)/m:0;if(O<Re||z<Re||!v||v<T*Re||!m||m<T*Re)return v<=m?u:c;var Oe=o.divide(.5);G/=2;var Ge=Oe[0].start.distance(e),a=Oe[0].end.distance(e),s=Ge+a,d=Oe[1].start.distance(e),C=Oe[1].end.distance(e);s<=d+C?(o=Oe[0],c-=G,v=Ge,m=a):(o=Oe[1],u+=G,v=d,m=C)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return[new Kt(n,n,n,n),new Kt(n,t,r,o)];if(e>=1)return[new Kt(n,t,r,o),new Kt(o,o,o,o)];var u=this.getSkeletonPoints(e),m=u.divider,T=u.dividerControlPoint1,I=u.dividerControlPoint2;return[new Kt(n,u.startControlPoint1,u.startControlPoint2,m),new Kt(m,T,I,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var u=new bt(n,t).pointAt(e),c=new bt(t,r).pointAt(e),v=new bt(r,o).pointAt(e),m=new bt(u,c).pointAt(e),T=new bt(c,v).pointAt(e);return{startControlPoint1:u,startControlPoint2:m,divider:new bt(m,T).pointAt(e),dividerControlPoint1:T,dividerControlPoint2:v}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var r=this.endpointDistance(),o=Ei(10,-n),u=0;;){u+=1;for(var c=[],v=t.length,m=0;m<v;m++){var I=t[m].divide(.5);c.push(I[0],I[1])}for(var b=0,G=c.length,te=0;te<G;te++)b+=c[te].endpointDistance();if(u>1&&(0!==b?(b-r)/b:0)<o)return c;t=c,r=b}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,o=t.length,u=0;u<o;u++)r+=t[u].endpointDistance();return r},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,o=n.divider,u=new bt(t,n.dividerControlPoint1);return u.translate(o.x-t.x,o.y-t.y),u},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},u=this.length(o);return this.tAtLength(u*e,o)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var c,v,m,T,I,r=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.subdivisions?this.getSubdivisions({precision:r}):n.subdivisions,u={precision:r,subdivisions:o},b=0,G=o.length,te=1/G,oe=0;oe<G;oe++){var Te=t?oe:G-1-oe,Pe=o[oe],Be=Pe.endpointDistance();if(e<=b+Be){c=Pe,v=Te*te,m=(Te+1)*te,T=t?e-b:Be+b-e,I=t?Be+b-e:e-b;break}b+=Be}if(!c)return t?1:0;for(var Re=this.length(u),O=Ei(10,-r);;){if((0!==Re?T/Re:0)<O)return v;if((0!==Re?I/Re:0)<O)return m;var J,ie,ve=c.divide(.5);te/=2;var Me=ve[0].endpointDistance(),Oe=ve[1].endpointDistance();T<=Me?(c=ve[0],m-=te,ie=Me-(J=T)):(c=ve[1],v+=te,ie=Oe-(J=T-Me)),T=J,I=ie}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[t[0].start.clone()],o=t.length,u=0;u<o;u++)r.push(t[u].end.clone());return r},toPolyline:function(e){return new Tn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},Kt.prototype.divide=Kt.prototype.divideAtT;const It=function(e){if(!(this instanceof It))return new It(e);if("string"==typeof e)return new It.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(v,m){return v.concat(m)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var o=null;for(n=0;n<t;n++){var u=e[n];if(!(u instanceof bt||u instanceof Kt))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(It.createSegment("M",u.start)),o&&!o.end.equals(u.start)&&this.appendSegment(It.createSegment("M",u.start)),u instanceof bt?this.appendSegment(It.createSegment("L",u.end)):u instanceof Kt&&this.appendSegment(It.createSegment("C",u.controlPoint1,u.controlPoint2,u.end)),o=u}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof bt)this.appendSegment(It.createSegment("M",e.start)),this.appendSegment(It.createSegment("L",e.end));else if(e instanceof Kt)this.appendSegment(It.createSegment("M",e.start)),this.appendSegment(It.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof Tn))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(It.createSegment(0===n?"M":"L",e.points[n]))}}};function Ir(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}It.parse=function(e){if(!e)return new It;for(var n=new It,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=r.length,u=0;u<o;u++){var m=r[u].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),T=It.createSegment.apply(this,m);n.appendSegment(T)}return n},It.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=It.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],r=arguments.length,o=1;o<r;o++)t.push(arguments[o]);return Ir(n,t)},It.prototype={type:Pt.Path,appendSegment:function(e){var r,n=this.segments,t=n.length,o=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(T,I){return T.concat(I)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,v=0;v<c;v++)r=this.prepareSegment(e[v],o,null),n.push(r),o=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,o,null),n.push(r)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,r=0;r<n;r++){var o=e[r];if(o.isVisible){var u=o.bbox();t=t?t.union(u):u}}if(t)return t;var c=e[n-1];return new gt(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new It,r=0;r<n;r++){var o=e[r].clone();t.appendSegment(o)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},u=this.closestPointT(e,o);return u?this.lengthAtT(u,o):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},u=this.closestPointLength(e,o);if(0===u)return 0;var c=this.length(o);return 0===c?0:u/c},closestPointT:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,v=1/0,m=0;m<r;m++){var T=t[m];if(T.isVisible){var b=T.closestPointT(e,{precision:o,subdivisions:u[m]}),G=T.pointAtT(b),te=new bt(G,e).squaredLength();te<v&&(c={segmentIndex:m,value:b},v=te)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,v=1/0,m=0;m<r;m++){var T=t[m],I=u[m];if(T.isDifferentiable()){var b=T.closestPointT(e,{precision:o,subdivisions:I}),G=T.pointAtT(b),te=new bt(G,e).squaredLength();te<v&&(c=T.tangentAtT(b),v=te)}}return c||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var r=t.length,o=0,u=0;u<r;u++)t[u].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},v=this.length(c);return this.divideAtLength(v*e,c)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var r=!0;e<0&&(r=!1,e=-e);var c,v,T,I,b,G,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,m=0;for(c=0;c<t;c++){var oe=r?c:t-1-c;v=this.getSegment(oe);var Te=u[oe],Pe=v.length({precision:o,subdivisions:Te});if(v.isDifferentiable()&&(b=v,G=oe,e<=m+Pe)){I=oe,T=v.divideAtLength((r?1:-1)*(e-m),{precision:o,subdivisions:Te});break}m+=Pe}if(!b)return null;T||(I=G,T=b.divideAtT(r?1:0));var Be=this.clone();Be.replaceSegment(I,T);var Re=I,O=I+1,z=I+2;T[0].isDifferentiable()||(Be.removeSegment(Re),O-=1,z-=1);var J=Be.getSegment(O).start;Be.insertSegment(O,It.createSegment("M",J)),z+=1,T[1].isDifferentiable()||(Be.removeSegment(z-1),z-=1);var ie=z-Re-1;for(c=z;c<Be.segments.length;c++){var ve=this.getSegment(c-ie);if("Z"===(v=Be.getSegment(c)).type&&!ve.subpathStartSegment.end.equals(v.subpathStartSegment.end)){var Me=It.createSegment("L",ve.end);Be.replaceSegment(c,Me)}}return[new It(Be.segments.slice(0,O)),new It(Be.segments.slice(O))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,r=n.length;if(t.length!==r)return!1;for(var o=0;o<r;o++){var u=n[o],c=t[o];if(u.type!==c.type||!u.equals(c))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],u=0;u<t;u++){var v=n[u].getSubdivisions({precision:r});o.push(v)}return o},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,r=[];for(let o=0;o<t;o++){const u=n[o];u.isSubpathStart?r.push(new It(u)):r[r.length-1].appendSegment(u)}return r},insertSegment:function(e,n){var t=this.segments,r=t.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var o,u=null,c=null;if(0!==r&&(c=e>=1?(u=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(I,b){return I.concat(b)},[]))[0].isSegment)throw new Error("Segments required.");for(var v=n.length,m=0;m<v;m++)o=this.prepareSegment(n[m],u,c),t.splice(e+m,0,o),u=o}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,u,c),t.splice(e,0,o)}},intersectionWithLine:function(e,n){var t=null,r=this.toPolylines(n);if(!r)return null;for(var o=0,u=r.length;o<u;o++){var v=e.intersect(r[o]);v&&(t||(t=[]),Array.isArray(v)?Array.prototype.push.apply(t,v):t.push(v))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=0,c=0;c<t;c++)u+=n[c].length({subdivisions:o[c]});return u},lengthAtT:function(e,n){var t=this.segments,r=t.length;if(0===r)return 0;var o=e.segmentIndex;if(o<0)return 0;var u=e.value;o>=r?(o=r-1,u=1):u<0?u=0:u>1&&(u=1);for(var c=void 0===(n=n||{}).precision?this.PRECISION:n.precision,v=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):n.segmentSubdivisions,T=0,I=0;I<o;I++){var b=t[I];T+=b.length({precisison:c,subdivisions:v[I]})}return T+(b=t[o]).lengthAtT(u,{precisison:c,subdivisions:v[o]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},v=this.length(c);return this.pointAtLength(v*e,c)},pointAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var v,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,m=0,T=0;T<r;T++){var I=o?T:r-1-T,b=t[I],G=c[I],te=b.length({precision:u,subdivisions:G});if(b.isVisible){if(e<=m+te)return b.pointAtLength((o?1:-1)*(e-m),{precision:u,subdivisions:G});v=b}m+=te}return v?o?v.end:v.start:t[r-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].pointAtT(0);if(r>=t)return n[t-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].pointAtT(o)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=t),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var r=n.splice(e,1)[0],o=r.previousSegment,u=r.nextSegment;o&&(o.nextSegment=u),u&&(u.previousSegment=o),r.isSubpathStart&&u&&this.updateSubpathStartSegment(u)},replaceSegment:function(e,n){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var o,u=t[e],c=u.previousSegment,v=u.nextSegment,m=u.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(G,te){return G.concat(te)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var T=n.length,I=0;I<T;I++)o=this.prepareSegment(n[I],c,v),t.splice(e+I,0,o),c=o,m&&o.isSubpathStart&&(m=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,c,v),t.splice(e,1,o),m&&o.isSubpathStart&&(m=!1)}m&&v&&this.updateSubpathStartSegment(v)},round:function(e){for(var n=this.segments,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.segments,o=r.length,u=0;u<o;u++)r[u].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},v=this.length(c);return this.segmentIndexAtLength(v*e,c)},segmentIndexAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,v=null,m=0,T=0;T<r;T++){var I=o?T:r-1-T,b=t[I],te=b.length({precision:u,subdivisions:c[I]});if(b.isVisible){if(e<=m+te)return I;v=I}m+=te}return v},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},v=this.length(c);return this.tangentAtLength(v*e,c)},tangentAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var v,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,m=0,T=0;T<r;T++){var I=o?T:r-1-T,b=t[I],G=c[I],te=b.length({precision:u,subdivisions:G});if(b.isDifferentiable()){if(e<=m+te)return b.tangentAtLength((o?1:-1)*(e-m),{precision:u,subdivisions:G});v=b}m+=te}return v?v.tangentAtT(o?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].tangentAtT(0);if(r>=t)return n[t-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].tangentAtT(o)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=[],c=[],v=0;v<t;v++){var m=n[v];if(m.isVisible){var T=o[v];if(T.length>0){var I=T.map(function(b){return b.start});Array.prototype.push.apply(c,I)}else c.push(m.start)}else c.length>0&&(c.push(n[v-1].end),u.push(c),c=[])}return c.length>0&&(c.push(this.end),u.push(c)),u},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var r=0,o=t.length;r<o;r++)n.push(new Tn(t[r]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",r=0;r<n;r++)t+=e[r].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,It.createSegment("M",0,0)),this}},Object.defineProperty(It.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var r=e[t];if(r.isVisible)return r.start}return e[n-1].end}}),Object.defineProperty(It.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var r=e[t];if(r.isVisible)return r.end}return e[n-1].end}});var di={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(di,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(di,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(di,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var dn=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof dn))return Ir(dn,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof bt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ye(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(Ir(dn,o));return r}if(1===n)return this.end=new ye(e[0]),this;for(r=[],t=0;t<n;t+=1)r.push(new dn(e[t]));return r},Pi={clone:function(){return new dn(this.end)},divideAt:function(e){var t=new bt(this.start,this.end).divideAt(e);return[new dn(t[0]),new dn(t[1])]},divideAtLength:function(e){var t=new bt(this.start,this.end).divideAtLength(e);return[new dn(t[0]),new dn(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(Pi,"type",{configurable:!0,enumerable:!0,value:"L"}),dn.prototype=jr(di,bt.prototype,Pi);var pr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof pr))return Ir(pr,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,u;if(e[0]instanceof Kt){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new ye(+e[0],+e[1]),this.controlPoint2=new ye(+e[2],+e[3]),this.end=new ye(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=6)o=e.slice(t,t+6),r.push(Ir(pr,o));return r}if(3===n)return this.controlPoint1=new ye(e[0]),this.controlPoint2=new ye(e[1]),this.end=new ye(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(r=[],t=0;t<n;t+=3)u=e.slice(t,t+3),r.push(Ir(pr,u));return r},ba={clone:function(){return new pr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var r=new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new pr(r[0]),new pr(r[1])]},divideAtLength:function(e,n){var r=new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new pr(r[0]),new pr(r[1])]},divideAtT:function(e){var t=new Kt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new pr(t[0]),new pr(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(ba,"type",{configurable:!0,enumerable:!0,value:"C"}),pr.prototype=jr(di,Kt.prototype,ba);var Ii=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Ii))return Ir(Ii,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,u;if(e[0]instanceof bt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof Kt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ye(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(Ir(0===t?Ii:dn,o));return r}if(1===n)return this.end=new ye(e[0]),this;for(r=[],t=0;t<n;t+=1)u=e[t],r.push(0===t?new Ii(u):new dn(u));return r},Ai={bbox:function(){return null},clone:function(){return new Ii(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(Ai,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Ai,"type",{configurable:!0,enumerable:!0,value:"M"}),Ii.prototype=jr(di,Ai);var hi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof hi))return Ir(hi,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},Mi={clone:function(){return new hi},divideAt:function(e){var t=new bt(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new dn(t[0]):this.clone(),new dn(t[1])]},divideAtLength:function(e){var t=new bt(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new dn(t[0]):this.clone(),new dn(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Mi,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Mi,"type",{configurable:!0,enumerable:!0,value:"Z"}),hi.prototype=jr(di,bt.prototype,Mi);var Ao=It.segmentTypes={L:dn,C:pr,M:Ii,Z:hi,z:hi};It.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Ao).join("")+",.]*$"),It.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const Wa={curveThroughPoints:function(e){return console.warn("deprecated"),new It(Kt.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,n=[],t=[],r=e.length-1;if(1==r)return n[0]=new ye((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new ye(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var u=[];for(o=1;o<r-1;o++)u[o]=4*e[o].x+2*e[o+1].x;u[0]=e[0].x+2*e[1].x,u[r-1]=(8*e[r-1].x+e[r].x)/2;var c=this.getFirstControlPoints(u);for(o=1;o<r-1;++o)u[o]=4*e[o].y+2*e[o+1].y;u[0]=e[0].y+2*e[1].y,u[r-1]=(8*e[r-1].y+e[r].y)/2;var v=this.getFirstControlPoints(u);for(o=0;o<r;o++)n.push(new ye(c[o],v[o])),t.push(o<r-1?new ye(2*e[o+1].x-c[o+1],2*e[o+1].y-v[o+1]):new ye((e[r].x+c[r-1])/2,(e[r].y+v[r-1])/2));return[n,t]},getCurveDivider:function(e,n,t,r){console.warn("deprecated");var o=new Kt(e,n,t,r);return function(c){var v=o.divide(c);return[{p0:v[0].start,p1:v[0].controlPoint1,p2:v[0].controlPoint2,p3:v[0].end},{p0:v[1].start,p1:v[1].controlPoint1,p2:v[1].controlPoint2,p3:v[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],r=[],o=2;t[0]=e[0]/o;for(var u=1;u<n;u++)r[u]=1/o,t[u]=(e[u]-t[u-1])/(o=(u<n-1?4:3.5)-r[u]);for(u=1;u<n;u++)t[n-u-1]-=r[n-u]*t[n-u];return t},getInversionSolver:function(e,n,t,r){console.warn("deprecated");var o=new Kt(e,n,t,r);return function(c){return o.closestPointT(c)}}},br=function(e){return this instanceof br?"string"==typeof e?new br.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new br(e)};function ar(e,n,t,r){switch(e.type){case Pt.Line:if(n.type===Pt.Line)return sr(e,n);break;case Pt.Ellipse:switch(n.type){case Pt.Line:return Or(e,n);case Pt.Ellipse:return Xo(e,n)}break;case Pt.Rect:switch(n.type){case Pt.Line:return Mo(e,n);case Pt.Ellipse:return Jr(e,n);case Pt.Rect:return Ar(e,n)}break;case Pt.Polyline:switch(n.type){case Pt.Line:return ki(e,n);case Pt.Ellipse:return ao(e,n);case Pt.Rect:return Lr(e,n);case Pt.Polyline:return Oi(e,n)}break;case Pt.Polygon:switch(n.type){case Pt.Line:return ri(e,n);case Pt.Ellipse:return zi(e,n);case Pt.Rect:return Ko(e,n);case Pt.Polyline:return Jo(e,n);case Pt.Polygon:return ko(e,n)}break;case Pt.Path:switch(n.type){case Pt.Line:return so(e,n,t);case Pt.Ellipse:return _a(e,n,t);case Pt.Rect:return Qo(e,n,t);case Pt.Polyline:return Ca(e,n,t);case Pt.Polygon:return Zo(e,n,t);case Pt.Path:return wa(e,n,t,r)}}switch(n.type){case Pt.Ellipse:case Pt.Rect:case Pt.Polyline:case Pt.Polygon:case Pt.Path:return ar(n,e,r,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function sr(e,n){const t=e.start.x,r=e.start.y,c=n.start.x,v=n.start.y,I=e.end.x-t,b=e.end.y-r,G=n.end.x-c,te=n.end.y-v,oe=t-c,Te=r-v,Pe=I*te-G*b,Be=(I*Te-b*oe)/Pe,Re=(G*Te-te*oe)/Pe;return Be>=0&&Be<=1&&Re>=0&&Re<=1}function Or(e,n){const t=e.a,r=e.b,o=e.x,u=e.y,c=n.start.x-o,m=n.start.y-u,I=t*t,b=r*r,G=n.end.x-o-c,te=n.end.y-u-m,oe=G*G/I+te*te/b,Te=2*c*G/I+2*m*te/b,Be=Te*Te-4*oe*(c*c/I+m*m/b-1);if(0===Be){const Re=-Te/2/oe;return Re>=0&&Re<=1}if(Be>0){const Re=Math.sqrt(Be),O=(-Te+Re)/2/oe,z=(-Te-Re)/2/oe;return O>=0&&O<=1||z>=0&&z<=1}return!1}function Xo(e,n){return function Ya(e,n,t,r){const{cos:o,sin:u}=Math,c=u(n),v=o(n),m=u(r),T=o(r),I=c*c,b=v*v,te=m*m,oe=T*T,Pe=e.a*e.a,Be=e.b*e.b,Re=t.a*t.a,O=t.b*t.b,z=Pe*I+Be*b,J=Re*te+O*oe,ie=Pe*b+Be*I,ve=Re*oe+O*te;let Me=2*(Be-Pe)*(c*v),Oe=2*(O-Re)*(m*T),Ge=-2*z*e.x-Me*e.y,a=-2*J*t.x-Oe*t.y,s=-Me*e.x-2*ie*e.y,d=-Oe*t.x-2*ve*t.y;const C=z*e.x*e.x+ie*e.y*e.y+Me*e.x*e.y-Pe*Be,N=J*t.x*t.x+ve*t.y*t.y+Oe*t.x*t.y-Re*O;Me/=2,Oe/=2,Ge/=2,a/=2,s/=2,d/=2;const Y=pi([[z,Me,Ge],[Me,ie,s],[Ge,s,C]]),ae=pi([[J,Oe,a],[Oe,ve,d],[a,d,N]]),de=.33333333*(pi([[J,Me,Ge],[Oe,ie,s],[a,s,C]])+pi([[z,Oe,Ge],[Me,ve,s],[Ge,d,C]])+pi([[z,Me,a],[Me,ie,d],[Ge,s,N]])),_e=.33333333*(pi([[z,Oe,a],[Me,ve,d],[Ge,d,N]])+pi([[J,Me,a],[Oe,ie,d],[a,s,N]])+pi([[J,Oe,Ge],[Oe,ve,s],[a,d,C]])),Le=Li([[Y,de],[de,_e]]),De=Li([[Y,_e],[de,ae]]),Fe=Li([[de,_e],[_e,ae]]);return!(Li([[2*Le,De],[De,2*Fe]])>0&&(_e>0||de>0))}(e,0,n,0)}function Mo(e,n){const{start:t,end:r}=n,{x:o,y:u,width:c,height:v}=e;return!(t.x>o+c&&r.x>o+c||t.x<o&&r.x<o||t.y>u+v&&r.y>u+v||t.y<u&&r.y<u)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||sr(e.topLine(),n)||sr(e.rightLine(),n)||sr(e.bottomLine(),n)||sr(e.leftLine(),n))}function Jr(e,n){return!!Ar(e,gt.fromEllipse(n))&&zi(br.fromRect(e),n)}function Ar(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function ki(e,n){return Sa(e,n,{interior:!1})}function ao(e,n){return $a(e,n,{interior:!1})}function Lr(e,n){return Ta(e,n,{interior:!1})}function Oi(e,n){return ii(e,n,{interior:!1})}function ri(e,n){return Sa(e,n,{interior:!0})}function zi(e,n){return $a(e,n,{interior:!0})}function Ko(e,n){return Ta(e,n,{interior:!0})}function Jo(e,n){return ii(e,n,{interior:!0})}function ko(e,n){return uo(e,n,{interior:!0})}function so(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:u}=r.getSegment(-1);return"Z"===u?ri(o,n):ki(o,n)})}function _a(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:u}=r.getSegment(-1);return"Z"===u?zi(o,n):ao(o,n)})}function Qo(e,n,t){return Zo(e,br.fromRect(n),t)}function Ca(e,n,t){return qo(e,n,t,{interior:!1})}function Zo(e,n,t){return qo(e,n,t,{interior:!0})}function wa(e,n,t,r){return e.getSubpaths().some(o=>{const[u]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Zo(n,u,r):Ca(n,u,r)})}function Sa(e,n,t={}){const{interior:r=!1}=t;let o;if(r){if(e.containsPoint(n.start))return!0;const{start:v,end:m,points:T}=e;o=m.equals(v)?T:[...T,v]}else o=e.points;const{length:u}=o,c=new bt;for(let v=0;v<u-1;v++)if(c.start=o[v],c.end=o[v+1],sr(n,c))return!0;return!1}function $a(e,n,t={}){const{start:r,end:o,points:u}=e;if(n.containsPoint(r))return!0;let c;const{interior:v=!1}=t;if(v){if(e.containsPoint(n.center()))return!0;c=o.equals(r)?u:[...u,r]}else c=u;const{length:m}=c,T=new bt;for(let I=0;I<m-1;I++)if(T.start=c[I],T.end=c[I+1],Or(n,T))return!0;return!1}function Ta(e,n,t){return uo(e,br.fromRect(n),t)}function qo(e,n,t,r){return e.getSubpaths().some(o=>{const[u]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?uo(n,u,r):ii(n,u,r)})}function ii(e,n,t={}){const{interior:r=!1}=t;let o;if(r){const{start:m}=n;if(e.containsPoint(m))return!0;o=e.clone().close()}else o=e;const u=n.points,{length:c}=u,v=new bt;for(let m=0;m<c-1;m++)if(v.start=u[m],v.end=u[m+1],ki(o,v))return!0;return!1}function uo(e,n,t){return n.containsPoint(e.start)||ii(e,n.clone().close(),t)}function Li(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function pi(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}br.parse=function(e){return new br(Si(e))},br.fromRect=function(e){return new br([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},br.prototype=jr(Tn.prototype,{type:Pt.Polygon,clone:function(){return new br(ya(this.points))},convexHull:function(){return new br(xa(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const ea=p,Ve=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,o=r.PI,u=r.atan2,c=r.sqrt,v=r.min,m=r.max,T=r.cos,I=r.sin,b=function(O,z,J){if(!(this instanceof b))return b.apply(Object.create(b.prototype),arguments);if(O){if(b.isV(O)&&(O=O.node),z=z||{},b.isString(O)){if("svg"===(O=O.trim()).toLowerCase())O=b.createSvgDocument();else if("<"===O[0]){var ie=b.createSvgDocument(O);if(ie.childNodes.length>1){var Me,Oe,ve=[];for(Me=0,Oe=ie.childNodes.length;Me<Oe;Me++){var Ge=ie.childNodes[Me];ve.push(new b(document.importNode(Ge,!0)))}return ve}O=document.importNode(ie.firstChild,!0)}else O=document.createElementNS(n.svg,O);b.ensureId(O)}return this.node=O,this.setAttributes(z),J&&this.append(J),this}},G=b.prototype;function oe(O,z,J){J||(J={});for(var ie=J.includeAnnotationIndices,ve=J.eol,Me=J.lineHeight,Oe=J.baseSize,Ge=0,a={},s=z.length-1,d=0;d<=s;d++){var C=z[d],N=null;if(b.isObject(C)){var Y=C.attrs,ae=b("tspan",Y),de=ae.node,_e=C.t;ve&&d===s&&(_e+=ve),de.textContent=_e;var Le=Y.class;Le&&ae.addClass(Le),ie&&ae.attr("annotations",C.annotations),N=parseFloat(Y["font-size"]),isFinite(N)||(N=Oe),N&&N>Ge&&(Ge=N)}else ve&&d===s&&(C+=ve),de=document.createTextNode(C||" "),Oe&&Oe>Ge&&(Ge=Oe);O.appendChild(de)}return Ge&&(a.maxFontSize=Ge),Me?a.lineHeight=Me:Ge&&(a.lineHeight=1.2*Ge),a}Object.defineProperty(G,"id",{enumerable:!0,get:function(){return this.node.id},set:function(O){this.node.id=O}}),G.getTransformToElement=function(O){var z=this.node;if(b.isSVGGraphicsElement(O)&&b.isSVGGraphicsElement(z)){var J=b.toNode(O).getScreenCTM(),ie=z.getScreenCTM();if(J&&ie)return J.inverse().multiply(ie)}return b.createSVGMatrix()},G.transform=function(O,z){var J=this.node;if(b.isUndefined(O))return b.transformStringToMatrix(this.attr("transform"));if(z&&z.absolute)return this.attr("transform",b.matrixToTransformString(O));var ie=b.createSVGTransform(O);return J.transform.baseVal.appendItem(ie),this},G.translate=function(O,z,J){J=J||{},z=z||0;var ie=this.attr("transform")||"",ve=b.parseTransformString(ie);return ie=ve.value,b.isUndefined(O)?ve.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(J.absolute?O:ve.translate.tx+O)+","+(J.absolute?z:ve.translate.ty+z)+") "+ie).trim()),this)},G.rotate=function(O,z,J,ie){ie=ie||{};var ve=this.attr("transform")||"",Me=b.parseTransformString(ve);return ve=Me.value,b.isUndefined(O)?Me.rotate:(ve=ve.replace(/rotate\([^)]*\)/g,"").trim(),O%=360,this.attr("transform",(ve+" rotate("+(ie.absolute?O:Me.rotate.angle+O)+(void 0!==z&&void 0!==J?","+z+","+J:"")+")").trim()),this)},G.scale=function(O,z){z=b.isUndefined(z)?O:z;var J=this.attr("transform")||"",ie=b.parseTransformString(J);return J=ie.value,b.isUndefined(O)?ie.scale:(J=J.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(J+" scale("+O+","+z+")").trim()),this)},G.bbox=function(O,z){var J,ie=this.node,ve=ie.ownerSVGElement;if(!ve)return new gt(0,0,0,0);try{J=ie.getBBox()}catch(Oe){J={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(O)return new gt(J);var Me=this.getTransformToElement(z||ve);return b.transformRect(J,Me)},G.getBBox=function(O){var J,z={},ie=this.node;if(!ie.ownerSVGElement||!b.isSVGGraphicsElement(ie))return new gt(0,0,0,0);if(O&&(O.target&&(z.target=b.toNode(O.target)),O.recursive&&(z.recursive=O.recursive)),z.recursive){var Oe=this.children(),Ge=Oe.length;if(0===Ge)return this.getBBox({target:z.target,recursive:!1});z.target||(z.target=this);for(var a=0;a<Ge;a++){var d,s=Oe[a];d=0===s.children().length?s.getBBox({target:z.target,recursive:!1}):s.getBBox({target:z.target,recursive:!0}),J=J?J.union(d):d}return J}try{J=ie.getBBox()}catch(C){J={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(z.target){var Me=this.getTransformToElement(z.target);return b.transformRect(J,Me)}return new gt(J)};var Te=/em$/;function Pe(O,z){var J=parseFloat(O);return Te.test(O)?J*z:J}G.text=function(O,z){if(O&&"string"!=typeof O)throw new Error("Vectorizer: text() expects the first argument to be a string.");O=b.sanitizeText(O),z||(z={});var J=z.displayEmpty,ie=z.eol,ve=z.textPath,Me=z.textVerticalAnchor,Oe="middle"===Me||"bottom"===Me||"top"===Me,Ge=z.x;void 0===Ge&&(Ge=this.attr("x")||0);var a=z.includeAnnotationIndices,s=z.annotations;s&&!b.isArray(s)&&(s=[s]);var d=z.lineHeight,C="auto"===d,N=C?"1.5em":d||"1em";this.empty(),this.attr({"xml:space":"preserve",display:O||J?null:"none"});var Y=parseFloat(this.attr("font-size"));Y||(Y=16,(Oe||s)&&this.attr("font-size",Y));var de,ae=document;ve?("string"==typeof ve&&(ve={d:ve}),de=function te(O,z){O||(O={});var J=b("textPath"),ie=O.d;if(ie&&void 0===O["xlink:href"]){var ve=b("path").attr("d",ie).appendTo(z.defs());J.attr("xlink:href","#"+ve.id)}return b.isObject(O)&&J.attr(O),J.node}(ve,this)):de=ae.createDocumentFragment();for(var Fe,_e=0,Le=O.split("\n"),De=[],qe=0,at=Le.length-1;qe<=at;qe++){var wt,xt=N,Tt="v-line",dt=ae.createElementNS(n.svg,"tspan"),Rt=Le[qe];if(Rt)if(s){var Gt=(wt=oe(dt,b.annotateString(Rt,s,{offset:-_e,includeAnnotationIndices:a}),{includeAnnotationIndices:a,eol:qe!==at&&ie,lineHeight:C?null:N,baseSize:Y})).lineHeight;Gt&&C&&0!==qe&&(xt=Gt),0===qe&&(Fe=.8*wt.maxFontSize)}else ie&&qe!==at&&(Rt+=ie),dt.textContent=Rt;else{dt.textContent="-",Tt+=" v-empty-line";var Et=dt.style;Et.fillOpacity=0,Et.strokeOpacity=0,s&&(wt={})}wt&&De.push(wt),qe>0&&dt.setAttribute("dy",xt),(qe>0||ve)&&dt.setAttribute("x",Ge),dt.className.baseVal=Tt,de.appendChild(dt),_e+=Rt.length+1}if(Oe)if(s)xt=function Be(O,z,J,ie){if(!Array.isArray(z))return 0;var ve=z.length;if(!ve)return 0;for(var Me=z[0],Oe=Pe(Me.maxFontSize,J)||J,Ge=0,a=Pe(ie,J),s=1;s<ve;s++)Ge+=Pe((Me=z[s]).lineHeight,J)||a;var N,C=Pe(Me.maxFontSize,J)||J;switch(O){case"middle":N=Oe/2-.15*C-Ge/2;break;case"bottom":N=-.25*C-Ge;break;default:N=.8*Oe}return N}(Me,De,Y,N);else if("top"===Me)xt="0.8em";else{var lt;switch(at>0?(lt=parseFloat(N)||1,lt*=at,Te.test(N)||(lt/=Y)):lt=0,Me){case"middle":xt=.3-lt/2+"em";break;case"bottom":xt=-lt-.3+"em"}}else 0===Me?xt="0em":Me?xt=Me:(xt=0,null===this.attr("y")&&this.attr("y",Fe||"0.8em"));return de.firstChild.setAttribute("dy",xt),this.append(de),this},G.removeAttr=function(O){var z=b.qualifyAttr(O),J=this.node;return z.ns?J.hasAttributeNS(z.ns,z.local)&&J.removeAttributeNS(z.ns,z.local):J.hasAttribute(O)&&J.removeAttribute(O),this},G.attr=function(O,z){if(b.isUndefined(O)){for(var J=this.node.attributes,ie={},ve=0;ve<J.length;ve++)ie[J[ve].name]=J[ve].value;return ie}if(b.isString(O)&&b.isUndefined(z))return this.node.getAttribute(O);if("object"==typeof O)for(var Me in O)O.hasOwnProperty(Me)&&this.setAttribute(Me,O[Me]);else this.setAttribute(O,z);return this},G.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",b.normalizePathData(this.attr("d"))),this},G.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},G.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},G.setAttributes=function(O){for(var z in O)O.hasOwnProperty(z)&&this.setAttribute(z,O[z]);return this},G.append=function(O){b.isArray(O)||(O=[O]);for(var z=0,J=O.length;z<J;z++)this.node.appendChild(b.toNode(O[z]));return this},G.prepend=function(O){var z=this.node.firstChild;return z?b(z).before(O):this.append(O)},G.before=function(O){var z=this.node,J=z.parentNode;if(J){b.isArray(O)||(O=[O]);for(var ie=0,ve=O.length;ie<ve;ie++)J.insertBefore(b.toNode(O[ie]),z)}return this},G.appendTo=function(O){return b.toNode(O).appendChild(this.node),this},G.svg=function(){return this.node instanceof window.SVGSVGElement?this:b(this.node.ownerSVGElement)},G.tagName=function(){return this.node.tagName.toUpperCase()},G.defs=function(){var O=this.svg()||this,z=O.node.getElementsByTagName("defs")[0];return z?b(z):b("defs").appendTo(O)},G.clone=function(){var O=b(this.node.cloneNode(!0));return O.node.id=b.uniqueId(),O},G.findOne=function(O){var z=this.node.querySelector(O);return z?b(z):void 0},G.find=function(O){var z=[],J=this.node.querySelectorAll(O);if(J)for(var ie=0;ie<J.length;ie++)z.push(b(J[ie]));return z},G.children=function(){for(var O=this.node.childNodes,z=[],J=0;J<O.length;J++)1===O[J].nodeType&&z.push(b(O[J]));return z},G.parent=function(){return b(this.node.parentNode)||null},G.index=function(){for(var O=0,z=this.node.previousSibling;z;)1===z.nodeType&&O++,z=z.previousSibling;return O},G.findParentByClass=function(O,z){for(var J=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==z&&ie!==J;){var ve=b(ie);if(ve.hasClass(O))return ve;ie=ie.parentNode}return null},G.contains=function(O){var z=this.node,J=b.toNode(O),ie=J&&J.parentNode;return z===ie||!!(ie&&1===ie.nodeType&&16&z.compareDocumentPosition(ie))},G.toLocalPoint=function(O,z){var J=this.svg().node,ie=J.createSVGPoint();ie.x=O,ie.y=z;try{var ve=ie.matrixTransform(J.getScreenCTM().inverse()),Me=this.getTransformToElement(J).inverse()}catch(Oe){return ie}return ve.matrixTransform(Me)},G.translateCenterToPoint=function(O){var J=this.getBBox({target:this.svg()}).center();return this.translate(O.x-J.x,O.y-J.y),this},G.translateAndAutoOrient=function(O,z,J){O=new ye(O),z=new ye(z),J||(J=this.svg());var ie=this.scale();this.attr("transform","");var ve=this.getBBox({target:J}).scale(ie.sx,ie.sy),Me=b.createSVGTransform();Me.setTranslate(-ve.x-ve.width/2,-ve.y-ve.height/2);var Oe=b.createSVGTransform(),Ge=O.angleBetween(z,O.clone().offset(1,0));Ge&&Oe.setRotate(Ge,0,0);var a=b.createSVGTransform(),s=O.clone().move(z,ve.width/2);a.setTranslate(2*O.x-s.x,2*O.y-s.y);var d=this.getTransformToElement(J),C=b.createSVGTransform();return C.setMatrix(a.matrix.multiply(Oe.matrix.multiply(Me.matrix.multiply(d.scale(ie.sx,ie.sy))))),this.attr("transform",b.matrixToTransformString(C.matrix)),this},G.animateAlongPath=function(O,z){z=b.toNode(z);var J=b.ensureId(z),ie=b("animateMotion",O),ve=b("mpath",{"xlink:href":"#"+J});ie.append(ve),this.append(ie);try{ie.node.beginElement()}catch(N){if("fake"===document.documentElement.getAttribute("smiling")){var Me=ie.node;Me.animators=[];var Oe=Me.getAttribute("id");Oe&&(id2anim[Oe]=Me);for(var Ge=getTargets(Me),a=0,s=Ge.length;a<s;a++){var C=new Animator(Me,Ge[a],a);animators.push(C),Me.animators[a]=C,C.register()}}}return this},G.hasClass=function(O){return new RegExp("(\\s|^)"+O+"(\\s|$)").test(this.node.getAttribute("class"))},G.addClass=function(O){if(O&&!this.hasClass(O)){var z=this.node.getAttribute("class")||"";this.node.setAttribute("class",(z+" "+O).trim())}return this},G.removeClass=function(O){if(O&&this.hasClass(O)){var z=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+O+"(\\s|$)","g"),"$2");this.node.setAttribute("class",z)}return this},G.toggleClass=function(O,z){return(b.isUndefined(z)?this.hasClass(O):!z)?this.removeClass(O):this.addClass(O),this},G.sample=function(O){O=O||1;for(var Me,z=this.node,J=z.getTotalLength(),ie=[],ve=0;ve<J;)Me=z.getPointAtLength(ve),ie.push({x:Me.x,y:Me.y,distance:ve}),ve+=O;return ie},G.convertToPath=function(){var O=b("path");O.attr(this.attr());var z=this.convertToPathData();return z&&O.attr("d",z),O},G.convertToPathData=function(){var O=this.tagName();switch(O){case"PATH":return this.attr("d");case"LINE":return b.convertLineToPathData(this.node);case"POLYGON":return b.convertPolygonToPathData(this.node);case"POLYLINE":return b.convertPolylineToPathData(this.node);case"ELLIPSE":return b.convertEllipseToPathData(this.node);case"CIRCLE":return b.convertCircleToPathData(this.node);case"RECT":return b.convertRectToPathData(this.node)}throw new Error(O+" cannot be converted to PATH.")},b.prototype.toGeometryShape=function(){var O,z,J,ie,ve,Me,Oe,Ge,a,s,d,C,N,Y,ae;switch(this.tagName()){case"RECT":return O=parseFloat(this.attr("x"))||0,z=parseFloat(this.attr("y"))||0,J=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new gt(O,z,J,ie);case"CIRCLE":return ve=parseFloat(this.attr("cx"))||0,Me=parseFloat(this.attr("cy"))||0,Oe=parseFloat(this.attr("r"))||0,new or({x:ve,y:Me},Oe,Oe);case"ELLIPSE":return ve=parseFloat(this.attr("cx"))||0,Me=parseFloat(this.attr("cy"))||0,Ge=parseFloat(this.attr("rx"))||0,a=parseFloat(this.attr("ry"))||0,new or({x:ve,y:Me},Ge,a);case"POLYLINE":return s=b.getPointsFromSvgNode(this),new Tn(s);case"POLYGON":return(s=b.getPointsFromSvgNode(this)).length>1&&s.push(s[0]),new Tn(s);case"PATH":return d=this.attr("d"),It.isDataSupported(d)||(d=b.normalizePathData(d)),new It(d);case"LINE":return C=parseFloat(this.attr("x1"))||0,Y=parseFloat(this.attr("y1"))||0,N=parseFloat(this.attr("x2"))||0,ae=parseFloat(this.attr("y2"))||0,new bt({x:C,y:Y},{x:N,y:ae})}return this.getBBox()},G.findIntersection=function(O,z){var J=this.svg().node,ie=this.getBBox({target:z=z||J}),ve=ie.center();if(ie.intersectionWithLineFromCenterToPoint(O)){var Me,Oe=this.tagName();if("RECT"===Oe){var Ge=new gt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),a=this.getTransformToElement(z),s=b.decomposeMatrix(a),d=J.createSVGTransform();d.setRotate(-s.rotation,ve.x,ve.y);var C=b.transformRect(Ge,d.matrix.multiply(a));Me=new gt(C).intersectionWithLineFromCenterToPoint(O,s.rotation)}else if("PATH"===Oe||"POLYGON"===Oe||"POLYLINE"===Oe||"CIRCLE"===Oe||"ELLIPSE"===Oe){var _e,Le,De,qe,at,Y=("PATH"===Oe?this:this.convertToPath()).sample(),ae=1/0,de=[];for(_e=0;_e<Y.length;_e++)De=(De=b.createSVGPoint((Le=Y[_e]).x,Le.y)).matrixTransform(this.getTransformToElement(z)),(at=(Le=new ye(De)).distance(ve)+(qe=1.1*Le.distance(O)))<ae?(ae=at,de=[{sample:Le,refDistance:qe}]):at<ae+1&&de.push({sample:Le,refDistance:qe});de.sort(function(xt,Tt){return xt.refDistance-Tt.refDistance}),de[0]&&(Me=de[0].sample)}return Me}},G.setAttribute=function(O,z){var J=this.node;if(null===z)return this.removeAttr(O),this;var ie=b.qualifyAttr(O);return ie.ns?J.setAttributeNS(ie.ns,O,z):"id"===O?J.id=z:J.setAttribute(O,z),this},b.createSvgDocument=function(O){if(O){const J=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${O}</svg>`,{documentElement:ie}=b.parseXML(J,{async:!1});return ie}const z=document.createElementNS(n.svg,"svg");return z.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),z.setAttribute("version","1.1"),z},b.createSVGStyle=function(O){const{node:z}=b("style",{type:"text/css"},[b.createCDATASection(O)]);return z},b.createCDATASection=function(O=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(O)},b.idCounter=0,b.uniqueId=function(){return"v-"+ ++b.idCounter},b.toNode=function(O){return b.isV(O)?O.node:O.nodeName&&O||O[0]},b.ensureId=function(O){return(O=b.toNode(O)).id||(O.id=b.uniqueId())},b.sanitizeText=function(O){return(O||"").replace(/ /g,"\xa0")},b.isUndefined=function(O){return void 0===O},b.isString=function(O){return"string"==typeof O},b.isObject=function(O){return O&&"object"==typeof O},b.isArray=Array.isArray,b.parseXML=function(O,z){var J;z=z||{};try{var ie=new DOMParser;b.isUndefined(z.async)||(ie.async=z.async),J=ie.parseFromString(O,"text/xml")}catch(ve){J=void 0}if(!J||J.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+O);return J},b.qualifyAttr=function(O){if(-1!==O.indexOf(":")){var z=O.split(":");return{ns:n[z[0]],local:z[1]}}return{ns:null,local:O}},b.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,b.transformSeparatorRegex=/[ ,]+/,b.transformationListRegex=/^(\w+)\((.*)\)/,b.transformStringToMatrix=function(O){var z=b.createSVGMatrix(),J=O&&O.match(b.transformRegex);if(!J)return z;for(var ie=0,ve=J.length;ie<ve;ie++){var Oe=J[ie].match(b.transformationListRegex);if(Oe){var Ge,a,s,d,C,N=b.createSVGMatrix(),Y=Oe[2].split(b.transformSeparatorRegex);switch(Oe[1].toLowerCase()){case"scale":Ge=parseFloat(Y[0]),a=void 0===Y[1]?Ge:parseFloat(Y[1]),N=N.scaleNonUniform(Ge,a);break;case"translate":s=parseFloat(Y[0]),d=parseFloat(Y[1]),N=N.translate(s,d);break;case"rotate":C=parseFloat(Y[0]),s=parseFloat(Y[1])||0,d=parseFloat(Y[2])||0,N=0!==s||0!==d?N.translate(s,d).rotate(C).translate(-s,-d):N.rotate(C);break;case"skewx":C=parseFloat(Y[0]),N=N.skewX(C);break;case"skewy":C=parseFloat(Y[0]),N=N.skewY(C);break;case"matrix":N.a=parseFloat(Y[0]),N.b=parseFloat(Y[1]),N.c=parseFloat(Y[2]),N.d=parseFloat(Y[3]),N.e=parseFloat(Y[4]),N.f=parseFloat(Y[5]);break;default:continue}z=z.multiply(N)}}return z},b.matrixToTransformString=function(O){return O||(O=!0),"matrix("+(void 0!==O.a?O.a:1)+","+(void 0!==O.b?O.b:0)+","+(void 0!==O.c?O.c:0)+","+(void 0!==O.d?O.d:1)+","+(void 0!==O.e?O.e:0)+","+(void 0!==O.f?O.f:0)+")"},b.parseTransformString=function(O){var z,J,ie;if(O){var ve=b.transformSeparatorRegex;if(O.trim().indexOf("matrix")>=0){var Me=b.transformStringToMatrix(O),Oe=b.decomposeMatrix(Me);ie=[Oe.scaleX,Oe.scaleY],J=[Oe.rotation];var Ge=[];(0!==(z=[Oe.translateX,Oe.translateY])[0]||0!==z[1])&&Ge.push("translate("+z+")"),(1!==ie[0]||1!==ie[1])&&Ge.push("scale("+ie+")"),0!==J[0]&&Ge.push("rotate("+J+")"),O=Ge.join(" ")}else{var a=O.match(/translate\((.*?)\)/);a&&(z=a[1].split(ve));var s=O.match(/rotate\((.*?)\)/);s&&(J=s[1].split(ve));var d=O.match(/scale\((.*?)\)/);d&&(ie=d[1].split(ve))}}var C=ie&&ie[0]?parseFloat(ie[0]):1;return{value:O,translate:{tx:z&&z[0]?parseInt(z[0],10):0,ty:z&&z[1]?parseInt(z[1],10):0},rotate:{angle:J&&J[0]?parseInt(J[0],10):0,cx:J&&J[1]?parseInt(J[1],10):void 0,cy:J&&J[2]?parseInt(J[2],10):void 0},scale:{sx:C,sy:ie&&ie[1]?parseFloat(ie[1]):C}}},b.deltaTransformPoint=function(O,z){return{x:z.x*O.a+z.y*O.c+0,y:z.x*O.b+z.y*O.d+0}},b.decomposeMatrix=function(O){var z=b.deltaTransformPoint(O,{x:0,y:1}),J=b.deltaTransformPoint(O,{x:1,y:0}),ie=180/o*u(z.y,z.x)-90,ve=180/o*u(J.y,J.x);return{translateX:O.e,translateY:O.f,scaleX:c(O.a*O.a+O.b*O.b),scaleY:c(O.c*O.c+O.d*O.d),skewX:ie,skewY:ve,rotation:ie}},b.matrixToScale=function(O){var z,J,ie,ve;return O?(z=b.isUndefined(O.a)?1:O.a,ve=b.isUndefined(O.d)?1:O.d,J=O.b,ie=O.c):z=ve=1,{sx:J?c(z*z+J*J):z,sy:ie?c(ie*ie+ve*ve):ve}},b.matrixToRotate=function(O){var z={x:0,y:1};return O&&(z=b.deltaTransformPoint(O,z)),{angle:Xe(Ot(u(z.y,z.x))-90)}},b.matrixToTranslate=function(O){return{tx:O&&O.e||0,ty:O&&O.f||0}},b.isV=function(O){return O instanceof b},b.isVElement=b.isV,b.isSVGGraphicsElement=function(O){return!!O&&(O=b.toNode(O))instanceof SVGElement&&"function"==typeof O.getScreenCTM};var Re=b("svg").node;return b.createSVGMatrix=function(O){var z=Re.createSVGMatrix();for(var J in O)z[J]=O[J];return z},b.createSVGTransform=function(O){return b.isUndefined(O)?Re.createSVGTransform():(O instanceof SVGMatrix||(O=b.createSVGMatrix(O)),Re.createSVGTransformFromMatrix(O))},b.createSVGPoint=function(O,z){var J=Re.createSVGPoint();return J.x=O,J.y=z,J},b.transformRect=function(O,z){var J=Re.createSVGPoint();J.x=O.x,J.y=O.y;var ie=J.matrixTransform(z);J.x=O.x+O.width,J.y=O.y;var ve=J.matrixTransform(z);J.x=O.x+O.width,J.y=O.y+O.height;var Me=J.matrixTransform(z);J.x=O.x,J.y=O.y+O.height;var Oe=J.matrixTransform(z),Ge=v(ie.x,ve.x,Me.x,Oe.x),a=m(ie.x,ve.x,Me.x,Oe.x),s=v(ie.y,ve.y,Me.y,Oe.y),d=m(ie.y,ve.y,Me.y,Oe.y);return new gt(Ge,s,a-Ge,d-s)},b.transformPoint=function(O,z){return new ye(b.createSVGPoint(O.x,O.y).matrixTransform(z))},b.transformLine=function(O,z){return new bt(b.transformPoint(O.start,z),b.transformPoint(O.end,z))},b.transformPolyline=function(O,z){var J=O instanceof Tn?O.points:O;b.isArray(J)||(J=[]);for(var ie=[],ve=0,Me=J.length;ve<Me;ve++)ie[ve]=b.transformPoint(J[ve],z);return new Tn(ie)},b.styleToObject=function(O){for(var z={},J=O.split(";"),ie=0;ie<J.length;ie++){var Me=J[ie].split("=");z[Me[0].trim()]=Me[1].trim()}return z},b.createSlicePathData=function(O,z,J,ie){var ve=2*o-1e-6,Me=O,Oe=z,Ge=J,a=ie,s=(a<Ge&&(s=Ge,Ge=a,a=s),a-Ge),d=s<o?"0":"1",C=T(Ge),N=I(Ge),Y=T(a),ae=I(a);return s>=ve?Me?"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+Oe+"M0,"+Me+"A"+Me+","+Me+" 0 1,0 0,"+-Me+"A"+Me+","+Me+" 0 1,0 0,"+Me+"Z":"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,1 0,"+Oe+"Z":Me?"M"+Oe*C+","+Oe*N+"A"+Oe+","+Oe+" 0 "+d+",1 "+Oe*Y+","+Oe*ae+"L"+Me*Y+","+Me*ae+"A"+Me+","+Me+" 0 "+d+",0 "+Me*C+","+Me*N+"Z":"M"+Oe*C+","+Oe*N+"A"+Oe+","+Oe+" 0 "+d+",1 "+Oe*Y+","+Oe*ae+"L0,0Z"},b.mergeAttrs=function(O,z){for(var J in z)O[J]="class"===J?O[J]?O[J]+" "+z[J]:z[J]:"style"===J?b.isObject(O[J])&&b.isObject(z[J])?b.mergeAttrs(O[J],z[J]):b.isObject(O[J])?b.mergeAttrs(O[J],b.styleToObject(z[J])):b.isObject(z[J])?b.mergeAttrs(b.styleToObject(O[J]),z[J]):b.mergeAttrs(b.styleToObject(O[J]),b.styleToObject(z[J])):z[J];return O},b.annotateString=function(O,z,J){z=z||[];for(var Me,Ge,a,ie=(J=J||{}).offset||0,ve=[],Oe=[],s=0;s<O.length;s++){Ge=Oe[s]=O[s];for(var d=0;d<z.length;d++){var C=z[d];s>=C.start+ie&&s<C.end+ie&&(b.isObject(Ge)?Ge.attrs=b.mergeAttrs(b.mergeAttrs({},Ge.attrs),C.attrs):Ge=Oe[s]={t:O[s],attrs:C.attrs},J.includeAnnotationIndices&&(Ge.annotations||(Ge.annotations=[])).push(d))}(a=Oe[s-1])?b.isObject(Ge)&&b.isObject(a)?JSON.stringify(Ge.attrs)===JSON.stringify(a.attrs)?Me.t+=Ge.t:(ve.push(Me),Me=Ge):b.isObject(Ge)||b.isObject(a)?(ve.push(Me),Me=Ge):Me=(Me||"")+Ge:Me=Ge}return Me&&ve.push(Me),ve},b.findAnnotationsAtIndex=function(O,z){var J=[];return O&&O.forEach(function(ie){ie.start<z&&z<=ie.end&&J.push(ie)}),J},b.findAnnotationsBetweenIndexes=function(O,z,J){var ie=[];return O&&O.forEach(function(ve){(z>=ve.start&&z<ve.end||J>ve.start&&J<=ve.end||ve.start>=z&&ve.end<J)&&ie.push(ve)}),ie},b.shiftAnnotations=function(O,z,J){return O&&O.forEach(function(ie){ie.start<z&&ie.end>=z?ie.end+=J:ie.start>=z&&(ie.start+=J,ie.end+=J)}),O},b.convertLineToPathData=function(O){return["M",(O=b(O)).attr("x1"),O.attr("y1"),"L",O.attr("x2"),O.attr("y2")].join(" ")},b.convertPolygonToPathData=function(O){var z=b.getPointsFromSvgNode(O);return 0===z.length?null:b.svgPointsToPath(z)+" Z"},b.convertPolylineToPathData=function(O){var z=b.getPointsFromSvgNode(O);return 0===z.length?null:b.svgPointsToPath(z)},b.svgPointsToPath=function(O){for(var z=0,J=O.length;z<J;z++)O[z]=O[z].x+" "+O[z].y;return"M "+O.join(" L")},b.getPointsFromSvgNode=function(O){var z=[],J=(O=b.toNode(O)).points;if(J)for(var ie=0,ve=J.numberOfItems;ie<ve;ie++)z.push(J.getItem(ie));return z},b.KAPPA=.551784,b.convertCircleToPathData=function(O){O=b(O);var z=parseFloat(O.attr("cx"))||0,J=parseFloat(O.attr("cy"))||0,ie=parseFloat(O.attr("r")),ve=ie*b.KAPPA;return["M",z,J-ie,"C",z+ve,J-ie,z+ie,J-ve,z+ie,J,"C",z+ie,J+ve,z+ve,J+ie,z,J+ie,"C",z-ve,J+ie,z-ie,J+ve,z-ie,J,"C",z-ie,J-ve,z-ve,J-ie,z,J-ie,"Z"].join(" ")},b.convertEllipseToPathData=function(O){O=b(O);var z=parseFloat(O.attr("cx"))||0,J=parseFloat(O.attr("cy"))||0,ie=parseFloat(O.attr("rx")),ve=parseFloat(O.attr("ry"))||ie,Me=ie*b.KAPPA,Oe=ve*b.KAPPA;return["M",z,J-ve,"C",z+Me,J-ve,z+ie,J-Oe,z+ie,J,"C",z+ie,J+Oe,z+Me,J+ve,z,J+ve,"C",z-Me,J+ve,z-ie,J+Oe,z-ie,J,"C",z-ie,J-Oe,z-Me,J-ve,z,J-ve,"Z"].join(" ")},b.convertRectToPathData=function(O){return O=b(O),b.rectToPath({x:parseFloat(O.attr("x"))||0,y:parseFloat(O.attr("y"))||0,width:parseFloat(O.attr("width"))||0,height:parseFloat(O.attr("height"))||0,rx:parseFloat(O.attr("rx"))||0,ry:parseFloat(O.attr("ry"))||0})},b.rectToPath=function(O){var J=O.x,ie=O.y,ve=O.width,Me=O.height,Oe=v(O.rx||O["top-rx"]||0,ve/2),Ge=v(O.rx||O["bottom-rx"]||0,ve/2),a=v(O.ry||O["top-ry"]||0,Me/2),s=v(O.ry||O["bottom-ry"]||0,Me/2);return(Oe||Ge||a||s?["M",J,ie+a,"v",Me-a-s,"a",Ge,s,0,0,0,Ge,s,"h",ve-2*Ge,"a",Ge,s,0,0,0,Ge,-s,"v",-(Me-s-a),"a",Oe,a,0,0,0,-Oe,-a,"h",-(ve-2*Oe),"a",Oe,a,0,0,0,-Oe,a,"Z"]:["M",J,ie,"H",J+ve,"V",ie+Me,"H",J,"V",ie,"Z"]).join(" ")},b.normalizePathData=function(){var O="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",z=new RegExp("([a-z])["+O+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+O+"]*,?["+O+"]*)+)","ig"),J=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+O+"]*,?["+O+"]*","ig"),ie=Math,ve=ie.PI,Me=ie.sin,Oe=ie.cos,Ge=ie.tan,a=ie.asin,s=ie.sqrt,d=ie.abs;function C(Le,De,Fe,qe,at,xt){var Tt=.3333333333333333,dt=2/3;return[Tt*Le+dt*Fe,Tt*De+dt*qe,Tt*at+dt*Fe,Tt*xt+dt*qe,at,xt]}function N(Le,De,Fe){return{x:Le*Oe(Fe)-De*Me(Fe),y:Le*Me(Fe)+De*Oe(Fe)}}function Y(Le,De,Fe,qe,at,xt,Tt,dt,Rt,wt){var lt,jt=120*ve/180,Gt=ve/180*(+at||0),Et=[];if(wt)ni=wt[0],Er=wt[1],Ul=wt[2],Gl=wt[3];else{De=(lt=N(Le,De,-Gt)).y;var Dn=((Le=lt.x)-(dt=(lt=N(dt,Rt,-Gt)).x))/2,Yn=(De-(Rt=lt.y))/2,wo=Dn*Dn/(Fe*Fe)+Yn*Yn/(qe*qe);wo>1&&(Fe*=wo=s(wo),qe*=wo);var ng=Fe*Fe,rg=qe*qe,pg=(xt==Tt?-1:1)*s(d((ng*rg-ng*Yn*Yn-rg*Dn*Dn)/(ng*Yn*Yn+rg*Dn*Dn))),Ul=pg*Fe*Yn/qe+(Le+dt)/2,Gl=pg*-qe*Dn/Fe+(De+Rt)/2,ni=a(((De-Gl)/qe).toFixed(9)),Er=a(((Rt-Gl)/qe).toFixed(9));(ni=Le<Ul?ve-ni:ni)<0&&(ni=2*ve+ni),(Er=dt<Ul?ve-Er:Er)<0&&(Er=2*ve+Er),Tt&&ni>Er&&(ni-=2*ve),!Tt&&Er>ni&&(Er-=2*ve)}var ig=Er-ni;if(d(ig)>jt){var Cg=Er,wg=dt,Sg=Rt;Et=Y(dt=Ul+Fe*Oe(Er=ni+jt*(Tt&&Er>ni?1:-1)),Rt=Gl+qe*Me(Er),Fe,qe,at,0,Tt,wg,Sg,[Er,Cg,Ul,Gl])}ig=Er-ni;var Tg=Oe(ni),Eg=Me(ni),Pg=Oe(Er),Ig=Me(Er),gg=Ge(ig/4),vg=4/3*(Fe*gg),mg=4/3*(qe*gg),yg=[Le,De],ku=[Le+vg*Eg,De-mg*Tg],xg=[dt+vg*Ig,Rt-mg*Pg],bg=[dt,Rt];if(ku[0]=2*yg[0]-ku[0],ku[1]=2*yg[1]-ku[1],wt)return[ku,xg,bg].concat(Et);for(var _g=[],Ag=(Et=[ku,xg,bg].concat(Et).join().split(",")).length,hs=0;hs<Ag;hs++)_g[hs]=hs%2?N(Et[hs-1],Et[hs],Gt).y:N(Et[hs],Et[hs+1],Gt).x;return _g}function _e(Le){var De=function de(Le){if((!Array.isArray(Le)||!Array.isArray(Le&&Le[0]))&&(Le=function ae(Le){if(!Le)return null;var De={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Fe=[];return String(Le).replace(z,function(qe,at,xt){var Tt=[],dt=at.toLowerCase();for(xt.replace(J,function(Rt,wt){wt&&Tt.push(+wt)}),"m"===dt&&Tt.length>2&&(Fe.push([at].concat(Tt.splice(0,2))),dt="l",at="m"===at?"l":"L");Tt.length>=De[dt]&&(Fe.push([at].concat(Tt.splice(0,De[dt]))),De[dt]););}),Fe}(Le)),!Le||!Le.length)return[["M",0,0]];for(var dt,De=[],Fe=0,qe=0,at=0,xt=0,Rt=Le.length,wt=0;wt<Rt;wt++){var jt=[];De.push(jt);var Et,lt,Gt=Le[wt];if((dt=Gt[0])!=dt.toUpperCase())switch(jt[0]=dt.toUpperCase(),jt[0]){case"A":jt[1]=Gt[1],jt[2]=Gt[2],jt[3]=Gt[3],jt[4]=Gt[4],jt[5]=Gt[5],jt[6]=+Gt[6]+Fe,jt[7]=+Gt[7]+qe;break;case"V":jt[1]=+Gt[1]+qe;break;case"H":jt[1]=+Gt[1]+Fe;break;case"M":for(at=+Gt[1]+Fe,xt=+Gt[2]+qe,Et=Gt.length,lt=1;lt<Et;lt++)jt[lt]=+Gt[lt]+(lt%2?Fe:qe);break;default:for(Et=Gt.length,lt=1;lt<Et;lt++)jt[lt]=+Gt[lt]+(lt%2?Fe:qe)}else for(var Dn=Gt.length,Yn=0;Yn<Dn;Yn++)jt[Yn]=Gt[Yn];switch(jt[0]){case"Z":Fe=+at,qe=+xt;break;case"H":Fe=jt[1];break;case"V":qe=jt[1];break;case"M":at=jt[jt.length-2],xt=jt[jt.length-1],Fe=jt[jt.length-2],qe=jt[jt.length-1];break;default:Fe=jt[jt.length-2],qe=jt[jt.length-1]}}return De}(Le),Fe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function qe(Et,lt,Dn){var Yn,wo;if(!Et)return["C",lt.x,lt.y,lt.x,lt.y,lt.x,lt.y];switch(Et[0]in{T:1,Q:1}||(lt.qx=null,lt.qy=null),Et[0]){case"M":lt.X=Et[1],lt.Y=Et[2];break;case"A":Et=0===parseFloat(Et[1])||0===parseFloat(Et[2])?["L",Et[6],Et[7]]:["C"].concat(Y.apply(0,[lt.x,lt.y].concat(Et.slice(1))));break;case"S":"C"===Dn||"S"===Dn?(Yn=2*lt.x-lt.bx,wo=2*lt.y-lt.by):(Yn=lt.x,wo=lt.y),Et=["C",Yn,wo].concat(Et.slice(1));break;case"T":"Q"===Dn||"T"===Dn?(lt.qx=2*lt.x-lt.qx,lt.qy=2*lt.y-lt.qy):(lt.qx=lt.x,lt.qy=lt.y),Et=["C"].concat(C(lt.x,lt.y,lt.qx,lt.qy,Et[1],Et[2]));break;case"Q":lt.qx=Et[1],lt.qy=Et[2],Et=["C"].concat(C(lt.x,lt.y,Et[1],Et[2],Et[3],Et[4]));break;case"H":Et=["L"].concat(Et[1],lt.y);break;case"V":Et=["L"].concat(lt.x,Et[1])}return Et}function at(Et,lt){if(Et[lt].length>7){Et[lt].shift();for(var Dn=Et[lt];Dn.length;)xt[lt]="A",Et.splice(lt++,0,["C"].concat(Dn.splice(0,6)));Et.splice(lt,1),Rt=De.length}}for(var xt=[],Tt="",dt="",Rt=De.length,wt=0;wt<Rt;wt++){De[wt]&&(Tt=De[wt][0]),"C"!==Tt&&(xt[wt]=Tt,wt>0&&(dt=xt[wt-1])),De[wt]=qe(De[wt],Fe,dt),"A"!==xt[wt]&&"C"===Tt&&(xt[wt]="C"),at(De,wt);var jt=De[wt],Gt=jt.length;Fe.x=jt[Gt-2],Fe.y=jt[Gt-1],Fe.bx=parseFloat(jt[Gt-4])||Fe.x,Fe.by=parseFloat(jt[Gt-3])||Fe.y}return(!De[0][0]||"M"!==De[0][0])&&De.unshift(["M",0,0]),De}return function(Le){return _e(Le).join(",").split(",").join(" ")}}(),b.namespace=n,b.g=g,b}(),Nr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Rr=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,Nr.classNamePrefix.length)!==Nr.classNamePrefix&&(n=Nr.classNamePrefix+n),n}).join(" ")},B=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,Nr.classNamePrefix.length)===Nr.classNamePrefix&&(n=n.substr(Nr.classNamePrefix.length)),n}).join(" ")},Q=function(e,n){for(var t={},r={},o=Ve.namespace.svg,u=n||o,c=document.createDocumentFragment(),v=[e,c,u];v.length>0;){u=v.pop();for(var m=v.pop(),T=v.pop(),I=0,b=T.length;I<b;I++){var G=T[I];if(!G.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var te=G.tagName;G.hasOwnProperty("namespaceURI")&&(u=G.namespaceURI);var oe=document.createElementNS(u,te),Te=u===o,Pe=Te?Ve:kt,Be=G.attributes;Be&&Pe(oe).attr(Be);var Re=G.style;if(Re&&kt(oe).css(Re),G.hasOwnProperty("className")){var O=G.className;Te?oe.className.baseVal=O:oe.className=O}if(G.hasOwnProperty("textContent")&&(oe.textContent=G.textContent),G.hasOwnProperty("selector")){var z=G.selector;if(t[z])throw new Error("json-dom-parser: selector must be unique");t[z]=oe,Pe(oe).attr("joint-selector",z)}if(G.hasOwnProperty("groupSelector")){var J=G.groupSelector;Array.isArray(J)||(J=[J]);for(var ie=0,ve=J.length;ie<ve;ie++){var Me=J[ie],Oe=r[Me];Oe||(Oe=r[Me]=[]),Oe.push(oe)}}m.appendChild(oe);var Ge=G.children;Array.isArray(Ge)&&v.push(Ge,oe,u)}}return{fragment:c,selectors:t,groupSelectors:r}},se=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},pe=function(e,n,t){for(var o,r=Array.isArray(n)?n:n.split(t||"/"),u=0,c=r.length;u<c;){if(o=r[u++],Object(e)!==e||!(o in e))return;e=e[o]}return e},ke=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},Se=function(e,n,t,r){const o=Array.isArray(n)?n:n.split(r||"/"),u=o.length-1;let c=e,v=0;for(;v<u;v++){const m=o[v];if(!ke(c,m))return e;c=c[m]||(c[m]={})}return c[o[u]]=t,e},l=function(e,n,t){const r=Array.isArray(n)?n:n.split(t||"/"),o=r.length-1;let u=e,c=0;for(;c<o;c++){const v=r[c];if(!ke(u,v))return e;const m=u[v];if(!m)return e;u=m}return delete u[r[o]],e},w=function(e){return w.id=w.id||1,e.id=void 0===e.id?"j_"+w.id++:e.id,e.id},D=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},F=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var r in e)void 0===t[r]&&(t[r]=e[r]);n=t}var o=n.target;if(o){var u=o.correspondingUseElement;u&&(n.target=u)}return n},X=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),u=setTimeout(function(){t(r+o)},o);return n=r+o,u}}return function(t,r,...o){return e(void 0!==r?t.bind(r,...o):t)}}(),le=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),we=function(e){return In(e)&&"%"===e.slice(-1)},ze=function(e,n){var r=parseFloat(e);if(Number.isNaN(r))return null;var u,o={};if(o.value=r,null==n)u="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;u=n.join("|")}else In(n)&&(u=n);var c=function t(v){var m=new RegExp("(?:\\d+(?:\\.\\d+)*)("+v+")$").exec(e);return m?m[1]:null}(u);return null===c?null:(o.unit=c,o)},Bt=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,r,o,u;return t=r=o=u=0,isFinite(e.vertical)&&(t=o=+e.vertical),isFinite(e.horizontal)&&(r=u=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(u=+e.left),{top:t,right:r,bottom:o,left:u}},Ut={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var r=(11-6*n-11*e)/4;return-r*r+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(r){var o=e(r);return o<n?n:o>t?t:o}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},_r={number:function(e,n){var t=n-e;return function(r){return e+t*r}},object:function(e,n){var t=Object.keys(e);return function(r){var o,u,c={};for(o=t.length-1;-1!=o;o--)c[u=t[o]]=e[u]+(n[u]-e[u])*r;return c}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),r=parseInt(n.slice(1),16),o=255&t,u=(255&r)-o,c=65280&t,v=(65280&r)-c,m=16711680&t,T=(16711680&r)-m;return function(I){return"#"+(1<<24|o+u*I&255|c+v*I&65280|m+T*I&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=t.exec(e),o=t.exec(n),u=o[1].indexOf("."),c=u>0?o[1].length-u-1:0,v=+o[1]-(e=+r[1]),m=r[2];return function(T){return(e+v*T).toFixed(c)+m}}},gn={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return ur('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return ur('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return ur('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ur(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return ur('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return ur('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ur('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},ur=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(r){for(var o=Array.from(arguments),u=o.slice(1,4).find(function(m){return!!m}),c=u.split("."),v=t[c.shift()];void 0!==v&&c.length;)v=v[c.shift()];return void 0!==v?v:""})}},Nt=R.assign,Hn=R.defaults,gi=R.defaultsDeep,Ur=R.invokeMap||R.invoke,Ni=R.sortedIndexBy||R.sortedIndex,Lo=R.uniqBy||R.uniq,sn=R.clone,er=R.cloneDeep,vi=R.isEmpty,No=R.isEqual,Cn=R.isFunction,vn=R.isPlainObject,un=R.toArray,Vs=R.groupBy,Lu=R.flattenDeep,Pa=R.without,Nu=R.difference,vs=R.union,vr=R.has,lr=R.result,lo=R.omit,ai=R.pick,tr=R.forIn,Ia=R.camelCase,Bs=R.uniqueId,Cr=function(){if(R.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=Cn(n)?n:co;return e.push(function(r,o){var u=t(r,o);return void 0!==u?u:Array.isArray(r)&&!Array.isArray(o)?o:void 0}),R.mergeWith.apply(this,e)}return R.merge.apply(this,arguments)},wn=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},pn=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},In=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},co=function(){};var e,n,wr=f(71066);function Hs(e){e=Lo(e);const n=un(e).reduce(function(t,r){return t[r.id]=r.clone(),t},{});return un(e).forEach(function(t){const r=n[t.id];if(r.isLink()){const c=r.source(),v=r.target();c.id&&n[c.id]&&r.prop("source/id",n[c.id].id),v.id&&n[v.id]&&r.prop("target/id",n[v.id].id)}const o=t.get("parent");o&&n[o]&&r.set("parent",n[o].id);const u=un(t.get("embeds")).reduce(function(c,v){return n[v]&&c.push(n[v].id),c},[]);vi(u)||r.set("embeds",u)}),n}const Wi={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},js=Object.keys(Wi).map(e=>Wi[e]).join(""),mi="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Ee=/\s/g,Ze=new RegExp(`^(${mi}\\*)?([${js}])([-+]{1,2}${mi})?$`,"g");function je(e){throw new Error(`Invalid calc() expression: ${e}`)}function Ct(e,n){const t=Ze.exec(e.replace(Ee,""));t||je(e),Ze.lastIndex=0;const[,r=1,o,u=0]=t,{x:c,y:v,width:m,height:T}=n;let I=0;switch(o){case Wi.width:I=m;break;case Wi.height:I=T;break;case Wi.x:I=c;break;case Wi.y:I=v;break;case Wi.minimum:I=Math.min(T,m);break;case Wi.maximum:I=Math.max(T,m);break;case Wi.diagonal:I=Math.sqrt(T*T+m*m)}return parseFloat(r)*I+function Jt(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(u)}function mn(e){return"string"==typeof e&&e.includes("calc")}const En="calc(".length;function Ro(e,n){let t=e,r=0;for(;;){let o=t.indexOf("calc(",r);if(-1===o)return t;let u=o+En,c=1;e:for(;;){switch(t[u]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:je(t)}u++}let v=t.slice(o+En,u);mn(v)&&(v=Ro(v,n));const m=String(Ct(v,n));t=t.slice(0,o)+m+t.slice(u+1),r=o+m.length}}function fo(e,n){return function(t,r){var o=we(t);t=parseFloat(t),o&&(t/=100);var u={};if(isFinite(t)){var c=o||t>=0&&t<=1?t*r[n]:Math.max(t+r[n],0);u[e]=c}return u}}function Z(e,n,t){return function(r,o){var c,u=we(r);if(r=parseFloat(r),u&&(r/=100),isFinite(r)){var v=o[t]();c=u||r>0&&r<1?v[e]+o[n]*r:v[e]+r}var m=ye();return m[e]=c||0,m}}function he(e,n,t){return function(r,o){var u;u="middle"===r?o[n]/2:r===t?o[n]:isFinite(r)?r>-1&&r<1?-o[n]*r:-r:we(r)?o[n]*parseFloat(r)/100:0;var c=ye();return c[e]=-(o[e]+u),c}}function Ce(e,n){var t="joint-shape",r=n&&n.resetOffset;return function(o,u,c){var v=kt(c),m=v.data(t);if(!m||m.value!==o){var T=e(o);m={value:o,shape:T,shapeBBox:T.bbox()},v.data(t,m)}var I=m.shape.clone(),b=m.shapeBBox.clone(),G=b.origin(),te=u.origin();b.x=te.x,b.y=te.y;var oe=u.maxRectScaleToFit(b,te);return I.scale(0===b.width||0===u.width?1:oe.sx,0===b.height||0===u.height?1:oe.sy,G),r&&I.translate(-G.x,-G.y),I}}function Je(e){var t=Ce(function n(r){return new It(Ve.normalizePathData(r))},e);return function(r,o,u){return{d:t(r,o,u).serialize()}}}function Ae(e){var n=Ce(Tn,e);return function(t,r,o){return{points:n(t,r,o).serialize()}}}function et(e,n){var t=new ye(1,0);return function(r){var o,u,c=this[e](r);return c?(u=n.rotate?c.vector().vectorAngle(t):0,o=c.start):(o=this.path.start,u=0),0===u?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+u+")"}}}function Ye(e){return function(t,r,o){const u=Ve(o);u.attr(e)!==t&&u.attr(e,t)}}function ht(e,n,t){return void 0!==t.text}function vt(){return this.model.isLink()}function Ht(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(n["stroke-opacity"]=r,n["fill-opacity"]=r),n}function zt(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const ct={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Ye("href")},xlinkHref:{set:Ye("xlink:href")},filter:{qualify:vn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:vn,set:zt},stroke:{qualify:vn,set:zt},sourceMarker:{qualify:vn,set:function(e,n,t,r){return e=Nt(Ht(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:vn,set:function(e,n,t,r){return e=Nt(Ht(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:vn,set:function(e,n,t,r){return e=Nt(Ht(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!vn(t.textWrap)},set:function(e,n,t,r){var o=kt(t),u="joint-text",c=o.data(u),v=ai(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:m}=v;mn(m)&&(v.x=Ro(m,n));var T=v.fontSize=r["font-size"]||r.fontSize,I=JSON.stringify([e,v]);if(void 0===c||c!==I){T&&t.setAttribute("font-size",T);var b=v.textPath;if(wn(b)){var G=b.selector;if("string"==typeof G){var te=this.findBySelector(G)[0];te instanceof SVGPathElement&&(v.textPath=Nt({"xlink:href":"#"+te.id},b))}}Ve(t).text(""+e,v),o.data(u,I)}}},textWrap:{qualify:vn,set:function(e,n,t,r){var o=e.width||0,u={};u.width=we(o)?n.width*parseFloat(o)/100:o<=0?n.width+o:o;var c=e.height||0;u.height=we(c)?n.height*parseFloat(c)/100:c<=0?n.height+c:c;var v,m=e.text;void 0===m&&(m=r.text),v=void 0!==m?function(e,n,t={},r={}){var o=n.width,u=n.height,c=r.svgDocument||Ve("svg").node,v=Ve("tspan").node,m=Ve("text").attr(t).append(v).node,T=document.createTextNode("");m.style.opacity=0,m.style.display="block",v.style.display="block",v.appendChild(T),c.appendChild(m),r.svgDocument||document.body.appendChild(c);var I=r.separator||" ",b=r.eol||"\n",G=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,te=r.maxLineCount;pn(te)||(te=1/0);for(var Be,Re,O,oe=e.split(I),Te=[],Pe=[],z=0,J=0,ie=oe.length;z<ie;z++){var ve=oe[z];if(ve){var Me=!1;if(b&&ve.indexOf(b)>=0){if(ve.length>1){for(var Oe=ve.split(b),Ge=0,a=Oe.length-1;Ge<a;Ge++)Oe.splice(2*Ge+1,0,b);oe.splice(z,1,...Oe.filter(Fe=>""!==Fe)),z--,ie=oe.length;continue}Pe[++J]="",Me=!0}if(!Me)if(T.data=Pe[J]?Pe[J]+" "+ve:ve,v.getComputedTextLength()<=o)Pe[J]=T.data,(Be||Re)&&(Te[J++]=!0,Be=0,Re=0);else{if(!Pe[J]||Be){var s=!!Be;if(Be=ve.length-1,s||!Be){if(!Be){if(!Pe[J]){Pe=[];break}oe.splice(z,2,ve+oe[z+1]),ie--,Te[J++]=!0,z--;continue}oe[z]=ve.substring(0,Be),oe[z+1]=ve.substring(Be)+(void 0===oe[z+1]?"":oe[z+1])}else{if(Re)oe.splice(z,2,oe[z]+oe[z+1]),Re=0;else{var d=ve.search(G);d>-1&&d!==ve.length-1&&0!==d&&(Re=d+1,Be=0),oe.splice(z,1,ve.substring(0,Re||Be),ve.substring(Re||Be)),ie++}J&&!Te[J-1]&&J--}z--;continue}J++,z--}var C=null;if(Pe.length>te)C=te-1;else if(void 0!==u){var N;void 0===O&&(O=(N="auto"===t.lineHeight?{value:1.5,unit:"em"}:ze(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===N.unit&&(O*=m.getBBox().height)),O*Pe.length>u&&(C=Math.floor(u/O)-1)}if(null!==C){Pe.splice(C+1);var Y=r.ellipsis;if(!Y||C<0)break;"string"!=typeof Y&&(Y="\u2026");var ae=Pe[C];if(!ae&&!Me)break;var _e,Le,de=ae.length;do{if(Le=ae[de],_e=ae.substring(0,de),Le?Le.match(I)&&(_e+=Le):_e+="string"==typeof I?I:" ",T.data=_e+=Y,v.getComputedTextLength()<=o){Pe[C]=_e;break}de--}while(de>=0);break}}}return r.svgDocument?c.removeChild(m):document.body.removeChild(c),Pe.join(b)}(""+m,u,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",ct.text.set.call(this,v,n,t,r)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var r=kt(t),o="joint-title",u=r.data(o);if(void 0===u||u!==e){r.data(o,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var v=document.createElementNS(t.namespaceURI,"title");v.textContent=e,t.insertBefore(v,c)}}}},lineHeight:{qualify:ht},textVerticalAnchor:{qualify:ht},textPath:{qualify:ht},annotations:{qualify:ht},eol:{qualify:ht},displayEmpty:{qualify:ht},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:vn,set:function(e,n,t){kt(t).css(e)}},html:{set:function(e,n,t){kt(t).html(e+"")}},ref:{},refX:{position:Z("x","width","origin")},refY:{position:Z("y","height","origin")},refDx:{position:Z("x","width","corner")},refDy:{position:Z("y","height","corner")},refWidth:{set:fo("width","width")},refHeight:{set:fo("height","height")},refRx:{set:fo("rx","width")},refRy:{set:fo("ry","height")},refRInscribed:{set:function(e){var n=fo("r","width"),t=fo("r","height");return function(r,o){return(o.height>o.width?n:t)(r,o)}}()},refRCircumscribed:{set:function(e,n){var t=we(e);e=parseFloat(e),t&&(e/=100);var o,r=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(o=t||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:o}}},refCx:{set:fo("cx","width")},refCy:{set:fo("cy","height")},xAlignment:{offset:he("x","width","right")},yAlignment:{offset:he("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:Je({resetOffset:!0})},refDKeepOffset:{set:Je({resetOffset:!1})},refPointsResetOffset:{set:Ae({resetOffset:!0})},refPointsKeepOffset:{set:Ae({resetOffset:!1})},connection:{qualify:vt,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),o=r.divideAtLength(t),u=r.divideAtLength(-t);o&&u&&(n=`${o[0].serialize()} ${u[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:vt,set:et("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:vt,set:et("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:vt,set:et("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:vt,set:et("getTangentAtRatio",{rotate:!1})}};ct["xlink:href"]=ct.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{ct[e]={qualify:mn,set:function(t,r){return{[e]:Ro(t,r)}}}}),ct.refR=ct.refRInscribed,ct.refD=ct.refDResetOffset,ct.refPoints=ct.refPointsResetOffset,ct.atConnectionLength=ct.atConnectionLengthKeepGradient,ct.atConnectionRatio=ct.atConnectionRatioKeepGradient,ct.refX2=ct.refX,ct.refY2=ct.refY,ct.refWidth2=ct.refWidth,ct.refHeight2=ct.refHeight,ct["ref-x"]=ct.refX,ct["ref-y"]=ct.refY,ct["ref-dy"]=ct.refDy,ct["ref-dx"]=ct.refDx,ct["ref-width"]=ct.refWidth,ct["ref-height"]=ct.refHeight,ct["x-alignment"]=ct.xAlignment,ct["y-alignment"]=ct.yAlignment;const ln=ct,cn=wr.Model.extend({constructor:function(e,n){var t,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Bs("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(r=this.parse(r,n)||{}),(t=lr(this,"defaults"))&&(r=Cr({},t,r)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=lr(this.constructor.prototype,"defaults").attrs||{},r={};tr(this.attributes.attrs,function(u,c){const v=n[c];tr(u,function(m,T){wn(m)&&!Array.isArray(m)?tr(m,function(I,b){(!v||!v[T]||!No(v[T][b],I))&&(r[c]=r[c]||{},(r[c][T]||(r[c][T]={}))[b]=I)}):(!v||!No(v[T],m))&&(r[c]=r[c]||{},r[c][T]=m)})});const o=er(lo(this.attributes,"attrs"));return o.attrs=r,o},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};tr(this.get("attrs"),function(u,c){u&&u.port&&(void 0!==u.port.id?n[u.port.id]=u.port:n[u.port]={id:u.port})});var t={};tr(e,function(u,c){n[c]||(t[c]=!0)}),this.graph&&!vi(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(u){t[u.get("target").port]&&u.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(u){t[u.get("source").port]&&u.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const o=this.getEmbeddedCells();for(let u=0,c=o.length;u<c;u++){const v=o[u];v&&v.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],t=t-r.length+1;var o=n.get("cells"),u=o.indexOf(this)!==o.length-r.length;u||(u=r.some(function(c,v){return c.get("z")!==t+v})),u&&(this.startBatch("to-front"),t+=r.length,r.forEach(function(c,v){c.set("z",t+v,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var u=0!==n.get("cells").indexOf(this);u||(u=r.some(function(c,v){return c.get("z")!==t+v})),u&&(this.startBatch("to-back"),t-=r.length,r.forEach(function(c,v){c.set("z",t+v,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const r=Nt([],this.get("embeds"));e.forEach(o=>{r[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,n)}),this.set("embeds",Lo(r),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(r=>r.unset("parent",n)),this.set("embeds",Pa(this.get("embeds"),...e.map(r=>r.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var r=t.shift();n.push(r),t.push.apply(t,r.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(o){n.push.apply(n,o.getEmbeddedCells(e))});else n=un(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=In(e)?e:e.id,r=this.parent();if(n=Hn({deep:!0},n),this.graph&&n.deep){for(;r;){if(r===t)return!0;r=this.graph.getCell(r).parent()}return!1}return r===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return un(Hs([this].concat(this.getEmbeddedCells({deep:!0}))));var n=wr.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var r="/",o=In(e);if(o||Array.isArray(e)){if(arguments.length>1){var u,c;o?c=(u=e).split("/"):(u=e.join(r),c=e.slice());var v=c[0],m=c.length;if((t=t||{}).propertyPath=u,t.propertyValue=n,t.propertyPathArray=c,1===m)return this.set(v,n,t);for(var T={},I=T,b=v,G=1;G<m;G++){var te=c[G],oe=Number.isFinite(o?Number(te):te);I=I[b]=oe?[]:{},b=te}T=Se(T,c,n,"/");var Te=Cr({},this.attributes);t.rewrite&&l(Te,u,"/");var Pe=Cr(Te,T);return this.set(v,Pe[v],t)}return pe(this.attributes,e,r)}return this.set(Cr({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),r=t[0];if("attrs"===r&&(n.dirty=!0),1===t.length)return this.unset(e,n);var o=t.slice(1),u=er(this.get(r));return l(u,o,"/"),this.set(r,u,n)},attr:function(e,n,t){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):In(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,r){r=r||"/",t=Nt({duration:100,delay:10,timingFunction:Ut.linear,valueFunction:_r.number},t);var c,u=0,v=function(b){var G,te,oe;(te=(b-=u=u||b)/t.duration)<1?this._transitionIds[e]=G=X(v):(te=1,delete this._transitionIds[e]),oe=c(t.timingFunction(te)),t.transitionId=G,this.prop(e,oe,t),G||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:m}=this;let T;return T=setTimeout(b=>{m[e]&&(m[e]=Pa(m[e],T),0===m[e].length&&delete m[e]),this.stopPendingTransitions(e,r),c=t.valueFunction(pe(this.attributes,e,r),n),this._transitionIds[e]=X(b),this.trigger("transition:start",this,e)},t.delay,v),m[e]||(m[e]=[]),m[e].push(T),T},getTransitions:function(){return vs(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(u=>No(o,u.split(n).slice(0,o.length)))}return r.forEach(o=>{t[o].forEach(c=>clearTimeout(c)),delete t[o]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(u=>No(o,u.split(n).slice(0,o.length)))}r.forEach(o=>{le(t[o]),delete t[o],this.trigger("transition:end",this,o)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,Nt({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,Nt({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new ye(0,0)},getPointFromConnectedLink:function(){return new ye},getBBox:function(){return new gt(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const r=new ye(n,t);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||ln[e]},define:function(e,n,t,r){t=Nt({defaults:gi({type:e},n,this.prototype.defaults)},t);var o=this.extend(t,r);return"undefined"!=typeof joint&&vr(joint,"shapes")&&Se(joint.shapes,e,o,"."),o}}),At=cn.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?sn(this.get("source")):e instanceof cn?((r=sn(n)||{}).id=e.id,this.set("source",r,t)):vn(e)?this.set("source",r=e,n):((r=sn(n)||{}).x=e.x,r.y=e.y,this.set("source",r,t));var r},target:function(e,n,t){return void 0===e?sn(this.get("target")):e instanceof cn?((r=sn(n)||{}).id=e.id,this.set("target",r,t)):vn(e)?this.set("target",r=e,n):((r=sn(n)||{}).x=e.x,r.y=e.y,this.set("target",r,t));var r},router:function(e,n,t){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?sn(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:n},o?n:t)},connector:function(e,n,t){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?sn(r):r:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:n},o?n:t)},label:function(e,n,t){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),r.splice(e,0,n),this.labels(r,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(n);return this.prop(["vertices",e],o,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],r=0;r<e.length;r++){var o=e[r],u=this._normalizeVertex(o);t.push(u)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var u=this._normalizeVertex(n);return r.splice(e,0,u),this.vertices(r,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return vn(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+n}},t)},scale:function(e,n,t,r){return this.applyToPoints(function(o){return ye(o).scale(e,n,t).toJSON()},r)},applyToPoints:function(e,n){if(!Cn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:r,target:o}=this.attributes;r.id||(t.source=e(r)),o.id||(t.target=e(o));var u=this.vertices();return u.length>0&&(t.vertices=u.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ye(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ye(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ye),this.getTargetPoint()];return new Tn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();t&&r&&(n=t===r||t.isEmbeddedIn(r)?r:r.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,r)),o&&(!n||n.id!==o.id)&&o.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,r=n.id,o=t.id;if(!r||!o)return!1;var u=r===o;if(!u&&e.deep&&this.graph){var c=this.getSourceCell(),v=this.getTargetCell();u=c.isEmbeddedIn(v)||v.isEmbeddedIn(c)}return u},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=In(e)||pn(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function Wn(e,n,t){var r=e.toJSON();return r.angle=n||0,Hn({},t,r)}function Jn(e,n,t){return e.map(function(r,o,u){var c=this.pointAt((o+.5)/u.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),Wn(c.round(),0,r)},Hr(n,t))}function Sr(e,n,t,r){var o=n.center(),u=n.width/n.height,c=n.topMiddle(),v=or.fromRect(n);return e.map(function(m,T,I){var b=t+r(T,I.length),G=c.clone().rotate(o,-b).scale(u,1,o),te=m.compensateRotation?-v.tangentTheta(G):0;return(m.dx||m.dy)&&G.offset(m.dx||0,m.dy||0),m.dr&&G.move(o,m.dr),Wn(G.round(),te,m)})}function On(e,n){var t=n.x;In(t)&&(t=parseFloat(t)/100*e.width);var r=n.y;return In(r)&&(r=parseFloat(r)/100*e.height),Kr(t||0,r||0)}const ta=function(e,n,t){return e.map(On.bind(null,n))},ho=function(e,n,t){return t.fn(e,n,t)},Gr=function(e,n,t){return Jn(e,On(n,t.start||n.origin()),On(n,t.end||n.corner()))},ms=function(e,n,t){return Jn(e,n.origin(),n.bottomLeft())},Aa=function(e,n,t){return Jn(e,n.topRight(),n.corner())},zs=function(e,n,t){return Jn(e,n.origin(),n.topRight())},Rf=function(e,n,t){return Jn(e,n.bottomLeft(),n.corner())},Df=function(e,n,t){var o=t.step||360/e.length;return Sr(e,n,t.startAngle||0,function(u){return u*o})},Ff=function(e,n,t){var o=t.step||20;return Sr(e,n,t.startAngle||0,function(u,c){return(u+.5-c/2)*o})};function $i(e,n){return gi({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function ys(e,n,t,r){r=Hn({},r,{offset:15});var c,v,m,T,o=n.center().theta(e),u=Us(n),I=r.offset,b=0;o<u[1]||o>u[2]?(m=".3em",c=I,v=0,T="start"):o<u[0]?(m="0",c=0,v=-I,t?(b=-90,T="start"):T="middle"):o<u[3]?(m=".3em",c=-I,v=0,T="end"):(m=".6em",c=0,v=I,t?(b=90,T="start"):T="middle");var G=Math.round;return $i({x:G(c),y:G(v),angle:b,attrs:{".":{y:m,"text-anchor":T}}})}function Us(e){var n=e.center(),t=n.theta(e.origin()),r=n.theta(e.bottomLeft()),o=n.theta(e.corner());return[t,n.theta(e.topRight()),o,r]}function $l(e,n,t,r){var u,c,v,m,o=n.center().theta(e),T=(r=Hn({},r,{offset:15})).offset,I=0,b=Us(n);o<b[1]||o>b[2]?(v=".3em",u=-T,c=0,m="end"):o<b[0]?(v=".6em",u=0,c=T,t?(I=90,m="start"):m="middle"):o<b[3]?(v=".3em",u=T,c=0,m="start"):(v="0em",u=0,c=-T,t?(I=-90,m="start"):m="middle");var G=Math.round;return $i({x:G(u),y:G(c),angle:I,attrs:{".":{y:v,"text-anchor":m}}})}function Ru(e,n,t){t=Hn({},t,{offset:20});var m,r=Kr(0,0),o=-e.theta(r),u=o,c=e.clone().move(r,t.offset).difference(e).round(),v=".3em";(o+90)%180==0?(m=n?"end":"middle",!n&&-270===o&&(v="0em")):o>-270&&o<-90?(m="start",u=o-180):m="end";var T=Math.round;return $i({x:T(c.x),y:T(c.y),angle:n?u:0,attrs:{".":{y:v,"text-anchor":m}}})}const Vf=function(e,n,t){return $i(t,n)},Bf=function(e,n,t){return $i(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Tr=function(e,n,t){return $i(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Wr=function(e,n,t){return $i(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Hf=function(e,n,t){return $i(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},jf=function(e,n,t){return ys(e,n,!0,t)},Yl=function(e,n,t){return ys(e,n,!1,t)},zf=function(e,n,t){return $l(e,n,!0,t)},Du=function(e,n,t){return $l(e,n,!1,t)},xs=function(e,n,t){return Ru(e.difference(n.center()),!1,t)},Fu=function(e,n,t){return Ru(e.difference(n.center()),!0,t)};var Ma=function(e){var n=er(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=E,this._init(n)};Ma.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),r=this.getPortsByGroup(e),o=t.position||{},u=o.name,c=this.portLayoutNamespace;c[u]||(u="left");var v=o.args||{},m=r.map(function(b){return b&&b.position&&b.position.args}),T=c[u](m,n,v),I={ports:r,result:[]};return un(T).reduce(function(b,G,te){var oe=b.ports[te];return b.result.push({portId:oe.id,portTransformation:G,labelTransformation:this._getPortLabelLayout(oe,ye(G),n),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),b}.bind(this),I),I.result},_getPortLabelLayout:function(e,n,t){var r=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return r[o]?r[o](n,t,e.label.position.args):null},_init:function(e){if(wn(e.groups))for(var n=Object.keys(e.groups),t=0,r=n.length;t<r;t++){var o=n[t];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var u=un(e.items),c=0,v=u.length;c<v;c++)this.ports.push(this._evaluatePort(u[c]))},_evaluateGroup:function(e){return Cr(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=Nt({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=Cr({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=Cr({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=Nt({},t.size,n.size),n},_getZIndex:function(e,n){return pn(n.z)?n.z:pn(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return Cr({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var r,t={};Cn(e)?(r="fn",t.fn=e):In(e)?r=e:void 0===e?r=n?"left":null:Array.isArray(e)?(r="absolute",t.x=e[0],t.y=e[1]):wn(e)&&(r=e.name,Nt(t,e.args));var o={args:t};return r&&(o.name=r),o},_getLabel:function(e,n){var t=e.label||{},r=t;return r.position=this._getPosition(t.position,n),r}};const bs={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};un(e.items).forEach(function(v){n[v.id]=!0});var t=this.previous("ports")||{},r={};un(t.items).forEach(function(v){n[v.id]||(r[v.id]=!0)});var o=this.graph;o&&!vi(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(v){r[v.get("target").port]&&v.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(v){r[v.get("source").port]&&v.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return er(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=un(this.prop(["ports","items"])).filter(t=>t.group===e);return er(n)},getPort:function(e){return er(un(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,gt(this.size())).reduce(function(t,r){var o=r.portTransformation;return t[r.portId]={x:o.x,y:o.y,angle:o.angle},t},{})},getPortIndex:function(e){var n=wn(e)?e.id:e;return this._isValidPortId(n)?un(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!wn(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=Nt([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const r="number"==typeof e?e:this.getPortIndex(e);if(!wn(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const o=Nt([],this.prop("ports/items"));return o.splice(r,0,n),this.prop("ports/items",o,t),this},portProp:function(e,n,t,r){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var u=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?u[0]=["ports","items",o].concat(n):In(n)?u[0]=["ports/items/",o,"/",n].join(""):(u=["ports/items/"+o],vn(n)&&(u.push(n),u.push(t))),this.prop.apply(this,u)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=un((e=e||{}).items);return t.forEach(function(r){"object"!=typeof r&&n.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),Lo(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!wn(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",Nt([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},r=this.getPortIndex(e);if(-1!==r){const o=Nt([],this.prop(["ports","items"]));o.splice(r,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,r;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;r=Nt([],this.prop(["ports","items"])).filter(function(u){return!e.some(function(c){const v=wn(c)?c.id:c;return u.id===v})})}else t=e||{},r=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],r,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new Ma(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var r=t.filter(function(u){if(!n.find(function(c){return c.id===u.id}))return u}),o=n.filter(function(u){if(!t.find(function(c){return c.id===u.id}))return u});o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},_s={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,r=n.node.childNodes.length;t<r;t++)e.push(n.node.childNodes[t]);var o=Vs(this.model._portSettingsData.getPorts(),"z"),u="auto";un(o[u]).forEach(function(I){var b=this._getPortElement(I);n.append(b),e.push(b)},this);for(var c=Object.keys(o),v=0;v<c.length;v++){var m=c[v];if(m!==u){var T=parseInt(m,10);this._appendPorts(o[m],T,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var r=this._getContainerElement(),o=un(e).map(this._getPortElement,this);t[n]||n<0?Ve(t[Math.max(n,0)]).before(o):r.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const r=t.portContentElement.node,o=t.portContentSelectors,[u=null]=this.findBySelector(n,r,o);return u},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Ur(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,r,o;var u=Ve(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var v=this.parseDOMJSON(c,u.node),m=v.fragment;n=m.childNodes.length>1?Ve("g").append(m):Ve(m.firstChild),o=v.selectors}else n=Ve(c),Array.isArray(n)&&(n=Ve("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const T=this._getPortLabelMarkup(e.label);if(Array.isArray(T)){const{fragment:G,selectors:te}=this.parseDOMJSON(T,u.node),oe=G.childNodes.length;oe>0&&(r=te,t=1===oe?Ve(G.firstChild):Ve("g").append(G))}else t=Ve(T),Array.isArray(t)&&(t=Ve("g").append(t));var I;if(o&&r){for(var b in r)if(o[b]&&b!==this.selector)throw new Error("ElementView: selectors within port must be unique.");I=Nt({},o,r)}else I=o||r;return u.append(n.addClass("joint-port-body")),t&&u.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:u,portLabelElement:t,portSelectors:I,portLabelSelectors:r,portContentElement:n,portContentSelectors:o},u},_updatePortGroup:function(e){for(var n=gt(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),r=0,o=t.length;r<o;r++){var u=t[r],v=this._portElementsCache[u.portId]||{},m=u.portTransformation;this.applyPortTransform(v.portElement,m),this.updateDOMSubtreeAttributes(v.portElement.node,u.portAttrs,{rootBBox:new gt(u.portSize),selectors:v.portSelectors});var T=u.labelTransformation;T&&v.portLabelElement&&(this.applyPortTransform(v.portLabelElement,T,-m.angle||0),this.updateDOMSubtreeAttributes(v.portLabelElement.node,T.attrs,{rootBBox:new gt(u.labelSize),selectors:v.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var r=Ve.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Mr=cn.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),cn.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const r=pn(n);t=(r?t:e)||{};const{parentRelative:o,deep:u,restrictedArea:c}=t;let v;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const m=this.getParentCell();m&&!m.isLink()&&(v=m.get("position"))}if(r){if(v&&(e+=v.x,n+=v.y),u||c){const{x:m,y:T}=this.get("position");this.translate(e-m,n-T,t)}else this.set("position",{x:e,y:n},t);return this}{const m=ye(this.get("position"));return o?m.difference(v):m}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=t.restrictedArea;if(o&&t.translateBy===this.id)if("function"==typeof o){var u=o.call(this,r.x+e,r.y+n,t);e=u.x-r.x,n=u.y-r.y}else{var c=this.getBBox({deep:!0}),v=r.x-c.x,m=r.y-c.y,T=Math.max(o.x+v,Math.min(o.x+o.width+v-c.width,r.x+e)),I=Math.max(o.y+m,Math.min(o.y+o.height+m-c.height,r.y+n));e=T-r.x,n=I-r.y}var b={x:r.x+e,y:r.y+n};return t.tx=e,t.ty=n,t.transition?(wn(t.transition)||(t.transition={}),this.transition("position",b,Nt({},t.transition,{valueFunction:_r.object})),Ur(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",b,t),Ur(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(wn(e)&&(t=n,n=pn(e.height)?e.height:r.height,e=pn(e.width)?e.width:r.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var r=this.get("size");switch(t.direction){case"left":case"right":n=r.height;break;case"top":case"bottom":e=r.width}var c,o=Xe(this.get("angle")||0),u=this.getBBox();if(o){var v={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(v+=Math.floor((o+45)/90),v%=4);var m=u[["bottomLeft","corner","topRight","origin"][v]](),T=ye(m).rotate(u.center(),-o),I=Math.sqrt(e*e+n*n)/2,b=v*Math.PI/2;b+=Math.atan(v%2==0?n/e:e/n),b-=Lt(o);var G=ye.fromPolar(I,b,T);c=ye(G).offset(e/-2,n/-2)}else switch(c=u.topLeft(),t.direction){case"top":case"top-right":c.offset(0,u.height-n);break;case"left":case"bottom-left":c.offset(u.width-e,0);break;case"top-left":c.offset(u.width-e,u.height-n)}this.set("size",{width:e,height:n},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,r){var o=this.getBBox().scale(e,n,t);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(b=>b.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&Ur(t,"fitEmbeds",e);const{left:r,right:o,top:u,bottom:c}=Bt(e.padding);let{x:v,y:m,width:T,height:I}=n.getCellsBBox(t);return v-=r,m-=u,T+=r+o,I+=c+u,this.set({position:{x:v,y:m},size:{width:T,height:I}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,r){if(t){var o=this.getBBox().center(),u=this.get("size"),c=this.get("position");o.rotate(t,this.get("angle")-e);var v=o.x-u.width/2-c.x,m=o.y-u.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(c.x+v,c.y+m,r),this.rotate(e,n,null,r),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,r);return this},angle:function(){return Xe(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:r,rotate:o}=e;if(r&&n){const b=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return b.push(this),n.getCellsBBox(b,e)}const{angle:u=0,position:{x:c,y:v},size:{width:m,height:T}}=t,I=new gt(c,v,m,T);return o&&I.rotateAroundCenter(u),I},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),r=t.center(),o=e.get(n);if(!o)return r;var u=o.port;if(!u||!this.hasPort(u))return r;var c=this.portProp(u,["group"]),v=this.getPortsPositions(c),m=new ye(v[u]).offset(t.origin()),T=this.angle();return T&&m.rotate(r,-T),m}});Nt(Mr.prototype,bs);const Vu={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,r=t>0&&n[0]||[],o=t>1&&n[t-1]||{};return Array.isArray(r)||(o instanceof cn?r=n:r instanceof cn&&(n.length>1&&n.pop(),r=n)),o instanceof cn&&(o={}),e.call(this,r,o)}}},Uf=wr.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&vr(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,u=new("link"===e.type?At:pe(t.cellNamespace,e.type,".")||Mr)(e,n);return n.dry||(u.graph=t.graph),u},comparator:function(e){return e.get("z")||0}}),Do=wr.Model.extend({initialize:function(e,n){var t=new Uf([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});wr.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=wr.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var r;return"object"==typeof e?(r=e,t=n):(r={})[e]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,t),r=lo(r,"cells")),wr.Model.prototype.set.call(this,r,t)},clear:function(e){e=Nt({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(r){return r.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof wr.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!In(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof wr.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=Lu(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=un(e).map(function(r){return this._prepareCell(r,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),Ur(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,r=n.inbound,o=n.outbound;void 0===r&&void 0===o&&(r=o=!0);var u=[],c={};function v(b,G){if(tr(b.getOutboundEdges(G.id),function(oe,Te){if(!c[Te]){var Pe=b.getCell(Te);u.push(Pe),c[Te]=!0,t&&(r&&m(b,Pe),o&&v(b,Pe))}}.bind(b)),t&&G.isLink()){var te=G.getTargetCell();te&&te.isLink()&&(c[te.id]||(u.push(te),v(b,te)))}}function m(b,G){if(tr(b.getInboundEdges(G.id),function(oe,Te){if(!c[Te]){var Pe=b.getCell(Te);u.push(Pe),c[Te]=!0,t&&(r&&m(b,Pe),o&&v(b,Pe))}}.bind(b)),t&&G.isLink()){var te=G.getSourceCell();te&&te.isLink()&&(c[te.id]||(u.push(te),m(b,te)))}}if(o&&v(this,e),r&&m(this,e),n.deep){var T=e.getEmbeddedCells({deep:!0}),I={};T.forEach(function(b){b.isElement()&&(I[b.id]=!0)}),T.forEach(function(b){b.isLink()||(o&&tr(this.getOutboundEdges(b.id),function(G,te){if(!c[te]){var oe=this.getCell(te),{source:Te,target:Pe}=oe.attributes,Be=Te.id,Re=Pe.id;if(!n.includeEnclosed&&Be&&I[Be]&&Re&&I[Re])return;u.push(this.getCell(te)),c[te]=!0}}.bind(this)),r&&tr(this.getInboundEdges(b.id),function(G,te){if(!c[te]){var oe=this.getCell(te),{source:Te,target:Pe}=oe.attributes,Be=Te.id,Re=Pe.id;if(!n.includeEnclosed&&Be&&I[Be]&&Re&&I[Re])return;u.push(this.getCell(te)),c[te]=!0}}.bind(this)))},this)}return u},getNeighbors:function(e,n){n||(n={});var t=n.inbound,r=n.outbound;void 0===t&&void 0===r&&(t=r=!0);var o=this.getConnectedLinks(e,n).reduce(function(v,m){var{source:T,target:I}=m.attributes,b=m.hasLoop(n);if(t&&vr(T,"id")&&!v[T.id]){var G=this.getCell(T.id);G.isElement()&&(b||G&&G!==e&&(!n.deep||!G.isEmbeddedIn(e)))&&(v[T.id]=G)}if(r&&vr(I,"id")&&!v[I.id]){var te=this.getCell(I.id);te.isElement()&&(b||te&&te!==e&&(!n.deep||!te.isEmbeddedIn(e)))&&(v[I.id]=te)}return v}.bind(this),{});if(e.isLink()){if(t){var u=e.getSourceCell();u&&u.isElement()&&!o[u.id]&&(o[u.id]=u)}if(r){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return un(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var r=[],o=t.get("parent");o;)r.push(o),o=this.getCell(o).get("parent");return r},this);e=e.sort(function(t,r){return t.length-r.length});var n=un(e.shift()).find(function(t){return e.every(function(r){return r.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},Nt({},n=n||{},{outbound:!0})),t},cloneCells:Hs,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],r={},o=[],u=[];return un(e).forEach(function(c){r[c.id]||(t.push(c),r[c.id]=c,c.isLink()?u.push(c):o.push(c)),n.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(m){r[m.id]||(t.push(m),r[m.id]=m,m.isLink()?u.push(m):o.push(m))})}),u.forEach(function(c){var{source:v,target:m}=c.attributes;if(v.id&&!r[v.id]){var T=this.getCell(v.id);t.push(T),r[T.id]=T,o.push(T)}if(m.id&&!r[m.id]){var I=this.getCell(m.id);t.push(this.getCell(m.id)),r[I.id]=I,o.push(I)}},this),o.forEach(function(c){this.getConnectedLinks(c,n).forEach(function(m){var{source:T,target:I}=m.attributes;!r[m.id]&&T.id&&r[T.id]&&I.id&&r[I.id]&&(t.push(m),r[m.id]=m)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},Nt({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const r={},o={},u=[];for(u.push(e),o[e.id]=0;u.length>0;){var c=u.shift();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const v=this.getNeighbors(c,t);for(let m=0,T=v.length;m<T;m++){const I=v[m];o[I.id]=o[c.id]+1,u.push(I)}}},dfs:function(e,n,t={}){const r={},o={},u=[];for(u.push(e),o[e.id]=0;u.length>0;){const c=u.pop();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const v=this.getNeighbors(c,t),m=u.length;for(let T=0,I=v.length;T<I;T++){const b=v[T];o[b.id]=o[c.id]+1,u.splice(m,0,b)}}},getSources:function(){var e=[];return tr(this._nodes,function(n,t){(!this._in[t]||vi(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return tr(this._nodes,function(n,t){(!this._out[t]||vi(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||vi(this._in[e.id])},isSink:function(e){return!this._out[e.id]||vi(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var r=(t=t||{}).inbound,o=t.outbound;void 0===r&&void 0===o&&(r=o=!0);var u=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:v,target:m}=c.attributes;if(r&&vr(v,"id")&&v.id===n.id||o&&vr(m,"id")&&m.id===n.id)return u=!0,!1}),u},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){Ur(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new gt(e),{strict:r=!1}=n,o=r?"containsRect":"intersect";return this.getElements().filter(u=>t[o](u.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(r):this.findModelsFromPoint(r[t]())).filter(u=>e.id!==u.id&&!u.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return un(e).reduce(function(r,o){const u=o.getBBox({rotate:t});return u?r?r.union(u):u:r},null)},translate:function(e,n,t){var r=this.getCells().filter(function(o){return!o.isEmbedded()});return Ur(r,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,r){var o=this.getCellsBBox(t);if(o){var u=Math.max(e/o.width,0),c=Math.max(n/o.height,0);Ur(t,"scale",u,c,o.origin(),r)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Nt({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Nt({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(r=>n[r]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:r}=n.attributes;if(t.id&&r.id){var o=n.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(v){var{source:m,target:T}=v.attributes;return m&&m.id===t.id&&(!m.port||m.port===t.port)&&T&&T.id===r.id&&(!T.port||T.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:r}=n.attributes;return t.id&&r.id}}});!function(e,n,t){if(In(t)){if(!Vu[t])throw new Error('Unknown wrapper: "'+t+'"');t=Vu[t]}if(!Cn(t))throw new Error("Wrapper must be a function.");un(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=t(e[r])})}(Do.prototype,0,Vu.cells);const Cs={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var r=this.getCell(n),o=t.node(n);e.setPosition?e.setPosition(r,o):r.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,n,t){const o=this.getCell(n.name),u=t.edge(n),c=u.points||[],v=new Tn(c);if(e.setVertices||e.setLinkVertices)if(Cn(e.setVertices))e.setVertices(o,c);else{v.simplify({threshold:.001});const m=v.points.map(I=>I.toJSON());o.set("vertices",m.slice(1,m.length-1))}if(e.setLabels&&"x"in u&&"y"in u){const m={x:u.x,y:u.y};if(Cn(e.setLabels))e.setLabels(o,m,c);else{const T=v.closestPointLength(m),I=v.pointAtLength(T),b=T/v.length(),G=new ye(m).difference(I).toJSON();o.label(0,{position:{distance:b,offset:G}})}}},layout:function(e,n){var t;t=e instanceof Do?e:(new Do).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(n=Hn(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Cs.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(I){return I.id}}),u={},c=n.marginX||0,v=n.marginY||0;if(n.rankDir&&(u.rankdir=n.rankDir),n.align&&(u.align=n.align),n.nodeSep&&(u.nodesep=n.nodeSep),n.edgeSep&&(u.edgesep=n.edgeSep),n.rankSep&&(u.ranksep=n.rankSep),n.ranker&&(u.ranker=n.ranker),c&&(u.marginx=c),v&&(u.marginy=v),o.setGraph(u),r.layout(o,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),Cs.fromGraphLib(o,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var m=o.nodes().filter(function(I){return o.children(I).length>0}).map(t.getCell.bind(t)).sort(function(I,b){return b.getAncestors().length-I.getAncestors().length});Ur(m,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var T=o.graph();return new gt(c,v,Math.abs(T.width-2*c),Math.abs(T.height-2*v))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||co,r=n.importEdge||co,o=this instanceof Do?this:new Do;return e.nodes().forEach(function(u){t.call(o,u,e,o,n)}),e.edges().forEach(function(u){r.call(o,u,e,o,n)}),o},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=ai(n,"directed","compound","multigraph"),o=new t.Graph(r),u=n.setNodeLabel||co,c=n.setEdgeLabel||co,v=n.setEdgeName||co,m=e.get("cells"),T=0,I=m.length;T<I;T++){var b=m.at(T);if(b.isLink()){var G=b.get("source"),te=b.get("target");if(!G.id||!te.id)break;o.setEdge(G.id,te.id,c(b),v(b))}else if(o.setNode(b.id,u(b)),o.isCompound()&&b.has("parent")){var oe=b.get("parent");m.has(oe)&&o.setParent(b.id,oe)}}return o}};Do.prototype.toGraphLib=function(e){return Cs.toGraphLib(this,e)},Do.prototype.fromGraphLib=function(e,n){return Cs.fromGraphLib.call(this,e,n)};const Gf={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(r){t=!1}return this._results[e]=t,t}},Xl=(Mr.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Mr.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Mr.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Mr.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Mr.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Mr.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Mr.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Mr.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Mr.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Mr.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Mr.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Mr.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=we(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=we(e);t&&(e=parseFloat(e)/100);var r=n.x,o=n.y,u=n.width,c=n.height,m=t?c*e:e,T=Ve.KAPPA,I=T*(u/2),b=T*(t?c*e:e),te=r+u/2,oe=r+u,Te=o+m,Pe=Te-m,Be=o+c-m,Re=o+c;return{d:["M",r,Te,"L",r,Be,"C",r,Be+b,te-I,Re,te,Re,"C",te+I,Re,oe,Be+b,oe,Be,"L",oe,Te,"C",oe,Te-b,te+I,Pe,te,Pe,"C",te-I,Pe,r,Te-b,r,Te,"Z"].join(" ")}}}}});var Yf=Gf.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Mr.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Yf]},{attributes:{text:{set:function(e,n,t,r){if(!(t instanceof HTMLElement)){var o=r.style||{},u={text:e,width:-5,height:"100%"},c=Nt({textVerticalAnchor:"middle"},o);return ln.textWrap.set.call(this,u,n,t,c),{fill:o.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const Vo=At.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),ka=(At.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),At.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Ka=wr.View.extend({options:{},theme:null,themeClassNamePrefix:Rr("theme-"),requireSetThemeOverride:!1,defaultTheme:Nr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Nt({},this.options,e),wr.View.call(this,e)},initialize:function(){ka[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=lr(this,"children")),e){var n=this.svgElement,r=Q(e,Ve.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var r=t.getAttribute(e);if(r)return r;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(lr(this,"el"));else{var e=lr(this,"tagName"),n=Nt({},lr(this,"attributes")),t=Nt({},lr(this,"style"));this.id&&(n.id=lr(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(Ve.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof wr.$?e:wr.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=Ve(this.el))},_ensureElClassName:function(){var e=lr(this,"className");if(e){var n=Rr(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),ka[this.cid]=null,wr.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var r=this.getEventNamespace();for(var o in n){var u=n[o];"function"!=typeof u&&(u=this[u]),u&&kt(e).on(o+r,t,u.bind(this))}return this},undelegateElementEvents:function(e){return kt(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=lr(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,r="__"+this.cid+"__";return void 0===n?t&&t[r]||{}:(t||(t=e.data={}),t[r]||(t[r]={}),Nt(t[r],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&Nt({},e[0])||{},t=e[1]&&Nt({},e[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,wr.View.extend.call(this,n,t)}});if(kt.event&&!("dbltap"in kt.event.special)){const e=Nr.doubleTapInterval,n=30;kt.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...r){const{handleObj:o,target:u}=t,c=kt.data(u),v=(new Date).getTime(),m="lastTouch"in c?v-c.lastTouch:0;m<e&&m>n?(c.lastTouch=null,t.type=o.origType,o.handler.call(this,t,...r)):c.lastTouch=v}}}function Xi(e){return e?Array.isArray(e)?e:[e]:[]}const na=Ka.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(vn(n)){const r=e.model.isLink(),{label:o=null,port:u,selector:c}=n;r&&null!==o?t=e.findLabelNode(o,c):!r&&u?t=e.findPortNode(u,c):[t]=e.findBySelector(c)}else n&&(t=Ve.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:r,transformGroup:o}=this;if(!e||o)return;const{vel:u,paper:c}=n,{layer:v}=r;if(v){const m=this.transformGroup=Ve("g").addClass("highlight-transform").append(t);c.getLayerView(v).insertSortedNode(m.node,r.z)}else(!t.parentNode||t.nextSibling)&&u.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const r=n.getRootTranslateMatrix(),o=n.getRootRotateMatrix(),u=r.multiply(o);e.attr("transform",Ve.matrixToTransformString(u))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:r,id:o}=this;if(r)return;const u=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),u?(this.highlight(n,u),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:r}=this;e&&this.unhighlight(n,e),this.unmount(),r._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const r=this.uniqueId(n,t);this.add(e,n,r,t)},unhighlight:function(e,n,t){const r=this.uniqueId(n,t);this.remove(e,r)},get(e,n=null){const{cid:t}=e,{_views:r}=this,o=r[t];if(null===n){const u=[];if(!o)return u;for(let c in o){const v=o[c];v instanceof this&&u.push(v)}return u}if(!o)return null;if(n in o){const u=o[n];if(u instanceof this)return u}return null},add(e,n,t,r={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const o=na.get(e,t);o&&o.remove();const u=new this(r);return u.id=t,this._addRef(e,t,u),u.requestUpdate(e,n),u},_addRef(e,n,t){const{cid:r}=e,{_views:o}=this;let u=o[r];u||(u=o[r]={}),u[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:r}=this,o=r[t];if(o){n&&delete o[n];for(let u in o)return;delete r[t]}},remove(e,n=null){Xi(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){Xi(this.get(e,n)).forEach(r=>{(t||r.UPDATABLE)&&r.update()})},transform(e,n=null){Xi(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>Ve.ensureId(e)+JSON.stringify(n)}),Ja={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},xn=Ka.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,r,o){e.push("type-"+o.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,o,u,e={},n={},t=0,c=lr(this,"presentationAttributes");for(var v in c)if(c.hasOwnProperty(v)){var m=c[v];for(Array.isArray(m)||(m=[m]),r=0,o=m.length;r<o;r++){var T=e[u=m[r]];T||(T=e[u]=1<<t++),n[v]|=T}}var I=lr(this,"initFlag");for(Array.isArray(I)||(I=[I]),r=0,o=I.length;r<o;r++)e[u=I[r]]||(e[u]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)t|=n[e[r]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||w(this),Ka.call(this,e)},initialize:function(){this.setFlags(),Ka.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=Q(e),r=t.selectors,o=t.groupSelectors;for(var u in o){if(r[u])throw new Error("dia.CellView: ambiguous group selector");r[u]=o[u]}if(n){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=n}return{fragment:t.fragment,selectors:r}},can:function(e){var n=Cn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return wn(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var r=t[e];if(r)return Array.isArray(r)?r:[r]}return Nr.useCSSSelectors?kt(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return Ve.transformRect(n,r.multiply(o).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return Ve.transformRect(n,r.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return Ve.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=Ve.createSVGMatrix(),n=this.model,t=n.angle();if(t){var r=n.getBBox(),o=r.width/2,u=r.height/2;e=e.translate(o,u).rotate(t).translate(-o,-u)}return e},_notifyHighlight:function(e,n,t={}){const{el:r}=this;let o;if([o=r]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=o!==r,void 0===t.type){let u;switch(!0){case t.embedding:u=Ja.EMBEDDING;break;case t.connecting:u=Ja.CONNECTING;break;case t.magnetAvailability:u=Ja.MAGNET_AVAILABILITY;break;case t.elementAvailability:u=Ja.ELEMENT_AVAILABILITY;break;default:u=Ja.DEFAULT}t.type=u}return this.notify(e,o,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const r=t.getAttribute("magnet"),o=t===n;if((r||o)&&"false"!==r)return t;if(o)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[r]=this.findBySelector(t);if(r)return r}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var r=Ve(e).index()+1;t=e.tagName+":nth-child("+r+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var r=this.paper,o=r.model,u=r.getDefaultLink(this,e);return u.set({source:this.getLinkEnd(e,n,t,u,"source"),target:{x:n,y:t}}).addTo(o,{async:!1,ui:!0}),u.findView(r)},getLinkEnd:function(e,...n){var t=this.model,r=t.id,o=this.findAttribute("port",e),u=e.getAttribute("joint-selector"),c={id:r};return null!=u&&(c.magnet=u),null!=o?(c.port=o,!t.hasPort(o)&&!u&&(c.selector=this.getSelector(e))):null==u&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...n)},customizeLinkEnd:function(e,n,t,r,o,u){const{paper:c}=this,{connectionStrategy:v}=c.options;if("function"==typeof v){var m=v.call(c,e,this,n,new ye(t,r),o,u,c);if(m)return m}return e},getMagnetFromLinkEnd:function(e){var u,n=this.el,t=e.port,r=e.magnet,o=this.model;return null!=t&&o.isElement()&&o.hasPort(t)?u=this.findPortNode(t,r)||n:(r||(r=e.selector),!r&&null!=t&&(r='[port="'+t+'"]'),u=this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(u,"magnet")},dragLinkStart:function(e,n,t,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(n,t,r);o.notifyPointerdown(e,t,r),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,n,t){var r=this.eventData(e),o=r.linkView;if(o)o.pointermove(e,n,t);else{var u=this.paper,c=u.options.magnetThreshold,v=this.getEventTarget(e),m=r.targetMagnet;if("onleave"===c){if(m===v||Ve(m).contains(v))return}else if(u.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,m,n,t)}},dragLinkEnd:function(e,n,t){var o=this.eventData(e).linkView;!o||(o.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){vi(n)||(e instanceof SVGElement?Ve(e).attr(n):kt(e).attr(n))},processNodeAttributes:function(e,n){var t,r,o,u,c,v,m,T,I,b=[];for(t in n)!n.hasOwnProperty(t)||(r=n[t],!(o=this.getAttributeDefinition(t))||Cn(o.qualify)&&!o.qualify.call(this,r,e,n)?(v||(v={}),v[D(t)]=r):(In(o.set)&&(v||(v={}),v[o.set]=r),null!==r&&b.push(t,o)));for(u=0,c=b.length;u<c;u+=2)r=n[t=b[u]],Cn((o=b[u+1]).set)&&(m||(m={}),m[t]=r),Cn(o.position)&&(T||(T={}),T[t]=r),Cn(o.offset)&&(I||(I={}),I[t]=r);return{raw:n,normal:v,set:m,position:T,offset:I}},updateRelativeAttributes:function(e,n,t,r){r||(r={});var o,u,v=n.raw||{},m=n.normal||{},T=n.set,I=n.position,b=n.offset;for(o in T){u=T[o];var G=this.getAttributeDefinition(o).set.call(this,u,t.clone(),e,v);wn(G)?Nt(m,G):void 0!==G&&(m[o]=G)}if(e instanceof HTMLElement)this.setNodeAttributes(e,m);else{var Pe,Be,Re,te=m.transform,oe=Ve.transformStringToMatrix(te),Te=ye(oe.e,oe.f);if(te&&(m=lo(m,"transform"),oe.e=oe.f=0),I||b){var O=this.getNodeScale(e,r.scalableNode);Pe=O.sx,Be=O.sy}var z=!1;for(o in I)u=I[o],(Re=this.getAttributeDefinition(o).position.call(this,u,t.clone(),e,v))&&(Te.offset(ye(Re).scale(Pe,Be)),z||(z=!0));this.setNodeAttributes(e,m);var J=!1;if(b){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var ve=Ve.transformRect(ie,oe).scale(1/Pe,1/Be);for(o in b)u=b[o],(Re=this.getAttributeDefinition(o).offset.call(this,u,ve,e,v))&&(Te.offset(ye(Re).scale(Pe,Be)),J||(J=!0))}}(void 0!==te||z||J)&&(Te.round(1),oe.e=Te.x,oe.f=Te.y,e.setAttribute("transform",Ve.matrixToTransformString(oe)))}},getNodeScale:function(e,n){var t,r;if(n&&n.contains(e)){var o=n.scale();t=1/o.sx,r=1/o.sy}else t=1,r=1;return{sx:t,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=Ve.ensureId(e),r=n[t];return r||(r=n[t]={}),r},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=Ve(e).getBBox()),new gt(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=Ve(e).getTransformToElement(t)}return Ve.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=Ve(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,r){var o,u,c,v,m={},T=[];for(var I in e)if(e.hasOwnProperty(I)&&vn(c=e[I])){var b=t[I]=this.findBySelector(I,n,r);for(o=0,u=b.length;o<u;o++){var G=b[o];v=Ve.ensureId(G);var te=r&&r[I]===G,oe=m[v];if(oe){oe.array||(T.push(v),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var Te=oe.attributes,Pe=oe.selectedLength;if(te)Te.unshift(c),Pe.unshift(-1);else{var Be=Ni(Pe,u);Te.splice(Be,0,c),Pe.splice(Be,0,u)}}else m[v]={attributes:c,selectedLength:te?-1:u,node:G,array:!1}}}for(o=0,u=T.length;o<u;o++)(c=m[v=T[o]]).attributes=Cr({},...c.attributes.reverse());return m},getEventTarget:function(e,n={}){const{target:t,type:r,clientX:o=0,clientY:u=0}=e;return n.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,u):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=gt()),t.selectors||(t.selectors=this.selectors);var v,m,T,I,b,r={},o={},u=[],c=[],G=t.roAttributes,te=this.findNodesAttributes(G||n,e,r,t.selectors),oe=G?this.findNodesAttributes(n,e,r,t.selectors):te;for(var Te in te)if((b=this.processNodeAttributes(m=(I=te[Te]).node,T=I.attributes)).set||b.position||b.offset){var Re,Pe=oe[Te]&&oe[Te].attributes,Be=Pe&&void 0===T.ref?Pe.ref:T.ref;if(Be){if(!(Re=(r[Be]||this.findBySelector(Be,e,t.selectors))[0]))throw new Error('dia.CellView: "'+Be+'" reference does not exist.')}else Re=null;if(v={node:m,refNode:Re,processedAttributes:b,allAttributes:Pe},Re){var O=c.findIndex(function(d){return d.refNode===m});O>-1?c.splice(O,0,v):c.push(v)}else u.push(v)}else this.setNodeAttributes(m,b.normal);u.push(...c);for(var z,J=0,ie=u.length;J<ie;J++){m=(v=u[J]).node,Re=v.refNode;var ve=Ve(t.rotatableNode),Me=Re?Ve.ensureId(Re):"",Oe=!!ve&&!!Re&&ve.contains(Re),Ge=o[Me];if(!Ge){var a=Oe?ve:e;Ge=o[Me]=Re?Ve(Re).getBBox({target:a}):t.rootBBox}G?(b=this.processNodeAttributes(m,v.allAttributes),this.mergeProcessedAttributes(b,v.processedAttributes)):b=v.processedAttributes;var s=Ge;Oe&&!ve.contains(m)&&(z||(z=Ve.transformStringToMatrix(ve.attr("transform"))),s=Ve.transformRect(Ge,z)),this.updateRelativeAttributes(m,b,s,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Nt(e.set,n.set),Nt(e.position,n.position),Nt(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){na.remove(this)},updateHighlighters:function(e=!1){na.update(this,null,e)},transformHighlighters:function(){na.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,n,t),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,r){this.notify("cell:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){this.notify(n,e,t,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),r=n.findView(t);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:Ja,addPresentationAttributes:function(e){return Cr({},lr(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return Lo(n.concat(t))})}}),bn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ws=xn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=xn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){xn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[bn.UPDATE],position:[bn.TRANSLATE,bn.TOOLS],size:[bn.RESIZE,bn.PORTS,bn.TOOLS],angle:[bn.ROTATE,bn.TOOLS],markup:[bn.RENDER],ports:[bn.PORTS]},initFlag:[bn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=Nr;this.hasFlag(e,bn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,bn.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[bn.RENDER,bn.UPDATE,bn.RESIZE,bn.TRANSLATE,bn.ROTATE,bn.PORTS,bn.TOOLS]);else{let o=!1;this.hasFlag(e,bn.RESIZE)&&(this.resize(n),o=!0,e=this.removeFlag(e,[bn.RESIZE,bn.UPDATE])),this.hasFlag(e,bn.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,bn.UPDATE),o=!0,t&&(e=this.removeFlag(e,bn.PORTS))),this.hasFlag(e,bn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,bn.TRANSLATE),r=!0),this.hasFlag(e,bn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,bn.ROTATE),r=!0),this.hasFlag(e,bn.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,bn.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,bn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,bn.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=Nr;t&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new gt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===o?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=Ve(t[this.rotatableSelector])||null,this.scalableNode=Ve(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(Ve(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Nr.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),r=n.size(),o=this.scalableNode,u=!1;o.node.getElementsByTagName("path").length>0&&(u=!0);var c=o.getBBox({recursive:u});o.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var T=this.rotatableNode,I=T&&T.attr("transform");if(I){T.attr("transform",I+" rotate("+-t+","+r.width/2+","+r.height/2+")");var b=o.getBBox({target:this.paper.cells});n.set("position",{x:b.x,y:b.y},Nt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,r=(e.paper||this.paper).model,o=e.initialZIndices={},u=n.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...u,...c].forEach(T=>o[T.id]=T.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const v=r.getElements().reduce((T,I)=>Math.max(T,I.attributes.z||0),0);c.forEach(T=>{T.attributes.z<=v&&T.set("z",v+1,{ui:!0})}),n.stopBatch("to-front");const m=n.parent();m?(r.getCell(m).unembed(n,{ui:!0}),e.initialParentId=m):e.initialParentId=null},processEmbedding:function(e={},n,t,r){const o=e.model||this.model,u=e.paper||this.paper,c=u.model,{findParentBy:v,frontParentOnly:m,validateEmbedding:T}=u.options;let I;I=Cn(v)?un(v.call(c,this,n,t,r)):"pointer"===v?un(c.findModelsFromPoint({x:t,y:r})):c.findModelsUnderElement(o,{searchBy:v}),I=I.filter(te=>te instanceof cn&&o.id!==te.id&&!te.isEmbeddedIn(o)),m&&(I=I.slice(-1));let b=null;const G=e.candidateEmbedView;for(let te=I.length-1;te>=0;te--){const oe=I[te];if(G&&G.model.id==oe.id){b=G;break}{const Te=oe.findView(u);if(!Cn(T)||T.call(u,this,Te)){b=Te;break}}}b&&b!=G&&(this.clearEmbedding(e),e.candidateEmbedView=b.highlight(b.findProxyNode(null,"container"),{embedding:!0})),!b&&G&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,r=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=r.options,{initialParentId:u}=e;if(u&&"function"==typeof o&&!o.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(t,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,r=n||this.model,u=(e.paper||this.paper).model;switch(t){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:v,initialZIndices:m}=e;if(v){const{x:I,y:b}=v;r.position(I,b,{deep:!0,ui:!0})}m&&Object.keys(m).forEach(I=>{const b=u.getCell(I);b&&b.set("z",m[I],{ui:!0})});const T=u.getCell(c);T&&T.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const r=this.findAttribute("port",e);if(r){const o=this.findPortNode(r,t);if(o)return o}else{const[o]=this.findBySelector(t);if(o)return o}}return e},notifyPointerdown(e,n,t){xn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){xn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),xn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){xn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){xn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){xn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(r.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,r)},pointerup:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(r.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var o=r.targetMagnet;o&&this.magnetpointerclick(e,o,n,t),this.checkMouseleave(e)},mouseover:function(e){xn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){xn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){xn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){xn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,r){xn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,r)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,r){this.notify("element:magnet:pointerdblclick",e,n,t,r)},magnetcontextmenu:function(e,n,t,r){this.notify("element:magnet:contextmenu",e,n,t,r)},dragStart:function(e,n,t){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const o=r.model.position();r.eventData(e,{initialPosition:o,pointerOffset:o.difference(n,t),restrictedArea:this.paper.getRestrictedArea(r,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),o.options.validateMagnet(this,r,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,r,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),o.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var r=this.paper,o=r.options.gridSize,u=this.model,c=this.eventData(e),{pointerOffset:v,restrictedArea:m,embedding:T}=c,I=pt(n+v.x,o),b=pt(t+v.y,o);u.position(I,b,{restrictedArea:m,deep:!0,ui:!0}),r.options.embeddingMode&&(T||(this.prepareEmbedding(c),T=!0),this.processEmbedding(c,e,n,t)),this.eventData(e,{embedding:T})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,r){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,r)}},{Flags:bn});Nt(Ws.prototype,_s);const Oa=function(e,n,t){return e},Xf=function(e,n,t){var T,I,b,r=n.side||"bottom",o=Bt(n.padding||40),u=t.sourceBBox,c=t.targetBBox,v=u.center(),m=c.center();switch(r){case"bottom":b=1,T="y",I="height";break;case"top":b=-1,T="y",I="height";break;case"left":b=-1,T="x",I="width";break;case"right":b=1,T="x",I="width";break;default:throw new Error("Router: invalid side")}return v[T]+=b*(u[I]/2+o[r]),m[T]+=b*(c[I]/2+o[r]),b*(v[T]-m[T])>0?m[T]=v[T]:v[T]=m[T],[v].concat(e,m)};var Kf={N:"S",S:"N",E:"W",W:"E"},Ki={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function $s(e,n,t){var r=new ye(e.x,n.y);return t.containsPoint(r)&&(r=new ye(n.x,e.y)),r}function ju(e,n){return e["W"===n||"E"===n?"width":"height"]}function Qr(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function Ys(e){return new gt(e.x,e.y,0,0)}function Xs(e){var n=Bt(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function zu(e,n){return e.sourceBBox.clone().moveAndExpand(Xs(n))}function Uu(e,n){return e.targetBBox.clone().moveAndExpand(Xs(n))}function Ks(e,n,t){var r=new ye(e.x,n.y),o=new ye(n.x,e.y),u=Qr(e,r),c=Qr(e,o),v=Kf[t],m=u===t||u!==v&&(c===v||c!==t)?r:o;return{points:[m],direction:Qr(m,n)}}function ra(e,n,t){var r=$s(e,n,t);return{points:[r],direction:Qr(r,n)}}function Js(e,n,t,r){var m,o={},u=[new ye(e.x,n.y),new ye(n.x,e.y)],c=u.filter(function(b){return!t.containsPoint(b)}),v=c.filter(function(b){return Qr(b,e)!==r});if(v.length>0)m=v.filter(function(b){return Qr(e,b)===r}).pop(),o.points=[m=m||v[0]],o.direction=Qr(m,n);else{m=Nu(u,c)[0];var T=new ye(n).move(m,-ju(t,r)/2),I=$s(T,e,t);o.points=[I,T],o.direction=Qr(T,n)}return o}function Zf(e,n,t,r){var o=ra(n,e,r),u=o.points[0];if(t.containsPoint(u)){var c=(o=ra(e,n,t)).points[0];if(r.containsPoint(c)){var v=new ye(e).move(c,-ju(t,Qr(e,c))/2),m=new ye(n).move(u,-ju(r,Qr(n,u))/2),T=new bt(v,m).midpoint(),I=ra(e,T,t),b=Ks(T,n,I.direction);o.points=[I.points[0],b.points[0]],o.direction=b.direction}}return o}function Qs(e,n,t,r,o){var I,b,G,u={},c=t.union(r).inflate(1),v=c.center().distance(n)>c.center().distance(e),m=v?n:e,T=v?e:n;return o?(I=ye.fromPolar(c.width+c.height,Ki[o],m),I=c.pointNearestToPoint(I).move(I,-1)):I=c.pointNearestToPoint(m).move(m,1),b=$s(I,T,c),I.round().equals(b.round())?(b=ye.fromPolar(c.width+c.height,Lt(I.theta(m))+Math.PI/2,T),G=$s(I,b=c.pointNearestToPoint(b).move(T,1).round(),c),u.points=v?[b,G,I]:[I,G,b]):u.points=v?[b,I]:[I,b],u.direction=Qr(v?I:b,n),u}function Gu(e,n,t){var r=zu(t,n),o=Uu(t,n),u=function Jf(e,n){return e.sourceAnchor?e.sourceAnchor:zu(e,n).center()}(t,n),c=function Qf(e,n){return e.targetAnchor?e.targetAnchor:Uu(e,n).center()}(t,n);r=r.union(Ys(u)),o=o.union(Ys(c)),(e=un(e).map(ye)).unshift(u),e.push(c);for(var v,m=[],T=0,I=e.length-1;T<I;T++){var b=null,G=e[T],te=e[T+1],oe=!!Qr(G,te);if(0===T)T+1===I?r.intersect(o.clone().inflate(1))?b=Qs(G,te,r,o):oe||(b=Zf(G,te,r,o)):r.containsPoint(te)?b=Qs(G,te,r,Ys(te).moveAndExpand(Xs(n))):oe||(b=ra(G,te,r));else if(T+1===I){var Te=oe&&Qr(te,G)===v;o.containsPoint(G)||Te?b=Qs(G,te,Ys(G).moveAndExpand(Xs(n)),o,v):oe||(b=Js(G,te,o,v))}else oe||(b=Ks(G,te,v));b?(Array.prototype.push.apply(m,b.points),v=b.direction):v=Qr(G,te),T+1<I&&m.push(te)}return m}var po={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!Cn(Gu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Gu(e,Nt({},po,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function Ss(e){this.map={},this.options=e,this.mapGridSize=100}function yi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function xi(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function Jl(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function Wu(e,n){return e.sourceAnchor?e.sourceAnchor:xi(e,n).center()}function La(e,n,t,r,o){var u=360/t,c=e.theta(function ia(e,n,t,r){var o=r.step;return new ye(e.x+(n.x-e.x)/t.x*o,e.y+(n.y-e.y)/t.y*o)}(e,n,r,o)),v=Xe(c+u/2);return u*Math.floor(v/u)}function $u(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function Zl(e,n){if(!e)return n;var t=Math.abs(e),r=Math.round(t/n);return r?n+(t-r*n)/r:t}function cr(e,n){return e.round(n)}function Qa(e,n,t){return cr(function ql(e,n){var t=n.source,r=pt(e.x-t.x,n.x)+t.x,o=pt(e.y-t.y,n.y)+t.y;return new ye(r,o)}(e.clone(),n),t)}function Za(e){return e.clone().toString()}function Ri(e){return new ye(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function Yu(e,n,t,r,o,u,c){for(var b,v=[],m=Ri(o.difference(t)),T=Za(t),I=e[T];I;){var G=Ri((b=n[T]).difference(I));G.equals(m)||(v.unshift(b),m=G),I=e[T=Za(I)]}var te=n[T];return Ri(te.difference(r)).equals(m)||v.unshift(te),v}function Ts(e,n){for(var t=1/0,r=0,o=n.length;r<o;r++){var u=e.manhattanDistance(n[r]);u<t&&(t=u)}return t}function oa(e,n,t,r,o){var u=o.precision,c=o.directionMap,v=e.difference(n.center()),m=wn(c)?Object.keys(c):[],T=un(t),I=m.reduce(function(b,G){if(T.includes(G)){for(var Re,te=c[G],oe=new ye(e.x+te.x*(Math.abs(v.x)+n.width),e.y+te.y*(Math.abs(v.y)+n.height)),Pe=new bt(e,oe).intersect(n)||[],Be=Pe.length,O=null,z=0;z<Be;z++){var J=Pe[z],ie=e.squaredDistance(J);(void 0===Re||ie>Re)&&(Re=ie,O=J)}if(O){var ve=Qa(O,r,u);n.containsPoint(ve)&&(ve=Qa(ve.offset(te.x*r.x,te.y*r.y),r,u)),b.push(ve)}}return b},[]);return n.containsPoint(e)||I.push(Qa(e,r,u)),I}function ec(e,n,t,r){var u,c,o=r.precision;u=cr(e instanceof gt?Wu(this,r).clone():e.clone(),o),c=cr(n instanceof gt?function Ql(e,n){return e.targetAnchor?e.targetAnchor:Jl(e,n).center()}(this,r).clone():n.clone(),o);var m,T,I,b,v=function Zs(e,n,t){return{source:n.clone(),x:Zl(t.x-n.x,e),y:Zl(t.y-n.y,e)}}(r.step,u,c);if(I=e instanceof gt?oa(m=u,e,r.startDirections,v,r):[m=u],n instanceof gt?(T=c,b=oa(c,n,r.endDirections,v,r)):b=[T=c],I=I.filter(Gt=>!t(Gt)),b=b.filter(Gt=>!t(Gt)),I.length>0&&b.length>0){for(var G=new yi,te={},oe={},Te={},Pe=0,Be=I.length;Pe<Be;Pe++){var Re=I[Pe],O=Za(Re);G.add(O,Ts(Re,b)),te[O]=Re,Te[O]=0}var ie,ve,z=r.previousDirectionAngle,J=void 0===z,Me=r.directions;!function qf(e,n,t){var r=t.step;un(t.directions).forEach(function(o){o.gridOffsetX=o.offsetX/r*n.x,o.gridOffsetY=o.offsetY/r*n.y})}(0,v,r);for(var Oe=Me.length,Ge=un(b).reduce(function(Gt,Et){var lt=Za(Et);return Gt.push(lt),Gt},[]),a=r.maximumLoops;!G.isEmpty()&&a>0;){var de,s=G.pop(),d=te[s],C=oe[s],N=Te[s],Y=void 0===C,ae=d.equals(m);de=Y?J?ae?null:La(m,d,Oe,v,r):z:La(C,d,Oe,v,r);var _e=I.length===b.length;if(_e)for(var Le=0;Le<I.length;Le++)if(!I[Le].equals(b[Le])){_e=!1;break}if((!Y||!_e)&&Ge.indexOf(s)>=0)return r.previousDirectionAngle=de,Yu(oe,te,d,m,T);for(Pe=0;Pe<Oe;Pe++){var Fe=(ie=Me[Pe]).angle;if(ve=$u(de,Fe),J&&ae||!(ve>r.maxAllowedDirectionChange)){var qe=Qa(d.clone().offset(ie.gridOffsetX,ie.gridOffsetY),v,o),at=Za(qe);if(!G.isClose(at)&&!t(qe)){if(Ge.indexOf(at)>=0&&!qe.equals(T)&&$u(Fe,La(qe,T,Oe,v,r))>r.maxAllowedDirectionChange)continue;var jt=N+ie.cost+(ae?0:r.penalties[ve]);(!G.isOpen(at)||jt<Te[at])&&(te[at]=qe,oe[at]=d,Te[at]=jt,G.add(at,jt+Ts(qe,b)))}}}a--}}return r.fallbackRoute.call(this,m,T,r)}Ss.prototype.build=function(e,n){var t=this.options,r=un(t.excludeEnds).reduce(function(m,T){var I=n.get(T);if(I){var b=e.getCell(I.id);b&&m.push(b)}return m},[]),o=[],u=e.getCell(n.get("source").id);u&&(o=vs(o,u.getAncestors().map(function(m){return m.id})));var c=e.getCell(n.get("target").id);c&&(o=vs(o,c.getAncestors().map(function(m){return m.id})));var v=this.mapGridSize;return e.getElements().reduce(function(m,T){var I=un(t.excludeTypes).includes(T.get("type")),b=r.find(function(z){return z.id===T.id}),G=o.includes(T.id);if(!(I||b||G))for(var oe=T.getBBox().moveAndExpand(t.paddingBox),Te=oe.origin().snapToGrid(v),Pe=oe.corner().snapToGrid(v),Be=Te.x;Be<=Pe.x;Be+=v)for(var Re=Te.y;Re<=Pe.y;Re+=v){var O=Be+"@"+Re;m[O]=m[O]||[],m[O].push(oe)}return m},this.map),this},Ss.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return un(this.map[n]).every(function(t){return!t.containsPoint(e)})},yi.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=Ni(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(t,0,e)},yi.prototype.remove=function(e){this.hash[e]=this.CLOSE},yi.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},yi.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},yi.prototype.isEmpty=function(){return 0===this.items.length},yi.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const Ku=function(e,n,t){return function Xu(e,n,t){(function Zr(e){if(e.directions=lr(e,"directions"),e.penalties=lr(e,"penalties"),e.paddingBox=lr(e,"paddingBox"),e.padding=lr(e,"padding"),e.padding){var n=Bt(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}un(e.directions).forEach(function(t){var r=new ye(0,0),o=new ye(t.offsetX,t.offsetY);t.angle=Xe(r.theta(o))})})(n),t.options.perpendicular=!!n.perpendicular;var r=xi(t,n),o=Jl(t,n),u=Wu(t,n);let c;if("function"==typeof n.isPointObstacle)c=n.isPointObstacle;else{const O=new Ss(n);O.build(t.paper.model,t.model),c=z=>!O.isPointAccessible(z)}for(var I,b,v=un(e).map(ye),m=[],T=u,G=0,te=v.length;G<=te;G++){var oe=null;if(b=I||r,!(I=v[G])&&(I=o,(!t.model.get("source").id||!t.model.get("target").id)&&Cn(n.draggingRoute))){var Pe=b===r?u:b,Be=I.origin();oe=n.draggingRoute.call(t,Pe,Be,n)}if(null===(oe=oe||ec.call(t,b,I,c,n)))return n.fallbackRouter(e,n,t);var Re=oe[0];Re&&Re.equals(T)&&oe.shift(),T=oe[oe.length-1]||T,Array.prototype.push.apply(m,oe)}return m}(e,Nt({},po,n),t)};var ed={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var r=e.theta(n),o=[],u={x:n.x,y:e.y},c={x:e.x,y:n.y};if(r%180>90){var v=u;u=c,c=v}var m=r%90<45?u:c,T=new bt(e,m),I=90*Math.ceil(r/90),b=ye.fromPolar(T.squaredLength(),Lt(I+135),m),G=new bt(n,b),te=T.intersection(G),oe=te||n,Pe=360/t.directions.length,Be=(te?oe:e).theta(n),Re=Xe(Be+Pe/2),O=Pe*Math.floor(Re/Pe);return t.previousDirectionAngle=O,oe&&o.push(oe.round()),o.push(n),o}};const td=function(e,n,t){if(!Cn(Ku))throw new Error("Metro requires the manhattan router.");return Ku(e,Nt({},ed,n),t)};var tc=["arc","gap","cubic"],nd=["smooth"],qs=1/3,aa=2/3;function Zu(e,n,t){var r=[].concat(e,t,n);return r.reduce(function(o,u,c){var v=r[c+1];return null!=v&&(o[c]=Hr(u,v)),o},[])}function rc(e,n){return Hr(e,n).squaredLength()}function ic(e,n,t,r){var u,o=new It;return u=It.createSegment("M",e[0].start),o.appendSegment(u),un(e).forEach(function(c,v){if(c.isJump){var m,T,I,b;if("arc"===t){m=-90,T=c.start.difference(c.end);var G=Number(T.x<0||0===T.x&&T.y<0);G&&(m+=180);var Te,te=c.midpoint(),oe=new bt(te,c.end).rotate(te,m);I=(Te=new bt(c.start,te)).pointAt(2/3).rotate(c.start,m),b=oe.pointAt(1/3).rotate(oe.end,-m),u=It.createSegment("C",I,b,oe.end),o.appendSegment(u),Te=new bt(te,c.end),I=oe.pointAt(1/3).rotate(oe.end,m),b=Te.pointAt(1/3).rotate(c.end,-m),u=It.createSegment("C",I,b,c.end),o.appendSegment(u)}else if("gap"===t)u=It.createSegment("M",c.end),o.appendSegment(u);else if("cubic"===t){m=c.start.theta(c.end);var Pe=.6*n,Be=1.35*n;T=c.start.difference(c.end),(G=Number(T.x<0||0===T.x&&T.y<0))&&(Be*=-1),I=ye(c.start.x+Pe,c.start.y+Be).rotate(c.start,m),b=ye(c.end.x-Pe,c.end.y+Be).rotate(c.end,m),u=It.createSegment("C",I,b,c.end),o.appendSegment(u)}}else{var Re=e[v+1];0==r||!Re||Re.isJump?(u=It.createSegment("L",c.end),o.appendSegment(u)):function oc(e,n,t,r,o){var te,u=t.distance(r)/2,c=t.distance(o)/2,v=-Math.min(e,u),m=-Math.min(e,c),T=t.clone().move(r,v).round(),I=t.clone().move(o,m).round(),b=new ye(qs*T.x+aa*t.x,aa*t.y+qs*T.y),G=new ye(qs*I.x+aa*t.x,aa*t.y+qs*I.y);te=It.createSegment("L",T),n.appendSegment(te),te=It.createSegment("C",b,G,I),n.appendSegment(te)}(r,o,c.end,c.start,Re.end)}}),o}const el=function(e,n,t,r){!function rd(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var r=n.model;r.on("batch:stop",function(){this.hasActiveBatch()||function qu(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const r=n[t],o=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(o)}}(n)}),r.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var o=r.raw,u=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),v=r.radius||0,m=r.ignoreConnectors||nd;-1===tc.indexOf(c)&&(c=tc[0]);var T=this.paper,b=T.model.getLinks();if(1===b.length)return ic(Zu(e,n,t),u,c,v);var G=this.model,te=b.indexOf(G),oe=T.options.defaultConnector||{},Te=b.filter(function(J,ie){var ve=J.get("connector")||oe;return!(un(m).includes(ve.name)||ie>te&&"jumpover"===ve.name)}),Pe=Te.map(function(J){return T.findViewByModel(J)}),Be=Zu(e,n,t),Re=Pe.map(function(J){return null==J?[]:J===this?Be:Zu(J.sourcePoint,J.targetPoint,J.route)},this),O=Be.reduce(function(J,ie){var ve=Te.reduce(function(Me,Oe,Ge){if(Oe!==G){var a=function nc(e,n){return un(n).reduce(function(t,r){var o=e.intersection(r);return o&&t.push(o),t},[])}(ie,Re[Ge]);Me.push.apply(Me,a)}return Me},[]).sort(function(Me,Oe){return rc(ie.start,Me)-rc(ie.start,Oe)});return ve.length>0?J.push.apply(J,function id(e,n,t){return n.reduce(function(r,o,u){if(!0===o.skip)return r;var c=r.pop()||e,v=Kr(o).move(c.start,-t),m=Kr(o).move(c.start,+t),T=n[u+1];if(null!=T){var I=m.distance(T);I<=t&&(m=T.move(c.start,I),T.skip=!0)}else if(v.distance(c.end)<2*t+1)return r.push(c),r;if(m.distance(c.start)<2*t+1)return r.push(c),r;var te=Hr(v,m);return te.isJump=!0,r.push(Hr(c.start,v),te,Hr(m,c.end)),r},[])}(ie,ve,u)):J.push(ie),J},[]),z=ic(O,u,c,v);return o?z:z.serialize()},od=function(e,n,t,r){var o=r&&r.raw,u=[e].concat(t).concat([n]),c=new Tn(u),v=new It(c);return o?v:v.serialize()},tl=function(e,n,t,r){r||(r={});var v,o=r.radius||10,u=r.raw,c=new It;v=It.createSegment("M",e),c.appendSegment(v);for(var I,b,G,te,oe,Te,Pe,Be,Re,O,z,m=1/3,T=2/3,J=0,ie=t.length;J<ie;J++)I=new ye(t[J]),b=t[J-1]||e,G=t[J+1]||n,te=oe||I.distance(b)/2,oe=I.distance(G)/2,Te=-Math.min(o,te),Pe=-Math.min(o,oe),Be=I.clone().move(b,Te).round(),Re=I.clone().move(G,Pe).round(),O=new ye(m*Be.x+T*I.x,T*I.y+m*Be.y),z=new ye(m*Re.x+T*I.x,T*I.y+m*Re.y),v=It.createSegment("L",Be),c.appendSegment(v),v=It.createSegment("C",O,z,Re),c.appendSegment(v);return v=It.createSegment("L",n),c.appendSegment(v),u?c:c.serialize()},ac=function(e,n,t,r){var u,o=r&&r.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([n]),v=Kt.throughPoints(c);u=new It(v)}else{var m;if(u=new It,m=It.createSegment("M",e),u.appendSegment(m),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var T=(e.x+n.x)/2;m=It.createSegment("C",T,e.y,T,n.y,n.x,n.y),u.appendSegment(m)}else{var I=(e.y+n.y)/2;m=It.createSegment("C",e.x,I,n.x,I,n.x,n.y),u.appendSegment(m)}}return o?u:u.serialize()},bi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},$r={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},qa=function(e,n,t=[],r={},o){const u=Boolean(r.raw),{direction:c=bi.AUTO,precision:v=3}=r,m={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new ye(r.sourceTangent):null,targetTangent:r.targetTangent?new ye(r.targetTangent):null};m.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new ye(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new ye(r.sourceDirection).normalize():null,m.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new ye(1,0).rotate(null,r.targetDirection):r.targetDirection?new ye(r.targetDirection).normalize():null;const T=[e,...t.map(Te=>new ye(Te)),n];let I,b;if(m.sourceTangent)I=m.sourceTangent;else{const Te=function il(e,n,t,r){if(r.sourceDirection)switch(r.sourceDirection){case $r.UP:return new ye(0,-1);case $r.DOWN:return new ye(0,1);case $r.LEFT:return new ye(-1,0);case $r.RIGHT:return new ye(1,0);case $r.AUTO:return nl(e,n);case $r.CLOSEST_POINT:return eu(0,n);case $r.OUTWARDS:return tu(e,n);default:return r.sourceDirection}switch(t){case bi.HORIZONTAL:return function ad(e,n,t){const{sourceBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.x>n[1].x?"right":"left",o)?new ye(-1,0):new ye(1,0)}(e,n);case bi.VERTICAL:return function uc(e,n,t){const{sourceBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.y>n[1].y?"bottom":"top",o)?new ye(0,-1):new ye(0,1)}(e,n);case bi.CLOSEST_POINT:return eu(0,n);case bi.OUTWARDS:return tu(e,n);default:return nl(e,n)}}(o,T,c,m),Pe=T[0].distance(T[1])*m.coeff,Re=ol(Te,T[1].difference(T[0]).normalize());if(Re>Math.PI/4){const O=Pe+(Re-Math.PI/4)*m.angleTangentCoefficient;I=Te.clone().scale(O,O)}else I=Te.clone().scale(Pe,Pe)}if(m.targetTangent)b=m.targetTangent;else{const Te=function fn(e,n,t,r){if(r.targetDirection)switch(r.targetDirection){case $r.UP:return new ye(0,-1);case $r.DOWN:return new ye(0,1);case $r.LEFT:return new ye(-1,0);case $r.RIGHT:return new ye(0,1);case $r.AUTO:return lc(e,n);case $r.CLOSEST_POINT:return rl(0,n);case $r.OUTWARDS:return cc(e,n);default:return r.targetDirection}switch(t){case bi.HORIZONTAL:return function sc(e,n,t){const{targetBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.x>n[n.length-2].x?"left":"right",o)?new ye(-1,0):new ye(1,0)}(e,n);case bi.VERTICAL:return function sd(e,n,t){const{targetBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.y>n[n.length-2].y?"top":"bottom",o)?new ye(0,-1):new ye(0,1)}(e,n);case bi.CLOSEST_POINT:return rl(0,n);case bi.OUTWARDS:return cc(e,n);default:return lc(e,n)}}(o,T,c,m),Pe=T.length-1,Be=T[Pe-1].distance(T[Pe])*m.coeff,O=ol(Te,T[Pe-1].difference(T[Pe]).normalize());if(O>Math.PI/4){const z=Be+(O-Math.PI/4)*m.angleTangentCoefficient;b=Te.clone().scale(z,z)}else b=Te.clone().scale(Be,Be)}const te=function fc(e,n,t,r){const{tau:o,coeff:u}=r,c=[],v=[],m=[],T=e.length-1;for(let I=0;I<T;I++)c[I]=e[I].distance(e[I+1]);v[0]=n,v[T]=t;for(let I=1;I<T;I++){let b,G;b=1===I?e[I-1].clone().offset(v[I-1].x,v[I-1].y):e[I-1].clone(),G=I===T-1?e[I+1].clone().offset(v[I+1].x,v[I+1].y):e[I+1].clone();const te=b.difference(e[I]).normalize(),oe=G.difference(e[I]).normalize(),Te=ol(te,oe);let Be,Pe=(Math.PI-Te)/2;const Re=es(te,oe);let O;O=es(e[I].difference(e[I+1]),e[I].difference(e[I-1])),Re<0&&(Pe=-Pe),Te<Math.PI/2&&(Pe<0&&O<0||Pe>0&&O>0)&&(Pe-=Math.PI),Be=oe.clone(),ud(Be,Pe);const z=Be.clone(),J=Be.clone(),ie=c[I-1]*u,ve=c[I]*u;z.scale(ie,ie),J.scale(ve,ve),v[I]=[z,J]}for(let I=0;I<T;I++){let b,G;b=0===I?e[I+1].difference(v[I].x/o,v[I].y/o):e[I+1].difference(v[I][1].x/o,v[I][1].y/o),G=I===T-1?e[I].clone().offset(v[I+1].x/o,v[I+1].y/o):e[I].difference(v[I+1][0].x/o,v[I+1][0].y/o),m[I]=[b,e[I],e[I+1],G]}return m}(T,I,b,m).map(Te=>function ld(e,n){const{tau:t}=n,r=new ye;r.x=e[1].x+(e[2].x-e[0].x)/(6*t),r.y=e[1].y+(e[2].y-e[0].y)/(6*t);const o=new ye;return o.x=e[2].x+(e[3].x-e[1].x)/(6*t),o.y=e[2].y+(e[3].y-e[1].y)/(6*t),new Kt(e[1],r,o,e[2])}(Te,m)),oe=new It(te).round(v);return u?oe:oe.serialize()};function nl(e,n,t){const{sourceBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[0]:n[1]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function lc(e,n,t){const{targetBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[n.length-1]:n[n.length-2]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function eu(e,n,t){return n[1].difference(n[0]).normalize()}function rl(e,n,t){const r=n.length-1;return n[r-1].difference(n[r]).normalize()}function tu(e,n,t){const{sourceBBox:r}=e,o=r.center();return n[0].difference(o).normalize()}function cc(e,n,t){const{targetBBox:r}=e,o=r.center();return n[n.length-1].difference(o).normalize()}function ud(e,n){const t=Math.cos(n),r=Math.sin(n),u=r*e.x+t*e.y;e.x=t*e.x-r*e.y,e.y=u}function ol(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function es(e,n){return e.x*n.y-e.y*n.x}qa.Directions=bi,qa.TangentDirections=$r;const Qt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Yr=xn.extend({className:function(){var e=xn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){xn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Qt.RENDER],attrs:[Qt.UPDATE],router:[Qt.UPDATE],connector:[Qt.CONNECTOR],smooth:[Qt.UPDATE],manhattan:[Qt.UPDATE],toolMarkup:[Qt.LEGACY_TOOLS],labels:[Qt.LABELS],labelMarkup:[Qt.LABELS],vertices:[Qt.VERTICES,Qt.UPDATE],vertexMarkup:[Qt.VERTICES],source:[Qt.SOURCE,Qt.UPDATE],target:[Qt.TARGET,Qt.UPDATE]},initFlag:[Qt.RENDER,Qt.SOURCE,Qt.TARGET,Qt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,Qt.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Qt.SOURCE)}if(this.hasFlag(e,Qt.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Qt.TARGET)}const{paper:t,sourceView:r,targetView:o}=this;if(t&&(r&&!t.isViewMounted(r)||o&&!t.isViewMounted(o)))return e;if(this.hasFlag(e,Qt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[Qt.RENDER,Qt.UPDATE,Qt.VERTICES,Qt.LABELS,Qt.TOOLS,Qt.LEGACY_TOOLS,Qt.CONNECTOR]);let u=!1;this.hasFlag(e,Qt.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,Qt.VERTICES));const{model:c}=this,{attributes:v}=c;let m=this.hasFlag(e,Qt.LABELS),T=this.hasFlag(e,Qt.LEGACY_TOOLS);m&&(this.onLabelsChange(c,v.labels,n),e=this.removeFlag(e,Qt.LABELS),u=!0),T&&(this.renderTools(),e=this.removeFlag(e,Qt.LEGACY_TOOLS));const I=this.hasFlag(e,Qt.UPDATE),b=this.hasFlag(e,Qt.CONNECTOR);return(I||b)&&(I?n.translateBy&&c.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[Qt.UPDATE,Qt.TOOLS,Qt.CONNECTOR]),m=!1,T=!1,u=!0),m&&this.updateLabelPositions(),T&&this.updateToolsPosition(),u&&this.updateHighlighters(),this.hasFlag(e,Qt.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,Qt.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Qt.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],r=t.length;if(r>1&&n[t[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=Ve(e);Array.isArray(n)||(n=[n]);for(var t=this._V,r=0,o=n.length;r<o;r++){var u=n[r],c=u.attr("class");c&&(c=B(c),t[kt.camelCase(c)]=u)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=Ve(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)t.appendChild(n[r].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Ve("g").append(n):Ve(r[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},r=this._labelSelectors={},o=this.model,u=o.attributes.labels||[],c=u.length;if(0===c)return n&&n.remove(),this;n?n.empty():(n=e.labels=Ve("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(Rr(lr(this,"className"))),n.attr("model-id",o.id)));for(var v=0;v<c;v++){var I,b,T=this._normalizeLabelMarkup(this._getLabelMarkup(u[v].markup));if(T)I=T.node,b=T.selectors;else{var te=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),oe=o._getDefaultLabel(),Pe=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||te;I=Pe.node,b=Pe.selectors}I.setAttribute("label-idx",v),n.append(I),t[v]=I;var Be=this.selector;if(b[Be])throw new Error("dia.LinkView: ambiguous label root selector.");b[Be]=I,r[v]=b}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:r,options:o}=this,{labels:u}=r;if(!u||!t.hasLabels())return;const{node:c}=u;o.labelsLayer?n.getLayerView(o.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){xn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const r=this._labelSelectors[e],[o=null]=this.findBySelector(n,t,r);return o},_mergeLabelAttrs:function(e,n,t,r){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:r:e?t:Cr({},r,t):e?Cr({},t,n):Cr({},r,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,u=e._getDefaultLabel(),c=u.markup,v=u.attrs,m=0,T=n.length;m<T;m++){var I=this._labelCache[m];I.setAttribute("cursor",t?"move":"default");var b=this._labelSelectors[m],G=n[m],Te=this._mergeLabelAttrs(G.markup||c,G.attrs,v,o);this.updateDOMSubtreeAttributes(I,Te,{rootBBox:new gt(G.size),selectors:b})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=kt(this._V.linkTools.node).empty(),n=ur(this.model.get("toolMarkup")||this.model.toolMarkup),t=Ve(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=ur(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Ve(n())):r=t.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=kt(this._V.markerVertices.node).empty(),n=ur(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,r){e.append(Ve(n(Nt({idx:r},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=kt(this._V.markerArrowheads.node);e.empty();var n=ur(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Ve(n({end:"source"})),this._V.targetArrowhead=Ve(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),o=[this.sourceAnchor,...r,this.targetAnchor],u=o.length,c=new Tn(o);c.simplify({threshold:.001});const v=c.points.map(T=>T.toJSON()),m=v.length;return u===m?0:(t.vertices(v.slice(1,m-1),e),u-m)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ye(this.sourceAnchor);case"target":return new ye(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ye(this.sourcePoint);case"target":return new ye(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:r}=this;if(!t||!r)return;const o=new Tn(t);o.translate(e,n),this.route=o.points,this._translateConnectionPoints(e,n),r.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),r=this.sourceAnchor=t.source,o=this.targetAnchor=t.target,u=this.findRoute(n);this.route=u;var c=this.findConnectionPoints(u,r,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,r=this.findMarkerPoints(e,n,t),o=this.findPath(e,r.source||n,r.target||t);this.path=o},findMarkerPoints:function(e,n,t){var c,v,r=e[0],o=e[e.length-1],u=this._markerCache;return this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.getBBox(),c=ye(n).move(r||t,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.getBBox(),v=ye(t).move(o||n,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=c||n.clone(),u.targetPoint=v||t.clone(),{source:c,target:v}},findAnchorsOrdered:function(e,n,t,r){var o,u,c,v,m=this.model,T=m.get(e),I=m.get(t),b=this.getEndView(e),G=this.getEndView(t),te=this.getEndMagnet(e),oe=this.getEndMagnet(t);b?(c=n?new ye(n):G?oe:new ye(I),o=this.getAnchor(T.anchor,b,te,c,e)):o=new ye(T),G?(v=new ye(r||o),u=this.getAnchor(I.anchor,G,oe,v,t)):u=new ye(I);var Te={};return Te[e]=o,Te[t]=u,Te},findAnchors:function(e){var n=this.model,t=e[0],r=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",r,"source",t):this.findAnchorsOrdered("source",t,"target",r)},findConnectionPoints:function(e,n,t){var b,G,te,Be,r=e[0],o=e[e.length-1],u=this.model,c=u.get("source"),v=u.get("target"),m=this.sourceView,T=this.targetView,I=this.paper.options;if(m&&!m.isNodeConnection(this.sourceMagnet)){b=this.sourceMagnet||m.el;var oe=c.connectionPoint||I.defaultConnectionPoint,Pe=new bt(r||t,n);te=this.getConnectionPoint(oe,m,b,Pe,"source")}else te=n;if(T&&!T.isNodeConnection(this.targetMagnet)){G=this.targetMagnet||T.el;var Re=v.connectionPoint||I.defaultConnectionPoint,z=new bt(o||n,t);Be=this.getConnectionPoint(Re,T,G,z,"target")}else Be=t;return{source:te,target:Be}},getAnchor:function(e,n,t,r,o){var v,u=n.isNodeConnection(t),c=this.paper.options;if(e||(e=u?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)v=e;else{var m=e.name;if("function"!=typeof(v=c[u?"linkAnchorNamespace":"anchorNamespace"][m]))throw new Error("Unknown anchor: "+m)}var I=v.call(this,n,t,r,e.args||{},o,this);return I?I.round(this.decimalsRounding):new ye},getConnectionPoint:function(e,n,t,r,o){var u,T,c=r.end,v=this.paper.options;if("function"==typeof v.linkConnectionPoint&&(u=v.linkConnectionPoint(this,n,t===n.el?void 0:t,r.start,o)))return u;if(!e)return c;if("function"==typeof e)T=e;else{var I=e.name;if("function"!=typeof(T=v.connectionPointNamespace[I]))throw new Error("Unknown connection point: "+I)}return(u=T.call(this,r,n,t,e.args||{},o,this))?u.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var o=n._builtins.defaultLabel.position,u=n._getDefaultLabel(),c=this._normalizeLabelPosition(u.position),v=Cr({},o,c),m=0,T=t.length;m<T;m++){var I=this._labelCache[m];if(I){var G=this._normalizeLabelPosition(t[m].position),te=Cr({},v,G),oe=this._getLabelTransformationMatrix(te);I.setAttribute("transform",Ve.matrixToTransformString(oe)),this._cleanLabelMatrices(m)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,r=t[e];if(r)for(let o in r){const{id:u}=r[o];u&&u in n&&delete n[u].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var r=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(r=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===kt.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,r=`${e}View`,o=n.get(e),u=o&&o.id;if(!u)return this[r]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(u);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const v=c.findView(t);return!!v&&(this[r]=v,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let r=t.getMagnetFromLinkEnd(this.model.get(e));r===t.el&&(r=null),this[n]=r}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=un(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:Cr({},n,e)},addLabel:function(e,n,t,r){var o,u,v,c=0;"number"!=typeof e?(o=e.x,u=e.y,"number"==typeof n?(c=n,v=t):v=n):(o=e,u=n,"number"==typeof t?(c=t,v=r):v=t);var m=this._getDefaultLabelPositionArgs(),I=this._mergeLabelPositionArgs(v,m),b={position:this.getLabelPosition(o,u,c,I)};return this.model.insertLabel(-1,b,v),-1},addVertex:function(e,n,t){var r="number"!=typeof e,o=r?e.x:e,u=r?e.y:n,c=r?n:t,v={x:o,y:u},m=this.getVertexIndex(o,u);return this.model.insertVertex(m,v,c),m},sendToken:function(e,n,t){var o,u,c;wn(n)?(o=n.duration,u="reverse"===n.direction,c=n.connection):(o=n,u=!1,c=null);var v={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};u&&(v.keyPoints="1;0",v.keyTimes="0;1");var T,m=Ve(e);if("string"==typeof c)T=this.findBySelector(c,this.el,this.selectors)[0];else{var I=this._V;T=I.connection?I.connection.node:this.el.querySelector("path")}if(!(T instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");m.appendTo(this.paper.cells).animateAlongPath(v,T),setTimeout(function r(b,G){return function(){b.remove(),"function"==typeof G&&G()}}(m,t),o)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||x,t=this.model.router(),r=this.paper.options.defaultRouter;if(!t){if(!r)return e.map(ye);t=r}var o=Cn(t)?t:n[t.name];if(!Cn(o))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return o.call(this,e,t.args||{},this)||e.map(ye)},findPath:function(e,n,t){var r=this.paper.options.connectorNamespace||A,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=Cn(o)?o:r[o.name];if(!Cn(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var v=sn(o.args||{});v.raw=!0;var m=c.call(this,n,t,e,v,this);return"string"==typeof m&&(m=new It(Ve.normalizePathData(m))),m},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(we(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,r){var c,o={},u=0;"number"==typeof t?(u=t,c=r):c=t,c&&(o.args=c);var Te,Pe,v=!(c&&c.absoluteDistance),m=c&&c.absoluteDistance&&c.reverseDistance,T=c&&c.absoluteOffset,I=this.path,b={segmentSubdivisions:this.getConnectionSubdivisions()},G=new ye(e,n),te=I.closestPointT(G,b),oe=I.lengthAtT(te,b);if(v&&(oe=oe/this.getConnectionLength()||0),m&&(oe=-1*(this.getConnectionLength()-oe)||1),o.distance=oe,T||(Te=I.tangentAtT(te)),Te)Pe=Te.pointOffset(G);else{var Be=I.pointAtT(te),Re=G.difference(Be);Pe={x:Re.x,y:Re.y}}return o.offset=Pe,o.angle=u,o},_getLabelTransformationMatrix:function(e){var n,t=0,r={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},n=e.distance,t=e.angle||0}var o=n>0&&n<=1,u=0,c={x:0,y:0};if(e.offset){var v=e.offset;"number"==typeof v&&(u=v),v.x&&(c.x=v.x),v.y&&(c.y=v.y)}var Te,m=0!==c.x||0!==c.y||0===u,T=r.keepGradient,I=r.ensureLegibility,b=this.path,G={segmentSubdivisions:this.getConnectionSubdivisions()},te=o?n*this.getConnectionLength():n,oe=b.tangentAtLength(te,G),Pe=t;if(oe){if(m)(Te=oe.start).offset(c);else{var Be=oe.clone();Be.rotate(oe.start,-90),Be.setLength(u),Te=Be.end}T&&(Pe=oe.angle()+t,I&&(Pe=Xe((Pe+90)%180-90)))}else Te=b.start,m&&Te.offset(c);return Ve.createSVGMatrix().translate(Te.x,Te.y).rotate(Pe)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new ye(n.e,n.f)},getVertexIndex:function(e,n){for(var r=this.model.vertices(),o=this.getClosestPointLength(new ye(e,n)),u=0,c=r.length;u<c&&!(o<this.getClosestPointLength(r[u]));u++);return u},notifyPointerdown(e,n,t){xn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){xn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),xn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){xn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){xn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){xn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}r&&Nt(r,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){xn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){xn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){xn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){xn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,r){xn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){var o=Ve(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,r)}this.notifyPointerdown(e,t,r),this.paper.delegateDragEvents(this,e.data)}else xn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var r=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),u=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),v=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(c,v);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:u,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),u=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,u)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var r=this.eventData(e),o={position:this.getLabelPosition(n,t,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(r.labelIdx,o)},dragVertex:function(e,n,t){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var r=this.eventData(e);this.model.translate(n-r.dx,t-r.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var r=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,n,t),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,r=e.initialEnd,o=this.model.prop(t);if(o&&!At.endsEqual(r,o)){var c=this.paper;r.id&&this.notify("link:disconnect",n,c.findViewByModel(r.id),e.initialMagnet,t),o.id&&this.notify("link:connect",n,c.findViewByModel(o.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:r}=this,{snapLinks:o,connectionStrategy:u}=r.options,c=this.eventData(e);var v=o.radius||50,m=r.findViewsInArea({x:n-v,y:t-v,width:2*v,height:2*v}),T=c.closestView||null,I=c.closestMagnet||null,b=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var G=Number.MAX_VALUE,te=new ye(n,t);m.forEach(function(z){const J=[];"false"!==z.el.getAttribute("magnet")&&J.push({bbox:z.model.getBBox(),magnet:z.el}),z.$("[magnet]").toArray().forEach(ie=>{J.push({bbox:z.getNodeBBox(ie),magnet:ie})}),J.forEach(ie=>{const{magnet:ve,bbox:Me}=ie,Oe=Me.center().squaredDistance(te);Oe<G&&(I===ve||r.options.validateConnection.apply(r,c.validateConnectionArgs(z,z.el===ve?null:ve)))&&(G=Oe,c.closestView=z,c.closestMagnet=ve)})},this);var oe,Te=null,Pe=c.closestView,Be=c.closestMagnet;Be&&(Te=c.magnetProxy=Pe.findProxyNode(Be,"highlighter"));var Re=c.arrowhead,O=I!==Be;if(T&&O&&T.unhighlight(b,{connecting:!0,snapping:!0}),Pe){const{prevEnd:z,prevX:J,prevY:ie}=c;if(c.prevX=n,c.prevY=t,!O&&("function"!=typeof u||J===n&&ie===t)||(oe=Pe.getLinkEnd(Be,n,t,this.model,Re),!O&&No(z,oe)))return;c.prevEnd=oe,O&&Pe.highlight(Te,{connecting:!0,snapping:!0})}else oe={x:n,y:t};this.model.set(Re,oe||{x:n,y:t},{ui:!0}),T&&this.notify("link:snap:disconnect",e,T,I,Re),Pe&&this.notify("link:snap:connect",e,Pe,Be,Re)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,r){const{paper:o,model:u}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=o.findView(e);if(c){const v=r.magnetUnderPointer=c.findMagnet(e),m=r.magnetProxy=c.findProxyNode(v,"highlighter");v&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(c,v))?m&&c.highlight(m,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,u.set(r.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:u,magnetProxy:c,arrowhead:v}=e;if(!u||!c||!o)return;o.unhighlight(c,{connecting:!0});const m=o.getLinkEnd(u,n,t,r,v);r.set(v,m,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,r=0,o=0;"source"===e?(r=2,t="target"):(o=2,t="source");var u=this.model.get(t);if(u.id){var c=n[r]=this.paper.findViewByModel(u.id),v=c.getMagnetFromLinkEnd(u);v===c.el&&(v=void 0),n[r+1]=v}return function m(T,I){return n[o]=T,n[o+1]=T.el===I?void 0:I,n}},_markAvailableMagnets:function(e){function n(b,G){var te=b.paper;return te.options.validateConnection.apply(te,this.validateConnectionArgs(b,G))}var t=this.paper,r=t.model.getCells();e.marked={};for(var o=0,u=r.length;o<u;o++){var c=r[o].findView(t);if(c){var v=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&v.push(c.el);var m=v.filter(n.bind(e,c));if(m.length>0){for(var T=0,I=m.length;T<I;T++)c.highlight(m[T],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=m}}}},_unmarkAvailableMagnets:function(e){for(var t,r,n=Object.keys(e.marked),o=0,u=n.length;o<u;o++){r=e.marked[t=n[o]];var c=this.paper.findViewByModel(t);if(c){for(var v=0,m=r.length;v<m;v++)c.unhighlight(r[v],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:sn(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){xn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Qt});Object.defineProperty(Yr.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new gt(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new gt(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(Yr.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new gt(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new gt(this.targetAnchor):e.getNodeBBox(t||e.el)}});const Ji={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},nu=Ka.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Rr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let u in t)u=+u,u<e&&u>o&&(o=u);return n.insertBefore(r,o!==-1/0?t[o].nextSibling:n.firstChild),r},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),al=na.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:r}=t;let o;try{const u=Ve(n);if(o=u.convertToPathData().trim(),"PATH"===u.tagName()&&r){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(u){const c=e.getNodeBoundingRect(n);o=Ve.rectToPath(Nt({},t,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:r}=this,{padding:o,layer:u}=r;let c=e.getNodeMatrix(n);if(o){!u&&n===e.el&&t.remove();let v=e.getNodeBoundingRect(n);const m=v.x+v.width/2,T=v.y+v.height/2;v=Ve.transformRect(v,c);const I=Math.max(v.width,1),b=Math.max(v.height,1),G=(I+o)/I,te=(b+o)/b,oe=Ve.createSVGMatrix({a:G,b:0,c:0,d:te,e:m-G*m,f:T-te*T});c=c.multiply(oe)}t.attr({d:this.getPathData(e,n),transform:Ve.matrixToTransformString(c)})},highlight(e,n){const{vel:t,options:r}=this;t.attr(r.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),sl=20,_i=na.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:sl,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,u=n.tagName();if(!Ve.isSVGGraphicsElement(n)||o.includes(u))return n.remove(),!1;if(r.includes(u)){const c=e.vel.findOne(`#${n.id}`);if(c){const{node:v}=c;let m=e.getNodeBoundingRect(v);e.model.isElement()&&(m=Ve.transformRect(m,e.getNodeMatrix(v)));const T=Ve("rect",m.toJSON()),{x:I,y:b}=m.center(),{angle:G,cx:te=I,cy:oe=b}=c.rotate();G&&T.rotate(G,te,oe),n.parent().append(T)}return n.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===n.attr("fill")||n.removeAttr(c)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(r=>{n.removeAttr(r)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:r}=this,{deep:o}=t,u=n.tagName();let c;if("G"===u){if(!o)return null;c=n.clone(),function dc(e,n){const t=e.children();for(;t.length>0;){const r=t.shift();n(r)&&t.push(...r.children())}}(c,v=>this.transformMaskChild(e,v))}else{if(r.includes(u))return null;c=n.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:r,options:o}=this,{padding:u,attrs:c}=o,v="stroke-width"in c?c["stroke-width"]:1,m="none"!==n.attr("fill");let T=parseFloat(n.attr("stroke-width"));isNaN(T)&&(T=1);const I=T+2*u,b=I+2*v;let G=this.getMaskShape(e,n);if(!G){const te=e.getNodeBoundingRect(n.node);te.inflate(te.width?0:.5,te.height?0:.5),G=Ve("rect",te.toJSON())}return G.attr(c),Ve("mask",{id:this.getMaskId()}).append([G.clone().attr({fill:m?t:"none",stroke:t,"stroke-width":b}),G.clone().attr({fill:m?r:"none",stroke:r,"stroke-width":I})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:r}=this,{padding:o,attrs:u,maskClip:c=sl,layer:v}=t,m="stroke"in u?u.stroke:"#000000";!v&&n===e.el&&r.remove();const T=e.getNodeBoundingRect(n).inflate(o+c),I=this.getMask(e,Ve(n));this.addMask(e.paper,I),r.attr(T.toJSON()),r.attr({transform:Ve.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${I.id})`,fill:m})},unhighlight(e){this.removeMask(e.paper)}}),sa=na.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Rr("highlight-opacity"),highlight:function(e,n){Ve(n).addClass(this.opacityClassName)},unhighlight:function(e,n){Ve(n).removeClass(this.opacityClassName)}}),ru=Rr("highlighted"),hc=na.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:ru},highlight:function(e,n){Ve(n).addClass(this.options.className)},unhighlight:function(e,n){Ve(n).removeClass(this.options.className)}},{className:ru});function iu(e,n,t,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function pc(e,n,t,r){return e.getPointAtLength("length"in r?r.length:20)}function Na(e){return function(n,t,r,o){if(r instanceof Element){var c,u=this.paper.findView(r);if(u)if(u.isNodeConnection(r)){var v="fixedAt"in o?o.fixedAt:"50%";c=ou(u,v)}else c=u.getNodeBBox(r).center();else c=new ye;return e.call(this,n,t,c,o)}return e.apply(this,arguments)}}function ou(e,n){var t=parseFloat(n);return we(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const ua=Na(function ul(e,n,t,r){var o=1e6,u=e.getConnection(),c=e.getConnectionSubdivisions(),v=new bt(t.clone().offset(0,o),t.clone().offset(0,-o)),m=new bt(t.clone().offset(o,0),t.clone().offset(-o,0)),T=v.intersect(u,{segmentSubdivisions:c}),I=m.intersect(u,{segmentSubdivisions:c}),b=[];return T&&Array.prototype.push.apply(b,T),I&&Array.prototype.push.apply(b,I),b.length>0?t.chooseClosest(b):"fallbackAt"in r?ou(e,r.fallbackAt):vc(e,n,t,r)}),vc=Na(function gc(e,n,t,r){return e.getClosestPoint(t)||new ye});function Qi(e,n,t){if(vn(t)){const{x:o,y:u}=t;if(isFinite(u)){const c=new bt(n,e),{start:v,end:m}=c.parallel(u);n=v,e=m}t=o}if(!isFinite(t))return e;var r=e.distance(n);return 0===t&&r>0?e:e.move(n,-Math.min(t,r-1))}function au(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function yc(e,n,t,r){var o=n.getNodeBBox(t);r.stroke&&o.inflate(au(t)/2);var u=e.intersect(o);return Qi(u?e.start.chooseClosest(u):e.end,e.start,r.offset)}var su="segmentSubdivisons",uu="shapeBBox";const xc=function ll(e,n,t,r){let{offset:o,alignOffset:u,align:c}=r;return c&&function mc(e,n,t=0){let r,o,u,c;const{start:v,end:m}=e;switch(n){case"left":r="x",o=m,u=v,c=-1;break;case"right":r="x",o=v,u=m,c=1;break;case"top":r="y",o=m,u=v,c=-1;break;case"bottom":r="y",o=v,u=m,c=1;break;default:return}v[r]<m[r]?o[r]=u[r]:u[r]=o[r],isFinite(t)&&(o[r]+=c*t,u[r]+=c*t)}(e,c,u),Qi(e.end,e.start,o)},bc=yc,si=function cd(e,n,t,r){var o=n.model.angle();if(0===o)return yc(e,n,t,r);var u=n.getNodeUnrotatedBBox(t);r.stroke&&u.inflate(au(t)/2);var c=u.center(),v=e.clone().rotate(c,o),m=v.setLength(1e6).intersect(u);return Qi(m?v.start.chooseClosest(m).rotate(c,-o):e.end,e.start,r.offset)},go=function dd(e,n,t,r){var o,u,c=r.selector,v=e.end;if(o="string"==typeof c?n.findBySelector(c)[0]:Array.isArray(c)?pe(t,c):function fd(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!Ve.isSVGGraphicsElement(o)){if(o===t||!Ve.isSVGGraphicsElement(t))return v;o=t}var Re,m=n.getNodeShape(o),T=n.getNodeMatrix(o),I=n.getRootTranslateMatrix(),b=n.getRootRotateMatrix(),G=I.multiply(b).multiply(T),te=G.inverse(),oe=Ve.transformLine(e,te),Te=oe.start.clone(),Pe=n.getNodeData(o);if(!1===r.insideout&&(Pe[uu]||(Pe[uu]=m.bbox()),Pe[uu].containsPoint(Te)))return v;if(m instanceof It){var O=r.precision||2;Pe[su]||(Pe[su]=m.getSegmentSubdivisions({precision:O})),Re={precision:O,segmentSubdivisions:Pe[su]}}!0===r.extrapolate&&oe.setLength(1e6),(u=oe.intersect(m,Re))?Ve.isArray(u)&&(u=Te.chooseClosest(u)):!0===r.sticky&&(u=m instanceof gt?m.pointNearestToPoint(Te):m instanceof or?m.intersectionWithLineFromCenterToPoint(Te):m.closestPoint(Te,Re));var z=u?Ve.transformPoint(u,G):v,J=r.offset||0;return r.stroke&&(J+=au(o)/2),Qi(z,e.start,J)};function Bo(e){return function(n,t,r,o){var u=!!o.rotate,c=u?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),v=c[e](),m=o.dx;if(m){var T=we(m);m=parseFloat(m),isFinite(m)&&(T&&(m/=100,m*=c.width),v.x+=m)}var I=o.dy;if(I){var b=we(I);I=parseFloat(I),isFinite(I)&&(b&&(I/=100,I*=c.height),v.y+=I)}return u?v.rotate(n.model.getBBox().center(),-n.model.angle()):v}}const _c=Bo("center"),Cc=Bo("topMiddle"),pd=Bo("bottomMiddle"),wc=Bo("leftMiddle"),ns=Bo("rightMiddle"),Ps=Bo("origin"),gd=Bo("topRight"),Sc=Bo("bottomLeft"),Tc=Bo("corner"),cu=Na(function hd(e,n,t,r){var o=e.model.angle(),u=e.getNodeBBox(n),c=u.center(),v=u.origin(),m=u.corner(),T=r.padding;if(isFinite(T)||(T=0),v.y+T<=t.y&&t.y<=m.y-T){var I=t.y-c.y;c.x+=0===o||180===o?0:1*I/Math.tan(Lt(o)),c.y+=I}else if(v.x+T<=t.x&&t.x<=m.x-T){var b=t.x-c.x;c.y+=90===o||270===o?0:b*Math.tan(Lt(o)),c.x+=b}return c}),Ec=Na(function lu(e,n,t,r){var u,c,v,o=!!r.rotate;o?(u=e.getNodeUnrotatedBBox(n),v=e.model.getBBox().center(),c=e.model.angle()):u=e.getNodeBBox(n);var I,m=r.padding;switch(isFinite(m)&&u.inflate(m),o&&t.rotate(v,c),u.sideNearestToPoint(t)){case"left":I=u.leftMiddle();break;case"right":I=u.rightMiddle();break;case"top":I=u.topMiddle();break;case"bottom":I=u.bottomMiddle()}return o?I.rotate(v,-c):I}),fu=function ts(e,n,t,r,o){return e.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)},la={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},As=9007199254740991,rs=xn.Highlighting,cl={[rs.DEFAULT]:{name:"stroke",options:{padding:3}},[rs.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[rs.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},fl=[{name:Ji.BACK},{name:Ji.CELLS},{name:Ji.LABELS},{name:Ji.FRONT},{name:Ji.TOOLS}],md=Ka.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Ws,linkView:Yr,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:cl,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new At,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,r,o,u){return("target"===o?t:e)instanceof Ws},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:la.EXACT,frozen:!1,onViewUpdate:function(e,n,t,r,o){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(e,t,r)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:k,anchorNamespace:j,linkAnchorNamespace:M,connectionPointNamespace:H},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&vr(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new Do;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=kt(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var r=t.position;this.isAsync()||!pn(r)?this.renderView(e,t):(t.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,t),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===la.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(n)&&!t.hasActiveBatch(r)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(n)&&!t.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:u,origin:c,highlighting:v,cellViewNamespace:m,interactive:T}=e;!m&&"undefined"!=typeof joint&&vr(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Cn(n)||(e.defaultConnector=er(n)),Cn(t)||(e.defaultRouter=er(t)),Cn(r)||(e.defaultConnectionPoint=er(r)),Cn(o)||(e.defaultAnchor=er(o)),Cn(u)||(e.defaultLinkAnchor=er(u)),vn(T)&&(e.interactive=Nt({},T)),vn(v)&&(e.highlighting=gi({},v,cl)),e.origin=Nt({},c)},children:function(){var e=Ve.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Rr("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Rr("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Rr("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:r,layers:o,background:u,grid:c}=e;return this.svg=t,this.defs=r,this.layers=o,this.$background=kt(u),this.$grid=kt(c),this.renderLayers(),Ve.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=fl){this.removeLayers(),e.forEach(({name:o})=>{const c=new nu({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const n=this.getLayerView(Ji.CELLS),t=this.getLayerView(Ji.TOOLS),r=this.getLayerView(Ji.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(Rr("viewport")),r.vel.addClass(Rr("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),Ve.createSVGMatrix(e)}e=Ve.createSVGMatrix(e);var r=Ve.matrixToTransformString(e);return n.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return Ve.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof xn)for(var r=e.model,o=this.model.getConnectedLinks(r),u=0,c=o.length;u<c;u++){var v=o[u],m=this.findViewByModel(v);if(m){var T=["UPDATE"];v.getTargetCell()===r&&T.push("TARGET"),v.getSourceCell()===r&&T.push("SOURCE");var I=Math.max(n+1,m.UPDATE_PRIORITY);this.scheduleViewUpdate(m,m.getFlag(T),I,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof xn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var r=0,o=this.findViewByModel(t.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o),e.updateEndMagnet("source"));var u=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(u=this.dumpView(c),e.updateEndMagnet("target")),0===r&&0===u)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,r){r||(r={}),this.scheduleViewUpdate(e,n,t,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var u=this.updateViews(r);o&&this.notifyAfterRender(u,r)}},scheduleViewUpdate:function(e,n,t,r){const{_updates:o,options:u}=this,{FLAG_REMOVE:c,FLAG_INSERT:v,UPDATE_PRIORITY:m,cid:T}=e;let I=o.priorities[t];if(I||(I=o.priorities[t]={}),t>m)for(let te=t-1;te>=m;te--){const oe=o.priorities[te];!oe||!(T in oe)||(I[T]|=oe[T],delete oe[T])}let b=I[T]||0;if((b&n)===n)return;b||o.count++,n&c&&b&v?I[T]^=v:n&v&&b&c&&(I[T]^=c),I[T]|=n;const G=u.onViewUpdate;"function"==typeof G&&G.call(this,e,n,t,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|r[t];return delete r[t],o},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,model:u}=e;if(e instanceof xn){if(n&r)return this.removeView(u),0;n&o&&(this.insertView(e),n^=o)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var r=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],r},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var r=t.unmounted[n]||0;return delete t.unmounted[n],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=Hn({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,r=0,o=As;do{r++,n=this.updateViewsBatch(e),t+=n.updated,o=Math.min(n.priority,o)}while(!n.empty);const u={updated:t,batches:r,priority:o};return this.notifyAfterRender(u,e),u},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let r in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:As});var t=this._updates,r=t.id;if(r){le(r),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),u=Hn({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(u),v=c.unmounted,m=c.mounted,T=n.processed,I=t.count;o.updated>0&&(o.processed=T+=o.updated+o.unmounted,n.priority=Math.min(o.priority,n.priority),o.empty&&0===m?(o.unmounted+=v,o.mounted+=m,o.priority=n.priority,this.notifyAfterRender(o,e),n.processed=0,n.priority=As,t.count=0):n.processed=T);var b=e.progress;if(I&&"function"==typeof b&&b.call(this,o.empty,T,I,o,this),t.id!==r)return}t.id=X(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,r=0,o=0,u=0,c=0,v=As,m=!0,T=this.options,I=t.priorities,b="viewport"in e?e.viewport:T.viewport;"function"!=typeof b&&(b=null);var G=T.onViewPostponed;"function"!=typeof G&&(G=null);var te=Object.keys(I);e:for(var oe=0,Te=te.length;oe<Te;oe++){var Pe=+te[oe],Be=I[Pe];for(var Re in Be){if(r>=n){m=!1;break e}var O=ka[Re];if(O){var z=Be[Re];if(0==(z&O.FLAG_REMOVE)){var J=Re in t.unmounted;if(O.DETACHABLE&&b&&!b.call(this,O,!J,this)){J||(this.registerUnmountedView(O),O.unmount()),t.unmounted[Re]|=z,delete Be[Re],u++;continue}J&&(z|=O.FLAG_INSERT,c++),z|=this.registerMountedView(O)}var ie=this.updateView(O,z,e);ie>0&&(Be[Re]=ie,!G||!G.call(this,O,ie,this)||Be[Re])?(o++,m=!1):(v>Pe&&(v=Pe),r++,delete Be[Re])}else delete Be[Re]}}return{priority:v,updated:r,postponed:o,unmounted:u,mounted:c,empty:m}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=ka[n[o]];return r},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=ka[n[o]];return r},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var o=this._updates,u=o.unmountedCids,c=o.unmounted,v=0,m=(Math.min(u.length,"mountBatchSize"in n?n.mountBatchSize:1/0));v<m;v++){var T=u[v];if(T in c){var I=ka[T];if(I){if(I.DETACHABLE&&e&&!e.call(this,I,!1,this)){u.push(T);continue}t++;var b=this.registerMountedView(I);b&&this.scheduleViewUpdate(I,b,I.UPDATE_PRIORITY,{mounting:!0})}}}return u.splice(0,v),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var o=this._updates,u=o.mountedCids,c=o.mounted,v=0,m=(Math.min(u.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));v<m;v++){var T=u[v];if(T in c){var I=ka[T];if(I){if(!I.DETACHABLE||e.call(this,I,!0,this)){u.push(T);continue}t++,this.registerUnmountedView(I)&&I.unmount()}}}return u.splice(0,v),t},checkViewport:function(e){var n=Hn({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,r=this.checkMountedViews(t,n);return r>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:r}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,r=this.options.frozen,o=n.freezeKey;if(t&&t!==o){if(r&&o)return;n.freezeKey=t,n.keyFrozen=r}this.options.frozen=!0;var u=n.id;n.id=null,this.isAsync()&&u&&le(u)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,r=n.freezeKey;t&&r&&t!==r||(n.freezeKey=null,(!t||t!==r||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===la.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return pn(n)||(n=this.el.clientWidth),pn(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:r,height:o}=t;let u=void 0===e?r:e,c=void 0===n?o:n;if(r===u&&o===c)return;t.width=u,t.height=c,this._setDimensions();const v=this.getComputedSize();this.trigger("resize",v.width,v.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;pn(n)&&(n=Math.round(n)),pn(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,r){r=wn(e)?e:Nt({gridWidth:e,gridHeight:n,padding:t},r);const{x:o,y:u,width:c,height:v}=this.getFitToContentArea(r),{sx:m,sy:T}=this.scale();return this.setOrigin(-o*m,-u*T),this.setDimensions(c*m,v*T),new gt(o,u,c,v)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,r=Bt(e.padding||0),o=Math.max(e.minWidth||0,n),u=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,v=e.maxHeight||Number.MAX_VALUE,m=e.allowNewOrigin,T="contentArea"in e?new gt(e.contentArea):this.getContentArea(e),{sx:I,sy:b}=this.scale();T.x*=I,T.y*=b,T.width*=I,T.height*=b;let G=Math.ceil((T.width+T.x)/n),te=Math.ceil((T.height+T.y)/t);e.allowNegativeBottomRight||(G=Math.max(G,1),te=Math.max(te,1)),G*=n,te*=t;let oe=0;("negative"===m&&T.x<0||"positive"===m&&T.x>=0||"any"===m)&&(oe=Math.ceil(-T.x/n)*n,oe+=r.left,G+=oe);let Te=0;return("negative"===m&&T.y<0||"positive"===m&&T.y>=0||"any"===m)&&(Te=Math.ceil(-T.y/t)*t,Te+=r.top,te+=Te),G+=r.right,te+=r.bottom,G=Math.max(G,o),te=Math.max(te,u),G=Math.min(G,c),te=Math.min(te,v),new gt(-oe/I,-Te/b,G/I,te/b)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var r=e.contentArea;n=this.localToPaperRect(r),t=new ye(r)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){Hn(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var T,o=Bt(e.padding),u=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,v=e.minScaleY||e.minScale,m=e.maxScaleY||e.maxScale;if(e.fittingBBox)T=e.fittingBBox;else{var I=this.translate(),b=this.getComputedSize();T={x:I.tx,y:I.ty,width:b.width,height:b.height}}T=new gt(T).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var G=this.scale(),te=T.width/n.width*G.sx,oe=T.height/n.height*G.sy;if(e.preserveAspectRatio&&(te=oe=Math.min(te,oe)),e.scaleGrid){var Te=e.scaleGrid;te=Te*Math.floor(te/Te),oe=Te*Math.floor(oe/Te)}te=Math.min(c,Math.max(u,te)),oe=Math.min(m,Math.max(v,oe));var Pe=this.options.origin,Be=T.x-t.x*te-Pe.x,Re=T.y-t.y*oe-Pe.y;this.scale(te,oe),this.translate(Be,Re)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new gt:Ve(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=Cn(n)?n.apply(this,e):!0===n?this.getArea():n?new gt(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,r,o=n.cellViewNamespace,u=e.get("type")+"View",c=pe(o,u,".");return e.isLink()?(t=n.linkView,r=Yr):(t=n.elementView,r=Ws),new(t.prototype instanceof wr.View?c||t:t.call(this,e)||c||r)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?Ji.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:r}=this,o=t[n];if(o){var{cid:u}=o;const{mounted:c,unmounted:v}=r;o.remove(),delete t[n],delete c[u],delete v[u]}return o},renderView:function(e,n){const{id:t}=e,r=this._views;let o,u,c=!0;return t in r&&(o=r[t],o.model===e?(u=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=r[t]=this.createViewForModel(e),o.paper=this,u=this.registerUnmountedView(o)|o.getFlag(lr(o,"initFlag"))),this.requestViewUpdate(o,u,o.UPDATE_PRIORITY,n),o},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,r=e.length;t<r;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Ur(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=kt(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=kt(e),r=t.map(function(){var u=this.parentNode,c=u.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(u===this)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(this,c),u.removeChild(c)}});Array.prototype.sort.call(t,n).each(function(o){r[o].call(this)})}(e,function(t,r){var o=n.get(t.getAttribute("model-id")),u=n.get(r.getAttribute("model-id")),c=o.attributes.z||0,v=u.attributes.z||0;return c===v?0:c<v?-1:1})},insertView:function(e){const n=this.getLayerView(Ji.CELLS),{el:t,model:r}=e;this.options.sorting===la.APPROX?n.insertSortedNode(t,r.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,r){if(void 0===e)return Ve.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,r=0);var o=this.translate();(t||r||o.tx||o.ty)&&this.translate(o.tx-t*(e-1),o.ty-r*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var v=this.matrix();return v.a=e,v.d=n,this.matrix(v),this.trigger("scale",e,n,t,r),this},rotate:function(e,n,t){if(void 0===e)return Ve.matrixToRotate(this.matrix());if(void 0===n){var r=this.cells.getBBox();n=r.width/2,t=r.height/2}var o=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(o),this},translate:function(e,n){if(void 0===e)return Ve.matrixToTranslate(this.matrix());const{options:t}=this,{origin:r,drawGrid:o}=t;e||(e=0),n||(n=0);const u=this.matrix();if(u.e===e&&u.f===n)return this;u.e=e,u.f=n,this.matrix(u);const{tx:c,ty:v}=this.translate();return r.x=c,r.y=v,this.trigger("translate",c,v),o&&this.drawGrid(),this},findView:function(e){var n=In(e)?this.cells.querySelector(e):e instanceof kt?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=In(e)||pn(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new ye(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=Hn(n||{},{strict:!1}),e=new gt(e);var t=this.model.getElements().map(this.findViewByModel,this),r=n.strict?"containsRect":"intersect";return t.filter(function(o){return o&&e[r](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new ye(e,n);return Ve.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,r){var o=new gt(e,n,t,r);return Ve.transformRect(o,this.matrix())},paperToLocalPoint:function(e,n){var t=new ye(e,n);return Ve.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,r){var o=new gt(e,n,t,r);return Ve.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new ye(e,n);return Ve.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,r){var o=new gt(e,n,t,r);return Ve.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new ye(e,n);return Ve.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,r){var o=new gt(e,n,t,r);return Ve.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,r){return this.localToPaperRect(e,n,t,r).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var r=new ye(e,n).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,n,t,r){var o=this.pageOffset(),u=new gt(e,n,t,r);return u.x-=o.x,u.y-=o.y,this.paperToLocalRect(u)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ye(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Yr))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,r=this.model,o=r.constructor.validations;return!(!t.multiLinks&&!o.multiLinks.call(this,r,n)||!t.linkPinning&&!o.linkPinning.call(this,r,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return Cn(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===n){if(!r||t&&(n=r[t],!1===n))return!1;n||(n=r.default)}if(!n)return!1;In(n)&&(n={name:n});const u=n.name,c=o[u];if(!c)throw new Error('Unknown highlighter ("'+u+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+u+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+u+'") is missing required unhighlight() method');return{highlighter:c,options:n.options||{},name:u}},onCellHighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:u}=r;o.highlight(e,n,u)},onCellUnhighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:u}=r;o.unhighlight(e,n,u)},pointerdblclick:function(e){e.preventDefault(),e=F(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=F(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=F(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=F(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=F(e);var r=this.snapToGrid(e.clientX,e.clientY),o=n.sourceView;o?o.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=F(e),t=this.snapToGrid(n.clientX,n.clientY),r=this.eventData(e).sourceView;r?r.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(kt.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=F(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=F(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=F(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const u=this.findView(t);o&&(u===o||(o.mouseenter(e),this.el.contains(t)))||u||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=F(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const u=this.findView(t);o&&(u===o||(o.mouseleave(e),this.el.contains(t)))||u||r===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=F(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,r=this.snapToGrid(t.clientX,t.clientY),o=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,r.x,r.y,o):this.trigger("blank:mousewheel",e,r.x,r.y,o)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var r=this.findView(n);if(r){if(e=F(e),this.guard(e,r))return;var o=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,t,o.x,o.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var o=this.findView(t);if(o){if(e=F(e),this.guard(e,o))return;var u=this.snapToGrid(e.clientX,e.clientY);n.call(this,o,e,t,u.x,u.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,r,o,u){n.onmagnet(t,o,u)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,r,o,u){n.magnetpointerdblclick(t,r,o,u)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,r,o,u){n.magnetcontextmenu(t,r,o,u)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=F(e),this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,r.x,r.y)}},getPointerArgs(e){const n=F(e),{x:t,y:r}=this.snapToGrid(n.clientX,n.clientY);return[n,t,r]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof cn||this.svg===e.target||this.el===e.target||kt.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Ve("svg",{width:"100%",height:"100%"},Ve("defs")),patterns:{},add:function(e,n){Ve(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(Ve("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(In(e)&&Array.isArray(n[e]))return n[e].map(function(m){return Nt({},m)});var t=e||{args:[{}]},r=Array.isArray(t),o=t.name;if(!r&&!o&&!t.markup&&(o="dot"),o&&Array.isArray(n[o])){var u=n[o].map(function(m){return Nt({},m)}),c=Array.isArray(t.args)?t.args:[t.args||{}];Hn(c[0],lo(e,"args"));for(var v=0;v<c.length;v++)u[v]&&Nt(u[v],c[v]);return u}return r?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],r=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,v){var m="pattern_"+v,T=Cr(c,t[v],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});T.width=n*(r.a||1)*(T.scaleFactor||1),T.height=n*(r.d||1)*(T.scaleFactor||1),o.exist(m)||o.add(m,Ve("pattern",{id:m,patternUnits:"userSpaceOnUse"},Ve(T.markup)));var I=o.get(m);Cn(T.update)&&T.update(I.node.childNodes[0],T);var b=T.ox%T.width;b<0&&(b+=T.width);var G=T.oy%T.height;G<0&&(G+=T.height),I.attr({x:b,y:G,width:T.width,height:T.height})});var u=(new XMLSerializer).serializeToString(o.root.node);return u="url(data:image/svg+xml;base64,"+btoa(u)+")",this.$grid.css("backgroundImage",u),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",r=this.scale(),o=this.translate();wn(n)&&(n=o.tx+r.sx*(n.x||0)+"px "+(o.ty+r.sy*(n.y||0))+"px"),wn(t)&&(t=(t=new gt(t).scale(r.sx,r.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,r=(n=n||{}).size,o=n.repeat||"no-repeat",u=n.opacity||1,c=Math.abs(n.quality)||1,v=this.constructor.backgroundPatterns[Ia(o)];if(Cn(v)){e.width*=c,e.height*=c;var m=v(e,n);if(!(m instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=m.toDataURL("image/png"),o="repeat",wn(r)?(r.width*=m.width/e.width,r.height*=m.height/e.height):void 0===r&&(n.size={width:m.width/c,height:m.height/c})}else t=e.src,void 0===r&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:u,backgroundRepeat:o,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=er(e),w(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Ur(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!wn(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+se(JSON.stringify(e))),!this.isDefined(n)){var o=gn[t]&&gn[t](e.args||{});if(!o)throw new Error("Non-existing filter "+t);var u=Nt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});Ve(o,u).appendTo(this.defs)}return n},defineGradient:function(e){if(!wn(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:r,id:o=r+n.id+se(JSON.stringify(e)),stops:u,attrs:c={}}=e;if(this.isDefined(o))return o;const v=un(u).map(({offset:T,color:I,opacity:b})=>Ve("stop").attr({offset:T,"stop-color":I,"stop-opacity":Number.isFinite(b)?b:1})),m=Ve(r,c,v);return m.id=o,m.appendTo(t),o},definePattern:function(e){if(!wn(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+se(JSON.stringify(e)),markup:o,attrs:u={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=Ve("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(u),"string"==typeof o)c.append(Ve(o));else{const{fragment:v}=Q(o);c.append(v)}return c.appendTo(t),r},defineMarker:function(e){if(!wn(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+se(JSON.stringify(e)),markup:o,attrs:u={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const v=Ve("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(v.id=r,v.attr(u),o)if("string"==typeof o)v.append(Ve(o));else{const{fragment:m}=Q(o);v.append(m)}else{const{type:m="path"}=e,T=Ve(m,lo(e,"type","id","markup","attrs","markerUnits"));v.append(T)}return v.appendTo(t),r}},{sorting:la,Layers:Ji,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,-1,n.width,n.height),o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,1,n.width,0),o.drawImage(e,0,0,t,r),o.setTransform(1,0,0,-1,0,n.height),o.drawImage(e,0,0,t,r),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(2*t,0),o.scale(-1,1),o.drawImage(e,0,0,t,r),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(e,0,0,t,r),n},watermark:function(e,n){n=n||{};var t=e.width,r=e.height,o=document.createElement("canvas");o.width=3*t,o.height=3*r;for(var u=o.getContext("2d"),c=pn(n.watermarkAngle)?-n.watermarkAngle:-20,v=Lt(c),m=o.width/4,T=o.height/4,I=0;I<4;I++)for(var b=0;b<4;b++)(I+b)%2>0&&(u.setTransform(1,0,0,1,(2*I-1)*m,(2*b-1)*T),u.rotate(v),u.drawImage(e,-t/2,-r/2,t,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){Ve(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;Ve(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,u=n.thickness;t=r-u>=0&&o-u>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Ve(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,u=n.thickness;t=r-u>=0&&o-u>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Ve(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,u=n.thickness;t=r-u>=0&&o-u>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",Ve(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class Pc{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new Do,this.paper=new md({el:kt("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const u=16*(.6*Math.max(...t.split("\n").map(v=>v.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new Xl({id:n,size:{width:u,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:u,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new Vo({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],r=[];return n.forEach(o=>{const u=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(100*o.average_success)}% (${o.question_count} Total)`;t.push(this.makeElement(o.pk,u)),o.next_category_ids.forEach(c=>{r.push(this.makeLink(o.pk,c))})}),t.concat(r)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const r=Cs.layout(this.graph,{dagre:fi(),graphlib:Xt(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Zi=f(19329);function Ic(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().reset()}),i.\u0275\u0275text(1," Back "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275property("disabled",!t.parentNode)}}function Ac(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function yd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"h2",7),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let Mc=(()=>{class e{constructor(t,r,o){this.categoryService=t,this.router=r,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new Pc(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{t.push(r)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(r=>r.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Zi.H),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(i.Injector))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"disabled","click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Ic,2,3,"button",1),i.\u0275\u0275template(2,Ac,3,3,"ng-container",2),i.\u0275\u0275template(3,yd,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"div",4,5)),2&t){const o=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===u.children.length)}},directives:[L.O5,Dt.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var kc=f(30567),Oc=f(78659),fr=f(27221),Ra=f(40520),is=f(22552);let os=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.get(r).pipe((0,fr.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.delete(r).pipe((0,fr.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const r=this.apiService.getURL("event");return this.http.post(r,t).pipe((0,fr.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const r=this.apiService.getURL("event",t.id);return this.http.put(r,t).pipe((0,fr.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,fr.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,fr.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,r){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:t.id,course:r},{observe:"response"}).pipe((0,fr.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Ra.eN),i.\u0275\u0275inject(is.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ca=f(71105),vo=f(27482);function Wt(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.event.name)}}function du(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const dl=function(e,n,t){return["/course",e,"event",n,"problem",t]};function Da(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,dl,r.courseId,r.eventId,t.question.id))}}const xd=function(e,n){return["/course",e,"problem",n]};function hl(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,xd,r.courseId,t.question.id))}}const Lc=function(e){return["/problem",e,"edit"]};function Xr(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,Lc,t.question.id))}}function bd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,du,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,Da,3,5,"ng-container",10),i.\u0275\u0275template(15,hl,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,Xr,3,3,"ng-container",0),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",o.highlight(o.getStatus(t)))("value",o.getStatus(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,t.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",o.user.is_teacher)}}function _d(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function Nc(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function Cd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,_d,2,0,"h2",13),i.\u0275\u0275template(2,Nc,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",t)}}function Rc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,Wt,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,bd,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Cd,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.uqjs.length)}}let Dc=(()=>{class e{constructor(t,r,o,u,c,v){this.authenticationService=t,this.router=r,this.route=o,this.uqjService=u,this.courseEventService=c,this.courseService=v,this.authenticationService.currentUser.subscribe(m=>this.user=m)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,kc.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(Oc.O),i.\u0275\u0275directiveInject(os),i.\u0275\u0275directiveInject(me.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Rc,6,7,"ng-container",0),2&t&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[L.O5,L.sg,ca.h,vo.Gi,Dt.v0,ne.yS],pipes:[L.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var Fa=f(22307),qi=f(95428),mo=f(50284),_n=f(61895),Qn=f(56249),Di=f(84620);const pl=["importDialog"];function wd(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.getEventFilterOptions())}}function Sd(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-island",8),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275elementStart(2,"div",9)(3,"figure",10),i.\u0275\u0275element(4,"tui-svg",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",12),i.\u0275\u0275text(6,"Add Event"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("hoverable",!0))}function Ms(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",24)}function Fc(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",25)}function Vc(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade Not Yet Available "),i.\u0275\u0275elementContainerEnd())}function Td(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Ed=function(e,n){return["/course",e,"event",n]};function Pd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",26),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Ed,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"Open":"Complete"," ")}}function Id(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",27),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const Bc=function(e,n){return["/course",e,"new-event",n]};function Hc(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Bc,r.courseId,t.id))}}function Ad(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",13),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",12),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",14),i.\u0275\u0275template(6,Ms,1,0,"tui-tag",15),i.\u0275\u0275template(7,Fc,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"p",17),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"p",18),i.\u0275\u0275template(16,Vc,2,0,"ng-container",19),i.\u0275\u0275template(17,Td,2,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",21),i.\u0275\u0275template(20,Pd,3,5,"ng-container",19),i.\u0275\u0275template(21,Id,2,1,"ng-template",null,22,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,Hc,2,4,"a",23),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(8),o=i.\u0275\u0275reference(18),u=i.\u0275\u0275reference(22),c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(11,11,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(14,14,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open&&t.is_exam)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function gl(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",33)(1,"p",13),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",12),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",34),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(t).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(u,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name)}}const jc=function(e){return["/course",e,"new-event"]};function ks(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",30)(2,"a",31),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",10),i.\u0275\u0275element(4,"tui-svg",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",12),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,gl,7,2,"tui-island",32),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,jc,t.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",t.courseEvents)}}function vl(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,ks,8,5,"ng-container",4),i.\u0275\u0275elementStart(1,"button",29),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",t.courseEvents)}}var Ho=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(Ho||(Ho={})),Ho))();let zc=(()=>{class e{constructor(t,r,o,u){this.authenticationService=t,this.courseEventService=r,this.dialogService=o,this.notificationsService=u,this.filter=Ho.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(Ho)}getEvents(){switch(this.filter){case Ho.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case Ho.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case Ho.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,r){this.courseEventService.importCourseEvent(t,r).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(os),i.\u0275\u0275directiveInject(Fa.RO),i.\u0275\u0275directiveInject(Yt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(pl,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.importDialog=o.first)}},inputs:{events:"events",course:"course"},decls:8,vars:3,consts:[["tuiTextfieldSize","s",3,"ngModel","ngModelChange"],["tuiTextfield","","placeholder","Choose your hero"],[3,"items",4,"tuiDataList"],[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],[3,"items"],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","m","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","m","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-select",0),i.\u0275\u0275listener("ngModelChange",function(u){return r.filter=u}),i.\u0275\u0275element(1,"input",1),i.\u0275\u0275template(2,wd,1,1,"tui-data-list-wrapper",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,Sd,7,1,"ng-container",4),i.\u0275\u0275template(5,Ad,24,17,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,vl,3,1,"ng-template",null,6,i.\u0275\u0275templateRefExtractor)),2&t&&(i.\u0275\u0275property("ngModel",r.filter),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.getEvents()))},directives:[qi.uJ,qi.OI,xe.sz,ee.NgControlStatus,ee.NgModel,_n.MB,Qn.gX,mo.eC,L.O5,ca.h,Di.P,L.sg,vo.Gi,Dt.v0,ne.yS],pipes:[L.uU,L.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})(),Os=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}useTokens(t,r){const o=new Ra.WM({"Content-Type":"application/json"}),u=this.apiService.getURL("token-use","use",r);return this.http.post(u,t,{headers:o}).pipe((0,fr.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Ra.eN),i.\u0275\u0275inject(is.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var hu=f(21922);function yo(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Va(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",17)}function Md(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",18)}function Uc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Va,1,0,"tui-tag",15),i.\u0275\u0275template(2,Md,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",t)}}function kd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}const Od=function(){return{standalone:!0}};function Ld(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,Uc,4,2,"ng-container",11),i.\u0275\u0275template(5,kd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(o){return i.\u0275\u0275restoreView(t).$implicit.num_used=o}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",i.\u0275\u0275pureFunction0(10,Od))}}let Nd=(()=>{class e{constructor(t,r,o,u){this.tokenUseService=t,this.route=r,this.authenticationService=o,this.notificationsService=u,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(o=>r[o.option.id]=o.num_used),this.tokenUseService.useTokens(r,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Os),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(Yt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,yo,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"form",3)(7,"div",4),i.\u0275\u0275template(8,Ld,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6)(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[L.O5,en.Ls,ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.NgForm,L.sg,ca.h,vo.Gi,hu.EA,hu.aQ,ee.NgControlStatus,ee.NgModel,Dt.v0],pipes:[L.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var Gc=f(76508),eo=f(78697);function Rd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275reference(4),u=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("margin-top",r+"rem")("order",r%2*-r),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",o.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(u.getGetOrdinal(t.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function Dd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function Fd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function Vd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function Bd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(t.rank)," ")}}function Wc(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21)(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function $c(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function Yc(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,Bd,2,1,"td",20),i.\u0275\u0275template(2,Wc,4,4,"td",20),i.\u0275\u0275template(3,$c,2,1,"td",20),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function Hd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275template(2,Rd,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),i.\u0275\u0275template(7,Dd,2,0,"th",7),i.\u0275\u0275template(8,Fd,2,0,"th",7),i.\u0275\u0275template(9,Vd,2,0,"th",7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,Yc,4,3,"tr",9),i.\u0275\u0275elementEnd()()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",t.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}let jd=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(t,r)=>t.rank>r,this.filterInTopX=(t,r)=>t.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(t){return t.sort((o,u)=>u.token-o.token).map((o,u)=>({rank:u+1,name:o.name,token:o.token}))}getGetOrdinal(t){const r=["th","st","nd","rd"],o=t%100;return t+(r[(o-20)%10]||r[o]||r[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Hd,13,15,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[L.O5,L.sg,ca.h,Gc.JP,eo.c4,eo.Nx,eo.EE,eo.DZ,eo.Ws,eo.jY,eo.LU,eo.fu,eo.Bl,eo.Kt],pipes:[He.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();var pu=f(56197);function Xc(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function zd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",20)}function Ud(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function Gd(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Kc=function(e,n){return["/course",e,"event",n]};function Wd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Kc,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function $d(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const Ci=function(e,n){return["/course",e,"new-event",n]};function Yd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Ci,r.course.id,t.id))}}function Xd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,Xc,1,0,"tui-tag",11),i.\u0275\u0275template(14,zd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275template(17,Ud,2,0,"ng-container",14),i.\u0275\u0275template(18,Gd,2,4,"ng-template",null,15,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",16),i.\u0275\u0275template(21,Wd,3,5,"ng-container",14),i.\u0275\u0275template(22,$d,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(24,Yd,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(19),u=i.\u0275\u0275reference(23),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Kd(e,n){if(1&e&&i.\u0275\u0275template(0,Xd,25,16,"div",5),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function Jc(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function Jd(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",26)}function Qd(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Kc,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Zd(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Ci,r.course.id,t.id))}}function ml(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,Jc,1,0,"tui-tag",11),i.\u0275\u0275template(14,Jd,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",16),i.\u0275\u0275template(20,Qd,3,5,"ng-container",14),i.\u0275\u0275template(21,Zd,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,qd,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(22),u=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==u.user?null:u.user.is_teacher))("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function eh(e,n){if(1&e&&i.\u0275\u0275template(0,ml,24,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.pastEvents)}}let th=(()=>{class e{constructor(t){this.authenticationService=t,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t),this.upcomingEvents=this.events.filter(t=>t.is_open||t.is_not_available_yet).filter(t=>"CHALLENGE"==t.type),this.pastEvents=this.events.filter(t=>t.is_closed).filter(t=>"CHALLENGE"==t.type)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),i.\u0275\u0275text(3," Upcoming Challenges "),i.\u0275\u0275template(4,Kd,1,1,"ng-template",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-accordion-item",4),i.\u0275\u0275text(6," Past Challenges "),i.\u0275\u0275template(7,eh,1,1,"ng-template",3),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[pu.oc,pu.Kc,pu.dv,L.sg,L.O5,vo.Gi,Dt.v0,ne.yS],pipes:[L.uU,L.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function nh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Concept Map"),i.\u0275\u0275elementEnd())}function rh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function ih(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function oh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function ah(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function sh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1,"Challenges"),i.\u0275\u0275elementEnd())}function uh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",19),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",t.course)}}function lh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==t.course?null:t.course.question_set)("uqjs",null==t.course?null:t.course.uqjs)}}function ch(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function fh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",22),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==t.course?null:t.course.course_reg)}}function dh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",23),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==t.course?null:t.course.leader_board)("rankTopX",3)}}function hh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-challenge-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function ph(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",24)}let gh=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ue.$),i.\u0275\u0275directiveInject(me.N),i.\u0275\u0275directiveInject(ne.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:21,vars:13,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-text_h6"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h6",2),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-tabs-with-more",3,4),i.\u0275\u0275template(7,nh,2,0,"button",5),i.\u0275\u0275template(8,rh,2,0,"button",6),i.\u0275\u0275template(9,ih,2,0,"button",7),i.\u0275\u0275template(10,oh,2,0,"button",8),i.\u0275\u0275template(11,ah,2,0,"button",9),i.\u0275\u0275template(12,sh,2,0,"button",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,uh,2,1,"ng-container",11),i.\u0275\u0275template(14,lh,2,2,"ng-container",11),i.\u0275\u0275template(15,ch,2,2,"ng-container",11),i.\u0275\u0275template(16,fh,2,1,"ng-container",11),i.\u0275\u0275template(17,dh,2,2,"ng-container",11),i.\u0275\u0275template(18,hh,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(19,ph,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(6),u=i.\u0275\u0275reference(20);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.description," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",u),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",0===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",5===o.activeItemIndex)}},directives:[qt.WN,qt.tl,qt.yu,L.O5,Mc,Dc,zc,Nd,jd,th,Di.P],styles:[""]}),e})();var ft=f(68858);let yl=(()=>{class e{static createForm(){return(new ee.FormBuilder).group({name:new ee.FormControl(null,[ee.Validators.required]),type:new ee.FormControl("",[ee.Validators.required]),countForTokens:new ee.FormControl(!1,[ee.Validators.required]),startEndDatePicker:new ee.FormControl(new ft.VR(ft.TU.currentLocal(),ft.TU.currentLocal().append({day:7})),[ee.Validators.required]),startTimePicker:new ee.FormControl(ft.qD.currentLocal(),[ee.Validators.required]),endTimePicker:new ee.FormControl(ft.qD.currentLocal(),[ee.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new ee.FormBuilder).group({name:new ee.FormControl(t.name,[ee.Validators.required]),type:new ee.FormControl(t.type,[ee.Validators.required]),countForTokens:new ee.FormControl(t.count_for_tokens,[ee.Validators.required]),startEndDatePicker:new ee.FormControl(new ft.VR(ft.TU.fromLocalNativeDate(new Date(t.start_date)),ft.TU.fromLocalNativeDate(new Date(t.end_date))),[ee.Validators.required]),startTimePicker:new ee.FormControl(ft.qD.fromLocalNativeDate(new Date(t.start_date)),[ee.Validators.required]),endTimePicker:new ee.FormControl(ft.qD.fromLocalNativeDate(new Date(t.end_date)),[ee.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,r,o){return{id:o,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:r,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,r){return new Date(t.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,r=n.get("startTimePicker").value,o=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&o.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var gu=f(86097),xl=f(13774),We=f(52014),jo=f(35302),to=f(35137),ui=f(28634),fa=f(14335),Ls=f(35640),mt=f(73442),bl=f(295),da=f(40022),xo=f(39193),_l=f(52164),Cl=f(70589),qr=f(45261),ha=f(15411),Ba=f(83618),$n=f(72997),as=f(85113);function Qc(e,{value:n,min:t,max:r,dateFormat:o,dateSeparator:u}){return n&&n.toString(o,u)===e?e:ft.TU.normalizeParse(e,o).dayLimit(t,r).toString(o,u)}function vh(e){return n=>n.length!==ft.ek?{value:n}:{value:Qc(n,e)}}function vu(e,n){return ft.TU.normalizeParse(e.slice(0,ft.ek),n.dateFormat).dayLimit(n.min,n.max)}function mh(e,n){const{dateFormat:t,dateSeparator:r}=n;switch(e.length){case ft.ek:return vu(e,n).toString(t,r);case ft.ek+ft.mH.length:return vu(e,n).toString(t,r)+ft.mH;case ft.FZ:return n.value&&n.value.toString(t,r)===e?e:ft.VR.sort(vu(e.slice(0,ft.ek),n),vu(e.slice(ft.ek+ft.mH.length),n)).toString(t,r);default:return e}}function yh(e){return n=>({value:mh(n,e)})}function Zc(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},Ba.bM),n);return o=>{const u=[],c=o.split("");return t.forEach(m=>{const T=e.indexOf(m),I=parseInt(String(r[m]).substr(0,1),10);parseInt(c[T],10)>I&&(c[T+1]=c[T],c[T]="0",u.push(T))}),!t.some(m=>parseInt(o.substr(e.indexOf(m),2),10)>r[m])&&{value:c.join(""),indexesOfPipedChars:u}}}const mu=Array(2).fill(xo.hW),qc=Array(4).fill(xo.hW);function ef(e,n){return"YMD"===(as.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...qc,n,...mu,n,...mu]:[...mu,n,...mu,n,...qc]}function xh(e,n){as.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=ef(e,n);return[...t,ui.f$,ui.F,ui.f$,...t]}function yu(e,n){const{length:t}=String(e),r=Array(t).fill(xo.hW);return n&&r.unshift(n),r}function tf(e,n={}){const{HH:t,MM:r,SS:o,MS:u}=Object.assign(Object.assign({},Ba.bM),n);return[...yu(t),...yu(r,":"),...e.includes("HH:MM:SS")?yu(o,":"):[],..."HH:MM:SS.MSS"===e?yu(u,"."):[]]}var bo=f(35628),wl=f(24850),xu=f(7625),Sl=f(6083),Tl=f(34530),ei=f(33186),_o=f(93030),ss=f(26171),$t=f(24710),bu=f(53256),_u=f(2141),Cu=f(66695);let _h=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ei.gH))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,$t.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,mt.TH)()],e.prototype,"tuiColor",void 0),(0,$t.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,mt.TH)()],e.prototype,"tuiBackground",void 0),e=(0,$t.gn)([(0,$t.fM)(0,(0,i.Inject)(ei.gH))],e),e})(),Ch=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();var El=f(46579);const wu=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:r})=>{as.z.assert(Number.isInteger(n)),as.z.assert((0,El.Z2)(n,0,6)),as.z.assert(Number.isInteger(t)),as.z.assert((0,El.Z2)(t,0,ft.NA));let o=n*ft.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:ft.NA-(n-t)})(e,r)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new ft.TU(e.year,e.month,o)};let nf=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const o=[];for(let u=0;u<6;u++){const c=[];for(let v=0;v<ft.NA;v++){const m=wu({month:t,rowIndex:u,colIndex:v,firstDayOfWeek:this.firstDayOfWeek}),I=(b,G=t)=>b.year>G.year||b.month>G.month;if(!((b,G=t)=>b.year<G.year||b.month<G.month)(m)||r){if(I(m)&&!r)break;c.push(m)}}o.push(c)}return this.currentSheet=o.filter(u=>u.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(qr.Sy,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,$t.gn)([(0,$t.fM)(0,(0,i.Inject)(qr.Sy))],e),e})(),rf=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function Pl(e,n){1&e&&i.\u0275\u0275element(0,"div",3),2&e&&i.\u0275\u0275property("innerText",n.$implicit)}function of(e,n){if(1&e&&i.\u0275\u0275element(0,"div",12),2&e){const t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",t[1])}}function af(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,of,1,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.length>1)}}function sf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(o){i.\u0275\u0275restoreView(t);const u=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(o&&u)})("tuiPressedChange",function(o){i.\u0275\u0275restoreView(t);const u=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(o&&u)})("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(o)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,af,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,t,r.toMarkers,r.itemIsToday(t),!!r.getItemRange(t)))}}function uf(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,sf,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(t)||r.showAdjacent)}}function Th(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,uf,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o[r][t])}}function Eh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,Th,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[t].length)}}function Ph(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Eh,2,1,"div",4),i.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let Su=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=ft.TU.currentLocal(),this.month=ft.ql.currentLocal(),this.disabledItemHandler=ui.Iy,this.markerHandler=xo.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,o,u)=>{if(o||u)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof ft.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:r,pressedItem:o,hoveredItem:u}=this;return r(t)?"disabled":o&&o.daySame(t)?"pressed":u&&u.daySame(t)?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return r?r instanceof ft.TU?r.daySame(t)?"single":null:r.from.daySame(t)&&!r.isSingleDay||o&&o.dayAfter(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(t)&&!r.isSingleDay||o&&o.dayBefore(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:r,hoveredItem:o}=this;if(null===r||r instanceof ft.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(t)&&r.to.dayAfter(t);if(null===o)return!1;const u=ft.VR.sort(r.from,o);return u.from.daySameOrBefore(t)&&u.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,fa.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(qr.lQ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Pl,1,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Ph,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[L.sg,da.Ls,bu.Xj,L.O5,_u.c,Cu.n,_h],pipes:[L.Ov,nf,_o.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"month",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"hoveredItem",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"showAdjacent",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,$t.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,$t.gn)([(0,$t.fM)(0,(0,i.Inject)(qr.lQ))],e),e})(),Tu=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,da.WD,_o.I,bu.Ih,_u.V,Cu.f,Ch,rf]]}),e})();var lf=f(43360);function Ih(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const u=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(u)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t)}}function Il(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ih,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o.getItem(r,t))}}function cf(e,n){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,Il,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Ah=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=ft.ql.currentLocal().year,this.value=null,this.initialItem=ft.ql.currentLocal(),this.min=ft.K1,this.max=ft.Oy,this.disabledItemHandler=ui.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof ft.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,r){return 4*t+r+this.calculatedMin}getItemState(t){const{disabledItemHandler:r,max:o,pressedItem:u,hoveredItem:c}=this;return o.year<t||r!==ui.Iy&&r(t)?"disabled":u===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return null===r?null:r instanceof ft.F4?r.year===t?"single":null:r.from.year===t&&!r.from.yearSame(r.to)||null!==o&&o>r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===t&&!r.from.yearSame(r.to)||null!==o&&o<r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:r,hoveredItem:o}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==o&&r.from.year!==o&&(0,El.Z2)(t,Math.min(r.from.year,o),Math.max(r.from.year,o)):r.from.year<=t&&r.to.year>t)}onItemHovered(t,r){this.updateHoveredItem(t,r)}onItemPressed(t,r){this.updatePressedItem(t,r)}onItemClick(t){this.yearClick.emit(new ft.F4(t))}updateHoveredItem(t,r){this.hoveredItem=t?r:null}updatePressedItem(t,r){this.pressedItem=t?r:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,cf,2,1,"div",0),2&t&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[bu.Xj,da.Ls,lf.M,_u.c,Cu.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"initialItem",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),(0,$t.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),Mh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[_u.V,Cu.f,bu.Ih,da.WD,lf.e]]}),e})();var Al=f(61279),Eu=f(33703),us=f(89627),hf=f(37940),pf=f(3054);const kh=["wrapper"];function Oh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",t[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",t[1])("focusable",!1)}}const Lh=["*"];let no=(()=>{let e=class extends jo.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,Ls.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(qr.U4))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(kh,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Lh,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,Oh,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[L.O5,ss.A,Eu.t,pf.U,hf.q,Dt.v0],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,$t.gn)([(0,i.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabled",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"mode",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"leftDisabled",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"rightDisabled",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"leftClick",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"rightClick",void 0),e=(0,$t.gn)([(0,$t.fM)(0,(0,i.Inject)(qr.U4))],e),e})(),Nh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,hf.c,pf.F,Eu.u,ss.Z,Dt.fN]]}),e})();var gf=f(5767);function Ha(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function rn(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let Rh=(()=>{let e=class{constructor(){this.value=ft.ql.currentLocal(),this.min=ft.K1,this.max=ft.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const r=this.value.append(t);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,Ha,2,1,"ng-container",1),i.\u0275\u0275template(5,rn,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",o)}},directives:[no,L.O5,us.V,Eu.t],pipes:[L.Ov,gf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),e})(),li=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Eu.u,Nh,us.j,gf.g]]}),e})();function dr(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPickerYearClick(o)}),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function Dh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let Co=(()=>{let e=class{constructor(){this.month=ft.ql.currentLocal(),this.value=null,this.disabledItemHandler=ui.Iy,this.min=ft.K1,this.max=ft.Oy,this.minViewedMonth=ft.K1,this.maxViewedMonth=ft.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=xo.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,r,o)=>u=>u.dayBefore(r)||u.dayAfter(o)||t(u)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new ft.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,fa.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,dr,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,Dh,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",o)}},directives:[L.O5,Al.IB,Ah,Rh,Su],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"month",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"minViewedMonth",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"maxViewedMonth",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"hoveredItem",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"showAdjacent",void 0),(0,$t.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"monthChange",void 0),(0,$t.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),Ns=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,li,Tu,Mh,Al.Jy,_o.I]]}),e})(),Fh=(()=>{let e=class{constructor(t,r,o){this.disabledItemHandler=ui.Iy,this.markerHandler=xo.zE,this.defaultViewedMonthFirst=ft.ql.currentLocal(),this.defaultViewedMonthSecond=ft.ql.currentLocal().append({month:1}),this.min=ft.K1,this.max=ft.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(u,c)=>u.append({month:c}),t&&t.pipe((0,Tl.YP)(r),(0,xu.R)(o)).subscribe(u=>{this.value=u,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject($n.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ei.a3))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([ei.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionFirstViewedMonth(u)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionSecondViewedMonth(u)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[Co],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,We.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),e=(0,We.gn)([(0,We.fM)(0,(0,i.Inject)($n.cU)),(0,We.fM)(0,(0,i.Optional)()),(0,We.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,We.fM)(2,(0,i.Inject)(ei.a3))],e),e})(),Vh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[_o.I,Al.Jy,Ns]]}),e})();const vf=function(e,n,t,r){return[e,n,t,r,!0]},mf=function(e,n,t,r){return[e,n,t,r,!1]};function Ml(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,vf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,mf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function Bh(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",9)}function zo(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)})("keydown.space.prevent",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)})("click",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(u)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,Bh,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(t))}}const yf=function(e,n,t,r,o,u){return[e,n,t,r,o,u]};function Pu(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,zo,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,vf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,mf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,yf,t.items,t.mapper,t.min,t.max,t.minLength,i.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let Zn=(()=>{let e=class{constructor(t,r,o,u){this.otherDateText$=u,this.defaultViewedMonth=ft.ql.currentLocal(),this.disabledItemHandler=ui.Iy,this.markerHandler=xo.zE,this.items=[],this.min=ft.K1,this.max=ft.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=Ba.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,v,m,T,I)=>[...c.filter(b=>(null===T||b.range.from.append(T).daySameOrBefore(b.range.to))&&b.range.to.daySameOrAfter(v)&&(null===m||b.range.from.daySameOrBefore(m))),I],t&&t.pipe((0,Tl.YP)(r),(0,xu.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:r}=this;return"string"==typeof t&&null===r||r===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(ft.VR.sort(r.from,t)):this.value=new ft.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,fa.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,r,o){return u=>{if(!r||!r.isSingleDay||!o)return t(u);const c=r.from.append(o,!0).append({day:1}),v=r.from.append(o).append({day:-1});return c.dayBefore(u)&&v.dayAfter(u)||t(u)}}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject($n.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ei.a3),i.\u0275\u0275directiveInject($n.q5))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([ei.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,Ml,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,Pu,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",o)}},directives:[L.O5,Fh,ss.A,Co,Qn.qi,L.sg,Qn.vK,Di.P],pipes:[_o.c,L.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"items",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"minLength",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"maxLength",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,We.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,We.gn)([(0,i.Output)()],e.prototype,"rangeChange",void 0),(0,We.gn)([mt.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,We.gn)([(0,We.fM)(0,(0,i.Inject)($n.cU)),(0,We.fM)(0,(0,i.Optional)()),(0,We.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,We.fM)(2,(0,i.Inject)(ei.a3)),(0,We.fM)(3,(0,i.Inject)($n.q5))],e),e})(),nr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,_o.I,ss.Z,Ns,Ns,Di.E,Qn.pc,Vh]]}),e})();var Uo=f(38190),Go=f(67795);function Hh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPressed(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(t))("readOnly",r.readOnly)("iconContent",r.computedMobile?o:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function jh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function zh(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Uh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRangeChange(o)}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const Gh=["*",[["input"]]],xf=["*","input"],kl=[{provide:jo.M$,useExisting:(0,i.forwardRef)(()=>Ol)},{provide:to.KZ,useExisting:(0,i.forwardRef)(()=>Ol)},{provide:$n.cU,deps:[[new i.Optional,new i.Self,ee.NgControl],[new i.Optional,(0,i.forwardRef)(()=>$n.LD)]],useFactory:(e,n)=>(0,gu.q7)(e,n)},Sl.Sm];let Ol=(()=>{let e=class extends jo.F9{constructor(t,r,o,u,c,v,m,T,I,b,G,te){super(t,r,te),this.injector=o,this.isMobile=u,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=m,this.textfieldExampleText=T,this.dateFormat=I,this.dateSeparator=b,this.dateTexts$=G,this.valueTransformer=te,this.textMaskOptions={mask:xh(this.dateFormat,this.dateSeparator),pipe:yh(this),guide:!1},this.disabledItemHandler=ui.Iy,this.markerHandler=xo.zE,this.defaultViewedMonth=ft.ql.currentLocal(),this.items=[],this.min=ft.K1,this.max=ft.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=Ba.EP,this.dateFiller$=this.dateTexts$.pipe((0,wl.U)(oe=>(0,ft.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,_l.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?Ba.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,fa.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:r,activePeriod:o}=this;return o?String(o):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,xu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==ft.FZ)return void this.updateValue(null);const r=ft.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,fa.Hm)(this.value,t,(r,o)=>r.daySame(o))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===ft.ek||this.nativeValue.length===ft.ek+ft.mH.length)&&this.updateValue(ft.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,Ls.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const r=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new ft.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,o=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(o)?new ft.VR(r.from,o):r}getDateRangeFiller(t){return`${t}${ft.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(to.fL),i.\u0275\u0275directiveInject(Fa.RO),i.\u0275\u0275directiveInject($n.vk,8),i.\u0275\u0275directiveInject(xe.kI),i.\u0275\u0275directiveInject(xe.pX),i.\u0275\u0275directiveInject(ft.P_),i.\u0275\u0275directiveInject(ft.q_),i.\u0275\u0275directiveInject($n.zf),i.\u0275\u0275directiveInject($n.LD,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(_n.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(kl),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:xf,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Gh),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)})("tuiActiveZoneChange",function(u){return r.onActiveZone(u)}),i.\u0275\u0275template(1,Hh,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,jh,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,zh,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Uh,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[ha.o1,bl.e,da.Ls,_n.yc,_n.B1,Uo.n,xe.D9,xe._K,Go.hd,Di.P,Zn],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,We.gn)([(0,i.ViewChild)(_n.yc)],e.prototype,"textfield",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"items",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"minLength",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"maxLength",void 0),(0,We.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,We.gn)([(0,We.fM)(0,(0,i.Optional)()),(0,We.fM)(0,(0,i.Self)()),(0,We.fM)(0,(0,i.Inject)(ee.NgControl)),(0,We.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,We.fM)(2,(0,i.Inject)(i.Injector)),(0,We.fM)(3,(0,i.Inject)(to.fL)),(0,We.fM)(4,(0,i.Inject)(Fa.RO)),(0,We.fM)(5,(0,i.Optional)()),(0,We.fM)(5,(0,i.Inject)($n.vk)),(0,We.fM)(6,(0,i.Inject)(xe.kI)),(0,We.fM)(7,(0,i.Inject)(xe.pX)),(0,We.fM)(8,(0,i.Inject)(ft.P_)),(0,We.fM)(9,(0,i.Inject)(ft.q_)),(0,We.fM)(10,(0,i.Inject)($n.zf)),(0,We.fM)(11,(0,i.Optional)()),(0,We.fM)(11,(0,i.Inject)($n.LD))],e),e})();var Ll;let Wo=Ll=class extends Cl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};Wo.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(Wo)))(t||Wo)}}(),Wo.\u0275dir=i.\u0275\u0275defineDirective({type:Wo,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:qr.S0,useExisting:(0,i.forwardRef)(()=>Ll)}]),i.\u0275\u0275InheritDefinitionFeature]});let wi=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Go.QA,bl.A,da.WD,bo.wq,_n.KW,xe.cn,ha.jh,Di.E,nr,Uo.S]]}),e})();var ls=f(56498);function Wh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(u)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function $h(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,Wh,2,3,"button",4),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.filtered)}}const bf={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:Ba.bM,itemSize:"m"},Ds=new i.InjectionToken("Default parameters for input time component",{factory:()=>bf});var on;let hr=on=class extends jo.F9{constructor(n,t,r,o){super(n,t),this.timeTexts$=r,this.options=o,this.disabledItemHandler=ui.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,Ls.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,wl.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const r=ft.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=ft.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:tf(n,this.options.maxValues),pipe:Zc(n,this.options.maxValues),guide:!1}}filter(n,t,r){return n.filter(o=>o.toString(t).includes(r))}findNearestTimeFromItems(n){return this.items.reduce((t,r)=>Math.abs(r.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?r:t)}getMatch(n){return this.items.find(t=>(0,ui.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:r}=n;if(this.readOnly||!(r instanceof HTMLInputElement))return;const o=r.selectionStart||0;this.shiftTime(this.calculateShift(o,t)),r.setSelectionRange(o,o),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,Ls.NY)(this.nativeFocusableElement,!0,n),this.close())}};hr.\u0275fac=function(n){return new(n||hr)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject($n.Yq),i.\u0275\u0275directiveInject(Ds))},hr.\u0275cmp=i.\u0275\u0275defineComponent({type:hr,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(_n.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.textfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:to.KZ,useExisting:(0,i.forwardRef)(()=>on)},Sl.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(o){return t.onOpen(o)})("focusedChange",function(o){return t.onFocused(o)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("keydown.arrowUp",function(o){return t.onArrowUp(o)})("keydown.arrowDown",function(o){return t.onArrowDown(o)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,$h,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",r)("open",t.interactive&&t.open&&!!t.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[ha.o1,_n.yc,_n.B1,Uo.n,xe.D9,Go.hd,Qn.qi,L.sg,Qn.vK],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),hr.ctorParameters=()=>[{type:ee.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ee.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:ls.y,decorators:[{type:i.Inject,args:[$n.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[Ds]}]}],(0,We.gn)([(0,i.ViewChild)(_n.yc)],hr.prototype,"textfield",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],hr.prototype,"disabledItemHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],hr.prototype,"items",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],hr.prototype,"itemSize",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],hr.prototype,"strict",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],hr.prototype,"mode",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],hr.prototype,"postfix",void 0),(0,We.gn)([mt.UM],hr.prototype,"getFiller$",null),(0,We.gn)([(0,i.HostListener)("click")],hr.prototype,"onClick",null),(0,We.gn)([mt.UM],hr.prototype,"calculateMask",null),(0,We.gn)([mt.UM],hr.prototype,"filter",null),hr=on=(0,We.gn)([(0,We.fM)(0,(0,i.Optional)()),(0,We.fM)(0,(0,i.Self)()),(0,We.fM)(0,(0,i.Inject)(ee.NgControl)),(0,We.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,We.fM)(2,(0,i.Inject)($n.Yq)),(0,We.fM)(3,(0,i.Inject)(Ds))],hr);let Fi=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Go.QA,Qn.pc,ha.jh,_n.KW,Uo.S,xe.cn]]}),e})();function _f(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Xh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,_f,2,2,"button",23),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.localEventTypes)}}function An(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const Kh=function(e){return["/course",e]};let Nl=(()=>{class e{constructor(t,r,o,u){this.route=t,this.courseEventService=r,this.router=o,this.notificationsService=u,this.eventId=null,this.timeOptions=(0,gu.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=yl.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=yl.createFormWithData(t)}))}submitEvent(t){const r=yl.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(os),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(Yt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,Xh,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(30,An,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20)(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Kh,r.courseId)))},directives:[ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,ge.K3,ge.wU,ee.NgControlStatus,ee.FormControlName,Ln.y,qi.uJ,qi.OI,Qn.gX,Qn.qi,L.sg,Qn.vK,xl.p,Ol,Wo,hr,L.O5,en.Ls,Dt.v0,ne.yS],styles:[""]}),e})();var cs=f(25775),Jh=f(42654),Cf=f(7394),Qh=f(23912),Zh=f(59796);class wf{static createForm(){return(new ee.FormBuilder).group({report:new ee.FormControl("",[ee.Validators.required]),report_details:new ee.FormControl("")})}static extractData(n){return n.value}}let qh=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}reportQuestion(t,r){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},r),{question:t})).pipe((0,fr.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Ra.eN),i.\u0275\u0275inject(is.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Sf=f(24417),Rl=f(26537);function ep(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function tp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,ep,2,2,"button",8),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.reportOptions)}}function np(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Reason "),i.\u0275\u0275template(5,tp,2,1,"tui-data-list",4),i.\u0275\u0275element(6,"tui-field-error",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),i.\u0275\u0275text(9," Details "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"div",2)(11,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().submitReport()}),i.\u0275\u0275text(12," Submit Report "),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",t.formGroup),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",t.reportOptions?i.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),i.\u0275\u0275advance(9),i.\u0275\u0275property("disabled",t.formGroup.invalid)}}const rp=function(){return{label:"Report this question",size:"m"}};let ip=(()=>{class e{constructor(t,r){this.reportQuestionService=t,this.notificationsService=r,this.open=!1,this.openChange=new i.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=wf.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,wf.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(qh),i.\u0275\u0275directiveInject(Yt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,np,13,7,"ng-template",0),i.\u0275\u0275listener("tuiDialogChange",function(u){return r.toggleDialog(u)})),2&t&&i.\u0275\u0275property("tuiDialogOptions",i.\u0275\u0275pureFunction0(2,rp))("tuiDialog",r.open)},directives:[Fa.iu,ee.NgControlStatusGroup,ee.FormGroupDirective,qi.uJ,qi.OI,ee.NgControlStatus,ee.FormControlName,Qn.gX,Qn.qi,L.sg,Qn.vK,Ln.y,Sf.Jl,Sf.eQ,Dt.v0],pipes:[Rl.J],styles:[""]}),e})();const Fs=function(e){return["../",e]};function op(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",22)(1,"a",23),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tui-svg",24),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(8,Fs,null==t.parentCategory?null:t.parentCategory.pk)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)}}function Dl(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function ap(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function sp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28,29),i.\u0275\u0275text(2),i.\u0275\u0275template(3,ap,1,0,"tui-svg",30),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(1);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(4,Fs,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive)}}function up(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),i.\u0275\u0275text(3),i.\u0275\u0275template(4,Dl,1,0,"tui-svg",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,sp,4,6,"a",31),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(2);i.\u0275\u0275property("label",t.category.name),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Fs,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.children)}}function kr(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",25),i.\u0275\u0275template(1,up,6,8,"tui-opt-group",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.nestedCategories)}}function ci(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",34),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function lp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,ci,2,2,"button",33),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function cp(e,n){if(1&e&&i.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",t.currentQuestionId)}}function fp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275element(1,"tui-marker-icon",37),i.\u0275\u0275elementStart(2,"h1",38),i.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const Tf=function(){return["../../../"]};let dp=(()=>{class e{constructor(t,r,o,u,c,v){this.route=t,this.uqjService=r,this.difficultyService=o,this.courseService=u,this.categoryService=c,this.userStatsService=v,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new Jh.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((r,o)=>o.parent?r:[...r,{category:o,children:t.filter(u=>u.parent===o.pk).map(u=>({category:u,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var o,u;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=t.find(I=>this.categoryId===I.pk),this.parentCategory=t.find(I=>this.category.parent===I.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserStatsByCategory(this.categoryId),v=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(u=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==u?u:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),m=this.difficultyService.getDifficulties(),T=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,kc.D)([v,m,c,T]).subscribe(([I,b,G,te])=>{this.uqjs=R.shuffle(I),this.difficulties=b,this.userStats=G,this.categoryUserSuccessRate=te.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,r){var o,u;this.difficulty=t,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(u=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==u?u:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=R.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const r=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",o=this.userStats.find(u=>u.difficulty===r);this.userSuccessRate=o?o.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(u=>u.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(Oc.O),i.\u0275\u0275directiveInject(Cf.G),i.\u0275\u0275directiveInject(me.N),i.\u0275\u0275directiveInject(Zi.H),i.\u0275\u0275directiveInject(Qh.U))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:34,vars:40,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),i.\u0275\u0275text(5," Back to course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,op,4,10,"div",5),i.\u0275\u0275elementStart(7,"tui-hosted-dropdown",6)(8,"button",7),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(10,kr,2,1,"ng-template",null,8,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(12,"p",9),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"p",10),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"tui-select",11),i.\u0275\u0275listener("ngModelChange",function(u){return r.updateQuestions(u,r.include_solved)}),i.\u0275\u0275pipe(17,"stringifyTuiDataList"),i.\u0275\u0275text(18," Choose a level of difficulty "),i.\u0275\u0275template(19,lp,2,1,"tui-data-list",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"tui-checkbox-labeled",13),i.\u0275\u0275listener("ngModelChange",function(u){return r.updateQuestions(r.difficulty,u)}),i.\u0275\u0275text(21," Include Solved "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(22,"div",14)(23,"button",15),i.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),i.\u0275\u0275text(24," Report "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"button",16),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(26," Previous Question "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(27,"button",17),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(28," Next Question "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(29,"div",18),i.\u0275\u0275template(30,cp,1,1,"app-problem-view",19),i.\u0275\u0275template(31,fp,4,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(33,"app-problem-report-modal",21),i.\u0275\u0275listener("openChange",function(u){return r.reportQuestionModal=u}),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(11),u=i.\u0275\u0275reference(32);let c;i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(39,Tf)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentCategory),i.\u0275\u0275advance(1),i.\u0275\u0275property("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(c=null==r.category?null:r.category.name)&&void 0!==c?c:"Category Name"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*r.categorySuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.difficulty)("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(17,35,r.difficulties,0,1):""),i.\u0275\u0275advance(4),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.include_solved),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",u),i.\u0275\u0275advance(3),i.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[Zh.k,Dt.v0,ne.yS,L.O5,us.V,Di.P,ha.o1,Qn.qi,L.sg,Qn.Rs,Qn.vK,ne.Od,qi.uJ,qi.OI,xe.sz,ee.NgControlStatus,ee.NgModel,xe.be,Qn.gX,xl.p,ee.DefaultValueAccessor,cs.z,mr.B,ip],pipes:[Rl.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),Fl=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getGoal(t){const r=this.apiService.getURL("goal",t);return this.http.get(r).pipe((0,fr.K)(this.apiService.handleError("Unable to fetch goal.")))}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,fr.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const r=this.apiService.getURL("goal");return this.http.post(r,t).pipe((0,fr.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const r=this.apiService.getURL("goal-item");return this.http.post(r,t).pipe((0,fr.K)(this.apiService.handleError("Unable to create goal item.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(Ra.eN),i.\u0275\u0275inject(is.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function hp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;let r;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate3(" Solve ",t.number_of_questions," ",null!==(r=t.difficulty)&&void 0!==r?r:""," questions from ",t.category," ")}}const Ef=function(e){return[e]};function pp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div"),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div"),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(12," Items "),i.\u0275\u0275template(13,hp,2,3,"div",0),i.\u0275\u0275elementStart(14,"a",1),i.\u0275\u0275text(15,"Open"),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index;i.\u0275\u0275attribute("data-index",r),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Goal ",r," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Start date: ",t.start_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" End date: ",t.end_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Progress: ",t.progress," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Is Finished: ",t.is_finished," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Number of questions: ",t.number_of_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.goal_items),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(9,Ef,t.id))}}let gp=(()=>{class e{constructor(t){this.goalService=t}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.goals=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"h1"),i.\u0275\u0275text(1,"Goals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,pp,16,11,"div",0),i.\u0275\u0275elementStart(3,"a",1),i.\u0275\u0275text(4,"Create a new goal"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",r.goals),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink","create"))},directives:[L.sg,ne.yS],styles:[""]}),e})();var vp=f(70655);class ja{static createGoalForm(){return(new ee.FormBuilder).group({end_date:new ee.FormControl(ft.TU.currentLocal(),[ee.Validators.required]),end_time:new ee.FormControl(ft.qD.currentLocal(),[ee.Validators.required]),goal_items:new ee.FormArray([ja.createGoalItemForm()],[ee.Validators.required])})}static createGoalItemForm(){return(new ee.FormBuilder).group({category:new ee.FormControl("",[ee.Validators.required]),difficulty:new ee.FormControl("",[ee.Validators.required]),number_of_questions:new ee.FormControl("",[ee.Validators.required])})}static formatGoalFormData(n,t){return{course_id:t,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static formatGoalItemFormData(n,t){return Object.assign({goal:t},n.value)}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function Pf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),u=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(t))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?o:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function mp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function yp(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",8),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function xp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function bp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMonthChange(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,xp,3,1,"div",10)}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===t.items.length)}}const fs=["*",[["input"]]],_p=["*","input"],wp=[{provide:to.KZ,useExisting:(0,i.forwardRef)(()=>Vl)},{provide:$n.cU,deps:[[new i.Optional,new i.Self,ee.NgControl],[new i.Optional,$n.HF]],useFactory:(e,n)=>(0,gu.q7)(e,n)},{provide:jo.M$,useExisting:(0,i.forwardRef)(()=>Vl)},Sl.Sm];let Vl=(()=>{let e=class extends jo.F9{constructor(t,r,o,u,c,v,m,T,I,b,G){super(t,r,G),this.injector=o,this.isMobile=u,this.dialogService=c,this.mobileCalendar=v,this.textfieldSize=m,this.dateFormat=T,this.dateSeparator=I,this.dateTexts$=b,this.valueTransformer=G,this.month=null,this.textMaskOptions={mask:ef(this.dateFormat,this.dateSeparator),pipe:vh(this),guide:!1},this.min=ft.K1,this.max=ft.Oy,this.disabledItemHandler=ui.Iy,this.markerHandler=xo.zE,this.items=[],this.defaultActiveYearMonth=ft.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,wl.U)(te=>(0,ft.Yl)(te[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,_l.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:r,activeItem:o}=this;return o?String(o):t?t.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?Ba.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(r=>r.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,xu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==ft.ek?null:ft.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,r){return(0,fa.Hm)(t,r,(o,u)=>o.daySame(u))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(to.fL),i.\u0275\u0275directiveInject(Fa.RO),i.\u0275\u0275directiveInject($n.vk,8),i.\u0275\u0275directiveInject(xe.kI),i.\u0275\u0275directiveInject(ft.P_),i.\u0275\u0275directiveInject(ft.q_),i.\u0275\u0275directiveInject($n.zf),i.\u0275\u0275directiveInject($n.HF,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(_n.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(wp),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:_p,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(fs),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)}),i.\u0275\u0275template(1,Pf,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,mp,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,yp,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,bp,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,5,r.filler$)),i.\u0275\u0275advance(6),i.\u0275\u0275property("polymorpheus",r.type)}},directives:[ha.o1,da.Ls,_n.yc,_n.B1,Uo.n,xe.D9,Go.hd,Di.P,bo.GL,Co,ss.A,L.O5,us.V],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,We.gn)([(0,i.ViewChild)(_n.yc)],e.prototype,"textfield",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"items",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,We.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,We.gn)([(0,We.fM)(0,(0,i.Optional)()),(0,We.fM)(0,(0,i.Self)()),(0,We.fM)(0,(0,i.Inject)(ee.NgControl)),(0,We.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,We.fM)(2,(0,i.Inject)(i.Injector)),(0,We.fM)(3,(0,i.Inject)(to.fL)),(0,We.fM)(4,(0,i.Inject)(Fa.RO)),(0,We.fM)(5,(0,i.Optional)()),(0,We.fM)(5,(0,i.Inject)($n.vk)),(0,We.fM)(6,(0,i.Inject)(xe.kI)),(0,We.fM)(7,(0,i.Inject)(ft.P_)),(0,We.fM)(8,(0,i.Inject)(ft.q_)),(0,We.fM)(9,(0,i.Inject)($n.zf)),(0,We.fM)(10,(0,i.Optional)()),(0,We.fM)(10,(0,i.Inject)($n.HF))],e),e})();var If;let za=If=class extends Cl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};za.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(za)))(t||za)}}(),za.\u0275dir=i.\u0275\u0275defineDirective({type:za,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:qr.S0,useExisting:(0,i.forwardRef)(()=>If)}]),i.\u0275\u0275InheritDefinitionFeature]});let Af=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Go.QA,bo.wq,ss.Z,Ns,Di.E,us.j,ha.jh,_n.KW,Uo.S,da.WD,xe.cn]]}),e})();var Ua=f(27670),Mf=f(60390);function Sp(e,n){if(1&e&&i.\u0275\u0275element(0,"div",3),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275property("content",t)}}function Tp(e,n){1&e&&i.\u0275\u0275projection(0,2)}const Ep=["*",[["input"]],[["","polymorpheus-outlet",""]]],Pp=function(e,n,t,r,o){return[e,n,t,r,o]};var Iu;let Dr=Iu=class extends jo.F9{constructor(n,t,r,o){super(n,t),this.numberFormat=r,this.isIOS=o,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(u,c,v,m)=>({mask:(0,Ua.EC)({allowNegative:u,decimalLimit:v,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,Ua.YT)(this.numberFormat)}),pipe:(0,Ua.qs)("always"===c?v:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,m,u,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;t.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(n.preventDefault(),r.selectionStart++)}onValueChange(n){if((0,Ua.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,Ua.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if(xo.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const r=Math.min(this.max,Math.max(this.min,t));this.updateValue(r),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const r=Math.abs(n)%1>0;let o="always"===this.decimal||r?this.precision:0;const u=r?(0,Mf.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(o=u.length),(0,Mf.uf)(n,o,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,Ua.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,Ua.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var kf;Dr.\u0275fac=function(n){return new(n||Dr)(i.\u0275\u0275directiveInject(ee.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(qr.HO),i.\u0275\u0275directiveInject(to.FA))},Dr.\u0275cmp=i.\u0275\u0275defineComponent({type:Dr,selectors:[["tui-input-number"]],contentQueries:function(n,t,r){if(1&n&&i.\u0275\u0275contentQuery(r,bo.r1,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=o.first)}},viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(_n.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.primitiveTextfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("keydown.0",function(o){return t.onZero(o)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:to.KZ,useExisting:(0,i.forwardRef)(()=>Iu)},{provide:jo.M$,useExisting:(0,i.forwardRef)(()=>Iu)}]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(i.\u0275\u0275projectionDef(Ep),i.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("focusedChange",function(o){return t.onFocused(o)})("pressedChange",function(o){return t.onPressed(o)})("keydown",function(o){return t.onKeyDown(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275projection(2),i.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275template(4,Sp,1,1,"div",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Tp,1,0,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",i.\u0275\u0275pipeBindV(1,13,i.\u0275\u0275pureFunction5(19,Pp,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[_n.yc,_n.B1,Uo.n,xe.D9,xe.fy,Go.hd,L.O5,bo.r1],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Dr.ctorParameters=()=>[{type:ee.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[ee.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:i.Inject,args:[qr.HO]}]},{type:Boolean,decorators:[{type:i.Inject,args:[to.FA]}]}],(0,We.gn)([(0,i.ViewChild)(_n.yc)],Dr.prototype,"primitiveTextfield",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],Dr.prototype,"min",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],Dr.prototype,"max",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],Dr.prototype,"decimal",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],Dr.prototype,"precision",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],Dr.prototype,"prefix",void 0),(0,We.gn)([(0,i.Input)(),(0,mt.TH)()],Dr.prototype,"postfix",void 0),(0,We.gn)([(0,i.ContentChild)(bo.r1)],Dr.prototype,"polymorpheusValueContent",void 0),(0,We.gn)([(0,i.HostListener)("keydown.0",["$event"])],Dr.prototype,"onZero",null),Dr=Iu=(0,We.gn)([(0,We.fM)(0,(0,i.Optional)()),(0,We.fM)(0,(0,i.Self)()),(0,We.fM)(0,(0,i.Inject)(ee.NgControl)),(0,We.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,We.fM)(2,(0,i.Inject)(qr.HO)),(0,We.fM)(3,(0,i.Inject)(to.FA))],Dr);let ds=kf=class extends Cl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};ds.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(ds)))(t||ds)}}(),ds.\u0275dir=i.\u0275\u0275defineDirective({type:ds,selectors:[["tui-input-number"]],features:[i.\u0275\u0275ProvidersFeature([{provide:qr.S0,useExisting:(0,i.forwardRef)(()=>kf)}]),i.\u0275\u0275InheritDefinitionFeature]});let Mp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Go.QA,_o.I,_n.KW,xe.cn,Uo.S,bo.wq]]}),e})();function kp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t.pk),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function Op(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,kp,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.categories)}}function Lp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Np(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Lp,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function Rp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",13),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Category "),i.\u0275\u0275template(5,Op,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",4)(8,"tui-select",13),i.\u0275\u0275pipe(9,"stringifyTuiDataList"),i.\u0275\u0275text(10," Difficulty "),i.\u0275\u0275template(11,Np,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",4)(14,"tui-input-number",15),i.\u0275\u0275text(15," Number of questions "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",4)(18,"button",16),i.\u0275\u0275listener("click",function(){const u=i.\u0275\u0275restoreView(t).index;return i.\u0275\u0275nextContext().removeGoalItem(u)}),i.\u0275\u0275text(19," Remove "),i.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.categories?i.\u0275\u0275pipeBind3(3,8,r.categories,"pk","full_name"):"")("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(9,12,r.difficulties,0,1):"")("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions"))}}let Dp=(()=>{class e{constructor(t,r,o,u,c,v){this.goalService=t,this.categoryService=r,this.difficultyService=o,this.router=u,this.activatedRoute=c,this.notificationService=v,this.timeOptions=(0,gu.eN)()}ngOnInit(){this.courseId=this.activatedRoute.snapshot.params.courseId,this.goalForm=ja.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,r){return t.get(r)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(ja.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}onSubmit(){return(0,vp.mG)(this,void 0,void 0,function*(){const t=ja.formatGoalFormData(this.goalForm,this.courseId),r=yield this.goalService.createGoal(t).toPromise();for(const o of this.getGoalItemFormControls()){const u=ja.formatGoalItemFormData(o,r.id);yield this.goalService.createGoalItem(u).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(Zi.H),i.\u0275\u0275directiveInject(Cf.G),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(Yt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],decls:21,vars:4,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconPlus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Goal"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"tui-input-date",5),i.\u0275\u0275text(7," End date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",4)(10,"tui-input-time",7),i.\u0275\u0275text(11," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"h3",2),i.\u0275\u0275text(14,"Goal Items"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(15,Rp,20,16,"div",9),i.\u0275\u0275elementStart(16,"div",10)(17,"button",11),i.\u0275\u0275listener("click",function(){return r.addGoalItem()}),i.\u0275\u0275text(18," Add Another "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"button",12),i.\u0275\u0275text(20," Submit "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.goalForm),i.\u0275\u0275advance(9),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.getGoalItemFormControls()),i.\u0275\u0275advance(4),i.\u0275\u0275property("disabled",r.goalForm.invalid))},directives:[ee.\u0275NgNoValidate,ee.NgControlStatusGroup,ee.FormGroupDirective,Vl,za,ee.NgControlStatus,ee.FormControlName,Ln.y,hr,L.sg,qi.uJ,qi.OI,ee.FormControlDirective,Qn.gX,Qn.qi,Qn.vK,Dr,ds,Dt.v0],pipes:[Rl.J],styles:[""]}),e})();var Of=f(35326);function Fp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(r.value(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(r.label(r.activeItemIndexes[t]))}}function Vp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementStart(2,"tui-ring-chart",2),i.\u0275\u0275listener("activeItemIndexChange",function(o){const c=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).activeItemIndexes[c]=o}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Fp,4,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275reference(4),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",t," ",o.goal.stats[t].total," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("value",o.values(t))("activeItemIndex",o.activeItemIndexes[t])("content",r)("colorHandler",o.color)}}function Bp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,Vp,5,6,"div",1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.goalItemIds())}}let Hp=(()=>{class e{constructor(t,r){this.goalService=t,this.activatedRoute=r}ngOnInit(){this.goalService.getGoal(this.activatedRoute.snapshot.params.goalId).subscribe(r=>{this.goal=r,this.activeItemIndexes={},Object.keys(r.stats).forEach(o=>this.activeItemIndexes[o]=NaN)})}values(t){return[this.goal.stats[t].correct,this.goal.stats[t].partially_correct,this.goal.stats[t].wrong]}value(t){return isNaN(this.activeItemIndexes[t])?this.goal.stats[t].total:this.values(t)[this.activeItemIndexes[t]]}color(t){return{0:"success",1:"primary",2:"error"}[t]}label(t){return isNaN(t)?"Total":{0:"Correct",1:"Partially Correct",2:"Wrong"}[t]}goalItemIds(){return Object.keys(this.goal.stats).map(t=>parseInt(t))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Fl),i.\u0275\u0275directiveInject(ne.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value","activeItemIndex","content","colorHandler","activeItemIndexChange"],["content",""]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Bp,2,1,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.goal)},directives:[L.O5,L.sg,Of.i],styles:[""]}),e})();const jp=[{path:"",component:yt,canActivate:[K.a]},{path:":courseId",component:gh,canActivate:[K.a]},{path:":courseId/register",component:Ft,canActivate:[K.a]},{path:":courseId/new-event",component:Nl,canActivate:[K.a]},{path:":courseId/new-event/:eventId",component:Nl,canActivate:[K.a]},{path:":courseId/event/:eventId",component:Dc,canActivate:[K.a]},{path:":courseId/problem/:id",component:cs.z,canActivate:[K.a]},{path:":courseId/event/:eventId/problem/:id",component:cs.z,canActivate:[K.a]},{path:":courseId/practice/category/:categoryId",component:dp,canActivate:[K.a]},{path:":courseId/goal",component:gp,canActivate:[K.a]},{path:":courseId/goal/create",component:Dp,canActivate:[K.a]},{path:":courseId/goal/:goalId",component:Hp,canActivate:[K.a]}];let Bl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[ne.Bz.forChild(jp)],ne.Bz]}),e})();var Lf=f(16995);f(41065),f(35379),f(18583),f(92198);let Yp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Di.E]]}),e})();var Xp=f(96560),Kp=f(22079),Jp=f(70228),jl=f(38333),Qp=f(66235),zl=f(24736),Zp=f(63821),qp=f(68476),eg=f(54554);let tg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[os,me.N,Os],imports:[[L.ez,Qp.J,Bl,ee.FormsModule,Lf._l,zl.D,Zp.ProblemsModule,ee.ReactiveFormsModule,eg.l,Go.QA,pu.iK,bl.A,Gc.Jm,Dt.fN,Ns,xl.s,Qn.pc,mo.zX,Fa.up,Xp.S,Ln.C,He.p,ha.jh,hu.$H,Af,wi,ge.Qf,Mp,Fi,ca.y,us.j,Kp.dS,mr.z,Jp.z,en.Hi,Of.R,qi.Jy,qp.T,Yp,Di.E,eo.jz,jl.qE.forRoot(),qt.$$,vo.d3,xe.cn]]}),e})()},71066:(P,W,f)=>{var p,g,E;E="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,p=[f(29610),f(58259),W],void 0!==(g=function(k,M,H){E.Backbone=function(S,E,x,A){var k=S.Backbone,M=Array.prototype.slice;E.VERSION="1.4.1",E.$=A,E.noConflict=function(){return S.Backbone=k,this},E.emulateHTTP=!1,E.emulateJSON=!1;var L,H=E.Events={},j=/\s+/,K=function(R,U,re,be,Ke){var pt,Xe=0;if(re&&"object"==typeof re)for((void 0!==be&&"context"in Ke&&void 0===Ke.context&&(Ke.context=be),pt=x.keys(re));Xe<pt.length;Xe++)U=K(R,U,pt[Xe],re[pt[Xe]],Ke);else if(re&&j.test(re))for(pt=re.split(j);Xe<pt.length;Xe++)U=R(U,pt[Xe],be,Ke);else U=R(U,re,be,Ke);return U};H.on=function(R,U,re){return this._events=K(ne,this._events||{},R,U,{context:re,ctx:this,listening:L}),L&&((this._listeners||(this._listeners={}))[L.id]=L,L.interop=!1),this},H.listenTo=function(R,U,re){if(!R)return this;var be=R._listenId||(R._listenId=x.uniqueId("l")),Ke=this._listeningTo||(this._listeningTo={}),Xe=L=Ke[be];Xe||(this._listenId||(this._listenId=x.uniqueId("l")),Xe=L=Ke[be]=new ee(this,R));var pt=fe(R,U,re,this);if(L=void 0,pt)throw pt;return Xe.interop&&Xe.on(U,re),this};var ne=function(R,U,re,be){if(re){var Ke=R[U]||(R[U]=[]),Xe=be.context,pt=be.ctx,Ot=be.listening;Ot&&Ot.count++,Ke.push({callback:re,context:Xe,ctx:Xe||pt,listening:Ot})}return R},fe=function(R,U,re,be){try{R.on(U,re,be)}catch(Ke){return Ke}};H.off=function(R,U,re){return this._events?(this._events=K(i,this._events,R,U,{context:re,listeners:this._listeners}),this):this},H.stopListening=function(R,U,re){var be=this._listeningTo;if(!be)return this;for(var Ke=R?[R._listenId]:x.keys(be),Xe=0;Xe<Ke.length;Xe++){var pt=be[Ke[Xe]];if(!pt)break;pt.obj.off(U,re,this),pt.interop&&pt.off(U,re)}return x.isEmpty(be)&&(this._listeningTo=void 0),this};var i=function(R,U,re,be){if(R){var Ot,Ke=be.context,Xe=be.listeners,pt=0;if(!U&&!Ke&&!re){for(Ot=x.keys(Xe);pt<Ot.length;pt++)Xe[Ot[pt]].cleanup();return}for(Ot=U?[U]:x.keys(R);pt<Ot.length;pt++){var Lt=R[U=Ot[pt]];if(!Lt)break;for(var an=[],hn=0;hn<Lt.length;hn++){var nn=Lt[hn];if(re&&re!==nn.callback&&re!==nn.callback._callback||Ke&&Ke!==nn.context)an.push(nn);else{var zn=nn.listening;zn&&zn.off(U,re)}}an.length?R[U]=an:delete R[U]}return R}};H.once=function(R,U,re){var be=K(ue,{},R,U,this.off.bind(this));return"string"==typeof R&&null==re&&(U=void 0),this.on(be,U,re)},H.listenToOnce=function(R,U,re){var be=K(ue,{},U,re,this.stopListening.bind(this,R));return this.listenTo(R,be)};var ue=function(R,U,re,be){if(re){var Ke=R[U]=x.once(function(){be(U,Ke),re.apply(this,arguments)});Ke._callback=re}return R};H.trigger=function(R){if(!this._events)return this;for(var U=Math.max(0,arguments.length-1),re=Array(U),be=0;be<U;be++)re[be]=arguments[be+1];return K(me,this._events,R,void 0,re),this};var me=function(R,U,re,be){if(R){var Ke=R[U],Xe=R.all;Ke&&Xe&&(Xe=Xe.slice()),Ke&&ge(Ke,be),Xe&&ge(Xe,[U].concat(be))}return R},ge=function(R,U){var re,be=-1,Ke=R.length,Xe=U[0],pt=U[1],Ot=U[2];switch(U.length){case 0:for(;++be<Ke;)(re=R[be]).callback.call(re.ctx);return;case 1:for(;++be<Ke;)(re=R[be]).callback.call(re.ctx,Xe);return;case 2:for(;++be<Ke;)(re=R[be]).callback.call(re.ctx,Xe,pt);return;case 3:for(;++be<Ke;)(re=R[be]).callback.call(re.ctx,Xe,pt,Ot);return;default:for(;++be<Ke;)(re=R[be]).callback.apply(re.ctx,U);return}},ee=function(R,U){this.id=R._listenId,this.listener=R,this.obj=U,this.interop=!0,this.count=0,this._events=void 0};ee.prototype.on=H.on,ee.prototype.off=function(R,U){var re;this.interop?(this._events=K(i,this._events,R,U,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},ee.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},H.bind=H.on,H.unbind=H.off,x.extend(E,H);var xe=E.Model=function(R,U){var re=R||{};U||(U={}),this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},U.collection&&(this.collection=U.collection),U.parse&&(re=this.parse(re,U)||{});var be=x.result(this,"defaults");re=x.defaults(x.extend({},be,re),be),this.set(re,U),this.changed={},this.initialize.apply(this,arguments)};x.extend(xe.prototype,H,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(R){return x.clone(this.attributes)},sync:function(){return E.sync.apply(this,arguments)},get:function(R){return this.attributes[R]},escape:function(R){return x.escape(this.get(R))},has:function(R){return null!=this.get(R)},matches:function(R){return!!x.iteratee(R,this)(this.attributes)},set:function(R,U,re){if(null==R)return this;var be;if("object"==typeof R?(be=R,re=U):(be={})[R]=U,re||(re={}),!this._validate(be,re))return!1;var Ke=re.unset,Xe=re.silent,pt=[],Ot=this._changing;this._changing=!0,Ot||(this._previousAttributes=x.clone(this.attributes),this.changed={});var Lt=this.attributes,an=this.changed,hn=this._previousAttributes;for(var nn in be)x.isEqual(Lt[nn],U=be[nn])||pt.push(nn),x.isEqual(hn[nn],U)?delete an[nn]:an[nn]=U,Ke?delete Lt[nn]:Lt[nn]=U;if(this.idAttribute in be){var zn=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,zn,re)}if(!Xe){pt.length&&(this._pending=re);for(var Nn=0;Nn<pt.length;Nn++)this.trigger("change:"+pt[Nn],this,Lt[pt[Nn]],re)}if(Ot)return this;if(!Xe)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(R,U){return this.set(R,void 0,x.extend({},U,{unset:!0}))},clear:function(R){var U={};for(var re in this.attributes)U[re]=void 0;return this.set(U,x.extend({},R,{unset:!0}))},hasChanged:function(R){return null==R?!x.isEmpty(this.changed):x.has(this.changed,R)},changedAttributes:function(R){if(!R)return!!this.hasChanged()&&x.clone(this.changed);var be,U=this._changing?this._previousAttributes:this.attributes,re={};for(var Ke in R){var Xe=R[Ke];x.isEqual(U[Ke],Xe)||(re[Ke]=Xe,be=!0)}return!!be&&re},previous:function(R){return null!=R&&this._previousAttributes?this._previousAttributes[R]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(R){R=x.extend({parse:!0},R);var U=this,re=R.success;return R.success=function(be){var Ke=R.parse?U.parse(be,R):be;if(!U.set(Ke,R))return!1;re&&re.call(R.context,U,be,R),U.trigger("sync",U,be,R)},Xt(this,R),this.sync("read",this,R)},save:function(R,U,re){var be;null==R||"object"==typeof R?(be=R,re=U):(be={})[R]=U;var Ke=(re=x.extend({validate:!0,parse:!0},re)).wait;if(be&&!Ke){if(!this.set(be,re))return!1}else if(!this._validate(be,re))return!1;var Xe=this,pt=re.success,Ot=this.attributes;re.success=function(hn){Xe.attributes=Ot;var nn=re.parse?Xe.parse(hn,re):hn;if(Ke&&(nn=x.extend({},be,nn)),nn&&!Xe.set(nn,re))return!1;pt&&pt.call(re.context,Xe,hn,re),Xe.trigger("sync",Xe,hn,re)},Xt(this,re),be&&Ke&&(this.attributes=x.extend({},Ot,be));var Lt=this.isNew()?"create":re.patch?"patch":"update";"patch"===Lt&&!re.attrs&&(re.attrs=be);var an=this.sync(Lt,this,re);return this.attributes=Ot,an},destroy:function(R){R=R?x.clone(R):{};var U=this,re=R.success,be=R.wait,Ke=function(){U.stopListening(),U.trigger("destroy",U,U.collection,R)};R.success=function(pt){be&&Ke(),re&&re.call(R.context,U,pt,R),U.isNew()||U.trigger("sync",U,pt,R)};var Xe=!1;return this.isNew()?x.defer(R.success):(Xt(this,R),Xe=this.sync("delete",this,R)),be||Ke(),Xe},url:function(){var R=x.result(this,"urlRoot")||x.result(this.collection,"url")||tn();if(this.isNew())return R;var U=this.get(this.idAttribute);return R.replace(/[^\/]$/,"$&/")+encodeURIComponent(U)},parse:function(R,U){return R},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(R){return this._validate({},x.extend({},R,{validate:!0}))},_validate:function(R,U){if(!U.validate||!this.validate)return!0;R=x.extend({},this.attributes,R);var re=this.validationError=this.validate(R,U)||null;return!re||(this.trigger("invalid",this,re,x.extend(U,{validationError:re})),!1)}});var Ie=E.Collection=function(R,U){U||(U={}),this.preinitialize.apply(this,arguments),U.model&&(this.model=U.model),void 0!==U.comparator&&(this.comparator=U.comparator),this._reset(),this.initialize.apply(this,arguments),R&&this.reset(R,x.extend({silent:!0},U))},He={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1},Ue=function(R,U,re){re=Math.min(Math.max(re,0),R.length);var Xe,be=Array(R.length-re),Ke=U.length;for(Xe=0;Xe<be.length;Xe++)be[Xe]=R[Xe+re];for(Xe=0;Xe<Ke;Xe++)R[Xe+re]=U[Xe];for(Xe=0;Xe<be.length;Xe++)R[Xe+Ke+re]=be[Xe]};x.extend(Ie.prototype,H,{model:xe,preinitialize:function(){},initialize:function(){},toJSON:function(R){return this.map(function(U){return U.toJSON(R)})},sync:function(){return E.sync.apply(this,arguments)},add:function(R,U){return this.set(R,x.extend({merge:!1},U,_))},remove:function(R,U){U=x.extend({},U);var re=!x.isArray(R);R=re?[R]:R.slice();var be=this._removeModels(R,U);return!U.silent&&be.length&&(U.changes={added:[],merged:[],removed:be},this.trigger("update",this,U)),re?be[0]:be},set:function(R,U){if(null!=R){(U=x.extend({},He,U)).parse&&!this._isModel(R)&&(R=this.parse(R,U)||[]);var re=!x.isArray(R);R=re?[R]:R.slice();var be=U.at;null!=be&&(be=+be),be>this.length&&(be=this.length),be<0&&(be+=this.length+1);var Sn,Pt,Ke=[],Xe=[],pt=[],Ot=[],Lt={},an=U.add,hn=U.merge,nn=U.remove,zn=!1,Nn=this.comparator&&null==be&&!1!==U.sort,Vr=x.isString(this.comparator)?this.comparator:null;for(Pt=0;Pt<R.length;Pt++){var Mn=this.get(Sn=R[Pt]);if(Mn){if(hn&&Sn!==Mn){var Vn=this._isModel(Sn)?Sn.attributes:Sn;U.parse&&(Vn=Mn.parse(Vn,U)),Mn.set(Vn,U),pt.push(Mn),Nn&&!zn&&(zn=Mn.hasChanged(Vr))}Lt[Mn.cid]||(Lt[Mn.cid]=!0,Ke.push(Mn)),R[Pt]=Mn}else an&&(Sn=R[Pt]=this._prepareModel(Sn,U))&&(Xe.push(Sn),this._addReference(Sn,U),Lt[Sn.cid]=!0,Ke.push(Sn))}if(nn){for(Pt=0;Pt<this.length;Pt++)Lt[(Sn=this.models[Pt]).cid]||Ot.push(Sn);Ot.length&&this._removeModels(Ot,U)}var ir=!1;if(Ke.length&&!Nn&&an&&nn?(ir=this.length!==Ke.length||x.some(this.models,function(qn,Kn){return qn!==Ke[Kn]}),this.models.length=0,Ue(this.models,Ke,0),this.length=this.models.length):Xe.length&&(Nn&&(zn=!0),Ue(this.models,Xe,null==be?this.length:be),this.length=this.models.length),zn&&this.sort({silent:!0}),!U.silent){for(Pt=0;Pt<Xe.length;Pt++)null!=be&&(U.index=be+Pt),(Sn=Xe[Pt]).trigger("add",Sn,this,U);(zn||ir)&&this.trigger("sort",this,U),(Xe.length||Ot.length||pt.length)&&(U.changes={added:Xe,removed:Ot,merged:pt},this.trigger("update",this,U))}return re?R[0]:R}},reset:function(R,U){U=U?x.clone(U):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],U);return U.previousModels=this.models,this._reset(),R=this.add(R,x.extend({silent:!0},U)),U.silent||this.trigger("reset",this,U),R},push:function(R,U){return this.add(R,x.extend({at:this.length},U))},pop:function(R){var U=this.at(this.length-1);return this.remove(U,R)},unshift:function(R,U){return this.add(R,x.extend({at:0},U))},shift:function(R){var U=this.at(0);return this.remove(U,R)},slice:function(){return M.apply(this.models,arguments)},get:function(R){if(null!=R)return this._byId[R]||this._byId[this.modelId(this._isModel(R)?R.attributes:R,R.idAttribute)]||R.cid&&this._byId[R.cid]},has:function(R){return null!=this.get(R)},at:function(R){return R<0&&(R+=this.length),this.models[R]},where:function(R,U){return this[U?"find":"filter"](R)},findWhere:function(R){return this.where(R,!0)},sort:function(R){var U=this.comparator;if(!U)throw new Error("Cannot sort a set without a comparator");R||(R={});var re=U.length;return x.isFunction(U)&&(U=U.bind(this)),1===re||x.isString(U)?this.models=this.sortBy(U):this.models.sort(U),R.silent||this.trigger("sort",this,R),this},pluck:function(R){return this.map(R+"")},fetch:function(R){var U=(R=x.extend({parse:!0},R)).success,re=this;return R.success=function(be){re[R.reset?"reset":"set"](be,R),U&&U.call(R.context,re,be,R),re.trigger("sync",re,be,R)},Xt(this,R),this.sync("read",this,R)},create:function(R,U){var re=(U=U?x.clone(U):{}).wait;if(!(R=this._prepareModel(R,U)))return!1;re||this.add(R,U);var be=this,Ke=U.success;return U.success=function(Xe,pt,Ot){re&&be.add(Xe,Ot),Ke&&Ke.call(Ot.context,Xe,pt,Ot)},R.save(null,U),R},parse:function(R,U){return R},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(R,U){return R[U||this.model.prototype.idAttribute||"id"]},values:function(){return new nt(this,ot)},keys:function(){return new nt(this,ut)},entries:function(){return new nt(this,yt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(R,U){return this._isModel(R)?(R.collection||(R.collection=this),R):((U=U?x.clone(U):{}).collection=this,(re=this.model.prototype?new this.model(R,U):this.model(R,U)).validationError?(this.trigger("invalid",this,re.validationError,U),!1):re);var re},_removeModels:function(R,U){for(var re=[],be=0;be<R.length;be++){var Ke=this.get(R[be]);if(Ke){var Xe=this.indexOf(Ke);this.models.splice(Xe,1),this.length--,delete this._byId[Ke.cid];var pt=this.modelId(Ke.attributes,Ke.idAttribute);null!=pt&&delete this._byId[pt],U.silent||(U.index=Xe,Ke.trigger("remove",Ke,this,U)),re.push(Ke),this._removeReference(Ke,U)}}return re},_isModel:function(R){return R instanceof xe},_addReference:function(R,U){this._byId[R.cid]=R;var re=this.modelId(R.attributes,R.idAttribute);null!=re&&(this._byId[re]=R),R.on("all",this._onModelEvent,this)},_removeReference:function(R,U){delete this._byId[R.cid];var re=this.modelId(R.attributes,R.idAttribute);null!=re&&delete this._byId[re],this===R.collection&&delete R.collection,R.off("all",this._onModelEvent,this)},_onModelEvent:function(R,U,re,be){if(U){if(("add"===R||"remove"===R)&&re!==this)return;if("destroy"===R&&this.remove(U,be),"changeId"===R){var Ke=this.modelId(U.previousAttributes(),U.idAttribute),Xe=this.modelId(U.attributes,U.idAttribute);null!=Ke&&delete this._byId[Ke],null!=Xe&&(this._byId[Xe]=U)}}this.trigger.apply(this,arguments)}});var rt="function"==typeof Symbol&&Symbol.iterator;rt&&(Ie.prototype[rt]=Ie.prototype.values);var nt=function(R,U){this._collection=R,this._kind=U,this._index=0},ot=1,ut=2,yt=3;rt&&(nt.prototype[rt]=function(){return this}),nt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var U,R=this._collection.at(this._index);if(this._index++,this._kind===ot)U=R;else{var re=this._collection.modelId(R.attributes,R.idAttribute);U=this._kind===ut?re:[re,R]}return{value:U,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Mt=E.View=function(R){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(R,en)),this._ensureElement(),this.initialize.apply(this,arguments)},Yt=/^(\S+)\s*(.*)$/,en=["model","collection","el","id","attributes","className","tagName","events"];x.extend(Mt.prototype,H,{tagName:"div",$:function(R){return this.$el.find(R)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(R){return this.undelegateEvents(),this._setElement(R),this.delegateEvents(),this},_setElement:function(R){this.$el=R instanceof E.$?R:E.$(R),this.el=this.$el[0]},delegateEvents:function(R){if(R||(R=x.result(this,"events")),!R)return this;for(var U in this.undelegateEvents(),R){var re=R[U];if(x.isFunction(re)||(re=this[re]),re){var be=U.match(Yt);this.delegate(be[1],be[2],re.bind(this))}}return this},delegate:function(R,U,re){return this.$el.on(R+".delegateEvents"+this.cid,U,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(R,U,re){return this.$el.off(R+".delegateEvents"+this.cid,U,re),this},_createElement:function(R){return document.createElement(R)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var R=x.extend({},x.result(this,"attributes"));this.id&&(R.id=x.result(this,"id")),this.className&&(R.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(R)}},_setAttributes:function(R){this.$el.attr(R)}});var Ln=function(R,U,re,be){x.each(re,function(Ke,Xe){U[Xe]&&(R.prototype[Xe]=function(R,U,re,be){switch(U){case 1:return function(){return R[re](this[be])};case 2:return function(Ke){return R[re](this[be],Ke)};case 3:return function(Ke,Xe){return R[re](this[be],mr(Ke,this),Xe)};case 4:return function(Ke,Xe,pt){return R[re](this[be],mr(Ke,this),Xe,pt)};default:return function(){var Ke=M.call(arguments);return Ke.unshift(this[be]),R[re].apply(R,Ke)}}}(U,Ke,Xe,be))})},mr=function(R,U){return x.isFunction(R)?R:x.isObject(R)&&!U._isModel(R)?Fr(R):x.isString(R)?function(re){return re.get(R)}:R},Fr=function(R){var U=x.matches(R);return function(re){return U(re.attributes)}};x.each([[Ie,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[xe,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(R){var U=R[0],re=R[1],be=R[2];U.mixin=function(Ke){var Xe=x.reduce(x.functions(Ke),function(pt,Ot){return pt[Ot]=0,pt},{});Ln(U,Ke,Xe,be)},Ln(U,x,re,be)}),E.sync=function(R,U,re){var be=yr[R];x.defaults(re||(re={}),{emulateHTTP:E.emulateHTTP,emulateJSON:E.emulateJSON});var Ke={type:be,dataType:"json"};if(re.url||(Ke.url=x.result(U,"url")||tn()),null==re.data&&U&&("create"===R||"update"===R||"patch"===R)&&(Ke.contentType="application/json",Ke.data=JSON.stringify(re.attrs||U.toJSON(re))),re.emulateJSON&&(Ke.contentType="application/x-www-form-urlencoded",Ke.data=Ke.data?{model:Ke.data}:{}),re.emulateHTTP&&("PUT"===be||"DELETE"===be||"PATCH"===be)){Ke.type="POST",re.emulateJSON&&(Ke.data._method=be);var Xe=re.beforeSend;re.beforeSend=function(Lt){if(Lt.setRequestHeader("X-HTTP-Method-Override",be),Xe)return Xe.apply(this,arguments)}}"GET"!==Ke.type&&!re.emulateJSON&&(Ke.processData=!1);var pt=re.error;re.error=function(Lt,an,hn){re.textStatus=an,re.errorThrown=hn,pt&&pt.call(re.context,Lt,an,hn)};var Ot=re.xhr=E.ajax(x.extend(Ke,re));return U.trigger("request",U,Ot,re),Ot};var yr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};E.ajax=function(){return E.$.ajax.apply(E.$,arguments)};var Fn=E.Router=function(R){R||(R={}),this.preinitialize.apply(this,arguments),R.routes&&(this.routes=R.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$e=/\((.*?)\)/g,tt=/(\(\?)?:\w+/g,st=/\*\w+/g,_t=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(Fn.prototype,H,{preinitialize:function(){},initialize:function(){},route:function(R,U,re){x.isRegExp(R)||(R=this._routeToRegExp(R)),x.isFunction(U)&&(re=U,U=""),re||(re=this[U]);var be=this;return E.history.route(R,function(Ke){var Xe=be._extractParameters(R,Ke);!1!==be.execute(re,Xe,U)&&(be.trigger.apply(be,["route:"+U].concat(Xe)),be.trigger("route",U,Xe),E.history.trigger("route",be,U,Xe))}),this},execute:function(R,U,re){R&&R.apply(this,U)},navigate:function(R,U){return E.history.navigate(R,U),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var R,U=x.keys(this.routes);null!=(R=U.pop());)this.route(R,this.routes[R])}},_routeToRegExp:function(R){return R=R.replace(_t,"\\$&").replace($e,"(?:$1)?").replace(tt,function(U,re){return re?U:"([^/?]+)"}).replace(st,"([^?]*?)"),new RegExp("^"+R+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(R,U){var re=R.exec(U).slice(1);return x.map(re,function(be,Ke){return Ke===re.length-1?be||null:be?decodeURIComponent(be):null})}});var Ft=E.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},qt=/^[#\/]|\s+$/g,kt=/^\/+|\/+$/g,jn=/#.*$/;Ft.started=!1,x.extend(Ft.prototype,H,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(R){return decodeURI(R.replace(/%25/g,"%2525"))},getSearch:function(){var R=this.location.href.replace(/#.*/,"").match(/\?.+/);return R?R[0]:""},getHash:function(R){var U=(R||this).location.href.match(/#(.*)$/);return U?U[1]:""},getPath:function(){var R=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===R.charAt(0)?R.slice(1):R},getFragment:function(R){return null==R&&(R=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),R.replace(qt,"")},start:function(R){if(Ft.started)throw new Error("Backbone.history has already been started");if(Ft.started=!0,this.options=x.extend({root:"/"},this.options,R),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(kt,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var U=this.root.slice(0,-1)||"/";return this.location.replace(U+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,be=re.insertBefore(this.iframe,re.firstChild).contentWindow;be.document.open(),be.document.close(),be.location.hash="#"+this.fragment}var Ke=window.addEventListener||function(Xe,pt){return attachEvent("on"+Xe,pt)};if(this._usePushState?Ke("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Ke("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var R=window.removeEventListener||function(U,re){return detachEvent("on"+U,re)};this._usePushState?R("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&R("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ft.started=!1},route:function(R,U){this.handlers.unshift({route:R,callback:U})},checkUrl:function(R){var U=this.getFragment();if(U===this.fragment&&this.iframe&&(U=this.getHash(this.iframe.contentWindow)),U===this.fragment)return!1;this.iframe&&this.navigate(U),this.loadUrl()},loadUrl:function(R){return!!this.matchRoot()&&(R=this.fragment=this.getFragment(R),x.some(this.handlers,function(U){if(U.route.test(R))return U.callback(R),!0}))},navigate:function(R,U){if(!Ft.started)return!1;(!U||!0===U)&&(U={trigger:!!U}),R=this.getFragment(R||"");var re=this.root;(""===R||"?"===R.charAt(0))&&(re=re.slice(0,-1)||"/");var be=re+R;R=R.replace(jn,"");var Ke=this.decodeFragment(R);if(this.fragment!==Ke){if(this.fragment=Ke,this._usePushState)this.history[U.replace?"replaceState":"pushState"]({},document.title,be);else{if(!this._wantsHashChange)return this.location.assign(be);if(this._updateHash(this.location,R,U.replace),this.iframe&&R!==this.getHash(this.iframe.contentWindow)){var Xe=this.iframe.contentWindow;U.replace||(Xe.document.open(),Xe.document.close()),this._updateHash(Xe.location,R,U.replace)}}if(U.trigger)return this.loadUrl(R)}},_updateHash:function(R,U,re){if(re){var be=R.href.replace(/(javascript:|#).*$/,"");R.replace(be+"#"+U)}else R.hash="#"+U}}),E.history=new Ft;xe.extend=Ie.extend=Fn.extend=Mt.extend=Ft.extend=function(R,U){var be,re=this;return be=R&&x.has(R,"constructor")?R.constructor:function(){return re.apply(this,arguments)},x.extend(be,re,U),be.prototype=x.create(re.prototype,R),be.prototype.constructor=be,be.__super__=re.prototype,be};var tn=function(){throw new Error('A "url" property or function must be specified')},Xt=function(R,U){var re=U.error;U.error=function(be){re&&re.call(U.context,R,be,U),R.trigger("error",R,be,U)}};return E}(E,H,k,M)}.apply(W,p))&&(P.exports=g)},59695:(P,W,f)=>{P.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(P,W,f)=>{"use strict";var p=f(45760),g=f(67365);P.exports={run:function S(A){var k="greedy"===A.graph().acyclicer?g(A,function M(H){return function(j){return H.edge(j).weight}}(A)):function E(A){var k=[],M={},H={};return p.forEach(A.nodes(),function j(L){p.has(H,L)||(H[L]=!0,M[L]=!0,p.forEach(A.outEdges(L),function(K){p.has(M,K.w)?k.push(K):j(K.w)}),delete M[L])}),k}(A);p.forEach(k,function(H){var j=A.edge(H);A.removeEdge(H),j.forwardName=H.name,j.reversed=!0,A.setEdge(H.w,H.v,j,p.uniqueId("rev"))})},undo:function x(A){p.forEach(A.edges(),function(k){var M=A.edge(k);if(M.reversed){A.removeEdge(k);var H=M.forwardName;delete M.reversed,delete M.forwardName,A.setEdge(k.w,k.v,M,H)}})}}},79999:(P,W,f)=>{var p=f(45760),g=f(11510);function E(x,A,k,M,H,j){var K=H[A][j-1],ne=g.addDummyNode(x,"border",{width:0,height:0,rank:j,borderType:A},k);H[A][j]=ne,x.setParent(ne,M),K&&x.setEdge(K,ne,{weight:1})}P.exports=function S(x){p.forEach(x.children(),function A(k){var M=x.children(k),H=x.node(k);if(M.length&&p.forEach(M,A),p.has(H,"minRank")){H.borderLeft=[],H.borderRight=[];for(var j=H.minRank,L=H.maxRank+1;j<L;++j)E(x,"borderLeft","_bl",k,H,j),E(x,"borderRight","_br",k,H,j)}})}},83870:(P,W,f)=>{"use strict";var p=f(45760);function E(j){p.forEach(j.nodes(),function(L){x(j.node(L))}),p.forEach(j.edges(),function(L){x(j.edge(L))})}function x(j){var L=j.width;j.width=j.height,j.height=L}function k(j){j.y=-j.y}function H(j){var L=j.x;j.x=j.y,j.y=L}P.exports={adjust:function g(j){var L=j.graph().rankdir.toLowerCase();("lr"===L||"rl"===L)&&E(j)},undo:function S(j){var L=j.graph().rankdir.toLowerCase();("bt"===L||"rl"===L)&&function A(j){p.forEach(j.nodes(),function(L){k(j.node(L))}),p.forEach(j.edges(),function(L){var K=j.edge(L);p.forEach(K.points,k),p.has(K,"y")&&k(K)})}(j),("lr"===L||"rl"===L)&&(function M(j){p.forEach(j.nodes(),function(L){H(j.node(L))}),p.forEach(j.edges(),function(L){var K=j.edge(L);p.forEach(K.points,H),p.has(K,"x")&&H(K)})}(j),E(j))}}},3226:P=>{function W(){var g={};g._next=g._prev=g,this._sentinel=g}function f(g){g._prev._next=g._next,g._next._prev=g._prev,delete g._next,delete g._prev}function p(g,S){if("_next"!==g&&"_prev"!==g)return S}P.exports=W,W.prototype.dequeue=function(){var g=this._sentinel,S=g._prev;if(S!==g)return f(S),S},W.prototype.enqueue=function(g){var S=this._sentinel;g._prev&&g._next&&f(g),g._next=S._next,S._next._prev=g,S._next=g,g._prev=S},W.prototype.toString=function(){for(var g=[],S=this._sentinel,E=S._prev;E!==S;)g.push(JSON.stringify(E,p)),E=E._prev;return"["+g.join(", ")+"]"}},71914:(P,W,f)=>{var p=f(45760),g=f(11510),S=f(36456).Graph;P.exports={debugOrdering:function E(x){var A=g.buildLayerMatrix(x),k=new S({compound:!0,multigraph:!0}).setGraph({});return p.forEach(x.nodes(),function(M){k.setNode(M,{label:M}),k.setParent(M,"layer"+x.node(M).rank)}),p.forEach(x.edges(),function(M){k.setEdge(M.v,M.w,{},M.name)}),p.forEach(A,function(M,H){k.setNode("layer"+H,{rank:"same"}),p.reduce(M,function(L,K){return k.setEdge(L,K,{style:"invis"}),K})}),k}}},36456:(P,W,f)=>{var p;try{p=f(85510)}catch(g){}p||(p=window.graphlib),P.exports=p},67365:(P,W,f)=>{var p=f(45760),g=f(36456).Graph,S=f(3226);P.exports=function x(j,L){if(j.nodeCount()<=1)return[];var K=function M(j,L){var K=new g,ne=0,fe=0;p.forEach(j.nodes(),function(me){K.setNode(me,{v:me,in:0,out:0})}),p.forEach(j.edges(),function(me){var ge=K.edge(me.v,me.w)||0,ee=L(me);K.setEdge(me.v,me.w,ge+ee),fe=Math.max(fe,K.node(me.v).out+=ee),ne=Math.max(ne,K.node(me.w).in+=ee)});var i=p.range(fe+ne+3).map(function(){return new S}),ue=ne+1;return p.forEach(K.nodes(),function(me){H(i,ue,K.node(me))}),{graph:K,buckets:i,zeroIdx:ue}}(j,L||E),ne=function A(j,L,K){for(var ue,ne=[],fe=L[L.length-1],i=L[0];j.nodeCount();){for(;ue=i.dequeue();)k(j,L,K,ue);for(;ue=fe.dequeue();)k(j,L,K,ue);if(j.nodeCount())for(var me=L.length-2;me>0;--me)if(ue=L[me].dequeue()){ne=ne.concat(k(j,L,K,ue,!0));break}}return ne}(K.graph,K.buckets,K.zeroIdx);return p.flatten(p.map(ne,function(fe){return j.outEdges(fe.v,fe.w)}),!0)};var E=p.constant(1);function k(j,L,K,ne,fe){var i=fe?[]:void 0;return p.forEach(j.inEdges(ne.v),function(ue){var me=j.edge(ue),ge=j.node(ue.v);fe&&i.push({v:ue.v,w:ue.w}),ge.out-=me,H(L,K,ge)}),p.forEach(j.outEdges(ne.v),function(ue){var me=j.edge(ue),ee=j.node(ue.w);ee.in-=me,H(L,K,ee)}),j.removeNode(ne.v),i}function H(j,L,K){K.out?K.in?j[K.out-K.in+L].enqueue(K):j[j.length-1].enqueue(K):j[0].enqueue(K)}},14850:(P,W,f)=>{"use strict";var p=f(45760),g=f(12234),S=f(91496),E=f(94124),x=f(11510).normalizeRanks,A=f(60162),k=f(11510).removeEmptyRanks,M=f(1230),H=f(79999),j=f(83870),L=f(32974),K=f(78226),ne=f(11510),fe=f(36456).Graph;P.exports=function i($e,tt){var st=tt&&tt.debugTiming?ne.time:ne.notime;st("layout",function(){var _t=st("  buildLayoutGraph",function(){return function nt($e){var tt=new fe({multigraph:!0,compound:!0}),st=Fn($e.graph());return tt.setGraph(p.merge({},ee,yr(st,ge),p.pick(st,xe))),p.forEach($e.nodes(),function(_t){var Ft=Fn($e.node(_t));tt.setNode(_t,p.defaults(yr(Ft,Ie),He)),tt.setParent(_t,$e.parent(_t))}),p.forEach($e.edges(),function(_t){var Ft=Fn($e.edge(_t));tt.setEdge(_t,p.merge({},Ue,yr(Ft,_),p.pick(Ft,rt)))}),tt}($e)});st("  runLayout",function(){!function ue($e,tt){tt("    makeSpaceForEdgeLabels",function(){!function ot($e){var tt=$e.graph();tt.ranksep/=2,p.forEach($e.edges(),function(st){var _t=$e.edge(st);_t.minlen*=2,"c"!==_t.labelpos.toLowerCase()&&("TB"===tt.rankdir||"BT"===tt.rankdir?_t.width+=_t.labeloffset:_t.height+=_t.labeloffset)})}($e)}),tt("    removeSelfEdges",function(){!function Fr($e){p.forEach($e.edges(),function(tt){if(tt.v===tt.w){var st=$e.node(tt.v);st.selfEdges||(st.selfEdges=[]),st.selfEdges.push({e:tt,label:$e.edge(tt)}),$e.removeEdge(tt)}})}($e)}),tt("    acyclic",function(){g.run($e)}),tt("    nestingGraph.run",function(){M.run($e)}),tt("    rank",function(){E(ne.asNonCompoundGraph($e))}),tt("    injectEdgeLabelProxies",function(){!function ut($e){p.forEach($e.edges(),function(tt){var st=$e.edge(tt);if(st.width&&st.height){var _t=$e.node(tt.v),Ft=$e.node(tt.w);ne.addDummyNode($e,"edge-proxy",{rank:(Ft.rank-_t.rank)/2+_t.rank,e:tt},"_ep")}})}($e)}),tt("    removeEmptyRanks",function(){k($e)}),tt("    nestingGraph.cleanup",function(){M.cleanup($e)}),tt("    normalizeRanks",function(){x($e)}),tt("    assignRankMinMax",function(){!function yt($e){var tt=0;p.forEach($e.nodes(),function(st){var _t=$e.node(st);_t.borderTop&&(_t.minRank=$e.node(_t.borderTop).rank,_t.maxRank=$e.node(_t.borderBottom).rank,tt=p.max(tt,_t.maxRank))}),$e.graph().maxRank=tt}($e)}),tt("    removeEdgeLabelProxies",function(){!function Mt($e){p.forEach($e.nodes(),function(tt){var st=$e.node(tt);"edge-proxy"===st.dummy&&($e.edge(st.e).labelRank=st.rank,$e.removeNode(tt))})}($e)}),tt("    normalize.run",function(){S.run($e)}),tt("    parentDummyChains",function(){A($e)}),tt("    addBorderSegments",function(){H($e)}),tt("    order",function(){L($e)}),tt("    insertSelfEdges",function(){!function rr($e){var tt=ne.buildLayerMatrix($e);p.forEach(tt,function(st){var _t=0;p.forEach(st,function(Ft,qt){var kt=$e.node(Ft);kt.order=qt+_t,p.forEach(kt.selfEdges,function(jn){ne.addDummyNode($e,"selfedge",{width:jn.label.width,height:jn.label.height,rank:kt.rank,order:qt+ ++_t,e:jn.e,label:jn.label},"_se")}),delete kt.selfEdges})})}($e)}),tt("    adjustCoordinateSystem",function(){j.adjust($e)}),tt("    position",function(){K($e)}),tt("    positionSelfEdges",function(){!function Xn($e){p.forEach($e.nodes(),function(tt){var st=$e.node(tt);if("selfedge"===st.dummy){var _t=$e.node(st.e.v),Ft=_t.x+_t.width/2,qt=_t.y,kt=st.x-Ft,jn=_t.height/2;$e.setEdge(st.e,st.label),$e.removeNode(tt),st.label.points=[{x:Ft+2*kt/3,y:qt-jn},{x:Ft+5*kt/6,y:qt-jn},{x:Ft+kt,y:qt},{x:Ft+5*kt/6,y:qt+jn},{x:Ft+2*kt/3,y:qt+jn}],st.label.x=st.x,st.label.y=st.y}})}($e)}),tt("    removeBorderNodes",function(){!function mr($e){p.forEach($e.nodes(),function(tt){if($e.children(tt).length){var st=$e.node(tt),_t=$e.node(st.borderTop),Ft=$e.node(st.borderBottom),qt=$e.node(p.last(st.borderLeft)),kt=$e.node(p.last(st.borderRight));st.width=Math.abs(kt.x-qt.x),st.height=Math.abs(Ft.y-_t.y),st.x=qt.x+st.width/2,st.y=_t.y+st.height/2}}),p.forEach($e.nodes(),function(tt){"border"===$e.node(tt).dummy&&$e.removeNode(tt)})}($e)}),tt("    normalize.undo",function(){S.undo($e)}),tt("    fixupEdgeLabelCoords",function(){!function Dt($e){p.forEach($e.edges(),function(tt){var st=$e.edge(tt);if(p.has(st,"x"))switch(("l"===st.labelpos||"r"===st.labelpos)&&(st.width-=st.labeloffset),st.labelpos){case"l":st.x-=st.width/2+st.labeloffset;break;case"r":st.x+=st.width/2+st.labeloffset}})}($e)}),tt("    undoCoordinateSystem",function(){j.undo($e)}),tt("    translateGraph",function(){!function Yt($e){var tt=Number.POSITIVE_INFINITY,st=0,_t=Number.POSITIVE_INFINITY,Ft=0,qt=$e.graph(),kt=qt.marginx||0,jn=qt.marginy||0;function fi(tn){var Xt=tn.x,R=tn.y,U=tn.width,re=tn.height;tt=Math.min(tt,Xt-U/2),st=Math.max(st,Xt+U/2),_t=Math.min(_t,R-re/2),Ft=Math.max(Ft,R+re/2)}p.forEach($e.nodes(),function(tn){fi($e.node(tn))}),p.forEach($e.edges(),function(tn){var Xt=$e.edge(tn);p.has(Xt,"x")&&fi(Xt)}),tt-=kt,_t-=jn,p.forEach($e.nodes(),function(tn){var Xt=$e.node(tn);Xt.x-=tt,Xt.y-=_t}),p.forEach($e.edges(),function(tn){var Xt=$e.edge(tn);p.forEach(Xt.points,function(R){R.x-=tt,R.y-=_t}),p.has(Xt,"x")&&(Xt.x-=tt),p.has(Xt,"y")&&(Xt.y-=_t)}),qt.width=st-tt+kt,qt.height=Ft-_t+jn}($e)}),tt("    assignNodeIntersects",function(){!function en($e){p.forEach($e.edges(),function(tt){var qt,kt,st=$e.edge(tt),_t=$e.node(tt.v),Ft=$e.node(tt.w);st.points?(qt=st.points[0],kt=st.points[st.points.length-1]):(st.points=[],qt=Ft,kt=_t),st.points.unshift(ne.intersectRect(_t,qt)),st.points.push(ne.intersectRect(Ft,kt))})}($e)}),tt("    reversePoints",function(){!function Ln($e){p.forEach($e.edges(),function(tt){var st=$e.edge(tt);st.reversed&&st.points.reverse()})}($e)}),tt("    acyclic.undo",function(){g.undo($e)})}(_t,st)}),st("  updateInputGraph",function(){!function me($e,tt){p.forEach($e.nodes(),function(st){var _t=$e.node(st),Ft=tt.node(st);_t&&(_t.x=Ft.x,_t.y=Ft.y,tt.children(st).length&&(_t.width=Ft.width,_t.height=Ft.height))}),p.forEach($e.edges(),function(st){var _t=$e.edge(st),Ft=tt.edge(st);_t.points=Ft.points,p.has(Ft,"x")&&(_t.x=Ft.x,_t.y=Ft.y)}),$e.graph().width=tt.graph().width,$e.graph().height=tt.graph().height}($e,_t)})})};var ge=["nodesep","edgesep","ranksep","marginx","marginy"],ee={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},xe=["acyclicer","ranker","rankdir","align"],Ie=["width","height"],He={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],Ue={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},rt=["labelpos"];function yr($e,tt){return p.mapValues(p.pick($e,tt),Number)}function Fn($e){var tt={};return p.forEach($e,function(st,_t){tt[_t.toLowerCase()]=st}),tt}},45760:(P,W,f)=>{var p;try{p={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(g){}p||(p=window._),P.exports=p},1230:(P,W,f)=>{var p=f(45760),g=f(11510);function E(M,H,j,L,K,ne,fe){var i=M.children(fe);if(i.length){var ue=g.addBorderNode(M,"_bt"),me=g.addBorderNode(M,"_bb"),ge=M.node(fe);M.setParent(ue,fe),ge.borderTop=ue,M.setParent(me,fe),ge.borderBottom=me,p.forEach(i,function(ee){E(M,H,j,L,K,ne,ee);var xe=M.node(ee),Ie=xe.borderTop?xe.borderTop:ee,He=xe.borderBottom?xe.borderBottom:ee,_=xe.borderTop?L:2*L,Ue=Ie!==He?1:K-ne[fe]+1;M.setEdge(ue,Ie,{weight:_,minlen:Ue,nestingEdge:!0}),M.setEdge(He,me,{weight:_,minlen:Ue,nestingEdge:!0})}),M.parent(fe)||M.setEdge(H,ue,{weight:0,minlen:K+ne[fe]})}else fe!==H&&M.setEdge(H,fe,{weight:0,minlen:j})}P.exports={run:function S(M){var H=g.addDummyNode(M,"root",{},"_root"),j=function x(M){var H={};function j(L,K){var ne=M.children(L);ne&&ne.length&&p.forEach(ne,function(fe){j(fe,K+1)}),H[L]=K}return p.forEach(M.children(),function(L){j(L,1)}),H}(M),L=p.max(p.values(j))-1,K=2*L+1;M.graph().nestingRoot=H,p.forEach(M.edges(),function(fe){M.edge(fe).minlen*=K});var ne=function A(M){return p.reduce(M.edges(),function(H,j){return H+M.edge(j).weight},0)}(M)+1;p.forEach(M.children(),function(fe){E(M,H,K,ne,L,j,fe)}),M.graph().nodeRankFactor=K},cleanup:function k(M){var H=M.graph();M.removeNode(H.nestingRoot),delete H.nestingRoot,p.forEach(M.edges(),function(j){M.edge(j).nestingEdge&&M.removeEdge(j)})}}},91496:(P,W,f)=>{"use strict";var p=f(45760),g=f(11510);P.exports={run:function S(A){A.graph().dummyChains=[],p.forEach(A.edges(),function(k){!function E(A,k){var M=k.v,H=A.node(M).rank,j=k.w,L=A.node(j).rank,K=k.name,ne=A.edge(k),fe=ne.labelRank;if(L!==H+1){var i,ue,me;for(A.removeEdge(k),me=0,++H;H<L;++me,++H)ne.points=[],i=g.addDummyNode(A,"edge",ue={width:0,height:0,edgeLabel:ne,edgeObj:k,rank:H},"_d"),H===fe&&(ue.width=ne.width,ue.height=ne.height,ue.dummy="edge-label",ue.labelpos=ne.labelpos),A.setEdge(M,i,{weight:ne.weight},K),0===me&&A.graph().dummyChains.push(i),M=i;A.setEdge(M,j,{weight:ne.weight},K)}}(A,k)})},undo:function x(A){p.forEach(A.graph().dummyChains,function(k){var j,M=A.node(k),H=M.edgeLabel;for(A.setEdge(M.edgeObj,H);M.dummy;)j=A.successors(k)[0],A.removeNode(k),H.points.push({x:M.x,y:M.y}),"edge-label"===M.dummy&&(H.x=M.x,H.y=M.y,H.width=M.width,H.height=M.height),M=A.node(k=j)})}}},33034:(P,W,f)=>{var p=f(45760);P.exports=function g(S,E,x){var k,A={};p.forEach(x,function(M){for(var j,L,H=S.parent(M);H;){if((j=S.parent(H))?(L=A[j],A[j]=H):(L=k,k=H),L&&L!==H)return void E.setEdge(L,H);H=j}})}},81323:(P,W,f)=>{var p=f(45760);P.exports=function g(S,E){return p.map(E,function(x){var A=S.inEdges(x);if(A.length){var k=p.reduce(A,function(M,H){var j=S.edge(H),L=S.node(H.v);return{sum:M.sum+j.weight*L.order,weight:M.weight+j.weight}},{sum:0,weight:0});return{v:x,barycenter:k.sum/k.weight,weight:k.weight}}return{v:x}})}},1686:(P,W,f)=>{var p=f(45760),g=f(36456).Graph;P.exports=function S(x,A,k){var M=function E(x){for(var A;x.hasNode(A=p.uniqueId("_root")););return A}(x),H=new g({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(j){return x.node(j)});return p.forEach(x.nodes(),function(j){var L=x.node(j),K=x.parent(j);(L.rank===A||L.minRank<=A&&A<=L.maxRank)&&(H.setNode(j),H.setParent(j,K||M),p.forEach(x[k](j),function(ne){var fe=ne.v===j?ne.w:ne.v,i=H.edge(fe,j),ue=p.isUndefined(i)?0:i.weight;H.setEdge(fe,j,{weight:x.edge(ne).weight+ue})}),p.has(L,"minRank")&&H.setNode(j,{borderLeft:L.borderLeft[A],borderRight:L.borderRight[A]}))}),H}},18796:(P,W,f)=>{"use strict";var p=f(45760);function S(E,x,A){for(var k=p.zipObject(A,p.map(A,function(ne,fe){return fe})),M=p.flatten(p.map(x,function(ne){return p.sortBy(p.map(E.outEdges(ne),function(fe){return{pos:k[fe.w],weight:E.edge(fe).weight}}),"pos")}),!0),H=1;H<A.length;)H<<=1;var j=2*H-1;H-=1;var L=p.map(new Array(j),function(){return 0}),K=0;return p.forEach(M.forEach(function(ne){var fe=ne.pos+H;L[fe]+=ne.weight;for(var i=0;fe>0;)fe%2&&(i+=L[fe+1]),L[fe=fe-1>>1]+=ne.weight;K+=ne.weight*i})),K}P.exports=function g(E,x){for(var A=0,k=1;k<x.length;++k)A+=S(E,x[k-1],x[k]);return A}},32974:(P,W,f)=>{"use strict";var p=f(45760),g=f(49402),S=f(18796),E=f(61057),x=f(1686),A=f(33034),k=f(36456).Graph,M=f(11510);function j(ne,fe,i){return p.map(fe,function(ue){return x(ne,ue,i)})}function L(ne,fe){var i=new k;p.forEach(ne,function(ue){var me=ue.graph().root,ge=E(ue,me,i,fe);p.forEach(ge.vs,function(ee,xe){ue.node(ee).order=xe}),A(ue,i,ge.vs)})}function K(ne,fe){p.forEach(fe,function(i){p.forEach(i,function(ue,me){ne.node(ue).order=me})})}P.exports=function H(ne){var fe=M.maxRank(ne),i=j(ne,p.range(1,fe+1),"inEdges"),ue=j(ne,p.range(fe-1,-1,-1),"outEdges"),me=g(ne);K(ne,me);for(var ee,ge=Number.POSITIVE_INFINITY,xe=0,Ie=0;Ie<4;++xe,++Ie){L(xe%2?i:ue,xe%4>=2),me=M.buildLayerMatrix(ne);var He=S(ne,me);He<ge&&(Ie=0,ee=p.cloneDeep(me),ge=He)}K(ne,ee)}},49402:(P,W,f)=>{"use strict";var p=f(45760);P.exports=function g(S){var E={},x=p.filter(S.nodes(),function(j){return!S.children(j).length}),A=p.max(p.map(x,function(j){return S.node(j).rank})),k=p.map(p.range(A+1),function(){return[]}),H=p.sortBy(x,function(j){return S.node(j).rank});return p.forEach(H,function M(j){if(!p.has(E,j)){E[j]=!0;var L=S.node(j);k[L.rank].push(j),p.forEach(S.successors(j),M)}}),k}},83826:(P,W,f)=>{"use strict";var p=f(45760);P.exports=function g(x,A){var k={};return p.forEach(x,function(H,j){var L=k[H.v]={indegree:0,in:[],out:[],vs:[H.v],i:j};p.isUndefined(H.barycenter)||(L.barycenter=H.barycenter,L.weight=H.weight)}),p.forEach(A.edges(),function(H){var j=k[H.v],L=k[H.w];!p.isUndefined(j)&&!p.isUndefined(L)&&(L.indegree++,j.out.push(k[H.w]))}),function S(x){var A=[];function k(j){return function(L){L.merged||(p.isUndefined(L.barycenter)||p.isUndefined(j.barycenter)||L.barycenter>=j.barycenter)&&function E(x,A){var k=0,M=0;x.weight&&(k+=x.barycenter*x.weight,M+=x.weight),A.weight&&(k+=A.barycenter*A.weight,M+=A.weight),x.vs=A.vs.concat(x.vs),x.barycenter=k/M,x.weight=M,x.i=Math.min(A.i,x.i),A.merged=!0}(j,L)}}function M(j){return function(L){L.in.push(j),0==--L.indegree&&x.push(L)}}for(;x.length;){var H=x.pop();A.push(H),p.forEach(H.in.reverse(),k(H)),p.forEach(H.out,M(H))}return p.map(p.filter(A,function(j){return!j.merged}),function(j){return p.pick(j,["vs","i","barycenter","weight"])})}(p.filter(k,function(H){return!H.indegree}))}},61057:(P,W,f)=>{var p=f(45760),g=f(81323),S=f(83826),E=f(93803);P.exports=function x(M,H,j,L){var K=M.children(H),ne=M.node(H),fe=ne?ne.borderLeft:void 0,i=ne?ne.borderRight:void 0,ue={};fe&&(K=p.filter(K,function(He){return He!==fe&&He!==i}));var me=g(M,K);p.forEach(me,function(He){if(M.children(He.v).length){var _=x(M,He.v,j,L);ue[He.v]=_,p.has(_,"barycenter")&&function k(M,H){p.isUndefined(M.barycenter)?(M.barycenter=H.barycenter,M.weight=H.weight):(M.barycenter=(M.barycenter*M.weight+H.barycenter*H.weight)/(M.weight+H.weight),M.weight+=H.weight)}(He,_)}});var ge=S(me,j);!function A(M,H){p.forEach(M,function(j){j.vs=p.flatten(j.vs.map(function(L){return H[L]?H[L].vs:L}),!0)})}(ge,ue);var ee=E(ge,L);if(fe&&(ee.vs=p.flatten([fe,ee.vs,i],!0),M.predecessors(fe).length)){var xe=M.node(M.predecessors(fe)[0]),Ie=M.node(M.predecessors(i)[0]);p.has(ee,"barycenter")||(ee.barycenter=0,ee.weight=0),ee.barycenter=(ee.barycenter*ee.weight+xe.order+Ie.order)/(ee.weight+2),ee.weight+=2}return ee}},93803:(P,W,f)=>{var p=f(45760),g=f(11510);function E(A,k,M){for(var H;k.length&&(H=p.last(k)).i<=M;)k.pop(),A.push(H.vs),M++;return M}P.exports=function S(A,k){var M=g.partition(A,function(ue){return p.has(ue,"barycenter")}),H=M.lhs,j=p.sortBy(M.rhs,function(ue){return-ue.i}),L=[],K=0,ne=0,fe=0;H.sort(function x(A){return function(k,M){return k.barycenter<M.barycenter?-1:k.barycenter>M.barycenter?1:A?M.i-k.i:k.i-M.i}}(!!k)),fe=E(L,j,fe),p.forEach(H,function(ue){fe+=ue.vs.length,L.push(ue.vs),K+=ue.barycenter*ue.weight,ne+=ue.weight,fe=E(L,j,fe)});var i={vs:p.flatten(L,!0)};return ne&&(i.barycenter=K/ne,i.weight=ne),i}},60162:(P,W,f)=>{var p=f(45760);P.exports=function g(x){var A=function E(x){var A={},k=0;return p.forEach(x.children(),function M(H){var j=k;p.forEach(x.children(H),M),A[H]={low:j,lim:k++}}),A}(x);p.forEach(x.graph().dummyChains,function(k){for(var M=x.node(k),H=M.edgeObj,j=function S(x,A,k,M){var ne,fe,H=[],j=[],L=Math.min(A[k].low,A[M].low),K=Math.max(A[k].lim,A[M].lim);ne=k;do{ne=x.parent(ne),H.push(ne)}while(ne&&(A[ne].low>L||K>A[ne].lim));for(fe=ne,ne=M;(ne=x.parent(ne))!==fe;)j.push(ne);return{path:H.concat(j.reverse()),lca:fe}}(x,A,H.v,H.w),L=j.path,K=j.lca,ne=0,fe=L[ne],i=!0;k!==H.w;){if(M=x.node(k),i){for(;(fe=L[ne])!==K&&x.node(fe).maxRank<M.rank;)ne++;fe===K&&(i=!1)}if(!i){for(;ne<L.length-1&&x.node(fe=L[ne+1]).minRank<=M.rank;)ne++;fe=L[ne]}x.setParent(k,fe),k=x.successors(k)[0]}})}},54058:(P,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,S=f(11510);function E(ge,ee){var xe={};return p.reduce(ee,function Ie(He,_){var Ue=0,rt=0,nt=He.length,ot=p.last(_);return p.forEach(_,function(ut,yt){var Mt=function A(ge,ee){if(ge.node(ee).dummy)return p.find(ge.predecessors(ee),function(xe){return ge.node(xe).dummy})}(ge,ut),Yt=Mt?ge.node(Mt).order:nt;(Mt||ut===ot)&&(p.forEach(_.slice(rt,yt+1),function(en){p.forEach(ge.predecessors(en),function(Dt){var Ln=ge.node(Dt),mr=Ln.order;(mr<Ue||Yt<mr)&&(!Ln.dummy||!ge.node(en).dummy)&&k(xe,Dt,en)})}),rt=yt+1,Ue=Yt)}),_}),xe}function x(ge,ee){var xe={};function Ie(_,Ue,rt,nt,ot){var ut;p.forEach(p.range(Ue,rt),function(yt){ge.node(ut=_[yt]).dummy&&p.forEach(ge.predecessors(ut),function(Mt){var Yt=ge.node(Mt);Yt.dummy&&(Yt.order<nt||Yt.order>ot)&&k(xe,Mt,ut)})})}return p.reduce(ee,function He(_,Ue){var nt,rt=-1,ot=0;return p.forEach(Ue,function(ut,yt){if("border"===ge.node(ut).dummy){var Mt=ge.predecessors(ut);Mt.length&&(nt=ge.node(Mt[0]).order,Ie(Ue,ot,yt,rt,nt),ot=yt,rt=nt)}Ie(Ue,ot,Ue.length,nt,_.length)}),Ue}),xe}function k(ge,ee,xe){if(ee>xe){var Ie=ee;ee=xe,xe=Ie}var He=ge[ee];He||(ge[ee]=He={}),He[xe]=!0}function M(ge,ee,xe){if(ee>xe){var Ie=ee;ee=xe,xe=Ie}return p.has(ge[ee],xe)}function H(ge,ee,xe,Ie){var He={},_={},Ue={};return p.forEach(ee,function(rt){p.forEach(rt,function(nt,ot){He[nt]=nt,_[nt]=nt,Ue[nt]=ot})}),p.forEach(ee,function(rt){var nt=-1;p.forEach(rt,function(ot){var ut=Ie(ot);if(ut.length)for(var yt=((ut=p.sortBy(ut,function(Dt){return Ue[Dt]})).length-1)/2,Mt=Math.floor(yt),Yt=Math.ceil(yt);Mt<=Yt;++Mt){var en=ut[Mt];_[ot]===ot&&nt<Ue[en]&&!M(xe,ot,en)&&(_[en]=ot,_[ot]=He[ot]=He[en],nt=Ue[en])}})}),{root:He,align:_}}function j(ge,ee,xe,Ie,He){var _={},Ue=function L(ge,ee,xe,Ie){var He=new g,_=ge.graph(),Ue=function ue(ge,ee,xe){return function(Ie,He,_){var ot,Ue=Ie.node(He),rt=Ie.node(_),nt=0;if(nt+=Ue.width/2,p.has(Ue,"labelpos"))switch(Ue.labelpos.toLowerCase()){case"l":ot=-Ue.width/2;break;case"r":ot=Ue.width/2}if(ot&&(nt+=xe?ot:-ot),ot=0,nt+=(Ue.dummy?ee:ge)/2,nt+=(rt.dummy?ee:ge)/2,nt+=rt.width/2,p.has(rt,"labelpos"))switch(rt.labelpos.toLowerCase()){case"l":ot=rt.width/2;break;case"r":ot=-rt.width/2}return ot&&(nt+=xe?ot:-ot),ot=0,nt}}(_.nodesep,_.edgesep,Ie);return p.forEach(ee,function(rt){var nt;p.forEach(rt,function(ot){var ut=xe[ot];if(He.setNode(ut),nt){var yt=xe[nt],Mt=He.edge(yt,ut);He.setEdge(yt,ut,Math.max(Ue(ge,ot,nt),Mt||0))}nt=ot})}),He}(ge,ee,xe,He),rt=He?"borderLeft":"borderRight";function nt(yt,Mt){for(var Yt=Ue.nodes(),en=Yt.pop(),Dt={};en;)Dt[en]?yt(en):(Dt[en]=!0,Yt.push(en),Yt=Yt.concat(Mt(en))),en=Yt.pop()}return nt(function ot(yt){_[yt]=Ue.inEdges(yt).reduce(function(Mt,Yt){return Math.max(Mt,_[Yt.v]+Ue.edge(Yt))},0)},Ue.predecessors.bind(Ue)),nt(function ut(yt){var Mt=Ue.outEdges(yt).reduce(function(en,Dt){return Math.min(en,_[Dt.w]-Ue.edge(Dt))},Number.POSITIVE_INFINITY),Yt=ge.node(yt);Mt!==Number.POSITIVE_INFINITY&&Yt.borderType!==rt&&(_[yt]=Math.max(_[yt],Mt))},Ue.successors.bind(Ue)),p.forEach(Ie,function(yt){_[yt]=_[xe[yt]]}),_}function K(ge,ee){return p.minBy(p.values(ee),function(xe){var Ie=Number.NEGATIVE_INFINITY,He=Number.POSITIVE_INFINITY;return p.forIn(xe,function(_,Ue){var rt=function me(ge,ee){return ge.node(ee).width}(ge,Ue)/2;Ie=Math.max(_+rt,Ie),He=Math.min(_-rt,He)}),Ie-He})}function ne(ge,ee){var xe=p.values(ee),Ie=p.min(xe),He=p.max(xe);p.forEach(["u","d"],function(_){p.forEach(["l","r"],function(Ue){var ot,rt=_+Ue,nt=ge[rt];if(nt!==ee){var ut=p.values(nt);(ot="l"===Ue?Ie-p.min(ut):He-p.max(ut))&&(ge[rt]=p.mapValues(nt,function(yt){return yt+ot}))}})})}function fe(ge,ee){return p.mapValues(ge.ul,function(xe,Ie){if(ee)return ge[ee.toLowerCase()][Ie];var He=p.sortBy(p.map(ge,Ie));return(He[1]+He[2])/2})}P.exports={positionX:function i(ge){var He,ee=S.buildLayerMatrix(ge),xe=p.merge(E(ge,ee),x(ge,ee)),Ie={};p.forEach(["u","d"],function(Ue){He="u"===Ue?ee:p.values(ee).reverse(),p.forEach(["l","r"],function(rt){"r"===rt&&(He=p.map(He,function(yt){return p.values(yt).reverse()}));var nt=("u"===Ue?ge.predecessors:ge.successors).bind(ge),ot=H(0,He,xe,nt),ut=j(ge,He,ot.root,ot.align,"r"===rt);"r"===rt&&(ut=p.mapValues(ut,function(yt){return-yt})),Ie[Ue+rt]=ut})});var _=K(ge,Ie);return ne(Ie,_),fe(Ie,ge.graph().align)},findType1Conflicts:E,findType2Conflicts:x,addConflict:k,hasConflict:M,verticalAlignment:H,horizontalCompaction:j,alignCoordinates:ne,findSmallestWidthAlignment:K,balance:fe}},78226:(P,W,f)=>{"use strict";var p=f(45760),g=f(11510),S=f(54058).positionX;P.exports=function E(A){(function x(A){var k=g.buildLayerMatrix(A),M=A.graph().ranksep,H=0;p.forEach(k,function(j){var L=p.max(p.map(j,function(K){return A.node(K).height}));p.forEach(j,function(K){A.node(K).y=H+L/2}),H+=L+M})})(A=g.asNonCompoundGraph(A)),p.forEach(S(A),function(k,M){A.node(M).x=k})}},96632:(P,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph,S=f(1916).slack;function x(M,H){return p.forEach(M.nodes(),function j(L){p.forEach(H.nodeEdges(L),function(K){var ne=K.v,fe=L===ne?K.w:ne;!M.hasNode(fe)&&!S(H,K)&&(M.setNode(fe,{}),M.setEdge(L,fe,{}),j(fe))})}),M.nodeCount()}function A(M,H){return p.minBy(H.edges(),function(j){if(M.hasNode(j.v)!==M.hasNode(j.w))return S(H,j)})}function k(M,H,j){p.forEach(M.nodes(),function(L){H.node(L).rank+=j})}P.exports=function E(M){var K,ne,H=new g({directed:!1}),j=M.nodes()[0],L=M.nodeCount();for(H.setNode(j,{});x(H,M)<L;)K=A(H,M),ne=H.hasNode(K.v)?S(M,K):-S(M,K),k(H,M,ne);return H}},94124:(P,W,f)=>{"use strict";var g=f(1916).longestPath,S=f(96632),E=f(63804);P.exports=function x(H){switch(H.graph().ranker){case"network-simplex":default:!function M(H){E(H)}(H);break;case"tight-tree":!function k(H){g(H),S(H)}(H);break;case"longest-path":A(H)}};var A=g},63804:(P,W,f)=>{"use strict";var p=f(45760),g=f(96632),S=f(1916).slack,E=f(1916).longestPath,x=f(36456).alg.preorder,A=f(36456).alg.postorder,k=f(11510).simplify;function M(xe){xe=k(xe),E(xe);var He,Ie=g(xe);for(K(Ie),H(Ie,xe);He=fe(Ie);)ue(Ie,xe,He,i(Ie,xe,He))}function H(xe,Ie){var He=A(xe,xe.nodes());He=He.slice(0,He.length-1),p.forEach(He,function(_){!function j(xe,Ie,He){var _=xe.node(He);xe.edge(He,_.parent).cutvalue=L(xe,Ie,He)}(xe,Ie,_)})}function L(xe,Ie,He){var Ue=xe.node(He).parent,rt=!0,nt=Ie.edge(He,Ue),ot=0;return nt||(rt=!1,nt=Ie.edge(Ue,He)),ot=nt.weight,p.forEach(Ie.nodeEdges(He),function(ut){var yt=ut.v===He,Mt=yt?ut.w:ut.v;if(Mt!==Ue){var Yt=yt===rt,en=Ie.edge(ut).weight;if(ot+=Yt?en:-en,function ge(xe,Ie,He){return xe.hasEdge(Ie,He)}(xe,He,Mt)){var Dt=xe.edge(He,Mt).cutvalue;ot+=Yt?-Dt:Dt}}}),ot}function K(xe,Ie){arguments.length<2&&(Ie=xe.nodes()[0]),ne(xe,{},1,Ie)}function ne(xe,Ie,He,_,Ue){var rt=He,nt=xe.node(_);return Ie[_]=!0,p.forEach(xe.neighbors(_),function(ot){p.has(Ie,ot)||(He=ne(xe,Ie,He,ot,_))}),nt.low=rt,nt.lim=He++,Ue?nt.parent=Ue:delete nt.parent,He}function fe(xe){return p.find(xe.edges(),function(Ie){return xe.edge(Ie).cutvalue<0})}function i(xe,Ie,He){var _=He.v,Ue=He.w;Ie.hasEdge(_,Ue)||(_=He.w,Ue=He.v);var rt=xe.node(_),nt=xe.node(Ue),ot=rt,ut=!1;rt.lim>nt.lim&&(ot=nt,ut=!0);var yt=p.filter(Ie.edges(),function(Mt){return ut===ee(0,xe.node(Mt.v),ot)&&ut!==ee(0,xe.node(Mt.w),ot)});return p.minBy(yt,function(Mt){return S(Ie,Mt)})}function ue(xe,Ie,He,_){xe.removeEdge(He.v,He.w),xe.setEdge(_.v,_.w,{}),K(xe),H(xe,Ie),function me(xe,Ie){var He=p.find(xe.nodes(),function(Ue){return!Ie.node(Ue).parent}),_=x(xe,He);_=_.slice(1),p.forEach(_,function(Ue){var rt=xe.node(Ue).parent,nt=Ie.edge(Ue,rt),ot=!1;nt||(nt=Ie.edge(rt,Ue),ot=!0),Ie.node(Ue).rank=Ie.node(rt).rank+(ot?nt.minlen:-nt.minlen)})}(xe,Ie)}function ee(xe,Ie,He){return He.low<=Ie.lim&&Ie.lim<=He.lim}P.exports=M,M.initLowLimValues=K,M.initCutValues=H,M.calcCutValue=L,M.leaveEdge=fe,M.enterEdge=i,M.exchangeEdges=ue},1916:(P,W,f)=>{"use strict";var p=f(45760);P.exports={longestPath:function g(E){var x={};p.forEach(E.sources(),function A(k){var M=E.node(k);if(p.has(x,k))return M.rank;x[k]=!0;var H=p.min(p.map(E.outEdges(k),function(j){return A(j.w)-E.edge(j).minlen}));return(H===Number.POSITIVE_INFINITY||null==H)&&(H=0),M.rank=H})},slack:function S(E,x){return E.node(x.w).rank-E.node(x.v).rank-E.edge(x).minlen}}},11510:(P,W,f)=>{"use strict";var p=f(45760),g=f(36456).Graph;function S(me,ge,ee,xe){var Ie;do{Ie=p.uniqueId(xe)}while(me.hasNode(Ie));return ee.dummy=ge,me.setNode(Ie,ee),Ie}function ne(me){return p.max(p.map(me.nodes(),function(ge){var ee=me.node(ge).rank;if(!p.isUndefined(ee))return ee}))}P.exports={addDummyNode:S,simplify:function E(me){var ge=(new g).setGraph(me.graph());return p.forEach(me.nodes(),function(ee){ge.setNode(ee,me.node(ee))}),p.forEach(me.edges(),function(ee){var xe=ge.edge(ee.v,ee.w)||{weight:0,minlen:1},Ie=me.edge(ee);ge.setEdge(ee.v,ee.w,{weight:xe.weight+Ie.weight,minlen:Math.max(xe.minlen,Ie.minlen)})}),ge},asNonCompoundGraph:function x(me){var ge=new g({multigraph:me.isMultigraph()}).setGraph(me.graph());return p.forEach(me.nodes(),function(ee){me.children(ee).length||ge.setNode(ee,me.node(ee))}),p.forEach(me.edges(),function(ee){ge.setEdge(ee,me.edge(ee))}),ge},successorWeights:function A(me){var ge=p.map(me.nodes(),function(ee){var xe={};return p.forEach(me.outEdges(ee),function(Ie){xe[Ie.w]=(xe[Ie.w]||0)+me.edge(Ie).weight}),xe});return p.zipObject(me.nodes(),ge)},predecessorWeights:function k(me){var ge=p.map(me.nodes(),function(ee){var xe={};return p.forEach(me.inEdges(ee),function(Ie){xe[Ie.v]=(xe[Ie.v]||0)+me.edge(Ie).weight}),xe});return p.zipObject(me.nodes(),ge)},intersectRect:function M(me,ge){var rt,nt,ee=me.x,xe=me.y,Ie=ge.x-ee,He=ge.y-xe,_=me.width/2,Ue=me.height/2;if(!Ie&&!He)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(He)*_>Math.abs(Ie)*Ue?(He<0&&(Ue=-Ue),rt=Ue*Ie/He,nt=Ue):(Ie<0&&(_=-_),rt=_,nt=_*He/Ie),{x:ee+rt,y:xe+nt}},buildLayerMatrix:function H(me){var ge=p.map(p.range(ne(me)+1),function(){return[]});return p.forEach(me.nodes(),function(ee){var xe=me.node(ee),Ie=xe.rank;p.isUndefined(Ie)||(ge[Ie][xe.order]=ee)}),ge},normalizeRanks:function j(me){var ge=p.min(p.map(me.nodes(),function(ee){return me.node(ee).rank}));p.forEach(me.nodes(),function(ee){var xe=me.node(ee);p.has(xe,"rank")&&(xe.rank-=ge)})},removeEmptyRanks:function L(me){var ge=p.min(p.map(me.nodes(),function(He){return me.node(He).rank})),ee=[];p.forEach(me.nodes(),function(He){var _=me.node(He).rank-ge;ee[_]||(ee[_]=[]),ee[_].push(He)});var xe=0,Ie=me.graph().nodeRankFactor;p.forEach(ee,function(He,_){p.isUndefined(He)&&_%Ie!=0?--xe:xe&&p.forEach(He,function(Ue){me.node(Ue).rank+=xe})})},addBorderNode:function K(me,ge,ee,xe){var Ie={width:0,height:0};return arguments.length>=4&&(Ie.rank=ee,Ie.order=xe),S(me,"border",Ie,ge)},maxRank:ne,partition:function fe(me,ge){var ee={lhs:[],rhs:[]};return p.forEach(me,function(xe){ge(xe)?ee.lhs.push(xe):ee.rhs.push(xe)}),ee},time:function i(me,ge){var ee=p.now();try{return ge()}finally{console.log(me+" time: "+(p.now()-ee)+"ms")}},notime:function ue(me,ge){return ge()}}},28126:P=>{P.exports="0.8.5"},85510:(P,W,f)=>{var p=f(51838);P.exports={Graph:p.Graph,json:f(21088),alg:f(83430),version:p.version}},86730:(P,W,f)=>{var p=f(79138);P.exports=function g(S){var A,E={},x=[];function k(M){p.has(E,M)||(E[M]=!0,A.push(M),p.each(S.successors(M),k),p.each(S.predecessors(M),k))}return p.each(S.nodes(),function(M){A=[],k(M),A.length&&x.push(A)}),x}},22163:(P,W,f)=>{var p=f(79138);function S(E,x,A,k,M,H){p.has(k,x)||(k[x]=!0,A||H.push(x),p.each(M(x),function(j){S(E,j,A,k,M,H)}),A&&H.push(x))}P.exports=function g(E,x,A){p.isArray(x)||(x=[x]);var k=(E.isDirected()?E.successors:E.neighbors).bind(E),M=[],H={};return p.each(x,function(j){if(!E.hasNode(j))throw new Error("Graph does not have node: "+j);S(E,j,"post"===A,H,k,M)}),M}},25668:(P,W,f)=>{var p=f(61718),g=f(79138);P.exports=function S(E,x,A){return g.transform(E.nodes(),function(k,M){k[M]=p(E,M,x,A)},{})}},61718:(P,W,f)=>{var p=f(79138),g=f(31919);P.exports=function E(A,k,M,H){return function x(A,k,M,H){var K,ne,j={},L=new g,fe=function(i){var ue=i.v!==K?i.v:i.w,me=j[ue],ge=M(i),ee=ne.distance+ge;if(ge<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+ge);ee<me.distance&&(me.distance=ee,me.predecessor=K,L.decrease(ue,ee))};for(A.nodes().forEach(function(i){var ue=i===k?0:Number.POSITIVE_INFINITY;j[i]={distance:ue},L.add(i,ue)});L.size()>0&&(K=L.removeMin(),(ne=j[K]).distance!==Number.POSITIVE_INFINITY);)H(K).forEach(fe);return j}(A,String(k),M||S,H||function(j){return A.outEdges(j)})};var S=p.constant(1)},9611:(P,W,f)=>{var p=f(79138),g=f(73585);P.exports=function S(E){return p.filter(g(E),function(x){return x.length>1||1===x.length&&E.hasEdge(x[0],x[0])})}},22881:(P,W,f)=>{var p=f(79138);P.exports=function S(x,A,k){return function E(x,A,k){var M={},H=x.nodes();return H.forEach(function(j){M[j]={},M[j][j]={distance:0},H.forEach(function(L){j!==L&&(M[j][L]={distance:Number.POSITIVE_INFINITY})}),k(j).forEach(function(L){var K=L.v===j?L.w:L.v,ne=A(L);M[j][K]={distance:ne,predecessor:j}})}),H.forEach(function(j){var L=M[j];H.forEach(function(K){var ne=M[K];H.forEach(function(fe){var ue=L[fe],me=ne[fe],ge=ne[j].distance+ue.distance;ge<me.distance&&(me.distance=ge,me.predecessor=ue.predecessor)})})}),M}(x,A||g,k||function(M){return x.outEdges(M)})};var g=p.constant(1)},83430:(P,W,f)=>{P.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(P,W,f)=>{var p=f(52180);P.exports=function g(S){try{p(S)}catch(E){if(E instanceof p.CycleException)return!1;throw E}return!0}},46694:(P,W,f)=>{var p=f(22163);P.exports=function g(S,E){return p(S,E,"post")}},5330:(P,W,f)=>{var p=f(22163);P.exports=function g(S,E){return p(S,E,"pre")}},46823:(P,W,f)=>{var p=f(79138),g=f(66568),S=f(31919);P.exports=function E(x,A){var j,k=new g,M={},H=new S;function L(ne){var fe=ne.v===j?ne.w:ne.v,i=H.priority(fe);if(void 0!==i){var ue=A(ne);ue<i&&(M[fe]=j,H.decrease(fe,ue))}}if(0===x.nodeCount())return k;p.each(x.nodes(),function(ne){H.add(ne,Number.POSITIVE_INFINITY),k.setNode(ne)}),H.decrease(x.nodes()[0],0);for(var K=!1;H.size()>0;){if(j=H.removeMin(),p.has(M,j))k.setEdge(j,M[j]);else{if(K)throw new Error("Input graph is not connected: "+x);K=!0}x.nodeEdges(j).forEach(L)}return k}},73585:(P,W,f)=>{var p=f(79138);P.exports=function g(S){var E=0,x=[],A={},k=[];function M(H){var j=A[H]={onStack:!0,lowlink:E,index:E++};if(x.push(H),S.successors(H).forEach(function(ne){p.has(A,ne)?A[ne].onStack&&(j.lowlink=Math.min(j.lowlink,A[ne].index)):(M(ne),j.lowlink=Math.min(j.lowlink,A[ne].lowlink))}),j.lowlink===j.index){var K,L=[];do{K=x.pop(),A[K].onStack=!1,L.push(K)}while(H!==K);k.push(L)}}return S.nodes().forEach(function(H){p.has(A,H)||M(H)}),k}},52180:(P,W,f)=>{var p=f(79138);function g(E){var x={},A={},k=[];if(p.each(E.sinks(),function M(H){if(p.has(A,H))throw new S;p.has(x,H)||(A[H]=!0,x[H]=!0,p.each(E.predecessors(H),M),delete A[H],k.push(H))}),p.size(x)!==E.nodeCount())throw new S;return k}function S(){}P.exports=g,g.CycleException=S,S.prototype=new Error},31919:(P,W,f)=>{var p=f(79138);function g(){this._arr=[],this._keyIndices={}}P.exports=g,g.prototype.size=function(){return this._arr.length},g.prototype.keys=function(){return this._arr.map(function(S){return S.key})},g.prototype.has=function(S){return p.has(this._keyIndices,S)},g.prototype.priority=function(S){var E=this._keyIndices[S];if(void 0!==E)return this._arr[E].priority},g.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},g.prototype.add=function(S,E){var x=this._keyIndices;if(S=String(S),!p.has(x,S)){var A=this._arr,k=A.length;return x[S]=k,A.push({key:S,priority:E}),this._decrease(k),!0}return!1},g.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},g.prototype.decrease=function(S,E){var x=this._keyIndices[S];if(E>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[x].priority+" New: "+E);this._arr[x].priority=E,this._decrease(x)},g.prototype._heapify=function(S){var E=this._arr,x=2*S,A=x+1,k=S;x<E.length&&(k=E[x].priority<E[k].priority?x:k,A<E.length&&(k=E[A].priority<E[k].priority?A:k),k!==S&&(this._swap(S,k),this._heapify(k)))},g.prototype._decrease=function(S){for(var A,E=this._arr,x=E[S].priority;0!==S&&!(E[A=S>>1].priority<x);)this._swap(S,A),S=A},g.prototype._swap=function(S,E){var x=this._arr,A=this._keyIndices,k=x[S],M=x[E];x[S]=M,x[E]=k,A[M.key]=S,A[k.key]=E}},66568:(P,W,f)=>{"use strict";var p=f(79138);P.exports=x;var S="\0";function x(L){this._isDirected=!p.has(L,"directed")||L.directed,this._isMultigraph=!!p.has(L,"multigraph")&&L.multigraph,this._isCompound=!!p.has(L,"compound")&&L.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function A(L,K){L[K]?L[K]++:L[K]=1}function k(L,K){--L[K]||delete L[K]}function M(L,K,ne,fe){var i=""+K,ue=""+ne;if(!L&&i>ue){var me=i;i=ue,ue=me}return i+"\x01"+ue+"\x01"+(p.isUndefined(fe)?"\0":fe)}function H(L,K,ne,fe){var i=""+K,ue=""+ne;if(!L&&i>ue){var me=i;i=ue,ue=me}var ge={v:i,w:ue};return fe&&(ge.name=fe),ge}function j(L,K){return M(L,K.v,K.w,K.name)}x.prototype._nodeCount=0,x.prototype._edgeCount=0,x.prototype.isDirected=function(){return this._isDirected},x.prototype.isMultigraph=function(){return this._isMultigraph},x.prototype.isCompound=function(){return this._isCompound},x.prototype.setGraph=function(L){return this._label=L,this},x.prototype.graph=function(){return this._label},x.prototype.setDefaultNodeLabel=function(L){return p.isFunction(L)||(L=p.constant(L)),this._defaultNodeLabelFn=L,this},x.prototype.nodeCount=function(){return this._nodeCount},x.prototype.nodes=function(){return p.keys(this._nodes)},x.prototype.sources=function(){var L=this;return p.filter(this.nodes(),function(K){return p.isEmpty(L._in[K])})},x.prototype.sinks=function(){var L=this;return p.filter(this.nodes(),function(K){return p.isEmpty(L._out[K])})},x.prototype.setNodes=function(L,K){var ne=arguments,fe=this;return p.each(L,function(i){ne.length>1?fe.setNode(i,K):fe.setNode(i)}),this},x.prototype.setNode=function(L,K){return p.has(this._nodes,L)?(arguments.length>1&&(this._nodes[L]=K),this):(this._nodes[L]=arguments.length>1?K:this._defaultNodeLabelFn(L),this._isCompound&&(this._parent[L]=S,this._children[L]={},this._children[S][L]=!0),this._in[L]={},this._preds[L]={},this._out[L]={},this._sucs[L]={},++this._nodeCount,this)},x.prototype.node=function(L){return this._nodes[L]},x.prototype.hasNode=function(L){return p.has(this._nodes,L)},x.prototype.removeNode=function(L){var K=this;if(p.has(this._nodes,L)){var ne=function(fe){K.removeEdge(K._edgeObjs[fe])};delete this._nodes[L],this._isCompound&&(this._removeFromParentsChildList(L),delete this._parent[L],p.each(this.children(L),function(fe){K.setParent(fe)}),delete this._children[L]),p.each(p.keys(this._in[L]),ne),delete this._in[L],delete this._preds[L],p.each(p.keys(this._out[L]),ne),delete this._out[L],delete this._sucs[L],--this._nodeCount}return this},x.prototype.setParent=function(L,K){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(K))K=S;else{for(var ne=K+="";!p.isUndefined(ne);ne=this.parent(ne))if(ne===L)throw new Error("Setting "+K+" as parent of "+L+" would create a cycle");this.setNode(K)}return this.setNode(L),this._removeFromParentsChildList(L),this._parent[L]=K,this._children[K][L]=!0,this},x.prototype._removeFromParentsChildList=function(L){delete this._children[this._parent[L]][L]},x.prototype.parent=function(L){if(this._isCompound){var K=this._parent[L];if(K!==S)return K}},x.prototype.children=function(L){if(p.isUndefined(L)&&(L=S),this._isCompound){var K=this._children[L];if(K)return p.keys(K)}else{if(L===S)return this.nodes();if(this.hasNode(L))return[]}},x.prototype.predecessors=function(L){var K=this._preds[L];if(K)return p.keys(K)},x.prototype.successors=function(L){var K=this._sucs[L];if(K)return p.keys(K)},x.prototype.neighbors=function(L){var K=this.predecessors(L);if(K)return p.union(K,this.successors(L))},x.prototype.isLeaf=function(L){return 0===(this.isDirected()?this.successors(L):this.neighbors(L)).length},x.prototype.filterNodes=function(L){var K=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});K.setGraph(this.graph());var ne=this;p.each(this._nodes,function(ue,me){L(me)&&K.setNode(me,ue)}),p.each(this._edgeObjs,function(ue){K.hasNode(ue.v)&&K.hasNode(ue.w)&&K.setEdge(ue,ne.edge(ue))});var fe={};function i(ue){var me=ne.parent(ue);return void 0===me||K.hasNode(me)?(fe[ue]=me,me):me in fe?fe[me]:i(me)}return this._isCompound&&p.each(K.nodes(),function(ue){K.setParent(ue,i(ue))}),K},x.prototype.setDefaultEdgeLabel=function(L){return p.isFunction(L)||(L=p.constant(L)),this._defaultEdgeLabelFn=L,this},x.prototype.edgeCount=function(){return this._edgeCount},x.prototype.edges=function(){return p.values(this._edgeObjs)},x.prototype.setPath=function(L,K){var ne=this,fe=arguments;return p.reduce(L,function(i,ue){return fe.length>1?ne.setEdge(i,ue,K):ne.setEdge(i,ue),ue}),this},x.prototype.setEdge=function(){var L,K,ne,fe,i=!1,ue=arguments[0];"object"==typeof ue&&null!==ue&&"v"in ue?(L=ue.v,K=ue.w,ne=ue.name,2===arguments.length&&(fe=arguments[1],i=!0)):(L=ue,K=arguments[1],ne=arguments[3],arguments.length>2&&(fe=arguments[2],i=!0)),L=""+L,K=""+K,p.isUndefined(ne)||(ne=""+ne);var me=M(this._isDirected,L,K,ne);if(p.has(this._edgeLabels,me))return i&&(this._edgeLabels[me]=fe),this;if(!p.isUndefined(ne)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(L),this.setNode(K),this._edgeLabels[me]=i?fe:this._defaultEdgeLabelFn(L,K,ne);var ge=H(this._isDirected,L,K,ne);return L=ge.v,K=ge.w,Object.freeze(ge),this._edgeObjs[me]=ge,A(this._preds[K],L),A(this._sucs[L],K),this._in[K][me]=ge,this._out[L][me]=ge,this._edgeCount++,this},x.prototype.edge=function(L,K,ne){var fe=1===arguments.length?j(this._isDirected,arguments[0]):M(this._isDirected,L,K,ne);return this._edgeLabels[fe]},x.prototype.hasEdge=function(L,K,ne){var fe=1===arguments.length?j(this._isDirected,arguments[0]):M(this._isDirected,L,K,ne);return p.has(this._edgeLabels,fe)},x.prototype.removeEdge=function(L,K,ne){var fe=1===arguments.length?j(this._isDirected,arguments[0]):M(this._isDirected,L,K,ne),i=this._edgeObjs[fe];return i&&(L=i.v,K=i.w,delete this._edgeLabels[fe],delete this._edgeObjs[fe],k(this._preds[K],L),k(this._sucs[L],K),delete this._in[K][fe],delete this._out[L][fe],this._edgeCount--),this},x.prototype.inEdges=function(L,K){var ne=this._in[L];if(ne){var fe=p.values(ne);return K?p.filter(fe,function(i){return i.v===K}):fe}},x.prototype.outEdges=function(L,K){var ne=this._out[L];if(ne){var fe=p.values(ne);return K?p.filter(fe,function(i){return i.w===K}):fe}},x.prototype.nodeEdges=function(L,K){var ne=this.inEdges(L,K);if(ne)return ne.concat(this.outEdges(L,K))}},51838:(P,W,f)=>{P.exports={Graph:f(66568),version:f(75089)}},21088:(P,W,f)=>{var p=f(79138),g=f(66568);function E(k){return p.map(k.nodes(),function(M){var H=k.node(M),j=k.parent(M),L={v:M};return p.isUndefined(H)||(L.value=H),p.isUndefined(j)||(L.parent=j),L})}function x(k){return p.map(k.edges(),function(M){var H=k.edge(M),j={v:M.v,w:M.w};return p.isUndefined(M.name)||(j.name=M.name),p.isUndefined(H)||(j.value=H),j})}P.exports={write:function S(k){var M={options:{directed:k.isDirected(),multigraph:k.isMultigraph(),compound:k.isCompound()},nodes:E(k),edges:x(k)};return p.isUndefined(k.graph())||(M.value=p.clone(k.graph())),M},read:function A(k){var M=new g(k.options).setGraph(k.value);return p.each(k.nodes,function(H){M.setNode(H.v,H.value),H.parent&&M.setParent(H.v,H.parent)}),p.each(k.edges,function(H){M.setEdge({v:H.v,w:H.w,name:H.name},H.value)}),M}}},79138:(P,W,f)=>{var p;try{p={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(g){}p||(p=window._),P.exports=p},75089:P=>{P.exports="2.1.8"},58259:function(P,W){var p;!function(g,S){"use strict";"object"==typeof P.exports?P.exports=g.document?S(g,!0):function(E){if(!E.document)throw new Error("jQuery requires a window with a document");return S(E)}:S(g)}("undefined"!=typeof window?window:this,function(g,S){"use strict";var E=[],x=Object.getPrototypeOf,A=E.slice,k=E.flat?function(l){return E.flat.call(l)}:function(l){return E.concat.apply([],l)},M=E.push,H=E.indexOf,j={},L=j.toString,K=j.hasOwnProperty,ne=K.toString,fe=ne.call(Object),i={},ue=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},me=function(h){return null!=h&&h===h.window},ge=g.document,ee={type:!0,src:!0,nonce:!0,noModule:!0};function xe(l,h,y){var w,D,F=(y=y||ge).createElement("script");if(F.text=l,h)for(w in ee)(D=h[w]||h.getAttribute&&h.getAttribute(w))&&F.setAttribute(w,D);y.head.appendChild(F).parentNode.removeChild(F)}function Ie(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?j[L.call(l)]||"object":typeof l}var _=function(l,h){return new _.fn.init(l,h)};function Ue(l){var h=!!l&&"length"in l&&l.length,y=Ie(l);return!ue(l)&&!me(l)&&("array"===y||0===h||"number"==typeof h&&h>0&&h-1 in l)}_.fn=_.prototype={jquery:"3.6.0",constructor:_,length:0,toArray:function(){return A.call(this)},get:function(l){return null==l?A.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var h=_.merge(this.constructor(),l);return h.prevObject=this,h},each:function(l){return _.each(this,l)},map:function(l){return this.pushStack(_.map(this,function(h,y){return l.call(h,y,h)}))},slice:function(){return this.pushStack(A.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(l,h){return(h+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(l,h){return h%2}))},eq:function(l){var h=this.length,y=+l+(l<0?h:0);return this.pushStack(y>=0&&y<h?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:E.sort,splice:E.splice},_.extend=_.fn.extend=function(){var l,h,y,w,D,F,X=arguments[0]||{},le=1,ce=arguments.length,we=!1;for("boolean"==typeof X&&(we=X,X=arguments[le]||{},le++),"object"!=typeof X&&!ue(X)&&(X={}),le===ce&&(X=this,le--);le<ce;le++)if(null!=(l=arguments[le]))for(h in l)w=l[h],"__proto__"!==h&&X!==w&&(we&&w&&(_.isPlainObject(w)||(D=Array.isArray(w)))?(y=X[h],F=D&&!Array.isArray(y)?[]:D||_.isPlainObject(y)?y:{},D=!1,X[h]=_.extend(we,F,w)):void 0!==w&&(X[h]=w));return X},_.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var h,y;return!(!l||"[object Object]"!==L.call(l)||(h=x(l))&&("function"!=typeof(y=K.call(h,"constructor")&&h.constructor)||ne.call(y)!==fe))},isEmptyObject:function(l){var h;for(h in l)return!1;return!0},globalEval:function(l,h,y){xe(l,{nonce:h&&h.nonce},y)},each:function(l,h){var y,w=0;if(Ue(l))for(y=l.length;w<y&&!1!==h.call(l[w],w,l[w]);w++);else for(w in l)if(!1===h.call(l[w],w,l[w]))break;return l},makeArray:function(l,h){var y=h||[];return null!=l&&(Ue(Object(l))?_.merge(y,"string"==typeof l?[l]:l):M.call(y,l)),y},inArray:function(l,h,y){return null==h?-1:H.call(h,l,y)},merge:function(l,h){for(var y=+h.length,w=0,D=l.length;w<y;w++)l[D++]=h[w];return l.length=D,l},grep:function(l,h,y){for(var D=[],F=0,X=l.length,le=!y;F<X;F++)!h(l[F],F)!==le&&D.push(l[F]);return D},map:function(l,h,y){var w,D,F=0,X=[];if(Ue(l))for(w=l.length;F<w;F++)null!=(D=h(l[F],F,y))&&X.push(D);else for(F in l)null!=(D=h(l[F],F,y))&&X.push(D);return k(X)},guid:1,support:i}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=E[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,h){j["[object "+h+"]"]=h.toLowerCase()});var rt=function(l){var h,y,w,D,F,X,le,ce,we,ze,it,Ne,Qe,St,Zt,Vt,Rn,Un,zr,Bt="sizzle"+1*new Date,Ut=l.document,_r=0,gn=0,Bn=wn(),ur=wn(),gs=wn(),oi=wn(),Oo=function(Z,he){return Z===he&&(it=!0),0},Ui={}.hasOwnProperty,gr=[],Nt=gr.pop,Hn=gr.push,gi=gr.push,Ur=gr.slice,Ni=function(Z,he){for(var Ce=0,Je=Z.length;Ce<Je;Ce++)if(Z[Ce]===he)return Ce;return-1},Lo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",sn="[\\x20\\t\\r\\n\\f]",er="(?:\\\\[\\da-fA-F]{1,6}"+sn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",vi="\\["+sn+"*("+er+")(?:"+sn+"*([*^$|!~]?=)"+sn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+er+"))|)"+sn+"*\\]",No=":("+er+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",Cn=new RegExp(sn+"+","g"),vn=new RegExp("^"+sn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+sn+"+$","g"),un=new RegExp("^"+sn+"*,"+sn+"*"),Ea=new RegExp("^"+sn+"*([>+~]|"+sn+")"+sn+"*"),Vs=new RegExp(sn+"|>"),Ou=new RegExp(No),Lu=new RegExp("^"+er+"$"),Pa={ID:new RegExp("^#("+er+")"),CLASS:new RegExp("^\\.("+er+")"),TAG:new RegExp("^("+er+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+No),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+sn+"*(even|odd|(([+-]|)(\\d*)n|)"+sn+"*(?:([+-]|)"+sn+"*(\\d+)|))"+sn+"*\\)|)","i"),bool:new RegExp("^(?:"+Lo+")$","i"),needsContext:new RegExp("^"+sn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+sn+"*((?:-\\d)?\\d*)"+sn+"*\\)|)(?=[^-]|$)","i")},Nu=/HTML$/i,Wl=/^(?:input|select|textarea|button)$/i,vs=/^h\d$/i,vr=/^[^{]+\{\s*\[native \w/,lr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lo=/[+~]/,ai=new RegExp("\\\\[\\da-fA-F]{1,6}"+sn+"?|\\\\([^\\r\\n\\f])","g"),Gi=function(Z,he){var Ce="0x"+Z.slice(1)-65536;return he||(Ce<0?String.fromCharCode(Ce+65536):String.fromCharCode(Ce>>10|55296,1023&Ce|56320))},tr=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ia=function(Z,he){return he?"\0"===Z?"\ufffd":Z.slice(0,-1)+"\\"+Z.charCodeAt(Z.length-1).toString(16)+" ":"\\"+Z},Bs=function(){Ne()},Cr=Ct(function(Z){return!0===Z.disabled&&"fieldset"===Z.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{gi.apply(gr=Ur.call(Ut.childNodes),Ut.childNodes)}catch(Z){gi={apply:gr.length?function(he,Ce){Hn.apply(he,Ur.call(Ce))}:function(he,Ce){for(var Je=he.length,Ae=0;he[Je++]=Ce[Ae++];);he.length=Je-1}}}function kn(Z,he,Ce,Je){var Ae,et,Ye,ht,vt,Ht,zt,ct=he&&he.ownerDocument,ln=he?he.nodeType:9;if(Ce=Ce||[],"string"!=typeof Z||!Z||1!==ln&&9!==ln&&11!==ln)return Ce;if(!Je&&(Ne(he),he=he||Qe,Zt)){if(11!==ln&&(vt=lr.exec(Z)))if(Ae=vt[1]){if(9===ln){if(!(Ye=he.getElementById(Ae)))return Ce;if(Ye.id===Ae)return Ce.push(Ye),Ce}else if(ct&&(Ye=ct.getElementById(Ae))&&zr(he,Ye)&&Ye.id===Ae)return Ce.push(Ye),Ce}else{if(vt[2])return gi.apply(Ce,he.getElementsByTagName(Z)),Ce;if((Ae=vt[3])&&y.getElementsByClassName&&he.getElementsByClassName)return gi.apply(Ce,he.getElementsByClassName(Ae)),Ce}if(y.qsa&&!oi[Z+" "]&&(!Vt||!Vt.test(Z))&&(1!==ln||"object"!==he.nodeName.toLowerCase())){if(zt=Z,ct=he,1===ln&&(Vs.test(Z)||Ea.test(Z))){for(((ct=lo.test(Z)&&Ee(he.parentNode)||he)!==he||!y.scope)&&((ht=he.getAttribute("id"))?ht=ht.replace(tr,Ia):he.setAttribute("id",ht=Bt)),et=(Ht=X(Z)).length;et--;)Ht[et]=(ht?"#"+ht:":scope")+" "+je(Ht[et]);zt=Ht.join(",")}try{return gi.apply(Ce,ct.querySelectorAll(zt)),Ce}catch(cn){oi(Z,!0)}finally{ht===Bt&&he.removeAttribute("id")}}}return ce(Z.replace(vn,"$1"),he,Ce,Je)}function wn(){var Z=[];return function he(Ce,Je){return Z.push(Ce+" ")>w.cacheLength&&delete he[Z.shift()],he[Ce+" "]=Je}}function pn(Z){return Z[Bt]=!0,Z}function In(Z){var he=Qe.createElement("fieldset");try{return!!Z(he)}catch(Ce){return!1}finally{he.parentNode&&he.parentNode.removeChild(he),he=null}}function co(Z,he){for(var Ce=Z.split("|"),Je=Ce.length;Je--;)w.attrHandle[Ce[Je]]=he}function wr(Z,he){var Ce=he&&Z,Je=Ce&&1===Z.nodeType&&1===he.nodeType&&Z.sourceIndex-he.sourceIndex;if(Je)return Je;if(Ce)for(;Ce=Ce.nextSibling;)if(Ce===he)return-1;return Z?1:-1}function Hs(Z){return function(he){return"input"===he.nodeName.toLowerCase()&&he.type===Z}}function Wi(Z){return function(he){var Ce=he.nodeName.toLowerCase();return("input"===Ce||"button"===Ce)&&he.type===Z}}function js(Z){return function(he){return"form"in he?he.parentNode&&!1===he.disabled?"label"in he?"label"in he.parentNode?he.parentNode.disabled===Z:he.disabled===Z:he.isDisabled===Z||he.isDisabled!==!Z&&Cr(he)===Z:he.disabled===Z:"label"in he&&he.disabled===Z}}function mi(Z){return pn(function(he){return he=+he,pn(function(Ce,Je){for(var Ae,et=Z([],Ce.length,he),Ye=et.length;Ye--;)Ce[Ae=et[Ye]]&&(Ce[Ae]=!(Je[Ae]=Ce[Ae]))})})}function Ee(Z){return Z&&void 0!==Z.getElementsByTagName&&Z}for(h in y=kn.support={},F=kn.isXML=function(Z){var Ce=Z&&(Z.ownerDocument||Z).documentElement;return!Nu.test(Z&&Z.namespaceURI||Ce&&Ce.nodeName||"HTML")},Ne=kn.setDocument=function(Z){var he,Ce,Je=Z?Z.ownerDocument||Z:Ut;return Je==Qe||9!==Je.nodeType||!Je.documentElement||(St=(Qe=Je).documentElement,Zt=!F(Qe),Ut!=Qe&&(Ce=Qe.defaultView)&&Ce.top!==Ce&&(Ce.addEventListener?Ce.addEventListener("unload",Bs,!1):Ce.attachEvent&&Ce.attachEvent("onunload",Bs)),y.scope=In(function(Ae){return St.appendChild(Ae).appendChild(Qe.createElement("div")),void 0!==Ae.querySelectorAll&&!Ae.querySelectorAll(":scope fieldset div").length}),y.attributes=In(function(Ae){return Ae.className="i",!Ae.getAttribute("className")}),y.getElementsByTagName=In(function(Ae){return Ae.appendChild(Qe.createComment("")),!Ae.getElementsByTagName("*").length}),y.getElementsByClassName=vr.test(Qe.getElementsByClassName),y.getById=In(function(Ae){return St.appendChild(Ae).id=Bt,!Qe.getElementsByName||!Qe.getElementsByName(Bt).length}),y.getById?(w.filter.ID=function(Ae){var et=Ae.replace(ai,Gi);return function(Ye){return Ye.getAttribute("id")===et}},w.find.ID=function(Ae,et){if(void 0!==et.getElementById&&Zt){var Ye=et.getElementById(Ae);return Ye?[Ye]:[]}}):(w.filter.ID=function(Ae){var et=Ae.replace(ai,Gi);return function(Ye){var ht=void 0!==Ye.getAttributeNode&&Ye.getAttributeNode("id");return ht&&ht.value===et}},w.find.ID=function(Ae,et){if(void 0!==et.getElementById&&Zt){var Ye,ht,vt,Ht=et.getElementById(Ae);if(Ht){if((Ye=Ht.getAttributeNode("id"))&&Ye.value===Ae)return[Ht];for(vt=et.getElementsByName(Ae),ht=0;Ht=vt[ht++];)if((Ye=Ht.getAttributeNode("id"))&&Ye.value===Ae)return[Ht]}return[]}}),w.find.TAG=y.getElementsByTagName?function(Ae,et){return void 0!==et.getElementsByTagName?et.getElementsByTagName(Ae):y.qsa?et.querySelectorAll(Ae):void 0}:function(Ae,et){var Ye,ht=[],vt=0,Ht=et.getElementsByTagName(Ae);if("*"===Ae){for(;Ye=Ht[vt++];)1===Ye.nodeType&&ht.push(Ye);return ht}return Ht},w.find.CLASS=y.getElementsByClassName&&function(Ae,et){if(void 0!==et.getElementsByClassName&&Zt)return et.getElementsByClassName(Ae)},Rn=[],Vt=[],(y.qsa=vr.test(Qe.querySelectorAll))&&(In(function(Ae){var et;St.appendChild(Ae).innerHTML="<a id='"+Bt+"'></a><select id='"+Bt+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ae.querySelectorAll("[msallowcapture^='']").length&&Vt.push("[*^$]="+sn+"*(?:''|\"\")"),Ae.querySelectorAll("[selected]").length||Vt.push("\\["+sn+"*(?:value|"+Lo+")"),Ae.querySelectorAll("[id~="+Bt+"-]").length||Vt.push("~="),(et=Qe.createElement("input")).setAttribute("name",""),Ae.appendChild(et),Ae.querySelectorAll("[name='']").length||Vt.push("\\["+sn+"*name"+sn+"*="+sn+"*(?:''|\"\")"),Ae.querySelectorAll(":checked").length||Vt.push(":checked"),Ae.querySelectorAll("a#"+Bt+"+*").length||Vt.push(".#.+[+~]"),Ae.querySelectorAll("\\\f"),Vt.push("[\\r\\n\\f]")}),In(function(Ae){Ae.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var et=Qe.createElement("input");et.setAttribute("type","hidden"),Ae.appendChild(et).setAttribute("name","D"),Ae.querySelectorAll("[name=d]").length&&Vt.push("name"+sn+"*[*^$|!~]?="),2!==Ae.querySelectorAll(":enabled").length&&Vt.push(":enabled",":disabled"),St.appendChild(Ae).disabled=!0,2!==Ae.querySelectorAll(":disabled").length&&Vt.push(":enabled",":disabled"),Ae.querySelectorAll("*,:x"),Vt.push(",.*:")})),(y.matchesSelector=vr.test(Un=St.matches||St.webkitMatchesSelector||St.mozMatchesSelector||St.oMatchesSelector||St.msMatchesSelector))&&In(function(Ae){y.disconnectedMatch=Un.call(Ae,"*"),Un.call(Ae,"[s!='']:x"),Rn.push("!=",No)}),Vt=Vt.length&&new RegExp(Vt.join("|")),Rn=Rn.length&&new RegExp(Rn.join("|")),he=vr.test(St.compareDocumentPosition),zr=he||vr.test(St.contains)?function(Ae,et){var Ye=9===Ae.nodeType?Ae.documentElement:Ae,ht=et&&et.parentNode;return Ae===ht||!(!ht||1!==ht.nodeType||!(Ye.contains?Ye.contains(ht):Ae.compareDocumentPosition&&16&Ae.compareDocumentPosition(ht)))}:function(Ae,et){if(et)for(;et=et.parentNode;)if(et===Ae)return!0;return!1},Oo=he?function(Ae,et){if(Ae===et)return it=!0,0;var Ye=!Ae.compareDocumentPosition-!et.compareDocumentPosition;return Ye||(1&(Ye=(Ae.ownerDocument||Ae)==(et.ownerDocument||et)?Ae.compareDocumentPosition(et):1)||!y.sortDetached&&et.compareDocumentPosition(Ae)===Ye?Ae==Qe||Ae.ownerDocument==Ut&&zr(Ut,Ae)?-1:et==Qe||et.ownerDocument==Ut&&zr(Ut,et)?1:ze?Ni(ze,Ae)-Ni(ze,et):0:4&Ye?-1:1)}:function(Ae,et){if(Ae===et)return it=!0,0;var Ye,ht=0,vt=Ae.parentNode,Ht=et.parentNode,zt=[Ae],ct=[et];if(!vt||!Ht)return Ae==Qe?-1:et==Qe?1:vt?-1:Ht?1:ze?Ni(ze,Ae)-Ni(ze,et):0;if(vt===Ht)return wr(Ae,et);for(Ye=Ae;Ye=Ye.parentNode;)zt.unshift(Ye);for(Ye=et;Ye=Ye.parentNode;)ct.unshift(Ye);for(;zt[ht]===ct[ht];)ht++;return ht?wr(zt[ht],ct[ht]):zt[ht]==Ut?-1:ct[ht]==Ut?1:0}),Qe},kn.matches=function(Z,he){return kn(Z,null,null,he)},kn.matchesSelector=function(Z,he){if(Ne(Z),y.matchesSelector&&Zt&&!oi[he+" "]&&(!Rn||!Rn.test(he))&&(!Vt||!Vt.test(he)))try{var Ce=Un.call(Z,he);if(Ce||y.disconnectedMatch||Z.document&&11!==Z.document.nodeType)return Ce}catch(Je){oi(he,!0)}return kn(he,Qe,null,[Z]).length>0},kn.contains=function(Z,he){return(Z.ownerDocument||Z)!=Qe&&Ne(Z),zr(Z,he)},kn.attr=function(Z,he){(Z.ownerDocument||Z)!=Qe&&Ne(Z);var Ce=w.attrHandle[he.toLowerCase()],Je=Ce&&Ui.call(w.attrHandle,he.toLowerCase())?Ce(Z,he,!Zt):void 0;return void 0!==Je?Je:y.attributes||!Zt?Z.getAttribute(he):(Je=Z.getAttributeNode(he))&&Je.specified?Je.value:null},kn.escape=function(Z){return(Z+"").replace(tr,Ia)},kn.error=function(Z){throw new Error("Syntax error, unrecognized expression: "+Z)},kn.uniqueSort=function(Z){var he,Ce=[],Je=0,Ae=0;if(it=!y.detectDuplicates,ze=!y.sortStable&&Z.slice(0),Z.sort(Oo),it){for(;he=Z[Ae++];)he===Z[Ae]&&(Je=Ce.push(Ae));for(;Je--;)Z.splice(Ce[Je],1)}return ze=null,Z},D=kn.getText=function(Z){var he,Ce="",Je=0,Ae=Z.nodeType;if(Ae){if(1===Ae||9===Ae||11===Ae){if("string"==typeof Z.textContent)return Z.textContent;for(Z=Z.firstChild;Z;Z=Z.nextSibling)Ce+=D(Z)}else if(3===Ae||4===Ae)return Z.nodeValue}else for(;he=Z[Je++];)Ce+=D(he);return Ce},(w=kn.selectors={cacheLength:50,createPseudo:pn,match:Pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Z){return Z[1]=Z[1].replace(ai,Gi),Z[3]=(Z[3]||Z[4]||Z[5]||"").replace(ai,Gi),"~="===Z[2]&&(Z[3]=" "+Z[3]+" "),Z.slice(0,4)},CHILD:function(Z){return Z[1]=Z[1].toLowerCase(),"nth"===Z[1].slice(0,3)?(Z[3]||kn.error(Z[0]),Z[4]=+(Z[4]?Z[5]+(Z[6]||1):2*("even"===Z[3]||"odd"===Z[3])),Z[5]=+(Z[7]+Z[8]||"odd"===Z[3])):Z[3]&&kn.error(Z[0]),Z},PSEUDO:function(Z){var he,Ce=!Z[6]&&Z[2];return Pa.CHILD.test(Z[0])?null:(Z[3]?Z[2]=Z[4]||Z[5]||"":Ce&&Ou.test(Ce)&&(he=X(Ce,!0))&&(he=Ce.indexOf(")",Ce.length-he)-Ce.length)&&(Z[0]=Z[0].slice(0,he),Z[2]=Ce.slice(0,he)),Z.slice(0,3))}},filter:{TAG:function(Z){var he=Z.replace(ai,Gi).toLowerCase();return"*"===Z?function(){return!0}:function(Ce){return Ce.nodeName&&Ce.nodeName.toLowerCase()===he}},CLASS:function(Z){var he=Bn[Z+" "];return he||(he=new RegExp("(^|"+sn+")"+Z+"("+sn+"|$)"))&&Bn(Z,function(Ce){return he.test("string"==typeof Ce.className&&Ce.className||void 0!==Ce.getAttribute&&Ce.getAttribute("class")||"")})},ATTR:function(Z,he,Ce){return function(Je){var Ae=kn.attr(Je,Z);return null==Ae?"!="===he:!he||(Ae+="","="===he?Ae===Ce:"!="===he?Ae!==Ce:"^="===he?Ce&&0===Ae.indexOf(Ce):"*="===he?Ce&&Ae.indexOf(Ce)>-1:"$="===he?Ce&&Ae.slice(-Ce.length)===Ce:"~="===he?(" "+Ae.replace(Cn," ")+" ").indexOf(Ce)>-1:"|="===he&&(Ae===Ce||Ae.slice(0,Ce.length+1)===Ce+"-"))}},CHILD:function(Z,he,Ce,Je,Ae){var et="nth"!==Z.slice(0,3),Ye="last"!==Z.slice(-4),ht="of-type"===he;return 1===Je&&0===Ae?function(vt){return!!vt.parentNode}:function(vt,Ht,zt){var ct,ln,cn,At,Wn,Jn,Sr=et!==Ye?"nextSibling":"previousSibling",On=vt.parentNode,ta=ht&&vt.nodeName.toLowerCase(),ho=!zt&&!ht,Gr=!1;if(On){if(et){for(;Sr;){for(At=vt;At=At[Sr];)if(ht?At.nodeName.toLowerCase()===ta:1===At.nodeType)return!1;Jn=Sr="only"===Z&&!Jn&&"nextSibling"}return!0}if(Jn=[Ye?On.firstChild:On.lastChild],Ye&&ho){for(Gr=(Wn=(ct=(ln=(cn=(At=On)[Bt]||(At[Bt]={}))[At.uniqueID]||(cn[At.uniqueID]={}))[Z]||[])[0]===_r&&ct[1])&&ct[2],At=Wn&&On.childNodes[Wn];At=++Wn&&At&&At[Sr]||(Gr=Wn=0)||Jn.pop();)if(1===At.nodeType&&++Gr&&At===vt){ln[Z]=[_r,Wn,Gr];break}}else if(ho&&(Gr=Wn=(ct=(ln=(cn=(At=vt)[Bt]||(At[Bt]={}))[At.uniqueID]||(cn[At.uniqueID]={}))[Z]||[])[0]===_r&&ct[1]),!1===Gr)for(;(At=++Wn&&At&&At[Sr]||(Gr=Wn=0)||Jn.pop())&&((ht?At.nodeName.toLowerCase()!==ta:1!==At.nodeType)||!++Gr||(ho&&((ln=(cn=At[Bt]||(At[Bt]={}))[At.uniqueID]||(cn[At.uniqueID]={}))[Z]=[_r,Gr]),At!==vt)););return(Gr-=Ae)===Je||Gr%Je==0&&Gr/Je>=0}}},PSEUDO:function(Z,he){var Ce,Je=w.pseudos[Z]||w.setFilters[Z.toLowerCase()]||kn.error("unsupported pseudo: "+Z);return Je[Bt]?Je(he):Je.length>1?(Ce=[Z,Z,"",he],w.setFilters.hasOwnProperty(Z.toLowerCase())?pn(function(Ae,et){for(var Ye,ht=Je(Ae,he),vt=ht.length;vt--;)Ae[Ye=Ni(Ae,ht[vt])]=!(et[Ye]=ht[vt])}):function(Ae){return Je(Ae,0,Ce)}):Je}},pseudos:{not:pn(function(Z){var he=[],Ce=[],Je=le(Z.replace(vn,"$1"));return Je[Bt]?pn(function(Ae,et,Ye,ht){for(var vt,Ht=Je(Ae,null,ht,[]),zt=Ae.length;zt--;)(vt=Ht[zt])&&(Ae[zt]=!(et[zt]=vt))}):function(Ae,et,Ye){return he[0]=Ae,Je(he,null,Ye,Ce),he[0]=null,!Ce.pop()}}),has:pn(function(Z){return function(he){return kn(Z,he).length>0}}),contains:pn(function(Z){return Z=Z.replace(ai,Gi),function(he){return(he.textContent||D(he)).indexOf(Z)>-1}}),lang:pn(function(Z){return Lu.test(Z||"")||kn.error("unsupported lang: "+Z),Z=Z.replace(ai,Gi).toLowerCase(),function(he){var Ce;do{if(Ce=Zt?he.lang:he.getAttribute("xml:lang")||he.getAttribute("lang"))return(Ce=Ce.toLowerCase())===Z||0===Ce.indexOf(Z+"-")}while((he=he.parentNode)&&1===he.nodeType);return!1}}),target:function(Z){var he=l.location&&l.location.hash;return he&&he.slice(1)===Z.id},root:function(Z){return Z===St},focus:function(Z){return Z===Qe.activeElement&&(!Qe.hasFocus||Qe.hasFocus())&&!!(Z.type||Z.href||~Z.tabIndex)},enabled:js(!1),disabled:js(!0),checked:function(Z){var he=Z.nodeName.toLowerCase();return"input"===he&&!!Z.checked||"option"===he&&!!Z.selected},selected:function(Z){return!0===Z.selected},empty:function(Z){for(Z=Z.firstChild;Z;Z=Z.nextSibling)if(Z.nodeType<6)return!1;return!0},parent:function(Z){return!w.pseudos.empty(Z)},header:function(Z){return vs.test(Z.nodeName)},input:function(Z){return Wl.test(Z.nodeName)},button:function(Z){var he=Z.nodeName.toLowerCase();return"input"===he&&"button"===Z.type||"button"===he},text:function(Z){var he;return"input"===Z.nodeName.toLowerCase()&&"text"===Z.type&&(null==(he=Z.getAttribute("type"))||"text"===he.toLowerCase())},first:mi(function(){return[0]}),last:mi(function(Z,he){return[he-1]}),eq:mi(function(Z,he,Ce){return[Ce<0?Ce+he:Ce]}),even:mi(function(Z,he){for(var Ce=0;Ce<he;Ce+=2)Z.push(Ce);return Z}),odd:mi(function(Z,he){for(var Ce=1;Ce<he;Ce+=2)Z.push(Ce);return Z}),lt:mi(function(Z,he,Ce){for(var Je=Ce<0?Ce+he:Ce>he?he:Ce;--Je>=0;)Z.push(Je);return Z}),gt:mi(function(Z,he,Ce){for(var Je=Ce<0?Ce+he:Ce;++Je<he;)Z.push(Je);return Z})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[h]=Hs(h);for(h in{submit:!0,reset:!0})w.pseudos[h]=Wi(h);function Ze(){}function je(Z){for(var he=0,Ce=Z.length,Je="";he<Ce;he++)Je+=Z[he].value;return Je}function Ct(Z,he,Ce){var Je=he.dir,Ae=he.next,et=Ae||Je,Ye=Ce&&"parentNode"===et,ht=gn++;return he.first?function(vt,Ht,zt){for(;vt=vt[Je];)if(1===vt.nodeType||Ye)return Z(vt,Ht,zt);return!1}:function(vt,Ht,zt){var ct,ln,cn,At=[_r,ht];if(zt){for(;vt=vt[Je];)if((1===vt.nodeType||Ye)&&Z(vt,Ht,zt))return!0}else for(;vt=vt[Je];)if(1===vt.nodeType||Ye)if(ln=(cn=vt[Bt]||(vt[Bt]={}))[vt.uniqueID]||(cn[vt.uniqueID]={}),Ae&&Ae===vt.nodeName.toLowerCase())vt=vt[Je]||vt;else{if((ct=ln[et])&&ct[0]===_r&&ct[1]===ht)return At[2]=ct[2];if(ln[et]=At,At[2]=Z(vt,Ht,zt))return!0}return!1}}function Jt(Z){return Z.length>1?function(he,Ce,Je){for(var Ae=Z.length;Ae--;)if(!Z[Ae](he,Ce,Je))return!1;return!0}:Z[0]}function Gn(Z,he,Ce,Je,Ae){for(var et,Ye=[],ht=0,vt=Z.length,Ht=null!=he;ht<vt;ht++)(et=Z[ht])&&(!Ce||Ce(et,Je,Ae))&&(Ye.push(et),Ht&&he.push(ht));return Ye}function En(Z,he,Ce,Je,Ae,et){return Je&&!Je[Bt]&&(Je=En(Je)),Ae&&!Ae[Bt]&&(Ae=En(Ae,et)),pn(function(Ye,ht,vt,Ht){var zt,ct,ln,cn=[],At=[],Wn=ht.length,Jn=Ye||function mn(Z,he,Ce){for(var Je=0,Ae=he.length;Je<Ae;Je++)kn(Z,he[Je],Ce);return Ce}(he||"*",vt.nodeType?[vt]:vt,[]),Sr=!Z||!Ye&&he?Jn:Gn(Jn,cn,Z,vt,Ht),On=Ce?Ae||(Ye?Z:Wn||Je)?[]:ht:Sr;if(Ce&&Ce(Sr,On,vt,Ht),Je)for(zt=Gn(On,At),Je(zt,[],vt,Ht),ct=zt.length;ct--;)(ln=zt[ct])&&(On[At[ct]]=!(Sr[At[ct]]=ln));if(Ye){if(Ae||Z){if(Ae){for(zt=[],ct=On.length;ct--;)(ln=On[ct])&&zt.push(Sr[ct]=ln);Ae(null,On=[],zt,Ht)}for(ct=On.length;ct--;)(ln=On[ct])&&(zt=Ae?Ni(Ye,ln):cn[ct])>-1&&(Ye[zt]=!(ht[zt]=ln))}}else On=Gn(On===ht?On.splice(Wn,On.length):On),Ae?Ae(null,ht,On,Ht):gi.apply(ht,On)})}function Ro(Z){for(var he,Ce,Je,Ae=Z.length,et=w.relative[Z[0].type],Ye=et||w.relative[" "],ht=et?1:0,vt=Ct(function(ct){return ct===he},Ye,!0),Ht=Ct(function(ct){return Ni(he,ct)>-1},Ye,!0),zt=[function(ct,ln,cn){var At=!et&&(cn||ln!==we)||((he=ln).nodeType?vt(ct,ln,cn):Ht(ct,ln,cn));return he=null,At}];ht<Ae;ht++)if(Ce=w.relative[Z[ht].type])zt=[Ct(Jt(zt),Ce)];else{if((Ce=w.filter[Z[ht].type].apply(null,Z[ht].matches))[Bt]){for(Je=++ht;Je<Ae&&!w.relative[Z[Je].type];Je++);return En(ht>1&&Jt(zt),ht>1&&je(Z.slice(0,ht-1).concat({value:" "===Z[ht-2].type?"*":""})).replace(vn,"$1"),Ce,ht<Je&&Ro(Z.slice(ht,Je)),Je<Ae&&Ro(Z=Z.slice(Je)),Je<Ae&&je(Z))}zt.push(Ce)}return Jt(zt)}return Ze.prototype=w.filters=w.pseudos,w.setFilters=new Ze,X=kn.tokenize=function(Z,he){var Ce,Je,Ae,et,Ye,ht,vt,Ht=ur[Z+" "];if(Ht)return he?0:Ht.slice(0);for(Ye=Z,ht=[],vt=w.preFilter;Ye;){for(et in(!Ce||(Je=un.exec(Ye)))&&(Je&&(Ye=Ye.slice(Je[0].length)||Ye),ht.push(Ae=[])),Ce=!1,(Je=Ea.exec(Ye))&&(Ce=Je.shift(),Ae.push({value:Ce,type:Je[0].replace(vn," ")}),Ye=Ye.slice(Ce.length)),w.filter)(Je=Pa[et].exec(Ye))&&(!vt[et]||(Je=vt[et](Je)))&&(Ce=Je.shift(),Ae.push({value:Ce,type:et,matches:Je}),Ye=Ye.slice(Ce.length));if(!Ce)break}return he?Ye.length:Ye?kn.error(Z):ur(Z,ht).slice(0)},le=kn.compile=function(Z,he){var Ce,Je=[],Ae=[],et=gs[Z+" "];if(!et){for(he||(he=X(Z)),Ce=he.length;Ce--;)(et=Ro(he[Ce]))[Bt]?Je.push(et):Ae.push(et);et=gs(Z,function fo(Z,he){var Ce=he.length>0,Je=Z.length>0,Ae=function(et,Ye,ht,vt,Ht){var zt,ct,ln,cn=0,At="0",Wn=et&&[],Jn=[],Sr=we,On=et||Je&&w.find.TAG("*",Ht),ta=_r+=null==Sr?1:Math.random()||.1,ho=On.length;for(Ht&&(we=Ye==Qe||Ye||Ht);At!==ho&&null!=(zt=On[At]);At++){if(Je&&zt){for(ct=0,!Ye&&zt.ownerDocument!=Qe&&(Ne(zt),ht=!Zt);ln=Z[ct++];)if(ln(zt,Ye||Qe,ht)){vt.push(zt);break}Ht&&(_r=ta)}Ce&&((zt=!ln&&zt)&&cn--,et&&Wn.push(zt))}if(cn+=At,Ce&&At!==cn){for(ct=0;ln=he[ct++];)ln(Wn,Jn,Ye,ht);if(et){if(cn>0)for(;At--;)Wn[At]||Jn[At]||(Jn[At]=Nt.call(vt));Jn=Gn(Jn)}gi.apply(vt,Jn),Ht&&!et&&Jn.length>0&&cn+he.length>1&&kn.uniqueSort(vt)}return Ht&&(_r=ta,we=Sr),Wn};return Ce?pn(Ae):Ae}(Ae,Je)),et.selector=Z}return et},ce=kn.select=function(Z,he,Ce,Je){var Ae,et,Ye,ht,vt,Ht="function"==typeof Z&&Z,zt=!Je&&X(Z=Ht.selector||Z);if(Ce=Ce||[],1===zt.length){if((et=zt[0]=zt[0].slice(0)).length>2&&"ID"===(Ye=et[0]).type&&9===he.nodeType&&Zt&&w.relative[et[1].type]){if(!(he=(w.find.ID(Ye.matches[0].replace(ai,Gi),he)||[])[0]))return Ce;Ht&&(he=he.parentNode),Z=Z.slice(et.shift().value.length)}for(Ae=Pa.needsContext.test(Z)?0:et.length;Ae--&&!w.relative[ht=(Ye=et[Ae]).type];)if((vt=w.find[ht])&&(Je=vt(Ye.matches[0].replace(ai,Gi),lo.test(et[0].type)&&Ee(he.parentNode)||he))){if(et.splice(Ae,1),!(Z=Je.length&&je(et)))return gi.apply(Ce,Je),Ce;break}}return(Ht||le(Z,zt))(Je,he,!Zt,Ce,!he||lo.test(Z)&&Ee(he.parentNode)||he),Ce},y.sortStable=Bt.split("").sort(Oo).join("")===Bt,y.detectDuplicates=!!it,Ne(),y.sortDetached=In(function(Z){return 1&Z.compareDocumentPosition(Qe.createElement("fieldset"))}),In(function(Z){return Z.innerHTML="<a href='#'></a>","#"===Z.firstChild.getAttribute("href")})||co("type|href|height|width",function(Z,he,Ce){if(!Ce)return Z.getAttribute(he,"type"===he.toLowerCase()?1:2)}),(!y.attributes||!In(function(Z){return Z.innerHTML="<input/>",Z.firstChild.setAttribute("value",""),""===Z.firstChild.getAttribute("value")}))&&co("value",function(Z,he,Ce){if(!Ce&&"input"===Z.nodeName.toLowerCase())return Z.defaultValue}),In(function(Z){return null==Z.getAttribute("disabled")})||co(Lo,function(Z,he,Ce){var Je;if(!Ce)return!0===Z[he]?he.toLowerCase():(Je=Z.getAttributeNode(he))&&Je.specified?Je.value:null}),kn}(g);_.find=rt,_.expr=rt.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=rt.uniqueSort,_.text=rt.getText,_.isXMLDoc=rt.isXML,_.contains=rt.contains,_.escapeSelector=rt.escape;var nt=function(l,h,y){for(var w=[],D=void 0!==y;(l=l[h])&&9!==l.nodeType;)if(1===l.nodeType){if(D&&_(l).is(y))break;w.push(l)}return w},ot=function(l,h){for(var y=[];l;l=l.nextSibling)1===l.nodeType&&l!==h&&y.push(l);return y},ut=_.expr.match.needsContext;function yt(l,h){return l.nodeName&&l.nodeName.toLowerCase()===h.toLowerCase()}var Mt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Yt(l,h,y){return ue(h)?_.grep(l,function(w,D){return!!h.call(w,D,w)!==y}):h.nodeType?_.grep(l,function(w){return w===h!==y}):"string"!=typeof h?_.grep(l,function(w){return H.call(h,w)>-1!==y}):_.filter(h,l,y)}_.filter=function(l,h,y){var w=h[0];return y&&(l=":not("+l+")"),1===h.length&&1===w.nodeType?_.find.matchesSelector(w,l)?[w]:[]:_.find.matches(l,_.grep(h,function(D){return 1===D.nodeType}))},_.fn.extend({find:function(l){var h,y,w=this.length,D=this;if("string"!=typeof l)return this.pushStack(_(l).filter(function(){for(h=0;h<w;h++)if(_.contains(D[h],this))return!0}));for(y=this.pushStack([]),h=0;h<w;h++)_.find(l,D[h],y);return w>1?_.uniqueSort(y):y},filter:function(l){return this.pushStack(Yt(this,l||[],!1))},not:function(l){return this.pushStack(Yt(this,l||[],!0))},is:function(l){return!!Yt(this,"string"==typeof l&&ut.test(l)?_(l):l||[],!1).length}});var en,Dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ln=_.fn.init=function(l,h,y){var w,D;if(!l)return this;if(y=y||en,"string"==typeof l){if(!(w="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:Dt.exec(l))||!w[1]&&h)return!h||h.jquery?(h||y).find(l):this.constructor(h).find(l);if(w[1]){if(_.merge(this,_.parseHTML(w[1],(h=h instanceof _?h[0]:h)&&h.nodeType?h.ownerDocument||h:ge,!0)),Mt.test(w[1])&&_.isPlainObject(h))for(w in h)ue(this[w])?this[w](h[w]):this.attr(w,h[w]);return this}return(D=ge.getElementById(w[2]))&&(this[0]=D,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):ue(l)?void 0!==y.ready?y.ready(l):l(_):_.makeArray(l,this)};Ln.prototype=_.fn,en=_(ge);var mr=/^(?:parents|prev(?:Until|All))/,Fr={children:!0,contents:!0,next:!0,prev:!0};function rr(l,h){for(;(l=l[h])&&1!==l.nodeType;);return l}_.fn.extend({has:function(l){var h=_(l,this),y=h.length;return this.filter(function(){for(var w=0;w<y;w++)if(_.contains(this,h[w]))return!0})},closest:function(l,h){var y,w=0,D=this.length,F=[],X="string"!=typeof l&&_(l);if(!ut.test(l))for(;w<D;w++)for(y=this[w];y&&y!==h;y=y.parentNode)if(y.nodeType<11&&(X?X.index(y)>-1:1===y.nodeType&&_.find.matchesSelector(y,l))){F.push(y);break}return this.pushStack(F.length>1?_.uniqueSort(F):F)},index:function(l){return l?"string"==typeof l?H.call(_(l),this[0]):H.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,h){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(l,h))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),_.each({parent:function(l){var h=l.parentNode;return h&&11!==h.nodeType?h:null},parents:function(l){return nt(l,"parentNode")},parentsUntil:function(l,h,y){return nt(l,"parentNode",y)},next:function(l){return rr(l,"nextSibling")},prev:function(l){return rr(l,"previousSibling")},nextAll:function(l){return nt(l,"nextSibling")},prevAll:function(l){return nt(l,"previousSibling")},nextUntil:function(l,h,y){return nt(l,"nextSibling",y)},prevUntil:function(l,h,y){return nt(l,"previousSibling",y)},siblings:function(l){return ot((l.parentNode||{}).firstChild,l)},children:function(l){return ot(l.firstChild)},contents:function(l){return null!=l.contentDocument&&x(l.contentDocument)?l.contentDocument:(yt(l,"template")&&(l=l.content||l),_.merge([],l.childNodes))}},function(l,h){_.fn[l]=function(y,w){var D=_.map(this,h,y);return"Until"!==l.slice(-5)&&(w=y),w&&"string"==typeof w&&(D=_.filter(w,D)),this.length>1&&(Fr[l]||_.uniqueSort(D),mr.test(l)&&D.reverse()),this.pushStack(D)}});var Xn=/[^\x20\t\r\n\f]+/g;function Fn(l){return l}function $e(l){throw l}function tt(l,h,y,w){var D;try{l&&ue(D=l.promise)?D.call(l).done(h).fail(y):l&&ue(D=l.then)?D.call(l,h,y):h.apply(void 0,[l].slice(w))}catch(F){y.apply(void 0,[F])}}_.Callbacks=function(l){l="string"==typeof l?function yr(l){var h={};return _.each(l.match(Xn)||[],function(y,w){h[w]=!0}),h}(l):_.extend({},l);var h,y,w,D,F=[],X=[],le=-1,ce=function(){for(D=D||l.once,w=h=!0;X.length;le=-1)for(y=X.shift();++le<F.length;)!1===F[le].apply(y[0],y[1])&&l.stopOnFalse&&(le=F.length,y=!1);l.memory||(y=!1),h=!1,D&&(F=y?[]:"")},we={add:function(){return F&&(y&&!h&&(le=F.length-1,X.push(y)),function ze(it){_.each(it,function(Ne,Qe){ue(Qe)?(!l.unique||!we.has(Qe))&&F.push(Qe):Qe&&Qe.length&&"string"!==Ie(Qe)&&ze(Qe)})}(arguments),y&&!h&&ce()),this},remove:function(){return _.each(arguments,function(ze,it){for(var Ne;(Ne=_.inArray(it,F,Ne))>-1;)F.splice(Ne,1),Ne<=le&&le--}),this},has:function(ze){return ze?_.inArray(ze,F)>-1:F.length>0},empty:function(){return F&&(F=[]),this},disable:function(){return D=X=[],F=y="",this},disabled:function(){return!F},lock:function(){return D=X=[],!y&&!h&&(F=y=""),this},locked:function(){return!!D},fireWith:function(ze,it){return D||(it=[ze,(it=it||[]).slice?it.slice():it],X.push(it),h||ce()),this},fire:function(){return we.fireWith(this,arguments),this},fired:function(){return!!w}};return we},_.extend({Deferred:function(l){var h=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return D.done(arguments).fail(arguments),this},catch:function(F){return w.then(null,F)},pipe:function(){var F=arguments;return _.Deferred(function(X){_.each(h,function(le,ce){var we=ue(F[ce[4]])&&F[ce[4]];D[ce[1]](function(){var ze=we&&we.apply(this,arguments);ze&&ue(ze.promise)?ze.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[ce[0]+"With"](this,we?[ze]:arguments)})}),F=null}).promise()},then:function(F,X,le){var ce=0;function we(ze,it,Ne,Qe){return function(){var St=this,Zt=arguments,Vt=function(){var Un,zr;if(!(ze<ce)){if((Un=Ne.apply(St,Zt))===it.promise())throw new TypeError("Thenable self-resolution");ue(zr=Un&&("object"==typeof Un||"function"==typeof Un)&&Un.then)?Qe?zr.call(Un,we(ce,it,Fn,Qe),we(ce,it,$e,Qe)):(ce++,zr.call(Un,we(ce,it,Fn,Qe),we(ce,it,$e,Qe),we(ce,it,Fn,it.notifyWith))):(Ne!==Fn&&(St=void 0,Zt=[Un]),(Qe||it.resolveWith)(St,Zt))}},Rn=Qe?Vt:function(){try{Vt()}catch(Un){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(Un,Rn.stackTrace),ze+1>=ce&&(Ne!==$e&&(St=void 0,Zt=[Un]),it.rejectWith(St,Zt))}};ze?Rn():(_.Deferred.getStackHook&&(Rn.stackTrace=_.Deferred.getStackHook()),g.setTimeout(Rn))}}return _.Deferred(function(ze){h[0][3].add(we(0,ze,ue(le)?le:Fn,ze.notifyWith)),h[1][3].add(we(0,ze,ue(F)?F:Fn)),h[2][3].add(we(0,ze,ue(X)?X:$e))}).promise()},promise:function(F){return null!=F?_.extend(F,w):w}},D={};return _.each(h,function(F,X){var le=X[2],ce=X[5];w[X[1]]=le.add,ce&&le.add(function(){y=ce},h[3-F][2].disable,h[3-F][3].disable,h[0][2].lock,h[0][3].lock),le.add(X[3].fire),D[X[0]]=function(){return D[X[0]+"With"](this===D?void 0:this,arguments),this},D[X[0]+"With"]=le.fireWith}),w.promise(D),l&&l.call(D,D),D},when:function(l){var h=arguments.length,y=h,w=Array(y),D=A.call(arguments),F=_.Deferred(),X=function(le){return function(ce){w[le]=this,D[le]=arguments.length>1?A.call(arguments):ce,--h||F.resolveWith(w,D)}};if(h<=1&&(tt(l,F.done(X(y)).resolve,F.reject,!h),"pending"===F.state()||ue(D[y]&&D[y].then)))return F.then();for(;y--;)tt(D[y],X(y),F.reject);return F.promise()}});var st=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(l,h){g.console&&g.console.warn&&l&&st.test(l.name)&&g.console.warn("jQuery.Deferred exception: "+l.message,l.stack,h)},_.readyException=function(l){g.setTimeout(function(){throw l})};var _t=_.Deferred();function Ft(){ge.removeEventListener("DOMContentLoaded",Ft),g.removeEventListener("load",Ft),_.ready()}_.fn.ready=function(l){return _t.then(l).catch(function(h){_.readyException(h)}),this},_.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--_.readyWait:_.isReady)||(_.isReady=!0,!(!0!==l&&--_.readyWait>0)&&_t.resolveWith(ge,[_]))}}),_.ready.then=_t.then,"complete"===ge.readyState||"loading"!==ge.readyState&&!ge.documentElement.doScroll?g.setTimeout(_.ready):(ge.addEventListener("DOMContentLoaded",Ft),g.addEventListener("load",Ft));var qt=function(l,h,y,w,D,F,X){var le=0,ce=l.length,we=null==y;if("object"===Ie(y))for(le in D=!0,y)qt(l,h,le,y[le],!0,F,X);else if(void 0!==w&&(D=!0,ue(w)||(X=!0),we&&(X?(h.call(l,w),h=null):(we=h,h=function(ze,it,Ne){return we.call(_(ze),Ne)})),h))for(;le<ce;le++)h(l[le],y,X?w:w.call(l[le],le,h(l[le],y)));return D?l:we?h.call(l):ce?h(l[0],y):F},kt=/^-ms-/,jn=/-([a-z])/g;function fi(l,h){return h.toUpperCase()}function tn(l){return l.replace(kt,"ms-").replace(jn,fi)}var Xt=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function R(){this.expando=_.expando+R.uid++}R.uid=1,R.prototype={cache:function(l){var h=l[this.expando];return h||(h={},Xt(l)&&(l.nodeType?l[this.expando]=h:Object.defineProperty(l,this.expando,{value:h,configurable:!0}))),h},set:function(l,h,y){var w,D=this.cache(l);if("string"==typeof h)D[tn(h)]=y;else for(w in h)D[tn(w)]=h[w];return D},get:function(l,h){return void 0===h?this.cache(l):l[this.expando]&&l[this.expando][tn(h)]},access:function(l,h,y){return void 0===h||h&&"string"==typeof h&&void 0===y?this.get(l,h):(this.set(l,h,y),void 0!==y?y:h)},remove:function(l,h){var y,w=l[this.expando];if(void 0!==w){if(void 0!==h)for((y=(h=Array.isArray(h)?h.map(tn):(h=tn(h))in w?[h]:h.match(Xn)||[]).length);y--;)delete w[h[y]];(void 0===h||_.isEmptyObject(w))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var h=l[this.expando];return void 0!==h&&!_.isEmptyObject(h)}};var U=new R,re=new R,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ke=/[A-Z]/g;function pt(l,h,y){var w;if(void 0===y&&1===l.nodeType)if(w="data-"+h.replace(Ke,"-$&").toLowerCase(),"string"==typeof(y=l.getAttribute(w))){try{y=function Xe(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:be.test(l)?JSON.parse(l):l)}(y)}catch(D){}re.set(l,h,y)}else y=void 0;return y}_.extend({hasData:function(l){return re.hasData(l)||U.hasData(l)},data:function(l,h,y){return re.access(l,h,y)},removeData:function(l,h){re.remove(l,h)},_data:function(l,h,y){return U.access(l,h,y)},_removeData:function(l,h){U.remove(l,h)}}),_.fn.extend({data:function(l,h){var y,w,D,F=this[0],X=F&&F.attributes;if(void 0===l){if(this.length&&(D=re.get(F),1===F.nodeType&&!U.get(F,"hasDataAttrs"))){for(y=X.length;y--;)X[y]&&0===(w=X[y].name).indexOf("data-")&&(w=tn(w.slice(5)),pt(F,w,D[w]));U.set(F,"hasDataAttrs",!0)}return D}return"object"==typeof l?this.each(function(){re.set(this,l)}):qt(this,function(le){var ce;if(F&&void 0===le)return void 0!==(ce=re.get(F,l))||void 0!==(ce=pt(F,l))?ce:void 0;this.each(function(){re.set(this,l,le)})},null,h,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),_.extend({queue:function(l,h,y){var w;if(l)return w=U.get(l,h=(h||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=U.access(l,h,_.makeArray(y)):w.push(y)),w||[]},dequeue:function(l,h){var y=_.queue(l,h=h||"fx"),w=y.length,D=y.shift(),F=_._queueHooks(l,h);"inprogress"===D&&(D=y.shift(),w--),D&&("fx"===h&&y.unshift("inprogress"),delete F.stop,D.call(l,function(){_.dequeue(l,h)},F)),!w&&F&&F.empty.fire()},_queueHooks:function(l,h){var y=h+"queueHooks";return U.get(l,y)||U.access(l,y,{empty:_.Callbacks("once memory").add(function(){U.remove(l,[h+"queue",y])})})}}),_.fn.extend({queue:function(l,h){var y=2;return"string"!=typeof l&&(h=l,l="fx",y--),arguments.length<y?_.queue(this[0],l):void 0===h?this:this.each(function(){var w=_.queue(this,l,h);_._queueHooks(this,l),"fx"===l&&"inprogress"!==w[0]&&_.dequeue(this,l)})},dequeue:function(l){return this.each(function(){_.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,h){var y,w=1,D=_.Deferred(),F=this,X=this.length,le=function(){--w||D.resolveWith(F,[F])};for("string"!=typeof l&&(h=l,l=void 0),l=l||"fx";X--;)(y=U.get(F[X],l+"queueHooks"))&&y.empty&&(w++,y.empty.add(le));return le(),D.promise(h)}});var Ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Lt=new RegExp("^(?:([+-])=|)("+Ot+")([a-z%]*)$","i"),an=["Top","Right","Bottom","Left"],hn=ge.documentElement,nn=function(l){return _.contains(l.ownerDocument,l)},zn={composed:!0};hn.getRootNode&&(nn=function(l){return _.contains(l.ownerDocument,l)||l.getRootNode(zn)===l.ownerDocument});var Nn=function(l,h){return"none"===(l=h||l).style.display||""===l.style.display&&nn(l)&&"none"===_.css(l,"display")};function Vr(l,h,y,w){var D,F,X=20,le=w?function(){return w.cur()}:function(){return _.css(l,h,"")},ce=le(),we=y&&y[3]||(_.cssNumber[h]?"":"px"),ze=l.nodeType&&(_.cssNumber[h]||"px"!==we&&+ce)&&Lt.exec(_.css(l,h));if(ze&&ze[3]!==we){for(we=we||ze[3],ze=+(ce/=2)||1;X--;)_.style(l,h,ze+we),(1-F)*(1-(F=le()/ce||.5))<=0&&(X=0),ze/=F;_.style(l,h,(ze*=2)+we),y=y||[]}return y&&(ze=+ze||+ce||0,D=y[1]?ze+(y[1]+1)*y[2]:+y[2],w&&(w.unit=we,w.start=ze,w.end=D)),D}var Sn={};function Pt(l){var h,y=l.ownerDocument,w=l.nodeName,D=Sn[w];return D||(h=y.body.appendChild(y.createElement(w)),D=_.css(h,"display"),h.parentNode.removeChild(h),"none"===D&&(D="block"),Sn[w]=D,D)}function Mn(l,h){for(var y,w,D=[],F=0,X=l.length;F<X;F++)(w=l[F]).style&&(y=w.style.display,h?("none"===y&&(D[F]=U.get(w,"display")||null,D[F]||(w.style.display="")),""===w.style.display&&Nn(w)&&(D[F]=Pt(w))):"none"!==y&&(D[F]="none",U.set(w,"display",y)));for(F=0;F<X;F++)null!=D[F]&&(l[F].style.display=D[F]);return l}_.fn.extend({show:function(){return Mn(this,!0)},hide:function(){return Mn(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Nn(this)?_(this).show():_(this).hide()})}});var h,y,Vn=/^(?:checkbox|radio)$/i,ir=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Br=/^$|^module$|\/(?:java|ecma)script/i;h=ge.createDocumentFragment().appendChild(ge.createElement("div")),(y=ge.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),h.appendChild(y),i.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",i.option=!!h.lastChild;var qn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Kn(l,h){var y;return y=void 0!==l.getElementsByTagName?l.getElementsByTagName(h||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(h||"*"):[],void 0===h||h&&yt(l,h)?_.merge([l],y):y}function So(l,h){for(var y=0,w=l.length;y<w;y++)U.set(l[y],"globalEval",!h||U.get(h[y],"globalEval"))}qn.tbody=qn.tfoot=qn.colgroup=qn.caption=qn.thead,qn.th=qn.td,i.option||(qn.optgroup=qn.option=[1,"<select multiple='multiple'>","</select>"]);var ga=/<|&#?\w+;/;function ro(l,h,y,w,D){for(var F,X,le,ce,we,ze,it=h.createDocumentFragment(),Ne=[],Qe=0,St=l.length;Qe<St;Qe++)if((F=l[Qe])||0===F)if("object"===Ie(F))_.merge(Ne,F.nodeType?[F]:F);else if(ga.test(F)){for(X=X||it.appendChild(h.createElement("div")),le=(ir.exec(F)||["",""])[1].toLowerCase(),X.innerHTML=(ce=qn[le]||qn._default)[1]+_.htmlPrefilter(F)+ce[2],ze=ce[0];ze--;)X=X.lastChild;_.merge(Ne,X.childNodes),(X=it.firstChild).textContent=""}else Ne.push(h.createTextNode(F));for(it.textContent="",Qe=0;F=Ne[Qe++];)if(w&&_.inArray(F,w)>-1)D&&D.push(F);else if(we=nn(F),X=Kn(it.appendChild(F),"script"),we&&So(X),y)for(ze=0;F=X[ze++];)Br.test(F.type||"")&&y.push(F);return it}var To=/^([^.]*)(?:\.(.+)|)/;function ye(){return!0}function Kr(){return!1}function Vi(l,h){return l===function Eo(){try{return ge.activeElement}catch(l){}}()==("focus"===h)}function bt(l,h,y,w,D,F){var X,le;if("object"==typeof h){for(le in"string"!=typeof y&&(w=w||y,y=void 0),h)bt(l,le,y,w,h[le],F);return l}if(null==w&&null==D?(D=y,w=y=void 0):null==D&&("string"==typeof y?(D=w,w=void 0):(D=w,w=y,y=void 0)),!1===D)D=Kr;else if(!D)return l;return 1===F&&(X=D,D=function(ce){return _().off(ce),X.apply(this,arguments)},D.guid=X.guid||(X.guid=_.guid++)),l.each(function(){_.event.add(this,h,D,w,y)})}function Hr(l,h,y){y?(U.set(l,h,!1),_.event.add(l,h,{namespace:!1,handler:function(w){var D,F,X=U.get(this,h);if(1&w.isTrigger&&this[h]){if(X.length)(_.event.special[h]||{}).delegateType&&w.stopPropagation();else if(X=A.call(arguments),U.set(this,h,X),D=y(this,h),this[h](),X!==(F=U.get(this,h))||D?U.set(this,h,!1):F={},X!==F)return w.stopImmediatePropagation(),w.preventDefault(),F&&F.value}else X.length&&(U.set(this,h,{value:_.event.trigger(_.extend(X[0],_.Event.prototype),X.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===U.get(l,h)&&_.event.add(l,h,ye)}_.event={global:{},add:function(l,h,y,w,D){var F,X,le,ce,we,ze,it,Ne,Qe,St,Zt,Vt=U.get(l);if(Xt(l))for(y.handler&&(y=(F=y).handler,D=F.selector),D&&_.find.matchesSelector(hn,D),y.guid||(y.guid=_.guid++),(ce=Vt.events)||(ce=Vt.events=Object.create(null)),(X=Vt.handle)||(X=Vt.handle=function(Rn){return void 0!==_&&_.event.triggered!==Rn.type?_.event.dispatch.apply(l,arguments):void 0}),we=(h=(h||"").match(Xn)||[""]).length;we--;)Qe=Zt=(le=To.exec(h[we])||[])[1],St=(le[2]||"").split(".").sort(),Qe&&(it=_.event.special[Qe]||{},it=_.event.special[Qe=(D?it.delegateType:it.bindType)||Qe]||{},ze=_.extend({type:Qe,origType:Zt,data:w,handler:y,guid:y.guid,selector:D,needsContext:D&&_.expr.match.needsContext.test(D),namespace:St.join(".")},F),(Ne=ce[Qe])||((Ne=ce[Qe]=[]).delegateCount=0,(!it.setup||!1===it.setup.call(l,w,St,X))&&l.addEventListener&&l.addEventListener(Qe,X)),it.add&&(it.add.call(l,ze),ze.handler.guid||(ze.handler.guid=y.guid)),D?Ne.splice(Ne.delegateCount++,0,ze):Ne.push(ze),_.event.global[Qe]=!0)},remove:function(l,h,y,w,D){var F,X,le,ce,we,ze,it,Ne,Qe,St,Zt,Vt=U.hasData(l)&&U.get(l);if(Vt&&(ce=Vt.events)){for(we=(h=(h||"").match(Xn)||[""]).length;we--;)if(Qe=Zt=(le=To.exec(h[we])||[])[1],St=(le[2]||"").split(".").sort(),Qe){for(it=_.event.special[Qe]||{},Ne=ce[Qe=(w?it.delegateType:it.bindType)||Qe]||[],le=le[2]&&new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=F=Ne.length;F--;)ze=Ne[F],(D||Zt===ze.origType)&&(!y||y.guid===ze.guid)&&(!le||le.test(ze.namespace))&&(!w||w===ze.selector||"**"===w&&ze.selector)&&(Ne.splice(F,1),ze.selector&&Ne.delegateCount--,it.remove&&it.remove.call(l,ze));X&&!Ne.length&&((!it.teardown||!1===it.teardown.call(l,St,Vt.handle))&&_.removeEvent(l,Qe,Vt.handle),delete ce[Qe])}else for(Qe in ce)_.event.remove(l,Qe+h[we],y,w,!0);_.isEmptyObject(ce)&&U.remove(l,"handle events")}},dispatch:function(l){var h,y,w,D,F,X,le=new Array(arguments.length),ce=_.event.fix(l),we=(U.get(this,"events")||Object.create(null))[ce.type]||[],ze=_.event.special[ce.type]||{};for(le[0]=ce,h=1;h<arguments.length;h++)le[h]=arguments[h];if(ce.delegateTarget=this,!ze.preDispatch||!1!==ze.preDispatch.call(this,ce)){for(X=_.event.handlers.call(this,ce,we),h=0;(D=X[h++])&&!ce.isPropagationStopped();)for(ce.currentTarget=D.elem,y=0;(F=D.handlers[y++])&&!ce.isImmediatePropagationStopped();)(!ce.rnamespace||!1===F.namespace||ce.rnamespace.test(F.namespace))&&(ce.handleObj=F,ce.data=F.data,void 0!==(w=((_.event.special[F.origType]||{}).handle||F.handler).apply(D.elem,le))&&!1===(ce.result=w)&&(ce.preventDefault(),ce.stopPropagation()));return ze.postDispatch&&ze.postDispatch.call(this,ce),ce.result}},handlers:function(l,h){var y,w,D,F,X,le=[],ce=h.delegateCount,we=l.target;if(ce&&we.nodeType&&!("click"===l.type&&l.button>=1))for(;we!==this;we=we.parentNode||this)if(1===we.nodeType&&("click"!==l.type||!0!==we.disabled)){for(F=[],X={},y=0;y<ce;y++)void 0===X[D=(w=h[y]).selector+" "]&&(X[D]=w.needsContext?_(D,this).index(we)>-1:_.find(D,this,null,[we]).length),X[D]&&F.push(w);F.length&&le.push({elem:we,handlers:F})}return we=this,ce<h.length&&le.push({elem:we,handlers:h.slice(ce)}),le},addProp:function(l,h){Object.defineProperty(_.Event.prototype,l,{enumerable:!0,configurable:!0,get:ue(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(y){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(l){return l[_.expando]?l:new _.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var h=this||l;return Vn.test(h.type)&&h.click&&yt(h,"input")&&Hr(h,"click",ye),!1},trigger:function(l){var h=this||l;return Vn.test(h.type)&&h.click&&yt(h,"input")&&Hr(h,"click"),!0},_default:function(l){var h=l.target;return Vn.test(h.type)&&h.click&&yt(h,"input")&&U.get(h,"click")||yt(h,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},_.removeEvent=function(l,h,y){l.removeEventListener&&l.removeEventListener(h,y)},_.Event=function(l,h){if(!(this instanceof _.Event))return new _.Event(l,h);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?ye:Kr,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,h&&_.extend(this,h),this.timeStamp=l&&l.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Kr,isPropagationStopped:Kr,isImmediatePropagationStopped:Kr,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=ye,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=ye,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=ye,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(l,h){_.event.special[l]={setup:function(){return Hr(this,l,Vi),!1},trigger:function(){return Hr(this,l),!0},_default:function(){return!0},delegateType:h}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,h){_.event.special[l]={delegateType:h,bindType:h,handle:function(y){var w,D=this,F=y.relatedTarget,X=y.handleObj;return(!F||F!==D&&!_.contains(D,F))&&(y.type=X.origType,w=X.handler.apply(this,arguments),y.type=h),w}}}),_.fn.extend({on:function(l,h,y,w){return bt(this,l,h,y,w)},one:function(l,h,y,w){return bt(this,l,h,y,w,1)},off:function(l,h,y){var w,D;if(l&&l.preventDefault&&l.handleObj)return w=l.handleObj,_(l.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof l){for(D in l)this.off(D,h,l[D]);return this}return(!1===h||"function"==typeof h)&&(y=h,h=void 0),!1===y&&(y=Kr),this.each(function(){_.event.remove(this,l,y,h)})}});var io=/<script|<style|<link/i,oo=/checked\s*(?:[^=]|=\s*.checked.)/i,Bi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function or(l,h){return yt(l,"table")&&yt(11!==h.nodeType?h:h.firstChild,"tr")&&_(l).children("tbody")[0]||l}function Po(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function xr(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function va(l,h){var y,w,D,X,le,ce;if(1===h.nodeType){if(U.hasData(l)&&(ce=U.get(l).events))for(D in U.remove(h,"handle events"),ce)for(y=0,w=ce[D].length;y<w;y++)_.event.add(h,D,ce[D][y]);re.hasData(l)&&(X=re.access(l),le=_.extend({},X),re.set(h,le))}}function ma(l,h){var y=h.nodeName.toLowerCase();"input"===y&&Vn.test(l.type)?h.checked=l.checked:("input"===y||"textarea"===y)&&(h.defaultValue=l.defaultValue)}function Pr(l,h,y,w){h=k(h);var D,F,X,le,ce,we,ze=0,it=l.length,Ne=it-1,Qe=h[0],St=ue(Qe);if(St||it>1&&"string"==typeof Qe&&!i.checkClone&&oo.test(Qe))return l.each(function(Zt){var Vt=l.eq(Zt);St&&(h[0]=Qe.call(this,Zt,Vt.html())),Pr(Vt,h,y,w)});if(it&&(F=(D=ro(h,l[0].ownerDocument,!1,l,w)).firstChild,1===D.childNodes.length&&(D=F),F||w)){for(le=(X=_.map(Kn(D,"script"),Po)).length;ze<it;ze++)ce=D,ze!==Ne&&(ce=_.clone(ce,!0,!0),le&&_.merge(X,Kn(ce,"script"))),y.call(l[ze],ce,ze);if(le)for(we=X[X.length-1].ownerDocument,_.map(X,xr),ze=0;ze<le;ze++)Br.test((ce=X[ze]).type||"")&&!U.access(ce,"globalEval")&&_.contains(we,ce)&&(ce.src&&"module"!==(ce.type||"").toLowerCase()?_._evalUrl&&!ce.noModule&&_._evalUrl(ce.src,{nonce:ce.nonce||ce.getAttribute("nonce")},we):xe(ce.textContent.replace(Bi,""),ce,we))}return l}function $o(l,h,y){for(var w,D=h?_.filter(h,l):l,F=0;null!=(w=D[F]);F++)!y&&1===w.nodeType&&_.cleanData(Kn(w)),w.parentNode&&(y&&nn(w)&&So(Kn(w,"script")),w.parentNode.removeChild(w));return l}_.extend({htmlPrefilter:function(l){return l},clone:function(l,h,y){var w,D,F,X,le=l.cloneNode(!0),ce=nn(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||_.isXMLDoc(l)))for(X=Kn(le),w=0,D=(F=Kn(l)).length;w<D;w++)ma(F[w],X[w]);if(h)if(y)for(F=F||Kn(l),X=X||Kn(le),w=0,D=F.length;w<D;w++)va(F[w],X[w]);else va(l,le);return(X=Kn(le,"script")).length>0&&So(X,!ce&&Kn(l,"script")),le},cleanData:function(l){for(var h,y,w,D=_.event.special,F=0;void 0!==(y=l[F]);F++)if(Xt(y)){if(h=y[U.expando]){if(h.events)for(w in h.events)D[w]?_.event.remove(y,w):_.removeEvent(y,w,h.handle);y[U.expando]=void 0}y[re.expando]&&(y[re.expando]=void 0)}}}),_.fn.extend({detach:function(l){return $o(this,l,!0)},remove:function(l){return $o(this,l)},text:function(l){return qt(this,function(h){return void 0===h?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=h)})},null,l,arguments.length)},append:function(){return Pr(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||or(this,l).appendChild(l)})},prepend:function(){return Pr(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var h=or(this,l);h.insertBefore(l,h.firstChild)}})},before:function(){return Pr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Pr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,h=0;null!=(l=this[h]);h++)1===l.nodeType&&(_.cleanData(Kn(l,!1)),l.textContent="");return this},clone:function(l,h){return l=null!=l&&l,h=null==h?l:h,this.map(function(){return _.clone(this,l,h)})},html:function(l){return qt(this,function(h){var y=this[0]||{},w=0,D=this.length;if(void 0===h&&1===y.nodeType)return y.innerHTML;if("string"==typeof h&&!io.test(h)&&!qn[(ir.exec(h)||["",""])[1].toLowerCase()]){h=_.htmlPrefilter(h);try{for(;w<D;w++)1===(y=this[w]||{}).nodeType&&(_.cleanData(Kn(y,!1)),y.innerHTML=h);y=0}catch(F){}}y&&this.empty().append(h)},null,l,arguments.length)},replaceWith:function(){var l=[];return Pr(this,arguments,function(h){var y=this.parentNode;_.inArray(this,l)<0&&(_.cleanData(Kn(this)),y&&y.replaceChild(h,this))},l)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,h){_.fn[l]=function(y){for(var w,D=[],F=_(y),X=F.length-1,le=0;le<=X;le++)w=le===X?this:this.clone(!0),_(F[le])[h](w),M.apply(D,w.get());return this.pushStack(D)}});var Hi=new RegExp("^("+Ot+")(?!px)[a-z%]+$","i"),Yo=function(l){var h=l.ownerDocument.defaultView;return(!h||!h.opener)&&(h=g),h.getComputedStyle(l)},gt=function(l,h,y){var w,D,F={};for(D in h)F[D]=l.style[D],l.style[D]=h[D];for(D in w=y.call(l),h)l.style[D]=F[D];return w},Ga=new RegExp(an.join("|"),"i");function Si(l,h,y){var w,D,F,X,le=l.style;return(y=y||Yo(l))&&(""===(X=y.getPropertyValue(h)||y[h])&&!nn(l)&&(X=_.style(l,h)),!i.pixelBoxStyles()&&Hi.test(X)&&Ga.test(h)&&(w=le.width,D=le.minWidth,F=le.maxWidth,le.minWidth=le.maxWidth=le.width=X,X=y.width,le.width=w,le.minWidth=D,le.maxWidth=F)),void 0!==X?X+"":X}function ya(l,h){return{get:function(){if(!l())return(this.get=h).apply(this,arguments);delete this.get}}}!function(){function l(){if(we){ce.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",we.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",hn.appendChild(ce).appendChild(we);var ze=g.getComputedStyle(we);y="1%"!==ze.top,le=12===h(ze.marginLeft),we.style.right="60%",F=36===h(ze.right),w=36===h(ze.width),we.style.position="absolute",D=12===h(we.offsetWidth/3),hn.removeChild(ce),we=null}}function h(ze){return Math.round(parseFloat(ze))}var y,w,D,F,X,le,ce=ge.createElement("div"),we=ge.createElement("div");!we.style||(we.style.backgroundClip="content-box",we.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===we.style.backgroundClip,_.extend(i,{boxSizingReliable:function(){return l(),w},pixelBoxStyles:function(){return l(),F},pixelPosition:function(){return l(),y},reliableMarginLeft:function(){return l(),le},scrollboxSize:function(){return l(),D},reliableTrDimensions:function(){var ze,it,Ne,Qe;return null==X&&(ze=ge.createElement("table"),it=ge.createElement("tr"),Ne=ge.createElement("div"),ze.style.cssText="position:absolute;left:-11111px;border-collapse:separate",it.style.cssText="border:1px solid",it.style.height="1px",Ne.style.height="9px",Ne.style.display="block",hn.appendChild(ze).appendChild(it).appendChild(Ne),Qe=g.getComputedStyle(it),X=parseInt(Qe.height,10)+parseInt(Qe.borderTopWidth,10)+parseInt(Qe.borderBottomWidth,10)===it.offsetHeight,hn.removeChild(ze)),X}}))}();var xa=["Webkit","Moz","ms"],Tn=ge.createElement("div").style,Io={};function Ti(l){return _.cssProps[l]||Io[l]||(l in Tn?l:Io[l]=function ps(l){for(var h=l[0].toUpperCase()+l.slice(1),y=xa.length;y--;)if((l=xa[y]+h)in Tn)return l}(l)||l)}var ji=/^(none|table(?!-c[ea]).+)/,Ei=/^--/,Kt={position:"absolute",visibility:"hidden",display:"block"},jr={letterSpacing:"0",fontWeight:"400"};function It(l,h,y){var w=Lt.exec(h);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):h}function Ir(l,h,y,w,D,F){var X="width"===h?1:0,le=0,ce=0;if(y===(w?"border":"content"))return 0;for(;X<4;X+=2)"margin"===y&&(ce+=_.css(l,y+an[X],!0,D)),w?("content"===y&&(ce-=_.css(l,"padding"+an[X],!0,D)),"margin"!==y&&(ce-=_.css(l,"border"+an[X]+"Width",!0,D))):(ce+=_.css(l,"padding"+an[X],!0,D),"padding"!==y?ce+=_.css(l,"border"+an[X]+"Width",!0,D):le+=_.css(l,"border"+an[X]+"Width",!0,D));return!w&&F>=0&&(ce+=Math.max(0,Math.ceil(l["offset"+h[0].toUpperCase()+h.slice(1)]-F-ce-le-.5))||0),ce}function di(l,h,y){var w=Yo(l),F=(!i.boxSizingReliable()||y)&&"border-box"===_.css(l,"boxSizing",!1,w),X=F,le=Si(l,h,w),ce="offset"+h[0].toUpperCase()+h.slice(1);if(Hi.test(le)){if(!y)return le;le="auto"}return(!i.boxSizingReliable()&&F||!i.reliableTrDimensions()&&yt(l,"tr")||"auto"===le||!parseFloat(le)&&"inline"===_.css(l,"display",!1,w))&&l.getClientRects().length&&(F="border-box"===_.css(l,"boxSizing",!1,w),(X=ce in l)&&(le=l[ce])),(le=parseFloat(le)||0)+Ir(l,h,y||(F?"border":"content"),X,w,le)+"px"}function dn(l,h,y,w,D){return new dn.prototype.init(l,h,y,w,D)}_.extend({cssHooks:{opacity:{get:function(l,h){if(h){var y=Si(l,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,h,y,w){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var D,F,X,le=tn(h),ce=Ei.test(h),we=l.style;if(ce||(h=Ti(le)),X=_.cssHooks[h]||_.cssHooks[le],void 0===y)return X&&"get"in X&&void 0!==(D=X.get(l,!1,w))?D:we[h];if("string"==(F=typeof y)&&(D=Lt.exec(y))&&D[1]&&(y=Vr(l,h,D),F="number"),null==y||y!=y)return;"number"===F&&!ce&&(y+=D&&D[3]||(_.cssNumber[le]?"":"px")),!i.clearCloneStyle&&""===y&&0===h.indexOf("background")&&(we[h]="inherit"),(!X||!("set"in X)||void 0!==(y=X.set(l,y,w)))&&(ce?we.setProperty(h,y):we[h]=y)}},css:function(l,h,y,w){var D,F,X,le=tn(h);return Ei.test(h)||(h=Ti(le)),(X=_.cssHooks[h]||_.cssHooks[le])&&"get"in X&&(D=X.get(l,!0,y)),void 0===D&&(D=Si(l,h,w)),"normal"===D&&h in jr&&(D=jr[h]),""===y||y?(F=parseFloat(D),!0===y||isFinite(F)?F||0:D):D}}),_.each(["height","width"],function(l,h){_.cssHooks[h]={get:function(y,w,D){if(w)return!ji.test(_.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?di(y,h,D):gt(y,Kt,function(){return di(y,h,D)})},set:function(y,w,D){var F,X=Yo(y),le=!i.scrollboxSize()&&"absolute"===X.position,we=(le||D)&&"border-box"===_.css(y,"boxSizing",!1,X),ze=D?Ir(y,h,D,we,X):0;return we&&le&&(ze-=Math.ceil(y["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(X[h])-Ir(y,h,"border",!1,X)-.5)),ze&&(F=Lt.exec(w))&&"px"!==(F[3]||"px")&&(y.style[h]=w,w=_.css(y,h)),It(0,w,ze)}}}),_.cssHooks.marginLeft=ya(i.reliableMarginLeft,function(l,h){if(h)return(parseFloat(Si(l,"marginLeft"))||l.getBoundingClientRect().left-gt(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(l,h){_.cssHooks[l+h]={expand:function(y){for(var w=0,D={},F="string"==typeof y?y.split(" "):[y];w<4;w++)D[l+an[w]+h]=F[w]||F[w-2]||F[0];return D}},"margin"!==l&&(_.cssHooks[l+h].set=It)}),_.fn.extend({css:function(l,h){return qt(this,function(y,w,D){var F,X,le={},ce=0;if(Array.isArray(w)){for(F=Yo(y),X=w.length;ce<X;ce++)le[w[ce]]=_.css(y,w[ce],!1,F);return le}return void 0!==D?_.style(y,w,D):_.css(y,w)},l,h,arguments.length>1)}}),_.Tween=dn,(dn.prototype={constructor:dn,init:function(l,h,y,w,D,F){this.elem=l,this.prop=y,this.easing=D||_.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=w,this.unit=F||(_.cssNumber[y]?"":"px")},cur:function(){var l=dn.propHooks[this.prop];return l&&l.get?l.get(this):dn.propHooks._default.get(this)},run:function(l){var h,y=dn.propHooks[this.prop];return this.pos=h=this.options.duration?_.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):dn.propHooks._default.set(this),this}}).init.prototype=dn.prototype,(dn.propHooks={_default:{get:function(l){var h;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(h=_.css(l.elem,l.prop,""))&&"auto"!==h?h:0},set:function(l){_.fx.step[l.prop]?_.fx.step[l.prop](l):1!==l.elem.nodeType||!_.cssHooks[l.prop]&&null==l.elem.style[Ti(l.prop)]?l.elem[l.prop]=l.now:_.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=dn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},_.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},_.fx=dn.prototype.init,_.fx.step={};var Pi,pr,ba=/^(?:toggle|show|hide)$/,Ii=/queueHooks$/;function Ai(){pr&&(!1===ge.hidden&&g.requestAnimationFrame?g.requestAnimationFrame(Ai):g.setTimeout(Ai,_.fx.interval),_.fx.tick())}function hi(){return g.setTimeout(function(){Pi=void 0}),Pi=Date.now()}function Mi(l,h){var y,w=0,D={height:l};for(h=h?1:0;w<4;w+=2-h)D["margin"+(y=an[w])]=D["padding"+y]=l;return h&&(D.opacity=D.width=l),D}function Ao(l,h,y){for(var w,D=(ar.tweeners[h]||[]).concat(ar.tweeners["*"]),F=0,X=D.length;F<X;F++)if(w=D[F].call(y,h,l))return w}function ar(l,h,y){var w,D,F=0,X=ar.prefilters.length,le=_.Deferred().always(function(){delete ce.elem}),ce=function(){if(D)return!1;for(var it=Pi||hi(),Ne=Math.max(0,we.startTime+we.duration-it),St=1-(Ne/we.duration||0),Zt=0,Vt=we.tweens.length;Zt<Vt;Zt++)we.tweens[Zt].run(St);return le.notifyWith(l,[we,St,Ne]),St<1&&Vt?Ne:(Vt||le.notifyWith(l,[we,1,0]),le.resolveWith(l,[we]),!1)},we=le.promise({elem:l,props:_.extend({},h),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},y),originalProperties:h,originalOptions:y,startTime:Pi||hi(),duration:y.duration,tweens:[],createTween:function(it,Ne){var Qe=_.Tween(l,we.opts,it,Ne,we.opts.specialEasing[it]||we.opts.easing);return we.tweens.push(Qe),Qe},stop:function(it){var Ne=0,Qe=it?we.tweens.length:0;if(D)return this;for(D=!0;Ne<Qe;Ne++)we.tweens[Ne].run(1);return it?(le.notifyWith(l,[we,1,0]),le.resolveWith(l,[we,it])):le.rejectWith(l,[we,it]),this}}),ze=we.props;for(function br(l,h){var y,w,D,F,X;for(y in l)if(D=h[w=tn(y)],F=l[y],Array.isArray(F)&&(D=F[1],F=l[y]=F[0]),y!==w&&(l[w]=F,delete l[y]),(X=_.cssHooks[w])&&"expand"in X)for(y in F=X.expand(F),delete l[w],F)y in l||(l[y]=F[y],h[y]=D);else h[w]=D}(ze,we.opts.specialEasing);F<X;F++)if(w=ar.prefilters[F].call(we,l,ze,we.opts))return ue(w.stop)&&(_._queueHooks(we.elem,we.opts.queue).stop=w.stop.bind(w)),w;return _.map(ze,Ao,we),ue(we.opts.start)&&we.opts.start.call(l,we),we.progress(we.opts.progress).done(we.opts.done,we.opts.complete).fail(we.opts.fail).always(we.opts.always),_.fx.timer(_.extend(ce,{elem:l,anim:we,queue:we.opts.queue})),we}_.Animation=_.extend(ar,{tweeners:{"*":[function(l,h){var y=this.createTween(l,h);return Vr(y.elem,l,Lt.exec(h),y),y}]},tweener:function(l,h){ue(l)?(h=l,l=["*"]):l=l.match(Xn);for(var y,w=0,D=l.length;w<D;w++)(ar.tweeners[y=l[w]]=ar.tweeners[y]||[]).unshift(h)},prefilters:[function Wa(l,h,y){var w,D,F,X,le,ce,we,ze,it="width"in h||"height"in h,Ne=this,Qe={},St=l.style,Zt=l.nodeType&&Nn(l),Vt=U.get(l,"fxshow");for(w in y.queue||(null==(X=_._queueHooks(l,"fx")).unqueued&&(X.unqueued=0,le=X.empty.fire,X.empty.fire=function(){X.unqueued||le()}),X.unqueued++,Ne.always(function(){Ne.always(function(){X.unqueued--,_.queue(l,"fx").length||X.empty.fire()})})),h)if(ba.test(D=h[w])){if(delete h[w],F=F||"toggle"===D,D===(Zt?"hide":"show")){if("show"!==D||!Vt||void 0===Vt[w])continue;Zt=!0}Qe[w]=Vt&&Vt[w]||_.style(l,w)}if((ce=!_.isEmptyObject(h))||!_.isEmptyObject(Qe))for(w in it&&1===l.nodeType&&(y.overflow=[St.overflow,St.overflowX,St.overflowY],null==(we=Vt&&Vt.display)&&(we=U.get(l,"display")),"none"===(ze=_.css(l,"display"))&&(we?ze=we:(Mn([l],!0),we=l.style.display||we,ze=_.css(l,"display"),Mn([l]))),("inline"===ze||"inline-block"===ze&&null!=we)&&"none"===_.css(l,"float")&&(ce||(Ne.done(function(){St.display=we}),null==we&&(we="none"===(ze=St.display)?"":ze)),St.display="inline-block")),y.overflow&&(St.overflow="hidden",Ne.always(function(){St.overflow=y.overflow[0],St.overflowX=y.overflow[1],St.overflowY=y.overflow[2]})),ce=!1,Qe)ce||(Vt?"hidden"in Vt&&(Zt=Vt.hidden):Vt=U.access(l,"fxshow",{display:we}),F&&(Vt.hidden=!Zt),Zt&&Mn([l],!0),Ne.done(function(){for(w in Zt||Mn([l]),U.remove(l,"fxshow"),Qe)_.style(l,w,Qe[w])})),ce=Ao(Zt?Vt[w]:0,w,Ne),w in Vt||(Vt[w]=ce.start,Zt&&(ce.end=ce.start,ce.start=0))}],prefilter:function(l,h){h?ar.prefilters.unshift(l):ar.prefilters.push(l)}}),_.speed=function(l,h,y){var w=l&&"object"==typeof l?_.extend({},l):{complete:y||!y&&h||ue(l)&&l,duration:l,easing:y&&h||h&&!ue(h)&&h};return _.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in _.fx.speeds?_.fx.speeds[w.duration]:_.fx.speeds._default),(null==w.queue||!0===w.queue)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){ue(w.old)&&w.old.call(this),w.queue&&_.dequeue(this,w.queue)},w},_.fn.extend({fadeTo:function(l,h,y,w){return this.filter(Nn).css("opacity",0).show().end().animate({opacity:h},l,y,w)},animate:function(l,h,y,w){var D=_.isEmptyObject(l),F=_.speed(h,y,w),X=function(){var le=ar(this,_.extend({},l),F);(D||U.get(this,"finish"))&&le.stop(!0)};return X.finish=X,D||!1===F.queue?this.each(X):this.queue(F.queue,X)},stop:function(l,h,y){var w=function(D){var F=D.stop;delete D.stop,F(y)};return"string"!=typeof l&&(y=h,h=l,l=void 0),h&&this.queue(l||"fx",[]),this.each(function(){var D=!0,F=null!=l&&l+"queueHooks",X=_.timers,le=U.get(this);if(F)le[F]&&le[F].stop&&w(le[F]);else for(F in le)le[F]&&le[F].stop&&Ii.test(F)&&w(le[F]);for(F=X.length;F--;)X[F].elem===this&&(null==l||X[F].queue===l)&&(X[F].anim.stop(y),D=!1,X.splice(F,1));(D||!y)&&_.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var h,y=U.get(this),w=y[l+"queue"],D=y[l+"queueHooks"],F=_.timers,X=w?w.length:0;for(y.finish=!0,_.queue(this,l,[]),D&&D.stop&&D.stop.call(this,!0),h=F.length;h--;)F[h].elem===this&&F[h].queue===l&&(F[h].anim.stop(!0),F.splice(h,1));for(h=0;h<X;h++)w[h]&&w[h].finish&&w[h].finish.call(this);delete y.finish})}}),_.each(["toggle","show","hide"],function(l,h){var y=_.fn[h];_.fn[h]=function(w,D,F){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Mi(h,!0),w,D,F)}}),_.each({slideDown:Mi("show"),slideUp:Mi("hide"),slideToggle:Mi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,h){_.fn[l]=function(y,w,D){return this.animate(h,y,w,D)}}),_.timers=[],_.fx.tick=function(){var l,h=0,y=_.timers;for(Pi=Date.now();h<y.length;h++)!(l=y[h])()&&y[h]===l&&y.splice(h--,1);y.length||_.fx.stop(),Pi=void 0},_.fx.timer=function(l){_.timers.push(l),_.fx.start()},_.fx.interval=13,_.fx.start=function(){pr||(pr=!0,Ai())},_.fx.stop=function(){pr=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(l,h){return l=_.fx&&_.fx.speeds[l]||l,this.queue(h=h||"fx",function(y,w){var D=g.setTimeout(y,l);w.stop=function(){g.clearTimeout(D)}})},function(){var l=ge.createElement("input"),y=ge.createElement("select").appendChild(ge.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=y.selected,(l=ge.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var sr,Or=_.expr.attrHandle;_.fn.extend({attr:function(l,h){return qt(this,_.attr,l,h,arguments.length>1)},removeAttr:function(l){return this.each(function(){_.removeAttr(this,l)})}}),_.extend({attr:function(l,h,y){var w,D,F=l.nodeType;if(3!==F&&8!==F&&2!==F)return void 0===l.getAttribute?_.prop(l,h,y):((1!==F||!_.isXMLDoc(l))&&(D=_.attrHooks[h.toLowerCase()]||(_.expr.match.bool.test(h)?sr:void 0)),void 0!==y?null===y?void _.removeAttr(l,h):D&&"set"in D&&void 0!==(w=D.set(l,y,h))?w:(l.setAttribute(h,y+""),y):D&&"get"in D&&null!==(w=D.get(l,h))?w:null==(w=_.find.attr(l,h))?void 0:w)},attrHooks:{type:{set:function(l,h){if(!i.radioValue&&"radio"===h&&yt(l,"input")){var y=l.value;return l.setAttribute("type",h),y&&(l.value=y),h}}}},removeAttr:function(l,h){var y,w=0,D=h&&h.match(Xn);if(D&&1===l.nodeType)for(;y=D[w++];)l.removeAttribute(y)}}),sr={set:function(l,h,y){return!1===h?_.removeAttr(l,y):l.setAttribute(y,y),y}},_.each(_.expr.match.bool.source.match(/\w+/g),function(l,h){var y=Or[h]||_.find.attr;Or[h]=function(w,D,F){var X,le,ce=D.toLowerCase();return F||(le=Or[ce],Or[ce]=X,X=null!=y(w,D,F)?ce:null,Or[ce]=le),X}});var Xo=/^(?:input|select|textarea|button)$/i,Mo=/^(?:a|area)$/i;function Jr(l){return(l.match(Xn)||[]).join(" ")}function Ar(l){return l.getAttribute&&l.getAttribute("class")||""}function ki(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(Xn)||[]}_.fn.extend({prop:function(l,h){return qt(this,_.prop,l,h,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[_.propFix[l]||l]})}}),_.extend({prop:function(l,h,y){var w,D,F=l.nodeType;if(3!==F&&8!==F&&2!==F)return(1!==F||!_.isXMLDoc(l))&&(D=_.propHooks[h=_.propFix[h]||h]),void 0!==y?D&&"set"in D&&void 0!==(w=D.set(l,y,h))?w:l[h]=y:D&&"get"in D&&null!==(w=D.get(l,h))?w:l[h]},propHooks:{tabIndex:{get:function(l){var h=_.find.attr(l,"tabindex");return h?parseInt(h,10):Xo.test(l.nodeName)||Mo.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(_.propHooks.selected={get:function(l){return null},set:function(l){}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(l){var h,y,w,D,F,X,le,ce=0;if(ue(l))return this.each(function(we){_(this).addClass(l.call(this,we,Ar(this)))});if((h=ki(l)).length)for(;y=this[ce++];)if(D=Ar(y),w=1===y.nodeType&&" "+Jr(D)+" "){for(X=0;F=h[X++];)w.indexOf(" "+F+" ")<0&&(w+=F+" ");D!==(le=Jr(w))&&y.setAttribute("class",le)}return this},removeClass:function(l){var h,y,w,D,F,X,le,ce=0;if(ue(l))return this.each(function(we){_(this).removeClass(l.call(this,we,Ar(this)))});if(!arguments.length)return this.attr("class","");if((h=ki(l)).length)for(;y=this[ce++];)if(D=Ar(y),w=1===y.nodeType&&" "+Jr(D)+" "){for(X=0;F=h[X++];)for(;w.indexOf(" "+F+" ")>-1;)w=w.replace(" "+F+" "," ");D!==(le=Jr(w))&&y.setAttribute("class",le)}return this},toggleClass:function(l,h){var y=typeof l,w="string"===y||Array.isArray(l);return"boolean"==typeof h&&w?h?this.addClass(l):this.removeClass(l):ue(l)?this.each(function(D){_(this).toggleClass(l.call(this,D,Ar(this),h),h)}):this.each(function(){var D,F,X,le;if(w)for(F=0,X=_(this),le=ki(l);D=le[F++];)X.hasClass(D)?X.removeClass(D):X.addClass(D);else(void 0===l||"boolean"===y)&&((D=Ar(this))&&U.set(this,"__className__",D),this.setAttribute&&this.setAttribute("class",D||!1===l?"":U.get(this,"__className__")||""))})},hasClass:function(l){var h,y,w=0;for(h=" "+l+" ";y=this[w++];)if(1===y.nodeType&&(" "+Jr(Ar(y))+" ").indexOf(h)>-1)return!0;return!1}});var ao=/\r/g;_.fn.extend({val:function(l){var h,y,w,D=this[0];return arguments.length?(w=ue(l),this.each(function(F){var X;1===this.nodeType&&(null==(X=w?l.call(this,F,_(this).val()):l)?X="":"number"==typeof X?X+="":Array.isArray(X)&&(X=_.map(X,function(le){return null==le?"":le+""})),(!(h=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])||!("set"in h)||void 0===h.set(this,X,"value"))&&(this.value=X))})):D?(h=_.valHooks[D.type]||_.valHooks[D.nodeName.toLowerCase()])&&"get"in h&&void 0!==(y=h.get(D,"value"))?y:"string"==typeof(y=D.value)?y.replace(ao,""):null==y?"":y:void 0}}),_.extend({valHooks:{option:{get:function(l){var h=_.find.attr(l,"value");return null!=h?h:Jr(_.text(l))}},select:{get:function(l){var h,y,w,D=l.options,F=l.selectedIndex,X="select-one"===l.type,le=X?null:[],ce=X?F+1:D.length;for(w=F<0?ce:X?F:0;w<ce;w++)if(((y=D[w]).selected||w===F)&&!y.disabled&&(!y.parentNode.disabled||!yt(y.parentNode,"optgroup"))){if(h=_(y).val(),X)return h;le.push(h)}return le},set:function(l,h){for(var y,w,D=l.options,F=_.makeArray(h),X=D.length;X--;)((w=D[X]).selected=_.inArray(_.valHooks.option.get(w),F)>-1)&&(y=!0);return y||(l.selectedIndex=-1),F}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(l,h){if(Array.isArray(h))return l.checked=_.inArray(_(l).val(),h)>-1}},i.checkOn||(_.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in g;var Lr=/^(?:focusinfocus|focusoutblur)$/,Oi=function(l){l.stopPropagation()};_.extend(_.event,{trigger:function(l,h,y,w){var D,F,X,le,ce,we,ze,it,Ne=[y||ge],Qe=K.call(l,"type")?l.type:l,St=K.call(l,"namespace")?l.namespace.split("."):[];if(F=it=X=y=y||ge,3!==y.nodeType&&8!==y.nodeType&&!Lr.test(Qe+_.event.triggered)&&(Qe.indexOf(".")>-1&&(St=Qe.split("."),Qe=St.shift(),St.sort()),ce=Qe.indexOf(":")<0&&"on"+Qe,(l=l[_.expando]?l:new _.Event(Qe,"object"==typeof l&&l)).isTrigger=w?2:3,l.namespace=St.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=y),h=null==h?[l]:_.makeArray(h,[l]),ze=_.event.special[Qe]||{},w||!ze.trigger||!1!==ze.trigger.apply(y,h))){if(!w&&!ze.noBubble&&!me(y)){for(Lr.test((le=ze.delegateType||Qe)+Qe)||(F=F.parentNode);F;F=F.parentNode)Ne.push(F),X=F;X===(y.ownerDocument||ge)&&Ne.push(X.defaultView||X.parentWindow||g)}for(D=0;(F=Ne[D++])&&!l.isPropagationStopped();)it=F,l.type=D>1?le:ze.bindType||Qe,(we=(U.get(F,"events")||Object.create(null))[l.type]&&U.get(F,"handle"))&&we.apply(F,h),(we=ce&&F[ce])&&we.apply&&Xt(F)&&(l.result=we.apply(F,h),!1===l.result&&l.preventDefault());return l.type=Qe,!w&&!l.isDefaultPrevented()&&(!ze._default||!1===ze._default.apply(Ne.pop(),h))&&Xt(y)&&ce&&ue(y[Qe])&&!me(y)&&((X=y[ce])&&(y[ce]=null),_.event.triggered=Qe,l.isPropagationStopped()&&it.addEventListener(Qe,Oi),y[Qe](),l.isPropagationStopped()&&it.removeEventListener(Qe,Oi),_.event.triggered=void 0,X&&(y[ce]=X)),l.result}},simulate:function(l,h,y){var w=_.extend(new _.Event,y,{type:l,isSimulated:!0});_.event.trigger(w,null,h)}}),_.fn.extend({trigger:function(l,h){return this.each(function(){_.event.trigger(l,h,this)})},triggerHandler:function(l,h){var y=this[0];if(y)return _.event.trigger(l,h,y,!0)}}),i.focusin||_.each({focus:"focusin",blur:"focusout"},function(l,h){var y=function(w){_.event.simulate(h,w.target,_.event.fix(w))};_.event.special[h]={setup:function(){var w=this.ownerDocument||this.document||this,D=U.access(w,h);D||w.addEventListener(l,y,!0),U.access(w,h,(D||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,D=U.access(w,h)-1;D?U.access(w,h,D):(w.removeEventListener(l,y,!0),U.remove(w,h))}}});var ri=g.location,zi={guid:Date.now()},Ko=/\?/;_.parseXML=function(l){var h,y;if(!l||"string"!=typeof l)return null;try{h=(new g.DOMParser).parseFromString(l,"text/xml")}catch(w){}return y=h&&h.getElementsByTagName("parsererror")[0],(!h||y)&&_.error("Invalid XML: "+(y?_.map(y.childNodes,function(w){return w.textContent}).join("\n"):l)),h};var Jo=/\[\]$/,ko=/\r?\n/g,so=/^(?:submit|button|image|reset|file)$/i,_a=/^(?:input|select|textarea|keygen)/i;function Qo(l,h,y,w){var D;if(Array.isArray(h))_.each(h,function(F,X){y||Jo.test(l)?w(l,X):Qo(l+"["+("object"==typeof X&&null!=X?F:"")+"]",X,y,w)});else if(y||"object"!==Ie(h))w(l,h);else for(D in h)Qo(l+"["+D+"]",h[D],y,w)}_.param=function(l,h){var y,w=[],D=function(F,X){var le=ue(X)?X():X;w[w.length]=encodeURIComponent(F)+"="+encodeURIComponent(null==le?"":le)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!_.isPlainObject(l))_.each(l,function(){D(this.name,this.value)});else for(y in l)Qo(y,l[y],h,D);return w.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=_.prop(this,"elements");return l?_.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!_(this).is(":disabled")&&_a.test(this.nodeName)&&!so.test(l)&&(this.checked||!Vn.test(l))}).map(function(l,h){var y=_(this).val();return null==y?null:Array.isArray(y)?_.map(y,function(w){return{name:h.name,value:w.replace(ko,"\r\n")}}):{name:h.name,value:y.replace(ko,"\r\n")}}).get()}});var Ca=/%20/g,Zo=/#.*$/,wa=/([?&])_=[^&]*/,Sa=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ta=/^(?:GET|HEAD)$/,qo=/^\/\//,ii={},uo={},Ya="*/".concat("*"),Li=ge.createElement("a");function pi(l){return function(h,y){"string"!=typeof h&&(y=h,h="*");var w,D=0,F=h.toLowerCase().match(Xn)||[];if(ue(y))for(;w=F[D++];)"+"===w[0]?(w=w.slice(1)||"*",(l[w]=l[w]||[]).unshift(y)):(l[w]=l[w]||[]).push(y)}}function ea(l,h,y,w){var D={},F=l===uo;function X(le){var ce;return D[le]=!0,_.each(l[le]||[],function(we,ze){var it=ze(h,y,w);return"string"!=typeof it||F||D[it]?F?!(ce=it):void 0:(h.dataTypes.unshift(it),X(it),!1)}),ce}return X(h.dataTypes[0])||!D["*"]&&X("*")}function Pn(l,h){var y,w,D=_.ajaxSettings.flatOptions||{};for(y in h)void 0!==h[y]&&((D[y]?l:w||(w={}))[y]=h[y]);return w&&_.extend(!0,l,w),l}Li.href=ri.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ri.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ri.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ya,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,h){return h?Pn(Pn(l,_.ajaxSettings),h):Pn(_.ajaxSettings,l)},ajaxPrefilter:pi(ii),ajaxTransport:pi(uo),ajax:function(l,h){"object"==typeof l&&(h=l,l=void 0);var y,w,D,F,X,le,ce,we,ze,it,Ne=_.ajaxSetup({},h=h||{}),Qe=Ne.context||Ne,St=Ne.context&&(Qe.nodeType||Qe.jquery)?_(Qe):_.event,Zt=_.Deferred(),Vt=_.Callbacks("once memory"),Rn=Ne.statusCode||{},Un={},zr={},Bt="canceled",Ut={readyState:0,getResponseHeader:function(gn){var Bn;if(ce){if(!F)for(F={};Bn=Sa.exec(D);)F[Bn[1].toLowerCase()+" "]=(F[Bn[1].toLowerCase()+" "]||[]).concat(Bn[2]);Bn=F[gn.toLowerCase()+" "]}return null==Bn?null:Bn.join(", ")},getAllResponseHeaders:function(){return ce?D:null},setRequestHeader:function(gn,Bn){return null==ce&&(gn=zr[gn.toLowerCase()]=zr[gn.toLowerCase()]||gn,Un[gn]=Bn),this},overrideMimeType:function(gn){return null==ce&&(Ne.mimeType=gn),this},statusCode:function(gn){var Bn;if(gn)if(ce)Ut.always(gn[Ut.status]);else for(Bn in gn)Rn[Bn]=[Rn[Bn],gn[Bn]];return this},abort:function(gn){var Bn=gn||Bt;return y&&y.abort(Bn),_r(0,Bn),this}};if(Zt.promise(Ut),Ne.url=((l||Ne.url||ri.href)+"").replace(qo,ri.protocol+"//"),Ne.type=h.method||h.type||Ne.method||Ne.type,Ne.dataTypes=(Ne.dataType||"*").toLowerCase().match(Xn)||[""],null==Ne.crossDomain){le=ge.createElement("a");try{le.href=Ne.url,le.href=le.href,Ne.crossDomain=Li.protocol+"//"+Li.host!=le.protocol+"//"+le.host}catch(gn){Ne.crossDomain=!0}}if(Ne.data&&Ne.processData&&"string"!=typeof Ne.data&&(Ne.data=_.param(Ne.data,Ne.traditional)),ea(ii,Ne,h,Ut),ce)return Ut;for(ze in(we=_.event&&Ne.global)&&0==_.active++&&_.event.trigger("ajaxStart"),Ne.type=Ne.type.toUpperCase(),Ne.hasContent=!Ta.test(Ne.type),w=Ne.url.replace(Zo,""),Ne.hasContent?Ne.data&&Ne.processData&&0===(Ne.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Ne.data=Ne.data.replace(Ca,"+")):(it=Ne.url.slice(w.length),Ne.data&&(Ne.processData||"string"==typeof Ne.data)&&(w+=(Ko.test(w)?"&":"?")+Ne.data,delete Ne.data),!1===Ne.cache&&(w=w.replace(wa,"$1"),it=(Ko.test(w)?"&":"?")+"_="+zi.guid+++it),Ne.url=w+it),Ne.ifModified&&(_.lastModified[w]&&Ut.setRequestHeader("If-Modified-Since",_.lastModified[w]),_.etag[w]&&Ut.setRequestHeader("If-None-Match",_.etag[w])),(Ne.data&&Ne.hasContent&&!1!==Ne.contentType||h.contentType)&&Ut.setRequestHeader("Content-Type",Ne.contentType),Ut.setRequestHeader("Accept",Ne.dataTypes[0]&&Ne.accepts[Ne.dataTypes[0]]?Ne.accepts[Ne.dataTypes[0]]+("*"!==Ne.dataTypes[0]?", "+Ya+"; q=0.01":""):Ne.accepts["*"]),Ne.headers)Ut.setRequestHeader(ze,Ne.headers[ze]);if(Ne.beforeSend&&(!1===Ne.beforeSend.call(Qe,Ut,Ne)||ce))return Ut.abort();if(Bt="abort",Vt.add(Ne.complete),Ut.done(Ne.success),Ut.fail(Ne.error),y=ea(uo,Ne,h,Ut)){if(Ut.readyState=1,we&&St.trigger("ajaxSend",[Ut,Ne]),ce)return Ut;Ne.async&&Ne.timeout>0&&(X=g.setTimeout(function(){Ut.abort("timeout")},Ne.timeout));try{ce=!1,y.send(Un,_r)}catch(gn){if(ce)throw gn;_r(-1,gn)}}else _r(-1,"No Transport");function _r(gn,Bn,ur,gs){var oi,Oo,Ui,gr,Nt,Hn=Bn;ce||(ce=!0,X&&g.clearTimeout(X),y=void 0,D=gs||"",Ut.readyState=gn>0?4:0,oi=gn>=200&&gn<300||304===gn,ur&&(gr=function Ve(l,h,y){for(var w,D,F,X,le=l.contents,ce=l.dataTypes;"*"===ce[0];)ce.shift(),void 0===w&&(w=l.mimeType||h.getResponseHeader("Content-Type"));if(w)for(D in le)if(le[D]&&le[D].test(w)){ce.unshift(D);break}if(ce[0]in y)F=ce[0];else{for(D in y){if(!ce[0]||l.converters[D+" "+ce[0]]){F=D;break}X||(X=D)}F=F||X}if(F)return F!==ce[0]&&ce.unshift(F),y[F]}(Ne,Ut,ur)),!oi&&_.inArray("script",Ne.dataTypes)>-1&&_.inArray("json",Ne.dataTypes)<0&&(Ne.converters["text script"]=function(){}),gr=function Nr(l,h,y,w){var D,F,X,le,ce,we={},ze=l.dataTypes.slice();if(ze[1])for(X in l.converters)we[X.toLowerCase()]=l.converters[X];for(F=ze.shift();F;)if(l.responseFields[F]&&(y[l.responseFields[F]]=h),!ce&&w&&l.dataFilter&&(h=l.dataFilter(h,l.dataType)),ce=F,F=ze.shift())if("*"===F)F=ce;else if("*"!==ce&&ce!==F){if(!(X=we[ce+" "+F]||we["* "+F]))for(D in we)if((le=D.split(" "))[1]===F&&(X=we[ce+" "+le[0]]||we["* "+le[0]])){!0===X?X=we[D]:!0!==we[D]&&(F=le[0],ze.unshift(le[1]));break}if(!0!==X)if(X&&l.throws)h=X(h);else try{h=X(h)}catch(it){return{state:"parsererror",error:X?it:"No conversion from "+ce+" to "+F}}}return{state:"success",data:h}}(Ne,gr,Ut,oi),oi?(Ne.ifModified&&((Nt=Ut.getResponseHeader("Last-Modified"))&&(_.lastModified[w]=Nt),(Nt=Ut.getResponseHeader("etag"))&&(_.etag[w]=Nt)),204===gn||"HEAD"===Ne.type?Hn="nocontent":304===gn?Hn="notmodified":(Hn=gr.state,Oo=gr.data,oi=!(Ui=gr.error))):(Ui=Hn,(gn||!Hn)&&(Hn="error",gn<0&&(gn=0))),Ut.status=gn,Ut.statusText=(Bn||Hn)+"",oi?Zt.resolveWith(Qe,[Oo,Hn,Ut]):Zt.rejectWith(Qe,[Ut,Hn,Ui]),Ut.statusCode(Rn),Rn=void 0,we&&St.trigger(oi?"ajaxSuccess":"ajaxError",[Ut,Ne,oi?Oo:Ui]),Vt.fireWith(Qe,[Ut,Hn]),we&&(St.trigger("ajaxComplete",[Ut,Ne]),--_.active||_.event.trigger("ajaxStop")))}return Ut},getJSON:function(l,h,y){return _.get(l,h,y,"json")},getScript:function(l,h){return _.get(l,void 0,h,"script")}}),_.each(["get","post"],function(l,h){_[h]=function(y,w,D,F){return ue(w)&&(F=F||D,D=w,w=void 0),_.ajax(_.extend({url:y,type:h,dataType:F,data:w,success:D},_.isPlainObject(y)&&y))}}),_.ajaxPrefilter(function(l){var h;for(h in l.headers)"content-type"===h.toLowerCase()&&(l.contentType=l.headers[h]||"")}),_._evalUrl=function(l,h,y){return _.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){_.globalEval(w,h,y)}})},_.fn.extend({wrapAll:function(l){var h;return this[0]&&(ue(l)&&(l=l.call(this[0])),h=_(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(l){return ue(l)?this.each(function(h){_(this).wrapInner(l.call(this,h))}):this.each(function(){var h=_(this),y=h.contents();y.length?y.wrapAll(l):h.append(l)})},wrap:function(l){var h=ue(l);return this.each(function(y){_(this).wrapAll(h?l.call(this,y):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(l){return!_.expr.pseudos.visible(l)},_.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new g.XMLHttpRequest}catch(l){}};var Rr={0:200,1223:204},B=_.ajaxSettings.xhr();i.cors=!!B&&"withCredentials"in B,i.ajax=B=!!B,_.ajaxTransport(function(l){var h,y;if(i.cors||B&&!l.crossDomain)return{send:function(w,D){var F,X=l.xhr();if(X.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(F in l.xhrFields)X[F]=l.xhrFields[F];for(F in l.mimeType&&X.overrideMimeType&&X.overrideMimeType(l.mimeType),!l.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest"),w)X.setRequestHeader(F,w[F]);h=function(le){return function(){h&&(h=y=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,"abort"===le?X.abort():"error"===le?"number"!=typeof X.status?D(0,"error"):D(X.status,X.statusText):D(Rr[X.status]||X.status,X.statusText,"text"!==(X.responseType||"text")||"string"!=typeof X.responseText?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=h(),y=X.onerror=X.ontimeout=h("error"),void 0!==X.onabort?X.onabort=y:X.onreadystatechange=function(){4===X.readyState&&g.setTimeout(function(){h&&y()})},h=h("abort");try{X.send(l.hasContent&&l.data||null)}catch(le){if(h)throw le}},abort:function(){h&&h()}}}),_.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return _.globalEval(l),l}}}),_.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),_.ajaxTransport("script",function(l){var h,y;if(l.crossDomain||l.scriptAttrs)return{send:function(w,D){h=_("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",y=function(F){h.remove(),y=null,F&&D("error"===F.type?404:200,F.type)}),ge.head.appendChild(h[0])},abort:function(){y&&y()}}});var l,Q=[],se=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Q.pop()||_.expando+"_"+zi.guid++;return this[l]=!0,l}}),_.ajaxPrefilter("json jsonp",function(l,h,y){var w,D,F,X=!1!==l.jsonp&&(se.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&se.test(l.data)&&"data");if(X||"jsonp"===l.dataTypes[0])return w=l.jsonpCallback=ue(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,X?l[X]=l[X].replace(se,"$1"+w):!1!==l.jsonp&&(l.url+=(Ko.test(l.url)?"&":"?")+l.jsonp+"="+w),l.converters["script json"]=function(){return F||_.error(w+" was not called"),F[0]},l.dataTypes[0]="json",D=g[w],g[w]=function(){F=arguments},y.always(function(){void 0===D?_(g).removeProp(w):g[w]=D,l[w]&&(l.jsonpCallback=h.jsonpCallback,Q.push(w)),F&&ue(D)&&D(F[0]),F=D=void 0}),"script"}),i.createHTMLDocument=((l=ge.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),_.parseHTML=function(l,h,y){return"string"!=typeof l?[]:("boolean"==typeof h&&(y=h,h=!1),h||(i.createHTMLDocument?((w=(h=ge.implementation.createHTMLDocument("")).createElement("base")).href=ge.location.href,h.head.appendChild(w)):h=ge),F=!y&&[],(D=Mt.exec(l))?[h.createElement(D[1])]:(D=ro([l],h,F),F&&F.length&&_(F).remove(),_.merge([],D.childNodes)));var w,D,F},_.fn.load=function(l,h,y){var w,D,F,X=this,le=l.indexOf(" ");return le>-1&&(w=Jr(l.slice(le)),l=l.slice(0,le)),ue(h)?(y=h,h=void 0):h&&"object"==typeof h&&(D="POST"),X.length>0&&_.ajax({url:l,type:D||"GET",dataType:"html",data:h}).done(function(ce){F=arguments,X.html(w?_("<div>").append(_.parseHTML(ce)).find(w):ce)}).always(y&&function(ce,we){X.each(function(){y.apply(this,F||[ce.responseText,we,ce])})}),this},_.expr.pseudos.animated=function(l){return _.grep(_.timers,function(h){return l===h.elem}).length},_.offset={setOffset:function(l,h,y){var w,D,F,X,le,ce,ze=_.css(l,"position"),it=_(l),Ne={};"static"===ze&&(l.style.position="relative"),le=it.offset(),F=_.css(l,"top"),ce=_.css(l,"left"),("absolute"===ze||"fixed"===ze)&&(F+ce).indexOf("auto")>-1?(X=(w=it.position()).top,D=w.left):(X=parseFloat(F)||0,D=parseFloat(ce)||0),ue(h)&&(h=h.call(l,y,_.extend({},le))),null!=h.top&&(Ne.top=h.top-le.top+X),null!=h.left&&(Ne.left=h.left-le.left+D),"using"in h?h.using.call(l,Ne):it.css(Ne)}},_.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(D){_.offset.setOffset(this,l,D)});var h,y,w=this[0];return w?w.getClientRects().length?{top:(h=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:h.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,h,y,w=this[0],D={top:0,left:0};if("fixed"===_.css(w,"position"))h=w.getBoundingClientRect();else{for(h=this.offset(),y=w.ownerDocument,l=w.offsetParent||y.documentElement;l&&(l===y.body||l===y.documentElement)&&"static"===_.css(l,"position");)l=l.parentNode;l&&l!==w&&1===l.nodeType&&((D=_(l).offset()).top+=_.css(l,"borderTopWidth",!0),D.left+=_.css(l,"borderLeftWidth",!0))}return{top:h.top-D.top-_.css(w,"marginTop",!0),left:h.left-D.left-_.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===_.css(l,"position");)l=l.offsetParent;return l||hn})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,h){var y="pageYOffset"===h;_.fn[l]=function(w){return qt(this,function(D,F,X){var le;if(me(D)?le=D:9===D.nodeType&&(le=D.defaultView),void 0===X)return le?le[h]:D[F];le?le.scrollTo(y?le.pageXOffset:X,y?X:le.pageYOffset):D[F]=X},l,w,arguments.length)}}),_.each(["top","left"],function(l,h){_.cssHooks[h]=ya(i.pixelPosition,function(y,w){if(w)return w=Si(y,h),Hi.test(w)?_(y).position()[h]+"px":w})}),_.each({Height:"height",Width:"width"},function(l,h){_.each({padding:"inner"+l,content:h,"":"outer"+l},function(y,w){_.fn[w]=function(D,F){var X=arguments.length&&(y||"boolean"!=typeof D),le=y||(!0===D||!0===F?"margin":"border");return qt(this,function(ce,we,ze){var it;return me(ce)?0===w.indexOf("outer")?ce["inner"+l]:ce.document.documentElement["client"+l]:9===ce.nodeType?(it=ce.documentElement,Math.max(ce.body["scroll"+l],it["scroll"+l],ce.body["offset"+l],it["offset"+l],it["client"+l])):void 0===ze?_.css(ce,we,le):_.style(ce,we,ze,le)},h,X?D:void 0,X)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,h){_.fn[h]=function(y){return this.on(h,y)}}),_.fn.extend({bind:function(l,h,y){return this.on(l,null,h,y)},unbind:function(l,h){return this.off(l,null,h)},delegate:function(l,h,y,w){return this.on(h,l,y,w)},undelegate:function(l,h,y){return 1===arguments.length?this.off(l,"**"):this.off(h,l||"**",y)},hover:function(l,h){return this.mouseenter(l).mouseleave(h||l)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,h){_.fn[h]=function(y,w){return arguments.length>0?this.on(h,null,y,w):this.trigger(h)}});var pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(l,h){var y,w,D;if("string"==typeof h&&(y=l[h],h=l,l=y),ue(l))return w=A.call(arguments,2),D=function(){return l.apply(h||this,w.concat(A.call(arguments)))},D.guid=l.guid=l.guid||_.guid++,D},_.holdReady=function(l){l?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=yt,_.isFunction=ue,_.isWindow=me,_.camelCase=tn,_.type=Ie,_.now=Date.now,_.isNumeric=function(l){var h=_.type(l);return("number"===h||"string"===h)&&!isNaN(l-parseFloat(l))},_.trim=function(l){return null==l?"":(l+"").replace(pe,"")},void 0!==(p=function(){return _}.apply(W,[]))&&(P.exports=p);var ke=g.jQuery,Se=g.$;return _.noConflict=function(l){return g.$===_&&(g.$=Se),l&&g.jQuery===_&&(g.jQuery=ke),_},void 0===S&&(g.jQuery=g.$=_),_})},37244:(P,W,f)=>{var S=f(53436)(f(12119),"DataView");P.exports=S},54994:(P,W,f)=>{var p=f(64312),g=f(46421),S=f(15764),E=f(18685),x=f(26676);function A(k){var M=-1,H=null==k?0:k.length;for(this.clear();++M<H;){var j=k[M];this.set(j[0],j[1])}}A.prototype.clear=p,A.prototype.delete=g,A.prototype.get=S,A.prototype.has=E,A.prototype.set=x,P.exports=A},9215:(P,W,f)=>{var p=f(41840),g=f(34378),S=f(54981),E=f(67343),x=f(98895);function A(k){var M=-1,H=null==k?0:k.length;for(this.clear();++M<H;){var j=k[M];this.set(j[0],j[1])}}A.prototype.clear=p,A.prototype.delete=g,A.prototype.get=S,A.prototype.has=E,A.prototype.set=x,P.exports=A},51501:(P,W,f)=>{var S=f(53436)(f(12119),"Map");P.exports=S},99850:(P,W,f)=>{var p=f(10638),g=f(11184),S=f(70866),E=f(43771),x=f(51772);function A(k){var M=-1,H=null==k?0:k.length;for(this.clear();++M<H;){var j=k[M];this.set(j[0],j[1])}}A.prototype.clear=p,A.prototype.delete=g,A.prototype.get=S,A.prototype.has=E,A.prototype.set=x,P.exports=A},44267:(P,W,f)=>{var S=f(53436)(f(12119),"Promise");P.exports=S},46323:(P,W,f)=>{var S=f(53436)(f(12119),"Set");P.exports=S},58849:(P,W,f)=>{var p=f(99850),g=f(4600),S=f(31387);function E(x){var A=-1,k=null==x?0:x.length;for(this.__data__=new p;++A<k;)this.add(x[A])}E.prototype.add=E.prototype.push=g,E.prototype.has=S,P.exports=E},2858:(P,W,f)=>{var p=f(9215),g=f(13720),S=f(64410),E=f(45576),x=f(22247),A=f(41585);function k(M){var H=this.__data__=new p(M);this.size=H.size}k.prototype.clear=g,k.prototype.delete=S,k.prototype.get=E,k.prototype.has=x,k.prototype.set=A,P.exports=k},60443:(P,W,f)=>{var p=f(12119);P.exports=p.Symbol},73457:(P,W,f)=>{var p=f(12119);P.exports=p.Uint8Array},24243:(P,W,f)=>{var S=f(53436)(f(12119),"WeakMap");P.exports=S},26999:P=>{P.exports=function W(f,p,g){switch(g.length){case 0:return f.call(p);case 1:return f.call(p,g[0]);case 2:return f.call(p,g[0],g[1]);case 3:return f.call(p,g[0],g[1],g[2])}return f.apply(p,g)}},96837:P=>{P.exports=function W(f,p){for(var g=-1,S=null==f?0:f.length;++g<S&&!1!==p(f[g],g,f););return f}},69779:P=>{P.exports=function W(f,p){for(var g=-1,S=null==f?0:f.length,E=0,x=[];++g<S;){var A=f[g];p(A,g,f)&&(x[E++]=A)}return x}},61253:(P,W,f)=>{var p=f(14164);P.exports=function g(S,E){return!(null==S||!S.length)&&p(S,E,0)>-1}},37609:P=>{P.exports=function W(f,p,g){for(var S=-1,E=null==f?0:f.length;++S<E;)if(g(p,f[S]))return!0;return!1}},72271:(P,W,f)=>{var p=f(85334),g=f(77151),S=f(21503),E=f(80891),x=f(58442),A=f(48159),M=Object.prototype.hasOwnProperty;P.exports=function H(j,L){var K=S(j),ne=!K&&g(j),fe=!K&&!ne&&E(j),i=!K&&!ne&&!fe&&A(j),ue=K||ne||fe||i,me=ue?p(j.length,String):[],ge=me.length;for(var ee in j)(L||M.call(j,ee))&&(!ue||!("length"==ee||fe&&("offset"==ee||"parent"==ee)||i&&("buffer"==ee||"byteLength"==ee||"byteOffset"==ee)||x(ee,ge)))&&me.push(ee);return me}},84633:P=>{P.exports=function W(f,p){for(var g=-1,S=null==f?0:f.length,E=Array(S);++g<S;)E[g]=p(f[g],g,f);return E}},85059:P=>{P.exports=function W(f,p){for(var g=-1,S=p.length,E=f.length;++g<S;)f[E+g]=p[g];return f}},8745:P=>{P.exports=function W(f,p,g,S){var E=-1,x=null==f?0:f.length;for(S&&x&&(g=f[++E]);++E<x;)g=p(g,f[E],E,f);return g}},79503:P=>{P.exports=function W(f,p){for(var g=-1,S=null==f?0:f.length;++g<S;)if(p(f[g],g,f))return!0;return!1}},75481:(P,W,f)=>{var g=f(11847)("length");P.exports=g},49276:(P,W,f)=>{var p=f(85683),g=f(20217);P.exports=function S(E,x,A){(void 0!==A&&!g(E[x],A)||void 0===A&&!(x in E))&&p(E,x,A)}},89719:(P,W,f)=>{var p=f(85683),g=f(20217),E=Object.prototype.hasOwnProperty;P.exports=function x(A,k,M){var H=A[k];(!E.call(A,k)||!g(H,M)||void 0===M&&!(k in A))&&p(A,k,M)}},43503:(P,W,f)=>{var p=f(20217);P.exports=function g(S,E){for(var x=S.length;x--;)if(p(S[x][0],E))return x;return-1}},94121:(P,W,f)=>{var p=f(31989),g=f(118);P.exports=function S(E,x){return E&&p(x,g(x),E)}},99287:(P,W,f)=>{var p=f(31989),g=f(16555);P.exports=function S(E,x){return E&&p(x,g(x),E)}},85683:(P,W,f)=>{var p=f(56713);P.exports=function g(S,E,x){"__proto__"==E&&p?p(S,E,{configurable:!0,enumerable:!0,value:x,writable:!0}):S[E]=x}},44462:(P,W,f)=>{var p=f(2858),g=f(96837),S=f(89719),E=f(94121),x=f(99287),A=f(19292),k=f(99454),M=f(84444),H=f(59905),j=f(47597),L=f(6967),K=f(28794),ne=f(76782),fe=f(37878),i=f(4264),ue=f(21503),me=f(80891),ge=f(13222),ee=f(25940),xe=f(90799),Ie=f(118),He=f(16555),nt="[object Arguments]",Yt="[object Function]",mr="[object Object]",R={};R[nt]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[mr]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[Yt]=R["[object WeakMap]"]=!1,P.exports=function U(re,be,Ke,Xe,pt,Ot){var Lt,an=1&be,hn=2&be,nn=4&be;if(Ke&&(Lt=pt?Ke(re,Xe,pt,Ot):Ke(re)),void 0!==Lt)return Lt;if(!ee(re))return re;var zn=ue(re);if(zn){if(Lt=ne(re),!an)return k(re,Lt)}else{var Nn=K(re),Vr=Nn==Yt||"[object GeneratorFunction]"==Nn;if(me(re))return A(re,an);if(Nn==mr||Nn==nt||Vr&&!pt){if(Lt=hn||Vr?{}:i(re),!an)return hn?H(re,x(Lt,re)):M(re,E(Lt,re))}else{if(!R[Nn])return pt?re:{};Lt=fe(re,Nn,an)}}Ot||(Ot=new p);var Sn=Ot.get(re);if(Sn)return Sn;Ot.set(re,Lt),xe(re)?re.forEach(function(Vn){Lt.add(U(Vn,be,Ke,Vn,re,Ot))}):ge(re)&&re.forEach(function(Vn,ir){Lt.set(ir,U(Vn,be,Ke,ir,re,Ot))});var Mn=zn?void 0:(nn?hn?L:j:hn?He:Ie)(re);return g(Mn||re,function(Vn,ir){Mn&&(Vn=re[ir=Vn]),S(Lt,ir,U(Vn,be,Ke,ir,re,Ot))}),Lt}},78858:(P,W,f)=>{var p=f(25940),g=Object.create,S=function(){function E(){}return function(x){if(!p(x))return{};if(g)return g(x);E.prototype=x;var A=new E;return E.prototype=void 0,A}}();P.exports=S},43132:(P,W,f)=>{var p=f(45184),S=f(16539)(p);P.exports=S},67308:(P,W,f)=>{var p=f(44129);P.exports=function g(S,E,x){for(var A=-1,k=S.length;++A<k;){var M=S[A],H=E(M);if(null!=H&&(void 0===j?H==H&&!p(H):x(H,j)))var j=H,L=M}return L}},33609:(P,W,f)=>{var p=f(43132);P.exports=function g(S,E){var x=[];return p(S,function(A,k,M){E(A,k,M)&&x.push(A)}),x}},65317:P=>{P.exports=function W(f,p,g,S){for(var E=f.length,x=g+(S?1:-1);S?x--:++x<E;)if(p(f[x],x,f))return x;return-1}},50686:(P,W,f)=>{var p=f(85059),g=f(75039);P.exports=function S(E,x,A,k,M){var H=-1,j=E.length;for(A||(A=g),M||(M=[]);++H<j;){var L=E[H];x>0&&A(L)?x>1?S(L,x-1,A,k,M):p(M,L):k||(M[M.length]=L)}return M}},30755:(P,W,f)=>{var g=f(40456)();P.exports=g},45184:(P,W,f)=>{var p=f(30755),g=f(118);P.exports=function S(E,x){return E&&p(E,x,g)}},15456:(P,W,f)=>{var p=f(65456),g=f(68533);P.exports=function S(E,x){for(var A=0,k=(x=p(x,E)).length;null!=E&&A<k;)E=E[g(x[A++])];return A&&A==k?E:void 0}},38247:(P,W,f)=>{var p=f(85059),g=f(21503);P.exports=function S(E,x,A){var k=x(E);return g(E)?k:p(k,A(E))}},93337:(P,W,f)=>{var p=f(60443),g=f(21318),S=f(92902),A=p?p.toStringTag:void 0;P.exports=function k(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":A&&A in Object(M)?g(M):S(M)}},31100:P=>{P.exports=function W(f,p){return f>p}},84781:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function p(g,S){return null!=g&&f.call(g,S)}},69989:P=>{P.exports=function W(f,p){return null!=f&&p in Object(f)}},14164:(P,W,f)=>{var p=f(65317),g=f(70968),S=f(24977);P.exports=function E(x,A,k){return A==A?S(x,A,k):p(x,g,k)}},60186:(P,W,f)=>{var p=f(93337),g=f(72671);P.exports=function E(x){return g(x)&&"[object Arguments]"==p(x)}},85740:(P,W,f)=>{var p=f(58325),g=f(72671);P.exports=function S(E,x,A,k,M){return E===x||(null==E||null==x||!g(E)&&!g(x)?E!=E&&x!=x:p(E,x,A,k,S,M))}},58325:(P,W,f)=>{var p=f(2858),g=f(63914),S=f(78583),E=f(32286),x=f(28794),A=f(21503),k=f(80891),M=f(48159),j="[object Arguments]",L="[object Array]",K="[object Object]",fe=Object.prototype.hasOwnProperty;P.exports=function i(ue,me,ge,ee,xe,Ie){var He=A(ue),_=A(me),Ue=He?L:x(ue),rt=_?L:x(me),nt=(Ue=Ue==j?K:Ue)==K,ot=(rt=rt==j?K:rt)==K,ut=Ue==rt;if(ut&&k(ue)){if(!k(me))return!1;He=!0,nt=!1}if(ut&&!nt)return Ie||(Ie=new p),He||M(ue)?g(ue,me,ge,ee,xe,Ie):S(ue,me,Ue,ge,ee,xe,Ie);if(!(1&ge)){var yt=nt&&fe.call(ue,"__wrapped__"),Mt=ot&&fe.call(me,"__wrapped__");if(yt||Mt){var Yt=yt?ue.value():ue,en=Mt?me.value():me;return Ie||(Ie=new p),xe(Yt,en,ge,ee,Ie)}}return!!ut&&(Ie||(Ie=new p),E(ue,me,ge,ee,xe,Ie))}},97021:(P,W,f)=>{var p=f(28794),g=f(72671);P.exports=function E(x){return g(x)&&"[object Map]"==p(x)}},40431:(P,W,f)=>{var p=f(2858),g=f(85740);P.exports=function x(A,k,M,H){var j=M.length,L=j,K=!H;if(null==A)return!L;for(A=Object(A);j--;){var ne=M[j];if(K&&ne[2]?ne[1]!==A[ne[0]]:!(ne[0]in A))return!1}for(;++j<L;){var fe=(ne=M[j])[0],i=A[fe],ue=ne[1];if(K&&ne[2]){if(void 0===i&&!(fe in A))return!1}else{var me=new p;if(H)var ge=H(i,ue,fe,A,k,me);if(!(void 0===ge?g(ue,i,3,H,me):ge))return!1}}return!0}},70968:P=>{P.exports=function W(f){return f!=f}},37304:(P,W,f)=>{var p=f(75946),g=f(91943),S=f(25940),E=f(52827),A=/^\[object .+?Constructor\]$/,L=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");P.exports=function K(ne){return!(!S(ne)||g(ne))&&(p(ne)?L:A).test(E(ne))}},771:(P,W,f)=>{var p=f(28794),g=f(72671);P.exports=function E(x){return g(x)&&"[object Set]"==p(x)}},1083:(P,W,f)=>{var p=f(93337),g=f(96231),S=f(72671),ut={};ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut["[object Arguments]"]=ut["[object Array]"]=ut["[object ArrayBuffer]"]=ut["[object Boolean]"]=ut["[object DataView]"]=ut["[object Date]"]=ut["[object Error]"]=ut["[object Function]"]=ut["[object Map]"]=ut["[object Number]"]=ut["[object Object]"]=ut["[object RegExp]"]=ut["[object Set]"]=ut["[object String]"]=ut["[object WeakMap]"]=!1,P.exports=function yt(Mt){return S(Mt)&&g(Mt.length)&&!!ut[p(Mt)]}},96517:(P,W,f)=>{var p=f(98133),g=f(9458),S=f(32608),E=f(21503),x=f(87495);P.exports=function A(k){return"function"==typeof k?k:null==k?S:"object"==typeof k?E(k)?g(k[0],k[1]):p(k):x(k)}},81172:(P,W,f)=>{var p=f(45488),g=f(85491),E=Object.prototype.hasOwnProperty;P.exports=function x(A){if(!p(A))return g(A);var k=[];for(var M in Object(A))E.call(A,M)&&"constructor"!=M&&k.push(M);return k}},92809:(P,W,f)=>{var p=f(25940),g=f(45488),S=f(32158),x=Object.prototype.hasOwnProperty;P.exports=function A(k){if(!p(k))return S(k);var M=g(k),H=[];for(var j in k)"constructor"==j&&(M||!x.call(k,j))||H.push(j);return H}},99069:P=>{P.exports=function W(f,p){return f<p}},92046:(P,W,f)=>{var p=f(43132),g=f(56507);P.exports=function S(E,x){var A=-1,k=g(E)?Array(E.length):[];return p(E,function(M,H,j){k[++A]=x(M,H,j)}),k}},98133:(P,W,f)=>{var p=f(40431),g=f(22379),S=f(642);P.exports=function E(x){var A=g(x);return 1==A.length&&A[0][2]?S(A[0][0],A[0][1]):function(k){return k===x||p(k,x,A)}}},9458:(P,W,f)=>{var p=f(85740),g=f(8817),S=f(11172),E=f(45352),x=f(22442),A=f(642),k=f(68533);P.exports=function j(L,K){return E(L)&&x(K)?A(k(L),K):function(ne){var fe=g(ne,L);return void 0===fe&&fe===K?S(ne,L):p(K,fe,3)}}},73842:(P,W,f)=>{var p=f(2858),g=f(49276),S=f(30755),E=f(33675),x=f(25940),A=f(16555),k=f(99351);P.exports=function M(H,j,L,K,ne){H!==j&&S(j,function(fe,i){if(ne||(ne=new p),x(fe))E(H,j,i,L,M,K,ne);else{var ue=K?K(k(H,i),fe,i+"",H,j,ne):void 0;void 0===ue&&(ue=fe),g(H,i,ue)}},A)}},33675:(P,W,f)=>{var p=f(49276),g=f(19292),S=f(65208),E=f(99454),x=f(4264),A=f(77151),k=f(21503),M=f(21330),H=f(80891),j=f(75946),L=f(25940),K=f(97614),ne=f(48159),fe=f(99351),i=f(8067);P.exports=function ue(me,ge,ee,xe,Ie,He,_){var Ue=fe(me,ee),rt=fe(ge,ee),nt=_.get(rt);if(nt)p(me,ee,nt);else{var ot=He?He(Ue,rt,ee+"",me,ge,_):void 0,ut=void 0===ot;if(ut){var yt=k(rt),Mt=!yt&&H(rt),Yt=!yt&&!Mt&&ne(rt);ot=rt,yt||Mt||Yt?k(Ue)?ot=Ue:M(Ue)?ot=E(Ue):Mt?(ut=!1,ot=g(rt,!0)):Yt?(ut=!1,ot=S(rt,!0)):ot=[]:K(rt)||A(rt)?(ot=Ue,A(Ue)?ot=i(Ue):(!L(Ue)||j(Ue))&&(ot=x(rt))):ut=!1}ut&&(_.set(rt,ot),Ie(ot,rt,xe,He,_),_.delete(rt)),p(me,ee,ot)}}},6119:(P,W,f)=>{var p=f(84633),g=f(15456),S=f(96517),E=f(92046),x=f(18750),A=f(85647),k=f(41215),M=f(32608),H=f(21503);P.exports=function j(L,K,ne){K=K.length?p(K,function(ue){return H(ue)?function(me){return g(me,1===ue.length?ue[0]:ue)}:ue}):[M];var fe=-1;K=p(K,A(S));var i=E(L,function(ue,me,ge){return{criteria:p(K,function(xe){return xe(ue)}),index:++fe,value:ue}});return x(i,function(ue,me){return k(ue,me,ne)})}},83021:(P,W,f)=>{var p=f(95495),g=f(11172);P.exports=function S(E,x){return p(E,x,function(A,k){return g(E,k)})}},95495:(P,W,f)=>{var p=f(15456),g=f(55963),S=f(65456);P.exports=function E(x,A,k){for(var M=-1,H=A.length,j={};++M<H;){var L=A[M],K=p(x,L);k(K,L)&&g(j,S(L,x),K)}return j}},11847:P=>{P.exports=function W(f){return function(p){return null==p?void 0:p[f]}}},39222:(P,W,f)=>{var p=f(15456);P.exports=function g(S){return function(E){return p(E,S)}}},16307:P=>{var W=Math.ceil,f=Math.max;P.exports=function p(g,S,E,x){for(var A=-1,k=f(W((S-g)/(E||1)),0),M=Array(k);k--;)M[x?k:++A]=g,g+=E;return M}},13570:P=>{P.exports=function W(f,p,g,S,E){return E(f,function(x,A,k){g=S?(S=!1,x):p(g,x,A,k)}),g}},23269:(P,W,f)=>{var p=f(32608),g=f(53983),S=f(72185);P.exports=function E(x,A){return S(g(x,A,p),x+"")}},55963:(P,W,f)=>{var p=f(89719),g=f(65456),S=f(58442),E=f(25940),x=f(68533);P.exports=function A(k,M,H,j){if(!E(k))return k;for(var L=-1,K=(M=g(M,k)).length,ne=K-1,fe=k;null!=fe&&++L<K;){var i=x(M[L]),ue=H;if("__proto__"===i||"constructor"===i||"prototype"===i)return k;if(L!=ne){var me=fe[i];void 0===(ue=j?j(me,i,fe):void 0)&&(ue=E(me)?me:S(M[L+1])?[]:{})}p(fe,i,ue),fe=fe[i]}return k}},69510:(P,W,f)=>{var p=f(76684),g=f(56713),S=f(32608);P.exports=g?function(x,A){return g(x,"toString",{configurable:!0,enumerable:!1,value:p(A),writable:!0})}:S},18750:P=>{P.exports=function W(f,p){var g=f.length;for(f.sort(p);g--;)f[g]=f[g].value;return f}},85334:P=>{P.exports=function W(f,p){for(var g=-1,S=Array(f);++g<f;)S[g]=p(g);return S}},93935:(P,W,f)=>{var p=f(60443),g=f(84633),S=f(21503),E=f(44129),A=p?p.prototype:void 0,k=A?A.toString:void 0;P.exports=function M(H){if("string"==typeof H)return H;if(S(H))return g(H,M)+"";if(E(H))return k?k.call(H):"";var j=H+"";return"0"==j&&1/H==-1/0?"-0":j}},83348:(P,W,f)=>{var p=f(42760),g=/^\s+/;P.exports=function S(E){return E&&E.slice(0,p(E)+1).replace(g,"")}},85647:P=>{P.exports=function W(f){return function(p){return f(p)}}},80707:(P,W,f)=>{var p=f(58849),g=f(61253),S=f(37609),E=f(25972),x=f(14575),A=f(24174);P.exports=function M(H,j,L){var K=-1,ne=g,fe=H.length,i=!0,ue=[],me=ue;if(L)i=!1,ne=S;else if(fe>=200){var ge=j?null:x(H);if(ge)return A(ge);i=!1,ne=E,me=new p}else me=j?[]:ue;e:for(;++K<fe;){var ee=H[K],xe=j?j(ee):ee;if(ee=L||0!==ee?ee:0,i&&xe==xe){for(var Ie=me.length;Ie--;)if(me[Ie]===xe)continue e;j&&me.push(xe),ue.push(ee)}else ne(me,xe,L)||(me!==ue&&me.push(xe),ue.push(ee))}return ue}},19179:(P,W,f)=>{var p=f(84633);P.exports=function g(S,E){return p(E,function(x){return S[x]})}},38645:P=>{P.exports=function W(f,p,g){for(var S=-1,E=f.length,x=p.length,A={};++S<E;)g(A,f[S],S<x?p[S]:void 0);return A}},25972:P=>{P.exports=function W(f,p){return f.has(p)}},21481:(P,W,f)=>{var p=f(32608);P.exports=function g(S){return"function"==typeof S?S:p}},65456:(P,W,f)=>{var p=f(21503),g=f(45352),S=f(32855),E=f(73943);P.exports=function x(A,k){return p(A)?A:g(A,k)?[A]:S(E(A))}},43362:(P,W,f)=>{var p=f(73457);P.exports=function g(S){var E=new S.constructor(S.byteLength);return new p(E).set(new p(S)),E}},19292:(P,W,f)=>{P=f.nmd(P);var p=f(12119),g=W&&!W.nodeType&&W,S=g&&P&&!P.nodeType&&P,x=S&&S.exports===g?p.Buffer:void 0,A=x?x.allocUnsafe:void 0;P.exports=function k(M,H){if(H)return M.slice();var j=M.length,L=A?A(j):new M.constructor(j);return M.copy(L),L}},17e3:(P,W,f)=>{var p=f(43362);P.exports=function g(S,E){var x=E?p(S.buffer):S.buffer;return new S.constructor(x,S.byteOffset,S.byteLength)}},74098:P=>{var W=/\w*$/;P.exports=function f(p){var g=new p.constructor(p.source,W.exec(p));return g.lastIndex=p.lastIndex,g}},62533:(P,W,f)=>{var p=f(60443),g=p?p.prototype:void 0,S=g?g.valueOf:void 0;P.exports=function E(x){return S?Object(S.call(x)):{}}},65208:(P,W,f)=>{var p=f(43362);P.exports=function g(S,E){var x=E?p(S.buffer):S.buffer;return new S.constructor(x,S.byteOffset,S.length)}},13443:(P,W,f)=>{var p=f(44129);P.exports=function g(S,E){if(S!==E){var x=void 0!==S,A=null===S,k=S==S,M=p(S),H=void 0!==E,j=null===E,L=E==E,K=p(E);if(!j&&!K&&!M&&S>E||M&&H&&L&&!j&&!K||A&&H&&L||!x&&L||!k)return 1;if(!A&&!M&&!K&&S<E||K&&x&&k&&!A&&!M||j&&x&&k||!H&&k||!L)return-1}return 0}},41215:(P,W,f)=>{var p=f(13443);P.exports=function g(S,E,x){for(var A=-1,k=S.criteria,M=E.criteria,H=k.length,j=x.length;++A<H;){var L=p(k[A],M[A]);if(L)return A>=j?L:L*("desc"==x[A]?-1:1)}return S.index-E.index}},99454:P=>{P.exports=function W(f,p){var g=-1,S=f.length;for(p||(p=Array(S));++g<S;)p[g]=f[g];return p}},31989:(P,W,f)=>{var p=f(89719),g=f(85683);P.exports=function S(E,x,A,k){var M=!A;A||(A={});for(var H=-1,j=x.length;++H<j;){var L=x[H],K=k?k(A[L],E[L],L,A,E):void 0;void 0===K&&(K=E[L]),M?g(A,L,K):p(A,L,K)}return A}},84444:(P,W,f)=>{var p=f(31989),g=f(39383);P.exports=function S(E,x){return p(E,g(E),x)}},59905:(P,W,f)=>{var p=f(31989),g=f(53051);P.exports=function S(E,x){return p(E,g(E),x)}},24610:(P,W,f)=>{var p=f(12119);P.exports=p["__core-js_shared__"]},84944:(P,W,f)=>{var p=f(23269),g=f(93342);P.exports=function S(E){return p(function(x,A){var k=-1,M=A.length,H=M>1?A[M-1]:void 0,j=M>2?A[2]:void 0;for(H=E.length>3&&"function"==typeof H?(M--,H):void 0,j&&g(A[0],A[1],j)&&(H=M<3?void 0:H,M=1),x=Object(x);++k<M;){var L=A[k];L&&E(x,L,k,H)}return x})}},16539:(P,W,f)=>{var p=f(56507);P.exports=function g(S,E){return function(x,A){if(null==x)return x;if(!p(x))return S(x,A);for(var k=x.length,M=E?k:-1,H=Object(x);(E?M--:++M<k)&&!1!==A(H[M],M,H););return x}}},40456:P=>{P.exports=function W(f){return function(p,g,S){for(var E=-1,x=Object(p),A=S(p),k=A.length;k--;){var M=A[f?k:++E];if(!1===g(x[M],M,x))break}return p}}},24653:(P,W,f)=>{var p=f(96517),g=f(56507),S=f(118);P.exports=function E(x){return function(A,k,M){var H=Object(A);if(!g(A)){var j=p(k,3);A=S(A),k=function(K){return j(H[K],K,H)}}var L=x(A,k,M);return L>-1?H[j?A[L]:L]:void 0}}},97509:(P,W,f)=>{var p=f(16307),g=f(93342),S=f(12232);P.exports=function E(x){return function(A,k,M){return M&&"number"!=typeof M&&g(A,k,M)&&(k=M=void 0),A=S(A),void 0===k?(k=A,A=0):k=S(k),M=void 0===M?A<k?1:-1:S(M),p(A,k,M,x)}}},14575:(P,W,f)=>{var p=f(46323),g=f(12552),S=f(24174),x=p&&1/S(new p([,-0]))[1]==1/0?function(A){return new p(A)}:g;P.exports=x},56713:(P,W,f)=>{var p=f(53436),g=function(){try{var S=p(Object,"defineProperty");return S({},"",{}),S}catch(E){}}();P.exports=g},63914:(P,W,f)=>{var p=f(58849),g=f(79503),S=f(25972);P.exports=function A(k,M,H,j,L,K){var ne=1&H,fe=k.length,i=M.length;if(fe!=i&&!(ne&&i>fe))return!1;var ue=K.get(k),me=K.get(M);if(ue&&me)return ue==M&&me==k;var ge=-1,ee=!0,xe=2&H?new p:void 0;for(K.set(k,M),K.set(M,k);++ge<fe;){var Ie=k[ge],He=M[ge];if(j)var _=ne?j(He,Ie,ge,M,k,K):j(Ie,He,ge,k,M,K);if(void 0!==_){if(_)continue;ee=!1;break}if(xe){if(!g(M,function(Ue,rt){if(!S(xe,rt)&&(Ie===Ue||L(Ie,Ue,H,j,K)))return xe.push(rt)})){ee=!1;break}}else if(Ie!==He&&!L(Ie,He,H,j,K)){ee=!1;break}}return K.delete(k),K.delete(M),ee}},78583:(P,W,f)=>{var p=f(60443),g=f(73457),S=f(20217),E=f(63914),x=f(83205),A=f(24174),xe=p?p.prototype:void 0,Ie=xe?xe.valueOf:void 0;P.exports=function He(_,Ue,rt,nt,ot,ut,yt){switch(rt){case"[object DataView]":if(_.byteLength!=Ue.byteLength||_.byteOffset!=Ue.byteOffset)return!1;_=_.buffer,Ue=Ue.buffer;case"[object ArrayBuffer]":return!(_.byteLength!=Ue.byteLength||!ut(new g(_),new g(Ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+_,+Ue);case"[object Error]":return _.name==Ue.name&&_.message==Ue.message;case"[object RegExp]":case"[object String]":return _==Ue+"";case"[object Map]":var Mt=x;case"[object Set]":if(Mt||(Mt=A),_.size!=Ue.size&&!(1&nt))return!1;var en=yt.get(_);if(en)return en==Ue;nt|=2,yt.set(_,Ue);var Dt=E(Mt(_),Mt(Ue),nt,ot,ut,yt);return yt.delete(_),Dt;case"[object Symbol]":if(Ie)return Ie.call(_)==Ie.call(Ue)}return!1}},32286:(P,W,f)=>{var p=f(47597),E=Object.prototype.hasOwnProperty;P.exports=function x(A,k,M,H,j,L){var K=1&M,ne=p(A),fe=ne.length;if(fe!=p(k).length&&!K)return!1;for(var me=fe;me--;){var ge=ne[me];if(!(K?ge in k:E.call(k,ge)))return!1}var ee=L.get(A),xe=L.get(k);if(ee&&xe)return ee==k&&xe==A;var Ie=!0;L.set(A,k),L.set(k,A);for(var He=K;++me<fe;){var _=A[ge=ne[me]],Ue=k[ge];if(H)var rt=K?H(Ue,_,ge,k,A,L):H(_,Ue,ge,A,k,L);if(!(void 0===rt?_===Ue||j(_,Ue,M,H,L):rt)){Ie=!1;break}He||(He="constructor"==ge)}if(Ie&&!He){var nt=A.constructor,ot=k.constructor;nt!=ot&&"constructor"in A&&"constructor"in k&&!("function"==typeof nt&&nt instanceof nt&&"function"==typeof ot&&ot instanceof ot)&&(Ie=!1)}return L.delete(A),L.delete(k),Ie}},3975:(P,W,f)=>{var p=f(22274),g=f(53983),S=f(72185);P.exports=function E(x){return S(g(x,void 0,p),x+"")}},79122:P=>{var W="object"==typeof global&&global&&global.Object===Object&&global;P.exports=W},47597:(P,W,f)=>{var p=f(38247),g=f(39383),S=f(118);P.exports=function E(x){return p(x,S,g)}},6967:(P,W,f)=>{var p=f(38247),g=f(53051),S=f(16555);P.exports=function E(x){return p(x,S,g)}},54537:(P,W,f)=>{var p=f(23819);P.exports=function g(S,E){var x=S.__data__;return p(E)?x["string"==typeof E?"string":"hash"]:x.map}},22379:(P,W,f)=>{var p=f(22442),g=f(118);P.exports=function S(E){for(var x=g(E),A=x.length;A--;){var k=x[A],M=E[k];x[A]=[k,M,p(M)]}return x}},53436:(P,W,f)=>{var p=f(37304),g=f(51990);P.exports=function S(E,x){var A=g(E,x);return p(A)?A:void 0}},29519:(P,W,f)=>{var g=f(69385)(Object.getPrototypeOf,Object);P.exports=g},21318:(P,W,f)=>{var p=f(60443),g=Object.prototype,S=g.hasOwnProperty,E=g.toString,x=p?p.toStringTag:void 0;P.exports=function A(k){var M=S.call(k,x),H=k[x];try{k[x]=void 0;var j=!0}catch(K){}var L=E.call(k);return j&&(M?k[x]=H:delete k[x]),L}},39383:(P,W,f)=>{var p=f(69779),g=f(49975),E=Object.prototype.propertyIsEnumerable,x=Object.getOwnPropertySymbols;P.exports=x?function(k){return null==k?[]:(k=Object(k),p(x(k),function(M){return E.call(k,M)}))}:g},53051:(P,W,f)=>{var p=f(85059),g=f(29519),S=f(39383),E=f(49975);P.exports=Object.getOwnPropertySymbols?function(k){for(var M=[];k;)p(M,S(k)),k=g(k);return M}:E},28794:(P,W,f)=>{var p=f(37244),g=f(51501),S=f(44267),E=f(46323),x=f(24243),A=f(93337),k=f(52827),M="[object Map]",j="[object Promise]",L="[object Set]",K="[object WeakMap]",ne="[object DataView]",fe=k(p),i=k(g),ue=k(S),me=k(E),ge=k(x),ee=A;(p&&ee(new p(new ArrayBuffer(1)))!=ne||g&&ee(new g)!=M||S&&ee(S.resolve())!=j||E&&ee(new E)!=L||x&&ee(new x)!=K)&&(ee=function(xe){var Ie=A(xe),He="[object Object]"==Ie?xe.constructor:void 0,_=He?k(He):"";if(_)switch(_){case fe:return ne;case i:return M;case ue:return j;case me:return L;case ge:return K}return Ie}),P.exports=ee},51990:P=>{P.exports=function W(f,p){return null==f?void 0:f[p]}},47283:(P,W,f)=>{var p=f(65456),g=f(77151),S=f(21503),E=f(58442),x=f(96231),A=f(68533);P.exports=function k(M,H,j){for(var L=-1,K=(H=p(H,M)).length,ne=!1;++L<K;){var fe=A(H[L]);if(!(ne=null!=M&&j(M,fe)))break;M=M[fe]}return ne||++L!=K?ne:!!(K=null==M?0:M.length)&&x(K)&&E(fe,K)&&(S(M)||g(M))}},77609:P=>{var A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");P.exports=function k(M){return A.test(M)}},64312:(P,W,f)=>{var p=f(60862);P.exports=function g(){this.__data__=p?p(null):{},this.size=0}},46421:P=>{P.exports=function W(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}},15764:(P,W,f)=>{var p=f(60862),E=Object.prototype.hasOwnProperty;P.exports=function x(A){var k=this.__data__;if(p){var M=k[A];return"__lodash_hash_undefined__"===M?void 0:M}return E.call(k,A)?k[A]:void 0}},18685:(P,W,f)=>{var p=f(60862),S=Object.prototype.hasOwnProperty;P.exports=function E(x){var A=this.__data__;return p?void 0!==A[x]:S.call(A,x)}},26676:(P,W,f)=>{var p=f(60862);P.exports=function S(E,x){var A=this.__data__;return this.size+=this.has(E)?0:1,A[E]=p&&void 0===x?"__lodash_hash_undefined__":x,this}},76782:P=>{var f=Object.prototype.hasOwnProperty;P.exports=function p(g){var S=g.length,E=new g.constructor(S);return S&&"string"==typeof g[0]&&f.call(g,"index")&&(E.index=g.index,E.input=g.input),E}},37878:(P,W,f)=>{var p=f(43362),g=f(17e3),S=f(74098),E=f(62533),x=f(65208);P.exports=function rt(nt,ot,ut){var yt=nt.constructor;switch(ot){case"[object ArrayBuffer]":return p(nt);case"[object Boolean]":case"[object Date]":return new yt(+nt);case"[object DataView]":return g(nt,ut);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(nt,ut);case"[object Map]":case"[object Set]":return new yt;case"[object Number]":case"[object String]":return new yt(nt);case"[object RegExp]":return S(nt);case"[object Symbol]":return E(nt)}}},4264:(P,W,f)=>{var p=f(78858),g=f(29519),S=f(45488);P.exports=function E(x){return"function"!=typeof x.constructor||S(x)?{}:p(g(x))}},75039:(P,W,f)=>{var p=f(60443),g=f(77151),S=f(21503),E=p?p.isConcatSpreadable:void 0;P.exports=function x(A){return S(A)||g(A)||!!(E&&A&&A[E])}},58442:P=>{var f=/^(?:0|[1-9]\d*)$/;P.exports=function p(g,S){var E=typeof g;return!!(S=null==S?9007199254740991:S)&&("number"==E||"symbol"!=E&&f.test(g))&&g>-1&&g%1==0&&g<S}},93342:(P,W,f)=>{var p=f(20217),g=f(56507),S=f(58442),E=f(25940);P.exports=function x(A,k,M){if(!E(M))return!1;var H=typeof k;return!!("number"==H?g(M)&&S(k,M.length):"string"==H&&k in M)&&p(M[k],A)}},45352:(P,W,f)=>{var p=f(21503),g=f(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;P.exports=function x(A,k){if(p(A))return!1;var M=typeof A;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=A&&!g(A))||E.test(A)||!S.test(A)||null!=k&&A in Object(k)}},23819:P=>{P.exports=function W(f){var p=typeof f;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==f:null===f}},91943:(P,W,f)=>{var E,p=f(24610),g=(E=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"";P.exports=function S(E){return!!g&&g in E}},45488:P=>{var W=Object.prototype;P.exports=function f(p){var g=p&&p.constructor;return p===("function"==typeof g&&g.prototype||W)}},22442:(P,W,f)=>{var p=f(25940);P.exports=function g(S){return S==S&&!p(S)}},41840:P=>{P.exports=function W(){this.__data__=[],this.size=0}},34378:(P,W,f)=>{var p=f(43503),S=Array.prototype.splice;P.exports=function E(x){var A=this.__data__,k=p(A,x);return!(k<0||(k==A.length-1?A.pop():S.call(A,k,1),--this.size,0))}},54981:(P,W,f)=>{var p=f(43503);P.exports=function g(S){var E=this.__data__,x=p(E,S);return x<0?void 0:E[x][1]}},67343:(P,W,f)=>{var p=f(43503);P.exports=function g(S){return p(this.__data__,S)>-1}},98895:(P,W,f)=>{var p=f(43503);P.exports=function g(S,E){var x=this.__data__,A=p(x,S);return A<0?(++this.size,x.push([S,E])):x[A][1]=E,this}},10638:(P,W,f)=>{var p=f(54994),g=f(9215),S=f(51501);P.exports=function E(){this.size=0,this.__data__={hash:new p,map:new(S||g),string:new p}}},11184:(P,W,f)=>{var p=f(54537);P.exports=function g(S){var E=p(this,S).delete(S);return this.size-=E?1:0,E}},70866:(P,W,f)=>{var p=f(54537);P.exports=function g(S){return p(this,S).get(S)}},43771:(P,W,f)=>{var p=f(54537);P.exports=function g(S){return p(this,S).has(S)}},51772:(P,W,f)=>{var p=f(54537);P.exports=function g(S,E){var x=p(this,S),A=x.size;return x.set(S,E),this.size+=x.size==A?0:1,this}},83205:P=>{P.exports=function W(f){var p=-1,g=Array(f.size);return f.forEach(function(S,E){g[++p]=[E,S]}),g}},642:P=>{P.exports=function W(f,p){return function(g){return null!=g&&g[f]===p&&(void 0!==p||f in Object(g))}}},90719:(P,W,f)=>{var p=f(30535);P.exports=function S(E){var x=p(E,function(k){return 500===A.size&&A.clear(),k}),A=x.cache;return x}},60862:(P,W,f)=>{var g=f(53436)(Object,"create");P.exports=g},85491:(P,W,f)=>{var g=f(69385)(Object.keys,Object);P.exports=g},32158:P=>{P.exports=function W(f){var p=[];if(null!=f)for(var g in Object(f))p.push(g);return p}},73597:(P,W,f)=>{P=f.nmd(P);var p=f(79122),g=W&&!W.nodeType&&W,S=g&&P&&!P.nodeType&&P,x=S&&S.exports===g&&p.process,A=function(){try{return S&&S.require&&S.require("util").types||x&&x.binding&&x.binding("util")}catch(M){}}();P.exports=A},92902:P=>{var f=Object.prototype.toString;P.exports=function p(g){return f.call(g)}},69385:P=>{P.exports=function W(f,p){return function(g){return f(p(g))}}},53983:(P,W,f)=>{var p=f(26999),g=Math.max;P.exports=function S(E,x,A){return x=g(void 0===x?E.length-1:x,0),function(){for(var k=arguments,M=-1,H=g(k.length-x,0),j=Array(H);++M<H;)j[M]=k[x+M];M=-1;for(var L=Array(x+1);++M<x;)L[M]=k[M];return L[x]=A(j),p(E,this,L)}}},12119:(P,W,f)=>{var p=f(79122),g="object"==typeof self&&self&&self.Object===Object&&self,S=p||g||Function("return this")();P.exports=S},99351:P=>{P.exports=function W(f,p){if(("constructor"!==p||"function"!=typeof f[p])&&"__proto__"!=p)return f[p]}},4600:P=>{P.exports=function f(p){return this.__data__.set(p,"__lodash_hash_undefined__"),this}},31387:P=>{P.exports=function W(f){return this.__data__.has(f)}},24174:P=>{P.exports=function W(f){var p=-1,g=Array(f.size);return f.forEach(function(S){g[++p]=S}),g}},72185:(P,W,f)=>{var p=f(69510),S=f(10029)(p);P.exports=S},10029:P=>{var p=Date.now;P.exports=function g(S){var E=0,x=0;return function(){var A=p(),k=16-(A-x);if(x=A,k>0){if(++E>=800)return arguments[0]}else E=0;return S.apply(void 0,arguments)}}},13720:(P,W,f)=>{var p=f(9215);P.exports=function g(){this.__data__=new p,this.size=0}},64410:P=>{P.exports=function W(f){var p=this.__data__,g=p.delete(f);return this.size=p.size,g}},45576:P=>{P.exports=function W(f){return this.__data__.get(f)}},22247:P=>{P.exports=function W(f){return this.__data__.has(f)}},41585:(P,W,f)=>{var p=f(9215),g=f(51501),S=f(99850);P.exports=function x(A,k){var M=this.__data__;if(M instanceof p){var H=M.__data__;if(!g||H.length<199)return H.push([A,k]),this.size=++M.size,this;M=this.__data__=new S(H)}return M.set(A,k),this.size=M.size,this}},24977:P=>{P.exports=function W(f,p,g){for(var S=g-1,E=f.length;++S<E;)if(f[S]===p)return S;return-1}},52315:(P,W,f)=>{var p=f(75481),g=f(77609),S=f(81149);P.exports=function E(x){return g(x)?S(x):p(x)}},32855:(P,W,f)=>{var p=f(90719),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,E=p(function(x){var A=[];return 46===x.charCodeAt(0)&&A.push(""),x.replace(g,function(k,M,H,j){A.push(H?j.replace(S,"$1"):M||k)}),A});P.exports=E},68533:(P,W,f)=>{var p=f(44129);P.exports=function S(E){if("string"==typeof E||p(E))return E;var x=E+"";return"0"==x&&1/E==-1/0?"-0":x}},52827:P=>{var f=Function.prototype.toString;P.exports=function p(g){if(null!=g){try{return f.call(g)}catch(S){}try{return g+""}catch(S){}}return""}},42760:P=>{var W=/\s/;P.exports=function f(p){for(var g=p.length;g--&&W.test(p.charAt(g)););return g}},81149:P=>{var W="\\ud800-\\udfff",x="["+W+"]",A="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",k="\\ud83c[\\udffb-\\udfff]",H="[^"+W+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",ne="(?:"+A+"|"+k+")?",fe="[\\ufe0e\\ufe0f]?",ue=fe+ne+"(?:\\u200d(?:"+[H,j,L].join("|")+")"+fe+ne+")*",me="(?:"+[H+A+"?",A,j,L,x].join("|")+")",ge=RegExp(k+"(?="+k+")|"+me+ue,"g");P.exports=function ee(xe){for(var Ie=ge.lastIndex=0;ge.test(xe);)++Ie;return Ie}},11094:(P,W,f)=>{var p=f(44462);P.exports=function S(E){return p(E,4)}},90733:(P,W,f)=>{var p=f(44462);P.exports=function E(x){return p(x,5)}},76684:P=>{P.exports=function W(f){return function(){return f}}},28800:(P,W,f)=>{var p=f(23269),g=f(20217),S=f(93342),E=f(16555),x=Object.prototype,A=x.hasOwnProperty,k=p(function(M,H){M=Object(M);var j=-1,L=H.length,K=L>2?H[2]:void 0;for(K&&S(H[0],H[1],K)&&(L=1);++j<L;)for(var ne=H[j],fe=E(ne),i=-1,ue=fe.length;++i<ue;){var me=fe[i],ge=M[me];(void 0===ge||g(ge,x[me])&&!A.call(M,me))&&(M[me]=ne[me])}return M});P.exports=k},35474:(P,W,f)=>{P.exports=f(89851)},20217:P=>{P.exports=function W(f,p){return f===p||f!=f&&p!=p}},35281:(P,W,f)=>{var p=f(69779),g=f(33609),S=f(96517),E=f(21503);P.exports=function x(A,k){return(E(A)?p:g)(A,S(k,3))}},62516:(P,W,f)=>{var S=f(24653)(f(36397));P.exports=S},36397:(P,W,f)=>{var p=f(65317),g=f(96517),S=f(44401),E=Math.max;P.exports=function x(A,k,M){var H=null==A?0:A.length;if(!H)return-1;var j=null==M?0:S(M);return j<0&&(j=E(H+j,0)),p(A,g(k,3),j)}},22274:(P,W,f)=>{var p=f(50686);P.exports=function g(S){return null!=S&&S.length?p(S,1):[]}},89851:(P,W,f)=>{var p=f(96837),g=f(43132),S=f(21481),E=f(21503);P.exports=function x(A,k){return(E(A)?p:g)(A,S(k))}},41176:(P,W,f)=>{var p=f(30755),g=f(21481),S=f(16555);P.exports=function E(x,A){return null==x?x:p(x,g(A),S)}},8817:(P,W,f)=>{var p=f(15456);P.exports=function g(S,E,x){var A=null==S?void 0:p(S,E);return void 0===A?x:A}},54842:(P,W,f)=>{var p=f(84781),g=f(47283);P.exports=function S(E,x){return null!=E&&g(E,x,p)}},11172:(P,W,f)=>{var p=f(69989),g=f(47283);P.exports=function S(E,x){return null!=E&&g(E,x,p)}},32608:P=>{P.exports=function W(f){return f}},77151:(P,W,f)=>{var p=f(60186),g=f(72671),S=Object.prototype,E=S.hasOwnProperty,x=S.propertyIsEnumerable,A=p(function(){return arguments}())?p:function(k){return g(k)&&E.call(k,"callee")&&!x.call(k,"callee")};P.exports=A},21503:P=>{P.exports=Array.isArray},56507:(P,W,f)=>{var p=f(75946),g=f(96231);P.exports=function S(E){return null!=E&&g(E.length)&&!p(E)}},21330:(P,W,f)=>{var p=f(56507),g=f(72671);P.exports=function S(E){return g(E)&&p(E)}},80891:(P,W,f)=>{P=f.nmd(P);var p=f(12119),g=f(63580),S=W&&!W.nodeType&&W,E=S&&P&&!P.nodeType&&P,A=E&&E.exports===S?p.Buffer:void 0;P.exports=(A?A.isBuffer:void 0)||g},71973:(P,W,f)=>{var p=f(81172),g=f(28794),S=f(77151),E=f(21503),x=f(56507),A=f(80891),k=f(45488),M=f(48159),K=Object.prototype.hasOwnProperty;P.exports=function ne(fe){if(null==fe)return!0;if(x(fe)&&(E(fe)||"string"==typeof fe||"function"==typeof fe.splice||A(fe)||M(fe)||S(fe)))return!fe.length;var i=g(fe);if("[object Map]"==i||"[object Set]"==i)return!fe.size;if(k(fe))return!p(fe).length;for(var ue in fe)if(K.call(fe,ue))return!1;return!0}},75946:(P,W,f)=>{var p=f(93337),g=f(25940);P.exports=function k(M){if(!g(M))return!1;var H=p(M);return"[object Function]"==H||"[object GeneratorFunction]"==H||"[object AsyncFunction]"==H||"[object Proxy]"==H}},96231:P=>{P.exports=function f(p){return"number"==typeof p&&p>-1&&p%1==0&&p<=9007199254740991}},13222:(P,W,f)=>{var p=f(97021),g=f(85647),S=f(73597),E=S&&S.isMap,x=E?g(E):p;P.exports=x},25940:P=>{P.exports=function W(f){var p=typeof f;return null!=f&&("object"==p||"function"==p)}},72671:P=>{P.exports=function W(f){return null!=f&&"object"==typeof f}},97614:(P,W,f)=>{var p=f(93337),g=f(29519),S=f(72671),k=Function.prototype.toString,M=Object.prototype.hasOwnProperty,H=k.call(Object);P.exports=function j(L){if(!S(L)||"[object Object]"!=p(L))return!1;var K=g(L);if(null===K)return!0;var ne=M.call(K,"constructor")&&K.constructor;return"function"==typeof ne&&ne instanceof ne&&k.call(ne)==H}},90799:(P,W,f)=>{var p=f(771),g=f(85647),S=f(73597),E=S&&S.isSet,x=E?g(E):p;P.exports=x},30248:(P,W,f)=>{var p=f(93337),g=f(21503),S=f(72671);P.exports=function x(A){return"string"==typeof A||!g(A)&&S(A)&&"[object String]"==p(A)}},44129:(P,W,f)=>{var p=f(93337),g=f(72671);P.exports=function E(x){return"symbol"==typeof x||g(x)&&"[object Symbol]"==p(x)}},48159:(P,W,f)=>{var p=f(1083),g=f(85647),S=f(73597),E=S&&S.isTypedArray,x=E?g(E):p;P.exports=x},34235:P=>{P.exports=function W(f){return void 0===f}},118:(P,W,f)=>{var p=f(72271),g=f(81172),S=f(56507);P.exports=function E(x){return S(x)?p(x):g(x)}},16555:(P,W,f)=>{var p=f(72271),g=f(92809),S=f(56507);P.exports=function E(x){return S(x)?p(x,!0):g(x)}},25809:P=>{P.exports=function W(f){var p=null==f?0:f.length;return p?f[p-1]:void 0}},17489:function(P,W,f){var p;P=f.nmd(P),function(){var g,A="Expected a function",M="__lodash_hash_undefined__",j="__lodash_placeholder__",_=128,Dt=1/0,Ln=9007199254740991,rr=4294967295,Fn=[["ary",_],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],$e="[object Arguments]",tt="[object Array]",_t="[object Boolean]",Ft="[object Date]",kt="[object Error]",jn="[object Function]",fi="[object GeneratorFunction]",tn="[object Map]",Xt="[object Number]",U="[object Object]",re="[object Promise]",Ke="[object RegExp]",Xe="[object Set]",pt="[object String]",Ot="[object Symbol]",an="[object WeakMap]",nn="[object ArrayBuffer]",zn="[object DataView]",Nn="[object Float32Array]",Vr="[object Float64Array]",Sn="[object Int8Array]",Pt="[object Int16Array]",Mn="[object Int32Array]",Vn="[object Uint8Array]",ir="[object Uint8ClampedArray]",Br="[object Uint16Array]",qn="[object Uint32Array]",Kn=/\b__p \+= '';/g,So=/\b(__p \+=) '' \+/g,ga=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39);/g,To=/[&<>"']/g,ye=RegExp(ro.source),Kr=RegExp(To.source),Vi=/<%-([\s\S]+?)%>/g,Eo=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,Hr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,io=/^\w*$/,oo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bi=/[\\^$.*+?()[\]{}|]/g,or=RegExp(Bi.source),Po=/^\s+/,xr=/\s/,va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ma=/\{\n\/\* \[wrapped with (.+)\] \*/,Pr=/,? & /,$o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hi=/[()=,{}\[\]\/\s]/,Yo=/\\(\\)?/g,gt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ga=/\w*$/,Si=/^[-+]0x[0-9a-f]+$/i,ya=/^0b[01]+$/i,xa=/^\[object .+?Constructor\]$/,Tn=/^0o[0-7]+$/i,Io=/^(?:0|[1-9]\d*)$/,ps=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ti=/($^)/,ji=/['\n\r\u2028\u2029\\]/g,Ei="\\ud800-\\udfff",Ir="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",di="\\u2700-\\u27bf",dn="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="A-Z\\xc0-\\xd6\\xd8-\\xde",hi="\\ufe0e\\ufe0f",Mi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wa="["+Ei+"]",br="["+Mi+"]",ar="["+Ir+"]",sr="\\d+",Or="["+di+"]",Xo="["+dn+"]",Mo="[^"+Ei+Mi+sr+di+dn+Ai+"]",Jr="\\ud83c[\\udffb-\\udfff]",ki="[^"+Ei+"]",ao="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Oi="["+Ai+"]",zi="(?:"+Xo+"|"+Mo+")",Ko="(?:"+Oi+"|"+Mo+")",Jo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ko="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",so="(?:"+ar+"|"+Jr+")?",_a="["+hi+"]?",wa=_a+so+"(?:\\u200d(?:"+[ki,ao,Lr].join("|")+")"+_a+so+")*",Sa="(?:"+[Or,ao,Lr].join("|")+")"+wa,$a="(?:"+[ki+ar+"?",ar,ao,Lr,Wa].join("|")+")",Ta=RegExp("['\u2019]","g"),qo=RegExp(ar,"g"),ii=RegExp(Jr+"(?="+Jr+")|"+$a+wa,"g"),uo=RegExp([Oi+"?"+Xo+"+"+Jo+"(?="+[br,Oi,"$"].join("|")+")",Ko+"+"+ko+"(?="+[br,Oi+zi,"$"].join("|")+")",Oi+"?"+zi+"+"+Jo,Oi+"+"+ko,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sr,Sa].join("|"),"g"),Ya=RegExp("[\\u200d"+Ei+Ir+hi+"]"),Li=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ea=-1,Pn={};Pn[Nn]=Pn[Vr]=Pn[Sn]=Pn[Pt]=Pn[Mn]=Pn[Vn]=Pn[ir]=Pn[Br]=Pn[qn]=!0,Pn[$e]=Pn[tt]=Pn[nn]=Pn[_t]=Pn[zn]=Pn[Ft]=Pn[kt]=Pn[jn]=Pn[tn]=Pn[Xt]=Pn[U]=Pn[Ke]=Pn[Xe]=Pn[pt]=Pn[an]=!1;var Ve={};Ve[$e]=Ve[tt]=Ve[nn]=Ve[zn]=Ve[_t]=Ve[Ft]=Ve[Nn]=Ve[Vr]=Ve[Sn]=Ve[Pt]=Ve[Mn]=Ve[tn]=Ve[Xt]=Ve[U]=Ve[Ke]=Ve[Xe]=Ve[pt]=Ve[Ot]=Ve[Vn]=Ve[ir]=Ve[Br]=Ve[qn]=!0,Ve[kt]=Ve[jn]=Ve[an]=!1;var Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,pe=parseInt,ke="object"==typeof global&&global&&global.Object===Object&&global,Se="object"==typeof self&&self&&self.Object===Object&&self,l=ke||Se||Function("return this")(),h=W&&!W.nodeType&&W,y=h&&P&&!P.nodeType&&P,w=y&&y.exports===h,D=w&&ke.process,F=function(){try{return y&&y.require&&y.require("util").types||D&&D.binding&&D.binding("util")}catch(Ze){}}(),X=F&&F.isArrayBuffer,le=F&&F.isDate,ce=F&&F.isMap,we=F&&F.isRegExp,ze=F&&F.isSet,it=F&&F.isTypedArray;function Ne(Ee,Ze,je){switch(je.length){case 0:return Ee.call(Ze);case 1:return Ee.call(Ze,je[0]);case 2:return Ee.call(Ze,je[0],je[1]);case 3:return Ee.call(Ze,je[0],je[1],je[2])}return Ee.apply(Ze,je)}function Qe(Ee,Ze,je,Ct){for(var Jt=-1,mn=null==Ee?0:Ee.length;++Jt<mn;){var Gn=Ee[Jt];Ze(Ct,Gn,je(Gn),Ee)}return Ct}function St(Ee,Ze){for(var je=-1,Ct=null==Ee?0:Ee.length;++je<Ct&&!1!==Ze(Ee[je],je,Ee););return Ee}function Zt(Ee,Ze){for(var je=null==Ee?0:Ee.length;je--&&!1!==Ze(Ee[je],je,Ee););return Ee}function Vt(Ee,Ze){for(var je=-1,Ct=null==Ee?0:Ee.length;++je<Ct;)if(!Ze(Ee[je],je,Ee))return!1;return!0}function Rn(Ee,Ze){for(var je=-1,Ct=null==Ee?0:Ee.length,Jt=0,mn=[];++je<Ct;){var Gn=Ee[je];Ze(Gn,je,Ee)&&(mn[Jt++]=Gn)}return mn}function Un(Ee,Ze){return!(null==Ee||!Ee.length)&&gr(Ee,Ze,0)>-1}function zr(Ee,Ze,je){for(var Ct=-1,Jt=null==Ee?0:Ee.length;++Ct<Jt;)if(je(Ze,Ee[Ct]))return!0;return!1}function Bt(Ee,Ze){for(var je=-1,Ct=null==Ee?0:Ee.length,Jt=Array(Ct);++je<Ct;)Jt[je]=Ze(Ee[je],je,Ee);return Jt}function Ut(Ee,Ze){for(var je=-1,Ct=Ze.length,Jt=Ee.length;++je<Ct;)Ee[Jt+je]=Ze[je];return Ee}function _r(Ee,Ze,je,Ct){var Jt=-1,mn=null==Ee?0:Ee.length;for(Ct&&mn&&(je=Ee[++Jt]);++Jt<mn;)je=Ze(je,Ee[Jt],Jt,Ee);return je}function gn(Ee,Ze,je,Ct){var Jt=null==Ee?0:Ee.length;for(Ct&&Jt&&(je=Ee[--Jt]);Jt--;)je=Ze(je,Ee[Jt],Jt,Ee);return je}function Bn(Ee,Ze){for(var je=-1,Ct=null==Ee?0:Ee.length;++je<Ct;)if(Ze(Ee[je],je,Ee))return!0;return!1}var ur=Ur("length");function Oo(Ee,Ze,je){var Ct;return je(Ee,function(Jt,mn,Gn){if(Ze(Jt,mn,Gn))return Ct=mn,!1}),Ct}function Ui(Ee,Ze,je,Ct){for(var Jt=Ee.length,mn=je+(Ct?1:-1);Ct?mn--:++mn<Jt;)if(Ze(Ee[mn],mn,Ee))return mn;return-1}function gr(Ee,Ze,je){return Ze==Ze?function Cr(Ee,Ze,je){for(var Ct=je-1,Jt=Ee.length;++Ct<Jt;)if(Ee[Ct]===Ze)return Ct;return-1}(Ee,Ze,je):Ui(Ee,Hn,je)}function Nt(Ee,Ze,je,Ct){for(var Jt=je-1,mn=Ee.length;++Jt<mn;)if(Ct(Ee[Jt],Ze))return Jt;return-1}function Hn(Ee){return Ee!=Ee}function gi(Ee,Ze){var je=null==Ee?0:Ee.length;return je?er(Ee,Ze)/je:NaN}function Ur(Ee){return function(Ze){return null==Ze?g:Ze[Ee]}}function Ni(Ee){return function(Ze){return null==Ee?g:Ee[Ze]}}function Lo(Ee,Ze,je,Ct,Jt){return Jt(Ee,function(mn,Gn,En){je=Ct?(Ct=!1,mn):Ze(je,mn,Gn,En)}),je}function er(Ee,Ze){for(var je,Ct=-1,Jt=Ee.length;++Ct<Jt;){var mn=Ze(Ee[Ct]);mn!==g&&(je=je===g?mn:je+mn)}return je}function vi(Ee,Ze){for(var je=-1,Ct=Array(Ee);++je<Ee;)Ct[je]=Ze(je);return Ct}function Cn(Ee){return Ee&&Ee.slice(0,In(Ee)+1).replace(Po,"")}function vn(Ee){return function(Ze){return Ee(Ze)}}function un(Ee,Ze){return Bt(Ze,function(je){return Ee[je]})}function Ea(Ee,Ze){return Ee.has(Ze)}function Vs(Ee,Ze){for(var je=-1,Ct=Ee.length;++je<Ct&&gr(Ze,Ee[je],0)>-1;);return je}function Ou(Ee,Ze){for(var je=Ee.length;je--&&gr(Ze,Ee[je],0)>-1;);return je}function Lu(Ee,Ze){for(var je=Ee.length,Ct=0;je--;)Ee[je]===Ze&&++Ct;return Ct}var Pa=Ni({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Nu=Ni({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Wl(Ee){return"\\"+Q[Ee]}function vr(Ee){return Ya.test(Ee)}function ai(Ee){var Ze=-1,je=Array(Ee.size);return Ee.forEach(function(Ct,Jt){je[++Ze]=[Jt,Ct]}),je}function Gi(Ee,Ze){return function(je){return Ee(Ze(je))}}function tr(Ee,Ze){for(var je=-1,Ct=Ee.length,Jt=0,mn=[];++je<Ct;){var Gn=Ee[je];(Gn===Ze||Gn===j)&&(Ee[je]=j,mn[Jt++]=je)}return mn}function Ia(Ee){var Ze=-1,je=Array(Ee.size);return Ee.forEach(function(Ct){je[++Ze]=Ct}),je}function wn(Ee){return vr(Ee)?function wr(Ee){for(var Ze=ii.lastIndex=0;ii.test(Ee);)++Ze;return Ze}(Ee):ur(Ee)}function pn(Ee){return vr(Ee)?function Hs(Ee){return Ee.match(ii)||[]}(Ee):function gs(Ee){return Ee.split("")}(Ee)}function In(Ee){for(var Ze=Ee.length;Ze--&&xr.test(Ee.charAt(Ze)););return Ze}var co=Ni({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mi=function Ee(Ze){var a,je=(Ze=null==Ze?l:mi.defaults(l.Object(),Ze,mi.pick(l,pi))).Array,Ct=Ze.Date,Jt=Ze.Error,mn=Ze.Function,Gn=Ze.Math,En=Ze.Object,Ro=Ze.RegExp,fo=Ze.String,Z=Ze.TypeError,he=je.prototype,Je=En.prototype,Ae=Ze["__core-js_shared__"],et=mn.prototype.toString,Ye=Je.hasOwnProperty,ht=0,vt=(a=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",Ht=Je.toString,zt=et.call(En),ct=l._,ln=Ro("^"+et.call(Ye).replace(Bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cn=w?Ze.Buffer:g,At=Ze.Symbol,Wn=Ze.Uint8Array,Jn=cn?cn.allocUnsafe:g,Sr=Gi(En.getPrototypeOf,En),On=En.create,ta=Je.propertyIsEnumerable,ho=he.splice,Gr=At?At.isConcatSpreadable:g,ms=At?At.iterator:g,Aa=At?At.toStringTag:g,zs=function(){try{var a=Da(En,"defineProperty");return a({},"",{}),a}catch(s){}}(),Rf=Ze.clearTimeout!==l.clearTimeout&&Ze.clearTimeout,Df=Ct&&Ct.now!==l.Date.now&&Ct.now,Ff=Ze.setTimeout!==l.setTimeout&&Ze.setTimeout,$i=Gn.ceil,ys=Gn.floor,Us=En.getOwnPropertySymbols,$l=cn?cn.isBuffer:g,Ru=Ze.isFinite,Vf=he.join,Bf=Gi(En.keys,En),Tr=Gn.max,Wr=Gn.min,Hf=Ct.now,jf=Ze.parseInt,Yl=Gn.random,zf=he.reverse,Du=Da(Ze,"DataView"),xs=Da(Ze,"Map"),Fu=Da(Ze,"Promise"),Ma=Da(Ze,"Set"),bs=Da(Ze,"WeakMap"),_s=Da(En,"create"),Mr=bs&&new bs,Xa={},Vu=Va(Du),Uf=Va(xs),Do=Va(Fu),Cs=Va(Ma),Gf=Va(bs),Bu=At?At.prototype:g,Gs=Bu?Bu.valueOf:g,Xl=Bu?Bu.toString:g;function q(a){if(nr(a)&&!rn(a)&&!(a instanceof yn)){if(a instanceof Yi)return a;if(Ye.call(a,"__wrapped__"))return Uc(a)}return new Yi(a)}var ws=function(){function a(){}return function(s){if(!Zn(s))return{};if(On)return On(s);a.prototype=s;var d=new a;return a.prototype=g,d}}();function Hu(){}function Yi(a,s){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=g}function yn(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rr,this.__views__=[]}function Fo(a){var s=-1,d=null==a?0:a.length;for(this.clear();++s<d;){var C=a[s];this.set(C[0],C[1])}}function Vo(a){var s=-1,d=null==a?0:a.length;for(this.clear();++s<d;){var C=a[s];this.set(C[0],C[1])}}function Xi(a){var s=-1,d=null==a?0:a.length;for(this.clear();++s<d;){var C=a[s];this.set(C[0],C[1])}}function Oa(a){var s=-1,d=null==a?0:a.length;for(this.__data__=new Xi;++s<d;)this.add(a[s])}function Ki(a){var s=this.__data__=new Vo(a);this.size=s.size}function zu(a,s){var d=rn(a),C=!d&&Ha(a),N=!d&&!C&&Co(a),Y=!d&&!C&&!N&&ls(a),ae=d||C||N||Y,de=ae?vi(a.length,fo):[],_e=de.length;for(var Le in a)(s||Ye.call(a,Le))&&(!ae||!("length"==Le||N&&("offset"==Le||"parent"==Le)||Y&&("buffer"==Le||"byteLength"==Le||"byteOffset"==Le)||mo(Le,_e)))&&de.push(Le);return de}function Uu(a){var s=a.length;return s?a[tu(0,s-1)]:g}function Jf(a,s){return Os(si(a),yi(s,0,a.length))}function Qf(a){return Os(si(a))}function Ks(a,s,d){(d!==g&&!no(a[s],d)||d===g&&!(s in a))&&po(a,s,d)}function ra(a,s,d){var C=a[s];(!Ye.call(a,s)||!no(C,d)||d===g&&!(s in a))&&po(a,s,d)}function Js(a,s){for(var d=a.length;d--;)if(no(a[d][0],s))return d;return-1}function Zf(a,s,d,C){return ia(a,function(N,Y,ae){s(C,N,d(N),ae)}),C}function Qs(a,s){return a&&go(s,kr(s),a)}function po(a,s,d){"__proto__"==s&&zs?zs(a,s,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[s]=d}function Ss(a,s){for(var d=-1,C=s.length,N=je(C),Y=null==a;++d<C;)N[d]=Y?g:Fs(a,s[d]);return N}function yi(a,s,d){return a==a&&(d!==g&&(a=a<=d?a:d),s!==g&&(a=a>=s?a:s)),a}function xi(a,s,d,C,N,Y){var ae,de=1&s,_e=2&s,Le=4&s;if(d&&(ae=N?d(a,C,N,Y):d(a)),ae!==g)return ae;if(!Zn(a))return a;var De=rn(a);if(De){if(ae=function Cd(a){var s=a.length,d=new a.constructor(s);return s&&"string"==typeof a[0]&&Ye.call(a,"index")&&(d.index=a.index,d.input=a.input),d}(a),!de)return si(a,ae)}else{var Fe=Xr(a),qe=Fe==jn||Fe==fi;if(Co(a))return mc(a,de);if(Fe==U||Fe==$e||qe&&!N){if(ae=_e||qe?{}:Rc(a),!de)return _e?function hd(a,s){return go(a,Lc(a),s)}(a,function Gu(a,s){return a&&go(s,ci(s),a)}(ae,a)):function Bo(a,s){return go(a,hl(a),s)}(a,Qs(ae,a))}else{if(!Ve[Fe])return N?a:{};ae=function Dc(a,s,d){var C=a.constructor;switch(s){case nn:return ll(a);case _t:case Ft:return new C(+a);case zn:return function yc(a,s){var d=s?ll(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}(a,d);case Nn:case Vr:case Sn:case Pt:case Mn:case Vn:case ir:case Br:case qn:return su(a,d);case tn:return new C;case Xt:case pt:return new C(a);case Ke:return function cd(a){var s=new a.constructor(a.source,Ga.exec(a));return s.lastIndex=a.lastIndex,s}(a);case Xe:return new C;case Ot:return function fd(a){return Gs?En(Gs.call(a)):{}}(a)}}(a,Fe,de)}}Y||(Y=new Ki);var at=Y.get(a);if(at)return at;Y.set(a,ae),Ll(a)?a.forEach(function(dt){ae.add(xi(dt,s,d,dt,a,Y))}):Uo(a)&&a.forEach(function(dt,Rt){ae.set(Rt,xi(dt,s,d,Rt,a,Y))});var Tt=De?g:(Le?_e?is:Ra:_e?ci:kr)(a);return St(Tt||a,function(dt,Rt){Tt&&(dt=a[Rt=dt]),ra(ae,Rt,xi(dt,s,d,Rt,a,Y))}),ae}function Wu(a,s,d){var C=d.length;if(null==a)return!C;for(a=En(a);C--;){var N=d[C],ae=a[N];if(ae===g&&!(N in a)||!(0,s[N])(ae))return!1}return!0}function Ql(a,s,d){if("function"!=typeof a)throw new Z(A);return ks(function(){a.apply(g,d)},s)}function La(a,s,d,C){var N=-1,Y=Un,ae=!0,de=a.length,_e=[],Le=s.length;if(!de)return _e;d&&(s=Bt(s,vn(d))),C?(Y=zr,ae=!1):s.length>=200&&(Y=Ea,ae=!1,s=new Oa(s));e:for(;++N<de;){var De=a[N],Fe=null==d?De:d(De);if(De=C||0!==De?De:0,ae&&Fe==Fe){for(var qe=Le;qe--;)if(s[qe]===Fe)continue e;_e.push(De)}else Y(s,Fe,C)||_e.push(De)}return _e}q.templateSettings={escape:Vi,evaluate:Eo,interpolate:bt,variable:"",imports:{_:q}},(q.prototype=Hu.prototype).constructor=q,(Yi.prototype=ws(Hu.prototype)).constructor=Yi,(yn.prototype=ws(Hu.prototype)).constructor=yn,Fo.prototype.clear=function ug(){this.__data__=_s?_s(null):{},this.size=0},Fo.prototype.delete=function Wf(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s},Fo.prototype.get=function $f(a){var s=this.__data__;if(_s){var d=s[a];return d===M?g:d}return Ye.call(s,a)?s[a]:g},Fo.prototype.has=function Yf(a){var s=this.__data__;return _s?s[a]!==g:Ye.call(s,a)},Fo.prototype.set=function lg(a,s){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=_s&&s===g?M:s,this},Vo.prototype.clear=function cg(){this.__data__=[],this.size=0},Vo.prototype.delete=function fg(a){var s=this.__data__,d=Js(s,a);return!(d<0||(d==s.length-1?s.pop():ho.call(s,d,1),--this.size,0))},Vo.prototype.get=function ka(a){var s=this.__data__,d=Js(s,a);return d<0?g:s[d][1]},Vo.prototype.has=function Ka(a){return Js(this.__data__,a)>-1},Vo.prototype.set=function Kl(a,s){var d=this.__data__,C=Js(d,a);return C<0?(++this.size,d.push([a,s])):d[C][1]=s,this},Xi.prototype.clear=function na(){this.size=0,this.__data__={hash:new Fo,map:new(xs||Vo),string:new Fo}},Xi.prototype.delete=function Ja(a){var s=du(this,a).delete(a);return this.size-=s?1:0,s},Xi.prototype.get=function xn(a){return du(this,a).get(a)},Xi.prototype.has=function bn(a){return du(this,a).has(a)},Xi.prototype.set=function Ws(a,s){var d=du(this,a),C=d.size;return d.set(a,s),this.size+=d.size==C?0:1,this},Oa.prototype.add=Oa.prototype.push=function Xf(a){return this.__data__.set(a,M),this},Oa.prototype.has=function Kf(a){return this.__data__.has(a)},Ki.prototype.clear=function $s(){this.__data__=new Vo,this.size=0},Ki.prototype.delete=function ju(a){var s=this.__data__,d=s.delete(a);return this.size=s.size,d},Ki.prototype.get=function Qr(a){return this.__data__.get(a)},Ki.prototype.has=function Ys(a){return this.__data__.has(a)},Ki.prototype.set=function Xs(a,s){var d=this.__data__;if(d instanceof Vo){var C=d.__data__;if(!xs||C.length<199)return C.push([a,s]),this.size=++d.size,this;d=this.__data__=new Xi(C)}return d.set(a,s),this.size=d.size,this};var ia=_c(Ri),$u=_c(Yu,!0);function qf(a,s){var d=!0;return ia(a,function(C,N,Y){return d=!!s(C,N,Y)}),d}function Zs(a,s,d){for(var C=-1,N=a.length;++C<N;){var Y=a[C],ae=s(Y);if(null!=ae&&(de===g?ae==ae&&!wi(ae):d(ae,de)))var de=ae,_e=Y}return _e}function ql(a,s){var d=[];return ia(a,function(C,N,Y){s(C,N,Y)&&d.push(C)}),d}function cr(a,s,d,C,N){var Y=-1,ae=a.length;for(d||(d=qi),N||(N=[]);++Y<ae;){var de=a[Y];s>0&&d(de)?s>1?cr(de,s-1,d,C,N):Ut(N,de):C||(N[N.length]=de)}return N}var Qa=Cc(),Za=Cc(!0);function Ri(a,s){return a&&Qa(a,s,kr)}function Yu(a,s){return a&&Za(a,s,kr)}function Ts(a,s){return Rn(s,function(d){return zo(a[d])})}function oa(a,s){for(var d=0,C=(s=ua(s,a)).length;null!=a&&d<C;)a=a[yo(s[d++])];return d&&d==C?a:g}function ec(a,s,d){var C=s(a);return rn(a)?C:Ut(C,d(a))}function Zr(a){return null==a?a===g?"[object Undefined]":"[object Null]":Aa&&Aa in En(a)?function xd(a){var s=Ye.call(a,Aa),d=a[Aa];try{a[Aa]=g;var C=!0}catch(Y){}var N=Ht.call(a);return C&&(s?a[Aa]=d:delete a[Aa]),N}(a):function Id(a){return Ht.call(a)}(a)}function Xu(a,s){return a>s}function Ku(a,s){return null!=a&&Ye.call(a,s)}function ed(a,s){return null!=a&&s in En(a)}function Ju(a,s,d){for(var C=d?zr:Un,N=a[0].length,Y=a.length,ae=Y,de=je(Y),_e=1/0,Le=[];ae--;){var De=a[ae];ae&&s&&(De=Bt(De,vn(s))),_e=Wr(De.length,_e),de[ae]=!d&&(s||N>=120&&De.length>=120)?new Oa(ae&&De):g}De=a[0];var Fe=-1,qe=de[0];e:for(;++Fe<N&&Le.length<_e;){var at=De[Fe],xt=s?s(at):at;if(at=d||0!==at?at:0,!(qe?Ea(qe,xt):C(Le,xt,d))){for(ae=Y;--ae;){var Tt=de[ae];if(!(Tt?Ea(Tt,xt):C(a[ae],xt,d)))continue e}qe&&qe.push(xt),Le.push(at)}}return Le}function Es(a,s,d){var C=null==(a=Hc(a,s=ua(s,a)))?a:a[yo(Ci(s))];return null==C?g:Ne(C,a,d)}function Qu(a){return nr(a)&&Zr(a)==$e}function aa(a,s,d,C,N){return a===s||(null==a||null==s||!nr(a)&&!nr(s)?a!=a&&s!=s:function Zu(a,s,d,C,N,Y){var ae=rn(a),de=rn(s),_e=ae?tt:Xr(a),Le=de?tt:Xr(s),De=(_e=_e==$e?U:_e)==U,Fe=(Le=Le==$e?U:Le)==U,qe=_e==Le;if(qe&&Co(a)){if(!Co(s))return!1;ae=!0,De=!1}if(qe&&!De)return Y||(Y=new Ki),ae||ls(a)?Mc(a,s,d,C,N,Y):function kc(a,s,d,C,N,Y,ae){switch(d){case zn:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case nn:return!(a.byteLength!=s.byteLength||!Y(new Wn(a),new Wn(s)));case _t:case Ft:case Xt:return no(+a,+s);case kt:return a.name==s.name&&a.message==s.message;case Ke:case pt:return a==s+"";case tn:var de=ai;case Xe:if(de||(de=Ia),a.size!=s.size&&!(1&C))return!1;var Le=ae.get(a);if(Le)return Le==s;C|=2,ae.set(a,s);var De=Mc(de(a),de(s),C,N,Y,ae);return ae.delete(a),De;case Ot:if(Gs)return Gs.call(a)==Gs.call(s)}return!1}(a,s,_e,d,C,N,Y);if(!(1&d)){var at=De&&Ye.call(a,"__wrapped__"),xt=Fe&&Ye.call(s,"__wrapped__");if(at||xt){var Tt=at?a.value():a,dt=xt?s.value():s;return Y||(Y=new Ki),N(Tt,dt,d,C,Y)}}return!!qe&&(Y||(Y=new Ki),function Oc(a,s,d,C,N,Y){var ae=1&d,de=Ra(a),_e=de.length;if(_e!=Ra(s).length&&!ae)return!1;for(var Fe=_e;Fe--;){var qe=de[Fe];if(!(ae?qe in s:Ye.call(s,qe)))return!1}var at=Y.get(a),xt=Y.get(s);if(at&&xt)return at==s&&xt==a;var Tt=!0;Y.set(a,s),Y.set(s,a);for(var dt=ae;++Fe<_e;){var Rt=a[qe=de[Fe]],wt=s[qe];if(C)var jt=ae?C(wt,Rt,qe,s,a,Y):C(Rt,wt,qe,a,s,Y);if(!(jt===g?Rt===wt||N(Rt,wt,d,C,Y):jt)){Tt=!1;break}dt||(dt="constructor"==qe)}if(Tt&&!dt){var Gt=a.constructor,Et=s.constructor;Gt!=Et&&"constructor"in a&&"constructor"in s&&!("function"==typeof Gt&&Gt instanceof Gt&&"function"==typeof Et&&Et instanceof Et)&&(Tt=!1)}return Y.delete(a),Y.delete(s),Tt}(a,s,d,C,N,Y))}(a,s,d,C,aa,N))}function qu(a,s,d,C){var N=d.length,Y=N,ae=!C;if(null==a)return!Y;for(a=En(a);N--;){var de=d[N];if(ae&&de[2]?de[1]!==a[de[0]]:!(de[0]in a))return!1}for(;++N<Y;){var _e=(de=d[N])[0],Le=a[_e],De=de[1];if(ae&&de[2]){if(Le===g&&!(_e in a))return!1}else{var Fe=new Ki;if(C)var qe=C(Le,De,_e,a,s,Fe);if(!(qe===g?aa(De,Le,3,C,Fe):qe))return!1}}return!0}function nc(a){return!(!Zn(a)||function wd(a){return!!vt&&vt in a}(a))&&(zo(a)?ln:xa).test(Va(a))}function oc(a){return"function"==typeof a?a:null==a?ti:"object"==typeof a?rn(a)?$r(a[0],a[1]):bi(a):e(a)}function el(a){if(!Ms(a))return Bf(a);var s=[];for(var d in En(a))Ye.call(a,d)&&"constructor"!=d&&s.push(d);return s}function tl(a,s){return a<s}function ac(a,s){var d=-1,C=li(a)?je(a.length):[];return ia(a,function(N,Y,ae){C[++d]=s(N,Y,ae)}),C}function bi(a){var s=dl(a);return 1==s.length&&s[0][2]?Vc(s[0][0],s[0][1]):function(d){return d===a||qu(d,a,s)}}function $r(a,s){return Qn(a)&&Fc(s)?Vc(yo(a),s):function(d){var C=Fs(d,a);return C===g&&C===s?Dl(d,a):aa(s,C,3)}}function qa(a,s,d,C,N){a!==s&&Qa(s,function(Y,ae){if(N||(N=new Ki),Zn(Y))!function ad(a,s,d,C,N,Y,ae){var de=gl(a,d),_e=gl(s,d),Le=ae.get(_e);if(Le)Ks(a,d,Le);else{var De=Y?Y(de,_e,d+"",a,s,ae):g,Fe=De===g;if(Fe){var qe=rn(_e),at=!qe&&Co(_e),xt=!qe&&!at&&ls(_e);De=_e,qe||at||xt?rn(de)?De=de:dr(de)?De=si(de):at?(Fe=!1,De=mc(_e,!0)):xt?(Fe=!1,De=su(_e,!0)):De=[]:Rs(_e)||Ha(_e)?(De=de,Ha(de)?De=_f(de):(!Zn(de)||zo(de))&&(De=Rc(_e))):Fe=!1}Fe&&(ae.set(_e,De),N(De,_e,C,Y,ae),ae.delete(_e)),Ks(a,d,De)}}(a,s,ae,d,qa,C,N);else{var de=C?C(gl(a,ae),Y,ae+"",a,s,N):g;de===g&&(de=Y),Ks(a,ae,de)}},ci)}function sc(a,s){var d=a.length;if(d)return mo(s+=s<0?d:0,d)?a[s]:g}function uc(a,s,d){s=s.length?Bt(s,function(Y){return rn(Y)?function(ae){return oa(ae,1===Y.length?Y[0]:Y)}:Y}):[ti];var C=-1;return s=Bt(s,vn(Wt())),function sn(Ee,Ze){var je=Ee.length;for(Ee.sort(Ze);je--;)Ee[je]=Ee[je].value;return Ee}(ac(a,function(Y,ae,de){return{criteria:Bt(s,function(Le){return Le(Y)}),index:++C,value:Y}}),function(Y,ae){return function dd(a,s,d){for(var C=-1,N=a.criteria,Y=s.criteria,ae=N.length,de=d.length;++C<ae;){var _e=uu(N[C],Y[C]);if(_e)return C>=de?_e:_e*("desc"==d[C]?-1:1)}return a.index-s.index}(Y,ae,d)})}function nl(a,s,d){for(var C=-1,N=s.length,Y={};++C<N;){var ae=s[C],de=oa(a,ae);d(de,ae)&&es(Y,ua(ae,a),de)}return Y}function eu(a,s,d,C){var N=C?Nt:gr,Y=-1,ae=s.length,de=a;for(a===s&&(s=si(s)),d&&(de=Bt(a,vn(d)));++Y<ae;)for(var _e=0,Le=s[Y],De=d?d(Le):Le;(_e=N(de,De,_e,C))>-1;)de!==a&&ho.call(de,_e,1),ho.call(a,_e,1);return a}function rl(a,s){for(var d=a?s.length:0,C=d-1;d--;){var N=s[d];if(d==C||N!==Y){var Y=N;mo(N)?ho.call(a,N,1):ru(a,N)}}return a}function tu(a,s){return a+ys(Yl()*(s-a+1))}function il(a,s){var d="";if(!a||s<1||s>Ln)return d;do{s%2&&(d+=a),(s=ys(s/2))&&(a+=a)}while(s);return d}function fn(a,s){return vl(Bc(a,s,ti),a+"")}function ud(a){return Uu(fs(a))}function ol(a,s){var d=fs(a);return Os(d,yi(s,0,d.length))}function es(a,s,d,C){if(!Zn(a))return a;for(var N=-1,Y=(s=ua(s,a)).length,ae=Y-1,de=a;null!=de&&++N<Y;){var _e=yo(s[N]),Le=d;if("__proto__"===_e||"constructor"===_e||"prototype"===_e)return a;if(N!=ae){var De=de[_e];(Le=C?C(De,_e,de):g)===g&&(Le=Zn(De)?De:mo(s[N+1])?[]:{})}ra(de,_e,Le),de=de[_e]}return a}var fc=Mr?function(a,s){return Mr.set(a,s),a}:ti,ld=zs?function(a,s){return zs(a,"toString",{configurable:!0,enumerable:!1,value:Hl(s),writable:!0})}:ti;function Qt(a){return Os(fs(a))}function Yr(a,s,d){var C=-1,N=a.length;s<0&&(s=-s>N?0:N+s),(d=d>N?N:d)<0&&(d+=N),N=s>d?0:d-s>>>0,s>>>=0;for(var Y=je(N);++C<N;)Y[C]=a[C+s];return Y}function Ji(a,s){var d;return ia(a,function(C,N,Y){return!(d=s(C,N,Y))}),!!d}function nu(a,s,d){var C=0,N=null==a?C:a.length;if("number"==typeof s&&s==s&&N<=2147483647){for(;C<N;){var Y=C+N>>>1,ae=a[Y];null!==ae&&!wi(ae)&&(d?ae<=s:ae<s)?C=Y+1:N=Y}return N}return al(a,s,ti,d)}function al(a,s,d,C){var N=0,Y=null==a?0:a.length;if(0===Y)return 0;for(var ae=(s=d(s))!=s,de=null===s,_e=wi(s),Le=s===g;N<Y;){var De=ys((N+Y)/2),Fe=d(a[De]),qe=Fe!==g,at=null===Fe,xt=Fe==Fe,Tt=wi(Fe);if(ae)var dt=C||xt;else dt=Le?xt&&(C||qe):de?xt&&qe&&(C||!at):_e?xt&&qe&&!at&&(C||!Tt):!at&&!Tt&&(C?Fe<=s:Fe<s);dt?N=De+1:Y=De}return Wr(Y,4294967294)}function sl(a,s){for(var d=-1,C=a.length,N=0,Y=[];++d<C;){var ae=a[d],de=s?s(ae):ae;if(!d||!no(de,_e)){var _e=de;Y[N++]=0===ae?0:ae}}return Y}function dc(a){return"number"==typeof a?a:wi(a)?NaN:+a}function _i(a){if("string"==typeof a)return a;if(rn(a))return Bt(a,_i)+"";if(wi(a))return Xl?Xl.call(a):"";var s=a+"";return"0"==s&&1/a==-Dt?"-0":s}function sa(a,s,d){var C=-1,N=Un,Y=a.length,ae=!0,de=[],_e=de;if(d)ae=!1,N=zr;else if(Y>=200){var Le=s?null:md(a);if(Le)return Ia(Le);ae=!1,N=Ea,_e=new Oa}else _e=s?[]:de;e:for(;++C<Y;){var De=a[C],Fe=s?s(De):De;if(De=d||0!==De?De:0,ae&&Fe==Fe){for(var qe=_e.length;qe--;)if(_e[qe]===Fe)continue e;s&&_e.push(Fe),de.push(De)}else N(_e,Fe,d)||(_e!==de&&_e.push(Fe),de.push(De))}return de}function ru(a,s){return null==(a=Hc(a,s=ua(s,a)))||delete a[yo(Ci(s))]}function hc(a,s,d,C){return es(a,s,d(oa(a,s)),C)}function iu(a,s,d,C){for(var N=a.length,Y=C?N:-1;(C?Y--:++Y<N)&&s(a[Y],Y,a););return d?Yr(a,C?0:Y,C?Y+1:N):Yr(a,C?Y+1:0,C?N:Y)}function pc(a,s){var d=a;return d instanceof yn&&(d=d.value()),_r(s,function(C,N){return N.func.apply(N.thisArg,Ut([C],N.args))},d)}function ul(a,s,d){var C=a.length;if(C<2)return C?sa(a[0]):[];for(var N=-1,Y=je(C);++N<C;)for(var ae=a[N],de=-1;++de<C;)de!=N&&(Y[N]=La(Y[N]||ae,a[de],s,d));return sa(cr(Y,1),s,d)}function gc(a,s,d){for(var C=-1,N=a.length,Y=s.length,ae={};++C<N;)d(ae,a[C],C<Y?s[C]:g);return ae}function Na(a){return dr(a)?a:[]}function ou(a){return"function"==typeof a?a:ti}function ua(a,s){return rn(a)?a:Qn(a,s)?[a]:hu(An(a))}var vc=fn;function Qi(a,s,d){var C=a.length;return d=d===g?C:d,!s&&d>=C?a:Yr(a,s,d)}var au=Rf||function(a){return l.clearTimeout(a)};function mc(a,s){if(s)return a.slice();var d=a.length,C=Jn?Jn(d):new a.constructor(d);return a.copy(C),C}function ll(a){var s=new a.constructor(a.byteLength);return new Wn(s).set(new Wn(a)),s}function su(a,s){var d=s?ll(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}function uu(a,s){if(a!==s){var d=a!==g,C=null===a,N=a==a,Y=wi(a),ae=s!==g,de=null===s,_e=s==s,Le=wi(s);if(!de&&!Le&&!Y&&a>s||Y&&ae&&_e&&!de&&!Le||C&&ae&&_e||!d&&_e||!N)return 1;if(!C&&!Y&&!Le&&a<s||Le&&d&&N&&!C&&!Y||de&&d&&N||!ae&&N||!_e)return-1}return 0}function xc(a,s,d,C){for(var N=-1,Y=a.length,ae=d.length,de=-1,_e=s.length,Le=Tr(Y-ae,0),De=je(_e+Le),Fe=!C;++de<_e;)De[de]=s[de];for(;++N<ae;)(Fe||N<Y)&&(De[d[N]]=a[N]);for(;Le--;)De[de++]=a[N++];return De}function bc(a,s,d,C){for(var N=-1,Y=a.length,ae=-1,de=d.length,_e=-1,Le=s.length,De=Tr(Y-de,0),Fe=je(De+Le),qe=!C;++N<De;)Fe[N]=a[N];for(var at=N;++_e<Le;)Fe[at+_e]=s[_e];for(;++ae<de;)(qe||N<Y)&&(Fe[at+d[ae]]=a[N++]);return Fe}function si(a,s){var d=-1,C=a.length;for(s||(s=je(C));++d<C;)s[d]=a[d];return s}function go(a,s,d,C){var N=!d;d||(d={});for(var Y=-1,ae=s.length;++Y<ae;){var de=s[Y],_e=C?C(d[de],a[de],de,d,a):g;_e===g&&(_e=a[de]),N?po(d,de,_e):ra(d,de,_e)}return d}function lu(a,s){return function(d,C){var N=rn(d)?Qe:Zf,Y=s?s():{};return N(d,a,Wt(C,2),Y)}}function ts(a){return fn(function(s,d){var C=-1,N=d.length,Y=N>1?d[N-1]:g,ae=N>2?d[2]:g;for(Y=a.length>3&&"function"==typeof Y?(N--,Y):g,ae&&_n(d[0],d[1],ae)&&(Y=N<3?g:Y,N=1),s=En(s);++C<N;){var de=d[C];de&&a(s,de,C,Y)}return s})}function _c(a,s){return function(d,C){if(null==d)return d;if(!li(d))return a(d,C);for(var N=d.length,Y=s?N:-1,ae=En(d);(s?Y--:++Y<N)&&!1!==C(ae[Y],Y,ae););return d}}function Cc(a){return function(s,d,C){for(var N=-1,Y=En(s),ae=C(s),de=ae.length;de--;){var _e=ae[a?de:++N];if(!1===d(Y[_e],_e,Y))break}return s}}function wc(a){return function(s){var d=vr(s=An(s))?pn(s):g,C=d?d[0]:s.charAt(0),N=d?Qi(d,1).join(""):s.slice(1);return C[a]()+N}}function ns(a){return function(s){return _r(Lf(Af(s).replace(Ta,"")),a,"")}}function Ps(a){return function(){var s=arguments;switch(s.length){case 0:return new a;case 1:return new a(s[0]);case 2:return new a(s[0],s[1]);case 3:return new a(s[0],s[1],s[2]);case 4:return new a(s[0],s[1],s[2],s[3]);case 5:return new a(s[0],s[1],s[2],s[3],s[4]);case 6:return new a(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new a(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var d=ws(a.prototype),C=a.apply(d,s);return Zn(C)?C:d}}function Sc(a){return function(s,d,C){var N=En(s);if(!li(s)){var Y=Wt(d,3);s=kr(s),d=function(de){return Y(N[de],de,N)}}var ae=a(s,d,C);return ae>-1?N[Y?s[ae]:ae]:g}}function Tc(a){return fr(function(s){var d=s.length,C=d,N=Yi.prototype.thru;for(a&&s.reverse();C--;){var Y=s[C];if("function"!=typeof Y)throw new Z(A);if(N&&!ae&&"wrapper"==ca(Y))var ae=new Yi([],!0)}for(C=ae?C:d;++C<d;){var de=ca(Y=s[C]),_e="wrapper"==de?os(Y):g;ae=_e&&pl(_e[0])&&424==_e[1]&&!_e[4].length&&1==_e[9]?ae[ca(_e[0])].apply(ae,_e[3]):1==Y.length&&pl(Y)?ae[de]():ae.thru(Y)}return function(){var Le=arguments,De=Le[0];if(ae&&1==Le.length&&rn(De))return ae.plant(De).value();for(var Fe=0,qe=d?s[Fe].apply(this,Le):De;++Fe<d;)qe=s[Fe].call(this,qe);return qe}})}function cu(a,s,d,C,N,Y,ae,de,_e,Le){var De=s&_,Fe=1&s,qe=2&s,at=24&s,xt=512&s,Tt=qe?g:Ps(a);return function dt(){for(var Rt=arguments.length,wt=je(Rt),jt=Rt;jt--;)wt[jt]=arguments[jt];if(at)var Gt=vo(dt),Et=Lu(wt,Gt);if(C&&(wt=xc(wt,C,N,at)),Y&&(wt=bc(wt,Y,ae,at)),Rt-=Et,at&&Rt<Le){var lt=tr(wt,Gt);return cl(a,s,cu,dt.placeholder,d,wt,lt,de,_e,Le-Rt)}var Dn=Fe?d:this,Yn=qe?Dn[a]:a;return Rt=wt.length,de?wt=Ad(wt,de):xt&&Rt>1&&wt.reverse(),De&&_e<Rt&&(wt.length=_e),this&&this!==l&&this instanceof dt&&(Yn=Tt||Ps(Yn)),Yn.apply(Dn,wt)}}function Ec(a,s){return function(d,C){return function tc(a,s,d,C){return Ri(a,function(N,Y,ae){s(C,d(N),Y,ae)}),C}(d,a,s(C),{})}}function fu(a,s){return function(d,C){var N;if(d===g&&C===g)return s;if(d!==g&&(N=d),C!==g){if(N===g)return C;"string"==typeof d||"string"==typeof C?(d=_i(d),C=_i(C)):(d=dc(d),C=dc(C)),N=a(d,C)}return N}}function la(a){return fr(function(s){return s=Bt(s,vn(Wt())),fn(function(d){var C=this;return a(s,function(N){return Ne(N,C,d)})})})}function Is(a,s){var d=(s=s===g?" ":_i(s)).length;if(d<2)return d?il(s,a):s;var C=il(s,$i(a/wn(s)));return vr(s)?Qi(pn(C),0,a).join(""):C.slice(0,a)}function As(a){return function(s,d,C){return C&&"number"!=typeof C&&_n(s,d,C)&&(d=C=g),s=pa(s),d===g?(d=s,s=0):d=pa(d),function cc(a,s,d,C){for(var N=-1,Y=Tr($i((s-a)/(d||1)),0),ae=je(Y);Y--;)ae[C?Y:++N]=a,a+=d;return ae}(s,d,C=C===g?s<d?1:-1:pa(C),a)}}function rs(a){return function(s,d){return"string"==typeof s&&"string"==typeof d||(s=Fi(s),d=Fi(d)),a(s,d)}}function cl(a,s,d,C,N,Y,ae,de,_e,Le){var De=8&s;s|=De?32:64,4&(s&=~(De?64:32))||(s&=-4);var Tt=[a,s,N,De?Y:g,De?ae:g,De?g:Y,De?g:ae,de,_e,Le],dt=d.apply(g,Tt);return pl(a)&&jc(dt,Tt),dt.placeholder=C,Ho(dt,a,s)}function fl(a){var s=Gn[a];return function(d,C){if(d=Fi(d),(C=null==C?0:Wr(on(C),292))&&Ru(d)){var N=(An(d)+"e").split("e");return+((N=(An(s(N[0]+"e"+(+N[1]+C)))+"e").split("e"))[0]+"e"+(+N[1]-C))}return s(d)}}var md=Ma&&1/Ia(new Ma([,-0]))[1]==Dt?function(a){return new Ma(a)}:zl;function Pc(a){return function(s){var d=Xr(s);return d==tn?ai(s):d==Xe?function Bs(Ee){var Ze=-1,je=Array(Ee.size);return Ee.forEach(function(Ct){je[++Ze]=[Ct,Ct]}),je}(s):function No(Ee,Ze){return Bt(Ze,function(je){return[je,Ee[je]]})}(s,a(s))}}function Zi(a,s,d,C,N,Y,ae,de){var _e=2&s;if(!_e&&"function"!=typeof a)throw new Z(A);var Le=C?C.length:0;if(Le||(s&=-97,C=N=g),ae=ae===g?ae:Tr(on(ae),0),de=de===g?de:on(de),Le-=N?N.length:0,64&s){var De=C,Fe=N;C=N=g}var qe=_e?g:os(a),at=[a,s,d,C,N,De,Fe,Y,ae,de];if(qe&&function Ed(a,s){var d=a[1],C=s[1],N=d|C;if(!(N<131||(C==_&&8==d||C==_&&256==d&&a[7].length<=s[8]||384==C&&s[7].length<=s[8]&&8==d)))return a;1&C&&(a[2]=s[2],N|=1&d?0:4);var de=s[3];if(de){var _e=a[3];a[3]=_e?xc(_e,de,s[4]):de,a[4]=_e?tr(a[3],j):s[4]}(de=s[5])&&(a[5]=(_e=a[5])?bc(_e,de,s[6]):de,a[6]=_e?tr(a[5],j):s[6]),(de=s[7])&&(a[7]=de),C&_&&(a[8]=null==a[8]?s[8]:Wr(a[8],s[8])),null==a[9]&&(a[9]=s[9]),a[0]=s[0],a[1]=N}(at,qe),a=at[0],s=at[1],d=at[2],C=at[3],N=at[4],!(de=at[9]=at[9]===g?_e?0:a.length:Tr(at[9]-Le,0))&&24&s&&(s&=-25),s&&1!=s)xt=8==s||16==s?function gd(a,s,d){var C=Ps(a);return function N(){for(var Y=arguments.length,ae=je(Y),de=Y,_e=vo(N);de--;)ae[de]=arguments[de];var Le=Y<3&&ae[0]!==_e&&ae[Y-1]!==_e?[]:tr(ae,_e);return(Y-=Le.length)<d?cl(a,s,cu,N.placeholder,g,ae,Le,g,g,d-Y):Ne(this&&this!==l&&this instanceof N?C:a,this,ae)}}(a,s,de):32!=s&&33!=s||N.length?cu.apply(g,at):function vd(a,s,d,C){var N=1&s,Y=Ps(a);return function ae(){for(var de=-1,_e=arguments.length,Le=-1,De=C.length,Fe=je(De+_e),qe=this&&this!==l&&this instanceof ae?Y:a;++Le<De;)Fe[Le]=C[Le];for(;_e--;)Fe[Le++]=arguments[++de];return Ne(qe,N?d:this,Fe)}}(a,s,d,C);else var xt=function pd(a,s,d){var C=1&s,N=Ps(a);return function Y(){return(this&&this!==l&&this instanceof Y?N:a).apply(C?d:this,arguments)}}(a,s,d);return Ho((qe?fc:jc)(xt,at),a,s)}function Ic(a,s,d,C){return a===g||no(a,Je[d])&&!Ye.call(C,d)?s:a}function Ac(a,s,d,C,N,Y){return Zn(a)&&Zn(s)&&(Y.set(s,a),qa(a,s,g,Ac,Y),Y.delete(s)),a}function yd(a){return Rs(a)?g:a}function Mc(a,s,d,C,N,Y){var ae=1&d,de=a.length,_e=s.length;if(de!=_e&&!(ae&&_e>de))return!1;var Le=Y.get(a),De=Y.get(s);if(Le&&De)return Le==s&&De==a;var Fe=-1,qe=!0,at=2&d?new Oa:g;for(Y.set(a,s),Y.set(s,a);++Fe<de;){var xt=a[Fe],Tt=s[Fe];if(C)var dt=ae?C(Tt,xt,Fe,s,a,Y):C(xt,Tt,Fe,a,s,Y);if(dt!==g){if(dt)continue;qe=!1;break}if(at){if(!Bn(s,function(Rt,wt){if(!Ea(at,wt)&&(xt===Rt||N(xt,Rt,d,C,Y)))return at.push(wt)})){qe=!1;break}}else if(xt!==Tt&&!N(xt,Tt,d,C,Y)){qe=!1;break}}return Y.delete(a),Y.delete(s),qe}function fr(a){return vl(Bc(a,g,Yc),a+"")}function Ra(a){return ec(a,kr,hl)}function is(a){return ec(a,ci,Lc)}var os=Mr?function(a){return Mr.get(a)}:zl;function ca(a){for(var s=a.name+"",d=Xa[s],C=Ye.call(Xa,s)?d.length:0;C--;){var N=d[C],Y=N.func;if(null==Y||Y==a)return N.name}return s}function vo(a){return(Ye.call(q,"placeholder")?q:a).placeholder}function Wt(){var a=q.iteratee||Mu;return a=a===Mu?oc:a,arguments.length?a(arguments[0],arguments[1]):a}function du(a,s){var d=a.__data__;return function Di(a){var s=typeof a;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==a:null===a}(s)?d["string"==typeof s?"string":"hash"]:d.map}function dl(a){for(var s=kr(a),d=s.length;d--;){var C=s[d],N=a[C];s[d]=[C,N,Fc(N)]}return s}function Da(a,s){var d=function vs(Ee,Ze){return null==Ee?g:Ee[Ze]}(a,s);return nc(d)?d:g}var hl=Us?function(a){return null==a?[]:(a=En(a),Rn(Us(a),function(s){return ta.call(a,s)}))}:o,Lc=Us?function(a){for(var s=[];a;)Ut(s,hl(a)),a=Sr(a);return s}:o,Xr=Zr;function Nc(a,s,d){for(var C=-1,N=(s=ua(s,a)).length,Y=!1;++C<N;){var ae=yo(s[C]);if(!(Y=null!=a&&d(a,ae)))break;a=a[ae]}return Y||++C!=N?Y:!!(N=null==a?0:a.length)&&Pu(N)&&mo(ae,N)&&(rn(a)||Ha(a))}function Rc(a){return"function"!=typeof a.constructor||Ms(a)?{}:ws(Sr(a))}function qi(a){return rn(a)||Ha(a)||!!(Gr&&a&&a[Gr])}function mo(a,s){var d=typeof a;return!!(s=null==s?Ln:s)&&("number"==d||"symbol"!=d&&Io.test(a))&&a>-1&&a%1==0&&a<s}function _n(a,s,d){if(!Zn(d))return!1;var C=typeof s;return!!("number"==C?li(d)&&mo(s,d.length):"string"==C&&s in d)&&no(d[s],a)}function Qn(a,s){if(rn(a))return!1;var d=typeof a;return!("number"!=d&&"symbol"!=d&&"boolean"!=d&&null!=a&&!wi(a))||io.test(a)||!Hr.test(a)||null!=s&&a in En(s)}function pl(a){var s=ca(a),d=q[s];if("function"!=typeof d||!(s in yn.prototype))return!1;if(a===d)return!0;var C=os(d);return!!C&&a===C[0]}(Du&&Xr(new Du(new ArrayBuffer(1)))!=zn||xs&&Xr(new xs)!=tn||Fu&&Xr(Fu.resolve())!=re||Ma&&Xr(new Ma)!=Xe||bs&&Xr(new bs)!=an)&&(Xr=function(a){var s=Zr(a),d=s==U?a.constructor:g,C=d?Va(d):"";if(C)switch(C){case Vu:return zn;case Uf:return tn;case Do:return re;case Cs:return Xe;case Gf:return an}return s});var Sd=Ae?zo:u;function Ms(a){var s=a&&a.constructor;return a===("function"==typeof s&&s.prototype||Je)}function Fc(a){return a==a&&!Zn(a)}function Vc(a,s){return function(d){return null!=d&&d[a]===s&&(s!==g||a in En(d))}}function Bc(a,s,d){return s=Tr(s===g?a.length-1:s,0),function(){for(var C=arguments,N=-1,Y=Tr(C.length-s,0),ae=je(Y);++N<Y;)ae[N]=C[s+N];N=-1;for(var de=je(s+1);++N<s;)de[N]=C[N];return de[s]=d(ae),Ne(a,this,de)}}function Hc(a,s){return s.length<2?a:oa(a,Yr(s,0,-1))}function Ad(a,s){for(var d=a.length,C=Wr(s.length,d),N=si(a);C--;){var Y=s[C];a[C]=mo(Y,d)?N[Y]:g}return a}function gl(a,s){if(("constructor"!==s||"function"!=typeof a[s])&&"__proto__"!=s)return a[s]}var jc=zc(fc),ks=Ff||function(a,s){return l.setTimeout(a,s)},vl=zc(ld);function Ho(a,s,d){var C=s+"";return vl(a,function Fa(a,s){var d=s.length;if(!d)return a;var C=d-1;return s[C]=(d>1?"& ":"")+s[C],s=s.join(d>2?", ":" "),a.replace(va,"{\n/* [wrapped with "+s+"] */\n")}(C,function Md(a,s){return St(Fn,function(d){var C="_."+d[0];s&d[1]&&!Un(a,C)&&a.push(C)}),a.sort()}(function _d(a){var s=a.match(ma);return s?s[1].split(Pr):[]}(C),d)))}function zc(a){var s=0,d=0;return function(){var C=Hf(),N=16-(C-d);if(d=C,N>0){if(++s>=800)return arguments[0]}else s=0;return a.apply(g,arguments)}}function Os(a,s){var d=-1,C=a.length,N=C-1;for(s=s===g?C:s;++d<s;){var Y=tu(d,N),ae=a[Y];a[Y]=a[d],a[d]=ae}return a.length=s,a}var hu=function Td(a){var s=Su(a,function(C){return 500===d.size&&d.clear(),C}),d=s.cache;return s}(function(a){var s=[];return 46===a.charCodeAt(0)&&s.push(""),a.replace(oo,function(d,C,N,Y){s.push(N?Y.replace(Yo,"$1"):C||d)}),s});function yo(a){if("string"==typeof a||wi(a))return a;var s=a+"";return"0"==s&&1/a==-Dt?"-0":s}function Va(a){if(null!=a){try{return et.call(a)}catch(s){}try{return a+""}catch(s){}}return""}function Uc(a){if(a instanceof yn)return a.clone();var s=new Yi(a.__wrapped__,a.__chain__);return s.__actions__=si(a.__actions__),s.__index__=a.__index__,s.__values__=a.__values__,s}var Nd=fn(function(a,s){return dr(a)?La(a,cr(s,1,dr,!0)):[]}),Gc=fn(function(a,s){var d=Ci(s);return dr(d)&&(d=g),dr(a)?La(a,cr(s,1,dr,!0),Wt(d,2)):[]}),eo=fn(function(a,s){var d=Ci(s);return dr(d)&&(d=g),dr(a)?La(a,cr(s,1,dr,!0),g,d):[]});function Wc(a,s,d){var C=null==a?0:a.length;if(!C)return-1;var N=null==d?0:on(d);return N<0&&(N=Tr(C+N,0)),Ui(a,Wt(s,3),N)}function $c(a,s,d){var C=null==a?0:a.length;if(!C)return-1;var N=C-1;return d!==g&&(N=on(d),N=d<0?Tr(C+N,0):Wr(N,C-1)),Ui(a,Wt(s,3),N,!0)}function Yc(a){return null!=a&&a.length?cr(a,1):[]}function Xc(a){return a&&a.length?a[0]:g}var Gd=fn(function(a){var s=Bt(a,Na);return s.length&&s[0]===a[0]?Ju(s):[]}),Kc=fn(function(a){var s=Ci(a),d=Bt(a,Na);return s===Ci(d)?s=g:d.pop(),d.length&&d[0]===a[0]?Ju(d,Wt(s,2)):[]}),Wd=fn(function(a){var s=Ci(a),d=Bt(a,Na);return(s="function"==typeof s?s:g)&&d.pop(),d.length&&d[0]===a[0]?Ju(d,g,s):[]});function Ci(a){var s=null==a?0:a.length;return s?a[s-1]:g}var Kd=fn(Jc);function Jc(a,s){return a&&a.length&&s&&s.length?eu(a,s):a}var Zd=fr(function(a,s){var d=null==a?0:a.length,C=Ss(a,s);return rl(a,Bt(s,function(N){return mo(N,d)?+N:N}).sort(uu)),C});function ml(a){return null==a?a:zf.call(a)}var ph=fn(function(a){return sa(cr(a,1,dr,!0))}),gh=fn(function(a){var s=Ci(a);return dr(s)&&(s=g),sa(cr(a,1,dr,!0),Wt(s,2))}),ft=fn(function(a){var s=Ci(a);return s="function"==typeof s?s:g,sa(cr(a,1,dr,!0),g,s)});function We(a){if(!a||!a.length)return[];var s=0;return a=Rn(a,function(d){if(dr(d))return s=Tr(d.length,s),!0}),vi(s,function(d){return Bt(a,Ur(d))})}function jo(a,s){if(!a||!a.length)return[];var d=We(a);return null==s?d:Bt(d,function(C){return Ne(s,g,C)})}var to=fn(function(a,s){return dr(a)?La(a,s):[]}),ui=fn(function(a){return ul(Rn(a,dr))}),fa=fn(function(a){var s=Ci(a);return dr(s)&&(s=g),ul(Rn(a,dr),Wt(s,2))}),Ls=fn(function(a){var s=Ci(a);return s="function"==typeof s?s:g,ul(Rn(a,dr),g,s)}),mt=fn(We),xo=fn(function(a){var s=a.length,d=s>1?a[s-1]:g;return d="function"==typeof d?(a.pop(),d):g,jo(a,d)});function _l(a){var s=q(a);return s.__chain__=!0,s}function qr(a,s){return s(a)}var ha=fr(function(a){var s=a.length,d=s?a[0]:0,C=this.__wrapped__,N=function(Y){return Ss(Y,a)};return!(s>1||this.__actions__.length)&&C instanceof yn&&mo(d)?((C=C.slice(d,+d+(s?1:0))).__actions__.push({func:qr,args:[N],thisArg:g}),new Yi(C,this.__chain__).thru(function(Y){return s&&!Y.length&&Y.push(g),Y})):this.thru(N)}),yh=lu(function(a,s,d){Ye.call(a,d)?++a[d]:po(a,d,1)}),mu=Sc(Wc),qc=Sc($c);function tf(a,s){return(rn(a)?St:ia)(a,Wt(s,3))}function bo(a,s){return(rn(a)?Zt:$u)(a,Wt(s,3))}var wl=lu(function(a,s,d){Ye.call(a,d)?a[d].push(s):po(a,d,[s])}),Sl=fn(function(a,s,d){var C=-1,N="function"==typeof s,Y=li(a)?je(a.length):[];return ia(a,function(ae){Y[++C]=N?Ne(s,ae,d):Es(ae,s,d)}),Y}),Tl=lu(function(a,s,d){po(a,d,s)});function ei(a,s){return(rn(a)?Bt:ac)(a,Wt(s,3))}var ss=lu(function(a,s,d){a[d?0:1].push(s)},function(){return[[],[]]}),wh=fn(function(a,s){if(null==a)return[];var d=s.length;return d>1&&_n(a,s[0],s[1])?s=[]:d>2&&_n(s[0],s[1],s[2])&&(s=[s[0]]),uc(a,cr(s,1),[])}),wu=Df||function(){return l.Date.now()};function nf(a,s,d){return s=d?g:s,Zi(a,_,g,g,g,g,s=a&&null==s?a.length:s)}function rf(a,s){var d;if("function"!=typeof s)throw new Z(A);return a=on(a),function(){return--a>0&&(d=s.apply(this,arguments)),a<=1&&(s=g),d}}var Pl=fn(function(a,s,d){var C=1;if(d.length){var N=tr(d,vo(Pl));C|=32}return Zi(a,C,s,d,N)}),of=fn(function(a,s,d){var C=3;if(d.length){var N=tr(d,vo(of));C|=32}return Zi(s,C,a,d,N)});function uf(a,s,d){var C,N,Y,ae,de,_e,Le=0,De=!1,Fe=!1,qe=!0;if("function"!=typeof a)throw new Z(A);function at(lt){var Dn=C,Yn=N;return C=N=g,Le=lt,ae=a.apply(Yn,Dn)}function xt(lt){return Le=lt,de=ks(Rt,s),De?at(lt):ae}function dt(lt){var Dn=lt-_e;return _e===g||Dn>=s||Dn<0||Fe&&lt-Le>=Y}function Rt(){var lt=wu();if(dt(lt))return wt(lt);de=ks(Rt,function Tt(lt){var wo=s-(lt-_e);return Fe?Wr(wo,Y-(lt-Le)):wo}(lt))}function wt(lt){return de=g,qe&&C?at(lt):(C=N=g,ae)}function Et(){var lt=wu(),Dn=dt(lt);if(C=arguments,N=this,_e=lt,Dn){if(de===g)return xt(_e);if(Fe)return au(de),de=ks(Rt,s),at(_e)}return de===g&&(de=ks(Rt,s)),ae}return s=Fi(s)||0,Zn(d)&&(De=!!d.leading,Y=(Fe="maxWait"in d)?Tr(Fi(d.maxWait)||0,s):Y,qe="trailing"in d?!!d.trailing:qe),Et.cancel=function jt(){de!==g&&au(de),Le=0,C=_e=N=de=g},Et.flush=function Gt(){return de===g?ae:wt(wu())},Et}var Th=fn(function(a,s){return Ql(a,1,s)}),Eh=fn(function(a,s,d){return Ql(a,Fi(s)||0,d)});function Su(a,s){if("function"!=typeof a||null!=s&&"function"!=typeof s)throw new Z(A);var d=function(){var C=arguments,N=s?s.apply(this,C):C[0],Y=d.cache;if(Y.has(N))return Y.get(N);var ae=a.apply(this,C);return d.cache=Y.set(N,ae)||Y,ae};return d.cache=new(Su.Cache||Xi),d}function Tu(a){if("function"!=typeof a)throw new Z(A);return function(){var s=arguments;switch(s.length){case 0:return!a.call(this);case 1:return!a.call(this,s[0]);case 2:return!a.call(this,s[0],s[1]);case 3:return!a.call(this,s[0],s[1],s[2])}return!a.apply(this,s)}}Su.Cache=Xi;var Ih=vc(function(a,s){var d=(s=1==s.length&&rn(s[0])?Bt(s[0],vn(Wt())):Bt(cr(s,1),vn(Wt()))).length;return fn(function(C){for(var N=-1,Y=Wr(C.length,d);++N<Y;)C[N]=s[N].call(this,C[N]);return Ne(a,this,C)})}),Il=fn(function(a,s){var d=tr(s,vo(Il));return Zi(a,32,g,s,d)}),cf=fn(function(a,s){var d=tr(s,vo(cf));return Zi(a,64,g,s,d)}),ff=fr(function(a,s){return Zi(a,256,g,g,g,s)});function no(a,s){return a===s||a!=a&&s!=s}var Nh=rs(Xu),gf=rs(function(a,s){return a>=s}),Ha=Qu(function(){return arguments}())?Qu:function(a){return nr(a)&&Ye.call(a,"callee")&&!ta.call(a,"callee")},rn=je.isArray,Rh=X?vn(X):function nd(a){return nr(a)&&Zr(a)==nn};function li(a){return null!=a&&Pu(a.length)&&!zo(a)}function dr(a){return nr(a)&&li(a)}var Co=$l||u,Ns=le?vn(le):function qs(a){return nr(a)&&Zr(a)==Ft};function Ml(a){if(!nr(a))return!1;var s=Zr(a);return s==kt||"[object DOMException]"==s||"string"==typeof a.message&&"string"==typeof a.name&&!Rs(a)}function zo(a){if(!Zn(a))return!1;var s=Zr(a);return s==jn||s==fi||"[object AsyncFunction]"==s||"[object Proxy]"==s}function yf(a){return"number"==typeof a&&a==on(a)}function Pu(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Ln}function Zn(a){var s=typeof a;return null!=a&&("object"==s||"function"==s)}function nr(a){return null!=a&&"object"==typeof a}var Uo=ce?vn(ce):function rd(a){return nr(a)&&Xr(a)==tn};function xf(a){return"number"==typeof a||nr(a)&&Zr(a)==Xt}function Rs(a){if(!nr(a)||Zr(a)!=U)return!1;var s=Sr(a);if(null===s)return!0;var d=Ye.call(s,"constructor")&&s.constructor;return"function"==typeof d&&d instanceof d&&et.call(d)==zt}var kl=we?vn(we):function rc(a){return nr(a)&&Zr(a)==Ke},Ll=ze?vn(ze):function id(a){return nr(a)&&Xr(a)==Xe};function Wo(a){return"string"==typeof a||!rn(a)&&nr(a)&&Zr(a)==pt}function wi(a){return"symbol"==typeof a||nr(a)&&Zr(a)==Ot}var ls=it?vn(it):function ic(a){return nr(a)&&Pu(a.length)&&!!Pn[Zr(a)]},hg=rs(tl),bf=rs(function(a,s){return a<=s});function Ds(a){if(!a)return[];if(li(a))return Wo(a)?pn(a):si(a);if(ms&&a[ms])return function lo(Ee){for(var Ze,je=[];!(Ze=Ee.next()).done;)je.push(Ze.value);return je}(a[ms]());var s=Xr(a);return(s==tn?ai:s==Xe?Ia:fs)(a)}function pa(a){return a?(a=Fi(a))===Dt||a===-Dt?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function on(a){var s=pa(a),d=s%1;return s==s?d?s-d:s:0}function hr(a){return a?yi(on(a),0,rr):0}function Fi(a){if("number"==typeof a)return a;if(wi(a))return NaN;if(Zn(a)){var s="function"==typeof a.valueOf?a.valueOf():a;a=Zn(s)?s+"":s}if("string"!=typeof a)return 0===a?a:+a;a=Cn(a);var d=ya.test(a);return d||Tn.test(a)?pe(a.slice(2),d?2:8):Si.test(a)?NaN:+a}function _f(a){return go(a,ci(a))}function An(a){return null==a?"":_i(a)}var Kh=ts(function(a,s){if(Ms(s)||li(s))go(s,kr(s),a);else for(var d in s)Ye.call(s,d)&&ra(a,d,s[d])}),Nl=ts(function(a,s){go(s,ci(s),a)}),cs=ts(function(a,s,d,C){go(s,ci(s),a,C)}),Jh=ts(function(a,s,d,C){go(s,kr(s),a,C)}),Cf=fr(Ss),Zh=fn(function(a,s){a=En(a);var d=-1,C=s.length,N=C>2?s[2]:g;for(N&&_n(s[0],s[1],N)&&(C=1);++d<C;)for(var Y=s[d],ae=ci(Y),de=-1,_e=ae.length;++de<_e;){var Le=ae[de],De=a[Le];(De===g||no(De,Je[Le])&&!Ye.call(a,Le))&&(a[Le]=Y[Le])}return a}),wf=fn(function(a){return a.push(g,Ac),Ne(Tf,g,a)});function Fs(a,s,d){var C=null==a?g:oa(a,s);return C===g?d:C}function Dl(a,s){return null!=a&&Nc(a,s,ed)}var ap=Ec(function(a,s,d){null!=s&&"function"!=typeof s.toString&&(s=Ht.call(s)),a[s]=d},Hl(ti)),sp=Ec(function(a,s,d){null!=s&&"function"!=typeof s.toString&&(s=Ht.call(s)),Ye.call(a,s)?a[s].push(d):a[s]=[d]},Wt),up=fn(Es);function kr(a){return li(a)?zu(a):el(a)}function ci(a){return li(a)?zu(a,!0):function od(a){if(!Zn(a))return function Pd(a){var s=[];if(null!=a)for(var d in En(a))s.push(d);return s}(a);var s=Ms(a),d=[];for(var C in a)"constructor"==C&&(s||!Ye.call(a,C))||d.push(C);return d}(a)}var fp=ts(function(a,s,d){qa(a,s,d)}),Tf=ts(function(a,s,d,C){qa(a,s,d,C)}),dp=fr(function(a,s){var d={};if(null==a)return d;var C=!1;s=Bt(s,function(Y){return Y=ua(Y,a),C||(C=Y.length>1),Y}),go(a,is(a),d),C&&(d=xi(d,7,yd));for(var N=s.length;N--;)ru(d,s[N]);return d}),hp=fr(function(a,s){return null==a?{}:function sd(a,s){return nl(a,s,function(d,C){return Dl(a,C)})}(a,s)});function Ef(a,s){if(null==a)return{};var d=Bt(is(a),function(C){return[C]});return s=Wt(s),nl(a,d,function(C,N){return s(C,N[0])})}var ja=Pc(kr),Pf=Pc(ci);function fs(a){return null==a?[]:un(a,kr(a))}var If=ns(function(a,s,d){return s=s.toLowerCase(),a+(d?za(s):s)});function za(a){return Bl(An(a).toLowerCase())}function Af(a){return(a=An(a))&&a.replace(ps,Pa).replace(qo,"")}var Tp=ns(function(a,s,d){return a+(d?"-":"")+s.toLowerCase()}),Ep=ns(function(a,s,d){return a+(d?" ":"")+s.toLowerCase()}),Pp=wc("toLowerCase"),Mp=ns(function(a,s,d){return a+(d?"_":"")+s.toLowerCase()}),Op=ns(function(a,s,d){return a+(d?" ":"")+Bl(s)}),jp=ns(function(a,s,d){return a+(d?" ":"")+s.toUpperCase()}),Bl=wc("toUpperCase");function Lf(a,s,d){return a=An(a),(s=d?g:s)===g?function lr(Ee){return Li.test(Ee)}(a)?function Wi(Ee){return Ee.match(uo)||[]}(a):function oi(Ee){return Ee.match($o)||[]}(a):a.match(s)||[]}var Au=fn(function(a,s){try{return Ne(a,g,s)}catch(d){return Ml(d)?d:new Jt(d)}}),zp=fr(function(a,s){return St(s,function(d){d=yo(d),po(a,d,Pl(a[d],a))}),a});function Hl(a){return function(){return a}}var Wp=Tc(),$p=Tc(!0);function ti(a){return a}function Mu(a){return oc("function"==typeof a?a:xi(a,1))}var Kp=fn(function(a,s){return function(d){return Es(d,a,s)}}),Jp=fn(function(a,s){return function(d){return Es(a,d,s)}});function jl(a,s,d){var C=kr(s),N=Ts(s,C);null==d&&(!Zn(s)||!N.length&&C.length)&&(d=s,s=a,a=this,N=Ts(s,kr(s)));var Y=!(Zn(d)&&"chain"in d&&!d.chain),ae=zo(a);return St(N,function(de){var _e=s[de];a[de]=_e,ae&&(a.prototype[de]=function(){var Le=this.__chain__;if(Y||Le){var De=a(this.__wrapped__),Fe=De.__actions__=si(this.__actions__);return Fe.push({func:_e,args:arguments,thisArg:a}),De.__chain__=Le,De}return _e.apply(a,Ut([this.value()],arguments))})}),a}function zl(){}var qp=la(Bt),eg=la(Vt),tg=la(Bn);function e(a){return Qn(a)?Ur(yo(a)):function lc(a){return function(s){return oa(s,a)}}(a)}var t=As(),r=As(!0);function o(){return[]}function u(){return!1}var G=fu(function(a,s){return a+s},0),te=fl("ceil"),oe=fu(function(a,s){return a/s},1),Te=fl("floor"),ie=fu(function(a,s){return a*s},1),ve=fl("round"),Me=fu(function(a,s){return a-s},0);return q.after=function Sh(a,s){if("function"!=typeof s)throw new Z(A);return a=on(a),function(){if(--a<1)return s.apply(this,arguments)}},q.ary=nf,q.assign=Kh,q.assignIn=Nl,q.assignInWith=cs,q.assignWith=Jh,q.at=Cf,q.before=rf,q.bind=Pl,q.bindAll=zp,q.bindKey=of,q.castArray=function us(){if(!arguments.length)return[];var a=arguments[0];return rn(a)?a:[a]},q.chain=_l,q.chunk=function kd(a,s,d){s=(d?_n(a,s,d):s===g)?1:Tr(on(s),0);var C=null==a?0:a.length;if(!C||s<1)return[];for(var N=0,Y=0,ae=je($i(C/s));N<C;)ae[Y++]=Yr(a,N,N+=s);return ae},q.compact=function Od(a){for(var s=-1,d=null==a?0:a.length,C=0,N=[];++s<d;){var Y=a[s];Y&&(N[C++]=Y)}return N},q.concat=function Ld(){var a=arguments.length;if(!a)return[];for(var s=je(a-1),d=arguments[0],C=a;C--;)s[C-1]=arguments[C];return Ut(rn(d)?si(d):[d],cr(s,1))},q.cond=function Up(a){var s=null==a?0:a.length,d=Wt();return a=s?Bt(a,function(C){if("function"!=typeof C[1])throw new Z(A);return[d(C[0]),C[1]]}):[],fn(function(C){for(var N=-1;++N<s;){var Y=a[N];if(Ne(Y[0],this,C))return Ne(Y[1],this,C)}})},q.conforms=function Gp(a){return function Jl(a){var s=kr(a);return function(d){return Wu(d,a,s)}}(xi(a,1))},q.constant=Hl,q.countBy=yh,q.create=function Qh(a,s){var d=ws(a);return null==s?d:Qs(d,s)},q.curry=function af(a,s,d){var C=Zi(a,8,g,g,g,g,g,s=d?g:s);return C.placeholder=af.placeholder,C},q.curryRight=function sf(a,s,d){var C=Zi(a,16,g,g,g,g,g,s=d?g:s);return C.placeholder=sf.placeholder,C},q.debounce=uf,q.defaults=Zh,q.defaultsDeep=wf,q.defer=Th,q.delay=Eh,q.difference=Nd,q.differenceBy=Gc,q.differenceWith=eo,q.drop=function Rd(a,s,d){var C=null==a?0:a.length;return C?Yr(a,(s=d||s===g?1:on(s))<0?0:s,C):[]},q.dropRight=function Dd(a,s,d){var C=null==a?0:a.length;return C?Yr(a,0,(s=C-(s=d||s===g?1:on(s)))<0?0:s):[]},q.dropRightWhile=function Fd(a,s){return a&&a.length?iu(a,Wt(s,3),!0,!0):[]},q.dropWhile=function Vd(a,s){return a&&a.length?iu(a,Wt(s,3),!0):[]},q.fill=function Bd(a,s,d,C){var N=null==a?0:a.length;return N?(d&&"number"!=typeof d&&_n(a,s,d)&&(d=0,C=N),function Zl(a,s,d,C){var N=a.length;for((d=on(d))<0&&(d=-d>N?0:N+d),(C=C===g||C>N?N:on(C))<0&&(C+=N),C=d>C?0:hr(C);d<C;)a[d++]=s;return a}(a,s,d,C)):[]},q.filter=function dg(a,s){return(rn(a)?Rn:ql)(a,Wt(s,3))},q.flatMap=function ef(a,s){return cr(ei(a,s),1)},q.flatMapDeep=function xh(a,s){return cr(ei(a,s),Dt)},q.flatMapDepth=function yu(a,s,d){return d=d===g?1:on(d),cr(ei(a,s),d)},q.flatten=Yc,q.flattenDeep=function Hd(a){return null!=a&&a.length?cr(a,Dt):[]},q.flattenDepth=function jd(a,s){return null!=a&&a.length?cr(a,s=s===g?1:on(s)):[]},q.flip=function Ph(a){return Zi(a,512)},q.flow=Wp,q.flowRight=$p,q.fromPairs=function pu(a){for(var s=-1,d=null==a?0:a.length,C={};++s<d;){var N=a[s];C[N[0]]=N[1]}return C},q.functions=function rp(a){return null==a?[]:Ts(a,kr(a))},q.functionsIn=function ip(a){return null==a?[]:Ts(a,ci(a))},q.groupBy=wl,q.initial=function Ud(a){return null!=a&&a.length?Yr(a,0,-1):[]},q.intersection=Gd,q.intersectionBy=Kc,q.intersectionWith=Wd,q.invert=ap,q.invertBy=sp,q.invokeMap=Sl,q.iteratee=Mu,q.keyBy=Tl,q.keys=kr,q.keysIn=ci,q.map=ei,q.mapKeys=function lp(a,s){var d={};return s=Wt(s,3),Ri(a,function(C,N,Y){po(d,s(C,N,Y),C)}),d},q.mapValues=function cp(a,s){var d={};return s=Wt(s,3),Ri(a,function(C,N,Y){po(d,N,s(C,N,Y))}),d},q.matches=function Yp(a){return bi(xi(a,1))},q.matchesProperty=function Xp(a,s){return $r(a,xi(s,1))},q.memoize=Su,q.merge=fp,q.mergeWith=Tf,q.method=Kp,q.methodOf=Jp,q.mixin=jl,q.negate=Tu,q.nthArg=function Zp(a){return a=on(a),fn(function(s){return sc(s,a)})},q.omit=dp,q.omitBy=function Fl(a,s){return Ef(a,Tu(Wt(s)))},q.once=function lf(a){return rf(2,a)},q.orderBy=function _o(a,s,d,C){return null==a?[]:(rn(s)||(s=null==s?[]:[s]),rn(d=C?g:d)||(d=null==d?[]:[d]),uc(a,s,d))},q.over=qp,q.overArgs=Ih,q.overEvery=eg,q.overSome=tg,q.partial=Il,q.partialRight=cf,q.partition=ss,q.pick=hp,q.pickBy=Ef,q.property=e,q.propertyOf=function n(a){return function(s){return null==a?g:oa(a,s)}},q.pull=Kd,q.pullAll=Jc,q.pullAllBy=function Jd(a,s,d){return a&&a.length&&s&&s.length?eu(a,s,Wt(d,2)):a},q.pullAllWith=function Qd(a,s,d){return a&&a.length&&s&&s.length?eu(a,s,g,d):a},q.pullAt=Zd,q.range=t,q.rangeRight=r,q.rearg=ff,q.reject=function _u(a,s){return(rn(a)?Rn:ql)(a,Tu(Wt(s,3)))},q.remove=function qd(a,s){var d=[];if(!a||!a.length)return d;var C=-1,N=[],Y=a.length;for(s=Wt(s,3);++C<Y;){var ae=a[C];s(ae,C,a)&&(d.push(ae),N.push(C))}return rl(a,N),d},q.rest=function df(a,s){if("function"!=typeof a)throw new Z(A);return fn(a,s=s===g?s:on(s))},q.reverse=ml,q.sampleSize=function bh(a,s,d){return s=(d?_n(a,s,d):s===g)?1:on(s),(rn(a)?Jf:ol)(a,s)},q.set=function gp(a,s,d){return null==a?a:es(a,s,d)},q.setWith=function vp(a,s,d,C){return C="function"==typeof C?C:g,null==a?a:es(a,s,d,C)},q.shuffle=function _h(a){return(rn(a)?Qf:Qt)(a)},q.slice=function eh(a,s,d){var C=null==a?0:a.length;return C?(d&&"number"!=typeof d&&_n(a,s,d)?(s=0,d=C):(s=null==s?0:on(s),d=d===g?C:on(d)),Yr(a,s,d)):[]},q.sortBy=wh,q.sortedUniq=function sh(a){return a&&a.length?sl(a):[]},q.sortedUniqBy=function uh(a,s){return a&&a.length?sl(a,Wt(s,2)):[]},q.split=function kp(a,s,d){return d&&"number"!=typeof d&&_n(a,s,d)&&(s=d=g),(d=d===g?rr:d>>>0)?(a=An(a))&&("string"==typeof s||null!=s&&!kl(s))&&!(s=_i(s))&&vr(a)?Qi(pn(a),0,d):a.split(s,d):[]},q.spread=function Ah(a,s){if("function"!=typeof a)throw new Z(A);return s=null==s?0:Tr(on(s),0),fn(function(d){var C=d[s],N=Qi(d,0,s);return C&&Ut(N,C),Ne(a,this,N)})},q.tail=function lh(a){var s=null==a?0:a.length;return s?Yr(a,1,s):[]},q.take=function ch(a,s,d){return a&&a.length?Yr(a,0,(s=d||s===g?1:on(s))<0?0:s):[]},q.takeRight=function fh(a,s,d){var C=null==a?0:a.length;return C?Yr(a,(s=C-(s=d||s===g?1:on(s)))<0?0:s,C):[]},q.takeRightWhile=function dh(a,s){return a&&a.length?iu(a,Wt(s,3),!1,!0):[]},q.takeWhile=function hh(a,s){return a&&a.length?iu(a,Wt(s,3)):[]},q.tap=function Cl(a,s){return s(a),a},q.throttle=function Mh(a,s,d){var C=!0,N=!0;if("function"!=typeof a)throw new Z(A);return Zn(d)&&(C="leading"in d?!!d.leading:C,N="trailing"in d?!!d.trailing:N),uf(a,s,{leading:C,maxWait:s,trailing:N})},q.thru=qr,q.toArray=Ds,q.toPairs=ja,q.toPairsIn=Pf,q.toPath=function I(a){return rn(a)?Bt(a,yo):wi(a)?[a]:si(hu(An(a)))},q.toPlainObject=_f,q.transform=function mp(a,s,d){var C=rn(a),N=C||Co(a)||ls(a);if(s=Wt(s,4),null==d){var Y=a&&a.constructor;d=N?C?new Y:[]:Zn(a)&&zo(Y)?ws(Sr(a)):{}}return(N?St:Ri)(a,function(ae,de,_e){return s(d,ae,de,_e)}),d},q.unary=function Al(a){return nf(a,1)},q.union=ph,q.unionBy=gh,q.unionWith=ft,q.uniq=function yl(a){return a&&a.length?sa(a):[]},q.uniqBy=function gu(a,s){return a&&a.length?sa(a,Wt(s,2)):[]},q.uniqWith=function xl(a,s){return s="function"==typeof s?s:g,a&&a.length?sa(a,g,s):[]},q.unset=function yp(a,s){return null==a||ru(a,s)},q.unzip=We,q.unzipWith=jo,q.update=function xp(a,s,d){return null==a?a:hc(a,s,ou(d))},q.updateWith=function bp(a,s,d,C){return C="function"==typeof C?C:g,null==a?a:hc(a,s,ou(d),C)},q.values=fs,q.valuesIn=function _p(a){return null==a?[]:un(a,ci(a))},q.without=to,q.words=Lf,q.wrap=function Eu(a,s){return Il(ou(s),a)},q.xor=ui,q.xorBy=fa,q.xorWith=Ls,q.zip=mt,q.zipObject=function bl(a,s){return gc(a||[],s||[],ra)},q.zipObjectDeep=function da(a,s){return gc(a||[],s||[],es)},q.zipWith=xo,q.entries=ja,q.entriesIn=Pf,q.extend=Nl,q.extendWith=cs,jl(q,q),q.add=G,q.attempt=Au,q.camelCase=If,q.capitalize=za,q.ceil=te,q.clamp=function Cp(a,s,d){return d===g&&(d=s,s=g),d!==g&&(d=(d=Fi(d))==d?d:0),s!==g&&(s=(s=Fi(s))==s?s:0),yi(Fi(a),s,d)},q.clone=function hf(a){return xi(a,4)},q.cloneDeep=function kh(a){return xi(a,5)},q.cloneDeepWith=function Oh(a,s){return xi(a,5,s="function"==typeof s?s:g)},q.cloneWith=function pf(a,s){return xi(a,4,s="function"==typeof s?s:g)},q.conformsTo=function Lh(a,s){return null==s||Wu(a,s,kr(s))},q.deburr=Af,q.defaultTo=function Nf(a,s){return null==a||a!=a?s:a},q.divide=oe,q.endsWith=function Ua(a,s,d){a=An(a),s=_i(s);var C=a.length,N=d=d===g?C:yi(on(d),0,C);return(d-=s.length)>=0&&a.slice(d,N)==s},q.eq=no,q.escape=function Mf(a){return(a=An(a))&&Kr.test(a)?a.replace(To,Nu):a},q.escapeRegExp=function Sp(a){return(a=An(a))&&or.test(a)?a.replace(Bi,"\\$&"):a},q.every=function Zc(a,s,d){var C=rn(a)?Vt:qf;return d&&_n(a,s,d)&&(s=g),C(a,Wt(s,3))},q.find=mu,q.findIndex=Wc,q.findKey=function qh(a,s){return Oo(a,Wt(s,3),Ri)},q.findLast=qc,q.findLastIndex=$c,q.findLastKey=function Sf(a,s){return Oo(a,Wt(s,3),Yu)},q.floor=Te,q.forEach=tf,q.forEachRight=bo,q.forIn=function Rl(a,s){return null==a?a:Qa(a,Wt(s,3),ci)},q.forInRight=function ep(a,s){return null==a?a:Za(a,Wt(s,3),ci)},q.forOwn=function tp(a,s){return a&&Ri(a,Wt(s,3))},q.forOwnRight=function np(a,s){return a&&Yu(a,Wt(s,3))},q.get=Fs,q.gt=Nh,q.gte=gf,q.has=function op(a,s){return null!=a&&Nc(a,s,Ku)},q.hasIn=Dl,q.head=Xc,q.identity=ti,q.includes=function xu(a,s,d,C){a=li(a)?a:fs(a),d=d&&!C?on(d):0;var N=a.length;return d<0&&(d=Tr(N+d,0)),Wo(a)?d<=N&&a.indexOf(s,d)>-1:!!N&&gr(a,s,d)>-1},q.indexOf=function zd(a,s,d){var C=null==a?0:a.length;if(!C)return-1;var N=null==d?0:on(d);return N<0&&(N=Tr(C+N,0)),gr(a,s,N)},q.inRange=function wp(a,s,d){return s=pa(s),d===g?(d=s,s=0):d=pa(d),function td(a,s,d){return a>=Wr(s,d)&&a<Tr(s,d)}(a=Fi(a),s,d)},q.invoke=up,q.isArguments=Ha,q.isArray=rn,q.isArrayBuffer=Rh,q.isArrayLike=li,q.isArrayLikeObject=dr,q.isBoolean=function Dh(a){return!0===a||!1===a||nr(a)&&Zr(a)==_t},q.isBuffer=Co,q.isDate=Ns,q.isElement=function Fh(a){return nr(a)&&1===a.nodeType&&!Rs(a)},q.isEmpty=function Vh(a){if(null==a)return!0;if(li(a)&&(rn(a)||"string"==typeof a||"function"==typeof a.splice||Co(a)||ls(a)||Ha(a)))return!a.length;var s=Xr(a);if(s==tn||s==Xe)return!a.size;if(Ms(a))return!el(a).length;for(var d in a)if(Ye.call(a,d))return!1;return!0},q.isEqual=function vf(a,s){return aa(a,s)},q.isEqualWith=function mf(a,s,d){var C=(d="function"==typeof d?d:g)?d(a,s):g;return C===g?aa(a,s,g,d):!!C},q.isError=Ml,q.isFinite=function Bh(a){return"number"==typeof a&&Ru(a)},q.isFunction=zo,q.isInteger=yf,q.isLength=Pu,q.isMap=Uo,q.isMatch=function Go(a,s){return a===s||qu(a,s,dl(s))},q.isMatchWith=function Hh(a,s,d){return d="function"==typeof d?d:g,qu(a,s,dl(s),d)},q.isNaN=function jh(a){return xf(a)&&a!=+a},q.isNative=function zh(a){if(Sd(a))throw new Jt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return nc(a)},q.isNil=function Gh(a){return null==a},q.isNull=function Uh(a){return null===a},q.isNumber=xf,q.isObject=Zn,q.isObjectLike=nr,q.isPlainObject=Rs,q.isRegExp=kl,q.isSafeInteger=function Ol(a){return yf(a)&&a>=-Ln&&a<=Ln},q.isSet=Ll,q.isString=Wo,q.isSymbol=wi,q.isTypedArray=ls,q.isUndefined=function Wh(a){return a===g},q.isWeakMap=function $h(a){return nr(a)&&Xr(a)==an},q.isWeakSet=function Yh(a){return nr(a)&&"[object WeakSet]"==Zr(a)},q.join=function $d(a,s){return null==a?"":Vf.call(a,s)},q.kebabCase=Tp,q.last=Ci,q.lastIndexOf=function Yd(a,s,d){var C=null==a?0:a.length;if(!C)return-1;var N=C;return d!==g&&(N=(N=on(d))<0?Tr(C+N,0):Wr(N,C-1)),s==s?function kn(Ee,Ze,je){for(var Ct=je+1;Ct--;)if(Ee[Ct]===Ze)return Ct;return Ct}(a,s,N):Ui(a,Hn,N,!0)},q.lowerCase=Ep,q.lowerFirst=Pp,q.lt=hg,q.lte=bf,q.max=function Pe(a){return a&&a.length?Zs(a,ti,Xu):g},q.maxBy=function Be(a,s){return a&&a.length?Zs(a,Wt(s,2),Xu):g},q.mean=function Re(a){return gi(a,ti)},q.meanBy=function O(a,s){return gi(a,Wt(s,2))},q.min=function z(a){return a&&a.length?Zs(a,ti,tl):g},q.minBy=function J(a,s){return a&&a.length?Zs(a,Wt(s,2),tl):g},q.stubArray=o,q.stubFalse=u,q.stubObject=function c(){return{}},q.stubString=function v(){return""},q.stubTrue=function m(){return!0},q.multiply=ie,q.nth=function Xd(a,s){return a&&a.length?sc(a,on(s)):g},q.noConflict=function Qp(){return l._===this&&(l._=ct),this},q.noop=zl,q.now=wu,q.pad=function Ip(a,s,d){a=An(a);var C=(s=on(s))?wn(a):0;if(!s||C>=s)return a;var N=(s-C)/2;return Is(ys(N),d)+a+Is($i(N),d)},q.padEnd=function Iu(a,s,d){a=An(a);var C=(s=on(s))?wn(a):0;return s&&C<s?a+Is(s-C,d):a},q.padStart=function Ap(a,s,d){a=An(a);var C=(s=on(s))?wn(a):0;return s&&C<s?Is(s-C,d)+a:a},q.parseInt=function Dr(a,s,d){return d||null==s?s=0:s&&(s=+s),jf(An(a).replace(Po,""),s||0)},q.random=function Vl(a,s,d){if(d&&"boolean"!=typeof d&&_n(a,s,d)&&(s=d=g),d===g&&("boolean"==typeof s?(d=s,s=g):"boolean"==typeof a&&(d=a,a=g)),a===g&&s===g?(a=0,s=1):(a=pa(a),s===g?(s=a,a=0):s=pa(s)),a>s){var C=a;a=s,s=C}if(d||a%1||s%1){var N=Yl();return Wr(a+N*(s-a+se("1e-"+((N+"").length-1))),s)}return tu(a,s)},q.reduce=function $t(a,s,d){var C=rn(a)?_r:Lo,N=arguments.length<3;return C(a,Wt(s,4),d,N,ia)},q.reduceRight=function bu(a,s,d){var C=rn(a)?gn:Lo,N=arguments.length<3;return C(a,Wt(s,4),d,N,$u)},q.repeat=function kf(a,s,d){return s=(d?_n(a,s,d):s===g)?1:on(s),il(An(a),s)},q.replace=function ds(){var a=arguments,s=An(a[0]);return a.length<3?s:s.replace(a[1],a[2])},q.result=function pp(a,s,d){var C=-1,N=(s=ua(s,a)).length;for(N||(N=1,a=g);++C<N;){var Y=null==a?g:a[yo(s[C])];Y===g&&(C=N,Y=d),a=zo(Y)?Y.call(a):Y}return a},q.round=ve,q.runInContext=Ee,q.sample=function Cu(a){return(rn(a)?Uu:ud)(a)},q.size=function Ch(a){if(null==a)return 0;if(li(a))return Wo(a)?wn(a):a.length;var s=Xr(a);return s==tn||s==Xe?a.size:el(a).length},q.snakeCase=Mp,q.some=function El(a,s,d){var C=rn(a)?Bn:Ji;return d&&_n(a,s,d)&&(s=g),C(a,Wt(s,3))},q.sortedIndex=function th(a,s){return nu(a,s)},q.sortedIndexBy=function nh(a,s,d){return al(a,s,Wt(d,2))},q.sortedIndexOf=function rh(a,s){var d=null==a?0:a.length;if(d){var C=nu(a,s);if(C<d&&no(a[C],s))return C}return-1},q.sortedLastIndex=function ih(a,s){return nu(a,s,!0)},q.sortedLastIndexBy=function oh(a,s,d){return al(a,s,Wt(d,2),!0)},q.sortedLastIndexOf=function ah(a,s){if(null!=a&&a.length){var C=nu(a,s,!0)-1;if(no(a[C],s))return C}return-1},q.startCase=Op,q.startsWith=function Lp(a,s,d){return a=An(a),d=null==d?0:yi(on(d),0,a.length),s=_i(s),a.slice(d,d+s.length)==s},q.subtract=Me,q.sum=function Oe(a){return a&&a.length?er(a,ti):0},q.sumBy=function Ge(a,s){return a&&a.length?er(a,Wt(s,2)):0},q.template=function Np(a,s,d){var C=q.templateSettings;d&&_n(a,s,d)&&(s=g),a=An(a),s=cs({},s,C,Ic);var de,_e,N=cs({},s.imports,C.imports,Ic),Y=kr(N),ae=un(N,Y),Le=0,De=s.interpolate||Ti,Fe="__p += '",qe=Ro((s.escape||Ti).source+"|"+De.source+"|"+(De===bt?gt:Ti).source+"|"+(s.evaluate||Ti).source+"|$","g"),at="//# sourceURL="+(Ye.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ea+"]")+"\n";a.replace(qe,function(dt,Rt,wt,jt,Gt,Et){return wt||(wt=jt),Fe+=a.slice(Le,Et).replace(ji,Wl),Rt&&(de=!0,Fe+="' +\n__e("+Rt+") +\n'"),Gt&&(_e=!0,Fe+="';\n"+Gt+";\n__p += '"),wt&&(Fe+="' +\n((__t = ("+wt+")) == null ? '' : __t) +\n'"),Le=Et+dt.length,dt}),Fe+="';\n";var xt=Ye.call(s,"variable")&&s.variable;if(xt){if(Hi.test(xt))throw new Jt("Invalid `variable` option passed into `_.template`")}else Fe="with (obj) {\n"+Fe+"\n}\n";Fe=(_e?Fe.replace(Kn,""):Fe).replace(So,"$1").replace(ga,"$1;"),Fe="function("+(xt||"obj")+") {\n"+(xt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(de?", __e = _.escape":"")+(_e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Fe+"return __p\n}";var Tt=Au(function(){return mn(Y,at+"return "+Fe).apply(g,ae)});if(Tt.source=Fe,Ml(Tt))throw Tt;return Tt},q.times=function T(a,s){if((a=on(a))<1||a>Ln)return[];var d=rr,C=Wr(a,rr);s=Wt(s),a-=rr;for(var N=vi(C,s);++d<a;)s(d);return N},q.toFinite=pa,q.toInteger=on,q.toLength=hr,q.toLower=function Rp(a){return An(a).toLowerCase()},q.toNumber=Fi,q.toSafeInteger=function Xh(a){return a?yi(on(a),-Ln,Ln):0===a?a:0},q.toString=An,q.toUpper=function Dp(a){return An(a).toUpperCase()},q.trim=function Of(a,s,d){if((a=An(a))&&(d||s===g))return Cn(a);if(!a||!(s=_i(s)))return a;var C=pn(a),N=pn(s);return Qi(C,Vs(C,N),Ou(C,N)+1).join("")},q.trimEnd=function Fp(a,s,d){if((a=An(a))&&(d||s===g))return a.slice(0,In(a)+1);if(!a||!(s=_i(s)))return a;var C=pn(a);return Qi(C,0,Ou(C,pn(s))+1).join("")},q.trimStart=function Vp(a,s,d){if((a=An(a))&&(d||s===g))return a.replace(Po,"");if(!a||!(s=_i(s)))return a;var C=pn(a);return Qi(C,Vs(C,pn(s))).join("")},q.truncate=function Bp(a,s){var d=30,C="...";if(Zn(s)){var N="separator"in s?s.separator:N;d="length"in s?on(s.length):d,C="omission"in s?_i(s.omission):C}var Y=(a=An(a)).length;if(vr(a)){var ae=pn(a);Y=ae.length}if(d>=Y)return a;var de=d-wn(C);if(de<1)return C;var _e=ae?Qi(ae,0,de).join(""):a.slice(0,de);if(N===g)return _e+C;if(ae&&(de+=_e.length-de),kl(N)){if(a.slice(de).search(N)){var Le,De=_e;for(N.global||(N=Ro(N.source,An(Ga.exec(N))+"g")),N.lastIndex=0;Le=N.exec(De);)var Fe=Le.index;_e=_e.slice(0,Fe===g?de:Fe)}}else if(a.indexOf(_i(N),de)!=de){var qe=_e.lastIndexOf(N);qe>-1&&(_e=_e.slice(0,qe))}return _e+C},q.unescape=function Hp(a){return(a=An(a))&&ye.test(a)?a.replace(ro,co):a},q.uniqueId=function b(a){var s=++ht;return An(a)+s},q.upperCase=jp,q.upperFirst=Bl,q.each=tf,q.eachRight=bo,q.first=Xc,jl(q,function(){var a={};return Ri(q,function(s,d){Ye.call(q.prototype,d)||(a[d]=s)}),a}(),{chain:!1}),q.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){q[a].placeholder=q}),St(["drop","take"],function(a,s){yn.prototype[a]=function(d){d=d===g?1:Tr(on(d),0);var C=this.__filtered__&&!s?new yn(this):this.clone();return C.__filtered__?C.__takeCount__=Wr(d,C.__takeCount__):C.__views__.push({size:Wr(d,rr),type:a+(C.__dir__<0?"Right":"")}),C},yn.prototype[a+"Right"]=function(d){return this.reverse()[a](d).reverse()}}),St(["filter","map","takeWhile"],function(a,s){var d=s+1,C=1==d||3==d;yn.prototype[a]=function(N){var Y=this.clone();return Y.__iteratees__.push({iteratee:Wt(N,3),type:d}),Y.__filtered__=Y.__filtered__||C,Y}}),St(["head","last"],function(a,s){var d="take"+(s?"Right":"");yn.prototype[a]=function(){return this[d](1).value()[0]}}),St(["initial","tail"],function(a,s){var d="drop"+(s?"":"Right");yn.prototype[a]=function(){return this.__filtered__?new yn(this):this[d](1)}}),yn.prototype.compact=function(){return this.filter(ti)},yn.prototype.find=function(a){return this.filter(a).head()},yn.prototype.findLast=function(a){return this.reverse().find(a)},yn.prototype.invokeMap=fn(function(a,s){return"function"==typeof a?new yn(this):this.map(function(d){return Es(d,a,s)})}),yn.prototype.reject=function(a){return this.filter(Tu(Wt(a)))},yn.prototype.slice=function(a,s){a=on(a);var d=this;return d.__filtered__&&(a>0||s<0)?new yn(d):(a<0?d=d.takeRight(-a):a&&(d=d.drop(a)),s!==g&&(d=(s=on(s))<0?d.dropRight(-s):d.take(s-a)),d)},yn.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},yn.prototype.toArray=function(){return this.take(rr)},Ri(yn.prototype,function(a,s){var d=/^(?:filter|find|map|reject)|While$/.test(s),C=/^(?:head|last)$/.test(s),N=q[C?"take"+("last"==s?"Right":""):s],Y=C||/^find/.test(s);!N||(q.prototype[s]=function(){var ae=this.__wrapped__,de=C?[1]:arguments,_e=ae instanceof yn,Le=de[0],De=_e||rn(ae),Fe=function(Rt){var wt=N.apply(q,Ut([Rt],de));return C&&qe?wt[0]:wt};De&&d&&"function"==typeof Le&&1!=Le.length&&(_e=De=!1);var qe=this.__chain__,at=!!this.__actions__.length,xt=Y&&!qe,Tt=_e&&!at;if(!Y&&De){ae=Tt?ae:new yn(this);var dt=a.apply(ae,de);return dt.__actions__.push({func:qr,args:[Fe],thisArg:g}),new Yi(dt,qe)}return xt&&Tt?a.apply(this,de):(dt=this.thru(Fe),xt?C?dt.value()[0]:dt.value():dt)})}),St(["pop","push","shift","sort","splice","unshift"],function(a){var s=he[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",C=/^(?:pop|shift)$/.test(a);q.prototype[a]=function(){var N=arguments;if(C&&!this.__chain__){var Y=this.value();return s.apply(rn(Y)?Y:[],N)}return this[d](function(ae){return s.apply(rn(ae)?ae:[],N)})}}),Ri(yn.prototype,function(a,s){var d=q[s];if(d){var C=d.name+"";Ye.call(Xa,C)||(Xa[C]=[]),Xa[C].push({name:s,func:d})}}),Xa[cu(g,2).name]=[{name:"wrapper",func:g}],yn.prototype.clone=function og(){var a=new yn(this.__wrapped__);return a.__actions__=si(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=si(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=si(this.__views__),a},yn.prototype.reverse=function ag(){if(this.__filtered__){var a=new yn(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},yn.prototype.value=function sg(){var a=this.__wrapped__.value(),s=this.__dir__,d=rn(a),C=s<0,N=d?a.length:0,Y=function bd(a,s,d){for(var C=-1,N=d.length;++C<N;){var Y=d[C],ae=Y.size;switch(Y.type){case"drop":a+=ae;break;case"dropRight":s-=ae;break;case"take":s=Wr(s,a+ae);break;case"takeRight":a=Tr(a,s-ae)}}return{start:a,end:s}}(0,N,this.__views__),ae=Y.start,de=Y.end,_e=de-ae,Le=C?de:ae-1,De=this.__iteratees__,Fe=De.length,qe=0,at=Wr(_e,this.__takeCount__);if(!d||!C&&N==_e&&at==_e)return pc(a,this.__actions__);var xt=[];e:for(;_e--&&qe<at;){for(var Tt=-1,dt=a[Le+=s];++Tt<Fe;){var Rt=De[Tt],jt=Rt.type,Gt=(0,Rt.iteratee)(dt);if(2==jt)dt=Gt;else if(!Gt){if(1==jt)continue e;break e}}xt[qe++]=dt}return xt},q.prototype.at=ha,q.prototype.chain=function Ba(){return _l(this)},q.prototype.commit=function $n(){return new Yi(this.value(),this.__chain__)},q.prototype.next=function as(){this.__values__===g&&(this.__values__=Ds(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?g:this.__values__[this.__index__++]}},q.prototype.plant=function vh(a){for(var s,d=this;d instanceof Hu;){var C=Uc(d);C.__index__=0,C.__values__=g,s?N.__wrapped__=C:s=C;var N=C;d=d.__wrapped__}return N.__wrapped__=a,s},q.prototype.reverse=function vu(){var a=this.__wrapped__;if(a instanceof yn){var s=a;return this.__actions__.length&&(s=new yn(this)),(s=s.reverse()).__actions__.push({func:qr,args:[ml],thisArg:g}),new Yi(s,this.__chain__)}return this.thru(ml)},q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=function mh(){return pc(this.__wrapped__,this.__actions__)},q.prototype.first=q.prototype.head,ms&&(q.prototype[ms]=function Qc(){return this}),q}();l._=mi,(p=function(){return mi}.call(W,f,W,P))!==g&&(P.exports=p)}.call(this)},19984:(P,W,f)=>{var p=f(84633),g=f(96517),S=f(92046),E=f(21503);P.exports=function x(A,k){return(E(A)?p:S)(A,g(k,3))}},10203:(P,W,f)=>{var p=f(85683),g=f(45184),S=f(96517);P.exports=function E(x,A){var k={};return A=S(A,3),g(x,function(M,H,j){p(k,H,A(M,H,j))}),k}},18176:(P,W,f)=>{var p=f(67308),g=f(31100),S=f(32608);P.exports=function E(x){return x&&x.length?p(x,S,g):void 0}},30535:(P,W,f)=>{var p=f(99850);function S(E,x){if("function"!=typeof E||null!=x&&"function"!=typeof x)throw new TypeError("Expected a function");var A=function(){var k=arguments,M=x?x.apply(this,k):k[0],H=A.cache;if(H.has(M))return H.get(M);var j=E.apply(this,k);return A.cache=H.set(M,j)||H,j};return A.cache=new(S.Cache||p),A}S.Cache=p,P.exports=S},80567:(P,W,f)=>{var p=f(73842),S=f(84944)(function(E,x,A){p(E,x,A)});P.exports=S},29439:(P,W,f)=>{var p=f(67308),g=f(99069),S=f(32608);P.exports=function E(x){return x&&x.length?p(x,S,g):void 0}},29525:(P,W,f)=>{var p=f(67308),g=f(96517),S=f(99069);P.exports=function E(x,A){return x&&x.length?p(x,g(A,2),S):void 0}},12552:P=>{P.exports=function W(){}},31710:(P,W,f)=>{var p=f(12119);P.exports=function(){return p.Date.now()}},16372:(P,W,f)=>{var p=f(83021),S=f(3975)(function(E,x){return null==E?{}:p(E,x)});P.exports=S},87495:(P,W,f)=>{var p=f(11847),g=f(39222),S=f(45352),E=f(68533);P.exports=function x(A){return S(A)?p(E(A)):g(A)}},90361:(P,W,f)=>{var g=f(97509)();P.exports=g},81337:(P,W,f)=>{var p=f(8745),g=f(43132),S=f(96517),E=f(13570),x=f(21503);P.exports=function A(k,M,H){var j=x(k)?p:E,L=arguments.length<3;return j(k,S(M,4),H,L,g)}},55637:(P,W,f)=>{var p=f(81172),g=f(28794),S=f(56507),E=f(30248),x=f(52315);P.exports=function M(H){if(null==H)return 0;if(S(H))return E(H)?x(H):H.length;var j=g(H);return"[object Map]"==j||"[object Set]"==j?H.size:p(H).length}},12906:(P,W,f)=>{var p=f(50686),g=f(6119),S=f(23269),E=f(93342),x=S(function(A,k){if(null==A)return[];var M=k.length;return M>1&&E(A,k[0],k[1])?k=[]:M>2&&E(k[0],k[1],k[2])&&(k=[k[0]]),g(A,p(k,1),[])});P.exports=x},49975:P=>{P.exports=function W(){return[]}},63580:P=>{P.exports=function W(){return!1}},12232:(P,W,f)=>{var p=f(51467),g=1/0;P.exports=function E(x){return x?(x=p(x))===g||x===-g?17976931348623157e292*(x<0?-1:1):x==x?x:0:0===x?x:0}},44401:(P,W,f)=>{var p=f(12232);P.exports=function g(S){var E=p(S),x=E%1;return E==E?x?E-x:E:0}},51467:(P,W,f)=>{var p=f(83348),g=f(25940),S=f(44129),x=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,k=/^0o[0-7]+$/i,M=parseInt;P.exports=function H(j){if("number"==typeof j)return j;if(S(j))return NaN;if(g(j)){var L="function"==typeof j.valueOf?j.valueOf():j;j=g(L)?L+"":L}if("string"!=typeof j)return 0===j?j:+j;j=p(j);var K=A.test(j);return K||k.test(j)?M(j.slice(2),K?2:8):x.test(j)?NaN:+j}},8067:(P,W,f)=>{var p=f(31989),g=f(16555);P.exports=function S(E){return p(E,g(E))}},73943:(P,W,f)=>{var p=f(93935);P.exports=function g(S){return null==S?"":p(S)}},89416:(P,W,f)=>{var p=f(96837),g=f(78858),S=f(45184),E=f(96517),x=f(29519),A=f(21503),k=f(80891),M=f(75946),H=f(25940),j=f(48159);P.exports=function L(K,ne,fe){var i=A(K),ue=i||k(K)||j(K);if(ne=E(ne,4),null==fe){var me=K&&K.constructor;fe=ue?i?new me:[]:H(K)&&M(me)?g(x(K)):{}}return(ue?p:S)(K,function(ge,ee,xe){return ne(fe,ge,ee,xe)}),fe}},68921:(P,W,f)=>{var p=f(50686),g=f(23269),S=f(80707),E=f(21330),x=g(function(A){return S(p(A,1,E,!0))});P.exports=x},51541:(P,W,f)=>{var p=f(73943),g=0;P.exports=function S(E){var x=++g;return p(E)+x}},90377:(P,W,f)=>{var p=f(19179),g=f(118);P.exports=function S(E){return null==E?[]:p(E,g(E))}},21617:(P,W,f)=>{var p=f(89719),g=f(38645);P.exports=function S(E,x){return g(E||[],x||[],p)}},29610:function(P){P.exports=function(){var W="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},p=Array.prototype,g=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,E=p.push,x=p.slice,A=g.toString,k=g.hasOwnProperty,M="undefined"!=typeof ArrayBuffer,H="undefined"!=typeof DataView,j=Array.isArray,L=Object.keys,K=Object.create,ne=M&&ArrayBuffer.isView,fe=isNaN,i=isFinite,ue=!{toString:null}.propertyIsEnumerable("toString"),me=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ge=Math.pow(2,53)-1;function ee(B,Q){return Q=null==Q?B.length-1:+Q,function(){for(var se=Math.max(arguments.length-Q,0),pe=Array(se),ke=0;ke<se;ke++)pe[ke]=arguments[ke+Q];switch(Q){case 0:return B.call(this,pe);case 1:return B.call(this,arguments[0],pe);case 2:return B.call(this,arguments[0],arguments[1],pe)}var Se=Array(Q+1);for(ke=0;ke<Q;ke++)Se[ke]=arguments[ke];return Se[Q]=pe,B.apply(this,Se)}}function xe(B){var Q=typeof B;return"function"===Q||"object"===Q&&!!B}function Ie(B){return void 0===B}function He(B){return!0===B||!1===B||"[object Boolean]"===A.call(B)}function _(B){var Q="[object "+B+"]";return function(se){return A.call(se)===Q}}var Ue=_("String"),rt=_("Number"),nt=_("Date"),ot=_("RegExp"),ut=_("Error"),yt=_("Symbol"),Mt=_("ArrayBuffer"),Yt=_("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(Yt=function(B){return"function"==typeof B||!1});var Dt=Yt,Ln=_("Object"),mr=H&&Ln(new DataView(new ArrayBuffer(8))),Fr="undefined"!=typeof Map&&Ln(new Map),rr=_("DataView"),Xn=mr?function(B){return null!=B&&Dt(B.getInt8)&&Mt(B.buffer)}:rr,yr=j||_("Array");function Fn(B,Q){return null!=B&&k.call(B,Q)}var $e=_("Arguments");!function(){$e(arguments)||($e=function(B){return Fn(B,"callee")})}();var tt=$e;function st(B){return rt(B)&&fe(B)}function _t(B){return function(){return B}}function Ft(B){return function(Q){var se=B(Q);return"number"==typeof se&&se>=0&&se<=ge}}function qt(B){return function(Q){return null==Q?void 0:Q[B]}}var kt=qt("byteLength"),jn=Ft(kt),fi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,tn=M?function(B){return ne?ne(B)&&!Xn(B):jn(B)&&fi.test(A.call(B))}:_t(!1),Xt=qt("length");function R(B,Q){Q=function(l){for(var h={},y=l.length,w=0;w<y;++w)h[l[w]]=!0;return{contains:function(D){return!0===h[D]},push:function(D){return h[D]=!0,l.push(D)}}}(Q);var se=me.length,pe=B.constructor,ke=Dt(pe)&&pe.prototype||g,Se="constructor";for(Fn(B,Se)&&!Q.contains(Se)&&Q.push(Se);se--;)(Se=me[se])in B&&B[Se]!==ke[Se]&&!Q.contains(Se)&&Q.push(Se)}function U(B){if(!xe(B))return[];if(L)return L(B);var Q=[];for(var se in B)Fn(B,se)&&Q.push(se);return ue&&R(B,Q),Q}function re(B,Q){var se=U(Q),pe=se.length;if(null==B)return!pe;for(var ke=Object(B),Se=0;Se<pe;Se++){var l=se[Se];if(Q[l]!==ke[l]||!(l in ke))return!1}return!0}function be(B){return B instanceof be?B:this instanceof be?void(this._wrapped=B):new be(B)}function Ke(B){return new Uint8Array(B.buffer||B,B.byteOffset||0,kt(B))}be.VERSION=W,be.prototype.valueOf=be.prototype.toJSON=be.prototype.value=function(){return this._wrapped},be.prototype.toString=function(){return String(this._wrapped)};var Xe="[object DataView]";function pt(B,Q,se,pe){if(B===Q)return 0!==B||1/B==1/Q;if(null==B||null==Q)return!1;if(B!=B)return Q!=Q;var ke=typeof B;return("function"===ke||"object"===ke||"object"==typeof Q)&&function Se(l,h,y,w){l instanceof be&&(l=l._wrapped),h instanceof be&&(h=h._wrapped);var D=A.call(l);if(D!==A.call(h))return!1;if(mr&&"[object Object]"==D&&Xn(l)){if(!Xn(h))return!1;D=Xe}switch(D){case"[object RegExp]":case"[object String]":return""+l==""+h;case"[object Number]":return+l!=+l?+h!=+h:0==+l?1/+l==1/h:+l==+h;case"[object Date]":case"[object Boolean]":return+l==+h;case"[object Symbol]":return S.valueOf.call(l)===S.valueOf.call(h);case"[object ArrayBuffer]":case Xe:return Se(Ke(l),Ke(h),y,w)}var F="[object Array]"===D;if(!F&&tn(l)){if(kt(l)!==kt(h))return!1;if(l.buffer===h.buffer&&l.byteOffset===h.byteOffset)return!0;F=!0}if(!F){if("object"!=typeof l||"object"!=typeof h)return!1;var X=l.constructor,le=h.constructor;if(X!==le&&!(Dt(X)&&X instanceof X&&Dt(le)&&le instanceof le)&&"constructor"in l&&"constructor"in h)return!1}w=w||[];for(var ce=(y=y||[]).length;ce--;)if(y[ce]===l)return w[ce]===h;if(y.push(l),w.push(h),F){if((ce=l.length)!==h.length)return!1;for(;ce--;)if(!pt(l[ce],h[ce],y,w))return!1}else{var we,ze=U(l);if(ce=ze.length,U(h).length!==ce)return!1;for(;ce--;)if(!Fn(h,we=ze[ce])||!pt(l[we],h[we],y,w))return!1}return y.pop(),w.pop(),!0}(B,Q,se,pe)}function Ot(B){if(!xe(B))return[];var Q=[];for(var se in B)Q.push(se);return ue&&R(B,Q),Q}function Lt(B){var Q=Xt(B);return function(se){if(null==se)return!1;var pe=Ot(se);if(Xt(pe))return!1;for(var ke=0;ke<Q;ke++)if(!Dt(se[B[ke]]))return!1;return B!==Vr||!Dt(se[an])}}var an="forEach",nn=["clear","delete"],zn=["get","has","set"],Nn=nn.concat(an,zn),Vr=nn.concat(zn),Sn=["add"].concat(nn,an,"has"),Pt=Fr?Lt(Nn):_("Map"),Mn=Fr?Lt(Vr):_("WeakMap"),Vn=Fr?Lt(Sn):_("Set"),ir=_("WeakSet");function Br(B){for(var Q=U(B),se=Q.length,pe=Array(se),ke=0;ke<se;ke++)pe[ke]=B[Q[ke]];return pe}function qn(B){for(var Q={},se=U(B),pe=0,ke=se.length;pe<ke;pe++)Q[B[se[pe]]]=se[pe];return Q}function Kn(B){var Q=[];for(var se in B)Dt(B[se])&&Q.push(se);return Q.sort()}function So(B,Q){return function(se){var pe=arguments.length;if(Q&&(se=Object(se)),pe<2||null==se)return se;for(var ke=1;ke<pe;ke++)for(var Se=arguments[ke],l=B(Se),h=l.length,y=0;y<h;y++){var w=l[y];Q&&void 0!==se[w]||(se[w]=Se[w])}return se}}var ga=So(Ot),ro=So(U),To=So(Ot,!0);function ye(B){if(!xe(B))return{};if(K)return K(B);var Q=function(){};Q.prototype=B;var se=new Q;return Q.prototype=null,se}function Kr(B){return yr(B)?B:[B]}function Vi(B){return be.toPath(B)}function Eo(B,Q){for(var se=Q.length,pe=0;pe<se;pe++){if(null==B)return;B=B[Q[pe]]}return se?B:void 0}function bt(B,Q,se){var pe=Eo(B,Vi(Q));return Ie(pe)?se:pe}function Hr(B){return B}function io(B){return B=ro({},B),function(Q){return re(Q,B)}}function oo(B){return B=Vi(B),function(Q){return Eo(Q,B)}}function Bi(B,Q,se){if(void 0===Q)return B;switch(null==se?3:se){case 1:return function(pe){return B.call(Q,pe)};case 3:return function(pe,ke,Se){return B.call(Q,pe,ke,Se)};case 4:return function(pe,ke,Se,l){return B.call(Q,pe,ke,Se,l)}}return function(){return B.apply(Q,arguments)}}function or(B,Q,se){return null==B?Hr:Dt(B)?Bi(B,Q,se):xe(B)&&!yr(B)?io(B):oo(B)}function Po(B,Q){return or(B,Q,1/0)}function xr(B,Q,se){return be.iteratee!==Po?be.iteratee(B,Q):or(B,Q,se)}function va(){}function ma(B,Q){return null==Q&&(Q=B,B=0),B+Math.floor(Math.random()*(Q-B+1))}be.toPath=Kr,be.iteratee=Po;var Pr=Date.now||function(){return(new Date).getTime()};function $o(B){var Q=function(Se){return B[Se]},se="(?:"+U(B).join("|")+")",pe=RegExp(se),ke=RegExp(se,"g");return function(Se){return pe.test(Se=null==Se?"":""+Se)?Se.replace(ke,Q):Se}}var Hi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Yo=$o(Hi),gt=$o(qn(Hi)),Ga=be.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Si=/(.)^/,ya={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xa=/\\|'|\r|\n|\u2028|\u2029/g;function Tn(B){return"\\"+ya[B]}var Io=/^\s*(\w|\$)+\s*$/,ps=0;function Ti(B,Q,se,pe,ke){if(!(pe instanceof Q))return B.apply(se,ke);var Se=ye(B.prototype),l=B.apply(Se,ke);return xe(l)?l:Se}var ji=ee(function(B,Q){var se=ji.placeholder,pe=function(){for(var ke=0,Se=Q.length,l=Array(Se),h=0;h<Se;h++)l[h]=Q[h]===se?arguments[ke++]:Q[h];for(;ke<arguments.length;)l.push(arguments[ke++]);return Ti(B,pe,this,this,l)};return pe});ji.placeholder=be;var Ei=ee(function(B,Q,se){if(!Dt(B))throw new TypeError("Bind must be called on a function");var pe=ee(function(ke){return Ti(B,pe,Q,this,se.concat(ke))});return pe}),Kt=Ft(Xt);function jr(B,Q,se,pe){if(pe=pe||[],Q||0===Q){if(Q<=0)return pe.concat(B)}else Q=1/0;for(var ke=pe.length,Se=0,l=Xt(B);Se<l;Se++){var h=B[Se];if(Kt(h)&&(yr(h)||tt(h)))if(Q>1)jr(h,Q-1,se,pe),ke=pe.length;else for(var y=0,w=h.length;y<w;)pe[ke++]=h[y++];else se||(pe[ke++]=h)}return pe}var It=ee(function(B,Q){var se=(Q=jr(Q,!1,!1)).length;if(se<1)throw new Error("bindAll must be passed function names");for(;se--;){var pe=Q[se];B[pe]=Ei(B[pe],B)}return B}),Ir=ee(function(B,Q,se){return setTimeout(function(){return B.apply(null,se)},Q)}),di=ji(Ir,be,1);function dn(B){return function(){return!B.apply(this,arguments)}}function Pi(B,Q){var se;return function(){return--B>0&&(se=Q.apply(this,arguments)),B<=1&&(Q=null),se}}var pr=ji(Pi,2);function ba(B,Q,se){Q=xr(Q,se);for(var pe,ke=U(B),Se=0,l=ke.length;Se<l;Se++)if(Q(B[pe=ke[Se]],pe,B))return pe}function Ii(B){return function(Q,se,pe){se=xr(se,pe);for(var ke=Xt(Q),Se=B>0?0:ke-1;Se>=0&&Se<ke;Se+=B)if(se(Q[Se],Se,Q))return Se;return-1}}var Ai=Ii(1),hi=Ii(-1);function Mi(B,Q,se,pe){for(var ke=(se=xr(se,pe,1))(Q),Se=0,l=Xt(B);Se<l;){var h=Math.floor((Se+l)/2);se(B[h])<ke?Se=h+1:l=h}return Se}function Ao(B,Q,se){return function(pe,ke,Se){var l=0,h=Xt(pe);if("number"==typeof Se)B>0?l=Se>=0?Se:Math.max(Se+h,l):h=Se>=0?Math.min(Se+1,h):Se+h+1;else if(se&&Se&&h)return pe[Se=se(pe,ke)]===ke?Se:-1;if(ke!=ke)return(Se=Q(x.call(pe,l,h),st))>=0?Se+l:-1;for(Se=B>0?l:h-1;Se>=0&&Se<h;Se+=B)if(pe[Se]===ke)return Se;return-1}}var Wa=Ao(1,Ai,Mi),br=Ao(-1,hi);function ar(B,Q,se){var pe=(Kt(B)?Ai:ba)(B,Q,se);if(void 0!==pe&&-1!==pe)return B[pe]}function sr(B,Q,se){var pe,ke;if(Q=Bi(Q,se),Kt(B))for(pe=0,ke=B.length;pe<ke;pe++)Q(B[pe],pe,B);else{var Se=U(B);for(pe=0,ke=Se.length;pe<ke;pe++)Q(B[Se[pe]],Se[pe],B)}return B}function Or(B,Q,se){Q=xr(Q,se);for(var pe=!Kt(B)&&U(B),ke=(pe||B).length,Se=Array(ke),l=0;l<ke;l++){var h=pe?pe[l]:l;Se[l]=Q(B[h],h,B)}return Se}function Xo(B){var Q=function(se,pe,ke,Se){var l=!Kt(se)&&U(se),h=(l||se).length,y=B>0?0:h-1;for(Se||(ke=se[l?l[y]:y],y+=B);y>=0&&y<h;y+=B){var w=l?l[y]:y;ke=pe(ke,se[w],w,se)}return ke};return function(se,pe,ke,Se){var l=arguments.length>=3;return Q(se,Bi(pe,Se,4),ke,l)}}var Mo=Xo(1),Jr=Xo(-1);function Ar(B,Q,se){var pe=[];return Q=xr(Q,se),sr(B,function(ke,Se,l){Q(ke,Se,l)&&pe.push(ke)}),pe}function ki(B,Q,se){Q=xr(Q,se);for(var pe=!Kt(B)&&U(B),ke=(pe||B).length,Se=0;Se<ke;Se++){var l=pe?pe[Se]:Se;if(!Q(B[l],l,B))return!1}return!0}function ao(B,Q,se){Q=xr(Q,se);for(var pe=!Kt(B)&&U(B),ke=(pe||B).length,Se=0;Se<ke;Se++){var l=pe?pe[Se]:Se;if(Q(B[l],l,B))return!0}return!1}function Lr(B,Q,se,pe){return Kt(B)||(B=Br(B)),("number"!=typeof se||pe)&&(se=0),Wa(B,Q,se)>=0}var Oi=ee(function(B,Q,se){var pe,ke;return Dt(Q)?ke=Q:(Q=Vi(Q),pe=Q.slice(0,-1),Q=Q[Q.length-1]),Or(B,function(Se){var l=ke;if(!l){if(pe&&pe.length&&(Se=Eo(Se,pe)),null==Se)return;l=Se[Q]}return null==l?l:l.apply(Se,se)})});function ri(B,Q){return Or(B,oo(Q))}function zi(B,Q,se){var pe,ke,Se=-1/0,l=-1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof B[0]&&null!=B)for(var h=0,y=(B=Kt(B)?B:Br(B)).length;h<y;h++)null!=(pe=B[h])&&pe>Se&&(Se=pe);else Q=xr(Q,se),sr(B,function(w,D,F){((ke=Q(w,D,F))>l||ke===-1/0&&Se===-1/0)&&(Se=w,l=ke)});return Se}var Ko=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Jo(B){return B?yr(B)?x.call(B):Ue(B)?B.match(Ko):Kt(B)?Or(B,Hr):Br(B):[]}function ko(B,Q,se){if(null==Q||se)return Kt(B)||(B=Br(B)),B[ma(B.length-1)];var pe=Jo(B),ke=Xt(pe);Q=Math.max(Math.min(Q,ke),0);for(var Se=ke-1,l=0;l<Q;l++){var h=ma(l,Se),y=pe[l];pe[l]=pe[h],pe[h]=y}return pe.slice(0,Q)}function so(B,Q){return function(se,pe,ke){var Se=Q?[[],[]]:{};return pe=xr(pe,ke),sr(se,function(l,h){var y=pe(l,h,se);B(Se,l,y)}),Se}}var _a=so(function(B,Q,se){Fn(B,se)?B[se].push(Q):B[se]=[Q]}),Qo=so(function(B,Q,se){B[se]=Q}),Ca=so(function(B,Q,se){Fn(B,se)?B[se]++:B[se]=1}),Zo=so(function(B,Q,se){B[se?0:1].push(Q)},!0);function wa(B,Q,se){return Q in se}var Sa=ee(function(B,Q){var se={},pe=Q[0];if(null==B)return se;Dt(pe)?(Q.length>1&&(pe=Bi(pe,Q[1])),Q=Ot(B)):(pe=wa,Q=jr(Q,!1,!1),B=Object(B));for(var ke=0,Se=Q.length;ke<Se;ke++){var l=Q[ke],h=B[l];pe(h,l,B)&&(se[l]=h)}return se}),$a=ee(function(B,Q){var se,pe=Q[0];return Dt(pe)?(pe=dn(pe),Q.length>1&&(se=Q[1])):(Q=Or(jr(Q,!1,!1),String),pe=function(ke,Se){return!Lr(Q,Se)}),Sa(B,pe,se)});function Ta(B,Q,se){return x.call(B,0,Math.max(0,B.length-(null==Q||se?1:Q)))}function qo(B,Q,se){return null==B||B.length<1?null==Q||se?void 0:[]:null==Q||se?B[0]:Ta(B,B.length-Q)}function ii(B,Q,se){return x.call(B,null==Q||se?1:Q)}var uo=ee(function(B,Q){return Q=jr(Q,!0,!0),Ar(B,function(se){return!Lr(Q,se)})}),Ya=ee(function(B,Q){return uo(B,Q)});function Li(B,Q,se,pe){He(Q)||(pe=se,se=Q,Q=!1),null!=se&&(se=xr(se,pe));for(var ke=[],Se=[],l=0,h=Xt(B);l<h;l++){var y=B[l],w=se?se(y,l,B):y;Q&&!se?(l&&Se===w||ke.push(y),Se=w):se?Lr(Se,w)||(Se.push(w),ke.push(y)):Lr(ke,y)||ke.push(y)}return ke}var pi=ee(function(B){return Li(jr(B,!0,!0))});function ea(B){for(var Q=B&&zi(B,Xt).length||0,se=Array(Q),pe=0;pe<Q;pe++)se[pe]=ri(B,pe);return se}var Pn=ee(ea);function Ve(B,Q){return B._chain?be(Q).chain():Q}function Nr(B){return sr(Kn(B),function(Q){var se=be[Q]=B[Q];be.prototype[Q]=function(){var pe=[this._wrapped];return E.apply(pe,arguments),Ve(this,se.apply(be,pe))}}),be}sr(["pop","push","reverse","shift","sort","splice","unshift"],function(B){var Q=p[B];be.prototype[B]=function(){var se=this._wrapped;return null!=se&&(Q.apply(se,arguments),"shift"!==B&&"splice"!==B||0!==se.length||delete se[0]),Ve(this,se)}}),sr(["concat","join","slice"],function(B){var Q=p[B];be.prototype[B]=function(){var se=this._wrapped;return null!=se&&(se=Q.apply(se,arguments)),Ve(this,se)}});var Rr=Nr({__proto__:null,VERSION:W,restArguments:ee,isObject:xe,isNull:function(B){return null===B},isUndefined:Ie,isBoolean:He,isElement:function(B){return!(!B||1!==B.nodeType)},isString:Ue,isNumber:rt,isDate:nt,isRegExp:ot,isError:ut,isSymbol:yt,isArrayBuffer:Mt,isDataView:Xn,isArray:yr,isFunction:Dt,isArguments:tt,isFinite:function(B){return!yt(B)&&i(B)&&!isNaN(parseFloat(B))},isNaN:st,isTypedArray:tn,isEmpty:function(B){if(null==B)return!0;var Q=Xt(B);return"number"==typeof Q&&(yr(B)||Ue(B)||tt(B))?0===Q:0===Xt(U(B))},isMatch:re,isEqual:function(B,Q){return pt(B,Q)},isMap:Pt,isWeakMap:Mn,isSet:Vn,isWeakSet:ir,keys:U,allKeys:Ot,values:Br,pairs:function(B){for(var Q=U(B),se=Q.length,pe=Array(se),ke=0;ke<se;ke++)pe[ke]=[Q[ke],B[Q[ke]]];return pe},invert:qn,functions:Kn,methods:Kn,extend:ga,extendOwn:ro,assign:ro,defaults:To,create:function(B,Q){var se=ye(B);return Q&&ro(se,Q),se},clone:function(B){return xe(B)?yr(B)?B.slice():ga({},B):B},tap:function(B,Q){return Q(B),B},get:bt,has:function(B,Q){for(var se=(Q=Vi(Q)).length,pe=0;pe<se;pe++){var ke=Q[pe];if(!Fn(B,ke))return!1;B=B[ke]}return!!se},mapObject:function(B,Q,se){Q=xr(Q,se);for(var pe=U(B),ke=pe.length,Se={},l=0;l<ke;l++){var h=pe[l];Se[h]=Q(B[h],h,B)}return Se},identity:Hr,constant:_t,noop:va,toPath:Kr,property:oo,propertyOf:function(B){return null==B?va:function(Q){return bt(B,Q)}},matcher:io,matches:io,times:function(B,Q,se){var pe=Array(Math.max(0,B));Q=Bi(Q,se,1);for(var ke=0;ke<B;ke++)pe[ke]=Q(ke);return pe},random:ma,now:Pr,escape:Yo,unescape:gt,templateSettings:Ga,template:function(B,Q,se){!Q&&se&&(Q=se),Q=To({},Q,be.templateSettings);var pe=RegExp([(Q.escape||Si).source,(Q.interpolate||Si).source,(Q.evaluate||Si).source].join("|")+"|$","g"),ke=0,Se="__p+='";B.replace(pe,function(w,D,F,X,le){return Se+=B.slice(ke,le).replace(xa,Tn),ke=le+w.length,D?Se+="'+\n((__t=("+D+"))==null?'':_.escape(__t))+\n'":F?Se+="'+\n((__t=("+F+"))==null?'':__t)+\n'":X&&(Se+="';\n"+X+"\n__p+='"),w}),Se+="';\n";var l,h=Q.variable;if(h){if(!Io.test(h))throw new Error("variable is not a bare identifier: "+h)}else Se="with(obj||{}){\n"+Se+"}\n",h="obj";Se="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Se+"return __p;\n";try{l=new Function(h,"_",Se)}catch(w){throw w.source=Se,w}var y=function(w){return l.call(this,w,be)};return y.source="function("+h+"){\n"+Se+"}",y},result:function(B,Q,se){var pe=(Q=Vi(Q)).length;if(!pe)return Dt(se)?se.call(B):se;for(var ke=0;ke<pe;ke++){var Se=null==B?void 0:B[Q[ke]];void 0===Se&&(Se=se,ke=pe),B=Dt(Se)?Se.call(B):Se}return B},uniqueId:function(B){var Q=++ps+"";return B?B+Q:Q},chain:function(B){var Q=be(B);return Q._chain=!0,Q},iteratee:Po,partial:ji,bind:Ei,bindAll:It,memoize:function(B,Q){var se=function(pe){var ke=se.cache,Se=""+(Q?Q.apply(this,arguments):pe);return Fn(ke,Se)||(ke[Se]=B.apply(this,arguments)),ke[Se]};return se.cache={},se},delay:Ir,defer:di,throttle:function(B,Q,se){var pe,ke,Se,l,h=0;se||(se={});var y=function(){h=!1===se.leading?0:Pr(),pe=null,l=B.apply(ke,Se),pe||(ke=Se=null)},w=function(){var D=Pr();h||!1!==se.leading||(h=D);var F=Q-(D-h);return ke=this,Se=arguments,F<=0||F>Q?(pe&&(clearTimeout(pe),pe=null),h=D,l=B.apply(ke,Se),pe||(ke=Se=null)):pe||!1===se.trailing||(pe=setTimeout(y,F)),l};return w.cancel=function(){clearTimeout(pe),h=0,pe=ke=Se=null},w},debounce:function(B,Q,se){var pe,ke,Se,l,h,y=function(){var D=Pr()-ke;Q>D?pe=setTimeout(y,Q-D):(pe=null,se||(l=B.apply(h,Se)),pe||(Se=h=null))},w=ee(function(D){return h=this,Se=D,ke=Pr(),pe||(pe=setTimeout(y,Q),se&&(l=B.apply(h,Se))),l});return w.cancel=function(){clearTimeout(pe),pe=Se=h=null},w},wrap:function(B,Q){return ji(Q,B)},negate:dn,compose:function(){var B=arguments,Q=B.length-1;return function(){for(var se=Q,pe=B[Q].apply(this,arguments);se--;)pe=B[se].call(this,pe);return pe}},after:function(B,Q){return function(){if(--B<1)return Q.apply(this,arguments)}},before:Pi,once:pr,findKey:ba,findIndex:Ai,findLastIndex:hi,sortedIndex:Mi,indexOf:Wa,lastIndexOf:br,find:ar,detect:ar,findWhere:function(B,Q){return ar(B,io(Q))},each:sr,forEach:sr,map:Or,collect:Or,reduce:Mo,foldl:Mo,inject:Mo,reduceRight:Jr,foldr:Jr,filter:Ar,select:Ar,reject:function(B,Q,se){return Ar(B,dn(xr(Q)),se)},every:ki,all:ki,some:ao,any:ao,contains:Lr,includes:Lr,include:Lr,invoke:Oi,pluck:ri,where:function(B,Q){return Ar(B,io(Q))},max:zi,min:function(B,Q,se){var pe,ke,Se=1/0,l=1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof B[0]&&null!=B)for(var h=0,y=(B=Kt(B)?B:Br(B)).length;h<y;h++)null!=(pe=B[h])&&pe<Se&&(Se=pe);else Q=xr(Q,se),sr(B,function(w,D,F){((ke=Q(w,D,F))<l||ke===1/0&&Se===1/0)&&(Se=w,l=ke)});return Se},shuffle:function(B){return ko(B,1/0)},sample:ko,sortBy:function(B,Q,se){var pe=0;return Q=xr(Q,se),ri(Or(B,function(ke,Se,l){return{value:ke,index:pe++,criteria:Q(ke,Se,l)}}).sort(function(ke,Se){var l=ke.criteria,h=Se.criteria;if(l!==h){if(l>h||void 0===l)return 1;if(l<h||void 0===h)return-1}return ke.index-Se.index}),"value")},groupBy:_a,indexBy:Qo,countBy:Ca,partition:Zo,toArray:Jo,size:function(B){return null==B?0:Kt(B)?B.length:U(B).length},pick:Sa,omit:$a,first:qo,head:qo,take:qo,initial:Ta,last:function(B,Q,se){return null==B||B.length<1?null==Q||se?void 0:[]:null==Q||se?B[B.length-1]:ii(B,Math.max(0,B.length-Q))},rest:ii,tail:ii,drop:ii,compact:function(B){return Ar(B,Boolean)},flatten:function(B,Q){return jr(B,Q,!1)},without:Ya,uniq:Li,unique:Li,union:pi,intersection:function(B){for(var Q=[],se=arguments.length,pe=0,ke=Xt(B);pe<ke;pe++){var Se=B[pe];if(!Lr(Q,Se)){var l;for(l=1;l<se&&Lr(arguments[l],Se);l++);l===se&&Q.push(Se)}}return Q},difference:uo,unzip:ea,transpose:ea,zip:Pn,object:function(B,Q){for(var se={},pe=0,ke=Xt(B);pe<ke;pe++)Q?se[B[pe]]=Q[pe]:se[B[pe][0]]=B[pe][1];return se},range:function(B,Q,se){null==Q&&(Q=B||0,B=0),se||(se=Q<B?-1:1);for(var pe=Math.max(Math.ceil((Q-B)/se),0),ke=Array(pe),Se=0;Se<pe;Se++,B+=se)ke[Se]=B;return ke},chunk:function(B,Q){if(null==Q||Q<1)return[];for(var se=[],pe=0,ke=B.length;pe<ke;)se.push(x.call(B,pe,pe+=Q));return se},mixin:Nr,default:be});return Rr._=Rr,Rr}()}}]);