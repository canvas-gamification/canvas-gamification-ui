(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[969],{79969:(E,W,f)=>{"use strict";f.r(W),f.d(W,{CourseModule:()=>$v});var g={};f.r(g),f.d(g,{ellipseWithEllipse:()=>ia,ellipseWithLine:()=>_r,exists:()=>go,lineWithLine:()=>Br,pathWithEllipse:()=>xa,pathWithLine:()=>Fo,pathWithPath:()=>Xa,pathWithPolygon:()=>Vo,pathWithPolyline:()=>Ya,pathWithRect:()=>vs,polygonWithEllipse:()=>yo,polygonWithLine:()=>mo,polygonWithPolygon:()=>Do,polygonWithPolyline:()=>aa,polygonWithRect:()=>Ro,polylineWithEllipse:()=>li,polylineWithLine:()=>ui,polylineWithPolyline:()=>vo,polylineWithRect:()=>Xr,rectWithEllipse:()=>oa,rectWithLine:()=>Ni,rectWithRect:()=>qi});var v={};f.r(v),f.d(v,{Curve:()=>en,Ellipse:()=>Ar,Line:()=>St,Path:()=>Lt,Point:()=>ye,Polygon:()=>Vr,Polyline:()=>An,Rect:()=>bt,bezier:()=>ra,ellipse:()=>ea,intersection:()=>sa,line:()=>si,normalizeAngle:()=>Xe,point:()=>mi,random:()=>xn,rect:()=>$a,scale:()=>Qe,snapToGrid:()=>wt,toDeg:()=>Ft,toRad:()=>Vt,types:()=>Ot});var S={};f.r(S),f.d(S,{absolute:()=>fi,bottom:()=>vd,ellipse:()=>yd,ellipseSpread:()=>md,fn:()=>qn,left:()=>xo,line:()=>wa,right:()=>Lr,top:()=>yu});var T={};f.r(T),f.d(T,{bottom:()=>bd,inside:()=>al,insideOriented:()=>wd,left:()=>_d,manual:()=>xd,outside:()=>mc,outsideOriented:()=>Cd,radial:()=>$s,radialOriented:()=>sl,right:()=>$r,top:()=>di});var y={};f.r(y),f.d(y,{manhattan:()=>xl,metro:()=>Dd,normal:()=>ts,oneSide:()=>Md,orthogonal:()=>pl});var I={};f.r(I),f.d(I,{curve:()=>Is,jumpover:()=>Sl,normal:()=>Hd,rounded:()=>Tl,smooth:()=>Ac});var O={};f.r(O),f.d(O,{addClass:()=>Fc,mask:()=>Ui,opacity:()=>Ma,stroke:()=>Al});var A={};f.r(A),f.d(A,{connectionClosest:()=>Hc,connectionLength:()=>Vc,connectionPerpendicular:()=>Aa,connectionRatio:()=>Nu,resolveRef:()=>rs});var D={};f.r(D),f.d(D,{anchor:()=>Gc,bbox:()=>Uc,boundary:()=>jo,rectangle:()=>Pi});var B={};f.r(B),f.d(B,{bottom:()=>Kd,bottomLeft:()=>Xc,bottomRight:()=>Kc,center:()=>$c,left:()=>Yc,midSide:()=>Jc,modelCenter:()=>ju,perpendicular:()=>Hu,right:()=>Os,top:()=>Wc,topLeft:()=>qs,topRight:()=>Jd});var k=f(69808),Y=f(75197),te=f(6741),ue=f(22233),i=f(5e3),ae=f(21137),pe=f(17448),le=f(25635),K=f(93075),ve=f(9419),we=f(46421),ke=f(99848);let b=(()=>{class e{transform(t,r){return t.is_teacher||r.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function Ue(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,t))}}function at(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ue,3,5,"ng-container",6),i.\u0275\u0275pipe(2,"tuiFilter"),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function Ge(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const Re=function(){return[0,0,0,0,0,0]};function Ne(e,n){1&e&&i.\u0275\u0275template(0,Ge,2,1,"ng-container",6),2&e&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,Re))}let tt=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.route=r,this.courseService=o,this.STATUS=ue.Q,this.courseNameSearch="",this.matchCourseName=(s,c)=>""===c||s.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(pe.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(s){return r.courseNameSearch=s}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,at,3,5,"ng-container",4),i.\u0275\u0275template(7,Ne,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",o)}},directives:[le.K3,le.wU,K.NgControlStatus,K.NgModel,ve.be,k.O5,k.sg,we.V],pipes:[ke.S,b],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class Je{static createForm(){return(new K.FormBuilder).group({code:new K.FormControl("",[K.Validators.required])})}static extractData(n){return n.value}}var pt=f(4024),_t=f(769),gt=f(46693),on=f(96063),gn=f(8871);const Vn=["stepper"];function $n(e,n){1&e&&i.\u0275\u0275element(0,"div",5)}function Bn(e,n){1&e&&i.\u0275\u0275element(0,"div",6)}const dr=function(e){return["/course",e]};function Gn(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",7),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8)(4,"a",9),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,dr,t.courseId))}}function We(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",10),i.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function qe(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",11),i.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"form",12),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onSubmit()}),i.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),i.\u0275\u0275text(6," Enter verification code\xa0"),i.\u0275\u0275element(7,"span",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",8)(10,"button",17),i.\u0275\u0275text(11," Register "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.form),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("showLoader",t.loadingContent)}}function ct(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,$n,1,0,"div",3),i.\u0275\u0275template(4,Bn,1,0,"div",4),i.\u0275\u0275template(5,Gn,6,3,"ng-container",1),i.\u0275\u0275template(6,We,3,0,"ng-container",1),i.\u0275\u0275template(7,qe,12,3,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function Ct(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",18),i.\u0275\u0275element(2,"tui-marker-icon",19),i.\u0275\u0275elementStart(3,"h1",20),i.\u0275\u0275text(4," Unable to find the course for registration. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",21),i.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd())}let kt=(()=>{class e{constructor(t,r,o,s,c){this.route=t,this.router=r,this.courseService=o,this.changeDetector=s,this.notificationsService=c,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=Je.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1,this.registered=t.course_reg.is_verified,this.blocked=t.course_reg.is_blocked,t.registration_mode===ue.J.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const t=Je.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,t).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(pe.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(pt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Vn,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,ct,8,10,"ng-container",1),i.\u0275\u0275template(2,Ct,7,0,"ng-container",1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.courseNotFound),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[k.O5,_t.Ls,gt.v0,te.yS,K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,le.K3,le.wU,K.NgControlStatus,K.FormControlName,ve.be,on.y,gn.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();var pn=f(37080),Rt=f(58259),hr=f(59695),ki=f.n(hr),vn=f(85510),un=f.n(vn),N=f(17489);const{round:U,floor:re,PI:xe}=Math,Qe={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},Xe=function(e){return e%360+(e<0?360:0)},wt=function(e,n){return n*U(e/n)},Ft=function(e){return 180*e/xe%360},Vt=function(e,n){return(e=(n=n||!1)?e:e%360)*xe/180},xn=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return re(Math.random()*(n-e+1)+e)},{cos:In,sin:mn,atan2:pr}=Math,or=function(e,n){var t=Vt(e.y),r=Vt(n.y),c=Vt(n.x-e.x),p=mn(c)*In(r),m=In(t)*mn(r)-mn(t)*In(r)*In(c),_=Ft(pr(p,m))-22.5;return _<0&&(_+=360),["NE","E","SE","S","SW","W","NW","N"][_=parseInt(_/45)]},oi=function(e,n){var t=e.x,r=e.y;return(t-=n.x)*t+(r-=n.y)*r},Un=function(e,n){return Math.sqrt(oi(e,n))},Ot={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Jn,cos:ur,sin:Mr,sqrt:ai,min:Cr,max:xr,atan2:Qo,round:ja,pow:Oo,PI:Zo}=Math,ye=function(e,n){if(!(this instanceof ye))return new ye(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};ye.fromPolar=function(e,n,t){t=new ye(t);var r=Jn(e*ur(n)),o=Jn(e*Mr(n)),s=Xe(Ft(n));return s<90?o=-o:s<180?(r=-r,o=-o):s<270&&(r=-r),new ye(t.x+r,t.y+o)},ye.random=function(e,n,t,r){return new ye(xn(e,n),xn(t,r))},ye.prototype={type:Ot.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new ye(e[0]);for(var t=null,r=1/0,o=0;o<n;o++){var s=new ye(e[o]),c=this.squaredDistance(s);c<r&&(t=s,r=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Cr(xr(this.x,e.x),e.x+e.width),this.y=Cr(xr(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return or(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new ye(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new ye(this.x-(e||0),this.y-(n||0))},distance:function(e){return Un(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new ye((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return ai(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Jn(e.x-this.x)+Jn(e.y-this.y)},move:function(e,n){var t=Vt(new ye(e).theta(this));return this.offset(ur(t)*n,-Mr(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new ye(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new ye(0,0),n=Vt(Xe(-n));var t=ur(n),r=Mr(n),s=r*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=s,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Oo(10,e)}return this.x=ja(this.x*n)/n,this.y=ja(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new ye(t)||new ye(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=wt(this.x,e),this.y=wt(this.y,n||e),this},squaredDistance:function(e){return oi(this,e)},theta:function(e){e=new ye(e);var r=Qo(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*Zo+r),180*r/Zo},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ye(e)||new ye(0,0);var n=this.x,t=this.y;return this.x=ai((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=Vt(e.theta(new ye(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new ye(0,0).angleBetween(this,e)}},ye.prototype.translate=ye.prototype.offset;const mi=ye,{max:uo,min:qo}=Math,St=function(e,n){return this instanceof St?e instanceof St?new St(e.start,e.end):(this.start=new ye(e),void(this.end=new ye(n))):new St(e,n)};St.prototype={type:Ot.Line,angle:function(){var e=new ye(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=qo(this.start.x,this.end.x),n=qo(this.start.y,this.end.y),t=uo(this.start.x,this.end.x),r=uo(this.start.y,this.end.y);return new bt(e,n,t-e,r-n)},bearing:function(){return or(this.start,this.end)},clone:function(){return new St(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new St(this.start,e).vector()),t=qo(1,uo(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var r=this.length();return!(new St(n,e).length()>r||new St(e,t).length()>r)},divideAt:function(e){var n=this.pointAt(e);return[new St(this.start,n),new St(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new St(this.start,n),new St(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof St&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new ye(this.end.x-this.start.x,this.end.y-this.start.y),t=new ye(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*t.y-n.y*t.x,o=new ye(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*t.y-o.y*t.x,c=o.x*n.y-o.y*n.x;if(0===r||s*r<0||c*r<0)return null;if(r>0){if(s>r||c>r)return null}else if(s<r||c<r)return null;return[new ye(this.start.x+s*n.x/r,this.start.y+s*n.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Un(this.start,this.end)},midpoint:function(){return new ye((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:r}=n,o=t.clone().rotate(r,270),s=r.clone().rotate(t,90);return t.move(s,e),r.move(o,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,r=!0;e<0&&(r=!1,e=-e);var o=this.length();return e>=o?r?t.clone():n.clone():this.pointAt((r?e:o-e)/o)},pointOffset:function(e){e=new ye(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return oi(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAt(e),o=new St(n,t);return o.translate(r.x-n.x,r.y-n.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAtLength(e),o=new St(n,t);return o.translate(r.x-n.x,r.y-n.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new ye(this.end.x-this.start.x,this.end.y-this.start.y)}},St.prototype.intersection=St.prototype.intersect;const si=St,{sqrt:ko,round:Lo,pow:lo}=Math,Ar=function(e,n,t){return this instanceof Ar?e instanceof Ar?new Ar(new ye(e.x,e.y),e.a,e.b):(e=new ye(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new Ar(e,n,t)};Ar.fromRect=function(e){return e=new bt(e),new Ar(e.center(),e.width/2,e.height/2)},Ar.prototype={type:Ot.Ellipse,bbox:function(){return new bt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ye(this.x,this.y)},clone:function(){return new Ar(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,r=e.end,o=this.a,s=this.b,c=e.vector(),p=t.difference(new ye(this)),m=new ye(c.x/(o*o),c.y/(s*s)),C=new ye(p.x/(o*o),p.y/(s*s)),M=c.dot(m),_=c.dot(C),ne=_*_-M*(p.dot(C)-1);if(ne<0)return null;if(ne>0){var oe=ko(ne),Te=(-_-oe)/M,Pe=(-_+oe)/M;if((Te<0||1<Te)&&(Pe<0||1<Pe))return null;0<=Te&&Te<=1&&n.push(t.lerp(r,Te)),0<=Pe&&Pe<=1&&n.push(t.lerp(r,Pe))}else{var ze=-_/M;if(!(0<=ze&&ze<=1))return null;n.push(t.lerp(r,ze))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new ye(e),n&&e.rotate(new ye(this.x,this.y),n);var o,t=e.x-this.x,r=e.y-this.y;if(0===t)return o=this.bbox().pointNearestToPoint(e),n?o.rotate(new ye(this.x,this.y),-n):o;var s=r/t,C=ko(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return o=new ye(this.x+(C=t<0?-C:C),this.y+s*C),n?o.rotate(new ye(this.x,this.y),-n):o},normalizedDistance:function(e){var n=e.x,t=e.y,r=this.a,o=this.b,s=this.x,c=this.y;return(n-s)*(n-s)/(r*r)+(t-c)*(t-c)/(o*o)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=lo(10,e)}return this.x=Lo(this.x*n)/n,this.y=Lo(this.y*n)/n,this.a=Lo(this.a*n)/n,this.b=Lo(this.b*n)/n,this},tangentTheta:function(e){var _,G,t=e.x,r=e.y,o=this.a,s=this.b,c=this.bbox().center(),p=c.x,m=c.y;return t>c.x+o/2||t<c.x-o/2?G=o*o/(t-p)-o*o*(r-m)*((_=t>c.x?r-30:r+30)-m)/(s*s*(t-p))+p:_=s*s/(r-m)-s*s*(t-p)*((G=r>c.y?t+30:t-30)-p)/(o*o*(r-m))+m,new ye(G,_).theta(e)},toString:function(){return new ye(this.x,this.y).toString()+" "+this.a+" "+this.b}};const ea=Ar,{abs:zr,cos:za,sin:Ga,min:Yr,max:va,round:co,pow:Ua}=Math,bt=function(e,n,t,r){if(!(this instanceof bt))return new bt(e,n,t,r);Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===r?0:r};bt.fromEllipse=function(e){return e=new Ar(e),new bt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},bt.fromPointUnion=function(...e){if(0===e.length)return null;const n=new ye;let t,r,o,s;t=r=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const p=n.x,m=n.y;p<t&&(t=p),p>o&&(o=p),m<r&&(r=m),m>s&&(s=m)}return new bt(t,r,o-t,s-r)},bt.fromRectUnion=function(...e){if(0===e.length)return null;const n=new bt;let t,r,o,s;t=r=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const p=n.x,m=n.y,C=p+n.width,M=m+n.height;p<t&&(t=p),C>o&&(o=C),m<r&&(r=m),M>s&&(s=M)}return new bt(t,r,o-t,s-r)},bt.prototype={type:Ot.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,r=Vt(e),o=zr(Ga(r)),s=zr(za(r)),c=n*s+t*o,p=n*o+t*s;return this.x+=(n-c)/2,this.y+=(t-p)/2,this.width=c,this.height=p,this},bottomLeft:function(){return new ye(this.x,this.y+this.height)},bottomLine:function(){return new St(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ye(this.x+this.width/2,this.y+this.height)},center:function(){return new ye(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new bt(this)},containsPoint:function(e){return(e=new ye(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new bt(this).normalize(),t=new bt(e).normalize(),r=n.width,o=n.height,s=t.width,c=t.height;if(!(r&&o&&s&&c))return!1;var p=n.x,m=n.y,C=t.x,M=t.y;return s+=C,r+=p,c+=M,o+=m,p<=C&&s<=r&&m<=M&&c<=o},corner:function(){return new ye(this.x+this.width,this.y+this.height)},equals:function(e){var n=new bt(this).normalize(),t=new bt(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),r=e.origin(),o=e.corner();if(o.x<=n.x||o.y<=n.y||r.x>=t.x||r.y>=t.y)return null;var s=va(n.x,r.x),c=va(n.y,r.y);return new bt(s,c,Yr(t.x,o.x)-s,Yr(t.y,o.y)-c)},intersectionWithLine:function(e){var s,c,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],r=[],o=[],p=t.length;for(c=0;c<p;c++)null!==(s=e.intersect(t[c]))&&o.indexOf(s.toString())<0&&(r.push(s),o.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new ye(e);var r,t=new ye(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new St(t,e),c=o.length-1;c>=0;--c){var p=o[c].intersection(s);if(null!==p){r=p;break}}return r&&n&&r.rotate(t,-n),r},leftLine:function(){return new St(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ye(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new bt(e),n||(n=e.center());var t,r,o,s,c,p,m,C,M=n.x,_=n.y;t=r=o=s=c=p=m=C=1/0;var G=e.topLeft();G.x<M&&(t=(this.x-M)/(G.x-M)),G.y<_&&(c=(this.y-_)/(G.y-_));var ne=e.bottomRight();ne.x>M&&(r=(this.x+this.width-M)/(ne.x-M)),ne.y>_&&(p=(this.y+this.height-_)/(ne.y-_));var oe=e.topRight();oe.x>M&&(o=(this.x+this.width-M)/(oe.x-M)),oe.y<_&&(m=(this.y-_)/(oe.y-_));var Te=e.bottomLeft();return Te.x<M&&(s=(this.x-M)/(Te.x-M)),Te.y>_&&(C=(this.y+this.height-_)/(Te.y-_)),{sx:Yr(t,r,o,s),sy:Yr(c,p,m,C)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return Yr(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,r=-this.height),this.x=e,this.y=n,this.width=t,this.height=r,this},offset:function(e,n){return ye.prototype.offset.call(this,e,n)},origin:function(){return new ye(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ye(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new ye(this.x+this.width,e.y);case"left":return new ye(this.x,e.y);case"bottom":return new ye(e.x,this.y+this.height);case"top":return new ye(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new St(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ye(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Ua(10,e)}return this.x=co(this.x*n)/n,this.y=co(this.y*n)/n,this.width=co(this.width*n)/n,this.height=co(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new ye(e);var t=this.x+this.width-e.x,r=e.y-this.y,s=e.x-this.x,c="left";return t<s&&(s=t,c="right"),r<s&&(s=r,c="top"),this.y+this.height-e.y<s&&(c="bottom"),c},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),r=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=r.x-t.x,this.height=r.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new St(this.topLeft(),this.topRight())},topMiddle:function(){return new ye(this.x+this.width/2,this.y)},topRight:function(){return new ye(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return bt.fromRectUnion(this,e)},update:function(e,n,t,r){return Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=r||0,this}},bt.prototype.bottomRight=bt.prototype.corner,bt.prototype.topLeft=bt.prototype.origin,bt.prototype.translate=bt.prototype.offset;const $a=bt;function ma(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),r=t.length;for(let o=0;o<r;o+=2)n.push({x:+t[o],y:+t[o+1]});return n}function Wa(e){const n=e.length;if(0===n)return[];const t=[];for(let r=0;r<n;r++){const o=e[r].clone();t.push(o)}return t}function ps(e){const{abs:n}=Math;var t,r,s,o=e.length;if(0===o)return[];for(t=0;t<o;t++)(void 0===s||e[t].y<s.y||e[t].y===s.y&&e[t].x>s.x)&&(s=e[t]);var c=[];for(t=0;t<o;t++){var p=s.theta(e[t]);0===p&&(p=360),c.push([e[t],t,p])}c.sort(function(xt,Pt){var It=xt[2]-Pt[2];return 0===It&&(It=Pt[1]-xt[1]),It}),c.length>2&&c.unshift(c[c.length-1]);for(var G,ne,oe,Te,Pe,ze,M={},_=[];0!==c.length;)if(ne=(G=c.pop())[0],!M.hasOwnProperty(G[0]+"@@"+G[1]))for(var Be=!1;!Be;)if(_.length<2)_.push(G),Be=!0;else{Te=(oe=_.pop())[0];var L=(ze=(Pe=_.pop())[0]).cross(Te,ne);if(L<0)_.push(Pe),_.push(oe),_.push(G),Be=!0;else if(0===L){var J=Te.angleBetween(ze,ne);n(J-180)<1e-10||Te.equals(ne)||ze.equals(Te)?(M[oe[0]+"@@"+oe[1]]=Te,_.push(Pe)):n((J+1)%360-1)<1e-10&&(_.push(Pe),c.push(oe))}else M[oe[0]+"@@"+oe[1]]=Te,_.push(Pe)}_.length>2&&_.pop();var ie,me=-1;for(r=_.length,t=0;t<r;t++){var Ie=_[t][1];(void 0===ie||Ie<ie)&&(ie=Ie,me=t)}var Le=[];if(me>0){var Ye=_.slice(me),dt=_.slice(0,me);Le=Ye.concat(dt)}else Le=_;var ut=[];for(r=Le.length,t=0;t<r;t++)ut.push(Le[t][0]);return ut}const An=function(e){return this instanceof An?"string"==typeof e?new An.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new An(e)};An.parse=function(e){return new An(ma(e))},An.fromRect=function(e){return new An([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},An.prototype={type:Ot.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,r=-1/0,o=this.points,s=o.length;if(0===s)return null;for(var c=0;c<s;c++){var p=o[c],m=p.x,C=p.y;m<e&&(e=m),m>n&&(n=m),C<t&&(t=C),C>r&&(r=C)}return new bt(e,t,n-e,r-t)},clone:function(){return new An(Wa(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var r,o=1/0,s=0,c=t-1,p=0;p<c;p++){var m=new St(n[p],n[p+1]),C=m.length(),M=m.closestPointNormalizedLength(e),G=m.pointAt(M).squaredDistance(e);G<o&&(o=G,r=s+M*C),s+=C}return r},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var r=e.x,o=e.y,s=t-1,c=0,p=0,m=new St,C=new St,M=new ye;c<t;c++){var _=n[s],G=n[c];if(e.equals(_)||(m.start=_,m.end=G,m.containsPoint(e)))return!0;if(o<=_.y&&o>G.y||o>_.y&&o<=G.y){var ne=_.x-r>G.x-r?_.x-r:G.x-r;ne>=0&&(M.x=r+ne,M.y=o,C.start=e,C.end=M,m.intersect(C)&&p++)}s=c}return p%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new An(ps(this.points))},equals:function(e){if(!e)return!1;var n=this.points,r=n.length;if(e.points.length!==r)return!1;for(var o=0;o<r;o++)if(!n[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var n=new St(e),t=[],r=this.lengthPoints(),o=new St,s=0,c=r.length-1;s<c;s++){o.start=r[s],o.end=r[s+1];var p=n.intersectionWithLine(o);p&&t.push(p[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new St,r=n-1,o=0;o<r;o++)if(t.start=e[o],t.end=e[o+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,r=n-1,o=0;o<r;o++)t+=e[o].distance(e[o+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var o=0,s=t-1,c=0;c<s;c++){var p=r?c:s-1-c,m=n[p],C=n[p+1],M=new St(m,C),_=m.distance(C);if(e<=o+_)return M.pointAtLength((r?1:-1)*(e-o));o+=_}return(r?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.points,o=r.length,s=0;s<o;s++)r[s].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let r=0;for(;n[r+2];){const s=r+1,m=n[s];new St(n[r],n[r+2]).closestPoint(m).distance(m)<=t?n.splice(s,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o,s=0,c=t-1,p=0;p<c;p++){var m=r?p:c-1-p,C=n[m],M=n[m+1],_=new St(C,M),G=C.distance(M);if(_.isDifferentiable()){if(e<=s+G)return _.tangentAtLength((r?1:-1)*(e-s));o=_}s+=G}return o?o.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",r=0;r<n;r++){var o=e[r];t+=o.x+","+o.y+" "}return t.trim()}},Object.defineProperty(An.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(An.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:ta,sqrt:gs,min:fo,max:Ji,pow:ho}=Math,en=function(e,n,t,r){return this instanceof en?e instanceof en?new en(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new ye(e),this.controlPoint1=new ye(n),this.controlPoint2=new ye(t),void(this.end=new ye(r))):new en(e,n,t,r)};function yi(e){var n,t,r=[];for(t=arguments.length,n=1;n<t;n++)r.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(t=r.length,n=0;n<t;n++){var c,p,s=r[n];for(p in s)s.hasOwnProperty(p)&&(delete o[p],c=Object.getOwnPropertyDescriptor(s,p),Object.defineProperty(o,p,c))}return o}en.throughPoints=function(){function n(t){var r=t.length,o=[],s=[],c=2;o[0]=t[0]/c;for(var p=1;p<r;p++)s[p]=1/c,o[p]=(t[p]-o[p-1])/(c=(p<r-1?4:3.5)-s[p]);for(p=1;p<r;p++)o[r-p-1]-=s[r-p]*o[r-p];return o}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function e(t){var c,r=[],o=[],s=t.length-1;if(1==s)return r[0]=new ye((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new ye(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,o];var p=[];for(c=1;c<s-1;c++)p[c]=4*t[c].x+2*t[c+1].x;p[0]=t[0].x+2*t[1].x,p[s-1]=(8*t[s-1].x+t[s].x)/2;var m=n(p);for(c=1;c<s-1;++c)p[c]=4*t[c].y+2*t[c+1].y;p[0]=t[0].y+2*t[1].y,p[s-1]=(8*t[s-1].y+t[s].y)/2;var C=n(p);for(c=0;c<s;c++)r.push(new ye(m[c],C[c])),o.push(c<s-1?new ye(2*t[c+1].x-m[c+1],2*t[c+1].y-C[c+1]):new ye((t[s].x+m[s-1])/2,(t[s].y+C[s-1])/2));return[r,o]}(t),o=[],s=r[0].length,c=0;c<s;c++){var p=new ye(r[0][c].x,r[0][c].y),m=new ye(r[1][c].x,r[1][c].y);o.push(new en(t[c],p,m,t[c+1]))}return o}}(),en.prototype={type:Ot.Curve,bbox:function(){for(var Te,Pe,ze,Be,L,z,J,ie,e=this.start,n=this.controlPoint1,t=this.controlPoint2,r=this.end,o=e.x,s=e.y,c=n.x,p=n.y,m=t.x,C=t.y,M=r.x,_=r.y,G=new Array,ne=new Array,oe=[new Array,new Array],me=0;me<2;++me)if(0===me?(Pe=6*o-12*c+6*m,Te=-3*o+9*c-9*m+3*M,ze=3*c-3*o):(Pe=6*s-12*p+6*C,Te=-3*s+9*p-9*C+3*_,ze=3*p-3*s),ta(Te)<1e-12){if(ta(Pe)<1e-12)continue;0<(Be=-ze/Pe)&&Be<1&&ne.push(Be)}else ie=gs(J=Pe*Pe-4*ze*Te),!(J<0)&&(0<(L=(-Pe+ie)/(2*Te))&&L<1&&ne.push(L),0<(z=(-Pe-ie)/(2*Te))&&z<1&&ne.push(z));for(var Ye,dt,ut,Ie=ne.length,Le=Ie;Ie--;)oe[0][Ie]=dt=(Ye=1-(Be=ne[Ie]))*Ye*Ye*o+3*Ye*Ye*Be*c+3*Ye*Be*Be*m+Be*Be*Be*M,oe[1][Ie]=ut=Ye*Ye*Ye*s+3*Ye*Ye*Be*p+3*Ye*Be*Be*C+Be*Be*Be*_,G[Ie]={X:dt,Y:ut};ne[Le]=0,ne[Le+1]=1,G[Le]={X:o,Y:s},G[Le+1]={X:M,Y:_},oe[0][Le]=o,oe[1][Le]=s,oe[0][Le+1]=M,oe[1][Le+1]=_,ne.length=Le+2,oe[0].length=Le+2,oe[1].length=Le+2,G.length=Le+2;var xt=fo.apply(null,oe[0]),Pt=fo.apply(null,oe[1]),It=Ji.apply(null,oe[0]),Gt=Ji.apply(null,oe[1]);return new bt(xt,Pt,It-xt,Gt-Pt)},clone:function(){return new en(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.closestPointLength(e,o);if(!s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){for(var o,s,c,p,m,C,M,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,r=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,_=r.length,G=_?1/_:0,ne=0;ne<_;ne++){var oe=r[ne],Te=oe.start.distance(e),Pe=oe.end.distance(e),ze=Te+Pe;(!M||ze<M)&&(o=oe,s=ne*G,c=(ne+1)*G,p=Te,m=Pe,C=oe.start.distance(oe.end),M=ze)}for(var Be=ho(10,-t);;){var L=p?ta(p-m)/p:0,z=m?ta(p-m)/m:0;if(L<Be||z<Be||!p||p<C*Be||!m||m<C*Be)return p<=m?s:c;var Le=o.divide(.5);G/=2;var Ye=Le[0].start.distance(e),dt=Le[0].end.distance(e),ut=Ye+dt,xt=Le[1].start.distance(e),Pt=Le[1].end.distance(e);ut<=xt+Pt?(o=Le[0],c-=G,p=Ye,m=dt):(o=Le[1],s+=G,p=xt,m=Pt)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return[new en(n,n,n,n),new en(n,t,r,o)];if(e>=1)return[new en(n,t,r,o),new en(o,o,o,o)];var s=this.getSkeletonPoints(e),m=s.divider,C=s.dividerControlPoint1,M=s.dividerControlPoint2;return[new en(n,s.startControlPoint1,s.startControlPoint2,m),new en(m,C,M,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var s=new St(n,t).pointAt(e),c=new St(t,r).pointAt(e),p=new St(r,o).pointAt(e),m=new St(s,c).pointAt(e),C=new St(c,p).pointAt(e);return{startControlPoint1:s,startControlPoint2:m,divider:new St(m,C).pointAt(e),dividerControlPoint1:C,dividerControlPoint2:p}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new en(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var r=this.endpointDistance(),o=ho(10,-n),s=0;;){s+=1;for(var c=[],p=t.length,m=0;m<p;m++){var M=t[m].divide(.5);c.push(M[0],M[1])}for(var _=0,G=c.length,ne=0;ne<G;ne++)_+=c[ne].endpointDistance();if(s>1&&(0!==_?(_-r)/_:0)<o)return c;t=c,r=_}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,o=t.length,s=0;s<o;s++)r+=t[s].endpointDistance();return r},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,o=n.divider,s=new St(t,n.dividerControlPoint1);return s.translate(o.x-t.x,o.y-t.y),s},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.length(o);return this.tAtLength(s*e,o)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var c,p,m,C,M,r=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.subdivisions?this.getSubdivisions({precision:r}):n.subdivisions,s={precision:r,subdivisions:o},_=0,G=o.length,ne=1/G,oe=0;oe<G;oe++){var Te=t?oe:G-1-oe,Pe=o[oe],ze=Pe.endpointDistance();if(e<=_+ze){c=Pe,p=Te*ne,m=(Te+1)*ne,C=t?e-_:ze+_-e,M=t?ze+_-e:e-_;break}_+=ze}if(!c)return t?1:0;for(var Be=this.length(s),L=ho(10,-r);;){if((0!==Be?C/Be:0)<L)return p;if((0!==Be?M/Be:0)<L)return m;var J,ie,me=c.divide(.5);ne/=2;var Ie=me[0].endpointDistance(),Le=me[1].endpointDistance();C<=Ie?(c=me[0],m-=ne,ie=Ie-(J=C)):(c=me[1],p+=ne,ie=Le-(J=C-Ie)),C=J,M=ie}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[t[0].start.clone()],o=t.length,s=0;s<o;s++)r.push(t[s].end.clone());return r},toPolyline:function(e){return new An(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},en.prototype.divide=en.prototype.divideAtT;const Lt=function(e){if(!(this instanceof Lt))return new Lt(e);if("string"==typeof e)return new Lt.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(p,m){return p.concat(m)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var o=null;for(n=0;n<t;n++){var s=e[n];if(!(s instanceof St||s instanceof en))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(Lt.createSegment("M",s.start)),o&&!o.end.equals(s.start)&&this.appendSegment(Lt.createSegment("M",s.start)),s instanceof St?this.appendSegment(Lt.createSegment("L",s.end)):s instanceof en&&this.appendSegment(Lt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),o=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof St)this.appendSegment(Lt.createSegment("M",e.start)),this.appendSegment(Lt.createSegment("L",e.end));else if(e instanceof en)this.appendSegment(Lt.createSegment("M",e.start)),this.appendSegment(Lt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof An))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(Lt.createSegment(0===n?"M":"L",e.points[n]))}}};function ei(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}Lt.parse=function(e){if(!e)return new Lt;for(var n=new Lt,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=r.length,s=0;s<o;s++){var m=r[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),C=Lt.createSegment.apply(this,m);n.appendSegment(C)}return n},Lt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=Lt.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],r=arguments.length,o=1;o<r;o++)t.push(arguments[o]);return ei(n,t)},Lt.prototype={type:Ot.Path,appendSegment:function(e){var r,n=this.segments,t=n.length,o=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(C,M){return C.concat(M)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,p=0;p<c;p++)r=this.prepareSegment(e[p],o,null),n.push(r),o=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,o,null),n.push(r)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,r=0;r<n;r++){var o=e[r];if(o.isVisible){var s=o.bbox();t=t?t.union(s):s}}if(t)return t;var c=e[n-1];return new bt(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new Lt,r=0;r<n;r++){var o=e[r].clone();t.appendSegment(o)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointT(e,o);return s?this.lengthAtT(s,o):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointLength(e,o);if(0===s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,p=1/0,m=0;m<r;m++){var C=t[m];if(C.isVisible){var _=C.closestPointT(e,{precision:o,subdivisions:s[m]}),G=C.pointAtT(_),ne=new St(G,e).squaredLength();ne<p&&(c={segmentIndex:m,value:_},p=ne)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,p=1/0,m=0;m<r;m++){var C=t[m],M=s[m];if(C.isDifferentiable()){var _=C.closestPointT(e,{precision:o,subdivisions:M}),G=C.pointAtT(_),ne=new St(G,e).squaredLength();ne<p&&(c=C.tangentAtT(_),p=ne)}}return c||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var r=t.length,o=0,s=0;s<r;s++)t[s].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.divideAtLength(p*e,c)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var r=!0;e<0&&(r=!1,e=-e);var c,p,C,M,_,G,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,m=0;for(c=0;c<t;c++){var oe=r?c:t-1-c;p=this.getSegment(oe);var Te=s[oe],Pe=p.length({precision:o,subdivisions:Te});if(p.isDifferentiable()&&(_=p,G=oe,e<=m+Pe)){M=oe,C=p.divideAtLength((r?1:-1)*(e-m),{precision:o,subdivisions:Te});break}m+=Pe}if(!_)return null;C||(M=G,C=_.divideAtT(r?1:0));var ze=this.clone();ze.replaceSegment(M,C);var Be=M,L=M+1,z=M+2;C[0].isDifferentiable()||(ze.removeSegment(Be),L-=1,z-=1);var J=ze.getSegment(L).start;ze.insertSegment(L,Lt.createSegment("M",J)),z+=1,C[1].isDifferentiable()||(ze.removeSegment(z-1),z-=1);var ie=z-Be-1;for(c=z;c<ze.segments.length;c++){var me=this.getSegment(c-ie);if("Z"===(p=ze.getSegment(c)).type&&!me.subpathStartSegment.end.equals(p.subpathStartSegment.end)){var Ie=Lt.createSegment("L",me.end);ze.replaceSegment(c,Ie)}}return[new Lt(ze.segments.slice(0,L)),new Lt(ze.segments.slice(L))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,r=n.length;if(t.length!==r)return!1;for(var o=0;o<r;o++){var s=n[o],c=t[o];if(s.type!==c.type||!s.equals(c))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],s=0;s<t;s++){var p=n[s].getSubdivisions({precision:r});o.push(p)}return o},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,r=[];for(let o=0;o<t;o++){const s=n[o];s.isSubpathStart?r.push(new Lt(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(e,n){var t=this.segments,r=t.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var o,s=null,c=null;if(0!==r&&(c=e>=1?(s=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(M,_){return M.concat(_)},[]))[0].isSegment)throw new Error("Segments required.");for(var p=n.length,m=0;m<p;m++)o=this.prepareSegment(n[m],s,c),t.splice(e+m,0,o),s=o}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,s,c),t.splice(e,0,o)}},intersectionWithLine:function(e,n){var t=null,r=this.toPolylines(n);if(!r)return null;for(var o=0,s=r.length;o<s;o++){var p=e.intersect(r[o]);p&&(t||(t=[]),Array.isArray(p)?Array.prototype.push.apply(t,p):t.push(p))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=0,c=0;c<t;c++)s+=n[c].length({subdivisions:o[c]});return s},lengthAtT:function(e,n){var t=this.segments,r=t.length;if(0===r)return 0;var o=e.segmentIndex;if(o<0)return 0;var s=e.value;o>=r?(o=r-1,s=1):s<0?s=0:s>1&&(s=1);for(var c=void 0===(n=n||{}).precision?this.PRECISION:n.precision,p=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):n.segmentSubdivisions,C=0,M=0;M<o;M++){var _=t[M];C+=_.length({precisison:c,subdivisions:p[M]})}return C+(_=t[o]).lengthAtT(s,{precisison:c,subdivisions:p[o]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.pointAtLength(p*e,c)},pointAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var p,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,m=0,C=0;C<r;C++){var M=o?C:r-1-C,_=t[M],G=c[M],ne=_.length({precision:s,subdivisions:G});if(_.isVisible){if(e<=m+ne)return _.pointAtLength((o?1:-1)*(e-m),{precision:s,subdivisions:G});p=_}m+=ne}return p?o?p.end:p.start:t[r-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].pointAtT(0);if(r>=t)return n[t-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].pointAtT(o)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=t),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var r=n.splice(e,1)[0],o=r.previousSegment,s=r.nextSegment;o&&(o.nextSegment=s),s&&(s.previousSegment=o),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,n){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var o,s=t[e],c=s.previousSegment,p=s.nextSegment,m=s.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(G,ne){return G.concat(ne)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var C=n.length,M=0;M<C;M++)o=this.prepareSegment(n[M],c,p),t.splice(e+M,0,o),c=o,m&&o.isSubpathStart&&(m=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,c,p),t.splice(e,1,o),m&&o.isSubpathStart&&(m=!1)}m&&p&&this.updateSubpathStartSegment(p)},round:function(e){for(var n=this.segments,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.segments,o=r.length,s=0;s<o;s++)r[s].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.segmentIndexAtLength(p*e,c)},segmentIndexAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,p=null,m=0,C=0;C<r;C++){var M=o?C:r-1-C,_=t[M],ne=_.length({precision:s,subdivisions:c[M]});if(_.isVisible){if(e<=m+ne)return M;p=M}m+=ne}return p},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.tangentAtLength(p*e,c)},tangentAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var p,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,m=0,C=0;C<r;C++){var M=o?C:r-1-C,_=t[M],G=c[M],ne=_.length({precision:s,subdivisions:G});if(_.isDifferentiable()){if(e<=m+ne)return _.tangentAtLength((o?1:-1)*(e-m),{precision:s,subdivisions:G});p=_}m+=ne}return p?p.tangentAtT(o?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].tangentAtT(0);if(r>=t)return n[t-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].tangentAtT(o)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=[],c=[],p=0;p<t;p++){var m=n[p];if(m.isVisible){var C=o[p];if(C.length>0){var M=C.map(function(_){return _.start});Array.prototype.push.apply(c,M)}else c.push(m.start)}else c.length>0&&(c.push(n[p-1].end),s.push(c),c=[])}return c.length>0&&(c.push(this.end),s.push(c)),s},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var r=0,o=t.length;r<o;r++)n.push(new An(t[r]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",r=0;r<n;r++)t+=e[r].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Lt.createSegment("M",0,0)),this}},Object.defineProperty(Lt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var r=e[t];if(r.isVisible)return r.start}return e[n-1].end}}),Object.defineProperty(Lt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var r=e[t];if(r.isVisible)return r.end}return e[n-1].end}});var Li={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Li,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Li,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Li,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var lr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof lr))return ei(lr,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof St){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ye(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(ei(lr,o));return r}if(1===n)return this.end=new ye(e[0]),this;for(r=[],t=0;t<n;t+=1)r.push(new lr(e[t]));return r},ya={clone:function(){return new lr(this.end)},divideAt:function(e){var t=new St(this.start,this.end).divideAt(e);return[new lr(t[0]),new lr(t[1])]},divideAtLength:function(e){var t=new St(this.start,this.end).divideAtLength(e);return[new lr(t[0]),new lr(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(ya,"type",{configurable:!0,enumerable:!0,value:"L"}),lr.prototype=yi(Li,St.prototype,ya);var Wn=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Wn))return ei(Wn,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,s;if(e[0]instanceof en){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new ye(+e[0],+e[1]),this.controlPoint2=new ye(+e[2],+e[3]),this.end=new ye(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=6)o=e.slice(t,t+6),r.push(ei(Wn,o));return r}if(3===n)return this.controlPoint1=new ye(e[0]),this.controlPoint2=new ye(e[1]),this.end=new ye(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(r=[],t=0;t<n;t+=3)s=e.slice(t,t+3),r.push(ei(Wn,s));return r},Qi={clone:function(){return new Wn(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var r=new en(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new Wn(r[0]),new Wn(r[1])]},divideAtLength:function(e,n){var r=new en(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new Wn(r[0]),new Wn(r[1])]},divideAtT:function(e){var t=new en(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new Wn(t[0]),new Wn(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(Qi,"type",{configurable:!0,enumerable:!0,value:"C"}),Wn.prototype=yi(Li,en.prototype,Qi);var xi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof xi))return ei(xi,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,s;if(e[0]instanceof St){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof en){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ye(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(ei(0===t?xi:lr,o));return r}if(1===n)return this.end=new ye(e[0]),this;for(r=[],t=0;t<n;t+=1)s=e[t],r.push(0===t?new xi(s):new lr(s));return r},No={bbox:function(){return null},clone:function(){return new xi(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(No,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(No,"type",{configurable:!0,enumerable:!0,value:"M"}),xi.prototype=yi(Li,No);var Zi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Zi))return ei(Zi,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},po={clone:function(){return new Zi},divideAt:function(e){var t=new St(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new lr(t[0]):this.clone(),new lr(t[1])]},divideAtLength:function(e){var t=new St(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new lr(t[0]):this.clone(),new lr(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(po,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(po,"type",{configurable:!0,enumerable:!0,value:"Z"}),Zi.prototype=yi(Li,St.prototype,po);var na=Lt.segmentTypes={L:lr,C:Wn,M:xi,Z:Zi,z:Zi};Lt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(na).join("")+",.]*$"),Lt.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const ra={curveThroughPoints:function(e){return console.warn("deprecated"),new Lt(en.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,n=[],t=[],r=e.length-1;if(1==r)return n[0]=new ye((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new ye(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var s=[];for(o=1;o<r-1;o++)s[o]=4*e[o].x+2*e[o+1].x;s[0]=e[0].x+2*e[1].x,s[r-1]=(8*e[r-1].x+e[r].x)/2;var c=this.getFirstControlPoints(s);for(o=1;o<r-1;++o)s[o]=4*e[o].y+2*e[o+1].y;s[0]=e[0].y+2*e[1].y,s[r-1]=(8*e[r-1].y+e[r].y)/2;var p=this.getFirstControlPoints(s);for(o=0;o<r;o++)n.push(new ye(c[o],p[o])),t.push(o<r-1?new ye(2*e[o+1].x-c[o+1],2*e[o+1].y-p[o+1]):new ye((e[r].x+c[r-1])/2,(e[r].y+p[r-1])/2));return[n,t]},getCurveDivider:function(e,n,t,r){console.warn("deprecated");var o=new en(e,n,t,r);return function(c){var p=o.divide(c);return[{p0:p[0].start,p1:p[0].controlPoint1,p2:p[0].controlPoint2,p3:p[0].end},{p0:p[1].start,p1:p[1].controlPoint1,p2:p[1].controlPoint2,p3:p[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],r=[],o=2;t[0]=e[0]/o;for(var s=1;s<n;s++)r[s]=1/o,t[s]=(e[s]-t[s-1])/(o=(s<n-1?4:3.5)-r[s]);for(s=1;s<n;s++)t[n-s-1]-=r[n-s]*t[n-s];return t},getInversionSolver:function(e,n,t,r){console.warn("deprecated");var o=new en(e,n,t,r);return function(c){return o.closestPointT(c)}}},Vr=function(e){return this instanceof Vr?"string"==typeof e?new Vr.parse(e):void(this.points=Array.isArray(e)?e.map(ye):[]):new Vr(e)};function go(e,n,t,r){switch(e.type){case Ot.Line:if(n.type===Ot.Line)return Br(e,n);break;case Ot.Ellipse:switch(n.type){case Ot.Line:return _r(e,n);case Ot.Ellipse:return ia(e,n)}break;case Ot.Rect:switch(n.type){case Ot.Line:return Ni(e,n);case Ot.Ellipse:return oa(e,n);case Ot.Rect:return qi(e,n)}break;case Ot.Polyline:switch(n.type){case Ot.Line:return ui(e,n);case Ot.Ellipse:return li(e,n);case Ot.Rect:return Xr(e,n);case Ot.Polyline:return vo(e,n)}break;case Ot.Polygon:switch(n.type){case Ot.Line:return mo(e,n);case Ot.Ellipse:return yo(e,n);case Ot.Rect:return Ro(e,n);case Ot.Polyline:return aa(e,n);case Ot.Polygon:return Do(e,n)}break;case Ot.Path:switch(n.type){case Ot.Line:return Fo(e,n,t);case Ot.Ellipse:return xa(e,n,t);case Ot.Rect:return vs(e,n,t);case Ot.Polyline:return Ya(e,n,t);case Ot.Polygon:return Vo(e,n,t);case Ot.Path:return Xa(e,n,t,r)}}switch(n.type){case Ot.Ellipse:case Ot.Rect:case Ot.Polyline:case Ot.Polygon:case Ot.Path:return go(n,e,r,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function Br(e,n){const t=e.start.x,r=e.start.y,c=n.start.x,p=n.start.y,M=e.end.x-t,_=e.end.y-r,G=n.end.x-c,ne=n.end.y-p,oe=t-c,Te=r-p,Pe=M*ne-G*_,ze=(M*Te-_*oe)/Pe,Be=(G*Te-ne*oe)/Pe;return ze>=0&&ze<=1&&Be>=0&&Be<=1}function _r(e,n){const t=e.a,r=e.b,o=e.x,s=e.y,c=n.start.x-o,m=n.start.y-s,M=t*t,_=r*r,G=n.end.x-o-c,ne=n.end.y-s-m,oe=G*G/M+ne*ne/_,Te=2*c*G/M+2*m*ne/_,ze=Te*Te-4*oe*(c*c/M+m*m/_-1);if(0===ze){const Be=-Te/2/oe;return Be>=0&&Be<=1}if(ze>0){const Be=Math.sqrt(ze),L=(-Te+Be)/2/oe,z=(-Te-Be)/2/oe;return L>=0&&L<=1||z>=0&&z<=1}return!1}function ia(e,n){return function ys(e,n,t,r){const{cos:o,sin:s}=Math,c=s(n),p=o(n),m=s(r),C=o(r),M=c*c,_=p*p,ne=m*m,oe=C*C,Pe=e.a*e.a,ze=e.b*e.b,Be=t.a*t.a,L=t.b*t.b,z=Pe*M+ze*_,J=Be*ne+L*oe,ie=Pe*_+ze*M,me=Be*oe+L*ne;let Ie=2*(ze-Pe)*(c*p),Le=2*(L-Be)*(m*C),Ye=-2*z*e.x-Ie*e.y,dt=-2*J*t.x-Le*t.y,ut=-Ie*e.x-2*ie*e.y,xt=-Le*t.x-2*me*t.y;const Pt=z*e.x*e.x+ie*e.y*e.y+Ie*e.x*e.y-Pe*ze,It=J*t.x*t.x+me*t.y*t.y+Le*t.x*t.y-Be*L;Ie/=2,Le/=2,Ye/=2,dt/=2,ut/=2,xt/=2;const Gt=Di([[z,Ie,Ye],[Ie,ie,ut],[Ye,ut,Pt]]),er=Di([[J,Le,dt],[Le,me,xt],[dt,xt,It]]),zn=.33333333*(Di([[J,Ie,Ye],[Le,ie,ut],[dt,ut,Pt]])+Di([[z,Le,Ye],[Ie,me,ut],[Ye,xt,Pt]])+Di([[z,Ie,dt],[Ie,ie,xt],[Ye,ut,It]])),sr=.33333333*(Di([[z,Le,dt],[Ie,me,xt],[Ye,xt,It]])+Di([[J,Ie,dt],[Le,ie,xt],[dt,ut,It]])+Di([[J,Le,Ye],[Le,me,ut],[dt,xt,Pt]])),$t=eo([[Gt,zn],[zn,sr]]),hn=eo([[Gt,sr],[zn,er]]),Jt=eo([[zn,sr],[sr,er]]);return!(eo([[2*$t,hn],[hn,2*Jt]])>0&&(sr>0||zn>0))}(e,0,n,0)}function Ni(e,n){const{start:t,end:r}=n,{x:o,y:s,width:c,height:p}=e;return!(t.x>o+c&&r.x>o+c||t.x<o&&r.x<o||t.y>s+p&&r.y>s+p||t.y<s&&r.y<s)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||Br(e.topLine(),n)||Br(e.rightLine(),n)||Br(e.bottomLine(),n)||Br(e.leftLine(),n))}function oa(e,n){return!!qi(e,bt.fromEllipse(n))&&yo(Vr.fromRect(e),n)}function qi(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function ui(e,n){return Ka(e,n,{interior:!1})}function li(e,n){return ms(e,n,{interior:!1})}function Xr(e,n){return Ja(e,n,{interior:!1})}function vo(e,n){return Ri(e,n,{interior:!1})}function mo(e,n){return Ka(e,n,{interior:!0})}function yo(e,n){return ms(e,n,{interior:!0})}function Ro(e,n){return Ja(e,n,{interior:!0})}function aa(e,n){return Ri(e,n,{interior:!0})}function Do(e,n){return ba(e,n,{interior:!0})}function Fo(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:s}=r.getSegment(-1);return"Z"===s?mo(o,n):ui(o,n)})}function xa(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:s}=r.getSegment(-1);return"Z"===s?yo(o,n):li(o,n)})}function vs(e,n,t){return Vo(e,Vr.fromRect(n),t)}function Ya(e,n,t){return _a(e,n,t,{interior:!1})}function Vo(e,n,t){return _a(e,n,t,{interior:!0})}function Xa(e,n,t,r){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Vo(n,s,r):Ya(n,s,r)})}function Ka(e,n,t={}){const{interior:r=!1}=t;let o;if(r){if(e.containsPoint(n.start))return!0;const{start:p,end:m,points:C}=e;o=m.equals(p)?C:[...C,p]}else o=e.points;const{length:s}=o,c=new St;for(let p=0;p<s-1;p++)if(c.start=o[p],c.end=o[p+1],Br(n,c))return!0;return!1}function ms(e,n,t={}){const{start:r,end:o,points:s}=e;if(n.containsPoint(r))return!0;let c;const{interior:p=!1}=t;if(p){if(e.containsPoint(n.center()))return!0;c=o.equals(r)?s:[...s,r]}else c=s;const{length:m}=c,C=new St;for(let M=0;M<m-1;M++)if(C.start=c[M],C.end=c[M+1],_r(n,C))return!0;return!1}function Ja(e,n,t){return ba(e,Vr.fromRect(n),t)}function _a(e,n,t,r){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?ba(n,s,r):Ri(n,s,r)})}function Ri(e,n,t={}){const{interior:r=!1}=t;let o;if(r){const{start:m}=n;if(e.containsPoint(m))return!0;o=e.clone().close()}else o=e;const s=n.points,{length:c}=s,p=new St;for(let m=0;m<c-1;m++)if(p.start=s[m],p.end=s[m+1],ui(o,p))return!0;return!1}function ba(e,n,t){return n.containsPoint(e.start)||Ri(e,n.clone().close(),t)}function eo(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Di(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Vr.parse=function(e){return new Vr(ma(e))},Vr.fromRect=function(e){return new Vr([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Vr.prototype=yi(An.prototype,{type:Ot.Polygon,clone:function(){return new Vr(Wa(this.points))},convexHull:function(){return new Vr(ps(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const sa=g,He=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,o=r.PI,s=r.atan2,c=r.sqrt,p=r.min,m=r.max,C=r.cos,M=r.sin,_=function(L,z,J){if(!(this instanceof _))return _.apply(Object.create(_.prototype),arguments);if(L){if(_.isV(L)&&(L=L.node),z=z||{},_.isString(L)){if("svg"===(L=L.trim()).toLowerCase())L=_.createSvgDocument();else if("<"===L[0]){var ie=_.createSvgDocument(L);if(ie.childNodes.length>1){var Ie,Le,me=[];for(Ie=0,Le=ie.childNodes.length;Ie<Le;Ie++){var Ye=ie.childNodes[Ie];me.push(new _(document.importNode(Ye,!0)))}return me}L=document.importNode(ie.firstChild,!0)}else L=document.createElementNS(n.svg,L);_.ensureId(L)}return this.node=L,this.setAttributes(z),J&&this.append(J),this}},G=_.prototype;function oe(L,z,J){J||(J={});for(var ie=J.includeAnnotationIndices,me=J.eol,Ie=J.lineHeight,Le=J.baseSize,Ye=0,dt={},ut=z.length-1,xt=0;xt<=ut;xt++){var Pt=z[xt],It=null;if(_.isObject(Pt)){var Gt=Pt.attrs,er=_("tspan",Gt),zn=er.node,sr=Pt.t;me&&xt===ut&&(sr+=me),zn.textContent=sr;var $t=Gt.class;$t&&er.addClass($t),ie&&er.attr("annotations",Pt.annotations),It=parseFloat(Gt["font-size"]),isFinite(It)||(It=Le),It&&It>Ye&&(Ye=It)}else me&&xt===ut&&(Pt+=me),zn=document.createTextNode(Pt||" "),Le&&Le>Ye&&(Ye=Le);L.appendChild(zn)}return Ye&&(dt.maxFontSize=Ye),Ie?dt.lineHeight=Ie:Ye&&(dt.lineHeight=1.2*Ye),dt}Object.defineProperty(G,"id",{enumerable:!0,get:function(){return this.node.id},set:function(L){this.node.id=L}}),G.getTransformToElement=function(L){var z=this.node;if(_.isSVGGraphicsElement(L)&&_.isSVGGraphicsElement(z)){var J=_.toNode(L).getScreenCTM(),ie=z.getScreenCTM();if(J&&ie)return J.inverse().multiply(ie)}return _.createSVGMatrix()},G.transform=function(L,z){var J=this.node;if(_.isUndefined(L))return _.transformStringToMatrix(this.attr("transform"));if(z&&z.absolute)return this.attr("transform",_.matrixToTransformString(L));var ie=_.createSVGTransform(L);return J.transform.baseVal.appendItem(ie),this},G.translate=function(L,z,J){J=J||{},z=z||0;var ie=this.attr("transform")||"",me=_.parseTransformString(ie);return ie=me.value,_.isUndefined(L)?me.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(J.absolute?L:me.translate.tx+L)+","+(J.absolute?z:me.translate.ty+z)+") "+ie).trim()),this)},G.rotate=function(L,z,J,ie){ie=ie||{};var me=this.attr("transform")||"",Ie=_.parseTransformString(me);return me=Ie.value,_.isUndefined(L)?Ie.rotate:(me=me.replace(/rotate\([^)]*\)/g,"").trim(),L%=360,this.attr("transform",(me+" rotate("+(ie.absolute?L:Ie.rotate.angle+L)+(void 0!==z&&void 0!==J?","+z+","+J:"")+")").trim()),this)},G.scale=function(L,z){z=_.isUndefined(z)?L:z;var J=this.attr("transform")||"",ie=_.parseTransformString(J);return J=ie.value,_.isUndefined(L)?ie.scale:(J=J.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(J+" scale("+L+","+z+")").trim()),this)},G.bbox=function(L,z){var J,ie=this.node,me=ie.ownerSVGElement;if(!me)return new bt(0,0,0,0);try{J=ie.getBBox()}catch(Le){J={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(L)return new bt(J);var Ie=this.getTransformToElement(z||me);return _.transformRect(J,Ie)},G.getBBox=function(L){var J,z={},ie=this.node;if(!ie.ownerSVGElement||!_.isSVGGraphicsElement(ie))return new bt(0,0,0,0);if(L&&(L.target&&(z.target=_.toNode(L.target)),L.recursive&&(z.recursive=L.recursive)),z.recursive){var Le=this.children(),Ye=Le.length;if(0===Ye)return this.getBBox({target:z.target,recursive:!1});z.target||(z.target=this);for(var dt=0;dt<Ye;dt++){var xt,ut=Le[dt];xt=0===ut.children().length?ut.getBBox({target:z.target,recursive:!1}):ut.getBBox({target:z.target,recursive:!0}),J=J?J.union(xt):xt}return J}try{J=ie.getBBox()}catch(Pt){J={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(z.target){var Ie=this.getTransformToElement(z.target);return _.transformRect(J,Ie)}return new bt(J)};var Te=/em$/;function Pe(L,z){var J=parseFloat(L);return Te.test(L)?J*z:J}G.text=function(L,z){if(L&&"string"!=typeof L)throw new Error("Vectorizer: text() expects the first argument to be a string.");L=_.sanitizeText(L),z||(z={});var J=z.displayEmpty,ie=z.eol,me=z.textPath,Ie=z.textVerticalAnchor,Le="middle"===Ie||"bottom"===Ie||"top"===Ie,Ye=z.x;void 0===Ye&&(Ye=this.attr("x")||0);var dt=z.includeAnnotationIndices,ut=z.annotations;ut&&!_.isArray(ut)&&(ut=[ut]);var xt=z.lineHeight,Pt="auto"===xt,It=Pt?"1.5em":xt||"1em";this.empty(),this.attr({"xml:space":"preserve",display:L||J?null:"none"});var Gt=parseFloat(this.attr("font-size"));Gt||(Gt=16,(Le||ut)&&this.attr("font-size",Gt));var zn,er=document;me?("string"==typeof me&&(me={d:me}),zn=function ne(L,z){L||(L={});var J=_("textPath"),ie=L.d;if(ie&&void 0===L["xlink:href"]){var me=_("path").attr("d",ie).appendTo(z.defs());J.attr("xlink:href","#"+me.id)}return _.isObject(L)&&J.attr(L),J.node}(me,this)):zn=er.createDocumentFragment();for(var Jt,sr=0,$t=L.split("\n"),hn=[],Qt=0,Pn=$t.length-1;Qt<=Pn;Qt++){var Fn,tr=It,ir="v-line",Tn=er.createElementNS(n.svg,"tspan"),Ir=$t[Qt];if(Ir)if(ut){var Mn=(Fn=oe(Tn,_.annotateString(Ir,ut,{offset:-sr,includeAnnotationIndices:dt}),{includeAnnotationIndices:dt,eol:Qt!==Pn&&ie,lineHeight:Pt?null:It,baseSize:Gt})).lineHeight;Mn&&Pt&&0!==Qt&&(tr=Mn),0===Qt&&(Jt=.8*Fn.maxFontSize)}else ie&&Qt!==Pn&&(Ir+=ie),Tn.textContent=Ir;else{Tn.textContent="-",ir+=" v-empty-line";var Wt=Tn.style;Wt.fillOpacity=0,Wt.strokeOpacity=0,ut&&(Fn={})}Fn&&hn.push(Fn),Qt>0&&Tn.setAttribute("dy",tr),(Qt>0||me)&&Tn.setAttribute("x",Ye),Tn.className.baseVal=ir,zn.appendChild(Tn),sr+=Ir.length+1}if(Le)if(ut)tr=function ze(L,z,J,ie){if(!Array.isArray(z))return 0;var me=z.length;if(!me)return 0;for(var Ie=z[0],Le=Pe(Ie.maxFontSize,J)||J,Ye=0,dt=Pe(ie,J),ut=1;ut<me;ut++)Ye+=Pe((Ie=z[ut]).lineHeight,J)||dt;var It,Pt=Pe(Ie.maxFontSize,J)||J;switch(L){case"middle":It=Le/2-.15*Pt-Ye/2;break;case"bottom":It=-.25*Pt-Ye;break;default:It=.8*Le}return It}(Ie,hn,Gt,It);else if("top"===Ie)tr="0.8em";else{var Mt;switch(Pn>0?(Mt=parseFloat(It)||1,Mt*=Pn,Te.test(It)||(Mt/=Gt)):Mt=0,Ie){case"middle":tr=.3-Mt/2+"em";break;case"bottom":tr=-Mt-.3+"em"}}else 0===Ie?tr="0em":Ie?tr=Ie:(tr=0,null===this.attr("y")&&this.attr("y",Jt||"0.8em"));return zn.firstChild.setAttribute("dy",tr),this.append(zn),this},G.removeAttr=function(L){var z=_.qualifyAttr(L),J=this.node;return z.ns?J.hasAttributeNS(z.ns,z.local)&&J.removeAttributeNS(z.ns,z.local):J.hasAttribute(L)&&J.removeAttribute(L),this},G.attr=function(L,z){if(_.isUndefined(L)){for(var J=this.node.attributes,ie={},me=0;me<J.length;me++)ie[J[me].name]=J[me].value;return ie}if(_.isString(L)&&_.isUndefined(z))return this.node.getAttribute(L);if("object"==typeof L)for(var Ie in L)L.hasOwnProperty(Ie)&&this.setAttribute(Ie,L[Ie]);else this.setAttribute(L,z);return this},G.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",_.normalizePathData(this.attr("d"))),this},G.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},G.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},G.setAttributes=function(L){for(var z in L)L.hasOwnProperty(z)&&this.setAttribute(z,L[z]);return this},G.append=function(L){_.isArray(L)||(L=[L]);for(var z=0,J=L.length;z<J;z++)this.node.appendChild(_.toNode(L[z]));return this},G.prepend=function(L){var z=this.node.firstChild;return z?_(z).before(L):this.append(L)},G.before=function(L){var z=this.node,J=z.parentNode;if(J){_.isArray(L)||(L=[L]);for(var ie=0,me=L.length;ie<me;ie++)J.insertBefore(_.toNode(L[ie]),z)}return this},G.appendTo=function(L){return _.toNode(L).appendChild(this.node),this},G.svg=function(){return this.node instanceof window.SVGSVGElement?this:_(this.node.ownerSVGElement)},G.tagName=function(){return this.node.tagName.toUpperCase()},G.defs=function(){var L=this.svg()||this,z=L.node.getElementsByTagName("defs")[0];return z?_(z):_("defs").appendTo(L)},G.clone=function(){var L=_(this.node.cloneNode(!0));return L.node.id=_.uniqueId(),L},G.findOne=function(L){var z=this.node.querySelector(L);return z?_(z):void 0},G.find=function(L){var z=[],J=this.node.querySelectorAll(L);if(J)for(var ie=0;ie<J.length;ie++)z.push(_(J[ie]));return z},G.children=function(){for(var L=this.node.childNodes,z=[],J=0;J<L.length;J++)1===L[J].nodeType&&z.push(_(L[J]));return z},G.parent=function(){return _(this.node.parentNode)||null},G.index=function(){for(var L=0,z=this.node.previousSibling;z;)1===z.nodeType&&L++,z=z.previousSibling;return L},G.findParentByClass=function(L,z){for(var J=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==z&&ie!==J;){var me=_(ie);if(me.hasClass(L))return me;ie=ie.parentNode}return null},G.contains=function(L){var z=this.node,J=_.toNode(L),ie=J&&J.parentNode;return z===ie||!!(ie&&1===ie.nodeType&&16&z.compareDocumentPosition(ie))},G.toLocalPoint=function(L,z){var J=this.svg().node,ie=J.createSVGPoint();ie.x=L,ie.y=z;try{var me=ie.matrixTransform(J.getScreenCTM().inverse()),Ie=this.getTransformToElement(J).inverse()}catch(Le){return ie}return me.matrixTransform(Ie)},G.translateCenterToPoint=function(L){var J=this.getBBox({target:this.svg()}).center();return this.translate(L.x-J.x,L.y-J.y),this},G.translateAndAutoOrient=function(L,z,J){L=new ye(L),z=new ye(z),J||(J=this.svg());var ie=this.scale();this.attr("transform","");var me=this.getBBox({target:J}).scale(ie.sx,ie.sy),Ie=_.createSVGTransform();Ie.setTranslate(-me.x-me.width/2,-me.y-me.height/2);var Le=_.createSVGTransform(),Ye=L.angleBetween(z,L.clone().offset(1,0));Ye&&Le.setRotate(Ye,0,0);var dt=_.createSVGTransform(),ut=L.clone().move(z,me.width/2);dt.setTranslate(2*L.x-ut.x,2*L.y-ut.y);var xt=this.getTransformToElement(J),Pt=_.createSVGTransform();return Pt.setMatrix(dt.matrix.multiply(Le.matrix.multiply(Ie.matrix.multiply(xt.scale(ie.sx,ie.sy))))),this.attr("transform",_.matrixToTransformString(Pt.matrix)),this},G.animateAlongPath=function(L,z){z=_.toNode(z);var J=_.ensureId(z),ie=_("animateMotion",L),me=_("mpath",{"xlink:href":"#"+J});ie.append(me),this.append(ie);try{ie.node.beginElement()}catch(It){if("fake"===document.documentElement.getAttribute("smiling")){var Ie=ie.node;Ie.animators=[];var Le=Ie.getAttribute("id");Le&&(id2anim[Le]=Ie);for(var Ye=getTargets(Ie),dt=0,ut=Ye.length;dt<ut;dt++){var Pt=new Animator(Ie,Ye[dt],dt);animators.push(Pt),Ie.animators[dt]=Pt,Pt.register()}}}return this},G.hasClass=function(L){return new RegExp("(\\s|^)"+L+"(\\s|$)").test(this.node.getAttribute("class"))},G.addClass=function(L){if(L&&!this.hasClass(L)){var z=this.node.getAttribute("class")||"";this.node.setAttribute("class",(z+" "+L).trim())}return this},G.removeClass=function(L){if(L&&this.hasClass(L)){var z=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+L+"(\\s|$)","g"),"$2");this.node.setAttribute("class",z)}return this},G.toggleClass=function(L,z){return(_.isUndefined(z)?this.hasClass(L):!z)?this.removeClass(L):this.addClass(L),this},G.sample=function(L){L=L||1;for(var Ie,z=this.node,J=z.getTotalLength(),ie=[],me=0;me<J;)Ie=z.getPointAtLength(me),ie.push({x:Ie.x,y:Ie.y,distance:me}),me+=L;return ie},G.convertToPath=function(){var L=_("path");L.attr(this.attr());var z=this.convertToPathData();return z&&L.attr("d",z),L},G.convertToPathData=function(){var L=this.tagName();switch(L){case"PATH":return this.attr("d");case"LINE":return _.convertLineToPathData(this.node);case"POLYGON":return _.convertPolygonToPathData(this.node);case"POLYLINE":return _.convertPolylineToPathData(this.node);case"ELLIPSE":return _.convertEllipseToPathData(this.node);case"CIRCLE":return _.convertCircleToPathData(this.node);case"RECT":return _.convertRectToPathData(this.node)}throw new Error(L+" cannot be converted to PATH.")},_.prototype.toGeometryShape=function(){var L,z,J,ie,me,Ie,Le,Ye,dt,ut,xt,Pt,It,Gt,er;switch(this.tagName()){case"RECT":return L=parseFloat(this.attr("x"))||0,z=parseFloat(this.attr("y"))||0,J=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new bt(L,z,J,ie);case"CIRCLE":return me=parseFloat(this.attr("cx"))||0,Ie=parseFloat(this.attr("cy"))||0,Le=parseFloat(this.attr("r"))||0,new Ar({x:me,y:Ie},Le,Le);case"ELLIPSE":return me=parseFloat(this.attr("cx"))||0,Ie=parseFloat(this.attr("cy"))||0,Ye=parseFloat(this.attr("rx"))||0,dt=parseFloat(this.attr("ry"))||0,new Ar({x:me,y:Ie},Ye,dt);case"POLYLINE":return ut=_.getPointsFromSvgNode(this),new An(ut);case"POLYGON":return(ut=_.getPointsFromSvgNode(this)).length>1&&ut.push(ut[0]),new An(ut);case"PATH":return xt=this.attr("d"),Lt.isDataSupported(xt)||(xt=_.normalizePathData(xt)),new Lt(xt);case"LINE":return Pt=parseFloat(this.attr("x1"))||0,Gt=parseFloat(this.attr("y1"))||0,It=parseFloat(this.attr("x2"))||0,er=parseFloat(this.attr("y2"))||0,new St({x:Pt,y:Gt},{x:It,y:er})}return this.getBBox()},G.findIntersection=function(L,z){var J=this.svg().node,ie=this.getBBox({target:z=z||J}),me=ie.center();if(ie.intersectionWithLineFromCenterToPoint(L)){var Ie,Le=this.tagName();if("RECT"===Le){var Ye=new bt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),dt=this.getTransformToElement(z),ut=_.decomposeMatrix(dt),xt=J.createSVGTransform();xt.setRotate(-ut.rotation,me.x,me.y);var Pt=_.transformRect(Ye,xt.matrix.multiply(dt));Ie=new bt(Pt).intersectionWithLineFromCenterToPoint(L,ut.rotation)}else if("PATH"===Le||"POLYGON"===Le||"POLYLINE"===Le||"CIRCLE"===Le||"ELLIPSE"===Le){var sr,$t,hn,Qt,Pn,Gt=("PATH"===Le?this:this.convertToPath()).sample(),er=1/0,zn=[];for(sr=0;sr<Gt.length;sr++)hn=(hn=_.createSVGPoint(($t=Gt[sr]).x,$t.y)).matrixTransform(this.getTransformToElement(z)),(Pn=($t=new ye(hn)).distance(me)+(Qt=1.1*$t.distance(L)))<er?(er=Pn,zn=[{sample:$t,refDistance:Qt}]):Pn<er+1&&zn.push({sample:$t,refDistance:Qt});zn.sort(function(tr,ir){return tr.refDistance-ir.refDistance}),zn[0]&&(Ie=zn[0].sample)}return Ie}},G.setAttribute=function(L,z){var J=this.node;if(null===z)return this.removeAttr(L),this;var ie=_.qualifyAttr(L);return ie.ns?J.setAttributeNS(ie.ns,L,z):"id"===L?J.id=z:J.setAttribute(L,z),this},_.createSvgDocument=function(L){if(L){const J=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${L}</svg>`,{documentElement:ie}=_.parseXML(J,{async:!1});return ie}const z=document.createElementNS(n.svg,"svg");return z.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),z.setAttribute("version","1.1"),z},_.createSVGStyle=function(L){const{node:z}=_("style",{type:"text/css"},[_.createCDATASection(L)]);return z},_.createCDATASection=function(L=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(L)},_.idCounter=0,_.uniqueId=function(){return"v-"+ ++_.idCounter},_.toNode=function(L){return _.isV(L)?L.node:L.nodeName&&L||L[0]},_.ensureId=function(L){return(L=_.toNode(L)).id||(L.id=_.uniqueId())},_.sanitizeText=function(L){return(L||"").replace(/ /g,"\xa0")},_.isUndefined=function(L){return void 0===L},_.isString=function(L){return"string"==typeof L},_.isObject=function(L){return L&&"object"==typeof L},_.isArray=Array.isArray,_.parseXML=function(L,z){var J;z=z||{};try{var ie=new DOMParser;_.isUndefined(z.async)||(ie.async=z.async),J=ie.parseFromString(L,"text/xml")}catch(me){J=void 0}if(!J||J.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+L);return J},_.qualifyAttr=function(L){if(-1!==L.indexOf(":")){var z=L.split(":");return{ns:n[z[0]],local:z[1]}}return{ns:null,local:L}},_.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,_.transformSeparatorRegex=/[ ,]+/,_.transformationListRegex=/^(\w+)\((.*)\)/,_.transformStringToMatrix=function(L){var z=_.createSVGMatrix(),J=L&&L.match(_.transformRegex);if(!J)return z;for(var ie=0,me=J.length;ie<me;ie++){var Le=J[ie].match(_.transformationListRegex);if(Le){var Ye,dt,ut,xt,Pt,It=_.createSVGMatrix(),Gt=Le[2].split(_.transformSeparatorRegex);switch(Le[1].toLowerCase()){case"scale":Ye=parseFloat(Gt[0]),dt=void 0===Gt[1]?Ye:parseFloat(Gt[1]),It=It.scaleNonUniform(Ye,dt);break;case"translate":ut=parseFloat(Gt[0]),xt=parseFloat(Gt[1]),It=It.translate(ut,xt);break;case"rotate":Pt=parseFloat(Gt[0]),ut=parseFloat(Gt[1])||0,xt=parseFloat(Gt[2])||0,It=0!==ut||0!==xt?It.translate(ut,xt).rotate(Pt).translate(-ut,-xt):It.rotate(Pt);break;case"skewx":Pt=parseFloat(Gt[0]),It=It.skewX(Pt);break;case"skewy":Pt=parseFloat(Gt[0]),It=It.skewY(Pt);break;case"matrix":It.a=parseFloat(Gt[0]),It.b=parseFloat(Gt[1]),It.c=parseFloat(Gt[2]),It.d=parseFloat(Gt[3]),It.e=parseFloat(Gt[4]),It.f=parseFloat(Gt[5]);break;default:continue}z=z.multiply(It)}}return z},_.matrixToTransformString=function(L){return L||(L=!0),"matrix("+(void 0!==L.a?L.a:1)+","+(void 0!==L.b?L.b:0)+","+(void 0!==L.c?L.c:0)+","+(void 0!==L.d?L.d:1)+","+(void 0!==L.e?L.e:0)+","+(void 0!==L.f?L.f:0)+")"},_.parseTransformString=function(L){var z,J,ie;if(L){var me=_.transformSeparatorRegex;if(L.trim().indexOf("matrix")>=0){var Ie=_.transformStringToMatrix(L),Le=_.decomposeMatrix(Ie);ie=[Le.scaleX,Le.scaleY],J=[Le.rotation];var Ye=[];(0!==(z=[Le.translateX,Le.translateY])[0]||0!==z[1])&&Ye.push("translate("+z+")"),(1!==ie[0]||1!==ie[1])&&Ye.push("scale("+ie+")"),0!==J[0]&&Ye.push("rotate("+J+")"),L=Ye.join(" ")}else{var dt=L.match(/translate\((.*?)\)/);dt&&(z=dt[1].split(me));var ut=L.match(/rotate\((.*?)\)/);ut&&(J=ut[1].split(me));var xt=L.match(/scale\((.*?)\)/);xt&&(ie=xt[1].split(me))}}var Pt=ie&&ie[0]?parseFloat(ie[0]):1;return{value:L,translate:{tx:z&&z[0]?parseInt(z[0],10):0,ty:z&&z[1]?parseInt(z[1],10):0},rotate:{angle:J&&J[0]?parseInt(J[0],10):0,cx:J&&J[1]?parseInt(J[1],10):void 0,cy:J&&J[2]?parseInt(J[2],10):void 0},scale:{sx:Pt,sy:ie&&ie[1]?parseFloat(ie[1]):Pt}}},_.deltaTransformPoint=function(L,z){return{x:z.x*L.a+z.y*L.c+0,y:z.x*L.b+z.y*L.d+0}},_.decomposeMatrix=function(L){var z=_.deltaTransformPoint(L,{x:0,y:1}),J=_.deltaTransformPoint(L,{x:1,y:0}),ie=180/o*s(z.y,z.x)-90,me=180/o*s(J.y,J.x);return{translateX:L.e,translateY:L.f,scaleX:c(L.a*L.a+L.b*L.b),scaleY:c(L.c*L.c+L.d*L.d),skewX:ie,skewY:me,rotation:ie}},_.matrixToScale=function(L){var z,J,ie,me;return L?(z=_.isUndefined(L.a)?1:L.a,me=_.isUndefined(L.d)?1:L.d,J=L.b,ie=L.c):z=me=1,{sx:J?c(z*z+J*J):z,sy:ie?c(ie*ie+me*me):me}},_.matrixToRotate=function(L){var z={x:0,y:1};return L&&(z=_.deltaTransformPoint(L,z)),{angle:Xe(Ft(s(z.y,z.x))-90)}},_.matrixToTranslate=function(L){return{tx:L&&L.e||0,ty:L&&L.f||0}},_.isV=function(L){return L instanceof _},_.isVElement=_.isV,_.isSVGGraphicsElement=function(L){return!!L&&(L=_.toNode(L))instanceof SVGElement&&"function"==typeof L.getScreenCTM};var Be=_("svg").node;return _.createSVGMatrix=function(L){var z=Be.createSVGMatrix();for(var J in L)z[J]=L[J];return z},_.createSVGTransform=function(L){return _.isUndefined(L)?Be.createSVGTransform():(L instanceof SVGMatrix||(L=_.createSVGMatrix(L)),Be.createSVGTransformFromMatrix(L))},_.createSVGPoint=function(L,z){var J=Be.createSVGPoint();return J.x=L,J.y=z,J},_.transformRect=function(L,z){var J=Be.createSVGPoint();J.x=L.x,J.y=L.y;var ie=J.matrixTransform(z);J.x=L.x+L.width,J.y=L.y;var me=J.matrixTransform(z);J.x=L.x+L.width,J.y=L.y+L.height;var Ie=J.matrixTransform(z);J.x=L.x,J.y=L.y+L.height;var Le=J.matrixTransform(z),Ye=p(ie.x,me.x,Ie.x,Le.x),dt=m(ie.x,me.x,Ie.x,Le.x),ut=p(ie.y,me.y,Ie.y,Le.y),xt=m(ie.y,me.y,Ie.y,Le.y);return new bt(Ye,ut,dt-Ye,xt-ut)},_.transformPoint=function(L,z){return new ye(_.createSVGPoint(L.x,L.y).matrixTransform(z))},_.transformLine=function(L,z){return new St(_.transformPoint(L.start,z),_.transformPoint(L.end,z))},_.transformPolyline=function(L,z){var J=L instanceof An?L.points:L;_.isArray(J)||(J=[]);for(var ie=[],me=0,Ie=J.length;me<Ie;me++)ie[me]=_.transformPoint(J[me],z);return new An(ie)},_.styleToObject=function(L){for(var z={},J=L.split(";"),ie=0;ie<J.length;ie++){var Ie=J[ie].split("=");z[Ie[0].trim()]=Ie[1].trim()}return z},_.createSlicePathData=function(L,z,J,ie){var me=2*o-1e-6,Ie=L,Le=z,Ye=J,dt=ie,ut=(dt<Ye&&(ut=Ye,Ye=dt,dt=ut),dt-Ye),xt=ut<o?"0":"1",Pt=C(Ye),It=M(Ye),Gt=C(dt),er=M(dt);return ut>=me?Ie?"M0,"+Le+"A"+Le+","+Le+" 0 1,1 0,"+-Le+"A"+Le+","+Le+" 0 1,1 0,"+Le+"M0,"+Ie+"A"+Ie+","+Ie+" 0 1,0 0,"+-Ie+"A"+Ie+","+Ie+" 0 1,0 0,"+Ie+"Z":"M0,"+Le+"A"+Le+","+Le+" 0 1,1 0,"+-Le+"A"+Le+","+Le+" 0 1,1 0,"+Le+"Z":Ie?"M"+Le*Pt+","+Le*It+"A"+Le+","+Le+" 0 "+xt+",1 "+Le*Gt+","+Le*er+"L"+Ie*Gt+","+Ie*er+"A"+Ie+","+Ie+" 0 "+xt+",0 "+Ie*Pt+","+Ie*It+"Z":"M"+Le*Pt+","+Le*It+"A"+Le+","+Le+" 0 "+xt+",1 "+Le*Gt+","+Le*er+"L0,0Z"},_.mergeAttrs=function(L,z){for(var J in z)L[J]="class"===J?L[J]?L[J]+" "+z[J]:z[J]:"style"===J?_.isObject(L[J])&&_.isObject(z[J])?_.mergeAttrs(L[J],z[J]):_.isObject(L[J])?_.mergeAttrs(L[J],_.styleToObject(z[J])):_.isObject(z[J])?_.mergeAttrs(_.styleToObject(L[J]),z[J]):_.mergeAttrs(_.styleToObject(L[J]),_.styleToObject(z[J])):z[J];return L},_.annotateString=function(L,z,J){z=z||[];for(var Ie,Ye,dt,ie=(J=J||{}).offset||0,me=[],Le=[],ut=0;ut<L.length;ut++){Ye=Le[ut]=L[ut];for(var xt=0;xt<z.length;xt++){var Pt=z[xt];ut>=Pt.start+ie&&ut<Pt.end+ie&&(_.isObject(Ye)?Ye.attrs=_.mergeAttrs(_.mergeAttrs({},Ye.attrs),Pt.attrs):Ye=Le[ut]={t:L[ut],attrs:Pt.attrs},J.includeAnnotationIndices&&(Ye.annotations||(Ye.annotations=[])).push(xt))}(dt=Le[ut-1])?_.isObject(Ye)&&_.isObject(dt)?JSON.stringify(Ye.attrs)===JSON.stringify(dt.attrs)?Ie.t+=Ye.t:(me.push(Ie),Ie=Ye):_.isObject(Ye)||_.isObject(dt)?(me.push(Ie),Ie=Ye):Ie=(Ie||"")+Ye:Ie=Ye}return Ie&&me.push(Ie),me},_.findAnnotationsAtIndex=function(L,z){var J=[];return L&&L.forEach(function(ie){ie.start<z&&z<=ie.end&&J.push(ie)}),J},_.findAnnotationsBetweenIndexes=function(L,z,J){var ie=[];return L&&L.forEach(function(me){(z>=me.start&&z<me.end||J>me.start&&J<=me.end||me.start>=z&&me.end<J)&&ie.push(me)}),ie},_.shiftAnnotations=function(L,z,J){return L&&L.forEach(function(ie){ie.start<z&&ie.end>=z?ie.end+=J:ie.start>=z&&(ie.start+=J,ie.end+=J)}),L},_.convertLineToPathData=function(L){return["M",(L=_(L)).attr("x1"),L.attr("y1"),"L",L.attr("x2"),L.attr("y2")].join(" ")},_.convertPolygonToPathData=function(L){var z=_.getPointsFromSvgNode(L);return 0===z.length?null:_.svgPointsToPath(z)+" Z"},_.convertPolylineToPathData=function(L){var z=_.getPointsFromSvgNode(L);return 0===z.length?null:_.svgPointsToPath(z)},_.svgPointsToPath=function(L){for(var z=0,J=L.length;z<J;z++)L[z]=L[z].x+" "+L[z].y;return"M "+L.join(" L")},_.getPointsFromSvgNode=function(L){var z=[],J=(L=_.toNode(L)).points;if(J)for(var ie=0,me=J.numberOfItems;ie<me;ie++)z.push(J.getItem(ie));return z},_.KAPPA=.551784,_.convertCircleToPathData=function(L){L=_(L);var z=parseFloat(L.attr("cx"))||0,J=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("r")),me=ie*_.KAPPA;return["M",z,J-ie,"C",z+me,J-ie,z+ie,J-me,z+ie,J,"C",z+ie,J+me,z+me,J+ie,z,J+ie,"C",z-me,J+ie,z-ie,J+me,z-ie,J,"C",z-ie,J-me,z-me,J-ie,z,J-ie,"Z"].join(" ")},_.convertEllipseToPathData=function(L){L=_(L);var z=parseFloat(L.attr("cx"))||0,J=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("rx")),me=parseFloat(L.attr("ry"))||ie,Ie=ie*_.KAPPA,Le=me*_.KAPPA;return["M",z,J-me,"C",z+Ie,J-me,z+ie,J-Le,z+ie,J,"C",z+ie,J+Le,z+Ie,J+me,z,J+me,"C",z-Ie,J+me,z-ie,J+Le,z-ie,J,"C",z-ie,J-Le,z-Ie,J-me,z,J-me,"Z"].join(" ")},_.convertRectToPathData=function(L){return L=_(L),_.rectToPath({x:parseFloat(L.attr("x"))||0,y:parseFloat(L.attr("y"))||0,width:parseFloat(L.attr("width"))||0,height:parseFloat(L.attr("height"))||0,rx:parseFloat(L.attr("rx"))||0,ry:parseFloat(L.attr("ry"))||0})},_.rectToPath=function(L){var J=L.x,ie=L.y,me=L.width,Ie=L.height,Le=p(L.rx||L["top-rx"]||0,me/2),Ye=p(L.rx||L["bottom-rx"]||0,me/2),dt=p(L.ry||L["top-ry"]||0,Ie/2),ut=p(L.ry||L["bottom-ry"]||0,Ie/2);return(Le||Ye||dt||ut?["M",J,ie+dt,"v",Ie-dt-ut,"a",Ye,ut,0,0,0,Ye,ut,"h",me-2*Ye,"a",Ye,ut,0,0,0,Ye,-ut,"v",-(Ie-ut-dt),"a",Le,dt,0,0,0,-Le,-dt,"h",-(me-2*Le),"a",Le,dt,0,0,0,-Le,dt,"Z"]:["M",J,ie,"H",J+me,"V",ie+Ie,"H",J,"V",ie,"Z"]).join(" ")},_.normalizePathData=function(){var L="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",z=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),J=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig"),ie=Math,me=ie.PI,Ie=ie.sin,Le=ie.cos,Ye=ie.tan,dt=ie.asin,ut=ie.sqrt,xt=ie.abs;function Pt($t,hn,Jt,Qt,Pn,tr){var ir=.3333333333333333,Tn=2/3;return[ir*$t+Tn*Jt,ir*hn+Tn*Qt,ir*Pn+Tn*Jt,ir*tr+Tn*Qt,Pn,tr]}function It($t,hn,Jt){return{x:$t*Le(Jt)-hn*Ie(Jt),y:$t*Ie(Jt)+hn*Le(Jt)}}function Gt($t,hn,Jt,Qt,Pn,tr,ir,Tn,Ir,Fn){var Mt,yn=120*me/180,Mn=me/180*(+Pn||0),Wt=[];if(Fn)Ti=Fn[0],Wr=Fn[1],pc=Fn[2],gc=Fn[3];else{hn=(Mt=It($t,hn,-Mn)).y;var Si=(($t=Mt.x)-(Tn=(Mt=It(Tn,Ir,-Mn)).x))/2,Oi=(hn-(Ir=Mt.y))/2,hs=Si*Si/(Jt*Jt)+Oi*Oi/(Qt*Qt);hs>1&&(Jt*=hs=ut(hs),Qt*=hs);var Fg=Jt*Jt,Vg=Qt*Qt,mv=(tr==ir?-1:1)*ut(xt((Fg*Vg-Fg*Oi*Oi-Vg*Si*Si)/(Fg*Oi*Oi+Vg*Si*Si))),pc=mv*Jt*Oi/Qt+($t+Tn)/2,gc=mv*-Qt*Si/Jt+(hn+Ir)/2,Ti=dt(((hn-gc)/Qt).toFixed(9)),Wr=dt(((Ir-gc)/Qt).toFixed(9));(Ti=$t<pc?me-Ti:Ti)<0&&(Ti=2*me+Ti),(Wr=Tn<pc?me-Wr:Wr)<0&&(Wr=2*me+Wr),ir&&Ti>Wr&&(Ti-=2*me),!ir&&Wr>Ti&&(Wr-=2*me)}var Bg=Wr-Ti;if(xt(Bg)>yn){var Wv=Wr,Yv=Tn,Xv=Ir;Wt=Gt(Tn=pc+Jt*Le(Wr=Ti+yn*(ir&&Wr>Ti?1:-1)),Ir=gc+Qt*Ie(Wr),Jt,Qt,Pn,0,ir,Yv,Xv,[Wr,Wv,pc,gc])}Bg=Wr-Ti;var Kv=Le(Ti),Jv=Ie(Ti),Qv=Le(Wr),Zv=Ie(Wr),yv=Ye(Bg/4),xv=4/3*(Jt*yv),_v=4/3*(Qt*yv),bv=[$t,hn],tl=[$t+xv*Jv,hn-_v*Kv],Cv=[Tn+xv*Zv,Ir-_v*Qv],wv=[Tn,Ir];if(tl[0]=2*bv[0]-tl[0],tl[1]=2*bv[1]-tl[1],Fn)return[tl,Cv,wv].concat(Wt);for(var Sv=[],qv=(Wt=[tl,Cv,wv].concat(Wt).join().split(",")).length,Hs=0;Hs<qv;Hs++)Sv[Hs]=Hs%2?It(Wt[Hs-1],Wt[Hs],Mn).y:It(Wt[Hs],Wt[Hs+1],Mn).x;return Sv}function sr($t){var hn=function zn($t){if((!Array.isArray($t)||!Array.isArray($t&&$t[0]))&&($t=function er($t){if(!$t)return null;var hn={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Jt=[];return String($t).replace(z,function(Qt,Pn,tr){var ir=[],Tn=Pn.toLowerCase();for(tr.replace(J,function(Ir,Fn){Fn&&ir.push(+Fn)}),"m"===Tn&&ir.length>2&&(Jt.push([Pn].concat(ir.splice(0,2))),Tn="l",Pn="m"===Pn?"l":"L");ir.length>=hn[Tn]&&(Jt.push([Pn].concat(ir.splice(0,hn[Tn]))),hn[Tn]););}),Jt}($t)),!$t||!$t.length)return[["M",0,0]];for(var Tn,hn=[],Jt=0,Qt=0,Pn=0,tr=0,Ir=$t.length,Fn=0;Fn<Ir;Fn++){var yn=[];hn.push(yn);var Wt,Mt,Mn=$t[Fn];if((Tn=Mn[0])!=Tn.toUpperCase())switch(yn[0]=Tn.toUpperCase(),yn[0]){case"A":yn[1]=Mn[1],yn[2]=Mn[2],yn[3]=Mn[3],yn[4]=Mn[4],yn[5]=Mn[5],yn[6]=+Mn[6]+Jt,yn[7]=+Mn[7]+Qt;break;case"V":yn[1]=+Mn[1]+Qt;break;case"H":yn[1]=+Mn[1]+Jt;break;case"M":for(Pn=+Mn[1]+Jt,tr=+Mn[2]+Qt,Wt=Mn.length,Mt=1;Mt<Wt;Mt++)yn[Mt]=+Mn[Mt]+(Mt%2?Jt:Qt);break;default:for(Wt=Mn.length,Mt=1;Mt<Wt;Mt++)yn[Mt]=+Mn[Mt]+(Mt%2?Jt:Qt)}else for(var Si=Mn.length,Oi=0;Oi<Si;Oi++)yn[Oi]=Mn[Oi];switch(yn[0]){case"Z":Jt=+Pn,Qt=+tr;break;case"H":Jt=yn[1];break;case"V":Qt=yn[1];break;case"M":Pn=yn[yn.length-2],tr=yn[yn.length-1],Jt=yn[yn.length-2],Qt=yn[yn.length-1];break;default:Jt=yn[yn.length-2],Qt=yn[yn.length-1]}}return hn}($t),Jt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Qt(Wt,Mt,Si){var Oi,hs;if(!Wt)return["C",Mt.x,Mt.y,Mt.x,Mt.y,Mt.x,Mt.y];switch(Wt[0]in{T:1,Q:1}||(Mt.qx=null,Mt.qy=null),Wt[0]){case"M":Mt.X=Wt[1],Mt.Y=Wt[2];break;case"A":Wt=0===parseFloat(Wt[1])||0===parseFloat(Wt[2])?["L",Wt[6],Wt[7]]:["C"].concat(Gt.apply(0,[Mt.x,Mt.y].concat(Wt.slice(1))));break;case"S":"C"===Si||"S"===Si?(Oi=2*Mt.x-Mt.bx,hs=2*Mt.y-Mt.by):(Oi=Mt.x,hs=Mt.y),Wt=["C",Oi,hs].concat(Wt.slice(1));break;case"T":"Q"===Si||"T"===Si?(Mt.qx=2*Mt.x-Mt.qx,Mt.qy=2*Mt.y-Mt.qy):(Mt.qx=Mt.x,Mt.qy=Mt.y),Wt=["C"].concat(Pt(Mt.x,Mt.y,Mt.qx,Mt.qy,Wt[1],Wt[2]));break;case"Q":Mt.qx=Wt[1],Mt.qy=Wt[2],Wt=["C"].concat(Pt(Mt.x,Mt.y,Wt[1],Wt[2],Wt[3],Wt[4]));break;case"H":Wt=["L"].concat(Wt[1],Mt.y);break;case"V":Wt=["L"].concat(Mt.x,Wt[1])}return Wt}function Pn(Wt,Mt){if(Wt[Mt].length>7){Wt[Mt].shift();for(var Si=Wt[Mt];Si.length;)tr[Mt]="A",Wt.splice(Mt++,0,["C"].concat(Si.splice(0,6)));Wt.splice(Mt,1),Ir=hn.length}}for(var tr=[],ir="",Tn="",Ir=hn.length,Fn=0;Fn<Ir;Fn++){hn[Fn]&&(ir=hn[Fn][0]),"C"!==ir&&(tr[Fn]=ir,Fn>0&&(Tn=tr[Fn-1])),hn[Fn]=Qt(hn[Fn],Jt,Tn),"A"!==tr[Fn]&&"C"===ir&&(tr[Fn]="C"),Pn(hn,Fn);var yn=hn[Fn],Mn=yn.length;Jt.x=yn[Mn-2],Jt.y=yn[Mn-1],Jt.bx=parseFloat(yn[Mn-4])||Jt.x,Jt.by=parseFloat(yn[Mn-3])||Jt.y}return(!hn[0][0]||"M"!==hn[0][0])&&hn.unshift(["M",0,0]),hn}return function($t){return sr($t).join(",").split(",").join(" ")}}(),_.namespace=n,_.g=v,_}(),Gr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},ti=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,Gr.classNamePrefix.length)!==Gr.classNamePrefix&&(n=Gr.classNamePrefix+n),n}).join(" ")},R=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,Gr.classNamePrefix.length)===Gr.classNamePrefix&&(n=n.substr(Gr.classNamePrefix.length)),n}).join(" ")},Q=function(e,n){for(var t={},r={},o=He.namespace.svg,s=n||o,c=document.createDocumentFragment(),p=[e,c,s];p.length>0;){s=p.pop();for(var m=p.pop(),C=p.pop(),M=0,_=C.length;M<_;M++){var G=C[M];if(!G.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var ne=G.tagName;G.hasOwnProperty("namespaceURI")&&(s=G.namespaceURI);var oe=document.createElementNS(s,ne),Te=s===o,Pe=Te?He:Rt,ze=G.attributes;ze&&Pe(oe).attr(ze);var Be=G.style;if(Be&&Rt(oe).css(Be),G.hasOwnProperty("className")){var L=G.className;Te?oe.className.baseVal=L:oe.className=L}if(G.hasOwnProperty("textContent")&&(oe.textContent=G.textContent),G.hasOwnProperty("selector")){var z=G.selector;if(t[z])throw new Error("json-dom-parser: selector must be unique");t[z]=oe,Pe(oe).attr("joint-selector",z)}if(G.hasOwnProperty("groupSelector")){var J=G.groupSelector;Array.isArray(J)||(J=[J]);for(var ie=0,me=J.length;ie<me;ie++){var Ie=J[ie],Le=r[Ie];Le||(Le=r[Ie]=[]),Le.push(oe)}}m.appendChild(oe);var Ye=G.children;Array.isArray(Ye)&&p.push(Ye,oe,s)}}return{fragment:c,selectors:t,groupSelectors:r}},se=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},ge=function(e,n,t){for(var o,r=Array.isArray(n)?n:n.split(t||"/"),s=0,c=r.length;s<c;){if(o=r[s++],Object(e)!==e||!(o in e))return;e=e[o]}return e},Ae=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},Se=function(e,n,t,r){const o=Array.isArray(n)?n:n.split(r||"/"),s=o.length-1;let c=e,p=0;for(;p<s;p++){const m=o[p];if(!Ae(c,m))return e;c=c[m]||(c[m]={})}return c[o[s]]=t,e},De=function(e,n,t){const r=Array.isArray(n)?n:n.split(t||"/"),o=r.length-1;let s=e,c=0;for(;c<o;c++){const p=r[c];if(!Ae(s,p))return e;const m=s[p];if(!m)return e;s=m}return delete s[r[o]],e},d=function(e){return d.id=d.id||1,e.id=void 0===e.id?"j_"+d.id++:e.id,e.id},x=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},w=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var r in e)void 0===t[r]&&(t[r]=e[r]);n=t}var o=n.target;if(o){var s=o.correspondingUseElement;s&&(n.target=s)}return n},F=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),s=setTimeout(function(){t(r+o)},o);return n=r+o,s}}return function(t,r,...o){return e(void 0!==r?t.bind(r,...o):t)}}(),H=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),he=function(e){return br(e)&&"%"===e.slice(-1)},ce=function(e,n){var r=parseFloat(e);if(Number.isNaN(r))return null;var s,o={};if(o.value=r,null==n)s="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;s=n.join("|")}else br(n)&&(s=n);var c=function t(p){var m=new RegExp("(?:\\d+(?:\\.\\d+)*)("+p+")$").exec(e);return m?m[1]:null}(s);return null===c?null:(o.unit=c,o)},tn=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,r,o,s;return t=r=o=s=0,isFinite(e.vertical)&&(t=o=+e.vertical),isFinite(e.horizontal)&&(r=s=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:t,right:r,bottom:o,left:s}},Sr={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var r=(11-6*n-11*e)/4;return-r*r+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(r){var o=e(r);return o<n?n:o>t?t:o}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},Hn={number:function(e,n){var t=n-e;return function(r){return e+t*r}},object:function(e,n){var t=Object.keys(e);return function(r){var o,s,c={};for(o=t.length-1;-1!=o;o--)c[s=t[o]]=e[s]+(n[s]-e[s])*r;return c}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),r=parseInt(n.slice(1),16),o=255&t,s=(255&r)-o,c=65280&t,p=(65280&r)-c,m=16711680&t,C=(16711680&r)-m;return function(M){return"#"+(1<<24|o+s*M&255|c+p*M&65280|m+C*M&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=t.exec(e),o=t.exec(n),s=o[1].indexOf("."),c=s>0?o[1].length-s-1:0,p=+o[1]-(e=+r[1]),m=r[2];return function(C){return(e+p*C).toFixed(c)+m}}},cn={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return an('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return an('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return an('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return an(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return an('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return an('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return an('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return an('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return an('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return an('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return an('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},an=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(r){for(var o=Array.from(arguments),s=o.slice(1,4).find(function(m){return!!m}),c=s.split("."),p=t[c.shift()];void 0!==p&&c.length;)p=p[c.shift()];return void 0!==p?p:""})}},jt=N.assign,nr=N.defaults,Vi=N.defaultsDeep,cr=N.invokeMap||N.invoke,Bi=N.sortedIndexBy||N.sortedIndex,Ca=N.uniqBy||N.uniq,Kr=N.clone,Jr=N.cloneDeep,_n=N.isEmpty,Hi=N.isEqual,Rn=N.isFunction,Dn=N.isPlainObject,bn=N.toArray,hu=N.groupBy,nl=N.flattenDeep,gu=N.without,rl=N.difference,zs=N.union,ci=N.has,Or=N.result,to=N.omit,bs=N.pick,Zn=N.forIn,Ei=N.camelCase,vu=N.uniqueId,Hr=function(){if(N.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=Rn(n)?n:Qr;return e.push(function(r,o){var s=t(r,o);return void 0!==s?s:Array.isArray(r)&&!Array.isArray(o)?o:void 0}),N.mergeWith.apply(this,e)}return N.merge.apply(this,arguments)},Yn=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},Xt=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},br=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},Qr=function(){};var e,n,rr=f(71066);function Cs(e){e=Ca(e);const n=bn(e).reduce(function(t,r){return t[r.id]=r.clone(),t},{});return bn(e).forEach(function(t){const r=n[t.id];if(r.isLink()){const c=r.source(),p=r.target();c.id&&n[c.id]&&r.prop("source/id",n[c.id].id),p.id&&n[p.id]&&r.prop("target/id",n[p.id].id)}const o=t.get("parent");o&&n[o]&&r.set("parent",n[o].id);const s=bn(t.get("embeds")).reduce(function(c,p){return n[p]&&c.push(n[p].id),c},[]);_n(s)||r.set("embeds",s)}),n}const no={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},il=Object.keys(no).map(e=>no[e]).join(""),Qa="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Ee=/\s/g,Ke=new RegExp(`^(${Qa}\\*)?([${il}])([-+]{1,2}${Qa})?$`,"g");function $e(e){throw new Error(`Invalid calc() expression: ${e}`)}function At(e,n){const t=Ke.exec(e.replace(Ee,""));t||$e(e),Ke.lastIndex=0;const[,r=1,o,s=0]=t,{x:c,y:p,width:m,height:C}=n;let M=0;switch(o){case no.width:M=m;break;case no.height:M=C;break;case no.x:M=c;break;case no.y:M=p;break;case no.minimum:M=Math.min(C,m);break;case no.maximum:M=Math.max(C,m);break;case no.diagonal:M=Math.sqrt(C*C+m*m)}return parseFloat(r)*M+function sn(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)}function Sn(e){return"string"==typeof e&&e.includes("calc")}const Xn="calc(".length;function Bo(e,n){let t=e,r=0;for(;;){let o=t.indexOf("calc(",r);if(-1===o)return t;let s=o+Xn,c=1;e:for(;;){switch(t[s]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:$e(t)}s++}let p=t.slice(o+Xn,s);Sn(p)&&(p=Bo(p,n));const m=String(At(p,n));t=t.slice(0,o)+m+t.slice(s+1),r=o+m.length}}function ro(e,n){return function(t,r){var o=he(t);t=parseFloat(t),o&&(t/=100);var s={};if(isFinite(t)){var c=o||t>=0&&t<=1?t*r[n]:Math.max(t+r[n],0);s[e]=c}return s}}function Ur(e,n,t){return function(r,o){var c,s=he(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var p=o[t]();c=s||r>0&&r<1?p[e]+o[n]*r:p[e]+r}var m=ye();return m[e]=c||0,m}}function Za(e,n,t){return function(r,o){var s;s="middle"===r?o[n]/2:r===t?o[n]:isFinite(r)?r>-1&&r<1?-o[n]*r:-r:he(r)?o[n]*parseFloat(r)/100:0;var c=ye();return c[e]=-(o[e]+s),c}}function q(e,n){var t="joint-shape",r=n&&n.resetOffset;return function(o,s,c){var p=Rt(c),m=p.data(t);if(!m||m.value!==o){var C=e(o);m={value:o,shape:C,shapeBBox:C.bbox()},p.data(t,m)}var M=m.shape.clone(),_=m.shapeBBox.clone(),G=_.origin(),ne=s.origin();_.x=ne.x,_.y=ne.y;var oe=s.maxRectScaleToFit(_,ne);return M.scale(0===_.width||0===s.width?1:oe.sx,0===_.height||0===s.height?1:oe.sy,G),r&&M.translate(-G.x,-G.y),M}}function fe(e){var t=q(function n(r){return new Lt(He.normalizePathData(r))},e);return function(r,o,s){return{d:t(r,o,s).serialize()}}}function Ce(e){var n=q(An,e);return function(t,r,o){return{points:n(t,r,o).serialize()}}}function Ze(e,n){var t=new ye(1,0);return function(r){var o,s,c=this[e](r);return c?(s=n.rotate?c.vector().vectorAngle(t):0,o=c.start):(o=this.path.start,s=0),0===s?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+s+")"}}}function be(e){return function(t,r,o){const s=He(o);s.attr(e)!==t&&s.attr(e,t)}}function nt(e,n,t){return void 0!==t.text}function st(){return this.model.isLink()}function yt(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(n["stroke-opacity"]=r,n["fill-opacity"]=r),n}function Tt(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const vt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:be("href")},xlinkHref:{set:be("xlink:href")},filter:{qualify:Dn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Dn,set:Tt},stroke:{qualify:Dn,set:Tt},sourceMarker:{qualify:Dn,set:function(e,n,t,r){return e=jt(yt(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Dn,set:function(e,n,t,r){return e=jt(yt(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Dn,set:function(e,n,t,r){return e=jt(yt(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!Dn(t.textWrap)},set:function(e,n,t,r){var o=Rt(t),s="joint-text",c=o.data(s),p=bs(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:m}=p;Sn(m)&&(p.x=Bo(m,n));var C=p.fontSize=r["font-size"]||r.fontSize,M=JSON.stringify([e,p]);if(void 0===c||c!==M){C&&t.setAttribute("font-size",C);var _=p.textPath;if(Yn(_)){var G=_.selector;if("string"==typeof G){var ne=this.findBySelector(G)[0];ne instanceof SVGPathElement&&(p.textPath=jt({"xlink:href":"#"+ne.id},_))}}He(t).text(""+e,p),o.data(s,M)}}},textWrap:{qualify:Dn,set:function(e,n,t,r){var o=e.width||0,s={};s.width=he(o)?n.width*parseFloat(o)/100:o<=0?n.width+o:o;var c=e.height||0;s.height=he(c)?n.height*parseFloat(c)/100:c<=0?n.height+c:c;var p,m=e.text;void 0===m&&(m=r.text),p=void 0!==m?function(e,n,t={},r={}){var o=n.width,s=n.height,c=r.svgDocument||He("svg").node,p=He("tspan").node,m=He("text").attr(t).append(p).node,C=document.createTextNode("");m.style.opacity=0,m.style.display="block",p.style.display="block",p.appendChild(C),c.appendChild(m),r.svgDocument||document.body.appendChild(c);var M=r.separator||" ",_=r.eol||"\n",G=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,ne=r.maxLineCount;Xt(ne)||(ne=1/0);for(var ze,Be,L,oe=e.split(M),Te=[],Pe=[],z=0,J=0,ie=oe.length;z<ie;z++){var me=oe[z];if(me){var Ie=!1;if(_&&me.indexOf(_)>=0){if(me.length>1){for(var Le=me.split(_),Ye=0,dt=Le.length-1;Ye<dt;Ye++)Le.splice(2*Ye+1,0,_);oe.splice(z,1,...Le.filter(Jt=>""!==Jt)),z--,ie=oe.length;continue}Pe[++J]="",Ie=!0}if(!Ie)if(C.data=Pe[J]?Pe[J]+" "+me:me,p.getComputedTextLength()<=o)Pe[J]=C.data,(ze||Be)&&(Te[J++]=!0,ze=0,Be=0);else{if(!Pe[J]||ze){var ut=!!ze;if(ze=me.length-1,ut||!ze){if(!ze){if(!Pe[J]){Pe=[];break}oe.splice(z,2,me+oe[z+1]),ie--,Te[J++]=!0,z--;continue}oe[z]=me.substring(0,ze),oe[z+1]=me.substring(ze)+(void 0===oe[z+1]?"":oe[z+1])}else{if(Be)oe.splice(z,2,oe[z]+oe[z+1]),Be=0;else{var xt=me.search(G);xt>-1&&xt!==me.length-1&&0!==xt&&(Be=xt+1,ze=0),oe.splice(z,1,me.substring(0,Be||ze),me.substring(Be||ze)),ie++}J&&!Te[J-1]&&J--}z--;continue}J++,z--}var Pt=null;if(Pe.length>ne)Pt=ne-1;else if(void 0!==s){var It;void 0===L&&(L=(It="auto"===t.lineHeight?{value:1.5,unit:"em"}:ce(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===It.unit&&(L*=m.getBBox().height)),L*Pe.length>s&&(Pt=Math.floor(s/L)-1)}if(null!==Pt){Pe.splice(Pt+1);var Gt=r.ellipsis;if(!Gt||Pt<0)break;"string"!=typeof Gt&&(Gt="\u2026");var er=Pe[Pt];if(!er&&!Ie)break;var sr,$t,zn=er.length;do{if($t=er[zn],sr=er.substring(0,zn),$t?$t.match(M)&&(sr+=$t):sr+="string"==typeof M?M:" ",C.data=sr+=Gt,p.getComputedTextLength()<=o){Pe[Pt]=sr;break}zn--}while(zn>=0);break}}}return r.svgDocument?c.removeChild(m):document.body.removeChild(c),Pe.join(_)}(""+m,s,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",vt.text.set.call(this,p,n,t,r)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var r=Rt(t),o="joint-title",s=r.data(o);if(void 0===s||s!==e){r.data(o,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var p=document.createElementNS(t.namespaceURI,"title");p.textContent=e,t.insertBefore(p,c)}}}},lineHeight:{qualify:nt},textVerticalAnchor:{qualify:nt},textPath:{qualify:nt},annotations:{qualify:nt},eol:{qualify:nt},displayEmpty:{qualify:nt},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:Dn,set:function(e,n,t){Rt(t).css(e)}},html:{set:function(e,n,t){Rt(t).html(e+"")}},ref:{},refX:{position:Ur("x","width","origin")},refY:{position:Ur("y","height","origin")},refDx:{position:Ur("x","width","corner")},refDy:{position:Ur("y","height","corner")},refWidth:{set:ro("width","width")},refHeight:{set:ro("height","height")},refRx:{set:ro("rx","width")},refRy:{set:ro("ry","height")},refRInscribed:{set:function(e){var n=ro("r","width"),t=ro("r","height");return function(r,o){return(o.height>o.width?n:t)(r,o)}}()},refRCircumscribed:{set:function(e,n){var t=he(e);e=parseFloat(e),t&&(e/=100);var o,r=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(o=t||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:o}}},refCx:{set:ro("cx","width")},refCy:{set:ro("cy","height")},xAlignment:{offset:Za("x","width","right")},yAlignment:{offset:Za("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:fe({resetOffset:!0})},refDKeepOffset:{set:fe({resetOffset:!1})},refPointsResetOffset:{set:Ce({resetOffset:!0})},refPointsKeepOffset:{set:Ce({resetOffset:!1})},connection:{qualify:st,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),o=r.divideAtLength(t),s=r.divideAtLength(-t);o&&s&&(n=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:st,set:Ze("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:st,set:Ze("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:st,set:Ze("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:st,set:Ze("getTangentAtRatio",{rotate:!1})}};vt["xlink:href"]=vt.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{vt[e]={qualify:Sn,set:function(t,r){return{[e]:Bo(t,r)}}}}),vt.refR=vt.refRInscribed,vt.refD=vt.refDResetOffset,vt.refPoints=vt.refPointsResetOffset,vt.atConnectionLength=vt.atConnectionLengthKeepGradient,vt.atConnectionRatio=vt.atConnectionRatioKeepGradient,vt.refX2=vt.refX,vt.refY2=vt.refY,vt.refWidth2=vt.refWidth,vt.refHeight2=vt.refHeight,vt["ref-x"]=vt.refX,vt["ref-y"]=vt.refY,vt["ref-dy"]=vt.refDy,vt["ref-dx"]=vt.refDx,vt["ref-width"]=vt.refWidth,vt["ref-height"]=vt.refHeight,vt["x-alignment"]=vt.xAlignment,vt["y-alignment"]=vt.yAlignment;const Ut=vt,Nt=rr.Model.extend({constructor:function(e,n){var t,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=vu("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(r=this.parse(r,n)||{}),(t=Or(this,"defaults"))&&(r=Hr({},t,r)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=Or(this.constructor.prototype,"defaults").attrs||{},r={};Zn(this.attributes.attrs,function(s,c){const p=n[c];Zn(s,function(m,C){Yn(m)&&!Array.isArray(m)?Zn(m,function(M,_){(!p||!p[C]||!Hi(p[C][_],M))&&(r[c]=r[c]||{},(r[c][C]||(r[c][C]={}))[_]=M)}):(!p||!Hi(p[C],m))&&(r[c]=r[c]||{},r[c][C]=m)})});const o=Jr(to(this.attributes,"attrs"));return o.attrs=r,o},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};Zn(this.get("attrs"),function(s,c){s&&s.port&&(void 0!==s.port.id?n[s.port.id]=s.port:n[s.port]={id:s.port})});var t={};Zn(e,function(s,c){n[c]||(t[c]=!0)}),this.graph&&!_n(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(s){t[s.get("target").port]&&s.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(s){t[s.get("source").port]&&s.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const o=this.getEmbeddedCells();for(let s=0,c=o.length;s<c;s++){const p=o[s];p&&p.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],t=t-r.length+1;var o=n.get("cells"),s=o.indexOf(this)!==o.length-r.length;s||(s=r.some(function(c,p){return c.get("z")!==t+p})),s&&(this.startBatch("to-front"),t+=r.length,r.forEach(function(c,p){c.set("z",t+p,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var s=0!==n.get("cells").indexOf(this);s||(s=r.some(function(c,p){return c.get("z")!==t+p})),s&&(this.startBatch("to-back"),t-=r.length,r.forEach(function(c,p){c.set("z",t+p,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const r=jt([],this.get("embeds"));e.forEach(o=>{r[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,n)}),this.set("embeds",Ca(r),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(r=>r.unset("parent",n)),this.set("embeds",gu(this.get("embeds"),...e.map(r=>r.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var r=t.shift();n.push(r),t.push.apply(t,r.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(o){n.push.apply(n,o.getEmbeddedCells(e))});else n=bn(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=br(e)?e:e.id,r=this.parent();if(n=nr({deep:!0},n),this.graph&&n.deep){for(;r;){if(r===t)return!0;r=this.graph.getCell(r).parent()}return!1}return r===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return bn(Cs([this].concat(this.getEmbeddedCells({deep:!0}))));var n=rr.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var r="/",o=br(e);if(o||Array.isArray(e)){if(arguments.length>1){var s,c;o?c=(s=e).split("/"):(s=e.join(r),c=e.slice());var p=c[0],m=c.length;if((t=t||{}).propertyPath=s,t.propertyValue=n,t.propertyPathArray=c,1===m)return this.set(p,n,t);for(var C={},M=C,_=p,G=1;G<m;G++){var ne=c[G],oe=Number.isFinite(o?Number(ne):ne);M=M[_]=oe?[]:{},_=ne}C=Se(C,c,n,"/");var Te=Hr({},this.attributes);t.rewrite&&De(Te,s,"/");var Pe=Hr(Te,C);return this.set(p,Pe[p],t)}return ge(this.attributes,e,r)}return this.set(Hr({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),r=t[0];if("attrs"===r&&(n.dirty=!0),1===t.length)return this.unset(e,n);var o=t.slice(1),s=Jr(this.get(r));return De(s,o,"/"),this.set(r,s,n)},attr:function(e,n,t){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):br(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,r){r=r||"/",t=jt({duration:100,delay:10,timingFunction:Sr.linear,valueFunction:Hn.number},t);var c,s=0,p=function(_){var G,ne,oe;(ne=(_-=s=s||_)/t.duration)<1?this._transitionIds[e]=G=F(p):(ne=1,delete this._transitionIds[e]),oe=c(t.timingFunction(ne)),t.transitionId=G,this.prop(e,oe,t),G||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:m}=this;let C;return C=setTimeout(_=>{m[e]&&(m[e]=gu(m[e],C),0===m[e].length&&delete m[e]),this.stopPendingTransitions(e,r),c=t.valueFunction(ge(this.attributes,e,r),n),this._transitionIds[e]=F(_),this.trigger("transition:start",this,e)},t.delay,p),m[e]||(m[e]=[]),m[e].push(C),C},getTransitions:function(){return zs(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(s=>Hi(o,s.split(n).slice(0,o.length)))}return r.forEach(o=>{t[o].forEach(c=>clearTimeout(c)),delete t[o]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(s=>Hi(o,s.split(n).slice(0,o.length)))}r.forEach(o=>{H(t[o]),delete t[o],this.trigger("transition:end",this,o)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,jt({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,jt({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new ye(0,0)},getPointFromConnectedLink:function(){return new ye},getBBox:function(){return new bt(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const r=new ye(n,t);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||Ut[e]},define:function(e,n,t,r){t=jt({defaults:Vi({type:e},n,this.prototype.defaults)},t);var o=this.extend(t,r);return"undefined"!=typeof joint&&ci(joint,"shapes")&&Se(joint.shapes,e,o,"."),o}}),Kt=Nt.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?Kr(this.get("source")):e instanceof Nt?((r=Kr(n)||{}).id=e.id,this.set("source",r,t)):Dn(e)?this.set("source",r=e,n):((r=Kr(n)||{}).x=e.x,r.y=e.y,this.set("source",r,t));var r},target:function(e,n,t){return void 0===e?Kr(this.get("target")):e instanceof Nt?((r=Kr(n)||{}).id=e.id,this.set("target",r,t)):Dn(e)?this.set("target",r=e,n):((r=Kr(n)||{}).x=e.x,r.y=e.y,this.set("target",r,t));var r},router:function(e,n,t){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?Kr(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:n},o?n:t)},connector:function(e,n,t){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?Kr(r):r:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:n},o?n:t)},label:function(e,n,t){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),r.splice(e,0,n),this.labels(r,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(n);return this.prop(["vertices",e],o,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],r=0;r<e.length;r++){var o=e[r],s=this._normalizeVertex(o);t.push(s)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var s=this._normalizeVertex(n);return r.splice(e,0,s),this.vertices(r,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return Dn(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+n}},t)},scale:function(e,n,t,r){return this.applyToPoints(function(o){return ye(o).scale(e,n,t).toJSON()},r)},applyToPoints:function(e,n){if(!Rn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:r,target:o}=this.attributes;r.id||(t.source=e(r)),o.id||(t.target=e(o));var s=this.vertices();return s.length>0&&(t.vertices=s.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ye(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ye(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ye),this.getTargetPoint()];return new An(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();t&&r&&(n=t===r||t.isEmbeddedIn(r)?r:r.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,r)),o&&(!n||n.id!==o.id)&&o.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,r=n.id,o=t.id;if(!r||!o)return!1;var s=r===o;if(!s&&e.deep&&this.graph){var c=this.getSourceCell(),p=this.getTargetCell();s=c.isEmbeddedIn(p)||p.isEmbeddedIn(c)}return s},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=br(e)||Xt(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function jn(e,n,t){var r=e.toJSON();return r.angle=n||0,nr({},t,r)}function zt(e,n,t){return e.map(function(r,o,s){var c=this.pointAt((o+.5)/s.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),jn(c.round(),0,r)},si(n,t))}function gr(e,n,t,r){var o=n.center(),s=n.width/n.height,c=n.topMiddle(),p=Ar.fromRect(n);return e.map(function(m,C,M){var _=t+r(C,M.length),G=c.clone().rotate(o,-_).scale(s,1,o),ne=m.compensateRotation?-p.tangentTheta(G):0;return(m.dx||m.dy)&&G.offset(m.dx||0,m.dy||0),m.dr&&G.move(o,m.dr),jn(G.round(),ne,m)})}function kr(e,n){var t=n.x;br(t)&&(t=parseFloat(t)/100*e.width);var r=n.y;return br(r)&&(r=parseFloat(r)/100*e.height),mi(t||0,r||0)}const fi=function(e,n,t){return e.map(kr.bind(null,n))},qn=function(e,n,t){return t.fn(e,n,t)},wa=function(e,n,t){return zt(e,kr(n,t.start||n.origin()),kr(n,t.end||n.corner()))},xo=function(e,n,t){return zt(e,n.origin(),n.bottomLeft())},Lr=function(e,n,t){return zt(e,n.topRight(),n.corner())},yu=function(e,n,t){return zt(e,n.origin(),n.topRight())},vd=function(e,n,t){return zt(e,n.bottomLeft(),n.corner())},md=function(e,n,t){var o=t.step||360/e.length;return gr(e,n,t.startAngle||0,function(s){return s*o})},yd=function(e,n,t){var o=t.step||20;return gr(e,n,t.startAngle||0,function(s,c){return(s+.5-c/2)*o})};function _o(e,n){return Vi({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Us(e,n,t,r){r=nr({},r,{offset:15});var c,p,m,C,o=n.center().theta(e),s=xu(n),M=r.offset,_=0;o<s[1]||o>s[2]?(m=".3em",c=M,p=0,C="start"):o<s[0]?(m="0",c=0,p=-M,t?(_=-90,C="start"):C="middle"):o<s[3]?(m=".3em",c=-M,p=0,C="end"):(m=".6em",c=0,p=M,t?(_=90,C="start"):C="middle");var G=Math.round;return _o({x:G(c),y:G(p),angle:_,attrs:{".":{y:m,"text-anchor":C}}})}function xu(e){var n=e.center(),t=n.theta(e.origin()),r=n.theta(e.bottomLeft()),o=n.theta(e.corner());return[t,n.theta(e.topRight()),o,r]}function vc(e,n,t,r){var s,c,p,m,o=n.center().theta(e),C=(r=nr({},r,{offset:15})).offset,M=0,_=xu(n);o<_[1]||o>_[2]?(p=".3em",s=-C,c=0,m="end"):o<_[0]?(p=".6em",s=0,c=C,t?(M=90,m="start"):m="middle"):o<_[3]?(p=".3em",s=C,c=0,m="start"):(p="0em",s=0,c=-C,t?(M=-90,m="start"):m="middle");var G=Math.round;return _o({x:G(s),y:G(c),angle:M,attrs:{".":{y:p,"text-anchor":m}}})}function ol(e,n,t){t=nr({},t,{offset:20});var m,r=mi(0,0),o=-e.theta(r),s=o,c=e.clone().move(r,t.offset).difference(e).round(),p=".3em";(o+90)%180==0?(m=n?"end":"middle",!n&&-270===o&&(p="0em")):o>-270&&o<-90?(m="start",s=o-180):m="end";var C=Math.round;return _o({x:C(c.x),y:C(c.y),angle:n?s:0,attrs:{".":{y:p,"text-anchor":m}}})}const xd=function(e,n,t){return _o(t,n)},_d=function(e,n,t){return _o(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},$r=function(e,n,t){return _o(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},di=function(e,n,t){return _o(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bd=function(e,n,t){return _o(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Cd=function(e,n,t){return Us(e,n,!0,t)},mc=function(e,n,t){return Us(e,n,!1,t)},wd=function(e,n,t){return vc(e,n,!0,t)},al=function(e,n,t){return vc(e,n,!1,t)},$s=function(e,n,t){return ol(e.difference(n.center()),!1,t)},sl=function(e,n,t){return ol(e.difference(n.center()),!0,t)};var qa=function(e){var n=Jr(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=T,this._init(n)};qa.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),r=this.getPortsByGroup(e),o=t.position||{},s=o.name,c=this.portLayoutNamespace;c[s]||(s="left");var p=o.args||{},m=r.map(function(_){return _&&_.position&&_.position.args}),C=c[s](m,n,p),M={ports:r,result:[]};return bn(C).reduce(function(_,G,ne){var oe=_.ports[ne];return _.result.push({portId:oe.id,portTransformation:G,labelTransformation:this._getPortLabelLayout(oe,ye(G),n),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),_}.bind(this),M),M.result},_getPortLabelLayout:function(e,n,t){var r=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return r[o]?r[o](n,t,e.label.position.args):null},_init:function(e){if(Yn(e.groups))for(var n=Object.keys(e.groups),t=0,r=n.length;t<r;t++){var o=n[t];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var s=bn(e.items),c=0,p=s.length;c<p;c++)this.ports.push(this._evaluatePort(s[c]))},_evaluateGroup:function(e){return Hr(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=jt({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=Hr({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=Hr({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=jt({},t.size,n.size),n},_getZIndex:function(e,n){return Xt(n.z)?n.z:Xt(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return Hr({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var r,t={};Rn(e)?(r="fn",t.fn=e):br(e)?r=e:void 0===e?r=n?"left":null:Array.isArray(e)?(r="absolute",t.x=e[0],t.y=e[1]):Yn(e)&&(r=e.name,jt(t,e.args));var o={args:t};return r&&(o.name=r),o},_getLabel:function(e,n){var t=e.label||{},r=t;return r.position=this._getPosition(t.position,n),r}};const Ws={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};bn(e.items).forEach(function(p){n[p.id]=!0});var t=this.previous("ports")||{},r={};bn(t.items).forEach(function(p){n[p.id]||(r[p.id]=!0)});var o=this.graph;o&&!_n(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(p){r[p.get("target").port]&&p.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(p){r[p.get("source").port]&&p.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return Jr(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=bn(this.prop(["ports","items"])).filter(t=>t.group===e);return Jr(n)},getPort:function(e){return Jr(bn(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,bt(this.size())).reduce(function(t,r){var o=r.portTransformation;return t[r.portId]={x:o.x,y:o.y,angle:o.angle},t},{})},getPortIndex:function(e){var n=Yn(e)?e.id:e;return this._isValidPortId(n)?bn(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!Yn(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=jt([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const r="number"==typeof e?e:this.getPortIndex(e);if(!Yn(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const o=jt([],this.prop("ports/items"));return o.splice(r,0,n),this.prop("ports/items",o,t),this},portProp:function(e,n,t,r){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?s[0]=["ports","items",o].concat(n):br(n)?s[0]=["ports/items/",o,"/",n].join(""):(s=["ports/items/"+o],Dn(n)&&(s.push(n),s.push(t))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=bn((e=e||{}).items);return t.forEach(function(r){"object"!=typeof r&&n.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),Ca(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!Yn(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",jt([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},r=this.getPortIndex(e);if(-1!==r){const o=jt([],this.prop(["ports","items"]));o.splice(r,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,r;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;r=jt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(c){const p=Yn(c)?c.id:c;return s.id===p})})}else t=e||{},r=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],r,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new qa(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var r=t.filter(function(s){if(!n.find(function(c){return c.id===s.id}))return s}),o=n.filter(function(s){if(!t.find(function(c){return c.id===s.id}))return s});o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},Ys={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,r=n.node.childNodes.length;t<r;t++)e.push(n.node.childNodes[t]);var o=hu(this.model._portSettingsData.getPorts(),"z"),s="auto";bn(o[s]).forEach(function(M){var _=this._getPortElement(M);n.append(_),e.push(_)},this);for(var c=Object.keys(o),p=0;p<c.length;p++){var m=c[p];if(m!==s){var C=parseInt(m,10);this._appendPorts(o[m],C,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var r=this._getContainerElement(),o=bn(e).map(this._getPortElement,this);t[n]||n<0?He(t[Math.max(n,0)]).before(o):r.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const r=t.portContentElement.node,o=t.portContentSelectors,[s=null]=this.findBySelector(n,r,o);return s},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){cr(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,r,o;var s=He(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var p=this.parseDOMJSON(c,s.node),m=p.fragment;n=m.childNodes.length>1?He("g").append(m):He(m.firstChild),o=p.selectors}else n=He(c),Array.isArray(n)&&(n=He("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const C=this._getPortLabelMarkup(e.label);if(Array.isArray(C)){const{fragment:G,selectors:ne}=this.parseDOMJSON(C,s.node),oe=G.childNodes.length;oe>0&&(r=ne,t=1===oe?He(G.firstChild):He("g").append(G))}else t=He(C),Array.isArray(t)&&(t=He("g").append(t));var M;if(o&&r){for(var _ in r)if(o[_]&&_!==this.selector)throw new Error("ElementView: selectors within port must be unique.");M=jt({},o,r)}else M=o||r;return s.append(n.addClass("joint-port-body")),t&&s.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:t,portSelectors:M,portLabelSelectors:r,portContentElement:n,portContentSelectors:o},s},_updatePortGroup:function(e){for(var n=bt(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),r=0,o=t.length;r<o;r++){var s=t[r],p=this._portElementsCache[s.portId]||{},m=s.portTransformation;this.applyPortTransform(p.portElement,m),this.updateDOMSubtreeAttributes(p.portElement.node,s.portAttrs,{rootBBox:new bt(s.portSize),selectors:p.portSelectors});var C=s.labelTransformation;C&&p.portLabelElement&&(this.applyPortTransform(p.portLabelElement,C,-m.angle||0),this.updateDOMSubtreeAttributes(p.portLabelElement.node,C.attrs,{rootBBox:new bt(s.labelSize),selectors:p.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var r=He.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Zr=Nt.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Nt.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const r=Xt(n);t=(r?t:e)||{};const{parentRelative:o,deep:s,restrictedArea:c}=t;let p;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const m=this.getParentCell();m&&!m.isLink()&&(p=m.get("position"))}if(r){if(p&&(e+=p.x,n+=p.y),s||c){const{x:m,y:C}=this.get("position");this.translate(e-m,n-C,t)}else this.set("position",{x:e,y:n},t);return this}{const m=ye(this.get("position"));return o?m.difference(p):m}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=t.restrictedArea;if(o&&t.translateBy===this.id)if("function"==typeof o){var s=o.call(this,r.x+e,r.y+n,t);e=s.x-r.x,n=s.y-r.y}else{var c=this.getBBox({deep:!0}),p=r.x-c.x,m=r.y-c.y,C=Math.max(o.x+p,Math.min(o.x+o.width+p-c.width,r.x+e)),M=Math.max(o.y+m,Math.min(o.y+o.height+m-c.height,r.y+n));e=C-r.x,n=M-r.y}var _={x:r.x+e,y:r.y+n};return t.tx=e,t.ty=n,t.transition?(Yn(t.transition)||(t.transition={}),this.transition("position",_,jt({},t.transition,{valueFunction:Hn.object})),cr(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",_,t),cr(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(Yn(e)&&(t=n,n=Xt(e.height)?e.height:r.height,e=Xt(e.width)?e.width:r.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var r=this.get("size");switch(t.direction){case"left":case"right":n=r.height;break;case"top":case"bottom":e=r.width}var c,o=Xe(this.get("angle")||0),s=this.getBBox();if(o){var p={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(p+=Math.floor((o+45)/90),p%=4);var m=s[["bottomLeft","corner","topRight","origin"][p]](),C=ye(m).rotate(s.center(),-o),M=Math.sqrt(e*e+n*n)/2,_=p*Math.PI/2;_+=Math.atan(p%2==0?n/e:e/n),_-=Vt(o);var G=ye.fromPolar(M,_,C);c=ye(G).offset(e/-2,n/-2)}else switch(c=s.topLeft(),t.direction){case"top":case"top-right":c.offset(0,s.height-n);break;case"left":case"bottom-left":c.offset(s.width-e,0);break;case"top-left":c.offset(s.width-e,s.height-n)}this.set("size",{width:e,height:n},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,r){var o=this.getBBox().scale(e,n,t);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(_=>_.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&cr(t,"fitEmbeds",e);const{left:r,right:o,top:s,bottom:c}=tn(e.padding);let{x:p,y:m,width:C,height:M}=n.getCellsBBox(t);return p-=r,m-=s,C+=r+o,M+=c+s,this.set({position:{x:p,y:m},size:{width:C,height:M}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,r){if(t){var o=this.getBBox().center(),s=this.get("size"),c=this.get("position");o.rotate(t,this.get("angle")-e);var p=o.x-s.width/2-c.x,m=o.y-s.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(c.x+p,c.y+m,r),this.rotate(e,n,null,r),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,r);return this},angle:function(){return Xe(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:r,rotate:o}=e;if(r&&n){const _=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return _.push(this),n.getCellsBBox(_,e)}const{angle:s=0,position:{x:c,y:p},size:{width:m,height:C}}=t,M=new bt(c,p,m,C);return o&&M.rotateAroundCenter(s),M},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),r=t.center(),o=e.get(n);if(!o)return r;var s=o.port;if(!s||!this.hasPort(s))return r;var c=this.portProp(s,["group"]),p=this.getPortsPositions(c),m=new ye(p[s]).offset(t.origin()),C=this.angle();return C&&m.rotate(r,-C),m}});jt(Zr.prototype,Ws);const ul={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,r=t>0&&n[0]||[],o=t>1&&n[t-1]||{};return Array.isArray(r)||(o instanceof Nt?r=n:r instanceof Nt&&(n.length>1&&n.pop(),r=n)),o instanceof Nt&&(o={}),e.call(this,r,o)}}},Sd=rr.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&ci(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,s=new("link"===e.type?Kt:ge(t.cellNamespace,e.type,".")||Zr)(e,n);return n.dry||(s.graph=t.graph),s},comparator:function(e){return e.get("z")||0}}),la=rr.Model.extend({initialize:function(e,n){var t=new Sd([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});rr.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=rr.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var r;return"object"==typeof e?(r=e,t=n):(r={})[e]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,t),r=to(r,"cells")),rr.Model.prototype.set.call(this,r,t)},clear:function(e){e=jt({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(r){return r.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof rr.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!br(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof rr.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=nl(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=bn(e).map(function(r){return this._prepareCell(r,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),cr(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,r=n.inbound,o=n.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=[],c={};function p(_,G){if(Zn(_.getOutboundEdges(G.id),function(oe,Te){if(!c[Te]){var Pe=_.getCell(Te);s.push(Pe),c[Te]=!0,t&&(r&&m(_,Pe),o&&p(_,Pe))}}.bind(_)),t&&G.isLink()){var ne=G.getTargetCell();ne&&ne.isLink()&&(c[ne.id]||(s.push(ne),p(_,ne)))}}function m(_,G){if(Zn(_.getInboundEdges(G.id),function(oe,Te){if(!c[Te]){var Pe=_.getCell(Te);s.push(Pe),c[Te]=!0,t&&(r&&m(_,Pe),o&&p(_,Pe))}}.bind(_)),t&&G.isLink()){var ne=G.getSourceCell();ne&&ne.isLink()&&(c[ne.id]||(s.push(ne),m(_,ne)))}}if(o&&p(this,e),r&&m(this,e),n.deep){var C=e.getEmbeddedCells({deep:!0}),M={};C.forEach(function(_){_.isElement()&&(M[_.id]=!0)}),C.forEach(function(_){_.isLink()||(o&&Zn(this.getOutboundEdges(_.id),function(G,ne){if(!c[ne]){var oe=this.getCell(ne),{source:Te,target:Pe}=oe.attributes,ze=Te.id,Be=Pe.id;if(!n.includeEnclosed&&ze&&M[ze]&&Be&&M[Be])return;s.push(this.getCell(ne)),c[ne]=!0}}.bind(this)),r&&Zn(this.getInboundEdges(_.id),function(G,ne){if(!c[ne]){var oe=this.getCell(ne),{source:Te,target:Pe}=oe.attributes,ze=Te.id,Be=Pe.id;if(!n.includeEnclosed&&ze&&M[ze]&&Be&&M[Be])return;s.push(this.getCell(ne)),c[ne]=!0}}.bind(this)))},this)}return s},getNeighbors:function(e,n){n||(n={});var t=n.inbound,r=n.outbound;void 0===t&&void 0===r&&(t=r=!0);var o=this.getConnectedLinks(e,n).reduce(function(p,m){var{source:C,target:M}=m.attributes,_=m.hasLoop(n);if(t&&ci(C,"id")&&!p[C.id]){var G=this.getCell(C.id);G.isElement()&&(_||G&&G!==e&&(!n.deep||!G.isEmbeddedIn(e)))&&(p[C.id]=G)}if(r&&ci(M,"id")&&!p[M.id]){var ne=this.getCell(M.id);ne.isElement()&&(_||ne&&ne!==e&&(!n.deep||!ne.isEmbeddedIn(e)))&&(p[M.id]=ne)}return p}.bind(this),{});if(e.isLink()){if(t){var s=e.getSourceCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}if(r){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return bn(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var r=[],o=t.get("parent");o;)r.push(o),o=this.getCell(o).get("parent");return r},this);e=e.sort(function(t,r){return t.length-r.length});var n=bn(e.shift()).find(function(t){return e.every(function(r){return r.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},jt({},n=n||{},{outbound:!0})),t},cloneCells:Cs,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],r={},o=[],s=[];return bn(e).forEach(function(c){r[c.id]||(t.push(c),r[c.id]=c,c.isLink()?s.push(c):o.push(c)),n.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(m){r[m.id]||(t.push(m),r[m.id]=m,m.isLink()?s.push(m):o.push(m))})}),s.forEach(function(c){var{source:p,target:m}=c.attributes;if(p.id&&!r[p.id]){var C=this.getCell(p.id);t.push(C),r[C.id]=C,o.push(C)}if(m.id&&!r[m.id]){var M=this.getCell(m.id);t.push(this.getCell(m.id)),r[M.id]=M,o.push(M)}},this),o.forEach(function(c){this.getConnectedLinks(c,n).forEach(function(m){var{source:C,target:M}=m.attributes;!r[m.id]&&C.id&&r[C.id]&&M.id&&r[M.id]&&(t.push(m),r[m.id]=m)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},jt({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const r={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){var c=s.shift();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const p=this.getNeighbors(c,t);for(let m=0,C=p.length;m<C;m++){const M=p[m];o[M.id]=o[c.id]+1,s.push(M)}}},dfs:function(e,n,t={}){const r={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){const c=s.pop();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const p=this.getNeighbors(c,t),m=s.length;for(let C=0,M=p.length;C<M;C++){const _=p[C];o[_.id]=o[c.id]+1,s.splice(m,0,_)}}},getSources:function(){var e=[];return Zn(this._nodes,function(n,t){(!this._in[t]||_n(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return Zn(this._nodes,function(n,t){(!this._out[t]||_n(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||_n(this._in[e.id])},isSink:function(e){return!this._out[e.id]||_n(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var r=(t=t||{}).inbound,o=t.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:p,target:m}=c.attributes;if(r&&ci(p,"id")&&p.id===n.id||o&&ci(m,"id")&&m.id===n.id)return s=!0,!1}),s},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){cr(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new bt(e),{strict:r=!1}=n,o=r?"containsRect":"intersect";return this.getElements().filter(s=>t[o](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(r):this.findModelsFromPoint(r[t]())).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return bn(e).reduce(function(r,o){const s=o.getBBox({rotate:t});return s?r?r.union(s):s:r},null)},translate:function(e,n,t){var r=this.getCells().filter(function(o){return!o.isEmbedded()});return cr(r,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,r){var o=this.getCellsBBox(t);if(o){var s=Math.max(e/o.width,0),c=Math.max(n/o.height,0);cr(t,"scale",s,c,o.origin(),r)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",jt({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",jt({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(r=>n[r]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:r}=n.attributes;if(t.id&&r.id){var o=n.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(p){var{source:m,target:C}=p.attributes;return m&&m.id===t.id&&(!m.port||m.port===t.port)&&C&&C.id===r.id&&(!C.port||C.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:r}=n.attributes;return t.id&&r.id}}});!function(e,n,t){if(br(t)){if(!ul[t])throw new Error('Unknown wrapper: "'+t+'"');t=ul[t]}if(!Rn(t))throw new Error("Wrapper must be a function.");bn(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=t(e[r])})}(la.prototype,0,ul.cells);const Xs={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var r=this.getCell(n),o=t.node(n);e.setPosition?e.setPosition(r,o):r.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,n,t){const o=this.getCell(n.name),s=t.edge(n),c=s.points||[],p=new An(c);if(e.setVertices||e.setLinkVertices)if(Rn(e.setVertices))e.setVertices(o,c);else{p.simplify({threshold:.001});const m=p.points.map(M=>M.toJSON());o.set("vertices",m.slice(1,m.length-1))}if(e.setLabels&&"x"in s&&"y"in s){const m={x:s.x,y:s.y};if(Rn(e.setLabels))e.setLabels(o,m,c);else{const C=p.closestPointLength(m),M=p.pointAtLength(C),_=C/p.length(),G=new ye(m).difference(M).toJSON();o.label(0,{position:{distance:_,offset:G}})}}},layout:function(e,n){var t;t=e instanceof la?e:(new la).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(n=nr(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Xs.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(M){return M.id}}),s={},c=n.marginX||0,p=n.marginY||0;if(n.rankDir&&(s.rankdir=n.rankDir),n.align&&(s.align=n.align),n.nodeSep&&(s.nodesep=n.nodeSep),n.edgeSep&&(s.edgesep=n.edgeSep),n.rankSep&&(s.ranksep=n.rankSep),n.ranker&&(s.ranker=n.ranker),c&&(s.marginx=c),p&&(s.marginy=p),o.setGraph(s),r.layout(o,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),Xs.fromGraphLib(o,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var m=o.nodes().filter(function(M){return o.children(M).length>0}).map(t.getCell.bind(t)).sort(function(M,_){return _.getAncestors().length-M.getAncestors().length});cr(m,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var C=o.graph();return new bt(c,p,Math.abs(C.width-2*c),Math.abs(C.height-2*p))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||Qr,r=n.importEdge||Qr,o=this instanceof la?this:new la;return e.nodes().forEach(function(s){t.call(o,s,e,o,n)}),e.edges().forEach(function(s){r.call(o,s,e,o,n)}),o},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=bs(n,"directed","compound","multigraph"),o=new t.Graph(r),s=n.setNodeLabel||Qr,c=n.setEdgeLabel||Qr,p=n.setEdgeName||Qr,m=e.get("cells"),C=0,M=m.length;C<M;C++){var _=m.at(C);if(_.isLink()){var G=_.get("source"),ne=_.get("target");if(!G.id||!ne.id)break;o.setEdge(G.id,ne.id,c(_),p(_))}else if(o.setNode(_.id,s(_)),o.isCompound()&&_.has("parent")){var oe=_.get("parent");m.has(oe)&&o.setParent(_.id,oe)}}return o}};la.prototype.toGraphLib=function(e){return Xs.toGraphLib(this,e)},la.prototype.fromGraphLib=function(e,n){return Xs.fromGraphLib.call(this,e,n)};const Td={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(r){t=!1}return this._results[e]=t,t}},yc=(Zr.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Zr.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Zr.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Zr.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Zr.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Zr.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Zr.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Zr.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Zr.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Zr.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Zr.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Zr.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=he(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=he(e);t&&(e=parseFloat(e)/100);var r=n.x,o=n.y,s=n.width,c=n.height,m=t?c*e:e,C=He.KAPPA,M=C*(s/2),_=C*(t?c*e:e),ne=r+s/2,oe=r+s,Te=o+m,Pe=Te-m,ze=o+c-m,Be=o+c;return{d:["M",r,Te,"L",r,ze,"C",r,ze+_,ne-M,Be,ne,Be,"C",ne+M,Be,oe,ze+_,oe,ze,"L",oe,Te,"C",oe,Te-_,ne+M,Pe,ne,Pe,"C",ne-M,Pe,r,Te-_,r,Te,"Z"].join(" ")}}}}});var Id=Td.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Zr.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Id]},{attributes:{text:{set:function(e,n,t,r){if(!(t instanceof HTMLElement)){var o=r.style||{},s={text:e,width:-5,height:"100%"},c=jt({textVerticalAnchor:"middle"},o);return Ut.textWrap.set.call(this,s,n,t,c),{fill:o.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const fa=Kt.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),es=(Kt.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Kt.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Ss=rr.View.extend({options:{},theme:null,themeClassNamePrefix:ti("theme-"),requireSetThemeOverride:!1,defaultTheme:Gr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=jt({},this.options,e),rr.View.call(this,e)},initialize:function(){es[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=Or(this,"children")),e){var n=this.svgElement,r=Q(e,He.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var r=t.getAttribute(e);if(r)return r;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Or(this,"el"));else{var e=Or(this,"tagName"),n=jt({},Or(this,"attributes")),t=jt({},Or(this,"style"));this.id&&(n.id=Or(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(He.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof rr.$?e:rr.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=He(this.el))},_ensureElClassName:function(){var e=Or(this,"className");if(e){var n=ti(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),es[this.cid]=null,rr.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var r=this.getEventNamespace();for(var o in n){var s=n[o];"function"!=typeof s&&(s=this[s]),s&&Rt(e).on(o+r,t,s.bind(this))}return this},undelegateElementEvents:function(e){return Rt(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=Or(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,r="__"+this.cid+"__";return void 0===n?t&&t[r]||{}:(t||(t=e.data={}),t[r]||(t[r]={}),jt(t[r],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&jt({},e[0])||{},t=e[1]&&jt({},e[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,rr.View.extend.call(this,n,t)}});if(Rt.event&&!("dbltap"in Rt.event.special)){const e=Gr.doubleTapInterval,n=30;Rt.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...r){const{handleObj:o,target:s}=t,c=Rt.data(s),p=(new Date).getTime(),m="lastTouch"in c?p-c.lastTouch:0;m<e&&m>n?(c.lastTouch=null,t.type=o.origType,o.handler.call(this,t,...r)):c.lastTouch=p}}}function Co(e){return e?Array.isArray(e)?e:[e]:[]}const Sa=Ss.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(Dn(n)){const r=e.model.isLink(),{label:o=null,port:s,selector:c}=n;r&&null!==o?t=e.findLabelNode(o,c):!r&&s?t=e.findPortNode(s,c):[t]=e.findBySelector(c)}else n&&(t=He.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:r,transformGroup:o}=this;if(!e||o)return;const{vel:s,paper:c}=n,{layer:p}=r;if(p){const m=this.transformGroup=He("g").addClass("highlight-transform").append(t);c.getLayerView(p).insertSortedNode(m.node,r.z)}else(!t.parentNode||t.nextSibling)&&s.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const r=n.getRootTranslateMatrix(),o=n.getRootRotateMatrix(),s=r.multiply(o);e.attr("transform",He.matrixToTransformString(s))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:r,id:o}=this;if(r)return;const s=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),s?(this.highlight(n,s),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:r}=this;e&&this.unhighlight(n,e),this.unmount(),r._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const r=this.uniqueId(n,t);this.add(e,n,r,t)},unhighlight:function(e,n,t){const r=this.uniqueId(n,t);this.remove(e,r)},get(e,n=null){const{cid:t}=e,{_views:r}=this,o=r[t];if(null===n){const s=[];if(!o)return s;for(let c in o){const p=o[c];p instanceof this&&s.push(p)}return s}if(!o)return null;if(n in o){const s=o[n];if(s instanceof this)return s}return null},add(e,n,t,r={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const o=Sa.get(e,t);o&&o.remove();const s=new this(r);return s.id=t,this._addRef(e,t,s),s.requestUpdate(e,n),s},_addRef(e,n,t){const{cid:r}=e,{_views:o}=this;let s=o[r];s||(s=o[r]={}),s[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:r}=this,o=r[t];if(o){n&&delete o[n];for(let s in o)return;delete r[t]}},remove(e,n=null){Co(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){Co(this.get(e,n)).forEach(r=>{(t||r.UPDATABLE)&&r.update()})},transform(e,n=null){Co(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>He.ensureId(e)+JSON.stringify(n)}),Ts={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},kn=Ss.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,r,o){e.push("type-"+o.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,o,s,e={},n={},t=0,c=Or(this,"presentationAttributes");for(var p in c)if(c.hasOwnProperty(p)){var m=c[p];for(Array.isArray(m)||(m=[m]),r=0,o=m.length;r<o;r++){var C=e[s=m[r]];C||(C=e[s]=1<<t++),n[p]|=C}}var M=Or(this,"initFlag");for(Array.isArray(M)||(M=[M]),r=0,o=M.length;r<o;r++)e[s=M[r]]||(e[s]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)t|=n[e[r]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||d(this),Ss.call(this,e)},initialize:function(){this.setFlags(),Ss.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=Q(e),r=t.selectors,o=t.groupSelectors;for(var s in o){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=o[s]}if(n){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=n}return{fragment:t.fragment,selectors:r}},can:function(e){var n=Rn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Yn(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var r=t[e];if(r)return Array.isArray(r)?r:[r]}return Gr.useCSSSelectors?Rt(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return He.transformRect(n,r.multiply(o).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return He.transformRect(n,r.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return He.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=He.createSVGMatrix(),n=this.model,t=n.angle();if(t){var r=n.getBBox(),o=r.width/2,s=r.height/2;e=e.translate(o,s).rotate(t).translate(-o,-s)}return e},_notifyHighlight:function(e,n,t={}){const{el:r}=this;let o;if([o=r]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=o!==r,void 0===t.type){let s;switch(!0){case t.embedding:s=Ts.EMBEDDING;break;case t.connecting:s=Ts.CONNECTING;break;case t.magnetAvailability:s=Ts.MAGNET_AVAILABILITY;break;case t.elementAvailability:s=Ts.ELEMENT_AVAILABILITY;break;default:s=Ts.DEFAULT}t.type=s}return this.notify(e,o,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const r=t.getAttribute("magnet"),o=t===n;if((r||o)&&"false"!==r)return t;if(o)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[r]=this.findBySelector(t);if(r)return r}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var r=He(e).index()+1;t=e.tagName+":nth-child("+r+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var r=this.paper,o=r.model,s=r.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,n,t,s,"source"),target:{x:n,y:t}}).addTo(o,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(e,...n){var t=this.model,r=t.id,o=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),c={id:r};return null!=s&&(c.magnet=s),null!=o?(c.port=o,!t.hasPort(o)&&!s&&(c.selector=this.getSelector(e))):null==s&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...n)},customizeLinkEnd:function(e,n,t,r,o,s){const{paper:c}=this,{connectionStrategy:p}=c.options;if("function"==typeof p){var m=p.call(c,e,this,n,new ye(t,r),o,s,c);if(m)return m}return e},getMagnetFromLinkEnd:function(e){var s,n=this.el,t=e.port,r=e.magnet,o=this.model;return null!=t&&o.isElement()&&o.hasPort(t)?s=this.findPortNode(t,r)||n:(r||(r=e.selector),!r&&null!=t&&(r='[port="'+t+'"]'),s=this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,n,t,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(n,t,r);o.notifyPointerdown(e,t,r),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,n,t){var r=this.eventData(e),o=r.linkView;if(o)o.pointermove(e,n,t);else{var s=this.paper,c=s.options.magnetThreshold,p=this.getEventTarget(e),m=r.targetMagnet;if("onleave"===c){if(m===p||He(m).contains(p))return}else if(s.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,m,n,t)}},dragLinkEnd:function(e,n,t){var o=this.eventData(e).linkView;!o||(o.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){_n(n)||(e instanceof SVGElement?He(e).attr(n):Rt(e).attr(n))},processNodeAttributes:function(e,n){var t,r,o,s,c,p,m,C,M,_=[];for(t in n)!n.hasOwnProperty(t)||(r=n[t],!(o=this.getAttributeDefinition(t))||Rn(o.qualify)&&!o.qualify.call(this,r,e,n)?(p||(p={}),p[x(t)]=r):(br(o.set)&&(p||(p={}),p[o.set]=r),null!==r&&_.push(t,o)));for(s=0,c=_.length;s<c;s+=2)r=n[t=_[s]],Rn((o=_[s+1]).set)&&(m||(m={}),m[t]=r),Rn(o.position)&&(C||(C={}),C[t]=r),Rn(o.offset)&&(M||(M={}),M[t]=r);return{raw:n,normal:p,set:m,position:C,offset:M}},updateRelativeAttributes:function(e,n,t,r){r||(r={});var o,s,p=n.raw||{},m=n.normal||{},C=n.set,M=n.position,_=n.offset;for(o in C){s=C[o];var G=this.getAttributeDefinition(o).set.call(this,s,t.clone(),e,p);Yn(G)?jt(m,G):void 0!==G&&(m[o]=G)}if(e instanceof HTMLElement)this.setNodeAttributes(e,m);else{var Pe,ze,Be,ne=m.transform,oe=He.transformStringToMatrix(ne),Te=ye(oe.e,oe.f);if(ne&&(m=to(m,"transform"),oe.e=oe.f=0),M||_){var L=this.getNodeScale(e,r.scalableNode);Pe=L.sx,ze=L.sy}var z=!1;for(o in M)s=M[o],(Be=this.getAttributeDefinition(o).position.call(this,s,t.clone(),e,p))&&(Te.offset(ye(Be).scale(Pe,ze)),z||(z=!0));this.setNodeAttributes(e,m);var J=!1;if(_){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var me=He.transformRect(ie,oe).scale(1/Pe,1/ze);for(o in _)s=_[o],(Be=this.getAttributeDefinition(o).offset.call(this,s,me,e,p))&&(Te.offset(ye(Be).scale(Pe,ze)),J||(J=!0))}}(void 0!==ne||z||J)&&(Te.round(1),oe.e=Te.x,oe.f=Te.y,e.setAttribute("transform",He.matrixToTransformString(oe)))}},getNodeScale:function(e,n){var t,r;if(n&&n.contains(e)){var o=n.scale();t=1/o.sx,r=1/o.sy}else t=1,r=1;return{sx:t,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=He.ensureId(e),r=n[t];return r||(r=n[t]={}),r},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=He(e).getBBox()),new bt(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=He(e).getTransformToElement(t)}return He.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=He(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,r){var o,s,c,p,m={},C=[];for(var M in e)if(e.hasOwnProperty(M)&&Dn(c=e[M])){var _=t[M]=this.findBySelector(M,n,r);for(o=0,s=_.length;o<s;o++){var G=_[o];p=He.ensureId(G);var ne=r&&r[M]===G,oe=m[p];if(oe){oe.array||(C.push(p),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var Te=oe.attributes,Pe=oe.selectedLength;if(ne)Te.unshift(c),Pe.unshift(-1);else{var ze=Bi(Pe,s);Te.splice(ze,0,c),Pe.splice(ze,0,s)}}else m[p]={attributes:c,selectedLength:ne?-1:s,node:G,array:!1}}}for(o=0,s=C.length;o<s;o++)(c=m[p=C[o]]).attributes=Hr({},...c.attributes.reverse());return m},getEventTarget:function(e,n={}){const{target:t,type:r,clientX:o=0,clientY:s=0}=e;return n.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,s):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=bt()),t.selectors||(t.selectors=this.selectors);var p,m,C,M,_,r={},o={},s=[],c=[],G=t.roAttributes,ne=this.findNodesAttributes(G||n,e,r,t.selectors),oe=G?this.findNodesAttributes(n,e,r,t.selectors):ne;for(var Te in ne)if((_=this.processNodeAttributes(m=(M=ne[Te]).node,C=M.attributes)).set||_.position||_.offset){var Be,Pe=oe[Te]&&oe[Te].attributes,ze=Pe&&void 0===C.ref?Pe.ref:C.ref;if(ze){if(!(Be=(r[ze]||this.findBySelector(ze,e,t.selectors))[0]))throw new Error('dia.CellView: "'+ze+'" reference does not exist.')}else Be=null;if(p={node:m,refNode:Be,processedAttributes:_,allAttributes:Pe},Be){var L=c.findIndex(function(xt){return xt.refNode===m});L>-1?c.splice(L,0,p):c.push(p)}else s.push(p)}else this.setNodeAttributes(m,_.normal);s.push(...c);for(var z,J=0,ie=s.length;J<ie;J++){m=(p=s[J]).node,Be=p.refNode;var me=He(t.rotatableNode),Ie=Be?He.ensureId(Be):"",Le=!!me&&!!Be&&me.contains(Be),Ye=o[Ie];if(!Ye){var dt=Le?me:e;Ye=o[Ie]=Be?He(Be).getBBox({target:dt}):t.rootBBox}G?(_=this.processNodeAttributes(m,p.allAttributes),this.mergeProcessedAttributes(_,p.processedAttributes)):_=p.processedAttributes;var ut=Ye;Le&&!me.contains(m)&&(z||(z=He.transformStringToMatrix(me.attr("transform"))),ut=He.transformRect(Ye,z)),this.updateRelativeAttributes(m,_,ut,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),jt(e.set,n.set),jt(e.position,n.position),jt(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Sa.remove(this)},updateHighlighters:function(e=!1){Sa.update(this,null,e)},transformHighlighters:function(){Sa.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,n,t),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,r){this.notify("cell:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){this.notify(n,e,t,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),r=n.findView(t);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:Ts,addPresentationAttributes:function(e){return Hr({},Or(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return Ca(n.concat(t))})}}),Ln={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},bu=kn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=kn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){kn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Ln.UPDATE],position:[Ln.TRANSLATE,Ln.TOOLS],size:[Ln.RESIZE,Ln.PORTS,Ln.TOOLS],angle:[Ln.ROTATE,Ln.TOOLS],markup:[Ln.RENDER],ports:[Ln.PORTS]},initFlag:[Ln.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=Gr;this.hasFlag(e,Ln.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Ln.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Ln.RENDER,Ln.UPDATE,Ln.RESIZE,Ln.TRANSLATE,Ln.ROTATE,Ln.PORTS,Ln.TOOLS]);else{let o=!1;this.hasFlag(e,Ln.RESIZE)&&(this.resize(n),o=!0,e=this.removeFlag(e,[Ln.RESIZE,Ln.UPDATE])),this.hasFlag(e,Ln.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,Ln.UPDATE),o=!0,t&&(e=this.removeFlag(e,Ln.PORTS))),this.hasFlag(e,Ln.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Ln.TRANSLATE),r=!0),this.hasFlag(e,Ln.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Ln.ROTATE),r=!0),this.hasFlag(e,Ln.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,Ln.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Ln.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,Ln.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=Gr;t&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new bt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===o?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=He(t[this.rotatableSelector])||null,this.scalableNode=He(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(He(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Gr.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),r=n.size(),o=this.scalableNode,s=!1;o.node.getElementsByTagName("path").length>0&&(s=!0);var c=o.getBBox({recursive:s});o.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var C=this.rotatableNode,M=C&&C.attr("transform");if(M){C.attr("transform",M+" rotate("+-t+","+r.width/2+","+r.height/2+")");var _=o.getBBox({target:this.paper.cells});n.set("position",{x:_.x,y:_.y},jt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,r=(e.paper||this.paper).model,o=e.initialZIndices={},s=n.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...s,...c].forEach(C=>o[C.id]=C.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const p=r.getElements().reduce((C,M)=>Math.max(C,M.attributes.z||0),0);c.forEach(C=>{C.attributes.z<=p&&C.set("z",p+1,{ui:!0})}),n.stopBatch("to-front");const m=n.parent();m?(r.getCell(m).unembed(n,{ui:!0}),e.initialParentId=m):e.initialParentId=null},processEmbedding:function(e={},n,t,r){const o=e.model||this.model,s=e.paper||this.paper,c=s.model,{findParentBy:p,frontParentOnly:m,validateEmbedding:C}=s.options;let M;M=Rn(p)?bn(p.call(c,this,n,t,r)):"pointer"===p?bn(c.findModelsFromPoint({x:t,y:r})):c.findModelsUnderElement(o,{searchBy:p}),M=M.filter(ne=>ne instanceof Nt&&o.id!==ne.id&&!ne.isEmbeddedIn(o)),m&&(M=M.slice(-1));let _=null;const G=e.candidateEmbedView;for(let ne=M.length-1;ne>=0;ne--){const oe=M[ne];if(G&&G.model.id==oe.id){_=G;break}{const Te=oe.findView(s);if(!Rn(C)||C.call(s,this,Te)){_=Te;break}}}_&&_!=G&&(this.clearEmbedding(e),e.candidateEmbedView=_.highlight(_.findProxyNode(null,"container"),{embedding:!0})),!_&&G&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,r=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=r.options,{initialParentId:s}=e;if(s&&"function"==typeof o&&!o.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(t,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,r=n||this.model,s=(e.paper||this.paper).model;switch(t){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:p,initialZIndices:m}=e;if(p){const{x:M,y:_}=p;r.position(M,_,{deep:!0,ui:!0})}m&&Object.keys(m).forEach(M=>{const _=s.getCell(M);_&&_.set("z",m[M],{ui:!0})});const C=s.getCell(c);C&&C.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const r=this.findAttribute("port",e);if(r){const o=this.findPortNode(r,t);if(o)return o}else{const[o]=this.findBySelector(t);if(o)return o}}return e},notifyPointerdown(e,n,t){kn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){kn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),kn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){kn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){kn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){kn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(r.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,r)},pointerup:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(r.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var o=r.targetMagnet;o&&this.magnetpointerclick(e,o,n,t),this.checkMouseleave(e)},mouseover:function(e){kn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){kn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){kn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){kn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,r){kn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,r)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,r){this.notify("element:magnet:pointerdblclick",e,n,t,r)},magnetcontextmenu:function(e,n,t,r){this.notify("element:magnet:contextmenu",e,n,t,r)},dragStart:function(e,n,t){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const o=r.model.position();r.eventData(e,{initialPosition:o,pointerOffset:o.difference(n,t),restrictedArea:this.paper.getRestrictedArea(r,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),o.options.validateMagnet(this,r,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,r,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),o.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var r=this.paper,o=r.options.gridSize,s=this.model,c=this.eventData(e),{pointerOffset:p,restrictedArea:m,embedding:C}=c,M=wt(n+p.x,o),_=wt(t+p.y,o);s.position(M,_,{restrictedArea:m,deep:!0,ui:!0}),r.options.embeddingMode&&(C||(this.prepareEmbedding(c),C=!0),this.processEmbedding(c,e,n,t)),this.eventData(e,{embedding:C})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,r){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,r)}},{Flags:Ln});jt(bu.prototype,Ys);const ts=function(e,n,t){return e},Md=function(e,n,t){var C,M,_,r=n.side||"bottom",o=tn(n.padding||40),s=t.sourceBBox,c=t.targetBBox,p=s.center(),m=c.center();switch(r){case"bottom":_=1,C="y",M="height";break;case"top":_=-1,C="y",M="height";break;case"left":_=-1,C="x",M="width";break;case"right":_=1,C="x",M="width";break;default:throw new Error("Router: invalid side")}return p[C]+=_*(s[M]/2+o[r]),m[C]+=_*(c[M]/2+o[r]),_*(p[C]-m[C])>0?m[C]=p[C]:p[C]=m[C],[p].concat(e,m)};var Ad={N:"S",S:"N",E:"W",W:"E"},wo={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Cu(e,n,t){var r=new ye(e.x,n.y);return t.containsPoint(r)&&(r=new ye(n.x,e.y)),r}function fl(e,n){return e["W"===n||"E"===n?"width":"height"]}function _i(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function wu(e){return new bt(e.x,e.y,0,0)}function Su(e){var n=tn(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function dl(e,n){return e.sourceBBox.clone().moveAndExpand(Su(n))}function hl(e,n){return e.targetBBox.clone().moveAndExpand(Su(n))}function Tu(e,n,t){var r=new ye(e.x,n.y),o=new ye(n.x,e.y),s=_i(e,r),c=_i(e,o),p=Ad[t],m=s===t||s!==p&&(c===p||c!==t)?r:o;return{points:[m],direction:_i(m,n)}}function Ta(e,n,t){var r=Cu(e,n,t);return{points:[r],direction:_i(r,n)}}function Eu(e,n,t,r){var m,o={},s=[new ye(e.x,n.y),new ye(n.x,e.y)],c=s.filter(function(_){return!t.containsPoint(_)}),p=c.filter(function(_){return _i(_,e)!==r});if(p.length>0)m=p.filter(function(_){return _i(e,_)===r}).pop(),o.points=[m=m||p[0]],o.direction=_i(m,n);else{m=rl(s,c)[0];var C=new ye(n).move(m,-fl(t,r)/2),M=Cu(C,e,t);o.points=[M,C],o.direction=_i(C,n)}return o}function Ld(e,n,t,r){var o=Ta(n,e,r),s=o.points[0];if(t.containsPoint(s)){var c=(o=Ta(e,n,t)).points[0];if(r.containsPoint(c)){var p=new ye(e).move(c,-fl(t,_i(e,c))/2),m=new ye(n).move(s,-fl(r,_i(n,s))/2),C=new St(p,m).midpoint(),M=Ta(e,C,t),_=Tu(C,n,M.direction);o.points=[M.points[0],_.points[0]],o.direction=_.direction}}return o}function Pu(e,n,t,r,o){var M,_,G,s={},c=t.union(r).inflate(1),p=c.center().distance(n)>c.center().distance(e),m=p?n:e,C=p?e:n;return o?(M=ye.fromPolar(c.width+c.height,wo[o],m),M=c.pointNearestToPoint(M).move(M,-1)):M=c.pointNearestToPoint(m).move(m,1),_=Cu(M,C,c),M.round().equals(_.round())?(_=ye.fromPolar(c.width+c.height,Vt(M.theta(m))+Math.PI/2,C),G=Cu(M,_=c.pointNearestToPoint(_).move(C,1).round(),c),s.points=p?[_,G,M]:[M,G,_]):s.points=p?[_,M]:[M,_],s.direction=_i(p?M:_,n),s}function pl(e,n,t){var r=dl(t,n),o=hl(t,n),s=function Od(e,n){return e.sourceAnchor?e.sourceAnchor:dl(e,n).center()}(t,n),c=function kd(e,n){return e.targetAnchor?e.targetAnchor:hl(e,n).center()}(t,n);r=r.union(wu(s)),o=o.union(wu(c)),(e=bn(e).map(ye)).unshift(s),e.push(c);for(var p,m=[],C=0,M=e.length-1;C<M;C++){var _=null,G=e[C],ne=e[C+1],oe=!!_i(G,ne);if(0===C)C+1===M?r.intersect(o.clone().inflate(1))?_=Pu(G,ne,r,o):oe||(_=Ld(G,ne,r,o)):r.containsPoint(ne)?_=Pu(G,ne,r,wu(ne).moveAndExpand(Su(n))):oe||(_=Ta(G,ne,r));else if(C+1===M){var Te=oe&&_i(ne,G)===p;o.containsPoint(G)||Te?_=Pu(G,ne,wu(G).moveAndExpand(Su(n)),o,p):oe||(_=Eu(G,ne,o,p))}else oe||(_=Tu(G,ne,p));_?(Array.prototype.push.apply(m,_.points),p=_.direction):p=_i(G,ne),C+1<M&&m.push(ne)}return m}var Ho={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!Rn(pl))throw new Error("Manhattan requires the orthogonal router as default fallback.");return pl(e,jt({},Ho,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function Js(e){this.map={},this.options=e,this.mapGridSize=100}function ji(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function zi(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function _c(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function gl(e,n){return e.sourceAnchor?e.sourceAnchor:zi(e,n).center()}function ns(e,n,t,r,o){var s=360/t,c=e.theta(function Ea(e,n,t,r){var o=r.step;return new ye(e.x+(n.x-e.x)/t.x*o,e.y+(n.y-e.y)/t.y*o)}(e,n,r,o)),p=Xe(c+s/2);return s*Math.floor(p/s)}function vl(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function Cc(e,n){if(!e)return n;var t=Math.abs(e),r=Math.round(t/n);return r?n+(t-r*n)/r:t}function Nr(e,n){return e.round(n)}function Es(e,n,t){return Nr(function wc(e,n){var t=n.source,r=wt(e.x-t.x,n.x)+t.x,o=wt(e.y-t.y,n.y)+t.y;return new ye(r,o)}(e.clone(),n),t)}function Ps(e){return e.clone().toString()}function io(e){return new ye(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function ml(e,n,t,r,o,s,c){for(var _,p=[],m=io(o.difference(t)),C=Ps(t),M=e[C];M;){var G=io((_=n[C]).difference(M));G.equals(m)||(p.unshift(_),m=G),M=e[C=Ps(M)]}var ne=n[C];return io(ne.difference(r)).equals(m)||p.unshift(ne),p}function Qs(e,n){for(var t=1/0,r=0,o=n.length;r<o;r++){var s=e.manhattanDistance(n[r]);s<t&&(t=s)}return t}function Pa(e,n,t,r,o){var s=o.precision,c=o.directionMap,p=e.difference(n.center()),m=Yn(c)?Object.keys(c):[],C=bn(t),M=m.reduce(function(_,G){if(C.includes(G)){for(var Be,ne=c[G],oe=new ye(e.x+ne.x*(Math.abs(p.x)+n.width),e.y+ne.y*(Math.abs(p.y)+n.height)),Pe=new St(e,oe).intersect(n)||[],ze=Pe.length,L=null,z=0;z<ze;z++){var J=Pe[z],ie=e.squaredDistance(J);(void 0===Be||ie>Be)&&(Be=ie,L=J)}if(L){var me=Es(L,r,s);n.containsPoint(me)&&(me=Es(me.offset(ne.x*r.x,ne.y*r.y),r,s)),_.push(me)}}return _},[]);return n.containsPoint(e)||M.push(Es(e,r,s)),M}function Sc(e,n,t,r){var s,c,o=r.precision;s=Nr(e instanceof bt?gl(this,r).clone():e.clone(),o),c=Nr(n instanceof bt?function bc(e,n){return e.targetAnchor?e.targetAnchor:_c(e,n).center()}(this,r).clone():n.clone(),o);var m,C,M,_,p=function Iu(e,n,t){return{source:n.clone(),x:Cc(t.x-n.x,e),y:Cc(t.y-n.y,e)}}(r.step,s,c);if(M=e instanceof bt?Pa(m=s,e,r.startDirections,p,r):[m=s],n instanceof bt?(C=c,_=Pa(c,n,r.endDirections,p,r)):_=[C=c],M=M.filter(Mn=>!t(Mn)),_=_.filter(Mn=>!t(Mn)),M.length>0&&_.length>0){for(var G=new ji,ne={},oe={},Te={},Pe=0,ze=M.length;Pe<ze;Pe++){var Be=M[Pe],L=Ps(Be);G.add(L,Qs(Be,_)),ne[L]=Be,Te[L]=0}var ie,me,z=r.previousDirectionAngle,J=void 0===z,Ie=r.directions;!function Nd(e,n,t){var r=t.step;bn(t.directions).forEach(function(o){o.gridOffsetX=o.offsetX/r*n.x,o.gridOffsetY=o.offsetY/r*n.y})}(0,p,r);for(var Le=Ie.length,Ye=bn(_).reduce(function(Mn,Wt){var Mt=Ps(Wt);return Mn.push(Mt),Mn},[]),dt=r.maximumLoops;!G.isEmpty()&&dt>0;){var zn,ut=G.pop(),xt=ne[ut],Pt=oe[ut],It=Te[ut],Gt=void 0===Pt,er=xt.equals(m);zn=Gt?J?er?null:ns(m,xt,Le,p,r):z:ns(Pt,xt,Le,p,r);var sr=M.length===_.length;if(sr)for(var $t=0;$t<M.length;$t++)if(!M[$t].equals(_[$t])){sr=!1;break}if((!Gt||!sr)&&Ye.indexOf(ut)>=0)return r.previousDirectionAngle=zn,ml(oe,ne,xt,m,C);for(Pe=0;Pe<Le;Pe++){var Jt=(ie=Ie[Pe]).angle;if(me=vl(zn,Jt),J&&er||!(me>r.maxAllowedDirectionChange)){var Qt=Es(xt.clone().offset(ie.gridOffsetX,ie.gridOffsetY),p,o),Pn=Ps(Qt);if(!G.isClose(Pn)&&!t(Qt)){if(Ye.indexOf(Pn)>=0&&!Qt.equals(C)&&vl(Jt,ns(Qt,C,Le,p,r))>r.maxAllowedDirectionChange)continue;var yn=It+ie.cost+(er?0:r.penalties[me]);(!G.isOpen(Pn)||yn<Te[Pn])&&(ne[Pn]=Qt,oe[Pn]=xt,Te[Pn]=yn,G.add(Pn,yn+Qs(Qt,_)))}}}dt--}}return r.fallbackRoute.call(this,m,C,r)}Js.prototype.build=function(e,n){var t=this.options,r=bn(t.excludeEnds).reduce(function(m,C){var M=n.get(C);if(M){var _=e.getCell(M.id);_&&m.push(_)}return m},[]),o=[],s=e.getCell(n.get("source").id);s&&(o=zs(o,s.getAncestors().map(function(m){return m.id})));var c=e.getCell(n.get("target").id);c&&(o=zs(o,c.getAncestors().map(function(m){return m.id})));var p=this.mapGridSize;return e.getElements().reduce(function(m,C){var M=bn(t.excludeTypes).includes(C.get("type")),_=r.find(function(z){return z.id===C.id}),G=o.includes(C.id);if(!(M||_||G))for(var oe=C.getBBox().moveAndExpand(t.paddingBox),Te=oe.origin().snapToGrid(p),Pe=oe.corner().snapToGrid(p),ze=Te.x;ze<=Pe.x;ze+=p)for(var Be=Te.y;Be<=Pe.y;Be+=p){var L=ze+"@"+Be;m[L]=m[L]||[],m[L].push(oe)}return m},this.map),this},Js.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return bn(this.map[n]).every(function(t){return!t.containsPoint(e)})},ji.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=Bi(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(t,0,e)},ji.prototype.remove=function(e){this.hash[e]=this.CLOSE},ji.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},ji.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},ji.prototype.isEmpty=function(){return 0===this.items.length},ji.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const xl=function(e,n,t){return function yl(e,n,t){(function bi(e){if(e.directions=Or(e,"directions"),e.penalties=Or(e,"penalties"),e.paddingBox=Or(e,"paddingBox"),e.padding=Or(e,"padding"),e.padding){var n=tn(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}bn(e.directions).forEach(function(t){var r=new ye(0,0),o=new ye(t.offsetX,t.offsetY);t.angle=Xe(r.theta(o))})})(n),t.options.perpendicular=!!n.perpendicular;var r=zi(t,n),o=_c(t,n),s=gl(t,n);let c;if("function"==typeof n.isPointObstacle)c=n.isPointObstacle;else{const L=new Js(n);L.build(t.paper.model,t.model),c=z=>!L.isPointAccessible(z)}for(var M,_,p=bn(e).map(ye),m=[],C=s,G=0,ne=p.length;G<=ne;G++){var oe=null;if(_=M||r,!(M=p[G])&&(M=o,(!t.model.get("source").id||!t.model.get("target").id)&&Rn(n.draggingRoute))){var Pe=_===r?s:_,ze=M.origin();oe=n.draggingRoute.call(t,Pe,ze,n)}if(null===(oe=oe||Sc.call(t,_,M,c,n)))return n.fallbackRouter(e,n,t);var Be=oe[0];Be&&Be.equals(C)&&oe.shift(),C=oe[oe.length-1]||C,Array.prototype.push.apply(m,oe)}return m}(e,jt({},Ho,n),t)};var Rd={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var r=e.theta(n),o=[],s={x:n.x,y:e.y},c={x:e.x,y:n.y};if(r%180>90){var p=s;s=c,c=p}var m=r%90<45?s:c,C=new St(e,m),M=90*Math.ceil(r/90),_=ye.fromPolar(C.squaredLength(),Vt(M+135),m),G=new St(n,_),ne=C.intersection(G),oe=ne||n,Pe=360/t.directions.length,ze=(ne?oe:e).theta(n),Be=Xe(ze+Pe/2),L=Pe*Math.floor(Be/Pe);return t.previousDirectionAngle=L,oe&&o.push(oe.round()),o.push(n),o}};const Dd=function(e,n,t){if(!Rn(xl))throw new Error("Metro requires the manhattan router.");return xl(e,jt({},Rd,n),t)};var Tc=["arc","gap","cubic"],Fd=["smooth"],Mu=1/3,Ia=2/3;function Cl(e,n,t){var r=[].concat(e,t,n);return r.reduce(function(o,s,c){var p=r[c+1];return null!=p&&(o[c]=si(s,p)),o},[])}function Pc(e,n){return si(e,n).squaredLength()}function Ic(e,n,t,r){var s,o=new Lt;return s=Lt.createSegment("M",e[0].start),o.appendSegment(s),bn(e).forEach(function(c,p){if(c.isJump){var m,C,M,_;if("arc"===t){m=-90,C=c.start.difference(c.end);var G=Number(C.x<0||0===C.x&&C.y<0);G&&(m+=180);var Te,ne=c.midpoint(),oe=new St(ne,c.end).rotate(ne,m);M=(Te=new St(c.start,ne)).pointAt(2/3).rotate(c.start,m),_=oe.pointAt(1/3).rotate(oe.end,-m),s=Lt.createSegment("C",M,_,oe.end),o.appendSegment(s),Te=new St(ne,c.end),M=oe.pointAt(1/3).rotate(oe.end,m),_=Te.pointAt(1/3).rotate(c.end,-m),s=Lt.createSegment("C",M,_,c.end),o.appendSegment(s)}else if("gap"===t)s=Lt.createSegment("M",c.end),o.appendSegment(s);else if("cubic"===t){m=c.start.theta(c.end);var Pe=.6*n,ze=1.35*n;C=c.start.difference(c.end),(G=Number(C.x<0||0===C.x&&C.y<0))&&(ze*=-1),M=ye(c.start.x+Pe,c.start.y+ze).rotate(c.start,m),_=ye(c.end.x-Pe,c.end.y+ze).rotate(c.end,m),s=Lt.createSegment("C",M,_,c.end),o.appendSegment(s)}}else{var Be=e[p+1];0==r||!Be||Be.isJump?(s=Lt.createSegment("L",c.end),o.appendSegment(s)):function Mc(e,n,t,r,o){var ne,s=t.distance(r)/2,c=t.distance(o)/2,p=-Math.min(e,s),m=-Math.min(e,c),C=t.clone().move(r,p).round(),M=t.clone().move(o,m).round(),_=new ye(Mu*C.x+Ia*t.x,Ia*t.y+Mu*C.y),G=new ye(Mu*M.x+Ia*t.x,Ia*t.y+Mu*M.y);ne=Lt.createSegment("L",C),n.appendSegment(ne),ne=Lt.createSegment("C",_,G,M),n.appendSegment(ne)}(r,o,c.end,c.start,Be.end)}}),o}const Sl=function(e,n,t,r){!function Vd(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var r=n.model;r.on("batch:stop",function(){this.hasActiveBatch()||function wl(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const r=n[t],o=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(o)}}(n)}),r.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var o=r.raw,s=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),p=r.radius||0,m=r.ignoreConnectors||Fd;-1===Tc.indexOf(c)&&(c=Tc[0]);var C=this.paper,_=C.model.getLinks();if(1===_.length)return Ic(Cl(e,n,t),s,c,p);var G=this.model,ne=_.indexOf(G),oe=C.options.defaultConnector||{},Te=_.filter(function(J,ie){var me=J.get("connector")||oe;return!(bn(m).includes(me.name)||ie>ne&&"jumpover"===me.name)}),Pe=Te.map(function(J){return C.findViewByModel(J)}),ze=Cl(e,n,t),Be=Pe.map(function(J){return null==J?[]:J===this?ze:Cl(J.sourcePoint,J.targetPoint,J.route)},this),L=ze.reduce(function(J,ie){var me=Te.reduce(function(Ie,Le,Ye){if(Le!==G){var dt=function Ec(e,n){return bn(n).reduce(function(t,r){var o=e.intersection(r);return o&&t.push(o),t},[])}(ie,Be[Ye]);Ie.push.apply(Ie,dt)}return Ie},[]).sort(function(Ie,Le){return Pc(ie.start,Ie)-Pc(ie.start,Le)});return me.length>0?J.push.apply(J,function Bd(e,n,t){return n.reduce(function(r,o,s){if(!0===o.skip)return r;var c=r.pop()||e,p=mi(o).move(c.start,-t),m=mi(o).move(c.start,+t),C=n[s+1];if(null!=C){var M=m.distance(C);M<=t&&(m=C.move(c.start,M),C.skip=!0)}else if(p.distance(c.end)<2*t+1)return r.push(c),r;if(m.distance(c.start)<2*t+1)return r.push(c),r;var ne=si(p,m);return ne.isJump=!0,r.push(si(c.start,p),ne,si(m,c.end)),r},[])}(ie,me,s)):J.push(ie),J},[]),z=Ic(L,s,c,p);return o?z:z.serialize()},Hd=function(e,n,t,r){var o=r&&r.raw,s=[e].concat(t).concat([n]),c=new An(s),p=new Lt(c);return o?p:p.serialize()},Tl=function(e,n,t,r){r||(r={});var p,o=r.radius||10,s=r.raw,c=new Lt;p=Lt.createSegment("M",e),c.appendSegment(p);for(var M,_,G,ne,oe,Te,Pe,ze,Be,L,z,m=1/3,C=2/3,J=0,ie=t.length;J<ie;J++)M=new ye(t[J]),_=t[J-1]||e,G=t[J+1]||n,ne=oe||M.distance(_)/2,oe=M.distance(G)/2,Te=-Math.min(o,ne),Pe=-Math.min(o,oe),ze=M.clone().move(_,Te).round(),Be=M.clone().move(G,Pe).round(),L=new ye(m*ze.x+C*M.x,C*M.y+m*ze.y),z=new ye(m*Be.x+C*M.x,C*M.y+m*Be.y),p=Lt.createSegment("L",ze),c.appendSegment(p),p=Lt.createSegment("C",L,z,Be),c.appendSegment(p);return p=Lt.createSegment("L",n),c.appendSegment(p),s?c:c.serialize()},Ac=function(e,n,t,r){var s,o=r&&r.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([n]),p=en.throughPoints(c);s=new Lt(p)}else{var m;if(s=new Lt,m=Lt.createSegment("M",e),s.appendSegment(m),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var C=(e.x+n.x)/2;m=Lt.createSegment("C",C,e.y,C,n.y,n.x,n.y),s.appendSegment(m)}else{var M=(e.y+n.y)/2;m=Lt.createSegment("C",e.x,M,n.x,M,n.x,n.y),s.appendSegment(m)}}return o?s:s.serialize()},Gi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},hi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Is=function(e,n,t=[],r={},o){const s=Boolean(r.raw),{direction:c=Gi.AUTO,precision:p=3}=r,m={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new ye(r.sourceTangent):null,targetTangent:r.targetTangent?new ye(r.targetTangent):null};m.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new ye(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new ye(r.sourceDirection).normalize():null,m.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new ye(1,0).rotate(null,r.targetDirection):r.targetDirection?new ye(r.targetDirection).normalize():null;const C=[e,...t.map(Te=>new ye(Te)),n];let M,_;if(m.sourceTangent)M=m.sourceTangent;else{const Te=function Il(e,n,t,r){if(r.sourceDirection)switch(r.sourceDirection){case hi.UP:return new ye(0,-1);case hi.DOWN:return new ye(0,1);case hi.LEFT:return new ye(-1,0);case hi.RIGHT:return new ye(1,0);case hi.AUTO:return El(e,n);case hi.CLOSEST_POINT:return Au(0,n);case hi.OUTWARDS:return Ou(e,n);default:return r.sourceDirection}switch(t){case Gi.HORIZONTAL:return function jd(e,n,t){const{sourceBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.x>n[1].x?"right":"left",o)?new ye(-1,0):new ye(1,0)}(e,n);case Gi.VERTICAL:return function kc(e,n,t){const{sourceBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.y>n[1].y?"bottom":"top",o)?new ye(0,-1):new ye(0,1)}(e,n);case Gi.CLOSEST_POINT:return Au(0,n);case Gi.OUTWARDS:return Ou(e,n);default:return El(e,n)}}(o,C,c,m),Pe=C[0].distance(C[1])*m.coeff,Be=Ml(Te,C[1].difference(C[0]).normalize());if(Be>Math.PI/4){const L=Pe+(Be-Math.PI/4)*m.angleTangentCoefficient;M=Te.clone().scale(L,L)}else M=Te.clone().scale(Pe,Pe)}if(m.targetTangent)_=m.targetTangent;else{const Te=function wn(e,n,t,r){if(r.targetDirection)switch(r.targetDirection){case hi.UP:return new ye(0,-1);case hi.DOWN:return new ye(0,1);case hi.LEFT:return new ye(-1,0);case hi.RIGHT:return new ye(0,1);case hi.AUTO:return Lc(e,n);case hi.CLOSEST_POINT:return Pl(0,n);case hi.OUTWARDS:return Nc(e,n);default:return r.targetDirection}switch(t){case Gi.HORIZONTAL:return function Oc(e,n,t){const{targetBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.x>n[n.length-2].x?"left":"right",o)?new ye(-1,0):new ye(1,0)}(e,n);case Gi.VERTICAL:return function zd(e,n,t){const{targetBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.y>n[n.length-2].y?"top":"bottom",o)?new ye(0,-1):new ye(0,1)}(e,n);case Gi.CLOSEST_POINT:return Pl(0,n);case Gi.OUTWARDS:return Nc(e,n);default:return Lc(e,n)}}(o,C,c,m),Pe=C.length-1,ze=C[Pe-1].distance(C[Pe])*m.coeff,L=Ml(Te,C[Pe-1].difference(C[Pe]).normalize());if(L>Math.PI/4){const z=ze+(L-Math.PI/4)*m.angleTangentCoefficient;_=Te.clone().scale(z,z)}else _=Te.clone().scale(ze,ze)}const ne=function Rc(e,n,t,r){const{tau:o,coeff:s}=r,c=[],p=[],m=[],C=e.length-1;for(let M=0;M<C;M++)c[M]=e[M].distance(e[M+1]);p[0]=n,p[C]=t;for(let M=1;M<C;M++){let _,G;_=1===M?e[M-1].clone().offset(p[M-1].x,p[M-1].y):e[M-1].clone(),G=M===C-1?e[M+1].clone().offset(p[M+1].x,p[M+1].y):e[M+1].clone();const ne=_.difference(e[M]).normalize(),oe=G.difference(e[M]).normalize(),Te=Ml(ne,oe);let ze,Pe=(Math.PI-Te)/2;const Be=Ms(ne,oe);let L;L=Ms(e[M].difference(e[M+1]),e[M].difference(e[M-1])),Be<0&&(Pe=-Pe),Te<Math.PI/2&&(Pe<0&&L<0||Pe>0&&L>0)&&(Pe-=Math.PI),ze=oe.clone(),Gd(ze,Pe);const z=ze.clone(),J=ze.clone(),ie=c[M-1]*s,me=c[M]*s;z.scale(ie,ie),J.scale(me,me),p[M]=[z,J]}for(let M=0;M<C;M++){let _,G;_=0===M?e[M+1].difference(p[M].x/o,p[M].y/o):e[M+1].difference(p[M][1].x/o,p[M][1].y/o),G=M===C-1?e[M].clone().offset(p[M+1].x/o,p[M+1].y/o):e[M].difference(p[M+1][0].x/o,p[M+1][0].y/o),m[M]=[_,e[M],e[M+1],G]}return m}(C,M,_,m).map(Te=>function Ud(e,n){const{tau:t}=n,r=new ye;r.x=e[1].x+(e[2].x-e[0].x)/(6*t),r.y=e[1].y+(e[2].y-e[0].y)/(6*t);const o=new ye;return o.x=e[2].x+(e[3].x-e[1].x)/(6*t),o.y=e[2].y+(e[3].y-e[1].y)/(6*t),new en(e[1],r,o,e[2])}(Te,m)),oe=new Lt(ne).round(p);return s?oe:oe.serialize()};function El(e,n,t){const{sourceBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[0]:n[1]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function Lc(e,n,t){const{targetBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[n.length-1]:n[n.length-2]),o){case"top":return new ye(0,-1);case"bottom":return new ye(0,1);case"right":return new ye(1,0);case"left":return new ye(-1,0)}}function Au(e,n,t){return n[1].difference(n[0]).normalize()}function Pl(e,n,t){const r=n.length-1;return n[r-1].difference(n[r]).normalize()}function Ou(e,n,t){const{sourceBBox:r}=e,o=r.center();return n[0].difference(o).normalize()}function Nc(e,n,t){const{targetBBox:r}=e,o=r.center();return n[n.length-1].difference(o).normalize()}function Gd(e,n){const t=Math.cos(n),r=Math.sin(n),s=r*e.x+t*e.y;e.x=t*e.x-r*e.y,e.y=s}function Ml(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function Ms(e,n){return e.x*n.y-e.y*n.x}Is.Directions=Gi,Is.TangentDirections=hi;const fn={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},pi=kn.extend({className:function(){var e=kn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){kn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[fn.RENDER],attrs:[fn.UPDATE],router:[fn.UPDATE],connector:[fn.CONNECTOR],smooth:[fn.UPDATE],manhattan:[fn.UPDATE],toolMarkup:[fn.LEGACY_TOOLS],labels:[fn.LABELS],labelMarkup:[fn.LABELS],vertices:[fn.VERTICES,fn.UPDATE],vertexMarkup:[fn.VERTICES],source:[fn.SOURCE,fn.UPDATE],target:[fn.TARGET,fn.UPDATE]},initFlag:[fn.RENDER,fn.SOURCE,fn.TARGET,fn.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,fn.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,fn.SOURCE)}if(this.hasFlag(e,fn.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,fn.TARGET)}const{paper:t,sourceView:r,targetView:o}=this;if(t&&(r&&!t.isViewMounted(r)||o&&!t.isViewMounted(o)))return e;if(this.hasFlag(e,fn.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[fn.RENDER,fn.UPDATE,fn.VERTICES,fn.LABELS,fn.TOOLS,fn.LEGACY_TOOLS,fn.CONNECTOR]);let s=!1;this.hasFlag(e,fn.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,fn.VERTICES));const{model:c}=this,{attributes:p}=c;let m=this.hasFlag(e,fn.LABELS),C=this.hasFlag(e,fn.LEGACY_TOOLS);m&&(this.onLabelsChange(c,p.labels,n),e=this.removeFlag(e,fn.LABELS),s=!0),C&&(this.renderTools(),e=this.removeFlag(e,fn.LEGACY_TOOLS));const M=this.hasFlag(e,fn.UPDATE),_=this.hasFlag(e,fn.CONNECTOR);return(M||_)&&(M?n.translateBy&&c.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[fn.UPDATE,fn.TOOLS,fn.CONNECTOR]),m=!1,C=!1,s=!0),m&&this.updateLabelPositions(),C&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,fn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,fn.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(fn.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],r=t.length;if(r>1&&n[t[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=He(e);Array.isArray(n)||(n=[n]);for(var t=this._V,r=0,o=n.length;r<o;r++){var s=n[r],c=s.attr("class");c&&(c=R(c),t[Rt.camelCase(c)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=He(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)t.appendChild(n[r].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?He("g").append(n):He(r[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},r=this._labelSelectors={},o=this.model,s=o.attributes.labels||[],c=s.length;if(0===c)return n&&n.remove(),this;n?n.empty():(n=e.labels=He("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(ti(Or(this,"className"))),n.attr("model-id",o.id)));for(var p=0;p<c;p++){var M,_,C=this._normalizeLabelMarkup(this._getLabelMarkup(s[p].markup));if(C)M=C.node,_=C.selectors;else{var ne=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),oe=o._getDefaultLabel(),Pe=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||ne;M=Pe.node,_=Pe.selectors}M.setAttribute("label-idx",p),n.append(M),t[p]=M;var ze=this.selector;if(_[ze])throw new Error("dia.LinkView: ambiguous label root selector.");_[ze]=M,r[p]=_}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:r,options:o}=this,{labels:s}=r;if(!s||!t.hasLabels())return;const{node:c}=s;o.labelsLayer?n.getLayerView(o.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){kn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const r=this._labelSelectors[e],[o=null]=this.findBySelector(n,t,r);return o},_mergeLabelAttrs:function(e,n,t,r){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:r:e?t:Hr({},r,t):e?Hr({},t,n):Hr({},r,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,s=e._getDefaultLabel(),c=s.markup,p=s.attrs,m=0,C=n.length;m<C;m++){var M=this._labelCache[m];M.setAttribute("cursor",t?"move":"default");var _=this._labelSelectors[m],G=n[m],Te=this._mergeLabelAttrs(G.markup||c,G.attrs,p,o);this.updateDOMSubtreeAttributes(M,Te,{rootBBox:new bt(G.size),selectors:_})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=Rt(this._V.linkTools.node).empty(),n=an(this.model.get("toolMarkup")||this.model.toolMarkup),t=He(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=an(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=He(n())):r=t.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=Rt(this._V.markerVertices.node).empty(),n=an(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,r){e.append(He(n(jt({idx:r},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=Rt(this._V.markerArrowheads.node);e.empty();var n=an(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=He(n({end:"source"})),this._V.targetArrowhead=He(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),o=[this.sourceAnchor,...r,this.targetAnchor],s=o.length,c=new An(o);c.simplify({threshold:.001});const p=c.points.map(C=>C.toJSON()),m=p.length;return s===m?0:(t.vertices(p.slice(1,m-1),e),s-m)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ye(this.sourceAnchor);case"target":return new ye(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ye(this.sourcePoint);case"target":return new ye(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:r}=this;if(!t||!r)return;const o=new An(t);o.translate(e,n),this.route=o.points,this._translateConnectionPoints(e,n),r.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),r=this.sourceAnchor=t.source,o=this.targetAnchor=t.target,s=this.findRoute(n);this.route=s;var c=this.findConnectionPoints(s,r,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,r=this.findMarkerPoints(e,n,t),o=this.findPath(e,r.source||n,r.target||t);this.path=o},findMarkerPoints:function(e,n,t){var c,p,r=e[0],o=e[e.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),c=ye(n).move(r||t,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),p=ye(t).move(o||n,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=c||n.clone(),s.targetPoint=p||t.clone(),{source:c,target:p}},findAnchorsOrdered:function(e,n,t,r){var o,s,c,p,m=this.model,C=m.get(e),M=m.get(t),_=this.getEndView(e),G=this.getEndView(t),ne=this.getEndMagnet(e),oe=this.getEndMagnet(t);_?(c=n?new ye(n):G?oe:new ye(M),o=this.getAnchor(C.anchor,_,ne,c,e)):o=new ye(C),G?(p=new ye(r||o),s=this.getAnchor(M.anchor,G,oe,p,t)):s=new ye(M);var Te={};return Te[e]=o,Te[t]=s,Te},findAnchors:function(e){var n=this.model,t=e[0],r=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",r,"source",t):this.findAnchorsOrdered("source",t,"target",r)},findConnectionPoints:function(e,n,t){var _,G,ne,ze,r=e[0],o=e[e.length-1],s=this.model,c=s.get("source"),p=s.get("target"),m=this.sourceView,C=this.targetView,M=this.paper.options;if(m&&!m.isNodeConnection(this.sourceMagnet)){_=this.sourceMagnet||m.el;var oe=c.connectionPoint||M.defaultConnectionPoint,Pe=new St(r||t,n);ne=this.getConnectionPoint(oe,m,_,Pe,"source")}else ne=n;if(C&&!C.isNodeConnection(this.targetMagnet)){G=this.targetMagnet||C.el;var Be=p.connectionPoint||M.defaultConnectionPoint,z=new St(o||n,t);ze=this.getConnectionPoint(Be,C,G,z,"target")}else ze=t;return{source:ne,target:ze}},getAnchor:function(e,n,t,r,o){var p,s=n.isNodeConnection(t),c=this.paper.options;if(e||(e=s?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)p=e;else{var m=e.name;if("function"!=typeof(p=c[s?"linkAnchorNamespace":"anchorNamespace"][m]))throw new Error("Unknown anchor: "+m)}var M=p.call(this,n,t,r,e.args||{},o,this);return M?M.round(this.decimalsRounding):new ye},getConnectionPoint:function(e,n,t,r,o){var s,C,c=r.end,p=this.paper.options;if("function"==typeof p.linkConnectionPoint&&(s=p.linkConnectionPoint(this,n,t===n.el?void 0:t,r.start,o)))return s;if(!e)return c;if("function"==typeof e)C=e;else{var M=e.name;if("function"!=typeof(C=p.connectionPointNamespace[M]))throw new Error("Unknown connection point: "+M)}return(s=C.call(this,r,n,t,e.args||{},o,this))?s.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var o=n._builtins.defaultLabel.position,s=n._getDefaultLabel(),c=this._normalizeLabelPosition(s.position),p=Hr({},o,c),m=0,C=t.length;m<C;m++){var M=this._labelCache[m];if(M){var G=this._normalizeLabelPosition(t[m].position),ne=Hr({},p,G),oe=this._getLabelTransformationMatrix(ne);M.setAttribute("transform",He.matrixToTransformString(oe)),this._cleanLabelMatrices(m)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,r=t[e];if(r)for(let o in r){const{id:s}=r[o];s&&s in n&&delete n[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var r=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(r=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===Rt.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,r=`${e}View`,o=n.get(e),s=o&&o.id;if(!s)return this[r]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(s);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const p=c.findView(t);return!!p&&(this[r]=p,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let r=t.getMagnetFromLinkEnd(this.model.get(e));r===t.el&&(r=null),this[n]=r}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=bn(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:Hr({},n,e)},addLabel:function(e,n,t,r){var o,s,p,c=0;"number"!=typeof e?(o=e.x,s=e.y,"number"==typeof n?(c=n,p=t):p=n):(o=e,s=n,"number"==typeof t?(c=t,p=r):p=t);var m=this._getDefaultLabelPositionArgs(),M=this._mergeLabelPositionArgs(p,m),_={position:this.getLabelPosition(o,s,c,M)};return this.model.insertLabel(-1,_,p),-1},addVertex:function(e,n,t){var r="number"!=typeof e,o=r?e.x:e,s=r?e.y:n,c=r?n:t,p={x:o,y:s},m=this.getVertexIndex(o,s);return this.model.insertVertex(m,p,c),m},sendToken:function(e,n,t){var o,s,c;Yn(n)?(o=n.duration,s="reverse"===n.direction,c=n.connection):(o=n,s=!1,c=null);var p={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(p.keyPoints="1;0",p.keyTimes="0;1");var C,m=He(e);if("string"==typeof c)C=this.findBySelector(c,this.el,this.selectors)[0];else{var M=this._V;C=M.connection?M.connection.node:this.el.querySelector("path")}if(!(C instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");m.appendTo(this.paper.cells).animateAlongPath(p,C),setTimeout(function r(_,G){return function(){_.remove(),"function"==typeof G&&G()}}(m,t),o)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||y,t=this.model.router(),r=this.paper.options.defaultRouter;if(!t){if(!r)return e.map(ye);t=r}var o=Rn(t)?t:n[t.name];if(!Rn(o))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return o.call(this,e,t.args||{},this)||e.map(ye)},findPath:function(e,n,t){var r=this.paper.options.connectorNamespace||I,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=Rn(o)?o:r[o.name];if(!Rn(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var p=Kr(o.args||{});p.raw=!0;var m=c.call(this,n,t,e,p,this);return"string"==typeof m&&(m=new Lt(He.normalizePathData(m))),m},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(he(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,r){var c,o={},s=0;"number"==typeof t?(s=t,c=r):c=t,c&&(o.args=c);var Te,Pe,p=!(c&&c.absoluteDistance),m=c&&c.absoluteDistance&&c.reverseDistance,C=c&&c.absoluteOffset,M=this.path,_={segmentSubdivisions:this.getConnectionSubdivisions()},G=new ye(e,n),ne=M.closestPointT(G,_),oe=M.lengthAtT(ne,_);if(p&&(oe=oe/this.getConnectionLength()||0),m&&(oe=-1*(this.getConnectionLength()-oe)||1),o.distance=oe,C||(Te=M.tangentAtT(ne)),Te)Pe=Te.pointOffset(G);else{var ze=M.pointAtT(ne),Be=G.difference(ze);Pe={x:Be.x,y:Be.y}}return o.offset=Pe,o.angle=s,o},_getLabelTransformationMatrix:function(e){var n,t=0,r={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},n=e.distance,t=e.angle||0}var o=n>0&&n<=1,s=0,c={x:0,y:0};if(e.offset){var p=e.offset;"number"==typeof p&&(s=p),p.x&&(c.x=p.x),p.y&&(c.y=p.y)}var Te,m=0!==c.x||0!==c.y||0===s,C=r.keepGradient,M=r.ensureLegibility,_=this.path,G={segmentSubdivisions:this.getConnectionSubdivisions()},ne=o?n*this.getConnectionLength():n,oe=_.tangentAtLength(ne,G),Pe=t;if(oe){if(m)(Te=oe.start).offset(c);else{var ze=oe.clone();ze.rotate(oe.start,-90),ze.setLength(s),Te=ze.end}C&&(Pe=oe.angle()+t,M&&(Pe=Xe((Pe+90)%180-90)))}else Te=_.start,m&&Te.offset(c);return He.createSVGMatrix().translate(Te.x,Te.y).rotate(Pe)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new ye(n.e,n.f)},getVertexIndex:function(e,n){for(var r=this.model.vertices(),o=this.getClosestPointLength(new ye(e,n)),s=0,c=r.length;s<c&&!(o<this.getClosestPointLength(r[s]));s++);return s},notifyPointerdown(e,n,t){kn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){kn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),kn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){kn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){kn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){kn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}r&&jt(r,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){kn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){kn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){kn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){kn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,r){kn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){var o=He(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,r)}this.notifyPointerdown(e,t,r),this.paper.delegateDragEvents(this,e.data)}else kn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var r=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),s=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),p=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(c,p);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:s,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),s=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var r=this.eventData(e),o={position:this.getLabelPosition(n,t,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(r.labelIdx,o)},dragVertex:function(e,n,t){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var r=this.eventData(e);this.model.translate(n-r.dx,t-r.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var r=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,n,t),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,r=e.initialEnd,o=this.model.prop(t);if(o&&!Kt.endsEqual(r,o)){var c=this.paper;r.id&&this.notify("link:disconnect",n,c.findViewByModel(r.id),e.initialMagnet,t),o.id&&this.notify("link:connect",n,c.findViewByModel(o.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:r}=this,{snapLinks:o,connectionStrategy:s}=r.options,c=this.eventData(e);var p=o.radius||50,m=r.findViewsInArea({x:n-p,y:t-p,width:2*p,height:2*p}),C=c.closestView||null,M=c.closestMagnet||null,_=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var G=Number.MAX_VALUE,ne=new ye(n,t);m.forEach(function(z){const J=[];"false"!==z.el.getAttribute("magnet")&&J.push({bbox:z.model.getBBox(),magnet:z.el}),z.$("[magnet]").toArray().forEach(ie=>{J.push({bbox:z.getNodeBBox(ie),magnet:ie})}),J.forEach(ie=>{const{magnet:me,bbox:Ie}=ie,Le=Ie.center().squaredDistance(ne);Le<G&&(M===me||r.options.validateConnection.apply(r,c.validateConnectionArgs(z,z.el===me?null:me)))&&(G=Le,c.closestView=z,c.closestMagnet=me)})},this);var oe,Te=null,Pe=c.closestView,ze=c.closestMagnet;ze&&(Te=c.magnetProxy=Pe.findProxyNode(ze,"highlighter"));var Be=c.arrowhead,L=M!==ze;if(C&&L&&C.unhighlight(_,{connecting:!0,snapping:!0}),Pe){const{prevEnd:z,prevX:J,prevY:ie}=c;if(c.prevX=n,c.prevY=t,!L&&("function"!=typeof s||J===n&&ie===t)||(oe=Pe.getLinkEnd(ze,n,t,this.model,Be),!L&&Hi(z,oe)))return;c.prevEnd=oe,L&&Pe.highlight(Te,{connecting:!0,snapping:!0})}else oe={x:n,y:t};this.model.set(Be,oe||{x:n,y:t},{ui:!0}),C&&this.notify("link:snap:disconnect",e,C,M,Be),Pe&&this.notify("link:snap:connect",e,Pe,ze,Be)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,r){const{paper:o,model:s}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=o.findView(e);if(c){const p=r.magnetUnderPointer=c.findMagnet(e),m=r.magnetProxy=c.findProxyNode(p,"highlighter");p&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(c,p))?m&&c.highlight(m,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,s.set(r.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:s,magnetProxy:c,arrowhead:p}=e;if(!s||!c||!o)return;o.unhighlight(c,{connecting:!0});const m=o.getLinkEnd(s,n,t,r,p);r.set(p,m,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,r=0,o=0;"source"===e?(r=2,t="target"):(o=2,t="source");var s=this.model.get(t);if(s.id){var c=n[r]=this.paper.findViewByModel(s.id),p=c.getMagnetFromLinkEnd(s);p===c.el&&(p=void 0),n[r+1]=p}return function m(C,M){return n[o]=C,n[o+1]=C.el===M?void 0:M,n}},_markAvailableMagnets:function(e){function n(_,G){var ne=_.paper;return ne.options.validateConnection.apply(ne,this.validateConnectionArgs(_,G))}var t=this.paper,r=t.model.getCells();e.marked={};for(var o=0,s=r.length;o<s;o++){var c=r[o].findView(t);if(c){var p=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&p.push(c.el);var m=p.filter(n.bind(e,c));if(m.length>0){for(var C=0,M=m.length;C<M;C++)c.highlight(m[C],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=m}}}},_unmarkAvailableMagnets:function(e){for(var t,r,n=Object.keys(e.marked),o=0,s=n.length;o<s;o++){r=e.marked[t=n[o]];var c=this.paper.findViewByModel(t);if(c){for(var p=0,m=r.length;p<m;p++)c.unhighlight(r[p],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Kr(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){kn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:fn});Object.defineProperty(pi.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new bt(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new bt(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(pi.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new bt(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new bt(this.targetAnchor):e.getNodeBBox(t||e.el)}});const So={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},ku=Ss.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return ti(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let s in t)s=+s,s<e&&s>o&&(o=s);return n.insertBefore(r,o!==-1/0?t[o].nextSibling:n.firstChild),r},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),Al=Sa.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:r}=t;let o;try{const s=He(n);if(o=s.convertToPathData().trim(),"PATH"===s.tagName()&&r){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(s){const c=e.getNodeBoundingRect(n);o=He.rectToPath(jt({},t,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:r}=this,{padding:o,layer:s}=r;let c=e.getNodeMatrix(n);if(o){!s&&n===e.el&&t.remove();let p=e.getNodeBoundingRect(n);const m=p.x+p.width/2,C=p.y+p.height/2;p=He.transformRect(p,c);const M=Math.max(p.width,1),_=Math.max(p.height,1),G=(M+o)/M,ne=(_+o)/_,oe=He.createSVGMatrix({a:G,b:0,c:0,d:ne,e:m-G*m,f:C-ne*C});c=c.multiply(oe)}t.attr({d:this.getPathData(e,n),transform:He.matrixToTransformString(c)})},highlight(e,n){const{vel:t,options:r}=this;t.attr(r.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),Ol=20,Ui=Sa.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Ol,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,s=n.tagName();if(!He.isSVGGraphicsElement(n)||o.includes(s))return n.remove(),!1;if(r.includes(s)){const c=e.vel.findOne(`#${n.id}`);if(c){const{node:p}=c;let m=e.getNodeBoundingRect(p);e.model.isElement()&&(m=He.transformRect(m,e.getNodeMatrix(p)));const C=He("rect",m.toJSON()),{x:M,y:_}=m.center(),{angle:G,cx:ne=M,cy:oe=_}=c.rotate();G&&C.rotate(G,ne,oe),n.parent().append(C)}return n.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===n.attr("fill")||n.removeAttr(c)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(r=>{n.removeAttr(r)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:r}=this,{deep:o}=t,s=n.tagName();let c;if("G"===s){if(!o)return null;c=n.clone(),function Dc(e,n){const t=e.children();for(;t.length>0;){const r=t.shift();n(r)&&t.push(...r.children())}}(c,p=>this.transformMaskChild(e,p))}else{if(r.includes(s))return null;c=n.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:r,options:o}=this,{padding:s,attrs:c}=o,p="stroke-width"in c?c["stroke-width"]:1,m="none"!==n.attr("fill");let C=parseFloat(n.attr("stroke-width"));isNaN(C)&&(C=1);const M=C+2*s,_=M+2*p;let G=this.getMaskShape(e,n);if(!G){const ne=e.getNodeBoundingRect(n.node);ne.inflate(ne.width?0:.5,ne.height?0:.5),G=He("rect",ne.toJSON())}return G.attr(c),He("mask",{id:this.getMaskId()}).append([G.clone().attr({fill:m?t:"none",stroke:t,"stroke-width":_}),G.clone().attr({fill:m?r:"none",stroke:r,"stroke-width":M})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:r}=this,{padding:o,attrs:s,maskClip:c=Ol,layer:p}=t,m="stroke"in s?s.stroke:"#000000";!p&&n===e.el&&r.remove();const C=e.getNodeBoundingRect(n).inflate(o+c),M=this.getMask(e,He(n));this.addMask(e.paper,M),r.attr(C.toJSON()),r.attr({transform:He.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${M.id})`,fill:m})},unhighlight(e){this.removeMask(e.paper)}}),Ma=Sa.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:ti("highlight-opacity"),highlight:function(e,n){He(n).addClass(this.opacityClassName)},unhighlight:function(e,n){He(n).removeClass(this.opacityClassName)}}),Lu=ti("highlighted"),Fc=Sa.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Lu},highlight:function(e,n){He(n).addClass(this.options.className)},unhighlight:function(e,n){He(n).removeClass(this.options.className)}},{className:Lu});function Nu(e,n,t,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function Vc(e,n,t,r){return e.getPointAtLength("length"in r?r.length:20)}function rs(e){return function(n,t,r,o){if(r instanceof Element){var c,s=this.paper.findView(r);if(s)if(s.isNodeConnection(r)){var p="fixedAt"in o?o.fixedAt:"50%";c=Ru(s,p)}else c=s.getNodeBBox(r).center();else c=new ye;return e.call(this,n,t,c,o)}return e.apply(this,arguments)}}function Ru(e,n){var t=parseFloat(n);return he(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const Aa=rs(function kl(e,n,t,r){var o=1e6,s=e.getConnection(),c=e.getConnectionSubdivisions(),p=new St(t.clone().offset(0,o),t.clone().offset(0,-o)),m=new St(t.clone().offset(o,0),t.clone().offset(-o,0)),C=p.intersect(s,{segmentSubdivisions:c}),M=m.intersect(s,{segmentSubdivisions:c}),_=[];return C&&Array.prototype.push.apply(_,C),M&&Array.prototype.push.apply(_,M),_.length>0?t.chooseClosest(_):"fallbackAt"in r?Ru(e,r.fallbackAt):Hc(e,n,t,r)}),Hc=rs(function Bc(e,n,t,r){return e.getClosestPoint(t)||new ye});function To(e,n,t){if(Dn(t)){const{x:o,y:s}=t;if(isFinite(s)){const c=new St(n,e),{start:p,end:m}=c.parallel(s);n=p,e=m}t=o}if(!isFinite(t))return e;var r=e.distance(n);return 0===t&&r>0?e:e.move(n,-Math.min(t,r-1))}function Du(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function zc(e,n,t,r){var o=n.getNodeBBox(t);r.stroke&&o.inflate(Du(t)/2);var s=e.intersect(o);return To(s?e.start.chooseClosest(s):e.end,e.start,r.offset)}var Fu="segmentSubdivisons",Vu="shapeBBox";const Gc=function Ll(e,n,t,r){let{offset:o,alignOffset:s,align:c}=r;return c&&function jc(e,n,t=0){let r,o,s,c;const{start:p,end:m}=e;switch(n){case"left":r="x",o=m,s=p,c=-1;break;case"right":r="x",o=p,s=m,c=1;break;case"top":r="y",o=m,s=p,c=-1;break;case"bottom":r="y",o=p,s=m,c=1;break;default:return}p[r]<m[r]?o[r]=s[r]:s[r]=o[r],isFinite(t)&&(o[r]+=c*t,s[r]+=c*t)}(e,c,s),To(e.end,e.start,o)},Uc=zc,Pi=function $d(e,n,t,r){var o=n.model.angle();if(0===o)return zc(e,n,t,r);var s=n.getNodeUnrotatedBBox(t);r.stroke&&s.inflate(Du(t)/2);var c=s.center(),p=e.clone().rotate(c,o),m=p.setLength(1e6).intersect(s);return To(m?p.start.chooseClosest(m).rotate(c,-o):e.end,e.start,r.offset)},jo=function Yd(e,n,t,r){var o,s,c=r.selector,p=e.end;if(o="string"==typeof c?n.findBySelector(c)[0]:Array.isArray(c)?ge(t,c):function Wd(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!He.isSVGGraphicsElement(o)){if(o===t||!He.isSVGGraphicsElement(t))return p;o=t}var Be,m=n.getNodeShape(o),C=n.getNodeMatrix(o),M=n.getRootTranslateMatrix(),_=n.getRootRotateMatrix(),G=M.multiply(_).multiply(C),ne=G.inverse(),oe=He.transformLine(e,ne),Te=oe.start.clone(),Pe=n.getNodeData(o);if(!1===r.insideout&&(Pe[Vu]||(Pe[Vu]=m.bbox()),Pe[Vu].containsPoint(Te)))return p;if(m instanceof Lt){var L=r.precision||2;Pe[Fu]||(Pe[Fu]=m.getSegmentSubdivisions({precision:L})),Be={precision:L,segmentSubdivisions:Pe[Fu]}}!0===r.extrapolate&&oe.setLength(1e6),(s=oe.intersect(m,Be))?He.isArray(s)&&(s=Te.chooseClosest(s)):!0===r.sticky&&(s=m instanceof bt?m.pointNearestToPoint(Te):m instanceof Ar?m.intersectionWithLineFromCenterToPoint(Te):m.closestPoint(Te,Be));var z=s?He.transformPoint(s,G):p,J=r.offset||0;return r.stroke&&(J+=Du(o)/2),To(z,e.start,J)};function da(e){return function(n,t,r,o){var s=!!o.rotate,c=s?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),p=c[e](),m=o.dx;if(m){var C=he(m);m=parseFloat(m),isFinite(m)&&(C&&(m/=100,m*=c.width),p.x+=m)}var M=o.dy;if(M){var _=he(M);M=parseFloat(M),isFinite(M)&&(_&&(M/=100,M*=c.height),p.y+=M)}return s?p.rotate(n.model.getBBox().center(),-n.model.angle()):p}}const $c=da("center"),Wc=da("topMiddle"),Kd=da("bottomMiddle"),Yc=da("leftMiddle"),Os=da("rightMiddle"),qs=da("origin"),Jd=da("topRight"),Xc=da("bottomLeft"),Kc=da("corner"),Hu=rs(function Xd(e,n,t,r){var o=e.model.angle(),s=e.getNodeBBox(n),c=s.center(),p=s.origin(),m=s.corner(),C=r.padding;if(isFinite(C)||(C=0),p.y+C<=t.y&&t.y<=m.y-C){var M=t.y-c.y;c.x+=0===o||180===o?0:1*M/Math.tan(Vt(o)),c.y+=M}else if(p.x+C<=t.x&&t.x<=m.x-C){var _=t.x-c.x;c.y+=90===o||270===o?0:_*Math.tan(Vt(o)),c.x+=_}return c}),Jc=rs(function Bu(e,n,t,r){var s,c,p,o=!!r.rotate;o?(s=e.getNodeUnrotatedBBox(n),p=e.model.getBBox().center(),c=e.model.angle()):s=e.getNodeBBox(n);var M,m=r.padding;switch(isFinite(m)&&s.inflate(m),o&&t.rotate(p,c),s.sideNearestToPoint(t)){case"left":M=s.leftMiddle();break;case"right":M=s.rightMiddle();break;case"top":M=s.topMiddle();break;case"bottom":M=s.bottomMiddle()}return o?M.rotate(p,-c):M}),ju=function As(e,n,t,r,o){return e.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)},Oa={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},tu=9007199254740991,ks=kn.Highlighting,Nl={[ks.DEFAULT]:{name:"stroke",options:{padding:3}},[ks.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[ks.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Rl=[{name:So.BACK},{name:So.CELLS},{name:So.LABELS},{name:So.FRONT},{name:So.TOOLS}],Zd=Ss.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:bu,linkView:pi,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:Nl,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Kt,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,r,o,s){return("target"===o?t:e)instanceof bu},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Oa.EXACT,frozen:!1,onViewUpdate:function(e,n,t,r,o){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(e,t,r)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:O,anchorNamespace:B,linkAnchorNamespace:A,connectionPointNamespace:D},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&ci(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new la;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=Rt(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var r=t.position;this.isAsync()||!Xt(r)?this.renderView(e,t):(t.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,t),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===Oa.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(n)&&!t.hasActiveBatch(r)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(n)&&!t.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:s,origin:c,highlighting:p,cellViewNamespace:m,interactive:C}=e;!m&&"undefined"!=typeof joint&&ci(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Rn(n)||(e.defaultConnector=Jr(n)),Rn(t)||(e.defaultRouter=Jr(t)),Rn(r)||(e.defaultConnectionPoint=Jr(r)),Rn(o)||(e.defaultAnchor=Jr(o)),Rn(s)||(e.defaultLinkAnchor=Jr(s)),Dn(C)&&(e.interactive=jt({},C)),Dn(p)&&(e.highlighting=Vi({},p,Nl)),e.origin=jt({},c)},children:function(){var e=He.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:ti("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:ti("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:ti("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:r,layers:o,background:s,grid:c}=e;return this.svg=t,this.defs=r,this.layers=o,this.$background=Rt(s),this.$grid=Rt(c),this.renderLayers(),He.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Rl){this.removeLayers(),e.forEach(({name:o})=>{const c=new ku({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const n=this.getLayerView(So.CELLS),t=this.getLayerView(So.TOOLS),r=this.getLayerView(So.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(ti("viewport")),r.vel.addClass(ti("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),He.createSVGMatrix(e)}e=He.createSVGMatrix(e);var r=He.matrixToTransformString(e);return n.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return He.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof kn)for(var r=e.model,o=this.model.getConnectedLinks(r),s=0,c=o.length;s<c;s++){var p=o[s],m=this.findViewByModel(p);if(m){var C=["UPDATE"];p.getTargetCell()===r&&C.push("TARGET"),p.getSourceCell()===r&&C.push("SOURCE");var M=Math.max(n+1,m.UPDATE_PRIORITY);this.scheduleViewUpdate(m,m.getFlag(C),M,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof kn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var r=0,o=this.findViewByModel(t.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o),e.updateEndMagnet("source"));var s=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(s=this.dumpView(c),e.updateEndMagnet("target")),0===r&&0===s)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,r){r||(r={}),this.scheduleViewUpdate(e,n,t,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var s=this.updateViews(r);o&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(e,n,t,r){const{_updates:o,options:s}=this,{FLAG_REMOVE:c,FLAG_INSERT:p,UPDATE_PRIORITY:m,cid:C}=e;let M=o.priorities[t];if(M||(M=o.priorities[t]={}),t>m)for(let ne=t-1;ne>=m;ne--){const oe=o.priorities[ne];!oe||!(C in oe)||(M[C]|=oe[C],delete oe[C])}let _=M[C]||0;if((_&n)===n)return;_||o.count++,n&c&&_&p?M[C]^=p:n&p&&_&c&&(M[C]^=c),M[C]|=n;const G=s.onViewUpdate;"function"==typeof G&&G.call(this,e,n,t,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|r[t];return delete r[t],o},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,model:s}=e;if(e instanceof kn){if(n&r)return this.removeView(s),0;n&o&&(this.insertView(e),n^=o)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var r=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],r},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var r=t.unmounted[n]||0;return delete t.unmounted[n],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=nr({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,r=0,o=tu;do{r++,n=this.updateViewsBatch(e),t+=n.updated,o=Math.min(n.priority,o)}while(!n.empty);const s={updated:t,batches:r,priority:o};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let r in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:tu});var t=this._updates,r=t.id;if(r){H(r),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),s=nr({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(s),p=c.unmounted,m=c.mounted,C=n.processed,M=t.count;o.updated>0&&(o.processed=C+=o.updated+o.unmounted,n.priority=Math.min(o.priority,n.priority),o.empty&&0===m?(o.unmounted+=p,o.mounted+=m,o.priority=n.priority,this.notifyAfterRender(o,e),n.processed=0,n.priority=tu,t.count=0):n.processed=C);var _=e.progress;if(M&&"function"==typeof _&&_.call(this,o.empty,C,M,o,this),t.id!==r)return}t.id=F(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,r=0,o=0,s=0,c=0,p=tu,m=!0,C=this.options,M=t.priorities,_="viewport"in e?e.viewport:C.viewport;"function"!=typeof _&&(_=null);var G=C.onViewPostponed;"function"!=typeof G&&(G=null);var ne=Object.keys(M);e:for(var oe=0,Te=ne.length;oe<Te;oe++){var Pe=+ne[oe],ze=M[Pe];for(var Be in ze){if(r>=n){m=!1;break e}var L=es[Be];if(L){var z=ze[Be];if(0==(z&L.FLAG_REMOVE)){var J=Be in t.unmounted;if(L.DETACHABLE&&_&&!_.call(this,L,!J,this)){J||(this.registerUnmountedView(L),L.unmount()),t.unmounted[Be]|=z,delete ze[Be],s++;continue}J&&(z|=L.FLAG_INSERT,c++),z|=this.registerMountedView(L)}var ie=this.updateView(L,z,e);ie>0&&(ze[Be]=ie,!G||!G.call(this,L,ie,this)||ze[Be])?(o++,m=!1):(p>Pe&&(p=Pe),r++,delete ze[Be])}else delete ze[Be]}}return{priority:p,updated:r,postponed:o,unmounted:s,mounted:c,empty:m}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=es[n[o]];return r},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=es[n[o]];return r},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var o=this._updates,s=o.unmountedCids,c=o.unmounted,p=0,m=(Math.min(s.length,"mountBatchSize"in n?n.mountBatchSize:1/0));p<m;p++){var C=s[p];if(C in c){var M=es[C];if(M){if(M.DETACHABLE&&e&&!e.call(this,M,!1,this)){s.push(C);continue}t++;var _=this.registerMountedView(M);_&&this.scheduleViewUpdate(M,_,M.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,p),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var o=this._updates,s=o.mountedCids,c=o.mounted,p=0,m=(Math.min(s.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));p<m;p++){var C=s[p];if(C in c){var M=es[C];if(M){if(!M.DETACHABLE||e.call(this,M,!0,this)){s.push(C);continue}t++,this.registerUnmountedView(M)&&M.unmount()}}}return s.splice(0,p),t},checkViewport:function(e){var n=nr({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,r=this.checkMountedViews(t,n);return r>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:r}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,r=this.options.frozen,o=n.freezeKey;if(t&&t!==o){if(r&&o)return;n.freezeKey=t,n.keyFrozen=r}this.options.frozen=!0;var s=n.id;n.id=null,this.isAsync()&&s&&H(s)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,r=n.freezeKey;t&&r&&t!==r||(n.freezeKey=null,(!t||t!==r||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Oa.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return Xt(n)||(n=this.el.clientWidth),Xt(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:r,height:o}=t;let s=void 0===e?r:e,c=void 0===n?o:n;if(r===s&&o===c)return;t.width=s,t.height=c,this._setDimensions();const p=this.getComputedSize();this.trigger("resize",p.width,p.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;Xt(n)&&(n=Math.round(n)),Xt(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,r){r=Yn(e)?e:jt({gridWidth:e,gridHeight:n,padding:t},r);const{x:o,y:s,width:c,height:p}=this.getFitToContentArea(r),{sx:m,sy:C}=this.scale();return this.setOrigin(-o*m,-s*C),this.setDimensions(c*m,p*C),new bt(o,s,c,p)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,r=tn(e.padding||0),o=Math.max(e.minWidth||0,n),s=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,p=e.maxHeight||Number.MAX_VALUE,m=e.allowNewOrigin,C="contentArea"in e?new bt(e.contentArea):this.getContentArea(e),{sx:M,sy:_}=this.scale();C.x*=M,C.y*=_,C.width*=M,C.height*=_;let G=Math.ceil((C.width+C.x)/n),ne=Math.ceil((C.height+C.y)/t);e.allowNegativeBottomRight||(G=Math.max(G,1),ne=Math.max(ne,1)),G*=n,ne*=t;let oe=0;("negative"===m&&C.x<0||"positive"===m&&C.x>=0||"any"===m)&&(oe=Math.ceil(-C.x/n)*n,oe+=r.left,G+=oe);let Te=0;return("negative"===m&&C.y<0||"positive"===m&&C.y>=0||"any"===m)&&(Te=Math.ceil(-C.y/t)*t,Te+=r.top,ne+=Te),G+=r.right,ne+=r.bottom,G=Math.max(G,o),ne=Math.max(ne,s),G=Math.min(G,c),ne=Math.min(ne,p),new bt(-oe/M,-Te/_,G/M,ne/_)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var r=e.contentArea;n=this.localToPaperRect(r),t=new ye(r)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){nr(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var C,o=tn(e.padding),s=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,p=e.minScaleY||e.minScale,m=e.maxScaleY||e.maxScale;if(e.fittingBBox)C=e.fittingBBox;else{var M=this.translate(),_=this.getComputedSize();C={x:M.tx,y:M.ty,width:_.width,height:_.height}}C=new bt(C).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var G=this.scale(),ne=C.width/n.width*G.sx,oe=C.height/n.height*G.sy;if(e.preserveAspectRatio&&(ne=oe=Math.min(ne,oe)),e.scaleGrid){var Te=e.scaleGrid;ne=Te*Math.floor(ne/Te),oe=Te*Math.floor(oe/Te)}ne=Math.min(c,Math.max(s,ne)),oe=Math.min(m,Math.max(p,oe));var Pe=this.options.origin,ze=C.x-t.x*ne-Pe.x,Be=C.y-t.y*oe-Pe.y;this.scale(ne,oe),this.translate(ze,Be)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new bt:He(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=Rn(n)?n.apply(this,e):!0===n?this.getArea():n?new bt(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,r,o=n.cellViewNamespace,s=e.get("type")+"View",c=ge(o,s,".");return e.isLink()?(t=n.linkView,r=pi):(t=n.elementView,r=bu),new(t.prototype instanceof rr.View?c||t:t.call(this,e)||c||r)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?So.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:r}=this,o=t[n];if(o){var{cid:s}=o;const{mounted:c,unmounted:p}=r;o.remove(),delete t[n],delete c[s],delete p[s]}return o},renderView:function(e,n){const{id:t}=e,r=this._views;let o,s,c=!0;return t in r&&(o=r[t],o.model===e?(s=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=r[t]=this.createViewForModel(e),o.paper=this,s=this.registerUnmountedView(o)|o.getFlag(Or(o,"initFlag"))),this.requestViewUpdate(o,s,o.UPDATE_PRIORITY,n),o},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,r=e.length;t<r;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){cr(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=Rt(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=Rt(e),r=t.map(function(){var s=this.parentNode,c=s.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,c),s.removeChild(c)}});Array.prototype.sort.call(t,n).each(function(o){r[o].call(this)})}(e,function(t,r){var o=n.get(t.getAttribute("model-id")),s=n.get(r.getAttribute("model-id")),c=o.attributes.z||0,p=s.attributes.z||0;return c===p?0:c<p?-1:1})},insertView:function(e){const n=this.getLayerView(So.CELLS),{el:t,model:r}=e;this.options.sorting===Oa.APPROX?n.insertSortedNode(t,r.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,r){if(void 0===e)return He.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,r=0);var o=this.translate();(t||r||o.tx||o.ty)&&this.translate(o.tx-t*(e-1),o.ty-r*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var p=this.matrix();return p.a=e,p.d=n,this.matrix(p),this.trigger("scale",e,n,t,r),this},rotate:function(e,n,t){if(void 0===e)return He.matrixToRotate(this.matrix());if(void 0===n){var r=this.cells.getBBox();n=r.width/2,t=r.height/2}var o=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(o),this},translate:function(e,n){if(void 0===e)return He.matrixToTranslate(this.matrix());const{options:t}=this,{origin:r,drawGrid:o}=t;e||(e=0),n||(n=0);const s=this.matrix();if(s.e===e&&s.f===n)return this;s.e=e,s.f=n,this.matrix(s);const{tx:c,ty:p}=this.translate();return r.x=c,r.y=p,this.trigger("translate",c,p),o&&this.drawGrid(),this},findView:function(e){var n=br(e)?this.cells.querySelector(e):e instanceof Rt?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=br(e)||Xt(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new ye(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=nr(n||{},{strict:!1}),e=new bt(e);var t=this.model.getElements().map(this.findViewByModel,this),r=n.strict?"containsRect":"intersect";return t.filter(function(o){return o&&e[r](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new ye(e,n);return He.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,r){var o=new bt(e,n,t,r);return He.transformRect(o,this.matrix())},paperToLocalPoint:function(e,n){var t=new ye(e,n);return He.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,r){var o=new bt(e,n,t,r);return He.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new ye(e,n);return He.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,r){var o=new bt(e,n,t,r);return He.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new ye(e,n);return He.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,r){var o=new bt(e,n,t,r);return He.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,r){return this.localToPaperRect(e,n,t,r).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var r=new ye(e,n).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,n,t,r){var o=this.pageOffset(),s=new bt(e,n,t,r);return s.x-=o.x,s.y-=o.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ye(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof pi))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,r=this.model,o=r.constructor.validations;return!(!t.multiLinks&&!o.multiLinks.call(this,r,n)||!t.linkPinning&&!o.linkPinning.call(this,r,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return Rn(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===n){if(!r||t&&(n=r[t],!1===n))return!1;n||(n=r.default)}if(!n)return!1;br(n)&&(n={name:n});const s=n.name,c=o[s];if(!c)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:c,options:n.options||{},name:s}},onCellHighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:s}=r;o.highlight(e,n,s)},onCellUnhighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:s}=r;o.unhighlight(e,n,s)},pointerdblclick:function(e){e.preventDefault(),e=w(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=w(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=w(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=w(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=w(e);var r=this.snapToGrid(e.clientX,e.clientY),o=n.sourceView;o?o.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=w(e),t=this.snapToGrid(n.clientX,n.clientY),r=this.eventData(e).sourceView;r?r.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(Rt.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=w(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=w(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=w(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseenter(e),this.el.contains(t)))||s||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=w(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseleave(e),this.el.contains(t)))||s||r===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=w(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,r=this.snapToGrid(t.clientX,t.clientY),o=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,r.x,r.y,o):this.trigger("blank:mousewheel",e,r.x,r.y,o)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var r=this.findView(n);if(r){if(e=w(e),this.guard(e,r))return;var o=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,t,o.x,o.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var o=this.findView(t);if(o){if(e=w(e),this.guard(e,o))return;var s=this.snapToGrid(e.clientX,e.clientY);n.call(this,o,e,t,s.x,s.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,r,o,s){n.onmagnet(t,o,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,r,o,s){n.magnetpointerdblclick(t,r,o,s)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,r,o,s){n.magnetcontextmenu(t,r,o,s)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=w(e),this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,r.x,r.y)}},getPointerArgs(e){const n=w(e),{x:t,y:r}=this.snapToGrid(n.clientX,n.clientY);return[n,t,r]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof Nt||this.svg===e.target||this.el===e.target||Rt.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:He("svg",{width:"100%",height:"100%"},He("defs")),patterns:{},add:function(e,n){He(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(He("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(br(e)&&Array.isArray(n[e]))return n[e].map(function(m){return jt({},m)});var t=e||{args:[{}]},r=Array.isArray(t),o=t.name;if(!r&&!o&&!t.markup&&(o="dot"),o&&Array.isArray(n[o])){var s=n[o].map(function(m){return jt({},m)}),c=Array.isArray(t.args)?t.args:[t.args||{}];nr(c[0],to(e,"args"));for(var p=0;p<c.length;p++)s[p]&&jt(s[p],c[p]);return s}return r?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],r=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,p){var m="pattern_"+p,C=Hr(c,t[p],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});C.width=n*(r.a||1)*(C.scaleFactor||1),C.height=n*(r.d||1)*(C.scaleFactor||1),o.exist(m)||o.add(m,He("pattern",{id:m,patternUnits:"userSpaceOnUse"},He(C.markup)));var M=o.get(m);Rn(C.update)&&C.update(M.node.childNodes[0],C);var _=C.ox%C.width;_<0&&(_+=C.width);var G=C.oy%C.height;G<0&&(G+=C.height),M.attr({x:_,y:G,width:C.width,height:C.height})});var s=(new XMLSerializer).serializeToString(o.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",r=this.scale(),o=this.translate();Yn(n)&&(n=o.tx+r.sx*(n.x||0)+"px "+(o.ty+r.sy*(n.y||0))+"px"),Yn(t)&&(t=(t=new bt(t).scale(r.sx,r.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,r=(n=n||{}).size,o=n.repeat||"no-repeat",s=n.opacity||1,c=Math.abs(n.quality)||1,p=this.constructor.backgroundPatterns[Ei(o)];if(Rn(p)){e.width*=c,e.height*=c;var m=p(e,n);if(!(m instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=m.toDataURL("image/png"),o="repeat",Yn(r)?(r.width*=m.width/e.width,r.height*=m.height/e.height):void 0===r&&(n.size={width:m.width/c,height:m.height/c})}else t=e.src,void 0===r&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:o,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=Jr(e),d(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,cr(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Yn(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+se(JSON.stringify(e))),!this.isDefined(n)){var o=cn[t]&&cn[t](e.args||{});if(!o)throw new Error("Non-existing filter "+t);var s=jt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});He(o,s).appendTo(this.defs)}return n},defineGradient:function(e){if(!Yn(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:r,id:o=r+n.id+se(JSON.stringify(e)),stops:s,attrs:c={}}=e;if(this.isDefined(o))return o;const p=bn(s).map(({offset:C,color:M,opacity:_})=>He("stop").attr({offset:C,"stop-color":M,"stop-opacity":Number.isFinite(_)?_:1})),m=He(r,c,p);return m.id=o,m.appendTo(t),o},definePattern:function(e){if(!Yn(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+se(JSON.stringify(e)),markup:o,attrs:s={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=He("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(s),"string"==typeof o)c.append(He(o));else{const{fragment:p}=Q(o);c.append(p)}return c.appendTo(t),r},defineMarker:function(e){if(!Yn(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+se(JSON.stringify(e)),markup:o,attrs:s={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const p=He("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(p.id=r,p.attr(s),o)if("string"==typeof o)p.append(He(o));else{const{fragment:m}=Q(o);p.append(m)}else{const{type:m="path"}=e,C=He(m,to(e,"type","id","markup","attrs","markerUnits"));p.append(C)}return p.appendTo(t),r}},{sorting:Oa,Layers:So,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,-1,n.width,n.height),o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,1,n.width,0),o.drawImage(e,0,0,t,r),o.setTransform(1,0,0,-1,0,n.height),o.drawImage(e,0,0,t,r),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(2*t,0),o.scale(-1,1),o.drawImage(e,0,0,t,r),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(e,0,0,t,r),n},watermark:function(e,n){n=n||{};var t=e.width,r=e.height,o=document.createElement("canvas");o.width=3*t,o.height=3*r;for(var s=o.getContext("2d"),c=Xt(n.watermarkAngle)?-n.watermarkAngle:-20,p=Vt(c),m=o.width/4,C=o.height/4,M=0;M<4;M++)for(var _=0;_<4;_++)(M+_)%2>0&&(s.setTransform(1,0,0,1,(2*M-1)*m,(2*_-1)*C),s.rotate(p),s.drawImage(e,-t/2,-r/2,t,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){He(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;He(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",He(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",He(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",He(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class Qc{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new la,this.paper=new Zd({el:Rt("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const s=16*(.6*Math.max(...t.split("\n").map(p=>p.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new yc({id:n,size:{width:s,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:s,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new fa({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],r=[];return n.forEach(o=>{const s=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(100*o.average_success)}% (${o.question_count} Total)`;t.push(this.makeElement(o.pk,s)),o.next_category_ids.forEach(c=>{r.push(this.makeLink(o.pk,c))})}),t.concat(r)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const r=Xs.layout(this.graph,{dagre:ki(),graphlib:un(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Eo=f(76829);function Zc(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().reset()}),i.\u0275\u0275text(1," Back "),i.\u0275\u0275elementEnd()}if(2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}function qc(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"h2",7),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let ef=(()=>{class e{constructor(t,r,o){this.categoryService=t,this.router=r,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new Qc(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{t.push(r)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(r=>r.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Eo.H),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(i.Injector))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,Zc,2,2,"button",1),i.\u0275\u0275template(2,qc,3,3,"ng-container",2),i.\u0275\u0275template(3,qd,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"div",4,5)),2&t){const o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===s.children.length)}},directives:[k.O5,gt.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var tf=f(30567),nf=f(3605),Tr=f(27221),is=f(40520),Ls=f(93514);let Ns=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.get(r).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.delete(r).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const r=this.apiService.getURL("event");return this.http.post(r,t).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const r=this.apiService.getURL("event",t.id);return this.http.put(r,t).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,r){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:t.id,course:r},{observe:"response"}).pipe((0,Tr.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Ls.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var zo=f(71105),Go=f(27482);function Zt(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.event.name)}}function zu(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const Dl=function(e,n,t){return["/course",e,"event",n,"problem",t]};function os(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,Dl,r.courseId,r.eventId,t.question.id))}}const eh=function(e,n){return["/course",e,"problem",n]};function Fl(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,eh,r.courseId,t.question.id))}}const rf=function(e){return["/problem",e,"edit"]};function gi(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,rf,t.question.id))}}function th(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,zu,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,os,3,5,"ng-container",10),i.\u0275\u0275template(15,Fl,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,gi,3,3,"ng-container",0),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",o.highlight(o.getStatus(t)))("value",o.getStatus(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,t.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",o.user.is_teacher)}}function nh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function of(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function rh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,nh,2,0,"h2",13),i.\u0275\u0275template(2,of,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",t)}}function af(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,Zt,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,th,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,rh,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.uqjs.length)}}let sf=(()=>{class e{constructor(t,r,o,s,c,p){this.authenticationService=t,this.router=r,this.route=o,this.uqjService=s,this.courseEventService=c,this.courseService=p,this.authenticationService.currentUser.subscribe(m=>this.user=m)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,tf.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(nf.O),i.\u0275\u0275directiveInject(Ns),i.\u0275\u0275directiveInject(pe.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,af,6,7,"ng-container",0),2&t&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[k.O5,k.sg,zo.h,Go.Gi,gt.v0,te.yS],pipes:[k.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var as=f(22307),$i=f(95428),Po=f(50284),Rr=f(56197),yr=f(61895),Er=f(56249),Ii=f(84620);const ih=["importDialog"];function oh(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",12),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.getEventFilterOptions())}}function nu(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"button",13),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275text(2," Add Event "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}}function uf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",21)(1,"p",22),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",19),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",23),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(s,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name)}}const lf=function(e){return["/course",e,"new-event"]};function ah(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"a",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",17),i.\u0275\u0275element(4,"tui-svg",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",19),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,uf,7,2,"tui-island",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,lf,t.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",t.courseEvents)}}function sh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,ah,8,5,"ng-container",6),i.\u0275\u0275elementStart(1,"button",14),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",t.courseEvents)}}function uh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Assignment"),i.\u0275\u0275elementContainerEnd())}function lh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Exam"),i.\u0275\u0275elementContainerEnd())}function cf(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",38)}function ff(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",39)}function ch(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function Vl(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Bl=function(e,n){return["/course",e,"event",n]};function ru(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",40),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Bl,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Hl(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",41),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const jl=function(e,n){return["/course",e,"new-event",n]};function df(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",42),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,jl,r.courseId,t.id))}}function Gu(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",26),i.\u0275\u0275template(2,uh,2,0,"ng-container",6),i.\u0275\u0275template(3,lh,2,0,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",27),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",28)(7,"div"),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"div",29),i.\u0275\u0275template(14,cf,1,0,"tui-tag",30),i.\u0275\u0275template(15,ff,1,0,"ng-template",null,31,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",32),i.\u0275\u0275template(18,ch,2,0,"ng-container",33),i.\u0275\u0275template(19,Vl,2,4,"ng-template",null,34,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",35),i.\u0275\u0275template(22,ru,3,5,"ng-container",33),i.\u0275\u0275template(23,Hl,2,1,"ng-template",null,36,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(25,df,2,4,"a",37),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275reference(20),s=i.\u0275\u0275reference(24),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","ASSIGNMENT"===t.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","EXAM"===t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(9,12,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(12,15,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet||t.is_exam)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function hf(e,n){if(1&e&&i.\u0275\u0275template(0,Gu,26,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.getUpcomingEvents())}}function Uo(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Assignment"),i.\u0275\u0275elementContainerEnd())}function ss(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Exam"),i.\u0275\u0275elementContainerEnd())}function fh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",40),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Bl,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function pf(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",41),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function dh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",42),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,jl,r.courseId,t.id))}}function hh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",26),i.\u0275\u0275template(2,Uo,2,0,"ng-container",6),i.\u0275\u0275template(3,ss,2,0,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",27),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",28)(7,"div"),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"div",29),i.\u0275\u0275element(14,"tui-tag",43),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"div",32),i.\u0275\u0275text(16),i.\u0275\u0275pipe(17,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"div",35),i.\u0275\u0275template(19,fh,3,5,"ng-container",33),i.\u0275\u0275template(20,pf,2,1,"ng-template",null,36,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(22,dh,2,4,"a",37),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(21),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","ASSIGNMENT"===t.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","EXAM"===t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(9,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(12,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(17,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==o.user?null:o.user.is_teacher))("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function ph(e,n){if(1&e&&i.\u0275\u0275template(0,hh,23,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.getPastEvents())}}var ka=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(ka||(ka={})),ka))();let gh=(()=>{class e{constructor(t,r,o,s){this.authenticationService=t,this.courseEventService=r,this.dialogService=o,this.notificationsService=s,this.filter=ka.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(ka)}getEvents(){switch(this.filter){case ka.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case ka.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case ka.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,r){this.courseEventService.importCourseEvent(t,r).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(Ns),i.\u0275\u0275directiveInject(as.RO),i.\u0275\u0275directiveInject(pt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(ih,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.importDialog=o.first)}},inputs:{events:"events",course:"course"},decls:17,vars:4,consts:[[1,"eventPage"],[1,"functionBar"],[1,"filter"],["tuiTextfieldSize","l",3,"ngModel","ngModelChange"],["tuiTextfield",""],[3,"items",4,"tuiDataList"],[4,"ngIf"],["importDialog",""],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],[3,"items"],["icon","tuiIconPlus","appearance","primary","aria-label","Add Event","size","l","tuiButton","",3,"click"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],["size","s",4,"ngFor","ngForOf"],["size","s"],[1,"tui-island__category"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"],["class","event",4,"ngFor","ngForOf"],[1,"event"],[1,"eventType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["eventComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"tui-select",3),i.\u0275\u0275listener("ngModelChange",function(s){return r.filter=s}),i.\u0275\u0275text(4," You are viewing "),i.\u0275\u0275element(5,"input",4),i.\u0275\u0275template(6,oh,1,1,"tui-data-list-wrapper",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,nu,3,0,"ng-container",6),i.\u0275\u0275template(8,sh,3,1,"ng-template",null,7,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"tui-accordion",8)(11,"tui-accordion-item",9),i.\u0275\u0275text(12," Upcoming Events "),i.\u0275\u0275template(13,hf,1,1,"ng-template",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"tui-accordion-item",11),i.\u0275\u0275text(15," Past Events "),i.\u0275\u0275template(16,ph,1,1,"ng-template",10),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.filter),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(3),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[$i.uJ,$i.OI,ve.sz,K.NgControlStatus,K.NgModel,yr.MB,Er.gX,Po.eC,k.O5,gt.v0,zo.h,te.yS,Ii.P,k.sg,Rr.oc,Rr.Kc,Rr.dv,Go.Gi],pipes:[k.uU,k.JJ],styles:['.eventPage[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.functionBar[_ngcontent-%COMP%]{align-self:center;width:90%;display:flex;justify-content:start;gap:1rem;flex-wrap:wrap}.filter[_ngcontent-%COMP%]{min-width:22rem}.new-event[_ngcontent-%COMP%]{width:20rem}.new-event[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.event[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.event[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.event[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.event[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"eventType availability" "name grade" "dates linkBtn";align-items:start}}.eventType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.eventType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.eventType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.eventType[_ngcontent-%COMP%]{grid-area:eventType}.name[_ngcontent-%COMP%]{grid-area:name}.dates[_ngcontent-%COMP%]{grid-area:dates}.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})(),gf=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}useTokens(t,r){const o=new is.WM({"Content-Type":"application/json"}),s=this.apiService.getURL("token-use","use",r);return this.http.post(s,t,{headers:o}).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Ls.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var zl=f(21922);function vh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function mh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",17)}function yh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",18)}function xh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,mh,1,0,"tui-tag",15),i.\u0275\u0275template(2,yh,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",t)}}function vf(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}const mf=function(){return{standalone:!0}};function yf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,xh,4,2,"ng-container",11),i.\u0275\u0275template(5,vf,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(o){return i.\u0275\u0275restoreView(t).$implicit.num_used=o}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",i.\u0275\u0275pureFunction0(10,mf))}}let _h=(()=>{class e{constructor(t,r,o,s){this.tokenUseService=t,this.route=r,this.authenticationService=o,this.notificationsService=s,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(o=>r[o.option.id]=o.num_used),this.tokenUseService.useTokens(r,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(gf),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(pt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,vh,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"form",3)(7,"div",4),i.\u0275\u0275template(8,yf,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6)(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[k.O5,_t.Ls,K.\u0275NgNoValidate,K.NgControlStatusGroup,K.NgForm,k.sg,zo.h,Go.Gi,zl.EA,zl.aQ,K.NgControlStatus,K.NgModel,gt.v0],pipes:[k.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var xf=f(76508),Io=f(78697);function _f(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275reference(4),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("margin-top",r+"rem")("order",r%2*-r),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",o.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(s.getGetOrdinal(t.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function bh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function Ch(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function wh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function Sh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(t.rank)," ")}}function Th(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21)(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function Eh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function oo(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,Sh,2,1,"td",20),i.\u0275\u0275template(2,Th,4,4,"td",20),i.\u0275\u0275template(3,Eh,2,1,"td",20),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function Ph(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275template(2,_f,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),i.\u0275\u0275template(7,bh,2,0,"th",7),i.\u0275\u0275template(8,Ch,2,0,"th",7),i.\u0275\u0275template(9,wh,2,0,"th",7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,oo,4,3,"tr",9),i.\u0275\u0275elementEnd()()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",t.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}let Ih=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(t,r)=>t.rank>r,this.filterInTopX=(t,r)=>t.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(t){return t.sort((o,s)=>s.token-o.token).map((o,s)=>({rank:s+1,name:o.name,token:o.token}))}getGetOrdinal(t){const r=["th","st","nd","rd"],o=t%100;return t+(r[(o-20)%10]||r[o]||r[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Ph,13,15,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[k.O5,k.sg,zo.h,xf.JP,Io.c4,Io.Nx,Io.EE,Io.DZ,Io.Ws,Io.jY,Io.LU,Io.fu,Io.Bl,Io.Kt],pipes:[ke.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();function Mh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function bf(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",20)}function Ah(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function Oh(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Cf=function(e,n){return["/course",e,"event",n]};function kh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Cf,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Gl(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const wf=function(e,n){return["/course",e,"new-event",n]};function Lh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,wf,r.course.id,t.id))}}function Nh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,Mh,1,0,"tui-tag",11),i.\u0275\u0275template(14,bf,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275template(17,Ah,2,0,"ng-container",14),i.\u0275\u0275template(18,Oh,2,4,"ng-template",null,15,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",16),i.\u0275\u0275template(21,kh,3,5,"ng-container",14),i.\u0275\u0275template(22,Gl,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(24,Lh,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(19),s=i.\u0275\u0275reference(23),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Rh(e,n){if(1&e&&i.\u0275\u0275template(0,Nh,25,16,"div",5),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function Dh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function Fh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",26)}function Vh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Cf,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Bh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function Hh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,wf,r.course.id,t.id))}}function jh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,Dh,1,0,"tui-tag",11),i.\u0275\u0275template(14,Fh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",16),i.\u0275\u0275template(20,Vh,3,5,"ng-container",14),i.\u0275\u0275template(21,Bh,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,Hh,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(22),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==s.user?null:s.user.is_teacher))("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function zh(e,n){if(1&e&&i.\u0275\u0275template(0,jh,24,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.pastEvents)}}let Gh=(()=>{class e{constructor(t){this.authenticationService=t,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t),this.upcomingEvents=this.events.filter(t=>t.is_open||t.is_not_available_yet).filter(t=>"CHALLENGE"==t.type),this.pastEvents=this.events.filter(t=>t.is_closed).filter(t=>"CHALLENGE"==t.type)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),i.\u0275\u0275text(3," Upcoming Challenges "),i.\u0275\u0275template(4,Rh,1,1,"ng-template",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-accordion-item",4),i.\u0275\u0275text(6," Past Challenges "),i.\u0275\u0275template(7,zh,1,1,"ng-template",3),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[Rr.oc,Rr.Kc,Rr.dv,k.sg,k.O5,Go.Gi,gt.v0,te.yS],pipes:[k.uU,k.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}.name[_ngcontent-%COMP%]{grid-area:name}.dates[_ngcontent-%COMP%]{grid-area:dates}.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function Uh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Concept Map"),i.\u0275\u0275elementEnd())}function $h(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function Wh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function Yh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function Xh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function Kh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1,"Challenges"),i.\u0275\u0275elementEnd())}function Jh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",19),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",t.course)}}function Qh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==t.course?null:t.course.question_set)("uqjs",null==t.course?null:t.course.uqjs)}}function Ul(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function Sf(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",22),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==t.course?null:t.course.course_reg)}}function Zh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",23),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==t.course?null:t.course.leader_board)("rankTopX",3)}}function qh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-challenge-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function ep(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",24)}let tp=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ae.$),i.\u0275\u0275directiveInject(pe.N),i.\u0275\u0275directiveInject(te.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:21,vars:13,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-text_h6"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h6",2),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-tabs-with-more",3,4),i.\u0275\u0275template(7,Uh,2,0,"button",5),i.\u0275\u0275template(8,$h,2,0,"button",6),i.\u0275\u0275template(9,Wh,2,0,"button",7),i.\u0275\u0275template(10,Yh,2,0,"button",8),i.\u0275\u0275template(11,Xh,2,0,"button",9),i.\u0275\u0275template(12,Kh,2,0,"button",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,Jh,2,1,"ng-container",11),i.\u0275\u0275template(14,Qh,2,2,"ng-container",11),i.\u0275\u0275template(15,Ul,2,2,"ng-container",11),i.\u0275\u0275template(16,Sf,2,1,"ng-container",11),i.\u0275\u0275template(17,Zh,2,2,"ng-container",11),i.\u0275\u0275template(18,qh,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(19,ep,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(6),s=i.\u0275\u0275reference(20);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.description," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",s),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",0===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",5===o.activeItemIndex)}},directives:[pn.WN,pn.tl,pn.yu,k.O5,ef,sf,gh,_h,Ih,Gh,Ii.P],styles:[""]}),e})();var ht=f(68858);let $l=(()=>{class e{static createForm(){return(new K.FormBuilder).group({name:new K.FormControl(null,[K.Validators.required]),type:new K.FormControl("",[K.Validators.required]),countForTokens:new K.FormControl(!1,[K.Validators.required]),startEndDatePicker:new K.FormControl(new ht.VR(ht.TU.currentLocal(),ht.TU.currentLocal().append({day:7})),[K.Validators.required]),startTimePicker:new K.FormControl(ht.qD.currentLocal(),[K.Validators.required]),endTimePicker:new K.FormControl(ht.qD.currentLocal(),[K.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new K.FormBuilder).group({name:new K.FormControl(t.name,[K.Validators.required]),type:new K.FormControl(t.type,[K.Validators.required]),countForTokens:new K.FormControl(t.count_for_tokens,[K.Validators.required]),startEndDatePicker:new K.FormControl(new ht.VR(ht.TU.fromLocalNativeDate(new Date(t.start_date)),ht.TU.fromLocalNativeDate(new Date(t.end_date))),[K.Validators.required]),startTimePicker:new K.FormControl(ht.qD.fromLocalNativeDate(new Date(t.start_date)),[K.Validators.required]),endTimePicker:new K.FormControl(ht.qD.fromLocalNativeDate(new Date(t.end_date)),[K.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,r,o){return{id:o,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:r,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,r){return new Date(t.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,r=n.get("startTimePicker").value,o=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&o.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var Uu=f(86097),Wl=f(13774),Ve=f(52014),La=f(35302),Mi=f(35137),ii=f(28634),Na=f(14335),iu=f(35640),mt=f(73442),Yl=f(295),Ra=f(40022),$o=f(39193),Tf=f(52164),Xl=f(70589),ao=f(45261),Da=f(15411),us=f(83618),fr=f(72997),Rs=f(85113);function Ef(e,{value:n,min:t,max:r,dateFormat:o,dateSeparator:s}){return n&&n.toString(o,s)===e?e:ht.TU.normalizeParse(e,o).dayLimit(t,r).toString(o,s)}function np(e){return n=>n.length!==ht.ek?{value:n}:{value:Ef(n,e)}}function ou(e,n){return ht.TU.normalizeParse(e.slice(0,ht.ek),n.dateFormat).dayLimit(n.min,n.max)}function Pf(e,n){const{dateFormat:t,dateSeparator:r}=n;switch(e.length){case ht.ek:return ou(e,n).toString(t,r);case ht.ek+ht.mH.length:return ou(e,n).toString(t,r)+ht.mH;case ht.FZ:return n.value&&n.value.toString(t,r)===e?e:ht.VR.sort(ou(e.slice(0,ht.ek),n),ou(e.slice(ht.ek+ht.mH.length),n)).toString(t,r);default:return e}}function rp(e){return n=>({value:Pf(n,e)})}function If(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},us.bM),n);return o=>{const s=[],c=o.split("");return t.forEach(m=>{const C=e.indexOf(m),M=parseInt(String(r[m]).substr(0,1),10);parseInt(c[C],10)>M&&(c[C+1]=c[C],c[C]="0",s.push(C))}),!t.some(m=>parseInt(o.substr(e.indexOf(m),2),10)>r[m])&&{value:c.join(""),indexesOfPipedChars:s}}}const $u=Array(2).fill($o.hW),au=Array(4).fill($o.hW);function Mf(e,n){return"YMD"===(Rs.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...au,n,...$u,n,...$u]:[...$u,n,...$u,n,...au]}function ip(e,n){Rs.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=Mf(e,n);return[...t,ii.f$,ii.F,ii.f$,...t]}function Wu(e,n){const{length:t}=String(e),r=Array(t).fill($o.hW);return n&&r.unshift(n),r}function op(e,n={}){const{HH:t,MM:r,SS:o,MS:s}=Object.assign(Object.assign({},us.bM),n);return[...Wu(t),...Wu(r,":"),...e.includes("HH:MM:SS")?Wu(o,":"):[],..."HH:MM:SS.MSS"===e?Wu(s,"."):[]]}var ha=f(35628),su=f(24850),Yu=f(7625),Kl=f(6083),Jl=f(34530),vi=f(33186),Wo=f(93030),pa=f(26171),qt=f(24710),ls=f(53256),uu=f(2141),Ds=f(66695);let Of=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(vi.gH))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,qt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,mt.TH)()],e.prototype,"tuiColor",void 0),(0,qt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,mt.TH)()],e.prototype,"tuiBackground",void 0),e=(0,qt.gn)([(0,qt.fM)(0,(0,i.Inject)(vi.gH))],e),e})(),kf=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();var Xu=f(46579);const sp=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:r})=>{Rs.z.assert(Number.isInteger(n)),Rs.z.assert((0,Xu.Z2)(n,0,6)),Rs.z.assert(Number.isInteger(t)),Rs.z.assert((0,Xu.Z2)(t,0,ht.NA));let o=n*ht.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:ht.NA-(n-t)})(e,r)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new ht.TU(e.year,e.month,o)};let Ku=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const o=[];for(let s=0;s<6;s++){const c=[];for(let p=0;p<ht.NA;p++){const m=sp({month:t,rowIndex:s,colIndex:p,firstDayOfWeek:this.firstDayOfWeek}),M=(_,G=t)=>_.year>G.year||_.month>G.month;if(!((_,G=t)=>_.year<G.year||_.month<G.month)(m)||r){if(M(m)&&!r)break;c.push(m)}}o.push(c)}return this.currentSheet=o.filter(s=>s.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ao.Sy,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,qt.gn)([(0,qt.fM)(0,(0,i.Inject)(ao.Sy))],e),e})(),Ju=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function lp(e,n){1&e&&i.\u0275\u0275element(0,"div",3),2&e&&i.\u0275\u0275property("innerText",n.$implicit)}function cp(e,n){if(1&e&&i.\u0275\u0275element(0,"div",12),2&e){const t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",t[1])}}function Ql(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,cp,1,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.length>1)}}function Lf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(o){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(o&&s)})("tuiPressedChange",function(o){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(o&&s)})("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(o)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Ql,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,t,r.toMarkers,r.itemIsToday(t),!!r.getItemRange(t)))}}function fp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Lf,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(t)||r.showAdjacent)}}function dp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,fp,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o[r][t])}}function hp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,dp,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[t].length)}}function pp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,hp,2,1,"div",4),i.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let gp=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=ht.TU.currentLocal(),this.month=ht.ql.currentLocal(),this.disabledItemHandler=ii.Iy,this.markerHandler=$o.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,o,s)=>{if(o||s)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof ht.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:r,pressedItem:o,hoveredItem:s}=this;return r(t)?"disabled":o&&o.daySame(t)?"pressed":s&&s.daySame(t)?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return r?r instanceof ht.TU?r.daySame(t)?"single":null:r.from.daySame(t)&&!r.isSingleDay||o&&o.dayAfter(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(t)&&!r.isSingleDay||o&&o.dayBefore(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:r,hoveredItem:o}=this;if(null===r||r instanceof ht.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(t)&&r.to.dayAfter(t);if(null===o)return!1;const s=ht.VR.sort(r.from,o);return s.from.daySameOrBefore(t)&&s.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,Na.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ao.lQ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,lp,1,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,pp,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[k.sg,Ra.Ls,ls.Xj,k.O5,uu.c,Ds.n,Of],pipes:[k.Ov,Ku,Wo.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"month",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"hoveredItem",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"showAdjacent",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,qt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,qt.gn)([(0,qt.fM)(0,(0,i.Inject)(ao.lQ))],e),e})(),vp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Ra.WD,Wo.I,ls.Ih,uu.V,Ds.f,kf,Ju]]}),e})();var Nf=f(43360);function mp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const s=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(s)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t)}}function yp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,mp,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o.getItem(r,t))}}function xp(e,n){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,yp,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Mo=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=ht.ql.currentLocal().year,this.value=null,this.initialItem=ht.ql.currentLocal(),this.min=ht.K1,this.max=ht.Oy,this.disabledItemHandler=ii.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof ht.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,r){return 4*t+r+this.calculatedMin}getItemState(t){const{disabledItemHandler:r,max:o,pressedItem:s,hoveredItem:c}=this;return o.year<t||r!==ii.Iy&&r(t)?"disabled":s===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return null===r?null:r instanceof ht.F4?r.year===t?"single":null:r.from.year===t&&!r.from.yearSame(r.to)||null!==o&&o>r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===t&&!r.from.yearSame(r.to)||null!==o&&o<r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:r,hoveredItem:o}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==o&&r.from.year!==o&&(0,Xu.Z2)(t,Math.min(r.from.year,o),Math.max(r.from.year,o)):r.from.year<=t&&r.to.year>t)}onItemHovered(t,r){this.updateHoveredItem(t,r)}onItemPressed(t,r){this.updatePressedItem(t,r)}onItemClick(t){this.yearClick.emit(new ht.F4(t))}updateHoveredItem(t,r){this.hoveredItem=t?r:null}updatePressedItem(t,r){this.pressedItem=t?r:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,xp,2,1,"div",0),2&t&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[ls.Xj,Ra.Ls,Nf.M,uu.c,Ds.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"initialItem",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),(0,qt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),_p=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[uu.V,Ds.f,ls.Ih,Ra.WD,Nf.e]]}),e})();var Zl=f(61279),Yo=f(33703),ln=f(89627),Ff=f(37940),Ci=f(3054);const Dr=["wrapper"];function bp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",t[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",t[1])("focusable",!1)}}const Fa=["*"];let Cp=(()=>{let e=class extends La.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,iu.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ao.U4))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Dr,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Fa,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,bp,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[k.O5,pa.A,Yo.t,Ci.U,Ff.q,gt.v0],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,qt.gn)([(0,i.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabled",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"mode",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"leftDisabled",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"rightDisabled",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"leftClick",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"rightClick",void 0),e=(0,qt.gn)([(0,qt.fM)(0,(0,i.Inject)(ao.U4))],e),e})(),wp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Ff.c,Ci.F,Yo.u,pa.Z,gt.fN]]}),e})();var Vf=f(5767);function Sp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function Tp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let ql=(()=>{let e=class{constructor(){this.value=ht.ql.currentLocal(),this.min=ht.K1,this.max=ht.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const r=this.value.append(t);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,Sp,2,1,"ng-container",1),i.\u0275\u0275template(5,Tp,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",o)}},directives:[Cp,k.O5,ln.V,Yo.t],pipes:[k.Ov,Vf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),e})(),Ep=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Yo.u,wp,ln.j,Vf.g]]}),e})();function ga(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPickerYearClick(o)}),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function Bf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let Fs=(()=>{let e=class{constructor(){this.month=ht.ql.currentLocal(),this.value=null,this.disabledItemHandler=ii.Iy,this.min=ht.K1,this.max=ht.Oy,this.minViewedMonth=ht.K1,this.maxViewedMonth=ht.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=$o.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,r,o)=>s=>s.dayBefore(r)||s.dayAfter(o)||t(s)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new ht.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,Na.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,ga,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,Bf,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",o)}},directives:[k.O5,Zl.IB,Mo,ql,gp],pipes:[Wo.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"month",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"minViewedMonth",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"maxViewedMonth",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"hoveredItem",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"showAdjacent",void 0),(0,qt.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"monthChange",void 0),(0,qt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),ar=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Ep,vp,_p,Zl.Jy,Wo.I]]}),e})(),Pr=(()=>{let e=class{constructor(t,r,o){this.disabledItemHandler=ii.Iy,this.markerHandler=$o.zE,this.defaultViewedMonthFirst=ht.ql.currentLocal(),this.defaultViewedMonthSecond=ht.ql.currentLocal().append({month:1}),this.min=ht.K1,this.max=ht.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(s,c)=>s.append({month:c}),t&&t.pipe((0,Jl.YP)(r),(0,Yu.R)(o)).subscribe(s=>{this.value=s,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(fr.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(vi.a3))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([vi.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionFirstViewedMonth(s)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionSecondViewedMonth(s)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[Fs],pipes:[Wo.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,Ve.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),e=(0,Ve.gn)([(0,Ve.fM)(0,(0,i.Inject)(fr.cU)),(0,Ve.fM)(0,(0,i.Optional)()),(0,Ve.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ve.fM)(2,(0,i.Inject)(vi.a3))],e),e})(),Hf=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[Wo.I,Zl.Jy,ar]]}),e})();const jf=function(e,n,t,r){return[e,n,t,r,!0]},zf=function(e,n,t,r){return[e,n,t,r,!1]};function Pp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,jf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,zf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function Ip(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",9)}function Mp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("keydown.space.prevent",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,Ip,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(t))}}const Ap=function(e,n,t,r,o,s){return[e,n,t,r,o,s]};function Gf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,Mp,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,jf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,zf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,Ap,t.items,t.mapper,t.min,t.max,t.minLength,i.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let lu=(()=>{let e=class{constructor(t,r,o,s){this.otherDateText$=s,this.defaultViewedMonth=ht.ql.currentLocal(),this.disabledItemHandler=ii.Iy,this.markerHandler=$o.zE,this.items=[],this.min=ht.K1,this.max=ht.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=us.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,p,m,C,M)=>[...c.filter(_=>(null===C||_.range.from.append(C).daySameOrBefore(_.range.to))&&_.range.to.daySameOrAfter(p)&&(null===m||_.range.from.daySameOrBefore(m))),M],t&&t.pipe((0,Jl.YP)(r),(0,Yu.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:r}=this;return"string"==typeof t&&null===r||r===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(ht.VR.sort(r.from,t)):this.value=new ht.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,Na.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,r,o){return s=>{if(!r||!r.isSingleDay||!o)return t(s);const c=r.from.append(o,!0).append({day:1}),p=r.from.append(o).append({day:-1});return c.dayBefore(s)&&p.dayAfter(s)||t(s)}}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(fr.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(vi.a3),i.\u0275\u0275directiveInject(fr.q5))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([vi.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,Pp,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,Gf,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",o)}},directives:[k.O5,Pr,pa.A,Fs,Er.qi,k.sg,Er.vK,Ii.P],pipes:[Wo.c,k.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"items",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"minLength",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"maxLength",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"value",void 0),(0,Ve.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Ve.gn)([(0,i.Output)()],e.prototype,"rangeChange",void 0),(0,Ve.gn)([mt.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,Ve.gn)([(0,Ve.fM)(0,(0,i.Inject)(fr.cU)),(0,Ve.fM)(0,(0,i.Optional)()),(0,Ve.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ve.fM)(2,(0,i.Inject)(vi.a3)),(0,Ve.fM)(3,(0,i.Inject)(fr.q5))],e),e})(),ec=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Wo.I,pa.Z,ar,ar,Ii.E,Er.pc,Hf]]}),e})();var Va=f(38190),Xo=f(67795);function Qu(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPressed(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(t))("readOnly",r.readOnly)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Wi(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Vs(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Op(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRangeChange(o)}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const kp=["*",[["input"]]],Lp=["*","input"],Rp=[{provide:La.M$,useExisting:(0,i.forwardRef)(()=>cu)},{provide:Mi.KZ,useExisting:(0,i.forwardRef)(()=>cu)},{provide:fr.cU,deps:[[new i.Optional,new i.Self,K.NgControl],[new i.Optional,(0,i.forwardRef)(()=>fr.LD)]],useFactory:(e,n)=>(0,Uu.q7)(e,n)},Kl.Sm];let cu=(()=>{let e=class extends La.F9{constructor(t,r,o,s,c,p,m,C,M,_,G,ne){super(t,r,ne),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=p,this.textfieldSize=m,this.textfieldExampleText=C,this.dateFormat=M,this.dateSeparator=_,this.dateTexts$=G,this.valueTransformer=ne,this.textMaskOptions={mask:ip(this.dateFormat,this.dateSeparator),pipe:rp(this),guide:!1},this.disabledItemHandler=ii.Iy,this.markerHandler=$o.zE,this.defaultViewedMonth=ht.ql.currentLocal(),this.items=[],this.min=ht.K1,this.max=ht.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=us.EP,this.dateFiller$=this.dateTexts$.pipe((0,su.U)(oe=>(0,ht.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Tf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?us.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,Na.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:r,activePeriod:o}=this;return o?String(o):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new ha.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,Yu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==ht.FZ)return void this.updateValue(null);const r=ht.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,Na.Hm)(this.value,t,(r,o)=>r.daySame(o))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===ht.ek||this.nativeValue.length===ht.ek+ht.mH.length)&&this.updateValue(ht.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,iu.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const r=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new ht.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,o=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(o)?new ht.VR(r.from,o):r}getDateRangeFiller(t){return`${t}${ht.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(K.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Mi.fL),i.\u0275\u0275directiveInject(as.RO),i.\u0275\u0275directiveInject(fr.vk,8),i.\u0275\u0275directiveInject(ve.kI),i.\u0275\u0275directiveInject(ve.pX),i.\u0275\u0275directiveInject(ht.P_),i.\u0275\u0275directiveInject(ht.q_),i.\u0275\u0275directiveInject(fr.zf),i.\u0275\u0275directiveInject(fr.LD,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(yr.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(Rp),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Lp,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(kp),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)})("tuiActiveZoneChange",function(s){return r.onActiveZone(s)}),i.\u0275\u0275template(1,Qu,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Wi,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Vs,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Op,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[Da.o1,Yl.e,Ra.Ls,yr.yc,yr.B1,Va.n,ve.D9,ve._K,Xo.hd,Ii.P,lu],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Ve.gn)([(0,i.ViewChild)(yr.yc)],e.prototype,"textfield",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"items",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"minLength",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"maxLength",void 0),(0,Ve.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Ve.gn)([(0,Ve.fM)(0,(0,i.Optional)()),(0,Ve.fM)(0,(0,i.Self)()),(0,Ve.fM)(0,(0,i.Inject)(K.NgControl)),(0,Ve.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ve.fM)(2,(0,i.Inject)(i.Injector)),(0,Ve.fM)(3,(0,i.Inject)(Mi.fL)),(0,Ve.fM)(4,(0,i.Inject)(as.RO)),(0,Ve.fM)(5,(0,i.Optional)()),(0,Ve.fM)(5,(0,i.Inject)(fr.vk)),(0,Ve.fM)(6,(0,i.Inject)(ve.kI)),(0,Ve.fM)(7,(0,i.Inject)(ve.pX)),(0,Ve.fM)(8,(0,i.Inject)(ht.P_)),(0,Ve.fM)(9,(0,i.Inject)(ht.q_)),(0,Ve.fM)(10,(0,i.Inject)(fr.zf)),(0,Ve.fM)(11,(0,i.Optional)()),(0,Ve.fM)(11,(0,i.Inject)(fr.LD))],e),e})();var Ko;let dn=Ko=class extends Xl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};dn.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(dn)))(t||dn)}}(),dn.\u0275dir=i.\u0275\u0275defineDirective({type:dn,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:ao.S0,useExisting:(0,i.forwardRef)(()=>Ko)}]),i.\u0275\u0275InheritDefinitionFeature]});let Uf=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Xo.QA,Yl.A,Ra.WD,ha.wq,yr.KW,ve.cn,Da.jh,Ii.E,ec,Va.S]]}),e})();var so=f(56498);function $f(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(s)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function Dp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,$f,2,3,"button",4),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.filtered)}}const tc={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:us.bM,itemSize:"m"},cs=new i.InjectionToken("Default parameters for input time component",{factory:()=>tc});var nc;let jr=nc=class extends La.F9{constructor(n,t,r,o){super(n,t),this.timeTexts$=r,this.options=o,this.disabledItemHandler=ii.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,iu.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,su.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const r=ht.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=ht.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:op(n,this.options.maxValues),pipe:If(n,this.options.maxValues),guide:!1}}filter(n,t,r){return n.filter(o=>o.toString(t).includes(r))}findNearestTimeFromItems(n){return this.items.reduce((t,r)=>Math.abs(r.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?r:t)}getMatch(n){return this.items.find(t=>(0,ii.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:r}=n;if(this.readOnly||!(r instanceof HTMLInputElement))return;const o=r.selectionStart||0;this.shiftTime(this.calculateShift(o,t)),r.setSelectionRange(o,o),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,iu.NY)(this.nativeFocusableElement,!0,n),this.close())}};jr.\u0275fac=function(n){return new(n||jr)(i.\u0275\u0275directiveInject(K.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(fr.Yq),i.\u0275\u0275directiveInject(cs))},jr.\u0275cmp=i.\u0275\u0275defineComponent({type:jr,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(yr.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.textfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Mi.KZ,useExisting:(0,i.forwardRef)(()=>nc)},Kl.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(o){return t.onOpen(o)})("focusedChange",function(o){return t.onFocused(o)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("keydown.arrowUp",function(o){return t.onArrowUp(o)})("keydown.arrowDown",function(o){return t.onArrowDown(o)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,Dp,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",r)("open",t.interactive&&t.open&&!!t.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[Da.o1,yr.yc,yr.B1,Va.n,ve.D9,Xo.hd,Er.qi,k.sg,Er.vK],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),jr.ctorParameters=()=>[{type:K.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[K.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:so.y,decorators:[{type:i.Inject,args:[fr.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[cs]}]}],(0,Ve.gn)([(0,i.ViewChild)(yr.yc)],jr.prototype,"textfield",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],jr.prototype,"disabledItemHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],jr.prototype,"items",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],jr.prototype,"itemSize",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],jr.prototype,"strict",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],jr.prototype,"mode",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],jr.prototype,"postfix",void 0),(0,Ve.gn)([mt.UM],jr.prototype,"getFiller$",null),(0,Ve.gn)([(0,i.HostListener)("click")],jr.prototype,"onClick",null),(0,Ve.gn)([mt.UM],jr.prototype,"calculateMask",null),(0,Ve.gn)([mt.UM],jr.prototype,"filter",null),jr=nc=(0,Ve.gn)([(0,Ve.fM)(0,(0,i.Optional)()),(0,Ve.fM)(0,(0,i.Self)()),(0,Ve.fM)(0,(0,i.Inject)(K.NgControl)),(0,Ve.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ve.fM)(2,(0,i.Inject)(fr.Yq)),(0,Ve.fM)(3,(0,i.Inject)(cs))],jr);let Fp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Xo.QA,Er.pc,Da.jh,yr.KW,Va.S,ve.cn]]}),e})();function Vp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Bp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Vp,2,2,"button",23),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.localEventTypes)}}function Hp(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const jp=function(e){return["/course",e]};let Wf=(()=>{class e{constructor(t,r,o,s){this.route=t,this.courseEventService=r,this.router=o,this.notificationsService=s,this.eventId=null,this.timeOptions=(0,Uu.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=$l.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=$l.createFormWithData(t)}))}submitEvent(t){const r=$l.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(Ns),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(pt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,Bp,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(30,Hp,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20)(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,jp,r.courseId)))},directives:[K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,le.K3,le.wU,K.NgControlStatus,K.FormControlName,on.y,$i.uJ,$i.OI,Er.gX,Er.qi,k.sg,Er.vK,Wl.p,cu,dn,jr,k.O5,_t.Ls,gt.v0,te.yS],styles:[""]}),e})();var rc=f(57057),zp=f(42654),Yf=f(19167),Gp=f(46100),ic=f(49201);class Xf{static createForm(){return(new K.FormBuilder).group({report:new K.FormControl("",[K.Validators.required]),report_details:new K.FormControl("")})}static extractData(n){return n.value}}let oc=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}reportQuestion(t,r){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},r),{question:t})).pipe((0,Tr.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Ls.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var fu=f(24417),ac=f(74528);function Up(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function qr(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Up,2,2,"button",8),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.reportOptions)}}function Ai(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Reason "),i.\u0275\u0275template(5,qr,2,1,"tui-data-list",4),i.\u0275\u0275element(6,"tui-field-error",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),i.\u0275\u0275text(9," Details "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"div",2)(11,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().submitReport()}),i.\u0275\u0275text(12," Submit Report "),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",t.formGroup),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",t.reportOptions?i.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),i.\u0275\u0275advance(9),i.\u0275\u0275property("disabled",t.formGroup.invalid)}}const $p=function(){return{label:"Report this question",size:"m"}};let Wp=(()=>{class e{constructor(t,r){this.reportQuestionService=t,this.notificationsService=r,this.open=!1,this.openChange=new i.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=Xf.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Xf.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(oc),i.\u0275\u0275directiveInject(pt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,Ai,13,7,"ng-template",0),i.\u0275\u0275listener("tuiDialogChange",function(s){return r.toggleDialog(s)})),2&t&&i.\u0275\u0275property("tuiDialogOptions",i.\u0275\u0275pureFunction0(2,$p))("tuiDialog",r.open)},directives:[as.iu,K.NgControlStatusGroup,K.FormGroupDirective,$i.uJ,$i.OI,K.NgControlStatus,K.FormControlName,Er.gX,Er.qi,k.sg,Er.vK,on.y,fu.Jl,fu.eQ,gt.v0],pipes:[ac.J],styles:[""]}),e})();const sc=function(e){return["../",e]};function Kf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",22)(1,"a",23),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tui-svg",24),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(8,sc,null==t.parentCategory?null:t.parentCategory.pk)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)}}function Yp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function Xp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function Kp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28,29),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Xp,1,0,"tui-svg",30),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(1);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(4,sc,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive)}}function Jf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),i.\u0275\u0275text(3),i.\u0275\u0275template(4,Yp,1,0,"tui-svg",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Kp,4,6,"a",31),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(2);i.\u0275\u0275property("label",t.category.name),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,sc,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.children)}}function Jp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",25),i.\u0275\u0275template(1,Jf,6,8,"tui-opt-group",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.nestedCategories)}}function Qp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",34),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Zp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Qp,2,2,"button",33),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function Qf(e,n){if(1&e&&i.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",t.currentQuestionId)}}function Zf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275element(1,"tui-marker-icon",37),i.\u0275\u0275elementStart(2,"h1",38),i.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const qp=function(){return["../../../"]},eg=function(){return["../../../goal"]};let tg=(()=>{class e{constructor(t,r,o,s,c,p){this.route=t,this.uqjService=r,this.difficultyService=o,this.courseService=s,this.categoryService=c,this.userStatsService=p,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new zp.w}ngOnInit(){this.difficulty=this.route.snapshot.queryParamMap.get("difficulty"),this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((r,o)=>o.parent?r:[...r,{category:o,children:t.filter(s=>s.parent===o.pk).map(s=>({category:s,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var o,s;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=t.find(M=>this.categoryId===M.pk),this.parentCategory=t.find(M=>this.category.parent===M.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserStatsByCategory(this.categoryId),p=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),m=this.difficultyService.getDifficulties(),C=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,tf.D)([p,m,c,C]).subscribe(([M,_,G,ne])=>{this.uqjs=N.shuffle(M),this.difficulties=_,this.userStats=G,this.categoryUserSuccessRate=ne.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,r){var o,s;this.difficulty=t,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=N.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const r=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",o=this.userStats.find(s=>s.difficulty===r);this.userSuccessRate=o?o.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(s=>s.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(nf.O),i.\u0275\u0275directiveInject(Yf.G),i.\u0275\u0275directiveInject(pe.N),i.\u0275\u0275directiveInject(Eo.H),i.\u0275\u0275directiveInject(Gp.U))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:37,vars:42,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),i.\u0275\u0275text(5," Back to course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"div",3)(7,"a",4),i.\u0275\u0275text(8," Back to goals "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(9,Kf,4,10,"div",5),i.\u0275\u0275elementStart(10,"tui-hosted-dropdown",6)(11,"button",7),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(13,Jp,2,1,"ng-template",null,8,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(15,"p",9),i.\u0275\u0275text(16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"p",10),i.\u0275\u0275text(18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"tui-select",11),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(s,r.include_solved)}),i.\u0275\u0275pipe(20,"stringifyTuiDataList"),i.\u0275\u0275text(21," Choose a level of difficulty "),i.\u0275\u0275template(22,Zp,2,1,"tui-data-list",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"tui-checkbox-labeled",13),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(r.difficulty,s)}),i.\u0275\u0275text(24," Include Solved "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(25,"div",14)(26,"button",15),i.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),i.\u0275\u0275text(27," Report "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(28,"button",16),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(29," Previous Question "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(30,"button",17),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(31," Next Question "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(32,"div",18),i.\u0275\u0275template(33,Qf,1,1,"app-problem-view",19),i.\u0275\u0275template(34,Zf,4,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(36,"app-problem-report-modal",21),i.\u0275\u0275listener("openChange",function(s){return r.reportQuestionModal=s}),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(14),s=i.\u0275\u0275reference(35);let c;i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(40,qp)),i.\u0275\u0275advance(3),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(41,eg)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentCategory),i.\u0275\u0275advance(1),i.\u0275\u0275property("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(c=null==r.category?null:r.category.name)&&void 0!==c?c:"Category Name"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*r.categorySuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.difficulty)("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(20,36,r.difficulties,0,1):""),i.\u0275\u0275advance(4),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.include_solved),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[ic.k,gt.v0,te.yS,k.O5,ln.V,Ii.P,Da.o1,Er.qi,k.sg,Er.Rs,Er.vK,te.Od,$i.uJ,$i.OI,ve.sz,K.NgControlStatus,K.NgModel,ve.be,Er.gX,Wl.p,K.DefaultValueAccessor,rc.z,gn.B,Wp],pipes:[ac.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),uc=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getGoal(t){const r=this.apiService.getURL("goal",t);return this.http.get(r).pipe((0,Tr.K)(this.apiService.handleError("Unable to fetch goal.")))}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,Tr.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const r=this.apiService.getURL("goal");return this.http.post(r,t).pipe((0,Tr.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const r=this.apiService.getURL("goal-item");return this.http.post(r,t).pipe((0,Tr.K)(this.apiService.handleError("Unable to create goal item.")))}getSuggestions(){const t=this.apiService.getURL("goal","suggestions");return this.http.get(t).pipe((0,Tr.K)(this.apiService.handleError("Unable to fetch goal suggestions.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(is.eN),i.\u0275\u0275inject(Ls.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const fs=e=>`Solve ${e.number_of_questions} ${e.difficulty} questions from ${e.category_name}`;var Zu=f(71764),qf=f(72243);f(95489),f(2836),f(65063),f(97739);const nd=["tuiProgressBar",""],rg=["tuiProgressLabel",""],ig=[[["progress"]],[["tui-progress-circle"]],"*"],og=["progress","tui-progress-circle","*"];let rd=(()=>{let e=class{constructor(){this.size="m"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(t,r){2&t&&(i.\u0275\u0275attribute("data-size",r.size),i.\u0275\u0275styleProp("--tui-progress-color",r.color))},inputs:{size:"size",color:"color"},attrs:nd,decls:0,vars:0,template:function(t,r){},styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;color:var(--tui-progress-color,currentColor);background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear;background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size='m'][_nghost-%COMP%]{height:1.5rem}[data-size='s'][_nghost-%COMP%]{border-radius:var(--tui-radius-xs);height:.5rem}[data-size='s'][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size='s'][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,Ve.gn)([(0,i.Input)(),(0,i.HostBinding)("style.--tui-progress-color")],e.prototype,"color",void 0),(0,Ve.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-size"),(0,mt.TH)()],e.prototype,"size",void 0),e})(),sg=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["label","tuiProgressLabel",""]],attrs:rg,ngContentSelectors:og,decls:4,vars:0,consts:[[1,"t-label"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(ig),i.\u0275\u0275projection(0),i.\u0275\u0275projection(1,1),i.\u0275\u0275elementStart(2,"span",0),i.\u0275\u0275projection(3,2),i.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),e})(),cg=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,ls.Ih]]}),e})();function fg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Remaining Time: ",t.getRelativeTime(t.goal.end_date)," ")}}const dg=function(e){return["..","practice","category",e]},hg=function(e){return{difficulty:e}};function pg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",13),i.\u0275\u0275text(1," Start Practice "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(2,dg,t.category))("queryParams",i.\u0275\u0275pureFunction1(4,hg,t.difficulty))}}function gg(e,n){1&e&&i.\u0275\u0275element(0,"tui-marker-icon",14)}function vg(e,n){1&e&&i.\u0275\u0275element(0,"tui-marker-icon",15)}function mg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"li",7)(1,"div",8)(2,"div",9),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,pg,2,6,"a",10),i.\u0275\u0275template(5,gg,1,0,"tui-marker-icon",11),i.\u0275\u0275template(6,vg,1,0,"tui-marker-icon",12),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate3(" ",r.getGoalItemString(t)," (Solved ",t.progress," / ",t.number_of_questions,") "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.progress<t.number_of_questions&&!r.goal.is_finished),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.progress>=t.number_of_questions),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.progress<t.number_of_questions&&r.goal.is_finished)}}const yg=function(e){return[e]};let lc=(()=>{class e{constructor(){Zu.extend(qf)}getGoalItemString(t){return fs(t)}getRelativeTime(t){return Zu(t).fromNow(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-island"]],inputs:{goal:"goal"},decls:11,vars:9,consts:[[1,"shadow"],["tuiProgressLabel","",1,"w-full"],["tuiProgressBar","",3,"max","value"],[4,"ngIf"],[1,"tui-list","tui-space_left-3"],["class","tui-list__item",4,"ngFor","ngForOf"],["tuiButton","","size","s","appearance","outline",1,"tui-space_top-3",3,"routerLink"],[1,"tui-list__item"],[1,"flex","space-x-3"],[1,"leading-8"],["tuiButton","","size","s","appearance","flat",3,"routerLink","queryParams",4,"ngIf"],["src","tuiIconCheckCircleLarge","mode","success","size","xs",4,"ngIf"],["src","tuiIconCloseCircleLarge","mode","error","size","xs",4,"ngIf"],["tuiButton","","size","s","appearance","flat",3,"routerLink","queryParams"],["src","tuiIconCheckCircleLarge","mode","success","size","xs"],["src","tuiIconCloseCircleLarge","mode","error","size","xs"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-island",0),i.\u0275\u0275text(1," Progress: "),i.\u0275\u0275elementStart(2,"label",1),i.\u0275\u0275text(3),i.\u0275\u0275element(4,"progress",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,fg,2,1,"div",3),i.\u0275\u0275text(6," Tasks: "),i.\u0275\u0275elementStart(7,"ul",4),i.\u0275\u0275template(8,mg,7,6,"li",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"a",6),i.\u0275\u0275text(10,"View Stats"),i.\u0275\u0275elementEnd()()),2&t&&(i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate2(" ",r.goal.progress," / ",r.goal.number_of_questions," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("max",r.goal.number_of_questions)("value",r.goal.progress),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.goal.is_finished),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",r.goal.goal_items),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(7,yg,r.goal.id)))},directives:[zo.h,sg,rd,k.O5,k.sg,gt.v0,te.yS,gn.B],styles:[".tui-list__item[_ngcontent-%COMP%]:before{top:.75rem}"]}),e})();function ad(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275element(1,"app-goal-island",7),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("goal",t)}}function sd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6),i.\u0275\u0275element(1,"app-goal-island",7),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("goal",t)}}let xg=(()=>{class e{constructor(t){this.goalService=t}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.activeGoals=t.filter(r=>!r.is_finished),this.completedGoals=t.filter(r=>r.is_finished)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:10,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[1,"flex","tui-space_top-6"],[1,"tui-text_h3","tui-col_stretch","flex-grow"],["tuiButton","","size","m","routerLink","create"],["class","tui-space_vertical-3",4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_top-3"],[1,"tui-space_vertical-3"],[3,"goal"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),i.\u0275\u0275text(3," Active Goals "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"a",3),i.\u0275\u0275text(5,"Create a new goal"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,ad,2,1,"div",4),i.\u0275\u0275elementStart(7,"h3",5),i.\u0275\u0275text(8," Completed Goals "),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,sd,2,1,"div",4),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(6),i.\u0275\u0275property("ngForOf",r.activeGoals),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",r.completedGoals))},directives:[gt.v0,te.yS,k.sg,lc],styles:[""]}),e})();class Ha{static createGoalForm(){return(new K.FormBuilder).group({end_date:new K.FormControl(ht.TU.currentLocal(),[K.Validators.required]),end_time:new K.FormControl(ht.qD.currentLocal(),[K.Validators.required]),goal_items:new K.FormArray([Ha.createGoalItemForm()],[K.Validators.required])})}static createGoalFormFromGoal(n){const t=new Date(n.end_date);return(new K.FormBuilder).group({end_date:new K.FormControl(ht.TU.fromLocalNativeDate(t),[K.Validators.required]),end_time:new K.FormControl(ht.qD.fromLocalNativeDate(t),[K.Validators.required]),goal_items:new K.FormArray(n.goal_items.map(Ha.createGoalItemFormFromGoalItem),[K.Validators.required])})}static createGoalItemForm(){return(new K.FormBuilder).group({category:new K.FormControl("",[K.Validators.required]),difficulty:new K.FormControl("",[K.Validators.required]),number_of_questions:new K.FormControl("",[K.Validators.required])})}static createGoalItemFormFromGoalItem(n){return(new K.FormBuilder).group({category:new K.FormControl(n.category,[K.Validators.required]),difficulty:new K.FormControl(n.difficulty,[K.Validators.required]),number_of_questions:new K.FormControl(n.number_of_questions,[K.Validators.required])})}static formatGoalFormData(n,t){return{course_id:t,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static formatGoalItemFormData(n,t){return Object.assign({goal:t},n.value)}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function Cg(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(t))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function wg(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Sg(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",8),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Tg(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function Eg(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMonthChange(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,Tg,3,1,"div",10)}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===t.items.length)}}const Pg=["*",[["input"]]],Ig=["*","input"],Ag=[{provide:Mi.KZ,useExisting:(0,i.forwardRef)(()=>hc)},{provide:fr.cU,deps:[[new i.Optional,new i.Self,K.NgControl],[new i.Optional,fr.HF]],useFactory:(e,n)=>(0,Uu.q7)(e,n)},{provide:La.M$,useExisting:(0,i.forwardRef)(()=>hc)},Kl.Sm];let hc=(()=>{let e=class extends La.F9{constructor(t,r,o,s,c,p,m,C,M,_,G){super(t,r,G),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=p,this.textfieldSize=m,this.dateFormat=C,this.dateSeparator=M,this.dateTexts$=_,this.valueTransformer=G,this.month=null,this.textMaskOptions={mask:Mf(this.dateFormat,this.dateSeparator),pipe:np(this),guide:!1},this.min=ht.K1,this.max=ht.Oy,this.disabledItemHandler=ii.Iy,this.markerHandler=$o.zE,this.items=[],this.defaultActiveYearMonth=ht.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,su.U)(ne=>(0,ht.Yl)(ne[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Tf.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:r,activeItem:o}=this;return o?String(o):t?t.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?us.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(r=>r.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new ha.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,Yu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==ht.ek?null:ht.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,r){return(0,Na.Hm)(t,r,(o,s)=>o.daySame(s))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(K.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Mi.fL),i.\u0275\u0275directiveInject(as.RO),i.\u0275\u0275directiveInject(fr.vk,8),i.\u0275\u0275directiveInject(ve.kI),i.\u0275\u0275directiveInject(ht.P_),i.\u0275\u0275directiveInject(ht.q_),i.\u0275\u0275directiveInject(fr.zf),i.\u0275\u0275directiveInject(fr.HF,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(yr.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(Ag),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Ig,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Pg),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)}),i.\u0275\u0275template(1,Cg,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,wg,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Sg,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Eg,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,5,r.filler$)),i.\u0275\u0275advance(6),i.\u0275\u0275property("polymorpheus",r.type)}},directives:[Da.o1,Ra.Ls,yr.yc,yr.B1,Va.n,ve.D9,Xo.hd,Ii.P,ha.GL,Fs,pa.A,k.O5,ln.V],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Ve.gn)([(0,i.ViewChild)(yr.yc)],e.prototype,"textfield",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"min",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"max",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"markerHandler",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"items",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,Ve.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Ve.gn)([(0,Ve.fM)(0,(0,i.Optional)()),(0,Ve.fM)(0,(0,i.Self)()),(0,Ve.fM)(0,(0,i.Inject)(K.NgControl)),(0,Ve.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ve.fM)(2,(0,i.Inject)(i.Injector)),(0,Ve.fM)(3,(0,i.Inject)(Mi.fL)),(0,Ve.fM)(4,(0,i.Inject)(as.RO)),(0,Ve.fM)(5,(0,i.Optional)()),(0,Ve.fM)(5,(0,i.Inject)(fr.vk)),(0,Ve.fM)(6,(0,i.Inject)(ve.kI)),(0,Ve.fM)(7,(0,i.Inject)(ht.P_)),(0,Ve.fM)(8,(0,i.Inject)(ht.q_)),(0,Ve.fM)(9,(0,i.Inject)(fr.zf)),(0,Ve.fM)(10,(0,i.Optional)()),(0,Ve.fM)(10,(0,i.Inject)(fr.HF))],e),e})();var hd;let Bs=hd=class extends Xl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};Bs.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(Bs)))(t||Bs)}}(),Bs.\u0275dir=i.\u0275\u0275defineDirective({type:Bs,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:ao.S0,useExisting:(0,i.forwardRef)(()=>hd)}]),i.\u0275\u0275InheritDefinitionFeature]});let Og=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Xo.QA,ha.wq,pa.Z,ar,Ii.E,ln.j,Da.jh,yr.KW,Va.S,Ra.WD,ve.cn]]}),e})();var ds=f(27670),pd=f(60390);function kg(e,n){if(1&e&&i.\u0275\u0275element(0,"div",3),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275property("content",t)}}function Lg(e,n){1&e&&i.\u0275\u0275projection(0,2)}const Ng=["*",[["input"]],[["","polymorpheus-outlet",""]]],Rg=function(e,n,t,r,o){return[e,n,t,r,o]};var u;let P=u=class extends La.F9{constructor(n,t,r,o){super(n,t),this.numberFormat=r,this.isIOS=o,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(s,c,p,m)=>({mask:(0,ds.EC)({allowNegative:s,decimalLimit:p,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,ds.YT)(this.numberFormat)}),pipe:(0,ds.qs)("always"===c?p:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,m,s,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;t.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(n.preventDefault(),r.selectionStart++)}onValueChange(n){if((0,ds.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,ds.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if($o.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const r=Math.min(this.max,Math.max(this.min,t));this.updateValue(r),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const r=Math.abs(n)%1>0;let o="always"===this.decimal||r?this.precision:0;const s=r?(0,pd.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(o=s.length),(0,pd.uf)(n,o,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,ds.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,ds.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var j;P.\u0275fac=function(n){return new(n||P)(i.\u0275\u0275directiveInject(K.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ao.HO),i.\u0275\u0275directiveInject(Mi.FA))},P.\u0275cmp=i.\u0275\u0275defineComponent({type:P,selectors:[["tui-input-number"]],contentQueries:function(n,t,r){if(1&n&&i.\u0275\u0275contentQuery(r,ha.r1,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=o.first)}},viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(yr.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.primitiveTextfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("keydown.0",function(o){return t.onZero(o)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Mi.KZ,useExisting:(0,i.forwardRef)(()=>u)},{provide:La.M$,useExisting:(0,i.forwardRef)(()=>u)}]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(i.\u0275\u0275projectionDef(Ng),i.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("focusedChange",function(o){return t.onFocused(o)})("pressedChange",function(o){return t.onPressed(o)})("keydown",function(o){return t.onKeyDown(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275projection(2),i.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275template(4,kg,1,1,"div",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Lg,1,0,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",i.\u0275\u0275pipeBindV(1,13,i.\u0275\u0275pureFunction5(19,Rg,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[yr.yc,yr.B1,Va.n,ve.D9,ve.fy,Xo.hd,k.O5,ha.r1],pipes:[Wo.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),P.ctorParameters=()=>[{type:K.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[K.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:i.Inject,args:[ao.HO]}]},{type:Boolean,decorators:[{type:i.Inject,args:[Mi.FA]}]}],(0,Ve.gn)([(0,i.ViewChild)(yr.yc)],P.prototype,"primitiveTextfield",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],P.prototype,"min",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],P.prototype,"max",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],P.prototype,"decimal",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],P.prototype,"precision",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],P.prototype,"prefix",void 0),(0,Ve.gn)([(0,i.Input)(),(0,mt.TH)()],P.prototype,"postfix",void 0),(0,Ve.gn)([(0,i.ContentChild)(ha.r1)],P.prototype,"polymorpheusValueContent",void 0),(0,Ve.gn)([(0,i.HostListener)("keydown.0",["$event"])],P.prototype,"onZero",null),P=u=(0,Ve.gn)([(0,Ve.fM)(0,(0,i.Optional)()),(0,Ve.fM)(0,(0,i.Self)()),(0,Ve.fM)(0,(0,i.Inject)(K.NgControl)),(0,Ve.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Ve.fM)(2,(0,i.Inject)(ao.HO)),(0,Ve.fM)(3,(0,i.Inject)(Mi.FA))],P);let ee=j=class extends Xl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};ee.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(ee)))(t||ee)}}(),ee.\u0275dir=i.\u0275\u0275defineDirective({type:ee,selectors:[["tui-input-number"]],features:[i.\u0275\u0275ProvidersFeature([{provide:ao.S0,useExisting:(0,i.forwardRef)(()=>j)}]),i.\u0275\u0275InheritDefinitionFeature]});let de=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Xo.QA,Wo.I,yr.KW,ve.cn,Va.S,ha.wq]]}),e})();function _e(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"li",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.goalItemString(t)," ")}}function Me(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",14)(1,"tui-island")(2,"div",15),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div"),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",16),i.\u0275\u0275text(7," Tasks: "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"ul",17),i.\u0275\u0275template(9,_e,2,1,"li",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"button",19),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext().createGoal(s)}),i.\u0275\u0275text(11," Create Goal "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"button",20),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext().setGoal(s)}),i.\u0275\u0275text(13," Modify Goal "),i.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" Recommended Goal ",r+1," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Duration: ",o.getRelativeTime(t.end_date)," "),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",t.goal_items)}}function it(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",27),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t.pk),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function ot(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,it,2,2,"button",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.categories)}}function ft(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",27),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Et(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,ft,2,2,"button",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function Bt(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"tui-select",22),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Category "),i.\u0275\u0275template(5,ot,2,1,"tui-data-list",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tui-field-error",24),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",5)(8,"tui-select",22),i.\u0275\u0275pipe(9,"stringifyTuiDataList"),i.\u0275\u0275text(10," Difficulty "),i.\u0275\u0275template(11,Et,2,1,"tui-data-list",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",24),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",5)(14,"tui-input-number",24),i.\u0275\u0275text(15," Number of questions "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",24),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",5)(18,"button",25),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).index;return i.\u0275\u0275nextContext().removeGoalItem(s)}),i.\u0275\u0275text(19," Remove "),i.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.categories?i.\u0275\u0275pipeBind3(3,8,r.categories,"pk","full_name"):"")("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(9,12,r.difficulties,0,1):"")("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions"))}}let nn=(()=>{class e{constructor(t,r,o,s,c,p){this.goalService=t,this.categoryService=r,this.difficultyService=o,this.router=s,this.activatedRoute=c,this.notificationService=p,this.timeOptions=(0,Uu.eN)(),Zu.extend(qf)}ngOnInit(){this.courseId=this.activatedRoute.snapshot.params.courseId,this.goalForm=Ha.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t),this.goalService.getSuggestions().subscribe(t=>this.recommendedGoals=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,r){return t.get(r)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(Ha.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}goalItemString(t){return fs(t)}setGoal(t){this.goalForm=Ha.createGoalFormFromGoal(t)}createGoal(t){this.setGoal(t),this.onSubmit().then()}getRelativeTime(t){return Zu(t).fromNow()}onSubmit(){return function fc(e,n,t,r){return new(t||(t=Promise))(function(s,c){function p(M){try{C(r.next(M))}catch(_){c(_)}}function m(M){try{C(r.throw(M))}catch(_){c(_)}}function C(M){M.done?s(M.value):function o(s){return s instanceof t?s:new t(function(c){c(s)})}(M.value).then(p,m)}C((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){const t=Ha.formatGoalFormData(this.goalForm,this.courseId),r=yield this.goalService.createGoal(t).toPromise();for(const o of this.getGoalItemFormControls()){const s=Ha.formatGoalItemFormData(o,r.id);yield this.goalService.createGoalItem(s).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uc),i.\u0275\u0275directiveInject(Eo.H),i.\u0275\u0275directiveInject(Yf.G),i.\u0275\u0275directiveInject(te.F0),i.\u0275\u0275directiveInject(te.gz),i.\u0275\u0275directiveInject(pt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],decls:24,vars:5,consts:[[1,"tui-container","tui-container_adaptive"],[1,"tui-form__header"],["class","tui-form__row",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[1,"tui-form__row"],[1,"tui-text_bold","tui-text_body-l"],[1,"tui-text_bold","tui-text_body-l","tui-space_top-3"],[1,"tui-list"],["class","tui-list__item",4,"ngFor","ngForOf"],["tuiButton","","size","s",1,"tui-space_top-3",3,"click"],["tuiButton","","size","s","appearance","outline",1,"tui-space_left-3","tui-space_top-3",3,"click"],[1,"tui-list__item"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconMinus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"h2",1),i.\u0275\u0275text(2,"Recommended Goals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Me,14,3,"div",2),i.\u0275\u0275elementStart(4,"form",3),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(5,"h2",1),i.\u0275\u0275text(6,"Create New Goal"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",4)(8,"div",5)(9,"tui-input-date",6),i.\u0275\u0275text(10," End date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",5)(13,"tui-input-time",8),i.\u0275\u0275text(14," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(15,"tui-field-error",9),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(16,"h3",1),i.\u0275\u0275text(17,"Tasks"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(18,Bt,20,16,"div",10),i.\u0275\u0275elementStart(19,"div",11)(20,"button",12),i.\u0275\u0275listener("click",function(){return r.addGoalItem()}),i.\u0275\u0275text(21," Add Another "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(22,"button",13),i.\u0275\u0275text(23," Submit "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",r.recommendedGoals),i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.goalForm),i.\u0275\u0275advance(9),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.getGoalItemFormControls()),i.\u0275\u0275advance(4),i.\u0275\u0275property("disabled",r.goalForm.invalid))},directives:[k.sg,zo.h,gt.v0,K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,hc,Bs,K.NgControlStatus,K.FormControlName,on.y,jr,$i.uJ,$i.OI,K.FormControlDirective,Er.gX,Er.qi,Er.vK,P,ee],pipes:[ac.J],styles:[""]}),e})();var Cn=f(35326);function rn(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t.value()),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.label(t.activeItemIndex))}}let En=(()=>{class e{constructor(){this.activeItemIndex=NaN}values(){return[this.submissionStats.correct,this.submissionStats.partially_correct,this.submissionStats.wrong]}value(){return isNaN(this.activeItemIndex)?this.submissionStats.total:this.values()[this.activeItemIndex]}color(t){return{0:"success",1:"primary",2:"error"}[t]}label(t){return isNaN(t)?"Total":{0:"Correct",1:"Partially Correct",2:"Wrong"}[t]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-submission-chart"]],inputs:{submissionStats:"submissionStats"},decls:3,vars:4,consts:[[3,"value","activeItemIndex","content","colorHandler","activeItemIndexChange"],["content",""]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-ring-chart",0),i.\u0275\u0275listener("activeItemIndexChange",function(s){return r.activeItemIndex=s}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,rn,4,2,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("value",r.values())("activeItemIndex",r.activeItemIndex)("content",o)("colorHandler",r.color)}},directives:[Cn.i],styles:[""]}),e})();function Nn(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",t.text," : ",t.value," ")}}function Xi(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function wi(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div")(1,"div",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275element(4,"progress",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275text(6,"Submission Stats"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",8),i.\u0275\u0275element(8,"app-submission-chart",9)(9,"app-submission-chart",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div",7),i.\u0275\u0275text(11,"Question Stats"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",4),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"div",4),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",4),i.\u0275\u0275text(17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"div",4),i.\u0275\u0275text(19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",7),i.\u0275\u0275text(21,"Types of Error"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(22,Nn,2,2,"div",10),i.\u0275\u0275elementStart(23,"div",7),i.\u0275\u0275text(24,"Error Messages"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(25,Xi,2,1,"div",10),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("Item ",r+1,""),i.\u0275\u0275advance(2),i.\u0275\u0275property("max",o.getGoalItem(t).number_of_questions)("value",o.getGoalItem(t).progress),i.\u0275\u0275advance(4),i.\u0275\u0275property("submissionStats",o.goal.stats[t].submissions),i.\u0275\u0275advance(1),i.\u0275\u0275property("submissionStats",o.goal.stats[t].old_submissions),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Total questions attempt: ",o.goal.stats[t].submissions.total_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Total questions solved: ",o.goal.stats[t].submissions.correct_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Previously questions attempt: ",o.goal.stats[t].old_submissions.total_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Previously questions solved: ",o.goal.stats[t].old_submissions.correct_questions," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",o.errorMessages(t)),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",o.goal.stats[t].submissions.error_messages)}}function Ki(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275text(2,"Goal Results"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275text(4,"Total Progress"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",4),i.\u0275\u0275element(6,"progress",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,wi,26,11,"div",6),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(6),i.\u0275\u0275property("max",t.goal.number_of_questions)("value",t.goal.progress),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.goalItemIds())}}let Fr=(()=>{class e{constructor(t,r){this.goalService=t,this.activatedRoute=r}ngOnInit(){this.goalService.getGoal(this.activatedRoute.snapshot.params.goalId).subscribe(r=>{this.goal=r})}getGoalItem(t){return this.goal.goal_items.find(r=>r.id===t)}goalItemIds(){return Object.keys(this.goal.stats).map(t=>parseInt(t))}errorMessages(t){return Object.entries(this.goal.stats[t].submissions.messages).map(([r,o])=>({text:r,value:o}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uc),i.\u0275\u0275directiveInject(te.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal"]],decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"tui-text_h2","tui-space_top-5"],[1,"tui-text_h3","tui-space_top-5"],[1,"tui-space_top-2"],["tuiProgressBar","",1,"progress",3,"max","value"],[4,"ngFor","ngForOf"],[1,"tui-text_h4","tui-space_top-5"],[1,"tui-space_top-2","flex"],[3,"submissionStats"],["class","tui-space_top-2",4,"ngFor","ngForOf"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Ki,8,3,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.goal)},directives:[k.O5,rd,k.sg,En],styles:[".flex[_ngcontent-%COMP%]{display:flex}"]}),e})();const Ao={Open:"OPEN",Private:"CODE"};let Jo=(()=>{class e{static createCourseForm(){return(new K.FormBuilder).group({name:new K.FormControl("",[K.Validators.required]),description:new K.FormControl("",[K.Validators.required]),url:new K.FormControl("",[K.Validators.required,K.Validators.pattern("(https?://)([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]),date:new K.FormControl(new ht.VR(ht.TU.currentLocal(),ht.TU.currentLocal().append({day:7})),[K.Validators.required]),registrationMode:new K.FormControl("",[K.Validators.required]),registrationCode:new K.FormControl("")},{validator:e.dateValidator})}static formatCourseFormData(t){return{name:t.get("name").value,description:t.get("description").value,url:t.get("url").value,start_date:this.dateToLocal(t.get("date").value.from),end_date:this.dateToLocal(t.get("date").value.to),registration_mode:Ao[t.get("registrationMode").value],registration_code:t.get("registrationCode").value,token:"0",course_id:0}}static dateToLocal(t){return new Date(t.toLocalNativeDate().getTime())}}return e.dateValidator=n=>{const t=n.get("date").value;return t.from&&t.to?null:{forbiddenDateRange:!0}},e})();function gd(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",17),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.registrationModes)}}let Tv=(()=>{class e{constructor(t,r,o){this.courseService=t,this.notificationsService=r,this.router=o,this.registrationModes=["Open","Private"],this.formGroup=Jo.createCourseForm()}onSubmit(){this.courseService.createCourse(Jo.formatCourseFormData(this.formGroup)).subscribe(t=>{this.notificationsService.show("Course created successfully!",{status:"success"}).subscribe(),this.router.navigate(["/course",t.id])})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(pe.N),i.\u0275\u0275directiveInject(pt.$F),i.\u0275\u0275directiveInject(te.F0))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-create"]],features:[i.\u0275\u0275ProvidersFeature([{provide:fr.Z4,useValue:{pattern:"Please enter a valid url starting with http:// or https://"}}])],decls:37,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name"],["formControlName","description"],["formControlName","url","type","url"],["formControlName","url"],["formControlName","date"],["formControlName","registrationMode"],["tuiTextfield","","placeholder","Select registration mode"],[3,"items",4,"tuiDataList"],[1,"tui-form__field-note"],["formControlName","registrationCode"],[1,"tui-form__buttons"],["tuiButton","","size","m","type","submit",1,"tui-form__button",3,"disabled"],["tuiButton","","type","button","appearance","flat","size","m","routerLink","/",1,"tui-form__button"],[3,"items"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275text(3," Create a Course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Course Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-text-area",5),i.\u0275\u0275text(10,"Course Description"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",3)(13,"tui-input",6),i.\u0275\u0275text(14,"Course URL"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(15,"tui-field-error",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",3)(17,"tui-input-date-range",8),i.\u0275\u0275text(18,"Course Date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(19,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",3)(21,"tui-select",9),i.\u0275\u0275text(22," Registration Mode "),i.\u0275\u0275element(23,"input",10),i.\u0275\u0275template(24,gd,1,1,"tui-data-list-wrapper",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",9),i.\u0275\u0275elementStart(26,"div",12),i.\u0275\u0275text(27,"Everyone can join an open course, while only the ones with the access code can join a private course. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(28,"div",3)(29,"tui-input",13),i.\u0275\u0275text(30,"Access Code"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(31,"tui-field-error",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(32,"div",14)(33,"button",15),i.\u0275\u0275text(34," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(35,"button",16),i.\u0275\u0275text(36," Cancel "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formGroup),i.\u0275\u0275advance(32),i.\u0275\u0275property("disabled",r.formGroup.invalid))},directives:[K.\u0275NgNoValidate,K.NgControlStatusGroup,K.FormGroupDirective,le.K3,le.wU,K.NgControlStatus,K.FormControlName,on.y,fu.Jl,fu.eQ,cu,dn,$i.uJ,$i.OI,yr.MB,Er.gX,Po.eC,gt.v0,te.rH],styles:[""]}),e})();const Ev=[{path:"",component:tt,canActivate:[Y.a]},{path:"create",component:Tv,canActivate:[Y.a]},{path:":courseId",component:tp,canActivate:[Y.a]},{path:":courseId/register",component:kt,canActivate:[Y.a]},{path:":courseId/new-event",component:Wf,canActivate:[Y.a]},{path:":courseId/new-event/:eventId",component:Wf,canActivate:[Y.a]},{path:":courseId/event/:eventId",component:sf,canActivate:[Y.a]},{path:":courseId/problem/:id",component:rc.z,canActivate:[Y.a]},{path:":courseId/event/:eventId/problem/:id",component:rc.z,canActivate:[Y.a]},{path:":courseId/practice/category/:categoryId",component:tg,canActivate:[Y.a]},{path:":courseId/goal",component:xg,canActivate:[Y.a]},{path:":courseId/goal/create",component:nn,canActivate:[Y.a]},{path:":courseId/goal/:goalId",component:Fr,canActivate:[Y.a]}];let Pv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[te.Bz.forChild(Ev)],te.Bz]}),e})();var Iv=f(16995);f(41065),f(35379),f(18583),f(92198);let Rv=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[k.ez,Ii.E]]}),e})();var Dv=f(96560),Fv=f(22079),Vv=f(70228),Bv=f(38333),Hv=f(91730),jv=f(76112),zv=f(76457),Gv=f(68476),Uv=f(43567);let $v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[Ns,pe.N,gf],imports:[[k.ez,Hv.J,Pv,K.FormsModule,Iv._l,jv.D,zv.ProblemsModule,K.ReactiveFormsModule,Uv.l,Xo.QA,Rr.iK,Yl.A,xf.Jm,gt.fN,ar,Wl.s,Er.pc,Po.zX,as.up,Dv.S,on.C,ke.p,Da.jh,zl.$H,Og,Uf,le.Qf,de,Fp,zo.y,ln.j,Fv.dS,gn.z,Vv.z,_t.Hi,cg,Cn.R,$i.Jy,Gv.T,Rv,Ii.E,Io.jz,pn.$$,Go.d3,Bv.qE.forRoot(),fu.U1,ve.cn]]}),e})()},71066:(E,W,f)=>{var g,v,T;T="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,g=[f(29610),f(58259),W],void 0!==(v=function(O,A,D){T.Backbone=function(S,T,y,I){var O=S.Backbone,A=Array.prototype.slice;T.VERSION="1.4.1",T.$=I,T.noConflict=function(){return S.Backbone=O,this},T.emulateHTTP=!1,T.emulateJSON=!1;var k,D=T.Events={},B=/\s+/,Y=function(N,U,re,xe,Qe){var wt,Xe=0;if(re&&"object"==typeof re)for((void 0!==xe&&"context"in Qe&&void 0===Qe.context&&(Qe.context=xe),wt=y.keys(re));Xe<wt.length;Xe++)U=Y(N,U,wt[Xe],re[wt[Xe]],Qe);else if(re&&B.test(re))for(wt=re.split(B);Xe<wt.length;Xe++)U=N(U,wt[Xe],xe,Qe);else U=N(U,re,xe,Qe);return U};D.on=function(N,U,re){return this._events=Y(te,this._events||{},N,U,{context:re,ctx:this,listening:k}),k&&((this._listeners||(this._listeners={}))[k.id]=k,k.interop=!1),this},D.listenTo=function(N,U,re){if(!N)return this;var xe=N._listenId||(N._listenId=y.uniqueId("l")),Qe=this._listeningTo||(this._listeningTo={}),Xe=k=Qe[xe];Xe||(this._listenId||(this._listenId=y.uniqueId("l")),Xe=k=Qe[xe]=new K(this,N));var wt=ue(N,U,re,this);if(k=void 0,wt)throw wt;return Xe.interop&&Xe.on(U,re),this};var te=function(N,U,re,xe){if(re){var Qe=N[U]||(N[U]=[]),Xe=xe.context,wt=xe.ctx,Ft=xe.listening;Ft&&Ft.count++,Qe.push({callback:re,context:Xe,ctx:Xe||wt,listening:Ft})}return N},ue=function(N,U,re,xe){try{N.on(U,re,xe)}catch(Qe){return Qe}};D.off=function(N,U,re){return this._events?(this._events=Y(i,this._events,N,U,{context:re,listeners:this._listeners}),this):this},D.stopListening=function(N,U,re){var xe=this._listeningTo;if(!xe)return this;for(var Qe=N?[N._listenId]:y.keys(xe),Xe=0;Xe<Qe.length;Xe++){var wt=xe[Qe[Xe]];if(!wt)break;wt.obj.off(U,re,this),wt.interop&&wt.off(U,re)}return y.isEmpty(xe)&&(this._listeningTo=void 0),this};var i=function(N,U,re,xe){if(N){var Ft,Qe=xe.context,Xe=xe.listeners,wt=0;if(!U&&!Qe&&!re){for(Ft=y.keys(Xe);wt<Ft.length;wt++)Xe[Ft[wt]].cleanup();return}for(Ft=U?[U]:y.keys(N);wt<Ft.length;wt++){var Vt=N[U=Ft[wt]];if(!Vt)break;for(var xn=[],In=0;In<Vt.length;In++){var mn=Vt[In];if(re&&re!==mn.callback&&re!==mn.callback._callback||Qe&&Qe!==mn.context)xn.push(mn);else{var pr=mn.listening;pr&&pr.off(U,re)}}xn.length?N[U]=xn:delete N[U]}return N}};D.once=function(N,U,re){var xe=Y(ae,{},N,U,this.off.bind(this));return"string"==typeof N&&null==re&&(U=void 0),this.on(xe,U,re)},D.listenToOnce=function(N,U,re){var xe=Y(ae,{},U,re,this.stopListening.bind(this,N));return this.listenTo(N,xe)};var ae=function(N,U,re,xe){if(re){var Qe=N[U]=y.once(function(){xe(U,Qe),re.apply(this,arguments)});Qe._callback=re}return N};D.trigger=function(N){if(!this._events)return this;for(var U=Math.max(0,arguments.length-1),re=Array(U),xe=0;xe<U;xe++)re[xe]=arguments[xe+1];return Y(pe,this._events,N,void 0,re),this};var pe=function(N,U,re,xe){if(N){var Qe=N[U],Xe=N.all;Qe&&Xe&&(Xe=Xe.slice()),Qe&&le(Qe,xe),Xe&&le(Xe,[U].concat(xe))}return N},le=function(N,U){var re,xe=-1,Qe=N.length,Xe=U[0],wt=U[1],Ft=U[2];switch(U.length){case 0:for(;++xe<Qe;)(re=N[xe]).callback.call(re.ctx);return;case 1:for(;++xe<Qe;)(re=N[xe]).callback.call(re.ctx,Xe);return;case 2:for(;++xe<Qe;)(re=N[xe]).callback.call(re.ctx,Xe,wt);return;case 3:for(;++xe<Qe;)(re=N[xe]).callback.call(re.ctx,Xe,wt,Ft);return;default:for(;++xe<Qe;)(re=N[xe]).callback.apply(re.ctx,U);return}},K=function(N,U){this.id=N._listenId,this.listener=N,this.obj=U,this.interop=!0,this.count=0,this._events=void 0};K.prototype.on=D.on,K.prototype.off=function(N,U){var re;this.interop?(this._events=Y(i,this._events,N,U,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},K.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},D.bind=D.on,D.unbind=D.off,y.extend(T,D);var ve=T.Model=function(N,U){var re=N||{};U||(U={}),this.preinitialize.apply(this,arguments),this.cid=y.uniqueId(this.cidPrefix),this.attributes={},U.collection&&(this.collection=U.collection),U.parse&&(re=this.parse(re,U)||{});var xe=y.result(this,"defaults");re=y.defaults(y.extend({},xe,re),xe),this.set(re,U),this.changed={},this.initialize.apply(this,arguments)};y.extend(ve.prototype,D,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(N){return y.clone(this.attributes)},sync:function(){return T.sync.apply(this,arguments)},get:function(N){return this.attributes[N]},escape:function(N){return y.escape(this.get(N))},has:function(N){return null!=this.get(N)},matches:function(N){return!!y.iteratee(N,this)(this.attributes)},set:function(N,U,re){if(null==N)return this;var xe;if("object"==typeof N?(xe=N,re=U):(xe={})[N]=U,re||(re={}),!this._validate(xe,re))return!1;var Qe=re.unset,Xe=re.silent,wt=[],Ft=this._changing;this._changing=!0,Ft||(this._previousAttributes=y.clone(this.attributes),this.changed={});var Vt=this.attributes,xn=this.changed,In=this._previousAttributes;for(var mn in xe)y.isEqual(Vt[mn],U=xe[mn])||wt.push(mn),y.isEqual(In[mn],U)?delete xn[mn]:xn[mn]=U,Qe?delete Vt[mn]:Vt[mn]=U;if(this.idAttribute in xe){var pr=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,pr,re)}if(!Xe){wt.length&&(this._pending=re);for(var or=0;or<wt.length;or++)this.trigger("change:"+wt[or],this,Vt[wt[or]],re)}if(Ft)return this;if(!Xe)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(N,U){return this.set(N,void 0,y.extend({},U,{unset:!0}))},clear:function(N){var U={};for(var re in this.attributes)U[re]=void 0;return this.set(U,y.extend({},N,{unset:!0}))},hasChanged:function(N){return null==N?!y.isEmpty(this.changed):y.has(this.changed,N)},changedAttributes:function(N){if(!N)return!!this.hasChanged()&&y.clone(this.changed);var xe,U=this._changing?this._previousAttributes:this.attributes,re={};for(var Qe in N){var Xe=N[Qe];y.isEqual(U[Qe],Xe)||(re[Qe]=Xe,xe=!0)}return!!xe&&re},previous:function(N){return null!=N&&this._previousAttributes?this._previousAttributes[N]:null},previousAttributes:function(){return y.clone(this._previousAttributes)},fetch:function(N){N=y.extend({parse:!0},N);var U=this,re=N.success;return N.success=function(xe){var Qe=N.parse?U.parse(xe,N):xe;if(!U.set(Qe,N))return!1;re&&re.call(N.context,U,xe,N),U.trigger("sync",U,xe,N)},un(this,N),this.sync("read",this,N)},save:function(N,U,re){var xe;null==N||"object"==typeof N?(xe=N,re=U):(xe={})[N]=U;var Qe=(re=y.extend({validate:!0,parse:!0},re)).wait;if(xe&&!Qe){if(!this.set(xe,re))return!1}else if(!this._validate(xe,re))return!1;var Xe=this,wt=re.success,Ft=this.attributes;re.success=function(In){Xe.attributes=Ft;var mn=re.parse?Xe.parse(In,re):In;if(Qe&&(mn=y.extend({},xe,mn)),mn&&!Xe.set(mn,re))return!1;wt&&wt.call(re.context,Xe,In,re),Xe.trigger("sync",Xe,In,re)},un(this,re),xe&&Qe&&(this.attributes=y.extend({},Ft,xe));var Vt=this.isNew()?"create":re.patch?"patch":"update";"patch"===Vt&&!re.attrs&&(re.attrs=xe);var xn=this.sync(Vt,this,re);return this.attributes=Ft,xn},destroy:function(N){N=N?y.clone(N):{};var U=this,re=N.success,xe=N.wait,Qe=function(){U.stopListening(),U.trigger("destroy",U,U.collection,N)};N.success=function(wt){xe&&Qe(),re&&re.call(N.context,U,wt,N),U.isNew()||U.trigger("sync",U,wt,N)};var Xe=!1;return this.isNew()?y.defer(N.success):(un(this,N),Xe=this.sync("delete",this,N)),xe||Qe(),Xe},url:function(){var N=y.result(this,"urlRoot")||y.result(this.collection,"url")||vn();if(this.isNew())return N;var U=this.get(this.idAttribute);return N.replace(/[^\/]$/,"$&/")+encodeURIComponent(U)},parse:function(N,U){return N},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(N){return this._validate({},y.extend({},N,{validate:!0}))},_validate:function(N,U){if(!U.validate||!this.validate)return!0;N=y.extend({},this.attributes,N);var re=this.validationError=this.validate(N,U)||null;return!re||(this.trigger("invalid",this,re,y.extend(U,{validationError:re})),!1)}});var we=T.Collection=function(N,U){U||(U={}),this.preinitialize.apply(this,arguments),U.model&&(this.model=U.model),void 0!==U.comparator&&(this.comparator=U.comparator),this._reset(),this.initialize.apply(this,arguments),N&&this.reset(N,y.extend({silent:!0},U))},ke={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},Ue=function(N,U,re){re=Math.min(Math.max(re,0),N.length);var Xe,xe=Array(N.length-re),Qe=U.length;for(Xe=0;Xe<xe.length;Xe++)xe[Xe]=N[Xe+re];for(Xe=0;Xe<Qe;Xe++)N[Xe+re]=U[Xe];for(Xe=0;Xe<xe.length;Xe++)N[Xe+Qe+re]=xe[Xe]};y.extend(we.prototype,D,{model:ve,preinitialize:function(){},initialize:function(){},toJSON:function(N){return this.map(function(U){return U.toJSON(N)})},sync:function(){return T.sync.apply(this,arguments)},add:function(N,U){return this.set(N,y.extend({merge:!1},U,b))},remove:function(N,U){U=y.extend({},U);var re=!y.isArray(N);N=re?[N]:N.slice();var xe=this._removeModels(N,U);return!U.silent&&xe.length&&(U.changes={added:[],merged:[],removed:xe},this.trigger("update",this,U)),re?xe[0]:xe},set:function(N,U){if(null!=N){(U=y.extend({},ke,U)).parse&&!this._isModel(N)&&(N=this.parse(N,U)||[]);var re=!y.isArray(N);N=re?[N]:N.slice();var xe=U.at;null!=xe&&(xe=+xe),xe>this.length&&(xe=this.length),xe<0&&(xe+=this.length+1);var Un,Ot,Qe=[],Xe=[],wt=[],Ft=[],Vt={},xn=U.add,In=U.merge,mn=U.remove,pr=!1,or=this.comparator&&null==xe&&!1!==U.sort,oi=y.isString(this.comparator)?this.comparator:null;for(Ot=0;Ot<N.length;Ot++){var Jn=this.get(Un=N[Ot]);if(Jn){if(In&&Un!==Jn){var ur=this._isModel(Un)?Un.attributes:Un;U.parse&&(ur=Jn.parse(ur,U)),Jn.set(ur,U),wt.push(Jn),or&&!pr&&(pr=Jn.hasChanged(oi))}Vt[Jn.cid]||(Vt[Jn.cid]=!0,Qe.push(Jn)),N[Ot]=Jn}else xn&&(Un=N[Ot]=this._prepareModel(Un,U))&&(Xe.push(Un),this._addReference(Un,U),Vt[Un.cid]=!0,Qe.push(Un))}if(mn){for(Ot=0;Ot<this.length;Ot++)Vt[(Un=this.models[Ot]).cid]||Ft.push(Un);Ft.length&&this._removeModels(Ft,U)}var Mr=!1;if(Qe.length&&!or&&xn&&mn?(Mr=this.length!==Qe.length||y.some(this.models,function(Cr,xr){return Cr!==Qe[xr]}),this.models.length=0,Ue(this.models,Qe,0),this.length=this.models.length):Xe.length&&(or&&(pr=!0),Ue(this.models,Xe,null==xe?this.length:xe),this.length=this.models.length),pr&&this.sort({silent:!0}),!U.silent){for(Ot=0;Ot<Xe.length;Ot++)null!=xe&&(U.index=xe+Ot),(Un=Xe[Ot]).trigger("add",Un,this,U);(pr||Mr)&&this.trigger("sort",this,U),(Xe.length||Ft.length||wt.length)&&(U.changes={added:Xe,removed:Ft,merged:wt},this.trigger("update",this,U))}return re?N[0]:N}},reset:function(N,U){U=U?y.clone(U):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],U);return U.previousModels=this.models,this._reset(),N=this.add(N,y.extend({silent:!0},U)),U.silent||this.trigger("reset",this,U),N},push:function(N,U){return this.add(N,y.extend({at:this.length},U))},pop:function(N){var U=this.at(this.length-1);return this.remove(U,N)},unshift:function(N,U){return this.add(N,y.extend({at:0},U))},shift:function(N){var U=this.at(0);return this.remove(U,N)},slice:function(){return A.apply(this.models,arguments)},get:function(N){if(null!=N)return this._byId[N]||this._byId[this.modelId(this._isModel(N)?N.attributes:N,N.idAttribute)]||N.cid&&this._byId[N.cid]},has:function(N){return null!=this.get(N)},at:function(N){return N<0&&(N+=this.length),this.models[N]},where:function(N,U){return this[U?"find":"filter"](N)},findWhere:function(N){return this.where(N,!0)},sort:function(N){var U=this.comparator;if(!U)throw new Error("Cannot sort a set without a comparator");N||(N={});var re=U.length;return y.isFunction(U)&&(U=U.bind(this)),1===re||y.isString(U)?this.models=this.sortBy(U):this.models.sort(U),N.silent||this.trigger("sort",this,N),this},pluck:function(N){return this.map(N+"")},fetch:function(N){var U=(N=y.extend({parse:!0},N)).success,re=this;return N.success=function(xe){re[N.reset?"reset":"set"](xe,N),U&&U.call(N.context,re,xe,N),re.trigger("sync",re,xe,N)},un(this,N),this.sync("read",this,N)},create:function(N,U){var re=(U=U?y.clone(U):{}).wait;if(!(N=this._prepareModel(N,U)))return!1;re||this.add(N,U);var xe=this,Qe=U.success;return U.success=function(Xe,wt,Ft){re&&xe.add(Xe,Ft),Qe&&Qe.call(Ft.context,Xe,wt,Ft)},N.save(null,U),N},parse:function(N,U){return N},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(N,U){return N[U||this.model.prototype.idAttribute||"id"]},values:function(){return new Ge(this,Re)},keys:function(){return new Ge(this,Ne)},entries:function(){return new Ge(this,tt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(N,U){return this._isModel(N)?(N.collection||(N.collection=this),N):((U=U?y.clone(U):{}).collection=this,(re=this.model.prototype?new this.model(N,U):this.model(N,U)).validationError?(this.trigger("invalid",this,re.validationError,U),!1):re);var re},_removeModels:function(N,U){for(var re=[],xe=0;xe<N.length;xe++){var Qe=this.get(N[xe]);if(Qe){var Xe=this.indexOf(Qe);this.models.splice(Xe,1),this.length--,delete this._byId[Qe.cid];var wt=this.modelId(Qe.attributes,Qe.idAttribute);null!=wt&&delete this._byId[wt],U.silent||(U.index=Xe,Qe.trigger("remove",Qe,this,U)),re.push(Qe),this._removeReference(Qe,U)}}return re},_isModel:function(N){return N instanceof ve},_addReference:function(N,U){this._byId[N.cid]=N;var re=this.modelId(N.attributes,N.idAttribute);null!=re&&(this._byId[re]=N),N.on("all",this._onModelEvent,this)},_removeReference:function(N,U){delete this._byId[N.cid];var re=this.modelId(N.attributes,N.idAttribute);null!=re&&delete this._byId[re],this===N.collection&&delete N.collection,N.off("all",this._onModelEvent,this)},_onModelEvent:function(N,U,re,xe){if(U){if(("add"===N||"remove"===N)&&re!==this)return;if("destroy"===N&&this.remove(U,xe),"changeId"===N){var Qe=this.modelId(U.previousAttributes(),U.idAttribute),Xe=this.modelId(U.attributes,U.idAttribute);null!=Qe&&delete this._byId[Qe],null!=Xe&&(this._byId[Xe]=U)}}this.trigger.apply(this,arguments)}});var at="function"==typeof Symbol&&Symbol.iterator;at&&(we.prototype[at]=we.prototype.values);var Ge=function(N,U){this._collection=N,this._kind=U,this._index=0},Re=1,Ne=2,tt=3;at&&(Ge.prototype[at]=function(){return this}),Ge.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var U,N=this._collection.at(this._index);if(this._index++,this._kind===Re)U=N;else{var re=this._collection.modelId(N.attributes,N.idAttribute);U=this._kind===Ne?re:[re,N]}return{value:U,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Je=T.View=function(N){this.cid=y.uniqueId("view"),this.preinitialize.apply(this,arguments),y.extend(this,y.pick(N,_t)),this._ensureElement(),this.initialize.apply(this,arguments)},pt=/^(\S+)\s*(.*)$/,_t=["model","collection","el","id","attributes","className","tagName","events"];y.extend(Je.prototype,D,{tagName:"div",$:function(N){return this.$el.find(N)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(N){return this.undelegateEvents(),this._setElement(N),this.delegateEvents(),this},_setElement:function(N){this.$el=N instanceof T.$?N:T.$(N),this.el=this.$el[0]},delegateEvents:function(N){if(N||(N=y.result(this,"events")),!N)return this;for(var U in this.undelegateEvents(),N){var re=N[U];if(y.isFunction(re)||(re=this[re]),re){var xe=U.match(pt);this.delegate(xe[1],xe[2],re.bind(this))}}return this},delegate:function(N,U,re){return this.$el.on(N+".delegateEvents"+this.cid,U,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(N,U,re){return this.$el.off(N+".delegateEvents"+this.cid,U,re),this},_createElement:function(N){return document.createElement(N)},_ensureElement:function(){if(this.el)this.setElement(y.result(this,"el"));else{var N=y.extend({},y.result(this,"attributes"));this.id&&(N.id=y.result(this,"id")),this.className&&(N.class=y.result(this,"className")),this.setElement(this._createElement(y.result(this,"tagName"))),this._setAttributes(N)}},_setAttributes:function(N){this.$el.attr(N)}});var on=function(N,U,re,xe){y.each(re,function(Qe,Xe){U[Xe]&&(N.prototype[Xe]=function(N,U,re,xe){switch(U){case 1:return function(){return N[re](this[xe])};case 2:return function(Qe){return N[re](this[xe],Qe)};case 3:return function(Qe,Xe){return N[re](this[xe],gn(Qe,this),Xe)};case 4:return function(Qe,Xe,wt){return N[re](this[xe],gn(Qe,this),Xe,wt)};default:return function(){var Qe=A.call(arguments);return Qe.unshift(this[xe]),N[re].apply(N,Qe)}}}(U,Qe,Xe,xe))})},gn=function(N,U){return y.isFunction(N)?N:y.isObject(N)&&!U._isModel(N)?Vn(N):y.isString(N)?function(re){return re.get(N)}:N},Vn=function(N){var U=y.matches(N);return function(re){return U(re.attributes)}};y.each([[we,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[ve,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(N){var U=N[0],re=N[1],xe=N[2];U.mixin=function(Qe){var Xe=y.reduce(y.functions(Qe),function(wt,Ft){return wt[Ft]=0,wt},{});on(U,Qe,Xe,xe)},on(U,y,re,xe)}),T.sync=function(N,U,re){var xe=dr[N];y.defaults(re||(re={}),{emulateHTTP:T.emulateHTTP,emulateJSON:T.emulateJSON});var Qe={type:xe,dataType:"json"};if(re.url||(Qe.url=y.result(U,"url")||vn()),null==re.data&&U&&("create"===N||"update"===N||"patch"===N)&&(Qe.contentType="application/json",Qe.data=JSON.stringify(re.attrs||U.toJSON(re))),re.emulateJSON&&(Qe.contentType="application/x-www-form-urlencoded",Qe.data=Qe.data?{model:Qe.data}:{}),re.emulateHTTP&&("PUT"===xe||"DELETE"===xe||"PATCH"===xe)){Qe.type="POST",re.emulateJSON&&(Qe.data._method=xe);var Xe=re.beforeSend;re.beforeSend=function(Vt){if(Vt.setRequestHeader("X-HTTP-Method-Override",xe),Xe)return Xe.apply(this,arguments)}}"GET"!==Qe.type&&!re.emulateJSON&&(Qe.processData=!1);var wt=re.error;re.error=function(Vt,xn,In){re.textStatus=xn,re.errorThrown=In,wt&&wt.call(re.context,Vt,xn,In)};var Ft=re.xhr=T.ajax(y.extend(Qe,re));return U.trigger("request",U,Ft,re),Ft};var dr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};T.ajax=function(){return T.$.ajax.apply(T.$,arguments)};var Gn=T.Router=function(N){N||(N={}),this.preinitialize.apply(this,arguments),N.routes&&(this.routes=N.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},We=/\((.*?)\)/g,qe=/(\(\?)?:\w+/g,ct=/\*\w+/g,Ct=/[\-{}\[\]+?.,\\\^$|#\s]/g;y.extend(Gn.prototype,D,{preinitialize:function(){},initialize:function(){},route:function(N,U,re){y.isRegExp(N)||(N=this._routeToRegExp(N)),y.isFunction(U)&&(re=U,U=""),re||(re=this[U]);var xe=this;return T.history.route(N,function(Qe){var Xe=xe._extractParameters(N,Qe);!1!==xe.execute(re,Xe,U)&&(xe.trigger.apply(xe,["route:"+U].concat(Xe)),xe.trigger("route",U,Xe),T.history.trigger("route",xe,U,Xe))}),this},execute:function(N,U,re){N&&N.apply(this,U)},navigate:function(N,U){return T.history.navigate(N,U),this},_bindRoutes:function(){if(this.routes){this.routes=y.result(this,"routes");for(var N,U=y.keys(this.routes);null!=(N=U.pop());)this.route(N,this.routes[N])}},_routeToRegExp:function(N){return N=N.replace(Ct,"\\$&").replace(We,"(?:$1)?").replace(qe,function(U,re){return re?U:"([^/?]+)"}).replace(ct,"([^?]*?)"),new RegExp("^"+N+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(N,U){var re=N.exec(U).slice(1);return y.map(re,function(xe,Qe){return Qe===re.length-1?xe||null:xe?decodeURIComponent(xe):null})}});var kt=T.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},pn=/^[#\/]|\s+$/g,Rt=/^\/+|\/+$/g,hr=/#.*$/;kt.started=!1,y.extend(kt.prototype,D,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(N){return decodeURI(N.replace(/%25/g,"%2525"))},getSearch:function(){var N=this.location.href.replace(/#.*/,"").match(/\?.+/);return N?N[0]:""},getHash:function(N){var U=(N||this).location.href.match(/#(.*)$/);return U?U[1]:""},getPath:function(){var N=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===N.charAt(0)?N.slice(1):N},getFragment:function(N){return null==N&&(N=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),N.replace(pn,"")},start:function(N){if(kt.started)throw new Error("Backbone.history has already been started");if(kt.started=!0,this.options=y.extend({root:"/"},this.options,N),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Rt,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var U=this.root.slice(0,-1)||"/";return this.location.replace(U+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,xe=re.insertBefore(this.iframe,re.firstChild).contentWindow;xe.document.open(),xe.document.close(),xe.location.hash="#"+this.fragment}var Qe=window.addEventListener||function(Xe,wt){return attachEvent("on"+Xe,wt)};if(this._usePushState?Qe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Qe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var N=window.removeEventListener||function(U,re){return detachEvent("on"+U,re)};this._usePushState?N("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&N("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),kt.started=!1},route:function(N,U){this.handlers.unshift({route:N,callback:U})},checkUrl:function(N){var U=this.getFragment();if(U===this.fragment&&this.iframe&&(U=this.getHash(this.iframe.contentWindow)),U===this.fragment)return!1;this.iframe&&this.navigate(U),this.loadUrl()},loadUrl:function(N){return!!this.matchRoot()&&(N=this.fragment=this.getFragment(N),y.some(this.handlers,function(U){if(U.route.test(N))return U.callback(N),!0}))},navigate:function(N,U){if(!kt.started)return!1;(!U||!0===U)&&(U={trigger:!!U}),N=this.getFragment(N||"");var re=this.root;(""===N||"?"===N.charAt(0))&&(re=re.slice(0,-1)||"/");var xe=re+N;N=N.replace(hr,"");var Qe=this.decodeFragment(N);if(this.fragment!==Qe){if(this.fragment=Qe,this._usePushState)this.history[U.replace?"replaceState":"pushState"]({},document.title,xe);else{if(!this._wantsHashChange)return this.location.assign(xe);if(this._updateHash(this.location,N,U.replace),this.iframe&&N!==this.getHash(this.iframe.contentWindow)){var Xe=this.iframe.contentWindow;U.replace||(Xe.document.open(),Xe.document.close()),this._updateHash(Xe.location,N,U.replace)}}if(U.trigger)return this.loadUrl(N)}},_updateHash:function(N,U,re){if(re){var xe=N.href.replace(/(javascript:|#).*$/,"");N.replace(xe+"#"+U)}else N.hash="#"+U}}),T.history=new kt;ve.extend=we.extend=Gn.extend=Je.extend=kt.extend=function(N,U){var xe,re=this;return xe=N&&y.has(N,"constructor")?N.constructor:function(){return re.apply(this,arguments)},y.extend(xe,re,U),xe.prototype=y.create(re.prototype,N),xe.prototype.constructor=xe,xe.__super__=re.prototype,xe};var vn=function(){throw new Error('A "url" property or function must be specified')},un=function(N,U){var re=U.error;U.error=function(xe){re&&re.call(U.context,N,xe,U),N.trigger("error",N,xe,U)}};return T}(T,D,O,A)}.apply(W,g))&&(E.exports=v)},59695:(E,W,f)=>{E.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(E,W,f)=>{"use strict";var g=f(45760),v=f(67365);E.exports={run:function S(I){var O="greedy"===I.graph().acyclicer?v(I,function A(D){return function(B){return D.edge(B).weight}}(I)):function T(I){var O=[],A={},D={};return g.forEach(I.nodes(),function B(k){g.has(D,k)||(D[k]=!0,A[k]=!0,g.forEach(I.outEdges(k),function(Y){g.has(A,Y.w)?O.push(Y):B(Y.w)}),delete A[k])}),O}(I);g.forEach(O,function(D){var B=I.edge(D);I.removeEdge(D),B.forwardName=D.name,B.reversed=!0,I.setEdge(D.w,D.v,B,g.uniqueId("rev"))})},undo:function y(I){g.forEach(I.edges(),function(O){var A=I.edge(O);if(A.reversed){I.removeEdge(O);var D=A.forwardName;delete A.reversed,delete A.forwardName,I.setEdge(O.w,O.v,A,D)}})}}},79999:(E,W,f)=>{var g=f(45760),v=f(11510);function T(y,I,O,A,D,B){var Y=D[I][B-1],te=v.addDummyNode(y,"border",{width:0,height:0,rank:B,borderType:I},O);D[I][B]=te,y.setParent(te,A),Y&&y.setEdge(Y,te,{weight:1})}E.exports=function S(y){g.forEach(y.children(),function I(O){var A=y.children(O),D=y.node(O);if(A.length&&g.forEach(A,I),g.has(D,"minRank")){D.borderLeft=[],D.borderRight=[];for(var B=D.minRank,k=D.maxRank+1;B<k;++B)T(y,"borderLeft","_bl",O,D,B),T(y,"borderRight","_br",O,D,B)}})}},83870:(E,W,f)=>{"use strict";var g=f(45760);function T(B){g.forEach(B.nodes(),function(k){y(B.node(k))}),g.forEach(B.edges(),function(k){y(B.edge(k))})}function y(B){var k=B.width;B.width=B.height,B.height=k}function O(B){B.y=-B.y}function D(B){var k=B.x;B.x=B.y,B.y=k}E.exports={adjust:function v(B){var k=B.graph().rankdir.toLowerCase();("lr"===k||"rl"===k)&&T(B)},undo:function S(B){var k=B.graph().rankdir.toLowerCase();("bt"===k||"rl"===k)&&function I(B){g.forEach(B.nodes(),function(k){O(B.node(k))}),g.forEach(B.edges(),function(k){var Y=B.edge(k);g.forEach(Y.points,O),g.has(Y,"y")&&O(Y)})}(B),("lr"===k||"rl"===k)&&(function A(B){g.forEach(B.nodes(),function(k){D(B.node(k))}),g.forEach(B.edges(),function(k){var Y=B.edge(k);g.forEach(Y.points,D),g.has(Y,"x")&&D(Y)})}(B),T(B))}}},3226:E=>{function W(){var v={};v._next=v._prev=v,this._sentinel=v}function f(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function g(v,S){if("_next"!==v&&"_prev"!==v)return S}E.exports=W,W.prototype.dequeue=function(){var v=this._sentinel,S=v._prev;if(S!==v)return f(S),S},W.prototype.enqueue=function(v){var S=this._sentinel;v._prev&&v._next&&f(v),v._next=S._next,S._next._prev=v,S._next=v,v._prev=S},W.prototype.toString=function(){for(var v=[],S=this._sentinel,T=S._prev;T!==S;)v.push(JSON.stringify(T,g)),T=T._prev;return"["+v.join(", ")+"]"}},71914:(E,W,f)=>{var g=f(45760),v=f(11510),S=f(36456).Graph;E.exports={debugOrdering:function T(y){var I=v.buildLayerMatrix(y),O=new S({compound:!0,multigraph:!0}).setGraph({});return g.forEach(y.nodes(),function(A){O.setNode(A,{label:A}),O.setParent(A,"layer"+y.node(A).rank)}),g.forEach(y.edges(),function(A){O.setEdge(A.v,A.w,{},A.name)}),g.forEach(I,function(A,D){O.setNode("layer"+D,{rank:"same"}),g.reduce(A,function(k,Y){return O.setEdge(k,Y,{style:"invis"}),Y})}),O}}},36456:(E,W,f)=>{var g;try{g=f(85510)}catch(v){}g||(g=window.graphlib),E.exports=g},67365:(E,W,f)=>{var g=f(45760),v=f(36456).Graph,S=f(3226);E.exports=function y(B,k){if(B.nodeCount()<=1)return[];var Y=function A(B,k){var Y=new v,te=0,ue=0;g.forEach(B.nodes(),function(pe){Y.setNode(pe,{v:pe,in:0,out:0})}),g.forEach(B.edges(),function(pe){var le=Y.edge(pe.v,pe.w)||0,K=k(pe);Y.setEdge(pe.v,pe.w,le+K),ue=Math.max(ue,Y.node(pe.v).out+=K),te=Math.max(te,Y.node(pe.w).in+=K)});var i=g.range(ue+te+3).map(function(){return new S}),ae=te+1;return g.forEach(Y.nodes(),function(pe){D(i,ae,Y.node(pe))}),{graph:Y,buckets:i,zeroIdx:ae}}(B,k||T),te=function I(B,k,Y){for(var ae,te=[],ue=k[k.length-1],i=k[0];B.nodeCount();){for(;ae=i.dequeue();)O(B,k,Y,ae);for(;ae=ue.dequeue();)O(B,k,Y,ae);if(B.nodeCount())for(var pe=k.length-2;pe>0;--pe)if(ae=k[pe].dequeue()){te=te.concat(O(B,k,Y,ae,!0));break}}return te}(Y.graph,Y.buckets,Y.zeroIdx);return g.flatten(g.map(te,function(ue){return B.outEdges(ue.v,ue.w)}),!0)};var T=g.constant(1);function O(B,k,Y,te,ue){var i=ue?[]:void 0;return g.forEach(B.inEdges(te.v),function(ae){var pe=B.edge(ae),le=B.node(ae.v);ue&&i.push({v:ae.v,w:ae.w}),le.out-=pe,D(k,Y,le)}),g.forEach(B.outEdges(te.v),function(ae){var pe=B.edge(ae),K=B.node(ae.w);K.in-=pe,D(k,Y,K)}),B.removeNode(te.v),i}function D(B,k,Y){Y.out?Y.in?B[Y.out-Y.in+k].enqueue(Y):B[B.length-1].enqueue(Y):B[0].enqueue(Y)}},14850:(E,W,f)=>{"use strict";var g=f(45760),v=f(12234),S=f(91496),T=f(94124),y=f(11510).normalizeRanks,I=f(60162),O=f(11510).removeEmptyRanks,A=f(1230),D=f(79999),B=f(83870),k=f(32974),Y=f(78226),te=f(11510),ue=f(36456).Graph;E.exports=function i(We,qe){var ct=qe&&qe.debugTiming?te.time:te.notime;ct("layout",function(){var Ct=ct("  buildLayoutGraph",function(){return function Ge(We){var qe=new ue({multigraph:!0,compound:!0}),ct=Gn(We.graph());return qe.setGraph(g.merge({},K,dr(ct,le),g.pick(ct,ve))),g.forEach(We.nodes(),function(Ct){var kt=Gn(We.node(Ct));qe.setNode(Ct,g.defaults(dr(kt,we),ke)),qe.setParent(Ct,We.parent(Ct))}),g.forEach(We.edges(),function(Ct){var kt=Gn(We.edge(Ct));qe.setEdge(Ct,g.merge({},Ue,dr(kt,b),g.pick(kt,at)))}),qe}(We)});ct("  runLayout",function(){!function ae(We,qe){qe("    makeSpaceForEdgeLabels",function(){!function Re(We){var qe=We.graph();qe.ranksep/=2,g.forEach(We.edges(),function(ct){var Ct=We.edge(ct);Ct.minlen*=2,"c"!==Ct.labelpos.toLowerCase()&&("TB"===qe.rankdir||"BT"===qe.rankdir?Ct.width+=Ct.labeloffset:Ct.height+=Ct.labeloffset)})}(We)}),qe("    removeSelfEdges",function(){!function Vn(We){g.forEach(We.edges(),function(qe){if(qe.v===qe.w){var ct=We.node(qe.v);ct.selfEdges||(ct.selfEdges=[]),ct.selfEdges.push({e:qe,label:We.edge(qe)}),We.removeEdge(qe)}})}(We)}),qe("    acyclic",function(){v.run(We)}),qe("    nestingGraph.run",function(){A.run(We)}),qe("    rank",function(){T(te.asNonCompoundGraph(We))}),qe("    injectEdgeLabelProxies",function(){!function Ne(We){g.forEach(We.edges(),function(qe){var ct=We.edge(qe);if(ct.width&&ct.height){var Ct=We.node(qe.v),kt=We.node(qe.w);te.addDummyNode(We,"edge-proxy",{rank:(kt.rank-Ct.rank)/2+Ct.rank,e:qe},"_ep")}})}(We)}),qe("    removeEmptyRanks",function(){O(We)}),qe("    nestingGraph.cleanup",function(){A.cleanup(We)}),qe("    normalizeRanks",function(){y(We)}),qe("    assignRankMinMax",function(){!function tt(We){var qe=0;g.forEach(We.nodes(),function(ct){var Ct=We.node(ct);Ct.borderTop&&(Ct.minRank=We.node(Ct.borderTop).rank,Ct.maxRank=We.node(Ct.borderBottom).rank,qe=g.max(qe,Ct.maxRank))}),We.graph().maxRank=qe}(We)}),qe("    removeEdgeLabelProxies",function(){!function Je(We){g.forEach(We.nodes(),function(qe){var ct=We.node(qe);"edge-proxy"===ct.dummy&&(We.edge(ct.e).labelRank=ct.rank,We.removeNode(qe))})}(We)}),qe("    normalize.run",function(){S.run(We)}),qe("    parentDummyChains",function(){I(We)}),qe("    addBorderSegments",function(){D(We)}),qe("    order",function(){k(We)}),qe("    insertSelfEdges",function(){!function $n(We){var qe=te.buildLayerMatrix(We);g.forEach(qe,function(ct){var Ct=0;g.forEach(ct,function(kt,pn){var Rt=We.node(kt);Rt.order=pn+Ct,g.forEach(Rt.selfEdges,function(hr){te.addDummyNode(We,"selfedge",{width:hr.label.width,height:hr.label.height,rank:Rt.rank,order:pn+ ++Ct,e:hr.e,label:hr.label},"_se")}),delete Rt.selfEdges})})}(We)}),qe("    adjustCoordinateSystem",function(){B.adjust(We)}),qe("    position",function(){Y(We)}),qe("    positionSelfEdges",function(){!function Bn(We){g.forEach(We.nodes(),function(qe){var ct=We.node(qe);if("selfedge"===ct.dummy){var Ct=We.node(ct.e.v),kt=Ct.x+Ct.width/2,pn=Ct.y,Rt=ct.x-kt,hr=Ct.height/2;We.setEdge(ct.e,ct.label),We.removeNode(qe),ct.label.points=[{x:kt+2*Rt/3,y:pn-hr},{x:kt+5*Rt/6,y:pn-hr},{x:kt+Rt,y:pn},{x:kt+5*Rt/6,y:pn+hr},{x:kt+2*Rt/3,y:pn+hr}],ct.label.x=ct.x,ct.label.y=ct.y}})}(We)}),qe("    removeBorderNodes",function(){!function gn(We){g.forEach(We.nodes(),function(qe){if(We.children(qe).length){var ct=We.node(qe),Ct=We.node(ct.borderTop),kt=We.node(ct.borderBottom),pn=We.node(g.last(ct.borderLeft)),Rt=We.node(g.last(ct.borderRight));ct.width=Math.abs(Rt.x-pn.x),ct.height=Math.abs(kt.y-Ct.y),ct.x=pn.x+ct.width/2,ct.y=Ct.y+ct.height/2}}),g.forEach(We.nodes(),function(qe){"border"===We.node(qe).dummy&&We.removeNode(qe)})}(We)}),qe("    normalize.undo",function(){S.undo(We)}),qe("    fixupEdgeLabelCoords",function(){!function gt(We){g.forEach(We.edges(),function(qe){var ct=We.edge(qe);if(g.has(ct,"x"))switch(("l"===ct.labelpos||"r"===ct.labelpos)&&(ct.width-=ct.labeloffset),ct.labelpos){case"l":ct.x-=ct.width/2+ct.labeloffset;break;case"r":ct.x+=ct.width/2+ct.labeloffset}})}(We)}),qe("    undoCoordinateSystem",function(){B.undo(We)}),qe("    translateGraph",function(){!function pt(We){var qe=Number.POSITIVE_INFINITY,ct=0,Ct=Number.POSITIVE_INFINITY,kt=0,pn=We.graph(),Rt=pn.marginx||0,hr=pn.marginy||0;function ki(vn){var un=vn.x,N=vn.y,U=vn.width,re=vn.height;qe=Math.min(qe,un-U/2),ct=Math.max(ct,un+U/2),Ct=Math.min(Ct,N-re/2),kt=Math.max(kt,N+re/2)}g.forEach(We.nodes(),function(vn){ki(We.node(vn))}),g.forEach(We.edges(),function(vn){var un=We.edge(vn);g.has(un,"x")&&ki(un)}),qe-=Rt,Ct-=hr,g.forEach(We.nodes(),function(vn){var un=We.node(vn);un.x-=qe,un.y-=Ct}),g.forEach(We.edges(),function(vn){var un=We.edge(vn);g.forEach(un.points,function(N){N.x-=qe,N.y-=Ct}),g.has(un,"x")&&(un.x-=qe),g.has(un,"y")&&(un.y-=Ct)}),pn.width=ct-qe+Rt,pn.height=kt-Ct+hr}(We)}),qe("    assignNodeIntersects",function(){!function _t(We){g.forEach(We.edges(),function(qe){var pn,Rt,ct=We.edge(qe),Ct=We.node(qe.v),kt=We.node(qe.w);ct.points?(pn=ct.points[0],Rt=ct.points[ct.points.length-1]):(ct.points=[],pn=kt,Rt=Ct),ct.points.unshift(te.intersectRect(Ct,pn)),ct.points.push(te.intersectRect(kt,Rt))})}(We)}),qe("    reversePoints",function(){!function on(We){g.forEach(We.edges(),function(qe){var ct=We.edge(qe);ct.reversed&&ct.points.reverse()})}(We)}),qe("    acyclic.undo",function(){v.undo(We)})}(Ct,ct)}),ct("  updateInputGraph",function(){!function pe(We,qe){g.forEach(We.nodes(),function(ct){var Ct=We.node(ct),kt=qe.node(ct);Ct&&(Ct.x=kt.x,Ct.y=kt.y,qe.children(ct).length&&(Ct.width=kt.width,Ct.height=kt.height))}),g.forEach(We.edges(),function(ct){var Ct=We.edge(ct),kt=qe.edge(ct);Ct.points=kt.points,g.has(kt,"x")&&(Ct.x=kt.x,Ct.y=kt.y)}),We.graph().width=qe.graph().width,We.graph().height=qe.graph().height}(We,Ct)})})};var le=["nodesep","edgesep","ranksep","marginx","marginy"],K={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ve=["acyclicer","ranker","rankdir","align"],we=["width","height"],ke={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],Ue={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},at=["labelpos"];function dr(We,qe){return g.mapValues(g.pick(We,qe),Number)}function Gn(We){var qe={};return g.forEach(We,function(ct,Ct){qe[Ct.toLowerCase()]=ct}),qe}},45760:(E,W,f)=>{var g;try{g={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(v){}g||(g=window._),E.exports=g},1230:(E,W,f)=>{var g=f(45760),v=f(11510);function T(A,D,B,k,Y,te,ue){var i=A.children(ue);if(i.length){var ae=v.addBorderNode(A,"_bt"),pe=v.addBorderNode(A,"_bb"),le=A.node(ue);A.setParent(ae,ue),le.borderTop=ae,A.setParent(pe,ue),le.borderBottom=pe,g.forEach(i,function(K){T(A,D,B,k,Y,te,K);var ve=A.node(K),we=ve.borderTop?ve.borderTop:K,ke=ve.borderBottom?ve.borderBottom:K,b=ve.borderTop?k:2*k,Ue=we!==ke?1:Y-te[ue]+1;A.setEdge(ae,we,{weight:b,minlen:Ue,nestingEdge:!0}),A.setEdge(ke,pe,{weight:b,minlen:Ue,nestingEdge:!0})}),A.parent(ue)||A.setEdge(D,ae,{weight:0,minlen:Y+te[ue]})}else ue!==D&&A.setEdge(D,ue,{weight:0,minlen:B})}E.exports={run:function S(A){var D=v.addDummyNode(A,"root",{},"_root"),B=function y(A){var D={};function B(k,Y){var te=A.children(k);te&&te.length&&g.forEach(te,function(ue){B(ue,Y+1)}),D[k]=Y}return g.forEach(A.children(),function(k){B(k,1)}),D}(A),k=g.max(g.values(B))-1,Y=2*k+1;A.graph().nestingRoot=D,g.forEach(A.edges(),function(ue){A.edge(ue).minlen*=Y});var te=function I(A){return g.reduce(A.edges(),function(D,B){return D+A.edge(B).weight},0)}(A)+1;g.forEach(A.children(),function(ue){T(A,D,Y,te,k,B,ue)}),A.graph().nodeRankFactor=Y},cleanup:function O(A){var D=A.graph();A.removeNode(D.nestingRoot),delete D.nestingRoot,g.forEach(A.edges(),function(B){A.edge(B).nestingEdge&&A.removeEdge(B)})}}},91496:(E,W,f)=>{"use strict";var g=f(45760),v=f(11510);E.exports={run:function S(I){I.graph().dummyChains=[],g.forEach(I.edges(),function(O){!function T(I,O){var A=O.v,D=I.node(A).rank,B=O.w,k=I.node(B).rank,Y=O.name,te=I.edge(O),ue=te.labelRank;if(k!==D+1){var i,ae,pe;for(I.removeEdge(O),pe=0,++D;D<k;++pe,++D)te.points=[],i=v.addDummyNode(I,"edge",ae={width:0,height:0,edgeLabel:te,edgeObj:O,rank:D},"_d"),D===ue&&(ae.width=te.width,ae.height=te.height,ae.dummy="edge-label",ae.labelpos=te.labelpos),I.setEdge(A,i,{weight:te.weight},Y),0===pe&&I.graph().dummyChains.push(i),A=i;I.setEdge(A,B,{weight:te.weight},Y)}}(I,O)})},undo:function y(I){g.forEach(I.graph().dummyChains,function(O){var B,A=I.node(O),D=A.edgeLabel;for(I.setEdge(A.edgeObj,D);A.dummy;)B=I.successors(O)[0],I.removeNode(O),D.points.push({x:A.x,y:A.y}),"edge-label"===A.dummy&&(D.x=A.x,D.y=A.y,D.width=A.width,D.height=A.height),A=I.node(O=B)})}}},33034:(E,W,f)=>{var g=f(45760);E.exports=function v(S,T,y){var O,I={};g.forEach(y,function(A){for(var B,k,D=S.parent(A);D;){if((B=S.parent(D))?(k=I[B],I[B]=D):(k=O,O=D),k&&k!==D)return void T.setEdge(k,D);D=B}})}},81323:(E,W,f)=>{var g=f(45760);E.exports=function v(S,T){return g.map(T,function(y){var I=S.inEdges(y);if(I.length){var O=g.reduce(I,function(A,D){var B=S.edge(D),k=S.node(D.v);return{sum:A.sum+B.weight*k.order,weight:A.weight+B.weight}},{sum:0,weight:0});return{v:y,barycenter:O.sum/O.weight,weight:O.weight}}return{v:y}})}},1686:(E,W,f)=>{var g=f(45760),v=f(36456).Graph;E.exports=function S(y,I,O){var A=function T(y){for(var I;y.hasNode(I=g.uniqueId("_root")););return I}(y),D=new v({compound:!0}).setGraph({root:A}).setDefaultNodeLabel(function(B){return y.node(B)});return g.forEach(y.nodes(),function(B){var k=y.node(B),Y=y.parent(B);(k.rank===I||k.minRank<=I&&I<=k.maxRank)&&(D.setNode(B),D.setParent(B,Y||A),g.forEach(y[O](B),function(te){var ue=te.v===B?te.w:te.v,i=D.edge(ue,B),ae=g.isUndefined(i)?0:i.weight;D.setEdge(ue,B,{weight:y.edge(te).weight+ae})}),g.has(k,"minRank")&&D.setNode(B,{borderLeft:k.borderLeft[I],borderRight:k.borderRight[I]}))}),D}},18796:(E,W,f)=>{"use strict";var g=f(45760);function S(T,y,I){for(var O=g.zipObject(I,g.map(I,function(te,ue){return ue})),A=g.flatten(g.map(y,function(te){return g.sortBy(g.map(T.outEdges(te),function(ue){return{pos:O[ue.w],weight:T.edge(ue).weight}}),"pos")}),!0),D=1;D<I.length;)D<<=1;var B=2*D-1;D-=1;var k=g.map(new Array(B),function(){return 0}),Y=0;return g.forEach(A.forEach(function(te){var ue=te.pos+D;k[ue]+=te.weight;for(var i=0;ue>0;)ue%2&&(i+=k[ue+1]),k[ue=ue-1>>1]+=te.weight;Y+=te.weight*i})),Y}E.exports=function v(T,y){for(var I=0,O=1;O<y.length;++O)I+=S(T,y[O-1],y[O]);return I}},32974:(E,W,f)=>{"use strict";var g=f(45760),v=f(49402),S=f(18796),T=f(61057),y=f(1686),I=f(33034),O=f(36456).Graph,A=f(11510);function B(te,ue,i){return g.map(ue,function(ae){return y(te,ae,i)})}function k(te,ue){var i=new O;g.forEach(te,function(ae){var pe=ae.graph().root,le=T(ae,pe,i,ue);g.forEach(le.vs,function(K,ve){ae.node(K).order=ve}),I(ae,i,le.vs)})}function Y(te,ue){g.forEach(ue,function(i){g.forEach(i,function(ae,pe){te.node(ae).order=pe})})}E.exports=function D(te){var ue=A.maxRank(te),i=B(te,g.range(1,ue+1),"inEdges"),ae=B(te,g.range(ue-1,-1,-1),"outEdges"),pe=v(te);Y(te,pe);for(var K,le=Number.POSITIVE_INFINITY,ve=0,we=0;we<4;++ve,++we){k(ve%2?i:ae,ve%4>=2),pe=A.buildLayerMatrix(te);var ke=S(te,pe);ke<le&&(we=0,K=g.cloneDeep(pe),le=ke)}Y(te,K)}},49402:(E,W,f)=>{"use strict";var g=f(45760);E.exports=function v(S){var T={},y=g.filter(S.nodes(),function(B){return!S.children(B).length}),I=g.max(g.map(y,function(B){return S.node(B).rank})),O=g.map(g.range(I+1),function(){return[]}),D=g.sortBy(y,function(B){return S.node(B).rank});return g.forEach(D,function A(B){if(!g.has(T,B)){T[B]=!0;var k=S.node(B);O[k.rank].push(B),g.forEach(S.successors(B),A)}}),O}},83826:(E,W,f)=>{"use strict";var g=f(45760);E.exports=function v(y,I){var O={};return g.forEach(y,function(D,B){var k=O[D.v]={indegree:0,in:[],out:[],vs:[D.v],i:B};g.isUndefined(D.barycenter)||(k.barycenter=D.barycenter,k.weight=D.weight)}),g.forEach(I.edges(),function(D){var B=O[D.v],k=O[D.w];!g.isUndefined(B)&&!g.isUndefined(k)&&(k.indegree++,B.out.push(O[D.w]))}),function S(y){var I=[];function O(B){return function(k){k.merged||(g.isUndefined(k.barycenter)||g.isUndefined(B.barycenter)||k.barycenter>=B.barycenter)&&function T(y,I){var O=0,A=0;y.weight&&(O+=y.barycenter*y.weight,A+=y.weight),I.weight&&(O+=I.barycenter*I.weight,A+=I.weight),y.vs=I.vs.concat(y.vs),y.barycenter=O/A,y.weight=A,y.i=Math.min(I.i,y.i),I.merged=!0}(B,k)}}function A(B){return function(k){k.in.push(B),0==--k.indegree&&y.push(k)}}for(;y.length;){var D=y.pop();I.push(D),g.forEach(D.in.reverse(),O(D)),g.forEach(D.out,A(D))}return g.map(g.filter(I,function(B){return!B.merged}),function(B){return g.pick(B,["vs","i","barycenter","weight"])})}(g.filter(O,function(D){return!D.indegree}))}},61057:(E,W,f)=>{var g=f(45760),v=f(81323),S=f(83826),T=f(93803);E.exports=function y(A,D,B,k){var Y=A.children(D),te=A.node(D),ue=te?te.borderLeft:void 0,i=te?te.borderRight:void 0,ae={};ue&&(Y=g.filter(Y,function(ke){return ke!==ue&&ke!==i}));var pe=v(A,Y);g.forEach(pe,function(ke){if(A.children(ke.v).length){var b=y(A,ke.v,B,k);ae[ke.v]=b,g.has(b,"barycenter")&&function O(A,D){g.isUndefined(A.barycenter)?(A.barycenter=D.barycenter,A.weight=D.weight):(A.barycenter=(A.barycenter*A.weight+D.barycenter*D.weight)/(A.weight+D.weight),A.weight+=D.weight)}(ke,b)}});var le=S(pe,B);!function I(A,D){g.forEach(A,function(B){B.vs=g.flatten(B.vs.map(function(k){return D[k]?D[k].vs:k}),!0)})}(le,ae);var K=T(le,k);if(ue&&(K.vs=g.flatten([ue,K.vs,i],!0),A.predecessors(ue).length)){var ve=A.node(A.predecessors(ue)[0]),we=A.node(A.predecessors(i)[0]);g.has(K,"barycenter")||(K.barycenter=0,K.weight=0),K.barycenter=(K.barycenter*K.weight+ve.order+we.order)/(K.weight+2),K.weight+=2}return K}},93803:(E,W,f)=>{var g=f(45760),v=f(11510);function T(I,O,A){for(var D;O.length&&(D=g.last(O)).i<=A;)O.pop(),I.push(D.vs),A++;return A}E.exports=function S(I,O){var A=v.partition(I,function(ae){return g.has(ae,"barycenter")}),D=A.lhs,B=g.sortBy(A.rhs,function(ae){return-ae.i}),k=[],Y=0,te=0,ue=0;D.sort(function y(I){return function(O,A){return O.barycenter<A.barycenter?-1:O.barycenter>A.barycenter?1:I?A.i-O.i:O.i-A.i}}(!!O)),ue=T(k,B,ue),g.forEach(D,function(ae){ue+=ae.vs.length,k.push(ae.vs),Y+=ae.barycenter*ae.weight,te+=ae.weight,ue=T(k,B,ue)});var i={vs:g.flatten(k,!0)};return te&&(i.barycenter=Y/te,i.weight=te),i}},60162:(E,W,f)=>{var g=f(45760);E.exports=function v(y){var I=function T(y){var I={},O=0;return g.forEach(y.children(),function A(D){var B=O;g.forEach(y.children(D),A),I[D]={low:B,lim:O++}}),I}(y);g.forEach(y.graph().dummyChains,function(O){for(var A=y.node(O),D=A.edgeObj,B=function S(y,I,O,A){var te,ue,D=[],B=[],k=Math.min(I[O].low,I[A].low),Y=Math.max(I[O].lim,I[A].lim);te=O;do{te=y.parent(te),D.push(te)}while(te&&(I[te].low>k||Y>I[te].lim));for(ue=te,te=A;(te=y.parent(te))!==ue;)B.push(te);return{path:D.concat(B.reverse()),lca:ue}}(y,I,D.v,D.w),k=B.path,Y=B.lca,te=0,ue=k[te],i=!0;O!==D.w;){if(A=y.node(O),i){for(;(ue=k[te])!==Y&&y.node(ue).maxRank<A.rank;)te++;ue===Y&&(i=!1)}if(!i){for(;te<k.length-1&&y.node(ue=k[te+1]).minRank<=A.rank;)te++;ue=k[te]}y.setParent(O,ue),O=y.successors(O)[0]}})}},54058:(E,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph,S=f(11510);function T(le,K){var ve={};return g.reduce(K,function we(ke,b){var Ue=0,at=0,Ge=ke.length,Re=g.last(b);return g.forEach(b,function(Ne,tt){var Je=function I(le,K){if(le.node(K).dummy)return g.find(le.predecessors(K),function(ve){return le.node(ve).dummy})}(le,Ne),pt=Je?le.node(Je).order:Ge;(Je||Ne===Re)&&(g.forEach(b.slice(at,tt+1),function(_t){g.forEach(le.predecessors(_t),function(gt){var on=le.node(gt),gn=on.order;(gn<Ue||pt<gn)&&(!on.dummy||!le.node(_t).dummy)&&O(ve,gt,_t)})}),at=tt+1,Ue=pt)}),b}),ve}function y(le,K){var ve={};function we(b,Ue,at,Ge,Re){var Ne;g.forEach(g.range(Ue,at),function(tt){le.node(Ne=b[tt]).dummy&&g.forEach(le.predecessors(Ne),function(Je){var pt=le.node(Je);pt.dummy&&(pt.order<Ge||pt.order>Re)&&O(ve,Je,Ne)})})}return g.reduce(K,function ke(b,Ue){var Ge,at=-1,Re=0;return g.forEach(Ue,function(Ne,tt){if("border"===le.node(Ne).dummy){var Je=le.predecessors(Ne);Je.length&&(Ge=le.node(Je[0]).order,we(Ue,Re,tt,at,Ge),Re=tt,at=Ge)}we(Ue,Re,Ue.length,Ge,b.length)}),Ue}),ve}function O(le,K,ve){if(K>ve){var we=K;K=ve,ve=we}var ke=le[K];ke||(le[K]=ke={}),ke[ve]=!0}function A(le,K,ve){if(K>ve){var we=K;K=ve,ve=we}return g.has(le[K],ve)}function D(le,K,ve,we){var ke={},b={},Ue={};return g.forEach(K,function(at){g.forEach(at,function(Ge,Re){ke[Ge]=Ge,b[Ge]=Ge,Ue[Ge]=Re})}),g.forEach(K,function(at){var Ge=-1;g.forEach(at,function(Re){var Ne=we(Re);if(Ne.length)for(var tt=((Ne=g.sortBy(Ne,function(gt){return Ue[gt]})).length-1)/2,Je=Math.floor(tt),pt=Math.ceil(tt);Je<=pt;++Je){var _t=Ne[Je];b[Re]===Re&&Ge<Ue[_t]&&!A(ve,Re,_t)&&(b[_t]=Re,b[Re]=ke[Re]=ke[_t],Ge=Ue[_t])}})}),{root:ke,align:b}}function B(le,K,ve,we,ke){var b={},Ue=function k(le,K,ve,we){var ke=new v,b=le.graph(),Ue=function ae(le,K,ve){return function(we,ke,b){var Re,Ue=we.node(ke),at=we.node(b),Ge=0;if(Ge+=Ue.width/2,g.has(Ue,"labelpos"))switch(Ue.labelpos.toLowerCase()){case"l":Re=-Ue.width/2;break;case"r":Re=Ue.width/2}if(Re&&(Ge+=ve?Re:-Re),Re=0,Ge+=(Ue.dummy?K:le)/2,Ge+=(at.dummy?K:le)/2,Ge+=at.width/2,g.has(at,"labelpos"))switch(at.labelpos.toLowerCase()){case"l":Re=at.width/2;break;case"r":Re=-at.width/2}return Re&&(Ge+=ve?Re:-Re),Re=0,Ge}}(b.nodesep,b.edgesep,we);return g.forEach(K,function(at){var Ge;g.forEach(at,function(Re){var Ne=ve[Re];if(ke.setNode(Ne),Ge){var tt=ve[Ge],Je=ke.edge(tt,Ne);ke.setEdge(tt,Ne,Math.max(Ue(le,Re,Ge),Je||0))}Ge=Re})}),ke}(le,K,ve,ke),at=ke?"borderLeft":"borderRight";function Ge(tt,Je){for(var pt=Ue.nodes(),_t=pt.pop(),gt={};_t;)gt[_t]?tt(_t):(gt[_t]=!0,pt.push(_t),pt=pt.concat(Je(_t))),_t=pt.pop()}return Ge(function Re(tt){b[tt]=Ue.inEdges(tt).reduce(function(Je,pt){return Math.max(Je,b[pt.v]+Ue.edge(pt))},0)},Ue.predecessors.bind(Ue)),Ge(function Ne(tt){var Je=Ue.outEdges(tt).reduce(function(_t,gt){return Math.min(_t,b[gt.w]-Ue.edge(gt))},Number.POSITIVE_INFINITY),pt=le.node(tt);Je!==Number.POSITIVE_INFINITY&&pt.borderType!==at&&(b[tt]=Math.max(b[tt],Je))},Ue.successors.bind(Ue)),g.forEach(we,function(tt){b[tt]=b[ve[tt]]}),b}function Y(le,K){return g.minBy(g.values(K),function(ve){var we=Number.NEGATIVE_INFINITY,ke=Number.POSITIVE_INFINITY;return g.forIn(ve,function(b,Ue){var at=function pe(le,K){return le.node(K).width}(le,Ue)/2;we=Math.max(b+at,we),ke=Math.min(b-at,ke)}),we-ke})}function te(le,K){var ve=g.values(K),we=g.min(ve),ke=g.max(ve);g.forEach(["u","d"],function(b){g.forEach(["l","r"],function(Ue){var Re,at=b+Ue,Ge=le[at];if(Ge!==K){var Ne=g.values(Ge);(Re="l"===Ue?we-g.min(Ne):ke-g.max(Ne))&&(le[at]=g.mapValues(Ge,function(tt){return tt+Re}))}})})}function ue(le,K){return g.mapValues(le.ul,function(ve,we){if(K)return le[K.toLowerCase()][we];var ke=g.sortBy(g.map(le,we));return(ke[1]+ke[2])/2})}E.exports={positionX:function i(le){var ke,K=S.buildLayerMatrix(le),ve=g.merge(T(le,K),y(le,K)),we={};g.forEach(["u","d"],function(Ue){ke="u"===Ue?K:g.values(K).reverse(),g.forEach(["l","r"],function(at){"r"===at&&(ke=g.map(ke,function(tt){return g.values(tt).reverse()}));var Ge=("u"===Ue?le.predecessors:le.successors).bind(le),Re=D(0,ke,ve,Ge),Ne=B(le,ke,Re.root,Re.align,"r"===at);"r"===at&&(Ne=g.mapValues(Ne,function(tt){return-tt})),we[Ue+at]=Ne})});var b=Y(le,we);return te(we,b),ue(we,le.graph().align)},findType1Conflicts:T,findType2Conflicts:y,addConflict:O,hasConflict:A,verticalAlignment:D,horizontalCompaction:B,alignCoordinates:te,findSmallestWidthAlignment:Y,balance:ue}},78226:(E,W,f)=>{"use strict";var g=f(45760),v=f(11510),S=f(54058).positionX;E.exports=function T(I){(function y(I){var O=v.buildLayerMatrix(I),A=I.graph().ranksep,D=0;g.forEach(O,function(B){var k=g.max(g.map(B,function(Y){return I.node(Y).height}));g.forEach(B,function(Y){I.node(Y).y=D+k/2}),D+=k+A})})(I=v.asNonCompoundGraph(I)),g.forEach(S(I),function(O,A){I.node(A).x=O})}},96632:(E,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph,S=f(1916).slack;function y(A,D){return g.forEach(A.nodes(),function B(k){g.forEach(D.nodeEdges(k),function(Y){var te=Y.v,ue=k===te?Y.w:te;!A.hasNode(ue)&&!S(D,Y)&&(A.setNode(ue,{}),A.setEdge(k,ue,{}),B(ue))})}),A.nodeCount()}function I(A,D){return g.minBy(D.edges(),function(B){if(A.hasNode(B.v)!==A.hasNode(B.w))return S(D,B)})}function O(A,D,B){g.forEach(A.nodes(),function(k){D.node(k).rank+=B})}E.exports=function T(A){var Y,te,D=new v({directed:!1}),B=A.nodes()[0],k=A.nodeCount();for(D.setNode(B,{});y(D,A)<k;)Y=I(D,A),te=D.hasNode(Y.v)?S(A,Y):-S(A,Y),O(D,A,te);return D}},94124:(E,W,f)=>{"use strict";var v=f(1916).longestPath,S=f(96632),T=f(63804);E.exports=function y(D){switch(D.graph().ranker){case"network-simplex":default:!function A(D){T(D)}(D);break;case"tight-tree":!function O(D){v(D),S(D)}(D);break;case"longest-path":I(D)}};var I=v},63804:(E,W,f)=>{"use strict";var g=f(45760),v=f(96632),S=f(1916).slack,T=f(1916).longestPath,y=f(36456).alg.preorder,I=f(36456).alg.postorder,O=f(11510).simplify;function A(ve){ve=O(ve),T(ve);var ke,we=v(ve);for(Y(we),D(we,ve);ke=ue(we);)ae(we,ve,ke,i(we,ve,ke))}function D(ve,we){var ke=I(ve,ve.nodes());ke=ke.slice(0,ke.length-1),g.forEach(ke,function(b){!function B(ve,we,ke){var b=ve.node(ke);ve.edge(ke,b.parent).cutvalue=k(ve,we,ke)}(ve,we,b)})}function k(ve,we,ke){var Ue=ve.node(ke).parent,at=!0,Ge=we.edge(ke,Ue),Re=0;return Ge||(at=!1,Ge=we.edge(Ue,ke)),Re=Ge.weight,g.forEach(we.nodeEdges(ke),function(Ne){var tt=Ne.v===ke,Je=tt?Ne.w:Ne.v;if(Je!==Ue){var pt=tt===at,_t=we.edge(Ne).weight;if(Re+=pt?_t:-_t,function le(ve,we,ke){return ve.hasEdge(we,ke)}(ve,ke,Je)){var gt=ve.edge(ke,Je).cutvalue;Re+=pt?-gt:gt}}}),Re}function Y(ve,we){arguments.length<2&&(we=ve.nodes()[0]),te(ve,{},1,we)}function te(ve,we,ke,b,Ue){var at=ke,Ge=ve.node(b);return we[b]=!0,g.forEach(ve.neighbors(b),function(Re){g.has(we,Re)||(ke=te(ve,we,ke,Re,b))}),Ge.low=at,Ge.lim=ke++,Ue?Ge.parent=Ue:delete Ge.parent,ke}function ue(ve){return g.find(ve.edges(),function(we){return ve.edge(we).cutvalue<0})}function i(ve,we,ke){var b=ke.v,Ue=ke.w;we.hasEdge(b,Ue)||(b=ke.w,Ue=ke.v);var at=ve.node(b),Ge=ve.node(Ue),Re=at,Ne=!1;at.lim>Ge.lim&&(Re=Ge,Ne=!0);var tt=g.filter(we.edges(),function(Je){return Ne===K(0,ve.node(Je.v),Re)&&Ne!==K(0,ve.node(Je.w),Re)});return g.minBy(tt,function(Je){return S(we,Je)})}function ae(ve,we,ke,b){ve.removeEdge(ke.v,ke.w),ve.setEdge(b.v,b.w,{}),Y(ve),D(ve,we),function pe(ve,we){var ke=g.find(ve.nodes(),function(Ue){return!we.node(Ue).parent}),b=y(ve,ke);b=b.slice(1),g.forEach(b,function(Ue){var at=ve.node(Ue).parent,Ge=we.edge(Ue,at),Re=!1;Ge||(Ge=we.edge(at,Ue),Re=!0),we.node(Ue).rank=we.node(at).rank+(Re?Ge.minlen:-Ge.minlen)})}(ve,we)}function K(ve,we,ke){return ke.low<=we.lim&&we.lim<=ke.lim}E.exports=A,A.initLowLimValues=Y,A.initCutValues=D,A.calcCutValue=k,A.leaveEdge=ue,A.enterEdge=i,A.exchangeEdges=ae},1916:(E,W,f)=>{"use strict";var g=f(45760);E.exports={longestPath:function v(T){var y={};g.forEach(T.sources(),function I(O){var A=T.node(O);if(g.has(y,O))return A.rank;y[O]=!0;var D=g.min(g.map(T.outEdges(O),function(B){return I(B.w)-T.edge(B).minlen}));return(D===Number.POSITIVE_INFINITY||null==D)&&(D=0),A.rank=D})},slack:function S(T,y){return T.node(y.w).rank-T.node(y.v).rank-T.edge(y).minlen}}},11510:(E,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph;function S(pe,le,K,ve){var we;do{we=g.uniqueId(ve)}while(pe.hasNode(we));return K.dummy=le,pe.setNode(we,K),we}function te(pe){return g.max(g.map(pe.nodes(),function(le){var K=pe.node(le).rank;if(!g.isUndefined(K))return K}))}E.exports={addDummyNode:S,simplify:function T(pe){var le=(new v).setGraph(pe.graph());return g.forEach(pe.nodes(),function(K){le.setNode(K,pe.node(K))}),g.forEach(pe.edges(),function(K){var ve=le.edge(K.v,K.w)||{weight:0,minlen:1},we=pe.edge(K);le.setEdge(K.v,K.w,{weight:ve.weight+we.weight,minlen:Math.max(ve.minlen,we.minlen)})}),le},asNonCompoundGraph:function y(pe){var le=new v({multigraph:pe.isMultigraph()}).setGraph(pe.graph());return g.forEach(pe.nodes(),function(K){pe.children(K).length||le.setNode(K,pe.node(K))}),g.forEach(pe.edges(),function(K){le.setEdge(K,pe.edge(K))}),le},successorWeights:function I(pe){var le=g.map(pe.nodes(),function(K){var ve={};return g.forEach(pe.outEdges(K),function(we){ve[we.w]=(ve[we.w]||0)+pe.edge(we).weight}),ve});return g.zipObject(pe.nodes(),le)},predecessorWeights:function O(pe){var le=g.map(pe.nodes(),function(K){var ve={};return g.forEach(pe.inEdges(K),function(we){ve[we.v]=(ve[we.v]||0)+pe.edge(we).weight}),ve});return g.zipObject(pe.nodes(),le)},intersectRect:function A(pe,le){var at,Ge,K=pe.x,ve=pe.y,we=le.x-K,ke=le.y-ve,b=pe.width/2,Ue=pe.height/2;if(!we&&!ke)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(ke)*b>Math.abs(we)*Ue?(ke<0&&(Ue=-Ue),at=Ue*we/ke,Ge=Ue):(we<0&&(b=-b),at=b,Ge=b*ke/we),{x:K+at,y:ve+Ge}},buildLayerMatrix:function D(pe){var le=g.map(g.range(te(pe)+1),function(){return[]});return g.forEach(pe.nodes(),function(K){var ve=pe.node(K),we=ve.rank;g.isUndefined(we)||(le[we][ve.order]=K)}),le},normalizeRanks:function B(pe){var le=g.min(g.map(pe.nodes(),function(K){return pe.node(K).rank}));g.forEach(pe.nodes(),function(K){var ve=pe.node(K);g.has(ve,"rank")&&(ve.rank-=le)})},removeEmptyRanks:function k(pe){var le=g.min(g.map(pe.nodes(),function(ke){return pe.node(ke).rank})),K=[];g.forEach(pe.nodes(),function(ke){var b=pe.node(ke).rank-le;K[b]||(K[b]=[]),K[b].push(ke)});var ve=0,we=pe.graph().nodeRankFactor;g.forEach(K,function(ke,b){g.isUndefined(ke)&&b%we!=0?--ve:ve&&g.forEach(ke,function(Ue){pe.node(Ue).rank+=ve})})},addBorderNode:function Y(pe,le,K,ve){var we={width:0,height:0};return arguments.length>=4&&(we.rank=K,we.order=ve),S(pe,"border",we,le)},maxRank:te,partition:function ue(pe,le){var K={lhs:[],rhs:[]};return g.forEach(pe,function(ve){le(ve)?K.lhs.push(ve):K.rhs.push(ve)}),K},time:function i(pe,le){var K=g.now();try{return le()}finally{console.log(pe+" time: "+(g.now()-K)+"ms")}},notime:function ae(pe,le){return le()}}},28126:E=>{E.exports="0.8.5"},71764:function(E){E.exports=function(){"use strict";var f=6e4,g=36e5,v="millisecond",S="second",T="minute",y="hour",I="day",O="week",A="month",D="quarter",B="year",k="date",Y="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,i={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ge){var Re=["th","st","nd","rd"],Ne=Ge%100;return"["+Ge+(Re[(Ne-20)%10]||Re[Ne]||Re[0])+"]"}},ae=function(Ge,Re,Ne){var tt=String(Ge);return!tt||tt.length>=Re?Ge:""+Array(Re+1-tt.length).join(Ne)+Ge},pe={s:ae,z:function(Ge){var Re=-Ge.utcOffset(),Ne=Math.abs(Re),tt=Math.floor(Ne/60),Je=Ne%60;return(Re<=0?"+":"-")+ae(tt,2,"0")+":"+ae(Je,2,"0")},m:function Ge(Re,Ne){if(Re.date()<Ne.date())return-Ge(Ne,Re);var tt=12*(Ne.year()-Re.year())+(Ne.month()-Re.month()),Je=Re.clone().add(tt,A),pt=Ne-Je<0,_t=Re.clone().add(tt+(pt?-1:1),A);return+(-(tt+(Ne-Je)/(pt?Je-_t:_t-Je))||0)},a:function(Ge){return Ge<0?Math.ceil(Ge)||0:Math.floor(Ge)},p:function(Ge){return{M:A,y:B,w:O,d:I,D:k,h:y,m:T,s:S,ms:v,Q:D}[Ge]||String(Ge||"").toLowerCase().replace(/s$/,"")},u:function(Ge){return void 0===Ge}},le="en",K={};K[le]=i;var ve=function(Ge){return Ge instanceof Ue},we=function Ge(Re,Ne,tt){var Je;if(!Re)return le;if("string"==typeof Re){var pt=Re.toLowerCase();K[pt]&&(Je=pt),Ne&&(K[pt]=Ne,Je=pt);var _t=Re.split("-");if(!Je&&_t.length>1)return Ge(_t[0])}else{var gt=Re.name;K[gt]=Re,Je=gt}return!tt&&Je&&(le=Je),Je||!tt&&le},ke=function(Ge,Re){if(ve(Ge))return Ge.clone();var Ne="object"==typeof Re?Re:{};return Ne.date=Ge,Ne.args=arguments,new Ue(Ne)},b=pe;b.l=we,b.i=ve,b.w=function(Ge,Re){return ke(Ge,{locale:Re.$L,utc:Re.$u,x:Re.$x,$offset:Re.$offset})};var Ue=function(){function Ge(Ne){this.$L=we(Ne.locale,null,!0),this.parse(Ne)}var Re=Ge.prototype;return Re.parse=function(Ne){this.$d=function(tt){var Je=tt.date,pt=tt.utc;if(null===Je)return new Date(NaN);if(b.u(Je))return new Date;if(Je instanceof Date)return new Date(Je);if("string"==typeof Je&&!/Z$/i.test(Je)){var _t=Je.match(te);if(_t){var gt=_t[2]-1||0,on=(_t[7]||"0").substring(0,3);return pt?new Date(Date.UTC(_t[1],gt,_t[3]||1,_t[4]||0,_t[5]||0,_t[6]||0,on)):new Date(_t[1],gt,_t[3]||1,_t[4]||0,_t[5]||0,_t[6]||0,on)}}return new Date(Je)}(Ne),this.$x=Ne.x||{},this.init()},Re.init=function(){var Ne=this.$d;this.$y=Ne.getFullYear(),this.$M=Ne.getMonth(),this.$D=Ne.getDate(),this.$W=Ne.getDay(),this.$H=Ne.getHours(),this.$m=Ne.getMinutes(),this.$s=Ne.getSeconds(),this.$ms=Ne.getMilliseconds()},Re.$utils=function(){return b},Re.isValid=function(){return this.$d.toString()!==Y},Re.isSame=function(Ne,tt){var Je=ke(Ne);return this.startOf(tt)<=Je&&Je<=this.endOf(tt)},Re.isAfter=function(Ne,tt){return ke(Ne)<this.startOf(tt)},Re.isBefore=function(Ne,tt){return this.endOf(tt)<ke(Ne)},Re.$g=function(Ne,tt,Je){return b.u(Ne)?this[tt]:this.set(Je,Ne)},Re.unix=function(){return Math.floor(this.valueOf()/1e3)},Re.valueOf=function(){return this.$d.getTime()},Re.startOf=function(Ne,tt){var Je=this,pt=!!b.u(tt)||tt,_t=b.p(Ne),gt=function(We,qe){var ct=b.w(Je.$u?Date.UTC(Je.$y,qe,We):new Date(Je.$y,qe,We),Je);return pt?ct:ct.endOf(I)},on=function(We,qe){return b.w(Je.toDate()[We].apply(Je.toDate("s"),(pt?[0,0,0,0]:[23,59,59,999]).slice(qe)),Je)},gn=this.$W,Vn=this.$M,$n=this.$D,Bn="set"+(this.$u?"UTC":"");switch(_t){case B:return pt?gt(1,0):gt(31,11);case A:return pt?gt(1,Vn):gt(0,Vn+1);case O:var dr=this.$locale().weekStart||0,Gn=(gn<dr?gn+7:gn)-dr;return gt(pt?$n-Gn:$n+(6-Gn),Vn);case I:case k:return on(Bn+"Hours",0);case y:return on(Bn+"Minutes",1);case T:return on(Bn+"Seconds",2);case S:return on(Bn+"Milliseconds",3);default:return this.clone()}},Re.endOf=function(Ne){return this.startOf(Ne,!1)},Re.$set=function(Ne,tt){var Je,pt=b.p(Ne),_t="set"+(this.$u?"UTC":""),gt=(Je={},Je[I]=_t+"Date",Je[k]=_t+"Date",Je[A]=_t+"Month",Je[B]=_t+"FullYear",Je[y]=_t+"Hours",Je[T]=_t+"Minutes",Je[S]=_t+"Seconds",Je[v]=_t+"Milliseconds",Je)[pt],on=pt===I?this.$D+(tt-this.$W):tt;if(pt===A||pt===B){var gn=this.clone().set(k,1);gn.$d[gt](on),gn.init(),this.$d=gn.set(k,Math.min(this.$D,gn.daysInMonth())).$d}else gt&&this.$d[gt](on);return this.init(),this},Re.set=function(Ne,tt){return this.clone().$set(Ne,tt)},Re.get=function(Ne){return this[b.p(Ne)]()},Re.add=function(Ne,tt){var Je,pt=this;Ne=Number(Ne);var _t=b.p(tt),gt=function(Vn){var $n=ke(pt);return b.w($n.date($n.date()+Math.round(Vn*Ne)),pt)};if(_t===A)return this.set(A,this.$M+Ne);if(_t===B)return this.set(B,this.$y+Ne);if(_t===I)return gt(1);if(_t===O)return gt(7);var on=(Je={},Je[T]=f,Je[y]=g,Je[S]=1e3,Je)[_t]||1,gn=this.$d.getTime()+Ne*on;return b.w(gn,this)},Re.subtract=function(Ne,tt){return this.add(-1*Ne,tt)},Re.format=function(Ne){var tt=this,Je=this.$locale();if(!this.isValid())return Je.invalidDate||Y;var pt=Ne||"YYYY-MM-DDTHH:mm:ssZ",_t=b.z(this),gt=this.$H,on=this.$m,gn=this.$M,Vn=Je.weekdays,$n=Je.months,Bn=function(qe,ct,Ct,kt){return qe&&(qe[ct]||qe(tt,pt))||Ct[ct].slice(0,kt)},dr=function(qe){return b.s(gt%12||12,qe,"0")},Gn=Je.meridiem||function(qe,ct,Ct){var kt=qe<12?"AM":"PM";return Ct?kt.toLowerCase():kt},We={YY:String(this.$y).slice(-2),YYYY:this.$y,M:gn+1,MM:b.s(gn+1,2,"0"),MMM:Bn(Je.monthsShort,gn,$n,3),MMMM:Bn($n,gn),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:Bn(Je.weekdaysMin,this.$W,Vn,2),ddd:Bn(Je.weekdaysShort,this.$W,Vn,3),dddd:Vn[this.$W],H:String(gt),HH:b.s(gt,2,"0"),h:dr(1),hh:dr(2),a:Gn(gt,on,!0),A:Gn(gt,on,!1),m:String(on),mm:b.s(on,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:_t};return pt.replace(ue,function(qe,ct){return ct||We[qe]||_t.replace(":","")})},Re.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Re.diff=function(Ne,tt,Je){var pt,_t=b.p(tt),gt=ke(Ne),on=(gt.utcOffset()-this.utcOffset())*f,gn=this-gt,Vn=b.m(this,gt);return Vn=(pt={},pt[B]=Vn/12,pt[A]=Vn,pt[D]=Vn/3,pt[O]=(gn-on)/6048e5,pt[I]=(gn-on)/864e5,pt[y]=gn/g,pt[T]=gn/f,pt[S]=gn/1e3,pt)[_t]||gn,Je?Vn:b.a(Vn)},Re.daysInMonth=function(){return this.endOf(A).$D},Re.$locale=function(){return K[this.$L]},Re.locale=function(Ne,tt){if(!Ne)return this.$L;var Je=this.clone(),pt=we(Ne,tt,!0);return pt&&(Je.$L=pt),Je},Re.clone=function(){return b.w(this.$d,this)},Re.toDate=function(){return new Date(this.valueOf())},Re.toJSON=function(){return this.isValid()?this.toISOString():null},Re.toISOString=function(){return this.$d.toISOString()},Re.toString=function(){return this.$d.toUTCString()},Ge}(),at=Ue.prototype;return ke.prototype=at,[["$ms",v],["$s",S],["$m",T],["$H",y],["$W",I],["$M",A],["$y",B],["$D",k]].forEach(function(Ge){at[Ge[1]]=function(Re){return this.$g(Re,Ge[0],Ge[1])}}),ke.extend=function(Ge,Re){return Ge.$i||(Ge(Re,Ue,ke),Ge.$i=!0),ke},ke.locale=we,ke.isDayjs=ve,ke.unix=function(Ge){return ke(1e3*Ge)},ke.en=K[le],ke.Ls=K,ke.p={},ke}()},72243:function(E){E.exports=function(){"use strict";return function(W,f,g){W=W||{};var v=f.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function T(I,O,A,D){return v.fromToBase(I,O,A,D)}g.en.relativeTime=S,v.fromToBase=function(I,O,A,D,B){for(var k,Y,te,ue=A.$locale().relativeTime||S,i=W.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ae=i.length,pe=0;pe<ae;pe+=1){var le=i[pe];le.d&&(k=D?g(I).diff(A,le.d,!0):A.diff(I,le.d,!0));var K=(W.rounding||Math.round)(Math.abs(k));if(te=k>0,K<=le.r||!le.r){K<=1&&pe>0&&(le=i[pe-1]);var ve=ue[le.l];B&&(K=B(""+K)),Y="string"==typeof ve?ve.replace("%d",K):ve(K,O,le.l,te);break}}if(O)return Y;var we=te?ue.future:ue.past;return"function"==typeof we?we(Y):we.replace("%s",Y)},v.to=function(I,O){return T(I,O,this,!0)},v.from=function(I,O){return T(I,O,this)};var y=function(I){return I.$u?g.utc():g()};v.toNow=function(I){return this.to(y(this),I)},v.fromNow=function(I){return this.from(y(this),I)}}}()},85510:(E,W,f)=>{var g=f(51838);E.exports={Graph:g.Graph,json:f(21088),alg:f(83430),version:g.version}},86730:(E,W,f)=>{var g=f(79138);E.exports=function v(S){var I,T={},y=[];function O(A){g.has(T,A)||(T[A]=!0,I.push(A),g.each(S.successors(A),O),g.each(S.predecessors(A),O))}return g.each(S.nodes(),function(A){I=[],O(A),I.length&&y.push(I)}),y}},22163:(E,W,f)=>{var g=f(79138);function S(T,y,I,O,A,D){g.has(O,y)||(O[y]=!0,I||D.push(y),g.each(A(y),function(B){S(T,B,I,O,A,D)}),I&&D.push(y))}E.exports=function v(T,y,I){g.isArray(y)||(y=[y]);var O=(T.isDirected()?T.successors:T.neighbors).bind(T),A=[],D={};return g.each(y,function(B){if(!T.hasNode(B))throw new Error("Graph does not have node: "+B);S(T,B,"post"===I,D,O,A)}),A}},25668:(E,W,f)=>{var g=f(61718),v=f(79138);E.exports=function S(T,y,I){return v.transform(T.nodes(),function(O,A){O[A]=g(T,A,y,I)},{})}},61718:(E,W,f)=>{var g=f(79138),v=f(31919);E.exports=function T(I,O,A,D){return function y(I,O,A,D){var Y,te,B={},k=new v,ue=function(i){var ae=i.v!==Y?i.v:i.w,pe=B[ae],le=A(i),K=te.distance+le;if(le<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+le);K<pe.distance&&(pe.distance=K,pe.predecessor=Y,k.decrease(ae,K))};for(I.nodes().forEach(function(i){var ae=i===O?0:Number.POSITIVE_INFINITY;B[i]={distance:ae},k.add(i,ae)});k.size()>0&&(Y=k.removeMin(),(te=B[Y]).distance!==Number.POSITIVE_INFINITY);)D(Y).forEach(ue);return B}(I,String(O),A||S,D||function(B){return I.outEdges(B)})};var S=g.constant(1)},9611:(E,W,f)=>{var g=f(79138),v=f(73585);E.exports=function S(T){return g.filter(v(T),function(y){return y.length>1||1===y.length&&T.hasEdge(y[0],y[0])})}},22881:(E,W,f)=>{var g=f(79138);E.exports=function S(y,I,O){return function T(y,I,O){var A={},D=y.nodes();return D.forEach(function(B){A[B]={},A[B][B]={distance:0},D.forEach(function(k){B!==k&&(A[B][k]={distance:Number.POSITIVE_INFINITY})}),O(B).forEach(function(k){var Y=k.v===B?k.w:k.v,te=I(k);A[B][Y]={distance:te,predecessor:B}})}),D.forEach(function(B){var k=A[B];D.forEach(function(Y){var te=A[Y];D.forEach(function(ue){var ae=k[ue],pe=te[ue],le=te[B].distance+ae.distance;le<pe.distance&&(pe.distance=le,pe.predecessor=ae.predecessor)})})}),A}(y,I||v,O||function(A){return y.outEdges(A)})};var v=g.constant(1)},83430:(E,W,f)=>{E.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(E,W,f)=>{var g=f(52180);E.exports=function v(S){try{g(S)}catch(T){if(T instanceof g.CycleException)return!1;throw T}return!0}},46694:(E,W,f)=>{var g=f(22163);E.exports=function v(S,T){return g(S,T,"post")}},5330:(E,W,f)=>{var g=f(22163);E.exports=function v(S,T){return g(S,T,"pre")}},46823:(E,W,f)=>{var g=f(79138),v=f(66568),S=f(31919);E.exports=function T(y,I){var B,O=new v,A={},D=new S;function k(te){var ue=te.v===B?te.w:te.v,i=D.priority(ue);if(void 0!==i){var ae=I(te);ae<i&&(A[ue]=B,D.decrease(ue,ae))}}if(0===y.nodeCount())return O;g.each(y.nodes(),function(te){D.add(te,Number.POSITIVE_INFINITY),O.setNode(te)}),D.decrease(y.nodes()[0],0);for(var Y=!1;D.size()>0;){if(B=D.removeMin(),g.has(A,B))O.setEdge(B,A[B]);else{if(Y)throw new Error("Input graph is not connected: "+y);Y=!0}y.nodeEdges(B).forEach(k)}return O}},73585:(E,W,f)=>{var g=f(79138);E.exports=function v(S){var T=0,y=[],I={},O=[];function A(D){var B=I[D]={onStack:!0,lowlink:T,index:T++};if(y.push(D),S.successors(D).forEach(function(te){g.has(I,te)?I[te].onStack&&(B.lowlink=Math.min(B.lowlink,I[te].index)):(A(te),B.lowlink=Math.min(B.lowlink,I[te].lowlink))}),B.lowlink===B.index){var Y,k=[];do{Y=y.pop(),I[Y].onStack=!1,k.push(Y)}while(D!==Y);O.push(k)}}return S.nodes().forEach(function(D){g.has(I,D)||A(D)}),O}},52180:(E,W,f)=>{var g=f(79138);function v(T){var y={},I={},O=[];if(g.each(T.sinks(),function A(D){if(g.has(I,D))throw new S;g.has(y,D)||(I[D]=!0,y[D]=!0,g.each(T.predecessors(D),A),delete I[D],O.push(D))}),g.size(y)!==T.nodeCount())throw new S;return O}function S(){}E.exports=v,v.CycleException=S,S.prototype=new Error},31919:(E,W,f)=>{var g=f(79138);function v(){this._arr=[],this._keyIndices={}}E.exports=v,v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(S){return S.key})},v.prototype.has=function(S){return g.has(this._keyIndices,S)},v.prototype.priority=function(S){var T=this._keyIndices[S];if(void 0!==T)return this._arr[T].priority},v.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(S,T){var y=this._keyIndices;if(S=String(S),!g.has(y,S)){var I=this._arr,O=I.length;return y[S]=O,I.push({key:S,priority:T}),this._decrease(O),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},v.prototype.decrease=function(S,T){var y=this._keyIndices[S];if(T>this._arr[y].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[y].priority+" New: "+T);this._arr[y].priority=T,this._decrease(y)},v.prototype._heapify=function(S){var T=this._arr,y=2*S,I=y+1,O=S;y<T.length&&(O=T[y].priority<T[O].priority?y:O,I<T.length&&(O=T[I].priority<T[O].priority?I:O),O!==S&&(this._swap(S,O),this._heapify(O)))},v.prototype._decrease=function(S){for(var I,T=this._arr,y=T[S].priority;0!==S&&!(T[I=S>>1].priority<y);)this._swap(S,I),S=I},v.prototype._swap=function(S,T){var y=this._arr,I=this._keyIndices,O=y[S],A=y[T];y[S]=A,y[T]=O,I[A.key]=S,I[O.key]=T}},66568:(E,W,f)=>{"use strict";var g=f(79138);E.exports=y;var S="\0";function y(k){this._isDirected=!g.has(k,"directed")||k.directed,this._isMultigraph=!!g.has(k,"multigraph")&&k.multigraph,this._isCompound=!!g.has(k,"compound")&&k.compound,this._label=void 0,this._defaultNodeLabelFn=g.constant(void 0),this._defaultEdgeLabelFn=g.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function I(k,Y){k[Y]?k[Y]++:k[Y]=1}function O(k,Y){--k[Y]||delete k[Y]}function A(k,Y,te,ue){var i=""+Y,ae=""+te;if(!k&&i>ae){var pe=i;i=ae,ae=pe}return i+"\x01"+ae+"\x01"+(g.isUndefined(ue)?"\0":ue)}function D(k,Y,te,ue){var i=""+Y,ae=""+te;if(!k&&i>ae){var pe=i;i=ae,ae=pe}var le={v:i,w:ae};return ue&&(le.name=ue),le}function B(k,Y){return A(k,Y.v,Y.w,Y.name)}y.prototype._nodeCount=0,y.prototype._edgeCount=0,y.prototype.isDirected=function(){return this._isDirected},y.prototype.isMultigraph=function(){return this._isMultigraph},y.prototype.isCompound=function(){return this._isCompound},y.prototype.setGraph=function(k){return this._label=k,this},y.prototype.graph=function(){return this._label},y.prototype.setDefaultNodeLabel=function(k){return g.isFunction(k)||(k=g.constant(k)),this._defaultNodeLabelFn=k,this},y.prototype.nodeCount=function(){return this._nodeCount},y.prototype.nodes=function(){return g.keys(this._nodes)},y.prototype.sources=function(){var k=this;return g.filter(this.nodes(),function(Y){return g.isEmpty(k._in[Y])})},y.prototype.sinks=function(){var k=this;return g.filter(this.nodes(),function(Y){return g.isEmpty(k._out[Y])})},y.prototype.setNodes=function(k,Y){var te=arguments,ue=this;return g.each(k,function(i){te.length>1?ue.setNode(i,Y):ue.setNode(i)}),this},y.prototype.setNode=function(k,Y){return g.has(this._nodes,k)?(arguments.length>1&&(this._nodes[k]=Y),this):(this._nodes[k]=arguments.length>1?Y:this._defaultNodeLabelFn(k),this._isCompound&&(this._parent[k]=S,this._children[k]={},this._children[S][k]=!0),this._in[k]={},this._preds[k]={},this._out[k]={},this._sucs[k]={},++this._nodeCount,this)},y.prototype.node=function(k){return this._nodes[k]},y.prototype.hasNode=function(k){return g.has(this._nodes,k)},y.prototype.removeNode=function(k){var Y=this;if(g.has(this._nodes,k)){var te=function(ue){Y.removeEdge(Y._edgeObjs[ue])};delete this._nodes[k],this._isCompound&&(this._removeFromParentsChildList(k),delete this._parent[k],g.each(this.children(k),function(ue){Y.setParent(ue)}),delete this._children[k]),g.each(g.keys(this._in[k]),te),delete this._in[k],delete this._preds[k],g.each(g.keys(this._out[k]),te),delete this._out[k],delete this._sucs[k],--this._nodeCount}return this},y.prototype.setParent=function(k,Y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(g.isUndefined(Y))Y=S;else{for(var te=Y+="";!g.isUndefined(te);te=this.parent(te))if(te===k)throw new Error("Setting "+Y+" as parent of "+k+" would create a cycle");this.setNode(Y)}return this.setNode(k),this._removeFromParentsChildList(k),this._parent[k]=Y,this._children[Y][k]=!0,this},y.prototype._removeFromParentsChildList=function(k){delete this._children[this._parent[k]][k]},y.prototype.parent=function(k){if(this._isCompound){var Y=this._parent[k];if(Y!==S)return Y}},y.prototype.children=function(k){if(g.isUndefined(k)&&(k=S),this._isCompound){var Y=this._children[k];if(Y)return g.keys(Y)}else{if(k===S)return this.nodes();if(this.hasNode(k))return[]}},y.prototype.predecessors=function(k){var Y=this._preds[k];if(Y)return g.keys(Y)},y.prototype.successors=function(k){var Y=this._sucs[k];if(Y)return g.keys(Y)},y.prototype.neighbors=function(k){var Y=this.predecessors(k);if(Y)return g.union(Y,this.successors(k))},y.prototype.isLeaf=function(k){return 0===(this.isDirected()?this.successors(k):this.neighbors(k)).length},y.prototype.filterNodes=function(k){var Y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});Y.setGraph(this.graph());var te=this;g.each(this._nodes,function(ae,pe){k(pe)&&Y.setNode(pe,ae)}),g.each(this._edgeObjs,function(ae){Y.hasNode(ae.v)&&Y.hasNode(ae.w)&&Y.setEdge(ae,te.edge(ae))});var ue={};function i(ae){var pe=te.parent(ae);return void 0===pe||Y.hasNode(pe)?(ue[ae]=pe,pe):pe in ue?ue[pe]:i(pe)}return this._isCompound&&g.each(Y.nodes(),function(ae){Y.setParent(ae,i(ae))}),Y},y.prototype.setDefaultEdgeLabel=function(k){return g.isFunction(k)||(k=g.constant(k)),this._defaultEdgeLabelFn=k,this},y.prototype.edgeCount=function(){return this._edgeCount},y.prototype.edges=function(){return g.values(this._edgeObjs)},y.prototype.setPath=function(k,Y){var te=this,ue=arguments;return g.reduce(k,function(i,ae){return ue.length>1?te.setEdge(i,ae,Y):te.setEdge(i,ae),ae}),this},y.prototype.setEdge=function(){var k,Y,te,ue,i=!1,ae=arguments[0];"object"==typeof ae&&null!==ae&&"v"in ae?(k=ae.v,Y=ae.w,te=ae.name,2===arguments.length&&(ue=arguments[1],i=!0)):(k=ae,Y=arguments[1],te=arguments[3],arguments.length>2&&(ue=arguments[2],i=!0)),k=""+k,Y=""+Y,g.isUndefined(te)||(te=""+te);var pe=A(this._isDirected,k,Y,te);if(g.has(this._edgeLabels,pe))return i&&(this._edgeLabels[pe]=ue),this;if(!g.isUndefined(te)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(k),this.setNode(Y),this._edgeLabels[pe]=i?ue:this._defaultEdgeLabelFn(k,Y,te);var le=D(this._isDirected,k,Y,te);return k=le.v,Y=le.w,Object.freeze(le),this._edgeObjs[pe]=le,I(this._preds[Y],k),I(this._sucs[k],Y),this._in[Y][pe]=le,this._out[k][pe]=le,this._edgeCount++,this},y.prototype.edge=function(k,Y,te){var ue=1===arguments.length?B(this._isDirected,arguments[0]):A(this._isDirected,k,Y,te);return this._edgeLabels[ue]},y.prototype.hasEdge=function(k,Y,te){var ue=1===arguments.length?B(this._isDirected,arguments[0]):A(this._isDirected,k,Y,te);return g.has(this._edgeLabels,ue)},y.prototype.removeEdge=function(k,Y,te){var ue=1===arguments.length?B(this._isDirected,arguments[0]):A(this._isDirected,k,Y,te),i=this._edgeObjs[ue];return i&&(k=i.v,Y=i.w,delete this._edgeLabels[ue],delete this._edgeObjs[ue],O(this._preds[Y],k),O(this._sucs[k],Y),delete this._in[Y][ue],delete this._out[k][ue],this._edgeCount--),this},y.prototype.inEdges=function(k,Y){var te=this._in[k];if(te){var ue=g.values(te);return Y?g.filter(ue,function(i){return i.v===Y}):ue}},y.prototype.outEdges=function(k,Y){var te=this._out[k];if(te){var ue=g.values(te);return Y?g.filter(ue,function(i){return i.w===Y}):ue}},y.prototype.nodeEdges=function(k,Y){var te=this.inEdges(k,Y);if(te)return te.concat(this.outEdges(k,Y))}},51838:(E,W,f)=>{E.exports={Graph:f(66568),version:f(75089)}},21088:(E,W,f)=>{var g=f(79138),v=f(66568);function T(O){return g.map(O.nodes(),function(A){var D=O.node(A),B=O.parent(A),k={v:A};return g.isUndefined(D)||(k.value=D),g.isUndefined(B)||(k.parent=B),k})}function y(O){return g.map(O.edges(),function(A){var D=O.edge(A),B={v:A.v,w:A.w};return g.isUndefined(A.name)||(B.name=A.name),g.isUndefined(D)||(B.value=D),B})}E.exports={write:function S(O){var A={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:T(O),edges:y(O)};return g.isUndefined(O.graph())||(A.value=g.clone(O.graph())),A},read:function I(O){var A=new v(O.options).setGraph(O.value);return g.each(O.nodes,function(D){A.setNode(D.v,D.value),D.parent&&A.setParent(D.v,D.parent)}),g.each(O.edges,function(D){A.setEdge({v:D.v,w:D.w,name:D.name},D.value)}),A}}},79138:(E,W,f)=>{var g;try{g={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(v){}g||(g=window._),E.exports=g},75089:E=>{E.exports="2.1.8"},58259:function(E,W){var g;!function(v,S){"use strict";"object"==typeof E.exports?E.exports=v.document?S(v,!0):function(T){if(!T.document)throw new Error("jQuery requires a window with a document");return S(T)}:S(v)}("undefined"!=typeof window?window:this,function(v,S){"use strict";var T=[],y=Object.getPrototypeOf,I=T.slice,O=T.flat?function(l){return T.flat.call(l)}:function(l){return T.concat.apply([],l)},A=T.push,D=T.indexOf,B={},k=B.toString,Y=B.hasOwnProperty,te=Y.toString,ue=te.call(Object),i={},ae=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},pe=function(d){return null!=d&&d===d.window},le=v.document,K={type:!0,src:!0,nonce:!0,noModule:!0};function ve(l,d,x){var w,F,H=(x=x||le).createElement("script");if(H.text=l,d)for(w in K)(F=d[w]||d.getAttribute&&d.getAttribute(w))&&H.setAttribute(w,F);x.head.appendChild(H).parentNode.removeChild(H)}function we(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?B[k.call(l)]||"object":typeof l}var b=function(l,d){return new b.fn.init(l,d)};function Ue(l){var d=!!l&&"length"in l&&l.length,x=we(l);return!ae(l)&&!pe(l)&&("array"===x||0===d||"number"==typeof d&&d>0&&d-1 in l)}b.fn=b.prototype={jquery:"3.6.1",constructor:b,length:0,toArray:function(){return I.call(this)},get:function(l){return null==l?I.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=b.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return b.each(this,l)},map:function(l){return this.pushStack(b.map(this,function(d,x){return l.call(d,x,d)}))},slice:function(){return this.pushStack(I.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,x=+l+(l<0?d:0);return this.pushStack(x>=0&&x<d?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:A,sort:T.sort,splice:T.splice},b.extend=b.fn.extend=function(){var l,d,x,w,F,H,X=arguments[0]||{},he=1,ce=arguments.length,Oe=!1;for("boolean"==typeof X&&(Oe=X,X=arguments[he]||{},he++),"object"!=typeof X&&!ae(X)&&(X={}),he===ce&&(X=this,he--);he<ce;he++)if(null!=(l=arguments[he]))for(d in l)w=l[d],"__proto__"!==d&&X!==w&&(Oe&&w&&(b.isPlainObject(w)||(F=Array.isArray(w)))?(x=X[d],H=F&&!Array.isArray(x)?[]:F||b.isPlainObject(x)?x:{},F=!1,X[d]=b.extend(Oe,H,w)):void 0!==w&&(X[d]=w));return X},b.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,x;return!(!l||"[object Object]"!==k.call(l)||(d=y(l))&&("function"!=typeof(x=Y.call(d,"constructor")&&d.constructor)||te.call(x)!==ue))},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,x){ve(l,{nonce:d&&d.nonce},x)},each:function(l,d){var x,w=0;if(Ue(l))for(x=l.length;w<x&&!1!==d.call(l[w],w,l[w]);w++);else for(w in l)if(!1===d.call(l[w],w,l[w]))break;return l},makeArray:function(l,d){var x=d||[];return null!=l&&(Ue(Object(l))?b.merge(x,"string"==typeof l?[l]:l):A.call(x,l)),x},inArray:function(l,d,x){return null==d?-1:D.call(d,l,x)},merge:function(l,d){for(var x=+d.length,w=0,F=l.length;w<x;w++)l[F++]=d[w];return l.length=F,l},grep:function(l,d,x){for(var F=[],H=0,X=l.length,he=!x;H<X;H++)!d(l[H],H)!==he&&F.push(l[H]);return F},map:function(l,d,x){var w,F,H=0,X=[];if(Ue(l))for(w=l.length;H<w;H++)null!=(F=d(l[H],H,x))&&X.push(F);else for(H in l)null!=(F=d(l[H],H,x))&&X.push(F);return O(X)},guid:1,support:i}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=T[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){B["[object "+d+"]"]=d.toLowerCase()});var at=function(l){var d,x,w,F,H,X,he,ce,Oe,je,lt,Fe,et,Ht,Yt,Dt,wr,tn,Sr,Hn="sizzle"+1*new Date,cn=l.document,ni=0,an=0,vr=br(),xs=br(),_s=br(),ri=br(),Fi=function(q,fe){return q===fe&&(lt=!0),0},jt={}.hasOwnProperty,nr=[],Vi=nr.pop,cr=nr.push,Bi=nr.push,Ca=nr.slice,Kr=function(q,fe){for(var Ce=0,Ze=q.length;Ce<Ze;Ce++)if(q[Ce]===fe)return Ce;return-1},Jr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",_n="[\\x20\\t\\r\\n\\f]",Hi="(?:\\\\[\\da-fA-F]{1,6}"+_n+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Rn="\\["+_n+"*("+Hi+")(?:"+_n+"*([*^$|!~]?=)"+_n+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Hi+"))|)"+_n+"*\\]",Dn=":("+Hi+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Rn+")*)|.*)\\)|)",bn=new RegExp(_n+"+","g"),ua=new RegExp("^"+_n+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_n+"+$","g"),hu=new RegExp("^"+_n+"*,"+_n+"*"),pu=new RegExp("^"+_n+"*([>+~]|"+_n+")"+_n+"*"),nl=new RegExp(_n+"|>"),gu=new RegExp(Dn),rl=new RegExp("^"+Hi+"$"),js={ID:new RegExp("^#("+Hi+")"),CLASS:new RegExp("^\\.("+Hi+")"),TAG:new RegExp("^("+Hi+"|[*])"),ATTR:new RegExp("^"+Rn),PSEUDO:new RegExp("^"+Dn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_n+"*(even|odd|(([+-]|)(\\d*)n|)"+_n+"*(?:([+-]|)"+_n+"*(\\d+)|))"+_n+"*\\)|)","i"),bool:new RegExp("^(?:"+Jr+")$","i"),needsContext:new RegExp("^"+_n+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_n+"*((?:-\\d)?\\d*)"+_n+"*\\)|)(?=[^-]|$)","i")},zs=/HTML$/i,ci=/^(?:input|select|textarea|button)$/i,Or=/^h\d$/i,to=/^[^{]+\{\s*\[native \w/,bs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gs=/[+~]/,Zn=new RegExp("\\\\[\\da-fA-F]{1,6}"+_n+"?|\\\\([^\\r\\n\\f])","g"),Ei=function(q,fe){var Ce="0x"+q.slice(1)-65536;return fe||(Ce<0?String.fromCharCode(Ce+65536):String.fromCharCode(Ce>>10|55296,1023&Ce|56320))},vu=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Hr=function(q,fe){return fe?"\0"===q?"\ufffd":q.slice(0,-1)+"\\"+q.charCodeAt(q.length-1).toString(16)+" ":"\\"+q},mu=function(){Fe()},Yn=Sn(function(q){return!0===q.disabled&&"fieldset"===q.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Bi.apply(nr=Ca.call(cn.childNodes),cn.childNodes)}catch(q){Bi={apply:nr.length?function(fe,Ce){cr.apply(fe,Ca.call(Ce))}:function(fe,Ce){for(var Ze=fe.length,be=0;fe[Ze++]=Ce[be++];);fe.length=Ze-1}}}function Xt(q,fe,Ce,Ze){var be,nt,st,yt,Tt,vt,Ut,Nt=fe&&fe.ownerDocument,Kt=fe?fe.nodeType:9;if(Ce=Ce||[],"string"!=typeof q||!q||1!==Kt&&9!==Kt&&11!==Kt)return Ce;if(!Ze&&(Fe(fe),fe=fe||et,Yt)){if(11!==Kt&&(Tt=bs.exec(q)))if(be=Tt[1]){if(9===Kt){if(!(st=fe.getElementById(be)))return Ce;if(st.id===be)return Ce.push(st),Ce}else if(Nt&&(st=Nt.getElementById(be))&&Sr(fe,st)&&st.id===be)return Ce.push(st),Ce}else{if(Tt[2])return Bi.apply(Ce,fe.getElementsByTagName(q)),Ce;if((be=Tt[3])&&x.getElementsByClassName&&fe.getElementsByClassName)return Bi.apply(Ce,fe.getElementsByClassName(be)),Ce}if(x.qsa&&!ri[q+" "]&&(!Dt||!Dt.test(q))&&(1!==Kt||"object"!==fe.nodeName.toLowerCase())){if(Ut=q,Nt=fe,1===Kt&&(nl.test(q)||pu.test(q))){for(((Nt=Gs.test(q)&&$e(fe.parentNode)||fe)!==fe||!x.scope)&&((yt=fe.getAttribute("id"))?yt=yt.replace(vu,Hr):fe.setAttribute("id",yt=Hn)),nt=(vt=X(q)).length;nt--;)vt[nt]=(yt?"#"+yt:":scope")+" "+sn(vt[nt]);Ut=vt.join(",")}try{return Bi.apply(Ce,Nt.querySelectorAll(Ut)),Ce}catch(jn){ri(q,!0)}finally{yt===Hn&&fe.removeAttribute("id")}}}return ce(q.replace(ua,"$1"),fe,Ce,Ze)}function br(){var q=[];return function fe(Ce,Ze){return q.push(Ce+" ")>w.cacheLength&&delete fe[q.shift()],fe[Ce+" "]=Ze}}function Qr(q){return q[Hn]=!0,q}function rr(q){var fe=et.createElement("fieldset");try{return!!q(fe)}catch(Ce){return!1}finally{fe.parentNode&&fe.parentNode.removeChild(fe),fe=null}}function Cs(q,fe){for(var Ce=q.split("|"),Ze=Ce.length;Ze--;)w.attrHandle[Ce[Ze]]=fe}function no(q,fe){var Ce=fe&&q,Ze=Ce&&1===q.nodeType&&1===fe.nodeType&&q.sourceIndex-fe.sourceIndex;if(Ze)return Ze;if(Ce)for(;Ce=Ce.nextSibling;)if(Ce===fe)return-1;return q?1:-1}function il(q){return function(fe){return"input"===fe.nodeName.toLowerCase()&&fe.type===q}}function Qa(q){return function(fe){var Ce=fe.nodeName.toLowerCase();return("input"===Ce||"button"===Ce)&&fe.type===q}}function Ee(q){return function(fe){return"form"in fe?fe.parentNode&&!1===fe.disabled?"label"in fe?"label"in fe.parentNode?fe.parentNode.disabled===q:fe.disabled===q:fe.isDisabled===q||fe.isDisabled!==!q&&Yn(fe)===q:fe.disabled===q:"label"in fe&&fe.disabled===q}}function Ke(q){return Qr(function(fe){return fe=+fe,Qr(function(Ce,Ze){for(var be,nt=q([],Ce.length,fe),st=nt.length;st--;)Ce[be=nt[st]]&&(Ce[be]=!(Ze[be]=Ce[be]))})})}function $e(q){return q&&void 0!==q.getElementsByTagName&&q}for(d in x=Xt.support={},H=Xt.isXML=function(q){var Ce=q&&(q.ownerDocument||q).documentElement;return!zs.test(q&&q.namespaceURI||Ce&&Ce.nodeName||"HTML")},Fe=Xt.setDocument=function(q){var fe,Ce,Ze=q?q.ownerDocument||q:cn;return Ze==et||9!==Ze.nodeType||!Ze.documentElement||(Ht=(et=Ze).documentElement,Yt=!H(et),cn!=et&&(Ce=et.defaultView)&&Ce.top!==Ce&&(Ce.addEventListener?Ce.addEventListener("unload",mu,!1):Ce.attachEvent&&Ce.attachEvent("onunload",mu)),x.scope=rr(function(be){return Ht.appendChild(be).appendChild(et.createElement("div")),void 0!==be.querySelectorAll&&!be.querySelectorAll(":scope fieldset div").length}),x.attributes=rr(function(be){return be.className="i",!be.getAttribute("className")}),x.getElementsByTagName=rr(function(be){return be.appendChild(et.createComment("")),!be.getElementsByTagName("*").length}),x.getElementsByClassName=to.test(et.getElementsByClassName),x.getById=rr(function(be){return Ht.appendChild(be).id=Hn,!et.getElementsByName||!et.getElementsByName(Hn).length}),x.getById?(w.filter.ID=function(be){var nt=be.replace(Zn,Ei);return function(st){return st.getAttribute("id")===nt}},w.find.ID=function(be,nt){if(void 0!==nt.getElementById&&Yt){var st=nt.getElementById(be);return st?[st]:[]}}):(w.filter.ID=function(be){var nt=be.replace(Zn,Ei);return function(st){var yt=void 0!==st.getAttributeNode&&st.getAttributeNode("id");return yt&&yt.value===nt}},w.find.ID=function(be,nt){if(void 0!==nt.getElementById&&Yt){var st,yt,Tt,vt=nt.getElementById(be);if(vt){if((st=vt.getAttributeNode("id"))&&st.value===be)return[vt];for(Tt=nt.getElementsByName(be),yt=0;vt=Tt[yt++];)if((st=vt.getAttributeNode("id"))&&st.value===be)return[vt]}return[]}}),w.find.TAG=x.getElementsByTagName?function(be,nt){return void 0!==nt.getElementsByTagName?nt.getElementsByTagName(be):x.qsa?nt.querySelectorAll(be):void 0}:function(be,nt){var st,yt=[],Tt=0,vt=nt.getElementsByTagName(be);if("*"===be){for(;st=vt[Tt++];)1===st.nodeType&&yt.push(st);return yt}return vt},w.find.CLASS=x.getElementsByClassName&&function(be,nt){if(void 0!==nt.getElementsByClassName&&Yt)return nt.getElementsByClassName(be)},wr=[],Dt=[],(x.qsa=to.test(et.querySelectorAll))&&(rr(function(be){var nt;Ht.appendChild(be).innerHTML="<a id='"+Hn+"'></a><select id='"+Hn+"-\r\\' msallowcapture=''><option selected=''></option></select>",be.querySelectorAll("[msallowcapture^='']").length&&Dt.push("[*^$]="+_n+"*(?:''|\"\")"),be.querySelectorAll("[selected]").length||Dt.push("\\["+_n+"*(?:value|"+Jr+")"),be.querySelectorAll("[id~="+Hn+"-]").length||Dt.push("~="),(nt=et.createElement("input")).setAttribute("name",""),be.appendChild(nt),be.querySelectorAll("[name='']").length||Dt.push("\\["+_n+"*name"+_n+"*="+_n+"*(?:''|\"\")"),be.querySelectorAll(":checked").length||Dt.push(":checked"),be.querySelectorAll("a#"+Hn+"+*").length||Dt.push(".#.+[+~]"),be.querySelectorAll("\\\f"),Dt.push("[\\r\\n\\f]")}),rr(function(be){be.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var nt=et.createElement("input");nt.setAttribute("type","hidden"),be.appendChild(nt).setAttribute("name","D"),be.querySelectorAll("[name=d]").length&&Dt.push("name"+_n+"*[*^$|!~]?="),2!==be.querySelectorAll(":enabled").length&&Dt.push(":enabled",":disabled"),Ht.appendChild(be).disabled=!0,2!==be.querySelectorAll(":disabled").length&&Dt.push(":enabled",":disabled"),be.querySelectorAll("*,:x"),Dt.push(",.*:")})),(x.matchesSelector=to.test(tn=Ht.matches||Ht.webkitMatchesSelector||Ht.mozMatchesSelector||Ht.oMatchesSelector||Ht.msMatchesSelector))&&rr(function(be){x.disconnectedMatch=tn.call(be,"*"),tn.call(be,"[s!='']:x"),wr.push("!=",Dn)}),Dt=Dt.length&&new RegExp(Dt.join("|")),wr=wr.length&&new RegExp(wr.join("|")),fe=to.test(Ht.compareDocumentPosition),Sr=fe||to.test(Ht.contains)?function(be,nt){var st=9===be.nodeType?be.documentElement:be,yt=nt&&nt.parentNode;return be===yt||!(!yt||1!==yt.nodeType||!(st.contains?st.contains(yt):be.compareDocumentPosition&&16&be.compareDocumentPosition(yt)))}:function(be,nt){if(nt)for(;nt=nt.parentNode;)if(nt===be)return!0;return!1},Fi=fe?function(be,nt){if(be===nt)return lt=!0,0;var st=!be.compareDocumentPosition-!nt.compareDocumentPosition;return st||(1&(st=(be.ownerDocument||be)==(nt.ownerDocument||nt)?be.compareDocumentPosition(nt):1)||!x.sortDetached&&nt.compareDocumentPosition(be)===st?be==et||be.ownerDocument==cn&&Sr(cn,be)?-1:nt==et||nt.ownerDocument==cn&&Sr(cn,nt)?1:je?Kr(je,be)-Kr(je,nt):0:4&st?-1:1)}:function(be,nt){if(be===nt)return lt=!0,0;var st,yt=0,Tt=be.parentNode,vt=nt.parentNode,Ut=[be],Nt=[nt];if(!Tt||!vt)return be==et?-1:nt==et?1:Tt?-1:vt?1:je?Kr(je,be)-Kr(je,nt):0;if(Tt===vt)return no(be,nt);for(st=be;st=st.parentNode;)Ut.unshift(st);for(st=nt;st=st.parentNode;)Nt.unshift(st);for(;Ut[yt]===Nt[yt];)yt++;return yt?no(Ut[yt],Nt[yt]):Ut[yt]==cn?-1:Nt[yt]==cn?1:0}),et},Xt.matches=function(q,fe){return Xt(q,null,null,fe)},Xt.matchesSelector=function(q,fe){if(Fe(q),x.matchesSelector&&Yt&&!ri[fe+" "]&&(!wr||!wr.test(fe))&&(!Dt||!Dt.test(fe)))try{var Ce=tn.call(q,fe);if(Ce||x.disconnectedMatch||q.document&&11!==q.document.nodeType)return Ce}catch(Ze){ri(fe,!0)}return Xt(fe,et,null,[q]).length>0},Xt.contains=function(q,fe){return(q.ownerDocument||q)!=et&&Fe(q),Sr(q,fe)},Xt.attr=function(q,fe){(q.ownerDocument||q)!=et&&Fe(q);var Ce=w.attrHandle[fe.toLowerCase()],Ze=Ce&&jt.call(w.attrHandle,fe.toLowerCase())?Ce(q,fe,!Yt):void 0;return void 0!==Ze?Ze:x.attributes||!Yt?q.getAttribute(fe):(Ze=q.getAttributeNode(fe))&&Ze.specified?Ze.value:null},Xt.escape=function(q){return(q+"").replace(vu,Hr)},Xt.error=function(q){throw new Error("Syntax error, unrecognized expression: "+q)},Xt.uniqueSort=function(q){var fe,Ce=[],Ze=0,be=0;if(lt=!x.detectDuplicates,je=!x.sortStable&&q.slice(0),q.sort(Fi),lt){for(;fe=q[be++];)fe===q[be]&&(Ze=Ce.push(be));for(;Ze--;)q.splice(Ce[Ze],1)}return je=null,q},F=Xt.getText=function(q){var fe,Ce="",Ze=0,be=q.nodeType;if(be){if(1===be||9===be||11===be){if("string"==typeof q.textContent)return q.textContent;for(q=q.firstChild;q;q=q.nextSibling)Ce+=F(q)}else if(3===be||4===be)return q.nodeValue}else for(;fe=q[Ze++];)Ce+=F(fe);return Ce},(w=Xt.selectors={cacheLength:50,createPseudo:Qr,match:js,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(q){return q[1]=q[1].replace(Zn,Ei),q[3]=(q[3]||q[4]||q[5]||"").replace(Zn,Ei),"~="===q[2]&&(q[3]=" "+q[3]+" "),q.slice(0,4)},CHILD:function(q){return q[1]=q[1].toLowerCase(),"nth"===q[1].slice(0,3)?(q[3]||Xt.error(q[0]),q[4]=+(q[4]?q[5]+(q[6]||1):2*("even"===q[3]||"odd"===q[3])),q[5]=+(q[7]+q[8]||"odd"===q[3])):q[3]&&Xt.error(q[0]),q},PSEUDO:function(q){var fe,Ce=!q[6]&&q[2];return js.CHILD.test(q[0])?null:(q[3]?q[2]=q[4]||q[5]||"":Ce&&gu.test(Ce)&&(fe=X(Ce,!0))&&(fe=Ce.indexOf(")",Ce.length-fe)-Ce.length)&&(q[0]=q[0].slice(0,fe),q[2]=Ce.slice(0,fe)),q.slice(0,3))}},filter:{TAG:function(q){var fe=q.replace(Zn,Ei).toLowerCase();return"*"===q?function(){return!0}:function(Ce){return Ce.nodeName&&Ce.nodeName.toLowerCase()===fe}},CLASS:function(q){var fe=vr[q+" "];return fe||(fe=new RegExp("(^|"+_n+")"+q+"("+_n+"|$)"))&&vr(q,function(Ce){return fe.test("string"==typeof Ce.className&&Ce.className||void 0!==Ce.getAttribute&&Ce.getAttribute("class")||"")})},ATTR:function(q,fe,Ce){return function(Ze){var be=Xt.attr(Ze,q);return null==be?"!="===fe:!fe||(be+="","="===fe?be===Ce:"!="===fe?be!==Ce:"^="===fe?Ce&&0===be.indexOf(Ce):"*="===fe?Ce&&be.indexOf(Ce)>-1:"$="===fe?Ce&&be.slice(-Ce.length)===Ce:"~="===fe?(" "+be.replace(bn," ")+" ").indexOf(Ce)>-1:"|="===fe&&(be===Ce||be.slice(0,Ce.length+1)===Ce+"-"))}},CHILD:function(q,fe,Ce,Ze,be){var nt="nth"!==q.slice(0,3),st="last"!==q.slice(-4),yt="of-type"===fe;return 1===Ze&&0===be?function(Tt){return!!Tt.parentNode}:function(Tt,vt,Ut){var Nt,Kt,jn,zt,gr,kr,fi=nt!==st?"nextSibling":"previousSibling",qn=Tt.parentNode,wa=yt&&Tt.nodeName.toLowerCase(),xo=!Ut&&!yt,Lr=!1;if(qn){if(nt){for(;fi;){for(zt=Tt;zt=zt[fi];)if(yt?zt.nodeName.toLowerCase()===wa:1===zt.nodeType)return!1;kr=fi="only"===q&&!kr&&"nextSibling"}return!0}if(kr=[st?qn.firstChild:qn.lastChild],st&&xo){for(Lr=(gr=(Nt=(Kt=(jn=(zt=qn)[Hn]||(zt[Hn]={}))[zt.uniqueID]||(jn[zt.uniqueID]={}))[q]||[])[0]===ni&&Nt[1])&&Nt[2],zt=gr&&qn.childNodes[gr];zt=++gr&&zt&&zt[fi]||(Lr=gr=0)||kr.pop();)if(1===zt.nodeType&&++Lr&&zt===Tt){Kt[q]=[ni,gr,Lr];break}}else if(xo&&(Lr=gr=(Nt=(Kt=(jn=(zt=Tt)[Hn]||(zt[Hn]={}))[zt.uniqueID]||(jn[zt.uniqueID]={}))[q]||[])[0]===ni&&Nt[1]),!1===Lr)for(;(zt=++gr&&zt&&zt[fi]||(Lr=gr=0)||kr.pop())&&((yt?zt.nodeName.toLowerCase()!==wa:1!==zt.nodeType)||!++Lr||(xo&&((Kt=(jn=zt[Hn]||(zt[Hn]={}))[zt.uniqueID]||(jn[zt.uniqueID]={}))[q]=[ni,Lr]),zt!==Tt)););return(Lr-=be)===Ze||Lr%Ze==0&&Lr/Ze>=0}}},PSEUDO:function(q,fe){var Ce,Ze=w.pseudos[q]||w.setFilters[q.toLowerCase()]||Xt.error("unsupported pseudo: "+q);return Ze[Hn]?Ze(fe):Ze.length>1?(Ce=[q,q,"",fe],w.setFilters.hasOwnProperty(q.toLowerCase())?Qr(function(be,nt){for(var st,yt=Ze(be,fe),Tt=yt.length;Tt--;)be[st=Kr(be,yt[Tt])]=!(nt[st]=yt[Tt])}):function(be){return Ze(be,0,Ce)}):Ze}},pseudos:{not:Qr(function(q){var fe=[],Ce=[],Ze=he(q.replace(ua,"$1"));return Ze[Hn]?Qr(function(be,nt,st,yt){for(var Tt,vt=Ze(be,null,yt,[]),Ut=be.length;Ut--;)(Tt=vt[Ut])&&(be[Ut]=!(nt[Ut]=Tt))}):function(be,nt,st){return fe[0]=be,Ze(fe,null,st,Ce),fe[0]=null,!Ce.pop()}}),has:Qr(function(q){return function(fe){return Xt(q,fe).length>0}}),contains:Qr(function(q){return q=q.replace(Zn,Ei),function(fe){return(fe.textContent||F(fe)).indexOf(q)>-1}}),lang:Qr(function(q){return rl.test(q||"")||Xt.error("unsupported lang: "+q),q=q.replace(Zn,Ei).toLowerCase(),function(fe){var Ce;do{if(Ce=Yt?fe.lang:fe.getAttribute("xml:lang")||fe.getAttribute("lang"))return(Ce=Ce.toLowerCase())===q||0===Ce.indexOf(q+"-")}while((fe=fe.parentNode)&&1===fe.nodeType);return!1}}),target:function(q){var fe=l.location&&l.location.hash;return fe&&fe.slice(1)===q.id},root:function(q){return q===Ht},focus:function(q){return q===et.activeElement&&(!et.hasFocus||et.hasFocus())&&!!(q.type||q.href||~q.tabIndex)},enabled:Ee(!1),disabled:Ee(!0),checked:function(q){var fe=q.nodeName.toLowerCase();return"input"===fe&&!!q.checked||"option"===fe&&!!q.selected},selected:function(q){return!0===q.selected},empty:function(q){for(q=q.firstChild;q;q=q.nextSibling)if(q.nodeType<6)return!1;return!0},parent:function(q){return!w.pseudos.empty(q)},header:function(q){return Or.test(q.nodeName)},input:function(q){return ci.test(q.nodeName)},button:function(q){var fe=q.nodeName.toLowerCase();return"input"===fe&&"button"===q.type||"button"===fe},text:function(q){var fe;return"input"===q.nodeName.toLowerCase()&&"text"===q.type&&(null==(fe=q.getAttribute("type"))||"text"===fe.toLowerCase())},first:Ke(function(){return[0]}),last:Ke(function(q,fe){return[fe-1]}),eq:Ke(function(q,fe,Ce){return[Ce<0?Ce+fe:Ce]}),even:Ke(function(q,fe){for(var Ce=0;Ce<fe;Ce+=2)q.push(Ce);return q}),odd:Ke(function(q,fe){for(var Ce=1;Ce<fe;Ce+=2)q.push(Ce);return q}),lt:Ke(function(q,fe,Ce){for(var Ze=Ce<0?Ce+fe:Ce>fe?fe:Ce;--Ze>=0;)q.push(Ze);return q}),gt:Ke(function(q,fe,Ce){for(var Ze=Ce<0?Ce+fe:Ce;++Ze<fe;)q.push(Ze);return q})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[d]=il(d);for(d in{submit:!0,reset:!0})w.pseudos[d]=Qa(d);function At(){}function sn(q){for(var fe=0,Ce=q.length,Ze="";fe<Ce;fe++)Ze+=q[fe].value;return Ze}function Sn(q,fe,Ce){var Ze=fe.dir,be=fe.next,nt=be||Ze,st=Ce&&"parentNode"===nt,yt=an++;return fe.first?function(Tt,vt,Ut){for(;Tt=Tt[Ze];)if(1===Tt.nodeType||st)return q(Tt,vt,Ut);return!1}:function(Tt,vt,Ut){var Nt,Kt,jn,zt=[ni,yt];if(Ut){for(;Tt=Tt[Ze];)if((1===Tt.nodeType||st)&&q(Tt,vt,Ut))return!0}else for(;Tt=Tt[Ze];)if(1===Tt.nodeType||st)if(Kt=(jn=Tt[Hn]||(Tt[Hn]={}))[Tt.uniqueID]||(jn[Tt.uniqueID]={}),be&&be===Tt.nodeName.toLowerCase())Tt=Tt[Ze]||Tt;else{if((Nt=Kt[nt])&&Nt[0]===ni&&Nt[1]===yt)return zt[2]=Nt[2];if(Kt[nt]=zt,zt[2]=q(Tt,vt,Ut))return!0}return!1}}function mr(q){return q.length>1?function(fe,Ce,Ze){for(var be=q.length;be--;)if(!q[be](fe,Ce,Ze))return!1;return!0}:q[0]}function Bo(q,fe,Ce,Ze,be){for(var nt,st=[],yt=0,Tt=q.length,vt=null!=fe;yt<Tt;yt++)(nt=q[yt])&&(!Ce||Ce(nt,Ze,be))&&(st.push(nt),vt&&fe.push(yt));return st}function ro(q,fe,Ce,Ze,be,nt){return Ze&&!Ze[Hn]&&(Ze=ro(Ze)),be&&!be[Hn]&&(be=ro(be,nt)),Qr(function(st,yt,Tt,vt){var Ut,Nt,Kt,jn=[],zt=[],gr=yt.length,kr=st||function Xn(q,fe,Ce){for(var Ze=0,be=fe.length;Ze<be;Ze++)Xt(q,fe[Ze],Ce);return Ce}(fe||"*",Tt.nodeType?[Tt]:Tt,[]),fi=!q||!st&&fe?kr:Bo(kr,jn,q,Tt,vt),qn=Ce?be||(st?q:gr||Ze)?[]:yt:fi;if(Ce&&Ce(fi,qn,Tt,vt),Ze)for(Ut=Bo(qn,zt),Ze(Ut,[],Tt,vt),Nt=Ut.length;Nt--;)(Kt=Ut[Nt])&&(qn[zt[Nt]]=!(fi[zt[Nt]]=Kt));if(st){if(be||q){if(be){for(Ut=[],Nt=qn.length;Nt--;)(Kt=qn[Nt])&&Ut.push(fi[Nt]=Kt);be(null,qn=[],Ut,vt)}for(Nt=qn.length;Nt--;)(Kt=qn[Nt])&&(Ut=be?Kr(st,Kt):jn[Nt])>-1&&(st[Ut]=!(yt[Ut]=Kt))}}else qn=Bo(qn===yt?qn.splice(gr,qn.length):qn),be?be(null,yt,qn,vt):Bi.apply(yt,qn)})}function Ur(q){for(var fe,Ce,Ze,be=q.length,nt=w.relative[q[0].type],st=nt||w.relative[" "],yt=nt?1:0,Tt=Sn(function(Nt){return Nt===fe},st,!0),vt=Sn(function(Nt){return Kr(fe,Nt)>-1},st,!0),Ut=[function(Nt,Kt,jn){var zt=!nt&&(jn||Kt!==Oe)||((fe=Kt).nodeType?Tt(Nt,Kt,jn):vt(Nt,Kt,jn));return fe=null,zt}];yt<be;yt++)if(Ce=w.relative[q[yt].type])Ut=[Sn(mr(Ut),Ce)];else{if((Ce=w.filter[q[yt].type].apply(null,q[yt].matches))[Hn]){for(Ze=++yt;Ze<be&&!w.relative[q[Ze].type];Ze++);return ro(yt>1&&mr(Ut),yt>1&&sn(q.slice(0,yt-1).concat({value:" "===q[yt-2].type?"*":""})).replace(ua,"$1"),Ce,yt<Ze&&Ur(q.slice(yt,Ze)),Ze<be&&Ur(q=q.slice(Ze)),Ze<be&&sn(q))}Ut.push(Ce)}return mr(Ut)}return At.prototype=w.filters=w.pseudos,w.setFilters=new At,X=Xt.tokenize=function(q,fe){var Ce,Ze,be,nt,st,yt,Tt,vt=xs[q+" "];if(vt)return fe?0:vt.slice(0);for(st=q,yt=[],Tt=w.preFilter;st;){for(nt in(!Ce||(Ze=hu.exec(st)))&&(Ze&&(st=st.slice(Ze[0].length)||st),yt.push(be=[])),Ce=!1,(Ze=pu.exec(st))&&(Ce=Ze.shift(),be.push({value:Ce,type:Ze[0].replace(ua," ")}),st=st.slice(Ce.length)),w.filter)(Ze=js[nt].exec(st))&&(!Tt[nt]||(Ze=Tt[nt](Ze)))&&(Ce=Ze.shift(),be.push({value:Ce,type:nt,matches:Ze}),st=st.slice(Ce.length));if(!Ce)break}return fe?st.length:st?Xt.error(q):xs(q,yt).slice(0)},he=Xt.compile=function(q,fe){var Ce,Ze=[],be=[],nt=_s[q+" "];if(!nt){for(fe||(fe=X(q)),Ce=fe.length;Ce--;)(nt=Ur(fe[Ce]))[Hn]?Ze.push(nt):be.push(nt);nt=_s(q,function Za(q,fe){var Ce=fe.length>0,Ze=q.length>0,be=function(nt,st,yt,Tt,vt){var Ut,Nt,Kt,jn=0,zt="0",gr=nt&&[],kr=[],fi=Oe,qn=nt||Ze&&w.find.TAG("*",vt),wa=ni+=null==fi?1:Math.random()||.1,xo=qn.length;for(vt&&(Oe=st==et||st||vt);zt!==xo&&null!=(Ut=qn[zt]);zt++){if(Ze&&Ut){for(Nt=0,!st&&Ut.ownerDocument!=et&&(Fe(Ut),yt=!Yt);Kt=q[Nt++];)if(Kt(Ut,st||et,yt)){Tt.push(Ut);break}vt&&(ni=wa)}Ce&&((Ut=!Kt&&Ut)&&jn--,nt&&gr.push(Ut))}if(jn+=zt,Ce&&zt!==jn){for(Nt=0;Kt=fe[Nt++];)Kt(gr,kr,st,yt);if(nt){if(jn>0)for(;zt--;)gr[zt]||kr[zt]||(kr[zt]=Vi.call(Tt));kr=Bo(kr)}Bi.apply(Tt,kr),vt&&!nt&&kr.length>0&&jn+fe.length>1&&Xt.uniqueSort(Tt)}return vt&&(ni=wa,Oe=fi),gr};return Ce?Qr(be):be}(be,Ze)),nt.selector=q}return nt},ce=Xt.select=function(q,fe,Ce,Ze){var be,nt,st,yt,Tt,vt="function"==typeof q&&q,Ut=!Ze&&X(q=vt.selector||q);if(Ce=Ce||[],1===Ut.length){if((nt=Ut[0]=Ut[0].slice(0)).length>2&&"ID"===(st=nt[0]).type&&9===fe.nodeType&&Yt&&w.relative[nt[1].type]){if(!(fe=(w.find.ID(st.matches[0].replace(Zn,Ei),fe)||[])[0]))return Ce;vt&&(fe=fe.parentNode),q=q.slice(nt.shift().value.length)}for(be=js.needsContext.test(q)?0:nt.length;be--&&!w.relative[yt=(st=nt[be]).type];)if((Tt=w.find[yt])&&(Ze=Tt(st.matches[0].replace(Zn,Ei),Gs.test(nt[0].type)&&$e(fe.parentNode)||fe))){if(nt.splice(be,1),!(q=Ze.length&&sn(nt)))return Bi.apply(Ce,Ze),Ce;break}}return(vt||he(q,Ut))(Ze,fe,!Yt,Ce,!fe||Gs.test(q)&&$e(fe.parentNode)||fe),Ce},x.sortStable=Hn.split("").sort(Fi).join("")===Hn,x.detectDuplicates=!!lt,Fe(),x.sortDetached=rr(function(q){return 1&q.compareDocumentPosition(et.createElement("fieldset"))}),rr(function(q){return q.innerHTML="<a href='#'></a>","#"===q.firstChild.getAttribute("href")})||Cs("type|href|height|width",function(q,fe,Ce){if(!Ce)return q.getAttribute(fe,"type"===fe.toLowerCase()?1:2)}),(!x.attributes||!rr(function(q){return q.innerHTML="<input/>",q.firstChild.setAttribute("value",""),""===q.firstChild.getAttribute("value")}))&&Cs("value",function(q,fe,Ce){if(!Ce&&"input"===q.nodeName.toLowerCase())return q.defaultValue}),rr(function(q){return null==q.getAttribute("disabled")})||Cs(Jr,function(q,fe,Ce){var Ze;if(!Ce)return!0===q[fe]?fe.toLowerCase():(Ze=q.getAttributeNode(fe))&&Ze.specified?Ze.value:null}),Xt}(v);b.find=at,b.expr=at.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=at.uniqueSort,b.text=at.getText,b.isXMLDoc=at.isXML,b.contains=at.contains,b.escapeSelector=at.escape;var Ge=function(l,d,x){for(var w=[],F=void 0!==x;(l=l[d])&&9!==l.nodeType;)if(1===l.nodeType){if(F&&b(l).is(x))break;w.push(l)}return w},Re=function(l,d){for(var x=[];l;l=l.nextSibling)1===l.nodeType&&l!==d&&x.push(l);return x},Ne=b.expr.match.needsContext;function tt(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var Je=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function pt(l,d,x){return ae(d)?b.grep(l,function(w,F){return!!d.call(w,F,w)!==x}):d.nodeType?b.grep(l,function(w){return w===d!==x}):"string"!=typeof d?b.grep(l,function(w){return D.call(d,w)>-1!==x}):b.filter(d,l,x)}b.filter=function(l,d,x){var w=d[0];return x&&(l=":not("+l+")"),1===d.length&&1===w.nodeType?b.find.matchesSelector(w,l)?[w]:[]:b.find.matches(l,b.grep(d,function(F){return 1===F.nodeType}))},b.fn.extend({find:function(l){var d,x,w=this.length,F=this;if("string"!=typeof l)return this.pushStack(b(l).filter(function(){for(d=0;d<w;d++)if(b.contains(F[d],this))return!0}));for(x=this.pushStack([]),d=0;d<w;d++)b.find(l,F[d],x);return w>1?b.uniqueSort(x):x},filter:function(l){return this.pushStack(pt(this,l||[],!1))},not:function(l){return this.pushStack(pt(this,l||[],!0))},is:function(l){return!!pt(this,"string"==typeof l&&Ne.test(l)?b(l):l||[],!1).length}});var _t,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,on=b.fn.init=function(l,d,x){var w,F;if(!l)return this;if(x=x||_t,"string"==typeof l){if(!(w="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:gt.exec(l))||!w[1]&&d)return!d||d.jquery?(d||x).find(l):this.constructor(d).find(l);if(w[1]){if(b.merge(this,b.parseHTML(w[1],(d=d instanceof b?d[0]:d)&&d.nodeType?d.ownerDocument||d:le,!0)),Je.test(w[1])&&b.isPlainObject(d))for(w in d)ae(this[w])?this[w](d[w]):this.attr(w,d[w]);return this}return(F=le.getElementById(w[2]))&&(this[0]=F,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):ae(l)?void 0!==x.ready?x.ready(l):l(b):b.makeArray(l,this)};on.prototype=b.fn,_t=b(le);var gn=/^(?:parents|prev(?:Until|All))/,Vn={children:!0,contents:!0,next:!0,prev:!0};function $n(l,d){for(;(l=l[d])&&1!==l.nodeType;);return l}b.fn.extend({has:function(l){var d=b(l,this),x=d.length;return this.filter(function(){for(var w=0;w<x;w++)if(b.contains(this,d[w]))return!0})},closest:function(l,d){var x,w=0,F=this.length,H=[],X="string"!=typeof l&&b(l);if(!Ne.test(l))for(;w<F;w++)for(x=this[w];x&&x!==d;x=x.parentNode)if(x.nodeType<11&&(X?X.index(x)>-1:1===x.nodeType&&b.find.matchesSelector(x,l))){H.push(x);break}return this.pushStack(H.length>1?b.uniqueSort(H):H)},index:function(l){return l?"string"==typeof l?D.call(b(l),this[0]):D.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(l,d))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),b.each({parent:function(l){var d=l.parentNode;return d&&11!==d.nodeType?d:null},parents:function(l){return Ge(l,"parentNode")},parentsUntil:function(l,d,x){return Ge(l,"parentNode",x)},next:function(l){return $n(l,"nextSibling")},prev:function(l){return $n(l,"previousSibling")},nextAll:function(l){return Ge(l,"nextSibling")},prevAll:function(l){return Ge(l,"previousSibling")},nextUntil:function(l,d,x){return Ge(l,"nextSibling",x)},prevUntil:function(l,d,x){return Ge(l,"previousSibling",x)},siblings:function(l){return Re((l.parentNode||{}).firstChild,l)},children:function(l){return Re(l.firstChild)},contents:function(l){return null!=l.contentDocument&&y(l.contentDocument)?l.contentDocument:(tt(l,"template")&&(l=l.content||l),b.merge([],l.childNodes))}},function(l,d){b.fn[l]=function(x,w){var F=b.map(this,d,x);return"Until"!==l.slice(-5)&&(w=x),w&&"string"==typeof w&&(F=b.filter(w,F)),this.length>1&&(Vn[l]||b.uniqueSort(F),gn.test(l)&&F.reverse()),this.pushStack(F)}});var Bn=/[^\x20\t\r\n\f]+/g;function Gn(l){return l}function We(l){throw l}function qe(l,d,x,w){var F;try{l&&ae(F=l.promise)?F.call(l).done(d).fail(x):l&&ae(F=l.then)?F.call(l,d,x):d.apply(void 0,[l].slice(w))}catch(H){x.apply(void 0,[H])}}b.Callbacks=function(l){l="string"==typeof l?function dr(l){var d={};return b.each(l.match(Bn)||[],function(x,w){d[w]=!0}),d}(l):b.extend({},l);var d,x,w,F,H=[],X=[],he=-1,ce=function(){for(F=F||l.once,w=d=!0;X.length;he=-1)for(x=X.shift();++he<H.length;)!1===H[he].apply(x[0],x[1])&&l.stopOnFalse&&(he=H.length,x=!1);l.memory||(x=!1),d=!1,F&&(H=x?[]:"")},Oe={add:function(){return H&&(x&&!d&&(he=H.length-1,X.push(x)),function je(lt){b.each(lt,function(Fe,et){ae(et)?(!l.unique||!Oe.has(et))&&H.push(et):et&&et.length&&"string"!==we(et)&&je(et)})}(arguments),x&&!d&&ce()),this},remove:function(){return b.each(arguments,function(je,lt){for(var Fe;(Fe=b.inArray(lt,H,Fe))>-1;)H.splice(Fe,1),Fe<=he&&he--}),this},has:function(je){return je?b.inArray(je,H)>-1:H.length>0},empty:function(){return H&&(H=[]),this},disable:function(){return F=X=[],H=x="",this},disabled:function(){return!H},lock:function(){return F=X=[],!x&&!d&&(H=x=""),this},locked:function(){return!!F},fireWith:function(je,lt){return F||(lt=[je,(lt=lt||[]).slice?lt.slice():lt],X.push(lt),d||ce()),this},fire:function(){return Oe.fireWith(this,arguments),this},fired:function(){return!!w}};return Oe},b.extend({Deferred:function(l){var d=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],x="pending",w={state:function(){return x},always:function(){return F.done(arguments).fail(arguments),this},catch:function(H){return w.then(null,H)},pipe:function(){var H=arguments;return b.Deferred(function(X){b.each(d,function(he,ce){var Oe=ae(H[ce[4]])&&H[ce[4]];F[ce[1]](function(){var je=Oe&&Oe.apply(this,arguments);je&&ae(je.promise)?je.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[ce[0]+"With"](this,Oe?[je]:arguments)})}),H=null}).promise()},then:function(H,X,he){var ce=0;function Oe(je,lt,Fe,et){return function(){var Ht=this,Yt=arguments,Dt=function(){var tn,Sr;if(!(je<ce)){if((tn=Fe.apply(Ht,Yt))===lt.promise())throw new TypeError("Thenable self-resolution");ae(Sr=tn&&("object"==typeof tn||"function"==typeof tn)&&tn.then)?et?Sr.call(tn,Oe(ce,lt,Gn,et),Oe(ce,lt,We,et)):(ce++,Sr.call(tn,Oe(ce,lt,Gn,et),Oe(ce,lt,We,et),Oe(ce,lt,Gn,lt.notifyWith))):(Fe!==Gn&&(Ht=void 0,Yt=[tn]),(et||lt.resolveWith)(Ht,Yt))}},wr=et?Dt:function(){try{Dt()}catch(tn){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(tn,wr.stackTrace),je+1>=ce&&(Fe!==We&&(Ht=void 0,Yt=[tn]),lt.rejectWith(Ht,Yt))}};je?wr():(b.Deferred.getStackHook&&(wr.stackTrace=b.Deferred.getStackHook()),v.setTimeout(wr))}}return b.Deferred(function(je){d[0][3].add(Oe(0,je,ae(he)?he:Gn,je.notifyWith)),d[1][3].add(Oe(0,je,ae(H)?H:Gn)),d[2][3].add(Oe(0,je,ae(X)?X:We))}).promise()},promise:function(H){return null!=H?b.extend(H,w):w}},F={};return b.each(d,function(H,X){var he=X[2],ce=X[5];w[X[1]]=he.add,ce&&he.add(function(){x=ce},d[3-H][2].disable,d[3-H][3].disable,d[0][2].lock,d[0][3].lock),he.add(X[3].fire),F[X[0]]=function(){return F[X[0]+"With"](this===F?void 0:this,arguments),this},F[X[0]+"With"]=he.fireWith}),w.promise(F),l&&l.call(F,F),F},when:function(l){var d=arguments.length,x=d,w=Array(x),F=I.call(arguments),H=b.Deferred(),X=function(he){return function(ce){w[he]=this,F[he]=arguments.length>1?I.call(arguments):ce,--d||H.resolveWith(w,F)}};if(d<=1&&(qe(l,H.done(X(x)).resolve,H.reject,!d),"pending"===H.state()||ae(F[x]&&F[x].then)))return H.then();for(;x--;)qe(F[x],X(x),H.reject);return H.promise()}});var ct=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(l,d){v.console&&v.console.warn&&l&&ct.test(l.name)&&v.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},b.readyException=function(l){v.setTimeout(function(){throw l})};var Ct=b.Deferred();function kt(){le.removeEventListener("DOMContentLoaded",kt),v.removeEventListener("load",kt),b.ready()}b.fn.ready=function(l){return Ct.then(l).catch(function(d){b.readyException(d)}),this},b.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--b.readyWait:b.isReady)||(b.isReady=!0,!(!0!==l&&--b.readyWait>0)&&Ct.resolveWith(le,[b]))}}),b.ready.then=Ct.then,"complete"===le.readyState||"loading"!==le.readyState&&!le.documentElement.doScroll?v.setTimeout(b.ready):(le.addEventListener("DOMContentLoaded",kt),v.addEventListener("load",kt));var pn=function(l,d,x,w,F,H,X){var he=0,ce=l.length,Oe=null==x;if("object"===we(x))for(he in F=!0,x)pn(l,d,he,x[he],!0,H,X);else if(void 0!==w&&(F=!0,ae(w)||(X=!0),Oe&&(X?(d.call(l,w),d=null):(Oe=d,d=function(je,lt,Fe){return Oe.call(b(je),Fe)})),d))for(;he<ce;he++)d(l[he],x,X?w:w.call(l[he],he,d(l[he],x)));return F?l:Oe?d.call(l):ce?d(l[0],x):H},Rt=/^-ms-/,hr=/-([a-z])/g;function ki(l,d){return d.toUpperCase()}function vn(l){return l.replace(Rt,"ms-").replace(hr,ki)}var un=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function N(){this.expando=b.expando+N.uid++}N.uid=1,N.prototype={cache:function(l){var d=l[this.expando];return d||(d={},un(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,x){var w,F=this.cache(l);if("string"==typeof d)F[vn(d)]=x;else for(w in d)F[vn(w)]=d[w];return F},get:function(l,d){return void 0===d?this.cache(l):l[this.expando]&&l[this.expando][vn(d)]},access:function(l,d,x){return void 0===d||d&&"string"==typeof d&&void 0===x?this.get(l,d):(this.set(l,d,x),void 0!==x?x:d)},remove:function(l,d){var x,w=l[this.expando];if(void 0!==w){if(void 0!==d)for((x=(d=Array.isArray(d)?d.map(vn):(d=vn(d))in w?[d]:d.match(Bn)||[]).length);x--;)delete w[d[x]];(void 0===d||b.isEmptyObject(w))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return void 0!==d&&!b.isEmptyObject(d)}};var U=new N,re=new N,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Qe=/[A-Z]/g;function wt(l,d,x){var w;if(void 0===x&&1===l.nodeType)if(w="data-"+d.replace(Qe,"-$&").toLowerCase(),"string"==typeof(x=l.getAttribute(w))){try{x=function Xe(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:xe.test(l)?JSON.parse(l):l)}(x)}catch(F){}re.set(l,d,x)}else x=void 0;return x}b.extend({hasData:function(l){return re.hasData(l)||U.hasData(l)},data:function(l,d,x){return re.access(l,d,x)},removeData:function(l,d){re.remove(l,d)},_data:function(l,d,x){return U.access(l,d,x)},_removeData:function(l,d){U.remove(l,d)}}),b.fn.extend({data:function(l,d){var x,w,F,H=this[0],X=H&&H.attributes;if(void 0===l){if(this.length&&(F=re.get(H),1===H.nodeType&&!U.get(H,"hasDataAttrs"))){for(x=X.length;x--;)X[x]&&0===(w=X[x].name).indexOf("data-")&&(w=vn(w.slice(5)),wt(H,w,F[w]));U.set(H,"hasDataAttrs",!0)}return F}return"object"==typeof l?this.each(function(){re.set(this,l)}):pn(this,function(he){var ce;if(H&&void 0===he)return void 0!==(ce=re.get(H,l))||void 0!==(ce=wt(H,l))?ce:void 0;this.each(function(){re.set(this,l,he)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),b.extend({queue:function(l,d,x){var w;if(l)return w=U.get(l,d=(d||"fx")+"queue"),x&&(!w||Array.isArray(x)?w=U.access(l,d,b.makeArray(x)):w.push(x)),w||[]},dequeue:function(l,d){var x=b.queue(l,d=d||"fx"),w=x.length,F=x.shift(),H=b._queueHooks(l,d);"inprogress"===F&&(F=x.shift(),w--),F&&("fx"===d&&x.unshift("inprogress"),delete H.stop,F.call(l,function(){b.dequeue(l,d)},H)),!w&&H&&H.empty.fire()},_queueHooks:function(l,d){var x=d+"queueHooks";return U.get(l,x)||U.access(l,x,{empty:b.Callbacks("once memory").add(function(){U.remove(l,[d+"queue",x])})})}}),b.fn.extend({queue:function(l,d){var x=2;return"string"!=typeof l&&(d=l,l="fx",x--),arguments.length<x?b.queue(this[0],l):void 0===d?this:this.each(function(){var w=b.queue(this,l,d);b._queueHooks(this,l),"fx"===l&&"inprogress"!==w[0]&&b.dequeue(this,l)})},dequeue:function(l){return this.each(function(){b.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var x,w=1,F=b.Deferred(),H=this,X=this.length,he=function(){--w||F.resolveWith(H,[H])};for("string"!=typeof l&&(d=l,l=void 0),l=l||"fx";X--;)(x=U.get(H[X],l+"queueHooks"))&&x.empty&&(w++,x.empty.add(he));return he(),F.promise(d)}});var Ft=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vt=new RegExp("^(?:([+-])=|)("+Ft+")([a-z%]*)$","i"),xn=["Top","Right","Bottom","Left"],In=le.documentElement,mn=function(l){return b.contains(l.ownerDocument,l)},pr={composed:!0};In.getRootNode&&(mn=function(l){return b.contains(l.ownerDocument,l)||l.getRootNode(pr)===l.ownerDocument});var or=function(l,d){return"none"===(l=d||l).style.display||""===l.style.display&&mn(l)&&"none"===b.css(l,"display")};function oi(l,d,x,w){var F,H,X=20,he=w?function(){return w.cur()}:function(){return b.css(l,d,"")},ce=he(),Oe=x&&x[3]||(b.cssNumber[d]?"":"px"),je=l.nodeType&&(b.cssNumber[d]||"px"!==Oe&&+ce)&&Vt.exec(b.css(l,d));if(je&&je[3]!==Oe){for(Oe=Oe||je[3],je=+(ce/=2)||1;X--;)b.style(l,d,je+Oe),(1-H)*(1-(H=he()/ce||.5))<=0&&(X=0),je/=H;b.style(l,d,(je*=2)+Oe),x=x||[]}return x&&(je=+je||+ce||0,F=x[1]?je+(x[1]+1)*x[2]:+x[2],w&&(w.unit=Oe,w.start=je,w.end=F)),F}var Un={};function Ot(l){var d,x=l.ownerDocument,w=l.nodeName,F=Un[w];return F||(d=x.body.appendChild(x.createElement(w)),F=b.css(d,"display"),d.parentNode.removeChild(d),"none"===F&&(F="block"),Un[w]=F,F)}function Jn(l,d){for(var x,w,F=[],H=0,X=l.length;H<X;H++)(w=l[H]).style&&(x=w.style.display,d?("none"===x&&(F[H]=U.get(w,"display")||null,F[H]||(w.style.display="")),""===w.style.display&&or(w)&&(F[H]=Ot(w))):"none"!==x&&(F[H]="none",U.set(w,"display",x)));for(H=0;H<X;H++)null!=F[H]&&(l[H].style.display=F[H]);return l}b.fn.extend({show:function(){return Jn(this,!0)},hide:function(){return Jn(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){or(this)?b(this).show():b(this).hide()})}});var d,x,ur=/^(?:checkbox|radio)$/i,Mr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ai=/^$|^module$|\/(?:java|ecma)script/i;d=le.createDocumentFragment().appendChild(le.createElement("div")),(x=le.createElement("input")).setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),d.appendChild(x),i.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",i.option=!!d.lastChild;var Cr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xr(l,d){var x;return x=void 0!==l.getElementsByTagName?l.getElementsByTagName(d||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(d||"*"):[],void 0===d||d&&tt(l,d)?b.merge([l],x):x}function Qo(l,d){for(var x=0,w=l.length;x<w;x++)U.set(l[x],"globalEval",!d||U.get(d[x],"globalEval"))}Cr.tbody=Cr.tfoot=Cr.colgroup=Cr.caption=Cr.thead,Cr.th=Cr.td,i.option||(Cr.optgroup=Cr.option=[1,"<select multiple='multiple'>","</select>"]);var ja=/<|&#?\w+;/;function Oo(l,d,x,w,F){for(var H,X,he,ce,Oe,je,lt=d.createDocumentFragment(),Fe=[],et=0,Ht=l.length;et<Ht;et++)if((H=l[et])||0===H)if("object"===we(H))b.merge(Fe,H.nodeType?[H]:H);else if(ja.test(H)){for(X=X||lt.appendChild(d.createElement("div")),he=(Mr.exec(H)||["",""])[1].toLowerCase(),X.innerHTML=(ce=Cr[he]||Cr._default)[1]+b.htmlPrefilter(H)+ce[2],je=ce[0];je--;)X=X.lastChild;b.merge(Fe,X.childNodes),(X=lt.firstChild).textContent=""}else Fe.push(d.createTextNode(H));for(lt.textContent="",et=0;H=Fe[et++];)if(w&&b.inArray(H,w)>-1)F&&F.push(H);else if(Oe=mn(H),X=xr(lt.appendChild(H),"script"),Oe&&Qo(X),x)for(je=0;H=X[je++];)ai.test(H.type||"")&&x.push(H);return lt}var Zo=/^([^.]*)(?:\.(.+)|)/;function ye(){return!0}function mi(){return!1}function uo(l,d){return l===function qo(){try{return le.activeElement}catch(l){}}()==("focus"===d)}function St(l,d,x,w,F,H){var X,he;if("object"==typeof d){for(he in"string"!=typeof x&&(w=w||x,x=void 0),d)St(l,he,x,w,d[he],H);return l}if(null==w&&null==F?(F=x,w=x=void 0):null==F&&("string"==typeof x?(F=w,w=void 0):(F=w,w=x,x=void 0)),!1===F)F=mi;else if(!F)return l;return 1===H&&(X=F,F=function(ce){return b().off(ce),X.apply(this,arguments)},F.guid=X.guid||(X.guid=b.guid++)),l.each(function(){b.event.add(this,d,F,w,x)})}function si(l,d,x){x?(U.set(l,d,!1),b.event.add(l,d,{namespace:!1,handler:function(w){var F,H,X=U.get(this,d);if(1&w.isTrigger&&this[d]){if(X.length)(b.event.special[d]||{}).delegateType&&w.stopPropagation();else if(X=I.call(arguments),U.set(this,d,X),F=x(this,d),this[d](),X!==(H=U.get(this,d))||F?U.set(this,d,!1):H={},X!==H)return w.stopImmediatePropagation(),w.preventDefault(),H&&H.value}else X.length&&(U.set(this,d,{value:b.event.trigger(b.extend(X[0],b.Event.prototype),X.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===U.get(l,d)&&b.event.add(l,d,ye)}b.event={global:{},add:function(l,d,x,w,F){var H,X,he,ce,Oe,je,lt,Fe,et,Ht,Yt,Dt=U.get(l);if(un(l))for(x.handler&&(x=(H=x).handler,F=H.selector),F&&b.find.matchesSelector(In,F),x.guid||(x.guid=b.guid++),(ce=Dt.events)||(ce=Dt.events=Object.create(null)),(X=Dt.handle)||(X=Dt.handle=function(wr){return void 0!==b&&b.event.triggered!==wr.type?b.event.dispatch.apply(l,arguments):void 0}),Oe=(d=(d||"").match(Bn)||[""]).length;Oe--;)et=Yt=(he=Zo.exec(d[Oe])||[])[1],Ht=(he[2]||"").split(".").sort(),et&&(lt=b.event.special[et]||{},lt=b.event.special[et=(F?lt.delegateType:lt.bindType)||et]||{},je=b.extend({type:et,origType:Yt,data:w,handler:x,guid:x.guid,selector:F,needsContext:F&&b.expr.match.needsContext.test(F),namespace:Ht.join(".")},H),(Fe=ce[et])||((Fe=ce[et]=[]).delegateCount=0,(!lt.setup||!1===lt.setup.call(l,w,Ht,X))&&l.addEventListener&&l.addEventListener(et,X)),lt.add&&(lt.add.call(l,je),je.handler.guid||(je.handler.guid=x.guid)),F?Fe.splice(Fe.delegateCount++,0,je):Fe.push(je),b.event.global[et]=!0)},remove:function(l,d,x,w,F){var H,X,he,ce,Oe,je,lt,Fe,et,Ht,Yt,Dt=U.hasData(l)&&U.get(l);if(Dt&&(ce=Dt.events)){for(Oe=(d=(d||"").match(Bn)||[""]).length;Oe--;)if(et=Yt=(he=Zo.exec(d[Oe])||[])[1],Ht=(he[2]||"").split(".").sort(),et){for(lt=b.event.special[et]||{},Fe=ce[et=(w?lt.delegateType:lt.bindType)||et]||[],he=he[2]&&new RegExp("(^|\\.)"+Ht.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=H=Fe.length;H--;)je=Fe[H],(F||Yt===je.origType)&&(!x||x.guid===je.guid)&&(!he||he.test(je.namespace))&&(!w||w===je.selector||"**"===w&&je.selector)&&(Fe.splice(H,1),je.selector&&Fe.delegateCount--,lt.remove&&lt.remove.call(l,je));X&&!Fe.length&&((!lt.teardown||!1===lt.teardown.call(l,Ht,Dt.handle))&&b.removeEvent(l,et,Dt.handle),delete ce[et])}else for(et in ce)b.event.remove(l,et+d[Oe],x,w,!0);b.isEmptyObject(ce)&&U.remove(l,"handle events")}},dispatch:function(l){var d,x,w,F,H,X,he=new Array(arguments.length),ce=b.event.fix(l),Oe=(U.get(this,"events")||Object.create(null))[ce.type]||[],je=b.event.special[ce.type]||{};for(he[0]=ce,d=1;d<arguments.length;d++)he[d]=arguments[d];if(ce.delegateTarget=this,!je.preDispatch||!1!==je.preDispatch.call(this,ce)){for(X=b.event.handlers.call(this,ce,Oe),d=0;(F=X[d++])&&!ce.isPropagationStopped();)for(ce.currentTarget=F.elem,x=0;(H=F.handlers[x++])&&!ce.isImmediatePropagationStopped();)(!ce.rnamespace||!1===H.namespace||ce.rnamespace.test(H.namespace))&&(ce.handleObj=H,ce.data=H.data,void 0!==(w=((b.event.special[H.origType]||{}).handle||H.handler).apply(F.elem,he))&&!1===(ce.result=w)&&(ce.preventDefault(),ce.stopPropagation()));return je.postDispatch&&je.postDispatch.call(this,ce),ce.result}},handlers:function(l,d){var x,w,F,H,X,he=[],ce=d.delegateCount,Oe=l.target;if(ce&&Oe.nodeType&&!("click"===l.type&&l.button>=1))for(;Oe!==this;Oe=Oe.parentNode||this)if(1===Oe.nodeType&&("click"!==l.type||!0!==Oe.disabled)){for(H=[],X={},x=0;x<ce;x++)void 0===X[F=(w=d[x]).selector+" "]&&(X[F]=w.needsContext?b(F,this).index(Oe)>-1:b.find(F,this,null,[Oe]).length),X[F]&&H.push(w);H.length&&he.push({elem:Oe,handlers:H})}return Oe=this,ce<d.length&&he.push({elem:Oe,handlers:d.slice(ce)}),he},addProp:function(l,d){Object.defineProperty(b.Event.prototype,l,{enumerable:!0,configurable:!0,get:ae(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(x){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(l){return l[b.expando]?l:new b.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return ur.test(d.type)&&d.click&&tt(d,"input")&&si(d,"click",ye),!1},trigger:function(l){var d=this||l;return ur.test(d.type)&&d.click&&tt(d,"input")&&si(d,"click"),!0},_default:function(l){var d=l.target;return ur.test(d.type)&&d.click&&tt(d,"input")&&U.get(d,"click")||tt(d,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},b.removeEvent=function(l,d,x){l.removeEventListener&&l.removeEventListener(d,x)},b.Event=function(l,d){if(!(this instanceof b.Event))return new b.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?ye:mi,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&b.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:mi,isPropagationStopped:mi,isImmediatePropagationStopped:mi,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=ye,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=ye,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=ye,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(l,d){b.event.special[l]={setup:function(){return si(this,l,uo),!1},trigger:function(){return si(this,l),!0},_default:function(x){return U.get(x.target,l)},delegateType:d}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){b.event.special[l]={delegateType:d,bindType:d,handle:function(x){var w,F=this,H=x.relatedTarget,X=x.handleObj;return(!H||H!==F&&!b.contains(F,H))&&(x.type=X.origType,w=X.handler.apply(this,arguments),x.type=d),w}}}),b.fn.extend({on:function(l,d,x,w){return St(this,l,d,x,w)},one:function(l,d,x,w){return St(this,l,d,x,w,1)},off:function(l,d,x){var w,F;if(l&&l.preventDefault&&l.handleObj)return w=l.handleObj,b(l.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof l){for(F in l)this.off(F,d,l[F]);return this}return(!1===d||"function"==typeof d)&&(x=d,d=void 0),!1===x&&(x=mi),this.each(function(){b.event.remove(this,l,x,d)})}});var ko=/<script|<style|<link/i,Lo=/checked\s*(?:[^=]|=\s*.checked.)/i,lo=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ar(l,d){return tt(l,"table")&&tt(11!==d.nodeType?d:d.firstChild,"tr")&&b(l).children("tbody")[0]||l}function ea(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function zr(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function za(l,d){var x,w,F,X,he,ce;if(1===d.nodeType){if(U.hasData(l)&&(ce=U.get(l).events))for(F in U.remove(d,"handle events"),ce)for(x=0,w=ce[F].length;x<w;x++)b.event.add(d,F,ce[F][x]);re.hasData(l)&&(X=re.access(l),he=b.extend({},X),re.set(d,he))}}function Ga(l,d){var x=d.nodeName.toLowerCase();"input"===x&&ur.test(l.type)?d.checked=l.checked:("input"===x||"textarea"===x)&&(d.defaultValue=l.defaultValue)}function Yr(l,d,x,w){d=O(d);var F,H,X,he,ce,Oe,je=0,lt=l.length,Fe=lt-1,et=d[0],Ht=ae(et);if(Ht||lt>1&&"string"==typeof et&&!i.checkClone&&Lo.test(et))return l.each(function(Yt){var Dt=l.eq(Yt);Ht&&(d[0]=et.call(this,Yt,Dt.html())),Yr(Dt,d,x,w)});if(lt&&(H=(F=Oo(d,l[0].ownerDocument,!1,l,w)).firstChild,1===F.childNodes.length&&(F=H),H||w)){for(he=(X=b.map(xr(F,"script"),ea)).length;je<lt;je++)ce=F,je!==Fe&&(ce=b.clone(ce,!0,!0),he&&b.merge(X,xr(ce,"script"))),x.call(l[je],ce,je);if(he)for(Oe=X[X.length-1].ownerDocument,b.map(X,zr),je=0;je<he;je++)ai.test((ce=X[je]).type||"")&&!U.access(ce,"globalEval")&&b.contains(Oe,ce)&&(ce.src&&"module"!==(ce.type||"").toLowerCase()?b._evalUrl&&!ce.noModule&&b._evalUrl(ce.src,{nonce:ce.nonce||ce.getAttribute("nonce")},Oe):ve(ce.textContent.replace(lo,""),ce,Oe))}return l}function va(l,d,x){for(var w,F=d?b.filter(d,l):l,H=0;null!=(w=F[H]);H++)!x&&1===w.nodeType&&b.cleanData(xr(w)),w.parentNode&&(x&&mn(w)&&Qo(xr(w,"script")),w.parentNode.removeChild(w));return l}b.extend({htmlPrefilter:function(l){return l},clone:function(l,d,x){var w,F,H,X,he=l.cloneNode(!0),ce=mn(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||b.isXMLDoc(l)))for(X=xr(he),w=0,F=(H=xr(l)).length;w<F;w++)Ga(H[w],X[w]);if(d)if(x)for(H=H||xr(l),X=X||xr(he),w=0,F=H.length;w<F;w++)za(H[w],X[w]);else za(l,he);return(X=xr(he,"script")).length>0&&Qo(X,!ce&&xr(l,"script")),he},cleanData:function(l){for(var d,x,w,F=b.event.special,H=0;void 0!==(x=l[H]);H++)if(un(x)){if(d=x[U.expando]){if(d.events)for(w in d.events)F[w]?b.event.remove(x,w):b.removeEvent(x,w,d.handle);x[U.expando]=void 0}x[re.expando]&&(x[re.expando]=void 0)}}}),b.fn.extend({detach:function(l){return va(this,l,!0)},remove:function(l){return va(this,l)},text:function(l){return pn(this,function(d){return void 0===d?b.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return Yr(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ar(this,l).appendChild(l)})},prepend:function(){return Yr(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Ar(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return Yr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Yr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;null!=(l=this[d]);d++)1===l.nodeType&&(b.cleanData(xr(l,!1)),l.textContent="");return this},clone:function(l,d){return l=null!=l&&l,d=null==d?l:d,this.map(function(){return b.clone(this,l,d)})},html:function(l){return pn(this,function(d){var x=this[0]||{},w=0,F=this.length;if(void 0===d&&1===x.nodeType)return x.innerHTML;if("string"==typeof d&&!ko.test(d)&&!Cr[(Mr.exec(d)||["",""])[1].toLowerCase()]){d=b.htmlPrefilter(d);try{for(;w<F;w++)1===(x=this[w]||{}).nodeType&&(b.cleanData(xr(x,!1)),x.innerHTML=d);x=0}catch(H){}}x&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return Yr(this,arguments,function(d){var x=this.parentNode;b.inArray(this,l)<0&&(b.cleanData(xr(this)),x&&x.replaceChild(d,this))},l)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){b.fn[l]=function(x){for(var w,F=[],H=b(x),X=H.length-1,he=0;he<=X;he++)w=he===X?this:this.clone(!0),b(H[he])[d](w),A.apply(F,w.get());return this.pushStack(F)}});var co=new RegExp("^("+Ft+")(?!px)[a-z%]+$","i"),Ua=/^--/,bt=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=v),d.getComputedStyle(l)},$a=function(l,d,x){var w,F,H={};for(F in d)H[F]=l.style[F],l.style[F]=d[F];for(F in w=x.call(l),d)l.style[F]=H[F];return w},ma=new RegExp(xn.join("|"),"i"),Wa="[\\x20\\t\\r\\n\\f]",ps=new RegExp("^"+Wa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Wa+"+$","g");function An(l,d,x){var w,F,H,X,he=Ua.test(d),ce=l.style;return(x=x||bt(l))&&(X=x.getPropertyValue(d)||x[d],he&&(X=X.replace(ps,"$1")),""===X&&!mn(l)&&(X=b.style(l,d)),!i.pixelBoxStyles()&&co.test(X)&&ma.test(d)&&(w=ce.width,F=ce.minWidth,H=ce.maxWidth,ce.minWidth=ce.maxWidth=ce.width=X,X=x.width,ce.width=w,ce.minWidth=F,ce.maxWidth=H)),void 0!==X?X+"":X}function ta(l,d){return{get:function(){if(!l())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function l(){if(Oe){ce.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Oe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",In.appendChild(ce).appendChild(Oe);var je=v.getComputedStyle(Oe);x="1%"!==je.top,he=12===d(je.marginLeft),Oe.style.right="60%",H=36===d(je.right),w=36===d(je.width),Oe.style.position="absolute",F=12===d(Oe.offsetWidth/3),In.removeChild(ce),Oe=null}}function d(je){return Math.round(parseFloat(je))}var x,w,F,H,X,he,ce=le.createElement("div"),Oe=le.createElement("div");!Oe.style||(Oe.style.backgroundClip="content-box",Oe.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===Oe.style.backgroundClip,b.extend(i,{boxSizingReliable:function(){return l(),w},pixelBoxStyles:function(){return l(),H},pixelPosition:function(){return l(),x},reliableMarginLeft:function(){return l(),he},scrollboxSize:function(){return l(),F},reliableTrDimensions:function(){var je,lt,Fe,et;return null==X&&(je=le.createElement("table"),lt=le.createElement("tr"),Fe=le.createElement("div"),je.style.cssText="position:absolute;left:-11111px;border-collapse:separate",lt.style.cssText="border:1px solid",lt.style.height="1px",Fe.style.height="9px",Fe.style.display="block",In.appendChild(je).appendChild(lt).appendChild(Fe),et=v.getComputedStyle(lt),X=parseInt(et.height,10)+parseInt(et.borderTopWidth,10)+parseInt(et.borderBottomWidth,10)===lt.offsetHeight,In.removeChild(je)),X}}))}();var gs=["Webkit","Moz","ms"],fo=le.createElement("div").style,Ji={};function en(l){return b.cssProps[l]||Ji[l]||(l in fo?l:Ji[l]=function ho(l){for(var d=l[0].toUpperCase()+l.slice(1),x=gs.length;x--;)if((l=gs[x]+d)in fo)return l}(l)||l)}var yi=/^(none|table(?!-c[ea]).+)/,Lt={position:"absolute",visibility:"hidden",display:"block"},ei={letterSpacing:"0",fontWeight:"400"};function Li(l,d,x){var w=Vt.exec(d);return w?Math.max(0,w[2]-(x||0))+(w[3]||"px"):d}function lr(l,d,x,w,F,H){var X="width"===d?1:0,he=0,ce=0;if(x===(w?"border":"content"))return 0;for(;X<4;X+=2)"margin"===x&&(ce+=b.css(l,x+xn[X],!0,F)),w?("content"===x&&(ce-=b.css(l,"padding"+xn[X],!0,F)),"margin"!==x&&(ce-=b.css(l,"border"+xn[X]+"Width",!0,F))):(ce+=b.css(l,"padding"+xn[X],!0,F),"padding"!==x?ce+=b.css(l,"border"+xn[X]+"Width",!0,F):he+=b.css(l,"border"+xn[X]+"Width",!0,F));return!w&&H>=0&&(ce+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-H-ce-he-.5))||0),ce}function ya(l,d,x){var w=bt(l),H=(!i.boxSizingReliable()||x)&&"border-box"===b.css(l,"boxSizing",!1,w),X=H,he=An(l,d,w),ce="offset"+d[0].toUpperCase()+d.slice(1);if(co.test(he)){if(!x)return he;he="auto"}return(!i.boxSizingReliable()&&H||!i.reliableTrDimensions()&&tt(l,"tr")||"auto"===he||!parseFloat(he)&&"inline"===b.css(l,"display",!1,w))&&l.getClientRects().length&&(H="border-box"===b.css(l,"boxSizing",!1,w),(X=ce in l)&&(he=l[ce])),(he=parseFloat(he)||0)+lr(l,d,x||(H?"border":"content"),X,w,he)+"px"}function Wn(l,d,x,w,F){return new Wn.prototype.init(l,d,x,w,F)}b.extend({cssHooks:{opacity:{get:function(l,d){if(d){var x=An(l,"opacity");return""===x?"1":x}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,x,w){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var F,H,X,he=vn(d),ce=Ua.test(d),Oe=l.style;if(ce||(d=en(he)),X=b.cssHooks[d]||b.cssHooks[he],void 0===x)return X&&"get"in X&&void 0!==(F=X.get(l,!1,w))?F:Oe[d];if("string"==(H=typeof x)&&(F=Vt.exec(x))&&F[1]&&(x=oi(l,d,F),H="number"),null==x||x!=x)return;"number"===H&&!ce&&(x+=F&&F[3]||(b.cssNumber[he]?"":"px")),!i.clearCloneStyle&&""===x&&0===d.indexOf("background")&&(Oe[d]="inherit"),(!X||!("set"in X)||void 0!==(x=X.set(l,x,w)))&&(ce?Oe.setProperty(d,x):Oe[d]=x)}},css:function(l,d,x,w){var F,H,X,he=vn(d);return Ua.test(d)||(d=en(he)),(X=b.cssHooks[d]||b.cssHooks[he])&&"get"in X&&(F=X.get(l,!0,x)),void 0===F&&(F=An(l,d,w)),"normal"===F&&d in ei&&(F=ei[d]),""===x||x?(H=parseFloat(F),!0===x||isFinite(H)?H||0:F):F}}),b.each(["height","width"],function(l,d){b.cssHooks[d]={get:function(x,w,F){if(w)return!yi.test(b.css(x,"display"))||x.getClientRects().length&&x.getBoundingClientRect().width?ya(x,d,F):$a(x,Lt,function(){return ya(x,d,F)})},set:function(x,w,F){var H,X=bt(x),he=!i.scrollboxSize()&&"absolute"===X.position,Oe=(he||F)&&"border-box"===b.css(x,"boxSizing",!1,X),je=F?lr(x,d,F,Oe,X):0;return Oe&&he&&(je-=Math.ceil(x["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(X[d])-lr(x,d,"border",!1,X)-.5)),je&&(H=Vt.exec(w))&&"px"!==(H[3]||"px")&&(x.style[d]=w,w=b.css(x,d)),Li(0,w,je)}}}),b.cssHooks.marginLeft=ta(i.reliableMarginLeft,function(l,d){if(d)return(parseFloat(An(l,"marginLeft"))||l.getBoundingClientRect().left-$a(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(l,d){b.cssHooks[l+d]={expand:function(x){for(var w=0,F={},H="string"==typeof x?x.split(" "):[x];w<4;w++)F[l+xn[w]+d]=H[w]||H[w-2]||H[0];return F}},"margin"!==l&&(b.cssHooks[l+d].set=Li)}),b.fn.extend({css:function(l,d){return pn(this,function(x,w,F){var H,X,he={},ce=0;if(Array.isArray(w)){for(H=bt(x),X=w.length;ce<X;ce++)he[w[ce]]=b.css(x,w[ce],!1,H);return he}return void 0!==F?b.style(x,w,F):b.css(x,w)},l,d,arguments.length>1)}}),b.Tween=Wn,(Wn.prototype={constructor:Wn,init:function(l,d,x,w,F,H){this.elem=l,this.prop=x,this.easing=F||b.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=w,this.unit=H||(b.cssNumber[x]?"":"px")},cur:function(){var l=Wn.propHooks[this.prop];return l&&l.get?l.get(this):Wn.propHooks._default.get(this)},run:function(l){var d,x=Wn.propHooks[this.prop];return this.pos=d=this.options.duration?b.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):Wn.propHooks._default.set(this),this}}).init.prototype=Wn.prototype,(Wn.propHooks={_default:{get:function(l){var d;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(d=b.css(l.elem,l.prop,""))&&"auto"!==d?d:0},set:function(l){b.fx.step[l.prop]?b.fx.step[l.prop](l):1!==l.elem.nodeType||!b.cssHooks[l.prop]&&null==l.elem.style[en(l.prop)]?l.elem[l.prop]=l.now:b.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=Wn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},b.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},b.fx=Wn.prototype.init,b.fx.step={};var Qi,xi,No=/^(?:toggle|show|hide)$/,Zi=/queueHooks$/;function po(){xi&&(!1===le.hidden&&v.requestAnimationFrame?v.requestAnimationFrame(po):v.setTimeout(po,b.fx.interval),b.fx.tick())}function na(){return v.setTimeout(function(){Qi=void 0}),Qi=Date.now()}function ra(l,d){var x,w=0,F={height:l};for(d=d?1:0;w<4;w+=2-d)F["margin"+(x=xn[w])]=F["padding"+x]=l;return d&&(F.opacity=F.width=l),F}function Vr(l,d,x){for(var w,F=(_r.tweeners[d]||[]).concat(_r.tweeners["*"]),H=0,X=F.length;H<X;H++)if(w=F[H].call(x,d,l))return w}function _r(l,d,x){var w,F,H=0,X=_r.prefilters.length,he=b.Deferred().always(function(){delete ce.elem}),ce=function(){if(F)return!1;for(var lt=Qi||na(),Fe=Math.max(0,Oe.startTime+Oe.duration-lt),Ht=1-(Fe/Oe.duration||0),Yt=0,Dt=Oe.tweens.length;Yt<Dt;Yt++)Oe.tweens[Yt].run(Ht);return he.notifyWith(l,[Oe,Ht,Fe]),Ht<1&&Dt?Fe:(Dt||he.notifyWith(l,[Oe,1,0]),he.resolveWith(l,[Oe]),!1)},Oe=he.promise({elem:l,props:b.extend({},d),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},x),originalProperties:d,originalOptions:x,startTime:Qi||na(),duration:x.duration,tweens:[],createTween:function(lt,Fe){var et=b.Tween(l,Oe.opts,lt,Fe,Oe.opts.specialEasing[lt]||Oe.opts.easing);return Oe.tweens.push(et),et},stop:function(lt){var Fe=0,et=lt?Oe.tweens.length:0;if(F)return this;for(F=!0;Fe<et;Fe++)Oe.tweens[Fe].run(1);return lt?(he.notifyWith(l,[Oe,1,0]),he.resolveWith(l,[Oe,lt])):he.rejectWith(l,[Oe,lt]),this}}),je=Oe.props;for(function Br(l,d){var x,w,F,H,X;for(x in l)if(F=d[w=vn(x)],H=l[x],Array.isArray(H)&&(F=H[1],H=l[x]=H[0]),x!==w&&(l[w]=H,delete l[x]),(X=b.cssHooks[w])&&"expand"in X)for(x in H=X.expand(H),delete l[w],H)x in l||(l[x]=H[x],d[x]=F);else d[w]=F}(je,Oe.opts.specialEasing);H<X;H++)if(w=_r.prefilters[H].call(Oe,l,je,Oe.opts))return ae(w.stop)&&(b._queueHooks(Oe.elem,Oe.opts.queue).stop=w.stop.bind(w)),w;return b.map(je,Vr,Oe),ae(Oe.opts.start)&&Oe.opts.start.call(l,Oe),Oe.progress(Oe.opts.progress).done(Oe.opts.done,Oe.opts.complete).fail(Oe.opts.fail).always(Oe.opts.always),b.fx.timer(b.extend(ce,{elem:l,anim:Oe,queue:Oe.opts.queue})),Oe}b.Animation=b.extend(_r,{tweeners:{"*":[function(l,d){var x=this.createTween(l,d);return oi(x.elem,l,Vt.exec(d),x),x}]},tweener:function(l,d){ae(l)?(d=l,l=["*"]):l=l.match(Bn);for(var x,w=0,F=l.length;w<F;w++)(_r.tweeners[x=l[w]]=_r.tweeners[x]||[]).unshift(d)},prefilters:[function go(l,d,x){var w,F,H,X,he,ce,Oe,je,lt="width"in d||"height"in d,Fe=this,et={},Ht=l.style,Yt=l.nodeType&&or(l),Dt=U.get(l,"fxshow");for(w in x.queue||(null==(X=b._queueHooks(l,"fx")).unqueued&&(X.unqueued=0,he=X.empty.fire,X.empty.fire=function(){X.unqueued||he()}),X.unqueued++,Fe.always(function(){Fe.always(function(){X.unqueued--,b.queue(l,"fx").length||X.empty.fire()})})),d)if(No.test(F=d[w])){if(delete d[w],H=H||"toggle"===F,F===(Yt?"hide":"show")){if("show"!==F||!Dt||void 0===Dt[w])continue;Yt=!0}et[w]=Dt&&Dt[w]||b.style(l,w)}if((ce=!b.isEmptyObject(d))||!b.isEmptyObject(et))for(w in lt&&1===l.nodeType&&(x.overflow=[Ht.overflow,Ht.overflowX,Ht.overflowY],null==(Oe=Dt&&Dt.display)&&(Oe=U.get(l,"display")),"none"===(je=b.css(l,"display"))&&(Oe?je=Oe:(Jn([l],!0),Oe=l.style.display||Oe,je=b.css(l,"display"),Jn([l]))),("inline"===je||"inline-block"===je&&null!=Oe)&&"none"===b.css(l,"float")&&(ce||(Fe.done(function(){Ht.display=Oe}),null==Oe&&(Oe="none"===(je=Ht.display)?"":je)),Ht.display="inline-block")),x.overflow&&(Ht.overflow="hidden",Fe.always(function(){Ht.overflow=x.overflow[0],Ht.overflowX=x.overflow[1],Ht.overflowY=x.overflow[2]})),ce=!1,et)ce||(Dt?"hidden"in Dt&&(Yt=Dt.hidden):Dt=U.access(l,"fxshow",{display:Oe}),H&&(Dt.hidden=!Yt),Yt&&Jn([l],!0),Fe.done(function(){for(w in Yt||Jn([l]),U.remove(l,"fxshow"),et)b.style(l,w,et[w])})),ce=Vr(Yt?Dt[w]:0,w,Fe),w in Dt||(Dt[w]=ce.start,Yt&&(ce.end=ce.start,ce.start=0))}],prefilter:function(l,d){d?_r.prefilters.unshift(l):_r.prefilters.push(l)}}),b.speed=function(l,d,x){var w=l&&"object"==typeof l?b.extend({},l):{complete:x||!x&&d||ae(l)&&l,duration:l,easing:x&&d||d&&!ae(d)&&d};return b.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in b.fx.speeds?b.fx.speeds[w.duration]:b.fx.speeds._default),(null==w.queue||!0===w.queue)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){ae(w.old)&&w.old.call(this),w.queue&&b.dequeue(this,w.queue)},w},b.fn.extend({fadeTo:function(l,d,x,w){return this.filter(or).css("opacity",0).show().end().animate({opacity:d},l,x,w)},animate:function(l,d,x,w){var F=b.isEmptyObject(l),H=b.speed(d,x,w),X=function(){var he=_r(this,b.extend({},l),H);(F||U.get(this,"finish"))&&he.stop(!0)};return X.finish=X,F||!1===H.queue?this.each(X):this.queue(H.queue,X)},stop:function(l,d,x){var w=function(F){var H=F.stop;delete F.stop,H(x)};return"string"!=typeof l&&(x=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var F=!0,H=null!=l&&l+"queueHooks",X=b.timers,he=U.get(this);if(H)he[H]&&he[H].stop&&w(he[H]);else for(H in he)he[H]&&he[H].stop&&Zi.test(H)&&w(he[H]);for(H=X.length;H--;)X[H].elem===this&&(null==l||X[H].queue===l)&&(X[H].anim.stop(x),F=!1,X.splice(H,1));(F||!x)&&b.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var d,x=U.get(this),w=x[l+"queue"],F=x[l+"queueHooks"],H=b.timers,X=w?w.length:0;for(x.finish=!0,b.queue(this,l,[]),F&&F.stop&&F.stop.call(this,!0),d=H.length;d--;)H[d].elem===this&&H[d].queue===l&&(H[d].anim.stop(!0),H.splice(d,1));for(d=0;d<X;d++)w[d]&&w[d].finish&&w[d].finish.call(this);delete x.finish})}}),b.each(["toggle","show","hide"],function(l,d){var x=b.fn[d];b.fn[d]=function(w,F,H){return null==w||"boolean"==typeof w?x.apply(this,arguments):this.animate(ra(d,!0),w,F,H)}}),b.each({slideDown:ra("show"),slideUp:ra("hide"),slideToggle:ra("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){b.fn[l]=function(x,w,F){return this.animate(d,x,w,F)}}),b.timers=[],b.fx.tick=function(){var l,d=0,x=b.timers;for(Qi=Date.now();d<x.length;d++)!(l=x[d])()&&x[d]===l&&x.splice(d--,1);x.length||b.fx.stop(),Qi=void 0},b.fx.timer=function(l){b.timers.push(l),b.fx.start()},b.fx.interval=13,b.fx.start=function(){xi||(xi=!0,po())},b.fx.stop=function(){xi=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(l,d){return l=b.fx&&b.fx.speeds[l]||l,this.queue(d=d||"fx",function(x,w){var F=v.setTimeout(x,l);w.stop=function(){v.clearTimeout(F)}})},function(){var l=le.createElement("input"),x=le.createElement("select").appendChild(le.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=x.selected,(l=le.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var ia,Ni=b.expr.attrHandle;b.fn.extend({attr:function(l,d){return pn(this,b.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){b.removeAttr(this,l)})}}),b.extend({attr:function(l,d,x){var w,F,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return void 0===l.getAttribute?b.prop(l,d,x):((1!==H||!b.isXMLDoc(l))&&(F=b.attrHooks[d.toLowerCase()]||(b.expr.match.bool.test(d)?ia:void 0)),void 0!==x?null===x?void b.removeAttr(l,d):F&&"set"in F&&void 0!==(w=F.set(l,x,d))?w:(l.setAttribute(d,x+""),x):F&&"get"in F&&null!==(w=F.get(l,d))?w:null==(w=b.find.attr(l,d))?void 0:w)},attrHooks:{type:{set:function(l,d){if(!i.radioValue&&"radio"===d&&tt(l,"input")){var x=l.value;return l.setAttribute("type",d),x&&(l.value=x),d}}}},removeAttr:function(l,d){var x,w=0,F=d&&d.match(Bn);if(F&&1===l.nodeType)for(;x=F[w++];)l.removeAttribute(x)}}),ia={set:function(l,d,x){return!1===d?b.removeAttr(l,x):l.setAttribute(x,x),x}},b.each(b.expr.match.bool.source.match(/\w+/g),function(l,d){var x=Ni[d]||b.find.attr;Ni[d]=function(w,F,H){var X,he,ce=F.toLowerCase();return H||(he=Ni[ce],Ni[ce]=X,X=null!=x(w,F,H)?ce:null,Ni[ce]=he),X}});var oa=/^(?:input|select|textarea|button)$/i,qi=/^(?:a|area)$/i;function ui(l){return(l.match(Bn)||[]).join(" ")}function li(l){return l.getAttribute&&l.getAttribute("class")||""}function Xr(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(Bn)||[]}b.fn.extend({prop:function(l,d){return pn(this,b.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[b.propFix[l]||l]})}}),b.extend({prop:function(l,d,x){var w,F,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return(1!==H||!b.isXMLDoc(l))&&(F=b.propHooks[d=b.propFix[d]||d]),void 0!==x?F&&"set"in F&&void 0!==(w=F.set(l,x,d))?w:l[d]=x:F&&"get"in F&&null!==(w=F.get(l,d))?w:l[d]},propHooks:{tabIndex:{get:function(l){var d=b.find.attr(l,"tabindex");return d?parseInt(d,10):oa.test(l.nodeName)||qi.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(b.propHooks.selected={get:function(l){return null},set:function(l){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(l){var d,x,w,F,H,X;return ae(l)?this.each(function(he){b(this).addClass(l.call(this,he,li(this)))}):(d=Xr(l)).length?this.each(function(){if(w=li(this),x=1===this.nodeType&&" "+ui(w)+" "){for(H=0;H<d.length;H++)x.indexOf(" "+(F=d[H])+" ")<0&&(x+=F+" ");X=ui(x),w!==X&&this.setAttribute("class",X)}}):this},removeClass:function(l){var d,x,w,F,H,X;return ae(l)?this.each(function(he){b(this).removeClass(l.call(this,he,li(this)))}):arguments.length?(d=Xr(l)).length?this.each(function(){if(w=li(this),x=1===this.nodeType&&" "+ui(w)+" "){for(H=0;H<d.length;H++)for(F=d[H];x.indexOf(" "+F+" ")>-1;)x=x.replace(" "+F+" "," ");X=ui(x),w!==X&&this.setAttribute("class",X)}}):this:this.attr("class","")},toggleClass:function(l,d){var x,w,F,H,X=typeof l,he="string"===X||Array.isArray(l);return ae(l)?this.each(function(ce){b(this).toggleClass(l.call(this,ce,li(this),d),d)}):"boolean"==typeof d&&he?d?this.addClass(l):this.removeClass(l):(x=Xr(l),this.each(function(){if(he)for(H=b(this),F=0;F<x.length;F++)H.hasClass(w=x[F])?H.removeClass(w):H.addClass(w);else(void 0===l||"boolean"===X)&&((w=li(this))&&U.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===l?"":U.get(this,"__className__")||""))}))},hasClass:function(l){var d,x,w=0;for(d=" "+l+" ";x=this[w++];)if(1===x.nodeType&&(" "+ui(li(x))+" ").indexOf(d)>-1)return!0;return!1}});var vo=/\r/g;b.fn.extend({val:function(l){var d,x,w,F=this[0];return arguments.length?(w=ae(l),this.each(function(H){var X;1===this.nodeType&&(null==(X=w?l.call(this,H,b(this).val()):l)?X="":"number"==typeof X?X+="":Array.isArray(X)&&(X=b.map(X,function(he){return null==he?"":he+""})),(!(d=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])||!("set"in d)||void 0===d.set(this,X,"value"))&&(this.value=X))})):F?(d=b.valHooks[F.type]||b.valHooks[F.nodeName.toLowerCase()])&&"get"in d&&void 0!==(x=d.get(F,"value"))?x:"string"==typeof(x=F.value)?x.replace(vo,""):null==x?"":x:void 0}}),b.extend({valHooks:{option:{get:function(l){var d=b.find.attr(l,"value");return null!=d?d:ui(b.text(l))}},select:{get:function(l){var d,x,w,F=l.options,H=l.selectedIndex,X="select-one"===l.type,he=X?null:[],ce=X?H+1:F.length;for(w=H<0?ce:X?H:0;w<ce;w++)if(((x=F[w]).selected||w===H)&&!x.disabled&&(!x.parentNode.disabled||!tt(x.parentNode,"optgroup"))){if(d=b(x).val(),X)return d;he.push(d)}return he},set:function(l,d){for(var x,w,F=l.options,H=b.makeArray(d),X=F.length;X--;)((w=F[X]).selected=b.inArray(b.valHooks.option.get(w),H)>-1)&&(x=!0);return x||(l.selectedIndex=-1),H}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=b.inArray(b(l).val(),d)>-1}},i.checkOn||(b.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in v;var mo=/^(?:focusinfocus|focusoutblur)$/,yo=function(l){l.stopPropagation()};b.extend(b.event,{trigger:function(l,d,x,w){var F,H,X,he,ce,Oe,je,lt,Fe=[x||le],et=Y.call(l,"type")?l.type:l,Ht=Y.call(l,"namespace")?l.namespace.split("."):[];if(H=lt=X=x=x||le,3!==x.nodeType&&8!==x.nodeType&&!mo.test(et+b.event.triggered)&&(et.indexOf(".")>-1&&(Ht=et.split("."),et=Ht.shift(),Ht.sort()),ce=et.indexOf(":")<0&&"on"+et,(l=l[b.expando]?l:new b.Event(et,"object"==typeof l&&l)).isTrigger=w?2:3,l.namespace=Ht.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Ht.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=x),d=null==d?[l]:b.makeArray(d,[l]),je=b.event.special[et]||{},w||!je.trigger||!1!==je.trigger.apply(x,d))){if(!w&&!je.noBubble&&!pe(x)){for(mo.test((he=je.delegateType||et)+et)||(H=H.parentNode);H;H=H.parentNode)Fe.push(H),X=H;X===(x.ownerDocument||le)&&Fe.push(X.defaultView||X.parentWindow||v)}for(F=0;(H=Fe[F++])&&!l.isPropagationStopped();)lt=H,l.type=F>1?he:je.bindType||et,(Oe=(U.get(H,"events")||Object.create(null))[l.type]&&U.get(H,"handle"))&&Oe.apply(H,d),(Oe=ce&&H[ce])&&Oe.apply&&un(H)&&(l.result=Oe.apply(H,d),!1===l.result&&l.preventDefault());return l.type=et,!w&&!l.isDefaultPrevented()&&(!je._default||!1===je._default.apply(Fe.pop(),d))&&un(x)&&ce&&ae(x[et])&&!pe(x)&&((X=x[ce])&&(x[ce]=null),b.event.triggered=et,l.isPropagationStopped()&&lt.addEventListener(et,yo),x[et](),l.isPropagationStopped()&&lt.removeEventListener(et,yo),b.event.triggered=void 0,X&&(x[ce]=X)),l.result}},simulate:function(l,d,x){var w=b.extend(new b.Event,x,{type:l,isSimulated:!0});b.event.trigger(w,null,d)}}),b.fn.extend({trigger:function(l,d){return this.each(function(){b.event.trigger(l,d,this)})},triggerHandler:function(l,d){var x=this[0];if(x)return b.event.trigger(l,d,x,!0)}}),i.focusin||b.each({focus:"focusin",blur:"focusout"},function(l,d){var x=function(w){b.event.simulate(d,w.target,b.event.fix(w))};b.event.special[d]={setup:function(){var w=this.ownerDocument||this.document||this,F=U.access(w,d);F||w.addEventListener(l,x,!0),U.access(w,d,(F||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,F=U.access(w,d)-1;F?U.access(w,d,F):(w.removeEventListener(l,x,!0),U.remove(w,d))}}});var Ro=v.location,aa={guid:Date.now()},Do=/\?/;b.parseXML=function(l){var d,x;if(!l||"string"!=typeof l)return null;try{d=(new v.DOMParser).parseFromString(l,"text/xml")}catch(w){}return x=d&&d.getElementsByTagName("parsererror")[0],(!d||x)&&b.error("Invalid XML: "+(x?b.map(x.childNodes,function(w){return w.textContent}).join("\n"):l)),d};var Fo=/\[\]$/,xa=/\r?\n/g,vs=/^(?:submit|button|image|reset|file)$/i,Ya=/^(?:input|select|textarea|keygen)/i;function Vo(l,d,x,w){var F;if(Array.isArray(d))b.each(d,function(H,X){x||Fo.test(l)?w(l,X):Vo(l+"["+("object"==typeof X&&null!=X?H:"")+"]",X,x,w)});else if(x||"object"!==we(d))w(l,d);else for(F in d)Vo(l+"["+F+"]",d[F],x,w)}b.param=function(l,d){var x,w=[],F=function(H,X){var he=ae(X)?X():X;w[w.length]=encodeURIComponent(H)+"="+encodeURIComponent(null==he?"":he)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!b.isPlainObject(l))b.each(l,function(){F(this.name,this.value)});else for(x in l)Vo(x,l[x],d,F);return w.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=b.prop(this,"elements");return l?b.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!b(this).is(":disabled")&&Ya.test(this.nodeName)&&!vs.test(l)&&(this.checked||!ur.test(l))}).map(function(l,d){var x=b(this).val();return null==x?null:Array.isArray(x)?b.map(x,function(w){return{name:d.name,value:w.replace(xa,"\r\n")}}):{name:d.name,value:x.replace(xa,"\r\n")}}).get()}});var Xa=/%20/g,Ka=/#.*$/,ms=/([?&])_=[^&]*/,Ja=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ri=/^(?:GET|HEAD)$/,ba=/^\/\//,ys={},eo={},Di="*/".concat("*"),sa=le.createElement("a");function Qn(l){return function(d,x){"string"!=typeof d&&(x=d,d="*");var w,F=0,H=d.toLowerCase().match(Bn)||[];if(ae(x))for(;w=H[F++];)"+"===w[0]?(w=w.slice(1)||"*",(l[w]=l[w]||[]).unshift(x)):(l[w]=l[w]||[]).push(x)}}function He(l,d,x,w){var F={},H=l===eo;function X(he){var ce;return F[he]=!0,b.each(l[he]||[],function(Oe,je){var lt=je(d,x,w);return"string"!=typeof lt||H||F[lt]?H?!(ce=lt):void 0:(d.dataTypes.unshift(lt),X(lt),!1)}),ce}return X(d.dataTypes[0])||!F["*"]&&X("*")}function Gr(l,d){var x,w,F=b.ajaxSettings.flatOptions||{};for(x in d)void 0!==d[x]&&((F[x]?l:w||(w={}))[x]=d[x]);return w&&b.extend(!0,l,w),l}sa.href=Ro.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ro.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ro.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Di,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Gr(Gr(l,b.ajaxSettings),d):Gr(b.ajaxSettings,l)},ajaxPrefilter:Qn(ys),ajaxTransport:Qn(eo),ajax:function(l,d){"object"==typeof l&&(d=l,l=void 0);var x,w,F,H,X,he,ce,Oe,je,lt,Fe=b.ajaxSetup({},d=d||{}),et=Fe.context||Fe,Ht=Fe.context&&(et.nodeType||et.jquery)?b(et):b.event,Yt=b.Deferred(),Dt=b.Callbacks("once memory"),wr=Fe.statusCode||{},tn={},Sr={},Hn="canceled",cn={readyState:0,getResponseHeader:function(an){var vr;if(ce){if(!H)for(H={};vr=Ja.exec(F);)H[vr[1].toLowerCase()+" "]=(H[vr[1].toLowerCase()+" "]||[]).concat(vr[2]);vr=H[an.toLowerCase()+" "]}return null==vr?null:vr.join(", ")},getAllResponseHeaders:function(){return ce?F:null},setRequestHeader:function(an,vr){return null==ce&&(an=Sr[an.toLowerCase()]=Sr[an.toLowerCase()]||an,tn[an]=vr),this},overrideMimeType:function(an){return null==ce&&(Fe.mimeType=an),this},statusCode:function(an){var vr;if(an)if(ce)cn.always(an[cn.status]);else for(vr in an)wr[vr]=[wr[vr],an[vr]];return this},abort:function(an){var vr=an||Hn;return x&&x.abort(vr),ni(0,vr),this}};if(Yt.promise(cn),Fe.url=((l||Fe.url||Ro.href)+"").replace(ba,Ro.protocol+"//"),Fe.type=d.method||d.type||Fe.method||Fe.type,Fe.dataTypes=(Fe.dataType||"*").toLowerCase().match(Bn)||[""],null==Fe.crossDomain){he=le.createElement("a");try{he.href=Fe.url,he.href=he.href,Fe.crossDomain=sa.protocol+"//"+sa.host!=he.protocol+"//"+he.host}catch(an){Fe.crossDomain=!0}}if(Fe.data&&Fe.processData&&"string"!=typeof Fe.data&&(Fe.data=b.param(Fe.data,Fe.traditional)),He(ys,Fe,d,cn),ce)return cn;for(je in(Oe=b.event&&Fe.global)&&0==b.active++&&b.event.trigger("ajaxStart"),Fe.type=Fe.type.toUpperCase(),Fe.hasContent=!Ri.test(Fe.type),w=Fe.url.replace(Ka,""),Fe.hasContent?Fe.data&&Fe.processData&&0===(Fe.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Fe.data=Fe.data.replace(Xa,"+")):(lt=Fe.url.slice(w.length),Fe.data&&(Fe.processData||"string"==typeof Fe.data)&&(w+=(Do.test(w)?"&":"?")+Fe.data,delete Fe.data),!1===Fe.cache&&(w=w.replace(ms,"$1"),lt=(Do.test(w)?"&":"?")+"_="+aa.guid+++lt),Fe.url=w+lt),Fe.ifModified&&(b.lastModified[w]&&cn.setRequestHeader("If-Modified-Since",b.lastModified[w]),b.etag[w]&&cn.setRequestHeader("If-None-Match",b.etag[w])),(Fe.data&&Fe.hasContent&&!1!==Fe.contentType||d.contentType)&&cn.setRequestHeader("Content-Type",Fe.contentType),cn.setRequestHeader("Accept",Fe.dataTypes[0]&&Fe.accepts[Fe.dataTypes[0]]?Fe.accepts[Fe.dataTypes[0]]+("*"!==Fe.dataTypes[0]?", "+Di+"; q=0.01":""):Fe.accepts["*"]),Fe.headers)cn.setRequestHeader(je,Fe.headers[je]);if(Fe.beforeSend&&(!1===Fe.beforeSend.call(et,cn,Fe)||ce))return cn.abort();if(Hn="abort",Dt.add(Fe.complete),cn.done(Fe.success),cn.fail(Fe.error),x=He(eo,Fe,d,cn)){if(cn.readyState=1,Oe&&Ht.trigger("ajaxSend",[cn,Fe]),ce)return cn;Fe.async&&Fe.timeout>0&&(X=v.setTimeout(function(){cn.abort("timeout")},Fe.timeout));try{ce=!1,x.send(tn,ni)}catch(an){if(ce)throw an;ni(-1,an)}}else ni(-1,"No Transport");function ni(an,vr,xs,_s){var ri,Fi,jt,nr,Vi,cr=vr;ce||(ce=!0,X&&v.clearTimeout(X),x=void 0,F=_s||"",cn.readyState=an>0?4:0,ri=an>=200&&an<300||304===an,xs&&(nr=function ti(l,d,x){for(var w,F,H,X,he=l.contents,ce=l.dataTypes;"*"===ce[0];)ce.shift(),void 0===w&&(w=l.mimeType||d.getResponseHeader("Content-Type"));if(w)for(F in he)if(he[F]&&he[F].test(w)){ce.unshift(F);break}if(ce[0]in x)H=ce[0];else{for(F in x){if(!ce[0]||l.converters[F+" "+ce[0]]){H=F;break}X||(X=F)}H=H||X}if(H)return H!==ce[0]&&ce.unshift(H),x[H]}(Fe,cn,xs)),!ri&&b.inArray("script",Fe.dataTypes)>-1&&b.inArray("json",Fe.dataTypes)<0&&(Fe.converters["text script"]=function(){}),nr=function R(l,d,x,w){var F,H,X,he,ce,Oe={},je=l.dataTypes.slice();if(je[1])for(X in l.converters)Oe[X.toLowerCase()]=l.converters[X];for(H=je.shift();H;)if(l.responseFields[H]&&(x[l.responseFields[H]]=d),!ce&&w&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),ce=H,H=je.shift())if("*"===H)H=ce;else if("*"!==ce&&ce!==H){if(!(X=Oe[ce+" "+H]||Oe["* "+H]))for(F in Oe)if((he=F.split(" "))[1]===H&&(X=Oe[ce+" "+he[0]]||Oe["* "+he[0]])){!0===X?X=Oe[F]:!0!==Oe[F]&&(H=he[0],je.unshift(he[1]));break}if(!0!==X)if(X&&l.throws)d=X(d);else try{d=X(d)}catch(lt){return{state:"parsererror",error:X?lt:"No conversion from "+ce+" to "+H}}}return{state:"success",data:d}}(Fe,nr,cn,ri),ri?(Fe.ifModified&&((Vi=cn.getResponseHeader("Last-Modified"))&&(b.lastModified[w]=Vi),(Vi=cn.getResponseHeader("etag"))&&(b.etag[w]=Vi)),204===an||"HEAD"===Fe.type?cr="nocontent":304===an?cr="notmodified":(cr=nr.state,Fi=nr.data,ri=!(jt=nr.error))):(jt=cr,(an||!cr)&&(cr="error",an<0&&(an=0))),cn.status=an,cn.statusText=(vr||cr)+"",ri?Yt.resolveWith(et,[Fi,cr,cn]):Yt.rejectWith(et,[cn,cr,jt]),cn.statusCode(wr),wr=void 0,Oe&&Ht.trigger(ri?"ajaxSuccess":"ajaxError",[cn,Fe,ri?Fi:jt]),Dt.fireWith(et,[cn,cr]),Oe&&(Ht.trigger("ajaxComplete",[cn,Fe]),--b.active||b.event.trigger("ajaxStop")))}return cn},getJSON:function(l,d,x){return b.get(l,d,x,"json")},getScript:function(l,d){return b.get(l,void 0,d,"script")}}),b.each(["get","post"],function(l,d){b[d]=function(x,w,F,H){return ae(w)&&(H=H||F,F=w,w=void 0),b.ajax(b.extend({url:x,type:d,dataType:H,data:w,success:F},b.isPlainObject(x)&&x))}}),b.ajaxPrefilter(function(l){var d;for(d in l.headers)"content-type"===d.toLowerCase()&&(l.contentType=l.headers[d]||"")}),b._evalUrl=function(l,d,x){return b.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){b.globalEval(w,d,x)}})},b.fn.extend({wrapAll:function(l){var d;return this[0]&&(ae(l)&&(l=l.call(this[0])),d=b(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(l){return ae(l)?this.each(function(d){b(this).wrapInner(l.call(this,d))}):this.each(function(){var d=b(this),x=d.contents();x.length?x.wrapAll(l):d.append(l)})},wrap:function(l){var d=ae(l);return this.each(function(x){b(this).wrapAll(d?l.call(this,x):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(l){return!b.expr.pseudos.visible(l)},b.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new v.XMLHttpRequest}catch(l){}};var Q={0:200,1223:204},se=b.ajaxSettings.xhr();i.cors=!!se&&"withCredentials"in se,i.ajax=se=!!se,b.ajaxTransport(function(l){var d,x;if(i.cors||se&&!l.crossDomain)return{send:function(w,F){var H,X=l.xhr();if(X.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(H in l.xhrFields)X[H]=l.xhrFields[H];for(H in l.mimeType&&X.overrideMimeType&&X.overrideMimeType(l.mimeType),!l.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest"),w)X.setRequestHeader(H,w[H]);d=function(he){return function(){d&&(d=x=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,"abort"===he?X.abort():"error"===he?"number"!=typeof X.status?F(0,"error"):F(X.status,X.statusText):F(Q[X.status]||X.status,X.statusText,"text"!==(X.responseType||"text")||"string"!=typeof X.responseText?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=d(),x=X.onerror=X.ontimeout=d("error"),void 0!==X.onabort?X.onabort=x:X.onreadystatechange=function(){4===X.readyState&&v.setTimeout(function(){d&&x()})},d=d("abort");try{X.send(l.hasContent&&l.data||null)}catch(he){if(d)throw he}},abort:function(){d&&d()}}}),b.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return b.globalEval(l),l}}}),b.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),b.ajaxTransport("script",function(l){var d,x;if(l.crossDomain||l.scriptAttrs)return{send:function(w,F){d=b("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",x=function(H){d.remove(),x=null,H&&F("error"===H.type?404:200,H.type)}),le.head.appendChild(d[0])},abort:function(){x&&x()}}});var l,ge=[],Ae=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=ge.pop()||b.expando+"_"+aa.guid++;return this[l]=!0,l}}),b.ajaxPrefilter("json jsonp",function(l,d,x){var w,F,H,X=!1!==l.jsonp&&(Ae.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ae.test(l.data)&&"data");if(X||"jsonp"===l.dataTypes[0])return w=l.jsonpCallback=ae(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,X?l[X]=l[X].replace(Ae,"$1"+w):!1!==l.jsonp&&(l.url+=(Do.test(l.url)?"&":"?")+l.jsonp+"="+w),l.converters["script json"]=function(){return H||b.error(w+" was not called"),H[0]},l.dataTypes[0]="json",F=v[w],v[w]=function(){H=arguments},x.always(function(){void 0===F?b(v).removeProp(w):v[w]=F,l[w]&&(l.jsonpCallback=d.jsonpCallback,ge.push(w)),H&&ae(F)&&F(H[0]),H=F=void 0}),"script"}),i.createHTMLDocument=((l=le.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),b.parseHTML=function(l,d,x){return"string"!=typeof l?[]:("boolean"==typeof d&&(x=d,d=!1),d||(i.createHTMLDocument?((w=(d=le.implementation.createHTMLDocument("")).createElement("base")).href=le.location.href,d.head.appendChild(w)):d=le),H=!x&&[],(F=Je.exec(l))?[d.createElement(F[1])]:(F=Oo([l],d,H),H&&H.length&&b(H).remove(),b.merge([],F.childNodes)));var w,F,H},b.fn.load=function(l,d,x){var w,F,H,X=this,he=l.indexOf(" ");return he>-1&&(w=ui(l.slice(he)),l=l.slice(0,he)),ae(d)?(x=d,d=void 0):d&&"object"==typeof d&&(F="POST"),X.length>0&&b.ajax({url:l,type:F||"GET",dataType:"html",data:d}).done(function(ce){H=arguments,X.html(w?b("<div>").append(b.parseHTML(ce)).find(w):ce)}).always(x&&function(ce,Oe){X.each(function(){x.apply(this,H||[ce.responseText,Oe,ce])})}),this},b.expr.pseudos.animated=function(l){return b.grep(b.timers,function(d){return l===d.elem}).length},b.offset={setOffset:function(l,d,x){var w,F,H,X,he,ce,je=b.css(l,"position"),lt=b(l),Fe={};"static"===je&&(l.style.position="relative"),he=lt.offset(),H=b.css(l,"top"),ce=b.css(l,"left"),("absolute"===je||"fixed"===je)&&(H+ce).indexOf("auto")>-1?(X=(w=lt.position()).top,F=w.left):(X=parseFloat(H)||0,F=parseFloat(ce)||0),ae(d)&&(d=d.call(l,x,b.extend({},he))),null!=d.top&&(Fe.top=d.top-he.top+X),null!=d.left&&(Fe.left=d.left-he.left+F),"using"in d?d.using.call(l,Fe):lt.css(Fe)}},b.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(F){b.offset.setOffset(this,l,F)});var d,x,w=this[0];return w?w.getClientRects().length?{top:(d=w.getBoundingClientRect()).top+(x=w.ownerDocument.defaultView).pageYOffset,left:d.left+x.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,d,x,w=this[0],F={top:0,left:0};if("fixed"===b.css(w,"position"))d=w.getBoundingClientRect();else{for(d=this.offset(),x=w.ownerDocument,l=w.offsetParent||x.documentElement;l&&(l===x.body||l===x.documentElement)&&"static"===b.css(l,"position");)l=l.parentNode;l&&l!==w&&1===l.nodeType&&((F=b(l).offset()).top+=b.css(l,"borderTopWidth",!0),F.left+=b.css(l,"borderLeftWidth",!0))}return{top:d.top-F.top-b.css(w,"marginTop",!0),left:d.left-F.left-b.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===b.css(l,"position");)l=l.offsetParent;return l||In})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var x="pageYOffset"===d;b.fn[l]=function(w){return pn(this,function(F,H,X){var he;if(pe(F)?he=F:9===F.nodeType&&(he=F.defaultView),void 0===X)return he?he[d]:F[H];he?he.scrollTo(x?he.pageXOffset:X,x?X:he.pageYOffset):F[H]=X},l,w,arguments.length)}}),b.each(["top","left"],function(l,d){b.cssHooks[d]=ta(i.pixelPosition,function(x,w){if(w)return w=An(x,d),co.test(w)?b(x).position()[d]+"px":w})}),b.each({Height:"height",Width:"width"},function(l,d){b.each({padding:"inner"+l,content:d,"":"outer"+l},function(x,w){b.fn[w]=function(F,H){var X=arguments.length&&(x||"boolean"!=typeof F),he=x||(!0===F||!0===H?"margin":"border");return pn(this,function(ce,Oe,je){var lt;return pe(ce)?0===w.indexOf("outer")?ce["inner"+l]:ce.document.documentElement["client"+l]:9===ce.nodeType?(lt=ce.documentElement,Math.max(ce.body["scroll"+l],lt["scroll"+l],ce.body["offset"+l],lt["offset"+l],lt["client"+l])):void 0===je?b.css(ce,Oe,he):b.style(ce,Oe,je,he)},d,X?F:void 0,X)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){b.fn[d]=function(x){return this.on(d,x)}}),b.fn.extend({bind:function(l,d,x){return this.on(l,null,d,x)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,x,w){return this.on(d,l,x,w)},undelegate:function(l,d,x){return 1===arguments.length?this.off(l,"**"):this.off(d,l||"**",x)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){b.fn[d]=function(x,w){return arguments.length>0?this.on(d,null,x,w):this.trigger(d)}});var Se=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;b.proxy=function(l,d){var x,w,F;if("string"==typeof d&&(x=l[d],d=l,l=x),ae(l))return w=I.call(arguments,2),F=function(){return l.apply(d||this,w.concat(I.call(arguments)))},F.guid=l.guid=l.guid||b.guid++,F},b.holdReady=function(l){l?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=tt,b.isFunction=ae,b.isWindow=pe,b.camelCase=vn,b.type=we,b.now=Date.now,b.isNumeric=function(l){var d=b.type(l);return("number"===d||"string"===d)&&!isNaN(l-parseFloat(l))},b.trim=function(l){return null==l?"":(l+"").replace(Se,"$1")},void 0!==(g=function(){return b}.apply(W,[]))&&(E.exports=g);var De=v.jQuery,rt=v.$;return b.noConflict=function(l){return v.$===b&&(v.$=rt),l&&v.jQuery===b&&(v.jQuery=De),b},void 0===S&&(v.jQuery=v.$=b),b})},37244:(E,W,f)=>{var S=f(53436)(f(12119),"DataView");E.exports=S},54994:(E,W,f)=>{var g=f(64312),v=f(22393),S=f(15764),T=f(18685),y=f(26676);function I(O){var A=-1,D=null==O?0:O.length;for(this.clear();++A<D;){var B=O[A];this.set(B[0],B[1])}}I.prototype.clear=g,I.prototype.delete=v,I.prototype.get=S,I.prototype.has=T,I.prototype.set=y,E.exports=I},9215:(E,W,f)=>{var g=f(41840),v=f(34378),S=f(54981),T=f(67343),y=f(98895);function I(O){var A=-1,D=null==O?0:O.length;for(this.clear();++A<D;){var B=O[A];this.set(B[0],B[1])}}I.prototype.clear=g,I.prototype.delete=v,I.prototype.get=S,I.prototype.has=T,I.prototype.set=y,E.exports=I},51501:(E,W,f)=>{var S=f(53436)(f(12119),"Map");E.exports=S},99850:(E,W,f)=>{var g=f(10638),v=f(11184),S=f(70866),T=f(43771),y=f(51772);function I(O){var A=-1,D=null==O?0:O.length;for(this.clear();++A<D;){var B=O[A];this.set(B[0],B[1])}}I.prototype.clear=g,I.prototype.delete=v,I.prototype.get=S,I.prototype.has=T,I.prototype.set=y,E.exports=I},44267:(E,W,f)=>{var S=f(53436)(f(12119),"Promise");E.exports=S},46323:(E,W,f)=>{var S=f(53436)(f(12119),"Set");E.exports=S},58849:(E,W,f)=>{var g=f(99850),v=f(4600),S=f(31387);function T(y){var I=-1,O=null==y?0:y.length;for(this.__data__=new g;++I<O;)this.add(y[I])}T.prototype.add=T.prototype.push=v,T.prototype.has=S,E.exports=T},2858:(E,W,f)=>{var g=f(9215),v=f(13720),S=f(64410),T=f(45576),y=f(22247),I=f(41585);function O(A){var D=this.__data__=new g(A);this.size=D.size}O.prototype.clear=v,O.prototype.delete=S,O.prototype.get=T,O.prototype.has=y,O.prototype.set=I,E.exports=O},60443:(E,W,f)=>{var g=f(12119);E.exports=g.Symbol},73457:(E,W,f)=>{var g=f(12119);E.exports=g.Uint8Array},24243:(E,W,f)=>{var S=f(53436)(f(12119),"WeakMap");E.exports=S},26999:E=>{E.exports=function W(f,g,v){switch(v.length){case 0:return f.call(g);case 1:return f.call(g,v[0]);case 2:return f.call(g,v[0],v[1]);case 3:return f.call(g,v[0],v[1],v[2])}return f.apply(g,v)}},96837:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length;++v<S&&!1!==g(f[v],v,f););return f}},69779:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length,T=0,y=[];++v<S;){var I=f[v];g(I,v,f)&&(y[T++]=I)}return y}},61253:(E,W,f)=>{var g=f(14164);E.exports=function v(S,T){return!(null==S||!S.length)&&g(S,T,0)>-1}},37609:E=>{E.exports=function W(f,g,v){for(var S=-1,T=null==f?0:f.length;++S<T;)if(v(g,f[S]))return!0;return!1}},72271:(E,W,f)=>{var g=f(85334),v=f(77151),S=f(21503),T=f(80891),y=f(58442),I=f(48159),A=Object.prototype.hasOwnProperty;E.exports=function D(B,k){var Y=S(B),te=!Y&&v(B),ue=!Y&&!te&&T(B),i=!Y&&!te&&!ue&&I(B),ae=Y||te||ue||i,pe=ae?g(B.length,String):[],le=pe.length;for(var K in B)(k||A.call(B,K))&&(!ae||!("length"==K||ue&&("offset"==K||"parent"==K)||i&&("buffer"==K||"byteLength"==K||"byteOffset"==K)||y(K,le)))&&pe.push(K);return pe}},84633:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length,T=Array(S);++v<S;)T[v]=g(f[v],v,f);return T}},85059:E=>{E.exports=function W(f,g){for(var v=-1,S=g.length,T=f.length;++v<S;)f[T+v]=g[v];return f}},8745:E=>{E.exports=function W(f,g,v,S){var T=-1,y=null==f?0:f.length;for(S&&y&&(v=f[++T]);++T<y;)v=g(v,f[T],T,f);return v}},79503:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length;++v<S;)if(g(f[v],v,f))return!0;return!1}},75481:(E,W,f)=>{var v=f(11847)("length");E.exports=v},49276:(E,W,f)=>{var g=f(85683),v=f(20217);E.exports=function S(T,y,I){(void 0!==I&&!v(T[y],I)||void 0===I&&!(y in T))&&g(T,y,I)}},89719:(E,W,f)=>{var g=f(85683),v=f(20217),T=Object.prototype.hasOwnProperty;E.exports=function y(I,O,A){var D=I[O];(!T.call(I,O)||!v(D,A)||void 0===A&&!(O in I))&&g(I,O,A)}},43503:(E,W,f)=>{var g=f(20217);E.exports=function v(S,T){for(var y=S.length;y--;)if(g(S[y][0],T))return y;return-1}},94121:(E,W,f)=>{var g=f(31989),v=f(118);E.exports=function S(T,y){return T&&g(y,v(y),T)}},99287:(E,W,f)=>{var g=f(31989),v=f(16555);E.exports=function S(T,y){return T&&g(y,v(y),T)}},85683:(E,W,f)=>{var g=f(56713);E.exports=function v(S,T,y){"__proto__"==T&&g?g(S,T,{configurable:!0,enumerable:!0,value:y,writable:!0}):S[T]=y}},44462:(E,W,f)=>{var g=f(2858),v=f(96837),S=f(89719),T=f(94121),y=f(99287),I=f(19292),O=f(99454),A=f(84444),D=f(59905),B=f(47597),k=f(6967),Y=f(28794),te=f(76782),ue=f(37878),i=f(4264),ae=f(21503),pe=f(80891),le=f(13222),K=f(25940),ve=f(90799),we=f(118),ke=f(16555),Ge="[object Arguments]",pt="[object Function]",gn="[object Object]",N={};N[Ge]=N["[object Array]"]=N["[object ArrayBuffer]"]=N["[object DataView]"]=N["[object Boolean]"]=N["[object Date]"]=N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Map]"]=N["[object Number]"]=N[gn]=N["[object RegExp]"]=N["[object Set]"]=N["[object String]"]=N["[object Symbol]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N["[object Error]"]=N[pt]=N["[object WeakMap]"]=!1,E.exports=function U(re,xe,Qe,Xe,wt,Ft){var Vt,xn=1&xe,In=2&xe,mn=4&xe;if(Qe&&(Vt=wt?Qe(re,Xe,wt,Ft):Qe(re)),void 0!==Vt)return Vt;if(!K(re))return re;var pr=ae(re);if(pr){if(Vt=te(re),!xn)return O(re,Vt)}else{var or=Y(re),oi=or==pt||"[object GeneratorFunction]"==or;if(pe(re))return I(re,xn);if(or==gn||or==Ge||oi&&!wt){if(Vt=In||oi?{}:i(re),!xn)return In?D(re,y(Vt,re)):A(re,T(Vt,re))}else{if(!N[or])return wt?re:{};Vt=ue(re,or,xn)}}Ft||(Ft=new g);var Un=Ft.get(re);if(Un)return Un;Ft.set(re,Vt),ve(re)?re.forEach(function(ur){Vt.add(U(ur,xe,Qe,ur,re,Ft))}):le(re)&&re.forEach(function(ur,Mr){Vt.set(Mr,U(ur,xe,Qe,Mr,re,Ft))});var Jn=pr?void 0:(mn?In?k:B:In?ke:we)(re);return v(Jn||re,function(ur,Mr){Jn&&(ur=re[Mr=ur]),S(Vt,Mr,U(ur,xe,Qe,Mr,re,Ft))}),Vt}},78858:(E,W,f)=>{var g=f(25940),v=Object.create,S=function(){function T(){}return function(y){if(!g(y))return{};if(v)return v(y);T.prototype=y;var I=new T;return T.prototype=void 0,I}}();E.exports=S},43132:(E,W,f)=>{var g=f(45184),S=f(16539)(g);E.exports=S},67308:(E,W,f)=>{var g=f(44129);E.exports=function v(S,T,y){for(var I=-1,O=S.length;++I<O;){var A=S[I],D=T(A);if(null!=D&&(void 0===B?D==D&&!g(D):y(D,B)))var B=D,k=A}return k}},33609:(E,W,f)=>{var g=f(43132);E.exports=function v(S,T){var y=[];return g(S,function(I,O,A){T(I,O,A)&&y.push(I)}),y}},65317:E=>{E.exports=function W(f,g,v,S){for(var T=f.length,y=v+(S?1:-1);S?y--:++y<T;)if(g(f[y],y,f))return y;return-1}},50686:(E,W,f)=>{var g=f(85059),v=f(75039);E.exports=function S(T,y,I,O,A){var D=-1,B=T.length;for(I||(I=v),A||(A=[]);++D<B;){var k=T[D];y>0&&I(k)?y>1?S(k,y-1,I,O,A):g(A,k):O||(A[A.length]=k)}return A}},30755:(E,W,f)=>{var v=f(40456)();E.exports=v},45184:(E,W,f)=>{var g=f(30755),v=f(118);E.exports=function S(T,y){return T&&g(T,y,v)}},15456:(E,W,f)=>{var g=f(65456),v=f(68533);E.exports=function S(T,y){for(var I=0,O=(y=g(y,T)).length;null!=T&&I<O;)T=T[v(y[I++])];return I&&I==O?T:void 0}},38247:(E,W,f)=>{var g=f(85059),v=f(21503);E.exports=function S(T,y,I){var O=y(T);return v(T)?O:g(O,I(T))}},93337:(E,W,f)=>{var g=f(60443),v=f(21318),S=f(92902),I=g?g.toStringTag:void 0;E.exports=function O(A){return null==A?void 0===A?"[object Undefined]":"[object Null]":I&&I in Object(A)?v(A):S(A)}},31100:E=>{E.exports=function W(f,g){return f>g}},84781:E=>{var f=Object.prototype.hasOwnProperty;E.exports=function g(v,S){return null!=v&&f.call(v,S)}},69989:E=>{E.exports=function W(f,g){return null!=f&&g in Object(f)}},14164:(E,W,f)=>{var g=f(65317),v=f(70968),S=f(24977);E.exports=function T(y,I,O){return I==I?S(y,I,O):g(y,v,O)}},60186:(E,W,f)=>{var g=f(93337),v=f(72671);E.exports=function T(y){return v(y)&&"[object Arguments]"==g(y)}},85740:(E,W,f)=>{var g=f(58325),v=f(72671);E.exports=function S(T,y,I,O,A){return T===y||(null==T||null==y||!v(T)&&!v(y)?T!=T&&y!=y:g(T,y,I,O,S,A))}},58325:(E,W,f)=>{var g=f(2858),v=f(63914),S=f(78583),T=f(32286),y=f(28794),I=f(21503),O=f(80891),A=f(48159),B="[object Arguments]",k="[object Array]",Y="[object Object]",ue=Object.prototype.hasOwnProperty;E.exports=function i(ae,pe,le,K,ve,we){var ke=I(ae),b=I(pe),Ue=ke?k:y(ae),at=b?k:y(pe),Ge=(Ue=Ue==B?Y:Ue)==Y,Re=(at=at==B?Y:at)==Y,Ne=Ue==at;if(Ne&&O(ae)){if(!O(pe))return!1;ke=!0,Ge=!1}if(Ne&&!Ge)return we||(we=new g),ke||A(ae)?v(ae,pe,le,K,ve,we):S(ae,pe,Ue,le,K,ve,we);if(!(1&le)){var tt=Ge&&ue.call(ae,"__wrapped__"),Je=Re&&ue.call(pe,"__wrapped__");if(tt||Je){var pt=tt?ae.value():ae,_t=Je?pe.value():pe;return we||(we=new g),ve(pt,_t,le,K,we)}}return!!Ne&&(we||(we=new g),T(ae,pe,le,K,ve,we))}},97021:(E,W,f)=>{var g=f(28794),v=f(72671);E.exports=function T(y){return v(y)&&"[object Map]"==g(y)}},40431:(E,W,f)=>{var g=f(2858),v=f(85740);E.exports=function y(I,O,A,D){var B=A.length,k=B,Y=!D;if(null==I)return!k;for(I=Object(I);B--;){var te=A[B];if(Y&&te[2]?te[1]!==I[te[0]]:!(te[0]in I))return!1}for(;++B<k;){var ue=(te=A[B])[0],i=I[ue],ae=te[1];if(Y&&te[2]){if(void 0===i&&!(ue in I))return!1}else{var pe=new g;if(D)var le=D(i,ae,ue,I,O,pe);if(!(void 0===le?v(ae,i,3,D,pe):le))return!1}}return!0}},70968:E=>{E.exports=function W(f){return f!=f}},37304:(E,W,f)=>{var g=f(75946),v=f(91943),S=f(25940),T=f(52827),I=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");E.exports=function Y(te){return!(!S(te)||v(te))&&(g(te)?k:I).test(T(te))}},771:(E,W,f)=>{var g=f(28794),v=f(72671);E.exports=function T(y){return v(y)&&"[object Set]"==g(y)}},1083:(E,W,f)=>{var g=f(93337),v=f(96231),S=f(72671),Ne={};Ne["[object Float32Array]"]=Ne["[object Float64Array]"]=Ne["[object Int8Array]"]=Ne["[object Int16Array]"]=Ne["[object Int32Array]"]=Ne["[object Uint8Array]"]=Ne["[object Uint8ClampedArray]"]=Ne["[object Uint16Array]"]=Ne["[object Uint32Array]"]=!0,Ne["[object Arguments]"]=Ne["[object Array]"]=Ne["[object ArrayBuffer]"]=Ne["[object Boolean]"]=Ne["[object DataView]"]=Ne["[object Date]"]=Ne["[object Error]"]=Ne["[object Function]"]=Ne["[object Map]"]=Ne["[object Number]"]=Ne["[object Object]"]=Ne["[object RegExp]"]=Ne["[object Set]"]=Ne["[object String]"]=Ne["[object WeakMap]"]=!1,E.exports=function tt(Je){return S(Je)&&v(Je.length)&&!!Ne[g(Je)]}},96517:(E,W,f)=>{var g=f(98133),v=f(9458),S=f(32608),T=f(21503),y=f(87495);E.exports=function I(O){return"function"==typeof O?O:null==O?S:"object"==typeof O?T(O)?v(O[0],O[1]):g(O):y(O)}},81172:(E,W,f)=>{var g=f(45488),v=f(85491),T=Object.prototype.hasOwnProperty;E.exports=function y(I){if(!g(I))return v(I);var O=[];for(var A in Object(I))T.call(I,A)&&"constructor"!=A&&O.push(A);return O}},92809:(E,W,f)=>{var g=f(25940),v=f(45488),S=f(32158),y=Object.prototype.hasOwnProperty;E.exports=function I(O){if(!g(O))return S(O);var A=v(O),D=[];for(var B in O)"constructor"==B&&(A||!y.call(O,B))||D.push(B);return D}},99069:E=>{E.exports=function W(f,g){return f<g}},92046:(E,W,f)=>{var g=f(43132),v=f(56507);E.exports=function S(T,y){var I=-1,O=v(T)?Array(T.length):[];return g(T,function(A,D,B){O[++I]=y(A,D,B)}),O}},98133:(E,W,f)=>{var g=f(40431),v=f(22379),S=f(642);E.exports=function T(y){var I=v(y);return 1==I.length&&I[0][2]?S(I[0][0],I[0][1]):function(O){return O===y||g(O,y,I)}}},9458:(E,W,f)=>{var g=f(85740),v=f(8817),S=f(11172),T=f(45352),y=f(22442),I=f(642),O=f(68533);E.exports=function B(k,Y){return T(k)&&y(Y)?I(O(k),Y):function(te){var ue=v(te,k);return void 0===ue&&ue===Y?S(te,k):g(Y,ue,3)}}},73842:(E,W,f)=>{var g=f(2858),v=f(49276),S=f(30755),T=f(33675),y=f(25940),I=f(16555),O=f(99351);E.exports=function A(D,B,k,Y,te){D!==B&&S(B,function(ue,i){if(te||(te=new g),y(ue))T(D,B,i,k,A,Y,te);else{var ae=Y?Y(O(D,i),ue,i+"",D,B,te):void 0;void 0===ae&&(ae=ue),v(D,i,ae)}},I)}},33675:(E,W,f)=>{var g=f(49276),v=f(19292),S=f(65208),T=f(99454),y=f(4264),I=f(77151),O=f(21503),A=f(21330),D=f(80891),B=f(75946),k=f(25940),Y=f(97614),te=f(48159),ue=f(99351),i=f(8067);E.exports=function ae(pe,le,K,ve,we,ke,b){var Ue=ue(pe,K),at=ue(le,K),Ge=b.get(at);if(Ge)g(pe,K,Ge);else{var Re=ke?ke(Ue,at,K+"",pe,le,b):void 0,Ne=void 0===Re;if(Ne){var tt=O(at),Je=!tt&&D(at),pt=!tt&&!Je&&te(at);Re=at,tt||Je||pt?O(Ue)?Re=Ue:A(Ue)?Re=T(Ue):Je?(Ne=!1,Re=v(at,!0)):pt?(Ne=!1,Re=S(at,!0)):Re=[]:Y(at)||I(at)?(Re=Ue,I(Ue)?Re=i(Ue):(!k(Ue)||B(Ue))&&(Re=y(at))):Ne=!1}Ne&&(b.set(at,Re),we(Re,at,ve,ke,b),b.delete(at)),g(pe,K,Re)}}},6119:(E,W,f)=>{var g=f(84633),v=f(15456),S=f(96517),T=f(92046),y=f(18750),I=f(85647),O=f(41215),A=f(32608),D=f(21503);E.exports=function B(k,Y,te){Y=Y.length?g(Y,function(ae){return D(ae)?function(pe){return v(pe,1===ae.length?ae[0]:ae)}:ae}):[A];var ue=-1;Y=g(Y,I(S));var i=T(k,function(ae,pe,le){return{criteria:g(Y,function(ve){return ve(ae)}),index:++ue,value:ae}});return y(i,function(ae,pe){return O(ae,pe,te)})}},83021:(E,W,f)=>{var g=f(95495),v=f(11172);E.exports=function S(T,y){return g(T,y,function(I,O){return v(T,O)})}},95495:(E,W,f)=>{var g=f(15456),v=f(55963),S=f(65456);E.exports=function T(y,I,O){for(var A=-1,D=I.length,B={};++A<D;){var k=I[A],Y=g(y,k);O(Y,k)&&v(B,S(k,y),Y)}return B}},11847:E=>{E.exports=function W(f){return function(g){return null==g?void 0:g[f]}}},39222:(E,W,f)=>{var g=f(15456);E.exports=function v(S){return function(T){return g(T,S)}}},16307:E=>{var W=Math.ceil,f=Math.max;E.exports=function g(v,S,T,y){for(var I=-1,O=f(W((S-v)/(T||1)),0),A=Array(O);O--;)A[y?O:++I]=v,v+=T;return A}},13570:E=>{E.exports=function W(f,g,v,S,T){return T(f,function(y,I,O){v=S?(S=!1,y):g(v,y,I,O)}),v}},23269:(E,W,f)=>{var g=f(32608),v=f(53983),S=f(72185);E.exports=function T(y,I){return S(v(y,I,g),y+"")}},55963:(E,W,f)=>{var g=f(89719),v=f(65456),S=f(58442),T=f(25940),y=f(68533);E.exports=function I(O,A,D,B){if(!T(O))return O;for(var k=-1,Y=(A=v(A,O)).length,te=Y-1,ue=O;null!=ue&&++k<Y;){var i=y(A[k]),ae=D;if("__proto__"===i||"constructor"===i||"prototype"===i)return O;if(k!=te){var pe=ue[i];void 0===(ae=B?B(pe,i,ue):void 0)&&(ae=T(pe)?pe:S(A[k+1])?[]:{})}g(ue,i,ae),ue=ue[i]}return O}},69510:(E,W,f)=>{var g=f(76684),v=f(56713),S=f(32608);E.exports=v?function(y,I){return v(y,"toString",{configurable:!0,enumerable:!1,value:g(I),writable:!0})}:S},18750:E=>{E.exports=function W(f,g){var v=f.length;for(f.sort(g);v--;)f[v]=f[v].value;return f}},85334:E=>{E.exports=function W(f,g){for(var v=-1,S=Array(f);++v<f;)S[v]=g(v);return S}},93935:(E,W,f)=>{var g=f(60443),v=f(84633),S=f(21503),T=f(44129),I=g?g.prototype:void 0,O=I?I.toString:void 0;E.exports=function A(D){if("string"==typeof D)return D;if(S(D))return v(D,A)+"";if(T(D))return O?O.call(D):"";var B=D+"";return"0"==B&&1/D==-1/0?"-0":B}},83348:(E,W,f)=>{var g=f(42760),v=/^\s+/;E.exports=function S(T){return T&&T.slice(0,g(T)+1).replace(v,"")}},85647:E=>{E.exports=function W(f){return function(g){return f(g)}}},80707:(E,W,f)=>{var g=f(58849),v=f(61253),S=f(37609),T=f(25972),y=f(14575),I=f(24174);E.exports=function A(D,B,k){var Y=-1,te=v,ue=D.length,i=!0,ae=[],pe=ae;if(k)i=!1,te=S;else if(ue>=200){var le=B?null:y(D);if(le)return I(le);i=!1,te=T,pe=new g}else pe=B?[]:ae;e:for(;++Y<ue;){var K=D[Y],ve=B?B(K):K;if(K=k||0!==K?K:0,i&&ve==ve){for(var we=pe.length;we--;)if(pe[we]===ve)continue e;B&&pe.push(ve),ae.push(K)}else te(pe,ve,k)||(pe!==ae&&pe.push(ve),ae.push(K))}return ae}},19179:(E,W,f)=>{var g=f(84633);E.exports=function v(S,T){return g(T,function(y){return S[y]})}},38645:E=>{E.exports=function W(f,g,v){for(var S=-1,T=f.length,y=g.length,I={};++S<T;)v(I,f[S],S<y?g[S]:void 0);return I}},25972:E=>{E.exports=function W(f,g){return f.has(g)}},21481:(E,W,f)=>{var g=f(32608);E.exports=function v(S){return"function"==typeof S?S:g}},65456:(E,W,f)=>{var g=f(21503),v=f(45352),S=f(32855),T=f(73943);E.exports=function y(I,O){return g(I)?I:v(I,O)?[I]:S(T(I))}},43362:(E,W,f)=>{var g=f(73457);E.exports=function v(S){var T=new S.constructor(S.byteLength);return new g(T).set(new g(S)),T}},19292:(E,W,f)=>{E=f.nmd(E);var g=f(12119),v=W&&!W.nodeType&&W,S=v&&E&&!E.nodeType&&E,y=S&&S.exports===v?g.Buffer:void 0,I=y?y.allocUnsafe:void 0;E.exports=function O(A,D){if(D)return A.slice();var B=A.length,k=I?I(B):new A.constructor(B);return A.copy(k),k}},17e3:(E,W,f)=>{var g=f(43362);E.exports=function v(S,T){var y=T?g(S.buffer):S.buffer;return new S.constructor(y,S.byteOffset,S.byteLength)}},74098:E=>{var W=/\w*$/;E.exports=function f(g){var v=new g.constructor(g.source,W.exec(g));return v.lastIndex=g.lastIndex,v}},62533:(E,W,f)=>{var g=f(60443),v=g?g.prototype:void 0,S=v?v.valueOf:void 0;E.exports=function T(y){return S?Object(S.call(y)):{}}},65208:(E,W,f)=>{var g=f(43362);E.exports=function v(S,T){var y=T?g(S.buffer):S.buffer;return new S.constructor(y,S.byteOffset,S.length)}},13443:(E,W,f)=>{var g=f(44129);E.exports=function v(S,T){if(S!==T){var y=void 0!==S,I=null===S,O=S==S,A=g(S),D=void 0!==T,B=null===T,k=T==T,Y=g(T);if(!B&&!Y&&!A&&S>T||A&&D&&k&&!B&&!Y||I&&D&&k||!y&&k||!O)return 1;if(!I&&!A&&!Y&&S<T||Y&&y&&O&&!I&&!A||B&&y&&O||!D&&O||!k)return-1}return 0}},41215:(E,W,f)=>{var g=f(13443);E.exports=function v(S,T,y){for(var I=-1,O=S.criteria,A=T.criteria,D=O.length,B=y.length;++I<D;){var k=g(O[I],A[I]);if(k)return I>=B?k:k*("desc"==y[I]?-1:1)}return S.index-T.index}},99454:E=>{E.exports=function W(f,g){var v=-1,S=f.length;for(g||(g=Array(S));++v<S;)g[v]=f[v];return g}},31989:(E,W,f)=>{var g=f(89719),v=f(85683);E.exports=function S(T,y,I,O){var A=!I;I||(I={});for(var D=-1,B=y.length;++D<B;){var k=y[D],Y=O?O(I[k],T[k],k,I,T):void 0;void 0===Y&&(Y=T[k]),A?v(I,k,Y):g(I,k,Y)}return I}},84444:(E,W,f)=>{var g=f(31989),v=f(39383);E.exports=function S(T,y){return g(T,v(T),y)}},59905:(E,W,f)=>{var g=f(31989),v=f(53051);E.exports=function S(T,y){return g(T,v(T),y)}},24610:(E,W,f)=>{var g=f(12119);E.exports=g["__core-js_shared__"]},84944:(E,W,f)=>{var g=f(23269),v=f(93342);E.exports=function S(T){return g(function(y,I){var O=-1,A=I.length,D=A>1?I[A-1]:void 0,B=A>2?I[2]:void 0;for(D=T.length>3&&"function"==typeof D?(A--,D):void 0,B&&v(I[0],I[1],B)&&(D=A<3?void 0:D,A=1),y=Object(y);++O<A;){var k=I[O];k&&T(y,k,O,D)}return y})}},16539:(E,W,f)=>{var g=f(56507);E.exports=function v(S,T){return function(y,I){if(null==y)return y;if(!g(y))return S(y,I);for(var O=y.length,A=T?O:-1,D=Object(y);(T?A--:++A<O)&&!1!==I(D[A],A,D););return y}}},40456:E=>{E.exports=function W(f){return function(g,v,S){for(var T=-1,y=Object(g),I=S(g),O=I.length;O--;){var A=I[f?O:++T];if(!1===v(y[A],A,y))break}return g}}},24653:(E,W,f)=>{var g=f(96517),v=f(56507),S=f(118);E.exports=function T(y){return function(I,O,A){var D=Object(I);if(!v(I)){var B=g(O,3);I=S(I),O=function(Y){return B(D[Y],Y,D)}}var k=y(I,O,A);return k>-1?D[B?I[k]:k]:void 0}}},97509:(E,W,f)=>{var g=f(16307),v=f(93342),S=f(12232);E.exports=function T(y){return function(I,O,A){return A&&"number"!=typeof A&&v(I,O,A)&&(O=A=void 0),I=S(I),void 0===O?(O=I,I=0):O=S(O),A=void 0===A?I<O?1:-1:S(A),g(I,O,A,y)}}},14575:(E,W,f)=>{var g=f(46323),v=f(12552),S=f(24174),y=g&&1/S(new g([,-0]))[1]==1/0?function(I){return new g(I)}:v;E.exports=y},56713:(E,W,f)=>{var g=f(53436),v=function(){try{var S=g(Object,"defineProperty");return S({},"",{}),S}catch(T){}}();E.exports=v},63914:(E,W,f)=>{var g=f(58849),v=f(79503),S=f(25972);E.exports=function I(O,A,D,B,k,Y){var te=1&D,ue=O.length,i=A.length;if(ue!=i&&!(te&&i>ue))return!1;var ae=Y.get(O),pe=Y.get(A);if(ae&&pe)return ae==A&&pe==O;var le=-1,K=!0,ve=2&D?new g:void 0;for(Y.set(O,A),Y.set(A,O);++le<ue;){var we=O[le],ke=A[le];if(B)var b=te?B(ke,we,le,A,O,Y):B(we,ke,le,O,A,Y);if(void 0!==b){if(b)continue;K=!1;break}if(ve){if(!v(A,function(Ue,at){if(!S(ve,at)&&(we===Ue||k(we,Ue,D,B,Y)))return ve.push(at)})){K=!1;break}}else if(we!==ke&&!k(we,ke,D,B,Y)){K=!1;break}}return Y.delete(O),Y.delete(A),K}},78583:(E,W,f)=>{var g=f(60443),v=f(73457),S=f(20217),T=f(63914),y=f(83205),I=f(24174),ve=g?g.prototype:void 0,we=ve?ve.valueOf:void 0;E.exports=function ke(b,Ue,at,Ge,Re,Ne,tt){switch(at){case"[object DataView]":if(b.byteLength!=Ue.byteLength||b.byteOffset!=Ue.byteOffset)return!1;b=b.buffer,Ue=Ue.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=Ue.byteLength||!Ne(new v(b),new v(Ue)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+b,+Ue);case"[object Error]":return b.name==Ue.name&&b.message==Ue.message;case"[object RegExp]":case"[object String]":return b==Ue+"";case"[object Map]":var Je=y;case"[object Set]":if(Je||(Je=I),b.size!=Ue.size&&!(1&Ge))return!1;var _t=tt.get(b);if(_t)return _t==Ue;Ge|=2,tt.set(b,Ue);var gt=T(Je(b),Je(Ue),Ge,Re,Ne,tt);return tt.delete(b),gt;case"[object Symbol]":if(we)return we.call(b)==we.call(Ue)}return!1}},32286:(E,W,f)=>{var g=f(47597),T=Object.prototype.hasOwnProperty;E.exports=function y(I,O,A,D,B,k){var Y=1&A,te=g(I),ue=te.length;if(ue!=g(O).length&&!Y)return!1;for(var pe=ue;pe--;){var le=te[pe];if(!(Y?le in O:T.call(O,le)))return!1}var K=k.get(I),ve=k.get(O);if(K&&ve)return K==O&&ve==I;var we=!0;k.set(I,O),k.set(O,I);for(var ke=Y;++pe<ue;){var b=I[le=te[pe]],Ue=O[le];if(D)var at=Y?D(Ue,b,le,O,I,k):D(b,Ue,le,I,O,k);if(!(void 0===at?b===Ue||B(b,Ue,A,D,k):at)){we=!1;break}ke||(ke="constructor"==le)}if(we&&!ke){var Ge=I.constructor,Re=O.constructor;Ge!=Re&&"constructor"in I&&"constructor"in O&&!("function"==typeof Ge&&Ge instanceof Ge&&"function"==typeof Re&&Re instanceof Re)&&(we=!1)}return k.delete(I),k.delete(O),we}},3975:(E,W,f)=>{var g=f(22274),v=f(53983),S=f(72185);E.exports=function T(y){return S(v(y,void 0,g),y+"")}},79122:E=>{var W="object"==typeof global&&global&&global.Object===Object&&global;E.exports=W},47597:(E,W,f)=>{var g=f(38247),v=f(39383),S=f(118);E.exports=function T(y){return g(y,S,v)}},6967:(E,W,f)=>{var g=f(38247),v=f(53051),S=f(16555);E.exports=function T(y){return g(y,S,v)}},54537:(E,W,f)=>{var g=f(23819);E.exports=function v(S,T){var y=S.__data__;return g(T)?y["string"==typeof T?"string":"hash"]:y.map}},22379:(E,W,f)=>{var g=f(22442),v=f(118);E.exports=function S(T){for(var y=v(T),I=y.length;I--;){var O=y[I],A=T[O];y[I]=[O,A,g(A)]}return y}},53436:(E,W,f)=>{var g=f(37304),v=f(51990);E.exports=function S(T,y){var I=v(T,y);return g(I)?I:void 0}},29519:(E,W,f)=>{var v=f(69385)(Object.getPrototypeOf,Object);E.exports=v},21318:(E,W,f)=>{var g=f(60443),v=Object.prototype,S=v.hasOwnProperty,T=v.toString,y=g?g.toStringTag:void 0;E.exports=function I(O){var A=S.call(O,y),D=O[y];try{O[y]=void 0;var B=!0}catch(Y){}var k=T.call(O);return B&&(A?O[y]=D:delete O[y]),k}},39383:(E,W,f)=>{var g=f(69779),v=f(49975),T=Object.prototype.propertyIsEnumerable,y=Object.getOwnPropertySymbols;E.exports=y?function(O){return null==O?[]:(O=Object(O),g(y(O),function(A){return T.call(O,A)}))}:v},53051:(E,W,f)=>{var g=f(85059),v=f(29519),S=f(39383),T=f(49975);E.exports=Object.getOwnPropertySymbols?function(O){for(var A=[];O;)g(A,S(O)),O=v(O);return A}:T},28794:(E,W,f)=>{var g=f(37244),v=f(51501),S=f(44267),T=f(46323),y=f(24243),I=f(93337),O=f(52827),A="[object Map]",B="[object Promise]",k="[object Set]",Y="[object WeakMap]",te="[object DataView]",ue=O(g),i=O(v),ae=O(S),pe=O(T),le=O(y),K=I;(g&&K(new g(new ArrayBuffer(1)))!=te||v&&K(new v)!=A||S&&K(S.resolve())!=B||T&&K(new T)!=k||y&&K(new y)!=Y)&&(K=function(ve){var we=I(ve),ke="[object Object]"==we?ve.constructor:void 0,b=ke?O(ke):"";if(b)switch(b){case ue:return te;case i:return A;case ae:return B;case pe:return k;case le:return Y}return we}),E.exports=K},51990:E=>{E.exports=function W(f,g){return null==f?void 0:f[g]}},47283:(E,W,f)=>{var g=f(65456),v=f(77151),S=f(21503),T=f(58442),y=f(96231),I=f(68533);E.exports=function O(A,D,B){for(var k=-1,Y=(D=g(D,A)).length,te=!1;++k<Y;){var ue=I(D[k]);if(!(te=null!=A&&B(A,ue)))break;A=A[ue]}return te||++k!=Y?te:!!(Y=null==A?0:A.length)&&y(Y)&&T(ue,Y)&&(S(A)||v(A))}},77609:E=>{var I=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");E.exports=function O(A){return I.test(A)}},64312:(E,W,f)=>{var g=f(60862);E.exports=function v(){this.__data__=g?g(null):{},this.size=0}},22393:E=>{E.exports=function W(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}},15764:(E,W,f)=>{var g=f(60862),T=Object.prototype.hasOwnProperty;E.exports=function y(I){var O=this.__data__;if(g){var A=O[I];return"__lodash_hash_undefined__"===A?void 0:A}return T.call(O,I)?O[I]:void 0}},18685:(E,W,f)=>{var g=f(60862),S=Object.prototype.hasOwnProperty;E.exports=function T(y){var I=this.__data__;return g?void 0!==I[y]:S.call(I,y)}},26676:(E,W,f)=>{var g=f(60862);E.exports=function S(T,y){var I=this.__data__;return this.size+=this.has(T)?0:1,I[T]=g&&void 0===y?"__lodash_hash_undefined__":y,this}},76782:E=>{var f=Object.prototype.hasOwnProperty;E.exports=function g(v){var S=v.length,T=new v.constructor(S);return S&&"string"==typeof v[0]&&f.call(v,"index")&&(T.index=v.index,T.input=v.input),T}},37878:(E,W,f)=>{var g=f(43362),v=f(17e3),S=f(74098),T=f(62533),y=f(65208);E.exports=function at(Ge,Re,Ne){var tt=Ge.constructor;switch(Re){case"[object ArrayBuffer]":return g(Ge);case"[object Boolean]":case"[object Date]":return new tt(+Ge);case"[object DataView]":return v(Ge,Ne);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return y(Ge,Ne);case"[object Map]":case"[object Set]":return new tt;case"[object Number]":case"[object String]":return new tt(Ge);case"[object RegExp]":return S(Ge);case"[object Symbol]":return T(Ge)}}},4264:(E,W,f)=>{var g=f(78858),v=f(29519),S=f(45488);E.exports=function T(y){return"function"!=typeof y.constructor||S(y)?{}:g(v(y))}},75039:(E,W,f)=>{var g=f(60443),v=f(77151),S=f(21503),T=g?g.isConcatSpreadable:void 0;E.exports=function y(I){return S(I)||v(I)||!!(T&&I&&I[T])}},58442:E=>{var f=/^(?:0|[1-9]\d*)$/;E.exports=function g(v,S){var T=typeof v;return!!(S=null==S?9007199254740991:S)&&("number"==T||"symbol"!=T&&f.test(v))&&v>-1&&v%1==0&&v<S}},93342:(E,W,f)=>{var g=f(20217),v=f(56507),S=f(58442),T=f(25940);E.exports=function y(I,O,A){if(!T(A))return!1;var D=typeof O;return!!("number"==D?v(A)&&S(O,A.length):"string"==D&&O in A)&&g(A[O],I)}},45352:(E,W,f)=>{var g=f(21503),v=f(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;E.exports=function y(I,O){if(g(I))return!1;var A=typeof I;return!("number"!=A&&"symbol"!=A&&"boolean"!=A&&null!=I&&!v(I))||T.test(I)||!S.test(I)||null!=O&&I in Object(O)}},23819:E=>{E.exports=function W(f){var g=typeof f;return"string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==f:null===f}},91943:(E,W,f)=>{var T,g=f(24610),v=(T=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";E.exports=function S(T){return!!v&&v in T}},45488:E=>{var W=Object.prototype;E.exports=function f(g){var v=g&&g.constructor;return g===("function"==typeof v&&v.prototype||W)}},22442:(E,W,f)=>{var g=f(25940);E.exports=function v(S){return S==S&&!g(S)}},41840:E=>{E.exports=function W(){this.__data__=[],this.size=0}},34378:(E,W,f)=>{var g=f(43503),S=Array.prototype.splice;E.exports=function T(y){var I=this.__data__,O=g(I,y);return!(O<0||(O==I.length-1?I.pop():S.call(I,O,1),--this.size,0))}},54981:(E,W,f)=>{var g=f(43503);E.exports=function v(S){var T=this.__data__,y=g(T,S);return y<0?void 0:T[y][1]}},67343:(E,W,f)=>{var g=f(43503);E.exports=function v(S){return g(this.__data__,S)>-1}},98895:(E,W,f)=>{var g=f(43503);E.exports=function v(S,T){var y=this.__data__,I=g(y,S);return I<0?(++this.size,y.push([S,T])):y[I][1]=T,this}},10638:(E,W,f)=>{var g=f(54994),v=f(9215),S=f(51501);E.exports=function T(){this.size=0,this.__data__={hash:new g,map:new(S||v),string:new g}}},11184:(E,W,f)=>{var g=f(54537);E.exports=function v(S){var T=g(this,S).delete(S);return this.size-=T?1:0,T}},70866:(E,W,f)=>{var g=f(54537);E.exports=function v(S){return g(this,S).get(S)}},43771:(E,W,f)=>{var g=f(54537);E.exports=function v(S){return g(this,S).has(S)}},51772:(E,W,f)=>{var g=f(54537);E.exports=function v(S,T){var y=g(this,S),I=y.size;return y.set(S,T),this.size+=y.size==I?0:1,this}},83205:E=>{E.exports=function W(f){var g=-1,v=Array(f.size);return f.forEach(function(S,T){v[++g]=[T,S]}),v}},642:E=>{E.exports=function W(f,g){return function(v){return null!=v&&v[f]===g&&(void 0!==g||f in Object(v))}}},90719:(E,W,f)=>{var g=f(30535);E.exports=function S(T){var y=g(T,function(O){return 500===I.size&&I.clear(),O}),I=y.cache;return y}},60862:(E,W,f)=>{var v=f(53436)(Object,"create");E.exports=v},85491:(E,W,f)=>{var v=f(69385)(Object.keys,Object);E.exports=v},32158:E=>{E.exports=function W(f){var g=[];if(null!=f)for(var v in Object(f))g.push(v);return g}},73597:(E,W,f)=>{E=f.nmd(E);var g=f(79122),v=W&&!W.nodeType&&W,S=v&&E&&!E.nodeType&&E,y=S&&S.exports===v&&g.process,I=function(){try{return S&&S.require&&S.require("util").types||y&&y.binding&&y.binding("util")}catch(A){}}();E.exports=I},92902:E=>{var f=Object.prototype.toString;E.exports=function g(v){return f.call(v)}},69385:E=>{E.exports=function W(f,g){return function(v){return f(g(v))}}},53983:(E,W,f)=>{var g=f(26999),v=Math.max;E.exports=function S(T,y,I){return y=v(void 0===y?T.length-1:y,0),function(){for(var O=arguments,A=-1,D=v(O.length-y,0),B=Array(D);++A<D;)B[A]=O[y+A];A=-1;for(var k=Array(y+1);++A<y;)k[A]=O[A];return k[y]=I(B),g(T,this,k)}}},12119:(E,W,f)=>{var g=f(79122),v="object"==typeof self&&self&&self.Object===Object&&self,S=g||v||Function("return this")();E.exports=S},99351:E=>{E.exports=function W(f,g){if(("constructor"!==g||"function"!=typeof f[g])&&"__proto__"!=g)return f[g]}},4600:E=>{E.exports=function f(g){return this.__data__.set(g,"__lodash_hash_undefined__"),this}},31387:E=>{E.exports=function W(f){return this.__data__.has(f)}},24174:E=>{E.exports=function W(f){var g=-1,v=Array(f.size);return f.forEach(function(S){v[++g]=S}),v}},72185:(E,W,f)=>{var g=f(69510),S=f(10029)(g);E.exports=S},10029:E=>{var g=Date.now;E.exports=function v(S){var T=0,y=0;return function(){var I=g(),O=16-(I-y);if(y=I,O>0){if(++T>=800)return arguments[0]}else T=0;return S.apply(void 0,arguments)}}},13720:(E,W,f)=>{var g=f(9215);E.exports=function v(){this.__data__=new g,this.size=0}},64410:E=>{E.exports=function W(f){var g=this.__data__,v=g.delete(f);return this.size=g.size,v}},45576:E=>{E.exports=function W(f){return this.__data__.get(f)}},22247:E=>{E.exports=function W(f){return this.__data__.has(f)}},41585:(E,W,f)=>{var g=f(9215),v=f(51501),S=f(99850);E.exports=function y(I,O){var A=this.__data__;if(A instanceof g){var D=A.__data__;if(!v||D.length<199)return D.push([I,O]),this.size=++A.size,this;A=this.__data__=new S(D)}return A.set(I,O),this.size=A.size,this}},24977:E=>{E.exports=function W(f,g,v){for(var S=v-1,T=f.length;++S<T;)if(f[S]===g)return S;return-1}},52315:(E,W,f)=>{var g=f(75481),v=f(77609),S=f(81149);E.exports=function T(y){return v(y)?S(y):g(y)}},32855:(E,W,f)=>{var g=f(90719),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,T=g(function(y){var I=[];return 46===y.charCodeAt(0)&&I.push(""),y.replace(v,function(O,A,D,B){I.push(D?B.replace(S,"$1"):A||O)}),I});E.exports=T},68533:(E,W,f)=>{var g=f(44129);E.exports=function S(T){if("string"==typeof T||g(T))return T;var y=T+"";return"0"==y&&1/T==-1/0?"-0":y}},52827:E=>{var f=Function.prototype.toString;E.exports=function g(v){if(null!=v){try{return f.call(v)}catch(S){}try{return v+""}catch(S){}}return""}},42760:E=>{var W=/\s/;E.exports=function f(g){for(var v=g.length;v--&&W.test(g.charAt(v)););return v}},81149:E=>{var W="\\ud800-\\udfff",y="["+W+"]",I="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",O="\\ud83c[\\udffb-\\udfff]",D="[^"+W+"]",B="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",te="(?:"+I+"|"+O+")?",ue="[\\ufe0e\\ufe0f]?",ae=ue+te+"(?:\\u200d(?:"+[D,B,k].join("|")+")"+ue+te+")*",pe="(?:"+[D+I+"?",I,B,k,y].join("|")+")",le=RegExp(O+"(?="+O+")|"+pe+ae,"g");E.exports=function K(ve){for(var we=le.lastIndex=0;le.test(ve);)++we;return we}},11094:(E,W,f)=>{var g=f(44462);E.exports=function S(T){return g(T,4)}},90733:(E,W,f)=>{var g=f(44462);E.exports=function T(y){return g(y,5)}},76684:E=>{E.exports=function W(f){return function(){return f}}},28800:(E,W,f)=>{var g=f(23269),v=f(20217),S=f(93342),T=f(16555),y=Object.prototype,I=y.hasOwnProperty,O=g(function(A,D){A=Object(A);var B=-1,k=D.length,Y=k>2?D[2]:void 0;for(Y&&S(D[0],D[1],Y)&&(k=1);++B<k;)for(var te=D[B],ue=T(te),i=-1,ae=ue.length;++i<ae;){var pe=ue[i],le=A[pe];(void 0===le||v(le,y[pe])&&!I.call(A,pe))&&(A[pe]=te[pe])}return A});E.exports=O},35474:(E,W,f)=>{E.exports=f(89851)},20217:E=>{E.exports=function W(f,g){return f===g||f!=f&&g!=g}},35281:(E,W,f)=>{var g=f(69779),v=f(33609),S=f(96517),T=f(21503);E.exports=function y(I,O){return(T(I)?g:v)(I,S(O,3))}},62516:(E,W,f)=>{var S=f(24653)(f(36397));E.exports=S},36397:(E,W,f)=>{var g=f(65317),v=f(96517),S=f(44401),T=Math.max;E.exports=function y(I,O,A){var D=null==I?0:I.length;if(!D)return-1;var B=null==A?0:S(A);return B<0&&(B=T(D+B,0)),g(I,v(O,3),B)}},22274:(E,W,f)=>{var g=f(50686);E.exports=function v(S){return null!=S&&S.length?g(S,1):[]}},89851:(E,W,f)=>{var g=f(96837),v=f(43132),S=f(21481),T=f(21503);E.exports=function y(I,O){return(T(I)?g:v)(I,S(O))}},41176:(E,W,f)=>{var g=f(30755),v=f(21481),S=f(16555);E.exports=function T(y,I){return null==y?y:g(y,v(I),S)}},8817:(E,W,f)=>{var g=f(15456);E.exports=function v(S,T,y){var I=null==S?void 0:g(S,T);return void 0===I?y:I}},54842:(E,W,f)=>{var g=f(84781),v=f(47283);E.exports=function S(T,y){return null!=T&&v(T,y,g)}},11172:(E,W,f)=>{var g=f(69989),v=f(47283);E.exports=function S(T,y){return null!=T&&v(T,y,g)}},32608:E=>{E.exports=function W(f){return f}},77151:(E,W,f)=>{var g=f(60186),v=f(72671),S=Object.prototype,T=S.hasOwnProperty,y=S.propertyIsEnumerable,I=g(function(){return arguments}())?g:function(O){return v(O)&&T.call(O,"callee")&&!y.call(O,"callee")};E.exports=I},21503:E=>{E.exports=Array.isArray},56507:(E,W,f)=>{var g=f(75946),v=f(96231);E.exports=function S(T){return null!=T&&v(T.length)&&!g(T)}},21330:(E,W,f)=>{var g=f(56507),v=f(72671);E.exports=function S(T){return v(T)&&g(T)}},80891:(E,W,f)=>{E=f.nmd(E);var g=f(12119),v=f(63580),S=W&&!W.nodeType&&W,T=S&&E&&!E.nodeType&&E,I=T&&T.exports===S?g.Buffer:void 0;E.exports=(I?I.isBuffer:void 0)||v},71973:(E,W,f)=>{var g=f(81172),v=f(28794),S=f(77151),T=f(21503),y=f(56507),I=f(80891),O=f(45488),A=f(48159),Y=Object.prototype.hasOwnProperty;E.exports=function te(ue){if(null==ue)return!0;if(y(ue)&&(T(ue)||"string"==typeof ue||"function"==typeof ue.splice||I(ue)||A(ue)||S(ue)))return!ue.length;var i=v(ue);if("[object Map]"==i||"[object Set]"==i)return!ue.size;if(O(ue))return!g(ue).length;for(var ae in ue)if(Y.call(ue,ae))return!1;return!0}},75946:(E,W,f)=>{var g=f(93337),v=f(25940);E.exports=function O(A){if(!v(A))return!1;var D=g(A);return"[object Function]"==D||"[object GeneratorFunction]"==D||"[object AsyncFunction]"==D||"[object Proxy]"==D}},96231:E=>{E.exports=function f(g){return"number"==typeof g&&g>-1&&g%1==0&&g<=9007199254740991}},13222:(E,W,f)=>{var g=f(97021),v=f(85647),S=f(73597),T=S&&S.isMap,y=T?v(T):g;E.exports=y},25940:E=>{E.exports=function W(f){var g=typeof f;return null!=f&&("object"==g||"function"==g)}},72671:E=>{E.exports=function W(f){return null!=f&&"object"==typeof f}},97614:(E,W,f)=>{var g=f(93337),v=f(29519),S=f(72671),O=Function.prototype.toString,A=Object.prototype.hasOwnProperty,D=O.call(Object);E.exports=function B(k){if(!S(k)||"[object Object]"!=g(k))return!1;var Y=v(k);if(null===Y)return!0;var te=A.call(Y,"constructor")&&Y.constructor;return"function"==typeof te&&te instanceof te&&O.call(te)==D}},90799:(E,W,f)=>{var g=f(771),v=f(85647),S=f(73597),T=S&&S.isSet,y=T?v(T):g;E.exports=y},30248:(E,W,f)=>{var g=f(93337),v=f(21503),S=f(72671);E.exports=function y(I){return"string"==typeof I||!v(I)&&S(I)&&"[object String]"==g(I)}},44129:(E,W,f)=>{var g=f(93337),v=f(72671);E.exports=function T(y){return"symbol"==typeof y||v(y)&&"[object Symbol]"==g(y)}},48159:(E,W,f)=>{var g=f(1083),v=f(85647),S=f(73597),T=S&&S.isTypedArray,y=T?v(T):g;E.exports=y},34235:E=>{E.exports=function W(f){return void 0===f}},118:(E,W,f)=>{var g=f(72271),v=f(81172),S=f(56507);E.exports=function T(y){return S(y)?g(y):v(y)}},16555:(E,W,f)=>{var g=f(72271),v=f(92809),S=f(56507);E.exports=function T(y){return S(y)?g(y,!0):v(y)}},25809:E=>{E.exports=function W(f){var g=null==f?0:f.length;return g?f[g-1]:void 0}},17489:function(E,W,f){var g;E=f.nmd(E),function(){var v,I="Expected a function",A="__lodash_hash_undefined__",B="__lodash_placeholder__",b=128,gt=1/0,on=9007199254740991,$n=4294967295,Gn=[["ary",b],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],We="[object Arguments]",qe="[object Array]",Ct="[object Boolean]",kt="[object Date]",Rt="[object Error]",hr="[object Function]",ki="[object GeneratorFunction]",vn="[object Map]",un="[object Number]",U="[object Object]",re="[object Promise]",Qe="[object RegExp]",Xe="[object Set]",wt="[object String]",Ft="[object Symbol]",xn="[object WeakMap]",mn="[object ArrayBuffer]",pr="[object DataView]",or="[object Float32Array]",oi="[object Float64Array]",Un="[object Int8Array]",Ot="[object Int16Array]",Jn="[object Int32Array]",ur="[object Uint8Array]",Mr="[object Uint8ClampedArray]",ai="[object Uint16Array]",Cr="[object Uint32Array]",xr=/\b__p \+= '';/g,Qo=/\b(__p \+=) '' \+/g,ja=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oo=/&(?:amp|lt|gt|quot|#39);/g,Zo=/[&<>"']/g,ye=RegExp(Oo.source),mi=RegExp(Zo.source),uo=/<%-([\s\S]+?)%>/g,qo=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,si=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ko=/^\w*$/,Lo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lo=/[\\^$.*+?()[\]{}|]/g,Ar=RegExp(lo.source),ea=/^\s+/,zr=/\s/,za=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ga=/\{\n\/\* \[wrapped with (.+)\] \*/,Yr=/,? & /,va=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,co=/[()=,{}\[\]\/\s]/,Ua=/\\(\\)?/g,bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$a=/\w*$/,ma=/^[-+]0x[0-9a-f]+$/i,Wa=/^0b[01]+$/i,ps=/^\[object .+?Constructor\]$/,An=/^0o[0-7]+$/i,ta=/^(?:0|[1-9]\d*)$/,gs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fo=/($^)/,Ji=/['\n\r\u2028\u2029\\]/g,ho="\\ud800-\\udfff",ei="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Li="\\u2700-\\u27bf",lr="a-z\\xdf-\\xf6\\xf8-\\xff",No="A-Z\\xc0-\\xd6\\xd8-\\xde",Zi="\\ufe0e\\ufe0f",po="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ra="["+ho+"]",Vr="["+po+"]",go="["+ei+"]",Br="\\d+",_r="["+Li+"]",ia="["+lr+"]",Ni="[^"+ho+po+Br+Li+lr+No+"]",oa="\\ud83c[\\udffb-\\udfff]",ui="[^"+ho+"]",li="(?:\\ud83c[\\udde6-\\uddff]){2}",Xr="[\\ud800-\\udbff][\\udc00-\\udfff]",vo="["+No+"]",yo="(?:"+ia+"|"+Ni+")",Ro="(?:"+vo+"|"+Ni+")",aa="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Do="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Fo="(?:"+go+"|"+oa+")?",xa="["+Zi+"]?",Xa=xa+Fo+"(?:\\u200d(?:"+[ui,li,Xr].join("|")+")"+xa+Fo+")*",Ka="(?:"+[_r,li,Xr].join("|")+")"+Xa,ms="(?:"+[ui+go+"?",go,li,Xr,ra].join("|")+")",Ja=RegExp("['\u2019]","g"),_a=RegExp(go,"g"),Ri=RegExp(oa+"(?="+oa+")|"+ms+Xa,"g"),ba=RegExp([vo+"?"+ia+"+"+aa+"(?="+[Vr,vo,"$"].join("|")+")",Ro+"+"+Do+"(?="+[Vr,vo+yo,"$"].join("|")+")",vo+"?"+yo+"+"+aa,vo+"+"+Do,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Br,Ka].join("|"),"g"),ys=RegExp("[\\u200d"+ho+ei+Zi+"]"),eo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Di=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sa=-1,Qn={};Qn[or]=Qn[oi]=Qn[Un]=Qn[Ot]=Qn[Jn]=Qn[ur]=Qn[Mr]=Qn[ai]=Qn[Cr]=!0,Qn[We]=Qn[qe]=Qn[mn]=Qn[Ct]=Qn[pr]=Qn[kt]=Qn[Rt]=Qn[hr]=Qn[vn]=Qn[un]=Qn[U]=Qn[Qe]=Qn[Xe]=Qn[wt]=Qn[xn]=!1;var He={};He[We]=He[qe]=He[mn]=He[pr]=He[Ct]=He[kt]=He[or]=He[oi]=He[Un]=He[Ot]=He[Jn]=He[vn]=He[un]=He[U]=He[Qe]=He[Xe]=He[wt]=He[Ft]=He[ur]=He[Mr]=He[ai]=He[Cr]=!0,He[Rt]=He[hr]=He[xn]=!1;var Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ge=parseInt,Ae="object"==typeof global&&global&&global.Object===Object&&global,Se="object"==typeof self&&self&&self.Object===Object&&self,De=Ae||Se||Function("return this")(),rt=W&&!W.nodeType&&W,l=rt&&E&&!E.nodeType&&E,d=l&&l.exports===rt,x=d&&Ae.process,w=function(){try{return l&&l.require&&l.require("util").types||x&&x.binding&&x.binding("util")}catch(Ke){}}(),F=w&&w.isArrayBuffer,H=w&&w.isDate,X=w&&w.isMap,he=w&&w.isRegExp,ce=w&&w.isSet,Oe=w&&w.isTypedArray;function je(Ee,Ke,$e){switch($e.length){case 0:return Ee.call(Ke);case 1:return Ee.call(Ke,$e[0]);case 2:return Ee.call(Ke,$e[0],$e[1]);case 3:return Ee.call(Ke,$e[0],$e[1],$e[2])}return Ee.apply(Ke,$e)}function lt(Ee,Ke,$e,At){for(var sn=-1,Sn=null==Ee?0:Ee.length;++sn<Sn;){var mr=Ee[sn];Ke(At,mr,$e(mr),Ee)}return At}function Fe(Ee,Ke){for(var $e=-1,At=null==Ee?0:Ee.length;++$e<At&&!1!==Ke(Ee[$e],$e,Ee););return Ee}function et(Ee,Ke){for(var $e=null==Ee?0:Ee.length;$e--&&!1!==Ke(Ee[$e],$e,Ee););return Ee}function Ht(Ee,Ke){for(var $e=-1,At=null==Ee?0:Ee.length;++$e<At;)if(!Ke(Ee[$e],$e,Ee))return!1;return!0}function Yt(Ee,Ke){for(var $e=-1,At=null==Ee?0:Ee.length,sn=0,Sn=[];++$e<At;){var mr=Ee[$e];Ke(mr,$e,Ee)&&(Sn[sn++]=mr)}return Sn}function Dt(Ee,Ke){return!(null==Ee||!Ee.length)&&Fi(Ee,Ke,0)>-1}function wr(Ee,Ke,$e){for(var At=-1,sn=null==Ee?0:Ee.length;++At<sn;)if($e(Ke,Ee[At]))return!0;return!1}function tn(Ee,Ke){for(var $e=-1,At=null==Ee?0:Ee.length,sn=Array(At);++$e<At;)sn[$e]=Ke(Ee[$e],$e,Ee);return sn}function Sr(Ee,Ke){for(var $e=-1,At=Ke.length,sn=Ee.length;++$e<At;)Ee[sn+$e]=Ke[$e];return Ee}function Hn(Ee,Ke,$e,At){var sn=-1,Sn=null==Ee?0:Ee.length;for(At&&Sn&&($e=Ee[++sn]);++sn<Sn;)$e=Ke($e,Ee[sn],sn,Ee);return $e}function cn(Ee,Ke,$e,At){var sn=null==Ee?0:Ee.length;for(At&&sn&&($e=Ee[--sn]);sn--;)$e=Ke($e,Ee[sn],sn,Ee);return $e}function ni(Ee,Ke){for(var $e=-1,At=null==Ee?0:Ee.length;++$e<At;)if(Ke(Ee[$e],$e,Ee))return!0;return!1}var an=cr("length");function _s(Ee,Ke,$e){var At;return $e(Ee,function(sn,Sn,mr){if(Ke(sn,Sn,mr))return At=Sn,!1}),At}function ri(Ee,Ke,$e,At){for(var sn=Ee.length,Sn=$e+(At?1:-1);At?Sn--:++Sn<sn;)if(Ke(Ee[Sn],Sn,Ee))return Sn;return-1}function Fi(Ee,Ke,$e){return Ke==Ke?function Hr(Ee,Ke,$e){for(var At=$e-1,sn=Ee.length;++At<sn;)if(Ee[At]===Ke)return At;return-1}(Ee,Ke,$e):ri(Ee,nr,$e)}function jt(Ee,Ke,$e,At){for(var sn=$e-1,Sn=Ee.length;++sn<Sn;)if(At(Ee[sn],Ke))return sn;return-1}function nr(Ee){return Ee!=Ee}function Vi(Ee,Ke){var $e=null==Ee?0:Ee.length;return $e?Jr(Ee,Ke)/$e:NaN}function cr(Ee){return function(Ke){return null==Ke?v:Ke[Ee]}}function Bi(Ee){return function(Ke){return null==Ee?v:Ee[Ke]}}function Ca(Ee,Ke,$e,At,sn){return sn(Ee,function(Sn,mr,Xn){$e=At?(At=!1,Sn):Ke($e,Sn,mr,Xn)}),$e}function Jr(Ee,Ke){for(var $e,At=-1,sn=Ee.length;++At<sn;){var Sn=Ke(Ee[At]);Sn!==v&&($e=$e===v?Sn:$e+Sn)}return $e}function _n(Ee,Ke){for(var $e=-1,At=Array(Ee);++$e<Ee;)At[$e]=Ke($e);return At}function Rn(Ee){return Ee&&Ee.slice(0,br(Ee)+1).replace(ea,"")}function Dn(Ee){return function(Ke){return Ee(Ke)}}function bn(Ee,Ke){return tn(Ke,function($e){return Ee[$e]})}function ua(Ee,Ke){return Ee.has(Ke)}function hu(Ee,Ke){for(var $e=-1,At=Ee.length;++$e<At&&Fi(Ke,Ee[$e],0)>-1;);return $e}function pu(Ee,Ke){for(var $e=Ee.length;$e--&&Fi(Ke,Ee[$e],0)>-1;);return $e}function nl(Ee,Ke){for(var $e=Ee.length,At=0;$e--;)Ee[$e]===Ke&&++At;return At}var gu=Bi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),rl=Bi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function js(Ee){return"\\"+Q[Ee]}function ci(Ee){return ys.test(Ee)}function bs(Ee){var Ke=-1,$e=Array(Ee.size);return Ee.forEach(function(At,sn){$e[++Ke]=[sn,At]}),$e}function Gs(Ee,Ke){return function($e){return Ee(Ke($e))}}function Zn(Ee,Ke){for(var $e=-1,At=Ee.length,sn=0,Sn=[];++$e<At;){var mr=Ee[$e];(mr===Ke||mr===B)&&(Ee[$e]=B,Sn[sn++]=$e)}return Sn}function Ei(Ee){var Ke=-1,$e=Array(Ee.size);return Ee.forEach(function(At){$e[++Ke]=At}),$e}function Yn(Ee){return ci(Ee)?function rr(Ee){for(var Ke=Ri.lastIndex=0;Ri.test(Ee);)++Ke;return Ke}(Ee):an(Ee)}function Xt(Ee){return ci(Ee)?function Cs(Ee){return Ee.match(Ri)||[]}(Ee):function vr(Ee){return Ee.split("")}(Ee)}function br(Ee){for(var Ke=Ee.length;Ke--&&zr.test(Ee.charAt(Ke)););return Ke}var Qr=Bi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Qa=function Ee(Ke){var a,$e=(Ke=null==Ke?De:Qa.defaults(De.Object(),Ke,Qa.pick(De,Di))).Array,At=Ke.Date,sn=Ke.Error,Sn=Ke.Function,mr=Ke.Math,Xn=Ke.Object,Bo=Ke.RegExp,ro=Ke.String,Ur=Ke.TypeError,Za=$e.prototype,fe=Xn.prototype,Ce=Ke["__core-js_shared__"],Ze=Sn.prototype.toString,be=fe.hasOwnProperty,nt=0,st=(a=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",yt=fe.toString,Tt=Ze.call(Xn),vt=De._,Ut=Bo("^"+Ze.call(be).replace(lo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=d?Ke.Buffer:v,Kt=Ke.Symbol,jn=Ke.Uint8Array,zt=Nt?Nt.allocUnsafe:v,gr=Gs(Xn.getPrototypeOf,Xn),kr=Xn.create,fi=fe.propertyIsEnumerable,qn=Za.splice,wa=Kt?Kt.isConcatSpreadable:v,xo=Kt?Kt.iterator:v,Lr=Kt?Kt.toStringTag:v,yu=function(){try{var a=os(Xn,"defineProperty");return a({},"",{}),a}catch(u){}}(),vd=Ke.clearTimeout!==De.clearTimeout&&Ke.clearTimeout,md=At&&At.now!==De.Date.now&&At.now,yd=Ke.setTimeout!==De.setTimeout&&Ke.setTimeout,_o=mr.ceil,Us=mr.floor,xu=Xn.getOwnPropertySymbols,vc=Nt?Nt.isBuffer:v,ol=Ke.isFinite,xd=Za.join,_d=Gs(Xn.keys,Xn),$r=mr.max,di=mr.min,bd=At.now,Cd=Ke.parseInt,mc=mr.random,wd=Za.reverse,al=os(Ke,"DataView"),$s=os(Ke,"Map"),sl=os(Ke,"Promise"),qa=os(Ke,"Set"),Ws=os(Ke,"WeakMap"),Ys=os(Xn,"create"),Zr=Ws&&new Ws,ws={},ul=ss(al),Sd=ss($s),la=ss(sl),Xs=ss(qa),Td=ss(Ws),ll=Kt?Kt.prototype:v,_u=ll?ll.valueOf:v,yc=ll?ll.toString:v;function Z(a){if(Pr(a)&&!ln(a)&&!(a instanceof On)){if(a instanceof bo)return a;if(be.call(a,"__wrapped__"))return pf(a)}return new bo(a)}var Ks=function(){function a(){}return function(u){if(!ar(u))return{};if(kr)return kr(u);a.prototype=u;var h=new a;return a.prototype=v,h}}();function cl(){}function bo(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=v}function On(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$n,this.__views__=[]}function ca(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function fa(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function Co(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function ts(a){var u=-1,h=null==a?0:a.length;for(this.__data__=new Co;++u<h;)this.add(a[u])}function wo(a){var u=this.__data__=new fa(a);this.size=u.size}function dl(a,u){var h=ln(a),P=!h&&Yo(a),j=!h&&!P&&Fa(a),ee=!h&&!P&&!j&&Vs(a),de=h||P||j||ee,_e=de?_n(a.length,ro):[],Me=_e.length;for(var it in a)(u||be.call(a,it))&&(!de||!("length"==it||j&&("offset"==it||"parent"==it)||ee&&("buffer"==it||"byteLength"==it||"byteOffset"==it)||Po(it,Me)))&&_e.push(it);return _e}function hl(a){var u=a.length;return u?a[Ou(0,u-1)]:v}function Od(a,u){return Gu(Pi(a),ji(u,0,a.length))}function kd(a){return Gu(Pi(a))}function Tu(a,u,h){(h!==v&&!Mo(a[u],h)||h===v&&!(u in a))&&Ho(a,u,h)}function Ta(a,u,h){var P=a[u];(!be.call(a,u)||!Mo(P,h)||h===v&&!(u in a))&&Ho(a,u,h)}function Eu(a,u){for(var h=a.length;h--;)if(Mo(a[h][0],u))return h;return-1}function Ld(a,u,h,P){return Ea(a,function(j,ee,de){u(P,j,h(j),de)}),P}function Pu(a,u){return a&&jo(u,qr(u),a)}function Ho(a,u,h){"__proto__"==u&&yu?yu(a,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[u]=h}function Js(a,u){for(var h=-1,P=u.length,j=$e(P),ee=null==a;++h<P;)j[h]=ee?v:ic(a,u[h]);return j}function ji(a,u,h){return a==a&&(h!==v&&(a=a<=h?a:h),u!==v&&(a=a>=u?a:u)),a}function zi(a,u,h,P,j,ee){var de,_e=1&u,Me=2&u,it=4&u;if(h&&(de=j?h(a,P,j,ee):h(a)),de!==v)return de;if(!ar(a))return a;var ot=ln(a);if(ot){if(de=function rh(a){var u=a.length,h=new a.constructor(u);return u&&"string"==typeof a[0]&&be.call(a,"index")&&(h.index=a.index,h.input=a.input),h}(a),!_e)return Pi(a,de)}else{var ft=gi(a),Et=ft==hr||ft==ki;if(Fa(a))return jc(a,_e);if(ft==U||ft==We||Et&&!j){if(de=Me||Et?{}:af(a),!_e)return Me?function Xd(a,u){return jo(a,rf(a),u)}(a,function pl(a,u){return a&&jo(u,Ai(u),a)}(de,a)):function da(a,u){return jo(a,Fl(a),u)}(a,Pu(de,a))}else{if(!He[ft])return j?a:{};de=function sf(a,u,h){var P=a.constructor;switch(u){case mn:return Ll(a);case Ct:case kt:return new P(+a);case pr:return function zc(a,u){var h=u?Ll(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}(a,h);case or:case oi:case Un:case Ot:case Jn:case ur:case Mr:case ai:case Cr:return Fu(a,h);case vn:return new P;case un:case wt:return new P(a);case Qe:return function $d(a){var u=new a.constructor(a.source,$a.exec(a));return u.lastIndex=a.lastIndex,u}(a);case Xe:return new P;case Ft:return function Wd(a){return _u?Xn(_u.call(a)):{}}(a)}}(a,ft,_e)}}ee||(ee=new wo);var Bt=ee.get(a);if(Bt)return Bt;ee.set(a,de),Xo(a)?a.forEach(function(rn){de.add(zi(rn,u,h,rn,a,ee))}):Hf(a)&&a.forEach(function(rn,En){de.set(En,zi(rn,u,h,En,a,ee))});var Cn=ot?v:(it?Me?Ls:is:Me?Ai:qr)(a);return Fe(Cn||a,function(rn,En){Cn&&(rn=a[En=rn]),Ta(de,En,zi(rn,u,h,En,a,ee))}),de}function gl(a,u,h){var P=h.length;if(null==a)return!P;for(a=Xn(a);P--;){var j=h[P],de=a[j];if(de===v&&!(j in a)||!(0,u[j])(de))return!1}return!0}function bc(a,u,h){if("function"!=typeof a)throw new Ur(I);return ru(function(){a.apply(v,h)},u)}function ns(a,u,h,P){var j=-1,ee=Dt,de=!0,_e=a.length,Me=[],it=u.length;if(!_e)return Me;h&&(u=tn(u,Dn(h))),P?(ee=wr,de=!1):u.length>=200&&(ee=ua,de=!1,u=new ts(u));e:for(;++j<_e;){var ot=a[j],ft=null==h?ot:h(ot);if(ot=P||0!==ot?ot:0,de&&ft==ft){for(var Et=it;Et--;)if(u[Et]===ft)continue e;Me.push(ot)}else ee(u,ft,P)||Me.push(ot)}return Me}Z.templateSettings={escape:uo,evaluate:qo,interpolate:St,variable:"",imports:{_:Z}},(Z.prototype=cl.prototype).constructor=Z,(bo.prototype=Ks(cl.prototype)).constructor=bo,(On.prototype=Ks(cl.prototype)).constructor=On,ca.prototype.clear=function Gg(){this.__data__=Ys?Ys(null):{},this.size=0},ca.prototype.delete=function Ed(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},ca.prototype.get=function Pd(a){var u=this.__data__;if(Ys){var h=u[a];return h===A?v:h}return be.call(u,a)?u[a]:v},ca.prototype.has=function Id(a){var u=this.__data__;return Ys?u[a]!==v:be.call(u,a)},ca.prototype.set=function Ug(a,u){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=Ys&&u===v?A:u,this},fa.prototype.clear=function $g(){this.__data__=[],this.size=0},fa.prototype.delete=function Wg(a){var u=this.__data__,h=Eu(u,a);return!(h<0||(h==u.length-1?u.pop():qn.call(u,h,1),--this.size,0))},fa.prototype.get=function es(a){var u=this.__data__,h=Eu(u,a);return h<0?v:u[h][1]},fa.prototype.has=function Ss(a){return Eu(this.__data__,a)>-1},fa.prototype.set=function xc(a,u){var h=this.__data__,P=Eu(h,a);return P<0?(++this.size,h.push([a,u])):h[P][1]=u,this},Co.prototype.clear=function Sa(){this.size=0,this.__data__={hash:new ca,map:new($s||fa),string:new ca}},Co.prototype.delete=function Ts(a){var u=zu(this,a).delete(a);return this.size-=u?1:0,u},Co.prototype.get=function kn(a){return zu(this,a).get(a)},Co.prototype.has=function Ln(a){return zu(this,a).has(a)},Co.prototype.set=function bu(a,u){var h=zu(this,a),P=h.size;return h.set(a,u),this.size+=h.size==P?0:1,this},ts.prototype.add=ts.prototype.push=function Md(a){return this.__data__.set(a,A),this},ts.prototype.has=function Ad(a){return this.__data__.has(a)},wo.prototype.clear=function Cu(){this.__data__=new fa,this.size=0},wo.prototype.delete=function fl(a){var u=this.__data__,h=u.delete(a);return this.size=u.size,h},wo.prototype.get=function _i(a){return this.__data__.get(a)},wo.prototype.has=function wu(a){return this.__data__.has(a)},wo.prototype.set=function Su(a,u){var h=this.__data__;if(h instanceof fa){var P=h.__data__;if(!$s||P.length<199)return P.push([a,u]),this.size=++h.size,this;h=this.__data__=new Co(P)}return h.set(a,u),this.size=h.size,this};var Ea=$c(io),vl=$c(ml,!0);function Nd(a,u){var h=!0;return Ea(a,function(P,j,ee){return h=!!u(P,j,ee)}),h}function Iu(a,u,h){for(var P=-1,j=a.length;++P<j;){var ee=a[P],de=u(ee);if(null!=de&&(_e===v?de==de&&!Wi(de):h(de,_e)))var _e=de,Me=ee}return Me}function wc(a,u){var h=[];return Ea(a,function(P,j,ee){u(P,j,ee)&&h.push(P)}),h}function Nr(a,u,h,P,j){var ee=-1,de=a.length;for(h||(h=$i),j||(j=[]);++ee<de;){var _e=a[ee];u>0&&h(_e)?u>1?Nr(_e,u-1,h,P,j):Sr(j,_e):P||(j[j.length]=_e)}return j}var Es=Wc(),Ps=Wc(!0);function io(a,u){return a&&Es(a,u,qr)}function ml(a,u){return a&&Ps(a,u,qr)}function Qs(a,u){return Yt(u,function(h){return ga(a[h])})}function Pa(a,u){for(var h=0,P=(u=Aa(u,a)).length;null!=a&&h<P;)a=a[Uo(u[h++])];return h&&h==P?a:v}function Sc(a,u,h){var P=u(a);return ln(a)?P:Sr(P,h(a))}function bi(a){return null==a?a===v?"[object Undefined]":"[object Null]":Lr&&Lr in Xn(a)?function eh(a){var u=be.call(a,Lr),h=a[Lr];try{a[Lr]=v;var P=!0}catch(ee){}var j=yt.call(a);return P&&(u?a[Lr]=h:delete a[Lr]),j}(a):function lh(a){return yt.call(a)}(a)}function yl(a,u){return a>u}function xl(a,u){return null!=a&&be.call(a,u)}function Rd(a,u){return null!=a&&u in Xn(a)}function _l(a,u,h){for(var P=h?wr:Dt,j=a[0].length,ee=a.length,de=ee,_e=$e(ee),Me=1/0,it=[];de--;){var ot=a[de];de&&u&&(ot=tn(ot,Dn(u))),Me=di(ot.length,Me),_e[de]=!h&&(u||j>=120&&ot.length>=120)?new ts(de&&ot):v}ot=a[0];var ft=-1,Et=_e[0];e:for(;++ft<j&&it.length<Me;){var Bt=ot[ft],nn=u?u(Bt):Bt;if(Bt=h||0!==Bt?Bt:0,!(Et?ua(Et,nn):P(it,nn,h))){for(de=ee;--de;){var Cn=_e[de];if(!(Cn?ua(Cn,nn):P(a[de],nn,h)))continue e}Et&&Et.push(nn),it.push(Bt)}}return it}function Zs(a,u,h){var P=null==(a=ff(a,u=Aa(u,a)))?a:a[Uo(oo(u))];return null==P?v:je(P,a,h)}function bl(a){return Pr(a)&&bi(a)==We}function Ia(a,u,h,P,j){return a===u||(null==a||null==u||!Pr(a)&&!Pr(u)?a!=a&&u!=u:function Cl(a,u,h,P,j,ee){var de=ln(a),_e=ln(u),Me=de?qe:gi(a),it=_e?qe:gi(u),ot=(Me=Me==We?U:Me)==U,ft=(it=it==We?U:it)==U,Et=Me==it;if(Et&&Fa(a)){if(!Fa(u))return!1;de=!0,ot=!1}if(Et&&!ot)return ee||(ee=new wo),de||Vs(a)?ef(a,u,h,P,j,ee):function tf(a,u,h,P,j,ee,de){switch(h){case pr:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case mn:return!(a.byteLength!=u.byteLength||!ee(new jn(a),new jn(u)));case Ct:case kt:case un:return Mo(+a,+u);case Rt:return a.name==u.name&&a.message==u.message;case Qe:case wt:return a==u+"";case vn:var _e=bs;case Xe:if(_e||(_e=Ei),a.size!=u.size&&!(1&P))return!1;var it=de.get(a);if(it)return it==u;P|=2,de.set(a,u);var ot=ef(_e(a),_e(u),P,j,ee,de);return de.delete(a),ot;case Ft:if(_u)return _u.call(a)==_u.call(u)}return!1}(a,u,Me,h,P,j,ee);if(!(1&h)){var Bt=ot&&be.call(a,"__wrapped__"),nn=ft&&be.call(u,"__wrapped__");if(Bt||nn){var Cn=Bt?a.value():a,rn=nn?u.value():u;return ee||(ee=new wo),j(Cn,rn,h,P,ee)}}return!!Et&&(ee||(ee=new wo),function nf(a,u,h,P,j,ee){var de=1&h,_e=is(a),Me=_e.length;if(Me!=is(u).length&&!de)return!1;for(var ft=Me;ft--;){var Et=_e[ft];if(!(de?Et in u:be.call(u,Et)))return!1}var Bt=ee.get(a),nn=ee.get(u);if(Bt&&nn)return Bt==u&&nn==a;var Cn=!0;ee.set(a,u),ee.set(u,a);for(var rn=de;++ft<Me;){var En=a[Et=_e[ft]],Nn=u[Et];if(P)var Xi=de?P(Nn,En,Et,u,a,ee):P(En,Nn,Et,a,u,ee);if(!(Xi===v?En===Nn||j(En,Nn,h,P,ee):Xi)){Cn=!1;break}rn||(rn="constructor"==Et)}if(Cn&&!rn){var wi=a.constructor,Ki=u.constructor;wi!=Ki&&"constructor"in a&&"constructor"in u&&!("function"==typeof wi&&wi instanceof wi&&"function"==typeof Ki&&Ki instanceof Ki)&&(Cn=!1)}return ee.delete(a),ee.delete(u),Cn}(a,u,h,P,j,ee))}(a,u,h,P,Ia,j))}function wl(a,u,h,P){var j=h.length,ee=j,de=!P;if(null==a)return!ee;for(a=Xn(a);j--;){var _e=h[j];if(de&&_e[2]?_e[1]!==a[_e[0]]:!(_e[0]in a))return!1}for(;++j<ee;){var Me=(_e=h[j])[0],it=a[Me],ot=_e[1];if(de&&_e[2]){if(it===v&&!(Me in a))return!1}else{var ft=new wo;if(P)var Et=P(it,ot,Me,a,u,ft);if(!(Et===v?Ia(ot,it,3,P,ft):Et))return!1}}return!0}function Ec(a){return!(!ar(a)||function ih(a){return!!st&&st in a}(a))&&(ga(a)?Ut:ps).test(ss(a))}function Mc(a){return"function"==typeof a?a:null==a?Yi:"object"==typeof a?ln(a)?hi(a[0],a[1]):Gi(a):_g(a)}function Sl(a){if(!nu(a))return _d(a);var u=[];for(var h in Xn(a))be.call(a,h)&&"constructor"!=h&&u.push(h);return u}function Tl(a,u){return a<u}function Ac(a,u){var h=-1,P=Ci(a)?$e(a.length):[];return Ea(a,function(j,ee,de){P[++h]=u(j,ee,de)}),P}function Gi(a){var u=Dl(a);return 1==u.length&&u[0][2]?lf(u[0][0],u[0][1]):function(h){return h===a||wl(h,a,u)}}function hi(a,u){return yr(a)&&uf(u)?lf(Uo(a),u):function(h){var P=ic(h,a);return P===v&&P===u?oc(h,a):Ia(u,P,3)}}function Is(a,u,h,P,j){a!==u&&Es(u,function(ee,de){if(j||(j=new wo),ar(ee))!function jd(a,u,h,P,j,ee,de){var _e=Vl(a,h),Me=Vl(u,h),it=de.get(Me);if(it)Tu(a,h,it);else{var ot=ee?ee(_e,Me,h+"",a,u,de):v,ft=ot===v;if(ft){var Et=ln(Me),Bt=!Et&&Fa(Me),nn=!Et&&!Bt&&Vs(Me);ot=Me,Et||Bt||nn?ln(_e)?ot=_e:Dr(_e)?ot=Pi(_e):Bt?(ft=!1,ot=jc(Me,!0)):nn?(ft=!1,ot=Fu(Me,!0)):ot=[]:lu(Me)||Yo(Me)?(ot=_e,Yo(_e)?ot=$f(_e):(!ar(_e)||ga(_e))&&(ot=af(Me))):ft=!1}ft&&(de.set(Me,ot),j(ot,Me,P,ee,de),de.delete(Me)),Tu(a,h,ot)}}(a,u,de,h,Is,P,j);else{var _e=P?P(Vl(a,de),ee,de+"",a,u,j):v;_e===v&&(_e=ee),Tu(a,de,_e)}},Ai)}function Oc(a,u){var h=a.length;if(h)return Po(u+=u<0?h:0,h)?a[u]:v}function kc(a,u,h){u=u.length?tn(u,function(ee){return ln(ee)?function(de){return Pa(de,1===ee.length?ee[0]:ee)}:ee}):[Yi];var P=-1;return u=tn(u,Dn(Zt())),function Kr(Ee,Ke){var $e=Ee.length;for(Ee.sort(Ke);$e--;)Ee[$e]=Ee[$e].value;return Ee}(Ac(a,function(ee,de,_e){return{criteria:tn(u,function(it){return it(ee)}),index:++P,value:ee}}),function(ee,de){return function Yd(a,u,h){for(var P=-1,j=a.criteria,ee=u.criteria,de=j.length,_e=h.length;++P<de;){var Me=Vu(j[P],ee[P]);if(Me)return P>=_e?Me:Me*("desc"==h[P]?-1:1)}return a.index-u.index}(ee,de,h)})}function El(a,u,h){for(var P=-1,j=u.length,ee={};++P<j;){var de=u[P],_e=Pa(a,de);h(_e,de)&&Ms(ee,Aa(de,a),_e)}return ee}function Au(a,u,h,P){var j=P?jt:Fi,ee=-1,de=u.length,_e=a;for(a===u&&(u=Pi(u)),h&&(_e=tn(a,Dn(h)));++ee<de;)for(var Me=0,it=u[ee],ot=h?h(it):it;(Me=j(_e,ot,Me,P))>-1;)_e!==a&&qn.call(_e,Me,1),qn.call(a,Me,1);return a}function Pl(a,u){for(var h=a?u.length:0,P=h-1;h--;){var j=u[h];if(h==P||j!==ee){var ee=j;Po(j)?qn.call(a,j,1):Lu(a,j)}}return a}function Ou(a,u){return a+Us(mc()*(u-a+1))}function Il(a,u){var h="";if(!a||u<1||u>on)return h;do{u%2&&(h+=a),(u=Us(u/2))&&(a+=a)}while(u);return h}function wn(a,u){return Hl(cf(a,u,Yi),a+"")}function Gd(a){return hl(fs(a))}function Ml(a,u){var h=fs(a);return Gu(h,ji(u,0,h.length))}function Ms(a,u,h,P){if(!ar(a))return a;for(var j=-1,ee=(u=Aa(u,a)).length,de=ee-1,_e=a;null!=_e&&++j<ee;){var Me=Uo(u[j]),it=h;if("__proto__"===Me||"constructor"===Me||"prototype"===Me)return a;if(j!=de){var ot=_e[Me];(it=P?P(ot,Me,_e):v)===v&&(it=ar(ot)?ot:Po(u[j+1])?[]:{})}Ta(_e,Me,it),_e=_e[Me]}return a}var Rc=Zr?function(a,u){return Zr.set(a,u),a}:Yi,Ud=yu?function(a,u){return yu(a,"toString",{configurable:!0,enumerable:!1,value:qu(u),writable:!0})}:Yi;function fn(a){return Gu(fs(a))}function pi(a,u,h){var P=-1,j=a.length;u<0&&(u=-u>j?0:j+u),(h=h>j?j:h)<0&&(h+=j),j=u>h?0:h-u>>>0,u>>>=0;for(var ee=$e(j);++P<j;)ee[P]=a[P+u];return ee}function So(a,u){var h;return Ea(a,function(P,j,ee){return!(h=u(P,j,ee))}),!!h}function ku(a,u,h){var P=0,j=null==a?P:a.length;if("number"==typeof u&&u==u&&j<=2147483647){for(;P<j;){var ee=P+j>>>1,de=a[ee];null!==de&&!Wi(de)&&(h?de<=u:de<u)?P=ee+1:j=ee}return j}return Al(a,u,Yi,h)}function Al(a,u,h,P){var j=0,ee=null==a?0:a.length;if(0===ee)return 0;for(var de=(u=h(u))!=u,_e=null===u,Me=Wi(u),it=u===v;j<ee;){var ot=Us((j+ee)/2),ft=h(a[ot]),Et=ft!==v,Bt=null===ft,nn=ft==ft,Cn=Wi(ft);if(de)var rn=P||nn;else rn=it?nn&&(P||Et):_e?nn&&Et&&(P||!Bt):Me?nn&&Et&&!Bt&&(P||!Cn):!Bt&&!Cn&&(P?ft<=u:ft<u);rn?j=ot+1:ee=ot}return di(ee,4294967294)}function Ol(a,u){for(var h=-1,P=a.length,j=0,ee=[];++h<P;){var de=a[h],_e=u?u(de):de;if(!h||!Mo(_e,Me)){var Me=_e;ee[j++]=0===de?0:de}}return ee}function Dc(a){return"number"==typeof a?a:Wi(a)?NaN:+a}function Ui(a){if("string"==typeof a)return a;if(ln(a))return tn(a,Ui)+"";if(Wi(a))return yc?yc.call(a):"";var u=a+"";return"0"==u&&1/a==-gt?"-0":u}function Ma(a,u,h){var P=-1,j=Dt,ee=a.length,de=!0,_e=[],Me=_e;if(h)de=!1,j=wr;else if(ee>=200){var it=u?null:Zd(a);if(it)return Ei(it);de=!1,j=ua,Me=new ts}else Me=u?[]:_e;e:for(;++P<ee;){var ot=a[P],ft=u?u(ot):ot;if(ot=h||0!==ot?ot:0,de&&ft==ft){for(var Et=Me.length;Et--;)if(Me[Et]===ft)continue e;u&&Me.push(ft),_e.push(ot)}else j(Me,ft,h)||(Me!==_e&&Me.push(ft),_e.push(ot))}return _e}function Lu(a,u){return null==(a=ff(a,u=Aa(u,a)))||delete a[Uo(oo(u))]}function Fc(a,u,h,P){return Ms(a,u,h(Pa(a,u)),P)}function Nu(a,u,h,P){for(var j=a.length,ee=P?j:-1;(P?ee--:++ee<j)&&u(a[ee],ee,a););return h?pi(a,P?0:ee,P?ee+1:j):pi(a,P?ee+1:0,P?j:ee)}function Vc(a,u){var h=a;return h instanceof On&&(h=h.value()),Hn(u,function(P,j){return j.func.apply(j.thisArg,Sr([P],j.args))},h)}function kl(a,u,h){var P=a.length;if(P<2)return P?Ma(a[0]):[];for(var j=-1,ee=$e(P);++j<P;)for(var de=a[j],_e=-1;++_e<P;)_e!=j&&(ee[j]=ns(ee[j]||de,a[_e],u,h));return Ma(Nr(ee,1),u,h)}function Bc(a,u,h){for(var P=-1,j=a.length,ee=u.length,de={};++P<j;)h(de,a[P],P<ee?u[P]:v);return de}function rs(a){return Dr(a)?a:[]}function Ru(a){return"function"==typeof a?a:Yi}function Aa(a,u){return ln(a)?a:yr(a,u)?[a]:hf(Kn(a))}var Hc=wn;function To(a,u,h){var P=a.length;return h=h===v?P:h,!u&&h>=P?a:pi(a,u,h)}var Du=vd||function(a){return De.clearTimeout(a)};function jc(a,u){if(u)return a.slice();var h=a.length,P=zt?zt(h):new a.constructor(h);return a.copy(P),P}function Ll(a){var u=new a.constructor(a.byteLength);return new jn(u).set(new jn(a)),u}function Fu(a,u){var h=u?Ll(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function Vu(a,u){if(a!==u){var h=a!==v,P=null===a,j=a==a,ee=Wi(a),de=u!==v,_e=null===u,Me=u==u,it=Wi(u);if(!_e&&!it&&!ee&&a>u||ee&&de&&Me&&!_e&&!it||P&&de&&Me||!h&&Me||!j)return 1;if(!P&&!ee&&!it&&a<u||it&&h&&j&&!P&&!ee||_e&&h&&j||!de&&j||!Me)return-1}return 0}function Gc(a,u,h,P){for(var j=-1,ee=a.length,de=h.length,_e=-1,Me=u.length,it=$r(ee-de,0),ot=$e(Me+it),ft=!P;++_e<Me;)ot[_e]=u[_e];for(;++j<de;)(ft||j<ee)&&(ot[h[j]]=a[j]);for(;it--;)ot[_e++]=a[j++];return ot}function Uc(a,u,h,P){for(var j=-1,ee=a.length,de=-1,_e=h.length,Me=-1,it=u.length,ot=$r(ee-_e,0),ft=$e(ot+it),Et=!P;++j<ot;)ft[j]=a[j];for(var Bt=j;++Me<it;)ft[Bt+Me]=u[Me];for(;++de<_e;)(Et||j<ee)&&(ft[Bt+h[de]]=a[j++]);return ft}function Pi(a,u){var h=-1,P=a.length;for(u||(u=$e(P));++h<P;)u[h]=a[h];return u}function jo(a,u,h,P){var j=!h;h||(h={});for(var ee=-1,de=u.length;++ee<de;){var _e=u[ee],Me=P?P(h[_e],a[_e],_e,h,a):v;Me===v&&(Me=a[_e]),j?Ho(h,_e,Me):Ta(h,_e,Me)}return h}function Bu(a,u){return function(h,P){var j=ln(h)?lt:Ld,ee=u?u():{};return j(h,a,Zt(P,2),ee)}}function As(a){return wn(function(u,h){var P=-1,j=h.length,ee=j>1?h[j-1]:v,de=j>2?h[2]:v;for(ee=a.length>3&&"function"==typeof ee?(j--,ee):v,de&&Rr(h[0],h[1],de)&&(ee=j<3?v:ee,j=1),u=Xn(u);++P<j;){var _e=h[P];_e&&a(u,_e,P,ee)}return u})}function $c(a,u){return function(h,P){if(null==h)return h;if(!Ci(h))return a(h,P);for(var j=h.length,ee=u?j:-1,de=Xn(h);(u?ee--:++ee<j)&&!1!==P(de[ee],ee,de););return h}}function Wc(a){return function(u,h,P){for(var j=-1,ee=Xn(u),de=P(u),_e=de.length;_e--;){var Me=de[a?_e:++j];if(!1===h(ee[Me],Me,ee))break}return u}}function Yc(a){return function(u){var h=ci(u=Kn(u))?Xt(u):v,P=h?h[0]:u.charAt(0),j=h?To(h,1).join(""):u.slice(1);return P[a]()+j}}function Os(a){return function(u){return Hn(ad(nd(u).replace(Ja,"")),a,"")}}function qs(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=Ks(a.prototype),P=a.apply(h,u);return ar(P)?P:h}}function Xc(a){return function(u,h,P){var j=Xn(u);if(!Ci(u)){var ee=Zt(h,3);u=qr(u),h=function(_e){return ee(j[_e],_e,j)}}var de=a(u,h,P);return de>-1?j[ee?u[de]:de]:v}}function Kc(a){return Tr(function(u){var h=u.length,P=h,j=bo.prototype.thru;for(a&&u.reverse();P--;){var ee=u[P];if("function"!=typeof ee)throw new Ur(I);if(j&&!de&&"wrapper"==zo(ee))var de=new bo([],!0)}for(P=de?P:h;++P<h;){var _e=zo(ee=u[P]),Me="wrapper"==_e?Ns(ee):v;de=Me&&Ii(Me[0])&&424==Me[1]&&!Me[4].length&&1==Me[9]?de[zo(Me[0])].apply(de,Me[3]):1==ee.length&&Ii(ee)?de[_e]():de.thru(ee)}return function(){var it=arguments,ot=it[0];if(de&&1==it.length&&ln(ot))return de.plant(ot).value();for(var ft=0,Et=h?u[ft].apply(this,it):ot;++ft<h;)Et=u[ft].call(this,Et);return Et}})}function Hu(a,u,h,P,j,ee,de,_e,Me,it){var ot=u&b,ft=1&u,Et=2&u,Bt=24&u,nn=512&u,Cn=Et?v:qs(a);return function rn(){for(var En=arguments.length,Nn=$e(En),Xi=En;Xi--;)Nn[Xi]=arguments[Xi];if(Bt)var wi=Go(rn),Ki=nl(Nn,wi);if(P&&(Nn=Gc(Nn,P,j,Bt)),ee&&(Nn=Uc(Nn,ee,de,Bt)),En-=Ki,Bt&&En<it){var Fr=Zn(Nn,wi);return Nl(a,u,Hu,rn.placeholder,h,Nn,Fr,_e,Me,it-En)}var Ao=ft?h:this,Jo=Et?Ao[a]:a;return En=Nn.length,_e?Nn=ch(Nn,_e):nn&&En>1&&Nn.reverse(),ot&&Me<En&&(Nn.length=Me),this&&this!==De&&this instanceof rn&&(Jo=Cn||qs(Jo)),Jo.apply(Ao,Nn)}}function Jc(a,u){return function(h,P){return function Tc(a,u,h,P){return io(a,function(j,ee,de){u(P,h(j),ee,de)}),P}(h,a,u(P),{})}}function ju(a,u){return function(h,P){var j;if(h===v&&P===v)return u;if(h!==v&&(j=h),P!==v){if(j===v)return P;"string"==typeof h||"string"==typeof P?(h=Ui(h),P=Ui(P)):(h=Dc(h),P=Dc(P)),j=a(h,P)}return j}}function Oa(a){return Tr(function(u){return u=tn(u,Dn(Zt())),wn(function(h){var P=this;return a(u,function(j){return je(j,P,h)})})})}function eu(a,u){var h=(u=u===v?" ":Ui(u)).length;if(h<2)return h?Il(u,a):u;var P=Il(u,_o(a/Yn(u)));return ci(u)?To(Xt(P),0,a).join(""):P.slice(0,a)}function tu(a){return function(u,h,P){return P&&"number"!=typeof P&&Rr(u,h,P)&&(h=P=v),u=Ko(u),h===v?(h=u,u=0):h=Ko(h),function Nc(a,u,h,P){for(var j=-1,ee=$r(_o((u-a)/(h||1)),0),de=$e(ee);ee--;)de[P?ee:++j]=a,a+=h;return de}(u,h,P=P===v?u<h?1:-1:Ko(P),a)}}function ks(a){return function(u,h){return"string"==typeof u&&"string"==typeof h||(u=so(u),h=so(h)),a(u,h)}}function Nl(a,u,h,P,j,ee,de,_e,Me,it){var ot=8&u;u|=ot?32:64,4&(u&=~(ot?64:32))||(u&=-4);var Cn=[a,u,j,ot?ee:v,ot?de:v,ot?v:ee,ot?v:de,_e,Me,it],rn=h.apply(v,Cn);return Ii(a)&&Bl(rn,Cn),rn.placeholder=P,jl(rn,a,u)}function Rl(a){var u=mr[a];return function(h,P){if(h=so(h),(P=null==P?0:di(dn(P),292))&&ol(h)){var j=(Kn(h)+"e").split("e");return+((j=(Kn(u(j[0]+"e"+(+j[1]+P)))+"e").split("e"))[0]+"e"+(+j[1]-P))}return u(h)}}var Zd=qa&&1/Ei(new qa([,-0]))[1]==gt?function(a){return new qa(a)}:cd;function Qc(a){return function(u){var h=gi(u);return h==vn?bs(u):h==Xe?function vu(Ee){var Ke=-1,$e=Array(Ee.size);return Ee.forEach(function(At){$e[++Ke]=[At,At]}),$e}(u):function Hi(Ee,Ke){return tn(Ke,function($e){return[$e,Ee[$e]]})}(u,a(u))}}function Eo(a,u,h,P,j,ee,de,_e){var Me=2&u;if(!Me&&"function"!=typeof a)throw new Ur(I);var it=P?P.length:0;if(it||(u&=-97,P=j=v),de=de===v?de:$r(dn(de),0),_e=_e===v?_e:dn(_e),it-=j?j.length:0,64&u){var ot=P,ft=j;P=j=v}var Et=Me?v:Ns(a),Bt=[a,u,h,P,j,ot,ft,ee,de,_e];if(Et&&function sh(a,u){var h=a[1],P=u[1],j=h|P;if(!(j<131||(P==b&&8==h||P==b&&256==h&&a[7].length<=u[8]||384==P&&u[7].length<=u[8]&&8==h)))return a;1&P&&(a[2]=u[2],j|=1&h?0:4);var _e=u[3];if(_e){var Me=a[3];a[3]=Me?Gc(Me,_e,u[4]):_e,a[4]=Me?Zn(a[3],B):u[4]}(_e=u[5])&&(a[5]=(Me=a[5])?Uc(Me,_e,u[6]):_e,a[6]=Me?Zn(a[5],B):u[6]),(_e=u[7])&&(a[7]=_e),P&b&&(a[8]=null==a[8]?u[8]:di(a[8],u[8])),null==a[9]&&(a[9]=u[9]),a[0]=u[0],a[1]=j}(Bt,Et),a=Bt[0],u=Bt[1],h=Bt[2],P=Bt[3],j=Bt[4],!(_e=Bt[9]=Bt[9]===v?Me?0:a.length:$r(Bt[9]-it,0))&&24&u&&(u&=-25),u&&1!=u)nn=8==u||16==u?function Jd(a,u,h){var P=qs(a);return function j(){for(var ee=arguments.length,de=$e(ee),_e=ee,Me=Go(j);_e--;)de[_e]=arguments[_e];var it=ee<3&&de[0]!==Me&&de[ee-1]!==Me?[]:Zn(de,Me);return(ee-=it.length)<h?Nl(a,u,Hu,j.placeholder,v,de,it,v,v,h-ee):je(this&&this!==De&&this instanceof j?P:a,this,de)}}(a,u,_e):32!=u&&33!=u||j.length?Hu.apply(v,Bt):function Qd(a,u,h,P){var j=1&u,ee=qs(a);return function de(){for(var _e=-1,Me=arguments.length,it=-1,ot=P.length,ft=$e(ot+Me),Et=this&&this!==De&&this instanceof de?ee:a;++it<ot;)ft[it]=P[it];for(;Me--;)ft[it++]=arguments[++_e];return je(Et,j?h:this,ft)}}(a,u,h,P);else var nn=function Kd(a,u,h){var P=1&u,j=qs(a);return function ee(){return(this&&this!==De&&this instanceof ee?j:a).apply(P?h:this,arguments)}}(a,u,h);return jl((Et?Rc:Bl)(nn,Bt),a,u)}function Zc(a,u,h,P){return a===v||Mo(a,fe[h])&&!be.call(P,h)?u:a}function qc(a,u,h,P,j,ee){return ar(a)&&ar(u)&&(ee.set(u,a),Is(a,u,v,qc,ee),ee.delete(u)),a}function qd(a){return lu(a)?v:a}function ef(a,u,h,P,j,ee){var de=1&h,_e=a.length,Me=u.length;if(_e!=Me&&!(de&&Me>_e))return!1;var it=ee.get(a),ot=ee.get(u);if(it&&ot)return it==u&&ot==a;var ft=-1,Et=!0,Bt=2&h?new ts:v;for(ee.set(a,u),ee.set(u,a);++ft<_e;){var nn=a[ft],Cn=u[ft];if(P)var rn=de?P(Cn,nn,ft,u,a,ee):P(nn,Cn,ft,a,u,ee);if(rn!==v){if(rn)continue;Et=!1;break}if(Bt){if(!ni(u,function(En,Nn){if(!ua(Bt,Nn)&&(nn===En||j(nn,En,h,P,ee)))return Bt.push(Nn)})){Et=!1;break}}else if(nn!==Cn&&!j(nn,Cn,h,P,ee)){Et=!1;break}}return ee.delete(a),ee.delete(u),Et}function Tr(a){return Hl(cf(a,v,yf),a+"")}function is(a){return Sc(a,qr,Fl)}function Ls(a){return Sc(a,Ai,rf)}var Ns=Zr?function(a){return Zr.get(a)}:cd;function zo(a){for(var u=a.name+"",h=ws[u],P=be.call(ws,u)?h.length:0;P--;){var j=h[P],ee=j.func;if(null==ee||ee==a)return j.name}return u}function Go(a){return(be.call(Z,"placeholder")?Z:a).placeholder}function Zt(){var a=Z.iteratee||fc;return a=a===fc?Mc:a,arguments.length?a(arguments[0],arguments[1]):a}function zu(a,u){var h=a.__data__;return function Er(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?h["string"==typeof u?"string":"hash"]:h.map}function Dl(a){for(var u=qr(a),h=u.length;h--;){var P=u[h],j=a[P];u[h]=[P,j,uf(j)]}return u}function os(a,u){var h=function zs(Ee,Ke){return null==Ee?v:Ee[Ke]}(a,u);return Ec(h)?h:v}var Fl=xu?function(a){return null==a?[]:(a=Xn(a),Yt(xu(a),function(u){return fi.call(a,u)}))}:fd,rf=xu?function(a){for(var u=[];a;)Sr(u,Fl(a)),a=gr(a);return u}:fd,gi=bi;function of(a,u,h){for(var P=-1,j=(u=Aa(u,a)).length,ee=!1;++P<j;){var de=Uo(u[P]);if(!(ee=null!=a&&h(a,de)))break;a=a[de]}return ee||++P!=j?ee:!!(j=null==a?0:a.length)&&Fs(j)&&Po(de,j)&&(ln(a)||Yo(a))}function af(a){return"function"!=typeof a.constructor||nu(a)?{}:Ks(gr(a))}function $i(a){return ln(a)||Yo(a)||!!(wa&&a&&a[wa])}function Po(a,u){var h=typeof a;return!!(u=null==u?on:u)&&("number"==h||"symbol"!=h&&ta.test(a))&&a>-1&&a%1==0&&a<u}function Rr(a,u,h){if(!ar(h))return!1;var P=typeof u;return!!("number"==P?Ci(h)&&Po(u,h.length):"string"==P&&u in h)&&Mo(h[u],a)}function yr(a,u){if(ln(a))return!1;var h=typeof a;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=a&&!Wi(a))||ko.test(a)||!si.test(a)||null!=u&&a in Xn(u)}function Ii(a){var u=zo(a),h=Z[u];if("function"!=typeof h||!(u in On.prototype))return!1;if(a===h)return!0;var P=Ns(h);return!!P&&a===P[0]}(al&&gi(new al(new ArrayBuffer(1)))!=pr||$s&&gi(new $s)!=vn||sl&&gi(sl.resolve())!=re||qa&&gi(new qa)!=Xe||Ws&&gi(new Ws)!=xn)&&(gi=function(a){var u=bi(a),h=u==U?a.constructor:v,P=h?ss(h):"";if(P)switch(P){case ul:return pr;case Sd:return vn;case la:return re;case Xs:return Xe;case Td:return xn}return u});var oh=Ce?ga:dd;function nu(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||fe)}function uf(a){return a==a&&!ar(a)}function lf(a,u){return function(h){return null!=h&&h[a]===u&&(u!==v||a in Xn(h))}}function cf(a,u,h){return u=$r(u===v?a.length-1:u,0),function(){for(var P=arguments,j=-1,ee=$r(P.length-u,0),de=$e(ee);++j<ee;)de[j]=P[u+j];j=-1;for(var _e=$e(u+1);++j<u;)_e[j]=P[j];return _e[u]=h(de),je(a,this,_e)}}function ff(a,u){return u.length<2?a:Pa(a,pi(u,0,-1))}function ch(a,u){for(var h=a.length,P=di(u.length,h),j=Pi(a);P--;){var ee=u[P];a[P]=Po(ee,h)?j[ee]:v}return a}function Vl(a,u){if(("constructor"!==u||"function"!=typeof a[u])&&"__proto__"!=u)return a[u]}var Bl=df(Rc),ru=yd||function(a,u){return De.setTimeout(a,u)},Hl=df(Ud);function jl(a,u,h){var P=u+"";return Hl(a,function as(a,u){var h=u.length;if(!h)return a;var P=h-1;return u[P]=(h>1?"& ":"")+u[P],u=u.join(h>2?", ":" "),a.replace(za,"{\n/* [wrapped with "+u+"] */\n")}(P,function fh(a,u){return Fe(Gn,function(h){var P="_."+h[0];u&h[1]&&!Dt(a,P)&&a.push(P)}),a.sort()}(function nh(a){var u=a.match(Ga);return u?u[1].split(Yr):[]}(P),h)))}function df(a){var u=0,h=0;return function(){var P=bd(),j=16-(P-h);if(h=P,j>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(v,arguments)}}function Gu(a,u){var h=-1,P=a.length,j=P-1;for(u=u===v?P:u;++h<u;){var ee=Ou(h,j),de=a[ee];a[ee]=a[h],a[h]=de}return a.length=u,a}var hf=function ah(a){var u=Ku(a,function(P){return 500===h.size&&h.clear(),P}),h=u.cache;return u}(function(a){var u=[];return 46===a.charCodeAt(0)&&u.push(""),a.replace(Lo,function(h,P,j,ee){u.push(j?ee.replace(Ua,"$1"):P||h)}),u});function Uo(a){if("string"==typeof a||Wi(a))return a;var u=a+"";return"0"==u&&1/a==-gt?"-0":u}function ss(a){if(null!=a){try{return Ze.call(a)}catch(u){}try{return a+""}catch(u){}}return""}function pf(a){if(a instanceof On)return a.clone();var u=new bo(a.__wrapped__,a.__chain__);return u.__actions__=Pi(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}var ka=wn(function(a,u){return Dr(a)?ns(a,Nr(u,1,Dr,!0)):[]}),gh=wn(function(a,u){var h=oo(u);return Dr(h)&&(h=v),Dr(a)?ns(a,Nr(u,1,Dr,!0),Zt(h,2)):[]}),gf=wn(function(a,u){var h=oo(u);return Dr(h)&&(h=v),Dr(a)?ns(a,Nr(u,1,Dr,!0),v,h):[]});function vf(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:dn(h);return j<0&&(j=$r(P+j,0)),ri(a,Zt(u,3),j)}function mf(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=P-1;return h!==v&&(j=dn(h),j=h<0?$r(P+j,0):di(j,P-1)),ri(a,Zt(u,3),j,!0)}function yf(a){return null!=a&&a.length?Nr(a,1):[]}function _f(a){return a&&a.length?a[0]:v}var wh=wn(function(a){var u=tn(a,rs);return u.length&&u[0]===a[0]?_l(u):[]}),Sh=wn(function(a){var u=oo(a),h=tn(a,rs);return u===oo(h)?u=v:h.pop(),h.length&&h[0]===a[0]?_l(h,Zt(u,2)):[]}),Th=wn(function(a){var u=oo(a),h=tn(a,rs);return(u="function"==typeof u?u:v)&&h.pop(),h.length&&h[0]===a[0]?_l(h,v,u):[]});function oo(a){var u=null==a?0:a.length;return u?a[u-1]:v}var Mh=wn(bf);function bf(a,u){return a&&a.length&&u&&u.length?Au(a,u):a}var Cf=Tr(function(a,u){var h=null==a?0:a.length,P=Js(a,u);return Pl(a,tn(u,function(j){return Po(j,h)?+j:j}).sort(Vu)),P});function Gl(a){return null==a?a:wd.call(a)}var Wh=wn(function(a){return Ma(Nr(a,1,Dr,!0))}),Yh=wn(function(a){var u=oo(a);return Dr(u)&&(u=v),Ma(Nr(a,1,Dr,!0),Zt(u,2))}),Xh=wn(function(a){var u=oo(a);return u="function"==typeof u?u:v,Ma(Nr(a,1,Dr,!0),v,u)});function Ul(a){if(!a||!a.length)return[];var u=0;return a=Yt(a,function(h){if(Dr(h))return u=$r(h.length,u),!0}),_n(u,function(h){return tn(a,cr(h))})}function Sf(a,u){if(!a||!a.length)return[];var h=Ul(a);return null==u?h:tn(h,function(P){return je(u,v,P)})}var Zh=wn(function(a,u){return Dr(a)?ns(a,u):[]}),qh=wn(function(a){return kl(Yt(a,Dr))}),ep=wn(function(a){var u=oo(a);return Dr(u)&&(u=v),kl(Yt(a,Dr),Zt(u,2))}),tp=wn(function(a){var u=oo(a);return u="function"==typeof u?u:v,kl(Yt(a,Dr),v,u)}),ht=wn(Ul),Wl=wn(function(a){var u=a.length,h=u>1?a[u-1]:v;return h="function"==typeof h?(a.pop(),h):v,Sf(a,h)});function Ve(a){var u=Z(a);return u.__chain__=!0,u}function Mi(a,u){return u(a)}var ii=Tr(function(a){var u=a.length,h=u?a[0]:0,P=this.__wrapped__,j=function(ee){return Js(ee,a)};return!(u>1||this.__actions__.length)&&P instanceof On&&Po(h)?((P=P.slice(h,+h+(u?1:0))).__actions__.push({func:Mi,args:[j],thisArg:v}),new bo(P,this.__chain__).thru(function(ee){return u&&!ee.length&&ee.push(v),ee})):this.thru(j)}),Xl=Bu(function(a,u,h){be.call(a,h)?++a[h]:Ho(a,h,1)}),us=Xc(vf),fr=Xc(mf);function ou(a,u){return(ln(a)?Fe:Ea)(a,Zt(u,3))}function Pf(a,u){return(ln(a)?et:vl)(a,Zt(u,3))}var rp=Bu(function(a,u,h){be.call(a,h)?a[h].push(u):Ho(a,h,[u])}),Yg=wn(function(a,u,h){var P=-1,j="function"==typeof u,ee=Ci(a)?$e(a.length):[];return Ea(a,function(de){ee[++P]=j?je(u,de,h):Zs(de,u,h)}),ee}),$u=Bu(function(a,u,h){Ho(a,h,u)});function au(a,u){return(ln(a)?tn:Ac)(a,Zt(u,3))}var ip=Bu(function(a,u,h){a[h?0:1].push(u)},function(){return[[],[]]}),Wo=wn(function(a,u){if(null==a)return[];var h=u.length;return h>1&&Rr(a,u[0],u[1])?u=[]:h>2&&Rr(u[0],u[1],u[2])&&(u=[u[0]]),kc(a,Nr(u,1),[])}),pa=md||function(){return De.Date.now()};function ls(a,u,h){return u=h?v:u,Eo(a,b,v,v,v,v,u=a&&null==u?a.length:u)}function uu(a,u){var h;if("function"!=typeof u)throw new Ur(I);return a=dn(a),function(){return--a>0&&(h=u.apply(this,arguments)),a<=1&&(u=v),h}}var Ds=wn(function(a,u,h){var P=1;if(h.length){var j=Zn(h,Go(Ds));P|=32}return Eo(a,P,u,h,j)}),Af=wn(function(a,u,h){var P=3;if(h.length){var j=Zn(h,Go(Af));P|=32}return Eo(u,P,a,h,j)});function Xu(a,u,h){var P,j,ee,de,_e,Me,it=0,ot=!1,ft=!1,Et=!0;if("function"!=typeof a)throw new Ur(I);function Bt(Fr){var Ao=P,Jo=j;return P=j=v,it=Fr,de=a.apply(Jo,Ao)}function nn(Fr){return it=Fr,_e=ru(En,u),ot?Bt(Fr):de}function rn(Fr){var Ao=Fr-Me;return Me===v||Ao>=u||Ao<0||ft&&Fr-it>=ee}function En(){var Fr=pa();if(rn(Fr))return Nn(Fr);_e=ru(En,function Cn(Fr){var gd=u-(Fr-Me);return ft?di(gd,ee-(Fr-it)):gd}(Fr))}function Nn(Fr){return _e=v,Et&&P?Bt(Fr):(P=j=v,de)}function Ki(){var Fr=pa(),Ao=rn(Fr);if(P=arguments,j=this,Me=Fr,Ao){if(_e===v)return nn(Me);if(ft)return Du(_e),_e=ru(En,u),Bt(Me)}return _e===v&&(_e=ru(En,u)),de}return u=so(u)||0,ar(h)&&(ot=!!h.leading,ee=(ft="maxWait"in h)?$r(so(h.maxWait)||0,u):ee,Et="trailing"in h?!!h.trailing:Et),Ki.cancel=function Xi(){_e!==v&&Du(_e),it=0,P=Me=j=_e=v},Ki.flush=function wi(){return _e===v?de:Nn(pa())},Ki}var ap=wn(function(a,u){return bc(a,1,u)}),sp=wn(function(a,u,h){return bc(a,so(u)||0,h)});function Ku(a,u){if("function"!=typeof a||null!=u&&"function"!=typeof u)throw new Ur(I);var h=function(){var P=arguments,j=u?u.apply(this,P):P[0],ee=h.cache;if(ee.has(j))return ee.get(j);var de=a.apply(this,P);return h.cache=ee.set(j,de)||ee,de};return h.cache=new(Ku.Cache||Co),h}function Ju(a){if("function"!=typeof a)throw new Ur(I);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}Ku.Cache=Co;var cp=Hc(function(a,u){var h=(u=1==u.length&&ln(u[0])?tn(u[0],Dn(Zt())):tn(Nr(u,1),Dn(Zt()))).length;return wn(function(P){for(var j=-1,ee=di(P.length,h);++j<ee;)P[j]=u[j].call(this,P[j]);return je(a,this,P)})}),Ql=wn(function(a,u){var h=Zn(u,Go(Ql));return Eo(a,32,v,u,h)}),Lf=wn(function(a,u){var h=Zn(u,Go(Lf));return Eo(a,64,v,u,h)}),fp=Tr(function(a,u){return Eo(a,256,v,v,v,u)});function Mo(a,u){return a===u||a!=a&&u!=u}var _p=ks(yl),Zl=ks(function(a,u){return a>=u}),Yo=bl(function(){return arguments}())?bl:function(a){return Pr(a)&&be.call(a,"callee")&&!fi.call(a,"callee")},ln=$e.isArray,Ff=F?Dn(F):function Fd(a){return Pr(a)&&bi(a)==mn};function Ci(a){return null!=a&&Fs(a.length)&&!ga(a)}function Dr(a){return Pr(a)&&Ci(a)}var Fa=vc||dd,Cp=H?Dn(H):function Mu(a){return Pr(a)&&bi(a)==kt};function ql(a){if(!Pr(a))return!1;var u=bi(a);return u==Rt||"[object DOMException]"==u||"string"==typeof a.message&&"string"==typeof a.name&&!lu(a)}function ga(a){if(!ar(a))return!1;var u=bi(a);return u==hr||u==ki||"[object AsyncFunction]"==u||"[object Proxy]"==u}function Bf(a){return"number"==typeof a&&a==dn(a)}function Fs(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=on}function ar(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function Pr(a){return null!=a&&"object"==typeof a}var Hf=X?Dn(X):function Vd(a){return Pr(a)&&gi(a)==vn};function Gf(a){return"number"==typeof a||Pr(a)&&bi(a)==un}function lu(a){if(!Pr(a)||bi(a)!=U)return!1;var u=gr(a);if(null===u)return!0;var h=be.call(u,"constructor")&&u.constructor;return"function"==typeof h&&h instanceof h&&Ze.call(h)==Tt}var ec=he?Dn(he):function Pc(a){return Pr(a)&&bi(a)==Qe},Xo=ce?Dn(ce):function Bd(a){return Pr(a)&&gi(a)==Xe};function Qu(a){return"string"==typeof a||!ln(a)&&Pr(a)&&bi(a)==wt}function Wi(a){return"symbol"==typeof a||Pr(a)&&bi(a)==Ft}var Vs=Oe?Dn(Oe):function Ic(a){return Pr(a)&&Fs(a.length)&&!!Qn[bi(a)]},Np=ks(Tl),Rp=ks(function(a,u){return a<=u});function cu(a){if(!a)return[];if(Ci(a))return Qu(a)?Xt(a):Pi(a);if(xo&&a[xo])return function to(Ee){for(var Ke,$e=[];!(Ke=Ee.next()).done;)$e.push(Ke.value);return $e}(a[xo]());var u=gi(a);return(u==vn?bs:u==Xe?Ei:fs)(a)}function Ko(a){return a?(a=so(a))===gt||a===-gt?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function dn(a){var u=Ko(a),h=u%1;return u==u?h?u-h:u:0}function Uf(a){return a?ji(dn(a),0,$n):0}function so(a){if("number"==typeof a)return a;if(Wi(a))return NaN;if(ar(a)){var u="function"==typeof a.valueOf?a.valueOf():a;a=ar(u)?u+"":u}if("string"!=typeof a)return 0===a?a:+a;a=Rn(a);var h=Wa.test(a);return h||An.test(a)?ge(a.slice(2),h?2:8):ma.test(a)?NaN:+a}function $f(a){return jo(a,Ai(a))}function Kn(a){return null==a?"":Ui(a)}var Xg=As(function(a,u){if(nu(u)||Ci(u))jo(u,qr(u),a);else for(var h in u)be.call(u,h)&&Ta(a,h,u[h])}),tc=As(function(a,u){jo(u,Ai(u),a)}),cs=As(function(a,u,h,P){jo(u,Ai(u),a,P)}),Kg=As(function(a,u,h,P){jo(u,qr(u),a,P)}),nc=Tr(Js),Fp=wn(function(a,u){a=Xn(a);var h=-1,P=u.length,j=P>2?u[2]:v;for(j&&Rr(u[0],u[1],j)&&(P=1);++h<P;)for(var ee=u[h],de=Ai(ee),_e=-1,Me=de.length;++_e<Me;){var it=de[_e],ot=a[it];(ot===v||Mo(ot,fe[it])&&!be.call(a,it))&&(a[it]=ee[it])}return a}),Vp=wn(function(a){return a.push(v,qc),je(Kf,v,a)});function ic(a,u,h){var P=null==a?v:Pa(a,u);return P===v?h:P}function oc(a,u){return null!=a&&of(a,u,Rd)}var fu=Jc(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=yt.call(u)),a[u]=h},qu(Yi)),ac=Jc(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=yt.call(u)),be.call(a,u)?a[u].push(h):a[u]=[h]},Zt),Up=wn(Zs);function qr(a){return Ci(a)?dl(a):Sl(a)}function Ai(a){return Ci(a)?dl(a,!0):function Hd(a){if(!ar(a))return function uh(a){var u=[];if(null!=a)for(var h in Xn(a))u.push(h);return u}(a);var u=nu(a),h=[];for(var P in a)"constructor"==P&&(u||!be.call(a,P))||h.push(P);return h}(a)}var sc=As(function(a,u,h){Is(a,u,h)}),Kf=As(function(a,u,h,P){Is(a,u,h,P)}),Yp=Tr(function(a,u){var h={};if(null==a)return h;var P=!1;u=tn(u,function(ee){return ee=Aa(ee,a),P||(P=ee.length>1),ee}),jo(a,Ls(a),h),P&&(h=zi(h,7,qd));for(var j=u.length;j--;)Lu(h,u[j]);return h}),Kp=Tr(function(a,u){return null==a?{}:function zd(a,u){return El(a,u,function(h,P){return oc(a,P)})}(a,u)});function Jf(a,u){if(null==a)return{};var h=tn(Ls(a),function(P){return[P]});return u=Zt(u),El(a,h,function(P,j){return u(P,j[0])})}var Qf=Qc(qr),Zf=Qc(Ai);function fs(a){return null==a?[]:bn(a,qr(a))}var Ba=Os(function(a,u,h){return u=u.toLowerCase(),a+(h?td(u):u)});function td(a){return lc(Kn(a).toLowerCase())}function nd(a){return(a=Kn(a))&&a.replace(gs,gu).replace(_a,"")}var og=Os(function(a,u,h){return a+(h?"-":"")+u.toLowerCase()}),ag=Os(function(a,u,h){return a+(h?" ":"")+u.toLowerCase()}),rd=Yc("toLowerCase"),Zg=Os(function(a,u,h){return a+(h?"_":"")+u.toLowerCase()}),qg=Os(function(a,u,h){return a+(h?" ":"")+lc(u)}),yg=Os(function(a,u,h){return a+(h?" ":"")+u.toUpperCase()}),lc=Yc("toUpperCase");function ad(a,u,h){return a=Kn(a),(u=h?v:u)===v?function Or(Ee){return eo.test(Ee)}(a)?function no(Ee){return Ee.match(ba)||[]}(a):function xs(Ee){return Ee.match(va)||[]}(a):a.match(u)||[]}var sd=wn(function(a,u){try{return je(a,v,u)}catch(h){return ql(h)?h:new sn(h)}}),xg=Tr(function(a,u){return Fe(u,function(h){h=Uo(h),Ho(a,h,Ds(a[h],a))}),a});function qu(a){return function(){return a}}var rv=Kc(),iv=Kc(!0);function Yi(a){return a}function fc(a){return Mc("function"==typeof a?a:zi(a,1))}var av=wn(function(a,u){return function(h){return Zs(h,a,u)}}),ld=wn(function(a,u){return function(h){return Zs(a,h,u)}});function dc(a,u,h){var P=qr(u),j=Qs(u,P);null==h&&(!ar(u)||!j.length&&P.length)&&(h=u,u=a,a=this,j=Qs(u,qr(u)));var ee=!(ar(h)&&"chain"in h&&!h.chain),de=ga(a);return Fe(j,function(_e){var Me=u[_e];a[_e]=Me,de&&(a.prototype[_e]=function(){var it=this.__chain__;if(ee||it){var ot=a(this.__wrapped__),ft=ot.__actions__=Pi(this.__actions__);return ft.push({func:Me,args:arguments,thisArg:a}),ot.__chain__=it,ot}return Me.apply(a,Sr([this.value()],arguments))})}),a}function cd(){}var el=Oa(tn),lv=Oa(Ht),cv=Oa(ni);function _g(a){return yr(a)?cr(Uo(a)):function Lc(a){return function(u){return Pa(u,a)}}(a)}var bg=tu(),dv=tu(!0);function fd(){return[]}function dd(){return!1}var Eg=ju(function(a,u){return a+u},0),Pg=Rl("ceil"),Ig=ju(function(a,u){return a/u},1),Mg=Rl("floor"),pd=ju(function(a,u){return a*u},1),kg=Rl("round"),Lg=ju(function(a,u){return a-u},0);return Z.after=function qt(a,u){if("function"!=typeof u)throw new Ur(I);return a=dn(a),function(){if(--a<1)return u.apply(this,arguments)}},Z.ary=ls,Z.assign=Xg,Z.assignIn=tc,Z.assignInWith=cs,Z.assignWith=Kg,Z.at=nc,Z.before=uu,Z.bind=Ds,Z.bindAll=xg,Z.bindKey=Af,Z.castArray=function Nf(){if(!arguments.length)return[];var a=arguments[0];return ln(a)?a:[a]},Z.chain=Ve,Z.chunk=function dh(a,u,h){u=(h?Rr(a,u,h):u===v)?1:$r(dn(u),0);var P=null==a?0:a.length;if(!P||u<1)return[];for(var j=0,ee=0,de=$e(_o(P/u));j<P;)de[ee++]=pi(a,j,j+=u);return de},Z.compact=function hh(a){for(var u=-1,h=null==a?0:a.length,P=0,j=[];++u<h;){var ee=a[u];ee&&(j[P++]=ee)}return j},Z.concat=function ph(){var a=arguments.length;if(!a)return[];for(var u=$e(a-1),h=arguments[0],P=a;P--;)u[P-1]=arguments[P];return Sr(ln(h)?Pi(h):[h],Nr(u,1))},Z.cond=function cc(a){var u=null==a?0:a.length,h=Zt();return a=u?tn(a,function(P){if("function"!=typeof P[1])throw new Ur(I);return[h(P[0]),P[1]]}):[],wn(function(P){for(var j=-1;++j<u;){var ee=a[j];if(je(ee[0],this,P))return je(ee[1],this,P)}})},Z.conforms=function tv(a){return function _c(a){var u=qr(a);return function(h){return gl(h,a,u)}}(zi(a,1))},Z.constant=qu,Z.countBy=Xl,Z.create=function jr(a,u){var h=Ks(a);return null==u?h:Pu(h,u)},Z.curry=function Of(a,u,h){var P=Eo(a,8,v,v,v,v,v,u=h?v:u);return P.placeholder=Of.placeholder,P},Z.curryRight=function kf(a,u,h){var P=Eo(a,16,v,v,v,v,v,u=h?v:u);return P.placeholder=kf.placeholder,P},Z.debounce=Xu,Z.defaults=Fp,Z.defaultsDeep=Vp,Z.defer=ap,Z.delay=sp,Z.difference=ka,Z.differenceBy=gh,Z.differenceWith=gf,Z.drop=function zl(a,u,h){var P=null==a?0:a.length;return P?pi(a,(u=h||u===v?1:dn(u))<0?0:u,P):[]},Z.dropRight=function vh(a,u,h){var P=null==a?0:a.length;return P?pi(a,0,(u=P-(u=h||u===v?1:dn(u)))<0?0:u):[]},Z.dropRightWhile=function mh(a,u){return a&&a.length?Nu(a,Zt(u,3),!0,!0):[]},Z.dropWhile=function yh(a,u){return a&&a.length?Nu(a,Zt(u,3),!0):[]},Z.fill=function xh(a,u,h,P){var j=null==a?0:a.length;return j?(h&&"number"!=typeof h&&Rr(a,u,h)&&(h=0,P=j),function Cc(a,u,h,P){var j=a.length;for((h=dn(h))<0&&(h=-h>j?0:j+h),(P=P===v||P>j?j:dn(P))<0&&(P+=j),P=h>P?0:Uf(P);h<P;)a[h++]=u;return a}(a,u,h,P)):[]},Z.filter=function Da(a,u){return(ln(a)?Yt:wc)(a,Zt(u,3))},Z.flatMap=function Rs(a,u){return Nr(au(a,u),1)},Z.flatMapDeep=function Ef(a,u){return Nr(au(a,u),gt)},Z.flatMapDepth=function np(a,u,h){return h=h===v?1:dn(h),Nr(au(a,u),h)},Z.flatten=yf,Z.flattenDeep=function _h(a){return null!=a&&a.length?Nr(a,gt):[]},Z.flattenDepth=function xf(a,u){return null!=a&&a.length?Nr(a,u=u===v?1:dn(u)):[]},Z.flip=function up(a){return Eo(a,512)},Z.flow=rv,Z.flowRight=iv,Z.fromPairs=function Io(a){for(var u=-1,h=null==a?0:a.length,P={};++u<h;){var j=a[u];P[j[0]]=j[1]}return P},Z.functions=function Yf(a){return null==a?[]:Qs(a,qr(a))},Z.functionsIn=function Gp(a){return null==a?[]:Qs(a,Ai(a))},Z.groupBy=rp,Z.initial=function Ch(a){return null!=a&&a.length?pi(a,0,-1):[]},Z.intersection=wh,Z.intersectionBy=Sh,Z.intersectionWith=Th,Z.invert=fu,Z.invertBy=ac,Z.invokeMap=Yg,Z.iteratee=fc,Z.keyBy=$u,Z.keys=qr,Z.keysIn=Ai,Z.map=au,Z.mapKeys=function $p(a,u){var h={};return u=Zt(u,3),io(a,function(P,j,ee){Ho(h,u(P,j,ee),P)}),h},Z.mapValues=function Wp(a,u){var h={};return u=Zt(u,3),io(a,function(P,j,ee){Ho(h,j,u(P,j,ee))}),h},Z.matches=function ov(a){return Gi(zi(a,1))},Z.matchesProperty=function ud(a,u){return hi(a,zi(u,1))},Z.memoize=Ku,Z.merge=sc,Z.mergeWith=Kf,Z.method=av,Z.methodOf=ld,Z.mixin=dc,Z.negate=Ju,Z.nthArg=function uv(a){return a=dn(a),wn(function(u){return Oc(u,a)})},Z.omit=Yp,Z.omitBy=function Xp(a,u){return Jf(a,Ju(Zt(u)))},Z.once=function lp(a){return uu(2,a)},Z.orderBy=function Mf(a,u,h,P){return null==a?[]:(ln(u)||(u=null==u?[]:[u]),ln(h=P?v:h)||(h=null==h?[]:[h]),kc(a,u,h))},Z.over=el,Z.overArgs=cp,Z.overEvery=lv,Z.overSome=cv,Z.partial=Ql,Z.partialRight=Lf,Z.partition=ip,Z.pick=Kp,Z.pickBy=Jf,Z.property=_g,Z.propertyOf=function fv(a){return function(u){return null==a?v:Pa(a,u)}},Z.pull=Mh,Z.pullAll=bf,Z.pullAllBy=function Ah(a,u,h){return a&&a.length&&u&&u.length?Au(a,u,Zt(h,2)):a},Z.pullAllWith=function Oh(a,u,h){return a&&a.length&&u&&u.length?Au(a,u,v,h):a},Z.pullAt=Cf,Z.range=bg,Z.rangeRight=dv,Z.rearg=fp,Z.reject=function ha(a,u){return(ln(a)?Yt:wc)(a,Ju(Zt(u,3)))},Z.remove=function kh(a,u){var h=[];if(!a||!a.length)return h;var P=-1,j=[],ee=a.length;for(u=Zt(u,3);++P<ee;){var de=a[P];u(de,P,a)&&(h.push(de),j.push(P))}return Pl(a,j),h},Z.rest=function dp(a,u){if("function"!=typeof a)throw new Ur(I);return wn(a,u=u===v?u:dn(u))},Z.reverse=Gl,Z.sampleSize=function Yu(a,u,h){return u=(h?Rr(a,u,h):u===v)?1:dn(u),(ln(a)?Od:Ml)(a,u)},Z.set=function Qp(a,u,h){return null==a?a:Ms(a,u,h)},Z.setWith=function Zp(a,u,h,P){return P="function"==typeof P?P:v,null==a?a:Ms(a,u,h,P)},Z.shuffle=function Kl(a){return(ln(a)?kd:fn)(a)},Z.slice=function wf(a,u,h){var P=null==a?0:a.length;return P?(h&&"number"!=typeof h&&Rr(a,u,h)?(u=0,h=P):(u=null==u?0:dn(u),h=h===v?P:dn(h)),pi(a,u,h)):[]},Z.sortBy=Wo,Z.sortedUniq=function Bh(a){return a&&a.length?Ol(a):[]},Z.sortedUniqBy=function Hh(a,u){return a&&a.length?Ol(a,Zt(u,2)):[]},Z.split=function od(a,u,h){return h&&"number"!=typeof h&&Rr(a,u,h)&&(u=h=v),(h=h===v?$n:h>>>0)?(a=Kn(a))&&("string"==typeof u||null!=u&&!ec(u))&&!(u=Ui(u))&&ci(a)?To(Xt(a),0,h):a.split(u,h):[]},Z.spread=function hp(a,u){if("function"!=typeof a)throw new Ur(I);return u=null==u?0:$r(dn(u),0),wn(function(h){var P=h[u],j=To(h,0,u);return P&&Sr(j,P),je(a,this,j)})},Z.tail=function jh(a){var u=null==a?0:a.length;return u?pi(a,1,u):[]},Z.take=function zh(a,u,h){return a&&a.length?pi(a,0,(u=h||u===v?1:dn(u))<0?0:u):[]},Z.takeRight=function Gh(a,u,h){var P=null==a?0:a.length;return P?pi(a,(u=P-(u=h||u===v?1:dn(u)))<0?0:u,P):[]},Z.takeRightWhile=function Uh(a,u){return a&&a.length?Nu(a,Zt(u,3),!1,!0):[]},Z.takeWhile=function $h(a,u){return a&&a.length?Nu(a,Zt(u,3)):[]},Z.tap=function La(a,u){return u(a),a},Z.throttle=function pp(a,u,h){var P=!0,j=!0;if("function"!=typeof a)throw new Ur(I);return ar(h)&&(P="leading"in h?!!h.leading:P,j="trailing"in h?!!h.trailing:j),Xu(a,u,{leading:P,maxWait:u,trailing:j})},Z.thru=Mi,Z.toArray=cu,Z.toPairs=Qf,Z.toPairsIn=Zf,Z.toPath=function Sg(a){return ln(a)?tn(a,Uo):Wi(a)?[a]:Pi(hf(Kn(a)))},Z.toPlainObject=$f,Z.transform=function qp(a,u,h){var P=ln(a),j=P||Fa(a)||Vs(a);if(u=Zt(u,4),null==h){var ee=a&&a.constructor;h=j?P?new ee:[]:ar(a)&&ga(ee)?Ks(gr(a)):{}}return(j?Fe:io)(a,function(de,_e,Me){return u(h,de,_e,Me)}),h},Z.unary=function gp(a){return ls(a,1)},Z.union=Wh,Z.unionBy=Yh,Z.unionWith=Xh,Z.uniq=function Kh(a){return a&&a.length?Ma(a):[]},Z.uniqBy=function Jh(a,u){return a&&a.length?Ma(a,Zt(u,2)):[]},Z.uniqWith=function Qh(a,u){return u="function"==typeof u?u:v,a&&a.length?Ma(a,v,u):[]},Z.unset=function eg(a,u){return null==a||Lu(a,u)},Z.unzip=Ul,Z.unzipWith=Sf,Z.update=function tg(a,u,h){return null==a?a:Fc(a,u,Ru(h))},Z.updateWith=function uc(a,u,h,P){return P="function"==typeof P?P:v,null==a?a:Fc(a,u,Ru(h),P)},Z.values=fs,Z.valuesIn=function Zu(a){return null==a?[]:bn(a,Ai(a))},Z.without=Zh,Z.words=ad,Z.wrap=function vp(a,u){return Ql(Ru(u),a)},Z.xor=qh,Z.xorBy=ep,Z.xorWith=tp,Z.zip=ht,Z.zipObject=function $l(a,u){return Bc(a||[],u||[],Ta)},Z.zipObjectDeep=function Uu(a,u){return Bc(a||[],u||[],Ms)},Z.zipWith=Wl,Z.entries=Qf,Z.entriesIn=Zf,Z.extend=tc,Z.extendWith=cs,dc(Z,Z),Z.add=Eg,Z.attempt=sd,Z.camelCase=Ba,Z.capitalize=td,Z.ceil=Pg,Z.clamp=function qf(a,u,h){return h===v&&(h=u,u=v),h!==v&&(h=(h=so(h))==h?h:0),u!==v&&(u=(u=so(u))==u?u:0),ji(so(a),u,h)},Z.clone=function mp(a){return zi(a,4)},Z.cloneDeep=function xp(a){return zi(a,5)},Z.cloneDeepWith=function Rf(a,u){return zi(a,5,u="function"==typeof u?u:v)},Z.cloneWith=function yp(a,u){return zi(a,4,u="function"==typeof u?u:v)},Z.conformsTo=function Df(a,u){return null==u||gl(a,u,qr(u))},Z.deburr=nd,Z.defaultTo=function nv(a,u){return null==a||a!=a?u:a},Z.divide=Ig,Z.endsWith=function ng(a,u,h){a=Kn(a),u=Ui(u);var P=a.length,j=h=h===v?P:ji(dn(h),0,P);return(h-=u.length)>=0&&a.slice(h,j)==u},Z.eq=Mo,Z.escape=function rg(a){return(a=Kn(a))&&mi.test(a)?a.replace(Zo,rl):a},Z.escapeRegExp=function ig(a){return(a=Kn(a))&&Ar.test(a)?a.replace(lo,"\\$&"):a},Z.every=function ao(a,u,h){var P=ln(a)?Ht:Nd;return h&&Rr(a,u,h)&&(u=v),P(a,Zt(u,3))},Z.find=us,Z.findIndex=vf,Z.findKey=function Bp(a,u){return _s(a,Zt(u,3),io)},Z.findLast=fr,Z.findLastIndex=mf,Z.findLastKey=function Hp(a,u){return _s(a,Zt(u,3),ml)},Z.floor=Mg,Z.forEach=ou,Z.forEachRight=Pf,Z.forIn=function jp(a,u){return null==a?a:Es(a,Zt(u,3),Ai)},Z.forInRight=function Wf(a,u){return null==a?a:Ps(a,Zt(u,3),Ai)},Z.forOwn=function rc(a,u){return a&&io(a,Zt(u,3))},Z.forOwnRight=function zp(a,u){return a&&ml(a,Zt(u,3))},Z.get=ic,Z.gt=_p,Z.gte=Zl,Z.has=function Xf(a,u){return null!=a&&of(a,u,xl)},Z.hasIn=oc,Z.head=_f,Z.identity=Yi,Z.includes=function If(a,u,h,P){a=Ci(a)?a:fs(a),h=h&&!P?dn(h):0;var j=a.length;return h<0&&(h=$r(j+h,0)),Qu(a)?h<=j&&a.indexOf(u,h)>-1:!!j&&Fi(a,u,h)>-1},Z.indexOf=function bh(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:dn(h);return j<0&&(j=$r(P+j,0)),Fi(a,u,j)},Z.inRange=function ed(a,u,h){return u=Ko(u),h===v?(h=u,u=0):h=Ko(h),function Dd(a,u,h){return a>=di(u,h)&&a<$r(u,h)}(a=so(a),u,h)},Z.invoke=Up,Z.isArguments=Yo,Z.isArray=ln,Z.isArrayBuffer=Ff,Z.isArrayLike=Ci,Z.isArrayLikeObject=Dr,Z.isBoolean=function bp(a){return!0===a||!1===a||Pr(a)&&bi(a)==Ct},Z.isBuffer=Fa,Z.isDate=Cp,Z.isElement=function wp(a){return Pr(a)&&1===a.nodeType&&!lu(a)},Z.isEmpty=function Vf(a){if(null==a)return!0;if(Ci(a)&&(ln(a)||"string"==typeof a||"function"==typeof a.splice||Fa(a)||Vs(a)||Yo(a)))return!a.length;var u=gi(a);if(u==vn||u==Xe)return!a.size;if(nu(a))return!Sl(a).length;for(var h in a)if(be.call(a,h))return!1;return!0},Z.isEqual=function Sp(a,u){return Ia(a,u)},Z.isEqualWith=function Tp(a,u,h){var P=(h="function"==typeof h?h:v)?h(a,u):v;return P===v?Ia(a,u,v,h):!!P},Z.isError=ql,Z.isFinite=function Ep(a){return"number"==typeof a&&ol(a)},Z.isFunction=ga,Z.isInteger=Bf,Z.isLength=Fs,Z.isMap=Hf,Z.isMatch=function jf(a,u){return a===u||wl(a,u,Dl(u))},Z.isMatchWith=function zf(a,u,h){return h="function"==typeof h?h:v,wl(a,u,Dl(u),h)},Z.isNaN=function Pp(a){return Gf(a)&&a!=+a},Z.isNative=function Ip(a){if(oh(a))throw new sn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ec(a)},Z.isNil=function Ap(a){return null==a},Z.isNull=function Mp(a){return null===a},Z.isNumber=Gf,Z.isObject=ar,Z.isObjectLike=Pr,Z.isPlainObject=lu,Z.isRegExp=ec,Z.isSafeInteger=function Va(a){return Bf(a)&&a>=-on&&a<=on},Z.isSet=Xo,Z.isString=Qu,Z.isSymbol=Wi,Z.isTypedArray=Vs,Z.isUndefined=function Op(a){return a===v},Z.isWeakMap=function kp(a){return Pr(a)&&gi(a)==xn},Z.isWeakSet=function Lp(a){return Pr(a)&&"[object WeakSet]"==bi(a)},Z.join=function Eh(a,u){return null==a?"":xd.call(a,u)},Z.kebabCase=og,Z.last=oo,Z.lastIndexOf=function Ph(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=P;return h!==v&&(j=(j=dn(h))<0?$r(P+j,0):di(j,P-1)),u==u?function mu(Ee,Ke,$e){for(var At=$e+1;At--;)if(Ee[At]===Ke)return At;return At}(a,u,j):ri(a,nr,j,!0)},Z.lowerCase=ag,Z.lowerFirst=rd,Z.lt=Np,Z.lte=Rp,Z.max=function Ag(a){return a&&a.length?Iu(a,Yi,yl):v},Z.maxBy=function hc(a,u){return a&&a.length?Iu(a,Zt(u,2),yl):v},Z.mean=function hd(a){return Vi(a,Yi)},Z.meanBy=function Bs(a,u){return Vi(a,Zt(u,2))},Z.min=function Og(a){return a&&a.length?Iu(a,Yi,Tl):v},Z.minBy=function ds(a,u){return a&&a.length?Iu(a,Zt(u,2),Tl):v},Z.stubArray=fd,Z.stubFalse=dd,Z.stubObject=function hv(){return{}},Z.stubString=function Ha(){return""},Z.stubTrue=function Cg(){return!0},Z.multiply=pd,Z.nth=function Ih(a,u){return a&&a.length?Oc(a,dn(u)):v},Z.noConflict=function sv(){return De._===this&&(De._=vt),this},Z.noop=cd,Z.now=pa,Z.pad=function id(a,u,h){a=Kn(a);var P=(u=dn(u))?Yn(a):0;if(!u||P>=u)return a;var j=(u-P)/2;return eu(Us(j),h)+a+eu(_o(j),h)},Z.padEnd=function Jg(a,u,h){a=Kn(a);var P=(u=dn(u))?Yn(a):0;return u&&P<u?a+eu(u-P,h):a},Z.padStart=function Qg(a,u,h){a=Kn(a);var P=(u=dn(u))?Yn(a):0;return u&&P<u?eu(u-P,h)+a:a},Z.parseInt=function sg(a,u,h){return h||null==u?u=0:u&&(u=+u),Cd(Kn(a).replace(ea,""),u||0)},Z.random=function du(a,u,h){if(h&&"boolean"!=typeof h&&Rr(a,u,h)&&(u=h=v),h===v&&("boolean"==typeof u?(h=u,u=v):"boolean"==typeof a&&(h=a,a=v)),a===v&&u===v?(a=0,u=1):(a=Ko(a),u===v?(u=a,a=0):u=Ko(u)),a>u){var P=a;a=u,u=P}if(h||a%1||u%1){var j=mc();return di(a+j*(u-a+se("1e-"+((j+"").length-1))),u)}return Ou(a,u)},Z.reduce=function Wu(a,u,h){var P=ln(a)?Hn:Ca,j=arguments.length<3;return P(a,Zt(u,4),h,j,Ea)},Z.reduceRight=function op(a,u,h){var P=ln(a)?cn:Ca,j=arguments.length<3;return P(a,Zt(u,4),h,j,vl)},Z.repeat=function ug(a,u,h){return u=(h?Rr(a,u,h):u===v)?1:dn(u),Il(Kn(a),u)},Z.replace=function lg(){var a=arguments,u=Kn(a[0]);return a.length<3?u:u.replace(a[1],a[2])},Z.result=function Jp(a,u,h){var P=-1,j=(u=Aa(u,a)).length;for(j||(j=1,a=v);++P<j;){var ee=null==a?v:a[Uo(u[P])];ee===v&&(P=j,ee=h),a=ga(ee)?ee.call(a):ee}return a},Z.round=kg,Z.runInContext=Ee,Z.sample=function su(a){return(ln(a)?hl:Gd)(a)},Z.size=function Jl(a){if(null==a)return 0;if(Ci(a))return Qu(a)?Yn(a):a.length;var u=gi(a);return u==vn||u==Xe?a.size:Sl(a).length},Z.snakeCase=Zg,Z.some=function vi(a,u,h){var P=ln(a)?ni:So;return h&&Rr(a,u,h)&&(u=v),P(a,Zt(u,3))},Z.sortedIndex=function Lh(a,u){return ku(a,u)},Z.sortedIndexBy=function Nh(a,u,h){return Al(a,u,Zt(h,2))},Z.sortedIndexOf=function Rh(a,u){var h=null==a?0:a.length;if(h){var P=ku(a,u);if(P<h&&Mo(a[P],u))return P}return-1},Z.sortedLastIndex=function Dh(a,u){return ku(a,u,!0)},Z.sortedLastIndexBy=function Fh(a,u,h){return Al(a,u,Zt(h,2),!0)},Z.sortedLastIndexOf=function Vh(a,u){if(null!=a&&a.length){var P=ku(a,u,!0)-1;if(Mo(a[P],u))return P}return-1},Z.startCase=qg,Z.startsWith=function ev(a,u,h){return a=Kn(a),h=null==h?0:ji(dn(h),0,a.length),u=Ui(u),a.slice(h,h+u.length)==u},Z.subtract=Lg,Z.sum=function Ng(a){return a&&a.length?Jr(a,Yi):0},Z.sumBy=function Rg(a,u){return a&&a.length?Jr(a,Zt(u,2)):0},Z.template=function cg(a,u,h){var P=Z.templateSettings;h&&Rr(a,u,h)&&(u=v),a=Kn(a),u=cs({},u,P,Zc);var _e,Me,j=cs({},u.imports,P.imports,Zc),ee=qr(j),de=bn(j,ee),it=0,ot=u.interpolate||fo,ft="__p += '",Et=Bo((u.escape||fo).source+"|"+ot.source+"|"+(ot===St?bt:fo).source+"|"+(u.evaluate||fo).source+"|$","g"),Bt="//# sourceURL="+(be.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sa+"]")+"\n";a.replace(Et,function(rn,En,Nn,Xi,wi,Ki){return Nn||(Nn=Xi),ft+=a.slice(it,Ki).replace(Ji,js),En&&(_e=!0,ft+="' +\n__e("+En+") +\n'"),wi&&(Me=!0,ft+="';\n"+wi+";\n__p += '"),Nn&&(ft+="' +\n((__t = ("+Nn+")) == null ? '' : __t) +\n'"),it=Ki+rn.length,rn}),ft+="';\n";var nn=be.call(u,"variable")&&u.variable;if(nn){if(co.test(nn))throw new sn("Invalid `variable` option passed into `_.template`")}else ft="with (obj) {\n"+ft+"\n}\n";ft=(Me?ft.replace(xr,""):ft).replace(Qo,"$1").replace(ja,"$1;"),ft="function("+(nn||"obj")+") {\n"+(nn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Me?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ft+"return __p\n}";var Cn=sd(function(){return Sn(ee,Bt+"return "+ft).apply(v,de)});if(Cn.source=ft,ql(Cn))throw Cn;return Cn},Z.times=function wg(a,u){if((a=dn(a))<1||a>on)return[];var h=$n,P=di(a,$n);u=Zt(u),a-=$n;for(var j=_n(P,u);++h<a;)u(h);return j},Z.toFinite=Ko,Z.toInteger=dn,Z.toLength=Uf,Z.toLower=function fg(a){return Kn(a).toLowerCase()},Z.toNumber=so,Z.toSafeInteger=function Dp(a){return a?ji(dn(a),-on,on):0===a?a:0},Z.toString=Kn,Z.toUpper=function dg(a){return Kn(a).toUpperCase()},Z.trim=function hg(a,u,h){if((a=Kn(a))&&(h||u===v))return Rn(a);if(!a||!(u=Ui(u)))return a;var P=Xt(a),j=Xt(u);return To(P,hu(P,j),pu(P,j)+1).join("")},Z.trimEnd=function pg(a,u,h){if((a=Kn(a))&&(h||u===v))return a.slice(0,br(a)+1);if(!a||!(u=Ui(u)))return a;var P=Xt(a);return To(P,0,pu(P,Xt(u))+1).join("")},Z.trimStart=function gg(a,u,h){if((a=Kn(a))&&(h||u===v))return a.replace(ea,"");if(!a||!(u=Ui(u)))return a;var P=Xt(a);return To(P,hu(P,Xt(u))).join("")},Z.truncate=function vg(a,u){var h=30,P="...";if(ar(u)){var j="separator"in u?u.separator:j;h="length"in u?dn(u.length):h,P="omission"in u?Ui(u.omission):P}var ee=(a=Kn(a)).length;if(ci(a)){var de=Xt(a);ee=de.length}if(h>=ee)return a;var _e=h-Yn(P);if(_e<1)return P;var Me=de?To(de,0,_e).join(""):a.slice(0,_e);if(j===v)return Me+P;if(de&&(_e+=Me.length-_e),ec(j)){if(a.slice(_e).search(j)){var it,ot=Me;for(j.global||(j=Bo(j.source,Kn($a.exec(j))+"g")),j.lastIndex=0;it=j.exec(ot);)var ft=it.index;Me=Me.slice(0,ft===v?_e:ft)}}else if(a.indexOf(Ui(j),_e)!=_e){var Et=Me.lastIndexOf(j);Et>-1&&(Me=Me.slice(0,Et))}return Me+P},Z.unescape=function mg(a){return(a=Kn(a))&&ye.test(a)?a.replace(Oo,Qr):a},Z.uniqueId=function Tg(a){var u=++nt;return Kn(a)+u},Z.upperCase=yg,Z.upperFirst=lc,Z.each=ou,Z.eachRight=Pf,Z.first=_f,dc(Z,function(){var a={};return io(Z,function(u,h){be.call(Z.prototype,h)||(a[h]=u)}),a}(),{chain:!1}),Z.VERSION="4.17.21",Fe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Z[a].placeholder=Z}),Fe(["drop","take"],function(a,u){On.prototype[a]=function(h){h=h===v?1:$r(dn(h),0);var P=this.__filtered__&&!u?new On(this):this.clone();return P.__filtered__?P.__takeCount__=di(h,P.__takeCount__):P.__views__.push({size:di(h,$n),type:a+(P.__dir__<0?"Right":"")}),P},On.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),Fe(["filter","map","takeWhile"],function(a,u){var h=u+1,P=1==h||3==h;On.prototype[a]=function(j){var ee=this.clone();return ee.__iteratees__.push({iteratee:Zt(j,3),type:h}),ee.__filtered__=ee.__filtered__||P,ee}}),Fe(["head","last"],function(a,u){var h="take"+(u?"Right":"");On.prototype[a]=function(){return this[h](1).value()[0]}}),Fe(["initial","tail"],function(a,u){var h="drop"+(u?"":"Right");On.prototype[a]=function(){return this.__filtered__?new On(this):this[h](1)}}),On.prototype.compact=function(){return this.filter(Yi)},On.prototype.find=function(a){return this.filter(a).head()},On.prototype.findLast=function(a){return this.reverse().find(a)},On.prototype.invokeMap=wn(function(a,u){return"function"==typeof a?new On(this):this.map(function(h){return Zs(h,a,u)})}),On.prototype.reject=function(a){return this.filter(Ju(Zt(a)))},On.prototype.slice=function(a,u){a=dn(a);var h=this;return h.__filtered__&&(a>0||u<0)?new On(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),u!==v&&(h=(u=dn(u))<0?h.dropRight(-u):h.take(u-a)),h)},On.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},On.prototype.toArray=function(){return this.take($n)},io(On.prototype,function(a,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),P=/^(?:head|last)$/.test(u),j=Z[P?"take"+("last"==u?"Right":""):u],ee=P||/^find/.test(u);!j||(Z.prototype[u]=function(){var de=this.__wrapped__,_e=P?[1]:arguments,Me=de instanceof On,it=_e[0],ot=Me||ln(de),ft=function(En){var Nn=j.apply(Z,Sr([En],_e));return P&&Et?Nn[0]:Nn};ot&&h&&"function"==typeof it&&1!=it.length&&(Me=ot=!1);var Et=this.__chain__,Bt=!!this.__actions__.length,nn=ee&&!Et,Cn=Me&&!Bt;if(!ee&&ot){de=Cn?de:new On(this);var rn=a.apply(de,_e);return rn.__actions__.push({func:Mi,args:[ft],thisArg:v}),new bo(rn,Et)}return nn&&Cn?a.apply(this,_e):(rn=this.thru(ft),nn?P?rn.value()[0]:rn.value():rn)})}),Fe(["pop","push","shift","sort","splice","unshift"],function(a){var u=Za[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",P=/^(?:pop|shift)$/.test(a);Z.prototype[a]=function(){var j=arguments;if(P&&!this.__chain__){var ee=this.value();return u.apply(ln(ee)?ee:[],j)}return this[h](function(de){return u.apply(ln(de)?de:[],j)})}}),io(On.prototype,function(a,u){var h=Z[u];if(h){var P=h.name+"";be.call(ws,P)||(ws[P]=[]),ws[P].push({name:u,func:h})}}),ws[Hu(v,2).name]=[{name:"wrapper",func:v}],On.prototype.clone=function Hg(){var a=new On(this.__wrapped__);return a.__actions__=Pi(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Pi(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Pi(this.__views__),a},On.prototype.reverse=function jg(){if(this.__filtered__){var a=new On(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},On.prototype.value=function zg(){var a=this.__wrapped__.value(),u=this.__dir__,h=ln(a),P=u<0,j=h?a.length:0,ee=function th(a,u,h){for(var P=-1,j=h.length;++P<j;){var ee=h[P],de=ee.size;switch(ee.type){case"drop":a+=de;break;case"dropRight":u-=de;break;case"take":u=di(u,a+de);break;case"takeRight":a=$r(a,u-de)}}return{start:a,end:u}}(0,j,this.__views__),de=ee.start,_e=ee.end,Me=_e-de,it=P?_e:de-1,ot=this.__iteratees__,ft=ot.length,Et=0,Bt=di(Me,this.__takeCount__);if(!h||!P&&j==Me&&Bt==Me)return Vc(a,this.__actions__);var nn=[];e:for(;Me--&&Et<Bt;){for(var Cn=-1,rn=a[it+=u];++Cn<ft;){var En=ot[Cn],Xi=En.type,wi=(0,En.iteratee)(rn);if(2==Xi)rn=wi;else if(!wi){if(1==Xi)continue e;break e}}nn[Et++]=rn}return nn},Z.prototype.at=ii,Z.prototype.chain=function Na(){return Ve(this)},Z.prototype.commit=function iu(){return new bo(this.value(),this.__chain__)},Z.prototype.next=function mt(){this.__values__===v&&(this.__values__=cu(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?v:this.__values__[this.__index__++]}},Z.prototype.plant=function Ra(a){for(var u,h=this;h instanceof cl;){var P=pf(h);P.__index__=0,P.__values__=v,u?j.__wrapped__=P:u=P;var j=P;h=h.__wrapped__}return j.__wrapped__=a,u},Z.prototype.reverse=function $o(){var a=this.__wrapped__;if(a instanceof On){var u=a;return this.__actions__.length&&(u=new On(this)),(u=u.reverse()).__actions__.push({func:Mi,args:[Gl],thisArg:v}),new bo(u,this.__chain__)}return this.thru(Gl)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function Tf(){return Vc(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,xo&&(Z.prototype[xo]=function Yl(){return this}),Z}();De._=Qa,(g=function(){return Qa}.call(W,f,W,E))!==v&&(E.exports=g)}.call(this)},19984:(E,W,f)=>{var g=f(84633),v=f(96517),S=f(92046),T=f(21503);E.exports=function y(I,O){return(T(I)?g:S)(I,v(O,3))}},10203:(E,W,f)=>{var g=f(85683),v=f(45184),S=f(96517);E.exports=function T(y,I){var O={};return I=S(I,3),v(y,function(A,D,B){g(O,D,I(A,D,B))}),O}},18176:(E,W,f)=>{var g=f(67308),v=f(31100),S=f(32608);E.exports=function T(y){return y&&y.length?g(y,S,v):void 0}},30535:(E,W,f)=>{var g=f(99850);function S(T,y){if("function"!=typeof T||null!=y&&"function"!=typeof y)throw new TypeError("Expected a function");var I=function(){var O=arguments,A=y?y.apply(this,O):O[0],D=I.cache;if(D.has(A))return D.get(A);var B=T.apply(this,O);return I.cache=D.set(A,B)||D,B};return I.cache=new(S.Cache||g),I}S.Cache=g,E.exports=S},80567:(E,W,f)=>{var g=f(73842),S=f(84944)(function(T,y,I){g(T,y,I)});E.exports=S},29439:(E,W,f)=>{var g=f(67308),v=f(99069),S=f(32608);E.exports=function T(y){return y&&y.length?g(y,S,v):void 0}},29525:(E,W,f)=>{var g=f(67308),v=f(96517),S=f(99069);E.exports=function T(y,I){return y&&y.length?g(y,v(I,2),S):void 0}},12552:E=>{E.exports=function W(){}},31710:(E,W,f)=>{var g=f(12119);E.exports=function(){return g.Date.now()}},16372:(E,W,f)=>{var g=f(83021),S=f(3975)(function(T,y){return null==T?{}:g(T,y)});E.exports=S},87495:(E,W,f)=>{var g=f(11847),v=f(39222),S=f(45352),T=f(68533);E.exports=function y(I){return S(I)?g(T(I)):v(I)}},90361:(E,W,f)=>{var v=f(97509)();E.exports=v},81337:(E,W,f)=>{var g=f(8745),v=f(43132),S=f(96517),T=f(13570),y=f(21503);E.exports=function I(O,A,D){var B=y(O)?g:T,k=arguments.length<3;return B(O,S(A,4),D,k,v)}},55637:(E,W,f)=>{var g=f(81172),v=f(28794),S=f(56507),T=f(30248),y=f(52315);E.exports=function A(D){if(null==D)return 0;if(S(D))return T(D)?y(D):D.length;var B=v(D);return"[object Map]"==B||"[object Set]"==B?D.size:g(D).length}},12906:(E,W,f)=>{var g=f(50686),v=f(6119),S=f(23269),T=f(93342),y=S(function(I,O){if(null==I)return[];var A=O.length;return A>1&&T(I,O[0],O[1])?O=[]:A>2&&T(O[0],O[1],O[2])&&(O=[O[0]]),v(I,g(O,1),[])});E.exports=y},49975:E=>{E.exports=function W(){return[]}},63580:E=>{E.exports=function W(){return!1}},12232:(E,W,f)=>{var g=f(51467),v=1/0;E.exports=function T(y){return y?(y=g(y))===v||y===-v?17976931348623157e292*(y<0?-1:1):y==y?y:0:0===y?y:0}},44401:(E,W,f)=>{var g=f(12232);E.exports=function v(S){var T=g(S),y=T%1;return T==T?y?T-y:T:0}},51467:(E,W,f)=>{var g=f(83348),v=f(25940),S=f(44129),y=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,O=/^0o[0-7]+$/i,A=parseInt;E.exports=function D(B){if("number"==typeof B)return B;if(S(B))return NaN;if(v(B)){var k="function"==typeof B.valueOf?B.valueOf():B;B=v(k)?k+"":k}if("string"!=typeof B)return 0===B?B:+B;B=g(B);var Y=I.test(B);return Y||O.test(B)?A(B.slice(2),Y?2:8):y.test(B)?NaN:+B}},8067:(E,W,f)=>{var g=f(31989),v=f(16555);E.exports=function S(T){return g(T,v(T))}},73943:(E,W,f)=>{var g=f(93935);E.exports=function v(S){return null==S?"":g(S)}},89416:(E,W,f)=>{var g=f(96837),v=f(78858),S=f(45184),T=f(96517),y=f(29519),I=f(21503),O=f(80891),A=f(75946),D=f(25940),B=f(48159);E.exports=function k(Y,te,ue){var i=I(Y),ae=i||O(Y)||B(Y);if(te=T(te,4),null==ue){var pe=Y&&Y.constructor;ue=ae?i?new pe:[]:D(Y)&&A(pe)?v(y(Y)):{}}return(ae?g:S)(Y,function(le,K,ve){return te(ue,le,K,ve)}),ue}},68921:(E,W,f)=>{var g=f(50686),v=f(23269),S=f(80707),T=f(21330),y=v(function(I){return S(g(I,1,T,!0))});E.exports=y},51541:(E,W,f)=>{var g=f(73943),v=0;E.exports=function S(T){var y=++v;return g(T)+y}},90377:(E,W,f)=>{var g=f(19179),v=f(118);E.exports=function S(T){return null==T?[]:g(T,v(T))}},21617:(E,W,f)=>{var g=f(89719),v=f(38645);E.exports=function S(T,y){return v(T||[],y||[],g)}},29610:function(E){E.exports=function(){var W="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},g=Array.prototype,v=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,T=g.push,y=g.slice,I=v.toString,O=v.hasOwnProperty,A="undefined"!=typeof ArrayBuffer,D="undefined"!=typeof DataView,B=Array.isArray,k=Object.keys,Y=Object.create,te=A&&ArrayBuffer.isView,ue=isNaN,i=isFinite,ae=!{toString:null}.propertyIsEnumerable("toString"),pe=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],le=Math.pow(2,53)-1;function K(R,Q){return Q=null==Q?R.length-1:+Q,function(){for(var se=Math.max(arguments.length-Q,0),ge=Array(se),Ae=0;Ae<se;Ae++)ge[Ae]=arguments[Ae+Q];switch(Q){case 0:return R.call(this,ge);case 1:return R.call(this,arguments[0],ge);case 2:return R.call(this,arguments[0],arguments[1],ge)}var Se=Array(Q+1);for(Ae=0;Ae<Q;Ae++)Se[Ae]=arguments[Ae];return Se[Q]=ge,R.apply(this,Se)}}function ve(R){var Q=typeof R;return"function"===Q||"object"===Q&&!!R}function we(R){return void 0===R}function ke(R){return!0===R||!1===R||"[object Boolean]"===I.call(R)}function b(R){var Q="[object "+R+"]";return function(se){return I.call(se)===Q}}var Ue=b("String"),at=b("Number"),Ge=b("Date"),Re=b("RegExp"),Ne=b("Error"),tt=b("Symbol"),Je=b("ArrayBuffer"),pt=b("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(pt=function(R){return"function"==typeof R||!1});var gt=pt,on=b("Object"),gn=D&&on(new DataView(new ArrayBuffer(8))),Vn="undefined"!=typeof Map&&on(new Map),$n=b("DataView"),Bn=gn?function(R){return null!=R&&gt(R.getInt8)&&Je(R.buffer)}:$n,dr=B||b("Array");function Gn(R,Q){return null!=R&&O.call(R,Q)}var We=b("Arguments");!function(){We(arguments)||(We=function(R){return Gn(R,"callee")})}();var qe=We;function ct(R){return at(R)&&ue(R)}function Ct(R){return function(){return R}}function kt(R){return function(Q){var se=R(Q);return"number"==typeof se&&se>=0&&se<=le}}function pn(R){return function(Q){return null==Q?void 0:Q[R]}}var Rt=pn("byteLength"),hr=kt(Rt),ki=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,vn=A?function(R){return te?te(R)&&!Bn(R):hr(R)&&ki.test(I.call(R))}:Ct(!1),un=pn("length");function N(R,Q){Q=function(De){for(var rt={},l=De.length,d=0;d<l;++d)rt[De[d]]=!0;return{contains:function(x){return!0===rt[x]},push:function(x){return rt[x]=!0,De.push(x)}}}(Q);var se=pe.length,ge=R.constructor,Ae=gt(ge)&&ge.prototype||v,Se="constructor";for(Gn(R,Se)&&!Q.contains(Se)&&Q.push(Se);se--;)(Se=pe[se])in R&&R[Se]!==Ae[Se]&&!Q.contains(Se)&&Q.push(Se)}function U(R){if(!ve(R))return[];if(k)return k(R);var Q=[];for(var se in R)Gn(R,se)&&Q.push(se);return ae&&N(R,Q),Q}function re(R,Q){var se=U(Q),ge=se.length;if(null==R)return!ge;for(var Ae=Object(R),Se=0;Se<ge;Se++){var De=se[Se];if(Q[De]!==Ae[De]||!(De in Ae))return!1}return!0}function xe(R){return R instanceof xe?R:this instanceof xe?void(this._wrapped=R):new xe(R)}function Qe(R){return new Uint8Array(R.buffer||R,R.byteOffset||0,Rt(R))}xe.VERSION=W,xe.prototype.valueOf=xe.prototype.toJSON=xe.prototype.value=function(){return this._wrapped},xe.prototype.toString=function(){return String(this._wrapped)};var Xe="[object DataView]";function wt(R,Q,se,ge){if(R===Q)return 0!==R||1/R==1/Q;if(null==R||null==Q)return!1;if(R!=R)return Q!=Q;var Ae=typeof R;return("function"===Ae||"object"===Ae||"object"==typeof Q)&&function Se(De,rt,l,d){De instanceof xe&&(De=De._wrapped),rt instanceof xe&&(rt=rt._wrapped);var x=I.call(De);if(x!==I.call(rt))return!1;if(gn&&"[object Object]"==x&&Bn(De)){if(!Bn(rt))return!1;x=Xe}switch(x){case"[object RegExp]":case"[object String]":return""+De==""+rt;case"[object Number]":return+De!=+De?+rt!=+rt:0==+De?1/+De==1/rt:+De==+rt;case"[object Date]":case"[object Boolean]":return+De==+rt;case"[object Symbol]":return S.valueOf.call(De)===S.valueOf.call(rt);case"[object ArrayBuffer]":case Xe:return Se(Qe(De),Qe(rt),l,d)}var w="[object Array]"===x;if(!w&&vn(De)){if(Rt(De)!==Rt(rt))return!1;if(De.buffer===rt.buffer&&De.byteOffset===rt.byteOffset)return!0;w=!0}if(!w){if("object"!=typeof De||"object"!=typeof rt)return!1;var F=De.constructor,H=rt.constructor;if(F!==H&&!(gt(F)&&F instanceof F&&gt(H)&&H instanceof H)&&"constructor"in De&&"constructor"in rt)return!1}d=d||[];for(var X=(l=l||[]).length;X--;)if(l[X]===De)return d[X]===rt;if(l.push(De),d.push(rt),w){if((X=De.length)!==rt.length)return!1;for(;X--;)if(!wt(De[X],rt[X],l,d))return!1}else{var he,ce=U(De);if(X=ce.length,U(rt).length!==X)return!1;for(;X--;)if(!Gn(rt,he=ce[X])||!wt(De[he],rt[he],l,d))return!1}return l.pop(),d.pop(),!0}(R,Q,se,ge)}function Ft(R){if(!ve(R))return[];var Q=[];for(var se in R)Q.push(se);return ae&&N(R,Q),Q}function Vt(R){var Q=un(R);return function(se){if(null==se)return!1;var ge=Ft(se);if(un(ge))return!1;for(var Ae=0;Ae<Q;Ae++)if(!gt(se[R[Ae]]))return!1;return R!==oi||!gt(se[xn])}}var xn="forEach",mn=["clear","delete"],pr=["get","has","set"],or=mn.concat(xn,pr),oi=mn.concat(pr),Un=["add"].concat(mn,xn,"has"),Ot=Vn?Vt(or):b("Map"),Jn=Vn?Vt(oi):b("WeakMap"),ur=Vn?Vt(Un):b("Set"),Mr=b("WeakSet");function ai(R){for(var Q=U(R),se=Q.length,ge=Array(se),Ae=0;Ae<se;Ae++)ge[Ae]=R[Q[Ae]];return ge}function Cr(R){for(var Q={},se=U(R),ge=0,Ae=se.length;ge<Ae;ge++)Q[R[se[ge]]]=se[ge];return Q}function xr(R){var Q=[];for(var se in R)gt(R[se])&&Q.push(se);return Q.sort()}function Qo(R,Q){return function(se){var ge=arguments.length;if(Q&&(se=Object(se)),ge<2||null==se)return se;for(var Ae=1;Ae<ge;Ae++)for(var Se=arguments[Ae],De=R(Se),rt=De.length,l=0;l<rt;l++){var d=De[l];Q&&void 0!==se[d]||(se[d]=Se[d])}return se}}var ja=Qo(Ft),Oo=Qo(U),Zo=Qo(Ft,!0);function ye(R){if(!ve(R))return{};if(Y)return Y(R);var Q=function(){};Q.prototype=R;var se=new Q;return Q.prototype=null,se}function mi(R){return dr(R)?R:[R]}function uo(R){return xe.toPath(R)}function qo(R,Q){for(var se=Q.length,ge=0;ge<se;ge++){if(null==R)return;R=R[Q[ge]]}return se?R:void 0}function St(R,Q,se){var ge=qo(R,uo(Q));return we(ge)?se:ge}function si(R){return R}function ko(R){return R=Oo({},R),function(Q){return re(Q,R)}}function Lo(R){return R=uo(R),function(Q){return qo(Q,R)}}function lo(R,Q,se){if(void 0===Q)return R;switch(null==se?3:se){case 1:return function(ge){return R.call(Q,ge)};case 3:return function(ge,Ae,Se){return R.call(Q,ge,Ae,Se)};case 4:return function(ge,Ae,Se,De){return R.call(Q,ge,Ae,Se,De)}}return function(){return R.apply(Q,arguments)}}function Ar(R,Q,se){return null==R?si:gt(R)?lo(R,Q,se):ve(R)&&!dr(R)?ko(R):Lo(R)}function ea(R,Q){return Ar(R,Q,1/0)}function zr(R,Q,se){return xe.iteratee!==ea?xe.iteratee(R,Q):Ar(R,Q,se)}function za(){}function Ga(R,Q){return null==Q&&(Q=R,R=0),R+Math.floor(Math.random()*(Q-R+1))}xe.toPath=mi,xe.iteratee=ea;var Yr=Date.now||function(){return(new Date).getTime()};function va(R){var Q=function(Se){return R[Se]},se="(?:"+U(R).join("|")+")",ge=RegExp(se),Ae=RegExp(se,"g");return function(Se){return ge.test(Se=null==Se?"":""+Se)?Se.replace(Ae,Q):Se}}var co={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ua=va(co),bt=va(Cr(co)),$a=xe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ma=/(.)^/,Wa={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ps=/\\|'|\r|\n|\u2028|\u2029/g;function An(R){return"\\"+Wa[R]}var ta=/^\s*(\w|\$)+\s*$/,gs=0;function fo(R,Q,se,ge,Ae){if(!(ge instanceof Q))return R.apply(se,Ae);var Se=ye(R.prototype),De=R.apply(Se,Ae);return ve(De)?De:Se}var Ji=K(function(R,Q){var se=Ji.placeholder,ge=function(){for(var Ae=0,Se=Q.length,De=Array(Se),rt=0;rt<Se;rt++)De[rt]=Q[rt]===se?arguments[Ae++]:Q[rt];for(;Ae<arguments.length;)De.push(arguments[Ae++]);return fo(R,ge,this,this,De)};return ge});Ji.placeholder=xe;var ho=K(function(R,Q,se){if(!gt(R))throw new TypeError("Bind must be called on a function");var ge=K(function(Ae){return fo(R,ge,Q,this,se.concat(Ae))});return ge}),en=kt(un);function yi(R,Q,se,ge){if(ge=ge||[],Q||0===Q){if(Q<=0)return ge.concat(R)}else Q=1/0;for(var Ae=ge.length,Se=0,De=un(R);Se<De;Se++){var rt=R[Se];if(en(rt)&&(dr(rt)||qe(rt)))if(Q>1)yi(rt,Q-1,se,ge),Ae=ge.length;else for(var l=0,d=rt.length;l<d;)ge[Ae++]=rt[l++];else se||(ge[Ae++]=rt)}return ge}var Lt=K(function(R,Q){var se=(Q=yi(Q,!1,!1)).length;if(se<1)throw new Error("bindAll must be passed function names");for(;se--;){var ge=Q[se];R[ge]=ho(R[ge],R)}return R}),ei=K(function(R,Q,se){return setTimeout(function(){return R.apply(null,se)},Q)}),Li=Ji(ei,xe,1);function lr(R){return function(){return!R.apply(this,arguments)}}function ya(R,Q){var se;return function(){return--R>0&&(se=Q.apply(this,arguments)),R<=1&&(Q=null),se}}var Wn=Ji(ya,2);function Qi(R,Q,se){Q=zr(Q,se);for(var ge,Ae=U(R),Se=0,De=Ae.length;Se<De;Se++)if(Q(R[ge=Ae[Se]],ge,R))return ge}function xi(R){return function(Q,se,ge){se=zr(se,ge);for(var Ae=un(Q),Se=R>0?0:Ae-1;Se>=0&&Se<Ae;Se+=R)if(se(Q[Se],Se,Q))return Se;return-1}}var No=xi(1),Zi=xi(-1);function po(R,Q,se,ge){for(var Ae=(se=zr(se,ge,1))(Q),Se=0,De=un(R);Se<De;){var rt=Math.floor((Se+De)/2);se(R[rt])<Ae?Se=rt+1:De=rt}return Se}function na(R,Q,se){return function(ge,Ae,Se){var De=0,rt=un(ge);if("number"==typeof Se)R>0?De=Se>=0?Se:Math.max(Se+rt,De):rt=Se>=0?Math.min(Se+1,rt):Se+rt+1;else if(se&&Se&&rt)return ge[Se=se(ge,Ae)]===Ae?Se:-1;if(Ae!=Ae)return(Se=Q(y.call(ge,De,rt),ct))>=0?Se+De:-1;for(Se=R>0?De:rt-1;Se>=0&&Se<rt;Se+=R)if(ge[Se]===Ae)return Se;return-1}}var ra=na(1,No,po),Vr=na(-1,Zi);function go(R,Q,se){var ge=(en(R)?No:Qi)(R,Q,se);if(void 0!==ge&&-1!==ge)return R[ge]}function Br(R,Q,se){var ge,Ae;if(Q=lo(Q,se),en(R))for(ge=0,Ae=R.length;ge<Ae;ge++)Q(R[ge],ge,R);else{var Se=U(R);for(ge=0,Ae=Se.length;ge<Ae;ge++)Q(R[Se[ge]],Se[ge],R)}return R}function _r(R,Q,se){Q=zr(Q,se);for(var ge=!en(R)&&U(R),Ae=(ge||R).length,Se=Array(Ae),De=0;De<Ae;De++){var rt=ge?ge[De]:De;Se[De]=Q(R[rt],rt,R)}return Se}function ia(R){var Q=function(se,ge,Ae,Se){var De=!en(se)&&U(se),rt=(De||se).length,l=R>0?0:rt-1;for(Se||(Ae=se[De?De[l]:l],l+=R);l>=0&&l<rt;l+=R){var d=De?De[l]:l;Ae=ge(Ae,se[d],d,se)}return Ae};return function(se,ge,Ae,Se){var De=arguments.length>=3;return Q(se,lo(ge,Se,4),Ae,De)}}var Ni=ia(1),oa=ia(-1);function qi(R,Q,se){var ge=[];return Q=zr(Q,se),Br(R,function(Ae,Se,De){Q(Ae,Se,De)&&ge.push(Ae)}),ge}function ui(R,Q,se){Q=zr(Q,se);for(var ge=!en(R)&&U(R),Ae=(ge||R).length,Se=0;Se<Ae;Se++){var De=ge?ge[Se]:Se;if(!Q(R[De],De,R))return!1}return!0}function li(R,Q,se){Q=zr(Q,se);for(var ge=!en(R)&&U(R),Ae=(ge||R).length,Se=0;Se<Ae;Se++){var De=ge?ge[Se]:Se;if(Q(R[De],De,R))return!0}return!1}function Xr(R,Q,se,ge){return en(R)||(R=ai(R)),("number"!=typeof se||ge)&&(se=0),ra(R,Q,se)>=0}var vo=K(function(R,Q,se){var ge,Ae;return gt(Q)?Ae=Q:(Q=uo(Q),ge=Q.slice(0,-1),Q=Q[Q.length-1]),_r(R,function(Se){var De=Ae;if(!De){if(ge&&ge.length&&(Se=qo(Se,ge)),null==Se)return;De=Se[Q]}return null==De?De:De.apply(Se,se)})});function mo(R,Q){return _r(R,Lo(Q))}function yo(R,Q,se){var ge,Ae,Se=-1/0,De=-1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof R[0]&&null!=R)for(var rt=0,l=(R=en(R)?R:ai(R)).length;rt<l;rt++)null!=(ge=R[rt])&&ge>Se&&(Se=ge);else Q=zr(Q,se),Br(R,function(d,x,w){((Ae=Q(d,x,w))>De||Ae===-1/0&&Se===-1/0)&&(Se=d,De=Ae)});return Se}var Ro=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function aa(R){return R?dr(R)?y.call(R):Ue(R)?R.match(Ro):en(R)?_r(R,si):ai(R):[]}function Do(R,Q,se){if(null==Q||se)return en(R)||(R=ai(R)),R[Ga(R.length-1)];var ge=aa(R),Ae=un(ge);Q=Math.max(Math.min(Q,Ae),0);for(var Se=Ae-1,De=0;De<Q;De++){var rt=Ga(De,Se),l=ge[De];ge[De]=ge[rt],ge[rt]=l}return ge.slice(0,Q)}function Fo(R,Q){return function(se,ge,Ae){var Se=Q?[[],[]]:{};return ge=zr(ge,Ae),Br(se,function(De,rt){var l=ge(De,rt,se);R(Se,De,l)}),Se}}var xa=Fo(function(R,Q,se){Gn(R,se)?R[se].push(Q):R[se]=[Q]}),vs=Fo(function(R,Q,se){R[se]=Q}),Ya=Fo(function(R,Q,se){Gn(R,se)?R[se]++:R[se]=1}),Vo=Fo(function(R,Q,se){R[se?0:1].push(Q)},!0);function Xa(R,Q,se){return Q in se}var Ka=K(function(R,Q){var se={},ge=Q[0];if(null==R)return se;gt(ge)?(Q.length>1&&(ge=lo(ge,Q[1])),Q=Ft(R)):(ge=Xa,Q=yi(Q,!1,!1),R=Object(R));for(var Ae=0,Se=Q.length;Ae<Se;Ae++){var De=Q[Ae],rt=R[De];ge(rt,De,R)&&(se[De]=rt)}return se}),ms=K(function(R,Q){var se,ge=Q[0];return gt(ge)?(ge=lr(ge),Q.length>1&&(se=Q[1])):(Q=_r(yi(Q,!1,!1),String),ge=function(Ae,Se){return!Xr(Q,Se)}),Ka(R,ge,se)});function Ja(R,Q,se){return y.call(R,0,Math.max(0,R.length-(null==Q||se?1:Q)))}function _a(R,Q,se){return null==R||R.length<1?null==Q||se?void 0:[]:null==Q||se?R[0]:Ja(R,R.length-Q)}function Ri(R,Q,se){return y.call(R,null==Q||se?1:Q)}var ba=K(function(R,Q){return Q=yi(Q,!0,!0),qi(R,function(se){return!Xr(Q,se)})}),ys=K(function(R,Q){return ba(R,Q)});function eo(R,Q,se,ge){ke(Q)||(ge=se,se=Q,Q=!1),null!=se&&(se=zr(se,ge));for(var Ae=[],Se=[],De=0,rt=un(R);De<rt;De++){var l=R[De],d=se?se(l,De,R):l;Q&&!se?(De&&Se===d||Ae.push(l),Se=d):se?Xr(Se,d)||(Se.push(d),Ae.push(l)):Xr(Ae,l)||Ae.push(l)}return Ae}var Di=K(function(R){return eo(yi(R,!0,!0))});function sa(R){for(var Q=R&&yo(R,un).length||0,se=Array(Q),ge=0;ge<Q;ge++)se[ge]=mo(R,ge);return se}var Qn=K(sa);function He(R,Q){return R._chain?xe(Q).chain():Q}function Gr(R){return Br(xr(R),function(Q){var se=xe[Q]=R[Q];xe.prototype[Q]=function(){var ge=[this._wrapped];return T.apply(ge,arguments),He(this,se.apply(xe,ge))}}),xe}Br(["pop","push","reverse","shift","sort","splice","unshift"],function(R){var Q=g[R];xe.prototype[R]=function(){var se=this._wrapped;return null!=se&&(Q.apply(se,arguments),"shift"!==R&&"splice"!==R||0!==se.length||delete se[0]),He(this,se)}}),Br(["concat","join","slice"],function(R){var Q=g[R];xe.prototype[R]=function(){var se=this._wrapped;return null!=se&&(se=Q.apply(se,arguments)),He(this,se)}});var ti=Gr({__proto__:null,VERSION:W,restArguments:K,isObject:ve,isNull:function(R){return null===R},isUndefined:we,isBoolean:ke,isElement:function(R){return!(!R||1!==R.nodeType)},isString:Ue,isNumber:at,isDate:Ge,isRegExp:Re,isError:Ne,isSymbol:tt,isArrayBuffer:Je,isDataView:Bn,isArray:dr,isFunction:gt,isArguments:qe,isFinite:function(R){return!tt(R)&&i(R)&&!isNaN(parseFloat(R))},isNaN:ct,isTypedArray:vn,isEmpty:function(R){if(null==R)return!0;var Q=un(R);return"number"==typeof Q&&(dr(R)||Ue(R)||qe(R))?0===Q:0===un(U(R))},isMatch:re,isEqual:function(R,Q){return wt(R,Q)},isMap:Ot,isWeakMap:Jn,isSet:ur,isWeakSet:Mr,keys:U,allKeys:Ft,values:ai,pairs:function(R){for(var Q=U(R),se=Q.length,ge=Array(se),Ae=0;Ae<se;Ae++)ge[Ae]=[Q[Ae],R[Q[Ae]]];return ge},invert:Cr,functions:xr,methods:xr,extend:ja,extendOwn:Oo,assign:Oo,defaults:Zo,create:function(R,Q){var se=ye(R);return Q&&Oo(se,Q),se},clone:function(R){return ve(R)?dr(R)?R.slice():ja({},R):R},tap:function(R,Q){return Q(R),R},get:St,has:function(R,Q){for(var se=(Q=uo(Q)).length,ge=0;ge<se;ge++){var Ae=Q[ge];if(!Gn(R,Ae))return!1;R=R[Ae]}return!!se},mapObject:function(R,Q,se){Q=zr(Q,se);for(var ge=U(R),Ae=ge.length,Se={},De=0;De<Ae;De++){var rt=ge[De];Se[rt]=Q(R[rt],rt,R)}return Se},identity:si,constant:Ct,noop:za,toPath:mi,property:Lo,propertyOf:function(R){return null==R?za:function(Q){return St(R,Q)}},matcher:ko,matches:ko,times:function(R,Q,se){var ge=Array(Math.max(0,R));Q=lo(Q,se,1);for(var Ae=0;Ae<R;Ae++)ge[Ae]=Q(Ae);return ge},random:Ga,now:Yr,escape:Ua,unescape:bt,templateSettings:$a,template:function(R,Q,se){!Q&&se&&(Q=se),Q=Zo({},Q,xe.templateSettings);var ge=RegExp([(Q.escape||ma).source,(Q.interpolate||ma).source,(Q.evaluate||ma).source].join("|")+"|$","g"),Ae=0,Se="__p+='";R.replace(ge,function(d,x,w,F,H){return Se+=R.slice(Ae,H).replace(ps,An),Ae=H+d.length,x?Se+="'+\n((__t=("+x+"))==null?'':_.escape(__t))+\n'":w?Se+="'+\n((__t=("+w+"))==null?'':__t)+\n'":F&&(Se+="';\n"+F+"\n__p+='"),d}),Se+="';\n";var De,rt=Q.variable;if(rt){if(!ta.test(rt))throw new Error("variable is not a bare identifier: "+rt)}else Se="with(obj||{}){\n"+Se+"}\n",rt="obj";Se="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Se+"return __p;\n";try{De=new Function(rt,"_",Se)}catch(d){throw d.source=Se,d}var l=function(d){return De.call(this,d,xe)};return l.source="function("+rt+"){\n"+Se+"}",l},result:function(R,Q,se){var ge=(Q=uo(Q)).length;if(!ge)return gt(se)?se.call(R):se;for(var Ae=0;Ae<ge;Ae++){var Se=null==R?void 0:R[Q[Ae]];void 0===Se&&(Se=se,Ae=ge),R=gt(Se)?Se.call(R):Se}return R},uniqueId:function(R){var Q=++gs+"";return R?R+Q:Q},chain:function(R){var Q=xe(R);return Q._chain=!0,Q},iteratee:ea,partial:Ji,bind:ho,bindAll:Lt,memoize:function(R,Q){var se=function(ge){var Ae=se.cache,Se=""+(Q?Q.apply(this,arguments):ge);return Gn(Ae,Se)||(Ae[Se]=R.apply(this,arguments)),Ae[Se]};return se.cache={},se},delay:ei,defer:Li,throttle:function(R,Q,se){var ge,Ae,Se,De,rt=0;se||(se={});var l=function(){rt=!1===se.leading?0:Yr(),ge=null,De=R.apply(Ae,Se),ge||(Ae=Se=null)},d=function(){var x=Yr();rt||!1!==se.leading||(rt=x);var w=Q-(x-rt);return Ae=this,Se=arguments,w<=0||w>Q?(ge&&(clearTimeout(ge),ge=null),rt=x,De=R.apply(Ae,Se),ge||(Ae=Se=null)):ge||!1===se.trailing||(ge=setTimeout(l,w)),De};return d.cancel=function(){clearTimeout(ge),rt=0,ge=Ae=Se=null},d},debounce:function(R,Q,se){var ge,Ae,Se,De,rt,l=function(){var x=Yr()-Ae;Q>x?ge=setTimeout(l,Q-x):(ge=null,se||(De=R.apply(rt,Se)),ge||(Se=rt=null))},d=K(function(x){return rt=this,Se=x,Ae=Yr(),ge||(ge=setTimeout(l,Q),se&&(De=R.apply(rt,Se))),De});return d.cancel=function(){clearTimeout(ge),ge=Se=rt=null},d},wrap:function(R,Q){return Ji(Q,R)},negate:lr,compose:function(){var R=arguments,Q=R.length-1;return function(){for(var se=Q,ge=R[Q].apply(this,arguments);se--;)ge=R[se].call(this,ge);return ge}},after:function(R,Q){return function(){if(--R<1)return Q.apply(this,arguments)}},before:ya,once:Wn,findKey:Qi,findIndex:No,findLastIndex:Zi,sortedIndex:po,indexOf:ra,lastIndexOf:Vr,find:go,detect:go,findWhere:function(R,Q){return go(R,ko(Q))},each:Br,forEach:Br,map:_r,collect:_r,reduce:Ni,foldl:Ni,inject:Ni,reduceRight:oa,foldr:oa,filter:qi,select:qi,reject:function(R,Q,se){return qi(R,lr(zr(Q)),se)},every:ui,all:ui,some:li,any:li,contains:Xr,includes:Xr,include:Xr,invoke:vo,pluck:mo,where:function(R,Q){return qi(R,ko(Q))},max:yo,min:function(R,Q,se){var ge,Ae,Se=1/0,De=1/0;if(null==Q||"number"==typeof Q&&"object"!=typeof R[0]&&null!=R)for(var rt=0,l=(R=en(R)?R:ai(R)).length;rt<l;rt++)null!=(ge=R[rt])&&ge<Se&&(Se=ge);else Q=zr(Q,se),Br(R,function(d,x,w){((Ae=Q(d,x,w))<De||Ae===1/0&&Se===1/0)&&(Se=d,De=Ae)});return Se},shuffle:function(R){return Do(R,1/0)},sample:Do,sortBy:function(R,Q,se){var ge=0;return Q=zr(Q,se),mo(_r(R,function(Ae,Se,De){return{value:Ae,index:ge++,criteria:Q(Ae,Se,De)}}).sort(function(Ae,Se){var De=Ae.criteria,rt=Se.criteria;if(De!==rt){if(De>rt||void 0===De)return 1;if(De<rt||void 0===rt)return-1}return Ae.index-Se.index}),"value")},groupBy:xa,indexBy:vs,countBy:Ya,partition:Vo,toArray:aa,size:function(R){return null==R?0:en(R)?R.length:U(R).length},pick:Ka,omit:ms,first:_a,head:_a,take:_a,initial:Ja,last:function(R,Q,se){return null==R||R.length<1?null==Q||se?void 0:[]:null==Q||se?R[R.length-1]:Ri(R,Math.max(0,R.length-Q))},rest:Ri,tail:Ri,drop:Ri,compact:function(R){return qi(R,Boolean)},flatten:function(R,Q){return yi(R,Q,!1)},without:ys,uniq:eo,unique:eo,union:Di,intersection:function(R){for(var Q=[],se=arguments.length,ge=0,Ae=un(R);ge<Ae;ge++){var Se=R[ge];if(!Xr(Q,Se)){var De;for(De=1;De<se&&Xr(arguments[De],Se);De++);De===se&&Q.push(Se)}}return Q},difference:ba,unzip:sa,transpose:sa,zip:Qn,object:function(R,Q){for(var se={},ge=0,Ae=un(R);ge<Ae;ge++)Q?se[R[ge]]=Q[ge]:se[R[ge][0]]=R[ge][1];return se},range:function(R,Q,se){null==Q&&(Q=R||0,R=0),se||(se=Q<R?-1:1);for(var ge=Math.max(Math.ceil((Q-R)/se),0),Ae=Array(ge),Se=0;Se<ge;Se++,R+=se)Ae[Se]=R;return Ae},chunk:function(R,Q){if(null==Q||Q<1)return[];for(var se=[],ge=0,Ae=R.length;ge<Ae;)se.push(y.call(R,ge,ge+=Q));return se},mixin:Gr,default:xe});return ti._=ti,ti}()}}]);