(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[723],{48723:(P,G,h)=>{"use strict";h.r(G),h.d(G,{CourseModule:()=>ag});var v={};h.r(v),h.d(v,{ellipseWithEllipse:()=>Yo,ellipseWithLine:()=>Or,exists:()=>ir,lineWithLine:()=>or,pathWithEllipse:()=>_a,pathWithLine:()=>so,pathWithPath:()=>wa,pathWithPolygon:()=>Qo,pathWithPolyline:()=>Ca,pathWithRect:()=>Jo,polygonWithEllipse:()=>zi,polygonWithLine:()=>ni,polygonWithPolygon:()=>Mo,polygonWithPolyline:()=>Ko,polygonWithRect:()=>Xo,polylineWithEllipse:()=>ao,polylineWithLine:()=>Oi,polylineWithPolyline:()=>ki,polylineWithRect:()=>kr,rectWithEllipse:()=>Kr,rectWithLine:()=>Ao,rectWithRect:()=>Ir});var m={};h.r(m),h.d(m,{Curve:()=>Ft,Ellipse:()=>rr,Line:()=>ut,Path:()=>gt,Point:()=>ge,Polygon:()=>yr,Polyline:()=>bn,Rect:()=>it,bezier:()=>Ga,ellipse:()=>Eo,intersection:()=>qo,line:()=>Br,normalizeAngle:()=>De,point:()=>Xr,random:()=>Kt,rect:()=>Ua,scale:()=>Fe,snapToGrid:()=>rt,toDeg:()=>xt,toRad:()=>bt,types:()=>pt});var S={};h.r(S),h.d(S,{absolute:()=>ea,bottom:()=>Hf,ellipse:()=>zf,ellipseSpread:()=>jf,fn:()=>ho,left:()=>vs,line:()=>Ur,right:()=>Aa,top:()=>zs});var E={};h.r(E),h.d(E,{bottom:()=>Wf,inside:()=>Nu,insideOriented:()=>Yf,left:()=>Gf,manual:()=>Uf,outside:()=>Kl,outsideOriented:()=>$f,radial:()=>ys,radialOriented:()=>Du,right:()=>wr,top:()=>Gr});var b={};h.r(b),h.d(b,{manhattan:()=>Xu,metro:()=>ad,normal:()=>ka,oneSide:()=>qf,orthogonal:()=>Uu});var I={};h.r(I),h.d(I,{curve:()=>Za,jumpover:()=>qu,normal:()=>cd,rounded:()=>el,smooth:()=>uc});var O={};h.r(O),h.d(O,{addClass:()=>gc,mask:()=>_i,opacity:()=>aa,stroke:()=>ol});var A={};h.r(A),h.d(A,{connectionClosest:()=>yc,connectionLength:()=>vc,connectionPerpendicular:()=>sa,connectionRatio:()=>iu,resolveRef:()=>Ra});var B={};h.r(B),h.d(B,{anchor:()=>_c,bbox:()=>Cc,boundary:()=>go,rectangle:()=>ai});var H={};h.r(H),h.d(H,{bottom:()=>xd,bottomLeft:()=>Ec,bottomRight:()=>Pc,center:()=>wc,left:()=>Tc,midSide:()=>Ic,modelCenter:()=>fu,perpendicular:()=>cu,right:()=>ts,top:()=>Sc,topLeft:()=>Es,topRight:()=>bd});var k=h(69808),Y=h(32205),ee=h(6741),le=h(53696),o=h(5e3),ae=h(23146),pe=h(83936),de=h(25635),q=h(93075),ve=h(9419),we=h(66206),Ae=h(99848);let _=(()=>{class e{transform(t,r){return t.is_teacher||r.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function ke(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-island",7),o.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),o.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("course",t)("hasViewPermission",o.\u0275\u0275pipeBind2(2,2,r.user,t))}}function $e(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,ke,3,5,"ng-container",6),o.\u0275\u0275pipe(2,"tuiFilter"),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function We(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-island",8),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("skeleton",!0))}const Ke=function(){return[0,0,0,0,0,0]};function Ze(e,n){1&e&&o.\u0275\u0275template(0,We,2,1,"ng-container",6),2&e&&o.\u0275\u0275property("ngForOf",o.\u0275\u0275pureFunction0(1,Ke))}let st=(()=>{class e{constructor(t,r,a){this.authenticationService=t,this.route=r,this.courseService=a,this.STATUS=le.Q,this.courseNameSearch="",this.matchCourseName=(u,d)=>""===d||u.name.toLowerCase().includes(d.toLowerCase()),this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ae.$),o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(pe.N))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),o.\u0275\u0275text(2,"Course List"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"tui-input",2),o.\u0275\u0275listener("ngModelChange",function(u){return r.courseNameSearch=u}),o.\u0275\u0275text(4," Search Courses "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",3),o.\u0275\u0275template(6,$e,3,5,"ng-container",4),o.\u0275\u0275template(7,Ze,1,2,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()()),2&t){const a=o.\u0275\u0275reference(8);o.\u0275\u0275advance(3),o.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",a)}},directives:[de.K3,de.wU,q.NgControlStatus,q.NgModel,ve.be,k.O5,k.sg,we.V],pipes:[Ae.S,_],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class mt{static createForm(){return(new q.FormBuilder).group({code:new q.FormControl("",[q.Validators.required])})}static extractData(n){return n.value}}var Nt=h(4024),Ut=h(769),Ct=h(46693),On=h(96063),gr=h(8871);const Dr=["stepper"];function tr(e,n){1&e&&o.\u0275\u0275element(0,"div",5)}function Wn(e,n){1&e&&o.\u0275\u0275element(0,"div",6)}const vr=function(e){return["/course",e]};function Nn(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",7),o.\u0275\u0275text(2," You are already registered in this course "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8)(4,"a",9),o.\u0275\u0275text(5," Open Course "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(1,vr,t.courseId))}}function Re(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",10),o.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd())}function Ue(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",11),o.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"form",12),o.\u0275\u0275listener("ngSubmit",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).onSubmit()}),o.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),o.\u0275\u0275text(6," Enter verification code\xa0"),o.\u0275\u0275element(7,"span",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(8,"tui-field-error",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",8)(10,"button",17),o.\u0275\u0275text(11," Register "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}if(2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("formGroup",t.form),o.\u0275\u0275advance(2),o.\u0275\u0275property("tuiTextfieldCleaner",!0),o.\u0275\u0275advance(5),o.\u0275\u0275property("showLoader",t.loadingContent)}}function Qe(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"h1",2),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,tr,1,0,"div",3),o.\u0275\u0275template(4,Wn,1,0,"div",4),o.\u0275\u0275template(5,Nn,6,3,"ng-container",1),o.\u0275\u0275template(6,Re,3,0,"ng-container",1),o.\u0275\u0275template(7,Ue,12,3,"ng-container",1),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function lt(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",18),o.\u0275\u0275element(2,"tui-marker-icon",19),o.\u0275\u0275elementStart(3,"h1",20),o.\u0275\u0275text(4," Unable to find the course for registration. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"p",21),o.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementContainerEnd())}let wt=(()=>{class e{constructor(t,r,a,u,d){this.route=t,this.router=r,this.courseService=a,this.changeDetector=u,this.notificationsService=d,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=mt.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1,this.registered=t.course_reg.is_verified,this.blocked=t.course_reg.is_blocked,t.registration_mode===le.J.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const t=mt.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,t).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(ee.F0),o.\u0275\u0275directiveInject(pe.N),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Nt.$F))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Dr,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.stepper=a.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"section",0),o.\u0275\u0275template(1,Qe,8,10,"ng-container",1),o.\u0275\u0275template(2,lt,7,0,"ng-container",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!r.courseNotFound),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[k.O5,Ut.Ls,Ct.v0,ee.yS,q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,de.K3,de.wU,q.NgControlStatus,q.FormControlName,ve.be,On.y,gr.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();var zt=h(37080),yt=h(58259),Bn=h(59695),fi=h.n(Bn),Gt=h(85510),Dt=h.n(Gt),L=h(17489);const{round:U,floor:te,PI:me}=Math,Fe={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},De=function(e){return e%360+(e<0?360:0)},rt=function(e,n){return n*U(e/n)},xt=function(e){return 180*e/me%360},bt=function(e,n){return(e=(n=n||!1)?e:e%360)*me/180},Kt=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return te(Math.random()*(n-e+1)+e)},{cos:on,sin:Wt,atan2:Hn}=Math,kn=function(e,n){var t=bt(e.y),r=bt(n.y),d=bt(n.x-e.x),g=Wt(d)*on(r),i=on(t)*Wt(r)-Wt(t)*on(r)*on(d),f=xt(Hn(g,i))-22.5;return f<0&&(f+=360),["NE","E","SE","S","SW","W","NW","N"][f=parseInt(f/45)]},Fr=function(e,n){var t=e.x,r=e.y;return(t-=n.x)*t+(r-=n.y)*r},xn=function(e,n){return Math.sqrt(Fr(e,n))},pt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:En,cos:Dn,sin:nr,sqrt:Vr,min:Jn,max:$n,atan2:wo,round:ga,pow:ro,PI:So}=Math,ge=function(e,n){if(!(this instanceof ge))return new ge(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};ge.fromPolar=function(e,n,t){t=new ge(t);var r=En(e*Dn(n)),a=En(e*nr(n)),u=De(xt(n));return u<90?a=-a:u<180?(r=-r,a=-a):u<270&&(r=-r),new ge(t.x+r,t.y+a)},ge.random=function(e,n,t,r){return new ge(Kt(e,n),Kt(t,r))},ge.prototype={type:pt.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new ge(e[0]);for(var t=null,r=1/0,a=0;a<n;a++){var u=new ge(e[a]),d=this.squaredDistance(u);d<r&&(t=u,r=d)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Jn($n(this.x,e.x),e.x+e.width),this.y=Jn($n(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return kn(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new ge(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new ge(this.x-(e||0),this.y-(n||0))},distance:function(e){return xn(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new ge((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return Vr(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return En(e.x-this.x)+En(e.y-this.y)},move:function(e,n){var t=bt(new ge(e).theta(this));return this.offset(Dn(t)*n,-nr(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new ge(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new ge(0,0),n=bt(De(-n));var t=Dn(n),r=nr(n),u=r*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=u,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=ro(10,e)}return this.x=ga(this.x*n)/n,this.y=ga(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new ge(t)||new ge(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=rt(this.x,e),this.y=rt(this.y,n||e),this},squaredDistance:function(e){return Fr(this,e)},theta:function(e){e=new ge(e);var r=wo(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*So+r),180*r/So},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ge(e)||new ge(0,0);var n=this.x,t=this.y;return this.x=Vr((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=bt(e.theta(new ge(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new ge(0,0).angleBetween(this,e)}},ge.prototype.translate=ge.prototype.offset;const Xr=ge,{max:Vi,min:To}=Math,ut=function(e,n){return this instanceof ut?e instanceof ut?new ut(e.start,e.end):(this.start=new ge(e),void(this.end=new ge(n))):new ut(e,n)};ut.prototype={type:pt.Line,angle:function(){var e=new ge(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=To(this.start.x,this.end.x),n=To(this.start.y,this.end.y),t=Vi(this.start.x,this.end.x),r=Vi(this.start.y,this.end.y);return new it(e,n,t-e,r-n)},bearing:function(){return kn(this.start,this.end)},clone:function(){return new ut(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new ut(this.start,e).vector()),t=To(1,Vi(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var r=this.length();return!(new ut(n,e).length()>r||new ut(e,t).length()>r)},divideAt:function(e){var n=this.pointAt(e);return[new ut(this.start,n),new ut(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new ut(this.start,n),new ut(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof ut&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new ge(this.end.x-this.start.x,this.end.y-this.start.y),t=new ge(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*t.y-n.y*t.x,a=new ge(e.start.x-this.start.x,e.start.y-this.start.y),u=a.x*t.y-a.y*t.x,d=a.x*n.y-a.y*n.x;if(0===r||u*r<0||d*r<0)return null;if(r>0){if(u>r||d>r)return null}else if(u<r||d<r)return null;return[new ge(this.start.x+u*n.x/r,this.start.y+u*n.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return xn(this.start,this.end)},midpoint:function(){return new ge((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:r}=n,a=t.clone().rotate(r,270),u=r.clone().rotate(t,90);return t.move(u,e),r.move(a,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,r=!0;e<0&&(r=!1,e=-e);var a=this.length();return e>=a?r?t.clone():n.clone():this.pointAt((r?e:a-e)/a)},pointOffset:function(e){e=new ge(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return Fr(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAt(e),a=new ut(n,t);return a.translate(r.x-n.x,r.y-n.y),a},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAtLength(e),a=new ut(n,t);return a.translate(r.x-n.x,r.y-n.y),a},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new ge(this.end.x-this.start.x,this.end.y-this.start.y)}},ut.prototype.intersection=ut.prototype.intersect;const Br=ut,{sqrt:io,round:oo,pow:Bi}=Math,rr=function(e,n,t){return this instanceof rr?e instanceof rr?new rr(new ge(e.x,e.y),e.a,e.b):(e=new ge(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new rr(e,n,t)};rr.fromRect=function(e){return e=new it(e),new rr(e.center(),e.width/2,e.height/2)},rr.prototype={type:pt.Ellipse,bbox:function(){return new it(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ge(this.x,this.y)},clone:function(){return new rr(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,r=e.end,a=this.a,u=this.b,d=e.vector(),g=t.difference(new ge(this)),i=new ge(d.x/(a*a),d.y/(u*u)),s=new ge(g.x/(a*a),g.y/(u*u)),l=d.dot(i),f=d.dot(s),w=f*f-l*(g.dot(s)-1);if(w<0)return null;if(w>0){var M=io(w),z=(-f-M)/l,X=(-f+M)/l;if((z<0||1<z)&&(X<0||1<X))return null;0<=z&&z<=1&&n.push(t.lerp(r,z)),0<=X&&X<=1&&n.push(t.lerp(r,X))}else{var re=-f/l;if(!(0<=re&&re<=1))return null;n.push(t.lerp(r,re))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new ge(e),n&&e.rotate(new ge(this.x,this.y),n);var a,t=e.x-this.x,r=e.y-this.y;if(0===t)return a=this.bbox().pointNearestToPoint(e),n?a.rotate(new ge(this.x,this.y),-n):a;var u=r/t,s=io(1/(1/(this.a*this.a)+u*u/(this.b*this.b)));return a=new ge(this.x+(s=t<0?-s:s),this.y+u*s),n?a.rotate(new ge(this.x,this.y),-n):a},normalizedDistance:function(e){var n=e.x,t=e.y,r=this.a,a=this.b,u=this.x,d=this.y;return(n-u)*(n-u)/(r*r)+(t-d)*(t-d)/(a*a)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Bi(10,e)}return this.x=oo(this.x*n)/n,this.y=oo(this.y*n)/n,this.a=oo(this.a*n)/n,this.b=oo(this.b*n)/n,this},tangentTheta:function(e){var f,y,t=e.x,r=e.y,a=this.a,u=this.b,d=this.bbox().center(),g=d.x,i=d.y;return t>d.x+a/2||t<d.x-a/2?y=a*a/(t-g)-a*a*(r-i)*((f=t>d.x?r-30:r+30)-i)/(u*u*(t-g))+g:f=u*u/(r-i)-u*u*(t-g)*((y=r>d.y?t+30:t-30)-g)/(a*a*(r-i))+i,new ge(y,f).theta(e)},toString:function(){return new ge(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Eo=rr,{abs:mr,cos:va,sin:ma,min:Er,max:Wo,round:Hi,pow:$o}=Math,it=function(e,n,t,r){if(!(this instanceof it))return new it(e,n,t,r);Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===r?0:r};it.fromEllipse=function(e){return e=new rr(e),new it(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},it.fromPointUnion=function(...e){if(0===e.length)return null;const n=new ge;let t,r,a,u;t=r=1/0,a=u=-1/0;for(let d=0;d<e.length;d++){n.update(e[d]);const g=n.x,i=n.y;g<t&&(t=g),g>a&&(a=g),i<r&&(r=i),i>u&&(u=i)}return new it(t,r,a-t,u-r)},it.fromRectUnion=function(...e){if(0===e.length)return null;const n=new it;let t,r,a,u;t=r=1/0,a=u=-1/0;for(let d=0;d<e.length;d++){n.update(e[d]);const g=n.x,i=n.y,s=g+n.width,l=i+n.height;g<t&&(t=g),s>a&&(a=s),i<r&&(r=i),l>u&&(u=l)}return new it(t,r,a-t,u-r)},it.prototype={type:pt.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,r=bt(e),a=mr(ma(r)),u=mr(va(r)),d=n*u+t*a,g=n*a+t*u;return this.x+=(n-d)/2,this.y+=(t-g)/2,this.width=d,this.height=g,this},bottomLeft:function(){return new ge(this.x,this.y+this.height)},bottomLine:function(){return new ut(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ge(this.x+this.width/2,this.y+this.height)},center:function(){return new ge(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new it(this)},containsPoint:function(e){return(e=new ge(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new it(this).normalize(),t=new it(e).normalize(),r=n.width,a=n.height,u=t.width,d=t.height;if(!(r&&a&&u&&d))return!1;var g=n.x,i=n.y,s=t.x,l=t.y;return u+=s,r+=g,d+=l,a+=i,g<=s&&u<=r&&i<=l&&d<=a},corner:function(){return new ge(this.x+this.width,this.y+this.height)},equals:function(e){var n=new it(this).normalize(),t=new it(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),r=e.origin(),a=e.corner();if(a.x<=n.x||a.y<=n.y||r.x>=t.x||r.y>=t.y)return null;var u=Wo(n.x,r.x),d=Wo(n.y,r.y);return new it(u,d,Er(t.x,a.x)-u,Er(t.y,a.y)-d)},intersectionWithLine:function(e){var u,d,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],r=[],a=[],g=t.length;for(d=0;d<g;d++)null!==(u=e.intersect(t[d]))&&a.indexOf(u.toString())<0&&(r.push(u),a.push(u.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new ge(e);var r,t=new ge(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var a=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],u=new ut(t,e),d=a.length-1;d>=0;--d){var g=a[d].intersection(u);if(null!==g){r=g;break}}return r&&n&&r.rotate(t,-n),r},leftLine:function(){return new ut(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ge(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new it(e),n||(n=e.center());var t,r,a,u,d,g,i,s,l=n.x,f=n.y;t=r=a=u=d=g=i=s=1/0;var y=e.topLeft();y.x<l&&(t=(this.x-l)/(y.x-l)),y.y<f&&(d=(this.y-f)/(y.y-f));var w=e.bottomRight();w.x>l&&(r=(this.x+this.width-l)/(w.x-l)),w.y>f&&(g=(this.y+this.height-f)/(w.y-f));var M=e.topRight();M.x>l&&(a=(this.x+this.width-l)/(M.x-l)),M.y<f&&(i=(this.y-f)/(M.y-f));var z=e.bottomLeft();return z.x<l&&(u=(this.x-l)/(z.x-l)),z.y>f&&(s=(this.y+this.height-f)/(z.y-f)),{sx:Er(t,r,a,u),sy:Er(d,g,i,s)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return Er(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,r=-this.height),this.x=e,this.y=n,this.width=t,this.height=r,this},offset:function(e,n){return ge.prototype.offset.call(this,e,n)},origin:function(){return new ge(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ge(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new ge(this.x+this.width,e.y);case"left":return new ge(this.x,e.y);case"bottom":return new ge(e.x,this.y+this.height);case"top":return new ge(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new ut(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ge(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=$o(10,e)}return this.x=Hi(this.x*n)/n,this.y=Hi(this.y*n)/n,this.width=Hi(this.width*n)/n,this.height=Hi(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new ge(e);var t=this.x+this.width-e.x,r=e.y-this.y,u=e.x-this.x,d="left";return t<u&&(u=t,d="right"),r<u&&(u=r,d="top"),this.y+this.height-e.y<u&&(d="bottom"),d},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),r=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=r.x-t.x,this.height=r.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new ut(this.topLeft(),this.topRight())},topMiddle:function(){return new ge(this.x+this.width/2,this.y)},topRight:function(){return new ge(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return it.fromRectUnion(this,e)},update:function(e,n,t,r){return Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=r||0,this}},it.prototype.bottomRight=it.prototype.corner,it.prototype.topLeft=it.prototype.origin,it.prototype.translate=it.prototype.offset;const Ua=it;function Si(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),r=t.length;for(let a=0;a<r;a+=2)n.push({x:+t[a],y:+t[a+1]});return n}function ya(e){const n=e.length;if(0===n)return[];const t=[];for(let r=0;r<n;r++){const a=e[r].clone();t.push(a)}return t}function xa(e){const{abs:n}=Math;var t,r,u,a=e.length;if(0===a)return[];for(t=0;t<a;t++)(void 0===u||e[t].y<u.y||e[t].y===u.y&&e[t].x>u.x)&&(u=e[t]);var d=[];for(t=0;t<a;t++){var g=u.theta(e[t]);0===g&&(g=360),d.push([e[t],t,g])}d.sort(function(Xe,Je){var nt=Xe[2]-Je[2];return 0===nt&&(nt=Je[1]-Xe[1]),nt}),d.length>2&&d.unshift(d[d.length-1]);for(var y,w,M,z,X,re,l={},f=[];0!==d.length;)if(w=(y=d.pop())[0],!l.hasOwnProperty(y[0]+"@@"+y[1]))for(var ne=!1;!ne;)if(f.length<2)f.push(y),ne=!0;else{z=(M=f.pop())[0];var T=(re=(X=f.pop())[0]).cross(z,w);if(T<0)f.push(X),f.push(M),f.push(y),ne=!0;else if(0===T){var j=z.angleBetween(re,w);n(j-180)<1e-10||z.equals(w)||re.equals(z)?(l[M[0]+"@@"+M[1]]=z,f.push(X)):n((j+1)%360-1)<1e-10&&(f.push(X),d.push(M))}else l[M[0]+"@@"+M[1]]=z,f.push(X)}f.length>2&&f.pop();var Z,ie=-1;for(r=f.length,t=0;t<r;t++){var he=f[t][1];(void 0===Z||he<Z)&&(Z=he,ie=t)}var ye=[];if(ie>0){var Ee=f.slice(ie),Ge=f.slice(0,ie);ye=Ee.concat(Ge)}else ye=f;var ze=[];for(r=ye.length,t=0;t<r;t++)ze.push(ye[t][0]);return ze}const bn=function(e){return this instanceof bn?"string"==typeof e?new bn.parse(e):void(this.points=Array.isArray(e)?e.map(ge):[]):new bn(e)};bn.parse=function(e){return new bn(Si(e))},bn.fromRect=function(e){return new bn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},bn.prototype={type:pt.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,r=-1/0,a=this.points,u=a.length;if(0===u)return null;for(var d=0;d<u;d++){var g=a[d],i=g.x,s=g.y;i<e&&(e=i),i>n&&(n=i),s<t&&(t=s),s>r&&(r=s)}return new it(e,t,n-e,r-t)},clone:function(){return new bn(ya(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var r,a=1/0,u=0,d=t-1,g=0;g<d;g++){var i=new ut(n[g],n[g+1]),s=i.length(),l=i.closestPointNormalizedLength(e),y=i.pointAt(l).squaredDistance(e);y<a&&(a=y,r=u+l*s),u+=s}return r},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var r=e.x,a=e.y,u=t-1,d=0,g=0,i=new ut,s=new ut,l=new ge;d<t;d++){var f=n[u],y=n[d];if(e.equals(f)||(i.start=f,i.end=y,i.containsPoint(e)))return!0;if(a<=f.y&&a>y.y||a>f.y&&a<=y.y){var w=f.x-r>y.x-r?f.x-r:y.x-r;w>=0&&(l.x=r+w,l.y=a,s.start=e,s.end=l,i.intersect(s)&&g++)}u=d}return g%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new bn(xa(this.points))},equals:function(e){if(!e)return!1;var n=this.points,r=n.length;if(e.points.length!==r)return!1;for(var a=0;a<r;a++)if(!n[a].equals(e.points[a]))return!1;return!0},intersectionWithLine:function(e){for(var n=new ut(e),t=[],r=this.lengthPoints(),a=new ut,u=0,d=r.length-1;u<d;u++){a.start=r[u],a.end=r[u+1];var g=n.intersectionWithLine(a);g&&t.push(g[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new ut,r=n-1,a=0;a<r;a++)if(t.start=e[a],t.end=e[a+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,r=n-1,a=0;a<r;a++)t+=e[a].distance(e[a+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var a=0,u=t-1,d=0;d<u;d++){var g=r?d:u-1-d,i=n[g],s=n[g+1],l=new ut(i,s),f=i.distance(s);if(e<=a+f)return l.pointAtLength((r?1:-1)*(e-a));a+=f}return(r?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.points,a=r.length,u=0;u<a;u++)r[u].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let r=0;for(;n[r+2];){const u=r+1,i=n[u];new ut(n[r],n[r+2]).closestPoint(i).distance(i)<=t?n.splice(u,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var r=!0;e<0&&(r=!1,e=-e);for(var a,u=0,d=t-1,g=0;g<d;g++){var i=r?g:d-1-g,s=n[i],l=n[i+1],f=new ut(s,l),y=s.distance(l);if(f.isDifferentiable()){if(e<=u+y)return f.tangentAtLength((r?1:-1)*(e-u));a=f}u+=y}return a?a.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,r=t.length,a=0;a<r;a++)t[a].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",r=0;r<n;r++){var a=e[r];t+=a.x+","+a.y+" "}return t.trim()}},Object.defineProperty(bn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(bn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:Po,sqrt:hs,min:Ti,max:ji,pow:Ei}=Math,Ft=function(e,n,t,r){return this instanceof Ft?e instanceof Ft?new Ft(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new ge(e),this.controlPoint1=new ge(n),this.controlPoint2=new ge(t),void(this.end=new ge(r))):new Ft(e,n,t,r)};function Hr(e){var n,t,r=[];for(t=arguments.length,n=1;n<t;n++)r.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var a=Object.create(e);for(t=r.length,n=0;n<t;n++){var d,g,u=r[n];for(g in u)u.hasOwnProperty(g)&&(delete a[g],d=Object.getOwnPropertyDescriptor(u,g),Object.defineProperty(a,g,d))}return a}Ft.throughPoints=function(){function n(t){var r=t.length,a=[],u=[],d=2;a[0]=t[0]/d;for(var g=1;g<r;g++)u[g]=1/d,a[g]=(t[g]-a[g-1])/(d=(g<r-1?4:3.5)-u[g]);for(g=1;g<r;g++)a[r-g-1]-=u[r-g]*a[r-g];return a}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function e(t){var d,r=[],a=[],u=t.length-1;if(1==u)return r[0]=new ge((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),a[0]=new ge(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,a];var g=[];for(d=1;d<u-1;d++)g[d]=4*t[d].x+2*t[d+1].x;g[0]=t[0].x+2*t[1].x,g[u-1]=(8*t[u-1].x+t[u].x)/2;var i=n(g);for(d=1;d<u-1;++d)g[d]=4*t[d].y+2*t[d+1].y;g[0]=t[0].y+2*t[1].y,g[u-1]=(8*t[u-1].y+t[u].y)/2;var s=n(g);for(d=0;d<u;d++)r.push(new ge(i[d],s[d])),a.push(d<u-1?new ge(2*t[d+1].x-i[d+1],2*t[d+1].y-s[d+1]):new ge((t[u].x+i[u-1])/2,(t[u].y+s[u-1])/2));return[r,a]}(t),a=[],u=r[0].length,d=0;d<u;d++){var g=new ge(r[0][d].x,r[0][d].y),i=new ge(r[1][d].x,r[1][d].y);a.push(new Ft(t[d],g,i,t[d+1]))}return a}}(),Ft.prototype={type:pt.Curve,bbox:function(){for(var z,X,re,ne,T,R,j,Z,e=this.start,n=this.controlPoint1,t=this.controlPoint2,r=this.end,a=e.x,u=e.y,d=n.x,g=n.y,i=t.x,s=t.y,l=r.x,f=r.y,y=new Array,w=new Array,M=[new Array,new Array],ie=0;ie<2;++ie)if(0===ie?(X=6*a-12*d+6*i,z=-3*a+9*d-9*i+3*l,re=3*d-3*a):(X=6*u-12*g+6*s,z=-3*u+9*g-9*s+3*f,re=3*g-3*u),Po(z)<1e-12){if(Po(X)<1e-12)continue;0<(ne=-re/X)&&ne<1&&w.push(ne)}else Z=hs(j=X*X-4*re*z),!(j<0)&&(0<(T=(-X+Z)/(2*z))&&T<1&&w.push(T),0<(R=(-X-Z)/(2*z))&&R<1&&w.push(R));for(var Ee,Ge,ze,he=w.length,ye=he;he--;)M[0][he]=Ge=(Ee=1-(ne=w[he]))*Ee*Ee*a+3*Ee*Ee*ne*d+3*Ee*ne*ne*i+ne*ne*ne*l,M[1][he]=ze=Ee*Ee*Ee*u+3*Ee*Ee*ne*g+3*Ee*ne*ne*s+ne*ne*ne*f,y[he]={X:Ge,Y:ze};w[ye]=0,w[ye+1]=1,y[ye]={X:a,Y:u},y[ye+1]={X:l,Y:f},M[0][ye]=a,M[1][ye]=u,M[0][ye+1]=l,M[1][ye+1]=f,w.length=ye+2,M[0].length=ye+2,M[1].length=ye+2,y.length=ye+2;var Xe=Ti.apply(null,M[0]),Je=Ti.apply(null,M[1]),nt=ji.apply(null,M[0]),ht=ji.apply(null,M[1]);return new it(Xe,Je,nt-Xe,ht-Je)},clone:function(){return new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,a),a)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},u=this.closestPointLength(e,a);if(!u)return 0;var d=this.length(a);return 0===d?0:u/d},closestPointT:function(e,n){for(var a,u,d,g,i,s,l,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,r=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,f=r.length,y=f?1/f:0,w=0;w<f;w++){var M=r[w],z=M.start.distance(e),X=M.end.distance(e),re=z+X;(!l||re<l)&&(a=M,u=w*y,d=(w+1)*y,g=z,i=X,s=M.start.distance(M.end),l=re)}for(var ne=Ei(10,-t);;){var T=g?Po(g-i)/g:0,R=i?Po(g-i)/i:0;if(T<ne||R<ne||!g||g<s*ne||!i||i<s*ne)return g<=i?u:d;var ye=a.divide(.5);y/=2;var Ee=ye[0].start.distance(e),Ge=ye[0].end.distance(e),ze=Ee+Ge,Xe=ye[1].start.distance(e),Je=ye[1].end.distance(e);ze<=Xe+Je?(a=ye[0],d-=y,g=Ee,i=Ge):(a=ye[1],u+=y,g=Xe,i=Je)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,a=this.end;if(e<=0)return[new Ft(n,n,n,n),new Ft(n,t,r,a)];if(e>=1)return[new Ft(n,t,r,a),new Ft(a,a,a,a)];var u=this.getSkeletonPoints(e),i=u.divider,s=u.dividerControlPoint1,l=u.dividerControlPoint2;return[new Ft(n,u.startControlPoint1,u.startControlPoint2,i),new Ft(i,s,l,a)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,a=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:r.clone(),divider:a.clone(),dividerControlPoint1:a.clone(),dividerControlPoint2:a.clone()};var u=new ut(n,t).pointAt(e),d=new ut(t,r).pointAt(e),g=new ut(r,a).pointAt(e),i=new ut(u,d).pointAt(e),s=new ut(d,g).pointAt(e);return{startControlPoint1:u,startControlPoint2:i,divider:new ut(i,s).pointAt(e),dividerControlPoint1:s,dividerControlPoint2:g}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var r=this.endpointDistance(),a=Ei(10,-n),u=0;;){u+=1;for(var d=[],g=t.length,i=0;i<g;i++){var l=t[i].divide(.5);d.push(l[0],l[1])}for(var f=0,y=d.length,w=0;w<y;w++)f+=d[w].endpointDistance();if(u>1&&(0!==f?(f-r)/f:0)<a)return d;t=d,r=f}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,a=t.length,u=0;u<a;u++)r+=t[u].endpointDistance();return r},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,a=n.divider,u=new ut(t,n.dividerControlPoint1);return u.translate(a.x-t.x,a.y-t.y),u},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},u=this.length(a);return this.tAtLength(u*e,a)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var d,g,i,s,l,r=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a=void 0===n.subdivisions?this.getSubdivisions({precision:r}):n.subdivisions,u={precision:r,subdivisions:a},f=0,y=a.length,w=1/y,M=0;M<y;M++){var z=t?M:y-1-M,X=a[M],re=X.endpointDistance();if(e<=f+re){d=X,g=z*w,i=(z+1)*w,s=t?e-f:re+f-e,l=t?re+f-e:e-f;break}f+=re}if(!d)return t?1:0;for(var ne=this.length(u),T=Ei(10,-r);;){if((0!==ne?s/ne:0)<T)return g;if((0!==ne?l/ne:0)<T)return i;var j,Z,ie=d.divide(.5);w/=2;var he=ie[0].endpointDistance(),ye=ie[1].endpointDistance();s<=he?(d=ie[0],i-=w,Z=he-(j=s)):(d=ie[1],g+=w,Z=ye-(j=s-he)),s=j,l=Z}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[t[0].start.clone()],a=t.length,u=0;u<a;u++)r.push(t[u].end.clone());return r},toPolyline:function(e){return new bn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},Ft.prototype.divide=Ft.prototype.divideAtT;const gt=function(e){if(!(this instanceof gt))return new gt(e);if("string"==typeof e)return new gt.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(g,i){return g.concat(i)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var a=null;for(n=0;n<t;n++){var u=e[n];if(!(u instanceof ut||u instanceof Ft))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(gt.createSegment("M",u.start)),a&&!a.end.equals(u.start)&&this.appendSegment(gt.createSegment("M",u.start)),u instanceof ut?this.appendSegment(gt.createSegment("L",u.end)):u instanceof Ft&&this.appendSegment(gt.createSegment("C",u.controlPoint1,u.controlPoint2,u.end)),a=u}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof ut)this.appendSegment(gt.createSegment("M",e.start)),this.appendSegment(gt.createSegment("L",e.end));else if(e instanceof Ft)this.appendSegment(gt.createSegment("M",e.start)),this.appendSegment(gt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof bn))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(gt.createSegment(0===n?"M":"L",e.points[n]))}}};function Pr(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}gt.parse=function(e){if(!e)return new gt;for(var n=new gt,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),a=r.length,u=0;u<a;u++){var i=r[u].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=gt.createSegment.apply(this,i);n.appendSegment(s)}return n},gt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=gt.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],r=arguments.length,a=1;a<r;a++)t.push(arguments[a]);return Pr(n,t)},gt.prototype={type:pt.Path,appendSegment:function(e){var r,n=this.segments,t=n.length,a=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(s,l){return s.concat(l)},[]))[0].isSegment)throw new Error("Segments required.");for(var d=e.length,g=0;g<d;g++)r=this.prepareSegment(e[g],a,null),n.push(r),a=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,a,null),n.push(r)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,r=0;r<n;r++){var a=e[r];if(a.isVisible){var u=a.bbox();t=t?t.union(u):u}}if(t)return t;var d=e[n-1];return new it(d.end.x,d.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new gt,r=0;r<n;r++){var a=e[r].clone();t.appendSegment(a)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},u=this.closestPointT(e,a);return u?this.lengthAtT(u,a):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,a={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},u=this.closestPointLength(e,a);if(0===u)return 0;var d=this.length(a);return 0===d?0:u/d},closestPointT:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var d,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,g=1/0,i=0;i<r;i++){var s=t[i];if(s.isVisible){var f=s.closestPointT(e,{precision:a,subdivisions:u[i]}),y=s.pointAtT(f),w=new ut(y,e).squaredLength();w<g&&(d={segmentIndex:i,value:f},g=w)}}return d||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var d,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,g=1/0,i=0;i<r;i++){var s=t[i],l=u[i];if(s.isDifferentiable()){var f=s.closestPointT(e,{precision:a,subdivisions:l}),y=s.pointAtT(f),w=new ut(y,e).squaredLength();w<g&&(d=s.tangentAtT(f),g=w)}}return d||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var r=t.length,a=0,u=0;u<r;u++)t[u].containsPoint(e)&&a++;return a%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},g=this.length(d);return this.divideAtLength(g*e,d)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var r=!0;e<0&&(r=!1,e=-e);var d,g,s,l,f,y,a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,u=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions,i=0;for(d=0;d<t;d++){var M=r?d:t-1-d;g=this.getSegment(M);var z=u[M],X=g.length({precision:a,subdivisions:z});if(g.isDifferentiable()&&(f=g,y=M,e<=i+X)){l=M,s=g.divideAtLength((r?1:-1)*(e-i),{precision:a,subdivisions:z});break}i+=X}if(!f)return null;s||(l=y,s=f.divideAtT(r?1:0));var re=this.clone();re.replaceSegment(l,s);var ne=l,T=l+1,R=l+2;s[0].isDifferentiable()||(re.removeSegment(ne),T-=1,R-=1);var j=re.getSegment(T).start;re.insertSegment(T,gt.createSegment("M",j)),R+=1,s[1].isDifferentiable()||(re.removeSegment(R-1),R-=1);var Z=R-ne-1;for(d=R;d<re.segments.length;d++){var ie=this.getSegment(d-Z);if("Z"===(g=re.getSegment(d)).type&&!ie.subpathStartSegment.end.equals(g.subpathStartSegment.end)){var he=gt.createSegment("L",ie.end);re.replaceSegment(d,he)}}return[new gt(re.segments.slice(0,T)),new gt(re.segments.slice(T))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,r=n.length;if(t.length!==r)return!1;for(var a=0;a<r;a++){var u=n[a],d=t[a];if(u.type!==d.type||!u.equals(d))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=[],u=0;u<t;u++){var g=n[u].getSubdivisions({precision:r});a.push(g)}return a},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,r=[];for(let a=0;a<t;a++){const u=n[a];u.isSubpathStart?r.push(new gt(u)):r[r.length-1].appendSegment(u)}return r},insertSegment:function(e,n){var t=this.segments,r=t.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var a,u=null,d=null;if(0!==r&&(d=e>=1?(u=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(l,f){return l.concat(f)},[]))[0].isSegment)throw new Error("Segments required.");for(var g=n.length,i=0;i<g;i++)a=this.prepareSegment(n[i],u,d),t.splice(e+i,0,a),u=a}else{if(!n||!n.isSegment)throw new Error("Segment required.");a=this.prepareSegment(n,u,d),t.splice(e,0,a)}},intersectionWithLine:function(e,n){var t=null,r=this.toPolylines(n);if(!r)return null;for(var a=0,u=r.length;a<u;a++){var g=e.intersect(r[a]);g&&(t||(t=[]),Array.isArray(g)?Array.prototype.push.apply(t,g):t.push(g))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var a=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=0,d=0;d<t;d++)u+=n[d].length({subdivisions:a[d]});return u},lengthAtT:function(e,n){var t=this.segments,r=t.length;if(0===r)return 0;var a=e.segmentIndex;if(a<0)return 0;var u=e.value;a>=r?(a=r-1,u=1):u<0?u=0:u>1&&(u=1);for(var d=void 0===(n=n||{}).precision?this.PRECISION:n.precision,g=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:d}):n.segmentSubdivisions,s=0,l=0;l<a;l++){var f=t[l];s+=f.length({precisison:d,subdivisions:g[l]})}return s+(f=t[a]).lengthAtT(u,{precisison:d,subdivisions:g[a]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},g=this.length(d);return this.pointAtLength(g*e,d)},pointAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;if(0===e)return this.start.clone();var a=!0;e<0&&(a=!1,e=-e);for(var g,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,i=0,s=0;s<r;s++){var l=a?s:r-1-s,f=t[l],y=d[l],w=f.length({precision:u,subdivisions:y});if(f.isVisible){if(e<=i+w)return f.pointAtLength((a?1:-1)*(e-i),{precision:u,subdivisions:y});g=f}i+=w}return g?a?g.end:g.start:t[r-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].pointAtT(0);if(r>=t)return n[t-1].pointAtT(1);var a=e.value;return a<0?a=0:a>1&&(a=1),n[r].pointAtT(a)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=t),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var r=n.splice(e,1)[0],a=r.previousSegment,u=r.nextSegment;a&&(a.nextSegment=u),u&&(u.previousSegment=a),r.isSubpathStart&&u&&this.updateSubpathStartSegment(u)},replaceSegment:function(e,n){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var a,u=t[e],d=u.previousSegment,g=u.nextSegment,i=u.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(y,w){return y.concat(w)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var s=n.length,l=0;l<s;l++)a=this.prepareSegment(n[l],d,g),t.splice(e+l,0,a),d=a,i&&a.isSubpathStart&&(i=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");a=this.prepareSegment(n,d,g),t.splice(e,1,a),i&&a.isSubpathStart&&(i=!1)}i&&g&&this.updateSubpathStartSegment(g)},round:function(e){for(var n=this.segments,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.segments,a=r.length,u=0;u<a;u++)r[u].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},g=this.length(d);return this.segmentIndexAtLength(g*e,d)},segmentIndexAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var a=!0;e<0&&(a=!1,e=-e);for(var u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,g=null,i=0,s=0;s<r;s++){var l=a?s:r-1-s,f=t[l],w=f.length({precision:u,subdivisions:d[l]});if(f.isVisible){if(e<=i+w)return l;g=l}i+=w}return g},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var a=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d={precision:a,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):n.segmentSubdivisions},g=this.length(d);return this.tangentAtLength(g*e,d)},tangentAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var a=!0;e<0&&(a=!1,e=-e);for(var g,u=void 0===(n=n||{}).precision?this.PRECISION:n.precision,d=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:u}):n.segmentSubdivisions,i=0,s=0;s<r;s++){var l=a?s:r-1-s,f=t[l],y=d[l],w=f.length({precision:u,subdivisions:y});if(f.isDifferentiable()){if(e<=i+w)return f.tangentAtLength((a?1:-1)*(e-i),{precision:u,subdivisions:y});g=f}i+=w}return g?g.tangentAtT(a?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].tangentAtT(0);if(r>=t)return n[t-1].tangentAtT(1);var a=e.value;return a<0?a=0:a>1&&(a=1),n[r].tangentAtT(a)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var a=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,u=[],d=[],g=0;g<t;g++){var i=n[g];if(i.isVisible){var s=a[g];if(s.length>0){var l=s.map(function(f){return f.start});Array.prototype.push.apply(d,l)}else d.push(i.start)}else d.length>0&&(d.push(n[g-1].end),u.push(d),d=[])}return d.length>0&&(d.push(this.end),u.push(d)),u},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var r=0,a=t.length;r<a;r++)n.push(new bn(t[r]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",r=0;r<n;r++)t+=e[r].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,r=t.length,a=0;a<r;a++)t[a].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,gt.createSegment("M",0,0)),this}},Object.defineProperty(gt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var r=e[t];if(r.isVisible)return r.start}return e[n-1].end}}),Object.defineProperty(gt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var r=e[t];if(r.isVisible)return r.end}return e[n-1].end}});var di={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(di,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(di,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(di,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var nn=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof nn))return Pr(nn,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof ut){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ge(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var a;for(r=[],t=0;t<n;t+=2)a=e.slice(t,t+2),r.push(Pr(nn,a));return r}if(1===n)return this.end=new ge(e[0]),this;for(r=[],t=0;t<n;t+=1)r.push(new nn(e[t]));return r},Pi={clone:function(){return new nn(this.end)},divideAt:function(e){var t=new ut(this.start,this.end).divideAt(e);return[new nn(t[0]),new nn(t[1])]},divideAtLength:function(e){var t=new ut(this.start,this.end).divideAtLength(e);return[new nn(t[0]),new nn(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(Pi,"type",{configurable:!0,enumerable:!0,value:"L"}),nn.prototype=Hr(di,ut.prototype,Pi);var dr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof dr))return Pr(dr,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,u;if(e[0]instanceof Ft){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new ge(+e[0],+e[1]),this.controlPoint2=new ge(+e[2],+e[3]),this.end=new ge(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var a;for(r=[],t=0;t<n;t+=6)a=e.slice(t,t+6),r.push(Pr(dr,a));return r}if(3===n)return this.controlPoint1=new ge(e[0]),this.controlPoint2=new ge(e[1]),this.end=new ge(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(r=[],t=0;t<n;t+=3)u=e.slice(t,t+3),r.push(Pr(dr,u));return r},ba={clone:function(){return new dr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var r=new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new dr(r[0]),new dr(r[1])]},divideAtLength:function(e,n){var r=new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new dr(r[0]),new dr(r[1])]},divideAtT:function(e){var t=new Ft(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new dr(t[0]),new dr(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(ba,"type",{configurable:!0,enumerable:!0,value:"C"}),dr.prototype=Hr(di,Ft.prototype,ba);var Ii=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Ii))return Pr(Ii,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,u;if(e[0]instanceof ut){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof Ft){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new ge(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var a;for(r=[],t=0;t<n;t+=2)a=e.slice(t,t+2),r.push(Pr(0===t?Ii:nn,a));return r}if(1===n)return this.end=new ge(e[0]),this;for(r=[],t=0;t<n;t+=1)u=e[t],r.push(0===t?new Ii(u):new nn(u));return r},Ai={bbox:function(){return null},clone:function(){return new Ii(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(Ai,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Ai,"type",{configurable:!0,enumerable:!0,value:"M"}),Ii.prototype=Hr(di,Ai);var hi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof hi))return Pr(hi,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},Mi={clone:function(){return new hi},divideAt:function(e){var t=new ut(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new nn(t[0]):this.clone(),new nn(t[1])]},divideAtLength:function(e){var t=new ut(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new nn(t[0]):this.clone(),new nn(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Mi,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Mi,"type",{configurable:!0,enumerable:!0,value:"Z"}),hi.prototype=Hr(di,ut.prototype,Mi);var Io=gt.segmentTypes={L:nn,C:dr,M:Ii,Z:hi,z:hi};gt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Io).join("")+",.]*$"),gt.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const Ga={curveThroughPoints:function(e){return console.warn("deprecated"),new gt(Ft.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var a,n=[],t=[],r=e.length-1;if(1==r)return n[0]=new ge((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new ge(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var u=[];for(a=1;a<r-1;a++)u[a]=4*e[a].x+2*e[a+1].x;u[0]=e[0].x+2*e[1].x,u[r-1]=(8*e[r-1].x+e[r].x)/2;var d=this.getFirstControlPoints(u);for(a=1;a<r-1;++a)u[a]=4*e[a].y+2*e[a+1].y;u[0]=e[0].y+2*e[1].y,u[r-1]=(8*e[r-1].y+e[r].y)/2;var g=this.getFirstControlPoints(u);for(a=0;a<r;a++)n.push(new ge(d[a],g[a])),t.push(a<r-1?new ge(2*e[a+1].x-d[a+1],2*e[a+1].y-g[a+1]):new ge((e[r].x+d[r-1])/2,(e[r].y+g[r-1])/2));return[n,t]},getCurveDivider:function(e,n,t,r){console.warn("deprecated");var a=new Ft(e,n,t,r);return function(d){var g=a.divide(d);return[{p0:g[0].start,p1:g[0].controlPoint1,p2:g[0].controlPoint2,p3:g[0].end},{p0:g[1].start,p1:g[1].controlPoint1,p2:g[1].controlPoint2,p3:g[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],r=[],a=2;t[0]=e[0]/a;for(var u=1;u<n;u++)r[u]=1/a,t[u]=(e[u]-t[u-1])/(a=(u<n-1?4:3.5)-r[u]);for(u=1;u<n;u++)t[n-u-1]-=r[n-u]*t[n-u];return t},getInversionSolver:function(e,n,t,r){console.warn("deprecated");var a=new Ft(e,n,t,r);return function(d){return a.closestPointT(d)}}},yr=function(e){return this instanceof yr?"string"==typeof e?new yr.parse(e):void(this.points=Array.isArray(e)?e.map(ge):[]):new yr(e)};function ir(e,n,t,r){switch(e.type){case pt.Line:if(n.type===pt.Line)return or(e,n);break;case pt.Ellipse:switch(n.type){case pt.Line:return Or(e,n);case pt.Ellipse:return Yo(e,n)}break;case pt.Rect:switch(n.type){case pt.Line:return Ao(e,n);case pt.Ellipse:return Kr(e,n);case pt.Rect:return Ir(e,n)}break;case pt.Polyline:switch(n.type){case pt.Line:return Oi(e,n);case pt.Ellipse:return ao(e,n);case pt.Rect:return kr(e,n);case pt.Polyline:return ki(e,n)}break;case pt.Polygon:switch(n.type){case pt.Line:return ni(e,n);case pt.Ellipse:return zi(e,n);case pt.Rect:return Xo(e,n);case pt.Polyline:return Ko(e,n);case pt.Polygon:return Mo(e,n)}break;case pt.Path:switch(n.type){case pt.Line:return so(e,n,t);case pt.Ellipse:return _a(e,n,t);case pt.Rect:return Jo(e,n,t);case pt.Polyline:return Ca(e,n,t);case pt.Polygon:return Qo(e,n,t);case pt.Path:return wa(e,n,t,r)}}switch(n.type){case pt.Ellipse:case pt.Rect:case pt.Polyline:case pt.Polygon:case pt.Path:return ir(n,e,r,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function or(e,n){const t=e.start.x,r=e.start.y,d=n.start.x,g=n.start.y,l=e.end.x-t,f=e.end.y-r,y=n.end.x-d,w=n.end.y-g,M=t-d,z=r-g,X=l*w-y*f,re=(l*z-f*M)/X,ne=(y*z-w*M)/X;return re>=0&&re<=1&&ne>=0&&ne<=1}function Or(e,n){const t=e.a,r=e.b,a=e.x,u=e.y,d=n.start.x-a,i=n.start.y-u,l=t*t,f=r*r,y=n.end.x-a-d,w=n.end.y-u-i,M=y*y/l+w*w/f,z=2*d*y/l+2*i*w/f,re=z*z-4*M*(d*d/l+i*i/f-1);if(0===re){const ne=-z/2/M;return ne>=0&&ne<=1}if(re>0){const ne=Math.sqrt(re),T=(-z+ne)/2/M,R=(-z-ne)/2/M;return T>=0&&T<=1||R>=0&&R<=1}return!1}function Yo(e,n){return function $a(e,n,t,r){const{cos:a,sin:u}=Math,d=u(n),g=a(n),i=u(r),s=a(r),l=d*d,f=g*g,w=i*i,M=s*s,X=e.a*e.a,re=e.b*e.b,ne=t.a*t.a,T=t.b*t.b,R=X*l+re*f,j=ne*w+T*M,Z=X*f+re*l,ie=ne*M+T*w;let he=2*(re-X)*(d*g),ye=2*(T-ne)*(i*s),Ee=-2*R*e.x-he*e.y,Ge=-2*j*t.x-ye*t.y,ze=-he*e.x-2*Z*e.y,Xe=-ye*t.x-2*ie*t.y;const Je=R*e.x*e.x+Z*e.y*e.y+he*e.x*e.y-X*re,nt=j*t.x*t.x+ie*t.y*t.y+ye*t.x*t.y-ne*T;he/=2,ye/=2,Ee/=2,Ge/=2,ze/=2,Xe/=2;const ht=pi([[R,he,Ee],[he,Z,ze],[Ee,ze,Je]]),Cn=pi([[j,ye,Ge],[ye,ie,Xe],[Ge,Xe,nt]]),yn=.33333333*(pi([[j,he,Ee],[ye,Z,ze],[Ge,ze,Je]])+pi([[R,ye,Ee],[he,ie,ze],[Ee,Xe,Je]])+pi([[R,he,Ge],[he,Z,Xe],[Ee,ze,nt]])),Rn=.33333333*(pi([[R,ye,Ge],[he,ie,Xe],[Ee,Xe,nt]])+pi([[j,he,Ge],[ye,Z,Xe],[Ge,ze,nt]])+pi([[j,ye,Ee],[ye,ie,ze],[Ge,Xe,Je]])),At=Li([[ht,yn],[yn,Rn]]),jt=Li([[ht,Rn],[yn,Cn]]),Ot=Li([[yn,Rn],[Rn,Cn]]);return!(Li([[2*At,jt],[jt,2*Ot]])>0&&(Rn>0||yn>0))}(e,0,n,0)}function Ao(e,n){const{start:t,end:r}=n,{x:a,y:u,width:d,height:g}=e;return!(t.x>a+d&&r.x>a+d||t.x<a&&r.x<a||t.y>u+g&&r.y>u+g||t.y<u&&r.y<u)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||or(e.topLine(),n)||or(e.rightLine(),n)||or(e.bottomLine(),n)||or(e.leftLine(),n))}function Kr(e,n){return!!Ir(e,it.fromEllipse(n))&&zi(yr.fromRect(e),n)}function Ir(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Oi(e,n){return Sa(e,n,{interior:!1})}function ao(e,n){return Wa(e,n,{interior:!1})}function kr(e,n){return Ta(e,n,{interior:!1})}function ki(e,n){return ri(e,n,{interior:!1})}function ni(e,n){return Sa(e,n,{interior:!0})}function zi(e,n){return Wa(e,n,{interior:!0})}function Xo(e,n){return Ta(e,n,{interior:!0})}function Ko(e,n){return ri(e,n,{interior:!0})}function Mo(e,n){return uo(e,n,{interior:!0})}function so(e,n,t){return e.getSubpaths().some(r=>{const[a]=r.toPolylines(t),{type:u}=r.getSegment(-1);return"Z"===u?ni(a,n):Oi(a,n)})}function _a(e,n,t){return e.getSubpaths().some(r=>{const[a]=r.toPolylines(t),{type:u}=r.getSegment(-1);return"Z"===u?zi(a,n):ao(a,n)})}function Jo(e,n,t){return Qo(e,yr.fromRect(n),t)}function Ca(e,n,t){return Zo(e,n,t,{interior:!1})}function Qo(e,n,t){return Zo(e,n,t,{interior:!0})}function wa(e,n,t,r){return e.getSubpaths().some(a=>{const[u]=a.toPolylines(t),{type:d}=a.getSegment(-1);return"Z"===d?Qo(n,u,r):Ca(n,u,r)})}function Sa(e,n,t={}){const{interior:r=!1}=t;let a;if(r){if(e.containsPoint(n.start))return!0;const{start:g,end:i,points:s}=e;a=i.equals(g)?s:[...s,g]}else a=e.points;const{length:u}=a,d=new ut;for(let g=0;g<u-1;g++)if(d.start=a[g],d.end=a[g+1],or(n,d))return!0;return!1}function Wa(e,n,t={}){const{start:r,end:a,points:u}=e;if(n.containsPoint(r))return!0;let d;const{interior:g=!1}=t;if(g){if(e.containsPoint(n.center()))return!0;d=a.equals(r)?u:[...u,r]}else d=u;const{length:i}=d,s=new ut;for(let l=0;l<i-1;l++)if(s.start=d[l],s.end=d[l+1],Or(n,s))return!0;return!1}function Ta(e,n,t){return uo(e,yr.fromRect(n),t)}function Zo(e,n,t,r){return e.getSubpaths().some(a=>{const[u]=a.toPolylines(t),{type:d}=a.getSegment(-1);return"Z"===d?uo(n,u,r):ri(n,u,r)})}function ri(e,n,t={}){const{interior:r=!1}=t;let a;if(r){const{start:i}=n;if(e.containsPoint(i))return!0;a=e.clone().close()}else a=e;const u=n.points,{length:d}=u,g=new ut;for(let i=0;i<d-1;i++)if(g.start=u[i],g.end=u[i+1],Oi(a,g))return!0;return!1}function uo(e,n,t){return n.containsPoint(e.start)||ri(e,n.clone().close(),t)}function Li(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function pi(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}yr.parse=function(e){return new yr(Si(e))},yr.fromRect=function(e){return new yr([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},yr.prototype=Hr(bn.prototype,{type:pt.Polygon,clone:function(){return new yr(ya(this.points))},convexHull:function(){return new yr(xa(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const qo=v,Ie=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,a=r.PI,u=r.atan2,d=r.sqrt,g=r.min,i=r.max,s=r.cos,l=r.sin,f=function(T,R,j){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(T){if(f.isV(T)&&(T=T.node),R=R||{},f.isString(T)){if("svg"===(T=T.trim()).toLowerCase())T=f.createSvgDocument();else if("<"===T[0]){var Z=f.createSvgDocument(T);if(Z.childNodes.length>1){var he,ye,ie=[];for(he=0,ye=Z.childNodes.length;he<ye;he++){var Ee=Z.childNodes[he];ie.push(new f(document.importNode(Ee,!0)))}return ie}T=document.importNode(Z.firstChild,!0)}else T=document.createElementNS(n.svg,T);f.ensureId(T)}return this.node=T,this.setAttributes(R),j&&this.append(j),this}},y=f.prototype;function M(T,R,j){j||(j={});for(var Z=j.includeAnnotationIndices,ie=j.eol,he=j.lineHeight,ye=j.baseSize,Ee=0,Ge={},ze=R.length-1,Xe=0;Xe<=ze;Xe++){var Je=R[Xe],nt=null;if(f.isObject(Je)){var ht=Je.attrs,Cn=f("tspan",ht),yn=Cn.node,Rn=Je.t;ie&&Xe===ze&&(Rn+=ie),yn.textContent=Rn;var At=ht.class;At&&Cn.addClass(At),Z&&Cn.attr("annotations",Je.annotations),nt=parseFloat(ht["font-size"]),isFinite(nt)||(nt=ye),nt&&nt>Ee&&(Ee=nt)}else ie&&Xe===ze&&(Je+=ie),yn=document.createTextNode(Je||" "),ye&&ye>Ee&&(Ee=ye);T.appendChild(yn)}return Ee&&(Ge.maxFontSize=Ee),he?Ge.lineHeight=he:Ee&&(Ge.lineHeight=1.2*Ee),Ge}Object.defineProperty(y,"id",{enumerable:!0,get:function(){return this.node.id},set:function(T){this.node.id=T}}),y.getTransformToElement=function(T){var R=this.node;if(f.isSVGGraphicsElement(T)&&f.isSVGGraphicsElement(R)){var j=f.toNode(T).getScreenCTM(),Z=R.getScreenCTM();if(j&&Z)return j.inverse().multiply(Z)}return f.createSVGMatrix()},y.transform=function(T,R){var j=this.node;if(f.isUndefined(T))return f.transformStringToMatrix(this.attr("transform"));if(R&&R.absolute)return this.attr("transform",f.matrixToTransformString(T));var Z=f.createSVGTransform(T);return j.transform.baseVal.appendItem(Z),this},y.translate=function(T,R,j){j=j||{},R=R||0;var Z=this.attr("transform")||"",ie=f.parseTransformString(Z);return Z=ie.value,f.isUndefined(T)?ie.translate:(Z=Z.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(j.absolute?T:ie.translate.tx+T)+","+(j.absolute?R:ie.translate.ty+R)+") "+Z).trim()),this)},y.rotate=function(T,R,j,Z){Z=Z||{};var ie=this.attr("transform")||"",he=f.parseTransformString(ie);return ie=he.value,f.isUndefined(T)?he.rotate:(ie=ie.replace(/rotate\([^)]*\)/g,"").trim(),T%=360,this.attr("transform",(ie+" rotate("+(Z.absolute?T:he.rotate.angle+T)+(void 0!==R&&void 0!==j?","+R+","+j:"")+")").trim()),this)},y.scale=function(T,R){R=f.isUndefined(R)?T:R;var j=this.attr("transform")||"",Z=f.parseTransformString(j);return j=Z.value,f.isUndefined(T)?Z.scale:(j=j.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(j+" scale("+T+","+R+")").trim()),this)},y.bbox=function(T,R){var j,Z=this.node,ie=Z.ownerSVGElement;if(!ie)return new it(0,0,0,0);try{j=Z.getBBox()}catch(ye){j={x:Z.clientLeft,y:Z.clientTop,width:Z.clientWidth,height:Z.clientHeight}}if(T)return new it(j);var he=this.getTransformToElement(R||ie);return f.transformRect(j,he)},y.getBBox=function(T){var j,R={},Z=this.node;if(!Z.ownerSVGElement||!f.isSVGGraphicsElement(Z))return new it(0,0,0,0);if(T&&(T.target&&(R.target=f.toNode(T.target)),T.recursive&&(R.recursive=T.recursive)),R.recursive){var ye=this.children(),Ee=ye.length;if(0===Ee)return this.getBBox({target:R.target,recursive:!1});R.target||(R.target=this);for(var Ge=0;Ge<Ee;Ge++){var Xe,ze=ye[Ge];Xe=0===ze.children().length?ze.getBBox({target:R.target,recursive:!1}):ze.getBBox({target:R.target,recursive:!0}),j=j?j.union(Xe):Xe}return j}try{j=Z.getBBox()}catch(Je){j={x:Z.clientLeft,y:Z.clientTop,width:Z.clientWidth,height:Z.clientHeight}}if(R.target){var he=this.getTransformToElement(R.target);return f.transformRect(j,he)}return new it(j)};var z=/em$/;function X(T,R){var j=parseFloat(T);return z.test(T)?j*R:j}y.text=function(T,R){if(T&&"string"!=typeof T)throw new Error("Vectorizer: text() expects the first argument to be a string.");T=f.sanitizeText(T),R||(R={});var j=R.displayEmpty,Z=R.eol,ie=R.textPath,he=R.textVerticalAnchor,ye="middle"===he||"bottom"===he||"top"===he,Ee=R.x;void 0===Ee&&(Ee=this.attr("x")||0);var Ge=R.includeAnnotationIndices,ze=R.annotations;ze&&!f.isArray(ze)&&(ze=[ze]);var Xe=R.lineHeight,Je="auto"===Xe,nt=Je?"1.5em":Xe||"1em";this.empty(),this.attr({"xml:space":"preserve",display:T||j?null:"none"});var ht=parseFloat(this.attr("font-size"));ht||(ht=16,(ye||ze)&&this.attr("font-size",ht));var yn,Cn=document;ie?("string"==typeof ie&&(ie={d:ie}),yn=function w(T,R){T||(T={});var j=f("textPath"),Z=T.d;if(Z&&void 0===T["xlink:href"]){var ie=f("path").attr("d",Z).appendTo(R.defs());j.attr("xlink:href","#"+ie.id)}return f.isObject(T)&&j.attr(T),j.node}(ie,this)):yn=Cn.createDocumentFragment();for(var Ot,Rn=0,At=T.split("\n"),jt=[],kt=0,rn=At.length-1;kt<=rn;kt++){var gn,An=nt,Mn="v-line",tn=Cn.createElementNS(n.svg,"tspan"),er=At[kt];if(er)if(ze){var sn=(gn=M(tn,f.annotateString(er,ze,{offset:-Rn,includeAnnotationIndices:Ge}),{includeAnnotationIndices:Ge,eol:kt!==rn&&Z,lineHeight:Je?null:nt,baseSize:ht})).lineHeight;sn&&Je&&0!==kt&&(An=sn),0===kt&&(Ot=.8*gn.maxFontSize)}else Z&&kt!==rn&&(er+=Z),tn.textContent=er;else{tn.textContent="-",Mn+=" v-empty-line";var Mt=tn.style;Mt.fillOpacity=0,Mt.strokeOpacity=0,ze&&(gn={})}gn&&jt.push(gn),kt>0&&tn.setAttribute("dy",An),(kt>0||ie)&&tn.setAttribute("x",Ee),tn.className.baseVal=Mn,yn.appendChild(tn),Rn+=er.length+1}if(ye)if(ze)An=function re(T,R,j,Z){if(!Array.isArray(R))return 0;var ie=R.length;if(!ie)return 0;for(var he=R[0],ye=X(he.maxFontSize,j)||j,Ee=0,Ge=X(Z,j),ze=1;ze<ie;ze++)Ee+=X((he=R[ze]).lineHeight,j)||Ge;var nt,Je=X(he.maxFontSize,j)||j;switch(T){case"middle":nt=ye/2-.15*Je-Ee/2;break;case"bottom":nt=-.25*Je-Ee;break;default:nt=.8*ye}return nt}(he,jt,ht,nt);else if("top"===he)An="0.8em";else{var ft;switch(rn>0?(ft=parseFloat(nt)||1,ft*=rn,z.test(nt)||(ft/=ht)):ft=0,he){case"middle":An=.3-ft/2+"em";break;case"bottom":An=-ft-.3+"em"}}else 0===he?An="0em":he?An=he:(An=0,null===this.attr("y")&&this.attr("y",Ot||"0.8em"));return yn.firstChild.setAttribute("dy",An),this.append(yn),this},y.removeAttr=function(T){var R=f.qualifyAttr(T),j=this.node;return R.ns?j.hasAttributeNS(R.ns,R.local)&&j.removeAttributeNS(R.ns,R.local):j.hasAttribute(T)&&j.removeAttribute(T),this},y.attr=function(T,R){if(f.isUndefined(T)){for(var j=this.node.attributes,Z={},ie=0;ie<j.length;ie++)Z[j[ie].name]=j[ie].value;return Z}if(f.isString(T)&&f.isUndefined(R))return this.node.getAttribute(T);if("object"==typeof T)for(var he in T)T.hasOwnProperty(he)&&this.setAttribute(he,T[he]);else this.setAttribute(T,R);return this},y.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",f.normalizePathData(this.attr("d"))),this},y.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},y.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},y.setAttributes=function(T){for(var R in T)T.hasOwnProperty(R)&&this.setAttribute(R,T[R]);return this},y.append=function(T){f.isArray(T)||(T=[T]);for(var R=0,j=T.length;R<j;R++)this.node.appendChild(f.toNode(T[R]));return this},y.prepend=function(T){var R=this.node.firstChild;return R?f(R).before(T):this.append(T)},y.before=function(T){var R=this.node,j=R.parentNode;if(j){f.isArray(T)||(T=[T]);for(var Z=0,ie=T.length;Z<ie;Z++)j.insertBefore(f.toNode(T[Z]),R)}return this},y.appendTo=function(T){return f.toNode(T).appendChild(this.node),this},y.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},y.tagName=function(){return this.node.tagName.toUpperCase()},y.defs=function(){var T=this.svg()||this,R=T.node.getElementsByTagName("defs")[0];return R?f(R):f("defs").appendTo(T)},y.clone=function(){var T=f(this.node.cloneNode(!0));return T.node.id=f.uniqueId(),T},y.findOne=function(T){var R=this.node.querySelector(T);return R?f(R):void 0},y.find=function(T){var R=[],j=this.node.querySelectorAll(T);if(j)for(var Z=0;Z<j.length;Z++)R.push(f(j[Z]));return R},y.children=function(){for(var T=this.node.childNodes,R=[],j=0;j<T.length;j++)1===T[j].nodeType&&R.push(f(T[j]));return R},y.parent=function(){return f(this.node.parentNode)||null},y.index=function(){for(var T=0,R=this.node.previousSibling;R;)1===R.nodeType&&T++,R=R.previousSibling;return T},y.findParentByClass=function(T,R){for(var j=this.node.ownerSVGElement,Z=this.node.parentNode;Z&&Z!==R&&Z!==j;){var ie=f(Z);if(ie.hasClass(T))return ie;Z=Z.parentNode}return null},y.contains=function(T){var R=this.node,j=f.toNode(T),Z=j&&j.parentNode;return R===Z||!!(Z&&1===Z.nodeType&&16&R.compareDocumentPosition(Z))},y.toLocalPoint=function(T,R){var j=this.svg().node,Z=j.createSVGPoint();Z.x=T,Z.y=R;try{var ie=Z.matrixTransform(j.getScreenCTM().inverse()),he=this.getTransformToElement(j).inverse()}catch(ye){return Z}return ie.matrixTransform(he)},y.translateCenterToPoint=function(T){var j=this.getBBox({target:this.svg()}).center();return this.translate(T.x-j.x,T.y-j.y),this},y.translateAndAutoOrient=function(T,R,j){T=new ge(T),R=new ge(R),j||(j=this.svg());var Z=this.scale();this.attr("transform","");var ie=this.getBBox({target:j}).scale(Z.sx,Z.sy),he=f.createSVGTransform();he.setTranslate(-ie.x-ie.width/2,-ie.y-ie.height/2);var ye=f.createSVGTransform(),Ee=T.angleBetween(R,T.clone().offset(1,0));Ee&&ye.setRotate(Ee,0,0);var Ge=f.createSVGTransform(),ze=T.clone().move(R,ie.width/2);Ge.setTranslate(2*T.x-ze.x,2*T.y-ze.y);var Xe=this.getTransformToElement(j),Je=f.createSVGTransform();return Je.setMatrix(Ge.matrix.multiply(ye.matrix.multiply(he.matrix.multiply(Xe.scale(Z.sx,Z.sy))))),this.attr("transform",f.matrixToTransformString(Je.matrix)),this},y.animateAlongPath=function(T,R){R=f.toNode(R);var j=f.ensureId(R),Z=f("animateMotion",T),ie=f("mpath",{"xlink:href":"#"+j});Z.append(ie),this.append(Z);try{Z.node.beginElement()}catch(nt){if("fake"===document.documentElement.getAttribute("smiling")){var he=Z.node;he.animators=[];var ye=he.getAttribute("id");ye&&(id2anim[ye]=he);for(var Ee=getTargets(he),Ge=0,ze=Ee.length;Ge<ze;Ge++){var Je=new Animator(he,Ee[Ge],Ge);animators.push(Je),he.animators[Ge]=Je,Je.register()}}}return this},y.hasClass=function(T){return new RegExp("(\\s|^)"+T+"(\\s|$)").test(this.node.getAttribute("class"))},y.addClass=function(T){if(T&&!this.hasClass(T)){var R=this.node.getAttribute("class")||"";this.node.setAttribute("class",(R+" "+T).trim())}return this},y.removeClass=function(T){if(T&&this.hasClass(T)){var R=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+T+"(\\s|$)","g"),"$2");this.node.setAttribute("class",R)}return this},y.toggleClass=function(T,R){return(f.isUndefined(R)?this.hasClass(T):!R)?this.removeClass(T):this.addClass(T),this},y.sample=function(T){T=T||1;for(var he,R=this.node,j=R.getTotalLength(),Z=[],ie=0;ie<j;)he=R.getPointAtLength(ie),Z.push({x:he.x,y:he.y,distance:ie}),ie+=T;return Z},y.convertToPath=function(){var T=f("path");T.attr(this.attr());var R=this.convertToPathData();return R&&T.attr("d",R),T},y.convertToPathData=function(){var T=this.tagName();switch(T){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(T+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var T,R,j,Z,ie,he,ye,Ee,Ge,ze,Xe,Je,nt,ht,Cn;switch(this.tagName()){case"RECT":return T=parseFloat(this.attr("x"))||0,R=parseFloat(this.attr("y"))||0,j=parseFloat(this.attr("width"))||0,Z=parseFloat(this.attr("height"))||0,new it(T,R,j,Z);case"CIRCLE":return ie=parseFloat(this.attr("cx"))||0,he=parseFloat(this.attr("cy"))||0,ye=parseFloat(this.attr("r"))||0,new rr({x:ie,y:he},ye,ye);case"ELLIPSE":return ie=parseFloat(this.attr("cx"))||0,he=parseFloat(this.attr("cy"))||0,Ee=parseFloat(this.attr("rx"))||0,Ge=parseFloat(this.attr("ry"))||0,new rr({x:ie,y:he},Ee,Ge);case"POLYLINE":return ze=f.getPointsFromSvgNode(this),new bn(ze);case"POLYGON":return(ze=f.getPointsFromSvgNode(this)).length>1&&ze.push(ze[0]),new bn(ze);case"PATH":return Xe=this.attr("d"),gt.isDataSupported(Xe)||(Xe=f.normalizePathData(Xe)),new gt(Xe);case"LINE":return Je=parseFloat(this.attr("x1"))||0,ht=parseFloat(this.attr("y1"))||0,nt=parseFloat(this.attr("x2"))||0,Cn=parseFloat(this.attr("y2"))||0,new ut({x:Je,y:ht},{x:nt,y:Cn})}return this.getBBox()},y.findIntersection=function(T,R){var j=this.svg().node,Z=this.getBBox({target:R=R||j}),ie=Z.center();if(Z.intersectionWithLineFromCenterToPoint(T)){var he,ye=this.tagName();if("RECT"===ye){var Ee=new it(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),Ge=this.getTransformToElement(R),ze=f.decomposeMatrix(Ge),Xe=j.createSVGTransform();Xe.setRotate(-ze.rotation,ie.x,ie.y);var Je=f.transformRect(Ee,Xe.matrix.multiply(Ge));he=new it(Je).intersectionWithLineFromCenterToPoint(T,ze.rotation)}else if("PATH"===ye||"POLYGON"===ye||"POLYLINE"===ye||"CIRCLE"===ye||"ELLIPSE"===ye){var Rn,At,jt,kt,rn,ht=("PATH"===ye?this:this.convertToPath()).sample(),Cn=1/0,yn=[];for(Rn=0;Rn<ht.length;Rn++)jt=(jt=f.createSVGPoint((At=ht[Rn]).x,At.y)).matrixTransform(this.getTransformToElement(R)),(rn=(At=new ge(jt)).distance(ie)+(kt=1.1*At.distance(T)))<Cn?(Cn=rn,yn=[{sample:At,refDistance:kt}]):rn<Cn+1&&yn.push({sample:At,refDistance:kt});yn.sort(function(An,Mn){return An.refDistance-Mn.refDistance}),yn[0]&&(he=yn[0].sample)}return he}},y.setAttribute=function(T,R){var j=this.node;if(null===R)return this.removeAttr(T),this;var Z=f.qualifyAttr(T);return Z.ns?j.setAttributeNS(Z.ns,T,R):"id"===T?j.id=R:j.setAttribute(T,R),this},f.createSvgDocument=function(T){if(T){const j=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${T}</svg>`,{documentElement:Z}=f.parseXML(j,{async:!1});return Z}const R=document.createElementNS(n.svg,"svg");return R.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),R.setAttribute("version","1.1"),R},f.createSVGStyle=function(T){const{node:R}=f("style",{type:"text/css"},[f.createCDATASection(T)]);return R},f.createCDATASection=function(T=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(T)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(T){return f.isV(T)?T.node:T.nodeName&&T||T[0]},f.ensureId=function(T){return(T=f.toNode(T)).id||(T.id=f.uniqueId())},f.sanitizeText=function(T){return(T||"").replace(/ /g,"\xa0")},f.isUndefined=function(T){return void 0===T},f.isString=function(T){return"string"==typeof T},f.isObject=function(T){return T&&"object"==typeof T},f.isArray=Array.isArray,f.parseXML=function(T,R){var j;R=R||{};try{var Z=new DOMParser;f.isUndefined(R.async)||(Z.async=R.async),j=Z.parseFromString(T,"text/xml")}catch(ie){j=void 0}if(!j||j.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+T);return j},f.qualifyAttr=function(T){if(-1!==T.indexOf(":")){var R=T.split(":");return{ns:n[R[0]],local:R[1]}}return{ns:null,local:T}},f.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,f.transformSeparatorRegex=/[ ,]+/,f.transformationListRegex=/^(\w+)\((.*)\)/,f.transformStringToMatrix=function(T){var R=f.createSVGMatrix(),j=T&&T.match(f.transformRegex);if(!j)return R;for(var Z=0,ie=j.length;Z<ie;Z++){var ye=j[Z].match(f.transformationListRegex);if(ye){var Ee,Ge,ze,Xe,Je,nt=f.createSVGMatrix(),ht=ye[2].split(f.transformSeparatorRegex);switch(ye[1].toLowerCase()){case"scale":Ee=parseFloat(ht[0]),Ge=void 0===ht[1]?Ee:parseFloat(ht[1]),nt=nt.scaleNonUniform(Ee,Ge);break;case"translate":ze=parseFloat(ht[0]),Xe=parseFloat(ht[1]),nt=nt.translate(ze,Xe);break;case"rotate":Je=parseFloat(ht[0]),ze=parseFloat(ht[1])||0,Xe=parseFloat(ht[2])||0,nt=0!==ze||0!==Xe?nt.translate(ze,Xe).rotate(Je).translate(-ze,-Xe):nt.rotate(Je);break;case"skewx":Je=parseFloat(ht[0]),nt=nt.skewX(Je);break;case"skewy":Je=parseFloat(ht[0]),nt=nt.skewY(Je);break;case"matrix":nt.a=parseFloat(ht[0]),nt.b=parseFloat(ht[1]),nt.c=parseFloat(ht[2]),nt.d=parseFloat(ht[3]),nt.e=parseFloat(ht[4]),nt.f=parseFloat(ht[5]);break;default:continue}R=R.multiply(nt)}}return R},f.matrixToTransformString=function(T){return T||(T=!0),"matrix("+(void 0!==T.a?T.a:1)+","+(void 0!==T.b?T.b:0)+","+(void 0!==T.c?T.c:0)+","+(void 0!==T.d?T.d:1)+","+(void 0!==T.e?T.e:0)+","+(void 0!==T.f?T.f:0)+")"},f.parseTransformString=function(T){var R,j,Z;if(T){var ie=f.transformSeparatorRegex;if(T.trim().indexOf("matrix")>=0){var he=f.transformStringToMatrix(T),ye=f.decomposeMatrix(he);Z=[ye.scaleX,ye.scaleY],j=[ye.rotation];var Ee=[];(0!==(R=[ye.translateX,ye.translateY])[0]||0!==R[1])&&Ee.push("translate("+R+")"),(1!==Z[0]||1!==Z[1])&&Ee.push("scale("+Z+")"),0!==j[0]&&Ee.push("rotate("+j+")"),T=Ee.join(" ")}else{var Ge=T.match(/translate\((.*?)\)/);Ge&&(R=Ge[1].split(ie));var ze=T.match(/rotate\((.*?)\)/);ze&&(j=ze[1].split(ie));var Xe=T.match(/scale\((.*?)\)/);Xe&&(Z=Xe[1].split(ie))}}var Je=Z&&Z[0]?parseFloat(Z[0]):1;return{value:T,translate:{tx:R&&R[0]?parseInt(R[0],10):0,ty:R&&R[1]?parseInt(R[1],10):0},rotate:{angle:j&&j[0]?parseInt(j[0],10):0,cx:j&&j[1]?parseInt(j[1],10):void 0,cy:j&&j[2]?parseInt(j[2],10):void 0},scale:{sx:Je,sy:Z&&Z[1]?parseFloat(Z[1]):Je}}},f.deltaTransformPoint=function(T,R){return{x:R.x*T.a+R.y*T.c+0,y:R.x*T.b+R.y*T.d+0}},f.decomposeMatrix=function(T){var R=f.deltaTransformPoint(T,{x:0,y:1}),j=f.deltaTransformPoint(T,{x:1,y:0}),Z=180/a*u(R.y,R.x)-90,ie=180/a*u(j.y,j.x);return{translateX:T.e,translateY:T.f,scaleX:d(T.a*T.a+T.b*T.b),scaleY:d(T.c*T.c+T.d*T.d),skewX:Z,skewY:ie,rotation:Z}},f.matrixToScale=function(T){var R,j,Z,ie;return T?(R=f.isUndefined(T.a)?1:T.a,ie=f.isUndefined(T.d)?1:T.d,j=T.b,Z=T.c):R=ie=1,{sx:j?d(R*R+j*j):R,sy:Z?d(Z*Z+ie*ie):ie}},f.matrixToRotate=function(T){var R={x:0,y:1};return T&&(R=f.deltaTransformPoint(T,R)),{angle:De(xt(u(R.y,R.x))-90)}},f.matrixToTranslate=function(T){return{tx:T&&T.e||0,ty:T&&T.f||0}},f.isV=function(T){return T instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(T){return!!T&&(T=f.toNode(T))instanceof SVGElement&&"function"==typeof T.getScreenCTM};var ne=f("svg").node;return f.createSVGMatrix=function(T){var R=ne.createSVGMatrix();for(var j in T)R[j]=T[j];return R},f.createSVGTransform=function(T){return f.isUndefined(T)?ne.createSVGTransform():(T instanceof SVGMatrix||(T=f.createSVGMatrix(T)),ne.createSVGTransformFromMatrix(T))},f.createSVGPoint=function(T,R){var j=ne.createSVGPoint();return j.x=T,j.y=R,j},f.transformRect=function(T,R){var j=ne.createSVGPoint();j.x=T.x,j.y=T.y;var Z=j.matrixTransform(R);j.x=T.x+T.width,j.y=T.y;var ie=j.matrixTransform(R);j.x=T.x+T.width,j.y=T.y+T.height;var he=j.matrixTransform(R);j.x=T.x,j.y=T.y+T.height;var ye=j.matrixTransform(R),Ee=g(Z.x,ie.x,he.x,ye.x),Ge=i(Z.x,ie.x,he.x,ye.x),ze=g(Z.y,ie.y,he.y,ye.y),Xe=i(Z.y,ie.y,he.y,ye.y);return new it(Ee,ze,Ge-Ee,Xe-ze)},f.transformPoint=function(T,R){return new ge(f.createSVGPoint(T.x,T.y).matrixTransform(R))},f.transformLine=function(T,R){return new ut(f.transformPoint(T.start,R),f.transformPoint(T.end,R))},f.transformPolyline=function(T,R){var j=T instanceof bn?T.points:T;f.isArray(j)||(j=[]);for(var Z=[],ie=0,he=j.length;ie<he;ie++)Z[ie]=f.transformPoint(j[ie],R);return new bn(Z)},f.styleToObject=function(T){for(var R={},j=T.split(";"),Z=0;Z<j.length;Z++){var he=j[Z].split("=");R[he[0].trim()]=he[1].trim()}return R},f.createSlicePathData=function(T,R,j,Z){var ie=2*a-1e-6,he=T,ye=R,Ee=j,Ge=Z,ze=(Ge<Ee&&(ze=Ee,Ee=Ge,Ge=ze),Ge-Ee),Xe=ze<a?"0":"1",Je=s(Ee),nt=l(Ee),ht=s(Ge),Cn=l(Ge);return ze>=ie?he?"M0,"+ye+"A"+ye+","+ye+" 0 1,1 0,"+-ye+"A"+ye+","+ye+" 0 1,1 0,"+ye+"M0,"+he+"A"+he+","+he+" 0 1,0 0,"+-he+"A"+he+","+he+" 0 1,0 0,"+he+"Z":"M0,"+ye+"A"+ye+","+ye+" 0 1,1 0,"+-ye+"A"+ye+","+ye+" 0 1,1 0,"+ye+"Z":he?"M"+ye*Je+","+ye*nt+"A"+ye+","+ye+" 0 "+Xe+",1 "+ye*ht+","+ye*Cn+"L"+he*ht+","+he*Cn+"A"+he+","+he+" 0 "+Xe+",0 "+he*Je+","+he*nt+"Z":"M"+ye*Je+","+ye*nt+"A"+ye+","+ye+" 0 "+Xe+",1 "+ye*ht+","+ye*Cn+"L0,0Z"},f.mergeAttrs=function(T,R){for(var j in R)T[j]="class"===j?T[j]?T[j]+" "+R[j]:R[j]:"style"===j?f.isObject(T[j])&&f.isObject(R[j])?f.mergeAttrs(T[j],R[j]):f.isObject(T[j])?f.mergeAttrs(T[j],f.styleToObject(R[j])):f.isObject(R[j])?f.mergeAttrs(f.styleToObject(T[j]),R[j]):f.mergeAttrs(f.styleToObject(T[j]),f.styleToObject(R[j])):R[j];return T},f.annotateString=function(T,R,j){R=R||[];for(var he,Ee,Ge,Z=(j=j||{}).offset||0,ie=[],ye=[],ze=0;ze<T.length;ze++){Ee=ye[ze]=T[ze];for(var Xe=0;Xe<R.length;Xe++){var Je=R[Xe];ze>=Je.start+Z&&ze<Je.end+Z&&(f.isObject(Ee)?Ee.attrs=f.mergeAttrs(f.mergeAttrs({},Ee.attrs),Je.attrs):Ee=ye[ze]={t:T[ze],attrs:Je.attrs},j.includeAnnotationIndices&&(Ee.annotations||(Ee.annotations=[])).push(Xe))}(Ge=ye[ze-1])?f.isObject(Ee)&&f.isObject(Ge)?JSON.stringify(Ee.attrs)===JSON.stringify(Ge.attrs)?he.t+=Ee.t:(ie.push(he),he=Ee):f.isObject(Ee)||f.isObject(Ge)?(ie.push(he),he=Ee):he=(he||"")+Ee:he=Ee}return he&&ie.push(he),ie},f.findAnnotationsAtIndex=function(T,R){var j=[];return T&&T.forEach(function(Z){Z.start<R&&R<=Z.end&&j.push(Z)}),j},f.findAnnotationsBetweenIndexes=function(T,R,j){var Z=[];return T&&T.forEach(function(ie){(R>=ie.start&&R<ie.end||j>ie.start&&j<=ie.end||ie.start>=R&&ie.end<j)&&Z.push(ie)}),Z},f.shiftAnnotations=function(T,R,j){return T&&T.forEach(function(Z){Z.start<R&&Z.end>=R?Z.end+=j:Z.start>=R&&(Z.start+=j,Z.end+=j)}),T},f.convertLineToPathData=function(T){return["M",(T=f(T)).attr("x1"),T.attr("y1"),"L",T.attr("x2"),T.attr("y2")].join(" ")},f.convertPolygonToPathData=function(T){var R=f.getPointsFromSvgNode(T);return 0===R.length?null:f.svgPointsToPath(R)+" Z"},f.convertPolylineToPathData=function(T){var R=f.getPointsFromSvgNode(T);return 0===R.length?null:f.svgPointsToPath(R)},f.svgPointsToPath=function(T){for(var R=0,j=T.length;R<j;R++)T[R]=T[R].x+" "+T[R].y;return"M "+T.join(" L")},f.getPointsFromSvgNode=function(T){var R=[],j=(T=f.toNode(T)).points;if(j)for(var Z=0,ie=j.numberOfItems;Z<ie;Z++)R.push(j.getItem(Z));return R},f.KAPPA=.551784,f.convertCircleToPathData=function(T){T=f(T);var R=parseFloat(T.attr("cx"))||0,j=parseFloat(T.attr("cy"))||0,Z=parseFloat(T.attr("r")),ie=Z*f.KAPPA;return["M",R,j-Z,"C",R+ie,j-Z,R+Z,j-ie,R+Z,j,"C",R+Z,j+ie,R+ie,j+Z,R,j+Z,"C",R-ie,j+Z,R-Z,j+ie,R-Z,j,"C",R-Z,j-ie,R-ie,j-Z,R,j-Z,"Z"].join(" ")},f.convertEllipseToPathData=function(T){T=f(T);var R=parseFloat(T.attr("cx"))||0,j=parseFloat(T.attr("cy"))||0,Z=parseFloat(T.attr("rx")),ie=parseFloat(T.attr("ry"))||Z,he=Z*f.KAPPA,ye=ie*f.KAPPA;return["M",R,j-ie,"C",R+he,j-ie,R+Z,j-ye,R+Z,j,"C",R+Z,j+ye,R+he,j+ie,R,j+ie,"C",R-he,j+ie,R-Z,j+ye,R-Z,j,"C",R-Z,j-ye,R-he,j-ie,R,j-ie,"Z"].join(" ")},f.convertRectToPathData=function(T){return T=f(T),f.rectToPath({x:parseFloat(T.attr("x"))||0,y:parseFloat(T.attr("y"))||0,width:parseFloat(T.attr("width"))||0,height:parseFloat(T.attr("height"))||0,rx:parseFloat(T.attr("rx"))||0,ry:parseFloat(T.attr("ry"))||0})},f.rectToPath=function(T){var j=T.x,Z=T.y,ie=T.width,he=T.height,ye=g(T.rx||T["top-rx"]||0,ie/2),Ee=g(T.rx||T["bottom-rx"]||0,ie/2),Ge=g(T.ry||T["top-ry"]||0,he/2),ze=g(T.ry||T["bottom-ry"]||0,he/2);return(ye||Ee||Ge||ze?["M",j,Z+Ge,"v",he-Ge-ze,"a",Ee,ze,0,0,0,Ee,ze,"h",ie-2*Ee,"a",Ee,ze,0,0,0,Ee,-ze,"v",-(he-ze-Ge),"a",ye,Ge,0,0,0,-ye,-Ge,"h",-(ie-2*ye),"a",ye,Ge,0,0,0,-ye,Ge,"Z"]:["M",j,Z,"H",j+ie,"V",Z+he,"H",j,"V",Z,"Z"]).join(" ")},f.normalizePathData=function(){var T="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",R=new RegExp("([a-z])["+T+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+T+"]*,?["+T+"]*)+)","ig"),j=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+T+"]*,?["+T+"]*","ig"),Z=Math,ie=Z.PI,he=Z.sin,ye=Z.cos,Ee=Z.tan,Ge=Z.asin,ze=Z.sqrt,Xe=Z.abs;function Je(At,jt,Ot,kt,rn,An){var Mn=.3333333333333333,tn=2/3;return[Mn*At+tn*Ot,Mn*jt+tn*kt,Mn*rn+tn*Ot,Mn*An+tn*kt,rn,An]}function nt(At,jt,Ot){return{x:At*ye(Ot)-jt*he(Ot),y:At*he(Ot)+jt*ye(Ot)}}function ht(At,jt,Ot,kt,rn,An,Mn,tn,er,gn){var ft,Xt=120*ie/180,sn=ie/180*(+rn||0),Mt=[];if(gn)ti=gn[0],Tr=gn[1],Wl=gn[2],$l=gn[3];else{jt=(ft=nt(At,jt,-sn)).y;var ei=((At=ft.x)-(tn=(ft=nt(tn,er,-sn)).x))/2,ci=(jt-(er=ft.y))/2,za=ei*ei/(Ot*Ot)+ci*ci/(kt*kt);za>1&&(Ot*=za=ze(za),kt*=za);var sg=Ot*Ot,ug=kt*kt,Lg=(An==Mn?-1:1)*ze(Xe((sg*ug-sg*ci*ci-ug*ei*ei)/(sg*ci*ci+ug*ei*ei))),Wl=Lg*Ot*ci/kt+(At+tn)/2,$l=Lg*-kt*ei/Ot+(jt+er)/2,ti=Ge(((jt-$l)/kt).toFixed(9)),Tr=Ge(((er-$l)/kt).toFixed(9));(ti=At<Wl?ie-ti:ti)<0&&(ti=2*ie+ti),(Tr=tn<Wl?ie-Tr:Tr)<0&&(Tr=2*ie+Tr),Mn&&ti>Tr&&(ti-=2*ie),!Mn&&Tr>ti&&(Tr-=2*ie)}var lg=Tr-ti;if(Xe(lg)>Xt){var jg=Tr,zg=tn,Ug=er;Mt=ht(tn=Wl+Ot*ye(Tr=ti+Xt*(Mn&&Tr>ti?1:-1)),er=$l+kt*he(Tr),Ot,kt,rn,0,Mn,zg,Ug,[Tr,jg,Wl,$l])}lg=Tr-ti;var Gg=ye(ti),Wg=he(ti),$g=ye(Tr),Yg=he(Tr),Rg=Ee(lg/4),Ng=4/3*(Ot*Rg),Dg=4/3*(kt*Rg),Fg=[At,jt],Mu=[At+Ng*Wg,jt-Dg*Gg],Vg=[tn+Ng*Yg,er-Dg*$g],Bg=[tn,er];if(Mu[0]=2*Fg[0]-Mu[0],Mu[1]=2*Fg[1]-Mu[1],gn)return[Mu,Vg,Bg].concat(Mt);for(var Hg=[],Xg=(Mt=[Mu,Vg,Bg].concat(Mt).join().split(",")).length,ds=0;ds<Xg;ds++)Hg[ds]=ds%2?nt(Mt[ds-1],Mt[ds],sn).y:nt(Mt[ds],Mt[ds+1],sn).x;return Hg}function Rn(At){var jt=function yn(At){if((!Array.isArray(At)||!Array.isArray(At&&At[0]))&&(At=function Cn(At){if(!At)return null;var jt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Ot=[];return String(At).replace(R,function(kt,rn,An){var Mn=[],tn=rn.toLowerCase();for(An.replace(j,function(er,gn){gn&&Mn.push(+gn)}),"m"===tn&&Mn.length>2&&(Ot.push([rn].concat(Mn.splice(0,2))),tn="l",rn="m"===rn?"l":"L");Mn.length>=jt[tn]&&(Ot.push([rn].concat(Mn.splice(0,jt[tn]))),jt[tn]););}),Ot}(At)),!At||!At.length)return[["M",0,0]];for(var tn,jt=[],Ot=0,kt=0,rn=0,An=0,er=At.length,gn=0;gn<er;gn++){var Xt=[];jt.push(Xt);var Mt,ft,sn=At[gn];if((tn=sn[0])!=tn.toUpperCase())switch(Xt[0]=tn.toUpperCase(),Xt[0]){case"A":Xt[1]=sn[1],Xt[2]=sn[2],Xt[3]=sn[3],Xt[4]=sn[4],Xt[5]=sn[5],Xt[6]=+sn[6]+Ot,Xt[7]=+sn[7]+kt;break;case"V":Xt[1]=+sn[1]+kt;break;case"H":Xt[1]=+sn[1]+Ot;break;case"M":for(rn=+sn[1]+Ot,An=+sn[2]+kt,Mt=sn.length,ft=1;ft<Mt;ft++)Xt[ft]=+sn[ft]+(ft%2?Ot:kt);break;default:for(Mt=sn.length,ft=1;ft<Mt;ft++)Xt[ft]=+sn[ft]+(ft%2?Ot:kt)}else for(var ei=sn.length,ci=0;ci<ei;ci++)Xt[ci]=sn[ci];switch(Xt[0]){case"Z":Ot=+rn,kt=+An;break;case"H":Ot=Xt[1];break;case"V":kt=Xt[1];break;case"M":rn=Xt[Xt.length-2],An=Xt[Xt.length-1],Ot=Xt[Xt.length-2],kt=Xt[Xt.length-1];break;default:Ot=Xt[Xt.length-2],kt=Xt[Xt.length-1]}}return jt}(At),Ot={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function kt(Mt,ft,ei){var ci,za;if(!Mt)return["C",ft.x,ft.y,ft.x,ft.y,ft.x,ft.y];switch(Mt[0]in{T:1,Q:1}||(ft.qx=null,ft.qy=null),Mt[0]){case"M":ft.X=Mt[1],ft.Y=Mt[2];break;case"A":Mt=0===parseFloat(Mt[1])||0===parseFloat(Mt[2])?["L",Mt[6],Mt[7]]:["C"].concat(ht.apply(0,[ft.x,ft.y].concat(Mt.slice(1))));break;case"S":"C"===ei||"S"===ei?(ci=2*ft.x-ft.bx,za=2*ft.y-ft.by):(ci=ft.x,za=ft.y),Mt=["C",ci,za].concat(Mt.slice(1));break;case"T":"Q"===ei||"T"===ei?(ft.qx=2*ft.x-ft.qx,ft.qy=2*ft.y-ft.qy):(ft.qx=ft.x,ft.qy=ft.y),Mt=["C"].concat(Je(ft.x,ft.y,ft.qx,ft.qy,Mt[1],Mt[2]));break;case"Q":ft.qx=Mt[1],ft.qy=Mt[2],Mt=["C"].concat(Je(ft.x,ft.y,Mt[1],Mt[2],Mt[3],Mt[4]));break;case"H":Mt=["L"].concat(Mt[1],ft.y);break;case"V":Mt=["L"].concat(ft.x,Mt[1])}return Mt}function rn(Mt,ft){if(Mt[ft].length>7){Mt[ft].shift();for(var ei=Mt[ft];ei.length;)An[ft]="A",Mt.splice(ft++,0,["C"].concat(ei.splice(0,6)));Mt.splice(ft,1),er=jt.length}}for(var An=[],Mn="",tn="",er=jt.length,gn=0;gn<er;gn++){jt[gn]&&(Mn=jt[gn][0]),"C"!==Mn&&(An[gn]=Mn,gn>0&&(tn=An[gn-1])),jt[gn]=kt(jt[gn],Ot,tn),"A"!==An[gn]&&"C"===Mn&&(An[gn]="C"),rn(jt,gn);var Xt=jt[gn],sn=Xt.length;Ot.x=Xt[sn-2],Ot.y=Xt[sn-1],Ot.bx=parseFloat(Xt[sn-4])||Ot.x,Ot.by=parseFloat(Xt[sn-3])||Ot.y}return(!jt[0][0]||"M"!==jt[0][0])&&jt.unshift(["M",0,0]),jt}return function(At){return Rn(At).join(",").split(",").join(" ")}}(),f.namespace=n,f.g=m,f}(),Lr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Rr=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,Lr.classNamePrefix.length)!==Lr.classNamePrefix&&(n=Lr.classNamePrefix+n),n}).join(" ")},F=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,Lr.classNamePrefix.length)===Lr.classNamePrefix&&(n=n.substr(Lr.classNamePrefix.length)),n}).join(" ")},K=function(e,n){for(var t={},r={},a=Ie.namespace.svg,u=n||a,d=document.createDocumentFragment(),g=[e,d,u];g.length>0;){u=g.pop();for(var i=g.pop(),s=g.pop(),l=0,f=s.length;l<f;l++){var y=s[l];if(!y.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var w=y.tagName;y.hasOwnProperty("namespaceURI")&&(u=y.namespaceURI);var M=document.createElementNS(u,w),z=u===a,X=z?Ie:yt,re=y.attributes;re&&X(M).attr(re);var ne=y.style;if(ne&&yt(M).css(ne),y.hasOwnProperty("className")){var T=y.className;z?M.className.baseVal=T:M.className=T}if(y.hasOwnProperty("textContent")&&(M.textContent=y.textContent),y.hasOwnProperty("selector")){var R=y.selector;if(t[R])throw new Error("json-dom-parser: selector must be unique");t[R]=M,X(M).attr("joint-selector",R)}if(y.hasOwnProperty("groupSelector")){var j=y.groupSelector;Array.isArray(j)||(j=[j]);for(var Z=0,ie=j.length;Z<ie;Z++){var he=j[Z],ye=r[he];ye||(ye=r[he]=[]),ye.push(M)}}i.appendChild(M);var Ee=y.children;Array.isArray(Ee)&&g.push(Ee,M,u)}}return{fragment:d,selectors:t,groupSelectors:r}},oe=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},fe=function(e,n,t){for(var a,r=Array.isArray(n)?n:n.split(t||"/"),u=0,d=r.length;u<d;){if(a=r[u++],Object(e)!==e||!(a in e))return;e=e[a]}return e},Te=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},_e=function(e,n,t,r){const a=Array.isArray(n)?n:n.split(r||"/"),u=a.length-1;let d=e,g=0;for(;g<u;g++){const i=a[g];if(!Te(d,i))return e;d=d[i]||(d[i]={})}return d[a[u]]=t,e},c=function(e,n,t){const r=Array.isArray(n)?n:n.split(t||"/"),a=r.length-1;let u=e,d=0;for(;d<a;d++){const g=r[d];if(!Te(u,g))return e;const i=u[g];if(!i)return e;u=i}return delete u[r[a]],e},C=function(e){return C.id=C.id||1,e.id=void 0===e.id?"j_"+C.id++:e.id,e.id},N=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},D=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var r in e)void 0===t[r]&&(t[r]=e[r]);n=t}var a=n.target;if(a){var u=a.correspondingUseElement;u&&(n.target=u)}return n},W=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var r=(new Date).getTime(),a=Math.max(0,16-(r-n)),u=setTimeout(function(){t(r+a)},a);return n=r+a,u}}return function(t,r,...a){return e(void 0!==r?t.bind(r,...a):t)}}(),se=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),be=function(e){return Sn(e)&&"%"===e.slice(-1)},Oe=function(e,n){var r=parseFloat(e);if(Number.isNaN(r))return null;var u,a={};if(a.value=r,null==n)u="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;u=n.join("|")}else Sn(n)&&(u=n);var d=function t(g){var i=new RegExp("(?:\\d+(?:\\.\\d+)*)("+g+")$").exec(e);return i?i[1]:null}(u);return null===d?null:(a.unit=d,a)},Tt=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,r,a,u;return t=r=a=u=0,isFinite(e.vertical)&&(t=a=+e.vertical),isFinite(e.horizontal)&&(r=u=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(a=+e.bottom),isFinite(e.left)&&(u=+e.left),{top:t,right:r,bottom:a,left:u}},It={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var r=(11-6*n-11*e)/4;return-r*r+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(r){var a=e(r);return a<n?n:a>t?t:a}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},xr={number:function(e,n){var t=n-e;return function(r){return e+t*r}},object:function(e,n){var t=Object.keys(e);return function(r){var a,u,d={};for(a=t.length-1;-1!=a;a--)d[u=t[a]]=e[u]+(n[u]-e[u])*r;return d}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),r=parseInt(n.slice(1),16),a=255&t,u=(255&r)-a,d=65280&t,g=(65280&r)-d,i=16711680&t,s=(16711680&r)-i;return function(l){return"#"+(1<<24|a+u*l&255|d+g*l&65280|i+s*l&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=t.exec(e),a=t.exec(n),u=a[1].indexOf("."),d=u>0?a[1].length-u-1:0,g=+a[1]-(e=+r[1]),i=r[2];return function(s){return(e+g*s).toFixed(d)+i}}},un={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return ar('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return ar('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return ar('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ar(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ar('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ar('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ar('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return ar('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ar('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return ar('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return ar('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},ar=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(r){for(var a=Array.from(arguments),u=a.slice(1,4).find(function(i){return!!i}),d=u.split("."),g=t[d.shift()];void 0!==g&&d.length;)g=g[d.shift()];return void 0!==g?g:""})}},_t=L.assign,Vn=L.defaults,gi=L.defaultsDeep,zr=L.invokeMap||L.invoke,Ri=L.sortedIndexBy||L.sortedIndex,ko=L.uniqBy||L.uniq,Jt=L.clone,Qn=L.cloneDeep,vi=L.isEmpty,Lo=L.isEqual,vn=L.isFunction,ln=L.isPlainObject,Qt=L.toArray,Vs=L.groupBy,ku=L.flattenDeep,Pa=L.without,Lu=L.difference,gs=L.union,pr=L.has,sr=L.result,lo=L.omit,oi=L.pick,Zn=L.forIn,Ia=L.camelCase,Bs=L.uniqueId,br=function(){if(L.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=vn(n)?n:co;return e.push(function(r,a){var u=t(r,a);return void 0!==u?u:Array.isArray(r)&&!Array.isArray(a)?a:void 0}),L.mergeWith.apply(this,e)}return L.merge.apply(this,arguments)},mn=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},an=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},Sn=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},co=function(){};var e,n,_r=h(71066);function Hs(e){e=ko(e);const n=Qt(e).reduce(function(t,r){return t[r.id]=r.clone(),t},{});return Qt(e).forEach(function(t){const r=n[t.id];if(r.isLink()){const d=r.source(),g=r.target();d.id&&n[d.id]&&r.prop("source/id",n[d.id].id),g.id&&n[g.id]&&r.prop("target/id",n[g.id].id)}const a=t.get("parent");a&&n[a]&&r.set("parent",n[a].id);const u=Qt(t.get("embeds")).reduce(function(d,g){return n[g]&&d.push(n[g].id),d},[]);vi(u)||r.set("embeds",u)}),n}const Wi={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},js=Object.keys(Wi).map(e=>Wi[e]).join(""),mi="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Ce=/\s/g,He=new RegExp(`^(${mi}\\*)?([${js}])([-+]{1,2}${mi})?$`,"g");function Me(e){throw new Error(`Invalid calc() expression: ${e}`)}function ct(e,n){const t=He.exec(e.replace(Ce,""));t||Me(e),He.lastIndex=0;const[,r=1,a,u=0]=t,{x:d,y:g,width:i,height:s}=n;let l=0;switch(a){case Wi.width:l=i;break;case Wi.height:l=s;break;case Wi.x:l=d;break;case Wi.y:l=g;break;case Wi.minimum:l=Math.min(s,i);break;case Wi.maximum:l=Math.max(s,i);break;case Wi.diagonal:l=Math.sqrt(s*s+i*i)}return parseFloat(r)*l+function Vt(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(u)}function cn(e){return"string"==typeof e&&e.includes("calc")}const _n="calc(".length;function Ro(e,n){let t=e,r=0;for(;;){let a=t.indexOf("calc(",r);if(-1===a)return t;let u=a+_n,d=1;e:for(;;){switch(t[u]){case"(":d++;break;case")":if(d--,0===d)break e;break;case void 0:Me(t)}u++}let g=t.slice(a+_n,u);cn(g)&&(g=Ro(g,n));const i=String(ct(g,n));t=t.slice(0,a)+i+t.slice(u+1),r=a+i.length}}function fo(e,n){return function(t,r){var a=be(t);t=parseFloat(t),a&&(t/=100);var u={};if(isFinite(t)){var d=a||t>=0&&t<=1?t*r[n]:Math.max(t+r[n],0);u[e]=d}return u}}function J(e,n,t){return function(r,a){var d,u=be(r);if(r=parseFloat(r),u&&(r/=100),isFinite(r)){var g=a[t]();d=u||r>0&&r<1?g[e]+a[n]*r:g[e]+r}var i=ge();return i[e]=d||0,i}}function ce(e,n,t){return function(r,a){var u;u="middle"===r?a[n]/2:r===t?a[n]:isFinite(r)?r>-1&&r<1?-a[n]*r:-r:be(r)?a[n]*parseFloat(r)/100:0;var d=ge();return d[e]=-(a[e]+u),d}}function xe(e,n){var t="joint-shape",r=n&&n.resetOffset;return function(a,u,d){var g=yt(d),i=g.data(t);if(!i||i.value!==a){var s=e(a);i={value:a,shape:s,shapeBBox:s.bbox()},g.data(t,i)}var l=i.shape.clone(),f=i.shapeBBox.clone(),y=f.origin(),w=u.origin();f.x=w.x,f.y=w.y;var M=u.maxRectScaleToFit(f,w);return l.scale(0===f.width||0===u.width?1:M.sx,0===f.height||0===u.height?1:M.sy,y),r&&l.translate(-y.x,-y.y),l}}function Ve(e){var t=xe(function n(r){return new gt(Ie.normalizePathData(r))},e);return function(r,a,u){return{d:t(r,a,u).serialize()}}}function Se(e){var n=xe(bn,e);return function(t,r,a){return{points:n(t,r,a).serialize()}}}function je(e,n){var t=new ge(1,0);return function(r){var a,u,d=this[e](r);return d?(u=n.rotate?d.vector().vectorAngle(t):0,a=d.start):(a=this.path.start,u=0),0===u?{transform:"translate("+a.x+","+a.y+")"}:{transform:"translate("+a.x+","+a.y+") rotate("+u+")"}}}function Ne(e){return function(t,r,a){const u=Ie(a);u.attr(e)!==t&&u.attr(e,t)}}function tt(e,n,t){return void 0!==t.text}function ot(){return this.model.isLink()}function Et(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(n["stroke-opacity"]=r,n["fill-opacity"]=r),n}function Pt(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const qe={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Ne("href")},xlinkHref:{set:Ne("xlink:href")},filter:{qualify:ln,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:ln,set:Pt},stroke:{qualify:ln,set:Pt},sourceMarker:{qualify:ln,set:function(e,n,t,r){return e=_t(Et(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:ln,set:function(e,n,t,r){return e=_t(Et(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:ln,set:function(e,n,t,r){return e=_t(Et(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!ln(t.textWrap)},set:function(e,n,t,r){var a=yt(t),u="joint-text",d=a.data(u),g=oi(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:i}=g;cn(i)&&(g.x=Ro(i,n));var s=g.fontSize=r["font-size"]||r.fontSize,l=JSON.stringify([e,g]);if(void 0===d||d!==l){s&&t.setAttribute("font-size",s);var f=g.textPath;if(mn(f)){var y=f.selector;if("string"==typeof y){var w=this.findBySelector(y)[0];w instanceof SVGPathElement&&(g.textPath=_t({"xlink:href":"#"+w.id},f))}}Ie(t).text(""+e,g),a.data(u,l)}}},textWrap:{qualify:ln,set:function(e,n,t,r){var a=e.width||0,u={};u.width=be(a)?n.width*parseFloat(a)/100:a<=0?n.width+a:a;var d=e.height||0;u.height=be(d)?n.height*parseFloat(d)/100:d<=0?n.height+d:d;var g,i=e.text;void 0===i&&(i=r.text),g=void 0!==i?function(e,n,t={},r={}){var a=n.width,u=n.height,d=r.svgDocument||Ie("svg").node,g=Ie("tspan").node,i=Ie("text").attr(t).append(g).node,s=document.createTextNode("");i.style.opacity=0,i.style.display="block",g.style.display="block",g.appendChild(s),d.appendChild(i),r.svgDocument||document.body.appendChild(d);var l=r.separator||" ",f=r.eol||"\n",y=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,w=r.maxLineCount;an(w)||(w=1/0);for(var re,ne,T,M=e.split(l),z=[],X=[],R=0,j=0,Z=M.length;R<Z;R++){var ie=M[R];if(ie){var he=!1;if(f&&ie.indexOf(f)>=0){if(ie.length>1){for(var ye=ie.split(f),Ee=0,Ge=ye.length-1;Ee<Ge;Ee++)ye.splice(2*Ee+1,0,f);M.splice(R,1,...ye.filter(Ot=>""!==Ot)),R--,Z=M.length;continue}X[++j]="",he=!0}if(!he)if(s.data=X[j]?X[j]+" "+ie:ie,g.getComputedTextLength()<=a)X[j]=s.data,(re||ne)&&(z[j++]=!0,re=0,ne=0);else{if(!X[j]||re){var ze=!!re;if(re=ie.length-1,ze||!re){if(!re){if(!X[j]){X=[];break}M.splice(R,2,ie+M[R+1]),Z--,z[j++]=!0,R--;continue}M[R]=ie.substring(0,re),M[R+1]=ie.substring(re)+(void 0===M[R+1]?"":M[R+1])}else{if(ne)M.splice(R,2,M[R]+M[R+1]),ne=0;else{var Xe=ie.search(y);Xe>-1&&Xe!==ie.length-1&&0!==Xe&&(ne=Xe+1,re=0),M.splice(R,1,ie.substring(0,ne||re),ie.substring(ne||re)),Z++}j&&!z[j-1]&&j--}R--;continue}j++,R--}var Je=null;if(X.length>w)Je=w-1;else if(void 0!==u){var nt;void 0===T&&(T=(nt="auto"===t.lineHeight?{value:1.5,unit:"em"}:Oe(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===nt.unit&&(T*=i.getBBox().height)),T*X.length>u&&(Je=Math.floor(u/T)-1)}if(null!==Je){X.splice(Je+1);var ht=r.ellipsis;if(!ht||Je<0)break;"string"!=typeof ht&&(ht="\u2026");var Cn=X[Je];if(!Cn&&!he)break;var Rn,At,yn=Cn.length;do{if(At=Cn[yn],Rn=Cn.substring(0,yn),At?At.match(l)&&(Rn+=At):Rn+="string"==typeof l?l:" ",s.data=Rn+=ht,g.getComputedTextLength()<=a){X[Je]=Rn;break}yn--}while(yn>=0);break}}}return r.svgDocument?d.removeChild(i):document.body.removeChild(d),X.join(f)}(""+i,u,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",qe.text.set.call(this,g,n,t,r)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var r=yt(t),a="joint-title",u=r.data(a);if(void 0===u||u!==e){r.data(a,e);var d=t.firstChild;if(d&&"TITLE"===d.tagName.toUpperCase())d.textContent=e;else{var g=document.createElementNS(t.namespaceURI,"title");g.textContent=e,t.insertBefore(g,d)}}}},lineHeight:{qualify:tt},textVerticalAnchor:{qualify:tt},textPath:{qualify:tt},annotations:{qualify:tt},eol:{qualify:tt},displayEmpty:{qualify:tt},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:ln,set:function(e,n,t){yt(t).css(e)}},html:{set:function(e,n,t){yt(t).html(e+"")}},ref:{},refX:{position:J("x","width","origin")},refY:{position:J("y","height","origin")},refDx:{position:J("x","width","corner")},refDy:{position:J("y","height","corner")},refWidth:{set:fo("width","width")},refHeight:{set:fo("height","height")},refRx:{set:fo("rx","width")},refRy:{set:fo("ry","height")},refRInscribed:{set:function(e){var n=fo("r","width"),t=fo("r","height");return function(r,a){return(a.height>a.width?n:t)(r,a)}}()},refRCircumscribed:{set:function(e,n){var t=be(e);e=parseFloat(e),t&&(e/=100);var a,r=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(a=t||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:a}}},refCx:{set:fo("cx","width")},refCy:{set:fo("cy","height")},xAlignment:{offset:ce("x","width","right")},yAlignment:{offset:ce("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:Ve({resetOffset:!0})},refDKeepOffset:{set:Ve({resetOffset:!1})},refPointsResetOffset:{set:Se({resetOffset:!0})},refPointsKeepOffset:{set:Se({resetOffset:!1})},connection:{qualify:ot,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),a=r.divideAtLength(t),u=r.divideAtLength(-t);a&&u&&(n=`${a[0].serialize()} ${u[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:ot,set:je("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:ot,set:je("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:ot,set:je("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:ot,set:je("getTangentAtRatio",{rotate:!1})}};qe["xlink:href"]=qe.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{qe[e]={qualify:cn,set:function(t,r){return{[e]:Ro(t,r)}}}}),qe.refR=qe.refRInscribed,qe.refD=qe.refDResetOffset,qe.refPoints=qe.refPointsResetOffset,qe.atConnectionLength=qe.atConnectionLengthKeepGradient,qe.atConnectionRatio=qe.atConnectionRatioKeepGradient,qe.refX2=qe.refX,qe.refY2=qe.refY,qe.refWidth2=qe.refWidth,qe.refHeight2=qe.refHeight,qe["ref-x"]=qe.refX,qe["ref-y"]=qe.refY,qe["ref-dy"]=qe.refDy,qe["ref-dx"]=qe.refDx,qe["ref-width"]=qe.refWidth,qe["ref-height"]=qe.refHeight,qe["x-alignment"]=qe.xAlignment,qe["y-alignment"]=qe.yAlignment;const Zt=qe,qt=_r.Model.extend({constructor:function(e,n){var t,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Bs("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(r=this.parse(r,n)||{}),(t=sr(this,"defaults"))&&(r=br({},t,r)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=sr(this.constructor.prototype,"defaults").attrs||{},r={};Zn(this.attributes.attrs,function(u,d){const g=n[d];Zn(u,function(i,s){mn(i)&&!Array.isArray(i)?Zn(i,function(l,f){(!g||!g[s]||!Lo(g[s][f],l))&&(r[d]=r[d]||{},(r[d][s]||(r[d][s]={}))[f]=l)}):(!g||!Lo(g[s],i))&&(r[d]=r[d]||{},r[d][s]=i)})});const a=Qn(lo(this.attributes,"attrs"));return a.attrs=r,a},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};Zn(this.get("attrs"),function(u,d){u&&u.port&&(void 0!==u.port.id?n[u.port.id]=u.port:n[u.port]={id:u.port})});var t={};Zn(e,function(u,d){n[d]||(t[d]=!0)}),this.graph&&!vi(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(u){t[u.get("target").port]&&u.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(u){t[u.get("source").port]&&u.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const a=this.getEmbeddedCells();for(let u=0,d=a.length;u<d;u++){const g=a[u];g&&g.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],t=t-r.length+1;var a=n.get("cells"),u=a.indexOf(this)!==a.length-r.length;u||(u=r.some(function(d,g){return d.get("z")!==t+g})),u&&(this.startBatch("to-front"),t+=r.length,r.forEach(function(d,g){d.set("z",t+g,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var u=0!==n.get("cells").indexOf(this);u||(u=r.some(function(d,g){return d.get("z")!==t+g})),u&&(this.startBatch("to-back"),t-=r.length,r.forEach(function(d,g){d.set("z",t+g,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const r=_t([],this.get("embeds"));e.forEach(a=>{r[a.isLink()?"unshift":"push"](a.id),a.parent(this.id,n)}),this.set("embeds",ko(r),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(r=>r.unset("parent",n)),this.set("embeds",Pa(this.get("embeds"),...e.map(r=>r.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var r=t.shift();n.push(r),t.push.apply(t,r.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(a){n.push.apply(n,a.getEmbeddedCells(e))});else n=Qt(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=Sn(e)?e:e.id,r=this.parent();if(n=Vn({deep:!0},n),this.graph&&n.deep){for(;r;){if(r===t)return!0;r=this.graph.getCell(r).parent()}return!1}return r===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return Qt(Hs([this].concat(this.getEmbeddedCells({deep:!0}))));var n=_r.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var r="/",a=Sn(e);if(a||Array.isArray(e)){if(arguments.length>1){var u,d;a?d=(u=e).split("/"):(u=e.join(r),d=e.slice());var g=d[0],i=d.length;if((t=t||{}).propertyPath=u,t.propertyValue=n,t.propertyPathArray=d,1===i)return this.set(g,n,t);for(var s={},l=s,f=g,y=1;y<i;y++){var w=d[y],M=Number.isFinite(a?Number(w):w);l=l[f]=M?[]:{},f=w}s=_e(s,d,n,"/");var z=br({},this.attributes);t.rewrite&&c(z,u,"/");var X=br(z,s);return this.set(g,X[g],t)}return fe(this.attributes,e,r)}return this.set(br({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),r=t[0];if("attrs"===r&&(n.dirty=!0),1===t.length)return this.unset(e,n);var a=t.slice(1),u=Qn(this.get(r));return c(u,a,"/"),this.set(r,u,n)},attr:function(e,n,t){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):Sn(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,r){r=r||"/",t=_t({duration:100,delay:10,timingFunction:It.linear,valueFunction:xr.number},t);var d,u=0,g=function(f){var y,w,M;(w=(f-=u=u||f)/t.duration)<1?this._transitionIds[e]=y=W(g):(w=1,delete this._transitionIds[e]),M=d(t.timingFunction(w)),t.transitionId=y,this.prop(e,M,t),y||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:i}=this;let s;return s=setTimeout(f=>{i[e]&&(i[e]=Pa(i[e],s),0===i[e].length&&delete i[e]),this.stopPendingTransitions(e,r),d=t.valueFunction(fe(this.attributes,e,r),n),this._transitionIds[e]=W(f),this.trigger("transition:start",this,e)},t.delay,g),i[e]||(i[e]=[]),i[e].push(s),s},getTransitions:function(){return gs(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let r=Object.keys(t);if(e){const a=e.split(n);r=r.filter(u=>Lo(a,u.split(n).slice(0,a.length)))}return r.forEach(a=>{t[a].forEach(d=>clearTimeout(d)),delete t[a]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let r=Object.keys(t);if(e){const a=e.split(n);r=r.filter(u=>Lo(a,u.split(n).slice(0,a.length)))}r.forEach(a=>{se(t[a]),delete t[a],this.trigger("transition:end",this,a)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,_t({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,_t({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new ge(0,0)},getPointFromConnectedLink:function(){return new ge},getBBox:function(){return new it(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const r=new ge(n,t);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||Zt[e]},define:function(e,n,t,r){t=_t({defaults:gi({type:e},n,this.prototype.defaults)},t);var a=this.extend(t,r);return"undefined"!=typeof joint&&pr(joint,"shapes")&&_e(joint.shapes,e,a,"."),a}}),vt=qt.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?Jt(this.get("source")):e instanceof qt?((r=Jt(n)||{}).id=e.id,this.set("source",r,t)):ln(e)?this.set("source",r=e,n):((r=Jt(n)||{}).x=e.x,r.y=e.y,this.set("source",r,t));var r},target:function(e,n,t){return void 0===e?Jt(this.get("target")):e instanceof qt?((r=Jt(n)||{}).id=e.id,this.set("target",r,t)):ln(e)?this.set("target",r=e,n):((r=Jt(n)||{}).x=e.x,r.y=e.y,this.set("target",r,t));var r},router:function(e,n,t){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?Jt(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var a="object"==typeof e||"function"==typeof e;return this.set("router",a?e:{name:e,args:n},a?n:t)},connector:function(e,n,t){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?Jt(r):r:this.get("smooth")?{name:"smooth"}:null}var a="object"==typeof e||"function"==typeof e;return this.set("connector",a?e:{name:e,args:n},a?n:t)},label:function(e,n,t){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var r=this.labels(),a=r.length;return(e=isFinite(e)&&null!==e?0|e:a)<0&&(e=a+e+1),r.splice(e,0,n),this.labels(r,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var a=this._normalizeVertex(n);return this.prop(["vertices",e],a,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],r=0;r<e.length;r++){var a=e[r],u=this._normalizeVertex(a);t.push(u)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),a=r.length;(e=isFinite(e)&&null!==e?0|e:a)<0&&(e=a+e+1);var u=this._normalizeVertex(n);return r.splice(e,0,u),this.vertices(r,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return ln(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+n}},t)},scale:function(e,n,t,r){return this.applyToPoints(function(a){return ge(a).scale(e,n,t).toJSON()},r)},applyToPoints:function(e,n){if(!vn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:r,target:a}=this.attributes;r.id||(t.source=e(r)),a.id||(t.target=e(a));var u=this.vertices();return u.length>0&&(t.vertices=u.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ge(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ge(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ge),this.getTargetPoint()];return new bn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),r=this.getTargetElement(),a=this.getParentCell();t&&r&&(n=t===r||t.isEmbeddedIn(r)?r:r.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,r)),a&&(!n||n.id!==a.id)&&a.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,r=n.id,a=t.id;if(!r||!a)return!1;var u=r===a;if(!u&&e.deep&&this.graph){var d=this.getSourceCell(),g=this.getTargetCell();u=d.isEmbeddedIn(g)||g.isEmbeddedIn(d)}return u},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=Sn(e)||an(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function Un(e,n,t){var r=e.toJSON();return r.angle=n||0,Vn({},t,r)}function Yn(e,n,t){return e.map(function(r,a,u){var d=this.pointAt((a+.5)/u.length);return(r.dx||r.dy)&&d.offset(r.dx||0,r.dy||0),Un(d.round(),0,r)},Br(n,t))}function Cr(e,n,t,r){var a=n.center(),u=n.width/n.height,d=n.topMiddle(),g=rr.fromRect(n);return e.map(function(i,s,l){var f=t+r(s,l.length),y=d.clone().rotate(a,-f).scale(u,1,a),w=i.compensateRotation?-g.tangentTheta(y):0;return(i.dx||i.dy)&&y.offset(i.dx||0,i.dy||0),i.dr&&y.move(a,i.dr),Un(y.round(),w,i)})}function In(e,n){var t=n.x;Sn(t)&&(t=parseFloat(t)/100*e.width);var r=n.y;return Sn(r)&&(r=parseFloat(r)/100*e.height),Xr(t||0,r||0)}const ea=function(e,n,t){return e.map(In.bind(null,n))},ho=function(e,n,t){return t.fn(e,n,t)},Ur=function(e,n,t){return Yn(e,In(n,t.start||n.origin()),In(n,t.end||n.corner()))},vs=function(e,n,t){return Yn(e,n.origin(),n.bottomLeft())},Aa=function(e,n,t){return Yn(e,n.topRight(),n.corner())},zs=function(e,n,t){return Yn(e,n.origin(),n.topRight())},Hf=function(e,n,t){return Yn(e,n.bottomLeft(),n.corner())},jf=function(e,n,t){var a=t.step||360/e.length;return Cr(e,n,t.startAngle||0,function(u){return u*a})},zf=function(e,n,t){var a=t.step||20;return Cr(e,n,t.startAngle||0,function(u,d){return(u+.5-d/2)*a})};function $i(e,n){return gi({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function ms(e,n,t,r){r=Vn({},r,{offset:15});var d,g,i,s,a=n.center().theta(e),u=Us(n),l=r.offset,f=0;a<u[1]||a>u[2]?(i=".3em",d=l,g=0,s="start"):a<u[0]?(i="0",d=0,g=-l,t?(f=-90,s="start"):s="middle"):a<u[3]?(i=".3em",d=-l,g=0,s="end"):(i=".6em",d=0,g=l,t?(f=90,s="start"):s="middle");var y=Math.round;return $i({x:y(d),y:y(g),angle:f,attrs:{".":{y:i,"text-anchor":s}}})}function Us(e){var n=e.center(),t=n.theta(e.origin()),r=n.theta(e.bottomLeft()),a=n.theta(e.corner());return[t,n.theta(e.topRight()),a,r]}function Xl(e,n,t,r){var u,d,g,i,a=n.center().theta(e),s=(r=Vn({},r,{offset:15})).offset,l=0,f=Us(n);a<f[1]||a>f[2]?(g=".3em",u=-s,d=0,i="end"):a<f[0]?(g=".6em",u=0,d=s,t?(l=90,i="start"):i="middle"):a<f[3]?(g=".3em",u=s,d=0,i="start"):(g="0em",u=0,d=-s,t?(l=-90,i="start"):i="middle");var y=Math.round;return $i({x:y(u),y:y(d),angle:l,attrs:{".":{y:g,"text-anchor":i}}})}function Ru(e,n,t){t=Vn({},t,{offset:20});var i,r=Xr(0,0),a=-e.theta(r),u=a,d=e.clone().move(r,t.offset).difference(e).round(),g=".3em";(a+90)%180==0?(i=n?"end":"middle",!n&&-270===a&&(g="0em")):a>-270&&a<-90?(i="start",u=a-180):i="end";var s=Math.round;return $i({x:s(d.x),y:s(d.y),angle:n?u:0,attrs:{".":{y:g,"text-anchor":i}}})}const Uf=function(e,n,t){return $i(t,n)},Gf=function(e,n,t){return $i(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},wr=function(e,n,t){return $i(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},Gr=function(e,n,t){return $i(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Wf=function(e,n,t){return $i(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},$f=function(e,n,t){return ms(e,n,!0,t)},Kl=function(e,n,t){return ms(e,n,!1,t)},Yf=function(e,n,t){return Xl(e,n,!0,t)},Nu=function(e,n,t){return Xl(e,n,!1,t)},ys=function(e,n,t){return Ru(e.difference(n.center()),!1,t)},Du=function(e,n,t){return Ru(e.difference(n.center()),!0,t)};var Ma=function(e){var n=Qn(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=E,this._init(n)};Ma.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),r=this.getPortsByGroup(e),a=t.position||{},u=a.name,d=this.portLayoutNamespace;d[u]||(u="left");var g=a.args||{},i=r.map(function(f){return f&&f.position&&f.position.args}),s=d[u](i,n,g),l={ports:r,result:[]};return Qt(s).reduce(function(f,y,w){var M=f.ports[w];return f.result.push({portId:M.id,portTransformation:y,labelTransformation:this._getPortLabelLayout(M,ge(y),n),portAttrs:M.attrs,portSize:M.size,labelSize:M.label.size}),f}.bind(this),l),l.result},_getPortLabelLayout:function(e,n,t){var r=this.portLabelLayoutNamespace,a=e.label.position.name||"left";return r[a]?r[a](n,t,e.label.position.args):null},_init:function(e){if(mn(e.groups))for(var n=Object.keys(e.groups),t=0,r=n.length;t<r;t++){var a=n[t];this.groups[a]=this._evaluateGroup(e.groups[a])}for(var u=Qt(e.items),d=0,g=u.length;d<g;d++)this.ports.push(this._evaluatePort(u[d]))},_evaluateGroup:function(e){return br(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=_t({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=br({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=br({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=_t({},t.size,n.size),n},_getZIndex:function(e,n){return an(n.z)?n.z:an(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return br({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var r,t={};vn(e)?(r="fn",t.fn=e):Sn(e)?r=e:void 0===e?r=n?"left":null:Array.isArray(e)?(r="absolute",t.x=e[0],t.y=e[1]):mn(e)&&(r=e.name,_t(t,e.args));var a={args:t};return r&&(a.name=r),a},_getLabel:function(e,n){var t=e.label||{},r=t;return r.position=this._getPosition(t.position,n),r}};const xs={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};Qt(e.items).forEach(function(g){n[g.id]=!0});var t=this.previous("ports")||{},r={};Qt(t.items).forEach(function(g){n[g.id]||(r[g.id]=!0)});var a=this.graph;a&&!vi(r)&&(a.getConnectedLinks(this,{inbound:!0}).forEach(function(g){r[g.get("target").port]&&g.remove()}),a.getConnectedLinks(this,{outbound:!0}).forEach(function(g){r[g.get("source").port]&&g.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return Qn(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=Qt(this.prop(["ports","items"])).filter(t=>t.group===e);return Qn(n)},getPort:function(e){return Qn(Qt(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,it(this.size())).reduce(function(t,r){var a=r.portTransformation;return t[r.portId]={x:a.x,y:a.y,angle:a.angle},t},{})},getPortIndex:function(e){var n=mn(e)?e.id:e;return this._isValidPortId(n)?Qt(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!mn(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=_t([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const r="number"==typeof e?e:this.getPortIndex(e);if(!mn(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const a=_t([],this.prop("ports/items"));return a.splice(r,0,n),this.prop("ports/items",a,t),this},portProp:function(e,n,t,r){var a=this.getPortIndex(e);if(-1===a)throw new Error("Element: unable to find port with id "+e);var u=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?u[0]=["ports","items",a].concat(n):Sn(n)?u[0]=["ports/items/",a,"/",n].join(""):(u=["ports/items/"+a],ln(n)&&(u.push(n),u.push(t))),this.prop.apply(this,u)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=Qt((e=e||{}).items);return t.forEach(function(r){"object"!=typeof r&&n.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),ko(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!mn(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",_t([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},r=this.getPortIndex(e);if(-1!==r){const a=_t([],this.prop(["ports","items"]));a.splice(r,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],a,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,r;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;r=_t([],this.prop(["ports","items"])).filter(function(u){return!e.some(function(d){const g=mn(d)?d.id:d;return u.id===g})})}else t=e||{},r=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],r,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new Ma(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var r=t.filter(function(u){if(!n.find(function(d){return d.id===u.id}))return u}),a=n.filter(function(u){if(!t.find(function(d){return d.id===u.id}))return u});a.length>0&&this.trigger("ports:remove",this,a),r.length>0&&this.trigger("ports:add",this,r)}}},bs={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,r=n.node.childNodes.length;t<r;t++)e.push(n.node.childNodes[t]);var a=Vs(this.model._portSettingsData.getPorts(),"z"),u="auto";Qt(a[u]).forEach(function(l){var f=this._getPortElement(l);n.append(f),e.push(f)},this);for(var d=Object.keys(a),g=0;g<d.length;g++){var i=d[g];if(i!==u){var s=parseInt(i,10);this._appendPorts(a[i],s,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var r=this._getContainerElement(),a=Qt(e).map(this._getPortElement,this);t[n]||n<0?Ie(t[Math.max(n,0)]).before(a):r.append(a)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const r=t.portContentElement.node,a=t.portContentSelectors,[u=null]=this.findBySelector(n,r,a);return u},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){zr(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,r,a;var u=Ie(this.portContainerMarkup).addClass("joint-port"),d=this._getPortMarkup(e);if(Array.isArray(d)){var g=this.parseDOMJSON(d,u.node),i=g.fragment;n=i.childNodes.length>1?Ie("g").append(i):Ie(i.firstChild),a=g.selectors}else n=Ie(d),Array.isArray(n)&&(n=Ie("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const s=this._getPortLabelMarkup(e.label);if(Array.isArray(s)){const{fragment:y,selectors:w}=this.parseDOMJSON(s,u.node),M=y.childNodes.length;M>0&&(r=w,t=1===M?Ie(y.firstChild):Ie("g").append(y))}else t=Ie(s),Array.isArray(t)&&(t=Ie("g").append(t));var l;if(a&&r){for(var f in r)if(a[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");l=_t({},a,r)}else l=a||r;return u.append(n.addClass("joint-port-body")),t&&u.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:u,portLabelElement:t,portSelectors:l,portLabelSelectors:r,portContentElement:n,portContentSelectors:a},u},_updatePortGroup:function(e){for(var n=it(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),r=0,a=t.length;r<a;r++){var u=t[r],g=this._portElementsCache[u.portId]||{},i=u.portTransformation;this.applyPortTransform(g.portElement,i),this.updateDOMSubtreeAttributes(g.portElement.node,u.portAttrs,{rootBBox:new it(u.portSize),selectors:g.portSelectors});var s=u.labelTransformation;s&&g.portLabelElement&&(this.applyPortTransform(g.portLabelElement,s,-i.angle||0),this.updateDOMSubtreeAttributes(g.portLabelElement.node,s.attrs,{rootBBox:new it(u.labelSize),selectors:g.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var r=Ie.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ar=qt.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),qt.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const r=an(n);t=(r?t:e)||{};const{parentRelative:a,deep:u,restrictedArea:d}=t;let g;if(a){if(!this.graph)throw new Error("Element must be part of a graph.");const i=this.getParentCell();i&&!i.isLink()&&(g=i.get("position"))}if(r){if(g&&(e+=g.x,n+=g.y),u||d){const{x:i,y:s}=this.get("position");this.translate(e-i,n-s,t)}else this.set("position",{x:e,y:n},t);return this}{const i=ge(this.get("position"));return a?i.difference(g):i}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var r=this.get("position")||{x:0,y:0},a=t.restrictedArea;if(a&&t.translateBy===this.id)if("function"==typeof a){var u=a.call(this,r.x+e,r.y+n,t);e=u.x-r.x,n=u.y-r.y}else{var d=this.getBBox({deep:!0}),g=r.x-d.x,i=r.y-d.y,s=Math.max(a.x+g,Math.min(a.x+a.width+g-d.width,r.x+e)),l=Math.max(a.y+i,Math.min(a.y+a.height+i-d.height,r.y+n));e=s-r.x,n=l-r.y}var f={x:r.x+e,y:r.y+n};return t.tx=e,t.ty=n,t.transition?(mn(t.transition)||(t.transition={}),this.transition("position",f,_t({},t.transition,{valueFunction:xr.object})),zr(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",f,t),zr(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(mn(e)&&(t=n,n=an(e.height)?e.height:r.height,e=an(e.width)?e.width:r.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var r=this.get("size");switch(t.direction){case"left":case"right":n=r.height;break;case"top":case"bottom":e=r.width}var d,a=De(this.get("angle")||0),u=this.getBBox();if(a){var g={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(g+=Math.floor((a+45)/90),g%=4);var i=u[["bottomLeft","corner","topRight","origin"][g]](),s=ge(i).rotate(u.center(),-a),l=Math.sqrt(e*e+n*n)/2,f=g*Math.PI/2;f+=Math.atan(g%2==0?n/e:e/n),f-=bt(a);var y=ge.fromPolar(l,f,s);d=ge(y).offset(e/-2,n/-2)}else switch(d=u.topLeft(),t.direction){case"top":case"top-right":d.offset(0,u.height-n);break;case"left":case"bottom-left":d.offset(u.width-e,0);break;case"top-left":d.offset(u.width-e,u.height-n)}this.set("size",{width:e,height:n},t),this.position(d.x,d.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,r){var a=this.getBBox().scale(e,n,t);return this.startBatch("scale",r),this.position(a.x,a.y,r),this.resize(a.width,a.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(f=>f.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&zr(t,"fitEmbeds",e);const{left:r,right:a,top:u,bottom:d}=Tt(e.padding);let{x:g,y:i,width:s,height:l}=n.getCellsBBox(t);return g-=r,i-=u,s+=r+a,l+=d+u,this.set({position:{x:g,y:i},size:{width:s,height:l}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,r){if(t){var a=this.getBBox().center(),u=this.get("size"),d=this.get("position");a.rotate(t,this.get("angle")-e);var g=a.x-u.width/2-d.x,i=a.y-u.height/2-d.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(d.x+g,d.y+i,r),this.rotate(e,n,null,r),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,r);return this},angle:function(){return De(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:r,rotate:a}=e;if(r&&n){const f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),n.getCellsBBox(f,e)}const{angle:u=0,position:{x:d,y:g},size:{width:i,height:s}}=t,l=new it(d,g,i,s);return a&&l.rotateAroundCenter(u),l},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),r=t.center(),a=e.get(n);if(!a)return r;var u=a.port;if(!u||!this.hasPort(u))return r;var d=this.portProp(u,["group"]),g=this.getPortsPositions(d),i=new ge(g[u]).offset(t.origin()),s=this.angle();return s&&i.rotate(r,-s),i}});_t(Ar.prototype,xs);const Fu={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,r=t>0&&n[0]||[],a=t>1&&n[t-1]||{};return Array.isArray(r)||(a instanceof qt?r=n:r instanceof qt&&(n.length>1&&n.pop(),r=n)),a instanceof qt&&(a={}),e.call(this,r,a)}}},Xf=_r.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&pr(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,u=new("link"===e.type?vt:fe(t.cellNamespace,e.type,".")||Ar)(e,n);return n.dry||(u.graph=t.graph),u},comparator:function(e){return e.get("z")||0}}),No=_r.Model.extend({initialize:function(e,n){var t=new Xf([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});_r.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=_r.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var r;return"object"==typeof e?(r=e,t=n):(r={})[e]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,t),r=lo(r,"cells")),_r.Model.prototype.set.call(this,r,t)},clear:function(e){e=_t({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(r){return r.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof _r.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!Sn(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof _r.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=ku(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=Qt(e).map(function(r){return this._prepareCell(r,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),zr(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,r=n.inbound,a=n.outbound;void 0===r&&void 0===a&&(r=a=!0);var u=[],d={};function g(f,y){if(Zn(f.getOutboundEdges(y.id),function(M,z){if(!d[z]){var X=f.getCell(z);u.push(X),d[z]=!0,t&&(r&&i(f,X),a&&g(f,X))}}.bind(f)),t&&y.isLink()){var w=y.getTargetCell();w&&w.isLink()&&(d[w.id]||(u.push(w),g(f,w)))}}function i(f,y){if(Zn(f.getInboundEdges(y.id),function(M,z){if(!d[z]){var X=f.getCell(z);u.push(X),d[z]=!0,t&&(r&&i(f,X),a&&g(f,X))}}.bind(f)),t&&y.isLink()){var w=y.getSourceCell();w&&w.isLink()&&(d[w.id]||(u.push(w),i(f,w)))}}if(a&&g(this,e),r&&i(this,e),n.deep){var s=e.getEmbeddedCells({deep:!0}),l={};s.forEach(function(f){f.isElement()&&(l[f.id]=!0)}),s.forEach(function(f){f.isLink()||(a&&Zn(this.getOutboundEdges(f.id),function(y,w){if(!d[w]){var M=this.getCell(w),{source:z,target:X}=M.attributes,re=z.id,ne=X.id;if(!n.includeEnclosed&&re&&l[re]&&ne&&l[ne])return;u.push(this.getCell(w)),d[w]=!0}}.bind(this)),r&&Zn(this.getInboundEdges(f.id),function(y,w){if(!d[w]){var M=this.getCell(w),{source:z,target:X}=M.attributes,re=z.id,ne=X.id;if(!n.includeEnclosed&&re&&l[re]&&ne&&l[ne])return;u.push(this.getCell(w)),d[w]=!0}}.bind(this)))},this)}return u},getNeighbors:function(e,n){n||(n={});var t=n.inbound,r=n.outbound;void 0===t&&void 0===r&&(t=r=!0);var a=this.getConnectedLinks(e,n).reduce(function(g,i){var{source:s,target:l}=i.attributes,f=i.hasLoop(n);if(t&&pr(s,"id")&&!g[s.id]){var y=this.getCell(s.id);y.isElement()&&(f||y&&y!==e&&(!n.deep||!y.isEmbeddedIn(e)))&&(g[s.id]=y)}if(r&&pr(l,"id")&&!g[l.id]){var w=this.getCell(l.id);w.isElement()&&(f||w&&w!==e&&(!n.deep||!w.isEmbeddedIn(e)))&&(g[l.id]=w)}return g}.bind(this),{});if(e.isLink()){if(t){var u=e.getSourceCell();u&&u.isElement()&&!a[u.id]&&(a[u.id]=u)}if(r){var d=e.getTargetCell();d&&d.isElement()&&!a[d.id]&&(a[d.id]=d)}}return Qt(a)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var r=[],a=t.get("parent");a;)r.push(a),a=this.getCell(a).get("parent");return r},this);e=e.sort(function(t,r){return t.length-r.length});var n=Qt(e.shift()).find(function(t){return e.every(function(r){return r.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},_t({},n=n||{},{outbound:!0})),t},cloneCells:Hs,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],r={},a=[],u=[];return Qt(e).forEach(function(d){r[d.id]||(t.push(d),r[d.id]=d,d.isLink()?u.push(d):a.push(d)),n.deep&&d.getEmbeddedCells({deep:!0}).forEach(function(i){r[i.id]||(t.push(i),r[i.id]=i,i.isLink()?u.push(i):a.push(i))})}),u.forEach(function(d){var{source:g,target:i}=d.attributes;if(g.id&&!r[g.id]){var s=this.getCell(g.id);t.push(s),r[s.id]=s,a.push(s)}if(i.id&&!r[i.id]){var l=this.getCell(i.id);t.push(this.getCell(i.id)),r[l.id]=l,a.push(l)}},this),a.forEach(function(d){this.getConnectedLinks(d,n).forEach(function(i){var{source:s,target:l}=i.attributes;!r[i.id]&&s.id&&r[s.id]&&l.id&&r[l.id]&&(t.push(i),r[i.id]=i)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},_t({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const r={},a={},u=[];for(u.push(e),a[e.id]=0;u.length>0;){var d=u.shift();if(r[d.id]||(r[d.id]=!0,!1===n.call(this,d,a[d.id])))continue;const g=this.getNeighbors(d,t);for(let i=0,s=g.length;i<s;i++){const l=g[i];a[l.id]=a[d.id]+1,u.push(l)}}},dfs:function(e,n,t={}){const r={},a={},u=[];for(u.push(e),a[e.id]=0;u.length>0;){const d=u.pop();if(r[d.id]||(r[d.id]=!0,!1===n.call(this,d,a[d.id])))continue;const g=this.getNeighbors(d,t),i=u.length;for(let s=0,l=g.length;s<l;s++){const f=g[s];a[f.id]=a[d.id]+1,u.splice(i,0,f)}}},getSources:function(){var e=[];return Zn(this._nodes,function(n,t){(!this._in[t]||vi(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return Zn(this._nodes,function(n,t){(!this._out[t]||vi(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||vi(this._in[e.id])},isSink:function(e){return!this._out[e.id]||vi(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var r=(t=t||{}).inbound,a=t.outbound;void 0===r&&void 0===a&&(r=a=!0);var u=!1;return this.getConnectedLinks(e,t).forEach(function(d){var{source:g,target:i}=d.attributes;if(r&&pr(g,"id")&&g.id===n.id||a&&pr(i,"id")&&i.id===n.id)return u=!0,!1}),u},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){zr(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new it(e),{strict:r=!1}=n,a=r?"containsRect":"intersect";return this.getElements().filter(u=>t[a](u.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(r):this.findModelsFromPoint(r[t]())).filter(u=>e.id!==u.id&&!u.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return Qt(e).reduce(function(r,a){const u=a.getBBox({rotate:t});return u?r?r.union(u):u:r},null)},translate:function(e,n,t){var r=this.getCells().filter(function(a){return!a.isEmbedded()});return zr(r,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,r){var a=this.getCellsBBox(t);if(a){var u=Math.max(e/a.width,0),d=Math.max(n/a.height,0);zr(t,"scale",u,d,a.origin(),r)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",_t({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",_t({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(r=>n[r]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:r}=n.attributes;if(t.id&&r.id){var a=n.getSourceCell();if(a&&e.getConnectedLinks(a,{outbound:!0}).filter(function(g){var{source:i,target:s}=g.attributes;return i&&i.id===t.id&&(!i.port||i.port===t.port)&&s&&s.id===r.id&&(!s.port||s.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:r}=n.attributes;return t.id&&r.id}}});!function(e,n,t){if(Sn(t)){if(!Fu[t])throw new Error('Unknown wrapper: "'+t+'"');t=Fu[t]}if(!vn(t))throw new Error("Wrapper must be a function.");Qt(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=t(e[r])})}(No.prototype,0,Fu.cells);const _s={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var r=this.getCell(n),a=t.node(n);e.setPosition?e.setPosition(r,a):r.set("position",{x:a.x-a.width/2,y:a.y-a.height/2})},importLink:function(e,n,t){const a=this.getCell(n.name),u=t.edge(n),d=u.points||[],g=new bn(d);if(e.setVertices||e.setLinkVertices)if(vn(e.setVertices))e.setVertices(a,d);else{g.simplify({threshold:.001});const i=g.points.map(l=>l.toJSON());a.set("vertices",i.slice(1,i.length-1))}if(e.setLabels&&"x"in u&&"y"in u){const i={x:u.x,y:u.y};if(vn(e.setLabels))e.setLabels(a,i,d);else{const s=g.closestPointLength(i),l=g.pointAtLength(s),f=s/g.length(),y=new ge(i).difference(l).toJSON();a.label(0,{position:{distance:f,offset:y}})}}},layout:function(e,n){var t;t=e instanceof No?e:(new No).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(n=Vn(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var a=_s.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(l){return l.id}}),u={},d=n.marginX||0,g=n.marginY||0;if(n.rankDir&&(u.rankdir=n.rankDir),n.align&&(u.align=n.align),n.nodeSep&&(u.nodesep=n.nodeSep),n.edgeSep&&(u.edgesep=n.edgeSep),n.rankSep&&(u.ranksep=n.rankSep),n.ranker&&(u.ranker=n.ranker),d&&(u.marginx=d),g&&(u.marginy=g),a.setGraph(u),r.layout(a,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),_s.fromGraphLib(a,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var i=a.nodes().filter(function(l){return a.children(l).length>0}).map(t.getCell.bind(t)).sort(function(l,f){return f.getAncestors().length-l.getAncestors().length});zr(i,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var s=a.graph();return new it(d,g,Math.abs(s.width-2*d),Math.abs(s.height-2*g))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||co,r=n.importEdge||co,a=this instanceof No?this:new No;return e.nodes().forEach(function(u){t.call(a,u,e,a,n)}),e.edges().forEach(function(u){r.call(a,u,e,a,n)}),a},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=oi(n,"directed","compound","multigraph"),a=new t.Graph(r),u=n.setNodeLabel||co,d=n.setEdgeLabel||co,g=n.setEdgeName||co,i=e.get("cells"),s=0,l=i.length;s<l;s++){var f=i.at(s);if(f.isLink()){var y=f.get("source"),w=f.get("target");if(!y.id||!w.id)break;a.setEdge(y.id,w.id,d(f),g(f))}else if(a.setNode(f.id,u(f)),a.isCompound()&&f.has("parent")){var M=f.get("parent");i.has(M)&&a.setParent(f.id,M)}}return a}};No.prototype.toGraphLib=function(e){return _s.toGraphLib(this,e)},No.prototype.fromGraphLib=function(e,n){return _s.fromGraphLib.call(this,e,n)};const Kf={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(r){t=!1}return this._results[e]=t,t}},Jl=(Ar.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ar.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Ar.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Ar.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Ar.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Ar.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Ar.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ar.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ar.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ar.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ar.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Ar.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=be(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=be(e);t&&(e=parseFloat(e)/100);var r=n.x,a=n.y,u=n.width,d=n.height,i=t?d*e:e,s=Ie.KAPPA,l=s*(u/2),f=s*(t?d*e:e),w=r+u/2,M=r+u,z=a+i,X=z-i,re=a+d-i,ne=a+d;return{d:["M",r,z,"L",r,re,"C",r,re+f,w-l,ne,w,ne,"C",w+l,ne,M,re+f,M,re,"L",M,z,"C",M,z-f,w+l,X,w,X,"C",w-l,X,r,z-f,r,z,"Z"].join(" ")}}}}});var Zf=Kf.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Ar.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Zf]},{attributes:{text:{set:function(e,n,t,r){if(!(t instanceof HTMLElement)){var a=r.style||{},u={text:e,width:-5,height:"100%"},d=_t({textVerticalAnchor:"middle"},a);return Zt.textWrap.set.call(this,u,n,t,d),{fill:a.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const Fo=vt.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Oa=(vt.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),vt.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),Xa=_r.View.extend({options:{},theme:null,themeClassNamePrefix:Rr("theme-"),requireSetThemeOverride:!1,defaultTheme:Lr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=_t({},this.options,e),_r.View.call(this,e)},initialize:function(){Oa[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=sr(this,"children")),e){var n=this.svgElement,r=K(e,Ie.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var r=t.getAttribute(e);if(r)return r;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(sr(this,"el"));else{var e=sr(this,"tagName"),n=_t({},sr(this,"attributes")),t=_t({},sr(this,"style"));this.id&&(n.id=sr(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(Ie.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof _r.$?e:_r.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=Ie(this.el))},_ensureElClassName:function(){var e=sr(this,"className");if(e){var n=Rr(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Oa[this.cid]=null,_r.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var r=this.getEventNamespace();for(var a in n){var u=n[a];"function"!=typeof u&&(u=this[u]),u&&yt(e).on(a+r,t,u.bind(this))}return this},undelegateElementEvents:function(e){return yt(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=sr(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,r="__"+this.cid+"__";return void 0===n?t&&t[r]||{}:(t||(t=e.data={}),t[r]||(t[r]={}),_t(t[r],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&_t({},e[0])||{},t=e[1]&&_t({},e[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,_r.View.extend.call(this,n,t)}});if(yt.event&&!("dbltap"in yt.event.special)){const e=Lr.doubleTapInterval,n=30;yt.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...r){const{handleObj:a,target:u}=t,d=yt.data(u),g=(new Date).getTime(),i="lastTouch"in d?g-d.lastTouch:0;i<e&&i>n?(d.lastTouch=null,t.type=a.origType,a.handler.call(this,t,...r)):d.lastTouch=g}}}function Xi(e){return e?Array.isArray(e)?e:[e]:[]}const ta=Xa.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(ln(n)){const r=e.model.isLink(),{label:a=null,port:u,selector:d}=n;r&&null!==a?t=e.findLabelNode(a,d):!r&&u?t=e.findPortNode(u,d):[t]=e.findBySelector(d)}else n&&(t=Ie.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:r,transformGroup:a}=this;if(!e||a)return;const{vel:u,paper:d}=n,{layer:g}=r;if(g){const i=this.transformGroup=Ie("g").addClass("highlight-transform").append(t);d.getLayerView(g).insertSortedNode(i.node,r.z)}else(!t.parentNode||t.nextSibling)&&u.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const r=n.getRootTranslateMatrix(),a=n.getRootRotateMatrix(),u=r.multiply(a);e.attr("transform",Ie.matrixToTransformString(u))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:r,id:a}=this;if(r)return;const u=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),u?(this.highlight(n,u),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",a,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:r}=this;e&&this.unhighlight(n,e),this.unmount(),r._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const r=this.uniqueId(n,t);this.add(e,n,r,t)},unhighlight:function(e,n,t){const r=this.uniqueId(n,t);this.remove(e,r)},get(e,n=null){const{cid:t}=e,{_views:r}=this,a=r[t];if(null===n){const u=[];if(!a)return u;for(let d in a){const g=a[d];g instanceof this&&u.push(g)}return u}if(!a)return null;if(n in a){const u=a[n];if(u instanceof this)return u}return null},add(e,n,t,r={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const a=ta.get(e,t);a&&a.remove();const u=new this(r);return u.id=t,this._addRef(e,t,u),u.requestUpdate(e,n),u},_addRef(e,n,t){const{cid:r}=e,{_views:a}=this;let u=a[r];u||(u=a[r]={}),u[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:r}=this,a=r[t];if(a){n&&delete a[n];for(let u in a)return;delete r[t]}},remove(e,n=null){Xi(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){Xi(this.get(e,n)).forEach(r=>{(t||r.UPDATABLE)&&r.update()})},transform(e,n=null){Xi(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>Ie.ensureId(e)+JSON.stringify(n)}),Ka={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},dn=Xa.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,r,a){e.push("type-"+a.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,a,u,e={},n={},t=0,d=sr(this,"presentationAttributes");for(var g in d)if(d.hasOwnProperty(g)){var i=d[g];for(Array.isArray(i)||(i=[i]),r=0,a=i.length;r<a;r++){var s=e[u=i[r]];s||(s=e[u]=1<<t++),n[g]|=s}}var l=sr(this,"initFlag");for(Array.isArray(l)||(l=[l]),r=0,a=l.length;r<a;r++)e[u=l[r]]||(e[u]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var r=0,a=e.length;r<a;r++)t|=n[e[r]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||C(this),Xa.call(this,e)},initialize:function(){this.setFlags(),Xa.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=K(e),r=t.selectors,a=t.groupSelectors;for(var u in a){if(r[u])throw new Error("dia.CellView: ambiguous group selector");r[u]=a[u]}if(n){var d=this.selector;if(r[d])throw new Error("dia.CellView: ambiguous root selector.");r[d]=n}return{fragment:t.fragment,selectors:r}},can:function(e){var n=vn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return mn(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var r=t[e];if(r)return Array.isArray(r)?r:[r]}return Lr.useCSSSelectors?yt(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),a=this.getRootRotateMatrix();return Ie.transformRect(n,r.multiply(a).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return Ie.transformRect(n,r.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return Ie.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=Ie.createSVGMatrix(),n=this.model,t=n.angle();if(t){var r=n.getBBox(),a=r.width/2,u=r.height/2;e=e.translate(a,u).rotate(t).translate(-a,-u)}return e},_notifyHighlight:function(e,n,t={}){const{el:r}=this;let a;if([a=r]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=a!==r,void 0===t.type){let u;switch(!0){case t.embedding:u=Ka.EMBEDDING;break;case t.connecting:u=Ka.CONNECTING;break;case t.magnetAvailability:u=Ka.MAGNET_AVAILABILITY;break;case t.elementAvailability:u=Ka.ELEMENT_AVAILABILITY;break;default:u=Ka.DEFAULT}t.type=u}return this.notify(e,a,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const r=t.getAttribute("magnet"),a=t===n;if((r||a)&&"false"!==r)return t;if(a)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[r]=this.findBySelector(t);if(r)return r}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var r=Ie(e).index()+1;t=e.tagName+":nth-child("+r+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var r=this.paper,a=r.model,u=r.getDefaultLink(this,e);return u.set({source:this.getLinkEnd(e,n,t,u,"source"),target:{x:n,y:t}}).addTo(a,{async:!1,ui:!0}),u.findView(r)},getLinkEnd:function(e,...n){var t=this.model,r=t.id,a=this.findAttribute("port",e),u=e.getAttribute("joint-selector"),d={id:r};return null!=u&&(d.magnet=u),null!=a?(d.port=a,!t.hasPort(a)&&!u&&(d.selector=this.getSelector(e))):null==u&&this.el!==e&&(d.selector=this.getSelector(e)),this.customizeLinkEnd(d,e,...n)},customizeLinkEnd:function(e,n,t,r,a,u){const{paper:d}=this,{connectionStrategy:g}=d.options;if("function"==typeof g){var i=g.call(d,e,this,n,new ge(t,r),a,u,d);if(i)return i}return e},getMagnetFromLinkEnd:function(e){var u,n=this.el,t=e.port,r=e.magnet,a=this.model;return null!=t&&a.isElement()&&a.hasPort(t)?u=this.findPortNode(t,r)||n:(r||(r=e.selector),!r&&null!=t&&(r='[port="'+t+'"]'),u=this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(u,"magnet")},dragLinkStart:function(e,n,t,r){this.model.startBatch("add-link");const a=this.addLinkFromMagnet(n,t,r);a.notifyPointerdown(e,t,r),a.eventData(e,a.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:a})},dragLink:function(e,n,t){var r=this.eventData(e),a=r.linkView;if(a)a.pointermove(e,n,t);else{var u=this.paper,d=u.options.magnetThreshold,g=this.getEventTarget(e),i=r.targetMagnet;if("onleave"===d){if(i===g||Ie(i).contains(g))return}else if(u.eventData(e).mousemoved<=d)return;this.dragLinkStart(e,i,n,t)}},dragLinkEnd:function(e,n,t){var a=this.eventData(e).linkView;!a||(a.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){vi(n)||(e instanceof SVGElement?Ie(e).attr(n):yt(e).attr(n))},processNodeAttributes:function(e,n){var t,r,a,u,d,g,i,s,l,f=[];for(t in n)!n.hasOwnProperty(t)||(r=n[t],!(a=this.getAttributeDefinition(t))||vn(a.qualify)&&!a.qualify.call(this,r,e,n)?(g||(g={}),g[N(t)]=r):(Sn(a.set)&&(g||(g={}),g[a.set]=r),null!==r&&f.push(t,a)));for(u=0,d=f.length;u<d;u+=2)r=n[t=f[u]],vn((a=f[u+1]).set)&&(i||(i={}),i[t]=r),vn(a.position)&&(s||(s={}),s[t]=r),vn(a.offset)&&(l||(l={}),l[t]=r);return{raw:n,normal:g,set:i,position:s,offset:l}},updateRelativeAttributes:function(e,n,t,r){r||(r={});var a,u,g=n.raw||{},i=n.normal||{},s=n.set,l=n.position,f=n.offset;for(a in s){u=s[a];var y=this.getAttributeDefinition(a).set.call(this,u,t.clone(),e,g);mn(y)?_t(i,y):void 0!==y&&(i[a]=y)}if(e instanceof HTMLElement)this.setNodeAttributes(e,i);else{var X,re,ne,w=i.transform,M=Ie.transformStringToMatrix(w),z=ge(M.e,M.f);if(w&&(i=lo(i,"transform"),M.e=M.f=0),l||f){var T=this.getNodeScale(e,r.scalableNode);X=T.sx,re=T.sy}var R=!1;for(a in l)u=l[a],(ne=this.getAttributeDefinition(a).position.call(this,u,t.clone(),e,g))&&(z.offset(ge(ne).scale(X,re)),R||(R=!0));this.setNodeAttributes(e,i);var j=!1;if(f){var Z=this.getNodeBoundingRect(e);if(Z.width>0&&Z.height>0){var ie=Ie.transformRect(Z,M).scale(1/X,1/re);for(a in f)u=f[a],(ne=this.getAttributeDefinition(a).offset.call(this,u,ie,e,g))&&(z.offset(ge(ne).scale(X,re)),j||(j=!0))}}(void 0!==w||R||j)&&(z.round(1),M.e=z.x,M.f=z.y,e.setAttribute("transform",Ie.matrixToTransformString(M)))}},getNodeScale:function(e,n){var t,r;if(n&&n.contains(e)){var a=n.scale();t=1/a.sx,r=1/a.sy}else t=1,r=1;return{sx:t,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=Ie.ensureId(e),r=n[t];return r||(r=n[t]={}),r},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=Ie(e).getBBox()),new it(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=Ie(e).getTransformToElement(t)}return Ie.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=Ie(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,r){var a,u,d,g,i={},s=[];for(var l in e)if(e.hasOwnProperty(l)&&ln(d=e[l])){var f=t[l]=this.findBySelector(l,n,r);for(a=0,u=f.length;a<u;a++){var y=f[a];g=Ie.ensureId(y);var w=r&&r[l]===y,M=i[g];if(M){M.array||(s.push(g),M.array=!0,M.attributes=[M.attributes],M.selectedLength=[M.selectedLength]);var z=M.attributes,X=M.selectedLength;if(w)z.unshift(d),X.unshift(-1);else{var re=Ri(X,u);z.splice(re,0,d),X.splice(re,0,u)}}else i[g]={attributes:d,selectedLength:w?-1:u,node:y,array:!1}}}for(a=0,u=s.length;a<u;a++)(d=i[g=s[a]]).attributes=br({},...d.attributes.reverse());return i},getEventTarget:function(e,n={}){const{target:t,type:r,clientX:a=0,clientY:u=0}=e;return n.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(a,u):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=it()),t.selectors||(t.selectors=this.selectors);var g,i,s,l,f,r={},a={},u=[],d=[],y=t.roAttributes,w=this.findNodesAttributes(y||n,e,r,t.selectors),M=y?this.findNodesAttributes(n,e,r,t.selectors):w;for(var z in w)if((f=this.processNodeAttributes(i=(l=w[z]).node,s=l.attributes)).set||f.position||f.offset){var ne,X=M[z]&&M[z].attributes,re=X&&void 0===s.ref?X.ref:s.ref;if(re){if(!(ne=(r[re]||this.findBySelector(re,e,t.selectors))[0]))throw new Error('dia.CellView: "'+re+'" reference does not exist.')}else ne=null;if(g={node:i,refNode:ne,processedAttributes:f,allAttributes:X},ne){var T=d.findIndex(function(Xe){return Xe.refNode===i});T>-1?d.splice(T,0,g):d.push(g)}else u.push(g)}else this.setNodeAttributes(i,f.normal);u.push(...d);for(var R,j=0,Z=u.length;j<Z;j++){i=(g=u[j]).node,ne=g.refNode;var ie=Ie(t.rotatableNode),he=ne?Ie.ensureId(ne):"",ye=!!ie&&!!ne&&ie.contains(ne),Ee=a[he];if(!Ee){var Ge=ye?ie:e;Ee=a[he]=ne?Ie(ne).getBBox({target:Ge}):t.rootBBox}y?(f=this.processNodeAttributes(i,g.allAttributes),this.mergeProcessedAttributes(f,g.processedAttributes)):f=g.processedAttributes;var ze=Ee;ye&&!ie.contains(i)&&(R||(R=Ie.transformStringToMatrix(ie.attr("transform"))),ze=Ie.transformRect(Ee,R)),this.updateRelativeAttributes(i,f,ze,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),_t(e.set,n.set),_t(e.position,n.position),_t(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){ta.remove(this)},updateHighlighters:function(e=!1){ta.update(this,null,e)},transformHighlighters:function(){ta.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:r}=this,{graph:a}=r;a&&(r.startBatch("pointer"),this.eventData(e,{graph:a})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,n,t),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,r){this.notify("cell:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){this.notify(n,e,t,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),r=n.findView(t);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:Ka,addPresentationAttributes:function(e){return br({},sr(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return ko(n.concat(t))})}}),hn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ws=dn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=dn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){dn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[hn.UPDATE],position:[hn.TRANSLATE,hn.TOOLS],size:[hn.RESIZE,hn.PORTS,hn.TOOLS],angle:[hn.ROTATE,hn.TOOLS],markup:[hn.RENDER],ports:[hn.PORTS]},initFlag:[hn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=Lr;this.hasFlag(e,hn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,hn.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[hn.RENDER,hn.UPDATE,hn.RESIZE,hn.TRANSLATE,hn.ROTATE,hn.PORTS,hn.TOOLS]);else{let a=!1;this.hasFlag(e,hn.RESIZE)&&(this.resize(n),a=!0,e=this.removeFlag(e,[hn.RESIZE,hn.UPDATE])),this.hasFlag(e,hn.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,hn.UPDATE),a=!0,t&&(e=this.removeFlag(e,hn.PORTS))),this.hasFlag(e,hn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,hn.TRANSLATE),r=!0),this.hasFlag(e,hn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,hn.ROTATE),r=!0),this.hasFlag(e,hn.PORTS)&&(this._renderPorts(),a=!0,e=this.removeFlag(e,hn.PORTS)),a&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,hn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,hn.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=Lr;t&&this._removePorts();var r=this.model,a=r.attr();this.updateDOMSubtreeAttributes(this.el,a,{rootBBox:new it(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===a?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=Ie(t[this.rotatableSelector])||null,this.scalableNode=Ie(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(Ie(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Lr.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),r=n.size(),a=this.scalableNode,u=!1;a.node.getElementsByTagName("path").length>0&&(u=!0);var d=a.getBBox({recursive:u});a.attr("transform","scale("+r.width/(d.width||1)+","+r.height/(d.height||1)+")");var s=this.rotatableNode,l=s&&s.attr("transform");if(l){s.attr("transform",l+" rotate("+-t+","+r.width/2+","+r.height/2+")");var f=a.getBBox({target:this.paper.cells});n.set("position",{x:f.x,y:f.y},_t({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,r=(e.paper||this.paper).model,a=e.initialZIndices={},u=n.getEmbeddedCells({deep:!0}),d=r.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...u,...d].forEach(s=>a[s.id]=s.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const g=r.getElements().reduce((s,l)=>Math.max(s,l.attributes.z||0),0);d.forEach(s=>{s.attributes.z<=g&&s.set("z",g+1,{ui:!0})}),n.stopBatch("to-front");const i=n.parent();i?(r.getCell(i).unembed(n,{ui:!0}),e.initialParentId=i):e.initialParentId=null},processEmbedding:function(e={},n,t,r){const a=e.model||this.model,u=e.paper||this.paper,d=u.model,{findParentBy:g,frontParentOnly:i,validateEmbedding:s}=u.options;let l;l=vn(g)?Qt(g.call(d,this,n,t,r)):"pointer"===g?Qt(d.findModelsFromPoint({x:t,y:r})):d.findModelsUnderElement(a,{searchBy:g}),l=l.filter(w=>w instanceof qt&&a.id!==w.id&&!w.isEmbeddedIn(a)),i&&(l=l.slice(-1));let f=null;const y=e.candidateEmbedView;for(let w=l.length-1;w>=0;w--){const M=l[w];if(y&&y.model.id==M.id){f=y;break}{const z=M.findView(u);if(!vn(s)||s.call(u,this,z)){f=z;break}}}f&&f!=y&&(this.clearEmbedding(e),e.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&y&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,r=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:a}=r.options,{initialParentId:u}=e;if(u&&"function"==typeof a&&!a.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(t,{deep:!0}).forEach(a=>{a.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,r=n||this.model,u=(e.paper||this.paper).model;switch(t){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:d,initialPosition:g,initialZIndices:i}=e;if(g){const{x:l,y:f}=g;r.position(l,f,{deep:!0,ui:!0})}i&&Object.keys(i).forEach(l=>{const f=u.getCell(l);f&&f.set("z",i[l],{ui:!0})});const s=u.getCell(d);s&&s.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const r=this.findAttribute("port",e);if(r){const a=this.findPortNode(r,t);if(a)return a}else{const[a]=this.findBySelector(t);if(a)return a}}return e},notifyPointerdown(e,n,t){dn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){dn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),dn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){dn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){dn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){dn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(r.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,r)},pointerup:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(r.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var a=r.targetMagnet;a&&this.magnetpointerclick(e,a,n,t),this.checkMouseleave(e)},mouseover:function(e){dn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){dn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){dn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){dn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,r){dn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,r)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,r){this.notify("element:magnet:pointerdblclick",e,n,t,r)},magnetcontextmenu:function(e,n,t,r){this.notify("element:magnet:contextmenu",e,n,t,r)},dragStart:function(e,n,t){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const a=r.model.position();r.eventData(e,{initialPosition:a,pointerOffset:a.difference(n,t),restrictedArea:this.paper.getRestrictedArea(r,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,a=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),a.options.validateMagnet(this,r,e)?(a.options.magnetThreshold<=0&&this.dragLinkStart(e,r,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),a.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var r=this.paper,a=r.options.gridSize,u=this.model,d=this.eventData(e),{pointerOffset:g,restrictedArea:i,embedding:s}=d,l=rt(n+g.x,a),f=rt(t+g.y,a);u.position(l,f,{restrictedArea:i,deep:!0,ui:!0}),r.options.embeddingMode&&(s||(this.prepareEmbedding(d),s=!0),this.processEmbedding(d,e,n,t)),this.eventData(e,{embedding:s})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,r){var a=this.paper;a.eventData(e).mousemoved>a.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,r)}},{Flags:hn});_t(Ws.prototype,bs);const ka=function(e,n,t){return e},qf=function(e,n,t){var s,l,f,r=n.side||"bottom",a=Tt(n.padding||40),u=t.sourceBBox,d=t.targetBBox,g=u.center(),i=d.center();switch(r){case"bottom":f=1,s="y",l="height";break;case"top":f=-1,s="y",l="height";break;case"left":f=-1,s="x",l="width";break;case"right":f=1,s="x",l="width";break;default:throw new Error("Router: invalid side")}return g[s]+=f*(u[l]/2+a[r]),i[s]+=f*(d[l]/2+a[r]),f*(g[s]-i[s])>0?i[s]=g[s]:g[s]=i[s],[g].concat(e,i)};var ed={N:"S",S:"N",E:"W",W:"E"},Ki={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function $s(e,n,t){var r=new ge(e.x,n.y);return t.containsPoint(r)&&(r=new ge(n.x,e.y)),r}function Hu(e,n){return e["W"===n||"E"===n?"width":"height"]}function Jr(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function Ys(e){return new it(e.x,e.y,0,0)}function Xs(e){var n=Tt(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function ju(e,n){return e.sourceBBox.clone().moveAndExpand(Xs(n))}function zu(e,n){return e.targetBBox.clone().moveAndExpand(Xs(n))}function Ks(e,n,t){var r=new ge(e.x,n.y),a=new ge(n.x,e.y),u=Jr(e,r),d=Jr(e,a),g=ed[t],i=u===t||u!==g&&(d===g||d!==t)?r:a;return{points:[i],direction:Jr(i,n)}}function na(e,n,t){var r=$s(e,n,t);return{points:[r],direction:Jr(r,n)}}function Js(e,n,t,r){var i,a={},u=[new ge(e.x,n.y),new ge(n.x,e.y)],d=u.filter(function(f){return!t.containsPoint(f)}),g=d.filter(function(f){return Jr(f,e)!==r});if(g.length>0)i=g.filter(function(f){return Jr(e,f)===r}).pop(),a.points=[i=i||g[0]],a.direction=Jr(i,n);else{i=Lu(u,d)[0];var s=new ge(n).move(i,-Hu(t,r)/2),l=$s(s,e,t);a.points=[l,s],a.direction=Jr(s,n)}return a}function rd(e,n,t,r){var a=na(n,e,r),u=a.points[0];if(t.containsPoint(u)){var d=(a=na(e,n,t)).points[0];if(r.containsPoint(d)){var g=new ge(e).move(d,-Hu(t,Jr(e,d))/2),i=new ge(n).move(u,-Hu(r,Jr(n,u))/2),s=new ut(g,i).midpoint(),l=na(e,s,t),f=Ks(s,n,l.direction);a.points=[l.points[0],f.points[0]],a.direction=f.direction}}return a}function Qs(e,n,t,r,a){var l,f,y,u={},d=t.union(r).inflate(1),g=d.center().distance(n)>d.center().distance(e),i=g?n:e,s=g?e:n;return a?(l=ge.fromPolar(d.width+d.height,Ki[a],i),l=d.pointNearestToPoint(l).move(l,-1)):l=d.pointNearestToPoint(i).move(i,1),f=$s(l,s,d),l.round().equals(f.round())?(f=ge.fromPolar(d.width+d.height,bt(l.theta(i))+Math.PI/2,s),y=$s(l,f=d.pointNearestToPoint(f).move(s,1).round(),d),u.points=g?[f,y,l]:[l,y,f]):u.points=g?[f,l]:[l,f],u.direction=Jr(g?l:f,n),u}function Uu(e,n,t){var r=ju(t,n),a=zu(t,n),u=function td(e,n){return e.sourceAnchor?e.sourceAnchor:ju(e,n).center()}(t,n),d=function nd(e,n){return e.targetAnchor?e.targetAnchor:zu(e,n).center()}(t,n);r=r.union(Ys(u)),a=a.union(Ys(d)),(e=Qt(e).map(ge)).unshift(u),e.push(d);for(var g,i=[],s=0,l=e.length-1;s<l;s++){var f=null,y=e[s],w=e[s+1],M=!!Jr(y,w);if(0===s)s+1===l?r.intersect(a.clone().inflate(1))?f=Qs(y,w,r,a):M||(f=rd(y,w,r,a)):r.containsPoint(w)?f=Qs(y,w,r,Ys(w).moveAndExpand(Xs(n))):M||(f=na(y,w,r));else if(s+1===l){var z=M&&Jr(w,y)===g;a.containsPoint(y)||z?f=Qs(y,w,Ys(y).moveAndExpand(Xs(n)),a,g):M||(f=Js(y,w,a,g))}else M||(f=Ks(y,w,g));f?(Array.prototype.push.apply(i,f.points),g=f.direction):g=Jr(y,w),s+1<l&&i.push(w)}return i}var po={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!vn(Uu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Uu(e,_t({},po,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function ws(e){this.map={},this.options=e,this.mapGridSize=100}function yi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function xi(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function Zl(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function Gu(e,n){return e.sourceAnchor?e.sourceAnchor:xi(e,n).center()}function La(e,n,t,r,a){var u=360/t,d=e.theta(function ra(e,n,t,r){var a=r.step;return new ge(e.x+(n.x-e.x)/t.x*a,e.y+(n.y-e.y)/t.y*a)}(e,n,r,a)),g=De(d+u/2);return u*Math.floor(g/u)}function Wu(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function ec(e,n){if(!e)return n;var t=Math.abs(e),r=Math.round(t/n);return r?n+(t-r*n)/r:t}function ur(e,n){return e.round(n)}function Ja(e,n,t){return ur(function tc(e,n){var t=n.source,r=rt(e.x-t.x,n.x)+t.x,a=rt(e.y-t.y,n.y)+t.y;return new ge(r,a)}(e.clone(),n),t)}function Qa(e){return e.clone().toString()}function Ni(e){return new ge(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function $u(e,n,t,r,a,u,d){for(var f,g=[],i=Ni(a.difference(t)),s=Qa(t),l=e[s];l;){var y=Ni((f=n[s]).difference(l));y.equals(i)||(g.unshift(f),i=y),l=e[s=Qa(l)]}var w=n[s];return Ni(w.difference(r)).equals(i)||g.unshift(w),g}function Ss(e,n){for(var t=1/0,r=0,a=n.length;r<a;r++){var u=e.manhattanDistance(n[r]);u<t&&(t=u)}return t}function ia(e,n,t,r,a){var u=a.precision,d=a.directionMap,g=e.difference(n.center()),i=mn(d)?Object.keys(d):[],s=Qt(t),l=i.reduce(function(f,y){if(s.includes(y)){for(var ne,w=d[y],M=new ge(e.x+w.x*(Math.abs(g.x)+n.width),e.y+w.y*(Math.abs(g.y)+n.height)),X=new ut(e,M).intersect(n)||[],re=X.length,T=null,R=0;R<re;R++){var j=X[R],Z=e.squaredDistance(j);(void 0===ne||Z>ne)&&(ne=Z,T=j)}if(T){var ie=Ja(T,r,u);n.containsPoint(ie)&&(ie=Ja(ie.offset(w.x*r.x,w.y*r.y),r,u)),f.push(ie)}}return f},[]);return n.containsPoint(e)||l.push(Ja(e,r,u)),l}function nc(e,n,t,r){var u,d,a=r.precision;u=ur(e instanceof it?Gu(this,r).clone():e.clone(),a),d=ur(n instanceof it?function ql(e,n){return e.targetAnchor?e.targetAnchor:Zl(e,n).center()}(this,r).clone():n.clone(),a);var i,s,l,f,g=function Zs(e,n,t){return{source:n.clone(),x:ec(t.x-n.x,e),y:ec(t.y-n.y,e)}}(r.step,u,d);if(l=e instanceof it?ia(i=u,e,r.startDirections,g,r):[i=u],n instanceof it?(s=d,f=ia(d,n,r.endDirections,g,r)):f=[s=d],l=l.filter(sn=>!t(sn)),f=f.filter(sn=>!t(sn)),l.length>0&&f.length>0){for(var y=new yi,w={},M={},z={},X=0,re=l.length;X<re;X++){var ne=l[X],T=Qa(ne);y.add(T,Ss(ne,f)),w[T]=ne,z[T]=0}var Z,ie,R=r.previousDirectionAngle,j=void 0===R,he=r.directions;!function id(e,n,t){var r=t.step;Qt(t.directions).forEach(function(a){a.gridOffsetX=a.offsetX/r*n.x,a.gridOffsetY=a.offsetY/r*n.y})}(0,g,r);for(var ye=he.length,Ee=Qt(f).reduce(function(sn,Mt){var ft=Qa(Mt);return sn.push(ft),sn},[]),Ge=r.maximumLoops;!y.isEmpty()&&Ge>0;){var yn,ze=y.pop(),Xe=w[ze],Je=M[ze],nt=z[ze],ht=void 0===Je,Cn=Xe.equals(i);yn=ht?j?Cn?null:La(i,Xe,ye,g,r):R:La(Je,Xe,ye,g,r);var Rn=l.length===f.length;if(Rn)for(var At=0;At<l.length;At++)if(!l[At].equals(f[At])){Rn=!1;break}if((!ht||!Rn)&&Ee.indexOf(ze)>=0)return r.previousDirectionAngle=yn,$u(M,w,Xe,i,s);for(X=0;X<ye;X++){var Ot=(Z=he[X]).angle;if(ie=Wu(yn,Ot),j&&Cn||!(ie>r.maxAllowedDirectionChange)){var kt=Ja(Xe.clone().offset(Z.gridOffsetX,Z.gridOffsetY),g,a),rn=Qa(kt);if(!y.isClose(rn)&&!t(kt)){if(Ee.indexOf(rn)>=0&&!kt.equals(s)&&Wu(Ot,La(kt,s,ye,g,r))>r.maxAllowedDirectionChange)continue;var Xt=nt+Z.cost+(Cn?0:r.penalties[ie]);(!y.isOpen(rn)||Xt<z[rn])&&(w[rn]=kt,M[rn]=Xe,z[rn]=Xt,y.add(rn,Xt+Ss(kt,f)))}}}Ge--}}return r.fallbackRoute.call(this,i,s,r)}ws.prototype.build=function(e,n){var t=this.options,r=Qt(t.excludeEnds).reduce(function(i,s){var l=n.get(s);if(l){var f=e.getCell(l.id);f&&i.push(f)}return i},[]),a=[],u=e.getCell(n.get("source").id);u&&(a=gs(a,u.getAncestors().map(function(i){return i.id})));var d=e.getCell(n.get("target").id);d&&(a=gs(a,d.getAncestors().map(function(i){return i.id})));var g=this.mapGridSize;return e.getElements().reduce(function(i,s){var l=Qt(t.excludeTypes).includes(s.get("type")),f=r.find(function(R){return R.id===s.id}),y=a.includes(s.id);if(!(l||f||y))for(var M=s.getBBox().moveAndExpand(t.paddingBox),z=M.origin().snapToGrid(g),X=M.corner().snapToGrid(g),re=z.x;re<=X.x;re+=g)for(var ne=z.y;ne<=X.y;ne+=g){var T=re+"@"+ne;i[T]=i[T]||[],i[T].push(M)}return i},this.map),this},ws.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return Qt(this.map[n]).every(function(t){return!t.containsPoint(e)})},yi.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=Ri(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(t,0,e)},yi.prototype.remove=function(e){this.hash[e]=this.CLOSE},yi.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},yi.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},yi.prototype.isEmpty=function(){return 0===this.items.length},yi.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const Xu=function(e,n,t){return function Yu(e,n,t){(function Qr(e){if(e.directions=sr(e,"directions"),e.penalties=sr(e,"penalties"),e.paddingBox=sr(e,"paddingBox"),e.padding=sr(e,"padding"),e.padding){var n=Tt(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}Qt(e.directions).forEach(function(t){var r=new ge(0,0),a=new ge(t.offsetX,t.offsetY);t.angle=De(r.theta(a))})})(n),t.options.perpendicular=!!n.perpendicular;var r=xi(t,n),a=Zl(t,n),u=Gu(t,n);let d;if("function"==typeof n.isPointObstacle)d=n.isPointObstacle;else{const T=new ws(n);T.build(t.paper.model,t.model),d=R=>!T.isPointAccessible(R)}for(var l,f,g=Qt(e).map(ge),i=[],s=u,y=0,w=g.length;y<=w;y++){var M=null;if(f=l||r,!(l=g[y])&&(l=a,(!t.model.get("source").id||!t.model.get("target").id)&&vn(n.draggingRoute))){var X=f===r?u:f,re=l.origin();M=n.draggingRoute.call(t,X,re,n)}if(null===(M=M||nc.call(t,f,l,d,n)))return n.fallbackRouter(e,n,t);var ne=M[0];ne&&ne.equals(s)&&M.shift(),s=M[M.length-1]||s,Array.prototype.push.apply(i,M)}return i}(e,_t({},po,n),t)};var od={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var r=e.theta(n),a=[],u={x:n.x,y:e.y},d={x:e.x,y:n.y};if(r%180>90){var g=u;u=d,d=g}var i=r%90<45?u:d,s=new ut(e,i),l=90*Math.ceil(r/90),f=ge.fromPolar(s.squaredLength(),bt(l+135),i),y=new ut(n,f),w=s.intersection(y),M=w||n,X=360/t.directions.length,re=(w?M:e).theta(n),ne=De(re+X/2),T=X*Math.floor(ne/X);return t.previousDirectionAngle=T,M&&a.push(M.round()),a.push(n),a}};const ad=function(e,n,t){if(!vn(Xu))throw new Error("Metro requires the manhattan router.");return Xu(e,_t({},od,n),t)};var rc=["arc","gap","cubic"],sd=["smooth"],qs=1/3,oa=2/3;function Qu(e,n,t){var r=[].concat(e,t,n);return r.reduce(function(a,u,d){var g=r[d+1];return null!=g&&(a[d]=Br(u,g)),a},[])}function oc(e,n){return Br(e,n).squaredLength()}function ac(e,n,t,r){var u,a=new gt;return u=gt.createSegment("M",e[0].start),a.appendSegment(u),Qt(e).forEach(function(d,g){if(d.isJump){var i,s,l,f;if("arc"===t){i=-90,s=d.start.difference(d.end);var y=Number(s.x<0||0===s.x&&s.y<0);y&&(i+=180);var z,w=d.midpoint(),M=new ut(w,d.end).rotate(w,i);l=(z=new ut(d.start,w)).pointAt(2/3).rotate(d.start,i),f=M.pointAt(1/3).rotate(M.end,-i),u=gt.createSegment("C",l,f,M.end),a.appendSegment(u),z=new ut(w,d.end),l=M.pointAt(1/3).rotate(M.end,i),f=z.pointAt(1/3).rotate(d.end,-i),u=gt.createSegment("C",l,f,d.end),a.appendSegment(u)}else if("gap"===t)u=gt.createSegment("M",d.end),a.appendSegment(u);else if("cubic"===t){i=d.start.theta(d.end);var X=.6*n,re=1.35*n;s=d.start.difference(d.end),(y=Number(s.x<0||0===s.x&&s.y<0))&&(re*=-1),l=ge(d.start.x+X,d.start.y+re).rotate(d.start,i),f=ge(d.end.x-X,d.end.y+re).rotate(d.end,i),u=gt.createSegment("C",l,f,d.end),a.appendSegment(u)}}else{var ne=e[g+1];0==r||!ne||ne.isJump?(u=gt.createSegment("L",d.end),a.appendSegment(u)):function sc(e,n,t,r,a){var w,u=t.distance(r)/2,d=t.distance(a)/2,g=-Math.min(e,u),i=-Math.min(e,d),s=t.clone().move(r,g).round(),l=t.clone().move(a,i).round(),f=new ge(qs*s.x+oa*t.x,oa*t.y+qs*s.y),y=new ge(qs*l.x+oa*t.x,oa*t.y+qs*l.y);w=gt.createSegment("L",s),n.appendSegment(w),w=gt.createSegment("C",f,y,l),n.appendSegment(w)}(r,a,d.end,d.start,ne.end)}}),a}const qu=function(e,n,t,r){!function ud(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var r=n.model;r.on("batch:stop",function(){this.hasActiveBatch()||function Zu(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const r=n[t],a=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(a)}}(n)}),r.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var a=r.raw,u=r.size||5,d=r.jump&&(""+r.jump).toLowerCase(),g=r.radius||0,i=r.ignoreConnectors||sd;-1===rc.indexOf(d)&&(d=rc[0]);var s=this.paper,f=s.model.getLinks();if(1===f.length)return ac(Qu(e,n,t),u,d,g);var y=this.model,w=f.indexOf(y),M=s.options.defaultConnector||{},z=f.filter(function(j,Z){var ie=j.get("connector")||M;return!(Qt(i).includes(ie.name)||Z>w&&"jumpover"===ie.name)}),X=z.map(function(j){return s.findViewByModel(j)}),re=Qu(e,n,t),ne=X.map(function(j){return null==j?[]:j===this?re:Qu(j.sourcePoint,j.targetPoint,j.route)},this),T=re.reduce(function(j,Z){var ie=z.reduce(function(he,ye,Ee){if(ye!==y){var Ge=function ic(e,n){return Qt(n).reduce(function(t,r){var a=e.intersection(r);return a&&t.push(a),t},[])}(Z,ne[Ee]);he.push.apply(he,Ge)}return he},[]).sort(function(he,ye){return oc(Z.start,he)-oc(Z.start,ye)});return ie.length>0?j.push.apply(j,function ld(e,n,t){return n.reduce(function(r,a,u){if(!0===a.skip)return r;var d=r.pop()||e,g=Xr(a).move(d.start,-t),i=Xr(a).move(d.start,+t),s=n[u+1];if(null!=s){var l=i.distance(s);l<=t&&(i=s.move(d.start,l),s.skip=!0)}else if(g.distance(d.end)<2*t+1)return r.push(d),r;if(i.distance(d.start)<2*t+1)return r.push(d),r;var w=Br(g,i);return w.isJump=!0,r.push(Br(d.start,g),w,Br(i,d.end)),r},[])}(Z,ie,u)):j.push(Z),j},[]),R=ac(T,u,d,g);return a?R:R.serialize()},cd=function(e,n,t,r){var a=r&&r.raw,u=[e].concat(t).concat([n]),d=new bn(u),g=new gt(d);return a?g:g.serialize()},el=function(e,n,t,r){r||(r={});var g,a=r.radius||10,u=r.raw,d=new gt;g=gt.createSegment("M",e),d.appendSegment(g);for(var l,f,y,w,M,z,X,re,ne,T,R,i=1/3,s=2/3,j=0,Z=t.length;j<Z;j++)l=new ge(t[j]),f=t[j-1]||e,y=t[j+1]||n,w=M||l.distance(f)/2,M=l.distance(y)/2,z=-Math.min(a,w),X=-Math.min(a,M),re=l.clone().move(f,z).round(),ne=l.clone().move(y,X).round(),T=new ge(i*re.x+s*l.x,s*l.y+i*re.y),R=new ge(i*ne.x+s*l.x,s*l.y+i*ne.y),g=gt.createSegment("L",re),d.appendSegment(g),g=gt.createSegment("C",T,R,ne),d.appendSegment(g);return g=gt.createSegment("L",n),d.appendSegment(g),u?d:d.serialize()},uc=function(e,n,t,r){var u,a=r&&r.raw;if(t&&0!==t.length){var d=[e].concat(t).concat([n]),g=Ft.throughPoints(d);u=new gt(g)}else{var i;if(u=new gt,i=gt.createSegment("M",e),u.appendSegment(i),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var s=(e.x+n.x)/2;i=gt.createSegment("C",s,e.y,s,n.y,n.x,n.y),u.appendSegment(i)}else{var l=(e.y+n.y)/2;i=gt.createSegment("C",e.x,l,n.x,l,n.x,n.y),u.appendSegment(i)}}return a?u:u.serialize()},bi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Wr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Za=function(e,n,t=[],r={},a){const u=Boolean(r.raw),{direction:d=bi.AUTO,precision:g=3}=r,i={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new ge(r.sourceTangent):null,targetTangent:r.targetTangent?new ge(r.targetTangent):null};i.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new ge(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new ge(r.sourceDirection).normalize():null,i.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new ge(1,0).rotate(null,r.targetDirection):r.targetDirection?new ge(r.targetDirection).normalize():null;const s=[e,...t.map(z=>new ge(z)),n];let l,f;if(i.sourceTangent)l=i.sourceTangent;else{const z=function rl(e,n,t,r){if(r.sourceDirection)switch(r.sourceDirection){case Wr.UP:return new ge(0,-1);case Wr.DOWN:return new ge(0,1);case Wr.LEFT:return new ge(-1,0);case Wr.RIGHT:return new ge(1,0);case Wr.AUTO:return tl(e,n);case Wr.CLOSEST_POINT:return eu(0,n);case Wr.OUTWARDS:return tu(e,n);default:return r.sourceDirection}switch(t){case bi.HORIZONTAL:return function fd(e,n,t){const{sourceBBox:r}=e;let a;return"left"===(a=r.width&&r.height?r.sideNearestToPoint(n[0]):r.x>n[1].x?"right":"left",a)?new ge(-1,0):new ge(1,0)}(e,n);case bi.VERTICAL:return function cc(e,n,t){const{sourceBBox:r}=e;let a;return"top"===(a=r.width&&r.height?r.sideNearestToPoint(n[0]):r.y>n[1].y?"bottom":"top",a)?new ge(0,-1):new ge(0,1)}(e,n);case bi.CLOSEST_POINT:return eu(0,n);case bi.OUTWARDS:return tu(e,n);default:return tl(e,n)}}(a,s,d,i),X=s[0].distance(s[1])*i.coeff,ne=il(z,s[1].difference(s[0]).normalize());if(ne>Math.PI/4){const T=X+(ne-Math.PI/4)*i.angleTangentCoefficient;l=z.clone().scale(T,T)}else l=z.clone().scale(X,X)}if(i.targetTangent)f=i.targetTangent;else{const z=function en(e,n,t,r){if(r.targetDirection)switch(r.targetDirection){case Wr.UP:return new ge(0,-1);case Wr.DOWN:return new ge(0,1);case Wr.LEFT:return new ge(-1,0);case Wr.RIGHT:return new ge(0,1);case Wr.AUTO:return fc(e,n);case Wr.CLOSEST_POINT:return nl(0,n);case Wr.OUTWARDS:return dc(e,n);default:return r.targetDirection}switch(t){case bi.HORIZONTAL:return function lc(e,n,t){const{targetBBox:r}=e;let a;return"left"===(a=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.x>n[n.length-2].x?"left":"right",a)?new ge(-1,0):new ge(1,0)}(e,n);case bi.VERTICAL:return function dd(e,n,t){const{targetBBox:r}=e;let a;return"top"===(a=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.y>n[n.length-2].y?"top":"bottom",a)?new ge(0,-1):new ge(0,1)}(e,n);case bi.CLOSEST_POINT:return nl(0,n);case bi.OUTWARDS:return dc(e,n);default:return fc(e,n)}}(a,s,d,i),X=s.length-1,re=s[X-1].distance(s[X])*i.coeff,T=il(z,s[X-1].difference(s[X]).normalize());if(T>Math.PI/4){const R=re+(T-Math.PI/4)*i.angleTangentCoefficient;f=z.clone().scale(R,R)}else f=z.clone().scale(re,re)}const w=function hc(e,n,t,r){const{tau:a,coeff:u}=r,d=[],g=[],i=[],s=e.length-1;for(let l=0;l<s;l++)d[l]=e[l].distance(e[l+1]);g[0]=n,g[s]=t;for(let l=1;l<s;l++){let f,y;f=1===l?e[l-1].clone().offset(g[l-1].x,g[l-1].y):e[l-1].clone(),y=l===s-1?e[l+1].clone().offset(g[l+1].x,g[l+1].y):e[l+1].clone();const w=f.difference(e[l]).normalize(),M=y.difference(e[l]).normalize(),z=il(w,M);let re,X=(Math.PI-z)/2;const ne=qa(w,M);let T;T=qa(e[l].difference(e[l+1]),e[l].difference(e[l-1])),ne<0&&(X=-X),z<Math.PI/2&&(X<0&&T<0||X>0&&T>0)&&(X-=Math.PI),re=M.clone(),hd(re,X);const R=re.clone(),j=re.clone(),Z=d[l-1]*u,ie=d[l]*u;R.scale(Z,Z),j.scale(ie,ie),g[l]=[R,j]}for(let l=0;l<s;l++){let f,y;f=0===l?e[l+1].difference(g[l].x/a,g[l].y/a):e[l+1].difference(g[l][1].x/a,g[l][1].y/a),y=l===s-1?e[l].clone().offset(g[l+1].x/a,g[l+1].y/a):e[l].difference(g[l+1][0].x/a,g[l+1][0].y/a),i[l]=[f,e[l],e[l+1],y]}return i}(s,l,f,i).map(z=>function pd(e,n){const{tau:t}=n,r=new ge;r.x=e[1].x+(e[2].x-e[0].x)/(6*t),r.y=e[1].y+(e[2].y-e[0].y)/(6*t);const a=new ge;return a.x=e[2].x+(e[3].x-e[1].x)/(6*t),a.y=e[2].y+(e[3].y-e[1].y)/(6*t),new Ft(e[1],r,a,e[2])}(z,i)),M=new gt(w).round(g);return u?M:M.serialize()};function tl(e,n,t){const{sourceBBox:r}=e;let a;switch(a=r.sideNearestToPoint(r.width&&r.height?n[0]:n[1]),a){case"top":return new ge(0,-1);case"bottom":return new ge(0,1);case"right":return new ge(1,0);case"left":return new ge(-1,0)}}function fc(e,n,t){const{targetBBox:r}=e;let a;switch(a=r.sideNearestToPoint(r.width&&r.height?n[n.length-1]:n[n.length-2]),a){case"top":return new ge(0,-1);case"bottom":return new ge(0,1);case"right":return new ge(1,0);case"left":return new ge(-1,0)}}function eu(e,n,t){return n[1].difference(n[0]).normalize()}function nl(e,n,t){const r=n.length-1;return n[r-1].difference(n[r]).normalize()}function tu(e,n,t){const{sourceBBox:r}=e,a=r.center();return n[0].difference(a).normalize()}function dc(e,n,t){const{targetBBox:r}=e,a=r.center();return n[n.length-1].difference(a).normalize()}function hd(e,n){const t=Math.cos(n),r=Math.sin(n),u=r*e.x+t*e.y;e.x=t*e.x-r*e.y,e.y=u}function il(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function qa(e,n){return e.x*n.y-e.y*n.x}Za.Directions=bi,Za.TangentDirections=Wr;const Bt={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},$r=dn.extend({className:function(){var e=dn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){dn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Bt.RENDER],attrs:[Bt.UPDATE],router:[Bt.UPDATE],connector:[Bt.CONNECTOR],smooth:[Bt.UPDATE],manhattan:[Bt.UPDATE],toolMarkup:[Bt.LEGACY_TOOLS],labels:[Bt.LABELS],labelMarkup:[Bt.LABELS],vertices:[Bt.VERTICES,Bt.UPDATE],vertexMarkup:[Bt.VERTICES],source:[Bt.SOURCE,Bt.UPDATE],target:[Bt.TARGET,Bt.UPDATE]},initFlag:[Bt.RENDER,Bt.SOURCE,Bt.TARGET,Bt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,Bt.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Bt.SOURCE)}if(this.hasFlag(e,Bt.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Bt.TARGET)}const{paper:t,sourceView:r,targetView:a}=this;if(t&&(r&&!t.isViewMounted(r)||a&&!t.isViewMounted(a)))return e;if(this.hasFlag(e,Bt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[Bt.RENDER,Bt.UPDATE,Bt.VERTICES,Bt.LABELS,Bt.TOOLS,Bt.LEGACY_TOOLS,Bt.CONNECTOR]);let u=!1;this.hasFlag(e,Bt.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,Bt.VERTICES));const{model:d}=this,{attributes:g}=d;let i=this.hasFlag(e,Bt.LABELS),s=this.hasFlag(e,Bt.LEGACY_TOOLS);i&&(this.onLabelsChange(d,g.labels,n),e=this.removeFlag(e,Bt.LABELS),u=!0),s&&(this.renderTools(),e=this.removeFlag(e,Bt.LEGACY_TOOLS));const l=this.hasFlag(e,Bt.UPDATE),f=this.hasFlag(e,Bt.CONNECTOR);return(l||f)&&(l?n.translateBy&&d.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[Bt.UPDATE,Bt.TOOLS,Bt.CONNECTOR]),i=!1,s=!1,u=!0),i&&this.updateLabelPositions(),s&&this.updateToolsPosition(),u&&this.updateHighlighters(),this.hasFlag(e,Bt.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,Bt.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Bt.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],r=t.length;if(r>1&&n[t[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=Ie(e);Array.isArray(n)||(n=[n]);for(var t=this._V,r=0,a=n.length;r<a;r++){var u=n[r],d=u.attr("class");d&&(d=F(d),t[yt.camelCase(d)]=u)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=Ie(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var r=0,a=n.length;r<a;r++)t.appendChild(n[r].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Ie("g").append(n):Ie(r[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},r=this._labelSelectors={},a=this.model,u=a.attributes.labels||[],d=u.length;if(0===d)return n&&n.remove(),this;n?n.empty():(n=e.labels=Ie("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(Rr(sr(this,"className"))),n.attr("model-id",a.id)));for(var g=0;g<d;g++){var l,f,s=this._normalizeLabelMarkup(this._getLabelMarkup(u[g].markup));if(s)l=s.node,f=s.selectors;else{var w=this._normalizeLabelMarkup(this._getLabelMarkup(a._builtins.defaultLabel.markup)),M=a._getDefaultLabel(),X=this._normalizeLabelMarkup(this._getLabelMarkup(M.markup))||w;l=X.node,f=X.selectors}l.setAttribute("label-idx",g),n.append(l),t[g]=l;var re=this.selector;if(f[re])throw new Error("dia.LinkView: ambiguous label root selector.");f[re]=l,r[g]=f}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:r,options:a}=this,{labels:u}=r;if(!u||!t.hasLabels())return;const{node:d}=u;a.labelsLayer?n.getLayerView(a.labelsLayer).insertSortedNode(d,t.get("z")):d.parentNode!==e&&e.appendChild(d)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){dn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const r=this._labelSelectors[e],[a=null]=this.findBySelector(n,t,r);return a},_mergeLabelAttrs:function(e,n,t,r){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:r:e?t:br({},r,t):e?br({},t,n):br({},r,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),a=e._builtins.defaultLabel.attrs,u=e._getDefaultLabel(),d=u.markup,g=u.attrs,i=0,s=n.length;i<s;i++){var l=this._labelCache[i];l.setAttribute("cursor",t?"move":"default");var f=this._labelSelectors[i],y=n[i],z=this._mergeLabelAttrs(y.markup||d,y.attrs,g,a);this.updateDOMSubtreeAttributes(l,z,{rootBBox:new it(y.size),selectors:f})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=yt(this._V.linkTools.node).empty(),n=ar(this.model.get("toolMarkup")||this.model.toolMarkup),t=Ie(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=ar(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Ie(n())):r=t.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=yt(this._V.markerVertices.node).empty(),n=ar(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,r){e.append(Ie(n(_t({idx:r},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=yt(this._V.markerArrowheads.node);e.empty();var n=ar(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Ie(n({end:"source"})),this._V.targetArrowhead=Ie(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),a=[this.sourceAnchor,...r,this.targetAnchor],u=a.length,d=new bn(a);d.simplify({threshold:.001});const g=d.points.map(s=>s.toJSON()),i=g.length;return u===i?0:(t.vertices(g.slice(1,i-1),e),u-i)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ge(this.sourceAnchor);case"target":return new ge(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ge(this.sourcePoint);case"target":return new ge(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:r}=this;if(!t||!r)return;const a=new bn(t);a.translate(e,n),this.route=a.points,this._translateConnectionPoints(e,n),r.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),r=this.sourceAnchor=t.source,a=this.targetAnchor=t.target,u=this.findRoute(n);this.route=u;var d=this.findConnectionPoints(u,r,a);this.sourcePoint=d.source,this.targetPoint=d.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,r=this.findMarkerPoints(e,n,t),a=this.findPath(e,r.source||n,r.target||t);this.path=a},findMarkerPoints:function(e,n,t){var d,g,r=e[0],a=e[e.length-1],u=this._markerCache;return this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.getBBox(),d=ge(n).move(r||t,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.getBBox(),g=ge(t).move(a||n,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=d||n.clone(),u.targetPoint=g||t.clone(),{source:d,target:g}},findAnchorsOrdered:function(e,n,t,r){var a,u,d,g,i=this.model,s=i.get(e),l=i.get(t),f=this.getEndView(e),y=this.getEndView(t),w=this.getEndMagnet(e),M=this.getEndMagnet(t);f?(d=n?new ge(n):y?M:new ge(l),a=this.getAnchor(s.anchor,f,w,d,e)):a=new ge(s),y?(g=new ge(r||a),u=this.getAnchor(l.anchor,y,M,g,t)):u=new ge(l);var z={};return z[e]=a,z[t]=u,z},findAnchors:function(e){var n=this.model,t=e[0],r=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",r,"source",t):this.findAnchorsOrdered("source",t,"target",r)},findConnectionPoints:function(e,n,t){var f,y,w,re,r=e[0],a=e[e.length-1],u=this.model,d=u.get("source"),g=u.get("target"),i=this.sourceView,s=this.targetView,l=this.paper.options;if(i&&!i.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||i.el;var M=d.connectionPoint||l.defaultConnectionPoint,X=new ut(r||t,n);w=this.getConnectionPoint(M,i,f,X,"source")}else w=n;if(s&&!s.isNodeConnection(this.targetMagnet)){y=this.targetMagnet||s.el;var ne=g.connectionPoint||l.defaultConnectionPoint,R=new ut(a||n,t);re=this.getConnectionPoint(ne,s,y,R,"target")}else re=t;return{source:w,target:re}},getAnchor:function(e,n,t,r,a){var g,u=n.isNodeConnection(t),d=this.paper.options;if(e||(e=u?d.defaultLinkAnchor:d.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:d.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)g=e;else{var i=e.name;if("function"!=typeof(g=d[u?"linkAnchorNamespace":"anchorNamespace"][i]))throw new Error("Unknown anchor: "+i)}var l=g.call(this,n,t,r,e.args||{},a,this);return l?l.round(this.decimalsRounding):new ge},getConnectionPoint:function(e,n,t,r,a){var u,s,d=r.end,g=this.paper.options;if("function"==typeof g.linkConnectionPoint&&(u=g.linkConnectionPoint(this,n,t===n.el?void 0:t,r.start,a)))return u;if(!e)return d;if("function"==typeof e)s=e;else{var l=e.name;if("function"!=typeof(s=g.connectionPointNamespace[l]))throw new Error("Unknown connection point: "+l)}return(u=s.call(this,r,n,t,e.args||{},a,this))?u.round(this.decimalsRounding):d},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var a=n._builtins.defaultLabel.position,u=n._getDefaultLabel(),d=this._normalizeLabelPosition(u.position),g=br({},a,d),i=0,s=t.length;i<s;i++){var l=this._labelCache[i];if(l){var y=this._normalizeLabelPosition(t[i].position),w=br({},g,y),M=this._getLabelTransformationMatrix(w);l.setAttribute("transform",Ie.matrixToTransformString(M)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,r=t[e];if(r)for(let a in r){const{id:u}=r[a];u&&u in n&&delete n[u].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var r=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(r=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===yt.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,r=`${e}View`,a=n.get(e),u=a&&a.id;if(!u)return this[r]=null,this.updateEndMagnet(e),!0;const d=t.getModelById(u);if(!d)throw new Error("LinkView: invalid "+e+" cell.");const g=d.findView(t);return!!g&&(this[r]=g,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let r=t.getMagnetFromLinkEnd(this.model.get(e));r===t.el&&(r=null),this[n]=r}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=Qt(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:br({},n,e)},addLabel:function(e,n,t,r){var a,u,g,d=0;"number"!=typeof e?(a=e.x,u=e.y,"number"==typeof n?(d=n,g=t):g=n):(a=e,u=n,"number"==typeof t?(d=t,g=r):g=t);var i=this._getDefaultLabelPositionArgs(),l=this._mergeLabelPositionArgs(g,i),f={position:this.getLabelPosition(a,u,d,l)};return this.model.insertLabel(-1,f,g),-1},addVertex:function(e,n,t){var r="number"!=typeof e,a=r?e.x:e,u=r?e.y:n,d=r?n:t,g={x:a,y:u},i=this.getVertexIndex(a,u);return this.model.insertVertex(i,g,d),i},sendToken:function(e,n,t){var a,u,d;mn(n)?(a=n.duration,u="reverse"===n.direction,d=n.connection):(a=n,u=!1,d=null);var g={dur:(a=a||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};u&&(g.keyPoints="1;0",g.keyTimes="0;1");var s,i=Ie(e);if("string"==typeof d)s=this.findBySelector(d,this.el,this.selectors)[0];else{var l=this._V;s=l.connection?l.connection.node:this.el.querySelector("path")}if(!(s instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");i.appendTo(this.paper.cells).animateAlongPath(g,s),setTimeout(function r(f,y){return function(){f.remove(),"function"==typeof y&&y()}}(i,t),a)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||b,t=this.model.router(),r=this.paper.options.defaultRouter;if(!t){if(!r)return e.map(ge);t=r}var a=vn(t)?t:n[t.name];if(!vn(a))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return a.call(this,e,t.args||{},this)||e.map(ge)},findPath:function(e,n,t){var r=this.paper.options.connectorNamespace||I,a=this.model.connector();a||(a=this.paper.options.defaultConnector||{});var d=vn(a)?a:r[a.name];if(!vn(d))throw new Error('dia.LinkView: unknown connector: "'+a.name+'".');var g=Jt(a.args||{});g.raw=!0;var i=d.call(this,n,t,e,g,this);return"string"==typeof i&&(i=new gt(Ie.normalizePathData(i))),i},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(be(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,r){var d,a={},u=0;"number"==typeof t?(u=t,d=r):d=t,d&&(a.args=d);var z,X,g=!(d&&d.absoluteDistance),i=d&&d.absoluteDistance&&d.reverseDistance,s=d&&d.absoluteOffset,l=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},y=new ge(e,n),w=l.closestPointT(y,f),M=l.lengthAtT(w,f);if(g&&(M=M/this.getConnectionLength()||0),i&&(M=-1*(this.getConnectionLength()-M)||1),a.distance=M,s||(z=l.tangentAtT(w)),z)X=z.pointOffset(y);else{var re=l.pointAtT(w),ne=y.difference(re);X={x:ne.x,y:ne.y}}return a.offset=X,a.angle=u,a},_getLabelTransformationMatrix:function(e){var n,t=0,r={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},n=e.distance,t=e.angle||0}var a=n>0&&n<=1,u=0,d={x:0,y:0};if(e.offset){var g=e.offset;"number"==typeof g&&(u=g),g.x&&(d.x=g.x),g.y&&(d.y=g.y)}var z,i=0!==d.x||0!==d.y||0===u,s=r.keepGradient,l=r.ensureLegibility,f=this.path,y={segmentSubdivisions:this.getConnectionSubdivisions()},w=a?n*this.getConnectionLength():n,M=f.tangentAtLength(w,y),X=t;if(M){if(i)(z=M.start).offset(d);else{var re=M.clone();re.rotate(M.start,-90),re.setLength(u),z=re.end}s&&(X=M.angle()+t,l&&(X=De((X+90)%180-90)))}else z=f.start,i&&z.offset(d);return Ie.createSVGMatrix().translate(z.x,z.y).rotate(X)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new ge(n.e,n.f)},getVertexIndex:function(e,n){for(var r=this.model.vertices(),a=this.getClosestPointLength(new ge(e,n)),u=0,d=r.length;u<d&&!(a<this.getClosestPointLength(r[u]));u++);return u},notifyPointerdown(e,n,t){dn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){dn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),dn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){dn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){dn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){dn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}r&&_t(r,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){dn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){dn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){dn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){dn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,r){dn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){var a=Ie(e.target).findParentByClass("link-tool",this.el);if(a){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,r)}this.notifyPointerdown(e,t,r),this.paper.delegateDragEvents(this,e.data)}else dn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var r=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var a=parseInt(e.currentTarget.getAttribute("label-idx"),10),u=this._getLabelPositionAngle(a),d=this._getLabelPositionArgs(a),g=this._getDefaultLabelPositionArgs(),i=this._mergeLabelPositionArgs(d,g);this.eventData(e,{action:"label-move",labelIdx:a,positionAngle:u,positionArgs:i,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var a=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:a})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var a=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(a)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var a=e.target.getAttribute("end"),u=this.startArrowheadMove(a,{ignoreBackwardsCompatibility:!0});this.eventData(e,u)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var r=this.eventData(e),a={position:this.getLabelPosition(n,t,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete a.position.offset,this.model.label(r.labelIdx,a)},dragVertex:function(e,n,t){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var r=this.eventData(e);this.model.translate(n-r.dx,t-r.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var r=this.eventData(e),a=this.paper;a.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,n,t),a.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,r=e.initialEnd,a=this.model.prop(t);if(a&&!vt.endsEqual(r,a)){var d=this.paper;r.id&&this.notify("link:disconnect",n,d.findViewByModel(r.id),e.initialMagnet,t),a.id&&this.notify("link:connect",n,d.findViewByModel(a.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:r}=this,{snapLinks:a,connectionStrategy:u}=r.options,d=this.eventData(e);var g=a.radius||50,i=r.findViewsInArea({x:n-g,y:t-g,width:2*g,height:2*g}),s=d.closestView||null,l=d.closestMagnet||null,f=d.magnetProxy||null;d.closestView=d.closestMagnet=d.magnetProxy=null;var y=Number.MAX_VALUE,w=new ge(n,t);i.forEach(function(R){const j=[];"false"!==R.el.getAttribute("magnet")&&j.push({bbox:R.model.getBBox(),magnet:R.el}),R.$("[magnet]").toArray().forEach(Z=>{j.push({bbox:R.getNodeBBox(Z),magnet:Z})}),j.forEach(Z=>{const{magnet:ie,bbox:he}=Z,ye=he.center().squaredDistance(w);ye<y&&(l===ie||r.options.validateConnection.apply(r,d.validateConnectionArgs(R,R.el===ie?null:ie)))&&(y=ye,d.closestView=R,d.closestMagnet=ie)})},this);var M,z=null,X=d.closestView,re=d.closestMagnet;re&&(z=d.magnetProxy=X.findProxyNode(re,"highlighter"));var ne=d.arrowhead,T=l!==re;if(s&&T&&s.unhighlight(f,{connecting:!0,snapping:!0}),X){const{prevEnd:R,prevX:j,prevY:Z}=d;if(d.prevX=n,d.prevY=t,!T&&("function"!=typeof u||j===n&&Z===t)||(M=X.getLinkEnd(re,n,t,this.model,ne),!T&&Lo(R,M)))return;d.prevEnd=M,T&&X.highlight(z,{connecting:!0,snapping:!0})}else M={x:n,y:t};this.model.set(ne,M||{x:n,y:t},{ui:!0}),s&&this.notify("link:snap:disconnect",e,s,l,ne),X&&this.notify("link:snap:connect",e,X,re,ne)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,r){const{paper:a,model:u}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const d=r.viewUnderPointer=a.findView(e);if(d){const g=r.magnetUnderPointer=d.findMagnet(e),i=r.magnetProxy=d.findProxyNode(g,"highlighter");g&&this.paper.options.validateConnection.apply(a,r.validateConnectionArgs(d,g))?i&&d.highlight(i,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,u.set(r.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:r}=this,{viewUnderPointer:a,magnetUnderPointer:u,magnetProxy:d,arrowhead:g}=e;if(!u||!d||!a)return;a.unhighlight(d,{connecting:!0});const i=a.getLinkEnd(u,n,t,r,g);r.set(g,i,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,r=0,a=0;"source"===e?(r=2,t="target"):(a=2,t="source");var u=this.model.get(t);if(u.id){var d=n[r]=this.paper.findViewByModel(u.id),g=d.getMagnetFromLinkEnd(u);g===d.el&&(g=void 0),n[r+1]=g}return function i(s,l){return n[a]=s,n[a+1]=s.el===l?void 0:l,n}},_markAvailableMagnets:function(e){function n(f,y){var w=f.paper;return w.options.validateConnection.apply(w,this.validateConnectionArgs(f,y))}var t=this.paper,r=t.model.getCells();e.marked={};for(var a=0,u=r.length;a<u;a++){var d=r[a].findView(t);if(d){var g=Array.prototype.slice.call(d.el.querySelectorAll("[magnet]"));"false"!==d.el.getAttribute("magnet")&&g.push(d.el);var i=g.filter(n.bind(e,d));if(i.length>0){for(var s=0,l=i.length;s<l;s++)d.highlight(i[s],{magnetAvailability:!0});d.highlight(null,{elementAvailability:!0}),e.marked[d.model.id]=i}}}},_unmarkAvailableMagnets:function(e){for(var t,r,n=Object.keys(e.marked),a=0,u=n.length;a<u;a++){r=e.marked[t=n[a]];var d=this.paper.findViewByModel(t);if(d){for(var g=0,i=r.length;g<i;g++)d.unhighlight(r[g],{magnetAvailability:!0});d.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Jt(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){dn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Bt});Object.defineProperty($r.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new it(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new it(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty($r.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new it(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new it(this.targetAnchor):e.getNodeBBox(t||e.el)}});const Ji={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},nu=Xa.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Rr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:"+(e+1));let a=-1/0;for(let u in t)u=+u,u<e&&u>a&&(a=u);return n.insertBefore(r,a!==-1/0?t[a].nextSibling:n.firstChild),r},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),ol=ta.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:r}=t;let a;try{const u=Ie(n);if(a=u.convertToPathData().trim(),"PATH"===u.tagName()&&r){const d=a.search(/.M/i)+1;d>0&&(a=a.substr(0,d))}}catch(u){const d=e.getNodeBoundingRect(n);a=Ie.rectToPath(_t({},t,d.toJSON()))}return a},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:r}=this,{padding:a,layer:u}=r;let d=e.getNodeMatrix(n);if(a){!u&&n===e.el&&t.remove();let g=e.getNodeBoundingRect(n);const i=g.x+g.width/2,s=g.y+g.height/2;g=Ie.transformRect(g,d);const l=Math.max(g.width,1),f=Math.max(g.height,1),y=(l+a)/l,w=(f+a)/f,M=Ie.createSVGMatrix({a:y,b:0,c:0,d:w,e:i-y*i,f:s-w*s});d=d.multiply(M)}t.attr({d:this.getPathData(e,n),transform:Ie.matrixToTransformString(d)})},highlight(e,n){const{vel:t,options:r}=this;t.attr(r.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),al=20,_i=ta.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:al,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:a}=this,u=n.tagName();if(!Ie.isSVGGraphicsElement(n)||a.includes(u))return n.remove(),!1;if(r.includes(u)){const d=e.vel.findOne(`#${n.id}`);if(d){const{node:g}=d;let i=e.getNodeBoundingRect(g);e.model.isElement()&&(i=Ie.transformRect(i,e.getNodeMatrix(g)));const s=Ie("rect",i.toJSON()),{x:l,y:f}=i.center(),{angle:y,cx:w=l,cy:M=f}=d.rotate();y&&s.rotate(y,w,M),n.parent().append(s)}return n.remove(),!1}return t.forEach(d=>{"fill"===d&&"none"===n.attr("fill")||n.removeAttr(d)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(r=>{n.removeAttr(r)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:r}=this,{deep:a}=t,u=n.tagName();let d;if("G"===u){if(!a)return null;d=n.clone(),function pc(e,n){const t=e.children();for(;t.length>0;){const r=t.shift();n(r)&&t.push(...r.children())}}(d,g=>this.transformMaskChild(e,g))}else{if(r.includes(u))return null;d=n.clone()}return this.transformMaskRoot(e,d),d},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:r,options:a}=this,{padding:u,attrs:d}=a,g="stroke-width"in d?d["stroke-width"]:1,i="none"!==n.attr("fill");let s=parseFloat(n.attr("stroke-width"));isNaN(s)&&(s=1);const l=s+2*u,f=l+2*g;let y=this.getMaskShape(e,n);if(!y){const w=e.getNodeBoundingRect(n.node);w.inflate(w.width?0:.5,w.height?0:.5),y=Ie("rect",w.toJSON())}return y.attr(d),Ie("mask",{id:this.getMaskId()}).append([y.clone().attr({fill:i?t:"none",stroke:t,"stroke-width":f}),y.clone().attr({fill:i?r:"none",stroke:r,"stroke-width":l})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:r}=this,{padding:a,attrs:u,maskClip:d=al,layer:g}=t,i="stroke"in u?u.stroke:"#000000";!g&&n===e.el&&r.remove();const s=e.getNodeBoundingRect(n).inflate(a+d),l=this.getMask(e,Ie(n));this.addMask(e.paper,l),r.attr(s.toJSON()),r.attr({transform:Ie.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${l.id})`,fill:i})},unhighlight(e){this.removeMask(e.paper)}}),aa=ta.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Rr("highlight-opacity"),highlight:function(e,n){Ie(n).addClass(this.opacityClassName)},unhighlight:function(e,n){Ie(n).removeClass(this.opacityClassName)}}),ru=Rr("highlighted"),gc=ta.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:ru},highlight:function(e,n){Ie(n).addClass(this.options.className)},unhighlight:function(e,n){Ie(n).removeClass(this.options.className)}},{className:ru});function iu(e,n,t,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function vc(e,n,t,r){return e.getPointAtLength("length"in r?r.length:20)}function Ra(e){return function(n,t,r,a){if(r instanceof Element){var d,u=this.paper.findView(r);if(u)if(u.isNodeConnection(r)){var g="fixedAt"in a?a.fixedAt:"50%";d=ou(u,g)}else d=u.getNodeBBox(r).center();else d=new ge;return e.call(this,n,t,d,a)}return e.apply(this,arguments)}}function ou(e,n){var t=parseFloat(n);return be(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const sa=Ra(function sl(e,n,t,r){var a=1e6,u=e.getConnection(),d=e.getConnectionSubdivisions(),g=new ut(t.clone().offset(0,a),t.clone().offset(0,-a)),i=new ut(t.clone().offset(a,0),t.clone().offset(-a,0)),s=g.intersect(u,{segmentSubdivisions:d}),l=i.intersect(u,{segmentSubdivisions:d}),f=[];return s&&Array.prototype.push.apply(f,s),l&&Array.prototype.push.apply(f,l),f.length>0?t.chooseClosest(f):"fallbackAt"in r?ou(e,r.fallbackAt):yc(e,n,t,r)}),yc=Ra(function mc(e,n,t,r){return e.getClosestPoint(t)||new ge});function Qi(e,n,t){if(ln(t)){const{x:a,y:u}=t;if(isFinite(u)){const d=new ut(n,e),{start:g,end:i}=d.parallel(u);n=g,e=i}t=a}if(!isFinite(t))return e;var r=e.distance(n);return 0===t&&r>0?e:e.move(n,-Math.min(t,r-1))}function au(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function bc(e,n,t,r){var a=n.getNodeBBox(t);r.stroke&&a.inflate(au(t)/2);var u=e.intersect(a);return Qi(u?e.start.chooseClosest(u):e.end,e.start,r.offset)}var su="segmentSubdivisons",uu="shapeBBox";const _c=function ul(e,n,t,r){let{offset:a,alignOffset:u,align:d}=r;return d&&function xc(e,n,t=0){let r,a,u,d;const{start:g,end:i}=e;switch(n){case"left":r="x",a=i,u=g,d=-1;break;case"right":r="x",a=g,u=i,d=1;break;case"top":r="y",a=i,u=g,d=-1;break;case"bottom":r="y",a=g,u=i,d=1;break;default:return}g[r]<i[r]?a[r]=u[r]:u[r]=a[r],isFinite(t)&&(a[r]+=d*t,u[r]+=d*t)}(e,d,u),Qi(e.end,e.start,a)},Cc=bc,ai=function gd(e,n,t,r){var a=n.model.angle();if(0===a)return bc(e,n,t,r);var u=n.getNodeUnrotatedBBox(t);r.stroke&&u.inflate(au(t)/2);var d=u.center(),g=e.clone().rotate(d,a),i=g.setLength(1e6).intersect(u);return Qi(i?g.start.chooseClosest(i).rotate(d,-a):e.end,e.start,r.offset)},go=function md(e,n,t,r){var a,u,d=r.selector,g=e.end;if(a="string"==typeof d?n.findBySelector(d)[0]:Array.isArray(d)?fe(t,d):function vd(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!Ie.isSVGGraphicsElement(a)){if(a===t||!Ie.isSVGGraphicsElement(t))return g;a=t}var ne,i=n.getNodeShape(a),s=n.getNodeMatrix(a),l=n.getRootTranslateMatrix(),f=n.getRootRotateMatrix(),y=l.multiply(f).multiply(s),w=y.inverse(),M=Ie.transformLine(e,w),z=M.start.clone(),X=n.getNodeData(a);if(!1===r.insideout&&(X[uu]||(X[uu]=i.bbox()),X[uu].containsPoint(z)))return g;if(i instanceof gt){var T=r.precision||2;X[su]||(X[su]=i.getSegmentSubdivisions({precision:T})),ne={precision:T,segmentSubdivisions:X[su]}}!0===r.extrapolate&&M.setLength(1e6),(u=M.intersect(i,ne))?Ie.isArray(u)&&(u=z.chooseClosest(u)):!0===r.sticky&&(u=i instanceof it?i.pointNearestToPoint(z):i instanceof rr?i.intersectionWithLineFromCenterToPoint(z):i.closestPoint(z,ne));var R=u?Ie.transformPoint(u,y):g,j=r.offset||0;return r.stroke&&(j+=au(a)/2),Qi(R,e.start,j)};function Vo(e){return function(n,t,r,a){var u=!!a.rotate,d=u?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),g=d[e](),i=a.dx;if(i){var s=be(i);i=parseFloat(i),isFinite(i)&&(s&&(i/=100,i*=d.width),g.x+=i)}var l=a.dy;if(l){var f=be(l);l=parseFloat(l),isFinite(l)&&(f&&(l/=100,l*=d.height),g.y+=l)}return u?g.rotate(n.model.getBBox().center(),-n.model.angle()):g}}const wc=Vo("center"),Sc=Vo("topMiddle"),xd=Vo("bottomMiddle"),Tc=Vo("leftMiddle"),ts=Vo("rightMiddle"),Es=Vo("origin"),bd=Vo("topRight"),Ec=Vo("bottomLeft"),Pc=Vo("corner"),cu=Ra(function yd(e,n,t,r){var a=e.model.angle(),u=e.getNodeBBox(n),d=u.center(),g=u.origin(),i=u.corner(),s=r.padding;if(isFinite(s)||(s=0),g.y+s<=t.y&&t.y<=i.y-s){var l=t.y-d.y;d.x+=0===a||180===a?0:1*l/Math.tan(bt(a)),d.y+=l}else if(g.x+s<=t.x&&t.x<=i.x-s){var f=t.x-d.x;d.y+=90===a||270===a?0:f*Math.tan(bt(a)),d.x+=f}return d}),Ic=Ra(function lu(e,n,t,r){var u,d,g,a=!!r.rotate;a?(u=e.getNodeUnrotatedBBox(n),g=e.model.getBBox().center(),d=e.model.angle()):u=e.getNodeBBox(n);var l,i=r.padding;switch(isFinite(i)&&u.inflate(i),a&&t.rotate(g,d),u.sideNearestToPoint(t)){case"left":l=u.leftMiddle();break;case"right":l=u.rightMiddle();break;case"top":l=u.topMiddle();break;case"bottom":l=u.bottomMiddle()}return a?l.rotate(g,-d):l}),fu=function es(e,n,t,r,a){return e.model.getPointFromConnectedLink(this.model,a).offset(r.dx,r.dy)},ua={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Is=9007199254740991,ns=dn.Highlighting,ll={[ns.DEFAULT]:{name:"stroke",options:{padding:3}},[ns.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[ns.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},cl=[{name:Ji.BACK},{name:Ji.CELLS},{name:Ji.LABELS},{name:Ji.FRONT},{name:Ji.TOOLS}],Cd=Xa.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Ws,linkView:$r,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:ll,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new vt,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,r,a,u){return("target"===a?t:e)instanceof Ws},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:ua.EXACT,frozen:!1,onViewUpdate:function(e,n,t,r,a){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||a.requestConnectedLinksUpdate(e,t,r)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:O,anchorNamespace:H,linkAnchorNamespace:A,connectionPointNamespace:B},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&pr(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new No;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=yt(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var r=t.position;this.isAsync()||!an(r)?this.renderView(e,t):(t.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,t),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===ua.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(n)&&!t.hasActiveBatch(r)&&this.updateViews(e)}var a=this.SORT_DELAYING_BATCHES;a.includes(n)&&!t.hasActiveBatch(a)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:r,defaultAnchor:a,defaultLinkAnchor:u,origin:d,highlighting:g,cellViewNamespace:i,interactive:s}=e;!i&&"undefined"!=typeof joint&&pr(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),vn(n)||(e.defaultConnector=Qn(n)),vn(t)||(e.defaultRouter=Qn(t)),vn(r)||(e.defaultConnectionPoint=Qn(r)),vn(a)||(e.defaultAnchor=Qn(a)),vn(u)||(e.defaultLinkAnchor=Qn(u)),ln(s)&&(e.interactive=_t({},s)),ln(g)&&(e.highlighting=gi({},g,ll)),e.origin=_t({},d)},children:function(){var e=Ie.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Rr("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Rr("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Rr("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:r,layers:a,background:u,grid:d}=e;return this.svg=t,this.defs=r,this.layers=a,this.$background=yt(u),this.$grid=yt(d),this.renderLayers(),Ie.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=cl){this.removeLayers(),e.forEach(({name:a})=>{const d=new nu({name:a});this.layers.appendChild(d.el),this._layers[a]=d});const n=this.getLayerView(Ji.CELLS),t=this.getLayerView(Ji.TOOLS),r=this.getLayerView(Ji.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(Rr("viewport")),r.vel.addClass(Rr("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),Ie.createSVGMatrix(e)}e=Ie.createSVGMatrix(e);var r=Ie.matrixToTransformString(e);return n.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return Ie.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof dn)for(var r=e.model,a=this.model.getConnectedLinks(r),u=0,d=a.length;u<d;u++){var g=a[u],i=this.findViewByModel(g);if(i){var s=["UPDATE"];g.getTargetCell()===r&&s.push("TARGET"),g.getSourceCell()===r&&s.push("SOURCE");var l=Math.max(n+1,i.UPDATE_PRIORITY);this.scheduleViewUpdate(i,i.getFlag(s),l,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof dn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var r=0,a=this.findViewByModel(t.getSourceCell());a&&!this.isViewMounted(a)&&(r=this.dumpView(a),e.updateEndMagnet("source"));var u=0,d=this.findViewByModel(t.getTargetCell());if(d&&!this.isViewMounted(d)&&(u=this.dumpView(d),e.updateEndMagnet("target")),0===r&&0===u)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,r){r||(r={}),this.scheduleViewUpdate(e,n,t,r);var a=this.isAsync();if(!(this.isFrozen()||a&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var u=this.updateViews(r);a&&this.notifyAfterRender(u,r)}},scheduleViewUpdate:function(e,n,t,r){const{_updates:a,options:u}=this,{FLAG_REMOVE:d,FLAG_INSERT:g,UPDATE_PRIORITY:i,cid:s}=e;let l=a.priorities[t];if(l||(l=a.priorities[t]={}),t>i)for(let w=t-1;w>=i;w--){const M=a.priorities[w];!M||!(s in M)||(l[s]|=M[s],delete M[s])}let f=l[s]||0;if((f&n)===n)return;f||a.count++,n&d&&f&g?l[s]^=g:n&g&&f&d&&(l[s]^=d),l[s]|=n;const y=u.onViewUpdate;"function"==typeof y&&y.call(this,e,n,t,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],a=this.registerMountedView(e)|r[t];return delete r[t],a},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:a,model:u}=e;if(e instanceof dn){if(n&r)return this.removeView(u),0;n&a&&(this.insertView(e),n^=a)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var r=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],r},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var r=t.unmounted[n]||0;return delete t.unmounted[n],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=Vn({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,r=0,a=Is;do{r++,n=this.updateViewsBatch(e),t+=n.updated,a=Math.min(n.priority,a)}while(!n.empty);const u={updated:t,batches:r,priority:a};return this.notifyAfterRender(u,e),u},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let r in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:Is});var t=this._updates,r=t.id;if(r){se(r),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var a=this.updateViewsBatch(e),u=Vn({},e,{mountBatchSize:1e3-a.mounted,unmountBatchSize:1e3-a.unmounted}),d=this.checkViewport(u),g=d.unmounted,i=d.mounted,s=n.processed,l=t.count;a.updated>0&&(a.processed=s+=a.updated+a.unmounted,n.priority=Math.min(a.priority,n.priority),a.empty&&0===i?(a.unmounted+=g,a.mounted+=i,a.priority=n.priority,this.notifyAfterRender(a,e),n.processed=0,n.priority=Is,t.count=0):n.processed=s);var f=e.progress;if(l&&"function"==typeof f&&f.call(this,a.empty,s,l,a,this),t.id!==r)return}t.id=W(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,r=0,a=0,u=0,d=0,g=Is,i=!0,s=this.options,l=t.priorities,f="viewport"in e?e.viewport:s.viewport;"function"!=typeof f&&(f=null);var y=s.onViewPostponed;"function"!=typeof y&&(y=null);var w=Object.keys(l);e:for(var M=0,z=w.length;M<z;M++){var X=+w[M],re=l[X];for(var ne in re){if(r>=n){i=!1;break e}var T=Oa[ne];if(T){var R=re[ne];if(0==(R&T.FLAG_REMOVE)){var j=ne in t.unmounted;if(T.DETACHABLE&&f&&!f.call(this,T,!j,this)){j||(this.registerUnmountedView(T),T.unmount()),t.unmounted[ne]|=R,delete re[ne],u++;continue}j&&(R|=T.FLAG_INSERT,d++),R|=this.registerMountedView(T)}var Z=this.updateView(T,R,e);Z>0&&(re[ne]=Z,!y||!y.call(this,T,Z,this)||re[ne])?(a++,i=!1):(g>X&&(g=X),r++,delete re[ne])}else delete re[ne]}}return{priority:g,updated:r,postponed:a,unmounted:u,mounted:d,empty:i}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,r=new Array(t);for(var a=0;a<t;a++)r[a]=Oa[n[a]];return r},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,r=new Array(t);for(var a=0;a<t;a++)r[a]=Oa[n[a]];return r},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var a=this._updates,u=a.unmountedCids,d=a.unmounted,g=0,i=(Math.min(u.length,"mountBatchSize"in n?n.mountBatchSize:1/0));g<i;g++){var s=u[g];if(s in d){var l=Oa[s];if(l){if(l.DETACHABLE&&e&&!e.call(this,l,!1,this)){u.push(s);continue}t++;var f=this.registerMountedView(l);f&&this.scheduleViewUpdate(l,f,l.UPDATE_PRIORITY,{mounting:!0})}}}return u.splice(0,g),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var a=this._updates,u=a.mountedCids,d=a.mounted,g=0,i=(Math.min(u.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));g<i;g++){var s=u[g];if(s in d){var l=Oa[s];if(l){if(!l.DETACHABLE||e.call(this,l,!0,this)){u.push(s);continue}t++,this.registerUnmountedView(l)&&l.unmount()}}}return u.splice(0,g),t},checkViewport:function(e){var n=Vn({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,r=this.checkMountedViews(t,n);return r>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:r}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,r=this.options.frozen,a=n.freezeKey;if(t&&t!==a){if(r&&a)return;n.freezeKey=t,n.keyFrozen=r}this.options.frozen=!0;var u=n.id;n.id=null,this.isAsync()&&u&&se(u)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,r=n.freezeKey;t&&r&&t!==r||(n.freezeKey=null,(!t||t!==r||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===ua.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return an(n)||(n=this.el.clientWidth),an(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:r,height:a}=t;let u=void 0===e?r:e,d=void 0===n?a:n;if(r===u&&a===d)return;t.width=u,t.height=d,this._setDimensions();const g=this.getComputedSize();this.trigger("resize",g.width,g.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;an(n)&&(n=Math.round(n)),an(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,r){r=mn(e)?e:_t({gridWidth:e,gridHeight:n,padding:t},r);const{x:a,y:u,width:d,height:g}=this.getFitToContentArea(r),{sx:i,sy:s}=this.scale();return this.setOrigin(-a*i,-u*s),this.setDimensions(d*i,g*s),new it(a,u,d,g)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,r=Tt(e.padding||0),a=Math.max(e.minWidth||0,n),u=Math.max(e.minHeight||0,t),d=e.maxWidth||Number.MAX_VALUE,g=e.maxHeight||Number.MAX_VALUE,i=e.allowNewOrigin,s="contentArea"in e?new it(e.contentArea):this.getContentArea(e),{sx:l,sy:f}=this.scale();s.x*=l,s.y*=f,s.width*=l,s.height*=f;let y=Math.ceil((s.width+s.x)/n),w=Math.ceil((s.height+s.y)/t);e.allowNegativeBottomRight||(y=Math.max(y,1),w=Math.max(w,1)),y*=n,w*=t;let M=0;("negative"===i&&s.x<0||"positive"===i&&s.x>=0||"any"===i)&&(M=Math.ceil(-s.x/n)*n,M+=r.left,y+=M);let z=0;return("negative"===i&&s.y<0||"positive"===i&&s.y>=0||"any"===i)&&(z=Math.ceil(-s.y/t)*t,z+=r.top,w+=z),y+=r.right,w+=r.bottom,y=Math.max(y,a),w=Math.max(w,u),y=Math.min(y,d),w=Math.min(w,g),new it(-M/l,-z/f,y/l,w/f)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var r=e.contentArea;n=this.localToPaperRect(r),t=new ge(r)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){Vn(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var s,a=Tt(e.padding),u=e.minScaleX||e.minScale,d=e.maxScaleX||e.maxScale,g=e.minScaleY||e.minScale,i=e.maxScaleY||e.maxScale;if(e.fittingBBox)s=e.fittingBBox;else{var l=this.translate(),f=this.getComputedSize();s={x:l.tx,y:l.ty,width:f.width,height:f.height}}s=new it(s).moveAndExpand({x:a.left,y:a.top,width:-a.left-a.right,height:-a.top-a.bottom});var y=this.scale(),w=s.width/n.width*y.sx,M=s.height/n.height*y.sy;if(e.preserveAspectRatio&&(w=M=Math.min(w,M)),e.scaleGrid){var z=e.scaleGrid;w=z*Math.floor(w/z),M=z*Math.floor(M/z)}w=Math.min(d,Math.max(u,w)),M=Math.min(i,Math.max(g,M));var X=this.options.origin,re=s.x-t.x*w-X.x,ne=s.y-t.y*M-X.y;this.scale(w,M),this.translate(re,ne)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new it:Ie(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=vn(n)?n.apply(this,e):!0===n?this.getArea():n?new it(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,r,a=n.cellViewNamespace,u=e.get("type")+"View",d=fe(a,u,".");return e.isLink()?(t=n.linkView,r=$r):(t=n.elementView,r=Ws),new(t.prototype instanceof _r.View?d||t:t.call(this,e)||d||r)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?Ji.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:r}=this,a=t[n];if(a){var{cid:u}=a;const{mounted:d,unmounted:g}=r;a.remove(),delete t[n],delete d[u],delete g[u]}return a},renderView:function(e,n){const{id:t}=e,r=this._views;let a,u,d=!0;return t in r&&(a=r[t],a.model===e?(u=a.FLAG_INSERT,d=!1):this.removeView(e)),d&&(a=r[t]=this.createViewForModel(e),a.paper=this,u=this.registerUnmountedView(a)|a.getFlag(sr(a,"initFlag"))),this.requestViewUpdate(a,u,a.UPDATE_PRIORITY,n),a},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,r=e.length;t<r;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){zr(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=yt(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=yt(e),r=t.map(function(){var u=this.parentNode,d=u.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(u===this)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(this,d),u.removeChild(d)}});Array.prototype.sort.call(t,n).each(function(a){r[a].call(this)})}(e,function(t,r){var a=n.get(t.getAttribute("model-id")),u=n.get(r.getAttribute("model-id")),d=a.attributes.z||0,g=u.attributes.z||0;return d===g?0:d<g?-1:1})},insertView:function(e){const n=this.getLayerView(Ji.CELLS),{el:t,model:r}=e;this.options.sorting===ua.APPROX?n.insertSortedNode(t,r.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,r){if(void 0===e)return Ie.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,r=0);var a=this.translate();(t||r||a.tx||a.ty)&&this.translate(a.tx-t*(e-1),a.ty-r*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var g=this.matrix();return g.a=e,g.d=n,this.matrix(g),this.trigger("scale",e,n,t,r),this},rotate:function(e,n,t){if(void 0===e)return Ie.matrixToRotate(this.matrix());if(void 0===n){var r=this.cells.getBBox();n=r.width/2,t=r.height/2}var a=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(a),this},translate:function(e,n){if(void 0===e)return Ie.matrixToTranslate(this.matrix());const{options:t}=this,{origin:r,drawGrid:a}=t;e||(e=0),n||(n=0);const u=this.matrix();if(u.e===e&&u.f===n)return this;u.e=e,u.f=n,this.matrix(u);const{tx:d,ty:g}=this.translate();return r.x=d,r.y=g,this.trigger("translate",d,g),a&&this.drawGrid(),this},findView:function(e){var n=Sn(e)?this.cells.querySelector(e):e instanceof yt?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=Sn(e)||an(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new ge(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=Vn(n||{},{strict:!1}),e=new it(e);var t=this.model.getElements().map(this.findViewByModel,this),r=n.strict?"containsRect":"intersect";return t.filter(function(a){return a&&e[r](a.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new ge(e,n);return Ie.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,r){var a=new it(e,n,t,r);return Ie.transformRect(a,this.matrix())},paperToLocalPoint:function(e,n){var t=new ge(e,n);return Ie.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,r){var a=new it(e,n,t,r);return Ie.transformRect(a,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new ge(e,n);return Ie.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,r){var a=new it(e,n,t,r);return Ie.transformRect(a,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new ge(e,n);return Ie.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,r){var a=new it(e,n,t,r);return Ie.transformRect(a,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,r){return this.localToPaperRect(e,n,t,r).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var r=new ge(e,n).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,n,t,r){var a=this.pageOffset(),u=new it(e,n,t,r);return u.x-=a.x,u.y-=a.y,this.paperToLocalRect(u)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ge(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof $r))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,r=this.model,a=r.constructor.validations;return!(!t.multiLinks&&!a.multiLinks.call(this,r,n)||!t.linkPinning&&!a.linkPinning.call(this,r,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return vn(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:r,highlighterNamespace:a}=this.options;if(void 0===n){if(!r||t&&(n=r[t],!1===n))return!1;n||(n=r.default)}if(!n)return!1;Sn(n)&&(n={name:n});const u=n.name,d=a[u];if(!d)throw new Error('Unknown highlighter ("'+u+'")');if("function"!=typeof d.highlight)throw new Error('Highlighter ("'+u+'") is missing required highlight() method');if("function"!=typeof d.unhighlight)throw new Error('Highlighter ("'+u+'") is missing required unhighlight() method');return{highlighter:d,options:n.options||{},name:u}},onCellHighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:a,options:u}=r;a.highlight(e,n,u)},onCellUnhighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:a,options:u}=r;a.unhighlight(e,n,u)},pointerdblclick:function(e){e.preventDefault(),e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=D(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=D(e);var r=this.snapToGrid(e.clientX,e.clientY),a=n.sourceView;a?a.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=D(e),t=this.snapToGrid(n.clientX,n.clientY),r=this.eventData(e).sourceView;r?r.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(yt.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=D(e);const{target:n,relatedTarget:t,currentTarget:r}=e,a=this.findView(n);if(this.guard(e,a))return;const u=this.findView(t);a&&(u===a||(a.mouseenter(e),this.el.contains(t)))||u||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=D(e);const{target:n,relatedTarget:t,currentTarget:r}=e,a=this.findView(n);if(this.guard(e,a))return;const u=this.findView(t);a&&(u===a||(a.mouseleave(e),this.el.contains(t)))||u||r===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,r=this.snapToGrid(t.clientX,t.clientY),a=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,r.x,r.y,a):this.trigger("blank:mousewheel",e,r.x,r.y,a)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var r=this.findView(n);if(r){if(e=D(e),this.guard(e,r))return;var a=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,t,a.x,a.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var a=this.findView(t);if(a){if(e=D(e),this.guard(e,a))return;var u=this.snapToGrid(e.clientX,e.clientY);n.call(this,a,e,t,u.x,u.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,r,a,u){n.onmagnet(t,a,u)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,r,a,u){n.magnetpointerdblclick(t,r,a,u)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,r,a,u){n.magnetcontextmenu(t,r,a,u)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=D(e),this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,r.x,r.y)}},getPointerArgs(e){const n=D(e),{x:t,y:r}=this.snapToGrid(n.clientX,n.clientY);return[n,t,r]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof qt||this.svg===e.target||this.el===e.target||yt.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Ie("svg",{width:"100%",height:"100%"},Ie("defs")),patterns:{},add:function(e,n){Ie(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(Ie("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(Sn(e)&&Array.isArray(n[e]))return n[e].map(function(i){return _t({},i)});var t=e||{args:[{}]},r=Array.isArray(t),a=t.name;if(!r&&!a&&!t.markup&&(a="dot"),a&&Array.isArray(n[a])){var u=n[a].map(function(i){return _t({},i)}),d=Array.isArray(t.args)?t.args:[t.args||{}];Vn(d[0],lo(e,"args"));for(var g=0;g<d.length;g++)u[g]&&_t(u[g],d[g]);return u}return r?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],r=this.matrix(),a=this._getGridRefs();this._gridSettings.forEach(function(d,g){var i="pattern_"+g,s=br(d,t[g],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});s.width=n*(r.a||1)*(s.scaleFactor||1),s.height=n*(r.d||1)*(s.scaleFactor||1),a.exist(i)||a.add(i,Ie("pattern",{id:i,patternUnits:"userSpaceOnUse"},Ie(s.markup)));var l=a.get(i);vn(s.update)&&s.update(l.node.childNodes[0],s);var f=s.ox%s.width;f<0&&(f+=s.width);var y=s.oy%s.height;y<0&&(y+=s.height),l.attr({x:f,y,width:s.width,height:s.height})});var u=(new XMLSerializer).serializeToString(a.root.node);return u="url(data:image/svg+xml;base64,"+btoa(u)+")",this.$grid.css("backgroundImage",u),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",r=this.scale(),a=this.translate();mn(n)&&(n=a.tx+r.sx*(n.x||0)+"px "+(a.ty+r.sy*(n.y||0))+"px"),mn(t)&&(t=(t=new it(t).scale(r.sx,r.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,r=(n=n||{}).size,a=n.repeat||"no-repeat",u=n.opacity||1,d=Math.abs(n.quality)||1,g=this.constructor.backgroundPatterns[Ia(a)];if(vn(g)){e.width*=d,e.height*=d;var i=g(e,n);if(!(i instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=i.toDataURL("image/png"),a="repeat",mn(r)?(r.width*=i.width/e.width,r.height*=i.height/e.height):void 0===r&&(n.size={width:i.width/d,height:i.height/d})}else t=e.src,void 0===r&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:u,backgroundRepeat:a,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=Qn(e),C(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,zr(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!mn(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+oe(JSON.stringify(e))),!this.isDefined(n)){var a=un[t]&&un[t](e.args||{});if(!a)throw new Error("Non-existing filter "+t);var u=_t({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});Ie(a,u).appendTo(this.defs)}return n},defineGradient:function(e){if(!mn(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:r,id:a=r+n.id+oe(JSON.stringify(e)),stops:u,attrs:d={}}=e;if(this.isDefined(a))return a;const g=Qt(u).map(({offset:s,color:l,opacity:f})=>Ie("stop").attr({offset:s,"stop-color":l,"stop-opacity":Number.isFinite(f)?f:1})),i=Ie(r,d,g);return i.id=a,i.appendTo(t),a},definePattern:function(e){if(!mn(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+oe(JSON.stringify(e)),markup:a,attrs:u={}}=e;if(!a)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const d=Ie("pattern",{patternUnits:"userSpaceOnUse"});if(d.id=r,d.attr(u),"string"==typeof a)d.append(Ie(a));else{const{fragment:g}=K(a);d.append(g)}return d.appendTo(t),r},defineMarker:function(e){if(!mn(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+oe(JSON.stringify(e)),markup:a,attrs:u={},markerUnits:d="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const g=Ie("marker",{orient:"auto",overflow:"visible",markerUnits:d});if(g.id=r,g.attr(u),a)if("string"==typeof a)g.append(Ie(a));else{const{fragment:i}=K(a);g.append(i)}else{const{type:i="path"}=e,s=Ie(i,lo(e,"type","id","markup","attrs","markerUnits"));g.append(s)}return g.appendTo(t),r}},{sorting:ua,Layers:Ji,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=2*r;var a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.setTransform(-1,0,0,-1,n.width,n.height),a.drawImage(e,0,0,t,r),a.setTransform(-1,0,0,1,n.width,0),a.drawImage(e,0,0,t,r),a.setTransform(1,0,0,-1,0,n.height),a.drawImage(e,0,0,t,r),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=r;var a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.translate(2*t,0),a.scale(-1,1),a.drawImage(e,0,0,t,r),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=t,n.height=2*r;var a=n.getContext("2d");return a.drawImage(e,0,0,t,r),a.translate(0,2*r),a.scale(1,-1),a.drawImage(e,0,0,t,r),n},watermark:function(e,n){n=n||{};var t=e.width,r=e.height,a=document.createElement("canvas");a.width=3*t,a.height=3*r;for(var u=a.getContext("2d"),d=an(n.watermarkAngle)?-n.watermarkAngle:-20,g=bt(d),i=a.width/4,s=a.height/4,l=0;l<4;l++)for(var f=0;f<4;f++)(l+f)%2>0&&(u.setTransform(1,0,0,1,(2*l-1)*i,(2*f-1)*s),u.rotate(g),u.drawImage(e,-t/2,-r/2,t,r));return a}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){Ie(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;Ie(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,a=n.height,u=n.thickness;t=r-u>=0&&a-u>=0?["M",r,0,"H0 M0 0 V0",a].join(" "):"M 0 0 0 0",Ie(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,a=n.height,u=n.thickness;t=r-u>=0&&a-u>=0?["M",r,0,"H0 M0 0 V0",a].join(" "):"M 0 0 0 0",Ie(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,r=n.width,a=n.height,u=n.thickness;t=r-u>=0&&a-u>=0?["M",r,0,"H0 M0 0 V0",a].join(" "):"M 0 0 0 0",Ie(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class Ac{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new No,this.paper=new Cd({el:yt("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const u=16*(.6*Math.max(...t.split("\n").map(g=>g.length))+1)*1.3,d=16*(t.split("\n").length+1)*1.5;return new Jl({id:n,size:{width:u,height:d},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:u,height:d,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new Fo({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],r=[];return n.forEach(a=>{const u=`${a.name.replaceAll(" ","\n")}\n\n${Math.round(100*a.average_success)}% (${a.question_count} Total)`;t.push(this.makeElement(a.pk,u)),a.next_category_ids.forEach(d=>{r.push(this.makeLink(a.pk,d))})}),t.concat(r)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const r=_s.layout(this.graph,{dagre:fi(),graphlib:Dt(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var Zi=h(19329);function Mc(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().reset()}),o.\u0275\u0275text(1," Back "),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext(),r=o.\u0275\u0275reference(6);o.\u0275\u0275classProp("tui-skeleton",0===r.children.length),o.\u0275\u0275property("disabled",!t.parentNode)}}function Oc(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"h2",7),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(),r=o.\u0275\u0275reference(6);o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",0===r.children.length),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function wd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"h2",7),o.\u0275\u0275text(1," Top-Level Categories "),o.\u0275\u0275elementEnd()),2&e){o.\u0275\u0275nextContext();const t=o.\u0275\u0275reference(6);o.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let kc=(()=>{class e{constructor(t,r,a){this.categoryService=t,this.router=r,this.injector=a,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new Ac(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{t.push(r)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(r=>r.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Zi.H),o.\u0275\u0275directiveInject(ee.F0),o.\u0275\u0275directiveInject(o.Injector))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"disabled","click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,Mc,2,3,"button",1),o.\u0275\u0275template(2,Oc,3,3,"ng-container",2),o.\u0275\u0275template(3,wd,2,2,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"div",4,5)),2&t){const a=o.\u0275\u0275reference(4),u=o.\u0275\u0275reference(6);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!a),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("tui-skeleton",0===u.children.length)}},directives:[k.O5,Ct.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var Lc=h(30567),Rc=h(78659),lr=h(27221),la=h(40520),Na=h(22552);let rs=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.get(r).pipe((0,lr.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.delete(r).pipe((0,lr.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const r=this.apiService.getURL("event");return this.http.post(r,t).pipe((0,lr.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const r=this.apiService.getURL("event",t.id);return this.http.put(r,t).pipe((0,lr.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,lr.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,lr.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,r){const a=this.apiService.getURL("event","import-event");return this.http.post(a,{event:t.id,course:r},{observe:"response"}).pipe((0,lr.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(la.eN),o.\u0275\u0275inject(Na.s))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ca=h(71105),vo=h(27482);function Lt(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"h1",3),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.event.name)}}function du(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"p",8),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const fl=function(e,n,t){return["/course",e,"event",n,"problem",t]};function Da(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",12),o.\u0275\u0275text(2," Open "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction3(1,fl,r.courseId,r.eventId,t.question.id))}}const Sd=function(e,n){return["/course",e,"problem",n]};function dl(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"a",12),o.\u0275\u0275text(1," Open "),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,Sd,r.courseId,t.question.id))}}const Nc=function(e){return["/problem",e,"edit"]};function Yr(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",12),o.\u0275\u0275text(2," Edit "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(1,Nc,t.question.id))}}function Td(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h2",5),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",6),o.\u0275\u0275element(6,"tui-tag",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"p",8),o.\u0275\u0275text(8),o.\u0275\u0275pipe(9,"titlecase"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"p",8),o.\u0275\u0275text(11),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(12,du,3,2,"ng-container",0),o.\u0275\u0275elementStart(13,"div",9),o.\u0275\u0275template(14,Da,3,5,"ng-container",10),o.\u0275\u0275template(15,dl,2,4,"ng-template",null,11,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(17,Yr,3,3,"ng-container",0),o.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=o.\u0275\u0275reference(16),a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name,""),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.question.title),o.\u0275\u0275advance(2),o.\u0275\u0275property("status",a.highlight(a.getStatus(t)))("value",a.getStatus(t)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(9,11,t.question.type_name)),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",a.eventId),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",a.eventId)("ngIfElse",r),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",a.user.is_teacher)}}function Ed(e,n){1&e&&(o.\u0275\u0275elementStart(0,"h2",15),o.\u0275\u0275text(1," There aren't any questions available in this event. "),o.\u0275\u0275elementEnd())}function Dc(e,n){1&e&&(o.\u0275\u0275elementStart(0,"h2",15),o.\u0275\u0275text(1," There aren't any questions available in this course. "),o.\u0275\u0275elementEnd())}function Pd(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Ed,2,0,"h2",13),o.\u0275\u0275template(2,Dc,2,0,"ng-template",null,14,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275reference(3),r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",t)}}function Fc(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275template(2,Lt,3,1,"ng-container",0),o.\u0275\u0275elementStart(3,"div",1),o.\u0275\u0275template(4,Td,18,13,"tui-island",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,Pd,4,2,"ng-container",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.eventId),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",t.uqjs),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.uqjs.length)}}let Vc=(()=>{class e{constructor(t,r,a,u,d,g){this.authenticationService=t,this.router=r,this.route=a,this.uqjService=u,this.courseEventService=d,this.courseService=g,this.authenticationService.currentUser.subscribe(i=>this.user=i)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,Lc.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ae.$),o.\u0275\u0275directiveInject(ee.F0),o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(Rc.O),o.\u0275\u0275directiveInject(rs),o.\u0275\u0275directiveInject(pe.N))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,r){1&t&&o.\u0275\u0275template(0,Fc,6,7,"ng-container",0),2&t&&o.\u0275\u0275property("ngIf",r.uqjs)},directives:[k.O5,k.sg,ca.h,vo.Gi,Ct.v0,ee.yS],pipes:[k.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var Fa=h(22307),qi=h(95428),mo=h(50284),pn=h(61895),Xn=h(56249),Di=h(84620);const hl=["importDialog"];function Id(e,n){if(1&e&&o.\u0275\u0275element(0,"tui-data-list-wrapper",7),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("items",t.getEventFilterOptions())}}function Ad(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-island",8),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().openEventImportDialog()}),o.\u0275\u0275elementStart(2,"div",9)(3,"figure",10),o.\u0275\u0275element(4,"tui-svg",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"h2",12),o.\u0275\u0275text(6,"Add Event"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementContainerEnd()}2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hoverable",!0))}function As(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",24)}function Bc(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",25)}function Hc(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275text(1," Grade Not Yet Available "),o.\u0275\u0275elementContainerEnd())}function Md(e,n){if(1&e&&(o.\u0275\u0275text(0),o.\u0275\u0275pipe(1,"number")),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275textInterpolate1(" Grade: ",o.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Od=function(e,n){return["/course",e,"event",n]};function kd(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",26),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(2,Od,r.courseId,t.id)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"Open":"Complete"," ")}}function Ld(e,n){1&e&&(o.\u0275\u0275elementStart(0,"a",27),o.\u0275\u0275text(1," Complete "),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("disabled",!0)}const jc=function(e,n){return["/course",e,"new-event",n]};function zc(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"a",28),o.\u0275\u0275text(1," Edit "),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,jc,r.courseId,t.id))}}function Rd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-island")(1,"p",13),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h2",12),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",14),o.\u0275\u0275template(6,As,1,0,"tui-tag",15),o.\u0275\u0275template(7,Bc,1,0,"ng-template",null,16,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p",17),o.\u0275\u0275text(10),o.\u0275\u0275pipe(11,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"p",17),o.\u0275\u0275text(13),o.\u0275\u0275pipe(14,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"p",18),o.\u0275\u0275template(16,Hc,2,0,"ng-container",19),o.\u0275\u0275template(17,Md,2,4,"ng-template",null,20,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"div",21),o.\u0275\u0275template(20,kd,3,5,"ng-container",19),o.\u0275\u0275template(21,Ld,2,1,"ng-template",null,22,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(23,zc,2,4,"a",23),o.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=o.\u0275\u0275reference(8),a=o.\u0275\u0275reference(18),u=o.\u0275\u0275reference(22),d=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.type),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.name),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1("From: ",o.\u0275\u0275pipeBind2(11,11,t.start_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("Until: ",o.\u0275\u0275pipeBind2(14,14,t.end_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.is_open&&t.is_exam)("ngIfElse",a),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==d.user?null:d.user.is_teacher))("ngIfElse",u),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.has_edit_permission)}}function pl(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-island",33)(1,"p",13),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h3",12),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",34),o.\u0275\u0275listener("click",function(){const u=o.\u0275\u0275restoreView(t).$implicit,d=o.\u0275\u0275nextContext(3);return d.importCourseEvent(u,d.courseId)}),o.\u0275\u0275text(6," Import "),o.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.type),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.name)}}const Uc=function(e){return["/course",e,"new-event"]};function Ms(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",30)(2,"a",31),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().$implicit.complete()}),o.\u0275\u0275elementStart(3,"figure",10),o.\u0275\u0275element(4,"tui-svg",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"h2",12),o.\u0275\u0275text(6,"Create New Event"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(7,pl,7,2,"tui-island",32),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275property("hoverable",!0)("routerLink",o.\u0275\u0275pureFunction1(3,Uc,t.courseId)),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",t.courseEvents)}}function gl(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275template(0,Ms,8,5,"ng-container",4),o.\u0275\u0275elementStart(1,"button",29),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t).$implicit.complete()}),o.\u0275\u0275text(2," Cancel "),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",t.courseEvents)}}var Bo=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(Bo||(Bo={})),Bo))();let Gc=(()=>{class e{constructor(t,r,a,u){this.authenticationService=t,this.courseEventService=r,this.dialogService=a,this.notificationsService=u,this.filter=Bo.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(Bo)}getEvents(){switch(this.filter){case Bo.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case Bo.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case Bo.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,r){this.courseEventService.importCourseEvent(t,r).subscribe(a=>{201===a.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ae.$),o.\u0275\u0275directiveInject(rs),o.\u0275\u0275directiveInject(Fa.RO),o.\u0275\u0275directiveInject(Nt.$F))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(hl,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.importDialog=a.first)}},inputs:{events:"events",course:"course"},decls:8,vars:3,consts:[["tuiTextfieldSize","s",3,"ngModel","ngModelChange"],["tuiTextfield","","placeholder","Choose your hero"],[3,"items",4,"tuiDataList"],[1,"events"],[4,"ngIf"],[4,"ngFor","ngForOf"],["importDialog",""],[3,"items"],["textAlign","center",1,"new-event",3,"hoverable","click"],[1,"tui-space_vertical-10"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],[1,"tui-island__category"],[1,"tui-space_bottom-2"],["size","m","status","success","value","Open",4,"ngIf","ngIfElse"],["eventClosedTag",""],[1,"tui-island__paragraph"],[1,"tui-space_top-2"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"tui-form__buttons"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","m","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Open"],["size","m","status","error","value","Closed"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","m","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],["size","s",4,"ngFor","ngForOf"],["size","s"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"tui-select",0),o.\u0275\u0275listener("ngModelChange",function(u){return r.filter=u}),o.\u0275\u0275element(1,"input",1),o.\u0275\u0275template(2,Id,1,1,"tui-data-list-wrapper",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275template(4,Ad,7,1,"ng-container",4),o.\u0275\u0275template(5,Rd,24,17,"tui-island",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(6,gl,3,1,"ng-template",null,6,o.\u0275\u0275templateRefExtractor)),2&t&&(o.\u0275\u0275property("ngModel",r.filter),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.getEvents()))},directives:[qi.uJ,qi.OI,ve.sz,q.NgControlStatus,q.NgModel,pn.MB,Xn.gX,mo.eC,k.O5,ca.h,Di.P,k.sg,vo.Gi,Ct.v0,ee.yS],pipes:[k.uU,k.JJ],styles:[".events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.new-event[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;justify-content:center}.import-events[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})(),Os=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}useTokens(t,r){const a=new la.WM({"Content-Type":"application/json"}),u=this.apiService.getURL("token-use","use",r);return this.http.post(u,t,{headers:a}).pipe((0,lr.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(la.eN),o.\u0275\u0275inject(Na.s))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var hu=h(21922);function yo(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"tui-notification",8),o.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd())}function Va(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",17)}function Nd(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",18)}function Wc(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Va,1,0,"tui-tag",15),o.\u0275\u0275template(2,Nd,1,0,"ng-template",null,16,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275reference(3),r=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",t)}}function Dd(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",19)}const Fd=function(){return{standalone:!0}};function Vd(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",10),o.\u0275\u0275template(4,Wc,4,2,"ng-container",11),o.\u0275\u0275template(5,Dd,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"p",13),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p",13),o.\u0275\u0275text(10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"p",13),o.\u0275\u0275text(12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"tui-input-count",14),o.\u0275\u0275listener("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(a){return o.\u0275\u0275restoreView(t).$implicit.num_used=a}),o.\u0275\u0275text(14," Number of Tokens Used "),o.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,r=o.\u0275\u0275reference(6);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.option.assignment_name),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",r),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",o.\u0275\u0275pureFunction0(10,Fd))}}let Bd=(()=>{class e{constructor(t,r,a,u){this.tokenUseService=t,this.route=r,this.authenticationService=a,this.notificationsService=u,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(d=>this.user=d)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(a=>r[a.option.id]=a.num_used),this.tokenUseService.useTokens(r,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Os),o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(ae.$),o.\u0275\u0275directiveInject(Nt.$F))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(t,r){1&t&&(o.\u0275\u0275template(0,yo,3,0,"ng-container",0),o.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),o.\u0275\u0275text(3),o.\u0275\u0275pipe(4,"number"),o.\u0275\u0275pipe(5,"number"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(6,"form",3)(7,"div",4),o.\u0275\u0275template(8,Vd,15,11,"tui-island",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",6)(10,"button",7),o.\u0275\u0275listener("click",function(){return r.confirmChanges()}),o.\u0275\u0275text(11," Confirm Changes "),o.\u0275\u0275elementEnd()()()),2&t&&(o.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("error",r.invalid),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2(" ",o.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",o.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",r.courseReg.token_uses),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",r.invalid))},directives:[k.O5,Ut.Ls,q.\u0275NgNoValidate,q.NgControlStatusGroup,q.NgForm,k.sg,ca.h,vo.Gi,hu.EA,hu.aQ,q.NgControlStatus,q.NgModel,Ct.v0],pipes:[k.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var $c=h(76508),eo=h(78697);function Hd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-island",10),o.\u0275\u0275element(1,"div",11),o.\u0275\u0275elementStart(2,"figure",12),o.\u0275\u0275element(3,"tui-avatar",13,14),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"p",15),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"h3",16),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p",17),o.\u0275\u0275text(10),o.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index,a=o.\u0275\u0275reference(4),u=o.\u0275\u0275nextContext(2);o.\u0275\u0275styleProp("margin-top",r+"rem")("order",r%2*-r),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("background-color",a.bgColor),o.\u0275\u0275advance(2),o.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(u.getGetOrdinal(t.rank)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function jd(e,n){1&e&&(o.\u0275\u0275elementStart(0,"th",18),o.\u0275\u0275text(1,"Rank"),o.\u0275\u0275elementEnd())}function zd(e,n){1&e&&(o.\u0275\u0275elementStart(0,"th",18),o.\u0275\u0275text(1,"Name"),o.\u0275\u0275elementEnd())}function Ud(e,n){1&e&&(o.\u0275\u0275elementStart(0,"th",18),o.\u0275\u0275text(1,"Tokens"),o.\u0275\u0275elementEnd())}function Gd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"td",21),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(t.rank)," ")}}function Yc(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"td",21)(1,"div",22),o.\u0275\u0275element(2,"tui-avatar",23),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function Xc(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"td",21),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function Kc(e,n){1&e&&(o.\u0275\u0275elementStart(0,"tr",19),o.\u0275\u0275template(1,Gd,2,1,"td",20),o.\u0275\u0275template(2,Yc,4,4,"td",20),o.\u0275\u0275template(3,Xc,2,1,"td",20),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiCell","rank"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiCell","name"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiCell","token"))}function Wd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",1)(1,"div",2),o.\u0275\u0275template(2,Hd,11,12,"tui-island",3),o.\u0275\u0275pipe(3,"tuiFilter"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),o.\u0275\u0275template(7,jd,2,0,"th",7),o.\u0275\u0275template(8,zd,2,0,"th",7),o.\u0275\u0275template(9,Ud,2,0,"th",7),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(10,"tbody",8),o.\u0275\u0275pipe(11,"tuiFilter"),o.\u0275\u0275template(12,Kc,4,3,"tr",9),o.\u0275\u0275elementEnd()()()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),o.\u0275\u0275advance(2),o.\u0275\u0275property("columns",t.displayedColumns),o.\u0275\u0275advance(3),o.\u0275\u0275property("tuiHead","rank"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiHead","name"),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiHead","token"),o.\u0275\u0275advance(1),o.\u0275\u0275property("data",o.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),o.\u0275\u0275advance(2),o.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}let $d=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(t,r)=>t.rank>r,this.filterInTopX=(t,r)=>t.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(t){return t.sort((a,u)=>u.token-a.token).map((a,u)=>({rank:u+1,name:a.name,token:a.token}))}getGetOrdinal(t){const r=["th","st","nd","rd"],a=t%100;return t+(r[(a-20)%10]||r[a]||r[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(t,r){1&t&&o.\u0275\u0275template(0,Wd,13,15,"div",0),2&t&&o.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[k.O5,k.sg,ca.h,$c.JP,eo.c4,eo.Nx,eo.EE,eo.DZ,eo.Ws,eo.jY,eo.LU,eo.fu,eo.Bl,eo.Kt],pipes:[Ae.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();var pu=h(56197);function Jc(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",19)}function Yd(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",20)}function Xd(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275text(1," Grade: TBA "),o.\u0275\u0275elementContainerEnd())}function Kd(e,n){if(1&e&&(o.\u0275\u0275text(0),o.\u0275\u0275pipe(1,"number")),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275textInterpolate1(" Grade: ",o.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Qc=function(e,n){return["/course",e,"event",n]};function Jd(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",21),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(2,Qc,r.course.id,t.id)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Qd(e,n){1&e&&(o.\u0275\u0275elementStart(0,"a",22),o.\u0275\u0275text(1," Complete "),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("disabled",!0)}const Ci=function(e,n){return["/course",e,"new-event",n]};function Zd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"a",23),o.\u0275\u0275text(1," Edit "),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,Ci,r.course.id,t.id))}}function qd(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",6)(1,"div",7),o.\u0275\u0275text(2," Challenge "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",9)(6,"div"),o.\u0275\u0275text(7),o.\u0275\u0275pipe(8,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div"),o.\u0275\u0275text(10),o.\u0275\u0275pipe(11,"date"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(12,"div",10),o.\u0275\u0275template(13,Jc,1,0,"tui-tag",11),o.\u0275\u0275template(14,Yd,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",13),o.\u0275\u0275template(17,Xd,2,0,"ng-container",14),o.\u0275\u0275template(18,Kd,2,4,"ng-template",null,15,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"div",16),o.\u0275\u0275template(21,Jd,3,5,"ng-container",14),o.\u0275\u0275template(22,Qd,2,1,"ng-template",null,17,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(24,Zd,2,4,"a",18),o.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=o.\u0275\u0275reference(15),a=o.\u0275\u0275reference(19),u=o.\u0275\u0275reference(23),d=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(t.name),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("From: ",o.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("Until: ",o.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",a),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==d.user?null:d.user.is_teacher))("ngIfElse",u),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.has_edit_permission)}}function eh(e,n){if(1&e&&o.\u0275\u0275template(0,qd,25,16,"div",5),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function Zc(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",19)}function th(e,n){1&e&&o.\u0275\u0275element(0,"tui-tag",26)}function nh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"a",21),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(2,Qc,r.course.id,t.id)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function rh(e,n){1&e&&(o.\u0275\u0275elementStart(0,"a",22),o.\u0275\u0275text(1," Complete "),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("disabled",!0)}function ih(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"a",23),o.\u0275\u0275text(1," Edit "),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction2(1,Ci,r.course.id,t.id))}}function vl(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",25)(1,"div",7),o.\u0275\u0275text(2," Challenge "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",9)(6,"div"),o.\u0275\u0275text(7),o.\u0275\u0275pipe(8,"date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div"),o.\u0275\u0275text(10),o.\u0275\u0275pipe(11,"date"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(12,"div",10),o.\u0275\u0275template(13,Zc,1,0,"tui-tag",11),o.\u0275\u0275template(14,th,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",13),o.\u0275\u0275text(17),o.\u0275\u0275pipe(18,"number"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"div",16),o.\u0275\u0275template(20,nh,3,5,"ng-container",14),o.\u0275\u0275template(21,rh,2,1,"ng-template",null,17,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(23,ih,2,4,"a",18),o.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=o.\u0275\u0275reference(15),a=o.\u0275\u0275reference(22),u=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(t.name),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("From: ",o.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("Until: ",o.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" Grade: ",o.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1"),"% "),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==u.user?null:u.user.is_teacher))("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.has_edit_permission)}}function oh(e,n){if(1&e&&o.\u0275\u0275template(0,vl,24,18,"div",24),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngForOf",t.pastEvents)}}let ah=(()=>{class e{constructor(t){this.authenticationService=t,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t),this.upcomingEvents=this.events.filter(t=>t.is_open||t.is_not_available_yet).filter(t=>"CHALLENGE"==t.type),this.pastEvents=this.events.filter(t=>t.is_closed).filter(t=>"CHALLENGE"==t.type)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ae.$))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),o.\u0275\u0275text(3," Upcoming Challenges "),o.\u0275\u0275template(4,eh,1,1,"ng-template",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"tui-accordion-item",4),o.\u0275\u0275text(6," Past Challenges "),o.\u0275\u0275template(7,oh,1,1,"ng-template",3),o.\u0275\u0275elementEnd()()()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("closeOthers",!1),o.\u0275\u0275advance(1),o.\u0275\u0275property("disableHover",!0))},directives:[pu.oc,pu.Kc,pu.dv,k.sg,k.O5,vo.Gi,Ct.v0,ee.yS],pipes:[k.uU,k.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function sh(e,n){1&e&&(o.\u0275\u0275elementStart(0,"button",13),o.\u0275\u0275text(1,"Concept Map"),o.\u0275\u0275elementEnd())}function uh(e,n){1&e&&(o.\u0275\u0275elementStart(0,"button",14),o.\u0275\u0275text(1,"Questions"),o.\u0275\u0275elementEnd())}function lh(e,n){1&e&&(o.\u0275\u0275elementStart(0,"button",15),o.\u0275\u0275text(1,"Events"),o.\u0275\u0275elementEnd())}function ch(e,n){1&e&&(o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275text(1,"Token Use"),o.\u0275\u0275elementEnd())}function fh(e,n){1&e&&(o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275text(1,"Leaderboard"),o.\u0275\u0275elementEnd())}function dh(e,n){1&e&&(o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275text(1,"Challenges"),o.\u0275\u0275elementEnd())}function hh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-concept-map",19),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("currCourse",t.course)}}function ph(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-question-snippet",20),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("questions",null==t.course?null:t.course.question_set)("uqjs",null==t.course?null:t.course.uqjs)}}function gh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-events-snippet",21),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function vh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-token-use-snippet",22),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("courseReg",null==t.course?null:t.course.course_reg)}}function mh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-leader-board",23),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("leaderBoard",null==t.course?null:t.course.leader_board)("rankTopX",3)}}function yh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275element(1,"app-course-challenge-snippet",21),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function xh(e,n){1&e&&o.\u0275\u0275element(0,"tui-svg",24)}let bh=(()=>{class e{constructor(t,r,a){this.authenticationService=t,this.courseService=r,this.route=a,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(u=>this.user=u)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ae.$),o.\u0275\u0275directiveInject(pe.N),o.\u0275\u0275directiveInject(ee.gz))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:21,vars:13,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-text_h6"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"h6",2),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"tui-tabs-with-more",3,4),o.\u0275\u0275template(7,sh,2,0,"button",5),o.\u0275\u0275template(8,uh,2,0,"button",6),o.\u0275\u0275template(9,lh,2,0,"button",7),o.\u0275\u0275template(10,ch,2,0,"button",8),o.\u0275\u0275template(11,fh,2,0,"button",9),o.\u0275\u0275template(12,dh,2,0,"button",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(13,hh,2,1,"ng-container",11),o.\u0275\u0275template(14,ph,2,2,"ng-container",11),o.\u0275\u0275template(15,gh,2,2,"ng-container",11),o.\u0275\u0275template(16,vh,2,1,"ng-container",11),o.\u0275\u0275template(17,mh,2,2,"ng-container",11),o.\u0275\u0275template(18,yh,2,2,"ng-container",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(19,xh,1,0,"ng-template",null,12,o.\u0275\u0275templateRefExtractor)),2&t){const a=o.\u0275\u0275reference(6),u=o.\u0275\u0275reference(20);o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!r.course),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.description," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!r.course),o.\u0275\u0275property("moreContent",u),o.\u0275\u0275advance(8),o.\u0275\u0275property("ngIf",0===a.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1===a.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",2===a.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",3===a.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",4===a.activeItemIndex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",5===a.activeItemIndex)}},directives:[zt.WN,zt.tl,zt.yu,k.O5,kc,Vc,Gc,Bd,$d,ah,Di.P],styles:[""]}),e})();var et=h(68858);let ml=(()=>{class e{static createForm(){return(new q.FormBuilder).group({name:new q.FormControl(null,[q.Validators.required]),type:new q.FormControl("",[q.Validators.required]),countForTokens:new q.FormControl(!1,[q.Validators.required]),startEndDatePicker:new q.FormControl(new et.VR(et.TU.currentLocal(),et.TU.currentLocal().append({day:7})),[q.Validators.required]),startTimePicker:new q.FormControl(et.qD.currentLocal(),[q.Validators.required]),endTimePicker:new q.FormControl(et.qD.currentLocal(),[q.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new q.FormBuilder).group({name:new q.FormControl(t.name,[q.Validators.required]),type:new q.FormControl(t.type,[q.Validators.required]),countForTokens:new q.FormControl(t.count_for_tokens,[q.Validators.required]),startEndDatePicker:new q.FormControl(new et.VR(et.TU.fromLocalNativeDate(new Date(t.start_date)),et.TU.fromLocalNativeDate(new Date(t.end_date))),[q.Validators.required]),startTimePicker:new q.FormControl(et.qD.fromLocalNativeDate(new Date(t.start_date)),[q.Validators.required]),endTimePicker:new q.FormControl(et.qD.fromLocalNativeDate(new Date(t.end_date)),[q.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,r,a){return{id:a,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:r,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,r){return new Date(t.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,r=n.get("startTimePicker").value,a=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&a.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var gu=h(86097),yl=h(13774),Le=h(52014),Ho=h(35302),to=h(35137),si=h(28634),fa=h(14335),ks=h(35640),at=h(73442),xl=h(295),da=h(40022),xo=h(39193),bl=h(52164),_l=h(70589),Zr=h(45261),ha=h(15411),Ba=h(83618),Gn=h(72997),is=h(85113);function qc(e,{value:n,min:t,max:r,dateFormat:a,dateSeparator:u}){return n&&n.toString(a,u)===e?e:et.TU.normalizeParse(e,a).dayLimit(t,r).toString(a,u)}function _h(e){return n=>n.length!==et.ek?{value:n}:{value:qc(n,e)}}function vu(e,n){return et.TU.normalizeParse(e.slice(0,et.ek),n.dateFormat).dayLimit(n.min,n.max)}function Ch(e,n){const{dateFormat:t,dateSeparator:r}=n;switch(e.length){case et.ek:return vu(e,n).toString(t,r);case et.ek+et.mH.length:return vu(e,n).toString(t,r)+et.mH;case et.FZ:return n.value&&n.value.toString(t,r)===e?e:et.VR.sort(vu(e.slice(0,et.ek),n),vu(e.slice(et.ek+et.mH.length),n)).toString(t,r);default:return e}}function wh(e){return n=>({value:Ch(n,e)})}function ef(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},Ba.bM),n);return a=>{const u=[],d=a.split("");return t.forEach(i=>{const s=e.indexOf(i),l=parseInt(String(r[i]).substr(0,1),10);parseInt(d[s],10)>l&&(d[s+1]=d[s],d[s]="0",u.push(s))}),!t.some(i=>parseInt(a.substr(e.indexOf(i),2),10)>r[i])&&{value:d.join(""),indexesOfPipedChars:u}}}const mu=Array(2).fill(xo.hW),tf=Array(4).fill(xo.hW);function nf(e,n){return"YMD"===(is.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...tf,n,...mu,n,...mu]:[...mu,n,...mu,n,...tf]}function Sh(e,n){is.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=nf(e,n);return[...t,si.f$,si.F,si.f$,...t]}function yu(e,n){const{length:t}=String(e),r=Array(t).fill(xo.hW);return n&&r.unshift(n),r}function rf(e,n={}){const{HH:t,MM:r,SS:a,MS:u}=Object.assign(Object.assign({},Ba.bM),n);return[...yu(t),...yu(r,":"),...e.includes("HH:MM:SS")?yu(a,":"):[],..."HH:MM:SS.MSS"===e?yu(u,"."):[]]}var bo=h(35628),Cl=h(24850),xu=h(7625),wl=h(6083),Sl=h(34530),qr=h(33186),_o=h(93030),os=h(26171),Rt=h(24710),bu=h(53256),_u=h(2141),Cu=h(66695);let Eh=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(qr.gH))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Rt.gn)([(0,o.Input)(),(0,o.HostBinding)("attr.data-tui-color"),(0,at.TH)()],e.prototype,"tuiColor",void 0),(0,Rt.gn)([(0,o.Input)(),(0,o.HostBinding)("attr.data-tui-background"),(0,at.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(qr.gH))],e),e})(),Ph=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})();var Tl=h(46579);const wu=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:r})=>{is.z.assert(Number.isInteger(n)),is.z.assert((0,Tl.Z2)(n,0,6)),is.z.assert(Number.isInteger(t)),is.z.assert((0,Tl.Z2)(t,0,et.NA));let a=n*et.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:et.NA-(n-t)})(e,r)+1;return a>e.daysCount&&(a-=e.daysCount,e=e.append({month:1})),a<=0&&(a=(e=e.append({month:-1})).daysCount+a),new et.TU(e.year,e.month,a)};let of=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const a=[];for(let u=0;u<6;u++){const d=[];for(let g=0;g<et.NA;g++){const i=wu({month:t,rowIndex:u,colIndex:g,firstDayOfWeek:this.firstDayOfWeek}),l=(f,y=t)=>f.year>y.year||f.month>y.month;if(!((f,y=t)=>f.year<y.year||f.month<y.month)(i)||r){if(l(i)&&!r)break;d.push(i)}}a.push(d)}return this.currentSheet=a.filter(u=>u.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Zr.Sy,16))},e.\u0275pipe=o.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Zr.Sy))],e),e})(),af=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})();function El(e,n){1&e&&o.\u0275\u0275element(0,"div",3),2&e&&o.\u0275\u0275property("innerText",n.$implicit)}function sf(e,n){if(1&e&&o.\u0275\u0275element(0,"div",12),2&e){const t=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275property("tuiBackground",t[1])}}function uf(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275element(1,"div",12),o.\u0275\u0275template(2,sf,1,1,"div",13),o.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiBackground",t[0]),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.length>1)}}function lf(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",8),o.\u0275\u0275listener("tuiHoveredChange",function(a){o.\u0275\u0275restoreView(t);const u=o.\u0275\u0275nextContext().tuiLet;return o.\u0275\u0275nextContext(4).onItemHovered(a&&u)})("tuiPressedChange",function(a){o.\u0275\u0275restoreView(t);const u=o.\u0275\u0275nextContext().tuiLet;return o.\u0275\u0275nextContext(4).onItemPressed(a&&u)})("click",function(){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext().tuiLet;return o.\u0275\u0275nextContext(4).onItemClick(a)}),o.\u0275\u0275elementStart(1,"div",9),o.\u0275\u0275text(2),o.\u0275\u0275template(3,uf,3,2,"div",10),o.\u0275\u0275pipe(4,"tuiMapper"),o.\u0275\u0275elementEnd()()}if(2&e){const t=o.\u0275\u0275nextContext().tuiLet,r=o.\u0275\u0275nextContext(4);o.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),o.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(t)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.day," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind4(4,12,t,r.toMarkers,r.itemIsToday(t),!!r.getItemRange(t)))}}function cf(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,lf,5,17,"div",7),o.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,r=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!r.itemIsUnavailable(t)||r.showAdjacent)}}function Mh(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,cf,2,1,"ng-container",2),o.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext().$implicit,a=o.\u0275\u0275nextContext().tuiLet;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",a[r][t])}}function Oh(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",5),o.\u0275\u0275template(1,Mh,2,1,"ng-container",6),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext().tuiLet;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiRepeatTimesOf",r[t].length)}}function kh(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,Oh,2,1,"div",4),o.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let Su=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=et.TU.currentLocal(),this.month=et.ql.currentLocal(),this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new o.EventEmitter,this.dayClick=new o.EventEmitter,this.toMarkers=(r,a,u)=>{if(a||u)return null;const d=this.markerHandler(r);return 0===d.length?null:d}}get isSingle(){return null!==this.value&&(this.value instanceof et.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:r,pressedItem:a,hoveredItem:u}=this;return r(t)?"disabled":a&&a.daySame(t)?"pressed":u&&u.daySame(t)?"hovered":null}getItemRange(t){const{value:r,hoveredItem:a}=this;return r?r instanceof et.TU?r.daySame(t)?"single":null:r.from.daySame(t)&&!r.isSingleDay||a&&a.dayAfter(r.from)&&r.from.daySame(t)&&r.isSingleDay||a&&a.daySame(t)&&a.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(t)&&!r.isSingleDay||a&&a.dayBefore(r.from)&&r.from.daySame(t)&&r.isSingleDay||a&&a.daySame(t)&&a.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:r,hoveredItem:a}=this;if(null===r||r instanceof et.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(t)&&r.to.dayAfter(t);if(null===a)return!1;const u=et.VR.sort(r.from,a);return u.from.daySameOrBefore(t)&&u.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,fa.Hm)(this.hoveredItem,t,(r,a)=>r.daySame(a))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Zr.lQ))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,El,1,1,"div",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,kh,2,1,"div",2),o.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,2,r.weekDays$)),o.\u0275\u0275advance(2),o.\u0275\u0275property("tuiLet",o.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[k.sg,da.Ls,bu.Xj,k.O5,_u.c,Cu.n,Eh],pipes:[k.Ov,of,_o.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"month",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"markerHandler",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"hoveredItem",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"showAdjacent",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"dayClick",void 0),(0,Rt.gn)([(0,o.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Zr.lQ))],e),e})(),Tu=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,da.WD,_o.I,bu.Ih,_u.V,Cu.f,Ph,af]]}),e})();var ff=h(43360);function Lh(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",4),o.\u0275\u0275listener("tuiHoveredChange",function(a){const d=o.\u0275\u0275restoreView(t).tuiLet;return o.\u0275\u0275nextContext(3).onItemHovered(a,d)})("tuiPressedChange",function(a){const d=o.\u0275\u0275restoreView(t).tuiLet;return o.\u0275\u0275nextContext(3).onItemPressed(a,d)})("click",function(){const u=o.\u0275\u0275restoreView(t).tuiLet;return o.\u0275\u0275nextContext(3).onItemClick(u)}),o.\u0275\u0275elementStart(1,"div",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,r=o.\u0275\u0275nextContext(3);o.\u0275\u0275classProp("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),o.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(t)),o.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t)}}function Pl(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Lh,3,8,"div",3),o.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext().$implicit,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",a.getItem(r,t))}}function df(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",1),o.\u0275\u0275template(1,Pl,2,1,"ng-container",2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiRepeatTimesOf",4))}let Rh=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=et.ql.currentLocal().year,this.value=null,this.initialItem=et.ql.currentLocal(),this.min=et.K1,this.max=et.Oy,this.disabledItemHandler=si.Iy,this.yearClick=new o.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof et.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,r){return 4*t+r+this.calculatedMin}getItemState(t){const{disabledItemHandler:r,max:a,pressedItem:u,hoveredItem:d}=this;return a.year<t||r!==si.Iy&&r(t)?"disabled":u===t?"pressed":d===t?"hovered":null}getItemRange(t){const{value:r,hoveredItem:a}=this;return null===r?null:r instanceof et.F4?r.year===t?"single":null:r.from.year===t&&!r.from.yearSame(r.to)||null!==a&&a>r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==a&&a===t&&a<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===t&&!r.from.yearSame(r.to)||null!==a&&a<r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==a&&a===t&&a>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:r,hoveredItem:a}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==a&&r.from.year!==a&&(0,Tl.Z2)(t,Math.min(r.from.year,a),Math.max(r.from.year,a)):r.from.year<=t&&r.to.year>t)}onItemHovered(t,r){this.updateHoveredItem(t,r)}onItemPressed(t,r){this.updatePressedItem(t,r)}onItemClick(t){this.yearClick.emit(new et.F4(t))}updateHoveredItem(t,r){this.hoveredItem=t?r:null}updatePressedItem(t,r){this.pressedItem=t?r:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,r){1&t&&o.\u0275\u0275template(0,df,2,1,"div",0),2&t&&o.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[bu.Xj,da.Ls,ff.M,_u.c,Cu.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"initialItem",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"yearClick",void 0),(0,Rt.gn)([(0,o.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),Nh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[_u.V,Cu.f,bu.Ih,da.WD,ff.e]]}),e})();var Il=h(61279),Eu=h(33703),as=h(89627),gf=h(37940),vf=h(3054);const Dh=["wrapper"];function Fh(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",1,2),o.\u0275\u0275listener("tuiFocusedChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onFocused(a)})("tuiFocusVisibleChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onFocusVisible(a)})("keydown.arrowLeft",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onRightClick()}),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onLeftClick()}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"span",4),o.\u0275\u0275projection(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",5),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onRightClick()}),o.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("tuiFocusable",r.computedFocusable),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),o.\u0275\u0275property("title",t[0])("focusable",!1),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),o.\u0275\u0275property("title",t[1])("focusable",!1)}}const Vh=["*"];let no=(()=>{let e=class extends Ho.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new o.EventEmitter,this.rightClick=new o.EventEmitter}get focused(){return!!this.wrapper&&(0,ks.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Zr.U4))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Dh,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.wrapper=a.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Vh,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,Fh,6,9,"div",0),o.\u0275\u0275pipe(1,"async")),2&t&&o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[k.O5,os.A,Eu.t,vf.U,gf.q,Ct.v0],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Rt.gn)([(0,o.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabled",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"mode",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"leftDisabled",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"rightDisabled",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"leftClick",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"rightClick",void 0),e=(0,Rt.gn)([(0,Rt.fM)(0,(0,o.Inject)(Zr.U4))],e),e})(),Bh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,gf.c,vf.F,Eu.u,os.Z,Ct.fN]]}),e})();var mf=h(5767);function Ha(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275text(1),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function $t(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",3),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onYearClick()}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("tuiFocusable",!1),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let Hh=(()=>{let e=class{constructor(){this.value=et.ql.currentLocal(),this.min=et.K1,this.max=et.Oy,this.valueChange=new o.EventEmitter,this.yearClick=new o.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const r=this.value.append(t);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),o.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275pipe(3,"tuiMonth"),o.\u0275\u0275template(4,Ha,2,1,"ng-container",1),o.\u0275\u0275template(5,$t,2,2,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&t){const a=o.\u0275\u0275reference(6);o.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(2,6,o.\u0275\u0275pipeBind1(3,8,r.value))," "),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",a)}},directives:[no,k.O5,as.V,Eu.t],pipes:[k.Ov,mf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"valueChange",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"yearClick",void 0),e})(),ui=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,Eu.u,Bh,as.j,mf.g]]}),e})();function cr(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),o.\u0275\u0275listener("yearClick",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onPickerYearClick(a)}),o.\u0275\u0275elementEnd()()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function jh(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),o.\u0275\u0275listener("valueChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onPaginationValueChange(a)})("yearClick",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onPaginationYearClick(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),o.\u0275\u0275listener("hoveredItemChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onHoveredItemChange(a)})("dayClick",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDayClick(a)}),o.\u0275\u0275pipe(2,"tuiMapper"),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),o.\u0275\u0275advance(1),o.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",o.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let Co=(()=>{let e=class{constructor(){this.month=et.ql.currentLocal(),this.value=null,this.disabledItemHandler=si.Iy,this.min=et.K1,this.max=et.Oy,this.minViewedMonth=et.K1,this.maxViewedMonth=et.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=xo.zE,this.dayClick=new o.EventEmitter,this.monthChange=new o.EventEmitter,this.hoveredItemChange=new o.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,r,a)=>u=>u.dayBefore(r)||u.dayAfter(a)||t(u)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new et.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,fa.Hm)(this.hoveredItem,t,(r,a)=>r.daySame(a))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,r){if(1&t&&(o.\u0275\u0275template(0,cr,2,4,"tui-scrollbar",0),o.\u0275\u0275template(1,jh,3,14,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&t){const a=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",r.year)("ngIfElse",a)}},directives:[k.O5,Il.IB,Rh,Hh,Su],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"month",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"value",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"minViewedMonth",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"hoveredItem",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"showAdjacent",void 0),(0,Rt.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"markerHandler",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"dayClick",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"monthChange",void 0),(0,Rt.gn)([(0,o.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),Ls=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,ui,Tu,Nh,Il.Jy,_o.I]]}),e})(),zh=(()=>{let e=class{constructor(t,r,a){this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.defaultViewedMonthFirst=et.ql.currentLocal(),this.defaultViewedMonthSecond=et.ql.currentLocal().append({month:1}),this.min=et.K1,this.max=et.Oy,this.value=null,this.dayClick=new o.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(u,d)=>u.append({month:d}),t&&t.pipe((0,Sl.YP)(r),(0,xu.R)(a)).subscribe(u=>{this.value=u,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Gn.cU,8),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(qr.a3))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[o.\u0275\u0275ProvidersFeature([qr.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"tui-calendar",0),o.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionFirstViewedMonth(u)}),o.\u0275\u0275pipe(1,"tuiMapper"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"tui-calendar",1),o.\u0275\u0275listener("hoveredItemChange",function(u){return r.hoveredItem=u})("dayClick",function(u){return r.onDayClick(u)})("monthChange",function(u){return r.onSectionSecondViewedMonth(u)}),o.\u0275\u0275pipe(3,"tuiMapper"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",o.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),o.\u0275\u0275advance(2),o.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",o.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[Co],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"value",void 0),(0,Le.gn)([(0,o.Output)()],e.prototype,"dayClick",void 0),e=(0,Le.gn)([(0,Le.fM)(0,(0,o.Inject)(Gn.cU)),(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(qr.a3))],e),e})(),Uh=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[_o.I,Il.Jy,Ls]]}),e})();const yf=function(e,n,t,r){return[e,n,t,r,!0]},xf=function(e,n,t,r){return[e,n,t,r,!1]};function Al(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),o.\u0275\u0275listener("dayClick",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDayClick(a)}),o.\u0275\u0275pipe(1,"tuiMapper"),o.\u0275\u0275pipe(2,"tuiMapper"),o.\u0275\u0275pipe(3,"tuiMapper"),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("markerHandler",t.markerHandler)("min",o.\u0275\u0275pipeBindV(1,7,o.\u0275\u0275pureFunction4(22,yf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",o.\u0275\u0275pipeBindV(2,13,o.\u0275\u0275pureFunction4(27,xf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",o.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function Gh(e,n){1&e&&o.\u0275\u0275element(0,"tui-svg",9)}function jo(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",7),o.\u0275\u0275listener("keydown.enter.prevent",function(){const u=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(u)})("keydown.space.prevent",function(){const u=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(u)})("click",function(){const u=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(u)}),o.\u0275\u0275text(1),o.\u0275\u0275template(2,Gh,1,0,"tui-svg",8),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275attribute("aria-checked",r.isItemActive(t)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isItemActive(t))}}const bf=function(e,n,t,r,a,u){return[e,n,t,r,a,u]};function Pu(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),o.\u0275\u0275listener("dayClick",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDayClick(a)}),o.\u0275\u0275pipe(2,"tuiMapper"),o.\u0275\u0275pipe(3,"tuiMapper"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"tui-data-list",5),o.\u0275\u0275template(5,jo,3,3,"button",6),o.\u0275\u0275pipe(6,"tuiMapper"),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd()()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",o.\u0275\u0275pipeBindV(2,7,o.\u0275\u0275pureFunction4(28,yf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",o.\u0275\u0275pipeBindV(3,13,o.\u0275\u0275pureFunction4(33,xf,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBindV(6,19,o.\u0275\u0275pureFunction6(38,bf,t.items,t.mapper,t.min,t.max,t.minLength,o.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let Kn=(()=>{let e=class{constructor(t,r,a,u){this.otherDateText$=u,this.defaultViewedMonth=et.ql.currentLocal(),this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.items=[],this.min=et.K1,this.max=et.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new o.EventEmitter,this.rangeChange=new o.EventEmitter,this.maxLengthMapper=Ba.EP,this.monthShiftMapper=d=>d.append({month:1}),this.mapper=(d,g,i,s,l)=>[...d.filter(f=>(null===s||f.range.from.append(s).daySameOrBefore(f.range.to))&&f.range.to.daySameOrAfter(g)&&(null===i||f.range.from.daySameOrBefore(i))),l],t&&t.pipe((0,Sl.YP)(r),(0,xu.R)(a)).subscribe(d=>{this.value=d})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:r}=this;return"string"==typeof t&&null===r||r===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(et.VR.sort(r.from,t)):this.value=new et.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,fa.Hm)(this.value,t.range,(r,a)=>r.from.daySame(a.from.dayLimit(this.min,this.max))&&r.to.daySame(a.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,r,a){return u=>{if(!r||!r.isSingleDay||!a)return t(u);const d=r.from.append(a,!0).append({day:1}),g=r.from.append(a).append({day:-1});return d.dayBefore(u)&&g.dayAfter(u)||t(u)}}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Gn.cU,8),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(qr.a3),o.\u0275\u0275directiveInject(Gn.q5))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[o.\u0275\u0275ProvidersFeature([qr.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,r){if(1&t&&(o.\u0275\u0275template(0,Al,4,32,"tui-primitive-calendar-range",0),o.\u0275\u0275template(1,Pu,8,45,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&t){const a=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",a)}},directives:[k.O5,zh,os.A,Co,Xn.qi,k.sg,Xn.vK,Di.P],pipes:[_o.c,k.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"minLength",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"maxLength",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"value",void 0),(0,Le.gn)([(0,o.Output)()],e.prototype,"valueChange",void 0),(0,Le.gn)([(0,o.Output)()],e.prototype,"rangeChange",void 0),(0,Le.gn)([at.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,o.Inject)(Gn.cU)),(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(qr.a3)),(0,Le.fM)(3,(0,o.Inject)(Gn.q5))],e),e})(),qn=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,_o.I,os.Z,Ls,Ls,Di.E,Xn.pc,Uh]]}),e})();var zo=h(38190),Uo=h(67795);function Wh(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),o.\u0275\u0275listener("valueChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onValueChange(a)})("hoveredChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onHovered(a)})("pressedChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onPressed(a)}),o.\u0275\u0275projection(1),o.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),o.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=o.\u0275\u0275nextContext(),a=o.\u0275\u0275reference(4),u=o.\u0275\u0275reference(6);o.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(t))("readOnly",r.readOnly)("iconContent",r.computedMobile?a:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function $h(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-svg",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onMobileClick()}),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!t.computedDisabled),o.\u0275\u0275property("src",t.calendarIcon)}}function Yh(e,n){if(1&e&&o.\u0275\u0275element(0,"tui-svg",7),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!t.computedDisabled),o.\u0275\u0275property("src",t.calendarIcon)}}function Xh(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-calendar-range",8),o.\u0275\u0275listener("valueChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onRangeChange(a)}),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const Kh=["*",[["input"]]],_f=["*","input"],Ml=[{provide:Ho.M$,useExisting:(0,o.forwardRef)(()=>Ol)},{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>Ol)},{provide:Gn.cU,deps:[[new o.Optional,new o.Self,q.NgControl],[new o.Optional,(0,o.forwardRef)(()=>Gn.LD)]],useFactory:(e,n)=>(0,gu.q7)(e,n)},wl.Sm];let Ol=(()=>{let e=class extends Ho.F9{constructor(t,r,a,u,d,g,i,s,l,f,y,w){super(t,r,w),this.injector=a,this.isMobile=u,this.dialogService=d,this.mobileCalendar=g,this.textfieldSize=i,this.textfieldExampleText=s,this.dateFormat=l,this.dateSeparator=f,this.dateTexts$=y,this.valueTransformer=w,this.textMaskOptions={mask:Sh(this.dateFormat,this.dateSeparator),pipe:wh(this),guide:!1},this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.defaultViewedMonth=et.ql.currentLocal(),this.items=[],this.min=et.K1,this.max=et.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=Ba.EP,this.dateFiller$=this.dateTexts$.pipe((0,Cl.U)(M=>(0,et.Yl)(M[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,bl.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?Ba.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,fa.Hm)(this.value,t.range,(r,a)=>r.from.daySame(a.from.dayLimit(this.min,this.max))&&r.to.daySame(a.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:r,activePeriod:a}=this;return a?String(a):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,xu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==et.FZ)return void this.updateValue(null);const r=et.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,fa.Hm)(this.value,t,(r,a)=>r.daySame(a))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===et.ek||this.nativeValue.length===et.ek+et.mH.length)&&this.updateValue(et.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,ks.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const r=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new et.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,a=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(a)?new et.VR(r.from,a):r}getDateRangeFiller(t){return`${t}${et.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(q.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(to.fL),o.\u0275\u0275directiveInject(Fa.RO),o.\u0275\u0275directiveInject(Gn.vk,8),o.\u0275\u0275directiveInject(ve.kI),o.\u0275\u0275directiveInject(ve.pX),o.\u0275\u0275directiveInject(et.P_),o.\u0275\u0275directiveInject(et.q_),o.\u0275\u0275directiveInject(Gn.zf),o.\u0275\u0275directiveInject(Gn.LD,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(pn.yc,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.textfield=a.first)}},hostBindings:function(t,r){1&t&&o.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[o.\u0275\u0275ProvidersFeature(Ml),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:_f,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,r){if(1&t&&(o.\u0275\u0275projectionDef(Kh),o.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),o.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)})("tuiActiveZoneChange",function(u){return r.onActiveZone(u)}),o.\u0275\u0275template(1,Wh,3,12,"tui-primitive-textfield",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,$h,1,3,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(5,Yh,1,3,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,Xh,1,9,"ng-template",null,4,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&t){const a=o.\u0275\u0275reference(8);o.\u0275\u0275property("canOpen",r.canOpen)("content",a)("open",r.open&&r.canOpen),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",o.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[ha.o1,xl.e,da.Ls,pn.yc,pn.B1,zo.n,ve.D9,ve._K,Uo.hd,Di.P,Kn],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Le.gn)([(0,o.ViewChild)(pn.yc)],e.prototype,"textfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"minLength",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"maxLength",void 0),(0,Le.gn)([(0,o.HostListener)("click")],e.prototype,"onClick",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(q.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(o.Injector)),(0,Le.fM)(3,(0,o.Inject)(to.fL)),(0,Le.fM)(4,(0,o.Inject)(Fa.RO)),(0,Le.fM)(5,(0,o.Optional)()),(0,Le.fM)(5,(0,o.Inject)(Gn.vk)),(0,Le.fM)(6,(0,o.Inject)(ve.kI)),(0,Le.fM)(7,(0,o.Inject)(ve.pX)),(0,Le.fM)(8,(0,o.Inject)(et.P_)),(0,Le.fM)(9,(0,o.Inject)(et.q_)),(0,Le.fM)(10,(0,o.Inject)(Gn.zf)),(0,Le.fM)(11,(0,o.Optional)()),(0,Le.fM)(11,(0,o.Inject)(Gn.LD))],e),e})();var kl;let Go=kl=class extends _l.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};Go.\u0275fac=function(){let e;return function(t){return(e||(e=o.\u0275\u0275getInheritedFactory(Go)))(t||Go)}}(),Go.\u0275dir=o.\u0275\u0275defineDirective({type:Go,selectors:[["tui-input-date-range"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Zr.S0,useExisting:(0,o.forwardRef)(()=>kl)}]),o.\u0275\u0275InheritDefinitionFeature]});let wi=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,Uo.QA,xl.A,da.WD,bo.wq,pn.KW,ve.cn,ha.jh,Di.E,qn,zo.S]]}),e})();var ss=h(56498);function Jh(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("click",function(){const u=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext(2).onMenuClick(u)}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(t)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t," ")}}function Qh(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list",3),o.\u0275\u0275template(1,Jh,2,3,"button",4),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.filtered)}}const Cf={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:Ba.bM,itemSize:"m"},Ns=new o.InjectionToken("Default parameters for input time component",{factory:()=>Cf});var Yt;let fr=Yt=class extends Ho.F9{constructor(n,t,r,a){super(n,t),this.timeTexts$=r,this.options=a,this.disabledItemHandler=si.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,ks.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,Cl.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const r=et.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=et.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:rf(n,this.options.maxValues),pipe:ef(n,this.options.maxValues),guide:!1}}filter(n,t,r){return n.filter(a=>a.toString(t).includes(r))}findNearestTimeFromItems(n){return this.items.reduce((t,r)=>Math.abs(r.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?r:t)}getMatch(n){return this.items.find(t=>(0,si.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:r}=n;if(this.readOnly||!(r instanceof HTMLInputElement))return;const a=r.selectionStart||0;this.shiftTime(this.calculateShift(a,t)),r.setSelectionRange(a,a),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,ks.NY)(this.nativeFocusableElement,!0,n),this.close())}};fr.\u0275fac=function(n){return new(n||fr)(o.\u0275\u0275directiveInject(q.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Gn.Yq),o.\u0275\u0275directiveInject(Ns))},fr.\u0275cmp=o.\u0275\u0275defineComponent({type:fr,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&o.\u0275\u0275viewQuery(pn.yc,5),2&n){let r;o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(t.textfield=r.first)}},hostBindings:function(n,t){1&n&&o.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[o.\u0275\u0275ProvidersFeature([{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>Yt)},wl.yn]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),o.\u0275\u0275listener("openChange",function(a){return t.onOpen(a)})("focusedChange",function(a){return t.onFocused(a)}),o.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),o.\u0275\u0275listener("valueChange",function(a){return t.onValueChange(a)})("hoveredChange",function(a){return t.onHovered(a)})("keydown.arrowUp",function(a){return t.onArrowUp(a)})("keydown.arrowDown",function(a){return t.onArrowDown(a)}),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275projection(3),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(4,Qh,2,1,"ng-template",null,2,o.\u0275\u0275templateRefExtractor)),2&n){const r=o.\u0275\u0275reference(5);o.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",r)("open",t.interactive&&t.open&&!!t.filtered.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("filler",o.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[ha.o1,pn.yc,pn.B1,zo.n,ve.D9,Uo.hd,Xn.qi,k.sg,Xn.vK],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),fr.ctorParameters=()=>[{type:q.NgControl,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[q.NgControl]}]},{type:o.ChangeDetectorRef,decorators:[{type:o.Inject,args:[o.ChangeDetectorRef]}]},{type:ss.y,decorators:[{type:o.Inject,args:[Gn.Yq]}]},{type:void 0,decorators:[{type:o.Inject,args:[Ns]}]}],(0,Le.gn)([(0,o.ViewChild)(pn.yc)],fr.prototype,"textfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],fr.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],fr.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],fr.prototype,"itemSize",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],fr.prototype,"strict",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],fr.prototype,"mode",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],fr.prototype,"postfix",void 0),(0,Le.gn)([at.UM],fr.prototype,"getFiller$",null),(0,Le.gn)([(0,o.HostListener)("click")],fr.prototype,"onClick",null),(0,Le.gn)([at.UM],fr.prototype,"calculateMask",null),(0,Le.gn)([at.UM],fr.prototype,"filter",null),fr=Yt=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(q.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(Gn.Yq)),(0,Le.fM)(3,(0,o.Inject)(Ns))],fr);let Fi=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,Uo.QA,Xn.pc,ha.jh,pn.KW,zo.S,ve.cn]]}),e})();function wf(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",24),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function qh(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,wf,2,2,"button",23),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.localEventTypes)}}function Tn(e,n){1&e&&(o.\u0275\u0275elementStart(0,"tui-notification",25),o.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),o.\u0275\u0275elementEnd())}const ep=function(e){return["/course",e]};let Ll=(()=>{class e{constructor(t,r,a,u){this.route=t,this.courseEventService=r,this.router=a,this.notificationsService=u,this.eventId=null,this.timeOptions=(0,gu.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=ml.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=ml.createFormWithData(t)}))}submitEvent(t){const r=ml.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},a=>{this.notificationsService.show(a,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},a=>{this.notificationsService.show(a,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(rs),o.\u0275\u0275directiveInject(ee.F0),o.\u0275\u0275directiveInject(Nt.$F))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0)(1,"form",1),o.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),o.\u0275\u0275elementStart(2,"h2",2),o.\u0275\u0275text(3,"Create New Event"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),o.\u0275\u0275text(6,"Event Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(7,"tui-field-error",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),o.\u0275\u0275text(10," Event Type "),o.\u0275\u0275template(11,qh,2,1,"tui-data-list",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"tui-field-error",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),o.\u0275\u0275text(15,"Counts for tokens "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(16,"tui-field-error",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),o.\u0275\u0275text(19," Start and end date "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(20,"tui-field-error",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),o.\u0275\u0275text(24," Start time "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(25,"tui-field-error",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),o.\u0275\u0275text(28," End time "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(29,"tui-field-error",18),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(30,Tn,2,0,"tui-notification",19),o.\u0275\u0275elementStart(31,"div",20)(32,"button",21),o.\u0275\u0275text(33," Submit "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(34,"a",22),o.\u0275\u0275text(35,"Back"),o.\u0275\u0275elementEnd()()()()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroup",r.formData),o.\u0275\u0275advance(22),o.\u0275\u0275property("items",r.timeOptions),o.\u0275\u0275advance(4),o.\u0275\u0275property("items",r.timeOptions),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",r.formData.invalid),o.\u0275\u0275advance(2),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(6,ep,r.courseId)))},directives:[q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,de.K3,de.wU,q.NgControlStatus,q.FormControlName,On.y,qi.uJ,qi.OI,Xn.gX,Xn.qi,k.sg,Xn.vK,yl.p,Ol,Go,fr,k.O5,Ut.Ls,Ct.v0,ee.yS],styles:[""]}),e})();var us=h(25775),tp=h(42654),Sf=h(7394);let np=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getUserStatsByCategory(t){const r=this.apiService.getURL("user-stats","category",t);return this.http.get(r).pipe((0,lr.K)(this.apiService.handleError("Error occurred while getting user stats")))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(la.eN),o.\u0275\u0275inject(Na.s))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var rp=h(59796);class Tf{static createForm(){return(new q.FormBuilder).group({report:new q.FormControl("",[q.Validators.required]),report_details:new q.FormControl("")})}static extractData(n){return n.value}}let ip=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}reportQuestion(t,r){const a=this.apiService.getURL("question-report");return this.http.post(a,Object.assign(Object.assign({},r),{question:t})).pipe((0,lr.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(la.eN),o.\u0275\u0275inject(Na.s))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ef=h(24417),Rl=h(26537);function op(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",9),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function ap(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,op,2,2,"button",8),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.reportOptions)}}function sp(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),o.\u0275\u0275pipe(3,"stringifyTuiDataList"),o.\u0275\u0275text(4," Reason "),o.\u0275\u0275template(5,ap,2,1,"tui-data-list",4),o.\u0275\u0275element(6,"tui-field-error",5),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),o.\u0275\u0275text(9," Details "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(10,"div",2)(11,"button",7),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().submitReport()}),o.\u0275\u0275text(12," Submit Report "),o.\u0275\u0275elementEnd()()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",t.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("valueContent",t.reportOptions?o.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),o.\u0275\u0275advance(9),o.\u0275\u0275property("disabled",t.formGroup.invalid)}}const up=function(){return{label:"Report this question",size:"m"}};let lp=(()=>{class e{constructor(t,r){this.reportQuestionService=t,this.notificationsService=r,this.open=!1,this.openChange=new o.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=Tf.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Tf.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ip),o.\u0275\u0275directiveInject(Nt.$F))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275template(0,sp,13,7,"ng-template",0),o.\u0275\u0275listener("tuiDialogChange",function(u){return r.toggleDialog(u)})),2&t&&o.\u0275\u0275property("tuiDialogOptions",o.\u0275\u0275pureFunction0(2,up))("tuiDialog",r.open)},directives:[Fa.iu,q.NgControlStatusGroup,q.FormGroupDirective,qi.uJ,qi.OI,q.NgControlStatus,q.FormControlName,Xn.gX,Xn.qi,k.sg,Xn.vK,On.y,Ef.Jl,Ef.eQ,Ct.v0],pipes:[Rl.J],styles:[""]}),e})();const Ds=function(e){return["../",e]};function cp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",22)(1,"a",23),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"tui-svg",24),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(8,Ds,null==t.parentCategory?null:t.parentCategory.pk)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!t.category)}}function Nl(e,n){1&e&&o.\u0275\u0275element(0,"tui-svg",32)}function fp(e,n){1&e&&o.\u0275\u0275element(0,"tui-svg",32)}function dp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"a",28,29),o.\u0275\u0275text(2),o.\u0275\u0275template(3,fp,1,0,"tui-svg",30),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275reference(1);o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(4,Ds,t.category.pk)),o.\u0275\u0275attribute("aria-checked",r.isActive),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isActive)}}function hp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),o.\u0275\u0275text(3),o.\u0275\u0275template(4,Nl,1,0,"tui-svg",30),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,dp,4,6,"a",31),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275reference(2);o.\u0275\u0275property("label",t.category.name),o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(6,Ds,t.category.pk)),o.\u0275\u0275attribute("aria-checked",r.isActive),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isActive),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.children)}}function Mr(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list",25),o.\u0275\u0275template(1,hp,6,8,"tui-opt-group",26),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.nestedCategories)}}function li(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",34),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function pp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,li,2,2,"button",33),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.difficulties)}}function gp(e,n){if(1&e&&o.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("questionId",t.currentQuestionId)}}function vp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",36),o.\u0275\u0275element(1,"tui-marker-icon",37),o.\u0275\u0275elementStart(2,"h1",38),o.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),o.\u0275\u0275elementEnd()()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const Pf=function(){return["../../../"]};let mp=(()=>{class e{constructor(t,r,a,u,d,g){this.route=t,this.uqjService=r,this.difficultyService=a,this.courseService=u,this.categoryService=d,this.userStatsService=g,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new tp.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((r,a)=>a.parent?r:[...r,{category:a,children:t.filter(u=>u.parent===a.pk).map(u=>({category:u,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var a,u;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=t.find(l=>this.categoryId===l.pk),this.parentCategory=t.find(l=>this.category.parent===l.pk),this.cursor=0,this.uqjs=void 0;const d=this.userStatsService.getUserStatsByCategory(this.categoryId),g=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(u=null===(a=this.parentCategory)||void 0===a?void 0:a.pk)&&void 0!==u?u:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),i=this.difficultyService.getDifficulties(),s=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,Lc.D)([g,i,d,s]).subscribe(([l,f,y,w])=>{this.uqjs=L.shuffle(l),this.difficulties=f,this.userStats=y,this.categoryUserSuccessRate=w.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,r){var a,u;this.difficulty=t,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(u=null===(a=this.parentCategory)||void 0===a?void 0:a.pk)&&void 0!==u?u:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(d=>{this.uqjs=L.shuffle(d),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const r=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",a=this.userStats.find(u=>u.difficulty===r);this.userSuccessRate=a?a.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(u=>u.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(Rc.O),o.\u0275\u0275directiveInject(Sf.G),o.\u0275\u0275directiveInject(pe.N),o.\u0275\u0275directiveInject(Zi.H),o.\u0275\u0275directiveInject(np))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:34,vars:40,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),o.\u0275\u0275text(5," Back to course "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(6,cp,4,10,"div",5),o.\u0275\u0275elementStart(7,"tui-hosted-dropdown",6)(8,"button",7),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(10,Mr,2,1,"ng-template",null,8,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(12,"p",9),o.\u0275\u0275text(13),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"p",10),o.\u0275\u0275text(15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"tui-select",11),o.\u0275\u0275listener("ngModelChange",function(u){return r.updateQuestions(u,r.include_solved)}),o.\u0275\u0275pipe(17,"stringifyTuiDataList"),o.\u0275\u0275text(18," Choose a level of difficulty "),o.\u0275\u0275template(19,pp,2,1,"tui-data-list",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"tui-checkbox-labeled",13),o.\u0275\u0275listener("ngModelChange",function(u){return r.updateQuestions(r.difficulty,u)}),o.\u0275\u0275text(21," Include Solved "),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(22,"div",14)(23,"button",15),o.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),o.\u0275\u0275text(24," Report "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(25,"button",16),o.\u0275\u0275listener("click",function(){return r.prevQuestion()}),o.\u0275\u0275text(26," Previous Question "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(27,"button",17),o.\u0275\u0275listener("click",function(){return r.nextQuestion()}),o.\u0275\u0275text(28," Next Question "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(29,"div",18),o.\u0275\u0275template(30,gp,1,1,"app-problem-view",19),o.\u0275\u0275template(31,vp,4,4,"ng-template",null,20,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(33,"app-problem-report-modal",21),o.\u0275\u0275listener("openChange",function(u){return r.reportQuestionModal=u}),o.\u0275\u0275elementEnd()),2&t){const a=o.\u0275\u0275reference(11),u=o.\u0275\u0275reference(32);let d;o.\u0275\u0275advance(4),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction0(39,Pf)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.parentCategory),o.\u0275\u0275advance(1),o.\u0275\u0275property("content",a),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!r.category),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(d=null==r.category?null:r.category.name)&&void 0!==d?d:"Category Name"," "),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*r.categorySuccessRate).toFixed(2)+"%"||0," "),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),o.\u0275\u0275property("ngModel",r.difficulty)("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?o.\u0275\u0275pipeBind3(17,35,r.difficulties,0,1):""),o.\u0275\u0275advance(4),o.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),o.\u0275\u0275property("ngModel",r.include_solved),o.\u0275\u0275advance(3),o.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",u),o.\u0275\u0275advance(3),o.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[rp.k,Ct.v0,ee.yS,k.O5,as.V,Di.P,ha.o1,Xn.qi,k.sg,Xn.Rs,Xn.vK,ee.Od,qi.uJ,qi.OI,ve.sz,q.NgControlStatus,q.NgModel,ve.be,Xn.gX,yl.p,q.DefaultValueAccessor,us.z,gr.B,lp],pipes:[Rl.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),If=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,lr.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const r=this.apiService.getURL("goal");return this.http.post(r,t).pipe((0,lr.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const r=this.apiService.getURL("goal-item");return this.http.post(r,t).pipe((0,lr.K)(this.apiService.handleError("Unable to create goal item.")))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(la.eN),o.\u0275\u0275inject(Na.s))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function yp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;let r;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate3(" Solve ",t.number_of_questions," ",null!==(r=t.difficulty)&&void 0!==r?r:""," questions from ",t.category," ")}}function Af(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275text(1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div"),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275text(7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div"),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div"),o.\u0275\u0275text(11),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(12," Items "),o.\u0275\u0275template(13,yp,2,3,"div",0),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index;o.\u0275\u0275attribute("data-index",r),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" Goal ",r," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Start date: ",t.start_date," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" End date: ",t.end_date," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Progress: ",t.progress," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Is Finished: ",t.is_finished," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" Number of questions: ",t.number_of_questions," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",t.goal_items)}}let xp=(()=>{class e{constructor(t){this.goalService=t}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.goals=t})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(If))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"h1"),o.\u0275\u0275text(1,"Goals"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,Af,14,8,"div",0),o.\u0275\u0275elementStart(3,"a",1),o.\u0275\u0275text(4,"Create a new goal"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",r.goals),o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink","create"))},directives:[k.sg,ee.yS],styles:[""]}),e})();class ls{static createGoalForm(){return(new q.FormBuilder).group({end_date:new q.FormControl(et.TU.currentLocal(),[q.Validators.required]),end_time:new q.FormControl(et.qD.currentLocal(),[q.Validators.required]),goal_items:new q.FormArray([ls.createGoalItemForm()],[q.Validators.required])})}static createGoalItemForm(){return(new q.FormBuilder).group({category:new q.FormControl("",[q.Validators.required]),difficulty:new q.FormControl("",[q.Validators.required]),number_of_questions:new q.FormControl("",[q.Validators.required])})}static formatGoalFormData(n,t){return{course_id:t,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static formatGoalItemFormData(n,t){return Object.assign({goal:t},n.value)}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function Ep(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),o.\u0275\u0275listener("valueChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onValueChange(a)})("hoveredChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onHovered(a)})("focusedChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onFocused(a)}),o.\u0275\u0275projection(1),o.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),o.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=o.\u0275\u0275nextContext(),a=o.\u0275\u0275reference(4),u=o.\u0275\u0275reference(6);o.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(t))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?a:u)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Pp(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-svg",7),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onMobileClick()}),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!t.computedDisabled),o.\u0275\u0275property("src",t.calendarIcon)}}function Ip(e,n){if(1&e&&o.\u0275\u0275element(0,"tui-svg",8),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("icon",!t.computedDisabled),o.\u0275\u0275property("src",t.calendarIcon)}}function Ap(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",11)(1,"button",12),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext(2);return a.onDayClick(a.items[0].day)}),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()}if(2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function Mp(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tui-calendar",9),o.\u0275\u0275listener("dayClick",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDayClick(a)})("monthChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onMonthChange(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(1,Ap,3,1,"div",10)}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1===t.items.length)}}const Op=["*",[["input"]]],kp=["*","input"],Rp=[{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>Vl)},{provide:Gn.cU,deps:[[new o.Optional,new o.Self,q.NgControl],[new o.Optional,Gn.HF]],useFactory:(e,n)=>(0,gu.q7)(e,n)},{provide:Ho.M$,useExisting:(0,o.forwardRef)(()=>Vl)},wl.Sm];let Vl=(()=>{let e=class extends Ho.F9{constructor(t,r,a,u,d,g,i,s,l,f,y){super(t,r,y),this.injector=a,this.isMobile=u,this.dialogService=d,this.mobileCalendar=g,this.textfieldSize=i,this.dateFormat=s,this.dateSeparator=l,this.dateTexts$=f,this.valueTransformer=y,this.month=null,this.textMaskOptions={mask:nf(this.dateFormat,this.dateSeparator),pipe:_h(this),guide:!1},this.min=et.K1,this.max=et.Oy,this.disabledItemHandler=si.Iy,this.markerHandler=xo.zE,this.items=[],this.defaultActiveYearMonth=et.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,Cl.U)(w=>(0,et.Yl)(w[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,bl.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:r,activeItem:a}=this;return a?String(a):t?t.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?Ba.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(r=>r.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bo.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,xu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==et.ek?null:et.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,r){return(0,fa.Hm)(t,r,(a,u)=>a.daySame(u))}};return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(q.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.Injector),o.\u0275\u0275directiveInject(to.fL),o.\u0275\u0275directiveInject(Fa.RO),o.\u0275\u0275directiveInject(Gn.vk,8),o.\u0275\u0275directiveInject(ve.kI),o.\u0275\u0275directiveInject(et.P_),o.\u0275\u0275directiveInject(et.q_),o.\u0275\u0275directiveInject(Gn.zf),o.\u0275\u0275directiveInject(Gn.HF,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(pn.yc,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.textfield=a.first)}},hostBindings:function(t,r){1&t&&o.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[o.\u0275\u0275ProvidersFeature(Rp),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:kp,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,r){if(1&t&&(o.\u0275\u0275projectionDef(Op),o.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),o.\u0275\u0275listener("openChange",function(u){return r.onOpenChange(u)}),o.\u0275\u0275template(1,Ep,3,11,"tui-primitive-textfield",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275template(3,Pp,1,3,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(5,Ip,1,3,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,Mp,2,7,"ng-template",4,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&t){const a=o.\u0275\u0275reference(8);o.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",a),o.\u0275\u0275advance(1),o.\u0275\u0275property("tuiLet",o.\u0275\u0275pipeBind1(2,5,r.filler$)),o.\u0275\u0275advance(6),o.\u0275\u0275property("polymorpheus",r.type)}},directives:[ha.o1,da.Ls,pn.yc,pn.B1,zo.n,ve.D9,Uo.hd,Di.P,bo.GL,Co,os.A,k.O5,as.V],pipes:[k.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Le.gn)([(0,o.ViewChild)(pn.yc)],e.prototype,"textfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"markerHandler",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"items",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,Le.gn)([(0,o.HostListener)("click")],e.prototype,"onClick",null),e=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(q.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(o.Injector)),(0,Le.fM)(3,(0,o.Inject)(to.fL)),(0,Le.fM)(4,(0,o.Inject)(Fa.RO)),(0,Le.fM)(5,(0,o.Optional)()),(0,Le.fM)(5,(0,o.Inject)(Gn.vk)),(0,Le.fM)(6,(0,o.Inject)(ve.kI)),(0,Le.fM)(7,(0,o.Inject)(et.P_)),(0,Le.fM)(8,(0,o.Inject)(et.q_)),(0,Le.fM)(9,(0,o.Inject)(Gn.zf)),(0,Le.fM)(10,(0,o.Optional)()),(0,Le.fM)(10,(0,o.Inject)(Gn.HF))],e),e})();var kf;let cs=kf=class extends _l.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};cs.\u0275fac=function(){let e;return function(t){return(e||(e=o.\u0275\u0275getInheritedFactory(cs)))(t||cs)}}(),cs.\u0275dir=o.\u0275\u0275defineDirective({type:cs,selectors:[["tui-input-date"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Zr.S0,useExisting:(0,o.forwardRef)(()=>kf)}]),o.\u0275\u0275InheritDefinitionFeature]});let Np=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,Uo.QA,bo.wq,os.Z,Ls,Di.E,as.j,ha.jh,pn.KW,zo.S,da.WD,ve.cn]]}),e})();var ja=h(27670),Au=h(60390);function Lf(e,n){if(1&e&&o.\u0275\u0275element(0,"div",3),2&e){o.\u0275\u0275nextContext();const t=o.\u0275\u0275reference(6);o.\u0275\u0275property("content",t)}}function Rf(e,n){1&e&&o.\u0275\u0275projection(0,2)}const Dp=["*",[["input"]],[["","polymorpheus-outlet",""]]],Fp=function(e,n,t,r,a){return[e,n,t,r,a]};var fs;let Nr=fs=class extends Ho.F9{constructor(n,t,r,a){super(n,t),this.numberFormat=r,this.isIOS=a,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(u,d,g,i)=>({mask:(0,ja.EC)({allowNegative:u,decimalLimit:g,allowDecimal:"never"!==d,requireDecimal:"always"===d,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,ja.YT)(this.numberFormat)}),pipe:(0,ja.qs)("always"===d?g:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,i,u,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;t.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(n.preventDefault(),r.selectionStart++)}onValueChange(n){if((0,ja.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,ja.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if(xo.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const r=Math.min(this.max,Math.max(this.min,t));this.updateValue(r),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const r=Math.abs(n)%1>0;let a="always"===this.decimal||r?this.precision:0;const u=r?(0,Au.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(a=u.length),(0,Au.uf)(n,a,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,ja.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,ja.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var Nf;Nr.\u0275fac=function(n){return new(n||Nr)(o.\u0275\u0275directiveInject(q.NgControl,10),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(Zr.HO),o.\u0275\u0275directiveInject(to.FA))},Nr.\u0275cmp=o.\u0275\u0275defineComponent({type:Nr,selectors:[["tui-input-number"]],contentQueries:function(n,t,r){if(1&n&&o.\u0275\u0275contentQuery(r,bo.r1,5),2&n){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=a.first)}},viewQuery:function(n,t){if(1&n&&o.\u0275\u0275viewQuery(pn.yc,5),2&n){let r;o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(t.primitiveTextfield=r.first)}},hostBindings:function(n,t){1&n&&o.\u0275\u0275listener("keydown.0",function(a){return t.onZero(a)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[o.\u0275\u0275ProvidersFeature([{provide:to.KZ,useExisting:(0,o.forwardRef)(()=>fs)},{provide:Ho.M$,useExisting:(0,o.forwardRef)(()=>fs)}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(o.\u0275\u0275projectionDef(Dp),o.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),o.\u0275\u0275listener("valueChange",function(a){return t.onValueChange(a)})("hoveredChange",function(a){return t.onHovered(a)})("focusedChange",function(a){return t.onFocused(a)})("pressedChange",function(a){return t.onPressed(a)})("keydown",function(a){return t.onKeyDown(a)}),o.\u0275\u0275pipe(1,"tuiMapper"),o.\u0275\u0275projection(2),o.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),o.\u0275\u0275template(4,Lf,1,1,"div",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,Rf,1,0,"ng-template",null,2,o.\u0275\u0275templateRefExtractor)),2&n&&(o.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",o.\u0275\u0275pipeBindV(1,13,o.\u0275\u0275pureFunction5(19,Fp,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[pn.yc,pn.B1,zo.n,ve.D9,ve.fy,Uo.hd,k.O5,bo.r1],pipes:[_o.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Nr.ctorParameters=()=>[{type:q.NgControl,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[q.NgControl]}]},{type:o.ChangeDetectorRef,decorators:[{type:o.Inject,args:[o.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:o.Inject,args:[Zr.HO]}]},{type:Boolean,decorators:[{type:o.Inject,args:[to.FA]}]}],(0,Le.gn)([(0,o.ViewChild)(pn.yc)],Nr.prototype,"primitiveTextfield",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],Nr.prototype,"min",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],Nr.prototype,"max",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],Nr.prototype,"decimal",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],Nr.prototype,"precision",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],Nr.prototype,"prefix",void 0),(0,Le.gn)([(0,o.Input)(),(0,at.TH)()],Nr.prototype,"postfix",void 0),(0,Le.gn)([(0,o.ContentChild)(bo.r1)],Nr.prototype,"polymorpheusValueContent",void 0),(0,Le.gn)([(0,o.HostListener)("keydown.0",["$event"])],Nr.prototype,"onZero",null),Nr=fs=(0,Le.gn)([(0,Le.fM)(0,(0,o.Optional)()),(0,Le.fM)(0,(0,o.Self)()),(0,Le.fM)(0,(0,o.Inject)(q.NgControl)),(0,Le.fM)(1,(0,o.Inject)(o.ChangeDetectorRef)),(0,Le.fM)(2,(0,o.Inject)(Zr.HO)),(0,Le.fM)(3,(0,o.Inject)(to.FA))],Nr);let Sr=Nf=class extends _l.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};Sr.\u0275fac=function(){let e;return function(t){return(e||(e=o.\u0275\u0275getInheritedFactory(Sr)))(t||Sr)}}(),Sr.\u0275dir=o.\u0275\u0275defineDirective({type:Sr,selectors:[["tui-input-number"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Zr.S0,useExisting:(0,o.forwardRef)(()=>Nf)}]),o.\u0275\u0275InheritDefinitionFeature]});let Bl=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,Uo.QA,_o.I,pn.KW,ve.cn,zo.S,bo.wq]]}),e})();function Hp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.pk),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function jp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,Hp,2,2,"button",17),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.categories)}}function zp(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t[0]),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Up(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"tui-data-list"),o.\u0275\u0275template(1,zp,2,2,"button",17),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.difficulties)}}function Hl(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",13),o.\u0275\u0275pipe(3,"stringifyTuiDataList"),o.\u0275\u0275text(4," Category "),o.\u0275\u0275template(5,jp,2,1,"tui-data-list",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"tui-field-error",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div",4)(8,"tui-select",13),o.\u0275\u0275pipe(9,"stringifyTuiDataList"),o.\u0275\u0275text(10," Difficulty "),o.\u0275\u0275template(11,Up,2,1,"tui-data-list",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"tui-field-error",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",4)(14,"tui-input-number",15),o.\u0275\u0275text(15," Number of questions "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(16,"tui-field-error",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"div",4)(18,"button",16),o.\u0275\u0275listener("click",function(){const u=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().removeGoalItem(u)}),o.\u0275\u0275text(19," Remove "),o.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("valueContent",r.categories?o.\u0275\u0275pipeBind3(3,8,r.categories,"pk","full_name"):"")("formControl",r.getFormControl(t,"category")),o.\u0275\u0275advance(4),o.\u0275\u0275property("formControl",r.getFormControl(t,"category")),o.\u0275\u0275advance(2),o.\u0275\u0275property("valueContent",r.difficulties?o.\u0275\u0275pipeBind3(9,12,r.difficulties,0,1):"")("formControl",r.getFormControl(t,"difficulty")),o.\u0275\u0275advance(4),o.\u0275\u0275property("formControl",r.getFormControl(t,"difficulty")),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions")),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions"))}}let Gp=(()=>{class e{constructor(t,r,a,u,d,g){this.goalService=t,this.categoryService=r,this.difficultyService=a,this.router=u,this.activatedRoute=d,this.notificationService=g,this.timeOptions=(0,gu.eN)()}ngOnInit(){this.courseId=this.activatedRoute.snapshot.params.courseId,this.goalForm=ls.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,r){return t.get(r)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(ls.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}onSubmit(){return function _p(e,n,t,r){return new(t||(t=Promise))(function(u,d){function g(l){try{s(r.next(l))}catch(f){d(f)}}function i(l){try{s(r.throw(l))}catch(f){d(f)}}function s(l){l.done?u(l.value):function a(u){return u instanceof t?u:new t(function(d){d(u)})}(l.value).then(g,i)}s((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){const t=ls.formatGoalFormData(this.goalForm,this.courseId),r=yield this.goalService.createGoal(t).toPromise();for(const a of this.getGoalItemFormControls()){const u=ls.formatGoalItemFormData(a,r.id);yield this.goalService.createGoalItem(u).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(If),o.\u0275\u0275directiveInject(Zi.H),o.\u0275\u0275directiveInject(Sf.G),o.\u0275\u0275directiveInject(ee.F0),o.\u0275\u0275directiveInject(ee.gz),o.\u0275\u0275directiveInject(Nt.$F))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],decls:21,vars:4,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconPlus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0)(1,"form",1),o.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),o.\u0275\u0275elementStart(2,"h2",2),o.\u0275\u0275text(3,"Create New Goal"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"tui-input-date",5),o.\u0275\u0275text(7," End date "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(8,"tui-field-error",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",4)(10,"tui-input-time",7),o.\u0275\u0275text(11," End time "),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"tui-field-error",8),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(13,"h3",2),o.\u0275\u0275text(14,"Goal Items"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(15,Hl,20,16,"div",9),o.\u0275\u0275elementStart(16,"div",10)(17,"button",11),o.\u0275\u0275listener("click",function(){return r.addGoalItem()}),o.\u0275\u0275text(18," Add Another "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"button",12),o.\u0275\u0275text(20," Submit "),o.\u0275\u0275elementEnd()()()()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroup",r.goalForm),o.\u0275\u0275advance(9),o.\u0275\u0275property("items",r.timeOptions),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",r.getGoalItemFormControls()),o.\u0275\u0275advance(4),o.\u0275\u0275property("disabled",r.goalForm.invalid))},directives:[q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,Vl,cs,q.NgControlStatus,q.FormControlName,On.y,fr,k.sg,qi.uJ,qi.OI,q.FormControlDirective,Xn.gX,Xn.qi,Xn.vK,Nr,Sr,Ct.v0],pipes:[Rl.J],styles:[""]}),e})();const jl=[{path:"",component:st,canActivate:[Y.a]},{path:":courseId",component:bh,canActivate:[Y.a]},{path:":courseId/register",component:wt,canActivate:[Y.a]},{path:":courseId/new-event",component:Ll,canActivate:[Y.a]},{path:":courseId/new-event/:eventId",component:Ll,canActivate:[Y.a]},{path:":courseId/event/:eventId",component:Vc,canActivate:[Y.a]},{path:":courseId/problem/:id",component:us.z,canActivate:[Y.a]},{path:":courseId/event/:eventId/problem/:id",component:us.z,canActivate:[Y.a]},{path:":courseId/practice/category/:categoryId",component:mp,canActivate:[Y.a]},{path:":courseId/goal",component:xp,canActivate:[Y.a]},{path:":courseId/goal/create",component:Gp,canActivate:[Y.a]}];let Wp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ee.Bz.forChild(jl)],ee.Bz]}),e})();var $p=h(16995);h(41065),h(35379),h(18583),h(92198);let Jp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[k.ez,Di.E]]}),e})();var Qp=h(96560),Zp=h(22079),qp=h(70228),eg=h(38333),tg=h(66235),ng=h(24736),rg=h(63821),ig=h(68476),og=h(54554);let ag=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[rs,pe.N,Os],imports:[[k.ez,tg.J,Wp,q.FormsModule,$p._l,ng.D,rg.ProblemsModule,q.ReactiveFormsModule,og.l,Uo.QA,pu.iK,xl.A,$c.Jm,Ct.fN,Ls,yl.s,Xn.pc,mo.zX,Fa.up,Qp.S,On.C,Ae.p,ha.jh,hu.$H,Np,wi,de.Qf,Bl,Fi,ca.y,as.j,Zp.dS,gr.z,qp.z,Ut.Hi,qi.Jy,ig.T,Jp,Di.E,eo.jz,zt.$$,eg.qE.forRoot(),vo.d3,ve.cn]]}),e})()},71066:(P,G,h)=>{var v,m,E;E="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,v=[h(29610),h(58259),G],void 0!==(m=function(O,A,B){E.Backbone=function(S,E,b,I){var O=S.Backbone,A=Array.prototype.slice;E.VERSION="1.4.1",E.$=I,E.noConflict=function(){return S.Backbone=O,this},E.emulateHTTP=!1,E.emulateJSON=!1;var k,B=E.Events={},H=/\s+/,Y=function(L,U,te,me,Fe){var rt,De=0;if(te&&"object"==typeof te)for((void 0!==me&&"context"in Fe&&void 0===Fe.context&&(Fe.context=me),rt=b.keys(te));De<rt.length;De++)U=Y(L,U,rt[De],te[rt[De]],Fe);else if(te&&H.test(te))for(rt=te.split(H);De<rt.length;De++)U=L(U,rt[De],me,Fe);else U=L(U,te,me,Fe);return U};B.on=function(L,U,te){return this._events=Y(ee,this._events||{},L,U,{context:te,ctx:this,listening:k}),k&&((this._listeners||(this._listeners={}))[k.id]=k,k.interop=!1),this},B.listenTo=function(L,U,te){if(!L)return this;var me=L._listenId||(L._listenId=b.uniqueId("l")),Fe=this._listeningTo||(this._listeningTo={}),De=k=Fe[me];De||(this._listenId||(this._listenId=b.uniqueId("l")),De=k=Fe[me]=new q(this,L));var rt=le(L,U,te,this);if(k=void 0,rt)throw rt;return De.interop&&De.on(U,te),this};var ee=function(L,U,te,me){if(te){var Fe=L[U]||(L[U]=[]),De=me.context,rt=me.ctx,xt=me.listening;xt&&xt.count++,Fe.push({callback:te,context:De,ctx:De||rt,listening:xt})}return L},le=function(L,U,te,me){try{L.on(U,te,me)}catch(Fe){return Fe}};B.off=function(L,U,te){return this._events?(this._events=Y(o,this._events,L,U,{context:te,listeners:this._listeners}),this):this},B.stopListening=function(L,U,te){var me=this._listeningTo;if(!me)return this;for(var Fe=L?[L._listenId]:b.keys(me),De=0;De<Fe.length;De++){var rt=me[Fe[De]];if(!rt)break;rt.obj.off(U,te,this),rt.interop&&rt.off(U,te)}return b.isEmpty(me)&&(this._listeningTo=void 0),this};var o=function(L,U,te,me){if(L){var xt,Fe=me.context,De=me.listeners,rt=0;if(!U&&!Fe&&!te){for(xt=b.keys(De);rt<xt.length;rt++)De[xt[rt]].cleanup();return}for(xt=U?[U]:b.keys(L);rt<xt.length;rt++){var bt=L[U=xt[rt]];if(!bt)break;for(var Kt=[],on=0;on<bt.length;on++){var Wt=bt[on];if(te&&te!==Wt.callback&&te!==Wt.callback._callback||Fe&&Fe!==Wt.context)Kt.push(Wt);else{var Hn=Wt.listening;Hn&&Hn.off(U,te)}}Kt.length?L[U]=Kt:delete L[U]}return L}};B.once=function(L,U,te){var me=Y(ae,{},L,U,this.off.bind(this));return"string"==typeof L&&null==te&&(U=void 0),this.on(me,U,te)},B.listenToOnce=function(L,U,te){var me=Y(ae,{},U,te,this.stopListening.bind(this,L));return this.listenTo(L,me)};var ae=function(L,U,te,me){if(te){var Fe=L[U]=b.once(function(){me(U,Fe),te.apply(this,arguments)});Fe._callback=te}return L};B.trigger=function(L){if(!this._events)return this;for(var U=Math.max(0,arguments.length-1),te=Array(U),me=0;me<U;me++)te[me]=arguments[me+1];return Y(pe,this._events,L,void 0,te),this};var pe=function(L,U,te,me){if(L){var Fe=L[U],De=L.all;Fe&&De&&(De=De.slice()),Fe&&de(Fe,me),De&&de(De,[U].concat(me))}return L},de=function(L,U){var te,me=-1,Fe=L.length,De=U[0],rt=U[1],xt=U[2];switch(U.length){case 0:for(;++me<Fe;)(te=L[me]).callback.call(te.ctx);return;case 1:for(;++me<Fe;)(te=L[me]).callback.call(te.ctx,De);return;case 2:for(;++me<Fe;)(te=L[me]).callback.call(te.ctx,De,rt);return;case 3:for(;++me<Fe;)(te=L[me]).callback.call(te.ctx,De,rt,xt);return;default:for(;++me<Fe;)(te=L[me]).callback.apply(te.ctx,U);return}},q=function(L,U){this.id=L._listenId,this.listener=L,this.obj=U,this.interop=!0,this.count=0,this._events=void 0};q.prototype.on=B.on,q.prototype.off=function(L,U){var te;this.interop?(this._events=Y(o,this._events,L,U,{context:void 0,listeners:void 0}),te=!this._events):(this.count--,te=0===this.count),te&&this.cleanup()},q.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},B.bind=B.on,B.unbind=B.off,b.extend(E,B);var ve=E.Model=function(L,U){var te=L||{};U||(U={}),this.preinitialize.apply(this,arguments),this.cid=b.uniqueId(this.cidPrefix),this.attributes={},U.collection&&(this.collection=U.collection),U.parse&&(te=this.parse(te,U)||{});var me=b.result(this,"defaults");te=b.defaults(b.extend({},me,te),me),this.set(te,U),this.changed={},this.initialize.apply(this,arguments)};b.extend(ve.prototype,B,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(L){return b.clone(this.attributes)},sync:function(){return E.sync.apply(this,arguments)},get:function(L){return this.attributes[L]},escape:function(L){return b.escape(this.get(L))},has:function(L){return null!=this.get(L)},matches:function(L){return!!b.iteratee(L,this)(this.attributes)},set:function(L,U,te){if(null==L)return this;var me;if("object"==typeof L?(me=L,te=U):(me={})[L]=U,te||(te={}),!this._validate(me,te))return!1;var Fe=te.unset,De=te.silent,rt=[],xt=this._changing;this._changing=!0,xt||(this._previousAttributes=b.clone(this.attributes),this.changed={});var bt=this.attributes,Kt=this.changed,on=this._previousAttributes;for(var Wt in me)b.isEqual(bt[Wt],U=me[Wt])||rt.push(Wt),b.isEqual(on[Wt],U)?delete Kt[Wt]:Kt[Wt]=U,Fe?delete bt[Wt]:bt[Wt]=U;if(this.idAttribute in me){var Hn=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Hn,te)}if(!De){rt.length&&(this._pending=te);for(var kn=0;kn<rt.length;kn++)this.trigger("change:"+rt[kn],this,bt[rt[kn]],te)}if(xt)return this;if(!De)for(;this._pending;)te=this._pending,this._pending=!1,this.trigger("change",this,te);return this._pending=!1,this._changing=!1,this},unset:function(L,U){return this.set(L,void 0,b.extend({},U,{unset:!0}))},clear:function(L){var U={};for(var te in this.attributes)U[te]=void 0;return this.set(U,b.extend({},L,{unset:!0}))},hasChanged:function(L){return null==L?!b.isEmpty(this.changed):b.has(this.changed,L)},changedAttributes:function(L){if(!L)return!!this.hasChanged()&&b.clone(this.changed);var me,U=this._changing?this._previousAttributes:this.attributes,te={};for(var Fe in L){var De=L[Fe];b.isEqual(U[Fe],De)||(te[Fe]=De,me=!0)}return!!me&&te},previous:function(L){return null!=L&&this._previousAttributes?this._previousAttributes[L]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(L){L=b.extend({parse:!0},L);var U=this,te=L.success;return L.success=function(me){var Fe=L.parse?U.parse(me,L):me;if(!U.set(Fe,L))return!1;te&&te.call(L.context,U,me,L),U.trigger("sync",U,me,L)},Dt(this,L),this.sync("read",this,L)},save:function(L,U,te){var me;null==L||"object"==typeof L?(me=L,te=U):(me={})[L]=U;var Fe=(te=b.extend({validate:!0,parse:!0},te)).wait;if(me&&!Fe){if(!this.set(me,te))return!1}else if(!this._validate(me,te))return!1;var De=this,rt=te.success,xt=this.attributes;te.success=function(on){De.attributes=xt;var Wt=te.parse?De.parse(on,te):on;if(Fe&&(Wt=b.extend({},me,Wt)),Wt&&!De.set(Wt,te))return!1;rt&&rt.call(te.context,De,on,te),De.trigger("sync",De,on,te)},Dt(this,te),me&&Fe&&(this.attributes=b.extend({},xt,me));var bt=this.isNew()?"create":te.patch?"patch":"update";"patch"===bt&&!te.attrs&&(te.attrs=me);var Kt=this.sync(bt,this,te);return this.attributes=xt,Kt},destroy:function(L){L=L?b.clone(L):{};var U=this,te=L.success,me=L.wait,Fe=function(){U.stopListening(),U.trigger("destroy",U,U.collection,L)};L.success=function(rt){me&&Fe(),te&&te.call(L.context,U,rt,L),U.isNew()||U.trigger("sync",U,rt,L)};var De=!1;return this.isNew()?b.defer(L.success):(Dt(this,L),De=this.sync("delete",this,L)),me||Fe(),De},url:function(){var L=b.result(this,"urlRoot")||b.result(this.collection,"url")||Gt();if(this.isNew())return L;var U=this.get(this.idAttribute);return L.replace(/[^\/]$/,"$&/")+encodeURIComponent(U)},parse:function(L,U){return L},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(L){return this._validate({},b.extend({},L,{validate:!0}))},_validate:function(L,U){if(!U.validate||!this.validate)return!0;L=b.extend({},this.attributes,L);var te=this.validationError=this.validate(L,U)||null;return!te||(this.trigger("invalid",this,te,b.extend(U,{validationError:te})),!1)}});var we=E.Collection=function(L,U){U||(U={}),this.preinitialize.apply(this,arguments),U.model&&(this.model=U.model),void 0!==U.comparator&&(this.comparator=U.comparator),this._reset(),this.initialize.apply(this,arguments),L&&this.reset(L,b.extend({silent:!0},U))},Ae={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1},ke=function(L,U,te){te=Math.min(Math.max(te,0),L.length);var De,me=Array(L.length-te),Fe=U.length;for(De=0;De<me.length;De++)me[De]=L[De+te];for(De=0;De<Fe;De++)L[De+te]=U[De];for(De=0;De<me.length;De++)L[De+Fe+te]=me[De]};b.extend(we.prototype,B,{model:ve,preinitialize:function(){},initialize:function(){},toJSON:function(L){return this.map(function(U){return U.toJSON(L)})},sync:function(){return E.sync.apply(this,arguments)},add:function(L,U){return this.set(L,b.extend({merge:!1},U,_))},remove:function(L,U){U=b.extend({},U);var te=!b.isArray(L);L=te?[L]:L.slice();var me=this._removeModels(L,U);return!U.silent&&me.length&&(U.changes={added:[],merged:[],removed:me},this.trigger("update",this,U)),te?me[0]:me},set:function(L,U){if(null!=L){(U=b.extend({},Ae,U)).parse&&!this._isModel(L)&&(L=this.parse(L,U)||[]);var te=!b.isArray(L);L=te?[L]:L.slice();var me=U.at;null!=me&&(me=+me),me>this.length&&(me=this.length),me<0&&(me+=this.length+1);var xn,pt,Fe=[],De=[],rt=[],xt=[],bt={},Kt=U.add,on=U.merge,Wt=U.remove,Hn=!1,kn=this.comparator&&null==me&&!1!==U.sort,Fr=b.isString(this.comparator)?this.comparator:null;for(pt=0;pt<L.length;pt++){var En=this.get(xn=L[pt]);if(En){if(on&&xn!==En){var Dn=this._isModel(xn)?xn.attributes:xn;U.parse&&(Dn=En.parse(Dn,U)),En.set(Dn,U),rt.push(En),kn&&!Hn&&(Hn=En.hasChanged(Fr))}bt[En.cid]||(bt[En.cid]=!0,Fe.push(En)),L[pt]=En}else Kt&&(xn=L[pt]=this._prepareModel(xn,U))&&(De.push(xn),this._addReference(xn,U),bt[xn.cid]=!0,Fe.push(xn))}if(Wt){for(pt=0;pt<this.length;pt++)bt[(xn=this.models[pt]).cid]||xt.push(xn);xt.length&&this._removeModels(xt,U)}var nr=!1;if(Fe.length&&!kn&&Kt&&Wt?(nr=this.length!==Fe.length||b.some(this.models,function(Jn,$n){return Jn!==Fe[$n]}),this.models.length=0,ke(this.models,Fe,0),this.length=this.models.length):De.length&&(kn&&(Hn=!0),ke(this.models,De,null==me?this.length:me),this.length=this.models.length),Hn&&this.sort({silent:!0}),!U.silent){for(pt=0;pt<De.length;pt++)null!=me&&(U.index=me+pt),(xn=De[pt]).trigger("add",xn,this,U);(Hn||nr)&&this.trigger("sort",this,U),(De.length||xt.length||rt.length)&&(U.changes={added:De,removed:xt,merged:rt},this.trigger("update",this,U))}return te?L[0]:L}},reset:function(L,U){U=U?b.clone(U):{};for(var te=0;te<this.models.length;te++)this._removeReference(this.models[te],U);return U.previousModels=this.models,this._reset(),L=this.add(L,b.extend({silent:!0},U)),U.silent||this.trigger("reset",this,U),L},push:function(L,U){return this.add(L,b.extend({at:this.length},U))},pop:function(L){var U=this.at(this.length-1);return this.remove(U,L)},unshift:function(L,U){return this.add(L,b.extend({at:0},U))},shift:function(L){var U=this.at(0);return this.remove(U,L)},slice:function(){return A.apply(this.models,arguments)},get:function(L){if(null!=L)return this._byId[L]||this._byId[this.modelId(this._isModel(L)?L.attributes:L,L.idAttribute)]||L.cid&&this._byId[L.cid]},has:function(L){return null!=this.get(L)},at:function(L){return L<0&&(L+=this.length),this.models[L]},where:function(L,U){return this[U?"find":"filter"](L)},findWhere:function(L){return this.where(L,!0)},sort:function(L){var U=this.comparator;if(!U)throw new Error("Cannot sort a set without a comparator");L||(L={});var te=U.length;return b.isFunction(U)&&(U=U.bind(this)),1===te||b.isString(U)?this.models=this.sortBy(U):this.models.sort(U),L.silent||this.trigger("sort",this,L),this},pluck:function(L){return this.map(L+"")},fetch:function(L){var U=(L=b.extend({parse:!0},L)).success,te=this;return L.success=function(me){te[L.reset?"reset":"set"](me,L),U&&U.call(L.context,te,me,L),te.trigger("sync",te,me,L)},Dt(this,L),this.sync("read",this,L)},create:function(L,U){var te=(U=U?b.clone(U):{}).wait;if(!(L=this._prepareModel(L,U)))return!1;te||this.add(L,U);var me=this,Fe=U.success;return U.success=function(De,rt,xt){te&&me.add(De,xt),Fe&&Fe.call(xt.context,De,rt,xt)},L.save(null,U),L},parse:function(L,U){return L},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(L,U){return L[U||this.model.prototype.idAttribute||"id"]},values:function(){return new We(this,Ke)},keys:function(){return new We(this,Ze)},entries:function(){return new We(this,st)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(L,U){return this._isModel(L)?(L.collection||(L.collection=this),L):((U=U?b.clone(U):{}).collection=this,(te=this.model.prototype?new this.model(L,U):this.model(L,U)).validationError?(this.trigger("invalid",this,te.validationError,U),!1):te);var te},_removeModels:function(L,U){for(var te=[],me=0;me<L.length;me++){var Fe=this.get(L[me]);if(Fe){var De=this.indexOf(Fe);this.models.splice(De,1),this.length--,delete this._byId[Fe.cid];var rt=this.modelId(Fe.attributes,Fe.idAttribute);null!=rt&&delete this._byId[rt],U.silent||(U.index=De,Fe.trigger("remove",Fe,this,U)),te.push(Fe),this._removeReference(Fe,U)}}return te},_isModel:function(L){return L instanceof ve},_addReference:function(L,U){this._byId[L.cid]=L;var te=this.modelId(L.attributes,L.idAttribute);null!=te&&(this._byId[te]=L),L.on("all",this._onModelEvent,this)},_removeReference:function(L,U){delete this._byId[L.cid];var te=this.modelId(L.attributes,L.idAttribute);null!=te&&delete this._byId[te],this===L.collection&&delete L.collection,L.off("all",this._onModelEvent,this)},_onModelEvent:function(L,U,te,me){if(U){if(("add"===L||"remove"===L)&&te!==this)return;if("destroy"===L&&this.remove(U,me),"changeId"===L){var Fe=this.modelId(U.previousAttributes(),U.idAttribute),De=this.modelId(U.attributes,U.idAttribute);null!=Fe&&delete this._byId[Fe],null!=De&&(this._byId[De]=U)}}this.trigger.apply(this,arguments)}});var $e="function"==typeof Symbol&&Symbol.iterator;$e&&(we.prototype[$e]=we.prototype.values);var We=function(L,U){this._collection=L,this._kind=U,this._index=0},Ke=1,Ze=2,st=3;$e&&(We.prototype[$e]=function(){return this}),We.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var U,L=this._collection.at(this._index);if(this._index++,this._kind===Ke)U=L;else{var te=this._collection.modelId(L.attributes,L.idAttribute);U=this._kind===Ze?te:[te,L]}return{value:U,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var mt=E.View=function(L){this.cid=b.uniqueId("view"),this.preinitialize.apply(this,arguments),b.extend(this,b.pick(L,Ut)),this._ensureElement(),this.initialize.apply(this,arguments)},Nt=/^(\S+)\s*(.*)$/,Ut=["model","collection","el","id","attributes","className","tagName","events"];b.extend(mt.prototype,B,{tagName:"div",$:function(L){return this.$el.find(L)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(L){return this.undelegateEvents(),this._setElement(L),this.delegateEvents(),this},_setElement:function(L){this.$el=L instanceof E.$?L:E.$(L),this.el=this.$el[0]},delegateEvents:function(L){if(L||(L=b.result(this,"events")),!L)return this;for(var U in this.undelegateEvents(),L){var te=L[U];if(b.isFunction(te)||(te=this[te]),te){var me=U.match(Nt);this.delegate(me[1],me[2],te.bind(this))}}return this},delegate:function(L,U,te){return this.$el.on(L+".delegateEvents"+this.cid,U,te),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(L,U,te){return this.$el.off(L+".delegateEvents"+this.cid,U,te),this},_createElement:function(L){return document.createElement(L)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var L=b.extend({},b.result(this,"attributes"));this.id&&(L.id=b.result(this,"id")),this.className&&(L.class=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(L)}},_setAttributes:function(L){this.$el.attr(L)}});var On=function(L,U,te,me){b.each(te,function(Fe,De){U[De]&&(L.prototype[De]=function(L,U,te,me){switch(U){case 1:return function(){return L[te](this[me])};case 2:return function(Fe){return L[te](this[me],Fe)};case 3:return function(Fe,De){return L[te](this[me],gr(Fe,this),De)};case 4:return function(Fe,De,rt){return L[te](this[me],gr(Fe,this),De,rt)};default:return function(){var Fe=A.call(arguments);return Fe.unshift(this[me]),L[te].apply(L,Fe)}}}(U,Fe,De,me))})},gr=function(L,U){return b.isFunction(L)?L:b.isObject(L)&&!U._isModel(L)?Dr(L):b.isString(L)?function(te){return te.get(L)}:L},Dr=function(L){var U=b.matches(L);return function(te){return U(te.attributes)}};b.each([[we,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[ve,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(L){var U=L[0],te=L[1],me=L[2];U.mixin=function(Fe){var De=b.reduce(b.functions(Fe),function(rt,xt){return rt[xt]=0,rt},{});On(U,Fe,De,me)},On(U,b,te,me)}),E.sync=function(L,U,te){var me=vr[L];b.defaults(te||(te={}),{emulateHTTP:E.emulateHTTP,emulateJSON:E.emulateJSON});var Fe={type:me,dataType:"json"};if(te.url||(Fe.url=b.result(U,"url")||Gt()),null==te.data&&U&&("create"===L||"update"===L||"patch"===L)&&(Fe.contentType="application/json",Fe.data=JSON.stringify(te.attrs||U.toJSON(te))),te.emulateJSON&&(Fe.contentType="application/x-www-form-urlencoded",Fe.data=Fe.data?{model:Fe.data}:{}),te.emulateHTTP&&("PUT"===me||"DELETE"===me||"PATCH"===me)){Fe.type="POST",te.emulateJSON&&(Fe.data._method=me);var De=te.beforeSend;te.beforeSend=function(bt){if(bt.setRequestHeader("X-HTTP-Method-Override",me),De)return De.apply(this,arguments)}}"GET"!==Fe.type&&!te.emulateJSON&&(Fe.processData=!1);var rt=te.error;te.error=function(bt,Kt,on){te.textStatus=Kt,te.errorThrown=on,rt&&rt.call(te.context,bt,Kt,on)};var xt=te.xhr=E.ajax(b.extend(Fe,te));return U.trigger("request",U,xt,te),xt};var vr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};E.ajax=function(){return E.$.ajax.apply(E.$,arguments)};var Nn=E.Router=function(L){L||(L={}),this.preinitialize.apply(this,arguments),L.routes&&(this.routes=L.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Re=/\((.*?)\)/g,Ue=/(\(\?)?:\w+/g,Qe=/\*\w+/g,lt=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(Nn.prototype,B,{preinitialize:function(){},initialize:function(){},route:function(L,U,te){b.isRegExp(L)||(L=this._routeToRegExp(L)),b.isFunction(U)&&(te=U,U=""),te||(te=this[U]);var me=this;return E.history.route(L,function(Fe){var De=me._extractParameters(L,Fe);!1!==me.execute(te,De,U)&&(me.trigger.apply(me,["route:"+U].concat(De)),me.trigger("route",U,De),E.history.trigger("route",me,U,De))}),this},execute:function(L,U,te){L&&L.apply(this,U)},navigate:function(L,U){return E.history.navigate(L,U),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var L,U=b.keys(this.routes);null!=(L=U.pop());)this.route(L,this.routes[L])}},_routeToRegExp:function(L){return L=L.replace(lt,"\\$&").replace(Re,"(?:$1)?").replace(Ue,function(U,te){return te?U:"([^/?]+)"}).replace(Qe,"([^?]*?)"),new RegExp("^"+L+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(L,U){var te=L.exec(U).slice(1);return b.map(te,function(me,Fe){return Fe===te.length-1?me||null:me?decodeURIComponent(me):null})}});var wt=E.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},zt=/^[#\/]|\s+$/g,yt=/^\/+|\/+$/g,Bn=/#.*$/;wt.started=!1,b.extend(wt.prototype,B,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(L){return decodeURI(L.replace(/%25/g,"%2525"))},getSearch:function(){var L=this.location.href.replace(/#.*/,"").match(/\?.+/);return L?L[0]:""},getHash:function(L){var U=(L||this).location.href.match(/#(.*)$/);return U?U[1]:""},getPath:function(){var L=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===L.charAt(0)?L.slice(1):L},getFragment:function(L){return null==L&&(L=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),L.replace(zt,"")},start:function(L){if(wt.started)throw new Error("Backbone.history has already been started");if(wt.started=!0,this.options=b.extend({root:"/"},this.options,L),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(yt,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var U=this.root.slice(0,-1)||"/";return this.location.replace(U+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var te=document.body,me=te.insertBefore(this.iframe,te.firstChild).contentWindow;me.document.open(),me.document.close(),me.location.hash="#"+this.fragment}var Fe=window.addEventListener||function(De,rt){return attachEvent("on"+De,rt)};if(this._usePushState?Fe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Fe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var L=window.removeEventListener||function(U,te){return detachEvent("on"+U,te)};this._usePushState?L("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&L("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),wt.started=!1},route:function(L,U){this.handlers.unshift({route:L,callback:U})},checkUrl:function(L){var U=this.getFragment();if(U===this.fragment&&this.iframe&&(U=this.getHash(this.iframe.contentWindow)),U===this.fragment)return!1;this.iframe&&this.navigate(U),this.loadUrl()},loadUrl:function(L){return!!this.matchRoot()&&(L=this.fragment=this.getFragment(L),b.some(this.handlers,function(U){if(U.route.test(L))return U.callback(L),!0}))},navigate:function(L,U){if(!wt.started)return!1;(!U||!0===U)&&(U={trigger:!!U}),L=this.getFragment(L||"");var te=this.root;(""===L||"?"===L.charAt(0))&&(te=te.slice(0,-1)||"/");var me=te+L;L=L.replace(Bn,"");var Fe=this.decodeFragment(L);if(this.fragment!==Fe){if(this.fragment=Fe,this._usePushState)this.history[U.replace?"replaceState":"pushState"]({},document.title,me);else{if(!this._wantsHashChange)return this.location.assign(me);if(this._updateHash(this.location,L,U.replace),this.iframe&&L!==this.getHash(this.iframe.contentWindow)){var De=this.iframe.contentWindow;U.replace||(De.document.open(),De.document.close()),this._updateHash(De.location,L,U.replace)}}if(U.trigger)return this.loadUrl(L)}},_updateHash:function(L,U,te){if(te){var me=L.href.replace(/(javascript:|#).*$/,"");L.replace(me+"#"+U)}else L.hash="#"+U}}),E.history=new wt;ve.extend=we.extend=Nn.extend=mt.extend=wt.extend=function(L,U){var me,te=this;return me=L&&b.has(L,"constructor")?L.constructor:function(){return te.apply(this,arguments)},b.extend(me,te,U),me.prototype=b.create(te.prototype,L),me.prototype.constructor=me,me.__super__=te.prototype,me};var Gt=function(){throw new Error('A "url" property or function must be specified')},Dt=function(L,U){var te=U.error;U.error=function(me){te&&te.call(U.context,L,me,U),L.trigger("error",L,me,U)}};return E}(E,B,O,A)}.apply(G,v))&&(P.exports=m)},59695:(P,G,h)=>{P.exports={graphlib:h(36456),layout:h(14850),debug:h(71914),util:{time:h(11510).time,notime:h(11510).notime},version:h(28126)}},12234:(P,G,h)=>{"use strict";var v=h(45760),m=h(67365);P.exports={run:function S(I){var O="greedy"===I.graph().acyclicer?m(I,function A(B){return function(H){return B.edge(H).weight}}(I)):function E(I){var O=[],A={},B={};return v.forEach(I.nodes(),function H(k){v.has(B,k)||(B[k]=!0,A[k]=!0,v.forEach(I.outEdges(k),function(Y){v.has(A,Y.w)?O.push(Y):H(Y.w)}),delete A[k])}),O}(I);v.forEach(O,function(B){var H=I.edge(B);I.removeEdge(B),H.forwardName=B.name,H.reversed=!0,I.setEdge(B.w,B.v,H,v.uniqueId("rev"))})},undo:function b(I){v.forEach(I.edges(),function(O){var A=I.edge(O);if(A.reversed){I.removeEdge(O);var B=A.forwardName;delete A.reversed,delete A.forwardName,I.setEdge(O.w,O.v,A,B)}})}}},79999:(P,G,h)=>{var v=h(45760),m=h(11510);function E(b,I,O,A,B,H){var Y=B[I][H-1],ee=m.addDummyNode(b,"border",{width:0,height:0,rank:H,borderType:I},O);B[I][H]=ee,b.setParent(ee,A),Y&&b.setEdge(Y,ee,{weight:1})}P.exports=function S(b){v.forEach(b.children(),function I(O){var A=b.children(O),B=b.node(O);if(A.length&&v.forEach(A,I),v.has(B,"minRank")){B.borderLeft=[],B.borderRight=[];for(var H=B.minRank,k=B.maxRank+1;H<k;++H)E(b,"borderLeft","_bl",O,B,H),E(b,"borderRight","_br",O,B,H)}})}},83870:(P,G,h)=>{"use strict";var v=h(45760);function E(H){v.forEach(H.nodes(),function(k){b(H.node(k))}),v.forEach(H.edges(),function(k){b(H.edge(k))})}function b(H){var k=H.width;H.width=H.height,H.height=k}function O(H){H.y=-H.y}function B(H){var k=H.x;H.x=H.y,H.y=k}P.exports={adjust:function m(H){var k=H.graph().rankdir.toLowerCase();("lr"===k||"rl"===k)&&E(H)},undo:function S(H){var k=H.graph().rankdir.toLowerCase();("bt"===k||"rl"===k)&&function I(H){v.forEach(H.nodes(),function(k){O(H.node(k))}),v.forEach(H.edges(),function(k){var Y=H.edge(k);v.forEach(Y.points,O),v.has(Y,"y")&&O(Y)})}(H),("lr"===k||"rl"===k)&&(function A(H){v.forEach(H.nodes(),function(k){B(H.node(k))}),v.forEach(H.edges(),function(k){var Y=H.edge(k);v.forEach(Y.points,B),v.has(Y,"x")&&B(Y)})}(H),E(H))}}},3226:P=>{function G(){var m={};m._next=m._prev=m,this._sentinel=m}function h(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function v(m,S){if("_next"!==m&&"_prev"!==m)return S}P.exports=G,G.prototype.dequeue=function(){var m=this._sentinel,S=m._prev;if(S!==m)return h(S),S},G.prototype.enqueue=function(m){var S=this._sentinel;m._prev&&m._next&&h(m),m._next=S._next,S._next._prev=m,S._next=m,m._prev=S},G.prototype.toString=function(){for(var m=[],S=this._sentinel,E=S._prev;E!==S;)m.push(JSON.stringify(E,v)),E=E._prev;return"["+m.join(", ")+"]"}},71914:(P,G,h)=>{var v=h(45760),m=h(11510),S=h(36456).Graph;P.exports={debugOrdering:function E(b){var I=m.buildLayerMatrix(b),O=new S({compound:!0,multigraph:!0}).setGraph({});return v.forEach(b.nodes(),function(A){O.setNode(A,{label:A}),O.setParent(A,"layer"+b.node(A).rank)}),v.forEach(b.edges(),function(A){O.setEdge(A.v,A.w,{},A.name)}),v.forEach(I,function(A,B){O.setNode("layer"+B,{rank:"same"}),v.reduce(A,function(k,Y){return O.setEdge(k,Y,{style:"invis"}),Y})}),O}}},36456:(P,G,h)=>{var v;try{v=h(85510)}catch(m){}v||(v=window.graphlib),P.exports=v},67365:(P,G,h)=>{var v=h(45760),m=h(36456).Graph,S=h(3226);P.exports=function b(H,k){if(H.nodeCount()<=1)return[];var Y=function A(H,k){var Y=new m,ee=0,le=0;v.forEach(H.nodes(),function(pe){Y.setNode(pe,{v:pe,in:0,out:0})}),v.forEach(H.edges(),function(pe){var de=Y.edge(pe.v,pe.w)||0,q=k(pe);Y.setEdge(pe.v,pe.w,de+q),le=Math.max(le,Y.node(pe.v).out+=q),ee=Math.max(ee,Y.node(pe.w).in+=q)});var o=v.range(le+ee+3).map(function(){return new S}),ae=ee+1;return v.forEach(Y.nodes(),function(pe){B(o,ae,Y.node(pe))}),{graph:Y,buckets:o,zeroIdx:ae}}(H,k||E),ee=function I(H,k,Y){for(var ae,ee=[],le=k[k.length-1],o=k[0];H.nodeCount();){for(;ae=o.dequeue();)O(H,k,Y,ae);for(;ae=le.dequeue();)O(H,k,Y,ae);if(H.nodeCount())for(var pe=k.length-2;pe>0;--pe)if(ae=k[pe].dequeue()){ee=ee.concat(O(H,k,Y,ae,!0));break}}return ee}(Y.graph,Y.buckets,Y.zeroIdx);return v.flatten(v.map(ee,function(le){return H.outEdges(le.v,le.w)}),!0)};var E=v.constant(1);function O(H,k,Y,ee,le){var o=le?[]:void 0;return v.forEach(H.inEdges(ee.v),function(ae){var pe=H.edge(ae),de=H.node(ae.v);le&&o.push({v:ae.v,w:ae.w}),de.out-=pe,B(k,Y,de)}),v.forEach(H.outEdges(ee.v),function(ae){var pe=H.edge(ae),q=H.node(ae.w);q.in-=pe,B(k,Y,q)}),H.removeNode(ee.v),o}function B(H,k,Y){Y.out?Y.in?H[Y.out-Y.in+k].enqueue(Y):H[H.length-1].enqueue(Y):H[0].enqueue(Y)}},14850:(P,G,h)=>{"use strict";var v=h(45760),m=h(12234),S=h(91496),E=h(94124),b=h(11510).normalizeRanks,I=h(60162),O=h(11510).removeEmptyRanks,A=h(1230),B=h(79999),H=h(83870),k=h(32974),Y=h(78226),ee=h(11510),le=h(36456).Graph;P.exports=function o(Re,Ue){var Qe=Ue&&Ue.debugTiming?ee.time:ee.notime;Qe("layout",function(){var lt=Qe("  buildLayoutGraph",function(){return function We(Re){var Ue=new le({multigraph:!0,compound:!0}),Qe=Nn(Re.graph());return Ue.setGraph(v.merge({},q,vr(Qe,de),v.pick(Qe,ve))),v.forEach(Re.nodes(),function(lt){var wt=Nn(Re.node(lt));Ue.setNode(lt,v.defaults(vr(wt,we),Ae)),Ue.setParent(lt,Re.parent(lt))}),v.forEach(Re.edges(),function(lt){var wt=Nn(Re.edge(lt));Ue.setEdge(lt,v.merge({},ke,vr(wt,_),v.pick(wt,$e)))}),Ue}(Re)});Qe("  runLayout",function(){!function ae(Re,Ue){Ue("    makeSpaceForEdgeLabels",function(){!function Ke(Re){var Ue=Re.graph();Ue.ranksep/=2,v.forEach(Re.edges(),function(Qe){var lt=Re.edge(Qe);lt.minlen*=2,"c"!==lt.labelpos.toLowerCase()&&("TB"===Ue.rankdir||"BT"===Ue.rankdir?lt.width+=lt.labeloffset:lt.height+=lt.labeloffset)})}(Re)}),Ue("    removeSelfEdges",function(){!function Dr(Re){v.forEach(Re.edges(),function(Ue){if(Ue.v===Ue.w){var Qe=Re.node(Ue.v);Qe.selfEdges||(Qe.selfEdges=[]),Qe.selfEdges.push({e:Ue,label:Re.edge(Ue)}),Re.removeEdge(Ue)}})}(Re)}),Ue("    acyclic",function(){m.run(Re)}),Ue("    nestingGraph.run",function(){A.run(Re)}),Ue("    rank",function(){E(ee.asNonCompoundGraph(Re))}),Ue("    injectEdgeLabelProxies",function(){!function Ze(Re){v.forEach(Re.edges(),function(Ue){var Qe=Re.edge(Ue);if(Qe.width&&Qe.height){var lt=Re.node(Ue.v),wt=Re.node(Ue.w);ee.addDummyNode(Re,"edge-proxy",{rank:(wt.rank-lt.rank)/2+lt.rank,e:Ue},"_ep")}})}(Re)}),Ue("    removeEmptyRanks",function(){O(Re)}),Ue("    nestingGraph.cleanup",function(){A.cleanup(Re)}),Ue("    normalizeRanks",function(){b(Re)}),Ue("    assignRankMinMax",function(){!function st(Re){var Ue=0;v.forEach(Re.nodes(),function(Qe){var lt=Re.node(Qe);lt.borderTop&&(lt.minRank=Re.node(lt.borderTop).rank,lt.maxRank=Re.node(lt.borderBottom).rank,Ue=v.max(Ue,lt.maxRank))}),Re.graph().maxRank=Ue}(Re)}),Ue("    removeEdgeLabelProxies",function(){!function mt(Re){v.forEach(Re.nodes(),function(Ue){var Qe=Re.node(Ue);"edge-proxy"===Qe.dummy&&(Re.edge(Qe.e).labelRank=Qe.rank,Re.removeNode(Ue))})}(Re)}),Ue("    normalize.run",function(){S.run(Re)}),Ue("    parentDummyChains",function(){I(Re)}),Ue("    addBorderSegments",function(){B(Re)}),Ue("    order",function(){k(Re)}),Ue("    insertSelfEdges",function(){!function tr(Re){var Ue=ee.buildLayerMatrix(Re);v.forEach(Ue,function(Qe){var lt=0;v.forEach(Qe,function(wt,zt){var yt=Re.node(wt);yt.order=zt+lt,v.forEach(yt.selfEdges,function(Bn){ee.addDummyNode(Re,"selfedge",{width:Bn.label.width,height:Bn.label.height,rank:yt.rank,order:zt+ ++lt,e:Bn.e,label:Bn.label},"_se")}),delete yt.selfEdges})})}(Re)}),Ue("    adjustCoordinateSystem",function(){H.adjust(Re)}),Ue("    position",function(){Y(Re)}),Ue("    positionSelfEdges",function(){!function Wn(Re){v.forEach(Re.nodes(),function(Ue){var Qe=Re.node(Ue);if("selfedge"===Qe.dummy){var lt=Re.node(Qe.e.v),wt=lt.x+lt.width/2,zt=lt.y,yt=Qe.x-wt,Bn=lt.height/2;Re.setEdge(Qe.e,Qe.label),Re.removeNode(Ue),Qe.label.points=[{x:wt+2*yt/3,y:zt-Bn},{x:wt+5*yt/6,y:zt-Bn},{x:wt+yt,y:zt},{x:wt+5*yt/6,y:zt+Bn},{x:wt+2*yt/3,y:zt+Bn}],Qe.label.x=Qe.x,Qe.label.y=Qe.y}})}(Re)}),Ue("    removeBorderNodes",function(){!function gr(Re){v.forEach(Re.nodes(),function(Ue){if(Re.children(Ue).length){var Qe=Re.node(Ue),lt=Re.node(Qe.borderTop),wt=Re.node(Qe.borderBottom),zt=Re.node(v.last(Qe.borderLeft)),yt=Re.node(v.last(Qe.borderRight));Qe.width=Math.abs(yt.x-zt.x),Qe.height=Math.abs(wt.y-lt.y),Qe.x=zt.x+Qe.width/2,Qe.y=lt.y+Qe.height/2}}),v.forEach(Re.nodes(),function(Ue){"border"===Re.node(Ue).dummy&&Re.removeNode(Ue)})}(Re)}),Ue("    normalize.undo",function(){S.undo(Re)}),Ue("    fixupEdgeLabelCoords",function(){!function Ct(Re){v.forEach(Re.edges(),function(Ue){var Qe=Re.edge(Ue);if(v.has(Qe,"x"))switch(("l"===Qe.labelpos||"r"===Qe.labelpos)&&(Qe.width-=Qe.labeloffset),Qe.labelpos){case"l":Qe.x-=Qe.width/2+Qe.labeloffset;break;case"r":Qe.x+=Qe.width/2+Qe.labeloffset}})}(Re)}),Ue("    undoCoordinateSystem",function(){H.undo(Re)}),Ue("    translateGraph",function(){!function Nt(Re){var Ue=Number.POSITIVE_INFINITY,Qe=0,lt=Number.POSITIVE_INFINITY,wt=0,zt=Re.graph(),yt=zt.marginx||0,Bn=zt.marginy||0;function fi(Gt){var Dt=Gt.x,L=Gt.y,U=Gt.width,te=Gt.height;Ue=Math.min(Ue,Dt-U/2),Qe=Math.max(Qe,Dt+U/2),lt=Math.min(lt,L-te/2),wt=Math.max(wt,L+te/2)}v.forEach(Re.nodes(),function(Gt){fi(Re.node(Gt))}),v.forEach(Re.edges(),function(Gt){var Dt=Re.edge(Gt);v.has(Dt,"x")&&fi(Dt)}),Ue-=yt,lt-=Bn,v.forEach(Re.nodes(),function(Gt){var Dt=Re.node(Gt);Dt.x-=Ue,Dt.y-=lt}),v.forEach(Re.edges(),function(Gt){var Dt=Re.edge(Gt);v.forEach(Dt.points,function(L){L.x-=Ue,L.y-=lt}),v.has(Dt,"x")&&(Dt.x-=Ue),v.has(Dt,"y")&&(Dt.y-=lt)}),zt.width=Qe-Ue+yt,zt.height=wt-lt+Bn}(Re)}),Ue("    assignNodeIntersects",function(){!function Ut(Re){v.forEach(Re.edges(),function(Ue){var zt,yt,Qe=Re.edge(Ue),lt=Re.node(Ue.v),wt=Re.node(Ue.w);Qe.points?(zt=Qe.points[0],yt=Qe.points[Qe.points.length-1]):(Qe.points=[],zt=wt,yt=lt),Qe.points.unshift(ee.intersectRect(lt,zt)),Qe.points.push(ee.intersectRect(wt,yt))})}(Re)}),Ue("    reversePoints",function(){!function On(Re){v.forEach(Re.edges(),function(Ue){var Qe=Re.edge(Ue);Qe.reversed&&Qe.points.reverse()})}(Re)}),Ue("    acyclic.undo",function(){m.undo(Re)})}(lt,Qe)}),Qe("  updateInputGraph",function(){!function pe(Re,Ue){v.forEach(Re.nodes(),function(Qe){var lt=Re.node(Qe),wt=Ue.node(Qe);lt&&(lt.x=wt.x,lt.y=wt.y,Ue.children(Qe).length&&(lt.width=wt.width,lt.height=wt.height))}),v.forEach(Re.edges(),function(Qe){var lt=Re.edge(Qe),wt=Ue.edge(Qe);lt.points=wt.points,v.has(wt,"x")&&(lt.x=wt.x,lt.y=wt.y)}),Re.graph().width=Ue.graph().width,Re.graph().height=Ue.graph().height}(Re,lt)})})};var de=["nodesep","edgesep","ranksep","marginx","marginy"],q={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ve=["acyclicer","ranker","rankdir","align"],we=["width","height"],Ae={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],ke={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$e=["labelpos"];function vr(Re,Ue){return v.mapValues(v.pick(Re,Ue),Number)}function Nn(Re){var Ue={};return v.forEach(Re,function(Qe,lt){Ue[lt.toLowerCase()]=Qe}),Ue}},45760:(P,G,h)=>{var v;try{v={cloneDeep:h(90733),constant:h(76684),defaults:h(28800),each:h(35474),filter:h(35281),find:h(62516),flatten:h(22274),forEach:h(89851),forIn:h(41176),has:h(54842),isUndefined:h(34235),last:h(25809),map:h(19984),mapValues:h(10203),max:h(18176),merge:h(80567),min:h(29439),minBy:h(29525),now:h(31710),pick:h(16372),range:h(90361),reduce:h(81337),sortBy:h(12906),uniqueId:h(51541),values:h(90377),zipObject:h(21617)}}catch(m){}v||(v=window._),P.exports=v},1230:(P,G,h)=>{var v=h(45760),m=h(11510);function E(A,B,H,k,Y,ee,le){var o=A.children(le);if(o.length){var ae=m.addBorderNode(A,"_bt"),pe=m.addBorderNode(A,"_bb"),de=A.node(le);A.setParent(ae,le),de.borderTop=ae,A.setParent(pe,le),de.borderBottom=pe,v.forEach(o,function(q){E(A,B,H,k,Y,ee,q);var ve=A.node(q),we=ve.borderTop?ve.borderTop:q,Ae=ve.borderBottom?ve.borderBottom:q,_=ve.borderTop?k:2*k,ke=we!==Ae?1:Y-ee[le]+1;A.setEdge(ae,we,{weight:_,minlen:ke,nestingEdge:!0}),A.setEdge(Ae,pe,{weight:_,minlen:ke,nestingEdge:!0})}),A.parent(le)||A.setEdge(B,ae,{weight:0,minlen:Y+ee[le]})}else le!==B&&A.setEdge(B,le,{weight:0,minlen:H})}P.exports={run:function S(A){var B=m.addDummyNode(A,"root",{},"_root"),H=function b(A){var B={};function H(k,Y){var ee=A.children(k);ee&&ee.length&&v.forEach(ee,function(le){H(le,Y+1)}),B[k]=Y}return v.forEach(A.children(),function(k){H(k,1)}),B}(A),k=v.max(v.values(H))-1,Y=2*k+1;A.graph().nestingRoot=B,v.forEach(A.edges(),function(le){A.edge(le).minlen*=Y});var ee=function I(A){return v.reduce(A.edges(),function(B,H){return B+A.edge(H).weight},0)}(A)+1;v.forEach(A.children(),function(le){E(A,B,Y,ee,k,H,le)}),A.graph().nodeRankFactor=Y},cleanup:function O(A){var B=A.graph();A.removeNode(B.nestingRoot),delete B.nestingRoot,v.forEach(A.edges(),function(H){A.edge(H).nestingEdge&&A.removeEdge(H)})}}},91496:(P,G,h)=>{"use strict";var v=h(45760),m=h(11510);P.exports={run:function S(I){I.graph().dummyChains=[],v.forEach(I.edges(),function(O){!function E(I,O){var A=O.v,B=I.node(A).rank,H=O.w,k=I.node(H).rank,Y=O.name,ee=I.edge(O),le=ee.labelRank;if(k!==B+1){var o,ae,pe;for(I.removeEdge(O),pe=0,++B;B<k;++pe,++B)ee.points=[],o=m.addDummyNode(I,"edge",ae={width:0,height:0,edgeLabel:ee,edgeObj:O,rank:B},"_d"),B===le&&(ae.width=ee.width,ae.height=ee.height,ae.dummy="edge-label",ae.labelpos=ee.labelpos),I.setEdge(A,o,{weight:ee.weight},Y),0===pe&&I.graph().dummyChains.push(o),A=o;I.setEdge(A,H,{weight:ee.weight},Y)}}(I,O)})},undo:function b(I){v.forEach(I.graph().dummyChains,function(O){var H,A=I.node(O),B=A.edgeLabel;for(I.setEdge(A.edgeObj,B);A.dummy;)H=I.successors(O)[0],I.removeNode(O),B.points.push({x:A.x,y:A.y}),"edge-label"===A.dummy&&(B.x=A.x,B.y=A.y,B.width=A.width,B.height=A.height),A=I.node(O=H)})}}},33034:(P,G,h)=>{var v=h(45760);P.exports=function m(S,E,b){var O,I={};v.forEach(b,function(A){for(var H,k,B=S.parent(A);B;){if((H=S.parent(B))?(k=I[H],I[H]=B):(k=O,O=B),k&&k!==B)return void E.setEdge(k,B);B=H}})}},81323:(P,G,h)=>{var v=h(45760);P.exports=function m(S,E){return v.map(E,function(b){var I=S.inEdges(b);if(I.length){var O=v.reduce(I,function(A,B){var H=S.edge(B),k=S.node(B.v);return{sum:A.sum+H.weight*k.order,weight:A.weight+H.weight}},{sum:0,weight:0});return{v:b,barycenter:O.sum/O.weight,weight:O.weight}}return{v:b}})}},1686:(P,G,h)=>{var v=h(45760),m=h(36456).Graph;P.exports=function S(b,I,O){var A=function E(b){for(var I;b.hasNode(I=v.uniqueId("_root")););return I}(b),B=new m({compound:!0}).setGraph({root:A}).setDefaultNodeLabel(function(H){return b.node(H)});return v.forEach(b.nodes(),function(H){var k=b.node(H),Y=b.parent(H);(k.rank===I||k.minRank<=I&&I<=k.maxRank)&&(B.setNode(H),B.setParent(H,Y||A),v.forEach(b[O](H),function(ee){var le=ee.v===H?ee.w:ee.v,o=B.edge(le,H),ae=v.isUndefined(o)?0:o.weight;B.setEdge(le,H,{weight:b.edge(ee).weight+ae})}),v.has(k,"minRank")&&B.setNode(H,{borderLeft:k.borderLeft[I],borderRight:k.borderRight[I]}))}),B}},18796:(P,G,h)=>{"use strict";var v=h(45760);function S(E,b,I){for(var O=v.zipObject(I,v.map(I,function(ee,le){return le})),A=v.flatten(v.map(b,function(ee){return v.sortBy(v.map(E.outEdges(ee),function(le){return{pos:O[le.w],weight:E.edge(le).weight}}),"pos")}),!0),B=1;B<I.length;)B<<=1;var H=2*B-1;B-=1;var k=v.map(new Array(H),function(){return 0}),Y=0;return v.forEach(A.forEach(function(ee){var le=ee.pos+B;k[le]+=ee.weight;for(var o=0;le>0;)le%2&&(o+=k[le+1]),k[le=le-1>>1]+=ee.weight;Y+=ee.weight*o})),Y}P.exports=function m(E,b){for(var I=0,O=1;O<b.length;++O)I+=S(E,b[O-1],b[O]);return I}},32974:(P,G,h)=>{"use strict";var v=h(45760),m=h(49402),S=h(18796),E=h(61057),b=h(1686),I=h(33034),O=h(36456).Graph,A=h(11510);function H(ee,le,o){return v.map(le,function(ae){return b(ee,ae,o)})}function k(ee,le){var o=new O;v.forEach(ee,function(ae){var pe=ae.graph().root,de=E(ae,pe,o,le);v.forEach(de.vs,function(q,ve){ae.node(q).order=ve}),I(ae,o,de.vs)})}function Y(ee,le){v.forEach(le,function(o){v.forEach(o,function(ae,pe){ee.node(ae).order=pe})})}P.exports=function B(ee){var le=A.maxRank(ee),o=H(ee,v.range(1,le+1),"inEdges"),ae=H(ee,v.range(le-1,-1,-1),"outEdges"),pe=m(ee);Y(ee,pe);for(var q,de=Number.POSITIVE_INFINITY,ve=0,we=0;we<4;++ve,++we){k(ve%2?o:ae,ve%4>=2),pe=A.buildLayerMatrix(ee);var Ae=S(ee,pe);Ae<de&&(we=0,q=v.cloneDeep(pe),de=Ae)}Y(ee,q)}},49402:(P,G,h)=>{"use strict";var v=h(45760);P.exports=function m(S){var E={},b=v.filter(S.nodes(),function(H){return!S.children(H).length}),I=v.max(v.map(b,function(H){return S.node(H).rank})),O=v.map(v.range(I+1),function(){return[]}),B=v.sortBy(b,function(H){return S.node(H).rank});return v.forEach(B,function A(H){if(!v.has(E,H)){E[H]=!0;var k=S.node(H);O[k.rank].push(H),v.forEach(S.successors(H),A)}}),O}},83826:(P,G,h)=>{"use strict";var v=h(45760);P.exports=function m(b,I){var O={};return v.forEach(b,function(B,H){var k=O[B.v]={indegree:0,in:[],out:[],vs:[B.v],i:H};v.isUndefined(B.barycenter)||(k.barycenter=B.barycenter,k.weight=B.weight)}),v.forEach(I.edges(),function(B){var H=O[B.v],k=O[B.w];!v.isUndefined(H)&&!v.isUndefined(k)&&(k.indegree++,H.out.push(O[B.w]))}),function S(b){var I=[];function O(H){return function(k){k.merged||(v.isUndefined(k.barycenter)||v.isUndefined(H.barycenter)||k.barycenter>=H.barycenter)&&function E(b,I){var O=0,A=0;b.weight&&(O+=b.barycenter*b.weight,A+=b.weight),I.weight&&(O+=I.barycenter*I.weight,A+=I.weight),b.vs=I.vs.concat(b.vs),b.barycenter=O/A,b.weight=A,b.i=Math.min(I.i,b.i),I.merged=!0}(H,k)}}function A(H){return function(k){k.in.push(H),0==--k.indegree&&b.push(k)}}for(;b.length;){var B=b.pop();I.push(B),v.forEach(B.in.reverse(),O(B)),v.forEach(B.out,A(B))}return v.map(v.filter(I,function(H){return!H.merged}),function(H){return v.pick(H,["vs","i","barycenter","weight"])})}(v.filter(O,function(B){return!B.indegree}))}},61057:(P,G,h)=>{var v=h(45760),m=h(81323),S=h(83826),E=h(93803);P.exports=function b(A,B,H,k){var Y=A.children(B),ee=A.node(B),le=ee?ee.borderLeft:void 0,o=ee?ee.borderRight:void 0,ae={};le&&(Y=v.filter(Y,function(Ae){return Ae!==le&&Ae!==o}));var pe=m(A,Y);v.forEach(pe,function(Ae){if(A.children(Ae.v).length){var _=b(A,Ae.v,H,k);ae[Ae.v]=_,v.has(_,"barycenter")&&function O(A,B){v.isUndefined(A.barycenter)?(A.barycenter=B.barycenter,A.weight=B.weight):(A.barycenter=(A.barycenter*A.weight+B.barycenter*B.weight)/(A.weight+B.weight),A.weight+=B.weight)}(Ae,_)}});var de=S(pe,H);!function I(A,B){v.forEach(A,function(H){H.vs=v.flatten(H.vs.map(function(k){return B[k]?B[k].vs:k}),!0)})}(de,ae);var q=E(de,k);if(le&&(q.vs=v.flatten([le,q.vs,o],!0),A.predecessors(le).length)){var ve=A.node(A.predecessors(le)[0]),we=A.node(A.predecessors(o)[0]);v.has(q,"barycenter")||(q.barycenter=0,q.weight=0),q.barycenter=(q.barycenter*q.weight+ve.order+we.order)/(q.weight+2),q.weight+=2}return q}},93803:(P,G,h)=>{var v=h(45760),m=h(11510);function E(I,O,A){for(var B;O.length&&(B=v.last(O)).i<=A;)O.pop(),I.push(B.vs),A++;return A}P.exports=function S(I,O){var A=m.partition(I,function(ae){return v.has(ae,"barycenter")}),B=A.lhs,H=v.sortBy(A.rhs,function(ae){return-ae.i}),k=[],Y=0,ee=0,le=0;B.sort(function b(I){return function(O,A){return O.barycenter<A.barycenter?-1:O.barycenter>A.barycenter?1:I?A.i-O.i:O.i-A.i}}(!!O)),le=E(k,H,le),v.forEach(B,function(ae){le+=ae.vs.length,k.push(ae.vs),Y+=ae.barycenter*ae.weight,ee+=ae.weight,le=E(k,H,le)});var o={vs:v.flatten(k,!0)};return ee&&(o.barycenter=Y/ee,o.weight=ee),o}},60162:(P,G,h)=>{var v=h(45760);P.exports=function m(b){var I=function E(b){var I={},O=0;return v.forEach(b.children(),function A(B){var H=O;v.forEach(b.children(B),A),I[B]={low:H,lim:O++}}),I}(b);v.forEach(b.graph().dummyChains,function(O){for(var A=b.node(O),B=A.edgeObj,H=function S(b,I,O,A){var ee,le,B=[],H=[],k=Math.min(I[O].low,I[A].low),Y=Math.max(I[O].lim,I[A].lim);ee=O;do{ee=b.parent(ee),B.push(ee)}while(ee&&(I[ee].low>k||Y>I[ee].lim));for(le=ee,ee=A;(ee=b.parent(ee))!==le;)H.push(ee);return{path:B.concat(H.reverse()),lca:le}}(b,I,B.v,B.w),k=H.path,Y=H.lca,ee=0,le=k[ee],o=!0;O!==B.w;){if(A=b.node(O),o){for(;(le=k[ee])!==Y&&b.node(le).maxRank<A.rank;)ee++;le===Y&&(o=!1)}if(!o){for(;ee<k.length-1&&b.node(le=k[ee+1]).minRank<=A.rank;)ee++;le=k[ee]}b.setParent(O,le),O=b.successors(O)[0]}})}},54058:(P,G,h)=>{"use strict";var v=h(45760),m=h(36456).Graph,S=h(11510);function E(de,q){var ve={};return v.reduce(q,function we(Ae,_){var ke=0,$e=0,We=Ae.length,Ke=v.last(_);return v.forEach(_,function(Ze,st){var mt=function I(de,q){if(de.node(q).dummy)return v.find(de.predecessors(q),function(ve){return de.node(ve).dummy})}(de,Ze),Nt=mt?de.node(mt).order:We;(mt||Ze===Ke)&&(v.forEach(_.slice($e,st+1),function(Ut){v.forEach(de.predecessors(Ut),function(Ct){var On=de.node(Ct),gr=On.order;(gr<ke||Nt<gr)&&(!On.dummy||!de.node(Ut).dummy)&&O(ve,Ct,Ut)})}),$e=st+1,ke=Nt)}),_}),ve}function b(de,q){var ve={};function we(_,ke,$e,We,Ke){var Ze;v.forEach(v.range(ke,$e),function(st){de.node(Ze=_[st]).dummy&&v.forEach(de.predecessors(Ze),function(mt){var Nt=de.node(mt);Nt.dummy&&(Nt.order<We||Nt.order>Ke)&&O(ve,mt,Ze)})})}return v.reduce(q,function Ae(_,ke){var We,$e=-1,Ke=0;return v.forEach(ke,function(Ze,st){if("border"===de.node(Ze).dummy){var mt=de.predecessors(Ze);mt.length&&(We=de.node(mt[0]).order,we(ke,Ke,st,$e,We),Ke=st,$e=We)}we(ke,Ke,ke.length,We,_.length)}),ke}),ve}function O(de,q,ve){if(q>ve){var we=q;q=ve,ve=we}var Ae=de[q];Ae||(de[q]=Ae={}),Ae[ve]=!0}function A(de,q,ve){if(q>ve){var we=q;q=ve,ve=we}return v.has(de[q],ve)}function B(de,q,ve,we){var Ae={},_={},ke={};return v.forEach(q,function($e){v.forEach($e,function(We,Ke){Ae[We]=We,_[We]=We,ke[We]=Ke})}),v.forEach(q,function($e){var We=-1;v.forEach($e,function(Ke){var Ze=we(Ke);if(Ze.length)for(var st=((Ze=v.sortBy(Ze,function(Ct){return ke[Ct]})).length-1)/2,mt=Math.floor(st),Nt=Math.ceil(st);mt<=Nt;++mt){var Ut=Ze[mt];_[Ke]===Ke&&We<ke[Ut]&&!A(ve,Ke,Ut)&&(_[Ut]=Ke,_[Ke]=Ae[Ke]=Ae[Ut],We=ke[Ut])}})}),{root:Ae,align:_}}function H(de,q,ve,we,Ae){var _={},ke=function k(de,q,ve,we){var Ae=new m,_=de.graph(),ke=function ae(de,q,ve){return function(we,Ae,_){var Ke,ke=we.node(Ae),$e=we.node(_),We=0;if(We+=ke.width/2,v.has(ke,"labelpos"))switch(ke.labelpos.toLowerCase()){case"l":Ke=-ke.width/2;break;case"r":Ke=ke.width/2}if(Ke&&(We+=ve?Ke:-Ke),Ke=0,We+=(ke.dummy?q:de)/2,We+=($e.dummy?q:de)/2,We+=$e.width/2,v.has($e,"labelpos"))switch($e.labelpos.toLowerCase()){case"l":Ke=$e.width/2;break;case"r":Ke=-$e.width/2}return Ke&&(We+=ve?Ke:-Ke),Ke=0,We}}(_.nodesep,_.edgesep,we);return v.forEach(q,function($e){var We;v.forEach($e,function(Ke){var Ze=ve[Ke];if(Ae.setNode(Ze),We){var st=ve[We],mt=Ae.edge(st,Ze);Ae.setEdge(st,Ze,Math.max(ke(de,Ke,We),mt||0))}We=Ke})}),Ae}(de,q,ve,Ae),$e=Ae?"borderLeft":"borderRight";function We(st,mt){for(var Nt=ke.nodes(),Ut=Nt.pop(),Ct={};Ut;)Ct[Ut]?st(Ut):(Ct[Ut]=!0,Nt.push(Ut),Nt=Nt.concat(mt(Ut))),Ut=Nt.pop()}return We(function Ke(st){_[st]=ke.inEdges(st).reduce(function(mt,Nt){return Math.max(mt,_[Nt.v]+ke.edge(Nt))},0)},ke.predecessors.bind(ke)),We(function Ze(st){var mt=ke.outEdges(st).reduce(function(Ut,Ct){return Math.min(Ut,_[Ct.w]-ke.edge(Ct))},Number.POSITIVE_INFINITY),Nt=de.node(st);mt!==Number.POSITIVE_INFINITY&&Nt.borderType!==$e&&(_[st]=Math.max(_[st],mt))},ke.successors.bind(ke)),v.forEach(we,function(st){_[st]=_[ve[st]]}),_}function Y(de,q){return v.minBy(v.values(q),function(ve){var we=Number.NEGATIVE_INFINITY,Ae=Number.POSITIVE_INFINITY;return v.forIn(ve,function(_,ke){var $e=function pe(de,q){return de.node(q).width}(de,ke)/2;we=Math.max(_+$e,we),Ae=Math.min(_-$e,Ae)}),we-Ae})}function ee(de,q){var ve=v.values(q),we=v.min(ve),Ae=v.max(ve);v.forEach(["u","d"],function(_){v.forEach(["l","r"],function(ke){var Ke,$e=_+ke,We=de[$e];if(We!==q){var Ze=v.values(We);(Ke="l"===ke?we-v.min(Ze):Ae-v.max(Ze))&&(de[$e]=v.mapValues(We,function(st){return st+Ke}))}})})}function le(de,q){return v.mapValues(de.ul,function(ve,we){if(q)return de[q.toLowerCase()][we];var Ae=v.sortBy(v.map(de,we));return(Ae[1]+Ae[2])/2})}P.exports={positionX:function o(de){var Ae,q=S.buildLayerMatrix(de),ve=v.merge(E(de,q),b(de,q)),we={};v.forEach(["u","d"],function(ke){Ae="u"===ke?q:v.values(q).reverse(),v.forEach(["l","r"],function($e){"r"===$e&&(Ae=v.map(Ae,function(st){return v.values(st).reverse()}));var We=("u"===ke?de.predecessors:de.successors).bind(de),Ke=B(0,Ae,ve,We),Ze=H(de,Ae,Ke.root,Ke.align,"r"===$e);"r"===$e&&(Ze=v.mapValues(Ze,function(st){return-st})),we[ke+$e]=Ze})});var _=Y(de,we);return ee(we,_),le(we,de.graph().align)},findType1Conflicts:E,findType2Conflicts:b,addConflict:O,hasConflict:A,verticalAlignment:B,horizontalCompaction:H,alignCoordinates:ee,findSmallestWidthAlignment:Y,balance:le}},78226:(P,G,h)=>{"use strict";var v=h(45760),m=h(11510),S=h(54058).positionX;P.exports=function E(I){(function b(I){var O=m.buildLayerMatrix(I),A=I.graph().ranksep,B=0;v.forEach(O,function(H){var k=v.max(v.map(H,function(Y){return I.node(Y).height}));v.forEach(H,function(Y){I.node(Y).y=B+k/2}),B+=k+A})})(I=m.asNonCompoundGraph(I)),v.forEach(S(I),function(O,A){I.node(A).x=O})}},96632:(P,G,h)=>{"use strict";var v=h(45760),m=h(36456).Graph,S=h(1916).slack;function b(A,B){return v.forEach(A.nodes(),function H(k){v.forEach(B.nodeEdges(k),function(Y){var ee=Y.v,le=k===ee?Y.w:ee;!A.hasNode(le)&&!S(B,Y)&&(A.setNode(le,{}),A.setEdge(k,le,{}),H(le))})}),A.nodeCount()}function I(A,B){return v.minBy(B.edges(),function(H){if(A.hasNode(H.v)!==A.hasNode(H.w))return S(B,H)})}function O(A,B,H){v.forEach(A.nodes(),function(k){B.node(k).rank+=H})}P.exports=function E(A){var Y,ee,B=new m({directed:!1}),H=A.nodes()[0],k=A.nodeCount();for(B.setNode(H,{});b(B,A)<k;)Y=I(B,A),ee=B.hasNode(Y.v)?S(A,Y):-S(A,Y),O(B,A,ee);return B}},94124:(P,G,h)=>{"use strict";var m=h(1916).longestPath,S=h(96632),E=h(63804);P.exports=function b(B){switch(B.graph().ranker){case"network-simplex":default:!function A(B){E(B)}(B);break;case"tight-tree":!function O(B){m(B),S(B)}(B);break;case"longest-path":I(B)}};var I=m},63804:(P,G,h)=>{"use strict";var v=h(45760),m=h(96632),S=h(1916).slack,E=h(1916).longestPath,b=h(36456).alg.preorder,I=h(36456).alg.postorder,O=h(11510).simplify;function A(ve){ve=O(ve),E(ve);var Ae,we=m(ve);for(Y(we),B(we,ve);Ae=le(we);)ae(we,ve,Ae,o(we,ve,Ae))}function B(ve,we){var Ae=I(ve,ve.nodes());Ae=Ae.slice(0,Ae.length-1),v.forEach(Ae,function(_){!function H(ve,we,Ae){var _=ve.node(Ae);ve.edge(Ae,_.parent).cutvalue=k(ve,we,Ae)}(ve,we,_)})}function k(ve,we,Ae){var ke=ve.node(Ae).parent,$e=!0,We=we.edge(Ae,ke),Ke=0;return We||($e=!1,We=we.edge(ke,Ae)),Ke=We.weight,v.forEach(we.nodeEdges(Ae),function(Ze){var st=Ze.v===Ae,mt=st?Ze.w:Ze.v;if(mt!==ke){var Nt=st===$e,Ut=we.edge(Ze).weight;if(Ke+=Nt?Ut:-Ut,function de(ve,we,Ae){return ve.hasEdge(we,Ae)}(ve,Ae,mt)){var Ct=ve.edge(Ae,mt).cutvalue;Ke+=Nt?-Ct:Ct}}}),Ke}function Y(ve,we){arguments.length<2&&(we=ve.nodes()[0]),ee(ve,{},1,we)}function ee(ve,we,Ae,_,ke){var $e=Ae,We=ve.node(_);return we[_]=!0,v.forEach(ve.neighbors(_),function(Ke){v.has(we,Ke)||(Ae=ee(ve,we,Ae,Ke,_))}),We.low=$e,We.lim=Ae++,ke?We.parent=ke:delete We.parent,Ae}function le(ve){return v.find(ve.edges(),function(we){return ve.edge(we).cutvalue<0})}function o(ve,we,Ae){var _=Ae.v,ke=Ae.w;we.hasEdge(_,ke)||(_=Ae.w,ke=Ae.v);var $e=ve.node(_),We=ve.node(ke),Ke=$e,Ze=!1;$e.lim>We.lim&&(Ke=We,Ze=!0);var st=v.filter(we.edges(),function(mt){return Ze===q(0,ve.node(mt.v),Ke)&&Ze!==q(0,ve.node(mt.w),Ke)});return v.minBy(st,function(mt){return S(we,mt)})}function ae(ve,we,Ae,_){ve.removeEdge(Ae.v,Ae.w),ve.setEdge(_.v,_.w,{}),Y(ve),B(ve,we),function pe(ve,we){var Ae=v.find(ve.nodes(),function(ke){return!we.node(ke).parent}),_=b(ve,Ae);_=_.slice(1),v.forEach(_,function(ke){var $e=ve.node(ke).parent,We=we.edge(ke,$e),Ke=!1;We||(We=we.edge($e,ke),Ke=!0),we.node(ke).rank=we.node($e).rank+(Ke?We.minlen:-We.minlen)})}(ve,we)}function q(ve,we,Ae){return Ae.low<=we.lim&&we.lim<=Ae.lim}P.exports=A,A.initLowLimValues=Y,A.initCutValues=B,A.calcCutValue=k,A.leaveEdge=le,A.enterEdge=o,A.exchangeEdges=ae},1916:(P,G,h)=>{"use strict";var v=h(45760);P.exports={longestPath:function m(E){var b={};v.forEach(E.sources(),function I(O){var A=E.node(O);if(v.has(b,O))return A.rank;b[O]=!0;var B=v.min(v.map(E.outEdges(O),function(H){return I(H.w)-E.edge(H).minlen}));return(B===Number.POSITIVE_INFINITY||null==B)&&(B=0),A.rank=B})},slack:function S(E,b){return E.node(b.w).rank-E.node(b.v).rank-E.edge(b).minlen}}},11510:(P,G,h)=>{"use strict";var v=h(45760),m=h(36456).Graph;function S(pe,de,q,ve){var we;do{we=v.uniqueId(ve)}while(pe.hasNode(we));return q.dummy=de,pe.setNode(we,q),we}function ee(pe){return v.max(v.map(pe.nodes(),function(de){var q=pe.node(de).rank;if(!v.isUndefined(q))return q}))}P.exports={addDummyNode:S,simplify:function E(pe){var de=(new m).setGraph(pe.graph());return v.forEach(pe.nodes(),function(q){de.setNode(q,pe.node(q))}),v.forEach(pe.edges(),function(q){var ve=de.edge(q.v,q.w)||{weight:0,minlen:1},we=pe.edge(q);de.setEdge(q.v,q.w,{weight:ve.weight+we.weight,minlen:Math.max(ve.minlen,we.minlen)})}),de},asNonCompoundGraph:function b(pe){var de=new m({multigraph:pe.isMultigraph()}).setGraph(pe.graph());return v.forEach(pe.nodes(),function(q){pe.children(q).length||de.setNode(q,pe.node(q))}),v.forEach(pe.edges(),function(q){de.setEdge(q,pe.edge(q))}),de},successorWeights:function I(pe){var de=v.map(pe.nodes(),function(q){var ve={};return v.forEach(pe.outEdges(q),function(we){ve[we.w]=(ve[we.w]||0)+pe.edge(we).weight}),ve});return v.zipObject(pe.nodes(),de)},predecessorWeights:function O(pe){var de=v.map(pe.nodes(),function(q){var ve={};return v.forEach(pe.inEdges(q),function(we){ve[we.v]=(ve[we.v]||0)+pe.edge(we).weight}),ve});return v.zipObject(pe.nodes(),de)},intersectRect:function A(pe,de){var $e,We,q=pe.x,ve=pe.y,we=de.x-q,Ae=de.y-ve,_=pe.width/2,ke=pe.height/2;if(!we&&!Ae)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Ae)*_>Math.abs(we)*ke?(Ae<0&&(ke=-ke),$e=ke*we/Ae,We=ke):(we<0&&(_=-_),$e=_,We=_*Ae/we),{x:q+$e,y:ve+We}},buildLayerMatrix:function B(pe){var de=v.map(v.range(ee(pe)+1),function(){return[]});return v.forEach(pe.nodes(),function(q){var ve=pe.node(q),we=ve.rank;v.isUndefined(we)||(de[we][ve.order]=q)}),de},normalizeRanks:function H(pe){var de=v.min(v.map(pe.nodes(),function(q){return pe.node(q).rank}));v.forEach(pe.nodes(),function(q){var ve=pe.node(q);v.has(ve,"rank")&&(ve.rank-=de)})},removeEmptyRanks:function k(pe){var de=v.min(v.map(pe.nodes(),function(Ae){return pe.node(Ae).rank})),q=[];v.forEach(pe.nodes(),function(Ae){var _=pe.node(Ae).rank-de;q[_]||(q[_]=[]),q[_].push(Ae)});var ve=0,we=pe.graph().nodeRankFactor;v.forEach(q,function(Ae,_){v.isUndefined(Ae)&&_%we!=0?--ve:ve&&v.forEach(Ae,function(ke){pe.node(ke).rank+=ve})})},addBorderNode:function Y(pe,de,q,ve){var we={width:0,height:0};return arguments.length>=4&&(we.rank=q,we.order=ve),S(pe,"border",we,de)},maxRank:ee,partition:function le(pe,de){var q={lhs:[],rhs:[]};return v.forEach(pe,function(ve){de(ve)?q.lhs.push(ve):q.rhs.push(ve)}),q},time:function o(pe,de){var q=v.now();try{return de()}finally{console.log(pe+" time: "+(v.now()-q)+"ms")}},notime:function ae(pe,de){return de()}}},28126:P=>{P.exports="0.8.5"},85510:(P,G,h)=>{var v=h(51838);P.exports={Graph:v.Graph,json:h(21088),alg:h(83430),version:v.version}},86730:(P,G,h)=>{var v=h(79138);P.exports=function m(S){var I,E={},b=[];function O(A){v.has(E,A)||(E[A]=!0,I.push(A),v.each(S.successors(A),O),v.each(S.predecessors(A),O))}return v.each(S.nodes(),function(A){I=[],O(A),I.length&&b.push(I)}),b}},22163:(P,G,h)=>{var v=h(79138);function S(E,b,I,O,A,B){v.has(O,b)||(O[b]=!0,I||B.push(b),v.each(A(b),function(H){S(E,H,I,O,A,B)}),I&&B.push(b))}P.exports=function m(E,b,I){v.isArray(b)||(b=[b]);var O=(E.isDirected()?E.successors:E.neighbors).bind(E),A=[],B={};return v.each(b,function(H){if(!E.hasNode(H))throw new Error("Graph does not have node: "+H);S(E,H,"post"===I,B,O,A)}),A}},25668:(P,G,h)=>{var v=h(61718),m=h(79138);P.exports=function S(E,b,I){return m.transform(E.nodes(),function(O,A){O[A]=v(E,A,b,I)},{})}},61718:(P,G,h)=>{var v=h(79138),m=h(31919);P.exports=function E(I,O,A,B){return function b(I,O,A,B){var Y,ee,H={},k=new m,le=function(o){var ae=o.v!==Y?o.v:o.w,pe=H[ae],de=A(o),q=ee.distance+de;if(de<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+o+" Weight: "+de);q<pe.distance&&(pe.distance=q,pe.predecessor=Y,k.decrease(ae,q))};for(I.nodes().forEach(function(o){var ae=o===O?0:Number.POSITIVE_INFINITY;H[o]={distance:ae},k.add(o,ae)});k.size()>0&&(Y=k.removeMin(),(ee=H[Y]).distance!==Number.POSITIVE_INFINITY);)B(Y).forEach(le);return H}(I,String(O),A||S,B||function(H){return I.outEdges(H)})};var S=v.constant(1)},9611:(P,G,h)=>{var v=h(79138),m=h(73585);P.exports=function S(E){return v.filter(m(E),function(b){return b.length>1||1===b.length&&E.hasEdge(b[0],b[0])})}},22881:(P,G,h)=>{var v=h(79138);P.exports=function S(b,I,O){return function E(b,I,O){var A={},B=b.nodes();return B.forEach(function(H){A[H]={},A[H][H]={distance:0},B.forEach(function(k){H!==k&&(A[H][k]={distance:Number.POSITIVE_INFINITY})}),O(H).forEach(function(k){var Y=k.v===H?k.w:k.v,ee=I(k);A[H][Y]={distance:ee,predecessor:H}})}),B.forEach(function(H){var k=A[H];B.forEach(function(Y){var ee=A[Y];B.forEach(function(le){var ae=k[le],pe=ee[le],de=ee[H].distance+ae.distance;de<pe.distance&&(pe.distance=de,pe.predecessor=ae.predecessor)})})}),A}(b,I||m,O||function(A){return b.outEdges(A)})};var m=v.constant(1)},83430:(P,G,h)=>{P.exports={components:h(86730),dijkstra:h(61718),dijkstraAll:h(25668),findCycles:h(9611),floydWarshall:h(22881),isAcyclic:h(9366),postorder:h(46694),preorder:h(5330),prim:h(46823),tarjan:h(73585),topsort:h(52180)}},9366:(P,G,h)=>{var v=h(52180);P.exports=function m(S){try{v(S)}catch(E){if(E instanceof v.CycleException)return!1;throw E}return!0}},46694:(P,G,h)=>{var v=h(22163);P.exports=function m(S,E){return v(S,E,"post")}},5330:(P,G,h)=>{var v=h(22163);P.exports=function m(S,E){return v(S,E,"pre")}},46823:(P,G,h)=>{var v=h(79138),m=h(66568),S=h(31919);P.exports=function E(b,I){var H,O=new m,A={},B=new S;function k(ee){var le=ee.v===H?ee.w:ee.v,o=B.priority(le);if(void 0!==o){var ae=I(ee);ae<o&&(A[le]=H,B.decrease(le,ae))}}if(0===b.nodeCount())return O;v.each(b.nodes(),function(ee){B.add(ee,Number.POSITIVE_INFINITY),O.setNode(ee)}),B.decrease(b.nodes()[0],0);for(var Y=!1;B.size()>0;){if(H=B.removeMin(),v.has(A,H))O.setEdge(H,A[H]);else{if(Y)throw new Error("Input graph is not connected: "+b);Y=!0}b.nodeEdges(H).forEach(k)}return O}},73585:(P,G,h)=>{var v=h(79138);P.exports=function m(S){var E=0,b=[],I={},O=[];function A(B){var H=I[B]={onStack:!0,lowlink:E,index:E++};if(b.push(B),S.successors(B).forEach(function(ee){v.has(I,ee)?I[ee].onStack&&(H.lowlink=Math.min(H.lowlink,I[ee].index)):(A(ee),H.lowlink=Math.min(H.lowlink,I[ee].lowlink))}),H.lowlink===H.index){var Y,k=[];do{Y=b.pop(),I[Y].onStack=!1,k.push(Y)}while(B!==Y);O.push(k)}}return S.nodes().forEach(function(B){v.has(I,B)||A(B)}),O}},52180:(P,G,h)=>{var v=h(79138);function m(E){var b={},I={},O=[];if(v.each(E.sinks(),function A(B){if(v.has(I,B))throw new S;v.has(b,B)||(I[B]=!0,b[B]=!0,v.each(E.predecessors(B),A),delete I[B],O.push(B))}),v.size(b)!==E.nodeCount())throw new S;return O}function S(){}P.exports=m,m.CycleException=S,S.prototype=new Error},31919:(P,G,h)=>{var v=h(79138);function m(){this._arr=[],this._keyIndices={}}P.exports=m,m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(S){return S.key})},m.prototype.has=function(S){return v.has(this._keyIndices,S)},m.prototype.priority=function(S){var E=this._keyIndices[S];if(void 0!==E)return this._arr[E].priority},m.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(S,E){var b=this._keyIndices;if(S=String(S),!v.has(b,S)){var I=this._arr,O=I.length;return b[S]=O,I.push({key:S,priority:E}),this._decrease(O),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},m.prototype.decrease=function(S,E){var b=this._keyIndices[S];if(E>this._arr[b].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[b].priority+" New: "+E);this._arr[b].priority=E,this._decrease(b)},m.prototype._heapify=function(S){var E=this._arr,b=2*S,I=b+1,O=S;b<E.length&&(O=E[b].priority<E[O].priority?b:O,I<E.length&&(O=E[I].priority<E[O].priority?I:O),O!==S&&(this._swap(S,O),this._heapify(O)))},m.prototype._decrease=function(S){for(var I,E=this._arr,b=E[S].priority;0!==S&&!(E[I=S>>1].priority<b);)this._swap(S,I),S=I},m.prototype._swap=function(S,E){var b=this._arr,I=this._keyIndices,O=b[S],A=b[E];b[S]=A,b[E]=O,I[A.key]=S,I[O.key]=E}},66568:(P,G,h)=>{"use strict";var v=h(79138);P.exports=b;var S="\0";function b(k){this._isDirected=!v.has(k,"directed")||k.directed,this._isMultigraph=!!v.has(k,"multigraph")&&k.multigraph,this._isCompound=!!v.has(k,"compound")&&k.compound,this._label=void 0,this._defaultNodeLabelFn=v.constant(void 0),this._defaultEdgeLabelFn=v.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function I(k,Y){k[Y]?k[Y]++:k[Y]=1}function O(k,Y){--k[Y]||delete k[Y]}function A(k,Y,ee,le){var o=""+Y,ae=""+ee;if(!k&&o>ae){var pe=o;o=ae,ae=pe}return o+"\x01"+ae+"\x01"+(v.isUndefined(le)?"\0":le)}function B(k,Y,ee,le){var o=""+Y,ae=""+ee;if(!k&&o>ae){var pe=o;o=ae,ae=pe}var de={v:o,w:ae};return le&&(de.name=le),de}function H(k,Y){return A(k,Y.v,Y.w,Y.name)}b.prototype._nodeCount=0,b.prototype._edgeCount=0,b.prototype.isDirected=function(){return this._isDirected},b.prototype.isMultigraph=function(){return this._isMultigraph},b.prototype.isCompound=function(){return this._isCompound},b.prototype.setGraph=function(k){return this._label=k,this},b.prototype.graph=function(){return this._label},b.prototype.setDefaultNodeLabel=function(k){return v.isFunction(k)||(k=v.constant(k)),this._defaultNodeLabelFn=k,this},b.prototype.nodeCount=function(){return this._nodeCount},b.prototype.nodes=function(){return v.keys(this._nodes)},b.prototype.sources=function(){var k=this;return v.filter(this.nodes(),function(Y){return v.isEmpty(k._in[Y])})},b.prototype.sinks=function(){var k=this;return v.filter(this.nodes(),function(Y){return v.isEmpty(k._out[Y])})},b.prototype.setNodes=function(k,Y){var ee=arguments,le=this;return v.each(k,function(o){ee.length>1?le.setNode(o,Y):le.setNode(o)}),this},b.prototype.setNode=function(k,Y){return v.has(this._nodes,k)?(arguments.length>1&&(this._nodes[k]=Y),this):(this._nodes[k]=arguments.length>1?Y:this._defaultNodeLabelFn(k),this._isCompound&&(this._parent[k]=S,this._children[k]={},this._children[S][k]=!0),this._in[k]={},this._preds[k]={},this._out[k]={},this._sucs[k]={},++this._nodeCount,this)},b.prototype.node=function(k){return this._nodes[k]},b.prototype.hasNode=function(k){return v.has(this._nodes,k)},b.prototype.removeNode=function(k){var Y=this;if(v.has(this._nodes,k)){var ee=function(le){Y.removeEdge(Y._edgeObjs[le])};delete this._nodes[k],this._isCompound&&(this._removeFromParentsChildList(k),delete this._parent[k],v.each(this.children(k),function(le){Y.setParent(le)}),delete this._children[k]),v.each(v.keys(this._in[k]),ee),delete this._in[k],delete this._preds[k],v.each(v.keys(this._out[k]),ee),delete this._out[k],delete this._sucs[k],--this._nodeCount}return this},b.prototype.setParent=function(k,Y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(v.isUndefined(Y))Y=S;else{for(var ee=Y+="";!v.isUndefined(ee);ee=this.parent(ee))if(ee===k)throw new Error("Setting "+Y+" as parent of "+k+" would create a cycle");this.setNode(Y)}return this.setNode(k),this._removeFromParentsChildList(k),this._parent[k]=Y,this._children[Y][k]=!0,this},b.prototype._removeFromParentsChildList=function(k){delete this._children[this._parent[k]][k]},b.prototype.parent=function(k){if(this._isCompound){var Y=this._parent[k];if(Y!==S)return Y}},b.prototype.children=function(k){if(v.isUndefined(k)&&(k=S),this._isCompound){var Y=this._children[k];if(Y)return v.keys(Y)}else{if(k===S)return this.nodes();if(this.hasNode(k))return[]}},b.prototype.predecessors=function(k){var Y=this._preds[k];if(Y)return v.keys(Y)},b.prototype.successors=function(k){var Y=this._sucs[k];if(Y)return v.keys(Y)},b.prototype.neighbors=function(k){var Y=this.predecessors(k);if(Y)return v.union(Y,this.successors(k))},b.prototype.isLeaf=function(k){return 0===(this.isDirected()?this.successors(k):this.neighbors(k)).length},b.prototype.filterNodes=function(k){var Y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});Y.setGraph(this.graph());var ee=this;v.each(this._nodes,function(ae,pe){k(pe)&&Y.setNode(pe,ae)}),v.each(this._edgeObjs,function(ae){Y.hasNode(ae.v)&&Y.hasNode(ae.w)&&Y.setEdge(ae,ee.edge(ae))});var le={};function o(ae){var pe=ee.parent(ae);return void 0===pe||Y.hasNode(pe)?(le[ae]=pe,pe):pe in le?le[pe]:o(pe)}return this._isCompound&&v.each(Y.nodes(),function(ae){Y.setParent(ae,o(ae))}),Y},b.prototype.setDefaultEdgeLabel=function(k){return v.isFunction(k)||(k=v.constant(k)),this._defaultEdgeLabelFn=k,this},b.prototype.edgeCount=function(){return this._edgeCount},b.prototype.edges=function(){return v.values(this._edgeObjs)},b.prototype.setPath=function(k,Y){var ee=this,le=arguments;return v.reduce(k,function(o,ae){return le.length>1?ee.setEdge(o,ae,Y):ee.setEdge(o,ae),ae}),this},b.prototype.setEdge=function(){var k,Y,ee,le,o=!1,ae=arguments[0];"object"==typeof ae&&null!==ae&&"v"in ae?(k=ae.v,Y=ae.w,ee=ae.name,2===arguments.length&&(le=arguments[1],o=!0)):(k=ae,Y=arguments[1],ee=arguments[3],arguments.length>2&&(le=arguments[2],o=!0)),k=""+k,Y=""+Y,v.isUndefined(ee)||(ee=""+ee);var pe=A(this._isDirected,k,Y,ee);if(v.has(this._edgeLabels,pe))return o&&(this._edgeLabels[pe]=le),this;if(!v.isUndefined(ee)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(k),this.setNode(Y),this._edgeLabels[pe]=o?le:this._defaultEdgeLabelFn(k,Y,ee);var de=B(this._isDirected,k,Y,ee);return k=de.v,Y=de.w,Object.freeze(de),this._edgeObjs[pe]=de,I(this._preds[Y],k),I(this._sucs[k],Y),this._in[Y][pe]=de,this._out[k][pe]=de,this._edgeCount++,this},b.prototype.edge=function(k,Y,ee){var le=1===arguments.length?H(this._isDirected,arguments[0]):A(this._isDirected,k,Y,ee);return this._edgeLabels[le]},b.prototype.hasEdge=function(k,Y,ee){var le=1===arguments.length?H(this._isDirected,arguments[0]):A(this._isDirected,k,Y,ee);return v.has(this._edgeLabels,le)},b.prototype.removeEdge=function(k,Y,ee){var le=1===arguments.length?H(this._isDirected,arguments[0]):A(this._isDirected,k,Y,ee),o=this._edgeObjs[le];return o&&(k=o.v,Y=o.w,delete this._edgeLabels[le],delete this._edgeObjs[le],O(this._preds[Y],k),O(this._sucs[k],Y),delete this._in[Y][le],delete this._out[k][le],this._edgeCount--),this},b.prototype.inEdges=function(k,Y){var ee=this._in[k];if(ee){var le=v.values(ee);return Y?v.filter(le,function(o){return o.v===Y}):le}},b.prototype.outEdges=function(k,Y){var ee=this._out[k];if(ee){var le=v.values(ee);return Y?v.filter(le,function(o){return o.w===Y}):le}},b.prototype.nodeEdges=function(k,Y){var ee=this.inEdges(k,Y);if(ee)return ee.concat(this.outEdges(k,Y))}},51838:(P,G,h)=>{P.exports={Graph:h(66568),version:h(75089)}},21088:(P,G,h)=>{var v=h(79138),m=h(66568);function E(O){return v.map(O.nodes(),function(A){var B=O.node(A),H=O.parent(A),k={v:A};return v.isUndefined(B)||(k.value=B),v.isUndefined(H)||(k.parent=H),k})}function b(O){return v.map(O.edges(),function(A){var B=O.edge(A),H={v:A.v,w:A.w};return v.isUndefined(A.name)||(H.name=A.name),v.isUndefined(B)||(H.value=B),H})}P.exports={write:function S(O){var A={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:E(O),edges:b(O)};return v.isUndefined(O.graph())||(A.value=v.clone(O.graph())),A},read:function I(O){var A=new m(O.options).setGraph(O.value);return v.each(O.nodes,function(B){A.setNode(B.v,B.value),B.parent&&A.setParent(B.v,B.parent)}),v.each(O.edges,function(B){A.setEdge({v:B.v,w:B.w,name:B.name},B.value)}),A}}},79138:(P,G,h)=>{var v;try{v={clone:h(11094),constant:h(76684),each:h(35474),filter:h(35281),has:h(54842),isArray:h(21503),isEmpty:h(71973),isFunction:h(75946),isUndefined:h(34235),keys:h(118),map:h(19984),reduce:h(81337),size:h(55637),transform:h(89416),union:h(68921),values:h(90377)}}catch(m){}v||(v=window._),P.exports=v},75089:P=>{P.exports="2.1.8"},58259:function(P,G){var v;!function(m,S){"use strict";"object"==typeof P.exports?P.exports=m.document?S(m,!0):function(E){if(!E.document)throw new Error("jQuery requires a window with a document");return S(E)}:S(m)}("undefined"!=typeof window?window:this,function(m,S){"use strict";var E=[],b=Object.getPrototypeOf,I=E.slice,O=E.flat?function(c){return E.flat.call(c)}:function(c){return E.concat.apply([],c)},A=E.push,B=E.indexOf,H={},k=H.toString,Y=H.hasOwnProperty,ee=Y.toString,le=ee.call(Object),o={},ae=function(p){return"function"==typeof p&&"number"!=typeof p.nodeType&&"function"!=typeof p.item},pe=function(p){return null!=p&&p===p.window},de=m.document,q={type:!0,src:!0,nonce:!0,noModule:!0};function ve(c,p,x){var C,N,D=(x=x||de).createElement("script");if(D.text=c,p)for(C in q)(N=p[C]||p.getAttribute&&p.getAttribute(C))&&D.setAttribute(C,N);x.head.appendChild(D).parentNode.removeChild(D)}function we(c){return null==c?c+"":"object"==typeof c||"function"==typeof c?H[k.call(c)]||"object":typeof c}var _=function(c,p){return new _.fn.init(c,p)};function ke(c){var p=!!c&&"length"in c&&c.length,x=we(c);return!ae(c)&&!pe(c)&&("array"===x||0===p||"number"==typeof p&&p>0&&p-1 in c)}_.fn=_.prototype={jquery:"3.6.0",constructor:_,length:0,toArray:function(){return I.call(this)},get:function(c){return null==c?I.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var p=_.merge(this.constructor(),c);return p.prevObject=this,p},each:function(c){return _.each(this,c)},map:function(c){return this.pushStack(_.map(this,function(p,x){return c.call(p,x,p)}))},slice:function(){return this.pushStack(I.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(c,p){return(p+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(c,p){return p%2}))},eq:function(c){var p=this.length,x=+c+(c<0?p:0);return this.pushStack(x>=0&&x<p?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:A,sort:E.sort,splice:E.splice},_.extend=_.fn.extend=function(){var c,p,x,C,N,D,W=arguments[0]||{},se=1,ue=arguments.length,be=!1;for("boolean"==typeof W&&(be=W,W=arguments[se]||{},se++),"object"!=typeof W&&!ae(W)&&(W={}),se===ue&&(W=this,se--);se<ue;se++)if(null!=(c=arguments[se]))for(p in c)C=c[p],"__proto__"!==p&&W!==C&&(be&&C&&(_.isPlainObject(C)||(N=Array.isArray(C)))?(x=W[p],D=N&&!Array.isArray(x)?[]:N||_.isPlainObject(x)?x:{},N=!1,W[p]=_.extend(be,D,C)):void 0!==C&&(W[p]=C));return W},_.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var p,x;return!(!c||"[object Object]"!==k.call(c)||(p=b(c))&&("function"!=typeof(x=Y.call(p,"constructor")&&p.constructor)||ee.call(x)!==le))},isEmptyObject:function(c){var p;for(p in c)return!1;return!0},globalEval:function(c,p,x){ve(c,{nonce:p&&p.nonce},x)},each:function(c,p){var x,C=0;if(ke(c))for(x=c.length;C<x&&!1!==p.call(c[C],C,c[C]);C++);else for(C in c)if(!1===p.call(c[C],C,c[C]))break;return c},makeArray:function(c,p){var x=p||[];return null!=c&&(ke(Object(c))?_.merge(x,"string"==typeof c?[c]:c):A.call(x,c)),x},inArray:function(c,p,x){return null==p?-1:B.call(p,c,x)},merge:function(c,p){for(var x=+p.length,C=0,N=c.length;C<x;C++)c[N++]=p[C];return c.length=N,c},grep:function(c,p,x){for(var N=[],D=0,W=c.length,se=!x;D<W;D++)!p(c[D],D)!==se&&N.push(c[D]);return N},map:function(c,p,x){var C,N,D=0,W=[];if(ke(c))for(C=c.length;D<C;D++)null!=(N=p(c[D],D,x))&&W.push(N);else for(D in c)null!=(N=p(c[D],D,x))&&W.push(N);return O(W)},guid:1,support:o}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=E[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,p){H["[object "+p+"]"]=p.toLowerCase()});var $e=function(c){var p,x,C,N,D,W,se,ue,be,Oe,Ye,Pe,Be,dt,Ht,St,Ln,jn,jr,Tt="sizzle"+1*new Date,It=c.document,xr=0,un=0,Fn=mn(),ar=mn(),ps=mn(),ii=mn(),Oo=function(J,ce){return J===ce&&(Ye=!0),0},Ui={}.hasOwnProperty,hr=[],_t=hr.pop,Vn=hr.push,gi=hr.push,zr=hr.slice,Ri=function(J,ce){for(var xe=0,Ve=J.length;xe<Ve;xe++)if(J[xe]===ce)return xe;return-1},ko="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Jt="[\\x20\\t\\r\\n\\f]",Qn="(?:\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",vi="\\["+Jt+"*("+Qn+")(?:"+Jt+"*([*^$|!~]?=)"+Jt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Qn+"))|)"+Jt+"*\\]",Lo=":("+Qn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",vn=new RegExp(Jt+"+","g"),ln=new RegExp("^"+Jt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Jt+"+$","g"),Qt=new RegExp("^"+Jt+"*,"+Jt+"*"),Ea=new RegExp("^"+Jt+"*([>+~]|"+Jt+")"+Jt+"*"),Vs=new RegExp(Jt+"|>"),Ou=new RegExp(Lo),ku=new RegExp("^"+Qn+"$"),Pa={ID:new RegExp("^#("+Qn+")"),CLASS:new RegExp("^\\.("+Qn+")"),TAG:new RegExp("^("+Qn+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+Lo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Jt+"*(even|odd|(([+-]|)(\\d*)n|)"+Jt+"*(?:([+-]|)"+Jt+"*(\\d+)|))"+Jt+"*\\)|)","i"),bool:new RegExp("^(?:"+ko+")$","i"),needsContext:new RegExp("^"+Jt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Jt+"*((?:-\\d)?\\d*)"+Jt+"*\\)|)(?=[^-]|$)","i")},Lu=/HTML$/i,Yl=/^(?:input|select|textarea|button)$/i,gs=/^h\d$/i,pr=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lo=/[+~]/,oi=new RegExp("\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\([^\\r\\n\\f])","g"),Gi=function(J,ce){var xe="0x"+J.slice(1)-65536;return ce||(xe<0?String.fromCharCode(xe+65536):String.fromCharCode(xe>>10|55296,1023&xe|56320))},Zn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ia=function(J,ce){return ce?"\0"===J?"\ufffd":J.slice(0,-1)+"\\"+J.charCodeAt(J.length-1).toString(16)+" ":"\\"+J},Bs=function(){Pe()},br=ct(function(J){return!0===J.disabled&&"fieldset"===J.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{gi.apply(hr=zr.call(It.childNodes),It.childNodes)}catch(J){gi={apply:hr.length?function(ce,xe){Vn.apply(ce,zr.call(xe))}:function(ce,xe){for(var Ve=ce.length,Se=0;ce[Ve++]=xe[Se++];);ce.length=Ve-1}}}function Pn(J,ce,xe,Ve){var Se,je,Ne,tt,ot,Et,Pt,qe=ce&&ce.ownerDocument,Zt=ce?ce.nodeType:9;if(xe=xe||[],"string"!=typeof J||!J||1!==Zt&&9!==Zt&&11!==Zt)return xe;if(!Ve&&(Pe(ce),ce=ce||Be,Ht)){if(11!==Zt&&(ot=sr.exec(J)))if(Se=ot[1]){if(9===Zt){if(!(Ne=ce.getElementById(Se)))return xe;if(Ne.id===Se)return xe.push(Ne),xe}else if(qe&&(Ne=qe.getElementById(Se))&&jr(ce,Ne)&&Ne.id===Se)return xe.push(Ne),xe}else{if(ot[2])return gi.apply(xe,ce.getElementsByTagName(J)),xe;if((Se=ot[3])&&x.getElementsByClassName&&ce.getElementsByClassName)return gi.apply(xe,ce.getElementsByClassName(Se)),xe}if(x.qsa&&!ii[J+" "]&&(!St||!St.test(J))&&(1!==Zt||"object"!==ce.nodeName.toLowerCase())){if(Pt=J,qe=ce,1===Zt&&(Vs.test(J)||Ea.test(J))){for(((qe=lo.test(J)&&Ce(ce.parentNode)||ce)!==ce||!x.scope)&&((tt=ce.getAttribute("id"))?tt=tt.replace(Zn,Ia):ce.setAttribute("id",tt=Tt)),je=(Et=W(J)).length;je--;)Et[je]=(tt?"#"+tt:":scope")+" "+Me(Et[je]);Pt=Et.join(",")}try{return gi.apply(xe,qe.querySelectorAll(Pt)),xe}catch(qt){ii(J,!0)}finally{tt===Tt&&ce.removeAttribute("id")}}}return ue(J.replace(ln,"$1"),ce,xe,Ve)}function mn(){var J=[];return function ce(xe,Ve){return J.push(xe+" ")>C.cacheLength&&delete ce[J.shift()],ce[xe+" "]=Ve}}function an(J){return J[Tt]=!0,J}function Sn(J){var ce=Be.createElement("fieldset");try{return!!J(ce)}catch(xe){return!1}finally{ce.parentNode&&ce.parentNode.removeChild(ce),ce=null}}function co(J,ce){for(var xe=J.split("|"),Ve=xe.length;Ve--;)C.attrHandle[xe[Ve]]=ce}function _r(J,ce){var xe=ce&&J,Ve=xe&&1===J.nodeType&&1===ce.nodeType&&J.sourceIndex-ce.sourceIndex;if(Ve)return Ve;if(xe)for(;xe=xe.nextSibling;)if(xe===ce)return-1;return J?1:-1}function Hs(J){return function(ce){return"input"===ce.nodeName.toLowerCase()&&ce.type===J}}function Wi(J){return function(ce){var xe=ce.nodeName.toLowerCase();return("input"===xe||"button"===xe)&&ce.type===J}}function js(J){return function(ce){return"form"in ce?ce.parentNode&&!1===ce.disabled?"label"in ce?"label"in ce.parentNode?ce.parentNode.disabled===J:ce.disabled===J:ce.isDisabled===J||ce.isDisabled!==!J&&br(ce)===J:ce.disabled===J:"label"in ce&&ce.disabled===J}}function mi(J){return an(function(ce){return ce=+ce,an(function(xe,Ve){for(var Se,je=J([],xe.length,ce),Ne=je.length;Ne--;)xe[Se=je[Ne]]&&(xe[Se]=!(Ve[Se]=xe[Se]))})})}function Ce(J){return J&&void 0!==J.getElementsByTagName&&J}for(p in x=Pn.support={},D=Pn.isXML=function(J){var xe=J&&(J.ownerDocument||J).documentElement;return!Lu.test(J&&J.namespaceURI||xe&&xe.nodeName||"HTML")},Pe=Pn.setDocument=function(J){var ce,xe,Ve=J?J.ownerDocument||J:It;return Ve==Be||9!==Ve.nodeType||!Ve.documentElement||(dt=(Be=Ve).documentElement,Ht=!D(Be),It!=Be&&(xe=Be.defaultView)&&xe.top!==xe&&(xe.addEventListener?xe.addEventListener("unload",Bs,!1):xe.attachEvent&&xe.attachEvent("onunload",Bs)),x.scope=Sn(function(Se){return dt.appendChild(Se).appendChild(Be.createElement("div")),void 0!==Se.querySelectorAll&&!Se.querySelectorAll(":scope fieldset div").length}),x.attributes=Sn(function(Se){return Se.className="i",!Se.getAttribute("className")}),x.getElementsByTagName=Sn(function(Se){return Se.appendChild(Be.createComment("")),!Se.getElementsByTagName("*").length}),x.getElementsByClassName=pr.test(Be.getElementsByClassName),x.getById=Sn(function(Se){return dt.appendChild(Se).id=Tt,!Be.getElementsByName||!Be.getElementsByName(Tt).length}),x.getById?(C.filter.ID=function(Se){var je=Se.replace(oi,Gi);return function(Ne){return Ne.getAttribute("id")===je}},C.find.ID=function(Se,je){if(void 0!==je.getElementById&&Ht){var Ne=je.getElementById(Se);return Ne?[Ne]:[]}}):(C.filter.ID=function(Se){var je=Se.replace(oi,Gi);return function(Ne){var tt=void 0!==Ne.getAttributeNode&&Ne.getAttributeNode("id");return tt&&tt.value===je}},C.find.ID=function(Se,je){if(void 0!==je.getElementById&&Ht){var Ne,tt,ot,Et=je.getElementById(Se);if(Et){if((Ne=Et.getAttributeNode("id"))&&Ne.value===Se)return[Et];for(ot=je.getElementsByName(Se),tt=0;Et=ot[tt++];)if((Ne=Et.getAttributeNode("id"))&&Ne.value===Se)return[Et]}return[]}}),C.find.TAG=x.getElementsByTagName?function(Se,je){return void 0!==je.getElementsByTagName?je.getElementsByTagName(Se):x.qsa?je.querySelectorAll(Se):void 0}:function(Se,je){var Ne,tt=[],ot=0,Et=je.getElementsByTagName(Se);if("*"===Se){for(;Ne=Et[ot++];)1===Ne.nodeType&&tt.push(Ne);return tt}return Et},C.find.CLASS=x.getElementsByClassName&&function(Se,je){if(void 0!==je.getElementsByClassName&&Ht)return je.getElementsByClassName(Se)},Ln=[],St=[],(x.qsa=pr.test(Be.querySelectorAll))&&(Sn(function(Se){var je;dt.appendChild(Se).innerHTML="<a id='"+Tt+"'></a><select id='"+Tt+"-\r\\' msallowcapture=''><option selected=''></option></select>",Se.querySelectorAll("[msallowcapture^='']").length&&St.push("[*^$]="+Jt+"*(?:''|\"\")"),Se.querySelectorAll("[selected]").length||St.push("\\["+Jt+"*(?:value|"+ko+")"),Se.querySelectorAll("[id~="+Tt+"-]").length||St.push("~="),(je=Be.createElement("input")).setAttribute("name",""),Se.appendChild(je),Se.querySelectorAll("[name='']").length||St.push("\\["+Jt+"*name"+Jt+"*="+Jt+"*(?:''|\"\")"),Se.querySelectorAll(":checked").length||St.push(":checked"),Se.querySelectorAll("a#"+Tt+"+*").length||St.push(".#.+[+~]"),Se.querySelectorAll("\\\f"),St.push("[\\r\\n\\f]")}),Sn(function(Se){Se.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var je=Be.createElement("input");je.setAttribute("type","hidden"),Se.appendChild(je).setAttribute("name","D"),Se.querySelectorAll("[name=d]").length&&St.push("name"+Jt+"*[*^$|!~]?="),2!==Se.querySelectorAll(":enabled").length&&St.push(":enabled",":disabled"),dt.appendChild(Se).disabled=!0,2!==Se.querySelectorAll(":disabled").length&&St.push(":enabled",":disabled"),Se.querySelectorAll("*,:x"),St.push(",.*:")})),(x.matchesSelector=pr.test(jn=dt.matches||dt.webkitMatchesSelector||dt.mozMatchesSelector||dt.oMatchesSelector||dt.msMatchesSelector))&&Sn(function(Se){x.disconnectedMatch=jn.call(Se,"*"),jn.call(Se,"[s!='']:x"),Ln.push("!=",Lo)}),St=St.length&&new RegExp(St.join("|")),Ln=Ln.length&&new RegExp(Ln.join("|")),ce=pr.test(dt.compareDocumentPosition),jr=ce||pr.test(dt.contains)?function(Se,je){var Ne=9===Se.nodeType?Se.documentElement:Se,tt=je&&je.parentNode;return Se===tt||!(!tt||1!==tt.nodeType||!(Ne.contains?Ne.contains(tt):Se.compareDocumentPosition&&16&Se.compareDocumentPosition(tt)))}:function(Se,je){if(je)for(;je=je.parentNode;)if(je===Se)return!0;return!1},Oo=ce?function(Se,je){if(Se===je)return Ye=!0,0;var Ne=!Se.compareDocumentPosition-!je.compareDocumentPosition;return Ne||(1&(Ne=(Se.ownerDocument||Se)==(je.ownerDocument||je)?Se.compareDocumentPosition(je):1)||!x.sortDetached&&je.compareDocumentPosition(Se)===Ne?Se==Be||Se.ownerDocument==It&&jr(It,Se)?-1:je==Be||je.ownerDocument==It&&jr(It,je)?1:Oe?Ri(Oe,Se)-Ri(Oe,je):0:4&Ne?-1:1)}:function(Se,je){if(Se===je)return Ye=!0,0;var Ne,tt=0,ot=Se.parentNode,Et=je.parentNode,Pt=[Se],qe=[je];if(!ot||!Et)return Se==Be?-1:je==Be?1:ot?-1:Et?1:Oe?Ri(Oe,Se)-Ri(Oe,je):0;if(ot===Et)return _r(Se,je);for(Ne=Se;Ne=Ne.parentNode;)Pt.unshift(Ne);for(Ne=je;Ne=Ne.parentNode;)qe.unshift(Ne);for(;Pt[tt]===qe[tt];)tt++;return tt?_r(Pt[tt],qe[tt]):Pt[tt]==It?-1:qe[tt]==It?1:0}),Be},Pn.matches=function(J,ce){return Pn(J,null,null,ce)},Pn.matchesSelector=function(J,ce){if(Pe(J),x.matchesSelector&&Ht&&!ii[ce+" "]&&(!Ln||!Ln.test(ce))&&(!St||!St.test(ce)))try{var xe=jn.call(J,ce);if(xe||x.disconnectedMatch||J.document&&11!==J.document.nodeType)return xe}catch(Ve){ii(ce,!0)}return Pn(ce,Be,null,[J]).length>0},Pn.contains=function(J,ce){return(J.ownerDocument||J)!=Be&&Pe(J),jr(J,ce)},Pn.attr=function(J,ce){(J.ownerDocument||J)!=Be&&Pe(J);var xe=C.attrHandle[ce.toLowerCase()],Ve=xe&&Ui.call(C.attrHandle,ce.toLowerCase())?xe(J,ce,!Ht):void 0;return void 0!==Ve?Ve:x.attributes||!Ht?J.getAttribute(ce):(Ve=J.getAttributeNode(ce))&&Ve.specified?Ve.value:null},Pn.escape=function(J){return(J+"").replace(Zn,Ia)},Pn.error=function(J){throw new Error("Syntax error, unrecognized expression: "+J)},Pn.uniqueSort=function(J){var ce,xe=[],Ve=0,Se=0;if(Ye=!x.detectDuplicates,Oe=!x.sortStable&&J.slice(0),J.sort(Oo),Ye){for(;ce=J[Se++];)ce===J[Se]&&(Ve=xe.push(Se));for(;Ve--;)J.splice(xe[Ve],1)}return Oe=null,J},N=Pn.getText=function(J){var ce,xe="",Ve=0,Se=J.nodeType;if(Se){if(1===Se||9===Se||11===Se){if("string"==typeof J.textContent)return J.textContent;for(J=J.firstChild;J;J=J.nextSibling)xe+=N(J)}else if(3===Se||4===Se)return J.nodeValue}else for(;ce=J[Ve++];)xe+=N(ce);return xe},(C=Pn.selectors={cacheLength:50,createPseudo:an,match:Pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(J){return J[1]=J[1].replace(oi,Gi),J[3]=(J[3]||J[4]||J[5]||"").replace(oi,Gi),"~="===J[2]&&(J[3]=" "+J[3]+" "),J.slice(0,4)},CHILD:function(J){return J[1]=J[1].toLowerCase(),"nth"===J[1].slice(0,3)?(J[3]||Pn.error(J[0]),J[4]=+(J[4]?J[5]+(J[6]||1):2*("even"===J[3]||"odd"===J[3])),J[5]=+(J[7]+J[8]||"odd"===J[3])):J[3]&&Pn.error(J[0]),J},PSEUDO:function(J){var ce,xe=!J[6]&&J[2];return Pa.CHILD.test(J[0])?null:(J[3]?J[2]=J[4]||J[5]||"":xe&&Ou.test(xe)&&(ce=W(xe,!0))&&(ce=xe.indexOf(")",xe.length-ce)-xe.length)&&(J[0]=J[0].slice(0,ce),J[2]=xe.slice(0,ce)),J.slice(0,3))}},filter:{TAG:function(J){var ce=J.replace(oi,Gi).toLowerCase();return"*"===J?function(){return!0}:function(xe){return xe.nodeName&&xe.nodeName.toLowerCase()===ce}},CLASS:function(J){var ce=Fn[J+" "];return ce||(ce=new RegExp("(^|"+Jt+")"+J+"("+Jt+"|$)"))&&Fn(J,function(xe){return ce.test("string"==typeof xe.className&&xe.className||void 0!==xe.getAttribute&&xe.getAttribute("class")||"")})},ATTR:function(J,ce,xe){return function(Ve){var Se=Pn.attr(Ve,J);return null==Se?"!="===ce:!ce||(Se+="","="===ce?Se===xe:"!="===ce?Se!==xe:"^="===ce?xe&&0===Se.indexOf(xe):"*="===ce?xe&&Se.indexOf(xe)>-1:"$="===ce?xe&&Se.slice(-xe.length)===xe:"~="===ce?(" "+Se.replace(vn," ")+" ").indexOf(xe)>-1:"|="===ce&&(Se===xe||Se.slice(0,xe.length+1)===xe+"-"))}},CHILD:function(J,ce,xe,Ve,Se){var je="nth"!==J.slice(0,3),Ne="last"!==J.slice(-4),tt="of-type"===ce;return 1===Ve&&0===Se?function(ot){return!!ot.parentNode}:function(ot,Et,Pt){var qe,Zt,qt,vt,Un,Yn,Cr=je!==Ne?"nextSibling":"previousSibling",In=ot.parentNode,ea=tt&&ot.nodeName.toLowerCase(),ho=!Pt&&!tt,Ur=!1;if(In){if(je){for(;Cr;){for(vt=ot;vt=vt[Cr];)if(tt?vt.nodeName.toLowerCase()===ea:1===vt.nodeType)return!1;Yn=Cr="only"===J&&!Yn&&"nextSibling"}return!0}if(Yn=[Ne?In.firstChild:In.lastChild],Ne&&ho){for(Ur=(Un=(qe=(Zt=(qt=(vt=In)[Tt]||(vt[Tt]={}))[vt.uniqueID]||(qt[vt.uniqueID]={}))[J]||[])[0]===xr&&qe[1])&&qe[2],vt=Un&&In.childNodes[Un];vt=++Un&&vt&&vt[Cr]||(Ur=Un=0)||Yn.pop();)if(1===vt.nodeType&&++Ur&&vt===ot){Zt[J]=[xr,Un,Ur];break}}else if(ho&&(Ur=Un=(qe=(Zt=(qt=(vt=ot)[Tt]||(vt[Tt]={}))[vt.uniqueID]||(qt[vt.uniqueID]={}))[J]||[])[0]===xr&&qe[1]),!1===Ur)for(;(vt=++Un&&vt&&vt[Cr]||(Ur=Un=0)||Yn.pop())&&((tt?vt.nodeName.toLowerCase()!==ea:1!==vt.nodeType)||!++Ur||(ho&&((Zt=(qt=vt[Tt]||(vt[Tt]={}))[vt.uniqueID]||(qt[vt.uniqueID]={}))[J]=[xr,Ur]),vt!==ot)););return(Ur-=Se)===Ve||Ur%Ve==0&&Ur/Ve>=0}}},PSEUDO:function(J,ce){var xe,Ve=C.pseudos[J]||C.setFilters[J.toLowerCase()]||Pn.error("unsupported pseudo: "+J);return Ve[Tt]?Ve(ce):Ve.length>1?(xe=[J,J,"",ce],C.setFilters.hasOwnProperty(J.toLowerCase())?an(function(Se,je){for(var Ne,tt=Ve(Se,ce),ot=tt.length;ot--;)Se[Ne=Ri(Se,tt[ot])]=!(je[Ne]=tt[ot])}):function(Se){return Ve(Se,0,xe)}):Ve}},pseudos:{not:an(function(J){var ce=[],xe=[],Ve=se(J.replace(ln,"$1"));return Ve[Tt]?an(function(Se,je,Ne,tt){for(var ot,Et=Ve(Se,null,tt,[]),Pt=Se.length;Pt--;)(ot=Et[Pt])&&(Se[Pt]=!(je[Pt]=ot))}):function(Se,je,Ne){return ce[0]=Se,Ve(ce,null,Ne,xe),ce[0]=null,!xe.pop()}}),has:an(function(J){return function(ce){return Pn(J,ce).length>0}}),contains:an(function(J){return J=J.replace(oi,Gi),function(ce){return(ce.textContent||N(ce)).indexOf(J)>-1}}),lang:an(function(J){return ku.test(J||"")||Pn.error("unsupported lang: "+J),J=J.replace(oi,Gi).toLowerCase(),function(ce){var xe;do{if(xe=Ht?ce.lang:ce.getAttribute("xml:lang")||ce.getAttribute("lang"))return(xe=xe.toLowerCase())===J||0===xe.indexOf(J+"-")}while((ce=ce.parentNode)&&1===ce.nodeType);return!1}}),target:function(J){var ce=c.location&&c.location.hash;return ce&&ce.slice(1)===J.id},root:function(J){return J===dt},focus:function(J){return J===Be.activeElement&&(!Be.hasFocus||Be.hasFocus())&&!!(J.type||J.href||~J.tabIndex)},enabled:js(!1),disabled:js(!0),checked:function(J){var ce=J.nodeName.toLowerCase();return"input"===ce&&!!J.checked||"option"===ce&&!!J.selected},selected:function(J){return!0===J.selected},empty:function(J){for(J=J.firstChild;J;J=J.nextSibling)if(J.nodeType<6)return!1;return!0},parent:function(J){return!C.pseudos.empty(J)},header:function(J){return gs.test(J.nodeName)},input:function(J){return Yl.test(J.nodeName)},button:function(J){var ce=J.nodeName.toLowerCase();return"input"===ce&&"button"===J.type||"button"===ce},text:function(J){var ce;return"input"===J.nodeName.toLowerCase()&&"text"===J.type&&(null==(ce=J.getAttribute("type"))||"text"===ce.toLowerCase())},first:mi(function(){return[0]}),last:mi(function(J,ce){return[ce-1]}),eq:mi(function(J,ce,xe){return[xe<0?xe+ce:xe]}),even:mi(function(J,ce){for(var xe=0;xe<ce;xe+=2)J.push(xe);return J}),odd:mi(function(J,ce){for(var xe=1;xe<ce;xe+=2)J.push(xe);return J}),lt:mi(function(J,ce,xe){for(var Ve=xe<0?xe+ce:xe>ce?ce:xe;--Ve>=0;)J.push(Ve);return J}),gt:mi(function(J,ce,xe){for(var Ve=xe<0?xe+ce:xe;++Ve<ce;)J.push(Ve);return J})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[p]=Hs(p);for(p in{submit:!0,reset:!0})C.pseudos[p]=Wi(p);function He(){}function Me(J){for(var ce=0,xe=J.length,Ve="";ce<xe;ce++)Ve+=J[ce].value;return Ve}function ct(J,ce,xe){var Ve=ce.dir,Se=ce.next,je=Se||Ve,Ne=xe&&"parentNode"===je,tt=un++;return ce.first?function(ot,Et,Pt){for(;ot=ot[Ve];)if(1===ot.nodeType||Ne)return J(ot,Et,Pt);return!1}:function(ot,Et,Pt){var qe,Zt,qt,vt=[xr,tt];if(Pt){for(;ot=ot[Ve];)if((1===ot.nodeType||Ne)&&J(ot,Et,Pt))return!0}else for(;ot=ot[Ve];)if(1===ot.nodeType||Ne)if(Zt=(qt=ot[Tt]||(ot[Tt]={}))[ot.uniqueID]||(qt[ot.uniqueID]={}),Se&&Se===ot.nodeName.toLowerCase())ot=ot[Ve]||ot;else{if((qe=Zt[je])&&qe[0]===xr&&qe[1]===tt)return vt[2]=qe[2];if(Zt[je]=vt,vt[2]=J(ot,Et,Pt))return!0}return!1}}function Vt(J){return J.length>1?function(ce,xe,Ve){for(var Se=J.length;Se--;)if(!J[Se](ce,xe,Ve))return!1;return!0}:J[0]}function zn(J,ce,xe,Ve,Se){for(var je,Ne=[],tt=0,ot=J.length,Et=null!=ce;tt<ot;tt++)(je=J[tt])&&(!xe||xe(je,Ve,Se))&&(Ne.push(je),Et&&ce.push(tt));return Ne}function _n(J,ce,xe,Ve,Se,je){return Ve&&!Ve[Tt]&&(Ve=_n(Ve)),Se&&!Se[Tt]&&(Se=_n(Se,je)),an(function(Ne,tt,ot,Et){var Pt,qe,Zt,qt=[],vt=[],Un=tt.length,Yn=Ne||function cn(J,ce,xe){for(var Ve=0,Se=ce.length;Ve<Se;Ve++)Pn(J,ce[Ve],xe);return xe}(ce||"*",ot.nodeType?[ot]:ot,[]),Cr=!J||!Ne&&ce?Yn:zn(Yn,qt,J,ot,Et),In=xe?Se||(Ne?J:Un||Ve)?[]:tt:Cr;if(xe&&xe(Cr,In,ot,Et),Ve)for(Pt=zn(In,vt),Ve(Pt,[],ot,Et),qe=Pt.length;qe--;)(Zt=Pt[qe])&&(In[vt[qe]]=!(Cr[vt[qe]]=Zt));if(Ne){if(Se||J){if(Se){for(Pt=[],qe=In.length;qe--;)(Zt=In[qe])&&Pt.push(Cr[qe]=Zt);Se(null,In=[],Pt,Et)}for(qe=In.length;qe--;)(Zt=In[qe])&&(Pt=Se?Ri(Ne,Zt):qt[qe])>-1&&(Ne[Pt]=!(tt[Pt]=Zt))}}else In=zn(In===tt?In.splice(Un,In.length):In),Se?Se(null,tt,In,Et):gi.apply(tt,In)})}function Ro(J){for(var ce,xe,Ve,Se=J.length,je=C.relative[J[0].type],Ne=je||C.relative[" "],tt=je?1:0,ot=ct(function(qe){return qe===ce},Ne,!0),Et=ct(function(qe){return Ri(ce,qe)>-1},Ne,!0),Pt=[function(qe,Zt,qt){var vt=!je&&(qt||Zt!==be)||((ce=Zt).nodeType?ot(qe,Zt,qt):Et(qe,Zt,qt));return ce=null,vt}];tt<Se;tt++)if(xe=C.relative[J[tt].type])Pt=[ct(Vt(Pt),xe)];else{if((xe=C.filter[J[tt].type].apply(null,J[tt].matches))[Tt]){for(Ve=++tt;Ve<Se&&!C.relative[J[Ve].type];Ve++);return _n(tt>1&&Vt(Pt),tt>1&&Me(J.slice(0,tt-1).concat({value:" "===J[tt-2].type?"*":""})).replace(ln,"$1"),xe,tt<Ve&&Ro(J.slice(tt,Ve)),Ve<Se&&Ro(J=J.slice(Ve)),Ve<Se&&Me(J))}Pt.push(xe)}return Vt(Pt)}return He.prototype=C.filters=C.pseudos,C.setFilters=new He,W=Pn.tokenize=function(J,ce){var xe,Ve,Se,je,Ne,tt,ot,Et=ar[J+" "];if(Et)return ce?0:Et.slice(0);for(Ne=J,tt=[],ot=C.preFilter;Ne;){for(je in(!xe||(Ve=Qt.exec(Ne)))&&(Ve&&(Ne=Ne.slice(Ve[0].length)||Ne),tt.push(Se=[])),xe=!1,(Ve=Ea.exec(Ne))&&(xe=Ve.shift(),Se.push({value:xe,type:Ve[0].replace(ln," ")}),Ne=Ne.slice(xe.length)),C.filter)(Ve=Pa[je].exec(Ne))&&(!ot[je]||(Ve=ot[je](Ve)))&&(xe=Ve.shift(),Se.push({value:xe,type:je,matches:Ve}),Ne=Ne.slice(xe.length));if(!xe)break}return ce?Ne.length:Ne?Pn.error(J):ar(J,tt).slice(0)},se=Pn.compile=function(J,ce){var xe,Ve=[],Se=[],je=ps[J+" "];if(!je){for(ce||(ce=W(J)),xe=ce.length;xe--;)(je=Ro(ce[xe]))[Tt]?Ve.push(je):Se.push(je);je=ps(J,function fo(J,ce){var xe=ce.length>0,Ve=J.length>0,Se=function(je,Ne,tt,ot,Et){var Pt,qe,Zt,qt=0,vt="0",Un=je&&[],Yn=[],Cr=be,In=je||Ve&&C.find.TAG("*",Et),ea=xr+=null==Cr?1:Math.random()||.1,ho=In.length;for(Et&&(be=Ne==Be||Ne||Et);vt!==ho&&null!=(Pt=In[vt]);vt++){if(Ve&&Pt){for(qe=0,!Ne&&Pt.ownerDocument!=Be&&(Pe(Pt),tt=!Ht);Zt=J[qe++];)if(Zt(Pt,Ne||Be,tt)){ot.push(Pt);break}Et&&(xr=ea)}xe&&((Pt=!Zt&&Pt)&&qt--,je&&Un.push(Pt))}if(qt+=vt,xe&&vt!==qt){for(qe=0;Zt=ce[qe++];)Zt(Un,Yn,Ne,tt);if(je){if(qt>0)for(;vt--;)Un[vt]||Yn[vt]||(Yn[vt]=_t.call(ot));Yn=zn(Yn)}gi.apply(ot,Yn),Et&&!je&&Yn.length>0&&qt+ce.length>1&&Pn.uniqueSort(ot)}return Et&&(xr=ea,be=Cr),Un};return xe?an(Se):Se}(Se,Ve)),je.selector=J}return je},ue=Pn.select=function(J,ce,xe,Ve){var Se,je,Ne,tt,ot,Et="function"==typeof J&&J,Pt=!Ve&&W(J=Et.selector||J);if(xe=xe||[],1===Pt.length){if((je=Pt[0]=Pt[0].slice(0)).length>2&&"ID"===(Ne=je[0]).type&&9===ce.nodeType&&Ht&&C.relative[je[1].type]){if(!(ce=(C.find.ID(Ne.matches[0].replace(oi,Gi),ce)||[])[0]))return xe;Et&&(ce=ce.parentNode),J=J.slice(je.shift().value.length)}for(Se=Pa.needsContext.test(J)?0:je.length;Se--&&!C.relative[tt=(Ne=je[Se]).type];)if((ot=C.find[tt])&&(Ve=ot(Ne.matches[0].replace(oi,Gi),lo.test(je[0].type)&&Ce(ce.parentNode)||ce))){if(je.splice(Se,1),!(J=Ve.length&&Me(je)))return gi.apply(xe,Ve),xe;break}}return(Et||se(J,Pt))(Ve,ce,!Ht,xe,!ce||lo.test(J)&&Ce(ce.parentNode)||ce),xe},x.sortStable=Tt.split("").sort(Oo).join("")===Tt,x.detectDuplicates=!!Ye,Pe(),x.sortDetached=Sn(function(J){return 1&J.compareDocumentPosition(Be.createElement("fieldset"))}),Sn(function(J){return J.innerHTML="<a href='#'></a>","#"===J.firstChild.getAttribute("href")})||co("type|href|height|width",function(J,ce,xe){if(!xe)return J.getAttribute(ce,"type"===ce.toLowerCase()?1:2)}),(!x.attributes||!Sn(function(J){return J.innerHTML="<input/>",J.firstChild.setAttribute("value",""),""===J.firstChild.getAttribute("value")}))&&co("value",function(J,ce,xe){if(!xe&&"input"===J.nodeName.toLowerCase())return J.defaultValue}),Sn(function(J){return null==J.getAttribute("disabled")})||co(ko,function(J,ce,xe){var Ve;if(!xe)return!0===J[ce]?ce.toLowerCase():(Ve=J.getAttributeNode(ce))&&Ve.specified?Ve.value:null}),Pn}(m);_.find=$e,_.expr=$e.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=$e.uniqueSort,_.text=$e.getText,_.isXMLDoc=$e.isXML,_.contains=$e.contains,_.escapeSelector=$e.escape;var We=function(c,p,x){for(var C=[],N=void 0!==x;(c=c[p])&&9!==c.nodeType;)if(1===c.nodeType){if(N&&_(c).is(x))break;C.push(c)}return C},Ke=function(c,p){for(var x=[];c;c=c.nextSibling)1===c.nodeType&&c!==p&&x.push(c);return x},Ze=_.expr.match.needsContext;function st(c,p){return c.nodeName&&c.nodeName.toLowerCase()===p.toLowerCase()}var mt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Nt(c,p,x){return ae(p)?_.grep(c,function(C,N){return!!p.call(C,N,C)!==x}):p.nodeType?_.grep(c,function(C){return C===p!==x}):"string"!=typeof p?_.grep(c,function(C){return B.call(p,C)>-1!==x}):_.filter(p,c,x)}_.filter=function(c,p,x){var C=p[0];return x&&(c=":not("+c+")"),1===p.length&&1===C.nodeType?_.find.matchesSelector(C,c)?[C]:[]:_.find.matches(c,_.grep(p,function(N){return 1===N.nodeType}))},_.fn.extend({find:function(c){var p,x,C=this.length,N=this;if("string"!=typeof c)return this.pushStack(_(c).filter(function(){for(p=0;p<C;p++)if(_.contains(N[p],this))return!0}));for(x=this.pushStack([]),p=0;p<C;p++)_.find(c,N[p],x);return C>1?_.uniqueSort(x):x},filter:function(c){return this.pushStack(Nt(this,c||[],!1))},not:function(c){return this.pushStack(Nt(this,c||[],!0))},is:function(c){return!!Nt(this,"string"==typeof c&&Ze.test(c)?_(c):c||[],!1).length}});var Ut,Ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,On=_.fn.init=function(c,p,x){var C,N;if(!c)return this;if(x=x||Ut,"string"==typeof c){if(!(C="<"===c[0]&&">"===c[c.length-1]&&c.length>=3?[null,c,null]:Ct.exec(c))||!C[1]&&p)return!p||p.jquery?(p||x).find(c):this.constructor(p).find(c);if(C[1]){if(_.merge(this,_.parseHTML(C[1],(p=p instanceof _?p[0]:p)&&p.nodeType?p.ownerDocument||p:de,!0)),mt.test(C[1])&&_.isPlainObject(p))for(C in p)ae(this[C])?this[C](p[C]):this.attr(C,p[C]);return this}return(N=de.getElementById(C[2]))&&(this[0]=N,this.length=1),this}return c.nodeType?(this[0]=c,this.length=1,this):ae(c)?void 0!==x.ready?x.ready(c):c(_):_.makeArray(c,this)};On.prototype=_.fn,Ut=_(de);var gr=/^(?:parents|prev(?:Until|All))/,Dr={children:!0,contents:!0,next:!0,prev:!0};function tr(c,p){for(;(c=c[p])&&1!==c.nodeType;);return c}_.fn.extend({has:function(c){var p=_(c,this),x=p.length;return this.filter(function(){for(var C=0;C<x;C++)if(_.contains(this,p[C]))return!0})},closest:function(c,p){var x,C=0,N=this.length,D=[],W="string"!=typeof c&&_(c);if(!Ze.test(c))for(;C<N;C++)for(x=this[C];x&&x!==p;x=x.parentNode)if(x.nodeType<11&&(W?W.index(x)>-1:1===x.nodeType&&_.find.matchesSelector(x,c))){D.push(x);break}return this.pushStack(D.length>1?_.uniqueSort(D):D)},index:function(c){return c?"string"==typeof c?B.call(_(c),this[0]):B.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,p){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(c,p))))},addBack:function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))}}),_.each({parent:function(c){var p=c.parentNode;return p&&11!==p.nodeType?p:null},parents:function(c){return We(c,"parentNode")},parentsUntil:function(c,p,x){return We(c,"parentNode",x)},next:function(c){return tr(c,"nextSibling")},prev:function(c){return tr(c,"previousSibling")},nextAll:function(c){return We(c,"nextSibling")},prevAll:function(c){return We(c,"previousSibling")},nextUntil:function(c,p,x){return We(c,"nextSibling",x)},prevUntil:function(c,p,x){return We(c,"previousSibling",x)},siblings:function(c){return Ke((c.parentNode||{}).firstChild,c)},children:function(c){return Ke(c.firstChild)},contents:function(c){return null!=c.contentDocument&&b(c.contentDocument)?c.contentDocument:(st(c,"template")&&(c=c.content||c),_.merge([],c.childNodes))}},function(c,p){_.fn[c]=function(x,C){var N=_.map(this,p,x);return"Until"!==c.slice(-5)&&(C=x),C&&"string"==typeof C&&(N=_.filter(C,N)),this.length>1&&(Dr[c]||_.uniqueSort(N),gr.test(c)&&N.reverse()),this.pushStack(N)}});var Wn=/[^\x20\t\r\n\f]+/g;function Nn(c){return c}function Re(c){throw c}function Ue(c,p,x,C){var N;try{c&&ae(N=c.promise)?N.call(c).done(p).fail(x):c&&ae(N=c.then)?N.call(c,p,x):p.apply(void 0,[c].slice(C))}catch(D){x.apply(void 0,[D])}}_.Callbacks=function(c){c="string"==typeof c?function vr(c){var p={};return _.each(c.match(Wn)||[],function(x,C){p[C]=!0}),p}(c):_.extend({},c);var p,x,C,N,D=[],W=[],se=-1,ue=function(){for(N=N||c.once,C=p=!0;W.length;se=-1)for(x=W.shift();++se<D.length;)!1===D[se].apply(x[0],x[1])&&c.stopOnFalse&&(se=D.length,x=!1);c.memory||(x=!1),p=!1,N&&(D=x?[]:"")},be={add:function(){return D&&(x&&!p&&(se=D.length-1,W.push(x)),function Oe(Ye){_.each(Ye,function(Pe,Be){ae(Be)?(!c.unique||!be.has(Be))&&D.push(Be):Be&&Be.length&&"string"!==we(Be)&&Oe(Be)})}(arguments),x&&!p&&ue()),this},remove:function(){return _.each(arguments,function(Oe,Ye){for(var Pe;(Pe=_.inArray(Ye,D,Pe))>-1;)D.splice(Pe,1),Pe<=se&&se--}),this},has:function(Oe){return Oe?_.inArray(Oe,D)>-1:D.length>0},empty:function(){return D&&(D=[]),this},disable:function(){return N=W=[],D=x="",this},disabled:function(){return!D},lock:function(){return N=W=[],!x&&!p&&(D=x=""),this},locked:function(){return!!N},fireWith:function(Oe,Ye){return N||(Ye=[Oe,(Ye=Ye||[]).slice?Ye.slice():Ye],W.push(Ye),p||ue()),this},fire:function(){return be.fireWith(this,arguments),this},fired:function(){return!!C}};return be},_.extend({Deferred:function(c){var p=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],x="pending",C={state:function(){return x},always:function(){return N.done(arguments).fail(arguments),this},catch:function(D){return C.then(null,D)},pipe:function(){var D=arguments;return _.Deferred(function(W){_.each(p,function(se,ue){var be=ae(D[ue[4]])&&D[ue[4]];N[ue[1]](function(){var Oe=be&&be.apply(this,arguments);Oe&&ae(Oe.promise)?Oe.promise().progress(W.notify).done(W.resolve).fail(W.reject):W[ue[0]+"With"](this,be?[Oe]:arguments)})}),D=null}).promise()},then:function(D,W,se){var ue=0;function be(Oe,Ye,Pe,Be){return function(){var dt=this,Ht=arguments,St=function(){var jn,jr;if(!(Oe<ue)){if((jn=Pe.apply(dt,Ht))===Ye.promise())throw new TypeError("Thenable self-resolution");ae(jr=jn&&("object"==typeof jn||"function"==typeof jn)&&jn.then)?Be?jr.call(jn,be(ue,Ye,Nn,Be),be(ue,Ye,Re,Be)):(ue++,jr.call(jn,be(ue,Ye,Nn,Be),be(ue,Ye,Re,Be),be(ue,Ye,Nn,Ye.notifyWith))):(Pe!==Nn&&(dt=void 0,Ht=[jn]),(Be||Ye.resolveWith)(dt,Ht))}},Ln=Be?St:function(){try{St()}catch(jn){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(jn,Ln.stackTrace),Oe+1>=ue&&(Pe!==Re&&(dt=void 0,Ht=[jn]),Ye.rejectWith(dt,Ht))}};Oe?Ln():(_.Deferred.getStackHook&&(Ln.stackTrace=_.Deferred.getStackHook()),m.setTimeout(Ln))}}return _.Deferred(function(Oe){p[0][3].add(be(0,Oe,ae(se)?se:Nn,Oe.notifyWith)),p[1][3].add(be(0,Oe,ae(D)?D:Nn)),p[2][3].add(be(0,Oe,ae(W)?W:Re))}).promise()},promise:function(D){return null!=D?_.extend(D,C):C}},N={};return _.each(p,function(D,W){var se=W[2],ue=W[5];C[W[1]]=se.add,ue&&se.add(function(){x=ue},p[3-D][2].disable,p[3-D][3].disable,p[0][2].lock,p[0][3].lock),se.add(W[3].fire),N[W[0]]=function(){return N[W[0]+"With"](this===N?void 0:this,arguments),this},N[W[0]+"With"]=se.fireWith}),C.promise(N),c&&c.call(N,N),N},when:function(c){var p=arguments.length,x=p,C=Array(x),N=I.call(arguments),D=_.Deferred(),W=function(se){return function(ue){C[se]=this,N[se]=arguments.length>1?I.call(arguments):ue,--p||D.resolveWith(C,N)}};if(p<=1&&(Ue(c,D.done(W(x)).resolve,D.reject,!p),"pending"===D.state()||ae(N[x]&&N[x].then)))return D.then();for(;x--;)Ue(N[x],W(x),D.reject);return D.promise()}});var Qe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(c,p){m.console&&m.console.warn&&c&&Qe.test(c.name)&&m.console.warn("jQuery.Deferred exception: "+c.message,c.stack,p)},_.readyException=function(c){m.setTimeout(function(){throw c})};var lt=_.Deferred();function wt(){de.removeEventListener("DOMContentLoaded",wt),m.removeEventListener("load",wt),_.ready()}_.fn.ready=function(c){return lt.then(c).catch(function(p){_.readyException(p)}),this},_.extend({isReady:!1,readyWait:1,ready:function(c){(!0===c?--_.readyWait:_.isReady)||(_.isReady=!0,!(!0!==c&&--_.readyWait>0)&&lt.resolveWith(de,[_]))}}),_.ready.then=lt.then,"complete"===de.readyState||"loading"!==de.readyState&&!de.documentElement.doScroll?m.setTimeout(_.ready):(de.addEventListener("DOMContentLoaded",wt),m.addEventListener("load",wt));var zt=function(c,p,x,C,N,D,W){var se=0,ue=c.length,be=null==x;if("object"===we(x))for(se in N=!0,x)zt(c,p,se,x[se],!0,D,W);else if(void 0!==C&&(N=!0,ae(C)||(W=!0),be&&(W?(p.call(c,C),p=null):(be=p,p=function(Oe,Ye,Pe){return be.call(_(Oe),Pe)})),p))for(;se<ue;se++)p(c[se],x,W?C:C.call(c[se],se,p(c[se],x)));return N?c:be?p.call(c):ue?p(c[0],x):D},yt=/^-ms-/,Bn=/-([a-z])/g;function fi(c,p){return p.toUpperCase()}function Gt(c){return c.replace(yt,"ms-").replace(Bn,fi)}var Dt=function(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType};function L(){this.expando=_.expando+L.uid++}L.uid=1,L.prototype={cache:function(c){var p=c[this.expando];return p||(p={},Dt(c)&&(c.nodeType?c[this.expando]=p:Object.defineProperty(c,this.expando,{value:p,configurable:!0}))),p},set:function(c,p,x){var C,N=this.cache(c);if("string"==typeof p)N[Gt(p)]=x;else for(C in p)N[Gt(C)]=p[C];return N},get:function(c,p){return void 0===p?this.cache(c):c[this.expando]&&c[this.expando][Gt(p)]},access:function(c,p,x){return void 0===p||p&&"string"==typeof p&&void 0===x?this.get(c,p):(this.set(c,p,x),void 0!==x?x:p)},remove:function(c,p){var x,C=c[this.expando];if(void 0!==C){if(void 0!==p)for((x=(p=Array.isArray(p)?p.map(Gt):(p=Gt(p))in C?[p]:p.match(Wn)||[]).length);x--;)delete C[p[x]];(void 0===p||_.isEmptyObject(C))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var p=c[this.expando];return void 0!==p&&!_.isEmptyObject(p)}};var U=new L,te=new L,me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fe=/[A-Z]/g;function rt(c,p,x){var C;if(void 0===x&&1===c.nodeType)if(C="data-"+p.replace(Fe,"-$&").toLowerCase(),"string"==typeof(x=c.getAttribute(C))){try{x=function De(c){return"true"===c||"false"!==c&&("null"===c?null:c===+c+""?+c:me.test(c)?JSON.parse(c):c)}(x)}catch(N){}te.set(c,p,x)}else x=void 0;return x}_.extend({hasData:function(c){return te.hasData(c)||U.hasData(c)},data:function(c,p,x){return te.access(c,p,x)},removeData:function(c,p){te.remove(c,p)},_data:function(c,p,x){return U.access(c,p,x)},_removeData:function(c,p){U.remove(c,p)}}),_.fn.extend({data:function(c,p){var x,C,N,D=this[0],W=D&&D.attributes;if(void 0===c){if(this.length&&(N=te.get(D),1===D.nodeType&&!U.get(D,"hasDataAttrs"))){for(x=W.length;x--;)W[x]&&0===(C=W[x].name).indexOf("data-")&&(C=Gt(C.slice(5)),rt(D,C,N[C]));U.set(D,"hasDataAttrs",!0)}return N}return"object"==typeof c?this.each(function(){te.set(this,c)}):zt(this,function(se){var ue;if(D&&void 0===se)return void 0!==(ue=te.get(D,c))||void 0!==(ue=rt(D,c))?ue:void 0;this.each(function(){te.set(this,c,se)})},null,p,arguments.length>1,null,!0)},removeData:function(c){return this.each(function(){te.remove(this,c)})}}),_.extend({queue:function(c,p,x){var C;if(c)return C=U.get(c,p=(p||"fx")+"queue"),x&&(!C||Array.isArray(x)?C=U.access(c,p,_.makeArray(x)):C.push(x)),C||[]},dequeue:function(c,p){var x=_.queue(c,p=p||"fx"),C=x.length,N=x.shift(),D=_._queueHooks(c,p);"inprogress"===N&&(N=x.shift(),C--),N&&("fx"===p&&x.unshift("inprogress"),delete D.stop,N.call(c,function(){_.dequeue(c,p)},D)),!C&&D&&D.empty.fire()},_queueHooks:function(c,p){var x=p+"queueHooks";return U.get(c,x)||U.access(c,x,{empty:_.Callbacks("once memory").add(function(){U.remove(c,[p+"queue",x])})})}}),_.fn.extend({queue:function(c,p){var x=2;return"string"!=typeof c&&(p=c,c="fx",x--),arguments.length<x?_.queue(this[0],c):void 0===p?this:this.each(function(){var C=_.queue(this,c,p);_._queueHooks(this,c),"fx"===c&&"inprogress"!==C[0]&&_.dequeue(this,c)})},dequeue:function(c){return this.each(function(){_.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,p){var x,C=1,N=_.Deferred(),D=this,W=this.length,se=function(){--C||N.resolveWith(D,[D])};for("string"!=typeof c&&(p=c,c=void 0),c=c||"fx";W--;)(x=U.get(D[W],c+"queueHooks"))&&x.empty&&(C++,x.empty.add(se));return se(),N.promise(p)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,bt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),Kt=["Top","Right","Bottom","Left"],on=de.documentElement,Wt=function(c){return _.contains(c.ownerDocument,c)},Hn={composed:!0};on.getRootNode&&(Wt=function(c){return _.contains(c.ownerDocument,c)||c.getRootNode(Hn)===c.ownerDocument});var kn=function(c,p){return"none"===(c=p||c).style.display||""===c.style.display&&Wt(c)&&"none"===_.css(c,"display")};function Fr(c,p,x,C){var N,D,W=20,se=C?function(){return C.cur()}:function(){return _.css(c,p,"")},ue=se(),be=x&&x[3]||(_.cssNumber[p]?"":"px"),Oe=c.nodeType&&(_.cssNumber[p]||"px"!==be&&+ue)&&bt.exec(_.css(c,p));if(Oe&&Oe[3]!==be){for(be=be||Oe[3],Oe=+(ue/=2)||1;W--;)_.style(c,p,Oe+be),(1-D)*(1-(D=se()/ue||.5))<=0&&(W=0),Oe/=D;_.style(c,p,(Oe*=2)+be),x=x||[]}return x&&(Oe=+Oe||+ue||0,N=x[1]?Oe+(x[1]+1)*x[2]:+x[2],C&&(C.unit=be,C.start=Oe,C.end=N)),N}var xn={};function pt(c){var p,x=c.ownerDocument,C=c.nodeName,N=xn[C];return N||(p=x.body.appendChild(x.createElement(C)),N=_.css(p,"display"),p.parentNode.removeChild(p),"none"===N&&(N="block"),xn[C]=N,N)}function En(c,p){for(var x,C,N=[],D=0,W=c.length;D<W;D++)(C=c[D]).style&&(x=C.style.display,p?("none"===x&&(N[D]=U.get(C,"display")||null,N[D]||(C.style.display="")),""===C.style.display&&kn(C)&&(N[D]=pt(C))):"none"!==x&&(N[D]="none",U.set(C,"display",x)));for(D=0;D<W;D++)null!=N[D]&&(c[D].style.display=N[D]);return c}_.fn.extend({show:function(){return En(this,!0)},hide:function(){return En(this)},toggle:function(c){return"boolean"==typeof c?c?this.show():this.hide():this.each(function(){kn(this)?_(this).show():_(this).hide()})}});var p,x,Dn=/^(?:checkbox|radio)$/i,nr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Vr=/^$|^module$|\/(?:java|ecma)script/i;p=de.createDocumentFragment().appendChild(de.createElement("div")),(x=de.createElement("input")).setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),p.appendChild(x),o.checkClone=p.cloneNode(!0).cloneNode(!0).lastChild.checked,p.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!p.cloneNode(!0).lastChild.defaultValue,p.innerHTML="<option></option>",o.option=!!p.lastChild;var Jn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function $n(c,p){var x;return x=void 0!==c.getElementsByTagName?c.getElementsByTagName(p||"*"):void 0!==c.querySelectorAll?c.querySelectorAll(p||"*"):[],void 0===p||p&&st(c,p)?_.merge([c],x):x}function wo(c,p){for(var x=0,C=c.length;x<C;x++)U.set(c[x],"globalEval",!p||U.get(p[x],"globalEval"))}Jn.tbody=Jn.tfoot=Jn.colgroup=Jn.caption=Jn.thead,Jn.th=Jn.td,o.option||(Jn.optgroup=Jn.option=[1,"<select multiple='multiple'>","</select>"]);var ga=/<|&#?\w+;/;function ro(c,p,x,C,N){for(var D,W,se,ue,be,Oe,Ye=p.createDocumentFragment(),Pe=[],Be=0,dt=c.length;Be<dt;Be++)if((D=c[Be])||0===D)if("object"===we(D))_.merge(Pe,D.nodeType?[D]:D);else if(ga.test(D)){for(W=W||Ye.appendChild(p.createElement("div")),se=(nr.exec(D)||["",""])[1].toLowerCase(),W.innerHTML=(ue=Jn[se]||Jn._default)[1]+_.htmlPrefilter(D)+ue[2],Oe=ue[0];Oe--;)W=W.lastChild;_.merge(Pe,W.childNodes),(W=Ye.firstChild).textContent=""}else Pe.push(p.createTextNode(D));for(Ye.textContent="",Be=0;D=Pe[Be++];)if(C&&_.inArray(D,C)>-1)N&&N.push(D);else if(be=Wt(D),W=$n(Ye.appendChild(D),"script"),be&&wo(W),x)for(Oe=0;D=W[Oe++];)Vr.test(D.type||"")&&x.push(D);return Ye}var So=/^([^.]*)(?:\.(.+)|)/;function ge(){return!0}function Xr(){return!1}function Vi(c,p){return c===function To(){try{return de.activeElement}catch(c){}}()==("focus"===p)}function ut(c,p,x,C,N,D){var W,se;if("object"==typeof p){for(se in"string"!=typeof x&&(C=C||x,x=void 0),p)ut(c,se,x,C,p[se],D);return c}if(null==C&&null==N?(N=x,C=x=void 0):null==N&&("string"==typeof x?(N=C,C=void 0):(N=C,C=x,x=void 0)),!1===N)N=Xr;else if(!N)return c;return 1===D&&(W=N,N=function(ue){return _().off(ue),W.apply(this,arguments)},N.guid=W.guid||(W.guid=_.guid++)),c.each(function(){_.event.add(this,p,N,C,x)})}function Br(c,p,x){x?(U.set(c,p,!1),_.event.add(c,p,{namespace:!1,handler:function(C){var N,D,W=U.get(this,p);if(1&C.isTrigger&&this[p]){if(W.length)(_.event.special[p]||{}).delegateType&&C.stopPropagation();else if(W=I.call(arguments),U.set(this,p,W),N=x(this,p),this[p](),W!==(D=U.get(this,p))||N?U.set(this,p,!1):D={},W!==D)return C.stopImmediatePropagation(),C.preventDefault(),D&&D.value}else W.length&&(U.set(this,p,{value:_.event.trigger(_.extend(W[0],_.Event.prototype),W.slice(1),this)}),C.stopImmediatePropagation())}})):void 0===U.get(c,p)&&_.event.add(c,p,ge)}_.event={global:{},add:function(c,p,x,C,N){var D,W,se,ue,be,Oe,Ye,Pe,Be,dt,Ht,St=U.get(c);if(Dt(c))for(x.handler&&(x=(D=x).handler,N=D.selector),N&&_.find.matchesSelector(on,N),x.guid||(x.guid=_.guid++),(ue=St.events)||(ue=St.events=Object.create(null)),(W=St.handle)||(W=St.handle=function(Ln){return void 0!==_&&_.event.triggered!==Ln.type?_.event.dispatch.apply(c,arguments):void 0}),be=(p=(p||"").match(Wn)||[""]).length;be--;)Be=Ht=(se=So.exec(p[be])||[])[1],dt=(se[2]||"").split(".").sort(),Be&&(Ye=_.event.special[Be]||{},Ye=_.event.special[Be=(N?Ye.delegateType:Ye.bindType)||Be]||{},Oe=_.extend({type:Be,origType:Ht,data:C,handler:x,guid:x.guid,selector:N,needsContext:N&&_.expr.match.needsContext.test(N),namespace:dt.join(".")},D),(Pe=ue[Be])||((Pe=ue[Be]=[]).delegateCount=0,(!Ye.setup||!1===Ye.setup.call(c,C,dt,W))&&c.addEventListener&&c.addEventListener(Be,W)),Ye.add&&(Ye.add.call(c,Oe),Oe.handler.guid||(Oe.handler.guid=x.guid)),N?Pe.splice(Pe.delegateCount++,0,Oe):Pe.push(Oe),_.event.global[Be]=!0)},remove:function(c,p,x,C,N){var D,W,se,ue,be,Oe,Ye,Pe,Be,dt,Ht,St=U.hasData(c)&&U.get(c);if(St&&(ue=St.events)){for(be=(p=(p||"").match(Wn)||[""]).length;be--;)if(Be=Ht=(se=So.exec(p[be])||[])[1],dt=(se[2]||"").split(".").sort(),Be){for(Ye=_.event.special[Be]||{},Pe=ue[Be=(C?Ye.delegateType:Ye.bindType)||Be]||[],se=se[2]&&new RegExp("(^|\\.)"+dt.join("\\.(?:.*\\.|)")+"(\\.|$)"),W=D=Pe.length;D--;)Oe=Pe[D],(N||Ht===Oe.origType)&&(!x||x.guid===Oe.guid)&&(!se||se.test(Oe.namespace))&&(!C||C===Oe.selector||"**"===C&&Oe.selector)&&(Pe.splice(D,1),Oe.selector&&Pe.delegateCount--,Ye.remove&&Ye.remove.call(c,Oe));W&&!Pe.length&&((!Ye.teardown||!1===Ye.teardown.call(c,dt,St.handle))&&_.removeEvent(c,Be,St.handle),delete ue[Be])}else for(Be in ue)_.event.remove(c,Be+p[be],x,C,!0);_.isEmptyObject(ue)&&U.remove(c,"handle events")}},dispatch:function(c){var p,x,C,N,D,W,se=new Array(arguments.length),ue=_.event.fix(c),be=(U.get(this,"events")||Object.create(null))[ue.type]||[],Oe=_.event.special[ue.type]||{};for(se[0]=ue,p=1;p<arguments.length;p++)se[p]=arguments[p];if(ue.delegateTarget=this,!Oe.preDispatch||!1!==Oe.preDispatch.call(this,ue)){for(W=_.event.handlers.call(this,ue,be),p=0;(N=W[p++])&&!ue.isPropagationStopped();)for(ue.currentTarget=N.elem,x=0;(D=N.handlers[x++])&&!ue.isImmediatePropagationStopped();)(!ue.rnamespace||!1===D.namespace||ue.rnamespace.test(D.namespace))&&(ue.handleObj=D,ue.data=D.data,void 0!==(C=((_.event.special[D.origType]||{}).handle||D.handler).apply(N.elem,se))&&!1===(ue.result=C)&&(ue.preventDefault(),ue.stopPropagation()));return Oe.postDispatch&&Oe.postDispatch.call(this,ue),ue.result}},handlers:function(c,p){var x,C,N,D,W,se=[],ue=p.delegateCount,be=c.target;if(ue&&be.nodeType&&!("click"===c.type&&c.button>=1))for(;be!==this;be=be.parentNode||this)if(1===be.nodeType&&("click"!==c.type||!0!==be.disabled)){for(D=[],W={},x=0;x<ue;x++)void 0===W[N=(C=p[x]).selector+" "]&&(W[N]=C.needsContext?_(N,this).index(be)>-1:_.find(N,this,null,[be]).length),W[N]&&D.push(C);D.length&&se.push({elem:be,handlers:D})}return be=this,ue<p.length&&se.push({elem:be,handlers:p.slice(ue)}),se},addProp:function(c,p){Object.defineProperty(_.Event.prototype,c,{enumerable:!0,configurable:!0,get:ae(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(x){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(c){return c[_.expando]?c:new _.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var p=this||c;return Dn.test(p.type)&&p.click&&st(p,"input")&&Br(p,"click",ge),!1},trigger:function(c){var p=this||c;return Dn.test(p.type)&&p.click&&st(p,"input")&&Br(p,"click"),!0},_default:function(c){var p=c.target;return Dn.test(p.type)&&p.click&&st(p,"input")&&U.get(p,"click")||st(p,"a")}},beforeunload:{postDispatch:function(c){void 0!==c.result&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}},_.removeEvent=function(c,p,x){c.removeEventListener&&c.removeEventListener(p,x)},_.Event=function(c,p){if(!(this instanceof _.Event))return new _.Event(c,p);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?ge:Xr,this.target=c.target&&3===c.target.nodeType?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,p&&_.extend(this,p),this.timeStamp=c&&c.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Xr,isPropagationStopped:Xr,isImmediatePropagationStopped:Xr,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=ge,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=ge,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=ge,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(c,p){_.event.special[c]={setup:function(){return Br(this,c,Vi),!1},trigger:function(){return Br(this,c),!0},_default:function(){return!0},delegateType:p}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,p){_.event.special[c]={delegateType:p,bindType:p,handle:function(x){var C,N=this,D=x.relatedTarget,W=x.handleObj;return(!D||D!==N&&!_.contains(N,D))&&(x.type=W.origType,C=W.handler.apply(this,arguments),x.type=p),C}}}),_.fn.extend({on:function(c,p,x,C){return ut(this,c,p,x,C)},one:function(c,p,x,C){return ut(this,c,p,x,C,1)},off:function(c,p,x){var C,N;if(c&&c.preventDefault&&c.handleObj)return C=c.handleObj,_(c.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if("object"==typeof c){for(N in c)this.off(N,p,c[N]);return this}return(!1===p||"function"==typeof p)&&(x=p,p=void 0),!1===x&&(x=Xr),this.each(function(){_.event.remove(this,c,x,p)})}});var io=/<script|<style|<link/i,oo=/checked\s*(?:[^=]|=\s*.checked.)/i,Bi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function rr(c,p){return st(c,"table")&&st(11!==p.nodeType?p:p.firstChild,"tr")&&_(c).children("tbody")[0]||c}function Eo(c){return c.type=(null!==c.getAttribute("type"))+"/"+c.type,c}function mr(c){return"true/"===(c.type||"").slice(0,5)?c.type=c.type.slice(5):c.removeAttribute("type"),c}function va(c,p){var x,C,N,W,se,ue;if(1===p.nodeType){if(U.hasData(c)&&(ue=U.get(c).events))for(N in U.remove(p,"handle events"),ue)for(x=0,C=ue[N].length;x<C;x++)_.event.add(p,N,ue[N][x]);te.hasData(c)&&(W=te.access(c),se=_.extend({},W),te.set(p,se))}}function ma(c,p){var x=p.nodeName.toLowerCase();"input"===x&&Dn.test(c.type)?p.checked=c.checked:("input"===x||"textarea"===x)&&(p.defaultValue=c.defaultValue)}function Er(c,p,x,C){p=O(p);var N,D,W,se,ue,be,Oe=0,Ye=c.length,Pe=Ye-1,Be=p[0],dt=ae(Be);if(dt||Ye>1&&"string"==typeof Be&&!o.checkClone&&oo.test(Be))return c.each(function(Ht){var St=c.eq(Ht);dt&&(p[0]=Be.call(this,Ht,St.html())),Er(St,p,x,C)});if(Ye&&(D=(N=ro(p,c[0].ownerDocument,!1,c,C)).firstChild,1===N.childNodes.length&&(N=D),D||C)){for(se=(W=_.map($n(N,"script"),Eo)).length;Oe<Ye;Oe++)ue=N,Oe!==Pe&&(ue=_.clone(ue,!0,!0),se&&_.merge(W,$n(ue,"script"))),x.call(c[Oe],ue,Oe);if(se)for(be=W[W.length-1].ownerDocument,_.map(W,mr),Oe=0;Oe<se;Oe++)Vr.test((ue=W[Oe]).type||"")&&!U.access(ue,"globalEval")&&_.contains(be,ue)&&(ue.src&&"module"!==(ue.type||"").toLowerCase()?_._evalUrl&&!ue.noModule&&_._evalUrl(ue.src,{nonce:ue.nonce||ue.getAttribute("nonce")},be):ve(ue.textContent.replace(Bi,""),ue,be))}return c}function Wo(c,p,x){for(var C,N=p?_.filter(p,c):c,D=0;null!=(C=N[D]);D++)!x&&1===C.nodeType&&_.cleanData($n(C)),C.parentNode&&(x&&Wt(C)&&wo($n(C,"script")),C.parentNode.removeChild(C));return c}_.extend({htmlPrefilter:function(c){return c},clone:function(c,p,x){var C,N,D,W,se=c.cloneNode(!0),ue=Wt(c);if(!(o.noCloneChecked||1!==c.nodeType&&11!==c.nodeType||_.isXMLDoc(c)))for(W=$n(se),C=0,N=(D=$n(c)).length;C<N;C++)ma(D[C],W[C]);if(p)if(x)for(D=D||$n(c),W=W||$n(se),C=0,N=D.length;C<N;C++)va(D[C],W[C]);else va(c,se);return(W=$n(se,"script")).length>0&&wo(W,!ue&&$n(c,"script")),se},cleanData:function(c){for(var p,x,C,N=_.event.special,D=0;void 0!==(x=c[D]);D++)if(Dt(x)){if(p=x[U.expando]){if(p.events)for(C in p.events)N[C]?_.event.remove(x,C):_.removeEvent(x,C,p.handle);x[U.expando]=void 0}x[te.expando]&&(x[te.expando]=void 0)}}}),_.fn.extend({detach:function(c){return Wo(this,c,!0)},remove:function(c){return Wo(this,c)},text:function(c){return zt(this,function(p){return void 0===p?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=p)})},null,c,arguments.length)},append:function(){return Er(this,arguments,function(c){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||rr(this,c).appendChild(c)})},prepend:function(){return Er(this,arguments,function(c){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var p=rr(this,c);p.insertBefore(c,p.firstChild)}})},before:function(){return Er(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return Er(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,p=0;null!=(c=this[p]);p++)1===c.nodeType&&(_.cleanData($n(c,!1)),c.textContent="");return this},clone:function(c,p){return c=null!=c&&c,p=null==p?c:p,this.map(function(){return _.clone(this,c,p)})},html:function(c){return zt(this,function(p){var x=this[0]||{},C=0,N=this.length;if(void 0===p&&1===x.nodeType)return x.innerHTML;if("string"==typeof p&&!io.test(p)&&!Jn[(nr.exec(p)||["",""])[1].toLowerCase()]){p=_.htmlPrefilter(p);try{for(;C<N;C++)1===(x=this[C]||{}).nodeType&&(_.cleanData($n(x,!1)),x.innerHTML=p);x=0}catch(D){}}x&&this.empty().append(p)},null,c,arguments.length)},replaceWith:function(){var c=[];return Er(this,arguments,function(p){var x=this.parentNode;_.inArray(this,c)<0&&(_.cleanData($n(this)),x&&x.replaceChild(p,this))},c)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,p){_.fn[c]=function(x){for(var C,N=[],D=_(x),W=D.length-1,se=0;se<=W;se++)C=se===W?this:this.clone(!0),_(D[se])[p](C),A.apply(N,C.get());return this.pushStack(N)}});var Hi=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),$o=function(c){var p=c.ownerDocument.defaultView;return(!p||!p.opener)&&(p=m),p.getComputedStyle(c)},it=function(c,p,x){var C,N,D={};for(N in p)D[N]=c.style[N],c.style[N]=p[N];for(N in C=x.call(c),p)c.style[N]=D[N];return C},Ua=new RegExp(Kt.join("|"),"i");function Si(c,p,x){var C,N,D,W,se=c.style;return(x=x||$o(c))&&(""===(W=x.getPropertyValue(p)||x[p])&&!Wt(c)&&(W=_.style(c,p)),!o.pixelBoxStyles()&&Hi.test(W)&&Ua.test(p)&&(C=se.width,N=se.minWidth,D=se.maxWidth,se.minWidth=se.maxWidth=se.width=W,W=x.width,se.width=C,se.minWidth=N,se.maxWidth=D)),void 0!==W?W+"":W}function ya(c,p){return{get:function(){if(!c())return(this.get=p).apply(this,arguments);delete this.get}}}!function(){function c(){if(be){ue.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",be.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",on.appendChild(ue).appendChild(be);var Oe=m.getComputedStyle(be);x="1%"!==Oe.top,se=12===p(Oe.marginLeft),be.style.right="60%",D=36===p(Oe.right),C=36===p(Oe.width),be.style.position="absolute",N=12===p(be.offsetWidth/3),on.removeChild(ue),be=null}}function p(Oe){return Math.round(parseFloat(Oe))}var x,C,N,D,W,se,ue=de.createElement("div"),be=de.createElement("div");!be.style||(be.style.backgroundClip="content-box",be.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===be.style.backgroundClip,_.extend(o,{boxSizingReliable:function(){return c(),C},pixelBoxStyles:function(){return c(),D},pixelPosition:function(){return c(),x},reliableMarginLeft:function(){return c(),se},scrollboxSize:function(){return c(),N},reliableTrDimensions:function(){var Oe,Ye,Pe,Be;return null==W&&(Oe=de.createElement("table"),Ye=de.createElement("tr"),Pe=de.createElement("div"),Oe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ye.style.cssText="border:1px solid",Ye.style.height="1px",Pe.style.height="9px",Pe.style.display="block",on.appendChild(Oe).appendChild(Ye).appendChild(Pe),Be=m.getComputedStyle(Ye),W=parseInt(Be.height,10)+parseInt(Be.borderTopWidth,10)+parseInt(Be.borderBottomWidth,10)===Ye.offsetHeight,on.removeChild(Oe)),W}}))}();var xa=["Webkit","Moz","ms"],bn=de.createElement("div").style,Po={};function Ti(c){return _.cssProps[c]||Po[c]||(c in bn?c:Po[c]=function hs(c){for(var p=c[0].toUpperCase()+c.slice(1),x=xa.length;x--;)if((c=xa[x]+p)in bn)return c}(c)||c)}var ji=/^(none|table(?!-c[ea]).+)/,Ei=/^--/,Ft={position:"absolute",visibility:"hidden",display:"block"},Hr={letterSpacing:"0",fontWeight:"400"};function gt(c,p,x){var C=bt.exec(p);return C?Math.max(0,C[2]-(x||0))+(C[3]||"px"):p}function Pr(c,p,x,C,N,D){var W="width"===p?1:0,se=0,ue=0;if(x===(C?"border":"content"))return 0;for(;W<4;W+=2)"margin"===x&&(ue+=_.css(c,x+Kt[W],!0,N)),C?("content"===x&&(ue-=_.css(c,"padding"+Kt[W],!0,N)),"margin"!==x&&(ue-=_.css(c,"border"+Kt[W]+"Width",!0,N))):(ue+=_.css(c,"padding"+Kt[W],!0,N),"padding"!==x?ue+=_.css(c,"border"+Kt[W]+"Width",!0,N):se+=_.css(c,"border"+Kt[W]+"Width",!0,N));return!C&&D>=0&&(ue+=Math.max(0,Math.ceil(c["offset"+p[0].toUpperCase()+p.slice(1)]-D-ue-se-.5))||0),ue}function di(c,p,x){var C=$o(c),D=(!o.boxSizingReliable()||x)&&"border-box"===_.css(c,"boxSizing",!1,C),W=D,se=Si(c,p,C),ue="offset"+p[0].toUpperCase()+p.slice(1);if(Hi.test(se)){if(!x)return se;se="auto"}return(!o.boxSizingReliable()&&D||!o.reliableTrDimensions()&&st(c,"tr")||"auto"===se||!parseFloat(se)&&"inline"===_.css(c,"display",!1,C))&&c.getClientRects().length&&(D="border-box"===_.css(c,"boxSizing",!1,C),(W=ue in c)&&(se=c[ue])),(se=parseFloat(se)||0)+Pr(c,p,x||(D?"border":"content"),W,C,se)+"px"}function nn(c,p,x,C,N){return new nn.prototype.init(c,p,x,C,N)}_.extend({cssHooks:{opacity:{get:function(c,p){if(p){var x=Si(c,"opacity");return""===x?"1":x}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(c,p,x,C){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var N,D,W,se=Gt(p),ue=Ei.test(p),be=c.style;if(ue||(p=Ti(se)),W=_.cssHooks[p]||_.cssHooks[se],void 0===x)return W&&"get"in W&&void 0!==(N=W.get(c,!1,C))?N:be[p];if("string"==(D=typeof x)&&(N=bt.exec(x))&&N[1]&&(x=Fr(c,p,N),D="number"),null==x||x!=x)return;"number"===D&&!ue&&(x+=N&&N[3]||(_.cssNumber[se]?"":"px")),!o.clearCloneStyle&&""===x&&0===p.indexOf("background")&&(be[p]="inherit"),(!W||!("set"in W)||void 0!==(x=W.set(c,x,C)))&&(ue?be.setProperty(p,x):be[p]=x)}},css:function(c,p,x,C){var N,D,W,se=Gt(p);return Ei.test(p)||(p=Ti(se)),(W=_.cssHooks[p]||_.cssHooks[se])&&"get"in W&&(N=W.get(c,!0,x)),void 0===N&&(N=Si(c,p,C)),"normal"===N&&p in Hr&&(N=Hr[p]),""===x||x?(D=parseFloat(N),!0===x||isFinite(D)?D||0:N):N}}),_.each(["height","width"],function(c,p){_.cssHooks[p]={get:function(x,C,N){if(C)return!ji.test(_.css(x,"display"))||x.getClientRects().length&&x.getBoundingClientRect().width?di(x,p,N):it(x,Ft,function(){return di(x,p,N)})},set:function(x,C,N){var D,W=$o(x),se=!o.scrollboxSize()&&"absolute"===W.position,be=(se||N)&&"border-box"===_.css(x,"boxSizing",!1,W),Oe=N?Pr(x,p,N,be,W):0;return be&&se&&(Oe-=Math.ceil(x["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(W[p])-Pr(x,p,"border",!1,W)-.5)),Oe&&(D=bt.exec(C))&&"px"!==(D[3]||"px")&&(x.style[p]=C,C=_.css(x,p)),gt(0,C,Oe)}}}),_.cssHooks.marginLeft=ya(o.reliableMarginLeft,function(c,p){if(p)return(parseFloat(Si(c,"marginLeft"))||c.getBoundingClientRect().left-it(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(c,p){_.cssHooks[c+p]={expand:function(x){for(var C=0,N={},D="string"==typeof x?x.split(" "):[x];C<4;C++)N[c+Kt[C]+p]=D[C]||D[C-2]||D[0];return N}},"margin"!==c&&(_.cssHooks[c+p].set=gt)}),_.fn.extend({css:function(c,p){return zt(this,function(x,C,N){var D,W,se={},ue=0;if(Array.isArray(C)){for(D=$o(x),W=C.length;ue<W;ue++)se[C[ue]]=_.css(x,C[ue],!1,D);return se}return void 0!==N?_.style(x,C,N):_.css(x,C)},c,p,arguments.length>1)}}),_.Tween=nn,(nn.prototype={constructor:nn,init:function(c,p,x,C,N,D){this.elem=c,this.prop=x,this.easing=N||_.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=C,this.unit=D||(_.cssNumber[x]?"":"px")},cur:function(){var c=nn.propHooks[this.prop];return c&&c.get?c.get(this):nn.propHooks._default.get(this)},run:function(c){var p,x=nn.propHooks[this.prop];return this.pos=p=this.options.duration?_.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):c,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):nn.propHooks._default.set(this),this}}).init.prototype=nn.prototype,(nn.propHooks={_default:{get:function(c){var p;return 1!==c.elem.nodeType||null!=c.elem[c.prop]&&null==c.elem.style[c.prop]?c.elem[c.prop]:(p=_.css(c.elem,c.prop,""))&&"auto"!==p?p:0},set:function(c){_.fx.step[c.prop]?_.fx.step[c.prop](c):1!==c.elem.nodeType||!_.cssHooks[c.prop]&&null==c.elem.style[Ti(c.prop)]?c.elem[c.prop]=c.now:_.style(c.elem,c.prop,c.now+c.unit)}}}).scrollTop=nn.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},_.easing={linear:function(c){return c},swing:function(c){return.5-Math.cos(c*Math.PI)/2},_default:"swing"},_.fx=nn.prototype.init,_.fx.step={};var Pi,dr,ba=/^(?:toggle|show|hide)$/,Ii=/queueHooks$/;function Ai(){dr&&(!1===de.hidden&&m.requestAnimationFrame?m.requestAnimationFrame(Ai):m.setTimeout(Ai,_.fx.interval),_.fx.tick())}function hi(){return m.setTimeout(function(){Pi=void 0}),Pi=Date.now()}function Mi(c,p){var x,C=0,N={height:c};for(p=p?1:0;C<4;C+=2-p)N["margin"+(x=Kt[C])]=N["padding"+x]=c;return p&&(N.opacity=N.width=c),N}function Io(c,p,x){for(var C,N=(ir.tweeners[p]||[]).concat(ir.tweeners["*"]),D=0,W=N.length;D<W;D++)if(C=N[D].call(x,p,c))return C}function ir(c,p,x){var C,N,D=0,W=ir.prefilters.length,se=_.Deferred().always(function(){delete ue.elem}),ue=function(){if(N)return!1;for(var Ye=Pi||hi(),Pe=Math.max(0,be.startTime+be.duration-Ye),dt=1-(Pe/be.duration||0),Ht=0,St=be.tweens.length;Ht<St;Ht++)be.tweens[Ht].run(dt);return se.notifyWith(c,[be,dt,Pe]),dt<1&&St?Pe:(St||se.notifyWith(c,[be,1,0]),se.resolveWith(c,[be]),!1)},be=se.promise({elem:c,props:_.extend({},p),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},x),originalProperties:p,originalOptions:x,startTime:Pi||hi(),duration:x.duration,tweens:[],createTween:function(Ye,Pe){var Be=_.Tween(c,be.opts,Ye,Pe,be.opts.specialEasing[Ye]||be.opts.easing);return be.tweens.push(Be),Be},stop:function(Ye){var Pe=0,Be=Ye?be.tweens.length:0;if(N)return this;for(N=!0;Pe<Be;Pe++)be.tweens[Pe].run(1);return Ye?(se.notifyWith(c,[be,1,0]),se.resolveWith(c,[be,Ye])):se.rejectWith(c,[be,Ye]),this}}),Oe=be.props;for(function yr(c,p){var x,C,N,D,W;for(x in c)if(N=p[C=Gt(x)],D=c[x],Array.isArray(D)&&(N=D[1],D=c[x]=D[0]),x!==C&&(c[C]=D,delete c[x]),(W=_.cssHooks[C])&&"expand"in W)for(x in D=W.expand(D),delete c[C],D)x in c||(c[x]=D[x],p[x]=N);else p[C]=N}(Oe,be.opts.specialEasing);D<W;D++)if(C=ir.prefilters[D].call(be,c,Oe,be.opts))return ae(C.stop)&&(_._queueHooks(be.elem,be.opts.queue).stop=C.stop.bind(C)),C;return _.map(Oe,Io,be),ae(be.opts.start)&&be.opts.start.call(c,be),be.progress(be.opts.progress).done(be.opts.done,be.opts.complete).fail(be.opts.fail).always(be.opts.always),_.fx.timer(_.extend(ue,{elem:c,anim:be,queue:be.opts.queue})),be}_.Animation=_.extend(ir,{tweeners:{"*":[function(c,p){var x=this.createTween(c,p);return Fr(x.elem,c,bt.exec(p),x),x}]},tweener:function(c,p){ae(c)?(p=c,c=["*"]):c=c.match(Wn);for(var x,C=0,N=c.length;C<N;C++)(ir.tweeners[x=c[C]]=ir.tweeners[x]||[]).unshift(p)},prefilters:[function Ga(c,p,x){var C,N,D,W,se,ue,be,Oe,Ye="width"in p||"height"in p,Pe=this,Be={},dt=c.style,Ht=c.nodeType&&kn(c),St=U.get(c,"fxshow");for(C in x.queue||(null==(W=_._queueHooks(c,"fx")).unqueued&&(W.unqueued=0,se=W.empty.fire,W.empty.fire=function(){W.unqueued||se()}),W.unqueued++,Pe.always(function(){Pe.always(function(){W.unqueued--,_.queue(c,"fx").length||W.empty.fire()})})),p)if(ba.test(N=p[C])){if(delete p[C],D=D||"toggle"===N,N===(Ht?"hide":"show")){if("show"!==N||!St||void 0===St[C])continue;Ht=!0}Be[C]=St&&St[C]||_.style(c,C)}if((ue=!_.isEmptyObject(p))||!_.isEmptyObject(Be))for(C in Ye&&1===c.nodeType&&(x.overflow=[dt.overflow,dt.overflowX,dt.overflowY],null==(be=St&&St.display)&&(be=U.get(c,"display")),"none"===(Oe=_.css(c,"display"))&&(be?Oe=be:(En([c],!0),be=c.style.display||be,Oe=_.css(c,"display"),En([c]))),("inline"===Oe||"inline-block"===Oe&&null!=be)&&"none"===_.css(c,"float")&&(ue||(Pe.done(function(){dt.display=be}),null==be&&(be="none"===(Oe=dt.display)?"":Oe)),dt.display="inline-block")),x.overflow&&(dt.overflow="hidden",Pe.always(function(){dt.overflow=x.overflow[0],dt.overflowX=x.overflow[1],dt.overflowY=x.overflow[2]})),ue=!1,Be)ue||(St?"hidden"in St&&(Ht=St.hidden):St=U.access(c,"fxshow",{display:be}),D&&(St.hidden=!Ht),Ht&&En([c],!0),Pe.done(function(){for(C in Ht||En([c]),U.remove(c,"fxshow"),Be)_.style(c,C,Be[C])})),ue=Io(Ht?St[C]:0,C,Pe),C in St||(St[C]=ue.start,Ht&&(ue.end=ue.start,ue.start=0))}],prefilter:function(c,p){p?ir.prefilters.unshift(c):ir.prefilters.push(c)}}),_.speed=function(c,p,x){var C=c&&"object"==typeof c?_.extend({},c):{complete:x||!x&&p||ae(c)&&c,duration:c,easing:x&&p||p&&!ae(p)&&p};return _.fx.off?C.duration=0:"number"!=typeof C.duration&&(C.duration=C.duration in _.fx.speeds?_.fx.speeds[C.duration]:_.fx.speeds._default),(null==C.queue||!0===C.queue)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){ae(C.old)&&C.old.call(this),C.queue&&_.dequeue(this,C.queue)},C},_.fn.extend({fadeTo:function(c,p,x,C){return this.filter(kn).css("opacity",0).show().end().animate({opacity:p},c,x,C)},animate:function(c,p,x,C){var N=_.isEmptyObject(c),D=_.speed(p,x,C),W=function(){var se=ir(this,_.extend({},c),D);(N||U.get(this,"finish"))&&se.stop(!0)};return W.finish=W,N||!1===D.queue?this.each(W):this.queue(D.queue,W)},stop:function(c,p,x){var C=function(N){var D=N.stop;delete N.stop,D(x)};return"string"!=typeof c&&(x=p,p=c,c=void 0),p&&this.queue(c||"fx",[]),this.each(function(){var N=!0,D=null!=c&&c+"queueHooks",W=_.timers,se=U.get(this);if(D)se[D]&&se[D].stop&&C(se[D]);else for(D in se)se[D]&&se[D].stop&&Ii.test(D)&&C(se[D]);for(D=W.length;D--;)W[D].elem===this&&(null==c||W[D].queue===c)&&(W[D].anim.stop(x),N=!1,W.splice(D,1));(N||!x)&&_.dequeue(this,c)})},finish:function(c){return!1!==c&&(c=c||"fx"),this.each(function(){var p,x=U.get(this),C=x[c+"queue"],N=x[c+"queueHooks"],D=_.timers,W=C?C.length:0;for(x.finish=!0,_.queue(this,c,[]),N&&N.stop&&N.stop.call(this,!0),p=D.length;p--;)D[p].elem===this&&D[p].queue===c&&(D[p].anim.stop(!0),D.splice(p,1));for(p=0;p<W;p++)C[p]&&C[p].finish&&C[p].finish.call(this);delete x.finish})}}),_.each(["toggle","show","hide"],function(c,p){var x=_.fn[p];_.fn[p]=function(C,N,D){return null==C||"boolean"==typeof C?x.apply(this,arguments):this.animate(Mi(p,!0),C,N,D)}}),_.each({slideDown:Mi("show"),slideUp:Mi("hide"),slideToggle:Mi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,p){_.fn[c]=function(x,C,N){return this.animate(p,x,C,N)}}),_.timers=[],_.fx.tick=function(){var c,p=0,x=_.timers;for(Pi=Date.now();p<x.length;p++)!(c=x[p])()&&x[p]===c&&x.splice(p--,1);x.length||_.fx.stop(),Pi=void 0},_.fx.timer=function(c){_.timers.push(c),_.fx.start()},_.fx.interval=13,_.fx.start=function(){dr||(dr=!0,Ai())},_.fx.stop=function(){dr=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(c,p){return c=_.fx&&_.fx.speeds[c]||c,this.queue(p=p||"fx",function(x,C){var N=m.setTimeout(x,c);C.stop=function(){m.clearTimeout(N)}})},function(){var c=de.createElement("input"),x=de.createElement("select").appendChild(de.createElement("option"));c.type="checkbox",o.checkOn=""!==c.value,o.optSelected=x.selected,(c=de.createElement("input")).value="t",c.type="radio",o.radioValue="t"===c.value}();var or,Or=_.expr.attrHandle;_.fn.extend({attr:function(c,p){return zt(this,_.attr,c,p,arguments.length>1)},removeAttr:function(c){return this.each(function(){_.removeAttr(this,c)})}}),_.extend({attr:function(c,p,x){var C,N,D=c.nodeType;if(3!==D&&8!==D&&2!==D)return void 0===c.getAttribute?_.prop(c,p,x):((1!==D||!_.isXMLDoc(c))&&(N=_.attrHooks[p.toLowerCase()]||(_.expr.match.bool.test(p)?or:void 0)),void 0!==x?null===x?void _.removeAttr(c,p):N&&"set"in N&&void 0!==(C=N.set(c,x,p))?C:(c.setAttribute(p,x+""),x):N&&"get"in N&&null!==(C=N.get(c,p))?C:null==(C=_.find.attr(c,p))?void 0:C)},attrHooks:{type:{set:function(c,p){if(!o.radioValue&&"radio"===p&&st(c,"input")){var x=c.value;return c.setAttribute("type",p),x&&(c.value=x),p}}}},removeAttr:function(c,p){var x,C=0,N=p&&p.match(Wn);if(N&&1===c.nodeType)for(;x=N[C++];)c.removeAttribute(x)}}),or={set:function(c,p,x){return!1===p?_.removeAttr(c,x):c.setAttribute(x,x),x}},_.each(_.expr.match.bool.source.match(/\w+/g),function(c,p){var x=Or[p]||_.find.attr;Or[p]=function(C,N,D){var W,se,ue=N.toLowerCase();return D||(se=Or[ue],Or[ue]=W,W=null!=x(C,N,D)?ue:null,Or[ue]=se),W}});var Yo=/^(?:input|select|textarea|button)$/i,Ao=/^(?:a|area)$/i;function Kr(c){return(c.match(Wn)||[]).join(" ")}function Ir(c){return c.getAttribute&&c.getAttribute("class")||""}function Oi(c){return Array.isArray(c)?c:"string"==typeof c&&c.match(Wn)||[]}_.fn.extend({prop:function(c,p){return zt(this,_.prop,c,p,arguments.length>1)},removeProp:function(c){return this.each(function(){delete this[_.propFix[c]||c]})}}),_.extend({prop:function(c,p,x){var C,N,D=c.nodeType;if(3!==D&&8!==D&&2!==D)return(1!==D||!_.isXMLDoc(c))&&(N=_.propHooks[p=_.propFix[p]||p]),void 0!==x?N&&"set"in N&&void 0!==(C=N.set(c,x,p))?C:c[p]=x:N&&"get"in N&&null!==(C=N.get(c,p))?C:c[p]},propHooks:{tabIndex:{get:function(c){var p=_.find.attr(c,"tabindex");return p?parseInt(p,10):Yo.test(c.nodeName)||Ao.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),o.optSelected||(_.propHooks.selected={get:function(c){return null},set:function(c){}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(c){var p,x,C,N,D,W,se,ue=0;if(ae(c))return this.each(function(be){_(this).addClass(c.call(this,be,Ir(this)))});if((p=Oi(c)).length)for(;x=this[ue++];)if(N=Ir(x),C=1===x.nodeType&&" "+Kr(N)+" "){for(W=0;D=p[W++];)C.indexOf(" "+D+" ")<0&&(C+=D+" ");N!==(se=Kr(C))&&x.setAttribute("class",se)}return this},removeClass:function(c){var p,x,C,N,D,W,se,ue=0;if(ae(c))return this.each(function(be){_(this).removeClass(c.call(this,be,Ir(this)))});if(!arguments.length)return this.attr("class","");if((p=Oi(c)).length)for(;x=this[ue++];)if(N=Ir(x),C=1===x.nodeType&&" "+Kr(N)+" "){for(W=0;D=p[W++];)for(;C.indexOf(" "+D+" ")>-1;)C=C.replace(" "+D+" "," ");N!==(se=Kr(C))&&x.setAttribute("class",se)}return this},toggleClass:function(c,p){var x=typeof c,C="string"===x||Array.isArray(c);return"boolean"==typeof p&&C?p?this.addClass(c):this.removeClass(c):ae(c)?this.each(function(N){_(this).toggleClass(c.call(this,N,Ir(this),p),p)}):this.each(function(){var N,D,W,se;if(C)for(D=0,W=_(this),se=Oi(c);N=se[D++];)W.hasClass(N)?W.removeClass(N):W.addClass(N);else(void 0===c||"boolean"===x)&&((N=Ir(this))&&U.set(this,"__className__",N),this.setAttribute&&this.setAttribute("class",N||!1===c?"":U.get(this,"__className__")||""))})},hasClass:function(c){var p,x,C=0;for(p=" "+c+" ";x=this[C++];)if(1===x.nodeType&&(" "+Kr(Ir(x))+" ").indexOf(p)>-1)return!0;return!1}});var ao=/\r/g;_.fn.extend({val:function(c){var p,x,C,N=this[0];return arguments.length?(C=ae(c),this.each(function(D){var W;1===this.nodeType&&(null==(W=C?c.call(this,D,_(this).val()):c)?W="":"number"==typeof W?W+="":Array.isArray(W)&&(W=_.map(W,function(se){return null==se?"":se+""})),(!(p=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])||!("set"in p)||void 0===p.set(this,W,"value"))&&(this.value=W))})):N?(p=_.valHooks[N.type]||_.valHooks[N.nodeName.toLowerCase()])&&"get"in p&&void 0!==(x=p.get(N,"value"))?x:"string"==typeof(x=N.value)?x.replace(ao,""):null==x?"":x:void 0}}),_.extend({valHooks:{option:{get:function(c){var p=_.find.attr(c,"value");return null!=p?p:Kr(_.text(c))}},select:{get:function(c){var p,x,C,N=c.options,D=c.selectedIndex,W="select-one"===c.type,se=W?null:[],ue=W?D+1:N.length;for(C=D<0?ue:W?D:0;C<ue;C++)if(((x=N[C]).selected||C===D)&&!x.disabled&&(!x.parentNode.disabled||!st(x.parentNode,"optgroup"))){if(p=_(x).val(),W)return p;se.push(p)}return se},set:function(c,p){for(var x,C,N=c.options,D=_.makeArray(p),W=N.length;W--;)((C=N[W]).selected=_.inArray(_.valHooks.option.get(C),D)>-1)&&(x=!0);return x||(c.selectedIndex=-1),D}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(c,p){if(Array.isArray(p))return c.checked=_.inArray(_(c).val(),p)>-1}},o.checkOn||(_.valHooks[this].get=function(c){return null===c.getAttribute("value")?"on":c.value})}),o.focusin="onfocusin"in m;var kr=/^(?:focusinfocus|focusoutblur)$/,ki=function(c){c.stopPropagation()};_.extend(_.event,{trigger:function(c,p,x,C){var N,D,W,se,ue,be,Oe,Ye,Pe=[x||de],Be=Y.call(c,"type")?c.type:c,dt=Y.call(c,"namespace")?c.namespace.split("."):[];if(D=Ye=W=x=x||de,3!==x.nodeType&&8!==x.nodeType&&!kr.test(Be+_.event.triggered)&&(Be.indexOf(".")>-1&&(dt=Be.split("."),Be=dt.shift(),dt.sort()),ue=Be.indexOf(":")<0&&"on"+Be,(c=c[_.expando]?c:new _.Event(Be,"object"==typeof c&&c)).isTrigger=C?2:3,c.namespace=dt.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+dt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=x),p=null==p?[c]:_.makeArray(p,[c]),Oe=_.event.special[Be]||{},C||!Oe.trigger||!1!==Oe.trigger.apply(x,p))){if(!C&&!Oe.noBubble&&!pe(x)){for(kr.test((se=Oe.delegateType||Be)+Be)||(D=D.parentNode);D;D=D.parentNode)Pe.push(D),W=D;W===(x.ownerDocument||de)&&Pe.push(W.defaultView||W.parentWindow||m)}for(N=0;(D=Pe[N++])&&!c.isPropagationStopped();)Ye=D,c.type=N>1?se:Oe.bindType||Be,(be=(U.get(D,"events")||Object.create(null))[c.type]&&U.get(D,"handle"))&&be.apply(D,p),(be=ue&&D[ue])&&be.apply&&Dt(D)&&(c.result=be.apply(D,p),!1===c.result&&c.preventDefault());return c.type=Be,!C&&!c.isDefaultPrevented()&&(!Oe._default||!1===Oe._default.apply(Pe.pop(),p))&&Dt(x)&&ue&&ae(x[Be])&&!pe(x)&&((W=x[ue])&&(x[ue]=null),_.event.triggered=Be,c.isPropagationStopped()&&Ye.addEventListener(Be,ki),x[Be](),c.isPropagationStopped()&&Ye.removeEventListener(Be,ki),_.event.triggered=void 0,W&&(x[ue]=W)),c.result}},simulate:function(c,p,x){var C=_.extend(new _.Event,x,{type:c,isSimulated:!0});_.event.trigger(C,null,p)}}),_.fn.extend({trigger:function(c,p){return this.each(function(){_.event.trigger(c,p,this)})},triggerHandler:function(c,p){var x=this[0];if(x)return _.event.trigger(c,p,x,!0)}}),o.focusin||_.each({focus:"focusin",blur:"focusout"},function(c,p){var x=function(C){_.event.simulate(p,C.target,_.event.fix(C))};_.event.special[p]={setup:function(){var C=this.ownerDocument||this.document||this,N=U.access(C,p);N||C.addEventListener(c,x,!0),U.access(C,p,(N||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,N=U.access(C,p)-1;N?U.access(C,p,N):(C.removeEventListener(c,x,!0),U.remove(C,p))}}});var ni=m.location,zi={guid:Date.now()},Xo=/\?/;_.parseXML=function(c){var p,x;if(!c||"string"!=typeof c)return null;try{p=(new m.DOMParser).parseFromString(c,"text/xml")}catch(C){}return x=p&&p.getElementsByTagName("parsererror")[0],(!p||x)&&_.error("Invalid XML: "+(x?_.map(x.childNodes,function(C){return C.textContent}).join("\n"):c)),p};var Ko=/\[\]$/,Mo=/\r?\n/g,so=/^(?:submit|button|image|reset|file)$/i,_a=/^(?:input|select|textarea|keygen)/i;function Jo(c,p,x,C){var N;if(Array.isArray(p))_.each(p,function(D,W){x||Ko.test(c)?C(c,W):Jo(c+"["+("object"==typeof W&&null!=W?D:"")+"]",W,x,C)});else if(x||"object"!==we(p))C(c,p);else for(N in p)Jo(c+"["+N+"]",p[N],x,C)}_.param=function(c,p){var x,C=[],N=function(D,W){var se=ae(W)?W():W;C[C.length]=encodeURIComponent(D)+"="+encodeURIComponent(null==se?"":se)};if(null==c)return"";if(Array.isArray(c)||c.jquery&&!_.isPlainObject(c))_.each(c,function(){N(this.name,this.value)});else for(x in c)Jo(x,c[x],p,N);return C.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=_.prop(this,"elements");return c?_.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!_(this).is(":disabled")&&_a.test(this.nodeName)&&!so.test(c)&&(this.checked||!Dn.test(c))}).map(function(c,p){var x=_(this).val();return null==x?null:Array.isArray(x)?_.map(x,function(C){return{name:p.name,value:C.replace(Mo,"\r\n")}}):{name:p.name,value:x.replace(Mo,"\r\n")}}).get()}});var Ca=/%20/g,Qo=/#.*$/,wa=/([?&])_=[^&]*/,Sa=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ta=/^(?:GET|HEAD)$/,Zo=/^\/\//,ri={},uo={},$a="*/".concat("*"),Li=de.createElement("a");function pi(c){return function(p,x){"string"!=typeof p&&(x=p,p="*");var C,N=0,D=p.toLowerCase().match(Wn)||[];if(ae(x))for(;C=D[N++];)"+"===C[0]?(C=C.slice(1)||"*",(c[C]=c[C]||[]).unshift(x)):(c[C]=c[C]||[]).push(x)}}function qo(c,p,x,C){var N={},D=c===uo;function W(se){var ue;return N[se]=!0,_.each(c[se]||[],function(be,Oe){var Ye=Oe(p,x,C);return"string"!=typeof Ye||D||N[Ye]?D?!(ue=Ye):void 0:(p.dataTypes.unshift(Ye),W(Ye),!1)}),ue}return W(p.dataTypes[0])||!N["*"]&&W("*")}function wn(c,p){var x,C,N=_.ajaxSettings.flatOptions||{};for(x in p)void 0!==p[x]&&((N[x]?c:C||(C={}))[x]=p[x]);return C&&_.extend(!0,c,C),c}Li.href=ni.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ni.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ni.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$a,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,p){return p?wn(wn(c,_.ajaxSettings),p):wn(_.ajaxSettings,c)},ajaxPrefilter:pi(ri),ajaxTransport:pi(uo),ajax:function(c,p){"object"==typeof c&&(p=c,c=void 0);var x,C,N,D,W,se,ue,be,Oe,Ye,Pe=_.ajaxSetup({},p=p||{}),Be=Pe.context||Pe,dt=Pe.context&&(Be.nodeType||Be.jquery)?_(Be):_.event,Ht=_.Deferred(),St=_.Callbacks("once memory"),Ln=Pe.statusCode||{},jn={},jr={},Tt="canceled",It={readyState:0,getResponseHeader:function(un){var Fn;if(ue){if(!D)for(D={};Fn=Sa.exec(N);)D[Fn[1].toLowerCase()+" "]=(D[Fn[1].toLowerCase()+" "]||[]).concat(Fn[2]);Fn=D[un.toLowerCase()+" "]}return null==Fn?null:Fn.join(", ")},getAllResponseHeaders:function(){return ue?N:null},setRequestHeader:function(un,Fn){return null==ue&&(un=jr[un.toLowerCase()]=jr[un.toLowerCase()]||un,jn[un]=Fn),this},overrideMimeType:function(un){return null==ue&&(Pe.mimeType=un),this},statusCode:function(un){var Fn;if(un)if(ue)It.always(un[It.status]);else for(Fn in un)Ln[Fn]=[Ln[Fn],un[Fn]];return this},abort:function(un){var Fn=un||Tt;return x&&x.abort(Fn),xr(0,Fn),this}};if(Ht.promise(It),Pe.url=((c||Pe.url||ni.href)+"").replace(Zo,ni.protocol+"//"),Pe.type=p.method||p.type||Pe.method||Pe.type,Pe.dataTypes=(Pe.dataType||"*").toLowerCase().match(Wn)||[""],null==Pe.crossDomain){se=de.createElement("a");try{se.href=Pe.url,se.href=se.href,Pe.crossDomain=Li.protocol+"//"+Li.host!=se.protocol+"//"+se.host}catch(un){Pe.crossDomain=!0}}if(Pe.data&&Pe.processData&&"string"!=typeof Pe.data&&(Pe.data=_.param(Pe.data,Pe.traditional)),qo(ri,Pe,p,It),ue)return It;for(Oe in(be=_.event&&Pe.global)&&0==_.active++&&_.event.trigger("ajaxStart"),Pe.type=Pe.type.toUpperCase(),Pe.hasContent=!Ta.test(Pe.type),C=Pe.url.replace(Qo,""),Pe.hasContent?Pe.data&&Pe.processData&&0===(Pe.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Pe.data=Pe.data.replace(Ca,"+")):(Ye=Pe.url.slice(C.length),Pe.data&&(Pe.processData||"string"==typeof Pe.data)&&(C+=(Xo.test(C)?"&":"?")+Pe.data,delete Pe.data),!1===Pe.cache&&(C=C.replace(wa,"$1"),Ye=(Xo.test(C)?"&":"?")+"_="+zi.guid+++Ye),Pe.url=C+Ye),Pe.ifModified&&(_.lastModified[C]&&It.setRequestHeader("If-Modified-Since",_.lastModified[C]),_.etag[C]&&It.setRequestHeader("If-None-Match",_.etag[C])),(Pe.data&&Pe.hasContent&&!1!==Pe.contentType||p.contentType)&&It.setRequestHeader("Content-Type",Pe.contentType),It.setRequestHeader("Accept",Pe.dataTypes[0]&&Pe.accepts[Pe.dataTypes[0]]?Pe.accepts[Pe.dataTypes[0]]+("*"!==Pe.dataTypes[0]?", "+$a+"; q=0.01":""):Pe.accepts["*"]),Pe.headers)It.setRequestHeader(Oe,Pe.headers[Oe]);if(Pe.beforeSend&&(!1===Pe.beforeSend.call(Be,It,Pe)||ue))return It.abort();if(Tt="abort",St.add(Pe.complete),It.done(Pe.success),It.fail(Pe.error),x=qo(uo,Pe,p,It)){if(It.readyState=1,be&&dt.trigger("ajaxSend",[It,Pe]),ue)return It;Pe.async&&Pe.timeout>0&&(W=m.setTimeout(function(){It.abort("timeout")},Pe.timeout));try{ue=!1,x.send(jn,xr)}catch(un){if(ue)throw un;xr(-1,un)}}else xr(-1,"No Transport");function xr(un,Fn,ar,ps){var ii,Oo,Ui,hr,_t,Vn=Fn;ue||(ue=!0,W&&m.clearTimeout(W),x=void 0,N=ps||"",It.readyState=un>0?4:0,ii=un>=200&&un<300||304===un,ar&&(hr=function Ie(c,p,x){for(var C,N,D,W,se=c.contents,ue=c.dataTypes;"*"===ue[0];)ue.shift(),void 0===C&&(C=c.mimeType||p.getResponseHeader("Content-Type"));if(C)for(N in se)if(se[N]&&se[N].test(C)){ue.unshift(N);break}if(ue[0]in x)D=ue[0];else{for(N in x){if(!ue[0]||c.converters[N+" "+ue[0]]){D=N;break}W||(W=N)}D=D||W}if(D)return D!==ue[0]&&ue.unshift(D),x[D]}(Pe,It,ar)),!ii&&_.inArray("script",Pe.dataTypes)>-1&&_.inArray("json",Pe.dataTypes)<0&&(Pe.converters["text script"]=function(){}),hr=function Lr(c,p,x,C){var N,D,W,se,ue,be={},Oe=c.dataTypes.slice();if(Oe[1])for(W in c.converters)be[W.toLowerCase()]=c.converters[W];for(D=Oe.shift();D;)if(c.responseFields[D]&&(x[c.responseFields[D]]=p),!ue&&C&&c.dataFilter&&(p=c.dataFilter(p,c.dataType)),ue=D,D=Oe.shift())if("*"===D)D=ue;else if("*"!==ue&&ue!==D){if(!(W=be[ue+" "+D]||be["* "+D]))for(N in be)if((se=N.split(" "))[1]===D&&(W=be[ue+" "+se[0]]||be["* "+se[0]])){!0===W?W=be[N]:!0!==be[N]&&(D=se[0],Oe.unshift(se[1]));break}if(!0!==W)if(W&&c.throws)p=W(p);else try{p=W(p)}catch(Ye){return{state:"parsererror",error:W?Ye:"No conversion from "+ue+" to "+D}}}return{state:"success",data:p}}(Pe,hr,It,ii),ii?(Pe.ifModified&&((_t=It.getResponseHeader("Last-Modified"))&&(_.lastModified[C]=_t),(_t=It.getResponseHeader("etag"))&&(_.etag[C]=_t)),204===un||"HEAD"===Pe.type?Vn="nocontent":304===un?Vn="notmodified":(Vn=hr.state,Oo=hr.data,ii=!(Ui=hr.error))):(Ui=Vn,(un||!Vn)&&(Vn="error",un<0&&(un=0))),It.status=un,It.statusText=(Fn||Vn)+"",ii?Ht.resolveWith(Be,[Oo,Vn,It]):Ht.rejectWith(Be,[It,Vn,Ui]),It.statusCode(Ln),Ln=void 0,be&&dt.trigger(ii?"ajaxSuccess":"ajaxError",[It,Pe,ii?Oo:Ui]),St.fireWith(Be,[It,Vn]),be&&(dt.trigger("ajaxComplete",[It,Pe]),--_.active||_.event.trigger("ajaxStop")))}return It},getJSON:function(c,p,x){return _.get(c,p,x,"json")},getScript:function(c,p){return _.get(c,void 0,p,"script")}}),_.each(["get","post"],function(c,p){_[p]=function(x,C,N,D){return ae(C)&&(D=D||N,N=C,C=void 0),_.ajax(_.extend({url:x,type:p,dataType:D,data:C,success:N},_.isPlainObject(x)&&x))}}),_.ajaxPrefilter(function(c){var p;for(p in c.headers)"content-type"===p.toLowerCase()&&(c.contentType=c.headers[p]||"")}),_._evalUrl=function(c,p,x){return _.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){_.globalEval(C,p,x)}})},_.fn.extend({wrapAll:function(c){var p;return this[0]&&(ae(c)&&(c=c.call(this[0])),p=_(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(c){return ae(c)?this.each(function(p){_(this).wrapInner(c.call(this,p))}):this.each(function(){var p=_(this),x=p.contents();x.length?x.wrapAll(c):p.append(c)})},wrap:function(c){var p=ae(c);return this.each(function(x){_(this).wrapAll(p?c.call(this,x):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(c){return!_.expr.pseudos.visible(c)},_.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new m.XMLHttpRequest}catch(c){}};var Rr={0:200,1223:204},F=_.ajaxSettings.xhr();o.cors=!!F&&"withCredentials"in F,o.ajax=F=!!F,_.ajaxTransport(function(c){var p,x;if(o.cors||F&&!c.crossDomain)return{send:function(C,N){var D,W=c.xhr();if(W.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(D in c.xhrFields)W[D]=c.xhrFields[D];for(D in c.mimeType&&W.overrideMimeType&&W.overrideMimeType(c.mimeType),!c.crossDomain&&!C["X-Requested-With"]&&(C["X-Requested-With"]="XMLHttpRequest"),C)W.setRequestHeader(D,C[D]);p=function(se){return function(){p&&(p=x=W.onload=W.onerror=W.onabort=W.ontimeout=W.onreadystatechange=null,"abort"===se?W.abort():"error"===se?"number"!=typeof W.status?N(0,"error"):N(W.status,W.statusText):N(Rr[W.status]||W.status,W.statusText,"text"!==(W.responseType||"text")||"string"!=typeof W.responseText?{binary:W.response}:{text:W.responseText},W.getAllResponseHeaders()))}},W.onload=p(),x=W.onerror=W.ontimeout=p("error"),void 0!==W.onabort?W.onabort=x:W.onreadystatechange=function(){4===W.readyState&&m.setTimeout(function(){p&&x()})},p=p("abort");try{W.send(c.hasContent&&c.data||null)}catch(se){if(p)throw se}},abort:function(){p&&p()}}}),_.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return _.globalEval(c),c}}}),_.ajaxPrefilter("script",function(c){void 0===c.cache&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),_.ajaxTransport("script",function(c){var p,x;if(c.crossDomain||c.scriptAttrs)return{send:function(C,N){p=_("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",x=function(D){p.remove(),x=null,D&&N("error"===D.type?404:200,D.type)}),de.head.appendChild(p[0])},abort:function(){x&&x()}}});var c,K=[],oe=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=K.pop()||_.expando+"_"+zi.guid++;return this[c]=!0,c}}),_.ajaxPrefilter("json jsonp",function(c,p,x){var C,N,D,W=!1!==c.jsonp&&(oe.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&oe.test(c.data)&&"data");if(W||"jsonp"===c.dataTypes[0])return C=c.jsonpCallback=ae(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,W?c[W]=c[W].replace(oe,"$1"+C):!1!==c.jsonp&&(c.url+=(Xo.test(c.url)?"&":"?")+c.jsonp+"="+C),c.converters["script json"]=function(){return D||_.error(C+" was not called"),D[0]},c.dataTypes[0]="json",N=m[C],m[C]=function(){D=arguments},x.always(function(){void 0===N?_(m).removeProp(C):m[C]=N,c[C]&&(c.jsonpCallback=p.jsonpCallback,K.push(C)),D&&ae(N)&&N(D[0]),D=N=void 0}),"script"}),o.createHTMLDocument=((c=de.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===c.childNodes.length),_.parseHTML=function(c,p,x){return"string"!=typeof c?[]:("boolean"==typeof p&&(x=p,p=!1),p||(o.createHTMLDocument?((C=(p=de.implementation.createHTMLDocument("")).createElement("base")).href=de.location.href,p.head.appendChild(C)):p=de),D=!x&&[],(N=mt.exec(c))?[p.createElement(N[1])]:(N=ro([c],p,D),D&&D.length&&_(D).remove(),_.merge([],N.childNodes)));var C,N,D},_.fn.load=function(c,p,x){var C,N,D,W=this,se=c.indexOf(" ");return se>-1&&(C=Kr(c.slice(se)),c=c.slice(0,se)),ae(p)?(x=p,p=void 0):p&&"object"==typeof p&&(N="POST"),W.length>0&&_.ajax({url:c,type:N||"GET",dataType:"html",data:p}).done(function(ue){D=arguments,W.html(C?_("<div>").append(_.parseHTML(ue)).find(C):ue)}).always(x&&function(ue,be){W.each(function(){x.apply(this,D||[ue.responseText,be,ue])})}),this},_.expr.pseudos.animated=function(c){return _.grep(_.timers,function(p){return c===p.elem}).length},_.offset={setOffset:function(c,p,x){var C,N,D,W,se,ue,Oe=_.css(c,"position"),Ye=_(c),Pe={};"static"===Oe&&(c.style.position="relative"),se=Ye.offset(),D=_.css(c,"top"),ue=_.css(c,"left"),("absolute"===Oe||"fixed"===Oe)&&(D+ue).indexOf("auto")>-1?(W=(C=Ye.position()).top,N=C.left):(W=parseFloat(D)||0,N=parseFloat(ue)||0),ae(p)&&(p=p.call(c,x,_.extend({},se))),null!=p.top&&(Pe.top=p.top-se.top+W),null!=p.left&&(Pe.left=p.left-se.left+N),"using"in p?p.using.call(c,Pe):Ye.css(Pe)}},_.fn.extend({offset:function(c){if(arguments.length)return void 0===c?this:this.each(function(N){_.offset.setOffset(this,c,N)});var p,x,C=this[0];return C?C.getClientRects().length?{top:(p=C.getBoundingClientRect()).top+(x=C.ownerDocument.defaultView).pageYOffset,left:p.left+x.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var c,p,x,C=this[0],N={top:0,left:0};if("fixed"===_.css(C,"position"))p=C.getBoundingClientRect();else{for(p=this.offset(),x=C.ownerDocument,c=C.offsetParent||x.documentElement;c&&(c===x.body||c===x.documentElement)&&"static"===_.css(c,"position");)c=c.parentNode;c&&c!==C&&1===c.nodeType&&((N=_(c).offset()).top+=_.css(c,"borderTopWidth",!0),N.left+=_.css(c,"borderLeftWidth",!0))}return{top:p.top-N.top-_.css(C,"marginTop",!0),left:p.left-N.left-_.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&"static"===_.css(c,"position");)c=c.offsetParent;return c||on})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,p){var x="pageYOffset"===p;_.fn[c]=function(C){return zt(this,function(N,D,W){var se;if(pe(N)?se=N:9===N.nodeType&&(se=N.defaultView),void 0===W)return se?se[p]:N[D];se?se.scrollTo(x?se.pageXOffset:W,x?W:se.pageYOffset):N[D]=W},c,C,arguments.length)}}),_.each(["top","left"],function(c,p){_.cssHooks[p]=ya(o.pixelPosition,function(x,C){if(C)return C=Si(x,p),Hi.test(C)?_(x).position()[p]+"px":C})}),_.each({Height:"height",Width:"width"},function(c,p){_.each({padding:"inner"+c,content:p,"":"outer"+c},function(x,C){_.fn[C]=function(N,D){var W=arguments.length&&(x||"boolean"!=typeof N),se=x||(!0===N||!0===D?"margin":"border");return zt(this,function(ue,be,Oe){var Ye;return pe(ue)?0===C.indexOf("outer")?ue["inner"+c]:ue.document.documentElement["client"+c]:9===ue.nodeType?(Ye=ue.documentElement,Math.max(ue.body["scroll"+c],Ye["scroll"+c],ue.body["offset"+c],Ye["offset"+c],Ye["client"+c])):void 0===Oe?_.css(ue,be,se):_.style(ue,be,Oe,se)},p,W?N:void 0,W)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,p){_.fn[p]=function(x){return this.on(p,x)}}),_.fn.extend({bind:function(c,p,x){return this.on(c,null,p,x)},unbind:function(c,p){return this.off(c,null,p)},delegate:function(c,p,x,C){return this.on(p,c,x,C)},undelegate:function(c,p,x){return 1===arguments.length?this.off(c,"**"):this.off(p,c||"**",x)},hover:function(c,p){return this.mouseenter(c).mouseleave(p||c)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,p){_.fn[p]=function(x,C){return arguments.length>0?this.on(p,null,x,C):this.trigger(p)}});var fe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(c,p){var x,C,N;if("string"==typeof p&&(x=c[p],p=c,c=x),ae(c))return C=I.call(arguments,2),N=function(){return c.apply(p||this,C.concat(I.call(arguments)))},N.guid=c.guid=c.guid||_.guid++,N},_.holdReady=function(c){c?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=st,_.isFunction=ae,_.isWindow=pe,_.camelCase=Gt,_.type=we,_.now=Date.now,_.isNumeric=function(c){var p=_.type(c);return("number"===p||"string"===p)&&!isNaN(c-parseFloat(c))},_.trim=function(c){return null==c?"":(c+"").replace(fe,"")},void 0!==(v=function(){return _}.apply(G,[]))&&(P.exports=v);var Te=m.jQuery,_e=m.$;return _.noConflict=function(c){return m.$===_&&(m.$=_e),c&&m.jQuery===_&&(m.jQuery=Te),_},void 0===S&&(m.jQuery=m.$=_),_})},37244:(P,G,h)=>{var S=h(53436)(h(12119),"DataView");P.exports=S},54994:(P,G,h)=>{var v=h(64312),m=h(46421),S=h(15764),E=h(18685),b=h(26676);function I(O){var A=-1,B=null==O?0:O.length;for(this.clear();++A<B;){var H=O[A];this.set(H[0],H[1])}}I.prototype.clear=v,I.prototype.delete=m,I.prototype.get=S,I.prototype.has=E,I.prototype.set=b,P.exports=I},9215:(P,G,h)=>{var v=h(41840),m=h(34378),S=h(54981),E=h(67343),b=h(98895);function I(O){var A=-1,B=null==O?0:O.length;for(this.clear();++A<B;){var H=O[A];this.set(H[0],H[1])}}I.prototype.clear=v,I.prototype.delete=m,I.prototype.get=S,I.prototype.has=E,I.prototype.set=b,P.exports=I},51501:(P,G,h)=>{var S=h(53436)(h(12119),"Map");P.exports=S},99850:(P,G,h)=>{var v=h(10638),m=h(11184),S=h(70866),E=h(43771),b=h(51772);function I(O){var A=-1,B=null==O?0:O.length;for(this.clear();++A<B;){var H=O[A];this.set(H[0],H[1])}}I.prototype.clear=v,I.prototype.delete=m,I.prototype.get=S,I.prototype.has=E,I.prototype.set=b,P.exports=I},44267:(P,G,h)=>{var S=h(53436)(h(12119),"Promise");P.exports=S},46323:(P,G,h)=>{var S=h(53436)(h(12119),"Set");P.exports=S},58849:(P,G,h)=>{var v=h(99850),m=h(4600),S=h(31387);function E(b){var I=-1,O=null==b?0:b.length;for(this.__data__=new v;++I<O;)this.add(b[I])}E.prototype.add=E.prototype.push=m,E.prototype.has=S,P.exports=E},2858:(P,G,h)=>{var v=h(9215),m=h(13720),S=h(64410),E=h(45576),b=h(22247),I=h(41585);function O(A){var B=this.__data__=new v(A);this.size=B.size}O.prototype.clear=m,O.prototype.delete=S,O.prototype.get=E,O.prototype.has=b,O.prototype.set=I,P.exports=O},60443:(P,G,h)=>{var v=h(12119);P.exports=v.Symbol},73457:(P,G,h)=>{var v=h(12119);P.exports=v.Uint8Array},24243:(P,G,h)=>{var S=h(53436)(h(12119),"WeakMap");P.exports=S},26999:P=>{P.exports=function G(h,v,m){switch(m.length){case 0:return h.call(v);case 1:return h.call(v,m[0]);case 2:return h.call(v,m[0],m[1]);case 3:return h.call(v,m[0],m[1],m[2])}return h.apply(v,m)}},96837:P=>{P.exports=function G(h,v){for(var m=-1,S=null==h?0:h.length;++m<S&&!1!==v(h[m],m,h););return h}},69779:P=>{P.exports=function G(h,v){for(var m=-1,S=null==h?0:h.length,E=0,b=[];++m<S;){var I=h[m];v(I,m,h)&&(b[E++]=I)}return b}},61253:(P,G,h)=>{var v=h(14164);P.exports=function m(S,E){return!(null==S||!S.length)&&v(S,E,0)>-1}},37609:P=>{P.exports=function G(h,v,m){for(var S=-1,E=null==h?0:h.length;++S<E;)if(m(v,h[S]))return!0;return!1}},72271:(P,G,h)=>{var v=h(85334),m=h(77151),S=h(21503),E=h(80891),b=h(58442),I=h(48159),A=Object.prototype.hasOwnProperty;P.exports=function B(H,k){var Y=S(H),ee=!Y&&m(H),le=!Y&&!ee&&E(H),o=!Y&&!ee&&!le&&I(H),ae=Y||ee||le||o,pe=ae?v(H.length,String):[],de=pe.length;for(var q in H)(k||A.call(H,q))&&(!ae||!("length"==q||le&&("offset"==q||"parent"==q)||o&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||b(q,de)))&&pe.push(q);return pe}},84633:P=>{P.exports=function G(h,v){for(var m=-1,S=null==h?0:h.length,E=Array(S);++m<S;)E[m]=v(h[m],m,h);return E}},85059:P=>{P.exports=function G(h,v){for(var m=-1,S=v.length,E=h.length;++m<S;)h[E+m]=v[m];return h}},8745:P=>{P.exports=function G(h,v,m,S){var E=-1,b=null==h?0:h.length;for(S&&b&&(m=h[++E]);++E<b;)m=v(m,h[E],E,h);return m}},79503:P=>{P.exports=function G(h,v){for(var m=-1,S=null==h?0:h.length;++m<S;)if(v(h[m],m,h))return!0;return!1}},75481:(P,G,h)=>{var m=h(11847)("length");P.exports=m},49276:(P,G,h)=>{var v=h(85683),m=h(20217);P.exports=function S(E,b,I){(void 0!==I&&!m(E[b],I)||void 0===I&&!(b in E))&&v(E,b,I)}},89719:(P,G,h)=>{var v=h(85683),m=h(20217),E=Object.prototype.hasOwnProperty;P.exports=function b(I,O,A){var B=I[O];(!E.call(I,O)||!m(B,A)||void 0===A&&!(O in I))&&v(I,O,A)}},43503:(P,G,h)=>{var v=h(20217);P.exports=function m(S,E){for(var b=S.length;b--;)if(v(S[b][0],E))return b;return-1}},94121:(P,G,h)=>{var v=h(31989),m=h(118);P.exports=function S(E,b){return E&&v(b,m(b),E)}},99287:(P,G,h)=>{var v=h(31989),m=h(16555);P.exports=function S(E,b){return E&&v(b,m(b),E)}},85683:(P,G,h)=>{var v=h(56713);P.exports=function m(S,E,b){"__proto__"==E&&v?v(S,E,{configurable:!0,enumerable:!0,value:b,writable:!0}):S[E]=b}},44462:(P,G,h)=>{var v=h(2858),m=h(96837),S=h(89719),E=h(94121),b=h(99287),I=h(19292),O=h(99454),A=h(84444),B=h(59905),H=h(47597),k=h(6967),Y=h(28794),ee=h(76782),le=h(37878),o=h(4264),ae=h(21503),pe=h(80891),de=h(13222),q=h(25940),ve=h(90799),we=h(118),Ae=h(16555),We="[object Arguments]",Nt="[object Function]",gr="[object Object]",L={};L[We]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object DataView]"]=L["[object Boolean]"]=L["[object Date]"]=L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Map]"]=L["[object Number]"]=L[gr]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object Symbol]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L["[object Error]"]=L[Nt]=L["[object WeakMap]"]=!1,P.exports=function U(te,me,Fe,De,rt,xt){var bt,Kt=1&me,on=2&me,Wt=4&me;if(Fe&&(bt=rt?Fe(te,De,rt,xt):Fe(te)),void 0!==bt)return bt;if(!q(te))return te;var Hn=ae(te);if(Hn){if(bt=ee(te),!Kt)return O(te,bt)}else{var kn=Y(te),Fr=kn==Nt||"[object GeneratorFunction]"==kn;if(pe(te))return I(te,Kt);if(kn==gr||kn==We||Fr&&!rt){if(bt=on||Fr?{}:o(te),!Kt)return on?B(te,b(bt,te)):A(te,E(bt,te))}else{if(!L[kn])return rt?te:{};bt=le(te,kn,Kt)}}xt||(xt=new v);var xn=xt.get(te);if(xn)return xn;xt.set(te,bt),ve(te)?te.forEach(function(Dn){bt.add(U(Dn,me,Fe,Dn,te,xt))}):de(te)&&te.forEach(function(Dn,nr){bt.set(nr,U(Dn,me,Fe,nr,te,xt))});var En=Hn?void 0:(Wt?on?k:H:on?Ae:we)(te);return m(En||te,function(Dn,nr){En&&(Dn=te[nr=Dn]),S(bt,nr,U(Dn,me,Fe,nr,te,xt))}),bt}},78858:(P,G,h)=>{var v=h(25940),m=Object.create,S=function(){function E(){}return function(b){if(!v(b))return{};if(m)return m(b);E.prototype=b;var I=new E;return E.prototype=void 0,I}}();P.exports=S},43132:(P,G,h)=>{var v=h(45184),S=h(16539)(v);P.exports=S},67308:(P,G,h)=>{var v=h(44129);P.exports=function m(S,E,b){for(var I=-1,O=S.length;++I<O;){var A=S[I],B=E(A);if(null!=B&&(void 0===H?B==B&&!v(B):b(B,H)))var H=B,k=A}return k}},33609:(P,G,h)=>{var v=h(43132);P.exports=function m(S,E){var b=[];return v(S,function(I,O,A){E(I,O,A)&&b.push(I)}),b}},65317:P=>{P.exports=function G(h,v,m,S){for(var E=h.length,b=m+(S?1:-1);S?b--:++b<E;)if(v(h[b],b,h))return b;return-1}},50686:(P,G,h)=>{var v=h(85059),m=h(75039);P.exports=function S(E,b,I,O,A){var B=-1,H=E.length;for(I||(I=m),A||(A=[]);++B<H;){var k=E[B];b>0&&I(k)?b>1?S(k,b-1,I,O,A):v(A,k):O||(A[A.length]=k)}return A}},30755:(P,G,h)=>{var m=h(40456)();P.exports=m},45184:(P,G,h)=>{var v=h(30755),m=h(118);P.exports=function S(E,b){return E&&v(E,b,m)}},15456:(P,G,h)=>{var v=h(65456),m=h(68533);P.exports=function S(E,b){for(var I=0,O=(b=v(b,E)).length;null!=E&&I<O;)E=E[m(b[I++])];return I&&I==O?E:void 0}},38247:(P,G,h)=>{var v=h(85059),m=h(21503);P.exports=function S(E,b,I){var O=b(E);return m(E)?O:v(O,I(E))}},93337:(P,G,h)=>{var v=h(60443),m=h(21318),S=h(92902),I=v?v.toStringTag:void 0;P.exports=function O(A){return null==A?void 0===A?"[object Undefined]":"[object Null]":I&&I in Object(A)?m(A):S(A)}},31100:P=>{P.exports=function G(h,v){return h>v}},84781:P=>{var h=Object.prototype.hasOwnProperty;P.exports=function v(m,S){return null!=m&&h.call(m,S)}},69989:P=>{P.exports=function G(h,v){return null!=h&&v in Object(h)}},14164:(P,G,h)=>{var v=h(65317),m=h(70968),S=h(24977);P.exports=function E(b,I,O){return I==I?S(b,I,O):v(b,m,O)}},60186:(P,G,h)=>{var v=h(93337),m=h(72671);P.exports=function E(b){return m(b)&&"[object Arguments]"==v(b)}},85740:(P,G,h)=>{var v=h(58325),m=h(72671);P.exports=function S(E,b,I,O,A){return E===b||(null==E||null==b||!m(E)&&!m(b)?E!=E&&b!=b:v(E,b,I,O,S,A))}},58325:(P,G,h)=>{var v=h(2858),m=h(63914),S=h(78583),E=h(32286),b=h(28794),I=h(21503),O=h(80891),A=h(48159),H="[object Arguments]",k="[object Array]",Y="[object Object]",le=Object.prototype.hasOwnProperty;P.exports=function o(ae,pe,de,q,ve,we){var Ae=I(ae),_=I(pe),ke=Ae?k:b(ae),$e=_?k:b(pe),We=(ke=ke==H?Y:ke)==Y,Ke=($e=$e==H?Y:$e)==Y,Ze=ke==$e;if(Ze&&O(ae)){if(!O(pe))return!1;Ae=!0,We=!1}if(Ze&&!We)return we||(we=new v),Ae||A(ae)?m(ae,pe,de,q,ve,we):S(ae,pe,ke,de,q,ve,we);if(!(1&de)){var st=We&&le.call(ae,"__wrapped__"),mt=Ke&&le.call(pe,"__wrapped__");if(st||mt){var Nt=st?ae.value():ae,Ut=mt?pe.value():pe;return we||(we=new v),ve(Nt,Ut,de,q,we)}}return!!Ze&&(we||(we=new v),E(ae,pe,de,q,ve,we))}},97021:(P,G,h)=>{var v=h(28794),m=h(72671);P.exports=function E(b){return m(b)&&"[object Map]"==v(b)}},40431:(P,G,h)=>{var v=h(2858),m=h(85740);P.exports=function b(I,O,A,B){var H=A.length,k=H,Y=!B;if(null==I)return!k;for(I=Object(I);H--;){var ee=A[H];if(Y&&ee[2]?ee[1]!==I[ee[0]]:!(ee[0]in I))return!1}for(;++H<k;){var le=(ee=A[H])[0],o=I[le],ae=ee[1];if(Y&&ee[2]){if(void 0===o&&!(le in I))return!1}else{var pe=new v;if(B)var de=B(o,ae,le,I,O,pe);if(!(void 0===de?m(ae,o,3,B,pe):de))return!1}}return!0}},70968:P=>{P.exports=function G(h){return h!=h}},37304:(P,G,h)=>{var v=h(75946),m=h(91943),S=h(25940),E=h(52827),I=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");P.exports=function Y(ee){return!(!S(ee)||m(ee))&&(v(ee)?k:I).test(E(ee))}},771:(P,G,h)=>{var v=h(28794),m=h(72671);P.exports=function E(b){return m(b)&&"[object Set]"==v(b)}},1083:(P,G,h)=>{var v=h(93337),m=h(96231),S=h(72671),Ze={};Ze["[object Float32Array]"]=Ze["[object Float64Array]"]=Ze["[object Int8Array]"]=Ze["[object Int16Array]"]=Ze["[object Int32Array]"]=Ze["[object Uint8Array]"]=Ze["[object Uint8ClampedArray]"]=Ze["[object Uint16Array]"]=Ze["[object Uint32Array]"]=!0,Ze["[object Arguments]"]=Ze["[object Array]"]=Ze["[object ArrayBuffer]"]=Ze["[object Boolean]"]=Ze["[object DataView]"]=Ze["[object Date]"]=Ze["[object Error]"]=Ze["[object Function]"]=Ze["[object Map]"]=Ze["[object Number]"]=Ze["[object Object]"]=Ze["[object RegExp]"]=Ze["[object Set]"]=Ze["[object String]"]=Ze["[object WeakMap]"]=!1,P.exports=function st(mt){return S(mt)&&m(mt.length)&&!!Ze[v(mt)]}},96517:(P,G,h)=>{var v=h(98133),m=h(9458),S=h(32608),E=h(21503),b=h(87495);P.exports=function I(O){return"function"==typeof O?O:null==O?S:"object"==typeof O?E(O)?m(O[0],O[1]):v(O):b(O)}},81172:(P,G,h)=>{var v=h(45488),m=h(85491),E=Object.prototype.hasOwnProperty;P.exports=function b(I){if(!v(I))return m(I);var O=[];for(var A in Object(I))E.call(I,A)&&"constructor"!=A&&O.push(A);return O}},92809:(P,G,h)=>{var v=h(25940),m=h(45488),S=h(32158),b=Object.prototype.hasOwnProperty;P.exports=function I(O){if(!v(O))return S(O);var A=m(O),B=[];for(var H in O)"constructor"==H&&(A||!b.call(O,H))||B.push(H);return B}},99069:P=>{P.exports=function G(h,v){return h<v}},92046:(P,G,h)=>{var v=h(43132),m=h(56507);P.exports=function S(E,b){var I=-1,O=m(E)?Array(E.length):[];return v(E,function(A,B,H){O[++I]=b(A,B,H)}),O}},98133:(P,G,h)=>{var v=h(40431),m=h(22379),S=h(642);P.exports=function E(b){var I=m(b);return 1==I.length&&I[0][2]?S(I[0][0],I[0][1]):function(O){return O===b||v(O,b,I)}}},9458:(P,G,h)=>{var v=h(85740),m=h(8817),S=h(11172),E=h(45352),b=h(22442),I=h(642),O=h(68533);P.exports=function H(k,Y){return E(k)&&b(Y)?I(O(k),Y):function(ee){var le=m(ee,k);return void 0===le&&le===Y?S(ee,k):v(Y,le,3)}}},73842:(P,G,h)=>{var v=h(2858),m=h(49276),S=h(30755),E=h(33675),b=h(25940),I=h(16555),O=h(99351);P.exports=function A(B,H,k,Y,ee){B!==H&&S(H,function(le,o){if(ee||(ee=new v),b(le))E(B,H,o,k,A,Y,ee);else{var ae=Y?Y(O(B,o),le,o+"",B,H,ee):void 0;void 0===ae&&(ae=le),m(B,o,ae)}},I)}},33675:(P,G,h)=>{var v=h(49276),m=h(19292),S=h(65208),E=h(99454),b=h(4264),I=h(77151),O=h(21503),A=h(21330),B=h(80891),H=h(75946),k=h(25940),Y=h(97614),ee=h(48159),le=h(99351),o=h(8067);P.exports=function ae(pe,de,q,ve,we,Ae,_){var ke=le(pe,q),$e=le(de,q),We=_.get($e);if(We)v(pe,q,We);else{var Ke=Ae?Ae(ke,$e,q+"",pe,de,_):void 0,Ze=void 0===Ke;if(Ze){var st=O($e),mt=!st&&B($e),Nt=!st&&!mt&&ee($e);Ke=$e,st||mt||Nt?O(ke)?Ke=ke:A(ke)?Ke=E(ke):mt?(Ze=!1,Ke=m($e,!0)):Nt?(Ze=!1,Ke=S($e,!0)):Ke=[]:Y($e)||I($e)?(Ke=ke,I(ke)?Ke=o(ke):(!k(ke)||H(ke))&&(Ke=b($e))):Ze=!1}Ze&&(_.set($e,Ke),we(Ke,$e,ve,Ae,_),_.delete($e)),v(pe,q,Ke)}}},6119:(P,G,h)=>{var v=h(84633),m=h(15456),S=h(96517),E=h(92046),b=h(18750),I=h(85647),O=h(41215),A=h(32608),B=h(21503);P.exports=function H(k,Y,ee){Y=Y.length?v(Y,function(ae){return B(ae)?function(pe){return m(pe,1===ae.length?ae[0]:ae)}:ae}):[A];var le=-1;Y=v(Y,I(S));var o=E(k,function(ae,pe,de){return{criteria:v(Y,function(ve){return ve(ae)}),index:++le,value:ae}});return b(o,function(ae,pe){return O(ae,pe,ee)})}},83021:(P,G,h)=>{var v=h(95495),m=h(11172);P.exports=function S(E,b){return v(E,b,function(I,O){return m(E,O)})}},95495:(P,G,h)=>{var v=h(15456),m=h(55963),S=h(65456);P.exports=function E(b,I,O){for(var A=-1,B=I.length,H={};++A<B;){var k=I[A],Y=v(b,k);O(Y,k)&&m(H,S(k,b),Y)}return H}},11847:P=>{P.exports=function G(h){return function(v){return null==v?void 0:v[h]}}},39222:(P,G,h)=>{var v=h(15456);P.exports=function m(S){return function(E){return v(E,S)}}},16307:P=>{var G=Math.ceil,h=Math.max;P.exports=function v(m,S,E,b){for(var I=-1,O=h(G((S-m)/(E||1)),0),A=Array(O);O--;)A[b?O:++I]=m,m+=E;return A}},13570:P=>{P.exports=function G(h,v,m,S,E){return E(h,function(b,I,O){m=S?(S=!1,b):v(m,b,I,O)}),m}},23269:(P,G,h)=>{var v=h(32608),m=h(53983),S=h(72185);P.exports=function E(b,I){return S(m(b,I,v),b+"")}},55963:(P,G,h)=>{var v=h(89719),m=h(65456),S=h(58442),E=h(25940),b=h(68533);P.exports=function I(O,A,B,H){if(!E(O))return O;for(var k=-1,Y=(A=m(A,O)).length,ee=Y-1,le=O;null!=le&&++k<Y;){var o=b(A[k]),ae=B;if("__proto__"===o||"constructor"===o||"prototype"===o)return O;if(k!=ee){var pe=le[o];void 0===(ae=H?H(pe,o,le):void 0)&&(ae=E(pe)?pe:S(A[k+1])?[]:{})}v(le,o,ae),le=le[o]}return O}},69510:(P,G,h)=>{var v=h(76684),m=h(56713),S=h(32608);P.exports=m?function(b,I){return m(b,"toString",{configurable:!0,enumerable:!1,value:v(I),writable:!0})}:S},18750:P=>{P.exports=function G(h,v){var m=h.length;for(h.sort(v);m--;)h[m]=h[m].value;return h}},85334:P=>{P.exports=function G(h,v){for(var m=-1,S=Array(h);++m<h;)S[m]=v(m);return S}},93935:(P,G,h)=>{var v=h(60443),m=h(84633),S=h(21503),E=h(44129),I=v?v.prototype:void 0,O=I?I.toString:void 0;P.exports=function A(B){if("string"==typeof B)return B;if(S(B))return m(B,A)+"";if(E(B))return O?O.call(B):"";var H=B+"";return"0"==H&&1/B==-1/0?"-0":H}},83348:(P,G,h)=>{var v=h(42760),m=/^\s+/;P.exports=function S(E){return E&&E.slice(0,v(E)+1).replace(m,"")}},85647:P=>{P.exports=function G(h){return function(v){return h(v)}}},80707:(P,G,h)=>{var v=h(58849),m=h(61253),S=h(37609),E=h(25972),b=h(14575),I=h(24174);P.exports=function A(B,H,k){var Y=-1,ee=m,le=B.length,o=!0,ae=[],pe=ae;if(k)o=!1,ee=S;else if(le>=200){var de=H?null:b(B);if(de)return I(de);o=!1,ee=E,pe=new v}else pe=H?[]:ae;e:for(;++Y<le;){var q=B[Y],ve=H?H(q):q;if(q=k||0!==q?q:0,o&&ve==ve){for(var we=pe.length;we--;)if(pe[we]===ve)continue e;H&&pe.push(ve),ae.push(q)}else ee(pe,ve,k)||(pe!==ae&&pe.push(ve),ae.push(q))}return ae}},19179:(P,G,h)=>{var v=h(84633);P.exports=function m(S,E){return v(E,function(b){return S[b]})}},38645:P=>{P.exports=function G(h,v,m){for(var S=-1,E=h.length,b=v.length,I={};++S<E;)m(I,h[S],S<b?v[S]:void 0);return I}},25972:P=>{P.exports=function G(h,v){return h.has(v)}},21481:(P,G,h)=>{var v=h(32608);P.exports=function m(S){return"function"==typeof S?S:v}},65456:(P,G,h)=>{var v=h(21503),m=h(45352),S=h(32855),E=h(73943);P.exports=function b(I,O){return v(I)?I:m(I,O)?[I]:S(E(I))}},43362:(P,G,h)=>{var v=h(73457);P.exports=function m(S){var E=new S.constructor(S.byteLength);return new v(E).set(new v(S)),E}},19292:(P,G,h)=>{P=h.nmd(P);var v=h(12119),m=G&&!G.nodeType&&G,S=m&&P&&!P.nodeType&&P,b=S&&S.exports===m?v.Buffer:void 0,I=b?b.allocUnsafe:void 0;P.exports=function O(A,B){if(B)return A.slice();var H=A.length,k=I?I(H):new A.constructor(H);return A.copy(k),k}},17e3:(P,G,h)=>{var v=h(43362);P.exports=function m(S,E){var b=E?v(S.buffer):S.buffer;return new S.constructor(b,S.byteOffset,S.byteLength)}},74098:P=>{var G=/\w*$/;P.exports=function h(v){var m=new v.constructor(v.source,G.exec(v));return m.lastIndex=v.lastIndex,m}},62533:(P,G,h)=>{var v=h(60443),m=v?v.prototype:void 0,S=m?m.valueOf:void 0;P.exports=function E(b){return S?Object(S.call(b)):{}}},65208:(P,G,h)=>{var v=h(43362);P.exports=function m(S,E){var b=E?v(S.buffer):S.buffer;return new S.constructor(b,S.byteOffset,S.length)}},13443:(P,G,h)=>{var v=h(44129);P.exports=function m(S,E){if(S!==E){var b=void 0!==S,I=null===S,O=S==S,A=v(S),B=void 0!==E,H=null===E,k=E==E,Y=v(E);if(!H&&!Y&&!A&&S>E||A&&B&&k&&!H&&!Y||I&&B&&k||!b&&k||!O)return 1;if(!I&&!A&&!Y&&S<E||Y&&b&&O&&!I&&!A||H&&b&&O||!B&&O||!k)return-1}return 0}},41215:(P,G,h)=>{var v=h(13443);P.exports=function m(S,E,b){for(var I=-1,O=S.criteria,A=E.criteria,B=O.length,H=b.length;++I<B;){var k=v(O[I],A[I]);if(k)return I>=H?k:k*("desc"==b[I]?-1:1)}return S.index-E.index}},99454:P=>{P.exports=function G(h,v){var m=-1,S=h.length;for(v||(v=Array(S));++m<S;)v[m]=h[m];return v}},31989:(P,G,h)=>{var v=h(89719),m=h(85683);P.exports=function S(E,b,I,O){var A=!I;I||(I={});for(var B=-1,H=b.length;++B<H;){var k=b[B],Y=O?O(I[k],E[k],k,I,E):void 0;void 0===Y&&(Y=E[k]),A?m(I,k,Y):v(I,k,Y)}return I}},84444:(P,G,h)=>{var v=h(31989),m=h(39383);P.exports=function S(E,b){return v(E,m(E),b)}},59905:(P,G,h)=>{var v=h(31989),m=h(53051);P.exports=function S(E,b){return v(E,m(E),b)}},24610:(P,G,h)=>{var v=h(12119);P.exports=v["__core-js_shared__"]},84944:(P,G,h)=>{var v=h(23269),m=h(93342);P.exports=function S(E){return v(function(b,I){var O=-1,A=I.length,B=A>1?I[A-1]:void 0,H=A>2?I[2]:void 0;for(B=E.length>3&&"function"==typeof B?(A--,B):void 0,H&&m(I[0],I[1],H)&&(B=A<3?void 0:B,A=1),b=Object(b);++O<A;){var k=I[O];k&&E(b,k,O,B)}return b})}},16539:(P,G,h)=>{var v=h(56507);P.exports=function m(S,E){return function(b,I){if(null==b)return b;if(!v(b))return S(b,I);for(var O=b.length,A=E?O:-1,B=Object(b);(E?A--:++A<O)&&!1!==I(B[A],A,B););return b}}},40456:P=>{P.exports=function G(h){return function(v,m,S){for(var E=-1,b=Object(v),I=S(v),O=I.length;O--;){var A=I[h?O:++E];if(!1===m(b[A],A,b))break}return v}}},24653:(P,G,h)=>{var v=h(96517),m=h(56507),S=h(118);P.exports=function E(b){return function(I,O,A){var B=Object(I);if(!m(I)){var H=v(O,3);I=S(I),O=function(Y){return H(B[Y],Y,B)}}var k=b(I,O,A);return k>-1?B[H?I[k]:k]:void 0}}},97509:(P,G,h)=>{var v=h(16307),m=h(93342),S=h(12232);P.exports=function E(b){return function(I,O,A){return A&&"number"!=typeof A&&m(I,O,A)&&(O=A=void 0),I=S(I),void 0===O?(O=I,I=0):O=S(O),A=void 0===A?I<O?1:-1:S(A),v(I,O,A,b)}}},14575:(P,G,h)=>{var v=h(46323),m=h(12552),S=h(24174),b=v&&1/S(new v([,-0]))[1]==1/0?function(I){return new v(I)}:m;P.exports=b},56713:(P,G,h)=>{var v=h(53436),m=function(){try{var S=v(Object,"defineProperty");return S({},"",{}),S}catch(E){}}();P.exports=m},63914:(P,G,h)=>{var v=h(58849),m=h(79503),S=h(25972);P.exports=function I(O,A,B,H,k,Y){var ee=1&B,le=O.length,o=A.length;if(le!=o&&!(ee&&o>le))return!1;var ae=Y.get(O),pe=Y.get(A);if(ae&&pe)return ae==A&&pe==O;var de=-1,q=!0,ve=2&B?new v:void 0;for(Y.set(O,A),Y.set(A,O);++de<le;){var we=O[de],Ae=A[de];if(H)var _=ee?H(Ae,we,de,A,O,Y):H(we,Ae,de,O,A,Y);if(void 0!==_){if(_)continue;q=!1;break}if(ve){if(!m(A,function(ke,$e){if(!S(ve,$e)&&(we===ke||k(we,ke,B,H,Y)))return ve.push($e)})){q=!1;break}}else if(we!==Ae&&!k(we,Ae,B,H,Y)){q=!1;break}}return Y.delete(O),Y.delete(A),q}},78583:(P,G,h)=>{var v=h(60443),m=h(73457),S=h(20217),E=h(63914),b=h(83205),I=h(24174),ve=v?v.prototype:void 0,we=ve?ve.valueOf:void 0;P.exports=function Ae(_,ke,$e,We,Ke,Ze,st){switch($e){case"[object DataView]":if(_.byteLength!=ke.byteLength||_.byteOffset!=ke.byteOffset)return!1;_=_.buffer,ke=ke.buffer;case"[object ArrayBuffer]":return!(_.byteLength!=ke.byteLength||!Ze(new m(_),new m(ke)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+_,+ke);case"[object Error]":return _.name==ke.name&&_.message==ke.message;case"[object RegExp]":case"[object String]":return _==ke+"";case"[object Map]":var mt=b;case"[object Set]":if(mt||(mt=I),_.size!=ke.size&&!(1&We))return!1;var Ut=st.get(_);if(Ut)return Ut==ke;We|=2,st.set(_,ke);var Ct=E(mt(_),mt(ke),We,Ke,Ze,st);return st.delete(_),Ct;case"[object Symbol]":if(we)return we.call(_)==we.call(ke)}return!1}},32286:(P,G,h)=>{var v=h(47597),E=Object.prototype.hasOwnProperty;P.exports=function b(I,O,A,B,H,k){var Y=1&A,ee=v(I),le=ee.length;if(le!=v(O).length&&!Y)return!1;for(var pe=le;pe--;){var de=ee[pe];if(!(Y?de in O:E.call(O,de)))return!1}var q=k.get(I),ve=k.get(O);if(q&&ve)return q==O&&ve==I;var we=!0;k.set(I,O),k.set(O,I);for(var Ae=Y;++pe<le;){var _=I[de=ee[pe]],ke=O[de];if(B)var $e=Y?B(ke,_,de,O,I,k):B(_,ke,de,I,O,k);if(!(void 0===$e?_===ke||H(_,ke,A,B,k):$e)){we=!1;break}Ae||(Ae="constructor"==de)}if(we&&!Ae){var We=I.constructor,Ke=O.constructor;We!=Ke&&"constructor"in I&&"constructor"in O&&!("function"==typeof We&&We instanceof We&&"function"==typeof Ke&&Ke instanceof Ke)&&(we=!1)}return k.delete(I),k.delete(O),we}},3975:(P,G,h)=>{var v=h(22274),m=h(53983),S=h(72185);P.exports=function E(b){return S(m(b,void 0,v),b+"")}},79122:P=>{var G="object"==typeof global&&global&&global.Object===Object&&global;P.exports=G},47597:(P,G,h)=>{var v=h(38247),m=h(39383),S=h(118);P.exports=function E(b){return v(b,S,m)}},6967:(P,G,h)=>{var v=h(38247),m=h(53051),S=h(16555);P.exports=function E(b){return v(b,S,m)}},54537:(P,G,h)=>{var v=h(23819);P.exports=function m(S,E){var b=S.__data__;return v(E)?b["string"==typeof E?"string":"hash"]:b.map}},22379:(P,G,h)=>{var v=h(22442),m=h(118);P.exports=function S(E){for(var b=m(E),I=b.length;I--;){var O=b[I],A=E[O];b[I]=[O,A,v(A)]}return b}},53436:(P,G,h)=>{var v=h(37304),m=h(51990);P.exports=function S(E,b){var I=m(E,b);return v(I)?I:void 0}},29519:(P,G,h)=>{var m=h(69385)(Object.getPrototypeOf,Object);P.exports=m},21318:(P,G,h)=>{var v=h(60443),m=Object.prototype,S=m.hasOwnProperty,E=m.toString,b=v?v.toStringTag:void 0;P.exports=function I(O){var A=S.call(O,b),B=O[b];try{O[b]=void 0;var H=!0}catch(Y){}var k=E.call(O);return H&&(A?O[b]=B:delete O[b]),k}},39383:(P,G,h)=>{var v=h(69779),m=h(49975),E=Object.prototype.propertyIsEnumerable,b=Object.getOwnPropertySymbols;P.exports=b?function(O){return null==O?[]:(O=Object(O),v(b(O),function(A){return E.call(O,A)}))}:m},53051:(P,G,h)=>{var v=h(85059),m=h(29519),S=h(39383),E=h(49975);P.exports=Object.getOwnPropertySymbols?function(O){for(var A=[];O;)v(A,S(O)),O=m(O);return A}:E},28794:(P,G,h)=>{var v=h(37244),m=h(51501),S=h(44267),E=h(46323),b=h(24243),I=h(93337),O=h(52827),A="[object Map]",H="[object Promise]",k="[object Set]",Y="[object WeakMap]",ee="[object DataView]",le=O(v),o=O(m),ae=O(S),pe=O(E),de=O(b),q=I;(v&&q(new v(new ArrayBuffer(1)))!=ee||m&&q(new m)!=A||S&&q(S.resolve())!=H||E&&q(new E)!=k||b&&q(new b)!=Y)&&(q=function(ve){var we=I(ve),Ae="[object Object]"==we?ve.constructor:void 0,_=Ae?O(Ae):"";if(_)switch(_){case le:return ee;case o:return A;case ae:return H;case pe:return k;case de:return Y}return we}),P.exports=q},51990:P=>{P.exports=function G(h,v){return null==h?void 0:h[v]}},47283:(P,G,h)=>{var v=h(65456),m=h(77151),S=h(21503),E=h(58442),b=h(96231),I=h(68533);P.exports=function O(A,B,H){for(var k=-1,Y=(B=v(B,A)).length,ee=!1;++k<Y;){var le=I(B[k]);if(!(ee=null!=A&&H(A,le)))break;A=A[le]}return ee||++k!=Y?ee:!!(Y=null==A?0:A.length)&&b(Y)&&E(le,Y)&&(S(A)||m(A))}},77609:P=>{var I=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");P.exports=function O(A){return I.test(A)}},64312:(P,G,h)=>{var v=h(60862);P.exports=function m(){this.__data__=v?v(null):{},this.size=0}},46421:P=>{P.exports=function G(h){var v=this.has(h)&&delete this.__data__[h];return this.size-=v?1:0,v}},15764:(P,G,h)=>{var v=h(60862),E=Object.prototype.hasOwnProperty;P.exports=function b(I){var O=this.__data__;if(v){var A=O[I];return"__lodash_hash_undefined__"===A?void 0:A}return E.call(O,I)?O[I]:void 0}},18685:(P,G,h)=>{var v=h(60862),S=Object.prototype.hasOwnProperty;P.exports=function E(b){var I=this.__data__;return v?void 0!==I[b]:S.call(I,b)}},26676:(P,G,h)=>{var v=h(60862);P.exports=function S(E,b){var I=this.__data__;return this.size+=this.has(E)?0:1,I[E]=v&&void 0===b?"__lodash_hash_undefined__":b,this}},76782:P=>{var h=Object.prototype.hasOwnProperty;P.exports=function v(m){var S=m.length,E=new m.constructor(S);return S&&"string"==typeof m[0]&&h.call(m,"index")&&(E.index=m.index,E.input=m.input),E}},37878:(P,G,h)=>{var v=h(43362),m=h(17e3),S=h(74098),E=h(62533),b=h(65208);P.exports=function $e(We,Ke,Ze){var st=We.constructor;switch(Ke){case"[object ArrayBuffer]":return v(We);case"[object Boolean]":case"[object Date]":return new st(+We);case"[object DataView]":return m(We,Ze);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return b(We,Ze);case"[object Map]":case"[object Set]":return new st;case"[object Number]":case"[object String]":return new st(We);case"[object RegExp]":return S(We);case"[object Symbol]":return E(We)}}},4264:(P,G,h)=>{var v=h(78858),m=h(29519),S=h(45488);P.exports=function E(b){return"function"!=typeof b.constructor||S(b)?{}:v(m(b))}},75039:(P,G,h)=>{var v=h(60443),m=h(77151),S=h(21503),E=v?v.isConcatSpreadable:void 0;P.exports=function b(I){return S(I)||m(I)||!!(E&&I&&I[E])}},58442:P=>{var h=/^(?:0|[1-9]\d*)$/;P.exports=function v(m,S){var E=typeof m;return!!(S=null==S?9007199254740991:S)&&("number"==E||"symbol"!=E&&h.test(m))&&m>-1&&m%1==0&&m<S}},93342:(P,G,h)=>{var v=h(20217),m=h(56507),S=h(58442),E=h(25940);P.exports=function b(I,O,A){if(!E(A))return!1;var B=typeof O;return!!("number"==B?m(A)&&S(O,A.length):"string"==B&&O in A)&&v(A[O],I)}},45352:(P,G,h)=>{var v=h(21503),m=h(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;P.exports=function b(I,O){if(v(I))return!1;var A=typeof I;return!("number"!=A&&"symbol"!=A&&"boolean"!=A&&null!=I&&!m(I))||E.test(I)||!S.test(I)||null!=O&&I in Object(O)}},23819:P=>{P.exports=function G(h){var v=typeof h;return"string"==v||"number"==v||"symbol"==v||"boolean"==v?"__proto__"!==h:null===h}},91943:(P,G,h)=>{var E,v=h(24610),m=(E=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"";P.exports=function S(E){return!!m&&m in E}},45488:P=>{var G=Object.prototype;P.exports=function h(v){var m=v&&v.constructor;return v===("function"==typeof m&&m.prototype||G)}},22442:(P,G,h)=>{var v=h(25940);P.exports=function m(S){return S==S&&!v(S)}},41840:P=>{P.exports=function G(){this.__data__=[],this.size=0}},34378:(P,G,h)=>{var v=h(43503),S=Array.prototype.splice;P.exports=function E(b){var I=this.__data__,O=v(I,b);return!(O<0||(O==I.length-1?I.pop():S.call(I,O,1),--this.size,0))}},54981:(P,G,h)=>{var v=h(43503);P.exports=function m(S){var E=this.__data__,b=v(E,S);return b<0?void 0:E[b][1]}},67343:(P,G,h)=>{var v=h(43503);P.exports=function m(S){return v(this.__data__,S)>-1}},98895:(P,G,h)=>{var v=h(43503);P.exports=function m(S,E){var b=this.__data__,I=v(b,S);return I<0?(++this.size,b.push([S,E])):b[I][1]=E,this}},10638:(P,G,h)=>{var v=h(54994),m=h(9215),S=h(51501);P.exports=function E(){this.size=0,this.__data__={hash:new v,map:new(S||m),string:new v}}},11184:(P,G,h)=>{var v=h(54537);P.exports=function m(S){var E=v(this,S).delete(S);return this.size-=E?1:0,E}},70866:(P,G,h)=>{var v=h(54537);P.exports=function m(S){return v(this,S).get(S)}},43771:(P,G,h)=>{var v=h(54537);P.exports=function m(S){return v(this,S).has(S)}},51772:(P,G,h)=>{var v=h(54537);P.exports=function m(S,E){var b=v(this,S),I=b.size;return b.set(S,E),this.size+=b.size==I?0:1,this}},83205:P=>{P.exports=function G(h){var v=-1,m=Array(h.size);return h.forEach(function(S,E){m[++v]=[E,S]}),m}},642:P=>{P.exports=function G(h,v){return function(m){return null!=m&&m[h]===v&&(void 0!==v||h in Object(m))}}},90719:(P,G,h)=>{var v=h(30535);P.exports=function S(E){var b=v(E,function(O){return 500===I.size&&I.clear(),O}),I=b.cache;return b}},60862:(P,G,h)=>{var m=h(53436)(Object,"create");P.exports=m},85491:(P,G,h)=>{var m=h(69385)(Object.keys,Object);P.exports=m},32158:P=>{P.exports=function G(h){var v=[];if(null!=h)for(var m in Object(h))v.push(m);return v}},73597:(P,G,h)=>{P=h.nmd(P);var v=h(79122),m=G&&!G.nodeType&&G,S=m&&P&&!P.nodeType&&P,b=S&&S.exports===m&&v.process,I=function(){try{return S&&S.require&&S.require("util").types||b&&b.binding&&b.binding("util")}catch(A){}}();P.exports=I},92902:P=>{var h=Object.prototype.toString;P.exports=function v(m){return h.call(m)}},69385:P=>{P.exports=function G(h,v){return function(m){return h(v(m))}}},53983:(P,G,h)=>{var v=h(26999),m=Math.max;P.exports=function S(E,b,I){return b=m(void 0===b?E.length-1:b,0),function(){for(var O=arguments,A=-1,B=m(O.length-b,0),H=Array(B);++A<B;)H[A]=O[b+A];A=-1;for(var k=Array(b+1);++A<b;)k[A]=O[A];return k[b]=I(H),v(E,this,k)}}},12119:(P,G,h)=>{var v=h(79122),m="object"==typeof self&&self&&self.Object===Object&&self,S=v||m||Function("return this")();P.exports=S},99351:P=>{P.exports=function G(h,v){if(("constructor"!==v||"function"!=typeof h[v])&&"__proto__"!=v)return h[v]}},4600:P=>{P.exports=function h(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this}},31387:P=>{P.exports=function G(h){return this.__data__.has(h)}},24174:P=>{P.exports=function G(h){var v=-1,m=Array(h.size);return h.forEach(function(S){m[++v]=S}),m}},72185:(P,G,h)=>{var v=h(69510),S=h(10029)(v);P.exports=S},10029:P=>{var v=Date.now;P.exports=function m(S){var E=0,b=0;return function(){var I=v(),O=16-(I-b);if(b=I,O>0){if(++E>=800)return arguments[0]}else E=0;return S.apply(void 0,arguments)}}},13720:(P,G,h)=>{var v=h(9215);P.exports=function m(){this.__data__=new v,this.size=0}},64410:P=>{P.exports=function G(h){var v=this.__data__,m=v.delete(h);return this.size=v.size,m}},45576:P=>{P.exports=function G(h){return this.__data__.get(h)}},22247:P=>{P.exports=function G(h){return this.__data__.has(h)}},41585:(P,G,h)=>{var v=h(9215),m=h(51501),S=h(99850);P.exports=function b(I,O){var A=this.__data__;if(A instanceof v){var B=A.__data__;if(!m||B.length<199)return B.push([I,O]),this.size=++A.size,this;A=this.__data__=new S(B)}return A.set(I,O),this.size=A.size,this}},24977:P=>{P.exports=function G(h,v,m){for(var S=m-1,E=h.length;++S<E;)if(h[S]===v)return S;return-1}},52315:(P,G,h)=>{var v=h(75481),m=h(77609),S=h(81149);P.exports=function E(b){return m(b)?S(b):v(b)}},32855:(P,G,h)=>{var v=h(90719),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,E=v(function(b){var I=[];return 46===b.charCodeAt(0)&&I.push(""),b.replace(m,function(O,A,B,H){I.push(B?H.replace(S,"$1"):A||O)}),I});P.exports=E},68533:(P,G,h)=>{var v=h(44129);P.exports=function S(E){if("string"==typeof E||v(E))return E;var b=E+"";return"0"==b&&1/E==-1/0?"-0":b}},52827:P=>{var h=Function.prototype.toString;P.exports=function v(m){if(null!=m){try{return h.call(m)}catch(S){}try{return m+""}catch(S){}}return""}},42760:P=>{var G=/\s/;P.exports=function h(v){for(var m=v.length;m--&&G.test(v.charAt(m)););return m}},81149:P=>{var G="\\ud800-\\udfff",b="["+G+"]",I="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",O="\\ud83c[\\udffb-\\udfff]",B="[^"+G+"]",H="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",ee="(?:"+I+"|"+O+")?",le="[\\ufe0e\\ufe0f]?",ae=le+ee+"(?:\\u200d(?:"+[B,H,k].join("|")+")"+le+ee+")*",pe="(?:"+[B+I+"?",I,H,k,b].join("|")+")",de=RegExp(O+"(?="+O+")|"+pe+ae,"g");P.exports=function q(ve){for(var we=de.lastIndex=0;de.test(ve);)++we;return we}},11094:(P,G,h)=>{var v=h(44462);P.exports=function S(E){return v(E,4)}},90733:(P,G,h)=>{var v=h(44462);P.exports=function E(b){return v(b,5)}},76684:P=>{P.exports=function G(h){return function(){return h}}},28800:(P,G,h)=>{var v=h(23269),m=h(20217),S=h(93342),E=h(16555),b=Object.prototype,I=b.hasOwnProperty,O=v(function(A,B){A=Object(A);var H=-1,k=B.length,Y=k>2?B[2]:void 0;for(Y&&S(B[0],B[1],Y)&&(k=1);++H<k;)for(var ee=B[H],le=E(ee),o=-1,ae=le.length;++o<ae;){var pe=le[o],de=A[pe];(void 0===de||m(de,b[pe])&&!I.call(A,pe))&&(A[pe]=ee[pe])}return A});P.exports=O},35474:(P,G,h)=>{P.exports=h(89851)},20217:P=>{P.exports=function G(h,v){return h===v||h!=h&&v!=v}},35281:(P,G,h)=>{var v=h(69779),m=h(33609),S=h(96517),E=h(21503);P.exports=function b(I,O){return(E(I)?v:m)(I,S(O,3))}},62516:(P,G,h)=>{var S=h(24653)(h(36397));P.exports=S},36397:(P,G,h)=>{var v=h(65317),m=h(96517),S=h(44401),E=Math.max;P.exports=function b(I,O,A){var B=null==I?0:I.length;if(!B)return-1;var H=null==A?0:S(A);return H<0&&(H=E(B+H,0)),v(I,m(O,3),H)}},22274:(P,G,h)=>{var v=h(50686);P.exports=function m(S){return null!=S&&S.length?v(S,1):[]}},89851:(P,G,h)=>{var v=h(96837),m=h(43132),S=h(21481),E=h(21503);P.exports=function b(I,O){return(E(I)?v:m)(I,S(O))}},41176:(P,G,h)=>{var v=h(30755),m=h(21481),S=h(16555);P.exports=function E(b,I){return null==b?b:v(b,m(I),S)}},8817:(P,G,h)=>{var v=h(15456);P.exports=function m(S,E,b){var I=null==S?void 0:v(S,E);return void 0===I?b:I}},54842:(P,G,h)=>{var v=h(84781),m=h(47283);P.exports=function S(E,b){return null!=E&&m(E,b,v)}},11172:(P,G,h)=>{var v=h(69989),m=h(47283);P.exports=function S(E,b){return null!=E&&m(E,b,v)}},32608:P=>{P.exports=function G(h){return h}},77151:(P,G,h)=>{var v=h(60186),m=h(72671),S=Object.prototype,E=S.hasOwnProperty,b=S.propertyIsEnumerable,I=v(function(){return arguments}())?v:function(O){return m(O)&&E.call(O,"callee")&&!b.call(O,"callee")};P.exports=I},21503:P=>{P.exports=Array.isArray},56507:(P,G,h)=>{var v=h(75946),m=h(96231);P.exports=function S(E){return null!=E&&m(E.length)&&!v(E)}},21330:(P,G,h)=>{var v=h(56507),m=h(72671);P.exports=function S(E){return m(E)&&v(E)}},80891:(P,G,h)=>{P=h.nmd(P);var v=h(12119),m=h(63580),S=G&&!G.nodeType&&G,E=S&&P&&!P.nodeType&&P,I=E&&E.exports===S?v.Buffer:void 0;P.exports=(I?I.isBuffer:void 0)||m},71973:(P,G,h)=>{var v=h(81172),m=h(28794),S=h(77151),E=h(21503),b=h(56507),I=h(80891),O=h(45488),A=h(48159),Y=Object.prototype.hasOwnProperty;P.exports=function ee(le){if(null==le)return!0;if(b(le)&&(E(le)||"string"==typeof le||"function"==typeof le.splice||I(le)||A(le)||S(le)))return!le.length;var o=m(le);if("[object Map]"==o||"[object Set]"==o)return!le.size;if(O(le))return!v(le).length;for(var ae in le)if(Y.call(le,ae))return!1;return!0}},75946:(P,G,h)=>{var v=h(93337),m=h(25940);P.exports=function O(A){if(!m(A))return!1;var B=v(A);return"[object Function]"==B||"[object GeneratorFunction]"==B||"[object AsyncFunction]"==B||"[object Proxy]"==B}},96231:P=>{P.exports=function h(v){return"number"==typeof v&&v>-1&&v%1==0&&v<=9007199254740991}},13222:(P,G,h)=>{var v=h(97021),m=h(85647),S=h(73597),E=S&&S.isMap,b=E?m(E):v;P.exports=b},25940:P=>{P.exports=function G(h){var v=typeof h;return null!=h&&("object"==v||"function"==v)}},72671:P=>{P.exports=function G(h){return null!=h&&"object"==typeof h}},97614:(P,G,h)=>{var v=h(93337),m=h(29519),S=h(72671),O=Function.prototype.toString,A=Object.prototype.hasOwnProperty,B=O.call(Object);P.exports=function H(k){if(!S(k)||"[object Object]"!=v(k))return!1;var Y=m(k);if(null===Y)return!0;var ee=A.call(Y,"constructor")&&Y.constructor;return"function"==typeof ee&&ee instanceof ee&&O.call(ee)==B}},90799:(P,G,h)=>{var v=h(771),m=h(85647),S=h(73597),E=S&&S.isSet,b=E?m(E):v;P.exports=b},30248:(P,G,h)=>{var v=h(93337),m=h(21503),S=h(72671);P.exports=function b(I){return"string"==typeof I||!m(I)&&S(I)&&"[object String]"==v(I)}},44129:(P,G,h)=>{var v=h(93337),m=h(72671);P.exports=function E(b){return"symbol"==typeof b||m(b)&&"[object Symbol]"==v(b)}},48159:(P,G,h)=>{var v=h(1083),m=h(85647),S=h(73597),E=S&&S.isTypedArray,b=E?m(E):v;P.exports=b},34235:P=>{P.exports=function G(h){return void 0===h}},118:(P,G,h)=>{var v=h(72271),m=h(81172),S=h(56507);P.exports=function E(b){return S(b)?v(b):m(b)}},16555:(P,G,h)=>{var v=h(72271),m=h(92809),S=h(56507);P.exports=function E(b){return S(b)?v(b,!0):m(b)}},25809:P=>{P.exports=function G(h){var v=null==h?0:h.length;return v?h[v-1]:void 0}},17489:function(P,G,h){var v;P=h.nmd(P),function(){var m,I="Expected a function",A="__lodash_hash_undefined__",H="__lodash_placeholder__",_=128,Ct=1/0,On=9007199254740991,tr=4294967295,Nn=[["ary",_],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Re="[object Arguments]",Ue="[object Array]",lt="[object Boolean]",wt="[object Date]",yt="[object Error]",Bn="[object Function]",fi="[object GeneratorFunction]",Gt="[object Map]",Dt="[object Number]",U="[object Object]",te="[object Promise]",Fe="[object RegExp]",De="[object Set]",rt="[object String]",xt="[object Symbol]",Kt="[object WeakMap]",Wt="[object ArrayBuffer]",Hn="[object DataView]",kn="[object Float32Array]",Fr="[object Float64Array]",xn="[object Int8Array]",pt="[object Int16Array]",En="[object Int32Array]",Dn="[object Uint8Array]",nr="[object Uint8ClampedArray]",Vr="[object Uint16Array]",Jn="[object Uint32Array]",$n=/\b__p \+= '';/g,wo=/\b(__p \+=) '' \+/g,ga=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ro=/&(?:amp|lt|gt|quot|#39);/g,So=/[&<>"']/g,ge=RegExp(ro.source),Xr=RegExp(So.source),Vi=/<%-([\s\S]+?)%>/g,To=/<%([\s\S]+?)%>/g,ut=/<%=([\s\S]+?)%>/g,Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,io=/^\w*$/,oo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bi=/[\\^$.*+?()[\]{}|]/g,rr=RegExp(Bi.source),Eo=/^\s+/,mr=/\s/,va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ma=/\{\n\/\* \[wrapped with (.+)\] \*/,Er=/,? & /,Wo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hi=/[()=,{}\[\]\/\s]/,$o=/\\(\\)?/g,it=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ua=/\w*$/,Si=/^[-+]0x[0-9a-f]+$/i,ya=/^0b[01]+$/i,xa=/^\[object .+?Constructor\]$/,bn=/^0o[0-7]+$/i,Po=/^(?:0|[1-9]\d*)$/,hs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ti=/($^)/,ji=/['\n\r\u2028\u2029\\]/g,Ei="\\ud800-\\udfff",Pr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",di="\\u2700-\\u27bf",nn="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="A-Z\\xc0-\\xd6\\xd8-\\xde",hi="\\ufe0e\\ufe0f",Mi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ga="["+Ei+"]",yr="["+Mi+"]",ir="["+Pr+"]",or="\\d+",Or="["+di+"]",Yo="["+nn+"]",Ao="[^"+Ei+Mi+or+di+nn+Ai+"]",Kr="\\ud83c[\\udffb-\\udfff]",Oi="[^"+Ei+"]",ao="(?:\\ud83c[\\udde6-\\uddff]){2}",kr="[\\ud800-\\udbff][\\udc00-\\udfff]",ki="["+Ai+"]",zi="(?:"+Yo+"|"+Ao+")",Xo="(?:"+ki+"|"+Ao+")",Ko="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Mo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",so="(?:"+ir+"|"+Kr+")?",_a="["+hi+"]?",wa=_a+so+"(?:\\u200d(?:"+[Oi,ao,kr].join("|")+")"+_a+so+")*",Sa="(?:"+[Or,ao,kr].join("|")+")"+wa,Wa="(?:"+[Oi+ir+"?",ir,ao,kr,Ga].join("|")+")",Ta=RegExp("['\u2019]","g"),Zo=RegExp(ir,"g"),ri=RegExp(Kr+"(?="+Kr+")|"+Wa+wa,"g"),uo=RegExp([ki+"?"+Yo+"+"+Ko+"(?="+[yr,ki,"$"].join("|")+")",Xo+"+"+Mo+"(?="+[yr,ki+zi,"$"].join("|")+")",ki+"?"+zi+"+"+Ko,ki+"+"+Mo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",or,Sa].join("|"),"g"),$a=RegExp("[\\u200d"+Ei+Pr+hi+"]"),Li=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qo=-1,wn={};wn[kn]=wn[Fr]=wn[xn]=wn[pt]=wn[En]=wn[Dn]=wn[nr]=wn[Vr]=wn[Jn]=!0,wn[Re]=wn[Ue]=wn[Wt]=wn[lt]=wn[Hn]=wn[wt]=wn[yt]=wn[Bn]=wn[Gt]=wn[Dt]=wn[U]=wn[Fe]=wn[De]=wn[rt]=wn[Kt]=!1;var Ie={};Ie[Re]=Ie[Ue]=Ie[Wt]=Ie[Hn]=Ie[lt]=Ie[wt]=Ie[kn]=Ie[Fr]=Ie[xn]=Ie[pt]=Ie[En]=Ie[Gt]=Ie[Dt]=Ie[U]=Ie[Fe]=Ie[De]=Ie[rt]=Ie[xt]=Ie[Dn]=Ie[nr]=Ie[Vr]=Ie[Jn]=!0,Ie[yt]=Ie[Bn]=Ie[Kt]=!1;var K={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},oe=parseFloat,fe=parseInt,Te="object"==typeof global&&global&&global.Object===Object&&global,_e="object"==typeof self&&self&&self.Object===Object&&self,c=Te||_e||Function("return this")(),p=G&&!G.nodeType&&G,x=p&&P&&!P.nodeType&&P,C=x&&x.exports===p,N=C&&Te.process,D=function(){try{return x&&x.require&&x.require("util").types||N&&N.binding&&N.binding("util")}catch(He){}}(),W=D&&D.isArrayBuffer,se=D&&D.isDate,ue=D&&D.isMap,be=D&&D.isRegExp,Oe=D&&D.isSet,Ye=D&&D.isTypedArray;function Pe(Ce,He,Me){switch(Me.length){case 0:return Ce.call(He);case 1:return Ce.call(He,Me[0]);case 2:return Ce.call(He,Me[0],Me[1]);case 3:return Ce.call(He,Me[0],Me[1],Me[2])}return Ce.apply(He,Me)}function Be(Ce,He,Me,ct){for(var Vt=-1,cn=null==Ce?0:Ce.length;++Vt<cn;){var zn=Ce[Vt];He(ct,zn,Me(zn),Ce)}return ct}function dt(Ce,He){for(var Me=-1,ct=null==Ce?0:Ce.length;++Me<ct&&!1!==He(Ce[Me],Me,Ce););return Ce}function Ht(Ce,He){for(var Me=null==Ce?0:Ce.length;Me--&&!1!==He(Ce[Me],Me,Ce););return Ce}function St(Ce,He){for(var Me=-1,ct=null==Ce?0:Ce.length;++Me<ct;)if(!He(Ce[Me],Me,Ce))return!1;return!0}function Ln(Ce,He){for(var Me=-1,ct=null==Ce?0:Ce.length,Vt=0,cn=[];++Me<ct;){var zn=Ce[Me];He(zn,Me,Ce)&&(cn[Vt++]=zn)}return cn}function jn(Ce,He){return!(null==Ce||!Ce.length)&&hr(Ce,He,0)>-1}function jr(Ce,He,Me){for(var ct=-1,Vt=null==Ce?0:Ce.length;++ct<Vt;)if(Me(He,Ce[ct]))return!0;return!1}function Tt(Ce,He){for(var Me=-1,ct=null==Ce?0:Ce.length,Vt=Array(ct);++Me<ct;)Vt[Me]=He(Ce[Me],Me,Ce);return Vt}function It(Ce,He){for(var Me=-1,ct=He.length,Vt=Ce.length;++Me<ct;)Ce[Vt+Me]=He[Me];return Ce}function xr(Ce,He,Me,ct){var Vt=-1,cn=null==Ce?0:Ce.length;for(ct&&cn&&(Me=Ce[++Vt]);++Vt<cn;)Me=He(Me,Ce[Vt],Vt,Ce);return Me}function un(Ce,He,Me,ct){var Vt=null==Ce?0:Ce.length;for(ct&&Vt&&(Me=Ce[--Vt]);Vt--;)Me=He(Me,Ce[Vt],Vt,Ce);return Me}function Fn(Ce,He){for(var Me=-1,ct=null==Ce?0:Ce.length;++Me<ct;)if(He(Ce[Me],Me,Ce))return!0;return!1}var ar=zr("length");function Oo(Ce,He,Me){var ct;return Me(Ce,function(Vt,cn,zn){if(He(Vt,cn,zn))return ct=cn,!1}),ct}function Ui(Ce,He,Me,ct){for(var Vt=Ce.length,cn=Me+(ct?1:-1);ct?cn--:++cn<Vt;)if(He(Ce[cn],cn,Ce))return cn;return-1}function hr(Ce,He,Me){return He==He?function br(Ce,He,Me){for(var ct=Me-1,Vt=Ce.length;++ct<Vt;)if(Ce[ct]===He)return ct;return-1}(Ce,He,Me):Ui(Ce,Vn,Me)}function _t(Ce,He,Me,ct){for(var Vt=Me-1,cn=Ce.length;++Vt<cn;)if(ct(Ce[Vt],He))return Vt;return-1}function Vn(Ce){return Ce!=Ce}function gi(Ce,He){var Me=null==Ce?0:Ce.length;return Me?Qn(Ce,He)/Me:NaN}function zr(Ce){return function(He){return null==He?m:He[Ce]}}function Ri(Ce){return function(He){return null==Ce?m:Ce[He]}}function ko(Ce,He,Me,ct,Vt){return Vt(Ce,function(cn,zn,_n){Me=ct?(ct=!1,cn):He(Me,cn,zn,_n)}),Me}function Qn(Ce,He){for(var Me,ct=-1,Vt=Ce.length;++ct<Vt;){var cn=He(Ce[ct]);cn!==m&&(Me=Me===m?cn:Me+cn)}return Me}function vi(Ce,He){for(var Me=-1,ct=Array(Ce);++Me<Ce;)ct[Me]=He(Me);return ct}function vn(Ce){return Ce&&Ce.slice(0,Sn(Ce)+1).replace(Eo,"")}function ln(Ce){return function(He){return Ce(He)}}function Qt(Ce,He){return Tt(He,function(Me){return Ce[Me]})}function Ea(Ce,He){return Ce.has(He)}function Vs(Ce,He){for(var Me=-1,ct=Ce.length;++Me<ct&&hr(He,Ce[Me],0)>-1;);return Me}function Ou(Ce,He){for(var Me=Ce.length;Me--&&hr(He,Ce[Me],0)>-1;);return Me}function ku(Ce,He){for(var Me=Ce.length,ct=0;Me--;)Ce[Me]===He&&++ct;return ct}var Pa=Ri({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Lu=Ri({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Yl(Ce){return"\\"+K[Ce]}function pr(Ce){return $a.test(Ce)}function oi(Ce){var He=-1,Me=Array(Ce.size);return Ce.forEach(function(ct,Vt){Me[++He]=[Vt,ct]}),Me}function Gi(Ce,He){return function(Me){return Ce(He(Me))}}function Zn(Ce,He){for(var Me=-1,ct=Ce.length,Vt=0,cn=[];++Me<ct;){var zn=Ce[Me];(zn===He||zn===H)&&(Ce[Me]=H,cn[Vt++]=Me)}return cn}function Ia(Ce){var He=-1,Me=Array(Ce.size);return Ce.forEach(function(ct){Me[++He]=ct}),Me}function mn(Ce){return pr(Ce)?function _r(Ce){for(var He=ri.lastIndex=0;ri.test(Ce);)++He;return He}(Ce):ar(Ce)}function an(Ce){return pr(Ce)?function Hs(Ce){return Ce.match(ri)||[]}(Ce):function ps(Ce){return Ce.split("")}(Ce)}function Sn(Ce){for(var He=Ce.length;He--&&mr.test(Ce.charAt(He)););return He}var co=Ri({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mi=function Ce(He){var i,Me=(He=null==He?c:mi.defaults(c.Object(),He,mi.pick(c,pi))).Array,ct=He.Date,Vt=He.Error,cn=He.Function,zn=He.Math,_n=He.Object,Ro=He.RegExp,fo=He.String,J=He.TypeError,ce=Me.prototype,Ve=_n.prototype,Se=He["__core-js_shared__"],je=cn.prototype.toString,Ne=Ve.hasOwnProperty,tt=0,ot=(i=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Et=Ve.toString,Pt=je.call(_n),qe=c._,Zt=Ro("^"+je.call(Ne).replace(Bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=C?He.Buffer:m,vt=He.Symbol,Un=He.Uint8Array,Yn=qt?qt.allocUnsafe:m,Cr=Gi(_n.getPrototypeOf,_n),In=_n.create,ea=Ve.propertyIsEnumerable,ho=ce.splice,Ur=vt?vt.isConcatSpreadable:m,vs=vt?vt.iterator:m,Aa=vt?vt.toStringTag:m,zs=function(){try{var i=Da(_n,"defineProperty");return i({},"",{}),i}catch(s){}}(),Hf=He.clearTimeout!==c.clearTimeout&&He.clearTimeout,jf=ct&&ct.now!==c.Date.now&&ct.now,zf=He.setTimeout!==c.setTimeout&&He.setTimeout,$i=zn.ceil,ms=zn.floor,Us=_n.getOwnPropertySymbols,Xl=qt?qt.isBuffer:m,Ru=He.isFinite,Uf=ce.join,Gf=Gi(_n.keys,_n),wr=zn.max,Gr=zn.min,Wf=ct.now,$f=He.parseInt,Kl=zn.random,Yf=ce.reverse,Nu=Da(He,"DataView"),ys=Da(He,"Map"),Du=Da(He,"Promise"),Ma=Da(He,"Set"),xs=Da(He,"WeakMap"),bs=Da(_n,"create"),Ar=xs&&new xs,Ya={},Fu=Va(Nu),Xf=Va(ys),No=Va(Du),_s=Va(Ma),Kf=Va(xs),Vu=vt?vt.prototype:m,Gs=Vu?Vu.valueOf:m,Jl=Vu?Vu.toString:m;function Q(i){if(qn(i)&&!$t(i)&&!(i instanceof fn)){if(i instanceof Yi)return i;if(Ne.call(i,"__wrapped__"))return Wc(i)}return new Yi(i)}var Cs=function(){function i(){}return function(s){if(!Kn(s))return{};if(In)return In(s);i.prototype=s;var l=new i;return i.prototype=m,l}}();function Bu(){}function Yi(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=m}function fn(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tr,this.__views__=[]}function Do(i){var s=-1,l=null==i?0:i.length;for(this.clear();++s<l;){var f=i[s];this.set(f[0],f[1])}}function Fo(i){var s=-1,l=null==i?0:i.length;for(this.clear();++s<l;){var f=i[s];this.set(f[0],f[1])}}function Xi(i){var s=-1,l=null==i?0:i.length;for(this.clear();++s<l;){var f=i[s];this.set(f[0],f[1])}}function ka(i){var s=-1,l=null==i?0:i.length;for(this.__data__=new Xi;++s<l;)this.add(i[s])}function Ki(i){var s=this.__data__=new Fo(i);this.size=s.size}function ju(i,s){var l=$t(i),f=!l&&Ha(i),y=!l&&!f&&Co(i),w=!l&&!f&&!y&&ss(i),M=l||f||y||w,z=M?vi(i.length,fo):[],X=z.length;for(var re in i)(s||Ne.call(i,re))&&(!M||!("length"==re||y&&("offset"==re||"parent"==re)||w&&("buffer"==re||"byteLength"==re||"byteOffset"==re)||mo(re,X)))&&z.push(re);return z}function zu(i){var s=i.length;return s?i[tu(0,s-1)]:m}function td(i,s){return Os(ai(i),yi(s,0,i.length))}function nd(i){return Os(ai(i))}function Ks(i,s,l){(l!==m&&!no(i[s],l)||l===m&&!(s in i))&&po(i,s,l)}function na(i,s,l){var f=i[s];(!Ne.call(i,s)||!no(f,l)||l===m&&!(s in i))&&po(i,s,l)}function Js(i,s){for(var l=i.length;l--;)if(no(i[l][0],s))return l;return-1}function rd(i,s,l,f){return ra(i,function(y,w,M){s(f,y,l(y),M)}),f}function Qs(i,s){return i&&go(s,Mr(s),i)}function po(i,s,l){"__proto__"==s&&zs?zs(i,s,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[s]=l}function ws(i,s){for(var l=-1,f=s.length,y=Me(f),w=null==i;++l<f;)y[l]=w?m:Ds(i,s[l]);return y}function yi(i,s,l){return i==i&&(l!==m&&(i=i<=l?i:l),s!==m&&(i=i>=s?i:s)),i}function xi(i,s,l,f,y,w){var M,z=1&s,X=2&s,re=4&s;if(l&&(M=y?l(i,f,y,w):l(i)),M!==m)return M;if(!Kn(i))return i;var ne=$t(i);if(ne){if(M=function Pd(i){var s=i.length,l=new i.constructor(s);return s&&"string"==typeof i[0]&&Ne.call(i,"index")&&(l.index=i.index,l.input=i.input),l}(i),!z)return ai(i,M)}else{var T=Yr(i),R=T==Bn||T==fi;if(Co(i))return xc(i,z);if(T==U||T==Re||R&&!y){if(M=X||R?{}:Fc(i),!z)return X?function yd(i,s){return go(i,Nc(i),s)}(i,function Uu(i,s){return i&&go(s,li(s),i)}(M,i)):function Vo(i,s){return go(i,dl(i),s)}(i,Qs(M,i))}else{if(!Ie[T])return y?i:{};M=function Vc(i,s,l){var f=i.constructor;switch(s){case Wt:return ul(i);case lt:case wt:return new f(+i);case Hn:return function bc(i,s){var l=s?ul(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.byteLength)}(i,l);case kn:case Fr:case xn:case pt:case En:case Dn:case nr:case Vr:case Jn:return su(i,l);case Gt:return new f;case Dt:case rt:return new f(i);case Fe:return function gd(i){var s=new i.constructor(i.source,Ua.exec(i));return s.lastIndex=i.lastIndex,s}(i);case De:return new f;case xt:return function vd(i){return Gs?_n(Gs.call(i)):{}}(i)}}(i,T,z)}}w||(w=new Ki);var j=w.get(i);if(j)return j;w.set(i,M),kl(i)?i.forEach(function(he){M.add(xi(he,s,l,he,i,w))}):zo(i)&&i.forEach(function(he,ye){M.set(ye,xi(he,s,l,ye,i,w))});var ie=ne?m:(re?X?Na:la:X?li:Mr)(i);return dt(ie||i,function(he,ye){ie&&(he=i[ye=he]),na(M,ye,xi(he,s,l,ye,i,w))}),M}function Gu(i,s,l){var f=l.length;if(null==i)return!f;for(i=_n(i);f--;){var y=l[f],M=i[y];if(M===m&&!(y in i)||!(0,s[y])(M))return!1}return!0}function ql(i,s,l){if("function"!=typeof i)throw new J(I);return Ms(function(){i.apply(m,l)},s)}function La(i,s,l,f){var y=-1,w=jn,M=!0,z=i.length,X=[],re=s.length;if(!z)return X;l&&(s=Tt(s,ln(l))),f?(w=jr,M=!1):s.length>=200&&(w=Ea,M=!1,s=new ka(s));e:for(;++y<z;){var ne=i[y],T=null==l?ne:l(ne);if(ne=f||0!==ne?ne:0,M&&T==T){for(var R=re;R--;)if(s[R]===T)continue e;X.push(ne)}else w(s,T,f)||X.push(ne)}return X}Q.templateSettings={escape:Vi,evaluate:To,interpolate:ut,variable:"",imports:{_:Q}},(Q.prototype=Bu.prototype).constructor=Q,(Yi.prototype=Cs(Bu.prototype)).constructor=Yi,(fn.prototype=Cs(Bu.prototype)).constructor=fn,Do.prototype.clear=function hg(){this.__data__=bs?bs(null):{},this.size=0},Do.prototype.delete=function Jf(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s},Do.prototype.get=function Qf(i){var s=this.__data__;if(bs){var l=s[i];return l===A?m:l}return Ne.call(s,i)?s[i]:m},Do.prototype.has=function Zf(i){var s=this.__data__;return bs?s[i]!==m:Ne.call(s,i)},Do.prototype.set=function pg(i,s){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=bs&&s===m?A:s,this},Fo.prototype.clear=function gg(){this.__data__=[],this.size=0},Fo.prototype.delete=function vg(i){var s=this.__data__,l=Js(s,i);return!(l<0||(l==s.length-1?s.pop():ho.call(s,l,1),--this.size,0))},Fo.prototype.get=function Oa(i){var s=this.__data__,l=Js(s,i);return l<0?m:s[l][1]},Fo.prototype.has=function Xa(i){return Js(this.__data__,i)>-1},Fo.prototype.set=function Ql(i,s){var l=this.__data__,f=Js(l,i);return f<0?(++this.size,l.push([i,s])):l[f][1]=s,this},Xi.prototype.clear=function ta(){this.size=0,this.__data__={hash:new Do,map:new(ys||Fo),string:new Do}},Xi.prototype.delete=function Ka(i){var s=du(this,i).delete(i);return this.size-=s?1:0,s},Xi.prototype.get=function dn(i){return du(this,i).get(i)},Xi.prototype.has=function hn(i){return du(this,i).has(i)},Xi.prototype.set=function Ws(i,s){var l=du(this,i),f=l.size;return l.set(i,s),this.size+=l.size==f?0:1,this},ka.prototype.add=ka.prototype.push=function qf(i){return this.__data__.set(i,A),this},ka.prototype.has=function ed(i){return this.__data__.has(i)},Ki.prototype.clear=function $s(){this.__data__=new Fo,this.size=0},Ki.prototype.delete=function Hu(i){var s=this.__data__,l=s.delete(i);return this.size=s.size,l},Ki.prototype.get=function Jr(i){return this.__data__.get(i)},Ki.prototype.has=function Ys(i){return this.__data__.has(i)},Ki.prototype.set=function Xs(i,s){var l=this.__data__;if(l instanceof Fo){var f=l.__data__;if(!ys||f.length<199)return f.push([i,s]),this.size=++l.size,this;l=this.__data__=new Xi(f)}return l.set(i,s),this.size=l.size,this};var ra=wc(Ni),Wu=wc($u,!0);function id(i,s){var l=!0;return ra(i,function(f,y,w){return l=!!s(f,y,w)}),l}function Zs(i,s,l){for(var f=-1,y=i.length;++f<y;){var w=i[f],M=s(w);if(null!=M&&(z===m?M==M&&!wi(M):l(M,z)))var z=M,X=w}return X}function tc(i,s){var l=[];return ra(i,function(f,y,w){s(f,y,w)&&l.push(f)}),l}function ur(i,s,l,f,y){var w=-1,M=i.length;for(l||(l=qi),y||(y=[]);++w<M;){var z=i[w];s>0&&l(z)?s>1?ur(z,s-1,l,f,y):It(y,z):f||(y[y.length]=z)}return y}var Ja=Sc(),Qa=Sc(!0);function Ni(i,s){return i&&Ja(i,s,Mr)}function $u(i,s){return i&&Qa(i,s,Mr)}function Ss(i,s){return Ln(s,function(l){return jo(i[l])})}function ia(i,s){for(var l=0,f=(s=sa(s,i)).length;null!=i&&l<f;)i=i[yo(s[l++])];return l&&l==f?i:m}function nc(i,s,l){var f=s(i);return $t(i)?f:It(f,l(i))}function Qr(i){return null==i?i===m?"[object Undefined]":"[object Null]":Aa&&Aa in _n(i)?function Sd(i){var s=Ne.call(i,Aa),l=i[Aa];try{i[Aa]=m;var f=!0}catch(w){}var y=Et.call(i);return f&&(s?i[Aa]=l:delete i[Aa]),y}(i):function Ld(i){return Et.call(i)}(i)}function Yu(i,s){return i>s}function Xu(i,s){return null!=i&&Ne.call(i,s)}function od(i,s){return null!=i&&s in _n(i)}function Ku(i,s,l){for(var f=l?jr:jn,y=i[0].length,w=i.length,M=w,z=Me(w),X=1/0,re=[];M--;){var ne=i[M];M&&s&&(ne=Tt(ne,ln(s))),X=Gr(ne.length,X),z[M]=!l&&(s||y>=120&&ne.length>=120)?new ka(M&&ne):m}ne=i[0];var T=-1,R=z[0];e:for(;++T<y&&re.length<X;){var j=ne[T],Z=s?s(j):j;if(j=l||0!==j?j:0,!(R?Ea(R,Z):f(re,Z,l))){for(M=w;--M;){var ie=z[M];if(!(ie?Ea(ie,Z):f(i[M],Z,l)))continue e}R&&R.push(Z),re.push(j)}}return re}function Ts(i,s,l){var f=null==(i=zc(i,s=sa(s,i)))?i:i[yo(Ci(s))];return null==f?m:Pe(f,i,l)}function Ju(i){return qn(i)&&Qr(i)==Re}function oa(i,s,l,f,y){return i===s||(null==i||null==s||!qn(i)&&!qn(s)?i!=i&&s!=s:function Qu(i,s,l,f,y,w){var M=$t(i),z=$t(s),X=M?Ue:Yr(i),re=z?Ue:Yr(s),ne=(X=X==Re?U:X)==U,T=(re=re==Re?U:re)==U,R=X==re;if(R&&Co(i)){if(!Co(s))return!1;M=!0,ne=!1}if(R&&!ne)return w||(w=new Ki),M||ss(i)?kc(i,s,l,f,y,w):function Lc(i,s,l,f,y,w,M){switch(l){case Hn:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case Wt:return!(i.byteLength!=s.byteLength||!w(new Un(i),new Un(s)));case lt:case wt:case Dt:return no(+i,+s);case yt:return i.name==s.name&&i.message==s.message;case Fe:case rt:return i==s+"";case Gt:var z=oi;case De:if(z||(z=Ia),i.size!=s.size&&!(1&f))return!1;var re=M.get(i);if(re)return re==s;f|=2,M.set(i,s);var ne=kc(z(i),z(s),f,y,w,M);return M.delete(i),ne;case xt:if(Gs)return Gs.call(i)==Gs.call(s)}return!1}(i,s,X,l,f,y,w);if(!(1&l)){var j=ne&&Ne.call(i,"__wrapped__"),Z=T&&Ne.call(s,"__wrapped__");if(j||Z){var ie=j?i.value():i,he=Z?s.value():s;return w||(w=new Ki),y(ie,he,l,f,w)}}return!!R&&(w||(w=new Ki),function Rc(i,s,l,f,y,w){var M=1&l,z=la(i),X=z.length;if(X!=la(s).length&&!M)return!1;for(var T=X;T--;){var R=z[T];if(!(M?R in s:Ne.call(s,R)))return!1}var j=w.get(i),Z=w.get(s);if(j&&Z)return j==s&&Z==i;var ie=!0;w.set(i,s),w.set(s,i);for(var he=M;++T<X;){var ye=i[R=z[T]],Ee=s[R];if(f)var Ge=M?f(Ee,ye,R,s,i,w):f(ye,Ee,R,i,s,w);if(!(Ge===m?ye===Ee||y(ye,Ee,l,f,w):Ge)){ie=!1;break}he||(he="constructor"==R)}if(ie&&!he){var ze=i.constructor,Xe=s.constructor;ze!=Xe&&"constructor"in i&&"constructor"in s&&!("function"==typeof ze&&ze instanceof ze&&"function"==typeof Xe&&Xe instanceof Xe)&&(ie=!1)}return w.delete(i),w.delete(s),ie}(i,s,l,f,y,w))}(i,s,l,f,oa,y))}function Zu(i,s,l,f){var y=l.length,w=y,M=!f;if(null==i)return!w;for(i=_n(i);y--;){var z=l[y];if(M&&z[2]?z[1]!==i[z[0]]:!(z[0]in i))return!1}for(;++y<w;){var X=(z=l[y])[0],re=i[X],ne=z[1];if(M&&z[2]){if(re===m&&!(X in i))return!1}else{var T=new Ki;if(f)var R=f(re,ne,X,i,s,T);if(!(R===m?oa(ne,re,3,f,T):R))return!1}}return!0}function ic(i){return!(!Kn(i)||function Id(i){return!!ot&&ot in i}(i))&&(jo(i)?Zt:xa).test(Va(i))}function sc(i){return"function"==typeof i?i:null==i?Sr:"object"==typeof i?$t(i)?Wr(i[0],i[1]):bi(i):Df(i)}function qu(i){if(!As(i))return Gf(i);var s=[];for(var l in _n(i))Ne.call(i,l)&&"constructor"!=l&&s.push(l);return s}function el(i,s){return i<s}function uc(i,s){var l=-1,f=ui(i)?Me(i.length):[];return ra(i,function(y,w,M){f[++l]=s(y,w,M)}),f}function bi(i){var s=fl(i);return 1==s.length&&s[0][2]?Hc(s[0][0],s[0][1]):function(l){return l===i||Zu(l,i,s)}}function Wr(i,s){return Xn(i)&&Bc(s)?Hc(yo(i),s):function(l){var f=Ds(l,i);return f===m&&f===s?Nl(l,i):oa(s,f,3)}}function Za(i,s,l,f,y){i!==s&&Ja(s,function(w,M){if(y||(y=new Ki),Kn(w))!function fd(i,s,l,f,y,w,M){var z=pl(i,l),X=pl(s,l),re=M.get(X);if(re)Ks(i,l,re);else{var ne=w?w(z,X,l+"",i,s,M):m,T=ne===m;if(T){var R=$t(X),j=!R&&Co(X),Z=!R&&!j&&ss(X);ne=X,R||j||Z?$t(z)?ne=z:cr(z)?ne=ai(z):j?(T=!1,ne=xc(X,!0)):Z?(T=!1,ne=su(X,!0)):ne=[]:Rs(X)||Ha(X)?(ne=z,Ha(z)?ne=wf(z):(!Kn(z)||jo(z))&&(ne=Fc(X))):T=!1}T&&(M.set(X,ne),y(ne,X,f,w,M),M.delete(X)),Ks(i,l,ne)}}(i,s,M,l,Za,f,y);else{var z=f?f(pl(i,M),w,M+"",i,s,y):m;z===m&&(z=w),Ks(i,M,z)}},li)}function lc(i,s){var l=i.length;if(l)return mo(s+=s<0?l:0,l)?i[s]:m}function cc(i,s,l){s=s.length?Tt(s,function(w){return $t(w)?function(M){return ia(M,1===w.length?w[0]:w)}:w}):[Sr];var f=-1;return s=Tt(s,ln(Lt())),function Jt(Ce,He){var Me=Ce.length;for(Ce.sort(He);Me--;)Ce[Me]=Ce[Me].value;return Ce}(uc(i,function(w,M,z){return{criteria:Tt(s,function(re){return re(w)}),index:++f,value:w}}),function(w,M){return function md(i,s,l){for(var f=-1,y=i.criteria,w=s.criteria,M=y.length,z=l.length;++f<M;){var X=uu(y[f],w[f]);if(X)return f>=z?X:X*("desc"==l[f]?-1:1)}return i.index-s.index}(w,M,l)})}function tl(i,s,l){for(var f=-1,y=s.length,w={};++f<y;){var M=s[f],z=ia(i,M);l(z,M)&&qa(w,sa(M,i),z)}return w}function eu(i,s,l,f){var y=f?_t:hr,w=-1,M=s.length,z=i;for(i===s&&(s=ai(s)),l&&(z=Tt(i,ln(l)));++w<M;)for(var X=0,re=s[w],ne=l?l(re):re;(X=y(z,ne,X,f))>-1;)z!==i&&ho.call(z,X,1),ho.call(i,X,1);return i}function nl(i,s){for(var l=i?s.length:0,f=l-1;l--;){var y=s[l];if(l==f||y!==w){var w=y;mo(y)?ho.call(i,y,1):ru(i,y)}}return i}function tu(i,s){return i+ms(Kl()*(s-i+1))}function rl(i,s){var l="";if(!i||s<1||s>On)return l;do{s%2&&(l+=i),(s=ms(s/2))&&(i+=i)}while(s);return l}function en(i,s){return gl(jc(i,s,Sr),i+"")}function hd(i){return zu(Fs(i))}function il(i,s){var l=Fs(i);return Os(l,yi(s,0,l.length))}function qa(i,s,l,f){if(!Kn(i))return i;for(var y=-1,w=(s=sa(s,i)).length,M=w-1,z=i;null!=z&&++y<w;){var X=yo(s[y]),re=l;if("__proto__"===X||"constructor"===X||"prototype"===X)return i;if(y!=M){var ne=z[X];(re=f?f(ne,X,z):m)===m&&(re=Kn(ne)?ne:mo(s[y+1])?[]:{})}na(z,X,re),z=z[X]}return i}var hc=Ar?function(i,s){return Ar.set(i,s),i}:Sr,pd=zs?function(i,s){return zs(i,"toString",{configurable:!0,enumerable:!1,value:fs(s),writable:!0})}:Sr;function Bt(i){return Os(Fs(i))}function $r(i,s,l){var f=-1,y=i.length;s<0&&(s=-s>y?0:y+s),(l=l>y?y:l)<0&&(l+=y),y=s>l?0:l-s>>>0,s>>>=0;for(var w=Me(y);++f<y;)w[f]=i[f+s];return w}function Ji(i,s){var l;return ra(i,function(f,y,w){return!(l=s(f,y,w))}),!!l}function nu(i,s,l){var f=0,y=null==i?f:i.length;if("number"==typeof s&&s==s&&y<=2147483647){for(;f<y;){var w=f+y>>>1,M=i[w];null!==M&&!wi(M)&&(l?M<=s:M<s)?f=w+1:y=w}return y}return ol(i,s,Sr,l)}function ol(i,s,l,f){var y=0,w=null==i?0:i.length;if(0===w)return 0;for(var M=(s=l(s))!=s,z=null===s,X=wi(s),re=s===m;y<w;){var ne=ms((y+w)/2),T=l(i[ne]),R=T!==m,j=null===T,Z=T==T,ie=wi(T);if(M)var he=f||Z;else he=re?Z&&(f||R):z?Z&&R&&(f||!j):X?Z&&R&&!j&&(f||!ie):!j&&!ie&&(f?T<=s:T<s);he?y=ne+1:w=ne}return Gr(w,4294967294)}function al(i,s){for(var l=-1,f=i.length,y=0,w=[];++l<f;){var M=i[l],z=s?s(M):M;if(!l||!no(z,X)){var X=z;w[y++]=0===M?0:M}}return w}function pc(i){return"number"==typeof i?i:wi(i)?NaN:+i}function _i(i){if("string"==typeof i)return i;if($t(i))return Tt(i,_i)+"";if(wi(i))return Jl?Jl.call(i):"";var s=i+"";return"0"==s&&1/i==-Ct?"-0":s}function aa(i,s,l){var f=-1,y=jn,w=i.length,M=!0,z=[],X=z;if(l)M=!1,y=jr;else if(w>=200){var re=s?null:Cd(i);if(re)return Ia(re);M=!1,y=Ea,X=new ka}else X=s?[]:z;e:for(;++f<w;){var ne=i[f],T=s?s(ne):ne;if(ne=l||0!==ne?ne:0,M&&T==T){for(var R=X.length;R--;)if(X[R]===T)continue e;s&&X.push(T),z.push(ne)}else y(X,T,l)||(X!==z&&X.push(T),z.push(ne))}return z}function ru(i,s){return null==(i=zc(i,s=sa(s,i)))||delete i[yo(Ci(s))]}function gc(i,s,l,f){return qa(i,s,l(ia(i,s)),f)}function iu(i,s,l,f){for(var y=i.length,w=f?y:-1;(f?w--:++w<y)&&s(i[w],w,i););return l?$r(i,f?0:w,f?w+1:y):$r(i,f?w+1:0,f?y:w)}function vc(i,s){var l=i;return l instanceof fn&&(l=l.value()),xr(s,function(f,y){return y.func.apply(y.thisArg,It([f],y.args))},l)}function sl(i,s,l){var f=i.length;if(f<2)return f?aa(i[0]):[];for(var y=-1,w=Me(f);++y<f;)for(var M=i[y],z=-1;++z<f;)z!=y&&(w[y]=La(w[y]||M,i[z],s,l));return aa(ur(w,1),s,l)}function mc(i,s,l){for(var f=-1,y=i.length,w=s.length,M={};++f<y;)l(M,i[f],f<w?s[f]:m);return M}function Ra(i){return cr(i)?i:[]}function ou(i){return"function"==typeof i?i:Sr}function sa(i,s){return $t(i)?i:Xn(i,s)?[i]:hu(Tn(i))}var yc=en;function Qi(i,s,l){var f=i.length;return l=l===m?f:l,!s&&l>=f?i:$r(i,s,l)}var au=Hf||function(i){return c.clearTimeout(i)};function xc(i,s){if(s)return i.slice();var l=i.length,f=Yn?Yn(l):new i.constructor(l);return i.copy(f),f}function ul(i){var s=new i.constructor(i.byteLength);return new Un(s).set(new Un(i)),s}function su(i,s){var l=s?ul(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)}function uu(i,s){if(i!==s){var l=i!==m,f=null===i,y=i==i,w=wi(i),M=s!==m,z=null===s,X=s==s,re=wi(s);if(!z&&!re&&!w&&i>s||w&&M&&X&&!z&&!re||f&&M&&X||!l&&X||!y)return 1;if(!f&&!w&&!re&&i<s||re&&l&&y&&!f&&!w||z&&l&&y||!M&&y||!X)return-1}return 0}function _c(i,s,l,f){for(var y=-1,w=i.length,M=l.length,z=-1,X=s.length,re=wr(w-M,0),ne=Me(X+re),T=!f;++z<X;)ne[z]=s[z];for(;++y<M;)(T||y<w)&&(ne[l[y]]=i[y]);for(;re--;)ne[z++]=i[y++];return ne}function Cc(i,s,l,f){for(var y=-1,w=i.length,M=-1,z=l.length,X=-1,re=s.length,ne=wr(w-z,0),T=Me(ne+re),R=!f;++y<ne;)T[y]=i[y];for(var j=y;++X<re;)T[j+X]=s[X];for(;++M<z;)(R||y<w)&&(T[j+l[M]]=i[y++]);return T}function ai(i,s){var l=-1,f=i.length;for(s||(s=Me(f));++l<f;)s[l]=i[l];return s}function go(i,s,l,f){var y=!l;l||(l={});for(var w=-1,M=s.length;++w<M;){var z=s[w],X=f?f(l[z],i[z],z,l,i):m;X===m&&(X=i[z]),y?po(l,z,X):na(l,z,X)}return l}function lu(i,s){return function(l,f){var y=$t(l)?Be:rd,w=s?s():{};return y(l,i,Lt(f,2),w)}}function es(i){return en(function(s,l){var f=-1,y=l.length,w=y>1?l[y-1]:m,M=y>2?l[2]:m;for(w=i.length>3&&"function"==typeof w?(y--,w):m,M&&pn(l[0],l[1],M)&&(w=y<3?m:w,y=1),s=_n(s);++f<y;){var z=l[f];z&&i(s,z,f,w)}return s})}function wc(i,s){return function(l,f){if(null==l)return l;if(!ui(l))return i(l,f);for(var y=l.length,w=s?y:-1,M=_n(l);(s?w--:++w<y)&&!1!==f(M[w],w,M););return l}}function Sc(i){return function(s,l,f){for(var y=-1,w=_n(s),M=f(s),z=M.length;z--;){var X=M[i?z:++y];if(!1===l(w[X],X,w))break}return s}}function Tc(i){return function(s){var l=pr(s=Tn(s))?an(s):m,f=l?l[0]:s.charAt(0),y=l?Qi(l,1).join(""):s.slice(1);return f[i]()+y}}function ts(i){return function(s){return xr(Lf(Sp(s).replace(Ta,"")),i,"")}}function Es(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var l=Cs(i.prototype),f=i.apply(l,s);return Kn(f)?f:l}}function Ec(i){return function(s,l,f){var y=_n(s);if(!ui(s)){var w=Lt(l,3);s=Mr(s),l=function(z){return w(y[z],z,y)}}var M=i(s,l,f);return M>-1?y[w?s[M]:M]:m}}function Pc(i){return lr(function(s){var l=s.length,f=l,y=Yi.prototype.thru;for(i&&s.reverse();f--;){var w=s[f];if("function"!=typeof w)throw new J(I);if(y&&!M&&"wrapper"==ca(w))var M=new Yi([],!0)}for(f=M?f:l;++f<l;){var z=ca(w=s[f]),X="wrapper"==z?rs(w):m;M=X&&hl(X[0])&&424==X[1]&&!X[4].length&&1==X[9]?M[ca(X[0])].apply(M,X[3]):1==w.length&&hl(w)?M[z]():M.thru(w)}return function(){var re=arguments,ne=re[0];if(M&&1==re.length&&$t(ne))return M.plant(ne).value();for(var T=0,R=l?s[T].apply(this,re):ne;++T<l;)R=s[T].call(this,R);return R}})}function cu(i,s,l,f,y,w,M,z,X,re){var ne=s&_,T=1&s,R=2&s,j=24&s,Z=512&s,ie=R?m:Es(i);return function he(){for(var ye=arguments.length,Ee=Me(ye),Ge=ye;Ge--;)Ee[Ge]=arguments[Ge];if(j)var ze=vo(he),Xe=ku(Ee,ze);if(f&&(Ee=_c(Ee,f,y,j)),w&&(Ee=Cc(Ee,w,M,j)),ye-=Xe,j&&ye<re){var Je=Zn(Ee,ze);return ll(i,s,cu,he.placeholder,l,Ee,Je,z,X,re-ye)}var nt=T?l:this,ht=R?nt[i]:i;return ye=Ee.length,z?Ee=Rd(Ee,z):Z&&ye>1&&Ee.reverse(),ne&&X<ye&&(Ee.length=X),this&&this!==c&&this instanceof he&&(ht=ie||Es(ht)),ht.apply(nt,Ee)}}function Ic(i,s){return function(l,f){return function rc(i,s,l,f){return Ni(i,function(y,w,M){s(f,l(y),w,M)}),f}(l,i,s(f),{})}}function fu(i,s){return function(l,f){var y;if(l===m&&f===m)return s;if(l!==m&&(y=l),f!==m){if(y===m)return f;"string"==typeof l||"string"==typeof f?(l=_i(l),f=_i(f)):(l=pc(l),f=pc(f)),y=i(l,f)}return y}}function ua(i){return lr(function(s){return s=Tt(s,ln(Lt())),en(function(l){var f=this;return i(s,function(y){return Pe(y,f,l)})})})}function Ps(i,s){var l=(s=s===m?" ":_i(s)).length;if(l<2)return l?rl(s,i):s;var f=rl(s,$i(i/mn(s)));return pr(s)?Qi(an(f),0,i).join(""):f.slice(0,i)}function Is(i){return function(s,l,f){return f&&"number"!=typeof f&&pn(s,l,f)&&(l=f=m),s=pa(s),l===m?(l=s,s=0):l=pa(l),function dc(i,s,l,f){for(var y=-1,w=wr($i((s-i)/(l||1)),0),M=Me(w);w--;)M[f?w:++y]=i,i+=l;return M}(s,l,f=f===m?s<l?1:-1:pa(f),i)}}function ns(i){return function(s,l){return"string"==typeof s&&"string"==typeof l||(s=Fi(s),l=Fi(l)),i(s,l)}}function ll(i,s,l,f,y,w,M,z,X,re){var ne=8&s;s|=ne?32:64,4&(s&=~(ne?64:32))||(s&=-4);var ie=[i,s,y,ne?w:m,ne?M:m,ne?m:w,ne?m:M,z,X,re],he=l.apply(m,ie);return hl(i)&&Uc(he,ie),he.placeholder=f,Bo(he,i,s)}function cl(i){var s=zn[i];return function(l,f){if(l=Fi(l),(f=null==f?0:Gr(Yt(f),292))&&Ru(l)){var y=(Tn(l)+"e").split("e");return+((y=(Tn(s(y[0]+"e"+(+y[1]+f)))+"e").split("e"))[0]+"e"+(+y[1]-f))}return s(l)}}var Cd=Ma&&1/Ia(new Ma([,-0]))[1]==Ct?function(i){return new Ma(i)}:jl;function Ac(i){return function(s){var l=Yr(s);return l==Gt?oi(s):l==De?function Bs(Ce){var He=-1,Me=Array(Ce.size);return Ce.forEach(function(ct){Me[++He]=[ct,ct]}),Me}(s):function Lo(Ce,He){return Tt(He,function(Me){return[Me,Ce[Me]]})}(s,i(s))}}function Zi(i,s,l,f,y,w,M,z){var X=2&s;if(!X&&"function"!=typeof i)throw new J(I);var re=f?f.length:0;if(re||(s&=-97,f=y=m),M=M===m?M:wr(Yt(M),0),z=z===m?z:Yt(z),re-=y?y.length:0,64&s){var ne=f,T=y;f=y=m}var R=X?m:rs(i),j=[i,s,l,f,y,ne,T,w,M,z];if(R&&function Od(i,s){var l=i[1],f=s[1],y=l|f;if(!(y<131||(f==_&&8==l||f==_&&256==l&&i[7].length<=s[8]||384==f&&s[7].length<=s[8]&&8==l)))return i;1&f&&(i[2]=s[2],y|=1&l?0:4);var z=s[3];if(z){var X=i[3];i[3]=X?_c(X,z,s[4]):z,i[4]=X?Zn(i[3],H):s[4]}(z=s[5])&&(i[5]=(X=i[5])?Cc(X,z,s[6]):z,i[6]=X?Zn(i[5],H):s[6]),(z=s[7])&&(i[7]=z),f&_&&(i[8]=null==i[8]?s[8]:Gr(i[8],s[8])),null==i[9]&&(i[9]=s[9]),i[0]=s[0],i[1]=y}(j,R),i=j[0],s=j[1],l=j[2],f=j[3],y=j[4],!(z=j[9]=j[9]===m?X?0:i.length:wr(j[9]-re,0))&&24&s&&(s&=-25),s&&1!=s)Z=8==s||16==s?function bd(i,s,l){var f=Es(i);return function y(){for(var w=arguments.length,M=Me(w),z=w,X=vo(y);z--;)M[z]=arguments[z];var re=w<3&&M[0]!==X&&M[w-1]!==X?[]:Zn(M,X);return(w-=re.length)<l?ll(i,s,cu,y.placeholder,m,M,re,m,m,l-w):Pe(this&&this!==c&&this instanceof y?f:i,this,M)}}(i,s,z):32!=s&&33!=s||y.length?cu.apply(m,j):function _d(i,s,l,f){var y=1&s,w=Es(i);return function M(){for(var z=-1,X=arguments.length,re=-1,ne=f.length,T=Me(ne+X),R=this&&this!==c&&this instanceof M?w:i;++re<ne;)T[re]=f[re];for(;X--;)T[re++]=arguments[++z];return Pe(R,y?l:this,T)}}(i,s,l,f);else var Z=function xd(i,s,l){var f=1&s,y=Es(i);return function w(){return(this&&this!==c&&this instanceof w?y:i).apply(f?l:this,arguments)}}(i,s,l);return Bo((R?hc:Uc)(Z,j),i,s)}function Mc(i,s,l,f){return i===m||no(i,Ve[l])&&!Ne.call(f,l)?s:i}function Oc(i,s,l,f,y,w){return Kn(i)&&Kn(s)&&(w.set(s,i),Za(i,s,m,Oc,w),w.delete(s)),i}function wd(i){return Rs(i)?m:i}function kc(i,s,l,f,y,w){var M=1&l,z=i.length,X=s.length;if(z!=X&&!(M&&X>z))return!1;var re=w.get(i),ne=w.get(s);if(re&&ne)return re==s&&ne==i;var T=-1,R=!0,j=2&l?new ka:m;for(w.set(i,s),w.set(s,i);++T<z;){var Z=i[T],ie=s[T];if(f)var he=M?f(ie,Z,T,s,i,w):f(Z,ie,T,i,s,w);if(he!==m){if(he)continue;R=!1;break}if(j){if(!Fn(s,function(ye,Ee){if(!Ea(j,Ee)&&(Z===ye||y(Z,ye,l,f,w)))return j.push(Ee)})){R=!1;break}}else if(Z!==ie&&!y(Z,ie,l,f,w)){R=!1;break}}return w.delete(i),w.delete(s),R}function lr(i){return gl(jc(i,m,Kc),i+"")}function la(i){return nc(i,Mr,dl)}function Na(i){return nc(i,li,Nc)}var rs=Ar?function(i){return Ar.get(i)}:jl;function ca(i){for(var s=i.name+"",l=Ya[s],f=Ne.call(Ya,s)?l.length:0;f--;){var y=l[f],w=y.func;if(null==w||w==i)return y.name}return s}function vo(i){return(Ne.call(Q,"placeholder")?Q:i).placeholder}function Lt(){var i=Q.iteratee||Bl;return i=i===Bl?sc:i,arguments.length?i(arguments[0],arguments[1]):i}function du(i,s){var l=i.__data__;return function Di(i){var s=typeof i;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i}(s)?l["string"==typeof s?"string":"hash"]:l.map}function fl(i){for(var s=Mr(i),l=s.length;l--;){var f=s[l],y=i[f];s[l]=[f,y,Bc(y)]}return s}function Da(i,s){var l=function gs(Ce,He){return null==Ce?m:Ce[He]}(i,s);return ic(l)?l:m}var dl=Us?function(i){return null==i?[]:(i=_n(i),Ln(Us(i),function(s){return ea.call(i,s)}))}:Ul,Nc=Us?function(i){for(var s=[];i;)It(s,dl(i)),i=Cr(i);return s}:Ul,Yr=Qr;function Dc(i,s,l){for(var f=-1,y=(s=sa(s,i)).length,w=!1;++f<y;){var M=yo(s[f]);if(!(w=null!=i&&l(i,M)))break;i=i[M]}return w||++f!=y?w:!!(y=null==i?0:i.length)&&Pu(y)&&mo(M,y)&&($t(i)||Ha(i))}function Fc(i){return"function"!=typeof i.constructor||As(i)?{}:Cs(Cr(i))}function qi(i){return $t(i)||Ha(i)||!!(Ur&&i&&i[Ur])}function mo(i,s){var l=typeof i;return!!(s=null==s?On:s)&&("number"==l||"symbol"!=l&&Po.test(i))&&i>-1&&i%1==0&&i<s}function pn(i,s,l){if(!Kn(l))return!1;var f=typeof s;return!!("number"==f?ui(l)&&mo(s,l.length):"string"==f&&s in l)&&no(l[s],i)}function Xn(i,s){if($t(i))return!1;var l=typeof i;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=i&&!wi(i))||io.test(i)||!Br.test(i)||null!=s&&i in _n(s)}function hl(i){var s=ca(i),l=Q[s];if("function"!=typeof l||!(s in fn.prototype))return!1;if(i===l)return!0;var f=rs(l);return!!f&&i===f[0]}(Nu&&Yr(new Nu(new ArrayBuffer(1)))!=Hn||ys&&Yr(new ys)!=Gt||Du&&Yr(Du.resolve())!=te||Ma&&Yr(new Ma)!=De||xs&&Yr(new xs)!=Kt)&&(Yr=function(i){var s=Qr(i),l=s==U?i.constructor:m,f=l?Va(l):"";if(f)switch(f){case Fu:return Hn;case Xf:return Gt;case No:return te;case _s:return De;case Kf:return Kt}return s});var Ad=Se?jo:Gl;function As(i){var s=i&&i.constructor;return i===("function"==typeof s&&s.prototype||Ve)}function Bc(i){return i==i&&!Kn(i)}function Hc(i,s){return function(l){return null!=l&&l[i]===s&&(s!==m||i in _n(l))}}function jc(i,s,l){return s=wr(s===m?i.length-1:s,0),function(){for(var f=arguments,y=-1,w=wr(f.length-s,0),M=Me(w);++y<w;)M[y]=f[s+y];y=-1;for(var z=Me(s+1);++y<s;)z[y]=f[y];return z[s]=l(M),Pe(i,this,z)}}function zc(i,s){return s.length<2?i:ia(i,$r(s,0,-1))}function Rd(i,s){for(var l=i.length,f=Gr(s.length,l),y=ai(i);f--;){var w=s[f];i[f]=mo(w,l)?y[w]:m}return i}function pl(i,s){if(("constructor"!==s||"function"!=typeof i[s])&&"__proto__"!=s)return i[s]}var Uc=Gc(hc),Ms=zf||function(i,s){return c.setTimeout(i,s)},gl=Gc(pd);function Bo(i,s,l){var f=s+"";return gl(i,function Fa(i,s){var l=s.length;if(!l)return i;var f=l-1;return s[f]=(l>1?"& ":"")+s[f],s=s.join(l>2?", ":" "),i.replace(va,"{\n/* [wrapped with "+s+"] */\n")}(f,function Nd(i,s){return dt(Nn,function(l){var f="_."+l[0];s&l[1]&&!jn(i,f)&&i.push(f)}),i.sort()}(function Ed(i){var s=i.match(ma);return s?s[1].split(Er):[]}(f),l)))}function Gc(i){var s=0,l=0;return function(){var f=Wf(),y=16-(f-l);if(l=f,y>0){if(++s>=800)return arguments[0]}else s=0;return i.apply(m,arguments)}}function Os(i,s){var l=-1,f=i.length,y=f-1;for(s=s===m?f:s;++l<s;){var w=tu(l,y),M=i[w];i[w]=i[l],i[l]=M}return i.length=s,i}var hu=function Md(i){var s=Su(i,function(f){return 500===l.size&&l.clear(),f}),l=s.cache;return s}(function(i){var s=[];return 46===i.charCodeAt(0)&&s.push(""),i.replace(oo,function(l,f,y,w){s.push(y?w.replace($o,"$1"):f||l)}),s});function yo(i){if("string"==typeof i||wi(i))return i;var s=i+"";return"0"==s&&1/i==-Ct?"-0":s}function Va(i){if(null!=i){try{return je.call(i)}catch(s){}try{return i+""}catch(s){}}return""}function Wc(i){if(i instanceof fn)return i.clone();var s=new Yi(i.__wrapped__,i.__chain__);return s.__actions__=ai(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}var Bd=en(function(i,s){return cr(i)?La(i,ur(s,1,cr,!0)):[]}),$c=en(function(i,s){var l=Ci(s);return cr(l)&&(l=m),cr(i)?La(i,ur(s,1,cr,!0),Lt(l,2)):[]}),eo=en(function(i,s){var l=Ci(s);return cr(l)&&(l=m),cr(i)?La(i,ur(s,1,cr,!0),m,l):[]});function Yc(i,s,l){var f=null==i?0:i.length;if(!f)return-1;var y=null==l?0:Yt(l);return y<0&&(y=wr(f+y,0)),Ui(i,Lt(s,3),y)}function Xc(i,s,l){var f=null==i?0:i.length;if(!f)return-1;var y=f-1;return l!==m&&(y=Yt(l),y=l<0?wr(f+y,0):Gr(y,f-1)),Ui(i,Lt(s,3),y,!0)}function Kc(i){return null!=i&&i.length?ur(i,1):[]}function Jc(i){return i&&i.length?i[0]:m}var Kd=en(function(i){var s=Tt(i,Ra);return s.length&&s[0]===i[0]?Ku(s):[]}),Qc=en(function(i){var s=Ci(i),l=Tt(i,Ra);return s===Ci(l)?s=m:l.pop(),l.length&&l[0]===i[0]?Ku(l,Lt(s,2)):[]}),Jd=en(function(i){var s=Ci(i),l=Tt(i,Ra);return(s="function"==typeof s?s:m)&&l.pop(),l.length&&l[0]===i[0]?Ku(l,m,s):[]});function Ci(i){var s=null==i?0:i.length;return s?i[s-1]:m}var eh=en(Zc);function Zc(i,s){return i&&i.length&&s&&s.length?eu(i,s):i}var rh=lr(function(i,s){var l=null==i?0:i.length,f=ws(i,s);return nl(i,Tt(s,function(y){return mo(y,l)?+y:y}).sort(uu)),f});function vl(i){return null==i?i:Yf.call(i)}var xh=en(function(i){return aa(ur(i,1,cr,!0))}),bh=en(function(i){var s=Ci(i);return cr(s)&&(s=m),aa(ur(i,1,cr,!0),Lt(s,2))}),et=en(function(i){var s=Ci(i);return s="function"==typeof s?s:m,aa(ur(i,1,cr,!0),m,s)});function Le(i){if(!i||!i.length)return[];var s=0;return i=Ln(i,function(l){if(cr(l))return s=wr(l.length,s),!0}),vi(s,function(l){return Tt(i,zr(l))})}function Ho(i,s){if(!i||!i.length)return[];var l=Le(i);return null==s?l:Tt(l,function(f){return Pe(s,m,f)})}var to=en(function(i,s){return cr(i)?La(i,s):[]}),si=en(function(i){return sl(Ln(i,cr))}),fa=en(function(i){var s=Ci(i);return cr(s)&&(s=m),sl(Ln(i,cr),Lt(s,2))}),ks=en(function(i){var s=Ci(i);return s="function"==typeof s?s:m,sl(Ln(i,cr),m,s)}),at=en(Le),xo=en(function(i){var s=i.length,l=s>1?i[s-1]:m;return l="function"==typeof l?(i.pop(),l):m,Ho(i,l)});function bl(i){var s=Q(i);return s.__chain__=!0,s}function Zr(i,s){return s(i)}var ha=lr(function(i){var s=i.length,l=s?i[0]:0,f=this.__wrapped__,y=function(w){return ws(w,i)};return!(s>1||this.__actions__.length)&&f instanceof fn&&mo(l)?((f=f.slice(l,+l+(s?1:0))).__actions__.push({func:Zr,args:[y],thisArg:m}),new Yi(f,this.__chain__).thru(function(w){return s&&!w.length&&w.push(m),w})):this.thru(y)}),wh=lu(function(i,s,l){Ne.call(i,l)?++i[l]:po(i,l,1)}),mu=Ec(Yc),tf=Ec(Xc);function rf(i,s){return($t(i)?dt:ra)(i,Lt(s,3))}function bo(i,s){return($t(i)?Ht:Wu)(i,Lt(s,3))}var Cl=lu(function(i,s,l){Ne.call(i,l)?i[l].push(s):po(i,l,[s])}),wl=en(function(i,s,l){var f=-1,y="function"==typeof s,w=ui(i)?Me(i.length):[];return ra(i,function(M){w[++f]=y?Pe(s,M,l):Ts(M,s,l)}),w}),Sl=lu(function(i,s,l){po(i,l,s)});function qr(i,s){return($t(i)?Tt:uc)(i,Lt(s,3))}var os=lu(function(i,s,l){i[l?0:1].push(s)},function(){return[[],[]]}),Ih=en(function(i,s){if(null==i)return[];var l=s.length;return l>1&&pn(i,s[0],s[1])?s=[]:l>2&&pn(s[0],s[1],s[2])&&(s=[s[0]]),cc(i,ur(s,1),[])}),wu=jf||function(){return c.Date.now()};function of(i,s,l){return s=l?m:s,Zi(i,_,m,m,m,m,s=i&&null==s?i.length:s)}function af(i,s){var l;if("function"!=typeof s)throw new J(I);return i=Yt(i),function(){return--i>0&&(l=s.apply(this,arguments)),i<=1&&(s=m),l}}var El=en(function(i,s,l){var f=1;if(l.length){var y=Zn(l,vo(El));f|=32}return Zi(i,f,s,l,y)}),sf=en(function(i,s,l){var f=3;if(l.length){var y=Zn(l,vo(sf));f|=32}return Zi(s,f,i,l,y)});function cf(i,s,l){var f,y,w,M,z,X,re=0,ne=!1,T=!1,R=!0;if("function"!=typeof i)throw new J(I);function j(Je){var nt=f,ht=y;return f=y=m,re=Je,M=i.apply(ht,nt)}function Z(Je){return re=Je,z=Ms(ye,s),ne?j(Je):M}function he(Je){var nt=Je-X;return X===m||nt>=s||nt<0||T&&Je-re>=w}function ye(){var Je=wu();if(he(Je))return Ee(Je);z=Ms(ye,function ie(Je){var Cn=s-(Je-X);return T?Gr(Cn,w-(Je-re)):Cn}(Je))}function Ee(Je){return z=m,R&&f?j(Je):(f=y=m,M)}function Xe(){var Je=wu(),nt=he(Je);if(f=arguments,y=this,X=Je,nt){if(z===m)return Z(X);if(T)return au(z),z=Ms(ye,s),j(X)}return z===m&&(z=Ms(ye,s)),M}return s=Fi(s)||0,Kn(l)&&(ne=!!l.leading,w=(T="maxWait"in l)?wr(Fi(l.maxWait)||0,s):w,R="trailing"in l?!!l.trailing:R),Xe.cancel=function Ge(){z!==m&&au(z),re=0,f=X=y=z=m},Xe.flush=function ze(){return z===m?M:Ee(wu())},Xe}var Mh=en(function(i,s){return ql(i,1,s)}),Oh=en(function(i,s,l){return ql(i,Fi(s)||0,l)});function Su(i,s){if("function"!=typeof i||null!=s&&"function"!=typeof s)throw new J(I);var l=function(){var f=arguments,y=s?s.apply(this,f):f[0],w=l.cache;if(w.has(y))return w.get(y);var M=i.apply(this,f);return l.cache=w.set(y,M)||w,M};return l.cache=new(Su.Cache||Xi),l}function Tu(i){if("function"!=typeof i)throw new J(I);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}Su.Cache=Xi;var Lh=yc(function(i,s){var l=(s=1==s.length&&$t(s[0])?Tt(s[0],ln(Lt())):Tt(ur(s,1),ln(Lt()))).length;return en(function(f){for(var y=-1,w=Gr(f.length,l);++y<w;)f[y]=s[y].call(this,f[y]);return Pe(i,this,f)})}),Pl=en(function(i,s){var l=Zn(s,vo(Pl));return Zi(i,32,m,s,l)}),df=en(function(i,s){var l=Zn(s,vo(df));return Zi(i,64,m,s,l)}),hf=lr(function(i,s){return Zi(i,256,m,m,m,s)});function no(i,s){return i===s||i!=i&&s!=s}var Bh=ns(Yu),mf=ns(function(i,s){return i>=s}),Ha=Ju(function(){return arguments}())?Ju:function(i){return qn(i)&&Ne.call(i,"callee")&&!ea.call(i,"callee")},$t=Me.isArray,Hh=W?ln(W):function sd(i){return qn(i)&&Qr(i)==Wt};function ui(i){return null!=i&&Pu(i.length)&&!jo(i)}function cr(i){return qn(i)&&ui(i)}var Co=Xl||Gl,Ls=se?ln(se):function qs(i){return qn(i)&&Qr(i)==wt};function Al(i){if(!qn(i))return!1;var s=Qr(i);return s==yt||"[object DOMException]"==s||"string"==typeof i.message&&"string"==typeof i.name&&!Rs(i)}function jo(i){if(!Kn(i))return!1;var s=Qr(i);return s==Bn||s==fi||"[object AsyncFunction]"==s||"[object Proxy]"==s}function bf(i){return"number"==typeof i&&i==Yt(i)}function Pu(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=On}function Kn(i){var s=typeof i;return null!=i&&("object"==s||"function"==s)}function qn(i){return null!=i&&"object"==typeof i}var zo=ue?ln(ue):function ud(i){return qn(i)&&Yr(i)==Gt};function _f(i){return"number"==typeof i||qn(i)&&Qr(i)==Dt}function Rs(i){if(!qn(i)||Qr(i)!=U)return!1;var s=Cr(i);if(null===s)return!0;var l=Ne.call(s,"constructor")&&s.constructor;return"function"==typeof l&&l instanceof l&&je.call(l)==Pt}var Ml=be?ln(be):function oc(i){return qn(i)&&Qr(i)==Fe},kl=Oe?ln(Oe):function ld(i){return qn(i)&&Yr(i)==De};function Go(i){return"string"==typeof i||!$t(i)&&qn(i)&&Qr(i)==rt}function wi(i){return"symbol"==typeof i||qn(i)&&Qr(i)==xt}var ss=Ye?ln(Ye):function ac(i){return qn(i)&&Pu(i.length)&&!!wn[Qr(i)]},yg=ns(el),Cf=ns(function(i,s){return i<=s});function Ns(i){if(!i)return[];if(ui(i))return Go(i)?an(i):ai(i);if(vs&&i[vs])return function lo(Ce){for(var He,Me=[];!(He=Ce.next()).done;)Me.push(He.value);return Me}(i[vs]());var s=Yr(i);return(s==Gt?oi:s==De?Ia:Fs)(i)}function pa(i){return i?(i=Fi(i))===Ct||i===-Ct?17976931348623157e292*(i<0?-1:1):i==i?i:0:0===i?i:0}function Yt(i){var s=pa(i),l=s%1;return s==s?l?s-l:s:0}function fr(i){return i?yi(Yt(i),0,tr):0}function Fi(i){if("number"==typeof i)return i;if(wi(i))return NaN;if(Kn(i)){var s="function"==typeof i.valueOf?i.valueOf():i;i=Kn(s)?s+"":s}if("string"!=typeof i)return 0===i?i:+i;i=vn(i);var l=ya.test(i);return l||bn.test(i)?fe(i.slice(2),l?2:8):Si.test(i)?NaN:+i}function wf(i){return go(i,li(i))}function Tn(i){return null==i?"":_i(i)}var ep=es(function(i,s){if(As(s)||ui(s))go(s,Mr(s),i);else for(var l in s)Ne.call(s,l)&&na(i,l,s[l])}),Ll=es(function(i,s){go(s,li(s),i)}),us=es(function(i,s,l,f){go(s,li(s),i,f)}),tp=es(function(i,s,l,f){go(s,Mr(s),i,f)}),Sf=lr(ws),rp=en(function(i,s){i=_n(i);var l=-1,f=s.length,y=f>2?s[2]:m;for(y&&pn(s[0],s[1],y)&&(f=1);++l<f;)for(var w=s[l],M=li(w),z=-1,X=M.length;++z<X;){var re=M[z],ne=i[re];(ne===m||no(ne,Ve[re])&&!Ne.call(i,re))&&(i[re]=w[re])}return i}),Tf=en(function(i){return i.push(m,Oc),Pe(Pf,m,i)});function Ds(i,s,l){var f=null==i?m:ia(i,s);return f===m?l:f}function Nl(i,s){return null!=i&&Dc(i,s,od)}var fp=Ic(function(i,s,l){null!=s&&"function"!=typeof s.toString&&(s=Et.call(s)),i[s]=l},fs(Sr)),dp=Ic(function(i,s,l){null!=s&&"function"!=typeof s.toString&&(s=Et.call(s)),Ne.call(i,s)?i[s].push(l):i[s]=[l]},Lt),hp=en(Ts);function Mr(i){return ui(i)?ju(i):qu(i)}function li(i){return ui(i)?ju(i,!0):function cd(i){if(!Kn(i))return function kd(i){var s=[];if(null!=i)for(var l in _n(i))s.push(l);return s}(i);var s=As(i),l=[];for(var f in i)"constructor"==f&&(s||!Ne.call(i,f))||l.push(f);return l}(i)}var vp=es(function(i,s,l){Za(i,s,l)}),Pf=es(function(i,s,l,f){Za(i,s,l,f)}),mp=lr(function(i,s){var l={};if(null==i)return l;var f=!1;s=Tt(s,function(w){return w=sa(w,i),f||(f=w.length>1),w}),go(i,Na(i),l),f&&(l=xi(l,7,wd));for(var y=s.length;y--;)ru(l,s[y]);return l}),yp=lr(function(i,s){return null==i?{}:function dd(i,s){return tl(i,s,function(l,f){return Nl(i,f)})}(i,s)});function Af(i,s){if(null==i)return{};var l=Tt(Na(i),function(f){return[f]});return s=Lt(s),tl(i,l,function(f,y){return s(f,y[0])})}var Fl=Ac(Mr),bp=Ac(li);function Fs(i){return null==i?[]:Qt(i,Mr(i))}var Sg=ts(function(i,s,l){return s=s.toLowerCase(),i+(l?wp(s):s)});function wp(i){return Au(Tn(i).toLowerCase())}function Sp(i){return(i=Tn(i))&&i.replace(hs,Pa).replace(Zo,"")}var Pg=ts(function(i,s,l){return i+(l?"-":"")+s.toLowerCase()}),Ig=ts(function(i,s,l){return i+(l?" ":"")+s.toLowerCase()}),Tp=Tc("toLowerCase"),Pp=ts(function(i,s,l){return i+(l?"_":"")+s.toLowerCase()}),Ap=ts(function(i,s,l){return i+(l?" ":"")+Au(s)}),ja=ts(function(i,s,l){return i+(l?" ":"")+s.toUpperCase()}),Au=Tc("toUpperCase");function Lf(i,s,l){return i=Tn(i),(s=l?m:s)===m?function sr(Ce){return Li.test(Ce)}(i)?function Wi(Ce){return Ce.match(uo)||[]}(i):function ii(Ce){return Ce.match(Wo)||[]}(i):i.match(s)||[]}var Rf=en(function(i,s){try{return Pe(i,m,s)}catch(l){return Al(l)?l:new Vt(l)}}),Dp=lr(function(i,s){return dt(s,function(l){l=yo(l),po(i,l,El(i[l],i))}),i});function fs(i){return function(){return i}}var Nr=Pc(),Nf=Pc(!0);function Sr(i){return i}function Bl(i){return sc("function"==typeof i?i:xi(i,1))}var zp=en(function(i,s){return function(l){return Ts(l,i,s)}}),Up=en(function(i,s){return function(l){return Ts(i,l,s)}});function Hl(i,s,l){var f=Mr(s),y=Ss(s,f);null==l&&(!Kn(s)||!y.length&&f.length)&&(l=s,s=i,i=this,y=Ss(s,Mr(s)));var w=!(Kn(l)&&"chain"in l&&!l.chain),M=jo(i);return dt(y,function(z){var X=s[z];i[z]=X,M&&(i.prototype[z]=function(){var re=this.__chain__;if(w||re){var ne=i(this.__wrapped__),T=ne.__actions__=ai(this.__actions__);return T.push({func:X,args:arguments,thisArg:i}),ne.__chain__=re,ne}return X.apply(i,It([this.value()],arguments))})}),i}function jl(){}var $p=ua(Tt),zl=ua(St),Yp=ua(Fn);function Df(i){return Xn(i)?zr(yo(i)):function fc(i){return function(s){return ia(s,i)}}(i)}var Kp=Is(),Ff=Is(!0);function Ul(){return[]}function Gl(){return!1}var eg=fu(function(i,s){return i+s},0),tg=cl("ceil"),ng=fu(function(i,s){return i/s},1),rg=cl("floor"),r=fu(function(i,s){return i*s},1),a=cl("round"),u=fu(function(i,s){return i-s},0);return Q.after=function Ah(i,s){if("function"!=typeof s)throw new J(I);return i=Yt(i),function(){if(--i<1)return s.apply(this,arguments)}},Q.ary=of,Q.assign=ep,Q.assignIn=Ll,Q.assignInWith=us,Q.assignWith=tp,Q.at=Sf,Q.before=af,Q.bind=El,Q.bindAll=Dp,Q.bindKey=sf,Q.castArray=function as(){if(!arguments.length)return[];var i=arguments[0];return $t(i)?i:[i]},Q.chain=bl,Q.chunk=function Dd(i,s,l){s=(l?pn(i,s,l):s===m)?1:wr(Yt(s),0);var f=null==i?0:i.length;if(!f||s<1)return[];for(var y=0,w=0,M=Me($i(f/s));y<f;)M[w++]=$r(i,y,y+=s);return M},Q.compact=function Fd(i){for(var s=-1,l=null==i?0:i.length,f=0,y=[];++s<l;){var w=i[s];w&&(y[f++]=w)}return y},Q.concat=function Vd(){var i=arguments.length;if(!i)return[];for(var s=Me(i-1),l=arguments[0],f=i;f--;)s[f-1]=arguments[f];return It($t(l)?ai(l):[l],ur(s,1))},Q.cond=function Fp(i){var s=null==i?0:i.length,l=Lt();return i=s?Tt(i,function(f){if("function"!=typeof f[1])throw new J(I);return[l(f[0]),f[1]]}):[],en(function(f){for(var y=-1;++y<s;){var w=i[y];if(Pe(w[0],this,f))return Pe(w[1],this,f)}})},Q.conforms=function Vp(i){return function Zl(i){var s=Mr(i);return function(l){return Gu(l,i,s)}}(xi(i,1))},Q.constant=fs,Q.countBy=wh,Q.create=function np(i,s){var l=Cs(i);return null==s?l:Qs(l,s)},Q.curry=function uf(i,s,l){var f=Zi(i,8,m,m,m,m,m,s=l?m:s);return f.placeholder=uf.placeholder,f},Q.curryRight=function lf(i,s,l){var f=Zi(i,16,m,m,m,m,m,s=l?m:s);return f.placeholder=lf.placeholder,f},Q.debounce=cf,Q.defaults=rp,Q.defaultsDeep=Tf,Q.defer=Mh,Q.delay=Oh,Q.difference=Bd,Q.differenceBy=$c,Q.differenceWith=eo,Q.drop=function Hd(i,s,l){var f=null==i?0:i.length;return f?$r(i,(s=l||s===m?1:Yt(s))<0?0:s,f):[]},Q.dropRight=function jd(i,s,l){var f=null==i?0:i.length;return f?$r(i,0,(s=f-(s=l||s===m?1:Yt(s)))<0?0:s):[]},Q.dropRightWhile=function zd(i,s){return i&&i.length?iu(i,Lt(s,3),!0,!0):[]},Q.dropWhile=function Ud(i,s){return i&&i.length?iu(i,Lt(s,3),!0):[]},Q.fill=function Gd(i,s,l,f){var y=null==i?0:i.length;return y?(l&&"number"!=typeof l&&pn(i,s,l)&&(l=0,f=y),function ec(i,s,l,f){var y=i.length;for((l=Yt(l))<0&&(l=-l>y?0:y+l),(f=f===m||f>y?y:Yt(f))<0&&(f+=y),f=l>f?0:fr(f);l<f;)i[l++]=s;return i}(i,s,l,f)):[]},Q.filter=function mg(i,s){return($t(i)?Ln:tc)(i,Lt(s,3))},Q.flatMap=function nf(i,s){return ur(qr(i,s),1)},Q.flatMapDeep=function Sh(i,s){return ur(qr(i,s),Ct)},Q.flatMapDepth=function yu(i,s,l){return l=l===m?1:Yt(l),ur(qr(i,s),l)},Q.flatten=Kc,Q.flattenDeep=function Wd(i){return null!=i&&i.length?ur(i,Ct):[]},Q.flattenDepth=function $d(i,s){return null!=i&&i.length?ur(i,s=s===m?1:Yt(s)):[]},Q.flip=function kh(i){return Zi(i,512)},Q.flow=Nr,Q.flowRight=Nf,Q.fromPairs=function pu(i){for(var s=-1,l=null==i?0:i.length,f={};++s<l;){var y=i[s];f[y[0]]=y[1]}return f},Q.functions=function up(i){return null==i?[]:Ss(i,Mr(i))},Q.functionsIn=function lp(i){return null==i?[]:Ss(i,li(i))},Q.groupBy=Cl,Q.initial=function Xd(i){return null!=i&&i.length?$r(i,0,-1):[]},Q.intersection=Kd,Q.intersectionBy=Qc,Q.intersectionWith=Jd,Q.invert=fp,Q.invertBy=dp,Q.invokeMap=wl,Q.iteratee=Bl,Q.keyBy=Sl,Q.keys=Mr,Q.keysIn=li,Q.map=qr,Q.mapKeys=function pp(i,s){var l={};return s=Lt(s,3),Ni(i,function(f,y,w){po(l,s(f,y,w),f)}),l},Q.mapValues=function gp(i,s){var l={};return s=Lt(s,3),Ni(i,function(f,y,w){po(l,y,s(f,y,w))}),l},Q.matches=function Hp(i){return bi(xi(i,1))},Q.matchesProperty=function jp(i,s){return Wr(i,xi(s,1))},Q.memoize=Su,Q.merge=vp,Q.mergeWith=Pf,Q.method=zp,Q.methodOf=Up,Q.mixin=Hl,Q.negate=Tu,Q.nthArg=function Wp(i){return i=Yt(i),en(function(s){return lc(s,i)})},Q.omit=mp,Q.omitBy=function If(i,s){return Af(i,Tu(Lt(s)))},Q.once=function ff(i){return af(2,i)},Q.orderBy=function _o(i,s,l,f){return null==i?[]:($t(s)||(s=null==s?[]:[s]),$t(l=f?m:l)||(l=null==l?[]:[l]),cc(i,s,l))},Q.over=$p,Q.overArgs=Lh,Q.overEvery=zl,Q.overSome=Yp,Q.partial=Pl,Q.partialRight=df,Q.partition=os,Q.pick=yp,Q.pickBy=Af,Q.property=Df,Q.propertyOf=function Xp(i){return function(s){return null==i?m:ia(i,s)}},Q.pull=eh,Q.pullAll=Zc,Q.pullAllBy=function th(i,s,l){return i&&i.length&&s&&s.length?eu(i,s,Lt(l,2)):i},Q.pullAllWith=function nh(i,s,l){return i&&i.length&&s&&s.length?eu(i,s,m,l):i},Q.pullAt=rh,Q.range=Kp,Q.rangeRight=Ff,Q.rearg=hf,Q.reject=function _u(i,s){return($t(i)?Ln:tc)(i,Tu(Lt(s,3)))},Q.remove=function ih(i,s){var l=[];if(!i||!i.length)return l;var f=-1,y=[],w=i.length;for(s=Lt(s,3);++f<w;){var M=i[f];s(M,f,i)&&(l.push(M),y.push(f))}return nl(i,y),l},Q.rest=function pf(i,s){if("function"!=typeof i)throw new J(I);return en(i,s=s===m?s:Yt(s))},Q.reverse=vl,Q.sampleSize=function Th(i,s,l){return s=(l?pn(i,s,l):s===m)?1:Yt(s),($t(i)?td:il)(i,s)},Q.set=function Dl(i,s,l){return null==i?i:qa(i,s,l)},Q.setWith=function xg(i,s,l,f){return f="function"==typeof f?f:m,null==i?i:qa(i,s,l,f)},Q.shuffle=function Eh(i){return($t(i)?nd:Bt)(i)},Q.slice=function oh(i,s,l){var f=null==i?0:i.length;return f?(l&&"number"!=typeof l&&pn(i,s,l)?(s=0,l=f):(s=null==s?0:Yt(s),l=l===m?f:Yt(l)),$r(i,s,l)):[]},Q.sortBy=Ih,Q.sortedUniq=function dh(i){return i&&i.length?al(i):[]},Q.sortedUniqBy=function hh(i,s){return i&&i.length?al(i,Lt(s,2)):[]},Q.split=function Ip(i,s,l){return l&&"number"!=typeof l&&pn(i,s,l)&&(s=l=m),(l=l===m?tr:l>>>0)?(i=Tn(i))&&("string"==typeof s||null!=s&&!Ml(s))&&!(s=_i(s))&&pr(i)?Qi(an(i),0,l):i.split(s,l):[]},Q.spread=function Rh(i,s){if("function"!=typeof i)throw new J(I);return s=null==s?0:wr(Yt(s),0),en(function(l){var f=l[s],y=Qi(l,0,s);return f&&It(y,f),Pe(i,this,y)})},Q.tail=function ph(i){var s=null==i?0:i.length;return s?$r(i,1,s):[]},Q.take=function gh(i,s,l){return i&&i.length?$r(i,0,(s=l||s===m?1:Yt(s))<0?0:s):[]},Q.takeRight=function vh(i,s,l){var f=null==i?0:i.length;return f?$r(i,(s=f-(s=l||s===m?1:Yt(s)))<0?0:s,f):[]},Q.takeRightWhile=function mh(i,s){return i&&i.length?iu(i,Lt(s,3),!1,!0):[]},Q.takeWhile=function yh(i,s){return i&&i.length?iu(i,Lt(s,3)):[]},Q.tap=function _l(i,s){return s(i),i},Q.throttle=function Nh(i,s,l){var f=!0,y=!0;if("function"!=typeof i)throw new J(I);return Kn(l)&&(f="leading"in l?!!l.leading:f,y="trailing"in l?!!l.trailing:y),cf(i,s,{leading:f,maxWait:s,trailing:y})},Q.thru=Zr,Q.toArray=Ns,Q.toPairs=Fl,Q.toPairsIn=bp,Q.toPath=function Zp(i){return $t(i)?Tt(i,yo):wi(i)?[i]:ai(hu(Tn(i)))},Q.toPlainObject=wf,Q.transform=function bg(i,s,l){var f=$t(i),y=f||Co(i)||ss(i);if(s=Lt(s,4),null==l){var w=i&&i.constructor;l=y?f?new w:[]:Kn(i)&&jo(w)?Cs(Cr(i)):{}}return(y?dt:Ni)(i,function(M,z,X){return s(l,M,z,X)}),l},Q.unary=function Il(i){return of(i,1)},Q.union=xh,Q.unionBy=bh,Q.unionWith=et,Q.uniq=function ml(i){return i&&i.length?aa(i):[]},Q.uniqBy=function gu(i,s){return i&&i.length?aa(i,Lt(s,2)):[]},Q.uniqWith=function yl(i,s){return s="function"==typeof s?s:m,i&&i.length?aa(i,m,s):[]},Q.unset=function _g(i,s){return null==i||ru(i,s)},Q.unzip=Le,Q.unzipWith=Ho,Q.update=function Cg(i,s,l){return null==i?i:gc(i,s,ou(l))},Q.updateWith=function _p(i,s,l,f){return f="function"==typeof f?f:m,null==i?i:gc(i,s,ou(l),f)},Q.values=Fs,Q.valuesIn=function Mf(i){return null==i?[]:Qt(i,li(i))},Q.without=to,Q.words=Lf,Q.wrap=function Eu(i,s){return Pl(ou(s),i)},Q.xor=si,Q.xorBy=fa,Q.xorWith=ks,Q.zip=at,Q.zipObject=function xl(i,s){return mc(i||[],s||[],na)},Q.zipObjectDeep=function da(i,s){return mc(i||[],s||[],qa)},Q.zipWith=xo,Q.entries=Fl,Q.entriesIn=bp,Q.extend=Ll,Q.extendWith=us,Hl(Q,Q),Q.add=eg,Q.attempt=Rf,Q.camelCase=Sg,Q.capitalize=wp,Q.ceil=tg,Q.clamp=function wg(i,s,l){return l===m&&(l=s,s=m),l!==m&&(l=(l=Fi(l))==l?l:0),s!==m&&(s=(s=Fi(s))==s?s:0),yi(Fi(i),s,l)},Q.clone=function gf(i){return xi(i,4)},Q.cloneDeep=function Dh(i){return xi(i,5)},Q.cloneDeepWith=function Fh(i,s){return xi(i,5,s="function"==typeof s?s:m)},Q.cloneWith=function vf(i,s){return xi(i,4,s="function"==typeof s?s:m)},Q.conformsTo=function Vh(i,s){return null==s||Gu(i,s,Mr(s))},Q.deburr=Sp,Q.defaultTo=function Bp(i,s){return null==i||i!=i?s:i},Q.divide=ng,Q.endsWith=function Iu(i,s,l){i=Tn(i),s=_i(s);var f=i.length,y=l=l===m?f:yi(Yt(l),0,f);return(l-=s.length)>=0&&i.slice(l,y)==s},Q.eq=no,Q.escape=function Tg(i){return(i=Tn(i))&&Xr.test(i)?i.replace(So,Lu):i},Q.escapeRegExp=function Eg(i){return(i=Tn(i))&&rr.test(i)?i.replace(Bi,"\\$&"):i},Q.every=function ef(i,s,l){var f=$t(i)?St:id;return l&&pn(i,s,l)&&(s=m),f(i,Lt(s,3))},Q.find=mu,Q.findIndex=Yc,Q.findKey=function ip(i,s){return Oo(i,Lt(s,3),Ni)},Q.findLast=tf,Q.findLastIndex=Xc,Q.findLastKey=function Ef(i,s){return Oo(i,Lt(s,3),$u)},Q.floor=rg,Q.forEach=rf,Q.forEachRight=bo,Q.forIn=function Rl(i,s){return null==i?i:Ja(i,Lt(s,3),li)},Q.forInRight=function op(i,s){return null==i?i:Qa(i,Lt(s,3),li)},Q.forOwn=function ap(i,s){return i&&Ni(i,Lt(s,3))},Q.forOwnRight=function sp(i,s){return i&&$u(i,Lt(s,3))},Q.get=Ds,Q.gt=Bh,Q.gte=mf,Q.has=function cp(i,s){return null!=i&&Dc(i,s,Xu)},Q.hasIn=Nl,Q.head=Jc,Q.identity=Sr,Q.includes=function xu(i,s,l,f){i=ui(i)?i:Fs(i),l=l&&!f?Yt(l):0;var y=i.length;return l<0&&(l=wr(y+l,0)),Go(i)?l<=y&&i.indexOf(s,l)>-1:!!y&&hr(i,s,l)>-1},Q.indexOf=function Yd(i,s,l){var f=null==i?0:i.length;if(!f)return-1;var y=null==l?0:Yt(l);return y<0&&(y=wr(f+y,0)),hr(i,s,y)},Q.inRange=function Of(i,s,l){return s=pa(s),l===m?(l=s,s=0):l=pa(l),function ad(i,s,l){return i>=Gr(s,l)&&i<wr(s,l)}(i=Fi(i),s,l)},Q.invoke=hp,Q.isArguments=Ha,Q.isArray=$t,Q.isArrayBuffer=Hh,Q.isArrayLike=ui,Q.isArrayLikeObject=cr,Q.isBoolean=function jh(i){return!0===i||!1===i||qn(i)&&Qr(i)==lt},Q.isBuffer=Co,Q.isDate=Ls,Q.isElement=function zh(i){return qn(i)&&1===i.nodeType&&!Rs(i)},Q.isEmpty=function Uh(i){if(null==i)return!0;if(ui(i)&&($t(i)||"string"==typeof i||"function"==typeof i.splice||Co(i)||ss(i)||Ha(i)))return!i.length;var s=Yr(i);if(s==Gt||s==De)return!i.size;if(As(i))return!qu(i).length;for(var l in i)if(Ne.call(i,l))return!1;return!0},Q.isEqual=function yf(i,s){return oa(i,s)},Q.isEqualWith=function xf(i,s,l){var f=(l="function"==typeof l?l:m)?l(i,s):m;return f===m?oa(i,s,m,l):!!f},Q.isError=Al,Q.isFinite=function Gh(i){return"number"==typeof i&&Ru(i)},Q.isFunction=jo,Q.isInteger=bf,Q.isLength=Pu,Q.isMap=zo,Q.isMatch=function Uo(i,s){return i===s||Zu(i,s,fl(s))},Q.isMatchWith=function Wh(i,s,l){return l="function"==typeof l?l:m,Zu(i,s,fl(s),l)},Q.isNaN=function $h(i){return _f(i)&&i!=+i},Q.isNative=function Yh(i){if(Ad(i))throw new Vt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ic(i)},Q.isNil=function Kh(i){return null==i},Q.isNull=function Xh(i){return null===i},Q.isNumber=_f,Q.isObject=Kn,Q.isObjectLike=qn,Q.isPlainObject=Rs,Q.isRegExp=Ml,Q.isSafeInteger=function Ol(i){return bf(i)&&i>=-On&&i<=On},Q.isSet=kl,Q.isString=Go,Q.isSymbol=wi,Q.isTypedArray=ss,Q.isUndefined=function Jh(i){return i===m},Q.isWeakMap=function Qh(i){return qn(i)&&Yr(i)==Kt},Q.isWeakSet=function Zh(i){return qn(i)&&"[object WeakSet]"==Qr(i)},Q.join=function Qd(i,s){return null==i?"":Uf.call(i,s)},Q.kebabCase=Pg,Q.last=Ci,Q.lastIndexOf=function Zd(i,s,l){var f=null==i?0:i.length;if(!f)return-1;var y=f;return l!==m&&(y=(y=Yt(l))<0?wr(f+y,0):Gr(y,f-1)),s==s?function Pn(Ce,He,Me){for(var ct=Me+1;ct--;)if(Ce[ct]===He)return ct;return ct}(i,s,y):Ui(i,Vn,y,!0)},Q.lowerCase=Ig,Q.lowerFirst=Tp,Q.lt=yg,Q.lte=Cf,Q.max=function ig(i){return i&&i.length?Zs(i,Sr,Yu):m},Q.maxBy=function og(i,s){return i&&i.length?Zs(i,Lt(s,2),Yu):m},Q.mean=function ag(i){return gi(i,Sr)},Q.meanBy=function e(i,s){return gi(i,Lt(s,2))},Q.min=function n(i){return i&&i.length?Zs(i,Sr,el):m},Q.minBy=function t(i,s){return i&&i.length?Zs(i,Lt(s,2),el):m},Q.stubArray=Ul,Q.stubFalse=Gl,Q.stubObject=function Vf(){return{}},Q.stubString=function Bf(){return""},Q.stubTrue=function Jp(){return!0},Q.multiply=r,Q.nth=function qd(i,s){return i&&i.length?lc(i,Yt(s)):m},Q.noConflict=function Gp(){return c._===this&&(c._=qe),this},Q.noop=jl,Q.now=wu,Q.pad=function Ag(i,s,l){i=Tn(i);var f=(s=Yt(s))?mn(i):0;if(!s||f>=s)return i;var y=(s-f)/2;return Ps(ms(y),l)+i+Ps($i(y),l)},Q.padEnd=function Mg(i,s,l){i=Tn(i);var f=(s=Yt(s))?mn(i):0;return s&&f<s?i+Ps(s-f,l):i},Q.padStart=function Og(i,s,l){i=Tn(i);var f=(s=Yt(s))?mn(i):0;return s&&f<s?Ps(s-f,l)+i:i},Q.parseInt=function kg(i,s,l){return l||null==s?s=0:s&&(s=+s),$f(Tn(i).replace(Eo,""),s||0)},Q.random=function Cp(i,s,l){if(l&&"boolean"!=typeof l&&pn(i,s,l)&&(s=l=m),l===m&&("boolean"==typeof s?(l=s,s=m):"boolean"==typeof i&&(l=i,i=m)),i===m&&s===m?(i=0,s=1):(i=pa(i),s===m?(s=i,i=0):s=pa(s)),i>s){var f=i;i=s,s=f}if(l||i%1||s%1){var y=Kl();return Gr(i+y*(s-i+oe("1e-"+((y+"").length-1))),s)}return tu(i,s)},Q.reduce=function Rt(i,s,l){var f=$t(i)?xr:ko,y=arguments.length<3;return f(i,Lt(s,4),l,y,ra)},Q.reduceRight=function bu(i,s,l){var f=$t(i)?un:ko,y=arguments.length<3;return f(i,Lt(s,4),l,y,Wu)},Q.repeat=function ls(i,s,l){return s=(l?pn(i,s,l):s===m)?1:Yt(s),rl(Tn(i),s)},Q.replace=function Ep(){var i=arguments,s=Tn(i[0]);return i.length<3?s:s.replace(i[1],i[2])},Q.result=function xp(i,s,l){var f=-1,y=(s=sa(s,i)).length;for(y||(y=1,i=m);++f<y;){var w=null==i?m:i[yo(s[f])];w===m&&(f=y,w=l),i=jo(w)?w.call(i):w}return i},Q.round=a,Q.runInContext=Ce,Q.sample=function Cu(i){return($t(i)?zu:hd)(i)},Q.size=function Ph(i){if(null==i)return 0;if(ui(i))return Go(i)?mn(i):i.length;var s=Yr(i);return s==Gt||s==De?i.size:qu(i).length},Q.snakeCase=Pp,Q.some=function Tl(i,s,l){var f=$t(i)?Fn:Ji;return l&&pn(i,s,l)&&(s=m),f(i,Lt(s,3))},Q.sortedIndex=function ah(i,s){return nu(i,s)},Q.sortedIndexBy=function sh(i,s,l){return ol(i,s,Lt(l,2))},Q.sortedIndexOf=function uh(i,s){var l=null==i?0:i.length;if(l){var f=nu(i,s);if(f<l&&no(i[f],s))return f}return-1},Q.sortedLastIndex=function lh(i,s){return nu(i,s,!0)},Q.sortedLastIndexBy=function ch(i,s,l){return ol(i,s,Lt(l,2),!0)},Q.sortedLastIndexOf=function fh(i,s){if(null!=i&&i.length){var f=nu(i,s,!0)-1;if(no(i[f],s))return f}return-1},Q.startCase=Ap,Q.startsWith=function Mp(i,s,l){return i=Tn(i),l=null==l?0:yi(Yt(l),0,i.length),s=_i(s),i.slice(l,l+s.length)==s},Q.subtract=u,Q.sum=function d(i){return i&&i.length?Qn(i,Sr):0},Q.sumBy=function g(i,s){return i&&i.length?Qn(i,Lt(s,2)):0},Q.template=function Op(i,s,l){var f=Q.templateSettings;l&&pn(i,s,l)&&(s=m),i=Tn(i),s=us({},s,f,Mc);var z,X,y=us({},s.imports,f.imports,Mc),w=Mr(y),M=Qt(y,w),re=0,ne=s.interpolate||Ti,T="__p += '",R=Ro((s.escape||Ti).source+"|"+ne.source+"|"+(ne===ut?it:Ti).source+"|"+(s.evaluate||Ti).source+"|$","g"),j="//# sourceURL="+(Ne.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qo+"]")+"\n";i.replace(R,function(he,ye,Ee,Ge,ze,Xe){return Ee||(Ee=Ge),T+=i.slice(re,Xe).replace(ji,Yl),ye&&(z=!0,T+="' +\n__e("+ye+") +\n'"),ze&&(X=!0,T+="';\n"+ze+";\n__p += '"),Ee&&(T+="' +\n((__t = ("+Ee+")) == null ? '' : __t) +\n'"),re=Xe+he.length,he}),T+="';\n";var Z=Ne.call(s,"variable")&&s.variable;if(Z){if(Hi.test(Z))throw new Vt("Invalid `variable` option passed into `_.template`")}else T="with (obj) {\n"+T+"\n}\n";T=(X?T.replace($n,""):T).replace(wo,"$1").replace(ga,"$1;"),T="function("+(Z||"obj")+") {\n"+(Z?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(z?", __e = _.escape":"")+(X?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+T+"return __p\n}";var ie=Rf(function(){return cn(w,j+"return "+T).apply(m,M)});if(ie.source=T,Al(ie))throw ie;return ie},Q.times=function Qp(i,s){if((i=Yt(i))<1||i>On)return[];var l=tr,f=Gr(i,tr);s=Lt(s),i-=tr;for(var y=vi(f,s);++l<i;)s(l);return y},Q.toFinite=pa,Q.toInteger=Yt,Q.toLength=fr,Q.toLower=function kp(i){return Tn(i).toLowerCase()},Q.toNumber=Fi,Q.toSafeInteger=function qh(i){return i?yi(Yt(i),-On,On):0===i?i:0},Q.toString=Tn,Q.toUpper=function Lp(i){return Tn(i).toUpperCase()},Q.trim=function Rp(i,s,l){if((i=Tn(i))&&(l||s===m))return vn(i);if(!i||!(s=_i(s)))return i;var f=an(i),y=an(s);return Qi(f,Vs(f,y),Ou(f,y)+1).join("")},Q.trimEnd=function Vl(i,s,l){if((i=Tn(i))&&(l||s===m))return i.slice(0,Sn(i)+1);if(!i||!(s=_i(s)))return i;var f=an(i);return Qi(f,0,Ou(f,an(s))+1).join("")},Q.trimStart=function kf(i,s,l){if((i=Tn(i))&&(l||s===m))return i.replace(Eo,"");if(!i||!(s=_i(s)))return i;var f=an(i);return Qi(f,Vs(f,an(s))).join("")},Q.truncate=function cs(i,s){var l=30,f="...";if(Kn(s)){var y="separator"in s?s.separator:y;l="length"in s?Yt(s.length):l,f="omission"in s?_i(s.omission):f}var w=(i=Tn(i)).length;if(pr(i)){var M=an(i);w=M.length}if(l>=w)return i;var z=l-mn(f);if(z<1)return f;var X=M?Qi(M,0,z).join(""):i.slice(0,z);if(y===m)return X+f;if(M&&(z+=X.length-z),Ml(y)){if(i.slice(z).search(y)){var re,ne=X;for(y.global||(y=Ro(y.source,Tn(Ua.exec(y))+"g")),y.lastIndex=0;re=y.exec(ne);)var T=re.index;X=X.slice(0,T===m?z:T)}}else if(i.indexOf(_i(y),z)!=z){var R=X.lastIndexOf(y);R>-1&&(X=X.slice(0,R))}return X+f},Q.unescape=function Np(i){return(i=Tn(i))&&ge.test(i)?i.replace(ro,co):i},Q.uniqueId=function qp(i){var s=++tt;return Tn(i)+s},Q.upperCase=ja,Q.upperFirst=Au,Q.each=rf,Q.eachRight=bo,Q.first=Jc,Hl(Q,function(){var i={};return Ni(Q,function(s,l){Ne.call(Q.prototype,l)||(i[l]=s)}),i}(),{chain:!1}),Q.VERSION="4.17.21",dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){Q[i].placeholder=Q}),dt(["drop","take"],function(i,s){fn.prototype[i]=function(l){l=l===m?1:wr(Yt(l),0);var f=this.__filtered__&&!s?new fn(this):this.clone();return f.__filtered__?f.__takeCount__=Gr(l,f.__takeCount__):f.__views__.push({size:Gr(l,tr),type:i+(f.__dir__<0?"Right":"")}),f},fn.prototype[i+"Right"]=function(l){return this.reverse()[i](l).reverse()}}),dt(["filter","map","takeWhile"],function(i,s){var l=s+1,f=1==l||3==l;fn.prototype[i]=function(y){var w=this.clone();return w.__iteratees__.push({iteratee:Lt(y,3),type:l}),w.__filtered__=w.__filtered__||f,w}}),dt(["head","last"],function(i,s){var l="take"+(s?"Right":"");fn.prototype[i]=function(){return this[l](1).value()[0]}}),dt(["initial","tail"],function(i,s){var l="drop"+(s?"":"Right");fn.prototype[i]=function(){return this.__filtered__?new fn(this):this[l](1)}}),fn.prototype.compact=function(){return this.filter(Sr)},fn.prototype.find=function(i){return this.filter(i).head()},fn.prototype.findLast=function(i){return this.reverse().find(i)},fn.prototype.invokeMap=en(function(i,s){return"function"==typeof i?new fn(this):this.map(function(l){return Ts(l,i,s)})}),fn.prototype.reject=function(i){return this.filter(Tu(Lt(i)))},fn.prototype.slice=function(i,s){i=Yt(i);var l=this;return l.__filtered__&&(i>0||s<0)?new fn(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),s!==m&&(l=(s=Yt(s))<0?l.dropRight(-s):l.take(s-i)),l)},fn.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},fn.prototype.toArray=function(){return this.take(tr)},Ni(fn.prototype,function(i,s){var l=/^(?:filter|find|map|reject)|While$/.test(s),f=/^(?:head|last)$/.test(s),y=Q[f?"take"+("last"==s?"Right":""):s],w=f||/^find/.test(s);!y||(Q.prototype[s]=function(){var M=this.__wrapped__,z=f?[1]:arguments,X=M instanceof fn,re=z[0],ne=X||$t(M),T=function(ye){var Ee=y.apply(Q,It([ye],z));return f&&R?Ee[0]:Ee};ne&&l&&"function"==typeof re&&1!=re.length&&(X=ne=!1);var R=this.__chain__,j=!!this.__actions__.length,Z=w&&!R,ie=X&&!j;if(!w&&ne){M=ie?M:new fn(this);var he=i.apply(M,z);return he.__actions__.push({func:Zr,args:[T],thisArg:m}),new Yi(he,R)}return Z&&ie?i.apply(this,z):(he=this.thru(T),Z?f?he.value()[0]:he.value():he)})}),dt(["pop","push","shift","sort","splice","unshift"],function(i){var s=ce[i],l=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",f=/^(?:pop|shift)$/.test(i);Q.prototype[i]=function(){var y=arguments;if(f&&!this.__chain__){var w=this.value();return s.apply($t(w)?w:[],y)}return this[l](function(M){return s.apply($t(M)?M:[],y)})}}),Ni(fn.prototype,function(i,s){var l=Q[s];if(l){var f=l.name+"";Ne.call(Ya,f)||(Ya[f]=[]),Ya[f].push({name:s,func:l})}}),Ya[cu(m,2).name]=[{name:"wrapper",func:m}],fn.prototype.clone=function cg(){var i=new fn(this.__wrapped__);return i.__actions__=ai(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=ai(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=ai(this.__views__),i},fn.prototype.reverse=function fg(){if(this.__filtered__){var i=new fn(this);i.__dir__=-1,i.__filtered__=!0}else(i=this.clone()).__dir__*=-1;return i},fn.prototype.value=function dg(){var i=this.__wrapped__.value(),s=this.__dir__,l=$t(i),f=s<0,y=l?i.length:0,w=function Td(i,s,l){for(var f=-1,y=l.length;++f<y;){var w=l[f],M=w.size;switch(w.type){case"drop":i+=M;break;case"dropRight":s-=M;break;case"take":s=Gr(s,i+M);break;case"takeRight":i=wr(i,s-M)}}return{start:i,end:s}}(0,y,this.__views__),M=w.start,z=w.end,X=z-M,re=f?z:M-1,ne=this.__iteratees__,T=ne.length,R=0,j=Gr(X,this.__takeCount__);if(!l||!f&&y==X&&j==X)return vc(i,this.__actions__);var Z=[];e:for(;X--&&R<j;){for(var ie=-1,he=i[re+=s];++ie<T;){var ye=ne[ie],Ge=ye.type,ze=(0,ye.iteratee)(he);if(2==Ge)he=ze;else if(!ze){if(1==Ge)continue e;break e}}Z[R++]=he}return Z},Q.prototype.at=ha,Q.prototype.chain=function Ba(){return bl(this)},Q.prototype.commit=function Gn(){return new Yi(this.value(),this.__chain__)},Q.prototype.next=function is(){this.__values__===m&&(this.__values__=Ns(this.value()));var i=this.__index__>=this.__values__.length;return{done:i,value:i?m:this.__values__[this.__index__++]}},Q.prototype.plant=function _h(i){for(var s,l=this;l instanceof Bu;){var f=Wc(l);f.__index__=0,f.__values__=m,s?y.__wrapped__=f:s=f;var y=f;l=l.__wrapped__}return y.__wrapped__=i,s},Q.prototype.reverse=function vu(){var i=this.__wrapped__;if(i instanceof fn){var s=i;return this.__actions__.length&&(s=new fn(this)),(s=s.reverse()).__actions__.push({func:Zr,args:[vl],thisArg:m}),new Yi(s,this.__chain__)}return this.thru(vl)},Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=function Ch(){return vc(this.__wrapped__,this.__actions__)},Q.prototype.first=Q.prototype.head,vs&&(Q.prototype[vs]=function qc(){return this}),Q}();c._=mi,(v=function(){return mi}.call(G,h,G,P))!==m&&(P.exports=v)}.call(this)},19984:(P,G,h)=>{var v=h(84633),m=h(96517),S=h(92046),E=h(21503);P.exports=function b(I,O){return(E(I)?v:S)(I,m(O,3))}},10203:(P,G,h)=>{var v=h(85683),m=h(45184),S=h(96517);P.exports=function E(b,I){var O={};return I=S(I,3),m(b,function(A,B,H){v(O,B,I(A,B,H))}),O}},18176:(P,G,h)=>{var v=h(67308),m=h(31100),S=h(32608);P.exports=function E(b){return b&&b.length?v(b,S,m):void 0}},30535:(P,G,h)=>{var v=h(99850);function S(E,b){if("function"!=typeof E||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var I=function(){var O=arguments,A=b?b.apply(this,O):O[0],B=I.cache;if(B.has(A))return B.get(A);var H=E.apply(this,O);return I.cache=B.set(A,H)||B,H};return I.cache=new(S.Cache||v),I}S.Cache=v,P.exports=S},80567:(P,G,h)=>{var v=h(73842),S=h(84944)(function(E,b,I){v(E,b,I)});P.exports=S},29439:(P,G,h)=>{var v=h(67308),m=h(99069),S=h(32608);P.exports=function E(b){return b&&b.length?v(b,S,m):void 0}},29525:(P,G,h)=>{var v=h(67308),m=h(96517),S=h(99069);P.exports=function E(b,I){return b&&b.length?v(b,m(I,2),S):void 0}},12552:P=>{P.exports=function G(){}},31710:(P,G,h)=>{var v=h(12119);P.exports=function(){return v.Date.now()}},16372:(P,G,h)=>{var v=h(83021),S=h(3975)(function(E,b){return null==E?{}:v(E,b)});P.exports=S},87495:(P,G,h)=>{var v=h(11847),m=h(39222),S=h(45352),E=h(68533);P.exports=function b(I){return S(I)?v(E(I)):m(I)}},90361:(P,G,h)=>{var m=h(97509)();P.exports=m},81337:(P,G,h)=>{var v=h(8745),m=h(43132),S=h(96517),E=h(13570),b=h(21503);P.exports=function I(O,A,B){var H=b(O)?v:E,k=arguments.length<3;return H(O,S(A,4),B,k,m)}},55637:(P,G,h)=>{var v=h(81172),m=h(28794),S=h(56507),E=h(30248),b=h(52315);P.exports=function A(B){if(null==B)return 0;if(S(B))return E(B)?b(B):B.length;var H=m(B);return"[object Map]"==H||"[object Set]"==H?B.size:v(B).length}},12906:(P,G,h)=>{var v=h(50686),m=h(6119),S=h(23269),E=h(93342),b=S(function(I,O){if(null==I)return[];var A=O.length;return A>1&&E(I,O[0],O[1])?O=[]:A>2&&E(O[0],O[1],O[2])&&(O=[O[0]]),m(I,v(O,1),[])});P.exports=b},49975:P=>{P.exports=function G(){return[]}},63580:P=>{P.exports=function G(){return!1}},12232:(P,G,h)=>{var v=h(51467),m=1/0;P.exports=function E(b){return b?(b=v(b))===m||b===-m?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}},44401:(P,G,h)=>{var v=h(12232);P.exports=function m(S){var E=v(S),b=E%1;return E==E?b?E-b:E:0}},51467:(P,G,h)=>{var v=h(83348),m=h(25940),S=h(44129),b=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,O=/^0o[0-7]+$/i,A=parseInt;P.exports=function B(H){if("number"==typeof H)return H;if(S(H))return NaN;if(m(H)){var k="function"==typeof H.valueOf?H.valueOf():H;H=m(k)?k+"":k}if("string"!=typeof H)return 0===H?H:+H;H=v(H);var Y=I.test(H);return Y||O.test(H)?A(H.slice(2),Y?2:8):b.test(H)?NaN:+H}},8067:(P,G,h)=>{var v=h(31989),m=h(16555);P.exports=function S(E){return v(E,m(E))}},73943:(P,G,h)=>{var v=h(93935);P.exports=function m(S){return null==S?"":v(S)}},89416:(P,G,h)=>{var v=h(96837),m=h(78858),S=h(45184),E=h(96517),b=h(29519),I=h(21503),O=h(80891),A=h(75946),B=h(25940),H=h(48159);P.exports=function k(Y,ee,le){var o=I(Y),ae=o||O(Y)||H(Y);if(ee=E(ee,4),null==le){var pe=Y&&Y.constructor;le=ae?o?new pe:[]:B(Y)&&A(pe)?m(b(Y)):{}}return(ae?v:S)(Y,function(de,q,ve){return ee(le,de,q,ve)}),le}},68921:(P,G,h)=>{var v=h(50686),m=h(23269),S=h(80707),E=h(21330),b=m(function(I){return S(v(I,1,E,!0))});P.exports=b},51541:(P,G,h)=>{var v=h(73943),m=0;P.exports=function S(E){var b=++m;return v(E)+b}},90377:(P,G,h)=>{var v=h(19179),m=h(118);P.exports=function S(E){return null==E?[]:v(E,m(E))}},21617:(P,G,h)=>{var v=h(89719),m=h(38645);P.exports=function S(E,b){return m(E||[],b||[],v)}},29610:function(P){P.exports=function(){var G="1.13.2",h="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},v=Array.prototype,m=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,E=v.push,b=v.slice,I=m.toString,O=m.hasOwnProperty,A="undefined"!=typeof ArrayBuffer,B="undefined"!=typeof DataView,H=Array.isArray,k=Object.keys,Y=Object.create,ee=A&&ArrayBuffer.isView,le=isNaN,o=isFinite,ae=!{toString:null}.propertyIsEnumerable("toString"),pe=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],de=Math.pow(2,53)-1;function q(F,K){return K=null==K?F.length-1:+K,function(){for(var oe=Math.max(arguments.length-K,0),fe=Array(oe),Te=0;Te<oe;Te++)fe[Te]=arguments[Te+K];switch(K){case 0:return F.call(this,fe);case 1:return F.call(this,arguments[0],fe);case 2:return F.call(this,arguments[0],arguments[1],fe)}var _e=Array(K+1);for(Te=0;Te<K;Te++)_e[Te]=arguments[Te];return _e[K]=fe,F.apply(this,_e)}}function ve(F){var K=typeof F;return"function"===K||"object"===K&&!!F}function we(F){return void 0===F}function Ae(F){return!0===F||!1===F||"[object Boolean]"===I.call(F)}function _(F){var K="[object "+F+"]";return function(oe){return I.call(oe)===K}}var ke=_("String"),$e=_("Number"),We=_("Date"),Ke=_("RegExp"),Ze=_("Error"),st=_("Symbol"),mt=_("ArrayBuffer"),Nt=_("Function");"object"!=typeof Int8Array&&"function"!=typeof(h.document&&h.document.childNodes)&&(Nt=function(F){return"function"==typeof F||!1});var Ct=Nt,On=_("Object"),gr=B&&On(new DataView(new ArrayBuffer(8))),Dr="undefined"!=typeof Map&&On(new Map),tr=_("DataView"),Wn=gr?function(F){return null!=F&&Ct(F.getInt8)&&mt(F.buffer)}:tr,vr=H||_("Array");function Nn(F,K){return null!=F&&O.call(F,K)}var Re=_("Arguments");!function(){Re(arguments)||(Re=function(F){return Nn(F,"callee")})}();var Ue=Re;function Qe(F){return $e(F)&&le(F)}function lt(F){return function(){return F}}function wt(F){return function(K){var oe=F(K);return"number"==typeof oe&&oe>=0&&oe<=de}}function zt(F){return function(K){return null==K?void 0:K[F]}}var yt=zt("byteLength"),Bn=wt(yt),fi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Gt=A?function(F){return ee?ee(F)&&!Wn(F):Bn(F)&&fi.test(I.call(F))}:lt(!1),Dt=zt("length");function L(F,K){K=function(c){for(var p={},x=c.length,C=0;C<x;++C)p[c[C]]=!0;return{contains:function(N){return!0===p[N]},push:function(N){return p[N]=!0,c.push(N)}}}(K);var oe=pe.length,fe=F.constructor,Te=Ct(fe)&&fe.prototype||m,_e="constructor";for(Nn(F,_e)&&!K.contains(_e)&&K.push(_e);oe--;)(_e=pe[oe])in F&&F[_e]!==Te[_e]&&!K.contains(_e)&&K.push(_e)}function U(F){if(!ve(F))return[];if(k)return k(F);var K=[];for(var oe in F)Nn(F,oe)&&K.push(oe);return ae&&L(F,K),K}function te(F,K){var oe=U(K),fe=oe.length;if(null==F)return!fe;for(var Te=Object(F),_e=0;_e<fe;_e++){var c=oe[_e];if(K[c]!==Te[c]||!(c in Te))return!1}return!0}function me(F){return F instanceof me?F:this instanceof me?void(this._wrapped=F):new me(F)}function Fe(F){return new Uint8Array(F.buffer||F,F.byteOffset||0,yt(F))}me.VERSION=G,me.prototype.valueOf=me.prototype.toJSON=me.prototype.value=function(){return this._wrapped},me.prototype.toString=function(){return String(this._wrapped)};var De="[object DataView]";function rt(F,K,oe,fe){if(F===K)return 0!==F||1/F==1/K;if(null==F||null==K)return!1;if(F!=F)return K!=K;var Te=typeof F;return("function"===Te||"object"===Te||"object"==typeof K)&&function _e(c,p,x,C){c instanceof me&&(c=c._wrapped),p instanceof me&&(p=p._wrapped);var N=I.call(c);if(N!==I.call(p))return!1;if(gr&&"[object Object]"==N&&Wn(c)){if(!Wn(p))return!1;N=De}switch(N){case"[object RegExp]":case"[object String]":return""+c==""+p;case"[object Number]":return+c!=+c?+p!=+p:0==+c?1/+c==1/p:+c==+p;case"[object Date]":case"[object Boolean]":return+c==+p;case"[object Symbol]":return S.valueOf.call(c)===S.valueOf.call(p);case"[object ArrayBuffer]":case De:return _e(Fe(c),Fe(p),x,C)}var D="[object Array]"===N;if(!D&&Gt(c)){if(yt(c)!==yt(p))return!1;if(c.buffer===p.buffer&&c.byteOffset===p.byteOffset)return!0;D=!0}if(!D){if("object"!=typeof c||"object"!=typeof p)return!1;var W=c.constructor,se=p.constructor;if(W!==se&&!(Ct(W)&&W instanceof W&&Ct(se)&&se instanceof se)&&"constructor"in c&&"constructor"in p)return!1}C=C||[];for(var ue=(x=x||[]).length;ue--;)if(x[ue]===c)return C[ue]===p;if(x.push(c),C.push(p),D){if((ue=c.length)!==p.length)return!1;for(;ue--;)if(!rt(c[ue],p[ue],x,C))return!1}else{var be,Oe=U(c);if(ue=Oe.length,U(p).length!==ue)return!1;for(;ue--;)if(!Nn(p,be=Oe[ue])||!rt(c[be],p[be],x,C))return!1}return x.pop(),C.pop(),!0}(F,K,oe,fe)}function xt(F){if(!ve(F))return[];var K=[];for(var oe in F)K.push(oe);return ae&&L(F,K),K}function bt(F){var K=Dt(F);return function(oe){if(null==oe)return!1;var fe=xt(oe);if(Dt(fe))return!1;for(var Te=0;Te<K;Te++)if(!Ct(oe[F[Te]]))return!1;return F!==Fr||!Ct(oe[Kt])}}var Kt="forEach",Wt=["clear","delete"],Hn=["get","has","set"],kn=Wt.concat(Kt,Hn),Fr=Wt.concat(Hn),xn=["add"].concat(Wt,Kt,"has"),pt=Dr?bt(kn):_("Map"),En=Dr?bt(Fr):_("WeakMap"),Dn=Dr?bt(xn):_("Set"),nr=_("WeakSet");function Vr(F){for(var K=U(F),oe=K.length,fe=Array(oe),Te=0;Te<oe;Te++)fe[Te]=F[K[Te]];return fe}function Jn(F){for(var K={},oe=U(F),fe=0,Te=oe.length;fe<Te;fe++)K[F[oe[fe]]]=oe[fe];return K}function $n(F){var K=[];for(var oe in F)Ct(F[oe])&&K.push(oe);return K.sort()}function wo(F,K){return function(oe){var fe=arguments.length;if(K&&(oe=Object(oe)),fe<2||null==oe)return oe;for(var Te=1;Te<fe;Te++)for(var _e=arguments[Te],c=F(_e),p=c.length,x=0;x<p;x++){var C=c[x];K&&void 0!==oe[C]||(oe[C]=_e[C])}return oe}}var ga=wo(xt),ro=wo(U),So=wo(xt,!0);function ge(F){if(!ve(F))return{};if(Y)return Y(F);var K=function(){};K.prototype=F;var oe=new K;return K.prototype=null,oe}function Xr(F){return vr(F)?F:[F]}function Vi(F){return me.toPath(F)}function To(F,K){for(var oe=K.length,fe=0;fe<oe;fe++){if(null==F)return;F=F[K[fe]]}return oe?F:void 0}function ut(F,K,oe){var fe=To(F,Vi(K));return we(fe)?oe:fe}function Br(F){return F}function io(F){return F=ro({},F),function(K){return te(K,F)}}function oo(F){return F=Vi(F),function(K){return To(K,F)}}function Bi(F,K,oe){if(void 0===K)return F;switch(null==oe?3:oe){case 1:return function(fe){return F.call(K,fe)};case 3:return function(fe,Te,_e){return F.call(K,fe,Te,_e)};case 4:return function(fe,Te,_e,c){return F.call(K,fe,Te,_e,c)}}return function(){return F.apply(K,arguments)}}function rr(F,K,oe){return null==F?Br:Ct(F)?Bi(F,K,oe):ve(F)&&!vr(F)?io(F):oo(F)}function Eo(F,K){return rr(F,K,1/0)}function mr(F,K,oe){return me.iteratee!==Eo?me.iteratee(F,K):rr(F,K,oe)}function va(){}function ma(F,K){return null==K&&(K=F,F=0),F+Math.floor(Math.random()*(K-F+1))}me.toPath=Xr,me.iteratee=Eo;var Er=Date.now||function(){return(new Date).getTime()};function Wo(F){var K=function(_e){return F[_e]},oe="(?:"+U(F).join("|")+")",fe=RegExp(oe),Te=RegExp(oe,"g");return function(_e){return fe.test(_e=null==_e?"":""+_e)?_e.replace(Te,K):_e}}var Hi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$o=Wo(Hi),it=Wo(Jn(Hi)),Ua=me.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Si=/(.)^/,ya={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xa=/\\|'|\r|\n|\u2028|\u2029/g;function bn(F){return"\\"+ya[F]}var Po=/^\s*(\w|\$)+\s*$/,hs=0;function Ti(F,K,oe,fe,Te){if(!(fe instanceof K))return F.apply(oe,Te);var _e=ge(F.prototype),c=F.apply(_e,Te);return ve(c)?c:_e}var ji=q(function(F,K){var oe=ji.placeholder,fe=function(){for(var Te=0,_e=K.length,c=Array(_e),p=0;p<_e;p++)c[p]=K[p]===oe?arguments[Te++]:K[p];for(;Te<arguments.length;)c.push(arguments[Te++]);return Ti(F,fe,this,this,c)};return fe});ji.placeholder=me;var Ei=q(function(F,K,oe){if(!Ct(F))throw new TypeError("Bind must be called on a function");var fe=q(function(Te){return Ti(F,fe,K,this,oe.concat(Te))});return fe}),Ft=wt(Dt);function Hr(F,K,oe,fe){if(fe=fe||[],K||0===K){if(K<=0)return fe.concat(F)}else K=1/0;for(var Te=fe.length,_e=0,c=Dt(F);_e<c;_e++){var p=F[_e];if(Ft(p)&&(vr(p)||Ue(p)))if(K>1)Hr(p,K-1,oe,fe),Te=fe.length;else for(var x=0,C=p.length;x<C;)fe[Te++]=p[x++];else oe||(fe[Te++]=p)}return fe}var gt=q(function(F,K){var oe=(K=Hr(K,!1,!1)).length;if(oe<1)throw new Error("bindAll must be passed function names");for(;oe--;){var fe=K[oe];F[fe]=Ei(F[fe],F)}return F}),Pr=q(function(F,K,oe){return setTimeout(function(){return F.apply(null,oe)},K)}),di=ji(Pr,me,1);function nn(F){return function(){return!F.apply(this,arguments)}}function Pi(F,K){var oe;return function(){return--F>0&&(oe=K.apply(this,arguments)),F<=1&&(K=null),oe}}var dr=ji(Pi,2);function ba(F,K,oe){K=mr(K,oe);for(var fe,Te=U(F),_e=0,c=Te.length;_e<c;_e++)if(K(F[fe=Te[_e]],fe,F))return fe}function Ii(F){return function(K,oe,fe){oe=mr(oe,fe);for(var Te=Dt(K),_e=F>0?0:Te-1;_e>=0&&_e<Te;_e+=F)if(oe(K[_e],_e,K))return _e;return-1}}var Ai=Ii(1),hi=Ii(-1);function Mi(F,K,oe,fe){for(var Te=(oe=mr(oe,fe,1))(K),_e=0,c=Dt(F);_e<c;){var p=Math.floor((_e+c)/2);oe(F[p])<Te?_e=p+1:c=p}return _e}function Io(F,K,oe){return function(fe,Te,_e){var c=0,p=Dt(fe);if("number"==typeof _e)F>0?c=_e>=0?_e:Math.max(_e+p,c):p=_e>=0?Math.min(_e+1,p):_e+p+1;else if(oe&&_e&&p)return fe[_e=oe(fe,Te)]===Te?_e:-1;if(Te!=Te)return(_e=K(b.call(fe,c,p),Qe))>=0?_e+c:-1;for(_e=F>0?c:p-1;_e>=0&&_e<p;_e+=F)if(fe[_e]===Te)return _e;return-1}}var Ga=Io(1,Ai,Mi),yr=Io(-1,hi);function ir(F,K,oe){var fe=(Ft(F)?Ai:ba)(F,K,oe);if(void 0!==fe&&-1!==fe)return F[fe]}function or(F,K,oe){var fe,Te;if(K=Bi(K,oe),Ft(F))for(fe=0,Te=F.length;fe<Te;fe++)K(F[fe],fe,F);else{var _e=U(F);for(fe=0,Te=_e.length;fe<Te;fe++)K(F[_e[fe]],_e[fe],F)}return F}function Or(F,K,oe){K=mr(K,oe);for(var fe=!Ft(F)&&U(F),Te=(fe||F).length,_e=Array(Te),c=0;c<Te;c++){var p=fe?fe[c]:c;_e[c]=K(F[p],p,F)}return _e}function Yo(F){var K=function(oe,fe,Te,_e){var c=!Ft(oe)&&U(oe),p=(c||oe).length,x=F>0?0:p-1;for(_e||(Te=oe[c?c[x]:x],x+=F);x>=0&&x<p;x+=F){var C=c?c[x]:x;Te=fe(Te,oe[C],C,oe)}return Te};return function(oe,fe,Te,_e){var c=arguments.length>=3;return K(oe,Bi(fe,_e,4),Te,c)}}var Ao=Yo(1),Kr=Yo(-1);function Ir(F,K,oe){var fe=[];return K=mr(K,oe),or(F,function(Te,_e,c){K(Te,_e,c)&&fe.push(Te)}),fe}function Oi(F,K,oe){K=mr(K,oe);for(var fe=!Ft(F)&&U(F),Te=(fe||F).length,_e=0;_e<Te;_e++){var c=fe?fe[_e]:_e;if(!K(F[c],c,F))return!1}return!0}function ao(F,K,oe){K=mr(K,oe);for(var fe=!Ft(F)&&U(F),Te=(fe||F).length,_e=0;_e<Te;_e++){var c=fe?fe[_e]:_e;if(K(F[c],c,F))return!0}return!1}function kr(F,K,oe,fe){return Ft(F)||(F=Vr(F)),("number"!=typeof oe||fe)&&(oe=0),Ga(F,K,oe)>=0}var ki=q(function(F,K,oe){var fe,Te;return Ct(K)?Te=K:(K=Vi(K),fe=K.slice(0,-1),K=K[K.length-1]),Or(F,function(_e){var c=Te;if(!c){if(fe&&fe.length&&(_e=To(_e,fe)),null==_e)return;c=_e[K]}return null==c?c:c.apply(_e,oe)})});function ni(F,K){return Or(F,oo(K))}function zi(F,K,oe){var fe,Te,_e=-1/0,c=-1/0;if(null==K||"number"==typeof K&&"object"!=typeof F[0]&&null!=F)for(var p=0,x=(F=Ft(F)?F:Vr(F)).length;p<x;p++)null!=(fe=F[p])&&fe>_e&&(_e=fe);else K=mr(K,oe),or(F,function(C,N,D){((Te=K(C,N,D))>c||Te===-1/0&&_e===-1/0)&&(_e=C,c=Te)});return _e}var Xo=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ko(F){return F?vr(F)?b.call(F):ke(F)?F.match(Xo):Ft(F)?Or(F,Br):Vr(F):[]}function Mo(F,K,oe){if(null==K||oe)return Ft(F)||(F=Vr(F)),F[ma(F.length-1)];var fe=Ko(F),Te=Dt(fe);K=Math.max(Math.min(K,Te),0);for(var _e=Te-1,c=0;c<K;c++){var p=ma(c,_e),x=fe[c];fe[c]=fe[p],fe[p]=x}return fe.slice(0,K)}function so(F,K){return function(oe,fe,Te){var _e=K?[[],[]]:{};return fe=mr(fe,Te),or(oe,function(c,p){var x=fe(c,p,oe);F(_e,c,x)}),_e}}var _a=so(function(F,K,oe){Nn(F,oe)?F[oe].push(K):F[oe]=[K]}),Jo=so(function(F,K,oe){F[oe]=K}),Ca=so(function(F,K,oe){Nn(F,oe)?F[oe]++:F[oe]=1}),Qo=so(function(F,K,oe){F[oe?0:1].push(K)},!0);function wa(F,K,oe){return K in oe}var Sa=q(function(F,K){var oe={},fe=K[0];if(null==F)return oe;Ct(fe)?(K.length>1&&(fe=Bi(fe,K[1])),K=xt(F)):(fe=wa,K=Hr(K,!1,!1),F=Object(F));for(var Te=0,_e=K.length;Te<_e;Te++){var c=K[Te],p=F[c];fe(p,c,F)&&(oe[c]=p)}return oe}),Wa=q(function(F,K){var oe,fe=K[0];return Ct(fe)?(fe=nn(fe),K.length>1&&(oe=K[1])):(K=Or(Hr(K,!1,!1),String),fe=function(Te,_e){return!kr(K,_e)}),Sa(F,fe,oe)});function Ta(F,K,oe){return b.call(F,0,Math.max(0,F.length-(null==K||oe?1:K)))}function Zo(F,K,oe){return null==F||F.length<1?null==K||oe?void 0:[]:null==K||oe?F[0]:Ta(F,F.length-K)}function ri(F,K,oe){return b.call(F,null==K||oe?1:K)}var uo=q(function(F,K){return K=Hr(K,!0,!0),Ir(F,function(oe){return!kr(K,oe)})}),$a=q(function(F,K){return uo(F,K)});function Li(F,K,oe,fe){Ae(K)||(fe=oe,oe=K,K=!1),null!=oe&&(oe=mr(oe,fe));for(var Te=[],_e=[],c=0,p=Dt(F);c<p;c++){var x=F[c],C=oe?oe(x,c,F):x;K&&!oe?(c&&_e===C||Te.push(x),_e=C):oe?kr(_e,C)||(_e.push(C),Te.push(x)):kr(Te,x)||Te.push(x)}return Te}var pi=q(function(F){return Li(Hr(F,!0,!0))});function qo(F){for(var K=F&&zi(F,Dt).length||0,oe=Array(K),fe=0;fe<K;fe++)oe[fe]=ni(F,fe);return oe}var wn=q(qo);function Ie(F,K){return F._chain?me(K).chain():K}function Lr(F){return or($n(F),function(K){var oe=me[K]=F[K];me.prototype[K]=function(){var fe=[this._wrapped];return E.apply(fe,arguments),Ie(this,oe.apply(me,fe))}}),me}or(["pop","push","reverse","shift","sort","splice","unshift"],function(F){var K=v[F];me.prototype[F]=function(){var oe=this._wrapped;return null!=oe&&(K.apply(oe,arguments),"shift"!==F&&"splice"!==F||0!==oe.length||delete oe[0]),Ie(this,oe)}}),or(["concat","join","slice"],function(F){var K=v[F];me.prototype[F]=function(){var oe=this._wrapped;return null!=oe&&(oe=K.apply(oe,arguments)),Ie(this,oe)}});var Rr=Lr({__proto__:null,VERSION:G,restArguments:q,isObject:ve,isNull:function(F){return null===F},isUndefined:we,isBoolean:Ae,isElement:function(F){return!(!F||1!==F.nodeType)},isString:ke,isNumber:$e,isDate:We,isRegExp:Ke,isError:Ze,isSymbol:st,isArrayBuffer:mt,isDataView:Wn,isArray:vr,isFunction:Ct,isArguments:Ue,isFinite:function(F){return!st(F)&&o(F)&&!isNaN(parseFloat(F))},isNaN:Qe,isTypedArray:Gt,isEmpty:function(F){if(null==F)return!0;var K=Dt(F);return"number"==typeof K&&(vr(F)||ke(F)||Ue(F))?0===K:0===Dt(U(F))},isMatch:te,isEqual:function(F,K){return rt(F,K)},isMap:pt,isWeakMap:En,isSet:Dn,isWeakSet:nr,keys:U,allKeys:xt,values:Vr,pairs:function(F){for(var K=U(F),oe=K.length,fe=Array(oe),Te=0;Te<oe;Te++)fe[Te]=[K[Te],F[K[Te]]];return fe},invert:Jn,functions:$n,methods:$n,extend:ga,extendOwn:ro,assign:ro,defaults:So,create:function(F,K){var oe=ge(F);return K&&ro(oe,K),oe},clone:function(F){return ve(F)?vr(F)?F.slice():ga({},F):F},tap:function(F,K){return K(F),F},get:ut,has:function(F,K){for(var oe=(K=Vi(K)).length,fe=0;fe<oe;fe++){var Te=K[fe];if(!Nn(F,Te))return!1;F=F[Te]}return!!oe},mapObject:function(F,K,oe){K=mr(K,oe);for(var fe=U(F),Te=fe.length,_e={},c=0;c<Te;c++){var p=fe[c];_e[p]=K(F[p],p,F)}return _e},identity:Br,constant:lt,noop:va,toPath:Xr,property:oo,propertyOf:function(F){return null==F?va:function(K){return ut(F,K)}},matcher:io,matches:io,times:function(F,K,oe){var fe=Array(Math.max(0,F));K=Bi(K,oe,1);for(var Te=0;Te<F;Te++)fe[Te]=K(Te);return fe},random:ma,now:Er,escape:$o,unescape:it,templateSettings:Ua,template:function(F,K,oe){!K&&oe&&(K=oe),K=So({},K,me.templateSettings);var fe=RegExp([(K.escape||Si).source,(K.interpolate||Si).source,(K.evaluate||Si).source].join("|")+"|$","g"),Te=0,_e="__p+='";F.replace(fe,function(C,N,D,W,se){return _e+=F.slice(Te,se).replace(xa,bn),Te=se+C.length,N?_e+="'+\n((__t=("+N+"))==null?'':_.escape(__t))+\n'":D?_e+="'+\n((__t=("+D+"))==null?'':__t)+\n'":W&&(_e+="';\n"+W+"\n__p+='"),C}),_e+="';\n";var c,p=K.variable;if(p){if(!Po.test(p))throw new Error("variable is not a bare identifier: "+p)}else _e="with(obj||{}){\n"+_e+"}\n",p="obj";_e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+_e+"return __p;\n";try{c=new Function(p,"_",_e)}catch(C){throw C.source=_e,C}var x=function(C){return c.call(this,C,me)};return x.source="function("+p+"){\n"+_e+"}",x},result:function(F,K,oe){var fe=(K=Vi(K)).length;if(!fe)return Ct(oe)?oe.call(F):oe;for(var Te=0;Te<fe;Te++){var _e=null==F?void 0:F[K[Te]];void 0===_e&&(_e=oe,Te=fe),F=Ct(_e)?_e.call(F):_e}return F},uniqueId:function(F){var K=++hs+"";return F?F+K:K},chain:function(F){var K=me(F);return K._chain=!0,K},iteratee:Eo,partial:ji,bind:Ei,bindAll:gt,memoize:function(F,K){var oe=function(fe){var Te=oe.cache,_e=""+(K?K.apply(this,arguments):fe);return Nn(Te,_e)||(Te[_e]=F.apply(this,arguments)),Te[_e]};return oe.cache={},oe},delay:Pr,defer:di,throttle:function(F,K,oe){var fe,Te,_e,c,p=0;oe||(oe={});var x=function(){p=!1===oe.leading?0:Er(),fe=null,c=F.apply(Te,_e),fe||(Te=_e=null)},C=function(){var N=Er();p||!1!==oe.leading||(p=N);var D=K-(N-p);return Te=this,_e=arguments,D<=0||D>K?(fe&&(clearTimeout(fe),fe=null),p=N,c=F.apply(Te,_e),fe||(Te=_e=null)):fe||!1===oe.trailing||(fe=setTimeout(x,D)),c};return C.cancel=function(){clearTimeout(fe),p=0,fe=Te=_e=null},C},debounce:function(F,K,oe){var fe,Te,_e,c,p,x=function(){var N=Er()-Te;K>N?fe=setTimeout(x,K-N):(fe=null,oe||(c=F.apply(p,_e)),fe||(_e=p=null))},C=q(function(N){return p=this,_e=N,Te=Er(),fe||(fe=setTimeout(x,K),oe&&(c=F.apply(p,_e))),c});return C.cancel=function(){clearTimeout(fe),fe=_e=p=null},C},wrap:function(F,K){return ji(K,F)},negate:nn,compose:function(){var F=arguments,K=F.length-1;return function(){for(var oe=K,fe=F[K].apply(this,arguments);oe--;)fe=F[oe].call(this,fe);return fe}},after:function(F,K){return function(){if(--F<1)return K.apply(this,arguments)}},before:Pi,once:dr,findKey:ba,findIndex:Ai,findLastIndex:hi,sortedIndex:Mi,indexOf:Ga,lastIndexOf:yr,find:ir,detect:ir,findWhere:function(F,K){return ir(F,io(K))},each:or,forEach:or,map:Or,collect:Or,reduce:Ao,foldl:Ao,inject:Ao,reduceRight:Kr,foldr:Kr,filter:Ir,select:Ir,reject:function(F,K,oe){return Ir(F,nn(mr(K)),oe)},every:Oi,all:Oi,some:ao,any:ao,contains:kr,includes:kr,include:kr,invoke:ki,pluck:ni,where:function(F,K){return Ir(F,io(K))},max:zi,min:function(F,K,oe){var fe,Te,_e=1/0,c=1/0;if(null==K||"number"==typeof K&&"object"!=typeof F[0]&&null!=F)for(var p=0,x=(F=Ft(F)?F:Vr(F)).length;p<x;p++)null!=(fe=F[p])&&fe<_e&&(_e=fe);else K=mr(K,oe),or(F,function(C,N,D){((Te=K(C,N,D))<c||Te===1/0&&_e===1/0)&&(_e=C,c=Te)});return _e},shuffle:function(F){return Mo(F,1/0)},sample:Mo,sortBy:function(F,K,oe){var fe=0;return K=mr(K,oe),ni(Or(F,function(Te,_e,c){return{value:Te,index:fe++,criteria:K(Te,_e,c)}}).sort(function(Te,_e){var c=Te.criteria,p=_e.criteria;if(c!==p){if(c>p||void 0===c)return 1;if(c<p||void 0===p)return-1}return Te.index-_e.index}),"value")},groupBy:_a,indexBy:Jo,countBy:Ca,partition:Qo,toArray:Ko,size:function(F){return null==F?0:Ft(F)?F.length:U(F).length},pick:Sa,omit:Wa,first:Zo,head:Zo,take:Zo,initial:Ta,last:function(F,K,oe){return null==F||F.length<1?null==K||oe?void 0:[]:null==K||oe?F[F.length-1]:ri(F,Math.max(0,F.length-K))},rest:ri,tail:ri,drop:ri,compact:function(F){return Ir(F,Boolean)},flatten:function(F,K){return Hr(F,K,!1)},without:$a,uniq:Li,unique:Li,union:pi,intersection:function(F){for(var K=[],oe=arguments.length,fe=0,Te=Dt(F);fe<Te;fe++){var _e=F[fe];if(!kr(K,_e)){var c;for(c=1;c<oe&&kr(arguments[c],_e);c++);c===oe&&K.push(_e)}}return K},difference:uo,unzip:qo,transpose:qo,zip:wn,object:function(F,K){for(var oe={},fe=0,Te=Dt(F);fe<Te;fe++)K?oe[F[fe]]=K[fe]:oe[F[fe][0]]=F[fe][1];return oe},range:function(F,K,oe){null==K&&(K=F||0,F=0),oe||(oe=K<F?-1:1);for(var fe=Math.max(Math.ceil((K-F)/oe),0),Te=Array(fe),_e=0;_e<fe;_e++,F+=oe)Te[_e]=F;return Te},chunk:function(F,K){if(null==K||K<1)return[];for(var oe=[],fe=0,Te=F.length;fe<Te;)oe.push(b.call(F,fe,fe+=K));return oe},mixin:Lr,default:me});return Rr._=Rr,Rr}()}}]);