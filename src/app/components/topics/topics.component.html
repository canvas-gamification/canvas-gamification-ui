<div class="topics-page container-fluid mt-md-5">
    <div class="mx-auto">
        <h1 class="my-md-2">{{ title }}</h1>
        <h4>{{ subtitle }}</h4>
        <table class="table table-lg table-bordered table-hover" style="width:100%">
            <caption class="sr-only">Topics covered in Canvas Gamification</caption>
            <thead class="thead-light">
                <tr>
                    <th class="header-topic" scope="col">Topic</th>
                    <th scope="col">Available Questions</th>
                    <th scope="col">Average Success Rate</th>
                </tr>
            </thead>
            <tbody class="table-striped">
                <ng-container *ngFor="let category of topLevelCategories">
                    <tr [class.table-primary]="expanded[category.name]" (click)="toggleChildTopics(category)">
                        <th>
                            <span class="expanded-icon">
                                <fa-icon [icon]=faCaretRight *ngIf="!expanded[category.name]"></fa-icon>
                                <fa-icon [icon]=faCaretDown *ngIf="expanded[category.name]"></fa-icon>
                            </span>
                            {{ category.name }}
                        </th>
                        <td>{{ category.numQuestions }}</td>
                        <td *ngIf="category.avgSuccess">{{ category.avgSuccess }}%</td>
                        <td *ngIf="!category.avgSuccess">-</td>
                    </tr>
                    <ng-container *ngIf="expanded[category.name]">
                        <ng-container *ngFor="let subcat of subcats[category.name]">
                            <tr class="subcat-row">
                                <td class="subcat-name"><span class="heavy-indent">{{ subcat.name }}</span></td>
                                <td>{{ subcat.numQues }}</td>
                                <td *ngIf="subcat.avgSuccess">{{ category.avgSuccess }}%</td>
                                <td *ngIf="!subcat.avgSuccess">-</td>
                            </tr>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </tbody>
        </table>
    </div>
</div>