<div class="topics-page container-fluid mt-md-5">
    <div class="mx-auto">
        <h1 class="my-md-2">{{ title }}</h1>
        <h4>{{ subtitle }}</h4>
        <table class="table table-lg table-bordered table-hover" style="width:100%">
            <caption class="sr-only">Topics covered in Canvas Gamification</caption>
            <thead class="thead-light">
                <tr>
                    <th class="header-topic" scope="col">Topic</th>
                    <th scope="col">Available Questions</th>
                    <th scope="col">Average Success Rate</th>
                </tr>
            </thead>
            <tbody class="table-striped">
                <ng-container *ngFor="let category of topLevelCategories">
                    <tr [class.table-primary]="expanded[category.name]" (click)="toggleChildTopics(category)">
                        <th>
                            <span class="expanded-icon">
                                <i class="fas fa-caret-right" *ngIf="!expanded[category.name]"></i>
                                <i class="fas fa-caret-down" *ngIf="expanded[category.name]"></i>
                            </span>
                            {{ category.name }}
                        </th>
                        <td>{{ category.numQues }}</td>
                        <td>{{ category.avgSuccess }}%</td>
                    </tr>
                    <ng-container *ngIf="expanded[category.name]">
                        <ng-container *ngFor="let subcat of subcats[category.name]">
                            <tr class="subcat-row">
                                <td class="subcat-name">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ subcat.name }}</td>
                                <td>{{ subcat.numQues }}</td>
                                <td>{{ subcat.avgSuccess }}%</td>
                            </tr>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </tbody>
        </table>
    </div>
</div>