(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[746],{14746:(E,W,d)=>{"use strict";d.r(W),d.d(W,{CourseModule:()=>l_});var m={};d.r(m),d.d(m,{ellipseWithEllipse:()=>hi,ellipseWithLine:()=>_l,exists:()=>jd,lineWithLine:()=>Ia,pathWithEllipse:()=>Yd,pathWithLine:()=>wl,pathWithPath:()=>yc,pathWithPolygon:()=>Au,pathWithPolyline:()=>Ss,pathWithRect:()=>Xd,polygonWithEllipse:()=>bo,polygonWithLine:()=>_c,polygonWithPolygon:()=>Wd,polygonWithPolyline:()=>Cl,polygonWithRect:()=>Pi,polylineWithEllipse:()=>bl,polylineWithLine:()=>xl,polylineWithPolyline:()=>$d,polylineWithRect:()=>Gd,rectWithEllipse:()=>Ud,rectWithLine:()=>zd,rectWithRect:()=>yl});var g={};d.r(g),d.d(g,{Curve:()=>Wn,Ellipse:()=>Oi,Line:()=>Pt,Path:()=>Lt,Point:()=>_e,Polygon:()=>Hr,Polyline:()=>qn,Rect:()=>bt,bezier:()=>vc,ellipse:()=>Dd,intersection:()=>Ou,line:()=>oa,normalizeAngle:()=>ci,point:()=>ri,random:()=>fl,rect:()=>hc,scale:()=>no,snapToGrid:()=>Ta,toDeg:()=>wu,toRad:()=>di,types:()=>en});var S={};d.r(S),d.d(S,{absolute:()=>Pl,bottom:()=>Ef,ellipse:()=>Pf,ellipseSpread:()=>If,fn:()=>Sp,left:()=>Sf,line:()=>wf,right:()=>kc,top:()=>Tf});var T={};d.r(T),d.d(T,{bottom:()=>Ip,inside:()=>kp,insideOriented:()=>Ap,left:()=>Ep,manual:()=>Tp,outside:()=>Mp,outsideOriented:()=>Pp,radial:()=>Op,radialOriented:()=>Lp,right:()=>Oc,top:()=>kf});var _={};d.r(_),d.d(_,{manhattan:()=>Rl,metro:()=>Kp,normal:()=>Al,oneSide:()=>so,orthogonal:()=>ru});var I={};d.r(I),d.d(I,{curve:()=>Uc,jumpover:()=>im,normal:()=>om,rounded:()=>Wf,smooth:()=>Yf});var O={};d.r(O),d.d(O,{addClass:()=>_m,mask:()=>nh,opacity:()=>vm,stroke:()=>gm});var k={};d.r(k),d.d(k,{connectionClosest:()=>ih,connectionLength:()=>ym,connectionPerpendicular:()=>Cm,connectionRatio:()=>$c,resolveRef:()=>oi});var R={};d.r(R),d.d(R,{anchor:()=>Em,bbox:()=>Im,boundary:()=>Qc,rectangle:()=>Pm});var B={};d.r(B),d.d(B,{bottom:()=>Fm,bottomLeft:()=>Vm,bottomRight:()=>Hm,center:()=>Om,left:()=>Rm,midSide:()=>zm,modelCenter:()=>Um,perpendicular:()=>jm,right:()=>Nm,top:()=>Lm,topLeft:()=>Dm,topRight:()=>Bm});var A=d(69808),K=d(75197),q=d(6741),ae=d(48558),n=d(5e3),se=d(21137),ce=d(17448),le=d(25635),Y=d(93075),pe=d(9419),we=d(46421),Le=d(99848);let b=(()=>{class e{transform(t,i){return t.is_teacher||i.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function Ge(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"app-course-island",7),n.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("course",t)("hasViewPermission",n.\u0275\u0275pipeBind2(2,2,i.user,t))}}function ut(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Ge,3,5,"ng-container",6),n.\u0275\u0275pipe(2,"tuiFilter"),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function ze(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"app-course-island",8),n.\u0275\u0275elementContainerEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("skeleton",!0))}const Ne=function(){return[0,0,0,0,0,0]};function Re(e,r){1&e&&n.\u0275\u0275template(0,ze,2,1,"ng-container",6),2&e&&n.\u0275\u0275property("ngForOf",n.\u0275\u0275pureFunction0(1,Ne))}let nt=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.route=i,this.courseService=o,this.STATUS=ae.Q_,this.courseNameSearch="",this.matchCourseName=(s,c)=>""===c||s.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(ce.N))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),n.\u0275\u0275text(2,"Course List"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"tui-input",2),n.\u0275\u0275listener("ngModelChange",function(s){return i.courseNameSearch=s}),n.\u0275\u0275text(4," Search Courses "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",3),n.\u0275\u0275template(6,ut,3,5,"ng-container",4),n.\u0275\u0275template(7,Re,1,2,"ng-template",null,5,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()()),2&t){const o=n.\u0275\u0275reference(8);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngModel",i.courseNameSearch)("tuiTextfieldCleaner",!0),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.allCourses)("ngIfElse",o)}},directives:[le.K3,le.wU,Y.NgControlStatus,Y.NgModel,pe.be,A.O5,A.sg,we.V],pipes:[Le.S,b],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class Ke{static createForm(){return(new Y.FormBuilder).group({code:new Y.FormControl("",[Y.Validators.required])})}static extractData(r){return r.value}}var mt=d(4024),_t=d(769),pt=d(46693),Kt=d(96063),an=d(8871);const jn=["stepper"];function Zn(e,r){1&e&&n.\u0275\u0275element(0,"div",5)}function zn(e,r){1&e&&n.\u0275\u0275element(0,"div",6)}const dr=function(e){return["/course",e]};function Xn(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-notification",7),n.\u0275\u0275text(2," You are already registered in this course "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",8)(4,"a",9),n.\u0275\u0275text(5," Open Course "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(4),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(1,dr,t.courseId))}}function We(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-notification",10),n.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function Ze(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-notification",11),n.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"form",12),n.\u0275\u0275listener("ngSubmit",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext(2).onSubmit()}),n.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),n.\u0275\u0275text(6," Enter verification code\xa0"),n.\u0275\u0275element(7,"span",15),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(8,"tui-field-error",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",8)(10,"button",17),n.\u0275\u0275text(11," Register "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}if(2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("formGroup",t.form),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiTextfieldCleaner",!0),n.\u0275\u0275advance(5),n.\u0275\u0275property("showLoader",t.loadingContent)}}function ft(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h1",2),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Zn,1,0,"div",3),n.\u0275\u0275template(4,zn,1,0,"div",4),n.\u0275\u0275template(5,Xn,6,3,"ng-container",1),n.\u0275\u0275template(6,We,3,0,"ng-container",1),n.\u0275\u0275template(7,Ze,12,3,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showSkeletons),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.showSkeletons),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function xt(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",18),n.\u0275\u0275element(2,"tui-marker-icon",19),n.\u0275\u0275elementStart(3,"h1",20),n.\u0275\u0275text(4," Unable to find the course for registration. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"p",21),n.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd())}let At=(()=>{class e{constructor(t,i,o,s,c){this.route=t,this.router=i,this.courseService=o,this.changeDetector=s,this.notificationsService=c,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.parent.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=Ke.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1,this.registered=t.course_reg.is_verified,this.blocked=t.course_reg.is_blocked,t.registration_mode===ae.Jk.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const t=Ke.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,t).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(jn,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(i.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"section",0),n.\u0275\u0275template(1,ft,8,10,"ng-container",1),n.\u0275\u0275template(2,xt,7,0,"ng-container",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.courseNotFound),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.courseNotFound))},directives:[A.O5,_t.Ls,pt.v0,q.yS,Y.\u0275NgNoValidate,Y.NgControlStatusGroup,Y.FormGroupDirective,le.K3,le.wU,Y.NgControlStatus,Y.FormControlName,pe.be,Kt.y,an.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();function U(e,r,t,i){return new(t||(t=Promise))(function(s,c){function f(M){try{C(i.next(M))}catch(x){c(x)}}function v(M){try{C(i.throw(M))}catch(x){c(x)}}function C(M){M.done?s(M.value):function o(s){return s instanceof t?s:new t(function(c){c(s)})}(M.value).then(f,v)}C((i=i.apply(e,r||[])).next())})}var gi=d(92198),wr=d(3605),un=d(27221),vi=d(40520),Uo=d(93514);let jr=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}getCourseEvent(t){const i=this.apiService.getURL("event",t);return this.http.get(i).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const i=this.apiService.getURL("event",t);return this.http.delete(i).pipe((0,un.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const i=this.apiService.getURL("event");return this.http.post(i,t).pipe((0,un.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const i=this.apiService.getURL("event",t.id);return this.http.put(i,t).pipe((0,un.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,i){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:t.id,course:i},{observe:"response"}).pipe((0,un.K)(this.apiService.handleError("Error occurred during question import.")))}getStats(t){const i=this.apiService.getURL("event",t,"stats");return this.http.get(i).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching event stats")))}setFeatured(t){const i=this.apiService.getURL("event",t,"set-featured");return this.http.post(i,null).pipe((0,un.K)(this.apiService.handleError("Error occurred while setting featured")))}addQuestion(t,i){const o=this.apiService.getURL("event",t,"add-question");return this.http.post(o,{question_id:i}).pipe((0,un.K)(this.apiService.handleError("Error occurred while adding question")))}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(vi.eN),n.\u0275\u0275inject(Uo.s))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fo=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}getChallengeTeams(t){const i=this.apiService.getURL("team"),o=(new vi.LE).set("event",String(t));return this.http.get(i,{params:o}).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching all teams of this challenge.")))}getTeam(t){const i=this.apiService.getURL("team",t);return this.http.get(i).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching the team.",null,{redirect404:!0})))}getMyTeam(t){const i=this.apiService.getURL("team","my-team"),o=(new vi.LE).set("event_id",String(t));return this.http.get(i,{params:o}).pipe((0,un.K)(this.apiService.handleError("Error occurred while fetching My Team.")))}joinTeam(t){const i=this.apiService.getURL("team","join");return this.http.post(i,{team_id:t}).pipe((0,un.K)(this.apiService.handleError("Error occurred while joining the team.")))}createAndJoin(t){const i=this.apiService.getURL("team","create-and-join");return this.http.post(i,t).pipe((0,un.K)(this.apiService.handleError("Error occurred while adding Team.")))}updateTeam(t,i){const o=this.apiService.getURL("team",i);return this.http.patch(o,t).pipe((0,un.K)(this.apiService.handleError("Error occurred while updating Team.")))}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(vi.eN),n.\u0275\u0275inject(Uo.s))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ke=d(52014),Xe=d(73442),sr=d(28634),Br=d(93030),Jr=d(40022),ai=d(83618),ho=d(70228),_i=d(89627),ur=d(84620),ns=d(8929);function os(e,r){1&e&&n.\u0275\u0275elementContainer(0)}function Da(e,r){1&e&&n.\u0275\u0275elementContainer(0)}function as(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",4)}function Ba(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Da,1,0,"ng-container",2),n.\u0275\u0275template(2,as,1,0,"tui-svg",3),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit,i=r.last;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i)}}let ha=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.\u0275\u0275defineDirective({type:e,selectors:[["ng-template","tuiBreadcrumb",""]]}),e})();var ss;let Po=ss=class{constructor(){this.size="m",this.items=sr.Mm,this.change$=new ns.xQ,this.mode="onLight"}ngOnChanges(){}};Po.\u0275fac=function(r){return new(r||Po)},Po.\u0275cmp=n.\u0275\u0275defineComponent({type:Po,selectors:[["tui-breadcrumbs",3,"items",""]],contentQueries:function(r,t,i){if(1&r&&n.\u0275\u0275contentQuery(i,ha,4,n.TemplateRef),2&r){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(t.items=o)}},hostVars:1,hostBindings:function(r,t){2&r&&n.\u0275\u0275attribute("data-size",t.size)},inputs:{size:"size"},features:[n.\u0275\u0275ProvidersFeature([{provide:ho.w,useExisting:(0,n.forwardRef)(()=>ss)}]),n.\u0275\u0275NgOnChangesFeature],decls:3,vars:4,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],["src","tuiIconChevronRight","class","icon",4,"ngIf"],["src","tuiIconChevronRight",1,"icon"]],template:function(r,t){1&r&&(n.\u0275\u0275template(0,os,1,0,"ng-container",0),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275template(2,Ba,3,2,"ng-container",1)),2&r&&(n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,2,t.items.changes)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.items))},directives:[A.O5,A.sg,A.tP,ur.P],pipes:[A.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:2.5rem;font:var(--tui-font-text-s)}[data-size='l'][_nghost-%COMP%]{font:var(--tui-font-text-m)}.icon[_ngcontent-%COMP%]{margin:0 .25rem;color:var(--tui-text-03)}"],changeDetection:0}),(0,ke.gn)([(0,n.Input)(),(0,n.HostBinding)("attr.data-size"),(0,Xe.TH)()],Po.prototype,"size",void 0),(0,ke.gn)([(0,n.ContentChildren)(ha,{read:n.TemplateRef})],Po.prototype,"items",void 0);let pa=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,q.Bz,Br.I,Jr.WD,_i.j,ur.E,ho.z]]}),e})();function Os(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("routerLink",t.routerLink),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.caption," ")}}function Ls(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Os,2,2,"a",6),n.\u0275\u0275elementContainerEnd())}function Go(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-breadcrumbs",4),n.\u0275\u0275template(2,Ls,2,0,"ng-container",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("size","l"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.breadCrumbs)}}function Mo(e,r){1&e&&(n.\u0275\u0275elementStart(0,"a",9),n.\u0275\u0275text(1,"crumb that is longer"),n.\u0275\u0275elementEnd())}function ma(e,r){1&e&&(n.\u0275\u0275elementStart(0,"a",9),n.\u0275\u0275text(1,"crumb that is longer"),n.\u0275\u0275elementEnd())}function zr(e,r){1&e&&(n.\u0275\u0275elementStart(0,"a",9),n.\u0275\u0275text(1,"crumb that is longer"),n.\u0275\u0275elementEnd())}function Ao(e,r){1&e&&(n.\u0275\u0275elementStart(0,"tui-breadcrumbs",4),n.\u0275\u0275template(1,Mo,2,0,"a",8),n.\u0275\u0275template(2,ma,2,0,"a",8),n.\u0275\u0275template(3,zr,2,0,"a",8),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("size","l")}function uu(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",12)(2,"p",13),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",null==t.course?null:t.course.description," ")}}function Va(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h5",10),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,uu,4,1,"ng-container",11),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",!t.course),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",null==t.course?null:t.course.name," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.displayDescription)}}function us(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",12)(2,"p",13),n.\u0275\u0275text(3,"Content"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd())}function $o(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"h5",14),n.\u0275\u0275text(1," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,us,4,0,"ng-container",11)),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.displayDescription)}}let ls=(()=>{class e{constructor(t,i,o,s,c,f,v){this.authenticationService=t,this.courseService=i,this.uqjService=o,this.courseEventService=s,this.teamService=c,this.route=f,this.router=v,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(C=>this.user=C)}fetchEvent(t){return U(this,void 0,void 0,function*(){this.event=yield this.courseEventService.getCourseEvent(t).toPromise(),this.uqjs=(yield this.uqjService.getUQJs({filters:{question_event:t}}).toPromise()).results})}fetchTeam(t){return U(this,void 0,void 0,function*(){this.team=yield this.teamService.getTeam(t).toPromise()})}getBreadCrumbs(t){var i,o;return U(this,void 0,void 0,function*(){let s;if(t.firstChild.data.breadCrumbs){if(s=t.firstChild.data.breadCrumbs,s=s.map(c=>Object.assign(Object.assign({},c),{routerLink:c.routerLink.replace(":courseId",String(this.courseId)).replace(":goalId",t.firstChild.params.goalId).replace(":eventId",t.firstChild.params.eventId).replace(":id",t.firstChild.params.id).replace(":teamId",t.firstChild.params.teamId)})),t.firstChild.params.eventId){const c=t.firstChild.params.eventId;(null===(i=this.event)||void 0===i?void 0:i.id)!==c&&(yield this.fetchEvent(c)),s=s.map(f=>Object.assign(Object.assign({},f),{caption:f.caption.replace(":eventName",this.event.name)}))}if(t.firstChild.params.id){const c=+t.firstChild.params.id,f=this.uqjs.find(v=>v.question.id===c);s=s.map(v=>Object.assign(Object.assign({},v),{caption:v.caption.replace(":questionName",f.question.title)}))}if(t.firstChild.params.teamId){const c=t.firstChild.params.teamId;(null===(o=this.team)||void 0===o?void 0:o.id)!==c&&(yield this.fetchTeam(c)),s=s.map(f=>Object.assign(Object.assign({},f),{caption:f.caption.replace(":teamName",this.team.name)}))}}this.breadCrumbs=s})}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t}),this.getBreadCrumbs(this.route.snapshot).then(),this.displayDescription=this.router.url.includes("/homepage"),this.router.events.pipe((0,gi.h)(t=>t instanceof q.m2)).subscribe(()=>{this.breadCrumbs=null,this.displayDescription=this.router.url.includes("/homepage"),this.getBreadCrumbs(this.route.snapshot).then()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(wr.O),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(fo),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(q.F0))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:8,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[4,"ngIf","ngIfElse"],["skeletonBreadcrumbs",""],["skeletonTemplate",""],[1,"my-3",3,"size"],[4,"ngFor","ngForOf"],["tuiLink","",3,"routerLink",4,"tuiBreadcrumb"],["tuiLink","",3,"routerLink"],["tuiLink","","class","tui-skeleton",4,"tuiBreadcrumb"],["tuiLink","",1,"tui-skeleton"],[1,"tui-text_h5","mb-5"],[4,"ngIf"],[1,"mb-10","-mt-5"],[1,"tui-text_body-xl","tui-island__paragraph"],[1,"tui-text_h5","mb-5","tui-skeleton_short","tui-skeleton"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"section",0),n.\u0275\u0275template(1,Go,3,2,"ng-container",1),n.\u0275\u0275template(2,Ao,4,1,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(4,Va,4,4,"ng-container",1),n.\u0275\u0275template(5,$o,3,1,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(7,"router-outlet")),2&t){const o=n.\u0275\u0275reference(3),s=n.\u0275\u0275reference(6);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.breadCrumbs&&i.course)("ngIfElse",o),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.course)("ngIfElse",s)}},directives:[A.O5,Po,A.sg,ha,_i.V,q.yS,q.lC],styles:[".course-banner[_ngcontent-%COMP%]{background-color:var(--tui-secondary)}"]}),e})();var st=d(68858);let eo=(()=>{class e{static createForm(){return(new Y.FormBuilder).group({name:new Y.FormControl(null,[Y.Validators.required]),type:new Y.FormControl("",[Y.Validators.required]),countForTokens:new Y.FormControl(!1,[Y.Validators.required]),startEndDatePicker:new Y.FormControl(new st.VR(st.TU.currentLocal(),st.TU.currentLocal().append({day:7})),[Y.Validators.required]),startTimePicker:new Y.FormControl(st.qD.currentLocal(),[Y.Validators.required]),endTimePicker:new Y.FormControl(st.qD.currentLocal(),[Y.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new Y.FormBuilder).group({name:new Y.FormControl(t.name,[Y.Validators.required]),type:new Y.FormControl(t.type,[Y.Validators.required]),countForTokens:new Y.FormControl(t.count_for_tokens,[Y.Validators.required]),startEndDatePicker:new Y.FormControl(new st.VR(st.TU.fromLocalNativeDate(new Date(t.start_date)),st.TU.fromLocalNativeDate(new Date(t.end_date))),[Y.Validators.required]),startTimePicker:new Y.FormControl(st.qD.fromLocalNativeDate(new Date(t.start_date)),[Y.Validators.required]),endTimePicker:new Y.FormControl(st.qD.fromLocalNativeDate(new Date(t.end_date)),[Y.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,i,o){return{id:o,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:i,is_not_available_yet:!1,is_closed:!1,featured:!1,max_team_size:3}}static dateAndTimeToLocal(t,i){return new Date(t.toLocalNativeDate().getTime()+i.toAbsoluteMilliseconds())}}return e.dateValidator=r=>{const t=r.get("startEndDatePicker").value,i=r.get("startTimePicker").value,o=r.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&o.toAbsoluteMilliseconds()<=i.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var po=d(86097),Vr=d(95428),ga=d(13774),yi=d(35302),Ur=d(35137),xi=d(14335),ko=d(35640),mo=d(295),Sr=d(39193),_r=d(52164),Ai=d(22307),Un=d(61895),Wo=d(70589),Tr=d(45261),Lr=d(15411),_n=d(72997),kr=d(85113);function Oo(e,{value:r,min:t,max:i,dateFormat:o,dateSeparator:s}){return r&&r.toString(o,s)===e?e:st.TU.normalizeParse(e,o).dayLimit(t,i).toString(o,s)}function va(e){return r=>r.length!==st.ek?{value:r}:{value:Oo(r,e)}}function Lo(e,r){return st.TU.normalizeParse(e.slice(0,st.ek),r.dateFormat).dayLimit(r.min,r.max)}function _a(e,r){const{dateFormat:t,dateSeparator:i}=r;switch(e.length){case st.ek:return Lo(e,r).toString(t,i);case st.ek+st.mH.length:return Lo(e,r).toString(t,i)+st.mH;case st.FZ:return r.value&&r.value.toString(t,i)===e?e:st.VR.sort(Lo(e.slice(0,st.ek),r),Lo(e.slice(st.ek+st.mH.length),r)).toString(t,i);default:return e}}function Ha(e){return r=>({value:_a(r,e)})}function Yo(e="HH:MM",r={}){const t=["HH","MM","SS","MS"],i=Object.assign(Object.assign({},ai.bM),r);return o=>{const s=[],c=o.split("");return t.forEach(v=>{const C=e.indexOf(v),M=parseInt(String(i[v]).substr(0,1),10);parseInt(c[C],10)>M&&(c[C+1]=c[C],c[C]="0",s.push(C))}),!t.some(v=>parseInt(o.substr(e.indexOf(v),2),10)>i[v])&&{value:c.join(""),indexesOfPipedChars:s}}}const Xo=Array(2).fill(Sr.hW),Fs=Array(4).fill(Sr.hW);function Rs(e,r){return"YMD"===(kr.z.assert(1===r.length,"Separator should consist of only 1 symbol"),e)?[...Fs,r,...Xo,r,...Xo]:[...Xo,r,...Xo,r,...Fs]}function cs(e,r){kr.z.assert(1===r.length,"Separator should consist of only 1 symbol");const t=Rs(e,r);return[...t,sr.f$,sr.F,sr.f$,...t]}function ya(e,r){const{length:t}=String(e),i=Array(t).fill(Sr.hW);return r&&i.unshift(r),i}function Ns(e,r={}){const{HH:t,MM:i,SS:o,MS:s}=Object.assign(Object.assign({},ai.bM),r);return[...ya(t),...ya(i,":"),...e.includes("HH:MM:SS")?ya(o,":"):[],..."HH:MM:SS.MSS"===e?ya(s,"."):[]]}var bi=d(35628),Ko=d(24850),Qo=d(7625),go=d(6083),za=d(34530),Er=d(33186),Gi=d(26171),Dt=d(24710),Ci=d(53256),Gn=d(2141),kn=d(66695);let ds=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Er.gH))},e.\u0275dir=n.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,i){2&t&&n.\u0275\u0275attribute("data-tui-color",i.tuiColor)("data-tui-background",i.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Dt.gn)([(0,n.Input)(),(0,n.HostBinding)("attr.data-tui-color"),(0,Xe.TH)()],e.prototype,"tuiColor",void 0),(0,Dt.gn)([(0,n.Input)(),(0,n.HostBinding)("attr.data-tui-background"),(0,Xe.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,n.Inject)(Er.gH))],e),e})(),F=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({}),e})();var J=d(46579);const ge=({month:e,rowIndex:r,colIndex:t,firstDayOfWeek:i})=>{kr.z.assert(Number.isInteger(r)),kr.z.assert((0,J.Z2)(r,0,6)),kr.z.assert(Number.isInteger(t)),kr.z.assert((0,J.Z2)(t,0,st.NA));let o=r*st.NA+t-((e,r)=>{const t=new Date(e.year,e.month,1).getDay();return t>=r?t-r:st.NA-(r-t)})(e,i)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new st.TU(e.year,e.month,o)};let Te=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,i=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const o=[];for(let s=0;s<6;s++){const c=[];for(let f=0;f<st.NA;f++){const v=ge({month:t,rowIndex:s,colIndex:f,firstDayOfWeek:this.firstDayOfWeek}),M=(x,G=t)=>x.year>G.year||x.month>G.month;if(!((x,G=t)=>x.year<G.year||x.month<G.month)(v)||i){if(M(v)&&!i)break;c.push(v)}}o.push(c)}return this.currentSheet=o.filter(s=>s.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Tr.Sy,16))},e.\u0275pipe=n.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,n.Inject)(Tr.Sy))],e),e})(),Be=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({}),e})();function rt(e,r){1&e&&n.\u0275\u0275element(0,"div",3),2&e&&n.\u0275\u0275property("innerText",r.$implicit)}function l(e,r){if(1&e&&n.\u0275\u0275element(0,"div",12),2&e){const t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275property("tuiBackground",t[1])}}function h(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275element(1,"div",12),n.\u0275\u0275template(2,l,1,1,"div",13),n.\u0275\u0275elementEnd()),2&e){const t=r.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiBackground",t[0]),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.length>1)}}function y(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275listener("tuiHoveredChange",function(o){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext().tuiLet;return n.\u0275\u0275nextContext(4).onItemHovered(o&&s)})("tuiPressedChange",function(o){n.\u0275\u0275restoreView(t);const s=n.\u0275\u0275nextContext().tuiLet;return n.\u0275\u0275nextContext(4).onItemPressed(o&&s)})("click",function(){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext().tuiLet;return n.\u0275\u0275nextContext(4).onItemClick(o)}),n.\u0275\u0275elementStart(1,"div",9),n.\u0275\u0275text(2),n.\u0275\u0275template(3,h,3,2,"div",10),n.\u0275\u0275pipe(4,"tuiMapper"),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext().tuiLet,i=n.\u0275\u0275nextContext(4);n.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",i.itemIsToday(t))("t-cell_interval",i.itemIsInterval(t)),n.\u0275\u0275attribute("data-range",i.getItemRange(t))("data-state",i.getItemState(t)),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("t-item_unavailable",i.itemIsUnavailable(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.day," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind4(4,12,t,i.toMarkers,i.itemIsToday(t),!!i.getItemRange(t)))}}function w(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,y,5,17,"div",7),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.tuiLet,i=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.itemIsUnavailable(t)||i.showAdjacent)}}function N(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,w,2,1,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext().tuiLet;n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiLet",o[i][t])}}function H(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275template(1,N,2,1,"ng-container",6),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext().tuiLet;n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiRepeatTimesOf",i[t].length)}}function X(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,H,2,1,"div",4),n.\u0275\u0275elementEnd()),2&e){const t=r.tuiLet;n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let me=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=st.TU.currentLocal(),this.month=st.ql.currentLocal(),this.disabledItemHandler=sr.Iy,this.markerHandler=Sr.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new n.EventEmitter,this.dayClick=new n.EventEmitter,this.toMarkers=(i,o,s)=>{if(o||s)return null;const c=this.markerHandler(i);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof st.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:i,pressedItem:o,hoveredItem:s}=this;return i(t)?"disabled":o&&o.daySame(t)?"pressed":s&&s.daySame(t)?"hovered":null}getItemRange(t){const{value:i,hoveredItem:o}=this;return i?i instanceof st.TU?i.daySame(t)?"single":null:i.from.daySame(t)&&!i.isSingleDay||o&&o.dayAfter(i.from)&&i.from.daySame(t)&&i.isSingleDay||o&&o.daySame(t)&&o.dayBefore(i.from)&&i.isSingleDay?"start":i.to.daySame(t)&&!i.isSingleDay||o&&o.dayBefore(i.from)&&i.from.daySame(t)&&i.isSingleDay||o&&o.daySame(t)&&o.dayAfter(i.from)&&i.isSingleDay?"end":i.isSingleDay&&i.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:i,hoveredItem:o}=this;if(null===i||i instanceof st.TU)return!1;if(!i.isSingleDay)return i.from.daySameOrBefore(t)&&i.to.dayAfter(t);if(null===o)return!1;const s=st.VR.sort(i.from,o);return s.from.daySameOrBefore(t)&&s.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,xi.Hm)(this.hoveredItem,t,(i,o)=>i.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Tr.lQ))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,i){2&t&&n.\u0275\u0275classProp("_single",i.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,rt,1,1,"div",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,X,2,1,"div",2),n.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,2,i.weekDays$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiLet",n.\u0275\u0275pipeBind2(4,4,i.month,!0)))},directives:[A.sg,Jr.Ls,Ci.Xj,A.O5,Gn.c,kn.n,ds],pipes:[A.Ov,Te,Br.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"month",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"markerHandler",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"hoveredItem",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"showAdjacent",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"dayClick",void 0),(0,Dt.gn)([(0,n.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,n.Inject)(Tr.lQ))],e),e})(),de=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Jr.WD,Br.I,Ci.Ih,Gn.V,kn.f,F,Be]]}),e})();var Ae=d(43360);function He(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275listener("tuiHoveredChange",function(o){const c=n.\u0275\u0275restoreView(t).tuiLet;return n.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=n.\u0275\u0275restoreView(t).tuiLet;return n.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const s=n.\u0275\u0275restoreView(t).tuiLet;return n.\u0275\u0275nextContext(3).onItemClick(s)}),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&e){const t=r.tuiLet,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275classProp("t-cell_today",i.itemIsToday(t))("t-cell_interval",i.itemIsInterval(t)),n.\u0275\u0275property("tuiScrollIntoView",i.scrollItemIntoView(t)),n.\u0275\u0275attribute("data-range",i.getItemRange(t))("data-state",i.getItemState(t)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t)}}function dt(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,He,3,8,"div",3),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiLet",o.getItem(i,t))}}function De(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,dt,2,1,"ng-container",2),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiRepeatTimesOf",4))}let zt=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=st.ql.currentLocal().year,this.value=null,this.initialItem=st.ql.currentLocal(),this.min=st.K1,this.max=st.Oy,this.disabledItemHandler=sr.Iy,this.yearClick=new n.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof st.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,i){return 4*t+i+this.calculatedMin}getItemState(t){const{disabledItemHandler:i,max:o,pressedItem:s,hoveredItem:c}=this;return o.year<t||i!==sr.Iy&&i(t)?"disabled":s===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:i,hoveredItem:o}=this;return null===i?null:i instanceof st.F4?i.year===t?"single":null:i.from.year===t&&!i.from.yearSame(i.to)||null!==o&&o>i.from.year&&i.from.year===t&&i.from.yearSame(i.to)||null!==o&&o===t&&o<i.from.year&&i.from.yearSame(i.to)?"start":i.to.year===t&&!i.from.yearSame(i.to)||null!==o&&o<i.from.year&&i.from.year===t&&i.from.yearSame(i.to)||null!==o&&o===t&&o>i.from.year&&i.from.yearSame(i.to)?"end":i.from.yearSame(i.to)&&i.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:i,hoveredItem:o}=this;return!(null===i||!this.isRange(i))&&(i.from.yearSame(i.to)?null!==o&&i.from.year!==o&&(0,J.Z2)(t,Math.min(i.from.year,o),Math.max(i.from.year,o)):i.from.year<=t&&i.to.year>t)}onItemHovered(t,i){this.updateHoveredItem(t,i)}onItemPressed(t,i){this.updatePressedItem(t,i)}onItemClick(t){this.yearClick.emit(new st.F4(t))}updateHoveredItem(t,i){this.hoveredItem=t?i:null}updatePressedItem(t,i){this.pressedItem=t?i:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,i){2&t&&n.\u0275\u0275classProp("_single",i.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,i){1&t&&n.\u0275\u0275template(0,De,2,1,"div",0),2&t&&n.\u0275\u0275property("tuiRepeatTimesOf",i.rows)},directives:[Ci.Xj,Jr.Ls,Ae.M,Gn.c,kn.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"initialItem",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"yearClick",void 0),(0,Dt.gn)([(0,n.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),kt=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[Gn.V,kn.f,Ci.Ih,Jr.WD,Ae.e]]}),e})();var pr=d(61279),Qt=d(33703),Ir=d(37940),$n=d(3054);const nn=["wrapper"];function qr(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",1,2),n.\u0275\u0275listener("tuiFocusedChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onRightClick()}),n.\u0275\u0275elementStart(2,"button",3),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onLeftClick()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",4),n.\u0275\u0275projection(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"button",5),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onRightClick()}),n.\u0275\u0275elementEnd()()}if(2&e){const t=r.ngIf,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("tuiFocusable",i.computedFocusable),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("arrow_hidden",i.leftComputedDisabled),n.\u0275\u0275property("title",t[0])("focusable",!1),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("arrow_hidden",i.rightComputedDisabled),n.\u0275\u0275property("title",t[1])("focusable",!1)}}const Fn=["*"];let mr=(()=>{let e=class extends yi.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new n.EventEmitter,this.rightClick=new n.EventEmitter}get focused(){return!!this.wrapper&&(0,ko.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Tr.U4))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(nn,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(i.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Fn,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,i){1&t&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275template(0,qr,6,9,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,i.spinTexts$))},directives:[A.O5,Gi.A,Qt.t,$n.U,Ir.q,pt.v0],pipes:[A.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Dt.gn)([(0,n.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabled",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"mode",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"leftDisabled",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"rightDisabled",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"leftClick",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"rightClick",void 0),e=(0,Dt.gn)([(0,Dt.fM)(0,(0,n.Inject)(Tr.U4))],e),e})(),fs=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Ir.c,$n.F,Qt.u,Gi.Z,pt.fN]]}),e})();var Ga=d(5767);function ei(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function $i(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",3),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onYearClick()}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("tuiFocusable",!1),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let xa=(()=>{let e=class{constructor(){this.value=st.ql.currentLocal(),this.min=st.K1,this.max=st.Oy,this.valueChange=new n.EventEmitter,this.yearClick=new n.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const i=this.value.append(t);this.min.monthSameOrAfter(i)?this.updateValue(this.min):this.max.monthSameOrBefore(i)?this.updateValue(this.max):this.updateValue(i)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),n.\u0275\u0275listener("leftClick",function(){return i.onPrevMonthClick()})("rightClick",function(){return i.onNextMonthClick()}),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275pipe(3,"tuiMonth"),n.\u0275\u0275template(4,ei,2,1,"ng-container",1),n.\u0275\u0275template(5,$i,2,2,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(6);n.\u0275\u0275property("focusable",!1)("leftDisabled",i.prevMonthDisabled)("rightDisabled",i.nextMonthDisabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,6,n.\u0275\u0275pipeBind1(3,8,i.value))," "),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.oneYear)("ngIfElse",o)}},directives:[mr,A.O5,_i.V,Qt.t],pipes:[A.Ov,Ga.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"valueChange",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"yearClick",void 0),e})(),si=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Qt.u,fs,_i.j,Ga.g]]}),e})();function Fo(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),n.\u0275\u0275listener("yearClick",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onPickerYearClick(o)}),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function wi(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),n.\u0275\u0275listener("valueChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onPaginationYearClick(o)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),n.\u0275\u0275listener("hoveredItemChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onDayClick(o)}),n.\u0275\u0275pipe(2,"tuiMapper"),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),n.\u0275\u0275advance(1),n.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",n.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let Wi=(()=>{let e=class{constructor(){this.month=st.ql.currentLocal(),this.value=null,this.disabledItemHandler=sr.Iy,this.min=st.K1,this.max=st.Oy,this.minViewedMonth=st.K1,this.maxViewedMonth=st.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=Sr.zE,this.dayClick=new n.EventEmitter,this.monthChange=new n.EventEmitter,this.hoveredItemChange=new n.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,i,o)=>s=>s.dayBefore(i)||s.dayAfter(o)||t(s)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new st.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,xi.Hm)(this.hoveredItem,t,(i,o)=>i.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,i){if(1&t&&(n.\u0275\u0275template(0,Fo,2,4,"tui-scrollbar",0),n.\u0275\u0275template(1,wi,3,14,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",i.year)("ngIfElse",o)}},directives:[A.O5,pr.IB,zt,xa,me],pipes:[Br.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"month",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"minViewedMonth",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"hoveredItem",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"showAdjacent",void 0),(0,Dt.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"markerHandler",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"dayClick",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"monthChange",void 0),(0,Dt.gn)([(0,n.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),ba=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,si,de,kt,pr.Jy,Br.I]]}),e})();var Rn=d(56249);let hs=(()=>{let e=class{constructor(t,i,o){this.disabledItemHandler=sr.Iy,this.markerHandler=Sr.zE,this.defaultViewedMonthFirst=st.ql.currentLocal(),this.defaultViewedMonthSecond=st.ql.currentLocal().append({month:1}),this.min=st.K1,this.max=st.Oy,this.value=null,this.dayClick=new n.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(s,c)=>s.append({month:c}),t&&t.pipe((0,za.YP)(i),(0,Qo.R)(o)).subscribe(s=>{this.value=s,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(_n.cU,8),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(Er.a3))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[n.\u0275\u0275ProvidersFeature([Er.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"tui-calendar",0),n.\u0275\u0275listener("hoveredItemChange",function(s){return i.hoveredItem=s})("dayClick",function(s){return i.onDayClick(s)})("monthChange",function(s){return i.onSectionFirstViewedMonth(s)}),n.\u0275\u0275pipe(1,"tuiMapper"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"tui-calendar",1),n.\u0275\u0275listener("hoveredItemChange",function(s){return i.hoveredItem=s})("dayClick",function(s){return i.onDayClick(s)})("monthChange",function(s){return i.onSectionSecondViewedMonth(s)}),n.\u0275\u0275pipe(3,"tuiMapper"),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("min",i.min)("max",i.max)("month",i.userViewedMonthFirst)("markerHandler",i.markerHandler)("maxViewedMonth",n.\u0275\u0275pipeBind3(1,18,i.cappedUserViewedMonthSecond,i.monthOffset,-1))("value",i.value)("disabledItemHandler",i.disabledItemHandler)("showAdjacent",!1)("hoveredItem",i.hoveredItem),n.\u0275\u0275advance(2),n.\u0275\u0275property("min",i.min)("max",i.max)("month",i.userViewedMonthSecond)("markerHandler",i.markerHandler)("minViewedMonth",n.\u0275\u0275pipeBind3(3,22,i.cappedUserViewedMonthFirst,i.monthOffset,1))("value",i.value)("disabledItemHandler",i.disabledItemHandler)("showAdjacent",!1)("hoveredItem",i.hoveredItem))},directives:[Wi],pipes:[Br.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"markerHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,ke.gn)([(0,n.Output)()],e.prototype,"dayClick",void 0),e=(0,ke.gn)([(0,ke.fM)(0,(0,n.Inject)(_n.cU)),(0,ke.fM)(0,(0,n.Optional)()),(0,ke.fM)(1,(0,n.Inject)(n.ChangeDetectorRef)),(0,ke.fM)(2,(0,n.Inject)(Er.a3))],e),e})(),Vn=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[Br.I,pr.Jy,ba]]}),e})();const Jo=function(e,r,t,i){return[e,r,t,i,!0]},Ds=function(e,r,t,i){return[e,r,t,i,!1]};function ui(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),n.\u0275\u0275listener("dayClick",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onDayClick(o)}),n.\u0275\u0275pipe(1,"tuiMapper"),n.\u0275\u0275pipe(2,"tuiMapper"),n.\u0275\u0275pipe(3,"tuiMapper"),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("markerHandler",t.markerHandler)("min",n.\u0275\u0275pipeBindV(1,7,n.\u0275\u0275pureFunction4(22,Jo,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",n.\u0275\u0275pipeBindV(2,13,n.\u0275\u0275pureFunction4(27,Ds,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",n.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function lu(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",9)}function Zo(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("keydown.enter.prevent",function(){const s=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275nextContext(2).onItemSelect(s)})("keydown.space.prevent",function(){const s=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275nextContext(2).onItemSelect(s)})("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275nextContext(2).onItemSelect(s)}),n.\u0275\u0275text(1),n.\u0275\u0275template(2,lu,1,0,"tui-svg",8),n.\u0275\u0275elementEnd()}if(2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275attribute("aria-checked",i.isItemActive(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isItemActive(t))}}const Yu=function(e,r,t,i,o,s){return[e,r,t,i,o,s]};function cu(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),n.\u0275\u0275listener("dayClick",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onDayClick(o)}),n.\u0275\u0275pipe(2,"tuiMapper"),n.\u0275\u0275pipe(3,"tuiMapper"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"tui-data-list",5),n.\u0275\u0275template(5,Zo,3,3,"button",6),n.\u0275\u0275pipe(6,"tuiMapper"),n.\u0275\u0275pipe(7,"async"),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",n.\u0275\u0275pipeBindV(2,7,n.\u0275\u0275pureFunction4(28,Jo,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",n.\u0275\u0275pipeBindV(3,13,n.\u0275\u0275pureFunction4(33,Ds,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBindV(6,19,n.\u0275\u0275pureFunction6(38,Yu,t.items,t.mapper,t.min,t.max,t.minLength,n.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let zl=(()=>{let e=class{constructor(t,i,o,s){this.otherDateText$=s,this.defaultViewedMonth=st.ql.currentLocal(),this.disabledItemHandler=sr.Iy,this.markerHandler=Sr.zE,this.items=[],this.min=st.K1,this.max=st.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new n.EventEmitter,this.rangeChange=new n.EventEmitter,this.maxLengthMapper=ai.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,f,v,C,M)=>[...c.filter(x=>(null===C||x.range.from.append(C).daySameOrBefore(x.range.to))&&x.range.to.daySameOrAfter(f)&&(null===v||x.range.from.daySameOrBefore(v))),M],t&&t.pipe((0,za.YP)(i),(0,Qo.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:i}=this;return"string"==typeof t&&null===i||i===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:i}=this;null!==i&&i.isSingleDay?this.updateValue(st.VR.sort(i.from,t)):this.value=new st.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,xi.Hm)(this.value,t.range,(i,o)=>i.from.daySame(o.from.dayLimit(this.min,this.max))&&i.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,i,o){return s=>{if(!i||!i.isSingleDay||!o)return t(s);const c=i.from.append(o,!0).append({day:1}),f=i.from.append(o).append({day:-1});return c.dayBefore(s)&&f.dayAfter(s)||t(s)}}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(_n.cU,8),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(Er.a3),n.\u0275\u0275directiveInject(_n.q5))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[n.\u0275\u0275ProvidersFeature([Er.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,i){if(1&t&&(n.\u0275\u0275template(0,ui,4,32,"tui-primitive-calendar-range",0),n.\u0275\u0275template(1,cu,8,45,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",!i.items.length)("ngIfElse",o)}},directives:[A.O5,hs,Gi.A,Wi,Rn.qi,A.sg,Rn.vK,ur.P],pipes:[Br.c,A.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"markerHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"items",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"minLength",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"maxLength",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,ke.gn)([(0,n.Output)()],e.prototype,"valueChange",void 0),(0,ke.gn)([(0,n.Output)()],e.prototype,"rangeChange",void 0),(0,ke.gn)([Xe.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,ke.gn)([(0,ke.fM)(0,(0,n.Inject)(_n.cU)),(0,ke.fM)(0,(0,n.Optional)()),(0,ke.fM)(1,(0,n.Inject)(n.ChangeDetectorRef)),(0,ke.fM)(2,(0,n.Inject)(Er.a3)),(0,ke.fM)(3,(0,n.Inject)(_n.q5))],e),e})(),Ul=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Br.I,Gi.Z,ba,ba,ur.E,Rn.pc,Vn]]}),e})();var qo=d(38190),Yi=d(67795);function Gl(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),n.\u0275\u0275listener("valueChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onPressed(o)}),n.\u0275\u0275projection(1),n.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),n.\u0275\u0275elementEnd()}if(2&e){const t=r.tuiLet,i=n.\u0275\u0275nextContext(),o=n.\u0275\u0275reference(4),s=n.\u0275\u0275reference(6);n.\u0275\u0275property("pseudoFocused",i.innerPseudoFocused)("pseudoHovered",i.pseudoHovered)("pseudoPressed",i.pseudoPressed)("invalid",i.computedInvalid)("tuiTextfieldExampleText",i.computedExampleText)("nativeId",i.nativeId)("filler",i.getComputedRangeFiller(t))("readOnly",i.readOnly)("iconContent",i.computedMobile?o:s)("disabled",i.computedDisabled)("textMask",i.computedMask)("value",i.computedValue)}}function $a(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-svg",6),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onMobileClick()}),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("icon",!t.computedDisabled),n.\u0275\u0275property("src",t.calendarIcon)}}function $l(e,r){if(1&e&&n.\u0275\u0275element(0,"tui-svg",7),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("icon",!t.computedDisabled),n.\u0275\u0275property("src",t.calendarIcon)}}function ps(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-calendar-range",8),n.\u0275\u0275listener("valueChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onRangeChange(o)}),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const du=["*",[["input"]]],Bs=["*","input"],Xi=[{provide:yi.M$,useExisting:(0,n.forwardRef)(()=>ms)},{provide:Ur.KZ,useExisting:(0,n.forwardRef)(()=>ms)},{provide:_n.cU,deps:[[new n.Optional,new n.Self,Y.NgControl],[new n.Optional,(0,n.forwardRef)(()=>_n.LD)]],useFactory:(e,r)=>(0,po.q7)(e,r)},go.Sm];let ms=(()=>{let e=class extends yi.F9{constructor(t,i,o,s,c,f,v,C,M,x,G,ne){super(t,i,ne),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=f,this.textfieldSize=v,this.textfieldExampleText=C,this.dateFormat=M,this.dateSeparator=x,this.dateTexts$=G,this.valueTransformer=ne,this.textMaskOptions={mask:cs(this.dateFormat,this.dateSeparator),pipe:Ha(this),guide:!1},this.disabledItemHandler=sr.Iy,this.markerHandler=Sr.zE,this.defaultViewedMonth=st.ql.currentLocal(),this.items=[],this.min=st.K1,this.max=st.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=ai.EP,this.dateFiller$=this.dateTexts$.pipe((0,Ko.U)(oe=>(0,st.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,_r.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?ai.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,xi.Hm)(this.value,t.range,(i,o)=>i.from.daySame(o.from.dayLimit(this.min,this.max))&&i.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:i,activePeriod:o}=this;return o?String(o):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):i}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bi.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,Qo.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==st.FZ)return void this.updateValue(null);const i=st.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(i):i)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,xi.Hm)(this.value,t,(i,o)=>i.daySame(o))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===st.ek||this.nativeValue.length===st.ek+st.mH.length)&&this.updateValue(st.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,ko.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const i=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new st.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,o=this.maxLength?i.from.append(this.maxLength).append({day:-1}):this.max;return i.to.dayAfter(o)?new st.VR(i.from,o):i}getDateRangeFiller(t){return`${t}${st.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Y.NgControl,10),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(Ur.fL),n.\u0275\u0275directiveInject(Ai.RO),n.\u0275\u0275directiveInject(_n.vk,8),n.\u0275\u0275directiveInject(pe.kI),n.\u0275\u0275directiveInject(pe.pX),n.\u0275\u0275directiveInject(st.P_),n.\u0275\u0275directiveInject(st.q_),n.\u0275\u0275directiveInject(_n.zf),n.\u0275\u0275directiveInject(_n.LD,8))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(Un.yc,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(i.textfield=o.first)}},hostBindings:function(t,i){1&t&&n.\u0275\u0275listener("click",function(){return i.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[n.\u0275\u0275ProvidersFeature(Xi),n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Bs,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,i){if(1&t&&(n.\u0275\u0275projectionDef(du),n.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),n.\u0275\u0275listener("openChange",function(s){return i.onOpenChange(s)})("tuiActiveZoneChange",function(s){return i.onActiveZone(s)}),n.\u0275\u0275template(1,Gl,3,12,"tui-primitive-textfield",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275template(3,$a,1,3,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(5,$l,1,3,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(7,ps,1,9,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(8);n.\u0275\u0275property("canOpen",i.canOpen)("content",o)("open",i.open&&i.canOpen),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiLet",n.\u0275\u0275pipeBind1(2,4,i.dateFiller$))}},directives:[Lr.o1,mo.e,Jr.Ls,Un.yc,Un.B1,qo.n,pe.D9,pe._K,Yi.hd,ur.P,zl],pipes:[A.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,ke.gn)([(0,n.ViewChild)(Un.yc)],e.prototype,"textfield",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"markerHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"items",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"minLength",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"maxLength",void 0),(0,ke.gn)([(0,n.HostListener)("click")],e.prototype,"onClick",null),e=(0,ke.gn)([(0,ke.fM)(0,(0,n.Optional)()),(0,ke.fM)(0,(0,n.Self)()),(0,ke.fM)(0,(0,n.Inject)(Y.NgControl)),(0,ke.fM)(1,(0,n.Inject)(n.ChangeDetectorRef)),(0,ke.fM)(2,(0,n.Inject)(n.Injector)),(0,ke.fM)(3,(0,n.Inject)(Ur.fL)),(0,ke.fM)(4,(0,n.Inject)(Ai.RO)),(0,ke.fM)(5,(0,n.Optional)()),(0,ke.fM)(5,(0,n.Inject)(_n.vk)),(0,ke.fM)(6,(0,n.Inject)(pe.kI)),(0,ke.fM)(7,(0,n.Inject)(pe.pX)),(0,ke.fM)(8,(0,n.Inject)(st.P_)),(0,ke.fM)(9,(0,n.Inject)(st.q_)),(0,ke.fM)(10,(0,n.Inject)(_n.zf)),(0,ke.fM)(11,(0,n.Optional)()),(0,ke.fM)(11,(0,n.Inject)(_n.LD))],e),e})();var fu;let ea=fu=class extends Wo.dh{get value(){return this.host.computedValue}onValueChange(r){this.host.onValueChange(r)}process(r){r.inputMode="numeric"}};ea.\u0275fac=function(){let e;return function(t){return(e||(e=n.\u0275\u0275getInheritedFactory(ea)))(t||ea)}}(),ea.\u0275dir=n.\u0275\u0275defineDirective({type:ea,selectors:[["tui-input-date-range"]],features:[n.\u0275\u0275ProvidersFeature([{provide:Tr.S0,useExisting:(0,n.forwardRef)(()=>fu)}]),n.\u0275\u0275InheritDefinitionFeature]});let Wa=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Yi.QA,mo.A,Jr.WD,bi.wq,Un.KW,pe.cn,Lr.jh,ur.E,Ul,qo.S]]}),e})();var yn=d(56498);function gs(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",5),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275nextContext(2).onMenuClick(s)}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("size",i.itemSize)("disabled",i.disabledItemHandler(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t," ")}}function to(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list",3),n.\u0275\u0275template(1,gs,2,3,"button",4),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.filtered)}}const hu={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:ai.bM,itemSize:"m"},Vs=new n.InjectionToken("Default parameters for input time component",{factory:()=>hu});var Ee;let Ue=Ee=class extends yi.F9{constructor(r,t,i,o){super(r,t),this.timeTexts$=i,this.options=o,this.disabledItemHandler=sr.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,ko.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(r){!this.nativeFocusableElement||(this.nativeFocusableElement.value=r)}getFiller$(r){return this.timeTexts$.pipe((0,Ko.U)(t=>t[r]))}onClick(){this.open=!this.open}onValueChange(r){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(r);if(void 0!==t)return void this.updateValue(t);if(r.length!==this.mode.length)return void this.updateValue(null);const i=st.qD.fromString(r);this.updateValue(this.strict?this.findNearestTimeFromItems(i):i)}onFocused(r){if(this.updateFocused(r),r||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=st.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(r){this.updateHovered(r)}onArrowUp(r){this.items.length||this.processArrow(r,1)}onArrowDown(r){this.items.length||this.processArrow(r,-1)}onMenuClick(r){this.focusInput(),this.updateValue(r)}onOpen(r){this.open=r}writeValue(r){super.writeValue(r),this.nativeValue=r?this.computedValue:""}calculateMask(r){return{mask:Ns(r,this.options.maxValues),pipe:Yo(r,this.options.maxValues),guide:!1}}filter(r,t,i){return r.filter(o=>o.toString(t).includes(i))}findNearestTimeFromItems(r){return this.items.reduce((t,i)=>Math.abs(i.toAbsoluteMilliseconds()-r.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-r.toAbsoluteMilliseconds())?i:t)}getMatch(r){return this.items.find(t=>(0,sr.zy)(t,r))}close(){this.open=!1}processArrow(r,t){const{target:i}=r;if(this.readOnly||!(i instanceof HTMLInputElement))return;const o=i.selectionStart||0;this.shiftTime(this.calculateShift(o,t)),i.setSelectionRange(o,o),r.preventDefault()}calculateShift(r,t){return r<=2?{hours:t}:r<=5?{minutes:t}:r<=8?{seconds:t}:{ms:t}}shiftTime(r){if(null===this.value)return;const t=this.value.shift(r);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(r=!1){this.nativeFocusableElement&&((0,ko.NY)(this.nativeFocusableElement,!0,r),this.close())}};Ue.\u0275fac=function(r){return new(r||Ue)(n.\u0275\u0275directiveInject(Y.NgControl,10),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(_n.Yq),n.\u0275\u0275directiveInject(Vs))},Ue.\u0275cmp=n.\u0275\u0275defineComponent({type:Ue,selectors:[["tui-input-time"]],viewQuery:function(r,t){if(1&r&&n.\u0275\u0275viewQuery(Un.yc,5),2&r){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.textfield=i.first)}},hostBindings:function(r,t){1&r&&n.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[n.\u0275\u0275ProvidersFeature([{provide:Ur.KZ,useExisting:(0,n.forwardRef)(()=>Ee)},go.yn]),n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(r,t){if(1&r&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),n.\u0275\u0275listener("openChange",function(o){return t.onOpen(o)})("focusedChange",function(o){return t.onFocused(o)}),n.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),n.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("keydown.arrowUp",function(o){return t.onArrowUp(o)})("keydown.arrowDown",function(o){return t.onArrowDown(o)}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275projection(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(4,to,2,1,"ng-template",null,2,n.\u0275\u0275templateRefExtractor)),2&r){const i=n.\u0275\u0275reference(5);n.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",i)("open",t.interactive&&t.open&&!!t.filtered.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("filler",n.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[Lr.o1,Un.yc,Un.B1,qo.n,pe.D9,Yi.hd,Rn.qi,A.sg,Rn.vK],pipes:[A.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),Ue.ctorParameters=()=>[{type:Y.NgControl,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Y.NgControl]}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Inject,args:[n.ChangeDetectorRef]}]},{type:yn.y,decorators:[{type:n.Inject,args:[_n.Yq]}]},{type:void 0,decorators:[{type:n.Inject,args:[Vs]}]}],(0,ke.gn)([(0,n.ViewChild)(Un.yc)],Ue.prototype,"textfield",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],Ue.prototype,"disabledItemHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],Ue.prototype,"items",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],Ue.prototype,"itemSize",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],Ue.prototype,"strict",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],Ue.prototype,"mode",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],Ue.prototype,"postfix",void 0),(0,ke.gn)([Xe.UM],Ue.prototype,"getFiller$",null),(0,ke.gn)([(0,n.HostListener)("click")],Ue.prototype,"onClick",null),(0,ke.gn)([Xe.UM],Ue.prototype,"calculateMask",null),(0,ke.gn)([Xe.UM],Ue.prototype,"filter",null),Ue=Ee=(0,ke.gn)([(0,ke.fM)(0,(0,n.Optional)()),(0,ke.fM)(0,(0,n.Self)()),(0,ke.fM)(0,(0,n.Inject)(Y.NgControl)),(0,ke.fM)(1,(0,n.Inject)(n.ChangeDetectorRef)),(0,ke.fM)(2,(0,n.Inject)(_n.Yq)),(0,ke.fM)(3,(0,n.Inject)(Vs))],Ue);let $e=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Yi.QA,Rn.pc,Lr.jh,Un.KW,qo.S,pe.cn]]}),e})();function Mt(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",24),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275property("value",t[0]),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function qt(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list"),n.\u0275\u0275template(1,Mt,2,2,"button",23),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.localEventTypes)}}function On(e,r){1&e&&(n.\u0275\u0275elementStart(0,"tui-notification",25),n.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),n.\u0275\u0275elementEnd())}const Pr=function(e){return["/course",e,"assignments-exams"]};let Jn=(()=>{class e{constructor(t,i,o,s){this.route=t,this.courseEventService=i,this.router=o,this.notificationsService=s,this.eventId=null,this.timeOptions=(0,po.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=eo.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.parent.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=eo.createFormWithData(t)}))}submitEvent(t){const i=eo.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(i).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId,"assignments-exams"]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(i).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId,"assignments-exams"]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"form",1),n.\u0275\u0275listener("ngSubmit",function(){return i.submitEvent(i.formData)}),n.\u0275\u0275elementStart(2,"h2",2),n.\u0275\u0275text(3,"Create New Event"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),n.\u0275\u0275text(6,"Event Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(7,"tui-field-error",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),n.\u0275\u0275text(10," Event Type "),n.\u0275\u0275template(11,qt,2,1,"tui-data-list",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(12,"tui-field-error",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),n.\u0275\u0275text(15,"Counts for tokens "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(16,"tui-field-error",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),n.\u0275\u0275text(19," Start and end date "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(20,"tui-field-error",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),n.\u0275\u0275text(24," Start time "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(25,"tui-field-error",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),n.\u0275\u0275text(28," End time "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(29,"tui-field-error",18),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(30,On,2,0,"tui-notification",19),n.\u0275\u0275elementStart(31,"div",20)(32,"button",21),n.\u0275\u0275text(33," Submit "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(34,"a",22),n.\u0275\u0275text(35,"Back"),n.\u0275\u0275elementEnd()()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",i.formData),n.\u0275\u0275advance(22),n.\u0275\u0275property("items",i.timeOptions),n.\u0275\u0275advance(4),n.\u0275\u0275property("items",i.timeOptions),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",null==i.formData.errors?null:i.formData.errors.forbiddenDateRange),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",i.formData.invalid),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(6,Pr,i.courseId)))},directives:[Y.\u0275NgNoValidate,Y.NgControlStatusGroup,Y.FormGroupDirective,le.K3,le.wU,Y.NgControlStatus,Y.FormControlName,Kt.y,Vr.uJ,Vr.OI,Rn.gX,Rn.qi,A.sg,Rn.vK,ga.p,ms,ea,Ue,A.O5,_t.Ls,pt.v0,q.yS],styles:[""]}),e})();var Ca=d(30567),Si=d(71105),Gr=d(27482);const Hs=function(){return["stats"]};function ee(e,r){1&e&&(n.\u0275\u0275elementStart(0,"a",6),n.\u0275\u0275text(1," Stats "),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(1,Hs))}function fe(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",3)(1,"h1",4),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div"),n.\u0275\u0275template(4,ee,2,2,"a",5),n.\u0275\u0275elementEnd()()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.event.name),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.event.has_edit_permission)}}function Ce(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-notification",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" The ",t.getEventType()," is not available yet. ")}}function qe(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-notification",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" The ",t.getEventType()," is closed. ")}}function be(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"p",16),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t)}}const it=function(e,r){return["/course",e,"challenge",r,"teams"]};function ct(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"h6",13),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,be,2,1,"p",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"a",15),n.\u0275\u0275text(6," View All Teams "),n.\u0275\u0275elementEnd()()),2&e){const t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(t.team.name),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.team.member_names),n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(3,it,t.courseId,t.eventId))}}function yt(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"p",21),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const wt=function(e){return["problem",e]};function Ut(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",25),n.\u0275\u0275text(2," Open "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(1,wt,t.question.id))}}const Bt=function(e,r){return["/course",e,"problem",r]};function Vt(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",25),n.\u0275\u0275text(1," Open "),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(1,Bt,i.courseId,t.question.id))}}const rn=function(e){return["/problems",e,"edit"]};function Kn(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",25),n.\u0275\u0275text(2," Edit "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(1,rn,t.question.id))}}function Ht(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-island")(1,"p",17),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"h2",18),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",19),n.\u0275\u0275element(6,"tui-tag",20),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"p",21),n.\u0275\u0275text(8),n.\u0275\u0275pipe(9,"titlecase"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"p",21),n.\u0275\u0275text(11),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(12,yt,3,2,"ng-container",0),n.\u0275\u0275elementStart(13,"div",22),n.\u0275\u0275template(14,Ut,3,3,"ng-container",23),n.\u0275\u0275template(15,Vt,2,4,"ng-template",null,24,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(17,Kn,3,3,"ng-container",0),n.\u0275\u0275elementEnd()()),2&e){const t=r.$implicit,i=n.\u0275\u0275reference(16),o=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2(" ",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name," "),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.question.title),n.\u0275\u0275advance(2),n.\u0275\u0275property("status",o.highlight(o.getStatus(t)))("value",o.getStatus(t)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(9,11,t.question.type_name)," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",t.formatted_current_tokens_received," Tokens Received "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",o.eventId),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",i),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",o.user.is_teacher)}}function yr(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"h2",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" There aren't any questions available in this ",t.getEventType(),". ")}}function $r(e,r){1&e&&(n.\u0275\u0275elementStart(0,"h2",28),n.\u0275\u0275text(1," There aren't any questions available in this course. "),n.\u0275\u0275elementEnd())}function Ti(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,yr,2,1,"h2",26),n.\u0275\u0275template(2,$r,2,0,"ng-template",null,27,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.eventId)("ngIfElse",t)}}function nr(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,ct,7,6,"div",8),n.\u0275\u0275elementStart(2,"div",9),n.\u0275\u0275template(3,Ht,18,13,"tui-island",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,Ti,4,2,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","CHALLENGE"===t.event.type),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.uqjs),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.uqjs.length)}}function Ya(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,fe,5,2,"div",1),n.\u0275\u0275template(3,Ce,2,1,"tui-notification",2),n.\u0275\u0275template(4,qe,2,1,"tui-notification",2),n.\u0275\u0275template(5,nr,5,3,"ng-container",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.eventId),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.event.is_not_available_yet),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.event.is_closed),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.event.is_open||t.course.has_create_event_permission)}}let vo=(()=>{class e{constructor(t,i,o,s,c,f,v){this.authenticationService=t,this.router=i,this.route=o,this.uqjService=s,this.courseEventService=c,this.courseService=f,this.teamService=v,this.authenticationService.currentUser.subscribe(C=>this.user=C)}ngOnInit(){this.courseId=+this.route.snapshot.parent.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.courseService.getCourse(this.courseId).subscribe(t=>this.course=t),this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,Ca.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(i=>{this.event=i.event,this.uqjs=i.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()}),this.teamService.getMyTeam(this.eventId).subscribe(t=>this.team=t)}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}getEventType(){return this.event.type.toLowerCase()}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(wr.O),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(fo))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","flex justify-between items-center",4,"ngIf"],["class","mb-6",4,"ngIf"],[1,"flex","justify-between","items-center"],[1,"tui-text_h3","tui-space_vertical-10"],["tuiButton","","appearance","secondary","size","s",3,"routerLink",4,"ngIf"],["tuiButton","","appearance","secondary","size","s",3,"routerLink"],[1,"mb-6"],["class","teamBar mb-8 flex items-center p-4 rounded-[0.625rem] shadow",4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"teamBar","mb-8","flex","items-center","p-4","rounded-[0.625rem]","shadow"],[1,"grow"],[1,"tui-text_h6"],["class","tui-text_body-l",4,"ngFor","ngForOf"],["appearance","flat","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],[1,"tui-text_body-l"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,i){1&t&&n.\u0275\u0275template(0,Ya,6,8,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",i.uqjs)},directives:[A.O5,pt.v0,q.yS,_t.Ls,A.sg,Si.h,Gr.Gi],pipes:[A.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}.teamBar[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}"]}),e})();var xr=d(57057),Ku=d(42654),mn=d(17489),nd=d(19167),Wl=d(76829),Qu=d(49201),mu=d(53847);class Ju{static createForm(){return(new Y.FormBuilder).group({report:new Y.FormControl("",[Y.Validators.required]),report_details:new Y.FormControl("")})}static extractData(r){return r.value}}let ch=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}reportQuestion(t,i){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},i),{question:t})).pipe((0,un.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(vi.eN),n.\u0275\u0275inject(Uo.s))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var js=d(24417),Yl=d(74528);function dh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",9),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275property("value",t[0]),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Wr(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list"),n.\u0275\u0275template(1,dh,2,2,"button",8),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.reportOptions)}}function Ei(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),n.\u0275\u0275pipe(3,"stringifyTuiDataList"),n.\u0275\u0275text(4," Reason "),n.\u0275\u0275template(5,Wr,2,1,"tui-data-list",4),n.\u0275\u0275element(6,"tui-field-error",5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),n.\u0275\u0275text(9," Details "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(10,"div",2)(11,"button",7),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().submitReport()}),n.\u0275\u0275text(12," Submit Report "),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",t.formGroup),n.\u0275\u0275advance(2),n.\u0275\u0275property("valueContent",t.reportOptions?n.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),n.\u0275\u0275advance(9),n.\u0275\u0275property("disabled",t.formGroup.invalid)}}const fh=function(){return{label:"Report this question",size:"m"}};let hh=(()=>{class e{constructor(t,i){this.reportQuestionService=t,this.notificationsService=i,this.open=!1,this.openChange=new n.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=Ju.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Ju.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(ch),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,i){1&t&&(n.\u0275\u0275template(0,Ei,13,7,"ng-template",0),n.\u0275\u0275listener("tuiDialogChange",function(s){return i.toggleDialog(s)})),2&t&&n.\u0275\u0275property("tuiDialogOptions",n.\u0275\u0275pureFunction0(2,fh))("tuiDialog",i.open)},directives:[Ai.iu,Y.NgControlStatusGroup,Y.FormGroupDirective,Vr.uJ,Vr.OI,Y.NgControlStatus,Y.FormControlName,Rn.gX,Rn.qi,A.sg,Rn.vK,Kt.y,js.Jl,js.eQ,pt.v0],pipes:[Yl.J],styles:[""]}),e})();function rd(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-island",5)(1,"div",6)(2,"div",7)(3,"p",8),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"h3",9),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"button",10),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275nextContext(3).addToEvent(s)}),n.\u0275\u0275text(8," Add "),n.\u0275\u0275elementEnd()()()}if(2&e){const t=r.$implicit;n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(t.type),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.name)}}function ph(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275template(2,rd,9,2,"tui-island",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.events)}}function Xl(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275template(0,ph,3,1,"ng-container",1),n.\u0275\u0275elementStart(1,"button",2),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().toggleDialog(!1)}),n.\u0275\u0275text(2," Close "),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",t.events)}}const gu=function(){return{label:"Add this question to an event",size:"m"}};let Kl=(()=>{class e{constructor(t,i){this.courseEventService=t,this.notificationService=i,this.open=!1,this.openChange=new n.EventEmitter}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}addToEvent(t){this.courseEventService.addQuestion(t.id,this.questionId).subscribe(()=>{this.notificationService.show("Question added to event",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-add-to-event-modal"]],inputs:{open:"open",questionId:"questionId",events:"events"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[4,"ngIf"],["aria-label","Close","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"tui-space_top-8","space-y-3"],["size","s",4,"ngFor","ngForOf"],["size","s"],[1,"flex"],[1,"flex-grow"],[1,"tui-island__category"],[1,"tui-island__title"],["appearance","secondary","aria-label","Add","size","s","tuiButton","",3,"click"]],template:function(t,i){1&t&&(n.\u0275\u0275template(0,Xl,3,1,"ng-template",0),n.\u0275\u0275listener("tuiDialogChange",function(s){return i.toggleDialog(s)})),2&t&&n.\u0275\u0275property("tuiDialogOptions",n.\u0275\u0275pureFunction0(2,gu))("tuiDialog",i.open)},directives:[Ai.iu,A.O5,A.sg,Si.h,pt.v0],styles:[""]}),e})();const Xa=function(e){return["../",e]},vs=function(e){return{difficulty:e}};function vu(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(7,Xa,null==t.parentCategory?null:t.parentCategory.pk))("queryParams",n.\u0275\u0275pureFunction1(9,vs,t.difficulty)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," ")}}function Zu(e,r){if(1&e&&n.\u0275\u0275element(0,"tui-svg",29),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("tui-skeleton",!t.category)}}function zs(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",37)}function mh(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",37)}function gh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",33,34),n.\u0275\u0275text(2),n.\u0275\u0275template(3,mh,1,0,"tui-svg",35),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275reference(1),o=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(5,Xa,t.category.pk))("queryParams",n.\u0275\u0275pureFunction1(7,vs,o.difficulty)),n.\u0275\u0275attribute("aria-checked",i.isActive),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isActive)}}function vh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-opt-group",32)(1,"a",33,34),n.\u0275\u0275text(3),n.\u0275\u0275template(4,zs,1,0,"tui-svg",35),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,gh,4,9,"a",36),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275reference(2),o=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("label",t.category.name),n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(7,Xa,t.category.pk))("queryParams",n.\u0275\u0275pureFunction1(9,vs,o.difficulty)),n.\u0275\u0275attribute("aria-checked",i.isActive),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isActive),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.children)}}function _h(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list",30),n.\u0275\u0275template(1,vh,6,11,"tui-opt-group",31),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.nestedCategories)}}function yh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",39),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275property("value",t[0]),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function qu(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list"),n.\u0275\u0275template(1,yh,2,2,"button",38),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.difficulties)}}function _u(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",40),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().openAddQuestion()}),n.\u0275\u0275text(1," Add This Question to Event "),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}function id(e,r){if(1&e&&n.\u0275\u0275element(0,"app-problem-view",41),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("questionId",t.currentQuestionId)}}function Z(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",42),n.\u0275\u0275element(1,"tui-marker-icon",43),n.\u0275\u0275elementStart(2,"h1",44),n.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),n.\u0275\u0275elementEnd()()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const Us=function(){return["../../concepts"]},el=function(){return["../../../goal"]};let _o=(()=>{class e{constructor(t,i,o,s,c){this.route=t,this.uqjService=i,this.difficultyService=o,this.courseService=s,this.categoryService=c,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.addQuestionModal=!1,this.subscriptions=new Ku.w}ngOnInit(){this.difficulty=this.route.snapshot.queryParamMap.get("difficulty"),this.courseId=Number.parseInt(this.route.snapshot.paramMap.get("courseId")),this.courseService.getCourse(this.courseId).subscribe(t=>this.course=t),this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((i,o)=>o.parent?i:[...i,{category:o,children:t.filter(s=>s.parent===o.pk).map(s=>({category:s,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(i=>{var o,s;this.courseId=Number.parseInt(i.get("courseId")),this.categoryId=Number.parseInt(i.get("categoryId")),this.category=t.find(v=>this.categoryId===v.pk),this.parentCategory=t.find(v=>this.category.parent===v.pk),this.cursor=0,this.uqjs=void 0;const c=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),f=this.difficultyService.getDifficulties();this.subscriptions.add((0,Ca.D)([c,f]).subscribe(([v,C])=>{this.uqjs=(0,mn.shuffle)(v),this.difficulties=C,this.updateCurrentQuestion()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,i){var o,s;this.difficulty=t,this.include_solved=i,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!i&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=(0,mn.shuffle)(c),this.updateCurrentQuestion()}))}openReportQuestion(){this.reportQuestionModal=!0}openAddQuestion(){this.addQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(wr.O),n.\u0275\u0275directiveInject(nd.G),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(Wl.H))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:42,vars:37,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","","appearance","secondary",1,"tui-space_vertical-0","w-full",3,"routerLink"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["class","tui-space_vertical-0","tuiLink","",3,"tui-skeleton","tui-skeleton_text","routerLink","queryParams",4,"ngIf"],["src","tuiIconChevronRight",3,"tui-skeleton",4,"ngIf"],[3,"content"],["tuiLink",""],["categoryDropdown",""],[1,"space-y-3"],[1,"text-center"],["ngDefaultControl","","size","m",1,"w-full",3,"ngModel","ngModelChange"],[1,"tui-text_body-s"],["tuiTextfieldSize","m",1,"flex-grow",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],[1,"flex","justify-between"],["icon","tuiIconChevronLeftLarge","size","m","tuiIconButton","",3,"click"],["icon","tuiIconChevronRightLarge","size","m","tuiIconButton","",3,"click"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","","appearance","secondary",3,"click"],["icon","tuiIconCopy","size","s","tuiButton","","appearance","secondary",3,"tui-skeleton","click",4,"ngIf"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[3,"open","questionId","events","openChange"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink","queryParams"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink","queryParams"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink","queryParams",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["icon","tuiIconCopy","size","s","tuiButton","","appearance","secondary",3,"click"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),n.\u0275\u0275text(5," Back to Concept Map "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",3)(7,"a",4),n.\u0275\u0275text(8," Back to Goals "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",5),n.\u0275\u0275template(10,vu,2,11,"a",6),n.\u0275\u0275template(11,Zu,1,2,"tui-svg",7),n.\u0275\u0275elementStart(12,"tui-hosted-dropdown",8)(13,"button",9),n.\u0275\u0275text(14),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(15,_h,2,1,"ng-template",null,10,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"div",11)(18,"div",12),n.\u0275\u0275text(19," Question Settings: "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"tui-checkbox-block",13),n.\u0275\u0275listener("ngModelChange",function(s){return i.updateQuestions(i.difficulty,s)}),n.\u0275\u0275elementStart(21,"span",14),n.\u0275\u0275text(22," Include Solved Questions: "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(23,"tui-select",15),n.\u0275\u0275listener("ngModelChange",function(s){return i.updateQuestions(s,i.include_solved)}),n.\u0275\u0275pipe(24,"stringifyTuiDataList"),n.\u0275\u0275text(25," Difficulty: "),n.\u0275\u0275template(26,qu,2,1,"tui-data-list",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(27,"div",12),n.\u0275\u0275text(28," Browse Questions: "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(29,"div",17)(30,"button",18),n.\u0275\u0275listener("click",function(){return i.prevQuestion()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(31,"button",19),n.\u0275\u0275listener("click",function(){return i.nextQuestion()}),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(32,"div",20)(33,"button",21),n.\u0275\u0275listener("click",function(){return i.openReportQuestion()}),n.\u0275\u0275text(34," Report a Problem "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(35,_u,2,2,"button",22),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(36,"div",23),n.\u0275\u0275template(37,id,1,1,"app-problem-view",24),n.\u0275\u0275template(38,Z,4,4,"ng-template",null,25,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(40,"app-problem-report-modal",26),n.\u0275\u0275listener("openChange",function(s){return i.reportQuestionModal=s}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(41,"app-add-to-event-modal",27),n.\u0275\u0275listener("openChange",function(s){return i.addQuestionModal=s}),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(16),s=n.\u0275\u0275reference(39);let c;n.\u0275\u0275advance(4),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(35,Us)),n.\u0275\u0275advance(3),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(36,el)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.parentCategory),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.parentCategory),n.\u0275\u0275advance(1),n.\u0275\u0275property("content",o),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",!i.category),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate2(" ",i.parentCategory?"":"All ","",null!==(c=null==i.category?null:i.category.name)&&void 0!==c?c:"Category Name"," "),n.\u0275\u0275advance(6),n.\u0275\u0275classProp("tui-skeleton",!i.difficulties||!i.category),n.\u0275\u0275property("ngModel",i.include_solved),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("tui-skeleton",!i.difficulties||!i.category),n.\u0275\u0275property("ngModel",i.difficulty)("tuiTextfieldCleaner",!0)("valueContent",i.difficulties?n.\u0275\u0275pipeBind3(24,31,i.difficulties,0,1):""),n.\u0275\u0275advance(7),n.\u0275\u0275classProp("tui-skeleton",!i.category||!i.uqjs),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",!i.category||!i.uqjs),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("tui-skeleton",!i.category||!i.uqjs),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",null==i.course?null:i.course.has_create_event_permission),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.currentQuestionId&&i.category&&i.uqjs)("ngIfElse",s),n.\u0275\u0275advance(3),n.\u0275\u0275property("open",i.reportQuestionModal)("questionId",i.currentQuestionId),n.\u0275\u0275advance(1),n.\u0275\u0275property("open",i.addQuestionModal)("questionId",i.currentQuestionId)("events",null==i.course?null:i.course.events)}},directives:[Qu.k,pt.v0,q.yS,A.O5,_i.V,ur.P,Lr.o1,Rn.qi,A.sg,Rn.Rs,Rn.vK,q.Od,mu.C,Y.DefaultValueAccessor,Y.NgControlStatus,Y.NgModel,Vr.uJ,Vr.OI,pe.sz,pe.be,Rn.gX,xr.z,an.B,hh,Kl],pipes:[Yl.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),Sn=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}getGoal(t){const i=this.apiService.getURL("goal",t);return this.http.get(i).pipe((0,un.K)(this.apiService.handleError("Unable to fetch goal.")))}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,un.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const i=this.apiService.getURL("goal");return this.http.post(i,t).pipe((0,un.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const i=this.apiService.getURL("goal-item");return this.http.post(i,t).pipe((0,un.K)(this.apiService.handleError("Unable to create goal item.")))}getSuggestions(){const t=this.apiService.getURL("goal","suggestions");return this.http.get(t).pipe((0,un.K)(this.apiService.handleError("Unable to fetch goal suggestions.")))}claim(t){const i=this.apiService.getURL("goal",t,"claim");return this.http.post(i,{}).pipe((0,un.K)(this.apiService.handleFormError()))}getLimits(){const t=this.apiService.getURL("goal","limits");return this.http.get(t).pipe((0,un.K)(this.apiService.handleError("Unable to fetch goal limits")))}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(vi.eN),n.\u0275\u0275inject(Uo.s))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const od=e=>`Solve ${e.number_of_questions} ${e.difficulty} questions from ${e.category_name}`;var tl=d(71764),ad=d(72243),ta=d(53321);d(95489),d(2836),d(65063),d(97739);const bh=["tuiProgressBar",""],Ch=["tuiProgressLabel",""],wh=[[["progress"]],[["tui-progress-circle"]],"*"],Sh=["progress","tui-progress-circle","*"];let ud=(()=>{let e=class{constructor(){this.size="m"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(t,i){2&t&&(n.\u0275\u0275attribute("data-size",i.size),n.\u0275\u0275styleProp("--tui-progress-color",i.color))},inputs:{size:"size",color:"color"},attrs:bh,decls:0,vars:0,template:function(t,i){},styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;color:var(--tui-progress-color,currentColor);background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear;background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size='m'][_nghost-%COMP%]{height:1.5rem}[data-size='s'][_nghost-%COMP%]{border-radius:var(--tui-radius-xs);height:.5rem}[data-size='s'][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size='s'][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,ke.gn)([(0,n.Input)(),(0,n.HostBinding)("style.--tui-progress-color")],e.prototype,"color",void 0),(0,ke.gn)([(0,n.Input)(),(0,n.HostBinding)("attr.data-size"),(0,Xe.TH)()],e.prototype,"size",void 0),e})(),ld=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["label","tuiProgressLabel",""]],attrs:Ch,ngContentSelectors:Sh,decls:4,vars:0,consts:[[1,"t-label"]],template:function(t,i){1&t&&(n.\u0275\u0275projectionDef(wh),n.\u0275\u0275projection(0),n.\u0275\u0275projection(1,1),n.\u0275\u0275elementStart(2,"span",0),n.\u0275\u0275projection(3,2),n.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),e})(),Ph=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Ci.Ih]]}),e})();function Mh(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",16)}const Ah=function(e,r){return["/course",e,"practice","category",r]},kh=function(e){return{difficulty:e}};function Oh(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",17),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext().$implicit,s=n.\u0275\u0275nextContext();return s.logClick(s.goal,o)}),n.\u0275\u0275text(1," Practice "),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(2,Ah,i.courseId,t.category))("queryParams",n.\u0275\u0275pureFunction1(5,kh,t.difficulty))}}function dd(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"li",6)(1,"div",7)(2,"div"),n.\u0275\u0275text(3),n.\u0275\u0275template(4,Mh,1,0,"tui-svg",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Oh,2,7,"a",15),n.\u0275\u0275elementEnd()()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate3(" ",i.getGoalItemString(t)," (Solved ",t.progress," / ",t.number_of_questions,") "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.progress>=t.number_of_questions),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.progress<t.number_of_questions&&!i.goal.is_finished)}}function fd(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",16)}function Lh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"span",3),n.\u0275\u0275text(2,"Due:"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",t.getRelativeTime(t.goal.end_date)," ")}}const Fh=function(e){return[e]};function Ql(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",18),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(2,Fh,t.goal.id)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.canClaim()?"Review Performance":"View Progress"," ")}}let $s=(()=>{class e{constructor(t,i){this.route=t,this.userActionsService=i,this.showPerformanceButton=!0,tl.extend(ad),this.courseId=this.route.parent.snapshot.params.courseId}canClaim(){return!this.goal.claimed&&this.goal.progress>=this.goal.number_of_questions}getGoalItemString(t){return od(t)}getRelativeTime(t){return tl(t).fromNow(!0)}logClick(t,i){this.userActionsService.createCustomAction({description:"User started practice from goal",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{goal:Object.assign(Object.assign({},t),{stats:void 0}),goalItem:i}}).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(ta.v))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-island"]],inputs:{goal:"goal",showPerformanceButton:"showPerformanceButton"},decls:19,vars:8,consts:[[1,"shadow"],[1,"flex","flex-wrap","gap-5"],[1,"flex-1","space-y-1"],[1,"tui-text_bold"],[1,"tui-list","pl-3"],["class","tui-list__item",4,"ngFor","ngForOf"],[1,"tui-list__item"],[1,"flex","flex-wrap","gap-3"],["class","success","src","tuiIconCheck",4,"ngIf"],[1,"min-w-200","flex","flex-col","space-y-3"],[4,"ngIf"],[1,"flex-grow","w-full"],["tuiProgressLabel","",1,"w-full"],["tuiProgressBar","",1,"info",3,"max","value"],["tuiButton","","size","m","appearance","secondary","class","w-full",3,"routerLink",4,"ngIf"],["tuiLink","","icon","tuiIconPlay","iconAlign","left",3,"routerLink","queryParams","click",4,"ngIf"],["src","tuiIconCheck",1,"success"],["tuiLink","","icon","tuiIconPlay","iconAlign","left",3,"routerLink","queryParams","click"],["tuiButton","","size","m","appearance","secondary",1,"w-full",3,"routerLink"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"tui-island",0)(1,"div",1)(2,"div",2)(3,"span",3),n.\u0275\u0275text(4,"Tasks:"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"ul",4),n.\u0275\u0275template(6,dd,6,5,"li",5),n.\u0275\u0275elementStart(7,"li",6)(8,"div",7)(9,"div"),n.\u0275\u0275text(10," Review performance "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,fd,1,0,"tui-svg",8),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(12,"div",9),n.\u0275\u0275template(13,Lh,4,1,"div",10),n.\u0275\u0275elementStart(14,"div",11)(15,"label",12),n.\u0275\u0275text(16),n.\u0275\u0275element(17,"progress",13),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(18,Ql,2,4,"a",14),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",i.goal.goal_items),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",i.goal.claimed),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!i.goal.is_finished),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate2(" ",i.goal.progress+(i.goal.claimed?1:0)," / ",i.goal.number_of_questions+1," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("max",i.goal.number_of_questions+1)("value",i.goal.progress+(i.goal.claimed?1:0)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.showPerformanceButton))},directives:[Si.h,A.sg,A.O5,ur.P,_i.V,q.yS,ld,ud,pt.v0],styles:[".success[_ngcontent-%COMP%]{color:var(--tui-success-fill)}.info[_ngcontent-%COMP%]{color:var(--tui-info-fill)}"]}),e})();function nl(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275element(1,"app-goal-island",10),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("goal",t)}}function Rh(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,nl,2,1,"div",8),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.activeGoals)}}function hd(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275element(1,"app-goal-island",10),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("goal",t)}}function Nh(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,hd,2,1,"div",8),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.completedGoals)}}function Sa(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275element(1,"tui-marker-icon",12),n.\u0275\u0275elementStart(2,"h2",13),n.\u0275\u0275text(3," Looks like there are no goals to show "),n.\u0275\u0275elementEnd()())}const Jl=function(){return["../practice"]};let _s=(()=>{class e{constructor(t){this.goalService=t,this.unclaimedGoals=0}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.activeGoals=t.filter(i=>!i.is_finished),this.completedGoals=t.filter(i=>i.is_finished),this.unclaimedGoals=t.filter(i=>!i.claimed&&i.progress>=i.number_of_questions).length})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Sn))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:14,vars:6,consts:[[1,"tui-container","tui-container_adaptive"],[1,"flex","flex-wrap","gap-3","tui-space_top-6"],[1,"tui-text_h3","tui-col_stretch","flex-grow"],["tuiButton","","size","m","routerLink","create",1,"min-w-200","mr-4"],["icon","tuiIconArrowLeft","size","s","tuiButton","","appearance","flat",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"tui-text_h3","tui-space_top-6"],["noGoal",""],["class","tui-space_vertical-3",4,"ngFor","ngForOf"],[1,"tui-space_vertical-3"],[3,"goal"],[1,"flex","justify-center","items-center","w-full","h-32"],["size","s","src","tuiIconAlertCircleLarge",1,"tui-space_right-4"],[1,"tui-text_body-xl"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),n.\u0275\u0275text(3," Active Goals "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"a",3),n.\u0275\u0275text(5,"Create a new goal"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"a",4),n.\u0275\u0275text(7," Back to question bank "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(8,Rh,2,1,"ng-container",5),n.\u0275\u0275elementStart(9,"h3",6),n.\u0275\u0275text(10," Past Goals "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,Nh,2,1,"ng-container",5),n.\u0275\u0275template(12,Sa,4,0,"ng-template",null,7,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(13);n.\u0275\u0275advance(6),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(5,Jl)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.activeGoals&&0!==i.activeGoals.length)("ngIfElse",o),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.completedGoals&&0!==i.completedGoals.length)("ngIfElse",o)}},directives:[pt.v0,q.yS,A.O5,A.sg,$s,an.B],styles:[""]}),e})();class Yr{static createGoalForm(){return(new Y.FormBuilder).group({end_date:new Y.FormControl(st.TU.currentLocal().append({day:7}),[Y.Validators.required]),end_time:new Y.FormControl(st.qD.currentLocal(),[Y.Validators.required]),goal_items:new Y.FormArray([Yr.createGoalItemForm()],[Y.Validators.required])})}static createGoalFormFromGoal(r){const t=new Date(r.end_date);return(new Y.FormBuilder).group({end_date:new Y.FormControl(st.TU.fromLocalNativeDate(t),[Y.Validators.required]),end_time:new Y.FormControl(st.qD.fromLocalNativeDate(t),[Y.Validators.required]),goal_items:new Y.FormArray(r.goal_items.map(Yr.createGoalItemFormFromGoalItem),[Y.Validators.required])})}static createGoalItemForm(){return(new Y.FormBuilder).group({category:new Y.FormControl("",[Y.Validators.required]),difficulty:new Y.FormControl("",[Y.Validators.required]),number_of_questions:new Y.FormControl("",[Y.Validators.required])})}static createGoalItemFormFromGoalItem(r){return(new Y.FormBuilder).group({category:new Y.FormControl(r.category,[Y.Validators.required]),difficulty:new Y.FormControl(r.difficulty,[Y.Validators.required]),number_of_questions:new Y.FormControl(r.number_of_questions,[Y.Validators.required])})}static formatGoalFormData(r,t){return{course_id:t,end_date:this.dateAndTimeToLocal(r.get("end_date").value,r.get("end_time").value)}}static formatGoalItemFormData(r,t){return Object.assign({goal:t},r.value)}static dateAndTimeToLocal(r,t){return new Date(r.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function Dh(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),n.\u0275\u0275listener("valueChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onFocused(o)}),n.\u0275\u0275projection(1),n.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),n.\u0275\u0275elementEnd()}if(2&e){const t=r.tuiLet,i=n.\u0275\u0275nextContext(),o=n.\u0275\u0275reference(4),s=n.\u0275\u0275reference(6);n.\u0275\u0275property("pseudoFocused",i.pseudoFocused)("pseudoHovered",i.pseudoHovered)("invalid",i.computedInvalid)("filler",i.getComputedFiller(t))("nativeId",i.nativeId)("readOnly",i.readOnly)("focusable",i.computedFocusable)("iconContent",i.computedMobile?o:s)("disabled",i.computedDisabled)("textMask",i.computedMask)("value",i.computedValue)}}function pd(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-svg",7),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onMobileClick()}),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("icon",!t.computedDisabled),n.\u0275\u0275property("src",t.calendarIcon)}}function md(e,r){if(1&e&&n.\u0275\u0275element(0,"tui-svg",8),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("icon",!t.computedDisabled),n.\u0275\u0275property("src",t.calendarIcon)}}function xu(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",11)(1,"button",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function Qa(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-calendar",9),n.\u0275\u0275listener("dayClick",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onMonthChange(o)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(1,xu,3,1,"div",10)}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",1===t.items.length)}}const gd=["*",[["input"]]],Bh=["*","input"],Vh=[{provide:Ur.KZ,useExisting:(0,n.forwardRef)(()=>il)},{provide:_n.cU,deps:[[new n.Optional,new n.Self,Y.NgControl],[new n.Optional,_n.HF]],useFactory:(e,r)=>(0,po.q7)(e,r)},{provide:yi.M$,useExisting:(0,n.forwardRef)(()=>il)},go.Sm];let il=(()=>{let e=class extends yi.F9{constructor(t,i,o,s,c,f,v,C,M,x,G){super(t,i,G),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=f,this.textfieldSize=v,this.dateFormat=C,this.dateSeparator=M,this.dateTexts$=x,this.valueTransformer=G,this.month=null,this.textMaskOptions={mask:Rs(this.dateFormat,this.dateSeparator),pipe:va(this),guide:!1},this.min=st.K1,this.max=st.Oy,this.disabledItemHandler=sr.Iy,this.markerHandler=Sr.zE,this.items=[],this.defaultActiveYearMonth=st.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,Ko.U)(ne=>(0,st.Yl)(ne[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,_r.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:i,activeItem:o}=this;return o?String(o):t?t.toString(this.dateFormat,this.dateSeparator):i}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?ai.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(i=>i.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new bi.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,Qo.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==st.ek?null:st.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,i){return(0,xi.Hm)(t,i,(o,s)=>o.daySame(s))}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Y.NgControl,10),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(Ur.fL),n.\u0275\u0275directiveInject(Ai.RO),n.\u0275\u0275directiveInject(_n.vk,8),n.\u0275\u0275directiveInject(pe.kI),n.\u0275\u0275directiveInject(st.P_),n.\u0275\u0275directiveInject(st.q_),n.\u0275\u0275directiveInject(_n.zf),n.\u0275\u0275directiveInject(_n.HF,8))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(Un.yc,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(i.textfield=o.first)}},hostBindings:function(t,i){1&t&&n.\u0275\u0275listener("click",function(){return i.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[n.\u0275\u0275ProvidersFeature(Vh),n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Bh,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,i){if(1&t&&(n.\u0275\u0275projectionDef(gd),n.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),n.\u0275\u0275listener("openChange",function(s){return i.onOpenChange(s)}),n.\u0275\u0275template(1,Dh,3,11,"tui-primitive-textfield",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275template(3,pd,1,3,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(5,md,1,3,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(7,Qa,2,7,"ng-template",4,5,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(8);n.\u0275\u0275property("canOpen",i.canOpen)("open",i.open&&i.canOpen)("content",o),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiLet",n.\u0275\u0275pipeBind1(2,5,i.filler$)),n.\u0275\u0275advance(6),n.\u0275\u0275property("polymorpheus",i.type)}},directives:[Lr.o1,Jr.Ls,Un.yc,Un.B1,qo.n,pe.D9,Yi.hd,ur.P,bi.GL,Wi,Gi.A,A.O5,_i.V],pipes:[A.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,ke.gn)([(0,n.ViewChild)(Un.yc)],e.prototype,"textfield",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"min",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"disabledItemHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"markerHandler",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"items",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,ke.gn)([(0,n.HostListener)("click")],e.prototype,"onClick",null),e=(0,ke.gn)([(0,ke.fM)(0,(0,n.Optional)()),(0,ke.fM)(0,(0,n.Self)()),(0,ke.fM)(0,(0,n.Inject)(Y.NgControl)),(0,ke.fM)(1,(0,n.Inject)(n.ChangeDetectorRef)),(0,ke.fM)(2,(0,n.Inject)(n.Injector)),(0,ke.fM)(3,(0,n.Inject)(Ur.fL)),(0,ke.fM)(4,(0,n.Inject)(Ai.RO)),(0,ke.fM)(5,(0,n.Optional)()),(0,ke.fM)(5,(0,n.Inject)(_n.vk)),(0,ke.fM)(6,(0,n.Inject)(pe.kI)),(0,ke.fM)(7,(0,n.Inject)(st.P_)),(0,ke.fM)(8,(0,n.Inject)(st.q_)),(0,ke.fM)(9,(0,n.Inject)(_n.zf)),(0,ke.fM)(10,(0,n.Optional)()),(0,ke.fM)(10,(0,n.Inject)(_n.HF))],e),e})();var ni;let Ja=ni=class extends Wo.dh{get value(){return this.host.computedValue}onValueChange(r){this.host.onValueChange(r)}process(r){r.inputMode="numeric"}};Ja.\u0275fac=function(){let e;return function(t){return(e||(e=n.\u0275\u0275getInheritedFactory(Ja)))(t||Ja)}}(),Ja.\u0275dir=n.\u0275\u0275defineDirective({type:Ja,selectors:[["tui-input-date"]],features:[n.\u0275\u0275ProvidersFeature([{provide:Tr.S0,useExisting:(0,n.forwardRef)(()=>ni)}]),n.\u0275\u0275InheritDefinitionFeature]});let vd=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Yi.QA,bi.wq,Gi.Z,ba,ur.E,_i.j,Lr.jh,Un.KW,qo.S,Jr.WD,pe.cn]]}),e})();var Ii=d(27670),ol=d(60390);function al(e,r){if(1&e&&n.\u0275\u0275element(0,"div",3),2&e){n.\u0275\u0275nextContext();const t=n.\u0275\u0275reference(6);n.\u0275\u0275property("content",t)}}function ys(e,r){1&e&&n.\u0275\u0275projection(0,2)}const _d=["*",[["input"]],[["","polymorpheus-outlet",""]]],ki=function(e,r,t,i,o){return[e,r,t,i,o]};var sl;let li=sl=class extends yi.F9{constructor(r,t,i,o){super(r,t),this.numberFormat=i,this.isIOS=o,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(s,c,f,v)=>({mask:(0,Ii.EC)({allowNegative:s,decimalLimit:f,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,Ii.YT)(this.numberFormat)}),pipe:(0,Ii.qs)("always"===c?f:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,v,s,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(r){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:i}=this;t.length<this.precision||!i||!i.selectionStart||"0"!==this.nativeValue[i.selectionStart]||(r.preventDefault(),i.selectionStart++)}onValueChange(r){if((0,Ii.Y5)(r))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(r);null===t||isNaN(t)||(this.updateValue(t),t!==(0,Ii.uk)(r,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(r){if(Sr.YZ.includes(r.key)){if("never"===this.decimal)return void r.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(r.preventDefault(),this.setCaretAfterComma())}}onFocused(r){if(this.updateFocused(r),r)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const i=Math.min(this.max,Math.max(this.min,t));this.updateValue(i),this.nativeValue=this.formattedValue}onHovered(r){this.updateHovered(r)}onPressed(r){this.updatePressed(r)}getFormattedValue(r){const i=Math.abs(r)%1>0;let o="always"===this.decimal||i?this.precision:0;const s=i?(0,ol.Nk)(r,this.precision):"";return this.focused&&"always"!==this.decimal&&(o=s.length),(0,ol.uf)(r,o,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const r=this.nativeNumberValue;return r<0?r>this.max:r<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(r){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=r,this.nativeFocusableElement.value=r)}get nativeNumberValue(){return(0,Ii.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(r){const t=(0,Ii.uk)(r,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),i=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(i)||i<this.min||i>this.max?null:i}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const r=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(r,r)}};var ul;li.\u0275fac=function(r){return new(r||li)(n.\u0275\u0275directiveInject(Y.NgControl,10),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(Tr.HO),n.\u0275\u0275directiveInject(Ur.FA))},li.\u0275cmp=n.\u0275\u0275defineComponent({type:li,selectors:[["tui-input-number"]],contentQueries:function(r,t,i){if(1&r&&n.\u0275\u0275contentQuery(i,bi.r1,5),2&r){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=o.first)}},viewQuery:function(r,t){if(1&r&&n.\u0275\u0275viewQuery(Un.yc,5),2&r){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(t.primitiveTextfield=i.first)}},hostBindings:function(r,t){1&r&&n.\u0275\u0275listener("keydown.0",function(o){return t.onZero(o)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[n.\u0275\u0275ProvidersFeature([{provide:Ur.KZ,useExisting:(0,n.forwardRef)(()=>sl)},{provide:yi.M$,useExisting:(0,n.forwardRef)(()=>sl)}]),n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(r,t){1&r&&(n.\u0275\u0275projectionDef(_d),n.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),n.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("focusedChange",function(o){return t.onFocused(o)})("pressedChange",function(o){return t.onPressed(o)})("keydown",function(o){return t.onKeyDown(o)}),n.\u0275\u0275pipe(1,"tuiMapper"),n.\u0275\u0275projection(2),n.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),n.\u0275\u0275template(4,al,1,1,"div",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,ys,1,0,"ng-template",null,2,n.\u0275\u0275templateRefExtractor)),2&r&&(n.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",n.\u0275\u0275pipeBindV(1,13,n.\u0275\u0275pureFunction5(19,ki,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[Un.yc,Un.B1,qo.n,pe.D9,pe.fy,Yi.hd,A.O5,bi.r1],pipes:[Br.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),li.ctorParameters=()=>[{type:Y.NgControl,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Y.NgControl]}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Inject,args:[n.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:n.Inject,args:[Tr.HO]}]},{type:Boolean,decorators:[{type:n.Inject,args:[Ur.FA]}]}],(0,ke.gn)([(0,n.ViewChild)(Un.yc)],li.prototype,"primitiveTextfield",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],li.prototype,"min",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],li.prototype,"max",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],li.prototype,"decimal",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],li.prototype,"precision",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],li.prototype,"prefix",void 0),(0,ke.gn)([(0,n.Input)(),(0,Xe.TH)()],li.prototype,"postfix",void 0),(0,ke.gn)([(0,n.ContentChild)(bi.r1)],li.prototype,"polymorpheusValueContent",void 0),(0,ke.gn)([(0,n.HostListener)("keydown.0",["$event"])],li.prototype,"onZero",null),li=sl=(0,ke.gn)([(0,ke.fM)(0,(0,n.Optional)()),(0,ke.fM)(0,(0,n.Self)()),(0,ke.fM)(0,(0,n.Inject)(Y.NgControl)),(0,ke.fM)(1,(0,n.Inject)(n.ChangeDetectorRef)),(0,ke.fM)(2,(0,n.Inject)(Tr.HO)),(0,ke.fM)(3,(0,n.Inject)(Ur.FA))],li);let Ws=ul=class extends Wo.dh{get value(){return this.host.computedValue}onValueChange(r){this.host.onValueChange(r)}process(r){this.input=r}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};Ws.\u0275fac=function(){let e;return function(t){return(e||(e=n.\u0275\u0275getInheritedFactory(Ws)))(t||Ws)}}(),Ws.\u0275dir=n.\u0275\u0275defineDirective({type:Ws,selectors:[["tui-input-number"]],features:[n.\u0275\u0275ProvidersFeature([{provide:Tr.S0,useExisting:(0,n.forwardRef)(()=>ul)}]),n.\u0275\u0275InheritDefinitionFeature]});let bu=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Yi.QA,Br.I,Un.KW,pe.cn,qo.S,bi.wq]]}),e})();const yd=["createGoalElement"];function jh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"li",27),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.goalItemString(t)," ")}}function zh(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",26),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext().$implicit;return n.\u0275\u0275nextContext().createGoal(o)}),n.\u0275\u0275text(1," Create Goal "),n.\u0275\u0275elementEnd()}}function Cu(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",15)(1,"tui-island",16)(2,"div",17)(3,"div",18)(4,"div",19)(5,"div",20),n.\u0275\u0275text(6," Duration: "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div"),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",21),n.\u0275\u0275text(10," Tasks: "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"ul",22),n.\u0275\u0275template(12,jh,2,1,"li",23),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(13,"div",24),n.\u0275\u0275template(14,zh,2,0,"button",25),n.\u0275\u0275elementStart(15,"button",26),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit;return n.\u0275\u0275nextContext().setGoal(s)}),n.\u0275\u0275text(16," Use This Goal "),n.\u0275\u0275elementEnd()()()()()}if(2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(8),n.\u0275\u0275textInterpolate(i.getRelativeTime(t.end_date)),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngForOf",t.goal_items),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!1)}}function Uh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",36),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275property("value",t.pk),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function Gh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list"),n.\u0275\u0275template(1,Uh,2,2,"button",35),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.categories)}}function ql(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",36),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275property("value",t[0]),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function xd(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list"),n.\u0275\u0275template(1,ql,2,2,"button",35),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.difficulties)}}function $h(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",37),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext().index;return n.\u0275\u0275nextContext().removeGoalItem(o)}),n.\u0275\u0275text(1," Delete "),n.\u0275\u0275elementEnd()}}function Wh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"tui-select",28),n.\u0275\u0275pipe(3,"stringifyTuiDataList"),n.\u0275\u0275text(4," Category "),n.\u0275\u0275template(5,Gh,2,1,"tui-data-list",29),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(6,"tui-field-error",30),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div",6)(8,"tui-select",28),n.\u0275\u0275pipe(9,"stringifyTuiDataList"),n.\u0275\u0275text(10," Difficulty "),n.\u0275\u0275template(11,xd,2,1,"tui-data-list",29),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(12,"tui-field-error",30),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",6)(14,"tui-input-number",31),n.\u0275\u0275text(15," Number of questions "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(16,"tui-field-error",30),n.\u0275\u0275elementStart(17,"div",32),n.\u0275\u0275text(18),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(19,"div",6)(20,"div",33),n.\u0275\u0275template(21,$h,2,0,"button",34),n.\u0275\u0275elementEnd()()()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("valueContent",i.categories?n.\u0275\u0275pipeBind3(3,11,i.categories,"pk","full_name"):"")("formControl",i.getFormControl(t,"category")),n.\u0275\u0275advance(4),n.\u0275\u0275property("formControl",i.getFormControl(t,"category")),n.\u0275\u0275advance(2),n.\u0275\u0275property("valueContent",i.difficulties?n.\u0275\u0275pipeBind3(9,15,i.difficulties,0,1):"")("formControl",i.getFormControl(t,"difficulty")),n.\u0275\u0275advance(4),n.\u0275\u0275property("formControl",i.getFormControl(t,"difficulty")),n.\u0275\u0275advance(2),n.\u0275\u0275property("formControl",i.getFormControl(t,"number_of_questions"))("max",i.getNumQuestionsLimit(t)),n.\u0275\u0275advance(2),n.\u0275\u0275property("formControl",i.getFormControl(t,"number_of_questions")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",i.getNumQuestionsLimit(t)," question(s) available. "),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.getGoalItemFormControls().length>1)}}let Yh=(()=>{class e{constructor(t,i,o,s,c,f,v){this.goalService=t,this.categoryService=i,this.difficultyService=o,this.router=s,this.activatedRoute=c,this.notificationService=f,this.userActionsService=v,this.timeOptions=(0,po.eN)(),tl.extend(ad)}ngOnInit(){this.courseId=this.activatedRoute.snapshot.parent.params.courseId,this.goalForm=Yr.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t),this.goalService.getSuggestions().subscribe(t=>this.recommendedGoals=t),this.goalService.getLimits().subscribe(t=>this.limits=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,i){return t.get(i)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(Yr.createGoalItemForm()),this.logClick("User added goal item")}removeGoalItem(t){this.getGoalItems().removeAt(t),this.logClick("User removed goal item",{index:t})}goalItemString(t){return od(t)}setGoal(t){this.goalForm=Yr.createGoalFormFromGoal(t),this.createGoalElement.nativeElement.scrollIntoView({behavior:"smooth"}),this.logClick("User used recommended goal",{goal:t})}createGoal(t){this.setGoal(t),this.onSubmit().then()}getRelativeTime(t){return tl(t).fromNow()}getNumQuestionsLimit(t){const i=t.get("category").value,o=t.get("difficulty").value;return i&&o?this.limits.find(s=>s.category===i&&s.difficulty===o).unsolved_questions:0}logClick(t,i){this.userActionsService.createCustomAction({description:t,object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:i}).subscribe()}onSubmit(){return U(this,void 0,void 0,function*(){const t=Yr.formatGoalFormData(this.goalForm,this.courseId),i=yield this.goalService.createGoal(t).toPromise();for(const o of this.getGoalItemFormControls()){const s=Yr.formatGoalItemFormData(o,i.id);yield this.goalService.createGoalItem(s).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Sn),n.\u0275\u0275directiveInject(Wl.H),n.\u0275\u0275directiveInject(nd.G),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(mt.$F),n.\u0275\u0275directiveInject(ta.v))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(yd,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(i.createGoalElement=o.first)}},decls:25,vars:5,consts:[[1,"tui-container","tui-container_adaptive"],[1,"tui-form__header"],["class","tui-form__row",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],["createGoalElement",""],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["icon","tuiIconPlus","size","s","tuiButton","","type","button","appearance","secondary",1,"ml-3",3,"click"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[1,"tui-form__row"],[1,"shadow"],[1,"flex"],[1,"flex-1"],[1,"flex","space-x-1"],[1,"tui-text_bold","tui-text_body-l"],[1,"tui-text_bold","tui-text_body-l","tui-space_top-3"],[1,"tui-list"],["class","tui-list__item",4,"ngFor","ngForOf"],[1,"flex","flex-col","space-y-3"],["tuiButton","","size","s","appearance","secondary",3,"click",4,"ngIf"],["tuiButton","","size","s","appearance","secondary",3,"click"],[1,"tui-list__item"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],[3,"formControl","max"],[1,"tui-form__field-note"],[1,"flex","h-full","items-center"],["icon","tuiIconMinus","size","s","tuiButton","","type","button","appearance","accent",3,"click",4,"ngIf"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["icon","tuiIconMinus","size","s","tuiButton","","type","button","appearance","accent",3,"click"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"h2",1),n.\u0275\u0275text(2,"Recommended Goals"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Cu,17,3,"div",2),n.\u0275\u0275elementStart(4,"form",3,4),n.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),n.\u0275\u0275elementStart(6,"h2",1),n.\u0275\u0275text(7,"Create New Goal"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"tui-input-date",7),n.\u0275\u0275text(11," End date "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(12,"tui-field-error",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",6)(14,"tui-input-time",9),n.\u0275\u0275text(15," End time "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(16,"tui-field-error",10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"h3",1),n.\u0275\u0275text(18," Tasks "),n.\u0275\u0275elementStart(19,"button",11),n.\u0275\u0275listener("click",function(){return i.addGoalItem()}),n.\u0275\u0275text(20," Add Another "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(21,Wh,22,19,"div",12),n.\u0275\u0275elementStart(22,"div",13)(23,"button",14),n.\u0275\u0275text(24," Create Goal "),n.\u0275\u0275elementEnd()()()()),2&t&&(n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",i.recommendedGoals),n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",i.goalForm),n.\u0275\u0275advance(10),n.\u0275\u0275property("items",i.timeOptions),n.\u0275\u0275advance(7),n.\u0275\u0275property("ngForOf",i.getGoalItemFormControls()),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",i.goalForm.invalid))},directives:[A.sg,Si.h,A.O5,pt.v0,Y.\u0275NgNoValidate,Y.NgControlStatusGroup,Y.FormGroupDirective,il,Ja,Y.NgControlStatus,Y.FormControlName,Kt.y,Ue,Vr.uJ,Vr.OI,Y.FormControlDirective,Rn.gX,Rn.qi,Rn.vK,li,Ws],pipes:[Yl.J],styles:[""]}),e})();var ec=d(9232);function tc(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t.value()),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.label(t.activeItemIndex))}}let Xh=(()=>{class e{constructor(){this.activeItemIndex=NaN}values(){return[this.submissionStats.correct,this.submissionStats.partially_correct,this.submissionStats.wrong]}value(){return isNaN(this.activeItemIndex)?this.submissionStats.total:this.values()[this.activeItemIndex]}color(t){return{0:"success",1:"primary",2:"error"}[t]}label(t){return isNaN(t)?"Total":{0:"Correct",1:"Partially Correct",2:"Wrong"}[t]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-submission-chart"]],inputs:{submissionStats:"submissionStats"},decls:3,vars:4,consts:[[3,"value","activeItemIndex","content","colorHandler","activeItemIndexChange"],["content",""]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"tui-ring-chart",0),n.\u0275\u0275listener("activeItemIndexChange",function(s){return i.activeItemIndex=s}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(1,tc,4,2,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275property("value",i.values())("activeItemIndex",i.activeItemIndex)("content",o)("colorHandler",i.color)}},directives:[ec.i],styles:[""]}),e})();function nc(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",26)}function bd(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",27)}function Cd(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",26)}function wd(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",27)}function ll(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate2(" ",t.text," : ",t.value," ")}}function Kh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t," ")}}function Sd(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",14),n.\u0275\u0275text(2,"Question Stats"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"table",15)(4,"tbody")(5,"tr",16)(6,"th",17),n.\u0275\u0275text(7,"Questions Attempt"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"th",17),n.\u0275\u0275text(9,"Questions Solved"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"th",17),n.\u0275\u0275text(11,"Success Rate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(12,"tr",16)(13,"td",18),n.\u0275\u0275text(14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"td",18),n.\u0275\u0275text(16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(17,"td",18),n.\u0275\u0275text(18),n.\u0275\u0275pipe(19,"percent"),n.\u0275\u0275elementStart(20,"span"),n.\u0275\u0275template(21,nc,1,0,"tui-svg",19),n.\u0275\u0275template(22,bd,1,0,"tui-svg",20),n.\u0275\u0275text(23),n.\u0275\u0275pipe(24,"percent"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(25," ) "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(26,"div",21)(27,"div",22),n.\u0275\u0275text(28,"Submission Stats"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(29,"app-submission-chart",23),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(30,"div",8)(31,"div",24)(32,"table",15)(33,"tbody")(34,"tr",16)(35,"th",17),n.\u0275\u0275text(36,"Total Submissions"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(37,"th",17),n.\u0275\u0275text(38,"Correct Submissions"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(39,"th",17),n.\u0275\u0275text(40,"Partially Correct Submissions "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(41,"th",17),n.\u0275\u0275text(42,"Incorrect Submissions"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(43,"th",17),n.\u0275\u0275text(44,"Success Rate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(45,"tr",16)(46,"td",18),n.\u0275\u0275text(47),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(48,"td",18),n.\u0275\u0275text(49),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(50,"td",18),n.\u0275\u0275text(51),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(52,"td",18),n.\u0275\u0275text(53),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(54,"td",18),n.\u0275\u0275text(55),n.\u0275\u0275pipe(56,"percent"),n.\u0275\u0275elementStart(57,"span"),n.\u0275\u0275template(58,Cd,1,0,"tui-svg",19),n.\u0275\u0275template(59,wd,1,0,"tui-svg",20),n.\u0275\u0275text(60),n.\u0275\u0275pipe(61,"percent"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(62," ) "),n.\u0275\u0275elementEnd()()()()()(),n.\u0275\u0275elementStart(63,"div",14),n.\u0275\u0275text(64,"Types of Error"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(65,ll,2,2,"div",25),n.\u0275\u0275elementStart(66,"div",14),n.\u0275\u0275text(67,"Error Messages"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(68,Kh,2,1,"div",25),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(14),n.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.total_questions),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.correct_questions),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(19,25,i.goal.stats[t].submissions.questions_success_rate)," ( "),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("success",i.getQuestionRelativeSuccessRate(t)>=0)("error",i.getQuestionRelativeSuccessRate(t)<0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.getQuestionRelativeSuccessRate(t)>=0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.getQuestionRelativeSuccessRate(t)<0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(24,27,i.getQuestionRelativeSuccessRate(t))," "),n.\u0275\u0275advance(6),n.\u0275\u0275property("submissionStats",i.goal.stats[t].submissions),n.\u0275\u0275advance(18),n.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.total),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.correct),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",i.goal.stats[t].submissions.partially_correct," "),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.goal.stats[t].submissions.wrong),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(56,29,i.goal.stats[t].submissions.success_rate)," ( "),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("success",i.getSubmissionRelativeSuccessRate(t)>=0)("error",i.getSubmissionRelativeSuccessRate(t)<0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.getSubmissionRelativeSuccessRate(t)>=0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.getSubmissionRelativeSuccessRate(t)<0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(61,31,i.getSubmissionRelativeSuccessRate(t))," "),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",i.errorMessages(t)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",i.goal.stats[t].submissions.error_messages)}}function Td(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275element(1,"tui-marker-icon",29),n.\u0275\u0275elementStart(2,"h2",30),n.\u0275\u0275text(3," There is no details to display "),n.\u0275\u0275elementEnd()())}function Qh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-island",6)(1,"div",7),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",8)(4,"label",9),n.\u0275\u0275text(5),n.\u0275\u0275element(6,"progress",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div",11),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(9,Sd,69,33,"ng-container",12),n.\u0275\u0275template(10,Td,4,0,"ng-template",null,13,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=r.index,o=n.\u0275\u0275reference(11),s=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1("Task ",i+1,""),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate2(" ",s.getGoalItem(t).progress," / ",s.getGoalItem(t).number_of_questions," "),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("info",s.getGoalItem(t).progress<s.getGoalItem(t).number_of_questions)("success",s.getGoalItem(t).progress>=s.getGoalItem(t).number_of_questions),n.\u0275\u0275property("max",s.getGoalItem(t).number_of_questions)("value",s.getGoalItem(t).progress),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2(" You have completed ",s.getGoalItem(t).progress," out of ",s.getGoalItem(t).number_of_questions," exercises in this task. "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",s.goal.stats[t].submissions.total>0)("ngIfElse",o)}}const Ed=function(){return[".."]};function Jh(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275text(2,"Goal Performance Review"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"a",3),n.\u0275\u0275text(4," Back to goals "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div"),n.\u0275\u0275element(6,"app-goal-island",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,Qh,12,13,"tui-island",5),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(4,Ed)),n.\u0275\u0275advance(3),n.\u0275\u0275property("goal",t.goal)("showPerformanceButton",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.goalItemIds())}}let rc=(()=>{class e{constructor(t,i,o,s){this.goalService=t,this.activatedRoute=i,this.router=o,this.notificationsService=s}ngOnInit(){this.goalService.getGoal(this.activatedRoute.snapshot.params.goalId).subscribe(i=>{this.goal=i,this.canClaim()&&this.claim()})}getGoalItem(t){return this.goal.goal_items.find(i=>i.id===t)}goalItemIds(){return Object.keys(this.goal.stats).map(t=>parseInt(t))}getSubmissionRelativeSuccessRate(t){return this.goal.stats[t].submissions.success_rate-this.goal.stats[t].old_submissions.success_rate}getQuestionRelativeSuccessRate(t){return this.goal.stats[t].submissions.questions_success_rate-this.goal.stats[t].old_submissions.questions_success_rate}errorMessages(t){return Object.entries(this.goal.stats[t].submissions.messages).map(([i,o])=>({text:i,value:o}))}canClaim(){return!this.goal.claimed&&this.goal.progress>=this.goal.number_of_questions}claim(){this.goalService.claim(this.goal.id).subscribe(()=>{this.goalService.getGoal(this.goal.id).subscribe(t=>this.goal=t)})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Sn),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-goal"]],decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive space-y-3 mt-3",4,"ngIf"],[1,"tui-container","tui-container_adaptive","space-y-3","mt-3"],[1,"tui-text_h2"],["icon","tuiIconArrowLeft","size","s","tuiButton","","appearance","flat",3,"routerLink"],[3,"goal","showPerformanceButton"],["class","shadow",4,"ngFor","ngForOf"],[1,"shadow"],[1,"tui-text_h3"],[1,"tui-space_top-2"],["tuiProgressLabel","",1,"w-full"],["tuiProgressBar","",1,"progress",3,"max","value"],[1,"tui-text_body-m"],[4,"ngIf","ngIfElse"],["noSubmission",""],[1,"tui-text_h4","tui-space_top-5"],[1,"tui-table","mt-3"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__th"],[1,"tui-table__td"],["src","tuiIconArrowUp","class","pb-1 -mx-1",4,"ngIf"],["src","tuiIconArrowDown","class","pb-1 -mx-1",4,"ngIf"],[1,"flex","mt-5"],[1,"flex-1","tui-text_h4"],[3,"submissionStats"],[1,"overflow-x-auto"],["class","tui-space_top-2",4,"ngFor","ngForOf"],["src","tuiIconArrowUp",1,"pb-1","-mx-1"],["src","tuiIconArrowDown",1,"pb-1","-mx-1"],[1,"flex","justify-center","items-center","w-full","h-32"],["size","s","src","tuiIconAlertCircleLarge",1,"tui-space_right-4"],[1,"tui-text_body-xl"]],template:function(t,i){1&t&&n.\u0275\u0275template(0,Jh,8,5,"div",0),2&t&&n.\u0275\u0275property("ngIf",i.goal)},directives:[A.O5,pt.v0,q.yS,$s,A.sg,Si.h,ld,ud,ur.P,Xh,an.B],pipes:[A.Zx],styles:[".flex[_ngcontent-%COMP%]{display:flex}.success[_ngcontent-%COMP%]{color:var(--tui-success-fill)}.error[_ngcontent-%COMP%]{color:var(--tui-error-fill)}.info[_ngcontent-%COMP%]{color:var(--tui-info-fill)}.button-success[_ngcontent-%COMP%]{background-color:var(--tui-success-fill);color:var(--tui-base-01)}.button-success[_ngcontent-%COMP%]:hover{opacity:.75;transition-duration:.3s;cursor:pointer}"]}),e})();const Id={Open:"OPEN",Private:"CODE"};let cl=(()=>{class e{static createCourseForm(){return(new Y.FormBuilder).group({name:new Y.FormControl("",[Y.Validators.required]),description:new Y.FormControl("",[Y.Validators.required]),url:new Y.FormControl("",[Y.Validators.required,Y.Validators.pattern("(https?://)([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]),date:new Y.FormControl(new st.VR(st.TU.currentLocal(),st.TU.currentLocal().append({day:7})),[Y.Validators.required]),registrationMode:new Y.FormControl("",[Y.Validators.required]),registrationCode:new Y.FormControl("")},{validator:e.dateValidator})}static formatCourseFormData(t){return{name:t.get("name").value,description:t.get("description").value,url:t.get("url").value,start_date:this.dateToLocal(t.get("date").value.from),end_date:this.dateToLocal(t.get("date").value.to),registration_mode:Id[t.get("registrationMode").value],registration_code:t.get("registrationCode").value,token:"0",course_id:0}}static dateToLocal(t){return new Date(t.toLocalNativeDate().getTime())}}return e.dateValidator=r=>{const t=r.get("date").value;return t.from&&t.to?null:{forbiddenDateRange:!0}},e})();var ic=d(50284);function oc(e,r){if(1&e&&n.\u0275\u0275element(0,"tui-data-list-wrapper",17),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("items",t.registrationModes)}}function xn(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",3)(1,"tui-input",18),n.\u0275\u0275text(2,"Access Code"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"tui-field-error",18),n.\u0275\u0275elementEnd())}let Zh=(()=>{class e{constructor(t,i,o){this.courseService=t,this.notificationsService=i,this.router=o,this.registrationModes=["Open","Private"],this.formGroup=cl.createCourseForm()}showAccessCode(){return"Private"===this.formGroup.get("registrationMode").value}onSubmit(){this.courseService.createCourse(cl.formatCourseFormData(this.formGroup)).subscribe(t=>{this.notificationsService.show("Course created successfully!",{status:"success"}).subscribe(),this.router.navigate(["/course",t.id])})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(mt.$F),n.\u0275\u0275directiveInject(q.F0))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-create"]],features:[n.\u0275\u0275ProvidersFeature([{provide:_n.Z4,useValue:{pattern:"Please enter a valid url starting with http:// or https://"}}])],decls:36,vars:3,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name"],["formControlName","description"],[1,"tui-form__field-note"],["formControlName","url","type","url"],["formControlName","url"],["formControlName","date"],["formControlName","registrationMode"],["tuiTextfield","","placeholder","Select registration mode"],[3,"items",4,"tuiDataList"],["class","tui-form__row",4,"ngIf"],[1,"tui-form__buttons"],["tuiButton","","size","m","type","submit",1,"tui-form__button",3,"disabled"],["tuiButton","","type","button","appearance","flat","size","m","routerLink","/",1,"tui-form__button"],[3,"items"],["formControlName","registrationCode"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"form",1),n.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275text(3," Create a Course "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),n.\u0275\u0275text(6,"Course Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(7,"tui-field-error",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",3)(9,"tui-text-area",5),n.\u0275\u0275text(10,"Course Description"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(11,"tui-field-error",5),n.\u0275\u0275elementStart(12,"div",6),n.\u0275\u0275text(13,"Display a text message on the Course Homepage to welcome your students to the course or to provide instructions on what they can do. "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(14,"div",3)(15,"tui-input",7),n.\u0275\u0275text(16,"Course URL"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(17,"tui-field-error",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(18,"div",3)(19,"tui-input-date-range",9),n.\u0275\u0275text(20,"Course Date"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(21,"tui-field-error",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"div",3)(23,"tui-select",10),n.\u0275\u0275text(24," Registration Mode "),n.\u0275\u0275element(25,"input",11),n.\u0275\u0275template(26,oc,1,1,"tui-data-list-wrapper",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(27,"tui-field-error",10),n.\u0275\u0275elementStart(28,"div",6),n.\u0275\u0275text(29,"Everyone can join an open course, while only the ones with an access code can join a private course. "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(30,xn,4,0,"div",13),n.\u0275\u0275elementStart(31,"div",14)(32,"button",15),n.\u0275\u0275text(33," Submit "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(34,"button",16),n.\u0275\u0275text(35," Cancel "),n.\u0275\u0275elementEnd()()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",i.formGroup),n.\u0275\u0275advance(29),n.\u0275\u0275property("ngIf",i.showAccessCode()),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",i.formGroup.invalid))},directives:[Y.\u0275NgNoValidate,Y.NgControlStatusGroup,Y.FormGroupDirective,le.K3,le.wU,Y.NgControlStatus,Y.FormControlName,Kt.y,js.Jl,js.eQ,ms,ea,Vr.uJ,Vr.OI,Un.MB,Rn.gX,ic.eC,A.O5,pt.v0,q.rH],styles:[""]}),e})();const Pd=function(){return["concepts"]},Ys=function(e){return["/course",e,"goal"]};let Md=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.route=i,this.courseService=o,this.courseId=this.route.snapshot.parent.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(ce.N))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-practice-page"]],decls:25,vars:10,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"-mt-5"],[1,"tui-island__paragraph","tui-text_body-xl"],[1,"flex-container","gap-8","mt-10"],["size","m",1,"practice-tile","tui-island_hoverable",3,"routerLink"],[1,"practice-background","practice-question"],[1,"practice-tile-text"],[1,"tui-island__title"],[1,"tui-island__paragraph","tui-text_body-xl","flex-space"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],[1,"practice-background","view-goals"],[1,"practice-tile-button"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"p",2),n.\u0275\u0275text(3,"Start practicing by selecting a topic in the concept map, by setting personal goals to collect tokens, or by selecting a type of question at the bottom. "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",3)(5,"tui-island",4),n.\u0275\u0275element(6,"div",5),n.\u0275\u0275elementStart(7,"div",6)(8,"h3",7),n.\u0275\u0275text(9,"Concept Map"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"p",8),n.\u0275\u0275text(11," View programming concepts and practice questions in selected topics and difficulty levels. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div")(13,"a",9),n.\u0275\u0275text(14," Practice "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(15,"tui-island",4),n.\u0275\u0275element(16,"div",10),n.\u0275\u0275elementStart(17,"div",6)(18,"h3",7),n.\u0275\u0275text(19,"Personal Goals"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"p",8),n.\u0275\u0275text(21," Develop goals for yourself that suit your own skill level and earn tokens when you achieve them. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"div",11)(23,"a",9),n.\u0275\u0275text(24," View "),n.\u0275\u0275elementEnd()()()()()()),2&t&&(n.\u0275\u0275advance(5),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(4,Pd)),n.\u0275\u0275advance(8),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(5,Pd)),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(6,Ys,i.courseId)),n.\u0275\u0275advance(8),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(8,Ys,i.courseId)))},directives:[Si.h,q.rH,pt.v0,q.yS],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;height:100%}.practice-background[_ngcontent-%COMP%]{width:calc(100% + 2 * var(--tui-padding-l));height:calc(4 * var(--tui-padding-l));margin-top:calc(-1 * var(--tui-padding-l));margin-left:calc(-1 * var(--tui-padding-l));margin-bottom:12px}.practice-question[_ngcontent-%COMP%]{background-color:var(--tui-support-06);opacity:.24}.view-goals[_ngcontent-%COMP%]{background-color:var(--tui-support-02);opacity:.24}.practice-tile[_ngcontent-%COMP%]{overflow:hidden;min-height:250px}@media screen and (min-width: 1280px){.practice-tile[_ngcontent-%COMP%]{flex-basis:calc(30% - 4.5rem)}}@media screen and (min-width: 768px) and (max-width: 1279px){.practice-tile[_ngcontent-%COMP%]{flex-basis:calc(50% - 4.5rem)}}@media screen and (max-width: 767px){.practice-tile[_ngcontent-%COMP%]{flex-basis:100%}}.practice-tile-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 4 * var(--tui-padding-l))}.flex-space[_ngcontent-%COMP%]{flex:1 1}"]}),e})();var rr=d(58259),qh=d(59695),yo=d.n(qh),ep=d(85510),dl=d.n(ep);const{round:ac,floor:Ad,PI:sc}=Math,no={linear:function(e,r,t){return(t-e[0])/(e[1]-e[0])*(r[1]-r[0])+r[0]||0}},ci=function(e){return e%360+(e<0?360:0)},Ta=function(e,r){return r*ac(e/r)},wu=function(e){return 180*e/sc%360},di=function(e,r){return(e=(r=r||!1)?e:e%360)*sc/180},fl=function(e,r){if(void 0===r)r=void 0===e?1:e,e=0;else if(r<e){const t=e;e=r,r=t}return Ad(Math.random()*(r-e+1)+e)},{cos:Xs,sin:hl,atan2:uc}=Math,pl=function(e,r){var t=di(e.y),i=di(r.y),c=di(r.x-e.x),f=hl(c)*Xs(i),v=Xs(t)*hl(i)-hl(t)*Xs(i)*Xs(c),x=wu(uc(f,v))-22.5;return x<0&&(x+=360),["NE","E","SE","S","SW","W","NW","N"][x=parseInt(x/45)]},ia=function(e,r){var t=e.x,i=e.y;return(t-=r.x)*t+(i-=r.y)*i},kd=function(e,r){return Math.sqrt(ia(e,r))},en={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Su,cos:ml,sin:Tu,sqrt:Od,min:Ld,max:Fd,atan2:Rd,round:lc,pow:tp,PI:cc}=Math,_e=function(e,r){if(!(this instanceof _e))return new _e(e,r);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),r=parseFloat(t[1])}else Object(e)===e&&(r=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===r?0:r};_e.fromPolar=function(e,r,t){t=new _e(t);var i=Su(e*ml(r)),o=Su(e*Tu(r)),s=ci(wu(r));return s<90?o=-o:s<180?(i=-i,o=-o):s<270&&(i=-i),new _e(t.x+i,t.y+o)},_e.random=function(e,r,t,i){return new _e(fl(e,r),fl(t,i))},_e.prototype={type:en.Point,chooseClosest:function(e){var r=e.length;if(1===r)return new _e(e[0]);for(var t=null,i=1/0,o=0;o<r;o++){var s=new _e(e[o]),c=this.squaredDistance(s);c<i&&(t=s,i=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Ld(Fd(this.x,e.x),e.x+e.width),this.y=Ld(Fd(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,r){var t=this.equals(e)||this.equals(r)?NaN:this.theta(r)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return pl(this,e)},changeInAngle:function(e,r,t){return this.clone().offset(-e,-r).theta(t)-this.theta(t)},clone:function(){return new _e(this)},cross:function(e,r){return e&&r?(r.x-this.x)*(e.y-this.y)-(r.y-this.y)*(e.x-this.x):NaN},difference:function(e,r){return Object(e)===e&&(r=e.y,e=e.x),new _e(this.x-(e||0),this.y-(r||0))},distance:function(e){return kd(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,r){return new _e((1-r)*this.x+r*e.x,(1-r)*this.y+r*e.y)},magnitude:function(){return Od(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Su(e.x-this.x)+Su(e.y-this.y)},move:function(e,r){var t=di(new _e(e).theta(this));return this.offset(ml(t)*r,-Tu(t)*r)},normalize:function(e){var r=(e||1)/this.magnitude();return this.scale(r,r)},offset:function(e,r){return Object(e)===e&&(r=e.y,e=e.x),this.x+=e||0,this.y+=r||0,this},reflection:function(e){return new _e(e).move(this,this.distance(e))},rotate:function(e,r){if(0===r)return this;e=e||new _e(0,0),r=di(ci(-r));var t=ml(r),i=Tu(r),s=i*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-i*(this.y-e.y)+e.x,this.y=s,this},round:function(e){let r=1;if(e)switch(e){case 1:r=10;break;case 2:r=100;break;case 3:r=1e3;break;default:r=tp(10,e)}return this.x=lc(this.x*r)/r,this.y=lc(this.y*r)/r,this},scale:function(e,r,t){return t=t&&new _e(t)||new _e(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+r*(this.y-t.y),this},snapToGrid:function(e,r){return this.x=Ta(this.x,e),this.y=Ta(this.y,r||e),this},squaredDistance:function(e){return ia(this,e)},theta:function(e){e=new _e(e);var i=Rd(-(e.y-this.y),e.x-this.x);return i<0&&(i=2*cc+i),180*i/cc},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new _e(e)||new _e(0,0);var r=this.x,t=this.y;return this.x=Od((r-e.x)*(r-e.x)+(t-e.y)*(t-e.y)),this.y=di(e.theta(new _e(r,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,r){return Object(e)===e&&(r=e.y,e=e.x),this.x=e||0,this.y=r||0,this},vectorAngle:function(e){return new _e(0,0).angleBetween(this,e)}},_e.prototype.translate=_e.prototype.offset;const ri=_e,{max:xo,min:dc}=Math,Pt=function(e,r){return this instanceof Pt?e instanceof Pt?new Pt(e.start,e.end):(this.start=new _e(e),void(this.end=new _e(r))):new Pt(e,r)};Pt.prototype={type:en.Line,angle:function(){var e=new _e(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=dc(this.start.x,this.end.x),r=dc(this.start.y,this.end.y),t=xo(this.start.x,this.end.x),i=xo(this.start.y,this.end.y);return new bt(e,r,t-e,i-r)},bearing:function(){return pl(this.start,this.end)},clone:function(){return new Pt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var r=this.vector().dot(new Pt(this.start,e).vector()),t=dc(1,xo(0,r/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var r=this.start,t=this.end;if(0!==r.cross(e,t))return!1;var i=this.length();return!(new Pt(r,e).length()>i||new Pt(e,t).length()>i)},divideAt:function(e){var r=this.pointAt(e);return[new Pt(this.start,r),new Pt(r,this.end)]},divideAtLength:function(e){var r=this.pointAtLength(e);return[new Pt(this.start,r),new Pt(r,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,r){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,r);return t&&e instanceof Pt&&(t=t[0]),t}return null},intersectionWithLine:function(e){var r=new _e(this.end.x-this.start.x,this.end.y-this.start.y),t=new _e(e.end.x-e.start.x,e.end.y-e.start.y),i=r.x*t.y-r.y*t.x,o=new _e(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*t.y-o.y*t.x,c=o.x*r.y-o.y*r.x;if(0===i||s*i<0||c*i<0)return null;if(i>0){if(s>i||c>i)return null}else if(s<i||c<i)return null;return[new _e(this.start.x+s*r.x/i,this.start.y+s*r.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return kd(this.start,this.end)},midpoint:function(){return new _e((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const r=this.clone();if(!this.isDifferentiable())return r;const{start:t,end:i}=r,o=t.clone().rotate(i,270),s=i.clone().rotate(t,90);return t.move(s,e),i.move(o,e),r},pointAt:function(e){var r=this.start,t=this.end;return e<=0?r.clone():e>=1?t.clone():r.lerp(t,e)},pointAtLength:function(e){var r=this.start,t=this.end,i=!0;e<0&&(i=!1,e=-e);var o=this.length();return e>=o?i?t.clone():r.clone():this.pointAt((i?e:o-e)/o)},pointOffset:function(e){e=new _e(e);var r=this.start,t=this.end;return((t.x-r.x)*(e.y-r.y)-(t.y-r.y)*(e.x-r.x))/this.length()},rotate:function(e,r){return this.start.rotate(e,r),this.end.rotate(e,r),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,r,t){return this.start.scale(e,r,t),this.end.scale(e,r,t),this},setLength:function(e){var r=this.length();if(!r)return this;var t=e/r;return this.scale(t,t,this.start)},squaredLength:function(){return ia(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var r=this.start,t=this.end,i=this.pointAt(e),o=new Pt(r,t);return o.translate(i.x-r.x,i.y-r.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var r=this.start,t=this.end,i=this.pointAtLength(e),o=new Pt(r,t);return o.translate(i.x-r.x,i.y-r.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,r){return this.start.translate(e,r),this.end.translate(e,r),this},vector:function(){return new _e(this.end.x-this.start.x,this.end.y-this.start.y)}},Pt.prototype.intersection=Pt.prototype.intersect;const oa=Pt,{sqrt:xs,round:Eu,pow:Nd}=Math,Oi=function(e,r,t){return this instanceof Oi?e instanceof Oi?new Oi(new _e(e.x,e.y),e.a,e.b):(e=new _e(e),this.x=e.x,this.y=e.y,this.a=r,void(this.b=t)):new Oi(e,r,t)};Oi.fromRect=function(e){return e=new bt(e),new Oi(e.center(),e.width/2,e.height/2)},Oi.prototype={type:en.Ellipse,bbox:function(){return new bt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new _e(this.x,this.y)},clone:function(){return new Oi(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,r){return void 0===e&&(e=0),void 0===r&&(r=e),this.a+=2*e,this.b+=2*r,this},intersectionWithLine:function(e){var r=[],t=e.start,i=e.end,o=this.a,s=this.b,c=e.vector(),f=t.difference(new _e(this)),v=new _e(c.x/(o*o),c.y/(s*s)),C=new _e(f.x/(o*o),f.y/(s*s)),M=c.dot(v),x=c.dot(C),ne=x*x-M*(f.dot(C)-1);if(ne<0)return null;if(ne>0){var oe=xs(ne),Se=(-x-oe)/M,Ie=(-x+oe)/M;if((Se<0||1<Se)&&(Ie<0||1<Ie))return null;0<=Se&&Se<=1&&r.push(t.lerp(i,Se)),0<=Ie&&Ie<=1&&r.push(t.lerp(i,Ie))}else{var je=-x/M;if(!(0<=je&&je<=1))return null;r.push(t.lerp(i,je))}return r},intersectionWithLineFromCenterToPoint:function(e,r){e=new _e(e),r&&e.rotate(new _e(this.x,this.y),r);var o,t=e.x-this.x,i=e.y-this.y;if(0===t)return o=this.bbox().pointNearestToPoint(e),r?o.rotate(new _e(this.x,this.y),-r):o;var s=i/t,C=xs(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return o=new _e(this.x+(C=t<0?-C:C),this.y+s*C),r?o.rotate(new _e(this.x,this.y),-r):o},normalizedDistance:function(e){var r=e.x,t=e.y,i=this.a,o=this.b,s=this.x,c=this.y;return(r-s)*(r-s)/(i*i)+(t-c)*(t-c)/(o*o)},round:function(e){let r=1;if(e)switch(e){case 1:r=10;break;case 2:r=100;break;case 3:r=1e3;break;default:r=Nd(10,e)}return this.x=Eu(this.x*r)/r,this.y=Eu(this.y*r)/r,this.a=Eu(this.a*r)/r,this.b=Eu(this.b*r)/r,this},tangentTheta:function(e){var x,G,t=e.x,i=e.y,o=this.a,s=this.b,c=this.bbox().center(),f=c.x,v=c.y;return t>c.x+o/2||t<c.x-o/2?G=o*o/(t-f)-o*o*(i-v)*((x=t>c.x?i-30:i+30)-v)/(s*s*(t-f))+f:x=s*s/(i-v)-s*s*(t-f)*((G=i>c.y?t+30:t-30)-f)/(o*o*(i-v))+v,new _e(G,x).theta(e)},toString:function(){return new _e(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Dd=Oi,{abs:bs,cos:Iu,sin:np,min:Ks,max:fc,round:Cs,pow:Bd}=Math,bt=function(e,r,t,i){if(!(this instanceof bt))return new bt(e,r,t,i);Object(e)===e&&(r=e.y,t=e.width,i=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===r?0:r,this.width=void 0===t?0:t,this.height=void 0===i?0:i};bt.fromEllipse=function(e){return e=new Oi(e),new bt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},bt.fromPointUnion=function(...e){if(0===e.length)return null;const r=new _e;let t,i,o,s;t=i=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){r.update(e[c]);const f=r.x,v=r.y;f<t&&(t=f),f>o&&(o=f),v<i&&(i=v),v>s&&(s=v)}return new bt(t,i,o-t,s-i)},bt.fromRectUnion=function(...e){if(0===e.length)return null;const r=new bt;let t,i,o,s;t=i=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){r.update(e[c]);const f=r.x,v=r.y,C=f+r.width,M=v+r.height;f<t&&(t=f),C>o&&(o=C),v<i&&(i=v),M>s&&(s=M)}return new bt(t,i,o-t,s-i)},bt.prototype={type:en.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:r,height:t}=this,i=di(e),o=bs(np(i)),s=bs(Iu(i)),c=r*s+t*o,f=r*o+t*s;return this.x+=(r-c)/2,this.y+=(t-f)/2,this.width=c,this.height=f,this},bottomLeft:function(){return new _e(this.x,this.y+this.height)},bottomLine:function(){return new Pt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new _e(this.x+this.width/2,this.y+this.height)},center:function(){return new _e(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new bt(this)},containsPoint:function(e){return(e=new _e(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var r=new bt(this).normalize(),t=new bt(e).normalize(),i=r.width,o=r.height,s=t.width,c=t.height;if(!(i&&o&&s&&c))return!1;var f=r.x,v=r.y,C=t.x,M=t.y;return s+=C,i+=f,c+=M,o+=v,f<=C&&s<=i&&v<=M&&c<=o},corner:function(){return new _e(this.x+this.width,this.y+this.height)},equals:function(e){var r=new bt(this).normalize(),t=new bt(e).normalize();return r.x===t.x&&r.y===t.y&&r.width===t.width&&r.height===t.height},inflate:function(e,r){return void 0===e&&(e=0),void 0===r&&(r=e),this.x-=e,this.y-=r,this.width+=2*e,this.height+=2*r,this},intersect:function(e){var r=this.origin(),t=this.corner(),i=e.origin(),o=e.corner();if(o.x<=r.x||o.y<=r.y||i.x>=t.x||i.y>=t.y)return null;var s=fc(r.x,i.x),c=fc(r.y,i.y);return new bt(s,c,Ks(t.x,o.x)-s,Ks(t.y,o.y)-c)},intersectionWithLine:function(e){var s,c,r=this,t=[r.topLine(),r.rightLine(),r.bottomLine(),r.leftLine()],i=[],o=[],f=t.length;for(c=0;c<f;c++)null!==(s=e.intersect(t[c]))&&o.indexOf(s.toString())<0&&(i.push(s),o.push(s.toString()));return i.length>0?i:null},intersectionWithLineFromCenterToPoint:function(e,r){e=new _e(e);var i,t=new _e(this.x+this.width/2,this.y+this.height/2);r&&e.rotate(t,r);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new Pt(t,e),c=o.length-1;c>=0;--c){var f=o[c].intersection(s);if(null!==f){i=f;break}}return i&&r&&i.rotate(t,-r),i},leftLine:function(){return new Pt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new _e(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,r){e=new bt(e),r||(r=e.center());var t,i,o,s,c,f,v,C,M=r.x,x=r.y;t=i=o=s=c=f=v=C=1/0;var G=e.topLeft();G.x<M&&(t=(this.x-M)/(G.x-M)),G.y<x&&(c=(this.y-x)/(G.y-x));var ne=e.bottomRight();ne.x>M&&(i=(this.x+this.width-M)/(ne.x-M)),ne.y>x&&(f=(this.y+this.height-x)/(ne.y-x));var oe=e.topRight();oe.x>M&&(o=(this.x+this.width-M)/(oe.x-M)),oe.y<x&&(v=(this.y-x)/(oe.y-x));var Se=e.bottomLeft();return Se.x<M&&(s=(this.x-M)/(Se.x-M)),Se.y>x&&(C=(this.y+this.height-x)/(Se.y-x)),{sx:Ks(t,i,o,s),sy:Ks(c,f,v,C)}},maxRectUniformScaleToFit:function(e,r){var t=this.maxRectScaleToFit(e,r);return Ks(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,r=this.y,t=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(r=this.y+this.height,i=-this.height),this.x=e,this.y=r,this.width=t,this.height=i,this},offset:function(e,r){return _e.prototype.offset.call(this,e,r)},origin:function(){return new _e(this.x,this.y)},pointNearestToPoint:function(e){if(e=new _e(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new _e(this.x+this.width,e.y);case"left":return new _e(this.x,e.y);case"bottom":return new _e(e.x,this.y+this.height);case"top":return new _e(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new Pt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new _e(this.x+this.width,this.y+this.height/2)},round:function(e){let r=1;if(e)switch(e){case 1:r=10;break;case 2:r=100;break;case 3:r=1e3;break;default:r=Bd(10,e)}return this.x=Cs(this.x*r)/r,this.y=Cs(this.y*r)/r,this.width=Cs(this.width*r)/r,this.height=Cs(this.height*r)/r,this},scale:function(e,r,t){return t=this.origin().scale(e,r,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=r,this},sideNearestToPoint:function(e){e=new _e(e);var t=this.x+this.width-e.x,i=e.y-this.y,s=e.x-this.x,c="left";return t<s&&(s=t,c="right"),i<s&&(s=i,c="top"),this.y+this.height-e.y<s&&(c="bottom"),c},snapToGrid:function(e,r){var t=this.origin().snapToGrid(e,r),i=this.corner().snapToGrid(e,r);return this.x=t.x,this.y=t.y,this.width=i.x-t.x,this.height=i.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Pt(this.topLeft(),this.topRight())},topMiddle:function(){return new _e(this.x+this.width/2,this.y)},topRight:function(){return new _e(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return bt.fromRectUnion(this,e)},update:function(e,r,t,i){return Object(e)===e&&(r=e.y,t=e.width,i=e.height,e=e.x),this.x=e||0,this.y=r||0,this.width=t||0,this.height=i||0,this}},bt.prototype.bottomRight=bt.prototype.corner,bt.prototype.topLeft=bt.prototype.origin,bt.prototype.translate=bt.prototype.offset;const hc=bt;function Pu(e){if(""===(e=e.trim()))return[];const r=[],t=e.split(/\s*,\s*|\s+/),i=t.length;for(let o=0;o<i;o+=2)r.push({x:+t[o],y:+t[o+1]});return r}function Vd(e){const r=e.length;if(0===r)return[];const t=[];for(let i=0;i<r;i++){const o=e[i].clone();t.push(o)}return t}function pc(e){const{abs:r}=Math;var t,i,s,o=e.length;if(0===o)return[];for(t=0;t<o;t++)(void 0===s||e[t].y<s.y||e[t].y===s.y&&e[t].x>s.x)&&(s=e[t]);var c=[];for(t=0;t<o;t++){var f=s.theta(e[t]);0===f&&(f=360),c.push([e[t],t,f])}c.sort(function(vt,Tt){var Et=vt[2]-Tt[2];return 0===Et&&(Et=Tt[1]-vt[1]),Et}),c.length>2&&c.unshift(c[c.length-1]);for(var G,ne,oe,Se,Ie,je,M={},x=[];0!==c.length;)if(ne=(G=c.pop())[0],!M.hasOwnProperty(G[0]+"@@"+G[1]))for(var Ve=!1;!Ve;)if(x.length<2)x.push(G),Ve=!0;else{Se=(oe=x.pop())[0];var L=(je=(Ie=x.pop())[0]).cross(Se,ne);if(L<0)x.push(Ie),x.push(oe),x.push(G),Ve=!0;else if(0===L){var Q=Se.angleBetween(je,ne);r(Q-180)<1e-10||Se.equals(ne)||je.equals(Se)?(M[oe[0]+"@@"+oe[1]]=Se,x.push(Ie)):r((Q+1)%360-1)<1e-10&&(x.push(Ie),c.push(oe))}else M[oe[0]+"@@"+oe[1]]=Se,x.push(Ie)}x.length>2&&x.pop();var ie,ve=-1;for(i=x.length,t=0;t<i;t++){var Pe=x[t][1];(void 0===ie||Pe<ie)&&(ie=Pe,ve=t)}var Fe=[];if(ve>0){var Ye=x.slice(ve),gt=x.slice(0,ve);Fe=Ye.concat(gt)}else Fe=x;var lt=[];for(i=Fe.length,t=0;t<i;t++)lt.push(Fe[t][0]);return lt}const qn=function(e){return this instanceof qn?"string"==typeof e?new qn.parse(e):void(this.points=Array.isArray(e)?e.map(_e):[]):new qn(e)};qn.parse=function(e){return new qn(Pu(e))},qn.fromRect=function(e){return new qn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},qn.prototype={type:en.Polyline,bbox:function(){var e=1/0,r=-1/0,t=1/0,i=-1/0,o=this.points,s=o.length;if(0===s)return null;for(var c=0;c<s;c++){var f=o[c],v=f.x,C=f.y;v<e&&(e=v),v>r&&(r=v),C<t&&(t=C),C>i&&(i=C)}return new bt(e,t,r-e,i-t)},clone:function(){return new qn(Vd(this.points))},closestPoint:function(e){var r=this.closestPointLength(e);return this.pointAtLength(r)},closestPointLength:function(e){var r=this.lengthPoints(),t=r.length;if(0===t||1===t)return 0;for(var i,o=1/0,s=0,c=t-1,f=0;f<c;f++){var v=new Pt(r[f],r[f+1]),C=v.length(),M=v.closestPointNormalizedLength(e),G=v.pointAt(M).squaredDistance(e);G<o&&(o=G,i=s+M*C),s+=C}return i},closestPointNormalizedLength:function(e){var r=this.closestPointLength(e);if(0===r)return 0;var t=this.length();return 0===t?0:r/t},closestPointTangent:function(e){var r=this.closestPointLength(e);return this.tangentAtLength(r)},containsPoint:function(e){var r=this.points,t=r.length;if(0===t)return!1;for(var i=e.x,o=e.y,s=t-1,c=0,f=0,v=new Pt,C=new Pt,M=new _e;c<t;c++){var x=r[s],G=r[c];if(e.equals(x)||(v.start=x,v.end=G,v.containsPoint(e)))return!0;if(o<=x.y&&o>G.y||o>x.y&&o<=G.y){var ne=x.x-i>G.x-i?x.x-i:G.x-i;ne>=0&&(M.x=i+ne,M.y=o,C.start=e,C.end=M,v.intersect(C)&&f++)}s=c}return f%2==1},close:function(){const{start:e,end:r,points:t}=this;return e&&r&&!e.equals(r)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new qn(pc(this.points))},equals:function(e){if(!e)return!1;var r=this.points,i=r.length;if(e.points.length!==i)return!1;for(var o=0;o<i;o++)if(!r[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var r=new Pt(e),t=[],i=this.lengthPoints(),o=new Pt,s=0,c=i.length-1;s<c;s++){o.start=i[s],o.end=i[s+1];var f=r.intersectionWithLine(o);f&&t.push(f[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,r=e.length;if(0===r)return!1;for(var t=new Pt,i=r-1,o=0;o<i;o++)if(t.start=e[o],t.end=e[o+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),r=e.length;if(0===r)return 0;for(var t=0,i=r-1,o=0;o<i;o++)t+=e[o].distance(e[o+1]);return t},pointAt:function(e){var r=this.lengthPoints(),t=r.length;if(0===t)return null;if(1===t||e<=0)return r[0].clone();if(e>=1)return r[t-1].clone();var i=this.length();return this.pointAtLength(i*e)},pointAtLength:function(e){var r=this.lengthPoints(),t=r.length;if(0===t)return null;if(1===t)return r[0].clone();var i=!0;e<0&&(i=!1,e=-e);for(var o=0,s=t-1,c=0;c<s;c++){var f=i?c:s-1-c,v=r[f],C=r[f+1],M=new Pt(v,C),x=v.distance(C);if(e<=o+x)return M.pointAtLength((i?1:-1)*(e-o));o+=x}return(i?r[t-1]:r[0]).clone()},round:function(e){for(var r=this.points,t=r.length,i=0;i<t;i++)r[i].round(e);return this},scale:function(e,r,t){for(var i=this.points,o=i.length,s=0;s<o;s++)i[s].scale(e,r,t);return this},simplify:function(e={}){const r=this.points;if(r.length<3)return this;const t=e.threshold||0;let i=0;for(;r[i+2];){const s=i+1,v=r[s];new Pt(r[i],r[i+2]).closestPoint(v).distance(v)<=t?r.splice(s,1):i+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var i=this.length();return this.tangentAtLength(i*e)},tangentAtLength:function(e){var r=this.lengthPoints(),t=r.length;if(0===t||1===t)return null;var i=!0;e<0&&(i=!1,e=-e);for(var o,s=0,c=t-1,f=0;f<c;f++){var v=i?f:c-1-f,C=r[v],M=r[v+1],x=new Pt(C,M),G=C.distance(M);if(x.isDifferentiable()){if(e<=s+G)return x.tangentAtLength((i?1:-1)*(e-s));o=x}s+=G}return o?o.tangentAt(i?1:0):null},toString:function(){return this.points+""},translate:function(e,r){for(var t=this.points,i=t.length,o=0;o<i;o++)t[o].translate(e,r);return this},serialize:function(){var e=this.points,r=e.length;if(0===r)return"";for(var t="",i=0;i<r;i++){var o=e[i];t+=o.x+","+o.y+" "}return t.trim()}},Object.defineProperty(qn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(qn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var r=this.points.length;return 0===r?null:this.points[r-1]}});const{abs:Mu,sqrt:mc,min:Hd,max:gc,pow:Ro}=Math,Wn=function(e,r,t,i){return this instanceof Wn?e instanceof Wn?new Wn(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new _e(e),this.controlPoint1=new _e(r),this.controlPoint2=new _e(t),void(this.end=new _e(i))):new Wn(e,r,t,i)};function Qs(e){var r,t,i=[];for(t=arguments.length,r=1;r<t;r++)i.push(arguments[r]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(t=i.length,r=0;r<t;r++){var c,f,s=i[r];for(f in s)s.hasOwnProperty(f)&&(delete o[f],c=Object.getOwnPropertyDescriptor(s,f),Object.defineProperty(o,f,c))}return o}Wn.throughPoints=function(){function r(t){var i=t.length,o=[],s=[],c=2;o[0]=t[0]/c;for(var f=1;f<i;f++)s[f]=1/c,o[f]=(t[f]-o[f-1])/(c=(f<i-1?4:3.5)-s[f]);for(f=1;f<i;f++)o[i-f-1]-=s[i-f]*o[i-f];return o}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var i=function e(t){var c,i=[],o=[],s=t.length-1;if(1==s)return i[0]=new _e((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new _e(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,o];var f=[];for(c=1;c<s-1;c++)f[c]=4*t[c].x+2*t[c+1].x;f[0]=t[0].x+2*t[1].x,f[s-1]=(8*t[s-1].x+t[s].x)/2;var v=r(f);for(c=1;c<s-1;++c)f[c]=4*t[c].y+2*t[c+1].y;f[0]=t[0].y+2*t[1].y,f[s-1]=(8*t[s-1].y+t[s].y)/2;var C=r(f);for(c=0;c<s;c++)i.push(new _e(v[c],C[c])),o.push(c<s-1?new _e(2*t[c+1].x-v[c+1],2*t[c+1].y-C[c+1]):new _e((t[s].x+v[s-1])/2,(t[s].y+C[s-1])/2));return[i,o]}(t),o=[],s=i[0].length,c=0;c<s;c++){var f=new _e(i[0][c].x,i[0][c].y),v=new _e(i[1][c].x,i[1][c].y);o.push(new Wn(t[c],f,v,t[c+1]))}return o}}(),Wn.prototype={type:en.Curve,bbox:function(){for(var Se,Ie,je,Ve,L,z,Q,ie,e=this.start,r=this.controlPoint1,t=this.controlPoint2,i=this.end,o=e.x,s=e.y,c=r.x,f=r.y,v=t.x,C=t.y,M=i.x,x=i.y,G=new Array,ne=new Array,oe=[new Array,new Array],ve=0;ve<2;++ve)if(0===ve?(Ie=6*o-12*c+6*v,Se=-3*o+9*c-9*v+3*M,je=3*c-3*o):(Ie=6*s-12*f+6*C,Se=-3*s+9*f-9*C+3*x,je=3*f-3*s),Mu(Se)<1e-12){if(Mu(Ie)<1e-12)continue;0<(Ve=-je/Ie)&&Ve<1&&ne.push(Ve)}else ie=mc(Q=Ie*Ie-4*je*Se),!(Q<0)&&(0<(L=(-Ie+ie)/(2*Se))&&L<1&&ne.push(L),0<(z=(-Ie-ie)/(2*Se))&&z<1&&ne.push(z));for(var Ye,gt,lt,Pe=ne.length,Fe=Pe;Pe--;)oe[0][Pe]=gt=(Ye=1-(Ve=ne[Pe]))*Ye*Ye*o+3*Ye*Ye*Ve*c+3*Ye*Ve*Ve*v+Ve*Ve*Ve*M,oe[1][Pe]=lt=Ye*Ye*Ye*s+3*Ye*Ye*Ve*f+3*Ye*Ve*Ve*C+Ve*Ve*Ve*x,G[Pe]={X:gt,Y:lt};ne[Fe]=0,ne[Fe+1]=1,G[Fe]={X:o,Y:s},G[Fe+1]={X:M,Y:x},oe[0][Fe]=o,oe[1][Fe]=s,oe[0][Fe+1]=M,oe[1][Fe+1]=x,ne.length=Fe+2,oe[0].length=Fe+2,oe[1].length=Fe+2,G.length=Fe+2;var vt=Hd.apply(null,oe[0]),Tt=Hd.apply(null,oe[1]),Et=gc.apply(null,oe[0]),Rt=gc.apply(null,oe[1]);return new bt(vt,Tt,Et-vt,Rt-Tt)},clone:function(){return new Wn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,r){return this.pointAtT(this.closestPointT(e,r))},closestPointLength:function(e,r){var t=void 0===(r=r||{}).precision?this.PRECISION:r.precision,o={precision:t,subdivisions:void 0===r.subdivisions?this.getSubdivisions({precision:t}):r.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,r){var t=void 0===(r=r||{}).precision?this.PRECISION:r.precision,o={precision:t,subdivisions:void 0===r.subdivisions?this.getSubdivisions({precision:t}):r.subdivisions},s=this.closestPointLength(e,o);if(!s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,r){for(var o,s,c,f,v,C,M,t=void 0===(r=r||{}).precision?this.PRECISION:r.precision,i=void 0===r.subdivisions?this.getSubdivisions({precision:t}):r.subdivisions,x=i.length,G=x?1/x:0,ne=0;ne<x;ne++){var oe=i[ne],Se=oe.start.distance(e),Ie=oe.end.distance(e),je=Se+Ie;(!M||je<M)&&(o=oe,s=ne*G,c=(ne+1)*G,f=Se,v=Ie,C=oe.start.distance(oe.end),M=je)}for(var Ve=Ro(10,-t);;){var L=f?Mu(f-v)/f:0,z=v?Mu(f-v)/v:0;if(L<Ve||z<Ve||!f||f<C*Ve||!v||v<C*Ve)return f<=v?s:c;var Fe=o.divide(.5);G/=2;var Ye=Fe[0].start.distance(e),gt=Fe[0].end.distance(e),lt=Ye+gt,vt=Fe[1].start.distance(e),Tt=Fe[1].end.distance(e);lt<=vt+Tt?(o=Fe[0],c-=G,f=Ye,v=gt):(o=Fe[1],s+=G,f=vt,v=Tt)}},closestPointTangent:function(e,r){return this.tangentAtT(this.closestPointT(e,r))},containsPoint:function(e,r){return this.toPolyline(r).containsPoint(e)},divideAt:function(e,r){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,r);return this.divideAtT(t)},divideAtLength:function(e,r){var t=this.tAtLength(e,r);return this.divideAtT(t)},divideAtT:function(e){var r=this.start,t=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return[new Wn(r,r,r,r),new Wn(r,t,i,o)];if(e>=1)return[new Wn(r,t,i,o),new Wn(o,o,o,o)];var s=this.getSkeletonPoints(e),v=s.divider,C=s.dividerControlPoint1,M=s.dividerControlPoint2;return[new Wn(r,s.startControlPoint1,s.startControlPoint2,v),new Wn(v,C,M,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var r=this.start,t=this.controlPoint1,i=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:r.clone(),startControlPoint2:r.clone(),divider:r.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:i.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var s=new Pt(r,t).pointAt(e),c=new Pt(t,i).pointAt(e),f=new Pt(i,o).pointAt(e),v=new Pt(s,c).pointAt(e),C=new Pt(c,f).pointAt(e);return{startControlPoint1:s,startControlPoint2:v,divider:new Pt(v,C).pointAt(e),dividerControlPoint1:C,dividerControlPoint2:f}},getSubdivisions:function(e){var r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new Wn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===r)return t;for(var i=this.endpointDistance(),o=Ro(10,-r),s=0;;){s+=1;for(var c=[],f=t.length,v=0;v<f;v++){var M=t[v].divide(.5);c.push(M[0],M[1])}for(var x=0,G=c.length,ne=0;ne<G;ne++)x+=c[ne].endpointDistance();if(s>1&&(0!==x?(x-i)/x:0)<o)return c;t=c,i=x}},isDifferentiable:function(){var r=this.controlPoint1,t=this.controlPoint2,i=this.end;return!(this.start.equals(r)&&r.equals(t)&&t.equals(i))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,i=0,o=t.length,s=0;s<o;s++)i+=t[s].endpointDistance();return i},lengthAtT:function(e,r){if(e<=0)return 0;var t=void 0===(r=r||{}).precision?this.PRECISION:r.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,r){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,r);return this.pointAtT(t)},pointAtLength:function(e,r){var t=this.tAtLength(e,r);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,r,t){return this.start.scale(e,r,t),this.controlPoint1.scale(e,r,t),this.controlPoint2.scale(e,r,t),this.end.scale(e,r,t),this},tangentAt:function(e,r){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,r);return this.tangentAtT(t)},tangentAtLength:function(e,r){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,r);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.getSkeletonPoints(e),t=r.startControlPoint2,o=r.divider,s=new Pt(t,r.dividerControlPoint1);return s.translate(o.x-t.x,o.y-t.y),s},tAt:function(e,r){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(r=r||{}).precision?this.PRECISION:r.precision,o={precision:t,subdivisions:void 0===r.subdivisions?this.getSubdivisions({precision:t}):r.subdivisions},s=this.length(o);return this.tAtLength(s*e,o)},tAtLength:function(e,r){var t=!0;e<0&&(t=!1,e=-e);for(var c,f,v,C,M,i=void 0===(r=r||{}).precision?this.PRECISION:r.precision,o=void 0===r.subdivisions?this.getSubdivisions({precision:i}):r.subdivisions,s={precision:i,subdivisions:o},x=0,G=o.length,ne=1/G,oe=0;oe<G;oe++){var Se=t?oe:G-1-oe,Ie=o[oe],je=Ie.endpointDistance();if(e<=x+je){c=Ie,f=Se*ne,v=(Se+1)*ne,C=t?e-x:je+x-e,M=t?je+x-e:e-x;break}x+=je}if(!c)return t?1:0;for(var Ve=this.length(s),L=Ro(10,-i);;){if((0!==Ve?C/Ve:0)<L)return f;if((0!==Ve?M/Ve:0)<L)return v;var Q,ie,ve=c.divide(.5);ne/=2;var Pe=ve[0].endpointDistance(),Fe=ve[1].endpointDistance();C<=Pe?(c=ve[0],v-=ne,ie=Pe-(Q=C)):(c=ve[1],f+=ne,ie=Fe-(Q=C-Pe)),C=Q,M=ie}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,i=[t[0].start.clone()],o=t.length,s=0;s<o;s++)i.push(t[s].end.clone());return i},toPolyline:function(e){return new qn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,r){return this.start.translate(e,r),this.controlPoint1.translate(e,r),this.controlPoint2.translate(e,r),this.end.translate(e,r),this}},Wn.prototype.divide=Wn.prototype.divideAtT;const Lt=function(e){if(!(this instanceof Lt))return new Lt(e);if("string"==typeof e)return new Lt.parse(e);var r,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(f,v){return f.concat(v)},[])).length,e[0].isSegment)for(r=0;r<t;r++)this.appendSegment(e[r]);else{var o=null;for(r=0;r<t;r++){var s=e[r];if(!(s instanceof Pt||s instanceof Wn))throw new Error("Cannot construct a path segment from the provided object.");0===r&&this.appendSegment(Lt.createSegment("M",s.start)),o&&!o.end.equals(s.start)&&this.appendSegment(Lt.createSegment("M",s.start)),s instanceof Pt?this.appendSegment(Lt.createSegment("L",s.end)):s instanceof Wn&&this.appendSegment(Lt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),o=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof Pt)this.appendSegment(Lt.createSegment("M",e.start)),this.appendSegment(Lt.createSegment("L",e.end));else if(e instanceof Wn)this.appendSegment(Lt.createSegment("M",e.start)),this.appendSegment(Lt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof qn))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,r=0;r<t;r++){this.appendSegment(Lt.createSegment(0===r?"M":"L",e.points[r]))}}};function No(e,r){return r.unshift(null),new(Function.prototype.bind.apply(e,r))}Lt.parse=function(e){if(!e)return new Lt;for(var r=new Lt,i=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=i.length,s=0;s<o;s++){var v=i[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),C=Lt.createSegment.apply(this,v);r.appendSegment(C)}return r},Lt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var r=Lt.segmentTypes[e];if(!r)throw new Error(e+" is not a recognized path segment type.");for(var t=[],i=arguments.length,o=1;o<i;o++)t.push(arguments[o]);return No(r,t)},Lt.prototype={type:en.Path,appendSegment:function(e){var i,r=this.segments,t=r.length,o=0!==t?r[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(C,M){return C.concat(M)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,f=0;f<c;f++)i=this.prepareSegment(e[f],o,null),r.push(i),o=i}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,null),r.push(i)}},bbox:function(){var e=this.segments,r=e.length;if(0===r)return null;for(var t,i=0;i<r;i++){var o=e[i];if(o.isVisible){var s=o.bbox();t=t?t.union(s):s}}if(t)return t;var c=e[r-1];return new bt(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,r=e.length,t=new Lt,i=0;i<r;i++){var o=e[i].clone();t.appendSegment(o)}return t},closestPoint:function(e,r){var t=this.closestPointT(e,r);return t?this.pointAtT(t):null},closestPointLength:function(e,r){var t=void 0===(r=r||{}).precision?this.PRECISION:r.precision,o={precision:t,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):r.segmentSubdivisions},s=this.closestPointT(e,o);return s?this.lengthAtT(s,o):0},closestPointNormalizedLength:function(e,r){var t=void 0===(r=r||{}).precision?this.PRECISION:r.precision,o={precision:t,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):r.segmentSubdivisions},s=this.closestPointLength(e,o);if(0===s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,r){var t=this.segments,i=t.length;if(0===i)return null;for(var c,o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions,f=1/0,v=0;v<i;v++){var C=t[v];if(C.isVisible){var x=C.closestPointT(e,{precision:o,subdivisions:s[v]}),G=C.pointAtT(x),ne=new Pt(G,e).squaredLength();ne<f&&(c={segmentIndex:v,value:x},f=ne)}}return c||{segmentIndex:i-1,value:1}},closestPointTangent:function(e,r){var t=this.segments,i=t.length;if(0===i)return null;for(var c,o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions,f=1/0,v=0;v<i;v++){var C=t[v],M=s[v];if(C.isDifferentiable()){var x=C.closestPointT(e,{precision:o,subdivisions:M}),G=C.pointAtT(x),ne=new Pt(G,e).squaredLength();ne<f&&(c=C.tangentAtT(x),f=ne)}}return c||null},containsPoint:function(e,r){var t=this.toPolylines(r);if(!t)return!1;for(var i=t.length,o=0,s=0;s<i;s++)t[s].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,r){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c={precision:o,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions},f=this.length(c);return this.divideAtLength(f*e,c)},divideAtLength:function(e,r){var t=this.segments.length;if(0===t)return null;var i=!0;e<0&&(i=!1,e=-e);var c,f,C,M,x,G,o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,s=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions,v=0;for(c=0;c<t;c++){var oe=i?c:t-1-c;f=this.getSegment(oe);var Se=s[oe],Ie=f.length({precision:o,subdivisions:Se});if(f.isDifferentiable()&&(x=f,G=oe,e<=v+Ie)){M=oe,C=f.divideAtLength((i?1:-1)*(e-v),{precision:o,subdivisions:Se});break}v+=Ie}if(!x)return null;C||(M=G,C=x.divideAtT(i?1:0));var je=this.clone();je.replaceSegment(M,C);var Ve=M,L=M+1,z=M+2;C[0].isDifferentiable()||(je.removeSegment(Ve),L-=1,z-=1);var Q=je.getSegment(L).start;je.insertSegment(L,Lt.createSegment("M",Q)),z+=1,C[1].isDifferentiable()||(je.removeSegment(z-1),z-=1);var ie=z-Ve-1;for(c=z;c<je.segments.length;c++){var ve=this.getSegment(c-ie);if("Z"===(f=je.getSegment(c)).type&&!ve.subpathStartSegment.end.equals(f.subpathStartSegment.end)){var Pe=Lt.createSegment("L",ve.end);je.replaceSegment(c,Pe)}}return[new Lt(je.segments.slice(0,L)),new Lt(je.segments.slice(L))]},equals:function(e){if(!e)return!1;var r=this.segments,t=e.segments,i=r.length;if(t.length!==i)return!1;for(var o=0;o<i;o++){var s=r[o],c=t[o];if(s.type!==c.type||!s.equals(c))return!1}return!0},getSegment:function(e){var r=this.segments,t=r.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return r[e]},getSegmentSubdivisions:function(e){for(var r=this.segments,t=r.length,i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],s=0;s<t;s++){var f=r[s].getSubdivisions({precision:i});o.push(f)}return o},getSubpaths:function(){const r=this.clone().validate().segments,t=r.length,i=[];for(let o=0;o<t;o++){const s=r[o];s.isSubpathStart?i.push(new Lt(s)):i[i.length-1].appendSegment(s)}return i},insertSegment:function(e,r){var t=this.segments,i=t.length;if(e<0&&(e=i+e+1),e>i||e<0)throw new Error("Index out of range.");var o,s=null,c=null;if(0!==i&&(c=e>=1?(s=t[e-1]).nextSegment:t[0]),Array.isArray(r)){if(!(r=r.reduce(function(M,x){return M.concat(x)},[]))[0].isSegment)throw new Error("Segments required.");for(var f=r.length,v=0;v<f;v++)o=this.prepareSegment(r[v],s,c),t.splice(e+v,0,o),s=o}else{if(!r||!r.isSegment)throw new Error("Segment required.");o=this.prepareSegment(r,s,c),t.splice(e,0,o)}},intersectionWithLine:function(e,r){var t=null,i=this.toPolylines(r);if(!i)return null;for(var o=0,s=i.length;o<s;o++){var f=e.intersect(i[o]);f&&(t||(t=[]),Array.isArray(f)?Array.prototype.push.apply(t,f):t.push(f))}return t},isDifferentiable:function(){for(var e=this.segments,r=e.length,t=0;t<r;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var r=this.segments,t=r.length;if(0===t)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=0,c=0;c<t;c++)s+=r[c].length({subdivisions:o[c]});return s},lengthAtT:function(e,r){var t=this.segments,i=t.length;if(0===i)return 0;var o=e.segmentIndex;if(o<0)return 0;var s=e.value;o>=i?(o=i-1,s=1):s<0?s=0:s>1&&(s=1);for(var c=void 0===(r=r||{}).precision?this.PRECISION:r.precision,f=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):r.segmentSubdivisions,C=0,M=0;M<o;M++){var x=t[M];C+=x.length({precisison:c,subdivisions:f[M]})}return C+(x=t[o]).lengthAtT(s,{precisison:c,subdivisions:f[o]})},pointAt:function(e,r){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c={precision:o,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions},f=this.length(c);return this.pointAtLength(f*e,c)},pointAtLength:function(e,r){var t=this.segments,i=t.length;if(0===i)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var f,s=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):r.segmentSubdivisions,v=0,C=0;C<i;C++){var M=o?C:i-1-C,x=t[M],G=c[M],ne=x.length({precision:s,subdivisions:G});if(x.isVisible){if(e<=v+ne)return x.pointAtLength((o?1:-1)*(e-v),{precision:s,subdivisions:G});f=x}v+=ne}return f?o?f.end:f.start:t[i-1].end.clone()},pointAtT:function(e){var r=this.segments,t=r.length;if(0===t)return null;var i=e.segmentIndex;if(i<0)return r[0].pointAtT(0);if(i>=t)return r[t-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),r[i].pointAtT(o)},PRECISION:3,prepareSegment:function(e,r,t){e.previousSegment=r,e.nextSegment=t,r&&(r.nextSegment=e),t&&(t.previousSegment=e);var i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=t),i&&this.updateSubpathStartSegment(i),e},removeSegment:function(e){var r=this.segments,t=r.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var i=r.splice(e,1)[0],o=i.previousSegment,s=i.nextSegment;o&&(o.nextSegment=s),s&&(s.previousSegment=o),i.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,r){var t=this.segments,i=t.length;if(0===i)throw new Error("Path has no segments.");if(e<0&&(e=i+e),e>=i||e<0)throw new Error("Index out of range.");var o,s=t[e],c=s.previousSegment,f=s.nextSegment,v=s.isSubpathStart;if(Array.isArray(r)){if(!(r=r.reduce(function(G,ne){return G.concat(ne)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var C=r.length,M=0;M<C;M++)o=this.prepareSegment(r[M],c,f),t.splice(e+M,0,o),c=o,v&&o.isSubpathStart&&(v=!1)}else{if(!r||!r.isSegment)throw new Error("Segment required.");o=this.prepareSegment(r,c,f),t.splice(e,1,o),v&&o.isSubpathStart&&(v=!1)}v&&f&&this.updateSubpathStartSegment(f)},round:function(e){for(var r=this.segments,t=r.length,i=0;i<t;i++)r[i].round(e);return this},scale:function(e,r,t){for(var i=this.segments,o=i.length,s=0;s<o;s++)i[s].scale(e,r,t);return this},segmentAt:function(e,r){var t=this.segmentIndexAt(e,r);return t?this.getSegment(t):null},segmentAtLength:function(e,r){var t=this.segmentIndexAtLength(e,r);return t?this.getSegment(t):null},segmentIndexAt:function(e,r){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c={precision:o,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions},f=this.length(c);return this.segmentIndexAtLength(f*e,c)},segmentIndexAtLength:function(e,r){var t=this.segments,i=t.length;if(0===i)return null;var o=!0;e<0&&(o=!1,e=-e);for(var s=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):r.segmentSubdivisions,f=null,v=0,C=0;C<i;C++){var M=o?C:i-1-C,x=t[M],ne=x.length({precision:s,subdivisions:c[M]});if(x.isVisible){if(e<=v+ne)return M;f=M}v+=ne}return f},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,r){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c={precision:o,segmentSubdivisions:void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):r.segmentSubdivisions},f=this.length(c);return this.tangentAtLength(f*e,c)},tangentAtLength:function(e,r){var t=this.segments,i=t.length;if(0===i)return null;var o=!0;e<0&&(o=!1,e=-e);for(var f,s=void 0===(r=r||{}).precision?this.PRECISION:r.precision,c=void 0===r.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):r.segmentSubdivisions,v=0,C=0;C<i;C++){var M=o?C:i-1-C,x=t[M],G=c[M],ne=x.length({precision:s,subdivisions:G});if(x.isDifferentiable()){if(e<=v+ne)return x.tangentAtLength((o?1:-1)*(e-v),{precision:s,subdivisions:G});f=x}v+=ne}return f?f.tangentAtT(o?1:0):null},tangentAtT:function(e){var r=this.segments,t=r.length;if(0===t)return null;var i=e.segmentIndex;if(i<0)return r[0].tangentAtT(0);if(i>=t)return r[t-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),r[i].tangentAtT(o)},toPoints:function(e){var r=this.segments,t=r.length;if(0===t)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=[],c=[],f=0;f<t;f++){var v=r[f];if(v.isVisible){var C=o[f];if(C.length>0){var M=C.map(function(x){return x.start});Array.prototype.push.apply(c,M)}else c.push(v.start)}else c.length>0&&(c.push(r[f-1].end),s.push(c),c=[])}return c.length>0&&(c.push(this.end),s.push(c)),s},toPolylines:function(e){var r=[],t=this.toPoints(e);if(!t)return null;for(var i=0,o=t.length;i<o;i++)r.push(new qn(t[i]));return r},toString:function(){for(var e=this.segments,r=e.length,t="",i=0;i<r;i++)t+=e[i].serialize()+" ";return t.trim()},translate:function(e,r){for(var t=this.segments,i=t.length,o=0;o<i;o++)t[o].translate(e,r);return this},updateSubpathStartSegment:function(e){for(var r=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=r?r.subpathStartSegment:null,r=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Lt.createSegment("M",0,0)),this}},Object.defineProperty(Lt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,r=e.length;if(0===r)return null;for(var t=0;t<r;t++){var i=e[t];if(i.isVisible)return i.start}return e[r-1].end}}),Object.defineProperty(Lt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,r=e.length;if(0===r)return null;for(var t=r-1;t>=0;t--){var i=e[t];if(i.isVisible)return i.end}return e[r-1].end}});var ws={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var r=this.length();return e>=1?r:r*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(ws,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(ws,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(ws,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var fi=function(){for(var e=[],r=arguments.length,t=0;t<r;t++)e.push(arguments[t]);if(!(this instanceof fi))return No(fi,e);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var i;if(e[0]instanceof Pt){if(1===r)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===r)return this.end=new _e(+e[0],+e[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(i=[],t=0;t<r;t+=2)o=e.slice(t,t+2),i.push(No(fi,o));return i}if(1===r)return this.end=new _e(e[0]),this;for(i=[],t=0;t<r;t+=1)i.push(new fi(e[t]));return i},aa={clone:function(){return new fi(this.end)},divideAt:function(e){var t=new Pt(this.start,this.end).divideAt(e);return[new fi(t[0]),new fi(t[1])]},divideAtLength:function(e){var t=new Pt(this.start,this.end).divideAtLength(e);return[new fi(t[0]),new fi(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,r,t){return this.end.scale(e,r,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,r){return this.end.translate(e,r),this}};Object.defineProperty(aa,"type",{configurable:!0,enumerable:!0,value:"L"}),fi.prototype=Qs(ws,Pt.prototype,aa);var Li=function(){for(var e=[],r=arguments.length,t=0;t<r;t++)e.push(arguments[t]);if(!(this instanceof Li))return No(Li,e);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var i,s;if(e[0]instanceof Wn){if(1===r)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===r)return this.controlPoint1=new _e(+e[0],+e[1]),this.controlPoint2=new _e(+e[2],+e[3]),this.end=new _e(+e[4],+e[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var o;for(i=[],t=0;t<r;t+=6)o=e.slice(t,t+6),i.push(No(Li,o));return i}if(3===r)return this.controlPoint1=new _e(e[0]),this.controlPoint2=new _e(e[1]),this.end=new _e(e[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(i=[],t=0;t<r;t+=3)s=e.slice(t,t+3),i.push(No(Li,s));return i},gl={clone:function(){return new Li(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,r){var i=new Wn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,r);return[new Li(i[0]),new Li(i[1])]},divideAtLength:function(e,r){var i=new Wn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,r);return[new Li(i[0]),new Li(i[1])]},divideAtT:function(e){var t=new Wn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new Li(t[0]),new Li(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var r=this.controlPoint1,t=this.controlPoint2,i=this.end;return!(this.start.equals(r)&&r.equals(t)&&t.equals(i))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,r,t){return this.controlPoint1.scale(e,r,t),this.controlPoint2.scale(e,r,t),this.end.scale(e,r,t),this},serialize:function(){var e=this.controlPoint1,r=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+r.x+" "+r.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,r){return this.controlPoint1.translate(e,r),this.controlPoint2.translate(e,r),this.end.translate(e,r),this}};Object.defineProperty(gl,"type",{configurable:!0,enumerable:!0,value:"C"}),Li.prototype=Qs(ws,Wn.prototype,gl);var Ea=function(){for(var e=[],r=arguments.length,t=0;t<r;t++)e.push(arguments[t]);if(!(this instanceof Ea))return No(Ea,e);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var i,s;if(e[0]instanceof Pt){if(1===r)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(e[0]instanceof Wn){if(1===r)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===r)return this.end=new _e(+e[0],+e[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(i=[],t=0;t<r;t+=2)o=e.slice(t,t+2),i.push(No(0===t?Ea:fi,o));return i}if(1===r)return this.end=new _e(e[0]),this;for(i=[],t=0;t<r;t+=1)s=e[t],i.push(0===t?new Ea(s):new fi(s));return i},Js={bbox:function(){return null},clone:function(){return new Ea(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,r,t){return this.end.scale(e,r,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,r){return this.end.translate(e,r),this}};Object.defineProperty(Js,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Js,"type",{configurable:!0,enumerable:!0,value:"M"}),Ea.prototype=Qs(ws,Js);var Do=function(){for(var e=[],r=arguments.length,t=0;t<r;t++)e.push(arguments[t]);if(!(this instanceof Do))return No(Do,e);if(r>0)throw new Error("Closepath constructor expects no arguments.");return this},Gt={clone:function(){return new Do},divideAt:function(e){var t=new Pt(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new fi(t[0]):this.clone(),new fi(t[1])]},divideAtLength:function(e){var t=new Pt(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new fi(t[0]):this.clone(),new fi(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Gt,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Gt,"type",{configurable:!0,enumerable:!0,value:"Z"}),Do.prototype=Qs(ws,Pt.prototype,Gt);var vl=Lt.segmentTypes={L:fi,C:Li,M:Ea,Z:Do,z:Do};Lt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(vl).join("")+",.]*$"),Lt.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const vc={curveThroughPoints:function(e){return console.warn("deprecated"),new Lt(Wn.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,r=[],t=[],i=e.length-1;if(1==i)return r[0]=new _e((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new _e(2*r[0].x-e[0].x,2*r[0].y-e[0].y),[r,t];var s=[];for(o=1;o<i-1;o++)s[o]=4*e[o].x+2*e[o+1].x;s[0]=e[0].x+2*e[1].x,s[i-1]=(8*e[i-1].x+e[i].x)/2;var c=this.getFirstControlPoints(s);for(o=1;o<i-1;++o)s[o]=4*e[o].y+2*e[o+1].y;s[0]=e[0].y+2*e[1].y,s[i-1]=(8*e[i-1].y+e[i].y)/2;var f=this.getFirstControlPoints(s);for(o=0;o<i;o++)r.push(new _e(c[o],f[o])),t.push(o<i-1?new _e(2*e[o+1].x-c[o+1],2*e[o+1].y-f[o+1]):new _e((e[i].x+c[i-1])/2,(e[i].y+f[i-1])/2));return[r,t]},getCurveDivider:function(e,r,t,i){console.warn("deprecated");var o=new Wn(e,r,t,i);return function(c){var f=o.divide(c);return[{p0:f[0].start,p1:f[0].controlPoint1,p2:f[0].controlPoint2,p3:f[0].end},{p0:f[1].start,p1:f[1].controlPoint1,p2:f[1].controlPoint2,p3:f[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var r=e.length,t=[],i=[],o=2;t[0]=e[0]/o;for(var s=1;s<r;s++)i[s]=1/o,t[s]=(e[s]-t[s-1])/(o=(s<r-1?4:3.5)-i[s]);for(s=1;s<r;s++)t[r-s-1]-=i[r-s]*t[r-s];return t},getInversionSolver:function(e,r,t,i){console.warn("deprecated");var o=new Wn(e,r,t,i);return function(c){return o.closestPointT(c)}}},Hr=function(e){return this instanceof Hr?"string"==typeof e?new Hr.parse(e):void(this.points=Array.isArray(e)?e.map(_e):[]):new Hr(e)};function jd(e,r,t,i){switch(e.type){case en.Line:if(r.type===en.Line)return Ia(e,r);break;case en.Ellipse:switch(r.type){case en.Line:return _l(e,r);case en.Ellipse:return hi(e,r)}break;case en.Rect:switch(r.type){case en.Line:return zd(e,r);case en.Ellipse:return Ud(e,r);case en.Rect:return yl(e,r)}break;case en.Polyline:switch(r.type){case en.Line:return xl(e,r);case en.Ellipse:return bl(e,r);case en.Rect:return Gd(e,r);case en.Polyline:return $d(e,r)}break;case en.Polygon:switch(r.type){case en.Line:return _c(e,r);case en.Ellipse:return bo(e,r);case en.Rect:return Pi(e,r);case en.Polyline:return Cl(e,r);case en.Polygon:return Wd(e,r)}break;case en.Path:switch(r.type){case en.Line:return wl(e,r,t);case en.Ellipse:return Yd(e,r,t);case en.Rect:return Xd(e,r,t);case en.Polyline:return Ss(e,r,t);case en.Polygon:return Au(e,r,t);case en.Path:return yc(e,r,t,i)}}switch(r.type){case en.Ellipse:case en.Rect:case en.Polyline:case en.Polygon:case en.Path:return jd(r,e,i,t);default:throw Error(`The intersection for ${e} and ${r} could not be found.`)}}function Ia(e,r){const t=e.start.x,i=e.start.y,c=r.start.x,f=r.start.y,M=e.end.x-t,x=e.end.y-i,G=r.end.x-c,ne=r.end.y-f,oe=t-c,Se=i-f,Ie=M*ne-G*x,je=(M*Se-x*oe)/Ie,Ve=(G*Se-ne*oe)/Ie;return je>=0&&je<=1&&Ve>=0&&Ve<=1}function _l(e,r){const t=e.a,i=e.b,o=e.x,s=e.y,c=r.start.x-o,v=r.start.y-s,M=t*t,x=i*i,G=r.end.x-o-c,ne=r.end.y-s-v,oe=G*G/M+ne*ne/x,Se=2*c*G/M+2*v*ne/x,je=Se*Se-4*oe*(c*c/M+v*v/x-1);if(0===je){const Ve=-Se/2/oe;return Ve>=0&&Ve<=1}if(je>0){const Ve=Math.sqrt(je),L=(-Se+Ve)/2/oe,z=(-Se-Ve)/2/oe;return L>=0&&L<=1||z>=0&&z<=1}return!1}function hi(e,r){return function rp(e,r,t,i){const{cos:o,sin:s}=Math,c=s(r),f=o(r),v=s(i),C=o(i),M=c*c,x=f*f,ne=v*v,oe=C*C,Ie=e.a*e.a,je=e.b*e.b,Ve=t.a*t.a,L=t.b*t.b,z=Ie*M+je*x,Q=Ve*ne+L*oe,ie=Ie*x+je*M,ve=Ve*oe+L*ne;let Pe=2*(je-Ie)*(c*f),Fe=2*(L-Ve)*(v*C),Ye=-2*z*e.x-Pe*e.y,gt=-2*Q*t.x-Fe*t.y,lt=-Pe*e.x-2*ie*e.y,vt=-Fe*t.x-2*ve*t.y;const Tt=z*e.x*e.x+ie*e.y*e.y+Pe*e.x*e.y-Ie*je,Et=Q*t.x*t.x+ve*t.y*t.y+Fe*t.x*t.y-Ve*L;Pe/=2,Fe/=2,Ye/=2,gt/=2,lt/=2,vt/=2;const Rt=Pa([[z,Pe,Ye],[Pe,ie,lt],[Ye,lt,Tt]]),ir=Pa([[Q,Fe,gt],[Fe,ve,vt],[gt,vt,Et]]),Yn=.33333333*(Pa([[Q,Pe,Ye],[Fe,ie,lt],[gt,lt,Tt]])+Pa([[z,Fe,Ye],[Pe,ve,lt],[Ye,vt,Tt]])+Pa([[z,Pe,gt],[Pe,ie,vt],[Ye,lt,Et]])),lr=.33333333*(Pa([[z,Fe,gt],[Pe,ve,vt],[Ye,vt,Et]])+Pa([[Q,Pe,gt],[Fe,ie,vt],[gt,lt,Et]])+Pa([[Q,Fe,Ye],[Fe,ve,lt],[gt,vt,Tt]])),jt=Zs([[Rt,Yn],[Yn,lr]]),ln=Zs([[Rt,lr],[Yn,ir]]),Wt=Zs([[Yn,lr],[lr,ir]]);return!(Zs([[2*jt,ln],[ln,2*Wt]])>0&&(lr>0||Yn>0))}(e,0,r,0)}function zd(e,r){const{start:t,end:i}=r,{x:o,y:s,width:c,height:f}=e;return!(t.x>o+c&&i.x>o+c||t.x<o&&i.x<o||t.y>s+f&&i.y>s+f||t.y<s&&i.y<s)&&(!(!e.containsPoint(r.start)&&!e.containsPoint(r.end))||Ia(e.topLine(),r)||Ia(e.rightLine(),r)||Ia(e.bottomLine(),r)||Ia(e.leftLine(),r))}function Ud(e,r){return!!yl(e,bt.fromEllipse(r))&&bo(Hr.fromRect(e),r)}function yl(e,r){return e.x<r.x+r.width&&e.x+e.width>r.x&&e.y<r.y+r.height&&e.y+e.height>r.y}function xl(e,r){return Kd(e,r,{interior:!1})}function bl(e,r){return Qd(e,r,{interior:!1})}function Gd(e,r){return Jd(e,r,{interior:!1})}function $d(e,r){return ku(e,r,{interior:!1})}function _c(e,r){return Kd(e,r,{interior:!0})}function bo(e,r){return Qd(e,r,{interior:!0})}function Pi(e,r){return Jd(e,r,{interior:!0})}function Cl(e,r){return ku(e,r,{interior:!0})}function Wd(e,r){return Sl(e,r,{interior:!0})}function wl(e,r,t){return e.getSubpaths().some(i=>{const[o]=i.toPolylines(t),{type:s}=i.getSegment(-1);return"Z"===s?_c(o,r):xl(o,r)})}function Yd(e,r,t){return e.getSubpaths().some(i=>{const[o]=i.toPolylines(t),{type:s}=i.getSegment(-1);return"Z"===s?bo(o,r):bl(o,r)})}function Xd(e,r,t){return Au(e,Hr.fromRect(r),t)}function Ss(e,r,t){return Zd(e,r,t,{interior:!1})}function Au(e,r,t){return Zd(e,r,t,{interior:!0})}function yc(e,r,t,i){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Au(r,s,i):Ss(r,s,i)})}function Kd(e,r,t={}){const{interior:i=!1}=t;let o;if(i){if(e.containsPoint(r.start))return!0;const{start:f,end:v,points:C}=e;o=v.equals(f)?C:[...C,f]}else o=e.points;const{length:s}=o,c=new Pt;for(let f=0;f<s-1;f++)if(c.start=o[f],c.end=o[f+1],Ia(r,c))return!0;return!1}function Qd(e,r,t={}){const{start:i,end:o,points:s}=e;if(r.containsPoint(i))return!0;let c;const{interior:f=!1}=t;if(f){if(e.containsPoint(r.center()))return!0;c=o.equals(i)?s:[...s,i]}else c=s;const{length:v}=c,C=new Pt;for(let M=0;M<v-1;M++)if(C.start=c[M],C.end=c[M+1],_l(r,C))return!0;return!1}function Jd(e,r,t){return Sl(e,Hr.fromRect(r),t)}function Zd(e,r,t,i){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?Sl(r,s,i):ku(r,s,i)})}function ku(e,r,t={}){const{interior:i=!1}=t;let o;if(i){const{start:v}=r;if(e.containsPoint(v))return!0;o=e.clone().close()}else o=e;const s=r.points,{length:c}=s,f=new Pt;for(let v=0;v<c-1;v++)if(f.start=s[v],f.end=s[v+1],xl(o,f))return!0;return!1}function Sl(e,r,t){return r.containsPoint(e.start)||ku(e,r.clone().close(),t)}function Zs(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Pa(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Hr.parse=function(e){return new Hr(Pu(e))},Hr.fromRect=function(e){return new Hr([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Hr.prototype=Qs(qn.prototype,{type:en.Polygon,clone:function(){return new Hr(Vd(this.points))},convexHull:function(){return new Hr(pc(this.points))},lengthPoints:function(){const{start:e,end:r,points:t}=this;return t.length<=1||e.equals(r)?t:[...t,e.clone()]}});const Ou=m,tt=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var r={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},i=Math,o=i.PI,s=i.atan2,c=i.sqrt,f=i.min,v=i.max,C=i.cos,M=i.sin,x=function(L,z,Q){if(!(this instanceof x))return x.apply(Object.create(x.prototype),arguments);if(L){if(x.isV(L)&&(L=L.node),z=z||{},x.isString(L)){if("svg"===(L=L.trim()).toLowerCase())L=x.createSvgDocument();else if("<"===L[0]){var ie=x.createSvgDocument(L);if(ie.childNodes.length>1){var Pe,Fe,ve=[];for(Pe=0,Fe=ie.childNodes.length;Pe<Fe;Pe++){var Ye=ie.childNodes[Pe];ve.push(new x(document.importNode(Ye,!0)))}return ve}L=document.importNode(ie.firstChild,!0)}else L=document.createElementNS(r.svg,L);x.ensureId(L)}return this.node=L,this.setAttributes(z),Q&&this.append(Q),this}},G=x.prototype;function oe(L,z,Q){Q||(Q={});for(var ie=Q.includeAnnotationIndices,ve=Q.eol,Pe=Q.lineHeight,Fe=Q.baseSize,Ye=0,gt={},lt=z.length-1,vt=0;vt<=lt;vt++){var Tt=z[vt],Et=null;if(x.isObject(Tt)){var Rt=Tt.attrs,ir=x("tspan",Rt),Yn=ir.node,lr=Tt.t;ve&&vt===lt&&(lr+=ve),Yn.textContent=lr;var jt=Rt.class;jt&&ir.addClass(jt),ie&&ir.attr("annotations",Tt.annotations),Et=parseFloat(Rt["font-size"]),isFinite(Et)||(Et=Fe),Et&&Et>Ye&&(Ye=Et)}else ve&&vt===lt&&(Tt+=ve),Yn=document.createTextNode(Tt||" "),Fe&&Fe>Ye&&(Ye=Fe);L.appendChild(Yn)}return Ye&&(gt.maxFontSize=Ye),Pe?gt.lineHeight=Pe:Ye&&(gt.lineHeight=1.2*Ye),gt}Object.defineProperty(G,"id",{enumerable:!0,get:function(){return this.node.id},set:function(L){this.node.id=L}}),G.getTransformToElement=function(L){var z=this.node;if(x.isSVGGraphicsElement(L)&&x.isSVGGraphicsElement(z)){var Q=x.toNode(L).getScreenCTM(),ie=z.getScreenCTM();if(Q&&ie)return Q.inverse().multiply(ie)}return x.createSVGMatrix()},G.transform=function(L,z){var Q=this.node;if(x.isUndefined(L))return x.transformStringToMatrix(this.attr("transform"));if(z&&z.absolute)return this.attr("transform",x.matrixToTransformString(L));var ie=x.createSVGTransform(L);return Q.transform.baseVal.appendItem(ie),this},G.translate=function(L,z,Q){Q=Q||{},z=z||0;var ie=this.attr("transform")||"",ve=x.parseTransformString(ie);return ie=ve.value,x.isUndefined(L)?ve.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(Q.absolute?L:ve.translate.tx+L)+","+(Q.absolute?z:ve.translate.ty+z)+") "+ie).trim()),this)},G.rotate=function(L,z,Q,ie){ie=ie||{};var ve=this.attr("transform")||"",Pe=x.parseTransformString(ve);return ve=Pe.value,x.isUndefined(L)?Pe.rotate:(ve=ve.replace(/rotate\([^)]*\)/g,"").trim(),L%=360,this.attr("transform",(ve+" rotate("+(ie.absolute?L:Pe.rotate.angle+L)+(void 0!==z&&void 0!==Q?","+z+","+Q:"")+")").trim()),this)},G.scale=function(L,z){z=x.isUndefined(z)?L:z;var Q=this.attr("transform")||"",ie=x.parseTransformString(Q);return Q=ie.value,x.isUndefined(L)?ie.scale:(Q=Q.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(Q+" scale("+L+","+z+")").trim()),this)},G.bbox=function(L,z){var Q,ie=this.node,ve=ie.ownerSVGElement;if(!ve)return new bt(0,0,0,0);try{Q=ie.getBBox()}catch(Fe){Q={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(L)return new bt(Q);var Pe=this.getTransformToElement(z||ve);return x.transformRect(Q,Pe)},G.getBBox=function(L){var Q,z={},ie=this.node;if(!ie.ownerSVGElement||!x.isSVGGraphicsElement(ie))return new bt(0,0,0,0);if(L&&(L.target&&(z.target=x.toNode(L.target)),L.recursive&&(z.recursive=L.recursive)),z.recursive){var Fe=this.children(),Ye=Fe.length;if(0===Ye)return this.getBBox({target:z.target,recursive:!1});z.target||(z.target=this);for(var gt=0;gt<Ye;gt++){var vt,lt=Fe[gt];vt=0===lt.children().length?lt.getBBox({target:z.target,recursive:!1}):lt.getBBox({target:z.target,recursive:!0}),Q=Q?Q.union(vt):vt}return Q}try{Q=ie.getBBox()}catch(Tt){Q={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(z.target){var Pe=this.getTransformToElement(z.target);return x.transformRect(Q,Pe)}return new bt(Q)};var Se=/em$/;function Ie(L,z){var Q=parseFloat(L);return Se.test(L)?Q*z:Q}G.text=function(L,z){if(L&&"string"!=typeof L)throw new Error("Vectorizer: text() expects the first argument to be a string.");L=x.sanitizeText(L),z||(z={});var Q=z.displayEmpty,ie=z.eol,ve=z.textPath,Pe=z.textVerticalAnchor,Fe="middle"===Pe||"bottom"===Pe||"top"===Pe,Ye=z.x;void 0===Ye&&(Ye=this.attr("x")||0);var gt=z.includeAnnotationIndices,lt=z.annotations;lt&&!x.isArray(lt)&&(lt=[lt]);var vt=z.lineHeight,Tt="auto"===vt,Et=Tt?"1.5em":vt||"1em";this.empty(),this.attr({"xml:space":"preserve",display:L||Q?null:"none"});var Rt=parseFloat(this.attr("font-size"));Rt||(Rt=16,(Fe||lt)&&this.attr("font-size",Rt));var Yn,ir=document;ve?("string"==typeof ve&&(ve={d:ve}),Yn=function ne(L,z){L||(L={});var Q=x("textPath"),ie=L.d;if(ie&&void 0===L["xlink:href"]){var ve=x("path").attr("d",ie).appendTo(z.defs());Q.attr("xlink:href","#"+ve.id)}return x.isObject(L)&&Q.attr(L),Q.node}(ve,this)):Yn=ir.createDocumentFragment();for(var Wt,lr=0,jt=L.split("\n"),ln=[],Yt=0,Mn=jt.length-1;Yt<=Mn;Yt++){var Hn,or=Et,ar="v-line",Tn=ir.createElementNS(r.svg,"tspan"),Or=jt[Yt];if(Or)if(lt){var Ln=(Hn=oe(Tn,x.annotateString(Or,lt,{offset:-lr,includeAnnotationIndices:gt}),{includeAnnotationIndices:gt,eol:Yt!==Mn&&ie,lineHeight:Tt?null:Et,baseSize:Rt})).lineHeight;Ln&&Tt&&0!==Yt&&(or=Ln),0===Yt&&(Wt=.8*Hn.maxFontSize)}else ie&&Yt!==Mn&&(Or+=ie),Tn.textContent=Or;else{Tn.textContent="-",ar+=" v-empty-line";var $t=Tn.style;$t.fillOpacity=0,$t.strokeOpacity=0,lt&&(Hn={})}Hn&&ln.push(Hn),Yt>0&&Tn.setAttribute("dy",or),(Yt>0||ve)&&Tn.setAttribute("x",Ye),Tn.className.baseVal=ar,Yn.appendChild(Tn),lr+=Or.length+1}if(Fe)if(lt)or=function je(L,z,Q,ie){if(!Array.isArray(z))return 0;var ve=z.length;if(!ve)return 0;for(var Pe=z[0],Fe=Ie(Pe.maxFontSize,Q)||Q,Ye=0,gt=Ie(ie,Q),lt=1;lt<ve;lt++)Ye+=Ie((Pe=z[lt]).lineHeight,Q)||gt;var Et,Tt=Ie(Pe.maxFontSize,Q)||Q;switch(L){case"middle":Et=Fe/2-.15*Tt-Ye/2;break;case"bottom":Et=-.25*Tt-Ye;break;default:Et=.8*Fe}return Et}(Pe,ln,Rt,Et);else if("top"===Pe)or="0.8em";else{var It;switch(Mn>0?(It=parseFloat(Et)||1,It*=Mn,Se.test(Et)||(It/=Rt)):It=0,Pe){case"middle":or=.3-It/2+"em";break;case"bottom":or=-It-.3+"em"}}else 0===Pe?or="0em":Pe?or=Pe:(or=0,null===this.attr("y")&&this.attr("y",Wt||"0.8em"));return Yn.firstChild.setAttribute("dy",or),this.append(Yn),this},G.removeAttr=function(L){var z=x.qualifyAttr(L),Q=this.node;return z.ns?Q.hasAttributeNS(z.ns,z.local)&&Q.removeAttributeNS(z.ns,z.local):Q.hasAttribute(L)&&Q.removeAttribute(L),this},G.attr=function(L,z){if(x.isUndefined(L)){for(var Q=this.node.attributes,ie={},ve=0;ve<Q.length;ve++)ie[Q[ve].name]=Q[ve].value;return ie}if(x.isString(L)&&x.isUndefined(z))return this.node.getAttribute(L);if("object"==typeof L)for(var Pe in L)L.hasOwnProperty(Pe)&&this.setAttribute(Pe,L[Pe]);else this.setAttribute(L,z);return this},G.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",x.normalizePathData(this.attr("d"))),this},G.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},G.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},G.setAttributes=function(L){for(var z in L)L.hasOwnProperty(z)&&this.setAttribute(z,L[z]);return this},G.append=function(L){x.isArray(L)||(L=[L]);for(var z=0,Q=L.length;z<Q;z++)this.node.appendChild(x.toNode(L[z]));return this},G.prepend=function(L){var z=this.node.firstChild;return z?x(z).before(L):this.append(L)},G.before=function(L){var z=this.node,Q=z.parentNode;if(Q){x.isArray(L)||(L=[L]);for(var ie=0,ve=L.length;ie<ve;ie++)Q.insertBefore(x.toNode(L[ie]),z)}return this},G.appendTo=function(L){return x.toNode(L).appendChild(this.node),this},G.svg=function(){return this.node instanceof window.SVGSVGElement?this:x(this.node.ownerSVGElement)},G.tagName=function(){return this.node.tagName.toUpperCase()},G.defs=function(){var L=this.svg()||this,z=L.node.getElementsByTagName("defs")[0];return z?x(z):x("defs").appendTo(L)},G.clone=function(){var L=x(this.node.cloneNode(!0));return L.node.id=x.uniqueId(),L},G.findOne=function(L){var z=this.node.querySelector(L);return z?x(z):void 0},G.find=function(L){var z=[],Q=this.node.querySelectorAll(L);if(Q)for(var ie=0;ie<Q.length;ie++)z.push(x(Q[ie]));return z},G.children=function(){for(var L=this.node.childNodes,z=[],Q=0;Q<L.length;Q++)1===L[Q].nodeType&&z.push(x(L[Q]));return z},G.parent=function(){return x(this.node.parentNode)||null},G.index=function(){for(var L=0,z=this.node.previousSibling;z;)1===z.nodeType&&L++,z=z.previousSibling;return L},G.findParentByClass=function(L,z){for(var Q=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==z&&ie!==Q;){var ve=x(ie);if(ve.hasClass(L))return ve;ie=ie.parentNode}return null},G.contains=function(L){var z=this.node,Q=x.toNode(L),ie=Q&&Q.parentNode;return z===ie||!!(ie&&1===ie.nodeType&&16&z.compareDocumentPosition(ie))},G.toLocalPoint=function(L,z){var Q=this.svg().node,ie=Q.createSVGPoint();ie.x=L,ie.y=z;try{var ve=ie.matrixTransform(Q.getScreenCTM().inverse()),Pe=this.getTransformToElement(Q).inverse()}catch(Fe){return ie}return ve.matrixTransform(Pe)},G.translateCenterToPoint=function(L){var Q=this.getBBox({target:this.svg()}).center();return this.translate(L.x-Q.x,L.y-Q.y),this},G.translateAndAutoOrient=function(L,z,Q){L=new _e(L),z=new _e(z),Q||(Q=this.svg());var ie=this.scale();this.attr("transform","");var ve=this.getBBox({target:Q}).scale(ie.sx,ie.sy),Pe=x.createSVGTransform();Pe.setTranslate(-ve.x-ve.width/2,-ve.y-ve.height/2);var Fe=x.createSVGTransform(),Ye=L.angleBetween(z,L.clone().offset(1,0));Ye&&Fe.setRotate(Ye,0,0);var gt=x.createSVGTransform(),lt=L.clone().move(z,ve.width/2);gt.setTranslate(2*L.x-lt.x,2*L.y-lt.y);var vt=this.getTransformToElement(Q),Tt=x.createSVGTransform();return Tt.setMatrix(gt.matrix.multiply(Fe.matrix.multiply(Pe.matrix.multiply(vt.scale(ie.sx,ie.sy))))),this.attr("transform",x.matrixToTransformString(Tt.matrix)),this},G.animateAlongPath=function(L,z){z=x.toNode(z);var Q=x.ensureId(z),ie=x("animateMotion",L),ve=x("mpath",{"xlink:href":"#"+Q});ie.append(ve),this.append(ie);try{ie.node.beginElement()}catch(Et){if("fake"===document.documentElement.getAttribute("smiling")){var Pe=ie.node;Pe.animators=[];var Fe=Pe.getAttribute("id");Fe&&(id2anim[Fe]=Pe);for(var Ye=getTargets(Pe),gt=0,lt=Ye.length;gt<lt;gt++){var Tt=new Animator(Pe,Ye[gt],gt);animators.push(Tt),Pe.animators[gt]=Tt,Tt.register()}}}return this},G.hasClass=function(L){return new RegExp("(\\s|^)"+L+"(\\s|$)").test(this.node.getAttribute("class"))},G.addClass=function(L){if(L&&!this.hasClass(L)){var z=this.node.getAttribute("class")||"";this.node.setAttribute("class",(z+" "+L).trim())}return this},G.removeClass=function(L){if(L&&this.hasClass(L)){var z=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+L+"(\\s|$)","g"),"$2");this.node.setAttribute("class",z)}return this},G.toggleClass=function(L,z){return(x.isUndefined(z)?this.hasClass(L):!z)?this.removeClass(L):this.addClass(L),this},G.sample=function(L){L=L||1;for(var Pe,z=this.node,Q=z.getTotalLength(),ie=[],ve=0;ve<Q;)Pe=z.getPointAtLength(ve),ie.push({x:Pe.x,y:Pe.y,distance:ve}),ve+=L;return ie},G.convertToPath=function(){var L=x("path");L.attr(this.attr());var z=this.convertToPathData();return z&&L.attr("d",z),L},G.convertToPathData=function(){var L=this.tagName();switch(L){case"PATH":return this.attr("d");case"LINE":return x.convertLineToPathData(this.node);case"POLYGON":return x.convertPolygonToPathData(this.node);case"POLYLINE":return x.convertPolylineToPathData(this.node);case"ELLIPSE":return x.convertEllipseToPathData(this.node);case"CIRCLE":return x.convertCircleToPathData(this.node);case"RECT":return x.convertRectToPathData(this.node)}throw new Error(L+" cannot be converted to PATH.")},x.prototype.toGeometryShape=function(){var L,z,Q,ie,ve,Pe,Fe,Ye,gt,lt,vt,Tt,Et,Rt,ir;switch(this.tagName()){case"RECT":return L=parseFloat(this.attr("x"))||0,z=parseFloat(this.attr("y"))||0,Q=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new bt(L,z,Q,ie);case"CIRCLE":return ve=parseFloat(this.attr("cx"))||0,Pe=parseFloat(this.attr("cy"))||0,Fe=parseFloat(this.attr("r"))||0,new Oi({x:ve,y:Pe},Fe,Fe);case"ELLIPSE":return ve=parseFloat(this.attr("cx"))||0,Pe=parseFloat(this.attr("cy"))||0,Ye=parseFloat(this.attr("rx"))||0,gt=parseFloat(this.attr("ry"))||0,new Oi({x:ve,y:Pe},Ye,gt);case"POLYLINE":return lt=x.getPointsFromSvgNode(this),new qn(lt);case"POLYGON":return(lt=x.getPointsFromSvgNode(this)).length>1&&lt.push(lt[0]),new qn(lt);case"PATH":return vt=this.attr("d"),Lt.isDataSupported(vt)||(vt=x.normalizePathData(vt)),new Lt(vt);case"LINE":return Tt=parseFloat(this.attr("x1"))||0,Rt=parseFloat(this.attr("y1"))||0,Et=parseFloat(this.attr("x2"))||0,ir=parseFloat(this.attr("y2"))||0,new Pt({x:Tt,y:Rt},{x:Et,y:ir})}return this.getBBox()},G.findIntersection=function(L,z){var Q=this.svg().node,ie=this.getBBox({target:z=z||Q}),ve=ie.center();if(ie.intersectionWithLineFromCenterToPoint(L)){var Pe,Fe=this.tagName();if("RECT"===Fe){var Ye=new bt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),gt=this.getTransformToElement(z),lt=x.decomposeMatrix(gt),vt=Q.createSVGTransform();vt.setRotate(-lt.rotation,ve.x,ve.y);var Tt=x.transformRect(Ye,vt.matrix.multiply(gt));Pe=new bt(Tt).intersectionWithLineFromCenterToPoint(L,lt.rotation)}else if("PATH"===Fe||"POLYGON"===Fe||"POLYLINE"===Fe||"CIRCLE"===Fe||"ELLIPSE"===Fe){var lr,jt,ln,Yt,Mn,Rt=("PATH"===Fe?this:this.convertToPath()).sample(),ir=1/0,Yn=[];for(lr=0;lr<Rt.length;lr++)ln=(ln=x.createSVGPoint((jt=Rt[lr]).x,jt.y)).matrixTransform(this.getTransformToElement(z)),(Mn=(jt=new _e(ln)).distance(ve)+(Yt=1.1*jt.distance(L)))<ir?(ir=Mn,Yn=[{sample:jt,refDistance:Yt}]):Mn<ir+1&&Yn.push({sample:jt,refDistance:Yt});Yn.sort(function(or,ar){return or.refDistance-ar.refDistance}),Yn[0]&&(Pe=Yn[0].sample)}return Pe}},G.setAttribute=function(L,z){var Q=this.node;if(null===z)return this.removeAttr(L),this;var ie=x.qualifyAttr(L);return ie.ns?Q.setAttributeNS(ie.ns,L,z):"id"===L?Q.id=z:Q.setAttribute(L,z),this},x.createSvgDocument=function(L){if(L){const Q=`<svg xmlns="${r.svg}" xmlns:xlink="${r.xlink}" version="1.1">${L}</svg>`,{documentElement:ie}=x.parseXML(Q,{async:!1});return ie}const z=document.createElementNS(r.svg,"svg");return z.setAttributeNS(r.xmlns,"xmlns:xlink",r.xlink),z.setAttribute("version","1.1"),z},x.createSVGStyle=function(L){const{node:z}=x("style",{type:"text/css"},[x.createCDATASection(L)]);return z},x.createCDATASection=function(L=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(L)},x.idCounter=0,x.uniqueId=function(){return"v-"+ ++x.idCounter},x.toNode=function(L){return x.isV(L)?L.node:L.nodeName&&L||L[0]},x.ensureId=function(L){return(L=x.toNode(L)).id||(L.id=x.uniqueId())},x.sanitizeText=function(L){return(L||"").replace(/ /g,"\xa0")},x.isUndefined=function(L){return void 0===L},x.isString=function(L){return"string"==typeof L},x.isObject=function(L){return L&&"object"==typeof L},x.isArray=Array.isArray,x.parseXML=function(L,z){var Q;z=z||{};try{var ie=new DOMParser;x.isUndefined(z.async)||(ie.async=z.async),Q=ie.parseFromString(L,"text/xml")}catch(ve){Q=void 0}if(!Q||Q.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+L);return Q},x.qualifyAttr=function(L){if(-1!==L.indexOf(":")){var z=L.split(":");return{ns:r[z[0]],local:z[1]}}return{ns:null,local:L}},x.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,x.transformSeparatorRegex=/[ ,]+/,x.transformationListRegex=/^(\w+)\((.*)\)/,x.transformStringToMatrix=function(L){var z=x.createSVGMatrix(),Q=L&&L.match(x.transformRegex);if(!Q)return z;for(var ie=0,ve=Q.length;ie<ve;ie++){var Fe=Q[ie].match(x.transformationListRegex);if(Fe){var Ye,gt,lt,vt,Tt,Et=x.createSVGMatrix(),Rt=Fe[2].split(x.transformSeparatorRegex);switch(Fe[1].toLowerCase()){case"scale":Ye=parseFloat(Rt[0]),gt=void 0===Rt[1]?Ye:parseFloat(Rt[1]),Et=Et.scaleNonUniform(Ye,gt);break;case"translate":lt=parseFloat(Rt[0]),vt=parseFloat(Rt[1]),Et=Et.translate(lt,vt);break;case"rotate":Tt=parseFloat(Rt[0]),lt=parseFloat(Rt[1])||0,vt=parseFloat(Rt[2])||0,Et=0!==lt||0!==vt?Et.translate(lt,vt).rotate(Tt).translate(-lt,-vt):Et.rotate(Tt);break;case"skewx":Tt=parseFloat(Rt[0]),Et=Et.skewX(Tt);break;case"skewy":Tt=parseFloat(Rt[0]),Et=Et.skewY(Tt);break;case"matrix":Et.a=parseFloat(Rt[0]),Et.b=parseFloat(Rt[1]),Et.c=parseFloat(Rt[2]),Et.d=parseFloat(Rt[3]),Et.e=parseFloat(Rt[4]),Et.f=parseFloat(Rt[5]);break;default:continue}z=z.multiply(Et)}}return z},x.matrixToTransformString=function(L){return L||(L=!0),"matrix("+(void 0!==L.a?L.a:1)+","+(void 0!==L.b?L.b:0)+","+(void 0!==L.c?L.c:0)+","+(void 0!==L.d?L.d:1)+","+(void 0!==L.e?L.e:0)+","+(void 0!==L.f?L.f:0)+")"},x.parseTransformString=function(L){var z,Q,ie;if(L){var ve=x.transformSeparatorRegex;if(L.trim().indexOf("matrix")>=0){var Pe=x.transformStringToMatrix(L),Fe=x.decomposeMatrix(Pe);ie=[Fe.scaleX,Fe.scaleY],Q=[Fe.rotation];var Ye=[];(0!==(z=[Fe.translateX,Fe.translateY])[0]||0!==z[1])&&Ye.push("translate("+z+")"),(1!==ie[0]||1!==ie[1])&&Ye.push("scale("+ie+")"),0!==Q[0]&&Ye.push("rotate("+Q+")"),L=Ye.join(" ")}else{var gt=L.match(/translate\((.*?)\)/);gt&&(z=gt[1].split(ve));var lt=L.match(/rotate\((.*?)\)/);lt&&(Q=lt[1].split(ve));var vt=L.match(/scale\((.*?)\)/);vt&&(ie=vt[1].split(ve))}}var Tt=ie&&ie[0]?parseFloat(ie[0]):1;return{value:L,translate:{tx:z&&z[0]?parseInt(z[0],10):0,ty:z&&z[1]?parseInt(z[1],10):0},rotate:{angle:Q&&Q[0]?parseInt(Q[0],10):0,cx:Q&&Q[1]?parseInt(Q[1],10):void 0,cy:Q&&Q[2]?parseInt(Q[2],10):void 0},scale:{sx:Tt,sy:ie&&ie[1]?parseFloat(ie[1]):Tt}}},x.deltaTransformPoint=function(L,z){return{x:z.x*L.a+z.y*L.c+0,y:z.x*L.b+z.y*L.d+0}},x.decomposeMatrix=function(L){var z=x.deltaTransformPoint(L,{x:0,y:1}),Q=x.deltaTransformPoint(L,{x:1,y:0}),ie=180/o*s(z.y,z.x)-90,ve=180/o*s(Q.y,Q.x);return{translateX:L.e,translateY:L.f,scaleX:c(L.a*L.a+L.b*L.b),scaleY:c(L.c*L.c+L.d*L.d),skewX:ie,skewY:ve,rotation:ie}},x.matrixToScale=function(L){var z,Q,ie,ve;return L?(z=x.isUndefined(L.a)?1:L.a,ve=x.isUndefined(L.d)?1:L.d,Q=L.b,ie=L.c):z=ve=1,{sx:Q?c(z*z+Q*Q):z,sy:ie?c(ie*ie+ve*ve):ve}},x.matrixToRotate=function(L){var z={x:0,y:1};return L&&(z=x.deltaTransformPoint(L,z)),{angle:ci(wu(s(z.y,z.x))-90)}},x.matrixToTranslate=function(L){return{tx:L&&L.e||0,ty:L&&L.f||0}},x.isV=function(L){return L instanceof x},x.isVElement=x.isV,x.isSVGGraphicsElement=function(L){return!!L&&(L=x.toNode(L))instanceof SVGElement&&"function"==typeof L.getScreenCTM};var Ve=x("svg").node;return x.createSVGMatrix=function(L){var z=Ve.createSVGMatrix();for(var Q in L)z[Q]=L[Q];return z},x.createSVGTransform=function(L){return x.isUndefined(L)?Ve.createSVGTransform():(L instanceof SVGMatrix||(L=x.createSVGMatrix(L)),Ve.createSVGTransformFromMatrix(L))},x.createSVGPoint=function(L,z){var Q=Ve.createSVGPoint();return Q.x=L,Q.y=z,Q},x.transformRect=function(L,z){var Q=Ve.createSVGPoint();Q.x=L.x,Q.y=L.y;var ie=Q.matrixTransform(z);Q.x=L.x+L.width,Q.y=L.y;var ve=Q.matrixTransform(z);Q.x=L.x+L.width,Q.y=L.y+L.height;var Pe=Q.matrixTransform(z);Q.x=L.x,Q.y=L.y+L.height;var Fe=Q.matrixTransform(z),Ye=f(ie.x,ve.x,Pe.x,Fe.x),gt=v(ie.x,ve.x,Pe.x,Fe.x),lt=f(ie.y,ve.y,Pe.y,Fe.y),vt=v(ie.y,ve.y,Pe.y,Fe.y);return new bt(Ye,lt,gt-Ye,vt-lt)},x.transformPoint=function(L,z){return new _e(x.createSVGPoint(L.x,L.y).matrixTransform(z))},x.transformLine=function(L,z){return new Pt(x.transformPoint(L.start,z),x.transformPoint(L.end,z))},x.transformPolyline=function(L,z){var Q=L instanceof qn?L.points:L;x.isArray(Q)||(Q=[]);for(var ie=[],ve=0,Pe=Q.length;ve<Pe;ve++)ie[ve]=x.transformPoint(Q[ve],z);return new qn(ie)},x.styleToObject=function(L){for(var z={},Q=L.split(";"),ie=0;ie<Q.length;ie++){var Pe=Q[ie].split("=");z[Pe[0].trim()]=Pe[1].trim()}return z},x.createSlicePathData=function(L,z,Q,ie){var ve=2*o-1e-6,Pe=L,Fe=z,Ye=Q,gt=ie,lt=(gt<Ye&&(lt=Ye,Ye=gt,gt=lt),gt-Ye),vt=lt<o?"0":"1",Tt=C(Ye),Et=M(Ye),Rt=C(gt),ir=M(gt);return lt>=ve?Pe?"M0,"+Fe+"A"+Fe+","+Fe+" 0 1,1 0,"+-Fe+"A"+Fe+","+Fe+" 0 1,1 0,"+Fe+"M0,"+Pe+"A"+Pe+","+Pe+" 0 1,0 0,"+-Pe+"A"+Pe+","+Pe+" 0 1,0 0,"+Pe+"Z":"M0,"+Fe+"A"+Fe+","+Fe+" 0 1,1 0,"+-Fe+"A"+Fe+","+Fe+" 0 1,1 0,"+Fe+"Z":Pe?"M"+Fe*Tt+","+Fe*Et+"A"+Fe+","+Fe+" 0 "+vt+",1 "+Fe*Rt+","+Fe*ir+"L"+Pe*Rt+","+Pe*ir+"A"+Pe+","+Pe+" 0 "+vt+",0 "+Pe*Tt+","+Pe*Et+"Z":"M"+Fe*Tt+","+Fe*Et+"A"+Fe+","+Fe+" 0 "+vt+",1 "+Fe*Rt+","+Fe*ir+"L0,0Z"},x.mergeAttrs=function(L,z){for(var Q in z)L[Q]="class"===Q?L[Q]?L[Q]+" "+z[Q]:z[Q]:"style"===Q?x.isObject(L[Q])&&x.isObject(z[Q])?x.mergeAttrs(L[Q],z[Q]):x.isObject(L[Q])?x.mergeAttrs(L[Q],x.styleToObject(z[Q])):x.isObject(z[Q])?x.mergeAttrs(x.styleToObject(L[Q]),z[Q]):x.mergeAttrs(x.styleToObject(L[Q]),x.styleToObject(z[Q])):z[Q];return L},x.annotateString=function(L,z,Q){z=z||[];for(var Pe,Ye,gt,ie=(Q=Q||{}).offset||0,ve=[],Fe=[],lt=0;lt<L.length;lt++){Ye=Fe[lt]=L[lt];for(var vt=0;vt<z.length;vt++){var Tt=z[vt];lt>=Tt.start+ie&&lt<Tt.end+ie&&(x.isObject(Ye)?Ye.attrs=x.mergeAttrs(x.mergeAttrs({},Ye.attrs),Tt.attrs):Ye=Fe[lt]={t:L[lt],attrs:Tt.attrs},Q.includeAnnotationIndices&&(Ye.annotations||(Ye.annotations=[])).push(vt))}(gt=Fe[lt-1])?x.isObject(Ye)&&x.isObject(gt)?JSON.stringify(Ye.attrs)===JSON.stringify(gt.attrs)?Pe.t+=Ye.t:(ve.push(Pe),Pe=Ye):x.isObject(Ye)||x.isObject(gt)?(ve.push(Pe),Pe=Ye):Pe=(Pe||"")+Ye:Pe=Ye}return Pe&&ve.push(Pe),ve},x.findAnnotationsAtIndex=function(L,z){var Q=[];return L&&L.forEach(function(ie){ie.start<z&&z<=ie.end&&Q.push(ie)}),Q},x.findAnnotationsBetweenIndexes=function(L,z,Q){var ie=[];return L&&L.forEach(function(ve){(z>=ve.start&&z<ve.end||Q>ve.start&&Q<=ve.end||ve.start>=z&&ve.end<Q)&&ie.push(ve)}),ie},x.shiftAnnotations=function(L,z,Q){return L&&L.forEach(function(ie){ie.start<z&&ie.end>=z?ie.end+=Q:ie.start>=z&&(ie.start+=Q,ie.end+=Q)}),L},x.convertLineToPathData=function(L){return["M",(L=x(L)).attr("x1"),L.attr("y1"),"L",L.attr("x2"),L.attr("y2")].join(" ")},x.convertPolygonToPathData=function(L){var z=x.getPointsFromSvgNode(L);return 0===z.length?null:x.svgPointsToPath(z)+" Z"},x.convertPolylineToPathData=function(L){var z=x.getPointsFromSvgNode(L);return 0===z.length?null:x.svgPointsToPath(z)},x.svgPointsToPath=function(L){for(var z=0,Q=L.length;z<Q;z++)L[z]=L[z].x+" "+L[z].y;return"M "+L.join(" L")},x.getPointsFromSvgNode=function(L){var z=[],Q=(L=x.toNode(L)).points;if(Q)for(var ie=0,ve=Q.numberOfItems;ie<ve;ie++)z.push(Q.getItem(ie));return z},x.KAPPA=.551784,x.convertCircleToPathData=function(L){L=x(L);var z=parseFloat(L.attr("cx"))||0,Q=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("r")),ve=ie*x.KAPPA;return["M",z,Q-ie,"C",z+ve,Q-ie,z+ie,Q-ve,z+ie,Q,"C",z+ie,Q+ve,z+ve,Q+ie,z,Q+ie,"C",z-ve,Q+ie,z-ie,Q+ve,z-ie,Q,"C",z-ie,Q-ve,z-ve,Q-ie,z,Q-ie,"Z"].join(" ")},x.convertEllipseToPathData=function(L){L=x(L);var z=parseFloat(L.attr("cx"))||0,Q=parseFloat(L.attr("cy"))||0,ie=parseFloat(L.attr("rx")),ve=parseFloat(L.attr("ry"))||ie,Pe=ie*x.KAPPA,Fe=ve*x.KAPPA;return["M",z,Q-ve,"C",z+Pe,Q-ve,z+ie,Q-Fe,z+ie,Q,"C",z+ie,Q+Fe,z+Pe,Q+ve,z,Q+ve,"C",z-Pe,Q+ve,z-ie,Q+Fe,z-ie,Q,"C",z-ie,Q-Fe,z-Pe,Q-ve,z,Q-ve,"Z"].join(" ")},x.convertRectToPathData=function(L){return L=x(L),x.rectToPath({x:parseFloat(L.attr("x"))||0,y:parseFloat(L.attr("y"))||0,width:parseFloat(L.attr("width"))||0,height:parseFloat(L.attr("height"))||0,rx:parseFloat(L.attr("rx"))||0,ry:parseFloat(L.attr("ry"))||0})},x.rectToPath=function(L){var Q=L.x,ie=L.y,ve=L.width,Pe=L.height,Fe=f(L.rx||L["top-rx"]||0,ve/2),Ye=f(L.rx||L["bottom-rx"]||0,ve/2),gt=f(L.ry||L["top-ry"]||0,Pe/2),lt=f(L.ry||L["bottom-ry"]||0,Pe/2);return(Fe||Ye||gt||lt?["M",Q,ie+gt,"v",Pe-gt-lt,"a",Ye,lt,0,0,0,Ye,lt,"h",ve-2*Ye,"a",Ye,lt,0,0,0,Ye,-lt,"v",-(Pe-lt-gt),"a",Fe,gt,0,0,0,-Fe,-gt,"h",-(ve-2*Fe),"a",Fe,gt,0,0,0,-Fe,gt,"Z"]:["M",Q,ie,"H",Q+ve,"V",ie+Pe,"H",Q,"V",ie,"Z"]).join(" ")},x.normalizePathData=function(){var L="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",z=new RegExp("([a-z])["+L+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+L+"]*,?["+L+"]*)+)","ig"),Q=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+L+"]*,?["+L+"]*","ig"),ie=Math,ve=ie.PI,Pe=ie.sin,Fe=ie.cos,Ye=ie.tan,gt=ie.asin,lt=ie.sqrt,vt=ie.abs;function Tt(jt,ln,Wt,Yt,Mn,or){var ar=.3333333333333333,Tn=2/3;return[ar*jt+Tn*Wt,ar*ln+Tn*Yt,ar*Mn+Tn*Wt,ar*or+Tn*Yt,Mn,or]}function Et(jt,ln,Wt){return{x:jt*Fe(Wt)-ln*Pe(Wt),y:jt*Pe(Wt)+ln*Fe(Wt)}}function Rt(jt,ln,Wt,Yt,Mn,or,ar,Tn,Or,Hn){var It,fn=120*ve/180,Ln=ve/180*(+Mn||0),$t=[];if(Hn)zi=Hn[0],Kr=Hn[1],ed=Hn[2],td=Hn[3];else{ln=(It=Et(jt,ln,-Ln)).y;var ji=((jt=It.x)-(Tn=(It=Et(Tn,Or,-Ln)).x))/2,Zi=(ln-(Or=It.y))/2,As=ji*ji/(Wt*Wt)+Zi*Zi/(Yt*Yt);As>1&&(Wt*=As=lt(As),Yt*=As);var Km=Wt*Wt,Qm=Yt*Yt,Rg=(or==ar?-1:1)*lt(vt((Km*Qm-Km*Zi*Zi-Qm*ji*ji)/(Km*Zi*Zi+Qm*ji*ji))),ed=Rg*Wt*Zi/Yt+(jt+Tn)/2,td=Rg*-Yt*ji/Wt+(ln+Or)/2,zi=gt(((ln-td)/Yt).toFixed(9)),Kr=gt(((Or-td)/Yt).toFixed(9));(zi=jt<ed?ve-zi:zi)<0&&(zi=2*ve+zi),(Kr=Tn<ed?ve-Kr:Kr)<0&&(Kr=2*ve+Kr),ar&&zi>Kr&&(zi-=2*ve),!ar&&Kr>zi&&(Kr-=2*ve)}var Jm=Kr-zi;if(vt(Jm)>fn){var c_=Kr,d_=Tn,f_=Or;$t=Rt(Tn=ed+Wt*Fe(Kr=zi+fn*(ar&&Kr>zi?1:-1)),Or=td+Yt*Pe(Kr),Wt,Yt,Mn,0,ar,d_,f_,[Kr,c_,ed,td])}Jm=Kr-zi;var h_=Fe(zi),p_=Pe(zi),m_=Fe(Kr),g_=Pe(Kr),Ng=Ye(Jm/4),Dg=4/3*(Wt*Ng),Bg=4/3*(Yt*Ng),Vg=[jt,ln],jl=[jt+Dg*p_,ln-Bg*h_],Hg=[Tn+Dg*g_,Or-Bg*m_],jg=[Tn,Or];if(jl[0]=2*Vg[0]-jl[0],jl[1]=2*Vg[1]-jl[1],Hn)return[jl,Hg,jg].concat($t);for(var zg=[],v_=($t=[jl,Hg,jg].concat($t).join().split(",")).length,su=0;su<v_;su++)zg[su]=su%2?Et($t[su-1],$t[su],Ln).y:Et($t[su],$t[su+1],Ln).x;return zg}function lr(jt){var ln=function Yn(jt){if((!Array.isArray(jt)||!Array.isArray(jt&&jt[0]))&&(jt=function ir(jt){if(!jt)return null;var ln={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Wt=[];return String(jt).replace(z,function(Yt,Mn,or){var ar=[],Tn=Mn.toLowerCase();for(or.replace(Q,function(Or,Hn){Hn&&ar.push(+Hn)}),"m"===Tn&&ar.length>2&&(Wt.push([Mn].concat(ar.splice(0,2))),Tn="l",Mn="m"===Mn?"l":"L");ar.length>=ln[Tn]&&(Wt.push([Mn].concat(ar.splice(0,ln[Tn]))),ln[Tn]););}),Wt}(jt)),!jt||!jt.length)return[["M",0,0]];for(var Tn,ln=[],Wt=0,Yt=0,Mn=0,or=0,Or=jt.length,Hn=0;Hn<Or;Hn++){var fn=[];ln.push(fn);var $t,It,Ln=jt[Hn];if((Tn=Ln[0])!=Tn.toUpperCase())switch(fn[0]=Tn.toUpperCase(),fn[0]){case"A":fn[1]=Ln[1],fn[2]=Ln[2],fn[3]=Ln[3],fn[4]=Ln[4],fn[5]=Ln[5],fn[6]=+Ln[6]+Wt,fn[7]=+Ln[7]+Yt;break;case"V":fn[1]=+Ln[1]+Yt;break;case"H":fn[1]=+Ln[1]+Wt;break;case"M":for(Mn=+Ln[1]+Wt,or=+Ln[2]+Yt,$t=Ln.length,It=1;It<$t;It++)fn[It]=+Ln[It]+(It%2?Wt:Yt);break;default:for($t=Ln.length,It=1;It<$t;It++)fn[It]=+Ln[It]+(It%2?Wt:Yt)}else for(var ji=Ln.length,Zi=0;Zi<ji;Zi++)fn[Zi]=Ln[Zi];switch(fn[0]){case"Z":Wt=+Mn,Yt=+or;break;case"H":Wt=fn[1];break;case"V":Yt=fn[1];break;case"M":Mn=fn[fn.length-2],or=fn[fn.length-1],Wt=fn[fn.length-2],Yt=fn[fn.length-1];break;default:Wt=fn[fn.length-2],Yt=fn[fn.length-1]}}return ln}(jt),Wt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Yt($t,It,ji){var Zi,As;if(!$t)return["C",It.x,It.y,It.x,It.y,It.x,It.y];switch($t[0]in{T:1,Q:1}||(It.qx=null,It.qy=null),$t[0]){case"M":It.X=$t[1],It.Y=$t[2];break;case"A":$t=0===parseFloat($t[1])||0===parseFloat($t[2])?["L",$t[6],$t[7]]:["C"].concat(Rt.apply(0,[It.x,It.y].concat($t.slice(1))));break;case"S":"C"===ji||"S"===ji?(Zi=2*It.x-It.bx,As=2*It.y-It.by):(Zi=It.x,As=It.y),$t=["C",Zi,As].concat($t.slice(1));break;case"T":"Q"===ji||"T"===ji?(It.qx=2*It.x-It.qx,It.qy=2*It.y-It.qy):(It.qx=It.x,It.qy=It.y),$t=["C"].concat(Tt(It.x,It.y,It.qx,It.qy,$t[1],$t[2]));break;case"Q":It.qx=$t[1],It.qy=$t[2],$t=["C"].concat(Tt(It.x,It.y,$t[1],$t[2],$t[3],$t[4]));break;case"H":$t=["L"].concat($t[1],It.y);break;case"V":$t=["L"].concat(It.x,$t[1])}return $t}function Mn($t,It){if($t[It].length>7){$t[It].shift();for(var ji=$t[It];ji.length;)or[It]="A",$t.splice(It++,0,["C"].concat(ji.splice(0,6)));$t.splice(It,1),Or=ln.length}}for(var or=[],ar="",Tn="",Or=ln.length,Hn=0;Hn<Or;Hn++){ln[Hn]&&(ar=ln[Hn][0]),"C"!==ar&&(or[Hn]=ar,Hn>0&&(Tn=or[Hn-1])),ln[Hn]=Yt(ln[Hn],Wt,Tn),"A"!==or[Hn]&&"C"===ar&&(or[Hn]="C"),Mn(ln,Hn);var fn=ln[Hn],Ln=fn.length;Wt.x=fn[Ln-2],Wt.y=fn[Ln-1],Wt.bx=parseFloat(fn[Ln-4])||Wt.x,Wt.by=parseFloat(fn[Ln-3])||Wt.y}return(!ln[0][0]||"M"!==ln[0][0])&&ln.unshift(["M",0,0]),ln}return function(jt){return lr(jt).join(",").split(",").join(" ")}}(),x.namespace=r,x.g=g,x}(),ro={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Qi=function(e){return e&&e.toString().split(" ").map(function(r){return r.substr(0,ro.classNamePrefix.length)!==ro.classNamePrefix&&(r=ro.classNamePrefix+r),r}).join(" ")},ef=function(e){return e&&e.toString().split(" ").map(function(r){return r.substr(0,ro.classNamePrefix.length)===ro.classNamePrefix&&(r=r.substr(ro.classNamePrefix.length)),r}).join(" ")},io=function(e,r){for(var t={},i={},o=tt.namespace.svg,s=r||o,c=document.createDocumentFragment(),f=[e,c,s];f.length>0;){s=f.pop();for(var v=f.pop(),C=f.pop(),M=0,x=C.length;M<x;M++){var G=C[M];if(!G.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var ne=G.tagName;G.hasOwnProperty("namespaceURI")&&(s=G.namespaceURI);var oe=document.createElementNS(s,ne),Se=s===o,Ie=Se?tt:rr,je=G.attributes;je&&Ie(oe).attr(je);var Ve=G.style;if(Ve&&rr(oe).css(Ve),G.hasOwnProperty("className")){var L=G.className;Se?oe.className.baseVal=L:oe.className=L}if(G.hasOwnProperty("textContent")&&(oe.textContent=G.textContent),G.hasOwnProperty("selector")){var z=G.selector;if(t[z])throw new Error("json-dom-parser: selector must be unique");t[z]=oe,Ie(oe).attr("joint-selector",z)}if(G.hasOwnProperty("groupSelector")){var Q=G.groupSelector;Array.isArray(Q)||(Q=[Q]);for(var ie=0,ve=Q.length;ie<ve;ie++){var Pe=Q[ie],Fe=i[Pe];Fe||(Fe=i[Pe]=[]),Fe.push(oe)}}v.appendChild(oe);var Ye=G.children;Array.isArray(Ye)&&f.push(Ye,oe,s)}}return{fragment:c,selectors:t,groupSelectors:i}},sa=function(e){let r=0;if(0===e.length)return r;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r&=r;return r},Lu=function(e,r,t){for(var o,i=Array.isArray(r)?r:r.split(t||"/"),s=0,c=i.length;s<c;){if(o=i[s++],Object(e)!==e||!(o in e))return;e=e[o]}return e},xc=function(e,r){return"string"!=typeof r&&"number"!=typeof r&&(r=String(r)),!("constructor"===r&&"function"==typeof e[r]||"__proto__"===r)},tf=function(e,r,t,i){const o=Array.isArray(r)?r:r.split(i||"/"),s=o.length-1;let c=e,f=0;for(;f<s;f++){const v=o[f];if(!xc(c,v))return e;c=c[v]||(c[v]={})}return c[o[s]]=t,e},nf=function(e,r,t){const i=Array.isArray(r)?r:r.split(t||"/"),o=i.length-1;let s=e,c=0;for(;c<o;c++){const f=i[c];if(!xc(s,f))return e;const v=s[f];if(!v)return e;s=v}return delete s[i[o]],e},Fu=function(e){return Fu.id=Fu.id||1,e.id=void 0===e.id?"j_"+Fu.id++:e.id,e.id},ap=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Fi=function(e){var r=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var i in e)void 0===t[i]&&(t[i]=e[i]);r=t}var o=r.target;if(o){var s=o.correspondingUseElement;s&&(r.target=s)}return r},bc=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var r=0;e=function(t){var i=(new Date).getTime(),o=Math.max(0,16-(i-r)),s=setTimeout(function(){t(i+o)},o);return r=i+o,s}}return function(t,i,...o){return e(void 0!==i?t.bind(i,...o):t)}}(),Cc=((r="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,r?e.bind(window):e),Co=function(e){return mi(e)&&"%"===e.slice(-1)},rf=function(e,r){var i=parseFloat(e);if(Number.isNaN(i))return null;var s,o={};if(o.value=i,null==r)s="[A-Za-z]*";else if(Array.isArray(r)){if(0===r.length)return null;s=r.join("|")}else mi(r)&&(s=r);var c=function t(f){var v=new RegExp("(?:\\d+(?:\\.\\d+)*)("+f+")$").exec(e);return v?v[1]:null}(s);return null===c?null:(o.unit=c,o)},qs=function(e){if(Object(e)!==e){var r=0;return isFinite(e)&&(r=+e),{top:r,right:r,bottom:r,left:r}}var t,i,o,s;return t=i=o=s=0,isFinite(e.vertical)&&(t=o=+e.vertical),isFinite(e.horizontal)&&(i=s=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(i=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:t,right:i,bottom:o,left:s}},fp={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var r=e*e,t=r*e;return 4*(e<.5?t:3*(e-r)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var r=0,t=1;;r+=t,t/=2)if(e>=(7-4*r)/11){var i=(11-6*r-11*e)/4;return-i*i+t*t}},reverse:function(e){return function(r){return 1-e(1-r)}},reflect:function(e){return function(r){return.5*(r<.5?e(2*r):2-e(2-2*r))}},clamp:function(e,r,t){return r=r||0,t=t||1,function(i){var o=e(i);return o<r?r:o>t?t:o}},back:function(e){return e||(e=1.70158),function(r){return r*r*((e+1)*r-e)}},elastic:function(e){return e||(e=1.5),function(r){return Math.pow(2,10*(r-1))*Math.cos(20*Math.PI*e/3*r)}}},af={number:function(e,r){var t=r-e;return function(i){return e+t*i}},object:function(e,r){var t=Object.keys(e);return function(i){var o,s,c={};for(o=t.length-1;-1!=o;o--)c[s=t[o]]=e[s]+(r[s]-e[s])*i;return c}},hexColor:function(e,r){var t=parseInt(e.slice(1),16),i=parseInt(r.slice(1),16),o=255&t,s=(255&i)-o,c=65280&t,f=(65280&i)-c,v=16711680&t,C=(16711680&i)-v;return function(M){return"#"+(1<<24|o+s*M&255|c+f*M&65280|v+C*M&16711680).toString(16).slice(1)}},unit:function(e,r){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=t.exec(e),o=t.exec(r),s=o[1].indexOf("."),c=s>0?o[1].length-s-1:0,f=+o[1]-(e=+i[1]),v=i[2];return function(C){return(e+f*C).toFixed(c)+v}}},wo={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,i=Number.isFinite(e.width)?e.width:1;return Ri('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+i,innerRadius:t})},highlight:function(e){return Ri('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var r=Number.isFinite(e.x)?e.x:2;return Ri('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[r,e.y]:r})},dropShadow:function(e){var r="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Ri(r)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var r=Number.isFinite(e.amount)?e.amount:1;return Ri('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-r),b:.7152-.7152*(1-r),c:.0722-.0722*(1-r),d:.2126-.2126*(1-r),e:.7152+.2848*(1-r),f:.0722-.0722*(1-r),g:.2126-.2126*(1-r),h:.0722+.9278*(1-r)})},sepia:function(e){var r=Number.isFinite(e.amount)?e.amount:1;return Ri('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-r),b:.769-.769*(1-r),c:.189-.189*(1-r),d:.349-.349*(1-r),e:.686+.314*(1-r),f:.168-.168*(1-r),g:.272-.272*(1-r),h:.534-.534*(1-r),i:.131+.869*(1-r)})},saturate:function(e){var r=Number.isFinite(e.amount)?e.amount:1;return Ri('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-r})},hueRotate:function(e){return Ri('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var r=Number.isFinite(e.amount)?e.amount:1;return Ri('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:r,amount2:1-r})},brightness:function(e){return Ri('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var r=Number.isFinite(e.amount)?e.amount:1;return Ri('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:r,amount2:.5-r/2})}},Ri=function(e){var r=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(r,function(i){for(var o=Array.from(arguments),s=o.slice(1,4).find(function(v){return!!v}),c=s.split("."),f=t[c.shift()];void 0!==f&&c.length;)f=f[c.shift()];return void 0!==f?f:""})}},Xt=mn.assign,Ji=mn.defaults,wc=mn.defaultsDeep,Bo=mn.invokeMap||mn.invoke,sf=mn.sortedIndexBy||mn.sortedIndex,Tl=mn.uniqBy||mn.uniq,ua=mn.clone,So=mn.cloneDeep,Za=mn.isEmpty,Ru=mn.isEqual,er=mn.isFunction,ii=mn.isPlainObject,En=mn.toArray,pp=mn.groupBy,mp=mn.flattenDeep,uf=mn.without,gp=mn.difference,Sc=mn.union,Ma=mn.has,Fr=mn.result,Ts=mn.omit,lf=mn.pick,To=mn.forIn,vp=mn.camelCase,_p=mn.uniqueId,pi=function(){if(mn.mergeWith){var e=Array.from(arguments),r=e[e.length-1],t=er(r)?r:Aa;return e.push(function(i,o){var s=t(i,o);return void 0!==s?s:Array.isArray(i)&&!Array.isArray(o)?o:void 0}),mn.mergeWith.apply(this,e)}return mn.merge.apply(this,arguments)},Mr=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},Ni=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},mi=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},Aa=function(){};var e,r,Mi=d(71066);function cf(e){e=Tl(e);const r=En(e).reduce(function(t,i){return t[i.id]=i.clone(),t},{});return En(e).forEach(function(t){const i=r[t.id];if(i.isLink()){const c=i.source(),f=i.target();c.id&&r[c.id]&&i.prop("source/id",r[c.id].id),f.id&&r[f.id]&&i.prop("target/id",r[f.id].id)}const o=t.get("parent");o&&r[o]&&i.set("parent",r[o].id);const s=En(t.get("embeds")).reduce(function(c,f){return r[f]&&c.push(r[f].id),c},[]);Za(s)||i.set("embeds",s)}),r}const ka={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},xp=Object.keys(ka).map(e=>ka[e]).join(""),df="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",bp=/\s/g,ff=new RegExp(`^(${df}\\*)?([${xp}])([-+]{1,2}${df})?$`,"g");function hf(e){throw new Error(`Invalid calc() expression: ${e}`)}function Cp(e,r){const t=ff.exec(e.replace(bp,""));t||hf(e),ff.lastIndex=0;const[,i=1,o,s=0]=t,{x:c,y:f,width:v,height:C}=r;let M=0;switch(o){case ka.width:M=v;break;case ka.height:M=C;break;case ka.x:M=c;break;case ka.y:M=f;break;case ka.minimum:M=Math.min(C,v);break;case ka.maximum:M=Math.max(C,v);break;case ka.diagonal:M=Math.sqrt(C*C+v*v)}return parseFloat(i)*M+function wp(e){if(!e)return 0;const[r]=e;switch(r){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)}function Tc(e){return"string"==typeof e&&e.includes("calc")}const mf="calc(".length;function Ec(e,r){let t=e,i=0;for(;;){let o=t.indexOf("calc(",i);if(-1===o)return t;let s=o+mf,c=1;e:for(;;){switch(t[s]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:hf(t)}s++}let f=t.slice(o+mf,s);Tc(f)&&(f=Ec(f,r));const v=String(Cp(f,r));t=t.slice(0,o)+v+t.slice(s+1),i=o+v.length}}function qa(e,r){return function(t,i){var o=Co(t);t=parseFloat(t),o&&(t/=100);var s={};if(isFinite(t)){var c=o||t>=0&&t<=1?t*i[r]:Math.max(t+i[r],0);s[e]=c}return s}}function El(e,r,t){return function(i,o){var c,s=Co(i);if(i=parseFloat(i),s&&(i/=100),isFinite(i)){var f=o[t]();c=s||i>0&&i<1?f[e]+o[r]*i:f[e]+i}var v=_e();return v[e]=c||0,v}}function Ic(e,r,t){return function(i,o){var s;s="middle"===i?o[r]/2:i===t?o[r]:isFinite(i)?i>-1&&i<1?-o[r]*i:-i:Co(i)?o[r]*parseFloat(i)/100:0;var c=_e();return c[e]=-(o[e]+s),c}}function Pc(e,r){var t="joint-shape",i=r&&r.resetOffset;return function(o,s,c){var f=rr(c),v=f.data(t);if(!v||v.value!==o){var C=e(o);v={value:o,shape:C,shapeBBox:C.bbox()},f.data(t,v)}var M=v.shape.clone(),x=v.shapeBBox.clone(),G=x.origin(),ne=s.origin();x.x=ne.x,x.y=ne.y;var oe=s.maxRectScaleToFit(x,ne);return M.scale(0===x.width||0===s.width?1:oe.sx,0===x.height||0===s.height?1:oe.sy,G),i&&M.translate(-G.x,-G.y),M}}function gf(e){var t=Pc(function r(i){return new Lt(tt.normalizePathData(i))},e);return function(i,o,s){return{d:t(i,o,s).serialize()}}}function vf(e){var r=Pc(qn,e);return function(t,i,o){return{points:r(t,i,o).serialize()}}}function Il(e,r){var t=new _e(1,0);return function(i){var o,s,c=this[e](i);return c?(s=r.rotate?c.vector().vectorAngle(t):0,o=c.start):(o=this.path.start,s=0),0===s?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+s+")"}}}function _f(e){return function(t,i,o){const s=tt(o);s.attr(e)!==t&&s.attr(e,t)}}function Oa(e,r,t){return void 0!==t.text}function Nu(){return this.model.isLink()}function Mc(e){var r={},t=e.stroke;"string"==typeof t&&(r.stroke=t,r.fill=t);var i=e.strokeOpacity;return void 0===i&&(i=e["stroke-opacity"]),void 0===i&&(i=e.opacity),void 0!==i&&(r["stroke-opacity"]=i,r["fill-opacity"]=i),r}function yf(e){const{paper:r}=this;return`url(#${"pattern"===e.type?r.definePattern(e):r.defineGradient(e)})`}const bn={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:_f("href")},xlinkHref:{set:_f("xlink:href")},filter:{qualify:ii,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:ii,set:yf},stroke:{qualify:ii,set:yf},sourceMarker:{qualify:ii,set:function(e,r,t,i){return e=Xt(Mc(i),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:ii,set:function(e,r,t,i){return e=Xt(Mc(i),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:ii,set:function(e,r,t,i){return e=Xt(Mc(i),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,r,t){return!t.textWrap||!ii(t.textWrap)},set:function(e,r,t,i){var o=rr(t),s="joint-text",c=o.data(s),f=lf(i,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:v}=f;Tc(v)&&(f.x=Ec(v,r));var C=f.fontSize=i["font-size"]||i.fontSize,M=JSON.stringify([e,f]);if(void 0===c||c!==M){C&&t.setAttribute("font-size",C);var x=f.textPath;if(Mr(x)){var G=x.selector;if("string"==typeof G){var ne=this.findBySelector(G)[0];ne instanceof SVGPathElement&&(f.textPath=Xt({"xlink:href":"#"+ne.id},x))}}tt(t).text(""+e,f),o.data(s,M)}}},textWrap:{qualify:ii,set:function(e,r,t,i){var o=e.width||0,s={};s.width=Co(o)?r.width*parseFloat(o)/100:o<=0?r.width+o:o;var c=e.height||0;s.height=Co(c)?r.height*parseFloat(c)/100:c<=0?r.height+c:c;var f,v=e.text;void 0===v&&(v=i.text),f=void 0!==v?function(e,r,t={},i={}){var o=r.width,s=r.height,c=i.svgDocument||tt("svg").node,f=tt("tspan").node,v=tt("text").attr(t).append(f).node,C=document.createTextNode("");v.style.opacity=0,v.style.display="block",f.style.display="block",f.appendChild(C),c.appendChild(v),i.svgDocument||document.body.appendChild(c);var M=i.separator||" ",x=i.eol||"\n",G=i.hyphen?new RegExp(i.hyphen):/[^\w\d]/,ne=i.maxLineCount;Ni(ne)||(ne=1/0);for(var je,Ve,L,oe=e.split(M),Se=[],Ie=[],z=0,Q=0,ie=oe.length;z<ie;z++){var ve=oe[z];if(ve){var Pe=!1;if(x&&ve.indexOf(x)>=0){if(ve.length>1){for(var Fe=ve.split(x),Ye=0,gt=Fe.length-1;Ye<gt;Ye++)Fe.splice(2*Ye+1,0,x);oe.splice(z,1,...Fe.filter(Wt=>""!==Wt)),z--,ie=oe.length;continue}Ie[++Q]="",Pe=!0}if(!Pe)if(C.data=Ie[Q]?Ie[Q]+" "+ve:ve,f.getComputedTextLength()<=o)Ie[Q]=C.data,(je||Ve)&&(Se[Q++]=!0,je=0,Ve=0);else{if(!Ie[Q]||je){var lt=!!je;if(je=ve.length-1,lt||!je){if(!je){if(!Ie[Q]){Ie=[];break}oe.splice(z,2,ve+oe[z+1]),ie--,Se[Q++]=!0,z--;continue}oe[z]=ve.substring(0,je),oe[z+1]=ve.substring(je)+(void 0===oe[z+1]?"":oe[z+1])}else{if(Ve)oe.splice(z,2,oe[z]+oe[z+1]),Ve=0;else{var vt=ve.search(G);vt>-1&&vt!==ve.length-1&&0!==vt&&(Ve=vt+1,je=0),oe.splice(z,1,ve.substring(0,Ve||je),ve.substring(Ve||je)),ie++}Q&&!Se[Q-1]&&Q--}z--;continue}Q++,z--}var Tt=null;if(Ie.length>ne)Tt=ne-1;else if(void 0!==s){var Et;void 0===L&&(L=(Et="auto"===t.lineHeight?{value:1.5,unit:"em"}:rf(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===Et.unit&&(L*=v.getBBox().height)),L*Ie.length>s&&(Tt=Math.floor(s/L)-1)}if(null!==Tt){Ie.splice(Tt+1);var Rt=i.ellipsis;if(!Rt||Tt<0)break;"string"!=typeof Rt&&(Rt="\u2026");var ir=Ie[Tt];if(!ir&&!Pe)break;var lr,jt,Yn=ir.length;do{if(jt=ir[Yn],lr=ir.substring(0,Yn),jt?jt.match(M)&&(lr+=jt):lr+="string"==typeof M?M:" ",C.data=lr+=Rt,f.getComputedTextLength()<=o){Ie[Tt]=lr;break}Yn--}while(Yn>=0);break}}}return i.svgDocument?c.removeChild(v):document.body.removeChild(c),Ie.join(x)}(""+v,s,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight,"letter-spacing":"letter-spacing"in i?i["letter-spacing"]:i.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",bn.text.set.call(this,f,r,t,i)}},title:{qualify:function(e,r){return r instanceof SVGElement},set:function(e,r,t){var i=rr(t),o="joint-title",s=i.data(o);if(void 0===s||s!==e){i.data(o,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var f=document.createElementNS(t.namespaceURI,"title");f.textContent=e,t.insertBefore(f,c)}}}},lineHeight:{qualify:Oa},textVerticalAnchor:{qualify:Oa},textPath:{qualify:Oa},annotations:{qualify:Oa},eol:{qualify:Oa},displayEmpty:{qualify:Oa},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:ii,set:function(e,r,t){rr(t).css(e)}},html:{set:function(e,r,t){rr(t).html(e+"")}},ref:{},refX:{position:El("x","width","origin")},refY:{position:El("y","height","origin")},refDx:{position:El("x","width","corner")},refDy:{position:El("y","height","corner")},refWidth:{set:qa("width","width")},refHeight:{set:qa("height","height")},refRx:{set:qa("rx","width")},refRy:{set:qa("ry","height")},refRInscribed:{set:function(e){var r=qa("r","width"),t=qa("r","height");return function(i,o){return(o.height>o.width?r:t)(i,o)}}()},refRCircumscribed:{set:function(e,r){var t=Co(e);e=parseFloat(e),t&&(e/=100);var o,i=Math.sqrt(r.height*r.height+r.width*r.width);return isFinite(e)&&(o=t||e>=0&&e<=1?e*i:Math.max(e+i,0)),{r:o}}},refCx:{set:qa("cx","width")},refCy:{set:qa("cy","height")},xAlignment:{offset:Ic("x","width","right")},yAlignment:{offset:Ic("y","height","bottom")},resetOffset:{offset:function(e,r){return e?{x:-r.x,y:-r.y}:{x:0,y:0}}},refDResetOffset:{set:gf({resetOffset:!0})},refDKeepOffset:{set:gf({resetOffset:!1})},refPointsResetOffset:{set:vf({resetOffset:!0})},refPointsKeepOffset:{set:vf({resetOffset:!1})},connection:{qualify:Nu,set:function({stubs:e=0}){let r;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const i=this.getConnection(),o=i.divideAtLength(t),s=i.divideAtLength(-t);o&&s&&(r=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:r||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Nu,set:Il("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Nu,set:Il("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Nu,set:Il("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Nu,set:Il("getTangentAtRatio",{rotate:!1})}};bn["xlink:href"]=bn.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{bn[e]={qualify:Tc,set:function(t,i){return{[e]:Ec(t,i)}}}}),bn.refR=bn.refRInscribed,bn.refD=bn.refDResetOffset,bn.refPoints=bn.refPointsResetOffset,bn.atConnectionLength=bn.atConnectionLengthKeepGradient,bn.atConnectionRatio=bn.atConnectionRatioKeepGradient,bn.refX2=bn.refX,bn.refY2=bn.refY,bn.refWidth2=bn.refWidth,bn.refHeight2=bn.refHeight,bn["ref-x"]=bn.refX,bn["ref-y"]=bn.refY,bn["ref-dy"]=bn.refDy,bn["ref-dx"]=bn.refDx,bn["ref-width"]=bn.refWidth,bn["ref-height"]=bn.refHeight,bn["x-alignment"]=bn.xAlignment,bn["y-alignment"]=bn.yAlignment;const xf=bn,la=Mi.Model.extend({constructor:function(e,r){var t,i=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=_p("c"),this.attributes={},r&&r.collection&&(this.collection=r.collection),r&&r.parse&&(i=this.parse(i,r)||{}),(t=Fr(this,"defaults"))&&(i=pi({},t,i)),this.set(i,r),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,r,t){throw new Error("Must define a translate() method.")},toJSON:function(){const r=Fr(this.constructor.prototype,"defaults").attrs||{},i={};To(this.attributes.attrs,function(s,c){const f=r[c];To(s,function(v,C){Mr(v)&&!Array.isArray(v)?To(v,function(M,x){(!f||!f[C]||!Ru(f[C][x],M))&&(i[c]=i[c]||{},(i[c][C]||(i[c][C]={}))[x]=M)}):(!f||!Ru(f[C],v))&&(i[c]=i[c]||{},i[c][C]=v)})});const o=So(Ts(this.attributes,"attrs"));return o.attrs=i,o},initialize:function(e){const r=this.getIdAttribute();(!e||!(r in e))&&this.set(r,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)})},processPorts:function(){var e=this.ports,r={};To(this.get("attrs"),function(s,c){s&&s.port&&(void 0!==s.port.id?r[s.port.id]=s.port:r[s.port]={id:s.port})});var t={};To(e,function(s,c){r[c]||(t[c]=!0)}),this.graph&&!Za(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(s){t[s.get("target").port]&&s.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(s){t[s.get("source").port]&&s.remove()})),this.ports=r},remove:function(e={}){const{graph:r,collection:t}=this;if(!r)return t&&t.remove(this,e),this;r.startBatch("remove");const i=this.getParentCell();i&&i.unembed(this,e);const o=this.getEmbeddedCells();for(let s=0,c=o.length;s<c;s++){const f=o[s];f&&f.remove(e)}return this.trigger("remove",this,r.attributes.cells,e),r.stopBatch("remove"),this},toFront:function(e){var r=this.graph;if(r){e=e||{};var i,t=r.maxZIndex();e.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):i=[this],t=t-i.length+1;var o=r.get("cells"),s=o.indexOf(this)!==o.length-i.length;s||(s=i.some(function(c,f){return c.get("z")!==t+f})),s&&(this.startBatch("to-front"),t+=i.length,i.forEach(function(c,f){c.set("z",t+f,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var r=this.graph;if(r){e=e||{};var i,t=r.minZIndex();e.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):i=[this];var s=0!==r.get("cells").indexOf(this);s||(s=i.some(function(c,f){return c.get("z")!==t+f})),s&&(this.startBatch("to-back"),t-=i.length,i.forEach(function(c,f){c.set("z",t+f,e)}),this.stopBatch("to-back"))}return this},parent:function(e,r){return void 0===e?this.get("parent"):this.set("parent",e,r)},embed:function(e,r){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,r),this},unembed:function(e,r){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,r),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,r){const t="embed";this.startBatch(t);const i=Xt([],this.get("embeds"));e.forEach(o=>{i[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,r)}),this.set("embeds",Tl(i),r),this.stopBatch(t)},_unembedCells:function(e,r){const t="unembed";this.startBatch(t),e.forEach(i=>i.unset("parent",r)),this.set("embeds",uf(this.get("embeds"),...e.map(i=>i.id)),r),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),r=this.graph;return e&&r&&r.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var r=this.getParentCell();r;)e.push(r),r=r.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var r;if(e.deep)if(e.breadthFirst){r=[];for(var t=this.getEmbeddedCells();t.length>0;){var i=t.shift();r.push(i),t.push.apply(t,i.getEmbeddedCells())}}else(r=this.getEmbeddedCells()).forEach(function(o){r.push.apply(r,o.getEmbeddedCells(e))});else r=En(this.get("embeds")).map(this.graph.getCell,this.graph);return r}return[]},isEmbeddedIn:function(e,r){var t=mi(e)?e:e.id,i=this.parent();if(r=Ji({deep:!0},r),this.graph&&r.deep){for(;i;){if(i===t)return!0;i=this.graph.getCell(i).parent()}return!1}return i===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return En(cf([this].concat(this.getEmbeddedCells({deep:!0}))));var r=Mi.Model.prototype.clone.apply(this,arguments);return r.set(this.getIdAttribute(),this.generateId()),r.unset("embeds"),r.unset("parent"),r},prop:function(e,r,t){var i="/",o=mi(e);if(o||Array.isArray(e)){if(arguments.length>1){var s,c;o?c=(s=e).split("/"):(s=e.join(i),c=e.slice());var f=c[0],v=c.length;if((t=t||{}).propertyPath=s,t.propertyValue=r,t.propertyPathArray=c,1===v)return this.set(f,r,t);for(var C={},M=C,x=f,G=1;G<v;G++){var ne=c[G],oe=Number.isFinite(o?Number(ne):ne);M=M[x]=oe?[]:{},x=ne}C=tf(C,c,r,"/");var Se=pi({},this.attributes);t.rewrite&&nf(Se,s,"/");var Ie=pi(Se,C);return this.set(f,Ie[f],t)}return Lu(this.attributes,e,i)}return this.set(pi({},this.attributes,e),r)},removeProp:function(e,r){r=r||{};var t=Array.isArray(e)?e:e.split("/"),i=t[0];if("attrs"===i&&(r.dirty=!0),1===t.length)return this.unset(e,r);var o=t.slice(1),s=So(this.get(i));return nf(s,o,"/"),this.set(i,s,r)},attr:function(e,r,t){var i=Array.from(arguments);return 0===i.length?this.get("attrs"):(i[0]=Array.isArray(e)?["attrs"].concat(e):mi(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,i))},removeAttr:function(e,r){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,r)},transition:function(e,r,t,i){i=i||"/",t=Xt({duration:100,delay:10,timingFunction:fp.linear,valueFunction:af.number},t);var c,s=0,f=function(x){var G,ne,oe;(ne=(x-=s=s||x)/t.duration)<1?this._transitionIds[e]=G=bc(f):(ne=1,delete this._transitionIds[e]),oe=c(t.timingFunction(ne)),t.transitionId=G,this.prop(e,oe,t),G||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:v}=this;let C;return C=setTimeout(x=>{v[e]&&(v[e]=uf(v[e],C),0===v[e].length&&delete v[e]),this.stopPendingTransitions(e,i),c=t.valueFunction(Lu(this.attributes,e,i),r),this._transitionIds[e]=bc(x),this.trigger("transition:start",this,e)},t.delay,f),v[e]||(v[e]=[]),v[e].push(C),C},getTransitions:function(){return Sc(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,r="/"){const{_scheduledTransitionIds:t={}}=this;let i=Object.keys(t);if(e){const o=e.split(r);i=i.filter(s=>Ru(o,s.split(r).slice(0,o.length)))}return i.forEach(o=>{t[o].forEach(c=>clearTimeout(c)),delete t[o]}),this},stopPendingTransitions(e,r="/"){const{_transitionIds:t={}}=this;let i=Object.keys(t);if(e){const o=e.split(r);i=i.filter(s=>Ru(o,s.split(r).slice(0,o.length)))}i.forEach(o=>{Cc(t[o]),delete t[o],this.trigger("transition:end",this,o)})},stopTransitions:function(e,r="/"){return this.stopScheduledTransitions(e,r),this.stopPendingTransitions(e,r),this},addTo:function(e,r){return e.addCell(this,r),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,r){return this.graph&&this.graph.startBatch(e,Xt({},r,{cell:this})),this},stopBatch:function(e,r){return this.graph&&this.graph.stopBatch(e,Xt({},r,{cell:this})),this},getChangeFlag:function(e){var r=0;if(!e)return r;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(r|=e[t]);return r},angle:function(){return 0},position:function(){return new _e(0,0)},getPointFromConnectedLink:function(){return new _e},getBBox:function(){return new bt(0,0,0,0)},getPointRotatedAroundCenter(e,r,t){const i=new _e(r,t);return e&&i.rotate(this.getBBox().center(),e),i},getAbsolutePointFromRelative(e,r){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,r))},getRelativePointFromAbsolute(e,r){return this.getPointRotatedAroundCenter(this.angle(),e,r).difference(this.position())}},{getAttributeDefinition:function(e){var r=this.attributes;return r&&r[e]||xf[e]},define:function(e,r,t,i){t=Xt({defaults:wc({type:e},r,this.prototype.defaults)},t);var o=this.extend(t,i);return"undefined"!=typeof joint&&Ma(joint,"shapes")&&tf(joint.shapes,e,o,"."),o}}),eu=la.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,r,t){return void 0===e?ua(this.get("source")):e instanceof la?((i=ua(r)||{}).id=e.id,this.set("source",i,t)):ii(e)?this.set("source",i=e,r):((i=ua(r)||{}).x=e.x,i.y=e.y,this.set("source",i,t));var i},target:function(e,r,t){return void 0===e?ua(this.get("target")):e instanceof la?((i=ua(r)||{}).id=e.id,this.set("target",i,t)):ii(e)?this.set("target",i=e,r):((i=ua(r)||{}).x=e.x,i.y=e.y,this.set("target",i,t));var i},router:function(e,r,t){if(void 0===e){var i=this.get("router");return i?"object"==typeof i?ua(i):i:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:r},o?r:t)},connector:function(e,r,t){if(void 0===e){var i=this.get("connector");return i?"object"==typeof i?ua(i):i:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:r},o?r:t)},label:function(e,r,t){var i=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=i.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],r,t)},labels:function(e,r){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,r))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,r,t){if(!r)throw new Error("dia.Link: no label provided");var i=this.labels(),o=i.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),i.splice(e,0,r),this.labels(i,t)},appendLabel:function(e,r){return this.insertLabel(-1,e,r)},removeLabel:function(e,r){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,r)},vertex:function(e,r,t){var i=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=i.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(r);return this.prop(["vertices",e],o,t)},vertices:function(e,r){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],i=0;i<e.length;i++){var o=e[i],s=this._normalizeVertex(o);t.push(s)}return this.set("vertices",t,r)},insertVertex:function(e,r,t){if(!r)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),o=i.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var s=this._normalizeVertex(r);return i.splice(e,0,s),this.vertices(i,t)},removeVertex:function(e,r){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,r)},_normalizeVertex:function(e){return ii(e)?e:{x:e.x,y:e.y}},translate:function(e,r,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=r,this.applyToPoints(function(i){return{x:(i.x||0)+e,y:(i.y||0)+r}},t)},scale:function(e,r,t,i){return this.applyToPoints(function(o){return _e(o).scale(e,r,t).toJSON()},i)},applyToPoints:function(e,r){if(!er(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:i,target:o}=this.attributes;i.id||(t.source=e(i)),o.id||(t.target=e(o));var s=this.vertices();return s.length>0&&(t.vertices=s.map(e)),this.set(t,r)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new _e(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new _e(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(_e),this.getTargetPoint()];return new qn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var r;if(this.graph){var t=this.getSourceElement(),i=this.getTargetElement(),o=this.getParentCell();t&&i&&(r=t===i||t.isEmbeddedIn(i)?i:i.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,i)),o&&(!r||r.id!==o.id)&&o.unembed(this,e),r&&r.embed(this,e)}return r},hasLoop:function(e){e=e||{};var{source:r,target:t}=this.attributes,i=r.id,o=t.id;if(!i||!o)return!1;var s=i===o;if(!s&&e.deep&&this.graph){var c=this.getSourceCell(),f=this.getTargetCell();s=c.isEmbeddedIn(f)||f.isEmbeddedIn(c)}return s},getSourceCell:function(){const{graph:e,attributes:r}=this;var t=r.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,r={};do{if(r[e.id])return null;r[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:r}=this;var t=r.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,r={};do{if(r[e.id])return null;r[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var r=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,r)}return e||null},isRelationshipEmbeddedIn:function(e){var r=mi(e)||Ni(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===r||t.isEmbeddedIn(r))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},r={};return r.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,r.position=e.position,r.attrs=e.attrs,r.size=e.size,r}},{endsEqual:function(e,r){return e.id===r.id&&(e.port===r.port||!e.port&&!r.port)}});function bf(e,r,t){var i=e.toJSON();return i.angle=r||0,Ji({},t,i)}function Du(e,r,t){return e.map(function(i,o,s){var c=this.pointAt((o+.5)/s.length);return(i.dx||i.dy)&&c.offset(i.dx||0,i.dy||0),bf(c.round(),0,i)},oa(r,t))}function Cf(e,r,t,i){var o=r.center(),s=r.width/r.height,c=r.topMiddle(),f=Oi.fromRect(r);return e.map(function(v,C,M){var x=t+i(C,M.length),G=c.clone().rotate(o,-x).scale(s,1,o),ne=v.compensateRotation?-f.tangentTheta(G):0;return(v.dx||v.dy)&&G.offset(v.dx||0,v.dy||0),v.dr&&G.move(o,v.dr),bf(G.round(),ne,v)})}function Ac(e,r){var t=r.x;mi(t)&&(t=parseFloat(t)/100*e.width);var i=r.y;return mi(i)&&(i=parseFloat(i)/100*e.height),ri(t||0,i||0)}const Pl=function(e,r,t){return e.map(Ac.bind(null,r))},Sp=function(e,r,t){return t.fn(e,r,t)},wf=function(e,r,t){return Du(e,Ac(r,t.start||r.origin()),Ac(r,t.end||r.corner()))},Sf=function(e,r,t){return Du(e,r.origin(),r.bottomLeft())},kc=function(e,r,t){return Du(e,r.topRight(),r.corner())},Tf=function(e,r,t){return Du(e,r.origin(),r.topRight())},Ef=function(e,r,t){return Du(e,r.bottomLeft(),r.corner())},If=function(e,r,t){var o=t.step||360/e.length;return Cf(e,r,t.startAngle||0,function(s){return s*o})},Pf=function(e,r,t){var o=t.step||20;return Cf(e,r,t.startAngle||0,function(s,c){return(s+.5-c/2)*o})};function es(e,r){return wc({},e,r,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Mf(e,r,t,i){i=Ji({},i,{offset:15});var c,f,v,C,o=r.center().theta(e),s=Af(r),M=i.offset,x=0;o<s[1]||o>s[2]?(v=".3em",c=M,f=0,C="start"):o<s[0]?(v="0",c=0,f=-M,t?(x=-90,C="start"):C="middle"):o<s[3]?(v=".3em",c=-M,f=0,C="end"):(v=".6em",c=0,f=M,t?(x=90,C="start"):C="middle");var G=Math.round;return es({x:G(c),y:G(f),angle:x,attrs:{".":{y:v,"text-anchor":C}}})}function Af(e){var r=e.center(),t=r.theta(e.origin()),i=r.theta(e.bottomLeft()),o=r.theta(e.corner());return[t,r.theta(e.topRight()),o,i]}function Bu(e,r,t,i){var s,c,f,v,o=r.center().theta(e),C=(i=Ji({},i,{offset:15})).offset,M=0,x=Af(r);o<x[1]||o>x[2]?(f=".3em",s=-C,c=0,v="end"):o<x[0]?(f=".6em",s=0,c=C,t?(M=90,v="start"):v="middle"):o<x[3]?(f=".3em",s=C,c=0,v="start"):(f="0em",s=0,c=-C,t?(M=-90,v="start"):v="middle");var G=Math.round;return es({x:G(s),y:G(c),angle:M,attrs:{".":{y:f,"text-anchor":v}}})}function Vu(e,r,t){t=Ji({},t,{offset:20});var v,i=ri(0,0),o=-e.theta(i),s=o,c=e.clone().move(i,t.offset).difference(e).round(),f=".3em";(o+90)%180==0?(v=r?"end":"middle",!r&&-270===o&&(f="0em")):o>-270&&o<-90?(v="start",s=o-180):v="end";var C=Math.round;return es({x:C(c.x),y:C(c.y),angle:r?s:0,attrs:{".":{y:f,"text-anchor":v}}})}const Tp=function(e,r,t){return es(t,r)},Ep=function(e,r,t){return es(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Oc=function(e,r,t){return es(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},kf=function(e,r,t){return es(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},Ip=function(e,r,t){return es(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},Pp=function(e,r,t){return Mf(e,r,!0,t)},Mp=function(e,r,t){return Mf(e,r,!1,t)},Ap=function(e,r,t){return Bu(e,r,!0,t)},kp=function(e,r,t){return Bu(e,r,!1,t)},Op=function(e,r,t){return Vu(e.difference(r.center()),!1,t)},Lp=function(e,r,t){return Vu(e.difference(r.center()),!0,t)};var Of=function(e){var r=So(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=T,this._init(r)};Of.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(r){return r.group===e})},getGroupPortsMetrics:function(e,r){var t=this.getGroup(e),i=this.getPortsByGroup(e),o=t.position||{},s=o.name,c=this.portLayoutNamespace;c[s]||(s="left");var f=o.args||{},v=i.map(function(x){return x&&x.position&&x.position.args}),C=c[s](v,r,f),M={ports:i,result:[]};return En(C).reduce(function(x,G,ne){var oe=x.ports[ne];return x.result.push({portId:oe.id,portTransformation:G,labelTransformation:this._getPortLabelLayout(oe,_e(G),r),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),x}.bind(this),M),M.result},_getPortLabelLayout:function(e,r,t){var i=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return i[o]?i[o](r,t,e.label.position.args):null},_init:function(e){if(Mr(e.groups))for(var r=Object.keys(e.groups),t=0,i=r.length;t<i;t++){var o=r[t];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var s=En(e.items),c=0,f=s.length;c<f;c++)this.ports.push(this._evaluatePort(s[c]))},_evaluateGroup:function(e){return pi(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var r=Xt({},e),t=this.getGroup(e.group);return r.markup=r.markup||t.markup,r.attrs=pi({},t.attrs,r.attrs),r.position=this._createPositionNode(t,r),r.label=pi({},t.label,this._getLabel(r)),r.z=this._getZIndex(t,r),r.size=Xt({},t.size,r.size),r},_getZIndex:function(e,r){return Ni(r.z)?r.z:Ni(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,r){return pi({name:"left",args:{}},e.position,{args:r.args})},_getPosition:function(e,r){var i,t={};er(e)?(i="fn",t.fn=e):mi(e)?i=e:void 0===e?i=r?"left":null:Array.isArray(e)?(i="absolute",t.x=e[0],t.y=e[1]):Mr(e)&&(i=e.name,Xt(t,e.args));var o={args:t};return i&&(o.name=i),o},_getLabel:function(e,r){var t=e.label||{},i=t;return i.position=this._getPosition(t.position,r),i}};const Fp={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},r={};En(e.items).forEach(function(f){r[f.id]=!0});var t=this.previous("ports")||{},i={};En(t.items).forEach(function(f){r[f.id]||(i[f.id]=!0)});var o=this.graph;o&&!Za(i)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(f){i[f.get("target").port]&&f.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(f){i[f.get("source").port]&&f.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return So(this.prop("ports/items"))||[]},getGroupPorts:function(e){const r=En(this.prop(["ports","items"])).filter(t=>t.group===e);return So(r)},getPort:function(e){return So(En(this.prop("ports/items")).find(function(r){return r.id&&r.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,bt(this.size())).reduce(function(t,i){var o=i.portTransformation;return t[i.portId]={x:o.x,y:o.y,angle:o.angle},t},{})},getPortIndex:function(e){var r=Mr(e)?e.id:e;return this._isValidPortId(r)?En(this.prop("ports/items")).findIndex(function(t){return t.id===r}):-1},addPort:function(e,r){if(!Mr(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=Xt([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,r),this},insertPort:function(e,r,t){const i="number"==typeof e?e:this.getPortIndex(e);if(!Mr(r)||Array.isArray(r))throw new Error("dia.Element: insertPort requires an object.");const o=Xt([],this.prop("ports/items"));return o.splice(i,0,r),this.prop("ports/items",o,t),this},portProp:function(e,r,t,i){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(r)?s[0]=["ports","items",o].concat(r):mi(r)?s[0]=["ports/items/",o,"/",r].join(""):(s=["ports/items/"+o],ii(r)&&(s.push(r),s.push(t))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},r=[],t=En((e=e||{}).items);return t.forEach(function(i){"object"!=typeof i&&r.push("Element: invalid port ",i),this._isValidPortId(i.id)||(i.id=this.generatePortId())},this),Tl(t,"id").length!==t.length&&r.push("Element: found id duplicities in ports."),r},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!Mr(e)},addPorts:function(e,r){return e.length&&this.prop("ports/items",Xt([],this.prop("ports/items")).concat(e),r),this},removePort:function(e,r){const t=r||{},i=this.getPortIndex(e);if(-1!==i){const o=Xt([],this.prop(["ports","items"]));o.splice(i,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,t),this.stopBatch("port-remove")}return this},removePorts:function(e,r){let t,i;if(Array.isArray(e)){if(t=r||{},0===e.length)return this.this;i=Xt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(c){const f=Mr(c)?c.id:c;return s.id===f})})}else t=e||{},i=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],i,t),this.stopBatch("port-remove"),this},_createPortData:function(){var r,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(r=this._portSettingsData.getPorts()),this._portSettingsData=new Of(this.get("ports"));var t=this._portSettingsData.getPorts();if(r){var i=t.filter(function(s){if(!r.find(function(c){return c.id===s.id}))return s}),o=r.filter(function(s){if(!t.find(function(c){return c.id===s.id}))return s});o.length>0&&this.trigger("ports:remove",this,o),i.length>0&&this.trigger("ports:add",this,i)}}},Rp={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],r=this._getContainerElement(),t=0,i=r.node.childNodes.length;t<i;t++)e.push(r.node.childNodes[t]);var o=pp(this.model._portSettingsData.getPorts(),"z"),s="auto";En(o[s]).forEach(function(M){var x=this._getPortElement(M);r.append(x),e.push(x)},this);for(var c=Object.keys(o),f=0;f<c.length;f++){var v=c[f];if(v!==s){var C=parseInt(v,10);this._appendPorts(o[v],C,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,r,t){var i=this._getContainerElement(),o=En(e).map(this._getPortElement,this);t[r]||r<0?tt(t[Math.max(r,0)]).before(o):i.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,r){const t=this._portElementsCache[e];if(!t)return null;const i=t.portContentElement.node,o=t.portContentSelectors,[s=null]=this.findBySelector(r,i,o);return s},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Bo(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let r,t,i,o;var s=tt(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var f=this.parseDOMJSON(c,s.node),v=f.fragment;r=v.childNodes.length>1?tt("g").append(v):tt(v.firstChild),o=f.selectors}else r=tt(c),Array.isArray(r)&&(r=tt("g").append(r));if(!r)throw new Error("ElementView: Invalid port markup.");r.attr({port:e.id,"port-group":e.group});const C=this._getPortLabelMarkup(e.label);if(Array.isArray(C)){const{fragment:G,selectors:ne}=this.parseDOMJSON(C,s.node),oe=G.childNodes.length;oe>0&&(i=ne,t=1===oe?tt(G.firstChild):tt("g").append(G))}else t=tt(C),Array.isArray(t)&&(t=tt("g").append(t));var M;if(o&&i){for(var x in i)if(o[x]&&x!==this.selector)throw new Error("ElementView: selectors within port must be unique.");M=Xt({},o,i)}else M=o||i;return s.append(r.addClass("joint-port-body")),t&&s.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:t,portSelectors:M,portLabelSelectors:i,portContentElement:r,portContentSelectors:o},s},_updatePortGroup:function(e){for(var r=bt(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,r),i=0,o=t.length;i<o;i++){var s=t[i],f=this._portElementsCache[s.portId]||{},v=s.portTransformation;this.applyPortTransform(f.portElement,v),this.updateDOMSubtreeAttributes(f.portElement.node,s.portAttrs,{rootBBox:new bt(s.portSize),selectors:f.portSelectors});var C=s.labelTransformation;C&&f.portLabelElement&&(this.applyPortTransform(f.portLabelElement,C,-v.angle||0),this.updateDOMSubtreeAttributes(f.portLabelElement.node,C.attrs,{rootBBox:new bt(s.labelSize),selectors:f.portLabelSelectors}))}},applyPortTransform:function(e,r,t){var i=tt.createSVGMatrix().rotate(t||0).translate(r.x||0,r.y||0).rotate(r.angle||0);e.transform(i,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Di=la.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),la.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,r,t){const i=Ni(r);t=(i?t:e)||{};const{parentRelative:o,deep:s,restrictedArea:c}=t;let f;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const v=this.getParentCell();v&&!v.isLink()&&(f=v.get("position"))}if(i){if(f&&(e+=f.x,r+=f.y),s||c){const{x:v,y:C}=this.get("position");this.translate(e-v,r-C,t)}else this.set("position",{x:e,y:r},t);return this}{const v=_e(this.get("position"));return o?v.difference(f):v}},translate:function(e,r,t){if(r=r||0,0===(e=e||0)&&0===r)return this;(t=t||{}).translateBy=t.translateBy||this.id;var i=this.get("position")||{x:0,y:0},o=t.restrictedArea;if(o&&t.translateBy===this.id)if("function"==typeof o){var s=o.call(this,i.x+e,i.y+r,t);e=s.x-i.x,r=s.y-i.y}else{var c=this.getBBox({deep:!0}),f=i.x-c.x,v=i.y-c.y,C=Math.max(o.x+f,Math.min(o.x+o.width+f-c.width,i.x+e)),M=Math.max(o.y+v,Math.min(o.y+o.height+v-c.height,i.y+r));e=C-i.x,r=M-i.y}var x={x:i.x+e,y:i.y+r};return t.tx=e,t.ty=r,t.transition?(Mr(t.transition)||(t.transition={}),this.transition("position",x,Xt({},t.transition,{valueFunction:af.object})),Bo(this.getEmbeddedCells(),"translate",e,r,t)):(this.startBatch("translate",t),this.set("position",x,t),Bo(this.getEmbeddedCells(),"translate",e,r,t),this.stopBatch("translate",t)),this},size:function(e,r,t){var i=this.get("size");return void 0===e?{width:i.width,height:i.height}:(Mr(e)&&(t=r,r=Ni(e.height)?e.height:i.height,e=Ni(e.width)?e.width:i.width),this.resize(e,r,t))},resize:function(e,r,t){if(this.startBatch("resize",t=t||{}),t.direction){var i=this.get("size");switch(t.direction){case"left":case"right":r=i.height;break;case"top":case"bottom":e=i.width}var c,o=ci(this.get("angle")||0),s=this.getBBox();if(o){var f={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(f+=Math.floor((o+45)/90),f%=4);var v=s[["bottomLeft","corner","topRight","origin"][f]](),C=_e(v).rotate(s.center(),-o),M=Math.sqrt(e*e+r*r)/2,x=f*Math.PI/2;x+=Math.atan(f%2==0?r/e:e/r),x-=di(o);var G=_e.fromPolar(M,x,C);c=_e(G).offset(e/-2,r/-2)}else switch(c=s.topLeft(),t.direction){case"top":case"top-right":c.offset(0,s.height-r);break;case"left":case"bottom-left":c.offset(s.width-e,0);break;case"top-left":c.offset(s.width-e,s.height-r)}this.set("size",{width:e,height:r},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:r},t);return this.stopBatch("resize",t),this},scale:function(e,r,t,i){var o=this.getBBox().scale(e,r,t);return this.startBatch("scale",i),this.position(o.x,o.y,i),this.resize(o.width,o.height,i),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:r}=this;if(!r)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(x=>x.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&Bo(t,"fitEmbeds",e);const{left:i,right:o,top:s,bottom:c}=qs(e.padding);let{x:f,y:v,width:C,height:M}=r.getCellsBBox(t);return f-=i,v-=s,C+=i+o,M+=c+s,this.set({position:{x:f,y:v},size:{width:C,height:M}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,r,t,i){if(t){var o=this.getBBox().center(),s=this.get("size"),c=this.get("position");o.rotate(t,this.get("angle")-e);var f=o.x-s.width/2-c.x,v=o.y-s.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:r,origin:t}),this.position(c.x+f,c.y+v,i),this.rotate(e,r,null,i),this.stopBatch("rotate")}else this.set("angle",r?e:(this.get("angle")+e)%360,i);return this},angle:function(){return ci(this.get("angle")||0)},getBBox:function(e={}){const{graph:r,attributes:t}=this,{deep:i,rotate:o}=e;if(i&&r){const x=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return x.push(this),r.getCellsBBox(x,e)}const{angle:s=0,position:{x:c,y:f},size:{width:v,height:C}}=t,M=new bt(c,f,v,C);return o&&M.rotateAroundCenter(s),M},getPointFromConnectedLink:function(e,r){var t=this.getBBox(),i=t.center(),o=e.get(r);if(!o)return i;var s=o.port;if(!s||!this.hasPort(s))return i;var c=this.portProp(s,["group"]),f=this.getPortsPositions(c),v=new _e(f[s]).offset(t.origin()),C=this.angle();return C&&v.rotate(i,-C),v}});Xt(Di.prototype,Fp);const oo={cells:function(e){return function(){var r=Array.from(arguments),t=r.length,i=t>0&&r[0]||[],o=t>1&&r[t-1]||{};return Array.isArray(i)||(o instanceof la?i=r:i instanceof la&&(r.length>1&&r.pop(),i=r)),o instanceof la&&(o={}),e.call(this,i,o)}}},Dp=Mi.Collection.extend({initialize:function(e,r){this.cellNamespace=r.cellNamespace?r.cellNamespace:"undefined"!=typeof joint&&Ma(joint,"shapes")?joint.shapes:null,this.graph=r.graph},model:function(e,r){var t=r.collection,s=new("link"===e.type?eu:Lu(t.cellNamespace,e.type,".")||Di)(e,r);return r.dry||(s.graph=t.graph),s},comparator:function(e){return e.get("z")||0}}),La=Mi.Model.extend({initialize:function(e,r){var t=new Dp([],{model:(r=r||{}).cellModel,cellNamespace:r.cellNamespace,graph:this});Mi.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:r,target:t}=e.attributes;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:r,target:t}=e.attributes;r.id&&this._out[r.id]&&this._out[r.id][e.id]&&delete this._out[r.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var r=e.previous("source");r.id&&this._out[r.id]&&delete this._out[r.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var r=e.previous("target");r.id&&this._in[r.id]&&delete this._in[r.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=Mi.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,r){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,r)},set:function(e,r,t){var i;return"object"==typeof e?(i=e,t=r):(i={})[e]=r,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,t),i=Ts(i,"cells")),Mi.Model.prototype.set.call(this,i,t)},clear:function(e){e=Xt({},e,{clear:!0});var r=this.get("cells");if(0===r.length)return this;this.startBatch("clear",e);var t=r.sortBy(function(i){return i.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,r){var t;if(e instanceof Mi.Model?(t=e.attributes,!e.graph&&(!r||!r.dry)&&(e.graph=this)):t=e,!mi(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,r){return Array.isArray(e)?this.addCells(e,r):(e instanceof Mi.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,r),r||{}),this)},addCells:function(e,r){return 0===e.length||(e=mp(e),r.maxPosition=r.position=e.length-1,this.startBatch("add",r),e.forEach(function(t){this.addCell(t,r),r.position--},this),this.stopBatch("add",r)),this},resetCells:function(e,r){var t=En(e).map(function(i){return this._prepareCell(i,r)},this);return this.get("cells").reset(t,r),this},removeCells:function(e,r){return e.length&&(this.startBatch("remove"),Bo(e,"remove",r),this.stopBatch("remove")),this},_removeCell:function(e,r,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,r){var t=(r=r||{}).indirect,i=r.inbound,o=r.outbound;void 0===i&&void 0===o&&(i=o=!0);var s=[],c={};function f(x,G){if(To(x.getOutboundEdges(G.id),function(oe,Se){if(!c[Se]){var Ie=x.getCell(Se);s.push(Ie),c[Se]=!0,t&&(i&&v(x,Ie),o&&f(x,Ie))}}.bind(x)),t&&G.isLink()){var ne=G.getTargetCell();ne&&ne.isLink()&&(c[ne.id]||(s.push(ne),f(x,ne)))}}function v(x,G){if(To(x.getInboundEdges(G.id),function(oe,Se){if(!c[Se]){var Ie=x.getCell(Se);s.push(Ie),c[Se]=!0,t&&(i&&v(x,Ie),o&&f(x,Ie))}}.bind(x)),t&&G.isLink()){var ne=G.getSourceCell();ne&&ne.isLink()&&(c[ne.id]||(s.push(ne),v(x,ne)))}}if(o&&f(this,e),i&&v(this,e),r.deep){var C=e.getEmbeddedCells({deep:!0}),M={};C.forEach(function(x){x.isElement()&&(M[x.id]=!0)}),C.forEach(function(x){x.isLink()||(o&&To(this.getOutboundEdges(x.id),function(G,ne){if(!c[ne]){var oe=this.getCell(ne),{source:Se,target:Ie}=oe.attributes,je=Se.id,Ve=Ie.id;if(!r.includeEnclosed&&je&&M[je]&&Ve&&M[Ve])return;s.push(this.getCell(ne)),c[ne]=!0}}.bind(this)),i&&To(this.getInboundEdges(x.id),function(G,ne){if(!c[ne]){var oe=this.getCell(ne),{source:Se,target:Ie}=oe.attributes,je=Se.id,Ve=Ie.id;if(!r.includeEnclosed&&je&&M[je]&&Ve&&M[Ve])return;s.push(this.getCell(ne)),c[ne]=!0}}.bind(this)))},this)}return s},getNeighbors:function(e,r){r||(r={});var t=r.inbound,i=r.outbound;void 0===t&&void 0===i&&(t=i=!0);var o=this.getConnectedLinks(e,r).reduce(function(f,v){var{source:C,target:M}=v.attributes,x=v.hasLoop(r);if(t&&Ma(C,"id")&&!f[C.id]){var G=this.getCell(C.id);G.isElement()&&(x||G&&G!==e&&(!r.deep||!G.isEmbeddedIn(e)))&&(f[C.id]=G)}if(i&&Ma(M,"id")&&!f[M.id]){var ne=this.getCell(M.id);ne.isElement()&&(x||ne&&ne!==e&&(!r.deep||!ne.isEmbeddedIn(e)))&&(f[M.id]=ne)}return f}.bind(this),{});if(e.isLink()){if(t){var s=e.getSourceCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}if(i){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return En(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var i=[],o=t.get("parent");o;)i.push(o),o=this.getCell(o).get("parent");return i},this);e=e.sort(function(t,i){return t.length-i.length});var r=En(e.shift()).find(function(t){return e.every(function(i){return i.includes(t)})});return this.getCell(r)},getSuccessors:function(e,r){var t=[];return this.search(e,function(i){i!==e&&t.push(i)},Xt({},r=r||{},{outbound:!0})),t},cloneCells:cf,cloneSubgraph:function(e,r){var t=this.getSubgraph(e,r);return this.cloneCells(t)},getSubgraph:function(e,r){r=r||{};var t=[],i={},o=[],s=[];return En(e).forEach(function(c){i[c.id]||(t.push(c),i[c.id]=c,c.isLink()?s.push(c):o.push(c)),r.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(v){i[v.id]||(t.push(v),i[v.id]=v,v.isLink()?s.push(v):o.push(v))})}),s.forEach(function(c){var{source:f,target:v}=c.attributes;if(f.id&&!i[f.id]){var C=this.getCell(f.id);t.push(C),i[C.id]=C,o.push(C)}if(v.id&&!i[v.id]){var M=this.getCell(v.id);t.push(this.getCell(v.id)),i[M.id]=M,o.push(M)}},this),o.forEach(function(c){this.getConnectedLinks(c,r).forEach(function(v){var{source:C,target:M}=v.attributes;!i[v.id]&&C.id&&i[C.id]&&M.id&&i[M.id]&&(t.push(v),i[v.id]=v)})},this),t},getPredecessors:function(e,r){var t=[];return this.search(e,function(i){i!==e&&t.push(i)},Xt({},r=r||{},{inbound:!0})),t},search:function(e,r,t){(t=t||{}).breadthFirst?this.bfs(e,r,t):this.dfs(e,r,t)},bfs:function(e,r,t={}){const i={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){var c=s.shift();if(i[c.id]||(i[c.id]=!0,!1===r.call(this,c,o[c.id])))continue;const f=this.getNeighbors(c,t);for(let v=0,C=f.length;v<C;v++){const M=f[v];o[M.id]=o[c.id]+1,s.push(M)}}},dfs:function(e,r,t={}){const i={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){const c=s.pop();if(i[c.id]||(i[c.id]=!0,!1===r.call(this,c,o[c.id])))continue;const f=this.getNeighbors(c,t),v=s.length;for(let C=0,M=f.length;C<M;C++){const x=f[C];o[x.id]=o[c.id]+1,s.splice(v,0,x)}}},getSources:function(){var e=[];return To(this._nodes,function(r,t){(!this._in[t]||Za(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return To(this._nodes,function(r,t){(!this._out[t]||Za(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||Za(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Za(this._out[e.id])},isSuccessor:function(e,r){var t=!1;return this.search(e,function(i){if(i===r&&i!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,r){var t=!1;return this.search(e,function(i){if(i===r&&i!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,r,t){var i=(t=t||{}).inbound,o=t.outbound;void 0===i&&void 0===o&&(i=o=!0);var s=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:f,target:v}=c.attributes;if(i&&Ma(f,"id")&&f.id===r.id||o&&Ma(v,"id")&&v.id===r.id)return s=!0,!1}),s},disconnectLinks:function(e,r){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},r)})},removeLinks:function(e,r){Bo(this.getConnectedLinks(e),"remove",r)},findModelsFromPoint:function(e){return this.getElements().filter(r=>r.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,r={}){const t=new bt(e),{strict:i=!1}=r,o=i?"containsRect":"intersect";return this.getElements().filter(s=>t[o](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,r={}){const{searchBy:t="bbox"}=r,i=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(i):this.findModelsFromPoint(i[t]())).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,r={}){const{rotate:t=!0}=r;return En(e).reduce(function(i,o){const s=o.getBBox({rotate:t});return s?i?i.union(s):s:i},null)},translate:function(e,r,t){var i=this.getCells().filter(function(o){return!o.isEmbedded()});return Bo(i,"translate",e,r,t),this},resize:function(e,r,t){return this.resizeCells(e,r,this.getCells(),t)},resizeCells:function(e,r,t,i){var o=this.getCellsBBox(t);if(o){var s=Math.max(e/o.width,0),c=Math.max(r/o.height,0);Bo(t,"scale",s,c,o.origin(),i)}return this},startBatch:function(e,r){return r=r||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Xt({},r,{batchName:e}))},stopBatch:function(e,r){return r=r||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Xt({},r,{batchName:e}))},hasActiveBatch:function(e){const r=this._batches;let t;return t=0===arguments.length?Object.keys(r):Array.isArray(e)?e:[e],t.some(i=>r[i]>0)}},{validations:{multiLinks:function(e,r){var{source:t,target:i}=r.attributes;if(t.id&&i.id){var o=r.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(f){var{source:v,target:C}=f.attributes;return v&&v.id===t.id&&(!v.port||v.port===t.port)&&C&&C.id===i.id&&(!C.port||C.port===i.port)}).length>1)return!1}return!0},linkPinning:function(e,r){var{source:t,target:i}=r.attributes;return t.id&&i.id}}});!function(e,r,t){if(mi(t)){if(!oo[t])throw new Error('Unknown wrapper: "'+t+'"');t=oo[t]}if(!er(t))throw new Error("Wrapper must be a function.");En(["resetCells","addCells","removeCells"]).forEach(function(i){e[i]=t(e[i])})}(La.prototype,0,oo.cells);const Vo={exportElement:function(e){return e.size()},exportLink:function(e){var r=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:r.width||0,height:r.height||0}},importElement:function(e,r,t){var i=this.getCell(r),o=t.node(r);e.setPosition?e.setPosition(i,o):i.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,r,t){const o=this.getCell(r.name),s=t.edge(r),c=s.points||[],f=new qn(c);if(e.setVertices||e.setLinkVertices)if(er(e.setVertices))e.setVertices(o,c);else{f.simplify({threshold:.001});const v=f.points.map(M=>M.toJSON());o.set("vertices",v.slice(1,v.length-1))}if(e.setLabels&&"x"in s&&"y"in s){const v={x:s.x,y:s.y};if(er(e.setLabels))e.setLabels(o,v,c);else{const C=f.closestPointLength(v),M=f.pointAtLength(C),x=C/f.length(),G=new _e(v).difference(M).toJSON();o.label(0,{position:{distance:x,offset:G}})}}},layout:function(e,r){var t;t=e instanceof La?e:(new La).resetCells(e,{dry:!0,sort:!1}),e=null;const i=(r=Ji(r||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===i)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Vo.toGraphLib(t,{graphlib:r.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:r.exportElement,setEdgeLabel:r.exportLink,setEdgeName:function(M){return M.id}}),s={},c=r.marginX||0,f=r.marginY||0;if(r.rankDir&&(s.rankdir=r.rankDir),r.align&&(s.align=r.align),r.nodeSep&&(s.nodesep=r.nodeSep),r.edgeSep&&(s.edgesep=r.edgeSep),r.rankSep&&(s.ranksep=r.rankSep),r.ranker&&(s.ranker=r.ranker),c&&(s.marginx=c),f&&(s.marginy=f),o.setGraph(s),i.layout(o,{debugTiming:!!r.debugTiming}),t.startBatch("layout"),Vo.fromGraphLib(o,{importNode:this.importElement.bind(t,r),importEdge:this.importLink.bind(t,r)}),r.resizeClusters){var v=o.nodes().filter(function(M){return o.children(M).length>0}).map(t.getCell.bind(t)).sort(function(M,x){return x.getAncestors().length-M.getAncestors().length});Bo(v,"fitEmbeds",{padding:r.clusterPadding})}t.stopBatch("layout");var C=o.graph();return new bt(c,f,Math.abs(C.width-2*c),Math.abs(C.height-2*f))},fromGraphLib:function(e,r){var t=(r=r||{}).importNode||Aa,i=r.importEdge||Aa,o=this instanceof La?this:new La;return e.nodes().forEach(function(s){t.call(o,s,e,o,r)}),e.edges().forEach(function(s){i.call(o,s,e,o,r)}),o},toGraphLib:function(e,r){const t=(r=r||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var i=lf(r,"directed","compound","multigraph"),o=new t.Graph(i),s=r.setNodeLabel||Aa,c=r.setEdgeLabel||Aa,f=r.setEdgeName||Aa,v=e.get("cells"),C=0,M=v.length;C<M;C++){var x=v.at(C);if(x.isLink()){var G=x.get("source"),ne=x.get("target");if(!G.id||!ne.id)break;o.setEdge(G.id,ne.id,c(x),f(x))}else if(o.setNode(x.id,s(x)),o.isCompound()&&x.has("parent")){var oe=x.get("parent");v.has(oe)&&o.setParent(x.id,oe)}}return o}};La.prototype.toGraphLib=function(e){return Vo.toGraphLib(this,e)},La.prototype.fromGraphLib=function(e,r){return Vo.fromGraphLib.call(this,e,r)};const dn={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,r){return this._tests[e]=r},test:function(e){var r=this._tests[e];if(!r)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=r()}catch(i){t=!1}return this._results[e]=t,t}},Rr=(Di.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Di.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Di.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Di.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Di.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Di.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Di.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Di.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Di.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Di.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Di.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Di.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,r){if(void 0===e)return this.attr("body/lateralArea");var t=Co(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},r)}},{attributes:{lateralArea:{set:function(e,r){var t=Co(e);t&&(e=parseFloat(e)/100);var i=r.x,o=r.y,s=r.width,c=r.height,v=t?c*e:e,C=tt.KAPPA,M=C*(s/2),x=C*(t?c*e:e),ne=i+s/2,oe=i+s,Se=o+v,Ie=Se-v,je=o+c-v,Ve=o+c;return{d:["M",i,Se,"L",i,je,"C",i,je+x,ne-M,Ve,ne,Ve,"C",ne+M,Ve,oe,je+x,oe,je,"L",oe,Se,"C",oe,Se-x,ne+M,Ie,ne,Ie,"C",ne-M,Ie,i,Se-x,i,Se,"Z"].join(" ")}}}}});var Ar=dn.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Di.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Ar]},{attributes:{text:{set:function(e,r,t,i){if(!(t instanceof HTMLElement)){var o=i.style||{},s={text:e,width:-5,height:"100%"},c=Xt({textVerticalAnchor:"middle"},o);return xf.textWrap.set.call(this,s,r,t,c),{fill:o.color||null}}t.textContent=e},position:function(e,r,t){if(t instanceof SVGElement)return r.center()}}}});const Rf=eu.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Is=(eu.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),eu.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),tu=Mi.View.extend({options:{},theme:null,themeClassNamePrefix:Qi("theme-"),requireSetThemeOverride:!1,defaultTheme:ro.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Xt({},this.options,e),Mi.View.call(this,e)},initialize:function(){Is[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=Fr(this,"children")),e){var r=this.svgElement,i=io(e,tt.namespace[r?"svg":"xhtml"]);(r?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttribute:function(e,r){for(var t=r;t&&1===t.nodeType;){var i=t.getAttribute(e);if(i)return i;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Fr(this,"el"));else{var e=Fr(this,"tagName"),r=Xt({},Fr(this,"attributes")),t=Xt({},Fr(this,"style"));this.id&&(r.id=Fr(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(r),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(tt.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof Mi.$?e:Mi.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=tt(this.el))},_ensureElClassName:function(){var e=Fr(this,"className");if(e){var r=Qi(e);this.svgElement?this.vel.removeClass(e).addClass(r):this.$el.removeClass(e).addClass(r)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,r){return r=r||{},this.theme&&this.requireSetThemeOverride&&!r.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var r=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(r):this.$el.addClass(r),this},removeThemeClassName:function(e){var r=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(r):this.$el.removeClass(r),this},onSetTheme:function(e,r){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Is[this.cid]=null,Mi.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,r,t){if(!r)return this;t||(t={});var i=this.getEventNamespace();for(var o in r){var s=r[o];"function"!=typeof s&&(s=this[s]),s&&rr(e).on(o+i,t,s.bind(this))}return this},undelegateElementEvents:function(e){return rr(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,r){return e||(e=Fr(this,"documentEvents")),this.delegateElementEvents(document,e,r)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,r){if(!e)throw new Error("eventData(): event object required.");var t=e.data,i="__"+this.cid+"__";return void 0===r?t&&t[i]||{}:(t||(t=e.data={}),t[i]||(t[i]={}),Xt(t[i],r),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),r=e[0]&&Xt({},e[0])||{},t=e[1]&&Xt({},e[1])||{},i=r.render||this.prototype&&this.prototype.render||null;return r.render=function(){return"function"==typeof i&&i.apply(this,arguments),this.render.__render__===i&&this.onRender(),this},r.render.__render__=i,Mi.View.extend.call(this,r,t)}});if(rr.event&&!("dbltap"in rr.event.special)){const e=ro.doubleTapInterval,r=30;rr.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...i){const{handleObj:o,target:s}=t,c=rr.data(s),f=(new Date).getTime(),v="lastTouch"in c?f-c.lastTouch:0;v<e&&v>r?(c.lastTouch=null,t.type=o.origType,o.handler.call(this,t,...i)):c.lastTouch=f}}}function Fc(e){return e?Array.isArray(e)?e:[e]:[]}const Fa=tu.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,r){const{paper:t}=e;this.cellView=e,this.nodeSelector=r,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:r}=this;return this.update(e,r),this.mount(),this.transform(),0},findNode(e,r=null){let t;if("string"==typeof r)[t]=e.findBySelector(r);else if(ii(r)){const i=e.model.isLink(),{label:o=null,port:s,selector:c}=r;i&&null!==o?t=e.findLabelNode(o,c):!i&&s?t=e.findPortNode(s,c):[t]=e.findBySelector(c)}else r&&(t=tt.toNode(r),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:r,el:t,options:i,transformGroup:o}=this;if(!e||o)return;const{vel:s,paper:c}=r,{layer:f}=i;if(f){const v=this.transformGroup=tt("g").addClass("highlight-transform").append(t);c.getLayerView(f).insertSortedNode(v.node,i.z)}else(!t.parentNode||t.nextSibling)&&s.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:r,vel:t}=this;!e||(r?(this.transformGroup=null,r.remove()):t.remove())},transform(){const{transformGroup:e,cellView:r,updateRequested:t}=this;if(!e||r.model.isLink()||t)return;const i=r.getRootTranslateMatrix(),o=r.getRootRotateMatrix(),s=i.multiply(o);e.attr("transform",tt.matrixToTransformString(s))},update(){const{node:e,cellView:r,nodeSelector:t,updateRequested:i,id:o}=this;if(i)return;const s=this.node=this.findNode(r,t);e&&this.unhighlight(r,e),s?(this.highlight(r,s),this.mount()):(this.unmount(),r.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:r,id:t,constructor:i}=this;e&&this.unhighlight(r,e),this.unmount(),i._removeRef(r,t)},highlight(e,r){},unhighlight(e,r){}},{_views:{},highlight:function(e,r,t){const i=this.uniqueId(r,t);this.add(e,r,i,t)},unhighlight:function(e,r,t){const i=this.uniqueId(r,t);this.remove(e,i)},get(e,r=null){const{cid:t}=e,{_views:i}=this,o=i[t];if(null===r){const s=[];if(!o)return s;for(let c in o){const f=o[c];f instanceof this&&s.push(f)}return s}if(!o)return null;if(r in o){const s=o[r];if(s instanceof this)return s}return null},add(e,r,t,i={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const o=Fa.get(e,t);o&&o.remove();const s=new this(i);return s.id=t,this._addRef(e,t,s),s.requestUpdate(e,r),s},_addRef(e,r,t){const{cid:i}=e,{_views:o}=this;let s=o[i];s||(s=o[i]={}),s[r]=t},_removeRef(e,r){const{cid:t}=e,{_views:i}=this,o=i[t];if(o){r&&delete o[r];for(let s in o)return;delete i[t]}},remove(e,r=null){Fc(this.get(e,r)).forEach(t=>{t.remove()})},update(e,r=null,t=!1){Fc(this.get(e,r)).forEach(i=>{(t||i.UPDATABLE)&&i.update()})},transform(e,r=null){Fc(this.get(e,r)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,r="")=>tt.ensureId(e)+JSON.stringify(r)}),ca={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},In=tu.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],r=this.model.get("type");return r&&r.toLowerCase().split(".").forEach(function(t,i,o){e.push("type-"+o.slice(0,i+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var i,o,s,e={},r={},t=0,c=Fr(this,"presentationAttributes");for(var f in c)if(c.hasOwnProperty(f)){var v=c[f];for(Array.isArray(v)||(v=[v]),i=0,o=v.length;i<o;i++){var C=e[s=v[i]];C||(C=e[s]=1<<t++),r[f]|=C}}var M=Fr(this,"initFlag");for(Array.isArray(M)||(M=[M]),i=0,o=M.length;i<o;i++)e[s=M[i]]||(e[s]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=r},hasFlag:function(e,r){return e&this.getFlag(r)},removeFlag:function(e,r){return e^e&this.getFlag(r)},getFlag:function(e){var r=this._flags;if(!r)return 0;var t=0;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)t|=r[e[i]];else t|=r[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||Fu(this),tu.call(this,e)},initialize:function(){this.setFlags(),tu.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,r){var t=e.getChangeFlag(this._presentationAttributes);r.updateHandled||!t||(r.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),r.tool&&(r.async=!1),this.requestUpdate(t,r))},requestUpdate:function(e,r){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,r)},parseDOMJSON:function(e,r){var t=io(e),i=t.selectors,o=t.groupSelectors;for(var s in o){if(i[s])throw new Error("dia.CellView: ambiguous group selector");i[s]=o[s]}if(r){var c=this.selector;if(i[c])throw new Error("dia.CellView: ambiguous root selector.");i[c]=r}return{fragment:t.fragment,selectors:i}},can:function(e){var r=er(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Mr(r)&&!1!==r[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(r)&&!1!==r},findBySelector:function(e,r,t){if(r||(r=this.el),t||(t=this.selectors),!e||"."===e)return[r];if(t){var i=t[e];if(i)return Array.isArray(i)?i:[i]}return ro.useCSSSelectors?rr(r).find(e).toArray():[]},notify:function(e){if(this.paper){var r=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(r)),this.paper.trigger.apply(this.paper,[e,this].concat(r))}},getBBox:function(e){var r;if(e&&e.useModelGeometry){var t=this.model;r=t.getBBox().bbox(t.angle())}else r=this.getNodeBBox(this.el);return this.paper.localToPaperRect(r)},getNodeBBox:function(e){var r=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),i=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return tt.transformRect(r,i.multiply(o).multiply(t))},getNodeUnrotatedBBox:function(e){var r=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),i=this.getRootTranslateMatrix();return tt.transformRect(r,i.multiply(t))},getRootTranslateMatrix:function(){var r=this.model.position();return tt.createSVGMatrix().translate(r.x,r.y)},getRootRotateMatrix:function(){var e=tt.createSVGMatrix(),r=this.model,t=r.angle();if(t){var i=r.getBBox(),o=i.width/2,s=i.height/2;e=e.translate(o,s).rotate(t).translate(-o,-s)}return e},_notifyHighlight:function(e,r,t={}){const{el:i}=this;let o;if([o=i]="string"==typeof r?this.findBySelector(r):this.$(r),t.partial=o!==i,void 0===t.type){let s;switch(!0){case t.embedding:s=ca.EMBEDDING;break;case t.connecting:s=ca.CONNECTING;break;case t.magnetAvailability:s=ca.MAGNET_AVAILABILITY;break;case t.elementAvailability:s=ca.ELEMENT_AVAILABILITY;break;default:s=ca.DEFAULT}t.type=s}return this.notify(e,o,t),this},highlight:function(e,r){return this._notifyHighlight("cell:highlight",e,r)},unhighlight:function(e,r={}){return this._notifyHighlight("cell:unhighlight",e,r)},findMagnet:function(e){const r=this.el;let t=this.$(e)[0];t||(t=r);do{const i=t.getAttribute("magnet"),o=t===r;if((i||o)&&"false"!==i)return t;if(o)return;t=t.parentNode}while(t)},findProxyNode:function(e,r){e||(e=this.el);const t=e.getAttribute(`${r}-selector`);if(t){const[i]=this.findBySelector(t);if(i)return i}return e},getSelector:function(e,r){var t;if(e===this.el)return"string"==typeof r&&(t="> "+r),t;if(e){var i=tt(e).index()+1;t=e.tagName+":nth-child("+i+")",r&&(t+=" > "+r),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,r,t){var i=this.paper,o=i.model,s=i.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,r,t,s,"source"),target:{x:r,y:t}}).addTo(o,{async:!1,ui:!0}),s.findView(i)},getLinkEnd:function(e,...r){var t=this.model,i=t.id,o=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),c={id:i};return null!=s&&(c.magnet=s),null!=o?(c.port=o,!t.hasPort(o)&&!s&&(c.selector=this.getSelector(e))):null==s&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...r)},customizeLinkEnd:function(e,r,t,i,o,s){const{paper:c}=this,{connectionStrategy:f}=c.options;if("function"==typeof f){var v=f.call(c,e,this,r,new _e(t,i),o,s,c);if(v)return v}return e},getMagnetFromLinkEnd:function(e){var s,r=this.el,t=e.port,i=e.magnet,o=this.model;return null!=t&&o.isElement()&&o.hasPort(t)?s=this.findPortNode(t,i)||r:(i||(i=e.selector),!i&&null!=t&&(i='[port="'+t+'"]'),s=this.findBySelector(i,r,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,r,t,i){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(r,t,i);o.notifyPointerdown(e,t,i),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,r,t){var i=this.eventData(e),o=i.linkView;if(o)o.pointermove(e,r,t);else{var s=this.paper,c=s.options.magnetThreshold,f=this.getEventTarget(e),v=i.targetMagnet;if("onleave"===c){if(v===f||tt(v).contains(f))return}else if(s.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,v,r,t)}},dragLinkEnd:function(e,r,t){var o=this.eventData(e).linkView;!o||(o.pointerup(e,r,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,r){Za(r)||(e instanceof SVGElement?tt(e).attr(r):rr(e).attr(r))},processNodeAttributes:function(e,r){var t,i,o,s,c,f,v,C,M,x=[];for(t in r)!r.hasOwnProperty(t)||(i=r[t],!(o=this.getAttributeDefinition(t))||er(o.qualify)&&!o.qualify.call(this,i,e,r)?(f||(f={}),f[ap(t)]=i):(mi(o.set)&&(f||(f={}),f[o.set]=i),null!==i&&x.push(t,o)));for(s=0,c=x.length;s<c;s+=2)i=r[t=x[s]],er((o=x[s+1]).set)&&(v||(v={}),v[t]=i),er(o.position)&&(C||(C={}),C[t]=i),er(o.offset)&&(M||(M={}),M[t]=i);return{raw:r,normal:f,set:v,position:C,offset:M}},updateRelativeAttributes:function(e,r,t,i){i||(i={});var o,s,f=r.raw||{},v=r.normal||{},C=r.set,M=r.position,x=r.offset;for(o in C){s=C[o];var G=this.getAttributeDefinition(o).set.call(this,s,t.clone(),e,f);Mr(G)?Xt(v,G):void 0!==G&&(v[o]=G)}if(e instanceof HTMLElement)this.setNodeAttributes(e,v);else{var Ie,je,Ve,ne=v.transform,oe=tt.transformStringToMatrix(ne),Se=_e(oe.e,oe.f);if(ne&&(v=Ts(v,"transform"),oe.e=oe.f=0),M||x){var L=this.getNodeScale(e,i.scalableNode);Ie=L.sx,je=L.sy}var z=!1;for(o in M)s=M[o],(Ve=this.getAttributeDefinition(o).position.call(this,s,t.clone(),e,f))&&(Se.offset(_e(Ve).scale(Ie,je)),z||(z=!0));this.setNodeAttributes(e,v);var Q=!1;if(x){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var ve=tt.transformRect(ie,oe).scale(1/Ie,1/je);for(o in x)s=x[o],(Ve=this.getAttributeDefinition(o).offset.call(this,s,ve,e,f))&&(Se.offset(_e(Ve).scale(Ie,je)),Q||(Q=!0))}}(void 0!==ne||z||Q)&&(Se.round(1),oe.e=Se.x,oe.f=Se.y,e.setAttribute("transform",tt.matrixToTransformString(oe)))}},getNodeScale:function(e,r){var t,i;if(r&&r.contains(e)){var o=r.scale();t=1/o.sx,i=1/o.sy}else t=1,i=1;return{sx:t,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var r=this.metrics;if(!r)return{};var t=tt.ensureId(e),i=r[t];return i||(i=r[t]={}),i},getNodeData:function(e){var r=this.nodeCache(e);return r.data||(r.data={}),r.data},getNodeBoundingRect:function(e){var r=this.nodeCache(e);return void 0===r.boundingRect&&(r.boundingRect=tt(e).getBBox()),new bt(r.boundingRect)},getNodeMatrix:function(e){var r=this.nodeCache(e);if(void 0===r.magnetMatrix){var t=this.rotatableNode||this.el;r.magnetMatrix=tt(e).getTransformToElement(t)}return tt.createSVGMatrix(r.magnetMatrix)},getNodeShape:function(e){var r=this.nodeCache(e);return void 0===r.geometryShape&&(r.geometryShape=tt(e).toGeometryShape()),r.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,r,t,i){var o,s,c,f,v={},C=[];for(var M in e)if(e.hasOwnProperty(M)&&ii(c=e[M])){var x=t[M]=this.findBySelector(M,r,i);for(o=0,s=x.length;o<s;o++){var G=x[o];f=tt.ensureId(G);var ne=i&&i[M]===G,oe=v[f];if(oe){oe.array||(C.push(f),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var Se=oe.attributes,Ie=oe.selectedLength;if(ne)Se.unshift(c),Ie.unshift(-1);else{var je=sf(Ie,s);Se.splice(je,0,c),Ie.splice(je,0,s)}}else v[f]={attributes:c,selectedLength:ne?-1:s,node:G,array:!1}}}for(o=0,s=C.length;o<s;o++)(c=v[f=C[o]]).attributes=pi({},...c.attributes.reverse());return v},getEventTarget:function(e,r={}){const{target:t,type:i,clientX:o=0,clientY:s=0}=e;return r.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(o,s):t},updateDOMSubtreeAttributes:function(e,r,t){t||(t={}),t.rootBBox||(t.rootBBox=bt()),t.selectors||(t.selectors=this.selectors);var f,v,C,M,x,i={},o={},s=[],c=[],G=t.roAttributes,ne=this.findNodesAttributes(G||r,e,i,t.selectors),oe=G?this.findNodesAttributes(r,e,i,t.selectors):ne;for(var Se in ne)if((x=this.processNodeAttributes(v=(M=ne[Se]).node,C=M.attributes)).set||x.position||x.offset){var Ve,Ie=oe[Se]&&oe[Se].attributes,je=Ie&&void 0===C.ref?Ie.ref:C.ref;if(je){if(!(Ve=(i[je]||this.findBySelector(je,e,t.selectors))[0]))throw new Error('dia.CellView: "'+je+'" reference does not exist.')}else Ve=null;if(f={node:v,refNode:Ve,processedAttributes:x,allAttributes:Ie},Ve){var L=c.findIndex(function(vt){return vt.refNode===v});L>-1?c.splice(L,0,f):c.push(f)}else s.push(f)}else this.setNodeAttributes(v,x.normal);s.push(...c);for(var z,Q=0,ie=s.length;Q<ie;Q++){v=(f=s[Q]).node,Ve=f.refNode;var ve=tt(t.rotatableNode),Pe=Ve?tt.ensureId(Ve):"",Fe=!!ve&&!!Ve&&ve.contains(Ve),Ye=o[Pe];if(!Ye){var gt=Fe?ve:e;Ye=o[Pe]=Ve?tt(Ve).getBBox({target:gt}):t.rootBBox}G?(x=this.processNodeAttributes(v,f.allAttributes),this.mergeProcessedAttributes(x,f.processedAttributes)):x=f.processedAttributes;var lt=Ye;Fe&&!ve.contains(v)&&(z||(z=tt.transformStringToMatrix(ve.attr("transform"))),lt=tt.transformRect(Ye,z)),this.updateRelativeAttributes(v,x,lt,t)}},mergeProcessedAttributes:function(e,r){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Xt(e.set,r.set),Xt(e.position,r.position),Xt(e.offset,r.offset);var t=e.normal&&e.normal.transform;void 0!==t&&r.normal&&(r.normal.transform=t),e.normal=r.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var r=this._toolsView;return!(!r||e&&r.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var r=this._toolsView;return r&&r.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Fa.remove(this)},updateHighlighters:function(e=!1){Fa.update(this,null,e)},transformHighlighters:function(){Fa.transform(this)},pointerdblclick:function(e,r,t){this.notify("cell:pointerdblclick",e,r,t)},pointerclick:function(e,r,t){this.notify("cell:pointerclick",e,r,t)},contextmenu:function(e,r,t){this.notify("cell:contextmenu",e,r,t)},pointerdown:function(e,r,t){const{model:i}=this,{graph:o}=i;o&&(i.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,r,t)},pointermove:function(e,r,t){this.notify("cell:pointermove",e,r,t)},pointerup:function(e,r,t){const{graph:i}=this.eventData(e);this.notify("cell:pointerup",e,r,t),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,r,t,i){this.notify("cell:mousewheel",e,r,t,i)},onevent:function(e,r,t,i){this.notify(r,e,t,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:r}=this;r.isAsync()&&r.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),i=r.findView(t);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:ca,addPresentationAttributes:function(e){return pi({},Fr(this.prototype,"presentationAttributes"),e,function(r,t){if(r&&t&&("string"==typeof r&&(r=[r]),"string"==typeof t&&(t=[t]),Array.isArray(r)&&Array.isArray(t)))return Tl(r.concat(t))})}}),Nn={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Hu=In.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=In.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){In.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Nn.UPDATE],position:[Nn.TRANSLATE,Nn.TOOLS],size:[Nn.RESIZE,Nn.PORTS,Nn.TOOLS],angle:[Nn.ROTATE,Nn.TOOLS],markup:[Nn.RENDER],ports:[Nn.PORTS]},initFlag:[Nn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,r){const{useCSSSelectors:t}=ro;this.hasFlag(e,Nn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let i=!1;if(this.hasFlag(e,Nn.RENDER))this.render(),this.updateTools(r),this.updateHighlighters(!0),i=!0,e=this.removeFlag(e,[Nn.RENDER,Nn.UPDATE,Nn.RESIZE,Nn.TRANSLATE,Nn.ROTATE,Nn.PORTS,Nn.TOOLS]);else{let o=!1;this.hasFlag(e,Nn.RESIZE)&&(this.resize(r),o=!0,e=this.removeFlag(e,[Nn.RESIZE,Nn.UPDATE])),this.hasFlag(e,Nn.UPDATE)&&(this.update(this.model,null,r),e=this.removeFlag(e,Nn.UPDATE),o=!0,t&&(e=this.removeFlag(e,Nn.PORTS))),this.hasFlag(e,Nn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Nn.TRANSLATE),i=!0),this.hasFlag(e,Nn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Nn.ROTATE),i=!0),this.hasFlag(e,Nn.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,Nn.PORTS)),o&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(e,Nn.TOOLS)&&(this.updateTools(r),e=this.removeFlag(e,Nn.TOOLS)),e},_initializePorts:function(){},update:function(e,r){this.cleanNodesCache();const{useCSSSelectors:t}=ro;t&&this._removePorts();var i=this.model,o=i.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new bt(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:r===o?null:r}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,r=e.get("markup")||e.markup;if(!r)throw new Error("dia.ElementView: markup required");if(Array.isArray(r))return this.renderJSONMarkup(r);if("string"==typeof r)return this.renderStringMarkup(r);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var r=this.parseDOMJSON(e,this.el),t=this.selectors=r.selectors;this.rotatableNode=tt(t[this.rotatableSelector])||null,this.scalableNode=tt(t[this.scalableSelector])||null,this.vel.append(r.fragment)},renderStringMarkup:function(e){var r=this.vel;r.append(tt(e)),this.rotatableNode=r.findOne(".rotatable"),this.scalableNode=r.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),ro.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),r=this.getRotateString();r&&(e+=" "+r),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,r=e.angle;if(!r)return null;var t=e.size;return"rotate("+r+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var r=this.model,t=r.angle(),i=r.size(),o=this.scalableNode,s=!1;o.node.getElementsByTagName("path").length>0&&(s=!0);var c=o.getBBox({recursive:s});o.attr("transform","scale("+i.width/(c.width||1)+","+i.height/(c.height||1)+")");var C=this.rotatableNode,M=C&&C.attr("transform");if(M){C.attr("transform",M+" rotate("+-t+","+i.width/2+","+i.height/2+")");var x=o.getBBox({target:this.paper.cells});r.set("position",{x:x.x,y:x.y},Xt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const r=e.model||this.model,i=(e.paper||this.paper).model,o=e.initialZIndices={},s=r.getEmbeddedCells({deep:!0}),c=i.getConnectedLinks(r,{deep:!0,includeEnclosed:!0});[r,...s,...c].forEach(C=>o[C.id]=C.attributes.z),r.startBatch("to-front"),r.toFront({deep:!0,ui:!0});const f=i.getElements().reduce((C,M)=>Math.max(C,M.attributes.z||0),0);c.forEach(C=>{C.attributes.z<=f&&C.set("z",f+1,{ui:!0})}),r.stopBatch("to-front");const v=r.parent();v?(i.getCell(v).unembed(r,{ui:!0}),e.initialParentId=v):e.initialParentId=null},processEmbedding:function(e={},r,t,i){const o=e.model||this.model,s=e.paper||this.paper,c=s.model,{findParentBy:f,frontParentOnly:v,validateEmbedding:C}=s.options;let M;M=er(f)?En(f.call(c,this,r,t,i)):"pointer"===f?En(c.findModelsFromPoint({x:t,y:i})):c.findModelsUnderElement(o,{searchBy:f}),M=M.filter(ne=>ne instanceof la&&o.id!==ne.id&&!ne.isEmbeddedIn(o)),v&&(M=M.slice(-1));let x=null;const G=e.candidateEmbedView;for(let ne=M.length-1;ne>=0;ne--){const oe=M[ne];if(G&&G.model.id==oe.id){x=G;break}{const Se=oe.findView(s);if(!er(C)||C.call(s,this,Se)){x=Se;break}}}x&&x!=G&&(this.clearEmbedding(e),e.candidateEmbedView=x.highlight(x.findProxyNode(null,"container"),{embedding:!0})),!x&&G&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var r=e.candidateEmbedView;r&&(r.unhighlight(r.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const r=e.candidateEmbedView,t=e.model||this.model,i=e.paper||this.paper;if(r)r.model.embed(t,{ui:!0}),r.unhighlight(r.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=i.options,{initialParentId:s}=e;if(s&&"function"==typeof o&&!o.call(i,this))return void this._disallowUnembed(e)}i.model.getConnectedLinks(t,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:r,whenNotAllowed:t="revert"}=e,i=r||this.model,s=(e.paper||this.paper).model;switch(t){case"remove":i.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:f,initialZIndices:v}=e;if(f){const{x:M,y:x}=f;i.position(M,x,{deep:!0,ui:!0})}v&&Object.keys(v).forEach(M=>{const x=s.getCell(M);x&&x.set("z",v[M],{ui:!0})});const C=s.getCell(c);C&&C.embed(i,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,r=e.model,t=e.paper;e&&!r.isLink();){if(!r.isEmbedded()||e.can("stopDelegation"))return e;r=r.getParentCell(),e=t.findViewByModel(r)}return null},findProxyNode:function(e,r){e||(e=this.el);const t=e.getAttribute(`${r}-selector`);if(t){const i=this.findAttribute("port",e);if(i){const o=this.findPortNode(i,t);if(o)return o}else{const[o]=this.findBySelector(t);if(o)return o}}return e},notifyPointerdown(e,r,t){In.prototype.pointerdown.call(this,e,r,t),this.notify("element:pointerdown",e,r,t)},notifyPointermove(e,r,t){In.prototype.pointermove.call(this,e,r,t),this.notify("element:pointermove",e,r,t)},notifyPointerup(e,r,t){this.notify("element:pointerup",e,r,t),In.prototype.pointerup.call(this,e,r,t)},pointerdblclick:function(e,r,t){In.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,r,t)},pointerclick:function(e,r,t){In.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,r,t)},contextmenu:function(e,r,t){In.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,r,t)},pointerdown:function(e,r,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,r,t),this.dragStart(e,r,t))},pointermove:function(e,r,t){var i=this.eventData(e);switch(i.action){case"magnet":this.dragMagnet(e,r,t);break;case"move":(i.delegatedView||this).drag(e,r,t);default:this.notifyPointermove(e,r,t)}this.eventData(e,i)},pointerup:function(e,r,t){var i=this.eventData(e);switch(i.action){case"magnet":this.dragMagnetEnd(e,r,t);break;case"move":(i.delegatedView||this).dragEnd(e,r,t);default:this.notifyPointerup(e,r,t)}var o=i.targetMagnet;o&&this.magnetpointerclick(e,o,r,t),this.checkMouseleave(e)},mouseover:function(e){In.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){In.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){In.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){In.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,r,t,i){In.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,r,t,i)},onmagnet:function(e,r,t){this.dragMagnetStart(e,r,t)},magnetpointerdblclick:function(e,r,t,i){this.notify("element:magnet:pointerdblclick",e,r,t,i)},magnetcontextmenu:function(e,r,t,i){this.notify("element:magnet:contextmenu",e,r,t,i)},dragStart:function(e,r,t){var i=this.getDelegatedView();if(!i||!i.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:i});const o=i.model.position();i.eventData(e,{initialPosition:o,pointerOffset:o.difference(r,t),restrictedArea:this.paper.getRestrictedArea(i,r,t)})},dragMagnetStart:function(e,r,t){if(this.can("addLinkFromMagnet")){var i=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:i}),e.stopPropagation(),o.options.validateMagnet(this,i,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,i,r,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,r,t),o.delegateDragEvents(this,e.data)}},drag:function(e,r,t){var i=this.paper,o=i.options.gridSize,s=this.model,c=this.eventData(e),{pointerOffset:f,restrictedArea:v,embedding:C}=c,M=Ta(r+f.x,o),x=Ta(t+f.y,o);s.position(M,x,{restrictedArea:v,deep:!0,ui:!0}),i.options.embeddingMode&&(C||(this.prepareEmbedding(c),C=!0),this.processEmbedding(c,e,r,t)),this.eventData(e,{embedding:C})},dragMagnet:function(e,r,t){this.dragLink(e,r,t)},dragEnd:function(e,r,t){var i=this.eventData(e);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(e,r,t){this.dragLinkEnd(e,r,t)},magnetpointerclick:function(e,r,t,i){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,r,t,i)}},{Flags:Nn});Xt(Hu.prototype,Rp);const Al=function(e,r,t){return e},so=function(e,r,t){var C,M,x,i=r.side||"bottom",o=qs(r.padding||40),s=t.sourceBBox,c=t.targetBBox,f=s.center(),v=c.center();switch(i){case"bottom":x=1,C="y",M="height";break;case"top":x=-1,C="y",M="height";break;case"left":x=-1,C="x",M="width";break;case"right":x=1,C="x",M="width";break;default:throw new Error("Router: invalid side")}return f[C]+=x*(s[M]/2+o[i]),v[C]+=x*(c[M]/2+o[i]),x*(f[C]-v[C])>0?v[C]=f[C]:f[C]=v[C],[f].concat(e,v)};var nu={N:"S",S:"N",E:"W",W:"E"},Bp={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function kl(e,r,t){var i=new _e(e.x,r.y);return t.containsPoint(i)&&(i=new _e(r.x,e.y)),i}function Rc(e,r){return e["W"===r||"E"===r?"width":"height"]}function Bi(e,r){return e.x===r.x?e.y>r.y?"N":"S":e.y===r.y?e.x>r.x?"W":"E":null}function Ol(e){return new bt(e.x,e.y,0,0)}function ju(e){var r=qs(e.padding||e.elementPadding||20);return{x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}function da(e,r){return e.sourceBBox.clone().moveAndExpand(ju(r))}function pn(e,r){return e.targetBBox.clone().moveAndExpand(ju(r))}function Nc(e,r,t){var i=new _e(e.x,r.y),o=new _e(r.x,e.y),s=Bi(e,i),c=Bi(e,o),f=nu[t],v=s===t||s!==f&&(c===f||c!==t)?i:o;return{points:[v],direction:Bi(v,r)}}function Ll(e,r,t){var i=kl(e,r,t);return{points:[i],direction:Bi(i,r)}}function tr(e,r,t,i){var v,o={},s=[new _e(e.x,r.y),new _e(r.x,e.y)],c=s.filter(function(x){return!t.containsPoint(x)}),f=c.filter(function(x){return Bi(x,e)!==i});if(f.length>0)v=f.filter(function(x){return Bi(e,x)===i}).pop(),o.points=[v=v||f[0]],o.direction=Bi(v,r);else{v=gp(s,c)[0];var C=new _e(r).move(v,-Rc(t,i)/2),M=kl(C,e,t);o.points=[M,C],o.direction=Bi(C,r)}return o}function Vp(e,r,t,i){var o=Ll(r,e,i),s=o.points[0];if(t.containsPoint(s)){var c=(o=Ll(e,r,t)).points[0];if(i.containsPoint(c)){var f=new _e(e).move(c,-Rc(t,Bi(e,c))/2),v=new _e(r).move(s,-Rc(i,Bi(r,s))/2),C=new Pt(f,v).midpoint(),M=Ll(e,C,t),x=Nc(C,r,M.direction);o.points=[M.points[0],x.points[0]],o.direction=x.direction}}return o}function Fl(e,r,t,i,o){var M,x,G,s={},c=t.union(i).inflate(1),f=c.center().distance(r)>c.center().distance(e),v=f?r:e,C=f?e:r;return o?(M=_e.fromPolar(c.width+c.height,Bp[o],v),M=c.pointNearestToPoint(M).move(M,-1)):M=c.pointNearestToPoint(v).move(v,1),x=kl(M,C,c),M.round().equals(x.round())?(x=_e.fromPolar(c.width+c.height,di(M.theta(v))+Math.PI/2,C),G=kl(M,x=c.pointNearestToPoint(x).move(C,1).round(),c),s.points=f?[x,G,M]:[M,G,x]):s.points=f?[x,M]:[M,x],s.direction=Bi(f?M:x,r),s}function ru(e,r,t){var i=da(t,r),o=pn(t,r),s=function Df(e,r){return e.sourceAnchor?e.sourceAnchor:da(e,r).center()}(t,r),c=function Eo(e,r){return e.targetAnchor?e.targetAnchor:pn(e,r).center()}(t,r);i=i.union(Ol(s)),o=o.union(Ol(c)),(e=En(e).map(_e)).unshift(s),e.push(c);for(var f,v=[],C=0,M=e.length-1;C<M;C++){var x=null,G=e[C],ne=e[C+1],oe=!!Bi(G,ne);if(0===C)C+1===M?i.intersect(o.clone().inflate(1))?x=Fl(G,ne,i,o):oe||(x=Vp(G,ne,i,o)):i.containsPoint(ne)?x=Fl(G,ne,i,Ol(ne).moveAndExpand(ju(r))):oe||(x=Ll(G,ne,i));else if(C+1===M){var Se=oe&&Bi(ne,G)===f;o.containsPoint(G)||Se?x=Fl(G,ne,Ol(G).moveAndExpand(ju(r)),o,f):oe||(x=tr(G,ne,o,f))}else oe||(x=Nc(G,ne,f));x?(Array.prototype.push.apply(v,x.points),f=x.direction):f=Bi(G,ne),C+1<M&&v.push(ne)}return v}var Bf={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,r=this.cost();return[{offsetX:e,offsetY:0,cost:r},{offsetX:-e,offsetY:0,cost:r},{offsetX:0,offsetY:e,cost:r},{offsetX:0,offsetY:-e,cost:r}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,r,t){if(!er(ru))throw new Error("Manhattan requires the orthogonal router as default fallback.");return ru(e,Xt({},Bf,r),t)},fallbackRoute:function(e,r,t){return null},draggingRoute:null};function Dc(e){this.map={},this.options=e,this.mapGridSize=100}function Ps(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Vf(e,r){return r&&r.paddingBox?e.sourceBBox.clone().moveAndExpand(r.paddingBox):e.sourceBBox.clone()}function Hf(e,r){return r&&r.paddingBox?e.targetBBox.clone().moveAndExpand(r.paddingBox):e.targetBBox.clone()}function jf(e,r){return e.sourceAnchor?e.sourceAnchor:Vf(e,r).center()}function Bc(e,r,t,i,o){var s=360/t,c=e.theta(function jp(e,r,t,i){var o=i.step;return new _e(e.x+(r.x-e.x)/t.x*o,e.y+(r.y-e.y)/t.y*o)}(e,r,i,o)),f=ci(c+s/2);return s*Math.floor(f/s)}function zf(e,r){var t=Math.abs(e-r);return t>180?360-t:t}function Uf(e,r){if(!e)return r;var t=Math.abs(e),i=Math.round(t/r);return i?r+(t-i*r)/i:t}function zu(e,r){return e.round(r)}function iu(e,r,t){return zu(function Vc(e,r){var t=r.source,i=Ta(e.x-t.x,r.x)+t.x,o=Ta(e.y-t.y,r.y)+t.y;return new _e(i,o)}(e.clone(),r),t)}function Uu(e){return e.clone().toString()}function Hc(e){return new _e(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function Gp(e,r,t,i,o,s,c){for(var x,f=[],v=Hc(o.difference(t)),C=Uu(t),M=e[C];M;){var G=Hc((x=r[C]).difference(M));G.equals(v)||(f.unshift(x),v=G),M=e[C=Uu(M)]}var ne=r[C];return Hc(ne.difference(i)).equals(v)||f.unshift(ne),f}function Xr(e,r){for(var t=1/0,i=0,o=r.length;i<o;i++){var s=e.manhattanDistance(r[i]);s<t&&(t=s)}return t}function Vi(e,r,t,i,o){var s=o.precision,c=o.directionMap,f=e.difference(r.center()),v=Mr(c)?Object.keys(c):[],C=En(t),M=v.reduce(function(x,G){if(C.includes(G)){for(var Ve,ne=c[G],oe=new _e(e.x+ne.x*(Math.abs(f.x)+r.width),e.y+ne.y*(Math.abs(f.y)+r.height)),Ie=new Pt(e,oe).intersect(r)||[],je=Ie.length,L=null,z=0;z<je;z++){var Q=Ie[z],ie=e.squaredDistance(Q);(void 0===Ve||ie>Ve)&&(Ve=ie,L=Q)}if(L){var ve=iu(L,i,s);r.containsPoint(ve)&&(ve=iu(ve.offset(ne.x*i.x,ne.y*i.y),i,s)),x.push(ve)}}return x},[]);return r.containsPoint(e)||M.push(iu(e,i,s)),M}function $p(e,r,t,i){var s,c,o=i.precision;s=zu(e instanceof bt?jf(this,i).clone():e.clone(),o),c=zu(r instanceof bt?function Hp(e,r){return e.targetAnchor?e.targetAnchor:Hf(e,r).center()}(this,i).clone():r.clone(),o);var v,C,M,x,f=function Up(e,r,t){return{source:r.clone(),x:Uf(t.x-r.x,e),y:Uf(t.y-r.y,e)}}(i.step,s,c);if(M=e instanceof bt?Vi(v=s,e,i.startDirections,f,i):[v=s],r instanceof bt?(C=c,x=Vi(c,r,i.endDirections,f,i)):x=[C=c],M=M.filter(Ln=>!t(Ln)),x=x.filter(Ln=>!t(Ln)),M.length>0&&x.length>0){for(var G=new Ps,ne={},oe={},Se={},Ie=0,je=M.length;Ie<je;Ie++){var Ve=M[Ie],L=Uu(Ve);G.add(L,Xr(Ve,x)),ne[L]=Ve,Se[L]=0}var ie,ve,z=i.previousDirectionAngle,Q=void 0===z,Pe=i.directions;!function zp(e,r,t){var i=t.step;En(t.directions).forEach(function(o){o.gridOffsetX=o.offsetX/i*r.x,o.gridOffsetY=o.offsetY/i*r.y})}(0,f,i);for(var Fe=Pe.length,Ye=En(x).reduce(function(Ln,$t){var It=Uu($t);return Ln.push(It),Ln},[]),gt=i.maximumLoops;!G.isEmpty()&&gt>0;){var Yn,lt=G.pop(),vt=ne[lt],Tt=oe[lt],Et=Se[lt],Rt=void 0===Tt,ir=vt.equals(v);Yn=Rt?Q?ir?null:Bc(v,vt,Fe,f,i):z:Bc(Tt,vt,Fe,f,i);var lr=M.length===x.length;if(lr)for(var jt=0;jt<M.length;jt++)if(!M[jt].equals(x[jt])){lr=!1;break}if((!Rt||!lr)&&Ye.indexOf(lt)>=0)return i.previousDirectionAngle=Yn,Gp(oe,ne,vt,v,C);for(Ie=0;Ie<Fe;Ie++){var Wt=(ie=Pe[Ie]).angle;if(ve=zf(Yn,Wt),Q&&ir||!(ve>i.maxAllowedDirectionChange)){var Yt=iu(vt.clone().offset(ie.gridOffsetX,ie.gridOffsetY),f,o),Mn=Uu(Yt);if(!G.isClose(Mn)&&!t(Yt)){if(Ye.indexOf(Mn)>=0&&!Yt.equals(C)&&zf(Wt,Bc(Yt,C,Fe,f,i))>i.maxAllowedDirectionChange)continue;var fn=Et+ie.cost+(ir?0:i.penalties[ve]);(!G.isOpen(Mn)||fn<Se[Mn])&&(ne[Mn]=Yt,oe[Mn]=vt,Se[Mn]=fn,G.add(Mn,fn+Xr(Yt,x)))}}}gt--}}return i.fallbackRoute.call(this,v,C,i)}Dc.prototype.build=function(e,r){var t=this.options,i=En(t.excludeEnds).reduce(function(v,C){var M=r.get(C);if(M){var x=e.getCell(M.id);x&&v.push(x)}return v},[]),o=[],s=e.getCell(r.get("source").id);s&&(o=Sc(o,s.getAncestors().map(function(v){return v.id})));var c=e.getCell(r.get("target").id);c&&(o=Sc(o,c.getAncestors().map(function(v){return v.id})));var f=this.mapGridSize;return e.getElements().reduce(function(v,C){var M=En(t.excludeTypes).includes(C.get("type")),x=i.find(function(z){return z.id===C.id}),G=o.includes(C.id);if(!(M||x||G))for(var oe=C.getBBox().moveAndExpand(t.paddingBox),Se=oe.origin().snapToGrid(f),Ie=oe.corner().snapToGrid(f),je=Se.x;je<=Ie.x;je+=f)for(var Ve=Se.y;Ve<=Ie.y;Ve+=f){var L=je+"@"+Ve;v[L]=v[L]||[],v[L].push(oe)}return v},this.map),this},Dc.prototype.isPointAccessible=function(e){var r=e.clone().snapToGrid(this.mapGridSize).toString();return En(this.map[r]).every(function(t){return!t.containsPoint(e)})},Ps.prototype.add=function(e,r){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=r;var t=sf(this.items,e,function(i){return this.values[i]}.bind(this));this.items.splice(t,0,e)},Ps.prototype.remove=function(e){this.hash[e]=this.CLOSE},Ps.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},Ps.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},Ps.prototype.isEmpty=function(){return 0===this.items.length},Ps.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const Rl=function(e,r,t){return function Yp(e,r,t){(function Wp(e){if(e.directions=Fr(e,"directions"),e.penalties=Fr(e,"penalties"),e.paddingBox=Fr(e,"paddingBox"),e.padding=Fr(e,"padding"),e.padding){var r=qs(e.padding);e.paddingBox={x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}En(e.directions).forEach(function(t){var i=new _e(0,0),o=new _e(t.offsetX,t.offsetY);t.angle=ci(i.theta(o))})})(r),t.options.perpendicular=!!r.perpendicular;var i=Vf(t,r),o=Hf(t,r),s=jf(t,r);let c;if("function"==typeof r.isPointObstacle)c=r.isPointObstacle;else{const L=new Dc(r);L.build(t.paper.model,t.model),c=z=>!L.isPointAccessible(z)}for(var M,x,f=En(e).map(_e),v=[],C=s,G=0,ne=f.length;G<=ne;G++){var oe=null;if(x=M||i,!(M=f[G])&&(M=o,(!t.model.get("source").id||!t.model.get("target").id)&&er(r.draggingRoute))){var Ie=x===i?s:x,je=M.origin();oe=r.draggingRoute.call(t,Ie,je,r)}if(null===(oe=oe||$p.call(t,x,M,c,r)))return r.fallbackRouter(e,r,t);var Ve=oe[0];Ve&&Ve.equals(C)&&oe.shift(),C=oe[oe.length-1]||C,Array.prototype.push.apply(v,oe)}return v}(e,Xt({},Bf,r),t)};var Xp={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,r=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:r},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:r},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:r},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:r},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,r,t){var i=e.theta(r),o=[],s={x:r.x,y:e.y},c={x:e.x,y:r.y};if(i%180>90){var f=s;s=c,c=f}var v=i%90<45?s:c,C=new Pt(e,v),M=90*Math.ceil(i/90),x=_e.fromPolar(C.squaredLength(),di(M+135),v),G=new Pt(r,x),ne=C.intersection(G),oe=ne||r,Ie=360/t.directions.length,je=(ne?oe:e).theta(r),Ve=ci(je+Ie/2),L=Ie*Math.floor(Ve/Ie);return t.previousDirectionAngle=L,oe&&o.push(oe.round()),o.push(r),o}};const Kp=function(e,r,t){if(!er(Rl))throw new Error("Metro requires the manhattan router.");return Rl(e,Xt({},Xp,r),t)};var jc=["arc","gap","cubic"],Zp=["smooth"],Gu=1/3,$u=2/3;function zc(e,r,t){var i=[].concat(e,t,r);return i.reduce(function(o,s,c){var f=i[c+1];return null!=f&&(o[c]=oa(s,f)),o},[])}function Ms(e,r){return oa(e,r).squaredLength()}function $f(e,r,t,i){var s,o=new Lt;return s=Lt.createSegment("M",e[0].start),o.appendSegment(s),En(e).forEach(function(c,f){if(c.isJump){var v,C,M,x;if("arc"===t){v=-90,C=c.start.difference(c.end);var G=Number(C.x<0||0===C.x&&C.y<0);G&&(v+=180);var Se,ne=c.midpoint(),oe=new Pt(ne,c.end).rotate(ne,v);M=(Se=new Pt(c.start,ne)).pointAt(2/3).rotate(c.start,v),x=oe.pointAt(1/3).rotate(oe.end,-v),s=Lt.createSegment("C",M,x,oe.end),o.appendSegment(s),Se=new Pt(ne,c.end),M=oe.pointAt(1/3).rotate(oe.end,v),x=Se.pointAt(1/3).rotate(c.end,-v),s=Lt.createSegment("C",M,x,c.end),o.appendSegment(s)}else if("gap"===t)s=Lt.createSegment("M",c.end),o.appendSegment(s);else if("cubic"===t){v=c.start.theta(c.end);var Ie=.6*r,je=1.35*r;C=c.start.difference(c.end),(G=Number(C.x<0||0===C.x&&C.y<0))&&(je*=-1),M=_e(c.start.x+Ie,c.start.y+je).rotate(c.start,v),x=_e(c.end.x-Ie,c.end.y+je).rotate(c.end,v),s=Lt.createSegment("C",M,x,c.end),o.appendSegment(s)}}else{var Ve=e[f+1];0==i||!Ve||Ve.isJump?(s=Lt.createSegment("L",c.end),o.appendSegment(s)):function rm(e,r,t,i,o){var ne,s=t.distance(i)/2,c=t.distance(o)/2,f=-Math.min(e,s),v=-Math.min(e,c),C=t.clone().move(i,f).round(),M=t.clone().move(o,v).round(),x=new _e(Gu*C.x+$u*t.x,$u*t.y+Gu*C.y),G=new _e(Gu*M.x+$u*t.x,$u*t.y+Gu*M.y);ne=Lt.createSegment("L",C),r.appendSegment(ne),ne=Lt.createSegment("C",x,G,M),r.appendSegment(ne)}(i,o,c.end,c.start,Ve.end)}}),o}const im=function(e,r,t,i){!function qp(e){var r=e.paper,t=r._jumpOverUpdateList;if(null==t){t=r._jumpOverUpdateList=[];var i=r.model;i.on("batch:stop",function(){this.hasActiveBatch()||function em(e){for(var r=e._jumpOverUpdateList,t=0;t<r.length;t++){const i=r[t],o=i.getFlag(i.constructor.Flags.CONNECTOR);i.requestUpdate(o)}}(r)}),i.on("reset",function(){t=r._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var o=i.raw,s=i.size||5,c=i.jump&&(""+i.jump).toLowerCase(),f=i.radius||0,v=i.ignoreConnectors||Zp;-1===jc.indexOf(c)&&(c=jc[0]);var C=this.paper,x=C.model.getLinks();if(1===x.length)return $f(zc(e,r,t),s,c,f);var G=this.model,ne=x.indexOf(G),oe=C.options.defaultConnector||{},Se=x.filter(function(Q,ie){var ve=Q.get("connector")||oe;return!(En(v).includes(ve.name)||ie>ne&&"jumpover"===ve.name)}),Ie=Se.map(function(Q){return C.findViewByModel(Q)}),je=zc(e,r,t),Ve=Ie.map(function(Q){return null==Q?[]:Q===this?je:zc(Q.sourcePoint,Q.targetPoint,Q.route)},this),L=je.reduce(function(Q,ie){var ve=Se.reduce(function(Pe,Fe,Ye){if(Fe!==G){var gt=function tm(e,r){return En(r).reduce(function(t,i){var o=e.intersection(i);return o&&t.push(o),t},[])}(ie,Ve[Ye]);Pe.push.apply(Pe,gt)}return Pe},[]).sort(function(Pe,Fe){return Ms(ie.start,Pe)-Ms(ie.start,Fe)});return ve.length>0?Q.push.apply(Q,function nm(e,r,t){return r.reduce(function(i,o,s){if(!0===o.skip)return i;var c=i.pop()||e,f=ri(o).move(c.start,-t),v=ri(o).move(c.start,+t),C=r[s+1];if(null!=C){var M=v.distance(C);M<=t&&(v=C.move(c.start,M),C.skip=!0)}else if(f.distance(c.end)<2*t+1)return i.push(c),i;if(v.distance(c.start)<2*t+1)return i.push(c),i;var ne=oa(f,v);return ne.isJump=!0,i.push(oa(c.start,f),ne,oa(v,c.end)),i},[])}(ie,ve,s)):Q.push(ie),Q},[]),z=$f(L,s,c,f);return o?z:z.serialize()},om=function(e,r,t,i){var o=i&&i.raw,s=[e].concat(t).concat([r]),c=new qn(s),f=new Lt(c);return o?f:f.serialize()},Wf=function(e,r,t,i){i||(i={});var f,o=i.radius||10,s=i.raw,c=new Lt;f=Lt.createSegment("M",e),c.appendSegment(f);for(var M,x,G,ne,oe,Se,Ie,je,Ve,L,z,v=1/3,C=2/3,Q=0,ie=t.length;Q<ie;Q++)M=new _e(t[Q]),x=t[Q-1]||e,G=t[Q+1]||r,ne=oe||M.distance(x)/2,oe=M.distance(G)/2,Se=-Math.min(o,ne),Ie=-Math.min(o,oe),je=M.clone().move(x,Se).round(),Ve=M.clone().move(G,Ie).round(),L=new _e(v*je.x+C*M.x,C*M.y+v*je.y),z=new _e(v*Ve.x+C*M.x,C*M.y+v*Ve.y),f=Lt.createSegment("L",je),c.appendSegment(f),f=Lt.createSegment("C",L,z,Ve),c.appendSegment(f);return f=Lt.createSegment("L",r),c.appendSegment(f),s?c:c.serialize()},Yf=function(e,r,t,i){var s,o=i&&i.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([r]),f=Wn.throughPoints(c);s=new Lt(f)}else{var v;if(s=new Lt,v=Lt.createSegment("M",e),s.appendSegment(v),Math.abs(e.x-r.x)>=Math.abs(e.y-r.y)){var C=(e.x+r.x)/2;v=Lt.createSegment("C",C,e.y,C,r.y,r.x,r.y),s.appendSegment(v)}else{var M=(e.y+r.y)/2;v=Lt.createSegment("C",e.x,M,r.x,M,r.x,r.y),s.appendSegment(v)}}return o?s:s.serialize()},Io={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Hi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Uc=function(e,r,t=[],i={},o){const s=Boolean(i.raw),{direction:c=Io.AUTO,precision:f=3}=i,v={coeff:i.distanceCoefficient||.6,angleTangentCoefficient:i.angleTangentCoefficient||80,tau:i.tension||.5,sourceTangent:i.sourceTangent?new _e(i.sourceTangent):null,targetTangent:i.targetTangent?new _e(i.targetTangent):null};v.sourceDirection="string"==typeof i.sourceDirection?i.sourceDirection:"number"==typeof i.sourceDirection?new _e(1,0).rotate(null,i.sourceDirection):i.sourceDirection?new _e(i.sourceDirection).normalize():null,v.targetDirection="string"==typeof i.targetDirection?i.targetDirection:"number"==typeof i.targetDirection?new _e(1,0).rotate(null,i.targetDirection):i.targetDirection?new _e(i.targetDirection).normalize():null;const C=[e,...t.map(Se=>new _e(Se)),r];let M,x;if(v.sourceTangent)M=v.sourceTangent;else{const Se=function cm(e,r,t,i){if(i.sourceDirection)switch(i.sourceDirection){case Hi.UP:return new _e(0,-1);case Hi.DOWN:return new _e(0,1);case Hi.LEFT:return new _e(-1,0);case Hi.RIGHT:return new _e(1,0);case Hi.AUTO:return Xf(e,r);case Hi.CLOSEST_POINT:return Qf(0,r);case Hi.OUTWARDS:return Zf(e,r);default:return i.sourceDirection}switch(t){case Io.HORIZONTAL:return function am(e,r,t){const{sourceBBox:i}=e;let o;return"left"===(o=i.width&&i.height?i.sideNearestToPoint(r[0]):i.x>r[1].x?"right":"left",o)?new _e(-1,0):new _e(1,0)}(e,r);case Io.VERTICAL:return function um(e,r,t){const{sourceBBox:i}=e;let o;return"top"===(o=i.width&&i.height?i.sideNearestToPoint(r[0]):i.y>r[1].y?"bottom":"top",o)?new _e(0,-1):new _e(0,1)}(e,r);case Io.CLOSEST_POINT:return Qf(0,r);case Io.OUTWARDS:return Zf(e,r);default:return Xf(e,r)}}(o,C,c,v),Ie=C[0].distance(C[1])*v.coeff,Ve=Gc(Se,C[1].difference(C[0]).normalize());if(Ve>Math.PI/4){const L=Ie+(Ve-Math.PI/4)*v.angleTangentCoefficient;M=Se.clone().scale(L,L)}else M=Se.clone().scale(Ie,Ie)}if(v.targetTangent)x=v.targetTangent;else{const Se=function dm(e,r,t,i){if(i.targetDirection)switch(i.targetDirection){case Hi.UP:return new _e(0,-1);case Hi.DOWN:return new _e(0,1);case Hi.LEFT:return new _e(-1,0);case Hi.RIGHT:return new _e(0,1);case Hi.AUTO:return Kf(e,r);case Hi.CLOSEST_POINT:return Jf(0,r);case Hi.OUTWARDS:return qf(e,r);default:return i.targetDirection}switch(t){case Io.HORIZONTAL:return function sm(e,r,t){const{targetBBox:i}=e;let o;return"left"===(o=i.width&&i.height?i.sideNearestToPoint(r[r.length-1]):i.x>r[r.length-2].x?"left":"right",o)?new _e(-1,0):new _e(1,0)}(e,r);case Io.VERTICAL:return function lm(e,r,t){const{targetBBox:i}=e;let o;return"top"===(o=i.width&&i.height?i.sideNearestToPoint(r[r.length-1]):i.y>r[r.length-2].y?"top":"bottom",o)?new _e(0,-1):new _e(0,1)}(e,r);case Io.CLOSEST_POINT:return Jf(0,r);case Io.OUTWARDS:return qf(e,r);default:return Kf(e,r)}}(o,C,c,v),Ie=C.length-1,je=C[Ie-1].distance(C[Ie])*v.coeff,L=Gc(Se,C[Ie-1].difference(C[Ie]).normalize());if(L>Math.PI/4){const z=je+(L-Math.PI/4)*v.angleTangentCoefficient;x=Se.clone().scale(z,z)}else x=Se.clone().scale(je,je)}const ne=function hm(e,r,t,i){const{tau:o,coeff:s}=i,c=[],f=[],v=[],C=e.length-1;for(let M=0;M<C;M++)c[M]=e[M].distance(e[M+1]);f[0]=r,f[C]=t;for(let M=1;M<C;M++){let x,G;x=1===M?e[M-1].clone().offset(f[M-1].x,f[M-1].y):e[M-1].clone(),G=M===C-1?e[M+1].clone().offset(f[M+1].x,f[M+1].y):e[M+1].clone();const ne=x.difference(e[M]).normalize(),oe=G.difference(e[M]).normalize(),Se=Gc(ne,oe);let je,Ie=(Math.PI-Se)/2;const Ve=eh(ne,oe);let L;L=eh(e[M].difference(e[M+1]),e[M].difference(e[M-1])),Ve<0&&(Ie=-Ie),Se<Math.PI/2&&(Ie<0&&L<0||Ie>0&&L>0)&&(Ie-=Math.PI),je=oe.clone(),fm(je,Ie);const z=je.clone(),Q=je.clone(),ie=c[M-1]*s,ve=c[M]*s;z.scale(ie,ie),Q.scale(ve,ve),f[M]=[z,Q]}for(let M=0;M<C;M++){let x,G;x=0===M?e[M+1].difference(f[M].x/o,f[M].y/o):e[M+1].difference(f[M][1].x/o,f[M][1].y/o),G=M===C-1?e[M].clone().offset(f[M+1].x/o,f[M+1].y/o):e[M].difference(f[M+1][0].x/o,f[M+1][0].y/o),v[M]=[x,e[M],e[M+1],G]}return v}(C,M,x,v).map(Se=>function pm(e,r){const{tau:t}=r,i=new _e;i.x=e[1].x+(e[2].x-e[0].x)/(6*t),i.y=e[1].y+(e[2].y-e[0].y)/(6*t);const o=new _e;return o.x=e[2].x+(e[3].x-e[1].x)/(6*t),o.y=e[2].y+(e[3].y-e[1].y)/(6*t),new Wn(e[1],i,o,e[2])}(Se,v)),oe=new Lt(ne).round(f);return s?oe:oe.serialize()};function Xf(e,r,t){const{sourceBBox:i}=e;let o;switch(o=i.sideNearestToPoint(i.width&&i.height?r[0]:r[1]),o){case"top":return new _e(0,-1);case"bottom":return new _e(0,1);case"right":return new _e(1,0);case"left":return new _e(-1,0)}}function Kf(e,r,t){const{targetBBox:i}=e;let o;switch(o=i.sideNearestToPoint(i.width&&i.height?r[r.length-1]:r[r.length-2]),o){case"top":return new _e(0,-1);case"bottom":return new _e(0,1);case"right":return new _e(1,0);case"left":return new _e(-1,0)}}function Qf(e,r,t){return r[1].difference(r[0]).normalize()}function Jf(e,r,t){const i=r.length-1;return r[i-1].difference(r[i]).normalize()}function Zf(e,r,t){const{sourceBBox:i}=e,o=i.center();return r[0].difference(o).normalize()}function qf(e,r,t){const{targetBBox:i}=e,o=i.center();return r[r.length-1].difference(o).normalize()}function fm(e,r){const t=Math.cos(r),i=Math.sin(r),s=i*e.x+t*e.y;e.x=t*e.x-i*e.y,e.y=s}function Gc(e,r){let t=e.dot(r)/(e.magnitude()*r.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function eh(e,r){return e.x*r.y-e.y*r.x}Uc.Directions=Io,Uc.TangentDirections=Hi;const on={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Wu=In.extend({className:function(){var e=In.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){In.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[on.RENDER],attrs:[on.UPDATE],router:[on.UPDATE],connector:[on.CONNECTOR],smooth:[on.UPDATE],manhattan:[on.UPDATE],toolMarkup:[on.LEGACY_TOOLS],labels:[on.LABELS],labelMarkup:[on.LABELS],vertices:[on.VERTICES,on.UPDATE],vertexMarkup:[on.VERTICES],source:[on.SOURCE,on.UPDATE],target:[on.TARGET,on.UPDATE]},initFlag:[on.RENDER,on.SOURCE,on.TARGET,on.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,r){if(r||(r={}),this.hasFlag(e,on.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,on.SOURCE)}if(this.hasFlag(e,on.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,on.TARGET)}const{paper:t,sourceView:i,targetView:o}=this;if(t&&(i&&!t.isViewMounted(i)||o&&!t.isViewMounted(o)))return e;if(this.hasFlag(e,on.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(r),this.removeFlag(e,[on.RENDER,on.UPDATE,on.VERTICES,on.LABELS,on.TOOLS,on.LEGACY_TOOLS,on.CONNECTOR]);let s=!1;this.hasFlag(e,on.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,on.VERTICES));const{model:c}=this,{attributes:f}=c;let v=this.hasFlag(e,on.LABELS),C=this.hasFlag(e,on.LEGACY_TOOLS);v&&(this.onLabelsChange(c,f.labels,r),e=this.removeFlag(e,on.LABELS),s=!0),C&&(this.renderTools(),e=this.removeFlag(e,on.LEGACY_TOOLS));const M=this.hasFlag(e,on.UPDATE),x=this.hasFlag(e,on.CONNECTOR);return(M||x)&&(M?r.translateBy&&c.isRelationshipEmbeddedIn(r.translateBy)?this.translate(r.tx,r.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(r),e=this.removeFlag(e,[on.UPDATE,on.TOOLS,on.CONNECTOR]),v=!1,C=!1,s=!0),v&&this.updateLabelPositions(),C&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,on.TOOLS)&&(this.updateTools(r),e=this.removeFlag(e,on.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(on.UPDATE),e)},isLabelsRenderRequired:function(e={}){const r=this.model.previous("labels");if(!r)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],i=t.length;if(i>1&&r[t[1]]){if(2===i)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,r,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,r=e.get("markup")||e.markup;if(!r)throw new Error("dia.LinkView: markup required");if(Array.isArray(r))return this.renderJSONMarkup(r);if("string"==typeof r)return this.renderStringMarkup(r);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var r=this.parseDOMJSON(e,this.el);this.selectors=r.selectors,this.vel.append(r.fragment)},renderStringMarkup:function(e){var r=tt(e);Array.isArray(r)||(r=[r]);for(var t=this._V,i=0,o=r.length;i<o;i++){var s=r[i],c=s.attr("class");c&&(c=ef(c),t[rr.camelCase(c)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(r)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var r=tt(e),t=document.createDocumentFragment();if(Array.isArray(r))for(var i=0,o=r.length;i<o;i++)t.appendChild(r[i].node);else t.appendChild(r.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var r=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,i=r.childNodes;return(t=i.length>1||"G"!==i[0].nodeName.toUpperCase()?tt("g").append(r):tt(i[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,r=e.labels,t=this._labelCache={},i=this._labelSelectors={},o=this.model,s=o.attributes.labels||[],c=s.length;if(0===c)return r&&r.remove(),this;r?r.empty():(r=e.labels=tt("g").addClass("labels"),this.options.labelsLayer&&(r.addClass(Qi(Fr(this,"className"))),r.attr("model-id",o.id)));for(var f=0;f<c;f++){var M,x,C=this._normalizeLabelMarkup(this._getLabelMarkup(s[f].markup));if(C)M=C.node,x=C.selectors;else{var ne=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),oe=o._getDefaultLabel(),Ie=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||ne;M=Ie.node,x=Ie.selectors}M.setAttribute("label-idx",f),r.append(M),t[f]=M;var je=this.selector;if(x[je])throw new Error("dia.LinkView: ambiguous label root selector.");x[je]=M,i[f]=x}return r.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:r,model:t,_V:i,options:o}=this,{labels:s}=i;if(!s||!t.hasLabels())return;const{node:c}=s;o.labelsLayer?r.getLayerView(o.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:r}=this;if(!r)return;const{labels:t}=r;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){In.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,r){const t=this._labelCache[e];if(!t)return null;const i=this._labelSelectors[e],[o=null]=this.findBySelector(r,t,i);return o},_mergeLabelAttrs:function(e,r,t,i){return null===r?null:void 0===r?null===t?null:void 0===t?e?void 0:i:e?t:pi({},i,t):e?pi({},t,r):pi({},i,t,r)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,r=e.get("labels")||[],t=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,s=e._getDefaultLabel(),c=s.markup,f=s.attrs,v=0,C=r.length;v<C;v++){var M=this._labelCache[v];M.setAttribute("cursor",t?"move":"default");var x=this._labelSelectors[v],G=r[v],Se=this._mergeLabelAttrs(G.markup||c,G.attrs,f,o);this.updateDOMSubtreeAttributes(M,Se,{rootBBox:new bt(G.size),selectors:x})}return this},renderTools:function(){if(!this._V.linkTools)return this;var i,e=rr(this._V.linkTools.node).empty(),r=Ri(this.model.get("toolMarkup")||this.model.toolMarkup),t=tt(r());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(r=Ri(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),i=tt(r())):i=t.clone(),e.append(i.node),this._tool2Cache=i),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=rr(this._V.markerVertices.node).empty(),r=Ri(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,i){e.append(tt(r(Xt({idx:i},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=rr(this._V.markerArrowheads.node);e.empty();var r=Ri(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=tt(r({end:"source"})),this._V.targetArrowhead=tt(r({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,i=t.vertices(),o=[this.sourceAnchor,...i,this.targetAnchor],s=o.length,c=new qn(o);c.simplify({threshold:.001});const f=c.points.map(C=>C.toJSON()),v=f.length;return s===v?0:(t.vertices(f.slice(1,v-1),e),s-v)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new _e(this.sourceAnchor);case"target":return new _e(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new _e(this.sourcePoint);case"target":return new _e(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var r=this.sourceView;if(!r)break;return this.sourceMagnet||r.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,r=0){const{route:t,path:i}=this;if(!t||!i)return;const o=new qn(t);o.translate(e,r),this.route=o.points,this._translateConnectionPoints(e,r),i.translate(e,r),this.updateDOM()},updateDOM(){const{el:e,model:r,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,r.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,r=e.vertices(),t=this.findAnchors(r),i=this.sourceAnchor=t.source,o=this.targetAnchor=t.target,s=this.findRoute(r);this.route=s;var c=this.findConnectionPoints(s,i,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:r,targetPoint:t}=this,i=this.findMarkerPoints(e,r,t),o=this.findPath(e,i.source||r,i.target||t);this.path=o},findMarkerPoints:function(e,r,t){var c,f,i=e[0],o=e[e.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),c=_e(r).move(i||t,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),f=_e(t).move(o||r,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=c||r.clone(),s.targetPoint=f||t.clone(),{source:c,target:f}},findAnchorsOrdered:function(e,r,t,i){var o,s,c,f,v=this.model,C=v.get(e),M=v.get(t),x=this.getEndView(e),G=this.getEndView(t),ne=this.getEndMagnet(e),oe=this.getEndMagnet(t);x?(c=r?new _e(r):G?oe:new _e(M),o=this.getAnchor(C.anchor,x,ne,c,e)):o=new _e(C),G?(f=new _e(i||o),s=this.getAnchor(M.anchor,G,oe,f,t)):s=new _e(M);var Se={};return Se[e]=o,Se[t]=s,Se},findAnchors:function(e){var r=this.model,t=e[0],i=e[e.length-1];return r.target().priority&&!r.source().priority?this.findAnchorsOrdered("target",i,"source",t):this.findAnchorsOrdered("source",t,"target",i)},findConnectionPoints:function(e,r,t){var x,G,ne,je,i=e[0],o=e[e.length-1],s=this.model,c=s.get("source"),f=s.get("target"),v=this.sourceView,C=this.targetView,M=this.paper.options;if(v&&!v.isNodeConnection(this.sourceMagnet)){x=this.sourceMagnet||v.el;var oe=c.connectionPoint||M.defaultConnectionPoint,Ie=new Pt(i||t,r);ne=this.getConnectionPoint(oe,v,x,Ie,"source")}else ne=r;if(C&&!C.isNodeConnection(this.targetMagnet)){G=this.targetMagnet||C.el;var Ve=f.connectionPoint||M.defaultConnectionPoint,z=new Pt(o||r,t);je=this.getConnectionPoint(Ve,C,G,z,"target")}else je=t;return{source:ne,target:je}},getAnchor:function(e,r,t,i,o){var f,s=r.isNodeConnection(t),c=this.paper.options;if(e||(e=s?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)f=e;else{var v=e.name;if("function"!=typeof(f=c[s?"linkAnchorNamespace":"anchorNamespace"][v]))throw new Error("Unknown anchor: "+v)}var M=f.call(this,r,t,i,e.args||{},o,this);return M?M.round(this.decimalsRounding):new _e},getConnectionPoint:function(e,r,t,i,o){var s,C,c=i.end,f=this.paper.options;if("function"==typeof f.linkConnectionPoint&&(s=f.linkConnectionPoint(this,r,t===r.el?void 0:t,i.start,o)))return s;if(!e)return c;if("function"==typeof e)C=e;else{var M=e.name;if("function"!=typeof(C=f.connectionPointNamespace[M]))throw new Error("Unknown connection point: "+M)}return(s=C.call(this,i,r,t,e.args||{},o,this))?s.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,r){var t=this._markerCache;t.sourcePoint.offset(e,r),t.targetPoint.offset(e,r),this.sourcePoint.offset(e,r),this.targetPoint.offset(e,r),this.sourceAnchor.offset(e,r),this.targetAnchor.offset(e,r)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var r=this.model,t=r.get("labels")||[];if(!t.length)return this;for(var o=r._builtins.defaultLabel.position,s=r._getDefaultLabel(),c=this._normalizeLabelPosition(s.position),f=pi({},o,c),v=0,C=t.length;v<C;v++){var M=this._labelCache[v];if(M){var G=this._normalizeLabelPosition(t[v].position),ne=pi({},f,G),oe=this._getLabelTransformationMatrix(ne);M.setAttribute("transform",tt.matrixToTransformString(oe)),this._cleanLabelMatrices(v)}}return this},_cleanLabelMatrices:function(e){const{metrics:r,_labelSelectors:t}=this,i=t[e];if(i)for(let o in i){const{id:s}=i[o];s&&s in r&&delete r[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",r=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",r/=2);var i=this.getPointAtLength(r);this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(i=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||r)),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===rr.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:r,paper:t}=this,i=`${e}View`,o=r.get(e),s=o&&o.id;if(!s)return this[i]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(s);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const f=c.findView(t);return!!f&&(this[i]=f,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const r=`${e}Magnet`,t=this.getEndView(e);if(t){let i=t.getMagnetFromLinkEnd(this.model.get(e));i===t.el&&(i=null),this[r]=i}else this[r]=null},_translateAndAutoOrientArrows:function(e,r){var t=En(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),r&&r.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,r){return null===e?null:void 0===e?null===r?null:r:pi({},r,e)},addLabel:function(e,r,t,i){var o,s,f,c=0;"number"!=typeof e?(o=e.x,s=e.y,"number"==typeof r?(c=r,f=t):f=r):(o=e,s=r,"number"==typeof t?(c=t,f=i):f=t);var v=this._getDefaultLabelPositionArgs(),M=this._mergeLabelPositionArgs(f,v),x={position:this.getLabelPosition(o,s,c,M)};return this.model.insertLabel(-1,x,f),-1},addVertex:function(e,r,t){var i="number"!=typeof e,o=i?e.x:e,s=i?e.y:r,c=i?r:t,f={x:o,y:s},v=this.getVertexIndex(o,s);return this.model.insertVertex(v,f,c),v},sendToken:function(e,r,t){var o,s,c;Mr(r)?(o=r.duration,s="reverse"===r.direction,c=r.connection):(o=r,s=!1,c=null);var f={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(f.keyPoints="1;0",f.keyTimes="0;1");var C,v=tt(e);if("string"==typeof c)C=this.findBySelector(c,this.el,this.selectors)[0];else{var M=this._V;C=M.connection?M.connection.node:this.el.querySelector("path")}if(!(C instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");v.appendTo(this.paper.cells).animateAlongPath(f,C),setTimeout(function i(x,G){return function(){x.remove(),"function"==typeof G&&G()}}(v,t),o)},findRoute:function(e){e||(e=[]);var r=this.paper.options.routerNamespace||_,t=this.model.router(),i=this.paper.options.defaultRouter;if(!t){if(!i)return e.map(_e);t=i}var o=er(t)?t:r[t.name];if(!er(o))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return o.call(this,e,t.args||{},this)||e.map(_e)},findPath:function(e,r,t){var i=this.paper.options.connectorNamespace||I,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=er(o)?o:i[o.name];if(!er(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var f=ua(o.args||{});f.raw=!0;var v=c.call(this,r,t,e,f,this);return"string"==typeof v&&(v=new Lt(tt.normalizePathData(v))),v},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var r=this.metrics;if(r.hasOwnProperty("data"))return r.data;var t=e.serialize();return r.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var r=this.metrics;if(r.hasOwnProperty("segmentSubdivisions"))return r.segmentSubdivisions;var t=e.getSegmentSubdivisions();return r.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var r=this.metrics;if(r.hasOwnProperty("length"))return r.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return r.length=t,t},getPointAtLength:function(e){var r=this.path;return r?r.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var r=this.path;return r?(Co(e)&&(e=parseFloat(e)/100),r.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var r=this.path;return r?r.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var r=this.path;return r?r.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var r=this.path;return r?r.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var r=this.path;return r?r.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var r=this.path;return r?r.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,r,t,i){var c,o={},s=0;"number"==typeof t?(s=t,c=i):c=t,c&&(o.args=c);var Se,Ie,f=!(c&&c.absoluteDistance),v=c&&c.absoluteDistance&&c.reverseDistance,C=c&&c.absoluteOffset,M=this.path,x={segmentSubdivisions:this.getConnectionSubdivisions()},G=new _e(e,r),ne=M.closestPointT(G,x),oe=M.lengthAtT(ne,x);if(f&&(oe=oe/this.getConnectionLength()||0),v&&(oe=-1*(this.getConnectionLength()-oe)||1),o.distance=oe,C||(Se=M.tangentAtT(ne)),Se)Ie=Se.pointOffset(G);else{var je=M.pointAtT(ne),Ve=G.difference(je);Ie={x:Ve.x,y:Ve.y}}return o.offset=Ie,o.angle=s,o},_getLabelTransformationMatrix:function(e){var r,t=0,i={};if("number"==typeof e)r=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");i=e.args||{},r=e.distance,t=e.angle||0}var o=r>0&&r<=1,s=0,c={x:0,y:0};if(e.offset){var f=e.offset;"number"==typeof f&&(s=f),f.x&&(c.x=f.x),f.y&&(c.y=f.y)}var Se,v=0!==c.x||0!==c.y||0===s,C=i.keepGradient,M=i.ensureLegibility,x=this.path,G={segmentSubdivisions:this.getConnectionSubdivisions()},ne=o?r*this.getConnectionLength():r,oe=x.tangentAtLength(ne,G),Ie=t;if(oe){if(v)(Se=oe.start).offset(c);else{var je=oe.clone();je.rotate(oe.start,-90),je.setLength(s),Se=je.end}C&&(Ie=oe.angle()+t,M&&(Ie=ci((Ie+90)%180-90)))}else Se=x.start,v&&Se.offset(c);return tt.createSVGMatrix().translate(Se.x,Se.y).rotate(Ie)},getLabelCoordinates:function(e){var r=this._getLabelTransformationMatrix(e);return new _e(r.e,r.f)},getVertexIndex:function(e,r){for(var i=this.model.vertices(),o=this.getClosestPointLength(new _e(e,r)),s=0,c=i.length;s<c&&!(o<this.getClosestPointLength(i[s]));s++);return s},notifyPointerdown(e,r,t){In.prototype.pointerdown.call(this,e,r,t),this.notify("link:pointerdown",e,r,t)},notifyPointermove(e,r,t){In.prototype.pointermove.call(this,e,r,t),this.notify("link:pointermove",e,r,t)},notifyPointerup(e,r,t){this.notify("link:pointerup",e,r,t),In.prototype.pointerup.call(this,e,r,t)},pointerdblclick:function(e,r,t){In.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,r,t)},pointerclick:function(e,r,t){In.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,r,t)},contextmenu:function(e,r,t){In.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,r,t)},pointerdown:function(e,r,t){switch(this.notifyPointerdown(e,r,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,r,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,r,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,r,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,r,t);case"marker-source":case"marker-target":return}this.dragStart(e,r,t)},pointermove:function(e,r,t){var i=this._dragData;switch(i&&this.eventData(e,i),this.eventData(e).action){case"vertex-move":this.dragVertex(e,r,t);break;case"label-move":this.dragLabel(e,r,t);break;case"arrowhead-move":this.dragArrowhead(e,r,t);break;case"move":this.drag(e,r,t)}i&&Xt(i,this.eventData(e)),this.notifyPointermove(e,r,t)},pointerup:function(e,r,t){var i=this._dragData;switch(i&&(this.eventData(e,i),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,r,t);break;case"label-move":this.dragLabelEnd(e,r,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,r,t);break;case"move":this.dragEnd(e,r,t)}this.notifyPointerup(e,r,t),this.checkMouseleave(e)},mouseover:function(e){In.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){In.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){In.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){In.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,r,t,i){In.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,r,t,i)},onevent:function(e,r,t,i){var o=tt(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===r)return void this.model.remove({ui:!0});this.notify(r,e,t,i)}this.notifyPointerdown(e,t,i),this.paper.delegateDragEvents(this,e.data)}else In.prototype.onevent.apply(this,arguments)},onlabel:function(e,r,t){this.notifyPointerdown(e,r,t),this.dragLabelStart(e,r,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,r,t){if(this.can("vertexAdd")){var i=this.addVertex({x:r,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragLabelStart:function(e,r,t){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),s=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),f=this._getDefaultLabelPositionArgs(),v=this._mergeLabelPositionArgs(c,f);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:s,positionArgs:v,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,r,t){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,r,t){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,r,t){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),s=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,r,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:r,dy:t})},dragLabel:function(e,r,t){var i=this.eventData(e),o={position:this.getLabelPosition(r,t,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(i.labelIdx,o)},dragVertex:function(e,r,t){var i=this.eventData(e);this.model.vertex(i.vertexIdx,{x:r,y:t},{ui:!0})},dragArrowhead:function(e,r,t){this.paper.options.snapLinks?this._snapArrowhead(e,r,t):this._connectArrowhead(this.getEventTarget(e),r,t,this.eventData(e))},drag:function(e,r,t){var i=this.eventData(e);this.model.translate(r-i.dx,t-i.dy,{ui:!0}),this.eventData(e,{dx:r,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,r,t){var i=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,r,t),o.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,e)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,r){var t=e.arrowhead,i=e.initialEnd,o=this.model.prop(t);if(o&&!eu.endsEqual(i,o)){var c=this.paper;i.id&&this.notify("link:disconnect",r,c.findViewByModel(i.id),e.initialMagnet,t),o.id&&this.notify("link:connect",r,c.findViewByModel(o.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,r,t){const{paper:i}=this,{snapLinks:o,connectionStrategy:s}=i.options,c=this.eventData(e);var f=o.radius||50,v=i.findViewsInArea({x:r-f,y:t-f,width:2*f,height:2*f}),C=c.closestView||null,M=c.closestMagnet||null,x=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var G=Number.MAX_VALUE,ne=new _e(r,t);v.forEach(function(z){const Q=[];"false"!==z.el.getAttribute("magnet")&&Q.push({bbox:z.model.getBBox(),magnet:z.el}),z.$("[magnet]").toArray().forEach(ie=>{Q.push({bbox:z.getNodeBBox(ie),magnet:ie})}),Q.forEach(ie=>{const{magnet:ve,bbox:Pe}=ie,Fe=Pe.center().squaredDistance(ne);Fe<G&&(M===ve||i.options.validateConnection.apply(i,c.validateConnectionArgs(z,z.el===ve?null:ve)))&&(G=Fe,c.closestView=z,c.closestMagnet=ve)})},this);var oe,Se=null,Ie=c.closestView,je=c.closestMagnet;je&&(Se=c.magnetProxy=Ie.findProxyNode(je,"highlighter"));var Ve=c.arrowhead,L=M!==je;if(C&&L&&C.unhighlight(x,{connecting:!0,snapping:!0}),Ie){const{prevEnd:z,prevX:Q,prevY:ie}=c;if(c.prevX=r,c.prevY=t,!L&&("function"!=typeof s||Q===r&&ie===t)||(oe=Ie.getLinkEnd(je,r,t,this.model,Ve),!L&&Ru(z,oe)))return;c.prevEnd=oe,L&&Ie.highlight(Se,{connecting:!0,snapping:!0})}else oe={x:r,y:t};this.model.set(Ve,oe||{x:r,y:t},{ui:!0}),C&&this.notify("link:snap:disconnect",e,C,M,Ve),Ie&&this.notify("link:snap:connect",e,Ie,je,Ve)},_snapArrowheadEnd:function(e){var r=e.closestView,t=e.closestMagnet;r&&t&&(r.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=r.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,r,t,i){const{paper:o,model:s}=this;if(i.eventTarget!==e){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});const c=i.viewUnderPointer=o.findView(e);if(c){const f=i.magnetUnderPointer=c.findMagnet(e),v=i.magnetProxy=c.findProxyNode(f,"highlighter");f&&this.paper.options.validateConnection.apply(o,i.validateConnectionArgs(c,f))?v&&c.highlight(v,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=e,s.set(i.arrowhead,{x:r,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},r,t){const{model:i}=this,{viewUnderPointer:o,magnetUnderPointer:s,magnetProxy:c,arrowhead:f}=e;if(!s||!c||!o)return;o.unhighlight(c,{connecting:!0});const v=o.getLinkEnd(s,r,t,i,f);i.set(f,v,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var r=this.el.style;e.pointerEvents=r.pointerEvents,r.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var r=[];r[4]=e,r[5]=this;var t,i=0,o=0;"source"===e?(i=2,t="target"):(o=2,t="source");var s=this.model.get(t);if(s.id){var c=r[i]=this.paper.findViewByModel(s.id),f=c.getMagnetFromLinkEnd(s);f===c.el&&(f=void 0),r[i+1]=f}return function v(C,M){return r[o]=C,r[o+1]=C.el===M?void 0:M,r}},_markAvailableMagnets:function(e){function r(x,G){var ne=x.paper;return ne.options.validateConnection.apply(ne,this.validateConnectionArgs(x,G))}var t=this.paper,i=t.model.getCells();e.marked={};for(var o=0,s=i.length;o<s;o++){var c=i[o].findView(t);if(c){var f=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&f.push(c.el);var v=f.filter(r.bind(e,c));if(v.length>0){for(var C=0,M=v.length;C<M;C++)c.highlight(v[C],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=v}}}},_unmarkAvailableMagnets:function(e){for(var t,i,r=Object.keys(e.marked),o=0,s=r.length;o<s;o++){i=e.marked[t=r[o]];var c=this.paper.findViewByModel(t);if(c){for(var f=0,v=i.length;f<v;f++)c.unhighlight(i[f],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,r){r||(r={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:r.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:ua(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==r.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){In.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:on});Object.defineProperty(Wu.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var r=this.model.source();return new bt(r.x,r.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new bt(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(Wu.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var r=this.model.target();return new bt(r.x,r.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new bt(this.targetAnchor):e.getNodeBBox(t||e.el)}});const Ho={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},mm=tu.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Qi(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,r){this.el.insertBefore(e,this.insertPivot(r))},insertNode:function(e){const{el:r}=this;e.parentNode!==r&&r.appendChild(e)},insertPivot:function(e){const{el:r,pivotNodes:t}=this;(e=+e)||(e=0);let i=t[e];if(i)return i;i=t[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let s in t)s=+s,s<e&&s>o&&(o=s);return r.insertBefore(i,o!==-1/0?t[o].nextSibling:r.firstChild),i},removePivots:function(){const{el:e,pivotNodes:r}=this;for(let t in r)e.removeChild(r[t]);this.pivotNodes={}}}),gm=Fa.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,r){const{options:t}=this,{useFirstSubpath:i}=t;let o;try{const s=tt(r);if(o=s.convertToPathData().trim(),"PATH"===s.tagName()&&i){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(s){const c=e.getNodeBoundingRect(r);o=tt.rectToPath(Xt({},t,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,r){const{vel:t,options:i}=this,{padding:o,layer:s}=i;let c=e.getNodeMatrix(r);if(o){!s&&r===e.el&&t.remove();let f=e.getNodeBoundingRect(r);const v=f.x+f.width/2,C=f.y+f.height/2;f=tt.transformRect(f,c);const M=Math.max(f.width,1),x=Math.max(f.height,1),G=(M+o)/M,ne=(x+o)/x,oe=tt.createSVGMatrix({a:G,b:0,c:0,d:ne,e:v-G*v,f:C-ne*C});c=c.multiply(oe)}t.attr({d:this.getPathData(e,r),transform:tt.matrixToTransformString(c)})},highlight(e,r){const{vel:t,options:i}=this;t.attr(i.attrs),e.isNodeConnection(r)?this.highlightConnection(e):this.highlightNode(e,r)}}),Nl=20,nh=Fa.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Nl,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,r){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:i,MASK_REMOVE_TAGS:o}=this,s=r.tagName();if(!tt.isSVGGraphicsElement(r)||o.includes(s))return r.remove(),!1;if(i.includes(s)){const c=e.vel.findOne(`#${r.id}`);if(c){const{node:f}=c;let v=e.getNodeBoundingRect(f);e.model.isElement()&&(v=tt.transformRect(v,e.getNodeMatrix(f)));const C=tt("rect",v.toJSON()),{x:M,y:x}=v.center(),{angle:G,cx:ne=M,cy:oe=x}=c.rotate();G&&C.rotate(G,ne,oe),r.parent().append(C)}return r.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===r.attr("fill")||r.removeAttr(c)}),!0},transformMaskRoot(e,r){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(i=>{r.removeAttr(i)})},getMaskShape(e,r){const{options:t,MASK_REPLACE_TAGS:i}=this,{deep:o}=t,s=r.tagName();let c;if("G"===s){if(!o)return null;c=r.clone(),function th(e,r){const t=e.children();for(;t.length>0;){const i=t.shift();r(i)&&t.push(...i.children())}}(c,f=>this.transformMaskChild(e,f))}else{if(i.includes(s))return null;c=r.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,r){const{VISIBLE:t,INVISIBLE:i,options:o}=this,{padding:s,attrs:c}=o,f="stroke-width"in c?c["stroke-width"]:1,v="none"!==r.attr("fill");let C=parseFloat(r.attr("stroke-width"));isNaN(C)&&(C=1);const M=C+2*s,x=M+2*f;let G=this.getMaskShape(e,r);if(!G){const ne=e.getNodeBoundingRect(r.node);ne.inflate(ne.width?0:.5,ne.height?0:.5),G=tt("rect",ne.toJSON())}return G.attr(c),tt("mask",{id:this.getMaskId()}).append([G.clone().attr({fill:v?t:"none",stroke:t,"stroke-width":x}),G.clone().attr({fill:v?i:"none",stroke:i,"stroke-width":M})])},removeMask(e){const r=e.svg.getElementById(this.getMaskId());r&&e.defs.removeChild(r)},addMask(e,r){e.defs.appendChild(r.node)},highlight(e,r){const{options:t,vel:i}=this,{padding:o,attrs:s,maskClip:c=Nl,layer:f}=t,v="stroke"in s?s.stroke:"#000000";!f&&r===e.el&&i.remove();const C=e.getNodeBoundingRect(r).inflate(o+c),M=this.getMask(e,tt(r));this.addMask(e.paper,M),i.attr(C.toJSON()),i.attr({transform:tt.matrixToTransformString(e.getNodeMatrix(r)),mask:`url(#${M.id})`,fill:v})},unhighlight(e){this.removeMask(e.paper)}}),vm=Fa.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Qi("highlight-opacity"),highlight:function(e,r){tt(r).addClass(this.opacityClassName)},unhighlight:function(e,r){tt(r).removeClass(this.opacityClassName)}}),rh=Qi("highlighted"),_m=Fa.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:rh},highlight:function(e,r){tt(r).addClass(this.options.className)},unhighlight:function(e,r){tt(r).removeClass(this.options.className)}},{className:rh});function $c(e,r,t,i){return e.getPointAtRatio("ratio"in i?i.ratio:.5)}function ym(e,r,t,i){return e.getPointAtLength("length"in i?i.length:20)}function oi(e){return function(r,t,i,o){if(i instanceof Element){var c,s=this.paper.findView(i);if(s)if(s.isNodeConnection(i)){var f="fixedAt"in o?o.fixedAt:"50%";c=Dl(s,f)}else c=s.getNodeBBox(i).center();else c=new _e;return e.call(this,r,t,c,o)}return e.apply(this,arguments)}}function Dl(e,r){var t=parseFloat(r);return Co(r)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const Cm=oi(function xm(e,r,t,i){var o=1e6,s=e.getConnection(),c=e.getConnectionSubdivisions(),f=new Pt(t.clone().offset(0,o),t.clone().offset(0,-o)),v=new Pt(t.clone().offset(o,0),t.clone().offset(-o,0)),C=f.intersect(s,{segmentSubdivisions:c}),M=v.intersect(s,{segmentSubdivisions:c}),x=[];return C&&Array.prototype.push.apply(x,C),M&&Array.prototype.push.apply(x,M),x.length>0?t.chooseClosest(x):"fallbackAt"in i?Dl(e,i.fallbackAt):ih(e,r,t,i)}),ih=oi(function bm(e,r,t,i){return e.getClosestPoint(t)||new _e});function Bl(e,r,t){if(ii(t)){const{x:o,y:s}=t;if(isFinite(s)){const c=new Pt(r,e),{start:f,end:v}=c.parallel(s);r=f,e=v}t=o}if(!isFinite(t))return e;var i=e.distance(r);return 0===t&&i>0?e:e.move(r,-Math.min(t,i-1))}function Wc(e){var r=e.getAttribute("stroke-width");return null===r?0:parseFloat(r)||0}function Vl(e,r,t,i){var o=r.getNodeBBox(t);i.stroke&&o.inflate(Wc(t)/2);var s=e.intersect(o);return Bl(s?e.start.chooseClosest(s):e.end,e.start,i.offset)}var Xc="segmentSubdivisons",Kc="shapeBBox";const Em=function wm(e,r,t,i){let{offset:o,alignOffset:s,align:c}=i;return c&&function Yc(e,r,t=0){let i,o,s,c;const{start:f,end:v}=e;switch(r){case"left":i="x",o=v,s=f,c=-1;break;case"right":i="x",o=f,s=v,c=1;break;case"top":i="y",o=v,s=f,c=-1;break;case"bottom":i="y",o=f,s=v,c=1;break;default:return}f[i]<v[i]?o[i]=s[i]:s[i]=o[i],isFinite(t)&&(o[i]+=c*t,s[i]+=c*t)}(e,c,s),Bl(e.end,e.start,o)},Im=Vl,Pm=function Sm(e,r,t,i){var o=r.model.angle();if(0===o)return Vl(e,r,t,i);var s=r.getNodeUnrotatedBBox(t);i.stroke&&s.inflate(Wc(t)/2);var c=s.center(),f=e.clone().rotate(c,o),v=f.setLength(1e6).intersect(s);return Bl(v?f.start.chooseClosest(v).rotate(c,-o):e.end,e.start,i.offset)},Qc=function oh(e,r,t,i){var o,s,c=i.selector,f=e.end;if(o="string"==typeof c?r.findBySelector(c)[0]:Array.isArray(c)?Lu(t,c):function Tm(e){if(!e)return null;var r=e;do{var t=r.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))r=r.firstElementChild;else{if("TITLE"!==t)break;r=r.nextElementSibling}}while(r);return r}(t),!tt.isSVGGraphicsElement(o)){if(o===t||!tt.isSVGGraphicsElement(t))return f;o=t}var Ve,v=r.getNodeShape(o),C=r.getNodeMatrix(o),M=r.getRootTranslateMatrix(),x=r.getRootRotateMatrix(),G=M.multiply(x).multiply(C),ne=G.inverse(),oe=tt.transformLine(e,ne),Se=oe.start.clone(),Ie=r.getNodeData(o);if(!1===i.insideout&&(Ie[Kc]||(Ie[Kc]=v.bbox()),Ie[Kc].containsPoint(Se)))return f;if(v instanceof Lt){var L=i.precision||2;Ie[Xc]||(Ie[Xc]=v.getSegmentSubdivisions({precision:L})),Ve={precision:L,segmentSubdivisions:Ie[Xc]}}!0===i.extrapolate&&oe.setLength(1e6),(s=oe.intersect(v,Ve))?tt.isArray(s)&&(s=Se.chooseClosest(s)):!0===i.sticky&&(s=v instanceof bt?v.pointNearestToPoint(Se):v instanceof Oi?v.intersectionWithLineFromCenterToPoint(Se):v.closestPoint(Se,Ve));var z=s?tt.transformPoint(s,G):f,Q=i.offset||0;return i.stroke&&(Q+=Wc(o)/2),Bl(z,e.start,Q)};function jo(e){return function(r,t,i,o){var s=!!o.rotate,c=s?r.getNodeUnrotatedBBox(t):r.getNodeBBox(t),f=c[e](),v=o.dx;if(v){var C=Co(v);v=parseFloat(v),isFinite(v)&&(C&&(v/=100,v*=c.width),f.x+=v)}var M=o.dy;if(M){var x=Co(M);M=parseFloat(M),isFinite(M)&&(x&&(M/=100,M*=c.height),f.y+=M)}return s?f.rotate(r.model.getBBox().center(),-r.model.angle()):f}}const Om=jo("center"),Lm=jo("topMiddle"),Fm=jo("bottomMiddle"),Rm=jo("leftMiddle"),Nm=jo("rightMiddle"),Dm=jo("origin"),Bm=jo("topRight"),Vm=jo("bottomLeft"),Hm=jo("corner"),jm=oi(function Mm(e,r,t,i){var o=e.model.angle(),s=e.getNodeBBox(r),c=s.center(),f=s.origin(),v=s.corner(),C=i.padding;if(isFinite(C)||(C=0),f.y+C<=t.y&&t.y<=v.y-C){var M=t.y-c.y;c.x+=0===o||180===o?0:1*M/Math.tan(di(o)),c.y+=M}else if(f.x+C<=t.x&&t.x<=v.x-C){var x=t.x-c.x;c.y+=90===o||270===o?0:x*Math.tan(di(o)),c.x+=x}return c}),zm=oi(function Am(e,r,t,i){var s,c,f,o=!!i.rotate;o?(s=e.getNodeUnrotatedBBox(r),f=e.model.getBBox().center(),c=e.model.angle()):s=e.getNodeBBox(r);var M,v=i.padding;switch(isFinite(v)&&s.inflate(v),o&&t.rotate(f,c),s.sideNearestToPoint(t)){case"left":M=s.leftMiddle();break;case"right":M=s.rightMiddle();break;case"top":M=s.topMiddle();break;case"bottom":M=s.bottomMiddle()}return o?M.rotate(f,-c):M}),Um=function km(e,r,t,i,o){return e.model.getPointFromConnectedLink(this.model,o).offset(i.dx,i.dy)},ou={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Hl=9007199254740991,Jc=In.Highlighting,sh={[Jc.DEFAULT]:{name:"stroke",options:{padding:3}},[Jc.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Jc.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},a=[{name:Ho.BACK},{name:Ho.CELLS},{name:Ho.LABELS},{name:Ho.FRONT},{name:Ho.TOOLS}],u=tu.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Hu,linkView:Wu,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,r){return!1},highlighting:sh,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new eu,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,r,t){return"passive"!==r.getAttribute("magnet")},validateConnection:function(e,r,t,i,o,s){return("target"===o?t:e)instanceof Hu},embeddingMode:!1,validateEmbedding:function(e,r){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:ou.EXACT,frozen:!1,onViewUpdate:function(e,r,t,i,o){r&(e.FLAG_INSERT|e.FLAG_REMOVE)||i.mounting||i.isolate||o.requestConnectedLinksUpdate(e,t,i)},onViewPostponed:function(e,r,t){return t.forcePostponedViewUpdate(e,r)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:O,anchorNamespace:B,linkAnchorNamespace:k,connectionPointNamespace:R},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:r}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&Ma(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new La;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=rr(r.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,r,t){var i=t.position;this.isAsync()||!Ni(i)?this.renderView(e,t):(t.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(e,t),0===i&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,r,t){const i=this.findViewByModel(e);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,t)},onCellChange:function(e,r){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===ou.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,r)}},onGraphReset:function(e,r){this.resetLayers(),this.resetViews(e.models,r)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var r=e&&e.batchName,t=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(r)&&!t.hasActiveBatch(i)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(r)&&!t.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:r,defaultRouter:t,defaultConnectionPoint:i,defaultAnchor:o,defaultLinkAnchor:s,origin:c,highlighting:f,cellViewNamespace:v,interactive:C}=e;!v&&"undefined"!=typeof joint&&Ma(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),er(r)||(e.defaultConnector=So(r)),er(t)||(e.defaultRouter=So(t)),er(i)||(e.defaultConnectionPoint=So(i)),er(o)||(e.defaultAnchor=So(o)),er(s)||(e.defaultLinkAnchor=So(s)),ii(C)&&(e.interactive=Xt({},C)),ii(f)&&(e.highlighting=wc({},f,sh)),e.origin=Xt({},c)},children:function(){var e=tt.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Qi("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Qi("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Qi("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:r}=this;if(e in r)return r[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:r}=this,{svg:t,defs:i,layers:o,background:s,grid:c}=e;return this.svg=t,this.defs=i,this.layers=o,this.$background=rr(s),this.$grid=rr(c),this.renderLayers(),tt.ensureId(t),r.background&&this.drawBackground(r.background),r.drawGrid&&this.drawGrid(),this},renderLayers:function(e=a){this.removeLayers(),e.forEach(({name:o})=>{const c=new mm({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const r=this.getLayerView(Ho.CELLS),t=this.getLayerView(Ho.TOOLS),i=this.getLayerView(Ho.LABELS);this.tools=t.el,this.cells=this.viewport=r.el,r.vel.addClass(Qi("viewport")),i.vel.addClass(Qi("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,r=>{e[r].remove(),delete e[r]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,r=>{e[r].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var r=this.layers;if(void 0===e){var t=r.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=r.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),tt.createSVGMatrix(e)}e=tt.createSVGMatrix(e);var i=tt.matrixToTransformString(e);return r.setAttribute("transform",i),this._viewportMatrix=e,this._viewportTransformString=r.getAttribute("transform"),this},clientMatrix:function(){return tt.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,r,t){if(e instanceof In)for(var i=e.model,o=this.model.getConnectedLinks(i),s=0,c=o.length;s<c;s++){var f=o[s],v=this.findViewByModel(f);if(v){var C=["UPDATE"];f.getTargetCell()===i&&C.push("TARGET"),f.getSourceCell()===i&&C.push("SOURCE");var M=Math.max(r+1,v.UPDATE_PRIORITY);this.scheduleViewUpdate(v,v.getFlag(C),M,t)}}},forcePostponedViewUpdate:function(e,r){if(!(e&&e instanceof In))return!1;var t=e.model;if(t.isElement())return!1;if(0==(r&e.getFlag(["SOURCE","TARGET"]))){var i=0,o=this.findViewByModel(t.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o),e.updateEndMagnet("source"));var s=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(s=this.dumpView(c),e.updateEndMagnet("target")),0===i&&0===s)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,r,t,i){i||(i={}),this.scheduleViewUpdate(e,r,t,i);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==i.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var s=this.updateViews(i);o&&this.notifyAfterRender(s,i)}},scheduleViewUpdate:function(e,r,t,i){const{_updates:o,options:s}=this,{FLAG_REMOVE:c,FLAG_INSERT:f,UPDATE_PRIORITY:v,cid:C}=e;let M=o.priorities[t];if(M||(M=o.priorities[t]={}),t>v)for(let ne=t-1;ne>=v;ne--){const oe=o.priorities[ne];!oe||!(C in oe)||(M[C]|=oe[C],delete oe[C])}let x=M[C]||0;if((x&r)===r)return;x||o.count++,r&c&&x&f?M[C]^=f:r&f&&x&c&&(M[C]^=c),M[C]|=r;const G=s.onViewUpdate;"function"==typeof G&&G.call(this,e,r,t,i||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,i=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|i[t];return delete i[t],o},dumpView:function(e,r){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,r):0},updateView:function(e,r,t){if(!e)return 0;const{FLAG_REMOVE:i,FLAG_INSERT:o,model:s}=e;if(e instanceof In){if(r&i)return this.removeView(s),0;r&o&&(this.insertView(e),r^=o)}return r?e.confirmUpdate(r,t||{}):0},requireView:function(e,r){var t=this.findViewByModel(e);return t?(this.dumpView(t,r),t):null},registerUnmountedView:function(e){var r=e.cid,t=this._updates;if(r in t.unmounted)return 0;var i=t.unmounted[r]|=e.FLAG_INSERT;return t.unmountedCids.push(r),delete t.mounted[r],i},registerMountedView:function(e){var r=e.cid,t=this._updates;if(r in t.mounted)return 0;t.mounted[r]=!0,t.mountedCids.push(r);var i=t.unmounted[r]||0;return delete t.unmounted[r],i},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var r=Ji({},e,{viewport:null});this.checkViewport(r),this.updateViews(r)},updateViews:function(e){this.notifyBeforeRender(e);let r,t=0,i=0,o=Hl;do{i++,r=this.updateViewsBatch(e),t+=r.updated,o=Math.min(r.priority,o)}while(!r.empty);const s={updated:t,batches:i,priority:o};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,r=Object.keys(e);let t=r.length;for(;t>0&&t--;)for(let i in e[r[t]])return!0;return!1},updateViewsAsync:function(e,r){e||(e={}),r||(r={processed:0,priority:Hl});var t=this._updates,i=t.id;if(i){Cc(i),0===r.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),s=Ji({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(s),f=c.unmounted,v=c.mounted,C=r.processed,M=t.count;o.updated>0&&(o.processed=C+=o.updated+o.unmounted,r.priority=Math.min(o.priority,r.priority),o.empty&&0===v?(o.unmounted+=f,o.mounted+=v,o.priority=r.priority,this.notifyAfterRender(o,e),r.processed=0,r.priority=Hl,t.count=0):r.processed=C);var x=e.progress;if(M&&"function"==typeof x&&x.call(this,o.empty,C,M,o,this),t.id!==i)return}t.id=bc(this.updateViewsAsync,this,e,r)},notifyBeforeRender:function(e={}){let r=e.beforeRender;"function"!=typeof r&&(r=this.options.beforeRender,"function"!=typeof r)||r.call(this,e,this)},notifyAfterRender:function(e,r={}){let t=r.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,r,this),this.trigger("render:done",e,r)},updateViewsBatch:function(e){e||(e={});var r=e.batchSize||1/0,t=this._updates,i=0,o=0,s=0,c=0,f=Hl,v=!0,C=this.options,M=t.priorities,x="viewport"in e?e.viewport:C.viewport;"function"!=typeof x&&(x=null);var G=C.onViewPostponed;"function"!=typeof G&&(G=null);var ne=Object.keys(M);e:for(var oe=0,Se=ne.length;oe<Se;oe++){var Ie=+ne[oe],je=M[Ie];for(var Ve in je){if(i>=r){v=!1;break e}var L=Is[Ve];if(L){var z=je[Ve];if(0==(z&L.FLAG_REMOVE)){var Q=Ve in t.unmounted;if(L.DETACHABLE&&x&&!x.call(this,L,!Q,this)){Q||(this.registerUnmountedView(L),L.unmount()),t.unmounted[Ve]|=z,delete je[Ve],s++;continue}Q&&(z|=L.FLAG_INSERT,c++),z|=this.registerMountedView(L)}var ie=this.updateView(L,z,e);ie>0&&(je[Ve]=ie,!G||!G.call(this,L,ie,this)||je[Ve])?(o++,v=!1):(f>Ie&&(f=Ie),i++,delete je[Ve])}else delete je[Ve]}}return{priority:f,updated:i,postponed:o,unmounted:s,mounted:c,empty:v}},getUnmountedViews:function(){const r=Object.keys(this._updates.unmounted),t=r.length,i=new Array(t);for(var o=0;o<t;o++)i[o]=Is[r[o]];return i},getMountedViews:function(){const r=Object.keys(this._updates.mounted),t=r.length,i=new Array(t);for(var o=0;o<t;o++)i[o]=Is[r[o]];return i},checkUnmountedViews:function(e,r){r||(r={});var t=0;"function"!=typeof e&&(e=null);for(var o=this._updates,s=o.unmountedCids,c=o.unmounted,f=0,v=(Math.min(s.length,"mountBatchSize"in r?r.mountBatchSize:1/0));f<v;f++){var C=s[f];if(C in c){var M=Is[C];if(M){if(M.DETACHABLE&&e&&!e.call(this,M,!1,this)){s.push(C);continue}t++;var x=this.registerMountedView(M);x&&this.scheduleViewUpdate(M,x,M.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,f),t},checkMountedViews:function(e,r){r||(r={});var t=0;if("function"!=typeof e)return t;for(var o=this._updates,s=o.mountedCids,c=o.mounted,f=0,v=(Math.min(s.length,"unmountBatchSize"in r?r.unmountBatchSize:1/0));f<v;f++){var C=s[f];if(C in c){var M=Is[C];if(M){if(!M.DETACHABLE||e.call(this,M,!0,this)){s.push(C);continue}t++,this.registerUnmountedView(M)&&M.unmount()}}}return s.splice(0,f),t},checkViewport:function(e){var r=Ji({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in r?r.viewport:this.options.viewport,i=this.checkMountedViews(t,r);return i>0&&(r.mountBatchSize=Math.min(this._updates.unmountedCids.length-i,r.mountBatchSize)),{mounted:this.checkUnmountedViews(t,r),unmounted:i}},freeze:function(e){e||(e={});var r=this._updates,t=e.key,i=this.options.frozen,o=r.freezeKey;if(t&&t!==o){if(i&&o)return;r.freezeKey=t,r.keyFrozen=i}this.options.frozen=!0;var s=r.id;r.id=null,this.isAsync()&&s&&Cc(s)},unfreeze:function(e){e||(e={});var r=this._updates,t=e.key,i=r.freezeKey;t&&i&&t!==i||(r.freezeKey=null,(!t||t!==i||!r.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=r.keyFrozen=!1,r.sort&&(this.sortViews(),r.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===ou.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,r=e.width,t=e.height;return Ni(r)||(r=this.el.clientWidth),Ni(t)||(t=this.el.clientHeight),{width:r,height:t}},setDimensions:function(e,r){const{options:t}=this,{width:i,height:o}=t;let s=void 0===e?i:e,c=void 0===r?o:r;if(i===s&&o===c)return;t.width=s,t.height=c,this._setDimensions();const f=this.getComputedSize();this.trigger("resize",f.width,f.height)},_setDimensions:function(){const{options:e}=this;let r=e.width,t=e.height;Ni(r)&&(r=Math.round(r)),Ni(t)&&(t=Math.round(t)),this.$el.css({width:null===r?"":r,height:null===t?"":t})},setOrigin:function(e,r){return this.translate(e||0,r||0)},fitToContent:function(e,r,t,i){i=Mr(e)?e:Xt({gridWidth:e,gridHeight:r,padding:t},i);const{x:o,y:s,width:c,height:f}=this.getFitToContentArea(i),{sx:v,sy:C}=this.scale();return this.setOrigin(-o*v,-s*C),this.setDimensions(c*v,f*C),new bt(o,s,c,f)},getFitToContentArea:function(e={}){const r=e.gridWidth||1,t=e.gridHeight||1,i=qs(e.padding||0),o=Math.max(e.minWidth||0,r),s=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,f=e.maxHeight||Number.MAX_VALUE,v=e.allowNewOrigin,C="contentArea"in e?new bt(e.contentArea):this.getContentArea(e),{sx:M,sy:x}=this.scale();C.x*=M,C.y*=x,C.width*=M,C.height*=x;let G=Math.ceil((C.width+C.x)/r),ne=Math.ceil((C.height+C.y)/t);e.allowNegativeBottomRight||(G=Math.max(G,1),ne=Math.max(ne,1)),G*=r,ne*=t;let oe=0;("negative"===v&&C.x<0||"positive"===v&&C.x>=0||"any"===v)&&(oe=Math.ceil(-C.x/r)*r,oe+=i.left,G+=oe);let Se=0;return("negative"===v&&C.y<0||"positive"===v&&C.y>=0||"any"===v)&&(Se=Math.ceil(-C.y/t)*t,Se+=i.top,ne+=Se),G+=i.right,ne+=i.bottom,G=Math.max(G,o),ne=Math.max(ne,s),G=Math.min(G,c),ne=Math.min(ne,f),new bt(-oe/M,-Se/x,G/M,ne/x)},scaleContentToFit:function(e){var r,t;if(e||(e={}),"contentArea"in e){var i=e.contentArea;r=this.localToPaperRect(i),t=new _e(i)}else r=this.getContentBBox(e),t=this.paperToLocalPoint(r);if(r.width&&r.height){Ji(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var C,o=qs(e.padding),s=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,f=e.minScaleY||e.minScale,v=e.maxScaleY||e.maxScale;if(e.fittingBBox)C=e.fittingBBox;else{var M=this.translate(),x=this.getComputedSize();C={x:M.tx,y:M.ty,width:x.width,height:x.height}}C=new bt(C).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var G=this.scale(),ne=C.width/r.width*G.sx,oe=C.height/r.height*G.sy;if(e.preserveAspectRatio&&(ne=oe=Math.min(ne,oe)),e.scaleGrid){var Se=e.scaleGrid;ne=Se*Math.floor(ne/Se),oe=Se*Math.floor(oe/Se)}ne=Math.min(c,Math.max(s,ne)),oe=Math.min(v,Math.max(f,oe));var Ie=this.options.origin,je=C.x-t.x*ne-Ie.x,Ve=C.y-t.y*oe-Ie.y;this.scale(ne,oe),this.translate(je,Ve)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new bt:tt(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:r}=this.options;let t;return t=er(r)?r.apply(this,e):!0===r?this.getArea():r?new bt(r):null,t},createViewForModel:function(e){const{options:r}=this;var t,i,o=r.cellViewNamespace,s=e.get("type")+"View",c=Lu(o,s,".");return e.isLink()?(t=r.linkView,i=Wu):(t=r.elementView,i=Hu),new(t.prototype instanceof Mi.View?c||t:t.call(this,e)||c||i)({model:e,interactive:r.interactive,labelsLayer:!0===r.labelsLayer?Ho.LABELS:r.labelsLayer})},removeView:function(e){const{id:r}=e,{_views:t,_updates:i}=this,o=t[r];if(o){var{cid:s}=o;const{mounted:c,unmounted:f}=i;o.remove(),delete t[r],delete c[s],delete f[s]}return o},renderView:function(e,r){const{id:t}=e,i=this._views;let o,s,c=!0;return t in i&&(o=i[t],o.model===e?(s=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=i[t]=this.createViewForModel(e),o.paper=this,s=this.registerUnmountedView(o)|o.getFlag(Fr(o,"initFlag"))),this.requestViewUpdate(o,s,o.UPDATE_PRIORITY,r),o},onImageDragStart:function(){return!1},resetViews:function(e,r){r||(r={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,i=e.length;t<i;t++)this.renderView(e[t],r);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){Bo(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=rr(this.cells).children("[model-id]"),r=this.model.get("cells");!function(e,r){var t=rr(e),i=t.map(function(){var s=this.parentNode,c=s.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,c),s.removeChild(c)}});Array.prototype.sort.call(t,r).each(function(o){i[o].call(this)})}(e,function(t,i){var o=r.get(t.getAttribute("model-id")),s=r.get(i.getAttribute("model-id")),c=o.attributes.z||0,f=s.attributes.z||0;return c===f?0:c<f?-1:1})},insertView:function(e){const r=this.getLayerView(Ho.CELLS),{el:t,model:i}=e;this.options.sorting===ou.APPROX?r.insertSortedNode(t,i.get("z")):r.insertNode(t),e.onMount()},scale:function(e,r,t,i){if(void 0===e)return tt.matrixToScale(this.matrix());void 0===r&&(r=e),void 0===t&&(t=0,i=0);var o=this.translate();(t||i||o.tx||o.ty)&&this.translate(o.tx-t*(e-1),o.ty-i*(r-1)),e=Math.max(e||0,this.MIN_SCALE),r=Math.max(r||0,this.MIN_SCALE);var f=this.matrix();return f.a=e,f.d=r,this.matrix(f),this.trigger("scale",e,r,t,i),this},rotate:function(e,r,t){if(void 0===e)return tt.matrixToRotate(this.matrix());if(void 0===r){var i=this.cells.getBBox();r=i.width/2,t=i.height/2}var o=this.matrix().translate(r,t).rotate(e).translate(-r,-t);return this.matrix(o),this},translate:function(e,r){if(void 0===e)return tt.matrixToTranslate(this.matrix());const{options:t}=this,{origin:i,drawGrid:o}=t;e||(e=0),r||(r=0);const s=this.matrix();if(s.e===e&&s.f===r)return this;s.e=e,s.f=r,this.matrix(s);const{tx:c,ty:f}=this.translate();return i.x=c,i.y=f,this.trigger("translate",c,f),o&&this.drawGrid(),this},findView:function(e){var r=mi(e)?this.cells.querySelector(e):e instanceof rr?e[0]:e,t=this.findAttribute("model-id",r);if(t)return this._views[t]},findViewByModel:function(e){var r=mi(e)||Ni(e)?e:e&&e.id;return this._views[r]},findViewsFromPoint:function(e){return e=new _e(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,r){r=Ji(r||{},{strict:!1}),e=new bt(e);var t=this.model.getElements().map(this.findViewByModel,this),i=r.strict?"containsRect":"intersect";return t.filter(function(o){return o&&e[i](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...r){"string"==typeof e&&this.trigger("tools:event",e,...r)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,r){return this.clientToLocalPoint(e,r).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,r){var t=new _e(e,r);return tt.transformPoint(t,this.matrix())},localToPaperRect:function(e,r,t,i){var o=new bt(e,r,t,i);return tt.transformRect(o,this.matrix())},paperToLocalPoint:function(e,r){var t=new _e(e,r);return tt.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,r,t,i){var o=new bt(e,r,t,i);return tt.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,r){var t=new _e(e,r);return tt.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,r,t,i){var o=new bt(e,r,t,i);return tt.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,r){var t=new _e(e,r);return tt.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,r,t,i){var o=new bt(e,r,t,i);return tt.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,r){return this.localToPaperPoint(e,r).offset(this.pageOffset())},localToPageRect:function(e,r,t,i){return this.localToPaperRect(e,r,t,i).offset(this.pageOffset())},pageToLocalPoint:function(e,r){var i=new _e(e,r).difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(e,r,t,i){var o=this.pageOffset(),s=new bt(e,r,t,i);return s.x-=o.x,s.y-=o.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new _e(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Wu))throw new Error("Must provide a linkView.");var r=e.model,t=this.options,i=this.model,o=i.constructor.validations;return!(!t.multiLinks&&!o.multiLinks.call(this,i,r)||!t.linkPinning&&!o.linkPinning.call(this,i,r)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,r){return er(this.options.defaultLink)?this.options.defaultLink.call(this,e,r):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:r,type:t}=e;const{highlighting:i,highlighterNamespace:o}=this.options;if(void 0===r){if(!i||t&&(r=i[t],!1===r))return!1;r||(r=i.default)}if(!r)return!1;mi(r)&&(r={name:r});const s=r.name,c=o[s];if(!c)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:c,options:r.options||{},name:s}},onCellHighlight:function(e,r,t){const i=this.resolveHighlighter(t);if(!i)return;const{highlighter:o,options:s}=i;o.highlight(e,r,s)},onCellUnhighlight:function(e,r,t){const i=this.resolveHighlighter(t);if(!i)return;const{highlighter:o,options:s}=i;o.unhighlight(e,r,s)},pointerdblclick:function(e){e.preventDefault(),e=Fi(e);var r=this.findView(e.target);if(!this.guard(e,r)){var t=this.snapToGrid(e.clientX,e.clientY);r?r.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=Fi(e);var t=this.findView(e.target);if(this.guard(e,t))return;var i=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,i.x,i.y):this.trigger("blank:pointerclick",e,i.x,i.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=Fi(e);var r=this.findView(e.target);if(!this.guard(e,r)){var t=this.snapToGrid(e.clientX,e.clientY);r?r.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=Fi(e);var r=this.findView(e.target);if(!this.guard(e,r)){var t=this.snapToGrid(e.clientX,e.clientY);r?(e.preventDefault(),r.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(r,e.data)}},pointermove:function(e){var r=this.eventData(e);if(r.mousemoved||(r.mousemoved=0),!(++r.mousemoved<=this.options.moveThreshold)){e=Fi(e);var i=this.snapToGrid(e.clientX,e.clientY),o=r.sourceView;o?o.pointermove(e,i.x,i.y):this.trigger("blank:pointermove",e,i.x,i.y),this.eventData(e,r)}},pointerup:function(e){this.undelegateDocumentEvents();var r=Fi(e),t=this.snapToGrid(r.clientX,r.clientY),i=this.eventData(e).sourceView;i?i.pointerup(r,t.x,t.y):this.trigger("blank:pointerup",r,t.x,t.y),r.isPropagationStopped()||this.pointerclick(rr.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=Fi(e);var r=this.findView(e.target);if(!this.guard(e,r))if(r)r.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Fi(e);var r=this.findView(e.target);if(!this.guard(e,r))if(r)r.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Fi(e);const{target:r,relatedTarget:t,currentTarget:i}=e,o=this.findView(r);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseenter(e),this.el.contains(t)))||s||i===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Fi(e);const{target:r,relatedTarget:t,currentTarget:i}=e,o=this.findView(r);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseleave(e),this.el.contains(t)))||s||i===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=Fi(e);var r=this.findView(e.target);if(!this.guard(e,r)){var t=e.originalEvent,i=this.snapToGrid(t.clientX,t.clientY),o=Math.max(-1,Math.min(1,t.wheelDelta));r?r.mousewheel(e,i.x,i.y,o):this.trigger("blank:mousewheel",e,i.x,i.y,o)}},onevent:function(e){var r=e.currentTarget,t=r.getAttribute("event");if(t){var i=this.findView(r);if(i){if(e=Fi(e),this.guard(e,i))return;var o=this.snapToGrid(e.clientX,e.clientY);i.onevent(e,t,o.x,o.y)}}},magnetEvent:function(e,r){var t=e.currentTarget;if(t.getAttribute("magnet")){var o=this.findView(t);if(o){if(e=Fi(e),this.guard(e,o))return;var s=this.snapToGrid(e.clientX,e.clientY);r.call(this,o,e,t,s.x,s.y)}}},onmagnet:function(e){this.magnetEvent(e,function(r,t,i,o,s){r.onmagnet(t,o,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(r,t,i,o,s){r.magnetpointerdblclick(t,i,o,s)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(r,t,i,o,s){r.magnetcontextmenu(t,i,o,s)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=Fi(e),this.guard(e,t))return;var i=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,i.x,i.y)}},getPointerArgs(e){const r=Fi(e),{x:t,y:i}=this.snapToGrid(r.clientX,r.clientY);return[r,t,i]},delegateDragEvents:function(e,r){r||(r={}),this.eventData({data:r},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,r),this.undelegateEvents()},guard:function(e,r){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,r))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(r&&r.model&&r.model instanceof la||this.svg===e.target||this.el===e.target||rr.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:tt("svg",{width:"100%",height:"100%"},tt("defs")),patterns:{},add:function(e,r){tt(this.root.node.childNodes[0]).append(r),this.patterns[e]=r,this.root.append(tt("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var r=this.constructor.gridPatterns;if(mi(e)&&Array.isArray(r[e]))return r[e].map(function(v){return Xt({},v)});var t=e||{args:[{}]},i=Array.isArray(t),o=t.name;if(!i&&!o&&!t.markup&&(o="dot"),o&&Array.isArray(r[o])){var s=r[o].map(function(v){return Xt({},v)}),c=Array.isArray(t.args)?t.args:[t.args||{}];Ji(c[0],Ts(e,"args"));for(var f=0;f<c.length;f++)s[f]&&Xt(s[f],c[f]);return s}return i?t:[t]},drawGrid:function(e){var r=this.options.gridSize;if(r<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],i=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,f){var v="pattern_"+f,C=pi(c,t[f],{sx:i.a||1,sy:i.d||1,ox:i.e||0,oy:i.f||0});C.width=r*(i.a||1)*(C.scaleFactor||1),C.height=r*(i.d||1)*(C.scaleFactor||1),o.exist(v)||o.add(v,tt("pattern",{id:v,patternUnits:"userSpaceOnUse"},tt(C.markup)));var M=o.get(v);er(C.update)&&C.update(M.node.childNodes[0],C);var x=C.ox%C.width;x<0&&(x+=C.width);var G=C.oy%C.height;G<0&&(G+=C.height),M.attr({x,y:G,width:C.width,height:C.height})});var s=(new XMLSerializer).serializeToString(o.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){var r=(e=e||{}).position||"center",t=e.size||"auto auto",i=this.scale(),o=this.translate();Mr(r)&&(r=o.tx+i.sx*(r.x||0)+"px "+(o.ty+i.sy*(r.y||0))+"px"),Mr(t)&&(t=(t=new bt(t).scale(i.sx,i.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:r})},drawBackgroundImage:function(e,r){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===r.id){var t,i=(r=r||{}).size,o=r.repeat||"no-repeat",s=r.opacity||1,c=Math.abs(r.quality)||1,f=this.constructor.backgroundPatterns[vp(o)];if(er(f)){e.width*=c,e.height*=c;var v=f(e,r);if(!(v instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=v.toDataURL("image/png"),o="repeat",Mr(i)?(i.width*=v.width/e.width,i.height*=v.height/e.height):void 0===i&&(r.size={width:v.width/c,height:v.height/c})}else t=e.src,void 0===i&&(r.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:o,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(r)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=So(e),Fu(e);var r=document.createElement("img");r.onload=this.drawBackgroundImage.bind(this,r,e),r.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Bo(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Mr(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var r=e.id,t=e.name;if(r||(r=t+this.svg.id+sa(JSON.stringify(e))),!this.isDefined(r)){var o=wo[t]&&wo[t](e.args||{});if(!o)throw new Error("Non-existing filter "+t);var s=Xt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:r});tt(o,s).appendTo(this.defs)}return r},defineGradient:function(e){if(!Mr(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:r,defs:t}=this,{type:i,id:o=i+r.id+sa(JSON.stringify(e)),stops:s,attrs:c={}}=e;if(this.isDefined(o))return o;const f=En(s).map(({offset:C,color:M,opacity:x})=>tt("stop").attr({offset:C,"stop-color":M,"stop-opacity":Number.isFinite(x)?x:1})),v=tt(i,c,f);return v.id=o,v.appendTo(t),o},definePattern:function(e){if(!Mr(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:r,defs:t}=this,{id:i=r.id+sa(JSON.stringify(e)),markup:o,attrs:s={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(i))return i;const c=tt("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=i,c.attr(s),"string"==typeof o)c.append(tt(o));else{const{fragment:f}=io(o);c.append(f)}return c.appendTo(t),i},defineMarker:function(e){if(!Mr(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:r,defs:t}=this,{id:i=r.id+sa(JSON.stringify(e)),markup:o,attrs:s={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(i))return i;const f=tt("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(f.id=i,f.attr(s),o)if("string"==typeof o)f.append(tt(o));else{const{fragment:v}=io(o);f.append(v)}else{const{type:v="path"}=e,C=tt(v,Ts(e,"type","id","markup","attrs","markerUnits"));f.append(C)}return f.appendTo(t),i}},{sorting:ou,Layers:Ho,backgroundPatterns:{flipXy:function(e){var r=document.createElement("canvas"),t=e.width,i=e.height;r.width=2*t,r.height=2*i;var o=r.getContext("2d");return o.drawImage(e,0,0,t,i),o.setTransform(-1,0,0,-1,r.width,r.height),o.drawImage(e,0,0,t,i),o.setTransform(-1,0,0,1,r.width,0),o.drawImage(e,0,0,t,i),o.setTransform(1,0,0,-1,0,r.height),o.drawImage(e,0,0,t,i),r},flipX:function(e){var r=document.createElement("canvas"),t=e.width,i=e.height;r.width=2*t,r.height=i;var o=r.getContext("2d");return o.drawImage(e,0,0,t,i),o.translate(2*t,0),o.scale(-1,1),o.drawImage(e,0,0,t,i),r},flipY:function(e){var r=document.createElement("canvas"),t=e.width,i=e.height;r.width=t,r.height=2*i;var o=r.getContext("2d");return o.drawImage(e,0,0,t,i),o.translate(0,2*i),o.scale(1,-1),o.drawImage(e,0,0,t,i),r},watermark:function(e,r){r=r||{};var t=e.width,i=e.height,o=document.createElement("canvas");o.width=3*t,o.height=3*i;for(var s=o.getContext("2d"),c=Ni(r.watermarkAngle)?-r.watermarkAngle:-20,f=di(c),v=o.width/4,C=o.height/4,M=0;M<4;M++)for(var x=0;x<4;x++)(M+x)%2>0&&(s.setTransform(1,0,0,1,(2*M-1)*v,(2*x-1)*C),s.rotate(f),s.drawImage(e,-t/2,-i/2,t,i));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,r){tt(e).attr({width:r.thickness*r.sx,height:r.thickness*r.sy,fill:r.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,r){var t=r.sx<=1?r.thickness*r.sx:r.thickness;tt(e).attr({width:t,height:t,fill:r.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,r){var t,i=r.width,o=r.height,s=r.thickness;t=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",tt(e).attr({d:t,stroke:r.color,"stroke-width":r.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,r){var t,i=r.width,o=r.height,s=r.thickness;t=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",tt(e).attr({d:t,stroke:r.color,"stroke-width":r.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,r){var t,i=r.width,o=r.height,s=r.thickness;t=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",tt(e).attr({d:t,stroke:r.color,"stroke-width":r.thickness})}}]}});class p{constructor(r){this.offsetX=20,this.offsetY=20,this.graph=new La,this.paper=new u({el:rr("#paper"),width:"100%",height:"calc(100vh - 19rem)",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&r(t.model.id)})}makeElement(r,t){const s=16*(.6*Math.max(...t.split("\n").map(f=>f.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new Rr({id:r,size:{width:s,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:s,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(r,t){return new Rf({source:{id:r},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(r){const t=[],i=[];return r.forEach(o=>{const s=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(100*o.average_success)}% (${o.question_count} Total)`;t.push(this.makeElement(o.pk,s)),o.next_category_ids.forEach(c=>{i.push(this.makeLink(o.pk,c))})}),t.concat(i)}buildGraphFromAdjacencyList(r){const t=this.makeCellsFromAdjacencyList(r);this.graph.resetCells(t);const i=Vo.layout(this.graph,{dagre:yo(),graphlib:dl(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${i.width+2*this.offsetX}px`,this.paper.svg.style.height=`${i.height+2*this.offsetY}px`}}function P(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",6),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().reset()}),n.\u0275\u0275text(1," Back "),n.\u0275\u0275elementEnd()}if(2&e){n.\u0275\u0275nextContext();const t=n.\u0275\u0275reference(6);n.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}function j(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h6",7),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(),i=n.\u0275\u0275reference(6);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("tui-skeleton",0===i.children.length),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function te(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"h6",7),n.\u0275\u0275text(1," Top-Level Categories "),n.\u0275\u0275elementEnd()),2&e){n.\u0275\u0275nextContext();const t=n.\u0275\u0275reference(6);n.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let he=(()=>{class e{constructor(t,i,o){this.categoryService=t,this.router=i,this.userActionsService=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new p(i=>{const o=this.isTopLevel(i);this.logConceptClick(i,o),this.parentNode=i,o?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",i],{queryParams:{difficulty:"EASY"}}).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(i=>i.pk===this.parentNode).full_name:null,this.rawCategories.filter(i=>i.parent===this.parentNode).forEach(i=>{t.push(i)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.logConceptClick(null,!1),this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(i=>i.pk===t).parent}logConceptClick(t,i){this.userActionsService.createCustomAction({description:"User selected a category on the concept map",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{categoryId:t,isTopLevel:i}}).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Wl.H),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(ta.v))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","flat","aria-label","Back","class","tui-space_right-3","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","flat","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-3",3,"click"],[1,"tui-text_h6","tui-space_vertical-0"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,P,2,2,"button",1),n.\u0275\u0275template(2,j,3,3,"ng-container",2),n.\u0275\u0275template(3,te,2,2,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"div",4,5)),2&t){const o=n.\u0275\u0275reference(4),s=n.\u0275\u0275reference(6);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.parentNode),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.parentNode)("ngIfElse",o),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("tui-skeleton",0===s.children.length)}},directives:[A.O5,pt.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 19rem);overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})(),xe=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.courseService=i,this.route=o,this.courseId=this.route.snapshot.parent.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-practice"]],decls:2,vars:1,consts:[[1,"tui-container","tui-container_fullwidth"],[3,"currCourse"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"section",0),n.\u0275\u0275element(1,"app-concept-map",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("currCourse",i.course))},directives:[he],styles:[""]}),e})(),Me=(()=>{class e{constructor(t,i){this.http=t,this.apiService=i}useTokens(t,i){const o=new vi.WM({"Content-Type":"application/json"}),s=this.apiService.getURL("token-use","use",i);return this.http.post(s,t,{headers:o}).pipe((0,un.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(vi.eN),n.\u0275\u0275inject(Uo.s))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ot=d(21922);function at(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-notification",4),n.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function ht(e,r){1&e&&n.\u0275\u0275element(0,"tui-tag",19)}function St(e,r){1&e&&n.\u0275\u0275element(0,"tui-tag",20)}function Ft(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,ht,1,0,"tui-tag",17),n.\u0275\u0275template(2,St,1,0,"ng-template",null,18,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275reference(3),i=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.num_used===i.option.maximum_number_of_use)("ngIfElse",t)}}function Jt(e,r){1&e&&n.\u0275\u0275element(0,"tui-tag",21)}const vn=function(){return{standalone:!0}};function Zt(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-island")(1,"h3",12),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",13),n.\u0275\u0275template(4,Ft,4,2,"ng-container",2),n.\u0275\u0275template(5,Jt,1,0,"ng-template",null,14,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"p",15),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p",15),n.\u0275\u0275text(10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p",15),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"tui-input-count",16),n.\u0275\u0275listener("ngModelChange",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext(2).calculateCurrentTotal()})("ngModelChange",function(o){return n.\u0275\u0275restoreView(t).$implicit.num_used=o}),n.\u0275\u0275text(14," Number of Tokens Used "),n.\u0275\u0275elementEnd()()}if(2&e){const t=r.$implicit,i=n.\u0275\u0275reference(6);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.option.assignment_name),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",i),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",n.\u0275\u0275pureFunction0(10,vn))}}function Pn(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5)(2,"h2",6),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"number"),n.\u0275\u0275pipe(5,"number"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"form",7)(7,"div",8),n.\u0275\u0275template(8,Zt,15,11,"tui-island",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",10)(10,"button",11),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().confirmChanges()}),n.\u0275\u0275text(11," Confirm Changes "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275classProp("error",t.invalid),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate2(" ",n.\u0275\u0275pipeBind2(4,6,t.remainingTokens,"1.0-1"),"/",n.\u0275\u0275pipeBind2(5,9,t.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",t.courseReg.token_uses),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",t.invalid)}}function Dn(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",5)(1,"h2",22),n.\u0275\u0275text(2," 0/0 Tokens Available "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",8)(4,"tui-island")(5,"h3",23),n.\u0275\u0275text(6,"Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div",13),n.\u0275\u0275element(8,"tui-tag",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p",25),n.\u0275\u0275text(10,"0 Tokens Required"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p",25),n.\u0275\u0275text(12,"0 Extra Grade Points Given"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"p",25),n.\u0275\u0275text(14,"0 Maximum Uses"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"tui-input-count",26),n.\u0275\u0275listener("ngModelChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().courseReg=o}),n.\u0275\u0275text(16," Content "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"tui-island")(18,"h3",23),n.\u0275\u0275text(19,"Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"div",13),n.\u0275\u0275element(21,"tui-tag",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"p",25),n.\u0275\u0275text(23,"0 Tokens Required"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(24,"p",25),n.\u0275\u0275text(25,"0 Extra Grade Points Given"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(26,"p",25),n.\u0275\u0275text(27,"0 Maximum Uses"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(28,"tui-input-count",26),n.\u0275\u0275listener("ngModelChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().courseReg=o}),n.\u0275\u0275text(29," Content "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(30,"tui-island")(31,"h3",23),n.\u0275\u0275text(32,"Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(33,"div",13),n.\u0275\u0275element(34,"tui-tag",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(35,"p",25),n.\u0275\u0275text(36,"0 Tokens Required"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(37,"p",25),n.\u0275\u0275text(38,"0 Extra Grade Points Given"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(39,"p",25),n.\u0275\u0275text(40,"0 Maximum Uses"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(41,"tui-input-count",26),n.\u0275\u0275listener("ngModelChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().courseReg=o}),n.\u0275\u0275text(42," Content "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(43,"div",10)(44,"button",27),n.\u0275\u0275text(45," Content "),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(15),n.\u0275\u0275property("ngModel",t.courseReg),n.\u0275\u0275advance(13),n.\u0275\u0275property("ngModel",t.courseReg),n.\u0275\u0275advance(13),n.\u0275\u0275property("ngModel",t.courseReg)}}let uo=(()=>{class e{constructor(t,i,o,s,c){this.tokenUseService=t,this.route=i,this.authenticationService=o,this.courseService=s,this.notificationsService=c,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(f=>this.user=f),this.courseId=this.route.snapshot.parent.params.courseId}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseReg=t.course_reg,this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()})}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.parent.params.courseId,i={};this.tokenUses.forEach(o=>i[o.option.id]=o.num_used),this.tokenUseService.useTokens(i,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Me),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],decls:5,vars:3,consts:[[1,"tui-container","tui-container_fullwidth"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["skeletonTemplate",""],["status","warning",1,"tui-space_bottom-4"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"],[1,"tui-text_h6","tui-space_bottom-8","tui-skeleton","tui-skeleton_short"],[1,"tui-island__title","tui-skeleton"],["size","m","status","success","value","Tokens Used",1,"tui-skeleton"],[1,"tui-island__paragraph","tui-skeleton"],["aria-label","Number of Tokens Used",1,"tui-space_top-4","tui-skeleton",3,"ngModel","ngModelChange"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","",1,"tui-form__button","tui-skeleton"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"section",0),n.\u0275\u0275template(1,at,3,0,"ng-container",1),n.\u0275\u0275template(2,Pn,12,12,"ng-container",2),n.\u0275\u0275template(3,Dn,46,3,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==i.user?null:i.user.is_teacher),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.courseReg)("ngIfElse",o)}},directives:[A.O5,_t.Ls,Y.\u0275NgNoValidate,Y.NgControlStatusGroup,Y.NgForm,A.sg,Si.h,Gr.Gi,ot.EA,ot.aQ,Y.NgControlStatus,Y.NgModel,pt.v0],pipes:[A.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var br=d(56197);function lo(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1," Tokens: ------ "),n.\u0275\u0275elementContainerEnd())}function Dr(e,r){if(1&e&&n.\u0275\u0275text(0),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275textInterpolate1(" Tokens: ",t.team.score," ")}}const zo=function(e,r){return["/course",e,"challenge",r]};function Ra(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",11),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(2,zo,t.event.course,t.event.id)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.user.is_teacher?"View":"Complete"," ")}}function uh(e,r){1&e&&(n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275text(1," Complete "),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("disabled",!0)}const Ug=function(e,r){return["/course",e,"challenge",r,"edit"]};function Gg(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",13),n.\u0275\u0275text(1," Edit "),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(1,Ug,t.event.course,t.event.id))}}const $g=function(e,r){return["/course",e,"challenge",r,"teams"]};function Wg(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275text(2," Challenge"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",4)(6,"div"),n.\u0275\u0275text(7),n.\u0275\u0275pipe(8,"date"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div"),n.\u0275\u0275text(10),n.\u0275\u0275pipe(11,"date"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(12,"a",5),n.\u0275\u0275text(13),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"div",6)(15,"div"),n.\u0275\u0275template(16,lo,2,0,"ng-container",7),n.\u0275\u0275template(17,Dr,1,1,"ng-template",null,8,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(19,"div"),n.\u0275\u0275template(20,Ra,3,5,"ng-container",7),n.\u0275\u0275template(21,uh,2,1,"ng-template",null,9,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(23,Gg,2,4,"a",10),n.\u0275\u0275elementEnd()()()),2&e){const t=n.\u0275\u0275reference(18),i=n.\u0275\u0275reference(22),o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(o.event.name),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" From: ",n.\u0275\u0275pipeBind2(8,10,o.event.start_date,"EEEE, MMM d, y, h:mm a"),""),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" Until: ",n.\u0275\u0275pipeBind2(11,13,o.event.end_date,"EEEE, MMM d, y, h:mm a"),""),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(16,$g,o.event.course,o.event.id)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.event.is_not_available_yet?"Manage Your Team":"View All Teams"," "),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",0===o.team.score)("ngIfElse",t),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",o.event.is_allowed_to_open||(null==o.user?null:o.user.is_teacher))("ngIfElse",i),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",o.event.has_edit_permission)}}let Yg=(()=>{class e{constructor(t,i){this.teamService=t,this.authenticationService=i}ngOnInit(){this.teamService.getMyTeam(this.event.id).subscribe(t=>this.team=t),this.authenticationService.currentUser.subscribe(t=>this.user=t)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(fo),n.\u0275\u0275directiveInject(se.$))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-challenge-row"]],inputs:{event:"event"},decls:1,vars:1,consts:[["class","challenge",4,"ngIf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],["tuiButton","","appearance","flat","size","s",1,"teamSection",3,"routerLink"],[1,"toCompleteSection"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],["notAllowedOpen",""],["appearance","secondary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["appearance","secondary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","secondary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"]],template:function(t,i){1&t&&n.\u0275\u0275template(0,Wg,24,19,"div",0),2&t&&n.\u0275\u0275property("ngIf",i.team)},directives:[A.O5,pt.v0,q.yS],pipes:[A.uU],styles:['@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 4fr 5fr 10rem 18rem}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:5fr 4fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType teamSection" "name toCompleteSection" "dates none ";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02);align-self:center}.name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%]{justify-self:start;align-self:center;padding-left:1rem}@media screen and (max-width: 767px){.name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}.name[_ngcontent-%COMP%]{padding-left:0;grid-area:name}.dates[_ngcontent-%COMP%]{padding-left:0;grid-area:dates}}.teamSection[_ngcontent-%COMP%]{justify-self:end;align-self:center}@media screen and (min-width: 768px) and (max-width: 1279px){.teamSection[_ngcontent-%COMP%]{grid-area:teamSection;justify-self:end;align-self:start}}.toCompleteSection[_ngcontent-%COMP%]{justify-self:end;align-self:center;display:flex;gap:.5rem}@media screen and (min-width: 768px) and (max-width: 1279px){.toCompleteSection[_ngcontent-%COMP%]{grid-area:toCompleteSection}}']}),e})();function Xg(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",10),n.\u0275\u0275element(1,"app-challenge-row",11),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("event",t)}}function Kg(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Xg,2,1,"div",9),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.currentEvents)}}function Qg(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275text(1," Looks like there are no current challenges at the moment. "),n.\u0275\u0275elementEnd())}function Jg(e,r){if(1&e&&(n.\u0275\u0275template(0,Kg,2,1,"ng-container",7),n.\u0275\u0275template(1,Qg,2,0,"div",8)),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.currentEvents.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0===t.currentEvents.length)}}function Zg(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",10),n.\u0275\u0275element(1,"app-challenge-row",11),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("event",t)}}function qg(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Zg,2,1,"div",9),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function ev(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275text(1," Looks like there are no upcoming challenges at the moment. "),n.\u0275\u0275elementEnd())}function tv(e,r){if(1&e&&(n.\u0275\u0275template(0,qg,2,1,"ng-container",7),n.\u0275\u0275template(1,ev,2,0,"div",8)),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.upcomingEvents.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0===t.upcomingEvents.length)}}function nv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",10),n.\u0275\u0275element(1,"app-challenge-row",11),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("event",t)}}function rv(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,nv,2,1,"div",9),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.pastEvents)}}function iv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275text(1," Looks like there are no past challenges at the moment. "),n.\u0275\u0275elementEnd())}function ov(e,r){if(1&e&&(n.\u0275\u0275template(0,rv,2,1,"ng-container",7),n.\u0275\u0275template(1,iv,2,0,"div",8)),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.pastEvents.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0===t.pastEvents.length)}}function av(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-accordion",3)(2,"tui-accordion-item",4),n.\u0275\u0275text(3," Current Challenges "),n.\u0275\u0275template(4,Jg,2,2,"ng-template",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"tui-accordion-item",6),n.\u0275\u0275text(6," Upcoming Challenges "),n.\u0275\u0275template(7,tv,2,2,"ng-template",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"tui-accordion-item",6),n.\u0275\u0275text(9," Past Challenges "),n.\u0275\u0275template(10,ov,2,2,"ng-template",5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("closeOthers",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("disableHover",!0))}function sv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",13)(1,"div",14),n.\u0275\u0275text(2,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",14),n.\u0275\u0275text(4,"Content"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(5,"div",15),n.\u0275\u0275elementStart(6,"div",16)(7,"div",14),n.\u0275\u0275text(8,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",14),n.\u0275\u0275text(10,"Content"),n.\u0275\u0275elementEnd()())}function uv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",13)(1,"div",14),n.\u0275\u0275text(2,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",14),n.\u0275\u0275text(4,"Content"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(5,"div",15),n.\u0275\u0275elementStart(6,"div",16)(7,"div",14),n.\u0275\u0275text(8,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",14),n.\u0275\u0275text(10,"Content"),n.\u0275\u0275elementEnd()())}function lv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",13)(1,"div",14),n.\u0275\u0275text(2,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",14),n.\u0275\u0275text(4,"Content"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(5,"div",15),n.\u0275\u0275elementStart(6,"div",16)(7,"div",14),n.\u0275\u0275text(8,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",14),n.\u0275\u0275text(10,"Content"),n.\u0275\u0275elementEnd()())}function cv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"tui-accordion",3)(1,"tui-accordion-item",4),n.\u0275\u0275text(2," Current Challenges "),n.\u0275\u0275template(3,sv,11,0,"ng-template",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"tui-accordion-item",4),n.\u0275\u0275text(5," Upcoming Challenges "),n.\u0275\u0275template(6,uv,11,0,"ng-template",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"tui-accordion-item",4),n.\u0275\u0275text(8," Past Challenges "),n.\u0275\u0275template(9,lv,11,0,"ng-template",5),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275property("closeOthers",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("disableHover",!0),n.\u0275\u0275advance(3),n.\u0275\u0275property("disableHover",!0),n.\u0275\u0275advance(3),n.\u0275\u0275property("disableHover",!0))}let dv=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.courseService=i,this.route=o,this.courseId=this.route.snapshot.parent.params.courseId}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t,this.events=null==t?void 0:t.events,this.currentEvents=this.events.filter(i=>i.is_open).filter(i=>"CHALLENGE"===i.type),this.upcomingEvents=this.events.filter(i=>i.is_not_available_yet).filter(i=>"CHALLENGE"===i.type),this.pastEvents=this.events.filter(i=>i.is_closed).filter(i=>"CHALLENGE"===i.type)}),this.authenticationService.currentUser.subscribe(t=>this.user=t)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],decls:4,vars:2,consts:[[1,"challengePage"],[4,"ngIf","ngIfElse"],["skeletonTemplate",""],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true",1,"title"],[4,"ngIf"],["class","text-center",4,"ngIf"],["class","divide",4,"ngFor","ngForOf"],[1,"divide"],[3,"event"],[1,"text-center"],[1,"pb-5"],[1,"tui-skeleton"],[1,"borderB"],[1,"pt-5"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,av,11,2,"ng-container",1),n.\u0275\u0275template(2,cv,10,4,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.course)("ngIfElse",o)}},directives:[A.O5,br.oc,br.Kc,br.dv,A.sg,Yg],styles:[".divide[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.divide[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.borderB[_ngcontent-%COMP%]{border-bottom:solid 1px var(--tui-base-03)}"]}),e})();var wg=d(26566);const Sg=function(e){return["/course",e,"practice"]},Tg=function(e){return["/course",e,"assignments-exams"]},Eg=function(e){return["/course",e,"challenge"]},Ig=function(e){return["/course",e,"leaderboard"]},fv=function(e){return["/course",e,"token"]};let hv=(()=>{class e{constructor(t,i,o,s){this.authenticationService=t,this.courseService=i,this.route=o,this.userAction=s,this.courseId=this.route.snapshot.parent.params.courseId,this.authenticationService.currentUser.subscribe(c=>this.user=c)}assignmentsAndExamsClickLog(){this.userAction.createCustomAction({description:"User selected assignments and exams on the course homepage",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{page_url:"/course/:courseId/homepage",page_url_params:{courseId:this.courseId},redirect_url:"/course/:courseId/assignments-exams",redirect_url_params:{courseId:this.courseId}}}).subscribe()}challengeClickLog(){this.userAction.createCustomAction({description:"User selected challenges on the course homepage",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{page_url:"/course/:courseId/homepage",page_url_params:{courseId:this.courseId},redirect_url:"/course/:courseId/challenge",redirect_url_params:{courseId:this.courseId}}}).subscribe()}leaderboardClickLog(){this.userAction.createCustomAction({description:"User selected leaderboard on the course homepage",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{page_url:"/course/:courseId/homepage",page_url_params:{courseId:this.courseId},redirect_url:"/course/:courseId/leaderboard",redirect_url_params:{courseId:this.courseId}}}).subscribe()}practiceClickLog(){this.userAction.createCustomAction({description:"User selected practice on the course homepage",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{page_url:"/course/:courseId/homepage",page_url_params:{courseId:this.courseId},redirect_url:"/course/:courseId/practice",redirect_url_params:{courseId:this.courseId}}}).subscribe()}tokenClickLog(){this.userAction.createCustomAction({description:"User selected tokens on the course homepage",object_type:ae.Us.BUTTON,status:ae.M4.COMPLETE,verb:ae.nX.CLICKED,data:{page_url:"/course/:courseId/homepage",page_url_params:{courseId:this.courseId},redirect_url:"/course/:courseId/tokens",redirect_url_params:{courseId:this.courseId}}}).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(ta.v))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-homepage"]],decls:52,vars:27,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"flex-container"],["size","m",1,"course-tile","tui-island_hoverable",3,"routerLink","click"],[1,"course-background","practice"],[1,"course-tile-text"],[1,"tui-island__title"],[1,"tui-island__paragraph","tui-text_body-xl","flex-space"],[1,"course-view-button","tui-space_top-3"],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink","click"],[1,"course-background","assessment"],[1,"course-background","challenge"],[1,"course-background","leaderboard"],["size","m","tuiPointerHint","Coming Soon...","tuiHintDirection","top-middle",1,"course-tile","cursor-"],[1,"course-background","tokens"],[1,"tui-island__paragraph","tui-text_body-xl","flex-space","tui-space_right-5"],["appearance","primary","size","m","tuiButton","","disabled","true",1,"tui-form__button",3,"routerLink"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"tui-island",2),n.\u0275\u0275listener("click",function(){return i.practiceClickLog()}),n.\u0275\u0275element(3,"div",3),n.\u0275\u0275elementStart(4,"div",4)(5,"h3",5),n.\u0275\u0275text(6,"Question Bank"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"p",6),n.\u0275\u0275text(8," Improve your skills by solving practice questions."),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",7)(10,"a",8),n.\u0275\u0275listener("click",function(){return i.practiceClickLog()}),n.\u0275\u0275text(11," View "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(12,"tui-island",2),n.\u0275\u0275listener("click",function(){return i.assignmentsAndExamsClickLog()}),n.\u0275\u0275element(13,"div",9),n.\u0275\u0275elementStart(14,"div",4)(15,"h3",5),n.\u0275\u0275text(16,"Assignments and Exams"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(17,"p",6),n.\u0275\u0275text(18," Work on assignments and exams for this course."),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(19,"div",7)(20,"a",8),n.\u0275\u0275listener("click",function(){return i.assignmentsAndExamsClickLog()}),n.\u0275\u0275text(21," View "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(22,"tui-island",2),n.\u0275\u0275listener("click",function(){return i.challengeClickLog()}),n.\u0275\u0275element(23,"div",10),n.\u0275\u0275elementStart(24,"div",4)(25,"h3",5),n.\u0275\u0275text(26,"Challenges"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(27,"p",6),n.\u0275\u0275text(28," Complete challenges on your own or in a team. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(29,"div",7)(30,"a",8),n.\u0275\u0275listener("click",function(){return i.challengeClickLog()}),n.\u0275\u0275text(31," View "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(32,"tui-island",2),n.\u0275\u0275listener("click",function(){return i.leaderboardClickLog()}),n.\u0275\u0275element(33,"div",11),n.\u0275\u0275elementStart(34,"div",4)(35,"h3",5),n.\u0275\u0275text(36,"Leaderboard"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(37,"p",6),n.\u0275\u0275text(38," View your performance on the leaderboard for this website."),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(39,"div",7)(40,"a",8),n.\u0275\u0275listener("click",function(){return i.leaderboardClickLog()}),n.\u0275\u0275text(41," View "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(42,"tui-island",12),n.\u0275\u0275element(43,"div",13),n.\u0275\u0275elementStart(44,"div",4)(45,"h3",5),n.\u0275\u0275text(46,"Tokens"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(47,"p",14),n.\u0275\u0275text(48," See how many tokens you earned."),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(49,"div",7)(50,"a",15),n.\u0275\u0275text(51," View "),n.\u0275\u0275elementEnd()()()()()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(9,Sg,i.courseId)),n.\u0275\u0275advance(8),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(11,Sg,i.courseId)),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(13,Tg,i.courseId)),n.\u0275\u0275advance(8),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(15,Tg,i.courseId)),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(17,Eg,i.courseId)),n.\u0275\u0275advance(8),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(19,Eg,i.courseId)),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(21,Ig,i.courseId)),n.\u0275\u0275advance(8),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(23,Ig,i.courseId)),n.\u0275\u0275advance(10),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(25,fv,i.courseId)))},directives:[Si.h,q.rH,pt.v0,q.yS,wg.e],styles:[".course-tile[_ngcontent-%COMP%]{overflow:hidden}@media screen and (min-width: 1280px){.course-tile[_ngcontent-%COMP%]{flex-basis:calc(30% - 4.5rem)}}@media screen and (min-width: 768px) and (max-width: 1279px){.course-tile[_ngcontent-%COMP%]{flex-basis:calc(50% - 4.5rem)}}@media screen and (max-width: 767px){.course-tile[_ngcontent-%COMP%]{flex-basis:100%}}.flex-container[_ngcontent-%COMP%]{margin:auto;display:flex;flex-wrap:wrap;justify-content:center;flex-direction:row;gap:2rem 2rem}@media screen and (min-width: 1280px){.flex-container[_ngcontent-%COMP%]{max-width:1200px}}@media screen and (min-width: 768px) and (max-width: 1279px){.flex-container[_ngcontent-%COMP%]{max-width:900px}}.course-tile-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 4 * var(--tui-padding-l))}.flex-space[_ngcontent-%COMP%]{flex:1;text-align:left}.course-background[_ngcontent-%COMP%]{width:calc(100% + 2 * var(--tui-padding-l));height:calc(4 * var(--tui-padding-l));margin-top:calc(-1 * var(--tui-padding-l));margin-left:calc(-1 * var(--tui-padding-l));margin-bottom:12px}.practice[_ngcontent-%COMP%]{background-color:var(--tui-success-bg-hover)}.assessment[_ngcontent-%COMP%]{background-color:var(--tui-error-bg-hover)}.challenge[_ngcontent-%COMP%]{background-color:var(--tui-warning-bg-hover)}.leaderboard[_ngcontent-%COMP%]{opacity:.24;background-color:var(--tui-support-02)}.tokens[_ngcontent-%COMP%]{opacity:.24;background-color:var(--tui-support-10)}"]}),e})();function pv(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1,"Assignment "),n.\u0275\u0275elementContainerEnd())}function mv(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1,"Exam"),n.\u0275\u0275elementContainerEnd())}function gv(e,r){1&e&&n.\u0275\u0275element(0,"tui-marker-icon",18)}function vv(e,r){1&e&&n.\u0275\u0275element(0,"tui-tag",19)}function _v(e,r){1&e&&n.\u0275\u0275element(0,"tui-tag",20)}function yv(e,r){1&e&&n.\u0275\u0275element(0,"tui-tag",21)}function xv(e,r){1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1," Grade: TBA "),n.\u0275\u0275elementContainerEnd())}function bv(e,r){if(1&e&&(n.\u0275\u0275text(0),n.\u0275\u0275pipe(1,"number")),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275textInterpolate1(" Grade: ",n.\u0275\u0275pipeBind2(1,1,t.event.total_event_grade,"1.0-1"),"% ")}}function Cv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-hosted-dropdown",22),n.\u0275\u0275element(1,"button",23),n.\u0275\u0275elementEnd()),2&e){n.\u0275\u0275nextContext();const t=n.\u0275\u0275reference(28);n.\u0275\u0275property("content",t)}}function wv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",28),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext(2).setFeatured()}),n.\u0275\u0275text(1," Set Featured "),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",t.event.featured)}}const Sv=function(e,r){return["/course",e,"assignments-exams",r,"edit"]},Tv=function(e,r){return["/course",e,"assignments-exams",r,"stats"]};function Ev(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list",24)(1,"a",25),n.\u0275\u0275text(2," Edit "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"a",26),n.\u0275\u0275text(4," Stats "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,wv,2,1,"a",27),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(3,Sv,t.event.course,t.event.id)),n.\u0275\u0275advance(2),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(6,Tv,t.event.course,t.event.id)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.event.featured)}}const Iv=function(e,r){return["/course",e,"assignments-exams",r]};let Pv=(()=>{class e{constructor(t,i,o){this.authenticationService=t,this.courseEventService=i,this.notificationsService=o,this.reload=new n.EventEmitter}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t)}setFeatured(){return this.courseEventService.setFeatured(this.event.id).subscribe(()=>{this.notificationsService.show("Event successfully marked as featured.",{status:"success"}).subscribe(),this.reload.emit(!0)})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-event-row"]],inputs:{event:"event"},outputs:{reload:"reload"},decls:29,vars:24,consts:[[1,"flex","flex-wrap","gap-3"],[1,"min-w-[8rem]","type","flex","items-center"],[4,"ngIf"],[1,"flex","flex-grow","items-center"],[1,"min-w-[18rem]"],[1,"flex","items-center","min-w-[2rem]"],["src","tuiIconStarFilledLarge","mode","warning","size","xs",4,"ngIf"],[1,"min-w-[8rem]","flex","items-center"],["size","m","status","success","value","Available",4,"ngIf"],["size","m","status","error","value","Coming Soon",4,"ngIf"],["size","m","status","default","value","Closed",4,"ngIf"],[1,"min-w-[6rem]","flex","items-center"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"flex","items-center"],["appearance","primary","size","s","tuiButton","",3,"routerLink","disabled"],[3,"content",4,"ngIf"],["content",""],["src","tuiIconStarFilledLarge","mode","warning","size","xs"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["size","m","status","default","value","Closed"],[3,"content"],["tuiIconButton","","appearance","flat","icon","tuiIconMoreVer","type","button","size","s",1,"ml-3"],["role","menu"],["aria-label","Edit","tuiOption","",3,"routerLink"],["aria-label","Stats","tuiOption","",3,"routerLink"],["tuiOption","","aria-label","Set Featured",3,"disabled","click",4,"ngIf"],["tuiOption","","aria-label","Set Featured",3,"disabled","click"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,pv,2,0,"ng-container",2),n.\u0275\u0275template(3,mv,2,0,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",4)(7,"div"),n.\u0275\u0275text(8),n.\u0275\u0275pipe(9,"date"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div"),n.\u0275\u0275text(11),n.\u0275\u0275pipe(12,"date"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(13,"div",5),n.\u0275\u0275template(14,gv,1,0,"tui-marker-icon",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"div",7),n.\u0275\u0275template(16,vv,1,0,"tui-tag",8),n.\u0275\u0275template(17,_v,1,0,"tui-tag",9),n.\u0275\u0275template(18,yv,1,0,"tui-tag",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(19,"div",11),n.\u0275\u0275template(20,xv,2,0,"ng-container",12),n.\u0275\u0275template(21,bv,2,4,"ng-template",null,13,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(23,"div",14)(24,"a",15),n.\u0275\u0275text(25),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(26,Cv,2,1,"tui-hosted-dropdown",16),n.\u0275\u0275template(27,Ev,6,9,"ng-template",null,17,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()()),2&t){const o=n.\u0275\u0275reference(22);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf","ASSIGNMENT"===i.event.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","EXAM"===i.event.type),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",i.event.name," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1("From: ",n.\u0275\u0275pipeBind2(9,15,i.event.start_date,"EEEE, MMM d, y, h:mm a"),""),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1("Until: ",n.\u0275\u0275pipeBind2(12,18,i.event.end_date,"EEEE, MMM d, y, h:mm a"),""),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.event.featured),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.event.is_open),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.event.is_not_available_yet),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.event.is_closed),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i.event.is_not_available_yet||i.event.is_exam)("ngIfElse",o),n.\u0275\u0275advance(4),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction2(21,Iv,i.event.course,i.event.id))("disabled",!(i.event.is_allowed_to_open||null!=i.user&&i.user.is_teacher)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.user.is_teacher?"View":"Complete"," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.event.has_edit_permission)}},directives:[A.O5,an.B,Gr.Gi,pt.v0,q.yS,Lr.o1,Rn.qi,Rn.vK],pipes:[A.uU,A.JJ],styles:[".type[_ngcontent-%COMP%]{color:var(--tui-text-02)}"]}),e})();const Mv=["importDialog"];function Av(e,r){if(1&e&&n.\u0275\u0275element(0,"tui-data-list-wrapper",16),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("items",t.getEventFilterOptions())}}function kv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",17),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext(2).openEventImportDialog()}),n.\u0275\u0275text(1," Add Event "),n.\u0275\u0275elementEnd()}}const Ov=function(e){return[e]};function Lv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",18),n.\u0275\u0275text(1," Featured Assignment "),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);let i;n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(1,Ov,null==(i=t.getFeaturedEvent())?null:i.id))}}function Fv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"tui-island",27)(1,"div",28)(2,"div",4)(3,"p",29),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"h3",25),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"button",30),n.\u0275\u0275listener("click",function(){const s=n.\u0275\u0275restoreView(t).$implicit,c=n.\u0275\u0275nextContext(4);return c.importCourseEvent(s,c.courseId)}),n.\u0275\u0275text(8," Import "),n.\u0275\u0275elementEnd()()()}if(2&e){const t=r.$implicit;n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(t.type),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.name)}}const Rv=function(e){return["/course",e,"assignments-exams","create"]};function Nv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",21)(2,"a",22),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().$implicit.complete()}),n.\u0275\u0275elementStart(3,"figure",23),n.\u0275\u0275element(4,"tui-svg",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"h2",25),n.\u0275\u0275text(6,"Create New Event"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(7,Fv,9,2,"tui-island",26),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&e){const t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("hoverable",!0)("routerLink",n.\u0275\u0275pureFunction1(3,Rv,t.courseId)),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",t.courseEvents)}}function Dv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275template(0,Nv,8,5,"ng-container",19),n.\u0275\u0275elementStart(1,"button",20),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(t).$implicit.complete()}),n.\u0275\u0275text(2," Cancel "),n.\u0275\u0275elementEnd()}if(2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngIf",t.courseEvents)}}function Bv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",32)(1,"app-event-row",33),n.\u0275\u0275listener("reload",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext(3).init()}),n.\u0275\u0275elementEnd()()}if(2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("event",t)}}function Vv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"div",34),n.\u0275\u0275element(2,"tui-marker-icon",35),n.\u0275\u0275elementStart(3,"h2",36),n.\u0275\u0275text(4," Looks like there are no upcoming events "),n.\u0275\u0275elementEnd()()())}function Hv(e,r){if(1&e&&(n.\u0275\u0275template(0,Bv,2,1,"div",31),n.\u0275\u0275template(1,Vv,5,0,"div",19)),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngForOf",t.getUpcomingEvents()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0===t.getUpcomingEvents().length)}}function jv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",32)(1,"app-event-row",33),n.\u0275\u0275listener("reload",function(){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext(3).init()}),n.\u0275\u0275elementEnd()()}if(2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("event",t)}}function zv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"div",34),n.\u0275\u0275element(2,"tui-marker-icon",35),n.\u0275\u0275elementStart(3,"h2",36),n.\u0275\u0275text(4," Looks like there are no past events "),n.\u0275\u0275elementEnd()()())}function Uv(e,r){if(1&e&&(n.\u0275\u0275template(0,jv,2,1,"div",31),n.\u0275\u0275template(1,zv,5,0,"div",19)),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngForOf",t.getPastEvents()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0===t.getPastEvents().length)}}function Gv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"tui-select",5),n.\u0275\u0275listener("ngModelChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().filter=o}),n.\u0275\u0275text(4," You are viewing "),n.\u0275\u0275element(5,"input",6),n.\u0275\u0275template(6,Av,1,1,"tui-data-list-wrapper",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",8),n.\u0275\u0275template(8,kv,2,0,"button",9),n.\u0275\u0275template(9,Lv,2,3,"button",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(10,Dv,3,1,"ng-template",null,11,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"tui-accordion",12)(13,"tui-accordion-item",13),n.\u0275\u0275text(14," Upcoming Events "),n.\u0275\u0275template(15,Hv,2,2,"ng-template",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(16,"tui-accordion-item",15),n.\u0275\u0275text(17," Past Events "),n.\u0275\u0275template(18,Uv,2,2,"ng-template",14),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngModel",t.filter),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",null==t.course?null:t.course.has_create_event_permission),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.getFeaturedEvent()),n.\u0275\u0275advance(3),n.\u0275\u0275property("closeOthers",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("disableHover",!0)}}function $v(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",32)(1,"div",42),n.\u0275\u0275text(2," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",43),n.\u0275\u0275text(4,"Content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",44)(6,"div",40),n.\u0275\u0275text(7,"Content For Long Dates"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",40),n.\u0275\u0275text(9,"Content For Long Dates"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(10,"div",45),n.\u0275\u0275text(11," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div",46),n.\u0275\u0275text(13," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"div",47)(15,"a",48),n.\u0275\u0275text(16," Content "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(17,"div",32)(18,"div",42),n.\u0275\u0275text(19," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"div",43),n.\u0275\u0275text(21,"Content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"div",44)(23,"div",40),n.\u0275\u0275text(24,"Content For Long Dates"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(25,"div",40),n.\u0275\u0275text(26,"Content For Long Dates"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(27,"div",45),n.\u0275\u0275text(28," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(29,"div",46),n.\u0275\u0275text(30," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(31,"div",47)(32,"a",48),n.\u0275\u0275text(33," Content "),n.\u0275\u0275elementEnd()()())}function Wv(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",32)(1,"div",42),n.\u0275\u0275text(2," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",43),n.\u0275\u0275text(4,"Content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",44)(6,"div",40),n.\u0275\u0275text(7,"Content For Long Dates"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",40),n.\u0275\u0275text(9,"Content For Long Dates"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(10,"div",45),n.\u0275\u0275text(11," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div",46),n.\u0275\u0275text(13," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"div",47)(15,"a",48),n.\u0275\u0275text(16," Content "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(17,"div",32)(18,"div",42),n.\u0275\u0275text(19," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"div",43),n.\u0275\u0275text(21,"Content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"div",44)(23,"div",40),n.\u0275\u0275text(24,"Content For Long Dates"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(25,"div",40),n.\u0275\u0275text(26,"Content For Long Dates"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(27,"div",45),n.\u0275\u0275text(28," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(29,"div",46),n.\u0275\u0275text(30," Content "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(31,"div",47)(32,"a",48),n.\u0275\u0275text(33," Content "),n.\u0275\u0275elementEnd()()())}function Yv(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",37)(1,"div",38)(2,"tui-select",39),n.\u0275\u0275listener("ngModelChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().filter=o}),n.\u0275\u0275text(3," content "),n.\u0275\u0275element(4,"input",6),n.\u0275\u0275elementStart(5,"tui-data-list-wrapper",40),n.\u0275\u0275text(6,"content "),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(7,"tui-accordion",41)(8,"tui-accordion-item",13),n.\u0275\u0275template(9,$v,34,0,"ng-template",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"tui-accordion-item",13),n.\u0275\u0275template(11,Wv,34,0,"ng-template",14),n.\u0275\u0275elementEnd()()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",t.filter),n.\u0275\u0275advance(5),n.\u0275\u0275property("closeOthers",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("disableHover",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("disableHover",!0)}}var au=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(au||(au={})),au))();let Xv=(()=>{class e{constructor(t,i,o,s,c,f){this.authenticationService=t,this.courseEventService=i,this.courseService=o,this.route=s,this.dialogService=c,this.notificationsService=f,this.filter=au.ALL,this.courseId=+this.route.snapshot.parent.paramMap.get("courseId")}ngOnInit(){this.init()}init(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t,this.events=t.events}),this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(au)}getEvents(){switch(this.filter){case au.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case au.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case au.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}getFeaturedEvent(){return this.events.find(t=>t.featured)}setFeatured(t){return this.courseEventService.setFeatured(t).subscribe(()=>{this.init(),this.notificationsService.show("Event successfully marked as featured.",{status:"success"}).subscribe()})}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t.filter(i=>"ASSIGNMENT"===i.type||"EXAM"===i.type)}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,i){this.courseEventService.importCourseEvent(t,i).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(Ai.RO),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,i){if(1&t&&n.\u0275\u0275viewQuery(Mv,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(i.importDialog=o.first)}},decls:4,vars:2,consts:[[1,"px-10","space-y-5"],[4,"ngIf","ngIfElse"],["skeletonTemplate",""],[1,"flex","flex-wrap","gap-3"],[1,"flex-grow"],["tuiTextfieldSize","l",1,"max-w-xs",3,"ngModel","ngModelChange"],["tuiTextfield",""],[3,"items",4,"tuiDataList"],[1,"flex","items-center","gap-3","flex-wrap"],["icon","tuiIconPlus","appearance","secondary","aria-label","Add Event","size","m","tuiButton","",3,"click",4,"ngIf"],["appearance","secondary","aria-label","Featured Assignment","size","m","tuiButton","",3,"routerLink",4,"ngIf"],["importDialog",""],[3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],[3,"items"],["icon","tuiIconPlus","appearance","secondary","aria-label","Add Event","size","m","tuiButton","",3,"click"],["appearance","secondary","aria-label","Featured Assignment","size","m","tuiButton","",3,"routerLink"],[4,"ngIf"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"tui-space_top-8","space-y-3"],["size","s","textAlign","center","tuiIsland","",3,"hoverable","routerLink","click"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],["size","s",4,"ngFor","ngForOf"],["size","s"],[1,"flex"],[1,"tui-island__category"],["appearance","secondary","aria-label","Import","size","s","tuiButton","",3,"click"],["class","event",4,"ngFor","ngForOf"],[1,"event"],[3,"event","reload"],[1,"flex","justify-center","items-center","w-full","h-32"],["size","s","src","tuiIconAlertCircleLarge",1,"tui-space_right-4"],[1,"tui-text_body-xl"],[1,"functionBar"],[1,"filter"],["tuiTextfieldSize","l",1,"tui-skeleton",3,"ngModel","ngModelChange"],[1,"tui-skeleton"],[1,"accordionContainer",3,"closeOthers"],[1,"eventType","tui-skeleton"],[1,"name","tui-skeleton"],[1,"dates"],[1,"availability","tui-skeleton"],[1,"grade","tui-skeleton"],[1,"linkBtn"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button","tui-skeleton"]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,Gv,19,5,"ng-container",1),n.\u0275\u0275template(2,Yv,12,4,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&t){const o=n.\u0275\u0275reference(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.course)("ngIfElse",o)}},directives:[A.O5,Vr.uJ,Vr.OI,pe.sz,Y.NgControlStatus,Y.NgModel,Un.MB,Rn.gX,ic.eC,pt.v0,q.rH,Si.h,q.yS,ur.P,A.sg,br.oc,br.Kc,br.dv,Pv,an.B],styles:[".event[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.event[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}"]}),e})();var Cn=d(26891),Zc=d(49100),Kv=d(95385);function Qv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.axisYName," ")}}function Jv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.fallback(t)," ")}}function Zv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",15),n.\u0275\u0275template(1,Jv,2,1,"div",16),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.axisYLabels)}}function qv(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275template(1,Qv,2,1,"div",12),n.\u0275\u0275template(2,Zv,2,1,"div",13),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("t-side_padding",t.hasXLabels),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.axisYName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.axisYInset)}}function e0(e,r){if(1&e&&n.\u0275\u0275element(0,"div",18),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("border-right-style",i.verticalLinesHandler(t,i.verticalLines))}}function t0(e,r){if(1&e&&n.\u0275\u0275element(0,"div",19),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("border-top-style",i.horizontalLinesHandler(t,i.horizontalLines))}}function n0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.fallback(t)," ")}}function r0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",20),n.\u0275\u0275template(1,n0,2,1,"div",16),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.axisYLabels)}}function i0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.fallback(t)," ")}}function o0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",21),n.\u0275\u0275template(1,i0,2,1,"div",22),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.axisYSecondaryLabels)}}function a0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",26),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("t-label-x_transparent",null===t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.fallback(t)," ")}}function s0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",24),n.\u0275\u0275template(1,a0,2,3,"div",25),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.axisXLabels)}}function u0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.fallback(t)," ")}}function l0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",29),n.\u0275\u0275template(1,u0,2,1,"div",22),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.axisYSecondaryLabels)}}function c0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",30),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.axisYSecondaryName," ")}}function d0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275template(1,l0,2,1,"div",27),n.\u0275\u0275template(2,c0,2,1,"div",28),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("t-side_padding",t.hasXLabels),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.axisYSecondaryInset),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.axisYSecondaryName)}}const f0=["*"];let h0=(()=>{let e=class{constructor(t){this.mode$=t,this.axisX="solid",this.axisXLabels=[],this.axisY="solid",this.axisYInset=!1,this.axisYLabels=[],this.axisYName="",this.axisYSecondaryInset=!1,this.axisYSecondaryLabels=[],this.axisYSecondaryName="",this.horizontalLines=0,this.horizontalLinesHandler=Zc.Fy,this.verticalLines=0,this.verticalLinesHandler=Zc.oG}get centeredXLabels(){return"none"===this.axisY}get hasXLabels(){return!!this.axisXLabels.length}get hasYLabels(){return!!this.axisYLabels.length&&!this.axisYInset||!!this.axisYName}get hasYSecondaryLabels(){return!!this.axisYSecondaryLabels.length&&!this.axisYSecondaryInset||!!this.axisYSecondaryName}fallback(t){return t||sr.f$}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Tr.Au))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-axes"]],hostVars:2,hostBindings:function(t,i){1&t&&n.\u0275\u0275listener("$.data-mode.attr",function(){return i.mode$}),2&t&&n.\u0275\u0275classProp("_centered",i.centeredXLabels)},inputs:{axisX:"axisX",axisXLabels:"axisXLabels",axisY:"axisY",axisYInset:"axisYInset",axisYLabels:"axisYLabels",axisYName:"axisYName",axisYSecondaryInset:"axisYSecondaryInset",axisYSecondaryLabels:"axisYSecondaryLabels",axisYSecondaryName:"axisYSecondaryName",horizontalLines:"horizontalLines",horizontalLinesHandler:"horizontalLinesHandler",verticalLines:"verticalLines",verticalLinesHandler:"verticalLinesHandler"},features:[n.\u0275\u0275ProvidersFeature([Kv.CV])],ngContentSelectors:f0,decls:13,vars:11,consts:[["class","t-side",3,"t-side_padding",4,"ngIf"],[1,"t-wrapper"],[1,"t-grid"],[1,"t-vertical"],["automation-id","tui-axex__vertical-line","class","t-line t-line_vertical",3,"borderRightStyle",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-horizontal"],["automation-id","tui-axex__horizontal-line","class","t-line",3,"borderTopStyle",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["class","t-labels-y t-labels-y_inset",4,"ngIf"],["class","t-labels-y t-labels-y_inset t-labels-y_inset_secondary",4,"ngIf"],[1,"t-content"],["class","t-labels-x",4,"ngIf"],[1,"t-side"],["automation-id","tui-axex__axis-y-name","class","t-name t-name_primary",4,"ngIf"],["class","t-labels-y t-labels-y_primary",4,"ngIf"],["automation-id","tui-axex__axis-y-name",1,"t-name","t-name_primary"],[1,"t-labels-y","t-labels-y_primary"],["automation-id","tui-axex__axis-y-label","class","t-label-y",4,"ngFor","ngForOf"],["automation-id","tui-axex__axis-y-label",1,"t-label-y"],["automation-id","tui-axex__vertical-line",1,"t-line","t-line_vertical"],["automation-id","tui-axex__horizontal-line",1,"t-line"],[1,"t-labels-y","t-labels-y_inset"],[1,"t-labels-y","t-labels-y_inset","t-labels-y_inset_secondary"],["automation-id","tui-axex__axis-y-secondary-label","class","t-label-y",4,"ngFor","ngForOf"],["automation-id","tui-axex__axis-y-secondary-label",1,"t-label-y"],[1,"t-labels-x"],["automation-id","tui-axex__axis-x-label","class","t-label-x",3,"t-label-x_transparent",4,"ngFor","ngForOf"],["automation-id","tui-axex__axis-x-label",1,"t-label-x"],["class","t-labels-y t-labels-y_secondary",4,"ngIf"],["automation-id","tui-axex__axis-y-secondary-name","class","t-name",4,"ngIf"],[1,"t-labels-y","t-labels-y_secondary"],["automation-id","tui-axex__axis-y-secondary-name",1,"t-name"]],template:function(t,i){1&t&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275template(0,qv,3,4,"div",0),n.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3),n.\u0275\u0275template(4,e0,1,2,"div",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275template(6,t0,1,2,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,r0,2,1,"div",7),n.\u0275\u0275template(8,o0,2,1,"div",8),n.\u0275\u0275elementStart(9,"div",9),n.\u0275\u0275projection(10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(11,s0,2,1,"div",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(12,d0,3,4,"div",0)),2&t&&(n.\u0275\u0275property("ngIf",i.hasYLabels),n.\u0275\u0275advance(2),n.\u0275\u0275styleProp("border-left-style",i.axisY)("border-bottom-style",i.axisX),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiRepeatTimesOf",i.verticalLines),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiRepeatTimesOf",i.horizontalLines),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.axisYInset),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.axisYSecondaryInset),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",i.hasXLabels),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.hasYSecondaryLabels))},directives:[A.O5,A.sg,Ci.Xj],styles:["[_nghost-%COMP%]{display:flex}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;height:100%;flex-direction:column}.t-grid[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;flex:1;justify-content:space-around;align-items:flex-end;border-width:1px;border-color:var(--tui-base-03)}[data-mode=onDark][_nghost-%COMP%]   .t-grid[_ngcontent-%COMP%]{border-color:rgba(255,255,255,.48)}[data-mode=onLight][_nghost-%COMP%]   .t-grid[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.48)}.t-horizontal[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column}.t-vertical[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex}._centered[_nghost-%COMP%]   .t-vertical[_ngcontent-%COMP%]:after{content:'';display:block;flex:1 0 1px}.t-line[_ngcontent-%COMP%]{flex:2 0 1px;box-sizing:border-box;border-width:1px;border-color:var(--tui-base-03)}[data-mode=onDark][_nghost-%COMP%]   .t-line[_ngcontent-%COMP%]{border-color:rgba(255,255,255,.48)}[data-mode=onLight][_nghost-%COMP%]   .t-line[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.48)}._centered[_nghost-%COMP%]   .t-line_vertical[_ngcontent-%COMP%]:first-child{flex:1 0 1px;pointer-events:none}.t-side[_ngcontent-%COMP%]{display:flex;align-items:stretch}.t-side_padding[_ngcontent-%COMP%]{padding-bottom:2rem}.t-name[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);-webkit-writing-mode:tb;writing-mode:tb;text-align:center;padding-left:.75rem;color:var(--tui-text-02)}.t-name_primary[_ngcontent-%COMP%]{transform:rotate(180deg)}[data-mode=onDark][_nghost-%COMP%]   .t-name[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}.t-labels-y[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-xs);flex-direction:column-reverse;justify-content:space-between;color:var(--tui-text-02)}[data-mode=onDark][_nghost-%COMP%]   .t-labels-y[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}.t-labels-y_primary[_ngcontent-%COMP%]{text-align:right;padding-right:.75rem}.t-labels-y_secondary[_ngcontent-%COMP%]{padding-left:.75rem}.t-labels-y_transparent[_ngcontent-%COMP%]{border-color:transparent}.t-labels-y_inset[_ngcontent-%COMP%]{position:absolute;top:.5625rem;left:.25rem;bottom:-.75rem;pointer-events:none}.t-labels-y_inset_secondary[_ngcontent-%COMP%]{left:auto;right:.25rem;text-align:right}.t-labels-x[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-xs);border-right:1px solid transparent;color:var(--tui-text-02)}.t-label-x[_ngcontent-%COMP%]{height:.4375rem;border-left:1px solid var(--tui-base-03);flex:1;margin-bottom:1.5625rem}[data-mode=onDark][_nghost-%COMP%]   .t-label-x[_ngcontent-%COMP%]{border-color:rgba(255,255,255,.48)}[data-mode=onLight][_nghost-%COMP%]   .t-label-x[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.48)}.t-label-x[_ngcontent-%COMP%]:before{content:'';display:block;height:.5625rem}.t-label-x_transparent[_ngcontent-%COMP%]{border-color:transparent}._centered[_nghost-%COMP%]   .t-label-x[_ngcontent-%COMP%]{height:2rem;text-align:center;border:none;margin:0}.t-label-y[_ngcontent-%COMP%]:first-child{margin-bottom:-.375rem}.t-label-y[_ngcontent-%COMP%]:last-child{margin-top:-.375rem}.t-content[_ngcontent-%COMP%]{position:absolute;top:0;left:-1px;right:0;bottom:-1px;display:flex;align-items:flex-end}"],changeDetection:0}),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisX",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisXLabels",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisY",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisYInset",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisYLabels",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisYName",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisYSecondaryInset",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisYSecondaryLabels",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"axisYSecondaryName",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"horizontalLines",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"horizontalLinesHandler",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"verticalLines",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"verticalLinesHandler",void 0),(0,Cn.gn)([(0,n.HostBinding)("class._centered")],e.prototype,"centeredXLabels",null),e=(0,Cn.gn)([(0,Cn.fM)(0,(0,n.Inject)(Tr.Au))],e),e})(),p0=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,Ci.Ih]]}),e})();var lh=d(22313);function m0(e,r){if(1&e&&n.\u0275\u0275element(0,"div",1),2&e){const t=r.$implicit,i=r.index,o=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("height",o.getHeight(t),"%")("background",o.getColor(i))}}let g0=(()=>{let e=class{constructor(t){this.sanitizer=t,this.value=[],this.colorHandler=Zc.Zf,this.size="m"}getHeight(t){return 100*t/this.getSum(this.value)}getColor(t){return this.sanitizer.bypassSecurityTrustStyle(`var(--tui-chart-${t}, ${(0,_r.PY)(this.colorHandler(t))})`)}getSum(t){return(0,J.Sm)(...t)}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(lh.DomSanitizer))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-bar"]],hostVars:1,hostBindings:function(t,i){2&t&&n.\u0275\u0275attribute("data-size",i.size)},inputs:{value:"value",colorHandler:"colorHandler",size:"size"},decls:1,vars:1,consts:[["automation-id","tui-bar__bar",3,"height","background",4,"ngFor","ngForOf"],["automation-id","tui-bar__bar"]],template:function(t,i){1&t&&n.\u0275\u0275template(0,m0,1,4,"div",0),2&t&&n.\u0275\u0275property("ngForOf",i.value)},directives:[A.sg],styles:["[_nghost-%COMP%]{display:flex;min-width:.125rem;flex-direction:column-reverse;border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l);overflow:hidden}[data-size='l'][_nghost-%COMP%]{width:1rem;max-width:1rem;margin:0 .1875rem}[data-size='m'][_nghost-%COMP%]{width:.5rem;max-width:.5rem;margin:0 .1875rem}[data-size='s'][_nghost-%COMP%]{width:.25rem;max-width:.5rem;margin:0 .125rem}"],changeDetection:0}),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"colorHandler",void 0),(0,Cn.gn)([(0,n.Input)(),(0,n.HostBinding)("attr.data-size"),(0,Xe.TH)()],e.prototype,"size",void 0),(0,Cn.gn)([Xe.UM],e.prototype,"getSum",null),e=(0,Cn.gn)([(0,Cn.fM)(0,(0,n.Inject)(lh.DomSanitizer))],e),e})(),v0=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez]]}),e})();function _0(e,r){1&e&&n.\u0275\u0275elementContainer(0)}const y0=function(e,r){return{$implicit:e,index:r,flexible:!1}};function x0(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,_0,1,0,"ng-container",4),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit,i=r.index;n.\u0275\u0275nextContext(2);const o=n.\u0275\u0275reference(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",n.\u0275\u0275pureFunction2(2,y0,t,i))}}function b0(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,x0,2,5,"ng-container",3),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.computedValue)}}function C0(e,r){1&e&&n.\u0275\u0275elementContainer(0)}const w0=function(e,r){return{$implicit:e,index:r,flexible:!0}};function S0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275template(1,C0,1,0,"ng-container",4),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=r.index;n.\u0275\u0275nextContext(2);const o=n.\u0275\u0275reference(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",o)("ngTemplateOutletContext",n.\u0275\u0275pureFunction2(2,w0,t,i))}}function T0(e,r){if(1&e&&n.\u0275\u0275template(0,S0,2,5,"div",5),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngForOf",t.computedValue)}}function E0(e,r){if(1&e&&n.\u0275\u0275element(0,"tui-bar",7),2&e){const t=r.$implicit,i=r.index,o=r.flexible,s=n.\u0275\u0275nextContext();n.\u0275\u0275styleProp("height",s.getHeight(t),"%")("background",s.getColor(i)),n.\u0275\u0275classProp("t-bar_flexible",o)("t-bar_negative",t<0),n.\u0275\u0275property("value",s.computedSegments)("size",s.computedSize)("colorHandler",s.colorHandler)}}const P0=[],M0=[1];let A0=(()=>{let e=class{constructor(t){this.sanitizer=t,this.value=[],this.colorHandler=Zc.Zf,this.size="m",this.collapsed=!1}get computedValue(){return this.collapsed?M0:this.value}get computedSegments(){return this.collapsed?this.value:P0}get computedSize(){return this.size||"m"}getHeight(t){return Math.abs(100*t/this.getLargest(this.computedValue))}getColor(t){return this.sanitizer.bypassSecurityTrustStyle(`var(--tui-chart-${t}, ${(0,_r.PY)(this.colorHandler(t))})`)}getLargest(t){return t.reduce((i,o)=>i>o?i:o,0)}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(lh.DomSanitizer))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-bar-set"]],inputs:{value:"value",colorHandler:"colorHandler",size:"size",collapsed:"collapsed"},decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["flexible",""],["bar",""],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","t-wrapper",4,"ngFor","ngForOf"],[1,"t-wrapper"],["automation-id","tui-bar-set__bar",1,"t-bar",3,"value","size","colorHandler"]],template:function(t,i){if(1&t&&(n.\u0275\u0275template(0,b0,2,1,"ng-container",0),n.\u0275\u0275template(1,T0,1,1,"ng-template",null,1,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(3,E0,1,11,"ng-template",null,2,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",i.size)("ngIfElse",o)}},directives:[A.O5,A.sg,A.tP,g0],styles:["[_nghost-%COMP%]{display:flex;height:100%;align-items:flex-end;justify-content:center}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;height:100%;align-items:flex-end}.t-wrapper[_ngcontent-%COMP%]:first-child{margin-left:25%}.t-wrapper[_ngcontent-%COMP%]:last-child{margin-right:25%}.t-bar[_ngcontent-%COMP%]{transform-origin:bottom center}.t-bar_negative[_ngcontent-%COMP%]{transform:rotate(180deg);opacity:var(--tui-disabled-opacity)}.t-bar.t-bar_flexible[_ngcontent-%COMP%]{max-width:none;width:75%;margin:0 auto}"],changeDetection:0}),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"value",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"colorHandler",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"size",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"collapsed",void 0),(0,Cn.gn)([Xe.UM],e.prototype,"getLargest",null),e=(0,Cn.gn)([(0,Cn.fM)(0,(0,n.Inject)(lh.DomSanitizer))],e),e})(),k0=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,v0]]}),e})();var Pg=d(24664),$m=d(33112);function O0(e,r){if(1&e&&n.\u0275\u0275element(0,"div",8),2&e){const t=n.\u0275\u0275nextContext().index,i=n.\u0275\u0275nextContext();n.\u0275\u0275property("content",i.hintContent)("context",i.getContentContext(t))}}function L0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275pipe(2,"tuiMapper"),n.\u0275\u0275element(3,"div",3,4)(5,"tui-bar-set",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,O0,1,2,"ng-template",6,7,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=r.index,o=n.\u0275\u0275reference(4),s=n.\u0275\u0275reference(7),c=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("t-wrapper_hoverable",c.hasHint),n.\u0275\u0275property("tuiHintHost",o)("tuiHintId",c.getHintId(i))("tuiHint",c.getHint(s))("tuiHintMode",c.hintMode),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("height",n.\u0275\u0275pipeBind4(2,14,t,c.percentMapper,c.collapsed,c.computedMax),"%"),n.\u0275\u0275advance(4),n.\u0275\u0275property("tuiDescribedBy",c.getHintId(i))("tuiFocusable",c.hasHint)("value",t)("size",c.size)("collapsed",c.collapsed)("colorHandler",c.colorHandler)}}function F0(e){return e.every(t=>t.length===e[0].length)}let N0=(()=>{let e=class{constructor(t){this.value=[],this.max=NaN,this.colorHandler=Zc.Zf,this.size="m",this.collapsed=!1,this.hintContent="",this.hintMode=null,this.percentMapper=(i,o,s)=>100*(o?(0,J.Sm)(...i):Math.max(...i))/s,this.autoIdString=t.generate()}get hasHint(){return!!this.hintContent}get transposed(){return this.transpose(this.value)}get computedMax(){return this.max||this.getMax(this.value,this.collapsed)}getContentContext(t){return{$implicit:t}}getHint(t){return this.hasHint?t:""}getHintId(t){return`${this.autoIdString}_${t}`}transpose(t){return t.reduce((i,o)=>o.map((s,c)=>[...i[c]||[],o[c]]),[])}getMax(t,i){return i?Math.max(...t.reduce((o,s)=>o.map((c,f)=>c+s[f]))):t.reduce((o,s)=>Math.max(...s,o),0)}};return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Er.ll))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["tui-bar-chart"]],inputs:{value:"value",max:"max",colorHandler:"colorHandler",size:"size",collapsed:"collapsed",hintContent:"hintContent",hintMode:"hintMode"},decls:1,vars:1,consts:[["tuiHintDirection","top-left","class","t-wrapper",3,"t-wrapper_hoverable","tuiHintHost","tuiHintId","tuiHint","tuiHintMode",4,"ngFor","ngForOf"],["tuiHintDirection","top-left",1,"t-wrapper",3,"tuiHintHost","tuiHintId","tuiHint","tuiHintMode"],[1,"t-container"],[1,"t-host"],["hintHost",""],[1,"t-set",3,"tuiDescribedBy","tuiFocusable","value","size","collapsed","colorHandler"],["polymorpheus",""],["hint","polymorpheus"],["polymorpheus-outlet","",1,"t-text",3,"content","context"]],template:function(t,i){1&t&&n.\u0275\u0275template(0,L0,8,19,"div",0),2&t&&n.\u0275\u0275property("ngForOf",i.transposed)},directives:[A.sg,$m.D,A0,Pg.OH,Qt.t,bi.GL,bi.r1],pipes:[Br.c],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%}.t-wrapper[_ngcontent-%COMP%]{transition-property:background-color;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;position:relative;display:flex;flex:1;align-items:flex-end;justify-content:center;height:100%}.t-wrapper_hoverable._hint_hovered[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05);cursor:pointer}.t-container[_ngcontent-%COMP%]{flex:1}.t-host[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%}.t-set[_ngcontent-%COMP%]{border-radius:var(--tui-radius-m);pointer-events:none;outline:0}.t-set[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px var(--tui-focus)}.t-text[_ngcontent-%COMP%]{white-space:pre-wrap}"],changeDetection:0}),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)(F0,"All arrays must be of the same length")],e.prototype,"value",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"max",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"colorHandler",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"size",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"collapsed",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"hintContent",void 0),(0,Cn.gn)([(0,n.Input)(),(0,Xe.TH)()],e.prototype,"hintMode",void 0),(0,Cn.gn)([Xe.UM],e.prototype,"getContentContext",null),(0,Cn.gn)([Xe.UM],e.prototype,"transpose",null),(0,Cn.gn)([Xe.UM],e.prototype,"getMax",null),e=(0,Cn.gn)([(0,Cn.fM)(0,(0,n.Inject)(Er.ll))],e),e})(),D0=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,bi.wq,Pg.$Z,k0,Qt.u,$m.go,Br.I]]}),e})();function B0(e,r){if(1&e&&n.\u0275\u0275text(0),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275textInterpolate1(" ",i.value[0][t],"\n")}}let V0=(()=>{class e{ngOnInit(){this.labelsX=Object.keys(this.answers),this.value=[Object.values(this.answers)];const t=this.getMax();this.labelsY=["0",String(t/2),String(t)]}getMax(){return Math.max(...this.value[0])+1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-event-stats-bar-chart"]],inputs:{answers:"answers"},decls:4,vars:6,consts:[["axisY","none",1,"h-80",3,"axisXLabels","axisYLabels"],[3,"value","hintContent","size","max"],["hint",""]],template:function(t,i){if(1&t&&(n.\u0275\u0275elementStart(0,"tui-axes",0),n.\u0275\u0275element(1,"tui-bar-chart",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,B0,1,1,"ng-template",null,2,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(3);n.\u0275\u0275property("axisXLabels",i.labelsX)("axisYLabels",i.labelsY),n.\u0275\u0275advance(1),n.\u0275\u0275property("value",i.value)("hintContent",o)("size",null)("max",i.getMax())}},directives:[h0,N0],styles:[""]}),e})();function H0(e,r){if(1&e&&n.\u0275\u0275element(0,"app-event-stats-bar-chart",8),2&e){const t=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275property("answers",t.answers)}}function j0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,H0,1,1,"app-event-stats-bar-chart",7),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.answers)}}function z0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tr",11)(1,"td",15),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"td",15),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.key),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.value)}}function U0(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,z0,5,2,"tr",14),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.value)}}function G0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"div",9),n.\u0275\u0275text(2,"Submissions"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"table",10)(4,"tbody")(5,"tr",11)(6,"th",12),n.\u0275\u0275text(7,"Evaluation"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"th",12),n.\u0275\u0275text(9,"Submission Count"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(10,U0,2,1,"ng-container",13),n.\u0275\u0275pipe(11,"keyvalue"),n.\u0275\u0275elementEnd()()()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(10),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(11,1,t.submissions))}}function $0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tr",11)(1,"td",15),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"td",15),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()),2&e){const t=r.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.key),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.value)}}function W0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"div",9),n.\u0275\u0275text(2,"Status"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"table",10)(4,"tbody")(5,"tr",11)(6,"th",12),n.\u0275\u0275text(7,"Status"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"th",12),n.\u0275\u0275text(9,"Submission Count"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(10,$0,5,2,"tr",16),n.\u0275\u0275pipe(11,"keyvalue"),n.\u0275\u0275elementEnd()()()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(10),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(11,1,t.status_messages))}}function Y0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tr",11)(1,"td",15),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"td",15),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd()()),2&e){const t=r.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.key),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.value)}}function X0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div")(1,"div",9),n.\u0275\u0275text(2,"Error Messages"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"table",10)(4,"tbody")(5,"tr",11)(6,"th",12),n.\u0275\u0275text(7,"Error"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"th",12),n.\u0275\u0275text(9,"Submission Count"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(10,Y0,5,2,"tr",16),n.\u0275\u0275pipe(11,"keyvalue"),n.\u0275\u0275elementEnd()()()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(10),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(11,1,t.error_messages))}}function K0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-island",4)(1,"h4",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,j0,2,1,"div",6),n.\u0275\u0275template(4,G0,12,3,"div",6),n.\u0275\u0275template(5,W0,12,3,"div",6),n.\u0275\u0275template(6,X0,12,3,"div",6),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit,i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.question.title," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.isEmpty(t.answers)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.isEmpty(t.submissions)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.isEmpty(t.status_messages)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!i.isEmpty(t.error_messages))}}const Q0=function(){return[".."]};let Mg=(()=>{class e{constructor(t,i){this.courseEventService=t,this.route=i}ngOnInit(){this.eventId=this.route.snapshot.params.eventId,this.courseEventService.getStats(this.eventId).subscribe(t=>this.stats=t)}isEmpty(t){return(0,mn.isEmpty)(t)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-event-stats"]],decls:6,vars:3,consts:[[1,"tui-container","tui-container_adaptive","space-y-3"],["tuiButton","","appearance","flat","icon","tuiIconArrowLeft","size","s",3,"routerLink"],[1,"tui-text_h3"],["class","shadow space-y-3",4,"ngFor","ngForOf"],[1,"shadow","space-y-3"],[1,"tui-text_h4"],[4,"ngIf"],[3,"answers",4,"ngIf"],[3,"answers"],[1,"tui-text_body-l","tui-text_bold"],[1,"tui-table","mt-3"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__th"],[4,"ngFor","ngForOf"],["class","tui-table__tr tui-table__tr_border_none",4,"ngIf"],[1,"tui-table__td"],["class","tui-table__tr tui-table__tr_border_none",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"button",1),n.\u0275\u0275text(2," Back to event "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"h3",2),n.\u0275\u0275text(4,"Event Stats"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,K0,7,5,"tui-island",3),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(2,Q0)),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngForOf",i.stats))},directives:[pt.v0,q.rH,A.sg,Si.h,A.O5,V0],pipes:[A.Nd],styles:[""]}),e})();var Ag=d(76508),Na=d(78697);function J0(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-island",12),n.\u0275\u0275element(1,"div",13),n.\u0275\u0275elementStart(2,"figure",14),n.\u0275\u0275element(3,"tui-avatar",15,16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"p",17),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"h3",18),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p",19),n.\u0275\u0275text(10),n.\u0275\u0275elementEnd()()),2&e){const t=r.$implicit,i=r.index,o=n.\u0275\u0275reference(4),s=n.\u0275\u0275nextContext(3);n.\u0275\u0275styleProp("margin-top",i+"rem")("order",i%2*-i),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("background-color",o.bgColor),n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(s.getGetOrdinal(t.rank)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function Z0(e,r){1&e&&(n.\u0275\u0275elementStart(0,"th",20),n.\u0275\u0275text(1,"Rank"),n.\u0275\u0275elementEnd())}function q0(e,r){1&e&&(n.\u0275\u0275elementStart(0,"th",20),n.\u0275\u0275text(1,"Name"),n.\u0275\u0275elementEnd())}function e1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"th",20),n.\u0275\u0275text(1,"Tokens"),n.\u0275\u0275elementEnd())}function t1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"td",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.getGetOrdinal(t.rank)," ")}}function n1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"td",23)(1,"div",24),n.\u0275\u0275element(2,"tui-avatar",25),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function r1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"td",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function i1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"tr",21),n.\u0275\u0275template(1,t1,2,1,"td",22),n.\u0275\u0275template(2,n1,4,4,"td",22),n.\u0275\u0275template(3,r1,2,1,"td",22),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","token"))}function o1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",3)(1,"div",4),n.\u0275\u0275template(2,J0,11,12,"tui-island",5),n.\u0275\u0275pipe(3,"tuiFilter"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"table",6)(5,"thead",7)(6,"tr",8),n.\u0275\u0275template(7,Z0,2,0,"th",9),n.\u0275\u0275template(8,q0,2,0,"th",9),n.\u0275\u0275template(9,e1,2,0,"th",9),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(10,"tbody",10),n.\u0275\u0275pipe(11,"tuiFilter"),n.\u0275\u0275template(12,i1,4,3,"tr",11),n.\u0275\u0275elementEnd()()()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),n.\u0275\u0275advance(2),n.\u0275\u0275property("columns",t.displayedColumns),n.\u0275\u0275advance(3),n.\u0275\u0275property("tuiHead","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiHead","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiHead","token"),n.\u0275\u0275advance(1),n.\u0275\u0275property("data",n.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}function a1(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,o1,13,15,"div",2),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.leaderBoard)}}function s1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"th",20),n.\u0275\u0275text(1,"Rank"),n.\u0275\u0275elementEnd())}function u1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"th",20),n.\u0275\u0275text(1,"Name"),n.\u0275\u0275elementEnd())}function l1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"th",20),n.\u0275\u0275text(1,"Tokens"),n.\u0275\u0275elementEnd())}function c1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," 1st "),n.\u0275\u0275elementEnd())}function d1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34)(1,"div",24),n.\u0275\u0275element(2,"tui-avatar",25),n.\u0275\u0275text(3," Anonymous User "),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function f1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," No Tokens "),n.\u0275\u0275elementEnd())}function h1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," 1st "),n.\u0275\u0275elementEnd())}function p1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34)(1,"div",24),n.\u0275\u0275element(2,"tui-avatar",25),n.\u0275\u0275text(3," Anonymous User "),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function m1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," No Tokens "),n.\u0275\u0275elementEnd())}function g1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," 1st "),n.\u0275\u0275elementEnd())}function v1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34)(1,"div",24),n.\u0275\u0275element(2,"tui-avatar",25),n.\u0275\u0275text(3," Anonymous User "),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function _1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," No Tokens "),n.\u0275\u0275elementEnd())}function y1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," 1st "),n.\u0275\u0275elementEnd())}function x1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34)(1,"div",24),n.\u0275\u0275element(2,"tui-avatar",25),n.\u0275\u0275text(3," Anonymous User "),n.\u0275\u0275elementEnd()()),2&e&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"))}function b1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"td",34),n.\u0275\u0275text(1," No Tokens "),n.\u0275\u0275elementEnd())}function C1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-island",12),n.\u0275\u0275element(3,"div",26),n.\u0275\u0275elementStart(4,"figure",27),n.\u0275\u0275element(5,"tui-avatar",28,16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"p",29),n.\u0275\u0275text(8,"1st"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"h3",30),n.\u0275\u0275text(10," Anonymous User "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p",31),n.\u0275\u0275text(12," No Tokens "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(13,"tui-island",12),n.\u0275\u0275element(14,"div",26),n.\u0275\u0275elementStart(15,"figure",27),n.\u0275\u0275element(16,"tui-avatar",28,16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(18,"p",29),n.\u0275\u0275text(19,"2nd"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"h3",30),n.\u0275\u0275text(21," Anonymous User "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"p",31),n.\u0275\u0275text(23," No Tokens "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(24,"tui-island",12),n.\u0275\u0275element(25,"div",26),n.\u0275\u0275elementStart(26,"figure",27),n.\u0275\u0275element(27,"tui-avatar",28,16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(29,"p",29),n.\u0275\u0275text(30,"3rd"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(31,"h3",30),n.\u0275\u0275text(32," Anonymous User "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(33,"p",31),n.\u0275\u0275text(34," No Tokens "),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(35,"table",6)(36,"thead",7)(37,"tr",8),n.\u0275\u0275template(38,s1,2,0,"th",9),n.\u0275\u0275template(39,u1,2,0,"th",9),n.\u0275\u0275template(40,l1,2,0,"th",9),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(41,"tbody",32)(42,"tr",21),n.\u0275\u0275template(43,c1,2,0,"td",33),n.\u0275\u0275template(44,d1,4,3,"td",33),n.\u0275\u0275template(45,f1,2,0,"td",33),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(46,"tr",21),n.\u0275\u0275template(47,h1,2,0,"td",33),n.\u0275\u0275template(48,p1,4,3,"td",33),n.\u0275\u0275template(49,m1,2,0,"td",33),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(50,"tr",21),n.\u0275\u0275template(51,g1,2,0,"td",33),n.\u0275\u0275template(52,v1,4,3,"td",33),n.\u0275\u0275template(53,_1,2,0,"td",33),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(54,"tr",21),n.\u0275\u0275template(55,y1,2,0,"td",33),n.\u0275\u0275template(56,x1,4,3,"td",33),n.\u0275\u0275template(57,b1,2,0,"td",33),n.\u0275\u0275elementEnd()()()()),2&e){const t=n.\u0275\u0275reference(6),i=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275styleProp("margin-top","1rem")("order",-1),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("background-color",t.bgColor),n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"),n.\u0275\u0275advance(8),n.\u0275\u0275styleProp("margin-top","2rem")("order",-0),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("background-color",t.bgColor),n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"),n.\u0275\u0275advance(8),n.\u0275\u0275styleProp("margin-top","3rem")("order",-3),n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("background-color",t.bgColor),n.\u0275\u0275advance(2),n.\u0275\u0275property("autoColor",!0)("rounded",!0)("text","Anonymous User"),n.\u0275\u0275advance(8),n.\u0275\u0275property("columns",i.displayedColumns),n.\u0275\u0275advance(3),n.\u0275\u0275property("tuiHead","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiHead","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiHead","token"),n.\u0275\u0275advance(3),n.\u0275\u0275property("tuiCell","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","token"),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiCell","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","token"),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiCell","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","token"),n.\u0275\u0275advance(2),n.\u0275\u0275property("tuiCell","rank"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","name"),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiCell","token")}}let w1=(()=>{class e{constructor(t,i){this.courseService=t,this.route=i,this.displayedColumns=["rank","name","token"],this.filterOutTopX=(o,s)=>o.rank>s,this.filterInTopX=(o,s)=>o.rank<=s,this.courseId=this.route.snapshot.parent.params.courseId}ngOnInit(){this.rankTopX=3,this.courseService.getCourse(this.courseId).subscribe(t=>{this.leaderBoard=this.getRankedLeaderboard(null==t?void 0:t.leader_board)})}getRankedLeaderboard(t){return t.sort((o,s)=>s.token-o.token).map((o,s)=>({rank:s+1,name:o.name,token:o.token}))}getGetOrdinal(t){const i=["th","st","nd","rd"],o=t%100;return t+(i[(o-20)%10]||i[o]||i[0])}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(q.gz))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["skeletonTemplate",""],["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"],[1,"top-x-background","tui-skeleton"],[1,"tui-island__figure","tui-skeleton"],["size","l",1,"top-x-avatar","tui-skeleton",3,"autoColor","rounded","text"],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2","tui-skeleton"],[1,"tui-island__title","tui-skeleton"],[1,"tui-island__paragraph","tui-skeleton"],["tuiTbody",""],["class","tui-skeleton","tuiTd","",4,"tuiCell"],["tuiTd","",1,"tui-skeleton"]],template:function(t,i){if(1&t&&(n.\u0275\u0275template(0,a1,2,1,"ng-container",0),n.\u0275\u0275template(1,C1,58,43,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",i.leaderBoard)("ngIfElse",o)}},directives:[A.O5,A.sg,Si.h,Ag.JP,Na.c4,Na.Nx,Na.EE,Na.DZ,Na.Ws,Na.jY,Na.LU,Na.fu,Na.Bl,Na.Kt],pipes:[Le.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();const S1=function(){return["create"]};function T1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"a",10),n.\u0275\u0275text(1," Create New Team "),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction0(1,S1))}function E1(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",8)}function I1(e,r){1&e&&n.\u0275\u0275element(0,"tui-svg",20)}function P1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t," ")}}const M1=function(e){return[e,"edit"]};function A1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"a",25),n.\u0275\u0275text(1," Edit "),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(4).$implicit;n.\u0275\u0275property("routerLink",n.\u0275\u0275pureFunction1(1,M1,t.id))}}function k1(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,A1,2,3,"a",24),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(3).$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",i.isInTeam(t)&&!(i.event.is_open||i.event.is_closed))}}function O1(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",27),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(t);const o=n.\u0275\u0275nextContext(4).$implicit;return n.\u0275\u0275nextContext(3).joinTeam(o.id)}),n.\u0275\u0275text(1," Join "),n.\u0275\u0275elementEnd()}}function L1(e,r){if(1&e&&n.\u0275\u0275template(0,O1,2,0,"button",26),2&e){const t=n.\u0275\u0275nextContext(3).$implicit,i=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngIf",!i.isInTeam(t)&&!(i.event.is_open||i.event.is_closed)&&i.isInvited(t))}}function F1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"div",13)(1,"div",17),n.\u0275\u0275template(2,P1,2,1,"div",21),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,k1,2,1,"ng-container",0),n.\u0275\u0275template(4,L1,1,1,"ng-template",null,22,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275reference(5),i=n.\u0275\u0275nextContext(2).$implicit,o=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",i.member_names),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",o.isInTeam(i))("ngIfElse",t)}}function R1(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"tui-accordion",12)(2,"tui-accordion-item")(3,"div",13)(4,"div",14)(5,"span",15),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,E1,1,0,"tui-svg",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",17),n.\u0275\u0275text(9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div"),n.\u0275\u0275template(11,I1,1,0,"tui-svg",18),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div"),n.\u0275\u0275text(13),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(14,F1,6,3,"ng-template",19),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext(),i=t.index,o=t.$implicit,s=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(6),n.\u0275\u0275textInterpolate1(" ",i+1," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",s.isInTeam(o)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(o.name),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",o.is_private),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",o.member_names.length," ",1===o.member_names.length?"student":"students","")}}function N1(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,R1,15,6,"ng-container",11),n.\u0275\u0275elementContainerEnd()),2&e){const t=r.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t)}}function D1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"section",3)(1,"div",4)(2,"h3",5),n.\u0275\u0275text(3,"List of Teams"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,T1,2,2,"a",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",7),n.\u0275\u0275text(6," The team that has the person icon ("),n.\u0275\u0275element(7,"tui-svg",8),n.\u0275\u0275text(8,") is your team. You can change the team's name by editing it. You can also edit the team settings and invite specific people privately to your team or make it public so anyone can join your team. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,N1,2,1,"ng-container",9),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",!(t.event.is_open||t.event.is_closed)),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",t.teams)}}function B1(e,r){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,D1,10,2,"section",2),n.\u0275\u0275elementContainerEnd()),2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.course&&t.event&&t.teams)}}function V1(e,r){1&e&&(n.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"h3",28),n.\u0275\u0275text(3,"List of Teams"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"a",29),n.\u0275\u0275text(5," Create New Team "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",30),n.\u0275\u0275text(7," Instructions "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"tui-accordion",31)(9,"tui-accordion-item")(10,"div",32)(11,"div",33),n.\u0275\u0275text(12,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div",33),n.\u0275\u0275text(14,"content"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"div",33),n.\u0275\u0275text(16,"content"),n.\u0275\u0275elementEnd()()()()())}let H1=(()=>{class e{constructor(t,i,o,s,c,f){this.authenticationService=t,this.route=i,this.courseService=o,this.courseEventService=s,this.teamService=c,this.notificationsService=f,this.authenticationService.currentUser.subscribe(v=>this.user=v)}ngOnInit(){this.courseId=+this.route.snapshot.parent.paramMap.get("courseId"),this.courseService.getCourse(this.courseId).subscribe(t=>this.course=t),this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>this.event=t),this.teamService.getChallengeTeams(this.eventId).subscribe(t=>this.teams=t)}joinTeam(t){this.teamService.joinTeam(t).subscribe(()=>{this.notificationsService.show("You have successfully join the team.",{status:"success"}).subscribe()}),window.location.reload()}isInTeam(t){return t.course_registrations.map(i=>+i).includes(this.course.course_reg.id)}isInvited(t){return t.who_can_join.includes(this.course.course_reg.id)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(fo),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-list-of-teams"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["skeletonTemplate",""],["class","tui-container tui-container_adaptive ng-star-inserted",4,"ngIf"],[1,"tui-container","tui-container_adaptive","ng-star-inserted"],[1,"flex","flex-wrap","gap-3","tui-space_top-6"],[1,"tui-text_h3","tui-col_stretch","flex-grow"],["icon","tuiIconPlus","appearance","primary","aria-label","Create New Team","size","m","tuiButton","",3,"routerLink",4,"ngIf"],[1,"tui-island__paragraph","tui-text_body-l","tui-space_top-6"],["src","tuiIconUser"],[4,"ngFor","ngForOf"],["icon","tuiIconPlus","appearance","primary","aria-label","Create New Team","size","m","tuiButton","",3,"routerLink"],[4,"ngIf"],[1,"tui-space_top-6"],[1,"flex","flex-wrap","gap-3"],[1,"min-w-[2rem]"],[1,"mr-1"],["src","tuiIconUser",4,"ngIf"],[1,"flex-grow"],["src","tuiIconLock",4,"ngIf"],["tuiAccordionItemContent",""],["src","tuiIconLock"],["class","tui-text_body-l",4,"ngFor","ngForOf"],["notInTeam",""],[1,"tui-text_body-l"],["appearance","secondary","aria-label","Edit","size","m","tuiButton","","class","w-fit",3,"routerLink",4,"ngIf"],["appearance","secondary","aria-label","Edit","size","m","tuiButton","",1,"w-fit",3,"routerLink"],["appearance","secondary","aria-label","Join","size","m","tuiButton","","class","w-fit",3,"click",4,"ngIf"],["appearance","secondary","aria-label","Join","size","m","tuiButton","",1,"w-fit",3,"click"],[1,"tui-text_h3","tui-col_stretch","flex-grow","tui-skeleton"],["icon","tuiIconPlus","appearance","primary","aria-label","Create New Team","size","m","tuiButton","",1,"tui-skeleton"],[1,"tui-skeleton","tui-island__paragraph","tui-text_body-l","tui-space_top-6"],[1,"accordionContainer","tui-space_top-6"],[1,"accordionHeader"],[1,"tui-skeleton"]],template:function(t,i){if(1&t&&(n.\u0275\u0275template(0,B1,2,1,"ng-container",0),n.\u0275\u0275template(1,V1,17,0,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",i.teams)("ngIfElse",o)}},directives:[A.O5,pt.v0,q.yS,ur.P,A.sg,br.oc,br.Kc,br.dv],styles:[""]}),e})();class Wm{static createTeamForm(){return(new Y.FormBuilder).group({name:new Y.FormControl(null,[Y.Validators.required]),isPrivate:new Y.FormControl(!1,[Y.Validators.required]),invitedMembers:new Y.FormControl(null)})}static createTeamFormTeam(r,t){const i=t.filter(s=>r.who_can_join.includes(s.id));return(new Y.FormBuilder).group({name:new Y.FormControl(r.name,[Y.Validators.required]),isPrivate:new Y.FormControl(r.is_private,[Y.Validators.required]),invitedMembers:new Y.FormControl(i)})}static formatTeamFormData(r,t){var i;return{event_id:t,name:r.get("name").value,is_private:r.get("isPrivate").value,who_can_join:null===(i=r.get("invitedMembers").value)||void 0===i?void 0:i.map(o=>o.id)}}}var Ym=d(84443);function j1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"button",16),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&e){const t=r.$implicit;n.\u0275\u0275property("value",t),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.name," ")}}function z1(e,r){if(1&e&&(n.\u0275\u0275elementStart(0,"tui-data-list",14),n.\u0275\u0275template(1,j1,2,2,"button",15),n.\u0275\u0275elementEnd()),2&e){const t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",t.getCourseRegistrations())}}function U1(e,r){if(1&e){const t=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"div",11),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"tui-multi-select",12),n.\u0275\u0275listener("searchChange",function(o){return n.\u0275\u0275restoreView(t),n.\u0275\u0275nextContext().onSearchChange(o)}),n.\u0275\u0275text(5," Invited Members "),n.\u0275\u0275template(6,z1,2,1,"tui-data-list",13),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&e){const t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" List the people you want to invite to this team. You can invite up to ",t.event.max_team_size-1," people. "),n.\u0275\u0275advance(1),n.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("stringify",t.stringify)("editable",!0)}}let kg=(()=>{class e{constructor(t,i,o,s,c,f){this.route=t,this.courseService=i,this.courseEventService=o,this.teamService=s,this.router=c,this.notificationsService=f,this.teamId=null}ngOnInit(){this.formData=Wm.createTeamForm(),this.courseId=+this.route.snapshot.parent.paramMap.get("courseId"),this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>this.event=t),this.courseService.getCourse(this.courseId).subscribe(t=>this.course=t),this.courseService.getCourseRegistrations(this.courseId).subscribe(t=>{this.courseRegs=t,this.route.snapshot.paramMap.get("teamId")&&(this.teamId=+this.route.snapshot.paramMap.get("teamId"),this.teamService.getTeam(this.teamId).subscribe(i=>{this.formData=Wm.createTeamFormTeam(i,this.courseRegs),this.team=i},i=>console.debug(i)))})}isPrivate(){var t,i;return null===(i=null===(t=this.formData)||void 0===t?void 0:t.get("isPrivate"))||void 0===i?void 0:i.value}stringify(t){return t.name}getCourseRegistrations(){return this.search?this.courseRegs.filter(t=>t.name.includes(this.search)):this.courseRegs}onSearchChange(t){this.search=t}getCourseRegistration(t){return this.courseRegs.find(i=>i.id===t)}onSubmit(){const t=Wm.formatTeamFormData(this.formData,this.eventId);this.teamId?this.teamService.updateTeam(t,this.teamId).subscribe(()=>{this.notificationsService.show("The Team has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId,"challenge",this.eventId,"teams"]).then()}):this.teamService.createAndJoin(t).subscribe(()=>{this.notificationsService.show("The team has been created successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId,"challenge",this.eventId,"teams"]).then()})}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(q.gz),n.\u0275\u0275directiveInject(ce.N),n.\u0275\u0275directiveInject(jr),n.\u0275\u0275directiveInject(fo),n.\u0275\u0275directiveInject(q.F0),n.\u0275\u0275directiveInject(mt.$F))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-team-create-edit"]],decls:16,vars:5,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Team Name","formControlName","name"],["formControlName","name"],["aria-label","Set Team To A Private Team","size","l","formControlName","isPrivate"],["formControlName","isPrivate"],[4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],[1,"mb-2","mt-5"],["aria-label","Invited Member","formControlName","invitedMembers",3,"tuiTextfieldLabelOutside","stringify","editable","searchChange"],["tuiMultiSelectGroup","",4,"tuiDataList"],["tuiMultiSelectGroup",""],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,i){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"form",1),n.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),n.\u0275\u0275elementStart(2,"h2",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),n.\u0275\u0275text(6," Team Name "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(7,"tui-field-error",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",3)(9,"tui-checkbox-labeled",6),n.\u0275\u0275text(10," Check to lock the team so only people you have invited can join your team. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(11,"tui-field-error",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(12,U1,7,4,"ng-container",8),n.\u0275\u0275elementStart(13,"div",9)(14,"button",10),n.\u0275\u0275text(15),n.\u0275\u0275elementEnd()()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",i.formData),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(i.teamId?"Edit "+(null==i.team?null:i.team.name):"Create New Team"),n.\u0275\u0275advance(9),n.\u0275\u0275property("ngIf",i.isPrivate()),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",i.formData.invalid),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",i.teamId?"Edit Team":"Create Team"," "))},directives:[Y.\u0275NgNoValidate,Y.NgControlStatusGroup,Y.FormGroupDirective,le.K3,le.wU,Y.NgControlStatus,Y.FormControlName,Kt.y,ga.p,A.O5,Ym.VT,pe.xT,Rn.gX,Rn.qi,Ym.Qp,A.sg,Rn.vK,pt.v0],styles:[""]}),e})();const G1=[{path:"",component:nt,canActivate:[K.a]},{path:"create",component:Zh,canActivate:[K.a]},{path:":courseId",component:ls,canActivate:[K.a],children:[{path:"",redirectTo:"homepage",pathMatch:"full"},{path:"homepage",component:hv,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"}]}},{path:"practice",component:Md,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"}]}},{path:"practice/concepts",component:xe,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Concepts",routerLink:"/course/:courseId/practice/concepts"}]}},{path:"register",component:At},{path:"assignments-exams",component:Xv,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"}]}},{path:"assignments-exams/create",component:Jn,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:"Create an Assignment or Exam",routerLink:"/course/:courseId/assignments-exams/create"}]}},{path:"assignments-exams/:eventId/edit",component:Jn,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:"Edit :eventName",routerLink:"/course/:courseId/assignments-exams/:eventId/edit"}]}},{path:"assignments-exams/:eventId",component:vo,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:":eventName",routerLink:"/course/:courseId/assignments-exams/:eventId"}]}},{path:"assignments-exams/:eventId/stats",component:Mg,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:":eventName",routerLink:"/course/:courseId/assignments-exams/:eventId"},{caption:":eventName Statistics",routerLink:"/course/:courseId/assignments-exams/:eventId/stats"}]}},{path:"problem/:id",component:xr.z},{path:"assignments-exams/:eventId/problem/:id",component:xr.z,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Assignments and Exams",routerLink:"/course/:courseId/assignments-exams"},{caption:":eventName",routerLink:"/course/:courseId/assignments-exams/:eventId"},{caption:":questionName",routerLink:"/course/:courseId/assignments-exams/:eventId/problem/:id"}]}},{path:"goal",component:_s,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Goals",routerLink:"/course/:courseId/goal"}]}},{path:"goal/create",component:Yh,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Goals",routerLink:"/course/:courseId/goal"},{caption:"Create Goal",routerLink:"/course/:courseId/goal/create"}]}},{path:"goal/:goalId",component:rc,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Practice",routerLink:"/course/:courseId/practice"},{caption:"Goals",routerLink:"/course/:courseId/goal"},{caption:"Review Goal",routerLink:"/course/:courseId/goal/:goalId"}]}},{path:"token",component:uo,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Tokens",routerLink:"/course/:courseId/token"}]}},{path:"challenge",component:dv,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"}]}},{path:"challenge/:eventId",component:vo,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"}]}},{path:"challenge/:eventId/teams",component:H1,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:"Teams",routerLink:"/course/:courseId/challenge/:eventId/teams"}]}},{path:"challenge/:eventId/teams/create",component:kg,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:"Teams",routerLink:"/course/:courseId/challenge/:eventId/teams"},{caption:"Create a Team",routerLink:"/course/:courseId/challenge/:eventId/teams/create"}]}},{path:"challenge/:eventId/teams/:teamId/edit",component:kg,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:"Teams",routerLink:"/course/:courseId/challenge/:eventId/teams"},{caption:"Edit :teamName",routerLink:"/course/:courseId/challenge/:eventId/teams/:teamId/edit"}]}},{path:"challenge/:eventId/edit",component:Jn,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:"Edit :eventName",routerLink:"/course/:courseId/challenge/:eventId/edit"}]}},{path:"challenge/:eventId/stats",component:Mg,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:":eventName Statistics",routerLink:"/course/:courseId/challenge/:eventId/stats"}]}},{path:"challenge/:eventId/problem/:id",component:xr.z,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Challenges",routerLink:"/course/:courseId/challenge"},{caption:":eventName",routerLink:"/course/:courseId/challenge/:eventId"},{caption:":questionName",routerLink:"/course/:courseId/challenge/:eventId/problem/:id"}]}},{path:"leaderboard",component:w1,data:{breadCrumbs:[{caption:"Homepage",routerLink:"/course/:courseId/homepage"},{caption:"Leaderboard",routerLink:"/course/:courseId/leaderboard"}]}}]},{path:":courseId/practice/category/:categoryId",component:_o,canActivate:[K.a]}];let $1=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[q.Bz.forChild(G1)],q.Bz]}),e})();var W1=d(16995);d(41065),d(35379),d(18583);let Z1=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({imports:[[A.ez,ur.E]]}),e})();var q1=d(37080),e_=d(96560),t_=d(22079);d(2832);let n_=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({}),e})();var r_=d(38333),i_=d(91730),o_=d(76112),a_=d(76153),s_=d(68476),u_=d(43567);let l_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({providers:[jr,ce.N,Me],imports:[[A.ez,i_.J,$1,Y.FormsModule,W1._l,o_.D,a_.ProblemsModule,Y.ReactiveFormsModule,u_.l,Yi.QA,br.iK,mo.A,Ag.Jm,p0,D0,pa,pt.fN,ba,mu.p,ga.s,Rn.pc,ic.zX,Ai.up,e_.S,Kt.C,Le.p,n_,$m.go,Lr.jh,ot.$H,vd,Wa,le.Qf,bu,$e,Si.y,_i.j,t_.dS,an.z,ho.z,Ym.lm,_t.Hi,wg.a3,Ph,ec.R,Vr.Jy,s_.T,Z1,ur.E,Na.jz,q1.$$,Gr.d3,js.U1,pe.cn,r_.qE.forRoot()]]}),e})()},71066:(E,W,d)=>{var m,g,T;T="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,m=[d(29610),d(58259),W],void 0!==(g=function(O,k,R){T.Backbone=function(S,T,_,I){var O=S.Backbone,k=Array.prototype.slice;T.VERSION="1.4.1",T.$=I,T.noConflict=function(){return S.Backbone=O,this},T.emulateHTTP=!1,T.emulateJSON=!1;var A,R=T.Events={},B=/\s+/,K=function(D,U,re,ye,Qe){var Ct,et=0;if(re&&"object"==typeof re)for((void 0!==ye&&"context"in Qe&&void 0===Qe.context&&(Qe.context=ye),Ct=_.keys(re));et<Ct.length;et++)U=K(D,U,Ct[et],re[Ct[et]],Qe);else if(re&&B.test(re))for(Ct=re.split(B);et<Ct.length;et++)U=D(U,Ct[et],ye,Qe);else U=D(U,re,ye,Qe);return U};R.on=function(D,U,re){return this._events=K(q,this._events||{},D,U,{context:re,ctx:this,listening:A}),A&&((this._listeners||(this._listeners={}))[A.id]=A,A.interop=!1),this},R.listenTo=function(D,U,re){if(!D)return this;var ye=D._listenId||(D._listenId=_.uniqueId("l")),Qe=this._listeningTo||(this._listeningTo={}),et=A=Qe[ye];et||(this._listenId||(this._listenId=_.uniqueId("l")),et=A=Qe[ye]=new Y(this,D));var Ct=ae(D,U,re,this);if(A=void 0,Ct)throw Ct;return et.interop&&et.on(U,re),this};var q=function(D,U,re,ye){if(re){var Qe=D[U]||(D[U]=[]),et=ye.context,Ct=ye.ctx,Nt=ye.listening;Nt&&Nt.count++,Qe.push({callback:re,context:et,ctx:et||Ct,listening:Nt})}return D},ae=function(D,U,re,ye){try{D.on(U,re,ye)}catch(Qe){return Qe}};R.off=function(D,U,re){return this._events?(this._events=K(n,this._events,D,U,{context:re,listeners:this._listeners}),this):this},R.stopListening=function(D,U,re){var ye=this._listeningTo;if(!ye)return this;for(var Qe=D?[D._listenId]:_.keys(ye),et=0;et<Qe.length;et++){var Ct=ye[Qe[et]];if(!Ct)break;Ct.obj.off(U,re,this),Ct.interop&&Ct.off(U,re)}return _.isEmpty(ye)&&(this._listeningTo=void 0),this};var n=function(D,U,re,ye){if(D){var Nt,Qe=ye.context,et=ye.listeners,Ct=0;if(!U&&!Qe&&!re){for(Nt=_.keys(et);Ct<Nt.length;Ct++)et[Nt[Ct]].cleanup();return}for(Nt=U?[U]:_.keys(D);Ct<Nt.length;Ct++){var sn=D[U=Nt[Ct]];if(!sn)break;for(var wn=[],An=0;An<sn.length;An++){var gn=sn[An];if(re&&re!==gn.callback&&re!==gn.callback._callback||Qe&&Qe!==gn.context)wn.push(gn);else{var gr=gn.listening;gr&&gr.off(U,re)}}wn.length?D[U]=wn:delete D[U]}return D}};R.once=function(D,U,re){var ye=K(se,{},D,U,this.off.bind(this));return"string"==typeof D&&null==re&&(U=void 0),this.on(ye,U,re)},R.listenToOnce=function(D,U,re){var ye=K(se,{},U,re,this.stopListening.bind(this,D));return this.listenTo(D,ye)};var se=function(D,U,re,ye){if(re){var Qe=D[U]=_.once(function(){ye(U,Qe),re.apply(this,arguments)});Qe._callback=re}return D};R.trigger=function(D){if(!this._events)return this;for(var U=Math.max(0,arguments.length-1),re=Array(U),ye=0;ye<U;ye++)re[ye]=arguments[ye+1];return K(ce,this._events,D,void 0,re),this};var ce=function(D,U,re,ye){if(D){var Qe=D[U],et=D.all;Qe&&et&&(et=et.slice()),Qe&&le(Qe,ye),et&&le(et,[U].concat(ye))}return D},le=function(D,U){var re,ye=-1,Qe=D.length,et=U[0],Ct=U[1],Nt=U[2];switch(U.length){case 0:for(;++ye<Qe;)(re=D[ye]).callback.call(re.ctx);return;case 1:for(;++ye<Qe;)(re=D[ye]).callback.call(re.ctx,et);return;case 2:for(;++ye<Qe;)(re=D[ye]).callback.call(re.ctx,et,Ct);return;case 3:for(;++ye<Qe;)(re=D[ye]).callback.call(re.ctx,et,Ct,Nt);return;default:for(;++ye<Qe;)(re=D[ye]).callback.apply(re.ctx,U);return}},Y=function(D,U){this.id=D._listenId,this.listener=D,this.obj=U,this.interop=!0,this.count=0,this._events=void 0};Y.prototype.on=R.on,Y.prototype.off=function(D,U){var re;this.interop?(this._events=K(n,this._events,D,U,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},Y.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},R.bind=R.on,R.unbind=R.off,_.extend(T,R);var pe=T.Model=function(D,U){var re=D||{};U||(U={}),this.preinitialize.apply(this,arguments),this.cid=_.uniqueId(this.cidPrefix),this.attributes={},U.collection&&(this.collection=U.collection),U.parse&&(re=this.parse(re,U)||{});var ye=_.result(this,"defaults");re=_.defaults(_.extend({},ye,re),ye),this.set(re,U),this.changed={},this.initialize.apply(this,arguments)};_.extend(pe.prototype,R,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(D){return _.clone(this.attributes)},sync:function(){return T.sync.apply(this,arguments)},get:function(D){return this.attributes[D]},escape:function(D){return _.escape(this.get(D))},has:function(D){return null!=this.get(D)},matches:function(D){return!!_.iteratee(D,this)(this.attributes)},set:function(D,U,re){if(null==D)return this;var ye;if("object"==typeof D?(ye=D,re=U):(ye={})[D]=U,re||(re={}),!this._validate(ye,re))return!1;var Qe=re.unset,et=re.silent,Ct=[],Nt=this._changing;this._changing=!0,Nt||(this._previousAttributes=_.clone(this.attributes),this.changed={});var sn=this.attributes,wn=this.changed,An=this._previousAttributes;for(var gn in ye)_.isEqual(sn[gn],U=ye[gn])||Ct.push(gn),_.isEqual(An[gn],U)?delete wn[gn]:wn[gn]=U,Qe?delete sn[gn]:sn[gn]=U;if(this.idAttribute in ye){var gr=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,gr,re)}if(!et){Ct.length&&(this._pending=re);for(var fr=0;fr<Ct.length;fr++)this.trigger("change:"+Ct[fr],this,sn[Ct[fr]],re)}if(Nt)return this;if(!et)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(D,U){return this.set(D,void 0,_.extend({},U,{unset:!0}))},clear:function(D){var U={};for(var re in this.attributes)U[re]=void 0;return this.set(U,_.extend({},D,{unset:!0}))},hasChanged:function(D){return null==D?!_.isEmpty(this.changed):_.has(this.changed,D)},changedAttributes:function(D){if(!D)return!!this.hasChanged()&&_.clone(this.changed);var ye,U=this._changing?this._previousAttributes:this.attributes,re={};for(var Qe in D){var et=D[Qe];_.isEqual(U[Qe],et)||(re[Qe]=et,ye=!0)}return!!ye&&re},previous:function(D){return null!=D&&this._previousAttributes?this._previousAttributes[D]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(D){D=_.extend({parse:!0},D);var U=this,re=D.success;return D.success=function(ye){var Qe=D.parse?U.parse(ye,D):ye;if(!U.set(Qe,D))return!1;re&&re.call(D.context,U,ye,D),U.trigger("sync",U,ye,D)},tn(this,D),this.sync("read",this,D)},save:function(D,U,re){var ye;null==D||"object"==typeof D?(ye=D,re=U):(ye={})[D]=U;var Qe=(re=_.extend({validate:!0,parse:!0},re)).wait;if(ye&&!Qe){if(!this.set(ye,re))return!1}else if(!this._validate(ye,re))return!1;var et=this,Ct=re.success,Nt=this.attributes;re.success=function(An){et.attributes=Nt;var gn=re.parse?et.parse(An,re):An;if(Qe&&(gn=_.extend({},ye,gn)),gn&&!et.set(gn,re))return!1;Ct&&Ct.call(re.context,et,An,re),et.trigger("sync",et,An,re)},tn(this,re),ye&&Qe&&(this.attributes=_.extend({},Nt,ye));var sn=this.isNew()?"create":re.patch?"patch":"update";"patch"===sn&&!re.attrs&&(re.attrs=ye);var wn=this.sync(sn,this,re);return this.attributes=Nt,wn},destroy:function(D){D=D?_.clone(D):{};var U=this,re=D.success,ye=D.wait,Qe=function(){U.stopListening(),U.trigger("destroy",U,U.collection,D)};D.success=function(Ct){ye&&Qe(),re&&re.call(D.context,U,Ct,D),U.isNew()||U.trigger("sync",U,Ct,D)};var et=!1;return this.isNew()?_.defer(D.success):(tn(this,D),et=this.sync("delete",this,D)),ye||Qe(),et},url:function(){var D=_.result(this,"urlRoot")||_.result(this.collection,"url")||hn();if(this.isNew())return D;var U=this.get(this.idAttribute);return D.replace(/[^\/]$/,"$&/")+encodeURIComponent(U)},parse:function(D,U){return D},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(D){return this._validate({},_.extend({},D,{validate:!0}))},_validate:function(D,U){if(!U.validate||!this.validate)return!0;D=_.extend({},this.attributes,D);var re=this.validationError=this.validate(D,U)||null;return!re||(this.trigger("invalid",this,re,_.extend(U,{validationError:re})),!1)}});var we=T.Collection=function(D,U){U||(U={}),this.preinitialize.apply(this,arguments),U.model&&(this.model=U.model),void 0!==U.comparator&&(this.comparator=U.comparator),this._reset(),this.initialize.apply(this,arguments),D&&this.reset(D,_.extend({silent:!0},U))},Le={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},Ge=function(D,U,re){re=Math.min(Math.max(re,0),D.length);var et,ye=Array(D.length-re),Qe=U.length;for(et=0;et<ye.length;et++)ye[et]=D[et+re];for(et=0;et<Qe;et++)D[et+re]=U[et];for(et=0;et<ye.length;et++)D[et+Qe+re]=ye[et]};_.extend(we.prototype,R,{model:pe,preinitialize:function(){},initialize:function(){},toJSON:function(D){return this.map(function(U){return U.toJSON(D)})},sync:function(){return T.sync.apply(this,arguments)},add:function(D,U){return this.set(D,_.extend({merge:!1},U,b))},remove:function(D,U){U=_.extend({},U);var re=!_.isArray(D);D=re?[D]:D.slice();var ye=this._removeModels(D,U);return!U.silent&&ye.length&&(U.changes={added:[],merged:[],removed:ye},this.trigger("update",this,U)),re?ye[0]:ye},set:function(D,U){if(null!=D){(U=_.extend({},Le,U)).parse&&!this._isModel(D)&&(D=this.parse(D,U)||[]);var re=!_.isArray(D);D=re?[D]:D.slice();var ye=U.at;null!=ye&&(ye=+ye),ye>this.length&&(ye=this.length),ye<0&&(ye+=this.length+1);var Qn,vr,Qe=[],et=[],Ct=[],Nt=[],sn={},wn=U.add,An=U.merge,gn=U.remove,gr=!1,fr=this.comparator&&null==ye&&!1!==U.sort,qi=_.isString(this.comparator)?this.comparator:null;for(vr=0;vr<D.length;vr++){var hr=this.get(Qn=D[vr]);if(hr){if(An&&Qn!==hr){var Cr=this._isModel(Qn)?Qn.attributes:Qn;U.parse&&(Cr=hr.parse(Cr,U)),hr.set(Cr,U),Ct.push(hr),fr&&!gr&&(gr=hr.hasChanged(qi))}sn[hr.cid]||(sn[hr.cid]=!0,Qe.push(hr)),D[vr]=hr}else wn&&(Qn=D[vr]=this._prepareModel(Qn,U))&&(et.push(Qn),this._addReference(Qn,U),sn[Qn.cid]=!0,Qe.push(Qn))}if(gn){for(vr=0;vr<this.length;vr++)sn[(Qn=this.models[vr]).cid]||Nt.push(Qn);Nt.length&&this._removeModels(Nt,U)}var Qr=!1;if(Qe.length&&!fr&&wn&&gn?(Qr=this.length!==Qe.length||_.some(this.models,function(wr,un){return wr!==Qe[un]}),this.models.length=0,Ge(this.models,Qe,0),this.length=this.models.length):et.length&&(fr&&(gr=!0),Ge(this.models,et,null==ye?this.length:ye),this.length=this.models.length),gr&&this.sort({silent:!0}),!U.silent){for(vr=0;vr<et.length;vr++)null!=ye&&(U.index=ye+vr),(Qn=et[vr]).trigger("add",Qn,this,U);(gr||Qr)&&this.trigger("sort",this,U),(et.length||Nt.length||Ct.length)&&(U.changes={added:et,removed:Nt,merged:Ct},this.trigger("update",this,U))}return re?D[0]:D}},reset:function(D,U){U=U?_.clone(U):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],U);return U.previousModels=this.models,this._reset(),D=this.add(D,_.extend({silent:!0},U)),U.silent||this.trigger("reset",this,U),D},push:function(D,U){return this.add(D,_.extend({at:this.length},U))},pop:function(D){var U=this.at(this.length-1);return this.remove(U,D)},unshift:function(D,U){return this.add(D,_.extend({at:0},U))},shift:function(D){var U=this.at(0);return this.remove(U,D)},slice:function(){return k.apply(this.models,arguments)},get:function(D){if(null!=D)return this._byId[D]||this._byId[this.modelId(this._isModel(D)?D.attributes:D,D.idAttribute)]||D.cid&&this._byId[D.cid]},has:function(D){return null!=this.get(D)},at:function(D){return D<0&&(D+=this.length),this.models[D]},where:function(D,U){return this[U?"find":"filter"](D)},findWhere:function(D){return this.where(D,!0)},sort:function(D){var U=this.comparator;if(!U)throw new Error("Cannot sort a set without a comparator");D||(D={});var re=U.length;return _.isFunction(U)&&(U=U.bind(this)),1===re||_.isString(U)?this.models=this.sortBy(U):this.models.sort(U),D.silent||this.trigger("sort",this,D),this},pluck:function(D){return this.map(D+"")},fetch:function(D){var U=(D=_.extend({parse:!0},D)).success,re=this;return D.success=function(ye){re[D.reset?"reset":"set"](ye,D),U&&U.call(D.context,re,ye,D),re.trigger("sync",re,ye,D)},tn(this,D),this.sync("read",this,D)},create:function(D,U){var re=(U=U?_.clone(U):{}).wait;if(!(D=this._prepareModel(D,U)))return!1;re||this.add(D,U);var ye=this,Qe=U.success;return U.success=function(et,Ct,Nt){re&&ye.add(et,Nt),Qe&&Qe.call(Nt.context,et,Ct,Nt)},D.save(null,U),D},parse:function(D,U){return D},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(D,U){return D[U||this.model.prototype.idAttribute||"id"]},values:function(){return new ze(this,Ne)},keys:function(){return new ze(this,Re)},entries:function(){return new ze(this,nt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(D,U){return this._isModel(D)?(D.collection||(D.collection=this),D):((U=U?_.clone(U):{}).collection=this,(re=this.model.prototype?new this.model(D,U):this.model(D,U)).validationError?(this.trigger("invalid",this,re.validationError,U),!1):re);var re},_removeModels:function(D,U){for(var re=[],ye=0;ye<D.length;ye++){var Qe=this.get(D[ye]);if(Qe){var et=this.indexOf(Qe);this.models.splice(et,1),this.length--,delete this._byId[Qe.cid];var Ct=this.modelId(Qe.attributes,Qe.idAttribute);null!=Ct&&delete this._byId[Ct],U.silent||(U.index=et,Qe.trigger("remove",Qe,this,U)),re.push(Qe),this._removeReference(Qe,U)}}return re},_isModel:function(D){return D instanceof pe},_addReference:function(D,U){this._byId[D.cid]=D;var re=this.modelId(D.attributes,D.idAttribute);null!=re&&(this._byId[re]=D),D.on("all",this._onModelEvent,this)},_removeReference:function(D,U){delete this._byId[D.cid];var re=this.modelId(D.attributes,D.idAttribute);null!=re&&delete this._byId[re],this===D.collection&&delete D.collection,D.off("all",this._onModelEvent,this)},_onModelEvent:function(D,U,re,ye){if(U){if(("add"===D||"remove"===D)&&re!==this)return;if("destroy"===D&&this.remove(U,ye),"changeId"===D){var Qe=this.modelId(U.previousAttributes(),U.idAttribute),et=this.modelId(U.attributes,U.idAttribute);null!=Qe&&delete this._byId[Qe],null!=et&&(this._byId[et]=U)}}this.trigger.apply(this,arguments)}});var ut="function"==typeof Symbol&&Symbol.iterator;ut&&(we.prototype[ut]=we.prototype.values);var ze=function(D,U){this._collection=D,this._kind=U,this._index=0},Ne=1,Re=2,nt=3;ut&&(ze.prototype[ut]=function(){return this}),ze.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var U,D=this._collection.at(this._index);if(this._index++,this._kind===Ne)U=D;else{var re=this._collection.modelId(D.attributes,D.idAttribute);U=this._kind===Re?re:[re,D]}return{value:U,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Ke=T.View=function(D){this.cid=_.uniqueId("view"),this.preinitialize.apply(this,arguments),_.extend(this,_.pick(D,_t)),this._ensureElement(),this.initialize.apply(this,arguments)},mt=/^(\S+)\s*(.*)$/,_t=["model","collection","el","id","attributes","className","tagName","events"];_.extend(Ke.prototype,R,{tagName:"div",$:function(D){return this.$el.find(D)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(D){return this.undelegateEvents(),this._setElement(D),this.delegateEvents(),this},_setElement:function(D){this.$el=D instanceof T.$?D:T.$(D),this.el=this.$el[0]},delegateEvents:function(D){if(D||(D=_.result(this,"events")),!D)return this;for(var U in this.undelegateEvents(),D){var re=D[U];if(_.isFunction(re)||(re=this[re]),re){var ye=U.match(mt);this.delegate(ye[1],ye[2],re.bind(this))}}return this},delegate:function(D,U,re){return this.$el.on(D+".delegateEvents"+this.cid,U,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(D,U,re){return this.$el.off(D+".delegateEvents"+this.cid,U,re),this},_createElement:function(D){return document.createElement(D)},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"));else{var D=_.extend({},_.result(this,"attributes"));this.id&&(D.id=_.result(this,"id")),this.className&&(D.class=_.result(this,"className")),this.setElement(this._createElement(_.result(this,"tagName"))),this._setAttributes(D)}},_setAttributes:function(D){this.$el.attr(D)}});var Kt=function(D,U,re,ye){_.each(re,function(Qe,et){U[et]&&(D.prototype[et]=function(D,U,re,ye){switch(U){case 1:return function(){return D[re](this[ye])};case 2:return function(Qe){return D[re](this[ye],Qe)};case 3:return function(Qe,et){return D[re](this[ye],an(Qe,this),et)};case 4:return function(Qe,et,Ct){return D[re](this[ye],an(Qe,this),et,Ct)};default:return function(){var Qe=k.call(arguments);return Qe.unshift(this[ye]),D[re].apply(D,Qe)}}}(U,Qe,et,ye))})},an=function(D,U){return _.isFunction(D)?D:_.isObject(D)&&!U._isModel(D)?jn(D):_.isString(D)?function(re){return re.get(D)}:D},jn=function(D){var U=_.matches(D);return function(re){return U(re.attributes)}};_.each([[we,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[pe,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(D){var U=D[0],re=D[1],ye=D[2];U.mixin=function(Qe){var et=_.reduce(_.functions(Qe),function(Ct,Nt){return Ct[Nt]=0,Ct},{});Kt(U,Qe,et,ye)},Kt(U,_,re,ye)}),T.sync=function(D,U,re){var ye=dr[D];_.defaults(re||(re={}),{emulateHTTP:T.emulateHTTP,emulateJSON:T.emulateJSON});var Qe={type:ye,dataType:"json"};if(re.url||(Qe.url=_.result(U,"url")||hn()),null==re.data&&U&&("create"===D||"update"===D||"patch"===D)&&(Qe.contentType="application/json",Qe.data=JSON.stringify(re.attrs||U.toJSON(re))),re.emulateJSON&&(Qe.contentType="application/x-www-form-urlencoded",Qe.data=Qe.data?{model:Qe.data}:{}),re.emulateHTTP&&("PUT"===ye||"DELETE"===ye||"PATCH"===ye)){Qe.type="POST",re.emulateJSON&&(Qe.data._method=ye);var et=re.beforeSend;re.beforeSend=function(sn){if(sn.setRequestHeader("X-HTTP-Method-Override",ye),et)return et.apply(this,arguments)}}"GET"!==Qe.type&&!re.emulateJSON&&(Qe.processData=!1);var Ct=re.error;re.error=function(sn,wn,An){re.textStatus=wn,re.errorThrown=An,Ct&&Ct.call(re.context,sn,wn,An)};var Nt=re.xhr=T.ajax(_.extend(Qe,re));return U.trigger("request",U,Nt,re),Nt};var dr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};T.ajax=function(){return T.$.ajax.apply(T.$,arguments)};var Xn=T.Router=function(D){D||(D={}),this.preinitialize.apply(this,arguments),D.routes&&(this.routes=D.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},We=/\((.*?)\)/g,Ze=/(\(\?)?:\w+/g,ft=/\*\w+/g,xt=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Xn.prototype,R,{preinitialize:function(){},initialize:function(){},route:function(D,U,re){_.isRegExp(D)||(D=this._routeToRegExp(D)),_.isFunction(U)&&(re=U,U=""),re||(re=this[U]);var ye=this;return T.history.route(D,function(Qe){var et=ye._extractParameters(D,Qe);!1!==ye.execute(re,et,U)&&(ye.trigger.apply(ye,["route:"+U].concat(et)),ye.trigger("route",U,et),T.history.trigger("route",ye,U,et))}),this},execute:function(D,U,re){D&&D.apply(this,U)},navigate:function(D,U){return T.history.navigate(D,U),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var D,U=_.keys(this.routes);null!=(D=U.pop());)this.route(D,this.routes[D])}},_routeToRegExp:function(D){return D=D.replace(xt,"\\$&").replace(We,"(?:$1)?").replace(Ze,function(U,re){return re?U:"([^/?]+)"}).replace(ft,"([^?]*?)"),new RegExp("^"+D+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(D,U){var re=D.exec(U).slice(1);return _.map(re,function(ye,Qe){return Qe===re.length-1?ye||null:ye?decodeURIComponent(ye):null})}});var At=T.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},cn=/^[#\/]|\s+$/g,Bn=/^\/+|\/+$/g,cr=/#.*$/;At.started=!1,_.extend(At.prototype,R,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(D){return decodeURI(D.replace(/%25/g,"%2525"))},getSearch:function(){var D=this.location.href.replace(/#.*/,"").match(/\?.+/);return D?D[0]:""},getHash:function(D){var U=(D||this).location.href.match(/#(.*)$/);return U?U[1]:""},getPath:function(){var D=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===D.charAt(0)?D.slice(1):D},getFragment:function(D){return null==D&&(D=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),D.replace(cn,"")},start:function(D){if(At.started)throw new Error("Backbone.history has already been started");if(At.started=!0,this.options=_.extend({root:"/"},this.options,D),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Bn,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var U=this.root.slice(0,-1)||"/";return this.location.replace(U+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,ye=re.insertBefore(this.iframe,re.firstChild).contentWindow;ye.document.open(),ye.document.close(),ye.location.hash="#"+this.fragment}var Qe=window.addEventListener||function(et,Ct){return attachEvent("on"+et,Ct)};if(this._usePushState?Qe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Qe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var D=window.removeEventListener||function(U,re){return detachEvent("on"+U,re)};this._usePushState?D("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&D("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),At.started=!1},route:function(D,U){this.handlers.unshift({route:D,callback:U})},checkUrl:function(D){var U=this.getFragment();if(U===this.fragment&&this.iframe&&(U=this.getHash(this.iframe.contentWindow)),U===this.fragment)return!1;this.iframe&&this.navigate(U),this.loadUrl()},loadUrl:function(D){return!!this.matchRoot()&&(D=this.fragment=this.getFragment(D),_.some(this.handlers,function(U){if(U.route.test(D))return U.callback(D),!0}))},navigate:function(D,U){if(!At.started)return!1;(!U||!0===U)&&(U={trigger:!!U}),D=this.getFragment(D||"");var re=this.root;(""===D||"?"===D.charAt(0))&&(re=re.slice(0,-1)||"/");var ye=re+D;D=D.replace(cr,"");var Qe=this.decodeFragment(D);if(this.fragment!==Qe){if(this.fragment=Qe,this._usePushState)this.history[U.replace?"replaceState":"pushState"]({},document.title,ye);else{if(!this._wantsHashChange)return this.location.assign(ye);if(this._updateHash(this.location,D,U.replace),this.iframe&&D!==this.getHash(this.iframe.contentWindow)){var et=this.iframe.contentWindow;U.replace||(et.document.open(),et.document.close()),this._updateHash(et.location,D,U.replace)}}if(U.trigger)return this.loadUrl(D)}},_updateHash:function(D,U,re){if(re){var ye=D.href.replace(/(javascript:|#).*$/,"");D.replace(ye+"#"+U)}else D.hash="#"+U}}),T.history=new At;pe.extend=we.extend=Xn.extend=Ke.extend=At.extend=function(D,U){var ye,re=this;return ye=D&&_.has(D,"constructor")?D.constructor:function(){return re.apply(this,arguments)},_.extend(ye,re,U),ye.prototype=_.create(re.prototype,D),ye.prototype.constructor=ye,ye.__super__=re.prototype,ye};var hn=function(){throw new Error('A "url" property or function must be specified')},tn=function(D,U){var re=U.error;U.error=function(ye){re&&re.call(U.context,D,ye,U),D.trigger("error",D,ye,U)}};return T}(T,R,O,k)}.apply(W,m))&&(E.exports=g)},59695:(E,W,d)=>{E.exports={graphlib:d(36456),layout:d(14850),debug:d(71914),util:{time:d(11510).time,notime:d(11510).notime},version:d(28126)}},12234:(E,W,d)=>{"use strict";var m=d(45760),g=d(67365);E.exports={run:function S(I){var O="greedy"===I.graph().acyclicer?g(I,function k(R){return function(B){return R.edge(B).weight}}(I)):function T(I){var O=[],k={},R={};return m.forEach(I.nodes(),function B(A){m.has(R,A)||(R[A]=!0,k[A]=!0,m.forEach(I.outEdges(A),function(K){m.has(k,K.w)?O.push(K):B(K.w)}),delete k[A])}),O}(I);m.forEach(O,function(R){var B=I.edge(R);I.removeEdge(R),B.forwardName=R.name,B.reversed=!0,I.setEdge(R.w,R.v,B,m.uniqueId("rev"))})},undo:function _(I){m.forEach(I.edges(),function(O){var k=I.edge(O);if(k.reversed){I.removeEdge(O);var R=k.forwardName;delete k.reversed,delete k.forwardName,I.setEdge(O.w,O.v,k,R)}})}}},79999:(E,W,d)=>{var m=d(45760),g=d(11510);function T(_,I,O,k,R,B){var K=R[I][B-1],q=g.addDummyNode(_,"border",{width:0,height:0,rank:B,borderType:I},O);R[I][B]=q,_.setParent(q,k),K&&_.setEdge(K,q,{weight:1})}E.exports=function S(_){m.forEach(_.children(),function I(O){var k=_.children(O),R=_.node(O);if(k.length&&m.forEach(k,I),m.has(R,"minRank")){R.borderLeft=[],R.borderRight=[];for(var B=R.minRank,A=R.maxRank+1;B<A;++B)T(_,"borderLeft","_bl",O,R,B),T(_,"borderRight","_br",O,R,B)}})}},83870:(E,W,d)=>{"use strict";var m=d(45760);function T(B){m.forEach(B.nodes(),function(A){_(B.node(A))}),m.forEach(B.edges(),function(A){_(B.edge(A))})}function _(B){var A=B.width;B.width=B.height,B.height=A}function O(B){B.y=-B.y}function R(B){var A=B.x;B.x=B.y,B.y=A}E.exports={adjust:function g(B){var A=B.graph().rankdir.toLowerCase();("lr"===A||"rl"===A)&&T(B)},undo:function S(B){var A=B.graph().rankdir.toLowerCase();("bt"===A||"rl"===A)&&function I(B){m.forEach(B.nodes(),function(A){O(B.node(A))}),m.forEach(B.edges(),function(A){var K=B.edge(A);m.forEach(K.points,O),m.has(K,"y")&&O(K)})}(B),("lr"===A||"rl"===A)&&(function k(B){m.forEach(B.nodes(),function(A){R(B.node(A))}),m.forEach(B.edges(),function(A){var K=B.edge(A);m.forEach(K.points,R),m.has(K,"x")&&R(K)})}(B),T(B))}}},3226:E=>{function W(){var g={};g._next=g._prev=g,this._sentinel=g}function d(g){g._prev._next=g._next,g._next._prev=g._prev,delete g._next,delete g._prev}function m(g,S){if("_next"!==g&&"_prev"!==g)return S}E.exports=W,W.prototype.dequeue=function(){var g=this._sentinel,S=g._prev;if(S!==g)return d(S),S},W.prototype.enqueue=function(g){var S=this._sentinel;g._prev&&g._next&&d(g),g._next=S._next,S._next._prev=g,S._next=g,g._prev=S},W.prototype.toString=function(){for(var g=[],S=this._sentinel,T=S._prev;T!==S;)g.push(JSON.stringify(T,m)),T=T._prev;return"["+g.join(", ")+"]"}},71914:(E,W,d)=>{var m=d(45760),g=d(11510),S=d(36456).Graph;E.exports={debugOrdering:function T(_){var I=g.buildLayerMatrix(_),O=new S({compound:!0,multigraph:!0}).setGraph({});return m.forEach(_.nodes(),function(k){O.setNode(k,{label:k}),O.setParent(k,"layer"+_.node(k).rank)}),m.forEach(_.edges(),function(k){O.setEdge(k.v,k.w,{},k.name)}),m.forEach(I,function(k,R){O.setNode("layer"+R,{rank:"same"}),m.reduce(k,function(A,K){return O.setEdge(A,K,{style:"invis"}),K})}),O}}},36456:(E,W,d)=>{var m;try{m=d(85510)}catch(g){}m||(m=window.graphlib),E.exports=m},67365:(E,W,d)=>{var m=d(45760),g=d(36456).Graph,S=d(3226);E.exports=function _(B,A){if(B.nodeCount()<=1)return[];var K=function k(B,A){var K=new g,q=0,ae=0;m.forEach(B.nodes(),function(ce){K.setNode(ce,{v:ce,in:0,out:0})}),m.forEach(B.edges(),function(ce){var le=K.edge(ce.v,ce.w)||0,Y=A(ce);K.setEdge(ce.v,ce.w,le+Y),ae=Math.max(ae,K.node(ce.v).out+=Y),q=Math.max(q,K.node(ce.w).in+=Y)});var n=m.range(ae+q+3).map(function(){return new S}),se=q+1;return m.forEach(K.nodes(),function(ce){R(n,se,K.node(ce))}),{graph:K,buckets:n,zeroIdx:se}}(B,A||T),q=function I(B,A,K){for(var se,q=[],ae=A[A.length-1],n=A[0];B.nodeCount();){for(;se=n.dequeue();)O(B,A,K,se);for(;se=ae.dequeue();)O(B,A,K,se);if(B.nodeCount())for(var ce=A.length-2;ce>0;--ce)if(se=A[ce].dequeue()){q=q.concat(O(B,A,K,se,!0));break}}return q}(K.graph,K.buckets,K.zeroIdx);return m.flatten(m.map(q,function(ae){return B.outEdges(ae.v,ae.w)}),!0)};var T=m.constant(1);function O(B,A,K,q,ae){var n=ae?[]:void 0;return m.forEach(B.inEdges(q.v),function(se){var ce=B.edge(se),le=B.node(se.v);ae&&n.push({v:se.v,w:se.w}),le.out-=ce,R(A,K,le)}),m.forEach(B.outEdges(q.v),function(se){var ce=B.edge(se),Y=B.node(se.w);Y.in-=ce,R(A,K,Y)}),B.removeNode(q.v),n}function R(B,A,K){K.out?K.in?B[K.out-K.in+A].enqueue(K):B[B.length-1].enqueue(K):B[0].enqueue(K)}},14850:(E,W,d)=>{"use strict";var m=d(45760),g=d(12234),S=d(91496),T=d(94124),_=d(11510).normalizeRanks,I=d(60162),O=d(11510).removeEmptyRanks,k=d(1230),R=d(79999),B=d(83870),A=d(32974),K=d(78226),q=d(11510),ae=d(36456).Graph;E.exports=function n(We,Ze){var ft=Ze&&Ze.debugTiming?q.time:q.notime;ft("layout",function(){var xt=ft("  buildLayoutGraph",function(){return function ze(We){var Ze=new ae({multigraph:!0,compound:!0}),ft=Xn(We.graph());return Ze.setGraph(m.merge({},Y,dr(ft,le),m.pick(ft,pe))),m.forEach(We.nodes(),function(xt){var At=Xn(We.node(xt));Ze.setNode(xt,m.defaults(dr(At,we),Le)),Ze.setParent(xt,We.parent(xt))}),m.forEach(We.edges(),function(xt){var At=Xn(We.edge(xt));Ze.setEdge(xt,m.merge({},Ge,dr(At,b),m.pick(At,ut)))}),Ze}(We)});ft("  runLayout",function(){!function se(We,Ze){Ze("    makeSpaceForEdgeLabels",function(){!function Ne(We){var Ze=We.graph();Ze.ranksep/=2,m.forEach(We.edges(),function(ft){var xt=We.edge(ft);xt.minlen*=2,"c"!==xt.labelpos.toLowerCase()&&("TB"===Ze.rankdir||"BT"===Ze.rankdir?xt.width+=xt.labeloffset:xt.height+=xt.labeloffset)})}(We)}),Ze("    removeSelfEdges",function(){!function jn(We){m.forEach(We.edges(),function(Ze){if(Ze.v===Ze.w){var ft=We.node(Ze.v);ft.selfEdges||(ft.selfEdges=[]),ft.selfEdges.push({e:Ze,label:We.edge(Ze)}),We.removeEdge(Ze)}})}(We)}),Ze("    acyclic",function(){g.run(We)}),Ze("    nestingGraph.run",function(){k.run(We)}),Ze("    rank",function(){T(q.asNonCompoundGraph(We))}),Ze("    injectEdgeLabelProxies",function(){!function Re(We){m.forEach(We.edges(),function(Ze){var ft=We.edge(Ze);if(ft.width&&ft.height){var xt=We.node(Ze.v),At=We.node(Ze.w);q.addDummyNode(We,"edge-proxy",{rank:(At.rank-xt.rank)/2+xt.rank,e:Ze},"_ep")}})}(We)}),Ze("    removeEmptyRanks",function(){O(We)}),Ze("    nestingGraph.cleanup",function(){k.cleanup(We)}),Ze("    normalizeRanks",function(){_(We)}),Ze("    assignRankMinMax",function(){!function nt(We){var Ze=0;m.forEach(We.nodes(),function(ft){var xt=We.node(ft);xt.borderTop&&(xt.minRank=We.node(xt.borderTop).rank,xt.maxRank=We.node(xt.borderBottom).rank,Ze=m.max(Ze,xt.maxRank))}),We.graph().maxRank=Ze}(We)}),Ze("    removeEdgeLabelProxies",function(){!function Ke(We){m.forEach(We.nodes(),function(Ze){var ft=We.node(Ze);"edge-proxy"===ft.dummy&&(We.edge(ft.e).labelRank=ft.rank,We.removeNode(Ze))})}(We)}),Ze("    normalize.run",function(){S.run(We)}),Ze("    parentDummyChains",function(){I(We)}),Ze("    addBorderSegments",function(){R(We)}),Ze("    order",function(){A(We)}),Ze("    insertSelfEdges",function(){!function Zn(We){var Ze=q.buildLayerMatrix(We);m.forEach(Ze,function(ft){var xt=0;m.forEach(ft,function(At,cn){var Bn=We.node(At);Bn.order=cn+xt,m.forEach(Bn.selfEdges,function(cr){q.addDummyNode(We,"selfedge",{width:cr.label.width,height:cr.label.height,rank:Bn.rank,order:cn+ ++xt,e:cr.e,label:cr.label},"_se")}),delete Bn.selfEdges})})}(We)}),Ze("    adjustCoordinateSystem",function(){B.adjust(We)}),Ze("    position",function(){K(We)}),Ze("    positionSelfEdges",function(){!function zn(We){m.forEach(We.nodes(),function(Ze){var ft=We.node(Ze);if("selfedge"===ft.dummy){var xt=We.node(ft.e.v),At=xt.x+xt.width/2,cn=xt.y,Bn=ft.x-At,cr=xt.height/2;We.setEdge(ft.e,ft.label),We.removeNode(Ze),ft.label.points=[{x:At+2*Bn/3,y:cn-cr},{x:At+5*Bn/6,y:cn-cr},{x:At+Bn,y:cn},{x:At+5*Bn/6,y:cn+cr},{x:At+2*Bn/3,y:cn+cr}],ft.label.x=ft.x,ft.label.y=ft.y}})}(We)}),Ze("    removeBorderNodes",function(){!function an(We){m.forEach(We.nodes(),function(Ze){if(We.children(Ze).length){var ft=We.node(Ze),xt=We.node(ft.borderTop),At=We.node(ft.borderBottom),cn=We.node(m.last(ft.borderLeft)),Bn=We.node(m.last(ft.borderRight));ft.width=Math.abs(Bn.x-cn.x),ft.height=Math.abs(At.y-xt.y),ft.x=cn.x+ft.width/2,ft.y=xt.y+ft.height/2}}),m.forEach(We.nodes(),function(Ze){"border"===We.node(Ze).dummy&&We.removeNode(Ze)})}(We)}),Ze("    normalize.undo",function(){S.undo(We)}),Ze("    fixupEdgeLabelCoords",function(){!function pt(We){m.forEach(We.edges(),function(Ze){var ft=We.edge(Ze);if(m.has(ft,"x"))switch(("l"===ft.labelpos||"r"===ft.labelpos)&&(ft.width-=ft.labeloffset),ft.labelpos){case"l":ft.x-=ft.width/2+ft.labeloffset;break;case"r":ft.x+=ft.width/2+ft.labeloffset}})}(We)}),Ze("    undoCoordinateSystem",function(){B.undo(We)}),Ze("    translateGraph",function(){!function mt(We){var Ze=Number.POSITIVE_INFINITY,ft=0,xt=Number.POSITIVE_INFINITY,At=0,cn=We.graph(),Bn=cn.marginx||0,cr=cn.marginy||0;function co(hn){var tn=hn.x,D=hn.y,U=hn.width,re=hn.height;Ze=Math.min(Ze,tn-U/2),ft=Math.max(ft,tn+U/2),xt=Math.min(xt,D-re/2),At=Math.max(At,D+re/2)}m.forEach(We.nodes(),function(hn){co(We.node(hn))}),m.forEach(We.edges(),function(hn){var tn=We.edge(hn);m.has(tn,"x")&&co(tn)}),Ze-=Bn,xt-=cr,m.forEach(We.nodes(),function(hn){var tn=We.node(hn);tn.x-=Ze,tn.y-=xt}),m.forEach(We.edges(),function(hn){var tn=We.edge(hn);m.forEach(tn.points,function(D){D.x-=Ze,D.y-=xt}),m.has(tn,"x")&&(tn.x-=Ze),m.has(tn,"y")&&(tn.y-=xt)}),cn.width=ft-Ze+Bn,cn.height=At-xt+cr}(We)}),Ze("    assignNodeIntersects",function(){!function _t(We){m.forEach(We.edges(),function(Ze){var cn,Bn,ft=We.edge(Ze),xt=We.node(Ze.v),At=We.node(Ze.w);ft.points?(cn=ft.points[0],Bn=ft.points[ft.points.length-1]):(ft.points=[],cn=At,Bn=xt),ft.points.unshift(q.intersectRect(xt,cn)),ft.points.push(q.intersectRect(At,Bn))})}(We)}),Ze("    reversePoints",function(){!function Kt(We){m.forEach(We.edges(),function(Ze){var ft=We.edge(Ze);ft.reversed&&ft.points.reverse()})}(We)}),Ze("    acyclic.undo",function(){g.undo(We)})}(xt,ft)}),ft("  updateInputGraph",function(){!function ce(We,Ze){m.forEach(We.nodes(),function(ft){var xt=We.node(ft),At=Ze.node(ft);xt&&(xt.x=At.x,xt.y=At.y,Ze.children(ft).length&&(xt.width=At.width,xt.height=At.height))}),m.forEach(We.edges(),function(ft){var xt=We.edge(ft),At=Ze.edge(ft);xt.points=At.points,m.has(At,"x")&&(xt.x=At.x,xt.y=At.y)}),We.graph().width=Ze.graph().width,We.graph().height=Ze.graph().height}(We,xt)})})};var le=["nodesep","edgesep","ranksep","marginx","marginy"],Y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},pe=["acyclicer","ranker","rankdir","align"],we=["width","height"],Le={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],Ge={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ut=["labelpos"];function dr(We,Ze){return m.mapValues(m.pick(We,Ze),Number)}function Xn(We){var Ze={};return m.forEach(We,function(ft,xt){Ze[xt.toLowerCase()]=ft}),Ze}},45760:(E,W,d)=>{var m;try{m={cloneDeep:d(90733),constant:d(76684),defaults:d(28800),each:d(35474),filter:d(35281),find:d(62516),flatten:d(22274),forEach:d(89851),forIn:d(41176),has:d(54842),isUndefined:d(34235),last:d(25809),map:d(19984),mapValues:d(10203),max:d(18176),merge:d(80567),min:d(29439),minBy:d(29525),now:d(31710),pick:d(16372),range:d(90361),reduce:d(81337),sortBy:d(12906),uniqueId:d(51541),values:d(90377),zipObject:d(21617)}}catch(g){}m||(m=window._),E.exports=m},1230:(E,W,d)=>{var m=d(45760),g=d(11510);function T(k,R,B,A,K,q,ae){var n=k.children(ae);if(n.length){var se=g.addBorderNode(k,"_bt"),ce=g.addBorderNode(k,"_bb"),le=k.node(ae);k.setParent(se,ae),le.borderTop=se,k.setParent(ce,ae),le.borderBottom=ce,m.forEach(n,function(Y){T(k,R,B,A,K,q,Y);var pe=k.node(Y),we=pe.borderTop?pe.borderTop:Y,Le=pe.borderBottom?pe.borderBottom:Y,b=pe.borderTop?A:2*A,Ge=we!==Le?1:K-q[ae]+1;k.setEdge(se,we,{weight:b,minlen:Ge,nestingEdge:!0}),k.setEdge(Le,ce,{weight:b,minlen:Ge,nestingEdge:!0})}),k.parent(ae)||k.setEdge(R,se,{weight:0,minlen:K+q[ae]})}else ae!==R&&k.setEdge(R,ae,{weight:0,minlen:B})}E.exports={run:function S(k){var R=g.addDummyNode(k,"root",{},"_root"),B=function _(k){var R={};function B(A,K){var q=k.children(A);q&&q.length&&m.forEach(q,function(ae){B(ae,K+1)}),R[A]=K}return m.forEach(k.children(),function(A){B(A,1)}),R}(k),A=m.max(m.values(B))-1,K=2*A+1;k.graph().nestingRoot=R,m.forEach(k.edges(),function(ae){k.edge(ae).minlen*=K});var q=function I(k){return m.reduce(k.edges(),function(R,B){return R+k.edge(B).weight},0)}(k)+1;m.forEach(k.children(),function(ae){T(k,R,K,q,A,B,ae)}),k.graph().nodeRankFactor=K},cleanup:function O(k){var R=k.graph();k.removeNode(R.nestingRoot),delete R.nestingRoot,m.forEach(k.edges(),function(B){k.edge(B).nestingEdge&&k.removeEdge(B)})}}},91496:(E,W,d)=>{"use strict";var m=d(45760),g=d(11510);E.exports={run:function S(I){I.graph().dummyChains=[],m.forEach(I.edges(),function(O){!function T(I,O){var k=O.v,R=I.node(k).rank,B=O.w,A=I.node(B).rank,K=O.name,q=I.edge(O),ae=q.labelRank;if(A!==R+1){var n,se,ce;for(I.removeEdge(O),ce=0,++R;R<A;++ce,++R)q.points=[],n=g.addDummyNode(I,"edge",se={width:0,height:0,edgeLabel:q,edgeObj:O,rank:R},"_d"),R===ae&&(se.width=q.width,se.height=q.height,se.dummy="edge-label",se.labelpos=q.labelpos),I.setEdge(k,n,{weight:q.weight},K),0===ce&&I.graph().dummyChains.push(n),k=n;I.setEdge(k,B,{weight:q.weight},K)}}(I,O)})},undo:function _(I){m.forEach(I.graph().dummyChains,function(O){var B,k=I.node(O),R=k.edgeLabel;for(I.setEdge(k.edgeObj,R);k.dummy;)B=I.successors(O)[0],I.removeNode(O),R.points.push({x:k.x,y:k.y}),"edge-label"===k.dummy&&(R.x=k.x,R.y=k.y,R.width=k.width,R.height=k.height),k=I.node(O=B)})}}},33034:(E,W,d)=>{var m=d(45760);E.exports=function g(S,T,_){var O,I={};m.forEach(_,function(k){for(var B,A,R=S.parent(k);R;){if((B=S.parent(R))?(A=I[B],I[B]=R):(A=O,O=R),A&&A!==R)return void T.setEdge(A,R);R=B}})}},81323:(E,W,d)=>{var m=d(45760);E.exports=function g(S,T){return m.map(T,function(_){var I=S.inEdges(_);if(I.length){var O=m.reduce(I,function(k,R){var B=S.edge(R),A=S.node(R.v);return{sum:k.sum+B.weight*A.order,weight:k.weight+B.weight}},{sum:0,weight:0});return{v:_,barycenter:O.sum/O.weight,weight:O.weight}}return{v:_}})}},1686:(E,W,d)=>{var m=d(45760),g=d(36456).Graph;E.exports=function S(_,I,O){var k=function T(_){for(var I;_.hasNode(I=m.uniqueId("_root")););return I}(_),R=new g({compound:!0}).setGraph({root:k}).setDefaultNodeLabel(function(B){return _.node(B)});return m.forEach(_.nodes(),function(B){var A=_.node(B),K=_.parent(B);(A.rank===I||A.minRank<=I&&I<=A.maxRank)&&(R.setNode(B),R.setParent(B,K||k),m.forEach(_[O](B),function(q){var ae=q.v===B?q.w:q.v,n=R.edge(ae,B),se=m.isUndefined(n)?0:n.weight;R.setEdge(ae,B,{weight:_.edge(q).weight+se})}),m.has(A,"minRank")&&R.setNode(B,{borderLeft:A.borderLeft[I],borderRight:A.borderRight[I]}))}),R}},18796:(E,W,d)=>{"use strict";var m=d(45760);function S(T,_,I){for(var O=m.zipObject(I,m.map(I,function(q,ae){return ae})),k=m.flatten(m.map(_,function(q){return m.sortBy(m.map(T.outEdges(q),function(ae){return{pos:O[ae.w],weight:T.edge(ae).weight}}),"pos")}),!0),R=1;R<I.length;)R<<=1;var B=2*R-1;R-=1;var A=m.map(new Array(B),function(){return 0}),K=0;return m.forEach(k.forEach(function(q){var ae=q.pos+R;A[ae]+=q.weight;for(var n=0;ae>0;)ae%2&&(n+=A[ae+1]),A[ae=ae-1>>1]+=q.weight;K+=q.weight*n})),K}E.exports=function g(T,_){for(var I=0,O=1;O<_.length;++O)I+=S(T,_[O-1],_[O]);return I}},32974:(E,W,d)=>{"use strict";var m=d(45760),g=d(49402),S=d(18796),T=d(61057),_=d(1686),I=d(33034),O=d(36456).Graph,k=d(11510);function B(q,ae,n){return m.map(ae,function(se){return _(q,se,n)})}function A(q,ae){var n=new O;m.forEach(q,function(se){var ce=se.graph().root,le=T(se,ce,n,ae);m.forEach(le.vs,function(Y,pe){se.node(Y).order=pe}),I(se,n,le.vs)})}function K(q,ae){m.forEach(ae,function(n){m.forEach(n,function(se,ce){q.node(se).order=ce})})}E.exports=function R(q){var ae=k.maxRank(q),n=B(q,m.range(1,ae+1),"inEdges"),se=B(q,m.range(ae-1,-1,-1),"outEdges"),ce=g(q);K(q,ce);for(var Y,le=Number.POSITIVE_INFINITY,pe=0,we=0;we<4;++pe,++we){A(pe%2?n:se,pe%4>=2),ce=k.buildLayerMatrix(q);var Le=S(q,ce);Le<le&&(we=0,Y=m.cloneDeep(ce),le=Le)}K(q,Y)}},49402:(E,W,d)=>{"use strict";var m=d(45760);E.exports=function g(S){var T={},_=m.filter(S.nodes(),function(B){return!S.children(B).length}),I=m.max(m.map(_,function(B){return S.node(B).rank})),O=m.map(m.range(I+1),function(){return[]}),R=m.sortBy(_,function(B){return S.node(B).rank});return m.forEach(R,function k(B){if(!m.has(T,B)){T[B]=!0;var A=S.node(B);O[A.rank].push(B),m.forEach(S.successors(B),k)}}),O}},83826:(E,W,d)=>{"use strict";var m=d(45760);E.exports=function g(_,I){var O={};return m.forEach(_,function(R,B){var A=O[R.v]={indegree:0,in:[],out:[],vs:[R.v],i:B};m.isUndefined(R.barycenter)||(A.barycenter=R.barycenter,A.weight=R.weight)}),m.forEach(I.edges(),function(R){var B=O[R.v],A=O[R.w];!m.isUndefined(B)&&!m.isUndefined(A)&&(A.indegree++,B.out.push(O[R.w]))}),function S(_){var I=[];function O(B){return function(A){A.merged||(m.isUndefined(A.barycenter)||m.isUndefined(B.barycenter)||A.barycenter>=B.barycenter)&&function T(_,I){var O=0,k=0;_.weight&&(O+=_.barycenter*_.weight,k+=_.weight),I.weight&&(O+=I.barycenter*I.weight,k+=I.weight),_.vs=I.vs.concat(_.vs),_.barycenter=O/k,_.weight=k,_.i=Math.min(I.i,_.i),I.merged=!0}(B,A)}}function k(B){return function(A){A.in.push(B),0==--A.indegree&&_.push(A)}}for(;_.length;){var R=_.pop();I.push(R),m.forEach(R.in.reverse(),O(R)),m.forEach(R.out,k(R))}return m.map(m.filter(I,function(B){return!B.merged}),function(B){return m.pick(B,["vs","i","barycenter","weight"])})}(m.filter(O,function(R){return!R.indegree}))}},61057:(E,W,d)=>{var m=d(45760),g=d(81323),S=d(83826),T=d(93803);E.exports=function _(k,R,B,A){var K=k.children(R),q=k.node(R),ae=q?q.borderLeft:void 0,n=q?q.borderRight:void 0,se={};ae&&(K=m.filter(K,function(Le){return Le!==ae&&Le!==n}));var ce=g(k,K);m.forEach(ce,function(Le){if(k.children(Le.v).length){var b=_(k,Le.v,B,A);se[Le.v]=b,m.has(b,"barycenter")&&function O(k,R){m.isUndefined(k.barycenter)?(k.barycenter=R.barycenter,k.weight=R.weight):(k.barycenter=(k.barycenter*k.weight+R.barycenter*R.weight)/(k.weight+R.weight),k.weight+=R.weight)}(Le,b)}});var le=S(ce,B);!function I(k,R){m.forEach(k,function(B){B.vs=m.flatten(B.vs.map(function(A){return R[A]?R[A].vs:A}),!0)})}(le,se);var Y=T(le,A);if(ae&&(Y.vs=m.flatten([ae,Y.vs,n],!0),k.predecessors(ae).length)){var pe=k.node(k.predecessors(ae)[0]),we=k.node(k.predecessors(n)[0]);m.has(Y,"barycenter")||(Y.barycenter=0,Y.weight=0),Y.barycenter=(Y.barycenter*Y.weight+pe.order+we.order)/(Y.weight+2),Y.weight+=2}return Y}},93803:(E,W,d)=>{var m=d(45760),g=d(11510);function T(I,O,k){for(var R;O.length&&(R=m.last(O)).i<=k;)O.pop(),I.push(R.vs),k++;return k}E.exports=function S(I,O){var k=g.partition(I,function(se){return m.has(se,"barycenter")}),R=k.lhs,B=m.sortBy(k.rhs,function(se){return-se.i}),A=[],K=0,q=0,ae=0;R.sort(function _(I){return function(O,k){return O.barycenter<k.barycenter?-1:O.barycenter>k.barycenter?1:I?k.i-O.i:O.i-k.i}}(!!O)),ae=T(A,B,ae),m.forEach(R,function(se){ae+=se.vs.length,A.push(se.vs),K+=se.barycenter*se.weight,q+=se.weight,ae=T(A,B,ae)});var n={vs:m.flatten(A,!0)};return q&&(n.barycenter=K/q,n.weight=q),n}},60162:(E,W,d)=>{var m=d(45760);E.exports=function g(_){var I=function T(_){var I={},O=0;return m.forEach(_.children(),function k(R){var B=O;m.forEach(_.children(R),k),I[R]={low:B,lim:O++}}),I}(_);m.forEach(_.graph().dummyChains,function(O){for(var k=_.node(O),R=k.edgeObj,B=function S(_,I,O,k){var q,ae,R=[],B=[],A=Math.min(I[O].low,I[k].low),K=Math.max(I[O].lim,I[k].lim);q=O;do{q=_.parent(q),R.push(q)}while(q&&(I[q].low>A||K>I[q].lim));for(ae=q,q=k;(q=_.parent(q))!==ae;)B.push(q);return{path:R.concat(B.reverse()),lca:ae}}(_,I,R.v,R.w),A=B.path,K=B.lca,q=0,ae=A[q],n=!0;O!==R.w;){if(k=_.node(O),n){for(;(ae=A[q])!==K&&_.node(ae).maxRank<k.rank;)q++;ae===K&&(n=!1)}if(!n){for(;q<A.length-1&&_.node(ae=A[q+1]).minRank<=k.rank;)q++;ae=A[q]}_.setParent(O,ae),O=_.successors(O)[0]}})}},54058:(E,W,d)=>{"use strict";var m=d(45760),g=d(36456).Graph,S=d(11510);function T(le,Y){var pe={};return m.reduce(Y,function we(Le,b){var Ge=0,ut=0,ze=Le.length,Ne=m.last(b);return m.forEach(b,function(Re,nt){var Ke=function I(le,Y){if(le.node(Y).dummy)return m.find(le.predecessors(Y),function(pe){return le.node(pe).dummy})}(le,Re),mt=Ke?le.node(Ke).order:ze;(Ke||Re===Ne)&&(m.forEach(b.slice(ut,nt+1),function(_t){m.forEach(le.predecessors(_t),function(pt){var Kt=le.node(pt),an=Kt.order;(an<Ge||mt<an)&&(!Kt.dummy||!le.node(_t).dummy)&&O(pe,pt,_t)})}),ut=nt+1,Ge=mt)}),b}),pe}function _(le,Y){var pe={};function we(b,Ge,ut,ze,Ne){var Re;m.forEach(m.range(Ge,ut),function(nt){le.node(Re=b[nt]).dummy&&m.forEach(le.predecessors(Re),function(Ke){var mt=le.node(Ke);mt.dummy&&(mt.order<ze||mt.order>Ne)&&O(pe,Ke,Re)})})}return m.reduce(Y,function Le(b,Ge){var ze,ut=-1,Ne=0;return m.forEach(Ge,function(Re,nt){if("border"===le.node(Re).dummy){var Ke=le.predecessors(Re);Ke.length&&(ze=le.node(Ke[0]).order,we(Ge,Ne,nt,ut,ze),Ne=nt,ut=ze)}we(Ge,Ne,Ge.length,ze,b.length)}),Ge}),pe}function O(le,Y,pe){if(Y>pe){var we=Y;Y=pe,pe=we}var Le=le[Y];Le||(le[Y]=Le={}),Le[pe]=!0}function k(le,Y,pe){if(Y>pe){var we=Y;Y=pe,pe=we}return m.has(le[Y],pe)}function R(le,Y,pe,we){var Le={},b={},Ge={};return m.forEach(Y,function(ut){m.forEach(ut,function(ze,Ne){Le[ze]=ze,b[ze]=ze,Ge[ze]=Ne})}),m.forEach(Y,function(ut){var ze=-1;m.forEach(ut,function(Ne){var Re=we(Ne);if(Re.length)for(var nt=((Re=m.sortBy(Re,function(pt){return Ge[pt]})).length-1)/2,Ke=Math.floor(nt),mt=Math.ceil(nt);Ke<=mt;++Ke){var _t=Re[Ke];b[Ne]===Ne&&ze<Ge[_t]&&!k(pe,Ne,_t)&&(b[_t]=Ne,b[Ne]=Le[Ne]=Le[_t],ze=Ge[_t])}})}),{root:Le,align:b}}function B(le,Y,pe,we,Le){var b={},Ge=function A(le,Y,pe,we){var Le=new g,b=le.graph(),Ge=function se(le,Y,pe){return function(we,Le,b){var Ne,Ge=we.node(Le),ut=we.node(b),ze=0;if(ze+=Ge.width/2,m.has(Ge,"labelpos"))switch(Ge.labelpos.toLowerCase()){case"l":Ne=-Ge.width/2;break;case"r":Ne=Ge.width/2}if(Ne&&(ze+=pe?Ne:-Ne),Ne=0,ze+=(Ge.dummy?Y:le)/2,ze+=(ut.dummy?Y:le)/2,ze+=ut.width/2,m.has(ut,"labelpos"))switch(ut.labelpos.toLowerCase()){case"l":Ne=ut.width/2;break;case"r":Ne=-ut.width/2}return Ne&&(ze+=pe?Ne:-Ne),Ne=0,ze}}(b.nodesep,b.edgesep,we);return m.forEach(Y,function(ut){var ze;m.forEach(ut,function(Ne){var Re=pe[Ne];if(Le.setNode(Re),ze){var nt=pe[ze],Ke=Le.edge(nt,Re);Le.setEdge(nt,Re,Math.max(Ge(le,Ne,ze),Ke||0))}ze=Ne})}),Le}(le,Y,pe,Le),ut=Le?"borderLeft":"borderRight";function ze(nt,Ke){for(var mt=Ge.nodes(),_t=mt.pop(),pt={};_t;)pt[_t]?nt(_t):(pt[_t]=!0,mt.push(_t),mt=mt.concat(Ke(_t))),_t=mt.pop()}return ze(function Ne(nt){b[nt]=Ge.inEdges(nt).reduce(function(Ke,mt){return Math.max(Ke,b[mt.v]+Ge.edge(mt))},0)},Ge.predecessors.bind(Ge)),ze(function Re(nt){var Ke=Ge.outEdges(nt).reduce(function(_t,pt){return Math.min(_t,b[pt.w]-Ge.edge(pt))},Number.POSITIVE_INFINITY),mt=le.node(nt);Ke!==Number.POSITIVE_INFINITY&&mt.borderType!==ut&&(b[nt]=Math.max(b[nt],Ke))},Ge.successors.bind(Ge)),m.forEach(we,function(nt){b[nt]=b[pe[nt]]}),b}function K(le,Y){return m.minBy(m.values(Y),function(pe){var we=Number.NEGATIVE_INFINITY,Le=Number.POSITIVE_INFINITY;return m.forIn(pe,function(b,Ge){var ut=function ce(le,Y){return le.node(Y).width}(le,Ge)/2;we=Math.max(b+ut,we),Le=Math.min(b-ut,Le)}),we-Le})}function q(le,Y){var pe=m.values(Y),we=m.min(pe),Le=m.max(pe);m.forEach(["u","d"],function(b){m.forEach(["l","r"],function(Ge){var Ne,ut=b+Ge,ze=le[ut];if(ze!==Y){var Re=m.values(ze);(Ne="l"===Ge?we-m.min(Re):Le-m.max(Re))&&(le[ut]=m.mapValues(ze,function(nt){return nt+Ne}))}})})}function ae(le,Y){return m.mapValues(le.ul,function(pe,we){if(Y)return le[Y.toLowerCase()][we];var Le=m.sortBy(m.map(le,we));return(Le[1]+Le[2])/2})}E.exports={positionX:function n(le){var Le,Y=S.buildLayerMatrix(le),pe=m.merge(T(le,Y),_(le,Y)),we={};m.forEach(["u","d"],function(Ge){Le="u"===Ge?Y:m.values(Y).reverse(),m.forEach(["l","r"],function(ut){"r"===ut&&(Le=m.map(Le,function(nt){return m.values(nt).reverse()}));var ze=("u"===Ge?le.predecessors:le.successors).bind(le),Ne=R(0,Le,pe,ze),Re=B(le,Le,Ne.root,Ne.align,"r"===ut);"r"===ut&&(Re=m.mapValues(Re,function(nt){return-nt})),we[Ge+ut]=Re})});var b=K(le,we);return q(we,b),ae(we,le.graph().align)},findType1Conflicts:T,findType2Conflicts:_,addConflict:O,hasConflict:k,verticalAlignment:R,horizontalCompaction:B,alignCoordinates:q,findSmallestWidthAlignment:K,balance:ae}},78226:(E,W,d)=>{"use strict";var m=d(45760),g=d(11510),S=d(54058).positionX;E.exports=function T(I){(function _(I){var O=g.buildLayerMatrix(I),k=I.graph().ranksep,R=0;m.forEach(O,function(B){var A=m.max(m.map(B,function(K){return I.node(K).height}));m.forEach(B,function(K){I.node(K).y=R+A/2}),R+=A+k})})(I=g.asNonCompoundGraph(I)),m.forEach(S(I),function(O,k){I.node(k).x=O})}},96632:(E,W,d)=>{"use strict";var m=d(45760),g=d(36456).Graph,S=d(1916).slack;function _(k,R){return m.forEach(k.nodes(),function B(A){m.forEach(R.nodeEdges(A),function(K){var q=K.v,ae=A===q?K.w:q;!k.hasNode(ae)&&!S(R,K)&&(k.setNode(ae,{}),k.setEdge(A,ae,{}),B(ae))})}),k.nodeCount()}function I(k,R){return m.minBy(R.edges(),function(B){if(k.hasNode(B.v)!==k.hasNode(B.w))return S(R,B)})}function O(k,R,B){m.forEach(k.nodes(),function(A){R.node(A).rank+=B})}E.exports=function T(k){var K,q,R=new g({directed:!1}),B=k.nodes()[0],A=k.nodeCount();for(R.setNode(B,{});_(R,k)<A;)K=I(R,k),q=R.hasNode(K.v)?S(k,K):-S(k,K),O(R,k,q);return R}},94124:(E,W,d)=>{"use strict";var g=d(1916).longestPath,S=d(96632),T=d(63804);E.exports=function _(R){switch(R.graph().ranker){case"network-simplex":default:!function k(R){T(R)}(R);break;case"tight-tree":!function O(R){g(R),S(R)}(R);break;case"longest-path":I(R)}};var I=g},63804:(E,W,d)=>{"use strict";var m=d(45760),g=d(96632),S=d(1916).slack,T=d(1916).longestPath,_=d(36456).alg.preorder,I=d(36456).alg.postorder,O=d(11510).simplify;function k(pe){pe=O(pe),T(pe);var Le,we=g(pe);for(K(we),R(we,pe);Le=ae(we);)se(we,pe,Le,n(we,pe,Le))}function R(pe,we){var Le=I(pe,pe.nodes());Le=Le.slice(0,Le.length-1),m.forEach(Le,function(b){!function B(pe,we,Le){var b=pe.node(Le);pe.edge(Le,b.parent).cutvalue=A(pe,we,Le)}(pe,we,b)})}function A(pe,we,Le){var Ge=pe.node(Le).parent,ut=!0,ze=we.edge(Le,Ge),Ne=0;return ze||(ut=!1,ze=we.edge(Ge,Le)),Ne=ze.weight,m.forEach(we.nodeEdges(Le),function(Re){var nt=Re.v===Le,Ke=nt?Re.w:Re.v;if(Ke!==Ge){var mt=nt===ut,_t=we.edge(Re).weight;if(Ne+=mt?_t:-_t,function le(pe,we,Le){return pe.hasEdge(we,Le)}(pe,Le,Ke)){var pt=pe.edge(Le,Ke).cutvalue;Ne+=mt?-pt:pt}}}),Ne}function K(pe,we){arguments.length<2&&(we=pe.nodes()[0]),q(pe,{},1,we)}function q(pe,we,Le,b,Ge){var ut=Le,ze=pe.node(b);return we[b]=!0,m.forEach(pe.neighbors(b),function(Ne){m.has(we,Ne)||(Le=q(pe,we,Le,Ne,b))}),ze.low=ut,ze.lim=Le++,Ge?ze.parent=Ge:delete ze.parent,Le}function ae(pe){return m.find(pe.edges(),function(we){return pe.edge(we).cutvalue<0})}function n(pe,we,Le){var b=Le.v,Ge=Le.w;we.hasEdge(b,Ge)||(b=Le.w,Ge=Le.v);var ut=pe.node(b),ze=pe.node(Ge),Ne=ut,Re=!1;ut.lim>ze.lim&&(Ne=ze,Re=!0);var nt=m.filter(we.edges(),function(Ke){return Re===Y(0,pe.node(Ke.v),Ne)&&Re!==Y(0,pe.node(Ke.w),Ne)});return m.minBy(nt,function(Ke){return S(we,Ke)})}function se(pe,we,Le,b){pe.removeEdge(Le.v,Le.w),pe.setEdge(b.v,b.w,{}),K(pe),R(pe,we),function ce(pe,we){var Le=m.find(pe.nodes(),function(Ge){return!we.node(Ge).parent}),b=_(pe,Le);b=b.slice(1),m.forEach(b,function(Ge){var ut=pe.node(Ge).parent,ze=we.edge(Ge,ut),Ne=!1;ze||(ze=we.edge(ut,Ge),Ne=!0),we.node(Ge).rank=we.node(ut).rank+(Ne?ze.minlen:-ze.minlen)})}(pe,we)}function Y(pe,we,Le){return Le.low<=we.lim&&we.lim<=Le.lim}E.exports=k,k.initLowLimValues=K,k.initCutValues=R,k.calcCutValue=A,k.leaveEdge=ae,k.enterEdge=n,k.exchangeEdges=se},1916:(E,W,d)=>{"use strict";var m=d(45760);E.exports={longestPath:function g(T){var _={};m.forEach(T.sources(),function I(O){var k=T.node(O);if(m.has(_,O))return k.rank;_[O]=!0;var R=m.min(m.map(T.outEdges(O),function(B){return I(B.w)-T.edge(B).minlen}));return(R===Number.POSITIVE_INFINITY||null==R)&&(R=0),k.rank=R})},slack:function S(T,_){return T.node(_.w).rank-T.node(_.v).rank-T.edge(_).minlen}}},11510:(E,W,d)=>{"use strict";var m=d(45760),g=d(36456).Graph;function S(ce,le,Y,pe){var we;do{we=m.uniqueId(pe)}while(ce.hasNode(we));return Y.dummy=le,ce.setNode(we,Y),we}function q(ce){return m.max(m.map(ce.nodes(),function(le){var Y=ce.node(le).rank;if(!m.isUndefined(Y))return Y}))}E.exports={addDummyNode:S,simplify:function T(ce){var le=(new g).setGraph(ce.graph());return m.forEach(ce.nodes(),function(Y){le.setNode(Y,ce.node(Y))}),m.forEach(ce.edges(),function(Y){var pe=le.edge(Y.v,Y.w)||{weight:0,minlen:1},we=ce.edge(Y);le.setEdge(Y.v,Y.w,{weight:pe.weight+we.weight,minlen:Math.max(pe.minlen,we.minlen)})}),le},asNonCompoundGraph:function _(ce){var le=new g({multigraph:ce.isMultigraph()}).setGraph(ce.graph());return m.forEach(ce.nodes(),function(Y){ce.children(Y).length||le.setNode(Y,ce.node(Y))}),m.forEach(ce.edges(),function(Y){le.setEdge(Y,ce.edge(Y))}),le},successorWeights:function I(ce){var le=m.map(ce.nodes(),function(Y){var pe={};return m.forEach(ce.outEdges(Y),function(we){pe[we.w]=(pe[we.w]||0)+ce.edge(we).weight}),pe});return m.zipObject(ce.nodes(),le)},predecessorWeights:function O(ce){var le=m.map(ce.nodes(),function(Y){var pe={};return m.forEach(ce.inEdges(Y),function(we){pe[we.v]=(pe[we.v]||0)+ce.edge(we).weight}),pe});return m.zipObject(ce.nodes(),le)},intersectRect:function k(ce,le){var ut,ze,Y=ce.x,pe=ce.y,we=le.x-Y,Le=le.y-pe,b=ce.width/2,Ge=ce.height/2;if(!we&&!Le)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Le)*b>Math.abs(we)*Ge?(Le<0&&(Ge=-Ge),ut=Ge*we/Le,ze=Ge):(we<0&&(b=-b),ut=b,ze=b*Le/we),{x:Y+ut,y:pe+ze}},buildLayerMatrix:function R(ce){var le=m.map(m.range(q(ce)+1),function(){return[]});return m.forEach(ce.nodes(),function(Y){var pe=ce.node(Y),we=pe.rank;m.isUndefined(we)||(le[we][pe.order]=Y)}),le},normalizeRanks:function B(ce){var le=m.min(m.map(ce.nodes(),function(Y){return ce.node(Y).rank}));m.forEach(ce.nodes(),function(Y){var pe=ce.node(Y);m.has(pe,"rank")&&(pe.rank-=le)})},removeEmptyRanks:function A(ce){var le=m.min(m.map(ce.nodes(),function(Le){return ce.node(Le).rank})),Y=[];m.forEach(ce.nodes(),function(Le){var b=ce.node(Le).rank-le;Y[b]||(Y[b]=[]),Y[b].push(Le)});var pe=0,we=ce.graph().nodeRankFactor;m.forEach(Y,function(Le,b){m.isUndefined(Le)&&b%we!=0?--pe:pe&&m.forEach(Le,function(Ge){ce.node(Ge).rank+=pe})})},addBorderNode:function K(ce,le,Y,pe){var we={width:0,height:0};return arguments.length>=4&&(we.rank=Y,we.order=pe),S(ce,"border",we,le)},maxRank:q,partition:function ae(ce,le){var Y={lhs:[],rhs:[]};return m.forEach(ce,function(pe){le(pe)?Y.lhs.push(pe):Y.rhs.push(pe)}),Y},time:function n(ce,le){var Y=m.now();try{return le()}finally{console.log(ce+" time: "+(m.now()-Y)+"ms")}},notime:function se(ce,le){return le()}}},28126:E=>{E.exports="0.8.5"},71764:function(E){E.exports=function(){"use strict";var d=6e4,m=36e5,g="millisecond",S="second",T="minute",_="hour",I="day",O="week",k="month",R="quarter",B="year",A="date",K="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ae=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,n={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ze){var Ne=["th","st","nd","rd"],Re=ze%100;return"["+ze+(Ne[(Re-20)%10]||Ne[Re]||Ne[0])+"]"}},se=function(ze,Ne,Re){var nt=String(ze);return!nt||nt.length>=Ne?ze:""+Array(Ne+1-nt.length).join(Re)+ze},ce={s:se,z:function(ze){var Ne=-ze.utcOffset(),Re=Math.abs(Ne),nt=Math.floor(Re/60),Ke=Re%60;return(Ne<=0?"+":"-")+se(nt,2,"0")+":"+se(Ke,2,"0")},m:function ze(Ne,Re){if(Ne.date()<Re.date())return-ze(Re,Ne);var nt=12*(Re.year()-Ne.year())+(Re.month()-Ne.month()),Ke=Ne.clone().add(nt,k),mt=Re-Ke<0,_t=Ne.clone().add(nt+(mt?-1:1),k);return+(-(nt+(Re-Ke)/(mt?Ke-_t:_t-Ke))||0)},a:function(ze){return ze<0?Math.ceil(ze)||0:Math.floor(ze)},p:function(ze){return{M:k,y:B,w:O,d:I,D:A,h:_,m:T,s:S,ms:g,Q:R}[ze]||String(ze||"").toLowerCase().replace(/s$/,"")},u:function(ze){return void 0===ze}},le="en",Y={};Y[le]=n;var pe=function(ze){return ze instanceof Ge},we=function ze(Ne,Re,nt){var Ke;if(!Ne)return le;if("string"==typeof Ne){var mt=Ne.toLowerCase();Y[mt]&&(Ke=mt),Re&&(Y[mt]=Re,Ke=mt);var _t=Ne.split("-");if(!Ke&&_t.length>1)return ze(_t[0])}else{var pt=Ne.name;Y[pt]=Ne,Ke=pt}return!nt&&Ke&&(le=Ke),Ke||!nt&&le},Le=function(ze,Ne){if(pe(ze))return ze.clone();var Re="object"==typeof Ne?Ne:{};return Re.date=ze,Re.args=arguments,new Ge(Re)},b=ce;b.l=we,b.i=pe,b.w=function(ze,Ne){return Le(ze,{locale:Ne.$L,utc:Ne.$u,x:Ne.$x,$offset:Ne.$offset})};var Ge=function(){function ze(Re){this.$L=we(Re.locale,null,!0),this.parse(Re)}var Ne=ze.prototype;return Ne.parse=function(Re){this.$d=function(nt){var Ke=nt.date,mt=nt.utc;if(null===Ke)return new Date(NaN);if(b.u(Ke))return new Date;if(Ke instanceof Date)return new Date(Ke);if("string"==typeof Ke&&!/Z$/i.test(Ke)){var _t=Ke.match(q);if(_t){var pt=_t[2]-1||0,Kt=(_t[7]||"0").substring(0,3);return mt?new Date(Date.UTC(_t[1],pt,_t[3]||1,_t[4]||0,_t[5]||0,_t[6]||0,Kt)):new Date(_t[1],pt,_t[3]||1,_t[4]||0,_t[5]||0,_t[6]||0,Kt)}}return new Date(Ke)}(Re),this.$x=Re.x||{},this.init()},Ne.init=function(){var Re=this.$d;this.$y=Re.getFullYear(),this.$M=Re.getMonth(),this.$D=Re.getDate(),this.$W=Re.getDay(),this.$H=Re.getHours(),this.$m=Re.getMinutes(),this.$s=Re.getSeconds(),this.$ms=Re.getMilliseconds()},Ne.$utils=function(){return b},Ne.isValid=function(){return this.$d.toString()!==K},Ne.isSame=function(Re,nt){var Ke=Le(Re);return this.startOf(nt)<=Ke&&Ke<=this.endOf(nt)},Ne.isAfter=function(Re,nt){return Le(Re)<this.startOf(nt)},Ne.isBefore=function(Re,nt){return this.endOf(nt)<Le(Re)},Ne.$g=function(Re,nt,Ke){return b.u(Re)?this[nt]:this.set(Ke,Re)},Ne.unix=function(){return Math.floor(this.valueOf()/1e3)},Ne.valueOf=function(){return this.$d.getTime()},Ne.startOf=function(Re,nt){var Ke=this,mt=!!b.u(nt)||nt,_t=b.p(Re),pt=function(We,Ze){var ft=b.w(Ke.$u?Date.UTC(Ke.$y,Ze,We):new Date(Ke.$y,Ze,We),Ke);return mt?ft:ft.endOf(I)},Kt=function(We,Ze){return b.w(Ke.toDate()[We].apply(Ke.toDate("s"),(mt?[0,0,0,0]:[23,59,59,999]).slice(Ze)),Ke)},an=this.$W,jn=this.$M,Zn=this.$D,zn="set"+(this.$u?"UTC":"");switch(_t){case B:return mt?pt(1,0):pt(31,11);case k:return mt?pt(1,jn):pt(0,jn+1);case O:var dr=this.$locale().weekStart||0,Xn=(an<dr?an+7:an)-dr;return pt(mt?Zn-Xn:Zn+(6-Xn),jn);case I:case A:return Kt(zn+"Hours",0);case _:return Kt(zn+"Minutes",1);case T:return Kt(zn+"Seconds",2);case S:return Kt(zn+"Milliseconds",3);default:return this.clone()}},Ne.endOf=function(Re){return this.startOf(Re,!1)},Ne.$set=function(Re,nt){var Ke,mt=b.p(Re),_t="set"+(this.$u?"UTC":""),pt=(Ke={},Ke[I]=_t+"Date",Ke[A]=_t+"Date",Ke[k]=_t+"Month",Ke[B]=_t+"FullYear",Ke[_]=_t+"Hours",Ke[T]=_t+"Minutes",Ke[S]=_t+"Seconds",Ke[g]=_t+"Milliseconds",Ke)[mt],Kt=mt===I?this.$D+(nt-this.$W):nt;if(mt===k||mt===B){var an=this.clone().set(A,1);an.$d[pt](Kt),an.init(),this.$d=an.set(A,Math.min(this.$D,an.daysInMonth())).$d}else pt&&this.$d[pt](Kt);return this.init(),this},Ne.set=function(Re,nt){return this.clone().$set(Re,nt)},Ne.get=function(Re){return this[b.p(Re)]()},Ne.add=function(Re,nt){var Ke,mt=this;Re=Number(Re);var _t=b.p(nt),pt=function(jn){var Zn=Le(mt);return b.w(Zn.date(Zn.date()+Math.round(jn*Re)),mt)};if(_t===k)return this.set(k,this.$M+Re);if(_t===B)return this.set(B,this.$y+Re);if(_t===I)return pt(1);if(_t===O)return pt(7);var Kt=(Ke={},Ke[T]=d,Ke[_]=m,Ke[S]=1e3,Ke)[_t]||1,an=this.$d.getTime()+Re*Kt;return b.w(an,this)},Ne.subtract=function(Re,nt){return this.add(-1*Re,nt)},Ne.format=function(Re){var nt=this,Ke=this.$locale();if(!this.isValid())return Ke.invalidDate||K;var mt=Re||"YYYY-MM-DDTHH:mm:ssZ",_t=b.z(this),pt=this.$H,Kt=this.$m,an=this.$M,jn=Ke.weekdays,Zn=Ke.months,zn=function(Ze,ft,xt,At){return Ze&&(Ze[ft]||Ze(nt,mt))||xt[ft].slice(0,At)},dr=function(Ze){return b.s(pt%12||12,Ze,"0")},Xn=Ke.meridiem||function(Ze,ft,xt){var At=Ze<12?"AM":"PM";return xt?At.toLowerCase():At},We={YY:String(this.$y).slice(-2),YYYY:this.$y,M:an+1,MM:b.s(an+1,2,"0"),MMM:zn(Ke.monthsShort,an,Zn,3),MMMM:zn(Zn,an),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:zn(Ke.weekdaysMin,this.$W,jn,2),ddd:zn(Ke.weekdaysShort,this.$W,jn,3),dddd:jn[this.$W],H:String(pt),HH:b.s(pt,2,"0"),h:dr(1),hh:dr(2),a:Xn(pt,Kt,!0),A:Xn(pt,Kt,!1),m:String(Kt),mm:b.s(Kt,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:_t};return mt.replace(ae,function(Ze,ft){return ft||We[Ze]||_t.replace(":","")})},Ne.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ne.diff=function(Re,nt,Ke){var mt,_t=b.p(nt),pt=Le(Re),Kt=(pt.utcOffset()-this.utcOffset())*d,an=this-pt,jn=b.m(this,pt);return jn=(mt={},mt[B]=jn/12,mt[k]=jn,mt[R]=jn/3,mt[O]=(an-Kt)/6048e5,mt[I]=(an-Kt)/864e5,mt[_]=an/m,mt[T]=an/d,mt[S]=an/1e3,mt)[_t]||an,Ke?jn:b.a(jn)},Ne.daysInMonth=function(){return this.endOf(k).$D},Ne.$locale=function(){return Y[this.$L]},Ne.locale=function(Re,nt){if(!Re)return this.$L;var Ke=this.clone(),mt=we(Re,nt,!0);return mt&&(Ke.$L=mt),Ke},Ne.clone=function(){return b.w(this.$d,this)},Ne.toDate=function(){return new Date(this.valueOf())},Ne.toJSON=function(){return this.isValid()?this.toISOString():null},Ne.toISOString=function(){return this.$d.toISOString()},Ne.toString=function(){return this.$d.toUTCString()},ze}(),ut=Ge.prototype;return Le.prototype=ut,[["$ms",g],["$s",S],["$m",T],["$H",_],["$W",I],["$M",k],["$y",B],["$D",A]].forEach(function(ze){ut[ze[1]]=function(Ne){return this.$g(Ne,ze[0],ze[1])}}),Le.extend=function(ze,Ne){return ze.$i||(ze(Ne,Ge,Le),ze.$i=!0),Le},Le.locale=we,Le.isDayjs=pe,Le.unix=function(ze){return Le(1e3*ze)},Le.en=Y[le],Le.Ls=Y,Le.p={},Le}()},72243:function(E){E.exports=function(){"use strict";return function(W,d,m){W=W||{};var g=d.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function T(I,O,k,R){return g.fromToBase(I,O,k,R)}m.en.relativeTime=S,g.fromToBase=function(I,O,k,R,B){for(var A,K,q,ae=k.$locale().relativeTime||S,n=W.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],se=n.length,ce=0;ce<se;ce+=1){var le=n[ce];le.d&&(A=R?m(I).diff(k,le.d,!0):k.diff(I,le.d,!0));var Y=(W.rounding||Math.round)(Math.abs(A));if(q=A>0,Y<=le.r||!le.r){Y<=1&&ce>0&&(le=n[ce-1]);var pe=ae[le.l];B&&(Y=B(""+Y)),K="string"==typeof pe?pe.replace("%d",Y):pe(Y,O,le.l,q);break}}if(O)return K;var we=q?ae.future:ae.past;return"function"==typeof we?we(K):we.replace("%s",K)},g.to=function(I,O){return T(I,O,this,!0)},g.from=function(I,O){return T(I,O,this)};var _=function(I){return I.$u?m.utc():m()};g.toNow=function(I){return this.to(_(this),I)},g.fromNow=function(I){return this.from(_(this),I)}}}()},85510:(E,W,d)=>{var m=d(51838);E.exports={Graph:m.Graph,json:d(21088),alg:d(83430),version:m.version}},86730:(E,W,d)=>{var m=d(79138);E.exports=function g(S){var I,T={},_=[];function O(k){m.has(T,k)||(T[k]=!0,I.push(k),m.each(S.successors(k),O),m.each(S.predecessors(k),O))}return m.each(S.nodes(),function(k){I=[],O(k),I.length&&_.push(I)}),_}},22163:(E,W,d)=>{var m=d(79138);function S(T,_,I,O,k,R){m.has(O,_)||(O[_]=!0,I||R.push(_),m.each(k(_),function(B){S(T,B,I,O,k,R)}),I&&R.push(_))}E.exports=function g(T,_,I){m.isArray(_)||(_=[_]);var O=(T.isDirected()?T.successors:T.neighbors).bind(T),k=[],R={};return m.each(_,function(B){if(!T.hasNode(B))throw new Error("Graph does not have node: "+B);S(T,B,"post"===I,R,O,k)}),k}},25668:(E,W,d)=>{var m=d(61718),g=d(79138);E.exports=function S(T,_,I){return g.transform(T.nodes(),function(O,k){O[k]=m(T,k,_,I)},{})}},61718:(E,W,d)=>{var m=d(79138),g=d(31919);E.exports=function T(I,O,k,R){return function _(I,O,k,R){var K,q,B={},A=new g,ae=function(n){var se=n.v!==K?n.v:n.w,ce=B[se],le=k(n),Y=q.distance+le;if(le<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+n+" Weight: "+le);Y<ce.distance&&(ce.distance=Y,ce.predecessor=K,A.decrease(se,Y))};for(I.nodes().forEach(function(n){var se=n===O?0:Number.POSITIVE_INFINITY;B[n]={distance:se},A.add(n,se)});A.size()>0&&(K=A.removeMin(),(q=B[K]).distance!==Number.POSITIVE_INFINITY);)R(K).forEach(ae);return B}(I,String(O),k||S,R||function(B){return I.outEdges(B)})};var S=m.constant(1)},9611:(E,W,d)=>{var m=d(79138),g=d(73585);E.exports=function S(T){return m.filter(g(T),function(_){return _.length>1||1===_.length&&T.hasEdge(_[0],_[0])})}},22881:(E,W,d)=>{var m=d(79138);E.exports=function S(_,I,O){return function T(_,I,O){var k={},R=_.nodes();return R.forEach(function(B){k[B]={},k[B][B]={distance:0},R.forEach(function(A){B!==A&&(k[B][A]={distance:Number.POSITIVE_INFINITY})}),O(B).forEach(function(A){var K=A.v===B?A.w:A.v,q=I(A);k[B][K]={distance:q,predecessor:B}})}),R.forEach(function(B){var A=k[B];R.forEach(function(K){var q=k[K];R.forEach(function(ae){var se=A[ae],ce=q[ae],le=q[B].distance+se.distance;le<ce.distance&&(ce.distance=le,ce.predecessor=se.predecessor)})})}),k}(_,I||g,O||function(k){return _.outEdges(k)})};var g=m.constant(1)},83430:(E,W,d)=>{E.exports={components:d(86730),dijkstra:d(61718),dijkstraAll:d(25668),findCycles:d(9611),floydWarshall:d(22881),isAcyclic:d(9366),postorder:d(46694),preorder:d(5330),prim:d(46823),tarjan:d(73585),topsort:d(52180)}},9366:(E,W,d)=>{var m=d(52180);E.exports=function g(S){try{m(S)}catch(T){if(T instanceof m.CycleException)return!1;throw T}return!0}},46694:(E,W,d)=>{var m=d(22163);E.exports=function g(S,T){return m(S,T,"post")}},5330:(E,W,d)=>{var m=d(22163);E.exports=function g(S,T){return m(S,T,"pre")}},46823:(E,W,d)=>{var m=d(79138),g=d(66568),S=d(31919);E.exports=function T(_,I){var B,O=new g,k={},R=new S;function A(q){var ae=q.v===B?q.w:q.v,n=R.priority(ae);if(void 0!==n){var se=I(q);se<n&&(k[ae]=B,R.decrease(ae,se))}}if(0===_.nodeCount())return O;m.each(_.nodes(),function(q){R.add(q,Number.POSITIVE_INFINITY),O.setNode(q)}),R.decrease(_.nodes()[0],0);for(var K=!1;R.size()>0;){if(B=R.removeMin(),m.has(k,B))O.setEdge(B,k[B]);else{if(K)throw new Error("Input graph is not connected: "+_);K=!0}_.nodeEdges(B).forEach(A)}return O}},73585:(E,W,d)=>{var m=d(79138);E.exports=function g(S){var T=0,_=[],I={},O=[];function k(R){var B=I[R]={onStack:!0,lowlink:T,index:T++};if(_.push(R),S.successors(R).forEach(function(q){m.has(I,q)?I[q].onStack&&(B.lowlink=Math.min(B.lowlink,I[q].index)):(k(q),B.lowlink=Math.min(B.lowlink,I[q].lowlink))}),B.lowlink===B.index){var K,A=[];do{K=_.pop(),I[K].onStack=!1,A.push(K)}while(R!==K);O.push(A)}}return S.nodes().forEach(function(R){m.has(I,R)||k(R)}),O}},52180:(E,W,d)=>{var m=d(79138);function g(T){var _={},I={},O=[];if(m.each(T.sinks(),function k(R){if(m.has(I,R))throw new S;m.has(_,R)||(I[R]=!0,_[R]=!0,m.each(T.predecessors(R),k),delete I[R],O.push(R))}),m.size(_)!==T.nodeCount())throw new S;return O}function S(){}E.exports=g,g.CycleException=S,S.prototype=new Error},31919:(E,W,d)=>{var m=d(79138);function g(){this._arr=[],this._keyIndices={}}E.exports=g,g.prototype.size=function(){return this._arr.length},g.prototype.keys=function(){return this._arr.map(function(S){return S.key})},g.prototype.has=function(S){return m.has(this._keyIndices,S)},g.prototype.priority=function(S){var T=this._keyIndices[S];if(void 0!==T)return this._arr[T].priority},g.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},g.prototype.add=function(S,T){var _=this._keyIndices;if(S=String(S),!m.has(_,S)){var I=this._arr,O=I.length;return _[S]=O,I.push({key:S,priority:T}),this._decrease(O),!0}return!1},g.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},g.prototype.decrease=function(S,T){var _=this._keyIndices[S];if(T>this._arr[_].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[_].priority+" New: "+T);this._arr[_].priority=T,this._decrease(_)},g.prototype._heapify=function(S){var T=this._arr,_=2*S,I=_+1,O=S;_<T.length&&(O=T[_].priority<T[O].priority?_:O,I<T.length&&(O=T[I].priority<T[O].priority?I:O),O!==S&&(this._swap(S,O),this._heapify(O)))},g.prototype._decrease=function(S){for(var I,T=this._arr,_=T[S].priority;0!==S&&!(T[I=S>>1].priority<_);)this._swap(S,I),S=I},g.prototype._swap=function(S,T){var _=this._arr,I=this._keyIndices,O=_[S],k=_[T];_[S]=k,_[T]=O,I[k.key]=S,I[O.key]=T}},66568:(E,W,d)=>{"use strict";var m=d(79138);E.exports=_;var S="\0";function _(A){this._isDirected=!m.has(A,"directed")||A.directed,this._isMultigraph=!!m.has(A,"multigraph")&&A.multigraph,this._isCompound=!!m.has(A,"compound")&&A.compound,this._label=void 0,this._defaultNodeLabelFn=m.constant(void 0),this._defaultEdgeLabelFn=m.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function I(A,K){A[K]?A[K]++:A[K]=1}function O(A,K){--A[K]||delete A[K]}function k(A,K,q,ae){var n=""+K,se=""+q;if(!A&&n>se){var ce=n;n=se,se=ce}return n+"\x01"+se+"\x01"+(m.isUndefined(ae)?"\0":ae)}function R(A,K,q,ae){var n=""+K,se=""+q;if(!A&&n>se){var ce=n;n=se,se=ce}var le={v:n,w:se};return ae&&(le.name=ae),le}function B(A,K){return k(A,K.v,K.w,K.name)}_.prototype._nodeCount=0,_.prototype._edgeCount=0,_.prototype.isDirected=function(){return this._isDirected},_.prototype.isMultigraph=function(){return this._isMultigraph},_.prototype.isCompound=function(){return this._isCompound},_.prototype.setGraph=function(A){return this._label=A,this},_.prototype.graph=function(){return this._label},_.prototype.setDefaultNodeLabel=function(A){return m.isFunction(A)||(A=m.constant(A)),this._defaultNodeLabelFn=A,this},_.prototype.nodeCount=function(){return this._nodeCount},_.prototype.nodes=function(){return m.keys(this._nodes)},_.prototype.sources=function(){var A=this;return m.filter(this.nodes(),function(K){return m.isEmpty(A._in[K])})},_.prototype.sinks=function(){var A=this;return m.filter(this.nodes(),function(K){return m.isEmpty(A._out[K])})},_.prototype.setNodes=function(A,K){var q=arguments,ae=this;return m.each(A,function(n){q.length>1?ae.setNode(n,K):ae.setNode(n)}),this},_.prototype.setNode=function(A,K){return m.has(this._nodes,A)?(arguments.length>1&&(this._nodes[A]=K),this):(this._nodes[A]=arguments.length>1?K:this._defaultNodeLabelFn(A),this._isCompound&&(this._parent[A]=S,this._children[A]={},this._children[S][A]=!0),this._in[A]={},this._preds[A]={},this._out[A]={},this._sucs[A]={},++this._nodeCount,this)},_.prototype.node=function(A){return this._nodes[A]},_.prototype.hasNode=function(A){return m.has(this._nodes,A)},_.prototype.removeNode=function(A){var K=this;if(m.has(this._nodes,A)){var q=function(ae){K.removeEdge(K._edgeObjs[ae])};delete this._nodes[A],this._isCompound&&(this._removeFromParentsChildList(A),delete this._parent[A],m.each(this.children(A),function(ae){K.setParent(ae)}),delete this._children[A]),m.each(m.keys(this._in[A]),q),delete this._in[A],delete this._preds[A],m.each(m.keys(this._out[A]),q),delete this._out[A],delete this._sucs[A],--this._nodeCount}return this},_.prototype.setParent=function(A,K){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(m.isUndefined(K))K=S;else{for(var q=K+="";!m.isUndefined(q);q=this.parent(q))if(q===A)throw new Error("Setting "+K+" as parent of "+A+" would create a cycle");this.setNode(K)}return this.setNode(A),this._removeFromParentsChildList(A),this._parent[A]=K,this._children[K][A]=!0,this},_.prototype._removeFromParentsChildList=function(A){delete this._children[this._parent[A]][A]},_.prototype.parent=function(A){if(this._isCompound){var K=this._parent[A];if(K!==S)return K}},_.prototype.children=function(A){if(m.isUndefined(A)&&(A=S),this._isCompound){var K=this._children[A];if(K)return m.keys(K)}else{if(A===S)return this.nodes();if(this.hasNode(A))return[]}},_.prototype.predecessors=function(A){var K=this._preds[A];if(K)return m.keys(K)},_.prototype.successors=function(A){var K=this._sucs[A];if(K)return m.keys(K)},_.prototype.neighbors=function(A){var K=this.predecessors(A);if(K)return m.union(K,this.successors(A))},_.prototype.isLeaf=function(A){return 0===(this.isDirected()?this.successors(A):this.neighbors(A)).length},_.prototype.filterNodes=function(A){var K=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});K.setGraph(this.graph());var q=this;m.each(this._nodes,function(se,ce){A(ce)&&K.setNode(ce,se)}),m.each(this._edgeObjs,function(se){K.hasNode(se.v)&&K.hasNode(se.w)&&K.setEdge(se,q.edge(se))});var ae={};function n(se){var ce=q.parent(se);return void 0===ce||K.hasNode(ce)?(ae[se]=ce,ce):ce in ae?ae[ce]:n(ce)}return this._isCompound&&m.each(K.nodes(),function(se){K.setParent(se,n(se))}),K},_.prototype.setDefaultEdgeLabel=function(A){return m.isFunction(A)||(A=m.constant(A)),this._defaultEdgeLabelFn=A,this},_.prototype.edgeCount=function(){return this._edgeCount},_.prototype.edges=function(){return m.values(this._edgeObjs)},_.prototype.setPath=function(A,K){var q=this,ae=arguments;return m.reduce(A,function(n,se){return ae.length>1?q.setEdge(n,se,K):q.setEdge(n,se),se}),this},_.prototype.setEdge=function(){var A,K,q,ae,n=!1,se=arguments[0];"object"==typeof se&&null!==se&&"v"in se?(A=se.v,K=se.w,q=se.name,2===arguments.length&&(ae=arguments[1],n=!0)):(A=se,K=arguments[1],q=arguments[3],arguments.length>2&&(ae=arguments[2],n=!0)),A=""+A,K=""+K,m.isUndefined(q)||(q=""+q);var ce=k(this._isDirected,A,K,q);if(m.has(this._edgeLabels,ce))return n&&(this._edgeLabels[ce]=ae),this;if(!m.isUndefined(q)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(A),this.setNode(K),this._edgeLabels[ce]=n?ae:this._defaultEdgeLabelFn(A,K,q);var le=R(this._isDirected,A,K,q);return A=le.v,K=le.w,Object.freeze(le),this._edgeObjs[ce]=le,I(this._preds[K],A),I(this._sucs[A],K),this._in[K][ce]=le,this._out[A][ce]=le,this._edgeCount++,this},_.prototype.edge=function(A,K,q){var ae=1===arguments.length?B(this._isDirected,arguments[0]):k(this._isDirected,A,K,q);return this._edgeLabels[ae]},_.prototype.hasEdge=function(A,K,q){var ae=1===arguments.length?B(this._isDirected,arguments[0]):k(this._isDirected,A,K,q);return m.has(this._edgeLabels,ae)},_.prototype.removeEdge=function(A,K,q){var ae=1===arguments.length?B(this._isDirected,arguments[0]):k(this._isDirected,A,K,q),n=this._edgeObjs[ae];return n&&(A=n.v,K=n.w,delete this._edgeLabels[ae],delete this._edgeObjs[ae],O(this._preds[K],A),O(this._sucs[A],K),delete this._in[K][ae],delete this._out[A][ae],this._edgeCount--),this},_.prototype.inEdges=function(A,K){var q=this._in[A];if(q){var ae=m.values(q);return K?m.filter(ae,function(n){return n.v===K}):ae}},_.prototype.outEdges=function(A,K){var q=this._out[A];if(q){var ae=m.values(q);return K?m.filter(ae,function(n){return n.w===K}):ae}},_.prototype.nodeEdges=function(A,K){var q=this.inEdges(A,K);if(q)return q.concat(this.outEdges(A,K))}},51838:(E,W,d)=>{E.exports={Graph:d(66568),version:d(75089)}},21088:(E,W,d)=>{var m=d(79138),g=d(66568);function T(O){return m.map(O.nodes(),function(k){var R=O.node(k),B=O.parent(k),A={v:k};return m.isUndefined(R)||(A.value=R),m.isUndefined(B)||(A.parent=B),A})}function _(O){return m.map(O.edges(),function(k){var R=O.edge(k),B={v:k.v,w:k.w};return m.isUndefined(k.name)||(B.name=k.name),m.isUndefined(R)||(B.value=R),B})}E.exports={write:function S(O){var k={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:T(O),edges:_(O)};return m.isUndefined(O.graph())||(k.value=m.clone(O.graph())),k},read:function I(O){var k=new g(O.options).setGraph(O.value);return m.each(O.nodes,function(R){k.setNode(R.v,R.value),R.parent&&k.setParent(R.v,R.parent)}),m.each(O.edges,function(R){k.setEdge({v:R.v,w:R.w,name:R.name},R.value)}),k}}},79138:(E,W,d)=>{var m;try{m={clone:d(11094),constant:d(76684),each:d(35474),filter:d(35281),has:d(54842),isArray:d(21503),isEmpty:d(71973),isFunction:d(75946),isUndefined:d(34235),keys:d(118),map:d(19984),reduce:d(81337),size:d(55637),transform:d(89416),union:d(68921),values:d(90377)}}catch(g){}m||(m=window._),E.exports=m},75089:E=>{E.exports="2.1.8"},58259:function(E,W){var m;!function(g,S){"use strict";"object"==typeof E.exports?E.exports=g.document?S(g,!0):function(T){if(!T.document)throw new Error("jQuery requires a window with a document");return S(T)}:S(g)}("undefined"!=typeof window?window:this,function(g,S){"use strict";var T=[],_=Object.getPrototypeOf,I=T.slice,O=T.flat?function(l){return T.flat.call(l)}:function(l){return T.concat.apply([],l)},k=T.push,R=T.indexOf,B={},A=B.toString,K=B.hasOwnProperty,q=K.toString,ae=q.call(Object),n={},se=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},ce=function(h){return null!=h&&h===h.window},le=g.document,Y={type:!0,src:!0,nonce:!0,noModule:!0};function pe(l,h,y){var w,N,H=(y=y||le).createElement("script");if(H.text=l,h)for(w in Y)(N=h[w]||h.getAttribute&&h.getAttribute(w))&&H.setAttribute(w,N);y.head.appendChild(H).parentNode.removeChild(H)}function we(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?B[A.call(l)]||"object":typeof l}var b=function(l,h){return new b.fn.init(l,h)};function Ge(l){var h=!!l&&"length"in l&&l.length,y=we(l);return!se(l)&&!ce(l)&&("array"===y||0===h||"number"==typeof h&&h>0&&h-1 in l)}b.fn=b.prototype={jquery:"3.6.3",constructor:b,length:0,toArray:function(){return I.call(this)},get:function(l){return null==l?I.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var h=b.merge(this.constructor(),l);return h.prevObject=this,h},each:function(l){return b.each(this,l)},map:function(l){return this.pushStack(b.map(this,function(h,y){return l.call(h,y,h)}))},slice:function(){return this.pushStack(I.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(l,h){return(h+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(l,h){return h%2}))},eq:function(l){var h=this.length,y=+l+(l<0?h:0);return this.pushStack(y>=0&&y<h?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:k,sort:T.sort,splice:T.splice},b.extend=b.fn.extend=function(){var l,h,y,w,N,H,X=arguments[0]||{},me=1,de=arguments.length,Ae=!1;for("boolean"==typeof X&&(Ae=X,X=arguments[me]||{},me++),"object"!=typeof X&&!se(X)&&(X={}),me===de&&(X=this,me--);me<de;me++)if(null!=(l=arguments[me]))for(h in l)w=l[h],"__proto__"!==h&&X!==w&&(Ae&&w&&(b.isPlainObject(w)||(N=Array.isArray(w)))?(y=X[h],H=N&&!Array.isArray(y)?[]:N||b.isPlainObject(y)?y:{},N=!1,X[h]=b.extend(Ae,H,w)):void 0!==w&&(X[h]=w));return X},b.extend({expando:"jQuery"+("3.6.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var h,y;return!(!l||"[object Object]"!==A.call(l)||(h=_(l))&&("function"!=typeof(y=K.call(h,"constructor")&&h.constructor)||q.call(y)!==ae))},isEmptyObject:function(l){var h;for(h in l)return!1;return!0},globalEval:function(l,h,y){pe(l,{nonce:h&&h.nonce},y)},each:function(l,h){var y,w=0;if(Ge(l))for(y=l.length;w<y&&!1!==h.call(l[w],w,l[w]);w++);else for(w in l)if(!1===h.call(l[w],w,l[w]))break;return l},makeArray:function(l,h){var y=h||[];return null!=l&&(Ge(Object(l))?b.merge(y,"string"==typeof l?[l]:l):k.call(y,l)),y},inArray:function(l,h,y){return null==h?-1:R.call(h,l,y)},merge:function(l,h){for(var y=+h.length,w=0,N=l.length;w<y;w++)l[N++]=h[w];return l.length=N,l},grep:function(l,h,y){for(var N=[],H=0,X=l.length,me=!y;H<X;H++)!h(l[H],H)!==me&&N.push(l[H]);return N},map:function(l,h,y){var w,N,H=0,X=[];if(Ge(l))for(w=l.length;H<w;H++)null!=(N=h(l[H],H,y))&&X.push(N);else for(H in l)null!=(N=h(l[H],H,y))&&X.push(N);return O(X)},guid:1,support:n}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=T[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,h){B["[object "+h+"]"]=h.toLowerCase()});var ut=function(l){var h,y,w,N,H,X,me,de,Ae,He,dt,De,Je,Ot,zt,kt,pr,Qt,Ir,$n="sizzle"+1*new Date,nn=l.document,qr=0,Fn=0,mr=gs(),fs=gs(),Ga=gs(),ei=gs(),$i=function(ee,fe){return ee===fe&&(dt=!0),0},xa={}.hasOwnProperty,si=[],Fo=si.pop,wi=si.push,Wi=si.push,ba=si.slice,Rn=function(ee,fe){for(var Ce=0,qe=ee.length;Ce<qe;Ce++)if(ee[Ce]===fe)return Ce;return-1},hs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Vn="[\\x20\\t\\r\\n\\f]",Jo="(?:\\\\[\\da-fA-F]{1,6}"+Vn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ds="\\["+Vn+"*("+Jo+")(?:"+Vn+"*([*^$|!~]?=)"+Vn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Jo+"))|)"+Vn+"*\\]",ui=":("+Jo+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ds+")*)|.*)\\)|)",lu=new RegExp(Vn+"+","g"),Zo=new RegExp("^"+Vn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Vn+"+$","g"),Yu=new RegExp("^"+Vn+"*,"+Vn+"*"),cu=new RegExp("^"+Vn+"*([>+~]|"+Vn+")"+Vn+"*"),zl=new RegExp(Vn+"|>"),Ul=new RegExp(ui),qo=new RegExp("^"+Jo+"$"),Yi={ID:new RegExp("^#("+Jo+")"),CLASS:new RegExp("^\\.("+Jo+")"),TAG:new RegExp("^("+Jo+"|[*])"),ATTR:new RegExp("^"+Ds),PSEUDO:new RegExp("^"+ui),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Vn+"*(even|odd|(([+-]|)(\\d*)n|)"+Vn+"*(?:([+-]|)"+Vn+"*(\\d+)|))"+Vn+"*\\)|)","i"),bool:new RegExp("^(?:"+hs+")$","i"),needsContext:new RegExp("^"+Vn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Vn+"*((?:-\\d)?\\d*)"+Vn+"*\\)|)(?=[^-]|$)","i")},Gl=/HTML$/i,$a=/^(?:input|select|textarea|button)$/i,$l=/^h\d$/i,ps=/^[^{]+\{\s*\[native \w/,du=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bs=/[+~]/,ti=new RegExp("\\\\[\\da-fA-F]{1,6}"+Vn+"?|\\\\([^\\r\\n\\f])","g"),Xi=function(ee,fe){var Ce="0x"+ee.slice(1)-65536;return fe||(Ce<0?String.fromCharCode(Ce+65536):String.fromCharCode(Ce>>10|55296,1023&Ce|56320))},ms=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fu=function(ee,fe){return fe?"\0"===ee?"\ufffd":ee.slice(0,-1)+"\\"+ee.charCodeAt(ee.length-1).toString(16)+" ":"\\"+ee},ea=function(){De()},Wa=On(function(ee){return!0===ee.disabled&&"fieldset"===ee.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Wi.apply(si=ba.call(nn.childNodes),nn.childNodes)}catch(ee){Wi={apply:si.length?function(fe,Ce){wi.apply(fe,ba.call(Ce))}:function(fe,Ce){for(var qe=fe.length,be=0;fe[qe++]=Ce[be++];);fe.length=qe-1}}}function yn(ee,fe,Ce,qe){var be,it,ct,yt,wt,Ut,Bt,Vt=fe&&fe.ownerDocument,rn=fe?fe.nodeType:9;if(Ce=Ce||[],"string"!=typeof ee||!ee||1!==rn&&9!==rn&&11!==rn)return Ce;if(!qe&&(De(fe),fe=fe||Je,zt)){if(11!==rn&&(wt=du.exec(ee)))if(be=wt[1]){if(9===rn){if(!(ct=fe.getElementById(be)))return Ce;if(ct.id===be)return Ce.push(ct),Ce}else if(Vt&&(ct=Vt.getElementById(be))&&Ir(fe,ct)&&ct.id===be)return Ce.push(ct),Ce}else{if(wt[2])return Wi.apply(Ce,fe.getElementsByTagName(ee)),Ce;if((be=wt[3])&&y.getElementsByClassName&&fe.getElementsByClassName)return Wi.apply(Ce,fe.getElementsByClassName(be)),Ce}if(y.qsa&&!ei[ee+" "]&&(!kt||!kt.test(ee))&&(1!==rn||"object"!==fe.nodeName.toLowerCase())){if(Bt=ee,Vt=fe,1===rn&&(zl.test(ee)||cu.test(ee))){for(((Vt=Bs.test(ee)&&$e(fe.parentNode)||fe)!==fe||!y.scope)&&((yt=fe.getAttribute("id"))?yt=yt.replace(ms,fu):fe.setAttribute("id",yt=$n)),it=(Ut=X(ee)).length;it--;)Ut[it]=(yt?"#"+yt:":scope")+" "+qt(Ut[it]);Bt=Ut.join(",")}try{if(y.cssSupportsSelector&&!CSS.supports("selector(:is("+Bt+"))"))throw new Error;return Wi.apply(Ce,Vt.querySelectorAll(Bt)),Ce}catch(Kn){ei(ee,!0)}finally{yt===$n&&fe.removeAttribute("id")}}}return de(ee.replace(Zo,"$1"),fe,Ce,qe)}function gs(){var ee=[];return function fe(Ce,qe){return ee.push(Ce+" ")>w.cacheLength&&delete fe[ee.shift()],fe[Ce+" "]=qe}}function to(ee){return ee[$n]=!0,ee}function Ki(ee){var fe=Je.createElement("fieldset");try{return!!ee(fe)}catch(Ce){return!1}finally{fe.parentNode&&fe.parentNode.removeChild(fe),fe=null}}function Xu(ee,fe){for(var Ce=ee.split("|"),qe=Ce.length;qe--;)w.attrHandle[Ce[qe]]=fe}function hu(ee,fe){var Ce=fe&&ee,qe=Ce&&1===ee.nodeType&&1===fe.nodeType&&ee.sourceIndex-fe.sourceIndex;if(qe)return qe;if(Ce)for(;Ce=Ce.nextSibling;)if(Ce===fe)return-1;return ee?1:-1}function Vs(ee){return function(fe){return"input"===fe.nodeName.toLowerCase()&&fe.type===ee}}function pu(ee){return function(fe){var Ce=fe.nodeName.toLowerCase();return("input"===Ce||"button"===Ce)&&fe.type===ee}}function Ee(ee){return function(fe){return"form"in fe?fe.parentNode&&!1===fe.disabled?"label"in fe?"label"in fe.parentNode?fe.parentNode.disabled===ee:fe.disabled===ee:fe.isDisabled===ee||fe.isDisabled!==!ee&&Wa(fe)===ee:fe.disabled===ee:"label"in fe&&fe.disabled===ee}}function Ue(ee){return to(function(fe){return fe=+fe,to(function(Ce,qe){for(var be,it=ee([],Ce.length,fe),ct=it.length;ct--;)Ce[be=it[ct]]&&(Ce[be]=!(qe[be]=Ce[be]))})})}function $e(ee){return ee&&void 0!==ee.getElementsByTagName&&ee}for(h in y=yn.support={},H=yn.isXML=function(ee){var Ce=ee&&(ee.ownerDocument||ee).documentElement;return!Gl.test(ee&&ee.namespaceURI||Ce&&Ce.nodeName||"HTML")},De=yn.setDocument=function(ee){var fe,Ce,qe=ee?ee.ownerDocument||ee:nn;return qe==Je||9!==qe.nodeType||!qe.documentElement||(Ot=(Je=qe).documentElement,zt=!H(Je),nn!=Je&&(Ce=Je.defaultView)&&Ce.top!==Ce&&(Ce.addEventListener?Ce.addEventListener("unload",ea,!1):Ce.attachEvent&&Ce.attachEvent("onunload",ea)),y.scope=Ki(function(be){return Ot.appendChild(be).appendChild(Je.createElement("div")),void 0!==be.querySelectorAll&&!be.querySelectorAll(":scope fieldset div").length}),y.cssSupportsSelector=Ki(function(){return CSS.supports("selector(*)")&&Je.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),y.attributes=Ki(function(be){return be.className="i",!be.getAttribute("className")}),y.getElementsByTagName=Ki(function(be){return be.appendChild(Je.createComment("")),!be.getElementsByTagName("*").length}),y.getElementsByClassName=ps.test(Je.getElementsByClassName),y.getById=Ki(function(be){return Ot.appendChild(be).id=$n,!Je.getElementsByName||!Je.getElementsByName($n).length}),y.getById?(w.filter.ID=function(be){var it=be.replace(ti,Xi);return function(ct){return ct.getAttribute("id")===it}},w.find.ID=function(be,it){if(void 0!==it.getElementById&&zt){var ct=it.getElementById(be);return ct?[ct]:[]}}):(w.filter.ID=function(be){var it=be.replace(ti,Xi);return function(ct){var yt=void 0!==ct.getAttributeNode&&ct.getAttributeNode("id");return yt&&yt.value===it}},w.find.ID=function(be,it){if(void 0!==it.getElementById&&zt){var ct,yt,wt,Ut=it.getElementById(be);if(Ut){if((ct=Ut.getAttributeNode("id"))&&ct.value===be)return[Ut];for(wt=it.getElementsByName(be),yt=0;Ut=wt[yt++];)if((ct=Ut.getAttributeNode("id"))&&ct.value===be)return[Ut]}return[]}}),w.find.TAG=y.getElementsByTagName?function(be,it){return void 0!==it.getElementsByTagName?it.getElementsByTagName(be):y.qsa?it.querySelectorAll(be):void 0}:function(be,it){var ct,yt=[],wt=0,Ut=it.getElementsByTagName(be);if("*"===be){for(;ct=Ut[wt++];)1===ct.nodeType&&yt.push(ct);return yt}return Ut},w.find.CLASS=y.getElementsByClassName&&function(be,it){if(void 0!==it.getElementsByClassName&&zt)return it.getElementsByClassName(be)},pr=[],kt=[],(y.qsa=ps.test(Je.querySelectorAll))&&(Ki(function(be){var it;Ot.appendChild(be).innerHTML="<a id='"+$n+"'></a><select id='"+$n+"-\r\\' msallowcapture=''><option selected=''></option></select>",be.querySelectorAll("[msallowcapture^='']").length&&kt.push("[*^$]="+Vn+"*(?:''|\"\")"),be.querySelectorAll("[selected]").length||kt.push("\\["+Vn+"*(?:value|"+hs+")"),be.querySelectorAll("[id~="+$n+"-]").length||kt.push("~="),(it=Je.createElement("input")).setAttribute("name",""),be.appendChild(it),be.querySelectorAll("[name='']").length||kt.push("\\["+Vn+"*name"+Vn+"*="+Vn+"*(?:''|\"\")"),be.querySelectorAll(":checked").length||kt.push(":checked"),be.querySelectorAll("a#"+$n+"+*").length||kt.push(".#.+[+~]"),be.querySelectorAll("\\\f"),kt.push("[\\r\\n\\f]")}),Ki(function(be){be.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var it=Je.createElement("input");it.setAttribute("type","hidden"),be.appendChild(it).setAttribute("name","D"),be.querySelectorAll("[name=d]").length&&kt.push("name"+Vn+"*[*^$|!~]?="),2!==be.querySelectorAll(":enabled").length&&kt.push(":enabled",":disabled"),Ot.appendChild(be).disabled=!0,2!==be.querySelectorAll(":disabled").length&&kt.push(":enabled",":disabled"),be.querySelectorAll("*,:x"),kt.push(",.*:")})),(y.matchesSelector=ps.test(Qt=Ot.matches||Ot.webkitMatchesSelector||Ot.mozMatchesSelector||Ot.oMatchesSelector||Ot.msMatchesSelector))&&Ki(function(be){y.disconnectedMatch=Qt.call(be,"*"),Qt.call(be,"[s!='']:x"),pr.push("!=",ui)}),y.cssSupportsSelector||kt.push(":has"),kt=kt.length&&new RegExp(kt.join("|")),pr=pr.length&&new RegExp(pr.join("|")),fe=ps.test(Ot.compareDocumentPosition),Ir=fe||ps.test(Ot.contains)?function(be,it){var ct=9===be.nodeType&&be.documentElement||be,yt=it&&it.parentNode;return be===yt||!(!yt||1!==yt.nodeType||!(ct.contains?ct.contains(yt):be.compareDocumentPosition&&16&be.compareDocumentPosition(yt)))}:function(be,it){if(it)for(;it=it.parentNode;)if(it===be)return!0;return!1},$i=fe?function(be,it){if(be===it)return dt=!0,0;var ct=!be.compareDocumentPosition-!it.compareDocumentPosition;return ct||(1&(ct=(be.ownerDocument||be)==(it.ownerDocument||it)?be.compareDocumentPosition(it):1)||!y.sortDetached&&it.compareDocumentPosition(be)===ct?be==Je||be.ownerDocument==nn&&Ir(nn,be)?-1:it==Je||it.ownerDocument==nn&&Ir(nn,it)?1:He?Rn(He,be)-Rn(He,it):0:4&ct?-1:1)}:function(be,it){if(be===it)return dt=!0,0;var ct,yt=0,wt=be.parentNode,Ut=it.parentNode,Bt=[be],Vt=[it];if(!wt||!Ut)return be==Je?-1:it==Je?1:wt?-1:Ut?1:He?Rn(He,be)-Rn(He,it):0;if(wt===Ut)return hu(be,it);for(ct=be;ct=ct.parentNode;)Bt.unshift(ct);for(ct=it;ct=ct.parentNode;)Vt.unshift(ct);for(;Bt[yt]===Vt[yt];)yt++;return yt?hu(Bt[yt],Vt[yt]):Bt[yt]==nn?-1:Vt[yt]==nn?1:0}),Je},yn.matches=function(ee,fe){return yn(ee,null,null,fe)},yn.matchesSelector=function(ee,fe){if(De(ee),y.matchesSelector&&zt&&!ei[fe+" "]&&(!pr||!pr.test(fe))&&(!kt||!kt.test(fe)))try{var Ce=Qt.call(ee,fe);if(Ce||y.disconnectedMatch||ee.document&&11!==ee.document.nodeType)return Ce}catch(qe){ei(fe,!0)}return yn(fe,Je,null,[ee]).length>0},yn.contains=function(ee,fe){return(ee.ownerDocument||ee)!=Je&&De(ee),Ir(ee,fe)},yn.attr=function(ee,fe){(ee.ownerDocument||ee)!=Je&&De(ee);var Ce=w.attrHandle[fe.toLowerCase()],qe=Ce&&xa.call(w.attrHandle,fe.toLowerCase())?Ce(ee,fe,!zt):void 0;return void 0!==qe?qe:y.attributes||!zt?ee.getAttribute(fe):(qe=ee.getAttributeNode(fe))&&qe.specified?qe.value:null},yn.escape=function(ee){return(ee+"").replace(ms,fu)},yn.error=function(ee){throw new Error("Syntax error, unrecognized expression: "+ee)},yn.uniqueSort=function(ee){var fe,Ce=[],qe=0,be=0;if(dt=!y.detectDuplicates,He=!y.sortStable&&ee.slice(0),ee.sort($i),dt){for(;fe=ee[be++];)fe===ee[be]&&(qe=Ce.push(be));for(;qe--;)ee.splice(Ce[qe],1)}return He=null,ee},N=yn.getText=function(ee){var fe,Ce="",qe=0,be=ee.nodeType;if(be){if(1===be||9===be||11===be){if("string"==typeof ee.textContent)return ee.textContent;for(ee=ee.firstChild;ee;ee=ee.nextSibling)Ce+=N(ee)}else if(3===be||4===be)return ee.nodeValue}else for(;fe=ee[qe++];)Ce+=N(fe);return Ce},(w=yn.selectors={cacheLength:50,createPseudo:to,match:Yi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ee){return ee[1]=ee[1].replace(ti,Xi),ee[3]=(ee[3]||ee[4]||ee[5]||"").replace(ti,Xi),"~="===ee[2]&&(ee[3]=" "+ee[3]+" "),ee.slice(0,4)},CHILD:function(ee){return ee[1]=ee[1].toLowerCase(),"nth"===ee[1].slice(0,3)?(ee[3]||yn.error(ee[0]),ee[4]=+(ee[4]?ee[5]+(ee[6]||1):2*("even"===ee[3]||"odd"===ee[3])),ee[5]=+(ee[7]+ee[8]||"odd"===ee[3])):ee[3]&&yn.error(ee[0]),ee},PSEUDO:function(ee){var fe,Ce=!ee[6]&&ee[2];return Yi.CHILD.test(ee[0])?null:(ee[3]?ee[2]=ee[4]||ee[5]||"":Ce&&Ul.test(Ce)&&(fe=X(Ce,!0))&&(fe=Ce.indexOf(")",Ce.length-fe)-Ce.length)&&(ee[0]=ee[0].slice(0,fe),ee[2]=Ce.slice(0,fe)),ee.slice(0,3))}},filter:{TAG:function(ee){var fe=ee.replace(ti,Xi).toLowerCase();return"*"===ee?function(){return!0}:function(Ce){return Ce.nodeName&&Ce.nodeName.toLowerCase()===fe}},CLASS:function(ee){var fe=mr[ee+" "];return fe||(fe=new RegExp("(^|"+Vn+")"+ee+"("+Vn+"|$)"))&&mr(ee,function(Ce){return fe.test("string"==typeof Ce.className&&Ce.className||void 0!==Ce.getAttribute&&Ce.getAttribute("class")||"")})},ATTR:function(ee,fe,Ce){return function(qe){var be=yn.attr(qe,ee);return null==be?"!="===fe:!fe||(be+="","="===fe?be===Ce:"!="===fe?be!==Ce:"^="===fe?Ce&&0===be.indexOf(Ce):"*="===fe?Ce&&be.indexOf(Ce)>-1:"$="===fe?Ce&&be.slice(-Ce.length)===Ce:"~="===fe?(" "+be.replace(lu," ")+" ").indexOf(Ce)>-1:"|="===fe&&(be===Ce||be.slice(0,Ce.length+1)===Ce+"-"))}},CHILD:function(ee,fe,Ce,qe,be){var it="nth"!==ee.slice(0,3),ct="last"!==ee.slice(-4),yt="of-type"===fe;return 1===qe&&0===be?function(wt){return!!wt.parentNode}:function(wt,Ut,Bt){var Vt,rn,Kn,Ht,yr,$r,Ti=it!==ct?"nextSibling":"previousSibling",nr=wt.parentNode,Ya=yt&&wt.nodeName.toLowerCase(),vo=!Bt&&!yt,xr=!1;if(nr){if(it){for(;Ti;){for(Ht=wt;Ht=Ht[Ti];)if(yt?Ht.nodeName.toLowerCase()===Ya:1===Ht.nodeType)return!1;$r=Ti="only"===ee&&!$r&&"nextSibling"}return!0}if($r=[ct?nr.firstChild:nr.lastChild],ct&&vo){for(xr=(yr=(Vt=(rn=(Kn=(Ht=nr)[$n]||(Ht[$n]={}))[Ht.uniqueID]||(Kn[Ht.uniqueID]={}))[ee]||[])[0]===qr&&Vt[1])&&Vt[2],Ht=yr&&nr.childNodes[yr];Ht=++yr&&Ht&&Ht[Ti]||(xr=yr=0)||$r.pop();)if(1===Ht.nodeType&&++xr&&Ht===wt){rn[ee]=[qr,yr,xr];break}}else if(vo&&(xr=yr=(Vt=(rn=(Kn=(Ht=wt)[$n]||(Ht[$n]={}))[Ht.uniqueID]||(Kn[Ht.uniqueID]={}))[ee]||[])[0]===qr&&Vt[1]),!1===xr)for(;(Ht=++yr&&Ht&&Ht[Ti]||(xr=yr=0)||$r.pop())&&((yt?Ht.nodeName.toLowerCase()!==Ya:1!==Ht.nodeType)||!++xr||(vo&&((rn=(Kn=Ht[$n]||(Ht[$n]={}))[Ht.uniqueID]||(Kn[Ht.uniqueID]={}))[ee]=[qr,xr]),Ht!==wt)););return(xr-=be)===qe||xr%qe==0&&xr/qe>=0}}},PSEUDO:function(ee,fe){var Ce,qe=w.pseudos[ee]||w.setFilters[ee.toLowerCase()]||yn.error("unsupported pseudo: "+ee);return qe[$n]?qe(fe):qe.length>1?(Ce=[ee,ee,"",fe],w.setFilters.hasOwnProperty(ee.toLowerCase())?to(function(be,it){for(var ct,yt=qe(be,fe),wt=yt.length;wt--;)be[ct=Rn(be,yt[wt])]=!(it[ct]=yt[wt])}):function(be){return qe(be,0,Ce)}):qe}},pseudos:{not:to(function(ee){var fe=[],Ce=[],qe=me(ee.replace(Zo,"$1"));return qe[$n]?to(function(be,it,ct,yt){for(var wt,Ut=qe(be,null,yt,[]),Bt=be.length;Bt--;)(wt=Ut[Bt])&&(be[Bt]=!(it[Bt]=wt))}):function(be,it,ct){return fe[0]=be,qe(fe,null,ct,Ce),fe[0]=null,!Ce.pop()}}),has:to(function(ee){return function(fe){return yn(ee,fe).length>0}}),contains:to(function(ee){return ee=ee.replace(ti,Xi),function(fe){return(fe.textContent||N(fe)).indexOf(ee)>-1}}),lang:to(function(ee){return qo.test(ee||"")||yn.error("unsupported lang: "+ee),ee=ee.replace(ti,Xi).toLowerCase(),function(fe){var Ce;do{if(Ce=zt?fe.lang:fe.getAttribute("xml:lang")||fe.getAttribute("lang"))return(Ce=Ce.toLowerCase())===ee||0===Ce.indexOf(ee+"-")}while((fe=fe.parentNode)&&1===fe.nodeType);return!1}}),target:function(ee){var fe=l.location&&l.location.hash;return fe&&fe.slice(1)===ee.id},root:function(ee){return ee===Ot},focus:function(ee){return ee===Je.activeElement&&(!Je.hasFocus||Je.hasFocus())&&!!(ee.type||ee.href||~ee.tabIndex)},enabled:Ee(!1),disabled:Ee(!0),checked:function(ee){var fe=ee.nodeName.toLowerCase();return"input"===fe&&!!ee.checked||"option"===fe&&!!ee.selected},selected:function(ee){return!0===ee.selected},empty:function(ee){for(ee=ee.firstChild;ee;ee=ee.nextSibling)if(ee.nodeType<6)return!1;return!0},parent:function(ee){return!w.pseudos.empty(ee)},header:function(ee){return $l.test(ee.nodeName)},input:function(ee){return $a.test(ee.nodeName)},button:function(ee){var fe=ee.nodeName.toLowerCase();return"input"===fe&&"button"===ee.type||"button"===fe},text:function(ee){var fe;return"input"===ee.nodeName.toLowerCase()&&"text"===ee.type&&(null==(fe=ee.getAttribute("type"))||"text"===fe.toLowerCase())},first:Ue(function(){return[0]}),last:Ue(function(ee,fe){return[fe-1]}),eq:Ue(function(ee,fe,Ce){return[Ce<0?Ce+fe:Ce]}),even:Ue(function(ee,fe){for(var Ce=0;Ce<fe;Ce+=2)ee.push(Ce);return ee}),odd:Ue(function(ee,fe){for(var Ce=1;Ce<fe;Ce+=2)ee.push(Ce);return ee}),lt:Ue(function(ee,fe,Ce){for(var qe=Ce<0?Ce+fe:Ce>fe?fe:Ce;--qe>=0;)ee.push(qe);return ee}),gt:Ue(function(ee,fe,Ce){for(var qe=Ce<0?Ce+fe:Ce;++qe<fe;)ee.push(qe);return ee})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[h]=Vs(h);for(h in{submit:!0,reset:!0})w.pseudos[h]=pu(h);function Mt(){}function qt(ee){for(var fe=0,Ce=ee.length,qe="";fe<Ce;fe++)qe+=ee[fe].value;return qe}function On(ee,fe,Ce){var qe=fe.dir,be=fe.next,it=be||qe,ct=Ce&&"parentNode"===it,yt=Fn++;return fe.first?function(wt,Ut,Bt){for(;wt=wt[qe];)if(1===wt.nodeType||ct)return ee(wt,Ut,Bt);return!1}:function(wt,Ut,Bt){var Vt,rn,Kn,Ht=[qr,yt];if(Bt){for(;wt=wt[qe];)if((1===wt.nodeType||ct)&&ee(wt,Ut,Bt))return!0}else for(;wt=wt[qe];)if(1===wt.nodeType||ct)if(rn=(Kn=wt[$n]||(wt[$n]={}))[wt.uniqueID]||(Kn[wt.uniqueID]={}),be&&be===wt.nodeName.toLowerCase())wt=wt[qe]||wt;else{if((Vt=rn[it])&&Vt[0]===qr&&Vt[1]===yt)return Ht[2]=Vt[2];if(rn[it]=Ht,Ht[2]=ee(wt,Ut,Bt))return!0}return!1}}function Pr(ee){return ee.length>1?function(fe,Ce,qe){for(var be=ee.length;be--;)if(!ee[be](fe,Ce,qe))return!1;return!0}:ee[0]}function Ca(ee,fe,Ce,qe,be){for(var it,ct=[],yt=0,wt=ee.length,Ut=null!=fe;yt<wt;yt++)(it=ee[yt])&&(!Ce||Ce(it,qe,be))&&(ct.push(it),Ut&&fe.push(yt));return ct}function Si(ee,fe,Ce,qe,be,it){return qe&&!qe[$n]&&(qe=Si(qe)),be&&!be[$n]&&(be=Si(be,it)),to(function(ct,yt,wt,Ut){var Bt,Vt,rn,Kn=[],Ht=[],yr=yt.length,$r=ct||function Jn(ee,fe,Ce){for(var qe=0,be=fe.length;qe<be;qe++)yn(ee,fe[qe],Ce);return Ce}(fe||"*",wt.nodeType?[wt]:wt,[]),Ti=!ee||!ct&&fe?$r:Ca($r,Kn,ee,wt,Ut),nr=Ce?be||(ct?ee:yr||qe)?[]:yt:Ti;if(Ce&&Ce(Ti,nr,wt,Ut),qe)for(Bt=Ca(nr,Ht),qe(Bt,[],wt,Ut),Vt=Bt.length;Vt--;)(rn=Bt[Vt])&&(nr[Ht[Vt]]=!(Ti[Ht[Vt]]=rn));if(ct){if(be||ee){if(be){for(Bt=[],Vt=nr.length;Vt--;)(rn=nr[Vt])&&Bt.push(Ti[Vt]=rn);be(null,nr=[],Bt,Ut)}for(Vt=nr.length;Vt--;)(rn=nr[Vt])&&(Bt=be?Rn(ct,rn):Kn[Vt])>-1&&(ct[Bt]=!(yt[Bt]=rn))}}else nr=Ca(nr===yt?nr.splice(yr,nr.length):nr),be?be(null,yt,nr,Ut):Wi.apply(yt,nr)})}function Gr(ee){for(var fe,Ce,qe,be=ee.length,it=w.relative[ee[0].type],ct=it||w.relative[" "],yt=it?1:0,wt=On(function(Vt){return Vt===fe},ct,!0),Ut=On(function(Vt){return Rn(fe,Vt)>-1},ct,!0),Bt=[function(Vt,rn,Kn){var Ht=!it&&(Kn||rn!==Ae)||((fe=rn).nodeType?wt(Vt,rn,Kn):Ut(Vt,rn,Kn));return fe=null,Ht}];yt<be;yt++)if(Ce=w.relative[ee[yt].type])Bt=[On(Pr(Bt),Ce)];else{if((Ce=w.filter[ee[yt].type].apply(null,ee[yt].matches))[$n]){for(qe=++yt;qe<be&&!w.relative[ee[qe].type];qe++);return Si(yt>1&&Pr(Bt),yt>1&&qt(ee.slice(0,yt-1).concat({value:" "===ee[yt-2].type?"*":""})).replace(Zo,"$1"),Ce,yt<qe&&Gr(ee.slice(yt,qe)),qe<be&&Gr(ee=ee.slice(qe)),qe<be&&qt(ee))}Bt.push(Ce)}return Pr(Bt)}return Mt.prototype=w.filters=w.pseudos,w.setFilters=new Mt,X=yn.tokenize=function(ee,fe){var Ce,qe,be,it,ct,yt,wt,Ut=fs[ee+" "];if(Ut)return fe?0:Ut.slice(0);for(ct=ee,yt=[],wt=w.preFilter;ct;){for(it in(!Ce||(qe=Yu.exec(ct)))&&(qe&&(ct=ct.slice(qe[0].length)||ct),yt.push(be=[])),Ce=!1,(qe=cu.exec(ct))&&(Ce=qe.shift(),be.push({value:Ce,type:qe[0].replace(Zo," ")}),ct=ct.slice(Ce.length)),w.filter)(qe=Yi[it].exec(ct))&&(!wt[it]||(qe=wt[it](qe)))&&(Ce=qe.shift(),be.push({value:Ce,type:it,matches:qe}),ct=ct.slice(Ce.length));if(!Ce)break}return fe?ct.length:ct?yn.error(ee):fs(ee,yt).slice(0)},me=yn.compile=function(ee,fe){var Ce,qe=[],be=[],it=Ga[ee+" "];if(!it){for(fe||(fe=X(ee)),Ce=fe.length;Ce--;)(it=Gr(fe[Ce]))[$n]?qe.push(it):be.push(it);it=Ga(ee,function Hs(ee,fe){var Ce=fe.length>0,qe=ee.length>0,be=function(it,ct,yt,wt,Ut){var Bt,Vt,rn,Kn=0,Ht="0",yr=it&&[],$r=[],Ti=Ae,nr=it||qe&&w.find.TAG("*",Ut),Ya=qr+=null==Ti?1:Math.random()||.1,vo=nr.length;for(Ut&&(Ae=ct==Je||ct||Ut);Ht!==vo&&null!=(Bt=nr[Ht]);Ht++){if(qe&&Bt){for(Vt=0,!ct&&Bt.ownerDocument!=Je&&(De(Bt),yt=!zt);rn=ee[Vt++];)if(rn(Bt,ct||Je,yt)){wt.push(Bt);break}Ut&&(qr=Ya)}Ce&&((Bt=!rn&&Bt)&&Kn--,it&&yr.push(Bt))}if(Kn+=Ht,Ce&&Ht!==Kn){for(Vt=0;rn=fe[Vt++];)rn(yr,$r,ct,yt);if(it){if(Kn>0)for(;Ht--;)yr[Ht]||$r[Ht]||($r[Ht]=Fo.call(wt));$r=Ca($r)}Wi.apply(wt,$r),Ut&&!it&&$r.length>0&&Kn+fe.length>1&&yn.uniqueSort(wt)}return Ut&&(qr=Ya,Ae=Ti),yr};return Ce?to(be):be}(be,qe)),it.selector=ee}return it},de=yn.select=function(ee,fe,Ce,qe){var be,it,ct,yt,wt,Ut="function"==typeof ee&&ee,Bt=!qe&&X(ee=Ut.selector||ee);if(Ce=Ce||[],1===Bt.length){if((it=Bt[0]=Bt[0].slice(0)).length>2&&"ID"===(ct=it[0]).type&&9===fe.nodeType&&zt&&w.relative[it[1].type]){if(!(fe=(w.find.ID(ct.matches[0].replace(ti,Xi),fe)||[])[0]))return Ce;Ut&&(fe=fe.parentNode),ee=ee.slice(it.shift().value.length)}for(be=Yi.needsContext.test(ee)?0:it.length;be--&&!w.relative[yt=(ct=it[be]).type];)if((wt=w.find[yt])&&(qe=wt(ct.matches[0].replace(ti,Xi),Bs.test(it[0].type)&&$e(fe.parentNode)||fe))){if(it.splice(be,1),!(ee=qe.length&&qt(it)))return Wi.apply(Ce,qe),Ce;break}}return(Ut||me(ee,Bt))(qe,fe,!zt,Ce,!fe||Bs.test(ee)&&$e(fe.parentNode)||fe),Ce},y.sortStable=$n.split("").sort($i).join("")===$n,y.detectDuplicates=!!dt,De(),y.sortDetached=Ki(function(ee){return 1&ee.compareDocumentPosition(Je.createElement("fieldset"))}),Ki(function(ee){return ee.innerHTML="<a href='#'></a>","#"===ee.firstChild.getAttribute("href")})||Xu("type|href|height|width",function(ee,fe,Ce){if(!Ce)return ee.getAttribute(fe,"type"===fe.toLowerCase()?1:2)}),(!y.attributes||!Ki(function(ee){return ee.innerHTML="<input/>",ee.firstChild.setAttribute("value",""),""===ee.firstChild.getAttribute("value")}))&&Xu("value",function(ee,fe,Ce){if(!Ce&&"input"===ee.nodeName.toLowerCase())return ee.defaultValue}),Ki(function(ee){return null==ee.getAttribute("disabled")})||Xu(hs,function(ee,fe,Ce){var qe;if(!Ce)return!0===ee[fe]?fe.toLowerCase():(qe=ee.getAttributeNode(fe))&&qe.specified?qe.value:null}),yn}(g);b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains,b.escapeSelector=ut.escape;var ze=function(l,h,y){for(var w=[],N=void 0!==y;(l=l[h])&&9!==l.nodeType;)if(1===l.nodeType){if(N&&b(l).is(y))break;w.push(l)}return w},Ne=function(l,h){for(var y=[];l;l=l.nextSibling)1===l.nodeType&&l!==h&&y.push(l);return y},Re=b.expr.match.needsContext;function nt(l,h){return l.nodeName&&l.nodeName.toLowerCase()===h.toLowerCase()}var Ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function mt(l,h,y){return se(h)?b.grep(l,function(w,N){return!!h.call(w,N,w)!==y}):h.nodeType?b.grep(l,function(w){return w===h!==y}):"string"!=typeof h?b.grep(l,function(w){return R.call(h,w)>-1!==y}):b.filter(h,l,y)}b.filter=function(l,h,y){var w=h[0];return y&&(l=":not("+l+")"),1===h.length&&1===w.nodeType?b.find.matchesSelector(w,l)?[w]:[]:b.find.matches(l,b.grep(h,function(N){return 1===N.nodeType}))},b.fn.extend({find:function(l){var h,y,w=this.length,N=this;if("string"!=typeof l)return this.pushStack(b(l).filter(function(){for(h=0;h<w;h++)if(b.contains(N[h],this))return!0}));for(y=this.pushStack([]),h=0;h<w;h++)b.find(l,N[h],y);return w>1?b.uniqueSort(y):y},filter:function(l){return this.pushStack(mt(this,l||[],!1))},not:function(l){return this.pushStack(mt(this,l||[],!0))},is:function(l){return!!mt(this,"string"==typeof l&&Re.test(l)?b(l):l||[],!1).length}});var _t,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Kt=b.fn.init=function(l,h,y){var w,N;if(!l)return this;if(y=y||_t,"string"==typeof l){if(!(w="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:pt.exec(l))||!w[1]&&h)return!h||h.jquery?(h||y).find(l):this.constructor(h).find(l);if(w[1]){if(b.merge(this,b.parseHTML(w[1],(h=h instanceof b?h[0]:h)&&h.nodeType?h.ownerDocument||h:le,!0)),Ke.test(w[1])&&b.isPlainObject(h))for(w in h)se(this[w])?this[w](h[w]):this.attr(w,h[w]);return this}return(N=le.getElementById(w[2]))&&(this[0]=N,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):se(l)?void 0!==y.ready?y.ready(l):l(b):b.makeArray(l,this)};Kt.prototype=b.fn,_t=b(le);var an=/^(?:parents|prev(?:Until|All))/,jn={children:!0,contents:!0,next:!0,prev:!0};function Zn(l,h){for(;(l=l[h])&&1!==l.nodeType;);return l}b.fn.extend({has:function(l){var h=b(l,this),y=h.length;return this.filter(function(){for(var w=0;w<y;w++)if(b.contains(this,h[w]))return!0})},closest:function(l,h){var y,w=0,N=this.length,H=[],X="string"!=typeof l&&b(l);if(!Re.test(l))for(;w<N;w++)for(y=this[w];y&&y!==h;y=y.parentNode)if(y.nodeType<11&&(X?X.index(y)>-1:1===y.nodeType&&b.find.matchesSelector(y,l))){H.push(y);break}return this.pushStack(H.length>1?b.uniqueSort(H):H)},index:function(l){return l?"string"==typeof l?R.call(b(l),this[0]):R.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,h){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(l,h))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),b.each({parent:function(l){var h=l.parentNode;return h&&11!==h.nodeType?h:null},parents:function(l){return ze(l,"parentNode")},parentsUntil:function(l,h,y){return ze(l,"parentNode",y)},next:function(l){return Zn(l,"nextSibling")},prev:function(l){return Zn(l,"previousSibling")},nextAll:function(l){return ze(l,"nextSibling")},prevAll:function(l){return ze(l,"previousSibling")},nextUntil:function(l,h,y){return ze(l,"nextSibling",y)},prevUntil:function(l,h,y){return ze(l,"previousSibling",y)},siblings:function(l){return Ne((l.parentNode||{}).firstChild,l)},children:function(l){return Ne(l.firstChild)},contents:function(l){return null!=l.contentDocument&&_(l.contentDocument)?l.contentDocument:(nt(l,"template")&&(l=l.content||l),b.merge([],l.childNodes))}},function(l,h){b.fn[l]=function(y,w){var N=b.map(this,h,y);return"Until"!==l.slice(-5)&&(w=y),w&&"string"==typeof w&&(N=b.filter(w,N)),this.length>1&&(jn[l]||b.uniqueSort(N),an.test(l)&&N.reverse()),this.pushStack(N)}});var zn=/[^\x20\t\r\n\f]+/g;function Xn(l){return l}function We(l){throw l}function Ze(l,h,y,w){var N;try{l&&se(N=l.promise)?N.call(l).done(h).fail(y):l&&se(N=l.then)?N.call(l,h,y):h.apply(void 0,[l].slice(w))}catch(H){y.apply(void 0,[H])}}b.Callbacks=function(l){l="string"==typeof l?function dr(l){var h={};return b.each(l.match(zn)||[],function(y,w){h[w]=!0}),h}(l):b.extend({},l);var h,y,w,N,H=[],X=[],me=-1,de=function(){for(N=N||l.once,w=h=!0;X.length;me=-1)for(y=X.shift();++me<H.length;)!1===H[me].apply(y[0],y[1])&&l.stopOnFalse&&(me=H.length,y=!1);l.memory||(y=!1),h=!1,N&&(H=y?[]:"")},Ae={add:function(){return H&&(y&&!h&&(me=H.length-1,X.push(y)),function He(dt){b.each(dt,function(De,Je){se(Je)?(!l.unique||!Ae.has(Je))&&H.push(Je):Je&&Je.length&&"string"!==we(Je)&&He(Je)})}(arguments),y&&!h&&de()),this},remove:function(){return b.each(arguments,function(He,dt){for(var De;(De=b.inArray(dt,H,De))>-1;)H.splice(De,1),De<=me&&me--}),this},has:function(He){return He?b.inArray(He,H)>-1:H.length>0},empty:function(){return H&&(H=[]),this},disable:function(){return N=X=[],H=y="",this},disabled:function(){return!H},lock:function(){return N=X=[],!y&&!h&&(H=y=""),this},locked:function(){return!!N},fireWith:function(He,dt){return N||(dt=[He,(dt=dt||[]).slice?dt.slice():dt],X.push(dt),h||de()),this},fire:function(){return Ae.fireWith(this,arguments),this},fired:function(){return!!w}};return Ae},b.extend({Deferred:function(l){var h=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return N.done(arguments).fail(arguments),this},catch:function(H){return w.then(null,H)},pipe:function(){var H=arguments;return b.Deferred(function(X){b.each(h,function(me,de){var Ae=se(H[de[4]])&&H[de[4]];N[de[1]](function(){var He=Ae&&Ae.apply(this,arguments);He&&se(He.promise)?He.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[de[0]+"With"](this,Ae?[He]:arguments)})}),H=null}).promise()},then:function(H,X,me){var de=0;function Ae(He,dt,De,Je){return function(){var Ot=this,zt=arguments,kt=function(){var Qt,Ir;if(!(He<de)){if((Qt=De.apply(Ot,zt))===dt.promise())throw new TypeError("Thenable self-resolution");se(Ir=Qt&&("object"==typeof Qt||"function"==typeof Qt)&&Qt.then)?Je?Ir.call(Qt,Ae(de,dt,Xn,Je),Ae(de,dt,We,Je)):(de++,Ir.call(Qt,Ae(de,dt,Xn,Je),Ae(de,dt,We,Je),Ae(de,dt,Xn,dt.notifyWith))):(De!==Xn&&(Ot=void 0,zt=[Qt]),(Je||dt.resolveWith)(Ot,zt))}},pr=Je?kt:function(){try{kt()}catch(Qt){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(Qt,pr.stackTrace),He+1>=de&&(De!==We&&(Ot=void 0,zt=[Qt]),dt.rejectWith(Ot,zt))}};He?pr():(b.Deferred.getStackHook&&(pr.stackTrace=b.Deferred.getStackHook()),g.setTimeout(pr))}}return b.Deferred(function(He){h[0][3].add(Ae(0,He,se(me)?me:Xn,He.notifyWith)),h[1][3].add(Ae(0,He,se(H)?H:Xn)),h[2][3].add(Ae(0,He,se(X)?X:We))}).promise()},promise:function(H){return null!=H?b.extend(H,w):w}},N={};return b.each(h,function(H,X){var me=X[2],de=X[5];w[X[1]]=me.add,de&&me.add(function(){y=de},h[3-H][2].disable,h[3-H][3].disable,h[0][2].lock,h[0][3].lock),me.add(X[3].fire),N[X[0]]=function(){return N[X[0]+"With"](this===N?void 0:this,arguments),this},N[X[0]+"With"]=me.fireWith}),w.promise(N),l&&l.call(N,N),N},when:function(l){var h=arguments.length,y=h,w=Array(y),N=I.call(arguments),H=b.Deferred(),X=function(me){return function(de){w[me]=this,N[me]=arguments.length>1?I.call(arguments):de,--h||H.resolveWith(w,N)}};if(h<=1&&(Ze(l,H.done(X(y)).resolve,H.reject,!h),"pending"===H.state()||se(N[y]&&N[y].then)))return H.then();for(;y--;)Ze(N[y],X(y),H.reject);return H.promise()}});var ft=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(l,h){g.console&&g.console.warn&&l&&ft.test(l.name)&&g.console.warn("jQuery.Deferred exception: "+l.message,l.stack,h)},b.readyException=function(l){g.setTimeout(function(){throw l})};var xt=b.Deferred();function At(){le.removeEventListener("DOMContentLoaded",At),g.removeEventListener("load",At),b.ready()}b.fn.ready=function(l){return xt.then(l).catch(function(h){b.readyException(h)}),this},b.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--b.readyWait:b.isReady)||(b.isReady=!0,!(!0!==l&&--b.readyWait>0)&&xt.resolveWith(le,[b]))}}),b.ready.then=xt.then,"complete"===le.readyState||"loading"!==le.readyState&&!le.documentElement.doScroll?g.setTimeout(b.ready):(le.addEventListener("DOMContentLoaded",At),g.addEventListener("load",At));var cn=function(l,h,y,w,N,H,X){var me=0,de=l.length,Ae=null==y;if("object"===we(y))for(me in N=!0,y)cn(l,h,me,y[me],!0,H,X);else if(void 0!==w&&(N=!0,se(w)||(X=!0),Ae&&(X?(h.call(l,w),h=null):(Ae=h,h=function(He,dt,De){return Ae.call(b(He),De)})),h))for(;me<de;me++)h(l[me],y,X?w:w.call(l[me],me,h(l[me],y)));return N?l:Ae?h.call(l):de?h(l[0],y):H},Bn=/^-ms-/,cr=/-([a-z])/g;function co(l,h){return h.toUpperCase()}function hn(l){return l.replace(Bn,"ms-").replace(cr,co)}var tn=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function D(){this.expando=b.expando+D.uid++}D.uid=1,D.prototype={cache:function(l){var h=l[this.expando];return h||(h={},tn(l)&&(l.nodeType?l[this.expando]=h:Object.defineProperty(l,this.expando,{value:h,configurable:!0}))),h},set:function(l,h,y){var w,N=this.cache(l);if("string"==typeof h)N[hn(h)]=y;else for(w in h)N[hn(w)]=h[w];return N},get:function(l,h){return void 0===h?this.cache(l):l[this.expando]&&l[this.expando][hn(h)]},access:function(l,h,y){return void 0===h||h&&"string"==typeof h&&void 0===y?this.get(l,h):(this.set(l,h,y),void 0!==y?y:h)},remove:function(l,h){var y,w=l[this.expando];if(void 0!==w){if(void 0!==h)for((y=(h=Array.isArray(h)?h.map(hn):(h=hn(h))in w?[h]:h.match(zn)||[]).length);y--;)delete w[h[y]];(void 0===h||b.isEmptyObject(w))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var h=l[this.expando];return void 0!==h&&!b.isEmptyObject(h)}};var U=new D,re=new D,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Qe=/[A-Z]/g;function Ct(l,h,y){var w;if(void 0===y&&1===l.nodeType)if(w="data-"+h.replace(Qe,"-$&").toLowerCase(),"string"==typeof(y=l.getAttribute(w))){try{y=function et(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:ye.test(l)?JSON.parse(l):l)}(y)}catch(N){}re.set(l,h,y)}else y=void 0;return y}b.extend({hasData:function(l){return re.hasData(l)||U.hasData(l)},data:function(l,h,y){return re.access(l,h,y)},removeData:function(l,h){re.remove(l,h)},_data:function(l,h,y){return U.access(l,h,y)},_removeData:function(l,h){U.remove(l,h)}}),b.fn.extend({data:function(l,h){var y,w,N,H=this[0],X=H&&H.attributes;if(void 0===l){if(this.length&&(N=re.get(H),1===H.nodeType&&!U.get(H,"hasDataAttrs"))){for(y=X.length;y--;)X[y]&&0===(w=X[y].name).indexOf("data-")&&(w=hn(w.slice(5)),Ct(H,w,N[w]));U.set(H,"hasDataAttrs",!0)}return N}return"object"==typeof l?this.each(function(){re.set(this,l)}):cn(this,function(me){var de;if(H&&void 0===me)return void 0!==(de=re.get(H,l))||void 0!==(de=Ct(H,l))?de:void 0;this.each(function(){re.set(this,l,me)})},null,h,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),b.extend({queue:function(l,h,y){var w;if(l)return w=U.get(l,h=(h||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=U.access(l,h,b.makeArray(y)):w.push(y)),w||[]},dequeue:function(l,h){var y=b.queue(l,h=h||"fx"),w=y.length,N=y.shift(),H=b._queueHooks(l,h);"inprogress"===N&&(N=y.shift(),w--),N&&("fx"===h&&y.unshift("inprogress"),delete H.stop,N.call(l,function(){b.dequeue(l,h)},H)),!w&&H&&H.empty.fire()},_queueHooks:function(l,h){var y=h+"queueHooks";return U.get(l,y)||U.access(l,y,{empty:b.Callbacks("once memory").add(function(){U.remove(l,[h+"queue",y])})})}}),b.fn.extend({queue:function(l,h){var y=2;return"string"!=typeof l&&(h=l,l="fx",y--),arguments.length<y?b.queue(this[0],l):void 0===h?this:this.each(function(){var w=b.queue(this,l,h);b._queueHooks(this,l),"fx"===l&&"inprogress"!==w[0]&&b.dequeue(this,l)})},dequeue:function(l){return this.each(function(){b.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,h){var y,w=1,N=b.Deferred(),H=this,X=this.length,me=function(){--w||N.resolveWith(H,[H])};for("string"!=typeof l&&(h=l,l=void 0),l=l||"fx";X--;)(y=U.get(H[X],l+"queueHooks"))&&y.empty&&(w++,y.empty.add(me));return me(),N.promise(h)}});var Nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,sn=new RegExp("^(?:([+-])=|)("+Nt+")([a-z%]*)$","i"),wn=["Top","Right","Bottom","Left"],An=le.documentElement,gn=function(l){return b.contains(l.ownerDocument,l)},gr={composed:!0};An.getRootNode&&(gn=function(l){return b.contains(l.ownerDocument,l)||l.getRootNode(gr)===l.ownerDocument});var fr=function(l,h){return"none"===(l=h||l).style.display||""===l.style.display&&gn(l)&&"none"===b.css(l,"display")};function qi(l,h,y,w){var N,H,X=20,me=w?function(){return w.cur()}:function(){return b.css(l,h,"")},de=me(),Ae=y&&y[3]||(b.cssNumber[h]?"":"px"),He=l.nodeType&&(b.cssNumber[h]||"px"!==Ae&&+de)&&sn.exec(b.css(l,h));if(He&&He[3]!==Ae){for(Ae=Ae||He[3],He=+(de/=2)||1;X--;)b.style(l,h,He+Ae),(1-H)*(1-(H=me()/de||.5))<=0&&(X=0),He/=H;b.style(l,h,(He*=2)+Ae),y=y||[]}return y&&(He=+He||+de||0,N=y[1]?He+(y[1]+1)*y[2]:+y[2],w&&(w.unit=Ae,w.start=He,w.end=N)),N}var Qn={};function vr(l){var h,y=l.ownerDocument,w=l.nodeName,N=Qn[w];return N||(h=y.body.appendChild(y.createElement(w)),N=b.css(h,"display"),h.parentNode.removeChild(h),"none"===N&&(N="block"),Qn[w]=N,N)}function hr(l,h){for(var y,w,N=[],H=0,X=l.length;H<X;H++)(w=l[H]).style&&(y=w.style.display,h?("none"===y&&(N[H]=U.get(w,"display")||null,N[H]||(w.style.display="")),""===w.style.display&&fr(w)&&(N[H]=vr(w))):"none"!==y&&(N[H]="none",U.set(w,"display",y)));for(H=0;H<X;H++)null!=N[H]&&(l[H].style.display=N[H]);return l}b.fn.extend({show:function(){return hr(this,!0)},hide:function(){return hr(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){fr(this)?b(this).show():b(this).hide()})}});var h,y,Cr=/^(?:checkbox|radio)$/i,Qr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gi=/^$|^module$|\/(?:java|ecma)script/i;h=le.createDocumentFragment().appendChild(le.createElement("div")),(y=le.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),h.appendChild(y),n.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",n.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",n.option=!!h.lastChild;var wr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function un(l,h){var y;return y=void 0!==l.getElementsByTagName?l.getElementsByTagName(h||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(h||"*"):[],void 0===h||h&&nt(l,h)?b.merge([l],y):y}function vi(l,h){for(var y=0,w=l.length;y<w;y++)U.set(l[y],"globalEval",!h||U.get(h[y],"globalEval"))}wr.tbody=wr.tfoot=wr.colgroup=wr.caption=wr.thead,wr.th=wr.td,n.option||(wr.optgroup=wr.option=[1,"<select multiple='multiple'>","</select>"]);var Uo=/<|&#?\w+;/;function jr(l,h,y,w,N){for(var H,X,me,de,Ae,He,dt=h.createDocumentFragment(),De=[],Je=0,Ot=l.length;Je<Ot;Je++)if((H=l[Je])||0===H)if("object"===we(H))b.merge(De,H.nodeType?[H]:H);else if(Uo.test(H)){for(X=X||dt.appendChild(h.createElement("div")),me=(Qr.exec(H)||["",""])[1].toLowerCase(),X.innerHTML=(de=wr[me]||wr._default)[1]+b.htmlPrefilter(H)+de[2],He=de[0];He--;)X=X.lastChild;b.merge(De,X.childNodes),(X=dt.firstChild).textContent=""}else De.push(h.createTextNode(H));for(dt.textContent="",Je=0;H=De[Je++];)if(w&&b.inArray(H,w)>-1)N&&N.push(H);else if(Ae=gn(H),X=un(dt.appendChild(H),"script"),Ae&&vi(X),y)for(He=0;H=X[He++];)gi.test(H.type||"")&&y.push(H);return dt}var fo=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Xe(){return!1}function sr(l,h){return l===function Br(){try{return le.activeElement}catch(l){}}()==("focus"===h)}function Jr(l,h,y,w,N,H){var X,me;if("object"==typeof h){for(me in"string"!=typeof y&&(w=w||y,y=void 0),h)Jr(l,me,y,w,h[me],H);return l}if(null==w&&null==N?(N=y,w=y=void 0):null==N&&("string"==typeof y?(N=w,w=void 0):(N=w,w=y,y=void 0)),!1===N)N=Xe;else if(!N)return l;return 1===H&&(X=N,N=function(de){return b().off(de),X.apply(this,arguments)},N.guid=X.guid||(X.guid=b.guid++)),l.each(function(){b.event.add(this,h,N,w,y)})}function ai(l,h,y){y?(U.set(l,h,!1),b.event.add(l,h,{namespace:!1,handler:function(w){var N,H,X=U.get(this,h);if(1&w.isTrigger&&this[h]){if(X.length)(b.event.special[h]||{}).delegateType&&w.stopPropagation();else if(X=I.call(arguments),U.set(this,h,X),N=y(this,h),this[h](),X!==(H=U.get(this,h))||N?U.set(this,h,!1):H={},X!==H)return w.stopImmediatePropagation(),w.preventDefault(),H&&H.value}else X.length&&(U.set(this,h,{value:b.event.trigger(b.extend(X[0],b.Event.prototype),X.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===U.get(l,h)&&b.event.add(l,h,ke)}b.event={global:{},add:function(l,h,y,w,N){var H,X,me,de,Ae,He,dt,De,Je,Ot,zt,kt=U.get(l);if(tn(l))for(y.handler&&(y=(H=y).handler,N=H.selector),N&&b.find.matchesSelector(An,N),y.guid||(y.guid=b.guid++),(de=kt.events)||(de=kt.events=Object.create(null)),(X=kt.handle)||(X=kt.handle=function(pr){return void 0!==b&&b.event.triggered!==pr.type?b.event.dispatch.apply(l,arguments):void 0}),Ae=(h=(h||"").match(zn)||[""]).length;Ae--;)Je=zt=(me=fo.exec(h[Ae])||[])[1],Ot=(me[2]||"").split(".").sort(),Je&&(dt=b.event.special[Je]||{},dt=b.event.special[Je=(N?dt.delegateType:dt.bindType)||Je]||{},He=b.extend({type:Je,origType:zt,data:w,handler:y,guid:y.guid,selector:N,needsContext:N&&b.expr.match.needsContext.test(N),namespace:Ot.join(".")},H),(De=de[Je])||((De=de[Je]=[]).delegateCount=0,(!dt.setup||!1===dt.setup.call(l,w,Ot,X))&&l.addEventListener&&l.addEventListener(Je,X)),dt.add&&(dt.add.call(l,He),He.handler.guid||(He.handler.guid=y.guid)),N?De.splice(De.delegateCount++,0,He):De.push(He),b.event.global[Je]=!0)},remove:function(l,h,y,w,N){var H,X,me,de,Ae,He,dt,De,Je,Ot,zt,kt=U.hasData(l)&&U.get(l);if(kt&&(de=kt.events)){for(Ae=(h=(h||"").match(zn)||[""]).length;Ae--;)if(Je=zt=(me=fo.exec(h[Ae])||[])[1],Ot=(me[2]||"").split(".").sort(),Je){for(dt=b.event.special[Je]||{},De=de[Je=(w?dt.delegateType:dt.bindType)||Je]||[],me=me[2]&&new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=H=De.length;H--;)He=De[H],(N||zt===He.origType)&&(!y||y.guid===He.guid)&&(!me||me.test(He.namespace))&&(!w||w===He.selector||"**"===w&&He.selector)&&(De.splice(H,1),He.selector&&De.delegateCount--,dt.remove&&dt.remove.call(l,He));X&&!De.length&&((!dt.teardown||!1===dt.teardown.call(l,Ot,kt.handle))&&b.removeEvent(l,Je,kt.handle),delete de[Je])}else for(Je in de)b.event.remove(l,Je+h[Ae],y,w,!0);b.isEmptyObject(de)&&U.remove(l,"handle events")}},dispatch:function(l){var h,y,w,N,H,X,me=new Array(arguments.length),de=b.event.fix(l),Ae=(U.get(this,"events")||Object.create(null))[de.type]||[],He=b.event.special[de.type]||{};for(me[0]=de,h=1;h<arguments.length;h++)me[h]=arguments[h];if(de.delegateTarget=this,!He.preDispatch||!1!==He.preDispatch.call(this,de)){for(X=b.event.handlers.call(this,de,Ae),h=0;(N=X[h++])&&!de.isPropagationStopped();)for(de.currentTarget=N.elem,y=0;(H=N.handlers[y++])&&!de.isImmediatePropagationStopped();)(!de.rnamespace||!1===H.namespace||de.rnamespace.test(H.namespace))&&(de.handleObj=H,de.data=H.data,void 0!==(w=((b.event.special[H.origType]||{}).handle||H.handler).apply(N.elem,me))&&!1===(de.result=w)&&(de.preventDefault(),de.stopPropagation()));return He.postDispatch&&He.postDispatch.call(this,de),de.result}},handlers:function(l,h){var y,w,N,H,X,me=[],de=h.delegateCount,Ae=l.target;if(de&&Ae.nodeType&&!("click"===l.type&&l.button>=1))for(;Ae!==this;Ae=Ae.parentNode||this)if(1===Ae.nodeType&&("click"!==l.type||!0!==Ae.disabled)){for(H=[],X={},y=0;y<de;y++)void 0===X[N=(w=h[y]).selector+" "]&&(X[N]=w.needsContext?b(N,this).index(Ae)>-1:b.find(N,this,null,[Ae]).length),X[N]&&H.push(w);H.length&&me.push({elem:Ae,handlers:H})}return Ae=this,de<h.length&&me.push({elem:Ae,handlers:h.slice(de)}),me},addProp:function(l,h){Object.defineProperty(b.Event.prototype,l,{enumerable:!0,configurable:!0,get:se(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(y){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(l){return l[b.expando]?l:new b.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var h=this||l;return Cr.test(h.type)&&h.click&&nt(h,"input")&&ai(h,"click",ke),!1},trigger:function(l){var h=this||l;return Cr.test(h.type)&&h.click&&nt(h,"input")&&ai(h,"click"),!0},_default:function(l){var h=l.target;return Cr.test(h.type)&&h.click&&nt(h,"input")&&U.get(h,"click")||nt(h,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},b.removeEvent=function(l,h,y){l.removeEventListener&&l.removeEventListener(h,y)},b.Event=function(l,h){if(!(this instanceof b.Event))return new b.Event(l,h);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?ke:Xe,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,h&&b.extend(this,h),this.timeStamp=l&&l.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Xe,isPropagationStopped:Xe,isImmediatePropagationStopped:Xe,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=ke,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=ke,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=ke,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(l,h){b.event.special[l]={setup:function(){return ai(this,l,sr),!1},trigger:function(){return ai(this,l),!0},_default:function(y){return U.get(y.target,l)},delegateType:h}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,h){b.event.special[l]={delegateType:h,bindType:h,handle:function(y){var w,N=this,H=y.relatedTarget,X=y.handleObj;return(!H||H!==N&&!b.contains(N,H))&&(y.type=X.origType,w=X.handler.apply(this,arguments),y.type=h),w}}}),b.fn.extend({on:function(l,h,y,w){return Jr(this,l,h,y,w)},one:function(l,h,y,w){return Jr(this,l,h,y,w,1)},off:function(l,h,y){var w,N;if(l&&l.preventDefault&&l.handleObj)return w=l.handleObj,b(l.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof l){for(N in l)this.off(N,h,l[N]);return this}return(!1===h||"function"==typeof h)&&(y=h,h=void 0),!1===y&&(y=Xe),this.each(function(){b.event.remove(this,l,y,h)})}});var ho=/<script|<style|<link/i,_i=/checked\s*(?:[^=]|=\s*.checked.)/i,ur=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ns(l,h){return nt(l,"table")&&nt(11!==h.nodeType?h:h.firstChild,"tr")&&b(l).children("tbody")[0]||l}function fa(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Zr(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function rs(l,h){var y,w,N,X,me,de;if(1===h.nodeType){if(U.hasData(l)&&(de=U.get(l).events))for(N in U.remove(h,"handle events"),de)for(y=0,w=de[N].length;y<w;y++)b.event.add(h,N,de[N][y]);re.hasData(l)&&(X=re.access(l),me=b.extend({},X),re.set(h,me))}}function is(l,h){var y=h.nodeName.toLowerCase();"input"===y&&Cr.test(l.type)?h.checked=l.checked:("input"===y||"textarea"===y)&&(h.defaultValue=l.defaultValue)}function Ui(l,h,y,w){h=O(h);var N,H,X,me,de,Ae,He=0,dt=l.length,De=dt-1,Je=h[0],Ot=se(Je);if(Ot||dt>1&&"string"==typeof Je&&!n.checkClone&&_i.test(Je))return l.each(function(zt){var kt=l.eq(zt);Ot&&(h[0]=Je.call(this,zt,kt.html())),Ui(kt,h,y,w)});if(dt&&(H=(N=jr(h,l[0].ownerDocument,!1,l,w)).firstChild,1===N.childNodes.length&&(N=H),H||w)){for(me=(X=b.map(un(N,"script"),fa)).length;He<dt;He++)de=N,He!==De&&(de=b.clone(de,!0,!0),me&&b.merge(X,un(de,"script"))),y.call(l[He],de,He);if(me)for(Ae=X[X.length-1].ownerDocument,b.map(X,Zr),He=0;He<me;He++)gi.test((de=X[He]).type||"")&&!U.access(de,"globalEval")&&b.contains(Ae,de)&&(de.src&&"module"!==(de.type||"").toLowerCase()?b._evalUrl&&!de.noModule&&b._evalUrl(de.src,{nonce:de.nonce||de.getAttribute("nonce")},Ae):pe(de.textContent.replace(ur,""),de,Ae))}return l}function os(l,h,y){for(var w,N=h?b.filter(h,l):l,H=0;null!=(w=N[H]);H++)!y&&1===w.nodeType&&b.cleanData(un(w)),w.parentNode&&(y&&gn(w)&&vi(un(w,"script")),w.parentNode.removeChild(w));return l}b.extend({htmlPrefilter:function(l){return l},clone:function(l,h,y){var w,N,H,X,me=l.cloneNode(!0),de=gn(l);if(!(n.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||b.isXMLDoc(l)))for(X=un(me),w=0,N=(H=un(l)).length;w<N;w++)is(H[w],X[w]);if(h)if(y)for(H=H||un(l),X=X||un(me),w=0,N=H.length;w<N;w++)rs(H[w],X[w]);else rs(l,me);return(X=un(me,"script")).length>0&&vi(X,!de&&un(l,"script")),me},cleanData:function(l){for(var h,y,w,N=b.event.special,H=0;void 0!==(y=l[H]);H++)if(tn(y)){if(h=y[U.expando]){if(h.events)for(w in h.events)N[w]?b.event.remove(y,w):b.removeEvent(y,w,h.handle);y[U.expando]=void 0}y[re.expando]&&(y[re.expando]=void 0)}}}),b.fn.extend({detach:function(l){return os(this,l,!0)},remove:function(l){return os(this,l)},text:function(l){return cn(this,function(h){return void 0===h?b.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=h)})},null,l,arguments.length)},append:function(){return Ui(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ns(this,l).appendChild(l)})},prepend:function(){return Ui(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var h=ns(this,l);h.insertBefore(l,h.firstChild)}})},before:function(){return Ui(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Ui(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,h=0;null!=(l=this[h]);h++)1===l.nodeType&&(b.cleanData(un(l,!1)),l.textContent="");return this},clone:function(l,h){return l=null!=l&&l,h=null==h?l:h,this.map(function(){return b.clone(this,l,h)})},html:function(l){return cn(this,function(h){var y=this[0]||{},w=0,N=this.length;if(void 0===h&&1===y.nodeType)return y.innerHTML;if("string"==typeof h&&!ho.test(h)&&!wr[(Qr.exec(h)||["",""])[1].toLowerCase()]){h=b.htmlPrefilter(h);try{for(;w<N;w++)1===(y=this[w]||{}).nodeType&&(b.cleanData(un(y,!1)),y.innerHTML=h);y=0}catch(H){}}y&&this.empty().append(h)},null,l,arguments.length)},replaceWith:function(){var l=[];return Ui(this,arguments,function(h){var y=this.parentNode;b.inArray(this,l)<0&&(b.cleanData(un(this)),y&&y.replaceChild(h,this))},l)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,h){b.fn[l]=function(y){for(var w,N=[],H=b(y),X=H.length-1,me=0;me<=X;me++)w=me===X?this:this.clone(!0),b(H[me])[h](w),k.apply(N,w.get());return this.pushStack(N)}});var Da=new RegExp("^("+Nt+")(?!px)[a-z%]+$","i"),as=/^--/,Ba=function(l){var h=l.ownerDocument.defaultView;return(!h||!h.opener)&&(h=g),h.getComputedStyle(l)},ha=function(l,h,y){var w,N,H={};for(N in h)H[N]=l.style[N],l.style[N]=h[N];for(N in w=y.call(l),h)l.style[N]=H[N];return w},ks=new RegExp(wn.join("|"),"i"),ss="[\\x20\\t\\r\\n\\f]",Po=new RegExp("^"+ss+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ss+"+$","g");function pa(l,h,y){var w,N,H,X,me=as.test(h),de=l.style;return(y=y||Ba(l))&&(X=y.getPropertyValue(h)||y[h],me&&X&&(X=X.replace(Po,"$1")||void 0),""===X&&!gn(l)&&(X=b.style(l,h)),!n.pixelBoxStyles()&&Da.test(X)&&ks.test(h)&&(w=de.width,N=de.minWidth,H=de.maxWidth,de.minWidth=de.maxWidth=de.width=X,X=y.width,de.width=w,de.minWidth=N,de.maxWidth=H)),void 0!==X?X+"":X}function Os(l,h){return{get:function(){if(!l())return(this.get=h).apply(this,arguments);delete this.get}}}!function(){function l(){if(Ae){de.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ae.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",An.appendChild(de).appendChild(Ae);var He=g.getComputedStyle(Ae);y="1%"!==He.top,me=12===h(He.marginLeft),Ae.style.right="60%",H=36===h(He.right),w=36===h(He.width),Ae.style.position="absolute",N=12===h(Ae.offsetWidth/3),An.removeChild(de),Ae=null}}function h(He){return Math.round(parseFloat(He))}var y,w,N,H,X,me,de=le.createElement("div"),Ae=le.createElement("div");!Ae.style||(Ae.style.backgroundClip="content-box",Ae.cloneNode(!0).style.backgroundClip="",n.clearCloneStyle="content-box"===Ae.style.backgroundClip,b.extend(n,{boxSizingReliable:function(){return l(),w},pixelBoxStyles:function(){return l(),H},pixelPosition:function(){return l(),y},reliableMarginLeft:function(){return l(),me},scrollboxSize:function(){return l(),N},reliableTrDimensions:function(){var He,dt,De,Je;return null==X&&(He=le.createElement("table"),dt=le.createElement("tr"),De=le.createElement("div"),He.style.cssText="position:absolute;left:-11111px;border-collapse:separate",dt.style.cssText="border:1px solid",dt.style.height="1px",De.style.height="9px",De.style.display="block",An.appendChild(He).appendChild(dt).appendChild(De),Je=g.getComputedStyle(dt),X=parseInt(Je.height,10)+parseInt(Je.borderTopWidth,10)+parseInt(Je.borderBottomWidth,10)===dt.offsetHeight,An.removeChild(He)),X}}))}();var Ls=["Webkit","Moz","ms"],Go=le.createElement("div").style,Mo={};function zr(l){return b.cssProps[l]||Mo[l]||(l in Go?l:Mo[l]=function ma(l){for(var h=l[0].toUpperCase()+l.slice(1),y=Ls.length;y--;)if((l=Ls[y]+h)in Go)return l}(l)||l)}var Ao=/^(none|table(?!-c[ea]).+)/,uu={position:"absolute",visibility:"hidden",display:"block"},Va={letterSpacing:"0",fontWeight:"400"};function us(l,h,y){var w=sn.exec(h);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):h}function $o(l,h,y,w,N,H){var X="width"===h?1:0,me=0,de=0;if(y===(w?"border":"content"))return 0;for(;X<4;X+=2)"margin"===y&&(de+=b.css(l,y+wn[X],!0,N)),w?("content"===y&&(de-=b.css(l,"padding"+wn[X],!0,N)),"margin"!==y&&(de-=b.css(l,"border"+wn[X]+"Width",!0,N))):(de+=b.css(l,"padding"+wn[X],!0,N),"padding"!==y?de+=b.css(l,"border"+wn[X]+"Width",!0,N):me+=b.css(l,"border"+wn[X]+"Width",!0,N));return!w&&H>=0&&(de+=Math.max(0,Math.ceil(l["offset"+h[0].toUpperCase()+h.slice(1)]-H-de-me-.5))||0),de}function ls(l,h,y){var w=Ba(l),H=(!n.boxSizingReliable()||y)&&"border-box"===b.css(l,"boxSizing",!1,w),X=H,me=pa(l,h,w),de="offset"+h[0].toUpperCase()+h.slice(1);if(Da.test(me)){if(!y)return me;me="auto"}return(!n.boxSizingReliable()&&H||!n.reliableTrDimensions()&&nt(l,"tr")||"auto"===me||!parseFloat(me)&&"inline"===b.css(l,"display",!1,w))&&l.getClientRects().length&&(H="border-box"===b.css(l,"boxSizing",!1,w),(X=de in l)&&(me=l[de])),(me=parseFloat(me)||0)+$o(l,h,y||(H?"border":"content"),X,w,me)+"px"}function st(l,h,y,w,N){return new st.prototype.init(l,h,y,w,N)}b.extend({cssHooks:{opacity:{get:function(l,h){if(h){var y=pa(l,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,h,y,w){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var N,H,X,me=hn(h),de=as.test(h),Ae=l.style;if(de||(h=zr(me)),X=b.cssHooks[h]||b.cssHooks[me],void 0===y)return X&&"get"in X&&void 0!==(N=X.get(l,!1,w))?N:Ae[h];if("string"==(H=typeof y)&&(N=sn.exec(y))&&N[1]&&(y=qi(l,h,N),H="number"),null==y||y!=y)return;"number"===H&&!de&&(y+=N&&N[3]||(b.cssNumber[me]?"":"px")),!n.clearCloneStyle&&""===y&&0===h.indexOf("background")&&(Ae[h]="inherit"),(!X||!("set"in X)||void 0!==(y=X.set(l,y,w)))&&(de?Ae.setProperty(h,y):Ae[h]=y)}},css:function(l,h,y,w){var N,H,X,me=hn(h);return as.test(h)||(h=zr(me)),(X=b.cssHooks[h]||b.cssHooks[me])&&"get"in X&&(N=X.get(l,!0,y)),void 0===N&&(N=pa(l,h,w)),"normal"===N&&h in Va&&(N=Va[h]),""===y||y?(H=parseFloat(N),!0===y||isFinite(H)?H||0:N):N}}),b.each(["height","width"],function(l,h){b.cssHooks[h]={get:function(y,w,N){if(w)return!Ao.test(b.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?ls(y,h,N):ha(y,uu,function(){return ls(y,h,N)})},set:function(y,w,N){var H,X=Ba(y),me=!n.scrollboxSize()&&"absolute"===X.position,Ae=(me||N)&&"border-box"===b.css(y,"boxSizing",!1,X),He=N?$o(y,h,N,Ae,X):0;return Ae&&me&&(He-=Math.ceil(y["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(X[h])-$o(y,h,"border",!1,X)-.5)),He&&(H=sn.exec(w))&&"px"!==(H[3]||"px")&&(y.style[h]=w,w=b.css(y,h)),us(0,w,He)}}}),b.cssHooks.marginLeft=Os(n.reliableMarginLeft,function(l,h){if(h)return(parseFloat(pa(l,"marginLeft"))||l.getBoundingClientRect().left-ha(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(l,h){b.cssHooks[l+h]={expand:function(y){for(var w=0,N={},H="string"==typeof y?y.split(" "):[y];w<4;w++)N[l+wn[w]+h]=H[w]||H[w-2]||H[0];return N}},"margin"!==l&&(b.cssHooks[l+h].set=us)}),b.fn.extend({css:function(l,h){return cn(this,function(y,w,N){var H,X,me={},de=0;if(Array.isArray(w)){for(H=Ba(y),X=w.length;de<X;de++)me[w[de]]=b.css(y,w[de],!1,H);return me}return void 0!==N?b.style(y,w,N):b.css(y,w)},l,h,arguments.length>1)}}),b.Tween=st,(st.prototype={constructor:st,init:function(l,h,y,w,N,H){this.elem=l,this.prop=y,this.easing=N||b.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=w,this.unit=H||(b.cssNumber[y]?"":"px")},cur:function(){var l=st.propHooks[this.prop];return l&&l.get?l.get(this):st.propHooks._default.get(this)},run:function(l){var h,y=st.propHooks[this.prop];return this.pos=h=this.options.duration?b.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):st.propHooks._default.set(this),this}}).init.prototype=st.prototype,(st.propHooks={_default:{get:function(l){var h;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(h=b.css(l.elem,l.prop,""))&&"auto"!==h?h:0},set:function(l){b.fx.step[l.prop]?b.fx.step[l.prop](l):1!==l.elem.nodeType||!b.cssHooks[l.prop]&&null==l.elem.style[zr(l.prop)]?l.elem[l.prop]=l.now:b.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=st.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},b.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},b.fx=st.prototype.init,b.fx.step={};var eo,po,Vr=/^(?:toggle|show|hide)$/,ga=/queueHooks$/;function yi(){po&&(!1===le.hidden&&g.requestAnimationFrame?g.requestAnimationFrame(yi):g.setTimeout(yi,b.fx.interval),b.fx.tick())}function Ur(){return g.setTimeout(function(){eo=void 0}),eo=Date.now()}function xi(l,h){var y,w=0,N={height:l};for(h=h?1:0;w<4;w+=2-h)N["margin"+(y=wn[w])]=N["padding"+y]=l;return h&&(N.opacity=N.width=l),N}function ko(l,h,y){for(var w,N=(_r.tweeners[h]||[]).concat(_r.tweeners["*"]),H=0,X=N.length;H<X;H++)if(w=N[H].call(y,h,l))return w}function _r(l,h,y){var w,N,H=0,X=_r.prefilters.length,me=b.Deferred().always(function(){delete de.elem}),de=function(){if(N)return!1;for(var dt=eo||Ur(),De=Math.max(0,Ae.startTime+Ae.duration-dt),Ot=1-(De/Ae.duration||0),zt=0,kt=Ae.tweens.length;zt<kt;zt++)Ae.tweens[zt].run(Ot);return me.notifyWith(l,[Ae,Ot,De]),Ot<1&&kt?De:(kt||me.notifyWith(l,[Ae,1,0]),me.resolveWith(l,[Ae]),!1)},Ae=me.promise({elem:l,props:b.extend({},h),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},y),originalProperties:h,originalOptions:y,startTime:eo||Ur(),duration:y.duration,tweens:[],createTween:function(dt,De){var Je=b.Tween(l,Ae.opts,dt,De,Ae.opts.specialEasing[dt]||Ae.opts.easing);return Ae.tweens.push(Je),Je},stop:function(dt){var De=0,Je=dt?Ae.tweens.length:0;if(N)return this;for(N=!0;De<Je;De++)Ae.tweens[De].run(1);return dt?(me.notifyWith(l,[Ae,1,0]),me.resolveWith(l,[Ae,dt])):me.rejectWith(l,[Ae,dt]),this}}),He=Ae.props;for(function Sr(l,h){var y,w,N,H,X;for(y in l)if(N=h[w=hn(y)],H=l[y],Array.isArray(H)&&(N=H[1],H=l[y]=H[0]),y!==w&&(l[w]=H,delete l[y]),(X=b.cssHooks[w])&&"expand"in X)for(y in H=X.expand(H),delete l[w],H)y in l||(l[y]=H[y],h[y]=N);else h[w]=N}(He,Ae.opts.specialEasing);H<X;H++)if(w=_r.prefilters[H].call(Ae,l,He,Ae.opts))return se(w.stop)&&(b._queueHooks(Ae.elem,Ae.opts.queue).stop=w.stop.bind(w)),w;return b.map(He,ko,Ae),se(Ae.opts.start)&&Ae.opts.start.call(l,Ae),Ae.progress(Ae.opts.progress).done(Ae.opts.done,Ae.opts.complete).fail(Ae.opts.fail).always(Ae.opts.always),b.fx.timer(b.extend(de,{elem:l,anim:Ae,queue:Ae.opts.queue})),Ae}b.Animation=b.extend(_r,{tweeners:{"*":[function(l,h){var y=this.createTween(l,h);return qi(y.elem,l,sn.exec(h),y),y}]},tweener:function(l,h){se(l)?(h=l,l=["*"]):l=l.match(zn);for(var y,w=0,N=l.length;w<N;w++)(_r.tweeners[y=l[w]]=_r.tweeners[y]||[]).unshift(h)},prefilters:[function mo(l,h,y){var w,N,H,X,me,de,Ae,He,dt="width"in h||"height"in h,De=this,Je={},Ot=l.style,zt=l.nodeType&&fr(l),kt=U.get(l,"fxshow");for(w in y.queue||(null==(X=b._queueHooks(l,"fx")).unqueued&&(X.unqueued=0,me=X.empty.fire,X.empty.fire=function(){X.unqueued||me()}),X.unqueued++,De.always(function(){De.always(function(){X.unqueued--,b.queue(l,"fx").length||X.empty.fire()})})),h)if(Vr.test(N=h[w])){if(delete h[w],H=H||"toggle"===N,N===(zt?"hide":"show")){if("show"!==N||!kt||void 0===kt[w])continue;zt=!0}Je[w]=kt&&kt[w]||b.style(l,w)}if((de=!b.isEmptyObject(h))||!b.isEmptyObject(Je))for(w in dt&&1===l.nodeType&&(y.overflow=[Ot.overflow,Ot.overflowX,Ot.overflowY],null==(Ae=kt&&kt.display)&&(Ae=U.get(l,"display")),"none"===(He=b.css(l,"display"))&&(Ae?He=Ae:(hr([l],!0),Ae=l.style.display||Ae,He=b.css(l,"display"),hr([l]))),("inline"===He||"inline-block"===He&&null!=Ae)&&"none"===b.css(l,"float")&&(de||(De.done(function(){Ot.display=Ae}),null==Ae&&(Ae="none"===(He=Ot.display)?"":He)),Ot.display="inline-block")),y.overflow&&(Ot.overflow="hidden",De.always(function(){Ot.overflow=y.overflow[0],Ot.overflowX=y.overflow[1],Ot.overflowY=y.overflow[2]})),de=!1,Je)de||(kt?"hidden"in kt&&(zt=kt.hidden):kt=U.access(l,"fxshow",{display:Ae}),H&&(kt.hidden=!zt),zt&&hr([l],!0),De.done(function(){for(w in zt||hr([l]),U.remove(l,"fxshow"),Je)b.style(l,w,Je[w])})),de=ko(zt?kt[w]:0,w,De),w in kt||(kt[w]=de.start,zt&&(de.end=de.start,de.start=0))}],prefilter:function(l,h){h?_r.prefilters.unshift(l):_r.prefilters.push(l)}}),b.speed=function(l,h,y){var w=l&&"object"==typeof l?b.extend({},l):{complete:y||!y&&h||se(l)&&l,duration:l,easing:y&&h||h&&!se(h)&&h};return b.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in b.fx.speeds?b.fx.speeds[w.duration]:b.fx.speeds._default),(null==w.queue||!0===w.queue)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){se(w.old)&&w.old.call(this),w.queue&&b.dequeue(this,w.queue)},w},b.fn.extend({fadeTo:function(l,h,y,w){return this.filter(fr).css("opacity",0).show().end().animate({opacity:h},l,y,w)},animate:function(l,h,y,w){var N=b.isEmptyObject(l),H=b.speed(h,y,w),X=function(){var me=_r(this,b.extend({},l),H);(N||U.get(this,"finish"))&&me.stop(!0)};return X.finish=X,N||!1===H.queue?this.each(X):this.queue(H.queue,X)},stop:function(l,h,y){var w=function(N){var H=N.stop;delete N.stop,H(y)};return"string"!=typeof l&&(y=h,h=l,l=void 0),h&&this.queue(l||"fx",[]),this.each(function(){var N=!0,H=null!=l&&l+"queueHooks",X=b.timers,me=U.get(this);if(H)me[H]&&me[H].stop&&w(me[H]);else for(H in me)me[H]&&me[H].stop&&ga.test(H)&&w(me[H]);for(H=X.length;H--;)X[H].elem===this&&(null==l||X[H].queue===l)&&(X[H].anim.stop(y),N=!1,X.splice(H,1));(N||!y)&&b.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var h,y=U.get(this),w=y[l+"queue"],N=y[l+"queueHooks"],H=b.timers,X=w?w.length:0;for(y.finish=!0,b.queue(this,l,[]),N&&N.stop&&N.stop.call(this,!0),h=H.length;h--;)H[h].elem===this&&H[h].queue===l&&(H[h].anim.stop(!0),H.splice(h,1));for(h=0;h<X;h++)w[h]&&w[h].finish&&w[h].finish.call(this);delete y.finish})}}),b.each(["toggle","show","hide"],function(l,h){var y=b.fn[h];b.fn[h]=function(w,N,H){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(xi(h,!0),w,N,H)}}),b.each({slideDown:xi("show"),slideUp:xi("hide"),slideToggle:xi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,h){b.fn[l]=function(y,w,N){return this.animate(h,y,w,N)}}),b.timers=[],b.fx.tick=function(){var l,h=0,y=b.timers;for(eo=Date.now();h<y.length;h++)!(l=y[h])()&&y[h]===l&&y.splice(h--,1);y.length||b.fx.stop(),eo=void 0},b.fx.timer=function(l){b.timers.push(l),b.fx.start()},b.fx.interval=13,b.fx.start=function(){po||(po=!0,yi())},b.fx.stop=function(){po=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(l,h){return l=b.fx&&b.fx.speeds[l]||l,this.queue(h=h||"fx",function(y,w){var N=g.setTimeout(y,l);w.stop=function(){g.clearTimeout(N)}})},function(){var l=le.createElement("input"),y=le.createElement("select").appendChild(le.createElement("option"));l.type="checkbox",n.checkOn=""!==l.value,n.optSelected=y.selected,(l=le.createElement("input")).value="t",l.type="radio",n.radioValue="t"===l.value}();var Ai,Un=b.expr.attrHandle;b.fn.extend({attr:function(l,h){return cn(this,b.attr,l,h,arguments.length>1)},removeAttr:function(l){return this.each(function(){b.removeAttr(this,l)})}}),b.extend({attr:function(l,h,y){var w,N,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return void 0===l.getAttribute?b.prop(l,h,y):((1!==H||!b.isXMLDoc(l))&&(N=b.attrHooks[h.toLowerCase()]||(b.expr.match.bool.test(h)?Ai:void 0)),void 0!==y?null===y?void b.removeAttr(l,h):N&&"set"in N&&void 0!==(w=N.set(l,y,h))?w:(l.setAttribute(h,y+""),y):N&&"get"in N&&null!==(w=N.get(l,h))?w:null==(w=b.find.attr(l,h))?void 0:w)},attrHooks:{type:{set:function(l,h){if(!n.radioValue&&"radio"===h&&nt(l,"input")){var y=l.value;return l.setAttribute("type",h),y&&(l.value=y),h}}}},removeAttr:function(l,h){var y,w=0,N=h&&h.match(zn);if(N&&1===l.nodeType)for(;y=N[w++];)l.removeAttribute(y)}}),Ai={set:function(l,h,y){return!1===h?b.removeAttr(l,y):l.setAttribute(y,y),y}},b.each(b.expr.match.bool.source.match(/\w+/g),function(l,h){var y=Un[h]||b.find.attr;Un[h]=function(w,N,H){var X,me,de=N.toLowerCase();return H||(me=Un[de],Un[de]=X,X=null!=y(w,N,H)?de:null,Un[de]=me),X}});var Wo=/^(?:input|select|textarea|button)$/i,Tr=/^(?:a|area)$/i;function Lr(l){return(l.match(zn)||[]).join(" ")}function _n(l){return l.getAttribute&&l.getAttribute("class")||""}function kr(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(zn)||[]}b.fn.extend({prop:function(l,h){return cn(this,b.prop,l,h,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[b.propFix[l]||l]})}}),b.extend({prop:function(l,h,y){var w,N,H=l.nodeType;if(3!==H&&8!==H&&2!==H)return(1!==H||!b.isXMLDoc(l))&&(N=b.propHooks[h=b.propFix[h]||h]),void 0!==y?N&&"set"in N&&void 0!==(w=N.set(l,y,h))?w:l[h]=y:N&&"get"in N&&null!==(w=N.get(l,h))?w:l[h]},propHooks:{tabIndex:{get:function(l){var h=b.find.attr(l,"tabindex");return h?parseInt(h,10):Wo.test(l.nodeName)||Tr.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),n.optSelected||(b.propHooks.selected={get:function(l){return null},set:function(l){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(l){var h,y,w,N,H,X;return se(l)?this.each(function(me){b(this).addClass(l.call(this,me,_n(this)))}):(h=kr(l)).length?this.each(function(){if(w=_n(this),y=1===this.nodeType&&" "+Lr(w)+" "){for(H=0;H<h.length;H++)y.indexOf(" "+(N=h[H])+" ")<0&&(y+=N+" ");X=Lr(y),w!==X&&this.setAttribute("class",X)}}):this},removeClass:function(l){var h,y,w,N,H,X;return se(l)?this.each(function(me){b(this).removeClass(l.call(this,me,_n(this)))}):arguments.length?(h=kr(l)).length?this.each(function(){if(w=_n(this),y=1===this.nodeType&&" "+Lr(w)+" "){for(H=0;H<h.length;H++)for(N=h[H];y.indexOf(" "+N+" ")>-1;)y=y.replace(" "+N+" "," ");X=Lr(y),w!==X&&this.setAttribute("class",X)}}):this:this.attr("class","")},toggleClass:function(l,h){var y,w,N,H,X=typeof l,me="string"===X||Array.isArray(l);return se(l)?this.each(function(de){b(this).toggleClass(l.call(this,de,_n(this),h),h)}):"boolean"==typeof h&&me?h?this.addClass(l):this.removeClass(l):(y=kr(l),this.each(function(){if(me)for(H=b(this),N=0;N<y.length;N++)H.hasClass(w=y[N])?H.removeClass(w):H.addClass(w);else(void 0===l||"boolean"===X)&&((w=_n(this))&&U.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===l?"":U.get(this,"__className__")||""))}))},hasClass:function(l){var h,y,w=0;for(h=" "+l+" ";y=this[w++];)if(1===y.nodeType&&(" "+Lr(_n(y))+" ").indexOf(h)>-1)return!0;return!1}});var Oo=/\r/g;b.fn.extend({val:function(l){var h,y,w,N=this[0];return arguments.length?(w=se(l),this.each(function(H){var X;1===this.nodeType&&(null==(X=w?l.call(this,H,b(this).val()):l)?X="":"number"==typeof X?X+="":Array.isArray(X)&&(X=b.map(X,function(me){return null==me?"":me+""})),(!(h=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])||!("set"in h)||void 0===h.set(this,X,"value"))&&(this.value=X))})):N?(h=b.valHooks[N.type]||b.valHooks[N.nodeName.toLowerCase()])&&"get"in h&&void 0!==(y=h.get(N,"value"))?y:"string"==typeof(y=N.value)?y.replace(Oo,""):null==y?"":y:void 0}}),b.extend({valHooks:{option:{get:function(l){var h=b.find.attr(l,"value");return null!=h?h:Lr(b.text(l))}},select:{get:function(l){var h,y,w,N=l.options,H=l.selectedIndex,X="select-one"===l.type,me=X?null:[],de=X?H+1:N.length;for(w=H<0?de:X?H:0;w<de;w++)if(((y=N[w]).selected||w===H)&&!y.disabled&&(!y.parentNode.disabled||!nt(y.parentNode,"optgroup"))){if(h=b(y).val(),X)return h;me.push(h)}return me},set:function(l,h){for(var y,w,N=l.options,H=b.makeArray(h),X=N.length;X--;)((w=N[X]).selected=b.inArray(b.valHooks.option.get(w),H)>-1)&&(y=!0);return y||(l.selectedIndex=-1),H}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(l,h){if(Array.isArray(h))return l.checked=b.inArray(b(l).val(),h)>-1}},n.checkOn||(b.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),n.focusin="onfocusin"in g;var va=/^(?:focusinfocus|focusoutblur)$/,Lo=function(l){l.stopPropagation()};b.extend(b.event,{trigger:function(l,h,y,w){var N,H,X,me,de,Ae,He,dt,De=[y||le],Je=K.call(l,"type")?l.type:l,Ot=K.call(l,"namespace")?l.namespace.split("."):[];if(H=dt=X=y=y||le,3!==y.nodeType&&8!==y.nodeType&&!va.test(Je+b.event.triggered)&&(Je.indexOf(".")>-1&&(Ot=Je.split("."),Je=Ot.shift(),Ot.sort()),de=Je.indexOf(":")<0&&"on"+Je,(l=l[b.expando]?l:new b.Event(Je,"object"==typeof l&&l)).isTrigger=w?2:3,l.namespace=Ot.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=y),h=null==h?[l]:b.makeArray(h,[l]),He=b.event.special[Je]||{},w||!He.trigger||!1!==He.trigger.apply(y,h))){if(!w&&!He.noBubble&&!ce(y)){for(va.test((me=He.delegateType||Je)+Je)||(H=H.parentNode);H;H=H.parentNode)De.push(H),X=H;X===(y.ownerDocument||le)&&De.push(X.defaultView||X.parentWindow||g)}for(N=0;(H=De[N++])&&!l.isPropagationStopped();)dt=H,l.type=N>1?me:He.bindType||Je,(Ae=(U.get(H,"events")||Object.create(null))[l.type]&&U.get(H,"handle"))&&Ae.apply(H,h),(Ae=de&&H[de])&&Ae.apply&&tn(H)&&(l.result=Ae.apply(H,h),!1===l.result&&l.preventDefault());return l.type=Je,!w&&!l.isDefaultPrevented()&&(!He._default||!1===He._default.apply(De.pop(),h))&&tn(y)&&de&&se(y[Je])&&!ce(y)&&((X=y[de])&&(y[de]=null),b.event.triggered=Je,l.isPropagationStopped()&&dt.addEventListener(Je,Lo),y[Je](),l.isPropagationStopped()&&dt.removeEventListener(Je,Lo),b.event.triggered=void 0,X&&(y[de]=X)),l.result}},simulate:function(l,h,y){var w=b.extend(new b.Event,y,{type:l,isSimulated:!0});b.event.trigger(w,null,h)}}),b.fn.extend({trigger:function(l,h){return this.each(function(){b.event.trigger(l,h,this)})},triggerHandler:function(l,h){var y=this[0];if(y)return b.event.trigger(l,h,y,!0)}}),n.focusin||b.each({focus:"focusin",blur:"focusout"},function(l,h){var y=function(w){b.event.simulate(h,w.target,b.event.fix(w))};b.event.special[h]={setup:function(){var w=this.ownerDocument||this.document||this,N=U.access(w,h);N||w.addEventListener(l,y,!0),U.access(w,h,(N||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,N=U.access(w,h)-1;N?U.access(w,h,N):(w.removeEventListener(l,y,!0),U.remove(w,h))}}});var _a=g.location,Ha={guid:Date.now()},Yo=/\?/;b.parseXML=function(l){var h,y;if(!l||"string"!=typeof l)return null;try{h=(new g.DOMParser).parseFromString(l,"text/xml")}catch(w){}return y=h&&h.getElementsByTagName("parsererror")[0],(!h||y)&&b.error("Invalid XML: "+(y?b.map(y.childNodes,function(w){return w.textContent}).join("\n"):l)),h};var ja=/\[\]$/,Xo=/\r?\n/g,Fs=/^(?:submit|button|image|reset|file)$/i,Rs=/^(?:input|select|textarea|keygen)/i;function cs(l,h,y,w){var N;if(Array.isArray(h))b.each(h,function(H,X){y||ja.test(l)?w(l,X):cs(l+"["+("object"==typeof X&&null!=X?H:"")+"]",X,y,w)});else if(y||"object"!==we(h))w(l,h);else for(N in h)cs(l+"["+N+"]",h[N],y,w)}b.param=function(l,h){var y,w=[],N=function(H,X){var me=se(X)?X():X;w[w.length]=encodeURIComponent(H)+"="+encodeURIComponent(null==me?"":me)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!b.isPlainObject(l))b.each(l,function(){N(this.name,this.value)});else for(y in l)cs(y,l[y],h,N);return w.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=b.prop(this,"elements");return l?b.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!b(this).is(":disabled")&&Rs.test(this.nodeName)&&!Fs.test(l)&&(this.checked||!Cr.test(l))}).map(function(l,h){var y=b(this).val();return null==y?null:Array.isArray(y)?b.map(y,function(w){return{name:h.name,value:w.replace(Xo,"\r\n")}}):{name:h.name,value:y.replace(Xo,"\r\n")}}).get()}});var ya=/%20/g,Ns=/#.*$/,bi=/([?&])_=[^&]*/,Ko=/^(.*?):[ \t]*([^\r\n]*)$/gm,go=/^(?:GET|HEAD)$/,za=/^\/\//,Er={},Gi={},Dt="*/".concat("*"),Ci=le.createElement("a");function Gn(l){return function(h,y){"string"!=typeof h&&(y=h,h="*");var w,N=0,H=h.toLowerCase().match(zn)||[];if(se(y))for(;w=H[N++];)"+"===w[0]?(w=w.slice(1)||"*",(l[w]=l[w]||[]).unshift(y)):(l[w]=l[w]||[]).push(y)}}function kn(l,h,y,w){var N={},H=l===Gi;function X(me){var de;return N[me]=!0,b.each(l[me]||[],function(Ae,He){var dt=He(h,y,w);return"string"!=typeof dt||H||N[dt]?H?!(de=dt):void 0:(h.dataTypes.unshift(dt),X(dt),!1)}),de}return X(h.dataTypes[0])||!N["*"]&&X("*")}function Ua(l,h){var y,w,N=b.ajaxSettings.flatOptions||{};for(y in h)void 0!==h[y]&&((N[y]?l:w||(w={}))[y]=h[y]);return w&&b.extend(!0,l,w),l}Ci.href=_a.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_a.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_a.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,h){return h?Ua(Ua(l,b.ajaxSettings),h):Ua(b.ajaxSettings,l)},ajaxPrefilter:Gn(Er),ajaxTransport:Gn(Gi),ajax:function(l,h){"object"==typeof l&&(h=l,l=void 0);var y,w,N,H,X,me,de,Ae,He,dt,De=b.ajaxSetup({},h=h||{}),Je=De.context||De,Ot=De.context&&(Je.nodeType||Je.jquery)?b(Je):b.event,zt=b.Deferred(),kt=b.Callbacks("once memory"),pr=De.statusCode||{},Qt={},Ir={},$n="canceled",nn={readyState:0,getResponseHeader:function(Fn){var mr;if(de){if(!H)for(H={};mr=Ko.exec(N);)H[mr[1].toLowerCase()+" "]=(H[mr[1].toLowerCase()+" "]||[]).concat(mr[2]);mr=H[Fn.toLowerCase()+" "]}return null==mr?null:mr.join(", ")},getAllResponseHeaders:function(){return de?N:null},setRequestHeader:function(Fn,mr){return null==de&&(Fn=Ir[Fn.toLowerCase()]=Ir[Fn.toLowerCase()]||Fn,Qt[Fn]=mr),this},overrideMimeType:function(Fn){return null==de&&(De.mimeType=Fn),this},statusCode:function(Fn){var mr;if(Fn)if(de)nn.always(Fn[nn.status]);else for(mr in Fn)pr[mr]=[pr[mr],Fn[mr]];return this},abort:function(Fn){var mr=Fn||$n;return y&&y.abort(mr),qr(0,mr),this}};if(zt.promise(nn),De.url=((l||De.url||_a.href)+"").replace(za,_a.protocol+"//"),De.type=h.method||h.type||De.method||De.type,De.dataTypes=(De.dataType||"*").toLowerCase().match(zn)||[""],null==De.crossDomain){me=le.createElement("a");try{me.href=De.url,me.href=me.href,De.crossDomain=Ci.protocol+"//"+Ci.host!=me.protocol+"//"+me.host}catch(Fn){De.crossDomain=!0}}if(De.data&&De.processData&&"string"!=typeof De.data&&(De.data=b.param(De.data,De.traditional)),kn(Er,De,h,nn),de)return nn;for(He in(Ae=b.event&&De.global)&&0==b.active++&&b.event.trigger("ajaxStart"),De.type=De.type.toUpperCase(),De.hasContent=!go.test(De.type),w=De.url.replace(Ns,""),De.hasContent?De.data&&De.processData&&0===(De.contentType||"").indexOf("application/x-www-form-urlencoded")&&(De.data=De.data.replace(ya,"+")):(dt=De.url.slice(w.length),De.data&&(De.processData||"string"==typeof De.data)&&(w+=(Yo.test(w)?"&":"?")+De.data,delete De.data),!1===De.cache&&(w=w.replace(bi,"$1"),dt=(Yo.test(w)?"&":"?")+"_="+Ha.guid+++dt),De.url=w+dt),De.ifModified&&(b.lastModified[w]&&nn.setRequestHeader("If-Modified-Since",b.lastModified[w]),b.etag[w]&&nn.setRequestHeader("If-None-Match",b.etag[w])),(De.data&&De.hasContent&&!1!==De.contentType||h.contentType)&&nn.setRequestHeader("Content-Type",De.contentType),nn.setRequestHeader("Accept",De.dataTypes[0]&&De.accepts[De.dataTypes[0]]?De.accepts[De.dataTypes[0]]+("*"!==De.dataTypes[0]?", "+Dt+"; q=0.01":""):De.accepts["*"]),De.headers)nn.setRequestHeader(He,De.headers[He]);if(De.beforeSend&&(!1===De.beforeSend.call(Je,nn,De)||de))return nn.abort();if($n="abort",kt.add(De.complete),nn.done(De.success),nn.fail(De.error),y=kn(Gi,De,h,nn)){if(nn.readyState=1,Ae&&Ot.trigger("ajaxSend",[nn,De]),de)return nn;De.async&&De.timeout>0&&(X=g.setTimeout(function(){nn.abort("timeout")},De.timeout));try{de=!1,y.send(Qt,qr)}catch(Fn){if(de)throw Fn;qr(-1,Fn)}}else qr(-1,"No Transport");function qr(Fn,mr,fs,Ga){var ei,$i,xa,si,Fo,wi=mr;de||(de=!0,X&&g.clearTimeout(X),y=void 0,N=Ga||"",nn.readyState=Fn>0?4:0,ei=Fn>=200&&Fn<300||304===Fn,fs&&(si=function ds(l,h,y){for(var w,N,H,X,me=l.contents,de=l.dataTypes;"*"===de[0];)de.shift(),void 0===w&&(w=l.mimeType||h.getResponseHeader("Content-Type"));if(w)for(N in me)if(me[N]&&me[N].test(w)){de.unshift(N);break}if(de[0]in y)H=de[0];else{for(N in y){if(!de[0]||l.converters[N+" "+de[0]]){H=N;break}X||(X=N)}H=H||X}if(H)return H!==de[0]&&de.unshift(H),y[H]}(De,nn,fs)),!ei&&b.inArray("script",De.dataTypes)>-1&&b.inArray("json",De.dataTypes)<0&&(De.converters["text script"]=function(){}),si=function F(l,h,y,w){var N,H,X,me,de,Ae={},He=l.dataTypes.slice();if(He[1])for(X in l.converters)Ae[X.toLowerCase()]=l.converters[X];for(H=He.shift();H;)if(l.responseFields[H]&&(y[l.responseFields[H]]=h),!de&&w&&l.dataFilter&&(h=l.dataFilter(h,l.dataType)),de=H,H=He.shift())if("*"===H)H=de;else if("*"!==de&&de!==H){if(!(X=Ae[de+" "+H]||Ae["* "+H]))for(N in Ae)if((me=N.split(" "))[1]===H&&(X=Ae[de+" "+me[0]]||Ae["* "+me[0]])){!0===X?X=Ae[N]:!0!==Ae[N]&&(H=me[0],He.unshift(me[1]));break}if(!0!==X)if(X&&l.throws)h=X(h);else try{h=X(h)}catch(dt){return{state:"parsererror",error:X?dt:"No conversion from "+de+" to "+H}}}return{state:"success",data:h}}(De,si,nn,ei),ei?(De.ifModified&&((Fo=nn.getResponseHeader("Last-Modified"))&&(b.lastModified[w]=Fo),(Fo=nn.getResponseHeader("etag"))&&(b.etag[w]=Fo)),204===Fn||"HEAD"===De.type?wi="nocontent":304===Fn?wi="notmodified":(wi=si.state,$i=si.data,ei=!(xa=si.error))):(xa=wi,(Fn||!wi)&&(wi="error",Fn<0&&(Fn=0))),nn.status=Fn,nn.statusText=(mr||wi)+"",ei?zt.resolveWith(Je,[$i,wi,nn]):zt.rejectWith(Je,[nn,wi,xa]),nn.statusCode(pr),pr=void 0,Ae&&Ot.trigger(ei?"ajaxSuccess":"ajaxError",[nn,De,ei?$i:xa]),kt.fireWith(Je,[nn,wi]),Ae&&(Ot.trigger("ajaxComplete",[nn,De]),--b.active||b.event.trigger("ajaxStop")))}return nn},getJSON:function(l,h,y){return b.get(l,h,y,"json")},getScript:function(l,h){return b.get(l,void 0,h,"script")}}),b.each(["get","post"],function(l,h){b[h]=function(y,w,N,H){return se(w)&&(H=H||N,N=w,w=void 0),b.ajax(b.extend({url:y,type:h,dataType:H,data:w,success:N},b.isPlainObject(y)&&y))}}),b.ajaxPrefilter(function(l){var h;for(h in l.headers)"content-type"===h.toLowerCase()&&(l.contentType=l.headers[h]||"")}),b._evalUrl=function(l,h,y){return b.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){b.globalEval(w,h,y)}})},b.fn.extend({wrapAll:function(l){var h;return this[0]&&(se(l)&&(l=l.call(this[0])),h=b(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(l){return se(l)?this.each(function(h){b(this).wrapInner(l.call(this,h))}):this.each(function(){var h=b(this),y=h.contents();y.length?y.wrapAll(l):h.append(l)})},wrap:function(l){var h=se(l);return this.each(function(y){b(this).wrapAll(h?l.call(this,y):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(l){return!b.expr.pseudos.visible(l)},b.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new g.XMLHttpRequest}catch(l){}};var J={0:200,1223:204},ue=b.ajaxSettings.xhr();n.cors=!!ue&&"withCredentials"in ue,n.ajax=ue=!!ue,b.ajaxTransport(function(l){var h,y;if(n.cors||ue&&!l.crossDomain)return{send:function(w,N){var H,X=l.xhr();if(X.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(H in l.xhrFields)X[H]=l.xhrFields[H];for(H in l.mimeType&&X.overrideMimeType&&X.overrideMimeType(l.mimeType),!l.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest"),w)X.setRequestHeader(H,w[H]);h=function(me){return function(){h&&(h=y=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,"abort"===me?X.abort():"error"===me?"number"!=typeof X.status?N(0,"error"):N(X.status,X.statusText):N(J[X.status]||X.status,X.statusText,"text"!==(X.responseType||"text")||"string"!=typeof X.responseText?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=h(),y=X.onerror=X.ontimeout=h("error"),void 0!==X.onabort?X.onabort=y:X.onreadystatechange=function(){4===X.readyState&&g.setTimeout(function(){h&&y()})},h=h("abort");try{X.send(l.hasContent&&l.data||null)}catch(me){if(h)throw me}},abort:function(){h&&h()}}}),b.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return b.globalEval(l),l}}}),b.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),b.ajaxTransport("script",function(l){var h,y;if(l.crossDomain||l.scriptAttrs)return{send:function(w,N){h=b("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",y=function(H){h.remove(),y=null,H&&N("error"===H.type?404:200,H.type)}),le.head.appendChild(h[0])},abort:function(){y&&y()}}});var l,ge=[],Oe=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=ge.pop()||b.expando+"_"+Ha.guid++;return this[l]=!0,l}}),b.ajaxPrefilter("json jsonp",function(l,h,y){var w,N,H,X=!1!==l.jsonp&&(Oe.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(l.data)&&"data");if(X||"jsonp"===l.dataTypes[0])return w=l.jsonpCallback=se(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,X?l[X]=l[X].replace(Oe,"$1"+w):!1!==l.jsonp&&(l.url+=(Yo.test(l.url)?"&":"?")+l.jsonp+"="+w),l.converters["script json"]=function(){return H||b.error(w+" was not called"),H[0]},l.dataTypes[0]="json",N=g[w],g[w]=function(){H=arguments},y.always(function(){void 0===N?b(g).removeProp(w):g[w]=N,l[w]&&(l.jsonpCallback=h.jsonpCallback,ge.push(w)),H&&se(N)&&N(H[0]),H=N=void 0}),"script"}),n.createHTMLDocument=((l=le.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),b.parseHTML=function(l,h,y){return"string"!=typeof l?[]:("boolean"==typeof h&&(y=h,h=!1),h||(n.createHTMLDocument?((w=(h=le.implementation.createHTMLDocument("")).createElement("base")).href=le.location.href,h.head.appendChild(w)):h=le),H=!y&&[],(N=Ke.exec(l))?[h.createElement(N[1])]:(N=jr([l],h,H),H&&H.length&&b(H).remove(),b.merge([],N.childNodes)));var w,N,H},b.fn.load=function(l,h,y){var w,N,H,X=this,me=l.indexOf(" ");return me>-1&&(w=Lr(l.slice(me)),l=l.slice(0,me)),se(h)?(y=h,h=void 0):h&&"object"==typeof h&&(N="POST"),X.length>0&&b.ajax({url:l,type:N||"GET",dataType:"html",data:h}).done(function(de){H=arguments,X.html(w?b("<div>").append(b.parseHTML(de)).find(w):de)}).always(y&&function(de,Ae){X.each(function(){y.apply(this,H||[de.responseText,Ae,de])})}),this},b.expr.pseudos.animated=function(l){return b.grep(b.timers,function(h){return l===h.elem}).length},b.offset={setOffset:function(l,h,y){var w,N,H,X,me,de,He=b.css(l,"position"),dt=b(l),De={};"static"===He&&(l.style.position="relative"),me=dt.offset(),H=b.css(l,"top"),de=b.css(l,"left"),("absolute"===He||"fixed"===He)&&(H+de).indexOf("auto")>-1?(X=(w=dt.position()).top,N=w.left):(X=parseFloat(H)||0,N=parseFloat(de)||0),se(h)&&(h=h.call(l,y,b.extend({},me))),null!=h.top&&(De.top=h.top-me.top+X),null!=h.left&&(De.left=h.left-me.left+N),"using"in h?h.using.call(l,De):dt.css(De)}},b.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(N){b.offset.setOffset(this,l,N)});var h,y,w=this[0];return w?w.getClientRects().length?{top:(h=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:h.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,h,y,w=this[0],N={top:0,left:0};if("fixed"===b.css(w,"position"))h=w.getBoundingClientRect();else{for(h=this.offset(),y=w.ownerDocument,l=w.offsetParent||y.documentElement;l&&(l===y.body||l===y.documentElement)&&"static"===b.css(l,"position");)l=l.parentNode;l&&l!==w&&1===l.nodeType&&((N=b(l).offset()).top+=b.css(l,"borderTopWidth",!0),N.left+=b.css(l,"borderLeftWidth",!0))}return{top:h.top-N.top-b.css(w,"marginTop",!0),left:h.left-N.left-b.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===b.css(l,"position");)l=l.offsetParent;return l||An})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,h){var y="pageYOffset"===h;b.fn[l]=function(w){return cn(this,function(N,H,X){var me;if(ce(N)?me=N:9===N.nodeType&&(me=N.defaultView),void 0===X)return me?me[h]:N[H];me?me.scrollTo(y?me.pageXOffset:X,y?X:me.pageYOffset):N[H]=X},l,w,arguments.length)}}),b.each(["top","left"],function(l,h){b.cssHooks[h]=Os(n.pixelPosition,function(y,w){if(w)return w=pa(y,h),Da.test(w)?b(y).position()[h]+"px":w})}),b.each({Height:"height",Width:"width"},function(l,h){b.each({padding:"inner"+l,content:h,"":"outer"+l},function(y,w){b.fn[w]=function(N,H){var X=arguments.length&&(y||"boolean"!=typeof N),me=y||(!0===N||!0===H?"margin":"border");return cn(this,function(de,Ae,He){var dt;return ce(de)?0===w.indexOf("outer")?de["inner"+l]:de.document.documentElement["client"+l]:9===de.nodeType?(dt=de.documentElement,Math.max(de.body["scroll"+l],dt["scroll"+l],de.body["offset"+l],dt["offset"+l],dt["client"+l])):void 0===He?b.css(de,Ae,me):b.style(de,Ae,He,me)},h,X?N:void 0,X)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,h){b.fn[h]=function(y){return this.on(h,y)}}),b.fn.extend({bind:function(l,h,y){return this.on(l,null,h,y)},unbind:function(l,h){return this.off(l,null,h)},delegate:function(l,h,y,w){return this.on(h,l,y,w)},undelegate:function(l,h,y){return 1===arguments.length?this.off(l,"**"):this.off(h,l||"**",y)},hover:function(l,h){return this.mouseenter(l).mouseleave(h||l)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,h){b.fn[h]=function(y,w){return arguments.length>0?this.on(h,null,y,w):this.trigger(h)}});var Te=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;b.proxy=function(l,h){var y,w,N;if("string"==typeof h&&(y=l[h],h=l,l=y),se(l))return w=I.call(arguments,2),N=function(){return l.apply(h||this,w.concat(I.call(arguments)))},N.guid=l.guid=l.guid||b.guid++,N},b.holdReady=function(l){l?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=nt,b.isFunction=se,b.isWindow=ce,b.camelCase=hn,b.type=we,b.now=Date.now,b.isNumeric=function(l){var h=b.type(l);return("number"===h||"string"===h)&&!isNaN(l-parseFloat(l))},b.trim=function(l){return null==l?"":(l+"").replace(Te,"$1")},void 0!==(m=function(){return b}.apply(W,[]))&&(E.exports=m);var Be=g.jQuery,rt=g.$;return b.noConflict=function(l){return g.$===b&&(g.$=rt),l&&g.jQuery===b&&(g.jQuery=Be),b},void 0===S&&(g.jQuery=g.$=b),b})},37244:(E,W,d)=>{var S=d(53436)(d(12119),"DataView");E.exports=S},54994:(E,W,d)=>{var m=d(64312),g=d(22393),S=d(15764),T=d(18685),_=d(26676);function I(O){var k=-1,R=null==O?0:O.length;for(this.clear();++k<R;){var B=O[k];this.set(B[0],B[1])}}I.prototype.clear=m,I.prototype.delete=g,I.prototype.get=S,I.prototype.has=T,I.prototype.set=_,E.exports=I},9215:(E,W,d)=>{var m=d(41840),g=d(34378),S=d(54981),T=d(67343),_=d(98895);function I(O){var k=-1,R=null==O?0:O.length;for(this.clear();++k<R;){var B=O[k];this.set(B[0],B[1])}}I.prototype.clear=m,I.prototype.delete=g,I.prototype.get=S,I.prototype.has=T,I.prototype.set=_,E.exports=I},51501:(E,W,d)=>{var S=d(53436)(d(12119),"Map");E.exports=S},99850:(E,W,d)=>{var m=d(10638),g=d(11184),S=d(70866),T=d(43771),_=d(51772);function I(O){var k=-1,R=null==O?0:O.length;for(this.clear();++k<R;){var B=O[k];this.set(B[0],B[1])}}I.prototype.clear=m,I.prototype.delete=g,I.prototype.get=S,I.prototype.has=T,I.prototype.set=_,E.exports=I},44267:(E,W,d)=>{var S=d(53436)(d(12119),"Promise");E.exports=S},46323:(E,W,d)=>{var S=d(53436)(d(12119),"Set");E.exports=S},58849:(E,W,d)=>{var m=d(99850),g=d(4600),S=d(31387);function T(_){var I=-1,O=null==_?0:_.length;for(this.__data__=new m;++I<O;)this.add(_[I])}T.prototype.add=T.prototype.push=g,T.prototype.has=S,E.exports=T},2858:(E,W,d)=>{var m=d(9215),g=d(13720),S=d(64410),T=d(45576),_=d(22247),I=d(41585);function O(k){var R=this.__data__=new m(k);this.size=R.size}O.prototype.clear=g,O.prototype.delete=S,O.prototype.get=T,O.prototype.has=_,O.prototype.set=I,E.exports=O},60443:(E,W,d)=>{var m=d(12119);E.exports=m.Symbol},73457:(E,W,d)=>{var m=d(12119);E.exports=m.Uint8Array},24243:(E,W,d)=>{var S=d(53436)(d(12119),"WeakMap");E.exports=S},26999:E=>{E.exports=function W(d,m,g){switch(g.length){case 0:return d.call(m);case 1:return d.call(m,g[0]);case 2:return d.call(m,g[0],g[1]);case 3:return d.call(m,g[0],g[1],g[2])}return d.apply(m,g)}},96837:E=>{E.exports=function W(d,m){for(var g=-1,S=null==d?0:d.length;++g<S&&!1!==m(d[g],g,d););return d}},69779:E=>{E.exports=function W(d,m){for(var g=-1,S=null==d?0:d.length,T=0,_=[];++g<S;){var I=d[g];m(I,g,d)&&(_[T++]=I)}return _}},61253:(E,W,d)=>{var m=d(14164);E.exports=function g(S,T){return!(null==S||!S.length)&&m(S,T,0)>-1}},37609:E=>{E.exports=function W(d,m,g){for(var S=-1,T=null==d?0:d.length;++S<T;)if(g(m,d[S]))return!0;return!1}},72271:(E,W,d)=>{var m=d(85334),g=d(77151),S=d(21503),T=d(80891),_=d(58442),I=d(48159),k=Object.prototype.hasOwnProperty;E.exports=function R(B,A){var K=S(B),q=!K&&g(B),ae=!K&&!q&&T(B),n=!K&&!q&&!ae&&I(B),se=K||q||ae||n,ce=se?m(B.length,String):[],le=ce.length;for(var Y in B)(A||k.call(B,Y))&&(!se||!("length"==Y||ae&&("offset"==Y||"parent"==Y)||n&&("buffer"==Y||"byteLength"==Y||"byteOffset"==Y)||_(Y,le)))&&ce.push(Y);return ce}},84633:E=>{E.exports=function W(d,m){for(var g=-1,S=null==d?0:d.length,T=Array(S);++g<S;)T[g]=m(d[g],g,d);return T}},85059:E=>{E.exports=function W(d,m){for(var g=-1,S=m.length,T=d.length;++g<S;)d[T+g]=m[g];return d}},8745:E=>{E.exports=function W(d,m,g,S){var T=-1,_=null==d?0:d.length;for(S&&_&&(g=d[++T]);++T<_;)g=m(g,d[T],T,d);return g}},79503:E=>{E.exports=function W(d,m){for(var g=-1,S=null==d?0:d.length;++g<S;)if(m(d[g],g,d))return!0;return!1}},75481:(E,W,d)=>{var g=d(11847)("length");E.exports=g},49276:(E,W,d)=>{var m=d(85683),g=d(20217);E.exports=function S(T,_,I){(void 0!==I&&!g(T[_],I)||void 0===I&&!(_ in T))&&m(T,_,I)}},89719:(E,W,d)=>{var m=d(85683),g=d(20217),T=Object.prototype.hasOwnProperty;E.exports=function _(I,O,k){var R=I[O];(!T.call(I,O)||!g(R,k)||void 0===k&&!(O in I))&&m(I,O,k)}},43503:(E,W,d)=>{var m=d(20217);E.exports=function g(S,T){for(var _=S.length;_--;)if(m(S[_][0],T))return _;return-1}},94121:(E,W,d)=>{var m=d(31989),g=d(118);E.exports=function S(T,_){return T&&m(_,g(_),T)}},99287:(E,W,d)=>{var m=d(31989),g=d(16555);E.exports=function S(T,_){return T&&m(_,g(_),T)}},85683:(E,W,d)=>{var m=d(56713);E.exports=function g(S,T,_){"__proto__"==T&&m?m(S,T,{configurable:!0,enumerable:!0,value:_,writable:!0}):S[T]=_}},44462:(E,W,d)=>{var m=d(2858),g=d(96837),S=d(89719),T=d(94121),_=d(99287),I=d(19292),O=d(99454),k=d(84444),R=d(59905),B=d(47597),A=d(6967),K=d(28794),q=d(76782),ae=d(37878),n=d(4264),se=d(21503),ce=d(80891),le=d(13222),Y=d(25940),pe=d(90799),we=d(118),Le=d(16555),ze="[object Arguments]",mt="[object Function]",an="[object Object]",D={};D[ze]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[an]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[mt]=D["[object WeakMap]"]=!1,E.exports=function U(re,ye,Qe,et,Ct,Nt){var sn,wn=1&ye,An=2&ye,gn=4&ye;if(Qe&&(sn=Ct?Qe(re,et,Ct,Nt):Qe(re)),void 0!==sn)return sn;if(!Y(re))return re;var gr=se(re);if(gr){if(sn=q(re),!wn)return O(re,sn)}else{var fr=K(re),qi=fr==mt||"[object GeneratorFunction]"==fr;if(ce(re))return I(re,wn);if(fr==an||fr==ze||qi&&!Ct){if(sn=An||qi?{}:n(re),!wn)return An?R(re,_(sn,re)):k(re,T(sn,re))}else{if(!D[fr])return Ct?re:{};sn=ae(re,fr,wn)}}Nt||(Nt=new m);var Qn=Nt.get(re);if(Qn)return Qn;Nt.set(re,sn),pe(re)?re.forEach(function(Cr){sn.add(U(Cr,ye,Qe,Cr,re,Nt))}):le(re)&&re.forEach(function(Cr,Qr){sn.set(Qr,U(Cr,ye,Qe,Qr,re,Nt))});var hr=gr?void 0:(gn?An?A:B:An?Le:we)(re);return g(hr||re,function(Cr,Qr){hr&&(Cr=re[Qr=Cr]),S(sn,Qr,U(Cr,ye,Qe,Qr,re,Nt))}),sn}},78858:(E,W,d)=>{var m=d(25940),g=Object.create,S=function(){function T(){}return function(_){if(!m(_))return{};if(g)return g(_);T.prototype=_;var I=new T;return T.prototype=void 0,I}}();E.exports=S},43132:(E,W,d)=>{var m=d(45184),S=d(16539)(m);E.exports=S},67308:(E,W,d)=>{var m=d(44129);E.exports=function g(S,T,_){for(var I=-1,O=S.length;++I<O;){var k=S[I],R=T(k);if(null!=R&&(void 0===B?R==R&&!m(R):_(R,B)))var B=R,A=k}return A}},33609:(E,W,d)=>{var m=d(43132);E.exports=function g(S,T){var _=[];return m(S,function(I,O,k){T(I,O,k)&&_.push(I)}),_}},65317:E=>{E.exports=function W(d,m,g,S){for(var T=d.length,_=g+(S?1:-1);S?_--:++_<T;)if(m(d[_],_,d))return _;return-1}},50686:(E,W,d)=>{var m=d(85059),g=d(75039);E.exports=function S(T,_,I,O,k){var R=-1,B=T.length;for(I||(I=g),k||(k=[]);++R<B;){var A=T[R];_>0&&I(A)?_>1?S(A,_-1,I,O,k):m(k,A):O||(k[k.length]=A)}return k}},30755:(E,W,d)=>{var g=d(40456)();E.exports=g},45184:(E,W,d)=>{var m=d(30755),g=d(118);E.exports=function S(T,_){return T&&m(T,_,g)}},15456:(E,W,d)=>{var m=d(65456),g=d(68533);E.exports=function S(T,_){for(var I=0,O=(_=m(_,T)).length;null!=T&&I<O;)T=T[g(_[I++])];return I&&I==O?T:void 0}},38247:(E,W,d)=>{var m=d(85059),g=d(21503);E.exports=function S(T,_,I){var O=_(T);return g(T)?O:m(O,I(T))}},93337:(E,W,d)=>{var m=d(60443),g=d(21318),S=d(92902),I=m?m.toStringTag:void 0;E.exports=function O(k){return null==k?void 0===k?"[object Undefined]":"[object Null]":I&&I in Object(k)?g(k):S(k)}},31100:E=>{E.exports=function W(d,m){return d>m}},84781:E=>{var d=Object.prototype.hasOwnProperty;E.exports=function m(g,S){return null!=g&&d.call(g,S)}},69989:E=>{E.exports=function W(d,m){return null!=d&&m in Object(d)}},14164:(E,W,d)=>{var m=d(65317),g=d(70968),S=d(24977);E.exports=function T(_,I,O){return I==I?S(_,I,O):m(_,g,O)}},60186:(E,W,d)=>{var m=d(93337),g=d(72671);E.exports=function T(_){return g(_)&&"[object Arguments]"==m(_)}},85740:(E,W,d)=>{var m=d(58325),g=d(72671);E.exports=function S(T,_,I,O,k){return T===_||(null==T||null==_||!g(T)&&!g(_)?T!=T&&_!=_:m(T,_,I,O,S,k))}},58325:(E,W,d)=>{var m=d(2858),g=d(63914),S=d(78583),T=d(32286),_=d(28794),I=d(21503),O=d(80891),k=d(48159),B="[object Arguments]",A="[object Array]",K="[object Object]",ae=Object.prototype.hasOwnProperty;E.exports=function n(se,ce,le,Y,pe,we){var Le=I(se),b=I(ce),Ge=Le?A:_(se),ut=b?A:_(ce),ze=(Ge=Ge==B?K:Ge)==K,Ne=(ut=ut==B?K:ut)==K,Re=Ge==ut;if(Re&&O(se)){if(!O(ce))return!1;Le=!0,ze=!1}if(Re&&!ze)return we||(we=new m),Le||k(se)?g(se,ce,le,Y,pe,we):S(se,ce,Ge,le,Y,pe,we);if(!(1&le)){var nt=ze&&ae.call(se,"__wrapped__"),Ke=Ne&&ae.call(ce,"__wrapped__");if(nt||Ke){var mt=nt?se.value():se,_t=Ke?ce.value():ce;return we||(we=new m),pe(mt,_t,le,Y,we)}}return!!Re&&(we||(we=new m),T(se,ce,le,Y,pe,we))}},97021:(E,W,d)=>{var m=d(28794),g=d(72671);E.exports=function T(_){return g(_)&&"[object Map]"==m(_)}},40431:(E,W,d)=>{var m=d(2858),g=d(85740);E.exports=function _(I,O,k,R){var B=k.length,A=B,K=!R;if(null==I)return!A;for(I=Object(I);B--;){var q=k[B];if(K&&q[2]?q[1]!==I[q[0]]:!(q[0]in I))return!1}for(;++B<A;){var ae=(q=k[B])[0],n=I[ae],se=q[1];if(K&&q[2]){if(void 0===n&&!(ae in I))return!1}else{var ce=new m;if(R)var le=R(n,se,ae,I,O,ce);if(!(void 0===le?g(se,n,3,R,ce):le))return!1}}return!0}},70968:E=>{E.exports=function W(d){return d!=d}},37304:(E,W,d)=>{var m=d(75946),g=d(91943),S=d(25940),T=d(52827),I=/^\[object .+?Constructor\]$/,A=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");E.exports=function K(q){return!(!S(q)||g(q))&&(m(q)?A:I).test(T(q))}},771:(E,W,d)=>{var m=d(28794),g=d(72671);E.exports=function T(_){return g(_)&&"[object Set]"==m(_)}},1083:(E,W,d)=>{var m=d(93337),g=d(96231),S=d(72671),Re={};Re["[object Float32Array]"]=Re["[object Float64Array]"]=Re["[object Int8Array]"]=Re["[object Int16Array]"]=Re["[object Int32Array]"]=Re["[object Uint8Array]"]=Re["[object Uint8ClampedArray]"]=Re["[object Uint16Array]"]=Re["[object Uint32Array]"]=!0,Re["[object Arguments]"]=Re["[object Array]"]=Re["[object ArrayBuffer]"]=Re["[object Boolean]"]=Re["[object DataView]"]=Re["[object Date]"]=Re["[object Error]"]=Re["[object Function]"]=Re["[object Map]"]=Re["[object Number]"]=Re["[object Object]"]=Re["[object RegExp]"]=Re["[object Set]"]=Re["[object String]"]=Re["[object WeakMap]"]=!1,E.exports=function nt(Ke){return S(Ke)&&g(Ke.length)&&!!Re[m(Ke)]}},96517:(E,W,d)=>{var m=d(98133),g=d(9458),S=d(32608),T=d(21503),_=d(87495);E.exports=function I(O){return"function"==typeof O?O:null==O?S:"object"==typeof O?T(O)?g(O[0],O[1]):m(O):_(O)}},81172:(E,W,d)=>{var m=d(45488),g=d(85491),T=Object.prototype.hasOwnProperty;E.exports=function _(I){if(!m(I))return g(I);var O=[];for(var k in Object(I))T.call(I,k)&&"constructor"!=k&&O.push(k);return O}},92809:(E,W,d)=>{var m=d(25940),g=d(45488),S=d(32158),_=Object.prototype.hasOwnProperty;E.exports=function I(O){if(!m(O))return S(O);var k=g(O),R=[];for(var B in O)"constructor"==B&&(k||!_.call(O,B))||R.push(B);return R}},99069:E=>{E.exports=function W(d,m){return d<m}},92046:(E,W,d)=>{var m=d(43132),g=d(56507);E.exports=function S(T,_){var I=-1,O=g(T)?Array(T.length):[];return m(T,function(k,R,B){O[++I]=_(k,R,B)}),O}},98133:(E,W,d)=>{var m=d(40431),g=d(22379),S=d(642);E.exports=function T(_){var I=g(_);return 1==I.length&&I[0][2]?S(I[0][0],I[0][1]):function(O){return O===_||m(O,_,I)}}},9458:(E,W,d)=>{var m=d(85740),g=d(8817),S=d(11172),T=d(45352),_=d(22442),I=d(642),O=d(68533);E.exports=function B(A,K){return T(A)&&_(K)?I(O(A),K):function(q){var ae=g(q,A);return void 0===ae&&ae===K?S(q,A):m(K,ae,3)}}},73842:(E,W,d)=>{var m=d(2858),g=d(49276),S=d(30755),T=d(33675),_=d(25940),I=d(16555),O=d(99351);E.exports=function k(R,B,A,K,q){R!==B&&S(B,function(ae,n){if(q||(q=new m),_(ae))T(R,B,n,A,k,K,q);else{var se=K?K(O(R,n),ae,n+"",R,B,q):void 0;void 0===se&&(se=ae),g(R,n,se)}},I)}},33675:(E,W,d)=>{var m=d(49276),g=d(19292),S=d(65208),T=d(99454),_=d(4264),I=d(77151),O=d(21503),k=d(21330),R=d(80891),B=d(75946),A=d(25940),K=d(97614),q=d(48159),ae=d(99351),n=d(8067);E.exports=function se(ce,le,Y,pe,we,Le,b){var Ge=ae(ce,Y),ut=ae(le,Y),ze=b.get(ut);if(ze)m(ce,Y,ze);else{var Ne=Le?Le(Ge,ut,Y+"",ce,le,b):void 0,Re=void 0===Ne;if(Re){var nt=O(ut),Ke=!nt&&R(ut),mt=!nt&&!Ke&&q(ut);Ne=ut,nt||Ke||mt?O(Ge)?Ne=Ge:k(Ge)?Ne=T(Ge):Ke?(Re=!1,Ne=g(ut,!0)):mt?(Re=!1,Ne=S(ut,!0)):Ne=[]:K(ut)||I(ut)?(Ne=Ge,I(Ge)?Ne=n(Ge):(!A(Ge)||B(Ge))&&(Ne=_(ut))):Re=!1}Re&&(b.set(ut,Ne),we(Ne,ut,pe,Le,b),b.delete(ut)),m(ce,Y,Ne)}}},6119:(E,W,d)=>{var m=d(84633),g=d(15456),S=d(96517),T=d(92046),_=d(18750),I=d(85647),O=d(41215),k=d(32608),R=d(21503);E.exports=function B(A,K,q){K=K.length?m(K,function(se){return R(se)?function(ce){return g(ce,1===se.length?se[0]:se)}:se}):[k];var ae=-1;K=m(K,I(S));var n=T(A,function(se,ce,le){return{criteria:m(K,function(pe){return pe(se)}),index:++ae,value:se}});return _(n,function(se,ce){return O(se,ce,q)})}},83021:(E,W,d)=>{var m=d(95495),g=d(11172);E.exports=function S(T,_){return m(T,_,function(I,O){return g(T,O)})}},95495:(E,W,d)=>{var m=d(15456),g=d(55963),S=d(65456);E.exports=function T(_,I,O){for(var k=-1,R=I.length,B={};++k<R;){var A=I[k],K=m(_,A);O(K,A)&&g(B,S(A,_),K)}return B}},11847:E=>{E.exports=function W(d){return function(m){return null==m?void 0:m[d]}}},39222:(E,W,d)=>{var m=d(15456);E.exports=function g(S){return function(T){return m(T,S)}}},16307:E=>{var W=Math.ceil,d=Math.max;E.exports=function m(g,S,T,_){for(var I=-1,O=d(W((S-g)/(T||1)),0),k=Array(O);O--;)k[_?O:++I]=g,g+=T;return k}},13570:E=>{E.exports=function W(d,m,g,S,T){return T(d,function(_,I,O){g=S?(S=!1,_):m(g,_,I,O)}),g}},23269:(E,W,d)=>{var m=d(32608),g=d(53983),S=d(72185);E.exports=function T(_,I){return S(g(_,I,m),_+"")}},55963:(E,W,d)=>{var m=d(89719),g=d(65456),S=d(58442),T=d(25940),_=d(68533);E.exports=function I(O,k,R,B){if(!T(O))return O;for(var A=-1,K=(k=g(k,O)).length,q=K-1,ae=O;null!=ae&&++A<K;){var n=_(k[A]),se=R;if("__proto__"===n||"constructor"===n||"prototype"===n)return O;if(A!=q){var ce=ae[n];void 0===(se=B?B(ce,n,ae):void 0)&&(se=T(ce)?ce:S(k[A+1])?[]:{})}m(ae,n,se),ae=ae[n]}return O}},69510:(E,W,d)=>{var m=d(76684),g=d(56713),S=d(32608);E.exports=g?function(_,I){return g(_,"toString",{configurable:!0,enumerable:!1,value:m(I),writable:!0})}:S},18750:E=>{E.exports=function W(d,m){var g=d.length;for(d.sort(m);g--;)d[g]=d[g].value;return d}},85334:E=>{E.exports=function W(d,m){for(var g=-1,S=Array(d);++g<d;)S[g]=m(g);return S}},93935:(E,W,d)=>{var m=d(60443),g=d(84633),S=d(21503),T=d(44129),I=m?m.prototype:void 0,O=I?I.toString:void 0;E.exports=function k(R){if("string"==typeof R)return R;if(S(R))return g(R,k)+"";if(T(R))return O?O.call(R):"";var B=R+"";return"0"==B&&1/R==-1/0?"-0":B}},83348:(E,W,d)=>{var m=d(42760),g=/^\s+/;E.exports=function S(T){return T&&T.slice(0,m(T)+1).replace(g,"")}},85647:E=>{E.exports=function W(d){return function(m){return d(m)}}},80707:(E,W,d)=>{var m=d(58849),g=d(61253),S=d(37609),T=d(25972),_=d(14575),I=d(24174);E.exports=function k(R,B,A){var K=-1,q=g,ae=R.length,n=!0,se=[],ce=se;if(A)n=!1,q=S;else if(ae>=200){var le=B?null:_(R);if(le)return I(le);n=!1,q=T,ce=new m}else ce=B?[]:se;e:for(;++K<ae;){var Y=R[K],pe=B?B(Y):Y;if(Y=A||0!==Y?Y:0,n&&pe==pe){for(var we=ce.length;we--;)if(ce[we]===pe)continue e;B&&ce.push(pe),se.push(Y)}else q(ce,pe,A)||(ce!==se&&ce.push(pe),se.push(Y))}return se}},19179:(E,W,d)=>{var m=d(84633);E.exports=function g(S,T){return m(T,function(_){return S[_]})}},38645:E=>{E.exports=function W(d,m,g){for(var S=-1,T=d.length,_=m.length,I={};++S<T;)g(I,d[S],S<_?m[S]:void 0);return I}},25972:E=>{E.exports=function W(d,m){return d.has(m)}},21481:(E,W,d)=>{var m=d(32608);E.exports=function g(S){return"function"==typeof S?S:m}},65456:(E,W,d)=>{var m=d(21503),g=d(45352),S=d(32855),T=d(73943);E.exports=function _(I,O){return m(I)?I:g(I,O)?[I]:S(T(I))}},43362:(E,W,d)=>{var m=d(73457);E.exports=function g(S){var T=new S.constructor(S.byteLength);return new m(T).set(new m(S)),T}},19292:(E,W,d)=>{E=d.nmd(E);var m=d(12119),g=W&&!W.nodeType&&W,S=g&&E&&!E.nodeType&&E,_=S&&S.exports===g?m.Buffer:void 0,I=_?_.allocUnsafe:void 0;E.exports=function O(k,R){if(R)return k.slice();var B=k.length,A=I?I(B):new k.constructor(B);return k.copy(A),A}},17e3:(E,W,d)=>{var m=d(43362);E.exports=function g(S,T){var _=T?m(S.buffer):S.buffer;return new S.constructor(_,S.byteOffset,S.byteLength)}},74098:E=>{var W=/\w*$/;E.exports=function d(m){var g=new m.constructor(m.source,W.exec(m));return g.lastIndex=m.lastIndex,g}},62533:(E,W,d)=>{var m=d(60443),g=m?m.prototype:void 0,S=g?g.valueOf:void 0;E.exports=function T(_){return S?Object(S.call(_)):{}}},65208:(E,W,d)=>{var m=d(43362);E.exports=function g(S,T){var _=T?m(S.buffer):S.buffer;return new S.constructor(_,S.byteOffset,S.length)}},13443:(E,W,d)=>{var m=d(44129);E.exports=function g(S,T){if(S!==T){var _=void 0!==S,I=null===S,O=S==S,k=m(S),R=void 0!==T,B=null===T,A=T==T,K=m(T);if(!B&&!K&&!k&&S>T||k&&R&&A&&!B&&!K||I&&R&&A||!_&&A||!O)return 1;if(!I&&!k&&!K&&S<T||K&&_&&O&&!I&&!k||B&&_&&O||!R&&O||!A)return-1}return 0}},41215:(E,W,d)=>{var m=d(13443);E.exports=function g(S,T,_){for(var I=-1,O=S.criteria,k=T.criteria,R=O.length,B=_.length;++I<R;){var A=m(O[I],k[I]);if(A)return I>=B?A:A*("desc"==_[I]?-1:1)}return S.index-T.index}},99454:E=>{E.exports=function W(d,m){var g=-1,S=d.length;for(m||(m=Array(S));++g<S;)m[g]=d[g];return m}},31989:(E,W,d)=>{var m=d(89719),g=d(85683);E.exports=function S(T,_,I,O){var k=!I;I||(I={});for(var R=-1,B=_.length;++R<B;){var A=_[R],K=O?O(I[A],T[A],A,I,T):void 0;void 0===K&&(K=T[A]),k?g(I,A,K):m(I,A,K)}return I}},84444:(E,W,d)=>{var m=d(31989),g=d(39383);E.exports=function S(T,_){return m(T,g(T),_)}},59905:(E,W,d)=>{var m=d(31989),g=d(53051);E.exports=function S(T,_){return m(T,g(T),_)}},24610:(E,W,d)=>{var m=d(12119);E.exports=m["__core-js_shared__"]},84944:(E,W,d)=>{var m=d(23269),g=d(93342);E.exports=function S(T){return m(function(_,I){var O=-1,k=I.length,R=k>1?I[k-1]:void 0,B=k>2?I[2]:void 0;for(R=T.length>3&&"function"==typeof R?(k--,R):void 0,B&&g(I[0],I[1],B)&&(R=k<3?void 0:R,k=1),_=Object(_);++O<k;){var A=I[O];A&&T(_,A,O,R)}return _})}},16539:(E,W,d)=>{var m=d(56507);E.exports=function g(S,T){return function(_,I){if(null==_)return _;if(!m(_))return S(_,I);for(var O=_.length,k=T?O:-1,R=Object(_);(T?k--:++k<O)&&!1!==I(R[k],k,R););return _}}},40456:E=>{E.exports=function W(d){return function(m,g,S){for(var T=-1,_=Object(m),I=S(m),O=I.length;O--;){var k=I[d?O:++T];if(!1===g(_[k],k,_))break}return m}}},24653:(E,W,d)=>{var m=d(96517),g=d(56507),S=d(118);E.exports=function T(_){return function(I,O,k){var R=Object(I);if(!g(I)){var B=m(O,3);I=S(I),O=function(K){return B(R[K],K,R)}}var A=_(I,O,k);return A>-1?R[B?I[A]:A]:void 0}}},97509:(E,W,d)=>{var m=d(16307),g=d(93342),S=d(12232);E.exports=function T(_){return function(I,O,k){return k&&"number"!=typeof k&&g(I,O,k)&&(O=k=void 0),I=S(I),void 0===O?(O=I,I=0):O=S(O),k=void 0===k?I<O?1:-1:S(k),m(I,O,k,_)}}},14575:(E,W,d)=>{var m=d(46323),g=d(12552),S=d(24174),_=m&&1/S(new m([,-0]))[1]==1/0?function(I){return new m(I)}:g;E.exports=_},56713:(E,W,d)=>{var m=d(53436),g=function(){try{var S=m(Object,"defineProperty");return S({},"",{}),S}catch(T){}}();E.exports=g},63914:(E,W,d)=>{var m=d(58849),g=d(79503),S=d(25972);E.exports=function I(O,k,R,B,A,K){var q=1&R,ae=O.length,n=k.length;if(ae!=n&&!(q&&n>ae))return!1;var se=K.get(O),ce=K.get(k);if(se&&ce)return se==k&&ce==O;var le=-1,Y=!0,pe=2&R?new m:void 0;for(K.set(O,k),K.set(k,O);++le<ae;){var we=O[le],Le=k[le];if(B)var b=q?B(Le,we,le,k,O,K):B(we,Le,le,O,k,K);if(void 0!==b){if(b)continue;Y=!1;break}if(pe){if(!g(k,function(Ge,ut){if(!S(pe,ut)&&(we===Ge||A(we,Ge,R,B,K)))return pe.push(ut)})){Y=!1;break}}else if(we!==Le&&!A(we,Le,R,B,K)){Y=!1;break}}return K.delete(O),K.delete(k),Y}},78583:(E,W,d)=>{var m=d(60443),g=d(73457),S=d(20217),T=d(63914),_=d(83205),I=d(24174),pe=m?m.prototype:void 0,we=pe?pe.valueOf:void 0;E.exports=function Le(b,Ge,ut,ze,Ne,Re,nt){switch(ut){case"[object DataView]":if(b.byteLength!=Ge.byteLength||b.byteOffset!=Ge.byteOffset)return!1;b=b.buffer,Ge=Ge.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=Ge.byteLength||!Re(new g(b),new g(Ge)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+b,+Ge);case"[object Error]":return b.name==Ge.name&&b.message==Ge.message;case"[object RegExp]":case"[object String]":return b==Ge+"";case"[object Map]":var Ke=_;case"[object Set]":if(Ke||(Ke=I),b.size!=Ge.size&&!(1&ze))return!1;var _t=nt.get(b);if(_t)return _t==Ge;ze|=2,nt.set(b,Ge);var pt=T(Ke(b),Ke(Ge),ze,Ne,Re,nt);return nt.delete(b),pt;case"[object Symbol]":if(we)return we.call(b)==we.call(Ge)}return!1}},32286:(E,W,d)=>{var m=d(47597),T=Object.prototype.hasOwnProperty;E.exports=function _(I,O,k,R,B,A){var K=1&k,q=m(I),ae=q.length;if(ae!=m(O).length&&!K)return!1;for(var ce=ae;ce--;){var le=q[ce];if(!(K?le in O:T.call(O,le)))return!1}var Y=A.get(I),pe=A.get(O);if(Y&&pe)return Y==O&&pe==I;var we=!0;A.set(I,O),A.set(O,I);for(var Le=K;++ce<ae;){var b=I[le=q[ce]],Ge=O[le];if(R)var ut=K?R(Ge,b,le,O,I,A):R(b,Ge,le,I,O,A);if(!(void 0===ut?b===Ge||B(b,Ge,k,R,A):ut)){we=!1;break}Le||(Le="constructor"==le)}if(we&&!Le){var ze=I.constructor,Ne=O.constructor;ze!=Ne&&"constructor"in I&&"constructor"in O&&!("function"==typeof ze&&ze instanceof ze&&"function"==typeof Ne&&Ne instanceof Ne)&&(we=!1)}return A.delete(I),A.delete(O),we}},3975:(E,W,d)=>{var m=d(22274),g=d(53983),S=d(72185);E.exports=function T(_){return S(g(_,void 0,m),_+"")}},79122:E=>{var W="object"==typeof global&&global&&global.Object===Object&&global;E.exports=W},47597:(E,W,d)=>{var m=d(38247),g=d(39383),S=d(118);E.exports=function T(_){return m(_,S,g)}},6967:(E,W,d)=>{var m=d(38247),g=d(53051),S=d(16555);E.exports=function T(_){return m(_,S,g)}},54537:(E,W,d)=>{var m=d(23819);E.exports=function g(S,T){var _=S.__data__;return m(T)?_["string"==typeof T?"string":"hash"]:_.map}},22379:(E,W,d)=>{var m=d(22442),g=d(118);E.exports=function S(T){for(var _=g(T),I=_.length;I--;){var O=_[I],k=T[O];_[I]=[O,k,m(k)]}return _}},53436:(E,W,d)=>{var m=d(37304),g=d(51990);E.exports=function S(T,_){var I=g(T,_);return m(I)?I:void 0}},29519:(E,W,d)=>{var g=d(69385)(Object.getPrototypeOf,Object);E.exports=g},21318:(E,W,d)=>{var m=d(60443),g=Object.prototype,S=g.hasOwnProperty,T=g.toString,_=m?m.toStringTag:void 0;E.exports=function I(O){var k=S.call(O,_),R=O[_];try{O[_]=void 0;var B=!0}catch(K){}var A=T.call(O);return B&&(k?O[_]=R:delete O[_]),A}},39383:(E,W,d)=>{var m=d(69779),g=d(49975),T=Object.prototype.propertyIsEnumerable,_=Object.getOwnPropertySymbols;E.exports=_?function(O){return null==O?[]:(O=Object(O),m(_(O),function(k){return T.call(O,k)}))}:g},53051:(E,W,d)=>{var m=d(85059),g=d(29519),S=d(39383),T=d(49975);E.exports=Object.getOwnPropertySymbols?function(O){for(var k=[];O;)m(k,S(O)),O=g(O);return k}:T},28794:(E,W,d)=>{var m=d(37244),g=d(51501),S=d(44267),T=d(46323),_=d(24243),I=d(93337),O=d(52827),k="[object Map]",B="[object Promise]",A="[object Set]",K="[object WeakMap]",q="[object DataView]",ae=O(m),n=O(g),se=O(S),ce=O(T),le=O(_),Y=I;(m&&Y(new m(new ArrayBuffer(1)))!=q||g&&Y(new g)!=k||S&&Y(S.resolve())!=B||T&&Y(new T)!=A||_&&Y(new _)!=K)&&(Y=function(pe){var we=I(pe),Le="[object Object]"==we?pe.constructor:void 0,b=Le?O(Le):"";if(b)switch(b){case ae:return q;case n:return k;case se:return B;case ce:return A;case le:return K}return we}),E.exports=Y},51990:E=>{E.exports=function W(d,m){return null==d?void 0:d[m]}},47283:(E,W,d)=>{var m=d(65456),g=d(77151),S=d(21503),T=d(58442),_=d(96231),I=d(68533);E.exports=function O(k,R,B){for(var A=-1,K=(R=m(R,k)).length,q=!1;++A<K;){var ae=I(R[A]);if(!(q=null!=k&&B(k,ae)))break;k=k[ae]}return q||++A!=K?q:!!(K=null==k?0:k.length)&&_(K)&&T(ae,K)&&(S(k)||g(k))}},77609:E=>{var I=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");E.exports=function O(k){return I.test(k)}},64312:(E,W,d)=>{var m=d(60862);E.exports=function g(){this.__data__=m?m(null):{},this.size=0}},22393:E=>{E.exports=function W(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}},15764:(E,W,d)=>{var m=d(60862),T=Object.prototype.hasOwnProperty;E.exports=function _(I){var O=this.__data__;if(m){var k=O[I];return"__lodash_hash_undefined__"===k?void 0:k}return T.call(O,I)?O[I]:void 0}},18685:(E,W,d)=>{var m=d(60862),S=Object.prototype.hasOwnProperty;E.exports=function T(_){var I=this.__data__;return m?void 0!==I[_]:S.call(I,_)}},26676:(E,W,d)=>{var m=d(60862);E.exports=function S(T,_){var I=this.__data__;return this.size+=this.has(T)?0:1,I[T]=m&&void 0===_?"__lodash_hash_undefined__":_,this}},76782:E=>{var d=Object.prototype.hasOwnProperty;E.exports=function m(g){var S=g.length,T=new g.constructor(S);return S&&"string"==typeof g[0]&&d.call(g,"index")&&(T.index=g.index,T.input=g.input),T}},37878:(E,W,d)=>{var m=d(43362),g=d(17e3),S=d(74098),T=d(62533),_=d(65208);E.exports=function ut(ze,Ne,Re){var nt=ze.constructor;switch(Ne){case"[object ArrayBuffer]":return m(ze);case"[object Boolean]":case"[object Date]":return new nt(+ze);case"[object DataView]":return g(ze,Re);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _(ze,Re);case"[object Map]":case"[object Set]":return new nt;case"[object Number]":case"[object String]":return new nt(ze);case"[object RegExp]":return S(ze);case"[object Symbol]":return T(ze)}}},4264:(E,W,d)=>{var m=d(78858),g=d(29519),S=d(45488);E.exports=function T(_){return"function"!=typeof _.constructor||S(_)?{}:m(g(_))}},75039:(E,W,d)=>{var m=d(60443),g=d(77151),S=d(21503),T=m?m.isConcatSpreadable:void 0;E.exports=function _(I){return S(I)||g(I)||!!(T&&I&&I[T])}},58442:E=>{var d=/^(?:0|[1-9]\d*)$/;E.exports=function m(g,S){var T=typeof g;return!!(S=null==S?9007199254740991:S)&&("number"==T||"symbol"!=T&&d.test(g))&&g>-1&&g%1==0&&g<S}},93342:(E,W,d)=>{var m=d(20217),g=d(56507),S=d(58442),T=d(25940);E.exports=function _(I,O,k){if(!T(k))return!1;var R=typeof O;return!!("number"==R?g(k)&&S(O,k.length):"string"==R&&O in k)&&m(k[O],I)}},45352:(E,W,d)=>{var m=d(21503),g=d(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;E.exports=function _(I,O){if(m(I))return!1;var k=typeof I;return!("number"!=k&&"symbol"!=k&&"boolean"!=k&&null!=I&&!g(I))||T.test(I)||!S.test(I)||null!=O&&I in Object(O)}},23819:E=>{E.exports=function W(d){var m=typeof d;return"string"==m||"number"==m||"symbol"==m||"boolean"==m?"__proto__"!==d:null===d}},91943:(E,W,d)=>{var T,m=d(24610),g=(T=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";E.exports=function S(T){return!!g&&g in T}},45488:E=>{var W=Object.prototype;E.exports=function d(m){var g=m&&m.constructor;return m===("function"==typeof g&&g.prototype||W)}},22442:(E,W,d)=>{var m=d(25940);E.exports=function g(S){return S==S&&!m(S)}},41840:E=>{E.exports=function W(){this.__data__=[],this.size=0}},34378:(E,W,d)=>{var m=d(43503),S=Array.prototype.splice;E.exports=function T(_){var I=this.__data__,O=m(I,_);return!(O<0||(O==I.length-1?I.pop():S.call(I,O,1),--this.size,0))}},54981:(E,W,d)=>{var m=d(43503);E.exports=function g(S){var T=this.__data__,_=m(T,S);return _<0?void 0:T[_][1]}},67343:(E,W,d)=>{var m=d(43503);E.exports=function g(S){return m(this.__data__,S)>-1}},98895:(E,W,d)=>{var m=d(43503);E.exports=function g(S,T){var _=this.__data__,I=m(_,S);return I<0?(++this.size,_.push([S,T])):_[I][1]=T,this}},10638:(E,W,d)=>{var m=d(54994),g=d(9215),S=d(51501);E.exports=function T(){this.size=0,this.__data__={hash:new m,map:new(S||g),string:new m}}},11184:(E,W,d)=>{var m=d(54537);E.exports=function g(S){var T=m(this,S).delete(S);return this.size-=T?1:0,T}},70866:(E,W,d)=>{var m=d(54537);E.exports=function g(S){return m(this,S).get(S)}},43771:(E,W,d)=>{var m=d(54537);E.exports=function g(S){return m(this,S).has(S)}},51772:(E,W,d)=>{var m=d(54537);E.exports=function g(S,T){var _=m(this,S),I=_.size;return _.set(S,T),this.size+=_.size==I?0:1,this}},83205:E=>{E.exports=function W(d){var m=-1,g=Array(d.size);return d.forEach(function(S,T){g[++m]=[T,S]}),g}},642:E=>{E.exports=function W(d,m){return function(g){return null!=g&&g[d]===m&&(void 0!==m||d in Object(g))}}},90719:(E,W,d)=>{var m=d(30535);E.exports=function S(T){var _=m(T,function(O){return 500===I.size&&I.clear(),O}),I=_.cache;return _}},60862:(E,W,d)=>{var g=d(53436)(Object,"create");E.exports=g},85491:(E,W,d)=>{var g=d(69385)(Object.keys,Object);E.exports=g},32158:E=>{E.exports=function W(d){var m=[];if(null!=d)for(var g in Object(d))m.push(g);return m}},73597:(E,W,d)=>{E=d.nmd(E);var m=d(79122),g=W&&!W.nodeType&&W,S=g&&E&&!E.nodeType&&E,_=S&&S.exports===g&&m.process,I=function(){try{return S&&S.require&&S.require("util").types||_&&_.binding&&_.binding("util")}catch(k){}}();E.exports=I},92902:E=>{var d=Object.prototype.toString;E.exports=function m(g){return d.call(g)}},69385:E=>{E.exports=function W(d,m){return function(g){return d(m(g))}}},53983:(E,W,d)=>{var m=d(26999),g=Math.max;E.exports=function S(T,_,I){return _=g(void 0===_?T.length-1:_,0),function(){for(var O=arguments,k=-1,R=g(O.length-_,0),B=Array(R);++k<R;)B[k]=O[_+k];k=-1;for(var A=Array(_+1);++k<_;)A[k]=O[k];return A[_]=I(B),m(T,this,A)}}},12119:(E,W,d)=>{var m=d(79122),g="object"==typeof self&&self&&self.Object===Object&&self,S=m||g||Function("return this")();E.exports=S},99351:E=>{E.exports=function W(d,m){if(("constructor"!==m||"function"!=typeof d[m])&&"__proto__"!=m)return d[m]}},4600:E=>{E.exports=function d(m){return this.__data__.set(m,"__lodash_hash_undefined__"),this}},31387:E=>{E.exports=function W(d){return this.__data__.has(d)}},24174:E=>{E.exports=function W(d){var m=-1,g=Array(d.size);return d.forEach(function(S){g[++m]=S}),g}},72185:(E,W,d)=>{var m=d(69510),S=d(10029)(m);E.exports=S},10029:E=>{var m=Date.now;E.exports=function g(S){var T=0,_=0;return function(){var I=m(),O=16-(I-_);if(_=I,O>0){if(++T>=800)return arguments[0]}else T=0;return S.apply(void 0,arguments)}}},13720:(E,W,d)=>{var m=d(9215);E.exports=function g(){this.__data__=new m,this.size=0}},64410:E=>{E.exports=function W(d){var m=this.__data__,g=m.delete(d);return this.size=m.size,g}},45576:E=>{E.exports=function W(d){return this.__data__.get(d)}},22247:E=>{E.exports=function W(d){return this.__data__.has(d)}},41585:(E,W,d)=>{var m=d(9215),g=d(51501),S=d(99850);E.exports=function _(I,O){var k=this.__data__;if(k instanceof m){var R=k.__data__;if(!g||R.length<199)return R.push([I,O]),this.size=++k.size,this;k=this.__data__=new S(R)}return k.set(I,O),this.size=k.size,this}},24977:E=>{E.exports=function W(d,m,g){for(var S=g-1,T=d.length;++S<T;)if(d[S]===m)return S;return-1}},52315:(E,W,d)=>{var m=d(75481),g=d(77609),S=d(81149);E.exports=function T(_){return g(_)?S(_):m(_)}},32855:(E,W,d)=>{var m=d(90719),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,T=m(function(_){var I=[];return 46===_.charCodeAt(0)&&I.push(""),_.replace(g,function(O,k,R,B){I.push(R?B.replace(S,"$1"):k||O)}),I});E.exports=T},68533:(E,W,d)=>{var m=d(44129);E.exports=function S(T){if("string"==typeof T||m(T))return T;var _=T+"";return"0"==_&&1/T==-1/0?"-0":_}},52827:E=>{var d=Function.prototype.toString;E.exports=function m(g){if(null!=g){try{return d.call(g)}catch(S){}try{return g+""}catch(S){}}return""}},42760:E=>{var W=/\s/;E.exports=function d(m){for(var g=m.length;g--&&W.test(m.charAt(g)););return g}},81149:E=>{var W="\\ud800-\\udfff",_="["+W+"]",I="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",O="\\ud83c[\\udffb-\\udfff]",R="[^"+W+"]",B="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",q="(?:"+I+"|"+O+")?",ae="[\\ufe0e\\ufe0f]?",se=ae+q+"(?:\\u200d(?:"+[R,B,A].join("|")+")"+ae+q+")*",ce="(?:"+[R+I+"?",I,B,A,_].join("|")+")",le=RegExp(O+"(?="+O+")|"+ce+se,"g");E.exports=function Y(pe){for(var we=le.lastIndex=0;le.test(pe);)++we;return we}},11094:(E,W,d)=>{var m=d(44462);E.exports=function S(T){return m(T,4)}},90733:(E,W,d)=>{var m=d(44462);E.exports=function T(_){return m(_,5)}},76684:E=>{E.exports=function W(d){return function(){return d}}},28800:(E,W,d)=>{var m=d(23269),g=d(20217),S=d(93342),T=d(16555),_=Object.prototype,I=_.hasOwnProperty,O=m(function(k,R){k=Object(k);var B=-1,A=R.length,K=A>2?R[2]:void 0;for(K&&S(R[0],R[1],K)&&(A=1);++B<A;)for(var q=R[B],ae=T(q),n=-1,se=ae.length;++n<se;){var ce=ae[n],le=k[ce];(void 0===le||g(le,_[ce])&&!I.call(k,ce))&&(k[ce]=q[ce])}return k});E.exports=O},35474:(E,W,d)=>{E.exports=d(89851)},20217:E=>{E.exports=function W(d,m){return d===m||d!=d&&m!=m}},35281:(E,W,d)=>{var m=d(69779),g=d(33609),S=d(96517),T=d(21503);E.exports=function _(I,O){return(T(I)?m:g)(I,S(O,3))}},62516:(E,W,d)=>{var S=d(24653)(d(36397));E.exports=S},36397:(E,W,d)=>{var m=d(65317),g=d(96517),S=d(44401),T=Math.max;E.exports=function _(I,O,k){var R=null==I?0:I.length;if(!R)return-1;var B=null==k?0:S(k);return B<0&&(B=T(R+B,0)),m(I,g(O,3),B)}},22274:(E,W,d)=>{var m=d(50686);E.exports=function g(S){return null!=S&&S.length?m(S,1):[]}},89851:(E,W,d)=>{var m=d(96837),g=d(43132),S=d(21481),T=d(21503);E.exports=function _(I,O){return(T(I)?m:g)(I,S(O))}},41176:(E,W,d)=>{var m=d(30755),g=d(21481),S=d(16555);E.exports=function T(_,I){return null==_?_:m(_,g(I),S)}},8817:(E,W,d)=>{var m=d(15456);E.exports=function g(S,T,_){var I=null==S?void 0:m(S,T);return void 0===I?_:I}},54842:(E,W,d)=>{var m=d(84781),g=d(47283);E.exports=function S(T,_){return null!=T&&g(T,_,m)}},11172:(E,W,d)=>{var m=d(69989),g=d(47283);E.exports=function S(T,_){return null!=T&&g(T,_,m)}},32608:E=>{E.exports=function W(d){return d}},77151:(E,W,d)=>{var m=d(60186),g=d(72671),S=Object.prototype,T=S.hasOwnProperty,_=S.propertyIsEnumerable,I=m(function(){return arguments}())?m:function(O){return g(O)&&T.call(O,"callee")&&!_.call(O,"callee")};E.exports=I},21503:E=>{E.exports=Array.isArray},56507:(E,W,d)=>{var m=d(75946),g=d(96231);E.exports=function S(T){return null!=T&&g(T.length)&&!m(T)}},21330:(E,W,d)=>{var m=d(56507),g=d(72671);E.exports=function S(T){return g(T)&&m(T)}},80891:(E,W,d)=>{E=d.nmd(E);var m=d(12119),g=d(63580),S=W&&!W.nodeType&&W,T=S&&E&&!E.nodeType&&E,I=T&&T.exports===S?m.Buffer:void 0;E.exports=(I?I.isBuffer:void 0)||g},71973:(E,W,d)=>{var m=d(81172),g=d(28794),S=d(77151),T=d(21503),_=d(56507),I=d(80891),O=d(45488),k=d(48159),K=Object.prototype.hasOwnProperty;E.exports=function q(ae){if(null==ae)return!0;if(_(ae)&&(T(ae)||"string"==typeof ae||"function"==typeof ae.splice||I(ae)||k(ae)||S(ae)))return!ae.length;var n=g(ae);if("[object Map]"==n||"[object Set]"==n)return!ae.size;if(O(ae))return!m(ae).length;for(var se in ae)if(K.call(ae,se))return!1;return!0}},75946:(E,W,d)=>{var m=d(93337),g=d(25940);E.exports=function O(k){if(!g(k))return!1;var R=m(k);return"[object Function]"==R||"[object GeneratorFunction]"==R||"[object AsyncFunction]"==R||"[object Proxy]"==R}},96231:E=>{E.exports=function d(m){return"number"==typeof m&&m>-1&&m%1==0&&m<=9007199254740991}},13222:(E,W,d)=>{var m=d(97021),g=d(85647),S=d(73597),T=S&&S.isMap,_=T?g(T):m;E.exports=_},25940:E=>{E.exports=function W(d){var m=typeof d;return null!=d&&("object"==m||"function"==m)}},72671:E=>{E.exports=function W(d){return null!=d&&"object"==typeof d}},97614:(E,W,d)=>{var m=d(93337),g=d(29519),S=d(72671),O=Function.prototype.toString,k=Object.prototype.hasOwnProperty,R=O.call(Object);E.exports=function B(A){if(!S(A)||"[object Object]"!=m(A))return!1;var K=g(A);if(null===K)return!0;var q=k.call(K,"constructor")&&K.constructor;return"function"==typeof q&&q instanceof q&&O.call(q)==R}},90799:(E,W,d)=>{var m=d(771),g=d(85647),S=d(73597),T=S&&S.isSet,_=T?g(T):m;E.exports=_},30248:(E,W,d)=>{var m=d(93337),g=d(21503),S=d(72671);E.exports=function _(I){return"string"==typeof I||!g(I)&&S(I)&&"[object String]"==m(I)}},44129:(E,W,d)=>{var m=d(93337),g=d(72671);E.exports=function T(_){return"symbol"==typeof _||g(_)&&"[object Symbol]"==m(_)}},48159:(E,W,d)=>{var m=d(1083),g=d(85647),S=d(73597),T=S&&S.isTypedArray,_=T?g(T):m;E.exports=_},34235:E=>{E.exports=function W(d){return void 0===d}},118:(E,W,d)=>{var m=d(72271),g=d(81172),S=d(56507);E.exports=function T(_){return S(_)?m(_):g(_)}},16555:(E,W,d)=>{var m=d(72271),g=d(92809),S=d(56507);E.exports=function T(_){return S(_)?m(_,!0):g(_)}},25809:E=>{E.exports=function W(d){var m=null==d?0:d.length;return m?d[m-1]:void 0}},17489:function(E,W,d){var m;E=d.nmd(E),function(){var g,I="Expected a function",k="__lodash_hash_undefined__",B="__lodash_placeholder__",b=128,pt=1/0,Kt=9007199254740991,Zn=4294967295,Xn=[["ary",b],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],We="[object Arguments]",Ze="[object Array]",xt="[object Boolean]",At="[object Date]",Bn="[object Error]",cr="[object Function]",co="[object GeneratorFunction]",hn="[object Map]",tn="[object Number]",U="[object Object]",re="[object Promise]",Qe="[object RegExp]",et="[object Set]",Ct="[object String]",Nt="[object Symbol]",wn="[object WeakMap]",gn="[object ArrayBuffer]",gr="[object DataView]",fr="[object Float32Array]",qi="[object Float64Array]",Qn="[object Int8Array]",vr="[object Int16Array]",hr="[object Int32Array]",Cr="[object Uint8Array]",Qr="[object Uint8ClampedArray]",gi="[object Uint16Array]",wr="[object Uint32Array]",un=/\b__p \+= '';/g,vi=/\b(__p \+=) '' \+/g,Uo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,jr=/&(?:amp|lt|gt|quot|#39);/g,fo=/[&<>"']/g,ke=RegExp(jr.source),Xe=RegExp(fo.source),sr=/<%-([\s\S]+?)%>/g,Br=/<%([\s\S]+?)%>/g,Jr=/<%=([\s\S]+?)%>/g,ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ho=/^\w*$/,_i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ur=/[\\^$.*+?()[\]{}|]/g,ns=RegExp(ur.source),fa=/^\s+/,Zr=/\s/,rs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,is=/\{\n\/\* \[wrapped with (.+)\] \*/,Ui=/,? & /,os=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Da=/[()=,{}\[\]\/\s]/,as=/\\(\\)?/g,Ba=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ha=/\w*$/,ks=/^[-+]0x[0-9a-f]+$/i,ss=/^0b[01]+$/i,Po=/^\[object .+?Constructor\]$/,pa=/^0o[0-7]+$/i,Os=/^(?:0|[1-9]\d*)$/,Ls=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Go=/($^)/,Mo=/['\n\r\u2028\u2029\\]/g,ma="\\ud800-\\udfff",Va="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",us="\\u2700-\\u27bf",$o="a-z\\xdf-\\xf6\\xf8-\\xff",Vr="A-Z\\xc0-\\xd6\\xd8-\\xde",ga="\\ufe0e\\ufe0f",yi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xi="["+ma+"]",ko="["+yi+"]",mo="["+Va+"]",Sr="\\d+",_r="["+us+"]",Ai="["+$o+"]",Un="[^"+ma+yi+Sr+us+$o+Vr+"]",Wo="\\ud83c[\\udffb-\\udfff]",Lr="[^"+ma+"]",_n="(?:\\ud83c[\\udde6-\\uddff]){2}",kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Oo="["+Vr+"]",Lo="(?:"+Ai+"|"+Un+")",_a="(?:"+Oo+"|"+Un+")",Ha="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ja="(?:"+mo+"|"+Wo+")?",Xo="["+ga+"]?",ya=Xo+ja+"(?:\\u200d(?:"+[Lr,_n,kr].join("|")+")"+Xo+ja+")*",Ns="(?:"+[_r,_n,kr].join("|")+")"+ya,bi="(?:"+[Lr+mo+"?",mo,_n,kr,xi].join("|")+")",Ko=RegExp("['\u2019]","g"),Qo=RegExp(mo,"g"),go=RegExp(Wo+"(?="+Wo+")|"+bi+ya,"g"),za=RegExp([Oo+"?"+Ai+"+"+Ha+"(?="+[ko,Oo,"$"].join("|")+")",_a+"+"+Yo+"(?="+[ko,Oo+Lo,"$"].join("|")+")",Oo+"?"+Lo+"+"+Ha,Oo+"+"+Yo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Sr,Ns].join("|"),"g"),Er=RegExp("[\\u200d"+ma+Va+ga+"]"),Gi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ci=-1,Gn={};Gn[fr]=Gn[qi]=Gn[Qn]=Gn[vr]=Gn[hr]=Gn[Cr]=Gn[Qr]=Gn[gi]=Gn[wr]=!0,Gn[We]=Gn[Ze]=Gn[gn]=Gn[xt]=Gn[gr]=Gn[At]=Gn[Bn]=Gn[cr]=Gn[hn]=Gn[tn]=Gn[U]=Gn[Qe]=Gn[et]=Gn[Ct]=Gn[wn]=!1;var kn={};kn[We]=kn[Ze]=kn[gn]=kn[gr]=kn[xt]=kn[At]=kn[fr]=kn[qi]=kn[Qn]=kn[vr]=kn[hr]=kn[hn]=kn[tn]=kn[U]=kn[Qe]=kn[et]=kn[Ct]=kn[Nt]=kn[Cr]=kn[Qr]=kn[gi]=kn[wr]=!0,kn[Bn]=kn[cr]=kn[wn]=!1;var J={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,ge=parseInt,Oe="object"==typeof global&&global&&global.Object===Object&&global,Te="object"==typeof self&&self&&self.Object===Object&&self,Be=Oe||Te||Function("return this")(),rt=W&&!W.nodeType&&W,l=rt&&E&&!E.nodeType&&E,h=l&&l.exports===rt,y=h&&Oe.process,w=function(){try{return l&&l.require&&l.require("util").types||y&&y.binding&&y.binding("util")}catch(Ue){}}(),N=w&&w.isArrayBuffer,H=w&&w.isDate,X=w&&w.isMap,me=w&&w.isRegExp,de=w&&w.isSet,Ae=w&&w.isTypedArray;function He(Ee,Ue,$e){switch($e.length){case 0:return Ee.call(Ue);case 1:return Ee.call(Ue,$e[0]);case 2:return Ee.call(Ue,$e[0],$e[1]);case 3:return Ee.call(Ue,$e[0],$e[1],$e[2])}return Ee.apply(Ue,$e)}function dt(Ee,Ue,$e,Mt){for(var qt=-1,On=null==Ee?0:Ee.length;++qt<On;){var Pr=Ee[qt];Ue(Mt,Pr,$e(Pr),Ee)}return Mt}function De(Ee,Ue){for(var $e=-1,Mt=null==Ee?0:Ee.length;++$e<Mt&&!1!==Ue(Ee[$e],$e,Ee););return Ee}function Je(Ee,Ue){for(var $e=null==Ee?0:Ee.length;$e--&&!1!==Ue(Ee[$e],$e,Ee););return Ee}function Ot(Ee,Ue){for(var $e=-1,Mt=null==Ee?0:Ee.length;++$e<Mt;)if(!Ue(Ee[$e],$e,Ee))return!1;return!0}function zt(Ee,Ue){for(var $e=-1,Mt=null==Ee?0:Ee.length,qt=0,On=[];++$e<Mt;){var Pr=Ee[$e];Ue(Pr,$e,Ee)&&(On[qt++]=Pr)}return On}function kt(Ee,Ue){return!(null==Ee||!Ee.length)&&$i(Ee,Ue,0)>-1}function pr(Ee,Ue,$e){for(var Mt=-1,qt=null==Ee?0:Ee.length;++Mt<qt;)if($e(Ue,Ee[Mt]))return!0;return!1}function Qt(Ee,Ue){for(var $e=-1,Mt=null==Ee?0:Ee.length,qt=Array(Mt);++$e<Mt;)qt[$e]=Ue(Ee[$e],$e,Ee);return qt}function Ir(Ee,Ue){for(var $e=-1,Mt=Ue.length,qt=Ee.length;++$e<Mt;)Ee[qt+$e]=Ue[$e];return Ee}function $n(Ee,Ue,$e,Mt){var qt=-1,On=null==Ee?0:Ee.length;for(Mt&&On&&($e=Ee[++qt]);++qt<On;)$e=Ue($e,Ee[qt],qt,Ee);return $e}function nn(Ee,Ue,$e,Mt){var qt=null==Ee?0:Ee.length;for(Mt&&qt&&($e=Ee[--qt]);qt--;)$e=Ue($e,Ee[qt],qt,Ee);return $e}function qr(Ee,Ue){for(var $e=-1,Mt=null==Ee?0:Ee.length;++$e<Mt;)if(Ue(Ee[$e],$e,Ee))return!0;return!1}var Fn=wi("length");function Ga(Ee,Ue,$e){var Mt;return $e(Ee,function(qt,On,Pr){if(Ue(qt,On,Pr))return Mt=On,!1}),Mt}function ei(Ee,Ue,$e,Mt){for(var qt=Ee.length,On=$e+(Mt?1:-1);Mt?On--:++On<qt;)if(Ue(Ee[On],On,Ee))return On;return-1}function $i(Ee,Ue,$e){return Ue==Ue?function fu(Ee,Ue,$e){for(var Mt=$e-1,qt=Ee.length;++Mt<qt;)if(Ee[Mt]===Ue)return Mt;return-1}(Ee,Ue,$e):ei(Ee,si,$e)}function xa(Ee,Ue,$e,Mt){for(var qt=$e-1,On=Ee.length;++qt<On;)if(Mt(Ee[qt],Ue))return qt;return-1}function si(Ee){return Ee!=Ee}function Fo(Ee,Ue){var $e=null==Ee?0:Ee.length;return $e?hs(Ee,Ue)/$e:NaN}function wi(Ee){return function(Ue){return null==Ue?g:Ue[Ee]}}function Wi(Ee){return function(Ue){return null==Ee?g:Ee[Ue]}}function ba(Ee,Ue,$e,Mt,qt){return qt(Ee,function(On,Pr,Jn){$e=Mt?(Mt=!1,On):Ue($e,On,Pr,Jn)}),$e}function hs(Ee,Ue){for(var $e,Mt=-1,qt=Ee.length;++Mt<qt;){var On=Ue(Ee[Mt]);On!==g&&($e=$e===g?On:$e+On)}return $e}function Vn(Ee,Ue){for(var $e=-1,Mt=Array(Ee);++$e<Ee;)Mt[$e]=Ue($e);return Mt}function Ds(Ee){return Ee&&Ee.slice(0,gs(Ee)+1).replace(fa,"")}function ui(Ee){return function(Ue){return Ee(Ue)}}function lu(Ee,Ue){return Qt(Ue,function($e){return Ee[$e]})}function Zo(Ee,Ue){return Ee.has(Ue)}function Yu(Ee,Ue){for(var $e=-1,Mt=Ee.length;++$e<Mt&&$i(Ue,Ee[$e],0)>-1;);return $e}function cu(Ee,Ue){for(var $e=Ee.length;$e--&&$i(Ue,Ee[$e],0)>-1;);return $e}function zl(Ee,Ue){for(var $e=Ee.length,Mt=0;$e--;)Ee[$e]===Ue&&++Mt;return Mt}var Ul=Wi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),qo=Wi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Yi(Ee){return"\\"+J[Ee]}function $a(Ee){return Er.test(Ee)}function du(Ee){var Ue=-1,$e=Array(Ee.size);return Ee.forEach(function(Mt,qt){$e[++Ue]=[qt,Mt]}),$e}function Bs(Ee,Ue){return function($e){return Ee(Ue($e))}}function ti(Ee,Ue){for(var $e=-1,Mt=Ee.length,qt=0,On=[];++$e<Mt;){var Pr=Ee[$e];(Pr===Ue||Pr===B)&&(Ee[$e]=B,On[qt++]=$e)}return On}function Xi(Ee){var Ue=-1,$e=Array(Ee.size);return Ee.forEach(function(Mt){$e[++Ue]=Mt}),$e}function Wa(Ee){return $a(Ee)?function Ki(Ee){for(var Ue=go.lastIndex=0;go.test(Ee);)++Ue;return Ue}(Ee):Fn(Ee)}function yn(Ee){return $a(Ee)?function Xu(Ee){return Ee.match(go)||[]}(Ee):function mr(Ee){return Ee.split("")}(Ee)}function gs(Ee){for(var Ue=Ee.length;Ue--&&Zr.test(Ee.charAt(Ue)););return Ue}var to=Wi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pu=function Ee(Ue){var a,$e=(Ue=null==Ue?Be:pu.defaults(Be.Object(),Ue,pu.pick(Be,Dt))).Array,Mt=Ue.Date,qt=Ue.Error,On=Ue.Function,Pr=Ue.Math,Jn=Ue.Object,Ca=Ue.RegExp,Si=Ue.String,Gr=Ue.TypeError,Hs=$e.prototype,fe=Jn.prototype,Ce=Ue["__core-js_shared__"],qe=On.prototype.toString,be=fe.hasOwnProperty,it=0,ct=(a=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",yt=fe.toString,wt=qe.call(Jn),Ut=Be._,Bt=Ca("^"+qe.call(be).replace(ur,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=h?Ue.Buffer:g,rn=Ue.Symbol,Kn=Ue.Uint8Array,Ht=Vt?Vt.allocUnsafe:g,yr=Bs(Jn.getPrototypeOf,Jn),$r=Jn.create,Ti=fe.propertyIsEnumerable,nr=Hs.splice,Ya=rn?rn.isConcatSpreadable:g,vo=rn?rn.iterator:g,xr=rn?rn.toStringTag:g,Ku=function(){try{var a=Hr(Jn,"defineProperty");return a({},"",{}),a}catch(u){}}(),mn=Ue.clearTimeout!==Be.clearTimeout&&Ue.clearTimeout,nd=Mt&&Mt.now!==Be.Date.now&&Mt.now,Wl=Ue.setTimeout!==Be.setTimeout&&Ue.setTimeout,Qu=Pr.ceil,mu=Pr.floor,Ju=Jn.getOwnPropertySymbols,ch=Vt?Vt.isBuffer:g,js=Ue.isFinite,Yl=Hs.join,dh=Bs(Jn.keys,Jn),Wr=Pr.max,Ei=Pr.min,fh=Mt.now,hh=Ue.parseInt,rd=Pr.random,ph=Hs.reverse,Xl=Hr(Ue,"DataView"),gu=Hr(Ue,"Map"),Kl=Hr(Ue,"Promise"),Xa=Hr(Ue,"Set"),vs=Hr(Ue,"WeakMap"),vu=Hr(Jn,"create"),Zu=vs&&new vs,zs={},mh=sa(Xl),gh=sa(gu),vh=sa(Kl),_h=sa(Xa),yh=sa(vs),qu=rn?rn.prototype:g,_u=qu?qu.valueOf:g,id=qu?qu.toString:g;function Z(a){if(Nr(a)&&!dn(a)&&!(a instanceof Sn)){if(a instanceof _o)return a;if(be.call(a,"__wrapped__"))return xc(a)}return new _o(a)}var Us=function(){function a(){}return function(u){if(!Ar(u))return{};if($r)return $r(u);a.prototype=u;var p=new a;return a.prototype=g,p}}();function el(){}function _o(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=g}function Sn(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zn,this.__views__=[]}function ta(a){var u=-1,p=null==a?0:a.length;for(this.clear();++u<p;){var P=a[u];this.set(P[0],P[1])}}function wa(a){var u=-1,p=null==a?0:a.length;for(this.clear();++u<p;){var P=a[u];this.set(P[0],P[1])}}function na(a){var u=-1,p=null==a?0:a.length;for(this.clear();++u<p;){var P=a[u];this.set(P[0],P[1])}}function Gs(a){var u=-1,p=null==a?0:a.length;for(this.__data__=new na;++u<p;)this.add(a[u])}function ra(a){var u=this.__data__=new wa(a);this.size=u.size}function dd(a,u){var p=dn(a),P=!p&&Vo(a),j=!p&&!P&&Es(a),te=!p&&!P&&!j&&nu(a),he=p||P||j||te,xe=he?Vn(a.length,Si):[],Me=xe.length;for(var ot in a)(u||be.call(a,ot))&&(!he||!("length"==ot||j&&("offset"==ot||"parent"==ot)||te&&("buffer"==ot||"byteLength"==ot||"byteOffset"==ot)||bo(ot,Me)))&&xe.push(ot);return xe}function fd(a){var u=a.length;return u?a[cl(0,u-1)]:g}function Lh(a,u){return Qi(ri(a),_s(u,0,a.length))}function Fh(a){return Qi(ri(a))}function Ql(a,u,p){(p!==g&&!oo(a[u],p)||p===g&&!(u in a))&&Sa(a,u,p)}function $s(a,u,p){var P=a[u];(!be.call(a,u)||!oo(P,p)||p===g&&!(u in a))&&Sa(a,u,p)}function nl(a,u){for(var p=a.length;p--;)if(oo(a[p][0],u))return p;return-1}function Rh(a,u,p,P){return Qa(a,function(j,te,he){u(P,j,p(j),he)}),P}function hd(a,u){return a&&xo(u,Xr(u),a)}function Sa(a,u,p){"__proto__"==u&&Ku?Ku(a,u,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[u]=p}function Jl(a,u){for(var p=-1,P=u.length,j=$e(P),te=null==a;++p<P;)j[p]=te?g:Vc(a,u[p]);return j}function _s(a,u,p){return a==a&&(p!==g&&(a=a<=p?a:p),u!==g&&(a=a>=u?a:u)),a}function Yr(a,u,p,P,j,te){var he,xe=1&u,Me=2&u,ot=4&u;if(p&&(he=j?p(a,P,j,te):p(a)),he!==g)return he;if(!Ar(a))return a;var at=dn(a);if(at){if(he=function xl(a){var u=a.length,p=new a.constructor(u);return u&&"string"==typeof a[0]&&be.call(a,"index")&&(p.index=a.index,p.input=a.input),p}(a),!xe)return ri(a,he)}else{var ht=hi(a),St=ht==cr||ht==co;if(Es(a))return ml(a,xe);if(ht==U||ht==We||St&&!j){if(he=Me||St?{}:bl(a),!xe)return Me?function Pt(a,u){return xo(a,_l(a),u)}(a,function Nh(a,u){return a&&xo(u,Vi(u),a)}(he,a)):function dc(a,u){return xo(a,Ia(a),u)}(a,hd(he,a))}else{if(!kn[ht])return j?a:{};he=function Gd(a,u,p){var P=a.constructor;switch(u){case gn:return Tu(a);case xt:case At:return new P(+a);case gr:return function Od(a,u){var p=u?Tu(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}(a,p);case fr:case qi:case Qn:case vr:case hr:case Cr:case Qr:case gi:case wr:return Rd(a,p);case hn:return new P;case tn:case Ct:return new P(a);case Qe:return function Ld(a){var u=new a.constructor(a.source,ha.exec(a));return u.lastIndex=a.lastIndex,u}(a);case et:return new P;case Nt:return function Fd(a){return _u?Jn(_u.call(a)):{}}(a)}}(a,ht,xe)}}te||(te=new ra);var Ft=te.get(a);if(Ft)return Ft;te.set(a,he),Hu(a)?a.forEach(function(Zt){he.add(Yr(Zt,u,p,Zt,a,te))}):Rf(a)&&a.forEach(function(Zt,Pn){he.set(Pn,Yr(Zt,u,p,Pn,a,te))});var vn=at?g:(ot?Me?gl:Li:Me?Vi:Xr)(a);return De(vn||a,function(Zt,Pn){vn&&(Zt=a[Pn=Zt]),$s(he,Pn,Yr(Zt,u,p,Pn,a,te))}),he}function pd(a,u,p){var P=p.length;if(null==a)return!P;for(a=Jn(a);P--;){var j=p[P],he=a[j];if(he===g&&!(j in a)||!(0,u[j])(he))return!1}return!0}function md(a,u,p){if("function"!=typeof a)throw new Gr(I);return Ou(function(){a.apply(g,p)},u)}function xu(a,u,p,P){var j=-1,te=kt,he=!0,xe=a.length,Me=[],ot=u.length;if(!xe)return Me;p&&(u=Qt(u,ui(p))),P?(te=pr,he=!1):u.length>=200&&(te=Zo,he=!1,u=new Gs(u));e:for(;++j<xe;){var at=a[j],ht=null==p?at:p(at);if(at=P||0!==at?at:0,he&&ht==ht){for(var St=ot;St--;)if(u[St]===ht)continue e;Me.push(at)}else te(u,ht,P)||Me.push(at)}return Me}Z.templateSettings={escape:sr,evaluate:Br,interpolate:Jr,variable:"",imports:{_:Z}},(Z.prototype=el.prototype).constructor=Z,(_o.prototype=Us(el.prototype)).constructor=_o,(Sn.prototype=Us(el.prototype)).constructor=Sn,ta.prototype.clear=function sd(){this.__data__=vu?vu(null):{},this.size=0},ta.prototype.delete=function yu(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},ta.prototype.get=function Ka(a){var u=this.__data__;if(vu){var p=u[a];return p===k?g:p}return be.call(u,a)?u[a]:g},ta.prototype.has=function xh(a){var u=this.__data__;return vu?u[a]!==g:be.call(u,a)},ta.prototype.set=function bh(a,u){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=vu&&u===g?k:u,this},wa.prototype.clear=function Ch(){this.__data__=[],this.size=0},wa.prototype.delete=function wh(a){var u=this.__data__,p=nl(u,a);return!(p<0||(p==u.length-1?u.pop():nr.call(u,p,1),--this.size,0))},wa.prototype.get=function Sh(a){var u=this.__data__,p=nl(u,a);return p<0?g:u[p][1]},wa.prototype.has=function Th(a){return nl(this.__data__,a)>-1},wa.prototype.set=function ud(a,u){var p=this.__data__,P=nl(p,a);return P<0?(++this.size,p.push([a,u])):p[P][1]=u,this},na.prototype.clear=function Zm(){this.size=0,this.__data__={hash:new ta,map:new(gu||wa),string:new ta}},na.prototype.delete=function qm(a){var u=vl(this,a).delete(a);return this.size-=u?1:0,u},na.prototype.get=function ld(a){return vl(this,a).get(a)},na.prototype.has=function Eh(a){return vl(this,a).has(a)},na.prototype.set=function Ih(a,u){var p=vl(this,a),P=p.size;return p.set(a,u),this.size+=p.size==P?0:1,this},Gs.prototype.add=Gs.prototype.push=function cd(a){return this.__data__.set(a,k),this},Gs.prototype.has=function eg(a){return this.__data__.has(a)},ra.prototype.clear=function Ph(){this.__data__=new wa,this.size=0},ra.prototype.delete=function Mh(a){var u=this.__data__,p=u.delete(a);return this.size=u.size,p},ra.prototype.get=function Ah(a){return this.__data__.get(a)},ra.prototype.has=function kh(a){return this.__data__.has(a)},ra.prototype.set=function Oh(a,u){var p=this.__data__;if(p instanceof wa){var P=p.__data__;if(!gu||P.length<199)return P.push([a,u]),this.size=++p.size,this;p=this.__data__=new na(P)}return p.set(a,u),this.size=p.size,this};var Qa=Eu(Ii),gd=Eu(ol,!0);function Bh(a,u){var p=!0;return Qa(a,function(P,j,te){return p=!!u(P,j,te)}),p}function rl(a,u,p){for(var P=-1,j=a.length;++P<j;){var te=a[P],he=u(te);if(null!=he&&(xe===g?he==he&&!so(he):p(he,xe)))var xe=he,Me=te}return Me}function il(a,u){var p=[];return Qa(a,function(P,j,te){u(P,j,te)&&p.push(P)}),p}function ni(a,u,p,P,j){var te=-1,he=a.length;for(p||(p=_c),j||(j=[]);++te<he;){var xe=a[te];u>0&&p(xe)?u>1?ni(xe,u-1,p,P,j):Ir(j,xe):P||(j[j.length]=xe)}return j}var Ja=Nd(),vd=Nd(!0);function Ii(a,u){return a&&Ja(a,u,Xr)}function ol(a,u){return a&&vd(a,u,Xr)}function al(a,u){return zt(u,function(p){return ts(a[p])})}function ys(a,u){for(var p=0,P=(u=ia(u,a)).length;null!=a&&p<P;)a=a[io(u[p++])];return p&&p==P?a:g}function _d(a,u,p){var P=u(a);return dn(a)?P:Ir(P,p(a))}function ki(a){return null==a?a===g?"[object Undefined]":"[object Null]":xr&&xr in Jn(a)?function jd(a){var u=be.call(a,xr),p=a[xr];try{a[xr]=g;var P=!0}catch(te){}var j=yt.call(a);return P&&(u?a[xr]=p:delete a[xr]),j}(a):function Zd(a){return yt.call(a)}(a)}function Zl(a,u){return a>u}function sl(a,u){return null!=a&&be.call(a,u)}function Hh(a,u){return null!=a&&u in Jn(a)}function ul(a,u,p){for(var P=p?pr:kt,j=a[0].length,te=a.length,he=te,xe=$e(te),Me=1/0,ot=[];he--;){var at=a[he];he&&u&&(at=Qt(at,ui(u))),Me=Ei(at.length,Me),xe[he]=!p&&(u||j>=120&&at.length>=120)?new Gs(he&&at):g}at=a[0];var ht=-1,St=xe[0];e:for(;++ht<j&&ot.length<Me;){var Ft=at[ht],Jt=u?u(Ft):Ft;if(Ft=p||0!==Ft?Ft:0,!(St?Zo(St,Jt):P(ot,Jt,p))){for(he=te;--he;){var vn=xe[he];if(!(vn?Zo(vn,Jt):P(a[he],Jt,p)))continue e}St&&St.push(Jt),ot.push(Ft)}}return ot}function bu(a,u,p){var P=null==(a=Sl(a,u=ia(u,a)))?a:a[io(wo(u))];return null==P?g:He(P,a,p)}function yd(a){return Nr(a)&&ki(a)==We}function Cu(a,u,p,P,j){return a===u||(null==a||null==u||!Nr(a)&&!Nr(u)?a!=a&&u!=u:function Uh(a,u,p,P,j,te){var he=dn(a),xe=dn(u),Me=he?Ze:hi(a),ot=xe?Ze:hi(u),at=(Me=Me==We?U:Me)==U,ht=(ot=ot==We?U:ot)==U,St=Me==ot;if(St&&Es(a)){if(!Es(u))return!1;he=!0,at=!1}if(St&&!at)return te||(te=new ra),he||nu(a)?No(a,u,p,P,j,te):function ws(a,u,p,P,j,te,he){switch(p){case gr:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case gn:return!(a.byteLength!=u.byteLength||!te(new Kn(a),new Kn(u)));case xt:case At:case tn:return oo(+a,+u);case Bn:return a.name==u.name&&a.message==u.message;case Qe:case Ct:return a==u+"";case hn:var xe=du;case et:if(xe||(xe=Xi),a.size!=u.size&&!(1&P))return!1;var ot=he.get(a);if(ot)return ot==u;P|=2,he.set(a,u);var at=No(xe(a),xe(u),P,j,te,he);return he.delete(a),at;case Nt:if(_u)return _u.call(a)==_u.call(u)}return!1}(a,u,Me,p,P,j,te);if(!(1&p)){var Ft=at&&be.call(a,"__wrapped__"),Jt=ht&&be.call(u,"__wrapped__");if(Ft||Jt){var vn=Ft?a.value():a,Zt=Jt?u.value():u;return te||(te=new ra),j(vn,Zt,p,P,te)}}return!!St&&(te||(te=new ra),function fi(a,u,p,P,j,te){var he=1&p,xe=Li(a),Me=xe.length;if(Me!=Li(u).length&&!he)return!1;for(var ht=Me;ht--;){var St=xe[ht];if(!(he?St in u:be.call(u,St)))return!1}var Ft=te.get(a),Jt=te.get(u);if(Ft&&Jt)return Ft==u&&Jt==a;var vn=!0;te.set(a,u),te.set(u,a);for(var Zt=he;++ht<Me;){var Pn=a[St=xe[ht]],Dn=u[St];if(P)var uo=he?P(Dn,Pn,St,u,a,te):P(Pn,Dn,St,a,u,te);if(!(uo===g?Pn===Dn||j(Pn,Dn,p,P,te):uo)){vn=!1;break}Zt||(Zt="constructor"==St)}if(vn&&!Zt){var br=a.constructor,lo=u.constructor;br!=lo&&"constructor"in a&&"constructor"in u&&!("function"==typeof br&&br instanceof br&&"function"==typeof lo&&lo instanceof lo)&&(vn=!1)}return te.delete(a),te.delete(u),vn}(a,u,p,P,j,te))}(a,u,p,P,Cu,j))}function ql(a,u,p,P){var j=p.length,te=j,he=!P;if(null==a)return!te;for(a=Jn(a);j--;){var xe=p[j];if(he&&xe[2]?xe[1]!==a[xe[0]]:!(xe[0]in a))return!1}for(;++j<te;){var Me=(xe=p[j])[0],ot=a[Me],at=xe[1];if(he&&xe[2]){if(ot===g&&!(Me in a))return!1}else{var ht=new ra;if(P)var St=P(ot,at,Me,a,u,ht);if(!(St===g?Cu(at,ot,3,P,ht):St))return!1}}return!0}function xd(a){return!(!Ar(a)||function Yd(a){return!!ct&&ct in a}(a))&&(ts(a)?Bt:Po).test(sa(a))}function ec(a){return"function"==typeof a?a:null==a?oi:"object"==typeof a?dn(a)?wd(a[0],a[1]):Cd(a):oh(a)}function tc(a){if(!Ss(a))return dh(a);var u=[];for(var p in Jn(a))be.call(a,p)&&"constructor"!=p&&u.push(p);return u}function nc(a,u){return a<u}function bd(a,u){var p=-1,P=ao(a)?$e(a.length):[];return Qa(a,function(j,te,he){P[++p]=u(j,te,he)}),P}function Cd(a){var u=vc(a);return 1==u.length&&u[0][2]?yc(u[0][0],u[0][1]):function(p){return p===a||ql(p,a,u)}}function wd(a,u){return Cl(a)&&Au(u)?yc(io(a),u):function(p){var P=Vc(p,a);return P===g&&P===u?iu(p,a):Cu(u,P,3)}}function ll(a,u,p,P,j){a!==u&&Ja(u,function(te,he){if(j||(j=new ra),Ar(te))!function Kh(a,u,p,P,j,te,he){var xe=Zs(a,p),Me=Zs(u,p),ot=he.get(Me);if(ot)Ql(a,p,ot);else{var at=te?te(xe,Me,p+"",a,u,he):g,ht=at===g;if(ht){var St=dn(Me),Ft=!St&&Es(Me),Jt=!St&&!Ft&&nu(Me);at=Me,St||Ft||Jt?dn(xe)?at=xe:Rr(xe)?at=ri(xe):Ft?(ht=!1,at=ml(Me,!0)):Jt?(ht=!1,at=Rd(Me,!0)):at=[]:ca(Me)||Vo(Me)?(at=xe,Vo(xe)?at=Nc(xe):(!Ar(xe)||ts(xe))&&(at=bl(Me))):ht=!1}ht&&(he.set(Me,at),j(at,Me,P,te,he),he.delete(Me)),Ql(a,p,at)}}(a,u,he,p,ll,P,j);else{var xe=P?P(Zs(a,he),te,he+"",a,u,j):g;xe===g&&(xe=te),Ql(a,he,xe)}},Vi)}function Sd(a,u){var p=a.length;if(p)return bo(u+=u<0?p:0,p)?a[u]:g}function Td(a,u,p){u=u.length?Qt(u,function(te){return dn(te)?function(he){return ys(he,1===te.length?te[0]:te)}:te}):[oi];var P=-1;return u=Qt(u,ui(Gt())),function Rn(Ee,Ue){var $e=Ee.length;for(Ee.sort(Ue);$e--;)Ee[$e]=Ee[$e].value;return Ee}(bd(a,function(te,he,xe){return{criteria:Qt(u,function(ot){return ot(te)}),index:++P,value:te}}),function(te,he){return function tp(a,u,p){for(var P=-1,j=a.criteria,te=u.criteria,he=j.length,xe=p.length;++P<he;){var Me=lc(j[P],te[P]);if(Me)return P>=xe?Me:Me*("desc"==p[P]?-1:1)}return a.index-u.index}(te,he,p)})}function Ed(a,u,p){for(var P=-1,j=u.length,te={};++P<j;){var he=u[P],xe=ys(a,he);p(xe,he)&&Ys(te,ia(he,a),xe)}return te}function rc(a,u,p,P){var j=P?xa:$i,te=-1,he=u.length,xe=a;for(a===u&&(u=ri(u)),p&&(xe=Qt(a,ui(p)));++te<he;)for(var Me=0,ot=u[te],at=p?p(ot):ot;(Me=j(xe,at,Me,P))>-1;)xe!==a&&nr.call(xe,Me,1),nr.call(a,Me,1);return a}function Id(a,u){for(var p=a?u.length:0,P=p-1;p--;){var j=u[p];if(p==P||j!==te){var te=j;bo(j)?nr.call(a,j,1):Ta(a,j)}}return a}function cl(a,u){return a+mu(rd()*(u-a+1))}function oc(a,u){var p="";if(!a||u<1||u>Kt)return p;do{u%2&&(p+=a),(u=mu(u/2))&&(a+=a)}while(u);return p}function xn(a,u){return qd(ku(a,u,oi),a+"")}function Zh(a){return fd(Ms(a))}function Pd(a,u){var p=Ms(a);return Qi(p,_s(u,0,p.length))}function Ys(a,u,p,P){if(!Ar(a))return a;for(var j=-1,te=(u=ia(u,a)).length,he=te-1,xe=a;null!=xe&&++j<te;){var Me=io(u[j]),ot=p;if("__proto__"===Me||"constructor"===Me||"prototype"===Me)return a;if(j!=he){var at=xe[Me];(ot=P?P(at,Me,xe):g)===g&&(ot=Ar(at)?at:bo(u[j+1])?[]:{})}$s(xe,Me,ot),xe=xe[Me]}return a}var Md=Zu?function(a,u){return Zu.set(a,u),a}:oi,rr=Ku?function(a,u){return Ku(a,"toString",{configurable:!0,enumerable:!1,value:$c(u),writable:!0})}:oi;function qh(a){return Qi(Ms(a))}function yo(a,u,p){var P=-1,j=a.length;u<0&&(u=-u>j?0:j+u),(p=p>j?j:p)<0&&(p+=j),j=u>p?0:p-u>>>0,u>>>=0;for(var te=$e(j);++P<j;)te[P]=a[P+u];return te}function ep(a,u){var p;return Qa(a,function(P,j,te){return!(p=u(P,j,te))}),!!p}function dl(a,u,p){var P=0,j=null==a?P:a.length;if("number"==typeof u&&u==u&&j<=2147483647){for(;P<j;){var te=P+j>>>1,he=a[te];null!==he&&!so(he)&&(p?he<=u:he<u)?P=te+1:j=te}return j}return ac(a,u,oi,p)}function ac(a,u,p,P){var j=0,te=null==a?0:a.length;if(0===te)return 0;for(var he=(u=p(u))!=u,xe=null===u,Me=so(u),ot=u===g;j<te;){var at=mu((j+te)/2),ht=p(a[at]),St=ht!==g,Ft=null===ht,Jt=ht==ht,vn=so(ht);if(he)var Zt=P||Jt;else Zt=ot?Jt&&(P||St):xe?Jt&&St&&(P||!Ft):Me?Jt&&St&&!Ft&&(P||!vn):!Ft&&!vn&&(P?ht<=u:ht<u);Zt?j=at+1:te=at}return Ei(te,4294967294)}function Ad(a,u){for(var p=-1,P=a.length,j=0,te=[];++p<P;){var he=a[p],xe=u?u(he):he;if(!p||!oo(xe,Me)){var Me=xe;te[j++]=0===he?0:he}}return te}function sc(a){return"number"==typeof a?a:so(a)?NaN:+a}function no(a){if("string"==typeof a)return a;if(dn(a))return Qt(a,no)+"";if(so(a))return id?id.call(a):"";var u=a+"";return"0"==u&&1/a==-pt?"-0":u}function ci(a,u,p){var P=-1,j=kt,te=a.length,he=!0,xe=[],Me=xe;if(p)he=!1,j=pr;else if(te>=200){var ot=u?null:Hd(a);if(ot)return Xi(ot);he=!1,j=Zo,Me=new Gs}else Me=u?[]:xe;e:for(;++P<te;){var at=a[P],ht=u?u(at):at;if(at=p||0!==at?at:0,he&&ht==ht){for(var St=Me.length;St--;)if(Me[St]===ht)continue e;u&&Me.push(ht),xe.push(at)}else j(Me,ht,p)||(Me!==xe&&Me.push(ht),xe.push(at))}return xe}function Ta(a,u){return null==(a=Sl(a,u=ia(u,a)))||delete a[io(wo(u))]}function wu(a,u,p,P){return Ys(a,u,p(ys(a,u)),P)}function di(a,u,p,P){for(var j=a.length,te=P?j:-1;(P?te--:++te<j)&&u(a[te],te,a););return p?yo(a,P?0:te,P?te+1:j):yo(a,P?te+1:0,P?j:te)}function fl(a,u){var p=a;return p instanceof Sn&&(p=p.value()),$n(u,function(P,j){return j.func.apply(j.thisArg,Ir([P],j.args))},p)}function Xs(a,u,p){var P=a.length;if(P<2)return P?ci(a[0]):[];for(var j=-1,te=$e(P);++j<P;)for(var he=a[j],xe=-1;++xe<P;)xe!=j&&(te[j]=xu(te[j]||he,a[xe],u,p));return ci(ni(te,1),u,p)}function hl(a,u,p){for(var P=-1,j=a.length,te=u.length,he={};++P<j;)p(he,a[P],P<te?u[P]:g);return he}function uc(a){return Rr(a)?a:[]}function pl(a){return"function"==typeof a?a:oi}function ia(a,u){return dn(a)?a:Cl(a,u)?[a]:ef(tr(a))}var kd=xn;function en(a,u,p){var P=a.length;return p=p===g?P:p,!u&&p>=P?a:yo(a,u,p)}var Su=mn||function(a){return Be.clearTimeout(a)};function ml(a,u){if(u)return a.slice();var p=a.length,P=Ht?Ht(p):new a.constructor(p);return a.copy(P),P}function Tu(a){var u=new a.constructor(a.byteLength);return new Kn(u).set(new Kn(a)),u}function Rd(a,u){var p=u?Tu(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function lc(a,u){if(a!==u){var p=a!==g,P=null===a,j=a==a,te=so(a),he=u!==g,xe=null===u,Me=u==u,ot=so(u);if(!xe&&!ot&&!te&&a>u||te&&he&&Me&&!xe&&!ot||P&&he&&Me||!p&&Me||!j)return 1;if(!P&&!te&&!ot&&a<u||ot&&p&&j&&!P&&!te||xe&&p&&j||!he&&j||!Me)return-1}return 0}function cc(a,u,p,P){for(var j=-1,te=a.length,he=p.length,xe=-1,Me=u.length,ot=Wr(te-he,0),at=$e(Me+ot),ht=!P;++xe<Me;)at[xe]=u[xe];for(;++j<he;)(ht||j<te)&&(at[p[j]]=a[j]);for(;ot--;)at[xe++]=a[j++];return at}function _e(a,u,p,P){for(var j=-1,te=a.length,he=-1,xe=p.length,Me=-1,ot=u.length,at=Wr(te-xe,0),ht=$e(at+ot),St=!P;++j<at;)ht[j]=a[j];for(var Ft=j;++Me<ot;)ht[Ft+Me]=u[Me];for(;++he<xe;)(St||j<te)&&(ht[Ft+p[he]]=a[j++]);return ht}function ri(a,u){var p=-1,P=a.length;for(u||(u=$e(P));++p<P;)u[p]=a[p];return u}function xo(a,u,p,P){var j=!p;p||(p={});for(var te=-1,he=u.length;++te<he;){var xe=u[te],Me=P?P(p[xe],a[xe],xe,p,a):g;Me===g&&(Me=a[xe]),j?Sa(p,xe,Me):$s(p,xe,Me)}return p}function oa(a,u){return function(p,P){var j=dn(p)?dt:Rh,te=u?u():{};return j(p,a,Gt(P,2),te)}}function xs(a){return xn(function(u,p){var P=-1,j=p.length,te=j>1?p[j-1]:g,he=j>2?p[2]:g;for(te=a.length>3&&"function"==typeof te?(j--,te):g,he&&Pi(p[0],p[1],he)&&(te=j<3?g:te,j=1),u=Jn(u);++P<j;){var xe=p[P];xe&&a(u,xe,P,te)}return u})}function Eu(a,u){return function(p,P){if(null==p)return p;if(!ao(p))return a(p,P);for(var j=p.length,te=u?j:-1,he=Jn(p);(u?te--:++te<j)&&!1!==P(he[te],te,he););return p}}function Nd(a){return function(u,p,P){for(var j=-1,te=Jn(u),he=P(u),xe=he.length;xe--;){var Me=he[a?xe:++j];if(!1===p(te[Me],Me,te))break}return u}}function Dd(a){return function(u){var p=$a(u=tr(u))?yn(u):g,P=p?p[0]:u.charAt(0),j=p?en(p,1).join(""):u.slice(1);return P[a]()+j}}function bs(a){return function(u){return $n(th(Yf(u).replace(Ko,"")),a,"")}}function Iu(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var p=Us(a.prototype),P=a.apply(p,u);return Ar(P)?P:p}}function Ks(a){return function(u,p,P){var j=Jn(u);if(!ao(u)){var te=Gt(p,3);u=Xr(u),p=function(xe){return te(j[xe],xe,j)}}var he=a(u,p,P);return he>-1?j[te?u[he]:he]:g}}function fc(a){return aa(function(u){var p=u.length,P=p,j=_o.prototype.thru;for(a&&u.reverse();P--;){var te=u[P];if("function"!=typeof te)throw new Gr(I);if(j&&!he&&"wrapper"==Js(te))var he=new _o([],!0)}for(P=he?P:p;++P<p;){var xe=Js(te=u[P]),Me="wrapper"==xe?Ea(te):g;he=Me&&wl(Me[0])&&424==Me[1]&&!Me[4].length&&1==Me[9]?he[Js(Me[0])].apply(he,Me[3]):1==te.length&&wl(te)?he[xe]():he.thru(te)}return function(){var ot=arguments,at=ot[0];if(he&&1==ot.length&&dn(at))return he.plant(at).value();for(var ht=0,St=p?u[ht].apply(this,ot):at;++ht<p;)St=u[ht].call(this,St);return St}})}function Cs(a,u,p,P,j,te,he,xe,Me,ot){var at=u&b,ht=1&u,St=2&u,Ft=24&u,Jt=512&u,vn=St?g:Iu(a);return function Zt(){for(var Pn=arguments.length,Dn=$e(Pn),uo=Pn;uo--;)Dn[uo]=arguments[uo];if(Ft)var br=Do(Zt),lo=zl(Dn,br);if(P&&(Dn=cc(Dn,P,j,Ft)),te&&(Dn=_e(Dn,te,he,Ft)),Pn-=lo,Ft&&Pn<ot){var Dr=ti(Dn,br);return Mu(a,u,Cs,Zt.placeholder,p,Dn,Dr,xe,Me,ot-Pn)}var zo=ht?p:this,Ra=St?zo[a]:a;return Pn=Dn.length,xe?Dn=rp(Dn,xe):Jt&&Pn>1&&Dn.reverse(),at&&Me<Pn&&(Dn.length=Me),this&&this!==Be&&this instanceof Zt&&(Ra=vn||Iu(Ra)),Ra.apply(zo,Dn)}}function Bd(a,u){return function(p,P){return function Ws(a,u,p,P){return Ii(a,function(j,te,he){u(P,p(j),te,he)}),P}(p,a,u(P),{})}}function bt(a,u){return function(p,P){var j;if(p===g&&P===g)return u;if(p!==g&&(j=p),P!==g){if(j===g)return P;"string"==typeof p||"string"==typeof P?(p=no(p),P=no(P)):(p=sc(p),P=sc(P)),j=a(p,P)}return j}}function hc(a){return aa(function(u){return u=Qt(u,ui(Gt())),xn(function(p){var P=this;return a(u,function(j){return He(j,P,p)})})})}function Pu(a,u){var p=(u=u===g?" ":no(u)).length;if(p<2)return p?oc(u,a):u;var P=oc(u,Qu(a/Wa(u)));return $a(u)?en(yn(P),0,a).join(""):P.slice(0,a)}function pc(a){return function(u,p,P){return P&&"number"!=typeof P&&Pi(u,p,P)&&(p=P=g),u=da(u),p===g?(p=u,u=0):p=da(p),function ic(a,u,p,P){for(var j=-1,te=Wr(Qu((u-a)/(p||1)),0),he=$e(te);te--;)he[P?te:++j]=a,a+=p;return he}(u,p,P=P===g?u<p?1:-1:da(P),a)}}function qn(a){return function(u,p){return"string"==typeof u&&"string"==typeof p||(u=Eo(u),p=Eo(p)),a(u,p)}}function Mu(a,u,p,P,j,te,he,xe,Me,ot){var at=8&u;u|=at?32:64,4&(u&=~(at?64:32))||(u&=-4);var vn=[a,u,j,at?te:g,at?he:g,at?g:te,at?g:he,xe,Me,ot],Zt=p.apply(g,vn);return wl(a)&&Pa(Zt,vn),Zt.placeholder=P,tt(Zt,a,u)}function mc(a){var u=Pr[a];return function(p,P){if(p=Eo(p),(P=null==P?0:Ei(pn(P),292))&&js(p)){var j=(tr(p)+"e").split("e");return+((j=(tr(u(j[0]+"e"+(+j[1]+P)))+"e").split("e"))[0]+"e"+(+j[1]-P))}return u(p)}}var Hd=Xa&&1/Xi(new Xa([,-0]))[1]==pt?function(a){return new Xa(a)}:Vl;function gc(a){return function(u){var p=hi(u);return p==hn?du(u):p==et?function ms(Ee){var Ue=-1,$e=Array(Ee.size);return Ee.forEach(function(Mt){$e[++Ue]=[Mt,Mt]}),$e}(u):function Jo(Ee,Ue){return Qt(Ue,function($e){return[$e,Ee[$e]]})}(u,a(u))}}function Ro(a,u,p,P,j,te,he,xe){var Me=2&u;if(!Me&&"function"!=typeof a)throw new Gr(I);var ot=P?P.length:0;if(ot||(u&=-97,P=j=g),he=he===g?he:Wr(pn(he),0),xe=xe===g?xe:pn(xe),ot-=j?j.length:0,64&u){var at=P,ht=j;P=j=g}var St=Me?g:Ea(a),Ft=[a,u,p,P,j,at,ht,te,he,xe];if(St&&function Qd(a,u){var p=a[1],P=u[1],j=p|P;if(!(j<131||(P==b&&8==p||P==b&&256==p&&a[7].length<=u[8]||384==P&&u[7].length<=u[8]&&8==p)))return a;1&P&&(a[2]=u[2],j|=1&p?0:4);var xe=u[3];if(xe){var Me=a[3];a[3]=Me?cc(Me,xe,u[4]):xe,a[4]=Me?ti(a[3],B):u[4]}(xe=u[5])&&(a[5]=(Me=a[5])?_e(Me,xe,u[6]):xe,a[6]=Me?ti(a[5],B):u[6]),(xe=u[7])&&(a[7]=xe),P&b&&(a[8]=null==a[8]?u[8]:Ei(a[8],u[8])),null==a[9]&&(a[9]=u[9]),a[0]=u[0],a[1]=j}(Ft,St),a=Ft[0],u=Ft[1],p=Ft[2],P=Ft[3],j=Ft[4],!(xe=Ft[9]=Ft[9]===g?Me?0:a.length:Wr(Ft[9]-ot,0))&&24&u&&(u&=-25),u&&1!=u)Jt=8==u||16==u?function np(a,u,p){var P=Iu(a);return function j(){for(var te=arguments.length,he=$e(te),xe=te,Me=Do(j);xe--;)he[xe]=arguments[xe];var ot=te<3&&he[0]!==Me&&he[te-1]!==Me?[]:ti(he,Me);return(te-=ot.length)<p?Mu(a,u,Cs,j.placeholder,g,he,ot,g,g,p-te):He(this&&this!==Be&&this instanceof j?P:a,this,he)}}(a,u,xe):32!=u&&33!=u||j.length?Cs.apply(g,Ft):function Vd(a,u,p,P){var j=1&u,te=Iu(a);return function he(){for(var xe=-1,Me=arguments.length,ot=-1,at=P.length,ht=$e(at+Me),St=this&&this!==Be&&this instanceof he?te:a;++ot<at;)ht[ot]=P[ot];for(;Me--;)ht[ot++]=arguments[++xe];return He(St,j?p:this,ht)}}(a,u,p,P);else var Jt=function Oi(a,u,p){var P=1&u,j=Iu(a);return function te(){return(this&&this!==Be&&this instanceof te?j:a).apply(P?p:this,arguments)}}(a,u,p);return tt((St?Md:Pa)(Jt,Ft),a,u)}function Wn(a,u,p,P){return a===g||oo(a,fe[p])&&!be.call(P,p)?u:a}function Qs(a,u,p,P,j,te){return Ar(a)&&Ar(u)&&(te.set(u,a),ll(a,u,g,Qs,te),te.delete(u)),a}function Lt(a){return ca(a)?g:a}function No(a,u,p,P,j,te){var he=1&p,xe=a.length,Me=u.length;if(xe!=Me&&!(he&&Me>xe))return!1;var ot=te.get(a),at=te.get(u);if(ot&&at)return ot==u&&at==a;var ht=-1,St=!0,Ft=2&p?new Gs:g;for(te.set(a,u),te.set(u,a);++ht<xe;){var Jt=a[ht],vn=u[ht];if(P)var Zt=he?P(vn,Jt,ht,u,a,te):P(Jt,vn,ht,a,u,te);if(Zt!==g){if(Zt)continue;St=!1;break}if(Ft){if(!qr(u,function(Pn,Dn){if(!Zo(Ft,Dn)&&(Jt===Pn||j(Jt,Pn,p,P,te)))return Ft.push(Dn)})){St=!1;break}}else if(Jt!==vn&&!j(Jt,vn,p,P,te)){St=!1;break}}return te.delete(a),te.delete(u),St}function aa(a){return qd(ku(a,g,sp),a+"")}function Li(a){return _d(a,Xr,Ia)}function gl(a){return _d(a,Vi,_l)}var Ea=Zu?function(a){return Zu.get(a)}:Vl;function Js(a){for(var u=a.name+"",p=zs[u],P=be.call(zs,u)?p.length:0;P--;){var j=p[P],te=j.func;if(null==te||te==a)return j.name}return u}function Do(a){return(be.call(Z,"placeholder")?Z:a).placeholder}function Gt(){var a=Z.iteratee||Dl;return a=a===Dl?ec:a,arguments.length?a(arguments[0],arguments[1]):a}function vl(a,u){var p=a.__data__;return function Wd(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?p["string"==typeof u?"string":"hash"]:p.map}function vc(a){for(var u=Xr(a),p=u.length;p--;){var P=u[p],j=a[P];u[p]=[P,j,Au(j)]}return u}function Hr(a,u){var p=function Gl(Ee,Ue){return null==Ee?g:Ee[Ue]}(a,u);return xd(p)?p:g}var Ia=Ju?function(a){return null==a?[]:(a=Jn(a),zt(Ju(a),function(u){return Ti.call(a,u)}))}:Qc,_l=Ju?function(a){for(var u=[];a;)Ir(u,Ia(a)),a=yr(a);return u}:Qc,hi=ki;function yl(a,u,p){for(var P=-1,j=(u=ia(u,a)).length,te=!1;++P<j;){var he=io(u[P]);if(!(te=null!=a&&p(a,he)))break;a=a[he]}return te||++P!=j?te:!!(j=null==a?0:a.length)&&Ml(j)&&bo(he,j)&&(dn(a)||Vo(a))}function bl(a){return"function"!=typeof a.constructor||Ss(a)?{}:Us(yr(a))}function _c(a){return dn(a)||Vo(a)||!!(Ya&&a&&a[Ya])}function bo(a,u){var p=typeof a;return!!(u=null==u?Kt:u)&&("number"==p||"symbol"!=p&&Os.test(a))&&a>-1&&a%1==0&&a<u}function Pi(a,u,p){if(!Ar(p))return!1;var P=typeof u;return!!("number"==P?ao(p)&&bo(u,p.length):"string"==P&&u in p)&&oo(p[u],a)}function Cl(a,u){if(dn(a))return!1;var p=typeof a;return!("number"!=p&&"symbol"!=p&&"boolean"!=p&&null!=a&&!so(a))||ho.test(a)||!ai.test(a)||null!=u&&a in Jn(u)}function wl(a){var u=Js(a),p=Z[u];if("function"!=typeof p||!(u in Sn.prototype))return!1;if(a===p)return!0;var P=Ea(p);return!!P&&a===P[0]}(Xl&&hi(new Xl(new ArrayBuffer(1)))!=gr||gu&&hi(new gu)!=hn||Kl&&hi(Kl.resolve())!=re||Xa&&hi(new Xa)!=et||vs&&hi(new vs)!=wn)&&(hi=function(a){var u=ki(a),p=u==U?a.constructor:g,P=p?sa(p):"";if(P)switch(P){case mh:return gr;case gh:return hn;case vh:return re;case _h:return et;case yh:return wn}return u});var Xd=Ce?ts:jo;function Ss(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||fe)}function Au(a){return a==a&&!Ar(a)}function yc(a,u){return function(p){return null!=p&&p[a]===u&&(u!==g||a in Jn(p))}}function ku(a,u,p){return u=Wr(u===g?a.length-1:u,0),function(){for(var P=arguments,j=-1,te=Wr(P.length-u,0),he=$e(te);++j<te;)he[j]=P[u+j];j=-1;for(var xe=$e(u+1);++j<u;)xe[j]=P[j];return xe[u]=p(he),He(a,this,xe)}}function Sl(a,u){return u.length<2?a:ys(a,yo(u,0,-1))}function rp(a,u){for(var p=a.length,P=Ei(u.length,p),j=ri(a);P--;){var te=u[P];a[P]=bo(te,p)?j[te]:g}return a}function Zs(a,u){if(("constructor"!==u||"function"!=typeof a[u])&&"__proto__"!=u)return a[u]}var Pa=ro(Md),Ou=Wl||function(a,u){return Be.setTimeout(a,u)},qd=ro(rr);function tt(a,u,p){var P=u+"";return qd(a,function $d(a,u){var p=u.length;if(!p)return a;var P=p-1;return u[P]=(p>1?"& ":"")+u[P],u=u.join(p>2?", ":" "),a.replace(rs,"{\n/* [wrapped with "+u+"] */\n")}(P,function Lu(a,u){return De(Xn,function(p){var P="_."+p[0];u&p[1]&&!kt(a,P)&&a.push(P)}),a.sort()}(function Ud(a){var u=a.match(is);return u?u[1].split(Ui):[]}(P),p)))}function ro(a){var u=0,p=0;return function(){var P=fh(),j=16-(P-p);if(p=P,j>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(g,arguments)}}function Qi(a,u){var p=-1,P=a.length,j=P-1;for(u=u===g?P:u;++p<u;){var te=cl(p,j),he=a[te];a[te]=a[p],a[p]=he}return a.length=u,a}var ef=function Kd(a){var u=Bu(a,function(P){return 500===p.size&&p.clear(),P}),p=u.cache;return u}(function(a){var u=[];return 46===a.charCodeAt(0)&&u.push(""),a.replace(_i,function(p,P,j,te){u.push(j?te.replace(as,"$1"):P||p)}),u});function io(a){if("string"==typeof a||so(a))return a;var u=a+"";return"0"==u&&1/a==-pt?"-0":u}function sa(a){if(null!=a){try{return qe.call(a)}catch(u){}try{return a+""}catch(u){}}return""}function xc(a){if(a instanceof Sn)return a.clone();var u=new _o(a.__wrapped__,a.__chain__);return u.__actions__=ri(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}var op=xn(function(a,u){return Rr(a)?xu(a,ni(u,1,Rr,!0)):[]}),Fu=xn(function(a,u){var p=wo(u);return Rr(p)&&(p=g),Rr(a)?xu(a,ni(u,1,Rr,!0),Gt(p,2)):[]}),ap=xn(function(a,u){var p=wo(u);return Rr(p)&&(p=g),Rr(a)?xu(a,ni(u,1,Rr,!0),g,p):[]});function rf(a,u,p){var P=null==a?0:a.length;if(!P)return-1;var j=null==p?0:pn(p);return j<0&&(j=Wr(P+j,0)),ei(a,Gt(u,3),j)}function of(a,u,p){var P=null==a?0:a.length;if(!P)return-1;var j=P-1;return p!==g&&(j=pn(p),j=p<0?Wr(P+j,0):Ei(j,P-1)),ei(a,Gt(u,3),j,!0)}function sp(a){return null!=a&&a.length?ni(a,1):[]}function cp(a){return a&&a.length?a[0]:g}var ig=xn(function(a){var u=Qt(a,uc);return u.length&&u[0]===a[0]?ul(u):[]}),qs=xn(function(a){var u=wo(a),p=Qt(a,uc);return u===wo(p)?u=g:p.pop(),p.length&&p[0]===a[0]?ul(p,Gt(u,2)):[]}),fp=xn(function(a){var u=wo(a),p=Qt(a,uc);return(u="function"==typeof u?u:g)&&p.pop(),p.length&&p[0]===a[0]?ul(p,g,u):[]});function wo(a){var u=null==a?0:a.length;return u?a[u-1]:g}var ag=xn(hp);function hp(a,u){return a&&a.length&&u&&u.length?rc(a,u):a}var lg=aa(function(a,u){var p=null==a?0:a.length,P=Jl(a,u);return Id(a,Qt(u,function(j){return bo(j,p)?+j:j}).sort(lc)),P});function Ji(a){return null==a?a:ph.call(a)}var mp=xn(function(a){return ci(ni(a,1,Rr,!0))}),uf=xn(function(a){var u=wo(a);return Rr(u)&&(u=g),ci(ni(a,1,Rr,!0),Gt(u,2))}),gp=xn(function(a){var u=wo(a);return u="function"==typeof u?u:g,ci(ni(a,1,Rr,!0),g,u)});function Fr(a){if(!a||!a.length)return[];var u=0;return a=zt(a,function(p){if(Rr(p))return u=Wr(p.length,u),!0}),Vn(u,function(p){return Qt(a,wi(p))})}function Ts(a,u){if(!a||!a.length)return[];var p=Fr(a);return null==u?p:Qt(p,function(P){return He(u,g,P)})}var lf=xn(function(a,u){return Rr(a)?xu(a,u):[]}),hg=xn(function(a){return Xs(zt(a,Rr))}),To=xn(function(a){var u=wo(a);return Rr(u)&&(u=g),Xs(zt(a,Rr),Gt(u,2))}),vp=xn(function(a){var u=wo(a);return u="function"==typeof u?u:g,Xs(zt(a,Rr),g,u)}),_p=xn(Fr),Mr=xn(function(a){var u=a.length,p=u>1?a[u-1]:g;return p="function"==typeof p?(a.pop(),p):g,Ts(a,p)});function Ni(a){var u=Z(a);return u.__chain__=!0,u}function Aa(a,u){return u(a)}var Mi=aa(function(a){var u=a.length,p=u?a[0]:0,P=this.__wrapped__,j=function(te){return Jl(te,a)};return!(u>1||this.__actions__.length)&&P instanceof Sn&&bo(p)?((P=P.slice(p,+p+(u?1:0))).__actions__.push({func:Aa,args:[j],thisArg:g}),new _o(P,this.__chain__).thru(function(te){return u&&!te.length&&te.push(g),te})):this.thru(j)}),Cp=oa(function(a,u,p){be.call(a,p)?++a[p]:Sa(a,p,1)}),pf=Ks(rf),mf=Ks(of);function Ic(a,u){return(dn(a)?De:Qa)(a,Gt(u,3))}function Pc(a,u){return(dn(a)?Je:gd)(a,Gt(u,3))}var gf=oa(function(a,u,p){be.call(a,p)?a[p].push(u):Sa(a,p,[u])}),Il=xn(function(a,u,p){var P=-1,j="function"==typeof u,te=ao(a)?$e(a.length):[];return Qa(a,function(he){te[++P]=j?He(u,he,p):bu(he,u,p)}),te}),_f=oa(function(a,u,p){Sa(a,p,u)});function Oa(a,u){return(dn(a)?Qt:bd)(a,Gt(u,3))}var Mc=oa(function(a,u,p){a[p?0:1].push(u)},function(){return[[],[]]}),Ac=xn(function(a,u){if(null==a)return[];var p=u.length;return p>1&&Pi(a,u[0],u[1])?u=[]:p>2&&Pi(u[0],u[1],u[2])&&(u=[u[0]]),Td(a,ni(u,1),[])}),Pl=nd||function(){return Be.Date.now()};function wf(a,u,p){return u=p?g:u,Ro(a,b,g,g,g,g,u=a&&null==u?a.length:u)}function Sf(a,u){var p;if("function"!=typeof u)throw new Gr(I);return a=pn(a),function(){return--a>0&&(p=u.apply(this,arguments)),a<=1&&(u=g),p}}var kc=xn(function(a,u,p){var P=1;if(p.length){var j=ti(p,Do(kc));P|=32}return Ro(a,P,u,p,j)}),Tf=xn(function(a,u,p){var P=3;if(p.length){var j=ti(p,Do(Tf));P|=32}return Ro(u,P,a,p,j)});function Pf(a,u,p){var P,j,te,he,xe,Me,ot=0,at=!1,ht=!1,St=!0;if("function"!=typeof a)throw new Gr(I);function Ft(Dr){var zo=P,Ra=j;return P=j=g,ot=Dr,he=a.apply(Ra,zo)}function Jt(Dr){return ot=Dr,xe=Ou(Pn,u),at?Ft(Dr):he}function Zt(Dr){var zo=Dr-Me;return Me===g||zo>=u||zo<0||ht&&Dr-ot>=te}function Pn(){var Dr=Pl();if(Zt(Dr))return Dn(Dr);xe=Ou(Pn,function vn(Dr){var uh=u-(Dr-Me);return ht?Ei(uh,te-(Dr-ot)):uh}(Dr))}function Dn(Dr){return xe=g,St&&P?Ft(Dr):(P=j=g,he)}function lo(){var Dr=Pl(),zo=Zt(Dr);if(P=arguments,j=this,Me=Dr,zo){if(xe===g)return Jt(Me);if(ht)return Su(xe),xe=Ou(Pn,u),Ft(Me)}return xe===g&&(xe=Ou(Pn,u)),he}return u=Eo(u)||0,Ar(p)&&(at=!!p.leading,te=(ht="maxWait"in p)?Wr(Eo(p.maxWait)||0,u):te,St="trailing"in p?!!p.trailing:St),lo.cancel=function uo(){xe!==g&&Su(xe),ot=0,P=Me=j=xe=g},lo.flush=function br(){return xe===g?he:Dn(Pl())},lo}var es=xn(function(a,u){return md(a,1,u)}),Mf=xn(function(a,u,p){return md(a,Eo(u)||0,p)});function Bu(a,u){if("function"!=typeof a||null!=u&&"function"!=typeof u)throw new Gr(I);var p=function(){var P=arguments,j=u?u.apply(this,P):P[0],te=p.cache;if(te.has(j))return te.get(j);var he=a.apply(this,P);return p.cache=te.set(j,he)||te,he};return p.cache=new(Bu.Cache||na),p}function Vu(a){if("function"!=typeof a)throw new Gr(I);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}Bu.Cache=na;var Ep=kd(function(a,u){var p=(u=1==u.length&&dn(u[0])?Qt(u[0],ui(Gt())):Qt(ni(u,1),ui(Gt()))).length;return xn(function(P){for(var j=-1,te=Ei(P.length,p);++j<te;)P[j]=u[j].call(this,P[j]);return He(a,this,P)})}),Oc=xn(function(a,u){var p=ti(u,Do(Oc));return Ro(a,32,g,u,p)}),kf=xn(function(a,u){var p=ti(u,Do(kf));return Ro(a,64,g,u,p)}),Ip=aa(function(a,u){return Ro(a,256,g,g,g,u)});function oo(a,u){return a===u||a!=a&&u!=u}var Dp=qn(Zl),La=qn(function(a,u){return a>=u}),Vo=yd(function(){return arguments}())?yd:function(a){return Nr(a)&&be.call(a,"callee")&&!Ti.call(a,"callee")},dn=$e.isArray,pg=N?ui(N):function jh(a){return Nr(a)&&ki(a)==gn};function ao(a){return null!=a&&Ml(a.length)&&!ts(a)}function Rr(a){return Nr(a)&&ao(a)}var Es=ch||jo,gg=H?ui(H):function zh(a){return Nr(a)&&ki(a)==At};function Lf(a){if(!Nr(a))return!1;var u=ki(a);return u==Bn||"[object DOMException]"==u||"string"==typeof a.message&&"string"==typeof a.name&&!ca(a)}function ts(a){if(!Ar(a))return!1;var u=ki(a);return u==cr||u==co||"[object AsyncFunction]"==u||"[object Proxy]"==u}function Ff(a){return"number"==typeof a&&a==pn(a)}function Ml(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Kt}function Ar(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function Nr(a){return null!=a&&"object"==typeof a}var Rf=X?ui(X):function Gh(a){return Nr(a)&&hi(a)==hn};function Fa(a){return"number"==typeof a||Nr(a)&&ki(a)==tn}function ca(a){if(!Nr(a)||ki(a)!=U)return!1;var u=yr(a);if(null===u)return!0;var p=be.call(u,"constructor")&&u.constructor;return"function"==typeof p&&p instanceof p&&qe.call(p)==wt}var In=me?ui(me):function $h(a){return Nr(a)&&ki(a)==Qe},Hu=de?ui(de):function Wh(a){return Nr(a)&&hi(a)==et};function Al(a){return"string"==typeof a||!dn(a)&&Nr(a)&&ki(a)==Ct}function so(a){return"symbol"==typeof a||Nr(a)&&ki(a)==Nt}var nu=Ae?ui(Ae):function Yh(a){return Nr(a)&&Ml(a.length)&&!!Gn[ki(a)]},Bi=qn(nc),Ol=qn(function(a,u){return a<=u});function ju(a){if(!a)return[];if(ao(a))return Al(a)?yn(a):ri(a);if(vo&&a[vo])return function ps(Ee){for(var Ue,$e=[];!(Ue=Ee.next()).done;)$e.push(Ue.value);return $e}(a[vo]());var u=hi(a);return(u==hn?du:u==et?Xi:Ms)(a)}function da(a){return a?(a=Eo(a))===pt||a===-pt?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function pn(a){var u=da(a),p=u%1;return u==u?p?u-p:u:0}function Df(a){return a?_s(pn(a),0,Zn):0}function Eo(a){if("number"==typeof a)return a;if(so(a))return NaN;if(Ar(a)){var u="function"==typeof a.valueOf?a.valueOf():a;a=Ar(u)?u+"":u}if("string"!=typeof a)return 0===a?a:+a;a=Ds(a);var p=ss.test(a);return p||pa.test(a)?ge(a.slice(2),p?2:8):ks.test(a)?NaN:+a}function Nc(a){return xo(a,Vi(a))}function tr(a){return null==a?"":no(a)}var Vp=xs(function(a,u){if(Ss(u)||ao(u))xo(u,Xr(u),a);else for(var p in u)be.call(u,p)&&$s(a,p,u[p])}),Fl=xs(function(a,u){xo(u,Vi(u),a)}),ru=xs(function(a,u,p,P){xo(u,Vi(u),a,P)}),Bf=xs(function(a,u,p,P){xo(u,Xr(u),a,P)}),Dc=aa(Jl),Vf=xn(function(a,u){a=Jn(a);var p=-1,P=u.length,j=P>2?u[2]:g;for(j&&Pi(u[0],u[1],j)&&(P=1);++p<P;)for(var te=u[p],he=Vi(te),xe=-1,Me=he.length;++xe<Me;){var ot=he[xe],at=a[ot];(at===g||oo(at,fe[ot])&&!be.call(a,ot))&&(a[ot]=te[ot])}return a}),Hf=xn(function(a){return a.push(g,Qs),He(Rl,g,a)});function Vc(a,u,p){var P=null==a?g:ys(a,u);return P===g?p:P}function iu(a,u){return null!=a&&yl(a,u,Hh)}var Uu=Bd(function(a,u,p){null!=u&&"function"!=typeof u.toString&&(u=yt.call(u)),a[u]=p},$c(oi)),Hc=Bd(function(a,u,p){null!=u&&"function"!=typeof u.toString&&(u=yt.call(u)),be.call(a,u)?a[u].push(p):a[u]=[p]},Gt),Gp=xn(bu);function Xr(a){return ao(a)?dd(a):tc(a)}function Vi(a){return ao(a)?dd(a,!0):function Xh(a){if(!Ar(a))return function Jd(a){var u=[];if(null!=a)for(var p in Jn(a))u.push(p);return u}(a);var u=Ss(a),p=[];for(var P in a)"constructor"==P&&(u||!be.call(a,P))||p.push(P);return p}(a)}var Yp=xs(function(a,u,p){ll(a,u,p)}),Rl=xs(function(a,u,p,P){ll(a,u,p,P)}),Xp=aa(function(a,u){var p={};if(null==a)return p;var P=!1;u=Qt(u,function(te){return te=ia(te,a),P||(P=te.length>1),te}),xo(a,gl(a),p),P&&(p=Yr(p,7,Lt));for(var j=u.length;j--;)Ta(p,u[j]);return p}),Qp=aa(function(a,u){return null==a?{}:function Qh(a,u){return Ed(a,u,function(p,P){return iu(a,P)})}(a,u)});function jc(a,u){if(null==a)return{};var p=Qt(gl(a),function(P){return[P]});return u=Gt(u),Ed(a,p,function(P,j){return u(P,j[0])})}var Gu=gc(Xr),$u=gc(Vi);function Ms(a){return null==a?[]:lu(a,Xr(a))}var om=bs(function(a,u,p){return u=u.toLowerCase(),a+(p?Wf(u):u)});function Wf(a){return Nl(tr(a).toLowerCase())}function Yf(a){return(a=tr(a))&&a.replace(Ls,Ul).replace(Qo,"")}var am=bs(function(a,u,p){return a+(p?"-":"")+u.toLowerCase()}),sm=bs(function(a,u,p){return a+(p?" ":"")+u.toLowerCase()}),um=Dd("toLowerCase"),qf=bs(function(a,u,p){return a+(p?"_":"")+u.toLowerCase()}),dm=bs(function(a,u,p){return a+(p?" ":"")+Nl(u)}),gm=bs(function(a,u,p){return a+(p?" ":"")+u.toUpperCase()}),Nl=Dd("toUpperCase");function th(a,u,p){return a=tr(a),(u=p?g:u)===g?function $l(Ee){return Gi.test(Ee)}(a)?function hu(Ee){return Ee.match(za)||[]}(a):function fs(Ee){return Ee.match(os)||[]}(a):a.match(u)||[]}var nh=xn(function(a,u){try{return He(a,g,u)}catch(p){return Lf(p)?p:new qt(p)}}),vm=aa(function(a,u){return De(u,function(p){p=io(p),Sa(a,p,kc(a[p],a))}),a});function $c(a){return function(){return a}}var xm=fc(),bm=fc(!0);function oi(a){return a}function Dl(a){return ec("function"==typeof a?a:Yr(a,1))}var Bl=xn(function(a,u){return function(p){return bu(p,a,u)}}),Wc=xn(function(a,u){return function(p){return bu(a,p,u)}});function Yc(a,u,p){var P=Xr(u),j=al(u,P);null==p&&(!Ar(u)||!j.length&&P.length)&&(p=u,u=a,a=this,j=al(u,Xr(u)));var te=!(Ar(p)&&"chain"in p&&!p.chain),he=ts(a);return De(j,function(xe){var Me=u[xe];a[xe]=Me,he&&(a.prototype[xe]=function(){var ot=this.__chain__;if(te||ot){var at=a(this.__wrapped__),ht=at.__actions__=ri(this.__actions__);return ht.push({func:Me,args:arguments,thisArg:a}),at.__chain__=ot,at}return Me.apply(a,Ir([this.value()],arguments))})}),a}function Vl(){}var Tm=hc(Qt),Xc=hc(Ot),Kc=hc(qr);function oh(a){return Cl(a)?wi(io(a)):function Jh(a){return function(u){return ys(u,a)}}(a)}var Im=pc(),Pm=pc(!0);function Qc(){return[]}function jo(){return!1}var Rm=bt(function(a,u){return a+u},0),Nm=mc("ceil"),Dm=bt(function(a,u){return a/u},1),Bm=mc("floor"),ah=bt(function(a,u){return a*u},1),Gm=mc("round"),Hl=bt(function(a,u){return a-u},0);return Z.after=function Sp(a,u){if("function"!=typeof u)throw new Gr(I);return a=pn(a),function(){if(--a<1)return u.apply(this,arguments)}},Z.ary=wf,Z.assign=Vp,Z.assignIn=Fl,Z.assignInWith=ru,Z.assignWith=Bf,Z.at=Dc,Z.before=Sf,Z.bind=kc,Z.bindAll=vm,Z.bindKey=Tf,Z.castArray=function Lp(){if(!arguments.length)return[];var a=arguments[0];return dn(a)?a:[a]},Z.chain=Ni,Z.chunk=function tf(a,u,p){u=(p?Pi(a,u,p):u===g)?1:Wr(pn(u),0);var P=null==a?0:a.length;if(!P||u<1)return[];for(var j=0,te=0,he=$e(Qu(P/u));j<P;)he[te++]=yo(a,j,j+=u);return he},Z.compact=function nf(a){for(var u=-1,p=null==a?0:a.length,P=0,j=[];++u<p;){var te=a[u];te&&(j[P++]=te)}return j},Z.concat=function ip(){var a=arguments.length;if(!a)return[];for(var u=$e(a-1),p=arguments[0],P=a;P--;)u[P-1]=arguments[P];return Ir(dn(p)?ri(p):[p],ni(u,1))},Z.cond=function rh(a){var u=null==a?0:a.length,p=Gt();return a=u?Qt(a,function(P){if("function"!=typeof P[1])throw new Gr(I);return[p(P[0]),P[1]]}):[],xn(function(P){for(var j=-1;++j<u;){var te=a[j];if(He(te[0],this,P))return He(te[1],this,P)}})},Z.conforms=function _m(a){return function Dh(a){var u=Xr(a);return function(p){return pd(p,a,u)}}(Yr(a,1))},Z.constant=$c,Z.countBy=Cp,Z.create=function Ps(a,u){var p=Us(a);return null==u?p:hd(p,u)},Z.curry=function Ef(a,u,p){var P=Ro(a,8,g,g,g,g,g,u=p?g:u);return P.placeholder=Ef.placeholder,P},Z.curryRight=function If(a,u,p){var P=Ro(a,16,g,g,g,g,g,u=p?g:u);return P.placeholder=If.placeholder,P},Z.debounce=Pf,Z.defaults=Vf,Z.defaultsDeep=Hf,Z.defer=es,Z.delay=Mf,Z.difference=op,Z.differenceBy=Fu,Z.differenceWith=ap,Z.drop=function Fi(a,u,p){var P=null==a?0:a.length;return P?yo(a,(u=p||u===g?1:pn(u))<0?0:u,P):[]},Z.dropRight=function bc(a,u,p){var P=null==a?0:a.length;return P?yo(a,0,(u=P-(u=p||u===g?1:pn(u)))<0?0:u):[]},Z.dropRightWhile=function Cc(a,u){return a&&a.length?di(a,Gt(u,3),!0,!0):[]},Z.dropWhile=function tg(a,u){return a&&a.length?di(a,Gt(u,3),!0):[]},Z.fill=function Co(a,u,p,P){var j=null==a?0:a.length;return j?(p&&"number"!=typeof p&&Pi(a,u,p)&&(p=0,P=j),function Vh(a,u,p,P){var j=a.length;for((p=pn(p))<0&&(p=-p>j?0:j+p),(P=P===g||P>j?j:pn(P))<0&&(P+=j),P=p>P?0:Df(P);p<P;)a[p++]=u;return a}(a,u,p,P)):[]},Z.filter=function Tc(a,u){return(dn(a)?zt:il)(a,Gt(u,3))},Z.flatMap=function Ec(a,u){return ni(Oa(a,u),1)},Z.flatMapDeep=function qa(a,u){return ni(Oa(a,u),pt)},Z.flatMapDepth=function El(a,u,p){return p=p===g?1:pn(p),ni(Oa(a,u),p)},Z.flatten=sp,Z.flattenDeep=function up(a){return null!=a&&a.length?ni(a,pt):[]},Z.flattenDepth=function ng(a,u){return null!=a&&a.length?ni(a,u=u===g?1:pn(u)):[]},Z.flip=function Af(a){return Ro(a,512)},Z.flow=xm,Z.flowRight=bm,Z.fromPairs=function lp(a){for(var u=-1,p=null==a?0:a.length,P={};++u<p;){var j=a[u];P[j[0]]=j[1]}return P},Z.functions=function Up(a){return null==a?[]:al(a,Xr(a))},Z.functionsIn=function Uf(a){return null==a?[]:al(a,Vi(a))},Z.groupBy=gf,Z.initial=function dp(a){return null!=a&&a.length?yo(a,0,-1):[]},Z.intersection=ig,Z.intersectionBy=qs,Z.intersectionWith=fp,Z.invert=Uu,Z.invertBy=Hc,Z.invokeMap=Il,Z.iteratee=Dl,Z.keyBy=_f,Z.keys=Xr,Z.keysIn=Vi,Z.map=Oa,Z.mapKeys=function $p(a,u){var p={};return u=Gt(u,3),Ii(a,function(P,j,te){Sa(p,u(P,j,te),P)}),p},Z.mapValues=function Wp(a,u){var p={};return u=Gt(u,3),Ii(a,function(P,j,te){Sa(p,j,u(P,j,te))}),p},Z.matches=function Cm(a){return Cd(Yr(a,1))},Z.matchesProperty=function ih(a,u){return wd(a,Yr(u,1))},Z.memoize=Bu,Z.merge=Yp,Z.mergeWith=Rl,Z.method=Bl,Z.methodOf=Wc,Z.mixin=Yc,Z.negate=Vu,Z.nthArg=function Sm(a){return a=pn(a),xn(function(u){return Sd(u,a)})},Z.omit=Xp,Z.omitBy=function Kp(a,u){return jc(a,Vu(Gt(u)))},Z.once=function Tp(a){return Sf(2,a)},Z.orderBy=function Nu(a,u,p,P){return null==a?[]:(dn(u)||(u=null==u?[]:[u]),dn(p=P?g:p)||(p=null==p?[]:[p]),Td(a,u,p))},Z.over=Tm,Z.overArgs=Ep,Z.overEvery=Xc,Z.overSome=Kc,Z.partial=Oc,Z.partialRight=kf,Z.partition=Mc,Z.pick=Qp,Z.pickBy=jc,Z.property=oh,Z.propertyOf=function Em(a){return function(u){return null==a?g:ys(a,u)}},Z.pull=ag,Z.pullAll=hp,Z.pullAllBy=function sg(a,u,p){return a&&a.length&&u&&u.length?rc(a,u,Gt(p,2)):a},Z.pullAllWith=function ug(a,u,p){return a&&a.length&&u&&u.length?rc(a,u,g,p):a},Z.pullAt=lg,Z.range=Im,Z.rangeRight=Pm,Z.rearg=Ip,Z.reject=function xf(a,u){return(dn(a)?zt:il)(a,Vu(Gt(u,3)))},Z.remove=function Xt(a,u){var p=[];if(!a||!a.length)return p;var P=-1,j=[],te=a.length;for(u=Gt(u,3);++P<te;){var he=a[P];u(he,P,a)&&(p.push(he),j.push(P))}return Id(a,j),p},Z.rest=function Pp(a,u){if("function"!=typeof a)throw new Gr(I);return xn(a,u=u===g?u:pn(u))},Z.reverse=Ji,Z.sampleSize=function eu(a,u,p){return u=(p?Pi(a,u,p):u===g)?1:pn(u),(dn(a)?Lh:Pd)(a,u)},Z.set=function Gf(a,u,p){return null==a?a:Ys(a,u,p)},Z.setWith=function Zp(a,u,p,P){return P="function"==typeof P?P:g,null==a?a:Ys(a,u,p,P)},Z.shuffle=function bf(a){return(dn(a)?Fh:qh)(a)},Z.slice=function wc(a,u,p){var P=null==a?0:a.length;return P?(p&&"number"!=typeof p&&Pi(a,u,p)?(u=0,p=P):(u=null==u?0:pn(u),p=p===g?P:pn(p)),yo(a,u,p)):[]},Z.sortBy=Ac,Z.sortedUniq=function Ru(a){return a&&a.length?Ad(a):[]},Z.sortedUniqBy=function er(a,u){return a&&a.length?Ad(a,Gt(u,2)):[]},Z.split=function cm(a,u,p){return p&&"number"!=typeof p&&Pi(a,u,p)&&(u=p=g),(p=p===g?Zn:p>>>0)?(a=tr(a))&&("string"==typeof u||null!=u&&!In(u))&&!(u=no(u))&&$a(a)?en(yn(a),0,p):a.split(u,p):[]},Z.spread=function Mp(a,u){if("function"!=typeof a)throw new Gr(I);return u=null==u?0:Wr(pn(u),0),xn(function(p){var P=p[u],j=en(p,0,u);return P&&Ir(j,P),He(a,this,j)})},Z.tail=function ii(a){var u=null==a?0:a.length;return u?yo(a,1,u):[]},Z.take=function En(a,u,p){return a&&a.length?yo(a,0,(u=p||u===g?1:pn(u))<0?0:u):[]},Z.takeRight=function cg(a,u,p){var P=null==a?0:a.length;return P?yo(a,(u=P-(u=p||u===g?1:pn(u)))<0?0:u,P):[]},Z.takeRightWhile=function pp(a,u){return a&&a.length?di(a,Gt(u,3),!1,!0):[]},Z.takeWhile=function dg(a,u){return a&&a.length?di(a,Gt(u,3)):[]},Z.tap=function mi(a,u){return u(a),a},Z.throttle=function Ap(a,u,p){var P=!0,j=!0;if("function"!=typeof a)throw new Gr(I);return Ar(p)&&(P="leading"in p?!!p.leading:P,j="trailing"in p?!!p.trailing:j),Pf(a,u,{leading:P,maxWait:u,trailing:j})},Z.thru=Aa,Z.toArray=ju,Z.toPairs=Gu,Z.toPairsIn=$u,Z.toPath=function Lm(a){return dn(a)?Qt(a,io):so(a)?[a]:ri(ef(tr(a)))},Z.toPlainObject=Nc,Z.transform=function zc(a,u,p){var P=dn(a),j=P||Es(a)||nu(a);if(u=Gt(u,4),null==p){var te=a&&a.constructor;p=j?P?new te:[]:Ar(a)&&ts(te)?Us(yr(a)):{}}return(j?De:Ii)(a,function(he,xe,Me){return u(p,he,xe,Me)}),p},Z.unary=function kp(a){return wf(a,1)},Z.union=mp,Z.unionBy=uf,Z.unionWith=gp,Z.uniq=function fg(a){return a&&a.length?ci(a):[]},Z.uniqBy=function Sc(a,u){return a&&a.length?ci(a,Gt(u,2)):[]},Z.uniqWith=function Ma(a,u){return u="function"==typeof u?u:g,a&&a.length?ci(a,g,u):[]},Z.unset=function qp(a,u){return null==a||Ta(a,u)},Z.unzip=Fr,Z.unzipWith=Ts,Z.update=function em(a,u,p){return null==a?a:wu(a,u,pl(p))},Z.updateWith=function tm(a,u,p,P){return P="function"==typeof P?P:g,null==a?a:wu(a,u,pl(p),P)},Z.values=Ms,Z.valuesIn=function nm(a){return null==a?[]:lu(a,Vi(a))},Z.without=lf,Z.words=th,Z.wrap=function Op(a,u){return Oc(pl(u),a)},Z.xor=hg,Z.xorBy=To,Z.xorWith=vp,Z.zip=_p,Z.zipObject=function pi(a,u){return hl(a||[],u||[],$s)},Z.zipObjectDeep=function yp(a,u){return hl(a||[],u||[],Ys)},Z.zipWith=Mr,Z.entries=Gu,Z.entriesIn=$u,Z.extend=Fl,Z.extendWith=ru,Yc(Z,Z),Z.add=Rm,Z.attempt=nh,Z.camelCase=om,Z.capitalize=Wf,Z.ceil=Nm,Z.clamp=function $f(a,u,p){return p===g&&(p=u,u=g),p!==g&&(p=(p=Eo(p))==p?p:0),u!==g&&(u=(u=Eo(u))==u?u:0),_s(Eo(a),u,p)},Z.clone=function Of(a){return Yr(a,4)},Z.cloneDeep=function Rp(a){return Yr(a,5)},Z.cloneDeepWith=function Di(a,u){return Yr(a,5,u="function"==typeof u?u:g)},Z.cloneWith=function Fp(a,u){return Yr(a,4,u="function"==typeof u?u:g)},Z.conformsTo=function Np(a,u){return null==u||pd(a,u,Xr(u))},Z.deburr=Yf,Z.defaultTo=function ym(a,u){return null==a||a!=a?u:a},Z.divide=Dm,Z.endsWith=function Io(a,u,p){a=tr(a),u=no(u);var P=a.length,j=p=p===g?P:_s(pn(p),0,P);return(p-=u.length)>=0&&a.slice(p,j)==u},Z.eq=oo,Z.escape=function Hi(a){return(a=tr(a))&&Xe.test(a)?a.replace(fo,qo):a},Z.escapeRegExp=function Uc(a){return(a=tr(a))&&ns.test(a)?a.replace(ur,"\\$&"):a},Z.every=function wp(a,u,p){var P=dn(a)?Ot:Bh;return p&&Pi(a,u,p)&&(u=g),P(a,Gt(u,3))},Z.find=pf,Z.findIndex=rf,Z.findKey=function jf(a,u){return Ga(a,Gt(u,3),Ii)},Z.findLast=mf,Z.findLastIndex=of,Z.findLastKey=function Hp(a,u){return Ga(a,Gt(u,3),ol)},Z.floor=Bm,Z.forEach=Ic,Z.forEachRight=Pc,Z.forIn=function Bc(a,u){return null==a?a:Ja(a,Gt(u,3),Vi)},Z.forInRight=function jp(a,u){return null==a?a:vd(a,Gt(u,3),Vi)},Z.forOwn=function zf(a,u){return a&&Ii(a,Gt(u,3))},Z.forOwnRight=function zp(a,u){return a&&ol(a,Gt(u,3))},Z.get=Vc,Z.gt=Dp,Z.gte=La,Z.has=function zu(a,u){return null!=a&&yl(a,u,sl)},Z.hasIn=iu,Z.head=cp,Z.identity=oi,Z.includes=function vf(a,u,p,P){a=ao(a)?a:Ms(a),p=p&&!P?pn(p):0;var j=a.length;return p<0&&(p=Wr(j+p,0)),Al(a)?p<=j&&a.indexOf(u,p)>-1:!!j&&$i(a,u,p)>-1},Z.indexOf=function rg(a,u,p){var P=null==a?0:a.length;if(!P)return-1;var j=null==p?0:pn(p);return j<0&&(j=Wr(P+j,0)),$i(a,u,j)},Z.inRange=function rm(a,u,p){return u=da(u),p===g?(p=u,u=0):p=da(p),function li(a,u,p){return a>=Ei(u,p)&&a<Wr(u,p)}(a=Eo(a),u,p)},Z.invoke=Gp,Z.isArguments=Vo,Z.isArray=dn,Z.isArrayBuffer=pg,Z.isArrayLike=ao,Z.isArrayLikeObject=Rr,Z.isBoolean=function mg(a){return!0===a||!1===a||Nr(a)&&ki(a)==xt},Z.isBuffer=Es,Z.isDate=gg,Z.isElement=function vg(a){return Nr(a)&&1===a.nodeType&&!ca(a)},Z.isEmpty=function _g(a){if(null==a)return!0;if(ao(a)&&(dn(a)||"string"==typeof a||"function"==typeof a.splice||Es(a)||nu(a)||Vo(a)))return!a.length;var u=hi(a);if(u==hn||u==et)return!a.size;if(Ss(a))return!tc(a).length;for(var p in a)if(be.call(a,p))return!1;return!0},Z.isEqual=function yg(a,u){return Cu(a,u)},Z.isEqualWith=function xg(a,u,p){var P=(p="function"==typeof p?p:g)?p(a,u):g;return P===g?Cu(a,u,g,p):!!P},Z.isError=Lf,Z.isFinite=function Lc(a){return"number"==typeof a&&js(a)},Z.isFunction=ts,Z.isInteger=Ff,Z.isLength=Ml,Z.isMap=Rf,Z.isMatch=function bg(a,u){return a===u||ql(a,u,vc(u))},Z.isMatchWith=function Cg(a,u,p){return p="function"==typeof p?p:g,ql(a,u,vc(u),p)},Z.isNaN=function Is(a){return Fa(a)&&a!=+a},Z.isNative=function tu(a){if(Xd(a))throw new qt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xd(a)},Z.isNil=function Fc(a){return null==a},Z.isNull=function Nf(a){return null===a},Z.isNumber=Fa,Z.isObject=Ar,Z.isObjectLike=Nr,Z.isPlainObject=ca,Z.isRegExp=In,Z.isSafeInteger=function Nn(a){return Ff(a)&&a>=-Kt&&a<=Kt},Z.isSet=Hu,Z.isString=Al,Z.isSymbol=so,Z.isTypedArray=nu,Z.isUndefined=function Bp(a){return a===g},Z.isWeakMap=function kl(a){return Nr(a)&&hi(a)==wn},Z.isWeakSet=function Rc(a){return Nr(a)&&"[object WeakSet]"==ki(a)},Z.join=function af(a,u){return null==a?"":Yl.call(a,u)},Z.kebabCase=am,Z.last=wo,Z.lastIndexOf=function og(a,u,p){var P=null==a?0:a.length;if(!P)return-1;var j=P;return p!==g&&(j=(j=pn(p))<0?Wr(P+j,0):Ei(j,P-1)),u==u?function ea(Ee,Ue,$e){for(var Mt=$e+1;Mt--;)if(Ee[Mt]===Ue)return Mt;return Mt}(a,u,j):ei(a,si,j,!0)},Z.lowerCase=sm,Z.lowerFirst=um,Z.lt=Bi,Z.lte=Ol,Z.max=function Vm(a){return a&&a.length?rl(a,oi,Zl):g},Z.maxBy=function Hm(a,u){return a&&a.length?rl(a,Gt(u,2),Zl):g},Z.mean=function jm(a){return Fo(a,oi)},Z.meanBy=function zm(a,u){return Fo(a,Gt(u,2))},Z.min=function Um(a){return a&&a.length?rl(a,oi,nc):g},Z.minBy=function ou(a,u){return a&&a.length?rl(a,Gt(u,2),nc):g},Z.stubArray=Qc,Z.stubFalse=jo,Z.stubObject=function Mm(){return{}},Z.stubString=function Am(){return""},Z.stubTrue=function km(){return!0},Z.multiply=ah,Z.nth=function Ri(a,u){return a&&a.length?Sd(a,pn(u)):g},Z.noConflict=function wm(){return Be._===this&&(Be._=Ut),this},Z.noop=Vl,Z.now=Pl,Z.pad=function lm(a,u,p){a=tr(a);var P=(u=pn(u))?Wa(a):0;if(!u||P>=u)return a;var j=(u-P)/2;return Pu(mu(j),p)+a+Pu(Qu(j),p)},Z.padEnd=function Xf(a,u,p){a=tr(a);var P=(u=pn(u))?Wa(a):0;return u&&P<u?a+Pu(u-P,p):a},Z.padStart=function Kf(a,u,p){a=tr(a);var P=(u=pn(u))?Wa(a):0;return u&&P<u?Pu(u-P,p)+a:a},Z.parseInt=function Qf(a,u,p){return p||null==u?u=0:u&&(u=+u),hh(tr(a).replace(fa,""),u||0)},Z.random=function im(a,u,p){if(p&&"boolean"!=typeof p&&Pi(a,u,p)&&(u=p=g),p===g&&("boolean"==typeof u?(p=u,u=g):"boolean"==typeof a&&(p=a,a=g)),a===g&&u===g?(a=0,u=1):(a=da(a),u===g?(u=a,a=0):u=da(u)),a>u){var P=a;a=u,u=P}if(p||a%1||u%1){var j=rd();return Ei(a+j*(u-a+ue("1e-"+((j+"").length-1))),u)}return cl(a,u)},Z.reduce=function yf(a,u,p){var P=dn(a)?$n:ba,j=arguments.length<3;return P(a,Gt(u,4),p,j,Qa)},Z.reduceRight=function bn(a,u,p){var P=dn(a)?nn:ba,j=arguments.length<3;return P(a,Gt(u,4),p,j,gd)},Z.repeat=function Jf(a,u,p){return u=(p?Pi(a,u,p):u===g)?1:pn(u),oc(tr(a),u)},Z.replace=function Zf(){var a=arguments,u=tr(a[0]);return a.length<3?u:u.replace(a[1],a[2])},Z.result=function Jp(a,u,p){var P=-1,j=(u=ia(u,a)).length;for(j||(j=1,a=g);++P<j;){var te=null==a?g:a[io(u[P])];te===g&&(P=j,te=p),a=ts(te)?te.call(a):te}return a},Z.round=Gm,Z.runInContext=Ee,Z.sample=function la(a){return(dn(a)?fd:Zh)(a)},Z.size=function Du(a){if(null==a)return 0;if(ao(a))return Al(a)?Wa(a):a.length;var u=hi(a);return u==hn||u==et?a.size:tc(a).length},Z.snakeCase=qf,Z.some=function Cf(a,u,p){var P=dn(a)?qr:ep;return p&&Pi(a,u,p)&&(u=g),P(a,Gt(u,3))},Z.sortedIndex=function Bo(a,u){return dl(a,u)},Z.sortedIndexBy=function sf(a,u,p){return ac(a,u,Gt(p,2))},Z.sortedIndexOf=function Tl(a,u){var p=null==a?0:a.length;if(p){var P=dl(a,u);if(P<p&&oo(a[P],u))return P}return-1},Z.sortedLastIndex=function ua(a,u){return dl(a,u,!0)},Z.sortedLastIndexBy=function So(a,u,p){return ac(a,u,Gt(p,2),!0)},Z.sortedLastIndexOf=function Za(a,u){if(null!=a&&a.length){var P=dl(a,u,!0)-1;if(oo(a[P],u))return P}return-1},Z.startCase=dm,Z.startsWith=function fm(a,u,p){return a=tr(a),p=null==p?0:_s(pn(p),0,a.length),u=no(u),a.slice(p,p+u.length)==u},Z.subtract=Hl,Z.sum=function Jc(a){return a&&a.length?hs(a,oi):0},Z.sumBy=function sh(a,u){return a&&a.length?hs(a,Gt(u,2)):0},Z.template=function Gc(a,u,p){var P=Z.templateSettings;p&&Pi(a,u,p)&&(u=g),a=tr(a),u=ru({},u,P,Wn);var xe,Me,j=ru({},u.imports,P.imports,Wn),te=Xr(j),he=lu(j,te),ot=0,at=u.interpolate||Go,ht="__p += '",St=Ca((u.escape||Go).source+"|"+at.source+"|"+(at===Jr?Ba:Go).source+"|"+(u.evaluate||Go).source+"|$","g"),Ft="//# sourceURL="+(be.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ci+"]")+"\n";a.replace(St,function(Zt,Pn,Dn,uo,br,lo){return Dn||(Dn=uo),ht+=a.slice(ot,lo).replace(Mo,Yi),Pn&&(xe=!0,ht+="' +\n__e("+Pn+") +\n'"),br&&(Me=!0,ht+="';\n"+br+";\n__p += '"),Dn&&(ht+="' +\n((__t = ("+Dn+")) == null ? '' : __t) +\n'"),ot=lo+Zt.length,Zt}),ht+="';\n";var Jt=be.call(u,"variable")&&u.variable;if(Jt){if(Da.test(Jt))throw new qt("Invalid `variable` option passed into `_.template`")}else ht="with (obj) {\n"+ht+"\n}\n";ht=(Me?ht.replace(un,""):ht).replace(vi,"$1").replace(Uo,"$1;"),ht="function("+(Jt||"obj")+") {\n"+(Jt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(xe?", __e = _.escape":"")+(Me?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ht+"return __p\n}";var vn=nh(function(){return On(te,Ft+"return "+ht).apply(g,he)});if(vn.source=ht,Lf(vn))throw vn;return vn},Z.times=function Om(a,u){if((a=pn(a))<1||a>Kt)return[];var p=Zn,P=Ei(a,Zn);u=Gt(u),a-=Zn;for(var j=Vn(P,u);++p<a;)u(p);return j},Z.toFinite=da,Z.toInteger=pn,Z.toLength=Df,Z.toLower=function eh(a){return tr(a).toLowerCase()},Z.toNumber=Eo,Z.toSafeInteger=function Ll(a){return a?_s(pn(a),-Kt,Kt):0===a?a:0},Z.toString=tr,Z.toUpper=function hm(a){return tr(a).toUpperCase()},Z.trim=function pm(a,u,p){if((a=tr(a))&&(p||u===g))return Ds(a);if(!a||!(u=no(u)))return a;var P=yn(a),j=yn(u);return en(P,Yu(P,j),cu(P,j)+1).join("")},Z.trimEnd=function on(a,u,p){if((a=tr(a))&&(p||u===g))return a.slice(0,gs(a)+1);if(!a||!(u=no(u)))return a;var P=yn(a);return en(P,0,cu(P,yn(u))+1).join("")},Z.trimStart=function Wu(a,u,p){if((a=tr(a))&&(p||u===g))return a.replace(fa,"");if(!a||!(u=no(u)))return a;var P=yn(a);return en(P,Yu(P,yn(u))).join("")},Z.truncate=function Ho(a,u){var p=30,P="...";if(Ar(u)){var j="separator"in u?u.separator:j;p="length"in u?pn(u.length):p,P="omission"in u?no(u.omission):P}var te=(a=tr(a)).length;if($a(a)){var he=yn(a);te=he.length}if(p>=te)return a;var xe=p-Wa(P);if(xe<1)return P;var Me=he?en(he,0,xe).join(""):a.slice(0,xe);if(j===g)return Me+P;if(he&&(xe+=Me.length-xe),In(j)){if(a.slice(xe).search(j)){var ot,at=Me;for(j.global||(j=Ca(j.source,tr(ha.exec(j))+"g")),j.lastIndex=0;ot=j.exec(at);)var ht=ot.index;Me=Me.slice(0,ht===g?xe:ht)}}else if(a.indexOf(no(j),xe)!=xe){var St=Me.lastIndexOf(j);St>-1&&(Me=Me.slice(0,St))}return Me+P},Z.unescape=function mm(a){return(a=tr(a))&&ke.test(a)?a.replace(jr,to):a},Z.uniqueId=function Fm(a){var u=++it;return tr(a)+u},Z.upperCase=gm,Z.upperFirst=Nl,Z.each=Ic,Z.eachRight=Pc,Z.first=cp,Yc(Z,function(){var a={};return Ii(Z,function(u,p){be.call(Z.prototype,p)||(a[p]=u)}),a}(),{chain:!1}),Z.VERSION="4.17.21",De(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Z[a].placeholder=Z}),De(["drop","take"],function(a,u){Sn.prototype[a]=function(p){p=p===g?1:Wr(pn(p),0);var P=this.__filtered__&&!u?new Sn(this):this.clone();return P.__filtered__?P.__takeCount__=Ei(p,P.__takeCount__):P.__views__.push({size:Ei(p,Zn),type:a+(P.__dir__<0?"Right":"")}),P},Sn.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),De(["filter","map","takeWhile"],function(a,u){var p=u+1,P=1==p||3==p;Sn.prototype[a]=function(j){var te=this.clone();return te.__iteratees__.push({iteratee:Gt(j,3),type:p}),te.__filtered__=te.__filtered__||P,te}}),De(["head","last"],function(a,u){var p="take"+(u?"Right":"");Sn.prototype[a]=function(){return this[p](1).value()[0]}}),De(["initial","tail"],function(a,u){var p="drop"+(u?"":"Right");Sn.prototype[a]=function(){return this.__filtered__?new Sn(this):this[p](1)}}),Sn.prototype.compact=function(){return this.filter(oi)},Sn.prototype.find=function(a){return this.filter(a).head()},Sn.prototype.findLast=function(a){return this.reverse().find(a)},Sn.prototype.invokeMap=xn(function(a,u){return"function"==typeof a?new Sn(this):this.map(function(p){return bu(p,a,u)})}),Sn.prototype.reject=function(a){return this.filter(Vu(Gt(a)))},Sn.prototype.slice=function(a,u){a=pn(a);var p=this;return p.__filtered__&&(a>0||u<0)?new Sn(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),u!==g&&(p=(u=pn(u))<0?p.dropRight(-u):p.take(u-a)),p)},Sn.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Sn.prototype.toArray=function(){return this.take(Zn)},Ii(Sn.prototype,function(a,u){var p=/^(?:filter|find|map|reject)|While$/.test(u),P=/^(?:head|last)$/.test(u),j=Z[P?"take"+("last"==u?"Right":""):u],te=P||/^find/.test(u);!j||(Z.prototype[u]=function(){var he=this.__wrapped__,xe=P?[1]:arguments,Me=he instanceof Sn,ot=xe[0],at=Me||dn(he),ht=function(Pn){var Dn=j.apply(Z,Ir([Pn],xe));return P&&St?Dn[0]:Dn};at&&p&&"function"==typeof ot&&1!=ot.length&&(Me=at=!1);var St=this.__chain__,Ft=!!this.__actions__.length,Jt=te&&!St,vn=Me&&!Ft;if(!te&&at){he=vn?he:new Sn(this);var Zt=a.apply(he,xe);return Zt.__actions__.push({func:Aa,args:[ht],thisArg:g}),new _o(Zt,St)}return Jt&&vn?a.apply(this,xe):(Zt=this.thru(ht),Jt?P?Zt.value()[0]:Zt.value():Zt)})}),De(["pop","push","shift","sort","splice","unshift"],function(a){var u=Hs[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",P=/^(?:pop|shift)$/.test(a);Z.prototype[a]=function(){var j=arguments;if(P&&!this.__chain__){var te=this.value();return u.apply(dn(te)?te:[],j)}return this[p](function(he){return u.apply(dn(he)?he:[],j)})}}),Ii(Sn.prototype,function(a,u){var p=Z[u];if(p){var P=p.name+"";be.call(zs,P)||(zs[P]=[]),zs[P].push({name:u,func:p})}}),zs[Cs(g,2).name]=[{name:"wrapper",func:g}],Sn.prototype.clone=function od(){var a=new Sn(this.__wrapped__);return a.__actions__=ri(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ri(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ri(this.__views__),a},Sn.prototype.reverse=function tl(){if(this.__filtered__){var a=new Sn(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},Sn.prototype.value=function ad(){var a=this.__wrapped__.value(),u=this.__dir__,p=dn(a),P=u<0,j=p?a.length:0,te=function zd(a,u,p){for(var P=-1,j=p.length;++P<j;){var te=p[P],he=te.size;switch(te.type){case"drop":a+=he;break;case"dropRight":u-=he;break;case"take":u=Ei(u,a+he);break;case"takeRight":a=Wr(a,u-he)}}return{start:a,end:u}}(0,j,this.__views__),he=te.start,xe=te.end,Me=xe-he,ot=P?xe:he-1,at=this.__iteratees__,ht=at.length,St=0,Ft=Ei(Me,this.__takeCount__);if(!p||!P&&j==Me&&Ft==Me)return fl(a,this.__actions__);var Jt=[];e:for(;Me--&&St<Ft;){for(var vn=-1,Zt=a[ot+=u];++vn<ht;){var Pn=at[vn],uo=Pn.type,br=(0,Pn.iteratee)(Zt);if(2==uo)Zt=br;else if(!br){if(1==uo)continue e;break e}}Jt[St++]=Zt}return Jt},Z.prototype.at=Mi,Z.prototype.chain=function cf(){return Ni(this)},Z.prototype.commit=function ka(){return new _o(this.value(),this.__chain__)},Z.prototype.next=function xp(){this.__values__===g&&(this.__values__=ju(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?g:this.__values__[this.__index__++]}},Z.prototype.plant=function bp(a){for(var u,p=this;p instanceof el;){var P=xc(p);P.__index__=0,P.__values__=g,u?j.__wrapped__=P:u=P;var j=P;p=p.__wrapped__}return j.__wrapped__=a,u},Z.prototype.reverse=function ff(){var a=this.__wrapped__;if(a instanceof Sn){var u=a;return this.__actions__.length&&(u=new Sn(this)),(u=u.reverse()).__actions__.push({func:Aa,args:[Ji],thisArg:g}),new _o(u,this.__chain__)}return this.thru(Ji)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function hf(){return fl(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,vo&&(Z.prototype[vo]=function df(){return this}),Z}();Be._=pu,(m=function(){return pu}.call(W,d,W,E))!==g&&(E.exports=m)}.call(this)},19984:(E,W,d)=>{var m=d(84633),g=d(96517),S=d(92046),T=d(21503);E.exports=function _(I,O){return(T(I)?m:S)(I,g(O,3))}},10203:(E,W,d)=>{var m=d(85683),g=d(45184),S=d(96517);E.exports=function T(_,I){var O={};return I=S(I,3),g(_,function(k,R,B){m(O,R,I(k,R,B))}),O}},18176:(E,W,d)=>{var m=d(67308),g=d(31100),S=d(32608);E.exports=function T(_){return _&&_.length?m(_,S,g):void 0}},30535:(E,W,d)=>{var m=d(99850);function S(T,_){if("function"!=typeof T||null!=_&&"function"!=typeof _)throw new TypeError("Expected a function");var I=function(){var O=arguments,k=_?_.apply(this,O):O[0],R=I.cache;if(R.has(k))return R.get(k);var B=T.apply(this,O);return I.cache=R.set(k,B)||R,B};return I.cache=new(S.Cache||m),I}S.Cache=m,E.exports=S},80567:(E,W,d)=>{var m=d(73842),S=d(84944)(function(T,_,I){m(T,_,I)});E.exports=S},29439:(E,W,d)=>{var m=d(67308),g=d(99069),S=d(32608);E.exports=function T(_){return _&&_.length?m(_,S,g):void 0}},29525:(E,W,d)=>{var m=d(67308),g=d(96517),S=d(99069);E.exports=function T(_,I){return _&&_.length?m(_,g(I,2),S):void 0}},12552:E=>{E.exports=function W(){}},31710:(E,W,d)=>{var m=d(12119);E.exports=function(){return m.Date.now()}},16372:(E,W,d)=>{var m=d(83021),S=d(3975)(function(T,_){return null==T?{}:m(T,_)});E.exports=S},87495:(E,W,d)=>{var m=d(11847),g=d(39222),S=d(45352),T=d(68533);E.exports=function _(I){return S(I)?m(T(I)):g(I)}},90361:(E,W,d)=>{var g=d(97509)();E.exports=g},81337:(E,W,d)=>{var m=d(8745),g=d(43132),S=d(96517),T=d(13570),_=d(21503);E.exports=function I(O,k,R){var B=_(O)?m:T,A=arguments.length<3;return B(O,S(k,4),R,A,g)}},55637:(E,W,d)=>{var m=d(81172),g=d(28794),S=d(56507),T=d(30248),_=d(52315);E.exports=function k(R){if(null==R)return 0;if(S(R))return T(R)?_(R):R.length;var B=g(R);return"[object Map]"==B||"[object Set]"==B?R.size:m(R).length}},12906:(E,W,d)=>{var m=d(50686),g=d(6119),S=d(23269),T=d(93342),_=S(function(I,O){if(null==I)return[];var k=O.length;return k>1&&T(I,O[0],O[1])?O=[]:k>2&&T(O[0],O[1],O[2])&&(O=[O[0]]),g(I,m(O,1),[])});E.exports=_},49975:E=>{E.exports=function W(){return[]}},63580:E=>{E.exports=function W(){return!1}},12232:(E,W,d)=>{var m=d(51467),g=1/0;E.exports=function T(_){return _?(_=m(_))===g||_===-g?17976931348623157e292*(_<0?-1:1):_==_?_:0:0===_?_:0}},44401:(E,W,d)=>{var m=d(12232);E.exports=function g(S){var T=m(S),_=T%1;return T==T?_?T-_:T:0}},51467:(E,W,d)=>{var m=d(83348),g=d(25940),S=d(44129),_=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,O=/^0o[0-7]+$/i,k=parseInt;E.exports=function R(B){if("number"==typeof B)return B;if(S(B))return NaN;if(g(B)){var A="function"==typeof B.valueOf?B.valueOf():B;B=g(A)?A+"":A}if("string"!=typeof B)return 0===B?B:+B;B=m(B);var K=I.test(B);return K||O.test(B)?k(B.slice(2),K?2:8):_.test(B)?NaN:+B}},8067:(E,W,d)=>{var m=d(31989),g=d(16555);E.exports=function S(T){return m(T,g(T))}},73943:(E,W,d)=>{var m=d(93935);E.exports=function g(S){return null==S?"":m(S)}},89416:(E,W,d)=>{var m=d(96837),g=d(78858),S=d(45184),T=d(96517),_=d(29519),I=d(21503),O=d(80891),k=d(75946),R=d(25940),B=d(48159);E.exports=function A(K,q,ae){var n=I(K),se=n||O(K)||B(K);if(q=T(q,4),null==ae){var ce=K&&K.constructor;ae=se?n?new ce:[]:R(K)&&k(ce)?g(_(K)):{}}return(se?m:S)(K,function(le,Y,pe){return q(ae,le,Y,pe)}),ae}},68921:(E,W,d)=>{var m=d(50686),g=d(23269),S=d(80707),T=d(21330),_=g(function(I){return S(m(I,1,T,!0))});E.exports=_},51541:(E,W,d)=>{var m=d(73943),g=0;E.exports=function S(T){var _=++g;return m(T)+_}},90377:(E,W,d)=>{var m=d(19179),g=d(118);E.exports=function S(T){return null==T?[]:m(T,g(T))}},21617:(E,W,d)=>{var m=d(89719),g=d(38645);E.exports=function S(T,_){return g(T||[],_||[],m)}},29610:function(E){E.exports=function(){var W="1.13.2",d="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},m=Array.prototype,g=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,T=m.push,_=m.slice,I=g.toString,O=g.hasOwnProperty,k="undefined"!=typeof ArrayBuffer,R="undefined"!=typeof DataView,B=Array.isArray,A=Object.keys,K=Object.create,q=k&&ArrayBuffer.isView,ae=isNaN,n=isFinite,se=!{toString:null}.propertyIsEnumerable("toString"),ce=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],le=Math.pow(2,53)-1;function Y(F,J){return J=null==J?F.length-1:+J,function(){for(var ue=Math.max(arguments.length-J,0),ge=Array(ue),Oe=0;Oe<ue;Oe++)ge[Oe]=arguments[Oe+J];switch(J){case 0:return F.call(this,ge);case 1:return F.call(this,arguments[0],ge);case 2:return F.call(this,arguments[0],arguments[1],ge)}var Te=Array(J+1);for(Oe=0;Oe<J;Oe++)Te[Oe]=arguments[Oe];return Te[J]=ge,F.apply(this,Te)}}function pe(F){var J=typeof F;return"function"===J||"object"===J&&!!F}function we(F){return void 0===F}function Le(F){return!0===F||!1===F||"[object Boolean]"===I.call(F)}function b(F){var J="[object "+F+"]";return function(ue){return I.call(ue)===J}}var Ge=b("String"),ut=b("Number"),ze=b("Date"),Ne=b("RegExp"),Re=b("Error"),nt=b("Symbol"),Ke=b("ArrayBuffer"),mt=b("Function");"object"!=typeof Int8Array&&"function"!=typeof(d.document&&d.document.childNodes)&&(mt=function(F){return"function"==typeof F||!1});var pt=mt,Kt=b("Object"),an=R&&Kt(new DataView(new ArrayBuffer(8))),jn="undefined"!=typeof Map&&Kt(new Map),Zn=b("DataView"),zn=an?function(F){return null!=F&&pt(F.getInt8)&&Ke(F.buffer)}:Zn,dr=B||b("Array");function Xn(F,J){return null!=F&&O.call(F,J)}var We=b("Arguments");!function(){We(arguments)||(We=function(F){return Xn(F,"callee")})}();var Ze=We;function ft(F){return ut(F)&&ae(F)}function xt(F){return function(){return F}}function At(F){return function(J){var ue=F(J);return"number"==typeof ue&&ue>=0&&ue<=le}}function cn(F){return function(J){return null==J?void 0:J[F]}}var Bn=cn("byteLength"),cr=At(Bn),co=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,hn=k?function(F){return q?q(F)&&!zn(F):cr(F)&&co.test(I.call(F))}:xt(!1),tn=cn("length");function D(F,J){J=function(Be){for(var rt={},l=Be.length,h=0;h<l;++h)rt[Be[h]]=!0;return{contains:function(y){return!0===rt[y]},push:function(y){return rt[y]=!0,Be.push(y)}}}(J);var ue=ce.length,ge=F.constructor,Oe=pt(ge)&&ge.prototype||g,Te="constructor";for(Xn(F,Te)&&!J.contains(Te)&&J.push(Te);ue--;)(Te=ce[ue])in F&&F[Te]!==Oe[Te]&&!J.contains(Te)&&J.push(Te)}function U(F){if(!pe(F))return[];if(A)return A(F);var J=[];for(var ue in F)Xn(F,ue)&&J.push(ue);return se&&D(F,J),J}function re(F,J){var ue=U(J),ge=ue.length;if(null==F)return!ge;for(var Oe=Object(F),Te=0;Te<ge;Te++){var Be=ue[Te];if(J[Be]!==Oe[Be]||!(Be in Oe))return!1}return!0}function ye(F){return F instanceof ye?F:this instanceof ye?void(this._wrapped=F):new ye(F)}function Qe(F){return new Uint8Array(F.buffer||F,F.byteOffset||0,Bn(F))}ye.VERSION=W,ye.prototype.valueOf=ye.prototype.toJSON=ye.prototype.value=function(){return this._wrapped},ye.prototype.toString=function(){return String(this._wrapped)};var et="[object DataView]";function Ct(F,J,ue,ge){if(F===J)return 0!==F||1/F==1/J;if(null==F||null==J)return!1;if(F!=F)return J!=J;var Oe=typeof F;return("function"===Oe||"object"===Oe||"object"==typeof J)&&function Te(Be,rt,l,h){Be instanceof ye&&(Be=Be._wrapped),rt instanceof ye&&(rt=rt._wrapped);var y=I.call(Be);if(y!==I.call(rt))return!1;if(an&&"[object Object]"==y&&zn(Be)){if(!zn(rt))return!1;y=et}switch(y){case"[object RegExp]":case"[object String]":return""+Be==""+rt;case"[object Number]":return+Be!=+Be?+rt!=+rt:0==+Be?1/+Be==1/rt:+Be==+rt;case"[object Date]":case"[object Boolean]":return+Be==+rt;case"[object Symbol]":return S.valueOf.call(Be)===S.valueOf.call(rt);case"[object ArrayBuffer]":case et:return Te(Qe(Be),Qe(rt),l,h)}var w="[object Array]"===y;if(!w&&hn(Be)){if(Bn(Be)!==Bn(rt))return!1;if(Be.buffer===rt.buffer&&Be.byteOffset===rt.byteOffset)return!0;w=!0}if(!w){if("object"!=typeof Be||"object"!=typeof rt)return!1;var N=Be.constructor,H=rt.constructor;if(N!==H&&!(pt(N)&&N instanceof N&&pt(H)&&H instanceof H)&&"constructor"in Be&&"constructor"in rt)return!1}h=h||[];for(var X=(l=l||[]).length;X--;)if(l[X]===Be)return h[X]===rt;if(l.push(Be),h.push(rt),w){if((X=Be.length)!==rt.length)return!1;for(;X--;)if(!Ct(Be[X],rt[X],l,h))return!1}else{var me,de=U(Be);if(X=de.length,U(rt).length!==X)return!1;for(;X--;)if(!Xn(rt,me=de[X])||!Ct(Be[me],rt[me],l,h))return!1}return l.pop(),h.pop(),!0}(F,J,ue,ge)}function Nt(F){if(!pe(F))return[];var J=[];for(var ue in F)J.push(ue);return se&&D(F,J),J}function sn(F){var J=tn(F);return function(ue){if(null==ue)return!1;var ge=Nt(ue);if(tn(ge))return!1;for(var Oe=0;Oe<J;Oe++)if(!pt(ue[F[Oe]]))return!1;return F!==qi||!pt(ue[wn])}}var wn="forEach",gn=["clear","delete"],gr=["get","has","set"],fr=gn.concat(wn,gr),qi=gn.concat(gr),Qn=["add"].concat(gn,wn,"has"),vr=jn?sn(fr):b("Map"),hr=jn?sn(qi):b("WeakMap"),Cr=jn?sn(Qn):b("Set"),Qr=b("WeakSet");function gi(F){for(var J=U(F),ue=J.length,ge=Array(ue),Oe=0;Oe<ue;Oe++)ge[Oe]=F[J[Oe]];return ge}function wr(F){for(var J={},ue=U(F),ge=0,Oe=ue.length;ge<Oe;ge++)J[F[ue[ge]]]=ue[ge];return J}function un(F){var J=[];for(var ue in F)pt(F[ue])&&J.push(ue);return J.sort()}function vi(F,J){return function(ue){var ge=arguments.length;if(J&&(ue=Object(ue)),ge<2||null==ue)return ue;for(var Oe=1;Oe<ge;Oe++)for(var Te=arguments[Oe],Be=F(Te),rt=Be.length,l=0;l<rt;l++){var h=Be[l];J&&void 0!==ue[h]||(ue[h]=Te[h])}return ue}}var Uo=vi(Nt),jr=vi(U),fo=vi(Nt,!0);function ke(F){if(!pe(F))return{};if(K)return K(F);var J=function(){};J.prototype=F;var ue=new J;return J.prototype=null,ue}function Xe(F){return dr(F)?F:[F]}function sr(F){return ye.toPath(F)}function Br(F,J){for(var ue=J.length,ge=0;ge<ue;ge++){if(null==F)return;F=F[J[ge]]}return ue?F:void 0}function Jr(F,J,ue){var ge=Br(F,sr(J));return we(ge)?ue:ge}function ai(F){return F}function ho(F){return F=jr({},F),function(J){return re(J,F)}}function _i(F){return F=sr(F),function(J){return Br(J,F)}}function ur(F,J,ue){if(void 0===J)return F;switch(null==ue?3:ue){case 1:return function(ge){return F.call(J,ge)};case 3:return function(ge,Oe,Te){return F.call(J,ge,Oe,Te)};case 4:return function(ge,Oe,Te,Be){return F.call(J,ge,Oe,Te,Be)}}return function(){return F.apply(J,arguments)}}function ns(F,J,ue){return null==F?ai:pt(F)?ur(F,J,ue):pe(F)&&!dr(F)?ho(F):_i(F)}function fa(F,J){return ns(F,J,1/0)}function Zr(F,J,ue){return ye.iteratee!==fa?ye.iteratee(F,J):ns(F,J,ue)}function rs(){}function is(F,J){return null==J&&(J=F,F=0),F+Math.floor(Math.random()*(J-F+1))}ye.toPath=Xe,ye.iteratee=fa;var Ui=Date.now||function(){return(new Date).getTime()};function os(F){var J=function(Te){return F[Te]},ue="(?:"+U(F).join("|")+")",ge=RegExp(ue),Oe=RegExp(ue,"g");return function(Te){return ge.test(Te=null==Te?"":""+Te)?Te.replace(Oe,J):Te}}var Da={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},as=os(Da),Ba=os(wr(Da)),ha=ye.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ks=/(.)^/,ss={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Po=/\\|'|\r|\n|\u2028|\u2029/g;function pa(F){return"\\"+ss[F]}var Os=/^\s*(\w|\$)+\s*$/,Ls=0;function Go(F,J,ue,ge,Oe){if(!(ge instanceof J))return F.apply(ue,Oe);var Te=ke(F.prototype),Be=F.apply(Te,Oe);return pe(Be)?Be:Te}var Mo=Y(function(F,J){var ue=Mo.placeholder,ge=function(){for(var Oe=0,Te=J.length,Be=Array(Te),rt=0;rt<Te;rt++)Be[rt]=J[rt]===ue?arguments[Oe++]:J[rt];for(;Oe<arguments.length;)Be.push(arguments[Oe++]);return Go(F,ge,this,this,Be)};return ge});Mo.placeholder=ye;var ma=Y(function(F,J,ue){if(!pt(F))throw new TypeError("Bind must be called on a function");var ge=Y(function(Oe){return Go(F,ge,J,this,ue.concat(Oe))});return ge}),zr=At(tn);function Ao(F,J,ue,ge){if(ge=ge||[],J||0===J){if(J<=0)return ge.concat(F)}else J=1/0;for(var Oe=ge.length,Te=0,Be=tn(F);Te<Be;Te++){var rt=F[Te];if(zr(rt)&&(dr(rt)||Ze(rt)))if(J>1)Ao(rt,J-1,ue,ge),Oe=ge.length;else for(var l=0,h=rt.length;l<h;)ge[Oe++]=rt[l++];else ue||(ge[Oe++]=rt)}return ge}var uu=Y(function(F,J){var ue=(J=Ao(J,!1,!1)).length;if(ue<1)throw new Error("bindAll must be passed function names");for(;ue--;){var ge=J[ue];F[ge]=ma(F[ge],F)}return F}),Va=Y(function(F,J,ue){return setTimeout(function(){return F.apply(null,ue)},J)}),us=Mo(Va,ye,1);function $o(F){return function(){return!F.apply(this,arguments)}}function ls(F,J){var ue;return function(){return--F>0&&(ue=J.apply(this,arguments)),F<=1&&(J=null),ue}}var st=Mo(ls,2);function eo(F,J,ue){J=Zr(J,ue);for(var ge,Oe=U(F),Te=0,Be=Oe.length;Te<Be;Te++)if(J(F[ge=Oe[Te]],ge,F))return ge}function po(F){return function(J,ue,ge){ue=Zr(ue,ge);for(var Oe=tn(J),Te=F>0?0:Oe-1;Te>=0&&Te<Oe;Te+=F)if(ue(J[Te],Te,J))return Te;return-1}}var Vr=po(1),ga=po(-1);function yi(F,J,ue,ge){for(var Oe=(ue=Zr(ue,ge,1))(J),Te=0,Be=tn(F);Te<Be;){var rt=Math.floor((Te+Be)/2);ue(F[rt])<Oe?Te=rt+1:Be=rt}return Te}function Ur(F,J,ue){return function(ge,Oe,Te){var Be=0,rt=tn(ge);if("number"==typeof Te)F>0?Be=Te>=0?Te:Math.max(Te+rt,Be):rt=Te>=0?Math.min(Te+1,rt):Te+rt+1;else if(ue&&Te&&rt)return ge[Te=ue(ge,Oe)]===Oe?Te:-1;if(Oe!=Oe)return(Te=J(_.call(ge,Be,rt),ft))>=0?Te+Be:-1;for(Te=F>0?Be:rt-1;Te>=0&&Te<rt;Te+=F)if(ge[Te]===Oe)return Te;return-1}}var xi=Ur(1,Vr,yi),ko=Ur(-1,ga);function mo(F,J,ue){var ge=(zr(F)?Vr:eo)(F,J,ue);if(void 0!==ge&&-1!==ge)return F[ge]}function Sr(F,J,ue){var ge,Oe;if(J=ur(J,ue),zr(F))for(ge=0,Oe=F.length;ge<Oe;ge++)J(F[ge],ge,F);else{var Te=U(F);for(ge=0,Oe=Te.length;ge<Oe;ge++)J(F[Te[ge]],Te[ge],F)}return F}function _r(F,J,ue){J=Zr(J,ue);for(var ge=!zr(F)&&U(F),Oe=(ge||F).length,Te=Array(Oe),Be=0;Be<Oe;Be++){var rt=ge?ge[Be]:Be;Te[Be]=J(F[rt],rt,F)}return Te}function Ai(F){var J=function(ue,ge,Oe,Te){var Be=!zr(ue)&&U(ue),rt=(Be||ue).length,l=F>0?0:rt-1;for(Te||(Oe=ue[Be?Be[l]:l],l+=F);l>=0&&l<rt;l+=F){var h=Be?Be[l]:l;Oe=ge(Oe,ue[h],h,ue)}return Oe};return function(ue,ge,Oe,Te){var Be=arguments.length>=3;return J(ue,ur(ge,Te,4),Oe,Be)}}var Un=Ai(1),Wo=Ai(-1);function Tr(F,J,ue){var ge=[];return J=Zr(J,ue),Sr(F,function(Oe,Te,Be){J(Oe,Te,Be)&&ge.push(Oe)}),ge}function Lr(F,J,ue){J=Zr(J,ue);for(var ge=!zr(F)&&U(F),Oe=(ge||F).length,Te=0;Te<Oe;Te++){var Be=ge?ge[Te]:Te;if(!J(F[Be],Be,F))return!1}return!0}function _n(F,J,ue){J=Zr(J,ue);for(var ge=!zr(F)&&U(F),Oe=(ge||F).length,Te=0;Te<Oe;Te++){var Be=ge?ge[Te]:Te;if(J(F[Be],Be,F))return!0}return!1}function kr(F,J,ue,ge){return zr(F)||(F=gi(F)),("number"!=typeof ue||ge)&&(ue=0),xi(F,J,ue)>=0}var Oo=Y(function(F,J,ue){var ge,Oe;return pt(J)?Oe=J:(J=sr(J),ge=J.slice(0,-1),J=J[J.length-1]),_r(F,function(Te){var Be=Oe;if(!Be){if(ge&&ge.length&&(Te=Br(Te,ge)),null==Te)return;Be=Te[J]}return null==Be?Be:Be.apply(Te,ue)})});function va(F,J){return _r(F,_i(J))}function Lo(F,J,ue){var ge,Oe,Te=-1/0,Be=-1/0;if(null==J||"number"==typeof J&&"object"!=typeof F[0]&&null!=F)for(var rt=0,l=(F=zr(F)?F:gi(F)).length;rt<l;rt++)null!=(ge=F[rt])&&ge>Te&&(Te=ge);else J=Zr(J,ue),Sr(F,function(h,y,w){((Oe=J(h,y,w))>Be||Oe===-1/0&&Te===-1/0)&&(Te=h,Be=Oe)});return Te}var _a=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ha(F){return F?dr(F)?_.call(F):Ge(F)?F.match(_a):zr(F)?_r(F,ai):gi(F):[]}function Yo(F,J,ue){if(null==J||ue)return zr(F)||(F=gi(F)),F[is(F.length-1)];var ge=Ha(F),Oe=tn(ge);J=Math.max(Math.min(J,Oe),0);for(var Te=Oe-1,Be=0;Be<J;Be++){var rt=is(Be,Te),l=ge[Be];ge[Be]=ge[rt],ge[rt]=l}return ge.slice(0,J)}function ja(F,J){return function(ue,ge,Oe){var Te=J?[[],[]]:{};return ge=Zr(ge,Oe),Sr(ue,function(Be,rt){var l=ge(Be,rt,ue);F(Te,Be,l)}),Te}}var Xo=ja(function(F,J,ue){Xn(F,ue)?F[ue].push(J):F[ue]=[J]}),Fs=ja(function(F,J,ue){F[ue]=J}),Rs=ja(function(F,J,ue){Xn(F,ue)?F[ue]++:F[ue]=1}),cs=ja(function(F,J,ue){F[ue?0:1].push(J)},!0);function ya(F,J,ue){return J in ue}var Ns=Y(function(F,J){var ue={},ge=J[0];if(null==F)return ue;pt(ge)?(J.length>1&&(ge=ur(ge,J[1])),J=Nt(F)):(ge=ya,J=Ao(J,!1,!1),F=Object(F));for(var Oe=0,Te=J.length;Oe<Te;Oe++){var Be=J[Oe],rt=F[Be];ge(rt,Be,F)&&(ue[Be]=rt)}return ue}),bi=Y(function(F,J){var ue,ge=J[0];return pt(ge)?(ge=$o(ge),J.length>1&&(ue=J[1])):(J=_r(Ao(J,!1,!1),String),ge=function(Oe,Te){return!kr(J,Te)}),Ns(F,ge,ue)});function Ko(F,J,ue){return _.call(F,0,Math.max(0,F.length-(null==J||ue?1:J)))}function Qo(F,J,ue){return null==F||F.length<1?null==J||ue?void 0:[]:null==J||ue?F[0]:Ko(F,F.length-J)}function go(F,J,ue){return _.call(F,null==J||ue?1:J)}var za=Y(function(F,J){return J=Ao(J,!0,!0),Tr(F,function(ue){return!kr(J,ue)})}),Er=Y(function(F,J){return za(F,J)});function Gi(F,J,ue,ge){Le(J)||(ge=ue,ue=J,J=!1),null!=ue&&(ue=Zr(ue,ge));for(var Oe=[],Te=[],Be=0,rt=tn(F);Be<rt;Be++){var l=F[Be],h=ue?ue(l,Be,F):l;J&&!ue?(Be&&Te===h||Oe.push(l),Te=h):ue?kr(Te,h)||(Te.push(h),Oe.push(l)):kr(Oe,l)||Oe.push(l)}return Oe}var Dt=Y(function(F){return Gi(Ao(F,!0,!0))});function Ci(F){for(var J=F&&Lo(F,tn).length||0,ue=Array(J),ge=0;ge<J;ge++)ue[ge]=va(F,ge);return ue}var Gn=Y(Ci);function kn(F,J){return F._chain?ye(J).chain():J}function Ua(F){return Sr(un(F),function(J){var ue=ye[J]=F[J];ye.prototype[J]=function(){var ge=[this._wrapped];return T.apply(ge,arguments),kn(this,ue.apply(ye,ge))}}),ye}Sr(["pop","push","reverse","shift","sort","splice","unshift"],function(F){var J=m[F];ye.prototype[F]=function(){var ue=this._wrapped;return null!=ue&&(J.apply(ue,arguments),"shift"!==F&&"splice"!==F||0!==ue.length||delete ue[0]),kn(this,ue)}}),Sr(["concat","join","slice"],function(F){var J=m[F];ye.prototype[F]=function(){var ue=this._wrapped;return null!=ue&&(ue=J.apply(ue,arguments)),kn(this,ue)}});var ds=Ua({__proto__:null,VERSION:W,restArguments:Y,isObject:pe,isNull:function(F){return null===F},isUndefined:we,isBoolean:Le,isElement:function(F){return!(!F||1!==F.nodeType)},isString:Ge,isNumber:ut,isDate:ze,isRegExp:Ne,isError:Re,isSymbol:nt,isArrayBuffer:Ke,isDataView:zn,isArray:dr,isFunction:pt,isArguments:Ze,isFinite:function(F){return!nt(F)&&n(F)&&!isNaN(parseFloat(F))},isNaN:ft,isTypedArray:hn,isEmpty:function(F){if(null==F)return!0;var J=tn(F);return"number"==typeof J&&(dr(F)||Ge(F)||Ze(F))?0===J:0===tn(U(F))},isMatch:re,isEqual:function(F,J){return Ct(F,J)},isMap:vr,isWeakMap:hr,isSet:Cr,isWeakSet:Qr,keys:U,allKeys:Nt,values:gi,pairs:function(F){for(var J=U(F),ue=J.length,ge=Array(ue),Oe=0;Oe<ue;Oe++)ge[Oe]=[J[Oe],F[J[Oe]]];return ge},invert:wr,functions:un,methods:un,extend:Uo,extendOwn:jr,assign:jr,defaults:fo,create:function(F,J){var ue=ke(F);return J&&jr(ue,J),ue},clone:function(F){return pe(F)?dr(F)?F.slice():Uo({},F):F},tap:function(F,J){return J(F),F},get:Jr,has:function(F,J){for(var ue=(J=sr(J)).length,ge=0;ge<ue;ge++){var Oe=J[ge];if(!Xn(F,Oe))return!1;F=F[Oe]}return!!ue},mapObject:function(F,J,ue){J=Zr(J,ue);for(var ge=U(F),Oe=ge.length,Te={},Be=0;Be<Oe;Be++){var rt=ge[Be];Te[rt]=J(F[rt],rt,F)}return Te},identity:ai,constant:xt,noop:rs,toPath:Xe,property:_i,propertyOf:function(F){return null==F?rs:function(J){return Jr(F,J)}},matcher:ho,matches:ho,times:function(F,J,ue){var ge=Array(Math.max(0,F));J=ur(J,ue,1);for(var Oe=0;Oe<F;Oe++)ge[Oe]=J(Oe);return ge},random:is,now:Ui,escape:as,unescape:Ba,templateSettings:ha,template:function(F,J,ue){!J&&ue&&(J=ue),J=fo({},J,ye.templateSettings);var ge=RegExp([(J.escape||ks).source,(J.interpolate||ks).source,(J.evaluate||ks).source].join("|")+"|$","g"),Oe=0,Te="__p+='";F.replace(ge,function(h,y,w,N,H){return Te+=F.slice(Oe,H).replace(Po,pa),Oe=H+h.length,y?Te+="'+\n((__t=("+y+"))==null?'':_.escape(__t))+\n'":w?Te+="'+\n((__t=("+w+"))==null?'':__t)+\n'":N&&(Te+="';\n"+N+"\n__p+='"),h}),Te+="';\n";var Be,rt=J.variable;if(rt){if(!Os.test(rt))throw new Error("variable is not a bare identifier: "+rt)}else Te="with(obj||{}){\n"+Te+"}\n",rt="obj";Te="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Te+"return __p;\n";try{Be=new Function(rt,"_",Te)}catch(h){throw h.source=Te,h}var l=function(h){return Be.call(this,h,ye)};return l.source="function("+rt+"){\n"+Te+"}",l},result:function(F,J,ue){var ge=(J=sr(J)).length;if(!ge)return pt(ue)?ue.call(F):ue;for(var Oe=0;Oe<ge;Oe++){var Te=null==F?void 0:F[J[Oe]];void 0===Te&&(Te=ue,Oe=ge),F=pt(Te)?Te.call(F):Te}return F},uniqueId:function(F){var J=++Ls+"";return F?F+J:J},chain:function(F){var J=ye(F);return J._chain=!0,J},iteratee:fa,partial:Mo,bind:ma,bindAll:uu,memoize:function(F,J){var ue=function(ge){var Oe=ue.cache,Te=""+(J?J.apply(this,arguments):ge);return Xn(Oe,Te)||(Oe[Te]=F.apply(this,arguments)),Oe[Te]};return ue.cache={},ue},delay:Va,defer:us,throttle:function(F,J,ue){var ge,Oe,Te,Be,rt=0;ue||(ue={});var l=function(){rt=!1===ue.leading?0:Ui(),ge=null,Be=F.apply(Oe,Te),ge||(Oe=Te=null)},h=function(){var y=Ui();rt||!1!==ue.leading||(rt=y);var w=J-(y-rt);return Oe=this,Te=arguments,w<=0||w>J?(ge&&(clearTimeout(ge),ge=null),rt=y,Be=F.apply(Oe,Te),ge||(Oe=Te=null)):ge||!1===ue.trailing||(ge=setTimeout(l,w)),Be};return h.cancel=function(){clearTimeout(ge),rt=0,ge=Oe=Te=null},h},debounce:function(F,J,ue){var ge,Oe,Te,Be,rt,l=function(){var y=Ui()-Oe;J>y?ge=setTimeout(l,J-y):(ge=null,ue||(Be=F.apply(rt,Te)),ge||(Te=rt=null))},h=Y(function(y){return rt=this,Te=y,Oe=Ui(),ge||(ge=setTimeout(l,J),ue&&(Be=F.apply(rt,Te))),Be});return h.cancel=function(){clearTimeout(ge),ge=Te=rt=null},h},wrap:function(F,J){return Mo(J,F)},negate:$o,compose:function(){var F=arguments,J=F.length-1;return function(){for(var ue=J,ge=F[J].apply(this,arguments);ue--;)ge=F[ue].call(this,ge);return ge}},after:function(F,J){return function(){if(--F<1)return J.apply(this,arguments)}},before:ls,once:st,findKey:eo,findIndex:Vr,findLastIndex:ga,sortedIndex:yi,indexOf:xi,lastIndexOf:ko,find:mo,detect:mo,findWhere:function(F,J){return mo(F,ho(J))},each:Sr,forEach:Sr,map:_r,collect:_r,reduce:Un,foldl:Un,inject:Un,reduceRight:Wo,foldr:Wo,filter:Tr,select:Tr,reject:function(F,J,ue){return Tr(F,$o(Zr(J)),ue)},every:Lr,all:Lr,some:_n,any:_n,contains:kr,includes:kr,include:kr,invoke:Oo,pluck:va,where:function(F,J){return Tr(F,ho(J))},max:Lo,min:function(F,J,ue){var ge,Oe,Te=1/0,Be=1/0;if(null==J||"number"==typeof J&&"object"!=typeof F[0]&&null!=F)for(var rt=0,l=(F=zr(F)?F:gi(F)).length;rt<l;rt++)null!=(ge=F[rt])&&ge<Te&&(Te=ge);else J=Zr(J,ue),Sr(F,function(h,y,w){((Oe=J(h,y,w))<Be||Oe===1/0&&Te===1/0)&&(Te=h,Be=Oe)});return Te},shuffle:function(F){return Yo(F,1/0)},sample:Yo,sortBy:function(F,J,ue){var ge=0;return J=Zr(J,ue),va(_r(F,function(Oe,Te,Be){return{value:Oe,index:ge++,criteria:J(Oe,Te,Be)}}).sort(function(Oe,Te){var Be=Oe.criteria,rt=Te.criteria;if(Be!==rt){if(Be>rt||void 0===Be)return 1;if(Be<rt||void 0===rt)return-1}return Oe.index-Te.index}),"value")},groupBy:Xo,indexBy:Fs,countBy:Rs,partition:cs,toArray:Ha,size:function(F){return null==F?0:zr(F)?F.length:U(F).length},pick:Ns,omit:bi,first:Qo,head:Qo,take:Qo,initial:Ko,last:function(F,J,ue){return null==F||F.length<1?null==J||ue?void 0:[]:null==J||ue?F[F.length-1]:go(F,Math.max(0,F.length-J))},rest:go,tail:go,drop:go,compact:function(F){return Tr(F,Boolean)},flatten:function(F,J){return Ao(F,J,!1)},without:Er,uniq:Gi,unique:Gi,union:Dt,intersection:function(F){for(var J=[],ue=arguments.length,ge=0,Oe=tn(F);ge<Oe;ge++){var Te=F[ge];if(!kr(J,Te)){var Be;for(Be=1;Be<ue&&kr(arguments[Be],Te);Be++);Be===ue&&J.push(Te)}}return J},difference:za,unzip:Ci,transpose:Ci,zip:Gn,object:function(F,J){for(var ue={},ge=0,Oe=tn(F);ge<Oe;ge++)J?ue[F[ge]]=J[ge]:ue[F[ge][0]]=F[ge][1];return ue},range:function(F,J,ue){null==J&&(J=F||0,F=0),ue||(ue=J<F?-1:1);for(var ge=Math.max(Math.ceil((J-F)/ue),0),Oe=Array(ge),Te=0;Te<ge;Te++,F+=ue)Oe[Te]=F;return Oe},chunk:function(F,J){if(null==J||J<1)return[];for(var ue=[],ge=0,Oe=F.length;ge<Oe;)ue.push(_.call(F,ge,ge+=J));return ue},mixin:Ua,default:ye});return ds._=ds,ds}()}}]);