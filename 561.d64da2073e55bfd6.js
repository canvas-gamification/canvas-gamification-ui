(self.webpackChunkcanvas_gamification_ui=self.webpackChunkcanvas_gamification_ui||[]).push([[561],{14561:(E,W,f)=>{"use strict";f.r(W),f.d(W,{CourseModule:()=>Ov});var g={};f.r(g),f.d(g,{ellipseWithEllipse:()=>ma,ellipseWithLine:()=>Zr,exists:()=>wr,lineWithLine:()=>Sr,pathWithEllipse:()=>Xa,pathWithLine:()=>Ro,pathWithPath:()=>Ja,pathWithPolygon:()=>ba,pathWithPolyline:()=>Ka,pathWithRect:()=>_a,polygonWithEllipse:()=>go,polygonWithLine:()=>Ti,polygonWithPolygon:()=>ra,polygonWithPolyline:()=>xa,polygonWithRect:()=>ya,polylineWithEllipse:()=>Lo,polylineWithLine:()=>no,polylineWithPolyline:()=>ro,polylineWithRect:()=>qr,rectWithEllipse:()=>yi,rectWithLine:()=>na,rectWithRect:()=>Kr});var v={};f.r(v),f.d(v,{Curve:()=>qt,Ellipse:()=>Cr,Line:()=>yt,Path:()=>Pt,Point:()=>me,Polygon:()=>Hr,Polyline:()=>Vn,Rect:()=>gt,bezier:()=>ms,ellipse:()=>qo,intersection:()=>wa,line:()=>si,normalizeAngle:()=>We,point:()=>mi,random:()=>dn,rect:()=>vs,scale:()=>$e,snapToGrid:()=>pt,toDeg:()=>kt,toRad:()=>Lt,types:()=>Et});var S={};f.r(S),f.d(S,{absolute:()=>Sa,bottom:()=>pd,ellipse:()=>vd,ellipseSpread:()=>gd,fn:()=>Bo,left:()=>Gs,line:()=>fi,right:()=>ns,top:()=>xu});var T={};f.r(T),f.d(T,{bottom:()=>xd,inside:()=>sl,insideOriented:()=>bd,left:()=>yd,manual:()=>md,outside:()=>bc,outsideOriented:()=>_d,radial:()=>$s,radialOriented:()=>ul,right:()=>Wr,top:()=>di});var x={};f.r(x),f.d(x,{manhattan:()=>_l,metro:()=>Rd,normal:()=>os,oneSide:()=>Pd,orthogonal:()=>gl});var A={};f.r(A),f.d(A,{curve:()=>Ts,jumpover:()=>Tl,normal:()=>Vd,rounded:()=>El,smooth:()=>Rc});var O={};f.r(O),f.d(O,{addClass:()=>jc,mask:()=>Wi,opacity:()=>Ma,stroke:()=>Ol});var M={};f.r(M),f.d(M,{connectionClosest:()=>Gc,connectionLength:()=>zc,connectionPerpendicular:()=>Oa,connectionRatio:()=>Nu,resolveRef:()=>ss});var B={};f.r(B),f.d(B,{anchor:()=>Yc,bbox:()=>Xc,boundary:()=>jo,rectangle:()=>Ai});var H={};f.r(H),f.d(H,{bottom:()=>Yd,bottomLeft:()=>Zc,bottomRight:()=>qc,center:()=>Kc,left:()=>Qc,midSide:()=>ef,modelCenter:()=>zu,perpendicular:()=>ju,right:()=>Is,top:()=>Jc,topLeft:()=>eu,topRight:()=>Xd});var L=f(69808),Y=f(32205),ne=f(6741),ce=f(53696),i=f(5e3),se=f(23146),ge=f(83936),he=f(25635),q=f(93075),ye=f(9419),Ee=f(66206),Fe=f(99848);let b=(()=>{class e{transform(t,r){return t.is_teacher||r.is_registered}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.\u0275\u0275definePipe({name:"userHasCourseViewPermissions",type:e,pure:!0}),e})();function je(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",7),i.\u0275\u0275pipe(2,"userHasCourseViewPermissions"),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t)("hasViewPermission",i.\u0275\u0275pipeBind2(2,2,r.user,t))}}function tt(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,je,3,5,"ng-container",6),i.\u0275\u0275pipe(2,"tuiFilter"),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(2,1,t.allCourses,t.matchCourseName,t.courseNameSearch))}}function et(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-island",8),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("skeleton",!0))}const ot=function(){return[0,0,0,0,0,0]};function ut(e,n){1&e&&i.\u0275\u0275template(0,et,2,1,"ng-container",6),2&e&&i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(1,ot))}let mt=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.route=r,this.courseService=o,this.STATUS=ce.Q,this.courseNameSearch="",this.matchCourseName=(s,c)=>""===c||s.name.toLowerCase().includes(c.toLowerCase()),this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourses().subscribe(t=>{this.allCourses=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(ge.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-list"]],decls:9,vars:4,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_vertical-10"],["aria-label","Search Courses","icon","tuiIconSearchLarge",1,"tui-space_bottom-4",3,"ngModel","tuiTextfieldCleaner","ngModelChange"],[1,"course-islands"],[4,"ngIf","ngIfElse"],["skeletons",""],[4,"ngFor","ngForOf"],[3,"course","hasViewPermission"],[3,"skeleton"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2,"Course List"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"tui-input",2),i.\u0275\u0275listener("ngModelChange",function(s){return r.courseNameSearch=s}),i.\u0275\u0275text(4," Search Courses "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",3),i.\u0275\u0275template(6,tt,3,5,"ng-container",4),i.\u0275\u0275template(7,ut,1,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.courseNameSearch)("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.allCourses)("ngIfElse",o)}},directives:[he.K3,he.wU,q.NgControlStatus,q.NgModel,ye.be,L.O5,L.sg,Ee.V],pipes:[Fe.S,b],styles:[".course-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();class At{static createForm(){return(new q.FormBuilder).group({code:new q.FormControl("",[q.Validators.required])})}static extractData(n){return n.value}}var Xt=f(4024),un=f(769),Ot=f(46693),Xn=f(96063),Fr=f(8871);const ii=["stepper"];function _r(e,n){1&e&&i.\u0275\u0275element(0,"div",5)}function fr(e,n){1&e&&i.\u0275\u0275element(0,"div",6)}const Vr=function(e){return["/course",e]};function er(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",7),i.\u0275\u0275text(2," You are already registered in this course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8)(4,"a",9),i.\u0275\u0275text(5," Open Course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,Vr,t.courseId))}}function Ue(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",10),i.\u0275\u0275text(2," Registration has been blocked for you. Please contact your instructor. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function qe(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",11),i.\u0275\u0275text(2," If you don't have a verification code please contact your instructor to get one. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"form",12),i.\u0275\u0275listener("ngSubmit",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext(2).onSubmit()}),i.\u0275\u0275elementStart(4,"div",13)(5,"tui-input",14),i.\u0275\u0275text(6," Enter verification code\xa0"),i.\u0275\u0275element(7,"span",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",8)(10,"button",17),i.\u0275\u0275text(11," Register "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("formGroup",t.form),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiTextfieldCleaner",!0),i.\u0275\u0275advance(5),i.\u0275\u0275property("showLoader",t.loadingContent)}}function st(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",2),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,_r,1,0,"div",3),i.\u0275\u0275template(4,fr,1,0,"div",4),i.\u0275\u0275template(5,er,6,3,"ng-container",1),i.\u0275\u0275template(6,Ue,3,0,"ng-container",1),i.\u0275\u0275template(7,qe,12,3,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",t.showSkeletons)("tui-skeleton_text",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Registration for ",t.courseName," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.registered&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blocked&&!t.showSkeletons),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.registered&&!t.blocked&&!t.showSkeletons)}}function xt(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",18),i.\u0275\u0275element(2,"tui-marker-icon",19),i.\u0275\u0275elementStart(3,"h1",20),i.\u0275\u0275text(4," Unable to find the course for registration. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",21),i.\u0275\u0275text(6," Please try again later, or contact your course administrator. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementContainerEnd())}let Dt=(()=>{class e{constructor(t,r,o,s,c){this.route=t,this.router=r,this.courseService=o,this.changeDetector=s,this.notificationsService=c,this.registered=!1,this.blocked=!1,this.courseNotFound=!1,this.showSkeletons=!0,this.courseId=this.route.snapshot.params.courseId,this.loadingContent=!1}ngOnInit(){this.form=At.createForm(),this.getCourseName()}getCourseName(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.courseName=t.name,this.showSkeletons=!1,this.registered=t.course_reg.is_verified,this.blocked=t.course_reg.is_blocked,t.registration_mode===ce.J.OPEN&&this.onSubmit()},()=>{this.courseNotFound=!0,this.showSkeletons=!1})}onSubmit(){const t=At.extractData(this.form);this.loadingContent=!0,this.courseService.register(this.courseId,t).subscribe(()=>{this.notificationsService.show(`Successfully registered in ${this.courseName}`,{status:"success"}).subscribe(),this.router.navigate(["/course",this.courseId]).then(),this.loadingContent=!1},()=>this.loadingContent=!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(Xt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(ii,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.stepper=o.first)}},decls:3,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[4,"ngIf"],[1,"tui-text_h3","tui-space_vertical-10"],["class","course-registration_skeleton-notification tui-skeleton tui-space_bottom-7",4,"ngIf"],["class","course-registration_skeleton tui-skeleton",4,"ngIf"],[1,"course-registration_skeleton-notification","tui-skeleton","tui-space_bottom-7"],[1,"course-registration_skeleton","tui-skeleton"],["status","success"],[1,"tui-form__buttons"],["size","m","tuiButton","","type","button",1,"tui-form__button",3,"routerLink"],["status","error"],["status","info",1,"tui-space_bottom-7"],[3,"formGroup","ngSubmit"],[1,"tui-space_top-5"],["aria-label","Verification Code","formControlName","code",3,"tuiTextfieldCleaner"],[1,"tui-required"],["formControlName","code"],["aria-label","Register","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"showLoader"],[1,"course-registration_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4","tui-space_top-15"],[1,"tui-text_h6","tui-island_text-align_center"],[1,"tui-island__paragraph"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"section",0),i.\u0275\u0275template(1,st,8,10,"ng-container",1),i.\u0275\u0275template(2,xt,7,0,"ng-container",1),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.courseNotFound),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.courseNotFound))},directives:[L.O5,un.Ls,Ot.v0,ne.yS,q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,he.K3,he.wU,q.NgControlStatus,q.FormControlName,ye.be,Xn.y,Fr.B],styles:[".course-registration_skeleton[_ngcontent-%COMP%]{height:11rem;width:100%}.course-registration_skeleton-notification[_ngcontent-%COMP%]{height:3rem;width:100%}.course-registration_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();var sn=f(37080),Mt=f(58259),or=f(59695),Ni=f.n(or),ln=f(85510),Zt=f.n(ln),R=f(17489);const{round:G,floor:re,PI:xe}=Math,$e={linear:function(e,n,t){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]||0}},We=function(e){return e%360+(e<0?360:0)},pt=function(e,n){return n*G(e/n)},kt=function(e){return 180*e/xe%360},Lt=function(e,n){return(e=(n=n||!1)?e:e%360)*xe/180},dn=function(e,n){if(void 0===n)n=void 0===e?1:e,e=0;else if(n<e){const t=e;e=n,n=t}return re(Math.random()*(n-e+1)+e)},{cos:wn,sin:cn,atan2:ar}=Math,Jn=function(e,n){var t=Lt(e.y),r=Lt(n.y),c=Lt(n.x-e.x),p=cn(c)*wn(r),m=wn(t)*cn(r)-cn(t)*wn(r)*wn(c),_=kt(ar(p,m))-22.5;return _<0&&(_+=360),["NE","E","SE","S","SW","W","NW","N"][_=parseInt(_/45)]},oi=function(e,n){var t=e.x,r=e.y;return(t-=n.x)*t+(r-=n.y)*r},Fn=function(e,n){return Math.sqrt(oi(e,n))},Et={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Un,cos:tr,sin:br,sqrt:ai,min:pr,max:dr,atan2:Jo,round:za,pow:Mo,PI:Qo}=Math,me=function(e,n){if(!(this instanceof me))return new me(e,n);if("string"==typeof e){var t=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(t[0]),n=parseFloat(t[1])}else Object(e)===e&&(n=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===n?0:n};me.fromPolar=function(e,n,t){t=new me(t);var r=Un(e*tr(n)),o=Un(e*br(n)),s=We(kt(n));return s<90?o=-o:s<180?(r=-r,o=-o):s<270&&(r=-r),new me(t.x+r,t.y+o)},me.random=function(e,n,t,r){return new me(dn(e,n),dn(t,r))},me.prototype={type:Et.Point,chooseClosest:function(e){var n=e.length;if(1===n)return new me(e[0]);for(var t=null,r=1/0,o=0;o<n;o++){var s=new me(e[o]),c=this.squaredDistance(s);c<r&&(t=s,r=c)}return t},adhereToRect:function(e){return e.containsPoint(this)||(this.x=pr(dr(this.x,e.x),e.x+e.width),this.y=pr(dr(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,n){var t=this.equals(e)||this.equals(n)?NaN:this.theta(n)-this.theta(e);return t<0&&(t+=360),t},bearing:function(e){return Jn(this,e)},changeInAngle:function(e,n,t){return this.clone().offset(-e,-n).theta(t)-this.theta(t)},clone:function(){return new me(this)},cross:function(e,n){return e&&n?(n.x-this.x)*(e.y-this.y)-(n.y-this.y)*(e.x-this.x):NaN},difference:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),new me(this.x-(e||0),this.y-(n||0))},distance:function(e){return Fn(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,n){return new me((1-n)*this.x+n*e.x,(1-n)*this.y+n*e.y)},magnitude:function(){return ai(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Un(e.x-this.x)+Un(e.y-this.y)},move:function(e,n){var t=Lt(new me(e).theta(this));return this.offset(tr(t)*n,-br(t)*n)},normalize:function(e){var n=(e||1)/this.magnitude();return this.scale(n,n)},offset:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x+=e||0,this.y+=n||0,this},reflection:function(e){return new me(e).move(this,this.distance(e))},rotate:function(e,n){if(0===n)return this;e=e||new me(0,0),n=Lt(We(-n));var t=tr(n),r=br(n),s=r*(this.x-e.x)+t*(this.y-e.y)+e.y;return this.x=t*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=s,this},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=Mo(10,e)}return this.x=za(this.x*n)/n,this.y=za(this.y*n)/n,this},scale:function(e,n,t){return t=t&&new me(t)||new me(0,0),this.x=t.x+e*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this},snapToGrid:function(e,n){return this.x=pt(this.x,e),this.y=pt(this.y,n||e),this},squaredDistance:function(e){return oi(this,e)},theta:function(e){e=new me(e);var r=Jo(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*Qo+r),180*r/Qo},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new me(e)||new me(0,0);var n=this.x,t=this.y;return this.x=ai((n-e.x)*(n-e.x)+(t-e.y)*(t-e.y)),this.y=Lt(e.theta(new me(n,t))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,n){return Object(e)===e&&(n=e.y,e=e.x),this.x=e||0,this.y=n||0,this},vectorAngle:function(e){return new me(0,0).angleBetween(this,e)}},me.prototype.translate=me.prototype.offset;const mi=me,{max:co,min:Zo}=Math,yt=function(e,n){return this instanceof yt?e instanceof yt?new yt(e.start,e.end):(this.start=new me(e),void(this.end=new me(n))):new yt(e,n)};yt.prototype={type:Et.Line,angle:function(){var e=new me(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=Zo(this.start.x,this.end.x),n=Zo(this.start.y,this.end.y),t=co(this.start.x,this.end.x),r=co(this.start.y,this.end.y);return new gt(e,n,t-e,r-n)},bearing:function(){return Jn(this.start,this.end)},clone:function(){return new yt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var n=this.vector().dot(new yt(this.start,e).vector()),t=Zo(1,co(0,n/this.squaredLength()));return t!=t?0:t},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var n=this.start,t=this.end;if(0!==n.cross(e,t))return!1;var r=this.length();return!(new yt(n,e).length()>r||new yt(e,t).length()>r)},divideAt:function(e){var n=this.pointAt(e);return[new yt(this.start,n),new yt(n,this.end)]},divideAtLength:function(e){var n=this.pointAtLength(e);return[new yt(this.start,n),new yt(n,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,n){if(e&&e.intersectionWithLine){var t=e.intersectionWithLine(this,n);return t&&e instanceof yt&&(t=t[0]),t}return null},intersectionWithLine:function(e){var n=new me(this.end.x-this.start.x,this.end.y-this.start.y),t=new me(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*t.y-n.y*t.x,o=new me(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*t.y-o.y*t.x,c=o.x*n.y-o.y*n.x;if(0===r||s*r<0||c*r<0)return null;if(r>0){if(s>r||c>r)return null}else if(s<r||c<r)return null;return[new me(this.start.x+s*n.x/r,this.start.y+s*n.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Fn(this.start,this.end)},midpoint:function(){return new me((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const n=this.clone();if(!this.isDifferentiable())return n;const{start:t,end:r}=n,o=t.clone().rotate(r,270),s=r.clone().rotate(t,90);return t.move(s,e),r.move(o,e),n},pointAt:function(e){var n=this.start,t=this.end;return e<=0?n.clone():e>=1?t.clone():n.lerp(t,e)},pointAtLength:function(e){var n=this.start,t=this.end,r=!0;e<0&&(r=!1,e=-e);var o=this.length();return e>=o?r?t.clone():n.clone():this.pointAt((r?e:o-e)/o)},pointOffset:function(e){e=new me(e);var n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},rotate:function(e,n){return this.start.rotate(e,n),this.end.rotate(e,n),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.end.scale(e,n,t),this},setLength:function(e){var n=this.length();if(!n)return this;var t=e/n;return this.scale(t,t,this.start)},squaredLength:function(){return oi(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAt(e),o=new yt(n,t);return o.translate(r.x-n.x,r.y-n.y),o},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var n=this.start,t=this.end,r=this.pointAtLength(e),o=new yt(n,t);return o.translate(r.x-n.x,r.y-n.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,n){return this.start.translate(e,n),this.end.translate(e,n),this},vector:function(){return new me(this.end.x-this.start.x,this.end.y-this.start.y)}},yt.prototype.intersection=yt.prototype.intersect;const si=yt,{sqrt:Oo,round:ko,pow:fo}=Math,Cr=function(e,n,t){return this instanceof Cr?e instanceof Cr?new Cr(new me(e.x,e.y),e.a,e.b):(e=new me(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=t)):new Cr(e,n,t)};Cr.fromRect=function(e){return e=new gt(e),new Cr(e.center(),e.width/2,e.height/2)},Cr.prototype={type:Et.Ellipse,bbox:function(){return new gt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new me(this.x,this.y)},clone:function(){return new Cr(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.a+=2*e,this.b+=2*n,this},intersectionWithLine:function(e){var n=[],t=e.start,r=e.end,o=this.a,s=this.b,c=e.vector(),p=t.difference(new me(this)),m=new me(c.x/(o*o),c.y/(s*s)),w=new me(p.x/(o*o),p.y/(s*s)),I=c.dot(m),_=c.dot(w),te=_*_-I*(p.dot(w)-1);if(te<0)return null;if(te>0){var oe=Oo(te),Se=(-_-oe)/I,Pe=(-_+oe)/I;if((Se<0||1<Se)&&(Pe<0||1<Pe))return null;0<=Se&&Se<=1&&n.push(t.lerp(r,Se)),0<=Pe&&Pe<=1&&n.push(t.lerp(r,Pe))}else{var Ve=-_/I;if(!(0<=Ve&&Ve<=1))return null;n.push(t.lerp(r,Ve))}return n},intersectionWithLineFromCenterToPoint:function(e,n){e=new me(e),n&&e.rotate(new me(this.x,this.y),n);var o,t=e.x-this.x,r=e.y-this.y;if(0===t)return o=this.bbox().pointNearestToPoint(e),n?o.rotate(new me(this.x,this.y),-n):o;var s=r/t,w=Oo(1/(1/(this.a*this.a)+s*s/(this.b*this.b)));return o=new me(this.x+(w=t<0?-w:w),this.y+s*w),n?o.rotate(new me(this.x,this.y),-n):o},normalizedDistance:function(e){var n=e.x,t=e.y,r=this.a,o=this.b,s=this.x,c=this.y;return(n-s)*(n-s)/(r*r)+(t-c)*(t-c)/(o*o)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=fo(10,e)}return this.x=ko(this.x*n)/n,this.y=ko(this.y*n)/n,this.a=ko(this.a*n)/n,this.b=ko(this.b*n)/n,this},tangentTheta:function(e){var _,U,t=e.x,r=e.y,o=this.a,s=this.b,c=this.bbox().center(),p=c.x,m=c.y;return t>c.x+o/2||t<c.x-o/2?U=o*o/(t-p)-o*o*(r-m)*((_=t>c.x?r-30:r+30)-m)/(s*s*(t-p))+p:_=s*s/(r-m)-s*s*(t-p)*((U=r>c.y?t+30:t-30)-p)/(o*o*(r-m))+m,new me(U,_).theta(e)},toString:function(){return new me(this.x,this.y).toString()+" "+this.a+" "+this.b}};const qo=Cr,{abs:Br,cos:Ua,sin:Ga,min:Yr,max:ga,round:ho,pow:va}=Math,gt=function(e,n,t,r){if(!(this instanceof gt))return new gt(e,n,t,r);Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===n?0:n,this.width=void 0===t?0:t,this.height=void 0===r?0:r};gt.fromEllipse=function(e){return e=new Cr(e),new gt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},gt.fromPointUnion=function(...e){if(0===e.length)return null;const n=new me;let t,r,o,s;t=r=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const p=n.x,m=n.y;p<t&&(t=p),p>o&&(o=p),m<r&&(r=m),m>s&&(s=m)}return new gt(t,r,o-t,s-r)},gt.fromRectUnion=function(...e){if(0===e.length)return null;const n=new gt;let t,r,o,s;t=r=1/0,o=s=-1/0;for(let c=0;c<e.length;c++){n.update(e[c]);const p=n.x,m=n.y,w=p+n.width,I=m+n.height;p<t&&(t=p),w>o&&(o=w),m<r&&(r=m),I>s&&(s=I)}return new gt(t,r,o-t,s-r)},gt.prototype={type:Et.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:n,height:t}=this,r=Lt(e),o=Br(Ga(r)),s=Br(Ua(r)),c=n*s+t*o,p=n*o+t*s;return this.x+=(n-c)/2,this.y+=(t-p)/2,this.width=c,this.height=p,this},bottomLeft:function(){return new me(this.x,this.y+this.height)},bottomLine:function(){return new yt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new me(this.x+this.width/2,this.y+this.height)},center:function(){return new me(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new gt(this)},containsPoint:function(e){return(e=new me(e)).x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var n=new gt(this).normalize(),t=new gt(e).normalize(),r=n.width,o=n.height,s=t.width,c=t.height;if(!(r&&o&&s&&c))return!1;var p=n.x,m=n.y,w=t.x,I=t.y;return s+=w,r+=p,c+=I,o+=m,p<=w&&s<=r&&m<=I&&c<=o},corner:function(){return new me(this.x+this.width,this.y+this.height)},equals:function(e){var n=new gt(this).normalize(),t=new gt(e).normalize();return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height},inflate:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=e),this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this},intersect:function(e){var n=this.origin(),t=this.corner(),r=e.origin(),o=e.corner();if(o.x<=n.x||o.y<=n.y||r.x>=t.x||r.y>=t.y)return null;var s=ga(n.x,r.x),c=ga(n.y,r.y);return new gt(s,c,Yr(t.x,o.x)-s,Yr(t.y,o.y)-c)},intersectionWithLine:function(e){var s,c,n=this,t=[n.topLine(),n.rightLine(),n.bottomLine(),n.leftLine()],r=[],o=[],p=t.length;for(c=0;c<p;c++)null!==(s=e.intersect(t[c]))&&o.indexOf(s.toString())<0&&(r.push(s),o.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,n){e=new me(e);var r,t=new me(this.x+this.width/2,this.y+this.height/2);n&&e.rotate(t,n);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new yt(t,e),c=o.length-1;c>=0;--c){var p=o[c].intersection(s);if(null!==p){r=p;break}}return r&&n&&r.rotate(t,-n),r},leftLine:function(){return new yt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new me(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,n){e=new gt(e),n||(n=e.center());var t,r,o,s,c,p,m,w,I=n.x,_=n.y;t=r=o=s=c=p=m=w=1/0;var U=e.topLeft();U.x<I&&(t=(this.x-I)/(U.x-I)),U.y<_&&(c=(this.y-_)/(U.y-_));var te=e.bottomRight();te.x>I&&(r=(this.x+this.width-I)/(te.x-I)),te.y>_&&(p=(this.y+this.height-_)/(te.y-_));var oe=e.topRight();oe.x>I&&(o=(this.x+this.width-I)/(oe.x-I)),oe.y<_&&(m=(this.y-_)/(oe.y-_));var Se=e.bottomLeft();return Se.x<I&&(s=(this.x-I)/(Se.x-I)),Se.y>_&&(w=(this.y+this.height-_)/(Se.y-_)),{sx:Yr(t,r,o,s),sy:Yr(c,p,m,w)}},maxRectUniformScaleToFit:function(e,n){var t=this.maxRectScaleToFit(e,n);return Yr(t.sx,t.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,n=this.y,t=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,t=-this.width),this.height<0&&(n=this.y+this.height,r=-this.height),this.x=e,this.y=n,this.width=t,this.height=r,this},offset:function(e,n){return me.prototype.offset.call(this,e,n)},origin:function(){return new me(this.x,this.y)},pointNearestToPoint:function(e){if(e=new me(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new me(this.x+this.width,e.y);case"left":return new me(this.x,e.y);case"bottom":return new me(e.x,this.y+this.height);case"top":return new me(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new yt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new me(this.x+this.width,this.y+this.height/2)},round:function(e){let n=1;if(e)switch(e){case 1:n=10;break;case 2:n=100;break;case 3:n=1e3;break;default:n=va(10,e)}return this.x=ho(this.x*n)/n,this.y=ho(this.y*n)/n,this.width=ho(this.width*n)/n,this.height=ho(this.height*n)/n,this},scale:function(e,n,t){return t=this.origin().scale(e,n,t),this.x=t.x,this.y=t.y,this.width*=e,this.height*=n,this},sideNearestToPoint:function(e){e=new me(e);var t=this.x+this.width-e.x,r=e.y-this.y,s=e.x-this.x,c="left";return t<s&&(s=t,c="right"),r<s&&(s=r,c="top"),this.y+this.height-e.y<s&&(c="bottom"),c},snapToGrid:function(e,n){var t=this.origin().snapToGrid(e,n),r=this.corner().snapToGrid(e,n);return this.x=t.x,this.y=t.y,this.width=r.x-t.x,this.height=r.y-t.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new yt(this.topLeft(),this.topRight())},topMiddle:function(){return new me(this.x+this.width/2,this.y)},topRight:function(){return new me(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return gt.fromRectUnion(this,e)},update:function(e,n,t,r){return Object(e)===e&&(n=e.y,t=e.width,r=e.height,e=e.x),this.x=e||0,this.y=n||0,this.width=t||0,this.height=r||0,this}},gt.prototype.bottomRight=gt.prototype.corner,gt.prototype.topLeft=gt.prototype.origin,gt.prototype.translate=gt.prototype.offset;const vs=gt;function Ki(e){if(""===(e=e.trim()))return[];const n=[],t=e.split(/\s*,\s*|\s+/),r=t.length;for(let o=0;o<r;o+=2)n.push({x:+t[o],y:+t[o+1]});return n}function Wa(e){const n=e.length;if(0===n)return[];const t=[];for(let r=0;r<n;r++){const o=e[r].clone();t.push(o)}return t}function $a(e){const{abs:n}=Math;var t,r,s,o=e.length;if(0===o)return[];for(t=0;t<o;t++)(void 0===s||e[t].y<s.y||e[t].y===s.y&&e[t].x>s.x)&&(s=e[t]);var c=[];for(t=0;t<o;t++){var p=s.theta(e[t]);0===p&&(p=360),c.push([e[t],t,p])}c.sort(function(ht,bt){var Ct=ht[2]-bt[2];return 0===Ct&&(Ct=bt[1]-ht[1]),Ct}),c.length>2&&c.unshift(c[c.length-1]);for(var U,te,oe,Se,Pe,Ve,I={},_=[];0!==c.length;)if(te=(U=c.pop())[0],!I.hasOwnProperty(U[0]+"@@"+U[1]))for(var Ne=!1;!Ne;)if(_.length<2)_.push(U),Ne=!0;else{Se=(oe=_.pop())[0];var k=(Ve=(Pe=_.pop())[0]).cross(Se,te);if(k<0)_.push(Pe),_.push(oe),_.push(U),Ne=!0;else if(0===k){var K=Se.angleBetween(Ve,te);n(K-180)<1e-10||Se.equals(te)||Ve.equals(Se)?(I[oe[0]+"@@"+oe[1]]=Se,_.push(Pe)):n((K+1)%360-1)<1e-10&&(_.push(Pe),c.push(oe))}else I[oe[0]+"@@"+oe[1]]=Se,_.push(Pe)}_.length>2&&_.pop();var ie,ve=-1;for(r=_.length,t=0;t<r;t++){var Ae=_[t][1];(void 0===ie||Ae<ie)&&(ie=Ae,ve=t)}var ke=[];if(ve>0){var ze=_.slice(ve),at=_.slice(0,ve);ke=ze.concat(at)}else ke=_;var nt=[];for(r=ke.length,t=0;t<r;t++)nt.push(ke[t][0]);return nt}const Vn=function(e){return this instanceof Vn?"string"==typeof e?new Vn.parse(e):void(this.points=Array.isArray(e)?e.map(me):[]):new Vn(e)};Vn.parse=function(e){return new Vn(Ki(e))},Vn.fromRect=function(e){return new Vn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},Vn.prototype={type:Et.Polyline,bbox:function(){var e=1/0,n=-1/0,t=1/0,r=-1/0,o=this.points,s=o.length;if(0===s)return null;for(var c=0;c<s;c++){var p=o[c],m=p.x,w=p.y;m<e&&(e=m),m>n&&(n=m),w<t&&(t=w),w>r&&(r=w)}return new gt(e,t,n-e,r-t)},clone:function(){return new Vn(Wa(this.points))},closestPoint:function(e){var n=this.closestPointLength(e);return this.pointAtLength(n)},closestPointLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return 0;for(var r,o=1/0,s=0,c=t-1,p=0;p<c;p++){var m=new yt(n[p],n[p+1]),w=m.length(),I=m.closestPointNormalizedLength(e),U=m.pointAt(I).squaredDistance(e);U<o&&(o=U,r=s+I*w),s+=w}return r},closestPointNormalizedLength:function(e){var n=this.closestPointLength(e);if(0===n)return 0;var t=this.length();return 0===t?0:n/t},closestPointTangent:function(e){var n=this.closestPointLength(e);return this.tangentAtLength(n)},containsPoint:function(e){var n=this.points,t=n.length;if(0===t)return!1;for(var r=e.x,o=e.y,s=t-1,c=0,p=0,m=new yt,w=new yt,I=new me;c<t;c++){var _=n[s],U=n[c];if(e.equals(_)||(m.start=_,m.end=U,m.containsPoint(e)))return!0;if(o<=_.y&&o>U.y||o>_.y&&o<=U.y){var te=_.x-r>U.x-r?_.x-r:U.x-r;te>=0&&(I.x=r+te,I.y=o,w.start=e,w.end=I,m.intersect(w)&&p++)}s=c}return p%2==1},close:function(){const{start:e,end:n,points:t}=this;return e&&n&&!e.equals(n)&&t.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Vn($a(this.points))},equals:function(e){if(!e)return!1;var n=this.points,r=n.length;if(e.points.length!==r)return!1;for(var o=0;o<r;o++)if(!n[o].equals(e.points[o]))return!1;return!0},intersectionWithLine:function(e){for(var n=new yt(e),t=[],r=this.lengthPoints(),o=new yt,s=0,c=r.length-1;s<c;s++){o.start=r[s],o.end=r[s+1];var p=n.intersectionWithLine(o);p&&t.push(p[0])}return t.length>0?t:null},isDifferentiable:function(){var e=this.points,n=e.length;if(0===n)return!1;for(var t=new yt,r=n-1,o=0;o<r;o++)if(t.start=e[o],t.end=e[o+1],t.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),n=e.length;if(0===n)return 0;for(var t=0,r=n-1,o=0;o<r;o++)t+=e[o].distance(e[o+1]);return t},pointAt:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t||e<=0)return n[0].clone();if(e>=1)return n[t-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t)return null;if(1===t)return n[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var o=0,s=t-1,c=0;c<s;c++){var p=r?c:s-1-c,m=n[p],w=n[p+1],I=new yt(m,w),_=m.distance(w);if(e<=o+_)return I.pointAtLength((r?1:-1)*(e-o));o+=_}return(r?n[t-1]:n[0]).clone()},round:function(e){for(var n=this.points,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.points,o=r.length,s=0;s<o;s++)r[s].scale(e,n,t);return this},simplify:function(e={}){const n=this.points;if(n.length<3)return this;const t=e.threshold||0;let r=0;for(;n[r+2];){const s=r+1,m=n[s];new yt(n[r],n[r+2]).closestPoint(m).distance(m)<=t?n.splice(s,1):r+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var n=this.lengthPoints(),t=n.length;if(0===t||1===t)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o,s=0,c=t-1,p=0;p<c;p++){var m=r?p:c-1-p,w=n[m],I=n[m+1],_=new yt(w,I),U=w.distance(I);if(_.isDifferentiable()){if(e<=s+U)return _.tangentAtLength((r?1:-1)*(e-s));o=_}s+=U}return o?o.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,n){for(var t=this.points,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},serialize:function(){var e=this.points,n=e.length;if(0===n)return"";for(var t="",r=0;r<n;r++){var o=e[r];t+=o.x+","+o.y+" "}return t.trim()}},Object.defineProperty(Vn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Vn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var n=this.points.length;return 0===n?null:this.points[n-1]}});const{abs:ea,sqrt:js,min:Ji,max:po,pow:Qi}=Math,qt=function(e,n,t,r){return this instanceof qt?e instanceof qt?new qt(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new me(e),this.controlPoint1=new me(n),this.controlPoint2=new me(t),void(this.end=new me(r))):new qt(e,n,t,r)};function ui(e){var n,t,r=[];for(t=arguments.length,n=1;n<t;n++)r.push(arguments[n]);if(!e)throw new Error("Missing a parent object.");var o=Object.create(e);for(t=r.length,n=0;n<t;n++){var c,p,s=r[n];for(p in s)s.hasOwnProperty(p)&&(delete o[p],c=Object.getOwnPropertyDescriptor(s,p),Object.defineProperty(o,p,c))}return o}qt.throughPoints=function(){function n(t){var r=t.length,o=[],s=[],c=2;o[0]=t[0]/c;for(var p=1;p<r;p++)s[p]=1/c,o[p]=(t[p]-o[p-1])/(c=(p<r-1?4:3.5)-s[p]);for(p=1;p<r;p++)o[r-p-1]-=s[r-p]*o[r-p];return o}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function e(t){var c,r=[],o=[],s=t.length-1;if(1==s)return r[0]=new me((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new me(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,o];var p=[];for(c=1;c<s-1;c++)p[c]=4*t[c].x+2*t[c+1].x;p[0]=t[0].x+2*t[1].x,p[s-1]=(8*t[s-1].x+t[s].x)/2;var m=n(p);for(c=1;c<s-1;++c)p[c]=4*t[c].y+2*t[c+1].y;p[0]=t[0].y+2*t[1].y,p[s-1]=(8*t[s-1].y+t[s].y)/2;var w=n(p);for(c=0;c<s;c++)r.push(new me(m[c],w[c])),o.push(c<s-1?new me(2*t[c+1].x-m[c+1],2*t[c+1].y-w[c+1]):new me((t[s].x+m[s-1])/2,(t[s].y+w[s-1])/2));return[r,o]}(t),o=[],s=r[0].length,c=0;c<s;c++){var p=new me(r[0][c].x,r[0][c].y),m=new me(r[1][c].x,r[1][c].y);o.push(new qt(t[c],p,m,t[c+1]))}return o}}(),qt.prototype={type:Et.Curve,bbox:function(){for(var Se,Pe,Ve,Ne,k,z,K,ie,e=this.start,n=this.controlPoint1,t=this.controlPoint2,r=this.end,o=e.x,s=e.y,c=n.x,p=n.y,m=t.x,w=t.y,I=r.x,_=r.y,U=new Array,te=new Array,oe=[new Array,new Array],ve=0;ve<2;++ve)if(0===ve?(Pe=6*o-12*c+6*m,Se=-3*o+9*c-9*m+3*I,Ve=3*c-3*o):(Pe=6*s-12*p+6*w,Se=-3*s+9*p-9*w+3*_,Ve=3*p-3*s),ea(Se)<1e-12){if(ea(Pe)<1e-12)continue;0<(Ne=-Ve/Pe)&&Ne<1&&te.push(Ne)}else ie=js(K=Pe*Pe-4*Ve*Se),!(K<0)&&(0<(k=(-Pe+ie)/(2*Se))&&k<1&&te.push(k),0<(z=(-Pe-ie)/(2*Se))&&z<1&&te.push(z));for(var ze,at,nt,Ae=te.length,ke=Ae;Ae--;)oe[0][Ae]=at=(ze=1-(Ne=te[Ae]))*ze*ze*o+3*ze*ze*Ne*c+3*ze*Ne*Ne*m+Ne*Ne*Ne*I,oe[1][Ae]=nt=ze*ze*ze*s+3*ze*ze*Ne*p+3*ze*Ne*Ne*w+Ne*Ne*Ne*_,U[Ae]={X:at,Y:nt};te[ke]=0,te[ke+1]=1,U[ke]={X:o,Y:s},U[ke+1]={X:I,Y:_},oe[0][ke]=o,oe[1][ke]=s,oe[0][ke+1]=I,oe[1][ke+1]=_,te.length=ke+2,oe[0].length=ke+2,oe[1].length=ke+2,U.length=ke+2;var ht=Ji.apply(null,oe[0]),bt=Ji.apply(null,oe[1]),Ct=po.apply(null,oe[0]),Ht=po.apply(null,oe[1]);return new gt(ht,bt,Ct-ht,Ht-bt)},clone:function(){return new qt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,n){return this.pointAtT(this.closestPointT(e,n))},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions};return this.lengthAtT(this.closestPointT(e,o),o)},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.closestPointLength(e,o);if(!s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){for(var o,s,c,p,m,w,I,t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,r=void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions,_=r.length,U=_?1/_:0,te=0;te<_;te++){var oe=r[te],Se=oe.start.distance(e),Pe=oe.end.distance(e),Ve=Se+Pe;(!I||Ve<I)&&(o=oe,s=te*U,c=(te+1)*U,p=Se,m=Pe,w=oe.start.distance(oe.end),I=Ve)}for(var Ne=Qi(10,-t);;){var k=p?ea(p-m)/p:0,z=m?ea(p-m)/m:0;if(k<Ne||z<Ne||!p||p<w*Ne||!m||m<w*Ne)return p<=m?s:c;var ke=o.divide(.5);U/=2;var ze=ke[0].start.distance(e),at=ke[0].end.distance(e),nt=ze+at,ht=ke[1].start.distance(e),bt=ke[1].end.distance(e);nt<=ht+bt?(o=ke[0],c-=U,p=ze,m=at):(o=ke[1],s+=U,p=ht,m=bt)}},closestPointTangent:function(e,n){return this.tangentAtT(this.closestPointT(e,n))},containsPoint:function(e,n){return this.toPolyline(n).containsPoint(e)},divideAt:function(e,n){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var t=this.tAt(e,n);return this.divideAtT(t)},divideAtLength:function(e,n){var t=this.tAtLength(e,n);return this.divideAtT(t)},divideAtT:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return[new qt(n,n,n,n),new qt(n,t,r,o)];if(e>=1)return[new qt(n,t,r,o),new qt(o,o,o,o)];var s=this.getSkeletonPoints(e),m=s.divider,w=s.dividerControlPoint1,I=s.dividerControlPoint2;return[new qt(n,s.startControlPoint1,s.startControlPoint2,m),new qt(m,w,I,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var n=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;if(e<=0)return{startControlPoint1:n.clone(),startControlPoint2:n.clone(),divider:n.clone(),dividerControlPoint1:t.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:t.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var s=new yt(n,t).pointAt(e),c=new yt(t,r).pointAt(e),p=new yt(r,o).pointAt(e),m=new yt(s,c).pointAt(e),w=new yt(c,p).pointAt(e);return{startControlPoint1:s,startControlPoint2:m,divider:new yt(m,w).pointAt(e),dividerControlPoint1:w,dividerControlPoint2:p}},getSubdivisions:function(e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,t=[new qt(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===n)return t;for(var r=this.endpointDistance(),o=Qi(10,-n),s=0;;){s+=1;for(var c=[],p=t.length,m=0;m<p;m++){var I=t[m].divide(.5);c.push(I[0],I[1])}for(var _=0,U=c.length,te=0;te<U;te++)_+=c[te].endpointDistance();if(s>1&&(0!==_?(_-r)/_:0)<o)return c;t=c,r=_}},isDifferentiable:function(){var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},length:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,o=t.length,s=0;s<o;s++)r+=t[s].endpointDistance();return r},lengthAtT:function(e,n){if(e<=0)return 0;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision;return this.divide(e)[0].length({precision:t})},pointAt:function(e,n){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var t=this.tAt(e,n);return this.pointAtT(t)},pointAtLength:function(e,n){var t=this.tAtLength(e,n);return this.pointAtT(t)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.start.scale(e,n,t),this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},tangentAt:function(e,n){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.tAt(e,n);return this.tangentAtT(t)},tangentAtLength:function(e,n){if(!this.isDifferentiable())return null;var t=this.tAtLength(e,n);return this.tangentAtT(t)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.getSkeletonPoints(e),t=n.startControlPoint2,o=n.divider,s=new yt(t,n.dividerControlPoint1);return s.translate(o.x-t.x,o.y-t.y),s},tAt:function(e,n){if(e<=0)return 0;if(e>=1)return 1;var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,subdivisions:void 0===n.subdivisions?this.getSubdivisions({precision:t}):n.subdivisions},s=this.length(o);return this.tAtLength(s*e,o)},tAtLength:function(e,n){var t=!0;e<0&&(t=!1,e=-e);for(var c,p,m,w,I,r=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o=void 0===n.subdivisions?this.getSubdivisions({precision:r}):n.subdivisions,s={precision:r,subdivisions:o},_=0,U=o.length,te=1/U,oe=0;oe<U;oe++){var Se=t?oe:U-1-oe,Pe=o[oe],Ve=Pe.endpointDistance();if(e<=_+Ve){c=Pe,p=Se*te,m=(Se+1)*te,w=t?e-_:Ve+_-e,I=t?Ve+_-e:e-_;break}_+=Ve}if(!c)return t?1:0;for(var Ne=this.length(s),k=Qi(10,-r);;){if((0!==Ne?w/Ne:0)<k)return p;if((0!==Ne?I/Ne:0)<k)return m;var K,ie,ve=c.divide(.5);te/=2;var Ae=ve[0].endpointDistance(),ke=ve[1].endpointDistance();w<=Ae?(c=ve[0],m-=te,ie=Ae-(K=w)):(c=ve[1],p+=te,ie=ke-(K=w-Ae)),w=K,I=ie}},toPoints:function(e){for(var t=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[t[0].start.clone()],o=t.length,s=0;s<o;s++)r.push(t[s].end.clone());return r},toPolyline:function(e){return new Vn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.start.translate(e,n),this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}},qt.prototype.divide=qt.prototype.divideAtT;const Pt=function(e){if(!(this instanceof Pt))return new Pt(e);if("string"==typeof e)return new Pt.parse(e);var n,t;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(t=(e=e.reduce(function(p,m){return p.concat(m)},[])).length,e[0].isSegment)for(n=0;n<t;n++)this.appendSegment(e[n]);else{var o=null;for(n=0;n<t;n++){var s=e[n];if(!(s instanceof yt||s instanceof qt))throw new Error("Cannot construct a path segment from the provided object.");0===n&&this.appendSegment(Pt.createSegment("M",s.start)),o&&!o.end.equals(s.start)&&this.appendSegment(Pt.createSegment("M",s.start)),s instanceof yt?this.appendSegment(Pt.createSegment("L",s.end)):s instanceof qt&&this.appendSegment(Pt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),o=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof yt)this.appendSegment(Pt.createSegment("M",e.start)),this.appendSegment(Pt.createSegment("L",e.end));else if(e instanceof qt)this.appendSegment(Pt.createSegment("M",e.start)),this.appendSegment(Pt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof Vn))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(t=e.points.length,n=0;n<t;n++){this.appendSegment(Pt.createSegment(0===n?"M":"L",e.points[n]))}}};function Xr(e,n){return n.unshift(null),new(Function.prototype.bind.apply(e,n))}Pt.parse=function(e){if(!e)return new Pt;for(var n=new Pt,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),o=r.length,s=0;s<o;s++){var m=r[s].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),w=Pt.createSegment.apply(this,m);n.appendSegment(w)}return n},Pt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var n=Pt.segmentTypes[e];if(!n)throw new Error(e+" is not a recognized path segment type.");for(var t=[],r=arguments.length,o=1;o<r;o++)t.push(arguments[o]);return Xr(n,t)},Pt.prototype={type:Et.Path,appendSegment:function(e){var r,n=this.segments,t=n.length,o=0!==t?n[t-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(w,I){return w.concat(I)},[]))[0].isSegment)throw new Error("Segments required.");for(var c=e.length,p=0;p<c;p++)r=this.prepareSegment(e[p],o,null),n.push(r),o=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,o,null),n.push(r)}},bbox:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t,r=0;r<n;r++){var o=e[r];if(o.isVisible){var s=o.bbox();t=t?t.union(s):s}}if(t)return t;var c=e[n-1];return new gt(c.end.x,c.end.y,0,0)},clone:function(){for(var e=this.segments,n=e.length,t=new Pt,r=0;r<n;r++){var o=e[r].clone();t.appendSegment(o)}return t},closestPoint:function(e,n){var t=this.closestPointT(e,n);return t?this.pointAtT(t):null},closestPointLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointT(e,o);return s?this.lengthAtT(s,o):0},closestPointNormalizedLength:function(e,n){var t=void 0===(n=n||{}).precision?this.PRECISION:n.precision,o={precision:t,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:t}):n.segmentSubdivisions},s=this.closestPointLength(e,o);if(0===s)return 0;var c=this.length(o);return 0===c?0:s/c},closestPointT:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,p=1/0,m=0;m<r;m++){var w=t[m];if(w.isVisible){var _=w.closestPointT(e,{precision:o,subdivisions:s[m]}),U=w.pointAtT(_),te=new yt(U,e).squaredLength();te<p&&(c={segmentIndex:m,value:_},p=te)}}return c||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;for(var c,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,p=1/0,m=0;m<r;m++){var w=t[m],I=s[m];if(w.isDifferentiable()){var _=w.closestPointT(e,{precision:o,subdivisions:I}),U=w.pointAtT(_),te=new yt(U,e).squaredLength();te<p&&(c=w.tangentAtT(_),p=te)}}return c||null},containsPoint:function(e,n){var t=this.toPolylines(n);if(!t)return!1;for(var r=t.length,o=0,s=0;s<r;s++)t[s].containsPoint(e)&&o++;return o%2==1},divideAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.divideAtLength(p*e,c)},divideAtLength:function(e,n){var t=this.segments.length;if(0===t)return null;var r=!0;e<0&&(r=!1,e=-e);var c,p,w,I,_,U,o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,s=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions,m=0;for(c=0;c<t;c++){var oe=r?c:t-1-c;p=this.getSegment(oe);var Se=s[oe],Pe=p.length({precision:o,subdivisions:Se});if(p.isDifferentiable()&&(_=p,U=oe,e<=m+Pe)){I=oe,w=p.divideAtLength((r?1:-1)*(e-m),{precision:o,subdivisions:Se});break}m+=Pe}if(!_)return null;w||(I=U,w=_.divideAtT(r?1:0));var Ve=this.clone();Ve.replaceSegment(I,w);var Ne=I,k=I+1,z=I+2;w[0].isDifferentiable()||(Ve.removeSegment(Ne),k-=1,z-=1);var K=Ve.getSegment(k).start;Ve.insertSegment(k,Pt.createSegment("M",K)),z+=1,w[1].isDifferentiable()||(Ve.removeSegment(z-1),z-=1);var ie=z-Ne-1;for(c=z;c<Ve.segments.length;c++){var ve=this.getSegment(c-ie);if("Z"===(p=Ve.getSegment(c)).type&&!ve.subpathStartSegment.end.equals(p.subpathStartSegment.end)){var Ae=Pt.createSegment("L",ve.end);Ve.replaceSegment(c,Ae)}}return[new Pt(Ve.segments.slice(0,k)),new Pt(Ve.segments.slice(k))]},equals:function(e){if(!e)return!1;var n=this.segments,t=e.segments,r=n.length;if(t.length!==r)return!1;for(var o=0;o<r;o++){var s=n[o],c=t[o];if(s.type!==c.type||!s.equals(c))return!1}return!0},getSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");return n[e]},getSegmentSubdivisions:function(e){for(var n=this.segments,t=n.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,o=[],s=0;s<t;s++){var p=n[s].getSubdivisions({precision:r});o.push(p)}return o},getSubpaths:function(){const n=this.clone().validate().segments,t=n.length,r=[];for(let o=0;o<t;o++){const s=n[o];s.isSubpathStart?r.push(new Pt(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(e,n){var t=this.segments,r=t.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var o,s=null,c=null;if(0!==r&&(c=e>=1?(s=t[e-1]).nextSegment:t[0]),Array.isArray(n)){if(!(n=n.reduce(function(I,_){return I.concat(_)},[]))[0].isSegment)throw new Error("Segments required.");for(var p=n.length,m=0;m<p;m++)o=this.prepareSegment(n[m],s,c),t.splice(e+m,0,o),s=o}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,s,c),t.splice(e,0,o)}},intersectionWithLine:function(e,n){var t=null,r=this.toPolylines(n);if(!r)return null;for(var o=0,s=r.length;o<s;o++){var p=e.intersect(r[o]);p&&(t||(t=[]),Array.isArray(p)?Array.prototype.push.apply(t,p):t.push(p))}return t},isDifferentiable:function(){for(var e=this.segments,n=e.length,t=0;t<n;t++)if(e[t].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var n=this.segments,t=n.length;if(0===t)return 0;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=0,c=0;c<t;c++)s+=n[c].length({subdivisions:o[c]});return s},lengthAtT:function(e,n){var t=this.segments,r=t.length;if(0===r)return 0;var o=e.segmentIndex;if(o<0)return 0;var s=e.value;o>=r?(o=r-1,s=1):s<0?s=0:s>1&&(s=1);for(var c=void 0===(n=n||{}).precision?this.PRECISION:n.precision,p=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:c}):n.segmentSubdivisions,w=0,I=0;I<o;I++){var _=t[I];w+=_.length({precisison:c,subdivisions:p[I]})}return w+(_=t[o]).lengthAtT(s,{precisison:c,subdivisions:p[o]})},pointAt:function(e,n){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.pointAtLength(p*e,c)},pointAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;if(0===e)return this.start.clone();var o=!0;e<0&&(o=!1,e=-e);for(var p,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,m=0,w=0;w<r;w++){var I=o?w:r-1-w,_=t[I],U=c[I],te=_.length({precision:s,subdivisions:U});if(_.isVisible){if(e<=m+te)return _.pointAtLength((o?1:-1)*(e-m),{precision:s,subdivisions:U});p=_}m+=te}return p?o?p.end:p.start:t[r-1].end.clone()},pointAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].pointAtT(0);if(r>=t)return n[t-1].pointAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].pointAtT(o)},PRECISION:3,prepareSegment:function(e,n,t){e.previousSegment=n,e.nextSegment=t,n&&(n.nextSegment=e),t&&(t.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=t),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var n=this.segments,t=n.length;if(0===t)throw new Error("Path has no segments.");if(e<0&&(e=t+e),e>=t||e<0)throw new Error("Index out of range.");var r=n.splice(e,1)[0],o=r.previousSegment,s=r.nextSegment;o&&(o.nextSegment=s),s&&(s.previousSegment=o),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,n){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var o,s=t[e],c=s.previousSegment,p=s.nextSegment,m=s.isSubpathStart;if(Array.isArray(n)){if(!(n=n.reduce(function(U,te){return U.concat(te)},[]))[0].isSegment)throw new Error("Segments required.");t.splice(e,1);for(var w=n.length,I=0;I<w;I++)o=this.prepareSegment(n[I],c,p),t.splice(e+I,0,o),c=o,m&&o.isSubpathStart&&(m=!1)}else{if(!n||!n.isSegment)throw new Error("Segment required.");o=this.prepareSegment(n,c,p),t.splice(e,1,o),m&&o.isSubpathStart&&(m=!1)}m&&p&&this.updateSubpathStartSegment(p)},round:function(e){for(var n=this.segments,t=n.length,r=0;r<t;r++)n[r].round(e);return this},scale:function(e,n,t){for(var r=this.segments,o=r.length,s=0;s<o;s++)r[s].scale(e,n,t);return this},segmentAt:function(e,n){var t=this.segmentIndexAt(e,n);return t?this.getSegment(t):null},segmentAtLength:function(e,n){var t=this.segmentIndexAtLength(e,n);return t?this.getSegment(t):null},segmentIndexAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.segmentIndexAtLength(p*e,c)},segmentIndexAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,p=null,m=0,w=0;w<r;w++){var I=o?w:r-1-w,_=t[I],te=_.length({precision:s,subdivisions:c[I]});if(_.isVisible){if(e<=m+te)return I;p=I}m+=te}return p},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,n){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var o=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c={precision:o,segmentSubdivisions:void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):n.segmentSubdivisions},p=this.length(c);return this.tangentAtLength(p*e,c)},tangentAtLength:function(e,n){var t=this.segments,r=t.length;if(0===r)return null;var o=!0;e<0&&(o=!1,e=-e);for(var p,s=void 0===(n=n||{}).precision?this.PRECISION:n.precision,c=void 0===n.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):n.segmentSubdivisions,m=0,w=0;w<r;w++){var I=o?w:r-1-w,_=t[I],U=c[I],te=_.length({precision:s,subdivisions:U});if(_.isDifferentiable()){if(e<=m+te)return _.tangentAtLength((o?1:-1)*(e-m),{precision:s,subdivisions:U});p=_}m+=te}return p?p.tangentAtT(o?1:0):null},tangentAtT:function(e){var n=this.segments,t=n.length;if(0===t)return null;var r=e.segmentIndex;if(r<0)return n[0].tangentAtT(0);if(r>=t)return n[t-1].tangentAtT(1);var o=e.value;return o<0?o=0:o>1&&(o=1),n[r].tangentAtT(o)},toPoints:function(e){var n=this.segments,t=n.length;if(0===t)return null;for(var o=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,s=[],c=[],p=0;p<t;p++){var m=n[p];if(m.isVisible){var w=o[p];if(w.length>0){var I=w.map(function(_){return _.start});Array.prototype.push.apply(c,I)}else c.push(m.start)}else c.length>0&&(c.push(n[p-1].end),s.push(c),c=[])}return c.length>0&&(c.push(this.end),s.push(c)),s},toPolylines:function(e){var n=[],t=this.toPoints(e);if(!t)return null;for(var r=0,o=t.length;r<o;r++)n.push(new Vn(t[r]));return n},toString:function(){for(var e=this.segments,n=e.length,t="",r=0;r<n;r++)t+=e[r].serialize()+" ";return t.trim()},translate:function(e,n){for(var t=this.segments,r=t.length,o=0;o<r;o++)t[o].translate(e,n);return this},updateSubpathStartSegment:function(e){for(var n=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=n?n.subpathStartSegment:null,n=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Pt.createSegment("M",0,0)),this}},Object.defineProperty(Pt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=0;t<n;t++){var r=e[t];if(r.isVisible)return r.start}return e[n-1].end}}),Object.defineProperty(Pt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,n=e.length;if(0===n)return null;for(var t=n-1;t>=0;t--){var r=e[t];if(r.isVisible)return r.end}return e[n-1].end}});var Di={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var n=this.length();return e>=1?n:n*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Di,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Di,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Di,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var _n=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof _n))return Xr(_n,e);if(0===n)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof yt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new me(+e[0],+e[1]),this;if(n<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(Xr(_n,o));return r}if(1===n)return this.end=new me(e[0]),this;for(r=[],t=0;t<n;t+=1)r.push(new _n(e[t]));return r},Zi={clone:function(){return new _n(this.end)},divideAt:function(e){var t=new yt(this.start,this.end).divideAt(e);return[new _n(t[0]),new _n(t[1])]},divideAtLength:function(e){var t=new yt(this.start,this.end).divideAtLength(e);return[new _n(t[0]),new _n(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(Zi,"type",{configurable:!0,enumerable:!0,value:"L"}),_n.prototype=ui(Di,yt.prototype,Zi);var kr=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof kr))return Xr(kr,e);if(0===n)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,s;if(e[0]instanceof qt){if(1===n)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===n)return this.controlPoint1=new me(+e[0],+e[1]),this.controlPoint2=new me(+e[2],+e[3]),this.end=new me(+e[4],+e[5]),this;if(n<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=6)o=e.slice(t,t+6),r.push(Xr(kr,o));return r}if(3===n)return this.controlPoint1=new me(e[0]),this.controlPoint2=new me(e[1]),this.end=new me(e[2]),this;if(n<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+n+" points provided).");for(r=[],t=0;t<n;t+=3)s=e.slice(t,t+3),r.push(Xr(kr,s));return r},Ya={clone:function(){return new kr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,n){var r=new qt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,n);return[new kr(r[0]),new kr(r[1])]},divideAtLength:function(e,n){var r=new qt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,n);return[new kr(r[0]),new kr(r[1])]},divideAtT:function(e){var t=new qt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new kr(t[0]),new kr(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var n=this.controlPoint1,t=this.controlPoint2,r=this.end;return!(this.start.equals(n)&&n.equals(t)&&t.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,n,t){return this.controlPoint1.scale(e,n,t),this.controlPoint2.scale(e,n,t),this.end.scale(e,n,t),this},serialize:function(){var e=this.controlPoint1,n=this.controlPoint2,t=this.end;return this.type+" "+e.x+" "+e.y+" "+n.x+" "+n.y+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,n){return this.controlPoint1.translate(e,n),this.controlPoint2.translate(e,n),this.end.translate(e,n),this}};Object.defineProperty(Ya,"type",{configurable:!0,enumerable:!0,value:"C"}),kr.prototype=ui(Di,qt.prototype,Ya);var qi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof qi))return Xr(qi,e);if(0===n)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,s;if(e[0]instanceof yt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" lines provided).")}if(e[0]instanceof qt){if(1===n)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===n)return this.end=new me(+e[0],+e[1]),this;if(n<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+n+" coordinates provided).");var o;for(r=[],t=0;t<n;t+=2)o=e.slice(t,t+2),r.push(Xr(0===t?qi:_n,o));return r}if(1===n)return this.end=new me(e[0]),this;for(r=[],t=0;t<n;t+=1)s=e[t],r.push(0===t?new qi(s):new _n(s));return r},eo={bbox:function(){return null},clone:function(){return new qi(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,n,t){return this.end.scale(e,n,t),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,n){return this.end.translate(e,n),this}};Object.defineProperty(eo,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(eo,"type",{configurable:!0,enumerable:!0,value:"M"}),qi.prototype=ui(Di,eo);var Fi=function(){for(var e=[],n=arguments.length,t=0;t<n;t++)e.push(arguments[t]);if(!(this instanceof Fi))return Xr(Fi,e);if(n>0)throw new Error("Closepath constructor expects no arguments.");return this},to={clone:function(){return new Fi},divideAt:function(e){var t=new yt(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new _n(t[0]):this.clone(),new _n(t[1])]},divideAtLength:function(e){var t=new yt(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new _n(t[0]):this.clone(),new _n(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(to,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(to,"type",{configurable:!0,enumerable:!0,value:"Z"}),Fi.prototype=ui(Di,yt.prototype,to);var ta=Pt.segmentTypes={L:_n,C:kr,M:qi,Z:Fi,z:Fi};Pt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(ta).join("")+",.]*$"),Pt.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const ms={curveThroughPoints:function(e){return console.warn("deprecated"),new Pt(qt.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var o,n=[],t=[],r=e.length-1;if(1==r)return n[0]=new me((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),t[0]=new me(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,t];var s=[];for(o=1;o<r-1;o++)s[o]=4*e[o].x+2*e[o+1].x;s[0]=e[0].x+2*e[1].x,s[r-1]=(8*e[r-1].x+e[r].x)/2;var c=this.getFirstControlPoints(s);for(o=1;o<r-1;++o)s[o]=4*e[o].y+2*e[o+1].y;s[0]=e[0].y+2*e[1].y,s[r-1]=(8*e[r-1].y+e[r].y)/2;var p=this.getFirstControlPoints(s);for(o=0;o<r;o++)n.push(new me(c[o],p[o])),t.push(o<r-1?new me(2*e[o+1].x-c[o+1],2*e[o+1].y-p[o+1]):new me((e[r].x+c[r-1])/2,(e[r].y+p[r-1])/2));return[n,t]},getCurveDivider:function(e,n,t,r){console.warn("deprecated");var o=new qt(e,n,t,r);return function(c){var p=o.divide(c);return[{p0:p[0].start,p1:p[0].controlPoint1,p2:p[0].controlPoint2,p3:p[0].end},{p0:p[1].start,p1:p[1].controlPoint1,p2:p[1].controlPoint2,p3:p[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var n=e.length,t=[],r=[],o=2;t[0]=e[0]/o;for(var s=1;s<n;s++)r[s]=1/o,t[s]=(e[s]-t[s-1])/(o=(s<n-1?4:3.5)-r[s]);for(s=1;s<n;s++)t[n-s-1]-=r[n-s]*t[n-s];return t},getInversionSolver:function(e,n,t,r){console.warn("deprecated");var o=new qt(e,n,t,r);return function(c){return o.closestPointT(c)}}},Hr=function(e){return this instanceof Hr?"string"==typeof e?new Hr.parse(e):void(this.points=Array.isArray(e)?e.map(me):[]):new Hr(e)};function wr(e,n,t,r){switch(e.type){case Et.Line:if(n.type===Et.Line)return Sr(e,n);break;case Et.Ellipse:switch(n.type){case Et.Line:return Zr(e,n);case Et.Ellipse:return ma(e,n)}break;case Et.Rect:switch(n.type){case Et.Line:return na(e,n);case Et.Ellipse:return yi(e,n);case Et.Rect:return Kr(e,n)}break;case Et.Polyline:switch(n.type){case Et.Line:return no(e,n);case Et.Ellipse:return Lo(e,n);case Et.Rect:return qr(e,n);case Et.Polyline:return ro(e,n)}break;case Et.Polygon:switch(n.type){case Et.Line:return Ti(e,n);case Et.Ellipse:return go(e,n);case Et.Rect:return ya(e,n);case Et.Polyline:return xa(e,n);case Et.Polygon:return ra(e,n)}break;case Et.Path:switch(n.type){case Et.Line:return Ro(e,n,t);case Et.Ellipse:return Xa(e,n,t);case Et.Rect:return _a(e,n,t);case Et.Polyline:return Ka(e,n,t);case Et.Polygon:return ba(e,n,t);case Et.Path:return Ja(e,n,t,r)}}switch(n.type){case Et.Ellipse:case Et.Rect:case Et.Polyline:case Et.Polygon:case Et.Path:return wr(n,e,r,t);default:throw Error(`The intersection for ${e} and ${n} could not be found.`)}}function Sr(e,n){const t=e.start.x,r=e.start.y,c=n.start.x,p=n.start.y,I=e.end.x-t,_=e.end.y-r,U=n.end.x-c,te=n.end.y-p,oe=t-c,Se=r-p,Pe=I*te-U*_,Ve=(I*Se-_*oe)/Pe,Ne=(U*Se-te*oe)/Pe;return Ve>=0&&Ve<=1&&Ne>=0&&Ne<=1}function Zr(e,n){const t=e.a,r=e.b,o=e.x,s=e.y,c=n.start.x-o,m=n.start.y-s,I=t*t,_=r*r,U=n.end.x-o-c,te=n.end.y-s-m,oe=U*U/I+te*te/_,Se=2*c*U/I+2*m*te/_,Ve=Se*Se-4*oe*(c*c/I+m*m/_-1);if(0===Ve){const Ne=-Se/2/oe;return Ne>=0&&Ne<=1}if(Ve>0){const Ne=Math.sqrt(Ve),k=(-Se+Ne)/2/oe,z=(-Se-Ne)/2/oe;return k>=0&&k<=1||z>=0&&z<=1}return!1}function ma(e,n){return function xs(e,n,t,r){const{cos:o,sin:s}=Math,c=s(n),p=o(n),m=s(r),w=o(r),I=c*c,_=p*p,te=m*m,oe=w*w,Pe=e.a*e.a,Ve=e.b*e.b,Ne=t.a*t.a,k=t.b*t.b,z=Pe*I+Ve*_,K=Ne*te+k*oe,ie=Pe*_+Ve*I,ve=Ne*oe+k*te;let Ae=2*(Ve-Pe)*(c*p),ke=2*(k-Ne)*(m*w),ze=-2*z*e.x-Ae*e.y,at=-2*K*t.x-ke*t.y,nt=-Ae*e.x-2*ie*e.y,ht=-ke*t.x-2*ve*t.y;const bt=z*e.x*e.x+ie*e.y*e.y+Ae*e.x*e.y-Pe*Ve,Ct=K*t.x*t.x+ve*t.y*t.y+ke*t.x*t.y-Ne*k;Ae/=2,ke/=2,ze/=2,at/=2,nt/=2,ht/=2;const Ht=Vi([[z,Ae,ze],[Ae,ie,nt],[ze,nt,bt]]),$n=Vi([[K,ke,at],[ke,ve,ht],[at,ht,Ct]]),Dn=.33333333*(Vi([[K,Ae,ze],[ke,ie,nt],[at,nt,bt]])+Vi([[z,ke,ze],[Ae,ve,nt],[ze,ht,bt]])+Vi([[z,Ae,at],[Ae,ie,ht],[ze,nt,Ct]])),qn=.33333333*(Vi([[z,ke,at],[Ae,ve,ht],[ze,ht,Ct]])+Vi([[K,Ae,at],[ke,ie,ht],[at,nt,Ct]])+Vi([[K,ke,ze],[ke,ve,nt],[at,ht,bt]])),Ut=io([[Ht,Dn],[Dn,qn]]),an=io([[Ht,qn],[Dn,$n]]),$t=io([[Dn,qn],[qn,$n]]);return!(io([[2*Ut,an],[an,2*$t]])>0&&(qn>0||Dn>0))}(e,0,n,0)}function na(e,n){const{start:t,end:r}=n,{x:o,y:s,width:c,height:p}=e;return!(t.x>o+c&&r.x>o+c||t.x<o&&r.x<o||t.y>s+p&&r.y>s+p||t.y<s&&r.y<s)&&(!(!e.containsPoint(n.start)&&!e.containsPoint(n.end))||Sr(e.topLine(),n)||Sr(e.rightLine(),n)||Sr(e.bottomLine(),n)||Sr(e.leftLine(),n))}function yi(e,n){return!!Kr(e,gt.fromEllipse(n))&&go(Hr.fromRect(e),n)}function Kr(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function no(e,n){return Qa(e,n,{interior:!1})}function Lo(e,n){return ys(e,n,{interior:!1})}function qr(e,n){return Za(e,n,{interior:!1})}function ro(e,n){return Ei(e,n,{interior:!1})}function Ti(e,n){return Qa(e,n,{interior:!0})}function go(e,n){return ys(e,n,{interior:!0})}function ya(e,n){return Za(e,n,{interior:!0})}function xa(e,n){return Ei(e,n,{interior:!0})}function ra(e,n){return No(e,n,{interior:!0})}function Ro(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:s}=r.getSegment(-1);return"Z"===s?Ti(o,n):no(o,n)})}function Xa(e,n,t){return e.getSubpaths().some(r=>{const[o]=r.toPolylines(t),{type:s}=r.getSegment(-1);return"Z"===s?go(o,n):Lo(o,n)})}function _a(e,n,t){return ba(e,Hr.fromRect(n),t)}function Ka(e,n,t){return Ca(e,n,t,{interior:!1})}function ba(e,n,t){return Ca(e,n,t,{interior:!0})}function Ja(e,n,t,r){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?ba(n,s,r):Ka(n,s,r)})}function Qa(e,n,t={}){const{interior:r=!1}=t;let o;if(r){if(e.containsPoint(n.start))return!0;const{start:p,end:m,points:w}=e;o=m.equals(p)?w:[...w,p]}else o=e.points;const{length:s}=o,c=new yt;for(let p=0;p<s-1;p++)if(c.start=o[p],c.end=o[p+1],Sr(n,c))return!0;return!1}function ys(e,n,t={}){const{start:r,end:o,points:s}=e;if(n.containsPoint(r))return!0;let c;const{interior:p=!1}=t;if(p){if(e.containsPoint(n.center()))return!0;c=o.equals(r)?s:[...s,r]}else c=s;const{length:m}=c,w=new yt;for(let I=0;I<m-1;I++)if(w.start=c[I],w.end=c[I+1],Zr(n,w))return!0;return!1}function Za(e,n,t){return No(e,Hr.fromRect(n),t)}function Ca(e,n,t,r){return e.getSubpaths().some(o=>{const[s]=o.toPolylines(t),{type:c}=o.getSegment(-1);return"Z"===c?No(n,s,r):Ei(n,s,r)})}function Ei(e,n,t={}){const{interior:r=!1}=t;let o;if(r){const{start:m}=n;if(e.containsPoint(m))return!0;o=e.clone().close()}else o=e;const s=n.points,{length:c}=s,p=new yt;for(let m=0;m<c-1;m++)if(p.start=s[m],p.end=s[m+1],no(o,p))return!0;return!1}function No(e,n,t){return n.containsPoint(e.start)||Ei(e,n.clone().close(),t)}function io(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Vi(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}Hr.parse=function(e){return new Hr(Ki(e))},Hr.fromRect=function(e){return new Hr([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},Hr.prototype=ui(Vn.prototype,{type:Et.Polygon,clone:function(){return new Hr(Wa(this.points))},convexHull:function(){return new Hr($a(this.points))},lengthPoints:function(){const{start:e,end:n,points:t}=this;return t.length<=1||e.equals(n)?t:[...t,e.clone()]}});const wa=g,De=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var n={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,o=r.PI,s=r.atan2,c=r.sqrt,p=r.min,m=r.max,w=r.cos,I=r.sin,_=function(k,z,K){if(!(this instanceof _))return _.apply(Object.create(_.prototype),arguments);if(k){if(_.isV(k)&&(k=k.node),z=z||{},_.isString(k)){if("svg"===(k=k.trim()).toLowerCase())k=_.createSvgDocument();else if("<"===k[0]){var ie=_.createSvgDocument(k);if(ie.childNodes.length>1){var Ae,ke,ve=[];for(Ae=0,ke=ie.childNodes.length;Ae<ke;Ae++){var ze=ie.childNodes[Ae];ve.push(new _(document.importNode(ze,!0)))}return ve}k=document.importNode(ie.firstChild,!0)}else k=document.createElementNS(n.svg,k);_.ensureId(k)}return this.node=k,this.setAttributes(z),K&&this.append(K),this}},U=_.prototype;function oe(k,z,K){K||(K={});for(var ie=K.includeAnnotationIndices,ve=K.eol,Ae=K.lineHeight,ke=K.baseSize,ze=0,at={},nt=z.length-1,ht=0;ht<=nt;ht++){var bt=z[ht],Ct=null;if(_.isObject(bt)){var Ht=bt.attrs,$n=_("tspan",Ht),Dn=$n.node,qn=bt.t;ve&&ht===nt&&(qn+=ve),Dn.textContent=qn;var Ut=Ht.class;Ut&&$n.addClass(Ut),ie&&$n.attr("annotations",bt.annotations),Ct=parseFloat(Ht["font-size"]),isFinite(Ct)||(Ct=ke),Ct&&Ct>ze&&(ze=Ct)}else ve&&ht===nt&&(bt+=ve),Dn=document.createTextNode(bt||" "),ke&&ke>ze&&(ze=ke);k.appendChild(Dn)}return ze&&(at.maxFontSize=ze),Ae?at.lineHeight=Ae:ze&&(at.lineHeight=1.2*ze),at}Object.defineProperty(U,"id",{enumerable:!0,get:function(){return this.node.id},set:function(k){this.node.id=k}}),U.getTransformToElement=function(k){var z=this.node;if(_.isSVGGraphicsElement(k)&&_.isSVGGraphicsElement(z)){var K=_.toNode(k).getScreenCTM(),ie=z.getScreenCTM();if(K&&ie)return K.inverse().multiply(ie)}return _.createSVGMatrix()},U.transform=function(k,z){var K=this.node;if(_.isUndefined(k))return _.transformStringToMatrix(this.attr("transform"));if(z&&z.absolute)return this.attr("transform",_.matrixToTransformString(k));var ie=_.createSVGTransform(k);return K.transform.baseVal.appendItem(ie),this},U.translate=function(k,z,K){K=K||{},z=z||0;var ie=this.attr("transform")||"",ve=_.parseTransformString(ie);return ie=ve.value,_.isUndefined(k)?ve.translate:(ie=ie.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(K.absolute?k:ve.translate.tx+k)+","+(K.absolute?z:ve.translate.ty+z)+") "+ie).trim()),this)},U.rotate=function(k,z,K,ie){ie=ie||{};var ve=this.attr("transform")||"",Ae=_.parseTransformString(ve);return ve=Ae.value,_.isUndefined(k)?Ae.rotate:(ve=ve.replace(/rotate\([^)]*\)/g,"").trim(),k%=360,this.attr("transform",(ve+" rotate("+(ie.absolute?k:Ae.rotate.angle+k)+(void 0!==z&&void 0!==K?","+z+","+K:"")+")").trim()),this)},U.scale=function(k,z){z=_.isUndefined(z)?k:z;var K=this.attr("transform")||"",ie=_.parseTransformString(K);return K=ie.value,_.isUndefined(k)?ie.scale:(K=K.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(K+" scale("+k+","+z+")").trim()),this)},U.bbox=function(k,z){var K,ie=this.node,ve=ie.ownerSVGElement;if(!ve)return new gt(0,0,0,0);try{K=ie.getBBox()}catch(ke){K={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(k)return new gt(K);var Ae=this.getTransformToElement(z||ve);return _.transformRect(K,Ae)},U.getBBox=function(k){var K,z={},ie=this.node;if(!ie.ownerSVGElement||!_.isSVGGraphicsElement(ie))return new gt(0,0,0,0);if(k&&(k.target&&(z.target=_.toNode(k.target)),k.recursive&&(z.recursive=k.recursive)),z.recursive){var ke=this.children(),ze=ke.length;if(0===ze)return this.getBBox({target:z.target,recursive:!1});z.target||(z.target=this);for(var at=0;at<ze;at++){var ht,nt=ke[at];ht=0===nt.children().length?nt.getBBox({target:z.target,recursive:!1}):nt.getBBox({target:z.target,recursive:!0}),K=K?K.union(ht):ht}return K}try{K=ie.getBBox()}catch(bt){K={x:ie.clientLeft,y:ie.clientTop,width:ie.clientWidth,height:ie.clientHeight}}if(z.target){var Ae=this.getTransformToElement(z.target);return _.transformRect(K,Ae)}return new gt(K)};var Se=/em$/;function Pe(k,z){var K=parseFloat(k);return Se.test(k)?K*z:K}U.text=function(k,z){if(k&&"string"!=typeof k)throw new Error("Vectorizer: text() expects the first argument to be a string.");k=_.sanitizeText(k),z||(z={});var K=z.displayEmpty,ie=z.eol,ve=z.textPath,Ae=z.textVerticalAnchor,ke="middle"===Ae||"bottom"===Ae||"top"===Ae,ze=z.x;void 0===ze&&(ze=this.attr("x")||0);var at=z.includeAnnotationIndices,nt=z.annotations;nt&&!_.isArray(nt)&&(nt=[nt]);var ht=z.lineHeight,bt="auto"===ht,Ct=bt?"1.5em":ht||"1em";this.empty(),this.attr({"xml:space":"preserve",display:k||K?null:"none"});var Ht=parseFloat(this.attr("font-size"));Ht||(Ht=16,(ke||nt)&&this.attr("font-size",Ht));var Dn,$n=document;ve?("string"==typeof ve&&(ve={d:ve}),Dn=function te(k,z){k||(k={});var K=_("textPath"),ie=k.d;if(ie&&void 0===k["xlink:href"]){var ve=_("path").attr("d",ie).appendTo(z.defs());K.attr("xlink:href","#"+ve.id)}return _.isObject(k)&&K.attr(k),K.node}(ve,this)):Dn=$n.createDocumentFragment();for(var $t,qn=0,Ut=k.split("\n"),an=[],Yt=0,Cn=Ut.length-1;Yt<=Cn;Yt++){var Ln,Yn=Ct,Kn="v-line",xn=$n.createElementNS(n.svg,"tspan"),xr=Ut[Yt];if(xr)if(nt){var Tn=(Ln=oe(xn,_.annotateString(xr,nt,{offset:-qn,includeAnnotationIndices:at}),{includeAnnotationIndices:at,eol:Yt!==Cn&&ie,lineHeight:bt?null:Ct,baseSize:Ht})).lineHeight;Tn&&bt&&0!==Yt&&(Yn=Tn),0===Yt&&($t=.8*Ln.maxFontSize)}else ie&&Yt!==Cn&&(xr+=ie),xn.textContent=xr;else{xn.textContent="-",Kn+=" v-empty-line";var Gt=xn.style;Gt.fillOpacity=0,Gt.strokeOpacity=0,nt&&(Ln={})}Ln&&an.push(Ln),Yt>0&&xn.setAttribute("dy",Yn),(Yt>0||ve)&&xn.setAttribute("x",ze),xn.className.baseVal=Kn,Dn.appendChild(xn),qn+=xr.length+1}if(ke)if(nt)Yn=function Ve(k,z,K,ie){if(!Array.isArray(z))return 0;var ve=z.length;if(!ve)return 0;for(var Ae=z[0],ke=Pe(Ae.maxFontSize,K)||K,ze=0,at=Pe(ie,K),nt=1;nt<ve;nt++)ze+=Pe((Ae=z[nt]).lineHeight,K)||at;var Ct,bt=Pe(Ae.maxFontSize,K)||K;switch(k){case"middle":Ct=ke/2-.15*bt-ze/2;break;case"bottom":Ct=-.25*bt-ze;break;default:Ct=.8*ke}return Ct}(Ae,an,Ht,Ct);else if("top"===Ae)Yn="0.8em";else{var St;switch(Cn>0?(St=parseFloat(Ct)||1,St*=Cn,Se.test(Ct)||(St/=Ht)):St=0,Ae){case"middle":Yn=.3-St/2+"em";break;case"bottom":Yn=-St-.3+"em"}}else 0===Ae?Yn="0em":Ae?Yn=Ae:(Yn=0,null===this.attr("y")&&this.attr("y",$t||"0.8em"));return Dn.firstChild.setAttribute("dy",Yn),this.append(Dn),this},U.removeAttr=function(k){var z=_.qualifyAttr(k),K=this.node;return z.ns?K.hasAttributeNS(z.ns,z.local)&&K.removeAttributeNS(z.ns,z.local):K.hasAttribute(k)&&K.removeAttribute(k),this},U.attr=function(k,z){if(_.isUndefined(k)){for(var K=this.node.attributes,ie={},ve=0;ve<K.length;ve++)ie[K[ve].name]=K[ve].value;return ie}if(_.isString(k)&&_.isUndefined(z))return this.node.getAttribute(k);if("object"==typeof k)for(var Ae in k)k.hasOwnProperty(Ae)&&this.setAttribute(Ae,k[Ae]);else this.setAttribute(k,z);return this},U.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",_.normalizePathData(this.attr("d"))),this},U.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},U.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},U.setAttributes=function(k){for(var z in k)k.hasOwnProperty(z)&&this.setAttribute(z,k[z]);return this},U.append=function(k){_.isArray(k)||(k=[k]);for(var z=0,K=k.length;z<K;z++)this.node.appendChild(_.toNode(k[z]));return this},U.prepend=function(k){var z=this.node.firstChild;return z?_(z).before(k):this.append(k)},U.before=function(k){var z=this.node,K=z.parentNode;if(K){_.isArray(k)||(k=[k]);for(var ie=0,ve=k.length;ie<ve;ie++)K.insertBefore(_.toNode(k[ie]),z)}return this},U.appendTo=function(k){return _.toNode(k).appendChild(this.node),this},U.svg=function(){return this.node instanceof window.SVGSVGElement?this:_(this.node.ownerSVGElement)},U.tagName=function(){return this.node.tagName.toUpperCase()},U.defs=function(){var k=this.svg()||this,z=k.node.getElementsByTagName("defs")[0];return z?_(z):_("defs").appendTo(k)},U.clone=function(){var k=_(this.node.cloneNode(!0));return k.node.id=_.uniqueId(),k},U.findOne=function(k){var z=this.node.querySelector(k);return z?_(z):void 0},U.find=function(k){var z=[],K=this.node.querySelectorAll(k);if(K)for(var ie=0;ie<K.length;ie++)z.push(_(K[ie]));return z},U.children=function(){for(var k=this.node.childNodes,z=[],K=0;K<k.length;K++)1===k[K].nodeType&&z.push(_(k[K]));return z},U.parent=function(){return _(this.node.parentNode)||null},U.index=function(){for(var k=0,z=this.node.previousSibling;z;)1===z.nodeType&&k++,z=z.previousSibling;return k},U.findParentByClass=function(k,z){for(var K=this.node.ownerSVGElement,ie=this.node.parentNode;ie&&ie!==z&&ie!==K;){var ve=_(ie);if(ve.hasClass(k))return ve;ie=ie.parentNode}return null},U.contains=function(k){var z=this.node,K=_.toNode(k),ie=K&&K.parentNode;return z===ie||!!(ie&&1===ie.nodeType&&16&z.compareDocumentPosition(ie))},U.toLocalPoint=function(k,z){var K=this.svg().node,ie=K.createSVGPoint();ie.x=k,ie.y=z;try{var ve=ie.matrixTransform(K.getScreenCTM().inverse()),Ae=this.getTransformToElement(K).inverse()}catch(ke){return ie}return ve.matrixTransform(Ae)},U.translateCenterToPoint=function(k){var K=this.getBBox({target:this.svg()}).center();return this.translate(k.x-K.x,k.y-K.y),this},U.translateAndAutoOrient=function(k,z,K){k=new me(k),z=new me(z),K||(K=this.svg());var ie=this.scale();this.attr("transform","");var ve=this.getBBox({target:K}).scale(ie.sx,ie.sy),Ae=_.createSVGTransform();Ae.setTranslate(-ve.x-ve.width/2,-ve.y-ve.height/2);var ke=_.createSVGTransform(),ze=k.angleBetween(z,k.clone().offset(1,0));ze&&ke.setRotate(ze,0,0);var at=_.createSVGTransform(),nt=k.clone().move(z,ve.width/2);at.setTranslate(2*k.x-nt.x,2*k.y-nt.y);var ht=this.getTransformToElement(K),bt=_.createSVGTransform();return bt.setMatrix(at.matrix.multiply(ke.matrix.multiply(Ae.matrix.multiply(ht.scale(ie.sx,ie.sy))))),this.attr("transform",_.matrixToTransformString(bt.matrix)),this},U.animateAlongPath=function(k,z){z=_.toNode(z);var K=_.ensureId(z),ie=_("animateMotion",k),ve=_("mpath",{"xlink:href":"#"+K});ie.append(ve),this.append(ie);try{ie.node.beginElement()}catch(Ct){if("fake"===document.documentElement.getAttribute("smiling")){var Ae=ie.node;Ae.animators=[];var ke=Ae.getAttribute("id");ke&&(id2anim[ke]=Ae);for(var ze=getTargets(Ae),at=0,nt=ze.length;at<nt;at++){var bt=new Animator(Ae,ze[at],at);animators.push(bt),Ae.animators[at]=bt,bt.register()}}}return this},U.hasClass=function(k){return new RegExp("(\\s|^)"+k+"(\\s|$)").test(this.node.getAttribute("class"))},U.addClass=function(k){if(k&&!this.hasClass(k)){var z=this.node.getAttribute("class")||"";this.node.setAttribute("class",(z+" "+k).trim())}return this},U.removeClass=function(k){if(k&&this.hasClass(k)){var z=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+k+"(\\s|$)","g"),"$2");this.node.setAttribute("class",z)}return this},U.toggleClass=function(k,z){return(_.isUndefined(z)?this.hasClass(k):!z)?this.removeClass(k):this.addClass(k),this},U.sample=function(k){k=k||1;for(var Ae,z=this.node,K=z.getTotalLength(),ie=[],ve=0;ve<K;)Ae=z.getPointAtLength(ve),ie.push({x:Ae.x,y:Ae.y,distance:ve}),ve+=k;return ie},U.convertToPath=function(){var k=_("path");k.attr(this.attr());var z=this.convertToPathData();return z&&k.attr("d",z),k},U.convertToPathData=function(){var k=this.tagName();switch(k){case"PATH":return this.attr("d");case"LINE":return _.convertLineToPathData(this.node);case"POLYGON":return _.convertPolygonToPathData(this.node);case"POLYLINE":return _.convertPolylineToPathData(this.node);case"ELLIPSE":return _.convertEllipseToPathData(this.node);case"CIRCLE":return _.convertCircleToPathData(this.node);case"RECT":return _.convertRectToPathData(this.node)}throw new Error(k+" cannot be converted to PATH.")},_.prototype.toGeometryShape=function(){var k,z,K,ie,ve,Ae,ke,ze,at,nt,ht,bt,Ct,Ht,$n;switch(this.tagName()){case"RECT":return k=parseFloat(this.attr("x"))||0,z=parseFloat(this.attr("y"))||0,K=parseFloat(this.attr("width"))||0,ie=parseFloat(this.attr("height"))||0,new gt(k,z,K,ie);case"CIRCLE":return ve=parseFloat(this.attr("cx"))||0,Ae=parseFloat(this.attr("cy"))||0,ke=parseFloat(this.attr("r"))||0,new Cr({x:ve,y:Ae},ke,ke);case"ELLIPSE":return ve=parseFloat(this.attr("cx"))||0,Ae=parseFloat(this.attr("cy"))||0,ze=parseFloat(this.attr("rx"))||0,at=parseFloat(this.attr("ry"))||0,new Cr({x:ve,y:Ae},ze,at);case"POLYLINE":return nt=_.getPointsFromSvgNode(this),new Vn(nt);case"POLYGON":return(nt=_.getPointsFromSvgNode(this)).length>1&&nt.push(nt[0]),new Vn(nt);case"PATH":return ht=this.attr("d"),Pt.isDataSupported(ht)||(ht=_.normalizePathData(ht)),new Pt(ht);case"LINE":return bt=parseFloat(this.attr("x1"))||0,Ht=parseFloat(this.attr("y1"))||0,Ct=parseFloat(this.attr("x2"))||0,$n=parseFloat(this.attr("y2"))||0,new yt({x:bt,y:Ht},{x:Ct,y:$n})}return this.getBBox()},U.findIntersection=function(k,z){var K=this.svg().node,ie=this.getBBox({target:z=z||K}),ve=ie.center();if(ie.intersectionWithLineFromCenterToPoint(k)){var Ae,ke=this.tagName();if("RECT"===ke){var ze=new gt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),at=this.getTransformToElement(z),nt=_.decomposeMatrix(at),ht=K.createSVGTransform();ht.setRotate(-nt.rotation,ve.x,ve.y);var bt=_.transformRect(ze,ht.matrix.multiply(at));Ae=new gt(bt).intersectionWithLineFromCenterToPoint(k,nt.rotation)}else if("PATH"===ke||"POLYGON"===ke||"POLYLINE"===ke||"CIRCLE"===ke||"ELLIPSE"===ke){var qn,Ut,an,Yt,Cn,Ht=("PATH"===ke?this:this.convertToPath()).sample(),$n=1/0,Dn=[];for(qn=0;qn<Ht.length;qn++)an=(an=_.createSVGPoint((Ut=Ht[qn]).x,Ut.y)).matrixTransform(this.getTransformToElement(z)),(Cn=(Ut=new me(an)).distance(ve)+(Yt=1.1*Ut.distance(k)))<$n?($n=Cn,Dn=[{sample:Ut,refDistance:Yt}]):Cn<$n+1&&Dn.push({sample:Ut,refDistance:Yt});Dn.sort(function(Yn,Kn){return Yn.refDistance-Kn.refDistance}),Dn[0]&&(Ae=Dn[0].sample)}return Ae}},U.setAttribute=function(k,z){var K=this.node;if(null===z)return this.removeAttr(k),this;var ie=_.qualifyAttr(k);return ie.ns?K.setAttributeNS(ie.ns,k,z):"id"===k?K.id=z:K.setAttribute(k,z),this},_.createSvgDocument=function(k){if(k){const K=`<svg xmlns="${n.svg}" xmlns:xlink="${n.xlink}" version="1.1">${k}</svg>`,{documentElement:ie}=_.parseXML(K,{async:!1});return ie}const z=document.createElementNS(n.svg,"svg");return z.setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),z.setAttribute("version","1.1"),z},_.createSVGStyle=function(k){const{node:z}=_("style",{type:"text/css"},[_.createCDATASection(k)]);return z},_.createCDATASection=function(k=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(k)},_.idCounter=0,_.uniqueId=function(){return"v-"+ ++_.idCounter},_.toNode=function(k){return _.isV(k)?k.node:k.nodeName&&k||k[0]},_.ensureId=function(k){return(k=_.toNode(k)).id||(k.id=_.uniqueId())},_.sanitizeText=function(k){return(k||"").replace(/ /g,"\xa0")},_.isUndefined=function(k){return void 0===k},_.isString=function(k){return"string"==typeof k},_.isObject=function(k){return k&&"object"==typeof k},_.isArray=Array.isArray,_.parseXML=function(k,z){var K;z=z||{};try{var ie=new DOMParser;_.isUndefined(z.async)||(ie.async=z.async),K=ie.parseFromString(k,"text/xml")}catch(ve){K=void 0}if(!K||K.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+k);return K},_.qualifyAttr=function(k){if(-1!==k.indexOf(":")){var z=k.split(":");return{ns:n[z[0]],local:z[1]}}return{ns:null,local:k}},_.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,_.transformSeparatorRegex=/[ ,]+/,_.transformationListRegex=/^(\w+)\((.*)\)/,_.transformStringToMatrix=function(k){var z=_.createSVGMatrix(),K=k&&k.match(_.transformRegex);if(!K)return z;for(var ie=0,ve=K.length;ie<ve;ie++){var ke=K[ie].match(_.transformationListRegex);if(ke){var ze,at,nt,ht,bt,Ct=_.createSVGMatrix(),Ht=ke[2].split(_.transformSeparatorRegex);switch(ke[1].toLowerCase()){case"scale":ze=parseFloat(Ht[0]),at=void 0===Ht[1]?ze:parseFloat(Ht[1]),Ct=Ct.scaleNonUniform(ze,at);break;case"translate":nt=parseFloat(Ht[0]),ht=parseFloat(Ht[1]),Ct=Ct.translate(nt,ht);break;case"rotate":bt=parseFloat(Ht[0]),nt=parseFloat(Ht[1])||0,ht=parseFloat(Ht[2])||0,Ct=0!==nt||0!==ht?Ct.translate(nt,ht).rotate(bt).translate(-nt,-ht):Ct.rotate(bt);break;case"skewx":bt=parseFloat(Ht[0]),Ct=Ct.skewX(bt);break;case"skewy":bt=parseFloat(Ht[0]),Ct=Ct.skewY(bt);break;case"matrix":Ct.a=parseFloat(Ht[0]),Ct.b=parseFloat(Ht[1]),Ct.c=parseFloat(Ht[2]),Ct.d=parseFloat(Ht[3]),Ct.e=parseFloat(Ht[4]),Ct.f=parseFloat(Ht[5]);break;default:continue}z=z.multiply(Ct)}}return z},_.matrixToTransformString=function(k){return k||(k=!0),"matrix("+(void 0!==k.a?k.a:1)+","+(void 0!==k.b?k.b:0)+","+(void 0!==k.c?k.c:0)+","+(void 0!==k.d?k.d:1)+","+(void 0!==k.e?k.e:0)+","+(void 0!==k.f?k.f:0)+")"},_.parseTransformString=function(k){var z,K,ie;if(k){var ve=_.transformSeparatorRegex;if(k.trim().indexOf("matrix")>=0){var Ae=_.transformStringToMatrix(k),ke=_.decomposeMatrix(Ae);ie=[ke.scaleX,ke.scaleY],K=[ke.rotation];var ze=[];(0!==(z=[ke.translateX,ke.translateY])[0]||0!==z[1])&&ze.push("translate("+z+")"),(1!==ie[0]||1!==ie[1])&&ze.push("scale("+ie+")"),0!==K[0]&&ze.push("rotate("+K+")"),k=ze.join(" ")}else{var at=k.match(/translate\((.*?)\)/);at&&(z=at[1].split(ve));var nt=k.match(/rotate\((.*?)\)/);nt&&(K=nt[1].split(ve));var ht=k.match(/scale\((.*?)\)/);ht&&(ie=ht[1].split(ve))}}var bt=ie&&ie[0]?parseFloat(ie[0]):1;return{value:k,translate:{tx:z&&z[0]?parseInt(z[0],10):0,ty:z&&z[1]?parseInt(z[1],10):0},rotate:{angle:K&&K[0]?parseInt(K[0],10):0,cx:K&&K[1]?parseInt(K[1],10):void 0,cy:K&&K[2]?parseInt(K[2],10):void 0},scale:{sx:bt,sy:ie&&ie[1]?parseFloat(ie[1]):bt}}},_.deltaTransformPoint=function(k,z){return{x:z.x*k.a+z.y*k.c+0,y:z.x*k.b+z.y*k.d+0}},_.decomposeMatrix=function(k){var z=_.deltaTransformPoint(k,{x:0,y:1}),K=_.deltaTransformPoint(k,{x:1,y:0}),ie=180/o*s(z.y,z.x)-90,ve=180/o*s(K.y,K.x);return{translateX:k.e,translateY:k.f,scaleX:c(k.a*k.a+k.b*k.b),scaleY:c(k.c*k.c+k.d*k.d),skewX:ie,skewY:ve,rotation:ie}},_.matrixToScale=function(k){var z,K,ie,ve;return k?(z=_.isUndefined(k.a)?1:k.a,ve=_.isUndefined(k.d)?1:k.d,K=k.b,ie=k.c):z=ve=1,{sx:K?c(z*z+K*K):z,sy:ie?c(ie*ie+ve*ve):ve}},_.matrixToRotate=function(k){var z={x:0,y:1};return k&&(z=_.deltaTransformPoint(k,z)),{angle:We(kt(s(z.y,z.x))-90)}},_.matrixToTranslate=function(k){return{tx:k&&k.e||0,ty:k&&k.f||0}},_.isV=function(k){return k instanceof _},_.isVElement=_.isV,_.isSVGGraphicsElement=function(k){return!!k&&(k=_.toNode(k))instanceof SVGElement&&"function"==typeof k.getScreenCTM};var Ne=_("svg").node;return _.createSVGMatrix=function(k){var z=Ne.createSVGMatrix();for(var K in k)z[K]=k[K];return z},_.createSVGTransform=function(k){return _.isUndefined(k)?Ne.createSVGTransform():(k instanceof SVGMatrix||(k=_.createSVGMatrix(k)),Ne.createSVGTransformFromMatrix(k))},_.createSVGPoint=function(k,z){var K=Ne.createSVGPoint();return K.x=k,K.y=z,K},_.transformRect=function(k,z){var K=Ne.createSVGPoint();K.x=k.x,K.y=k.y;var ie=K.matrixTransform(z);K.x=k.x+k.width,K.y=k.y;var ve=K.matrixTransform(z);K.x=k.x+k.width,K.y=k.y+k.height;var Ae=K.matrixTransform(z);K.x=k.x,K.y=k.y+k.height;var ke=K.matrixTransform(z),ze=p(ie.x,ve.x,Ae.x,ke.x),at=m(ie.x,ve.x,Ae.x,ke.x),nt=p(ie.y,ve.y,Ae.y,ke.y),ht=m(ie.y,ve.y,Ae.y,ke.y);return new gt(ze,nt,at-ze,ht-nt)},_.transformPoint=function(k,z){return new me(_.createSVGPoint(k.x,k.y).matrixTransform(z))},_.transformLine=function(k,z){return new yt(_.transformPoint(k.start,z),_.transformPoint(k.end,z))},_.transformPolyline=function(k,z){var K=k instanceof Vn?k.points:k;_.isArray(K)||(K=[]);for(var ie=[],ve=0,Ae=K.length;ve<Ae;ve++)ie[ve]=_.transformPoint(K[ve],z);return new Vn(ie)},_.styleToObject=function(k){for(var z={},K=k.split(";"),ie=0;ie<K.length;ie++){var Ae=K[ie].split("=");z[Ae[0].trim()]=Ae[1].trim()}return z},_.createSlicePathData=function(k,z,K,ie){var ve=2*o-1e-6,Ae=k,ke=z,ze=K,at=ie,nt=(at<ze&&(nt=ze,ze=at,at=nt),at-ze),ht=nt<o?"0":"1",bt=w(ze),Ct=I(ze),Ht=w(at),$n=I(at);return nt>=ve?Ae?"M0,"+ke+"A"+ke+","+ke+" 0 1,1 0,"+-ke+"A"+ke+","+ke+" 0 1,1 0,"+ke+"M0,"+Ae+"A"+Ae+","+Ae+" 0 1,0 0,"+-Ae+"A"+Ae+","+Ae+" 0 1,0 0,"+Ae+"Z":"M0,"+ke+"A"+ke+","+ke+" 0 1,1 0,"+-ke+"A"+ke+","+ke+" 0 1,1 0,"+ke+"Z":Ae?"M"+ke*bt+","+ke*Ct+"A"+ke+","+ke+" 0 "+ht+",1 "+ke*Ht+","+ke*$n+"L"+Ae*Ht+","+Ae*$n+"A"+Ae+","+Ae+" 0 "+ht+",0 "+Ae*bt+","+Ae*Ct+"Z":"M"+ke*bt+","+ke*Ct+"A"+ke+","+ke+" 0 "+ht+",1 "+ke*Ht+","+ke*$n+"L0,0Z"},_.mergeAttrs=function(k,z){for(var K in z)k[K]="class"===K?k[K]?k[K]+" "+z[K]:z[K]:"style"===K?_.isObject(k[K])&&_.isObject(z[K])?_.mergeAttrs(k[K],z[K]):_.isObject(k[K])?_.mergeAttrs(k[K],_.styleToObject(z[K])):_.isObject(z[K])?_.mergeAttrs(_.styleToObject(k[K]),z[K]):_.mergeAttrs(_.styleToObject(k[K]),_.styleToObject(z[K])):z[K];return k},_.annotateString=function(k,z,K){z=z||[];for(var Ae,ze,at,ie=(K=K||{}).offset||0,ve=[],ke=[],nt=0;nt<k.length;nt++){ze=ke[nt]=k[nt];for(var ht=0;ht<z.length;ht++){var bt=z[ht];nt>=bt.start+ie&&nt<bt.end+ie&&(_.isObject(ze)?ze.attrs=_.mergeAttrs(_.mergeAttrs({},ze.attrs),bt.attrs):ze=ke[nt]={t:k[nt],attrs:bt.attrs},K.includeAnnotationIndices&&(ze.annotations||(ze.annotations=[])).push(ht))}(at=ke[nt-1])?_.isObject(ze)&&_.isObject(at)?JSON.stringify(ze.attrs)===JSON.stringify(at.attrs)?Ae.t+=ze.t:(ve.push(Ae),Ae=ze):_.isObject(ze)||_.isObject(at)?(ve.push(Ae),Ae=ze):Ae=(Ae||"")+ze:Ae=ze}return Ae&&ve.push(Ae),ve},_.findAnnotationsAtIndex=function(k,z){var K=[];return k&&k.forEach(function(ie){ie.start<z&&z<=ie.end&&K.push(ie)}),K},_.findAnnotationsBetweenIndexes=function(k,z,K){var ie=[];return k&&k.forEach(function(ve){(z>=ve.start&&z<ve.end||K>ve.start&&K<=ve.end||ve.start>=z&&ve.end<K)&&ie.push(ve)}),ie},_.shiftAnnotations=function(k,z,K){return k&&k.forEach(function(ie){ie.start<z&&ie.end>=z?ie.end+=K:ie.start>=z&&(ie.start+=K,ie.end+=K)}),k},_.convertLineToPathData=function(k){return["M",(k=_(k)).attr("x1"),k.attr("y1"),"L",k.attr("x2"),k.attr("y2")].join(" ")},_.convertPolygonToPathData=function(k){var z=_.getPointsFromSvgNode(k);return 0===z.length?null:_.svgPointsToPath(z)+" Z"},_.convertPolylineToPathData=function(k){var z=_.getPointsFromSvgNode(k);return 0===z.length?null:_.svgPointsToPath(z)},_.svgPointsToPath=function(k){for(var z=0,K=k.length;z<K;z++)k[z]=k[z].x+" "+k[z].y;return"M "+k.join(" L")},_.getPointsFromSvgNode=function(k){var z=[],K=(k=_.toNode(k)).points;if(K)for(var ie=0,ve=K.numberOfItems;ie<ve;ie++)z.push(K.getItem(ie));return z},_.KAPPA=.551784,_.convertCircleToPathData=function(k){k=_(k);var z=parseFloat(k.attr("cx"))||0,K=parseFloat(k.attr("cy"))||0,ie=parseFloat(k.attr("r")),ve=ie*_.KAPPA;return["M",z,K-ie,"C",z+ve,K-ie,z+ie,K-ve,z+ie,K,"C",z+ie,K+ve,z+ve,K+ie,z,K+ie,"C",z-ve,K+ie,z-ie,K+ve,z-ie,K,"C",z-ie,K-ve,z-ve,K-ie,z,K-ie,"Z"].join(" ")},_.convertEllipseToPathData=function(k){k=_(k);var z=parseFloat(k.attr("cx"))||0,K=parseFloat(k.attr("cy"))||0,ie=parseFloat(k.attr("rx")),ve=parseFloat(k.attr("ry"))||ie,Ae=ie*_.KAPPA,ke=ve*_.KAPPA;return["M",z,K-ve,"C",z+Ae,K-ve,z+ie,K-ke,z+ie,K,"C",z+ie,K+ke,z+Ae,K+ve,z,K+ve,"C",z-Ae,K+ve,z-ie,K+ke,z-ie,K,"C",z-ie,K-ke,z-Ae,K-ve,z,K-ve,"Z"].join(" ")},_.convertRectToPathData=function(k){return k=_(k),_.rectToPath({x:parseFloat(k.attr("x"))||0,y:parseFloat(k.attr("y"))||0,width:parseFloat(k.attr("width"))||0,height:parseFloat(k.attr("height"))||0,rx:parseFloat(k.attr("rx"))||0,ry:parseFloat(k.attr("ry"))||0})},_.rectToPath=function(k){var K=k.x,ie=k.y,ve=k.width,Ae=k.height,ke=p(k.rx||k["top-rx"]||0,ve/2),ze=p(k.rx||k["bottom-rx"]||0,ve/2),at=p(k.ry||k["top-ry"]||0,Ae/2),nt=p(k.ry||k["bottom-ry"]||0,Ae/2);return(ke||ze||at||nt?["M",K,ie+at,"v",Ae-at-nt,"a",ze,nt,0,0,0,ze,nt,"h",ve-2*ze,"a",ze,nt,0,0,0,ze,-nt,"v",-(Ae-nt-at),"a",ke,at,0,0,0,-ke,-at,"h",-(ve-2*ke),"a",ke,at,0,0,0,-ke,at,"Z"]:["M",K,ie,"H",K+ve,"V",ie+Ae,"H",K,"V",ie,"Z"]).join(" ")},_.normalizePathData=function(){var k="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",z=new RegExp("([a-z])["+k+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+k+"]*,?["+k+"]*)+)","ig"),K=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+k+"]*,?["+k+"]*","ig"),ie=Math,ve=ie.PI,Ae=ie.sin,ke=ie.cos,ze=ie.tan,at=ie.asin,nt=ie.sqrt,ht=ie.abs;function bt(Ut,an,$t,Yt,Cn,Yn){var Kn=.3333333333333333,xn=2/3;return[Kn*Ut+xn*$t,Kn*an+xn*Yt,Kn*Cn+xn*$t,Kn*Yn+xn*Yt,Cn,Yn]}function Ct(Ut,an,$t){return{x:Ut*ke($t)-an*Ae($t),y:Ut*Ae($t)+an*ke($t)}}function Ht(Ut,an,$t,Yt,Cn,Yn,Kn,xn,xr,Ln){var St,fn=120*ve/180,Tn=ve/180*(+Cn||0),Gt=[];if(Ln)Si=Ln[0],$r=Ln[1],mc=Ln[2],yc=Ln[3];else{an=(St=Ct(Ut,an,-Tn)).y;var wi=((Ut=St.x)-(xn=(St=Ct(xn,xr,-Tn)).x))/2,Ri=(an-(xr=St.y))/2,gs=wi*wi/($t*$t)+Ri*Ri/(Yt*Yt);gs>1&&($t*=gs=nt(gs),Yt*=gs);var kg=$t*$t,Lg=Yt*Yt,hv=(Yn==Kn?-1:1)*nt(ht((kg*Lg-kg*Ri*Ri-Lg*wi*wi)/(kg*Ri*Ri+Lg*wi*wi))),mc=hv*$t*Ri/Yt+(Ut+xn)/2,yc=hv*-Yt*wi/$t+(an+xr)/2,Si=at(((an-yc)/Yt).toFixed(9)),$r=at(((xr-yc)/Yt).toFixed(9));(Si=Ut<mc?ve-Si:Si)<0&&(Si=2*ve+Si),($r=xn<mc?ve-$r:$r)<0&&($r=2*ve+$r),Kn&&Si>$r&&(Si-=2*ve),!Kn&&$r>Si&&($r-=2*ve)}var Rg=$r-Si;if(ht(Rg)>fn){var kv=$r,Lv=xn,Rv=xr;Gt=Ht(xn=mc+$t*ke($r=Si+fn*(Kn&&$r>Si?1:-1)),xr=yc+Yt*Ae($r),$t,Yt,Cn,0,Kn,Lv,Rv,[$r,kv,mc,yc])}Rg=$r-Si;var Nv=ke(Si),Dv=Ae(Si),Fv=ke($r),Vv=Ae($r),pv=ze(Rg/4),gv=4/3*($t*pv),vv=4/3*(Yt*pv),mv=[Ut,an],nl=[Ut+gv*Dv,an-vv*Nv],yv=[xn+gv*Vv,xr-vv*Fv],xv=[xn,xr];if(nl[0]=2*mv[0]-nl[0],nl[1]=2*mv[1]-nl[1],Ln)return[nl,yv,xv].concat(Gt);for(var _v=[],Bv=(Gt=[nl,yv,xv].concat(Gt).join().split(",")).length,Hs=0;Hs<Bv;Hs++)_v[Hs]=Hs%2?Ct(Gt[Hs-1],Gt[Hs],Tn).y:Ct(Gt[Hs],Gt[Hs+1],Tn).x;return _v}function qn(Ut){var an=function Dn(Ut){if((!Array.isArray(Ut)||!Array.isArray(Ut&&Ut[0]))&&(Ut=function $n(Ut){if(!Ut)return null;var an={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},$t=[];return String(Ut).replace(z,function(Yt,Cn,Yn){var Kn=[],xn=Cn.toLowerCase();for(Yn.replace(K,function(xr,Ln){Ln&&Kn.push(+Ln)}),"m"===xn&&Kn.length>2&&($t.push([Cn].concat(Kn.splice(0,2))),xn="l",Cn="m"===Cn?"l":"L");Kn.length>=an[xn]&&($t.push([Cn].concat(Kn.splice(0,an[xn]))),an[xn]););}),$t}(Ut)),!Ut||!Ut.length)return[["M",0,0]];for(var xn,an=[],$t=0,Yt=0,Cn=0,Yn=0,xr=Ut.length,Ln=0;Ln<xr;Ln++){var fn=[];an.push(fn);var Gt,St,Tn=Ut[Ln];if((xn=Tn[0])!=xn.toUpperCase())switch(fn[0]=xn.toUpperCase(),fn[0]){case"A":fn[1]=Tn[1],fn[2]=Tn[2],fn[3]=Tn[3],fn[4]=Tn[4],fn[5]=Tn[5],fn[6]=+Tn[6]+$t,fn[7]=+Tn[7]+Yt;break;case"V":fn[1]=+Tn[1]+Yt;break;case"H":fn[1]=+Tn[1]+$t;break;case"M":for(Cn=+Tn[1]+$t,Yn=+Tn[2]+Yt,Gt=Tn.length,St=1;St<Gt;St++)fn[St]=+Tn[St]+(St%2?$t:Yt);break;default:for(Gt=Tn.length,St=1;St<Gt;St++)fn[St]=+Tn[St]+(St%2?$t:Yt)}else for(var wi=Tn.length,Ri=0;Ri<wi;Ri++)fn[Ri]=Tn[Ri];switch(fn[0]){case"Z":$t=+Cn,Yt=+Yn;break;case"H":$t=fn[1];break;case"V":Yt=fn[1];break;case"M":Cn=fn[fn.length-2],Yn=fn[fn.length-1],$t=fn[fn.length-2],Yt=fn[fn.length-1];break;default:$t=fn[fn.length-2],Yt=fn[fn.length-1]}}return an}(Ut),$t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Yt(Gt,St,wi){var Ri,gs;if(!Gt)return["C",St.x,St.y,St.x,St.y,St.x,St.y];switch(Gt[0]in{T:1,Q:1}||(St.qx=null,St.qy=null),Gt[0]){case"M":St.X=Gt[1],St.Y=Gt[2];break;case"A":Gt=0===parseFloat(Gt[1])||0===parseFloat(Gt[2])?["L",Gt[6],Gt[7]]:["C"].concat(Ht.apply(0,[St.x,St.y].concat(Gt.slice(1))));break;case"S":"C"===wi||"S"===wi?(Ri=2*St.x-St.bx,gs=2*St.y-St.by):(Ri=St.x,gs=St.y),Gt=["C",Ri,gs].concat(Gt.slice(1));break;case"T":"Q"===wi||"T"===wi?(St.qx=2*St.x-St.qx,St.qy=2*St.y-St.qy):(St.qx=St.x,St.qy=St.y),Gt=["C"].concat(bt(St.x,St.y,St.qx,St.qy,Gt[1],Gt[2]));break;case"Q":St.qx=Gt[1],St.qy=Gt[2],Gt=["C"].concat(bt(St.x,St.y,Gt[1],Gt[2],Gt[3],Gt[4]));break;case"H":Gt=["L"].concat(Gt[1],St.y);break;case"V":Gt=["L"].concat(St.x,Gt[1])}return Gt}function Cn(Gt,St){if(Gt[St].length>7){Gt[St].shift();for(var wi=Gt[St];wi.length;)Yn[St]="A",Gt.splice(St++,0,["C"].concat(wi.splice(0,6)));Gt.splice(St,1),xr=an.length}}for(var Yn=[],Kn="",xn="",xr=an.length,Ln=0;Ln<xr;Ln++){an[Ln]&&(Kn=an[Ln][0]),"C"!==Kn&&(Yn[Ln]=Kn,Ln>0&&(xn=Yn[Ln-1])),an[Ln]=Yt(an[Ln],$t,xn),"A"!==Yn[Ln]&&"C"===Kn&&(Yn[Ln]="C"),Cn(an,Ln);var fn=an[Ln],Tn=fn.length;$t.x=fn[Tn-2],$t.y=fn[Tn-1],$t.bx=parseFloat(fn[Tn-4])||$t.x,$t.by=parseFloat(fn[Tn-3])||$t.y}return(!an[0][0]||"M"!==an[0][0])&&an.unshift(["M",0,0]),an}return function(Ut){return qn(Ut).join(",").split(",").join(" ")}}(),_.namespace=n,_.g=v,_}(),ei={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},ti=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,ei.classNamePrefix.length)!==ei.classNamePrefix&&(n=ei.classNamePrefix+n),n}).join(" ")},F=function(e){return e&&e.toString().split(" ").map(function(n){return n.substr(0,ei.classNamePrefix.length)===ei.classNamePrefix&&(n=n.substr(ei.classNamePrefix.length)),n}).join(" ")},J=function(e,n){for(var t={},r={},o=De.namespace.svg,s=n||o,c=document.createDocumentFragment(),p=[e,c,s];p.length>0;){s=p.pop();for(var m=p.pop(),w=p.pop(),I=0,_=w.length;I<_;I++){var U=w[I];if(!U.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var te=U.tagName;U.hasOwnProperty("namespaceURI")&&(s=U.namespaceURI);var oe=document.createElementNS(s,te),Se=s===o,Pe=Se?De:Mt,Ve=U.attributes;Ve&&Pe(oe).attr(Ve);var Ne=U.style;if(Ne&&Mt(oe).css(Ne),U.hasOwnProperty("className")){var k=U.className;Se?oe.className.baseVal=k:oe.className=k}if(U.hasOwnProperty("textContent")&&(oe.textContent=U.textContent),U.hasOwnProperty("selector")){var z=U.selector;if(t[z])throw new Error("json-dom-parser: selector must be unique");t[z]=oe,Pe(oe).attr("joint-selector",z)}if(U.hasOwnProperty("groupSelector")){var K=U.groupSelector;Array.isArray(K)||(K=[K]);for(var ie=0,ve=K.length;ie<ve;ie++){var Ae=K[ie],ke=r[Ae];ke||(ke=r[Ae]=[]),ke.push(oe)}}m.appendChild(oe);var ze=U.children;Array.isArray(ze)&&p.push(ze,oe,s)}}return{fragment:c,selectors:t,groupSelectors:r}},ae=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},pe=function(e,n,t){for(var o,r=Array.isArray(n)?n:n.split(t||"/"),s=0,c=r.length;s<c;){if(o=r[s++],Object(e)!==e||!(o in e))return;e=e[o]}return e},Oe=function(e,n){return"string"!=typeof n&&"number"!=typeof n&&(n=String(n)),!("constructor"===n&&"function"==typeof e[n]||"__proto__"===n)},we=function(e,n,t,r){const o=Array.isArray(n)?n:n.split(r||"/"),s=o.length-1;let c=e,p=0;for(;p<s;p++){const m=o[p];if(!Oe(c,m))return e;c=c[m]||(c[m]={})}return c[o[s]]=t,e},l=function(e,n,t){const r=Array.isArray(n)?n:n.split(t||"/"),o=r.length-1;let s=e,c=0;for(;c<o;c++){const p=r[c];if(!Oe(s,p))return e;const m=s[p];if(!m)return e;s=m}return delete s[r[o]],e},C=function(e){return C.id=C.id||1,e.id=void 0===e.id?"j_"+C.id++:e.id,e.id},N=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},D=function(e){var n=e,t=e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0];if(t){for(var r in e)void 0===t[r]&&(t[r]=e[r]);n=t}var o=n.target;if(o){var s=o.correspondingUseElement;s&&(n.target=s)}return n},X=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var n=0;e=function(t){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),s=setTimeout(function(){t(r+o)},o);return n=r+o,s}}return function(t,r,...o){return e(void 0!==r?t.bind(r,...o):t)}}(),ue=((n="undefined"!=typeof window)&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,n?e.bind(window):e),Ce=function(e){return jn(e)&&"%"===e.slice(-1)},He=function(e,n){var r=parseFloat(e);if(Number.isNaN(r))return null;var s,o={};if(o.value=r,null==n)s="[A-Za-z]*";else if(Array.isArray(n)){if(0===n.length)return null;s=n.join("|")}else jn(n)&&(s=n);var c=function t(p){var m=new RegExp("(?:\\d+(?:\\.\\d+)*)("+p+")$").exec(e);return m?m[1]:null}(s);return null===c?null:(o.unit=c,o)},Vt=function(e){if(Object(e)!==e){var n=0;return isFinite(e)&&(n=+e),{top:n,right:n,bottom:n,left:n}}var t,r,o,s;return t=r=o=s=0,isFinite(e.vertical)&&(t=o=+e.vertical),isFinite(e.horizontal)&&(r=s=+e.horizontal),isFinite(e.top)&&(t=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(o=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:t,right:r,bottom:o,left:s}},zt={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var n=e*e,t=n*e;return 4*(e<.5?t:3*(e-n)+t-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var n=0,t=1;;n+=t,t/=2)if(e>=(7-4*n)/11){var r=(11-6*n-11*e)/4;return-r*r+t*t}},reverse:function(e){return function(n){return 1-e(1-n)}},reflect:function(e){return function(n){return.5*(n<.5?e(2*n):2-e(2-2*n))}},clamp:function(e,n,t){return n=n||0,t=t||1,function(r){var o=e(r);return o<n?n:o>t?t:o}},back:function(e){return e||(e=1.70158),function(n){return n*n*((e+1)*n-e)}},elastic:function(e){return e||(e=1.5),function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*e/3*n)}}},jr={number:function(e,n){var t=n-e;return function(r){return e+t*r}},object:function(e,n){var t=Object.keys(e);return function(r){var o,s,c={};for(o=t.length-1;-1!=o;o--)c[s=t[o]]=e[s]+(n[s]-e[s])*r;return c}},hexColor:function(e,n){var t=parseInt(e.slice(1),16),r=parseInt(n.slice(1),16),o=255&t,s=(255&r)-o,c=65280&t,p=(65280&r)-c,m=16711680&t,w=(16711680&r)-m;return function(I){return"#"+(1<<24|o+s*I&255|c+p*I&65280|m+w*I&16711680).toString(16).slice(1)}},unit:function(e,n){var t=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=t.exec(e),o=t.exec(n),s=o[1].indexOf("."),c=s>0?o[1].length-s-1:0,p=+o[1]-(e=+r[1]),m=r[2];return function(w){return(e+p*w).toFixed(c)+m}}},En={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return Tr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return Tr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var n=Number.isFinite(e.x)?e.x:2;return Tr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[n,e.y]:n})},dropShadow:function(e){var n="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Tr(n)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Tr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-n),b:.7152-.7152*(1-n),c:.0722-.0722*(1-n),d:.2126-.2126*(1-n),e:.7152+.2848*(1-n),f:.0722-.0722*(1-n),g:.2126-.2126*(1-n),h:.0722+.9278*(1-n)})},sepia:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Tr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-n),b:.769-.769*(1-n),c:.189-.189*(1-n),d:.349-.349*(1-n),e:.686+.314*(1-n),f:.168-.168*(1-n),g:.272-.272*(1-n),h:.534-.534*(1-n),i:.131+.869*(1-n)})},saturate:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Tr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-n})},hueRotate:function(e){return Tr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Tr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:1-n})},brightness:function(e){return Tr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var n=Number.isFinite(e.amount)?e.amount:1;return Tr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:n,amount2:.5-n/2})}},Tr=function(e){var n=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(t){return t=t||{},e.replace(n,function(r){for(var o=Array.from(arguments),s=o.slice(1,4).find(function(m){return!!m}),c=s.split("."),p=t[c.shift()];void 0!==p&&c.length;)p=p[c.shift()];return void 0!==p?p:""})}},Rt=R.assign,rr=R.defaults,Bi=R.defaultsDeep,ci=R.invokeMap||R.invoke,oo=R.sortedIndexBy||R.sortedIndex,oa=R.uniqBy||R.uniq,hn=R.clone,gr=R.cloneDeep,Hi=R.isEmpty,aa=R.isEqual,Rn=R.isFunction,Pn=R.isPlainObject,pn=R.toArray,gu=R.groupBy,il=R.flattenDeep,es=R.without,ol=R.difference,Us=R.union,Rr=R.has,Er=R.result,Do=R.omit,Ii=R.pick,vr=R.forIn,ts=R.camelCase,vu=R.uniqueId,zr=function(){if(R.mergeWith){var e=Array.from(arguments),n=e[e.length-1],t=Rn(n)?n:Fo;return e.push(function(r,o){var s=t(r,o);return void 0!==s?s:Array.isArray(r)&&!Array.isArray(o)?o:void 0}),R.mergeWith.apply(this,e)}return R.merge.apply(this,arguments)},Nn=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},Sn=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"===Object.prototype.toString.call(e)},jn=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)},Fo=function(){};var e,n,Ur=f(71066);function mu(e){e=oa(e);const n=pn(e).reduce(function(t,r){return t[r.id]=r.clone(),t},{});return pn(e).forEach(function(t){const r=n[t.id];if(r.isLink()){const c=r.source(),p=r.target();c.id&&n[c.id]&&r.prop("source/id",n[c.id].id),p.id&&n[p.id]&&r.prop("target/id",n[p.id].id)}const o=t.get("parent");o&&n[o]&&r.set("parent",n[o].id);const s=pn(t.get("embeds")).reduce(function(c,p){return n[p]&&c.push(n[p].id),c},[]);Hi(s)||r.set("embeds",s)}),n}const yo={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},yu=Object.keys(yo).map(e=>yo[e]).join(""),ji="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Te=/\s/g,Ke=new RegExp(`^(${ji}\\*)?([${yu}])([-+]{1,2}${ji})?$`,"g");function Be(e){throw new Error(`Invalid calc() expression: ${e}`)}function wt(e,n){const t=Ke.exec(e.replace(Te,""));t||Be(e),Ke.lastIndex=0;const[,r=1,o,s=0]=t,{x:c,y:p,width:m,height:w}=n;let I=0;switch(o){case yo.width:I=m;break;case yo.height:I=w;break;case yo.x:I=c;break;case yo.y:I=p;break;case yo.minimum:I=Math.min(w,m);break;case yo.maximum:I=Math.max(w,m);break;case yo.diagonal:I=Math.sqrt(w*w+m*m)}return parseFloat(r)*I+function en(e){if(!e)return 0;const[n]=e;switch(n){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)}function In(e){return"string"==typeof e&&e.includes("calc")}const Bn="calc(".length;function sa(e,n){let t=e,r=0;for(;;){let o=t.indexOf("calc(",r);if(-1===o)return t;let s=o+Bn,c=1;e:for(;;){switch(t[s]){case"(":c++;break;case")":if(c--,0===c)break e;break;case void 0:Be(t)}s++}let p=t.slice(o+Bn,s);In(p)&&(p=sa(p,n));const m=String(wt(p,n));t=t.slice(0,o)+m+t.slice(s+1),r=o+m.length}}function Vo(e,n){return function(t,r){var o=Ce(t);t=parseFloat(t),o&&(t/=100);var s={};if(isFinite(t)){var c=o||t>=0&&t<=1?t*r[n]:Math.max(t+r[n],0);s[e]=c}return s}}function Q(e,n,t){return function(r,o){var c,s=Ce(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var p=o[t]();c=s||r>0&&r<1?p[e]+o[n]*r:p[e]+r}var m=me();return m[e]=c||0,m}}function de(e,n,t){return function(r,o){var s;s="middle"===r?o[n]/2:r===t?o[n]:isFinite(r)?r>-1&&r<1?-o[n]*r:-r:Ce(r)?o[n]*parseFloat(r)/100:0;var c=me();return c[e]=-(o[e]+s),c}}function be(e,n){var t="joint-shape",r=n&&n.resetOffset;return function(o,s,c){var p=Mt(c),m=p.data(t);if(!m||m.value!==o){var w=e(o);m={value:o,shape:w,shapeBBox:w.bbox()},p.data(t,m)}var I=m.shape.clone(),_=m.shapeBBox.clone(),U=_.origin(),te=s.origin();_.x=te.x,_.y=te.y;var oe=s.maxRectScaleToFit(_,te);return I.scale(0===_.width||0===s.width?1:oe.sx,0===_.height||0===s.height?1:oe.sy,U),r&&I.translate(-U.x,-U.y),I}}function Ye(e){var t=be(function n(r){return new Pt(De.normalizePathData(r))},e);return function(r,o,s){return{d:t(r,o,s).serialize()}}}function Ie(e){var n=be(Vn,e);return function(t,r,o){return{points:n(t,r,o).serialize()}}}function Je(e,n){var t=new me(1,0);return function(r){var o,s,c=this[e](r);return c?(s=n.rotate?c.vector().vectorAngle(t):0,o=c.start):(o=this.path.start,s=0),0===s?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+s+")"}}}function Ge(e){return function(t,r,o){const s=De(o);s.attr(e)!==t&&s.attr(e,t)}}function dt(e,n,t){return void 0!==t.text}function vt(){return this.model.isLink()}function Bt(e){var n={},t=e.stroke;"string"==typeof t&&(n.stroke=t,n.fill=t);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(n["stroke-opacity"]=r,n["fill-opacity"]=r),n}function jt(e){const{paper:n}=this;return`url(#${"pattern"===e.type?n.definePattern(e):n.defineGradient(e)})`}const ct={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Ge("href")},xlinkHref:{set:Ge("xlink:href")},filter:{qualify:Pn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Pn,set:jt},stroke:{qualify:Pn,set:jt},sourceMarker:{qualify:Pn,set:function(e,n,t,r){return e=Rt(Bt(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Pn,set:function(e,n,t,r){return e=Rt(Bt(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Pn,set:function(e,n,t,r){return e=Rt(Bt(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,n,t){return!t.textWrap||!Pn(t.textWrap)},set:function(e,n,t,r){var o=Mt(t),s="joint-text",c=o.data(s),p=Ii(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:m}=p;In(m)&&(p.x=sa(m,n));var w=p.fontSize=r["font-size"]||r.fontSize,I=JSON.stringify([e,p]);if(void 0===c||c!==I){w&&t.setAttribute("font-size",w);var _=p.textPath;if(Nn(_)){var U=_.selector;if("string"==typeof U){var te=this.findBySelector(U)[0];te instanceof SVGPathElement&&(p.textPath=Rt({"xlink:href":"#"+te.id},_))}}De(t).text(""+e,p),o.data(s,I)}}},textWrap:{qualify:Pn,set:function(e,n,t,r){var o=e.width||0,s={};s.width=Ce(o)?n.width*parseFloat(o)/100:o<=0?n.width+o:o;var c=e.height||0;s.height=Ce(c)?n.height*parseFloat(c)/100:c<=0?n.height+c:c;var p,m=e.text;void 0===m&&(m=r.text),p=void 0!==m?function(e,n,t={},r={}){var o=n.width,s=n.height,c=r.svgDocument||De("svg").node,p=De("tspan").node,m=De("text").attr(t).append(p).node,w=document.createTextNode("");m.style.opacity=0,m.style.display="block",p.style.display="block",p.appendChild(w),c.appendChild(m),r.svgDocument||document.body.appendChild(c);var I=r.separator||" ",_=r.eol||"\n",U=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,te=r.maxLineCount;Sn(te)||(te=1/0);for(var Ve,Ne,k,oe=e.split(I),Se=[],Pe=[],z=0,K=0,ie=oe.length;z<ie;z++){var ve=oe[z];if(ve){var Ae=!1;if(_&&ve.indexOf(_)>=0){if(ve.length>1){for(var ke=ve.split(_),ze=0,at=ke.length-1;ze<at;ze++)ke.splice(2*ze+1,0,_);oe.splice(z,1,...ke.filter($t=>""!==$t)),z--,ie=oe.length;continue}Pe[++K]="",Ae=!0}if(!Ae)if(w.data=Pe[K]?Pe[K]+" "+ve:ve,p.getComputedTextLength()<=o)Pe[K]=w.data,(Ve||Ne)&&(Se[K++]=!0,Ve=0,Ne=0);else{if(!Pe[K]||Ve){var nt=!!Ve;if(Ve=ve.length-1,nt||!Ve){if(!Ve){if(!Pe[K]){Pe=[];break}oe.splice(z,2,ve+oe[z+1]),ie--,Se[K++]=!0,z--;continue}oe[z]=ve.substring(0,Ve),oe[z+1]=ve.substring(Ve)+(void 0===oe[z+1]?"":oe[z+1])}else{if(Ne)oe.splice(z,2,oe[z]+oe[z+1]),Ne=0;else{var ht=ve.search(U);ht>-1&&ht!==ve.length-1&&0!==ht&&(Ne=ht+1,Ve=0),oe.splice(z,1,ve.substring(0,Ne||Ve),ve.substring(Ne||Ve)),ie++}K&&!Se[K-1]&&K--}z--;continue}K++,z--}var bt=null;if(Pe.length>te)bt=te-1;else if(void 0!==s){var Ct;void 0===k&&(k=(Ct="auto"===t.lineHeight?{value:1.5,unit:"em"}:He(t.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===Ct.unit&&(k*=m.getBBox().height)),k*Pe.length>s&&(bt=Math.floor(s/k)-1)}if(null!==bt){Pe.splice(bt+1);var Ht=r.ellipsis;if(!Ht||bt<0)break;"string"!=typeof Ht&&(Ht="\u2026");var $n=Pe[bt];if(!$n&&!Ae)break;var qn,Ut,Dn=$n.length;do{if(Ut=$n[Dn],qn=$n.substring(0,Dn),Ut?Ut.match(I)&&(qn+=Ut):qn+="string"==typeof I?I:" ",w.data=qn+=Ht,p.getComputedTextLength()<=o){Pe[bt]=qn;break}Dn--}while(Dn>=0);break}}}return r.svgDocument?c.removeChild(m):document.body.removeChild(c),Pe.join(_)}(""+m,s,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount}):"",ct.text.set.call(this,p,n,t,r)}},title:{qualify:function(e,n){return n instanceof SVGElement},set:function(e,n,t){var r=Mt(t),o="joint-title",s=r.data(o);if(void 0===s||s!==e){r.data(o,e);var c=t.firstChild;if(c&&"TITLE"===c.tagName.toUpperCase())c.textContent=e;else{var p=document.createElementNS(t.namespaceURI,"title");p.textContent=e,t.insertBefore(p,c)}}}},lineHeight:{qualify:dt},textVerticalAnchor:{qualify:dt},textPath:{qualify:dt},annotations:{qualify:dt},eol:{qualify:dt},displayEmpty:{qualify:dt},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:Pn,set:function(e,n,t){Mt(t).css(e)}},html:{set:function(e,n,t){Mt(t).html(e+"")}},ref:{},refX:{position:Q("x","width","origin")},refY:{position:Q("y","height","origin")},refDx:{position:Q("x","width","corner")},refDy:{position:Q("y","height","corner")},refWidth:{set:Vo("width","width")},refHeight:{set:Vo("height","height")},refRx:{set:Vo("rx","width")},refRy:{set:Vo("ry","height")},refRInscribed:{set:function(e){var n=Vo("r","width"),t=Vo("r","height");return function(r,o){return(o.height>o.width?n:t)(r,o)}}()},refRCircumscribed:{set:function(e,n){var t=Ce(e);e=parseFloat(e),t&&(e/=100);var o,r=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(o=t||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:o}}},refCx:{set:Vo("cx","width")},refCy:{set:Vo("cy","height")},xAlignment:{offset:de("x","width","right")},yAlignment:{offset:de("y","height","bottom")},resetOffset:{offset:function(e,n){return e?{x:-n.x,y:-n.y}:{x:0,y:0}}},refDResetOffset:{set:Ye({resetOffset:!0})},refDKeepOffset:{set:Ye({resetOffset:!1})},refPointsResetOffset:{set:Ie({resetOffset:!0})},refPointsKeepOffset:{set:Ie({resetOffset:!1})},connection:{qualify:vt,set:function({stubs:e=0}){let n;if(isFinite(e)&&0!==e){let t;t=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),o=r.divideAtLength(t),s=r.divideAtLength(-t);o&&s&&(n=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:n||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:vt,set:Je("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:vt,set:Je("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:vt,set:Je("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:vt,set:Je("getTangentAtRatio",{rotate:!1})}};ct["xlink:href"]=ct.xlinkHref,["transform","d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{ct[e]={qualify:In,set:function(t,r){return{[e]:sa(t,r)}}}}),ct.refR=ct.refRInscribed,ct.refD=ct.refDResetOffset,ct.refPoints=ct.refPointsResetOffset,ct.atConnectionLength=ct.atConnectionLengthKeepGradient,ct.atConnectionRatio=ct.atConnectionRatioKeepGradient,ct.refX2=ct.refX,ct.refY2=ct.refY,ct.refWidth2=ct.refWidth,ct.refHeight2=ct.refHeight,ct["ref-x"]=ct.refX,ct["ref-y"]=ct.refY,ct["ref-dy"]=ct.refDy,ct["ref-dx"]=ct.refDx,ct["ref-width"]=ct.refWidth,ct["ref-height"]=ct.refHeight,ct["x-alignment"]=ct.xAlignment,ct["y-alignment"]=ct.yAlignment;const gn=ct,vn=Ur.Model.extend({constructor:function(e,n){var t,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=vu("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(r=this.parse(r,n)||{}),(t=Er(this,"defaults"))&&(r=zr({},t,r)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,n,t){throw new Error("Must define a translate() method.")},toJSON:function(){const n=Er(this.constructor.prototype,"defaults").attrs||{},r={};vr(this.attributes.attrs,function(s,c){const p=n[c];vr(s,function(m,w){Nn(m)&&!Array.isArray(m)?vr(m,function(I,_){(!p||!p[w]||!aa(p[w][_],I))&&(r[c]=r[c]||{},(r[c][w]||(r[c][w]={}))[_]=I)}):(!p||!aa(p[w],m))&&(r[c]=r[c]||{},r[c][w]=m)})});const o=gr(Do(this.attributes,"attrs"));return o.attrs=r,o},initialize:function(e){const n=this.getIdAttribute();(!e||!(n in e))&&this.set(n,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},processPorts:function(){var e=this.ports,n={};vr(this.get("attrs"),function(s,c){s&&s.port&&(void 0!==s.port.id?n[s.port.id]=s.port:n[s.port]={id:s.port})});var t={};vr(e,function(s,c){n[c]||(t[c]=!0)}),this.graph&&!Hi(t)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(s){t[s.get("target").port]&&s.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(s){t[s.get("source").port]&&s.remove()})),this.ports=n},remove:function(e={}){const{graph:n,collection:t}=this;if(!n)return t&&t.remove(this,e),this;n.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const o=this.getEmbeddedCells();for(let s=0,c=o.length;s<c;s++){const p=o[s];p&&p.remove(e)}return this.trigger("remove",this,n.attributes.cells,e),n.stopBatch("remove"),this},toFront:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.maxZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this],t=t-r.length+1;var o=n.get("cells"),s=o.indexOf(this)!==o.length-r.length;s||(s=r.some(function(c,p){return c.get("z")!==t+p})),s&&(this.startBatch("to-front"),t+=r.length,r.forEach(function(c,p){c.set("z",t+p,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var n=this.graph;if(n){e=e||{};var r,t=n.minZIndex();e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst})).unshift(this):r=[this];var s=0!==n.get("cells").indexOf(this);s||(s=r.some(function(c,p){return c.get("z")!==t+p})),s&&(this.startBatch("to-back"),t-=r.length,r.forEach(function(c,p){c.set("z",t+p,e)}),this.stopBatch("to-back"))}return this},parent:function(e,n){return void 0===e?this.get("parent"):this.set("parent",e,n)},embed:function(e,n){const t=Array.isArray(e)?e:[e];if(!this.canEmbed(t))throw new Error("Recursive embedding not allowed.");return this._embedCells(t,n),this},unembed:function(e,n){const t=Array.isArray(e)?e:[e];return this._unembedCells(t,n),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(e,n){const t="embed";this.startBatch(t);const r=Rt([],this.get("embeds"));e.forEach(o=>{r[o.isLink()?"unshift":"push"](o.id),o.parent(this.id,n)}),this.set("embeds",oa(r),n),this.stopBatch(t)},_unembedCells:function(e,n){const t="unembed";this.startBatch(t),e.forEach(r=>r.unset("parent",n)),this.set("embeds",es(this.get("embeds"),...e.map(r=>r.id)),n),this.stopBatch(t)},getParentCell:function(){var e=this.parent(),n=this.graph;return e&&n&&n.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var n=this.getParentCell();n;)e.push(n),n=n.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},this.graph){var n;if(e.deep)if(e.breadthFirst){n=[];for(var t=this.getEmbeddedCells();t.length>0;){var r=t.shift();n.push(r),t.push.apply(t,r.getEmbeddedCells())}}else(n=this.getEmbeddedCells()).forEach(function(o){n.push.apply(n,o.getEmbeddedCells(e))});else n=pn(this.get("embeds")).map(this.graph.getCell,this.graph);return n}return[]},isEmbeddedIn:function(e,n){var t=jn(e)?e:e.id,r=this.parent();if(n=rr({deep:!0},n),this.graph&&n.deep){for(;r;){if(r===t)return!0;r=this.graph.getCell(r).parent()}return!1}return r===t},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return pn(mu([this].concat(this.getEmbeddedCells({deep:!0}))));var n=Ur.Model.prototype.clone.apply(this,arguments);return n.set(this.getIdAttribute(),this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(e,n,t){var r="/",o=jn(e);if(o||Array.isArray(e)){if(arguments.length>1){var s,c;o?c=(s=e).split("/"):(s=e.join(r),c=e.slice());var p=c[0],m=c.length;if((t=t||{}).propertyPath=s,t.propertyValue=n,t.propertyPathArray=c,1===m)return this.set(p,n,t);for(var w={},I=w,_=p,U=1;U<m;U++){var te=c[U],oe=Number.isFinite(o?Number(te):te);I=I[_]=oe?[]:{},_=te}w=we(w,c,n,"/");var Se=zr({},this.attributes);t.rewrite&&l(Se,s,"/");var Pe=zr(Se,w);return this.set(p,Pe[p],t)}return pe(this.attributes,e,r)}return this.set(zr({},this.attributes,e),n)},removeProp:function(e,n){n=n||{};var t=Array.isArray(e)?e:e.split("/"),r=t[0];if("attrs"===r&&(n.dirty=!0),1===t.length)return this.unset(e,n);var o=t.slice(1),s=gr(this.get(r));return l(s,o,"/"),this.set(r,s,n)},attr:function(e,n,t){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):jn(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,n){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,n)},transition:function(e,n,t,r){r=r||"/",t=Rt({duration:100,delay:10,timingFunction:zt.linear,valueFunction:jr.number},t);var c,s=0,p=function(_){var U,te,oe;(te=(_-=s=s||_)/t.duration)<1?this._transitionIds[e]=U=X(p):(te=1,delete this._transitionIds[e]),oe=c(t.timingFunction(te)),t.transitionId=U,this.prop(e,oe,t),U||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:m}=this;let w;return w=setTimeout(_=>{m[e]&&(m[e]=es(m[e],w),0===m[e].length&&delete m[e]),this.stopPendingTransitions(e,r),c=t.valueFunction(pe(this.attributes,e,r),n),this._transitionIds[e]=X(_),this.trigger("transition:start",this,e)},t.delay,p),m[e]||(m[e]=[]),m[e].push(w),w},getTransitions:function(){return Us(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,n="/"){const{_scheduledTransitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(s=>aa(o,s.split(n).slice(0,o.length)))}return r.forEach(o=>{t[o].forEach(c=>clearTimeout(c)),delete t[o]}),this},stopPendingTransitions(e,n="/"){const{_transitionIds:t={}}=this;let r=Object.keys(t);if(e){const o=e.split(n);r=r.filter(s=>aa(o,s.split(n).slice(0,o.length)))}r.forEach(o=>{ue(t[o]),delete t[o],this.trigger("transition:end",this,o)})},stopTransitions:function(e,n="/"){return this.stopScheduledTransitions(e,n),this.stopPendingTransitions(e,n),this},addTo:function(e,n){return e.addCell(this,n),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,n){return this.graph&&this.graph.startBatch(e,Rt({},n,{cell:this})),this},stopBatch:function(e,n){return this.graph&&this.graph.stopBatch(e,Rt({},n,{cell:this})),this},getChangeFlag:function(e){var n=0;if(!e)return n;for(var t in e)!e.hasOwnProperty(t)||!this.hasChanged(t)||(n|=e[t]);return n},angle:function(){return 0},position:function(){return new me(0,0)},getPointFromConnectedLink:function(){return new me},getBBox:function(){return new gt(0,0,0,0)},getPointRotatedAroundCenter(e,n,t){const r=new me(n,t);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,n){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,n))},getRelativePointFromAbsolute(e,n){return this.getPointRotatedAroundCenter(this.angle(),e,n).difference(this.position())}},{getAttributeDefinition:function(e){var n=this.attributes;return n&&n[e]||gn[e]},define:function(e,n,t,r){t=Rt({defaults:Bi({type:e},n,this.prototype.defaults)},t);var o=this.extend(t,r);return"undefined"!=typeof joint&&Rr(joint,"shapes")&&we(joint.shapes,e,o,"."),o}}),It=vn.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,n,t){return void 0===e?hn(this.get("source")):e instanceof vn?((r=hn(n)||{}).id=e.id,this.set("source",r,t)):Pn(e)?this.set("source",r=e,n):((r=hn(n)||{}).x=e.x,r.y=e.y,this.set("source",r,t));var r},target:function(e,n,t){return void 0===e?hn(this.get("target")):e instanceof vn?((r=hn(n)||{}).id=e.id,this.set("target",r,t)):Pn(e)?this.set("target",r=e,n):((r=hn(n)||{}).x=e.x,r.y=e.y,this.set("target",r,t));var r},router:function(e,n,t){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?hn(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("router",o?e:{name:e,args:n},o?n:t)},connector:function(e,n,t){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?hn(r):r:this.get("smooth")?{name:"smooth"}:null}var o="object"==typeof e||"function"==typeof e;return this.set("connector",o?e:{name:e,args:n},o?n:t)},label:function(e,n,t){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],n,t)},labels:function(e,n){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,n))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,n,t){if(!n)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1),r.splice(e,0,n),this.labels(r,t)},appendLabel:function(e,n){return this.insertLabel(-1,e,n)},removeLabel:function(e,n){var t=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.labels(t,n)},vertex:function(e,n,t){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var o=this._normalizeVertex(n);return this.prop(["vertices",e],o,t)},vertices:function(e,n){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var t=[],r=0;r<e.length;r++){var o=e[r],s=this._normalizeVertex(o);t.push(s)}return this.set("vertices",t,n)},insertVertex:function(e,n,t){if(!n)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(e=isFinite(e)&&null!==e?0|e:o)<0&&(e=o+e+1);var s=this._normalizeVertex(n);return r.splice(e,0,s),this.vertices(r,t)},removeVertex:function(e,n){var t=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,t.splice(e,1),this.vertices(t,n)},_normalizeVertex:function(e){return Pn(e)?e:{x:e.x,y:e.y}},translate:function(e,n,t){return(t=t||{}).translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+n}},t)},scale:function(e,n,t,r){return this.applyToPoints(function(o){return me(o).scale(e,n,t).toJSON()},r)},applyToPoints:function(e,n){if(!Rn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var t={},{source:r,target:o}=this.attributes;r.id||(t.source=e(r)),o.id||(t.target=e(o));var s=this.vertices();return s.length>0&&(t.vertices=s.map(e)),this.set(t,n)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new me(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new me(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(me),this.getTargetPoint()];return new Vn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var n;if(this.graph){var t=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();t&&r&&(n=t===r||t.isEmbeddedIn(r)?r:r.isEmbeddedIn(t)?t:this.graph.getCommonAncestor(t,r)),o&&(!n||n.id!==o.id)&&o.unembed(this,e),n&&n.embed(this,e)}return n},hasLoop:function(e){e=e||{};var{source:n,target:t}=this.attributes,r=n.id,o=t.id;if(!r||!o)return!1;var s=r===o;if(!s&&e.deep&&this.graph){var c=this.getSourceCell(),p=this.getTargetCell();s=c.isEmbeddedIn(p)||p.isEmbeddedIn(c)}return s},getSourceCell:function(){const{graph:e,attributes:n}=this;var t=n.source;return t&&t.id&&e&&e.getCell(t.id)||null},getSourceElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:n}=this;var t=n.target;return t&&t.id&&e&&e.getCell(t.id)||null},getTargetElement:function(){var e=this,n={};do{if(n[e.id])return null;n[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var n=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});e=this.graph.getCommonAncestor.apply(this.graph,n)}return e||null},isRelationshipEmbeddedIn:function(e){var n=jn(e)||Sn(e)?e:e.id,t=this.getRelationshipAncestor();return!!t&&(t.id===n||t.isEmbeddedIn(n))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},n={};return n.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,n.position=e.position,n.attrs=e.attrs,n.size=e.size,n}},{endsEqual:function(e,n){return e.id===n.id&&(e.port===n.port||!e.port&&!n.port)}});function lr(e,n,t){var r=e.toJSON();return r.angle=n||0,rr({},t,r)}function hr(e,n,t){return e.map(function(r,o,s){var c=this.pointAt((o+.5)/s.length);return(r.dx||r.dy)&&c.offset(r.dx||0,r.dy||0),lr(c.round(),0,r)},si(n,t))}function Gr(e,n,t,r){var o=n.center(),s=n.width/n.height,c=n.topMiddle(),p=Cr.fromRect(n);return e.map(function(m,w,I){var _=t+r(w,I.length),U=c.clone().rotate(o,-_).scale(s,1,o),te=m.compensateRotation?-p.tangentTheta(U):0;return(m.dx||m.dy)&&U.offset(m.dx||0,m.dy||0),m.dr&&U.move(o,m.dr),lr(U.round(),te,m)})}function Wn(e,n){var t=n.x;jn(t)&&(t=parseFloat(t)/100*e.width);var r=n.y;return jn(r)&&(r=parseFloat(r)/100*e.height),mi(t||0,r||0)}const Sa=function(e,n,t){return e.map(Wn.bind(null,n))},Bo=function(e,n,t){return t.fn(e,n,t)},fi=function(e,n,t){return hr(e,Wn(n,t.start||n.origin()),Wn(n,t.end||n.corner()))},Gs=function(e,n,t){return hr(e,n.origin(),n.bottomLeft())},ns=function(e,n,t){return hr(e,n.topRight(),n.corner())},xu=function(e,n,t){return hr(e,n.origin(),n.topRight())},pd=function(e,n,t){return hr(e,n.bottomLeft(),n.corner())},gd=function(e,n,t){var o=t.step||360/e.length;return Gr(e,n,t.startAngle||0,function(s){return s*o})},vd=function(e,n,t){var o=t.step||20;return Gr(e,n,t.startAngle||0,function(s,c){return(s+.5-c/2)*o})};function xo(e,n){return Bi({},e,n,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Ws(e,n,t,r){r=rr({},r,{offset:15});var c,p,m,w,o=n.center().theta(e),s=_u(n),I=r.offset,_=0;o<s[1]||o>s[2]?(m=".3em",c=I,p=0,w="start"):o<s[0]?(m="0",c=0,p=-I,t?(_=-90,w="start"):w="middle"):o<s[3]?(m=".3em",c=-I,p=0,w="end"):(m=".6em",c=0,p=I,t?(_=90,w="start"):w="middle");var U=Math.round;return xo({x:U(c),y:U(p),angle:_,attrs:{".":{y:m,"text-anchor":w}}})}function _u(e){var n=e.center(),t=n.theta(e.origin()),r=n.theta(e.bottomLeft()),o=n.theta(e.corner());return[t,n.theta(e.topRight()),o,r]}function _c(e,n,t,r){var s,c,p,m,o=n.center().theta(e),w=(r=rr({},r,{offset:15})).offset,I=0,_=_u(n);o<_[1]||o>_[2]?(p=".3em",s=-w,c=0,m="end"):o<_[0]?(p=".6em",s=0,c=w,t?(I=90,m="start"):m="middle"):o<_[3]?(p=".3em",s=w,c=0,m="start"):(p="0em",s=0,c=-w,t?(I=-90,m="start"):m="middle");var U=Math.round;return xo({x:U(s),y:U(c),angle:I,attrs:{".":{y:p,"text-anchor":m}}})}function al(e,n,t){t=rr({},t,{offset:20});var m,r=mi(0,0),o=-e.theta(r),s=o,c=e.clone().move(r,t.offset).difference(e).round(),p=".3em";(o+90)%180==0?(m=n?"end":"middle",!n&&-270===o&&(p="0em")):o>-270&&o<-90?(m="start",s=o-180):m="end";var w=Math.round;return xo({x:w(c.x),y:w(c.y),angle:n?s:0,attrs:{".":{y:p,"text-anchor":m}}})}const md=function(e,n,t){return xo(t,n)},yd=function(e,n,t){return xo(t,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},Wr=function(e,n,t){return xo(t,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},di=function(e,n,t){return xo(t,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},xd=function(e,n,t){return xo(t,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},_d=function(e,n,t){return Ws(e,n,!0,t)},bc=function(e,n,t){return Ws(e,n,!1,t)},bd=function(e,n,t){return _c(e,n,!0,t)},sl=function(e,n,t){return _c(e,n,!1,t)},$s=function(e,n,t){return al(e.difference(n.center()),!1,t)},ul=function(e,n,t){return al(e.difference(n.center()),!0,t)};var rs=function(e){var n=gr(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=S,this.portLabelLayoutNamespace=T,this._init(n)};rs.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(n){return n.group===e})},getGroupPortsMetrics:function(e,n){var t=this.getGroup(e),r=this.getPortsByGroup(e),o=t.position||{},s=o.name,c=this.portLayoutNamespace;c[s]||(s="left");var p=o.args||{},m=r.map(function(_){return _&&_.position&&_.position.args}),w=c[s](m,n,p),I={ports:r,result:[]};return pn(w).reduce(function(_,U,te){var oe=_.ports[te];return _.result.push({portId:oe.id,portTransformation:U,labelTransformation:this._getPortLabelLayout(oe,me(U),n),portAttrs:oe.attrs,portSize:oe.size,labelSize:oe.label.size}),_}.bind(this),I),I.result},_getPortLabelLayout:function(e,n,t){var r=this.portLabelLayoutNamespace,o=e.label.position.name||"left";return r[o]?r[o](n,t,e.label.position.args):null},_init:function(e){if(Nn(e.groups))for(var n=Object.keys(e.groups),t=0,r=n.length;t<r;t++){var o=n[t];this.groups[o]=this._evaluateGroup(e.groups[o])}for(var s=pn(e.items),c=0,p=s.length;c<p;c++)this.ports.push(this._evaluatePort(s[c]))},_evaluateGroup:function(e){return zr(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var n=Rt({},e),t=this.getGroup(e.group);return n.markup=n.markup||t.markup,n.attrs=zr({},t.attrs,n.attrs),n.position=this._createPositionNode(t,n),n.label=zr({},t.label,this._getLabel(n)),n.z=this._getZIndex(t,n),n.size=Rt({},t.size,n.size),n},_getZIndex:function(e,n){return Sn(n.z)?n.z:Sn(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,n){return zr({name:"left",args:{}},e.position,{args:n.args})},_getPosition:function(e,n){var r,t={};Rn(e)?(r="fn",t.fn=e):jn(e)?r=e:void 0===e?r=n?"left":null:Array.isArray(e)?(r="absolute",t.x=e[0],t.y=e[1]):Nn(e)&&(r=e.name,Rt(t,e.args));var o={args:t};return r&&(o.name=r),o},_getLabel:function(e,n){var t=e.label||{},r=t;return r.position=this._getPosition(t.position,n),r}};const Ys={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},n={};pn(e.items).forEach(function(p){n[p.id]=!0});var t=this.previous("ports")||{},r={};pn(t.items).forEach(function(p){n[p.id]||(r[p.id]=!0)});var o=this.graph;o&&!Hi(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach(function(p){r[p.get("target").port]&&p.remove()}),o.getConnectedLinks(this,{outbound:!0}).forEach(function(p){r[p.get("source").port]&&p.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return gr(this.prop("ports/items"))||[]},getGroupPorts:function(e){const n=pn(this.prop(["ports","items"])).filter(t=>t.group===e);return gr(n)},getPort:function(e){return gr(pn(this.prop("ports/items")).find(function(n){return n.id&&n.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,gt(this.size())).reduce(function(t,r){var o=r.portTransformation;return t[r.portId]={x:o.x,y:o.y,angle:o.angle},t},{})},getPortIndex:function(e){var n=Nn(e)?e.id:e;return this._isValidPortId(n)?pn(this.prop("ports/items")).findIndex(function(t){return t.id===n}):-1},addPort:function(e,n){if(!Nn(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var t=Rt([],this.prop("ports/items"));return t.push(e),this.prop("ports/items",t,n),this},insertPort:function(e,n,t){const r="number"==typeof e?e:this.getPortIndex(e);if(!Nn(n)||Array.isArray(n))throw new Error("dia.Element: insertPort requires an object.");const o=Rt([],this.prop("ports/items"));return o.splice(r,0,n),this.prop("ports/items",o,t),this},portProp:function(e,n,t,r){var o=this.getPortIndex(e);if(-1===o)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(n)?s[0]=["ports","items",o].concat(n):jn(n)?s[0]=["ports/items/",o,"/",n].join(""):(s=["ports/items/"+o],Pn(n)&&(s.push(n),s.push(t))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},n=[],t=pn((e=e||{}).items);return t.forEach(function(r){"object"!=typeof r&&n.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),oa(t,"id").length!==t.length&&n.push("Element: found id duplicities in ports."),n},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!Nn(e)},addPorts:function(e,n){return e.length&&this.prop("ports/items",Rt([],this.prop("ports/items")).concat(e),n),this},removePort:function(e,n){const t=n||{},r=this.getPortIndex(e);if(-1!==r){const o=Rt([],this.prop(["ports","items"]));o.splice(r,1),t.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],o,t),this.stopBatch("port-remove")}return this},removePorts:function(e,n){let t,r;if(Array.isArray(e)){if(t=n||{},0===e.length)return this.this;r=Rt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(c){const p=Nn(c)?c.id:c;return s.id===p})})}else t=e||{},r=[];return this.startBatch("port-remove"),t.rewrite=!0,this.prop(["ports","items"],r,t),this.stopBatch("port-remove"),this},_createPortData:function(){var n,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(n=this._portSettingsData.getPorts()),this._portSettingsData=new rs(this.get("ports"));var t=this._portSettingsData.getPorts();if(n){var r=t.filter(function(s){if(!n.find(function(c){return c.id===s.id}))return s}),o=n.filter(function(s){if(!t.find(function(c){return c.id===s.id}))return s});o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},Xs={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],n=this._getContainerElement(),t=0,r=n.node.childNodes.length;t<r;t++)e.push(n.node.childNodes[t]);var o=gu(this.model._portSettingsData.getPorts(),"z"),s="auto";pn(o[s]).forEach(function(I){var _=this._getPortElement(I);n.append(_),e.push(_)},this);for(var c=Object.keys(o),p=0;p<c.length;p++){var m=c[p];if(m!==s){var w=parseInt(m,10);this._appendPorts(o[m],w,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,n,t){var r=this._getContainerElement(),o=pn(e).map(this._getPortElement,this);t[n]||n<0?De(t[Math.max(n,0)]).before(o):r.append(o)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,n){const t=this._portElementsCache[e];if(!t)return null;const r=t.portContentElement.node,o=t.portContentSelectors,[s=null]=this.findBySelector(n,r,o);return s},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){ci(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let n,t,r,o;var s=De(this.portContainerMarkup).addClass("joint-port"),c=this._getPortMarkup(e);if(Array.isArray(c)){var p=this.parseDOMJSON(c,s.node),m=p.fragment;n=m.childNodes.length>1?De("g").append(m):De(m.firstChild),o=p.selectors}else n=De(c),Array.isArray(n)&&(n=De("g").append(n));if(!n)throw new Error("ElementView: Invalid port markup.");n.attr({port:e.id,"port-group":e.group});const w=this._getPortLabelMarkup(e.label);if(Array.isArray(w)){const{fragment:U,selectors:te}=this.parseDOMJSON(w,s.node),oe=U.childNodes.length;oe>0&&(r=te,t=1===oe?De(U.firstChild):De("g").append(U))}else t=De(w),Array.isArray(t)&&(t=De("g").append(t));var I;if(o&&r){for(var _ in r)if(o[_]&&_!==this.selector)throw new Error("ElementView: selectors within port must be unique.");I=Rt({},o,r)}else I=o||r;return s.append(n.addClass("joint-port-body")),t&&s.append(t.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:t,portSelectors:I,portLabelSelectors:r,portContentElement:n,portContentSelectors:o},s},_updatePortGroup:function(e){for(var n=gt(this.model.size()),t=this.model._portSettingsData.getGroupPortsMetrics(e,n),r=0,o=t.length;r<o;r++){var s=t[r],p=this._portElementsCache[s.portId]||{},m=s.portTransformation;this.applyPortTransform(p.portElement,m),this.updateDOMSubtreeAttributes(p.portElement.node,s.portAttrs,{rootBBox:new gt(s.portSize),selectors:p.portSelectors});var w=s.labelTransformation;w&&p.portLabelElement&&(this.applyPortTransform(p.portLabelElement,w,-m.angle||0),this.updateDOMSubtreeAttributes(p.portLabelElement.node,w.attrs,{rootBBox:new gt(s.labelSize),selectors:p.portLabelSelectors}))}},applyPortTransform:function(e,n,t){var r=De.createSVGMatrix().rotate(t||0).translate(n.x||0,n.y||0).rotate(n.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Jr=vn.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),vn.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,n,t){const r=Sn(n);t=(r?t:e)||{};const{parentRelative:o,deep:s,restrictedArea:c}=t;let p;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const m=this.getParentCell();m&&!m.isLink()&&(p=m.get("position"))}if(r){if(p&&(e+=p.x,n+=p.y),s||c){const{x:m,y:w}=this.get("position");this.translate(e-m,n-w,t)}else this.set("position",{x:e,y:n},t);return this}{const m=me(this.get("position"));return o?m.difference(p):m}},translate:function(e,n,t){if(n=n||0,0===(e=e||0)&&0===n)return this;(t=t||{}).translateBy=t.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=t.restrictedArea;if(o&&t.translateBy===this.id)if("function"==typeof o){var s=o.call(this,r.x+e,r.y+n,t);e=s.x-r.x,n=s.y-r.y}else{var c=this.getBBox({deep:!0}),p=r.x-c.x,m=r.y-c.y,w=Math.max(o.x+p,Math.min(o.x+o.width+p-c.width,r.x+e)),I=Math.max(o.y+m,Math.min(o.y+o.height+m-c.height,r.y+n));e=w-r.x,n=I-r.y}var _={x:r.x+e,y:r.y+n};return t.tx=e,t.ty=n,t.transition?(Nn(t.transition)||(t.transition={}),this.transition("position",_,Rt({},t.transition,{valueFunction:jr.object})),ci(this.getEmbeddedCells(),"translate",e,n,t)):(this.startBatch("translate",t),this.set("position",_,t),ci(this.getEmbeddedCells(),"translate",e,n,t),this.stopBatch("translate",t)),this},size:function(e,n,t){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(Nn(e)&&(t=n,n=Sn(e.height)?e.height:r.height,e=Sn(e.width)?e.width:r.width),this.resize(e,n,t))},resize:function(e,n,t){if(this.startBatch("resize",t=t||{}),t.direction){var r=this.get("size");switch(t.direction){case"left":case"right":n=r.height;break;case"top":case"bottom":e=r.width}var c,o=We(this.get("angle")||0),s=this.getBBox();if(o){var p={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[t.direction];t.absolute&&(p+=Math.floor((o+45)/90),p%=4);var m=s[["bottomLeft","corner","topRight","origin"][p]](),w=me(m).rotate(s.center(),-o),I=Math.sqrt(e*e+n*n)/2,_=p*Math.PI/2;_+=Math.atan(p%2==0?n/e:e/n),_-=Lt(o);var U=me.fromPolar(I,_,w);c=me(U).offset(e/-2,n/-2)}else switch(c=s.topLeft(),t.direction){case"top":case"top-right":c.offset(0,s.height-n);break;case"left":case"bottom-left":c.offset(s.width-e,0);break;case"top-left":c.offset(s.width-e,s.height-n)}this.set("size",{width:e,height:n},t),this.position(c.x,c.y,t)}else this.set("size",{width:e,height:n},t);return this.stopBatch("resize",t),this},scale:function(e,n,t,r){var o=this.getBBox().scale(e,n,t);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e={}){const{graph:n}=this;if(!n)throw new Error("Element must be part of a graph.");const t=this.getEmbeddedCells().filter(_=>_.isElement());if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&ci(t,"fitEmbeds",e);const{left:r,right:o,top:s,bottom:c}=Vt(e.padding);let{x:p,y:m,width:w,height:I}=n.getCellsBBox(t);return p-=r,m-=s,w+=r+o,I+=c+s,this.set({position:{x:p,y:m},size:{width:w,height:I}},e),this.stopBatch("fit-embeds"),this},rotate:function(e,n,t,r){if(t){var o=this.getBBox().center(),s=this.get("size"),c=this.get("position");o.rotate(t,this.get("angle")-e);var p=o.x-s.width/2-c.x,m=o.y-s.height/2-c.y;this.startBatch("rotate",{angle:e,absolute:n,origin:t}),this.position(c.x+p,c.y+m,r),this.rotate(e,n,null,r),this.stopBatch("rotate")}else this.set("angle",n?e:(this.get("angle")+e)%360,r);return this},angle:function(){return We(this.get("angle")||0)},getBBox:function(e={}){const{graph:n,attributes:t}=this,{deep:r,rotate:o}=e;if(r&&n){const _=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return _.push(this),n.getCellsBBox(_,e)}const{angle:s=0,position:{x:c,y:p},size:{width:m,height:w}}=t,I=new gt(c,p,m,w);return o&&I.rotateAroundCenter(s),I},getPointFromConnectedLink:function(e,n){var t=this.getBBox(),r=t.center(),o=e.get(n);if(!o)return r;var s=o.port;if(!s||!this.hasPort(s))return r;var c=this.portProp(s,["group"]),p=this.getPortsPositions(c),m=new me(p[s]).offset(t.origin()),w=this.angle();return w&&m.rotate(r,-w),m}});Rt(Jr.prototype,Ys);const ll={cells:function(e){return function(){var n=Array.from(arguments),t=n.length,r=t>0&&n[0]||[],o=t>1&&n[t-1]||{};return Array.isArray(r)||(o instanceof vn?r=n:r instanceof vn&&(n.length>1&&n.pop(),r=n)),o instanceof vn&&(o={}),e.call(this,r,o)}}},Cd=Ur.Collection.extend({initialize:function(e,n){this.cellNamespace=n.cellNamespace?n.cellNamespace:"undefined"!=typeof joint&&Rr(joint,"shapes")?joint.shapes:null,this.graph=n.graph},model:function(e,n){var t=n.collection,s=new("link"===e.type?It:pe(t.cellNamespace,e.type,".")||Jr)(e,n);return n.dry||(s.graph=t.graph),s},comparator:function(e){return e.get("z")||0}}),ua=Ur.Model.extend({initialize:function(e,n){var t=new Cd([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});Ur.Model.prototype.set.call(this,"cells",t),t.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},t.on("add",this._restructureOnAdd,this),t.on("remove",this._restructureOnRemove,this),t.on("reset",this._restructureOnReset,this),t.on("change:source",this._restructureOnChangeSource,this),t.on("change:target",this._restructureOnChangeTarget,this),t.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:n,target:t}=e.attributes;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0),t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:n,target:t}=e.attributes;n.id&&this._out[n.id]&&this._out[n.id][e.id]&&delete this._out[n.id][e.id],t.id&&this._in[t.id]&&this._in[t.id][e.id]&&delete this._in[t.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var n=e.previous("source");n.id&&this._out[n.id]&&delete this._out[n.id][e.id];var t=e.attributes.source;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var n=e.previous("target");n.id&&this._in[n.id]&&delete this._in[n.id][e.id];var t=e.get("target");t.id&&((this._in[t.id]||(this._in[t.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=Ur.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,n){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,n)},set:function(e,n,t){var r;return"object"==typeof e?(r=e,t=n):(r={})[e]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,t),r=Do(r,"cells")),Ur.Model.prototype.set.call(this,r,t)},clear:function(e){e=Rt({},e,{clear:!0});var n=this.get("cells");if(0===n.length)return this;this.startBatch("clear",e);var t=n.sortBy(function(r){return r.isLink()?1:2});do{t.shift().remove(e)}while(t.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,n){var t;if(e instanceof Ur.Model?(t=e.attributes,!e.graph&&(!n||!n.dry)&&(e.graph=this)):t=e,!jn(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,n){return Array.isArray(e)?this.addCells(e,n):(e instanceof Ur.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,n),n||{}),this)},addCells:function(e,n){return 0===e.length||(e=il(e),n.maxPosition=n.position=e.length-1,this.startBatch("add",n),e.forEach(function(t){this.addCell(t,n),n.position--},this),this.stopBatch("add",n)),this},resetCells:function(e,n){var t=pn(e).map(function(r){return this._prepareCell(r,n)},this);return this.get("cells").reset(t,n),this},removeCells:function(e,n){return e.length&&(this.startBatch("remove"),ci(e,"remove",n),this.stopBatch("remove")),this},_removeCell:function(e,n,t){(t=t||{}).clear||(t.disconnectLinks?this.disconnectLinks(e,t):this.removeLinks(e,t)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,n){var t=(n=n||{}).indirect,r=n.inbound,o=n.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=[],c={};function p(_,U){if(vr(_.getOutboundEdges(U.id),function(oe,Se){if(!c[Se]){var Pe=_.getCell(Se);s.push(Pe),c[Se]=!0,t&&(r&&m(_,Pe),o&&p(_,Pe))}}.bind(_)),t&&U.isLink()){var te=U.getTargetCell();te&&te.isLink()&&(c[te.id]||(s.push(te),p(_,te)))}}function m(_,U){if(vr(_.getInboundEdges(U.id),function(oe,Se){if(!c[Se]){var Pe=_.getCell(Se);s.push(Pe),c[Se]=!0,t&&(r&&m(_,Pe),o&&p(_,Pe))}}.bind(_)),t&&U.isLink()){var te=U.getSourceCell();te&&te.isLink()&&(c[te.id]||(s.push(te),m(_,te)))}}if(o&&p(this,e),r&&m(this,e),n.deep){var w=e.getEmbeddedCells({deep:!0}),I={};w.forEach(function(_){_.isElement()&&(I[_.id]=!0)}),w.forEach(function(_){_.isLink()||(o&&vr(this.getOutboundEdges(_.id),function(U,te){if(!c[te]){var oe=this.getCell(te),{source:Se,target:Pe}=oe.attributes,Ve=Se.id,Ne=Pe.id;if(!n.includeEnclosed&&Ve&&I[Ve]&&Ne&&I[Ne])return;s.push(this.getCell(te)),c[te]=!0}}.bind(this)),r&&vr(this.getInboundEdges(_.id),function(U,te){if(!c[te]){var oe=this.getCell(te),{source:Se,target:Pe}=oe.attributes,Ve=Se.id,Ne=Pe.id;if(!n.includeEnclosed&&Ve&&I[Ve]&&Ne&&I[Ne])return;s.push(this.getCell(te)),c[te]=!0}}.bind(this)))},this)}return s},getNeighbors:function(e,n){n||(n={});var t=n.inbound,r=n.outbound;void 0===t&&void 0===r&&(t=r=!0);var o=this.getConnectedLinks(e,n).reduce(function(p,m){var{source:w,target:I}=m.attributes,_=m.hasLoop(n);if(t&&Rr(w,"id")&&!p[w.id]){var U=this.getCell(w.id);U.isElement()&&(_||U&&U!==e&&(!n.deep||!U.isEmbeddedIn(e)))&&(p[w.id]=U)}if(r&&Rr(I,"id")&&!p[I.id]){var te=this.getCell(I.id);te.isElement()&&(_||te&&te!==e&&(!n.deep||!te.isEmbeddedIn(e)))&&(p[I.id]=te)}return p}.bind(this),{});if(e.isLink()){if(t){var s=e.getSourceCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}if(r){var c=e.getTargetCell();c&&c.isElement()&&!o[c.id]&&(o[c.id]=c)}}return pn(o)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(t){for(var r=[],o=t.get("parent");o;)r.push(o),o=this.getCell(o).get("parent");return r},this);e=e.sort(function(t,r){return t.length-r.length});var n=pn(e.shift()).find(function(t){return e.every(function(r){return r.includes(t)})});return this.getCell(n)},getSuccessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},Rt({},n=n||{},{outbound:!0})),t},cloneCells:mu,cloneSubgraph:function(e,n){var t=this.getSubgraph(e,n);return this.cloneCells(t)},getSubgraph:function(e,n){n=n||{};var t=[],r={},o=[],s=[];return pn(e).forEach(function(c){r[c.id]||(t.push(c),r[c.id]=c,c.isLink()?s.push(c):o.push(c)),n.deep&&c.getEmbeddedCells({deep:!0}).forEach(function(m){r[m.id]||(t.push(m),r[m.id]=m,m.isLink()?s.push(m):o.push(m))})}),s.forEach(function(c){var{source:p,target:m}=c.attributes;if(p.id&&!r[p.id]){var w=this.getCell(p.id);t.push(w),r[w.id]=w,o.push(w)}if(m.id&&!r[m.id]){var I=this.getCell(m.id);t.push(this.getCell(m.id)),r[I.id]=I,o.push(I)}},this),o.forEach(function(c){this.getConnectedLinks(c,n).forEach(function(m){var{source:w,target:I}=m.attributes;!r[m.id]&&w.id&&r[w.id]&&I.id&&r[I.id]&&(t.push(m),r[m.id]=m)})},this),t},getPredecessors:function(e,n){var t=[];return this.search(e,function(r){r!==e&&t.push(r)},Rt({},n=n||{},{inbound:!0})),t},search:function(e,n,t){(t=t||{}).breadthFirst?this.bfs(e,n,t):this.dfs(e,n,t)},bfs:function(e,n,t={}){const r={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){var c=s.shift();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const p=this.getNeighbors(c,t);for(let m=0,w=p.length;m<w;m++){const I=p[m];o[I.id]=o[c.id]+1,s.push(I)}}},dfs:function(e,n,t={}){const r={},o={},s=[];for(s.push(e),o[e.id]=0;s.length>0;){const c=s.pop();if(r[c.id]||(r[c.id]=!0,!1===n.call(this,c,o[c.id])))continue;const p=this.getNeighbors(c,t),m=s.length;for(let w=0,I=p.length;w<I;w++){const _=p[w];o[_.id]=o[c.id]+1,s.splice(m,0,_)}}},getSources:function(){var e=[];return vr(this._nodes,function(n,t){(!this._in[t]||Hi(this._in[t]))&&e.push(this.getCell(t))}.bind(this)),e},getSinks:function(){var e=[];return vr(this._nodes,function(n,t){(!this._out[t]||Hi(this._out[t]))&&e.push(this.getCell(t))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||Hi(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Hi(this._out[e.id])},isSuccessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{outbound:!0}),t},isPredecessor:function(e,n){var t=!1;return this.search(e,function(r){if(r===n&&r!==e)return t=!0,!1},{inbound:!0}),t},isNeighbor:function(e,n,t){var r=(t=t||{}).inbound,o=t.outbound;void 0===r&&void 0===o&&(r=o=!0);var s=!1;return this.getConnectedLinks(e,t).forEach(function(c){var{source:p,target:m}=c.attributes;if(r&&Rr(p,"id")&&p.id===n.id||o&&Rr(m,"id")&&m.id===n.id)return s=!0,!1}),s},disconnectLinks:function(e,n){this.getConnectedLinks(e).forEach(function(t){t.set(t.attributes.source.id===e.id?"source":"target",{x:0,y:0},n)})},removeLinks:function(e,n){ci(this.getConnectedLinks(e),"remove",n)},findModelsFromPoint:function(e){return this.getElements().filter(n=>n.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,n={}){const t=new gt(e),{strict:r=!1}=n,o=r?"containsRect":"intersect";return this.getElements().filter(s=>t[o](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,n={}){const{searchBy:t="bbox"}=n,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===t?this.findModelsInArea(r):this.findModelsFromPoint(r[t]())).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,n={}){const{rotate:t=!0}=n;return pn(e).reduce(function(r,o){const s=o.getBBox({rotate:t});return s?r?r.union(s):s:r},null)},translate:function(e,n,t){var r=this.getCells().filter(function(o){return!o.isEmbedded()});return ci(r,"translate",e,n,t),this},resize:function(e,n,t){return this.resizeCells(e,n,this.getCells(),t)},resizeCells:function(e,n,t,r){var o=this.getCellsBBox(t);if(o){var s=Math.max(e/o.width,0),c=Math.max(n/o.height,0);ci(t,"scale",s,c,o.origin(),r)}return this},startBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Rt({},n,{batchName:e}))},stopBatch:function(e,n){return n=n||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Rt({},n,{batchName:e}))},hasActiveBatch:function(e){const n=this._batches;let t;return t=0===arguments.length?Object.keys(n):Array.isArray(e)?e:[e],t.some(r=>n[r]>0)}},{validations:{multiLinks:function(e,n){var{source:t,target:r}=n.attributes;if(t.id&&r.id){var o=n.getSourceCell();if(o&&e.getConnectedLinks(o,{outbound:!0}).filter(function(p){var{source:m,target:w}=p.attributes;return m&&m.id===t.id&&(!m.port||m.port===t.port)&&w&&w.id===r.id&&(!w.port||w.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,n){var{source:t,target:r}=n.attributes;return t.id&&r.id}}});!function(e,n,t){if(jn(t)){if(!ll[t])throw new Error('Unknown wrapper: "'+t+'"');t=ll[t]}if(!Rn(t))throw new Error("Wrapper must be a function.");pn(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=t(e[r])})}(ua.prototype,0,ll.cells);const Ks={exportElement:function(e){return e.size()},exportLink:function(e){var n=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:n.width||0,height:n.height||0}},importElement:function(e,n,t){var r=this.getCell(n),o=t.node(n);e.setPosition?e.setPosition(r,o):r.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(e,n,t){const o=this.getCell(n.name),s=t.edge(n),c=s.points||[],p=new Vn(c);if(e.setVertices||e.setLinkVertices)if(Rn(e.setVertices))e.setVertices(o,c);else{p.simplify({threshold:.001});const m=p.points.map(I=>I.toJSON());o.set("vertices",m.slice(1,m.length-1))}if(e.setLabels&&"x"in s&&"y"in s){const m={x:s.x,y:s.y};if(Rn(e.setLabels))e.setLabels(o,m,c);else{const w=p.closestPointLength(m),I=p.pointAtLength(w),_=w/p.length(),U=new me(m).difference(I).toJSON();o.label(0,{position:{distance:_,offset:U}})}}},layout:function(e,n){var t;t=e instanceof ua?e:(new ua).resetCells(e,{dry:!0,sort:!1}),e=null;const r=(n=rr(n||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var o=Ks.toGraphLib(t,{graphlib:n.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:n.exportElement,setEdgeLabel:n.exportLink,setEdgeName:function(I){return I.id}}),s={},c=n.marginX||0,p=n.marginY||0;if(n.rankDir&&(s.rankdir=n.rankDir),n.align&&(s.align=n.align),n.nodeSep&&(s.nodesep=n.nodeSep),n.edgeSep&&(s.edgesep=n.edgeSep),n.rankSep&&(s.ranksep=n.rankSep),n.ranker&&(s.ranker=n.ranker),c&&(s.marginx=c),p&&(s.marginy=p),o.setGraph(s),r.layout(o,{debugTiming:!!n.debugTiming}),t.startBatch("layout"),Ks.fromGraphLib(o,{importNode:this.importElement.bind(t,n),importEdge:this.importLink.bind(t,n)}),n.resizeClusters){var m=o.nodes().filter(function(I){return o.children(I).length>0}).map(t.getCell.bind(t)).sort(function(I,_){return _.getAncestors().length-I.getAncestors().length});ci(m,"fitEmbeds",{padding:n.clusterPadding})}t.stopBatch("layout");var w=o.graph();return new gt(c,p,Math.abs(w.width-2*c),Math.abs(w.height-2*p))},fromGraphLib:function(e,n){var t=(n=n||{}).importNode||Fo,r=n.importEdge||Fo,o=this instanceof ua?this:new ua;return e.nodes().forEach(function(s){t.call(o,s,e,o,n)}),e.edges().forEach(function(s){r.call(o,s,e,o,n)}),o},toGraphLib:function(e,n){const t=(n=n||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===t)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=Ii(n,"directed","compound","multigraph"),o=new t.Graph(r),s=n.setNodeLabel||Fo,c=n.setEdgeLabel||Fo,p=n.setEdgeName||Fo,m=e.get("cells"),w=0,I=m.length;w<I;w++){var _=m.at(w);if(_.isLink()){var U=_.get("source"),te=_.get("target");if(!U.id||!te.id)break;o.setEdge(U.id,te.id,c(_),p(_))}else if(o.setNode(_.id,s(_)),o.isCompound()&&_.has("parent")){var oe=_.get("parent");m.has(oe)&&o.setParent(_.id,oe)}}return o}};ua.prototype.toGraphLib=function(e){return Ks.toGraphLib(this,e)},ua.prototype.fromGraphLib=function(e,n){return Ks.fromGraphLib.call(this,e,n)};const wd={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,n){return this._tests[e]=n},test:function(e){var n=this._tests[e];if(!n)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var t=this._results[e];if(void 0!==t)return t;try{t=n()}catch(r){t=!1}return this._results[e]=t,t}},Cc=(Jr.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Jr.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Jr.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}));Jr.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Jr.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Jr.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Jr.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Jr.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Jr.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Jr.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Jr.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Jr.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,n){if(void 0===e)return this.attr("body/lateralArea");var t=Ce(e);return this.attr({body:{lateralArea:e},top:t?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},n)}},{attributes:{lateralArea:{set:function(e,n){var t=Ce(e);t&&(e=parseFloat(e)/100);var r=n.x,o=n.y,s=n.width,c=n.height,m=t?c*e:e,w=De.KAPPA,I=w*(s/2),_=w*(t?c*e:e),te=r+s/2,oe=r+s,Se=o+m,Pe=Se-m,Ve=o+c-m,Ne=o+c;return{d:["M",r,Se,"L",r,Ve,"C",r,Ve+_,te-I,Ne,te,Ne,"C",te+I,Ne,oe,Ve+_,oe,Ve,"L",oe,Se,"C",oe,Se-_,te+I,Pe,te,Pe,"C",te-I,Pe,r,Se-_,r,Se,"Z"].join(" ")}}}}});var Ed=wd.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Jr.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Ed]},{attributes:{text:{set:function(e,n,t,r){if(!(t instanceof HTMLElement)){var o=r.style||{},s={text:e,width:-5,height:"100%"},c=Rt({textVerticalAnchor:"middle"},o);return gn.textWrap.set.call(this,s,n,t,c),{fill:o.color||null}}t.textContent=e},position:function(e,n,t){if(t instanceof SVGElement)return n.center()}}}});const ca=It.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),is=(It.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),It.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),{}),bs=Ur.View.extend({options:{},theme:null,themeClassNamePrefix:ti("theme-"),requireSetThemeOverride:!1,defaultTheme:ei.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Rt({},this.options,e),Ur.View.call(this,e)},initialize:function(){is[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(e){if(e||(e=Er(this,"children")),e){var n=this.svgElement,r=J(e,De.namespace[n?"svg":"xhtml"]);(n?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,n){for(var t=n;t&&1===t.nodeType;){var r=t.getAttribute(e);if(r)return r;if(t===this.el)return null;t=t.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Er(this,"el"));else{var e=Er(this,"tagName"),n=Rt({},Er(this,"attributes")),t=Rt({},Er(this,"style"));this.id&&(n.id=Er(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(n),this._setStyle(t)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(De.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof Ur.$?e:Ur.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=De(this.el))},_ensureElClassName:function(){var e=Er(this,"className");if(e){var n=ti(e);this.svgElement?this.vel.removeClass(e).addClass(n):this.$el.removeClass(e).addClass(n)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,n){return n=n||{},this.theme&&this.requireSetThemeOverride&&!n.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var n=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(n):this.$el.addClass(n),this},removeThemeClassName:function(e){var n=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(n):this.$el.removeClass(n),this},onSetTheme:function(e,n){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),is[this.cid]=null,Ur.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,n,t){if(!n)return this;t||(t={});var r=this.getEventNamespace();for(var o in n){var s=n[o];"function"!=typeof s&&(s=this[s]),s&&Mt(e).on(o+r,t,s.bind(this))}return this},undelegateElementEvents:function(e){return Mt(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,n){return e||(e=Er(this,"documentEvents")),this.delegateElementEvents(document,e,n)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,n){if(!e)throw new Error("eventData(): event object required.");var t=e.data,r="__"+this.cid+"__";return void 0===n?t&&t[r]||{}:(t||(t=e.data={}),t[r]||(t[r]={}),Rt(t[r],n),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),n=e[0]&&Rt({},e[0])||{},t=e[1]&&Rt({},e[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,Ur.View.extend.call(this,n,t)}});if(Mt.event&&!("dbltap"in Mt.event.special)){const e=ei.doubleTapInterval,n=30;Mt.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...r){const{handleObj:o,target:s}=t,c=Mt.data(s),p=(new Date).getTime(),m="lastTouch"in c?p-c.lastTouch:0;m<e&&m>n?(c.lastTouch=null,t.type=o.origType,o.handler.call(this,t,...r)):c.lastTouch=p}}}function bo(e){return e?Array.isArray(e)?e:[e]:[]}const Ta=bs.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate(e,n){const{paper:t}=e;this.cellView=e,this.nodeSelector=n,t&&(this.updateRequested=!0,t.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:n}=this;return this.update(e,n),this.mount(),this.transform(),0},findNode(e,n=null){let t;if("string"==typeof n)[t]=e.findBySelector(n);else if(Pn(n)){const r=e.model.isLink(),{label:o=null,port:s,selector:c}=n;r&&null!==o?t=e.findLabelNode(o,c):!r&&s?t=e.findPortNode(s,c):[t]=e.findBySelector(c)}else n&&(t=De.toNode(n),t instanceof SVGElement||(t=null));return t||null},mount(){const{MOUNTABLE:e,cellView:n,el:t,options:r,transformGroup:o}=this;if(!e||o)return;const{vel:s,paper:c}=n,{layer:p}=r;if(p){const m=this.transformGroup=De("g").addClass("highlight-transform").append(t);c.getLayerView(p).insertSortedNode(m.node,r.z)}else(!t.parentNode||t.nextSibling)&&s.append(t)},unmount(){const{MOUNTABLE:e,transformGroup:n,vel:t}=this;!e||(n?(this.transformGroup=null,n.remove()):t.remove())},transform(){const{transformGroup:e,cellView:n,updateRequested:t}=this;if(!e||n.model.isLink()||t)return;const r=n.getRootTranslateMatrix(),o=n.getRootRotateMatrix(),s=r.multiply(o);e.attr("transform",De.matrixToTransformString(s))},update(){const{node:e,cellView:n,nodeSelector:t,updateRequested:r,id:o}=this;if(r)return;const s=this.node=this.findNode(n,t);e&&this.unhighlight(n,e),s?(this.highlight(n,s),this.mount()):(this.unmount(),n.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:e,cellView:n,id:t,constructor:r}=this;e&&this.unhighlight(n,e),this.unmount(),r._removeRef(n,t)},highlight(e,n){},unhighlight(e,n){}},{_views:{},highlight:function(e,n,t){const r=this.uniqueId(n,t);this.add(e,n,r,t)},unhighlight:function(e,n,t){const r=this.uniqueId(n,t);this.remove(e,r)},get(e,n=null){const{cid:t}=e,{_views:r}=this,o=r[t];if(null===n){const s=[];if(!o)return s;for(let c in o){const p=o[c];p instanceof this&&s.push(p)}return s}if(!o)return null;if(n in o){const s=o[n];if(s instanceof this)return s}return null},add(e,n,t,r={}){if(!t)throw new Error("dia.HighlighterView: An ID required.");const o=Ta.get(e,t);o&&o.remove();const s=new this(r);return s.id=t,this._addRef(e,t,s),s.requestUpdate(e,n),s},_addRef(e,n,t){const{cid:r}=e,{_views:o}=this;let s=o[r];s||(s=o[r]={}),s[n]=t},_removeRef(e,n){const{cid:t}=e,{_views:r}=this,o=r[t];if(o){n&&delete o[n];for(let s in o)return;delete r[t]}},remove(e,n=null){bo(this.get(e,n)).forEach(t=>{t.remove()})},update(e,n=null,t=!1){bo(this.get(e,n)).forEach(r=>{(t||r.UPDATABLE)&&r.update()})},transform(e,n=null){bo(this.get(e,n)).forEach(t=>{t.UPDATABLE&&t.transform()})},uniqueId:(e,n="")=>De.ensureId(e)+JSON.stringify(n)}),Cs={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Mn=bs.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],n=this.model.get("type");return n&&n.toLowerCase().split(".").forEach(function(t,r,o){e.push("type-"+o.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,o,s,e={},n={},t=0,c=Er(this,"presentationAttributes");for(var p in c)if(c.hasOwnProperty(p)){var m=c[p];for(Array.isArray(m)||(m=[m]),r=0,o=m.length;r<o;r++){var w=e[s=m[r]];w||(w=e[s]=1<<t++),n[p]|=w}}var I=Er(this,"initFlag");for(Array.isArray(I)||(I=[I]),r=0,o=I.length;r<o;r++)e[s=I[r]]||(e[s]=1<<t++);if(t>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=n},hasFlag:function(e,n){return e&this.getFlag(n)},removeFlag:function(e,n){return e^e&this.getFlag(n)},getFlag:function(e){var n=this._flags;if(!n)return 0;var t=0;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)t|=n[e[r]];else t|=n[e];return t},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||C(this),bs.call(this,e)},initialize:function(){this.setFlags(),bs.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},onMount(){},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,n){var t=e.getChangeFlag(this._presentationAttributes);n.updateHandled||!t||(n.dirty&&this.hasFlag(t,"UPDATE")&&(t|=this.getFlag("RENDER")),n.tool&&(n.async=!1),this.requestUpdate(t,n))},requestUpdate:function(e,n){const{paper:t}=this;t&&e>0&&t.requestViewUpdate(this,e,this.UPDATE_PRIORITY,n)},parseDOMJSON:function(e,n){var t=J(e),r=t.selectors,o=t.groupSelectors;for(var s in o){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=o[s]}if(n){var c=this.selector;if(r[c])throw new Error("dia.CellView: ambiguous root selector.");r[c]=n}return{fragment:t.fragment,selectors:r}},can:function(e){var n=Rn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Nn(n)&&!1!==n[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e)}(n)&&!1!==n},findBySelector:function(e,n,t){if(n||(n=this.el),t||(t=this.selectors),!e||"."===e)return[n];if(t){var r=t[e];if(r)return Array.isArray(r)?r:[r]}return ei.useCSSSelectors?Mt(n).find(e).toArray():[]},notify:function(e){if(this.paper){var n=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(n)),this.paper.trigger.apply(this.paper,[e,this].concat(n))}},getBBox:function(e){var n;if(e&&e.useModelGeometry){var t=this.model;n=t.getBBox().bbox(t.angle())}else n=this.getNodeBBox(this.el);return this.paper.localToPaperRect(n)},getNodeBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix(),o=this.getRootRotateMatrix();return De.transformRect(n,r.multiply(o).multiply(t))},getNodeUnrotatedBBox:function(e){var n=this.getNodeBoundingRect(e),t=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return De.transformRect(n,r.multiply(t))},getRootTranslateMatrix:function(){var n=this.model.position();return De.createSVGMatrix().translate(n.x,n.y)},getRootRotateMatrix:function(){var e=De.createSVGMatrix(),n=this.model,t=n.angle();if(t){var r=n.getBBox(),o=r.width/2,s=r.height/2;e=e.translate(o,s).rotate(t).translate(-o,-s)}return e},_notifyHighlight:function(e,n,t={}){const{el:r}=this;let o;if([o=r]="string"==typeof n?this.findBySelector(n):this.$(n),t.partial=o!==r,void 0===t.type){let s;switch(!0){case t.embedding:s=Cs.EMBEDDING;break;case t.connecting:s=Cs.CONNECTING;break;case t.magnetAvailability:s=Cs.MAGNET_AVAILABILITY;break;case t.elementAvailability:s=Cs.ELEMENT_AVAILABILITY;break;default:s=Cs.DEFAULT}t.type=s}return this.notify(e,o,t),this},highlight:function(e,n){return this._notifyHighlight("cell:highlight",e,n)},unhighlight:function(e,n={}){return this._notifyHighlight("cell:unhighlight",e,n)},findMagnet:function(e){const n=this.el;let t=this.$(e)[0];t||(t=n);do{const r=t.getAttribute("magnet"),o=t===n;if((r||o)&&"false"!==r)return t;if(o)return;t=t.parentNode}while(t)},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const[r]=this.findBySelector(t);if(r)return r}return e},getSelector:function(e,n){var t;if(e===this.el)return"string"==typeof n&&(t="> "+n),t;if(e){var r=De(e).index()+1;t=e.tagName+":nth-child("+r+")",n&&(t+=" > "+n),t=this.getSelector(e.parentNode,t)}return t},addLinkFromMagnet:function(e,n,t){var r=this.paper,o=r.model,s=r.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,n,t,s,"source"),target:{x:n,y:t}}).addTo(o,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(e,...n){var t=this.model,r=t.id,o=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),c={id:r};return null!=s&&(c.magnet=s),null!=o?(c.port=o,!t.hasPort(o)&&!s&&(c.selector=this.getSelector(e))):null==s&&this.el!==e&&(c.selector=this.getSelector(e)),this.customizeLinkEnd(c,e,...n)},customizeLinkEnd:function(e,n,t,r,o,s){const{paper:c}=this,{connectionStrategy:p}=c.options;if("function"==typeof p){var m=p.call(c,e,this,n,new me(t,r),o,s,c);if(m)return m}return e},getMagnetFromLinkEnd:function(e){var s,n=this.el,t=e.port,r=e.magnet,o=this.model;return null!=t&&o.isElement()&&o.hasPort(t)?s=this.findPortNode(t,r)||n:(r||(r=e.selector),!r&&null!=t&&(r='[port="'+t+'"]'),s=this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,n,t,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(n,t,r);o.notifyPointerdown(e,t,r),o.eventData(e,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:o})},dragLink:function(e,n,t){var r=this.eventData(e),o=r.linkView;if(o)o.pointermove(e,n,t);else{var s=this.paper,c=s.options.magnetThreshold,p=this.getEventTarget(e),m=r.targetMagnet;if("onleave"===c){if(m===p||De(m).contains(p))return}else if(s.eventData(e).mousemoved<=c)return;this.dragLinkStart(e,m,n,t)}},dragLinkEnd:function(e,n,t){var o=this.eventData(e).linkView;!o||(o.pointerup(e,n,t),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,n){Hi(n)||(e instanceof SVGElement?De(e).attr(n):Mt(e).attr(n))},processNodeAttributes:function(e,n){var t,r,o,s,c,p,m,w,I,_=[];for(t in n)!n.hasOwnProperty(t)||(r=n[t],!(o=this.getAttributeDefinition(t))||Rn(o.qualify)&&!o.qualify.call(this,r,e,n)?(p||(p={}),p[N(t)]=r):(jn(o.set)&&(p||(p={}),p[o.set]=r),null!==r&&_.push(t,o)));for(s=0,c=_.length;s<c;s+=2)r=n[t=_[s]],Rn((o=_[s+1]).set)&&(m||(m={}),m[t]=r),Rn(o.position)&&(w||(w={}),w[t]=r),Rn(o.offset)&&(I||(I={}),I[t]=r);return{raw:n,normal:p,set:m,position:w,offset:I}},updateRelativeAttributes:function(e,n,t,r){r||(r={});var o,s,p=n.raw||{},m=n.normal||{},w=n.set,I=n.position,_=n.offset;for(o in w){s=w[o];var U=this.getAttributeDefinition(o).set.call(this,s,t.clone(),e,p);Nn(U)?Rt(m,U):void 0!==U&&(m[o]=U)}if(e instanceof HTMLElement)this.setNodeAttributes(e,m);else{var Pe,Ve,Ne,te=m.transform,oe=De.transformStringToMatrix(te),Se=me(oe.e,oe.f);if(te&&(m=Do(m,"transform"),oe.e=oe.f=0),I||_){var k=this.getNodeScale(e,r.scalableNode);Pe=k.sx,Ve=k.sy}var z=!1;for(o in I)s=I[o],(Ne=this.getAttributeDefinition(o).position.call(this,s,t.clone(),e,p))&&(Se.offset(me(Ne).scale(Pe,Ve)),z||(z=!0));this.setNodeAttributes(e,m);var K=!1;if(_){var ie=this.getNodeBoundingRect(e);if(ie.width>0&&ie.height>0){var ve=De.transformRect(ie,oe).scale(1/Pe,1/Ve);for(o in _)s=_[o],(Ne=this.getAttributeDefinition(o).offset.call(this,s,ve,e,p))&&(Se.offset(me(Ne).scale(Pe,Ve)),K||(K=!0))}}(void 0!==te||z||K)&&(Se.round(1),oe.e=Se.x,oe.f=Se.y,e.setAttribute("transform",De.matrixToTransformString(oe)))}},getNodeScale:function(e,n){var t,r;if(n&&n.contains(e)){var o=n.scale();t=1/o.sx,r=1/o.sy}else t=1,r=1;return{sx:t,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var n=this.metrics;if(!n)return{};var t=De.ensureId(e),r=n[t];return r||(r=n[t]={}),r},getNodeData:function(e){var n=this.nodeCache(e);return n.data||(n.data={}),n.data},getNodeBoundingRect:function(e){var n=this.nodeCache(e);return void 0===n.boundingRect&&(n.boundingRect=De(e).getBBox()),new gt(n.boundingRect)},getNodeMatrix:function(e){var n=this.nodeCache(e);if(void 0===n.magnetMatrix){var t=this.rotatableNode||this.el;n.magnetMatrix=De(e).getTransformToElement(t)}return De.createSVGMatrix(n.magnetMatrix)},getNodeShape:function(e){var n=this.nodeCache(e);return void 0===n.geometryShape&&(n.geometryShape=De(e).toGeometryShape()),n.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,n,t,r){var o,s,c,p,m={},w=[];for(var I in e)if(e.hasOwnProperty(I)&&Pn(c=e[I])){var _=t[I]=this.findBySelector(I,n,r);for(o=0,s=_.length;o<s;o++){var U=_[o];p=De.ensureId(U);var te=r&&r[I]===U,oe=m[p];if(oe){oe.array||(w.push(p),oe.array=!0,oe.attributes=[oe.attributes],oe.selectedLength=[oe.selectedLength]);var Se=oe.attributes,Pe=oe.selectedLength;if(te)Se.unshift(c),Pe.unshift(-1);else{var Ve=oo(Pe,s);Se.splice(Ve,0,c),Pe.splice(Ve,0,s)}}else m[p]={attributes:c,selectedLength:te?-1:s,node:U,array:!1}}}for(o=0,s=w.length;o<s;o++)(c=m[p=w[o]]).attributes=zr({},...c.attributes.reverse());return m},getEventTarget:function(e,n={}){const{target:t,type:r,clientX:o=0,clientY:s=0}=e;return n.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,s):t},updateDOMSubtreeAttributes:function(e,n,t){t||(t={}),t.rootBBox||(t.rootBBox=gt()),t.selectors||(t.selectors=this.selectors);var p,m,w,I,_,r={},o={},s=[],c=[],U=t.roAttributes,te=this.findNodesAttributes(U||n,e,r,t.selectors),oe=U?this.findNodesAttributes(n,e,r,t.selectors):te;for(var Se in te)if((_=this.processNodeAttributes(m=(I=te[Se]).node,w=I.attributes)).set||_.position||_.offset){var Ne,Pe=oe[Se]&&oe[Se].attributes,Ve=Pe&&void 0===w.ref?Pe.ref:w.ref;if(Ve){if(!(Ne=(r[Ve]||this.findBySelector(Ve,e,t.selectors))[0]))throw new Error('dia.CellView: "'+Ve+'" reference does not exist.')}else Ne=null;if(p={node:m,refNode:Ne,processedAttributes:_,allAttributes:Pe},Ne){var k=c.findIndex(function(ht){return ht.refNode===m});k>-1?c.splice(k,0,p):c.push(p)}else s.push(p)}else this.setNodeAttributes(m,_.normal);s.push(...c);for(var z,K=0,ie=s.length;K<ie;K++){m=(p=s[K]).node,Ne=p.refNode;var ve=De(t.rotatableNode),Ae=Ne?De.ensureId(Ne):"",ke=!!ve&&!!Ne&&ve.contains(Ne),ze=o[Ae];if(!ze){var at=ke?ve:e;ze=o[Ae]=Ne?De(Ne).getBBox({target:at}):t.rootBBox}U?(_=this.processNodeAttributes(m,p.allAttributes),this.mergeProcessedAttributes(_,p.processedAttributes)):_=p.processedAttributes;var nt=ze;ke&&!ve.contains(m)&&(z||(z=De.transformStringToMatrix(ve.attr("transform"))),nt=De.transformRect(ze,z)),this.updateRelativeAttributes(m,_,nt,t)}},mergeProcessedAttributes:function(e,n){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Rt(e.set,n.set),Rt(e.position,n.position),Rt(e.offset,n.offset);var t=e.normal&&e.normal.transform;void 0!==t&&n.normal&&(n.normal.transform=t),e.normal=n.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var n=this._toolsView;return!(!n||e&&n.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(e){var n=this._toolsView;return n&&n.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Ta.remove(this)},updateHighlighters:function(e=!1){Ta.update(this,null,e)},transformHighlighters:function(){Ta.transform(this)},pointerdblclick:function(e,n,t){this.notify("cell:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){this.notify("cell:pointerclick",e,n,t)},contextmenu:function(e,n,t){this.notify("cell:contextmenu",e,n,t)},pointerdown:function(e,n,t){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(e,{graph:o})),this.notify("cell:pointerdown",e,n,t)},pointermove:function(e,n,t){this.notify("cell:pointermove",e,n,t)},pointerup:function(e,n,t){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,n,t),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,n,t,r){this.notify("cell:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){this.notify(n,e,t,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:n}=this;n.isAsync()&&n.dumpView(this);const t=this.getEventTarget(e,{fromPoint:!0}),r=n.findView(t);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Highlighting:Cs,addPresentationAttributes:function(e){return zr({},Er(this.prototype,"presentationAttributes"),e,function(n,t){if(n&&t&&("string"==typeof n&&(n=[n]),"string"==typeof t&&(t=[t]),Array.isArray(n)&&Array.isArray(t)))return oa(n.concat(t))})}}),On={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Cu=Mn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=Mn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){Mn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[On.UPDATE],position:[On.TRANSLATE,On.TOOLS],size:[On.RESIZE,On.PORTS,On.TOOLS],angle:[On.ROTATE,On.TOOLS],markup:[On.RENDER],ports:[On.PORTS]},initFlag:[On.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,n){const{useCSSSelectors:t}=ei;this.hasFlag(e,On.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,On.RENDER))this.render(),this.updateTools(n),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[On.RENDER,On.UPDATE,On.RESIZE,On.TRANSLATE,On.ROTATE,On.PORTS,On.TOOLS]);else{let o=!1;this.hasFlag(e,On.RESIZE)&&(this.resize(n),o=!0,e=this.removeFlag(e,[On.RESIZE,On.UPDATE])),this.hasFlag(e,On.UPDATE)&&(this.update(this.model,null,n),e=this.removeFlag(e,On.UPDATE),o=!0,t&&(e=this.removeFlag(e,On.PORTS))),this.hasFlag(e,On.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,On.TRANSLATE),r=!0),this.hasFlag(e,On.ROTATE)&&(this.rotate(),e=this.removeFlag(e,On.ROTATE),r=!0),this.hasFlag(e,On.PORTS)&&(this._renderPorts(),o=!0,e=this.removeFlag(e,On.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,On.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,On.TOOLS)),e},_initializePorts:function(){},update:function(e,n){this.cleanNodesCache();const{useCSSSelectors:t}=ei;t&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new gt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:n===o?null:n}),t&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.ElementView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el),t=this.selectors=n.selectors;this.rotatableNode=De(t[this.rotatableSelector])||null,this.scalableNode=De(t[this.scalableSelector])||null,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=this.vel;n.append(De(e)),this.rotatableNode=n.findOne(".rotatable"),this.scalableNode=n.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),ei.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),n=this.getRotateString();n&&(e+=" "+n),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,n=e.angle;if(!n)return null;var t=e.size;return"rotate("+n+","+t.width/2+","+t.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var n=this.model,t=n.angle(),r=n.size(),o=this.scalableNode,s=!1;o.node.getElementsByTagName("path").length>0&&(s=!0);var c=o.getBBox({recursive:s});o.attr("transform","scale("+r.width/(c.width||1)+","+r.height/(c.height||1)+")");var w=this.rotatableNode,I=w&&w.attr("transform");if(I){w.attr("transform",I+" rotate("+-t+","+r.width/2+","+r.height/2+")");var _=o.getBBox({target:this.paper.cells});n.set("position",{x:_.x,y:_.y},Rt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const n=e.model||this.model,r=(e.paper||this.paper).model,o=e.initialZIndices={},s=n.getEmbeddedCells({deep:!0}),c=r.getConnectedLinks(n,{deep:!0,includeEnclosed:!0});[n,...s,...c].forEach(w=>o[w.id]=w.attributes.z),n.startBatch("to-front"),n.toFront({deep:!0,ui:!0});const p=r.getElements().reduce((w,I)=>Math.max(w,I.attributes.z||0),0);c.forEach(w=>{w.attributes.z<=p&&w.set("z",p+1,{ui:!0})}),n.stopBatch("to-front");const m=n.parent();m?(r.getCell(m).unembed(n,{ui:!0}),e.initialParentId=m):e.initialParentId=null},processEmbedding:function(e={},n,t,r){const o=e.model||this.model,s=e.paper||this.paper,c=s.model,{findParentBy:p,frontParentOnly:m,validateEmbedding:w}=s.options;let I;I=Rn(p)?pn(p.call(c,this,n,t,r)):"pointer"===p?pn(c.findModelsFromPoint({x:t,y:r})):c.findModelsUnderElement(o,{searchBy:p}),I=I.filter(te=>te instanceof vn&&o.id!==te.id&&!te.isEmbeddedIn(o)),m&&(I=I.slice(-1));let _=null;const U=e.candidateEmbedView;for(let te=I.length-1;te>=0;te--){const oe=I[te];if(U&&U.model.id==oe.id){_=U;break}{const Se=oe.findView(s);if(!Rn(w)||w.call(s,this,Se)){_=Se;break}}}_&&_!=U&&(this.clearEmbedding(e),e.candidateEmbedView=_.highlight(_.findProxyNode(null,"container"),{embedding:!0})),!_&&U&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var n=e.candidateEmbedView;n&&(n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const n=e.candidateEmbedView,t=e.model||this.model,r=e.paper||this.paper;if(n)n.model.embed(t,{ui:!0}),n.unhighlight(n.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:o}=r.options,{initialParentId:s}=e;if(s&&"function"==typeof o&&!o.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(t,{deep:!0}).forEach(o=>{o.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:n,whenNotAllowed:t="revert"}=e,r=n||this.model,s=(e.paper||this.paper).model;switch(t){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:c,initialPosition:p,initialZIndices:m}=e;if(p){const{x:I,y:_}=p;r.position(I,_,{deep:!0,ui:!0})}m&&Object.keys(m).forEach(I=>{const _=s.getCell(I);_&&_.set("z",m[I],{ui:!0})});const w=s.getCell(c);w&&w.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,n=e.model,t=e.paper;e&&!n.isLink();){if(!n.isEmbedded()||e.can("stopDelegation"))return e;n=n.getParentCell(),e=t.findViewByModel(n)}return null},findProxyNode:function(e,n){e||(e=this.el);const t=e.getAttribute(`${n}-selector`);if(t){const r=this.findAttribute("port",e);if(r){const o=this.findPortNode(r,t);if(o)return o}else{const[o]=this.findBySelector(t);if(o)return o}}return e},notifyPointerdown(e,n,t){Mn.prototype.pointerdown.call(this,e,n,t),this.notify("element:pointerdown",e,n,t)},notifyPointermove(e,n,t){Mn.prototype.pointermove.call(this,e,n,t),this.notify("element:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("element:pointerup",e,n,t),Mn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){Mn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){Mn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,n,t)},contextmenu:function(e,n,t){Mn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,n,t)},pointerdown:function(e,n,t){this.isPropagationStopped(e)||(this.notifyPointerdown(e,n,t),this.dragStart(e,n,t))},pointermove:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnet(e,n,t);break;case"move":(r.delegatedView||this).drag(e,n,t);default:this.notifyPointermove(e,n,t)}this.eventData(e,r)},pointerup:function(e,n,t){var r=this.eventData(e);switch(r.action){case"magnet":this.dragMagnetEnd(e,n,t);break;case"move":(r.delegatedView||this).dragEnd(e,n,t);default:this.notifyPointerup(e,n,t)}var o=r.targetMagnet;o&&this.magnetpointerclick(e,o,n,t),this.checkMouseleave(e)},mouseover:function(e){Mn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){Mn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){Mn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){Mn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,n,t,r){Mn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,n,t,r)},onmagnet:function(e,n,t){this.dragMagnetStart(e,n,t)},magnetpointerdblclick:function(e,n,t,r){this.notify("element:magnet:pointerdblclick",e,n,t,r)},magnetcontextmenu:function(e,n,t,r){this.notify("element:magnet:contextmenu",e,n,t,r)},dragStart:function(e,n,t){var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const o=r.model.position();r.eventData(e,{initialPosition:o,pointerOffset:o.difference(n,t),restrictedArea:this.paper.getRestrictedArea(r,n,t)})},dragMagnetStart:function(e,n,t){if(this.can("addLinkFromMagnet")){var r=e.currentTarget,o=this.paper;this.eventData(e,{targetMagnet:r}),e.stopPropagation(),o.options.validateMagnet(this,r,e)?(o.options.magnetThreshold<=0&&this.dragLinkStart(e,r,n,t),this.eventData(e,{action:"magnet"}),this.stopPropagation(e)):this.pointerdown(e,n,t),o.delegateDragEvents(this,e.data)}},drag:function(e,n,t){var r=this.paper,o=r.options.gridSize,s=this.model,c=this.eventData(e),{pointerOffset:p,restrictedArea:m,embedding:w}=c,I=pt(n+p.x,o),_=pt(t+p.y,o);s.position(I,_,{restrictedArea:m,deep:!0,ui:!0}),r.options.embeddingMode&&(w||(this.prepareEmbedding(c),w=!0),this.processEmbedding(c,e,n,t)),this.eventData(e,{embedding:w})},dragMagnet:function(e,n,t){this.dragLink(e,n,t)},dragEnd:function(e,n,t){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,n,t){this.dragLinkEnd(e,n,t)},magnetpointerclick:function(e,n,t,r){var o=this.paper;o.eventData(e).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",e,n,t,r)}},{Flags:On});Rt(Cu.prototype,Xs);const os=function(e,n,t){return e},Pd=function(e,n,t){var w,I,_,r=n.side||"bottom",o=Vt(n.padding||40),s=t.sourceBBox,c=t.targetBBox,p=s.center(),m=c.center();switch(r){case"bottom":_=1,w="y",I="height";break;case"top":_=-1,w="y",I="height";break;case"left":_=-1,w="x",I="width";break;case"right":_=1,w="x",I="width";break;default:throw new Error("Router: invalid side")}return p[w]+=_*(s[I]/2+o[r]),m[w]+=_*(c[I]/2+o[r]),_*(p[w]-m[w])>0?m[w]=p[w]:p[w]=m[w],[p].concat(e,m)};var Id={N:"S",S:"N",E:"W",W:"E"},Co={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function wu(e,n,t){var r=new me(e.x,n.y);return t.containsPoint(r)&&(r=new me(n.x,e.y)),r}function dl(e,n){return e["W"===n||"E"===n?"width":"height"]}function xi(e,n){return e.x===n.x?e.y>n.y?"N":"S":e.y===n.y?e.x>n.x?"W":"E":null}function Su(e){return new gt(e.x,e.y,0,0)}function Tu(e){var n=Vt(e.padding||e.elementPadding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function hl(e,n){return e.sourceBBox.clone().moveAndExpand(Tu(n))}function pl(e,n){return e.targetBBox.clone().moveAndExpand(Tu(n))}function Eu(e,n,t){var r=new me(e.x,n.y),o=new me(n.x,e.y),s=xi(e,r),c=xi(e,o),p=Id[t],m=s===t||s!==p&&(c===p||c!==t)?r:o;return{points:[m],direction:xi(m,n)}}function Ea(e,n,t){var r=wu(e,n,t);return{points:[r],direction:xi(r,n)}}function Pu(e,n,t,r){var m,o={},s=[new me(e.x,n.y),new me(n.x,e.y)],c=s.filter(function(_){return!t.containsPoint(_)}),p=c.filter(function(_){return xi(_,e)!==r});if(p.length>0)m=p.filter(function(_){return xi(e,_)===r}).pop(),o.points=[m=m||p[0]],o.direction=xi(m,n);else{m=ol(s,c)[0];var w=new me(n).move(m,-dl(t,r)/2),I=wu(w,e,t);o.points=[I,w],o.direction=xi(w,n)}return o}function Od(e,n,t,r){var o=Ea(n,e,r),s=o.points[0];if(t.containsPoint(s)){var c=(o=Ea(e,n,t)).points[0];if(r.containsPoint(c)){var p=new me(e).move(c,-dl(t,xi(e,c))/2),m=new me(n).move(s,-dl(r,xi(n,s))/2),w=new yt(p,m).midpoint(),I=Ea(e,w,t),_=Eu(w,n,I.direction);o.points=[I.points[0],_.points[0]],o.direction=_.direction}}return o}function Iu(e,n,t,r,o){var I,_,U,s={},c=t.union(r).inflate(1),p=c.center().distance(n)>c.center().distance(e),m=p?n:e,w=p?e:n;return o?(I=me.fromPolar(c.width+c.height,Co[o],m),I=c.pointNearestToPoint(I).move(I,-1)):I=c.pointNearestToPoint(m).move(m,1),_=wu(I,w,c),I.round().equals(_.round())?(_=me.fromPolar(c.width+c.height,Lt(I.theta(m))+Math.PI/2,w),U=wu(I,_=c.pointNearestToPoint(_).move(w,1).round(),c),s.points=p?[_,U,I]:[I,U,_]):s.points=p?[_,I]:[I,_],s.direction=xi(p?I:_,n),s}function gl(e,n,t){var r=hl(t,n),o=pl(t,n),s=function Ad(e,n){return e.sourceAnchor?e.sourceAnchor:hl(e,n).center()}(t,n),c=function Md(e,n){return e.targetAnchor?e.targetAnchor:pl(e,n).center()}(t,n);r=r.union(Su(s)),o=o.union(Su(c)),(e=pn(e).map(me)).unshift(s),e.push(c);for(var p,m=[],w=0,I=e.length-1;w<I;w++){var _=null,U=e[w],te=e[w+1],oe=!!xi(U,te);if(0===w)w+1===I?r.intersect(o.clone().inflate(1))?_=Iu(U,te,r,o):oe||(_=Od(U,te,r,o)):r.containsPoint(te)?_=Iu(U,te,r,Su(te).moveAndExpand(Tu(n))):oe||(_=Ea(U,te,r));else if(w+1===I){var Se=oe&&xi(te,U)===p;o.containsPoint(U)||Se?_=Iu(U,te,Su(U).moveAndExpand(Tu(n)),o,p):oe||(_=Pu(U,te,o,p))}else oe||(_=Eu(U,te,p));_?(Array.prototype.push.apply(m,_.points),p=_.direction):p=xi(U,te),w+1<I&&m.push(te)}return m}var Ho={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,n=this.cost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:-e,offsetY:0,cost:n},{offsetX:0,offsetY:e,cost:n},{offsetX:0,offsetY:-e,cost:n}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,n,t){if(!Rn(gl))throw new Error("Manhattan requires the orthogonal router as default fallback.");return gl(e,Rt({},Ho,n),t)},fallbackRoute:function(e,n,t){return null},draggingRoute:null};function Qs(e){this.map={},this.options=e,this.mapGridSize=100}function zi(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Ui(e,n){return n&&n.paddingBox?e.sourceBBox.clone().moveAndExpand(n.paddingBox):e.sourceBBox.clone()}function Sc(e,n){return n&&n.paddingBox?e.targetBBox.clone().moveAndExpand(n.paddingBox):e.targetBBox.clone()}function vl(e,n){return e.sourceAnchor?e.sourceAnchor:Ui(e,n).center()}function as(e,n,t,r,o){var s=360/t,c=e.theta(function Pa(e,n,t,r){var o=r.step;return new me(e.x+(n.x-e.x)/t.x*o,e.y+(n.y-e.y)/t.y*o)}(e,n,r,o)),p=We(c+s/2);return s*Math.floor(p/s)}function ml(e,n){var t=Math.abs(e-n);return t>180?360-t:t}function Ec(e,n){if(!e)return n;var t=Math.abs(e),r=Math.round(t/n);return r?n+(t-r*n)/r:t}function Pr(e,n){return e.round(n)}function ws(e,n,t){return Pr(function Pc(e,n){var t=n.source,r=pt(e.x-t.x,n.x)+t.x,o=pt(e.y-t.y,n.y)+t.y;return new me(r,o)}(e.clone(),n),t)}function Ss(e){return e.clone().toString()}function ao(e){return new me(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function yl(e,n,t,r,o,s,c){for(var _,p=[],m=ao(o.difference(t)),w=Ss(t),I=e[w];I;){var U=ao((_=n[w]).difference(I));U.equals(m)||(p.unshift(_),m=U),I=e[w=Ss(I)]}var te=n[w];return ao(te.difference(r)).equals(m)||p.unshift(te),p}function Zs(e,n){for(var t=1/0,r=0,o=n.length;r<o;r++){var s=e.manhattanDistance(n[r]);s<t&&(t=s)}return t}function Ia(e,n,t,r,o){var s=o.precision,c=o.directionMap,p=e.difference(n.center()),m=Nn(c)?Object.keys(c):[],w=pn(t),I=m.reduce(function(_,U){if(w.includes(U)){for(var Ne,te=c[U],oe=new me(e.x+te.x*(Math.abs(p.x)+n.width),e.y+te.y*(Math.abs(p.y)+n.height)),Pe=new yt(e,oe).intersect(n)||[],Ve=Pe.length,k=null,z=0;z<Ve;z++){var K=Pe[z],ie=e.squaredDistance(K);(void 0===Ne||ie>Ne)&&(Ne=ie,k=K)}if(k){var ve=ws(k,r,s);n.containsPoint(ve)&&(ve=ws(ve.offset(te.x*r.x,te.y*r.y),r,s)),_.push(ve)}}return _},[]);return n.containsPoint(e)||I.push(ws(e,r,s)),I}function Ic(e,n,t,r){var s,c,o=r.precision;s=Pr(e instanceof gt?vl(this,r).clone():e.clone(),o),c=Pr(n instanceof gt?function Tc(e,n){return e.targetAnchor?e.targetAnchor:Sc(e,n).center()}(this,r).clone():n.clone(),o);var m,w,I,_,p=function Au(e,n,t){return{source:n.clone(),x:Ec(t.x-n.x,e),y:Ec(t.y-n.y,e)}}(r.step,s,c);if(I=e instanceof gt?Ia(m=s,e,r.startDirections,p,r):[m=s],n instanceof gt?(w=c,_=Ia(c,n,r.endDirections,p,r)):_=[w=c],I=I.filter(Tn=>!t(Tn)),_=_.filter(Tn=>!t(Tn)),I.length>0&&_.length>0){for(var U=new zi,te={},oe={},Se={},Pe=0,Ve=I.length;Pe<Ve;Pe++){var Ne=I[Pe],k=Ss(Ne);U.add(k,Zs(Ne,_)),te[k]=Ne,Se[k]=0}var ie,ve,z=r.previousDirectionAngle,K=void 0===z,Ae=r.directions;!function kd(e,n,t){var r=t.step;pn(t.directions).forEach(function(o){o.gridOffsetX=o.offsetX/r*n.x,o.gridOffsetY=o.offsetY/r*n.y})}(0,p,r);for(var ke=Ae.length,ze=pn(_).reduce(function(Tn,Gt){var St=Ss(Gt);return Tn.push(St),Tn},[]),at=r.maximumLoops;!U.isEmpty()&&at>0;){var Dn,nt=U.pop(),ht=te[nt],bt=oe[nt],Ct=Se[nt],Ht=void 0===bt,$n=ht.equals(m);Dn=Ht?K?$n?null:as(m,ht,ke,p,r):z:as(bt,ht,ke,p,r);var qn=I.length===_.length;if(qn)for(var Ut=0;Ut<I.length;Ut++)if(!I[Ut].equals(_[Ut])){qn=!1;break}if((!Ht||!qn)&&ze.indexOf(nt)>=0)return r.previousDirectionAngle=Dn,yl(oe,te,ht,m,w);for(Pe=0;Pe<ke;Pe++){var $t=(ie=Ae[Pe]).angle;if(ve=ml(Dn,$t),K&&$n||!(ve>r.maxAllowedDirectionChange)){var Yt=ws(ht.clone().offset(ie.gridOffsetX,ie.gridOffsetY),p,o),Cn=Ss(Yt);if(!U.isClose(Cn)&&!t(Yt)){if(ze.indexOf(Cn)>=0&&!Yt.equals(w)&&ml($t,as(Yt,w,ke,p,r))>r.maxAllowedDirectionChange)continue;var fn=Ct+ie.cost+($n?0:r.penalties[ve]);(!U.isOpen(Cn)||fn<Se[Cn])&&(te[Cn]=Yt,oe[Cn]=ht,Se[Cn]=fn,U.add(Cn,fn+Zs(Yt,_)))}}}at--}}return r.fallbackRoute.call(this,m,w,r)}Qs.prototype.build=function(e,n){var t=this.options,r=pn(t.excludeEnds).reduce(function(m,w){var I=n.get(w);if(I){var _=e.getCell(I.id);_&&m.push(_)}return m},[]),o=[],s=e.getCell(n.get("source").id);s&&(o=Us(o,s.getAncestors().map(function(m){return m.id})));var c=e.getCell(n.get("target").id);c&&(o=Us(o,c.getAncestors().map(function(m){return m.id})));var p=this.mapGridSize;return e.getElements().reduce(function(m,w){var I=pn(t.excludeTypes).includes(w.get("type")),_=r.find(function(z){return z.id===w.id}),U=o.includes(w.id);if(!(I||_||U))for(var oe=w.getBBox().moveAndExpand(t.paddingBox),Se=oe.origin().snapToGrid(p),Pe=oe.corner().snapToGrid(p),Ve=Se.x;Ve<=Pe.x;Ve+=p)for(var Ne=Se.y;Ne<=Pe.y;Ne+=p){var k=Ve+"@"+Ne;m[k]=m[k]||[],m[k].push(oe)}return m},this.map),this},Qs.prototype.isPointAccessible=function(e){var n=e.clone().snapToGrid(this.mapGridSize).toString();return pn(this.map[n]).every(function(t){return!t.containsPoint(e)})},zi.prototype.add=function(e,n){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=n;var t=oo(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(t,0,e)},zi.prototype.remove=function(e){this.hash[e]=this.CLOSE},zi.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},zi.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},zi.prototype.isEmpty=function(){return 0===this.items.length},zi.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const _l=function(e,n,t){return function xl(e,n,t){(function _i(e){if(e.directions=Er(e,"directions"),e.penalties=Er(e,"penalties"),e.paddingBox=Er(e,"paddingBox"),e.padding=Er(e,"padding"),e.padding){var n=Vt(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}pn(e.directions).forEach(function(t){var r=new me(0,0),o=new me(t.offsetX,t.offsetY);t.angle=We(r.theta(o))})})(n),t.options.perpendicular=!!n.perpendicular;var r=Ui(t,n),o=Sc(t,n),s=vl(t,n);let c;if("function"==typeof n.isPointObstacle)c=n.isPointObstacle;else{const k=new Qs(n);k.build(t.paper.model,t.model),c=z=>!k.isPointAccessible(z)}for(var I,_,p=pn(e).map(me),m=[],w=s,U=0,te=p.length;U<=te;U++){var oe=null;if(_=I||r,!(I=p[U])&&(I=o,(!t.model.get("source").id||!t.model.get("target").id)&&Rn(n.draggingRoute))){var Pe=_===r?s:_,Ve=I.origin();oe=n.draggingRoute.call(t,Pe,Ve,n)}if(null===(oe=oe||Ic.call(t,_,I,c,n)))return n.fallbackRouter(e,n,t);var Ne=oe[0];Ne&&Ne.equals(w)&&oe.shift(),w=oe[oe.length-1]||w,Array.prototype.push.apply(m,oe)}return m}(e,Rt({},Ho,n),t)};var Ld={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,n=this.cost(),t=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:n},{offsetX:e,offsetY:e,cost:t},{offsetX:0,offsetY:e,cost:n},{offsetX:-e,offsetY:e,cost:t},{offsetX:-e,offsetY:0,cost:n},{offsetX:-e,offsetY:-e,cost:t},{offsetX:0,offsetY:-e,cost:n},{offsetX:e,offsetY:-e,cost:t}]},fallbackRoute:function(e,n,t){var r=e.theta(n),o=[],s={x:n.x,y:e.y},c={x:e.x,y:n.y};if(r%180>90){var p=s;s=c,c=p}var m=r%90<45?s:c,w=new yt(e,m),I=90*Math.ceil(r/90),_=me.fromPolar(w.squaredLength(),Lt(I+135),m),U=new yt(n,_),te=w.intersection(U),oe=te||n,Pe=360/t.directions.length,Ve=(te?oe:e).theta(n),Ne=We(Ve+Pe/2),k=Pe*Math.floor(Ne/Pe);return t.previousDirectionAngle=k,oe&&o.push(oe.round()),o.push(n),o}};const Rd=function(e,n,t){if(!Rn(_l))throw new Error("Metro requires the manhattan router.");return _l(e,Rt({},Ld,n),t)};var Ac=["arc","gap","cubic"],Nd=["smooth"],Mu=1/3,Aa=2/3;function wl(e,n,t){var r=[].concat(e,t,n);return r.reduce(function(o,s,c){var p=r[c+1];return null!=p&&(o[c]=si(s,p)),o},[])}function Oc(e,n){return si(e,n).squaredLength()}function kc(e,n,t,r){var s,o=new Pt;return s=Pt.createSegment("M",e[0].start),o.appendSegment(s),pn(e).forEach(function(c,p){if(c.isJump){var m,w,I,_;if("arc"===t){m=-90,w=c.start.difference(c.end);var U=Number(w.x<0||0===w.x&&w.y<0);U&&(m+=180);var Se,te=c.midpoint(),oe=new yt(te,c.end).rotate(te,m);I=(Se=new yt(c.start,te)).pointAt(2/3).rotate(c.start,m),_=oe.pointAt(1/3).rotate(oe.end,-m),s=Pt.createSegment("C",I,_,oe.end),o.appendSegment(s),Se=new yt(te,c.end),I=oe.pointAt(1/3).rotate(oe.end,m),_=Se.pointAt(1/3).rotate(c.end,-m),s=Pt.createSegment("C",I,_,c.end),o.appendSegment(s)}else if("gap"===t)s=Pt.createSegment("M",c.end),o.appendSegment(s);else if("cubic"===t){m=c.start.theta(c.end);var Pe=.6*n,Ve=1.35*n;w=c.start.difference(c.end),(U=Number(w.x<0||0===w.x&&w.y<0))&&(Ve*=-1),I=me(c.start.x+Pe,c.start.y+Ve).rotate(c.start,m),_=me(c.end.x-Pe,c.end.y+Ve).rotate(c.end,m),s=Pt.createSegment("C",I,_,c.end),o.appendSegment(s)}}else{var Ne=e[p+1];0==r||!Ne||Ne.isJump?(s=Pt.createSegment("L",c.end),o.appendSegment(s)):function Lc(e,n,t,r,o){var te,s=t.distance(r)/2,c=t.distance(o)/2,p=-Math.min(e,s),m=-Math.min(e,c),w=t.clone().move(r,p).round(),I=t.clone().move(o,m).round(),_=new me(Mu*w.x+Aa*t.x,Aa*t.y+Mu*w.y),U=new me(Mu*I.x+Aa*t.x,Aa*t.y+Mu*I.y);te=Pt.createSegment("L",w),n.appendSegment(te),te=Pt.createSegment("C",_,U,I),n.appendSegment(te)}(r,o,c.end,c.start,Ne.end)}}),o}const Tl=function(e,n,t,r){!function Dd(e){var n=e.paper,t=n._jumpOverUpdateList;if(null==t){t=n._jumpOverUpdateList=[];var r=n.model;r.on("batch:stop",function(){this.hasActiveBatch()||function Sl(e){for(var n=e._jumpOverUpdateList,t=0;t<n.length;t++){const r=n[t],o=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(o)}}(n)}),r.on("reset",function(){t=n._jumpOverUpdateList=[]})}t.indexOf(e)<0&&(t.push(e),e.listenToOnce(e.model,"change:connector remove",function(){t.splice(t.indexOf(e),1)}))}(this);var o=r.raw,s=r.size||5,c=r.jump&&(""+r.jump).toLowerCase(),p=r.radius||0,m=r.ignoreConnectors||Nd;-1===Ac.indexOf(c)&&(c=Ac[0]);var w=this.paper,_=w.model.getLinks();if(1===_.length)return kc(wl(e,n,t),s,c,p);var U=this.model,te=_.indexOf(U),oe=w.options.defaultConnector||{},Se=_.filter(function(K,ie){var ve=K.get("connector")||oe;return!(pn(m).includes(ve.name)||ie>te&&"jumpover"===ve.name)}),Pe=Se.map(function(K){return w.findViewByModel(K)}),Ve=wl(e,n,t),Ne=Pe.map(function(K){return null==K?[]:K===this?Ve:wl(K.sourcePoint,K.targetPoint,K.route)},this),k=Ve.reduce(function(K,ie){var ve=Se.reduce(function(Ae,ke,ze){if(ke!==U){var at=function Mc(e,n){return pn(n).reduce(function(t,r){var o=e.intersection(r);return o&&t.push(o),t},[])}(ie,Ne[ze]);Ae.push.apply(Ae,at)}return Ae},[]).sort(function(Ae,ke){return Oc(ie.start,Ae)-Oc(ie.start,ke)});return ve.length>0?K.push.apply(K,function Fd(e,n,t){return n.reduce(function(r,o,s){if(!0===o.skip)return r;var c=r.pop()||e,p=mi(o).move(c.start,-t),m=mi(o).move(c.start,+t),w=n[s+1];if(null!=w){var I=m.distance(w);I<=t&&(m=w.move(c.start,I),w.skip=!0)}else if(p.distance(c.end)<2*t+1)return r.push(c),r;if(m.distance(c.start)<2*t+1)return r.push(c),r;var te=si(p,m);return te.isJump=!0,r.push(si(c.start,p),te,si(m,c.end)),r},[])}(ie,ve,s)):K.push(ie),K},[]),z=kc(k,s,c,p);return o?z:z.serialize()},Vd=function(e,n,t,r){var o=r&&r.raw,s=[e].concat(t).concat([n]),c=new Vn(s),p=new Pt(c);return o?p:p.serialize()},El=function(e,n,t,r){r||(r={});var p,o=r.radius||10,s=r.raw,c=new Pt;p=Pt.createSegment("M",e),c.appendSegment(p);for(var I,_,U,te,oe,Se,Pe,Ve,Ne,k,z,m=1/3,w=2/3,K=0,ie=t.length;K<ie;K++)I=new me(t[K]),_=t[K-1]||e,U=t[K+1]||n,te=oe||I.distance(_)/2,oe=I.distance(U)/2,Se=-Math.min(o,te),Pe=-Math.min(o,oe),Ve=I.clone().move(_,Se).round(),Ne=I.clone().move(U,Pe).round(),k=new me(m*Ve.x+w*I.x,w*I.y+m*Ve.y),z=new me(m*Ne.x+w*I.x,w*I.y+m*Ne.y),p=Pt.createSegment("L",Ve),c.appendSegment(p),p=Pt.createSegment("C",k,z,Ne),c.appendSegment(p);return p=Pt.createSegment("L",n),c.appendSegment(p),s?c:c.serialize()},Rc=function(e,n,t,r){var s,o=r&&r.raw;if(t&&0!==t.length){var c=[e].concat(t).concat([n]),p=qt.throughPoints(c);s=new Pt(p)}else{var m;if(s=new Pt,m=Pt.createSegment("M",e),s.appendSegment(m),Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)){var w=(e.x+n.x)/2;m=Pt.createSegment("C",w,e.y,w,n.y,n.x,n.y),s.appendSegment(m)}else{var I=(e.y+n.y)/2;m=Pt.createSegment("C",e.x,I,n.x,I,n.x,n.y),s.appendSegment(m)}}return o?s:s.serialize()},Gi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},hi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ts=function(e,n,t=[],r={},o){const s=Boolean(r.raw),{direction:c=Gi.AUTO,precision:p=3}=r,m={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new me(r.sourceTangent):null,targetTangent:r.targetTangent?new me(r.targetTangent):null};m.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new me(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new me(r.sourceDirection).normalize():null,m.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new me(1,0).rotate(null,r.targetDirection):r.targetDirection?new me(r.targetDirection).normalize():null;const w=[e,...t.map(Se=>new me(Se)),n];let I,_;if(m.sourceTangent)I=m.sourceTangent;else{const Se=function Al(e,n,t,r){if(r.sourceDirection)switch(r.sourceDirection){case hi.UP:return new me(0,-1);case hi.DOWN:return new me(0,1);case hi.LEFT:return new me(-1,0);case hi.RIGHT:return new me(1,0);case hi.AUTO:return Pl(e,n);case hi.CLOSEST_POINT:return Ou(0,n);case hi.OUTWARDS:return ku(e,n);default:return r.sourceDirection}switch(t){case Gi.HORIZONTAL:return function Bd(e,n,t){const{sourceBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.x>n[1].x?"right":"left",o)?new me(-1,0):new me(1,0)}(e,n);case Gi.VERTICAL:return function Dc(e,n,t){const{sourceBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[0]):r.y>n[1].y?"bottom":"top",o)?new me(0,-1):new me(0,1)}(e,n);case Gi.CLOSEST_POINT:return Ou(0,n);case Gi.OUTWARDS:return ku(e,n);default:return Pl(e,n)}}(o,w,c,m),Pe=w[0].distance(w[1])*m.coeff,Ne=Ml(Se,w[1].difference(w[0]).normalize());if(Ne>Math.PI/4){const k=Pe+(Ne-Math.PI/4)*m.angleTangentCoefficient;I=Se.clone().scale(k,k)}else I=Se.clone().scale(Pe,Pe)}if(m.targetTangent)_=m.targetTangent;else{const Se=function yn(e,n,t,r){if(r.targetDirection)switch(r.targetDirection){case hi.UP:return new me(0,-1);case hi.DOWN:return new me(0,1);case hi.LEFT:return new me(-1,0);case hi.RIGHT:return new me(0,1);case hi.AUTO:return Fc(e,n);case hi.CLOSEST_POINT:return Il(0,n);case hi.OUTWARDS:return Vc(e,n);default:return r.targetDirection}switch(t){case Gi.HORIZONTAL:return function Nc(e,n,t){const{targetBBox:r}=e;let o;return"left"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.x>n[n.length-2].x?"left":"right",o)?new me(-1,0):new me(1,0)}(e,n);case Gi.VERTICAL:return function Hd(e,n,t){const{targetBBox:r}=e;let o;return"top"===(o=r.width&&r.height?r.sideNearestToPoint(n[n.length-1]):r.y>n[n.length-2].y?"top":"bottom",o)?new me(0,-1):new me(0,1)}(e,n);case Gi.CLOSEST_POINT:return Il(0,n);case Gi.OUTWARDS:return Vc(e,n);default:return Fc(e,n)}}(o,w,c,m),Pe=w.length-1,Ve=w[Pe-1].distance(w[Pe])*m.coeff,k=Ml(Se,w[Pe-1].difference(w[Pe]).normalize());if(k>Math.PI/4){const z=Ve+(k-Math.PI/4)*m.angleTangentCoefficient;_=Se.clone().scale(z,z)}else _=Se.clone().scale(Ve,Ve)}const te=function Bc(e,n,t,r){const{tau:o,coeff:s}=r,c=[],p=[],m=[],w=e.length-1;for(let I=0;I<w;I++)c[I]=e[I].distance(e[I+1]);p[0]=n,p[w]=t;for(let I=1;I<w;I++){let _,U;_=1===I?e[I-1].clone().offset(p[I-1].x,p[I-1].y):e[I-1].clone(),U=I===w-1?e[I+1].clone().offset(p[I+1].x,p[I+1].y):e[I+1].clone();const te=_.difference(e[I]).normalize(),oe=U.difference(e[I]).normalize(),Se=Ml(te,oe);let Ve,Pe=(Math.PI-Se)/2;const Ne=Es(te,oe);let k;k=Es(e[I].difference(e[I+1]),e[I].difference(e[I-1])),Ne<0&&(Pe=-Pe),Se<Math.PI/2&&(Pe<0&&k<0||Pe>0&&k>0)&&(Pe-=Math.PI),Ve=oe.clone(),jd(Ve,Pe);const z=Ve.clone(),K=Ve.clone(),ie=c[I-1]*s,ve=c[I]*s;z.scale(ie,ie),K.scale(ve,ve),p[I]=[z,K]}for(let I=0;I<w;I++){let _,U;_=0===I?e[I+1].difference(p[I].x/o,p[I].y/o):e[I+1].difference(p[I][1].x/o,p[I][1].y/o),U=I===w-1?e[I].clone().offset(p[I+1].x/o,p[I+1].y/o):e[I].difference(p[I+1][0].x/o,p[I+1][0].y/o),m[I]=[_,e[I],e[I+1],U]}return m}(w,I,_,m).map(Se=>function zd(e,n){const{tau:t}=n,r=new me;r.x=e[1].x+(e[2].x-e[0].x)/(6*t),r.y=e[1].y+(e[2].y-e[0].y)/(6*t);const o=new me;return o.x=e[2].x+(e[3].x-e[1].x)/(6*t),o.y=e[2].y+(e[3].y-e[1].y)/(6*t),new qt(e[1],r,o,e[2])}(Se,m)),oe=new Pt(te).round(p);return s?oe:oe.serialize()};function Pl(e,n,t){const{sourceBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[0]:n[1]),o){case"top":return new me(0,-1);case"bottom":return new me(0,1);case"right":return new me(1,0);case"left":return new me(-1,0)}}function Fc(e,n,t){const{targetBBox:r}=e;let o;switch(o=r.sideNearestToPoint(r.width&&r.height?n[n.length-1]:n[n.length-2]),o){case"top":return new me(0,-1);case"bottom":return new me(0,1);case"right":return new me(1,0);case"left":return new me(-1,0)}}function Ou(e,n,t){return n[1].difference(n[0]).normalize()}function Il(e,n,t){const r=n.length-1;return n[r-1].difference(n[r]).normalize()}function ku(e,n,t){const{sourceBBox:r}=e,o=r.center();return n[0].difference(o).normalize()}function Vc(e,n,t){const{targetBBox:r}=e,o=r.center();return n[n.length-1].difference(o).normalize()}function jd(e,n){const t=Math.cos(n),r=Math.sin(n),s=r*e.x+t*e.y;e.x=t*e.x-r*e.y,e.y=s}function Ml(e,n){let t=e.dot(n)/(e.magnitude()*n.magnitude());return t<-1&&(t=-1),t>1&&(t=1),Math.acos(t)}function Es(e,n){return e.x*n.y-e.y*n.x}Ts.Directions=Gi,Ts.TangentDirections=hi;const nn={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},pi=Mn.extend({className:function(){var e=Mn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Mn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[nn.RENDER],attrs:[nn.UPDATE],router:[nn.UPDATE],connector:[nn.CONNECTOR],smooth:[nn.UPDATE],manhattan:[nn.UPDATE],toolMarkup:[nn.LEGACY_TOOLS],labels:[nn.LABELS],labelMarkup:[nn.LABELS],vertices:[nn.VERTICES,nn.UPDATE],vertexMarkup:[nn.VERTICES],source:[nn.SOURCE,nn.UPDATE],target:[nn.TARGET,nn.UPDATE]},initFlag:[nn.RENDER,nn.SOURCE,nn.TARGET,nn.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,n){if(n||(n={}),this.hasFlag(e,nn.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,nn.SOURCE)}if(this.hasFlag(e,nn.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,nn.TARGET)}const{paper:t,sourceView:r,targetView:o}=this;if(t&&(r&&!t.isViewMounted(r)||o&&!t.isViewMounted(o)))return e;if(this.hasFlag(e,nn.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(n),this.removeFlag(e,[nn.RENDER,nn.UPDATE,nn.VERTICES,nn.LABELS,nn.TOOLS,nn.LEGACY_TOOLS,nn.CONNECTOR]);let s=!1;this.hasFlag(e,nn.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,nn.VERTICES));const{model:c}=this,{attributes:p}=c;let m=this.hasFlag(e,nn.LABELS),w=this.hasFlag(e,nn.LEGACY_TOOLS);m&&(this.onLabelsChange(c,p.labels,n),e=this.removeFlag(e,nn.LABELS),s=!0),w&&(this.renderTools(),e=this.removeFlag(e,nn.LEGACY_TOOLS));const I=this.hasFlag(e,nn.UPDATE),_=this.hasFlag(e,nn.CONNECTOR);return(I||_)&&(I?n.translateBy&&c.isRelationshipEmbeddedIn(n.translateBy)?this.translate(n.tx,n.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(n),e=this.removeFlag(e,[nn.UPDATE,nn.TOOLS,nn.CONNECTOR]),m=!1,w=!1,s=!0),m&&this.updateLabelPositions(),w&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,nn.TOOLS)&&(this.updateTools(n),e=this.removeFlag(e,nn.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(nn.UPDATE),e)},isLabelsRenderRequired:function(e={}){const n=this.model.previous("labels");if(!n)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var t=e.propertyPathArray||[],r=t.length;if(r>1&&n[t[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==t[2])return!1}}return!0},onLabelsChange:function(e,n,t){this.isLabelsRenderRequired(t)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,n=e.get("markup")||e.markup;if(!n)throw new Error("dia.LinkView: markup required");if(Array.isArray(n))return this.renderJSONMarkup(n);if("string"==typeof n)return this.renderStringMarkup(n);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var n=this.parseDOMJSON(e,this.el);this.selectors=n.selectors,this.vel.append(n.fragment)},renderStringMarkup:function(e){var n=De(e);Array.isArray(n)||(n=[n]);for(var t=this._V,r=0,o=n.length;r<o;r++){var s=n[r],c=s.attr("class");c&&(c=F(c),t[Mt.camelCase(c)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(n)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var n=De(e),t=document.createDocumentFragment();if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)t.appendChild(n[r].node);else t.appendChild(n.node);return{fragment:t,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var n=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var t,r=n.childNodes;return(t=r.length>1||"G"!==r[0].nodeName.toUpperCase()?De("g").append(n):De(r[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,n=e.labels,t=this._labelCache={},r=this._labelSelectors={},o=this.model,s=o.attributes.labels||[],c=s.length;if(0===c)return n&&n.remove(),this;n?n.empty():(n=e.labels=De("g").addClass("labels"),this.options.labelsLayer&&(n.addClass(ti(Er(this,"className"))),n.attr("model-id",o.id)));for(var p=0;p<c;p++){var I,_,w=this._normalizeLabelMarkup(this._getLabelMarkup(s[p].markup));if(w)I=w.node,_=w.selectors;else{var te=this._normalizeLabelMarkup(this._getLabelMarkup(o._builtins.defaultLabel.markup)),oe=o._getDefaultLabel(),Pe=this._normalizeLabelMarkup(this._getLabelMarkup(oe.markup))||te;I=Pe.node,_=Pe.selectors}I.setAttribute("label-idx",p),n.append(I),t[p]=I;var Ve=this.selector;if(_[Ve])throw new Error("dia.LinkView: ambiguous label root selector.");_[Ve]=I,r[p]=_}return n.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:n,model:t,_V:r,options:o}=this,{labels:s}=r;if(!s||!t.hasLabels())return;const{node:c}=s;o.labelsLayer?n.getLayerView(o.labelsLayer).insertSortedNode(c,t.get("z")):c.parentNode!==e&&e.appendChild(c)},unmountLabels:function(){const{options:e,_V:n}=this;if(!n)return;const{labels:t}=n;t&&e.labelsLayer&&t.remove()},onMount:function(){this.mountLabels()},unmount:function(){Mn.prototype.unmount.apply(this,arguments),this.unmountLabels()},findLabelNode:function(e,n){const t=this._labelCache[e];if(!t)return null;const r=this._labelSelectors[e],[o=null]=this.findBySelector(n,t,r);return o},_mergeLabelAttrs:function(e,n,t,r){return null===n?null:void 0===n?null===t?null:void 0===t?e?void 0:r:e?t:zr({},r,t):e?zr({},t,n):zr({},r,t,n)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,n=e.get("labels")||[],t=this.can("labelMove"),o=e._builtins.defaultLabel.attrs,s=e._getDefaultLabel(),c=s.markup,p=s.attrs,m=0,w=n.length;m<w;m++){var I=this._labelCache[m];I.setAttribute("cursor",t?"move":"default");var _=this._labelSelectors[m],U=n[m],Se=this._mergeLabelAttrs(U.markup||c,U.attrs,p,o);this.updateDOMSubtreeAttributes(I,Se,{rootBBox:new gt(U.size),selectors:_})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=Mt(this._V.linkTools.node).empty(),n=Tr(this.model.get("toolMarkup")||this.model.toolMarkup),t=De(n());return e.append(t.node),this._toolCache=t,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=Tr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=De(n())):r=t.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=Mt(this._V.markerVertices.node).empty(),n=Tr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(t,r){e.append(De(n(Rt({idx:r},t))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=Mt(this._V.markerArrowheads.node);e.empty();var n=Tr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=De(n({end:"source"})),this._V.targetArrowhead=De(n({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),o=[this.sourceAnchor,...r,this.targetAnchor],s=o.length,c=new Vn(o);c.simplify({threshold:.001});const p=c.points.map(w=>w.toJSON()),m=p.length;return s===m?0:(t.vertices(p.slice(1,m-1),e),s-m)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new me(this.sourceAnchor);case"target":return new me(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new me(this.sourcePoint);case"target":return new me(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var n=this.sourceView;if(!n)break;return this.sourceMagnet||n.el;case"target":var t=this.targetView;if(!t)break;return this.targetMagnet||t.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,n=0){const{route:t,path:r}=this;if(!t||!r)return;const o=new Vn(t);o.translate(e,n),this.route=o.points,this._translateConnectionPoints(e,n),r.translate(e,n),this.updateDOM()},updateDOM(){const{el:e,model:n,selectors:t}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,n.attr(),{selectors:t}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,n=e.vertices(),t=this.findAnchors(n),r=this.sourceAnchor=t.source,o=this.targetAnchor=t.target,s=this.findRoute(n);this.route=s;var c=this.findConnectionPoints(s,r,o);this.sourcePoint=c.source,this.targetPoint=c.target},updatePath:function(){const{route:e,sourcePoint:n,targetPoint:t}=this,r=this.findMarkerPoints(e,n,t),o=this.findPath(e,r.source||n,r.target||t);this.path=o},findMarkerPoints:function(e,n,t){var c,p,r=e[0],o=e[e.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),c=me(n).move(r||t,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),p=me(t).move(o||n,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=c||n.clone(),s.targetPoint=p||t.clone(),{source:c,target:p}},findAnchorsOrdered:function(e,n,t,r){var o,s,c,p,m=this.model,w=m.get(e),I=m.get(t),_=this.getEndView(e),U=this.getEndView(t),te=this.getEndMagnet(e),oe=this.getEndMagnet(t);_?(c=n?new me(n):U?oe:new me(I),o=this.getAnchor(w.anchor,_,te,c,e)):o=new me(w),U?(p=new me(r||o),s=this.getAnchor(I.anchor,U,oe,p,t)):s=new me(I);var Se={};return Se[e]=o,Se[t]=s,Se},findAnchors:function(e){var n=this.model,t=e[0],r=e[e.length-1];return n.target().priority&&!n.source().priority?this.findAnchorsOrdered("target",r,"source",t):this.findAnchorsOrdered("source",t,"target",r)},findConnectionPoints:function(e,n,t){var _,U,te,Ve,r=e[0],o=e[e.length-1],s=this.model,c=s.get("source"),p=s.get("target"),m=this.sourceView,w=this.targetView,I=this.paper.options;if(m&&!m.isNodeConnection(this.sourceMagnet)){_=this.sourceMagnet||m.el;var oe=c.connectionPoint||I.defaultConnectionPoint,Pe=new yt(r||t,n);te=this.getConnectionPoint(oe,m,_,Pe,"source")}else te=n;if(w&&!w.isNodeConnection(this.targetMagnet)){U=this.targetMagnet||w.el;var Ne=p.connectionPoint||I.defaultConnectionPoint,z=new yt(o||n,t);Ve=this.getConnectionPoint(Ne,w,U,z,"target")}else Ve=t;return{source:te,target:Ve}},getAnchor:function(e,n,t,r,o){var p,s=n.isNodeConnection(t),c=this.paper.options;if(e||(e=s?c.defaultLinkAnchor:c.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:c.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)p=e;else{var m=e.name;if("function"!=typeof(p=c[s?"linkAnchorNamespace":"anchorNamespace"][m]))throw new Error("Unknown anchor: "+m)}var I=p.call(this,n,t,r,e.args||{},o,this);return I?I.round(this.decimalsRounding):new me},getConnectionPoint:function(e,n,t,r,o){var s,w,c=r.end,p=this.paper.options;if("function"==typeof p.linkConnectionPoint&&(s=p.linkConnectionPoint(this,n,t===n.el?void 0:t,r.start,o)))return s;if(!e)return c;if("function"==typeof e)w=e;else{var I=e.name;if("function"!=typeof(w=p.connectionPointNamespace[I]))throw new Error("Unknown connection point: "+I)}return(s=w.call(this,r,n,t,e.args||{},o,this))?s.round(this.decimalsRounding):c},_translateConnectionPoints:function(e,n){var t=this._markerCache;t.sourcePoint.offset(e,n),t.targetPoint.offset(e,n),this.sourcePoint.offset(e,n),this.targetPoint.offset(e,n),this.sourceAnchor.offset(e,n),this.targetAnchor.offset(e,n)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model,t=n.get("labels")||[];if(!t.length)return this;for(var o=n._builtins.defaultLabel.position,s=n._getDefaultLabel(),c=this._normalizeLabelPosition(s.position),p=zr({},o,c),m=0,w=t.length;m<w;m++){var I=this._labelCache[m];if(I){var U=this._normalizeLabelPosition(t[m].position),te=zr({},p,U),oe=this._getLabelTransformationMatrix(te);I.setAttribute("transform",De.matrixToTransformString(oe)),this._cleanLabelMatrices(m)}}return this},_cleanLabelMatrices:function(e){const{metrics:n,_labelSelectors:t}=this,r=t[e];if(r)for(let o in r){const{id:s}=r[o];s&&s in n&&delete n[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",n=this.options.linkToolsOffset,t=this.getConnectionLength();if(!Number.isNaN(t)){t<this.options.shortLinkLength&&(e="scale(.5)",n/=2);var r=this.getPointAtLength(n);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&t>=this.options.longLinkLength?(r=this.getPointAtLength(t-(this.options.doubleLinkToolsOffset||n)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("visibility","visible")):this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===Mt.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:n,paper:t}=this,r=`${e}View`,o=n.get(e),s=o&&o.id;if(!s)return this[r]=null,this.updateEndMagnet(e),!0;const c=t.getModelById(s);if(!c)throw new Error("LinkView: invalid "+e+" cell.");const p=c.findView(t);return!!p&&(this[r]=p,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const n=`${e}Magnet`,t=this.getEndView(e);if(t){let r=t.getMagnetFromLinkEnd(this.model.get(e));r===t.el&&(r=null),this[n]=r}else this[n]=null},_translateAndAutoOrientArrows:function(e,n){var t=pn(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,t[0]||this.targetPoint,this.paper.cells),n&&n.translateAndAutoOrient(this.targetPoint,t[t.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(e){return(this.model.label(e).position||{}).angle||0},_getLabelPositionArgs:function(e){return(this.model.label(e).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,n){return null===e?null:void 0===e?null===n?null:n:zr({},n,e)},addLabel:function(e,n,t,r){var o,s,p,c=0;"number"!=typeof e?(o=e.x,s=e.y,"number"==typeof n?(c=n,p=t):p=n):(o=e,s=n,"number"==typeof t?(c=t,p=r):p=t);var m=this._getDefaultLabelPositionArgs(),I=this._mergeLabelPositionArgs(p,m),_={position:this.getLabelPosition(o,s,c,I)};return this.model.insertLabel(-1,_,p),-1},addVertex:function(e,n,t){var r="number"!=typeof e,o=r?e.x:e,s=r?e.y:n,c=r?n:t,p={x:o,y:s},m=this.getVertexIndex(o,s);return this.model.insertVertex(m,p,c),m},sendToken:function(e,n,t){var o,s,c;Nn(n)?(o=n.duration,s="reverse"===n.direction,c=n.connection):(o=n,s=!1,c=null);var p={dur:(o=o||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(p.keyPoints="1;0",p.keyTimes="0;1");var w,m=De(e);if("string"==typeof c)w=this.findBySelector(c,this.el,this.selectors)[0];else{var I=this._V;w=I.connection?I.connection.node:this.el.querySelector("path")}if(!(w instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");m.appendTo(this.paper.cells).animateAlongPath(p,w),setTimeout(function r(_,U){return function(){_.remove(),"function"==typeof U&&U()}}(m,t),o)},findRoute:function(e){e||(e=[]);var n=this.paper.options.routerNamespace||x,t=this.model.router(),r=this.paper.options.defaultRouter;if(!t){if(!r)return e.map(me);t=r}var o=Rn(t)?t:n[t.name];if(!Rn(o))throw new Error('dia.LinkView: unknown router: "'+t.name+'".');return o.call(this,e,t.args||{},this)||e.map(me)},findPath:function(e,n,t){var r=this.paper.options.connectorNamespace||A,o=this.model.connector();o||(o=this.paper.options.defaultConnector||{});var c=Rn(o)?o:r[o.name];if(!Rn(c))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var p=hn(o.args||{});p.raw=!0;var m=c.call(this,n,t,e,p,this);return"string"==typeof m&&(m=new Pt(De.normalizePathData(m))),m},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("data"))return n.data;var t=e.serialize();return n.data=t,t},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var n=this.metrics;if(n.hasOwnProperty("segmentSubdivisions"))return n.segmentSubdivisions;var t=e.getSegmentSubdivisions();return n.segmentSubdivisions=t,t},getConnectionLength:function(){var e=this.path;if(!e)return 0;var n=this.metrics;if(n.hasOwnProperty("length"))return n.length;var t=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return n.length=t,t},getPointAtLength:function(e){var n=this.path;return n?n.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var n=this.path;return n?(Ce(e)&&(e=parseFloat(e)/100),n.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var n=this.path;return n?n.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var n=this.path;return n?n.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var n=this.path;return n?n.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var n=this.path;return n?n.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var n=this.path;return n?n.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,n,t,r){var c,o={},s=0;"number"==typeof t?(s=t,c=r):c=t,c&&(o.args=c);var Se,Pe,p=!(c&&c.absoluteDistance),m=c&&c.absoluteDistance&&c.reverseDistance,w=c&&c.absoluteOffset,I=this.path,_={segmentSubdivisions:this.getConnectionSubdivisions()},U=new me(e,n),te=I.closestPointT(U,_),oe=I.lengthAtT(te,_);if(p&&(oe=oe/this.getConnectionLength()||0),m&&(oe=-1*(this.getConnectionLength()-oe)||1),o.distance=oe,w||(Se=I.tangentAtT(te)),Se)Pe=Se.pointOffset(U);else{var Ve=I.pointAtT(te),Ne=U.difference(Ve);Pe={x:Ne.x,y:Ne.y}}return o.offset=Pe,o.angle=s,o},_getLabelTransformationMatrix:function(e){var n,t=0,r={};if("number"==typeof e)n=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},n=e.distance,t=e.angle||0}var o=n>0&&n<=1,s=0,c={x:0,y:0};if(e.offset){var p=e.offset;"number"==typeof p&&(s=p),p.x&&(c.x=p.x),p.y&&(c.y=p.y)}var Se,m=0!==c.x||0!==c.y||0===s,w=r.keepGradient,I=r.ensureLegibility,_=this.path,U={segmentSubdivisions:this.getConnectionSubdivisions()},te=o?n*this.getConnectionLength():n,oe=_.tangentAtLength(te,U),Pe=t;if(oe){if(m)(Se=oe.start).offset(c);else{var Ve=oe.clone();Ve.rotate(oe.start,-90),Ve.setLength(s),Se=Ve.end}w&&(Pe=oe.angle()+t,I&&(Pe=We((Pe+90)%180-90)))}else Se=_.start,m&&Se.offset(c);return De.createSVGMatrix().translate(Se.x,Se.y).rotate(Pe)},getLabelCoordinates:function(e){var n=this._getLabelTransformationMatrix(e);return new me(n.e,n.f)},getVertexIndex:function(e,n){for(var r=this.model.vertices(),o=this.getClosestPointLength(new me(e,n)),s=0,c=r.length;s<c&&!(o<this.getClosestPointLength(r[s]));s++);return s},notifyPointerdown(e,n,t){Mn.prototype.pointerdown.call(this,e,n,t),this.notify("link:pointerdown",e,n,t)},notifyPointermove(e,n,t){Mn.prototype.pointermove.call(this,e,n,t),this.notify("link:pointermove",e,n,t)},notifyPointerup(e,n,t){this.notify("link:pointerup",e,n,t),Mn.prototype.pointerup.call(this,e,n,t)},pointerdblclick:function(e,n,t){Mn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,n,t)},pointerclick:function(e,n,t){Mn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,n,t)},contextmenu:function(e,n,t){Mn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,n,t)},pointerdown:function(e,n,t){switch(this.notifyPointerdown(e,n,t),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,n,t);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,n,t);case"marker-arrowhead":return void this.dragArrowheadStart(e,n,t);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,n,t);case"marker-source":case"marker-target":return}this.dragStart(e,n,t)},pointermove:function(e,n,t){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,n,t);break;case"label-move":this.dragLabel(e,n,t);break;case"arrowhead-move":this.dragArrowhead(e,n,t);break;case"move":this.drag(e,n,t)}r&&Rt(r,this.eventData(e)),this.notifyPointermove(e,n,t)},pointerup:function(e,n,t){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,n,t);break;case"label-move":this.dragLabelEnd(e,n,t);break;case"arrowhead-move":this.dragArrowheadEnd(e,n,t);break;case"move":this.dragEnd(e,n,t)}this.notifyPointerup(e,n,t),this.checkMouseleave(e)},mouseover:function(e){Mn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){Mn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){Mn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){Mn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,n,t,r){Mn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,n,t,r)},onevent:function(e,n,t,r){var o=De(e.target).findParentByClass("link-tool",this.el);if(o){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===n)return void this.model.remove({ui:!0});this.notify(n,e,t,r)}this.notifyPointerdown(e,t,r),this.paper.delegateDragEvents(this,e.data)}else Mn.prototype.onevent.apply(this,arguments)},onlabel:function(e,n,t){this.notifyPointerdown(e,n,t),this.dragLabelStart(e,n,t),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,n,t){if(this.can("vertexAdd")){var r=this.addVertex({x:n,y:t},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,n,t){if(this.can("labelMove")){var o=parseInt(e.currentTarget.getAttribute("label-idx"),10),s=this._getLabelPositionAngle(o),c=this._getLabelPositionArgs(o),p=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(c,p);this.eventData(e,{action:"label-move",labelIdx:o,positionAngle:s,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,n,t){if(this.can("vertexMove")){var o=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:o})}},dragVertexRemoveStart:function(e,n,t){if(this.can("vertexRemove")){var o=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(o)}},dragArrowheadStart:function(e,n,t){if(this.can("arrowheadMove")){var o=e.target.getAttribute("end"),s=this.startArrowheadMove(o,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,n,t){!this.can("linkMove")||this.eventData(e,{action:"move",dx:n,dy:t})},dragLabel:function(e,n,t){var r=this.eventData(e),o={position:this.getLabelPosition(n,t,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset,this.model.label(r.labelIdx,o)},dragVertex:function(e,n,t){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:n,y:t},{ui:!0})},dragArrowhead:function(e,n,t){this.paper.options.snapLinks?this._snapArrowhead(e,n,t):this._connectArrowhead(this.getEventTarget(e),n,t,this.eventData(e))},drag:function(e,n,t){var r=this.eventData(e);this.model.translate(n-r.dx,t-r.dy,{ui:!0}),this.eventData(e,{dx:n,dy:t})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,n,t){var r=this.eventData(e),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,n,t),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,n){var t=e.arrowhead,r=e.initialEnd,o=this.model.prop(t);if(o&&!It.endsEqual(r,o)){var c=this.paper;r.id&&this.notify("link:disconnect",n,c.findViewByModel(r.id),e.initialMagnet,t),o.id&&this.notify("link:connect",n,c.findViewByModel(o.id),e.magnetUnderPointer,t)}},_snapArrowhead:function(e,n,t){const{paper:r}=this,{snapLinks:o,connectionStrategy:s}=r.options,c=this.eventData(e);var p=o.radius||50,m=r.findViewsInArea({x:n-p,y:t-p,width:2*p,height:2*p}),w=c.closestView||null,I=c.closestMagnet||null,_=c.magnetProxy||null;c.closestView=c.closestMagnet=c.magnetProxy=null;var U=Number.MAX_VALUE,te=new me(n,t);m.forEach(function(z){const K=[];"false"!==z.el.getAttribute("magnet")&&K.push({bbox:z.model.getBBox(),magnet:z.el}),z.$("[magnet]").toArray().forEach(ie=>{K.push({bbox:z.getNodeBBox(ie),magnet:ie})}),K.forEach(ie=>{const{magnet:ve,bbox:Ae}=ie,ke=Ae.center().squaredDistance(te);ke<U&&(I===ve||r.options.validateConnection.apply(r,c.validateConnectionArgs(z,z.el===ve?null:ve)))&&(U=ke,c.closestView=z,c.closestMagnet=ve)})},this);var oe,Se=null,Pe=c.closestView,Ve=c.closestMagnet;Ve&&(Se=c.magnetProxy=Pe.findProxyNode(Ve,"highlighter"));var Ne=c.arrowhead,k=I!==Ve;if(w&&k&&w.unhighlight(_,{connecting:!0,snapping:!0}),Pe){const{prevEnd:z,prevX:K,prevY:ie}=c;if(c.prevX=n,c.prevY=t,!k&&("function"!=typeof s||K===n&&ie===t)||(oe=Pe.getLinkEnd(Ve,n,t,this.model,Ne),!k&&aa(z,oe)))return;c.prevEnd=oe,k&&Pe.highlight(Se,{connecting:!0,snapping:!0})}else oe={x:n,y:t};this.model.set(Ne,oe||{x:n,y:t},{ui:!0}),w&&this.notify("link:snap:disconnect",e,w,I,Ne),Pe&&this.notify("link:snap:connect",e,Pe,Ve,Ne)},_snapArrowheadEnd:function(e){var n=e.closestView,t=e.closestMagnet;n&&t&&(n.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=n.findMagnet(t)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,n,t,r){const{paper:o,model:s}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const c=r.viewUnderPointer=o.findView(e);if(c){const p=r.magnetUnderPointer=c.findMagnet(e),m=r.magnetProxy=c.findProxyNode(p,"highlighter");p&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(c,p))?m&&c.highlight(m,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,s.set(r.arrowhead,{x:n,y:t},{ui:!0})},_connectArrowheadEnd:function(e={},n,t){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:s,magnetProxy:c,arrowhead:p}=e;if(!s||!c||!o)return;o.unhighlight(c,{connecting:!0});const m=o.getLinkEnd(s,n,t,r,p);r.set(p,m,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var n=this.el.style;e.pointerEvents=n.pointerEvents,n.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var n=[];n[4]=e,n[5]=this;var t,r=0,o=0;"source"===e?(r=2,t="target"):(o=2,t="source");var s=this.model.get(t);if(s.id){var c=n[r]=this.paper.findViewByModel(s.id),p=c.getMagnetFromLinkEnd(s);p===c.el&&(p=void 0),n[r+1]=p}return function m(w,I){return n[o]=w,n[o+1]=w.el===I?void 0:I,n}},_markAvailableMagnets:function(e){function n(_,U){var te=_.paper;return te.options.validateConnection.apply(te,this.validateConnectionArgs(_,U))}var t=this.paper,r=t.model.getCells();e.marked={};for(var o=0,s=r.length;o<s;o++){var c=r[o].findView(t);if(c){var p=Array.prototype.slice.call(c.el.querySelectorAll("[magnet]"));"false"!==c.el.getAttribute("magnet")&&p.push(c.el);var m=p.filter(n.bind(e,c));if(m.length>0){for(var w=0,I=m.length;w<I;w++)c.highlight(m[w],{magnetAvailability:!0});c.highlight(null,{elementAvailability:!0}),e.marked[c.model.id]=m}}}},_unmarkAvailableMagnets:function(e){for(var t,r,n=Object.keys(e.marked),o=0,s=n.length;o<s;o++){r=e.marked[t=n[o]];var c=this.paper.findViewByModel(t);if(c){for(var p=0,m=r.length;p<m;p++)c.unhighlight(r[p],{magnetAvailability:!0});c.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,n){n||(n={});var t={action:"arrowhead-move",arrowhead:e,whenNotAllowed:n.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:hn(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(t),!0!==n.ignoreBackwardsCompatibility&&(this._dragData=t),t},onRemove:function(){Mn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:nn});Object.defineProperty(pi.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var n=this.model.source();return new gt(n.x,n.y)}var t=this.sourceMagnet;return e.isNodeConnection(t)?new gt(this.sourceAnchor):e.getNodeBBox(t||e.el)}}),Object.defineProperty(pi.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var n=this.model.target();return new gt(n.x,n.y)}var t=this.targetMagnet;return e.isNodeConnection(t)?new gt(this.targetAnchor):e.getNodeBBox(t||e.el)}});const wo={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Lu=bs.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return ti(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,n){this.el.insertBefore(e,this.insertPivot(n))},insertNode:function(e){const{el:n}=this;e.parentNode!==n&&n.appendChild(e)},insertPivot:function(e){const{el:n,pivotNodes:t}=this;(e=+e)||(e=0);let r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:"+(e+1));let o=-1/0;for(let s in t)s=+s,s<e&&s>o&&(o=s);return n.insertBefore(r,o!==-1/0?t[o].nextSibling:n.firstChild),r},removePivots:function(){const{el:e,pivotNodes:n}=this;for(let t in n)e.removeChild(n[t]);this.pivotNodes={}}}),Ol=Ta.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,n){const{options:t}=this,{useFirstSubpath:r}=t;let o;try{const s=De(n);if(o=s.convertToPathData().trim(),"PATH"===s.tagName()&&r){const c=o.search(/.M/i)+1;c>0&&(o=o.substr(0,c))}}catch(s){const c=e.getNodeBoundingRect(n);o=De.rectToPath(Rt({},t,c.toJSON()))}return o},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,n){const{vel:t,options:r}=this,{padding:o,layer:s}=r;let c=e.getNodeMatrix(n);if(o){!s&&n===e.el&&t.remove();let p=e.getNodeBoundingRect(n);const m=p.x+p.width/2,w=p.y+p.height/2;p=De.transformRect(p,c);const I=Math.max(p.width,1),_=Math.max(p.height,1),U=(I+o)/I,te=(_+o)/_,oe=De.createSVGMatrix({a:U,b:0,c:0,d:te,e:m-U*m,f:w-te*w});c=c.multiply(oe)}t.attr({d:this.getPathData(e,n),transform:De.matrixToTransformString(c)})},highlight(e,n){const{vel:t,options:r}=this;t.attr(r.attrs),e.isNodeConnection(n)?this.highlightConnection(e):this.highlightNode(e,n)}}),kl=20,Wi=Ta.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:kl,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,n){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:t,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,s=n.tagName();if(!De.isSVGGraphicsElement(n)||o.includes(s))return n.remove(),!1;if(r.includes(s)){const c=e.vel.findOne(`#${n.id}`);if(c){const{node:p}=c;let m=e.getNodeBoundingRect(p);e.model.isElement()&&(m=De.transformRect(m,e.getNodeMatrix(p)));const w=De("rect",m.toJSON()),{x:I,y:_}=m.center(),{angle:U,cx:te=I,cy:oe=_}=c.rotate();U&&w.rotate(U,te,oe),n.parent().append(w)}return n.remove(),!1}return t.forEach(c=>{"fill"===c&&"none"===n.attr("fill")||n.removeAttr(c)}),!0},transformMaskRoot(e,n){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:t}=this;t.forEach(r=>{n.removeAttr(r)})},getMaskShape(e,n){const{options:t,MASK_REPLACE_TAGS:r}=this,{deep:o}=t,s=n.tagName();let c;if("G"===s){if(!o)return null;c=n.clone(),function Hc(e,n){const t=e.children();for(;t.length>0;){const r=t.shift();n(r)&&t.push(...r.children())}}(c,p=>this.transformMaskChild(e,p))}else{if(r.includes(s))return null;c=n.clone()}return this.transformMaskRoot(e,c),c},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,n){const{VISIBLE:t,INVISIBLE:r,options:o}=this,{padding:s,attrs:c}=o,p="stroke-width"in c?c["stroke-width"]:1,m="none"!==n.attr("fill");let w=parseFloat(n.attr("stroke-width"));isNaN(w)&&(w=1);const I=w+2*s,_=I+2*p;let U=this.getMaskShape(e,n);if(!U){const te=e.getNodeBoundingRect(n.node);te.inflate(te.width?0:.5,te.height?0:.5),U=De("rect",te.toJSON())}return U.attr(c),De("mask",{id:this.getMaskId()}).append([U.clone().attr({fill:m?t:"none",stroke:t,"stroke-width":_}),U.clone().attr({fill:m?r:"none",stroke:r,"stroke-width":I})])},removeMask(e){const n=e.svg.getElementById(this.getMaskId());n&&e.defs.removeChild(n)},addMask(e,n){e.defs.appendChild(n.node)},highlight(e,n){const{options:t,vel:r}=this,{padding:o,attrs:s,maskClip:c=kl,layer:p}=t,m="stroke"in s?s.stroke:"#000000";!p&&n===e.el&&r.remove();const w=e.getNodeBoundingRect(n).inflate(o+c),I=this.getMask(e,De(n));this.addMask(e.paper,I),r.attr(w.toJSON()),r.attr({transform:De.matrixToTransformString(e.getNodeMatrix(n)),mask:`url(#${I.id})`,fill:m})},unhighlight(e){this.removeMask(e.paper)}}),Ma=Ta.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:ti("highlight-opacity"),highlight:function(e,n){De(n).addClass(this.opacityClassName)},unhighlight:function(e,n){De(n).removeClass(this.opacityClassName)}}),Ru=ti("highlighted"),jc=Ta.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Ru},highlight:function(e,n){De(n).addClass(this.options.className)},unhighlight:function(e,n){De(n).removeClass(this.options.className)}},{className:Ru});function Nu(e,n,t,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function zc(e,n,t,r){return e.getPointAtLength("length"in r?r.length:20)}function ss(e){return function(n,t,r,o){if(r instanceof Element){var c,s=this.paper.findView(r);if(s)if(s.isNodeConnection(r)){var p="fixedAt"in o?o.fixedAt:"50%";c=Du(s,p)}else c=s.getNodeBBox(r).center();else c=new me;return e.call(this,n,t,c,o)}return e.apply(this,arguments)}}function Du(e,n){var t=parseFloat(n);return Ce(n)?e.getPointAtRatio(t/100):e.getPointAtLength(t)}const Oa=ss(function Ll(e,n,t,r){var o=1e6,s=e.getConnection(),c=e.getConnectionSubdivisions(),p=new yt(t.clone().offset(0,o),t.clone().offset(0,-o)),m=new yt(t.clone().offset(o,0),t.clone().offset(-o,0)),w=p.intersect(s,{segmentSubdivisions:c}),I=m.intersect(s,{segmentSubdivisions:c}),_=[];return w&&Array.prototype.push.apply(_,w),I&&Array.prototype.push.apply(_,I),_.length>0?t.chooseClosest(_):"fallbackAt"in r?Du(e,r.fallbackAt):Gc(e,n,t,r)}),Gc=ss(function Uc(e,n,t,r){return e.getClosestPoint(t)||new me});function So(e,n,t){if(Pn(t)){const{x:o,y:s}=t;if(isFinite(s)){const c=new yt(n,e),{start:p,end:m}=c.parallel(s);n=p,e=m}t=o}if(!isFinite(t))return e;var r=e.distance(n);return 0===t&&r>0?e:e.move(n,-Math.min(t,r-1))}function Fu(e){var n=e.getAttribute("stroke-width");return null===n?0:parseFloat(n)||0}function $c(e,n,t,r){var o=n.getNodeBBox(t);r.stroke&&o.inflate(Fu(t)/2);var s=e.intersect(o);return So(s?e.start.chooseClosest(s):e.end,e.start,r.offset)}var Vu="segmentSubdivisons",Bu="shapeBBox";const Yc=function Rl(e,n,t,r){let{offset:o,alignOffset:s,align:c}=r;return c&&function Wc(e,n,t=0){let r,o,s,c;const{start:p,end:m}=e;switch(n){case"left":r="x",o=m,s=p,c=-1;break;case"right":r="x",o=p,s=m,c=1;break;case"top":r="y",o=m,s=p,c=-1;break;case"bottom":r="y",o=p,s=m,c=1;break;default:return}p[r]<m[r]?o[r]=s[r]:s[r]=o[r],isFinite(t)&&(o[r]+=c*t,s[r]+=c*t)}(e,c,s),So(e.end,e.start,o)},Xc=$c,Ai=function Ud(e,n,t,r){var o=n.model.angle();if(0===o)return $c(e,n,t,r);var s=n.getNodeUnrotatedBBox(t);r.stroke&&s.inflate(Fu(t)/2);var c=s.center(),p=e.clone().rotate(c,o),m=p.setLength(1e6).intersect(s);return So(m?p.start.chooseClosest(m).rotate(c,-o):e.end,e.start,r.offset)},jo=function Wd(e,n,t,r){var o,s,c=r.selector,p=e.end;if(o="string"==typeof c?n.findBySelector(c)[0]:Array.isArray(c)?pe(t,c):function Gd(e){if(!e)return null;var n=e;do{var t=n.tagName;if("string"!=typeof t)return null;if("G"===(t=t.toUpperCase()))n=n.firstElementChild;else{if("TITLE"!==t)break;n=n.nextElementSibling}}while(n);return n}(t),!De.isSVGGraphicsElement(o)){if(o===t||!De.isSVGGraphicsElement(t))return p;o=t}var Ne,m=n.getNodeShape(o),w=n.getNodeMatrix(o),I=n.getRootTranslateMatrix(),_=n.getRootRotateMatrix(),U=I.multiply(_).multiply(w),te=U.inverse(),oe=De.transformLine(e,te),Se=oe.start.clone(),Pe=n.getNodeData(o);if(!1===r.insideout&&(Pe[Bu]||(Pe[Bu]=m.bbox()),Pe[Bu].containsPoint(Se)))return p;if(m instanceof Pt){var k=r.precision||2;Pe[Vu]||(Pe[Vu]=m.getSegmentSubdivisions({precision:k})),Ne={precision:k,segmentSubdivisions:Pe[Vu]}}!0===r.extrapolate&&oe.setLength(1e6),(s=oe.intersect(m,Ne))?De.isArray(s)&&(s=Se.chooseClosest(s)):!0===r.sticky&&(s=m instanceof gt?m.pointNearestToPoint(Se):m instanceof Cr?m.intersectionWithLineFromCenterToPoint(Se):m.closestPoint(Se,Ne));var z=s?De.transformPoint(s,U):p,K=r.offset||0;return r.stroke&&(K+=Fu(o)/2),So(z,e.start,K)};function fa(e){return function(n,t,r,o){var s=!!o.rotate,c=s?n.getNodeUnrotatedBBox(t):n.getNodeBBox(t),p=c[e](),m=o.dx;if(m){var w=Ce(m);m=parseFloat(m),isFinite(m)&&(w&&(m/=100,m*=c.width),p.x+=m)}var I=o.dy;if(I){var _=Ce(I);I=parseFloat(I),isFinite(I)&&(_&&(I/=100,I*=c.height),p.y+=I)}return s?p.rotate(n.model.getBBox().center(),-n.model.angle()):p}}const Kc=fa("center"),Jc=fa("topMiddle"),Yd=fa("bottomMiddle"),Qc=fa("leftMiddle"),Is=fa("rightMiddle"),eu=fa("origin"),Xd=fa("topRight"),Zc=fa("bottomLeft"),qc=fa("corner"),ju=ss(function $d(e,n,t,r){var o=e.model.angle(),s=e.getNodeBBox(n),c=s.center(),p=s.origin(),m=s.corner(),w=r.padding;if(isFinite(w)||(w=0),p.y+w<=t.y&&t.y<=m.y-w){var I=t.y-c.y;c.x+=0===o||180===o?0:1*I/Math.tan(Lt(o)),c.y+=I}else if(p.x+w<=t.x&&t.x<=m.x-w){var _=t.x-c.x;c.y+=90===o||270===o?0:_*Math.tan(Lt(o)),c.x+=_}return c}),ef=ss(function Hu(e,n,t,r){var s,c,p,o=!!r.rotate;o?(s=e.getNodeUnrotatedBBox(n),p=e.model.getBBox().center(),c=e.model.angle()):s=e.getNodeBBox(n);var I,m=r.padding;switch(isFinite(m)&&s.inflate(m),o&&t.rotate(p,c),s.sideNearestToPoint(t)){case"left":I=s.leftMiddle();break;case"right":I=s.rightMiddle();break;case"top":I=s.topMiddle();break;case"bottom":I=s.bottomMiddle()}return o?I.rotate(p,-c):I}),zu=function Ps(e,n,t,r,o){return e.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)},ka={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},nu=9007199254740991,As=Mn.Highlighting,Nl={[As.DEFAULT]:{name:"stroke",options:{padding:3}},[As.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[As.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Dl=[{name:wo.BACK},{name:wo.CELLS},{name:wo.LABELS},{name:wo.FRONT},{name:wo.TOOLS}],Jd=bs.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:Cu,linkView:pi,snapLabels:!1,snapLinks:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,n){return!1},highlighting:Nl,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new It,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,n,t){return"passive"!==n.getAttribute("magnet")},validateConnection:function(e,n,t,r,o,s){return("target"===o?t:e)instanceof Cu},embeddingMode:!1,validateEmbedding:function(e,n){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:ka.EXACT,frozen:!1,onViewUpdate:function(e,n,t,r,o){n&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(e,t,r)},onViewPostponed:function(e,n,t){return t.forcePostponedViewUpdate(e,n)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:O,anchorNamespace:H,linkAnchorNamespace:M,connectionPointNamespace:B},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){const{options:e,el:n}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&Rr(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new ua;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this.$document=Mt(n.ownerDocument),this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,n,t){var r=t.position;this.isAsync()||!Sn(r)?this.renderView(e,t):(t.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,t),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,n,t){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,t)},onCellChange:function(e,n){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===ka.APPROX){const t=this.findViewByModel(e);t&&this.requestViewUpdate(t,t.FLAG_INSERT,t.UPDATE_PRIORITY,n)}},onGraphReset:function(e,n){this.resetLayers(),this.resetViews(e.models,n)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var n=e&&e.batchName,t=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(n)&&!t.hasActiveBatch(r)&&this.updateViews(e)}var o=this.SORT_DELAYING_BATCHES;o.includes(n)&&!t.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:n,defaultRouter:t,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:s,origin:c,highlighting:p,cellViewNamespace:m,interactive:w}=e;!m&&"undefined"!=typeof joint&&Rr(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Rn(n)||(e.defaultConnector=gr(n)),Rn(t)||(e.defaultRouter=gr(t)),Rn(r)||(e.defaultConnectionPoint=gr(r)),Rn(o)||(e.defaultAnchor=gr(o)),Rn(s)||(e.defaultLinkAnchor=gr(s)),Pn(w)&&(e.interactive=Rt({},w)),Pn(p)&&(e.highlighting=Bi({},p,Nl)),e.origin=Rt({},c)},children:function(){var e=De.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:ti("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:ti("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:ti("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:n}=this;if(e in n)return n[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:n}=this,{svg:t,defs:r,layers:o,background:s,grid:c}=e;return this.svg=t,this.defs=r,this.layers=o,this.$background=Mt(s),this.$grid=Mt(c),this.renderLayers(),De.ensureId(t),n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Dl){this.removeLayers(),e.forEach(({name:o})=>{const c=new Lu({name:o});this.layers.appendChild(c.el),this._layers[o]=c});const n=this.getLayerView(wo.CELLS),t=this.getLayerView(wo.TOOLS),r=this.getLayerView(wo.LABELS);this.tools=t.el,this.cells=this.viewport=n.el,n.vel.addClass(ti("viewport")),r.vel.addClass(ti("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].remove(),delete e[n]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e,n=>{e[n].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var n=this.layers;if(void 0===e){var t=n.getAttribute("transform");return(this._viewportTransformString||null)===t?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=t),De.createSVGMatrix(e)}e=De.createSVGMatrix(e);var r=De.matrixToTransformString(e);return n.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=n.getAttribute("transform"),this},clientMatrix:function(){return De.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,n,t){if(e instanceof Mn)for(var r=e.model,o=this.model.getConnectedLinks(r),s=0,c=o.length;s<c;s++){var p=o[s],m=this.findViewByModel(p);if(m){var w=["UPDATE"];p.getTargetCell()===r&&w.push("TARGET"),p.getSourceCell()===r&&w.push("SOURCE");var I=Math.max(n+1,m.UPDATE_PRIORITY);this.scheduleViewUpdate(m,m.getFlag(w),I,t)}}},forcePostponedViewUpdate:function(e,n){if(!(e&&e instanceof Mn))return!1;var t=e.model;if(t.isElement())return!1;if(0==(n&e.getFlag(["SOURCE","TARGET"]))){var r=0,o=this.findViewByModel(t.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o),e.updateEndMagnet("source"));var s=0,c=this.findViewByModel(t.getTargetCell());if(c&&!this.isViewMounted(c)&&(s=this.dumpView(c),e.updateEndMagnet("target")),0===r&&0===s)return!this.dumpView(e)}return!1},requestViewUpdate:function(e,n,t,r){r||(r={}),this.scheduleViewUpdate(e,n,t,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var s=this.updateViews(r);o&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(e,n,t,r){const{_updates:o,options:s}=this,{FLAG_REMOVE:c,FLAG_INSERT:p,UPDATE_PRIORITY:m,cid:w}=e;let I=o.priorities[t];if(I||(I=o.priorities[t]={}),t>m)for(let te=t-1;te>=m;te--){const oe=o.priorities[te];!oe||!(w in oe)||(I[w]|=oe[w],delete oe[w])}let _=I[w]||0;if((_&n)===n)return;_||o.count++,n&c&&_&p?I[w]^=p:n&p&&_&c&&(I[w]^=c),I[w]|=n;const U=s.onViewUpdate;"function"==typeof U&&U.call(this,e,n,t,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],o=this.registerMountedView(e)|r[t];return delete r[t],o},dumpView:function(e,n){var t=this.dumpViewUpdate(e);return t?this.updateView(e,t,n):0},updateView:function(e,n,t){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,model:s}=e;if(e instanceof Mn){if(n&r)return this.removeView(s),0;n&o&&(this.insertView(e),n^=o)}return n?e.confirmUpdate(n,t||{}):0},requireView:function(e,n){var t=this.findViewByModel(e);return t?(this.dumpView(t,n),t):null},registerUnmountedView:function(e){var n=e.cid,t=this._updates;if(n in t.unmounted)return 0;var r=t.unmounted[n]|=e.FLAG_INSERT;return t.unmountedCids.push(n),delete t.mounted[n],r},registerMountedView:function(e){var n=e.cid,t=this._updates;if(n in t.mounted)return 0;t.mounted[n]=!0,t.mountedCids.push(n);var r=t.unmounted[n]||0;return delete t.unmounted[n],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var n=rr({},e,{viewport:null});this.checkViewport(n),this.updateViews(n)},updateViews:function(e){this.notifyBeforeRender(e);let n,t=0,r=0,o=nu;do{r++,n=this.updateViewsBatch(e),t+=n.updated,o=Math.min(n.priority,o)}while(!n.empty);const s={updated:t,batches:r,priority:o};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,n=Object.keys(e);let t=n.length;for(;t>0&&t--;)for(let r in e[n[t]])return!0;return!1},updateViewsAsync:function(e,n){e||(e={}),n||(n={processed:0,priority:nu});var t=this._updates,r=t.id;if(r){ue(r),0===n.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);var o=this.updateViewsBatch(e),s=rr({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),c=this.checkViewport(s),p=c.unmounted,m=c.mounted,w=n.processed,I=t.count;o.updated>0&&(o.processed=w+=o.updated+o.unmounted,n.priority=Math.min(o.priority,n.priority),o.empty&&0===m?(o.unmounted+=p,o.mounted+=m,o.priority=n.priority,this.notifyAfterRender(o,e),n.processed=0,n.priority=nu,t.count=0):n.processed=w);var _=e.progress;if(I&&"function"==typeof _&&_.call(this,o.empty,w,I,o,this),t.id!==r)return}t.id=X(this.updateViewsAsync,this,e,n)},notifyBeforeRender:function(e={}){let n=e.beforeRender;"function"!=typeof n&&(n=this.options.beforeRender,"function"!=typeof n)||n.call(this,e,this)},notifyAfterRender:function(e,n={}){let t=n.afterRender;"function"!=typeof t&&(t=this.options.afterRender),"function"==typeof t&&t.call(this,e,n,this),this.trigger("render:done",e,n)},updateViewsBatch:function(e){e||(e={});var n=e.batchSize||1/0,t=this._updates,r=0,o=0,s=0,c=0,p=nu,m=!0,w=this.options,I=t.priorities,_="viewport"in e?e.viewport:w.viewport;"function"!=typeof _&&(_=null);var U=w.onViewPostponed;"function"!=typeof U&&(U=null);var te=Object.keys(I);e:for(var oe=0,Se=te.length;oe<Se;oe++){var Pe=+te[oe],Ve=I[Pe];for(var Ne in Ve){if(r>=n){m=!1;break e}var k=is[Ne];if(k){var z=Ve[Ne];if(0==(z&k.FLAG_REMOVE)){var K=Ne in t.unmounted;if(k.DETACHABLE&&_&&!_.call(this,k,!K,this)){K||(this.registerUnmountedView(k),k.unmount()),t.unmounted[Ne]|=z,delete Ve[Ne],s++;continue}K&&(z|=k.FLAG_INSERT,c++),z|=this.registerMountedView(k)}var ie=this.updateView(k,z,e);ie>0&&(Ve[Ne]=ie,!U||!U.call(this,k,ie,this)||Ve[Ne])?(o++,m=!1):(p>Pe&&(p=Pe),r++,delete Ve[Ne])}else delete Ve[Ne]}}return{priority:p,updated:r,postponed:o,unmounted:s,mounted:c,empty:m}},getUnmountedViews:function(){const n=Object.keys(this._updates.unmounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=is[n[o]];return r},getMountedViews:function(){const n=Object.keys(this._updates.mounted),t=n.length,r=new Array(t);for(var o=0;o<t;o++)r[o]=is[n[o]];return r},checkUnmountedViews:function(e,n){n||(n={});var t=0;"function"!=typeof e&&(e=null);for(var o=this._updates,s=o.unmountedCids,c=o.unmounted,p=0,m=(Math.min(s.length,"mountBatchSize"in n?n.mountBatchSize:1/0));p<m;p++){var w=s[p];if(w in c){var I=is[w];if(I){if(I.DETACHABLE&&e&&!e.call(this,I,!1,this)){s.push(w);continue}t++;var _=this.registerMountedView(I);_&&this.scheduleViewUpdate(I,_,I.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,p),t},checkMountedViews:function(e,n){n||(n={});var t=0;if("function"!=typeof e)return t;for(var o=this._updates,s=o.mountedCids,c=o.mounted,p=0,m=(Math.min(s.length,"unmountBatchSize"in n?n.unmountBatchSize:1/0));p<m;p++){var w=s[p];if(w in c){var I=is[w];if(I){if(!I.DETACHABLE||e.call(this,I,!0,this)){s.push(w);continue}t++,this.registerUnmountedView(I)&&I.unmount()}}}return s.splice(0,p),t},checkViewport:function(e){var n=rr({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),t="viewport"in n?n.viewport:this.options.viewport,r=this.checkMountedViews(t,n);return r>0&&(n.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,n.mountBatchSize)),{mounted:this.checkUnmountedViews(t,n),unmounted:r}},freeze:function(e){e||(e={});var n=this._updates,t=e.key,r=this.options.frozen,o=n.freezeKey;if(t&&t!==o){if(r&&o)return;n.freezeKey=t,n.keyFrozen=r}this.options.frozen=!0;var s=n.id;n.id=null,this.isAsync()&&s&&ue(s)},unfreeze:function(e){e||(e={});var n=this._updates,t=e.key,r=n.freezeKey;t&&r&&t!==r||(n.freezeKey=null,(!t||t!==r||!n.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=n.keyFrozen=!1,n.sort&&(this.sortViews(),n.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===ka.EXACT},onRemove:function(){this.freeze(),this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,n=e.width,t=e.height;return Sn(n)||(n=this.el.clientWidth),Sn(t)||(t=this.el.clientHeight),{width:n,height:t}},setDimensions:function(e,n){const{options:t}=this,{width:r,height:o}=t;let s=void 0===e?r:e,c=void 0===n?o:n;if(r===s&&o===c)return;t.width=s,t.height=c,this._setDimensions();const p=this.getComputedSize();this.trigger("resize",p.width,p.height)},_setDimensions:function(){const{options:e}=this;let n=e.width,t=e.height;Sn(n)&&(n=Math.round(n)),Sn(t)&&(t=Math.round(t)),this.$el.css({width:null===n?"":n,height:null===t?"":t})},setOrigin:function(e,n){return this.translate(e||0,n||0)},fitToContent:function(e,n,t,r){r=Nn(e)?e:Rt({gridWidth:e,gridHeight:n,padding:t},r);const{x:o,y:s,width:c,height:p}=this.getFitToContentArea(r),{sx:m,sy:w}=this.scale();return this.setOrigin(-o*m,-s*w),this.setDimensions(c*m,p*w),new gt(o,s,c,p)},getFitToContentArea:function(e={}){const n=e.gridWidth||1,t=e.gridHeight||1,r=Vt(e.padding||0),o=Math.max(e.minWidth||0,n),s=Math.max(e.minHeight||0,t),c=e.maxWidth||Number.MAX_VALUE,p=e.maxHeight||Number.MAX_VALUE,m=e.allowNewOrigin,w="contentArea"in e?new gt(e.contentArea):this.getContentArea(e),{sx:I,sy:_}=this.scale();w.x*=I,w.y*=_,w.width*=I,w.height*=_;let U=Math.ceil((w.width+w.x)/n),te=Math.ceil((w.height+w.y)/t);e.allowNegativeBottomRight||(U=Math.max(U,1),te=Math.max(te,1)),U*=n,te*=t;let oe=0;("negative"===m&&w.x<0||"positive"===m&&w.x>=0||"any"===m)&&(oe=Math.ceil(-w.x/n)*n,oe+=r.left,U+=oe);let Se=0;return("negative"===m&&w.y<0||"positive"===m&&w.y>=0||"any"===m)&&(Se=Math.ceil(-w.y/t)*t,Se+=r.top,te+=Se),U+=r.right,te+=r.bottom,U=Math.max(U,o),te=Math.max(te,s),U=Math.min(U,c),te=Math.min(te,p),new gt(-oe/I,-Se/_,U/I,te/_)},scaleContentToFit:function(e){var n,t;if(e||(e={}),"contentArea"in e){var r=e.contentArea;n=this.localToPaperRect(r),t=new me(r)}else n=this.getContentBBox(e),t=this.paperToLocalPoint(n);if(n.width&&n.height){rr(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var w,o=Vt(e.padding),s=e.minScaleX||e.minScale,c=e.maxScaleX||e.maxScale,p=e.minScaleY||e.minScale,m=e.maxScaleY||e.maxScale;if(e.fittingBBox)w=e.fittingBBox;else{var I=this.translate(),_=this.getComputedSize();w={x:I.tx,y:I.ty,width:_.width,height:_.height}}w=new gt(w).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var U=this.scale(),te=w.width/n.width*U.sx,oe=w.height/n.height*U.sy;if(e.preserveAspectRatio&&(te=oe=Math.min(te,oe)),e.scaleGrid){var Se=e.scaleGrid;te=Se*Math.floor(te/Se),oe=Se*Math.floor(oe/Se)}te=Math.min(c,Math.max(s,te)),oe=Math.min(m,Math.max(p,oe));var Pe=this.options.origin,Ve=w.x-t.x*te-Pe.x,Ne=w.y-t.y*oe-Pe.y;this.scale(te,oe),this.translate(Ve,Ne)}},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new gt:De(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:n}=this.options;let t;return t=Rn(n)?n.apply(this,e):!0===n?this.getArea():n?new gt(n):null,t},createViewForModel:function(e){const{options:n}=this;var t,r,o=n.cellViewNamespace,s=e.get("type")+"View",c=pe(o,s,".");return e.isLink()?(t=n.linkView,r=pi):(t=n.elementView,r=Cu),new(t.prototype instanceof Ur.View?c||t:t.call(this,e)||c||r)({model:e,interactive:n.interactive,labelsLayer:!0===n.labelsLayer?wo.LABELS:n.labelsLayer})},removeView:function(e){const{id:n}=e,{_views:t,_updates:r}=this,o=t[n];if(o){var{cid:s}=o;const{mounted:c,unmounted:p}=r;o.remove(),delete t[n],delete c[s],delete p[s]}return o},renderView:function(e,n){const{id:t}=e,r=this._views;let o,s,c=!0;return t in r&&(o=r[t],o.model===e?(s=o.FLAG_INSERT,c=!1):this.removeView(e)),c&&(o=r[t]=this.createViewForModel(e),o.paper=this,s=this.registerUnmountedView(o)|o.getFlag(Er(o,"initFlag"))),this.requestViewUpdate(o,s,o.UPDATE_PRIORITY,n),o},onImageDragStart:function(){return!1},resetViews:function(e,n){n||(n={}),e||(e=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var t=0,r=e.length;t<r;t++)this.renderView(e[t],n);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){ci(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=Mt(this.cells).children("[model-id]"),n=this.model.get("cells");!function(e,n){var t=Mt(e),r=t.map(function(){var s=this.parentNode,c=s.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,c),s.removeChild(c)}});Array.prototype.sort.call(t,n).each(function(o){r[o].call(this)})}(e,function(t,r){var o=n.get(t.getAttribute("model-id")),s=n.get(r.getAttribute("model-id")),c=o.attributes.z||0,p=s.attributes.z||0;return c===p?0:c<p?-1:1})},insertView:function(e){const n=this.getLayerView(wo.CELLS),{el:t,model:r}=e;this.options.sorting===ka.APPROX?n.insertSortedNode(t,r.get("z")):n.insertNode(t),e.onMount()},scale:function(e,n,t,r){if(void 0===e)return De.matrixToScale(this.matrix());void 0===n&&(n=e),void 0===t&&(t=0,r=0);var o=this.translate();(t||r||o.tx||o.ty)&&this.translate(o.tx-t*(e-1),o.ty-r*(n-1)),e=Math.max(e||0,this.MIN_SCALE),n=Math.max(n||0,this.MIN_SCALE);var p=this.matrix();return p.a=e,p.d=n,this.matrix(p),this.trigger("scale",e,n,t,r),this},rotate:function(e,n,t){if(void 0===e)return De.matrixToRotate(this.matrix());if(void 0===n){var r=this.cells.getBBox();n=r.width/2,t=r.height/2}var o=this.matrix().translate(n,t).rotate(e).translate(-n,-t);return this.matrix(o),this},translate:function(e,n){if(void 0===e)return De.matrixToTranslate(this.matrix());const{options:t}=this,{origin:r,drawGrid:o}=t;e||(e=0),n||(n=0);const s=this.matrix();if(s.e===e&&s.f===n)return this;s.e=e,s.f=n,this.matrix(s);const{tx:c,ty:p}=this.translate();return r.x=c,r.y=p,this.trigger("translate",c,p),o&&this.drawGrid(),this},findView:function(e){var n=jn(e)?this.cells.querySelector(e):e instanceof Mt?e[0]:e,t=this.findAttribute("model-id",n);if(t)return this._views[t]},findViewByModel:function(e){var n=jn(e)||Sn(e)?e:e&&e.id;return this._views[n]},findViewsFromPoint:function(e){return e=new me(e),this.model.getElements().map(this.findViewByModel,this).filter(function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,n){n=rr(n||{},{strict:!1}),e=new gt(e);var t=this.model.getElements().map(this.findViewByModel,this),r=n.strict?"containsRect":"intersect";return t.filter(function(o){return o&&e[r](o.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...n){"string"==typeof e&&this.trigger("tools:event",e,...n)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,n){return this.clientToLocalPoint(e,n).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,n){var t=new me(e,n);return De.transformPoint(t,this.matrix())},localToPaperRect:function(e,n,t,r){var o=new gt(e,n,t,r);return De.transformRect(o,this.matrix())},paperToLocalPoint:function(e,n){var t=new me(e,n);return De.transformPoint(t,this.matrix().inverse())},paperToLocalRect:function(e,n,t,r){var o=new gt(e,n,t,r);return De.transformRect(o,this.matrix().inverse())},localToClientPoint:function(e,n){var t=new me(e,n);return De.transformPoint(t,this.clientMatrix())},localToClientRect:function(e,n,t,r){var o=new gt(e,n,t,r);return De.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(e,n){var t=new me(e,n);return De.transformPoint(t,this.clientMatrix().inverse())},clientToLocalRect:function(e,n,t,r){var o=new gt(e,n,t,r);return De.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(e,n){return this.localToPaperPoint(e,n).offset(this.pageOffset())},localToPageRect:function(e,n,t,r){return this.localToPaperRect(e,n,t,r).offset(this.pageOffset())},pageToLocalPoint:function(e,n){var r=new me(e,n).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,n,t,r){var o=this.pageOffset(),s=new gt(e,n,t,r);return s.x-=o.x,s.y-=o.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new me(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof pi))throw new Error("Must provide a linkView.");var n=e.model,t=this.options,r=this.model,o=r.constructor.validations;return!(!t.multiLinks&&!o.multiLinks.call(this,r,n)||!t.linkPinning&&!o.linkPinning.call(this,r,n)||"function"==typeof t.allowLink&&!t.allowLink.call(this,e,this))},getDefaultLink:function(e,n){return Rn(this.options.defaultLink)?this.options.defaultLink.call(this,e,n):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:n,type:t}=e;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===n){if(!r||t&&(n=r[t],!1===n))return!1;n||(n=r.default)}if(!n)return!1;jn(n)&&(n={name:n});const s=n.name,c=o[s];if(!c)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof c.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof c.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:c,options:n.options||{},name:s}},onCellHighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:s}=r;o.highlight(e,n,s)},onCellUnhighlight:function(e,n,t){const r=this.resolveHighlighter(t);if(!r)return;const{highlighter:o,options:s}=r;o.unhighlight(e,n,s)},pointerdblclick:function(e){e.preventDefault(),e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdblclick(e,t.x,t.y):this.trigger("blank:pointerdblclick",e,t.x,t.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=D(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?n.contextmenu(e,t.x,t.y):this.trigger("blank:contextmenu",e,t.x,t.y)}},pointerdown:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=this.snapToGrid(e.clientX,e.clientY);n?(e.preventDefault(),n.pointerdown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var n=this.eventData(e);if(n.mousemoved||(n.mousemoved=0),!(++n.mousemoved<=this.options.moveThreshold)){e=D(e);var r=this.snapToGrid(e.clientX,e.clientY),o=n.sourceView;o?o.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,n)}},pointerup:function(e){this.undelegateDocumentEvents();var n=D(e),t=this.snapToGrid(n.clientX,n.clientY),r=this.eventData(e).sourceView;r?r.pointerup(n,t.x,t.y):this.trigger("blank:pointerup",n,t.x,t.y),n.isPropagationStopped()||this.pointerclick(Mt.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n))if(n)n.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=D(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseenter(e),this.el.contains(t)))||s||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=D(e);const{target:n,relatedTarget:t,currentTarget:r}=e,o=this.findView(n);if(this.guard(e,o))return;const s=this.findView(t);o&&(s===o||(o.mouseleave(e),this.el.contains(t)))||s||r===this.el&&this.trigger("paper:mouseleave",e)},mousewheel:function(e){e=D(e);var n=this.findView(e.target);if(!this.guard(e,n)){var t=e.originalEvent,r=this.snapToGrid(t.clientX,t.clientY),o=Math.max(-1,Math.min(1,t.wheelDelta));n?n.mousewheel(e,r.x,r.y,o):this.trigger("blank:mousewheel",e,r.x,r.y,o)}},onevent:function(e){var n=e.currentTarget,t=n.getAttribute("event");if(t){var r=this.findView(n);if(r){if(e=D(e),this.guard(e,r))return;var o=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,t,o.x,o.y)}}},magnetEvent:function(e,n){var t=e.currentTarget;if(t.getAttribute("magnet")){var o=this.findView(t);if(o){if(e=D(e),this.guard(e,o))return;var s=this.snapToGrid(e.clientX,e.clientY);n.call(this,o,e,t,s.x,s.y)}}},onmagnet:function(e){this.magnetEvent(e,function(n,t,r,o,s){n.onmagnet(t,o,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(n,t,r,o,s){n.magnetpointerdblclick(t,r,o,s)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetEvent(e,function(n,t,r,o,s){n.magnetcontextmenu(t,r,o,s)})},onlabel:function(e){var t=this.findView(e.currentTarget);if(t){if(e=D(e),this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t.onlabel(e,r.x,r.y)}},getPointerArgs(e){const n=D(e),{x:t,y:r}=this.snapToGrid(n.clientX,n.clientY);return[n,t,r]},delegateDragEvents:function(e,n){n||(n={}),this.eventData({data:n},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,n),this.undelegateEvents()},guard:function(e,n){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.model&&n.model instanceof vn||this.svg===e.target||this.el===e.target||Mt.contains(this.svg,e.target)))},setGridSize:function(e){return this.options.gridSize=e,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:De("svg",{width:"100%",height:"100%"},De("defs")),patterns:{},add:function(e,n){De(this.root.node.childNodes[0]).append(n),this.patterns[e]=n,this.root.append(De("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(e){var n=this.constructor.gridPatterns;if(jn(e)&&Array.isArray(n[e]))return n[e].map(function(m){return Rt({},m)});var t=e||{args:[{}]},r=Array.isArray(t),o=t.name;if(!r&&!o&&!t.markup&&(o="dot"),o&&Array.isArray(n[o])){var s=n[o].map(function(m){return Rt({},m)}),c=Array.isArray(t.args)?t.args:[t.args||{}];rr(c[0],Do(e,"args"));for(var p=0;p<c.length;p++)s[p]&&Rt(s[p],c[p]);return s}return r?t:[t]},drawGrid:function(e){var n=this.options.gridSize;if(n<=1)return this.clearGrid();var t=Array.isArray(e)?e:[e],r=this.matrix(),o=this._getGridRefs();this._gridSettings.forEach(function(c,p){var m="pattern_"+p,w=zr(c,t[p],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});w.width=n*(r.a||1)*(w.scaleFactor||1),w.height=n*(r.d||1)*(w.scaleFactor||1),o.exist(m)||o.add(m,De("pattern",{id:m,patternUnits:"userSpaceOnUse"},De(w.markup)));var I=o.get(m);Rn(w.update)&&w.update(I.node.childNodes[0],w);var _=w.ox%w.width;_<0&&(_+=w.width);var U=w.oy%w.height;U<0&&(U+=w.height),I.attr({x:_,y:U,width:w.width,height:w.height})});var s=(new XMLSerializer).serializeToString(o.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){var n=(e=e||{}).position||"center",t=e.size||"auto auto",r=this.scale(),o=this.translate();Nn(n)&&(n=o.tx+r.sx*(n.x||0)+"px "+(o.ty+r.sy*(n.y||0))+"px"),Nn(t)&&(t=(t=new gt(t).scale(r.sx,r.sy)).width+"px "+t.height+"px"),this.$background.css({backgroundSize:t,backgroundPosition:n})},drawBackgroundImage:function(e,n){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===n.id){var t,r=(n=n||{}).size,o=n.repeat||"no-repeat",s=n.opacity||1,c=Math.abs(n.quality)||1,p=this.constructor.backgroundPatterns[ts(o)];if(Rn(p)){e.width*=c,e.height*=c;var m=p(e,n);if(!(m instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");t=m.toDataURL("image/png"),o="repeat",Nn(r)?(r.width*=m.width/e.width,r.height*=m.height/e.height):void 0===r&&(n.size={width:m.width/c,height:m.height/c})}else t=e.src,void 0===r&&(n.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:o,backgroundImage:"url("+t+")"}),this.updateBackgroundImage(n)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=gr(e),C(e);var n=document.createElement("img");n.onload=this.drawBackgroundImage.bind(this,n,e),n.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,ci(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Nn(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var n=e.id,t=e.name;if(n||(n=t+this.svg.id+ae(JSON.stringify(e))),!this.isDefined(n)){var o=En[t]&&En[t](e.args||{});if(!o)throw new Error("Non-existing filter "+t);var s=Rt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:n});De(o,s).appendTo(this.defs)}return n},defineGradient:function(e){if(!Nn(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{type:r,id:o=r+n.id+ae(JSON.stringify(e)),stops:s,attrs:c={}}=e;if(this.isDefined(o))return o;const p=pn(s).map(({offset:w,color:I,opacity:_})=>De("stop").attr({offset:w,"stop-color":I,"stop-opacity":Number.isFinite(_)?_:1})),m=De(r,c,p);return m.id=o,m.appendTo(t),o},definePattern:function(e){if(!Nn(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+ae(JSON.stringify(e)),markup:o,attrs:s={}}=e;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const c=De("pattern",{patternUnits:"userSpaceOnUse"});if(c.id=r,c.attr(s),"string"==typeof o)c.append(De(o));else{const{fragment:p}=J(o);c.append(p)}return c.appendTo(t),r},defineMarker:function(e){if(!Nn(e))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");const{svg:n,defs:t}=this,{id:r=n.id+ae(JSON.stringify(e)),markup:o,attrs:s={},markerUnits:c="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const p=De("marker",{orient:"auto",overflow:"visible",markerUnits:c});if(p.id=r,p.attr(s),o)if("string"==typeof o)p.append(De(o));else{const{fragment:m}=J(o);p.append(m)}else{const{type:m="path"}=e,w=De(m,Do(e,"type","id","markup","attrs","markerUnits"));p.append(w)}return p.appendTo(t),r}},{sorting:ka,Layers:wo,backgroundPatterns:{flipXy:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,-1,n.width,n.height),o.drawImage(e,0,0,t,r),o.setTransform(-1,0,0,1,n.width,0),o.drawImage(e,0,0,t,r),o.setTransform(1,0,0,-1,0,n.height),o.drawImage(e,0,0,t,r),n},flipX:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=2*t,n.height=r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(2*t,0),o.scale(-1,1),o.drawImage(e,0,0,t,r),n},flipY:function(e){var n=document.createElement("canvas"),t=e.width,r=e.height;n.width=t,n.height=2*r;var o=n.getContext("2d");return o.drawImage(e,0,0,t,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(e,0,0,t,r),n},watermark:function(e,n){n=n||{};var t=e.width,r=e.height,o=document.createElement("canvas");o.width=3*t,o.height=3*r;for(var s=o.getContext("2d"),c=Sn(n.watermarkAngle)?-n.watermarkAngle:-20,p=Lt(c),m=o.width/4,w=o.height/4,I=0;I<4;I++)for(var _=0;_<4;_++)(I+_)%2>0&&(s.setTransform(1,0,0,1,(2*I-1)*m,(2*_-1)*w),s.rotate(p),s.drawImage(e,-t/2,-r/2,t,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){De(e).attr({width:n.thickness*n.sx,height:n.thickness*n.sy,fill:n.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,n){var t=n.sx<=1?n.thickness*n.sx:n.thickness;De(e).attr({width:t,height:t,fill:n.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",De(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",De(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,n){var t,r=n.width,o=n.height,s=n.thickness;t=r-s>=0&&o-s>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",De(e).attr({d:t,stroke:n.color,"stroke-width":n.thickness})}}]}});class tf{constructor(n){this.offsetX=20,this.offsetY=20,this.graph=new ua,this.paper=new Jd({el:Mt("#paper"),width:"100%",height:"30rem",model:this.graph,gridSize:20,interactive:!1}),this.paper.translate(this.offsetX,this.offsetY),this.paper.on("cell:pointerdown",t=>{"standard.Ellipse"===t.model.attributes.type&&n(t.model.id)})}makeElement(n,t){const s=16*(.6*Math.max(...t.split("\n").map(p=>p.length))+1)*1.3,c=16*(t.split("\n").length+1)*1.5;return new Cc({id:n,size:{width:s,height:c},fill:"var(--tui-secondary)",attrs:{label:{text:t,"font-size":16,"font-weight":"bold","font-family":"sans-serif",fill:"var(--tui-text-01)",cursor:"pointer"},body:{width:s,height:c,rx:10,ry:10,stroke:"var(--tui-base-08)",cursor:"pointer",fill:"var(--tui-secondary)"}}})}makeLink(n,t){return new ca({source:{id:n},target:{id:t},router:{name:"manhattan",args:{maxAllowedDirectionChange:360,perpendicular:!1,startDirections:["right","top","bottom"],endDirections:["left","top","bottom"]}},connector:{name:"rounded"},attrs:{line:{stroke:"var(--tui-base-08)",cursor:"default"},wrapper:{cursor:"default"}}})}makeCellsFromAdjacencyList(n){const t=[],r=[];return n.forEach(o=>{const s=`${o.name.replaceAll(" ","\n")}\n\n${Math.round(100*o.average_success)}% (${o.question_count} Total)`;t.push(this.makeElement(o.pk,s)),o.next_category_ids.forEach(c=>{r.push(this.makeLink(o.pk,c))})}),t.concat(r)}buildGraphFromAdjacencyList(n){const t=this.makeCellsFromAdjacencyList(n);this.graph.resetCells(t);const r=Ks.layout(this.graph,{dagre:Ni(),graphlib:Zt(),nodeSep:40,edgeSep:40,ranker:"longest-path",rankDir:"LR"});this.paper.svg.style.width=`${r.width+2*this.offsetX}px`,this.paper.svg.style.height=`${r.height+2*this.offsetY}px`}}var To=f(19329);function nf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().reset()}),i.\u0275\u0275text(1," Back "),i.\u0275\u0275elementEnd()}if(2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}function rf(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(),r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",0===r.children.length),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Sub-Categories for ",t.parentNodeName," ")}}function Qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"h2",7),i.\u0275\u0275text(1," Top-Level Categories "),i.\u0275\u0275elementEnd()),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275classProp("tui-skeleton",0===t.children.length)}}let of=(()=>{class e{constructor(t,r,o){this.categoryService=t,this.router=r,this.injector=o,this.parentNode=null,this.parentNodeName=null}ngOnInit(){this.categoryService.getCategories().subscribe(t=>{this.rawCategories=t,this.conceptMapGraph=new tf(r=>{this.parentNode=r,this.isTopLevel(r)?this.renderGraph():this.router.navigate(["course",this.currCourse.id,"practice","category",r]).then()}),this.renderGraph()})}renderGraph(){const t=[];if(this.parentNodeName=this.parentNode?this.rawCategories.find(r=>r.pk===this.parentNode).full_name:null,this.rawCategories.filter(r=>r.parent===this.parentNode).forEach(r=>{t.push(r)}),!t)return this.parentNode=null,this.parentNodeName=null,void this.renderGraph();this.conceptMapGraph.buildGraphFromAdjacencyList(t)}reset(){this.parentNode=null,this.renderGraph()}isTopLevel(t){return null===this.rawCategories.find(r=>r.pk===t).parent}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(To.H),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(i.Injector))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-concept-map"]],inputs:{currCourse:"currCourse"},decls:7,vars:5,consts:[[1,"flowchart-instructions","tui-space_bottom-4"],["appearance","primary","aria-label","Back","class","tui-space_right-4","icon","tuiIconArrowLeft","size","s","tuiButton","",3,"tui-skeleton","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["topLevel",""],["id","paper"],["flowchartComponent",""],["appearance","primary","aria-label","Back","icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_right-4",3,"click"],[1,"tui-text_h5","tui-space_vertical-0"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,nf,2,2,"button",1),i.\u0275\u0275template(2,rf,3,3,"ng-container",2),i.\u0275\u0275template(3,Qd,2,2,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"div",4,5)),2&t){const o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.parentNode)("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",0===s.children.length)}},directives:[L.O5,Ot.v0],styles:["#paper[_ngcontent-%COMP%]{width:100%;height:30rem;overflow:auto;border-radius:var(--tui-radius-m);border:var(--tui-base-03) 1px solid}.flowchart-instructions[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var af=f(30567),sf=f(78659),Ir=f(27221),us=f(40520),Ms=f(22552);let Os=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.get(r).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while fetching Course Event")))}deleteCourseEvent(t){const r=this.apiService.getURL("event",t);return this.http.delete(r).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while deleting Course Event")))}addCourseEvent(t){const r=this.apiService.getURL("event");return this.http.post(r,t).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while adding Course Event")))}updateCourseEvent(t){const r=this.apiService.getURL("event",t.id);return this.http.put(r,t).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while updating Course Event")))}getEventTypes(){const t=this.apiService.getURL("event","get-event-types");return this.http.get(t).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while fetching event types")))}getAllEvents(){const t=this.apiService.getURL("event");return this.http.get(t).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while fetching events")))}importCourseEvent(t,r){const o=this.apiService.getURL("event","import-event");return this.http.post(o,{event:t.id,course:r},{observe:"response"}).pipe((0,Ir.K)(this.apiService.handleError("Error occurred during question import.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(us.eN),i.\u0275\u0275inject(Ms.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var La=f(71105),zo=f(27482);function Kt(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"h1",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.event.name)}}function Uu(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p",8),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2(" ",t.num_attempts," / ",t.question.max_submission_allowed," Attempts Taken ")}}const Fl=function(e,n,t){return["/course",e,"event",n,"problem",t]};function ls(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Open "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction3(1,Fl,r.courseId,r.eventId,t.question.id))}}const Zd=function(e,n){return["/course",e,"problem",n]};function Vl(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",12),i.\u0275\u0275text(1," Open "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Zd,r.courseId,t.question.id))}}const uf=function(e){return["/problem",e,"edit"]};function gi(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",12),i.\u0275\u0275text(2," Edit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(1,uf,t.question.id))}}function qd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island")(1,"p",4),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h2",5),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",6),i.\u0275\u0275element(6,"tui-tag",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",8),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"titlecase"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",8),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(12,Uu,3,2,"ng-container",0),i.\u0275\u0275elementStart(13,"div",9),i.\u0275\u0275template(14,ls,3,5,"ng-container",10),i.\u0275\u0275template(15,Vl,2,4,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(17,gi,3,3,"ng-container",0),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",t.question.parent_category_name?t.question.parent_category_name+": ":""," ",t.question.category_name,""),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.question.title),i.\u0275\u0275advance(2),i.\u0275\u0275property("status",o.highlight(o.getStatus(t)))("value",o.getStatus(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(9,11,t.question.type_name)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",t.formatted_current_tokens_received," Tokens Received"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.eventId)("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",o.user.is_teacher)}}function eh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this event. "),i.\u0275\u0275elementEnd())}function lf(e,n){1&e&&(i.\u0275\u0275elementStart(0,"h2",15),i.\u0275\u0275text(1," There aren't any questions available in this course. "),i.\u0275\u0275elementEnd())}function th(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,eh,2,0,"h2",13),i.\u0275\u0275template(2,lf,2,0,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.eventId)("ngIfElse",t)}}function cf(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275template(2,Kt,3,1,"ng-container",0),i.\u0275\u0275elementStart(3,"div",1),i.\u0275\u0275template(4,qd,18,13,"tui-island",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,th,4,2,"ng-container",0),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-container",t.eventId)("tui-container_adaptive",t.eventId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.eventId),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.uqjs.length)}}let ff=(()=>{class e{constructor(t,r,o,s,c,p){this.authenticationService=t,this.router=r,this.route=o,this.uqjService=s,this.courseEventService=c,this.courseService=p,this.authenticationService.currentUser.subscribe(m=>this.user=m)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(t=>{t.success?(0,af.D)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(r=>{this.event=r.event,this.uqjs=r.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(t){return t.question.event&&t.question.is_exam?t.question.is_exam&&t.num_attempts>0?"Submitted":t.question.is_exam?"Not Submitted":void 0:t.status}highlight(t){return 0===t.localeCompare("Solved")?"success":0===t.localeCompare("Partially Solved")?"warning":0===t.localeCompare("Wrong")?"error":"warning"}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(sf.O),i.\u0275\u0275directiveInject(Os),i.\u0275\u0275directiveInject(ge.N))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"question-islands"],[4,"ngFor","ngForOf"],[1,"tui-text_h3","tui-space_vertical-10"],[1,"tui-island__category"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],["size","m",3,"status","value"],[1,"tui-island__paragraph"],[1,"tui-form__buttons"],[4,"ngIf","ngIfElse"],["noEvent",""],["appearance","primary","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-text_h6 tui-space_auto no-content-heading",4,"ngIf","ngIfElse"],["inCourse",""],[1,"tui-text_h6","tui-space_auto","no-content-heading"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,cf,6,7,"ng-container",0),2&t&&i.\u0275\u0275property("ngIf",r.uqjs)},directives:[L.O5,L.sg,La.h,zo.Gi,Ot.v0,ne.yS],pipes:[L.rS],styles:[".no-content-heading[_ngcontent-%COMP%]{margin-top:0}.question-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var cs=f(22307),$i=f(95428),Eo=f(50284),Ar=f(56197),cr=f(61895),mr=f(56249),Mi=f(84620);const nh=["importDialog"];function rh(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",12),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.getEventFilterOptions())}}function ru(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"button",13),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().openEventImportDialog()}),i.\u0275\u0275text(2," Add Event "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}}function df(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island",21)(1,"p",22),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3",19),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",23),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit,c=i.\u0275\u0275nextContext(3);return c.importCourseEvent(s,c.courseId)}),i.\u0275\u0275text(6," Import "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name)}}const hf=function(e){return["/course",e,"new-event"]};function ih(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",15)(2,"a",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().$implicit.complete()}),i.\u0275\u0275elementStart(3,"figure",17),i.\u0275\u0275element(4,"tui-svg",18),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"h2",19),i.\u0275\u0275text(6,"Create New Event"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,df,7,2,"tui-island",20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("hoverable",!0)("routerLink",i.\u0275\u0275pureFunction1(3,hf,t.courseId)),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",t.courseEvents)}}function oh(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,ih,8,5,"ng-container",6),i.\u0275\u0275elementStart(1,"button",14),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t).$implicit.complete()}),i.\u0275\u0275text(2," Cancel "),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",t.courseEvents)}}function ah(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Assignment"),i.\u0275\u0275elementContainerEnd())}function sh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Exam"),i.\u0275\u0275elementContainerEnd())}function pf(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",38)}function gf(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",39)}function uh(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function Bl(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Hl=function(e,n){return["/course",e,"event",n]};function iu(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",40),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Hl,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function jl(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",41),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const zl=function(e,n){return["/course",e,"new-event",n]};function vf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",42),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,zl,r.courseId,t.id))}}function Gu(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",26),i.\u0275\u0275template(2,ah,2,0,"ng-container",6),i.\u0275\u0275template(3,sh,2,0,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",27),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",28)(7,"div"),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"div",29),i.\u0275\u0275template(14,pf,1,0,"tui-tag",30),i.\u0275\u0275template(15,gf,1,0,"ng-template",null,31,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",32),i.\u0275\u0275template(18,uh,2,0,"ng-container",33),i.\u0275\u0275template(19,Bl,2,4,"ng-template",null,34,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",35),i.\u0275\u0275template(22,iu,3,5,"ng-container",33),i.\u0275\u0275template(23,jl,2,1,"ng-template",null,36,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(25,vf,2,4,"a",37),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(16),o=i.\u0275\u0275reference(20),s=i.\u0275\u0275reference(24),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","ASSIGNMENT"===t.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","EXAM"===t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(9,12,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(12,15,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet||t.is_exam)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function mf(e,n){if(1&e&&i.\u0275\u0275template(0,Gu,26,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.getUpcomingEvents())}}function Uo(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Assignment"),i.\u0275\u0275elementContainerEnd())}function fs(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1,"Exam"),i.\u0275\u0275elementContainerEnd())}function lh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",40),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Hl,r.courseId,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function yf(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",41),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function ch(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",42),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,zl,r.courseId,t.id))}}function fh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",26),i.\u0275\u0275template(2,Uo,2,0,"ng-container",6),i.\u0275\u0275template(3,fs,2,0,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",27),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",28)(7,"div"),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"div",29),i.\u0275\u0275element(14,"tui-tag",43),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"div",32),i.\u0275\u0275text(16),i.\u0275\u0275pipe(17,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"div",35),i.\u0275\u0275template(19,lh,3,5,"ng-container",33),i.\u0275\u0275template(20,yf,2,1,"ng-template",null,36,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(22,ch,2,4,"a",37),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(21),o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf","ASSIGNMENT"===t.type),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","EXAM"===t.type),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(9,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(12,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(17,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==o.user?null:o.user.is_teacher))("ngIfElse",r),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function dh(e,n){if(1&e&&i.\u0275\u0275template(0,fh,23,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.getPastEvents())}}var Ra=(()=>(function(e){e.ALL="Assignments and Exams",e.ASSIGNMENT="Assignments Only",e.EXAM="Exams Only"}(Ra||(Ra={})),Ra))();let hh=(()=>{class e{constructor(t,r,o,s){this.authenticationService=t,this.courseEventService=r,this.dialogService=o,this.notificationsService=s,this.filter=Ra.ALL}ngOnInit(){this.courseId=this.course.id,this.authenticationService.currentUser.subscribe(t=>this.user=t),this.courseEventService.getEventTypes().subscribe(t=>{this.eventTypes=t})}getEventFilterOptions(){return Object.values(Ra)}getEvents(){switch(this.filter){case Ra.ALL:return this.events.filter(t=>"ASSIGNMENT"===t.type||"EXAM"===t.type);case Ra.ASSIGNMENT:return this.events.filter(t=>"ASSIGNMENT"===t.type);case Ra.EXAM:return this.events.filter(t=>"EXAM"===t.type)}}getUpcomingEvents(){return this.getEvents().filter(t=>t.is_open||t.is_not_available_yet)}getPastEvents(){return this.getEvents().filter(t=>t.is_closed)}openEventImportDialog(){this.courseEvents=null,this.courseEventService.getAllEvents().subscribe(t=>{this.courseEvents=t}),this.dialogService.open(this.importDialog,{label:"Select an Event to Import",size:"l",closeable:!1}).subscribe()}importCourseEvent(t,r){this.courseEventService.importCourseEvent(t,r).subscribe(o=>{201===o.status&&this.notificationsService.show("The Event has been Imported Successfully.",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(Os),i.\u0275\u0275directiveInject(cs.RO),i.\u0275\u0275directiveInject(Xt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-events-snippet"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(nh,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.importDialog=o.first)}},inputs:{events:"events",course:"course"},decls:17,vars:4,consts:[[1,"eventPage"],[1,"functionBar"],[1,"filter"],["tuiTextfieldSize","l",3,"ngModel","ngModelChange"],["tuiTextfield",""],[3,"items",4,"tuiDataList"],[4,"ngIf"],["importDialog",""],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],[3,"items"],["icon","tuiIconPlus","appearance","primary","aria-label","Add Event","size","l","tuiButton","",3,"click"],["aria-label","Cancel","size","m","tuiButton","","type","button",1,"tui-space_top-8",3,"click"],[1,"import-events","tui-space_top-8"],["size","s","textAlign","center","tuiIsland","",1,"new-event",3,"hoverable","routerLink","click"],[1,"tui-island__figure"],["src","tuiIconPlusLarge"],[1,"tui-island__title"],["size","s",4,"ngFor","ngForOf"],["size","s"],[1,"tui-island__category"],["appearance","primary","aria-label","Import","size","s","tuiButton","",3,"click"],["class","event",4,"ngFor","ngForOf"],[1,"event"],[1,"eventType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["eventComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"tui-select",3),i.\u0275\u0275listener("ngModelChange",function(s){return r.filter=s}),i.\u0275\u0275text(4," You are viewing "),i.\u0275\u0275element(5,"input",4),i.\u0275\u0275template(6,rh,1,1,"tui-data-list-wrapper",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(7,ru,3,0,"ng-container",6),i.\u0275\u0275template(8,oh,3,1,"ng-template",null,7,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"tui-accordion",8)(11,"tui-accordion-item",9),i.\u0275\u0275text(12," Upcoming Events "),i.\u0275\u0275template(13,mf,1,1,"ng-template",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"tui-accordion-item",11),i.\u0275\u0275text(15," Past Events "),i.\u0275\u0275template(16,dh,1,1,"ng-template",10),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",r.filter),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",null==r.course?null:r.course.has_create_event_permission),i.\u0275\u0275advance(3),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[$i.uJ,$i.OI,ye.sz,q.NgControlStatus,q.NgModel,cr.MB,mr.gX,Eo.eC,L.O5,Ot.v0,La.h,ne.yS,Mi.P,L.sg,Ar.oc,Ar.Kc,Ar.dv,zo.Gi],pipes:[L.uU,L.JJ],styles:['.eventPage[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.functionBar[_ngcontent-%COMP%]{align-self:center;width:90%;display:flex;justify-content:start;gap:1rem;flex-wrap:wrap}.filter[_ngcontent-%COMP%]{min-width:22rem}.new-event[_ngcontent-%COMP%]{width:20rem}.new-event[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.event[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.event[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.event[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.event[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"eventType availability" "name grade" "dates linkBtn";align-items:start}}.eventType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.eventType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.eventType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.eventType[_ngcontent-%COMP%]{grid-area:eventType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})(),xf=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}useTokens(t,r){const o=new us.WM({"Content-Type":"application/json"}),s=this.apiService.getURL("token-use","use",r);return this.http.post(s,t,{headers:o}).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while attempting to use tokens")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(us.eN),i.\u0275\u0275inject(Ms.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ul=f(21922);function ph(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tui-notification",8),i.\u0275\u0275text(2," Warning: You are logged in as a teacher! Token uses will not do anything for you! "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function gh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",17)}function vh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",18)}function mh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,gh,1,0,"tui-tag",15),i.\u0275\u0275template(2,vh,1,0,"ng-template",null,16,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.num_used===r.option.maximum_number_of_use)("ngIfElse",t)}}function _f(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}const bf=function(){return{standalone:!0}};function Cf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-island")(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",10),i.\u0275\u0275template(4,mh,4,2,"ng-container",11),i.\u0275\u0275template(5,_f,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"p",13),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",13),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"p",13),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"tui-input-count",14),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().calculateCurrentTotal()})("ngModelChange",function(o){return i.\u0275\u0275restoreView(t).$implicit.num_used=o}),i.\u0275\u0275text(14," Number of Tokens Used "),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275reference(6);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.option.assignment_name),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.num_used>0)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",t.option.tokens_required," Tokens Required"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.points_given," Extra Grade Points Given"),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",t.option.maximum_number_of_use," Maximum Uses"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.num_used)("max",t.option.maximum_number_of_use)("min",0)("ngModelOptions",i.\u0275\u0275pureFunction0(10,bf))}}let yh=(()=>{class e{constructor(t,r,o,s){this.tokenUseService=t,this.route=r,this.authenticationService=o,this.notificationsService=s,this.tokenUsesTableHeaders=["assignment_name","tokens_required","points_given","maximum_number_of_use","actions"],this.authenticationService.currentUser.subscribe(c=>this.user=c)}ngOnInit(){this.tokenUses=this.courseReg.token_uses,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const t in this.tokenUses)this.remainingTokens-=this.tokenUses[t].num_used*this.tokenUses[t].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const t=this.route.snapshot.params.courseId,r={};this.tokenUses.forEach(o=>r[o.option.id]=o.num_used),this.tokenUseService.useTokens(r,t).subscribe(()=>{this.notificationsService.show("Token Uses Saved!",{status:"success"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(xf),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(Xt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:12,vars:13,consts:[[4,"ngIf"],[1,"tokens"],[1,"tui-text_h6","tui-space_bottom-8"],["method","post"],[1,"token-use-islands"],[4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Confirm Changes","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled","click"],["status","warning",1,"tui-space_bottom-4"],[1,"tui-island__title"],[1,"tui-space_bottom-2"],[4,"ngIf","ngIfElse"],["tokenNotUsedTag",""],[1,"tui-island__paragraph"],["aria-label","Number of Tokens Used",1,"tui-space_top-4",3,"ngModel","max","min","ngModelOptions","ngModelChange"],["size","m","status","success","value","Tokens Used",4,"ngIf","ngIfElse"],["tokenPartialUseTag",""],["size","m","status","success","value","Tokens Used"],["size","m","status","warning","value","Tokens Partially Used"],["size","m","status","error","value","Not Used"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,ph,3,0,"ng-container",0),i.\u0275\u0275elementStart(1,"div",1)(2,"h2",2),i.\u0275\u0275text(3),i.\u0275\u0275pipe(4,"number"),i.\u0275\u0275pipe(5,"number"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(6,"form",3)(7,"div",4),i.\u0275\u0275template(8,Cf,15,11,"tui-island",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",6)(10,"button",7),i.\u0275\u0275listener("click",function(){return r.confirmChanges()}),i.\u0275\u0275text(11," Confirm Changes "),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275property("ngIf",null==r.user?null:r.user.is_teacher),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("error",r.invalid),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",i.\u0275\u0275pipeBind2(4,7,r.remainingTokens,"1.0-1"),"/",i.\u0275\u0275pipeBind2(5,10,r.courseReg.total_tokens_received,"1.0-1")," Tokens Available "),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.courseReg.token_uses),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.invalid))},directives:[L.O5,un.Ls,q.\u0275NgNoValidate,q.NgControlStatusGroup,q.NgForm,L.sg,La.h,zo.Gi,Ul.EA,Ul.aQ,q.NgControlStatus,q.NgModel,Ot.v0],pipes:[L.JJ],styles:[".tokens[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.tokens[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--tui-negative)}.token-use-islands[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20rem,1fr));grid-auto-flow:row dense;grid-gap:1rem}"]}),e})();var wf=f(76508),Po=f(78697);function Sf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-island",10),i.\u0275\u0275element(1,"div",11),i.\u0275\u0275elementStart(2,"figure",12),i.\u0275\u0275element(3,"tui-avatar",13,14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p",15),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h3",16),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"p",17),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275reference(4),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275styleProp("margin-top",r+"rem")("order",r%2*-r),i.\u0275\u0275advance(1),i.\u0275\u0275styleProp("background-color",o.bgColor),i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(s.getGetOrdinal(t.rank)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.token?t.token+" Tokens":"No Tokens"," ")}}function xh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Rank"),i.\u0275\u0275elementEnd())}function _h(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Name"),i.\u0275\u0275elementEnd())}function bh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"th",18),i.\u0275\u0275text(1,"Tokens"),i.\u0275\u0275elementEnd())}function Ch(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.getGetOrdinal(t.rank)," ")}}function wh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21)(1,"div",22),i.\u0275\u0275element(2,"tui-avatar",23),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("autoColor",!0)("rounded",!0)("text",t.name||"Anonymous User"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.name||"Anonymous User"," ")}}function Sh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"td",21),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.token||"No Tokens"," ")}}function so(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tr",19),i.\u0275\u0275template(1,Ch,2,1,"td",20),i.\u0275\u0275template(2,wh,4,4,"td",20),i.\u0275\u0275template(3,Sh,2,1,"td",20),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiCell","token"))}function Th(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275template(2,Sf,11,12,"tui-island",3),i.\u0275\u0275pipe(3,"tuiFilter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"table",4)(5,"thead",5)(6,"tr",6),i.\u0275\u0275template(7,xh,2,0,"th",7),i.\u0275\u0275template(8,_h,2,0,"th",7),i.\u0275\u0275template(9,bh,2,0,"th",7),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"tbody",8),i.\u0275\u0275pipe(11,"tuiFilter"),i.\u0275\u0275template(12,so,4,3,"tr",9),i.\u0275\u0275elementEnd()()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind3(3,7,t.leaderBoard,t.filterInTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("columns",t.displayedColumns),i.\u0275\u0275advance(3),i.\u0275\u0275property("tuiHead","rank"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","name"),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiHead","token"),i.\u0275\u0275advance(1),i.\u0275\u0275property("data",i.\u0275\u0275pipeBind3(11,11,t.leaderBoard,t.filterOutTopX,t.rankTopX)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiRowOf",t.leaderBoard)}}let Eh=(()=>{class e{constructor(){this.displayedColumns=["rank","name","token"],this.filterOutTopX=(t,r)=>t.rank>r,this.filterInTopX=(t,r)=>t.rank<=r}ngOnInit(){this.leaderBoard=this.getRankedLeaderboard(this.leaderBoard)}getRankedLeaderboard(t){return t.sort((o,s)=>s.token-o.token).map((o,s)=>({rank:s+1,name:o.name,token:o.token}))}getGetOrdinal(t){const r=["th","st","nd","rd"],o=t%100;return t+(r[(o-20)%10]||r[o]||r[0])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-leader-board"]],inputs:{leaderBoard:"leaderBoard",rankTopX:"rankTopX"},decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"top-x-islands","tui-space_bottom-8"],["class","top-x-island","textAlign","center",3,"marginTop","order",4,"ngFor","ngForOf"],["tuiTable","",1,"table",3,"columns"],["tuiThead",""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],["textAlign","center",1,"top-x-island"],[1,"top-x-background"],[1,"tui-island__figure"],["size","l",1,"top-x-avatar",3,"autoColor","rounded","text"],["avatar",""],[1,"tui-island__paragraph","tui-text_h3","tui-space_bottom-2"],[1,"tui-island__title"],[1,"tui-island__paragraph"],["tuiTh",""],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],[1,"table-avatar-with-name"],["size","s",1,"tui-space_right-2",3,"autoColor","rounded","text"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,Th,13,15,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.leaderBoard)},directives:[L.O5,L.sg,La.h,wf.JP,Po.c4,Po.Nx,Po.EE,Po.DZ,Po.Ws,Po.jY,Po.LU,Po.fu,Po.Bl,Po.Kt],pipes:[Fe.S],styles:[".top-x-islands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:1rem}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]{flex-wrap:wrap}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:20rem;min-width:5rem;flex:1;overflow:hidden}@media screen and (max-width: 767px){.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]{max-width:unset;min-width:unset;width:100%;flex:unset;margin-right:0;margin-top:2rem!important}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]:first-of-type{margin-top:0!important}}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-avatar[_ngcontent-%COMP%]{margin-top:-2.75rem;border:var(--tui-base-01) 2px solid}.top-x-islands[_ngcontent-%COMP%]   .top-x-island[_ngcontent-%COMP%]   .top-x-background[_ngcontent-%COMP%]{width:140%;height:4rem;margin-top:-1rem;margin-left:-1rem;margin-bottom:12px}.table[_ngcontent-%COMP%]{width:100%}.table-avatar-with-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),e})();function Ph(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function Tf(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",20)}function Ih(e,n){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1," Grade: TBA "),i.\u0275\u0275elementContainerEnd())}function Ah(e,n){if(1&e&&(i.\u0275\u0275text(0),i.\u0275\u0275pipe(1,"number")),2&e){const t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(1,1,t.total_event_grade,"1.0-1"),"% ")}}const Ef=function(e,n){return["/course",e,"event",n]};function Mh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Ef,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Gl(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}const Pf=function(e,n){return["/course",e,"new-event",n]};function Oh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Pf,r.course.id,t.id))}}function kh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",6)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,Ph,1,0,"tui-tag",11),i.\u0275\u0275template(14,Tf,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275template(17,Ih,2,0,"ng-container",14),i.\u0275\u0275template(18,Ah,2,4,"ng-template",null,15,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",16),i.\u0275\u0275template(21,Mh,3,5,"ng-container",14),i.\u0275\u0275template(22,Gl,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(24,Oh,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(19),s=i.\u0275\u0275reference(23),c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,10,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,13,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_not_available_yet)("ngIfElse",o),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==c.user?null:c.user.is_teacher))("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Lh(e,n){if(1&e&&i.\u0275\u0275template(0,kh,25,16,"div",5),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.upcomingEvents)}}function Rh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",19)}function Nh(e,n){1&e&&i.\u0275\u0275element(0,"tui-tag",26)}function Dh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"a",21),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(2,Ef,r.course.id,t.id)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",r.user.is_teacher?"View":"Complete"," ")}}function Fh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"a",22),i.\u0275\u0275text(1," Complete "),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("disabled",!0)}function Vh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",23),i.\u0275\u0275text(1," Edit "),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext().$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction2(1,Pf,r.course.id,t.id))}}function Bh(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",25)(1,"div",7),i.\u0275\u0275text(2," Challenge "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",9)(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275pipe(8,"date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div"),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"date"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(12,"div",10),i.\u0275\u0275template(13,Rh,1,0,"tui-tag",11),i.\u0275\u0275template(14,Nh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",13),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"div",16),i.\u0275\u0275template(20,Dh,3,5,"ng-container",14),i.\u0275\u0275template(21,Fh,2,1,"ng-template",null,17,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(23,Vh,2,4,"a",18),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(15),o=i.\u0275\u0275reference(22),s=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(t.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("From: ",i.\u0275\u0275pipeBind2(8,9,t.start_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Until: ",i.\u0275\u0275pipeBind2(11,12,t.end_date,"EEEE, MMM d, y, h:mm a"),""),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_open)("ngIfElse",r),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Grade: ",i.\u0275\u0275pipeBind2(18,15,t.total_event_grade,"1.0-1"),"% "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.is_allowed_to_open||(null==s.user?null:s.user.is_teacher))("ngIfElse",o),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.has_edit_permission)}}function Hh(e,n){if(1&e&&i.\u0275\u0275template(0,Bh,24,18,"div",24),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngForOf",t.pastEvents)}}let jh=(()=>{class e{constructor(t){this.authenticationService=t,this.currentDate=new Date}ngOnInit(){this.authenticationService.currentUser.subscribe(t=>this.user=t),this.upcomingEvents=this.events.filter(t=>t.is_open||t.is_not_available_yet).filter(t=>"CHALLENGE"==t.type),this.pastEvents=this.events.filter(t=>t.is_closed).filter(t=>"CHALLENGE"==t.type)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(se.$))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-challenge-snippet"]],inputs:{events:"events",course:"course"},decls:8,vars:2,consts:[[1,"challengePage"],[1,"accordionContainer",3,"closeOthers"],["open","true",1,"title",3,"disableHover"],["tuiAccordionItemContent",""],["open","true"],["class","challenge",4,"ngFor","ngForOf"],[1,"challenge"],[1,"challengeType"],[1,"name"],[1,"dates"],[1,"availability"],["size","m","status","success","value","Available",4,"ngIf","ngIfElse"],["challengeComingSoon",""],[1,"grade"],[4,"ngIf","ngIfElse"],["totalEventGrade",""],[1,"linkBtn"],["notAllowedOpen",""],["appearance","primary","aria-label","Edit","class","tui-form__button","size","s","tuiButton","",3,"routerLink",4,"ngIf"],["size","m","status","success","value","Available"],["size","m","status","error","value","Coming Soon"],["appearance","primary","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["appearance","primary","aria-label","Complete","href","","size","s","tuiButton","",1,"tui-form__button",3,"disabled"],["appearance","primary","aria-label","Edit","size","s","tuiButton","",1,"tui-form__button",3,"routerLink"],["class","tui-space_top-5 challenge",4,"ngFor","ngForOf"],[1,"tui-space_top-5","challenge"],["size","m","status","default","value","Closed"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"tui-accordion",1)(2,"tui-accordion-item",2),i.\u0275\u0275text(3," Upcoming Challenges "),i.\u0275\u0275template(4,Lh,1,1,"ng-template",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-accordion-item",4),i.\u0275\u0275text(6," Past Challenges "),i.\u0275\u0275template(7,Hh,1,1,"ng-template",3),i.\u0275\u0275elementEnd()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("closeOthers",!1),i.\u0275\u0275advance(1),i.\u0275\u0275property("disableHover",!0))},directives:[Ar.oc,Ar.Kc,Ar.dv,L.sg,L.O5,zo.Gi,Ot.v0,ne.yS],pipes:[L.uU,L.JJ],styles:['.challengePage[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordionContainer[_ngcontent-%COMP%]{align-self:center;width:90%}.challenge[_ngcontent-%COMP%]:not(:last-child){border-bottom:solid 1px var(--tui-base-03);margin:0;padding-bottom:20px}.challenge[_ngcontent-%COMP%]:not(:first-child){padding-top:20px}@media screen and (min-width: 1280px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 3fr 5fr 8rem 8rem 9rem;align-items:center;justify-items:center}}@media screen and (min-width: 768px) and (max-width: 1279px){.challenge[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-template-areas:"challengeType availability" "name grade" "dates linkBtn";align-items:start}}.challengeType[_ngcontent-%COMP%]{color:var(--tui-text-02)}.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{justify-self:start;padding-left:1rem}@media screen and (max-width: 767px){.challengeType[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .dates[_ngcontent-%COMP%], .availability[_ngcontent-%COMP%], .grade[_ngcontent-%COMP%]{margin-top:1rem}}.dates[_ngcontent-%COMP%]{display:flex;flex-direction:column}.linkBtn[_ngcontent-%COMP%]{justify-self:end;padding-left:1rem;padding-right:1rem;display:flex;gap:.3rem}@media screen and (min-width: 768px) and (max-width: 1279px){.challengeType[_ngcontent-%COMP%]{grid-area:challengeType}}@media screen and (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{grid-area:name}}@media screen and (min-width: 768px) and (max-width: 1279px){.dates[_ngcontent-%COMP%]{grid-area:dates}}@media screen and (min-width: 768px) and (max-width: 1279px){.availability[_ngcontent-%COMP%]{grid-area:availability;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.grade[_ngcontent-%COMP%]{grid-area:grade;justify-self:end}}@media screen and (min-width: 768px) and (max-width: 1279px){.linkBtn[_ngcontent-%COMP%]{grid-area:linkBtn;padding-right:0}}']}),e})();function zh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275text(1,"Concept Map"),i.\u0275\u0275elementEnd())}function Uh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275text(1,"Questions"),i.\u0275\u0275elementEnd())}function Gh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",15),i.\u0275\u0275text(1,"Events"),i.\u0275\u0275elementEnd())}function Wh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",16),i.\u0275\u0275text(1,"Token Use"),i.\u0275\u0275elementEnd())}function $h(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275text(1,"Leaderboard"),i.\u0275\u0275elementEnd())}function Yh(e,n){1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1,"Challenges"),i.\u0275\u0275elementEnd())}function Xh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-concept-map",19),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("currCourse",t.course)}}function Kh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-question-snippet",20),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("questions",null==t.course?null:t.course.question_set)("uqjs",null==t.course?null:t.course.uqjs)}}function Wl(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-events-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function If(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-token-use-snippet",22),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("courseReg",null==t.course?null:t.course.course_reg)}}function Jh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-leader-board",23),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("leaderBoard",null==t.course?null:t.course.leader_board)("rankTopX",3)}}function Qh(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"app-course-challenge-snippet",21),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("course",t.course)("events",null==t.course?null:t.course.events)}}function Zh(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",24)}let qh=(()=>{class e{constructor(t,r,o){this.authenticationService=t,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(s=>this.user=s)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(t=>{this.course=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(se.$),i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(ne.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course"]],decls:21,vars:13,consts:[[1,"tui-container","tui-container_fullwidth"],[1,"tui-text_h3","tui-space_top-10","tui-space_bottom-2"],[1,"tui-text_h6"],[1,"tui-space_bottom-4",3,"moreContent"],["tabsComponent",""],["aria-label","Concept Map","tuiTab","",4,"tuiTab"],["aria-label","Questions","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Events","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Token Use","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Leaderboard","tuiTab","","disabled","",4,"tuiTab"],["aria-label","Challenges","tuiTab","","disabled","",4,"tuiTab"],[4,"ngIf"],["more",""],["aria-label","Concept Map","tuiTab",""],["aria-label","Questions","tuiTab","","disabled",""],["aria-label","Events","tuiTab","","disabled",""],["aria-label","Token Use","tuiTab","","disabled",""],["aria-label","Leaderboard","tuiTab","","disabled",""],["aria-label","Challenges","tuiTab","","disabled",""],[3,"currCourse"],[3,"questions","uqjs"],[3,"course","events"],[3,"courseReg"],[3,"leaderBoard","rankTopX"],["src","tuiIconMoreHorLarge"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"section",0)(1,"h1",1),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h6",2),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tui-tabs-with-more",3,4),i.\u0275\u0275template(7,zh,2,0,"button",5),i.\u0275\u0275template(8,Uh,2,0,"button",6),i.\u0275\u0275template(9,Gh,2,0,"button",7),i.\u0275\u0275template(10,Wh,2,0,"button",8),i.\u0275\u0275template(11,$h,2,0,"button",9),i.\u0275\u0275template(12,Yh,2,0,"button",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(13,Xh,2,1,"ng-container",11),i.\u0275\u0275template(14,Kh,2,2,"ng-container",11),i.\u0275\u0275template(15,Wl,2,2,"ng-container",11),i.\u0275\u0275template(16,If,2,1,"ng-container",11),i.\u0275\u0275template(17,Jh,2,2,"ng-container",11),i.\u0275\u0275template(18,Qh,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(19,Zh,1,0,"ng-template",null,12,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(6),s=i.\u0275\u0275reference(20);i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.name," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",null==r.course?null:r.course.description," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.course),i.\u0275\u0275property("moreContent",s),i.\u0275\u0275advance(8),i.\u0275\u0275property("ngIf",0===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",2===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",3===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",4===o.activeItemIndex),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",5===o.activeItemIndex)}},directives:[sn.WN,sn.tl,sn.yu,L.O5,of,ff,hh,yh,Eh,jh,Mi.P],styles:[""]}),e})();var lt=f(68858);let $l=(()=>{class e{static createForm(){return(new q.FormBuilder).group({name:new q.FormControl(null,[q.Validators.required]),type:new q.FormControl("",[q.Validators.required]),countForTokens:new q.FormControl(!1,[q.Validators.required]),startEndDatePicker:new q.FormControl(new lt.VR(lt.TU.currentLocal(),lt.TU.currentLocal().append({day:7})),[q.Validators.required]),startTimePicker:new q.FormControl(lt.qD.currentLocal(),[q.Validators.required]),endTimePicker:new q.FormControl(lt.qD.currentLocal(),[q.Validators.required])},{validator:e.dateValidator})}static createFormWithData(t){return(new q.FormBuilder).group({name:new q.FormControl(t.name,[q.Validators.required]),type:new q.FormControl(t.type,[q.Validators.required]),countForTokens:new q.FormControl(t.count_for_tokens,[q.Validators.required]),startEndDatePicker:new q.FormControl(new lt.VR(lt.TU.fromLocalNativeDate(new Date(t.start_date)),lt.TU.fromLocalNativeDate(new Date(t.end_date))),[q.Validators.required]),startTimePicker:new q.FormControl(lt.qD.fromLocalNativeDate(new Date(t.start_date)),[q.Validators.required]),endTimePicker:new q.FormControl(lt.qD.fromLocalNativeDate(new Date(t.end_date)),[q.Validators.required])},{validator:e.dateValidator})}static formatFormData(t,r,o){return{id:o,name:t.get("name").value,type:t.get("type").value,count_for_tokens:t.get("countForTokens").value,start_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.from,t.get("startTimePicker").value),end_date:this.dateAndTimeToLocal(t.get("startEndDatePicker").value.to,t.get("endTimePicker").value),course:r,is_not_available_yet:!1,is_closed:!1}}static dateAndTimeToLocal(t,r){return new Date(t.toLocalNativeDate().getTime()+r.toAbsoluteMilliseconds())}}return e.dateValidator=n=>{const t=n.get("startEndDatePicker").value,r=n.get("startTimePicker").value,o=n.get("endTimePicker").value;return!t.from||!t.to||t.isSingleDay&&o.toAbsoluteMilliseconds()<=r.toAbsoluteMilliseconds()?{forbiddenDateRange:!0}:null},e})();var Wu=f(86097),Yl=f(13774),Re=f(52014),Na=f(35302),Oi=f(35137),ni=f(28634),Da=f(14335),ou=f(35640),ft=f(73442),Xl=f(295),Fa=f(40022),Go=f(39193),Af=f(52164),Kl=f(70589),uo=f(45261),Va=f(15411),ds=f(83618),ir=f(72997),ks=f(85113);function Mf(e,{value:n,min:t,max:r,dateFormat:o,dateSeparator:s}){return n&&n.toString(o,s)===e?e:lt.TU.normalizeParse(e,o).dayLimit(t,r).toString(o,s)}function ep(e){return n=>n.length!==lt.ek?{value:n}:{value:Mf(n,e)}}function au(e,n){return lt.TU.normalizeParse(e.slice(0,lt.ek),n.dateFormat).dayLimit(n.min,n.max)}function Of(e,n){const{dateFormat:t,dateSeparator:r}=n;switch(e.length){case lt.ek:return au(e,n).toString(t,r);case lt.ek+lt.mH.length:return au(e,n).toString(t,r)+lt.mH;case lt.FZ:return n.value&&n.value.toString(t,r)===e?e:lt.VR.sort(au(e.slice(0,lt.ek),n),au(e.slice(lt.ek+lt.mH.length),n)).toString(t,r);default:return e}}function tp(e){return n=>({value:Of(n,e)})}function kf(e="HH:MM",n={}){const t=["HH","MM","SS","MS"],r=Object.assign(Object.assign({},ds.bM),n);return o=>{const s=[],c=o.split("");return t.forEach(m=>{const w=e.indexOf(m),I=parseInt(String(r[m]).substr(0,1),10);parseInt(c[w],10)>I&&(c[w+1]=c[w],c[w]="0",s.push(w))}),!t.some(m=>parseInt(o.substr(e.indexOf(m),2),10)>r[m])&&{value:c.join(""),indexesOfPipedChars:s}}}const $u=Array(2).fill(Go.hW),su=Array(4).fill(Go.hW);function Lf(e,n){return"YMD"===(ks.z.assert(1===n.length,"Separator should consist of only 1 symbol"),e)?[...su,n,...$u,n,...$u]:[...$u,n,...$u,n,...su]}function np(e,n){ks.z.assert(1===n.length,"Separator should consist of only 1 symbol");const t=Lf(e,n);return[...t,ni.f$,ni.F,ni.f$,...t]}function Yu(e,n){const{length:t}=String(e),r=Array(t).fill(Go.hW);return n&&r.unshift(n),r}function rp(e,n={}){const{HH:t,MM:r,SS:o,MS:s}=Object.assign(Object.assign({},ds.bM),n);return[...Yu(t),...Yu(r,":"),...e.includes("HH:MM:SS")?Yu(o,":"):[],..."HH:MM:SS.MSS"===e?Yu(s,"."):[]]}var da=f(35628),uu=f(24850),Xu=f(7625),Jl=f(6083),Ql=f(34530),vi=f(33186),Wo=f(93030),ha=f(26171),Jt=f(24710),hs=f(53256),lu=f(2141),Ls=f(66695);let Nf=(()=>{let e=class{constructor(t){this.tuiColor="",this.tuiBackground="",t.addStyle("[data-tui-background='primary'] {\n    background-color: var(--tui-primary);\n}\n\n[data-tui-background='secondary'] {\n    background-color: var(--tui-info-fill);\n}\n\n[data-tui-background='success'] {\n    background-color: var(--tui-success-fill);\n}\n\n[data-tui-background='error'] {\n    background-color: var(--tui-error-fill);\n}\n\n[data-tui-background='support-mustard'],\n[data-tui-background='support-01'] {\n    background-color: var(--tui-support-01);\n}\n\n[data-tui-background='support-texas'],\n[data-tui-background='support-02'] {\n    background-color: var(--tui-support-02);\n}\n\n[data-tui-background='support-tan'],\n[data-tui-background='support-03'] {\n    background-color: var(--tui-support-03);\n}\n\n[data-tui-background='support-salmon'],\n[data-tui-background='support-04'] {\n    background-color: var(--tui-support-04);\n}\n\n[data-tui-background='support-sienna'],\n[data-tui-background='support-05'] {\n    background-color: var(--tui-support-05);\n}\n\n[data-tui-background='support-bittersweet'],\n[data-tui-background='support-06'] {\n    background-color: var(--tui-support-06);\n}\n\n[data-tui-background='support-pinkie'],\n[data-tui-background='support-07'] {\n    background-color: var(--tui-support-07);\n}\n\n[data-tui-background='support-charm'],\n[data-tui-background='support-08'] {\n    background-color: var(--tui-support-08);\n}\n\n[data-tui-background='support-amethyst'],\n[data-tui-background='support-09'] {\n    background-color: var(--tui-support-09);\n}\n\n[data-tui-background='support-helio'],\n[data-tui-background='support-10'] {\n    background-color: var(--tui-support-10);\n}\n\n[data-tui-background='support-lilac'],\n[data-tui-background='support-11'] {\n    background-color: var(--tui-support-11);\n}\n\n[data-tui-background='support-malibu'],\n[data-tui-background='support-12'] {\n    background-color: var(--tui-support-12);\n}\n\n[data-tui-background='support-havelock'],\n[data-tui-background='support-13'] {\n    background-color: var(--tui-support-13);\n}\n\n[data-tui-background='support-picton'],\n[data-tui-background='support-14'] {\n    background-color: var(--tui-support-14);\n}\n\n[data-tui-background='support-mint'],\n[data-tui-background='support-15'] {\n    background-color: var(--tui-support-15);\n}\n\n[data-tui-background='support-fountain'],\n[data-tui-background='support-16'] {\n    background-color: var(--tui-support-16);\n}\n\n[data-tui-background='support-puertorico'],\n[data-tui-background='support-17'] {\n    background-color: var(--tui-support-17);\n}\n\n[data-tui-background='support-bay'],\n[data-tui-background='support-18'] {\n    background-color: var(--tui-support-18);\n}\n\n[data-tui-background='support-forest'],\n[data-tui-background='support-19'] {\n    background-color: var(--tui-support-19);\n}\n\n[data-tui-background='support-york'],\n[data-tui-background='support-20'] {\n    background-color: var(--tui-support-20);\n}\n\n[data-tui-background='support-feijoa'],\n[data-tui-background='support-21'] {\n    background-color: var(--tui-support-21);\n}\n\n[data-tui-background='base-01'] {\n    background-color: var(--tui-base-01);\n}\n\n[data-tui-background='base-02'] {\n    background-color: var(--tui-base-02);\n}\n\n[data-tui-background='base-03'] {\n    background-color: var(--tui-base-03);\n}\n\n[data-tui-background='base-04'] {\n    background-color: var(--tui-base-04);\n}\n\n[data-tui-background='base-05'] {\n    background-color: var(--tui-base-05);\n}\n\n[data-tui-background='base-06'] {\n    background-color: var(--tui-base-06);\n}\n\n[data-tui-background='base-07'] {\n    background-color: var(--tui-base-07);\n}\n\n[data-tui-background='base-08'] {\n    background-color: var(--tui-base-08);\n}\n\n[data-tui-background='base-09'] {\n    background-color: var(--tui-base-09);\n}\n\n[data-tui-color='primary'] {\n    color: var(--tui-primary);\n}\n\n[data-tui-color='secondary'] {\n    color: var(--tui-info-fill);\n}\n\n[data-tui-color='success'] {\n    color: var(--tui-success-fill);\n}\n\n[data-tui-color='error'] {\n    color: var(--tui-error-fill);\n}\n\n[data-tui-color='support-mustard'],\n[data-tui-color='support-01'] {\n    color: var(--tui-support-01);\n}\n\n[data-tui-color='support-texas'],\n[data-tui-color='support-02'] {\n    color: var(--tui-support-02);\n}\n\n[data-tui-color='support-tan'],\n[data-tui-color='support-03'] {\n    color: var(--tui-support-03);\n}\n\n[data-tui-color='support-salmon'],\n[data-tui-color='support-04'] {\n    color: var(--tui-support-04);\n}\n\n[data-tui-color='support-sienna'],\n[data-tui-color='support-05'] {\n    color: var(--tui-support-05);\n}\n\n[data-tui-color='support-bittersweet'],\n[data-tui-color='support-06'] {\n    color: var(--tui-support-06);\n}\n\n[data-tui-color='support-pinkie'],\n[data-tui-color='support-07'] {\n    color: var(--tui-support-07);\n}\n\n[data-tui-color='support-charm'],\n[data-tui-color='support-08'] {\n    color: var(--tui-support-08);\n}\n\n[data-tui-color='support-amethyst'],\n[data-tui-color='support-09'] {\n    color: var(--tui-support-09);\n}\n\n[data-tui-color='support-helio'],\n[data-tui-color='support-10'] {\n    color: var(--tui-support-10);\n}\n\n[data-tui-color='support-lilac'],\n[data-tui-color='support-11'] {\n    color: var(--tui-support-11);\n}\n\n[data-tui-color='support-malibu'],\n[data-tui-color='support-12'] {\n    color: var(--tui-support-12);\n}\n\n[data-tui-color='support-havelock'],\n[data-tui-color='support-13'] {\n    color: var(--tui-support-13);\n}\n\n[data-tui-color='support-picton'],\n[data-tui-color='support-14'] {\n    color: var(--tui-support-14);\n}\n\n[data-tui-color='support-mint'],\n[data-tui-color='support-15'] {\n    color: var(--tui-support-15);\n}\n\n[data-tui-color='support-fountain'],\n[data-tui-color='support-16'] {\n    color: var(--tui-support-16);\n}\n\n[data-tui-color='support-puertorico'],\n[data-tui-color='support-17'] {\n    color: var(--tui-support-17);\n}\n\n[data-tui-color='support-bay'],\n[data-tui-color='support-18'] {\n    color: var(--tui-support-18);\n}\n\n[data-tui-color='support-forest'],\n[data-tui-color='support-19'] {\n    color: var(--tui-support-19);\n}\n\n[data-tui-color='support-york'],\n[data-tui-color='support-20'] {\n    color: var(--tui-support-20);\n}\n\n[data-tui-color='support-feijoa'],\n[data-tui-color='support-21'] {\n    color: var(--tui-support-21);\n}\n\n[data-tui-color='base-01'] {\n    color: var(--tui-base-01);\n}\n\n[data-tui-color='base-02'] {\n    color: var(--tui-base-02);\n}\n\n[data-tui-color='base-03'] {\n    color: var(--tui-base-03);\n}\n\n[data-tui-color='base-04'] {\n    color: var(--tui-base-04);\n}\n\n[data-tui-color='base-05'] {\n    color: var(--tui-base-05);\n}\n\n[data-tui-color='base-06'] {\n    color: var(--tui-base-06);\n}\n\n[data-tui-color='base-07'] {\n    color: var(--tui-base-07);\n}\n\n[data-tui-color='base-08'] {\n    color: var(--tui-base-08);\n}\n\n[data-tui-color='base-09'] {\n    color: var(--tui-base-09);\n}\n","TuiColorDirective")}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(vi.gH))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","tuiColor",""],["","tuiBackground",""]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275attribute("data-tui-color",r.tuiColor)("data-tui-background",r.tuiBackground)},inputs:{tuiColor:"tuiColor",tuiBackground:"tuiBackground"}}),(0,Jt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-color"),(0,ft.TH)()],e.prototype,"tuiColor",void 0),(0,Jt.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-tui-background"),(0,ft.TH)()],e.prototype,"tuiBackground",void 0),e=(0,Jt.gn)([(0,Jt.fM)(0,(0,i.Inject)(vi.gH))],e),e})(),Df=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();var Ku=f(46579);const op=({month:e,rowIndex:n,colIndex:t,firstDayOfWeek:r})=>{ks.z.assert(Number.isInteger(n)),ks.z.assert((0,Ku.Z2)(n,0,6)),ks.z.assert(Number.isInteger(t)),ks.z.assert((0,Ku.Z2)(t,0,lt.NA));let o=n*lt.NA+t-((e,n)=>{const t=new Date(e.year,e.month,1).getDay();return t>=n?t-n:lt.NA-(n-t)})(e,r)+1;return o>e.daysCount&&(o-=e.daysCount,e=e.append({month:1})),o<=0&&(o=(e=e.append({month:-1})).daysCount+o),new lt.TU(e.year,e.month,o)};let Ju=(()=>{let e=class{constructor(t){this.firstDayOfWeek=t,this.currentMonth=null,this.currentSheet=[]}transform(t,r=!1){if(this.currentMonth&&this.currentMonth.monthSame(t))return this.currentSheet;const o=[];for(let s=0;s<6;s++){const c=[];for(let p=0;p<lt.NA;p++){const m=op({month:t,rowIndex:s,colIndex:p,firstDayOfWeek:this.firstDayOfWeek}),I=(_,U=t)=>_.year>U.year||_.month>U.month;if(!((_,U=t)=>_.year<U.year||_.month<U.month)(m)||r){if(I(m)&&!r)break;c.push(m)}}o.push(c)}return this.currentSheet=o.filter(s=>s.length),this.currentMonth=t,this.currentSheet}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uo.Sy,16))},e.\u0275pipe=i.\u0275\u0275definePipe({name:"tuiCalendarSheet",type:e,pure:!0}),e=(0,Jt.gn)([(0,Jt.fM)(0,(0,i.Inject)(uo.Sy))],e),e})(),Qu=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({}),e})();function sp(e,n){1&e&&i.\u0275\u0275element(0,"div",3),2&e&&i.\u0275\u0275property("innerText",n.$implicit)}function up(e,n){if(1&e&&i.\u0275\u0275element(0,"div",12),2&e){const t=i.\u0275\u0275nextContext().ngIf;i.\u0275\u0275property("tuiBackground",t[1])}}function Zl(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275element(1,"div",12),i.\u0275\u0275template(2,up,1,1,"div",13),i.\u0275\u0275elementEnd()),2&e){const t=n.ngIf;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiBackground",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.length>1)}}function Ff(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275listener("tuiHoveredChange",function(o){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemHovered(o&&s)})("tuiPressedChange",function(o){i.\u0275\u0275restoreView(t);const s=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemPressed(o&&s)})("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext().tuiLet;return i.\u0275\u0275nextContext(4).onItemClick(o)}),i.\u0275\u0275elementStart(1,"div",9),i.\u0275\u0275text(2),i.\u0275\u0275template(3,Zl,3,2,"div",10),i.\u0275\u0275pipe(4,"tuiMapper"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext().tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275classProp("t-cell_weekend",t.isWeekend)("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("t-item_unavailable",r.itemIsUnavailable(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.day," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind4(4,12,t,r.toMarkers,r.itemIsToday(t),!!r.getItemRange(t)))}}function lp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ff,5,17,"div",7),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!r.itemIsUnavailable(t)||r.showAdjacent)}}function cp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,lp,2,1,"ng-container",2),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o[r][t])}}function fp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,cp,2,1,"ng-container",6),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",r[t].length)}}function dp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,fp,2,1,"div",4),i.\u0275\u0275elementEnd()),2&e){const t=n.tuiLet;i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",t.length)}}let hp=(()=>{let e=class{constructor(t){this.weekDays$=t,this.pressedItem=null,this.today=lt.TU.currentLocal(),this.month=lt.ql.currentLocal(),this.disabledItemHandler=ni.Iy,this.markerHandler=Go.zE,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new i.EventEmitter,this.dayClick=new i.EventEmitter,this.toMarkers=(r,o,s)=>{if(o||s)return null;const c=this.markerHandler(r);return 0===c.length?null:c}}get isSingle(){return null!==this.value&&(this.value instanceof lt.TU||this.value.isSingleDay)}getItemState(t){const{disabledItemHandler:r,pressedItem:o,hoveredItem:s}=this;return r(t)?"disabled":o&&o.daySame(t)?"pressed":s&&s.daySame(t)?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return r?r instanceof lt.TU?r.daySame(t)?"single":null:r.from.daySame(t)&&!r.isSingleDay||o&&o.dayAfter(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayBefore(r.from)&&r.isSingleDay?"start":r.to.daySame(t)&&!r.isSingleDay||o&&o.dayBefore(r.from)&&r.from.daySame(t)&&r.isSingleDay||o&&o.daySame(t)&&o.dayAfter(r.from)&&r.isSingleDay?"end":r.isSingleDay&&r.from.daySame(t)?"single":null:null}itemIsToday(t){return this.today.daySame(t)}itemIsUnavailable(t){return!this.month.monthSame(t)}itemIsInterval(t){const{value:r,hoveredItem:o}=this;if(null===r||r instanceof lt.TU)return!1;if(!r.isSingleDay)return r.from.daySameOrBefore(t)&&r.to.dayAfter(t);if(null===o)return!1;const s=lt.VR.sort(r.from,o);return s.from.daySameOrBefore(t)&&s.to.dayAfter(t)}onItemHovered(t){this.updateHoveredItem(t||null)}onItemPressed(t){this.pressedItem=t||null}onItemClick(t){this.dayClick.emit(t)}updateHoveredItem(t){(0,Da.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uo.lQ))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},decls:5,vars:7,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"innerText",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"innerText"],["automation-id","tui-primitive-calendar__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-calendar__cell","class","t-cell",3,"t-cell_weekend","t-cell_today","t-cell_interval","tuiHoveredChange","tuiPressedChange","click",4,"ngIf"],["automation-id","tui-primitive-calendar__cell",1,"t-cell",3,"tuiHoveredChange","tuiPressedChange","click"],["automation-id","tui-primitive-calendar__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot",3,"tuiBackground"],["class","t-dot",3,"tuiBackground",4,"ngIf"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,sp,1,1,"div",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,dp,2,1,"div",2),i.\u0275\u0275pipe(4,"tuiCalendarSheet")),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(2,2,r.weekDays$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind2(4,4,r.month,!0)))},directives:[L.sg,Fa.Ls,hs.Xj,L.O5,lu.c,Ls.n,Nf],pipes:[L.Ov,Ju,Wo.c],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-2.25rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-cell_weekend[_ngcontent-%COMP%]{color:var(--tui-negative)}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}"],changeDetection:0}),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"month",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"markerHandler",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"value",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"hoveredItem",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"showAdjacent",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Jt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e=(0,Jt.gn)([(0,Jt.fM)(0,(0,i.Inject)(uo.lQ))],e),e})(),pp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Fa.WD,Wo.I,hs.Ih,lu.V,Ls.f,Df,Qu]]}),e})();var Vf=f(43360);function gp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275listener("tuiHoveredChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemHovered(o,c)})("tuiPressedChange",function(o){const c=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemPressed(o,c)})("click",function(){const s=i.\u0275\u0275restoreView(t).tuiLet;return i.\u0275\u0275nextContext(3).onItemClick(s)}),i.\u0275\u0275elementStart(1,"div",5),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(3);i.\u0275\u0275classProp("t-cell_today",r.itemIsToday(t))("t-cell_interval",r.itemIsInterval(t)),i.\u0275\u0275property("tuiScrollIntoView",r.scrollItemIntoView(t)),i.\u0275\u0275attribute("data-range",r.getItemRange(t))("data-state",r.getItemState(t)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t)}}function vp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,gp,3,8,"div",3),i.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",o.getItem(r,t))}}function mp(e,n){1&e&&(i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275template(1,vp,2,1,"ng-container",2),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiRepeatTimesOf",4))}let Io=(()=>{let e=class{constructor(){this.hoveredItem=null,this.pressedItem=null,this.currentYear=lt.ql.currentLocal().year,this.value=null,this.initialItem=lt.ql.currentLocal(),this.min=lt.K1,this.max=lt.Oy,this.disabledItemHandler=ni.Iy,this.yearClick=new i.EventEmitter}get isSingle(){const{value:t}=this;return!!t&&this.isRange(t)&&t.from.yearSame(t.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/4)}get calculatedMin(){const t=this.initialItem.year-100;return this.min.year>t?this.min.year:t}get calculatedMax(){const t=this.initialItem.year+100;return this.max.year<t?this.max.year+1:t}isRange(t){return t instanceof lt.dt}scrollItemIntoView(t){return this.initialItem.year===t}getItem(t,r){return 4*t+r+this.calculatedMin}getItemState(t){const{disabledItemHandler:r,max:o,pressedItem:s,hoveredItem:c}=this;return o.year<t||r!==ni.Iy&&r(t)?"disabled":s===t?"pressed":c===t?"hovered":null}getItemRange(t){const{value:r,hoveredItem:o}=this;return null===r?null:r instanceof lt.F4?r.year===t?"single":null:r.from.year===t&&!r.from.yearSame(r.to)||null!==o&&o>r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o<r.from.year&&r.from.yearSame(r.to)?"start":r.to.year===t&&!r.from.yearSame(r.to)||null!==o&&o<r.from.year&&r.from.year===t&&r.from.yearSame(r.to)||null!==o&&o===t&&o>r.from.year&&r.from.yearSame(r.to)?"end":r.from.yearSame(r.to)&&r.from.year===t?"single":null}itemIsToday(t){return this.currentYear===t}itemIsInterval(t){const{value:r,hoveredItem:o}=this;return!(null===r||!this.isRange(r))&&(r.from.yearSame(r.to)?null!==o&&r.from.year!==o&&(0,Ku.Z2)(t,Math.min(r.from.year,o),Math.max(r.from.year,o)):r.from.year<=t&&r.to.year>t)}onItemHovered(t,r){this.updateHoveredItem(t,r)}onItemPressed(t,r){this.updatePressedItem(t,r)}onItemClick(t){this.yearClick.emit(new lt.F4(t))}updateHoveredItem(t,r){this.hoveredItem=t?r:null}updatePressedItem(t,r){this.pressedItem=t?r:null}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-picker"]],hostVars:2,hostBindings:function(t,r){2&t&&i.\u0275\u0275classProp("_single",r.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},decls:1,vars:1,consts:[["automation-id","tui-primitive-year-picker__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-primitive-year-picker__cell","class","t-cell",3,"t-cell_today","t-cell_interval","tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click",4,"tuiLet"],["automation-id","tui-primitive-year-picker__cell",1,"t-cell",3,"tuiScrollIntoView","tuiHoveredChange","tuiPressedChange","click"],[1,"t-item"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,mp,2,1,"div",0),2&t&&i.\u0275\u0275property("tuiRepeatTimesOf",r.rows)},directives:[hs.Xj,Fa.Ls,Vf.M,lu.c,Ls.n],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"],changeDetection:0}),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"value",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"initialItem",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),(0,Jt.gn)([(0,i.HostBinding)("class._single")],e.prototype,"isSingle",null),e})(),yp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[lu.V,Ls.f,hs.Ih,Fa.WD,Vf.e]]}),e})();var ql=f(61279),$o=f(33703),tn=f(89627),jf=f(37940),bi=f(3054);const Mr=["wrapper"];function xp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1,2),i.\u0275\u0275listener("tuiFocusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)})("tuiFocusVisibleChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocusVisible(o)})("keydown.arrowLeft",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()})("keydown.arrowRight",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementStart(2,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onLeftClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",4),i.\u0275\u0275projection(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRightClick()}),i.\u0275\u0275elementEnd()()}if(2&e){const t=n.ngIf,r=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",r.computedFocusable),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("arrow_hidden",r.leftComputedDisabled),i.\u0275\u0275property("title",t[0])("focusable",!1),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("arrow_hidden",r.rightComputedDisabled),i.\u0275\u0275property("title",t[1])("focusable",!1)}}const Ba=["*"];let _p=(()=>{let e=class extends Na.Xn{constructor(t){super(),this.spinTexts$=t,this.disabled=!1,this.mode="flat",this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new i.EventEmitter,this.rightClick=new i.EventEmitter}get focused(){return!!this.wrapper&&(0,ou.zV)(this.wrapper.nativeElement)}get leftComputedDisabled(){return this.computedDisabled||this.leftDisabled}get rightComputedDisabled(){return this.computedDisabled||this.rightDisabled}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(uo.U4))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-spin-button"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(Mr,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.wrapper=o.first)}},inputs:{disabled:"disabled",mode:"mode",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},features:[i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Ba,decls:2,vars:3,consts:[["tuiPreventDefault","mousedown","class","wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight",4,"ngIf"],["tuiPreventDefault","mousedown",1,"wrapper",3,"tuiFocusable","tuiFocusedChange","tuiFocusVisibleChange","keydown.arrowLeft","keydown.arrowRight"],["wrapper",""],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__left","icon","tuiIconChevronLeftLarge",1,"arrow",3,"title","focusable","click"],[1,"content"],["tuiIconButton","","type","button","size","xs","appearance","","automation-id","tui-primitive-spin-button__right","icon","tuiIconChevronRightLarge",1,"arrow",3,"title","focusable","click"]],template:function(t,r){1&t&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,xp,6,9,"div",0),i.\u0275\u0275pipe(1,"async")),2&t&&i.\u0275\u0275property("ngIf",i.\u0275\u0275pipeBind1(1,1,r.spinTexts$))},directives:[L.O5,ha.A,$o.t,bi.U,jf.q,Ot.v0],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;font:var(--tui-font-text-l);text-align:center;font-weight:700}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;outline:0}.arrow[_ngcontent-%COMP%]{margin:0 .25rem}.arrow_hidden[_ngcontent-%COMP%]{visibility:hidden}.content[_ngcontent-%COMP%]{padding:0 .5rem}._focus-visible[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 1px var(--tui-focus)}"],changeDetection:0}),(0,Jt.gn)([(0,i.ViewChild)("wrapper")],e.prototype,"wrapper",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabled",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"mode",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"leftDisabled",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"rightDisabled",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"leftClick",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"rightClick",void 0),e=(0,Jt.gn)([(0,Jt.fM)(0,(0,i.Inject)(uo.U4))],e),e})(),bp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,jf.c,bi.F,$o.u,ha.Z,Ot.fN]]}),e})();var zf=f(5767);function Cp(e,n){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275text(1),i.\u0275\u0275elementContainerEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}function wp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onYearClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("tuiFocusable",!1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.value.formattedYear," ")}}let ec=(()=>{let e=class{constructor(){this.value=lt.ql.currentLocal(),this.min=lt.K1,this.max=lt.Oy,this.valueChange=new i.EventEmitter,this.yearClick=new i.EventEmitter}get prevMonthDisabled(){return this.value.monthSameOrBefore(this.min)}get nextMonthDisabled(){return this.value.monthSameOrAfter(this.max)}get oneYear(){return this.min.year===this.max.year}onYearClick(){this.yearClick.next(this.value)}onPrevMonthClick(){this.appendValueWithLimit({month:-1})}onNextMonthClick(){this.appendValueWithLimit({month:1})}appendValueWithLimit(t){const r=this.value.append(t);this.min.monthSameOrAfter(r)?this.updateValue(this.min):this.max.monthSameOrBefore(r)?this.updateValue(this.max):this.updateValue(r)}updateValue(t){this.value.monthSame(t)||(this.value=t,this.valueChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-year-month-pagination"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},decls:7,vars:10,consts:[[3,"focusable","leftDisabled","rightDisabled","leftClick","rightClick"],[4,"ngIf","ngIfElse"],["button",""],["automation-id","tui-primitive-year-month-pagination__year-button","tuiLink","","type","button",3,"tuiFocusable","click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-primitive-spin-button",0),i.\u0275\u0275listener("leftClick",function(){return r.onPrevMonthClick()})("rightClick",function(){return r.onNextMonthClick()}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275pipe(3,"tuiMonth"),i.\u0275\u0275template(4,Cp,2,1,"ng-container",1),i.\u0275\u0275template(5,wp,2,2,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(6);i.\u0275\u0275property("focusable",!1)("leftDisabled",r.prevMonthDisabled)("rightDisabled",r.nextMonthDisabled),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,6,i.\u0275\u0275pipeBind1(3,8,r.value))," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.oneYear)("ngIfElse",o)}},directives:[_p,L.O5,tn.V,$o.t],pipes:[L.Ov,zf.$],styles:["[_nghost-%COMP%]{display:block}"]}),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"value",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"yearClick",void 0),e})(),Sp=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,$o.u,bp,tn.j,zf.g]]}),e})();function pa(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-scrollbar",2)(1,"tui-primitive-year-picker",3),i.\u0275\u0275listener("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPickerYearClick(o)}),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("min",t.min)("max",t.max)("initialItem",t.year)("value",t.value)}}function Uf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-year-month-pagination",4),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationValueChange(o)})("yearClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPaginationYearClick(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(1,"tui-primitive-calendar",5),i.\u0275\u0275listener("hoveredItemChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHoveredItemChange(o)})("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.computedMinViewedMonth)("max",t.computedMaxViewedMonth)("value",t.month),i.\u0275\u0275advance(1),i.\u0275\u0275property("showAdjacent",t.showAdjacent)("value",t.value)("month",t.month)("disabledItemHandler",i.\u0275\u0275pipeBind4(2,9,t.disabledItemHandler,t.disabledItemHandlerMapper,t.min,t.max))("markerHandler",t.markerHandler)("hoveredItem",t.hoveredItem)}}let Rs=(()=>{let e=class{constructor(){this.month=lt.ql.currentLocal(),this.value=null,this.disabledItemHandler=ni.Iy,this.min=lt.K1,this.max=lt.Oy,this.minViewedMonth=lt.K1,this.maxViewedMonth=lt.Oy,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=Go.zE,this.dayClick=new i.EventEmitter,this.monthChange=new i.EventEmitter,this.hoveredItemChange=new i.EventEmitter,this.year=null,this.disabledItemHandlerMapper=(t,r,o)=>s=>s.dayBefore(r)||s.dayAfter(o)||t(s)}get computedMinViewedMonth(){return this.minViewedMonth.monthSameOrAfter(this.min)?this.minViewedMonth:this.min}get computedMaxViewedMonth(){return this.maxViewedMonth.monthSameOrBefore(this.max)?this.maxViewedMonth:this.max}onPaginationYearClick(t){this.year=t}onPickerYearClick({year:t}){this.year=null,this.updateViewedMonth(new lt.ql(t,this.month.month))}onPaginationValueChange(t){this.updateViewedMonth(t)}onDayClick(t){this.dayClick.emit(t)}onHoveredItemChange(t){this.updateHoveredDay(t)}updateViewedMonth(t){this.month.monthSame(t)||(this.month=t,this.monthChange.emit(t))}updateHoveredDay(t){(0,Da.Hm)(this.hoveredItem,t,(r,o)=>r.daySame(o))||(this.hoveredItem=t,this.hoveredItemChange.emit(t))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar"]],inputs:{month:"month",value:"value",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},decls:3,vars:2,consts:[["automation-id","tui-calendar__scrollbar","class","scrollbar",4,"ngIf","ngIfElse"],["calendar",""],["automation-id","tui-calendar__scrollbar",1,"scrollbar"],["automation-id","tui-calendar__year",3,"min","max","initialItem","value","yearClick"],["automation-id","tui-calendar__pagination",1,"pagination",3,"min","max","value","valueChange","yearClick"],["automation-id","tui-calendar__calendar",3,"showAdjacent","value","month","disabledItemHandler","markerHandler","hoveredItem","hoveredItemChange","dayClick"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,pa,2,4,"tui-scrollbar",0),i.\u0275\u0275template(1,Uf,3,14,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",r.year)("ngIfElse",o)}},directives:[L.O5,ql.IB,Io,ec,hp],pipes:[Wo.c],styles:["[_nghost-%COMP%]{display:block;height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"month",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"value",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"minViewedMonth",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"maxViewedMonth",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"hoveredItem",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"showAdjacent",void 0),(0,Jt.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"markerHandler",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"monthChange",void 0),(0,Jt.gn)([(0,i.Output)()],e.prototype,"hoveredItemChange",void 0),e})(),Zn=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Sp,pp,yp,ql.Jy,Wo.I]]}),e})(),yr=(()=>{let e=class{constructor(t,r,o){this.disabledItemHandler=ni.Iy,this.markerHandler=Go.zE,this.defaultViewedMonthFirst=lt.ql.currentLocal(),this.defaultViewedMonthSecond=lt.ql.currentLocal().append({month:1}),this.min=lt.K1,this.max=lt.Oy,this.value=null,this.dayClick=new i.EventEmitter,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(s,c)=>s.append({month:c}),t&&t.pipe((0,Ql.YP)(r),(0,Xu.R)(o)).subscribe(s=>{this.value=s,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(t){this.userViewedMonthFirst=t,this.userViewedMonthSecond.year<this.userViewedMonthFirst.year&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({year:t.year-this.userViewedMonthSecond.year}))}onSectionSecondViewedMonth(t){this.userViewedMonthSecond=t,this.userViewedMonthFirst.year>this.userViewedMonthSecond.year&&(this.userViewedMonthFirst=this.userViewedMonthFirst.append({year:t.year-this.userViewedMonthFirst.year}))}onDayClick(t){this.dayClick.emit(t)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(t){return t.monthSameOrAfter(this.max)?this.max:t.monthBefore(this.min)?this.min.append({month:1}):t}updatedViewedMonthFirst(t){return t.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):t.monthSameOrBefore(this.min)?this.min:t}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=null===this.value?this.defaultViewedMonthSecond:this.value.to,this.userViewedMonthFirst.monthSame(this.userViewedMonthSecond)&&(this.userViewedMonthSecond=this.userViewedMonthSecond.append({month:1}))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ir.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(vi.a3))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[i.\u0275\u0275ProvidersFeature([vi.a3])],decls:4,vars:26,consts:[[3,"min","max","month","markerHandler","maxViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"border",3,"min","max","month","markerHandler","minViewedMonth","value","disabledItemHandler","showAdjacent","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"tui-calendar",0),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionFirstViewedMonth(s)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"tui-calendar",1),i.\u0275\u0275listener("hoveredItemChange",function(s){return r.hoveredItem=s})("dayClick",function(s){return r.onDayClick(s)})("monthChange",function(s){return r.onSectionSecondViewedMonth(s)}),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthFirst)("markerHandler",r.markerHandler)("maxViewedMonth",i.\u0275\u0275pipeBind3(1,18,r.cappedUserViewedMonthSecond,r.monthOffset,-1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem),i.\u0275\u0275advance(2),i.\u0275\u0275property("min",r.min)("max",r.max)("month",r.userViewedMonthSecond)("markerHandler",r.markerHandler)("minViewedMonth",i.\u0275\u0275pipeBind3(3,22,r.cappedUserViewedMonthFirst,r.monthOffset,1))("value",r.value)("disabledItemHandler",r.disabledItemHandler)("showAdjacent",!1)("hoveredItem",r.hoveredItem))},directives:[Rs],pipes:[Wo.c],styles:["[_nghost-%COMP%]{display:flex}.border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"markerHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"defaultViewedMonthFirst",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"defaultViewedMonthSecond",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"value",void 0),(0,Re.gn)([(0,i.Output)()],e.prototype,"dayClick",void 0),e=(0,Re.gn)([(0,Re.fM)(0,(0,i.Inject)(ir.cU)),(0,Re.fM)(0,(0,i.Optional)()),(0,Re.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Re.fM)(2,(0,i.Inject)(vi.a3))],e),e})(),Gf=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[Wo.I,ql.Jy,Zn]]}),e})();const Wf=function(e,n,t,r){return[e,n,t,r,!0]},$f=function(e,n,t,r){return[e,n,t,r,!1]};function Tp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-calendar-range",2),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(1,7,i.\u0275\u0275pureFunction4(22,Wf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(2,13,i.\u0275\u0275pureFunction4(27,$f,t.max,t.maxLengthMapper,t.value,t.maxLength)))("defaultViewedMonthFirst",t.defaultViewedMonth)("defaultViewedMonthSecond",i.\u0275\u0275pipeBind2(3,19,t.defaultViewedMonth,t.monthShiftMapper))("disabledItemHandler",t.calculatedDisabledItemHandler)("value",t.value)}}function Ep(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",9)}function Pp(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",7),i.\u0275\u0275listener("keydown.enter.prevent",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("keydown.space.prevent",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)})("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onItemSelect(s)}),i.\u0275\u0275text(1),i.\u0275\u0275template(2,Ep,1,0,"tui-svg",8),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275attribute("aria-checked",r.isItemActive(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isItemActive(t))}}const Ip=function(e,n,t,r,o,s){return[e,n,t,r,o,s]};function Yf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"tui-calendar",4),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)}),i.\u0275\u0275pipe(2,"tuiMapper"),i.\u0275\u0275pipe(3,"tuiMapper"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tui-data-list",5),i.\u0275\u0275template(5,Pp,3,3,"button",6),i.\u0275\u0275pipe(6,"tuiMapper"),i.\u0275\u0275pipe(7,"async"),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("value",t.value)("markerHandler",t.markerHandler)("min",i.\u0275\u0275pipeBindV(2,7,i.\u0275\u0275pureFunction4(28,Wf,t.min,t.maxLengthMapper,t.value,t.maxLength)))("max",i.\u0275\u0275pipeBindV(3,13,i.\u0275\u0275pureFunction4(33,$f,t.max,t.maxLengthMapper,t.value,t.maxLength)))("month",t.computedMonth)("disabledItemHandler",t.calculatedDisabledItemHandler),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBindV(6,19,i.\u0275\u0275pureFunction6(38,Ip,t.items,t.mapper,t.min,t.max,t.minLength,i.\u0275\u0275pipeBind1(7,26,t.otherDateText$))))}}let cu=(()=>{let e=class{constructor(t,r,o,s){this.otherDateText$=s,this.defaultViewedMonth=lt.ql.currentLocal(),this.disabledItemHandler=ni.Iy,this.markerHandler=Go.zE,this.items=[],this.min=lt.K1,this.max=lt.Oy,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new i.EventEmitter,this.rangeChange=new i.EventEmitter,this.maxLengthMapper=ds.EP,this.monthShiftMapper=c=>c.append({month:1}),this.mapper=(c,p,m,w,I)=>[...c.filter(_=>(null===w||_.range.from.append(w).daySameOrBefore(_.range.to))&&_.range.to.daySameOrAfter(p)&&(null===m||_.range.from.daySameOrBefore(m))),I],t&&t.pipe((0,Ql.YP)(r),(0,Xu.R)(o)).subscribe(c=>{this.value=c})}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(t){const{activePeriod:r}=this;return"string"==typeof t&&null===r||r===t}onRangeChange(t){this.updateValue(t)}onDayClick(t){const{value:r}=this;null!==r&&r.isSingleDay?this.updateValue(lt.VR.sort(r.from,t)):this.value=new lt.VR(t,t)}onItemSelect(t){"string"==typeof t?null!==this.activePeriod&&this.updateValue(null):this.updateValue(t.range.dayLimit(this.min,this.max))}updateValue(t){this.value=t,this.valueChange.emit(t),this.rangeChange.emit(t)}get activePeriod(){return this.items.find(t=>(0,Da.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(t,r,o){return s=>{if(!r||!r.isSingleDay||!o)return t(s);const c=r.from.append(o,!0).append({day:1}),p=r.from.append(o).append({day:-1});return c.dayBefore(s)&&p.dayAfter(s)||t(s)}}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ir.cU,8),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(vi.a3),i.\u0275\u0275directiveInject(ir.q5))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-calendar-range"]],inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange",rangeChange:"rangeChange"},features:[i.\u0275\u0275ProvidersFeature([vi.a3])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"markerHandler","min","max","defaultViewedMonthFirst","defaultViewedMonthSecond","disabledItemHandler","value","dayClick"],[1,"wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"value","markerHandler","min","max","month","disabledItemHandler","dayClick"],["role","menu","automation-id","tui-calendar-range__menu",1,"menu"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","tuiPreventDefault","mousedown","role","menuitemradio","automation-id","tui-calendar-range__menu__item",3,"keydown.enter.prevent","keydown.space.prevent","click"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck","class","checkmark",4,"ngIf"],["automation-id","tui-calendar-range__checkmark","src","tuiIconCheck",1,"checkmark"]],template:function(t,r){if(1&t&&(i.\u0275\u0275template(0,Tp,4,32,"tui-primitive-calendar-range",0),i.\u0275\u0275template(1,Yf,8,45,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("ngIf",!r.items.length)("ngIfElse",o)}},directives:[L.O5,yr,ha.A,Rs,mr.qi,L.sg,mr.vK,Mi.P],pipes:[Wo.c,L.Ov],styles:["[_nghost-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"markerHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"items",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"minLength",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"maxLength",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"value",void 0),(0,Re.gn)([(0,i.Output)()],e.prototype,"valueChange",void 0),(0,Re.gn)([(0,i.Output)()],e.prototype,"rangeChange",void 0),(0,Re.gn)([ft.UM],e.prototype,"calculateDisabledItemHandler",null),e=(0,Re.gn)([(0,Re.fM)(0,(0,i.Inject)(ir.cU)),(0,Re.fM)(0,(0,i.Optional)()),(0,Re.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Re.fM)(2,(0,i.Inject)(vi.a3)),(0,Re.fM)(3,(0,i.Inject)(ir.q5))],e),e})(),tc=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Wo.I,ha.Z,Zn,Zn,Mi.E,mr.pc,Gf]]}),e})();var Ha=f(38190),Yo=f(67795);function Zu(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",5),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("pressedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onPressed(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.innerPseudoFocused)("pseudoHovered",r.pseudoHovered)("pseudoPressed",r.pseudoPressed)("invalid",r.computedInvalid)("tuiTextfieldExampleText",r.computedExampleText)("nativeId",r.nativeId)("filler",r.getComputedRangeFiller(t))("readOnly",r.readOnly)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function Yi(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",6),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Ns(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",7),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function Ap(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar-range",8),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onRangeChange(o)}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("defaultViewedMonth",t.defaultViewedMonth)("disabledItemHandler",t.disabledItemHandler)("items",t.items)("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("minLength",t.minLength)("maxLength",t.maxLength)("value",t.value)}}const Mp=["*",[["input"]]],Op=["*","input"],Lp=[{provide:Na.M$,useExisting:(0,i.forwardRef)(()=>fu)},{provide:Oi.KZ,useExisting:(0,i.forwardRef)(()=>fu)},{provide:ir.cU,deps:[[new i.Optional,new i.Self,q.NgControl],[new i.Optional,(0,i.forwardRef)(()=>ir.LD)]],useFactory:(e,n)=>(0,Wu.q7)(e,n)},Jl.Sm];let fu=(()=>{let e=class extends Na.F9{constructor(t,r,o,s,c,p,m,w,I,_,U,te){super(t,r,te),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=p,this.textfieldSize=m,this.textfieldExampleText=w,this.dateFormat=I,this.dateSeparator=_,this.dateTexts$=U,this.valueTransformer=te,this.textMaskOptions={mask:np(this.dateFormat,this.dateSeparator),pipe:tp(this),guide:!1},this.disabledItemHandler=ni.Iy,this.markerHandler=Go.zE,this.defaultViewedMonth=lt.ql.currentLocal(),this.items=[],this.min=lt.K1,this.max=lt.Oy,this.minLength=null,this.maxLength=null,this.open=!1,this.maxLengthMapper=ds.EP,this.dateFiller$=this.dateTexts$.pipe((0,uu.U)(oe=>(0,lt.Yl)(oe[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Af.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get canOpen(){return this.interactive&&!this.computedMobile}get computedExampleText(){return this.items.length?this.textfieldExampleText.exampleText:""}get computedMask(){return this.activePeriod?ds.DV:this.textMaskOptions}get activePeriod(){return this.items.find(t=>(0,Da.Hm)(this.value,t.range,(r,o)=>r.from.daySame(o.from.dayLimit(this.min,this.max))&&r.to.daySame(o.to.dayLimit(this.min,this.max))))||null}get computedValue(){const{value:t,nativeValue:r,activePeriod:o}=this;return o?String(o):t?t.getFormattedDayRange(this.dateFormat,this.dateSeparator):r}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}onClick(){this.isMobile||this.toggle()}getComputedRangeFiller(t){return this.activePeriod?"":this.getDateRangeFiller(t)}onMobileClick(){this.mobileCalendar?this.dialogService.open(new da.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!1,min:this.maxLengthMapper(this.min,this.value,this.maxLength,!0),max:this.maxLengthMapper(this.max,this.value,this.maxLength,!1),disabledItemHandler:this.disabledItemHandler}}).pipe((0,Xu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.toggle()}onOpenChange(t){this.open=t}onValueChange(t){if(this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),t.length!==lt.FZ)return void this.updateValue(null);const r=lt.VR.normalizeParse(t,this.dateFormat);this.updateValue(this.minLength||this.maxLength?this.clampValue(r):r)}onRangeChange(t){this.toggle(),this.focusInput(),t||(this.nativeValue=""),(0,Da.Hm)(this.value,t,(r,o)=>r.daySame(o))||this.updateValue(t)}onItemSelect(t){this.toggle(),this.focusInput(),"string"==typeof t?null!==this.activePeriod&&(this.updateValue(null),this.nativeValue=""):this.updateValue(t.range.dayLimit(this.min,this.max))}onHovered(t){this.updateHovered(t)}onPressed(t){this.updatePressed(t)}onActiveZone(t){this.updateFocused(t),!t&&!this.itemSelected&&(this.nativeValue.length===lt.ek||this.nativeValue.length===lt.ek+lt.mH.length)&&this.updateValue(lt.VR.normalizeParse(this.nativeValue,this.dateFormat))}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}get itemSelected(){return-1!==this.items.findIndex(t=>String(t)===this.nativeValue)}toggle(){this.open=!this.open}focusInput(t=!1){this.nativeFocusableElement&&(0,ou.NY)(this.nativeFocusableElement,!0,t)}clampValue(t){const r=this.minLength&&t.from.append(this.minLength).dayAfter(t.to)?new lt.VR(t.from,t.from.append(this.minLength).append({day:-1})):t,o=this.maxLength?r.from.append(this.maxLength).append({day:-1}):this.max;return r.to.dayAfter(o)?new lt.VR(r.from,o):r}getDateRangeFiller(t){return`${t}${lt.mH}${t}`}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(q.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Oi.fL),i.\u0275\u0275directiveInject(cs.RO),i.\u0275\u0275directiveInject(ir.vk,8),i.\u0275\u0275directiveInject(ye.kI),i.\u0275\u0275directiveInject(ye.pX),i.\u0275\u0275directiveInject(lt.P_),i.\u0275\u0275directiveInject(lt.q_),i.\u0275\u0275directiveInject(ir.zf),i.\u0275\u0275directiveInject(ir.LD,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date-range"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(cr.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonth:"defaultViewedMonth",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength"},features:[i.\u0275\u0275ProvidersFeature(Lp),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Op,decls:9,vars:6,consts:[[1,"hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],["dropdown",""],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","pseudoPressed","invalid","tuiTextfieldExampleText","nativeId","filler","readOnly","iconContent","disabled","textMask","value","valueChange","hoveredChange","pressedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],[3,"defaultViewedMonth","disabledItemHandler","items","min","max","markerHandler","minLength","maxLength","value","valueChange"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(Mp),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)})("tuiActiveZoneChange",function(s){return r.onActiveZone(s)}),i.\u0275\u0275template(1,Zu,3,12,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,Yi,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,Ns,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,Ap,1,9,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("content",o)("open",r.open&&r.canOpen),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,4,r.dateFiller$))}},directives:[Va.o1,Xl.e,Fa.Ls,cr.yc,cr.B1,Ha.n,ye.D9,ye._K,Yo.hd,Mi.P,cu],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}"]}),(0,Re.gn)([(0,i.ViewChild)(cr.yc)],e.prototype,"textfield",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"markerHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"defaultViewedMonth",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"items",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"minLength",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"maxLength",void 0),(0,Re.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Re.gn)([(0,Re.fM)(0,(0,i.Optional)()),(0,Re.fM)(0,(0,i.Self)()),(0,Re.fM)(0,(0,i.Inject)(q.NgControl)),(0,Re.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Re.fM)(2,(0,i.Inject)(i.Injector)),(0,Re.fM)(3,(0,i.Inject)(Oi.fL)),(0,Re.fM)(4,(0,i.Inject)(cs.RO)),(0,Re.fM)(5,(0,i.Optional)()),(0,Re.fM)(5,(0,i.Inject)(ir.vk)),(0,Re.fM)(6,(0,i.Inject)(ye.kI)),(0,Re.fM)(7,(0,i.Inject)(ye.pX)),(0,Re.fM)(8,(0,i.Inject)(lt.P_)),(0,Re.fM)(9,(0,i.Inject)(lt.q_)),(0,Re.fM)(10,(0,i.Inject)(ir.zf)),(0,Re.fM)(11,(0,i.Optional)()),(0,Re.fM)(11,(0,i.Inject)(ir.LD))],e),e})();var Xo;let rn=Xo=class extends Kl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};rn.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(rn)))(t||rn)}}(),rn.\u0275dir=i.\u0275\u0275defineDirective({type:rn,selectors:[["tui-input-date-range"]],features:[i.\u0275\u0275ProvidersFeature([{provide:uo.S0,useExisting:(0,i.forwardRef)(()=>Xo)}]),i.\u0275\u0275InheritDefinitionFeature]});let Xf=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Yo.QA,Xl.A,Fa.WD,da.wq,cr.KW,ye.cn,Va.jh,Mi.E,tc,Ha.S]]}),e})();var lo=f(56498);function Kf(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",5),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).$implicit;return i.\u0275\u0275nextContext(2).onMenuClick(s)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("size",r.itemSize)("disabled",r.disabledItemHandler(t)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function Rp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",3),i.\u0275\u0275template(1,Kf,2,3,"button",4),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.filtered)}}const nc={icon:({$implicit:e})=>"s"===e?"tuiIconTime":"tuiIconTimeLarge",mode:"HH:MM",postfix:"",maxValues:ds.bM,itemSize:"m"},ps=new i.InjectionToken("Default parameters for input time component",{factory:()=>nc});var rc;let Nr=rc=class extends Na.F9{constructor(n,t,r,o){super(n,t),this.timeTexts$=r,this.options=o,this.disabledItemHandler=ni.Iy,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.postfix=this.options.postfix,this.open=!1}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,ou.zV)(this.nativeFocusableElement)}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get textMaskOptions(){return this.calculateMask(this.mode)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return!1!==this.pseudoFocused&&(!(!this.open&&!this.computedFocused)||null)}get icon(){return this.options.icon}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.nativeFocusableElement||(this.nativeFocusableElement.value=n)}getFiller$(n){return this.timeTexts$.pipe((0,uu.U)(t=>t[n]))}onClick(){this.open=!this.open}onValueChange(n){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});const t=this.getMatch(n);if(void 0!==t)return void this.updateValue(t);if(n.length!==this.mode.length)return void this.updateValue(null);const r=lt.qD.fromString(n);this.updateValue(this.strict?this.findNearestTimeFromItems(r):r)}onFocused(n){if(this.updateFocused(n),n||null!==this.value||""===this.nativeValue||"HH:MM"===this.mode)return;const t=lt.qD.fromString(this.nativeValue);this.updateValue(t),setTimeout(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))})}onHovered(n){this.updateHovered(n)}onArrowUp(n){this.items.length||this.processArrow(n,1)}onArrowDown(n){this.items.length||this.processArrow(n,-1)}onMenuClick(n){this.focusInput(),this.updateValue(n)}onOpen(n){this.open=n}writeValue(n){super.writeValue(n),this.nativeValue=n?this.computedValue:""}calculateMask(n){return{mask:rp(n,this.options.maxValues),pipe:kf(n,this.options.maxValues),guide:!1}}filter(n,t,r){return n.filter(o=>o.toString(t).includes(r))}findNearestTimeFromItems(n){return this.items.reduce((t,r)=>Math.abs(r.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())<Math.abs(t.toAbsoluteMilliseconds()-n.toAbsoluteMilliseconds())?r:t)}getMatch(n){return this.items.find(t=>(0,ni.zy)(t,n))}close(){this.open=!1}processArrow(n,t){const{target:r}=n;if(this.readOnly||!(r instanceof HTMLInputElement))return;const o=r.selectionStart||0;this.shiftTime(this.calculateShift(o,t)),r.setSelectionRange(o,o),n.preventDefault()}calculateShift(n,t){return n<=2?{hours:t}:n<=5?{minutes:t}:n<=8?{seconds:t}:{ms:t}}shiftTime(n){if(null===this.value)return;const t=this.value.shift(n);this.nativeValue=t.toString(this.mode),this.updateValue(t)}focusInput(n=!1){this.nativeFocusableElement&&((0,ou.NY)(this.nativeFocusableElement,!0,n),this.close())}};Nr.\u0275fac=function(n){return new(n||Nr)(i.\u0275\u0275directiveInject(q.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(ir.Yq),i.\u0275\u0275directiveInject(ps))},Nr.\u0275cmp=i.\u0275\u0275defineComponent({type:Nr,selectors:[["tui-input-time"]],viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(cr.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.textfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("click",function(){return t.onClick()})},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Oi.KZ,useExisting:(0,i.forwardRef)(()=>rc)},Jl.yn]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:6,vars:18,consts:[[1,"wrapper",3,"canOpen","content","open","openChange","focusedChange"],["tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"filler","nativeId","pseudoFocused","pseudoHovered","pseudoPressed","invalid","focusable","disabled","readOnly","textMask","iconContent","value","postfix","valueChange","hoveredChange","keydown.arrowUp","keydown.arrowDown"],["dropdownContent",""],["automation-id","tui-input-time__dropdown"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click",4,"ngFor","ngForOf"],["tuiOption","","automation-id","tui-input-time__item",3,"size","disabled","click"]],template:function(n,t){if(1&n&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(o){return t.onOpen(o)})("focusedChange",function(o){return t.onFocused(o)}),i.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("keydown.arrowUp",function(o){return t.onArrowUp(o)})("keydown.arrowDown",function(o){return t.onArrowDown(o)}),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(4,Rp,2,1,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n){const r=i.\u0275\u0275reference(5);i.\u0275\u0275property("canOpen",t.interactive&&!!t.filtered.length)("content",r)("open",t.interactive&&t.open&&!!t.filtered.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("filler",i.\u0275\u0275pipeBind1(2,16,t.getFiller$(t.mode)))("nativeId",t.nativeId)("pseudoFocused",t.innerPseudoFocused)("pseudoHovered",t.pseudoHovered)("pseudoPressed",t.pseudoPressed)("invalid",t.computedInvalid)("focusable",t.focusable)("disabled",t.disabled)("readOnly",t.readOnly)("textMask",t.textMaskOptions)("iconContent",t.icon)("value",t.computedValue)("postfix",t.postfix)}},directives:[Va.o1,cr.yc,cr.B1,Ha.n,ye.D9,Yo.hd,mr.qi,L.sg,mr.vK],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),Nr.ctorParameters=()=>[{type:q.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[q.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:lo.y,decorators:[{type:i.Inject,args:[ir.Yq]}]},{type:void 0,decorators:[{type:i.Inject,args:[ps]}]}],(0,Re.gn)([(0,i.ViewChild)(cr.yc)],Nr.prototype,"textfield",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],Nr.prototype,"disabledItemHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],Nr.prototype,"items",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],Nr.prototype,"itemSize",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],Nr.prototype,"strict",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],Nr.prototype,"mode",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],Nr.prototype,"postfix",void 0),(0,Re.gn)([ft.UM],Nr.prototype,"getFiller$",null),(0,Re.gn)([(0,i.HostListener)("click")],Nr.prototype,"onClick",null),(0,Re.gn)([ft.UM],Nr.prototype,"calculateMask",null),(0,Re.gn)([ft.UM],Nr.prototype,"filter",null),Nr=rc=(0,Re.gn)([(0,Re.fM)(0,(0,i.Optional)()),(0,Re.fM)(0,(0,i.Self)()),(0,Re.fM)(0,(0,i.Inject)(q.NgControl)),(0,Re.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Re.fM)(2,(0,i.Inject)(ir.Yq)),(0,Re.fM)(3,(0,i.Inject)(ps))],Nr);let Np=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Yo.QA,mr.pc,Va.jh,cr.KW,Ha.S,ye.cn]]}),e})();function Dp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",24),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Fp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Dp,2,2,"button",23),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.localEventTypes)}}function Vp(e,n){1&e&&(i.\u0275\u0275elementStart(0,"tui-notification",25),i.\u0275\u0275text(1," Invalid date range! Please check your start and end times! "),i.\u0275\u0275elementEnd())}const Bp=function(e){return["/course",e]};let Jf=(()=>{class e{constructor(t,r,o,s){this.route=t,this.courseEventService=r,this.router=o,this.notificationsService=s,this.eventId=null,this.timeOptions=(0,Wu.eN)()}get form(){return this.formData.controls}ngOnInit(){this.formData=$l.createForm(),this.courseEventService.getEventTypes().subscribe(t=>this.localEventTypes=t),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(t=>{this.formData=$l.createFormWithData(t)}))}submitEvent(t){const r=$l.formatFormData(t,this.courseId,this.eventId);this.eventId?this.courseEventService.updateCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been updated Successfully.",{status:"success"}).subscribe(),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()}):this.courseEventService.addCourseEvent(r).subscribe(()=>{this.notificationsService.show("The Event has been added Successfully.",{status:"success"}),this.router.navigate(["course",this.courseId]).then()},o=>{this.notificationsService.show(o,{status:"error"}).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(Os),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(Xt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-event-create"]],decls:36,vars:8,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["aria-label","Event Name","formControlName","name"],["formControlName","name"],["aria-label","Event Type","formControlName","type"],[4,"tuiDataList"],["formControlName","type"],["aria-label","Counts for Tokens","formControlName","countForTokens"],["formControlName","countForTokens"],["aria-label","Start and End Date","formControlName","startEndDatePicker"],["formControlName","startEndDatePicker"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","Start Time","formControlName","startTimePicker",3,"items"],["formControlName","startTimePicker"],["aria-label","End Time","formControlName","endTimePicker",3,"items"],["formControlName","endTimePicker"],["class","tui-space_top-4","status","error",4,"ngIf"],[1,"tui-form__buttons"],["appearance","primary","aria-label","Submit","size","m","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["appearance","secondary","aria-label","Back","size","m","tuiButton","",1,"tui-form__button",3,"routerLink"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["status","error",1,"tui-space_top-4"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.submitEvent(r.formData)}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Event"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Event Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-select",6),i.\u0275\u0275text(10," Event Type "),i.\u0275\u0275template(11,Fp,2,1,"tui-data-list",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",3)(14,"tui-checkbox-labeled",9),i.\u0275\u0275text(15,"Counts for tokens "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",3)(18,"tui-input-date-range",11),i.\u0275\u0275text(19," Start and end date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(20,"tui-field-error",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",13)(22,"div",14)(23,"tui-input-time",15),i.\u0275\u0275text(24," Start time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(26,"div",14)(27,"tui-input-time",17),i.\u0275\u0275text(28," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(29,"tui-field-error",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(30,Vp,2,0,"tui-notification",19),i.\u0275\u0275elementStart(31,"div",20)(32,"button",21),i.\u0275\u0275text(33," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(34,"a",22),i.\u0275\u0275text(35,"Back"),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formData),i.\u0275\u0275advance(22),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(4),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",null==r.formData.errors?null:r.formData.errors.forbiddenDateRange),i.\u0275\u0275advance(2),i.\u0275\u0275property("disabled",r.formData.invalid),i.\u0275\u0275advance(2),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,Bp,r.courseId)))},directives:[q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,he.K3,he.wU,q.NgControlStatus,q.FormControlName,Xn.y,$i.uJ,$i.OI,mr.gX,mr.qi,L.sg,mr.vK,Yl.p,fu,rn,Nr,L.O5,un.Ls,Ot.v0,ne.yS],styles:[""]}),e})();var ic=f(25775),Hp=f(42654),Qf=f(7394),jp=f(23912),oc=f(59796);class Zf{static createForm(){return(new q.FormBuilder).group({report:new q.FormControl("",[q.Validators.required]),report_details:new q.FormControl("")})}static extractData(n){return n.value}}let ac=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}reportQuestion(t,r){const o=this.apiService.getURL("question-report");return this.http.post(o,Object.assign(Object.assign({},r),{question:t})).pipe((0,Ir.K)(this.apiService.handleError("Error occurred while submitting the question report.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(us.eN),i.\u0275\u0275inject(Ms.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var du=f(24417),sc=f(26537);function zp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",9),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Qr(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,zp,2,2,"button",8),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.reportOptions)}}function ki(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"tui-select",3),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Reason "),i.\u0275\u0275template(5,Qr,2,1,"tui-data-list",4),i.\u0275\u0275element(6,"tui-field-error",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",2)(8,"tui-text-area",6),i.\u0275\u0275text(9," Details "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"div",2)(11,"button",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().submitReport()}),i.\u0275\u0275text(12," Submit Report "),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",t.formGroup),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",t.reportOptions?i.\u0275\u0275pipeBind3(3,3,t.reportOptions,0,1):""),i.\u0275\u0275advance(9),i.\u0275\u0275property("disabled",t.formGroup.invalid)}}const Up=function(){return{label:"Report this question",size:"m"}};let Gp=(()=>{class e{constructor(t,r){this.reportQuestionService=t,this.notificationsService=r,this.open=!1,this.openChange=new i.EventEmitter,this.reportOptions=[["TYPO_TEXT","There is a typo in the question instructions"],["TYPO_ANSWER","There is a typo in one of the multiple-choice answers"],["RIGHT_SOLUTION_MARKED_WRONG","My solution is definitely correct but it did not get full marks"],["WRONG_SOLUTION_MARKED_RIGHT","My solution is incorrect but it received full marks"],["OTHER","Other"]]}get form(){return this.formGroup.controls}ngOnInit(){this.formGroup=Zf.createForm()}toggleDialog(t){this.open=t,this.openChange.emit(this.open)}submitReport(){this.reportQuestionService.reportQuestion(this.questionId,Zf.extractData(this.formGroup)).subscribe(()=>{this.notificationsService.show("The question has been successfully reported.",{status:"success"}).subscribe()}),this.toggleDialog(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ac),i.\u0275\u0275directiveInject(Xt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-problem-report-modal"]],inputs:{open:"open",questionId:"questionId"},outputs:{openChange:"openChange"},decls:1,vars:3,consts:[[3,"tuiDialogOptions","tuiDialog","tuiDialogChange"],[3,"formGroup"],[1,"tui-form__row"],["formControlName","report",3,"valueContent"],[4,"tuiDataList"],["formControlName","report"],["formControlName","report_details"],["size","m","tuiButton","","type","submit",3,"disabled","click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275template(0,ki,13,7,"ng-template",0),i.\u0275\u0275listener("tuiDialogChange",function(s){return r.toggleDialog(s)})),2&t&&i.\u0275\u0275property("tuiDialogOptions",i.\u0275\u0275pureFunction0(2,Up))("tuiDialog",r.open)},directives:[cs.iu,q.NgControlStatusGroup,q.FormGroupDirective,$i.uJ,$i.OI,q.NgControlStatus,q.FormControlName,mr.gX,mr.qi,L.sg,mr.vK,Xn.y,du.Jl,du.eQ,Ot.v0],pipes:[sc.J],styles:[""]}),e})();const uc=function(e){return["../",e]};function qf(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",22)(1,"a",23),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tui-svg",24),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)("tui-skeleton_text",!t.category),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(8,uc,null==t.parentCategory?null:t.parentCategory.pk)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",null==t.parentCategory?null:t.parentCategory.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category)}}function Wp(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function $p(e,n){1&e&&i.\u0275\u0275element(0,"tui-svg",32)}function Yp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"a",28,29),i.\u0275\u0275text(2),i.\u0275\u0275template(3,$p,1,0,"tui-svg",30),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(1);i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(4,uc,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.category.full_name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive)}}function ed(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-opt-group",27)(1,"a",28,29),i.\u0275\u0275text(3),i.\u0275\u0275template(4,Wp,1,0,"tui-svg",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,Yp,4,6,"a",31),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=i.\u0275\u0275reference(2);i.\u0275\u0275property("label",t.category.name),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(6,uc,t.category.pk)),i.\u0275\u0275attribute("aria-checked",r.isActive),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" All\xa0",t.category.name," "),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.children)}}function Xp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list",25),i.\u0275\u0275template(1,ed,6,8,"tui-opt-group",26),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.nestedCategories)}}function Kp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",34),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function Jp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,Kp,2,2,"button",33),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function td(e,n){if(1&e&&i.\u0275\u0275element(0,"app-problem-view",35),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("questionId",t.currentQuestionId)}}function nd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275element(1,"tui-marker-icon",37),i.\u0275\u0275elementStart(2,"h1",38),i.\u0275\u0275text(3," There are no available practice questions for this category/difficulty. "),i.\u0275\u0275elementEnd()()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!t.category||!t.uqjs)}}const Qp=function(){return["../../../"]};let Zp=(()=>{class e{constructor(t,r,o,s,c,p){this.route=t,this.uqjService=r,this.difficultyService=o,this.courseService=s,this.categoryService=c,this.userStatsService=p,this.cursor=0,this.categories=[],this.nestedCategories=[],this.include_solved=!1,this.reportQuestionModal=!1,this.subscriptions=new Hp.w}ngOnInit(){this.subscriptions.add(this.categoryService.getCategories().subscribe(t=>{this.categories=t,this.nestedCategories=t.reduce((r,o)=>o.parent?r:[...r,{category:o,children:t.filter(s=>s.parent===o.pk).map(s=>({category:s,children:[]}))}],[]),this.subscriptions.add(this.route.paramMap.subscribe(r=>{var o,s;this.courseId=Number.parseInt(r.get("courseId")),this.categoryId=Number.parseInt(r.get("categoryId")),this.category=t.find(I=>this.categoryId===I.pk),this.parentCategory=t.find(I=>this.category.parent===I.pk),this.cursor=0,this.uqjs=void 0;const c=this.userStatsService.getUserStatsByCategory(this.categoryId),p=this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!this.include_solved&&void 0,is_verified:!0,is_practice:!0}),m=this.difficultyService.getDifficulties(),w=this.courseService.getUserStats(this.courseId,this.categoryId);this.subscriptions.add((0,af.D)([p,m,c,w]).subscribe(([I,_,U,te])=>{this.uqjs=R.shuffle(I),this.difficulties=_,this.userStats=U,this.categoryUserSuccessRate=te.success_rate,this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}nextQuestion(){this.cursor=(this.cursor+1)%this.uqjs.length,this.updateCurrentQuestion()}prevQuestion(){this.cursor=(this.cursor+this.uqjs.length-1)%this.uqjs.length,this.updateCurrentQuestion()}updateCurrentQuestion(){this.currentQuestionId=this.uqjs[this.cursor]}updateQuestions(t,r){var o,s;this.difficulty=t,this.include_solved=r,this.cursor=0,this.subscriptions.add(this.uqjService.getUQJQuestionIds({category:this.parentCategory?this.categoryId:void 0,parent_category:null!==(s=null===(o=this.parentCategory)||void 0===o?void 0:o.pk)&&void 0!==s?s:this.categoryId,difficulty:this.difficulty,is_solved:!!r&&void 0,is_verified:!0,is_practice:!0}).subscribe(c=>{this.uqjs=R.shuffle(c),this.updateCurrentQuestion(),this.calculateUserSuccessRate()}))}calculateUserSuccessRate(){var t;const r=null!==(t=this.difficulty)&&void 0!==t?t:"ALL",o=this.userStats.find(s=>s.difficulty===r);this.userSuccessRate=o?o.avgSuccess:0,this.categorySuccessRate=this.difficulty?this.category.average_success_per_difficulty.find(s=>s.difficulty===this.difficulty).avgSuccess:this.category.average_success}openReportQuestion(){this.reportQuestionModal=!0}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(sf.O),i.\u0275\u0275directiveInject(Qf.G),i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(To.H),i.\u0275\u0275directiveInject(jp.U))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-practice-problem"]],decls:34,vars:40,consts:[[1,"practice"],["position","left","sidebarId","practiceSidebar","spacing","between"],[1,"practice-sidebar_content","tui-space_top-6"],[1,"tui-space_bottom-2"],["icon","tuiIconArrowLeft","size","s","tuiButton","",1,"tui-space_vertical-0","w-full",3,"routerLink"],["class","practice-sidebar_content-breadcrumbs tui-space_bottom-2",4,"ngIf"],[1,"tui-space_bottom-2",3,"content"],[1,"practice-sidebar_content-categories_button","tui-text_h6"],["categoryDropdown",""],[1,"tui-space_bottom-0"],[1,"tui-space_top-1"],["tuiTextfieldSize","m",3,"ngModel","tuiTextfieldCleaner","valueContent","ngModelChange"],[4,"tuiDataList"],["ngDefaultControl","",1,"tui-space_top-4",3,"ngModel","ngModelChange"],[1,"practice-sidebar_buttons","tui-space_vertical-6"],["icon","tuiIconAttention","size","s","tuiButton","",3,"click"],["icon","tuiIconArrowLeft","size","s","tuiButton","",3,"click"],["iconRight","tuiIconArrowRight","size","s","tuiButton","",3,"click"],[1,"practice-content"],[3,"questionId",4,"ngIf","ngIfElse"],["noProblems",""],[3,"open","questionId","openChange"],[1,"practice-sidebar_content-breadcrumbs","tui-space_bottom-2"],["tuiLink","",1,"tui-space_vertical-0",3,"routerLink"],["src","tuiIconChevronRight"],["role","menu"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink"],["rla","routerLinkActive"],["src","tuiIconCheckLarge",4,"ngIf"],["role","menuitemradio","routerLinkActive","","tuiOption","",3,"routerLink",4,"ngFor","ngForOf"],["src","tuiIconCheckLarge"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[3,"questionId"],[1,"tui-container","tui-container_fullwidth","practice-content_none"],["mode","error","size","s","src","tuiIconAlertCircleLarge",1,"tui-space_bottom-4"],[1,"tui-text_h6"]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"app-sidebar",1)(2,"div",2)(3,"div",3)(4,"a",4),i.\u0275\u0275text(5," Back to course "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(6,qf,4,10,"div",5),i.\u0275\u0275elementStart(7,"tui-hosted-dropdown",6)(8,"button",7),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(10,Xp,2,1,"ng-template",null,8,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(12,"p",9),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"p",10),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"tui-select",11),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(s,r.include_solved)}),i.\u0275\u0275pipe(17,"stringifyTuiDataList"),i.\u0275\u0275text(18," Choose a level of difficulty "),i.\u0275\u0275template(19,Jp,2,1,"tui-data-list",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"tui-checkbox-labeled",13),i.\u0275\u0275listener("ngModelChange",function(s){return r.updateQuestions(r.difficulty,s)}),i.\u0275\u0275text(21," Include Solved "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(22,"div",14)(23,"button",15),i.\u0275\u0275listener("click",function(){return r.openReportQuestion()}),i.\u0275\u0275text(24," Report "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"button",16),i.\u0275\u0275listener("click",function(){return r.prevQuestion()}),i.\u0275\u0275text(26," Previous Question "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(27,"button",17),i.\u0275\u0275listener("click",function(){return r.nextQuestion()}),i.\u0275\u0275text(28," Next Question "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(29,"div",18),i.\u0275\u0275template(30,td,1,1,"app-problem-view",19),i.\u0275\u0275template(31,nd,4,4,"ng-template",null,20,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(33,"app-problem-report-modal",21),i.\u0275\u0275listener("openChange",function(s){return r.reportQuestionModal=s}),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(11),s=i.\u0275\u0275reference(32);let c;i.\u0275\u0275advance(4),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(39,Qp)),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",r.parentCategory),i.\u0275\u0275advance(1),i.\u0275\u0275property("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",r.parentCategory?"":"All ","",null!==(c=null==r.category?null:r.category.name)&&void 0!==c?c:"Category Name"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Your Success Rate: ",(100*r.userSuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.userStats)("tui-skeleton_text",!r.category||!r.userStats),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Average Success Rate: ",(100*r.categorySuccessRate).toFixed(2)+"%"||0," "),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.difficulty)("tuiTextfieldCleaner",!0)("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(17,35,r.difficulties,0,1):""),i.\u0275\u0275advance(4),i.\u0275\u0275classProp("tui-skeleton",!r.difficulties||!r.category),i.\u0275\u0275property("ngModel",r.include_solved),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("tui-skeleton",!r.category||!r.uqjs),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",r.currentQuestionId&&r.category&&r.uqjs)("ngIfElse",s),i.\u0275\u0275advance(3),i.\u0275\u0275property("open",r.reportQuestionModal)("questionId",r.currentQuestionId)}},directives:[oc.k,Ot.v0,ne.yS,L.O5,tn.V,Mi.P,Va.o1,mr.qi,L.sg,mr.Rs,mr.vK,ne.Od,$i.uJ,$i.OI,ye.sz,q.NgControlStatus,q.NgModel,ye.be,mr.gX,Yl.p,q.DefaultValueAccessor,ic.z,Fr.B,Gp],pipes:[sc.J],styles:[".w-full[_ngcontent-%COMP%]{width:100%}.practice[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 767px){.practice[_ngcontent-%COMP%]{flex-direction:column}}.practice-sidebar_content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]{color:var(--tui-text-03);display:flex;align-items:center;width:100%}.practice-sidebar_content-breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]{border:none;background-color:transparent;text-align:left;cursor:pointer;padding:0;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;transition-duration:.3s}.practice-sidebar_content-categories_button[_ngcontent-%COMP%]:hover{color:var(--tui-primary-hover)}.practice-sidebar_buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.practice-sidebar_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.practice-content[_ngcontent-%COMP%]{width:100%}.practice-content_none[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}"]}),e})(),lc=(()=>{class e{constructor(t,r){this.http=t,this.apiService=r}getGoal(t){const r=this.apiService.getURL("goal",t);return this.http.get(r).pipe((0,Ir.K)(this.apiService.handleError("Unable to fetch goal.")))}getGoals(){const t=this.apiService.getURL("goal");return this.http.get(t).pipe((0,Ir.K)(this.apiService.handleError("Unable to fetch goals.")))}createGoal(t){const r=this.apiService.getURL("goal");return this.http.post(r,t).pipe((0,Ir.K)(this.apiService.handleError("Unable to create goal.")))}createGoalItem(t){const r=this.apiService.getURL("goal-item");return this.http.post(r,t).pipe((0,Ir.K)(this.apiService.handleError("Unable to create goal item.")))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(us.eN),i.\u0275\u0275inject(Ms.s))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function qp(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;let r;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate3(" Solve ",t.number_of_questions," ",null!==(r=t.difficulty)&&void 0!==r?r:""," questions from ",t.category," ")}}const Ds=function(e){return[e]};function eg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div"),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div"),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div"),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275text(11),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(12," Items "),i.\u0275\u0275template(13,qp,2,3,"div",0),i.\u0275\u0275elementStart(14,"a",1),i.\u0275\u0275text(15,"Open"),i.\u0275\u0275elementEnd()()),2&e){const t=n.$implicit,r=n.index;i.\u0275\u0275attribute("data-index",r),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Goal ",r," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Start date: ",t.start_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" End date: ",t.end_date," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Progress: ",t.progress," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Is Finished: ",t.is_finished," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Number of questions: ",t.number_of_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.goal_items),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction1(9,Ds,t.id))}}let tg=(()=>{class e{constructor(t){this.goalService=t}ngOnInit(){this.goalService.getGoals().subscribe(t=>{this.goals=t})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(lc))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-page"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"h1"),i.\u0275\u0275text(1,"Goals"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,eg,16,11,"div",0),i.\u0275\u0275elementStart(3,"a",1),i.\u0275\u0275text(4,"Create a new goal"),i.\u0275\u0275elementEnd()),2&t&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",r.goals),i.\u0275\u0275advance(1),i.\u0275\u0275property("routerLink","create"))},directives:[L.sg,ne.yS],styles:[""]}),e})();class Fs{static createGoalForm(){return(new q.FormBuilder).group({end_date:new q.FormControl(lt.TU.currentLocal(),[q.Validators.required]),end_time:new q.FormControl(lt.qD.currentLocal(),[q.Validators.required]),goal_items:new q.FormArray([Fs.createGoalItemForm()],[q.Validators.required])})}static createGoalItemForm(){return(new q.FormBuilder).group({category:new q.FormControl("",[q.Validators.required]),difficulty:new q.FormControl("",[q.Validators.required]),number_of_questions:new q.FormControl("",[q.Validators.required])})}static formatGoalFormData(n,t){return{course_id:t,end_date:this.dateAndTimeToLocal(n.get("end_date").value,n.get("end_time").value)}}static formatGoalItemFormData(n,t){return Object.assign({goal:t},n.value)}static dateAndTimeToLocal(n,t){return new Date(n.toLocalNativeDate().getTime()+t.toAbsoluteMilliseconds()).toISOString()}}function sg(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-primitive-textfield",6),i.\u0275\u0275listener("valueChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onValueChange(o)})("hoveredChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onHovered(o)})("focusedChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onFocused(o)}),i.\u0275\u0275projection(1),i.\u0275\u0275projection(2,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275elementEnd()}if(2&e){const t=n.tuiLet,r=i.\u0275\u0275nextContext(),o=i.\u0275\u0275reference(4),s=i.\u0275\u0275reference(6);i.\u0275\u0275property("pseudoFocused",r.pseudoFocused)("pseudoHovered",r.pseudoHovered)("invalid",r.computedInvalid)("filler",r.getComputedFiller(t))("nativeId",r.nativeId)("readOnly",r.readOnly)("focusable",r.computedFocusable)("iconContent",r.computedMobile?o:s)("disabled",r.computedDisabled)("textMask",r.computedMask)("value",r.computedValue)}}function ug(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-svg",7),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMobileClick()}),i.\u0275\u0275elementEnd()}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function lg(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-svg",8),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("icon",!t.computedDisabled),i.\u0275\u0275property("src",t.calendarIcon)}}function fc(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11)(1,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(t);const o=i.\u0275\u0275nextContext(2);return o.onDayClick(o.items[0].day)}),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd()()}if(2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",t.items[0]," ")}}function ad(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tui-calendar",9),i.\u0275\u0275listener("dayClick",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onDayClick(o)})("monthChange",function(o){return i.\u0275\u0275restoreView(t),i.\u0275\u0275nextContext().onMonthChange(o)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,fc,3,1,"div",10)}if(2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("min",t.min)("max",t.max)("markerHandler",t.markerHandler)("disabledItemHandler",t.disabledItemHandler)("month",t.computedActiveYearMonth)("value",t.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",1===t.items.length)}}const sd=["*",[["input"]]],cg=["*","input"],dg=[{provide:Oi.KZ,useExisting:(0,i.forwardRef)(()=>hu)},{provide:ir.cU,deps:[[new i.Optional,new i.Self,q.NgControl],[new i.Optional,ir.HF]],useFactory:(e,n)=>(0,Wu.q7)(e,n)},{provide:Na.M$,useExisting:(0,i.forwardRef)(()=>hu)},Jl.Sm];let hu=(()=>{let e=class extends Na.F9{constructor(t,r,o,s,c,p,m,w,I,_,U){super(t,r,U),this.injector=o,this.isMobile=s,this.dialogService=c,this.mobileCalendar=p,this.textfieldSize=m,this.dateFormat=w,this.dateSeparator=I,this.dateTexts$=_,this.valueTransformer=U,this.month=null,this.textMaskOptions={mask:Lf(this.dateFormat,this.dateSeparator),pipe:ep(this),guide:!1},this.min=lt.K1,this.max=lt.Oy,this.disabledItemHandler=ni.Iy,this.markerHandler=Go.zE,this.items=[],this.defaultActiveYearMonth=lt.ql.currentLocal(),this.open=!1,this.filler$=this.dateTexts$.pipe((0,uu.U)(te=>(0,lt.Yl)(te[this.dateFormat],this.dateSeparator)))}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return!!this.textfield&&this.textfield.focused}get computedMobile(){return this.isMobile&&!!this.mobileCalendar}get calendarIcon(){return(0,Af.Bb)(this.textfieldSize.size)?"tuiIconCalendarLarge":"tuiIconCalendar"}get computedValue(){const{value:t,nativeValue:r,activeItem:o}=this;return o?String(o):t?t.toString(this.dateFormat,this.dateSeparator):r}get computedActiveYearMonth(){return this.items[0]&&this.value&&this.value.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||this.defaultActiveYearMonth}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(t){!this.nativeFocusableElement||(this.nativeFocusableElement.value=t)}get canOpen(){return this.interactive&&!this.computedMobile}get computedMask(){return this.activeItem?ds.DV:this.textMaskOptions}get activeItem(){const{value:t}=this;return t&&this.items.find(r=>r.day.daySame(t))||null}onClick(){this.isMobile||(this.open=!this.open)}getComputedFiller(t){return this.activeItem?"":t}onMobileClick(){this.mobileCalendar?this.dialogService.open(new da.Al(this.mobileCalendar,this.injector),{size:"fullscreen",closeable:!1,data:{single:!0,min:this.min,max:this.max,disabledItemHandler:this.disabledItemHandler}}).pipe((0,Xu.R)(this.destroy$)).subscribe(t=>{this.updateValue(t)}):this.open=!this.open}onValueChange(t){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),t||this.onOpenChange(!0),this.updateValue(t.length!==lt.ek?null:lt.TU.normalizeParse(t,this.dateFormat))}onDayClick(t){this.updateValue(t),this.open=!1}onHovered(t){this.updateHovered(t)}onMonthChange(t){this.month=t}onOpenChange(t){this.open=t}onFocused(t){this.updateFocused(t)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(t){super.writeValue(t),this.nativeValue=t?this.computedValue:""}valueIdenticalComparator(t,r){return(0,Da.Hm)(t,r,(o,s)=>o.daySame(s))}};return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(q.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.Injector),i.\u0275\u0275directiveInject(Oi.fL),i.\u0275\u0275directiveInject(cs.RO),i.\u0275\u0275directiveInject(ir.vk,8),i.\u0275\u0275directiveInject(ye.kI),i.\u0275\u0275directiveInject(lt.P_),i.\u0275\u0275directiveInject(lt.q_),i.\u0275\u0275directiveInject(ir.zf),i.\u0275\u0275directiveInject(ir.HF,8))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tui-input-date"]],viewQuery:function(t,r){if(1&t&&i.\u0275\u0275viewQuery(cr.yc,5),2&t){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(r.textfield=o.first)}},hostBindings:function(t,r){1&t&&i.\u0275\u0275listener("click",function(){return r.onClick()})},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[i.\u0275\u0275ProvidersFeature(dg),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:cg,decls:9,vars:7,consts:[[1,"hosted",3,"canOpen","open","content","openChange"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric","class","textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange",4,"tuiLet"],["mobileIconContent",""],["iconContent",""],[3,"polymorpheus"],["dropdown","polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","tuiTextfieldInputMode","numeric",1,"textfield",3,"pseudoFocused","pseudoHovered","invalid","filler","nativeId","readOnly","focusable","iconContent","disabled","textMask","value","valueChange","hoveredChange","focusedChange"],["automation-id","tui-input-date-range__icon",3,"src","click"],[3,"src"],["tuiPreventDefault","mousedown","automation-id","tui-input-date__calendar",3,"min","max","markerHandler","disabledItemHandler","month","value","dayClick","monthChange"],["tuiPreventDefault","mousedown","class","button",4,"ngIf"],["tuiPreventDefault","mousedown",1,"button"],["tuiLink","","type","button",3,"click"]],template:function(t,r){if(1&t&&(i.\u0275\u0275projectionDef(sd),i.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),i.\u0275\u0275listener("openChange",function(s){return r.onOpenChange(s)}),i.\u0275\u0275template(1,sg,3,11,"tui-primitive-textfield",1),i.\u0275\u0275pipe(2,"async"),i.\u0275\u0275template(3,ug,1,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(5,lg,1,3,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(7,ad,2,7,"ng-template",4,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&t){const o=i.\u0275\u0275reference(8);i.\u0275\u0275property("canOpen",r.canOpen)("open",r.open&&r.canOpen)("content",o),i.\u0275\u0275advance(1),i.\u0275\u0275property("tuiLet",i.\u0275\u0275pipeBind1(2,5,r.filler$)),i.\u0275\u0275advance(6),i.\u0275\u0275property("polymorpheus",r.type)}},directives:[Va.o1,Fa.Ls,cr.yc,cr.B1,Ha.n,ye.D9,Yo.hd,Mi.P,da.GL,Rs,ha.A,L.O5,tn.V],pipes:[L.Ov],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.icon[_ngcontent-%COMP%]{pointer-events:auto}.button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-base-03)}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}"],changeDetection:0}),(0,Re.gn)([(0,i.ViewChild)(cr.yc)],e.prototype,"textfield",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"min",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"max",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"disabledItemHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"markerHandler",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"items",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],e.prototype,"defaultActiveYearMonth",void 0),(0,Re.gn)([(0,i.HostListener)("click")],e.prototype,"onClick",null),e=(0,Re.gn)([(0,Re.fM)(0,(0,i.Optional)()),(0,Re.fM)(0,(0,i.Self)()),(0,Re.fM)(0,(0,i.Inject)(q.NgControl)),(0,Re.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Re.fM)(2,(0,i.Inject)(i.Injector)),(0,Re.fM)(3,(0,i.Inject)(Oi.fL)),(0,Re.fM)(4,(0,i.Inject)(cs.RO)),(0,Re.fM)(5,(0,i.Optional)()),(0,Re.fM)(5,(0,i.Inject)(ir.vk)),(0,Re.fM)(6,(0,i.Inject)(ye.kI)),(0,Re.fM)(7,(0,i.Inject)(lt.P_)),(0,Re.fM)(8,(0,i.Inject)(lt.q_)),(0,Re.fM)(9,(0,i.Inject)(ir.zf)),(0,Re.fM)(10,(0,i.Optional)()),(0,Re.fM)(10,(0,i.Inject)(ir.HF))],e),e})();var ud;let Vs=ud=class extends Kl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){n.inputMode="numeric"}};Vs.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(Vs)))(t||Vs)}}(),Vs.\u0275dir=i.\u0275\u0275defineDirective({type:Vs,selectors:[["tui-input-date"]],features:[i.\u0275\u0275ProvidersFeature([{provide:uo.S0,useExisting:(0,i.forwardRef)(()=>ud)}]),i.\u0275\u0275InheritDefinitionFeature]});let hg=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Yo.QA,da.wq,ha.Z,Zn,Mi.E,tn.j,Va.jh,cr.KW,Ha.S,Fa.WD,ye.cn]]}),e})();var Dr=f(27670),el=f(60390);function pg(e,n){if(1&e&&i.\u0275\u0275element(0,"div",3),2&e){i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(6);i.\u0275\u0275property("content",t)}}function gg(e,n){1&e&&i.\u0275\u0275projection(0,2)}const vg=["*",[["input"]],[["","polymorpheus-outlet",""]]],mg=function(e,n,t,r,o){return[e,n,t,r,o]};var tl;let ri=tl=class extends Na.F9{constructor(n,t,r,o){super(n,t),this.numberFormat=r,this.isIOS=o,this.min=-1/0,this.max=1/0,this.decimal="not-zero",this.precision=2,this.prefix="",this.postfix="",this.mask=(s,c,p,m)=>({mask:(0,Dr.EC)({allowNegative:s,decimalLimit:p,allowDecimal:"never"!==c,requireDecimal:"always"===c,decimalSymbol:this.numberFormat.decimalSeparator,thousandSymbol:this.numberFormat.thousandSeparator,autoCorrectDecimalSymbol:(0,Dr.YT)(this.numberFormat)}),pipe:(0,Dr.qs)("always"===c?p:0,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,m,s,this.isIOS),guide:!1})}get nativeFocusableElement(){return!this.primitiveTextfield||this.computedDisabled?null:this.primitiveTextfield.nativeFocusableElement}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused}get isNegativeAllowed(){return this.min<0}get inputMode(){return"never"===this.decimal?"numeric":"decimal"}get calculatedMaxLength(){return 18+("never"!==this.decimal&&this.nativeValue.includes(this.numberFormat.decimalSeparator)?this.precision+1:0)+this.numberFormat.thousandSeparator.repeat(5).length}get formattedValue(){return this.getFormattedValue(this.value||0)}get computedValue(){return this.focused?this.nativeValue:null===this.value?"":this.formattedValue}onZero(n){const t=this.nativeValue.split(this.numberFormat.decimalSeparator)[1]||"",{nativeFocusableElement:r}=this;t.length<this.precision||!r||!r.selectionStart||"0"!==this.nativeValue[r.selectionStart]||(n.preventDefault(),r.selectionStart++)}onValueChange(n){if((0,Dr.Y5)(n))return void this.updateValue(null);if(this.isNativeValueNotFinished)return;const t=this.absoluteCapInputValue(n);null===t||isNaN(t)||(this.updateValue(t),t!==(0,Dr.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)&&(this.nativeValue=this.formattedValue))}onKeyDown(n){if(Go.YZ.includes(n.key)){if("never"===this.decimal)return void n.preventDefault();this.nativeValue.includes(this.numberFormat.decimalSeparator)&&(n.preventDefault(),this.setCaretAfterComma())}}onFocused(n){if(this.updateFocused(n),n)return;const t=this.nativeNumberValue;if(isNaN(t))return void this.clear();const r=Math.min(this.max,Math.max(this.min,t));this.updateValue(r),this.nativeValue=this.formattedValue}onHovered(n){this.updateHovered(n)}onPressed(n){this.updatePressed(n)}getFormattedValue(n){const r=Math.abs(n)%1>0;let o="always"===this.decimal||r?this.precision:0;const s=r?(0,el.Nk)(n,this.precision):"";return this.focused&&"always"!==this.decimal&&(o=s.length),(0,el.uf)(n,o,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator,this.numberFormat.zeroPadding)}get isNativeValueNotFinished(){const n=this.nativeNumberValue;return n<0?n>this.max:n<this.min}get nativeValue(){return this.nativeFocusableElement?this.nativeFocusableElement.value:""}set nativeValue(n){!this.primitiveTextfield||!this.nativeFocusableElement||(this.primitiveTextfield.value=n,this.nativeFocusableElement.value=n)}get nativeNumberValue(){return(0,Dr.uk)(this.nativeValue,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator)}clear(){this.nativeValue="",this.updateValue(null)}absoluteCapInputValue(n){const t=(0,Dr.uk)(n,this.numberFormat.decimalSeparator,this.numberFormat.thousandSeparator),r=t<0?Math.max(Math.max(this.min,Number.MIN_SAFE_INTEGER),t):Math.min(t,Math.min(this.max,Number.MAX_SAFE_INTEGER));return isNaN(r)||r<this.min||r>this.max?null:r}setCaretAfterComma(){if(!this.nativeFocusableElement)return;const n=this.nativeValue.length-this.precision;this.nativeFocusableElement.setSelectionRange(n,n)}};var ld;ri.\u0275fac=function(n){return new(n||ri)(i.\u0275\u0275directiveInject(q.NgControl,10),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(uo.HO),i.\u0275\u0275directiveInject(Oi.FA))},ri.\u0275cmp=i.\u0275\u0275defineComponent({type:ri,selectors:[["tui-input-number"]],contentQueries:function(n,t,r){if(1&n&&i.\u0275\u0275contentQuery(r,da.r1,5),2&n){let o;i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.polymorpheusValueContent=o.first)}},viewQuery:function(n,t){if(1&n&&i.\u0275\u0275viewQuery(cr.yc,5),2&n){let r;i.\u0275\u0275queryRefresh(r=i.\u0275\u0275loadQuery())&&(t.primitiveTextfield=r.first)}},hostBindings:function(n,t){1&n&&i.\u0275\u0275listener("keydown.0",function(o){return t.onZero(o)})},inputs:{min:"min",max:"max",decimal:"decimal",precision:"precision",prefix:"prefix",postfix:"postfix"},features:[i.\u0275\u0275ProvidersFeature([{provide:Oi.KZ,useExisting:(0,i.forwardRef)(()=>tl)},{provide:Na.M$,useExisting:(0,i.forwardRef)(()=>tl)}]),i.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*","input","[polymorpheus-outlet]"],decls:7,vars:25,consts:[["tuiValueAccessor","","tuiTextfieldInputMode","decimal",1,"textfield",3,"pseudoHovered","pseudoFocused","pseudoPressed","invalid","tuiTextfieldMaxLength","readOnly","disabled","textMask","value","prefix","postfix","focusable","valueChange","hoveredChange","focusedChange","pressedChange","keydown"],["polymorpheus-outlet","","class","t-value-content",3,"content",4,"ngIf"],["valueContent",""],["polymorpheus-outlet","",1,"t-value-content",3,"content"]],template:function(n,t){1&n&&(i.\u0275\u0275projectionDef(vg),i.\u0275\u0275elementStart(0,"tui-primitive-textfield",0),i.\u0275\u0275listener("valueChange",function(o){return t.onValueChange(o)})("hoveredChange",function(o){return t.onHovered(o)})("focusedChange",function(o){return t.onFocused(o)})("pressedChange",function(o){return t.onPressed(o)})("keydown",function(o){return t.onKeyDown(o)}),i.\u0275\u0275pipe(1,"tuiMapper"),i.\u0275\u0275projection(2),i.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),i.\u0275\u0275template(4,pg,1,1,"div",1),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,gg,1,0,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&n&&(i.\u0275\u0275property("pseudoHovered",t.computedHovered)("pseudoFocused",t.computedFocused)("pseudoPressed",t.computedPressed)("invalid",t.computedInvalid)("tuiTextfieldMaxLength",t.calculatedMaxLength)("readOnly",t.readOnly)("disabled",t.computedDisabled)("textMask",i.\u0275\u0275pipeBindV(1,13,i.\u0275\u0275pureFunction5(19,mg,t.isNegativeAllowed,t.mask,t.decimal,t.precision,t.nativeFocusableElement)))("value",t.computedValue)("prefix",t.prefix)("postfix",t.postfix)("focusable",t.focusable),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",t.polymorpheusValueContent))},directives:[cr.yc,cr.B1,Ha.n,ye.D9,ye.fy,Yo.hd,L.O5,da.r1],pipes:[Wo.c],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value-content[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),ri.ctorParameters=()=>[{type:q.NgControl,decorators:[{type:i.Optional},{type:i.Self},{type:i.Inject,args:[q.NgControl]}]},{type:i.ChangeDetectorRef,decorators:[{type:i.Inject,args:[i.ChangeDetectorRef]}]},{type:void 0,decorators:[{type:i.Inject,args:[uo.HO]}]},{type:Boolean,decorators:[{type:i.Inject,args:[Oi.FA]}]}],(0,Re.gn)([(0,i.ViewChild)(cr.yc)],ri.prototype,"primitiveTextfield",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],ri.prototype,"min",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],ri.prototype,"max",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],ri.prototype,"decimal",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],ri.prototype,"precision",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],ri.prototype,"prefix",void 0),(0,Re.gn)([(0,i.Input)(),(0,ft.TH)()],ri.prototype,"postfix",void 0),(0,Re.gn)([(0,i.ContentChild)(da.r1)],ri.prototype,"polymorpheusValueContent",void 0),(0,Re.gn)([(0,i.HostListener)("keydown.0",["$event"])],ri.prototype,"onZero",null),ri=tl=(0,Re.gn)([(0,Re.fM)(0,(0,i.Optional)()),(0,Re.fM)(0,(0,i.Self)()),(0,Re.fM)(0,(0,i.Inject)(q.NgControl)),(0,Re.fM)(1,(0,i.Inject)(i.ChangeDetectorRef)),(0,Re.fM)(2,(0,i.Inject)(uo.HO)),(0,Re.fM)(3,(0,i.Inject)(Oi.FA))],ri);let Bs=ld=class extends Kl.dh{get value(){return this.host.computedValue}onValueChange(n){this.host.onValueChange(n)}process(n){this.input=n}ngDoCheck(){!this.input||(this.input.maxLength=this.host.calculatedMaxLength,this.input.inputMode="decimal")}};Bs.\u0275fac=function(){let e;return function(t){return(e||(e=i.\u0275\u0275getInheritedFactory(Bs)))(t||Bs)}}(),Bs.\u0275dir=i.\u0275\u0275defineDirective({type:Bs,selectors:[["tui-input-number"]],features:[i.\u0275\u0275ProvidersFeature([{provide:uo.S0,useExisting:(0,i.forwardRef)(()=>ld)}]),i.\u0275\u0275InheritDefinitionFeature]});let yg=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Yo.QA,Wo.I,cr.KW,ye.cn,Ha.S,da.wq]]}),e})();function cd(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t.pk),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.full_name," ")}}function xg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,cd,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.categories)}}function _g(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275property("value",t[0]),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t[1]," ")}}function bg(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"tui-data-list"),i.\u0275\u0275template(1,_g,2,2,"button",17),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.difficulties)}}function pc(e,n){if(1&e){const t=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"tui-select",13),i.\u0275\u0275pipe(3,"stringifyTuiDataList"),i.\u0275\u0275text(4," Category "),i.\u0275\u0275template(5,xg,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",4)(8,"tui-select",13),i.\u0275\u0275pipe(9,"stringifyTuiDataList"),i.\u0275\u0275text(10," Difficulty "),i.\u0275\u0275template(11,bg,2,1,"tui-data-list",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"div",4)(14,"tui-input-number",15),i.\u0275\u0275text(15," Number of questions "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tui-field-error",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",4)(18,"button",16),i.\u0275\u0275listener("click",function(){const s=i.\u0275\u0275restoreView(t).index;return i.\u0275\u0275nextContext().removeGoalItem(s)}),i.\u0275\u0275text(19," Remove "),i.\u0275\u0275elementEnd()()()}if(2&e){const t=n.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.categories?i.\u0275\u0275pipeBind3(3,8,r.categories,"pk","full_name"):"")("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"category")),i.\u0275\u0275advance(2),i.\u0275\u0275property("valueContent",r.difficulties?i.\u0275\u0275pipeBind3(9,12,r.difficulties,0,1):"")("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(4),i.\u0275\u0275property("formControl",r.getFormControl(t,"difficulty")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions")),i.\u0275\u0275advance(2),i.\u0275\u0275property("formControl",r.getFormControl(t,"number_of_questions"))}}let gc=(()=>{class e{constructor(t,r,o,s,c,p){this.goalService=t,this.categoryService=r,this.difficultyService=o,this.router=s,this.activatedRoute=c,this.notificationService=p,this.timeOptions=(0,Wu.eN)()}ngOnInit(){this.courseId=this.activatedRoute.snapshot.params.courseId,this.goalForm=Fs.createGoalForm(),this.categoryService.getCategories().subscribe(t=>this.categories=t),this.difficultyService.getDifficulties().subscribe(t=>this.difficulties=t)}getGoalItems(){return this.goalForm.get("goal_items")}getFormControl(t,r){return t.get(r)}getGoalItemFormControls(){return this.getGoalItems().controls}addGoalItem(){this.getGoalItems().push(Fs.createGoalItemForm())}removeGoalItem(t){this.getGoalItems().removeAt(t)}onSubmit(){return function ig(e,n,t,r){return new(t||(t=Promise))(function(s,c){function p(I){try{w(r.next(I))}catch(_){c(_)}}function m(I){try{w(r.throw(I))}catch(_){c(_)}}function w(I){I.done?s(I.value):function o(s){return s instanceof t?s:new t(function(c){c(s)})}(I.value).then(p,m)}w((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){const t=Fs.formatGoalFormData(this.goalForm,this.courseId),r=yield this.goalService.createGoal(t).toPromise();for(const o of this.getGoalItemFormControls()){const s=Fs.formatGoalItemFormData(o,r.id);yield this.goalService.createGoalItem(s).toPromise()}this.notificationService.show("Goal created successfully",{label:"Success",status:"success"}).subscribe(),this.router.navigate([".."],{relativeTo:this.activatedRoute}).then()})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(lc),i.\u0275\u0275directiveInject(To.H),i.\u0275\u0275directiveInject(Qf.G),i.\u0275\u0275directiveInject(ne.F0),i.\u0275\u0275directiveInject(ne.gz),i.\u0275\u0275directiveInject(Xt.$F))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal-create"]],decls:21,vars:4,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row","tui-form__row_multi-fields"],[1,"tui-form__multi-field"],["aria-label","End Date","formControlName","end_date"],["formControlName","end_date"],["aria-label","End Time","formControlName","end_time",3,"items"],["formControlName","end_time"],["class","tui-form__row tui-form__row_multi-fields",4,"ngFor","ngForOf"],[1,"tui-form__buttons"],["icon","tuiIconPlus","size","m","tuiButton","","type","button",3,"click"],["size","m","tuiButton","",1,"tui-form__button",3,"disabled"],[3,"valueContent","formControl"],[4,"tuiDataList"],[3,"formControl"],["icon","tuiIconPlus","size","m","tuiButton","","type","button","appearance","accent",3,"click"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(2,"h2",2),i.\u0275\u0275text(3,"Create New Goal"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"div",4)(6,"tui-input-date",5),i.\u0275\u0275text(7," End date "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(8,"tui-field-error",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",4)(10,"tui-input-time",7),i.\u0275\u0275text(11," End time "),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tui-field-error",8),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"h3",2),i.\u0275\u0275text(14,"Goal Items"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(15,pc,20,16,"div",9),i.\u0275\u0275elementStart(16,"div",10)(17,"button",11),i.\u0275\u0275listener("click",function(){return r.addGoalItem()}),i.\u0275\u0275text(18," Add Another "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"button",12),i.\u0275\u0275text(20," Submit "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.goalForm),i.\u0275\u0275advance(9),i.\u0275\u0275property("items",r.timeOptions),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngForOf",r.getGoalItemFormControls()),i.\u0275\u0275advance(4),i.\u0275\u0275property("disabled",r.goalForm.invalid))},directives:[q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,hu,Vs,q.NgControlStatus,q.FormControlName,Xn.y,Nr,L.sg,$i.uJ,$i.OI,q.FormControlDirective,mr.gX,mr.qi,mr.vK,ri,Bs,Ot.v0],pipes:[sc.J],styles:[""]}),e})();f(95489),f(2836),f(65063),f(97739);const wg=["tuiProgressBar",""];let Ag=(()=>{let e=class{constructor(){this.size="m"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(t,r){2&t&&(i.\u0275\u0275attribute("data-size",r.size),i.\u0275\u0275styleProp("--tui-progress-color",r.color))},inputs:{size:"size",color:"color"},attrs:wg,decls:0,vars:0,template:function(t,r){},styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;color:var(--tui-progress-color,currentColor);background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear;background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color,currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size='m'][_nghost-%COMP%]{height:1.5rem}[data-size='s'][_nghost-%COMP%]{border-radius:var(--tui-radius-xs);height:.5rem}[data-size='s'][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size='s'][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,Re.gn)([(0,i.Input)(),(0,i.HostBinding)("style.--tui-progress-color")],e.prototype,"color",void 0),(0,Re.gn)([(0,i.Input)(),(0,i.HostBinding)("attr.data-size"),(0,ft.TH)()],e.prototype,"size",void 0),e})(),a=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,hs.Ih]]}),e})();var u=f(35326);function h(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"div"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t.value()),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.label(t.activeItemIndex))}}let P=(()=>{class e{constructor(){this.activeItemIndex=NaN}values(){return[this.submissionStats.correct,this.submissionStats.partially_correct,this.submissionStats.wrong]}value(){return isNaN(this.activeItemIndex)?this.submissionStats.total:this.values()[this.activeItemIndex]}color(t){return{0:"success",1:"primary",2:"error"}[t]}label(t){return isNaN(t)?"Total":{0:"Correct",1:"Partially Correct",2:"Wrong"}[t]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-submission-chart"]],inputs:{submissionStats:"submissionStats"},decls:3,vars:4,consts:[[3,"value","activeItemIndex","content","colorHandler","activeItemIndexChange"],["content",""]],template:function(t,r){if(1&t&&(i.\u0275\u0275elementStart(0,"tui-ring-chart",0),i.\u0275\u0275listener("activeItemIndexChange",function(s){return r.activeItemIndex=s}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(1,h,4,2,"ng-template",null,1,i.\u0275\u0275templateRefExtractor)),2&t){const o=i.\u0275\u0275reference(2);i.\u0275\u0275property("value",r.values())("activeItemIndex",r.activeItemIndex)("content",o)("colorHandler",r.color)}},directives:[u.i],styles:[""]}),e})();function j(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2(" ",t.text," : ",t.value," ")}}function ee(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t," ")}}function fe(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div")(1,"div",3),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",4),i.\u0275\u0275element(4,"progress",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275text(6,"Submission Stats"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",8),i.\u0275\u0275element(8,"app-submission-chart",9)(9,"app-submission-chart",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div",7),i.\u0275\u0275text(11,"Question Stats"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",4),i.\u0275\u0275text(13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"div",4),i.\u0275\u0275text(15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",4),i.\u0275\u0275text(17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"div",4),i.\u0275\u0275text(19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",7),i.\u0275\u0275text(21,"Types of Error"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(22,j,2,2,"div",10),i.\u0275\u0275elementStart(23,"div",7),i.\u0275\u0275text(24,"Error Messages"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(25,ee,2,1,"div",10),i.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index,o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("Item ",r+1,""),i.\u0275\u0275advance(2),i.\u0275\u0275property("max",o.getGoalItem(t).number_of_questions)("value",o.getGoalItem(t).progress),i.\u0275\u0275advance(4),i.\u0275\u0275property("submissionStats",o.goal.stats[t].submissions),i.\u0275\u0275advance(1),i.\u0275\u0275property("submissionStats",o.goal.stats[t].old_submissions),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Total questions attempt: ",o.goal.stats[t].submissions.total_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Total questions solved: ",o.goal.stats[t].submissions.correct_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Previously questions attempt: ",o.goal.stats[t].old_submissions.total_questions," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" Previously questions solved: ",o.goal.stats[t].old_submissions.correct_questions," "),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",o.errorMessages(t)),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",o.goal.stats[t].submissions.error_messages)}}function _e(e,n){if(1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275text(2,"Goal Results"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275text(4,"Total Progress"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",4),i.\u0275\u0275element(6,"progress",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,fe,26,11,"div",6),i.\u0275\u0275elementEnd()),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(6),i.\u0275\u0275property("max",t.goal.number_of_questions)("value",t.goal.progress),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.goalItemIds())}}let Me=(()=>{class e{constructor(t,r){this.goalService=t,this.activatedRoute=r}ngOnInit(){this.goalService.getGoal(this.activatedRoute.snapshot.params.goalId).subscribe(r=>{this.goal=r})}getGoalItem(t){return this.goal.goal_items.find(r=>r.id===t)}goalItemIds(){return Object.keys(this.goal.stats).map(t=>parseInt(t))}errorMessages(t){return Object.entries(this.goal.stats[t].submissions.messages).map(([r,o])=>({text:r,value:o}))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(lc),i.\u0275\u0275directiveInject(ne.gz))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-goal"]],decls:1,vars:1,consts:[["class","tui-container tui-container_adaptive",4,"ngIf"],[1,"tui-container","tui-container_adaptive"],[1,"tui-text_h2","tui-space_top-5"],[1,"tui-text_h3","tui-space_top-5"],[1,"tui-space_top-2"],["tuiProgressBar","",1,"progress",3,"max","value"],[4,"ngFor","ngForOf"],[1,"tui-text_h4","tui-space_top-5"],[1,"tui-space_top-2","flex"],[3,"submissionStats"],["class","tui-space_top-2",4,"ngFor","ngForOf"]],template:function(t,r){1&t&&i.\u0275\u0275template(0,_e,8,3,"div",0),2&t&&i.\u0275\u0275property("ngIf",r.goal)},directives:[L.O5,Ag,L.sg,P],styles:[".flex[_ngcontent-%COMP%]{display:flex}"]}),e})();const Qe={Open:"OPEN",Private:"CODE"};let Ze=(()=>{class e{static createCourseForm(){return(new q.FormBuilder).group({name:new q.FormControl("",[q.Validators.required]),description:new q.FormControl("",[q.Validators.required]),url:new q.FormControl("",[q.Validators.required,q.Validators.pattern("(https?://)([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]),date:new q.FormControl(new lt.VR(lt.TU.currentLocal(),lt.TU.currentLocal().append({day:7})),[q.Validators.required]),registrationMode:new q.FormControl("",[q.Validators.required]),registrationCode:new q.FormControl("")},{validator:e.dateValidator})}static formatCourseFormData(t){return{name:t.get("name").value,description:t.get("description").value,url:t.get("url").value,start_date:this.dateToLocal(t.get("date").value.from),end_date:this.dateToLocal(t.get("date").value.to),registration_mode:Qe[t.get("registrationMode").value],registration_code:t.get("registrationCode").value,token:"0",course_id:0}}static dateToLocal(t){return new Date(t.toLocalNativeDate().getTime())}}return e.dateValidator=n=>{const t=n.get("date").value;return t.from&&t.to?null:{forbiddenDateRange:!0}},e})();function it(e,n){if(1&e&&i.\u0275\u0275element(0,"tui-data-list-wrapper",17),2&e){const t=i.\u0275\u0275nextContext();i.\u0275\u0275property("items",t.registrationModes)}}let _t=(()=>{class e{constructor(t,r,o){this.courseService=t,this.notificationsService=r,this.router=o,this.registrationModes=["Open","Private"],this.formGroup=Ze.createCourseForm()}onSubmit(){this.courseService.createCourse(Ze.formatCourseFormData(this.formGroup)).subscribe(t=>{this.notificationsService.show("Course created successfully!",{status:"success"}).subscribe(),this.router.navigate(["/course",t.id])})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ge.N),i.\u0275\u0275directiveInject(Xt.$F),i.\u0275\u0275directiveInject(ne.F0))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-course-create"]],features:[i.\u0275\u0275ProvidersFeature([{provide:ir.Z4,useValue:{pattern:"Please enter a valid url starting with http:// or https://"}}])],decls:37,vars:2,consts:[[1,"tui-container","tui-container_adaptive"],[3,"formGroup","ngSubmit"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name"],["formControlName","description"],["formControlName","url","type","url"],["formControlName","url"],["formControlName","date"],["formControlName","registrationMode"],["tuiTextfield","","placeholder","Select registration mode"],[3,"items",4,"tuiDataList"],[1,"tui-form__field-note"],["formControlName","registrationCode"],[1,"tui-form__buttons"],["tuiButton","","size","m","type","submit",1,"tui-form__button",3,"disabled"],["tuiButton","","type","button","appearance","flat","size","m","routerLink","/",1,"tui-form__button"],[3,"items"]],template:function(t,r){1&t&&(i.\u0275\u0275elementStart(0,"div",0)(1,"form",1),i.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275text(3," Create a Course "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),i.\u0275\u0275text(6,"Course Name"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(7,"tui-field-error",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",3)(9,"tui-text-area",5),i.\u0275\u0275text(10,"Course Description"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(11,"tui-field-error",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",3)(13,"tui-input",6),i.\u0275\u0275text(14,"Course URL"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(15,"tui-field-error",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"div",3)(17,"tui-input-date-range",8),i.\u0275\u0275text(18,"Course Date"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(19,"tui-field-error",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(20,"div",3)(21,"tui-select",9),i.\u0275\u0275text(22," Registration Mode "),i.\u0275\u0275element(23,"input",10),i.\u0275\u0275template(24,it,1,1,"tui-data-list-wrapper",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(25,"tui-field-error",9),i.\u0275\u0275elementStart(26,"div",12),i.\u0275\u0275text(27,"Everyone can join an open course, while only the ones with the access code can join a private course. "),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(28,"div",3)(29,"tui-input",13),i.\u0275\u0275text(30,"Access Code"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(31,"tui-field-error",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(32,"div",14)(33,"button",15),i.\u0275\u0275text(34," Submit "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(35,"button",16),i.\u0275\u0275text(36," Cancel "),i.\u0275\u0275elementEnd()()()()),2&t&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("formGroup",r.formGroup),i.\u0275\u0275advance(32),i.\u0275\u0275property("disabled",r.formGroup.invalid))},directives:[q.\u0275NgNoValidate,q.NgControlStatusGroup,q.FormGroupDirective,he.K3,he.wU,q.NgControlStatus,q.FormControlName,Xn.y,du.Jl,du.eQ,fu,rn,$i.uJ,$i.OI,cr.MB,mr.gX,Eo.eC,Ot.v0,ne.rH],styles:[""]}),e})();const Nt=[{path:"",component:mt,canActivate:[Y.a]},{path:"create",component:_t,canActivate:[Y.a]},{path:":courseId",component:qh,canActivate:[Y.a]},{path:":courseId/register",component:Dt,canActivate:[Y.a]},{path:":courseId/new-event",component:Jf,canActivate:[Y.a]},{path:":courseId/new-event/:eventId",component:Jf,canActivate:[Y.a]},{path:":courseId/event/:eventId",component:ff,canActivate:[Y.a]},{path:":courseId/problem/:id",component:ic.z,canActivate:[Y.a]},{path:":courseId/event/:eventId/problem/:id",component:ic.z,canActivate:[Y.a]},{path:":courseId/practice/category/:categoryId",component:Zp,canActivate:[Y.a]},{path:":courseId/goal",component:tg,canActivate:[Y.a]},{path:":courseId/goal/create",component:gc,canActivate:[Y.a]},{path:":courseId/goal/:goalId",component:Me,canActivate:[Y.a]}];let Qt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[ne.Bz.forChild(Nt)],ne.Bz]}),e})();var mn=f(16995);f(41065),f(35379),f(18583),f(92198);let bv=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[L.ez,Mi.E]]}),e})();var Cv=f(96560),wv=f(22079),Sv=f(70228),Tv=f(38333),Ev=f(66235),Pv=f(24736),Iv=f(63821),Av=f(68476),Mv=f(54554);let Ov=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[Os,ge.N,xf],imports:[[L.ez,Ev.J,Qt,q.FormsModule,mn._l,Pv.D,Iv.ProblemsModule,q.ReactiveFormsModule,Mv.l,Yo.QA,Ar.iK,Xl.A,wf.Jm,Ot.fN,Zn,Yl.s,mr.pc,Eo.zX,cs.up,Cv.S,Xn.C,Fe.p,Va.jh,Ul.$H,hg,Xf,he.Qf,yg,Np,La.y,tn.j,wv.dS,Fr.z,Sv.z,un.Hi,a,u.R,$i.Jy,Av.T,bv,Mi.E,Po.jz,sn.$$,zo.d3,Tv.qE.forRoot(),du.U1,ye.cn]]}),e})()},71066:(E,W,f)=>{var g,v,T;T="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,g=[f(29610),f(58259),W],void 0!==(v=function(O,M,B){T.Backbone=function(S,T,x,A){var O=S.Backbone,M=Array.prototype.slice;T.VERSION="1.4.1",T.$=A,T.noConflict=function(){return S.Backbone=O,this},T.emulateHTTP=!1,T.emulateJSON=!1;var L,B=T.Events={},H=/\s+/,Y=function(R,G,re,xe,$e){var pt,We=0;if(re&&"object"==typeof re)for((void 0!==xe&&"context"in $e&&void 0===$e.context&&($e.context=xe),pt=x.keys(re));We<pt.length;We++)G=Y(R,G,pt[We],re[pt[We]],$e);else if(re&&H.test(re))for(pt=re.split(H);We<pt.length;We++)G=R(G,pt[We],xe,$e);else G=R(G,re,xe,$e);return G};B.on=function(R,G,re){return this._events=Y(ne,this._events||{},R,G,{context:re,ctx:this,listening:L}),L&&((this._listeners||(this._listeners={}))[L.id]=L,L.interop=!1),this},B.listenTo=function(R,G,re){if(!R)return this;var xe=R._listenId||(R._listenId=x.uniqueId("l")),$e=this._listeningTo||(this._listeningTo={}),We=L=$e[xe];We||(this._listenId||(this._listenId=x.uniqueId("l")),We=L=$e[xe]=new q(this,R));var pt=ce(R,G,re,this);if(L=void 0,pt)throw pt;return We.interop&&We.on(G,re),this};var ne=function(R,G,re,xe){if(re){var $e=R[G]||(R[G]=[]),We=xe.context,pt=xe.ctx,kt=xe.listening;kt&&kt.count++,$e.push({callback:re,context:We,ctx:We||pt,listening:kt})}return R},ce=function(R,G,re,xe){try{R.on(G,re,xe)}catch($e){return $e}};B.off=function(R,G,re){return this._events?(this._events=Y(i,this._events,R,G,{context:re,listeners:this._listeners}),this):this},B.stopListening=function(R,G,re){var xe=this._listeningTo;if(!xe)return this;for(var $e=R?[R._listenId]:x.keys(xe),We=0;We<$e.length;We++){var pt=xe[$e[We]];if(!pt)break;pt.obj.off(G,re,this),pt.interop&&pt.off(G,re)}return x.isEmpty(xe)&&(this._listeningTo=void 0),this};var i=function(R,G,re,xe){if(R){var kt,$e=xe.context,We=xe.listeners,pt=0;if(!G&&!$e&&!re){for(kt=x.keys(We);pt<kt.length;pt++)We[kt[pt]].cleanup();return}for(kt=G?[G]:x.keys(R);pt<kt.length;pt++){var Lt=R[G=kt[pt]];if(!Lt)break;for(var dn=[],wn=0;wn<Lt.length;wn++){var cn=Lt[wn];if(re&&re!==cn.callback&&re!==cn.callback._callback||$e&&$e!==cn.context)dn.push(cn);else{var ar=cn.listening;ar&&ar.off(G,re)}}dn.length?R[G]=dn:delete R[G]}return R}};B.once=function(R,G,re){var xe=Y(se,{},R,G,this.off.bind(this));return"string"==typeof R&&null==re&&(G=void 0),this.on(xe,G,re)},B.listenToOnce=function(R,G,re){var xe=Y(se,{},G,re,this.stopListening.bind(this,R));return this.listenTo(R,xe)};var se=function(R,G,re,xe){if(re){var $e=R[G]=x.once(function(){xe(G,$e),re.apply(this,arguments)});$e._callback=re}return R};B.trigger=function(R){if(!this._events)return this;for(var G=Math.max(0,arguments.length-1),re=Array(G),xe=0;xe<G;xe++)re[xe]=arguments[xe+1];return Y(ge,this._events,R,void 0,re),this};var ge=function(R,G,re,xe){if(R){var $e=R[G],We=R.all;$e&&We&&(We=We.slice()),$e&&he($e,xe),We&&he(We,[G].concat(xe))}return R},he=function(R,G){var re,xe=-1,$e=R.length,We=G[0],pt=G[1],kt=G[2];switch(G.length){case 0:for(;++xe<$e;)(re=R[xe]).callback.call(re.ctx);return;case 1:for(;++xe<$e;)(re=R[xe]).callback.call(re.ctx,We);return;case 2:for(;++xe<$e;)(re=R[xe]).callback.call(re.ctx,We,pt);return;case 3:for(;++xe<$e;)(re=R[xe]).callback.call(re.ctx,We,pt,kt);return;default:for(;++xe<$e;)(re=R[xe]).callback.apply(re.ctx,G);return}},q=function(R,G){this.id=R._listenId,this.listener=R,this.obj=G,this.interop=!0,this.count=0,this._events=void 0};q.prototype.on=B.on,q.prototype.off=function(R,G){var re;this.interop?(this._events=Y(i,this._events,R,G,{context:void 0,listeners:void 0}),re=!this._events):(this.count--,re=0===this.count),re&&this.cleanup()},q.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},B.bind=B.on,B.unbind=B.off,x.extend(T,B);var ye=T.Model=function(R,G){var re=R||{};G||(G={}),this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},G.collection&&(this.collection=G.collection),G.parse&&(re=this.parse(re,G)||{});var xe=x.result(this,"defaults");re=x.defaults(x.extend({},xe,re),xe),this.set(re,G),this.changed={},this.initialize.apply(this,arguments)};x.extend(ye.prototype,B,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(R){return x.clone(this.attributes)},sync:function(){return T.sync.apply(this,arguments)},get:function(R){return this.attributes[R]},escape:function(R){return x.escape(this.get(R))},has:function(R){return null!=this.get(R)},matches:function(R){return!!x.iteratee(R,this)(this.attributes)},set:function(R,G,re){if(null==R)return this;var xe;if("object"==typeof R?(xe=R,re=G):(xe={})[R]=G,re||(re={}),!this._validate(xe,re))return!1;var $e=re.unset,We=re.silent,pt=[],kt=this._changing;this._changing=!0,kt||(this._previousAttributes=x.clone(this.attributes),this.changed={});var Lt=this.attributes,dn=this.changed,wn=this._previousAttributes;for(var cn in xe)x.isEqual(Lt[cn],G=xe[cn])||pt.push(cn),x.isEqual(wn[cn],G)?delete dn[cn]:dn[cn]=G,$e?delete Lt[cn]:Lt[cn]=G;if(this.idAttribute in xe){var ar=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,ar,re)}if(!We){pt.length&&(this._pending=re);for(var Jn=0;Jn<pt.length;Jn++)this.trigger("change:"+pt[Jn],this,Lt[pt[Jn]],re)}if(kt)return this;if(!We)for(;this._pending;)re=this._pending,this._pending=!1,this.trigger("change",this,re);return this._pending=!1,this._changing=!1,this},unset:function(R,G){return this.set(R,void 0,x.extend({},G,{unset:!0}))},clear:function(R){var G={};for(var re in this.attributes)G[re]=void 0;return this.set(G,x.extend({},R,{unset:!0}))},hasChanged:function(R){return null==R?!x.isEmpty(this.changed):x.has(this.changed,R)},changedAttributes:function(R){if(!R)return!!this.hasChanged()&&x.clone(this.changed);var xe,G=this._changing?this._previousAttributes:this.attributes,re={};for(var $e in R){var We=R[$e];x.isEqual(G[$e],We)||(re[$e]=We,xe=!0)}return!!xe&&re},previous:function(R){return null!=R&&this._previousAttributes?this._previousAttributes[R]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(R){R=x.extend({parse:!0},R);var G=this,re=R.success;return R.success=function(xe){var $e=R.parse?G.parse(xe,R):xe;if(!G.set($e,R))return!1;re&&re.call(R.context,G,xe,R),G.trigger("sync",G,xe,R)},Zt(this,R),this.sync("read",this,R)},save:function(R,G,re){var xe;null==R||"object"==typeof R?(xe=R,re=G):(xe={})[R]=G;var $e=(re=x.extend({validate:!0,parse:!0},re)).wait;if(xe&&!$e){if(!this.set(xe,re))return!1}else if(!this._validate(xe,re))return!1;var We=this,pt=re.success,kt=this.attributes;re.success=function(wn){We.attributes=kt;var cn=re.parse?We.parse(wn,re):wn;if($e&&(cn=x.extend({},xe,cn)),cn&&!We.set(cn,re))return!1;pt&&pt.call(re.context,We,wn,re),We.trigger("sync",We,wn,re)},Zt(this,re),xe&&$e&&(this.attributes=x.extend({},kt,xe));var Lt=this.isNew()?"create":re.patch?"patch":"update";"patch"===Lt&&!re.attrs&&(re.attrs=xe);var dn=this.sync(Lt,this,re);return this.attributes=kt,dn},destroy:function(R){R=R?x.clone(R):{};var G=this,re=R.success,xe=R.wait,$e=function(){G.stopListening(),G.trigger("destroy",G,G.collection,R)};R.success=function(pt){xe&&$e(),re&&re.call(R.context,G,pt,R),G.isNew()||G.trigger("sync",G,pt,R)};var We=!1;return this.isNew()?x.defer(R.success):(Zt(this,R),We=this.sync("delete",this,R)),xe||$e(),We},url:function(){var R=x.result(this,"urlRoot")||x.result(this.collection,"url")||ln();if(this.isNew())return R;var G=this.get(this.idAttribute);return R.replace(/[^\/]$/,"$&/")+encodeURIComponent(G)},parse:function(R,G){return R},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(R){return this._validate({},x.extend({},R,{validate:!0}))},_validate:function(R,G){if(!G.validate||!this.validate)return!0;R=x.extend({},this.attributes,R);var re=this.validationError=this.validate(R,G)||null;return!re||(this.trigger("invalid",this,re,x.extend(G,{validationError:re})),!1)}});var Ee=T.Collection=function(R,G){G||(G={}),this.preinitialize.apply(this,arguments),G.model&&(this.model=G.model),void 0!==G.comparator&&(this.comparator=G.comparator),this._reset(),this.initialize.apply(this,arguments),R&&this.reset(R,x.extend({silent:!0},G))},Fe={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},je=function(R,G,re){re=Math.min(Math.max(re,0),R.length);var We,xe=Array(R.length-re),$e=G.length;for(We=0;We<xe.length;We++)xe[We]=R[We+re];for(We=0;We<$e;We++)R[We+re]=G[We];for(We=0;We<xe.length;We++)R[We+$e+re]=xe[We]};x.extend(Ee.prototype,B,{model:ye,preinitialize:function(){},initialize:function(){},toJSON:function(R){return this.map(function(G){return G.toJSON(R)})},sync:function(){return T.sync.apply(this,arguments)},add:function(R,G){return this.set(R,x.extend({merge:!1},G,b))},remove:function(R,G){G=x.extend({},G);var re=!x.isArray(R);R=re?[R]:R.slice();var xe=this._removeModels(R,G);return!G.silent&&xe.length&&(G.changes={added:[],merged:[],removed:xe},this.trigger("update",this,G)),re?xe[0]:xe},set:function(R,G){if(null!=R){(G=x.extend({},Fe,G)).parse&&!this._isModel(R)&&(R=this.parse(R,G)||[]);var re=!x.isArray(R);R=re?[R]:R.slice();var xe=G.at;null!=xe&&(xe=+xe),xe>this.length&&(xe=this.length),xe<0&&(xe+=this.length+1);var Fn,Et,$e=[],We=[],pt=[],kt=[],Lt={},dn=G.add,wn=G.merge,cn=G.remove,ar=!1,Jn=this.comparator&&null==xe&&!1!==G.sort,oi=x.isString(this.comparator)?this.comparator:null;for(Et=0;Et<R.length;Et++){var Un=this.get(Fn=R[Et]);if(Un){if(wn&&Fn!==Un){var tr=this._isModel(Fn)?Fn.attributes:Fn;G.parse&&(tr=Un.parse(tr,G)),Un.set(tr,G),pt.push(Un),Jn&&!ar&&(ar=Un.hasChanged(oi))}Lt[Un.cid]||(Lt[Un.cid]=!0,$e.push(Un)),R[Et]=Un}else dn&&(Fn=R[Et]=this._prepareModel(Fn,G))&&(We.push(Fn),this._addReference(Fn,G),Lt[Fn.cid]=!0,$e.push(Fn))}if(cn){for(Et=0;Et<this.length;Et++)Lt[(Fn=this.models[Et]).cid]||kt.push(Fn);kt.length&&this._removeModels(kt,G)}var br=!1;if($e.length&&!Jn&&dn&&cn?(br=this.length!==$e.length||x.some(this.models,function(pr,dr){return pr!==$e[dr]}),this.models.length=0,je(this.models,$e,0),this.length=this.models.length):We.length&&(Jn&&(ar=!0),je(this.models,We,null==xe?this.length:xe),this.length=this.models.length),ar&&this.sort({silent:!0}),!G.silent){for(Et=0;Et<We.length;Et++)null!=xe&&(G.index=xe+Et),(Fn=We[Et]).trigger("add",Fn,this,G);(ar||br)&&this.trigger("sort",this,G),(We.length||kt.length||pt.length)&&(G.changes={added:We,removed:kt,merged:pt},this.trigger("update",this,G))}return re?R[0]:R}},reset:function(R,G){G=G?x.clone(G):{};for(var re=0;re<this.models.length;re++)this._removeReference(this.models[re],G);return G.previousModels=this.models,this._reset(),R=this.add(R,x.extend({silent:!0},G)),G.silent||this.trigger("reset",this,G),R},push:function(R,G){return this.add(R,x.extend({at:this.length},G))},pop:function(R){var G=this.at(this.length-1);return this.remove(G,R)},unshift:function(R,G){return this.add(R,x.extend({at:0},G))},shift:function(R){var G=this.at(0);return this.remove(G,R)},slice:function(){return M.apply(this.models,arguments)},get:function(R){if(null!=R)return this._byId[R]||this._byId[this.modelId(this._isModel(R)?R.attributes:R,R.idAttribute)]||R.cid&&this._byId[R.cid]},has:function(R){return null!=this.get(R)},at:function(R){return R<0&&(R+=this.length),this.models[R]},where:function(R,G){return this[G?"find":"filter"](R)},findWhere:function(R){return this.where(R,!0)},sort:function(R){var G=this.comparator;if(!G)throw new Error("Cannot sort a set without a comparator");R||(R={});var re=G.length;return x.isFunction(G)&&(G=G.bind(this)),1===re||x.isString(G)?this.models=this.sortBy(G):this.models.sort(G),R.silent||this.trigger("sort",this,R),this},pluck:function(R){return this.map(R+"")},fetch:function(R){var G=(R=x.extend({parse:!0},R)).success,re=this;return R.success=function(xe){re[R.reset?"reset":"set"](xe,R),G&&G.call(R.context,re,xe,R),re.trigger("sync",re,xe,R)},Zt(this,R),this.sync("read",this,R)},create:function(R,G){var re=(G=G?x.clone(G):{}).wait;if(!(R=this._prepareModel(R,G)))return!1;re||this.add(R,G);var xe=this,$e=G.success;return G.success=function(We,pt,kt){re&&xe.add(We,kt),$e&&$e.call(kt.context,We,pt,kt)},R.save(null,G),R},parse:function(R,G){return R},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(R,G){return R[G||this.model.prototype.idAttribute||"id"]},values:function(){return new et(this,ot)},keys:function(){return new et(this,ut)},entries:function(){return new et(this,mt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(R,G){return this._isModel(R)?(R.collection||(R.collection=this),R):((G=G?x.clone(G):{}).collection=this,(re=this.model.prototype?new this.model(R,G):this.model(R,G)).validationError?(this.trigger("invalid",this,re.validationError,G),!1):re);var re},_removeModels:function(R,G){for(var re=[],xe=0;xe<R.length;xe++){var $e=this.get(R[xe]);if($e){var We=this.indexOf($e);this.models.splice(We,1),this.length--,delete this._byId[$e.cid];var pt=this.modelId($e.attributes,$e.idAttribute);null!=pt&&delete this._byId[pt],G.silent||(G.index=We,$e.trigger("remove",$e,this,G)),re.push($e),this._removeReference($e,G)}}return re},_isModel:function(R){return R instanceof ye},_addReference:function(R,G){this._byId[R.cid]=R;var re=this.modelId(R.attributes,R.idAttribute);null!=re&&(this._byId[re]=R),R.on("all",this._onModelEvent,this)},_removeReference:function(R,G){delete this._byId[R.cid];var re=this.modelId(R.attributes,R.idAttribute);null!=re&&delete this._byId[re],this===R.collection&&delete R.collection,R.off("all",this._onModelEvent,this)},_onModelEvent:function(R,G,re,xe){if(G){if(("add"===R||"remove"===R)&&re!==this)return;if("destroy"===R&&this.remove(G,xe),"changeId"===R){var $e=this.modelId(G.previousAttributes(),G.idAttribute),We=this.modelId(G.attributes,G.idAttribute);null!=$e&&delete this._byId[$e],null!=We&&(this._byId[We]=G)}}this.trigger.apply(this,arguments)}});var tt="function"==typeof Symbol&&Symbol.iterator;tt&&(Ee.prototype[tt]=Ee.prototype.values);var et=function(R,G){this._collection=R,this._kind=G,this._index=0},ot=1,ut=2,mt=3;tt&&(et.prototype[tt]=function(){return this}),et.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var G,R=this._collection.at(this._index);if(this._index++,this._kind===ot)G=R;else{var re=this._collection.modelId(R.attributes,R.idAttribute);G=this._kind===ut?re:[re,R]}return{value:G,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var At=T.View=function(R){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(R,un)),this._ensureElement(),this.initialize.apply(this,arguments)},Xt=/^(\S+)\s*(.*)$/,un=["model","collection","el","id","attributes","className","tagName","events"];x.extend(At.prototype,B,{tagName:"div",$:function(R){return this.$el.find(R)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(R){return this.undelegateEvents(),this._setElement(R),this.delegateEvents(),this},_setElement:function(R){this.$el=R instanceof T.$?R:T.$(R),this.el=this.$el[0]},delegateEvents:function(R){if(R||(R=x.result(this,"events")),!R)return this;for(var G in this.undelegateEvents(),R){var re=R[G];if(x.isFunction(re)||(re=this[re]),re){var xe=G.match(Xt);this.delegate(xe[1],xe[2],re.bind(this))}}return this},delegate:function(R,G,re){return this.$el.on(R+".delegateEvents"+this.cid,G,re),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(R,G,re){return this.$el.off(R+".delegateEvents"+this.cid,G,re),this},_createElement:function(R){return document.createElement(R)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var R=x.extend({},x.result(this,"attributes"));this.id&&(R.id=x.result(this,"id")),this.className&&(R.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(R)}},_setAttributes:function(R){this.$el.attr(R)}});var Xn=function(R,G,re,xe){x.each(re,function($e,We){G[We]&&(R.prototype[We]=function(R,G,re,xe){switch(G){case 1:return function(){return R[re](this[xe])};case 2:return function($e){return R[re](this[xe],$e)};case 3:return function($e,We){return R[re](this[xe],Fr($e,this),We)};case 4:return function($e,We,pt){return R[re](this[xe],Fr($e,this),We,pt)};default:return function(){var $e=M.call(arguments);return $e.unshift(this[xe]),R[re].apply(R,$e)}}}(G,$e,We,xe))})},Fr=function(R,G){return x.isFunction(R)?R:x.isObject(R)&&!G._isModel(R)?ii(R):x.isString(R)?function(re){return re.get(R)}:R},ii=function(R){var G=x.matches(R);return function(re){return G(re.attributes)}};x.each([[Ee,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[ye,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(R){var G=R[0],re=R[1],xe=R[2];G.mixin=function($e){var We=x.reduce(x.functions($e),function(pt,kt){return pt[kt]=0,pt},{});Xn(G,$e,We,xe)},Xn(G,x,re,xe)}),T.sync=function(R,G,re){var xe=Vr[R];x.defaults(re||(re={}),{emulateHTTP:T.emulateHTTP,emulateJSON:T.emulateJSON});var $e={type:xe,dataType:"json"};if(re.url||($e.url=x.result(G,"url")||ln()),null==re.data&&G&&("create"===R||"update"===R||"patch"===R)&&($e.contentType="application/json",$e.data=JSON.stringify(re.attrs||G.toJSON(re))),re.emulateJSON&&($e.contentType="application/x-www-form-urlencoded",$e.data=$e.data?{model:$e.data}:{}),re.emulateHTTP&&("PUT"===xe||"DELETE"===xe||"PATCH"===xe)){$e.type="POST",re.emulateJSON&&($e.data._method=xe);var We=re.beforeSend;re.beforeSend=function(Lt){if(Lt.setRequestHeader("X-HTTP-Method-Override",xe),We)return We.apply(this,arguments)}}"GET"!==$e.type&&!re.emulateJSON&&($e.processData=!1);var pt=re.error;re.error=function(Lt,dn,wn){re.textStatus=dn,re.errorThrown=wn,pt&&pt.call(re.context,Lt,dn,wn)};var kt=re.xhr=T.ajax(x.extend($e,re));return G.trigger("request",G,kt,re),kt};var Vr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};T.ajax=function(){return T.$.ajax.apply(T.$,arguments)};var er=T.Router=function(R){R||(R={}),this.preinitialize.apply(this,arguments),R.routes&&(this.routes=R.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ue=/\((.*?)\)/g,qe=/(\(\?)?:\w+/g,st=/\*\w+/g,xt=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(er.prototype,B,{preinitialize:function(){},initialize:function(){},route:function(R,G,re){x.isRegExp(R)||(R=this._routeToRegExp(R)),x.isFunction(G)&&(re=G,G=""),re||(re=this[G]);var xe=this;return T.history.route(R,function($e){var We=xe._extractParameters(R,$e);!1!==xe.execute(re,We,G)&&(xe.trigger.apply(xe,["route:"+G].concat(We)),xe.trigger("route",G,We),T.history.trigger("route",xe,G,We))}),this},execute:function(R,G,re){R&&R.apply(this,G)},navigate:function(R,G){return T.history.navigate(R,G),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var R,G=x.keys(this.routes);null!=(R=G.pop());)this.route(R,this.routes[R])}},_routeToRegExp:function(R){return R=R.replace(xt,"\\$&").replace(Ue,"(?:$1)?").replace(qe,function(G,re){return re?G:"([^/?]+)"}).replace(st,"([^?]*?)"),new RegExp("^"+R+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(R,G){var re=R.exec(G).slice(1);return x.map(re,function(xe,$e){return $e===re.length-1?xe||null:xe?decodeURIComponent(xe):null})}});var Dt=T.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},sn=/^[#\/]|\s+$/g,Mt=/^\/+|\/+$/g,or=/#.*$/;Dt.started=!1,x.extend(Dt.prototype,B,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(R){return decodeURI(R.replace(/%25/g,"%2525"))},getSearch:function(){var R=this.location.href.replace(/#.*/,"").match(/\?.+/);return R?R[0]:""},getHash:function(R){var G=(R||this).location.href.match(/#(.*)$/);return G?G[1]:""},getPath:function(){var R=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===R.charAt(0)?R.slice(1):R},getFragment:function(R){return null==R&&(R=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),R.replace(sn,"")},start:function(R){if(Dt.started)throw new Error("Backbone.history has already been started");if(Dt.started=!0,this.options=x.extend({root:"/"},this.options,R),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Mt,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var G=this.root.slice(0,-1)||"/";return this.location.replace(G+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var re=document.body,xe=re.insertBefore(this.iframe,re.firstChild).contentWindow;xe.document.open(),xe.document.close(),xe.location.hash="#"+this.fragment}var $e=window.addEventListener||function(We,pt){return attachEvent("on"+We,pt)};if(this._usePushState?$e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?$e("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var R=window.removeEventListener||function(G,re){return detachEvent("on"+G,re)};this._usePushState?R("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&R("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Dt.started=!1},route:function(R,G){this.handlers.unshift({route:R,callback:G})},checkUrl:function(R){var G=this.getFragment();if(G===this.fragment&&this.iframe&&(G=this.getHash(this.iframe.contentWindow)),G===this.fragment)return!1;this.iframe&&this.navigate(G),this.loadUrl()},loadUrl:function(R){return!!this.matchRoot()&&(R=this.fragment=this.getFragment(R),x.some(this.handlers,function(G){if(G.route.test(R))return G.callback(R),!0}))},navigate:function(R,G){if(!Dt.started)return!1;(!G||!0===G)&&(G={trigger:!!G}),R=this.getFragment(R||"");var re=this.root;(""===R||"?"===R.charAt(0))&&(re=re.slice(0,-1)||"/");var xe=re+R;R=R.replace(or,"");var $e=this.decodeFragment(R);if(this.fragment!==$e){if(this.fragment=$e,this._usePushState)this.history[G.replace?"replaceState":"pushState"]({},document.title,xe);else{if(!this._wantsHashChange)return this.location.assign(xe);if(this._updateHash(this.location,R,G.replace),this.iframe&&R!==this.getHash(this.iframe.contentWindow)){var We=this.iframe.contentWindow;G.replace||(We.document.open(),We.document.close()),this._updateHash(We.location,R,G.replace)}}if(G.trigger)return this.loadUrl(R)}},_updateHash:function(R,G,re){if(re){var xe=R.href.replace(/(javascript:|#).*$/,"");R.replace(xe+"#"+G)}else R.hash="#"+G}}),T.history=new Dt;ye.extend=Ee.extend=er.extend=At.extend=Dt.extend=function(R,G){var xe,re=this;return xe=R&&x.has(R,"constructor")?R.constructor:function(){return re.apply(this,arguments)},x.extend(xe,re,G),xe.prototype=x.create(re.prototype,R),xe.prototype.constructor=xe,xe.__super__=re.prototype,xe};var ln=function(){throw new Error('A "url" property or function must be specified')},Zt=function(R,G){var re=G.error;G.error=function(xe){re&&re.call(G.context,R,xe,G),R.trigger("error",R,xe,G)}};return T}(T,B,O,M)}.apply(W,g))&&(E.exports=v)},59695:(E,W,f)=>{E.exports={graphlib:f(36456),layout:f(14850),debug:f(71914),util:{time:f(11510).time,notime:f(11510).notime},version:f(28126)}},12234:(E,W,f)=>{"use strict";var g=f(45760),v=f(67365);E.exports={run:function S(A){var O="greedy"===A.graph().acyclicer?v(A,function M(B){return function(H){return B.edge(H).weight}}(A)):function T(A){var O=[],M={},B={};return g.forEach(A.nodes(),function H(L){g.has(B,L)||(B[L]=!0,M[L]=!0,g.forEach(A.outEdges(L),function(Y){g.has(M,Y.w)?O.push(Y):H(Y.w)}),delete M[L])}),O}(A);g.forEach(O,function(B){var H=A.edge(B);A.removeEdge(B),H.forwardName=B.name,H.reversed=!0,A.setEdge(B.w,B.v,H,g.uniqueId("rev"))})},undo:function x(A){g.forEach(A.edges(),function(O){var M=A.edge(O);if(M.reversed){A.removeEdge(O);var B=M.forwardName;delete M.reversed,delete M.forwardName,A.setEdge(O.w,O.v,M,B)}})}}},79999:(E,W,f)=>{var g=f(45760),v=f(11510);function T(x,A,O,M,B,H){var Y=B[A][H-1],ne=v.addDummyNode(x,"border",{width:0,height:0,rank:H,borderType:A},O);B[A][H]=ne,x.setParent(ne,M),Y&&x.setEdge(Y,ne,{weight:1})}E.exports=function S(x){g.forEach(x.children(),function A(O){var M=x.children(O),B=x.node(O);if(M.length&&g.forEach(M,A),g.has(B,"minRank")){B.borderLeft=[],B.borderRight=[];for(var H=B.minRank,L=B.maxRank+1;H<L;++H)T(x,"borderLeft","_bl",O,B,H),T(x,"borderRight","_br",O,B,H)}})}},83870:(E,W,f)=>{"use strict";var g=f(45760);function T(H){g.forEach(H.nodes(),function(L){x(H.node(L))}),g.forEach(H.edges(),function(L){x(H.edge(L))})}function x(H){var L=H.width;H.width=H.height,H.height=L}function O(H){H.y=-H.y}function B(H){var L=H.x;H.x=H.y,H.y=L}E.exports={adjust:function v(H){var L=H.graph().rankdir.toLowerCase();("lr"===L||"rl"===L)&&T(H)},undo:function S(H){var L=H.graph().rankdir.toLowerCase();("bt"===L||"rl"===L)&&function A(H){g.forEach(H.nodes(),function(L){O(H.node(L))}),g.forEach(H.edges(),function(L){var Y=H.edge(L);g.forEach(Y.points,O),g.has(Y,"y")&&O(Y)})}(H),("lr"===L||"rl"===L)&&(function M(H){g.forEach(H.nodes(),function(L){B(H.node(L))}),g.forEach(H.edges(),function(L){var Y=H.edge(L);g.forEach(Y.points,B),g.has(Y,"x")&&B(Y)})}(H),T(H))}}},3226:E=>{function W(){var v={};v._next=v._prev=v,this._sentinel=v}function f(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function g(v,S){if("_next"!==v&&"_prev"!==v)return S}E.exports=W,W.prototype.dequeue=function(){var v=this._sentinel,S=v._prev;if(S!==v)return f(S),S},W.prototype.enqueue=function(v){var S=this._sentinel;v._prev&&v._next&&f(v),v._next=S._next,S._next._prev=v,S._next=v,v._prev=S},W.prototype.toString=function(){for(var v=[],S=this._sentinel,T=S._prev;T!==S;)v.push(JSON.stringify(T,g)),T=T._prev;return"["+v.join(", ")+"]"}},71914:(E,W,f)=>{var g=f(45760),v=f(11510),S=f(36456).Graph;E.exports={debugOrdering:function T(x){var A=v.buildLayerMatrix(x),O=new S({compound:!0,multigraph:!0}).setGraph({});return g.forEach(x.nodes(),function(M){O.setNode(M,{label:M}),O.setParent(M,"layer"+x.node(M).rank)}),g.forEach(x.edges(),function(M){O.setEdge(M.v,M.w,{},M.name)}),g.forEach(A,function(M,B){O.setNode("layer"+B,{rank:"same"}),g.reduce(M,function(L,Y){return O.setEdge(L,Y,{style:"invis"}),Y})}),O}}},36456:(E,W,f)=>{var g;try{g=f(85510)}catch(v){}g||(g=window.graphlib),E.exports=g},67365:(E,W,f)=>{var g=f(45760),v=f(36456).Graph,S=f(3226);E.exports=function x(H,L){if(H.nodeCount()<=1)return[];var Y=function M(H,L){var Y=new v,ne=0,ce=0;g.forEach(H.nodes(),function(ge){Y.setNode(ge,{v:ge,in:0,out:0})}),g.forEach(H.edges(),function(ge){var he=Y.edge(ge.v,ge.w)||0,q=L(ge);Y.setEdge(ge.v,ge.w,he+q),ce=Math.max(ce,Y.node(ge.v).out+=q),ne=Math.max(ne,Y.node(ge.w).in+=q)});var i=g.range(ce+ne+3).map(function(){return new S}),se=ne+1;return g.forEach(Y.nodes(),function(ge){B(i,se,Y.node(ge))}),{graph:Y,buckets:i,zeroIdx:se}}(H,L||T),ne=function A(H,L,Y){for(var se,ne=[],ce=L[L.length-1],i=L[0];H.nodeCount();){for(;se=i.dequeue();)O(H,L,Y,se);for(;se=ce.dequeue();)O(H,L,Y,se);if(H.nodeCount())for(var ge=L.length-2;ge>0;--ge)if(se=L[ge].dequeue()){ne=ne.concat(O(H,L,Y,se,!0));break}}return ne}(Y.graph,Y.buckets,Y.zeroIdx);return g.flatten(g.map(ne,function(ce){return H.outEdges(ce.v,ce.w)}),!0)};var T=g.constant(1);function O(H,L,Y,ne,ce){var i=ce?[]:void 0;return g.forEach(H.inEdges(ne.v),function(se){var ge=H.edge(se),he=H.node(se.v);ce&&i.push({v:se.v,w:se.w}),he.out-=ge,B(L,Y,he)}),g.forEach(H.outEdges(ne.v),function(se){var ge=H.edge(se),q=H.node(se.w);q.in-=ge,B(L,Y,q)}),H.removeNode(ne.v),i}function B(H,L,Y){Y.out?Y.in?H[Y.out-Y.in+L].enqueue(Y):H[H.length-1].enqueue(Y):H[0].enqueue(Y)}},14850:(E,W,f)=>{"use strict";var g=f(45760),v=f(12234),S=f(91496),T=f(94124),x=f(11510).normalizeRanks,A=f(60162),O=f(11510).removeEmptyRanks,M=f(1230),B=f(79999),H=f(83870),L=f(32974),Y=f(78226),ne=f(11510),ce=f(36456).Graph;E.exports=function i(Ue,qe){var st=qe&&qe.debugTiming?ne.time:ne.notime;st("layout",function(){var xt=st("  buildLayoutGraph",function(){return function et(Ue){var qe=new ce({multigraph:!0,compound:!0}),st=er(Ue.graph());return qe.setGraph(g.merge({},q,Vr(st,he),g.pick(st,ye))),g.forEach(Ue.nodes(),function(xt){var Dt=er(Ue.node(xt));qe.setNode(xt,g.defaults(Vr(Dt,Ee),Fe)),qe.setParent(xt,Ue.parent(xt))}),g.forEach(Ue.edges(),function(xt){var Dt=er(Ue.edge(xt));qe.setEdge(xt,g.merge({},je,Vr(Dt,b),g.pick(Dt,tt)))}),qe}(Ue)});st("  runLayout",function(){!function se(Ue,qe){qe("    makeSpaceForEdgeLabels",function(){!function ot(Ue){var qe=Ue.graph();qe.ranksep/=2,g.forEach(Ue.edges(),function(st){var xt=Ue.edge(st);xt.minlen*=2,"c"!==xt.labelpos.toLowerCase()&&("TB"===qe.rankdir||"BT"===qe.rankdir?xt.width+=xt.labeloffset:xt.height+=xt.labeloffset)})}(Ue)}),qe("    removeSelfEdges",function(){!function ii(Ue){g.forEach(Ue.edges(),function(qe){if(qe.v===qe.w){var st=Ue.node(qe.v);st.selfEdges||(st.selfEdges=[]),st.selfEdges.push({e:qe,label:Ue.edge(qe)}),Ue.removeEdge(qe)}})}(Ue)}),qe("    acyclic",function(){v.run(Ue)}),qe("    nestingGraph.run",function(){M.run(Ue)}),qe("    rank",function(){T(ne.asNonCompoundGraph(Ue))}),qe("    injectEdgeLabelProxies",function(){!function ut(Ue){g.forEach(Ue.edges(),function(qe){var st=Ue.edge(qe);if(st.width&&st.height){var xt=Ue.node(qe.v),Dt=Ue.node(qe.w);ne.addDummyNode(Ue,"edge-proxy",{rank:(Dt.rank-xt.rank)/2+xt.rank,e:qe},"_ep")}})}(Ue)}),qe("    removeEmptyRanks",function(){O(Ue)}),qe("    nestingGraph.cleanup",function(){M.cleanup(Ue)}),qe("    normalizeRanks",function(){x(Ue)}),qe("    assignRankMinMax",function(){!function mt(Ue){var qe=0;g.forEach(Ue.nodes(),function(st){var xt=Ue.node(st);xt.borderTop&&(xt.minRank=Ue.node(xt.borderTop).rank,xt.maxRank=Ue.node(xt.borderBottom).rank,qe=g.max(qe,xt.maxRank))}),Ue.graph().maxRank=qe}(Ue)}),qe("    removeEdgeLabelProxies",function(){!function At(Ue){g.forEach(Ue.nodes(),function(qe){var st=Ue.node(qe);"edge-proxy"===st.dummy&&(Ue.edge(st.e).labelRank=st.rank,Ue.removeNode(qe))})}(Ue)}),qe("    normalize.run",function(){S.run(Ue)}),qe("    parentDummyChains",function(){A(Ue)}),qe("    addBorderSegments",function(){B(Ue)}),qe("    order",function(){L(Ue)}),qe("    insertSelfEdges",function(){!function _r(Ue){var qe=ne.buildLayerMatrix(Ue);g.forEach(qe,function(st){var xt=0;g.forEach(st,function(Dt,sn){var Mt=Ue.node(Dt);Mt.order=sn+xt,g.forEach(Mt.selfEdges,function(or){ne.addDummyNode(Ue,"selfedge",{width:or.label.width,height:or.label.height,rank:Mt.rank,order:sn+ ++xt,e:or.e,label:or.label},"_se")}),delete Mt.selfEdges})})}(Ue)}),qe("    adjustCoordinateSystem",function(){H.adjust(Ue)}),qe("    position",function(){Y(Ue)}),qe("    positionSelfEdges",function(){!function fr(Ue){g.forEach(Ue.nodes(),function(qe){var st=Ue.node(qe);if("selfedge"===st.dummy){var xt=Ue.node(st.e.v),Dt=xt.x+xt.width/2,sn=xt.y,Mt=st.x-Dt,or=xt.height/2;Ue.setEdge(st.e,st.label),Ue.removeNode(qe),st.label.points=[{x:Dt+2*Mt/3,y:sn-or},{x:Dt+5*Mt/6,y:sn-or},{x:Dt+Mt,y:sn},{x:Dt+5*Mt/6,y:sn+or},{x:Dt+2*Mt/3,y:sn+or}],st.label.x=st.x,st.label.y=st.y}})}(Ue)}),qe("    removeBorderNodes",function(){!function Fr(Ue){g.forEach(Ue.nodes(),function(qe){if(Ue.children(qe).length){var st=Ue.node(qe),xt=Ue.node(st.borderTop),Dt=Ue.node(st.borderBottom),sn=Ue.node(g.last(st.borderLeft)),Mt=Ue.node(g.last(st.borderRight));st.width=Math.abs(Mt.x-sn.x),st.height=Math.abs(Dt.y-xt.y),st.x=sn.x+st.width/2,st.y=xt.y+st.height/2}}),g.forEach(Ue.nodes(),function(qe){"border"===Ue.node(qe).dummy&&Ue.removeNode(qe)})}(Ue)}),qe("    normalize.undo",function(){S.undo(Ue)}),qe("    fixupEdgeLabelCoords",function(){!function Ot(Ue){g.forEach(Ue.edges(),function(qe){var st=Ue.edge(qe);if(g.has(st,"x"))switch(("l"===st.labelpos||"r"===st.labelpos)&&(st.width-=st.labeloffset),st.labelpos){case"l":st.x-=st.width/2+st.labeloffset;break;case"r":st.x+=st.width/2+st.labeloffset}})}(Ue)}),qe("    undoCoordinateSystem",function(){H.undo(Ue)}),qe("    translateGraph",function(){!function Xt(Ue){var qe=Number.POSITIVE_INFINITY,st=0,xt=Number.POSITIVE_INFINITY,Dt=0,sn=Ue.graph(),Mt=sn.marginx||0,or=sn.marginy||0;function Ni(ln){var Zt=ln.x,R=ln.y,G=ln.width,re=ln.height;qe=Math.min(qe,Zt-G/2),st=Math.max(st,Zt+G/2),xt=Math.min(xt,R-re/2),Dt=Math.max(Dt,R+re/2)}g.forEach(Ue.nodes(),function(ln){Ni(Ue.node(ln))}),g.forEach(Ue.edges(),function(ln){var Zt=Ue.edge(ln);g.has(Zt,"x")&&Ni(Zt)}),qe-=Mt,xt-=or,g.forEach(Ue.nodes(),function(ln){var Zt=Ue.node(ln);Zt.x-=qe,Zt.y-=xt}),g.forEach(Ue.edges(),function(ln){var Zt=Ue.edge(ln);g.forEach(Zt.points,function(R){R.x-=qe,R.y-=xt}),g.has(Zt,"x")&&(Zt.x-=qe),g.has(Zt,"y")&&(Zt.y-=xt)}),sn.width=st-qe+Mt,sn.height=Dt-xt+or}(Ue)}),qe("    assignNodeIntersects",function(){!function un(Ue){g.forEach(Ue.edges(),function(qe){var sn,Mt,st=Ue.edge(qe),xt=Ue.node(qe.v),Dt=Ue.node(qe.w);st.points?(sn=st.points[0],Mt=st.points[st.points.length-1]):(st.points=[],sn=Dt,Mt=xt),st.points.unshift(ne.intersectRect(xt,sn)),st.points.push(ne.intersectRect(Dt,Mt))})}(Ue)}),qe("    reversePoints",function(){!function Xn(Ue){g.forEach(Ue.edges(),function(qe){var st=Ue.edge(qe);st.reversed&&st.points.reverse()})}(Ue)}),qe("    acyclic.undo",function(){v.undo(Ue)})}(xt,st)}),st("  updateInputGraph",function(){!function ge(Ue,qe){g.forEach(Ue.nodes(),function(st){var xt=Ue.node(st),Dt=qe.node(st);xt&&(xt.x=Dt.x,xt.y=Dt.y,qe.children(st).length&&(xt.width=Dt.width,xt.height=Dt.height))}),g.forEach(Ue.edges(),function(st){var xt=Ue.edge(st),Dt=qe.edge(st);xt.points=Dt.points,g.has(Dt,"x")&&(xt.x=Dt.x,xt.y=Dt.y)}),Ue.graph().width=qe.graph().width,Ue.graph().height=qe.graph().height}(Ue,xt)})})};var he=["nodesep","edgesep","ranksep","marginx","marginy"],q={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ye=["acyclicer","ranker","rankdir","align"],Ee=["width","height"],Fe={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],je={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},tt=["labelpos"];function Vr(Ue,qe){return g.mapValues(g.pick(Ue,qe),Number)}function er(Ue){var qe={};return g.forEach(Ue,function(st,xt){qe[xt.toLowerCase()]=st}),qe}},45760:(E,W,f)=>{var g;try{g={cloneDeep:f(90733),constant:f(76684),defaults:f(28800),each:f(35474),filter:f(35281),find:f(62516),flatten:f(22274),forEach:f(89851),forIn:f(41176),has:f(54842),isUndefined:f(34235),last:f(25809),map:f(19984),mapValues:f(10203),max:f(18176),merge:f(80567),min:f(29439),minBy:f(29525),now:f(31710),pick:f(16372),range:f(90361),reduce:f(81337),sortBy:f(12906),uniqueId:f(51541),values:f(90377),zipObject:f(21617)}}catch(v){}g||(g=window._),E.exports=g},1230:(E,W,f)=>{var g=f(45760),v=f(11510);function T(M,B,H,L,Y,ne,ce){var i=M.children(ce);if(i.length){var se=v.addBorderNode(M,"_bt"),ge=v.addBorderNode(M,"_bb"),he=M.node(ce);M.setParent(se,ce),he.borderTop=se,M.setParent(ge,ce),he.borderBottom=ge,g.forEach(i,function(q){T(M,B,H,L,Y,ne,q);var ye=M.node(q),Ee=ye.borderTop?ye.borderTop:q,Fe=ye.borderBottom?ye.borderBottom:q,b=ye.borderTop?L:2*L,je=Ee!==Fe?1:Y-ne[ce]+1;M.setEdge(se,Ee,{weight:b,minlen:je,nestingEdge:!0}),M.setEdge(Fe,ge,{weight:b,minlen:je,nestingEdge:!0})}),M.parent(ce)||M.setEdge(B,se,{weight:0,minlen:Y+ne[ce]})}else ce!==B&&M.setEdge(B,ce,{weight:0,minlen:H})}E.exports={run:function S(M){var B=v.addDummyNode(M,"root",{},"_root"),H=function x(M){var B={};function H(L,Y){var ne=M.children(L);ne&&ne.length&&g.forEach(ne,function(ce){H(ce,Y+1)}),B[L]=Y}return g.forEach(M.children(),function(L){H(L,1)}),B}(M),L=g.max(g.values(H))-1,Y=2*L+1;M.graph().nestingRoot=B,g.forEach(M.edges(),function(ce){M.edge(ce).minlen*=Y});var ne=function A(M){return g.reduce(M.edges(),function(B,H){return B+M.edge(H).weight},0)}(M)+1;g.forEach(M.children(),function(ce){T(M,B,Y,ne,L,H,ce)}),M.graph().nodeRankFactor=Y},cleanup:function O(M){var B=M.graph();M.removeNode(B.nestingRoot),delete B.nestingRoot,g.forEach(M.edges(),function(H){M.edge(H).nestingEdge&&M.removeEdge(H)})}}},91496:(E,W,f)=>{"use strict";var g=f(45760),v=f(11510);E.exports={run:function S(A){A.graph().dummyChains=[],g.forEach(A.edges(),function(O){!function T(A,O){var M=O.v,B=A.node(M).rank,H=O.w,L=A.node(H).rank,Y=O.name,ne=A.edge(O),ce=ne.labelRank;if(L!==B+1){var i,se,ge;for(A.removeEdge(O),ge=0,++B;B<L;++ge,++B)ne.points=[],i=v.addDummyNode(A,"edge",se={width:0,height:0,edgeLabel:ne,edgeObj:O,rank:B},"_d"),B===ce&&(se.width=ne.width,se.height=ne.height,se.dummy="edge-label",se.labelpos=ne.labelpos),A.setEdge(M,i,{weight:ne.weight},Y),0===ge&&A.graph().dummyChains.push(i),M=i;A.setEdge(M,H,{weight:ne.weight},Y)}}(A,O)})},undo:function x(A){g.forEach(A.graph().dummyChains,function(O){var H,M=A.node(O),B=M.edgeLabel;for(A.setEdge(M.edgeObj,B);M.dummy;)H=A.successors(O)[0],A.removeNode(O),B.points.push({x:M.x,y:M.y}),"edge-label"===M.dummy&&(B.x=M.x,B.y=M.y,B.width=M.width,B.height=M.height),M=A.node(O=H)})}}},33034:(E,W,f)=>{var g=f(45760);E.exports=function v(S,T,x){var O,A={};g.forEach(x,function(M){for(var H,L,B=S.parent(M);B;){if((H=S.parent(B))?(L=A[H],A[H]=B):(L=O,O=B),L&&L!==B)return void T.setEdge(L,B);B=H}})}},81323:(E,W,f)=>{var g=f(45760);E.exports=function v(S,T){return g.map(T,function(x){var A=S.inEdges(x);if(A.length){var O=g.reduce(A,function(M,B){var H=S.edge(B),L=S.node(B.v);return{sum:M.sum+H.weight*L.order,weight:M.weight+H.weight}},{sum:0,weight:0});return{v:x,barycenter:O.sum/O.weight,weight:O.weight}}return{v:x}})}},1686:(E,W,f)=>{var g=f(45760),v=f(36456).Graph;E.exports=function S(x,A,O){var M=function T(x){for(var A;x.hasNode(A=g.uniqueId("_root")););return A}(x),B=new v({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(H){return x.node(H)});return g.forEach(x.nodes(),function(H){var L=x.node(H),Y=x.parent(H);(L.rank===A||L.minRank<=A&&A<=L.maxRank)&&(B.setNode(H),B.setParent(H,Y||M),g.forEach(x[O](H),function(ne){var ce=ne.v===H?ne.w:ne.v,i=B.edge(ce,H),se=g.isUndefined(i)?0:i.weight;B.setEdge(ce,H,{weight:x.edge(ne).weight+se})}),g.has(L,"minRank")&&B.setNode(H,{borderLeft:L.borderLeft[A],borderRight:L.borderRight[A]}))}),B}},18796:(E,W,f)=>{"use strict";var g=f(45760);function S(T,x,A){for(var O=g.zipObject(A,g.map(A,function(ne,ce){return ce})),M=g.flatten(g.map(x,function(ne){return g.sortBy(g.map(T.outEdges(ne),function(ce){return{pos:O[ce.w],weight:T.edge(ce).weight}}),"pos")}),!0),B=1;B<A.length;)B<<=1;var H=2*B-1;B-=1;var L=g.map(new Array(H),function(){return 0}),Y=0;return g.forEach(M.forEach(function(ne){var ce=ne.pos+B;L[ce]+=ne.weight;for(var i=0;ce>0;)ce%2&&(i+=L[ce+1]),L[ce=ce-1>>1]+=ne.weight;Y+=ne.weight*i})),Y}E.exports=function v(T,x){for(var A=0,O=1;O<x.length;++O)A+=S(T,x[O-1],x[O]);return A}},32974:(E,W,f)=>{"use strict";var g=f(45760),v=f(49402),S=f(18796),T=f(61057),x=f(1686),A=f(33034),O=f(36456).Graph,M=f(11510);function H(ne,ce,i){return g.map(ce,function(se){return x(ne,se,i)})}function L(ne,ce){var i=new O;g.forEach(ne,function(se){var ge=se.graph().root,he=T(se,ge,i,ce);g.forEach(he.vs,function(q,ye){se.node(q).order=ye}),A(se,i,he.vs)})}function Y(ne,ce){g.forEach(ce,function(i){g.forEach(i,function(se,ge){ne.node(se).order=ge})})}E.exports=function B(ne){var ce=M.maxRank(ne),i=H(ne,g.range(1,ce+1),"inEdges"),se=H(ne,g.range(ce-1,-1,-1),"outEdges"),ge=v(ne);Y(ne,ge);for(var q,he=Number.POSITIVE_INFINITY,ye=0,Ee=0;Ee<4;++ye,++Ee){L(ye%2?i:se,ye%4>=2),ge=M.buildLayerMatrix(ne);var Fe=S(ne,ge);Fe<he&&(Ee=0,q=g.cloneDeep(ge),he=Fe)}Y(ne,q)}},49402:(E,W,f)=>{"use strict";var g=f(45760);E.exports=function v(S){var T={},x=g.filter(S.nodes(),function(H){return!S.children(H).length}),A=g.max(g.map(x,function(H){return S.node(H).rank})),O=g.map(g.range(A+1),function(){return[]}),B=g.sortBy(x,function(H){return S.node(H).rank});return g.forEach(B,function M(H){if(!g.has(T,H)){T[H]=!0;var L=S.node(H);O[L.rank].push(H),g.forEach(S.successors(H),M)}}),O}},83826:(E,W,f)=>{"use strict";var g=f(45760);E.exports=function v(x,A){var O={};return g.forEach(x,function(B,H){var L=O[B.v]={indegree:0,in:[],out:[],vs:[B.v],i:H};g.isUndefined(B.barycenter)||(L.barycenter=B.barycenter,L.weight=B.weight)}),g.forEach(A.edges(),function(B){var H=O[B.v],L=O[B.w];!g.isUndefined(H)&&!g.isUndefined(L)&&(L.indegree++,H.out.push(O[B.w]))}),function S(x){var A=[];function O(H){return function(L){L.merged||(g.isUndefined(L.barycenter)||g.isUndefined(H.barycenter)||L.barycenter>=H.barycenter)&&function T(x,A){var O=0,M=0;x.weight&&(O+=x.barycenter*x.weight,M+=x.weight),A.weight&&(O+=A.barycenter*A.weight,M+=A.weight),x.vs=A.vs.concat(x.vs),x.barycenter=O/M,x.weight=M,x.i=Math.min(A.i,x.i),A.merged=!0}(H,L)}}function M(H){return function(L){L.in.push(H),0==--L.indegree&&x.push(L)}}for(;x.length;){var B=x.pop();A.push(B),g.forEach(B.in.reverse(),O(B)),g.forEach(B.out,M(B))}return g.map(g.filter(A,function(H){return!H.merged}),function(H){return g.pick(H,["vs","i","barycenter","weight"])})}(g.filter(O,function(B){return!B.indegree}))}},61057:(E,W,f)=>{var g=f(45760),v=f(81323),S=f(83826),T=f(93803);E.exports=function x(M,B,H,L){var Y=M.children(B),ne=M.node(B),ce=ne?ne.borderLeft:void 0,i=ne?ne.borderRight:void 0,se={};ce&&(Y=g.filter(Y,function(Fe){return Fe!==ce&&Fe!==i}));var ge=v(M,Y);g.forEach(ge,function(Fe){if(M.children(Fe.v).length){var b=x(M,Fe.v,H,L);se[Fe.v]=b,g.has(b,"barycenter")&&function O(M,B){g.isUndefined(M.barycenter)?(M.barycenter=B.barycenter,M.weight=B.weight):(M.barycenter=(M.barycenter*M.weight+B.barycenter*B.weight)/(M.weight+B.weight),M.weight+=B.weight)}(Fe,b)}});var he=S(ge,H);!function A(M,B){g.forEach(M,function(H){H.vs=g.flatten(H.vs.map(function(L){return B[L]?B[L].vs:L}),!0)})}(he,se);var q=T(he,L);if(ce&&(q.vs=g.flatten([ce,q.vs,i],!0),M.predecessors(ce).length)){var ye=M.node(M.predecessors(ce)[0]),Ee=M.node(M.predecessors(i)[0]);g.has(q,"barycenter")||(q.barycenter=0,q.weight=0),q.barycenter=(q.barycenter*q.weight+ye.order+Ee.order)/(q.weight+2),q.weight+=2}return q}},93803:(E,W,f)=>{var g=f(45760),v=f(11510);function T(A,O,M){for(var B;O.length&&(B=g.last(O)).i<=M;)O.pop(),A.push(B.vs),M++;return M}E.exports=function S(A,O){var M=v.partition(A,function(se){return g.has(se,"barycenter")}),B=M.lhs,H=g.sortBy(M.rhs,function(se){return-se.i}),L=[],Y=0,ne=0,ce=0;B.sort(function x(A){return function(O,M){return O.barycenter<M.barycenter?-1:O.barycenter>M.barycenter?1:A?M.i-O.i:O.i-M.i}}(!!O)),ce=T(L,H,ce),g.forEach(B,function(se){ce+=se.vs.length,L.push(se.vs),Y+=se.barycenter*se.weight,ne+=se.weight,ce=T(L,H,ce)});var i={vs:g.flatten(L,!0)};return ne&&(i.barycenter=Y/ne,i.weight=ne),i}},60162:(E,W,f)=>{var g=f(45760);E.exports=function v(x){var A=function T(x){var A={},O=0;return g.forEach(x.children(),function M(B){var H=O;g.forEach(x.children(B),M),A[B]={low:H,lim:O++}}),A}(x);g.forEach(x.graph().dummyChains,function(O){for(var M=x.node(O),B=M.edgeObj,H=function S(x,A,O,M){var ne,ce,B=[],H=[],L=Math.min(A[O].low,A[M].low),Y=Math.max(A[O].lim,A[M].lim);ne=O;do{ne=x.parent(ne),B.push(ne)}while(ne&&(A[ne].low>L||Y>A[ne].lim));for(ce=ne,ne=M;(ne=x.parent(ne))!==ce;)H.push(ne);return{path:B.concat(H.reverse()),lca:ce}}(x,A,B.v,B.w),L=H.path,Y=H.lca,ne=0,ce=L[ne],i=!0;O!==B.w;){if(M=x.node(O),i){for(;(ce=L[ne])!==Y&&x.node(ce).maxRank<M.rank;)ne++;ce===Y&&(i=!1)}if(!i){for(;ne<L.length-1&&x.node(ce=L[ne+1]).minRank<=M.rank;)ne++;ce=L[ne]}x.setParent(O,ce),O=x.successors(O)[0]}})}},54058:(E,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph,S=f(11510);function T(he,q){var ye={};return g.reduce(q,function Ee(Fe,b){var je=0,tt=0,et=Fe.length,ot=g.last(b);return g.forEach(b,function(ut,mt){var At=function A(he,q){if(he.node(q).dummy)return g.find(he.predecessors(q),function(ye){return he.node(ye).dummy})}(he,ut),Xt=At?he.node(At).order:et;(At||ut===ot)&&(g.forEach(b.slice(tt,mt+1),function(un){g.forEach(he.predecessors(un),function(Ot){var Xn=he.node(Ot),Fr=Xn.order;(Fr<je||Xt<Fr)&&(!Xn.dummy||!he.node(un).dummy)&&O(ye,Ot,un)})}),tt=mt+1,je=Xt)}),b}),ye}function x(he,q){var ye={};function Ee(b,je,tt,et,ot){var ut;g.forEach(g.range(je,tt),function(mt){he.node(ut=b[mt]).dummy&&g.forEach(he.predecessors(ut),function(At){var Xt=he.node(At);Xt.dummy&&(Xt.order<et||Xt.order>ot)&&O(ye,At,ut)})})}return g.reduce(q,function Fe(b,je){var et,tt=-1,ot=0;return g.forEach(je,function(ut,mt){if("border"===he.node(ut).dummy){var At=he.predecessors(ut);At.length&&(et=he.node(At[0]).order,Ee(je,ot,mt,tt,et),ot=mt,tt=et)}Ee(je,ot,je.length,et,b.length)}),je}),ye}function O(he,q,ye){if(q>ye){var Ee=q;q=ye,ye=Ee}var Fe=he[q];Fe||(he[q]=Fe={}),Fe[ye]=!0}function M(he,q,ye){if(q>ye){var Ee=q;q=ye,ye=Ee}return g.has(he[q],ye)}function B(he,q,ye,Ee){var Fe={},b={},je={};return g.forEach(q,function(tt){g.forEach(tt,function(et,ot){Fe[et]=et,b[et]=et,je[et]=ot})}),g.forEach(q,function(tt){var et=-1;g.forEach(tt,function(ot){var ut=Ee(ot);if(ut.length)for(var mt=((ut=g.sortBy(ut,function(Ot){return je[Ot]})).length-1)/2,At=Math.floor(mt),Xt=Math.ceil(mt);At<=Xt;++At){var un=ut[At];b[ot]===ot&&et<je[un]&&!M(ye,ot,un)&&(b[un]=ot,b[ot]=Fe[ot]=Fe[un],et=je[un])}})}),{root:Fe,align:b}}function H(he,q,ye,Ee,Fe){var b={},je=function L(he,q,ye,Ee){var Fe=new v,b=he.graph(),je=function se(he,q,ye){return function(Ee,Fe,b){var ot,je=Ee.node(Fe),tt=Ee.node(b),et=0;if(et+=je.width/2,g.has(je,"labelpos"))switch(je.labelpos.toLowerCase()){case"l":ot=-je.width/2;break;case"r":ot=je.width/2}if(ot&&(et+=ye?ot:-ot),ot=0,et+=(je.dummy?q:he)/2,et+=(tt.dummy?q:he)/2,et+=tt.width/2,g.has(tt,"labelpos"))switch(tt.labelpos.toLowerCase()){case"l":ot=tt.width/2;break;case"r":ot=-tt.width/2}return ot&&(et+=ye?ot:-ot),ot=0,et}}(b.nodesep,b.edgesep,Ee);return g.forEach(q,function(tt){var et;g.forEach(tt,function(ot){var ut=ye[ot];if(Fe.setNode(ut),et){var mt=ye[et],At=Fe.edge(mt,ut);Fe.setEdge(mt,ut,Math.max(je(he,ot,et),At||0))}et=ot})}),Fe}(he,q,ye,Fe),tt=Fe?"borderLeft":"borderRight";function et(mt,At){for(var Xt=je.nodes(),un=Xt.pop(),Ot={};un;)Ot[un]?mt(un):(Ot[un]=!0,Xt.push(un),Xt=Xt.concat(At(un))),un=Xt.pop()}return et(function ot(mt){b[mt]=je.inEdges(mt).reduce(function(At,Xt){return Math.max(At,b[Xt.v]+je.edge(Xt))},0)},je.predecessors.bind(je)),et(function ut(mt){var At=je.outEdges(mt).reduce(function(un,Ot){return Math.min(un,b[Ot.w]-je.edge(Ot))},Number.POSITIVE_INFINITY),Xt=he.node(mt);At!==Number.POSITIVE_INFINITY&&Xt.borderType!==tt&&(b[mt]=Math.max(b[mt],At))},je.successors.bind(je)),g.forEach(Ee,function(mt){b[mt]=b[ye[mt]]}),b}function Y(he,q){return g.minBy(g.values(q),function(ye){var Ee=Number.NEGATIVE_INFINITY,Fe=Number.POSITIVE_INFINITY;return g.forIn(ye,function(b,je){var tt=function ge(he,q){return he.node(q).width}(he,je)/2;Ee=Math.max(b+tt,Ee),Fe=Math.min(b-tt,Fe)}),Ee-Fe})}function ne(he,q){var ye=g.values(q),Ee=g.min(ye),Fe=g.max(ye);g.forEach(["u","d"],function(b){g.forEach(["l","r"],function(je){var ot,tt=b+je,et=he[tt];if(et!==q){var ut=g.values(et);(ot="l"===je?Ee-g.min(ut):Fe-g.max(ut))&&(he[tt]=g.mapValues(et,function(mt){return mt+ot}))}})})}function ce(he,q){return g.mapValues(he.ul,function(ye,Ee){if(q)return he[q.toLowerCase()][Ee];var Fe=g.sortBy(g.map(he,Ee));return(Fe[1]+Fe[2])/2})}E.exports={positionX:function i(he){var Fe,q=S.buildLayerMatrix(he),ye=g.merge(T(he,q),x(he,q)),Ee={};g.forEach(["u","d"],function(je){Fe="u"===je?q:g.values(q).reverse(),g.forEach(["l","r"],function(tt){"r"===tt&&(Fe=g.map(Fe,function(mt){return g.values(mt).reverse()}));var et=("u"===je?he.predecessors:he.successors).bind(he),ot=B(0,Fe,ye,et),ut=H(he,Fe,ot.root,ot.align,"r"===tt);"r"===tt&&(ut=g.mapValues(ut,function(mt){return-mt})),Ee[je+tt]=ut})});var b=Y(he,Ee);return ne(Ee,b),ce(Ee,he.graph().align)},findType1Conflicts:T,findType2Conflicts:x,addConflict:O,hasConflict:M,verticalAlignment:B,horizontalCompaction:H,alignCoordinates:ne,findSmallestWidthAlignment:Y,balance:ce}},78226:(E,W,f)=>{"use strict";var g=f(45760),v=f(11510),S=f(54058).positionX;E.exports=function T(A){(function x(A){var O=v.buildLayerMatrix(A),M=A.graph().ranksep,B=0;g.forEach(O,function(H){var L=g.max(g.map(H,function(Y){return A.node(Y).height}));g.forEach(H,function(Y){A.node(Y).y=B+L/2}),B+=L+M})})(A=v.asNonCompoundGraph(A)),g.forEach(S(A),function(O,M){A.node(M).x=O})}},96632:(E,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph,S=f(1916).slack;function x(M,B){return g.forEach(M.nodes(),function H(L){g.forEach(B.nodeEdges(L),function(Y){var ne=Y.v,ce=L===ne?Y.w:ne;!M.hasNode(ce)&&!S(B,Y)&&(M.setNode(ce,{}),M.setEdge(L,ce,{}),H(ce))})}),M.nodeCount()}function A(M,B){return g.minBy(B.edges(),function(H){if(M.hasNode(H.v)!==M.hasNode(H.w))return S(B,H)})}function O(M,B,H){g.forEach(M.nodes(),function(L){B.node(L).rank+=H})}E.exports=function T(M){var Y,ne,B=new v({directed:!1}),H=M.nodes()[0],L=M.nodeCount();for(B.setNode(H,{});x(B,M)<L;)Y=A(B,M),ne=B.hasNode(Y.v)?S(M,Y):-S(M,Y),O(B,M,ne);return B}},94124:(E,W,f)=>{"use strict";var v=f(1916).longestPath,S=f(96632),T=f(63804);E.exports=function x(B){switch(B.graph().ranker){case"network-simplex":default:!function M(B){T(B)}(B);break;case"tight-tree":!function O(B){v(B),S(B)}(B);break;case"longest-path":A(B)}};var A=v},63804:(E,W,f)=>{"use strict";var g=f(45760),v=f(96632),S=f(1916).slack,T=f(1916).longestPath,x=f(36456).alg.preorder,A=f(36456).alg.postorder,O=f(11510).simplify;function M(ye){ye=O(ye),T(ye);var Fe,Ee=v(ye);for(Y(Ee),B(Ee,ye);Fe=ce(Ee);)se(Ee,ye,Fe,i(Ee,ye,Fe))}function B(ye,Ee){var Fe=A(ye,ye.nodes());Fe=Fe.slice(0,Fe.length-1),g.forEach(Fe,function(b){!function H(ye,Ee,Fe){var b=ye.node(Fe);ye.edge(Fe,b.parent).cutvalue=L(ye,Ee,Fe)}(ye,Ee,b)})}function L(ye,Ee,Fe){var je=ye.node(Fe).parent,tt=!0,et=Ee.edge(Fe,je),ot=0;return et||(tt=!1,et=Ee.edge(je,Fe)),ot=et.weight,g.forEach(Ee.nodeEdges(Fe),function(ut){var mt=ut.v===Fe,At=mt?ut.w:ut.v;if(At!==je){var Xt=mt===tt,un=Ee.edge(ut).weight;if(ot+=Xt?un:-un,function he(ye,Ee,Fe){return ye.hasEdge(Ee,Fe)}(ye,Fe,At)){var Ot=ye.edge(Fe,At).cutvalue;ot+=Xt?-Ot:Ot}}}),ot}function Y(ye,Ee){arguments.length<2&&(Ee=ye.nodes()[0]),ne(ye,{},1,Ee)}function ne(ye,Ee,Fe,b,je){var tt=Fe,et=ye.node(b);return Ee[b]=!0,g.forEach(ye.neighbors(b),function(ot){g.has(Ee,ot)||(Fe=ne(ye,Ee,Fe,ot,b))}),et.low=tt,et.lim=Fe++,je?et.parent=je:delete et.parent,Fe}function ce(ye){return g.find(ye.edges(),function(Ee){return ye.edge(Ee).cutvalue<0})}function i(ye,Ee,Fe){var b=Fe.v,je=Fe.w;Ee.hasEdge(b,je)||(b=Fe.w,je=Fe.v);var tt=ye.node(b),et=ye.node(je),ot=tt,ut=!1;tt.lim>et.lim&&(ot=et,ut=!0);var mt=g.filter(Ee.edges(),function(At){return ut===q(0,ye.node(At.v),ot)&&ut!==q(0,ye.node(At.w),ot)});return g.minBy(mt,function(At){return S(Ee,At)})}function se(ye,Ee,Fe,b){ye.removeEdge(Fe.v,Fe.w),ye.setEdge(b.v,b.w,{}),Y(ye),B(ye,Ee),function ge(ye,Ee){var Fe=g.find(ye.nodes(),function(je){return!Ee.node(je).parent}),b=x(ye,Fe);b=b.slice(1),g.forEach(b,function(je){var tt=ye.node(je).parent,et=Ee.edge(je,tt),ot=!1;et||(et=Ee.edge(tt,je),ot=!0),Ee.node(je).rank=Ee.node(tt).rank+(ot?et.minlen:-et.minlen)})}(ye,Ee)}function q(ye,Ee,Fe){return Fe.low<=Ee.lim&&Ee.lim<=Fe.lim}E.exports=M,M.initLowLimValues=Y,M.initCutValues=B,M.calcCutValue=L,M.leaveEdge=ce,M.enterEdge=i,M.exchangeEdges=se},1916:(E,W,f)=>{"use strict";var g=f(45760);E.exports={longestPath:function v(T){var x={};g.forEach(T.sources(),function A(O){var M=T.node(O);if(g.has(x,O))return M.rank;x[O]=!0;var B=g.min(g.map(T.outEdges(O),function(H){return A(H.w)-T.edge(H).minlen}));return(B===Number.POSITIVE_INFINITY||null==B)&&(B=0),M.rank=B})},slack:function S(T,x){return T.node(x.w).rank-T.node(x.v).rank-T.edge(x).minlen}}},11510:(E,W,f)=>{"use strict";var g=f(45760),v=f(36456).Graph;function S(ge,he,q,ye){var Ee;do{Ee=g.uniqueId(ye)}while(ge.hasNode(Ee));return q.dummy=he,ge.setNode(Ee,q),Ee}function ne(ge){return g.max(g.map(ge.nodes(),function(he){var q=ge.node(he).rank;if(!g.isUndefined(q))return q}))}E.exports={addDummyNode:S,simplify:function T(ge){var he=(new v).setGraph(ge.graph());return g.forEach(ge.nodes(),function(q){he.setNode(q,ge.node(q))}),g.forEach(ge.edges(),function(q){var ye=he.edge(q.v,q.w)||{weight:0,minlen:1},Ee=ge.edge(q);he.setEdge(q.v,q.w,{weight:ye.weight+Ee.weight,minlen:Math.max(ye.minlen,Ee.minlen)})}),he},asNonCompoundGraph:function x(ge){var he=new v({multigraph:ge.isMultigraph()}).setGraph(ge.graph());return g.forEach(ge.nodes(),function(q){ge.children(q).length||he.setNode(q,ge.node(q))}),g.forEach(ge.edges(),function(q){he.setEdge(q,ge.edge(q))}),he},successorWeights:function A(ge){var he=g.map(ge.nodes(),function(q){var ye={};return g.forEach(ge.outEdges(q),function(Ee){ye[Ee.w]=(ye[Ee.w]||0)+ge.edge(Ee).weight}),ye});return g.zipObject(ge.nodes(),he)},predecessorWeights:function O(ge){var he=g.map(ge.nodes(),function(q){var ye={};return g.forEach(ge.inEdges(q),function(Ee){ye[Ee.v]=(ye[Ee.v]||0)+ge.edge(Ee).weight}),ye});return g.zipObject(ge.nodes(),he)},intersectRect:function M(ge,he){var tt,et,q=ge.x,ye=ge.y,Ee=he.x-q,Fe=he.y-ye,b=ge.width/2,je=ge.height/2;if(!Ee&&!Fe)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Fe)*b>Math.abs(Ee)*je?(Fe<0&&(je=-je),tt=je*Ee/Fe,et=je):(Ee<0&&(b=-b),tt=b,et=b*Fe/Ee),{x:q+tt,y:ye+et}},buildLayerMatrix:function B(ge){var he=g.map(g.range(ne(ge)+1),function(){return[]});return g.forEach(ge.nodes(),function(q){var ye=ge.node(q),Ee=ye.rank;g.isUndefined(Ee)||(he[Ee][ye.order]=q)}),he},normalizeRanks:function H(ge){var he=g.min(g.map(ge.nodes(),function(q){return ge.node(q).rank}));g.forEach(ge.nodes(),function(q){var ye=ge.node(q);g.has(ye,"rank")&&(ye.rank-=he)})},removeEmptyRanks:function L(ge){var he=g.min(g.map(ge.nodes(),function(Fe){return ge.node(Fe).rank})),q=[];g.forEach(ge.nodes(),function(Fe){var b=ge.node(Fe).rank-he;q[b]||(q[b]=[]),q[b].push(Fe)});var ye=0,Ee=ge.graph().nodeRankFactor;g.forEach(q,function(Fe,b){g.isUndefined(Fe)&&b%Ee!=0?--ye:ye&&g.forEach(Fe,function(je){ge.node(je).rank+=ye})})},addBorderNode:function Y(ge,he,q,ye){var Ee={width:0,height:0};return arguments.length>=4&&(Ee.rank=q,Ee.order=ye),S(ge,"border",Ee,he)},maxRank:ne,partition:function ce(ge,he){var q={lhs:[],rhs:[]};return g.forEach(ge,function(ye){he(ye)?q.lhs.push(ye):q.rhs.push(ye)}),q},time:function i(ge,he){var q=g.now();try{return he()}finally{console.log(ge+" time: "+(g.now()-q)+"ms")}},notime:function se(ge,he){return he()}}},28126:E=>{E.exports="0.8.5"},85510:(E,W,f)=>{var g=f(51838);E.exports={Graph:g.Graph,json:f(21088),alg:f(83430),version:g.version}},86730:(E,W,f)=>{var g=f(79138);E.exports=function v(S){var A,T={},x=[];function O(M){g.has(T,M)||(T[M]=!0,A.push(M),g.each(S.successors(M),O),g.each(S.predecessors(M),O))}return g.each(S.nodes(),function(M){A=[],O(M),A.length&&x.push(A)}),x}},22163:(E,W,f)=>{var g=f(79138);function S(T,x,A,O,M,B){g.has(O,x)||(O[x]=!0,A||B.push(x),g.each(M(x),function(H){S(T,H,A,O,M,B)}),A&&B.push(x))}E.exports=function v(T,x,A){g.isArray(x)||(x=[x]);var O=(T.isDirected()?T.successors:T.neighbors).bind(T),M=[],B={};return g.each(x,function(H){if(!T.hasNode(H))throw new Error("Graph does not have node: "+H);S(T,H,"post"===A,B,O,M)}),M}},25668:(E,W,f)=>{var g=f(61718),v=f(79138);E.exports=function S(T,x,A){return v.transform(T.nodes(),function(O,M){O[M]=g(T,M,x,A)},{})}},61718:(E,W,f)=>{var g=f(79138),v=f(31919);E.exports=function T(A,O,M,B){return function x(A,O,M,B){var Y,ne,H={},L=new v,ce=function(i){var se=i.v!==Y?i.v:i.w,ge=H[se],he=M(i),q=ne.distance+he;if(he<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+i+" Weight: "+he);q<ge.distance&&(ge.distance=q,ge.predecessor=Y,L.decrease(se,q))};for(A.nodes().forEach(function(i){var se=i===O?0:Number.POSITIVE_INFINITY;H[i]={distance:se},L.add(i,se)});L.size()>0&&(Y=L.removeMin(),(ne=H[Y]).distance!==Number.POSITIVE_INFINITY);)B(Y).forEach(ce);return H}(A,String(O),M||S,B||function(H){return A.outEdges(H)})};var S=g.constant(1)},9611:(E,W,f)=>{var g=f(79138),v=f(73585);E.exports=function S(T){return g.filter(v(T),function(x){return x.length>1||1===x.length&&T.hasEdge(x[0],x[0])})}},22881:(E,W,f)=>{var g=f(79138);E.exports=function S(x,A,O){return function T(x,A,O){var M={},B=x.nodes();return B.forEach(function(H){M[H]={},M[H][H]={distance:0},B.forEach(function(L){H!==L&&(M[H][L]={distance:Number.POSITIVE_INFINITY})}),O(H).forEach(function(L){var Y=L.v===H?L.w:L.v,ne=A(L);M[H][Y]={distance:ne,predecessor:H}})}),B.forEach(function(H){var L=M[H];B.forEach(function(Y){var ne=M[Y];B.forEach(function(ce){var se=L[ce],ge=ne[ce],he=ne[H].distance+se.distance;he<ge.distance&&(ge.distance=he,ge.predecessor=se.predecessor)})})}),M}(x,A||v,O||function(M){return x.outEdges(M)})};var v=g.constant(1)},83430:(E,W,f)=>{E.exports={components:f(86730),dijkstra:f(61718),dijkstraAll:f(25668),findCycles:f(9611),floydWarshall:f(22881),isAcyclic:f(9366),postorder:f(46694),preorder:f(5330),prim:f(46823),tarjan:f(73585),topsort:f(52180)}},9366:(E,W,f)=>{var g=f(52180);E.exports=function v(S){try{g(S)}catch(T){if(T instanceof g.CycleException)return!1;throw T}return!0}},46694:(E,W,f)=>{var g=f(22163);E.exports=function v(S,T){return g(S,T,"post")}},5330:(E,W,f)=>{var g=f(22163);E.exports=function v(S,T){return g(S,T,"pre")}},46823:(E,W,f)=>{var g=f(79138),v=f(66568),S=f(31919);E.exports=function T(x,A){var H,O=new v,M={},B=new S;function L(ne){var ce=ne.v===H?ne.w:ne.v,i=B.priority(ce);if(void 0!==i){var se=A(ne);se<i&&(M[ce]=H,B.decrease(ce,se))}}if(0===x.nodeCount())return O;g.each(x.nodes(),function(ne){B.add(ne,Number.POSITIVE_INFINITY),O.setNode(ne)}),B.decrease(x.nodes()[0],0);for(var Y=!1;B.size()>0;){if(H=B.removeMin(),g.has(M,H))O.setEdge(H,M[H]);else{if(Y)throw new Error("Input graph is not connected: "+x);Y=!0}x.nodeEdges(H).forEach(L)}return O}},73585:(E,W,f)=>{var g=f(79138);E.exports=function v(S){var T=0,x=[],A={},O=[];function M(B){var H=A[B]={onStack:!0,lowlink:T,index:T++};if(x.push(B),S.successors(B).forEach(function(ne){g.has(A,ne)?A[ne].onStack&&(H.lowlink=Math.min(H.lowlink,A[ne].index)):(M(ne),H.lowlink=Math.min(H.lowlink,A[ne].lowlink))}),H.lowlink===H.index){var Y,L=[];do{Y=x.pop(),A[Y].onStack=!1,L.push(Y)}while(B!==Y);O.push(L)}}return S.nodes().forEach(function(B){g.has(A,B)||M(B)}),O}},52180:(E,W,f)=>{var g=f(79138);function v(T){var x={},A={},O=[];if(g.each(T.sinks(),function M(B){if(g.has(A,B))throw new S;g.has(x,B)||(A[B]=!0,x[B]=!0,g.each(T.predecessors(B),M),delete A[B],O.push(B))}),g.size(x)!==T.nodeCount())throw new S;return O}function S(){}E.exports=v,v.CycleException=S,S.prototype=new Error},31919:(E,W,f)=>{var g=f(79138);function v(){this._arr=[],this._keyIndices={}}E.exports=v,v.prototype.size=function(){return this._arr.length},v.prototype.keys=function(){return this._arr.map(function(S){return S.key})},v.prototype.has=function(S){return g.has(this._keyIndices,S)},v.prototype.priority=function(S){var T=this._keyIndices[S];if(void 0!==T)return this._arr[T].priority},v.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},v.prototype.add=function(S,T){var x=this._keyIndices;if(S=String(S),!g.has(x,S)){var A=this._arr,O=A.length;return x[S]=O,A.push({key:S,priority:T}),this._decrease(O),!0}return!1},v.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},v.prototype.decrease=function(S,T){var x=this._keyIndices[S];if(T>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[x].priority+" New: "+T);this._arr[x].priority=T,this._decrease(x)},v.prototype._heapify=function(S){var T=this._arr,x=2*S,A=x+1,O=S;x<T.length&&(O=T[x].priority<T[O].priority?x:O,A<T.length&&(O=T[A].priority<T[O].priority?A:O),O!==S&&(this._swap(S,O),this._heapify(O)))},v.prototype._decrease=function(S){for(var A,T=this._arr,x=T[S].priority;0!==S&&!(T[A=S>>1].priority<x);)this._swap(S,A),S=A},v.prototype._swap=function(S,T){var x=this._arr,A=this._keyIndices,O=x[S],M=x[T];x[S]=M,x[T]=O,A[M.key]=S,A[O.key]=T}},66568:(E,W,f)=>{"use strict";var g=f(79138);E.exports=x;var S="\0";function x(L){this._isDirected=!g.has(L,"directed")||L.directed,this._isMultigraph=!!g.has(L,"multigraph")&&L.multigraph,this._isCompound=!!g.has(L,"compound")&&L.compound,this._label=void 0,this._defaultNodeLabelFn=g.constant(void 0),this._defaultEdgeLabelFn=g.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function A(L,Y){L[Y]?L[Y]++:L[Y]=1}function O(L,Y){--L[Y]||delete L[Y]}function M(L,Y,ne,ce){var i=""+Y,se=""+ne;if(!L&&i>se){var ge=i;i=se,se=ge}return i+"\x01"+se+"\x01"+(g.isUndefined(ce)?"\0":ce)}function B(L,Y,ne,ce){var i=""+Y,se=""+ne;if(!L&&i>se){var ge=i;i=se,se=ge}var he={v:i,w:se};return ce&&(he.name=ce),he}function H(L,Y){return M(L,Y.v,Y.w,Y.name)}x.prototype._nodeCount=0,x.prototype._edgeCount=0,x.prototype.isDirected=function(){return this._isDirected},x.prototype.isMultigraph=function(){return this._isMultigraph},x.prototype.isCompound=function(){return this._isCompound},x.prototype.setGraph=function(L){return this._label=L,this},x.prototype.graph=function(){return this._label},x.prototype.setDefaultNodeLabel=function(L){return g.isFunction(L)||(L=g.constant(L)),this._defaultNodeLabelFn=L,this},x.prototype.nodeCount=function(){return this._nodeCount},x.prototype.nodes=function(){return g.keys(this._nodes)},x.prototype.sources=function(){var L=this;return g.filter(this.nodes(),function(Y){return g.isEmpty(L._in[Y])})},x.prototype.sinks=function(){var L=this;return g.filter(this.nodes(),function(Y){return g.isEmpty(L._out[Y])})},x.prototype.setNodes=function(L,Y){var ne=arguments,ce=this;return g.each(L,function(i){ne.length>1?ce.setNode(i,Y):ce.setNode(i)}),this},x.prototype.setNode=function(L,Y){return g.has(this._nodes,L)?(arguments.length>1&&(this._nodes[L]=Y),this):(this._nodes[L]=arguments.length>1?Y:this._defaultNodeLabelFn(L),this._isCompound&&(this._parent[L]=S,this._children[L]={},this._children[S][L]=!0),this._in[L]={},this._preds[L]={},this._out[L]={},this._sucs[L]={},++this._nodeCount,this)},x.prototype.node=function(L){return this._nodes[L]},x.prototype.hasNode=function(L){return g.has(this._nodes,L)},x.prototype.removeNode=function(L){var Y=this;if(g.has(this._nodes,L)){var ne=function(ce){Y.removeEdge(Y._edgeObjs[ce])};delete this._nodes[L],this._isCompound&&(this._removeFromParentsChildList(L),delete this._parent[L],g.each(this.children(L),function(ce){Y.setParent(ce)}),delete this._children[L]),g.each(g.keys(this._in[L]),ne),delete this._in[L],delete this._preds[L],g.each(g.keys(this._out[L]),ne),delete this._out[L],delete this._sucs[L],--this._nodeCount}return this},x.prototype.setParent=function(L,Y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(g.isUndefined(Y))Y=S;else{for(var ne=Y+="";!g.isUndefined(ne);ne=this.parent(ne))if(ne===L)throw new Error("Setting "+Y+" as parent of "+L+" would create a cycle");this.setNode(Y)}return this.setNode(L),this._removeFromParentsChildList(L),this._parent[L]=Y,this._children[Y][L]=!0,this},x.prototype._removeFromParentsChildList=function(L){delete this._children[this._parent[L]][L]},x.prototype.parent=function(L){if(this._isCompound){var Y=this._parent[L];if(Y!==S)return Y}},x.prototype.children=function(L){if(g.isUndefined(L)&&(L=S),this._isCompound){var Y=this._children[L];if(Y)return g.keys(Y)}else{if(L===S)return this.nodes();if(this.hasNode(L))return[]}},x.prototype.predecessors=function(L){var Y=this._preds[L];if(Y)return g.keys(Y)},x.prototype.successors=function(L){var Y=this._sucs[L];if(Y)return g.keys(Y)},x.prototype.neighbors=function(L){var Y=this.predecessors(L);if(Y)return g.union(Y,this.successors(L))},x.prototype.isLeaf=function(L){return 0===(this.isDirected()?this.successors(L):this.neighbors(L)).length},x.prototype.filterNodes=function(L){var Y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});Y.setGraph(this.graph());var ne=this;g.each(this._nodes,function(se,ge){L(ge)&&Y.setNode(ge,se)}),g.each(this._edgeObjs,function(se){Y.hasNode(se.v)&&Y.hasNode(se.w)&&Y.setEdge(se,ne.edge(se))});var ce={};function i(se){var ge=ne.parent(se);return void 0===ge||Y.hasNode(ge)?(ce[se]=ge,ge):ge in ce?ce[ge]:i(ge)}return this._isCompound&&g.each(Y.nodes(),function(se){Y.setParent(se,i(se))}),Y},x.prototype.setDefaultEdgeLabel=function(L){return g.isFunction(L)||(L=g.constant(L)),this._defaultEdgeLabelFn=L,this},x.prototype.edgeCount=function(){return this._edgeCount},x.prototype.edges=function(){return g.values(this._edgeObjs)},x.prototype.setPath=function(L,Y){var ne=this,ce=arguments;return g.reduce(L,function(i,se){return ce.length>1?ne.setEdge(i,se,Y):ne.setEdge(i,se),se}),this},x.prototype.setEdge=function(){var L,Y,ne,ce,i=!1,se=arguments[0];"object"==typeof se&&null!==se&&"v"in se?(L=se.v,Y=se.w,ne=se.name,2===arguments.length&&(ce=arguments[1],i=!0)):(L=se,Y=arguments[1],ne=arguments[3],arguments.length>2&&(ce=arguments[2],i=!0)),L=""+L,Y=""+Y,g.isUndefined(ne)||(ne=""+ne);var ge=M(this._isDirected,L,Y,ne);if(g.has(this._edgeLabels,ge))return i&&(this._edgeLabels[ge]=ce),this;if(!g.isUndefined(ne)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(L),this.setNode(Y),this._edgeLabels[ge]=i?ce:this._defaultEdgeLabelFn(L,Y,ne);var he=B(this._isDirected,L,Y,ne);return L=he.v,Y=he.w,Object.freeze(he),this._edgeObjs[ge]=he,A(this._preds[Y],L),A(this._sucs[L],Y),this._in[Y][ge]=he,this._out[L][ge]=he,this._edgeCount++,this},x.prototype.edge=function(L,Y,ne){var ce=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,L,Y,ne);return this._edgeLabels[ce]},x.prototype.hasEdge=function(L,Y,ne){var ce=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,L,Y,ne);return g.has(this._edgeLabels,ce)},x.prototype.removeEdge=function(L,Y,ne){var ce=1===arguments.length?H(this._isDirected,arguments[0]):M(this._isDirected,L,Y,ne),i=this._edgeObjs[ce];return i&&(L=i.v,Y=i.w,delete this._edgeLabels[ce],delete this._edgeObjs[ce],O(this._preds[Y],L),O(this._sucs[L],Y),delete this._in[Y][ce],delete this._out[L][ce],this._edgeCount--),this},x.prototype.inEdges=function(L,Y){var ne=this._in[L];if(ne){var ce=g.values(ne);return Y?g.filter(ce,function(i){return i.v===Y}):ce}},x.prototype.outEdges=function(L,Y){var ne=this._out[L];if(ne){var ce=g.values(ne);return Y?g.filter(ce,function(i){return i.w===Y}):ce}},x.prototype.nodeEdges=function(L,Y){var ne=this.inEdges(L,Y);if(ne)return ne.concat(this.outEdges(L,Y))}},51838:(E,W,f)=>{E.exports={Graph:f(66568),version:f(75089)}},21088:(E,W,f)=>{var g=f(79138),v=f(66568);function T(O){return g.map(O.nodes(),function(M){var B=O.node(M),H=O.parent(M),L={v:M};return g.isUndefined(B)||(L.value=B),g.isUndefined(H)||(L.parent=H),L})}function x(O){return g.map(O.edges(),function(M){var B=O.edge(M),H={v:M.v,w:M.w};return g.isUndefined(M.name)||(H.name=M.name),g.isUndefined(B)||(H.value=B),H})}E.exports={write:function S(O){var M={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:T(O),edges:x(O)};return g.isUndefined(O.graph())||(M.value=g.clone(O.graph())),M},read:function A(O){var M=new v(O.options).setGraph(O.value);return g.each(O.nodes,function(B){M.setNode(B.v,B.value),B.parent&&M.setParent(B.v,B.parent)}),g.each(O.edges,function(B){M.setEdge({v:B.v,w:B.w,name:B.name},B.value)}),M}}},79138:(E,W,f)=>{var g;try{g={clone:f(11094),constant:f(76684),each:f(35474),filter:f(35281),has:f(54842),isArray:f(21503),isEmpty:f(71973),isFunction:f(75946),isUndefined:f(34235),keys:f(118),map:f(19984),reduce:f(81337),size:f(55637),transform:f(89416),union:f(68921),values:f(90377)}}catch(v){}g||(g=window._),E.exports=g},75089:E=>{E.exports="2.1.8"},58259:function(E,W){var g;!function(v,S){"use strict";"object"==typeof E.exports?E.exports=v.document?S(v,!0):function(T){if(!T.document)throw new Error("jQuery requires a window with a document");return S(T)}:S(v)}("undefined"!=typeof window?window:this,function(v,S){"use strict";var T=[],x=Object.getPrototypeOf,A=T.slice,O=T.flat?function(l){return T.flat.call(l)}:function(l){return T.concat.apply([],l)},M=T.push,B=T.indexOf,H={},L=H.toString,Y=H.hasOwnProperty,ne=Y.toString,ce=ne.call(Object),i={},se=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},ge=function(d){return null!=d&&d===d.window},he=v.document,q={type:!0,src:!0,nonce:!0,noModule:!0};function ye(l,d,y){var C,N,D=(y=y||he).createElement("script");if(D.text=l,d)for(C in q)(N=d[C]||d.getAttribute&&d.getAttribute(C))&&D.setAttribute(C,N);y.head.appendChild(D).parentNode.removeChild(D)}function Ee(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?H[L.call(l)]||"object":typeof l}var b=function(l,d){return new b.fn.init(l,d)};function je(l){var d=!!l&&"length"in l&&l.length,y=Ee(l);return!se(l)&&!ge(l)&&("array"===y||0===d||"number"==typeof d&&d>0&&d-1 in l)}b.fn=b.prototype={jquery:"3.6.0",constructor:b,length:0,toArray:function(){return A.call(this)},get:function(l){return null==l?A.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var d=b.merge(this.constructor(),l);return d.prevObject=this,d},each:function(l){return b.each(this,l)},map:function(l){return this.pushStack(b.map(this,function(d,y){return l.call(d,y,d)}))},slice:function(){return this.pushStack(A.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(l,d){return(d+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(l,d){return d%2}))},eq:function(l){var d=this.length,y=+l+(l<0?d:0);return this.pushStack(y>=0&&y<d?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:T.sort,splice:T.splice},b.extend=b.fn.extend=function(){var l,d,y,C,N,D,X=arguments[0]||{},ue=1,le=arguments.length,Ce=!1;for("boolean"==typeof X&&(Ce=X,X=arguments[ue]||{},ue++),"object"!=typeof X&&!se(X)&&(X={}),ue===le&&(X=this,ue--);ue<le;ue++)if(null!=(l=arguments[ue]))for(d in l)C=l[d],"__proto__"!==d&&X!==C&&(Ce&&C&&(b.isPlainObject(C)||(N=Array.isArray(C)))?(y=X[d],D=N&&!Array.isArray(y)?[]:N||b.isPlainObject(y)?y:{},N=!1,X[d]=b.extend(Ce,D,C)):void 0!==C&&(X[d]=C));return X},b.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var d,y;return!(!l||"[object Object]"!==L.call(l)||(d=x(l))&&("function"!=typeof(y=Y.call(d,"constructor")&&d.constructor)||ne.call(y)!==ce))},isEmptyObject:function(l){var d;for(d in l)return!1;return!0},globalEval:function(l,d,y){ye(l,{nonce:d&&d.nonce},y)},each:function(l,d){var y,C=0;if(je(l))for(y=l.length;C<y&&!1!==d.call(l[C],C,l[C]);C++);else for(C in l)if(!1===d.call(l[C],C,l[C]))break;return l},makeArray:function(l,d){var y=d||[];return null!=l&&(je(Object(l))?b.merge(y,"string"==typeof l?[l]:l):M.call(y,l)),y},inArray:function(l,d,y){return null==d?-1:B.call(d,l,y)},merge:function(l,d){for(var y=+d.length,C=0,N=l.length;C<y;C++)l[N++]=d[C];return l.length=N,l},grep:function(l,d,y){for(var N=[],D=0,X=l.length,ue=!y;D<X;D++)!d(l[D],D)!==ue&&N.push(l[D]);return N},map:function(l,d,y){var C,N,D=0,X=[];if(je(l))for(C=l.length;D<C;D++)null!=(N=d(l[D],D,y))&&X.push(N);else for(D in l)null!=(N=d(l[D],D,y))&&X.push(N);return O(X)},guid:1,support:i}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=T[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,d){H["[object "+d+"]"]=d.toLowerCase()});var tt=function(l){var d,y,C,N,D,X,ue,le,Ce,He,rt,Le,Xe,Tt,on,Ft,Qn,sr,li,Vt="sizzle"+1*new Date,zt=l.document,jr=0,En=0,nr=Nn(),Tr=Nn(),zs=Nn(),Pi=Nn(),ia=function(Q,de){return Q===de&&(rt=!0),0},vo={}.hasOwnProperty,Lr=[],Rt=Lr.pop,rr=Lr.push,Bi=Lr.push,ci=Lr.slice,oo=function(Q,de){for(var be=0,Ye=Q.length;be<Ye;be++)if(Q[be]===de)return be;return-1},oa="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",hn="[\\x20\\t\\r\\n\\f]",gr="(?:\\\\[\\da-fA-F]{1,6}"+hn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Hi="\\["+hn+"*("+gr+")(?:"+hn+"*([*^$|!~]?=)"+hn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+gr+"))|)"+hn+"*\\]",aa=":("+gr+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Hi+")*)|.*)\\)|)",Rn=new RegExp(hn+"+","g"),Pn=new RegExp("^"+hn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+hn+"+$","g"),pn=new RegExp("^"+hn+"*,"+hn+"*"),qa=new RegExp("^"+hn+"*([>+~]|"+hn+")"+hn+"*"),gu=new RegExp(hn+"|>"),rl=new RegExp(aa),il=new RegExp("^"+gr+"$"),es={ID:new RegExp("^#("+gr+")"),CLASS:new RegExp("^\\.("+gr+")"),TAG:new RegExp("^("+gr+"|[*])"),ATTR:new RegExp("^"+Hi),PSEUDO:new RegExp("^"+aa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+hn+"*(even|odd|(([+-]|)(\\d*)n|)"+hn+"*(?:([+-]|)"+hn+"*(\\d+)|))"+hn+"*\\)|)","i"),bool:new RegExp("^(?:"+oa+")$","i"),needsContext:new RegExp("^"+hn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+hn+"*((?:-\\d)?\\d*)"+hn+"*\\)|)(?=[^-]|$)","i")},ol=/HTML$/i,xc=/^(?:input|select|textarea|button)$/i,Us=/^h\d$/i,Rr=/^[^{]+\{\s*\[native \w/,Er=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Do=/[+~]/,Ii=new RegExp("\\\\[\\da-fA-F]{1,6}"+hn+"?|\\\\([^\\r\\n\\f])","g"),mo=function(Q,de){var be="0x"+Q.slice(1)-65536;return de||(be<0?String.fromCharCode(be+65536):String.fromCharCode(be>>10|55296,1023&be|56320))},vr=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ts=function(Q,de){return de?"\0"===Q?"\ufffd":Q.slice(0,-1)+"\\"+Q.charCodeAt(Q.length-1).toString(16)+" ":"\\"+Q},vu=function(){Le()},zr=wt(function(Q){return!0===Q.disabled&&"fieldset"===Q.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Bi.apply(Lr=ci.call(zt.childNodes),zt.childNodes)}catch(Q){Bi={apply:Lr.length?function(de,be){rr.apply(de,ci.call(be))}:function(de,be){for(var Ye=de.length,Ie=0;de[Ye++]=be[Ie++];);de.length=Ye-1}}}function Gn(Q,de,be,Ye){var Ie,Je,Ge,dt,vt,Bt,jt,ct=de&&de.ownerDocument,gn=de?de.nodeType:9;if(be=be||[],"string"!=typeof Q||!Q||1!==gn&&9!==gn&&11!==gn)return be;if(!Ye&&(Le(de),de=de||Xe,on)){if(11!==gn&&(vt=Er.exec(Q)))if(Ie=vt[1]){if(9===gn){if(!(Ge=de.getElementById(Ie)))return be;if(Ge.id===Ie)return be.push(Ge),be}else if(ct&&(Ge=ct.getElementById(Ie))&&li(de,Ge)&&Ge.id===Ie)return be.push(Ge),be}else{if(vt[2])return Bi.apply(be,de.getElementsByTagName(Q)),be;if((Ie=vt[3])&&y.getElementsByClassName&&de.getElementsByClassName)return Bi.apply(be,de.getElementsByClassName(Ie)),be}if(y.qsa&&!Pi[Q+" "]&&(!Ft||!Ft.test(Q))&&(1!==gn||"object"!==de.nodeName.toLowerCase())){if(jt=Q,ct=de,1===gn&&(gu.test(Q)||qa.test(Q))){for(((ct=Do.test(Q)&&Te(de.parentNode)||de)!==de||!y.scope)&&((dt=de.getAttribute("id"))?dt=dt.replace(vr,ts):de.setAttribute("id",dt=Vt)),Je=(Bt=X(Q)).length;Je--;)Bt[Je]=(dt?"#"+dt:":scope")+" "+Be(Bt[Je]);jt=Bt.join(",")}try{return Bi.apply(be,ct.querySelectorAll(jt)),be}catch(vn){Pi(Q,!0)}finally{dt===Vt&&de.removeAttribute("id")}}}return le(Q.replace(Pn,"$1"),de,be,Ye)}function Nn(){var Q=[];return function de(be,Ye){return Q.push(be+" ")>C.cacheLength&&delete de[Q.shift()],de[be+" "]=Ye}}function Sn(Q){return Q[Vt]=!0,Q}function jn(Q){var de=Xe.createElement("fieldset");try{return!!Q(de)}catch(be){return!1}finally{de.parentNode&&de.parentNode.removeChild(de),de=null}}function Fo(Q,de){for(var be=Q.split("|"),Ye=be.length;Ye--;)C.attrHandle[be[Ye]]=de}function Ur(Q,de){var be=de&&Q,Ye=be&&1===Q.nodeType&&1===de.nodeType&&Q.sourceIndex-de.sourceIndex;if(Ye)return Ye;if(be)for(;be=be.nextSibling;)if(be===de)return-1;return Q?1:-1}function mu(Q){return function(de){return"input"===de.nodeName.toLowerCase()&&de.type===Q}}function yo(Q){return function(de){var be=de.nodeName.toLowerCase();return("input"===be||"button"===be)&&de.type===Q}}function yu(Q){return function(de){return"form"in de?de.parentNode&&!1===de.disabled?"label"in de?"label"in de.parentNode?de.parentNode.disabled===Q:de.disabled===Q:de.isDisabled===Q||de.isDisabled!==!Q&&zr(de)===Q:de.disabled===Q:"label"in de&&de.disabled===Q}}function ji(Q){return Sn(function(de){return de=+de,Sn(function(be,Ye){for(var Ie,Je=Q([],be.length,de),Ge=Je.length;Ge--;)be[Ie=Je[Ge]]&&(be[Ie]=!(Ye[Ie]=be[Ie]))})})}function Te(Q){return Q&&void 0!==Q.getElementsByTagName&&Q}for(d in y=Gn.support={},D=Gn.isXML=function(Q){var be=Q&&(Q.ownerDocument||Q).documentElement;return!ol.test(Q&&Q.namespaceURI||be&&be.nodeName||"HTML")},Le=Gn.setDocument=function(Q){var de,be,Ye=Q?Q.ownerDocument||Q:zt;return Ye==Xe||9!==Ye.nodeType||!Ye.documentElement||(Tt=(Xe=Ye).documentElement,on=!D(Xe),zt!=Xe&&(be=Xe.defaultView)&&be.top!==be&&(be.addEventListener?be.addEventListener("unload",vu,!1):be.attachEvent&&be.attachEvent("onunload",vu)),y.scope=jn(function(Ie){return Tt.appendChild(Ie).appendChild(Xe.createElement("div")),void 0!==Ie.querySelectorAll&&!Ie.querySelectorAll(":scope fieldset div").length}),y.attributes=jn(function(Ie){return Ie.className="i",!Ie.getAttribute("className")}),y.getElementsByTagName=jn(function(Ie){return Ie.appendChild(Xe.createComment("")),!Ie.getElementsByTagName("*").length}),y.getElementsByClassName=Rr.test(Xe.getElementsByClassName),y.getById=jn(function(Ie){return Tt.appendChild(Ie).id=Vt,!Xe.getElementsByName||!Xe.getElementsByName(Vt).length}),y.getById?(C.filter.ID=function(Ie){var Je=Ie.replace(Ii,mo);return function(Ge){return Ge.getAttribute("id")===Je}},C.find.ID=function(Ie,Je){if(void 0!==Je.getElementById&&on){var Ge=Je.getElementById(Ie);return Ge?[Ge]:[]}}):(C.filter.ID=function(Ie){var Je=Ie.replace(Ii,mo);return function(Ge){var dt=void 0!==Ge.getAttributeNode&&Ge.getAttributeNode("id");return dt&&dt.value===Je}},C.find.ID=function(Ie,Je){if(void 0!==Je.getElementById&&on){var Ge,dt,vt,Bt=Je.getElementById(Ie);if(Bt){if((Ge=Bt.getAttributeNode("id"))&&Ge.value===Ie)return[Bt];for(vt=Je.getElementsByName(Ie),dt=0;Bt=vt[dt++];)if((Ge=Bt.getAttributeNode("id"))&&Ge.value===Ie)return[Bt]}return[]}}),C.find.TAG=y.getElementsByTagName?function(Ie,Je){return void 0!==Je.getElementsByTagName?Je.getElementsByTagName(Ie):y.qsa?Je.querySelectorAll(Ie):void 0}:function(Ie,Je){var Ge,dt=[],vt=0,Bt=Je.getElementsByTagName(Ie);if("*"===Ie){for(;Ge=Bt[vt++];)1===Ge.nodeType&&dt.push(Ge);return dt}return Bt},C.find.CLASS=y.getElementsByClassName&&function(Ie,Je){if(void 0!==Je.getElementsByClassName&&on)return Je.getElementsByClassName(Ie)},Qn=[],Ft=[],(y.qsa=Rr.test(Xe.querySelectorAll))&&(jn(function(Ie){var Je;Tt.appendChild(Ie).innerHTML="<a id='"+Vt+"'></a><select id='"+Vt+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ie.querySelectorAll("[msallowcapture^='']").length&&Ft.push("[*^$]="+hn+"*(?:''|\"\")"),Ie.querySelectorAll("[selected]").length||Ft.push("\\["+hn+"*(?:value|"+oa+")"),Ie.querySelectorAll("[id~="+Vt+"-]").length||Ft.push("~="),(Je=Xe.createElement("input")).setAttribute("name",""),Ie.appendChild(Je),Ie.querySelectorAll("[name='']").length||Ft.push("\\["+hn+"*name"+hn+"*="+hn+"*(?:''|\"\")"),Ie.querySelectorAll(":checked").length||Ft.push(":checked"),Ie.querySelectorAll("a#"+Vt+"+*").length||Ft.push(".#.+[+~]"),Ie.querySelectorAll("\\\f"),Ft.push("[\\r\\n\\f]")}),jn(function(Ie){Ie.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Je=Xe.createElement("input");Je.setAttribute("type","hidden"),Ie.appendChild(Je).setAttribute("name","D"),Ie.querySelectorAll("[name=d]").length&&Ft.push("name"+hn+"*[*^$|!~]?="),2!==Ie.querySelectorAll(":enabled").length&&Ft.push(":enabled",":disabled"),Tt.appendChild(Ie).disabled=!0,2!==Ie.querySelectorAll(":disabled").length&&Ft.push(":enabled",":disabled"),Ie.querySelectorAll("*,:x"),Ft.push(",.*:")})),(y.matchesSelector=Rr.test(sr=Tt.matches||Tt.webkitMatchesSelector||Tt.mozMatchesSelector||Tt.oMatchesSelector||Tt.msMatchesSelector))&&jn(function(Ie){y.disconnectedMatch=sr.call(Ie,"*"),sr.call(Ie,"[s!='']:x"),Qn.push("!=",aa)}),Ft=Ft.length&&new RegExp(Ft.join("|")),Qn=Qn.length&&new RegExp(Qn.join("|")),de=Rr.test(Tt.compareDocumentPosition),li=de||Rr.test(Tt.contains)?function(Ie,Je){var Ge=9===Ie.nodeType?Ie.documentElement:Ie,dt=Je&&Je.parentNode;return Ie===dt||!(!dt||1!==dt.nodeType||!(Ge.contains?Ge.contains(dt):Ie.compareDocumentPosition&&16&Ie.compareDocumentPosition(dt)))}:function(Ie,Je){if(Je)for(;Je=Je.parentNode;)if(Je===Ie)return!0;return!1},ia=de?function(Ie,Je){if(Ie===Je)return rt=!0,0;var Ge=!Ie.compareDocumentPosition-!Je.compareDocumentPosition;return Ge||(1&(Ge=(Ie.ownerDocument||Ie)==(Je.ownerDocument||Je)?Ie.compareDocumentPosition(Je):1)||!y.sortDetached&&Je.compareDocumentPosition(Ie)===Ge?Ie==Xe||Ie.ownerDocument==zt&&li(zt,Ie)?-1:Je==Xe||Je.ownerDocument==zt&&li(zt,Je)?1:He?oo(He,Ie)-oo(He,Je):0:4&Ge?-1:1)}:function(Ie,Je){if(Ie===Je)return rt=!0,0;var Ge,dt=0,vt=Ie.parentNode,Bt=Je.parentNode,jt=[Ie],ct=[Je];if(!vt||!Bt)return Ie==Xe?-1:Je==Xe?1:vt?-1:Bt?1:He?oo(He,Ie)-oo(He,Je):0;if(vt===Bt)return Ur(Ie,Je);for(Ge=Ie;Ge=Ge.parentNode;)jt.unshift(Ge);for(Ge=Je;Ge=Ge.parentNode;)ct.unshift(Ge);for(;jt[dt]===ct[dt];)dt++;return dt?Ur(jt[dt],ct[dt]):jt[dt]==zt?-1:ct[dt]==zt?1:0}),Xe},Gn.matches=function(Q,de){return Gn(Q,null,null,de)},Gn.matchesSelector=function(Q,de){if(Le(Q),y.matchesSelector&&on&&!Pi[de+" "]&&(!Qn||!Qn.test(de))&&(!Ft||!Ft.test(de)))try{var be=sr.call(Q,de);if(be||y.disconnectedMatch||Q.document&&11!==Q.document.nodeType)return be}catch(Ye){Pi(de,!0)}return Gn(de,Xe,null,[Q]).length>0},Gn.contains=function(Q,de){return(Q.ownerDocument||Q)!=Xe&&Le(Q),li(Q,de)},Gn.attr=function(Q,de){(Q.ownerDocument||Q)!=Xe&&Le(Q);var be=C.attrHandle[de.toLowerCase()],Ye=be&&vo.call(C.attrHandle,de.toLowerCase())?be(Q,de,!on):void 0;return void 0!==Ye?Ye:y.attributes||!on?Q.getAttribute(de):(Ye=Q.getAttributeNode(de))&&Ye.specified?Ye.value:null},Gn.escape=function(Q){return(Q+"").replace(vr,ts)},Gn.error=function(Q){throw new Error("Syntax error, unrecognized expression: "+Q)},Gn.uniqueSort=function(Q){var de,be=[],Ye=0,Ie=0;if(rt=!y.detectDuplicates,He=!y.sortStable&&Q.slice(0),Q.sort(ia),rt){for(;de=Q[Ie++];)de===Q[Ie]&&(Ye=be.push(Ie));for(;Ye--;)Q.splice(be[Ye],1)}return He=null,Q},N=Gn.getText=function(Q){var de,be="",Ye=0,Ie=Q.nodeType;if(Ie){if(1===Ie||9===Ie||11===Ie){if("string"==typeof Q.textContent)return Q.textContent;for(Q=Q.firstChild;Q;Q=Q.nextSibling)be+=N(Q)}else if(3===Ie||4===Ie)return Q.nodeValue}else for(;de=Q[Ye++];)be+=N(de);return be},(C=Gn.selectors={cacheLength:50,createPseudo:Sn,match:es,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Q){return Q[1]=Q[1].replace(Ii,mo),Q[3]=(Q[3]||Q[4]||Q[5]||"").replace(Ii,mo),"~="===Q[2]&&(Q[3]=" "+Q[3]+" "),Q.slice(0,4)},CHILD:function(Q){return Q[1]=Q[1].toLowerCase(),"nth"===Q[1].slice(0,3)?(Q[3]||Gn.error(Q[0]),Q[4]=+(Q[4]?Q[5]+(Q[6]||1):2*("even"===Q[3]||"odd"===Q[3])),Q[5]=+(Q[7]+Q[8]||"odd"===Q[3])):Q[3]&&Gn.error(Q[0]),Q},PSEUDO:function(Q){var de,be=!Q[6]&&Q[2];return es.CHILD.test(Q[0])?null:(Q[3]?Q[2]=Q[4]||Q[5]||"":be&&rl.test(be)&&(de=X(be,!0))&&(de=be.indexOf(")",be.length-de)-be.length)&&(Q[0]=Q[0].slice(0,de),Q[2]=be.slice(0,de)),Q.slice(0,3))}},filter:{TAG:function(Q){var de=Q.replace(Ii,mo).toLowerCase();return"*"===Q?function(){return!0}:function(be){return be.nodeName&&be.nodeName.toLowerCase()===de}},CLASS:function(Q){var de=nr[Q+" "];return de||(de=new RegExp("(^|"+hn+")"+Q+"("+hn+"|$)"))&&nr(Q,function(be){return de.test("string"==typeof be.className&&be.className||void 0!==be.getAttribute&&be.getAttribute("class")||"")})},ATTR:function(Q,de,be){return function(Ye){var Ie=Gn.attr(Ye,Q);return null==Ie?"!="===de:!de||(Ie+="","="===de?Ie===be:"!="===de?Ie!==be:"^="===de?be&&0===Ie.indexOf(be):"*="===de?be&&Ie.indexOf(be)>-1:"$="===de?be&&Ie.slice(-be.length)===be:"~="===de?(" "+Ie.replace(Rn," ")+" ").indexOf(be)>-1:"|="===de&&(Ie===be||Ie.slice(0,be.length+1)===be+"-"))}},CHILD:function(Q,de,be,Ye,Ie){var Je="nth"!==Q.slice(0,3),Ge="last"!==Q.slice(-4),dt="of-type"===de;return 1===Ye&&0===Ie?function(vt){return!!vt.parentNode}:function(vt,Bt,jt){var ct,gn,vn,It,lr,hr,Gr=Je!==Ge?"nextSibling":"previousSibling",Wn=vt.parentNode,Sa=dt&&vt.nodeName.toLowerCase(),Bo=!jt&&!dt,fi=!1;if(Wn){if(Je){for(;Gr;){for(It=vt;It=It[Gr];)if(dt?It.nodeName.toLowerCase()===Sa:1===It.nodeType)return!1;hr=Gr="only"===Q&&!hr&&"nextSibling"}return!0}if(hr=[Ge?Wn.firstChild:Wn.lastChild],Ge&&Bo){for(fi=(lr=(ct=(gn=(vn=(It=Wn)[Vt]||(It[Vt]={}))[It.uniqueID]||(vn[It.uniqueID]={}))[Q]||[])[0]===jr&&ct[1])&&ct[2],It=lr&&Wn.childNodes[lr];It=++lr&&It&&It[Gr]||(fi=lr=0)||hr.pop();)if(1===It.nodeType&&++fi&&It===vt){gn[Q]=[jr,lr,fi];break}}else if(Bo&&(fi=lr=(ct=(gn=(vn=(It=vt)[Vt]||(It[Vt]={}))[It.uniqueID]||(vn[It.uniqueID]={}))[Q]||[])[0]===jr&&ct[1]),!1===fi)for(;(It=++lr&&It&&It[Gr]||(fi=lr=0)||hr.pop())&&((dt?It.nodeName.toLowerCase()!==Sa:1!==It.nodeType)||!++fi||(Bo&&((gn=(vn=It[Vt]||(It[Vt]={}))[It.uniqueID]||(vn[It.uniqueID]={}))[Q]=[jr,fi]),It!==vt)););return(fi-=Ie)===Ye||fi%Ye==0&&fi/Ye>=0}}},PSEUDO:function(Q,de){var be,Ye=C.pseudos[Q]||C.setFilters[Q.toLowerCase()]||Gn.error("unsupported pseudo: "+Q);return Ye[Vt]?Ye(de):Ye.length>1?(be=[Q,Q,"",de],C.setFilters.hasOwnProperty(Q.toLowerCase())?Sn(function(Ie,Je){for(var Ge,dt=Ye(Ie,de),vt=dt.length;vt--;)Ie[Ge=oo(Ie,dt[vt])]=!(Je[Ge]=dt[vt])}):function(Ie){return Ye(Ie,0,be)}):Ye}},pseudos:{not:Sn(function(Q){var de=[],be=[],Ye=ue(Q.replace(Pn,"$1"));return Ye[Vt]?Sn(function(Ie,Je,Ge,dt){for(var vt,Bt=Ye(Ie,null,dt,[]),jt=Ie.length;jt--;)(vt=Bt[jt])&&(Ie[jt]=!(Je[jt]=vt))}):function(Ie,Je,Ge){return de[0]=Ie,Ye(de,null,Ge,be),de[0]=null,!be.pop()}}),has:Sn(function(Q){return function(de){return Gn(Q,de).length>0}}),contains:Sn(function(Q){return Q=Q.replace(Ii,mo),function(de){return(de.textContent||N(de)).indexOf(Q)>-1}}),lang:Sn(function(Q){return il.test(Q||"")||Gn.error("unsupported lang: "+Q),Q=Q.replace(Ii,mo).toLowerCase(),function(de){var be;do{if(be=on?de.lang:de.getAttribute("xml:lang")||de.getAttribute("lang"))return(be=be.toLowerCase())===Q||0===be.indexOf(Q+"-")}while((de=de.parentNode)&&1===de.nodeType);return!1}}),target:function(Q){var de=l.location&&l.location.hash;return de&&de.slice(1)===Q.id},root:function(Q){return Q===Tt},focus:function(Q){return Q===Xe.activeElement&&(!Xe.hasFocus||Xe.hasFocus())&&!!(Q.type||Q.href||~Q.tabIndex)},enabled:yu(!1),disabled:yu(!0),checked:function(Q){var de=Q.nodeName.toLowerCase();return"input"===de&&!!Q.checked||"option"===de&&!!Q.selected},selected:function(Q){return!0===Q.selected},empty:function(Q){for(Q=Q.firstChild;Q;Q=Q.nextSibling)if(Q.nodeType<6)return!1;return!0},parent:function(Q){return!C.pseudos.empty(Q)},header:function(Q){return Us.test(Q.nodeName)},input:function(Q){return xc.test(Q.nodeName)},button:function(Q){var de=Q.nodeName.toLowerCase();return"input"===de&&"button"===Q.type||"button"===de},text:function(Q){var de;return"input"===Q.nodeName.toLowerCase()&&"text"===Q.type&&(null==(de=Q.getAttribute("type"))||"text"===de.toLowerCase())},first:ji(function(){return[0]}),last:ji(function(Q,de){return[de-1]}),eq:ji(function(Q,de,be){return[be<0?be+de:be]}),even:ji(function(Q,de){for(var be=0;be<de;be+=2)Q.push(be);return Q}),odd:ji(function(Q,de){for(var be=1;be<de;be+=2)Q.push(be);return Q}),lt:ji(function(Q,de,be){for(var Ye=be<0?be+de:be>de?de:be;--Ye>=0;)Q.push(Ye);return Q}),gt:ji(function(Q,de,be){for(var Ye=be<0?be+de:be;++Ye<de;)Q.push(Ye);return Q})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[d]=mu(d);for(d in{submit:!0,reset:!0})C.pseudos[d]=yo(d);function Ke(){}function Be(Q){for(var de=0,be=Q.length,Ye="";de<be;de++)Ye+=Q[de].value;return Ye}function wt(Q,de,be){var Ye=de.dir,Ie=de.next,Je=Ie||Ye,Ge=be&&"parentNode"===Je,dt=En++;return de.first?function(vt,Bt,jt){for(;vt=vt[Ye];)if(1===vt.nodeType||Ge)return Q(vt,Bt,jt);return!1}:function(vt,Bt,jt){var ct,gn,vn,It=[jr,dt];if(jt){for(;vt=vt[Ye];)if((1===vt.nodeType||Ge)&&Q(vt,Bt,jt))return!0}else for(;vt=vt[Ye];)if(1===vt.nodeType||Ge)if(gn=(vn=vt[Vt]||(vt[Vt]={}))[vt.uniqueID]||(vn[vt.uniqueID]={}),Ie&&Ie===vt.nodeName.toLowerCase())vt=vt[Ye]||vt;else{if((ct=gn[Je])&&ct[0]===jr&&ct[1]===dt)return It[2]=ct[2];if(gn[Je]=It,It[2]=Q(vt,Bt,jt))return!0}return!1}}function en(Q){return Q.length>1?function(de,be,Ye){for(var Ie=Q.length;Ie--;)if(!Q[Ie](de,be,Ye))return!1;return!0}:Q[0]}function ur(Q,de,be,Ye,Ie){for(var Je,Ge=[],dt=0,vt=Q.length,Bt=null!=de;dt<vt;dt++)(Je=Q[dt])&&(!be||be(Je,Ye,Ie))&&(Ge.push(Je),Bt&&de.push(dt));return Ge}function Bn(Q,de,be,Ye,Ie,Je){return Ye&&!Ye[Vt]&&(Ye=Bn(Ye)),Ie&&!Ie[Vt]&&(Ie=Bn(Ie,Je)),Sn(function(Ge,dt,vt,Bt){var jt,ct,gn,vn=[],It=[],lr=dt.length,hr=Ge||function In(Q,de,be){for(var Ye=0,Ie=de.length;Ye<Ie;Ye++)Gn(Q,de[Ye],be);return be}(de||"*",vt.nodeType?[vt]:vt,[]),Gr=!Q||!Ge&&de?hr:ur(hr,vn,Q,vt,Bt),Wn=be?Ie||(Ge?Q:lr||Ye)?[]:dt:Gr;if(be&&be(Gr,Wn,vt,Bt),Ye)for(jt=ur(Wn,It),Ye(jt,[],vt,Bt),ct=jt.length;ct--;)(gn=jt[ct])&&(Wn[It[ct]]=!(Gr[It[ct]]=gn));if(Ge){if(Ie||Q){if(Ie){for(jt=[],ct=Wn.length;ct--;)(gn=Wn[ct])&&jt.push(Gr[ct]=gn);Ie(null,Wn=[],jt,Bt)}for(ct=Wn.length;ct--;)(gn=Wn[ct])&&(jt=Ie?oo(Ge,gn):vn[ct])>-1&&(Ge[jt]=!(dt[jt]=gn))}}else Wn=ur(Wn===dt?Wn.splice(lr,Wn.length):Wn),Ie?Ie(null,dt,Wn,Bt):Bi.apply(dt,Wn)})}function sa(Q){for(var de,be,Ye,Ie=Q.length,Je=C.relative[Q[0].type],Ge=Je||C.relative[" "],dt=Je?1:0,vt=wt(function(ct){return ct===de},Ge,!0),Bt=wt(function(ct){return oo(de,ct)>-1},Ge,!0),jt=[function(ct,gn,vn){var It=!Je&&(vn||gn!==Ce)||((de=gn).nodeType?vt(ct,gn,vn):Bt(ct,gn,vn));return de=null,It}];dt<Ie;dt++)if(be=C.relative[Q[dt].type])jt=[wt(en(jt),be)];else{if((be=C.filter[Q[dt].type].apply(null,Q[dt].matches))[Vt]){for(Ye=++dt;Ye<Ie&&!C.relative[Q[Ye].type];Ye++);return Bn(dt>1&&en(jt),dt>1&&Be(Q.slice(0,dt-1).concat({value:" "===Q[dt-2].type?"*":""})).replace(Pn,"$1"),be,dt<Ye&&sa(Q.slice(dt,Ye)),Ye<Ie&&sa(Q=Q.slice(Ye)),Ye<Ie&&Be(Q))}jt.push(be)}return en(jt)}return Ke.prototype=C.filters=C.pseudos,C.setFilters=new Ke,X=Gn.tokenize=function(Q,de){var be,Ye,Ie,Je,Ge,dt,vt,Bt=Tr[Q+" "];if(Bt)return de?0:Bt.slice(0);for(Ge=Q,dt=[],vt=C.preFilter;Ge;){for(Je in(!be||(Ye=pn.exec(Ge)))&&(Ye&&(Ge=Ge.slice(Ye[0].length)||Ge),dt.push(Ie=[])),be=!1,(Ye=qa.exec(Ge))&&(be=Ye.shift(),Ie.push({value:be,type:Ye[0].replace(Pn," ")}),Ge=Ge.slice(be.length)),C.filter)(Ye=es[Je].exec(Ge))&&(!vt[Je]||(Ye=vt[Je](Ye)))&&(be=Ye.shift(),Ie.push({value:be,type:Je,matches:Ye}),Ge=Ge.slice(be.length));if(!be)break}return de?Ge.length:Ge?Gn.error(Q):Tr(Q,dt).slice(0)},ue=Gn.compile=function(Q,de){var be,Ye=[],Ie=[],Je=zs[Q+" "];if(!Je){for(de||(de=X(Q)),be=de.length;be--;)(Je=sa(de[be]))[Vt]?Ye.push(Je):Ie.push(Je);Je=zs(Q,function Vo(Q,de){var be=de.length>0,Ye=Q.length>0,Ie=function(Je,Ge,dt,vt,Bt){var jt,ct,gn,vn=0,It="0",lr=Je&&[],hr=[],Gr=Ce,Wn=Je||Ye&&C.find.TAG("*",Bt),Sa=jr+=null==Gr?1:Math.random()||.1,Bo=Wn.length;for(Bt&&(Ce=Ge==Xe||Ge||Bt);It!==Bo&&null!=(jt=Wn[It]);It++){if(Ye&&jt){for(ct=0,!Ge&&jt.ownerDocument!=Xe&&(Le(jt),dt=!on);gn=Q[ct++];)if(gn(jt,Ge||Xe,dt)){vt.push(jt);break}Bt&&(jr=Sa)}be&&((jt=!gn&&jt)&&vn--,Je&&lr.push(jt))}if(vn+=It,be&&It!==vn){for(ct=0;gn=de[ct++];)gn(lr,hr,Ge,dt);if(Je){if(vn>0)for(;It--;)lr[It]||hr[It]||(hr[It]=Rt.call(vt));hr=ur(hr)}Bi.apply(vt,hr),Bt&&!Je&&hr.length>0&&vn+de.length>1&&Gn.uniqueSort(vt)}return Bt&&(jr=Sa,Ce=Gr),lr};return be?Sn(Ie):Ie}(Ie,Ye)),Je.selector=Q}return Je},le=Gn.select=function(Q,de,be,Ye){var Ie,Je,Ge,dt,vt,Bt="function"==typeof Q&&Q,jt=!Ye&&X(Q=Bt.selector||Q);if(be=be||[],1===jt.length){if((Je=jt[0]=jt[0].slice(0)).length>2&&"ID"===(Ge=Je[0]).type&&9===de.nodeType&&on&&C.relative[Je[1].type]){if(!(de=(C.find.ID(Ge.matches[0].replace(Ii,mo),de)||[])[0]))return be;Bt&&(de=de.parentNode),Q=Q.slice(Je.shift().value.length)}for(Ie=es.needsContext.test(Q)?0:Je.length;Ie--&&!C.relative[dt=(Ge=Je[Ie]).type];)if((vt=C.find[dt])&&(Ye=vt(Ge.matches[0].replace(Ii,mo),Do.test(Je[0].type)&&Te(de.parentNode)||de))){if(Je.splice(Ie,1),!(Q=Ye.length&&Be(Je)))return Bi.apply(be,Ye),be;break}}return(Bt||ue(Q,jt))(Ye,de,!on,be,!de||Do.test(Q)&&Te(de.parentNode)||de),be},y.sortStable=Vt.split("").sort(ia).join("")===Vt,y.detectDuplicates=!!rt,Le(),y.sortDetached=jn(function(Q){return 1&Q.compareDocumentPosition(Xe.createElement("fieldset"))}),jn(function(Q){return Q.innerHTML="<a href='#'></a>","#"===Q.firstChild.getAttribute("href")})||Fo("type|href|height|width",function(Q,de,be){if(!be)return Q.getAttribute(de,"type"===de.toLowerCase()?1:2)}),(!y.attributes||!jn(function(Q){return Q.innerHTML="<input/>",Q.firstChild.setAttribute("value",""),""===Q.firstChild.getAttribute("value")}))&&Fo("value",function(Q,de,be){if(!be&&"input"===Q.nodeName.toLowerCase())return Q.defaultValue}),jn(function(Q){return null==Q.getAttribute("disabled")})||Fo(oa,function(Q,de,be){var Ye;if(!be)return!0===Q[de]?de.toLowerCase():(Ye=Q.getAttributeNode(de))&&Ye.specified?Ye.value:null}),Gn}(v);b.find=tt,b.expr=tt.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=tt.uniqueSort,b.text=tt.getText,b.isXMLDoc=tt.isXML,b.contains=tt.contains,b.escapeSelector=tt.escape;var et=function(l,d,y){for(var C=[],N=void 0!==y;(l=l[d])&&9!==l.nodeType;)if(1===l.nodeType){if(N&&b(l).is(y))break;C.push(l)}return C},ot=function(l,d){for(var y=[];l;l=l.nextSibling)1===l.nodeType&&l!==d&&y.push(l);return y},ut=b.expr.match.needsContext;function mt(l,d){return l.nodeName&&l.nodeName.toLowerCase()===d.toLowerCase()}var At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Xt(l,d,y){return se(d)?b.grep(l,function(C,N){return!!d.call(C,N,C)!==y}):d.nodeType?b.grep(l,function(C){return C===d!==y}):"string"!=typeof d?b.grep(l,function(C){return B.call(d,C)>-1!==y}):b.filter(d,l,y)}b.filter=function(l,d,y){var C=d[0];return y&&(l=":not("+l+")"),1===d.length&&1===C.nodeType?b.find.matchesSelector(C,l)?[C]:[]:b.find.matches(l,b.grep(d,function(N){return 1===N.nodeType}))},b.fn.extend({find:function(l){var d,y,C=this.length,N=this;if("string"!=typeof l)return this.pushStack(b(l).filter(function(){for(d=0;d<C;d++)if(b.contains(N[d],this))return!0}));for(y=this.pushStack([]),d=0;d<C;d++)b.find(l,N[d],y);return C>1?b.uniqueSort(y):y},filter:function(l){return this.pushStack(Xt(this,l||[],!1))},not:function(l){return this.pushStack(Xt(this,l||[],!0))},is:function(l){return!!Xt(this,"string"==typeof l&&ut.test(l)?b(l):l||[],!1).length}});var un,Ot=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Xn=b.fn.init=function(l,d,y){var C,N;if(!l)return this;if(y=y||un,"string"==typeof l){if(!(C="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:Ot.exec(l))||!C[1]&&d)return!d||d.jquery?(d||y).find(l):this.constructor(d).find(l);if(C[1]){if(b.merge(this,b.parseHTML(C[1],(d=d instanceof b?d[0]:d)&&d.nodeType?d.ownerDocument||d:he,!0)),At.test(C[1])&&b.isPlainObject(d))for(C in d)se(this[C])?this[C](d[C]):this.attr(C,d[C]);return this}return(N=he.getElementById(C[2]))&&(this[0]=N,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):se(l)?void 0!==y.ready?y.ready(l):l(b):b.makeArray(l,this)};Xn.prototype=b.fn,un=b(he);var Fr=/^(?:parents|prev(?:Until|All))/,ii={children:!0,contents:!0,next:!0,prev:!0};function _r(l,d){for(;(l=l[d])&&1!==l.nodeType;);return l}b.fn.extend({has:function(l){var d=b(l,this),y=d.length;return this.filter(function(){for(var C=0;C<y;C++)if(b.contains(this,d[C]))return!0})},closest:function(l,d){var y,C=0,N=this.length,D=[],X="string"!=typeof l&&b(l);if(!ut.test(l))for(;C<N;C++)for(y=this[C];y&&y!==d;y=y.parentNode)if(y.nodeType<11&&(X?X.index(y)>-1:1===y.nodeType&&b.find.matchesSelector(y,l))){D.push(y);break}return this.pushStack(D.length>1?b.uniqueSort(D):D)},index:function(l){return l?"string"==typeof l?B.call(b(l),this[0]):B.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,d){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(l,d))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),b.each({parent:function(l){var d=l.parentNode;return d&&11!==d.nodeType?d:null},parents:function(l){return et(l,"parentNode")},parentsUntil:function(l,d,y){return et(l,"parentNode",y)},next:function(l){return _r(l,"nextSibling")},prev:function(l){return _r(l,"previousSibling")},nextAll:function(l){return et(l,"nextSibling")},prevAll:function(l){return et(l,"previousSibling")},nextUntil:function(l,d,y){return et(l,"nextSibling",y)},prevUntil:function(l,d,y){return et(l,"previousSibling",y)},siblings:function(l){return ot((l.parentNode||{}).firstChild,l)},children:function(l){return ot(l.firstChild)},contents:function(l){return null!=l.contentDocument&&x(l.contentDocument)?l.contentDocument:(mt(l,"template")&&(l=l.content||l),b.merge([],l.childNodes))}},function(l,d){b.fn[l]=function(y,C){var N=b.map(this,d,y);return"Until"!==l.slice(-5)&&(C=y),C&&"string"==typeof C&&(N=b.filter(C,N)),this.length>1&&(ii[l]||b.uniqueSort(N),Fr.test(l)&&N.reverse()),this.pushStack(N)}});var fr=/[^\x20\t\r\n\f]+/g;function er(l){return l}function Ue(l){throw l}function qe(l,d,y,C){var N;try{l&&se(N=l.promise)?N.call(l).done(d).fail(y):l&&se(N=l.then)?N.call(l,d,y):d.apply(void 0,[l].slice(C))}catch(D){y.apply(void 0,[D])}}b.Callbacks=function(l){l="string"==typeof l?function Vr(l){var d={};return b.each(l.match(fr)||[],function(y,C){d[C]=!0}),d}(l):b.extend({},l);var d,y,C,N,D=[],X=[],ue=-1,le=function(){for(N=N||l.once,C=d=!0;X.length;ue=-1)for(y=X.shift();++ue<D.length;)!1===D[ue].apply(y[0],y[1])&&l.stopOnFalse&&(ue=D.length,y=!1);l.memory||(y=!1),d=!1,N&&(D=y?[]:"")},Ce={add:function(){return D&&(y&&!d&&(ue=D.length-1,X.push(y)),function He(rt){b.each(rt,function(Le,Xe){se(Xe)?(!l.unique||!Ce.has(Xe))&&D.push(Xe):Xe&&Xe.length&&"string"!==Ee(Xe)&&He(Xe)})}(arguments),y&&!d&&le()),this},remove:function(){return b.each(arguments,function(He,rt){for(var Le;(Le=b.inArray(rt,D,Le))>-1;)D.splice(Le,1),Le<=ue&&ue--}),this},has:function(He){return He?b.inArray(He,D)>-1:D.length>0},empty:function(){return D&&(D=[]),this},disable:function(){return N=X=[],D=y="",this},disabled:function(){return!D},lock:function(){return N=X=[],!y&&!d&&(D=y=""),this},locked:function(){return!!N},fireWith:function(He,rt){return N||(rt=[He,(rt=rt||[]).slice?rt.slice():rt],X.push(rt),d||le()),this},fire:function(){return Ce.fireWith(this,arguments),this},fired:function(){return!!C}};return Ce},b.extend({Deferred:function(l){var d=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],y="pending",C={state:function(){return y},always:function(){return N.done(arguments).fail(arguments),this},catch:function(D){return C.then(null,D)},pipe:function(){var D=arguments;return b.Deferred(function(X){b.each(d,function(ue,le){var Ce=se(D[le[4]])&&D[le[4]];N[le[1]](function(){var He=Ce&&Ce.apply(this,arguments);He&&se(He.promise)?He.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[le[0]+"With"](this,Ce?[He]:arguments)})}),D=null}).promise()},then:function(D,X,ue){var le=0;function Ce(He,rt,Le,Xe){return function(){var Tt=this,on=arguments,Ft=function(){var sr,li;if(!(He<le)){if((sr=Le.apply(Tt,on))===rt.promise())throw new TypeError("Thenable self-resolution");se(li=sr&&("object"==typeof sr||"function"==typeof sr)&&sr.then)?Xe?li.call(sr,Ce(le,rt,er,Xe),Ce(le,rt,Ue,Xe)):(le++,li.call(sr,Ce(le,rt,er,Xe),Ce(le,rt,Ue,Xe),Ce(le,rt,er,rt.notifyWith))):(Le!==er&&(Tt=void 0,on=[sr]),(Xe||rt.resolveWith)(Tt,on))}},Qn=Xe?Ft:function(){try{Ft()}catch(sr){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(sr,Qn.stackTrace),He+1>=le&&(Le!==Ue&&(Tt=void 0,on=[sr]),rt.rejectWith(Tt,on))}};He?Qn():(b.Deferred.getStackHook&&(Qn.stackTrace=b.Deferred.getStackHook()),v.setTimeout(Qn))}}return b.Deferred(function(He){d[0][3].add(Ce(0,He,se(ue)?ue:er,He.notifyWith)),d[1][3].add(Ce(0,He,se(D)?D:er)),d[2][3].add(Ce(0,He,se(X)?X:Ue))}).promise()},promise:function(D){return null!=D?b.extend(D,C):C}},N={};return b.each(d,function(D,X){var ue=X[2],le=X[5];C[X[1]]=ue.add,le&&ue.add(function(){y=le},d[3-D][2].disable,d[3-D][3].disable,d[0][2].lock,d[0][3].lock),ue.add(X[3].fire),N[X[0]]=function(){return N[X[0]+"With"](this===N?void 0:this,arguments),this},N[X[0]+"With"]=ue.fireWith}),C.promise(N),l&&l.call(N,N),N},when:function(l){var d=arguments.length,y=d,C=Array(y),N=A.call(arguments),D=b.Deferred(),X=function(ue){return function(le){C[ue]=this,N[ue]=arguments.length>1?A.call(arguments):le,--d||D.resolveWith(C,N)}};if(d<=1&&(qe(l,D.done(X(y)).resolve,D.reject,!d),"pending"===D.state()||se(N[y]&&N[y].then)))return D.then();for(;y--;)qe(N[y],X(y),D.reject);return D.promise()}});var st=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(l,d){v.console&&v.console.warn&&l&&st.test(l.name)&&v.console.warn("jQuery.Deferred exception: "+l.message,l.stack,d)},b.readyException=function(l){v.setTimeout(function(){throw l})};var xt=b.Deferred();function Dt(){he.removeEventListener("DOMContentLoaded",Dt),v.removeEventListener("load",Dt),b.ready()}b.fn.ready=function(l){return xt.then(l).catch(function(d){b.readyException(d)}),this},b.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--b.readyWait:b.isReady)||(b.isReady=!0,!(!0!==l&&--b.readyWait>0)&&xt.resolveWith(he,[b]))}}),b.ready.then=xt.then,"complete"===he.readyState||"loading"!==he.readyState&&!he.documentElement.doScroll?v.setTimeout(b.ready):(he.addEventListener("DOMContentLoaded",Dt),v.addEventListener("load",Dt));var sn=function(l,d,y,C,N,D,X){var ue=0,le=l.length,Ce=null==y;if("object"===Ee(y))for(ue in N=!0,y)sn(l,d,ue,y[ue],!0,D,X);else if(void 0!==C&&(N=!0,se(C)||(X=!0),Ce&&(X?(d.call(l,C),d=null):(Ce=d,d=function(He,rt,Le){return Ce.call(b(He),Le)})),d))for(;ue<le;ue++)d(l[ue],y,X?C:C.call(l[ue],ue,d(l[ue],y)));return N?l:Ce?d.call(l):le?d(l[0],y):D},Mt=/^-ms-/,or=/-([a-z])/g;function Ni(l,d){return d.toUpperCase()}function ln(l){return l.replace(Mt,"ms-").replace(or,Ni)}var Zt=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function R(){this.expando=b.expando+R.uid++}R.uid=1,R.prototype={cache:function(l){var d=l[this.expando];return d||(d={},Zt(l)&&(l.nodeType?l[this.expando]=d:Object.defineProperty(l,this.expando,{value:d,configurable:!0}))),d},set:function(l,d,y){var C,N=this.cache(l);if("string"==typeof d)N[ln(d)]=y;else for(C in d)N[ln(C)]=d[C];return N},get:function(l,d){return void 0===d?this.cache(l):l[this.expando]&&l[this.expando][ln(d)]},access:function(l,d,y){return void 0===d||d&&"string"==typeof d&&void 0===y?this.get(l,d):(this.set(l,d,y),void 0!==y?y:d)},remove:function(l,d){var y,C=l[this.expando];if(void 0!==C){if(void 0!==d)for((y=(d=Array.isArray(d)?d.map(ln):(d=ln(d))in C?[d]:d.match(fr)||[]).length);y--;)delete C[d[y]];(void 0===d||b.isEmptyObject(C))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var d=l[this.expando];return void 0!==d&&!b.isEmptyObject(d)}};var G=new R,re=new R,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$e=/[A-Z]/g;function pt(l,d,y){var C;if(void 0===y&&1===l.nodeType)if(C="data-"+d.replace($e,"-$&").toLowerCase(),"string"==typeof(y=l.getAttribute(C))){try{y=function We(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:xe.test(l)?JSON.parse(l):l)}(y)}catch(N){}re.set(l,d,y)}else y=void 0;return y}b.extend({hasData:function(l){return re.hasData(l)||G.hasData(l)},data:function(l,d,y){return re.access(l,d,y)},removeData:function(l,d){re.remove(l,d)},_data:function(l,d,y){return G.access(l,d,y)},_removeData:function(l,d){G.remove(l,d)}}),b.fn.extend({data:function(l,d){var y,C,N,D=this[0],X=D&&D.attributes;if(void 0===l){if(this.length&&(N=re.get(D),1===D.nodeType&&!G.get(D,"hasDataAttrs"))){for(y=X.length;y--;)X[y]&&0===(C=X[y].name).indexOf("data-")&&(C=ln(C.slice(5)),pt(D,C,N[C]));G.set(D,"hasDataAttrs",!0)}return N}return"object"==typeof l?this.each(function(){re.set(this,l)}):sn(this,function(ue){var le;if(D&&void 0===ue)return void 0!==(le=re.get(D,l))||void 0!==(le=pt(D,l))?le:void 0;this.each(function(){re.set(this,l,ue)})},null,d,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),b.extend({queue:function(l,d,y){var C;if(l)return C=G.get(l,d=(d||"fx")+"queue"),y&&(!C||Array.isArray(y)?C=G.access(l,d,b.makeArray(y)):C.push(y)),C||[]},dequeue:function(l,d){var y=b.queue(l,d=d||"fx"),C=y.length,N=y.shift(),D=b._queueHooks(l,d);"inprogress"===N&&(N=y.shift(),C--),N&&("fx"===d&&y.unshift("inprogress"),delete D.stop,N.call(l,function(){b.dequeue(l,d)},D)),!C&&D&&D.empty.fire()},_queueHooks:function(l,d){var y=d+"queueHooks";return G.get(l,y)||G.access(l,y,{empty:b.Callbacks("once memory").add(function(){G.remove(l,[d+"queue",y])})})}}),b.fn.extend({queue:function(l,d){var y=2;return"string"!=typeof l&&(d=l,l="fx",y--),arguments.length<y?b.queue(this[0],l):void 0===d?this:this.each(function(){var C=b.queue(this,l,d);b._queueHooks(this,l),"fx"===l&&"inprogress"!==C[0]&&b.dequeue(this,l)})},dequeue:function(l){return this.each(function(){b.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,d){var y,C=1,N=b.Deferred(),D=this,X=this.length,ue=function(){--C||N.resolveWith(D,[D])};for("string"!=typeof l&&(d=l,l=void 0),l=l||"fx";X--;)(y=G.get(D[X],l+"queueHooks"))&&y.empty&&(C++,y.empty.add(ue));return ue(),N.promise(d)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Lt=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),dn=["Top","Right","Bottom","Left"],wn=he.documentElement,cn=function(l){return b.contains(l.ownerDocument,l)},ar={composed:!0};wn.getRootNode&&(cn=function(l){return b.contains(l.ownerDocument,l)||l.getRootNode(ar)===l.ownerDocument});var Jn=function(l,d){return"none"===(l=d||l).style.display||""===l.style.display&&cn(l)&&"none"===b.css(l,"display")};function oi(l,d,y,C){var N,D,X=20,ue=C?function(){return C.cur()}:function(){return b.css(l,d,"")},le=ue(),Ce=y&&y[3]||(b.cssNumber[d]?"":"px"),He=l.nodeType&&(b.cssNumber[d]||"px"!==Ce&&+le)&&Lt.exec(b.css(l,d));if(He&&He[3]!==Ce){for(Ce=Ce||He[3],He=+(le/=2)||1;X--;)b.style(l,d,He+Ce),(1-D)*(1-(D=ue()/le||.5))<=0&&(X=0),He/=D;b.style(l,d,(He*=2)+Ce),y=y||[]}return y&&(He=+He||+le||0,N=y[1]?He+(y[1]+1)*y[2]:+y[2],C&&(C.unit=Ce,C.start=He,C.end=N)),N}var Fn={};function Et(l){var d,y=l.ownerDocument,C=l.nodeName,N=Fn[C];return N||(d=y.body.appendChild(y.createElement(C)),N=b.css(d,"display"),d.parentNode.removeChild(d),"none"===N&&(N="block"),Fn[C]=N,N)}function Un(l,d){for(var y,C,N=[],D=0,X=l.length;D<X;D++)(C=l[D]).style&&(y=C.style.display,d?("none"===y&&(N[D]=G.get(C,"display")||null,N[D]||(C.style.display="")),""===C.style.display&&Jn(C)&&(N[D]=Et(C))):"none"!==y&&(N[D]="none",G.set(C,"display",y)));for(D=0;D<X;D++)null!=N[D]&&(l[D].style.display=N[D]);return l}b.fn.extend({show:function(){return Un(this,!0)},hide:function(){return Un(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Jn(this)?b(this).show():b(this).hide()})}});var d,y,tr=/^(?:checkbox|radio)$/i,br=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ai=/^$|^module$|\/(?:java|ecma)script/i;d=he.createDocumentFragment().appendChild(he.createElement("div")),(y=he.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),d.appendChild(y),i.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",i.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",i.option=!!d.lastChild;var pr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dr(l,d){var y;return y=void 0!==l.getElementsByTagName?l.getElementsByTagName(d||"*"):void 0!==l.querySelectorAll?l.querySelectorAll(d||"*"):[],void 0===d||d&&mt(l,d)?b.merge([l],y):y}function Jo(l,d){for(var y=0,C=l.length;y<C;y++)G.set(l[y],"globalEval",!d||G.get(d[y],"globalEval"))}pr.tbody=pr.tfoot=pr.colgroup=pr.caption=pr.thead,pr.th=pr.td,i.option||(pr.optgroup=pr.option=[1,"<select multiple='multiple'>","</select>"]);var za=/<|&#?\w+;/;function Mo(l,d,y,C,N){for(var D,X,ue,le,Ce,He,rt=d.createDocumentFragment(),Le=[],Xe=0,Tt=l.length;Xe<Tt;Xe++)if((D=l[Xe])||0===D)if("object"===Ee(D))b.merge(Le,D.nodeType?[D]:D);else if(za.test(D)){for(X=X||rt.appendChild(d.createElement("div")),ue=(br.exec(D)||["",""])[1].toLowerCase(),X.innerHTML=(le=pr[ue]||pr._default)[1]+b.htmlPrefilter(D)+le[2],He=le[0];He--;)X=X.lastChild;b.merge(Le,X.childNodes),(X=rt.firstChild).textContent=""}else Le.push(d.createTextNode(D));for(rt.textContent="",Xe=0;D=Le[Xe++];)if(C&&b.inArray(D,C)>-1)N&&N.push(D);else if(Ce=cn(D),X=dr(rt.appendChild(D),"script"),Ce&&Jo(X),y)for(He=0;D=X[He++];)ai.test(D.type||"")&&y.push(D);return rt}var Qo=/^([^.]*)(?:\.(.+)|)/;function me(){return!0}function mi(){return!1}function co(l,d){return l===function Zo(){try{return he.activeElement}catch(l){}}()==("focus"===d)}function yt(l,d,y,C,N,D){var X,ue;if("object"==typeof d){for(ue in"string"!=typeof y&&(C=C||y,y=void 0),d)yt(l,ue,y,C,d[ue],D);return l}if(null==C&&null==N?(N=y,C=y=void 0):null==N&&("string"==typeof y?(N=C,C=void 0):(N=C,C=y,y=void 0)),!1===N)N=mi;else if(!N)return l;return 1===D&&(X=N,N=function(le){return b().off(le),X.apply(this,arguments)},N.guid=X.guid||(X.guid=b.guid++)),l.each(function(){b.event.add(this,d,N,C,y)})}function si(l,d,y){y?(G.set(l,d,!1),b.event.add(l,d,{namespace:!1,handler:function(C){var N,D,X=G.get(this,d);if(1&C.isTrigger&&this[d]){if(X.length)(b.event.special[d]||{}).delegateType&&C.stopPropagation();else if(X=A.call(arguments),G.set(this,d,X),N=y(this,d),this[d](),X!==(D=G.get(this,d))||N?G.set(this,d,!1):D={},X!==D)return C.stopImmediatePropagation(),C.preventDefault(),D&&D.value}else X.length&&(G.set(this,d,{value:b.event.trigger(b.extend(X[0],b.Event.prototype),X.slice(1),this)}),C.stopImmediatePropagation())}})):void 0===G.get(l,d)&&b.event.add(l,d,me)}b.event={global:{},add:function(l,d,y,C,N){var D,X,ue,le,Ce,He,rt,Le,Xe,Tt,on,Ft=G.get(l);if(Zt(l))for(y.handler&&(y=(D=y).handler,N=D.selector),N&&b.find.matchesSelector(wn,N),y.guid||(y.guid=b.guid++),(le=Ft.events)||(le=Ft.events=Object.create(null)),(X=Ft.handle)||(X=Ft.handle=function(Qn){return void 0!==b&&b.event.triggered!==Qn.type?b.event.dispatch.apply(l,arguments):void 0}),Ce=(d=(d||"").match(fr)||[""]).length;Ce--;)Xe=on=(ue=Qo.exec(d[Ce])||[])[1],Tt=(ue[2]||"").split(".").sort(),Xe&&(rt=b.event.special[Xe]||{},rt=b.event.special[Xe=(N?rt.delegateType:rt.bindType)||Xe]||{},He=b.extend({type:Xe,origType:on,data:C,handler:y,guid:y.guid,selector:N,needsContext:N&&b.expr.match.needsContext.test(N),namespace:Tt.join(".")},D),(Le=le[Xe])||((Le=le[Xe]=[]).delegateCount=0,(!rt.setup||!1===rt.setup.call(l,C,Tt,X))&&l.addEventListener&&l.addEventListener(Xe,X)),rt.add&&(rt.add.call(l,He),He.handler.guid||(He.handler.guid=y.guid)),N?Le.splice(Le.delegateCount++,0,He):Le.push(He),b.event.global[Xe]=!0)},remove:function(l,d,y,C,N){var D,X,ue,le,Ce,He,rt,Le,Xe,Tt,on,Ft=G.hasData(l)&&G.get(l);if(Ft&&(le=Ft.events)){for(Ce=(d=(d||"").match(fr)||[""]).length;Ce--;)if(Xe=on=(ue=Qo.exec(d[Ce])||[])[1],Tt=(ue[2]||"").split(".").sort(),Xe){for(rt=b.event.special[Xe]||{},Le=le[Xe=(C?rt.delegateType:rt.bindType)||Xe]||[],ue=ue[2]&&new RegExp("(^|\\.)"+Tt.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=D=Le.length;D--;)He=Le[D],(N||on===He.origType)&&(!y||y.guid===He.guid)&&(!ue||ue.test(He.namespace))&&(!C||C===He.selector||"**"===C&&He.selector)&&(Le.splice(D,1),He.selector&&Le.delegateCount--,rt.remove&&rt.remove.call(l,He));X&&!Le.length&&((!rt.teardown||!1===rt.teardown.call(l,Tt,Ft.handle))&&b.removeEvent(l,Xe,Ft.handle),delete le[Xe])}else for(Xe in le)b.event.remove(l,Xe+d[Ce],y,C,!0);b.isEmptyObject(le)&&G.remove(l,"handle events")}},dispatch:function(l){var d,y,C,N,D,X,ue=new Array(arguments.length),le=b.event.fix(l),Ce=(G.get(this,"events")||Object.create(null))[le.type]||[],He=b.event.special[le.type]||{};for(ue[0]=le,d=1;d<arguments.length;d++)ue[d]=arguments[d];if(le.delegateTarget=this,!He.preDispatch||!1!==He.preDispatch.call(this,le)){for(X=b.event.handlers.call(this,le,Ce),d=0;(N=X[d++])&&!le.isPropagationStopped();)for(le.currentTarget=N.elem,y=0;(D=N.handlers[y++])&&!le.isImmediatePropagationStopped();)(!le.rnamespace||!1===D.namespace||le.rnamespace.test(D.namespace))&&(le.handleObj=D,le.data=D.data,void 0!==(C=((b.event.special[D.origType]||{}).handle||D.handler).apply(N.elem,ue))&&!1===(le.result=C)&&(le.preventDefault(),le.stopPropagation()));return He.postDispatch&&He.postDispatch.call(this,le),le.result}},handlers:function(l,d){var y,C,N,D,X,ue=[],le=d.delegateCount,Ce=l.target;if(le&&Ce.nodeType&&!("click"===l.type&&l.button>=1))for(;Ce!==this;Ce=Ce.parentNode||this)if(1===Ce.nodeType&&("click"!==l.type||!0!==Ce.disabled)){for(D=[],X={},y=0;y<le;y++)void 0===X[N=(C=d[y]).selector+" "]&&(X[N]=C.needsContext?b(N,this).index(Ce)>-1:b.find(N,this,null,[Ce]).length),X[N]&&D.push(C);D.length&&ue.push({elem:Ce,handlers:D})}return Ce=this,le<d.length&&ue.push({elem:Ce,handlers:d.slice(le)}),ue},addProp:function(l,d){Object.defineProperty(b.Event.prototype,l,{enumerable:!0,configurable:!0,get:se(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(y){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(l){return l[b.expando]?l:new b.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var d=this||l;return tr.test(d.type)&&d.click&&mt(d,"input")&&si(d,"click",me),!1},trigger:function(l){var d=this||l;return tr.test(d.type)&&d.click&&mt(d,"input")&&si(d,"click"),!0},_default:function(l){var d=l.target;return tr.test(d.type)&&d.click&&mt(d,"input")&&G.get(d,"click")||mt(d,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},b.removeEvent=function(l,d,y){l.removeEventListener&&l.removeEventListener(d,y)},b.Event=function(l,d){if(!(this instanceof b.Event))return new b.Event(l,d);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?me:mi,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,d&&b.extend(this,d),this.timeStamp=l&&l.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:mi,isPropagationStopped:mi,isImmediatePropagationStopped:mi,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=me,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=me,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=me,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(l,d){b.event.special[l]={setup:function(){return si(this,l,co),!1},trigger:function(){return si(this,l),!0},_default:function(){return!0},delegateType:d}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,d){b.event.special[l]={delegateType:d,bindType:d,handle:function(y){var C,N=this,D=y.relatedTarget,X=y.handleObj;return(!D||D!==N&&!b.contains(N,D))&&(y.type=X.origType,C=X.handler.apply(this,arguments),y.type=d),C}}}),b.fn.extend({on:function(l,d,y,C){return yt(this,l,d,y,C)},one:function(l,d,y,C){return yt(this,l,d,y,C,1)},off:function(l,d,y){var C,N;if(l&&l.preventDefault&&l.handleObj)return C=l.handleObj,b(l.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if("object"==typeof l){for(N in l)this.off(N,d,l[N]);return this}return(!1===d||"function"==typeof d)&&(y=d,d=void 0),!1===y&&(y=mi),this.each(function(){b.event.remove(this,l,y,d)})}});var Oo=/<script|<style|<link/i,ko=/checked\s*(?:[^=]|=\s*.checked.)/i,fo=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Cr(l,d){return mt(l,"table")&&mt(11!==d.nodeType?d:d.firstChild,"tr")&&b(l).children("tbody")[0]||l}function qo(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function Br(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function Ua(l,d){var y,C,N,X,ue,le;if(1===d.nodeType){if(G.hasData(l)&&(le=G.get(l).events))for(N in G.remove(d,"handle events"),le)for(y=0,C=le[N].length;y<C;y++)b.event.add(d,N,le[N][y]);re.hasData(l)&&(X=re.access(l),ue=b.extend({},X),re.set(d,ue))}}function Ga(l,d){var y=d.nodeName.toLowerCase();"input"===y&&tr.test(l.type)?d.checked=l.checked:("input"===y||"textarea"===y)&&(d.defaultValue=l.defaultValue)}function Yr(l,d,y,C){d=O(d);var N,D,X,ue,le,Ce,He=0,rt=l.length,Le=rt-1,Xe=d[0],Tt=se(Xe);if(Tt||rt>1&&"string"==typeof Xe&&!i.checkClone&&ko.test(Xe))return l.each(function(on){var Ft=l.eq(on);Tt&&(d[0]=Xe.call(this,on,Ft.html())),Yr(Ft,d,y,C)});if(rt&&(D=(N=Mo(d,l[0].ownerDocument,!1,l,C)).firstChild,1===N.childNodes.length&&(N=D),D||C)){for(ue=(X=b.map(dr(N,"script"),qo)).length;He<rt;He++)le=N,He!==Le&&(le=b.clone(le,!0,!0),ue&&b.merge(X,dr(le,"script"))),y.call(l[He],le,He);if(ue)for(Ce=X[X.length-1].ownerDocument,b.map(X,Br),He=0;He<ue;He++)ai.test((le=X[He]).type||"")&&!G.access(le,"globalEval")&&b.contains(Ce,le)&&(le.src&&"module"!==(le.type||"").toLowerCase()?b._evalUrl&&!le.noModule&&b._evalUrl(le.src,{nonce:le.nonce||le.getAttribute("nonce")},Ce):ye(le.textContent.replace(fo,""),le,Ce))}return l}function ga(l,d,y){for(var C,N=d?b.filter(d,l):l,D=0;null!=(C=N[D]);D++)!y&&1===C.nodeType&&b.cleanData(dr(C)),C.parentNode&&(y&&cn(C)&&Jo(dr(C,"script")),C.parentNode.removeChild(C));return l}b.extend({htmlPrefilter:function(l){return l},clone:function(l,d,y){var C,N,D,X,ue=l.cloneNode(!0),le=cn(l);if(!(i.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||b.isXMLDoc(l)))for(X=dr(ue),C=0,N=(D=dr(l)).length;C<N;C++)Ga(D[C],X[C]);if(d)if(y)for(D=D||dr(l),X=X||dr(ue),C=0,N=D.length;C<N;C++)Ua(D[C],X[C]);else Ua(l,ue);return(X=dr(ue,"script")).length>0&&Jo(X,!le&&dr(l,"script")),ue},cleanData:function(l){for(var d,y,C,N=b.event.special,D=0;void 0!==(y=l[D]);D++)if(Zt(y)){if(d=y[G.expando]){if(d.events)for(C in d.events)N[C]?b.event.remove(y,C):b.removeEvent(y,C,d.handle);y[G.expando]=void 0}y[re.expando]&&(y[re.expando]=void 0)}}}),b.fn.extend({detach:function(l){return ga(this,l,!0)},remove:function(l){return ga(this,l)},text:function(l){return sn(this,function(d){return void 0===d?b.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=d)})},null,l,arguments.length)},append:function(){return Yr(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Cr(this,l).appendChild(l)})},prepend:function(){return Yr(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Cr(this,l);d.insertBefore(l,d.firstChild)}})},before:function(){return Yr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Yr(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,d=0;null!=(l=this[d]);d++)1===l.nodeType&&(b.cleanData(dr(l,!1)),l.textContent="");return this},clone:function(l,d){return l=null!=l&&l,d=null==d?l:d,this.map(function(){return b.clone(this,l,d)})},html:function(l){return sn(this,function(d){var y=this[0]||{},C=0,N=this.length;if(void 0===d&&1===y.nodeType)return y.innerHTML;if("string"==typeof d&&!Oo.test(d)&&!pr[(br.exec(d)||["",""])[1].toLowerCase()]){d=b.htmlPrefilter(d);try{for(;C<N;C++)1===(y=this[C]||{}).nodeType&&(b.cleanData(dr(y,!1)),y.innerHTML=d);y=0}catch(D){}}y&&this.empty().append(d)},null,l,arguments.length)},replaceWith:function(){var l=[];return Yr(this,arguments,function(d){var y=this.parentNode;b.inArray(this,l)<0&&(b.cleanData(dr(this)),y&&y.replaceChild(d,this))},l)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){b.fn[l]=function(y){for(var C,N=[],D=b(y),X=D.length-1,ue=0;ue<=X;ue++)C=ue===X?this:this.clone(!0),b(D[ue])[d](C),M.apply(N,C.get());return this.pushStack(N)}});var ho=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),va=function(l){var d=l.ownerDocument.defaultView;return(!d||!d.opener)&&(d=v),d.getComputedStyle(l)},gt=function(l,d,y){var C,N,D={};for(N in d)D[N]=l.style[N],l.style[N]=d[N];for(N in C=y.call(l),d)l.style[N]=D[N];return C},vs=new RegExp(dn.join("|"),"i");function Ki(l,d,y){var C,N,D,X,ue=l.style;return(y=y||va(l))&&(""===(X=y.getPropertyValue(d)||y[d])&&!cn(l)&&(X=b.style(l,d)),!i.pixelBoxStyles()&&ho.test(X)&&vs.test(d)&&(C=ue.width,N=ue.minWidth,D=ue.maxWidth,ue.minWidth=ue.maxWidth=ue.width=X,X=y.width,ue.width=C,ue.minWidth=N,ue.maxWidth=D)),void 0!==X?X+"":X}function Wa(l,d){return{get:function(){if(!l())return(this.get=d).apply(this,arguments);delete this.get}}}!function(){function l(){if(Ce){le.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ce.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",wn.appendChild(le).appendChild(Ce);var He=v.getComputedStyle(Ce);y="1%"!==He.top,ue=12===d(He.marginLeft),Ce.style.right="60%",D=36===d(He.right),C=36===d(He.width),Ce.style.position="absolute",N=12===d(Ce.offsetWidth/3),wn.removeChild(le),Ce=null}}function d(He){return Math.round(parseFloat(He))}var y,C,N,D,X,ue,le=he.createElement("div"),Ce=he.createElement("div");!Ce.style||(Ce.style.backgroundClip="content-box",Ce.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===Ce.style.backgroundClip,b.extend(i,{boxSizingReliable:function(){return l(),C},pixelBoxStyles:function(){return l(),D},pixelPosition:function(){return l(),y},reliableMarginLeft:function(){return l(),ue},scrollboxSize:function(){return l(),N},reliableTrDimensions:function(){var He,rt,Le,Xe;return null==X&&(He=he.createElement("table"),rt=he.createElement("tr"),Le=he.createElement("div"),He.style.cssText="position:absolute;left:-11111px;border-collapse:separate",rt.style.cssText="border:1px solid",rt.style.height="1px",Le.style.height="9px",Le.style.display="block",wn.appendChild(He).appendChild(rt).appendChild(Le),Xe=v.getComputedStyle(rt),X=parseInt(Xe.height,10)+parseInt(Xe.borderTopWidth,10)+parseInt(Xe.borderBottomWidth,10)===rt.offsetHeight,wn.removeChild(He)),X}}))}();var $a=["Webkit","Moz","ms"],Vn=he.createElement("div").style,ea={};function Ji(l){return b.cssProps[l]||ea[l]||(l in Vn?l:ea[l]=function js(l){for(var d=l[0].toUpperCase()+l.slice(1),y=$a.length;y--;)if((l=$a[y]+d)in Vn)return l}(l)||l)}var po=/^(none|table(?!-c[ea]).+)/,Qi=/^--/,qt={position:"absolute",visibility:"hidden",display:"block"},ui={letterSpacing:"0",fontWeight:"400"};function Pt(l,d,y){var C=Lt.exec(d);return C?Math.max(0,C[2]-(y||0))+(C[3]||"px"):d}function Xr(l,d,y,C,N,D){var X="width"===d?1:0,ue=0,le=0;if(y===(C?"border":"content"))return 0;for(;X<4;X+=2)"margin"===y&&(le+=b.css(l,y+dn[X],!0,N)),C?("content"===y&&(le-=b.css(l,"padding"+dn[X],!0,N)),"margin"!==y&&(le-=b.css(l,"border"+dn[X]+"Width",!0,N))):(le+=b.css(l,"padding"+dn[X],!0,N),"padding"!==y?le+=b.css(l,"border"+dn[X]+"Width",!0,N):ue+=b.css(l,"border"+dn[X]+"Width",!0,N));return!C&&D>=0&&(le+=Math.max(0,Math.ceil(l["offset"+d[0].toUpperCase()+d.slice(1)]-D-le-ue-.5))||0),le}function Di(l,d,y){var C=va(l),D=(!i.boxSizingReliable()||y)&&"border-box"===b.css(l,"boxSizing",!1,C),X=D,ue=Ki(l,d,C),le="offset"+d[0].toUpperCase()+d.slice(1);if(ho.test(ue)){if(!y)return ue;ue="auto"}return(!i.boxSizingReliable()&&D||!i.reliableTrDimensions()&&mt(l,"tr")||"auto"===ue||!parseFloat(ue)&&"inline"===b.css(l,"display",!1,C))&&l.getClientRects().length&&(D="border-box"===b.css(l,"boxSizing",!1,C),(X=le in l)&&(ue=l[le])),(ue=parseFloat(ue)||0)+Xr(l,d,y||(D?"border":"content"),X,C,ue)+"px"}function _n(l,d,y,C,N){return new _n.prototype.init(l,d,y,C,N)}b.extend({cssHooks:{opacity:{get:function(l,d){if(d){var y=Ki(l,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,d,y,C){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var N,D,X,ue=ln(d),le=Qi.test(d),Ce=l.style;if(le||(d=Ji(ue)),X=b.cssHooks[d]||b.cssHooks[ue],void 0===y)return X&&"get"in X&&void 0!==(N=X.get(l,!1,C))?N:Ce[d];if("string"==(D=typeof y)&&(N=Lt.exec(y))&&N[1]&&(y=oi(l,d,N),D="number"),null==y||y!=y)return;"number"===D&&!le&&(y+=N&&N[3]||(b.cssNumber[ue]?"":"px")),!i.clearCloneStyle&&""===y&&0===d.indexOf("background")&&(Ce[d]="inherit"),(!X||!("set"in X)||void 0!==(y=X.set(l,y,C)))&&(le?Ce.setProperty(d,y):Ce[d]=y)}},css:function(l,d,y,C){var N,D,X,ue=ln(d);return Qi.test(d)||(d=Ji(ue)),(X=b.cssHooks[d]||b.cssHooks[ue])&&"get"in X&&(N=X.get(l,!0,y)),void 0===N&&(N=Ki(l,d,C)),"normal"===N&&d in ui&&(N=ui[d]),""===y||y?(D=parseFloat(N),!0===y||isFinite(D)?D||0:N):N}}),b.each(["height","width"],function(l,d){b.cssHooks[d]={get:function(y,C,N){if(C)return!po.test(b.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Di(y,d,N):gt(y,qt,function(){return Di(y,d,N)})},set:function(y,C,N){var D,X=va(y),ue=!i.scrollboxSize()&&"absolute"===X.position,Ce=(ue||N)&&"border-box"===b.css(y,"boxSizing",!1,X),He=N?Xr(y,d,N,Ce,X):0;return Ce&&ue&&(He-=Math.ceil(y["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(X[d])-Xr(y,d,"border",!1,X)-.5)),He&&(D=Lt.exec(C))&&"px"!==(D[3]||"px")&&(y.style[d]=C,C=b.css(y,d)),Pt(0,C,He)}}}),b.cssHooks.marginLeft=Wa(i.reliableMarginLeft,function(l,d){if(d)return(parseFloat(Ki(l,"marginLeft"))||l.getBoundingClientRect().left-gt(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(l,d){b.cssHooks[l+d]={expand:function(y){for(var C=0,N={},D="string"==typeof y?y.split(" "):[y];C<4;C++)N[l+dn[C]+d]=D[C]||D[C-2]||D[0];return N}},"margin"!==l&&(b.cssHooks[l+d].set=Pt)}),b.fn.extend({css:function(l,d){return sn(this,function(y,C,N){var D,X,ue={},le=0;if(Array.isArray(C)){for(D=va(y),X=C.length;le<X;le++)ue[C[le]]=b.css(y,C[le],!1,D);return ue}return void 0!==N?b.style(y,C,N):b.css(y,C)},l,d,arguments.length>1)}}),b.Tween=_n,(_n.prototype={constructor:_n,init:function(l,d,y,C,N,D){this.elem=l,this.prop=y,this.easing=N||b.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=C,this.unit=D||(b.cssNumber[y]?"":"px")},cur:function(){var l=_n.propHooks[this.prop];return l&&l.get?l.get(this):_n.propHooks._default.get(this)},run:function(l){var d,y=_n.propHooks[this.prop];return this.pos=d=this.options.duration?b.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):_n.propHooks._default.set(this),this}}).init.prototype=_n.prototype,(_n.propHooks={_default:{get:function(l){var d;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(d=b.css(l.elem,l.prop,""))&&"auto"!==d?d:0},set:function(l){b.fx.step[l.prop]?b.fx.step[l.prop](l):1!==l.elem.nodeType||!b.cssHooks[l.prop]&&null==l.elem.style[Ji(l.prop)]?l.elem[l.prop]=l.now:b.style(l.elem,l.prop,l.now+l.unit)}}}).scrollTop=_n.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},b.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},b.fx=_n.prototype.init,b.fx.step={};var Zi,kr,Ya=/^(?:toggle|show|hide)$/,qi=/queueHooks$/;function eo(){kr&&(!1===he.hidden&&v.requestAnimationFrame?v.requestAnimationFrame(eo):v.setTimeout(eo,b.fx.interval),b.fx.tick())}function Fi(){return v.setTimeout(function(){Zi=void 0}),Zi=Date.now()}function to(l,d){var y,C=0,N={height:l};for(d=d?1:0;C<4;C+=2-d)N["margin"+(y=dn[C])]=N["padding"+y]=l;return d&&(N.opacity=N.width=l),N}function ta(l,d,y){for(var C,N=(wr.tweeners[d]||[]).concat(wr.tweeners["*"]),D=0,X=N.length;D<X;D++)if(C=N[D].call(y,d,l))return C}function wr(l,d,y){var C,N,D=0,X=wr.prefilters.length,ue=b.Deferred().always(function(){delete le.elem}),le=function(){if(N)return!1;for(var rt=Zi||Fi(),Le=Math.max(0,Ce.startTime+Ce.duration-rt),Tt=1-(Le/Ce.duration||0),on=0,Ft=Ce.tweens.length;on<Ft;on++)Ce.tweens[on].run(Tt);return ue.notifyWith(l,[Ce,Tt,Le]),Tt<1&&Ft?Le:(Ft||ue.notifyWith(l,[Ce,1,0]),ue.resolveWith(l,[Ce]),!1)},Ce=ue.promise({elem:l,props:b.extend({},d),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},y),originalProperties:d,originalOptions:y,startTime:Zi||Fi(),duration:y.duration,tweens:[],createTween:function(rt,Le){var Xe=b.Tween(l,Ce.opts,rt,Le,Ce.opts.specialEasing[rt]||Ce.opts.easing);return Ce.tweens.push(Xe),Xe},stop:function(rt){var Le=0,Xe=rt?Ce.tweens.length:0;if(N)return this;for(N=!0;Le<Xe;Le++)Ce.tweens[Le].run(1);return rt?(ue.notifyWith(l,[Ce,1,0]),ue.resolveWith(l,[Ce,rt])):ue.rejectWith(l,[Ce,rt]),this}}),He=Ce.props;for(function Hr(l,d){var y,C,N,D,X;for(y in l)if(N=d[C=ln(y)],D=l[y],Array.isArray(D)&&(N=D[1],D=l[y]=D[0]),y!==C&&(l[C]=D,delete l[y]),(X=b.cssHooks[C])&&"expand"in X)for(y in D=X.expand(D),delete l[C],D)y in l||(l[y]=D[y],d[y]=N);else d[C]=N}(He,Ce.opts.specialEasing);D<X;D++)if(C=wr.prefilters[D].call(Ce,l,He,Ce.opts))return se(C.stop)&&(b._queueHooks(Ce.elem,Ce.opts.queue).stop=C.stop.bind(C)),C;return b.map(He,ta,Ce),se(Ce.opts.start)&&Ce.opts.start.call(l,Ce),Ce.progress(Ce.opts.progress).done(Ce.opts.done,Ce.opts.complete).fail(Ce.opts.fail).always(Ce.opts.always),b.fx.timer(b.extend(le,{elem:l,anim:Ce,queue:Ce.opts.queue})),Ce}b.Animation=b.extend(wr,{tweeners:{"*":[function(l,d){var y=this.createTween(l,d);return oi(y.elem,l,Lt.exec(d),y),y}]},tweener:function(l,d){se(l)?(d=l,l=["*"]):l=l.match(fr);for(var y,C=0,N=l.length;C<N;C++)(wr.tweeners[y=l[C]]=wr.tweeners[y]||[]).unshift(d)},prefilters:[function ms(l,d,y){var C,N,D,X,ue,le,Ce,He,rt="width"in d||"height"in d,Le=this,Xe={},Tt=l.style,on=l.nodeType&&Jn(l),Ft=G.get(l,"fxshow");for(C in y.queue||(null==(X=b._queueHooks(l,"fx")).unqueued&&(X.unqueued=0,ue=X.empty.fire,X.empty.fire=function(){X.unqueued||ue()}),X.unqueued++,Le.always(function(){Le.always(function(){X.unqueued--,b.queue(l,"fx").length||X.empty.fire()})})),d)if(Ya.test(N=d[C])){if(delete d[C],D=D||"toggle"===N,N===(on?"hide":"show")){if("show"!==N||!Ft||void 0===Ft[C])continue;on=!0}Xe[C]=Ft&&Ft[C]||b.style(l,C)}if((le=!b.isEmptyObject(d))||!b.isEmptyObject(Xe))for(C in rt&&1===l.nodeType&&(y.overflow=[Tt.overflow,Tt.overflowX,Tt.overflowY],null==(Ce=Ft&&Ft.display)&&(Ce=G.get(l,"display")),"none"===(He=b.css(l,"display"))&&(Ce?He=Ce:(Un([l],!0),Ce=l.style.display||Ce,He=b.css(l,"display"),Un([l]))),("inline"===He||"inline-block"===He&&null!=Ce)&&"none"===b.css(l,"float")&&(le||(Le.done(function(){Tt.display=Ce}),null==Ce&&(Ce="none"===(He=Tt.display)?"":He)),Tt.display="inline-block")),y.overflow&&(Tt.overflow="hidden",Le.always(function(){Tt.overflow=y.overflow[0],Tt.overflowX=y.overflow[1],Tt.overflowY=y.overflow[2]})),le=!1,Xe)le||(Ft?"hidden"in Ft&&(on=Ft.hidden):Ft=G.access(l,"fxshow",{display:Ce}),D&&(Ft.hidden=!on),on&&Un([l],!0),Le.done(function(){for(C in on||Un([l]),G.remove(l,"fxshow"),Xe)b.style(l,C,Xe[C])})),le=ta(on?Ft[C]:0,C,Le),C in Ft||(Ft[C]=le.start,on&&(le.end=le.start,le.start=0))}],prefilter:function(l,d){d?wr.prefilters.unshift(l):wr.prefilters.push(l)}}),b.speed=function(l,d,y){var C=l&&"object"==typeof l?b.extend({},l):{complete:y||!y&&d||se(l)&&l,duration:l,easing:y&&d||d&&!se(d)&&d};return b.fx.off?C.duration=0:"number"!=typeof C.duration&&(C.duration=C.duration in b.fx.speeds?b.fx.speeds[C.duration]:b.fx.speeds._default),(null==C.queue||!0===C.queue)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){se(C.old)&&C.old.call(this),C.queue&&b.dequeue(this,C.queue)},C},b.fn.extend({fadeTo:function(l,d,y,C){return this.filter(Jn).css("opacity",0).show().end().animate({opacity:d},l,y,C)},animate:function(l,d,y,C){var N=b.isEmptyObject(l),D=b.speed(d,y,C),X=function(){var ue=wr(this,b.extend({},l),D);(N||G.get(this,"finish"))&&ue.stop(!0)};return X.finish=X,N||!1===D.queue?this.each(X):this.queue(D.queue,X)},stop:function(l,d,y){var C=function(N){var D=N.stop;delete N.stop,D(y)};return"string"!=typeof l&&(y=d,d=l,l=void 0),d&&this.queue(l||"fx",[]),this.each(function(){var N=!0,D=null!=l&&l+"queueHooks",X=b.timers,ue=G.get(this);if(D)ue[D]&&ue[D].stop&&C(ue[D]);else for(D in ue)ue[D]&&ue[D].stop&&qi.test(D)&&C(ue[D]);for(D=X.length;D--;)X[D].elem===this&&(null==l||X[D].queue===l)&&(X[D].anim.stop(y),N=!1,X.splice(D,1));(N||!y)&&b.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var d,y=G.get(this),C=y[l+"queue"],N=y[l+"queueHooks"],D=b.timers,X=C?C.length:0;for(y.finish=!0,b.queue(this,l,[]),N&&N.stop&&N.stop.call(this,!0),d=D.length;d--;)D[d].elem===this&&D[d].queue===l&&(D[d].anim.stop(!0),D.splice(d,1));for(d=0;d<X;d++)C[d]&&C[d].finish&&C[d].finish.call(this);delete y.finish})}}),b.each(["toggle","show","hide"],function(l,d){var y=b.fn[d];b.fn[d]=function(C,N,D){return null==C||"boolean"==typeof C?y.apply(this,arguments):this.animate(to(d,!0),C,N,D)}}),b.each({slideDown:to("show"),slideUp:to("hide"),slideToggle:to("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,d){b.fn[l]=function(y,C,N){return this.animate(d,y,C,N)}}),b.timers=[],b.fx.tick=function(){var l,d=0,y=b.timers;for(Zi=Date.now();d<y.length;d++)!(l=y[d])()&&y[d]===l&&y.splice(d--,1);y.length||b.fx.stop(),Zi=void 0},b.fx.timer=function(l){b.timers.push(l),b.fx.start()},b.fx.interval=13,b.fx.start=function(){kr||(kr=!0,eo())},b.fx.stop=function(){kr=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(l,d){return l=b.fx&&b.fx.speeds[l]||l,this.queue(d=d||"fx",function(y,C){var N=v.setTimeout(y,l);C.stop=function(){v.clearTimeout(N)}})},function(){var l=he.createElement("input"),y=he.createElement("select").appendChild(he.createElement("option"));l.type="checkbox",i.checkOn=""!==l.value,i.optSelected=y.selected,(l=he.createElement("input")).value="t",l.type="radio",i.radioValue="t"===l.value}();var Sr,Zr=b.expr.attrHandle;b.fn.extend({attr:function(l,d){return sn(this,b.attr,l,d,arguments.length>1)},removeAttr:function(l){return this.each(function(){b.removeAttr(this,l)})}}),b.extend({attr:function(l,d,y){var C,N,D=l.nodeType;if(3!==D&&8!==D&&2!==D)return void 0===l.getAttribute?b.prop(l,d,y):((1!==D||!b.isXMLDoc(l))&&(N=b.attrHooks[d.toLowerCase()]||(b.expr.match.bool.test(d)?Sr:void 0)),void 0!==y?null===y?void b.removeAttr(l,d):N&&"set"in N&&void 0!==(C=N.set(l,y,d))?C:(l.setAttribute(d,y+""),y):N&&"get"in N&&null!==(C=N.get(l,d))?C:null==(C=b.find.attr(l,d))?void 0:C)},attrHooks:{type:{set:function(l,d){if(!i.radioValue&&"radio"===d&&mt(l,"input")){var y=l.value;return l.setAttribute("type",d),y&&(l.value=y),d}}}},removeAttr:function(l,d){var y,C=0,N=d&&d.match(fr);if(N&&1===l.nodeType)for(;y=N[C++];)l.removeAttribute(y)}}),Sr={set:function(l,d,y){return!1===d?b.removeAttr(l,y):l.setAttribute(y,y),y}},b.each(b.expr.match.bool.source.match(/\w+/g),function(l,d){var y=Zr[d]||b.find.attr;Zr[d]=function(C,N,D){var X,ue,le=N.toLowerCase();return D||(ue=Zr[le],Zr[le]=X,X=null!=y(C,N,D)?le:null,Zr[le]=ue),X}});var ma=/^(?:input|select|textarea|button)$/i,na=/^(?:a|area)$/i;function yi(l){return(l.match(fr)||[]).join(" ")}function Kr(l){return l.getAttribute&&l.getAttribute("class")||""}function no(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(fr)||[]}b.fn.extend({prop:function(l,d){return sn(this,b.prop,l,d,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[b.propFix[l]||l]})}}),b.extend({prop:function(l,d,y){var C,N,D=l.nodeType;if(3!==D&&8!==D&&2!==D)return(1!==D||!b.isXMLDoc(l))&&(N=b.propHooks[d=b.propFix[d]||d]),void 0!==y?N&&"set"in N&&void 0!==(C=N.set(l,y,d))?C:l[d]=y:N&&"get"in N&&null!==(C=N.get(l,d))?C:l[d]},propHooks:{tabIndex:{get:function(l){var d=b.find.attr(l,"tabindex");return d?parseInt(d,10):ma.test(l.nodeName)||na.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),i.optSelected||(b.propHooks.selected={get:function(l){return null},set:function(l){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(l){var d,y,C,N,D,X,ue,le=0;if(se(l))return this.each(function(Ce){b(this).addClass(l.call(this,Ce,Kr(this)))});if((d=no(l)).length)for(;y=this[le++];)if(N=Kr(y),C=1===y.nodeType&&" "+yi(N)+" "){for(X=0;D=d[X++];)C.indexOf(" "+D+" ")<0&&(C+=D+" ");N!==(ue=yi(C))&&y.setAttribute("class",ue)}return this},removeClass:function(l){var d,y,C,N,D,X,ue,le=0;if(se(l))return this.each(function(Ce){b(this).removeClass(l.call(this,Ce,Kr(this)))});if(!arguments.length)return this.attr("class","");if((d=no(l)).length)for(;y=this[le++];)if(N=Kr(y),C=1===y.nodeType&&" "+yi(N)+" "){for(X=0;D=d[X++];)for(;C.indexOf(" "+D+" ")>-1;)C=C.replace(" "+D+" "," ");N!==(ue=yi(C))&&y.setAttribute("class",ue)}return this},toggleClass:function(l,d){var y=typeof l,C="string"===y||Array.isArray(l);return"boolean"==typeof d&&C?d?this.addClass(l):this.removeClass(l):se(l)?this.each(function(N){b(this).toggleClass(l.call(this,N,Kr(this),d),d)}):this.each(function(){var N,D,X,ue;if(C)for(D=0,X=b(this),ue=no(l);N=ue[D++];)X.hasClass(N)?X.removeClass(N):X.addClass(N);else(void 0===l||"boolean"===y)&&((N=Kr(this))&&G.set(this,"__className__",N),this.setAttribute&&this.setAttribute("class",N||!1===l?"":G.get(this,"__className__")||""))})},hasClass:function(l){var d,y,C=0;for(d=" "+l+" ";y=this[C++];)if(1===y.nodeType&&(" "+yi(Kr(y))+" ").indexOf(d)>-1)return!0;return!1}});var Lo=/\r/g;b.fn.extend({val:function(l){var d,y,C,N=this[0];return arguments.length?(C=se(l),this.each(function(D){var X;1===this.nodeType&&(null==(X=C?l.call(this,D,b(this).val()):l)?X="":"number"==typeof X?X+="":Array.isArray(X)&&(X=b.map(X,function(ue){return null==ue?"":ue+""})),(!(d=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])||!("set"in d)||void 0===d.set(this,X,"value"))&&(this.value=X))})):N?(d=b.valHooks[N.type]||b.valHooks[N.nodeName.toLowerCase()])&&"get"in d&&void 0!==(y=d.get(N,"value"))?y:"string"==typeof(y=N.value)?y.replace(Lo,""):null==y?"":y:void 0}}),b.extend({valHooks:{option:{get:function(l){var d=b.find.attr(l,"value");return null!=d?d:yi(b.text(l))}},select:{get:function(l){var d,y,C,N=l.options,D=l.selectedIndex,X="select-one"===l.type,ue=X?null:[],le=X?D+1:N.length;for(C=D<0?le:X?D:0;C<le;C++)if(((y=N[C]).selected||C===D)&&!y.disabled&&(!y.parentNode.disabled||!mt(y.parentNode,"optgroup"))){if(d=b(y).val(),X)return d;ue.push(d)}return ue},set:function(l,d){for(var y,C,N=l.options,D=b.makeArray(d),X=N.length;X--;)((C=N[X]).selected=b.inArray(b.valHooks.option.get(C),D)>-1)&&(y=!0);return y||(l.selectedIndex=-1),D}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(l,d){if(Array.isArray(d))return l.checked=b.inArray(b(l).val(),d)>-1}},i.checkOn||(b.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})}),i.focusin="onfocusin"in v;var qr=/^(?:focusinfocus|focusoutblur)$/,ro=function(l){l.stopPropagation()};b.extend(b.event,{trigger:function(l,d,y,C){var N,D,X,ue,le,Ce,He,rt,Le=[y||he],Xe=Y.call(l,"type")?l.type:l,Tt=Y.call(l,"namespace")?l.namespace.split("."):[];if(D=rt=X=y=y||he,3!==y.nodeType&&8!==y.nodeType&&!qr.test(Xe+b.event.triggered)&&(Xe.indexOf(".")>-1&&(Tt=Xe.split("."),Xe=Tt.shift(),Tt.sort()),le=Xe.indexOf(":")<0&&"on"+Xe,(l=l[b.expando]?l:new b.Event(Xe,"object"==typeof l&&l)).isTrigger=C?2:3,l.namespace=Tt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Tt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=y),d=null==d?[l]:b.makeArray(d,[l]),He=b.event.special[Xe]||{},C||!He.trigger||!1!==He.trigger.apply(y,d))){if(!C&&!He.noBubble&&!ge(y)){for(qr.test((ue=He.delegateType||Xe)+Xe)||(D=D.parentNode);D;D=D.parentNode)Le.push(D),X=D;X===(y.ownerDocument||he)&&Le.push(X.defaultView||X.parentWindow||v)}for(N=0;(D=Le[N++])&&!l.isPropagationStopped();)rt=D,l.type=N>1?ue:He.bindType||Xe,(Ce=(G.get(D,"events")||Object.create(null))[l.type]&&G.get(D,"handle"))&&Ce.apply(D,d),(Ce=le&&D[le])&&Ce.apply&&Zt(D)&&(l.result=Ce.apply(D,d),!1===l.result&&l.preventDefault());return l.type=Xe,!C&&!l.isDefaultPrevented()&&(!He._default||!1===He._default.apply(Le.pop(),d))&&Zt(y)&&le&&se(y[Xe])&&!ge(y)&&((X=y[le])&&(y[le]=null),b.event.triggered=Xe,l.isPropagationStopped()&&rt.addEventListener(Xe,ro),y[Xe](),l.isPropagationStopped()&&rt.removeEventListener(Xe,ro),b.event.triggered=void 0,X&&(y[le]=X)),l.result}},simulate:function(l,d,y){var C=b.extend(new b.Event,y,{type:l,isSimulated:!0});b.event.trigger(C,null,d)}}),b.fn.extend({trigger:function(l,d){return this.each(function(){b.event.trigger(l,d,this)})},triggerHandler:function(l,d){var y=this[0];if(y)return b.event.trigger(l,d,y,!0)}}),i.focusin||b.each({focus:"focusin",blur:"focusout"},function(l,d){var y=function(C){b.event.simulate(d,C.target,b.event.fix(C))};b.event.special[d]={setup:function(){var C=this.ownerDocument||this.document||this,N=G.access(C,d);N||C.addEventListener(l,y,!0),G.access(C,d,(N||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,N=G.access(C,d)-1;N?G.access(C,d,N):(C.removeEventListener(l,y,!0),G.remove(C,d))}}});var Ti=v.location,go={guid:Date.now()},ya=/\?/;b.parseXML=function(l){var d,y;if(!l||"string"!=typeof l)return null;try{d=(new v.DOMParser).parseFromString(l,"text/xml")}catch(C){}return y=d&&d.getElementsByTagName("parsererror")[0],(!d||y)&&b.error("Invalid XML: "+(y?b.map(y.childNodes,function(C){return C.textContent}).join("\n"):l)),d};var xa=/\[\]$/,ra=/\r?\n/g,Ro=/^(?:submit|button|image|reset|file)$/i,Xa=/^(?:input|select|textarea|keygen)/i;function _a(l,d,y,C){var N;if(Array.isArray(d))b.each(d,function(D,X){y||xa.test(l)?C(l,X):_a(l+"["+("object"==typeof X&&null!=X?D:"")+"]",X,y,C)});else if(y||"object"!==Ee(d))C(l,d);else for(N in d)_a(l+"["+N+"]",d[N],y,C)}b.param=function(l,d){var y,C=[],N=function(D,X){var ue=se(X)?X():X;C[C.length]=encodeURIComponent(D)+"="+encodeURIComponent(null==ue?"":ue)};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!b.isPlainObject(l))b.each(l,function(){N(this.name,this.value)});else for(y in l)_a(y,l[y],d,N);return C.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=b.prop(this,"elements");return l?b.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!b(this).is(":disabled")&&Xa.test(this.nodeName)&&!Ro.test(l)&&(this.checked||!tr.test(l))}).map(function(l,d){var y=b(this).val();return null==y?null:Array.isArray(y)?b.map(y,function(C){return{name:d.name,value:C.replace(ra,"\r\n")}}):{name:d.name,value:y.replace(ra,"\r\n")}}).get()}});var Ka=/%20/g,ba=/#.*$/,Ja=/([?&])_=[^&]*/,Qa=/^(.*?):[ \t]*([^\r\n]*)$/gm,Za=/^(?:GET|HEAD)$/,Ca=/^\/\//,Ei={},No={},xs="*/".concat("*"),io=he.createElement("a");function Vi(l){return function(d,y){"string"!=typeof d&&(y=d,d="*");var C,N=0,D=d.toLowerCase().match(fr)||[];if(se(y))for(;C=D[N++];)"+"===C[0]?(C=C.slice(1)||"*",(l[C]=l[C]||[]).unshift(y)):(l[C]=l[C]||[]).push(y)}}function wa(l,d,y,C){var N={},D=l===No;function X(ue){var le;return N[ue]=!0,b.each(l[ue]||[],function(Ce,He){var rt=He(d,y,C);return"string"!=typeof rt||D||N[rt]?D?!(le=rt):void 0:(d.dataTypes.unshift(rt),X(rt),!1)}),le}return X(d.dataTypes[0])||!N["*"]&&X("*")}function Hn(l,d){var y,C,N=b.ajaxSettings.flatOptions||{};for(y in d)void 0!==d[y]&&((N[y]?l:C||(C={}))[y]=d[y]);return C&&b.extend(!0,l,C),l}io.href=Ti.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ti.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ti.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xs,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,d){return d?Hn(Hn(l,b.ajaxSettings),d):Hn(b.ajaxSettings,l)},ajaxPrefilter:Vi(Ei),ajaxTransport:Vi(No),ajax:function(l,d){"object"==typeof l&&(d=l,l=void 0);var y,C,N,D,X,ue,le,Ce,He,rt,Le=b.ajaxSetup({},d=d||{}),Xe=Le.context||Le,Tt=Le.context&&(Xe.nodeType||Xe.jquery)?b(Xe):b.event,on=b.Deferred(),Ft=b.Callbacks("once memory"),Qn=Le.statusCode||{},sr={},li={},Vt="canceled",zt={readyState:0,getResponseHeader:function(En){var nr;if(le){if(!D)for(D={};nr=Qa.exec(N);)D[nr[1].toLowerCase()+" "]=(D[nr[1].toLowerCase()+" "]||[]).concat(nr[2]);nr=D[En.toLowerCase()+" "]}return null==nr?null:nr.join(", ")},getAllResponseHeaders:function(){return le?N:null},setRequestHeader:function(En,nr){return null==le&&(En=li[En.toLowerCase()]=li[En.toLowerCase()]||En,sr[En]=nr),this},overrideMimeType:function(En){return null==le&&(Le.mimeType=En),this},statusCode:function(En){var nr;if(En)if(le)zt.always(En[zt.status]);else for(nr in En)Qn[nr]=[Qn[nr],En[nr]];return this},abort:function(En){var nr=En||Vt;return y&&y.abort(nr),jr(0,nr),this}};if(on.promise(zt),Le.url=((l||Le.url||Ti.href)+"").replace(Ca,Ti.protocol+"//"),Le.type=d.method||d.type||Le.method||Le.type,Le.dataTypes=(Le.dataType||"*").toLowerCase().match(fr)||[""],null==Le.crossDomain){ue=he.createElement("a");try{ue.href=Le.url,ue.href=ue.href,Le.crossDomain=io.protocol+"//"+io.host!=ue.protocol+"//"+ue.host}catch(En){Le.crossDomain=!0}}if(Le.data&&Le.processData&&"string"!=typeof Le.data&&(Le.data=b.param(Le.data,Le.traditional)),wa(Ei,Le,d,zt),le)return zt;for(He in(Ce=b.event&&Le.global)&&0==b.active++&&b.event.trigger("ajaxStart"),Le.type=Le.type.toUpperCase(),Le.hasContent=!Za.test(Le.type),C=Le.url.replace(ba,""),Le.hasContent?Le.data&&Le.processData&&0===(Le.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Le.data=Le.data.replace(Ka,"+")):(rt=Le.url.slice(C.length),Le.data&&(Le.processData||"string"==typeof Le.data)&&(C+=(ya.test(C)?"&":"?")+Le.data,delete Le.data),!1===Le.cache&&(C=C.replace(Ja,"$1"),rt=(ya.test(C)?"&":"?")+"_="+go.guid+++rt),Le.url=C+rt),Le.ifModified&&(b.lastModified[C]&&zt.setRequestHeader("If-Modified-Since",b.lastModified[C]),b.etag[C]&&zt.setRequestHeader("If-None-Match",b.etag[C])),(Le.data&&Le.hasContent&&!1!==Le.contentType||d.contentType)&&zt.setRequestHeader("Content-Type",Le.contentType),zt.setRequestHeader("Accept",Le.dataTypes[0]&&Le.accepts[Le.dataTypes[0]]?Le.accepts[Le.dataTypes[0]]+("*"!==Le.dataTypes[0]?", "+xs+"; q=0.01":""):Le.accepts["*"]),Le.headers)zt.setRequestHeader(He,Le.headers[He]);if(Le.beforeSend&&(!1===Le.beforeSend.call(Xe,zt,Le)||le))return zt.abort();if(Vt="abort",Ft.add(Le.complete),zt.done(Le.success),zt.fail(Le.error),y=wa(No,Le,d,zt)){if(zt.readyState=1,Ce&&Tt.trigger("ajaxSend",[zt,Le]),le)return zt;Le.async&&Le.timeout>0&&(X=v.setTimeout(function(){zt.abort("timeout")},Le.timeout));try{le=!1,y.send(sr,jr)}catch(En){if(le)throw En;jr(-1,En)}}else jr(-1,"No Transport");function jr(En,nr,Tr,zs){var Pi,ia,vo,Lr,Rt,rr=nr;le||(le=!0,X&&v.clearTimeout(X),y=void 0,N=zs||"",zt.readyState=En>0?4:0,Pi=En>=200&&En<300||304===En,Tr&&(Lr=function De(l,d,y){for(var C,N,D,X,ue=l.contents,le=l.dataTypes;"*"===le[0];)le.shift(),void 0===C&&(C=l.mimeType||d.getResponseHeader("Content-Type"));if(C)for(N in ue)if(ue[N]&&ue[N].test(C)){le.unshift(N);break}if(le[0]in y)D=le[0];else{for(N in y){if(!le[0]||l.converters[N+" "+le[0]]){D=N;break}X||(X=N)}D=D||X}if(D)return D!==le[0]&&le.unshift(D),y[D]}(Le,zt,Tr)),!Pi&&b.inArray("script",Le.dataTypes)>-1&&b.inArray("json",Le.dataTypes)<0&&(Le.converters["text script"]=function(){}),Lr=function ei(l,d,y,C){var N,D,X,ue,le,Ce={},He=l.dataTypes.slice();if(He[1])for(X in l.converters)Ce[X.toLowerCase()]=l.converters[X];for(D=He.shift();D;)if(l.responseFields[D]&&(y[l.responseFields[D]]=d),!le&&C&&l.dataFilter&&(d=l.dataFilter(d,l.dataType)),le=D,D=He.shift())if("*"===D)D=le;else if("*"!==le&&le!==D){if(!(X=Ce[le+" "+D]||Ce["* "+D]))for(N in Ce)if((ue=N.split(" "))[1]===D&&(X=Ce[le+" "+ue[0]]||Ce["* "+ue[0]])){!0===X?X=Ce[N]:!0!==Ce[N]&&(D=ue[0],He.unshift(ue[1]));break}if(!0!==X)if(X&&l.throws)d=X(d);else try{d=X(d)}catch(rt){return{state:"parsererror",error:X?rt:"No conversion from "+le+" to "+D}}}return{state:"success",data:d}}(Le,Lr,zt,Pi),Pi?(Le.ifModified&&((Rt=zt.getResponseHeader("Last-Modified"))&&(b.lastModified[C]=Rt),(Rt=zt.getResponseHeader("etag"))&&(b.etag[C]=Rt)),204===En||"HEAD"===Le.type?rr="nocontent":304===En?rr="notmodified":(rr=Lr.state,ia=Lr.data,Pi=!(vo=Lr.error))):(vo=rr,(En||!rr)&&(rr="error",En<0&&(En=0))),zt.status=En,zt.statusText=(nr||rr)+"",Pi?on.resolveWith(Xe,[ia,rr,zt]):on.rejectWith(Xe,[zt,rr,vo]),zt.statusCode(Qn),Qn=void 0,Ce&&Tt.trigger(Pi?"ajaxSuccess":"ajaxError",[zt,Le,Pi?ia:vo]),Ft.fireWith(Xe,[zt,rr]),Ce&&(Tt.trigger("ajaxComplete",[zt,Le]),--b.active||b.event.trigger("ajaxStop")))}return zt},getJSON:function(l,d,y){return b.get(l,d,y,"json")},getScript:function(l,d){return b.get(l,void 0,d,"script")}}),b.each(["get","post"],function(l,d){b[d]=function(y,C,N,D){return se(C)&&(D=D||N,N=C,C=void 0),b.ajax(b.extend({url:y,type:d,dataType:D,data:C,success:N},b.isPlainObject(y)&&y))}}),b.ajaxPrefilter(function(l){var d;for(d in l.headers)"content-type"===d.toLowerCase()&&(l.contentType=l.headers[d]||"")}),b._evalUrl=function(l,d,y){return b.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){b.globalEval(C,d,y)}})},b.fn.extend({wrapAll:function(l){var d;return this[0]&&(se(l)&&(l=l.call(this[0])),d=b(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(l){return se(l)?this.each(function(d){b(this).wrapInner(l.call(this,d))}):this.each(function(){var d=b(this),y=d.contents();y.length?y.wrapAll(l):d.append(l)})},wrap:function(l){var d=se(l);return this.each(function(y){b(this).wrapAll(d?l.call(this,y):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(l){return!b.expr.pseudos.visible(l)},b.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new v.XMLHttpRequest}catch(l){}};var ti={0:200,1223:204},F=b.ajaxSettings.xhr();i.cors=!!F&&"withCredentials"in F,i.ajax=F=!!F,b.ajaxTransport(function(l){var d,y;if(i.cors||F&&!l.crossDomain)return{send:function(C,N){var D,X=l.xhr();if(X.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(D in l.xhrFields)X[D]=l.xhrFields[D];for(D in l.mimeType&&X.overrideMimeType&&X.overrideMimeType(l.mimeType),!l.crossDomain&&!C["X-Requested-With"]&&(C["X-Requested-With"]="XMLHttpRequest"),C)X.setRequestHeader(D,C[D]);d=function(ue){return function(){d&&(d=y=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,"abort"===ue?X.abort():"error"===ue?"number"!=typeof X.status?N(0,"error"):N(X.status,X.statusText):N(ti[X.status]||X.status,X.statusText,"text"!==(X.responseType||"text")||"string"!=typeof X.responseText?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=d(),y=X.onerror=X.ontimeout=d("error"),void 0!==X.onabort?X.onabort=y:X.onreadystatechange=function(){4===X.readyState&&v.setTimeout(function(){d&&y()})},d=d("abort");try{X.send(l.hasContent&&l.data||null)}catch(ue){if(d)throw ue}},abort:function(){d&&d()}}}),b.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return b.globalEval(l),l}}}),b.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),b.ajaxTransport("script",function(l){var d,y;if(l.crossDomain||l.scriptAttrs)return{send:function(C,N){d=b("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",y=function(D){d.remove(),y=null,D&&N("error"===D.type?404:200,D.type)}),he.head.appendChild(d[0])},abort:function(){y&&y()}}});var l,J=[],ae=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=J.pop()||b.expando+"_"+go.guid++;return this[l]=!0,l}}),b.ajaxPrefilter("json jsonp",function(l,d,y){var C,N,D,X=!1!==l.jsonp&&(ae.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&ae.test(l.data)&&"data");if(X||"jsonp"===l.dataTypes[0])return C=l.jsonpCallback=se(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,X?l[X]=l[X].replace(ae,"$1"+C):!1!==l.jsonp&&(l.url+=(ya.test(l.url)?"&":"?")+l.jsonp+"="+C),l.converters["script json"]=function(){return D||b.error(C+" was not called"),D[0]},l.dataTypes[0]="json",N=v[C],v[C]=function(){D=arguments},y.always(function(){void 0===N?b(v).removeProp(C):v[C]=N,l[C]&&(l.jsonpCallback=d.jsonpCallback,J.push(C)),D&&se(N)&&N(D[0]),D=N=void 0}),"script"}),i.createHTMLDocument=((l=he.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),b.parseHTML=function(l,d,y){return"string"!=typeof l?[]:("boolean"==typeof d&&(y=d,d=!1),d||(i.createHTMLDocument?((C=(d=he.implementation.createHTMLDocument("")).createElement("base")).href=he.location.href,d.head.appendChild(C)):d=he),D=!y&&[],(N=At.exec(l))?[d.createElement(N[1])]:(N=Mo([l],d,D),D&&D.length&&b(D).remove(),b.merge([],N.childNodes)));var C,N,D},b.fn.load=function(l,d,y){var C,N,D,X=this,ue=l.indexOf(" ");return ue>-1&&(C=yi(l.slice(ue)),l=l.slice(0,ue)),se(d)?(y=d,d=void 0):d&&"object"==typeof d&&(N="POST"),X.length>0&&b.ajax({url:l,type:N||"GET",dataType:"html",data:d}).done(function(le){D=arguments,X.html(C?b("<div>").append(b.parseHTML(le)).find(C):le)}).always(y&&function(le,Ce){X.each(function(){y.apply(this,D||[le.responseText,Ce,le])})}),this},b.expr.pseudos.animated=function(l){return b.grep(b.timers,function(d){return l===d.elem}).length},b.offset={setOffset:function(l,d,y){var C,N,D,X,ue,le,He=b.css(l,"position"),rt=b(l),Le={};"static"===He&&(l.style.position="relative"),ue=rt.offset(),D=b.css(l,"top"),le=b.css(l,"left"),("absolute"===He||"fixed"===He)&&(D+le).indexOf("auto")>-1?(X=(C=rt.position()).top,N=C.left):(X=parseFloat(D)||0,N=parseFloat(le)||0),se(d)&&(d=d.call(l,y,b.extend({},ue))),null!=d.top&&(Le.top=d.top-ue.top+X),null!=d.left&&(Le.left=d.left-ue.left+N),"using"in d?d.using.call(l,Le):rt.css(Le)}},b.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(N){b.offset.setOffset(this,l,N)});var d,y,C=this[0];return C?C.getClientRects().length?{top:(d=C.getBoundingClientRect()).top+(y=C.ownerDocument.defaultView).pageYOffset,left:d.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,d,y,C=this[0],N={top:0,left:0};if("fixed"===b.css(C,"position"))d=C.getBoundingClientRect();else{for(d=this.offset(),y=C.ownerDocument,l=C.offsetParent||y.documentElement;l&&(l===y.body||l===y.documentElement)&&"static"===b.css(l,"position");)l=l.parentNode;l&&l!==C&&1===l.nodeType&&((N=b(l).offset()).top+=b.css(l,"borderTopWidth",!0),N.left+=b.css(l,"borderLeftWidth",!0))}return{top:d.top-N.top-b.css(C,"marginTop",!0),left:d.left-N.left-b.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===b.css(l,"position");)l=l.offsetParent;return l||wn})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,d){var y="pageYOffset"===d;b.fn[l]=function(C){return sn(this,function(N,D,X){var ue;if(ge(N)?ue=N:9===N.nodeType&&(ue=N.defaultView),void 0===X)return ue?ue[d]:N[D];ue?ue.scrollTo(y?ue.pageXOffset:X,y?X:ue.pageYOffset):N[D]=X},l,C,arguments.length)}}),b.each(["top","left"],function(l,d){b.cssHooks[d]=Wa(i.pixelPosition,function(y,C){if(C)return C=Ki(y,d),ho.test(C)?b(y).position()[d]+"px":C})}),b.each({Height:"height",Width:"width"},function(l,d){b.each({padding:"inner"+l,content:d,"":"outer"+l},function(y,C){b.fn[C]=function(N,D){var X=arguments.length&&(y||"boolean"!=typeof N),ue=y||(!0===N||!0===D?"margin":"border");return sn(this,function(le,Ce,He){var rt;return ge(le)?0===C.indexOf("outer")?le["inner"+l]:le.document.documentElement["client"+l]:9===le.nodeType?(rt=le.documentElement,Math.max(le.body["scroll"+l],rt["scroll"+l],le.body["offset"+l],rt["offset"+l],rt["client"+l])):void 0===He?b.css(le,Ce,ue):b.style(le,Ce,He,ue)},d,X?N:void 0,X)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,d){b.fn[d]=function(y){return this.on(d,y)}}),b.fn.extend({bind:function(l,d,y){return this.on(l,null,d,y)},unbind:function(l,d){return this.off(l,null,d)},delegate:function(l,d,y,C){return this.on(d,l,y,C)},undelegate:function(l,d,y){return 1===arguments.length?this.off(l,"**"):this.off(d,l||"**",y)},hover:function(l,d){return this.mouseenter(l).mouseleave(d||l)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,d){b.fn[d]=function(y,C){return arguments.length>0?this.on(d,null,y,C):this.trigger(d)}});var pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;b.proxy=function(l,d){var y,C,N;if("string"==typeof d&&(y=l[d],d=l,l=y),se(l))return C=A.call(arguments,2),N=function(){return l.apply(d||this,C.concat(A.call(arguments)))},N.guid=l.guid=l.guid||b.guid++,N},b.holdReady=function(l){l?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=mt,b.isFunction=se,b.isWindow=ge,b.camelCase=ln,b.type=Ee,b.now=Date.now,b.isNumeric=function(l){var d=b.type(l);return("number"===d||"string"===d)&&!isNaN(l-parseFloat(l))},b.trim=function(l){return null==l?"":(l+"").replace(pe,"")},void 0!==(g=function(){return b}.apply(W,[]))&&(E.exports=g);var Oe=v.jQuery,we=v.$;return b.noConflict=function(l){return v.$===b&&(v.$=we),l&&v.jQuery===b&&(v.jQuery=Oe),b},void 0===S&&(v.jQuery=v.$=b),b})},37244:(E,W,f)=>{var S=f(53436)(f(12119),"DataView");E.exports=S},54994:(E,W,f)=>{var g=f(64312),v=f(46421),S=f(15764),T=f(18685),x=f(26676);function A(O){var M=-1,B=null==O?0:O.length;for(this.clear();++M<B;){var H=O[M];this.set(H[0],H[1])}}A.prototype.clear=g,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=T,A.prototype.set=x,E.exports=A},9215:(E,W,f)=>{var g=f(41840),v=f(34378),S=f(54981),T=f(67343),x=f(98895);function A(O){var M=-1,B=null==O?0:O.length;for(this.clear();++M<B;){var H=O[M];this.set(H[0],H[1])}}A.prototype.clear=g,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=T,A.prototype.set=x,E.exports=A},51501:(E,W,f)=>{var S=f(53436)(f(12119),"Map");E.exports=S},99850:(E,W,f)=>{var g=f(10638),v=f(11184),S=f(70866),T=f(43771),x=f(51772);function A(O){var M=-1,B=null==O?0:O.length;for(this.clear();++M<B;){var H=O[M];this.set(H[0],H[1])}}A.prototype.clear=g,A.prototype.delete=v,A.prototype.get=S,A.prototype.has=T,A.prototype.set=x,E.exports=A},44267:(E,W,f)=>{var S=f(53436)(f(12119),"Promise");E.exports=S},46323:(E,W,f)=>{var S=f(53436)(f(12119),"Set");E.exports=S},58849:(E,W,f)=>{var g=f(99850),v=f(4600),S=f(31387);function T(x){var A=-1,O=null==x?0:x.length;for(this.__data__=new g;++A<O;)this.add(x[A])}T.prototype.add=T.prototype.push=v,T.prototype.has=S,E.exports=T},2858:(E,W,f)=>{var g=f(9215),v=f(13720),S=f(64410),T=f(45576),x=f(22247),A=f(41585);function O(M){var B=this.__data__=new g(M);this.size=B.size}O.prototype.clear=v,O.prototype.delete=S,O.prototype.get=T,O.prototype.has=x,O.prototype.set=A,E.exports=O},60443:(E,W,f)=>{var g=f(12119);E.exports=g.Symbol},73457:(E,W,f)=>{var g=f(12119);E.exports=g.Uint8Array},24243:(E,W,f)=>{var S=f(53436)(f(12119),"WeakMap");E.exports=S},26999:E=>{E.exports=function W(f,g,v){switch(v.length){case 0:return f.call(g);case 1:return f.call(g,v[0]);case 2:return f.call(g,v[0],v[1]);case 3:return f.call(g,v[0],v[1],v[2])}return f.apply(g,v)}},96837:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length;++v<S&&!1!==g(f[v],v,f););return f}},69779:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length,T=0,x=[];++v<S;){var A=f[v];g(A,v,f)&&(x[T++]=A)}return x}},61253:(E,W,f)=>{var g=f(14164);E.exports=function v(S,T){return!(null==S||!S.length)&&g(S,T,0)>-1}},37609:E=>{E.exports=function W(f,g,v){for(var S=-1,T=null==f?0:f.length;++S<T;)if(v(g,f[S]))return!0;return!1}},72271:(E,W,f)=>{var g=f(85334),v=f(77151),S=f(21503),T=f(80891),x=f(58442),A=f(48159),M=Object.prototype.hasOwnProperty;E.exports=function B(H,L){var Y=S(H),ne=!Y&&v(H),ce=!Y&&!ne&&T(H),i=!Y&&!ne&&!ce&&A(H),se=Y||ne||ce||i,ge=se?g(H.length,String):[],he=ge.length;for(var q in H)(L||M.call(H,q))&&(!se||!("length"==q||ce&&("offset"==q||"parent"==q)||i&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||x(q,he)))&&ge.push(q);return ge}},84633:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length,T=Array(S);++v<S;)T[v]=g(f[v],v,f);return T}},85059:E=>{E.exports=function W(f,g){for(var v=-1,S=g.length,T=f.length;++v<S;)f[T+v]=g[v];return f}},8745:E=>{E.exports=function W(f,g,v,S){var T=-1,x=null==f?0:f.length;for(S&&x&&(v=f[++T]);++T<x;)v=g(v,f[T],T,f);return v}},79503:E=>{E.exports=function W(f,g){for(var v=-1,S=null==f?0:f.length;++v<S;)if(g(f[v],v,f))return!0;return!1}},75481:(E,W,f)=>{var v=f(11847)("length");E.exports=v},49276:(E,W,f)=>{var g=f(85683),v=f(20217);E.exports=function S(T,x,A){(void 0!==A&&!v(T[x],A)||void 0===A&&!(x in T))&&g(T,x,A)}},89719:(E,W,f)=>{var g=f(85683),v=f(20217),T=Object.prototype.hasOwnProperty;E.exports=function x(A,O,M){var B=A[O];(!T.call(A,O)||!v(B,M)||void 0===M&&!(O in A))&&g(A,O,M)}},43503:(E,W,f)=>{var g=f(20217);E.exports=function v(S,T){for(var x=S.length;x--;)if(g(S[x][0],T))return x;return-1}},94121:(E,W,f)=>{var g=f(31989),v=f(118);E.exports=function S(T,x){return T&&g(x,v(x),T)}},99287:(E,W,f)=>{var g=f(31989),v=f(16555);E.exports=function S(T,x){return T&&g(x,v(x),T)}},85683:(E,W,f)=>{var g=f(56713);E.exports=function v(S,T,x){"__proto__"==T&&g?g(S,T,{configurable:!0,enumerable:!0,value:x,writable:!0}):S[T]=x}},44462:(E,W,f)=>{var g=f(2858),v=f(96837),S=f(89719),T=f(94121),x=f(99287),A=f(19292),O=f(99454),M=f(84444),B=f(59905),H=f(47597),L=f(6967),Y=f(28794),ne=f(76782),ce=f(37878),i=f(4264),se=f(21503),ge=f(80891),he=f(13222),q=f(25940),ye=f(90799),Ee=f(118),Fe=f(16555),et="[object Arguments]",Xt="[object Function]",Fr="[object Object]",R={};R[et]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[Fr]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[Xt]=R["[object WeakMap]"]=!1,E.exports=function G(re,xe,$e,We,pt,kt){var Lt,dn=1&xe,wn=2&xe,cn=4&xe;if($e&&(Lt=pt?$e(re,We,pt,kt):$e(re)),void 0!==Lt)return Lt;if(!q(re))return re;var ar=se(re);if(ar){if(Lt=ne(re),!dn)return O(re,Lt)}else{var Jn=Y(re),oi=Jn==Xt||"[object GeneratorFunction]"==Jn;if(ge(re))return A(re,dn);if(Jn==Fr||Jn==et||oi&&!pt){if(Lt=wn||oi?{}:i(re),!dn)return wn?B(re,x(Lt,re)):M(re,T(Lt,re))}else{if(!R[Jn])return pt?re:{};Lt=ce(re,Jn,dn)}}kt||(kt=new g);var Fn=kt.get(re);if(Fn)return Fn;kt.set(re,Lt),ye(re)?re.forEach(function(tr){Lt.add(G(tr,xe,$e,tr,re,kt))}):he(re)&&re.forEach(function(tr,br){Lt.set(br,G(tr,xe,$e,br,re,kt))});var Un=ar?void 0:(cn?wn?L:H:wn?Fe:Ee)(re);return v(Un||re,function(tr,br){Un&&(tr=re[br=tr]),S(Lt,br,G(tr,xe,$e,br,re,kt))}),Lt}},78858:(E,W,f)=>{var g=f(25940),v=Object.create,S=function(){function T(){}return function(x){if(!g(x))return{};if(v)return v(x);T.prototype=x;var A=new T;return T.prototype=void 0,A}}();E.exports=S},43132:(E,W,f)=>{var g=f(45184),S=f(16539)(g);E.exports=S},67308:(E,W,f)=>{var g=f(44129);E.exports=function v(S,T,x){for(var A=-1,O=S.length;++A<O;){var M=S[A],B=T(M);if(null!=B&&(void 0===H?B==B&&!g(B):x(B,H)))var H=B,L=M}return L}},33609:(E,W,f)=>{var g=f(43132);E.exports=function v(S,T){var x=[];return g(S,function(A,O,M){T(A,O,M)&&x.push(A)}),x}},65317:E=>{E.exports=function W(f,g,v,S){for(var T=f.length,x=v+(S?1:-1);S?x--:++x<T;)if(g(f[x],x,f))return x;return-1}},50686:(E,W,f)=>{var g=f(85059),v=f(75039);E.exports=function S(T,x,A,O,M){var B=-1,H=T.length;for(A||(A=v),M||(M=[]);++B<H;){var L=T[B];x>0&&A(L)?x>1?S(L,x-1,A,O,M):g(M,L):O||(M[M.length]=L)}return M}},30755:(E,W,f)=>{var v=f(40456)();E.exports=v},45184:(E,W,f)=>{var g=f(30755),v=f(118);E.exports=function S(T,x){return T&&g(T,x,v)}},15456:(E,W,f)=>{var g=f(65456),v=f(68533);E.exports=function S(T,x){for(var A=0,O=(x=g(x,T)).length;null!=T&&A<O;)T=T[v(x[A++])];return A&&A==O?T:void 0}},38247:(E,W,f)=>{var g=f(85059),v=f(21503);E.exports=function S(T,x,A){var O=x(T);return v(T)?O:g(O,A(T))}},93337:(E,W,f)=>{var g=f(60443),v=f(21318),S=f(92902),A=g?g.toStringTag:void 0;E.exports=function O(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":A&&A in Object(M)?v(M):S(M)}},31100:E=>{E.exports=function W(f,g){return f>g}},84781:E=>{var f=Object.prototype.hasOwnProperty;E.exports=function g(v,S){return null!=v&&f.call(v,S)}},69989:E=>{E.exports=function W(f,g){return null!=f&&g in Object(f)}},14164:(E,W,f)=>{var g=f(65317),v=f(70968),S=f(24977);E.exports=function T(x,A,O){return A==A?S(x,A,O):g(x,v,O)}},60186:(E,W,f)=>{var g=f(93337),v=f(72671);E.exports=function T(x){return v(x)&&"[object Arguments]"==g(x)}},85740:(E,W,f)=>{var g=f(58325),v=f(72671);E.exports=function S(T,x,A,O,M){return T===x||(null==T||null==x||!v(T)&&!v(x)?T!=T&&x!=x:g(T,x,A,O,S,M))}},58325:(E,W,f)=>{var g=f(2858),v=f(63914),S=f(78583),T=f(32286),x=f(28794),A=f(21503),O=f(80891),M=f(48159),H="[object Arguments]",L="[object Array]",Y="[object Object]",ce=Object.prototype.hasOwnProperty;E.exports=function i(se,ge,he,q,ye,Ee){var Fe=A(se),b=A(ge),je=Fe?L:x(se),tt=b?L:x(ge),et=(je=je==H?Y:je)==Y,ot=(tt=tt==H?Y:tt)==Y,ut=je==tt;if(ut&&O(se)){if(!O(ge))return!1;Fe=!0,et=!1}if(ut&&!et)return Ee||(Ee=new g),Fe||M(se)?v(se,ge,he,q,ye,Ee):S(se,ge,je,he,q,ye,Ee);if(!(1&he)){var mt=et&&ce.call(se,"__wrapped__"),At=ot&&ce.call(ge,"__wrapped__");if(mt||At){var Xt=mt?se.value():se,un=At?ge.value():ge;return Ee||(Ee=new g),ye(Xt,un,he,q,Ee)}}return!!ut&&(Ee||(Ee=new g),T(se,ge,he,q,ye,Ee))}},97021:(E,W,f)=>{var g=f(28794),v=f(72671);E.exports=function T(x){return v(x)&&"[object Map]"==g(x)}},40431:(E,W,f)=>{var g=f(2858),v=f(85740);E.exports=function x(A,O,M,B){var H=M.length,L=H,Y=!B;if(null==A)return!L;for(A=Object(A);H--;){var ne=M[H];if(Y&&ne[2]?ne[1]!==A[ne[0]]:!(ne[0]in A))return!1}for(;++H<L;){var ce=(ne=M[H])[0],i=A[ce],se=ne[1];if(Y&&ne[2]){if(void 0===i&&!(ce in A))return!1}else{var ge=new g;if(B)var he=B(i,se,ce,A,O,ge);if(!(void 0===he?v(se,i,3,B,ge):he))return!1}}return!0}},70968:E=>{E.exports=function W(f){return f!=f}},37304:(E,W,f)=>{var g=f(75946),v=f(91943),S=f(25940),T=f(52827),A=/^\[object .+?Constructor\]$/,L=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");E.exports=function Y(ne){return!(!S(ne)||v(ne))&&(g(ne)?L:A).test(T(ne))}},771:(E,W,f)=>{var g=f(28794),v=f(72671);E.exports=function T(x){return v(x)&&"[object Set]"==g(x)}},1083:(E,W,f)=>{var g=f(93337),v=f(96231),S=f(72671),ut={};ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut["[object Arguments]"]=ut["[object Array]"]=ut["[object ArrayBuffer]"]=ut["[object Boolean]"]=ut["[object DataView]"]=ut["[object Date]"]=ut["[object Error]"]=ut["[object Function]"]=ut["[object Map]"]=ut["[object Number]"]=ut["[object Object]"]=ut["[object RegExp]"]=ut["[object Set]"]=ut["[object String]"]=ut["[object WeakMap]"]=!1,E.exports=function mt(At){return S(At)&&v(At.length)&&!!ut[g(At)]}},96517:(E,W,f)=>{var g=f(98133),v=f(9458),S=f(32608),T=f(21503),x=f(87495);E.exports=function A(O){return"function"==typeof O?O:null==O?S:"object"==typeof O?T(O)?v(O[0],O[1]):g(O):x(O)}},81172:(E,W,f)=>{var g=f(45488),v=f(85491),T=Object.prototype.hasOwnProperty;E.exports=function x(A){if(!g(A))return v(A);var O=[];for(var M in Object(A))T.call(A,M)&&"constructor"!=M&&O.push(M);return O}},92809:(E,W,f)=>{var g=f(25940),v=f(45488),S=f(32158),x=Object.prototype.hasOwnProperty;E.exports=function A(O){if(!g(O))return S(O);var M=v(O),B=[];for(var H in O)"constructor"==H&&(M||!x.call(O,H))||B.push(H);return B}},99069:E=>{E.exports=function W(f,g){return f<g}},92046:(E,W,f)=>{var g=f(43132),v=f(56507);E.exports=function S(T,x){var A=-1,O=v(T)?Array(T.length):[];return g(T,function(M,B,H){O[++A]=x(M,B,H)}),O}},98133:(E,W,f)=>{var g=f(40431),v=f(22379),S=f(642);E.exports=function T(x){var A=v(x);return 1==A.length&&A[0][2]?S(A[0][0],A[0][1]):function(O){return O===x||g(O,x,A)}}},9458:(E,W,f)=>{var g=f(85740),v=f(8817),S=f(11172),T=f(45352),x=f(22442),A=f(642),O=f(68533);E.exports=function H(L,Y){return T(L)&&x(Y)?A(O(L),Y):function(ne){var ce=v(ne,L);return void 0===ce&&ce===Y?S(ne,L):g(Y,ce,3)}}},73842:(E,W,f)=>{var g=f(2858),v=f(49276),S=f(30755),T=f(33675),x=f(25940),A=f(16555),O=f(99351);E.exports=function M(B,H,L,Y,ne){B!==H&&S(H,function(ce,i){if(ne||(ne=new g),x(ce))T(B,H,i,L,M,Y,ne);else{var se=Y?Y(O(B,i),ce,i+"",B,H,ne):void 0;void 0===se&&(se=ce),v(B,i,se)}},A)}},33675:(E,W,f)=>{var g=f(49276),v=f(19292),S=f(65208),T=f(99454),x=f(4264),A=f(77151),O=f(21503),M=f(21330),B=f(80891),H=f(75946),L=f(25940),Y=f(97614),ne=f(48159),ce=f(99351),i=f(8067);E.exports=function se(ge,he,q,ye,Ee,Fe,b){var je=ce(ge,q),tt=ce(he,q),et=b.get(tt);if(et)g(ge,q,et);else{var ot=Fe?Fe(je,tt,q+"",ge,he,b):void 0,ut=void 0===ot;if(ut){var mt=O(tt),At=!mt&&B(tt),Xt=!mt&&!At&&ne(tt);ot=tt,mt||At||Xt?O(je)?ot=je:M(je)?ot=T(je):At?(ut=!1,ot=v(tt,!0)):Xt?(ut=!1,ot=S(tt,!0)):ot=[]:Y(tt)||A(tt)?(ot=je,A(je)?ot=i(je):(!L(je)||H(je))&&(ot=x(tt))):ut=!1}ut&&(b.set(tt,ot),Ee(ot,tt,ye,Fe,b),b.delete(tt)),g(ge,q,ot)}}},6119:(E,W,f)=>{var g=f(84633),v=f(15456),S=f(96517),T=f(92046),x=f(18750),A=f(85647),O=f(41215),M=f(32608),B=f(21503);E.exports=function H(L,Y,ne){Y=Y.length?g(Y,function(se){return B(se)?function(ge){return v(ge,1===se.length?se[0]:se)}:se}):[M];var ce=-1;Y=g(Y,A(S));var i=T(L,function(se,ge,he){return{criteria:g(Y,function(ye){return ye(se)}),index:++ce,value:se}});return x(i,function(se,ge){return O(se,ge,ne)})}},83021:(E,W,f)=>{var g=f(95495),v=f(11172);E.exports=function S(T,x){return g(T,x,function(A,O){return v(T,O)})}},95495:(E,W,f)=>{var g=f(15456),v=f(55963),S=f(65456);E.exports=function T(x,A,O){for(var M=-1,B=A.length,H={};++M<B;){var L=A[M],Y=g(x,L);O(Y,L)&&v(H,S(L,x),Y)}return H}},11847:E=>{E.exports=function W(f){return function(g){return null==g?void 0:g[f]}}},39222:(E,W,f)=>{var g=f(15456);E.exports=function v(S){return function(T){return g(T,S)}}},16307:E=>{var W=Math.ceil,f=Math.max;E.exports=function g(v,S,T,x){for(var A=-1,O=f(W((S-v)/(T||1)),0),M=Array(O);O--;)M[x?O:++A]=v,v+=T;return M}},13570:E=>{E.exports=function W(f,g,v,S,T){return T(f,function(x,A,O){v=S?(S=!1,x):g(v,x,A,O)}),v}},23269:(E,W,f)=>{var g=f(32608),v=f(53983),S=f(72185);E.exports=function T(x,A){return S(v(x,A,g),x+"")}},55963:(E,W,f)=>{var g=f(89719),v=f(65456),S=f(58442),T=f(25940),x=f(68533);E.exports=function A(O,M,B,H){if(!T(O))return O;for(var L=-1,Y=(M=v(M,O)).length,ne=Y-1,ce=O;null!=ce&&++L<Y;){var i=x(M[L]),se=B;if("__proto__"===i||"constructor"===i||"prototype"===i)return O;if(L!=ne){var ge=ce[i];void 0===(se=H?H(ge,i,ce):void 0)&&(se=T(ge)?ge:S(M[L+1])?[]:{})}g(ce,i,se),ce=ce[i]}return O}},69510:(E,W,f)=>{var g=f(76684),v=f(56713),S=f(32608);E.exports=v?function(x,A){return v(x,"toString",{configurable:!0,enumerable:!1,value:g(A),writable:!0})}:S},18750:E=>{E.exports=function W(f,g){var v=f.length;for(f.sort(g);v--;)f[v]=f[v].value;return f}},85334:E=>{E.exports=function W(f,g){for(var v=-1,S=Array(f);++v<f;)S[v]=g(v);return S}},93935:(E,W,f)=>{var g=f(60443),v=f(84633),S=f(21503),T=f(44129),A=g?g.prototype:void 0,O=A?A.toString:void 0;E.exports=function M(B){if("string"==typeof B)return B;if(S(B))return v(B,M)+"";if(T(B))return O?O.call(B):"";var H=B+"";return"0"==H&&1/B==-1/0?"-0":H}},83348:(E,W,f)=>{var g=f(42760),v=/^\s+/;E.exports=function S(T){return T&&T.slice(0,g(T)+1).replace(v,"")}},85647:E=>{E.exports=function W(f){return function(g){return f(g)}}},80707:(E,W,f)=>{var g=f(58849),v=f(61253),S=f(37609),T=f(25972),x=f(14575),A=f(24174);E.exports=function M(B,H,L){var Y=-1,ne=v,ce=B.length,i=!0,se=[],ge=se;if(L)i=!1,ne=S;else if(ce>=200){var he=H?null:x(B);if(he)return A(he);i=!1,ne=T,ge=new g}else ge=H?[]:se;e:for(;++Y<ce;){var q=B[Y],ye=H?H(q):q;if(q=L||0!==q?q:0,i&&ye==ye){for(var Ee=ge.length;Ee--;)if(ge[Ee]===ye)continue e;H&&ge.push(ye),se.push(q)}else ne(ge,ye,L)||(ge!==se&&ge.push(ye),se.push(q))}return se}},19179:(E,W,f)=>{var g=f(84633);E.exports=function v(S,T){return g(T,function(x){return S[x]})}},38645:E=>{E.exports=function W(f,g,v){for(var S=-1,T=f.length,x=g.length,A={};++S<T;)v(A,f[S],S<x?g[S]:void 0);return A}},25972:E=>{E.exports=function W(f,g){return f.has(g)}},21481:(E,W,f)=>{var g=f(32608);E.exports=function v(S){return"function"==typeof S?S:g}},65456:(E,W,f)=>{var g=f(21503),v=f(45352),S=f(32855),T=f(73943);E.exports=function x(A,O){return g(A)?A:v(A,O)?[A]:S(T(A))}},43362:(E,W,f)=>{var g=f(73457);E.exports=function v(S){var T=new S.constructor(S.byteLength);return new g(T).set(new g(S)),T}},19292:(E,W,f)=>{E=f.nmd(E);var g=f(12119),v=W&&!W.nodeType&&W,S=v&&E&&!E.nodeType&&E,x=S&&S.exports===v?g.Buffer:void 0,A=x?x.allocUnsafe:void 0;E.exports=function O(M,B){if(B)return M.slice();var H=M.length,L=A?A(H):new M.constructor(H);return M.copy(L),L}},17e3:(E,W,f)=>{var g=f(43362);E.exports=function v(S,T){var x=T?g(S.buffer):S.buffer;return new S.constructor(x,S.byteOffset,S.byteLength)}},74098:E=>{var W=/\w*$/;E.exports=function f(g){var v=new g.constructor(g.source,W.exec(g));return v.lastIndex=g.lastIndex,v}},62533:(E,W,f)=>{var g=f(60443),v=g?g.prototype:void 0,S=v?v.valueOf:void 0;E.exports=function T(x){return S?Object(S.call(x)):{}}},65208:(E,W,f)=>{var g=f(43362);E.exports=function v(S,T){var x=T?g(S.buffer):S.buffer;return new S.constructor(x,S.byteOffset,S.length)}},13443:(E,W,f)=>{var g=f(44129);E.exports=function v(S,T){if(S!==T){var x=void 0!==S,A=null===S,O=S==S,M=g(S),B=void 0!==T,H=null===T,L=T==T,Y=g(T);if(!H&&!Y&&!M&&S>T||M&&B&&L&&!H&&!Y||A&&B&&L||!x&&L||!O)return 1;if(!A&&!M&&!Y&&S<T||Y&&x&&O&&!A&&!M||H&&x&&O||!B&&O||!L)return-1}return 0}},41215:(E,W,f)=>{var g=f(13443);E.exports=function v(S,T,x){for(var A=-1,O=S.criteria,M=T.criteria,B=O.length,H=x.length;++A<B;){var L=g(O[A],M[A]);if(L)return A>=H?L:L*("desc"==x[A]?-1:1)}return S.index-T.index}},99454:E=>{E.exports=function W(f,g){var v=-1,S=f.length;for(g||(g=Array(S));++v<S;)g[v]=f[v];return g}},31989:(E,W,f)=>{var g=f(89719),v=f(85683);E.exports=function S(T,x,A,O){var M=!A;A||(A={});for(var B=-1,H=x.length;++B<H;){var L=x[B],Y=O?O(A[L],T[L],L,A,T):void 0;void 0===Y&&(Y=T[L]),M?v(A,L,Y):g(A,L,Y)}return A}},84444:(E,W,f)=>{var g=f(31989),v=f(39383);E.exports=function S(T,x){return g(T,v(T),x)}},59905:(E,W,f)=>{var g=f(31989),v=f(53051);E.exports=function S(T,x){return g(T,v(T),x)}},24610:(E,W,f)=>{var g=f(12119);E.exports=g["__core-js_shared__"]},84944:(E,W,f)=>{var g=f(23269),v=f(93342);E.exports=function S(T){return g(function(x,A){var O=-1,M=A.length,B=M>1?A[M-1]:void 0,H=M>2?A[2]:void 0;for(B=T.length>3&&"function"==typeof B?(M--,B):void 0,H&&v(A[0],A[1],H)&&(B=M<3?void 0:B,M=1),x=Object(x);++O<M;){var L=A[O];L&&T(x,L,O,B)}return x})}},16539:(E,W,f)=>{var g=f(56507);E.exports=function v(S,T){return function(x,A){if(null==x)return x;if(!g(x))return S(x,A);for(var O=x.length,M=T?O:-1,B=Object(x);(T?M--:++M<O)&&!1!==A(B[M],M,B););return x}}},40456:E=>{E.exports=function W(f){return function(g,v,S){for(var T=-1,x=Object(g),A=S(g),O=A.length;O--;){var M=A[f?O:++T];if(!1===v(x[M],M,x))break}return g}}},24653:(E,W,f)=>{var g=f(96517),v=f(56507),S=f(118);E.exports=function T(x){return function(A,O,M){var B=Object(A);if(!v(A)){var H=g(O,3);A=S(A),O=function(Y){return H(B[Y],Y,B)}}var L=x(A,O,M);return L>-1?B[H?A[L]:L]:void 0}}},97509:(E,W,f)=>{var g=f(16307),v=f(93342),S=f(12232);E.exports=function T(x){return function(A,O,M){return M&&"number"!=typeof M&&v(A,O,M)&&(O=M=void 0),A=S(A),void 0===O?(O=A,A=0):O=S(O),M=void 0===M?A<O?1:-1:S(M),g(A,O,M,x)}}},14575:(E,W,f)=>{var g=f(46323),v=f(12552),S=f(24174),x=g&&1/S(new g([,-0]))[1]==1/0?function(A){return new g(A)}:v;E.exports=x},56713:(E,W,f)=>{var g=f(53436),v=function(){try{var S=g(Object,"defineProperty");return S({},"",{}),S}catch(T){}}();E.exports=v},63914:(E,W,f)=>{var g=f(58849),v=f(79503),S=f(25972);E.exports=function A(O,M,B,H,L,Y){var ne=1&B,ce=O.length,i=M.length;if(ce!=i&&!(ne&&i>ce))return!1;var se=Y.get(O),ge=Y.get(M);if(se&&ge)return se==M&&ge==O;var he=-1,q=!0,ye=2&B?new g:void 0;for(Y.set(O,M),Y.set(M,O);++he<ce;){var Ee=O[he],Fe=M[he];if(H)var b=ne?H(Fe,Ee,he,M,O,Y):H(Ee,Fe,he,O,M,Y);if(void 0!==b){if(b)continue;q=!1;break}if(ye){if(!v(M,function(je,tt){if(!S(ye,tt)&&(Ee===je||L(Ee,je,B,H,Y)))return ye.push(tt)})){q=!1;break}}else if(Ee!==Fe&&!L(Ee,Fe,B,H,Y)){q=!1;break}}return Y.delete(O),Y.delete(M),q}},78583:(E,W,f)=>{var g=f(60443),v=f(73457),S=f(20217),T=f(63914),x=f(83205),A=f(24174),ye=g?g.prototype:void 0,Ee=ye?ye.valueOf:void 0;E.exports=function Fe(b,je,tt,et,ot,ut,mt){switch(tt){case"[object DataView]":if(b.byteLength!=je.byteLength||b.byteOffset!=je.byteOffset)return!1;b=b.buffer,je=je.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=je.byteLength||!ut(new v(b),new v(je)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+b,+je);case"[object Error]":return b.name==je.name&&b.message==je.message;case"[object RegExp]":case"[object String]":return b==je+"";case"[object Map]":var At=x;case"[object Set]":if(At||(At=A),b.size!=je.size&&!(1&et))return!1;var un=mt.get(b);if(un)return un==je;et|=2,mt.set(b,je);var Ot=T(At(b),At(je),et,ot,ut,mt);return mt.delete(b),Ot;case"[object Symbol]":if(Ee)return Ee.call(b)==Ee.call(je)}return!1}},32286:(E,W,f)=>{var g=f(47597),T=Object.prototype.hasOwnProperty;E.exports=function x(A,O,M,B,H,L){var Y=1&M,ne=g(A),ce=ne.length;if(ce!=g(O).length&&!Y)return!1;for(var ge=ce;ge--;){var he=ne[ge];if(!(Y?he in O:T.call(O,he)))return!1}var q=L.get(A),ye=L.get(O);if(q&&ye)return q==O&&ye==A;var Ee=!0;L.set(A,O),L.set(O,A);for(var Fe=Y;++ge<ce;){var b=A[he=ne[ge]],je=O[he];if(B)var tt=Y?B(je,b,he,O,A,L):B(b,je,he,A,O,L);if(!(void 0===tt?b===je||H(b,je,M,B,L):tt)){Ee=!1;break}Fe||(Fe="constructor"==he)}if(Ee&&!Fe){var et=A.constructor,ot=O.constructor;et!=ot&&"constructor"in A&&"constructor"in O&&!("function"==typeof et&&et instanceof et&&"function"==typeof ot&&ot instanceof ot)&&(Ee=!1)}return L.delete(A),L.delete(O),Ee}},3975:(E,W,f)=>{var g=f(22274),v=f(53983),S=f(72185);E.exports=function T(x){return S(v(x,void 0,g),x+"")}},79122:E=>{var W="object"==typeof global&&global&&global.Object===Object&&global;E.exports=W},47597:(E,W,f)=>{var g=f(38247),v=f(39383),S=f(118);E.exports=function T(x){return g(x,S,v)}},6967:(E,W,f)=>{var g=f(38247),v=f(53051),S=f(16555);E.exports=function T(x){return g(x,S,v)}},54537:(E,W,f)=>{var g=f(23819);E.exports=function v(S,T){var x=S.__data__;return g(T)?x["string"==typeof T?"string":"hash"]:x.map}},22379:(E,W,f)=>{var g=f(22442),v=f(118);E.exports=function S(T){for(var x=v(T),A=x.length;A--;){var O=x[A],M=T[O];x[A]=[O,M,g(M)]}return x}},53436:(E,W,f)=>{var g=f(37304),v=f(51990);E.exports=function S(T,x){var A=v(T,x);return g(A)?A:void 0}},29519:(E,W,f)=>{var v=f(69385)(Object.getPrototypeOf,Object);E.exports=v},21318:(E,W,f)=>{var g=f(60443),v=Object.prototype,S=v.hasOwnProperty,T=v.toString,x=g?g.toStringTag:void 0;E.exports=function A(O){var M=S.call(O,x),B=O[x];try{O[x]=void 0;var H=!0}catch(Y){}var L=T.call(O);return H&&(M?O[x]=B:delete O[x]),L}},39383:(E,W,f)=>{var g=f(69779),v=f(49975),T=Object.prototype.propertyIsEnumerable,x=Object.getOwnPropertySymbols;E.exports=x?function(O){return null==O?[]:(O=Object(O),g(x(O),function(M){return T.call(O,M)}))}:v},53051:(E,W,f)=>{var g=f(85059),v=f(29519),S=f(39383),T=f(49975);E.exports=Object.getOwnPropertySymbols?function(O){for(var M=[];O;)g(M,S(O)),O=v(O);return M}:T},28794:(E,W,f)=>{var g=f(37244),v=f(51501),S=f(44267),T=f(46323),x=f(24243),A=f(93337),O=f(52827),M="[object Map]",H="[object Promise]",L="[object Set]",Y="[object WeakMap]",ne="[object DataView]",ce=O(g),i=O(v),se=O(S),ge=O(T),he=O(x),q=A;(g&&q(new g(new ArrayBuffer(1)))!=ne||v&&q(new v)!=M||S&&q(S.resolve())!=H||T&&q(new T)!=L||x&&q(new x)!=Y)&&(q=function(ye){var Ee=A(ye),Fe="[object Object]"==Ee?ye.constructor:void 0,b=Fe?O(Fe):"";if(b)switch(b){case ce:return ne;case i:return M;case se:return H;case ge:return L;case he:return Y}return Ee}),E.exports=q},51990:E=>{E.exports=function W(f,g){return null==f?void 0:f[g]}},47283:(E,W,f)=>{var g=f(65456),v=f(77151),S=f(21503),T=f(58442),x=f(96231),A=f(68533);E.exports=function O(M,B,H){for(var L=-1,Y=(B=g(B,M)).length,ne=!1;++L<Y;){var ce=A(B[L]);if(!(ne=null!=M&&H(M,ce)))break;M=M[ce]}return ne||++L!=Y?ne:!!(Y=null==M?0:M.length)&&x(Y)&&T(ce,Y)&&(S(M)||v(M))}},77609:E=>{var A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");E.exports=function O(M){return A.test(M)}},64312:(E,W,f)=>{var g=f(60862);E.exports=function v(){this.__data__=g?g(null):{},this.size=0}},46421:E=>{E.exports=function W(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}},15764:(E,W,f)=>{var g=f(60862),T=Object.prototype.hasOwnProperty;E.exports=function x(A){var O=this.__data__;if(g){var M=O[A];return"__lodash_hash_undefined__"===M?void 0:M}return T.call(O,A)?O[A]:void 0}},18685:(E,W,f)=>{var g=f(60862),S=Object.prototype.hasOwnProperty;E.exports=function T(x){var A=this.__data__;return g?void 0!==A[x]:S.call(A,x)}},26676:(E,W,f)=>{var g=f(60862);E.exports=function S(T,x){var A=this.__data__;return this.size+=this.has(T)?0:1,A[T]=g&&void 0===x?"__lodash_hash_undefined__":x,this}},76782:E=>{var f=Object.prototype.hasOwnProperty;E.exports=function g(v){var S=v.length,T=new v.constructor(S);return S&&"string"==typeof v[0]&&f.call(v,"index")&&(T.index=v.index,T.input=v.input),T}},37878:(E,W,f)=>{var g=f(43362),v=f(17e3),S=f(74098),T=f(62533),x=f(65208);E.exports=function tt(et,ot,ut){var mt=et.constructor;switch(ot){case"[object ArrayBuffer]":return g(et);case"[object Boolean]":case"[object Date]":return new mt(+et);case"[object DataView]":return v(et,ut);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(et,ut);case"[object Map]":case"[object Set]":return new mt;case"[object Number]":case"[object String]":return new mt(et);case"[object RegExp]":return S(et);case"[object Symbol]":return T(et)}}},4264:(E,W,f)=>{var g=f(78858),v=f(29519),S=f(45488);E.exports=function T(x){return"function"!=typeof x.constructor||S(x)?{}:g(v(x))}},75039:(E,W,f)=>{var g=f(60443),v=f(77151),S=f(21503),T=g?g.isConcatSpreadable:void 0;E.exports=function x(A){return S(A)||v(A)||!!(T&&A&&A[T])}},58442:E=>{var f=/^(?:0|[1-9]\d*)$/;E.exports=function g(v,S){var T=typeof v;return!!(S=null==S?9007199254740991:S)&&("number"==T||"symbol"!=T&&f.test(v))&&v>-1&&v%1==0&&v<S}},93342:(E,W,f)=>{var g=f(20217),v=f(56507),S=f(58442),T=f(25940);E.exports=function x(A,O,M){if(!T(M))return!1;var B=typeof O;return!!("number"==B?v(M)&&S(O,M.length):"string"==B&&O in M)&&g(M[O],A)}},45352:(E,W,f)=>{var g=f(21503),v=f(44129),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;E.exports=function x(A,O){if(g(A))return!1;var M=typeof A;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=A&&!v(A))||T.test(A)||!S.test(A)||null!=O&&A in Object(O)}},23819:E=>{E.exports=function W(f){var g=typeof f;return"string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==f:null===f}},91943:(E,W,f)=>{var T,g=f(24610),v=(T=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";E.exports=function S(T){return!!v&&v in T}},45488:E=>{var W=Object.prototype;E.exports=function f(g){var v=g&&g.constructor;return g===("function"==typeof v&&v.prototype||W)}},22442:(E,W,f)=>{var g=f(25940);E.exports=function v(S){return S==S&&!g(S)}},41840:E=>{E.exports=function W(){this.__data__=[],this.size=0}},34378:(E,W,f)=>{var g=f(43503),S=Array.prototype.splice;E.exports=function T(x){var A=this.__data__,O=g(A,x);return!(O<0||(O==A.length-1?A.pop():S.call(A,O,1),--this.size,0))}},54981:(E,W,f)=>{var g=f(43503);E.exports=function v(S){var T=this.__data__,x=g(T,S);return x<0?void 0:T[x][1]}},67343:(E,W,f)=>{var g=f(43503);E.exports=function v(S){return g(this.__data__,S)>-1}},98895:(E,W,f)=>{var g=f(43503);E.exports=function v(S,T){var x=this.__data__,A=g(x,S);return A<0?(++this.size,x.push([S,T])):x[A][1]=T,this}},10638:(E,W,f)=>{var g=f(54994),v=f(9215),S=f(51501);E.exports=function T(){this.size=0,this.__data__={hash:new g,map:new(S||v),string:new g}}},11184:(E,W,f)=>{var g=f(54537);E.exports=function v(S){var T=g(this,S).delete(S);return this.size-=T?1:0,T}},70866:(E,W,f)=>{var g=f(54537);E.exports=function v(S){return g(this,S).get(S)}},43771:(E,W,f)=>{var g=f(54537);E.exports=function v(S){return g(this,S).has(S)}},51772:(E,W,f)=>{var g=f(54537);E.exports=function v(S,T){var x=g(this,S),A=x.size;return x.set(S,T),this.size+=x.size==A?0:1,this}},83205:E=>{E.exports=function W(f){var g=-1,v=Array(f.size);return f.forEach(function(S,T){v[++g]=[T,S]}),v}},642:E=>{E.exports=function W(f,g){return function(v){return null!=v&&v[f]===g&&(void 0!==g||f in Object(v))}}},90719:(E,W,f)=>{var g=f(30535);E.exports=function S(T){var x=g(T,function(O){return 500===A.size&&A.clear(),O}),A=x.cache;return x}},60862:(E,W,f)=>{var v=f(53436)(Object,"create");E.exports=v},85491:(E,W,f)=>{var v=f(69385)(Object.keys,Object);E.exports=v},32158:E=>{E.exports=function W(f){var g=[];if(null!=f)for(var v in Object(f))g.push(v);return g}},73597:(E,W,f)=>{E=f.nmd(E);var g=f(79122),v=W&&!W.nodeType&&W,S=v&&E&&!E.nodeType&&E,x=S&&S.exports===v&&g.process,A=function(){try{return S&&S.require&&S.require("util").types||x&&x.binding&&x.binding("util")}catch(M){}}();E.exports=A},92902:E=>{var f=Object.prototype.toString;E.exports=function g(v){return f.call(v)}},69385:E=>{E.exports=function W(f,g){return function(v){return f(g(v))}}},53983:(E,W,f)=>{var g=f(26999),v=Math.max;E.exports=function S(T,x,A){return x=v(void 0===x?T.length-1:x,0),function(){for(var O=arguments,M=-1,B=v(O.length-x,0),H=Array(B);++M<B;)H[M]=O[x+M];M=-1;for(var L=Array(x+1);++M<x;)L[M]=O[M];return L[x]=A(H),g(T,this,L)}}},12119:(E,W,f)=>{var g=f(79122),v="object"==typeof self&&self&&self.Object===Object&&self,S=g||v||Function("return this")();E.exports=S},99351:E=>{E.exports=function W(f,g){if(("constructor"!==g||"function"!=typeof f[g])&&"__proto__"!=g)return f[g]}},4600:E=>{E.exports=function f(g){return this.__data__.set(g,"__lodash_hash_undefined__"),this}},31387:E=>{E.exports=function W(f){return this.__data__.has(f)}},24174:E=>{E.exports=function W(f){var g=-1,v=Array(f.size);return f.forEach(function(S){v[++g]=S}),v}},72185:(E,W,f)=>{var g=f(69510),S=f(10029)(g);E.exports=S},10029:E=>{var g=Date.now;E.exports=function v(S){var T=0,x=0;return function(){var A=g(),O=16-(A-x);if(x=A,O>0){if(++T>=800)return arguments[0]}else T=0;return S.apply(void 0,arguments)}}},13720:(E,W,f)=>{var g=f(9215);E.exports=function v(){this.__data__=new g,this.size=0}},64410:E=>{E.exports=function W(f){var g=this.__data__,v=g.delete(f);return this.size=g.size,v}},45576:E=>{E.exports=function W(f){return this.__data__.get(f)}},22247:E=>{E.exports=function W(f){return this.__data__.has(f)}},41585:(E,W,f)=>{var g=f(9215),v=f(51501),S=f(99850);E.exports=function x(A,O){var M=this.__data__;if(M instanceof g){var B=M.__data__;if(!v||B.length<199)return B.push([A,O]),this.size=++M.size,this;M=this.__data__=new S(B)}return M.set(A,O),this.size=M.size,this}},24977:E=>{E.exports=function W(f,g,v){for(var S=v-1,T=f.length;++S<T;)if(f[S]===g)return S;return-1}},52315:(E,W,f)=>{var g=f(75481),v=f(77609),S=f(81149);E.exports=function T(x){return v(x)?S(x):g(x)}},32855:(E,W,f)=>{var g=f(90719),v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,T=g(function(x){var A=[];return 46===x.charCodeAt(0)&&A.push(""),x.replace(v,function(O,M,B,H){A.push(B?H.replace(S,"$1"):M||O)}),A});E.exports=T},68533:(E,W,f)=>{var g=f(44129);E.exports=function S(T){if("string"==typeof T||g(T))return T;var x=T+"";return"0"==x&&1/T==-1/0?"-0":x}},52827:E=>{var f=Function.prototype.toString;E.exports=function g(v){if(null!=v){try{return f.call(v)}catch(S){}try{return v+""}catch(S){}}return""}},42760:E=>{var W=/\s/;E.exports=function f(g){for(var v=g.length;v--&&W.test(g.charAt(v)););return v}},81149:E=>{var W="\\ud800-\\udfff",x="["+W+"]",A="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",O="\\ud83c[\\udffb-\\udfff]",B="[^"+W+"]",H="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",ne="(?:"+A+"|"+O+")?",ce="[\\ufe0e\\ufe0f]?",se=ce+ne+"(?:\\u200d(?:"+[B,H,L].join("|")+")"+ce+ne+")*",ge="(?:"+[B+A+"?",A,H,L,x].join("|")+")",he=RegExp(O+"(?="+O+")|"+ge+se,"g");E.exports=function q(ye){for(var Ee=he.lastIndex=0;he.test(ye);)++Ee;return Ee}},11094:(E,W,f)=>{var g=f(44462);E.exports=function S(T){return g(T,4)}},90733:(E,W,f)=>{var g=f(44462);E.exports=function T(x){return g(x,5)}},76684:E=>{E.exports=function W(f){return function(){return f}}},28800:(E,W,f)=>{var g=f(23269),v=f(20217),S=f(93342),T=f(16555),x=Object.prototype,A=x.hasOwnProperty,O=g(function(M,B){M=Object(M);var H=-1,L=B.length,Y=L>2?B[2]:void 0;for(Y&&S(B[0],B[1],Y)&&(L=1);++H<L;)for(var ne=B[H],ce=T(ne),i=-1,se=ce.length;++i<se;){var ge=ce[i],he=M[ge];(void 0===he||v(he,x[ge])&&!A.call(M,ge))&&(M[ge]=ne[ge])}return M});E.exports=O},35474:(E,W,f)=>{E.exports=f(89851)},20217:E=>{E.exports=function W(f,g){return f===g||f!=f&&g!=g}},35281:(E,W,f)=>{var g=f(69779),v=f(33609),S=f(96517),T=f(21503);E.exports=function x(A,O){return(T(A)?g:v)(A,S(O,3))}},62516:(E,W,f)=>{var S=f(24653)(f(36397));E.exports=S},36397:(E,W,f)=>{var g=f(65317),v=f(96517),S=f(44401),T=Math.max;E.exports=function x(A,O,M){var B=null==A?0:A.length;if(!B)return-1;var H=null==M?0:S(M);return H<0&&(H=T(B+H,0)),g(A,v(O,3),H)}},22274:(E,W,f)=>{var g=f(50686);E.exports=function v(S){return null!=S&&S.length?g(S,1):[]}},89851:(E,W,f)=>{var g=f(96837),v=f(43132),S=f(21481),T=f(21503);E.exports=function x(A,O){return(T(A)?g:v)(A,S(O))}},41176:(E,W,f)=>{var g=f(30755),v=f(21481),S=f(16555);E.exports=function T(x,A){return null==x?x:g(x,v(A),S)}},8817:(E,W,f)=>{var g=f(15456);E.exports=function v(S,T,x){var A=null==S?void 0:g(S,T);return void 0===A?x:A}},54842:(E,W,f)=>{var g=f(84781),v=f(47283);E.exports=function S(T,x){return null!=T&&v(T,x,g)}},11172:(E,W,f)=>{var g=f(69989),v=f(47283);E.exports=function S(T,x){return null!=T&&v(T,x,g)}},32608:E=>{E.exports=function W(f){return f}},77151:(E,W,f)=>{var g=f(60186),v=f(72671),S=Object.prototype,T=S.hasOwnProperty,x=S.propertyIsEnumerable,A=g(function(){return arguments}())?g:function(O){return v(O)&&T.call(O,"callee")&&!x.call(O,"callee")};E.exports=A},21503:E=>{E.exports=Array.isArray},56507:(E,W,f)=>{var g=f(75946),v=f(96231);E.exports=function S(T){return null!=T&&v(T.length)&&!g(T)}},21330:(E,W,f)=>{var g=f(56507),v=f(72671);E.exports=function S(T){return v(T)&&g(T)}},80891:(E,W,f)=>{E=f.nmd(E);var g=f(12119),v=f(63580),S=W&&!W.nodeType&&W,T=S&&E&&!E.nodeType&&E,A=T&&T.exports===S?g.Buffer:void 0;E.exports=(A?A.isBuffer:void 0)||v},71973:(E,W,f)=>{var g=f(81172),v=f(28794),S=f(77151),T=f(21503),x=f(56507),A=f(80891),O=f(45488),M=f(48159),Y=Object.prototype.hasOwnProperty;E.exports=function ne(ce){if(null==ce)return!0;if(x(ce)&&(T(ce)||"string"==typeof ce||"function"==typeof ce.splice||A(ce)||M(ce)||S(ce)))return!ce.length;var i=v(ce);if("[object Map]"==i||"[object Set]"==i)return!ce.size;if(O(ce))return!g(ce).length;for(var se in ce)if(Y.call(ce,se))return!1;return!0}},75946:(E,W,f)=>{var g=f(93337),v=f(25940);E.exports=function O(M){if(!v(M))return!1;var B=g(M);return"[object Function]"==B||"[object GeneratorFunction]"==B||"[object AsyncFunction]"==B||"[object Proxy]"==B}},96231:E=>{E.exports=function f(g){return"number"==typeof g&&g>-1&&g%1==0&&g<=9007199254740991}},13222:(E,W,f)=>{var g=f(97021),v=f(85647),S=f(73597),T=S&&S.isMap,x=T?v(T):g;E.exports=x},25940:E=>{E.exports=function W(f){var g=typeof f;return null!=f&&("object"==g||"function"==g)}},72671:E=>{E.exports=function W(f){return null!=f&&"object"==typeof f}},97614:(E,W,f)=>{var g=f(93337),v=f(29519),S=f(72671),O=Function.prototype.toString,M=Object.prototype.hasOwnProperty,B=O.call(Object);E.exports=function H(L){if(!S(L)||"[object Object]"!=g(L))return!1;var Y=v(L);if(null===Y)return!0;var ne=M.call(Y,"constructor")&&Y.constructor;return"function"==typeof ne&&ne instanceof ne&&O.call(ne)==B}},90799:(E,W,f)=>{var g=f(771),v=f(85647),S=f(73597),T=S&&S.isSet,x=T?v(T):g;E.exports=x},30248:(E,W,f)=>{var g=f(93337),v=f(21503),S=f(72671);E.exports=function x(A){return"string"==typeof A||!v(A)&&S(A)&&"[object String]"==g(A)}},44129:(E,W,f)=>{var g=f(93337),v=f(72671);E.exports=function T(x){return"symbol"==typeof x||v(x)&&"[object Symbol]"==g(x)}},48159:(E,W,f)=>{var g=f(1083),v=f(85647),S=f(73597),T=S&&S.isTypedArray,x=T?v(T):g;E.exports=x},34235:E=>{E.exports=function W(f){return void 0===f}},118:(E,W,f)=>{var g=f(72271),v=f(81172),S=f(56507);E.exports=function T(x){return S(x)?g(x):v(x)}},16555:(E,W,f)=>{var g=f(72271),v=f(92809),S=f(56507);E.exports=function T(x){return S(x)?g(x,!0):v(x)}},25809:E=>{E.exports=function W(f){var g=null==f?0:f.length;return g?f[g-1]:void 0}},17489:function(E,W,f){var g;E=f.nmd(E),function(){var v,A="Expected a function",M="__lodash_hash_undefined__",H="__lodash_placeholder__",b=128,Ot=1/0,Xn=9007199254740991,_r=4294967295,er=[["ary",b],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ue="[object Arguments]",qe="[object Array]",xt="[object Boolean]",Dt="[object Date]",Mt="[object Error]",or="[object Function]",Ni="[object GeneratorFunction]",ln="[object Map]",Zt="[object Number]",G="[object Object]",re="[object Promise]",$e="[object RegExp]",We="[object Set]",pt="[object String]",kt="[object Symbol]",dn="[object WeakMap]",cn="[object ArrayBuffer]",ar="[object DataView]",Jn="[object Float32Array]",oi="[object Float64Array]",Fn="[object Int8Array]",Et="[object Int16Array]",Un="[object Int32Array]",tr="[object Uint8Array]",br="[object Uint8ClampedArray]",ai="[object Uint16Array]",pr="[object Uint32Array]",dr=/\b__p \+= '';/g,Jo=/\b(__p \+=) '' \+/g,za=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mo=/&(?:amp|lt|gt|quot|#39);/g,Qo=/[&<>"']/g,me=RegExp(Mo.source),mi=RegExp(Qo.source),co=/<%-([\s\S]+?)%>/g,Zo=/<%([\s\S]+?)%>/g,yt=/<%=([\s\S]+?)%>/g,si=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oo=/^\w*$/,ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fo=/[\\^$.*+?()[\]{}|]/g,Cr=RegExp(fo.source),qo=/^\s+/,Br=/\s/,Ua=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ga=/\{\n\/\* \[wrapped with (.+)\] \*/,Yr=/,? & /,ga=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ho=/[()=,{}\[\]\/\s]/,va=/\\(\\)?/g,gt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vs=/\w*$/,Ki=/^[-+]0x[0-9a-f]+$/i,Wa=/^0b[01]+$/i,$a=/^\[object .+?Constructor\]$/,Vn=/^0o[0-7]+$/i,ea=/^(?:0|[1-9]\d*)$/,js=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ji=/($^)/,po=/['\n\r\u2028\u2029\\]/g,Qi="\\ud800-\\udfff",Xr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Di="\\u2700-\\u27bf",_n="a-z\\xdf-\\xf6\\xf8-\\xff",eo="A-Z\\xc0-\\xd6\\xd8-\\xde",Fi="\\ufe0e\\ufe0f",to="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ms="["+Qi+"]",Hr="["+to+"]",wr="["+Xr+"]",Sr="\\d+",Zr="["+Di+"]",ma="["+_n+"]",na="[^"+Qi+to+Sr+Di+_n+eo+"]",yi="\\ud83c[\\udffb-\\udfff]",no="[^"+Qi+"]",Lo="(?:\\ud83c[\\udde6-\\uddff]){2}",qr="[\\ud800-\\udbff][\\udc00-\\udfff]",ro="["+eo+"]",go="(?:"+ma+"|"+na+")",ya="(?:"+ro+"|"+na+")",xa="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ra="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ro="(?:"+wr+"|"+yi+")?",Xa="["+Fi+"]?",Ja=Xa+Ro+"(?:\\u200d(?:"+[no,Lo,qr].join("|")+")"+Xa+Ro+")*",Qa="(?:"+[Zr,Lo,qr].join("|")+")"+Ja,ys="(?:"+[no+wr+"?",wr,Lo,qr,ms].join("|")+")",Za=RegExp("['\u2019]","g"),Ca=RegExp(wr,"g"),Ei=RegExp(yi+"(?="+yi+")|"+ys+Ja,"g"),No=RegExp([ro+"?"+ma+"+"+xa+"(?="+[Hr,ro,"$"].join("|")+")",ya+"+"+ra+"(?="+[Hr,ro+go,"$"].join("|")+")",ro+"?"+go+"+"+xa,ro+"+"+ra,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Sr,Qa].join("|"),"g"),xs=RegExp("[\\u200d"+Qi+Xr+Fi+"]"),io=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wa=-1,Hn={};Hn[Jn]=Hn[oi]=Hn[Fn]=Hn[Et]=Hn[Un]=Hn[tr]=Hn[br]=Hn[ai]=Hn[pr]=!0,Hn[Ue]=Hn[qe]=Hn[cn]=Hn[xt]=Hn[ar]=Hn[Dt]=Hn[Mt]=Hn[or]=Hn[ln]=Hn[Zt]=Hn[G]=Hn[$e]=Hn[We]=Hn[pt]=Hn[dn]=!1;var De={};De[Ue]=De[qe]=De[cn]=De[ar]=De[xt]=De[Dt]=De[Jn]=De[oi]=De[Fn]=De[Et]=De[Un]=De[ln]=De[Zt]=De[G]=De[$e]=De[We]=De[pt]=De[kt]=De[tr]=De[br]=De[ai]=De[pr]=!0,De[Mt]=De[or]=De[dn]=!1;var J={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,pe=parseInt,Oe="object"==typeof global&&global&&global.Object===Object&&global,we="object"==typeof self&&self&&self.Object===Object&&self,l=Oe||we||Function("return this")(),d=W&&!W.nodeType&&W,y=d&&E&&!E.nodeType&&E,C=y&&y.exports===d,N=C&&Oe.process,D=function(){try{return y&&y.require&&y.require("util").types||N&&N.binding&&N.binding("util")}catch(Ke){}}(),X=D&&D.isArrayBuffer,ue=D&&D.isDate,le=D&&D.isMap,Ce=D&&D.isRegExp,He=D&&D.isSet,rt=D&&D.isTypedArray;function Le(Te,Ke,Be){switch(Be.length){case 0:return Te.call(Ke);case 1:return Te.call(Ke,Be[0]);case 2:return Te.call(Ke,Be[0],Be[1]);case 3:return Te.call(Ke,Be[0],Be[1],Be[2])}return Te.apply(Ke,Be)}function Xe(Te,Ke,Be,wt){for(var en=-1,In=null==Te?0:Te.length;++en<In;){var ur=Te[en];Ke(wt,ur,Be(ur),Te)}return wt}function Tt(Te,Ke){for(var Be=-1,wt=null==Te?0:Te.length;++Be<wt&&!1!==Ke(Te[Be],Be,Te););return Te}function on(Te,Ke){for(var Be=null==Te?0:Te.length;Be--&&!1!==Ke(Te[Be],Be,Te););return Te}function Ft(Te,Ke){for(var Be=-1,wt=null==Te?0:Te.length;++Be<wt;)if(!Ke(Te[Be],Be,Te))return!1;return!0}function Qn(Te,Ke){for(var Be=-1,wt=null==Te?0:Te.length,en=0,In=[];++Be<wt;){var ur=Te[Be];Ke(ur,Be,Te)&&(In[en++]=ur)}return In}function sr(Te,Ke){return!(null==Te||!Te.length)&&Lr(Te,Ke,0)>-1}function li(Te,Ke,Be){for(var wt=-1,en=null==Te?0:Te.length;++wt<en;)if(Be(Ke,Te[wt]))return!0;return!1}function Vt(Te,Ke){for(var Be=-1,wt=null==Te?0:Te.length,en=Array(wt);++Be<wt;)en[Be]=Ke(Te[Be],Be,Te);return en}function zt(Te,Ke){for(var Be=-1,wt=Ke.length,en=Te.length;++Be<wt;)Te[en+Be]=Ke[Be];return Te}function jr(Te,Ke,Be,wt){var en=-1,In=null==Te?0:Te.length;for(wt&&In&&(Be=Te[++en]);++en<In;)Be=Ke(Be,Te[en],en,Te);return Be}function En(Te,Ke,Be,wt){var en=null==Te?0:Te.length;for(wt&&en&&(Be=Te[--en]);en--;)Be=Ke(Be,Te[en],en,Te);return Be}function nr(Te,Ke){for(var Be=-1,wt=null==Te?0:Te.length;++Be<wt;)if(Ke(Te[Be],Be,Te))return!0;return!1}var Tr=ci("length");function ia(Te,Ke,Be){var wt;return Be(Te,function(en,In,ur){if(Ke(en,In,ur))return wt=In,!1}),wt}function vo(Te,Ke,Be,wt){for(var en=Te.length,In=Be+(wt?1:-1);wt?In--:++In<en;)if(Ke(Te[In],In,Te))return In;return-1}function Lr(Te,Ke,Be){return Ke==Ke?function zr(Te,Ke,Be){for(var wt=Be-1,en=Te.length;++wt<en;)if(Te[wt]===Ke)return wt;return-1}(Te,Ke,Be):vo(Te,rr,Be)}function Rt(Te,Ke,Be,wt){for(var en=Be-1,In=Te.length;++en<In;)if(wt(Te[en],Ke))return en;return-1}function rr(Te){return Te!=Te}function Bi(Te,Ke){var Be=null==Te?0:Te.length;return Be?gr(Te,Ke)/Be:NaN}function ci(Te){return function(Ke){return null==Ke?v:Ke[Te]}}function oo(Te){return function(Ke){return null==Te?v:Te[Ke]}}function oa(Te,Ke,Be,wt,en){return en(Te,function(In,ur,Bn){Be=wt?(wt=!1,In):Ke(Be,In,ur,Bn)}),Be}function gr(Te,Ke){for(var Be,wt=-1,en=Te.length;++wt<en;){var In=Ke(Te[wt]);In!==v&&(Be=Be===v?In:Be+In)}return Be}function Hi(Te,Ke){for(var Be=-1,wt=Array(Te);++Be<Te;)wt[Be]=Ke(Be);return wt}function Rn(Te){return Te&&Te.slice(0,jn(Te)+1).replace(qo,"")}function Pn(Te){return function(Ke){return Te(Ke)}}function pn(Te,Ke){return Vt(Ke,function(Be){return Te[Be]})}function qa(Te,Ke){return Te.has(Ke)}function gu(Te,Ke){for(var Be=-1,wt=Te.length;++Be<wt&&Lr(Ke,Te[Be],0)>-1;);return Be}function rl(Te,Ke){for(var Be=Te.length;Be--&&Lr(Ke,Te[Be],0)>-1;);return Be}function il(Te,Ke){for(var Be=Te.length,wt=0;Be--;)Te[Be]===Ke&&++wt;return wt}var es=oo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),ol=oo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xc(Te){return"\\"+J[Te]}function Rr(Te){return xs.test(Te)}function Ii(Te){var Ke=-1,Be=Array(Te.size);return Te.forEach(function(wt,en){Be[++Ke]=[en,wt]}),Be}function mo(Te,Ke){return function(Be){return Te(Ke(Be))}}function vr(Te,Ke){for(var Be=-1,wt=Te.length,en=0,In=[];++Be<wt;){var ur=Te[Be];(ur===Ke||ur===H)&&(Te[Be]=H,In[en++]=Be)}return In}function ts(Te){var Ke=-1,Be=Array(Te.size);return Te.forEach(function(wt){Be[++Ke]=wt}),Be}function Nn(Te){return Rr(Te)?function Ur(Te){for(var Ke=Ei.lastIndex=0;Ei.test(Te);)++Ke;return Ke}(Te):Tr(Te)}function Sn(Te){return Rr(Te)?function mu(Te){return Te.match(Ei)||[]}(Te):function zs(Te){return Te.split("")}(Te)}function jn(Te){for(var Ke=Te.length;Ke--&&Br.test(Te.charAt(Ke)););return Ke}var Fo=oo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ji=function Te(Ke){var a,Be=(Ke=null==Ke?l:ji.defaults(l.Object(),Ke,ji.pick(l,Vi))).Array,wt=Ke.Date,en=Ke.Error,In=Ke.Function,ur=Ke.Math,Bn=Ke.Object,sa=Ke.RegExp,Vo=Ke.String,Q=Ke.TypeError,de=Be.prototype,Ye=Bn.prototype,Ie=Ke["__core-js_shared__"],Je=In.prototype.toString,Ge=Ye.hasOwnProperty,dt=0,vt=(a=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"",Bt=Ye.toString,jt=Je.call(Bn),ct=l._,gn=sa("^"+Je.call(Ge).replace(fo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vn=C?Ke.Buffer:v,It=Ke.Symbol,lr=Ke.Uint8Array,hr=vn?vn.allocUnsafe:v,Gr=mo(Bn.getPrototypeOf,Bn),Wn=Bn.create,Sa=Ye.propertyIsEnumerable,Bo=de.splice,fi=It?It.isConcatSpreadable:v,Gs=It?It.iterator:v,ns=It?It.toStringTag:v,xu=function(){try{var a=ls(Bn,"defineProperty");return a({},"",{}),a}catch(u){}}(),pd=Ke.clearTimeout!==l.clearTimeout&&Ke.clearTimeout,gd=wt&&wt.now!==l.Date.now&&wt.now,vd=Ke.setTimeout!==l.setTimeout&&Ke.setTimeout,xo=ur.ceil,Ws=ur.floor,_u=Bn.getOwnPropertySymbols,_c=vn?vn.isBuffer:v,al=Ke.isFinite,md=de.join,yd=mo(Bn.keys,Bn),Wr=ur.max,di=ur.min,xd=wt.now,_d=Ke.parseInt,bc=ur.random,bd=de.reverse,sl=ls(Ke,"DataView"),$s=ls(Ke,"Map"),ul=ls(Ke,"Promise"),rs=ls(Ke,"Set"),Ys=ls(Ke,"WeakMap"),Xs=ls(Bn,"create"),Jr=Ys&&new Ys,_s={},ll=fs(sl),Cd=fs($s),ua=fs(ul),Ks=fs(rs),wd=fs(Ys),cl=It?It.prototype:v,bu=cl?cl.valueOf:v,Cc=cl?cl.toString:v;function Z(a){if(yr(a)&&!tn(a)&&!(a instanceof An)){if(a instanceof _o)return a;if(Ge.call(a,"__wrapped__"))return yf(a)}return new _o(a)}var Js=function(){function a(){}return function(u){if(!Zn(u))return{};if(Wn)return Wn(u);a.prototype=u;var h=new a;return a.prototype=v,h}}();function fl(){}function _o(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=v}function An(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_r,this.__views__=[]}function la(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function ca(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function bo(a){var u=-1,h=null==a?0:a.length;for(this.clear();++u<h;){var P=a[u];this.set(P[0],P[1])}}function os(a){var u=-1,h=null==a?0:a.length;for(this.__data__=new bo;++u<h;)this.add(a[u])}function Co(a){var u=this.__data__=new ca(a);this.size=u.size}function hl(a,u){var h=tn(a),P=!h&&$o(a),j=!h&&!P&&Ba(a),ee=!h&&!P&&!j&&Ns(a),fe=h||P||j||ee,_e=fe?Hi(a.length,Vo):[],Me=_e.length;for(var Qe in a)(u||Ge.call(a,Qe))&&(!fe||!("length"==Qe||j&&("offset"==Qe||"parent"==Qe)||ee&&("buffer"==Qe||"byteLength"==Qe||"byteOffset"==Qe)||Eo(Qe,Me)))&&_e.push(Qe);return _e}function pl(a){var u=a.length;return u?a[ku(0,u-1)]:v}function Ad(a,u){return Gu(Ai(a),zi(u,0,a.length))}function Md(a){return Gu(Ai(a))}function Eu(a,u,h){(h!==v&&!Io(a[u],h)||h===v&&!(u in a))&&Ho(a,u,h)}function Ea(a,u,h){var P=a[u];(!Ge.call(a,u)||!Io(P,h)||h===v&&!(u in a))&&Ho(a,u,h)}function Pu(a,u){for(var h=a.length;h--;)if(Io(a[h][0],u))return h;return-1}function Od(a,u,h,P){return Pa(a,function(j,ee,fe){u(P,j,h(j),fe)}),P}function Iu(a,u){return a&&jo(u,Qr(u),a)}function Ho(a,u,h){"__proto__"==u&&xu?xu(a,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):a[u]=h}function Qs(a,u){for(var h=-1,P=u.length,j=Be(P),ee=null==a;++h<P;)j[h]=ee?v:oc(a,u[h]);return j}function zi(a,u,h){return a==a&&(h!==v&&(a=a<=h?a:h),u!==v&&(a=a>=u?a:u)),a}function Ui(a,u,h,P,j,ee){var fe,_e=1&u,Me=2&u,Qe=4&u;if(h&&(fe=j?h(a,P,j,ee):h(a)),fe!==v)return fe;if(!Zn(a))return a;var Ze=tn(a);if(Ze){if(fe=function th(a){var u=a.length,h=new a.constructor(u);return u&&"string"==typeof a[0]&&Ge.call(a,"index")&&(h.index=a.index,h.input=a.input),h}(a),!_e)return Ai(a,fe)}else{var it=gi(a),_t=it==or||it==Ni;if(Ba(a))return Wc(a,_e);if(it==G||it==Ue||_t&&!j){if(fe=Me||_t?{}:cf(a),!_e)return Me?function $d(a,u){return jo(a,uf(a),u)}(a,function gl(a,u){return a&&jo(u,ki(u),a)}(fe,a)):function fa(a,u){return jo(a,Vl(a),u)}(a,Iu(fe,a))}else{if(!De[it])return j?a:{};fe=function ff(a,u,h){var P=a.constructor;switch(u){case cn:return Rl(a);case xt:case Dt:return new P(+a);case ar:return function $c(a,u){var h=u?Rl(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.byteLength)}(a,h);case Jn:case oi:case Fn:case Et:case Un:case tr:case br:case ai:case pr:return Vu(a,h);case ln:return new P;case Zt:case pt:return new P(a);case $e:return function Ud(a){var u=new a.constructor(a.source,vs.exec(a));return u.lastIndex=a.lastIndex,u}(a);case We:return new P;case kt:return function Gd(a){return bu?Bn(bu.call(a)):{}}(a)}}(a,it,_e)}}ee||(ee=new Co);var Nt=ee.get(a);if(Nt)return Nt;ee.set(a,fe),Yo(a)?a.forEach(function(Wt){fe.add(Ui(Wt,u,h,Wt,a,ee))}):Gf(a)&&a.forEach(function(Wt,bn){fe.set(bn,Ui(Wt,u,h,bn,a,ee))});var mn=Ze?v:(Qe?Me?Ms:us:Me?ki:Qr)(a);return Tt(mn||a,function(Wt,bn){mn&&(Wt=a[bn=Wt]),Ea(fe,bn,Ui(Wt,u,h,bn,a,ee))}),fe}function vl(a,u,h){var P=h.length;if(null==a)return!P;for(a=Bn(a);P--;){var j=h[P],fe=a[j];if(fe===v&&!(j in a)||!(0,u[j])(fe))return!1}return!0}function Tc(a,u,h){if("function"!=typeof a)throw new Q(A);return iu(function(){a.apply(v,h)},u)}function as(a,u,h,P){var j=-1,ee=sr,fe=!0,_e=a.length,Me=[],Qe=u.length;if(!_e)return Me;h&&(u=Vt(u,Pn(h))),P?(ee=li,fe=!1):u.length>=200&&(ee=qa,fe=!1,u=new os(u));e:for(;++j<_e;){var Ze=a[j],it=null==h?Ze:h(Ze);if(Ze=P||0!==Ze?Ze:0,fe&&it==it){for(var _t=Qe;_t--;)if(u[_t]===it)continue e;Me.push(Ze)}else ee(u,it,P)||Me.push(Ze)}return Me}Z.templateSettings={escape:co,evaluate:Zo,interpolate:yt,variable:"",imports:{_:Z}},(Z.prototype=fl.prototype).constructor=Z,(_o.prototype=Js(fl.prototype)).constructor=_o,(An.prototype=Js(fl.prototype)).constructor=An,la.prototype.clear=function Vg(){this.__data__=Xs?Xs(null):{},this.size=0},la.prototype.delete=function Sd(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u},la.prototype.get=function Td(a){var u=this.__data__;if(Xs){var h=u[a];return h===M?v:h}return Ge.call(u,a)?u[a]:v},la.prototype.has=function Ed(a){var u=this.__data__;return Xs?u[a]!==v:Ge.call(u,a)},la.prototype.set=function Bg(a,u){var h=this.__data__;return this.size+=this.has(a)?0:1,h[a]=Xs&&u===v?M:u,this},ca.prototype.clear=function Hg(){this.__data__=[],this.size=0},ca.prototype.delete=function jg(a){var u=this.__data__,h=Pu(u,a);return!(h<0||(h==u.length-1?u.pop():Bo.call(u,h,1),--this.size,0))},ca.prototype.get=function is(a){var u=this.__data__,h=Pu(u,a);return h<0?v:u[h][1]},ca.prototype.has=function bs(a){return Pu(this.__data__,a)>-1},ca.prototype.set=function wc(a,u){var h=this.__data__,P=Pu(h,a);return P<0?(++this.size,h.push([a,u])):h[P][1]=u,this},bo.prototype.clear=function Ta(){this.size=0,this.__data__={hash:new la,map:new($s||ca),string:new la}},bo.prototype.delete=function Cs(a){var u=Uu(this,a).delete(a);return this.size-=u?1:0,u},bo.prototype.get=function Mn(a){return Uu(this,a).get(a)},bo.prototype.has=function On(a){return Uu(this,a).has(a)},bo.prototype.set=function Cu(a,u){var h=Uu(this,a),P=h.size;return h.set(a,u),this.size+=h.size==P?0:1,this},os.prototype.add=os.prototype.push=function Pd(a){return this.__data__.set(a,M),this},os.prototype.has=function Id(a){return this.__data__.has(a)},Co.prototype.clear=function wu(){this.__data__=new ca,this.size=0},Co.prototype.delete=function dl(a){var u=this.__data__,h=u.delete(a);return this.size=u.size,h},Co.prototype.get=function xi(a){return this.__data__.get(a)},Co.prototype.has=function Su(a){return this.__data__.has(a)},Co.prototype.set=function Tu(a,u){var h=this.__data__;if(h instanceof ca){var P=h.__data__;if(!$s||P.length<199)return P.push([a,u]),this.size=++h.size,this;h=this.__data__=new bo(P)}return h.set(a,u),this.size=h.size,this};var Pa=Kc(ao),ml=Kc(yl,!0);function kd(a,u){var h=!0;return Pa(a,function(P,j,ee){return h=!!u(P,j,ee)}),h}function Au(a,u,h){for(var P=-1,j=a.length;++P<j;){var ee=a[P],fe=u(ee);if(null!=fe&&(_e===v?fe==fe&&!Yi(fe):h(fe,_e)))var _e=fe,Me=ee}return Me}function Pc(a,u){var h=[];return Pa(a,function(P,j,ee){u(P,j,ee)&&h.push(P)}),h}function Pr(a,u,h,P,j){var ee=-1,fe=a.length;for(h||(h=$i),j||(j=[]);++ee<fe;){var _e=a[ee];u>0&&h(_e)?u>1?Pr(_e,u-1,h,P,j):zt(j,_e):P||(j[j.length]=_e)}return j}var ws=Jc(),Ss=Jc(!0);function ao(a,u){return a&&ws(a,u,Qr)}function yl(a,u){return a&&Ss(a,u,Qr)}function Zs(a,u){return Qn(u,function(h){return pa(a[h])})}function Ia(a,u){for(var h=0,P=(u=Oa(u,a)).length;null!=a&&h<P;)a=a[Uo(u[h++])];return h&&h==P?a:v}function Ic(a,u,h){var P=u(a);return tn(a)?P:zt(P,h(a))}function _i(a){return null==a?a===v?"[object Undefined]":"[object Null]":ns&&ns in Bn(a)?function Zd(a){var u=Ge.call(a,ns),h=a[ns];try{a[ns]=v;var P=!0}catch(ee){}var j=Bt.call(a);return P&&(u?a[ns]=h:delete a[ns]),j}(a):function sh(a){return Bt.call(a)}(a)}function xl(a,u){return a>u}function _l(a,u){return null!=a&&Ge.call(a,u)}function Ld(a,u){return null!=a&&u in Bn(a)}function bl(a,u,h){for(var P=h?li:sr,j=a[0].length,ee=a.length,fe=ee,_e=Be(ee),Me=1/0,Qe=[];fe--;){var Ze=a[fe];fe&&u&&(Ze=Vt(Ze,Pn(u))),Me=di(Ze.length,Me),_e[fe]=!h&&(u||j>=120&&Ze.length>=120)?new os(fe&&Ze):v}Ze=a[0];var it=-1,_t=_e[0];e:for(;++it<j&&Qe.length<Me;){var Nt=Ze[it],Qt=u?u(Nt):Nt;if(Nt=h||0!==Nt?Nt:0,!(_t?qa(_t,Qt):P(Qe,Qt,h))){for(fe=ee;--fe;){var mn=_e[fe];if(!(mn?qa(mn,Qt):P(a[fe],Qt,h)))continue e}_t&&_t.push(Qt),Qe.push(Nt)}}return Qe}function qs(a,u,h){var P=null==(a=gf(a,u=Oa(u,a)))?a:a[Uo(so(u))];return null==P?v:Le(P,a,h)}function Cl(a){return yr(a)&&_i(a)==Ue}function Aa(a,u,h,P,j){return a===u||(null==a||null==u||!yr(a)&&!yr(u)?a!=a&&u!=u:function wl(a,u,h,P,j,ee){var fe=tn(a),_e=tn(u),Me=fe?qe:gi(a),Qe=_e?qe:gi(u),Ze=(Me=Me==Ue?G:Me)==G,it=(Qe=Qe==Ue?G:Qe)==G,_t=Me==Qe;if(_t&&Ba(a)){if(!Ba(u))return!1;fe=!0,Ze=!1}if(_t&&!Ze)return ee||(ee=new Co),fe||Ns(a)?of(a,u,h,P,j,ee):function af(a,u,h,P,j,ee,fe){switch(h){case ar:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case cn:return!(a.byteLength!=u.byteLength||!ee(new lr(a),new lr(u)));case xt:case Dt:case Zt:return Io(+a,+u);case Mt:return a.name==u.name&&a.message==u.message;case $e:case pt:return a==u+"";case ln:var _e=Ii;case We:if(_e||(_e=ts),a.size!=u.size&&!(1&P))return!1;var Qe=fe.get(a);if(Qe)return Qe==u;P|=2,fe.set(a,u);var Ze=of(_e(a),_e(u),P,j,ee,fe);return fe.delete(a),Ze;case kt:if(bu)return bu.call(a)==bu.call(u)}return!1}(a,u,Me,h,P,j,ee);if(!(1&h)){var Nt=Ze&&Ge.call(a,"__wrapped__"),Qt=it&&Ge.call(u,"__wrapped__");if(Nt||Qt){var mn=Nt?a.value():a,Wt=Qt?u.value():u;return ee||(ee=new Co),j(mn,Wt,h,P,ee)}}return!!_t&&(ee||(ee=new Co),function sf(a,u,h,P,j,ee){var fe=1&h,_e=us(a),Me=_e.length;if(Me!=us(u).length&&!fe)return!1;for(var it=Me;it--;){var _t=_e[it];if(!(fe?_t in u:Ge.call(u,_t)))return!1}var Nt=ee.get(a),Qt=ee.get(u);if(Nt&&Qt)return Nt==u&&Qt==a;var mn=!0;ee.set(a,u),ee.set(u,a);for(var Wt=fe;++it<Me;){var bn=a[_t=_e[it]],kn=u[_t];if(P)var Xi=fe?P(kn,bn,_t,u,a,ee):P(bn,kn,_t,a,u,ee);if(!(Xi===v?bn===kn||j(bn,kn,h,P,ee):Xi)){mn=!1;break}Wt||(Wt="constructor"==_t)}if(mn&&!Wt){var Ci=a.constructor,Li=u.constructor;Ci!=Li&&"constructor"in a&&"constructor"in u&&!("function"==typeof Ci&&Ci instanceof Ci&&"function"==typeof Li&&Li instanceof Li)&&(mn=!1)}return ee.delete(a),ee.delete(u),mn}(a,u,h,P,j,ee))}(a,u,h,P,Aa,j))}function Sl(a,u,h,P){var j=h.length,ee=j,fe=!P;if(null==a)return!ee;for(a=Bn(a);j--;){var _e=h[j];if(fe&&_e[2]?_e[1]!==a[_e[0]]:!(_e[0]in a))return!1}for(;++j<ee;){var Me=(_e=h[j])[0],Qe=a[Me],Ze=_e[1];if(fe&&_e[2]){if(Qe===v&&!(Me in a))return!1}else{var it=new Co;if(P)var _t=P(Qe,Ze,Me,a,u,it);if(!(_t===v?Aa(Ze,Qe,3,P,it):_t))return!1}}return!0}function Mc(a){return!(!Zn(a)||function nh(a){return!!vt&&vt in a}(a))&&(pa(a)?gn:$a).test(fs(a))}function Lc(a){return"function"==typeof a?a:null==a?Dr:"object"==typeof a?tn(a)?hi(a[0],a[1]):Gi(a):cd(a)}function Tl(a){if(!ru(a))return yd(a);var u=[];for(var h in Bn(a))Ge.call(a,h)&&"constructor"!=h&&u.push(h);return u}function El(a,u){return a<u}function Rc(a,u){var h=-1,P=bi(a)?Be(a.length):[];return Pa(a,function(j,ee,fe){P[++h]=u(j,ee,fe)}),P}function Gi(a){var u=Fl(a);return 1==u.length&&u[0][2]?hf(u[0][0],u[0][1]):function(h){return h===a||Sl(h,a,u)}}function hi(a,u){return cr(a)&&df(u)?hf(Uo(a),u):function(h){var P=oc(h,a);return P===v&&P===u?ac(h,a):Aa(u,P,3)}}function Ts(a,u,h,P,j){a!==u&&ws(u,function(ee,fe){if(j||(j=new Co),Zn(ee))!function Bd(a,u,h,P,j,ee,fe){var _e=Bl(a,h),Me=Bl(u,h),Qe=fe.get(Me);if(Qe)Eu(a,h,Qe);else{var Ze=ee?ee(_e,Me,h+"",a,u,fe):v,it=Ze===v;if(it){var _t=tn(Me),Nt=!_t&&Ba(Me),Qt=!_t&&!Nt&&Ns(Me);Ze=Me,_t||Nt||Qt?tn(_e)?Ze=_e:Mr(_e)?Ze=Ai(_e):Nt?(it=!1,Ze=Wc(Me,!0)):Qt?(it=!1,Ze=Vu(Me,!0)):Ze=[]:cu(Me)||$o(Me)?(Ze=_e,$o(_e)?Ze=Kf(_e):(!Zn(_e)||pa(_e))&&(Ze=cf(Me))):it=!1}it&&(fe.set(Me,Ze),j(Ze,Me,P,ee,fe),fe.delete(Me)),Eu(a,h,Ze)}}(a,u,fe,h,Ts,P,j);else{var _e=P?P(Bl(a,fe),ee,fe+"",a,u,j):v;_e===v&&(_e=ee),Eu(a,fe,_e)}},ki)}function Nc(a,u){var h=a.length;if(h)return Eo(u+=u<0?h:0,h)?a[u]:v}function Dc(a,u,h){u=u.length?Vt(u,function(ee){return tn(ee)?function(fe){return Ia(fe,1===ee.length?ee[0]:ee)}:ee}):[Dr];var P=-1;return u=Vt(u,Pn(Kt())),function hn(Te,Ke){var Be=Te.length;for(Te.sort(Ke);Be--;)Te[Be]=Te[Be].value;return Te}(Rc(a,function(ee,fe,_e){return{criteria:Vt(u,function(Qe){return Qe(ee)}),index:++P,value:ee}}),function(ee,fe){return function Wd(a,u,h){for(var P=-1,j=a.criteria,ee=u.criteria,fe=j.length,_e=h.length;++P<fe;){var Me=Bu(j[P],ee[P]);if(Me)return P>=_e?Me:Me*("desc"==h[P]?-1:1)}return a.index-u.index}(ee,fe,h)})}function Pl(a,u,h){for(var P=-1,j=u.length,ee={};++P<j;){var fe=u[P],_e=Ia(a,fe);h(_e,fe)&&Es(ee,Oa(fe,a),_e)}return ee}function Ou(a,u,h,P){var j=P?Rt:Lr,ee=-1,fe=u.length,_e=a;for(a===u&&(u=Ai(u)),h&&(_e=Vt(a,Pn(h)));++ee<fe;)for(var Me=0,Qe=u[ee],Ze=h?h(Qe):Qe;(Me=j(_e,Ze,Me,P))>-1;)_e!==a&&Bo.call(_e,Me,1),Bo.call(a,Me,1);return a}function Il(a,u){for(var h=a?u.length:0,P=h-1;h--;){var j=u[h];if(h==P||j!==ee){var ee=j;Eo(j)?Bo.call(a,j,1):Ru(a,j)}}return a}function ku(a,u){return a+Ws(bc()*(u-a+1))}function Al(a,u){var h="";if(!a||u<1||u>Xn)return h;do{u%2&&(h+=a),(u=Ws(u/2))&&(a+=a)}while(u);return h}function yn(a,u){return jl(pf(a,u,Dr),a+"")}function jd(a){return pl(Ds(a))}function Ml(a,u){var h=Ds(a);return Gu(h,zi(u,0,h.length))}function Es(a,u,h,P){if(!Zn(a))return a;for(var j=-1,ee=(u=Oa(u,a)).length,fe=ee-1,_e=a;null!=_e&&++j<ee;){var Me=Uo(u[j]),Qe=h;if("__proto__"===Me||"constructor"===Me||"prototype"===Me)return a;if(j!=fe){var Ze=_e[Me];(Qe=P?P(Ze,Me,_e):v)===v&&(Qe=Zn(Ze)?Ze:Eo(u[j+1])?[]:{})}Ea(_e,Me,Qe),_e=_e[Me]}return a}var Bc=Jr?function(a,u){return Jr.set(a,u),a}:Dr,zd=xu?function(a,u){return xu(a,"toString",{configurable:!0,enumerable:!1,value:hu(u),writable:!0})}:Dr;function nn(a){return Gu(Ds(a))}function pi(a,u,h){var P=-1,j=a.length;u<0&&(u=-u>j?0:j+u),(h=h>j?j:h)<0&&(h+=j),j=u>h?0:h-u>>>0,u>>>=0;for(var ee=Be(j);++P<j;)ee[P]=a[P+u];return ee}function wo(a,u){var h;return Pa(a,function(P,j,ee){return!(h=u(P,j,ee))}),!!h}function Lu(a,u,h){var P=0,j=null==a?P:a.length;if("number"==typeof u&&u==u&&j<=2147483647){for(;P<j;){var ee=P+j>>>1,fe=a[ee];null!==fe&&!Yi(fe)&&(h?fe<=u:fe<u)?P=ee+1:j=ee}return j}return Ol(a,u,Dr,h)}function Ol(a,u,h,P){var j=0,ee=null==a?0:a.length;if(0===ee)return 0;for(var fe=(u=h(u))!=u,_e=null===u,Me=Yi(u),Qe=u===v;j<ee;){var Ze=Ws((j+ee)/2),it=h(a[Ze]),_t=it!==v,Nt=null===it,Qt=it==it,mn=Yi(it);if(fe)var Wt=P||Qt;else Wt=Qe?Qt&&(P||_t):_e?Qt&&_t&&(P||!Nt):Me?Qt&&_t&&!Nt&&(P||!mn):!Nt&&!mn&&(P?it<=u:it<u);Wt?j=Ze+1:ee=Ze}return di(ee,4294967294)}function kl(a,u){for(var h=-1,P=a.length,j=0,ee=[];++h<P;){var fe=a[h],_e=u?u(fe):fe;if(!h||!Io(_e,Me)){var Me=_e;ee[j++]=0===fe?0:fe}}return ee}function Hc(a){return"number"==typeof a?a:Yi(a)?NaN:+a}function Wi(a){if("string"==typeof a)return a;if(tn(a))return Vt(a,Wi)+"";if(Yi(a))return Cc?Cc.call(a):"";var u=a+"";return"0"==u&&1/a==-Ot?"-0":u}function Ma(a,u,h){var P=-1,j=sr,ee=a.length,fe=!0,_e=[],Me=_e;if(h)fe=!1,j=li;else if(ee>=200){var Qe=u?null:Jd(a);if(Qe)return ts(Qe);fe=!1,j=qa,Me=new os}else Me=u?[]:_e;e:for(;++P<ee;){var Ze=a[P],it=u?u(Ze):Ze;if(Ze=h||0!==Ze?Ze:0,fe&&it==it){for(var _t=Me.length;_t--;)if(Me[_t]===it)continue e;u&&Me.push(it),_e.push(Ze)}else j(Me,it,h)||(Me!==_e&&Me.push(it),_e.push(Ze))}return _e}function Ru(a,u){return null==(a=gf(a,u=Oa(u,a)))||delete a[Uo(so(u))]}function jc(a,u,h,P){return Es(a,u,h(Ia(a,u)),P)}function Nu(a,u,h,P){for(var j=a.length,ee=P?j:-1;(P?ee--:++ee<j)&&u(a[ee],ee,a););return h?pi(a,P?0:ee,P?ee+1:j):pi(a,P?ee+1:0,P?j:ee)}function zc(a,u){var h=a;return h instanceof An&&(h=h.value()),jr(u,function(P,j){return j.func.apply(j.thisArg,zt([P],j.args))},h)}function Ll(a,u,h){var P=a.length;if(P<2)return P?Ma(a[0]):[];for(var j=-1,ee=Be(P);++j<P;)for(var fe=a[j],_e=-1;++_e<P;)_e!=j&&(ee[j]=as(ee[j]||fe,a[_e],u,h));return Ma(Pr(ee,1),u,h)}function Uc(a,u,h){for(var P=-1,j=a.length,ee=u.length,fe={};++P<j;)h(fe,a[P],P<ee?u[P]:v);return fe}function ss(a){return Mr(a)?a:[]}function Du(a){return"function"==typeof a?a:Dr}function Oa(a,u){return tn(a)?a:cr(a,u)?[a]:mf(zn(a))}var Gc=yn;function So(a,u,h){var P=a.length;return h=h===v?P:h,!u&&h>=P?a:pi(a,u,h)}var Fu=pd||function(a){return l.clearTimeout(a)};function Wc(a,u){if(u)return a.slice();var h=a.length,P=hr?hr(h):new a.constructor(h);return a.copy(P),P}function Rl(a){var u=new a.constructor(a.byteLength);return new lr(u).set(new lr(a)),u}function Vu(a,u){var h=u?Rl(a.buffer):a.buffer;return new a.constructor(h,a.byteOffset,a.length)}function Bu(a,u){if(a!==u){var h=a!==v,P=null===a,j=a==a,ee=Yi(a),fe=u!==v,_e=null===u,Me=u==u,Qe=Yi(u);if(!_e&&!Qe&&!ee&&a>u||ee&&fe&&Me&&!_e&&!Qe||P&&fe&&Me||!h&&Me||!j)return 1;if(!P&&!ee&&!Qe&&a<u||Qe&&h&&j&&!P&&!ee||_e&&h&&j||!fe&&j||!Me)return-1}return 0}function Yc(a,u,h,P){for(var j=-1,ee=a.length,fe=h.length,_e=-1,Me=u.length,Qe=Wr(ee-fe,0),Ze=Be(Me+Qe),it=!P;++_e<Me;)Ze[_e]=u[_e];for(;++j<fe;)(it||j<ee)&&(Ze[h[j]]=a[j]);for(;Qe--;)Ze[_e++]=a[j++];return Ze}function Xc(a,u,h,P){for(var j=-1,ee=a.length,fe=-1,_e=h.length,Me=-1,Qe=u.length,Ze=Wr(ee-_e,0),it=Be(Ze+Qe),_t=!P;++j<Ze;)it[j]=a[j];for(var Nt=j;++Me<Qe;)it[Nt+Me]=u[Me];for(;++fe<_e;)(_t||j<ee)&&(it[Nt+h[fe]]=a[j++]);return it}function Ai(a,u){var h=-1,P=a.length;for(u||(u=Be(P));++h<P;)u[h]=a[h];return u}function jo(a,u,h,P){var j=!h;h||(h={});for(var ee=-1,fe=u.length;++ee<fe;){var _e=u[ee],Me=P?P(h[_e],a[_e],_e,h,a):v;Me===v&&(Me=a[_e]),j?Ho(h,_e,Me):Ea(h,_e,Me)}return h}function Hu(a,u){return function(h,P){var j=tn(h)?Xe:Od,ee=u?u():{};return j(h,a,Kt(P,2),ee)}}function Ps(a){return yn(function(u,h){var P=-1,j=h.length,ee=j>1?h[j-1]:v,fe=j>2?h[2]:v;for(ee=a.length>3&&"function"==typeof ee?(j--,ee):v,fe&&Ar(h[0],h[1],fe)&&(ee=j<3?v:ee,j=1),u=Bn(u);++P<j;){var _e=h[P];_e&&a(u,_e,P,ee)}return u})}function Kc(a,u){return function(h,P){if(null==h)return h;if(!bi(h))return a(h,P);for(var j=h.length,ee=u?j:-1,fe=Bn(h);(u?ee--:++ee<j)&&!1!==P(fe[ee],ee,fe););return h}}function Jc(a){return function(u,h,P){for(var j=-1,ee=Bn(u),fe=P(u),_e=fe.length;_e--;){var Me=fe[a?_e:++j];if(!1===h(ee[Me],Me,ee))break}return u}}function Qc(a){return function(u){var h=Rr(u=zn(u))?Sn(u):v,P=h?h[0]:u.charAt(0),j=h?So(h,1).join(""):u.slice(1);return P[a]()+j}}function Is(a){return function(u){return jr(ad(rg(u).replace(Za,"")),a,"")}}function eu(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=Js(a.prototype),P=a.apply(h,u);return Zn(P)?P:h}}function Zc(a){return function(u,h,P){var j=Bn(u);if(!bi(u)){var ee=Kt(h,3);u=Qr(u),h=function(_e){return ee(j[_e],_e,j)}}var fe=a(u,h,P);return fe>-1?j[ee?u[fe]:fe]:v}}function qc(a){return Ir(function(u){var h=u.length,P=h,j=_o.prototype.thru;for(a&&u.reverse();P--;){var ee=u[P];if("function"!=typeof ee)throw new Q(A);if(j&&!fe&&"wrapper"==La(ee))var fe=new _o([],!0)}for(P=fe?P:h;++P<h;){var _e=La(ee=u[P]),Me="wrapper"==_e?Os(ee):v;fe=Me&&Mi(Me[0])&&424==Me[1]&&!Me[4].length&&1==Me[9]?fe[La(Me[0])].apply(fe,Me[3]):1==ee.length&&Mi(ee)?fe[_e]():fe.thru(ee)}return function(){var Qe=arguments,Ze=Qe[0];if(fe&&1==Qe.length&&tn(Ze))return fe.plant(Ze).value();for(var it=0,_t=h?u[it].apply(this,Qe):Ze;++it<h;)_t=u[it].call(this,_t);return _t}})}function ju(a,u,h,P,j,ee,fe,_e,Me,Qe){var Ze=u&b,it=1&u,_t=2&u,Nt=24&u,Qt=512&u,mn=_t?v:eu(a);return function Wt(){for(var bn=arguments.length,kn=Be(bn),Xi=bn;Xi--;)kn[Xi]=arguments[Xi];if(Nt)var Ci=zo(Wt),Li=il(kn,Ci);if(P&&(kn=Yc(kn,P,j,Nt)),ee&&(kn=Xc(kn,ee,fe,Nt)),bn-=Li,Nt&&bn<Qe){var Or=vr(kn,Ci);return Nl(a,u,ju,Wt.placeholder,h,kn,Or,_e,Me,Qe-bn)}var Ao=it?h:this,Ko=_t?Ao[a]:a;return bn=kn.length,_e?kn=uh(kn,_e):Qt&&bn>1&&kn.reverse(),Ze&&Me<bn&&(kn.length=Me),this&&this!==l&&this instanceof Wt&&(Ko=mn||eu(Ko)),Ko.apply(Ao,kn)}}function ef(a,u){return function(h,P){return function Ac(a,u,h,P){return ao(a,function(j,ee,fe){u(P,h(j),ee,fe)}),P}(h,a,u(P),{})}}function zu(a,u){return function(h,P){var j;if(h===v&&P===v)return u;if(h!==v&&(j=h),P!==v){if(j===v)return P;"string"==typeof h||"string"==typeof P?(h=Wi(h),P=Wi(P)):(h=Hc(h),P=Hc(P)),j=a(h,P)}return j}}function ka(a){return Ir(function(u){return u=Vt(u,Pn(Kt())),yn(function(h){var P=this;return a(u,function(j){return Le(j,P,h)})})})}function tu(a,u){var h=(u=u===v?" ":Wi(u)).length;if(h<2)return h?Al(u,a):u;var P=Al(u,xo(a/Nn(u)));return Rr(u)?So(Sn(P),0,a).join(""):P.slice(0,a)}function nu(a){return function(u,h,P){return P&&"number"!=typeof P&&Ar(u,h,P)&&(h=P=v),u=Xo(u),h===v?(h=u,u=0):h=Xo(h),function Vc(a,u,h,P){for(var j=-1,ee=Wr(xo((u-a)/(h||1)),0),fe=Be(ee);ee--;)fe[P?ee:++j]=a,a+=h;return fe}(u,h,P=P===v?u<h?1:-1:Xo(P),a)}}function As(a){return function(u,h){return"string"==typeof u&&"string"==typeof h||(u=lo(u),h=lo(h)),a(u,h)}}function Nl(a,u,h,P,j,ee,fe,_e,Me,Qe){var Ze=8&u;u|=Ze?32:64,4&(u&=~(Ze?64:32))||(u&=-4);var mn=[a,u,j,Ze?ee:v,Ze?fe:v,Ze?v:ee,Ze?v:fe,_e,Me,Qe],Wt=h.apply(v,mn);return Mi(a)&&Hl(Wt,mn),Wt.placeholder=P,zl(Wt,a,u)}function Dl(a){var u=ur[a];return function(h,P){if(h=lo(h),(P=null==P?0:di(rn(P),292))&&al(h)){var j=(zn(h)+"e").split("e");return+((j=(zn(u(j[0]+"e"+(+j[1]+P)))+"e").split("e"))[0]+"e"+(+j[1]-P))}return u(h)}}var Jd=rs&&1/ts(new rs([,-0]))[1]==Ot?function(a){return new rs(a)}:hc;function tf(a){return function(u){var h=gi(u);return h==ln?Ii(u):h==We?function vu(Te){var Ke=-1,Be=Array(Te.size);return Te.forEach(function(wt){Be[++Ke]=[wt,wt]}),Be}(u):function aa(Te,Ke){return Vt(Ke,function(Be){return[Be,Te[Be]]})}(u,a(u))}}function To(a,u,h,P,j,ee,fe,_e){var Me=2&u;if(!Me&&"function"!=typeof a)throw new Q(A);var Qe=P?P.length:0;if(Qe||(u&=-97,P=j=v),fe=fe===v?fe:Wr(rn(fe),0),_e=_e===v?_e:rn(_e),Qe-=j?j.length:0,64&u){var Ze=P,it=j;P=j=v}var _t=Me?v:Os(a),Nt=[a,u,h,P,j,Ze,it,ee,fe,_e];if(_t&&function oh(a,u){var h=a[1],P=u[1],j=h|P;if(!(j<131||(P==b&&8==h||P==b&&256==h&&a[7].length<=u[8]||384==P&&u[7].length<=u[8]&&8==h)))return a;1&P&&(a[2]=u[2],j|=1&h?0:4);var _e=u[3];if(_e){var Me=a[3];a[3]=Me?Yc(Me,_e,u[4]):_e,a[4]=Me?vr(a[3],H):u[4]}(_e=u[5])&&(a[5]=(Me=a[5])?Xc(Me,_e,u[6]):_e,a[6]=Me?vr(a[5],H):u[6]),(_e=u[7])&&(a[7]=_e),P&b&&(a[8]=null==a[8]?u[8]:di(a[8],u[8])),null==a[9]&&(a[9]=u[9]),a[0]=u[0],a[1]=j}(Nt,_t),a=Nt[0],u=Nt[1],h=Nt[2],P=Nt[3],j=Nt[4],!(_e=Nt[9]=Nt[9]===v?Me?0:a.length:Wr(Nt[9]-Qe,0))&&24&u&&(u&=-25),u&&1!=u)Qt=8==u||16==u?function Xd(a,u,h){var P=eu(a);return function j(){for(var ee=arguments.length,fe=Be(ee),_e=ee,Me=zo(j);_e--;)fe[_e]=arguments[_e];var Qe=ee<3&&fe[0]!==Me&&fe[ee-1]!==Me?[]:vr(fe,Me);return(ee-=Qe.length)<h?Nl(a,u,ju,j.placeholder,v,fe,Qe,v,v,h-ee):Le(this&&this!==l&&this instanceof j?P:a,this,fe)}}(a,u,_e):32!=u&&33!=u||j.length?ju.apply(v,Nt):function Kd(a,u,h,P){var j=1&u,ee=eu(a);return function fe(){for(var _e=-1,Me=arguments.length,Qe=-1,Ze=P.length,it=Be(Ze+Me),_t=this&&this!==l&&this instanceof fe?ee:a;++Qe<Ze;)it[Qe]=P[Qe];for(;Me--;)it[Qe++]=arguments[++_e];return Le(_t,j?h:this,it)}}(a,u,h,P);else var Qt=function Yd(a,u,h){var P=1&u,j=eu(a);return function ee(){return(this&&this!==l&&this instanceof ee?j:a).apply(P?h:this,arguments)}}(a,u,h);return zl((_t?Bc:Hl)(Qt,Nt),a,u)}function nf(a,u,h,P){return a===v||Io(a,Ye[h])&&!Ge.call(P,h)?u:a}function rf(a,u,h,P,j,ee){return Zn(a)&&Zn(u)&&(ee.set(u,a),Ts(a,u,v,rf,ee),ee.delete(u)),a}function Qd(a){return cu(a)?v:a}function of(a,u,h,P,j,ee){var fe=1&h,_e=a.length,Me=u.length;if(_e!=Me&&!(fe&&Me>_e))return!1;var Qe=ee.get(a),Ze=ee.get(u);if(Qe&&Ze)return Qe==u&&Ze==a;var it=-1,_t=!0,Nt=2&h?new os:v;for(ee.set(a,u),ee.set(u,a);++it<_e;){var Qt=a[it],mn=u[it];if(P)var Wt=fe?P(mn,Qt,it,u,a,ee):P(Qt,mn,it,a,u,ee);if(Wt!==v){if(Wt)continue;_t=!1;break}if(Nt){if(!nr(u,function(bn,kn){if(!qa(Nt,kn)&&(Qt===bn||j(Qt,bn,h,P,ee)))return Nt.push(kn)})){_t=!1;break}}else if(Qt!==mn&&!j(Qt,mn,h,P,ee)){_t=!1;break}}return ee.delete(a),ee.delete(u),_t}function Ir(a){return jl(pf(a,v,Cf),a+"")}function us(a){return Ic(a,Qr,Vl)}function Ms(a){return Ic(a,ki,uf)}var Os=Jr?function(a){return Jr.get(a)}:hc;function La(a){for(var u=a.name+"",h=_s[u],P=Ge.call(_s,u)?h.length:0;P--;){var j=h[P],ee=j.func;if(null==ee||ee==a)return j.name}return u}function zo(a){return(Ge.call(Z,"placeholder")?Z:a).placeholder}function Kt(){var a=Z.iteratee||el;return a=a===el?Lc:a,arguments.length?a(arguments[0],arguments[1]):a}function Uu(a,u){var h=a.__data__;return function mr(a){var u=typeof a;return"string"==u||"number"==u||"symbol"==u||"boolean"==u?"__proto__"!==a:null===a}(u)?h["string"==typeof u?"string":"hash"]:h.map}function Fl(a){for(var u=Qr(a),h=u.length;h--;){var P=u[h],j=a[P];u[h]=[P,j,df(j)]}return u}function ls(a,u){var h=function Us(Te,Ke){return null==Te?v:Te[Ke]}(a,u);return Mc(h)?h:v}var Vl=_u?function(a){return null==a?[]:(a=Bn(a),Qn(_u(a),function(u){return Sa.call(a,u)}))}:pc,uf=_u?function(a){for(var u=[];a;)zt(u,Vl(a)),a=Gr(a);return u}:pc,gi=_i;function lf(a,u,h){for(var P=-1,j=(u=Oa(u,a)).length,ee=!1;++P<j;){var fe=Uo(u[P]);if(!(ee=null!=a&&h(a,fe)))break;a=a[fe]}return ee||++P!=j?ee:!!(j=null==a?0:a.length)&&Rs(j)&&Eo(fe,j)&&(tn(a)||$o(a))}function cf(a){return"function"!=typeof a.constructor||ru(a)?{}:Js(Gr(a))}function $i(a){return tn(a)||$o(a)||!!(fi&&a&&a[fi])}function Eo(a,u){var h=typeof a;return!!(u=null==u?Xn:u)&&("number"==h||"symbol"!=h&&ea.test(a))&&a>-1&&a%1==0&&a<u}function Ar(a,u,h){if(!Zn(h))return!1;var P=typeof u;return!!("number"==P?bi(h)&&Eo(u,h.length):"string"==P&&u in h)&&Io(h[u],a)}function cr(a,u){if(tn(a))return!1;var h=typeof a;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=a&&!Yi(a))||Oo.test(a)||!si.test(a)||null!=u&&a in Bn(u)}function Mi(a){var u=La(a),h=Z[u];if("function"!=typeof h||!(u in An.prototype))return!1;if(a===h)return!0;var P=Os(h);return!!P&&a===P[0]}(sl&&gi(new sl(new ArrayBuffer(1)))!=ar||$s&&gi(new $s)!=ln||ul&&gi(ul.resolve())!=re||rs&&gi(new rs)!=We||Ys&&gi(new Ys)!=dn)&&(gi=function(a){var u=_i(a),h=u==G?a.constructor:v,P=h?fs(h):"";if(P)switch(P){case ll:return ar;case Cd:return ln;case ua:return re;case Ks:return We;case wd:return dn}return u});var rh=Ie?pa:gc;function ru(a){var u=a&&a.constructor;return a===("function"==typeof u&&u.prototype||Ye)}function df(a){return a==a&&!Zn(a)}function hf(a,u){return function(h){return null!=h&&h[a]===u&&(u!==v||a in Bn(h))}}function pf(a,u,h){return u=Wr(u===v?a.length-1:u,0),function(){for(var P=arguments,j=-1,ee=Wr(P.length-u,0),fe=Be(ee);++j<ee;)fe[j]=P[u+j];j=-1;for(var _e=Be(u+1);++j<u;)_e[j]=P[j];return _e[u]=h(fe),Le(a,this,_e)}}function gf(a,u){return u.length<2?a:Ia(a,pi(u,0,-1))}function uh(a,u){for(var h=a.length,P=di(u.length,h),j=Ai(a);P--;){var ee=u[P];a[P]=Eo(ee,h)?j[ee]:v}return a}function Bl(a,u){if(("constructor"!==u||"function"!=typeof a[u])&&"__proto__"!=u)return a[u]}var Hl=vf(Bc),iu=vd||function(a,u){return l.setTimeout(a,u)},jl=vf(zd);function zl(a,u,h){var P=u+"";return jl(a,function cs(a,u){var h=u.length;if(!h)return a;var P=h-1;return u[P]=(h>1?"& ":"")+u[P],u=u.join(h>2?", ":" "),a.replace(Ua,"{\n/* [wrapped with "+u+"] */\n")}(P,function lh(a,u){return Tt(er,function(h){var P="_."+h[0];u&h[1]&&!sr(a,P)&&a.push(P)}),a.sort()}(function eh(a){var u=a.match(Ga);return u?u[1].split(Yr):[]}(P),h)))}function vf(a){var u=0,h=0;return function(){var P=xd(),j=16-(P-h);if(h=P,j>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(v,arguments)}}function Gu(a,u){var h=-1,P=a.length,j=P-1;for(u=u===v?P:u;++h<u;){var ee=ku(h,j),fe=a[ee];a[ee]=a[h],a[h]=fe}return a.length=u,a}var mf=function ih(a){var u=Ju(a,function(P){return 500===h.size&&h.clear(),P}),h=u.cache;return u}(function(a){var u=[];return 46===a.charCodeAt(0)&&u.push(""),a.replace(ko,function(h,P,j,ee){u.push(j?ee.replace(va,"$1"):P||h)}),u});function Uo(a){if("string"==typeof a||Yi(a))return a;var u=a+"";return"0"==u&&1/a==-Ot?"-0":u}function fs(a){if(null!=a){try{return Je.call(a)}catch(u){}try{return a+""}catch(u){}}return""}function yf(a){if(a instanceof An)return a.clone();var u=new _o(a.__wrapped__,a.__chain__);return u.__actions__=Ai(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}var Ra=yn(function(a,u){return Mr(a)?as(a,Pr(u,1,Mr,!0)):[]}),hh=yn(function(a,u){var h=so(u);return Mr(h)&&(h=v),Mr(a)?as(a,Pr(u,1,Mr,!0),Kt(h,2)):[]}),xf=yn(function(a,u){var h=so(u);return Mr(h)&&(h=v),Mr(a)?as(a,Pr(u,1,Mr,!0),v,h):[]});function _f(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:rn(h);return j<0&&(j=Wr(P+j,0)),vo(a,Kt(u,3),j)}function bf(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=P-1;return h!==v&&(j=rn(h),j=h<0?Wr(P+j,0):di(j,P-1)),vo(a,Kt(u,3),j,!0)}function Cf(a){return null!=a&&a.length?Pr(a,1):[]}function Sf(a){return a&&a.length?a[0]:v}var bh=yn(function(a){var u=Vt(a,ss);return u.length&&u[0]===a[0]?bl(u):[]}),Ch=yn(function(a){var u=so(a),h=Vt(a,ss);return u===so(h)?u=v:h.pop(),h.length&&h[0]===a[0]?bl(h,Kt(u,2)):[]}),wh=yn(function(a){var u=so(a),h=Vt(a,ss);return(u="function"==typeof u?u:v)&&h.pop(),h.length&&h[0]===a[0]?bl(h,v,u):[]});function so(a){var u=null==a?0:a.length;return u?a[u-1]:v}var Ph=yn(Tf);function Tf(a,u){return a&&a.length&&u&&u.length?Ou(a,u):a}var Ef=Ir(function(a,u){var h=null==a?0:a.length,P=Qs(a,u);return Il(a,Vt(u,function(j){return Eo(j,h)?+j:j}).sort(Bu)),P});function Gl(a){return null==a?a:bd.call(a)}var Gh=yn(function(a){return Ma(Pr(a,1,Mr,!0))}),Wh=yn(function(a){var u=so(a);return Mr(u)&&(u=v),Ma(Pr(a,1,Mr,!0),Kt(u,2))}),$h=yn(function(a){var u=so(a);return u="function"==typeof u?u:v,Ma(Pr(a,1,Mr,!0),v,u)});function Wl(a){if(!a||!a.length)return[];var u=0;return a=Qn(a,function(h){if(Mr(h))return u=Wr(h.length,u),!0}),Hi(u,function(h){return Vt(a,ci(h))})}function If(a,u){if(!a||!a.length)return[];var h=Wl(a);return null==u?h:Vt(h,function(P){return Le(u,v,P)})}var Jh=yn(function(a,u){return Mr(a)?as(a,u):[]}),Qh=yn(function(a){return Ll(Qn(a,Mr))}),Zh=yn(function(a){var u=so(a);return Mr(u)&&(u=v),Ll(Qn(a,Mr),Kt(u,2))}),qh=yn(function(a){var u=so(a);return u="function"==typeof u?u:v,Ll(Qn(a,Mr),v,u)}),lt=yn(Wl),Yl=yn(function(a){var u=a.length,h=u>1?a[u-1]:v;return h="function"==typeof h?(a.pop(),h):v,If(a,h)});function Re(a){var u=Z(a);return u.__chain__=!0,u}function Oi(a,u){return u(a)}var ni=Ir(function(a){var u=a.length,h=u?a[0]:0,P=this.__wrapped__,j=function(ee){return Qs(ee,a)};return!(u>1||this.__actions__.length)&&P instanceof An&&Eo(h)?((P=P.slice(h,+h+(u?1:0))).__actions__.push({func:Oi,args:[j],thisArg:v}),new _o(P,this.__chain__).thru(function(ee){return u&&!ee.length&&ee.push(v),ee})):this.thru(j)}),Kl=Hu(function(a,u,h){Ge.call(a,h)?++a[h]:Ho(a,h,1)}),ds=Zc(_f),ir=Zc(bf);function au(a,u){return(tn(a)?Tt:Pa)(a,Kt(u,3))}function Of(a,u){return(tn(a)?on:ml)(a,Kt(u,3))}var tp=Hu(function(a,u,h){Ge.call(a,h)?a[h].push(u):Ho(a,h,[u])}),zg=yn(function(a,u,h){var P=-1,j="function"==typeof u,ee=bi(a)?Be(a.length):[];return Pa(a,function(fe){ee[++P]=j?Le(u,fe,h):qs(fe,u,h)}),ee}),$u=Hu(function(a,u,h){Ho(a,h,u)});function su(a,u){return(tn(a)?Vt:Rc)(a,Kt(u,3))}var np=Hu(function(a,u,h){a[h?0:1].push(u)},function(){return[[],[]]}),Wo=yn(function(a,u){if(null==a)return[];var h=u.length;return h>1&&Ar(a,u[0],u[1])?u=[]:h>2&&Ar(u[0],u[1],u[2])&&(u=[u[0]]),Dc(a,Pr(u,1),[])}),ha=gd||function(){return l.Date.now()};function hs(a,u,h){return u=h?v:u,To(a,b,v,v,v,v,u=a&&null==u?a.length:u)}function lu(a,u){var h;if("function"!=typeof u)throw new Q(A);return a=rn(a),function(){return--a>0&&(h=u.apply(this,arguments)),a<=1&&(u=v),h}}var Ls=yn(function(a,u,h){var P=1;if(h.length){var j=vr(h,zo(Ls));P|=32}return To(a,P,u,h,j)}),Rf=yn(function(a,u,h){var P=3;if(h.length){var j=vr(h,zo(Rf));P|=32}return To(u,P,a,h,j)});function Ku(a,u,h){var P,j,ee,fe,_e,Me,Qe=0,Ze=!1,it=!1,_t=!0;if("function"!=typeof a)throw new Q(A);function Nt(Or){var Ao=P,Ko=j;return P=j=v,Qe=Or,fe=a.apply(Ko,Ao)}function Qt(Or){return Qe=Or,_e=iu(bn,u),Ze?Nt(Or):fe}function Wt(Or){var Ao=Or-Me;return Me===v||Ao>=u||Ao<0||it&&Or-Qe>=ee}function bn(){var Or=ha();if(Wt(Or))return kn(Or);_e=iu(bn,function mn(Or){var vc=u-(Or-Me);return it?di(vc,ee-(Or-Qe)):vc}(Or))}function kn(Or){return _e=v,_t&&P?Nt(Or):(P=j=v,fe)}function Li(){var Or=ha(),Ao=Wt(Or);if(P=arguments,j=this,Me=Or,Ao){if(_e===v)return Qt(Me);if(it)return Fu(_e),_e=iu(bn,u),Nt(Me)}return _e===v&&(_e=iu(bn,u)),fe}return u=lo(u)||0,Zn(h)&&(Ze=!!h.leading,ee=(it="maxWait"in h)?Wr(lo(h.maxWait)||0,u):ee,_t="trailing"in h?!!h.trailing:_t),Li.cancel=function Xi(){_e!==v&&Fu(_e),Qe=0,P=Me=j=_e=v},Li.flush=function Ci(){return _e===v?fe:kn(ha())},Li}var ip=yn(function(a,u){return Tc(a,1,u)}),op=yn(function(a,u,h){return Tc(a,lo(u)||0,h)});function Ju(a,u){if("function"!=typeof a||null!=u&&"function"!=typeof u)throw new Q(A);var h=function(){var P=arguments,j=u?u.apply(this,P):P[0],ee=h.cache;if(ee.has(j))return ee.get(j);var fe=a.apply(this,P);return h.cache=ee.set(j,fe)||ee,fe};return h.cache=new(Ju.Cache||bo),h}function Qu(a){if("function"!=typeof a)throw new Q(A);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}Ju.Cache=bo;var up=Gc(function(a,u){var h=(u=1==u.length&&tn(u[0])?Vt(u[0],Pn(Kt())):Vt(Pr(u,1),Pn(Kt()))).length;return yn(function(P){for(var j=-1,ee=di(P.length,h);++j<ee;)P[j]=u[j].call(this,P[j]);return Le(a,this,P)})}),Zl=yn(function(a,u){var h=vr(u,zo(Zl));return To(a,32,v,u,h)}),Ff=yn(function(a,u){var h=vr(u,zo(Ff));return To(a,64,v,u,h)}),lp=Ir(function(a,u){return To(a,256,v,v,v,u)});function Io(a,u){return a===u||a!=a&&u!=u}var yp=As(xl),ql=As(function(a,u){return a>=u}),$o=Cl(function(){return arguments}())?Cl:function(a){return yr(a)&&Ge.call(a,"callee")&&!Sa.call(a,"callee")},tn=Be.isArray,jf=X?Pn(X):function Nd(a){return yr(a)&&_i(a)==cn};function bi(a){return null!=a&&Rs(a.length)&&!pa(a)}function Mr(a){return yr(a)&&bi(a)}var Ba=_c||gc,_p=ue?Pn(ue):function Mu(a){return yr(a)&&_i(a)==Dt};function ec(a){if(!yr(a))return!1;var u=_i(a);return u==Mt||"[object DOMException]"==u||"string"==typeof a.message&&"string"==typeof a.name&&!cu(a)}function pa(a){if(!Zn(a))return!1;var u=_i(a);return u==or||u==Ni||"[object AsyncFunction]"==u||"[object Proxy]"==u}function Uf(a){return"number"==typeof a&&a==rn(a)}function Rs(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Xn}function Zn(a){var u=typeof a;return null!=a&&("object"==u||"function"==u)}function yr(a){return null!=a&&"object"==typeof a}var Gf=le?Pn(le):function Dd(a){return yr(a)&&gi(a)==ln};function Yf(a){return"number"==typeof a||yr(a)&&_i(a)==Zt}function cu(a){if(!yr(a)||_i(a)!=G)return!1;var u=Gr(a);if(null===u)return!0;var h=Ge.call(u,"constructor")&&u.constructor;return"function"==typeof h&&h instanceof h&&Je.call(h)==jt}var tc=Ce?Pn(Ce):function Oc(a){return yr(a)&&_i(a)==$e},Yo=He?Pn(He):function Fd(a){return yr(a)&&gi(a)==We};function Zu(a){return"string"==typeof a||!tn(a)&&yr(a)&&_i(a)==pt}function Yi(a){return"symbol"==typeof a||yr(a)&&_i(a)==kt}var Ns=rt?Pn(rt):function kc(a){return yr(a)&&Rs(a.length)&&!!Hn[_i(a)]},kp=As(El),Lp=As(function(a,u){return a<=u});function fu(a){if(!a)return[];if(bi(a))return Zu(a)?Sn(a):Ai(a);if(Gs&&a[Gs])return function Do(Te){for(var Ke,Be=[];!(Ke=Te.next()).done;)Be.push(Ke.value);return Be}(a[Gs]());var u=gi(a);return(u==ln?Ii:u==We?ts:Ds)(a)}function Xo(a){return a?(a=lo(a))===Ot||a===-Ot?17976931348623157e292*(a<0?-1:1):a==a?a:0:0===a?a:0}function rn(a){var u=Xo(a),h=u%1;return u==u?h?u-h:u:0}function Xf(a){return a?zi(rn(a),0,_r):0}function lo(a){if("number"==typeof a)return a;if(Yi(a))return NaN;if(Zn(a)){var u="function"==typeof a.valueOf?a.valueOf():a;a=Zn(u)?u+"":u}if("string"!=typeof a)return 0===a?a:+a;a=Rn(a);var h=Wa.test(a);return h||Vn.test(a)?pe(a.slice(2),h?2:8):Ki.test(a)?NaN:+a}function Kf(a){return jo(a,ki(a))}function zn(a){return null==a?"":Wi(a)}var Ug=Ps(function(a,u){if(ru(u)||bi(u))jo(u,Qr(u),a);else for(var h in u)Ge.call(u,h)&&Ea(a,h,u[h])}),nc=Ps(function(a,u){jo(u,ki(u),a)}),ps=Ps(function(a,u,h,P){jo(u,ki(u),a,P)}),Gg=Ps(function(a,u,h,P){jo(u,Qr(u),a,P)}),rc=Ir(Qs),Np=yn(function(a,u){a=Bn(a);var h=-1,P=u.length,j=P>2?u[2]:v;for(j&&Ar(u[0],u[1],j)&&(P=1);++h<P;)for(var ee=u[h],fe=ki(ee),_e=-1,Me=fe.length;++_e<Me;){var Qe=fe[_e],Ze=a[Qe];(Ze===v||Io(Ze,Ye[Qe])&&!Ge.call(a,Qe))&&(a[Qe]=ee[Qe])}return a}),Dp=yn(function(a){return a.push(v,rf),Le(qf,v,a)});function oc(a,u,h){var P=null==a?v:Ia(a,u);return P===v?h:P}function ac(a,u){return null!=a&&lf(a,u,Ld)}var du=ef(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=Bt.call(u)),a[u]=h},hu(Dr)),sc=ef(function(a,u,h){null!=u&&"function"!=typeof u.toString&&(u=Bt.call(u)),Ge.call(a,u)?a[u].push(h):a[u]=[h]},Kt),zp=yn(qs);function Qr(a){return bi(a)?hl(a):Tl(a)}function ki(a){return bi(a)?hl(a,!0):function Vd(a){if(!Zn(a))return function ah(a){var u=[];if(null!=a)for(var h in Bn(a))u.push(h);return u}(a);var u=ru(a),h=[];for(var P in a)"constructor"==P&&(u||!Ge.call(a,P))||h.push(P);return h}(a)}var uc=Ps(function(a,u,h){Ts(a,u,h)}),qf=Ps(function(a,u,h,P){Ts(a,u,h,P)}),Wp=Ir(function(a,u){var h={};if(null==a)return h;var P=!1;u=Vt(u,function(ee){return ee=Oa(ee,a),P||(P=ee.length>1),ee}),jo(a,Ms(a),h),P&&(h=Ui(h,7,Qd));for(var j=u.length;j--;)Ru(h,u[j]);return h}),Yp=Ir(function(a,u){return null==a?{}:function Hd(a,u){return Pl(a,u,function(h,P){return ac(a,P)})}(a,u)});function ed(a,u){if(null==a)return{};var h=Vt(Ms(a),function(P){return[P]});return u=Kt(u),Pl(a,h,function(P,j){return u(P,j[0])})}var td=tf(Qr),nd=tf(ki);function Ds(a){return null==a?[]:pn(a,Qr(a))}var rd=Is(function(a,u,h){return u=u.toLowerCase(),a+(h?ng(u):u)});function ng(a){return fc(zn(a).toLowerCase())}function rg(a){return(a=zn(a))&&a.replace(js,es).replace(Ca,"")}var Xg=Is(function(a,u,h){return a+(h?"-":"")+u.toLowerCase()}),id=Is(function(a,u,h){return a+(h?" ":"")+u.toLowerCase()}),Kg=Qc("toLowerCase"),qg=Is(function(a,u,h){return a+(h?"_":"")+u.toLowerCase()}),tv=Is(function(a,u,h){return a+(h?" ":"")+fc(u)}),lg=Is(function(a,u,h){return a+(h?" ":"")+u.toUpperCase()}),fc=Qc("toUpperCase");function ad(a,u,h){return a=zn(a),(u=h?v:u)===v?function Er(Te){return io.test(Te)}(a)?function yo(Te){return Te.match(No)||[]}(a):function Pi(Te){return Te.match(ga)||[]}(a):a.match(u)||[]}var sd=yn(function(a,u){try{return Le(a,v,u)}catch(h){return ec(h)?h:new en(h)}}),cg=Ir(function(a,u){return Tt(u,function(h){h=Uo(h),Ho(a,h,Ls(a[h],a))}),a});function hu(a){return function(){return a}}var Vs=qc(),hg=qc(!0);function Dr(a){return a}function el(a){return Lc("function"==typeof a?a:Ui(a,1))}var vg=yn(function(a,u){return function(h){return qs(h,a,u)}}),mg=yn(function(a,u){return function(h){return qs(a,h,u)}});function dc(a,u,h){var P=Qr(u),j=Zs(u,P);null==h&&(!Zn(u)||!j.length&&P.length)&&(h=u,u=a,a=this,j=Zs(u,Qr(u)));var ee=!(Zn(h)&&"chain"in h&&!h.chain),fe=pa(a);return Tt(j,function(_e){var Me=u[_e];a[_e]=Me,fe&&(a.prototype[_e]=function(){var Qe=this.__chain__;if(ee||Qe){var Ze=a(this.__wrapped__),it=Ze.__actions__=Ai(this.__actions__);return it.push({func:Me,args:arguments,thisArg:a}),Ze.__chain__=Qe,Ze}return Me.apply(a,zt([this.value()],arguments))})}),a}function hc(){}var ld=ka(Vt),Bs=ka(Ft),yg=ka(nr);function cd(a){return cr(a)?ci(Uo(a)):function Fc(a){return function(u){return Ia(u,a)}}(a)}var _g=nu(),bg=nu(!0);function pc(){return[]}function gc(){return!1}var Tg=zu(function(a,u){return a+u},0),Eg=Dl("ceil"),Pg=zu(function(a,u){return a/u},1),Ig=Dl("floor"),Og=zu(function(a,u){return a*u},1),cv=Dl("round"),hd=zu(function(a,u){return a-u},0);return Z.after=function Jt(a,u){if("function"!=typeof u)throw new Q(A);return a=rn(a),function(){if(--a<1)return u.apply(this,arguments)}},Z.ary=hs,Z.assign=Ug,Z.assignIn=nc,Z.assignInWith=ps,Z.assignWith=Gg,Z.at=rc,Z.before=lu,Z.bind=Ls,Z.bindAll=cg,Z.bindKey=Rf,Z.castArray=function Vf(){if(!arguments.length)return[];var a=arguments[0];return tn(a)?a:[a]},Z.chain=Re,Z.chunk=function ch(a,u,h){u=(h?Ar(a,u,h):u===v)?1:Wr(rn(u),0);var P=null==a?0:a.length;if(!P||u<1)return[];for(var j=0,ee=0,fe=Be(xo(P/u));j<P;)fe[ee++]=pi(a,j,j+=u);return fe},Z.compact=function fh(a){for(var u=-1,h=null==a?0:a.length,P=0,j=[];++u<h;){var ee=a[u];ee&&(j[P++]=ee)}return j},Z.concat=function dh(){var a=arguments.length;if(!a)return[];for(var u=Be(a-1),h=arguments[0],P=a;P--;)u[P-1]=arguments[P];return zt(tn(h)?Ai(h):[h],Pr(u,1))},Z.cond=function fg(a){var u=null==a?0:a.length,h=Kt();return a=u?Vt(a,function(P){if("function"!=typeof P[1])throw new Q(A);return[h(P[0]),P[1]]}):[],yn(function(P){for(var j=-1;++j<u;){var ee=a[j];if(Le(ee[0],this,P))return Le(ee[1],this,P)}})},Z.conforms=function dg(a){return function Sc(a){var u=Qr(a);return function(h){return vl(h,a,u)}}(Ui(a,1))},Z.constant=hu,Z.countBy=Kl,Z.create=function Nr(a,u){var h=Js(a);return null==u?h:Iu(h,u)},Z.curry=function Nf(a,u,h){var P=To(a,8,v,v,v,v,v,u=h?v:u);return P.placeholder=Nf.placeholder,P},Z.curryRight=function Df(a,u,h){var P=To(a,16,v,v,v,v,v,u=h?v:u);return P.placeholder=Df.placeholder,P},Z.debounce=Ku,Z.defaults=Np,Z.defaultsDeep=Dp,Z.defer=ip,Z.delay=op,Z.difference=Ra,Z.differenceBy=hh,Z.differenceWith=xf,Z.drop=function Ul(a,u,h){var P=null==a?0:a.length;return P?pi(a,(u=h||u===v?1:rn(u))<0?0:u,P):[]},Z.dropRight=function ph(a,u,h){var P=null==a?0:a.length;return P?pi(a,0,(u=P-(u=h||u===v?1:rn(u)))<0?0:u):[]},Z.dropRightWhile=function gh(a,u){return a&&a.length?Nu(a,Kt(u,3),!0,!0):[]},Z.dropWhile=function vh(a,u){return a&&a.length?Nu(a,Kt(u,3),!0):[]},Z.fill=function mh(a,u,h,P){var j=null==a?0:a.length;return j?(h&&"number"!=typeof h&&Ar(a,u,h)&&(h=0,P=j),function Ec(a,u,h,P){var j=a.length;for((h=rn(h))<0&&(h=-h>j?0:j+h),(P=P===v||P>j?j:rn(P))<0&&(P+=j),P=h>P?0:Xf(P);h<P;)a[h++]=u;return a}(a,u,h,P)):[]},Z.filter=function Va(a,u){return(tn(a)?Qn:Pc)(a,Kt(u,3))},Z.flatMap=function ks(a,u){return Pr(su(a,u),1)},Z.flatMapDeep=function Mf(a,u){return Pr(su(a,u),Ot)},Z.flatMapDepth=function ep(a,u,h){return h=h===v?1:rn(h),Pr(su(a,u),h)},Z.flatten=Cf,Z.flattenDeep=function yh(a){return null!=a&&a.length?Pr(a,Ot):[]},Z.flattenDepth=function wf(a,u){return null!=a&&a.length?Pr(a,u=u===v?1:rn(u)):[]},Z.flip=function ap(a){return To(a,512)},Z.flow=Vs,Z.flowRight=hg,Z.fromPairs=function Po(a){for(var u=-1,h=null==a?0:a.length,P={};++u<h;){var j=a[u];P[j[0]]=j[1]}return P},Z.functions=function Qf(a){return null==a?[]:Zs(a,Qr(a))},Z.functionsIn=function jp(a){return null==a?[]:Zs(a,ki(a))},Z.groupBy=tp,Z.initial=function _h(a){return null!=a&&a.length?pi(a,0,-1):[]},Z.intersection=bh,Z.intersectionBy=Ch,Z.intersectionWith=wh,Z.invert=du,Z.invertBy=sc,Z.invokeMap=zg,Z.iteratee=el,Z.keyBy=$u,Z.keys=Qr,Z.keysIn=ki,Z.map=su,Z.mapKeys=function Up(a,u){var h={};return u=Kt(u,3),ao(a,function(P,j,ee){Ho(h,u(P,j,ee),P)}),h},Z.mapValues=function Gp(a,u){var h={};return u=Kt(u,3),ao(a,function(P,j,ee){Ho(h,j,u(P,j,ee))}),h},Z.matches=function pg(a){return Gi(Ui(a,1))},Z.matchesProperty=function gg(a,u){return hi(a,Ui(u,1))},Z.memoize=Ju,Z.merge=uc,Z.mergeWith=qf,Z.method=vg,Z.methodOf=mg,Z.mixin=dc,Z.negate=Qu,Z.nthArg=function ri(a){return a=rn(a),yn(function(u){return Nc(u,a)})},Z.omit=Wp,Z.omitBy=function $p(a,u){return ed(a,Qu(Kt(u)))},Z.once=function sp(a){return lu(2,a)},Z.orderBy=function Lf(a,u,h,P){return null==a?[]:(tn(u)||(u=null==u?[]:[u]),tn(h=P?v:h)||(h=null==h?[]:[h]),Dc(a,u,h))},Z.over=ld,Z.overArgs=up,Z.overEvery=Bs,Z.overSome=yg,Z.partial=Zl,Z.partialRight=Ff,Z.partition=np,Z.pick=Yp,Z.pickBy=ed,Z.property=cd,Z.propertyOf=function xg(a){return function(u){return null==a?v:Ia(a,u)}},Z.pull=Ph,Z.pullAll=Tf,Z.pullAllBy=function Ih(a,u,h){return a&&a.length&&u&&u.length?Ou(a,u,Kt(h,2)):a},Z.pullAllWith=function Ah(a,u,h){return a&&a.length&&u&&u.length?Ou(a,u,v,h):a},Z.pullAt=Ef,Z.range=_g,Z.rangeRight=bg,Z.rearg=lp,Z.reject=function da(a,u){return(tn(a)?Qn:Pc)(a,Qu(Kt(u,3)))},Z.remove=function Mh(a,u){var h=[];if(!a||!a.length)return h;var P=-1,j=[],ee=a.length;for(u=Kt(u,3);++P<ee;){var fe=a[P];u(fe,P,a)&&(h.push(fe),j.push(P))}return Il(a,j),h},Z.rest=function cp(a,u){if("function"!=typeof a)throw new Q(A);return yn(a,u=u===v?u:rn(u))},Z.reverse=Gl,Z.sampleSize=function Xu(a,u,h){return u=(h?Ar(a,u,h):u===v)?1:rn(u),(tn(a)?Ad:Ml)(a,u)},Z.set=function Kp(a,u,h){return null==a?a:Es(a,u,h)},Z.setWith=function Jp(a,u,h,P){return P="function"==typeof P?P:v,null==a?a:Es(a,u,h,P)},Z.shuffle=function Jl(a){return(tn(a)?Md:nn)(a)},Z.slice=function Pf(a,u,h){var P=null==a?0:a.length;return P?(h&&"number"!=typeof h&&Ar(a,u,h)?(u=0,h=P):(u=null==u?0:rn(u),h=h===v?P:rn(h)),pi(a,u,h)):[]},Z.sortBy=Wo,Z.sortedUniq=function Fh(a){return a&&a.length?kl(a):[]},Z.sortedUniqBy=function Vh(a,u){return a&&a.length?kl(a,Kt(u,2)):[]},Z.split=function ev(a,u,h){return h&&"number"!=typeof h&&Ar(a,u,h)&&(u=h=v),(h=h===v?_r:h>>>0)?(a=zn(a))&&("string"==typeof u||null!=u&&!tc(u))&&!(u=Wi(u))&&Rr(a)?So(Sn(a),0,h):a.split(u,h):[]},Z.spread=function fp(a,u){if("function"!=typeof a)throw new Q(A);return u=null==u?0:Wr(rn(u),0),yn(function(h){var P=h[u],j=So(h,0,u);return P&&zt(j,P),Le(a,this,j)})},Z.tail=function Bh(a){var u=null==a?0:a.length;return u?pi(a,1,u):[]},Z.take=function Hh(a,u,h){return a&&a.length?pi(a,0,(u=h||u===v?1:rn(u))<0?0:u):[]},Z.takeRight=function jh(a,u,h){var P=null==a?0:a.length;return P?pi(a,(u=P-(u=h||u===v?1:rn(u)))<0?0:u,P):[]},Z.takeRightWhile=function zh(a,u){return a&&a.length?Nu(a,Kt(u,3),!1,!0):[]},Z.takeWhile=function Uh(a,u){return a&&a.length?Nu(a,Kt(u,3)):[]},Z.tap=function Na(a,u){return u(a),a},Z.throttle=function dp(a,u,h){var P=!0,j=!0;if("function"!=typeof a)throw new Q(A);return Zn(h)&&(P="leading"in h?!!h.leading:P,j="trailing"in h?!!h.trailing:j),Ku(a,u,{leading:P,maxWait:u,trailing:j})},Z.thru=Oi,Z.toArray=fu,Z.toPairs=td,Z.toPairsIn=nd,Z.toPath=function wg(a){return tn(a)?Vt(a,Uo):Yi(a)?[a]:Ai(mf(zn(a)))},Z.toPlainObject=Kf,Z.transform=function Qp(a,u,h){var P=tn(a),j=P||Ba(a)||Ns(a);if(u=Kt(u,4),null==h){var ee=a&&a.constructor;h=j?P?new ee:[]:Zn(a)&&pa(ee)?Js(Gr(a)):{}}return(j?Tt:ao)(a,function(fe,_e,Me){return u(h,fe,_e,Me)}),h},Z.unary=function hp(a){return hs(a,1)},Z.union=Gh,Z.unionBy=Wh,Z.unionWith=$h,Z.uniq=function Yh(a){return a&&a.length?Ma(a):[]},Z.uniqBy=function Xh(a,u){return a&&a.length?Ma(a,Kt(u,2)):[]},Z.uniqWith=function Kh(a,u){return u="function"==typeof u?u:v,a&&a.length?Ma(a,v,u):[]},Z.unset=function Zp(a,u){return null==a||Ru(a,u)},Z.unzip=Wl,Z.unzipWith=If,Z.update=function lc(a,u,h){return null==a?a:jc(a,u,Du(h))},Z.updateWith=function qp(a,u,h,P){return P="function"==typeof P?P:v,null==a?a:jc(a,u,Du(h),P)},Z.values=Ds,Z.valuesIn=function eg(a){return null==a?[]:pn(a,ki(a))},Z.without=Jh,Z.words=ad,Z.wrap=function pp(a,u){return Zl(Du(u),a)},Z.xor=Qh,Z.xorBy=Zh,Z.xorWith=qh,Z.zip=lt,Z.zipObject=function $l(a,u){return Uc(a||[],u||[],Ea)},Z.zipObjectDeep=function Wu(a,u){return Uc(a||[],u||[],Es)},Z.zipWith=Yl,Z.entries=td,Z.entriesIn=nd,Z.extend=nc,Z.extendWith=ps,dc(Z,Z),Z.add=Tg,Z.attempt=sd,Z.camelCase=rd,Z.capitalize=ng,Z.ceil=Eg,Z.clamp=function tg(a,u,h){return h===v&&(h=u,u=v),h!==v&&(h=(h=lo(h))==h?h:0),u!==v&&(u=(u=lo(u))==u?u:0),zi(lo(a),u,h)},Z.clone=function gp(a){return Ui(a,4)},Z.cloneDeep=function mp(a){return Ui(a,5)},Z.cloneDeepWith=function Bf(a,u){return Ui(a,5,u="function"==typeof u?u:v)},Z.cloneWith=function vp(a,u){return Ui(a,4,u="function"==typeof u?u:v)},Z.conformsTo=function Hf(a,u){return null==u||vl(a,u,Qr(u))},Z.deburr=rg,Z.defaultTo=function ud(a,u){return null==a||a!=a?u:a},Z.divide=Pg,Z.endsWith=function $g(a,u,h){a=zn(a),u=Wi(u);var P=a.length,j=h=h===v?P:zi(rn(h),0,P);return(h-=u.length)>=0&&a.slice(h,j)==u},Z.eq=Io,Z.escape=function Yg(a){return(a=zn(a))&&mi.test(a)?a.replace(Qo,ol):a},Z.escapeRegExp=function ig(a){return(a=zn(a))&&Cr.test(a)?a.replace(fo,"\\$&"):a},Z.every=function uo(a,u,h){var P=tn(a)?Ft:kd;return h&&Ar(a,u,h)&&(u=v),P(a,Kt(u,3))},Z.find=ds,Z.findIndex=_f,Z.findKey=function Fp(a,u){return ia(a,Kt(u,3),ao)},Z.findLast=ir,Z.findLastIndex=bf,Z.findLastKey=function Vp(a,u){return ia(a,Kt(u,3),yl)},Z.floor=Ig,Z.forEach=au,Z.forEachRight=Of,Z.forIn=function Bp(a,u){return null==a?a:ws(a,Kt(u,3),ki)},Z.forInRight=function Jf(a,u){return null==a?a:Ss(a,Kt(u,3),ki)},Z.forOwn=function ic(a,u){return a&&ao(a,Kt(u,3))},Z.forOwnRight=function Hp(a,u){return a&&yl(a,Kt(u,3))},Z.get=oc,Z.gt=yp,Z.gte=ql,Z.has=function Zf(a,u){return null!=a&&lf(a,u,_l)},Z.hasIn=ac,Z.head=Sf,Z.identity=Dr,Z.includes=function kf(a,u,h,P){a=bi(a)?a:Ds(a),h=h&&!P?rn(h):0;var j=a.length;return h<0&&(h=Wr(j+h,0)),Zu(a)?h<=j&&a.indexOf(u,h)>-1:!!j&&Lr(a,u,h)>-1},Z.indexOf=function xh(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=null==h?0:rn(h);return j<0&&(j=Wr(P+j,0)),Lr(a,u,j)},Z.inRange=function cc(a,u,h){return u=Xo(u),h===v?(h=u,u=0):h=Xo(h),function Rd(a,u,h){return a>=di(u,h)&&a<Wr(u,h)}(a=lo(a),u,h)},Z.invoke=zp,Z.isArguments=$o,Z.isArray=tn,Z.isArrayBuffer=jf,Z.isArrayLike=bi,Z.isArrayLikeObject=Mr,Z.isBoolean=function xp(a){return!0===a||!1===a||yr(a)&&_i(a)==xt},Z.isBuffer=Ba,Z.isDate=_p,Z.isElement=function bp(a){return yr(a)&&1===a.nodeType&&!cu(a)},Z.isEmpty=function zf(a){if(null==a)return!0;if(bi(a)&&(tn(a)||"string"==typeof a||"function"==typeof a.splice||Ba(a)||Ns(a)||$o(a)))return!a.length;var u=gi(a);if(u==ln||u==We)return!a.size;if(ru(a))return!Tl(a).length;for(var h in a)if(Ge.call(a,h))return!1;return!0},Z.isEqual=function Cp(a,u){return Aa(a,u)},Z.isEqualWith=function wp(a,u,h){var P=(h="function"==typeof h?h:v)?h(a,u):v;return P===v?Aa(a,u,v,h):!!P},Z.isError=ec,Z.isFinite=function Sp(a){return"number"==typeof a&&al(a)},Z.isFunction=pa,Z.isInteger=Uf,Z.isLength=Rs,Z.isMap=Gf,Z.isMatch=function Wf(a,u){return a===u||Sl(a,u,Fl(u))},Z.isMatchWith=function $f(a,u,h){return h="function"==typeof h?h:v,Sl(a,u,Fl(u),h)},Z.isNaN=function Tp(a){return Yf(a)&&a!=+a},Z.isNative=function Ep(a){if(rh(a))throw new en("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mc(a)},Z.isNil=function Ip(a){return null==a},Z.isNull=function Pp(a){return null===a},Z.isNumber=Yf,Z.isObject=Zn,Z.isObjectLike=yr,Z.isPlainObject=cu,Z.isRegExp=tc,Z.isSafeInteger=function Ha(a){return Uf(a)&&a>=-Xn&&a<=Xn},Z.isSet=Yo,Z.isString=Zu,Z.isSymbol=Yi,Z.isTypedArray=Ns,Z.isUndefined=function Ap(a){return a===v},Z.isWeakMap=function Mp(a){return yr(a)&&gi(a)==dn},Z.isWeakSet=function Op(a){return yr(a)&&"[object WeakSet]"==_i(a)},Z.join=function Sh(a,u){return null==a?"":md.call(a,u)},Z.kebabCase=Xg,Z.last=so,Z.lastIndexOf=function Th(a,u,h){var P=null==a?0:a.length;if(!P)return-1;var j=P;return h!==v&&(j=(j=rn(h))<0?Wr(P+j,0):di(j,P-1)),u==u?function Gn(Te,Ke,Be){for(var wt=Be+1;wt--;)if(Te[wt]===Ke)return wt;return wt}(a,u,j):vo(a,rr,j,!0)},Z.lowerCase=id,Z.lowerFirst=Kg,Z.lt=kp,Z.lte=Lp,Z.max=function Ag(a){return a&&a.length?Au(a,Dr,xl):v},Z.maxBy=function dd(a,u){return a&&a.length?Au(a,Kt(u,2),xl):v},Z.mean=function sv(a){return Bi(a,Dr)},Z.meanBy=function uv(a,u){return Bi(a,Kt(u,2))},Z.min=function lv(a){return a&&a.length?Au(a,Dr,El):v},Z.minBy=function Mg(a,u){return a&&a.length?Au(a,Kt(u,2),El):v},Z.stubArray=pc,Z.stubFalse=gc,Z.stubObject=function fd(){return{}},Z.stubString=function pu(){return""},Z.stubTrue=function ja(){return!0},Z.multiply=Og,Z.nth=function Eh(a,u){return a&&a.length?Nc(a,rn(u)):v},Z.noConflict=function tl(){return l._===this&&(l._=ct),this},Z.noop=hc,Z.now=ha,Z.pad=function od(a,u,h){a=zn(a);var P=(u=rn(u))?Nn(a):0;if(!u||P>=u)return a;var j=(u-P)/2;return tu(Ws(j),h)+a+tu(xo(j),h)},Z.padEnd=function og(a,u,h){a=zn(a);var P=(u=rn(u))?Nn(a):0;return u&&P<u?a+tu(u-P,h):a},Z.padStart=function Jg(a,u,h){a=zn(a);var P=(u=rn(u))?Nn(a):0;return u&&P<u?tu(u-P,h)+a:a},Z.parseInt=function Qg(a,u,h){return h||null==u?u=0:u&&(u=+u),_d(zn(a).replace(qo,""),u||0)},Z.random=function Wg(a,u,h){if(h&&"boolean"!=typeof h&&Ar(a,u,h)&&(u=h=v),h===v&&("boolean"==typeof u?(h=u,u=v):"boolean"==typeof a&&(h=a,a=v)),a===v&&u===v?(a=0,u=1):(a=Xo(a),u===v?(u=a,a=0):u=Xo(u)),a>u){var P=a;a=u,u=P}if(h||a%1||u%1){var j=bc();return di(a+j*(u-a+ae("1e-"+((j+"").length-1))),u)}return ku(a,u)},Z.reduce=function Yu(a,u,h){var P=tn(a)?jr:oa,j=arguments.length<3;return P(a,Kt(u,4),h,j,Pa)},Z.reduceRight=function rp(a,u,h){var P=tn(a)?En:oa,j=arguments.length<3;return P(a,Kt(u,4),h,j,ml)},Z.repeat=function Zg(a,u,h){return u=(h?Ar(a,u,h):u===v)?1:rn(u),Al(zn(a),u)},Z.replace=function qu(){var a=arguments,u=zn(a[0]);return a.length<3?u:u.replace(a[1],a[2])},Z.result=function Xp(a,u,h){var P=-1,j=(u=Oa(u,a)).length;for(j||(j=1,a=v);++P<j;){var ee=null==a?v:a[Uo(u[P])];ee===v&&(P=j,ee=h),a=pa(ee)?ee.call(a):ee}return a},Z.round=cv,Z.runInContext=Te,Z.sample=function uu(a){return(tn(a)?pl:jd)(a)},Z.size=function Ql(a){if(null==a)return 0;if(bi(a))return Zu(a)?Nn(a):a.length;var u=gi(a);return u==ln||u==We?a.size:Tl(a).length},Z.snakeCase=qg,Z.some=function vi(a,u,h){var P=tn(a)?nr:wo;return h&&Ar(a,u,h)&&(u=v),P(a,Kt(u,3))},Z.sortedIndex=function Oh(a,u){return Lu(a,u)},Z.sortedIndexBy=function kh(a,u,h){return Ol(a,u,Kt(h,2))},Z.sortedIndexOf=function Lh(a,u){var h=null==a?0:a.length;if(h){var P=Lu(a,u);if(P<h&&Io(a[P],u))return P}return-1},Z.sortedLastIndex=function Rh(a,u){return Lu(a,u,!0)},Z.sortedLastIndexBy=function Nh(a,u,h){return Ol(a,u,Kt(h,2),!0)},Z.sortedLastIndexOf=function Dh(a,u){if(null!=a&&a.length){var P=Lu(a,u,!0)-1;if(Io(a[P],u))return P}return-1},Z.startCase=tv,Z.startsWith=function nv(a,u,h){return a=zn(a),h=null==h?0:zi(rn(h),0,a.length),u=Wi(u),a.slice(h,h+u.length)==u},Z.subtract=hd,Z.sum=function fv(a){return a&&a.length?gr(a,Dr):0},Z.sumBy=function dv(a,u){return a&&a.length?gr(a,Kt(u,2)):0},Z.template=function ag(a,u,h){var P=Z.templateSettings;h&&Ar(a,u,h)&&(u=v),a=zn(a),u=ps({},u,P,nf);var _e,Me,j=ps({},u.imports,P.imports,nf),ee=Qr(j),fe=pn(j,ee),Qe=0,Ze=u.interpolate||Ji,it="__p += '",_t=sa((u.escape||Ji).source+"|"+Ze.source+"|"+(Ze===yt?gt:Ji).source+"|"+(u.evaluate||Ji).source+"|$","g"),Nt="//# sourceURL="+(Ge.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wa+"]")+"\n";a.replace(_t,function(Wt,bn,kn,Xi,Ci,Li){return kn||(kn=Xi),it+=a.slice(Qe,Li).replace(po,xc),bn&&(_e=!0,it+="' +\n__e("+bn+") +\n'"),Ci&&(Me=!0,it+="';\n"+Ci+";\n__p += '"),kn&&(it+="' +\n((__t = ("+kn+")) == null ? '' : __t) +\n'"),Qe=Li+Wt.length,Wt}),it+="';\n";var Qt=Ge.call(u,"variable")&&u.variable;if(Qt){if(ho.test(Qt))throw new en("Invalid `variable` option passed into `_.template`")}else it="with (obj) {\n"+it+"\n}\n";it=(Me?it.replace(dr,""):it).replace(Jo,"$1").replace(za,"$1;"),it="function("+(Qt||"obj")+") {\n"+(Qt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Me?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+it+"return __p\n}";var mn=sd(function(){return In(ee,Nt+"return "+it).apply(v,fe)});if(mn.source=it,ec(mn))throw mn;return mn},Z.times=function Cg(a,u){if((a=rn(a))<1||a>Xn)return[];var h=_r,P=di(a,_r);u=Kt(u),a-=_r;for(var j=Hi(P,u);++h<a;)u(h);return j},Z.toFinite=Xo,Z.toInteger=rn,Z.toLength=Xf,Z.toLower=function rv(a){return zn(a).toLowerCase()},Z.toNumber=lo,Z.toSafeInteger=function Rp(a){return a?zi(rn(a),-Xn,Xn):0===a?a:0},Z.toString=zn,Z.toUpper=function iv(a){return zn(a).toUpperCase()},Z.trim=function ov(a,u,h){if((a=zn(a))&&(h||u===v))return Rn(a);if(!a||!(u=Wi(u)))return a;var P=Sn(a),j=Sn(u);return So(P,gu(P,j),rl(P,j)+1).join("")},Z.trimEnd=function av(a,u,h){if((a=zn(a))&&(h||u===v))return a.slice(0,jn(a)+1);if(!a||!(u=Wi(u)))return a;var P=Sn(a);return So(P,0,rl(P,Sn(u))+1).join("")},Z.trimStart=function Fs(a,u,h){if((a=zn(a))&&(h||u===v))return a.replace(qo,"");if(!a||!(u=Wi(u)))return a;var P=Sn(a);return So(P,gu(P,Sn(u))).join("")},Z.truncate=function sg(a,u){var h=30,P="...";if(Zn(u)){var j="separator"in u?u.separator:j;h="length"in u?rn(u.length):h,P="omission"in u?Wi(u.omission):P}var ee=(a=zn(a)).length;if(Rr(a)){var fe=Sn(a);ee=fe.length}if(h>=ee)return a;var _e=h-Nn(P);if(_e<1)return P;var Me=fe?So(fe,0,_e).join(""):a.slice(0,_e);if(j===v)return Me+P;if(fe&&(_e+=Me.length-_e),tc(j)){if(a.slice(_e).search(j)){var Qe,Ze=Me;for(j.global||(j=sa(j.source,zn(vs.exec(j))+"g")),j.lastIndex=0;Qe=j.exec(Ze);)var it=Qe.index;Me=Me.slice(0,it===v?_e:it)}}else if(a.indexOf(Wi(j),_e)!=_e){var _t=Me.lastIndexOf(j);_t>-1&&(Me=Me.slice(0,_t))}return Me+P},Z.unescape=function ug(a){return(a=zn(a))&&me.test(a)?a.replace(Mo,Fo):a},Z.uniqueId=function Sg(a){var u=++dt;return zn(a)+u},Z.upperCase=lg,Z.upperFirst=fc,Z.each=au,Z.eachRight=Of,Z.first=Sf,dc(Z,function(){var a={};return ao(Z,function(u,h){Ge.call(Z.prototype,h)||(a[h]=u)}),a}(),{chain:!1}),Z.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Z[a].placeholder=Z}),Tt(["drop","take"],function(a,u){An.prototype[a]=function(h){h=h===v?1:Wr(rn(h),0);var P=this.__filtered__&&!u?new An(this):this.clone();return P.__filtered__?P.__takeCount__=di(h,P.__takeCount__):P.__views__.push({size:di(h,_r),type:a+(P.__dir__<0?"Right":"")}),P},An.prototype[a+"Right"]=function(h){return this.reverse()[a](h).reverse()}}),Tt(["filter","map","takeWhile"],function(a,u){var h=u+1,P=1==h||3==h;An.prototype[a]=function(j){var ee=this.clone();return ee.__iteratees__.push({iteratee:Kt(j,3),type:h}),ee.__filtered__=ee.__filtered__||P,ee}}),Tt(["head","last"],function(a,u){var h="take"+(u?"Right":"");An.prototype[a]=function(){return this[h](1).value()[0]}}),Tt(["initial","tail"],function(a,u){var h="drop"+(u?"":"Right");An.prototype[a]=function(){return this.__filtered__?new An(this):this[h](1)}}),An.prototype.compact=function(){return this.filter(Dr)},An.prototype.find=function(a){return this.filter(a).head()},An.prototype.findLast=function(a){return this.reverse().find(a)},An.prototype.invokeMap=yn(function(a,u){return"function"==typeof a?new An(this):this.map(function(h){return qs(h,a,u)})}),An.prototype.reject=function(a){return this.filter(Qu(Kt(a)))},An.prototype.slice=function(a,u){a=rn(a);var h=this;return h.__filtered__&&(a>0||u<0)?new An(h):(a<0?h=h.takeRight(-a):a&&(h=h.drop(a)),u!==v&&(h=(u=rn(u))<0?h.dropRight(-u):h.take(u-a)),h)},An.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},An.prototype.toArray=function(){return this.take(_r)},ao(An.prototype,function(a,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),P=/^(?:head|last)$/.test(u),j=Z[P?"take"+("last"==u?"Right":""):u],ee=P||/^find/.test(u);!j||(Z.prototype[u]=function(){var fe=this.__wrapped__,_e=P?[1]:arguments,Me=fe instanceof An,Qe=_e[0],Ze=Me||tn(fe),it=function(bn){var kn=j.apply(Z,zt([bn],_e));return P&&_t?kn[0]:kn};Ze&&h&&"function"==typeof Qe&&1!=Qe.length&&(Me=Ze=!1);var _t=this.__chain__,Nt=!!this.__actions__.length,Qt=ee&&!_t,mn=Me&&!Nt;if(!ee&&Ze){fe=mn?fe:new An(this);var Wt=a.apply(fe,_e);return Wt.__actions__.push({func:Oi,args:[it],thisArg:v}),new _o(Wt,_t)}return Qt&&mn?a.apply(this,_e):(Wt=this.thru(it),Qt?P?Wt.value()[0]:Wt.value():Wt)})}),Tt(["pop","push","shift","sort","splice","unshift"],function(a){var u=de[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",P=/^(?:pop|shift)$/.test(a);Z.prototype[a]=function(){var j=arguments;if(P&&!this.__chain__){var ee=this.value();return u.apply(tn(ee)?ee:[],j)}return this[h](function(fe){return u.apply(tn(fe)?fe:[],j)})}}),ao(An.prototype,function(a,u){var h=Z[u];if(h){var P=h.name+"";Ge.call(_s,P)||(_s[P]=[]),_s[P].push({name:u,func:h})}}),_s[ju(v,2).name]=[{name:"wrapper",func:v}],An.prototype.clone=function Ng(){var a=new An(this.__wrapped__);return a.__actions__=Ai(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ai(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ai(this.__views__),a},An.prototype.reverse=function Dg(){if(this.__filtered__){var a=new An(this);a.__dir__=-1,a.__filtered__=!0}else(a=this.clone()).__dir__*=-1;return a},An.prototype.value=function Fg(){var a=this.__wrapped__.value(),u=this.__dir__,h=tn(a),P=u<0,j=h?a.length:0,ee=function qd(a,u,h){for(var P=-1,j=h.length;++P<j;){var ee=h[P],fe=ee.size;switch(ee.type){case"drop":a+=fe;break;case"dropRight":u-=fe;break;case"take":u=di(u,a+fe);break;case"takeRight":a=Wr(a,u-fe)}}return{start:a,end:u}}(0,j,this.__views__),fe=ee.start,_e=ee.end,Me=_e-fe,Qe=P?_e:fe-1,Ze=this.__iteratees__,it=Ze.length,_t=0,Nt=di(Me,this.__takeCount__);if(!h||!P&&j==Me&&Nt==Me)return zc(a,this.__actions__);var Qt=[];e:for(;Me--&&_t<Nt;){for(var mn=-1,Wt=a[Qe+=u];++mn<it;){var bn=Ze[mn],Xi=bn.type,Ci=(0,bn.iteratee)(Wt);if(2==Xi)Wt=Ci;else if(!Ci){if(1==Xi)continue e;break e}}Qt[_t++]=Wt}return Qt},Z.prototype.at=ni,Z.prototype.chain=function Da(){return Re(this)},Z.prototype.commit=function ou(){return new _o(this.value(),this.__chain__)},Z.prototype.next=function ft(){this.__values__===v&&(this.__values__=fu(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?v:this.__values__[this.__index__++]}},Z.prototype.plant=function Fa(a){for(var u,h=this;h instanceof fl;){var P=yf(h);P.__index__=0,P.__values__=v,u?j.__wrapped__=P:u=P;var j=P;h=h.__wrapped__}return j.__wrapped__=a,u},Z.prototype.reverse=function Go(){var a=this.__wrapped__;if(a instanceof An){var u=a;return this.__actions__.length&&(u=new An(this)),(u=u.reverse()).__actions__.push({func:Oi,args:[Gl],thisArg:v}),new _o(u,this.__chain__)}return this.thru(Gl)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function Af(){return zc(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,Gs&&(Z.prototype[Gs]=function Xl(){return this}),Z}();l._=ji,(g=function(){return ji}.call(W,f,W,E))!==v&&(E.exports=g)}.call(this)},19984:(E,W,f)=>{var g=f(84633),v=f(96517),S=f(92046),T=f(21503);E.exports=function x(A,O){return(T(A)?g:S)(A,v(O,3))}},10203:(E,W,f)=>{var g=f(85683),v=f(45184),S=f(96517);E.exports=function T(x,A){var O={};return A=S(A,3),v(x,function(M,B,H){g(O,B,A(M,B,H))}),O}},18176:(E,W,f)=>{var g=f(67308),v=f(31100),S=f(32608);E.exports=function T(x){return x&&x.length?g(x,S,v):void 0}},30535:(E,W,f)=>{var g=f(99850);function S(T,x){if("function"!=typeof T||null!=x&&"function"!=typeof x)throw new TypeError("Expected a function");var A=function(){var O=arguments,M=x?x.apply(this,O):O[0],B=A.cache;if(B.has(M))return B.get(M);var H=T.apply(this,O);return A.cache=B.set(M,H)||B,H};return A.cache=new(S.Cache||g),A}S.Cache=g,E.exports=S},80567:(E,W,f)=>{var g=f(73842),S=f(84944)(function(T,x,A){g(T,x,A)});E.exports=S},29439:(E,W,f)=>{var g=f(67308),v=f(99069),S=f(32608);E.exports=function T(x){return x&&x.length?g(x,S,v):void 0}},29525:(E,W,f)=>{var g=f(67308),v=f(96517),S=f(99069);E.exports=function T(x,A){return x&&x.length?g(x,v(A,2),S):void 0}},12552:E=>{E.exports=function W(){}},31710:(E,W,f)=>{var g=f(12119);E.exports=function(){return g.Date.now()}},16372:(E,W,f)=>{var g=f(83021),S=f(3975)(function(T,x){return null==T?{}:g(T,x)});E.exports=S},87495:(E,W,f)=>{var g=f(11847),v=f(39222),S=f(45352),T=f(68533);E.exports=function x(A){return S(A)?g(T(A)):v(A)}},90361:(E,W,f)=>{var v=f(97509)();E.exports=v},81337:(E,W,f)=>{var g=f(8745),v=f(43132),S=f(96517),T=f(13570),x=f(21503);E.exports=function A(O,M,B){var H=x(O)?g:T,L=arguments.length<3;return H(O,S(M,4),B,L,v)}},55637:(E,W,f)=>{var g=f(81172),v=f(28794),S=f(56507),T=f(30248),x=f(52315);E.exports=function M(B){if(null==B)return 0;if(S(B))return T(B)?x(B):B.length;var H=v(B);return"[object Map]"==H||"[object Set]"==H?B.size:g(B).length}},12906:(E,W,f)=>{var g=f(50686),v=f(6119),S=f(23269),T=f(93342),x=S(function(A,O){if(null==A)return[];var M=O.length;return M>1&&T(A,O[0],O[1])?O=[]:M>2&&T(O[0],O[1],O[2])&&(O=[O[0]]),v(A,g(O,1),[])});E.exports=x},49975:E=>{E.exports=function W(){return[]}},63580:E=>{E.exports=function W(){return!1}},12232:(E,W,f)=>{var g=f(51467),v=1/0;E.exports=function T(x){return x?(x=g(x))===v||x===-v?17976931348623157e292*(x<0?-1:1):x==x?x:0:0===x?x:0}},44401:(E,W,f)=>{var g=f(12232);E.exports=function v(S){var T=g(S),x=T%1;return T==T?x?T-x:T:0}},51467:(E,W,f)=>{var g=f(83348),v=f(25940),S=f(44129),x=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,O=/^0o[0-7]+$/i,M=parseInt;E.exports=function B(H){if("number"==typeof H)return H;if(S(H))return NaN;if(v(H)){var L="function"==typeof H.valueOf?H.valueOf():H;H=v(L)?L+"":L}if("string"!=typeof H)return 0===H?H:+H;H=g(H);var Y=A.test(H);return Y||O.test(H)?M(H.slice(2),Y?2:8):x.test(H)?NaN:+H}},8067:(E,W,f)=>{var g=f(31989),v=f(16555);E.exports=function S(T){return g(T,v(T))}},73943:(E,W,f)=>{var g=f(93935);E.exports=function v(S){return null==S?"":g(S)}},89416:(E,W,f)=>{var g=f(96837),v=f(78858),S=f(45184),T=f(96517),x=f(29519),A=f(21503),O=f(80891),M=f(75946),B=f(25940),H=f(48159);E.exports=function L(Y,ne,ce){var i=A(Y),se=i||O(Y)||H(Y);if(ne=T(ne,4),null==ce){var ge=Y&&Y.constructor;ce=se?i?new ge:[]:B(Y)&&M(ge)?v(x(Y)):{}}return(se?g:S)(Y,function(he,q,ye){return ne(ce,he,q,ye)}),ce}},68921:(E,W,f)=>{var g=f(50686),v=f(23269),S=f(80707),T=f(21330),x=v(function(A){return S(g(A,1,T,!0))});E.exports=x},51541:(E,W,f)=>{var g=f(73943),v=0;E.exports=function S(T){var x=++v;return g(T)+x}},90377:(E,W,f)=>{var g=f(19179),v=f(118);E.exports=function S(T){return null==T?[]:g(T,v(T))}},21617:(E,W,f)=>{var g=f(89719),v=f(38645);E.exports=function S(T,x){return v(T||[],x||[],g)}},29610:function(E){E.exports=function(){var W="1.13.2",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},g=Array.prototype,v=Object.prototype,S="undefined"!=typeof Symbol?Symbol.prototype:null,T=g.push,x=g.slice,A=v.toString,O=v.hasOwnProperty,M="undefined"!=typeof ArrayBuffer,B="undefined"!=typeof DataView,H=Array.isArray,L=Object.keys,Y=Object.create,ne=M&&ArrayBuffer.isView,ce=isNaN,i=isFinite,se=!{toString:null}.propertyIsEnumerable("toString"),ge=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],he=Math.pow(2,53)-1;function q(F,J){return J=null==J?F.length-1:+J,function(){for(var ae=Math.max(arguments.length-J,0),pe=Array(ae),Oe=0;Oe<ae;Oe++)pe[Oe]=arguments[Oe+J];switch(J){case 0:return F.call(this,pe);case 1:return F.call(this,arguments[0],pe);case 2:return F.call(this,arguments[0],arguments[1],pe)}var we=Array(J+1);for(Oe=0;Oe<J;Oe++)we[Oe]=arguments[Oe];return we[J]=pe,F.apply(this,we)}}function ye(F){var J=typeof F;return"function"===J||"object"===J&&!!F}function Ee(F){return void 0===F}function Fe(F){return!0===F||!1===F||"[object Boolean]"===A.call(F)}function b(F){var J="[object "+F+"]";return function(ae){return A.call(ae)===J}}var je=b("String"),tt=b("Number"),et=b("Date"),ot=b("RegExp"),ut=b("Error"),mt=b("Symbol"),At=b("ArrayBuffer"),Xt=b("Function");"object"!=typeof Int8Array&&"function"!=typeof(f.document&&f.document.childNodes)&&(Xt=function(F){return"function"==typeof F||!1});var Ot=Xt,Xn=b("Object"),Fr=B&&Xn(new DataView(new ArrayBuffer(8))),ii="undefined"!=typeof Map&&Xn(new Map),_r=b("DataView"),fr=Fr?function(F){return null!=F&&Ot(F.getInt8)&&At(F.buffer)}:_r,Vr=H||b("Array");function er(F,J){return null!=F&&O.call(F,J)}var Ue=b("Arguments");!function(){Ue(arguments)||(Ue=function(F){return er(F,"callee")})}();var qe=Ue;function st(F){return tt(F)&&ce(F)}function xt(F){return function(){return F}}function Dt(F){return function(J){var ae=F(J);return"number"==typeof ae&&ae>=0&&ae<=he}}function sn(F){return function(J){return null==J?void 0:J[F]}}var Mt=sn("byteLength"),or=Dt(Mt),Ni=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,ln=M?function(F){return ne?ne(F)&&!fr(F):or(F)&&Ni.test(A.call(F))}:xt(!1),Zt=sn("length");function R(F,J){J=function(l){for(var d={},y=l.length,C=0;C<y;++C)d[l[C]]=!0;return{contains:function(N){return!0===d[N]},push:function(N){return d[N]=!0,l.push(N)}}}(J);var ae=ge.length,pe=F.constructor,Oe=Ot(pe)&&pe.prototype||v,we="constructor";for(er(F,we)&&!J.contains(we)&&J.push(we);ae--;)(we=ge[ae])in F&&F[we]!==Oe[we]&&!J.contains(we)&&J.push(we)}function G(F){if(!ye(F))return[];if(L)return L(F);var J=[];for(var ae in F)er(F,ae)&&J.push(ae);return se&&R(F,J),J}function re(F,J){var ae=G(J),pe=ae.length;if(null==F)return!pe;for(var Oe=Object(F),we=0;we<pe;we++){var l=ae[we];if(J[l]!==Oe[l]||!(l in Oe))return!1}return!0}function xe(F){return F instanceof xe?F:this instanceof xe?void(this._wrapped=F):new xe(F)}function $e(F){return new Uint8Array(F.buffer||F,F.byteOffset||0,Mt(F))}xe.VERSION=W,xe.prototype.valueOf=xe.prototype.toJSON=xe.prototype.value=function(){return this._wrapped},xe.prototype.toString=function(){return String(this._wrapped)};var We="[object DataView]";function pt(F,J,ae,pe){if(F===J)return 0!==F||1/F==1/J;if(null==F||null==J)return!1;if(F!=F)return J!=J;var Oe=typeof F;return("function"===Oe||"object"===Oe||"object"==typeof J)&&function we(l,d,y,C){l instanceof xe&&(l=l._wrapped),d instanceof xe&&(d=d._wrapped);var N=A.call(l);if(N!==A.call(d))return!1;if(Fr&&"[object Object]"==N&&fr(l)){if(!fr(d))return!1;N=We}switch(N){case"[object RegExp]":case"[object String]":return""+l==""+d;case"[object Number]":return+l!=+l?+d!=+d:0==+l?1/+l==1/d:+l==+d;case"[object Date]":case"[object Boolean]":return+l==+d;case"[object Symbol]":return S.valueOf.call(l)===S.valueOf.call(d);case"[object ArrayBuffer]":case We:return we($e(l),$e(d),y,C)}var D="[object Array]"===N;if(!D&&ln(l)){if(Mt(l)!==Mt(d))return!1;if(l.buffer===d.buffer&&l.byteOffset===d.byteOffset)return!0;D=!0}if(!D){if("object"!=typeof l||"object"!=typeof d)return!1;var X=l.constructor,ue=d.constructor;if(X!==ue&&!(Ot(X)&&X instanceof X&&Ot(ue)&&ue instanceof ue)&&"constructor"in l&&"constructor"in d)return!1}C=C||[];for(var le=(y=y||[]).length;le--;)if(y[le]===l)return C[le]===d;if(y.push(l),C.push(d),D){if((le=l.length)!==d.length)return!1;for(;le--;)if(!pt(l[le],d[le],y,C))return!1}else{var Ce,He=G(l);if(le=He.length,G(d).length!==le)return!1;for(;le--;)if(!er(d,Ce=He[le])||!pt(l[Ce],d[Ce],y,C))return!1}return y.pop(),C.pop(),!0}(F,J,ae,pe)}function kt(F){if(!ye(F))return[];var J=[];for(var ae in F)J.push(ae);return se&&R(F,J),J}function Lt(F){var J=Zt(F);return function(ae){if(null==ae)return!1;var pe=kt(ae);if(Zt(pe))return!1;for(var Oe=0;Oe<J;Oe++)if(!Ot(ae[F[Oe]]))return!1;return F!==oi||!Ot(ae[dn])}}var dn="forEach",cn=["clear","delete"],ar=["get","has","set"],Jn=cn.concat(dn,ar),oi=cn.concat(ar),Fn=["add"].concat(cn,dn,"has"),Et=ii?Lt(Jn):b("Map"),Un=ii?Lt(oi):b("WeakMap"),tr=ii?Lt(Fn):b("Set"),br=b("WeakSet");function ai(F){for(var J=G(F),ae=J.length,pe=Array(ae),Oe=0;Oe<ae;Oe++)pe[Oe]=F[J[Oe]];return pe}function pr(F){for(var J={},ae=G(F),pe=0,Oe=ae.length;pe<Oe;pe++)J[F[ae[pe]]]=ae[pe];return J}function dr(F){var J=[];for(var ae in F)Ot(F[ae])&&J.push(ae);return J.sort()}function Jo(F,J){return function(ae){var pe=arguments.length;if(J&&(ae=Object(ae)),pe<2||null==ae)return ae;for(var Oe=1;Oe<pe;Oe++)for(var we=arguments[Oe],l=F(we),d=l.length,y=0;y<d;y++){var C=l[y];J&&void 0!==ae[C]||(ae[C]=we[C])}return ae}}var za=Jo(kt),Mo=Jo(G),Qo=Jo(kt,!0);function me(F){if(!ye(F))return{};if(Y)return Y(F);var J=function(){};J.prototype=F;var ae=new J;return J.prototype=null,ae}function mi(F){return Vr(F)?F:[F]}function co(F){return xe.toPath(F)}function Zo(F,J){for(var ae=J.length,pe=0;pe<ae;pe++){if(null==F)return;F=F[J[pe]]}return ae?F:void 0}function yt(F,J,ae){var pe=Zo(F,co(J));return Ee(pe)?ae:pe}function si(F){return F}function Oo(F){return F=Mo({},F),function(J){return re(J,F)}}function ko(F){return F=co(F),function(J){return Zo(J,F)}}function fo(F,J,ae){if(void 0===J)return F;switch(null==ae?3:ae){case 1:return function(pe){return F.call(J,pe)};case 3:return function(pe,Oe,we){return F.call(J,pe,Oe,we)};case 4:return function(pe,Oe,we,l){return F.call(J,pe,Oe,we,l)}}return function(){return F.apply(J,arguments)}}function Cr(F,J,ae){return null==F?si:Ot(F)?fo(F,J,ae):ye(F)&&!Vr(F)?Oo(F):ko(F)}function qo(F,J){return Cr(F,J,1/0)}function Br(F,J,ae){return xe.iteratee!==qo?xe.iteratee(F,J):Cr(F,J,ae)}function Ua(){}function Ga(F,J){return null==J&&(J=F,F=0),F+Math.floor(Math.random()*(J-F+1))}xe.toPath=mi,xe.iteratee=qo;var Yr=Date.now||function(){return(new Date).getTime()};function ga(F){var J=function(we){return F[we]},ae="(?:"+G(F).join("|")+")",pe=RegExp(ae),Oe=RegExp(ae,"g");return function(we){return pe.test(we=null==we?"":""+we)?we.replace(Oe,J):we}}var ho={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},va=ga(ho),gt=ga(pr(ho)),vs=xe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ki=/(.)^/,Wa={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$a=/\\|'|\r|\n|\u2028|\u2029/g;function Vn(F){return"\\"+Wa[F]}var ea=/^\s*(\w|\$)+\s*$/,js=0;function Ji(F,J,ae,pe,Oe){if(!(pe instanceof J))return F.apply(ae,Oe);var we=me(F.prototype),l=F.apply(we,Oe);return ye(l)?l:we}var po=q(function(F,J){var ae=po.placeholder,pe=function(){for(var Oe=0,we=J.length,l=Array(we),d=0;d<we;d++)l[d]=J[d]===ae?arguments[Oe++]:J[d];for(;Oe<arguments.length;)l.push(arguments[Oe++]);return Ji(F,pe,this,this,l)};return pe});po.placeholder=xe;var Qi=q(function(F,J,ae){if(!Ot(F))throw new TypeError("Bind must be called on a function");var pe=q(function(Oe){return Ji(F,pe,J,this,ae.concat(Oe))});return pe}),qt=Dt(Zt);function ui(F,J,ae,pe){if(pe=pe||[],J||0===J){if(J<=0)return pe.concat(F)}else J=1/0;for(var Oe=pe.length,we=0,l=Zt(F);we<l;we++){var d=F[we];if(qt(d)&&(Vr(d)||qe(d)))if(J>1)ui(d,J-1,ae,pe),Oe=pe.length;else for(var y=0,C=d.length;y<C;)pe[Oe++]=d[y++];else ae||(pe[Oe++]=d)}return pe}var Pt=q(function(F,J){var ae=(J=ui(J,!1,!1)).length;if(ae<1)throw new Error("bindAll must be passed function names");for(;ae--;){var pe=J[ae];F[pe]=Qi(F[pe],F)}return F}),Xr=q(function(F,J,ae){return setTimeout(function(){return F.apply(null,ae)},J)}),Di=po(Xr,xe,1);function _n(F){return function(){return!F.apply(this,arguments)}}function Zi(F,J){var ae;return function(){return--F>0&&(ae=J.apply(this,arguments)),F<=1&&(J=null),ae}}var kr=po(Zi,2);function Ya(F,J,ae){J=Br(J,ae);for(var pe,Oe=G(F),we=0,l=Oe.length;we<l;we++)if(J(F[pe=Oe[we]],pe,F))return pe}function qi(F){return function(J,ae,pe){ae=Br(ae,pe);for(var Oe=Zt(J),we=F>0?0:Oe-1;we>=0&&we<Oe;we+=F)if(ae(J[we],we,J))return we;return-1}}var eo=qi(1),Fi=qi(-1);function to(F,J,ae,pe){for(var Oe=(ae=Br(ae,pe,1))(J),we=0,l=Zt(F);we<l;){var d=Math.floor((we+l)/2);ae(F[d])<Oe?we=d+1:l=d}return we}function ta(F,J,ae){return function(pe,Oe,we){var l=0,d=Zt(pe);if("number"==typeof we)F>0?l=we>=0?we:Math.max(we+d,l):d=we>=0?Math.min(we+1,d):we+d+1;else if(ae&&we&&d)return pe[we=ae(pe,Oe)]===Oe?we:-1;if(Oe!=Oe)return(we=J(x.call(pe,l,d),st))>=0?we+l:-1;for(we=F>0?l:d-1;we>=0&&we<d;we+=F)if(pe[we]===Oe)return we;return-1}}var ms=ta(1,eo,to),Hr=ta(-1,Fi);function wr(F,J,ae){var pe=(qt(F)?eo:Ya)(F,J,ae);if(void 0!==pe&&-1!==pe)return F[pe]}function Sr(F,J,ae){var pe,Oe;if(J=fo(J,ae),qt(F))for(pe=0,Oe=F.length;pe<Oe;pe++)J(F[pe],pe,F);else{var we=G(F);for(pe=0,Oe=we.length;pe<Oe;pe++)J(F[we[pe]],we[pe],F)}return F}function Zr(F,J,ae){J=Br(J,ae);for(var pe=!qt(F)&&G(F),Oe=(pe||F).length,we=Array(Oe),l=0;l<Oe;l++){var d=pe?pe[l]:l;we[l]=J(F[d],d,F)}return we}function ma(F){var J=function(ae,pe,Oe,we){var l=!qt(ae)&&G(ae),d=(l||ae).length,y=F>0?0:d-1;for(we||(Oe=ae[l?l[y]:y],y+=F);y>=0&&y<d;y+=F){var C=l?l[y]:y;Oe=pe(Oe,ae[C],C,ae)}return Oe};return function(ae,pe,Oe,we){var l=arguments.length>=3;return J(ae,fo(pe,we,4),Oe,l)}}var na=ma(1),yi=ma(-1);function Kr(F,J,ae){var pe=[];return J=Br(J,ae),Sr(F,function(Oe,we,l){J(Oe,we,l)&&pe.push(Oe)}),pe}function no(F,J,ae){J=Br(J,ae);for(var pe=!qt(F)&&G(F),Oe=(pe||F).length,we=0;we<Oe;we++){var l=pe?pe[we]:we;if(!J(F[l],l,F))return!1}return!0}function Lo(F,J,ae){J=Br(J,ae);for(var pe=!qt(F)&&G(F),Oe=(pe||F).length,we=0;we<Oe;we++){var l=pe?pe[we]:we;if(J(F[l],l,F))return!0}return!1}function qr(F,J,ae,pe){return qt(F)||(F=ai(F)),("number"!=typeof ae||pe)&&(ae=0),ms(F,J,ae)>=0}var ro=q(function(F,J,ae){var pe,Oe;return Ot(J)?Oe=J:(J=co(J),pe=J.slice(0,-1),J=J[J.length-1]),Zr(F,function(we){var l=Oe;if(!l){if(pe&&pe.length&&(we=Zo(we,pe)),null==we)return;l=we[J]}return null==l?l:l.apply(we,ae)})});function Ti(F,J){return Zr(F,ko(J))}function go(F,J,ae){var pe,Oe,we=-1/0,l=-1/0;if(null==J||"number"==typeof J&&"object"!=typeof F[0]&&null!=F)for(var d=0,y=(F=qt(F)?F:ai(F)).length;d<y;d++)null!=(pe=F[d])&&pe>we&&(we=pe);else J=Br(J,ae),Sr(F,function(C,N,D){((Oe=J(C,N,D))>l||Oe===-1/0&&we===-1/0)&&(we=C,l=Oe)});return we}var ya=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function xa(F){return F?Vr(F)?x.call(F):je(F)?F.match(ya):qt(F)?Zr(F,si):ai(F):[]}function ra(F,J,ae){if(null==J||ae)return qt(F)||(F=ai(F)),F[Ga(F.length-1)];var pe=xa(F),Oe=Zt(pe);J=Math.max(Math.min(J,Oe),0);for(var we=Oe-1,l=0;l<J;l++){var d=Ga(l,we),y=pe[l];pe[l]=pe[d],pe[d]=y}return pe.slice(0,J)}function Ro(F,J){return function(ae,pe,Oe){var we=J?[[],[]]:{};return pe=Br(pe,Oe),Sr(ae,function(l,d){var y=pe(l,d,ae);F(we,l,y)}),we}}var Xa=Ro(function(F,J,ae){er(F,ae)?F[ae].push(J):F[ae]=[J]}),_a=Ro(function(F,J,ae){F[ae]=J}),Ka=Ro(function(F,J,ae){er(F,ae)?F[ae]++:F[ae]=1}),ba=Ro(function(F,J,ae){F[ae?0:1].push(J)},!0);function Ja(F,J,ae){return J in ae}var Qa=q(function(F,J){var ae={},pe=J[0];if(null==F)return ae;Ot(pe)?(J.length>1&&(pe=fo(pe,J[1])),J=kt(F)):(pe=Ja,J=ui(J,!1,!1),F=Object(F));for(var Oe=0,we=J.length;Oe<we;Oe++){var l=J[Oe],d=F[l];pe(d,l,F)&&(ae[l]=d)}return ae}),ys=q(function(F,J){var ae,pe=J[0];return Ot(pe)?(pe=_n(pe),J.length>1&&(ae=J[1])):(J=Zr(ui(J,!1,!1),String),pe=function(Oe,we){return!qr(J,we)}),Qa(F,pe,ae)});function Za(F,J,ae){return x.call(F,0,Math.max(0,F.length-(null==J||ae?1:J)))}function Ca(F,J,ae){return null==F||F.length<1?null==J||ae?void 0:[]:null==J||ae?F[0]:Za(F,F.length-J)}function Ei(F,J,ae){return x.call(F,null==J||ae?1:J)}var No=q(function(F,J){return J=ui(J,!0,!0),Kr(F,function(ae){return!qr(J,ae)})}),xs=q(function(F,J){return No(F,J)});function io(F,J,ae,pe){Fe(J)||(pe=ae,ae=J,J=!1),null!=ae&&(ae=Br(ae,pe));for(var Oe=[],we=[],l=0,d=Zt(F);l<d;l++){var y=F[l],C=ae?ae(y,l,F):y;J&&!ae?(l&&we===C||Oe.push(y),we=C):ae?qr(we,C)||(we.push(C),Oe.push(y)):qr(Oe,y)||Oe.push(y)}return Oe}var Vi=q(function(F){return io(ui(F,!0,!0))});function wa(F){for(var J=F&&go(F,Zt).length||0,ae=Array(J),pe=0;pe<J;pe++)ae[pe]=Ti(F,pe);return ae}var Hn=q(wa);function De(F,J){return F._chain?xe(J).chain():J}function ei(F){return Sr(dr(F),function(J){var ae=xe[J]=F[J];xe.prototype[J]=function(){var pe=[this._wrapped];return T.apply(pe,arguments),De(this,ae.apply(xe,pe))}}),xe}Sr(["pop","push","reverse","shift","sort","splice","unshift"],function(F){var J=g[F];xe.prototype[F]=function(){var ae=this._wrapped;return null!=ae&&(J.apply(ae,arguments),"shift"!==F&&"splice"!==F||0!==ae.length||delete ae[0]),De(this,ae)}}),Sr(["concat","join","slice"],function(F){var J=g[F];xe.prototype[F]=function(){var ae=this._wrapped;return null!=ae&&(ae=J.apply(ae,arguments)),De(this,ae)}});var ti=ei({__proto__:null,VERSION:W,restArguments:q,isObject:ye,isNull:function(F){return null===F},isUndefined:Ee,isBoolean:Fe,isElement:function(F){return!(!F||1!==F.nodeType)},isString:je,isNumber:tt,isDate:et,isRegExp:ot,isError:ut,isSymbol:mt,isArrayBuffer:At,isDataView:fr,isArray:Vr,isFunction:Ot,isArguments:qe,isFinite:function(F){return!mt(F)&&i(F)&&!isNaN(parseFloat(F))},isNaN:st,isTypedArray:ln,isEmpty:function(F){if(null==F)return!0;var J=Zt(F);return"number"==typeof J&&(Vr(F)||je(F)||qe(F))?0===J:0===Zt(G(F))},isMatch:re,isEqual:function(F,J){return pt(F,J)},isMap:Et,isWeakMap:Un,isSet:tr,isWeakSet:br,keys:G,allKeys:kt,values:ai,pairs:function(F){for(var J=G(F),ae=J.length,pe=Array(ae),Oe=0;Oe<ae;Oe++)pe[Oe]=[J[Oe],F[J[Oe]]];return pe},invert:pr,functions:dr,methods:dr,extend:za,extendOwn:Mo,assign:Mo,defaults:Qo,create:function(F,J){var ae=me(F);return J&&Mo(ae,J),ae},clone:function(F){return ye(F)?Vr(F)?F.slice():za({},F):F},tap:function(F,J){return J(F),F},get:yt,has:function(F,J){for(var ae=(J=co(J)).length,pe=0;pe<ae;pe++){var Oe=J[pe];if(!er(F,Oe))return!1;F=F[Oe]}return!!ae},mapObject:function(F,J,ae){J=Br(J,ae);for(var pe=G(F),Oe=pe.length,we={},l=0;l<Oe;l++){var d=pe[l];we[d]=J(F[d],d,F)}return we},identity:si,constant:xt,noop:Ua,toPath:mi,property:ko,propertyOf:function(F){return null==F?Ua:function(J){return yt(F,J)}},matcher:Oo,matches:Oo,times:function(F,J,ae){var pe=Array(Math.max(0,F));J=fo(J,ae,1);for(var Oe=0;Oe<F;Oe++)pe[Oe]=J(Oe);return pe},random:Ga,now:Yr,escape:va,unescape:gt,templateSettings:vs,template:function(F,J,ae){!J&&ae&&(J=ae),J=Qo({},J,xe.templateSettings);var pe=RegExp([(J.escape||Ki).source,(J.interpolate||Ki).source,(J.evaluate||Ki).source].join("|")+"|$","g"),Oe=0,we="__p+='";F.replace(pe,function(C,N,D,X,ue){return we+=F.slice(Oe,ue).replace($a,Vn),Oe=ue+C.length,N?we+="'+\n((__t=("+N+"))==null?'':_.escape(__t))+\n'":D?we+="'+\n((__t=("+D+"))==null?'':__t)+\n'":X&&(we+="';\n"+X+"\n__p+='"),C}),we+="';\n";var l,d=J.variable;if(d){if(!ea.test(d))throw new Error("variable is not a bare identifier: "+d)}else we="with(obj||{}){\n"+we+"}\n",d="obj";we="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+we+"return __p;\n";try{l=new Function(d,"_",we)}catch(C){throw C.source=we,C}var y=function(C){return l.call(this,C,xe)};return y.source="function("+d+"){\n"+we+"}",y},result:function(F,J,ae){var pe=(J=co(J)).length;if(!pe)return Ot(ae)?ae.call(F):ae;for(var Oe=0;Oe<pe;Oe++){var we=null==F?void 0:F[J[Oe]];void 0===we&&(we=ae,Oe=pe),F=Ot(we)?we.call(F):we}return F},uniqueId:function(F){var J=++js+"";return F?F+J:J},chain:function(F){var J=xe(F);return J._chain=!0,J},iteratee:qo,partial:po,bind:Qi,bindAll:Pt,memoize:function(F,J){var ae=function(pe){var Oe=ae.cache,we=""+(J?J.apply(this,arguments):pe);return er(Oe,we)||(Oe[we]=F.apply(this,arguments)),Oe[we]};return ae.cache={},ae},delay:Xr,defer:Di,throttle:function(F,J,ae){var pe,Oe,we,l,d=0;ae||(ae={});var y=function(){d=!1===ae.leading?0:Yr(),pe=null,l=F.apply(Oe,we),pe||(Oe=we=null)},C=function(){var N=Yr();d||!1!==ae.leading||(d=N);var D=J-(N-d);return Oe=this,we=arguments,D<=0||D>J?(pe&&(clearTimeout(pe),pe=null),d=N,l=F.apply(Oe,we),pe||(Oe=we=null)):pe||!1===ae.trailing||(pe=setTimeout(y,D)),l};return C.cancel=function(){clearTimeout(pe),d=0,pe=Oe=we=null},C},debounce:function(F,J,ae){var pe,Oe,we,l,d,y=function(){var N=Yr()-Oe;J>N?pe=setTimeout(y,J-N):(pe=null,ae||(l=F.apply(d,we)),pe||(we=d=null))},C=q(function(N){return d=this,we=N,Oe=Yr(),pe||(pe=setTimeout(y,J),ae&&(l=F.apply(d,we))),l});return C.cancel=function(){clearTimeout(pe),pe=we=d=null},C},wrap:function(F,J){return po(J,F)},negate:_n,compose:function(){var F=arguments,J=F.length-1;return function(){for(var ae=J,pe=F[J].apply(this,arguments);ae--;)pe=F[ae].call(this,pe);return pe}},after:function(F,J){return function(){if(--F<1)return J.apply(this,arguments)}},before:Zi,once:kr,findKey:Ya,findIndex:eo,findLastIndex:Fi,sortedIndex:to,indexOf:ms,lastIndexOf:Hr,find:wr,detect:wr,findWhere:function(F,J){return wr(F,Oo(J))},each:Sr,forEach:Sr,map:Zr,collect:Zr,reduce:na,foldl:na,inject:na,reduceRight:yi,foldr:yi,filter:Kr,select:Kr,reject:function(F,J,ae){return Kr(F,_n(Br(J)),ae)},every:no,all:no,some:Lo,any:Lo,contains:qr,includes:qr,include:qr,invoke:ro,pluck:Ti,where:function(F,J){return Kr(F,Oo(J))},max:go,min:function(F,J,ae){var pe,Oe,we=1/0,l=1/0;if(null==J||"number"==typeof J&&"object"!=typeof F[0]&&null!=F)for(var d=0,y=(F=qt(F)?F:ai(F)).length;d<y;d++)null!=(pe=F[d])&&pe<we&&(we=pe);else J=Br(J,ae),Sr(F,function(C,N,D){((Oe=J(C,N,D))<l||Oe===1/0&&we===1/0)&&(we=C,l=Oe)});return we},shuffle:function(F){return ra(F,1/0)},sample:ra,sortBy:function(F,J,ae){var pe=0;return J=Br(J,ae),Ti(Zr(F,function(Oe,we,l){return{value:Oe,index:pe++,criteria:J(Oe,we,l)}}).sort(function(Oe,we){var l=Oe.criteria,d=we.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return Oe.index-we.index}),"value")},groupBy:Xa,indexBy:_a,countBy:Ka,partition:ba,toArray:xa,size:function(F){return null==F?0:qt(F)?F.length:G(F).length},pick:Qa,omit:ys,first:Ca,head:Ca,take:Ca,initial:Za,last:function(F,J,ae){return null==F||F.length<1?null==J||ae?void 0:[]:null==J||ae?F[F.length-1]:Ei(F,Math.max(0,F.length-J))},rest:Ei,tail:Ei,drop:Ei,compact:function(F){return Kr(F,Boolean)},flatten:function(F,J){return ui(F,J,!1)},without:xs,uniq:io,unique:io,union:Vi,intersection:function(F){for(var J=[],ae=arguments.length,pe=0,Oe=Zt(F);pe<Oe;pe++){var we=F[pe];if(!qr(J,we)){var l;for(l=1;l<ae&&qr(arguments[l],we);l++);l===ae&&J.push(we)}}return J},difference:No,unzip:wa,transpose:wa,zip:Hn,object:function(F,J){for(var ae={},pe=0,Oe=Zt(F);pe<Oe;pe++)J?ae[F[pe]]=J[pe]:ae[F[pe][0]]=F[pe][1];return ae},range:function(F,J,ae){null==J&&(J=F||0,F=0),ae||(ae=J<F?-1:1);for(var pe=Math.max(Math.ceil((J-F)/ae),0),Oe=Array(pe),we=0;we<pe;we++,F+=ae)Oe[we]=F;return Oe},chunk:function(F,J){if(null==J||J<1)return[];for(var ae=[],pe=0,Oe=F.length;pe<Oe;)ae.push(x.call(F,pe,pe+=J));return ae},mixin:ei,default:xe});return ti._=ti,ti}()}}]);